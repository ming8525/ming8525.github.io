"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-action-bar_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-action-bar.entry.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-action-bar.entry.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_action_bar: () => (/* binding */ ActionBar)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _conditionalSlot_f6710875_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./conditionalSlot-f6710875.js */ "./node_modules/@esri/calcite-components/dist/esm/conditionalSlot-f6710875.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ExpandToggle-aec4513c.js */ "./node_modules/@esri/calcite-components/dist/esm/ExpandToggle-aec4513c.js");
/* harmony import */ var _debounce_85958bb1_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./debounce-85958bb1.js */ "./node_modules/@esri/calcite-components/dist/esm/debounce-85958bb1.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _resources_49a6fded_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./resources-49a6fded.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-49a6fded.js");
/* harmony import */ var _resources_402f6e5d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./resources-402f6e5d.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-402f6e5d.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */















const CSS = {
  actionGroupEnd: "action-group--end",
};
const SLOTS = {
  actionsEnd: "actions-end",
  bottomActions: "bottom-actions",
  expandTooltip: "expand-tooltip",
};

const actionBarCss = ":host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{pointer-events:auto;display:inline-flex;align-self:stretch;--calcite-action-bar-expanded-max-width:auto}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=vertical][overflow-actions-disabled]){overflow-y:auto}:host([layout=horizontal][overflow-actions-disabled]){overflow-x:auto}:host([layout=vertical][expanded]){max-inline-size:var(--calcite-action-bar-expanded-max-width)}::slotted(calcite-action-group){border-block-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-block-end:0;border-inline-end:1px solid var(--calcite-color-border-3)}:host([layout=horizontal][expand-disabled]) ::slotted(calcite-action-group:last-of-type){border-inline-end:0}::slotted(calcite-action-group:last-child){border-block-end:0;border-inline-end:0}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}";

const ActionBar = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteActionBarToggle = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteActionBarToggle", 6);
    this.mutationObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_5__.c)("mutation", () => {
      const { el, expanded } = this;
      (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.t)({ el, expanded });
      this.overflowActions();
    });
    this.resizeObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_5__.c)("resize", (entries) => this.resizeHandlerEntries(entries));
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.actionMenuOpenHandler = (event) => {
      if (event.target.menuOpen) {
        const composedPath = event.composedPath();
        Array.from(this.el.querySelectorAll("calcite-action-group")).forEach((group) => {
          if (!composedPath.includes(group)) {
            group.menuOpen = false;
          }
        });
      }
    };
    this.resizeHandlerEntries = (entries) => {
      entries.forEach(this.resizeHandler);
    };
    this.resizeHandler = (entry) => {
      const { width, height } = entry.contentRect;
      this.resize({ width, height });
    };
    this.resize = (0,_debounce_85958bb1_js__WEBPACK_IMPORTED_MODULE_8__.d)(({ width, height }) => {
      const { el, expanded, expandDisabled, layout, overflowActionsDisabled } = this;
      if (overflowActionsDisabled ||
        (layout === "vertical" && !height) ||
        (layout === "horizontal" && !width)) {
        return;
      }
      const actions = (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.q)(el);
      const actionCount = expandDisabled ? actions.length : actions.length + 1;
      const actionGroups = Array.from(el.querySelectorAll("calcite-action-group"));
      this.setGroupLayout(actionGroups);
      const groupCount = this.hasActionsEnd || this.hasBottomActions || !expandDisabled
        ? actionGroups.length + 1
        : actionGroups.length;
      const { actionHeight, actionWidth } = (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.g)(actions);
      const overflowCount = (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.b)({
        layout,
        actionCount,
        actionHeight,
        actionWidth,
        height,
        width,
        groupCount,
      });
      (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.a)({
        actionGroups,
        expanded,
        overflowCount,
      });
    }, _ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.o);
    this.toggleExpand = () => {
      this.expanded = !this.expanded;
      this.calciteActionBarToggle.emit();
    };
    this.setExpandToggleRef = (el) => {
      this.expandToggleEl = el;
    };
    this.handleDefaultSlotChange = (event) => {
      const groups = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__.s)(event).filter((el) => el.matches("calcite-action-group"));
      this.setGroupLayout(groups);
    };
    this.handleActionsEndSlotChange = (event) => {
      this.hasActionsEnd = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__.b)(event);
    };
    this.handleBottomActionsSlotChange = (event) => {
      this.hasBottomActions = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__.b)(event);
    };
    this.handleTooltipSlotChange = (event) => {
      const tooltips = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__.s)(event).filter((el) => el?.matches("calcite-tooltip"));
      this.expandTooltip = tooltips[0];
    };
    this.actionsEndGroupLabel = undefined;
    this.expandDisabled = false;
    this.expanded = false;
    this.layout = "vertical";
    this.overflowActionsDisabled = false;
    this.position = undefined;
    this.scale = undefined;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.effectiveLocale = undefined;
    this.hasActionsEnd = false;
    this.hasBottomActions = false;
    this.expandTooltip = undefined;
    this.defaultMessages = undefined;
  }
  expandHandler() {
    this.overflowActions();
  }
  expandedHandler() {
    const { el, expanded } = this;
    (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.t)({ el, expanded });
    this.overflowActions();
  }
  layoutHandler() {
    this.updateGroups();
  }
  overflowDisabledHandler(overflowActionsDisabled) {
    if (overflowActionsDisabled) {
      this.resizeObserver?.disconnect();
      return;
    }
    this.resizeObserver?.observe(this.el);
    this.overflowActions();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_6__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  componentDidLoad() {
    const { el, expanded } = this;
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.a)(this);
    (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.t)({ el, expanded });
    this.overflowActions();
  }
  connectedCallback() {
    const { el, expanded } = this;
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    (0,_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.t)({ el, expanded });
    this.mutationObserver?.observe(el, { childList: true, subtree: true });
    if (!this.overflowActionsDisabled) {
      this.resizeObserver?.observe(el);
    }
    this.overflowActions();
    (0,_conditionalSlot_f6710875_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.s)(this);
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
  }
  disconnectedCallback() {
    this.mutationObserver?.disconnect();
    this.resizeObserver?.disconnect();
    (0,_conditionalSlot_f6710875_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_6__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Methods
  //
  // --------------------------------------------------------------------------
  /**
   * Overflows actions that won't fit into menus.
   *
   * @internal
   */
  async overflowActions() {
    this.resize({ width: this.el.clientWidth, height: this.el.clientHeight });
  }
  /**
   * Sets focus on the component's first focusable element.
   */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_2__.f)(this.el);
  }
  updateGroups() {
    this.setGroupLayout(Array.from(this.el.querySelectorAll("calcite-action-group")));
  }
  setGroupLayout(groups) {
    groups.forEach((group) => (group.layout = this.layout));
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderBottomActionGroup() {
    const { expanded, expandDisabled, el, position, toggleExpand, scale, layout, messages, actionsEndGroupLabel, } = this;
    const expandToggleNode = !expandDisabled ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_ExpandToggle_aec4513c_js__WEBPACK_IMPORTED_MODULE_7__.E, { collapseText: messages.collapse, el: el, expandText: messages.expand, expanded: expanded, position: position, scale: scale, toggle: toggleExpand, tooltip: this.expandTooltip,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setExpandToggleRef })) : null;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action-group", { class: CSS.actionGroupEnd, hidden: this.expandDisabled && !(this.hasActionsEnd || this.hasBottomActions), label: actionsEndGroupLabel, layout: layout, scale: scale }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.actionsEnd, onSlotchange: this.handleActionsEndSlotChange }), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.bottomActions, onSlotchange: this.handleBottomActionsSlotChange }), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.expandTooltip, onSlotchange: this.handleTooltipSlotChange }), expandToggleNode));
  }
  render() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, { onCalciteActionMenuOpen: this.actionMenuOpenHandler }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange }), this.renderBottomActionGroup()));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "expandDisabled": ["expandHandler"],
    "expanded": ["expandedHandler"],
    "layout": ["layoutHandler"],
    "overflowActionsDisabled": ["overflowDisabledHandler"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
};
ActionBar.style = actionBarCss;



//# sourceMappingURL=calcite-action-bar.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLWFjdGlvbi1iYXJfZW50cnlfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNkc7QUFDaUI7QUFDSztBQUNaO0FBQ2hDO0FBQ3pCO0FBQzZEO0FBQzJGO0FBQy9KO0FBQzNCO0FBQ0s7QUFDTjtBQUNNO0FBQ0E7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCLHNCQUFzQixtREFBbUQsa0NBQWtDLHNDQUFzQyxRQUFRLHNCQUFzQixNQUFNLG9CQUFvQixvQkFBb0IsbUJBQW1CLDZDQUE2Qyx5QkFBeUIsc0JBQXNCLDRDQUE0Qyx3QkFBd0IsMkJBQTJCLG1CQUFtQiw4Q0FBOEMseUJBQXlCLG9EQUFvRCxnQkFBZ0Isc0RBQXNELGdCQUFnQixtQ0FBbUMsNkRBQTZELGdDQUFnQyx5REFBeUQsMkRBQTJELG1CQUFtQiwwREFBMEQseUZBQXlGLG9CQUFvQiwyQ0FBMkMsbUJBQW1CLG9CQUFvQixtQkFBbUIseUJBQXlCLGdCQUFnQixhQUFhLFNBQVMsYUFBYTs7QUFFMXdDO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQixrQ0FBa0MscURBQVc7QUFDN0MsNEJBQTRCLHlEQUFjO0FBQzFDLGNBQWMsZUFBZTtBQUM3QixNQUFNLDREQUFxQixHQUFHLGNBQWM7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLHlEQUFjO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQjtBQUM5QixvQkFBb0IsZUFBZTtBQUNuQztBQUNBLGtCQUFrQix3REFBUSxJQUFJLGVBQWU7QUFDN0MsY0FBYyxnRUFBZ0U7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw0REFBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDRCQUE0QixFQUFFLDREQUFrQjtBQUM5RCw0QkFBNEIsNERBQWdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU0sNERBQWU7QUFDckI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUssRUFBRSx3REFBMkI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixtREFBNkI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG1EQUE0QjtBQUN2RDtBQUNBO0FBQ0EsOEJBQThCLG1EQUE0QjtBQUMxRDtBQUNBO0FBQ0EsdUJBQXVCLG1EQUE2QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0IsSUFBSSw0REFBcUIsR0FBRyxjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFjO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCLElBQUksd0RBQWtCO0FBQ3RCLElBQUksNERBQXFCLEdBQUcsY0FBYztBQUMxQztBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0IsSUFBSSxzREFBZ0I7QUFDcEIsSUFBSSxtREFBZTtBQUNuQixJQUFJLDREQUFxQixHQUFHLGNBQWM7QUFDMUMseUNBQXlDLGdDQUFnQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksK0RBQStCO0FBQ25DO0FBQ0E7QUFDQSxJQUFJLHdEQUFzQjtBQUMxQixVQUFVLG1EQUFhO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBa0M7QUFDdEMsSUFBSSxzREFBbUI7QUFDdkIsSUFBSSxtREFBa0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBEQUEwRDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx3REFBa0I7QUFDNUIsSUFBSSxtREFBa0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVHQUF1RztBQUNuSCxnREFBZ0QscURBQUMsQ0FBQyx3REFBWSxJQUFJO0FBQ2xFO0FBQ0Esb0NBQW9DO0FBQ3BDLFlBQVkscURBQUMsMkJBQTJCLHFLQUFxSyxFQUFFLHFEQUFDLFdBQVcsdUVBQXVFLEdBQUcscURBQUMsV0FBVyw2RUFBNkUsR0FBRyxxREFBQyxXQUFXLHVFQUF1RTtBQUNwZDtBQUNBO0FBQ0EsWUFBWSxxREFBQyxDQUFDLGlEQUFJLElBQUkscURBQXFELEVBQUUscURBQUMsV0FBVyw0Q0FBNEM7QUFDckk7QUFDQSw0QkFBNEI7QUFDNUIsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTJDOztBQUUzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtYWN0aW9uLWJhci5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudCwgZCBhcyBkaXNjb25uZWN0Q29uZGl0aW9uYWxTbG90Q29tcG9uZW50IH0gZnJvbSAnLi9jb25kaXRpb25hbFNsb3QtZjY3MTA4NzUuanMnO1xuaW1wb3J0IHsgcyBhcyBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cywgYiBhcyBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50LCBmIGFzIGZvY3VzRmlyc3RUYWJiYWJsZSB9IGZyb20gJy4vZG9tLWVkMDBhNTg1LmpzJztcbmltcG9ydCB7IGEgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBzIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS1iMTczOTZlMC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLTZlNzgzY2YwLmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy03MWQzMzJkYi5qcyc7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZU1lc3NhZ2VzLCBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcyB9IGZyb20gJy4vdDluLTBiY2RjYTU0LmpzJztcbmltcG9ydCB7IHQgYXMgdG9nZ2xlQ2hpbGRBY3Rpb25UZXh0LCBvIGFzIG92ZXJmbG93QWN0aW9uc0RlYm91bmNlSW5NcywgcSBhcyBxdWVyeUFjdGlvbnMsIGcgYXMgZ2VBY3Rpb25EaW1lbnNpb25zLCBhIGFzIG92ZXJmbG93QWN0aW9ucywgRSBhcyBFeHBhbmRUb2dnbGUsIGIgYXMgZ2V0T3ZlcmZsb3dDb3VudCB9IGZyb20gJy4vRXhwYW5kVG9nZ2xlLWFlYzQ1MTNjLmpzJztcbmltcG9ydCB7IGQgYXMgZGVib3VuY2UgfSBmcm9tICcuL2RlYm91bmNlLTg1OTU4YmIxLmpzJztcbmltcG9ydCAnLi9ndWlkLTIxZmVjZmE0LmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtY2Y4MjM4OGMuanMnO1xuaW1wb3J0ICcuL2tleS02MWY4MmRkYi5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLTQ5YTZmZGVkLmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtNDAyZjZlNWQuanMnO1xuXG5jb25zdCBDU1MgPSB7XG4gIGFjdGlvbkdyb3VwRW5kOiBcImFjdGlvbi1ncm91cC0tZW5kXCIsXG59O1xuY29uc3QgU0xPVFMgPSB7XG4gIGFjdGlvbnNFbmQ6IFwiYWN0aW9ucy1lbmRcIixcbiAgYm90dG9tQWN0aW9uczogXCJib3R0b20tYWN0aW9uc1wiLFxuICBleHBhbmRUb29sdGlwOiBcImV4cGFuZC10b29sdGlwXCIsXG59O1xuXG5jb25zdCBhY3Rpb25CYXJDc3MgPSBcIjpob3N0e2JveC1zaXppbmc6Ym9yZGVyLWJveDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMik7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKX06aG9zdCAqe2JveC1zaXppbmc6Ym9yZGVyLWJveH06aG9zdHtwb2ludGVyLWV2ZW50czphdXRvO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24tc2VsZjpzdHJldGNoOy0tY2FsY2l0ZS1hY3Rpb24tYmFyLWV4cGFuZGVkLW1heC13aWR0aDphdXRvfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdKXtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIC5hY3Rpb24tZ3JvdXAtLWVuZHttYXJnaW4tYmxvY2stc3RhcnQ6YXV0b306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKXtmbGV4LWRpcmVjdGlvbjpyb3d9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLmFjdGlvbi1ncm91cC0tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6YXV0b306aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtvdmVyZmxvdy1hY3Rpb25zLWRpc2FibGVkXSl7b3ZlcmZsb3cteTphdXRvfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bb3ZlcmZsb3ctYWN0aW9ucy1kaXNhYmxlZF0pe292ZXJmbG93LXg6YXV0b306aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtleHBhbmRlZF0pe21heC1pbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWFjdGlvbi1iYXItZXhwYW5kZWQtbWF4LXdpZHRoKX06OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tZ3JvdXApe2JvcmRlci1ibG9jay1lbmQ6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF0pIDo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1ncm91cCl7Ym9yZGVyLWJsb2NrLWVuZDowO2JvcmRlci1pbmxpbmUtZW5kOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2V4cGFuZC1kaXNhYmxlZF0pIDo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1ncm91cDpsYXN0LW9mLXR5cGUpe2JvcmRlci1pbmxpbmUtZW5kOjB9OjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uLWdyb3VwOmxhc3QtY2hpbGQpe2JvcmRlci1ibG9jay1lbmQ6MDtib3JkZXItaW5saW5lLWVuZDowfS5hY3Rpb24tZ3JvdXAtLWVuZHtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IEFjdGlvbkJhciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5jYWxjaXRlQWN0aW9uQmFyVG9nZ2xlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlQWN0aW9uQmFyVG9nZ2xlXCIsIDYpO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwibXV0YXRpb25cIiwgKCkgPT4ge1xuICAgICAgY29uc3QgeyBlbCwgZXhwYW5kZWQgfSA9IHRoaXM7XG4gICAgICB0b2dnbGVDaGlsZEFjdGlvblRleHQoeyBlbCwgZXhwYW5kZWQgfSk7XG4gICAgICB0aGlzLm92ZXJmbG93QWN0aW9ucygpO1xuICAgIH0pO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcihcInJlc2l6ZVwiLCAoZW50cmllcykgPT4gdGhpcy5yZXNpemVIYW5kbGVyRW50cmllcyhlbnRyaWVzKSk7XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5hY3Rpb25NZW51T3BlbkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQubWVudU9wZW4pIHtcbiAgICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gICAgICAgIEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS1hY3Rpb24tZ3JvdXBcIikpLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICAgICAgaWYgKCFjb21wb3NlZFBhdGguaW5jbHVkZXMoZ3JvdXApKSB7XG4gICAgICAgICAgICBncm91cC5tZW51T3BlbiA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnJlc2l6ZUhhbmRsZXJFbnRyaWVzID0gKGVudHJpZXMpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCh0aGlzLnJlc2l6ZUhhbmRsZXIpO1xuICAgIH07XG4gICAgdGhpcy5yZXNpemVIYW5kbGVyID0gKGVudHJ5KSA9PiB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGVudHJ5LmNvbnRlbnRSZWN0O1xuICAgICAgdGhpcy5yZXNpemUoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIH07XG4gICAgdGhpcy5yZXNpemUgPSBkZWJvdW5jZSgoeyB3aWR0aCwgaGVpZ2h0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgZWwsIGV4cGFuZGVkLCBleHBhbmREaXNhYmxlZCwgbGF5b3V0LCBvdmVyZmxvd0FjdGlvbnNEaXNhYmxlZCB9ID0gdGhpcztcbiAgICAgIGlmIChvdmVyZmxvd0FjdGlvbnNEaXNhYmxlZCB8fFxuICAgICAgICAobGF5b3V0ID09PSBcInZlcnRpY2FsXCIgJiYgIWhlaWdodCkgfHxcbiAgICAgICAgKGxheW91dCA9PT0gXCJob3Jpem9udGFsXCIgJiYgIXdpZHRoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBhY3Rpb25zID0gcXVlcnlBY3Rpb25zKGVsKTtcbiAgICAgIGNvbnN0IGFjdGlvbkNvdW50ID0gZXhwYW5kRGlzYWJsZWQgPyBhY3Rpb25zLmxlbmd0aCA6IGFjdGlvbnMubGVuZ3RoICsgMTtcbiAgICAgIGNvbnN0IGFjdGlvbkdyb3VwcyA9IEFycmF5LmZyb20oZWwucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtYWN0aW9uLWdyb3VwXCIpKTtcbiAgICAgIHRoaXMuc2V0R3JvdXBMYXlvdXQoYWN0aW9uR3JvdXBzKTtcbiAgICAgIGNvbnN0IGdyb3VwQ291bnQgPSB0aGlzLmhhc0FjdGlvbnNFbmQgfHwgdGhpcy5oYXNCb3R0b21BY3Rpb25zIHx8ICFleHBhbmREaXNhYmxlZFxuICAgICAgICA/IGFjdGlvbkdyb3Vwcy5sZW5ndGggKyAxXG4gICAgICAgIDogYWN0aW9uR3JvdXBzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHsgYWN0aW9uSGVpZ2h0LCBhY3Rpb25XaWR0aCB9ID0gZ2VBY3Rpb25EaW1lbnNpb25zKGFjdGlvbnMpO1xuICAgICAgY29uc3Qgb3ZlcmZsb3dDb3VudCA9IGdldE92ZXJmbG93Q291bnQoe1xuICAgICAgICBsYXlvdXQsXG4gICAgICAgIGFjdGlvbkNvdW50LFxuICAgICAgICBhY3Rpb25IZWlnaHQsXG4gICAgICAgIGFjdGlvbldpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBncm91cENvdW50LFxuICAgICAgfSk7XG4gICAgICBvdmVyZmxvd0FjdGlvbnMoe1xuICAgICAgICBhY3Rpb25Hcm91cHMsXG4gICAgICAgIGV4cGFuZGVkLFxuICAgICAgICBvdmVyZmxvd0NvdW50LFxuICAgICAgfSk7XG4gICAgfSwgb3ZlcmZsb3dBY3Rpb25zRGVib3VuY2VJbk1zKTtcbiAgICB0aGlzLnRvZ2dsZUV4cGFuZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuZXhwYW5kZWQgPSAhdGhpcy5leHBhbmRlZDtcbiAgICAgIHRoaXMuY2FsY2l0ZUFjdGlvbkJhclRvZ2dsZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLnNldEV4cGFuZFRvZ2dsZVJlZiA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5leHBhbmRUb2dnbGVFbCA9IGVsO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVEZWZhdWx0U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgZ3JvdXBzID0gc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMoZXZlbnQpLmZpbHRlcigoZWwpID0+IGVsLm1hdGNoZXMoXCJjYWxjaXRlLWFjdGlvbi1ncm91cFwiKSk7XG4gICAgICB0aGlzLnNldEdyb3VwTGF5b3V0KGdyb3Vwcyk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUFjdGlvbnNFbmRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0FjdGlvbnNFbmQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQm90dG9tQWN0aW9uc1Nsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzQm90dG9tQWN0aW9ucyA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVUb29sdGlwU2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgdG9vbHRpcHMgPSBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cyhldmVudCkuZmlsdGVyKChlbCkgPT4gZWw/Lm1hdGNoZXMoXCJjYWxjaXRlLXRvb2x0aXBcIikpO1xuICAgICAgdGhpcy5leHBhbmRUb29sdGlwID0gdG9vbHRpcHNbMF07XG4gICAgfTtcbiAgICB0aGlzLmFjdGlvbnNFbmRHcm91cExhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZXhwYW5kRGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5sYXlvdXQgPSBcInZlcnRpY2FsXCI7XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnNEaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMucG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhhc0FjdGlvbnNFbmQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0JvdHRvbUFjdGlvbnMgPSBmYWxzZTtcbiAgICB0aGlzLmV4cGFuZFRvb2x0aXAgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgZXhwYW5kSGFuZGxlcigpIHtcbiAgICB0aGlzLm92ZXJmbG93QWN0aW9ucygpO1xuICB9XG4gIGV4cGFuZGVkSGFuZGxlcigpIHtcbiAgICBjb25zdCB7IGVsLCBleHBhbmRlZCB9ID0gdGhpcztcbiAgICB0b2dnbGVDaGlsZEFjdGlvblRleHQoeyBlbCwgZXhwYW5kZWQgfSk7XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnMoKTtcbiAgfVxuICBsYXlvdXRIYW5kbGVyKCkge1xuICAgIHRoaXMudXBkYXRlR3JvdXBzKCk7XG4gIH1cbiAgb3ZlcmZsb3dEaXNhYmxlZEhhbmRsZXIob3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWQpIHtcbiAgICBpZiAob3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWQpIHtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgICB0aGlzLm92ZXJmbG93QWN0aW9ucygpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBjb25zdCB7IGVsLCBleHBhbmRlZCB9ID0gdGhpcztcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gICAgdG9nZ2xlQ2hpbGRBY3Rpb25UZXh0KHsgZWwsIGV4cGFuZGVkIH0pO1xuICAgIHRoaXMub3ZlcmZsb3dBY3Rpb25zKCk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgeyBlbCwgZXhwYW5kZWQgfSA9IHRoaXM7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgdG9nZ2xlQ2hpbGRBY3Rpb25UZXh0KHsgZWwsIGV4cGFuZGVkIH0pO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8ub2JzZXJ2ZShlbCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XG4gICAgaWYgKCF0aGlzLm92ZXJmbG93QWN0aW9uc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5vYnNlcnZlKGVsKTtcbiAgICB9XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnMoKTtcbiAgICBjb25uZWN0Q29uZGl0aW9uYWxTbG90Q29tcG9uZW50KHRoaXMpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgZGlzY29ubmVjdENvbmRpdGlvbmFsU2xvdENvbXBvbmVudCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKipcbiAgICogT3ZlcmZsb3dzIGFjdGlvbnMgdGhhdCB3b24ndCBmaXQgaW50byBtZW51cy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhc3luYyBvdmVyZmxvd0FjdGlvbnMoKSB7XG4gICAgdGhpcy5yZXNpemUoeyB3aWR0aDogdGhpcy5lbC5jbGllbnRXaWR0aCwgaGVpZ2h0OiB0aGlzLmVsLmNsaWVudEhlaWdodCB9KTtcbiAgfVxuICAvKipcbiAgICogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50J3MgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnQuXG4gICAqL1xuICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gICAgZm9jdXNGaXJzdFRhYmJhYmxlKHRoaXMuZWwpO1xuICB9XG4gIHVwZGF0ZUdyb3VwcygpIHtcbiAgICB0aGlzLnNldEdyb3VwTGF5b3V0KEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS1hY3Rpb24tZ3JvdXBcIikpKTtcbiAgfVxuICBzZXRHcm91cExheW91dChncm91cHMpIHtcbiAgICBncm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IChncm91cC5sYXlvdXQgPSB0aGlzLmxheW91dCkpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJCb3R0b21BY3Rpb25Hcm91cCgpIHtcbiAgICBjb25zdCB7IGV4cGFuZGVkLCBleHBhbmREaXNhYmxlZCwgZWwsIHBvc2l0aW9uLCB0b2dnbGVFeHBhbmQsIHNjYWxlLCBsYXlvdXQsIG1lc3NhZ2VzLCBhY3Rpb25zRW5kR3JvdXBMYWJlbCwgfSA9IHRoaXM7XG4gICAgY29uc3QgZXhwYW5kVG9nZ2xlTm9kZSA9ICFleHBhbmREaXNhYmxlZCA/IChoKEV4cGFuZFRvZ2dsZSwgeyBjb2xsYXBzZVRleHQ6IG1lc3NhZ2VzLmNvbGxhcHNlLCBlbDogZWwsIGV4cGFuZFRleHQ6IG1lc3NhZ2VzLmV4cGFuZCwgZXhwYW5kZWQ6IGV4cGFuZGVkLCBwb3NpdGlvbjogcG9zaXRpb24sIHNjYWxlOiBzY2FsZSwgdG9nZ2xlOiB0b2dnbGVFeHBhbmQsIHRvb2x0aXA6IHRoaXMuZXhwYW5kVG9vbHRpcCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0RXhwYW5kVG9nZ2xlUmVmIH0pKSA6IG51bGw7XG4gICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1hY3Rpb24tZ3JvdXBcIiwgeyBjbGFzczogQ1NTLmFjdGlvbkdyb3VwRW5kLCBoaWRkZW46IHRoaXMuZXhwYW5kRGlzYWJsZWQgJiYgISh0aGlzLmhhc0FjdGlvbnNFbmQgfHwgdGhpcy5oYXNCb3R0b21BY3Rpb25zKSwgbGFiZWw6IGFjdGlvbnNFbmRHcm91cExhYmVsLCBsYXlvdXQ6IGxheW91dCwgc2NhbGU6IHNjYWxlIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMuYWN0aW9uc0VuZCwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUFjdGlvbnNFbmRTbG90Q2hhbmdlIH0pLCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmJvdHRvbUFjdGlvbnMsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVCb3R0b21BY3Rpb25zU2xvdENoYW5nZSB9KSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5leHBhbmRUb29sdGlwLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlVG9vbHRpcFNsb3RDaGFuZ2UgfSksIGV4cGFuZFRvZ2dsZU5vZGUpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgb25DYWxjaXRlQWN0aW9uTWVudU9wZW46IHRoaXMuYWN0aW9uTWVudU9wZW5IYW5kbGVyIH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlIH0pLCB0aGlzLnJlbmRlckJvdHRvbUFjdGlvbkdyb3VwKCkpKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiZXhwYW5kRGlzYWJsZWRcIjogW1wiZXhwYW5kSGFuZGxlclwiXSxcbiAgICBcImV4cGFuZGVkXCI6IFtcImV4cGFuZGVkSGFuZGxlclwiXSxcbiAgICBcImxheW91dFwiOiBbXCJsYXlvdXRIYW5kbGVyXCJdLFxuICAgIFwib3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWRcIjogW1wib3ZlcmZsb3dEaXNhYmxlZEhhbmRsZXJcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdXG4gIH07IH1cbn07XG5BY3Rpb25CYXIuc3R5bGUgPSBhY3Rpb25CYXJDc3M7XG5cbmV4cG9ydCB7IEFjdGlvbkJhciBhcyBjYWxjaXRlX2FjdGlvbl9iYXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY2l0ZS1hY3Rpb24tYmFyLmVudHJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==