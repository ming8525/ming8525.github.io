"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-stepper_2_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getUserAgentString)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
function getUserAgentData() {
  return navigator.userAgentData;
}
function getUserAgentString() {
  const uaData = getUserAgentData();
  return uaData?.brands
    ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(" ")
    : navigator.userAgent;
}



//# sourceMappingURL=browser-ece29da7.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-stepper_2.entry.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-stepper_2.entry.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_stepper: () => (/* binding */ Stepper),
/* harmony export */   calcite_stepper_item: () => (/* binding */ StepperItem)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interactive-cbd8a6dc.js */ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */












const CSS$2 = {
  stepBar: "step-bar",
  stepBarActive: "step-bar--active",
  stepBarComplete: "step-bar--complete",
  stepBarDisabled: "step-bar--disabled",
  stepBarError: "step-bar--error",
  stepBarInActive: "step-bar--inactive",
};
const StepBar = ({ disabled, active, complete, error, key, }) => ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { class: {
    [CSS$2.stepBar]: true,
  }, key: key },
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("rect", { class: {
      [CSS$2.stepBarActive]: active,
      [CSS$2.stepBarComplete]: complete,
      [CSS$2.stepBarDisabled]: disabled,
      [CSS$2.stepBarError]: error,
      [CSS$2.stepBarInActive]: true,
    }, width: "100%", x: "0", y: "0" })));

const ITEM_MIN_WIDTH = {
  s: 120,
  m: 180,
  l: 200,
};
const CSS$1 = {
  actionIcon: "action-icon",
  actionIconStart: "action-icon--start",
  actionIconEnd: "action-icon--end",
  actionContainer: "action-container",
  stepBarContainer: "step-bar-container",
  singleView: "single-view",
};

const stepperCss = ":host([scale=s]){--calcite-internal-stepper-item-spacing-unit-s:0.25rem;--calcite-internal-stepper-action-block-size:2.75rem;--calcite-internal-stepper-action-inline-size:2rem;--calcite-internal-step-bar-gap:0.25rem}:host([scale=m]){--calcite-internal-stepper-item-spacing-unit-s:0.5rem;--calcite-internal-stepper-action-block-size:3.25rem;--calcite-internal-stepper-action-inline-size:2.5rem}:host([scale=l]){--calcite-internal-stepper-item-spacing-unit-s:0.75rem;--calcite-internal-stepper-action-block-size:4rem;--calcite-internal-stepper-action-inline-size:3rem;--calcite-internal-step-bar-gap:0.75rem}:host{display:flex}.container{position:relative;display:flex;inline-size:100%;min-inline-size:-moz-fit-content;min-inline-size:fit-content;flex-direction:row;flex-wrap:wrap;align-items:stretch;justify-content:space-between}:host([layout=vertical]) .container{flex:1 1 auto;flex-direction:column}:host([layout=horizontal]) .container{display:grid;grid-template-areas:\"items\" \"content\";gap:0.5rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal][scale=s]) .container{gap:0.25rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal][scale=l]) .container{gap:0.75rem var(--calcite-internal-stepper-item-spacing-unit-s)}:host([layout=horizontal]) .container.single-view{display:flex;grid-template-columns:none}.action-icon{position:relative;display:flex;flex-grow:0;block-size:var(--calcite-internal-stepper-action-block-size);inline-size:var(--calcite-internal-stepper-action-inline-size)}.action-container{position:absolute;display:flex;justify-content:space-between;padding-block:0.25rem;inline-size:100%}.step-bar{display:flex;block-size:100%;inline-size:100%}.step-bar-container{position:absolute;display:flex;align-items:flex-start;justify-content:space-between;block-size:0.125rem;inline-size:100%;gap:var(--calcite-internal-step-bar-gap, 0.5rem)}.step-bar--inactive{fill:var(--calcite-color-border-3, #dfdfdf);fill-opacity:1;block-size:100%}.step-bar--active{fill:var(--calcite-color-brand)}.step-bar--complete{fill:var(--calcite-color-brand);fill-opacity:0.5}.step-bar--error{fill:var(--calcite-color-status-danger)}.step-bar--disabled{opacity:0.5}:host([hidden]){display:none}[hidden]{display:none}";

const Stepper = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteStepperItemChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteStepperItemChange", 6);
    this.calciteInternalStepperItemChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalStepperItemChange", 6);
    this.enabledItems = [];
    this.itemMap = new Map();
    this.items = [];
    this.mutationObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_2__.c)("mutation", () => this.updateItems());
    /** Specifies if the user is viewing one `stepper-item` at a time when the page width is less than sum of min-width of each item. */
    this.multipleViewMode = false;
    this.guid = `calcite-stepper-action-${(0,_guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_3__.g)()}`;
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    this.resizeObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_2__.c)("resize", (entries) => (this.elWidth = entries[0].contentRect.width));
    this.handleActionClick = (event) => {
      const currentActivePosition = this.currentActivePosition;
      const target = event.target;
      if (target.getAttribute("data-position") === "start") {
        this.prevStep();
      }
      else {
        this.nextStep();
      }
      if (this.currentActivePosition &&
        currentActivePosition !== this.currentActivePosition &&
        !this.items[this.currentActivePosition].disabled) {
        this.calciteStepperItemChange.emit();
      }
    };
    this.setContainerEl = (el) => {
      this.containerEl = el;
    };
    this.handleDefaultSlotChange = (event) => {
      const items = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.s)(event).filter((el) => el?.tagName === "CALCITE-STEPPER-ITEM");
      this.items = items;
      this.setGridTemplateColumns(items);
      this.setStepperItemNumberingSystem();
    };
    this.icon = false;
    this.layout = "horizontal";
    this.numbered = false;
    this.scale = "m";
    this.messages = undefined;
    this.numberingSystem = undefined;
    this.selectedItem = null;
    this.messageOverrides = undefined;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.currentActivePosition = undefined;
    this.elWidth = undefined;
  }
  handleItemPropChange() {
    this.updateItems();
  }
  numberingSystemChange() {
    this.setStepperItemNumberingSystem();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    this.mutationObserver?.observe(this.el, { childList: true });
    this.updateItems();
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
  }
  async componentWillLoad() {
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
  }
  componentDidLoad() {
    this.resizeObserver?.observe(this.containerEl);
    // if no stepper items are set as active, default to the first one
    if (typeof this.currentActivePosition !== "number") {
      const enabledStepIndex = this.getFirstEnabledStepperPosition();
      if (enabledStepIndex === 0) {
        this.currentActivePosition = enabledStepIndex;
      }
      this.calciteInternalStepperItemChange.emit({
        position: enabledStepIndex,
      });
    }
  }
  disconnectedCallback() {
    this.resizeObserver?.disconnect();
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    this.mutationObserver?.disconnect();
  }
  render() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-label": this.messages.label, role: "region" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { container: true, [CSS$1.singleView]: !this.multipleViewMode }, ref: this.setContainerEl }, !this.multipleViewMode && this.layout === "horizontal" && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS$1.stepBarContainer]: true } }, this.items.map((item, index) => ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(StepBar, { active: index === this.currentActivePosition, complete: item.complete && index !== this.currentActivePosition && !item.error, disabled: item.disabled && index !== this.currentActivePosition, error: item.error && index !== this.currentActivePosition, key: index }))))), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS$1.actionContainer]: true } }, this.renderAction("start"), this.renderAction("end")), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange }))));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  calciteInternalStepperItemKeyEvent(event) {
    const item = event.detail.item;
    const itemToFocus = event.target;
    switch (item.key) {
      case "ArrowDown":
      case "ArrowRight":
        (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.l)(this.enabledItems, itemToFocus, "next");
        break;
      case "ArrowUp":
      case "ArrowLeft":
        (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.l)(this.enabledItems, itemToFocus, "previous");
        break;
      case "Home":
        (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.l)(this.enabledItems, itemToFocus, "first");
        break;
      case "End":
        (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.l)(this.enabledItems, itemToFocus, "last");
        break;
    }
    event.stopPropagation();
  }
  registerItem(event) {
    const item = event.target;
    const { content, position } = event.detail;
    this.itemMap.set(item, { position, content });
    this.enabledItems = this.filterItems();
    event.stopPropagation();
  }
  updateItem(event) {
    const { position } = event.detail;
    if (typeof position === "number") {
      this.currentActivePosition = position;
      this.selectedItem = event.target;
    }
    this.calciteInternalStepperItemChange.emit({
      position,
    });
  }
  handleUserRequestedStepperItemSelect() {
    this.calciteStepperItemChange.emit();
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Set the next `calcite-stepper-item` as active. */
  async nextStep() {
    const enabledStepIndex = this.getEnabledStepIndex(this.currentActivePosition + 1, "next");
    if (typeof enabledStepIndex !== "number") {
      return;
    }
    this.updateStep(enabledStepIndex);
  }
  /** Set the previous `calcite-stepper-item` as active. */
  async prevStep() {
    const enabledStepIndex = this.getEnabledStepIndex(this.currentActivePosition - 1, "previous");
    if (typeof enabledStepIndex !== "number") {
      return;
    }
    this.updateStep(enabledStepIndex);
  }
  /**
   * Set a specified `calcite-stepper-item` as active.
   *
   * @param step
   */
  async goToStep(step) {
    const position = step - 1;
    if (this.currentActivePosition !== position) {
      this.updateStep(position);
    }
  }
  /** Set the first `calcite-stepper-item` as active. */
  async startStep() {
    const enabledStepIndex = this.getEnabledStepIndex(0, "next");
    if (typeof enabledStepIndex !== "number") {
      return;
    }
    this.updateStep(enabledStepIndex);
  }
  /** Set the last `calcite-stepper-item` as active. */
  async endStep() {
    const enabledStepIndex = this.getEnabledStepIndex(this.items.length - 1, "previous");
    if (typeof enabledStepIndex !== "number") {
      return;
    }
    this.updateStep(enabledStepIndex);
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.u)(this, this.effectiveLocale);
  }
  handlePositionChange() {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.e)(() => {
      this.determineActiveStepper(true);
    });
  }
  handleElWidthChange() {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.e)(() => {
      this.determineActiveStepper();
    });
  }
  updateItems() {
    this.el.querySelectorAll("calcite-stepper-item").forEach((item) => {
      item.icon = this.icon;
      item.numbered = this.numbered;
      item.layout = this.layout;
      item.scale = this.scale;
    });
  }
  determineActiveStepper(currentActivePositionChanged = false) {
    const totalItems = this.items.length;
    if (!this.elWidth || !totalItems || this.layout !== "horizontal" || totalItems === 1) {
      return;
    }
    const activePosition = this.currentActivePosition || 0;
    const totalMinWidthOfItems = totalItems * this.getMinWidthOfStepperItem();
    const totalRowGap = (totalItems - 1) * (parseInt(window.getComputedStyle(this.containerEl).rowGap) || 0);
    if (this.elWidth <= totalMinWidthOfItems + totalRowGap) {
      this.multipleViewMode = false;
      this.items.forEach((item, index) => {
        if (index !== activePosition) {
          item.hidden = true;
        }
        else {
          item.hidden = false;
          item.multipleViewMode = false;
        }
      });
    }
    else if (this.elWidth > totalMinWidthOfItems + totalRowGap) {
      if (this.multipleViewMode && !currentActivePositionChanged) {
        return;
      }
      this.multipleViewMode = true;
      this.setGridTemplateColumns(this.items);
      this.items.forEach((item) => {
        item.hidden = false;
        item.multipleViewMode = true;
      });
    }
  }
  getEnabledStepIndex(startIndex, direction = "next") {
    const { items, currentActivePosition } = this;
    let newIndex = startIndex;
    while (items[newIndex]?.disabled && this.multipleViewMode) {
      newIndex = newIndex + (direction === "previous" ? -1 : 1);
    }
    return newIndex !== currentActivePosition && newIndex < items.length && newIndex >= 0
      ? newIndex
      : null;
  }
  updateStep(position) {
    this.currentActivePosition = position;
    this.calciteInternalStepperItemChange.emit({
      position,
    });
  }
  filterItems() {
    return this.items.filter((item) => !item.disabled);
  }
  setStepperItemNumberingSystem() {
    this.items.forEach((item) => {
      item.numberingSystem = this.numberingSystem;
    });
  }
  renderAction(position) {
    const isPositionStart = position === "start";
    const path = isPositionStart ? "chevron-left" : "chevron-right";
    const { currentActivePosition, multipleViewMode, layout } = this;
    const totalItems = this.items.length;
    const id = `${this.guid}-${isPositionStart ? "start" : "end"}`;
    return layout === "horizontal" && !multipleViewMode ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { alignment: "center", appearance: "transparent", class: {
        [CSS$1.actionIcon]: true,
      }, compact: true, "data-position": position, disabled: (currentActivePosition === 0 && isPositionStart) ||
        (currentActivePosition === totalItems - 1 && !isPositionStart), icon: path, iconFlipRtl: true, id: id, onClick: this.handleActionClick, scale: this.scale, text: isPositionStart ? this.messages.previousStep : this.messages.nextStep })) : null;
  }
  getFirstEnabledStepperPosition() {
    const enabledStepIndex = this.items.findIndex((item) => !item.disabled);
    if (enabledStepIndex > -1) {
      return enabledStepIndex;
    }
    return 0;
  }
  setGridTemplateColumns(items) {
    const minWidth = this.getMinWidthOfStepperItem();
    const spacing = Array(items.length).fill(`minmax(${minWidth}px, 1fr)`).join(" ");
    this.containerEl.style.gridTemplateAreas = spacing;
    this.containerEl.style.gridTemplateColumns = spacing;
  }
  getMinWidthOfStepperItem() {
    return ITEM_MIN_WIDTH[this.scale];
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "icon": ["handleItemPropChange"],
    "layout": ["handleItemPropChange"],
    "numbered": ["handleItemPropChange"],
    "scale": ["handleItemPropChange"],
    "numberingSystem": ["numberingSystemChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"],
    "currentActivePosition": ["handlePositionChange"],
    "elWidth": ["handleElWidthChange"]
  }; }
};
Stepper.style = stepperCss;

const CSS = {
  container: "container",
  stepperItemContent: "stepper-item-content",
  stepperItemDescription: "stepper-item-description",
  stepperItemHeader: "stepper-item-header",
  stepperItemHeading: "stepper-item-heading",
  stepperItemHeaderText: "stepper-item-header-text",
  stepperItemNumber: "stepper-item-number",
  visuallyHidden: "visually-hidden",
};

const stepperItemCss = ":host([layout=horizontal][disabled]) .stepper-item-header,:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([layout=horizontal][disabled]) .stepper-item-header *,:host([disabled]) *,:host([layout=horizontal][disabled]) .stepper-item-header ::slotted(*),:host([disabled]) ::slotted(*){pointer-events:none}:host([scale=s]){--calcite-stepper-item-spacing-unit-s:0.25rem;--calcite-stepper-item-spacing-unit-m:0.75rem;--calcite-stepper-item-spacing-unit-l:1rem;--calcite-internal-stepper-action-inline-size:2rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-inline-end:0.25rem}:host([scale=s]) .stepper-item-description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-stepper-item-spacing-unit-s:0.5rem;--calcite-stepper-item-spacing-unit-m:1rem;--calcite-stepper-item-spacing-unit-l:1.25rem;--calcite-internal-stepper-action-inline-size:2.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-inline-end:0.5rem}:host([scale=m]) .stepper-item-description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-stepper-item-spacing-unit-s:0.75rem;--calcite-stepper-item-spacing-unit-m:1.25rem;--calcite-stepper-item-spacing-unit-l:1.5rem;--calcite-internal-stepper-action-inline-size:3rem;font-size:var(--calcite-font-size-1);line-height:1.5rem;margin-inline-end:0.75rem}:host([scale=l]) .stepper-item-description{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:flex;flex-grow:1;flex-direction:column;align-self:flex-start;margin-block-end:var(--calcite-stepper-item-spacing-unit-s)}:host .container{position:relative;display:flex;flex-grow:1;cursor:pointer;flex-direction:column;border-width:0px;border-block-start-width:2px;border-style:solid;border-color:var(--calcite-color-border-3);color:var(--calcite-color-text-3);text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host{outline-color:transparent}:host(:focus){outline:2px solid var(--calcite-color-brand);outline-offset:calc(\n            2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}:host .stepper-item-header{display:flex;cursor:pointer;align-items:flex-start}:host .stepper-item-content,:host .stepper-item-header{transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:var(--calcite-stepper-item-spacing-unit-l);padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host .stepper-item-header *{display:inline-flex;align-items:center;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-content{display:none;inline-size:100%;flex-direction:column;font-size:var(--calcite-font-size--2);line-height:1.375}:host .stepper-item-icon{margin-inline-end:var(--calcite-stepper-item-spacing-unit-m);margin-block-start:1px;display:inline-flex;block-size:0.75rem;flex-shrink:0;align-self:flex-start;color:var(--calcite-color-text-3);opacity:var(--calcite-opacity-disabled);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-header-text{flex-direction:column;text-align:initial;margin-inline-end:auto}:host .stepper-item-heading,:host .stepper-item-description{display:flex;inline-size:100%}:host .stepper-item-heading{margin-block-end:0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-2)}:host .stepper-item-description{color:var(--calcite-color-text-3)}:host .stepper-item-number{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([complete]) .container .stepper-item-icon{color:var(--calcite-color-brand)}:host([error]) .container{border-block-start-color:var(--calcite-color-status-danger)}:host([error]) .container .stepper-item-number{color:var(--calcite-color-status-danger)}:host([error]) .container .stepper-item-icon{opacity:1;color:var(--calcite-color-status-danger)}:host(:hover:not([disabled]):not([selected])) .container,:host(:focus:not([disabled]):not([selected])) .container{border-block-start-color:var(--calcite-color-brand)}:host(:hover:not([disabled]):not([selected])) .container .stepper-item-heading,:host(:focus:not([disabled]):not([selected])) .container .stepper-item-heading{color:var(--calcite-color-text-1)}:host(:hover:not([disabled]):not([selected])) .container .stepper-item-description,:host(:focus:not([disabled]):not([selected])) .container .stepper-item-description{color:var(--calcite-color-text-2)}:host([error]:hover:not([disabled]):not([selected])) .container,:host([error]:focus:not([disabled]):not([selected])) .container{border-block-start-color:var(--calcite-color-status-danger-hover)}:host([selected]) .container{border-block-start-color:var(--calcite-color-brand)}:host([selected]) .container .stepper-item-heading{color:var(--calcite-color-text-1)}:host([selected]) .container .stepper-item-description{color:var(--calcite-color-text-2)}:host([selected]) .container .stepper-item-number{color:var(--calcite-color-brand)}:host([selected]) .container .stepper-item-icon{color:var(--calcite-color-brand);opacity:1}:host([selected]) .container .stepper-item-content{display:flex}:host([layout=vertical]) .container{margin-inline:0px;margin-block-start:0px;flex:1 1 auto;border-block-start-width:0px;border-style:solid;border-color:var(--calcite-color-border-3);padding-block:0px;border-inline-start-width:2px;padding-inline-start:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]) .container .stepper-item-icon{order:3;margin-block:1px 0px;padding-inline-start:var(--calcite-stepper-item-spacing-unit-s);margin-inline-start:auto}:host([layout=vertical]) .container .stepper-item-header{padding-inline-end:0px}:host([layout=vertical]) .container .stepper-item-content{padding:0px}:host([layout=vertical][complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][complete]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical][complete]:focus:not([disabled]):not([selected])) .container{border-color:var(--calcite-color-brand)}:host([layout=vertical][error]) .container{border-color:var(--calcite-color-status-danger)}:host([layout=vertical][selected]) .container{border-color:var(--calcite-color-brand)}:host([layout=vertical][selected]) .container .stepper-item-content:not(:empty){margin-block-end:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical]:focus:not([disabled]):not([selected])) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][error]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical][error]:focus:not([disabled]):not([selected])) .container{border-color:var(--calcite-color-status-danger-hover)}:host([layout=horizontal]){display:contents}:host([layout=horizontal]) .container{display:contents}:host([layout=horizontal]) .stepper-item-header{border-width:0px;border-block-start-width:2px;border-style:solid;border-color:var(--calcite-color-border-3);outline-color:transparent;grid-row:items}:host([layout=horizontal]) .stepper-item-header:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(\n            2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}:host([layout=horizontal]) .stepper-item-content{cursor:auto;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:0;padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host([layout=horizontal][selected]) .stepper-item-content{grid-area:2/1/2/-1}:host([layout=horizontal][complete]) .stepper-item-header{border-color:rgba(0, 122, 194, 0.5)}:host([layout=horizontal][complete]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal][complete]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:var(--calcite-color-brand)}:host([layout=horizontal][error]) .stepper-item-header{border-color:var(--calcite-color-status-danger)}:host([layout=horizontal][selected][multiple-view-mode]) .stepper-item-header{border-color:var(--calcite-color-brand)}:host([layout=horizontal]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:rgba(0, 122, 194, 0.5)}:host([layout=horizontal][error]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal][error]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:var(--calcite-color-status-danger-hover)}@media (forced-colors: active){:host .container{outline-width:0;outline-offset:0}:host(:focus),:host(:focus-visible){outline-color:canvasText}:host([selected]) .container{border-block-start-color:highlight}:host([selected]) .container .stepper-item-number{color:highlight}:host([selected]) .container .stepper-item-icon{color:highlight}:host([layout=vertical][selected]) .container{border-color:highlight}}:host([layout=horizontal]:not([multiple-view-mode])) .stepper-item-header{margin-inline-end:0px;border-style:none;inline-size:100%;padding-inline:calc(var(--calcite-internal-stepper-action-inline-size) + 0.5rem)}:host([layout=horizontal][error]:not([multiple-view-mode])) .container .stepper-item-number{color:var(--calcite-color-status-danger)}:host([layout=horizontal][error]:not([multiple-view-mode])) .container .stepper-item-icon{opacity:1;color:var(--calcite-color-status-danger)}:host([layout=horizontal][error][selected]:not([multiple-view-mode])),:host([layout=horizontal][complete][selected]:not([multiple-view-mode])) .container{color:var(--calcite-color-text-3)}:host([layout=horizontal][error][selected]:not([multiple-view-mode])) .stepper-item-heading,:host([layout=horizontal][complete][selected]:not([multiple-view-mode])) .container .stepper-item-heading{color:var(--calcite-color-text-2)}:host([layout=horizontal][complete][selected]:not([multiple-view-mode])) .container .stepper-item-icon{opacity:var(--calcite-opacity-disabled)}:host([layout=horizontal][complete][selected]:not([multiple-view-mode])) .container .stepper-item-number{color:var(--calcite-color-text-3)}.visually-hidden{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}";

const StepperItem = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalStepperItemKeyEvent = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalStepperItemKeyEvent", 6);
    this.calciteInternalStepperItemSelect = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalStepperItemSelect", 6);
    this.calciteInternalUserRequestedStepperItemSelect = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalUserRequestedStepperItemSelect", 6);
    this.calciteInternalStepperItemRegister = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalStepperItemRegister", 6);
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    this.keyDownHandler = (event) => {
      if (!this.disabled && event.target === this.el) {
        switch (event.key) {
          case " ":
          case "Enter":
            this.emitUserRequestedItem();
            event.preventDefault();
            break;
          case "ArrowUp":
          case "ArrowDown":
          case "ArrowLeft":
          case "ArrowRight":
          case "Home":
          case "End":
            this.calciteInternalStepperItemKeyEvent.emit({ item: event });
            event.preventDefault();
            break;
        }
      }
    };
    this.handleItemClick = (event) => {
      if (this.disabled ||
        (this.layout === "horizontal" &&
          event
            .composedPath()
            .some((el) => el.classList?.contains("stepper-item-content")))) {
        return;
      }
      this.emitUserRequestedItem();
    };
    this.emitUserRequestedItem = () => {
      this.emitRequestedItem();
      if (!this.disabled) {
        const position = this.itemPosition;
        this.calciteInternalUserRequestedStepperItemSelect.emit({
          position,
        });
      }
    };
    this.emitRequestedItem = () => {
      if (!this.disabled) {
        const position = this.itemPosition;
        this.calciteInternalStepperItemSelect.emit({
          position,
        });
      }
    };
    this.selected = false;
    this.complete = false;
    this.error = false;
    this.disabled = false;
    this.heading = undefined;
    this.description = undefined;
    this.iconFlipRtl = false;
    this.numberingSystem = undefined;
    this.icon = false;
    this.layout = undefined;
    this.messages = undefined;
    this.numbered = false;
    this.scale = "m";
    this.multipleViewMode = false;
    this.messageOverrides = undefined;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
  }
  selectedHandler() {
    if (this.selected) {
      this.emitRequestedItem();
    }
  }
  // watch for removal of disabled to register step
  disabledWatcher() {
    this.registerStepperItem();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleWatcher(locale) {
    _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.n.numberFormatOptions = {
      locale,
      numberingSystem: this.numberingSystem,
      useGrouping: false,
    };
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.u)(this, this.effectiveLocale);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_7__.s)(this);
    this.parentStepperEl = this.el.parentElement;
    this.itemPosition = this.getItemPosition();
    this.registerStepperItem();
    if (this.selected) {
      this.emitRequestedItem();
    }
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_7__.a)(this);
  }
  componentDidRender() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_6__.u)(this, true);
  }
  disconnectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_6__.d)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
  }
  render() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-current": this.selected ? "step" : "false", onClick: this.handleItemClick, onKeyDown: this.keyDownHandler }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.container }, this.complete && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-live": "polite", class: CSS.visuallyHidden }, this.messages.complete)), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.stepperItemHeader, tabIndex: 
      /* additional tab index logic needed because of display: contents */
      this.layout === "horizontal" && !this.disabled && this.multipleViewMode ? 0 : null,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.headerEl = el) }, this.icon ? this.renderIcon() : null, this.numbered ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.stepperItemNumber }, this.renderNumbers(), ".")) : null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.stepperItemHeaderText }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.stepperItemHeading }, this.heading), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.stepperItemDescription }, this.description))), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.stepperItemContent }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)))));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  updateActiveItemOnChange(event) {
    if (event.target === this.parentStepperEl ||
      event.composedPath().includes(this.parentStepperEl)) {
      this.selectedPosition = event.detail.position;
      this.determineSelectedItem();
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    (this.layout === "vertical" ? this.el : this.headerEl)?.focus();
  }
  renderIcon() {
    let path = "circle";
    if (this.selected && (this.multipleViewMode || (!this.error && !this.complete))) {
      path = "circleF";
    }
    else if (this.error) {
      path = "exclamationMarkCircleF";
    }
    else if (this.complete) {
      path = "checkCircleF";
    }
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "stepper-item-icon", flipRtl: this.iconFlipRtl, icon: path, scale: "s" }));
  }
  determineSelectedItem() {
    this.selected = !this.disabled && this.itemPosition === this.selectedPosition;
  }
  registerStepperItem() {
    this.calciteInternalStepperItemRegister.emit({
      position: this.itemPosition,
    });
  }
  getItemPosition() {
    return Array.from(this.parentStepperEl?.querySelectorAll("calcite-stepper-item")).indexOf(this.el);
  }
  renderNumbers() {
    _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.n.numberFormatOptions = {
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      useGrouping: false,
    };
    return _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_4__.n.numberFormatter.format(this.itemPosition + 1);
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "selected": ["selectedHandler"],
    "disabled": ["disabledWatcher"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
};
StepperItem.style = stepperItemCss;



//# sourceMappingURL=calcite-stepper_2.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectInteractive),
/* harmony export */   d: () => (/* binding */ disconnectInteractive),
/* harmony export */   u: () => (/* binding */ updateHostInteraction)
/* harmony export */ });
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


// ⚠️ browser-sniffing is not a best practice and should be avoided ⚠️
const isFirefox = /firefox/i.test((0,_browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_0__.g)());
const interactiveElementToParent = isFirefox
  ? new WeakMap()
  : null;
function interceptedClick() {
  const { disabled } = this;
  if (!disabled) {
    HTMLElement.prototype.click.call(this);
  }
}
function onPointerDown(event) {
  const interactiveElement = event.target;
  if (isFirefox && !interactiveElementToParent.get(interactiveElement)) {
    return;
  }
  const { disabled } = interactiveElement;
  if (disabled) {
    // prevent click from moving focus on host
    event.preventDefault();
  }
}
const nonBubblingWhenDisabledMouseEvents = ["mousedown", "mouseup", "click"];
function onNonBubblingWhenDisabledMouseEvent(event) {
  if (isFirefox && !interactiveElementToParent.get(event.target)) {
    return;
  }
  const { disabled } = event.target;
  // prevent disallowed mouse events from being emitted on the disabled host (per https://github.com/whatwg/html/issues/5886)
  //⚠ we generally avoid stopping propagation of events, but this is needed to adhere to the intended spec changes above ⚠
  if (disabled) {
    event.stopImmediatePropagation();
    event.preventDefault();
  }
}
const captureOnlyOptions = { capture: true };
/**
 * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.
 *
 * This should be used in the `componentDidRender` lifecycle hook.
 *
 * **Notes**
 *
 * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.
 * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error
 *
 * @param component
 * @param hostIsTabbable – when set to true or its predicate returns true, the host is tabbable and will be managed by the helper. Set to "managed" for cases where a component's parent determines which item is tabbable (i.e., sets `tabindex` to allow tabbing).
 */
function updateHostInteraction(component, hostIsTabbable = false) {
  if (component.disabled) {
    component.el.setAttribute("tabindex", "-1");
    component.el.setAttribute("aria-disabled", "true");
    if (component.el.contains(document.activeElement)) {
      document.activeElement.blur();
    }
    blockInteraction(component);
    return;
  }
  restoreInteraction(component);
  if (typeof hostIsTabbable === "function") {
    component.el.setAttribute("tabindex", hostIsTabbable.call(component) ? "0" : "-1");
  }
  else if (hostIsTabbable === true) {
    component.el.setAttribute("tabindex", "0");
  }
  else if (hostIsTabbable === false) {
    component.el.removeAttribute("tabindex");
  }
  else ;
  component.el.removeAttribute("aria-disabled");
}
function blockInteraction(component) {
  component.el.click = interceptedClick;
  addInteractionListeners(isFirefox ? getParentElement(component) : component.el);
}
function addInteractionListeners(element) {
  if (!element) {
    // this path is only applicable to Firefox
    return;
  }
  element.addEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
function getParentElement(component) {
  return interactiveElementToParent.get(component.el);
}
function restoreInteraction(component) {
  delete component.el.click; // fallback on HTMLElement.prototype.click
  removeInteractionListeners(isFirefox ? getParentElement(component) : component.el);
}
function removeInteractionListeners(element) {
  if (!element) {
    // this path is only applicable to Firefox
    return;
  }
  element.removeEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
/**
 * This utility helps disable components consistently in Firefox.
 *
 * It needs to be called in `connectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).
 *
 * @param component
 */
function connectInteractive(component) {
  if (!component.disabled || !isFirefox) {
    return;
  }
  const parent = component.el.parentElement || component.el; /* assume element is host if it has no parent when connected */
  interactiveElementToParent.set(component.el, parent);
  blockInteraction(component);
}
/**
 * This utility restores interactivity to disabled components consistently in Firefox.
 *
 * It needs to be called in `disconnectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).
 *
 * @param component
 */
function disconnectInteractive(component) {
  if (!isFirefox) {
    return;
  }
  // always remove on disconnect as render or connect will restore it
  interactiveElementToParent.delete(component.el);
  restoreInteraction(component);
}



//# sourceMappingURL=interactive-cbd8a6dc.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setComponentLoaded),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setUpLoadableComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.f)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}



//# sourceMappingURL=loadable-b17396e0.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-0bcdca54.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLXN0ZXBwZXJfMl9lbnRyeV9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0JBQWdCLFFBQVEsTUFBTSxHQUFHLFFBQVE7QUFDcEU7QUFDQTs7QUFFbUM7O0FBRW5DOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzRIO0FBQzNCO0FBQ25DO0FBQ2Y7QUFDb0U7QUFDUTtBQUNDO0FBQ0w7QUFDdEY7QUFDTjtBQUNJOztBQUUvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlDQUF5QyxNQUFNLHFEQUFDLFVBQVU7QUFDN0U7QUFDQSxHQUFHLFlBQVk7QUFDZixFQUFFLHFEQUFDLFdBQVc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxpQ0FBaUM7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQyx1REFBdUQscURBQXFELG1EQUFtRCx3Q0FBd0MsaUJBQWlCLHNEQUFzRCxxREFBcUQscURBQXFELGlCQUFpQix1REFBdUQsa0RBQWtELG1EQUFtRCx3Q0FBd0MsTUFBTSxhQUFhLFdBQVcsa0JBQWtCLGFBQWEsaUJBQWlCLGlDQUFpQyw0QkFBNEIsbUJBQW1CLGVBQWUsb0JBQW9CLDhCQUE4QixvQ0FBb0MsY0FBYyxzQkFBc0Isc0NBQXNDLGFBQWEsMENBQTBDLCtEQUErRCwrQ0FBK0MsZ0VBQWdFLCtDQUErQyxnRUFBZ0Usa0RBQWtELGFBQWEsMkJBQTJCLGFBQWEsa0JB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMkY7O0FBRTNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMzSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN1RDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxxREFBVztBQUNiO0FBQ0E7O0FBRStHOztBQUUvRzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3dEO0FBQ087O0FBRS9EO0FBQ0E7QUFDQSxpQkFBaUIsVUFBVSxHQUFHLEtBQUs7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHFEQUFZLGFBQWEsVUFBVSxnQkFBZ0IsS0FBSztBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxLQUFLO0FBQ2Y7QUFDQTtBQUNBLDBCQUEwQixzREFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFa0c7O0FBRWxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vYnJvd3Nlci1lY2UyOWRhNy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9jYWxjaXRlLXN0ZXBwZXJfMi5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9pbnRlcmFjdGl2ZS1jYmQ4YTZkYy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1iMTczOTZlMC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS90OW4tMGJjZGNhNTQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5mdW5jdGlvbiBnZXRVc2VyQWdlbnREYXRhKCkge1xuICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudERhdGE7XG59XG5mdW5jdGlvbiBnZXRVc2VyQWdlbnRTdHJpbmcoKSB7XG4gIGNvbnN0IHVhRGF0YSA9IGdldFVzZXJBZ2VudERhdGEoKTtcbiAgcmV0dXJuIHVhRGF0YT8uYnJhbmRzXG4gICAgPyB1YURhdGEuYnJhbmRzLm1hcCgoeyBicmFuZCwgdmVyc2lvbiB9KSA9PiBgJHticmFuZH0vJHt2ZXJzaW9ufWApLmpvaW4oXCIgXCIpXG4gICAgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xufVxuXG5leHBvcnQgeyBnZXRVc2VyQWdlbnRTdHJpbmcgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1icm93c2VyLWVjZTI5ZGE3LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgaCwgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBIIGFzIEhvc3QsIGUgYXMgcmVhZFRhc2ssIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgcyBhcyBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cywgbCBhcyBmb2N1c0VsZW1lbnRJbkdyb3VwIH0gZnJvbSAnLi9kb20tZWQwMGE1ODUuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLTcxZDMzMmRiLmpzJztcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gJy4vZ3VpZC0yMWZlY2ZhNC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCwgbiBhcyBudW1iZXJTdHJpbmdGb3JtYXR0ZXIgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcywgdSBhcyB1cGRhdGVNZXNzYWdlcyB9IGZyb20gJy4vdDluLTBiY2RjYTU0LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdEludGVyYWN0aXZlLCB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiwgZCBhcyBkaXNjb25uZWN0SW50ZXJhY3RpdmUgfSBmcm9tICcuL2ludGVyYWN0aXZlLWNiZDhhNmRjLmpzJztcbmltcG9ydCB7IHMgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgYSBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS1iMTczOTZlMC5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLWNmODIzODhjLmpzJztcbmltcG9ydCAnLi9rZXktNjFmODJkZGIuanMnO1xuaW1wb3J0ICcuL2Jyb3dzZXItZWNlMjlkYTcuanMnO1xuXG5jb25zdCBDU1MkMiA9IHtcbiAgc3RlcEJhcjogXCJzdGVwLWJhclwiLFxuICBzdGVwQmFyQWN0aXZlOiBcInN0ZXAtYmFyLS1hY3RpdmVcIixcbiAgc3RlcEJhckNvbXBsZXRlOiBcInN0ZXAtYmFyLS1jb21wbGV0ZVwiLFxuICBzdGVwQmFyRGlzYWJsZWQ6IFwic3RlcC1iYXItLWRpc2FibGVkXCIsXG4gIHN0ZXBCYXJFcnJvcjogXCJzdGVwLWJhci0tZXJyb3JcIixcbiAgc3RlcEJhckluQWN0aXZlOiBcInN0ZXAtYmFyLS1pbmFjdGl2ZVwiLFxufTtcbmNvbnN0IFN0ZXBCYXIgPSAoeyBkaXNhYmxlZCwgYWN0aXZlLCBjb21wbGV0ZSwgZXJyb3IsIGtleSwgfSkgPT4gKGgoXCJzdmdcIiwgeyBjbGFzczoge1xuICAgIFtDU1MkMi5zdGVwQmFyXTogdHJ1ZSxcbiAgfSwga2V5OiBrZXkgfSxcbiAgaChcInJlY3RcIiwgeyBjbGFzczoge1xuICAgICAgW0NTUyQyLnN0ZXBCYXJBY3RpdmVdOiBhY3RpdmUsXG4gICAgICBbQ1NTJDIuc3RlcEJhckNvbXBsZXRlXTogY29tcGxldGUsXG4gICAgICBbQ1NTJDIuc3RlcEJhckRpc2FibGVkXTogZGlzYWJsZWQsXG4gICAgICBbQ1NTJDIuc3RlcEJhckVycm9yXTogZXJyb3IsXG4gICAgICBbQ1NTJDIuc3RlcEJhckluQWN0aXZlXTogdHJ1ZSxcbiAgICB9LCB3aWR0aDogXCIxMDAlXCIsIHg6IFwiMFwiLCB5OiBcIjBcIiB9KSkpO1xuXG5jb25zdCBJVEVNX01JTl9XSURUSCA9IHtcbiAgczogMTIwLFxuICBtOiAxODAsXG4gIGw6IDIwMCxcbn07XG5jb25zdCBDU1MkMSA9IHtcbiAgYWN0aW9uSWNvbjogXCJhY3Rpb24taWNvblwiLFxuICBhY3Rpb25JY29uU3RhcnQ6IFwiYWN0aW9uLWljb24tLXN0YXJ0XCIsXG4gIGFjdGlvbkljb25FbmQ6IFwiYWN0aW9uLWljb24tLWVuZFwiLFxuICBhY3Rpb25Db250YWluZXI6IFwiYWN0aW9uLWNvbnRhaW5lclwiLFxuICBzdGVwQmFyQ29udGFpbmVyOiBcInN0ZXAtYmFyLWNvbnRhaW5lclwiLFxuICBzaW5nbGVWaWV3OiBcInNpbmdsZS12aWV3XCIsXG59O1xuXG5jb25zdCBzdGVwcGVyQ3NzID0gXCI6aG9zdChbc2NhbGU9c10pey0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LXM6MC4yNXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1hY3Rpb24tYmxvY2stc2l6ZToyLjc1cmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWFjdGlvbi1pbmxpbmUtc2l6ZToycmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwLWJhci1nYXA6MC4yNXJlbX06aG9zdChbc2NhbGU9bV0pey0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LXM6MC41cmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWFjdGlvbi1ibG9jay1zaXplOjMuMjVyZW07LS1jYWxjaXRlLWludGVybmFsLXN0ZXBwZXItYWN0aW9uLWlubGluZS1zaXplOjIuNXJlbX06aG9zdChbc2NhbGU9bF0pey0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LXM6MC43NXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1hY3Rpb24tYmxvY2stc2l6ZTo0cmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWFjdGlvbi1pbmxpbmUtc2l6ZTozcmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwLWJhci1nYXA6MC43NXJlbX06aG9zdHtkaXNwbGF5OmZsZXh9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTttaW4taW5saW5lLXNpemU6LW1vei1maXQtY29udGVudDttaW4taW5saW5lLXNpemU6Zml0LWNvbnRlbnQ7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDp3cmFwO2FsaWduLWl0ZW1zOnN0cmV0Y2g7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIC5jb250YWluZXJ7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLmNvbnRhaW5lcntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1hcmVhczpcXFwiaXRlbXNcXFwiIFxcXCJjb250ZW50XFxcIjtnYXA6MC41cmVtIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1zKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3NjYWxlPXNdKSAuY29udGFpbmVye2dhcDowLjI1cmVtIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1zKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3NjYWxlPWxdKSAuY29udGFpbmVye2dhcDowLjc1cmVtIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1zKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGFpbmVyLnNpbmdsZS12aWV3e2Rpc3BsYXk6ZmxleDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6bm9uZX0uYWN0aW9uLWljb257cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZ3JvdzowO2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWFjdGlvbi1ibG9jay1zaXplKTtpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWludGVybmFsLXN0ZXBwZXItYWN0aW9uLWlubGluZS1zaXplKX0uYWN0aW9uLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZy1ibG9jazowLjI1cmVtO2lubGluZS1zaXplOjEwMCV9LnN0ZXAtYmFye2Rpc3BsYXk6ZmxleDtibG9jay1zaXplOjEwMCU7aW5saW5lLXNpemU6MTAwJX0uc3RlcC1iYXItY29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2Jsb2NrLXNpemU6MC4xMjVyZW07aW5saW5lLXNpemU6MTAwJTtnYXA6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwLWJhci1nYXAsIDAuNXJlbSl9LnN0ZXAtYmFyLS1pbmFjdGl2ZXtmaWxsOnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMsICNkZmRmZGYpO2ZpbGwtb3BhY2l0eToxO2Jsb2NrLXNpemU6MTAwJX0uc3RlcC1iYXItLWFjdGl2ZXtmaWxsOnZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfS5zdGVwLWJhci0tY29tcGxldGV7ZmlsbDp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtmaWxsLW9wYWNpdHk6MC41fS5zdGVwLWJhci0tZXJyb3J7ZmlsbDp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpfS5zdGVwLWJhci0tZGlzYWJsZWR7b3BhY2l0eTowLjV9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IFN0ZXBwZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuY2FsY2l0ZVN0ZXBwZXJJdGVtQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlU3RlcHBlckl0ZW1DaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTdGVwcGVySXRlbUNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1DaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5lbmFibGVkSXRlbXMgPSBbXTtcbiAgICB0aGlzLml0ZW1NYXAgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwibXV0YXRpb25cIiwgKCkgPT4gdGhpcy51cGRhdGVJdGVtcygpKTtcbiAgICAvKiogU3BlY2lmaWVzIGlmIHRoZSB1c2VyIGlzIHZpZXdpbmcgb25lIGBzdGVwcGVyLWl0ZW1gIGF0IGEgdGltZSB3aGVuIHRoZSBwYWdlIHdpZHRoIGlzIGxlc3MgdGhhbiBzdW0gb2YgbWluLXdpZHRoIG9mIGVhY2ggaXRlbS4gKi9cbiAgICB0aGlzLm11bHRpcGxlVmlld01vZGUgPSBmYWxzZTtcbiAgICB0aGlzLmd1aWQgPSBgY2FsY2l0ZS1zdGVwcGVyLWFjdGlvbi0ke2d1aWQoKX1gO1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKGVudHJpZXMpID0+ICh0aGlzLmVsV2lkdGggPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0LndpZHRoKSk7XG4gICAgdGhpcy5oYW5kbGVBY3Rpb25DbGljayA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEFjdGl2ZVBvc2l0aW9uID0gdGhpcy5jdXJyZW50QWN0aXZlUG9zaXRpb247XG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICBpZiAodGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtcG9zaXRpb25cIikgPT09IFwic3RhcnRcIikge1xuICAgICAgICB0aGlzLnByZXZTdGVwKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5uZXh0U3RlcCgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uICYmXG4gICAgICAgIGN1cnJlbnRBY3RpdmVQb3NpdGlvbiAhPT0gdGhpcy5jdXJyZW50QWN0aXZlUG9zaXRpb24gJiZcbiAgICAgICAgIXRoaXMuaXRlbXNbdGhpcy5jdXJyZW50QWN0aXZlUG9zaXRpb25dLmRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZVN0ZXBwZXJJdGVtQ2hhbmdlLmVtaXQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuc2V0Q29udGFpbmVyRWwgPSAoZWwpID0+IHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBlbDtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlRGVmYXVsdFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMoZXZlbnQpLmZpbHRlcigoZWwpID0+IGVsPy50YWdOYW1lID09PSBcIkNBTENJVEUtU1RFUFBFUi1JVEVNXCIpO1xuICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5zZXRHcmlkVGVtcGxhdGVDb2x1bW5zKGl0ZW1zKTtcbiAgICAgIHRoaXMuc2V0U3RlcHBlckl0ZW1OdW1iZXJpbmdTeXN0ZW0oKTtcbiAgICB9O1xuICAgIHRoaXMuaWNvbiA9IGZhbHNlO1xuICAgIHRoaXMubGF5b3V0ID0gXCJob3Jpem9udGFsXCI7XG4gICAgdGhpcy5udW1iZXJlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2VPdmVycmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSBcIlwiO1xuICAgIHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWxXaWR0aCA9IHVuZGVmaW5lZDtcbiAgfVxuICBoYW5kbGVJdGVtUHJvcENoYW5nZSgpIHtcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XG4gIH1cbiAgbnVtYmVyaW5nU3lzdGVtQ2hhbmdlKCkge1xuICAgIHRoaXMuc2V0U3RlcHBlckl0ZW1OdW1iZXJpbmdTeXN0ZW0oKTtcbiAgfVxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICAgIC8qIHdpcmVkIHVwIGJ5IHQ5biB1dGlsICovXG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiB0cnVlIH0pO1xuICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAvLyBpZiBubyBzdGVwcGVyIGl0ZW1zIGFyZSBzZXQgYXMgYWN0aXZlLCBkZWZhdWx0IHRvIHRoZSBmaXJzdCBvbmVcbiAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uICE9PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBlbmFibGVkU3RlcEluZGV4ID0gdGhpcy5nZXRGaXJzdEVuYWJsZWRTdGVwcGVyUG9zaXRpb24oKTtcbiAgICAgIGlmIChlbmFibGVkU3RlcEluZGV4ID09PSAwKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uID0gZW5hYmxlZFN0ZXBJbmRleDtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1DaGFuZ2UuZW1pdCh7XG4gICAgICAgIHBvc2l0aW9uOiBlbmFibGVkU3RlcEluZGV4LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMubGFiZWwsIHJvbGU6IFwicmVnaW9uXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiB7IGNvbnRhaW5lcjogdHJ1ZSwgW0NTUyQxLnNpbmdsZVZpZXddOiAhdGhpcy5tdWx0aXBsZVZpZXdNb2RlIH0sIHJlZjogdGhpcy5zZXRDb250YWluZXJFbCB9LCAhdGhpcy5tdWx0aXBsZVZpZXdNb2RlICYmIHRoaXMubGF5b3V0ID09PSBcImhvcml6b250YWxcIiAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MkMS5zdGVwQmFyQ29udGFpbmVyXTogdHJ1ZSB9IH0sIHRoaXMuaXRlbXMubWFwKChpdGVtLCBpbmRleCkgPT4gKGgoU3RlcEJhciwgeyBhY3RpdmU6IGluZGV4ID09PSB0aGlzLmN1cnJlbnRBY3RpdmVQb3NpdGlvbiwgY29tcGxldGU6IGl0ZW0uY29tcGxldGUgJiYgaW5kZXggIT09IHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uICYmICFpdGVtLmVycm9yLCBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZCAmJiBpbmRleCAhPT0gdGhpcy5jdXJyZW50QWN0aXZlUG9zaXRpb24sIGVycm9yOiBpdGVtLmVycm9yICYmIGluZGV4ICE9PSB0aGlzLmN1cnJlbnRBY3RpdmVQb3NpdGlvbiwga2V5OiBpbmRleCB9KSkpKSksIGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTJDEuYWN0aW9uQ29udGFpbmVyXTogdHJ1ZSB9IH0sIHRoaXMucmVuZGVyQWN0aW9uKFwic3RhcnRcIiksIHRoaXMucmVuZGVyQWN0aW9uKFwiZW5kXCIpKSwgaChcInNsb3RcIiwgeyBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlRGVmYXVsdFNsb3RDaGFuZ2UgfSkpKSk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgRXZlbnQgTGlzdGVuZXJzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1LZXlFdmVudChldmVudCkge1xuICAgIGNvbnN0IGl0ZW0gPSBldmVudC5kZXRhaWwuaXRlbTtcbiAgICBjb25zdCBpdGVtVG9Gb2N1cyA9IGV2ZW50LnRhcmdldDtcbiAgICBzd2l0Y2ggKGl0ZW0ua2V5KSB7XG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKHRoaXMuZW5hYmxlZEl0ZW1zLCBpdGVtVG9Gb2N1cywgXCJuZXh0XCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XG4gICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAodGhpcy5lbmFibGVkSXRlbXMsIGl0ZW1Ub0ZvY3VzLCBcInByZXZpb3VzXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJIb21lXCI6XG4gICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAodGhpcy5lbmFibGVkSXRlbXMsIGl0ZW1Ub0ZvY3VzLCBcImZpcnN0XCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJFbmRcIjpcbiAgICAgICAgZm9jdXNFbGVtZW50SW5Hcm91cCh0aGlzLmVuYWJsZWRJdGVtcywgaXRlbVRvRm9jdXMsIFwibGFzdFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIHJlZ2lzdGVySXRlbShldmVudCkge1xuICAgIGNvbnN0IGl0ZW0gPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgeyBjb250ZW50LCBwb3NpdGlvbiB9ID0gZXZlbnQuZGV0YWlsO1xuICAgIHRoaXMuaXRlbU1hcC5zZXQoaXRlbSwgeyBwb3NpdGlvbiwgY29udGVudCB9KTtcbiAgICB0aGlzLmVuYWJsZWRJdGVtcyA9IHRoaXMuZmlsdGVySXRlbXMoKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICB1cGRhdGVJdGVtKGV2ZW50KSB7XG4gICAgY29uc3QgeyBwb3NpdGlvbiB9ID0gZXZlbnQuZGV0YWlsO1xuICAgIGlmICh0eXBlb2YgcG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGV2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTdGVwcGVySXRlbUNoYW5nZS5lbWl0KHtcbiAgICAgIHBvc2l0aW9uLFxuICAgIH0pO1xuICB9XG4gIGhhbmRsZVVzZXJSZXF1ZXN0ZWRTdGVwcGVySXRlbVNlbGVjdCgpIHtcbiAgICB0aGlzLmNhbGNpdGVTdGVwcGVySXRlbUNoYW5nZS5lbWl0KCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKiogU2V0IHRoZSBuZXh0IGBjYWxjaXRlLXN0ZXBwZXItaXRlbWAgYXMgYWN0aXZlLiAqL1xuICBhc3luYyBuZXh0U3RlcCgpIHtcbiAgICBjb25zdCBlbmFibGVkU3RlcEluZGV4ID0gdGhpcy5nZXRFbmFibGVkU3RlcEluZGV4KHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uICsgMSwgXCJuZXh0XCIpO1xuICAgIGlmICh0eXBlb2YgZW5hYmxlZFN0ZXBJbmRleCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVN0ZXAoZW5hYmxlZFN0ZXBJbmRleCk7XG4gIH1cbiAgLyoqIFNldCB0aGUgcHJldmlvdXMgYGNhbGNpdGUtc3RlcHBlci1pdGVtYCBhcyBhY3RpdmUuICovXG4gIGFzeW5jIHByZXZTdGVwKCkge1xuICAgIGNvbnN0IGVuYWJsZWRTdGVwSW5kZXggPSB0aGlzLmdldEVuYWJsZWRTdGVwSW5kZXgodGhpcy5jdXJyZW50QWN0aXZlUG9zaXRpb24gLSAxLCBcInByZXZpb3VzXCIpO1xuICAgIGlmICh0eXBlb2YgZW5hYmxlZFN0ZXBJbmRleCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVN0ZXAoZW5hYmxlZFN0ZXBJbmRleCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBhIHNwZWNpZmllZCBgY2FsY2l0ZS1zdGVwcGVyLWl0ZW1gIGFzIGFjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHN0ZXBcbiAgICovXG4gIGFzeW5jIGdvVG9TdGVwKHN0ZXApIHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHN0ZXAgLSAxO1xuICAgIGlmICh0aGlzLmN1cnJlbnRBY3RpdmVQb3NpdGlvbiAhPT0gcG9zaXRpb24pIHtcbiAgICAgIHRoaXMudXBkYXRlU3RlcChwb3NpdGlvbik7XG4gICAgfVxuICB9XG4gIC8qKiBTZXQgdGhlIGZpcnN0IGBjYWxjaXRlLXN0ZXBwZXItaXRlbWAgYXMgYWN0aXZlLiAqL1xuICBhc3luYyBzdGFydFN0ZXAoKSB7XG4gICAgY29uc3QgZW5hYmxlZFN0ZXBJbmRleCA9IHRoaXMuZ2V0RW5hYmxlZFN0ZXBJbmRleCgwLCBcIm5leHRcIik7XG4gICAgaWYgKHR5cGVvZiBlbmFibGVkU3RlcEluZGV4ICE9PSBcIm51bWJlclwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU3RlcChlbmFibGVkU3RlcEluZGV4KTtcbiAgfVxuICAvKiogU2V0IHRoZSBsYXN0IGBjYWxjaXRlLXN0ZXBwZXItaXRlbWAgYXMgYWN0aXZlLiAqL1xuICBhc3luYyBlbmRTdGVwKCkge1xuICAgIGNvbnN0IGVuYWJsZWRTdGVwSW5kZXggPSB0aGlzLmdldEVuYWJsZWRTdGVwSW5kZXgodGhpcy5pdGVtcy5sZW5ndGggLSAxLCBcInByZXZpb3VzXCIpO1xuICAgIGlmICh0eXBlb2YgZW5hYmxlZFN0ZXBJbmRleCAhPT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVN0ZXAoZW5hYmxlZFN0ZXBJbmRleCk7XG4gIH1cbiAgZWZmZWN0aXZlTG9jYWxlQ2hhbmdlKCkge1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgfVxuICBoYW5kbGVQb3NpdGlvbkNoYW5nZSgpIHtcbiAgICByZWFkVGFzaygoKSA9PiB7XG4gICAgICB0aGlzLmRldGVybWluZUFjdGl2ZVN0ZXBwZXIodHJ1ZSk7XG4gICAgfSk7XG4gIH1cbiAgaGFuZGxlRWxXaWR0aENoYW5nZSgpIHtcbiAgICByZWFkVGFzaygoKSA9PiB7XG4gICAgICB0aGlzLmRldGVybWluZUFjdGl2ZVN0ZXBwZXIoKTtcbiAgICB9KTtcbiAgfVxuICB1cGRhdGVJdGVtcygpIHtcbiAgICB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLXN0ZXBwZXItaXRlbVwiKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBpdGVtLmljb24gPSB0aGlzLmljb247XG4gICAgICBpdGVtLm51bWJlcmVkID0gdGhpcy5udW1iZXJlZDtcbiAgICAgIGl0ZW0ubGF5b3V0ID0gdGhpcy5sYXlvdXQ7XG4gICAgICBpdGVtLnNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICB9KTtcbiAgfVxuICBkZXRlcm1pbmVBY3RpdmVTdGVwcGVyKGN1cnJlbnRBY3RpdmVQb3NpdGlvbkNoYW5nZWQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRvdGFsSXRlbXMgPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICBpZiAoIXRoaXMuZWxXaWR0aCB8fCAhdG90YWxJdGVtcyB8fCB0aGlzLmxheW91dCAhPT0gXCJob3Jpem9udGFsXCIgfHwgdG90YWxJdGVtcyA9PT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhY3RpdmVQb3NpdGlvbiA9IHRoaXMuY3VycmVudEFjdGl2ZVBvc2l0aW9uIHx8IDA7XG4gICAgY29uc3QgdG90YWxNaW5XaWR0aE9mSXRlbXMgPSB0b3RhbEl0ZW1zICogdGhpcy5nZXRNaW5XaWR0aE9mU3RlcHBlckl0ZW0oKTtcbiAgICBjb25zdCB0b3RhbFJvd0dhcCA9ICh0b3RhbEl0ZW1zIC0gMSkgKiAocGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250YWluZXJFbCkucm93R2FwKSB8fCAwKTtcbiAgICBpZiAodGhpcy5lbFdpZHRoIDw9IHRvdGFsTWluV2lkdGhPZkl0ZW1zICsgdG90YWxSb3dHYXApIHtcbiAgICAgIHRoaXMubXVsdGlwbGVWaWV3TW9kZSA9IGZhbHNlO1xuICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggIT09IGFjdGl2ZVBvc2l0aW9uKSB7XG4gICAgICAgICAgaXRlbS5oaWRkZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGl0ZW0uaGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgaXRlbS5tdWx0aXBsZVZpZXdNb2RlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmVsV2lkdGggPiB0b3RhbE1pbldpZHRoT2ZJdGVtcyArIHRvdGFsUm93R2FwKSB7XG4gICAgICBpZiAodGhpcy5tdWx0aXBsZVZpZXdNb2RlICYmICFjdXJyZW50QWN0aXZlUG9zaXRpb25DaGFuZ2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMubXVsdGlwbGVWaWV3TW9kZSA9IHRydWU7XG4gICAgICB0aGlzLnNldEdyaWRUZW1wbGF0ZUNvbHVtbnModGhpcy5pdGVtcyk7XG4gICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgaXRlbS5tdWx0aXBsZVZpZXdNb2RlID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBnZXRFbmFibGVkU3RlcEluZGV4KHN0YXJ0SW5kZXgsIGRpcmVjdGlvbiA9IFwibmV4dFwiKSB7XG4gICAgY29uc3QgeyBpdGVtcywgY3VycmVudEFjdGl2ZVBvc2l0aW9uIH0gPSB0aGlzO1xuICAgIGxldCBuZXdJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgd2hpbGUgKGl0ZW1zW25ld0luZGV4XT8uZGlzYWJsZWQgJiYgdGhpcy5tdWx0aXBsZVZpZXdNb2RlKSB7XG4gICAgICBuZXdJbmRleCA9IG5ld0luZGV4ICsgKGRpcmVjdGlvbiA9PT0gXCJwcmV2aW91c1wiID8gLTEgOiAxKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0luZGV4ICE9PSBjdXJyZW50QWN0aXZlUG9zaXRpb24gJiYgbmV3SW5kZXggPCBpdGVtcy5sZW5ndGggJiYgbmV3SW5kZXggPj0gMFxuICAgICAgPyBuZXdJbmRleFxuICAgICAgOiBudWxsO1xuICB9XG4gIHVwZGF0ZVN0ZXAocG9zaXRpb24pIHtcbiAgICB0aGlzLmN1cnJlbnRBY3RpdmVQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1DaGFuZ2UuZW1pdCh7XG4gICAgICBwb3NpdGlvbixcbiAgICB9KTtcbiAgfVxuICBmaWx0ZXJJdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmRpc2FibGVkKTtcbiAgfVxuICBzZXRTdGVwcGVySXRlbU51bWJlcmluZ1N5c3RlbSgpIHtcbiAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0ubnVtYmVyaW5nU3lzdGVtID0gdGhpcy5udW1iZXJpbmdTeXN0ZW07XG4gICAgfSk7XG4gIH1cbiAgcmVuZGVyQWN0aW9uKHBvc2l0aW9uKSB7XG4gICAgY29uc3QgaXNQb3NpdGlvblN0YXJ0ID0gcG9zaXRpb24gPT09IFwic3RhcnRcIjtcbiAgICBjb25zdCBwYXRoID0gaXNQb3NpdGlvblN0YXJ0ID8gXCJjaGV2cm9uLWxlZnRcIiA6IFwiY2hldnJvbi1yaWdodFwiO1xuICAgIGNvbnN0IHsgY3VycmVudEFjdGl2ZVBvc2l0aW9uLCBtdWx0aXBsZVZpZXdNb2RlLCBsYXlvdXQgfSA9IHRoaXM7XG4gICAgY29uc3QgdG90YWxJdGVtcyA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgIGNvbnN0IGlkID0gYCR7dGhpcy5ndWlkfS0ke2lzUG9zaXRpb25TdGFydCA/IFwic3RhcnRcIiA6IFwiZW5kXCJ9YDtcbiAgICByZXR1cm4gbGF5b3V0ID09PSBcImhvcml6b250YWxcIiAmJiAhbXVsdGlwbGVWaWV3TW9kZSA/IChoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsIGFwcGVhcmFuY2U6IFwidHJhbnNwYXJlbnRcIiwgY2xhc3M6IHtcbiAgICAgICAgW0NTUyQxLmFjdGlvbkljb25dOiB0cnVlLFxuICAgICAgfSwgY29tcGFjdDogdHJ1ZSwgXCJkYXRhLXBvc2l0aW9uXCI6IHBvc2l0aW9uLCBkaXNhYmxlZDogKGN1cnJlbnRBY3RpdmVQb3NpdGlvbiA9PT0gMCAmJiBpc1Bvc2l0aW9uU3RhcnQpIHx8XG4gICAgICAgIChjdXJyZW50QWN0aXZlUG9zaXRpb24gPT09IHRvdGFsSXRlbXMgLSAxICYmICFpc1Bvc2l0aW9uU3RhcnQpLCBpY29uOiBwYXRoLCBpY29uRmxpcFJ0bDogdHJ1ZSwgaWQ6IGlkLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUFjdGlvbkNsaWNrLCBzY2FsZTogdGhpcy5zY2FsZSwgdGV4dDogaXNQb3NpdGlvblN0YXJ0ID8gdGhpcy5tZXNzYWdlcy5wcmV2aW91c1N0ZXAgOiB0aGlzLm1lc3NhZ2VzLm5leHRTdGVwIH0pKSA6IG51bGw7XG4gIH1cbiAgZ2V0Rmlyc3RFbmFibGVkU3RlcHBlclBvc2l0aW9uKCkge1xuICAgIGNvbnN0IGVuYWJsZWRTdGVwSW5kZXggPSB0aGlzLml0ZW1zLmZpbmRJbmRleCgoaXRlbSkgPT4gIWl0ZW0uZGlzYWJsZWQpO1xuICAgIGlmIChlbmFibGVkU3RlcEluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiBlbmFibGVkU3RlcEluZGV4O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuICBzZXRHcmlkVGVtcGxhdGVDb2x1bW5zKGl0ZW1zKSB7XG4gICAgY29uc3QgbWluV2lkdGggPSB0aGlzLmdldE1pbldpZHRoT2ZTdGVwcGVySXRlbSgpO1xuICAgIGNvbnN0IHNwYWNpbmcgPSBBcnJheShpdGVtcy5sZW5ndGgpLmZpbGwoYG1pbm1heCgke21pbldpZHRofXB4LCAxZnIpYCkuam9pbihcIiBcIik7XG4gICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5ncmlkVGVtcGxhdGVBcmVhcyA9IHNwYWNpbmc7XG4gICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gc3BhY2luZztcbiAgfVxuICBnZXRNaW5XaWR0aE9mU3RlcHBlckl0ZW0oKSB7XG4gICAgcmV0dXJuIElURU1fTUlOX1dJRFRIW3RoaXMuc2NhbGVdO1xuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJpY29uXCI6IFtcImhhbmRsZUl0ZW1Qcm9wQ2hhbmdlXCJdLFxuICAgIFwibGF5b3V0XCI6IFtcImhhbmRsZUl0ZW1Qcm9wQ2hhbmdlXCJdLFxuICAgIFwibnVtYmVyZWRcIjogW1wiaGFuZGxlSXRlbVByb3BDaGFuZ2VcIl0sXG4gICAgXCJzY2FsZVwiOiBbXCJoYW5kbGVJdGVtUHJvcENoYW5nZVwiXSxcbiAgICBcIm51bWJlcmluZ1N5c3RlbVwiOiBbXCJudW1iZXJpbmdTeXN0ZW1DaGFuZ2VcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdLFxuICAgIFwiY3VycmVudEFjdGl2ZVBvc2l0aW9uXCI6IFtcImhhbmRsZVBvc2l0aW9uQ2hhbmdlXCJdLFxuICAgIFwiZWxXaWR0aFwiOiBbXCJoYW5kbGVFbFdpZHRoQ2hhbmdlXCJdXG4gIH07IH1cbn07XG5TdGVwcGVyLnN0eWxlID0gc3RlcHBlckNzcztcblxuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIHN0ZXBwZXJJdGVtQ29udGVudDogXCJzdGVwcGVyLWl0ZW0tY29udGVudFwiLFxuICBzdGVwcGVySXRlbURlc2NyaXB0aW9uOiBcInN0ZXBwZXItaXRlbS1kZXNjcmlwdGlvblwiLFxuICBzdGVwcGVySXRlbUhlYWRlcjogXCJzdGVwcGVyLWl0ZW0taGVhZGVyXCIsXG4gIHN0ZXBwZXJJdGVtSGVhZGluZzogXCJzdGVwcGVyLWl0ZW0taGVhZGluZ1wiLFxuICBzdGVwcGVySXRlbUhlYWRlclRleHQ6IFwic3RlcHBlci1pdGVtLWhlYWRlci10ZXh0XCIsXG4gIHN0ZXBwZXJJdGVtTnVtYmVyOiBcInN0ZXBwZXItaXRlbS1udW1iZXJcIixcbiAgdmlzdWFsbHlIaWRkZW46IFwidmlzdWFsbHktaGlkZGVuXCIsXG59O1xuXG5jb25zdCBzdGVwcGVySXRlbUNzcyA9IFwiOmhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtkaXNhYmxlZF0pIC5zdGVwcGVyLWl0ZW0taGVhZGVyLDpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2Rpc2FibGVkXSkgLnN0ZXBwZXItaXRlbS1oZWFkZXIgKiw6aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZGlzYWJsZWRdKSAuc3RlcHBlci1pdGVtLWhlYWRlciA6OnNsb3R0ZWQoKiksOmhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKCope3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QoW3NjYWxlPXNdKXstLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1zOjAuMjVyZW07LS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtbTowLjc1cmVtOy0tY2FsY2l0ZS1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LWw6MXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1hY3Rpb24taW5saW5lLXNpemU6MnJlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpO2xpbmUtaGVpZ2h0OjFyZW07bWFyZ2luLWlubGluZS1lbmQ6MC4yNXJlbX06aG9zdChbc2NhbGU9c10pIC5zdGVwcGVyLWl0ZW0tZGVzY3JpcHRpb257Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtsaW5lLWhlaWdodDoxcmVtfTpob3N0KFtzY2FsZT1tXSl7LS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtczowLjVyZW07LS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtbToxcmVtOy0tY2FsY2l0ZS1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LWw6MS4yNXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1hY3Rpb24taW5saW5lLXNpemU6Mi41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO21hcmdpbi1pbmxpbmUtZW5kOjAuNXJlbX06aG9zdChbc2NhbGU9bV0pIC5zdGVwcGVyLWl0ZW0tZGVzY3JpcHRpb257Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtsaW5lLWhlaWdodDoxcmVtfTpob3N0KFtzY2FsZT1sXSl7LS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtczowLjc1cmVtOy0tY2FsY2l0ZS1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LW06MS4yNXJlbTstLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1sOjEuNXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtc3RlcHBlci1hY3Rpb24taW5saW5lLXNpemU6M3JlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtMSk7bGluZS1oZWlnaHQ6MS41cmVtO21hcmdpbi1pbmxpbmUtZW5kOjAuNzVyZW19Omhvc3QoW3NjYWxlPWxdKSAuc3RlcHBlci1pdGVtLWRlc2NyaXB0aW9ue2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtfTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24tc2VsZjpmbGV4LXN0YXJ0O21hcmdpbi1ibG9jay1lbmQ6dmFyKC0tY2FsY2l0ZS1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LXMpfTpob3N0IC5jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXgtZ3JvdzoxO2N1cnNvcjpwb2ludGVyO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ibG9jay1zdGFydC13aWR0aDoycHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyk7dGV4dC1kZWNvcmF0aW9uLWxpbmU6bm9uZTtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHg7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpfTpob3N0e291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnR9Omhvc3QoOmZvY3VzKXtvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDpjYWxjKFxcbiAgICAgICAgICAgIDJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfTpob3N0IC5zdGVwcGVyLWl0ZW0taGVhZGVye2Rpc3BsYXk6ZmxleDtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0fTpob3N0IC5zdGVwcGVyLWl0ZW0tY29udGVudCw6aG9zdCAuc3RlcHBlci1pdGVtLWhlYWRlcnt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7cGFkZGluZy1ibG9jazp2YXIoLS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtbCk7cGFkZGluZy1pbmxpbmUtZW5kOnZhcigtLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1tKTt0ZXh0LWFsaWduOnN0YXJ0fTpob3N0IC5zdGVwcGVyLWl0ZW0taGVhZGVyICp7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpfTpob3N0IC5zdGVwcGVyLWl0ZW0tY29udGVudHtkaXNwbGF5Om5vbmU7aW5saW5lLXNpemU6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtsaW5lLWhlaWdodDoxLjM3NX06aG9zdCAuc3RlcHBlci1pdGVtLWljb257bWFyZ2luLWlubGluZS1lbmQ6dmFyKC0tY2FsY2l0ZS1zdGVwcGVyLWl0ZW0tc3BhY2luZy11bml0LW0pO21hcmdpbi1ibG9jay1zdGFydDoxcHg7ZGlzcGxheTppbmxpbmUtZmxleDtibG9jay1zaXplOjAuNzVyZW07ZmxleC1zaHJpbms6MDthbGlnbi1zZWxmOmZsZXgtc3RhcnQ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKTt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSl9Omhvc3QgLnN0ZXBwZXItaXRlbS1oZWFkZXItdGV4dHtmbGV4LWRpcmVjdGlvbjpjb2x1bW47dGV4dC1hbGlnbjppbml0aWFsO21hcmdpbi1pbmxpbmUtZW5kOmF1dG99Omhvc3QgLnN0ZXBwZXItaXRlbS1oZWFkaW5nLDpob3N0IC5zdGVwcGVyLWl0ZW0tZGVzY3JpcHRpb257ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjEwMCV9Omhvc3QgLnN0ZXBwZXItaXRlbS1oZWFkaW5ne21hcmdpbi1ibG9jay1lbmQ6MC4yNXJlbTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfTpob3N0IC5zdGVwcGVyLWl0ZW0tZGVzY3JpcHRpb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpfTpob3N0IC5zdGVwcGVyLWl0ZW0tbnVtYmVye2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyk7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO21hcmdpbi1pbmxpbmUtZW5kOnZhcigtLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1tKX06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9Omhvc3QoW2NvbXBsZXRlXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6cmdiYSgwLCAxMjIsIDE5NCwgMC41KX06aG9zdChbY29tcGxldGVdKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0taWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKX06aG9zdChbZXJyb3JdKSAuY29udGFpbmVye2JvcmRlci1ibG9jay1zdGFydC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpfTpob3N0KFtlcnJvcl0pIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1udW1iZXJ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdChbZXJyb3JdKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0taWNvbntvcGFjaXR5OjE7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdCg6aG92ZXI6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLmNvbnRhaW5lciw6aG9zdCg6Zm9jdXM6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLmNvbnRhaW5lcntib3JkZXItYmxvY2stc3RhcnQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9Omhvc3QoOmhvdmVyOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1oZWFkaW5nLDpob3N0KDpmb2N1czpub3QoW2Rpc2FibGVkXSk6bm90KFtzZWxlY3RlZF0pKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0taGVhZGluZ3tjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9Omhvc3QoOmhvdmVyOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1kZXNjcmlwdGlvbiw6aG9zdCg6Zm9jdXM6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLWRlc2NyaXB0aW9ue2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKX06aG9zdChbZXJyb3JdOmhvdmVyOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXIsOmhvc3QoW2Vycm9yXTpmb2N1czpub3QoW2Rpc2FibGVkXSk6bm90KFtzZWxlY3RlZF0pKSAuY29udGFpbmVye2JvcmRlci1ibG9jay1zdGFydC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXItaG92ZXIpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXJ7Ym9yZGVyLWJsb2NrLXN0YXJ0LWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1oZWFkaW5ne2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKX06aG9zdChbc2VsZWN0ZWRdKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0tZGVzY3JpcHRpb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1udW1iZXJ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9Omhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCk7b3BhY2l0eToxfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1jb250ZW50e2Rpc3BsYXk6ZmxleH06aG9zdChbbGF5b3V0PXZlcnRpY2FsXSkgLmNvbnRhaW5lcnttYXJnaW4taW5saW5lOjBweDttYXJnaW4tYmxvY2stc3RhcnQ6MHB4O2ZsZXg6MSAxIGF1dG87Ym9yZGVyLWJsb2NrLXN0YXJ0LXdpZHRoOjBweDtib3JkZXItc3R5bGU6c29saWQ7Ym9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpO3BhZGRpbmctYmxvY2s6MHB4O2JvcmRlci1pbmxpbmUtc3RhcnQtd2lkdGg6MnB4O3BhZGRpbmctaW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1sKX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLWljb257b3JkZXI6MzttYXJnaW4tYmxvY2s6MXB4IDBweDtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtcyk7bWFyZ2luLWlubGluZS1zdGFydDphdXRvfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0taGVhZGVye3BhZGRpbmctaW5saW5lLWVuZDowcHh9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1jb250ZW50e3BhZGRpbmc6MHB4fTpob3N0KFtsYXlvdXQ9dmVydGljYWxdW2NvbXBsZXRlXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6cmdiYSgwLCAxMjIsIDE5NCwgMC41KX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtjb21wbGV0ZV06aG92ZXI6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLmNvbnRhaW5lciw6aG9zdChbbGF5b3V0PXZlcnRpY2FsXVtjb21wbGV0ZV06Zm9jdXM6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bZXJyb3JdKSAuY29udGFpbmVye2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdW3NlbGVjdGVkXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bc2VsZWN0ZWRdKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0tY29udGVudDpub3QoOmVtcHR5KXttYXJnaW4tYmxvY2stZW5kOnZhcigtLWNhbGNpdGUtc3RlcHBlci1pdGVtLXNwYWNpbmctdW5pdC1sKX06aG9zdChbbGF5b3V0PXZlcnRpY2FsXTpob3Zlcjpub3QoW2Rpc2FibGVkXSk6bm90KFtzZWxlY3RlZF0pKSAuY29udGFpbmVyLDpob3N0KFtsYXlvdXQ9dmVydGljYWxdOmZvY3VzOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXJ7Ym9yZGVyLWNvbG9yOnJnYmEoMCwgMTIyLCAxOTQsIDAuNSl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF1bZXJyb3JdOmhvdmVyOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXIsOmhvc3QoW2xheW91dD12ZXJ0aWNhbF1bZXJyb3JdOmZvY3VzOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5jb250YWluZXJ7Ym9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlci1ob3Zlcil9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSl7ZGlzcGxheTpjb250ZW50c306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGFpbmVye2Rpc3BsYXk6Y29udGVudHN9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLnN0ZXBwZXItaXRlbS1oZWFkZXJ7Ym9yZGVyLXdpZHRoOjBweDtib3JkZXItYmxvY2stc3RhcnQtd2lkdGg6MnB4O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMyk7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtncmlkLXJvdzppdGVtc306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuc3RlcHBlci1pdGVtLWhlYWRlcjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDpjYWxjKFxcbiAgICAgICAgICAgIDJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF0pIC5zdGVwcGVyLWl0ZW0tY29udGVudHtjdXJzb3I6YXV0bzt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7cGFkZGluZy1ibG9jazowO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1jYWxjaXRlLXN0ZXBwZXItaXRlbS1zcGFjaW5nLXVuaXQtbSk7dGV4dC1hbGlnbjpzdGFydH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3NlbGVjdGVkXSkgLnN0ZXBwZXItaXRlbS1jb250ZW50e2dyaWQtYXJlYToyLzEvMi8tMX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2NvbXBsZXRlXSkgLnN0ZXBwZXItaXRlbS1oZWFkZXJ7Ym9yZGVyLWNvbG9yOnJnYmEoMCwgMTIyLCAxOTQsIDAuNSl9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtjb21wbGV0ZV06aG92ZXI6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLnN0ZXBwZXItaXRlbS1oZWFkZXIsOmhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtjb21wbGV0ZV06Zm9jdXM6bm90KFtkaXNhYmxlZF0pOm5vdChbc2VsZWN0ZWRdKSkgLnN0ZXBwZXItaXRlbS1oZWFkZXJ7Ym9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZXJyb3JdKSAuc3RlcHBlci1pdGVtLWhlYWRlcntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW3NlbGVjdGVkXVttdWx0aXBsZS12aWV3LW1vZGVdKSAuc3RlcHBlci1pdGVtLWhlYWRlcntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXTpob3Zlcjpub3QoW2Rpc2FibGVkXSk6bm90KFtzZWxlY3RlZF0pKSAuc3RlcHBlci1pdGVtLWhlYWRlciw6aG9zdChbbGF5b3V0PWhvcml6b250YWxdOmZvY3VzOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5zdGVwcGVyLWl0ZW0taGVhZGVye2JvcmRlci1jb2xvcjpyZ2JhKDAsIDEyMiwgMTk0LCAwLjUpfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZXJyb3JdOmhvdmVyOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5zdGVwcGVyLWl0ZW0taGVhZGVyLDpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZXJyb3JdOmZvY3VzOm5vdChbZGlzYWJsZWRdKTpub3QoW3NlbGVjdGVkXSkpIC5zdGVwcGVyLWl0ZW0taGVhZGVye2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXItaG92ZXIpfUBtZWRpYSAoZm9yY2VkLWNvbG9yczogYWN0aXZlKXs6aG9zdCAuY29udGFpbmVye291dGxpbmUtd2lkdGg6MDtvdXRsaW5lLW9mZnNldDowfTpob3N0KDpmb2N1cyksOmhvc3QoOmZvY3VzLXZpc2libGUpe291dGxpbmUtY29sb3I6Y2FudmFzVGV4dH06aG9zdChbc2VsZWN0ZWRdKSAuY29udGFpbmVye2JvcmRlci1ibG9jay1zdGFydC1jb2xvcjpoaWdobGlnaHR9Omhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLW51bWJlcntjb2xvcjpoaWdobGlnaHR9Omhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLWljb257Y29sb3I6aGlnaGxpZ2h0fTpob3N0KFtsYXlvdXQ9dmVydGljYWxdW3NlbGVjdGVkXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6aGlnaGxpZ2h0fX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdOm5vdChbbXVsdGlwbGUtdmlldy1tb2RlXSkpIC5zdGVwcGVyLWl0ZW0taGVhZGVye21hcmdpbi1pbmxpbmUtZW5kOjBweDtib3JkZXItc3R5bGU6bm9uZTtpbmxpbmUtc2l6ZToxMDAlO3BhZGRpbmctaW5saW5lOmNhbGModmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zdGVwcGVyLWFjdGlvbi1pbmxpbmUtc2l6ZSkgKyAwLjVyZW0pfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZXJyb3JdOm5vdChbbXVsdGlwbGUtdmlldy1tb2RlXSkpIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1udW1iZXJ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2Vycm9yXTpub3QoW211bHRpcGxlLXZpZXctbW9kZV0pKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0taWNvbntvcGFjaXR5OjE7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2Vycm9yXVtzZWxlY3RlZF06bm90KFttdWx0aXBsZS12aWV3LW1vZGVdKSksOmhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtjb21wbGV0ZV1bc2VsZWN0ZWRdOm5vdChbbXVsdGlwbGUtdmlldy1tb2RlXSkpIC5jb250YWluZXJ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bZXJyb3JdW3NlbGVjdGVkXTpub3QoW211bHRpcGxlLXZpZXctbW9kZV0pKSAuc3RlcHBlci1pdGVtLWhlYWRpbmcsOmhvc3QoW2xheW91dD1ob3Jpem9udGFsXVtjb21wbGV0ZV1bc2VsZWN0ZWRdOm5vdChbbXVsdGlwbGUtdmlldy1tb2RlXSkpIC5jb250YWluZXIgLnN0ZXBwZXItaXRlbS1oZWFkaW5ne2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdW2NvbXBsZXRlXVtzZWxlY3RlZF06bm90KFttdWx0aXBsZS12aWV3LW1vZGVdKSkgLmNvbnRhaW5lciAuc3RlcHBlci1pdGVtLWljb257b3BhY2l0eTp2YXIoLS1jYWxjaXRlLW9wYWNpdHktZGlzYWJsZWQpfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF1bY29tcGxldGVdW3NlbGVjdGVkXTpub3QoW211bHRpcGxlLXZpZXctbW9kZV0pKSAuY29udGFpbmVyIC5zdGVwcGVyLWl0ZW0tbnVtYmVye2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0zKX0udmlzdWFsbHktaGlkZGVue3Bvc2l0aW9uOmFic29sdXRlO2lubGluZS1zaXplOjFweDtibG9jay1zaXplOjFweDtwYWRkaW5nOjA7bWFyZ2luOi0xcHg7b3ZlcmZsb3c6aGlkZGVuO2NsaXA6cmVjdCgwLCAwLCAwLCAwKTt3aGl0ZS1zcGFjZTpub3dyYXA7Ym9yZGVyLXdpZHRoOjB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IFN0ZXBwZXJJdGVtID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFN0ZXBwZXJJdGVtS2V5RXZlbnQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbFN0ZXBwZXJJdGVtS2V5RXZlbnRcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTdGVwcGVySXRlbVNlbGVjdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1TZWxlY3RcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxVc2VyUmVxdWVzdGVkU3RlcHBlckl0ZW1TZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbFVzZXJSZXF1ZXN0ZWRTdGVwcGVySXRlbVNlbGVjdFwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFN0ZXBwZXJJdGVtUmVnaXN0ZXIgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbFN0ZXBwZXJJdGVtUmVnaXN0ZXJcIiwgNik7XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHRoaXMua2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiBldmVudC50YXJnZXQgPT09IHRoaXMuZWwpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgICAgICBjYXNlIFwiIFwiOlxuICAgICAgICAgIGNhc2UgXCJFbnRlclwiOlxuICAgICAgICAgICAgdGhpcy5lbWl0VXNlclJlcXVlc3RlZEl0ZW0oKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICBjYXNlIFwiSG9tZVwiOlxuICAgICAgICAgIGNhc2UgXCJFbmRcIjpcbiAgICAgICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsU3RlcHBlckl0ZW1LZXlFdmVudC5lbWl0KHsgaXRlbTogZXZlbnQgfSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlSXRlbUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fFxuICAgICAgICAodGhpcy5sYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiICYmXG4gICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgIC5jb21wb3NlZFBhdGgoKVxuICAgICAgICAgICAgLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3Q/LmNvbnRhaW5zKFwic3RlcHBlci1pdGVtLWNvbnRlbnRcIikpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmVtaXRVc2VyUmVxdWVzdGVkSXRlbSgpO1xuICAgIH07XG4gICAgdGhpcy5lbWl0VXNlclJlcXVlc3RlZEl0ZW0gPSAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXRSZXF1ZXN0ZWRJdGVtKCk7XG4gICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLml0ZW1Qb3NpdGlvbjtcbiAgICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxVc2VyUmVxdWVzdGVkU3RlcHBlckl0ZW1TZWxlY3QuZW1pdCh7XG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5lbWl0UmVxdWVzdGVkSXRlbSA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuaXRlbVBvc2l0aW9uO1xuICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFN0ZXBwZXJJdGVtU2VsZWN0LmVtaXQoe1xuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XG4gICAgdGhpcy5lcnJvciA9IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmljb25GbGlwUnRsID0gZmFsc2U7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pY29uID0gZmFsc2U7XG4gICAgdGhpcy5sYXlvdXQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm51bWJlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMubXVsdGlwbGVWaWV3TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IFwiXCI7XG4gIH1cbiAgc2VsZWN0ZWRIYW5kbGVyKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLmVtaXRSZXF1ZXN0ZWRJdGVtKCk7XG4gICAgfVxuICB9XG4gIC8vIHdhdGNoIGZvciByZW1vdmFsIG9mIGRpc2FibGVkIHRvIHJlZ2lzdGVyIHN0ZXBcbiAgZGlzYWJsZWRXYXRjaGVyKCkge1xuICAgIHRoaXMucmVnaXN0ZXJTdGVwcGVySXRlbSgpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVXYXRjaGVyKGxvY2FsZSkge1xuICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xuICAgICAgbG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZSxcbiAgICB9O1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICB0aGlzLnBhcmVudFN0ZXBwZXJFbCA9IHRoaXMuZWwucGFyZW50RWxlbWVudDtcbiAgICB0aGlzLml0ZW1Qb3NpdGlvbiA9IHRoaXMuZ2V0SXRlbVBvc2l0aW9uKCk7XG4gICAgdGhpcy5yZWdpc3RlclN0ZXBwZXJJdGVtKCk7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMuZW1pdFJlcXVlc3RlZEl0ZW0oKTtcbiAgICB9XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMsIHRydWUpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgXCJhcmlhLWN1cnJlbnRcIjogdGhpcy5zZWxlY3RlZCA/IFwic3RlcFwiIDogXCJmYWxzZVwiLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUl0ZW1DbGljaywgb25LZXlEb3duOiB0aGlzLmtleURvd25IYW5kbGVyIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRhaW5lciB9LCB0aGlzLmNvbXBsZXRlICYmIChoKFwic3BhblwiLCB7IFwiYXJpYS1saXZlXCI6IFwicG9saXRlXCIsIGNsYXNzOiBDU1MudmlzdWFsbHlIaWRkZW4gfSwgdGhpcy5tZXNzYWdlcy5jb21wbGV0ZSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5zdGVwcGVySXRlbUhlYWRlciwgdGFiSW5kZXg6IFxuICAgICAgLyogYWRkaXRpb25hbCB0YWIgaW5kZXggbG9naWMgbmVlZGVkIGJlY2F1c2Ugb2YgZGlzcGxheTogY29udGVudHMgKi9cbiAgICAgIHRoaXMubGF5b3V0ID09PSBcImhvcml6b250YWxcIiAmJiAhdGhpcy5kaXNhYmxlZCAmJiB0aGlzLm11bHRpcGxlVmlld01vZGUgPyAwIDogbnVsbCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuaGVhZGVyRWwgPSBlbCkgfSwgdGhpcy5pY29uID8gdGhpcy5yZW5kZXJJY29uKCkgOiBudWxsLCB0aGlzLm51bWJlcmVkID8gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLnN0ZXBwZXJJdGVtTnVtYmVyIH0sIHRoaXMucmVuZGVyTnVtYmVycygpLCBcIi5cIikpIDogbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBDU1Muc3RlcHBlckl0ZW1IZWFkZXJUZXh0IH0sIGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5zdGVwcGVySXRlbUhlYWRpbmcgfSwgdGhpcy5oZWFkaW5nKSwgaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLnN0ZXBwZXJJdGVtRGVzY3JpcHRpb24gfSwgdGhpcy5kZXNjcmlwdGlvbikpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBDU1Muc3RlcHBlckl0ZW1Db250ZW50IH0sIGgoXCJzbG90XCIsIG51bGwpKSkpKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBFdmVudCBMaXN0ZW5lcnNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1cGRhdGVBY3RpdmVJdGVtT25DaGFuZ2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLnBhcmVudFN0ZXBwZXJFbCB8fFxuICAgICAgZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcy5wYXJlbnRTdGVwcGVyRWwpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkUG9zaXRpb24gPSBldmVudC5kZXRhaWwucG9zaXRpb247XG4gICAgICB0aGlzLmRldGVybWluZVNlbGVjdGVkSXRlbSgpO1xuICAgIH1cbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICAodGhpcy5sYXlvdXQgPT09IFwidmVydGljYWxcIiA/IHRoaXMuZWwgOiB0aGlzLmhlYWRlckVsKT8uZm9jdXMoKTtcbiAgfVxuICByZW5kZXJJY29uKCkge1xuICAgIGxldCBwYXRoID0gXCJjaXJjbGVcIjtcbiAgICBpZiAodGhpcy5zZWxlY3RlZCAmJiAodGhpcy5tdWx0aXBsZVZpZXdNb2RlIHx8ICghdGhpcy5lcnJvciAmJiAhdGhpcy5jb21wbGV0ZSkpKSB7XG4gICAgICBwYXRoID0gXCJjaXJjbGVGXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgIHBhdGggPSBcImV4Y2xhbWF0aW9uTWFya0NpcmNsZUZcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5jb21wbGV0ZSkge1xuICAgICAgcGF0aCA9IFwiY2hlY2tDaXJjbGVGXCI7XG4gICAgfVxuICAgIHJldHVybiAoaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiBcInN0ZXBwZXItaXRlbS1pY29uXCIsIGZsaXBSdGw6IHRoaXMuaWNvbkZsaXBSdGwsIGljb246IHBhdGgsIHNjYWxlOiBcInNcIiB9KSk7XG4gIH1cbiAgZGV0ZXJtaW5lU2VsZWN0ZWRJdGVtKCkge1xuICAgIHRoaXMuc2VsZWN0ZWQgPSAhdGhpcy5kaXNhYmxlZCAmJiB0aGlzLml0ZW1Qb3NpdGlvbiA9PT0gdGhpcy5zZWxlY3RlZFBvc2l0aW9uO1xuICB9XG4gIHJlZ2lzdGVyU3RlcHBlckl0ZW0oKSB7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTdGVwcGVySXRlbVJlZ2lzdGVyLmVtaXQoe1xuICAgICAgcG9zaXRpb246IHRoaXMuaXRlbVBvc2l0aW9uLFxuICAgIH0pO1xuICB9XG4gIGdldEl0ZW1Qb3NpdGlvbigpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBhcmVudFN0ZXBwZXJFbD8ucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtc3RlcHBlci1pdGVtXCIpKS5pbmRleE9mKHRoaXMuZWwpO1xuICB9XG4gIHJlbmRlck51bWJlcnMoKSB7XG4gICAgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgIHVzZUdyb3VwaW5nOiBmYWxzZSxcbiAgICB9O1xuICAgIHJldHVybiBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubnVtYmVyRm9ybWF0dGVyLmZvcm1hdCh0aGlzLml0ZW1Qb3NpdGlvbiArIDEpO1xuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJzZWxlY3RlZFwiOiBbXCJzZWxlY3RlZEhhbmRsZXJcIl0sXG4gICAgXCJkaXNhYmxlZFwiOiBbXCJkaXNhYmxlZFdhdGNoZXJcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlV2F0Y2hlclwiXVxuICB9OyB9XG59O1xuU3RlcHBlckl0ZW0uc3R5bGUgPSBzdGVwcGVySXRlbUNzcztcblxuZXhwb3J0IHsgU3RlcHBlciBhcyBjYWxjaXRlX3N0ZXBwZXIsIFN0ZXBwZXJJdGVtIGFzIGNhbGNpdGVfc3RlcHBlcl9pdGVtIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtc3RlcHBlcl8yLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgZyBhcyBnZXRVc2VyQWdlbnRTdHJpbmcgfSBmcm9tICcuL2Jyb3dzZXItZWNlMjlkYTcuanMnO1xuXG4vLyDimqDvuI8gYnJvd3Nlci1zbmlmZmluZyBpcyBub3QgYSBiZXN0IHByYWN0aWNlIGFuZCBzaG91bGQgYmUgYXZvaWRlZCDimqDvuI9cbmNvbnN0IGlzRmlyZWZveCA9IC9maXJlZm94L2kudGVzdChnZXRVc2VyQWdlbnRTdHJpbmcoKSk7XG5jb25zdCBpbnRlcmFjdGl2ZUVsZW1lbnRUb1BhcmVudCA9IGlzRmlyZWZveFxuICA/IG5ldyBXZWFrTWFwKClcbiAgOiBudWxsO1xuZnVuY3Rpb24gaW50ZXJjZXB0ZWRDbGljaygpIHtcbiAgY29uc3QgeyBkaXNhYmxlZCB9ID0gdGhpcztcbiAgaWYgKCFkaXNhYmxlZCkge1xuICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5jbGljay5jYWxsKHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBvblBvaW50ZXJEb3duKGV2ZW50KSB7XG4gIGNvbnN0IGludGVyYWN0aXZlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgaWYgKGlzRmlyZWZveCAmJiAhaW50ZXJhY3RpdmVFbGVtZW50VG9QYXJlbnQuZ2V0KGludGVyYWN0aXZlRWxlbWVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgeyBkaXNhYmxlZCB9ID0gaW50ZXJhY3RpdmVFbGVtZW50O1xuICBpZiAoZGlzYWJsZWQpIHtcbiAgICAvLyBwcmV2ZW50IGNsaWNrIGZyb20gbW92aW5nIGZvY3VzIG9uIGhvc3RcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG59XG5jb25zdCBub25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnRzID0gW1wibW91c2Vkb3duXCIsIFwibW91c2V1cFwiLCBcImNsaWNrXCJdO1xuZnVuY3Rpb24gb25Ob25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnQoZXZlbnQpIHtcbiAgaWYgKGlzRmlyZWZveCAmJiAhaW50ZXJhY3RpdmVFbGVtZW50VG9QYXJlbnQuZ2V0KGV2ZW50LnRhcmdldCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgeyBkaXNhYmxlZCB9ID0gZXZlbnQudGFyZ2V0O1xuICAvLyBwcmV2ZW50IGRpc2FsbG93ZWQgbW91c2UgZXZlbnRzIGZyb20gYmVpbmcgZW1pdHRlZCBvbiB0aGUgZGlzYWJsZWQgaG9zdCAocGVyIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvaHRtbC9pc3N1ZXMvNTg4NilcbiAgLy/imqAgd2UgZ2VuZXJhbGx5IGF2b2lkIHN0b3BwaW5nIHByb3BhZ2F0aW9uIG9mIGV2ZW50cywgYnV0IHRoaXMgaXMgbmVlZGVkIHRvIGFkaGVyZSB0byB0aGUgaW50ZW5kZWQgc3BlYyBjaGFuZ2VzIGFib3ZlIOKaoFxuICBpZiAoZGlzYWJsZWQpIHtcbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG59XG5jb25zdCBjYXB0dXJlT25seU9wdGlvbnMgPSB7IGNhcHR1cmU6IHRydWUgfTtcbi8qKlxuICogVGhpcyBoZWxwZXIgdXBkYXRlcyB0aGUgaG9zdCBlbGVtZW50IHRvIHByZXZlbnQga2V5Ym9hcmQgaW50ZXJhY3Rpb24gb24gaXRzIHN1YnRyZWUgYW5kIHNldHMgdGhlIGFwcHJvcHJpYXRlIGFyaWEgYXR0cmlidXRlIGZvciBhY2Nlc3NpYmlsaXR5LlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRSZW5kZXJgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqICoqTm90ZXMqKlxuICpcbiAqIHRoaXMgdXRpbCBpcyBub3QgbmVlZGVkIGZvciBzaW1wbGUgY29tcG9uZW50cyB3aG9zZSByb290IGVsZW1lbnQgb3IgZWxlbWVudHMgYXJlIGFuIGludGVyYWN0aXZlIGNvbXBvbmVudCAoY3VzdG9tIGVsZW1lbnQgb3IgbmF0aXZlIGNvbnRyb2wpLiBGb3IgdGhvc2UgY2FzZXMsIHNldCB0aGUgYGRpc2FibGVkYCBwcm9wcyBvbiB0aGUgcm9vdCBjb21wb25lbnRzIGluc3RlYWQuXG4gKiB0ZWNobmljYWxseSwgdXNlcnMgY2FuIG92ZXJyaWRlIGB0YWJpbmRleGAgYW5kIHJlc3RvcmUga2V5Ym9hcmQgbmF2aWdhdGlvbiwgYnV0IHRoaXMgd2lsbCBiZSBjb25zaWRlcmVkIHVzZXIgZXJyb3JcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gaG9zdElzVGFiYmFibGUg4oCTIHdoZW4gc2V0IHRvIHRydWUgb3IgaXRzIHByZWRpY2F0ZSByZXR1cm5zIHRydWUsIHRoZSBob3N0IGlzIHRhYmJhYmxlIGFuZCB3aWxsIGJlIG1hbmFnZWQgYnkgdGhlIGhlbHBlci4gU2V0IHRvIFwibWFuYWdlZFwiIGZvciBjYXNlcyB3aGVyZSBhIGNvbXBvbmVudCdzIHBhcmVudCBkZXRlcm1pbmVzIHdoaWNoIGl0ZW0gaXMgdGFiYmFibGUgKGkuZS4sIHNldHMgYHRhYmluZGV4YCB0byBhbGxvdyB0YWJiaW5nKS5cbiAqL1xuZnVuY3Rpb24gdXBkYXRlSG9zdEludGVyYWN0aW9uKGNvbXBvbmVudCwgaG9zdElzVGFiYmFibGUgPSBmYWxzZSkge1xuICBpZiAoY29tcG9uZW50LmRpc2FibGVkKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGlmIChjb21wb25lbnQuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICBibG9ja0ludGVyYWN0aW9uKGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlc3RvcmVJbnRlcmFjdGlvbihjb21wb25lbnQpO1xuICBpZiAodHlwZW9mIGhvc3RJc1RhYmJhYmxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgaG9zdElzVGFiYmFibGUuY2FsbChjb21wb25lbnQpID8gXCIwXCIgOiBcIi0xXCIpO1xuICB9XG4gIGVsc2UgaWYgKGhvc3RJc1RhYmJhYmxlID09PSB0cnVlKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgfVxuICBlbHNlIGlmIChob3N0SXNUYWJiYWJsZSA9PT0gZmFsc2UpIHtcbiAgICBjb21wb25lbnQuZWwucmVtb3ZlQXR0cmlidXRlKFwidGFiaW5kZXhcIik7XG4gIH1cbiAgZWxzZSA7XG4gIGNvbXBvbmVudC5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWRpc2FibGVkXCIpO1xufVxuZnVuY3Rpb24gYmxvY2tJbnRlcmFjdGlvbihjb21wb25lbnQpIHtcbiAgY29tcG9uZW50LmVsLmNsaWNrID0gaW50ZXJjZXB0ZWRDbGljaztcbiAgYWRkSW50ZXJhY3Rpb25MaXN0ZW5lcnMoaXNGaXJlZm94ID8gZ2V0UGFyZW50RWxlbWVudChjb21wb25lbnQpIDogY29tcG9uZW50LmVsKTtcbn1cbmZ1bmN0aW9uIGFkZEludGVyYWN0aW9uTGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50KSB7XG4gICAgLy8gdGhpcyBwYXRoIGlzIG9ubHkgYXBwbGljYWJsZSB0byBGaXJlZm94XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24sIGNhcHR1cmVPbmx5T3B0aW9ucyk7XG4gIG5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25Ob25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnQsIGNhcHR1cmVPbmx5T3B0aW9ucykpO1xufVxuZnVuY3Rpb24gZ2V0UGFyZW50RWxlbWVudChjb21wb25lbnQpIHtcbiAgcmV0dXJuIGludGVyYWN0aXZlRWxlbWVudFRvUGFyZW50LmdldChjb21wb25lbnQuZWwpO1xufVxuZnVuY3Rpb24gcmVzdG9yZUludGVyYWN0aW9uKGNvbXBvbmVudCkge1xuICBkZWxldGUgY29tcG9uZW50LmVsLmNsaWNrOyAvLyBmYWxsYmFjayBvbiBIVE1MRWxlbWVudC5wcm90b3R5cGUuY2xpY2tcbiAgcmVtb3ZlSW50ZXJhY3Rpb25MaXN0ZW5lcnMoaXNGaXJlZm94ID8gZ2V0UGFyZW50RWxlbWVudChjb21wb25lbnQpIDogY29tcG9uZW50LmVsKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUludGVyYWN0aW9uTGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50KSB7XG4gICAgLy8gdGhpcyBwYXRoIGlzIG9ubHkgYXBwbGljYWJsZSB0byBGaXJlZm94XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24sIGNhcHR1cmVPbmx5T3B0aW9ucyk7XG4gIG5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgb25Ob25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnQsIGNhcHR1cmVPbmx5T3B0aW9ucykpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgaGVscHMgZGlzYWJsZSBjb21wb25lbnRzIGNvbnNpc3RlbnRseSBpbiBGaXJlZm94LlxuICpcbiAqIEl0IG5lZWRzIHRvIGJlIGNhbGxlZCBpbiBgY29ubmVjdGVkQ2FsbGJhY2tgIGFuZCBpcyBvbmx5IG5lZWRlZCBmb3IgRmlyZWZveCBhcyBpdCBkb2VzIG5vdCBjYWxsIGNhcHR1cmUgZXZlbnQgbGlzdGVuZXJzIGJlZm9yZSBub24tY2FwdHVyZSBvbmVzIChzZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTczMTUwNCkuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0SW50ZXJhY3RpdmUoY29tcG9uZW50KSB7XG4gIGlmICghY29tcG9uZW50LmRpc2FibGVkIHx8ICFpc0ZpcmVmb3gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcGFyZW50ID0gY29tcG9uZW50LmVsLnBhcmVudEVsZW1lbnQgfHwgY29tcG9uZW50LmVsOyAvKiBhc3N1bWUgZWxlbWVudCBpcyBob3N0IGlmIGl0IGhhcyBubyBwYXJlbnQgd2hlbiBjb25uZWN0ZWQgKi9cbiAgaW50ZXJhY3RpdmVFbGVtZW50VG9QYXJlbnQuc2V0KGNvbXBvbmVudC5lbCwgcGFyZW50KTtcbiAgYmxvY2tJbnRlcmFjdGlvbihjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgcmVzdG9yZXMgaW50ZXJhY3Rpdml0eSB0byBkaXNhYmxlZCBjb21wb25lbnRzIGNvbnNpc3RlbnRseSBpbiBGaXJlZm94LlxuICpcbiAqIEl0IG5lZWRzIHRvIGJlIGNhbGxlZCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgIGFuZCBpcyBvbmx5IG5lZWRlZCBmb3IgRmlyZWZveCBhcyBpdCBkb2VzIG5vdCBjYWxsIGNhcHR1cmUgZXZlbnQgbGlzdGVuZXJzIGJlZm9yZSBub24tY2FwdHVyZSBvbmVzIChzZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTczMTUwNCkuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBkaXNjb25uZWN0SW50ZXJhY3RpdmUoY29tcG9uZW50KSB7XG4gIGlmICghaXNGaXJlZm94KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGFsd2F5cyByZW1vdmUgb24gZGlzY29ubmVjdCBhcyByZW5kZXIgb3IgY29ubmVjdCB3aWxsIHJlc3RvcmUgaXRcbiAgaW50ZXJhY3RpdmVFbGVtZW50VG9QYXJlbnQuZGVsZXRlKGNvbXBvbmVudC5lbCk7XG4gIHJlc3RvcmVJbnRlcmFjdGlvbihjb21wb25lbnQpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0SW50ZXJhY3RpdmUgYXMgYywgZGlzY29ubmVjdEludGVyYWN0aXZlIGFzIGQsIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiBhcyB1IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aXZlLWNiZDhhNmRjLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgZiBhcyBmb3JjZVVwZGF0ZSB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuXG5jb25zdCByZXNvbHZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIHNldHMgdXAgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGFiaWxpdHkgdG8ga25vdyB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnRXaWxsTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnRXaWxsTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0VXBMb2FkYWJsZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcHJvbWlzZU1hcC5zZXQoY29tcG9uZW50LCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZU1hcC5zZXQoY29tcG9uZW50LCByZXNvbHZlKSkpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGxldHMgdGhlIGxvYWRhYmxlIGNvbXBvbmVudCBrbm93IHRoYXQgaXQgaXMgbm93IGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50RGlkTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnREaWRMb2FkKCk6IHZvaWQge1xuICogICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmVzb2x2ZU1hcC5nZXQoY29tcG9uZW50KSgpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBTdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QuXG4gKlxuICogYGBgXG4gKiBhc3luYyBteU1ldGhvZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICogQHJldHVybnMgUHJvbWlzZTx2b2lkPlxuICovXG5mdW5jdGlvbiBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJldHVybiBwcm9taXNlTWFwLmdldChjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyaW5nIHRoZSBjb21wb25lbnQgaXMgbG9hZGVkIGFuZCByZW5kZXJlZCBieSB0aGUgYnJvd3NlciAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIFN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQgYW5kIGFueSBpbnRlcm5hbCBlbGVtZW50cyBhcmUgZm9jdXNhYmxlKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QgYW5kIHRoZW4gYW4gaW50ZXJuYWwgZWxlbWVudCBiZSBmb2N1c2VkLlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAqICAgdGhpcy5pbnRlcm5hbEVsZW1lbnQ/LmZvY3VzKCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbXBvbmVudEZvY3VzYWJsZShjb21wb25lbnQpIHtcbiAgYXdhaXQgY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCk7XG4gIGZvcmNlVXBkYXRlKGNvbXBvbmVudCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xufVxuXG5leHBvcnQgeyBzZXRDb21wb25lbnRMb2FkZWQgYXMgYSwgY29tcG9uZW50TG9hZGVkIGFzIGIsIGNvbXBvbmVudEZvY3VzYWJsZSBhcyBjLCBzZXRVcExvYWRhYmxlQ29tcG9uZW50IGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtYjE3Mzk2ZTAuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBhIGFzIGdldEFzc2V0UGF0aCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5cbmNvbnN0IGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZSA9IHt9O1xuYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZUJ1bmRsZShsYW5nLCBjb21wb25lbnQpIHtcbiAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50fV8ke2xhbmd9YDtcbiAgaWYgKGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xuICB9XG4gIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldID0gZmV0Y2goZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy8ke2NvbXBvbmVudH0vdDluL21lc3NhZ2VzXyR7bGFuZ30uanNvbmApKVxuICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwLmpzb24oKTtcbiAgfSlcbiAgICAuY2F0Y2goKCkgPT4gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpKTtcbiAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xufVxuZnVuY3Rpb24gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGZldGNoIGNvbXBvbmVudCBtZXNzYWdlIGJ1bmRsZVwiKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5tZXNzYWdlcyA9IHtcbiAgICAuLi5jb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzLFxuICAgIC4uLmNvbXBvbmVudC5tZXNzYWdlT3ZlcnJpZGVzLFxuICB9O1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCB0aGUgbWVzc2FnZXMgdXNlZCBieSB0aGUgY29tcG9uZW50LiBJdCBzaG91bGQgYmUgYXdhaXRlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNldFVwTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMgPSBhd2FpdCBmZXRjaE1lc3NhZ2VzKGNvbXBvbmVudCwgY29tcG9uZW50LmVmZmVjdGl2ZUxvY2FsZSk7XG4gIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKSB7XG4gIGNvbnN0IHsgZWwgfSA9IGNvbXBvbmVudDtcbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnLnJlcGxhY2UoXCJjYWxjaXRlLVwiLCBcIlwiKTtcbiAgcmV0dXJuIGdldE1lc3NhZ2VCdW5kbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKGxhbmcsIFwidDluXCIpLCBjb21wb25lbnROYW1lKTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IG11c3QgYmUgc2V0IHVwIGZvciB0aGUgY29tcG9uZW50IHRvIHVwZGF0ZSBpdHMgZGVmYXVsdCBtZXNzYWdlIGJ1bmRsZSBpZiB0aGUgbG9jYWxlIGNoYW5nZXMuXG4gKlxuICogSXQgY2FuIGJlIHNldCB1cCBpbiAqKmVpdGhlcioqIG9mIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqXG4gKiAxLiBjYWxsZWQgZnJvbSBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBvbkxvY2FsZUNoYW5nZWAgbWV0aG9kIG9yXG4gKiAyLiBjYWxsZWQgZnJvbSBhIHdhdGNoZXIgY29uZmlndXJlZCB0byB3YXRjaCBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBlZmZlY3RpdmVMb2NhbGVgIHByb3BcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gbGFuZ1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCBpbnRlcm5hbHMgZm9yIG1lc3NhZ2VzIHN1cHBvcnQuXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBtdXN0IGJlIGNhbGxlZCBhZnRlciBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBjb25uZWN0TG9jYWxpemVkYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2U7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSB0ZWFycyBkb3duIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdE1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQub25NZXNzYWdlc0NoYW5nZSA9IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRPbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICBtZXJnZU1lc3NhZ2VzKHRoaXMpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0TWVzc2FnZXMgYXMgYywgZGlzY29ubmVjdE1lc3NhZ2VzIGFzIGQsIHNldFVwTWVzc2FnZXMgYXMgcywgdXBkYXRlTWVzc2FnZXMgYXMgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10OW4tMGJjZGNhNTQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9