"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-input-time-picker_2_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getUserAgentString)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
function getUserAgentData() {
  return navigator.userAgentData;
}
function getUserAgentString() {
  const uaData = getUserAgentData();
  return uaData?.brands
    ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(" ")
    : navigator.userAgent;
}



//# sourceMappingURL=browser-ece29da7.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-input-time-picker.calcite-time-picker-f368e9a2.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-input-time-picker.calcite-time-picker-f368e9a2.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ InputTimePicker),
/* harmony export */   T: () => (/* binding */ TimePicker),
/* harmony export */   d: () => (/* binding */ dayjs)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./form-4876c9e5.js */ "./node_modules/@esri/calcite-components/dist/esm/form-4876c9e5.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactive-cbd8a6dc.js */ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _label_1c285d41_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./label-1c285d41.js */ "./node_modules/@esri/calcite-components/dist/esm/label-1c285d41.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./focusTrapComponent-aee15b41.js */ "./node_modules/@esri/calcite-components/dist/esm/focusTrapComponent-aee15b41.js");
/* harmony import */ var _math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./math-922e37ec.js */ "./node_modules/@esri/calcite-components/dist/esm/math-922e37ec.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./openCloseComponent-48db6daf.js */ "./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js");
/* harmony import */ var _component_f94cab72_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./component-f94cab72.js */ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */














const maxTenthForMinuteAndSecond = 5;
function createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds = true, fractionalSecondDigits) {
  const options = {
    hour: "2-digit",
    minute: "2-digit",
    timeZone: "UTC",
    numberingSystem: (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.f)(numberingSystem),
  };
  if (includeSeconds) {
    options.second = "2-digit";
    if (fractionalSecondDigits) {
      options.fractionalSecondDigits = fractionalSecondDigits;
    }
  }
  return (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.e)(locale, options);
}
function formatTimePart(number, minLength) {
  if (number === null || number === undefined) {
    return;
  }
  const numberAsString = number.toString();
  const numberDecimalPlaces = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(number);
  if (number < 1 && numberDecimalPlaces > 0 && numberDecimalPlaces < 4) {
    const fractionalDigits = numberAsString.replace("0.", "");
    if (!minLength || fractionalDigits.length === minLength) {
      return fractionalDigits;
    }
    if (fractionalDigits.length < minLength) {
      return fractionalDigits.padEnd(minLength, "0");
    }
    return fractionalDigits;
  }
  if (number >= 0 && number < 10) {
    return numberAsString.padStart(2, "0");
  }
  if (number >= 10) {
    return numberAsString;
  }
}
function formatTimeString(value) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second, fractionalSecond } = parseTimeString(value);
  let formattedValue = `${formatTimePart(parseInt(hour))}:${formatTimePart(parseInt(minute))}`;
  if (second) {
    formattedValue += `:${formatTimePart(parseInt(second))}`;
    if (fractionalSecond) {
      formattedValue += `.${fractionalSecond}`;
    }
  }
  return formattedValue;
}
function fractionalSecondPartToMilliseconds(fractionalSecondPart) {
  return parseInt((parseFloat(`0.${fractionalSecondPart}`) / 0.001).toFixed(3));
}
function getLocaleHourCycle(locale, numberingSystem) {
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(new Date(Date.UTC(0, 0, 0, 0, 0, 0)));
  return getLocalizedTimePart("meridiem", parts) ? "12" : "24";
}
function getLocalizedDecimalSeparator(locale, numberingSystem) {
  _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.numberFormatOptions = {
    locale,
    numberingSystem,
  };
  return _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.localize("1.1").split("")[1];
}
function getLocalizedTimePartSuffix(part, locale, numberingSystem = "latn") {
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(new Date(Date.UTC(0, 0, 0, 0, 0, 0)));
  return getLocalizedTimePart(`${part}Suffix`, parts);
}
function getLocalizedTimePart(part, parts) {
  if (!part || !parts) {
    return null;
  }
  if (part === "hourSuffix") {
    const hourIndex = parts.indexOf(parts.find(({ type }) => type === "hour"));
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const hourSuffix = parts[hourIndex + 1];
    return hourSuffix && hourSuffix.type === "literal" && minuteIndex - hourIndex === 2
      ? hourSuffix.value?.trim() || null
      : null;
  }
  if (part === "minuteSuffix") {
    const minuteIndex = parts.indexOf(parts.find(({ type }) => type === "minute"));
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const minuteSuffix = parts[minuteIndex + 1];
    return minuteSuffix && minuteSuffix.type === "literal" && secondIndex - minuteIndex === 2
      ? minuteSuffix.value?.trim() || null
      : null;
  }
  if (part === "secondSuffix") {
    const secondIndex = parts.indexOf(parts.find(({ type }) => type === "second"));
    const secondSuffix = parts[secondIndex + 1];
    return secondSuffix && secondSuffix.type === "literal" ? secondSuffix.value?.trim() || null : null;
  }
  return parts.find(({ type }) => (part == "meridiem" ? type === "dayPeriod" : type === part))?.value || null;
}
function getMeridiem(hour) {
  if (!(0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(hour)) {
    return null;
  }
  const hourAsNumber = parseInt(hour);
  return hourAsNumber >= 0 && hourAsNumber <= 11 ? "AM" : "PM";
}
function isValidTime(value) {
  if (!value || value.startsWith(":") || value.endsWith(":")) {
    return false;
  }
  const splitValue = value.split(":");
  const validLength = splitValue.length > 1 && splitValue.length < 4;
  if (!validLength) {
    return false;
  }
  const [hour, minute, second] = splitValue;
  const hourAsNumber = parseInt(splitValue[0]);
  const minuteAsNumber = parseInt(splitValue[1]);
  const secondAsNumber = parseInt(splitValue[2]);
  const hourValid = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(hour) && hourAsNumber >= 0 && hourAsNumber < 24;
  const minuteValid = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(minute) && minuteAsNumber >= 0 && minuteAsNumber < 60;
  const secondValid = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(second) && secondAsNumber >= 0 && secondAsNumber < 60;
  if ((hourValid && minuteValid && !second) || (hourValid && minuteValid && secondValid)) {
    return true;
  }
}
function isValidTimePart(value, part) {
  if (part === "meridiem") {
    return value === "AM" || value === "PM";
  }
  if (!(0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(value)) {
    return false;
  }
  const valueAsNumber = Number(value);
  return part === "hour" ? valueAsNumber >= 0 && valueAsNumber < 24 : valueAsNumber >= 0 && valueAsNumber < 60;
}
function localizeTimePart({ value, part, locale, numberingSystem }) {
  if (part === "fractionalSecond") {
    const localizedDecimalSeparator = getLocalizedDecimalSeparator(locale, numberingSystem);
    let localizedFractionalSecond = null;
    if (value) {
      _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.numberFormatOptions = {
        locale,
        numberingSystem,
      };
      const localizedZero = _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.localize("0");
      if (parseInt(value) === 0) {
        localizedFractionalSecond = "".padStart(value.length, localizedZero);
      }
      else {
        localizedFractionalSecond = _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n
          .localize(`0.${value}`)
          .replace(`${localizedZero}${localizedDecimalSeparator}`, "");
        if (localizedFractionalSecond.length < value.length) {
          localizedFractionalSecond = localizedFractionalSecond.padEnd(value.length, localizedZero);
        }
      }
    }
    return localizedFractionalSecond;
  }
  if (!isValidTimePart(value, part)) {
    return;
  }
  const valueAsNumber = parseInt(value);
  const date = new Date(Date.UTC(0, 0, 0, part === "hour" ? valueAsNumber : part === "meridiem" ? (value === "AM" ? 0 : 12) : 0, part === "minute" ? valueAsNumber : 0, part === "second" ? valueAsNumber : 0));
  if (!date) {
    return;
  }
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
  const parts = formatter.formatToParts(date);
  return getLocalizedTimePart(part, parts);
}
function localizeTimeString({ value, locale, numberingSystem, includeSeconds = true, fractionalSecondDigits, }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0", fractionalSecond } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second), fractionalSecond && fractionalSecondPartToMilliseconds(fractionalSecond)));
  const formatter = createLocaleDateTimeFormatter(locale, numberingSystem, includeSeconds, fractionalSecondDigits);
  return formatter.format(dateFromTimeString) || null;
}
function localizeTimeStringToParts({ value, locale, numberingSystem = "latn", }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0", fractionalSecond } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return {
      localizedHour: getLocalizedTimePart("hour", parts),
      localizedHourSuffix: getLocalizedTimePart("hourSuffix", parts),
      localizedMinute: getLocalizedTimePart("minute", parts),
      localizedMinuteSuffix: getLocalizedTimePart("minuteSuffix", parts),
      localizedSecond: getLocalizedTimePart("second", parts),
      localizedDecimalSeparator: getLocalizedDecimalSeparator(locale, numberingSystem),
      localizedFractionalSecond: localizeTimePart({
        value: fractionalSecond,
        part: "fractionalSecond",
        locale,
        numberingSystem,
      }),
      localizedSecondSuffix: getLocalizedTimePart("secondSuffix", parts),
      localizedMeridiem: getLocalizedTimePart("meridiem", parts),
    };
  }
  return null;
}
function getTimeParts({ value, locale, numberingSystem }) {
  if (!isValidTime(value)) {
    return null;
  }
  const { hour, minute, second = "0" } = parseTimeString(value);
  const dateFromTimeString = new Date(Date.UTC(0, 0, 0, parseInt(hour), parseInt(minute), parseInt(second)));
  if (dateFromTimeString) {
    const formatter = createLocaleDateTimeFormatter(locale, numberingSystem);
    const parts = formatter.formatToParts(dateFromTimeString);
    return parts;
  }
  return null;
}
function parseTimeString(value) {
  if (isValidTime(value)) {
    const [hour, minute, secondDecimal] = value.split(":");
    let second = secondDecimal;
    let fractionalSecond = null;
    if (secondDecimal?.includes(".")) {
      [second, fractionalSecond] = secondDecimal.split(".");
    }
    return {
      fractionalSecond,
      hour,
      minute,
      second,
    };
  }
  return {
    fractionalSecond: null,
    hour: null,
    minute: null,
    second: null,
  };
}
function toISOTimeString(value, includeSeconds = true) {
  if (!isValidTime(value)) {
    return "";
  }
  const { hour, minute, second, fractionalSecond } = parseTimeString(value);
  let isoTimeString = `${formatTimePart(parseInt(hour))}:${formatTimePart(parseInt(minute))}`;
  if (includeSeconds) {
    isoTimeString += `:${formatTimePart(parseInt((includeSeconds && second) || "0"))}`;
    if (fractionalSecond) {
      isoTimeString += `.${fractionalSecond}`;
    }
  }
  return isoTimeString;
}

const CSS$1 = {
  toggleIcon: "toggle-icon",
};

var SECONDS_A_MINUTE = 60;
var SECONDS_A_HOUR = SECONDS_A_MINUTE * 60;
var SECONDS_A_DAY = SECONDS_A_HOUR * 24;
var SECONDS_A_WEEK = SECONDS_A_DAY * 7;
var MILLISECONDS_A_SECOND = 1e3;
var MILLISECONDS_A_MINUTE = SECONDS_A_MINUTE * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_HOUR = SECONDS_A_HOUR * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_DAY = SECONDS_A_DAY * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_WEEK = SECONDS_A_WEEK * MILLISECONDS_A_SECOND; // English locales

var MS = 'millisecond';
var S = 'second';
var MIN = 'minute';
var H = 'hour';
var D = 'day';
var W = 'week';
var M = 'month';
var Q = 'quarter';
var Y = 'year';
var DATE = 'date';
var FORMAT_DEFAULT = 'YYYY-MM-DDTHH:mm:ssZ';
var INVALID_DATE_STRING = 'Invalid Date'; // regex

var REGEX_PARSE = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/;
var REGEX_FORMAT = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;

// English [en]
// We don't need weekdaysShort, weekdaysMin, monthsShort in en.js locale
const en = {
  name: 'en',
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  ordinal: function ordinal(n) {
    var s = ['th', 'st', 'nd', 'rd'];
    var v = n % 100;
    return "[" + n + (s[(v - 20) % 10] || s[v] || s[0]) + "]";
  }
};

const en$1 = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': en
});

var padStart = function padStart(string, length, pad) {
  var s = String(string);
  if (!s || s.length >= length) return string;
  return "" + Array(length + 1 - s.length).join(pad) + string;
};

var padZoneStr = function padZoneStr(instance) {
  var negMinutes = -instance.utcOffset();
  var minutes = Math.abs(negMinutes);
  var hourOffset = Math.floor(minutes / 60);
  var minuteOffset = minutes % 60;
  return "" + (negMinutes <= 0 ? '+' : '-') + padStart(hourOffset, 2, '0') + ":" + padStart(minuteOffset, 2, '0');
};

var monthDiff = function monthDiff(a, b) {
  // function from moment.js in order to keep the same result
  if (a.date() < b.date()) return -monthDiff(b, a);
  var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month());
  var anchor = a.clone().add(wholeMonthDiff, M);
  var c = b - anchor < 0;
  var anchor2 = a.clone().add(wholeMonthDiff + (c ? -1 : 1), M);
  return +(-(wholeMonthDiff + (b - anchor) / (c ? anchor - anchor2 : anchor2 - anchor)) || 0);
};

var absFloor = function absFloor(n) {
  return n < 0 ? Math.ceil(n) || 0 : Math.floor(n);
};

var prettyUnit = function prettyUnit(u) {
  var special = {
    M: M,
    y: Y,
    w: W,
    d: D,
    D: DATE,
    h: H,
    m: MIN,
    s: S,
    ms: MS,
    Q: Q
  };
  return special[u] || String(u || '').toLowerCase().replace(/s$/, '');
};

var isUndefined = function isUndefined(s) {
  return s === undefined;
};

const U = {
  s: padStart,
  z: padZoneStr,
  m: monthDiff,
  a: absFloor,
  p: prettyUnit,
  u: isUndefined
};

var L = 'en'; // global locale

var Ls = {}; // global loaded locale

Ls[L] = en;
var IS_DAYJS = '$isDayjsObject'; // eslint-disable-next-line no-use-before-define

var isDayjs = function isDayjs(d) {
  return d instanceof Dayjs || !!(d && d[IS_DAYJS]);
};

var parseLocale = function parseLocale(preset, object, isLocal) {
  var l;
  if (!preset) return L;

  if (typeof preset === 'string') {
    var presetLower = preset.toLowerCase();

    if (Ls[presetLower]) {
      l = presetLower;
    }

    if (object) {
      Ls[presetLower] = object;
      l = presetLower;
    }

    var presetSplit = preset.split('-');

    if (!l && presetSplit.length > 1) {
      return parseLocale(presetSplit[0]);
    }
  } else {
    var name = preset.name;
    Ls[name] = preset;
    l = name;
  }

  if (!isLocal && l) L = l;
  return l || !isLocal && L;
};

var dayjs = function dayjs(date, c) {
  if (isDayjs(date)) {
    return date.clone();
  } // eslint-disable-next-line no-nested-ternary


  var cfg = typeof c === 'object' ? c : {};
  cfg.date = date;
  cfg.args = arguments; // eslint-disable-line prefer-rest-params

  return new Dayjs(cfg); // eslint-disable-line no-use-before-define
};

var wrapper = function wrapper(date, instance) {
  return dayjs(date, {
    locale: instance.$L,
    utc: instance.$u,
    x: instance.$x,
    $offset: instance.$offset // todo: refactor; do not use this.$offset in you code

  });
};

var Utils = U; // for plugin use

Utils.l = parseLocale;
Utils.i = isDayjs;
Utils.w = wrapper;

var parseDate = function parseDate(cfg) {
  var date = cfg.date,
      utc = cfg.utc;
  if (date === null) return new Date(NaN); // null is invalid

  if (Utils.u(date)) return new Date(); // today

  if (date instanceof Date) return new Date(date);

  if (typeof date === 'string' && !/Z$/i.test(date)) {
    var d = date.match(REGEX_PARSE);

    if (d) {
      var m = d[2] - 1 || 0;
      var ms = (d[7] || '0').substring(0, 3);

      if (utc) {
        return new Date(Date.UTC(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms));
      }

      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms);
    }
  }

  return new Date(date); // everything else
};

var Dayjs = /*#__PURE__*/function () {
  function Dayjs(cfg) {
    this.$L = parseLocale(cfg.locale, null, true);
    this.parse(cfg); // for plugin

    this.$x = this.$x || cfg.x || {};
    this[IS_DAYJS] = true;
  }

  var _proto = Dayjs.prototype;

  _proto.parse = function parse(cfg) {
    this.$d = parseDate(cfg);
    this.init();
  };

  _proto.init = function init() {
    var $d = this.$d;
    this.$y = $d.getFullYear();
    this.$M = $d.getMonth();
    this.$D = $d.getDate();
    this.$W = $d.getDay();
    this.$H = $d.getHours();
    this.$m = $d.getMinutes();
    this.$s = $d.getSeconds();
    this.$ms = $d.getMilliseconds();
  } // eslint-disable-next-line class-methods-use-this
  ;

  _proto.$utils = function $utils() {
    return Utils;
  };

  _proto.isValid = function isValid() {
    return !(this.$d.toString() === INVALID_DATE_STRING);
  };

  _proto.isSame = function isSame(that, units) {
    var other = dayjs(that);
    return this.startOf(units) <= other && other <= this.endOf(units);
  };

  _proto.isAfter = function isAfter(that, units) {
    return dayjs(that) < this.startOf(units);
  };

  _proto.isBefore = function isBefore(that, units) {
    return this.endOf(units) < dayjs(that);
  };

  _proto.$g = function $g(input, get, set) {
    if (Utils.u(input)) return this[get];
    return this.set(set, input);
  };

  _proto.unix = function unix() {
    return Math.floor(this.valueOf() / 1000);
  };

  _proto.valueOf = function valueOf() {
    // timezone(hour) * 60 * 60 * 1000 => ms
    return this.$d.getTime();
  };

  _proto.startOf = function startOf(units, _startOf) {
    var _this = this;

    // startOf -> endOf
    var isStartOf = !Utils.u(_startOf) ? _startOf : true;
    var unit = Utils.p(units);

    var instanceFactory = function instanceFactory(d, m) {
      var ins = Utils.w(_this.$u ? Date.UTC(_this.$y, m, d) : new Date(_this.$y, m, d), _this);
      return isStartOf ? ins : ins.endOf(D);
    };

    var instanceFactorySet = function instanceFactorySet(method, slice) {
      var argumentStart = [0, 0, 0, 0];
      var argumentEnd = [23, 59, 59, 999];
      return Utils.w(_this.toDate()[method].apply( // eslint-disable-line prefer-spread
      _this.toDate('s'), (isStartOf ? argumentStart : argumentEnd).slice(slice)), _this);
    };

    var $W = this.$W,
        $M = this.$M,
        $D = this.$D;
    var utcPad = "set" + (this.$u ? 'UTC' : '');

    switch (unit) {
      case Y:
        return isStartOf ? instanceFactory(1, 0) : instanceFactory(31, 11);

      case M:
        return isStartOf ? instanceFactory(1, $M) : instanceFactory(0, $M + 1);

      case W:
        {
          var weekStart = this.$locale().weekStart || 0;
          var gap = ($W < weekStart ? $W + 7 : $W) - weekStart;
          return instanceFactory(isStartOf ? $D - gap : $D + (6 - gap), $M);
        }

      case D:
      case DATE:
        return instanceFactorySet(utcPad + "Hours", 0);

      case H:
        return instanceFactorySet(utcPad + "Minutes", 1);

      case MIN:
        return instanceFactorySet(utcPad + "Seconds", 2);

      case S:
        return instanceFactorySet(utcPad + "Milliseconds", 3);

      default:
        return this.clone();
    }
  };

  _proto.endOf = function endOf(arg) {
    return this.startOf(arg, false);
  };

  _proto.$set = function $set(units, _int) {
    var _C$D$C$DATE$C$M$C$Y$C;

    // private set
    var unit = Utils.p(units);
    var utcPad = "set" + (this.$u ? 'UTC' : '');
    var name = (_C$D$C$DATE$C$M$C$Y$C = {}, _C$D$C$DATE$C$M$C$Y$C[D] = utcPad + "Date", _C$D$C$DATE$C$M$C$Y$C[DATE] = utcPad + "Date", _C$D$C$DATE$C$M$C$Y$C[M] = utcPad + "Month", _C$D$C$DATE$C$M$C$Y$C[Y] = utcPad + "FullYear", _C$D$C$DATE$C$M$C$Y$C[H] = utcPad + "Hours", _C$D$C$DATE$C$M$C$Y$C[MIN] = utcPad + "Minutes", _C$D$C$DATE$C$M$C$Y$C[S] = utcPad + "Seconds", _C$D$C$DATE$C$M$C$Y$C[MS] = utcPad + "Milliseconds", _C$D$C$DATE$C$M$C$Y$C)[unit];
    var arg = unit === D ? this.$D + (_int - this.$W) : _int;

    if (unit === M || unit === Y) {
      // clone is for badMutable plugin
      var date = this.clone().set(DATE, 1);
      date.$d[name](arg);
      date.init();
      this.$d = date.set(DATE, Math.min(this.$D, date.daysInMonth())).$d;
    } else if (name) this.$d[name](arg);

    this.init();
    return this;
  };

  _proto.set = function set(string, _int2) {
    return this.clone().$set(string, _int2);
  };

  _proto.get = function get(unit) {
    return this[Utils.p(unit)]();
  };

  _proto.add = function add(number, units) {
    var _this2 = this,
        _C$MIN$C$H$C$S$unit;

    number = Number(number); // eslint-disable-line no-param-reassign

    var unit = Utils.p(units);

    var instanceFactorySet = function instanceFactorySet(n) {
      var d = dayjs(_this2);
      return Utils.w(d.date(d.date() + Math.round(n * number)), _this2);
    };

    if (unit === M) {
      return this.set(M, this.$M + number);
    }

    if (unit === Y) {
      return this.set(Y, this.$y + number);
    }

    if (unit === D) {
      return instanceFactorySet(1);
    }

    if (unit === W) {
      return instanceFactorySet(7);
    }

    var step = (_C$MIN$C$H$C$S$unit = {}, _C$MIN$C$H$C$S$unit[MIN] = MILLISECONDS_A_MINUTE, _C$MIN$C$H$C$S$unit[H] = MILLISECONDS_A_HOUR, _C$MIN$C$H$C$S$unit[S] = MILLISECONDS_A_SECOND, _C$MIN$C$H$C$S$unit)[unit] || 1; // ms

    var nextTimeStamp = this.$d.getTime() + number * step;
    return Utils.w(nextTimeStamp, this);
  };

  _proto.subtract = function subtract(number, string) {
    return this.add(number * -1, string);
  };

  _proto.format = function format(formatStr) {
    var _this3 = this;

    var locale = this.$locale();
    if (!this.isValid()) return locale.invalidDate || INVALID_DATE_STRING;
    var str = formatStr || FORMAT_DEFAULT;
    var zoneStr = Utils.z(this);
    var $H = this.$H,
        $m = this.$m,
        $M = this.$M;
    var weekdays = locale.weekdays,
        months = locale.months,
        meridiem = locale.meridiem;

    var getShort = function getShort(arr, index, full, length) {
      return arr && (arr[index] || arr(_this3, str)) || full[index].slice(0, length);
    };

    var get$H = function get$H(num) {
      return Utils.s($H % 12 || 12, num, '0');
    };

    var meridiemFunc = meridiem || function (hour, minute, isLowercase) {
      var m = hour < 12 ? 'AM' : 'PM';
      return isLowercase ? m.toLowerCase() : m;
    };

    var matches = function matches(match) {
      switch (match) {
        case 'YY':
          return String(_this3.$y).slice(-2);

        case 'YYYY':
          return Utils.s(_this3.$y, 4, '0');

        case 'M':
          return $M + 1;

        case 'MM':
          return Utils.s($M + 1, 2, '0');

        case 'MMM':
          return getShort(locale.monthsShort, $M, months, 3);

        case 'MMMM':
          return getShort(months, $M);

        case 'D':
          return _this3.$D;

        case 'DD':
          return Utils.s(_this3.$D, 2, '0');

        case 'd':
          return String(_this3.$W);

        case 'dd':
          return getShort(locale.weekdaysMin, _this3.$W, weekdays, 2);

        case 'ddd':
          return getShort(locale.weekdaysShort, _this3.$W, weekdays, 3);

        case 'dddd':
          return weekdays[_this3.$W];

        case 'H':
          return String($H);

        case 'HH':
          return Utils.s($H, 2, '0');

        case 'h':
          return get$H(1);

        case 'hh':
          return get$H(2);

        case 'a':
          return meridiemFunc($H, $m, true);

        case 'A':
          return meridiemFunc($H, $m, false);

        case 'm':
          return String($m);

        case 'mm':
          return Utils.s($m, 2, '0');

        case 's':
          return String(_this3.$s);

        case 'ss':
          return Utils.s(_this3.$s, 2, '0');

        case 'SSS':
          return Utils.s(_this3.$ms, 3, '0');

        case 'Z':
          return zoneStr;
      }

      return null;
    };

    return str.replace(REGEX_FORMAT, function (match, $1) {
      return $1 || matches(match) || zoneStr.replace(':', '');
    }); // 'ZZ'
  };

  _proto.utcOffset = function utcOffset() {
    // Because a bug at FF24, we're rounding the timezone offset around 15 minutes
    // https://github.com/moment/moment/pull/1871
    return -Math.round(this.$d.getTimezoneOffset() / 15) * 15;
  };

  _proto.diff = function diff(input, units, _float) {
    var _this4 = this;

    var unit = Utils.p(units);
    var that = dayjs(input);
    var zoneDelta = (that.utcOffset() - this.utcOffset()) * MILLISECONDS_A_MINUTE;
    var diff = this - that;

    var getMonth = function getMonth() {
      return Utils.m(_this4, that);
    };

    var result;

    switch (unit) {
      case Y:
        result = getMonth() / 12;
        break;

      case M:
        result = getMonth();
        break;

      case Q:
        result = getMonth() / 3;
        break;

      case W:
        result = (diff - zoneDelta) / MILLISECONDS_A_WEEK;
        break;

      case D:
        result = (diff - zoneDelta) / MILLISECONDS_A_DAY;
        break;

      case H:
        result = diff / MILLISECONDS_A_HOUR;
        break;

      case MIN:
        result = diff / MILLISECONDS_A_MINUTE;
        break;

      case S:
        result = diff / MILLISECONDS_A_SECOND;
        break;

      default:
        result = diff; // milliseconds

        break;
    }

    return _float ? result : Utils.a(result);
  };

  _proto.daysInMonth = function daysInMonth() {
    return this.endOf(M).$D;
  };

  _proto.$locale = function $locale() {
    // get locale object
    return Ls[this.$L];
  };

  _proto.locale = function locale(preset, object) {
    if (!preset) return this.$L;
    var that = this.clone();
    var nextLocaleName = parseLocale(preset, object, true);
    if (nextLocaleName) that.$L = nextLocaleName;
    return that;
  };

  _proto.clone = function clone() {
    return Utils.w(this.$d, this);
  };

  _proto.toDate = function toDate() {
    return new Date(this.valueOf());
  };

  _proto.toJSON = function toJSON() {
    return this.isValid() ? this.toISOString() : null;
  };

  _proto.toISOString = function toISOString() {
    // ie 8 return
    // new Dayjs(this.valueOf() + this.$d.getTimezoneOffset() * 60000)
    // .format('YYYY-MM-DDTHH:mm:ss.SSS[Z]')
    return this.$d.toISOString();
  };

  _proto.toString = function toString() {
    return this.$d.toUTCString();
  };

  return Dayjs;
}();

var proto = Dayjs.prototype;
dayjs.prototype = proto;
[['$ms', MS], ['$s', S], ['$m', MIN], ['$H', H], ['$W', D], ['$M', M], ['$y', Y], ['$D', DATE]].forEach(function (g) {
  proto[g[1]] = function (input) {
    return this.$g(input, g[0], g[1]);
  };
});

dayjs.extend = function (plugin, option) {
  if (!plugin.$i) {
    // install plugin only once
    plugin(option, Dayjs, dayjs);
    plugin.$i = true;
  }

  return dayjs;
};

dayjs.locale = parseLocale;
dayjs.isDayjs = isDayjs;

dayjs.unix = function (timestamp) {
  return dayjs(timestamp * 1e3);
};

dayjs.en = Ls[L];
dayjs.Ls = Ls;
dayjs.p = {};

// eslint-disable-next-line import/prefer-default-export
var t = function t(format) {
  return format.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function (_, a, b) {
    return a || b.slice(1);
  });
};
var englishFormats = {
  LTS: 'h:mm:ss A',
  LT: 'h:mm A',
  L: 'MM/DD/YYYY',
  LL: 'MMMM D, YYYY',
  LLL: 'MMMM D, YYYY h:mm A',
  LLLL: 'dddd, MMMM D, YYYY h:mm A'
};
var u = function u(formatStr, formats) {
  return formatStr.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (_, a, b) {
    var B = b && b.toUpperCase();
    return a || formats[b] || englishFormats[b] || t(formats[B]);
  });
};

var formattingTokens = /(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g;
var match1 = /\d/; // 0 - 9

var match2 = /\d\d/; // 00 - 99

var match3 = /\d{3}/; // 000 - 999

var match4 = /\d{4}/; // 0000 - 9999

var match1to2 = /\d\d?/; // 0 - 99

var matchSigned = /[+-]?\d+/; // -inf - inf

var matchOffset = /[+-]\d\d:?(\d\d)?|Z/; // +00:00 -00:00 +0000 or -0000 +00 or Z

var matchWord = /\d*[^-_:/,()\s\d]+/; // Word

var locale = {};

var parseTwoDigitYear = function parseTwoDigitYear(input) {
  input = +input;
  return input + (input > 68 ? 1900 : 2000);
};

function offsetFromString(string) {
  if (!string) return 0;
  if (string === 'Z') return 0;
  var parts = string.match(/([+-]|\d\d)/g);
  var minutes = +(parts[1] * 60) + (+parts[2] || 0);
  return minutes === 0 ? 0 : parts[0] === '+' ? -minutes : minutes; // eslint-disable-line no-nested-ternary
}

var addInput = function addInput(property) {
  return function (input) {
    this[property] = +input;
  };
};

var zoneExpressions = [matchOffset, function (input) {
  var zone = this.zone || (this.zone = {});
  zone.offset = offsetFromString(input);
}];

var getLocalePart = function getLocalePart(name) {
  var part = locale[name];
  return part && (part.indexOf ? part : part.s.concat(part.f));
};

var meridiemMatch = function meridiemMatch(input, isLowerCase) {
  var isAfternoon;
  var _locale = locale,
      meridiem = _locale.meridiem;

  if (!meridiem) {
    isAfternoon = input === (isLowerCase ? 'pm' : 'PM');
  } else {
    for (var i = 1; i <= 24; i += 1) {
      // todo: fix input === meridiem(i, 0, isLowerCase)
      if (input.indexOf(meridiem(i, 0, isLowerCase)) > -1) {
        isAfternoon = i > 12;
        break;
      }
    }
  }

  return isAfternoon;
};

var expressions = {
  A: [matchWord, function (input) {
    this.afternoon = meridiemMatch(input, false);
  }],
  a: [matchWord, function (input) {
    this.afternoon = meridiemMatch(input, true);
  }],
  S: [match1, function (input) {
    this.milliseconds = +input * 100;
  }],
  SS: [match2, function (input) {
    this.milliseconds = +input * 10;
  }],
  SSS: [match3, function (input) {
    this.milliseconds = +input;
  }],
  s: [match1to2, addInput('seconds')],
  ss: [match1to2, addInput('seconds')],
  m: [match1to2, addInput('minutes')],
  mm: [match1to2, addInput('minutes')],
  H: [match1to2, addInput('hours')],
  h: [match1to2, addInput('hours')],
  HH: [match1to2, addInput('hours')],
  hh: [match1to2, addInput('hours')],
  D: [match1to2, addInput('day')],
  DD: [match2, addInput('day')],
  Do: [matchWord, function (input) {
    var _locale2 = locale,
        ordinal = _locale2.ordinal;

    var _input$match = input.match(/\d+/);

    this.day = _input$match[0];
    if (!ordinal) return;

    for (var i = 1; i <= 31; i += 1) {
      if (ordinal(i).replace(/\[|\]/g, '') === input) {
        this.day = i;
      }
    }
  }],
  M: [match1to2, addInput('month')],
  MM: [match2, addInput('month')],
  MMM: [matchWord, function (input) {
    var months = getLocalePart('months');
    var monthsShort = getLocalePart('monthsShort');
    var matchIndex = (monthsShort || months.map(function (_) {
      return _.slice(0, 3);
    })).indexOf(input) + 1;

    if (matchIndex < 1) {
      throw new Error();
    }

    this.month = matchIndex % 12 || matchIndex;
  }],
  MMMM: [matchWord, function (input) {
    var months = getLocalePart('months');
    var matchIndex = months.indexOf(input) + 1;

    if (matchIndex < 1) {
      throw new Error();
    }

    this.month = matchIndex % 12 || matchIndex;
  }],
  Y: [matchSigned, addInput('year')],
  YY: [match2, function (input) {
    this.year = parseTwoDigitYear(input);
  }],
  YYYY: [match4, addInput('year')],
  Z: zoneExpressions,
  ZZ: zoneExpressions
};

function correctHours(time) {
  var afternoon = time.afternoon;

  if (afternoon !== undefined) {
    var hours = time.hours;

    if (afternoon) {
      if (hours < 12) {
        time.hours += 12;
      }
    } else if (hours === 12) {
      time.hours = 0;
    }

    delete time.afternoon;
  }
}

function makeParser(format) {
  format = u(format, locale && locale.formats);
  var array = format.match(formattingTokens);
  var length = array.length;

  for (var i = 0; i < length; i += 1) {
    var token = array[i];
    var parseTo = expressions[token];
    var regex = parseTo && parseTo[0];
    var parser = parseTo && parseTo[1];

    if (parser) {
      array[i] = {
        regex: regex,
        parser: parser
      };
    } else {
      array[i] = token.replace(/^\[|\]$/g, '');
    }
  }

  return function (input) {
    var time = {};

    for (var _i = 0, start = 0; _i < length; _i += 1) {
      var _token = array[_i];

      if (typeof _token === 'string') {
        start += _token.length;
      } else {
        var _regex = _token.regex,
            _parser = _token.parser;
        var part = input.slice(start);

        var match = _regex.exec(part);

        var value = match[0];

        _parser.call(time, value);

        input = input.replace(value, '');
      }
    }

    correctHours(time);
    return time;
  };
}

var parseFormattedInput = function parseFormattedInput(input, format, utc) {
  try {
    if (['x', 'X'].indexOf(format) > -1) return new Date((format === 'X' ? 1000 : 1) * input);
    var parser = makeParser(format);

    var _parser2 = parser(input),
        year = _parser2.year,
        month = _parser2.month,
        day = _parser2.day,
        hours = _parser2.hours,
        minutes = _parser2.minutes,
        seconds = _parser2.seconds,
        milliseconds = _parser2.milliseconds,
        zone = _parser2.zone;

    var now = new Date();
    var d = day || (!year && !month ? now.getDate() : 1);
    var y = year || now.getFullYear();
    var M = 0;

    if (!(year && !month)) {
      M = month > 0 ? month - 1 : now.getMonth();
    }

    var h = hours || 0;
    var m = minutes || 0;
    var s = seconds || 0;
    var ms = milliseconds || 0;

    if (zone) {
      return new Date(Date.UTC(y, M, d, h, m, s, ms + zone.offset * 60 * 1000));
    }

    if (utc) {
      return new Date(Date.UTC(y, M, d, h, m, s, ms));
    }

    return new Date(y, M, d, h, m, s, ms);
  } catch (e) {
    return new Date(''); // Invalid Date
  }
};

const customParseFormat = (function (o, C, d) {
  d.p.customParseFormat = true;

  if (o && o.parseTwoDigitYear) {
    parseTwoDigitYear = o.parseTwoDigitYear;
  }

  var proto = C.prototype;
  var oldParse = proto.parse;

  proto.parse = function (cfg) {
    var date = cfg.date,
        utc = cfg.utc,
        args = cfg.args;
    this.$u = utc;
    var format = args[1];

    if (typeof format === 'string') {
      var isStrictWithoutLocale = args[2] === true;
      var isStrictWithLocale = args[3] === true;
      var isStrict = isStrictWithoutLocale || isStrictWithLocale;
      var pl = args[2];

      if (isStrictWithLocale) {
        pl = args[2];
      }

      locale = this.$locale();

      if (!isStrictWithoutLocale && pl) {
        locale = d.Ls[pl];
      }

      this.$d = parseFormattedInput(date, format, utc);
      this.init();
      if (pl && pl !== true) this.$L = this.locale(pl).$L; // use != to treat
      // input number 1410715640579 and format string '1410715640579' equal
      // eslint-disable-next-line eqeqeq

      if (isStrict && date != this.format(format)) {
        this.$d = new Date('');
      } // reset global locale to make parallel unit test


      locale = {};
    } else if (format instanceof Array) {
      var len = format.length;

      for (var i = 1; i <= len; i += 1) {
        args[1] = format[i - 1];
        var result = d.apply(this, args);

        if (result.isValid()) {
          this.$d = result.$d;
          this.$L = result.$L;
          this.init();
          break;
        }

        if (i === len) this.$d = new Date('');
      }
    } else {
      oldParse.call(this, cfg);
    }
  };
});

const localeData = (function (o, c, dayjs) {
  // locale needed later
  var proto = c.prototype;

  var getLocalePart = function getLocalePart(part) {
    return part && (part.indexOf ? part : part.s);
  };

  var getShort = function getShort(ins, target, full, num, localeOrder) {
    var locale = ins.name ? ins : ins.$locale();
    var targetLocale = getLocalePart(locale[target]);
    var fullLocale = getLocalePart(locale[full]);
    var result = targetLocale || fullLocale.map(function (f) {
      return f.slice(0, num);
    });
    if (!localeOrder) return result;
    var weekStart = locale.weekStart;
    return result.map(function (_, index) {
      return result[(index + (weekStart || 0)) % 7];
    });
  };

  var getDayjsLocaleObject = function getDayjsLocaleObject() {
    return dayjs.Ls[dayjs.locale()];
  };

  var getLongDateFormat = function getLongDateFormat(l, format) {
    return l.formats[format] || t(l.formats[format.toUpperCase()]);
  };

  var localeData = function localeData() {
    var _this = this;

    return {
      months: function months(instance) {
        return instance ? instance.format('MMMM') : getShort(_this, 'months');
      },
      monthsShort: function monthsShort(instance) {
        return instance ? instance.format('MMM') : getShort(_this, 'monthsShort', 'months', 3);
      },
      firstDayOfWeek: function firstDayOfWeek() {
        return _this.$locale().weekStart || 0;
      },
      weekdays: function weekdays(instance) {
        return instance ? instance.format('dddd') : getShort(_this, 'weekdays');
      },
      weekdaysMin: function weekdaysMin(instance) {
        return instance ? instance.format('dd') : getShort(_this, 'weekdaysMin', 'weekdays', 2);
      },
      weekdaysShort: function weekdaysShort(instance) {
        return instance ? instance.format('ddd') : getShort(_this, 'weekdaysShort', 'weekdays', 3);
      },
      longDateFormat: function longDateFormat(format) {
        return getLongDateFormat(_this.$locale(), format);
      },
      meridiem: this.$locale().meridiem,
      ordinal: this.$locale().ordinal
    };
  };

  proto.localeData = function () {
    return localeData.bind(this)();
  };

  dayjs.localeData = function () {
    var localeObject = getDayjsLocaleObject();
    return {
      firstDayOfWeek: function firstDayOfWeek() {
        return localeObject.weekStart || 0;
      },
      weekdays: function weekdays() {
        return dayjs.weekdays();
      },
      weekdaysShort: function weekdaysShort() {
        return dayjs.weekdaysShort();
      },
      weekdaysMin: function weekdaysMin() {
        return dayjs.weekdaysMin();
      },
      months: function months() {
        return dayjs.months();
      },
      monthsShort: function monthsShort() {
        return dayjs.monthsShort();
      },
      longDateFormat: function longDateFormat(format) {
        return getLongDateFormat(localeObject, format);
      },
      meridiem: localeObject.meridiem,
      ordinal: localeObject.ordinal
    };
  };

  dayjs.months = function () {
    return getShort(getDayjsLocaleObject(), 'months');
  };

  dayjs.monthsShort = function () {
    return getShort(getDayjsLocaleObject(), 'monthsShort', 'months', 3);
  };

  dayjs.weekdays = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdays', null, null, localeOrder);
  };

  dayjs.weekdaysShort = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdaysShort', 'weekdays', 3, localeOrder);
  };

  dayjs.weekdaysMin = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdaysMin', 'weekdays', 2, localeOrder);
  };
});

const localizedFormat = (function (o, c, d) {
  var proto = c.prototype;
  var oldFormat = proto.format;
  d.en.formats = englishFormats;

  proto.format = function (formatStr) {
    if (formatStr === void 0) {
      formatStr = FORMAT_DEFAULT;
    }

    var _this$$locale = this.$locale(),
        _this$$locale$formats = _this$$locale.formats,
        formats = _this$$locale$formats === void 0 ? {} : _this$$locale$formats;

    var result = u(formatStr, formats);
    return oldFormat.call(this, result);
  };
});

// Plugin template from https://day.js.org/docs/en/plugin/plugin
const preParsePostFormat = (function (option, dayjsClass) {
  var oldParse = dayjsClass.prototype.parse;

  dayjsClass.prototype.parse = function (cfg) {
    if (typeof cfg.date === 'string') {
      var locale = this.$locale();
      cfg.date = locale && locale.preparse ? locale.preparse(cfg.date) : cfg.date;
    } // original parse result


    return oldParse.bind(this)(cfg);
  }; // // overriding existing API
  // // e.g. extend dayjs().format()


  var oldFormat = dayjsClass.prototype.format;

  dayjsClass.prototype.format = function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    // original format result
    var result = oldFormat.call.apply(oldFormat, [this].concat(args)); // return modified result

    var locale = this.$locale();
    return locale && locale.postformat ? locale.postformat(result) : result;
  };

  var oldFromTo = dayjsClass.prototype.fromToBase;

  if (oldFromTo) {
    dayjsClass.prototype.fromToBase = function (input, withoutSuffix, instance, isFrom) {
      var locale = this.$locale() || instance.$locale(); // original format result

      return oldFromTo.call(this, input, withoutSuffix, instance, isFrom, locale && locale.postformat);
    };
  }
});

const updateLocale = (function (option, Dayjs, dayjs) {
  dayjs.updateLocale = function (locale, customConfig) {
    var localeList = dayjs.Ls;
    var localeConfig = localeList[locale];
    if (!localeConfig) return;
    var customConfigKeys = customConfig ? Object.keys(customConfig) : [];
    customConfigKeys.forEach(function (c) {
      localeConfig[c] = customConfig[c];
    });
    return localeConfig; // eslint-disable-line consistent-return
  };
});

const inputTimePickerCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;-webkit-user-select:none;user-select:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([scale=s]){--calcite-toggle-spacing:0.5rem;--calcite-internal-input-text-input-padding-inline-end:calc(var(--calcite-toggle-spacing) + 1rem)}:host([scale=m]){--calcite-toggle-spacing:0.75rem;--calcite-internal-input-text-input-padding-inline-end:calc(var(--calcite-toggle-spacing) + 1.5rem)}:host([scale=l]){--calcite-toggle-spacing:1rem;--calcite-internal-input-text-input-padding-inline-end:calc(var(--calcite-toggle-spacing) + 2rem)}.input-wrapper{position:relative}.toggle-icon{position:absolute;display:flex;cursor:pointer;align-items:center;inset-inline-end:0;inset-block:0;padding-inline:var(--calcite-toggle-spacing)}:host([hidden]){display:none}[hidden]{display:none}";

// some bundlers (e.g., Webpack) need dynamic import paths to be static
const supportedDayjsLocaleToLocaleConfigImport = new Map([
  ["ar", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ar-0933fbcd_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ar-0933fbcd.js */ "./node_modules/@esri/calcite-components/dist/esm/ar-0933fbcd.js"))],
  ["bg", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_bg-506dda52_js").then(__webpack_require__.bind(__webpack_require__, /*! ./bg-506dda52.js */ "./node_modules/@esri/calcite-components/dist/esm/bg-506dda52.js"))],
  ["bs", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_bs-b364e98a_js").then(__webpack_require__.bind(__webpack_require__, /*! ./bs-b364e98a.js */ "./node_modules/@esri/calcite-components/dist/esm/bs-b364e98a.js"))],
  ["ca", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ca-ade604d0_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ca-ade604d0.js */ "./node_modules/@esri/calcite-components/dist/esm/ca-ade604d0.js"))],
  ["cs", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_cs-28365e45_js").then(__webpack_require__.bind(__webpack_require__, /*! ./cs-28365e45.js */ "./node_modules/@esri/calcite-components/dist/esm/cs-28365e45.js"))],
  ["da", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_da-bfe920ce_js").then(__webpack_require__.bind(__webpack_require__, /*! ./da-bfe920ce.js */ "./node_modules/@esri/calcite-components/dist/esm/da-bfe920ce.js"))],
  ["de", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_de-209b7cd2_js").then(__webpack_require__.bind(__webpack_require__, /*! ./de-209b7cd2.js */ "./node_modules/@esri/calcite-components/dist/esm/de-209b7cd2.js"))],
  ["de-at", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_de-at-bdbfb1ae_js").then(__webpack_require__.bind(__webpack_require__, /*! ./de-at-bdbfb1ae.js */ "./node_modules/@esri/calcite-components/dist/esm/de-at-bdbfb1ae.js"))],
  ["de-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_de-ch-9e0e17c1_js").then(__webpack_require__.bind(__webpack_require__, /*! ./de-ch-9e0e17c1.js */ "./node_modules/@esri/calcite-components/dist/esm/de-ch-9e0e17c1.js"))],
  ["el", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_el-de52cae1_js").then(__webpack_require__.bind(__webpack_require__, /*! ./el-de52cae1.js */ "./node_modules/@esri/calcite-components/dist/esm/el-de52cae1.js"))],
  ["en", () => Promise.resolve().then(function () { return en$1; })],
  ["en-au", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_en-au-f00cf97a_js").then(__webpack_require__.bind(__webpack_require__, /*! ./en-au-f00cf97a.js */ "./node_modules/@esri/calcite-components/dist/esm/en-au-f00cf97a.js"))],
  ["en-ca", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_en-ca-dc107b7c_js").then(__webpack_require__.bind(__webpack_require__, /*! ./en-ca-dc107b7c.js */ "./node_modules/@esri/calcite-components/dist/esm/en-ca-dc107b7c.js"))],
  ["en-gb", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_en-gb-cbf16fc2_js").then(__webpack_require__.bind(__webpack_require__, /*! ./en-gb-cbf16fc2.js */ "./node_modules/@esri/calcite-components/dist/esm/en-gb-cbf16fc2.js"))],
  ["es", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_es-ba0c9a76_js").then(__webpack_require__.bind(__webpack_require__, /*! ./es-ba0c9a76.js */ "./node_modules/@esri/calcite-components/dist/esm/es-ba0c9a76.js"))],
  ["es-mx", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_es-mx-9f5145d7_js").then(__webpack_require__.bind(__webpack_require__, /*! ./es-mx-9f5145d7.js */ "./node_modules/@esri/calcite-components/dist/esm/es-mx-9f5145d7.js"))],
  ["et", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_et-82197590_js").then(__webpack_require__.bind(__webpack_require__, /*! ./et-82197590.js */ "./node_modules/@esri/calcite-components/dist/esm/et-82197590.js"))],
  ["fi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_fi-faee5796_js").then(__webpack_require__.bind(__webpack_require__, /*! ./fi-faee5796.js */ "./node_modules/@esri/calcite-components/dist/esm/fi-faee5796.js"))],
  ["fr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_fr-984bae66_js").then(__webpack_require__.bind(__webpack_require__, /*! ./fr-984bae66.js */ "./node_modules/@esri/calcite-components/dist/esm/fr-984bae66.js"))],
  ["fr-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_fr-ch-dddb212d_js").then(__webpack_require__.bind(__webpack_require__, /*! ./fr-ch-dddb212d.js */ "./node_modules/@esri/calcite-components/dist/esm/fr-ch-dddb212d.js"))],
  ["he", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_he-d75fe0a2_js").then(__webpack_require__.bind(__webpack_require__, /*! ./he-d75fe0a2.js */ "./node_modules/@esri/calcite-components/dist/esm/he-d75fe0a2.js"))],
  ["hi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_hi-c4657c30_js").then(__webpack_require__.bind(__webpack_require__, /*! ./hi-c4657c30.js */ "./node_modules/@esri/calcite-components/dist/esm/hi-c4657c30.js"))],
  ["hr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_hr-5bc8b78d_js").then(__webpack_require__.bind(__webpack_require__, /*! ./hr-5bc8b78d.js */ "./node_modules/@esri/calcite-components/dist/esm/hr-5bc8b78d.js"))],
  ["hu", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_hu-52a6736f_js").then(__webpack_require__.bind(__webpack_require__, /*! ./hu-52a6736f.js */ "./node_modules/@esri/calcite-components/dist/esm/hu-52a6736f.js"))],
  ["id", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_id-9c89e0ef_js").then(__webpack_require__.bind(__webpack_require__, /*! ./id-9c89e0ef.js */ "./node_modules/@esri/calcite-components/dist/esm/id-9c89e0ef.js"))],
  ["it", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_it-11ab3554_js").then(__webpack_require__.bind(__webpack_require__, /*! ./it-11ab3554.js */ "./node_modules/@esri/calcite-components/dist/esm/it-11ab3554.js"))],
  ["it-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_it-ch-8773c2b5_js").then(__webpack_require__.bind(__webpack_require__, /*! ./it-ch-8773c2b5.js */ "./node_modules/@esri/calcite-components/dist/esm/it-ch-8773c2b5.js"))],
  ["ja", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ja-5ff359d0_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ja-5ff359d0.js */ "./node_modules/@esri/calcite-components/dist/esm/ja-5ff359d0.js"))],
  ["ko", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ko-175bf0e3_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ko-175bf0e3.js */ "./node_modules/@esri/calcite-components/dist/esm/ko-175bf0e3.js"))],
  ["lt", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_lt-d61956ec_js").then(__webpack_require__.bind(__webpack_require__, /*! ./lt-d61956ec.js */ "./node_modules/@esri/calcite-components/dist/esm/lt-d61956ec.js"))],
  ["lv", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_lv-bad06235_js").then(__webpack_require__.bind(__webpack_require__, /*! ./lv-bad06235.js */ "./node_modules/@esri/calcite-components/dist/esm/lv-bad06235.js"))],
  ["mk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_mk-2ddf8dc6_js").then(__webpack_require__.bind(__webpack_require__, /*! ./mk-2ddf8dc6.js */ "./node_modules/@esri/calcite-components/dist/esm/mk-2ddf8dc6.js"))],
  ["nl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_nl-7320e219_js").then(__webpack_require__.bind(__webpack_require__, /*! ./nl-7320e219.js */ "./node_modules/@esri/calcite-components/dist/esm/nl-7320e219.js"))],
  ["nb", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_nb-c6da7ac6_js").then(__webpack_require__.bind(__webpack_require__, /*! ./nb-c6da7ac6.js */ "./node_modules/@esri/calcite-components/dist/esm/nb-c6da7ac6.js"))],
  ["pl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_pl-4cb07b37_js").then(__webpack_require__.bind(__webpack_require__, /*! ./pl-4cb07b37.js */ "./node_modules/@esri/calcite-components/dist/esm/pl-4cb07b37.js"))],
  ["pt", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_pt-35105248_js").then(__webpack_require__.bind(__webpack_require__, /*! ./pt-35105248.js */ "./node_modules/@esri/calcite-components/dist/esm/pt-35105248.js"))],
  ["pt-br", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_pt-br-9f717e0f_js").then(__webpack_require__.bind(__webpack_require__, /*! ./pt-br-9f717e0f.js */ "./node_modules/@esri/calcite-components/dist/esm/pt-br-9f717e0f.js"))],
  ["ro", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ro-fbb77dcf_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ro-fbb77dcf.js */ "./node_modules/@esri/calcite-components/dist/esm/ro-fbb77dcf.js"))],
  ["ru", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_ru-84826ccf_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ru-84826ccf.js */ "./node_modules/@esri/calcite-components/dist/esm/ru-84826ccf.js"))],
  ["sk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_sk-ceb01214_js").then(__webpack_require__.bind(__webpack_require__, /*! ./sk-ceb01214.js */ "./node_modules/@esri/calcite-components/dist/esm/sk-ceb01214.js"))],
  ["sl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_sl-71137caa_js").then(__webpack_require__.bind(__webpack_require__, /*! ./sl-71137caa.js */ "./node_modules/@esri/calcite-components/dist/esm/sl-71137caa.js"))],
  ["sr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_sr-964c4b63_js").then(__webpack_require__.bind(__webpack_require__, /*! ./sr-964c4b63.js */ "./node_modules/@esri/calcite-components/dist/esm/sr-964c4b63.js"))],
  ["sv", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_sv-12f54750_js").then(__webpack_require__.bind(__webpack_require__, /*! ./sv-12f54750.js */ "./node_modules/@esri/calcite-components/dist/esm/sv-12f54750.js"))],
  ["th", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_th-f5f95240_js").then(__webpack_require__.bind(__webpack_require__, /*! ./th-f5f95240.js */ "./node_modules/@esri/calcite-components/dist/esm/th-f5f95240.js"))],
  ["tr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_tr-91851dc5_js").then(__webpack_require__.bind(__webpack_require__, /*! ./tr-91851dc5.js */ "./node_modules/@esri/calcite-components/dist/esm/tr-91851dc5.js"))],
  ["uk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_uk-25078b62_js").then(__webpack_require__.bind(__webpack_require__, /*! ./uk-25078b62.js */ "./node_modules/@esri/calcite-components/dist/esm/uk-25078b62.js"))],
  ["vi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_vi-f557d159_js").then(__webpack_require__.bind(__webpack_require__, /*! ./vi-f557d159.js */ "./node_modules/@esri/calcite-components/dist/esm/vi-f557d159.js"))],
  ["zh-cn", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_zh-cn-47fcc562_js").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-cn-47fcc562.js */ "./node_modules/@esri/calcite-components/dist/esm/zh-cn-47fcc562.js"))],
  ["zh-hk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_zh-hk-2272eff1_js").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-hk-2272eff1.js */ "./node_modules/@esri/calcite-components/dist/esm/zh-hk-2272eff1.js"))],
  ["zh-tw", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_esm_zh-tw-b11968ce_js").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-tw-b11968ce.js */ "./node_modules/@esri/calcite-components/dist/esm/zh-tw-b11968ce.js"))],
]);
dayjs.extend(customParseFormat);
dayjs.extend(localeData);
dayjs.extend(localizedFormat);
dayjs.extend(preParsePostFormat);
dayjs.extend(updateLocale);
const InputTimePicker = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInputTimePickerBeforeClose = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerBeforeClose", 6);
    this.calciteInputTimePickerBeforeOpen = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerBeforeOpen", 6);
    this.calciteInputTimePickerChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerChange", 7);
    this.calciteInputTimePickerClose = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerClose", 6);
    this.calciteInputTimePickerOpen = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInputTimePickerOpen", 6);
    this.focusOnOpen = false;
    this.dialogId = `time-picker-dialog--${(0,_guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_2__.g)()}`;
    /** whether the value of the input was changed as a result of user typing or not */
    this.userChangedValue = false;
    this.referenceElementId = `input-time-picker-${(0,_guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_2__.g)()}`;
    this.openTransitionProp = "opacity";
    //--------------------------------------------------------------------------
    //
    //  Event Listeners
    //
    //--------------------------------------------------------------------------
    this.hostBlurHandler = () => {
      const inputValue = this.calciteInputEl.value;
      const delocalizedInputValue = this.delocalizeTimeString(inputValue);
      if (!delocalizedInputValue) {
        this.setValue("");
        return;
      }
      if (delocalizedInputValue !== this.value) {
        this.setValue(delocalizedInputValue);
      }
      const localizedTimeString = localizeTimeString({
        value: this.value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds: this.shouldIncludeSeconds(),
        fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
      });
      if (localizedTimeString !== inputValue) {
        this.setInputValue(localizedTimeString);
      }
      this.deactivate();
    };
    this.calciteInternalInputFocusHandler = (event) => {
      if (!this.readOnly) {
        event.stopPropagation();
      }
    };
    this.calciteInternalInputInputHandler = (event) => {
      const { effectiveLocale: locale, numberingSystem } = this;
      if (numberingSystem && numberingSystem !== "latn") {
        const target = event.target;
        _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.numberFormatOptions = {
          locale,
          numberingSystem,
          useGrouping: false,
        };
        const valueInNumberingSystem = _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n
          .delocalize(target.value)
          .split("")
          .map((char) => _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(char)
          ? _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.n.numberFormatter.format(Number(char))
          : char)
          .join("");
        this.setInputValue(valueInNumberingSystem);
      }
    };
    this.timePickerChangeHandler = (event) => {
      event.stopPropagation();
      const target = event.target;
      const value = target.value;
      const includeSeconds = this.shouldIncludeSeconds();
      this.setValue(toISOTimeString(value, includeSeconds));
      this.setInputValue(localizeTimeString({
        value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds,
        fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
      }));
    };
    this.popoverCloseHandler = () => {
      (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.d)(this, {
        onDeactivate: () => {
          this.calciteInputEl.setFocus();
          this.focusOnOpen = false;
        },
      });
      this.open = false;
    };
    this.popoverOpenHandler = () => {
      (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.a)(this, {
        onActivate: () => {
          if (this.focusOnOpen) {
            this.calciteTimePickerEl.setFocus();
            this.focusOnOpen = false;
          }
        },
      });
    };
    this.keyDownHandler = (event) => {
      const { defaultPrevented, key } = event;
      if (defaultPrevented) {
        return;
      }
      if (key === "Enter") {
        if ((0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_1__.s)(this)) {
          event.preventDefault();
          this.calciteInputEl.setFocus();
        }
        if (event.composedPath().includes(this.calciteTimePickerEl)) {
          return;
        }
        const newValue = this.delocalizeTimeString(this.calciteInputEl.value);
        if (isValidTime(newValue)) {
          this.setValue(newValue);
          const localizedTimeString = localizeTimeString({
            value: this.value,
            locale: this.effectiveLocale,
            numberingSystem: this.numberingSystem,
            includeSeconds: this.shouldIncludeSeconds(),
            fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
          });
          if (newValue && this.calciteInputEl.value !== localizedTimeString) {
            this.setInputValue(localizedTimeString);
          }
        }
      }
      else if (key === "ArrowDown") {
        this.open = true;
        this.focusOnOpen = true;
        event.preventDefault();
      }
      else if (key === "Escape" && this.open) {
        this.open = false;
        event.preventDefault();
        this.calciteInputEl.setFocus();
      }
    };
    this.setCalcitePopoverEl = (el) => {
      this.popoverEl = el;
    };
    this.setInputAndTransitionEl = (el) => {
      this.calciteInputEl = el;
      this.transitionEl = el;
    };
    this.setCalciteTimePickerEl = (el) => {
      this.calciteTimePickerEl = el;
      (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.c)(this, {
        focusTrapEl: el,
        focusTrapOptions: {
          initialFocus: false,
          setReturnFocus: false,
        },
      });
    };
    this.setInputValue = (newInputValue) => {
      if (!this.calciteInputEl) {
        return;
      }
      this.calciteInputEl.value = newInputValue;
    };
    /**
     * Sets the value and emits a change event.
     * This is used to update the value as a result of user interaction.
     *
     * @param value
     */
    this.setValue = (value) => {
      const oldValue = this.value;
      const newValue = formatTimeString(value) || "";
      if (newValue === oldValue) {
        return;
      }
      this.userChangedValue = true;
      this.value = newValue || "";
      const changeEvent = this.calciteInputTimePickerChange.emit();
      if (changeEvent.defaultPrevented) {
        this.userChangedValue = false;
        this.value = oldValue;
        this.setInputValue(localizeTimeString({
          value: oldValue,
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          includeSeconds: this.shouldIncludeSeconds(),
          fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
        }));
      }
    };
    /**
     * Sets the value directly without emitting a change event.
     * This is used to update the value on initial load and when props change that are not the result of user interaction.
     *
     * @param value
     */
    this.setValueDirectly = (value) => {
      const includeSeconds = this.shouldIncludeSeconds();
      this.value = toISOTimeString(value, includeSeconds);
      this.setInputValue(this.value
        ? localizeTimeString({
          value: this.value,
          includeSeconds,
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
        })
        : "");
    };
    this.onInputWrapperClick = () => {
      this.open = !this.open;
    };
    this.deactivate = () => {
      this.open = false;
    };
    this.open = false;
    this.disabled = false;
    this.focusTrapDisabled = false;
    this.form = undefined;
    this.readOnly = false;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.required = false;
    this.scale = "m";
    this.status = "idle";
    this.overlayPositioning = "absolute";
    this.placement = "auto";
    this.step = 60;
    this.value = null;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
  }
  openHandler(open) {
    (0,_openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_11__.o)(this);
    if (this.disabled || this.readOnly) {
      this.open = false;
      return;
    }
    if (open) {
      this.reposition(true);
    }
  }
  handleFocusTrapDisabled(focusTrapDisabled) {
    if (!this.open) {
      return;
    }
    focusTrapDisabled ? (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.d)(this) : (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.a)(this);
  }
  handleDisabledAndReadOnlyChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  numberingSystemWatcher(numberingSystem) {
    this.setInputValue(localizeTimeString({
      value: this.value,
      locale: this.effectiveLocale,
      numberingSystem,
      includeSeconds: this.shouldIncludeSeconds(),
      fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
    }));
  }
  stepWatcher(newStep, oldStep) {
    if ((oldStep >= 60 && newStep > 0 && newStep < 60) ||
      (newStep >= 60 && oldStep > 0 && oldStep < 60)) {
      this.setValueDirectly(this.value);
    }
  }
  valueWatcher(newValue) {
    if (!this.userChangedValue) {
      this.setValueDirectly(newValue);
    }
    this.userChangedValue = false;
  }
  async effectiveLocaleWatcher(locale) {
    await this.loadDateTimeLocaleData();
    this.setInputValue(localizeTimeString({
      value: this.value,
      locale,
      numberingSystem: this.numberingSystem,
      includeSeconds: this.shouldIncludeSeconds(),
      fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
    }));
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    this.el.focus();
  }
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    this.popoverEl?.reposition(delayed);
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  onBeforeOpen() {
    this.calciteInputTimePickerBeforeOpen.emit();
  }
  onOpen() {
    this.calciteInputTimePickerOpen.emit();
  }
  onBeforeClose() {
    this.calciteInputTimePickerBeforeClose.emit();
  }
  onClose() {
    this.calciteInputTimePickerClose.emit();
  }
  delocalizeTimeString(value) {
    // we need to set the corresponding locale before parsing, otherwise it defaults to English (possible dayjs bug)
    dayjs.locale(this.effectiveLocale.toLowerCase());
    const nonFractionalSecondParts = this.delocalizeTimeStringToParts(value);
    let delocalizedTimeString;
    if (this.shouldIncludeFractionalSeconds()) {
      const stepPrecision = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step);
      const centisecondParts = this.delocalizeTimeStringToParts(value, "S");
      if (stepPrecision === 1) {
        delocalizedTimeString =
          centisecondParts.millisecond !== 0
            ? this.getTimeStringFromParts(centisecondParts)
            : this.getTimeStringFromParts(nonFractionalSecondParts);
      }
      else {
        const decisecondParts = this.delocalizeTimeStringToParts(value, "SS");
        if (stepPrecision === 2) {
          if (decisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(decisecondParts);
          }
          else if (centisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(centisecondParts);
          }
          else {
            delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
          }
        }
        else if (stepPrecision >= 3) {
          const millisecondParts = this.delocalizeTimeStringToParts(value, "SSS");
          if (millisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(millisecondParts);
          }
          else if (decisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(decisecondParts);
          }
          else if (centisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(centisecondParts);
          }
          else {
            delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
          }
        }
      }
    }
    else {
      delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
    }
    return delocalizedTimeString;
  }
  delocalizeTimeStringToParts(localizedTimeString, fractionalSecondFormatToken) {
    const ltsFormatString = this.localeConfig?.formats?.LTS;
    const fractionalSecondTokenMatch = ltsFormatString.match(/ss\.*(S+)/g);
    if (fractionalSecondFormatToken && this.shouldIncludeFractionalSeconds()) {
      const secondFormatToken = `ss.${fractionalSecondFormatToken}`;
      this.localeConfig.formats.LTS = fractionalSecondTokenMatch
        ? ltsFormatString.replace(fractionalSecondTokenMatch[0], secondFormatToken)
        : ltsFormatString.replace("ss", secondFormatToken);
    }
    else if (fractionalSecondTokenMatch) {
      this.localeConfig.formats.LTS = ltsFormatString.replace(fractionalSecondTokenMatch[0], "ss");
    }
    dayjs.updateLocale(this.getSupportedDayjsLocale((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.g)(this.effectiveLocale)), this.localeConfig);
    const dayjsParseResult = dayjs(localizedTimeString, ["LTS", "LT"]);
    if (dayjsParseResult.isValid()) {
      return {
        hour: dayjsParseResult.get("hour"),
        minute: dayjsParseResult.get("minute"),
        second: dayjsParseResult.get("second"),
        millisecond: dayjsParseResult.get("millisecond"),
      };
    }
    return {
      hour: null,
      minute: null,
      second: null,
      millisecond: null,
    };
  }
  getTimeStringFromParts(parts) {
    let timeString = "";
    if (!parts) {
      return timeString;
    }
    if (parts.hour !== null && parts.minute !== null) {
      timeString = `${formatTimePart(parts.hour)}:${formatTimePart(parts.minute)}`;
      if (this.shouldIncludeSeconds() && parts.second !== null) {
        timeString += `:${formatTimePart(parts.second)}`;
        if (this.shouldIncludeFractionalSeconds() && parts.millisecond !== null) {
          const second = (parts.millisecond * 0.001).toFixed((0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step));
          timeString += `.${second.toString().replace("0.", "")}`;
        }
      }
    }
    return timeString;
  }
  getSupportedDayjsLocale(locale) {
    const dayjsLocale = locale.toLowerCase();
    if (dayjsLocale === "no") {
      return "nb";
    }
    if (dayjsLocale === "pt-pt") {
      return "pt";
    }
    return dayjsLocale;
  }
  async loadDateTimeLocaleData() {
    let supportedLocale = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.g)(this.effectiveLocale).toLowerCase();
    supportedLocale = this.getSupportedDayjsLocale(supportedLocale);
    const { default: localeConfig } = await supportedDayjsLocaleToLocaleConfigImport.get(supportedLocale)();
    this.localeConfig = localeConfig;
    dayjs.locale(this.localeConfig, null, true);
    dayjs.updateLocale(supportedLocale, this.getExtendedLocaleConfig(supportedLocale));
  }
  getExtendedLocaleConfig(locale) {
    if (locale === "ar") {
      return {
        meridiem: (hour) => (hour > 12 ? "" : ""),
        formats: {
          LT: "HH:mm A",
          LTS: "HH:mm:ss A",
          L: "DD/MM/YYYY",
          LL: "D MMMM YYYY",
          LLL: "D MMMM YYYY HH:mm A",
          LLLL: "dddd D MMMM YYYY HH:mm A",
        },
      };
    }
    if (locale === "en-au") {
      return {
        meridiem: (hour) => (hour > 12 ? "pm" : "am"),
      };
    }
    if (locale === "en-ca") {
      return {
        meridiem: (hour) => (hour > 12 ? "p.m." : "a.m."),
      };
    }
    if (locale === "el") {
      return {
        meridiem: (hour) => (hour > 12 ? ".." : ".."),
      };
    }
    if (locale === "hi") {
      return {
        formats: {
          LT: "h:mm A",
          LTS: "h:mm:ss A",
          L: "DD/MM/YYYY",
          LL: "D MMMM YYYY",
          LLL: "D MMMM YYYY, h:mm A",
          LLLL: "dddd, D MMMM YYYY, h:mm A",
        },
        meridiem: (hour) => (hour > 12 ? "pm" : "am"),
      };
    }
    if (locale === "ko") {
      return {
        meridiem: (hour) => (hour > 12 ? "" : ""),
      };
    }
    if (locale === "zh-tw") {
      return {
        formats: {
          LT: "AHH:mm",
          LTS: "AHH:mm:ss",
        },
      };
    }
    if (locale === "zh-hk") {
      return {
        formats: {
          LT: "AHH:mm",
          LTS: "AHH:mm:ss",
        },
        meridiem: (hour) => (hour > 12 ? "" : ""),
      };
    }
  }
  onLabelClick() {
    this.setFocus();
  }
  shouldIncludeSeconds() {
    return this.step < 60;
  }
  shouldIncludeFractionalSeconds() {
    return (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step) > 0;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    if (isValidTime(this.value)) {
      this.setValueDirectly(this.value);
    }
    else {
      this.value = undefined;
    }
    (0,_label_1c285d41_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    (0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
    await Promise.all([(0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.s)(this), this.loadDateTimeLocaleData()]);
    if (this.open) {
      (0,_openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_11__.o)(this);
    }
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
    if (isValidTime(this.value)) {
      this.setInputValue(localizeTimeString({
        value: this.value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds: this.shouldIncludeSeconds(),
        fractionalSecondDigits: (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step),
      }));
    }
  }
  disconnectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_label_1c285d41_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
    (0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_8__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.d)(this);
  }
  componentDidRender() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_3__.u)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const { disabled, messages, readOnly, dialogId } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, { onBlur: this.hostBlurHandler, onKeyDown: this.keyDownHandler }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-wrapper", onClick: this.onInputWrapperClick }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-text", { "aria-autocomplete": "none", "aria-haspopup": "dialog", disabled: disabled, icon: "clock", id: this.referenceElementId, label: (0,_label_1c285d41_js__WEBPACK_IMPORTED_MODULE_5__.g)(this), lang: this.effectiveLocale, onCalciteInputTextInput: this.calciteInternalInputInputHandler, onCalciteInternalInputTextFocus: this.calciteInternalInputFocusHandler, readOnly: readOnly, role: "combobox", scale: this.scale, status: this.status,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setInputAndTransitionEl }), !this.readOnly && this.renderToggleIcon(this.open)), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { focusTrapDisabled: true, id: dialogId, label: messages.chooseTime, lang: this.effectiveLocale, onCalcitePopoverClose: this.popoverCloseHandler, onCalcitePopoverOpen: this.popoverOpenHandler, open: this.open, overlayPositioning: this.overlayPositioning, placement: this.placement, referenceElement: this.referenceElementId, triggerDisabled: true,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setCalcitePopoverEl }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-time-picker", { lang: this.effectiveLocale, messageOverrides: this.messageOverrides, numberingSystem: this.numberingSystem, onCalciteInternalTimePickerChange: this.timePickerChangeHandler, scale: this.scale, step: this.step, tabIndex: this.open ? undefined : -1, value: this.value,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setCalciteTimePickerEl })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_1__.H, { component: this })));
  }
  renderToggleIcon(open) {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS$1.toggleIcon }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: open ? "chevron-up" : "chevron-down", scale: (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.scale) })));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "open": ["openHandler"],
    "focusTrapDisabled": ["handleFocusTrapDisabled"],
    "disabled": ["handleDisabledAndReadOnlyChange"],
    "readOnly": ["handleDisabledAndReadOnlyChange"],
    "messageOverrides": ["onMessagesChange"],
    "numberingSystem": ["numberingSystemWatcher"],
    "step": ["stepWatcher"],
    "value": ["valueWatcher"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
};
InputTimePicker.style = inputTimePickerCss;

const CSS = {
  button: "button",
  buttonBottomLeft: "button--bottom-left",
  buttonBottomRight: "button--bottom-right",
  buttonFractionalSecondDown: "button--fractionalSecond-down",
  buttonFractionalSecondUp: "button--fractionalSecond-up",
  buttonHourDown: "button--hour-down",
  buttonHourUp: "button--hour-up",
  buttonMeridiemDown: "button--meridiem-down",
  buttonMeridiemUp: "button--meridiem-up",
  buttonMinuteDown: "button--minute-down",
  buttonMinuteUp: "button--minute-up",
  buttonSecondDown: "button--second-down",
  buttonSecondUp: "button--second-up",
  buttonTopLeft: "button--top-left",
  buttonTopRight: "button--top-right",
  column: "column",
  delimiter: "delimiter",
  fractionalSecond: "fractionalSecond",
  hour: "hour",
  input: "input",
  inputFocus: "inputFocus",
  meridiem: "meridiem",
  minute: "minute",
  second: "second",
  showMeridiem: "show-meridiem",
  showSecond: "show-second",
  "scale-s": "scale-s",
  "scale-m": "scale-m",
  "scale-l": "scale-l",
  timePicker: "time-picker",
  meridiemStart: "meridiem--start",
};

const timePickerCss = ":host{display:inline-block}.time-picker{display:flex;-webkit-user-select:none;user-select:none;align-items:center;background-color:var(--calcite-color-foreground-1);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-radius:var(--calcite-border-radius)}.time-picker .column{display:flex;flex-direction:column}.time-picker .meridiem--start{order:-1}.time-picker .button{display:inline-flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1)}.time-picker .button:hover,.time-picker .button:focus{background-color:var(--calcite-color-foreground-2);outline:2px solid transparent;outline-offset:2px;z-index:var(--calcite-z-index-header);outline-offset:0}.time-picker .button:active{background-color:var(--calcite-color-foreground-3)}.time-picker .button.top-left{border-start-start-radius:var(--calcite-border-radius)}.time-picker .button.bottom-left{border-end-start-radius:var(--calcite-border-radius)}.time-picker .button.top-right{border-start-end-radius:var(--calcite-border-radius)}.time-picker .button.bottom-right{border-end-end-radius:var(--calcite-border-radius)}.time-picker .button calcite-icon{color:var(--calcite-color-text-3)}.time-picker .input{display:inline-flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);font-weight:var(--calcite-font-weight-medium)}.time-picker .input:hover{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-2);z-index:var(--calcite-z-index-header)}.time-picker .input:focus,.time-picker .input:hover:focus{outline:2px solid transparent;outline-offset:2px;outline-offset:0}.time-picker .input.inputFocus,.time-picker .input:hover.inputFocus{box-shadow:inset 0 0 0 2px var(--calcite-color-brand);z-index:var(--calcite-z-index-header)}.time-picker.scale-s{font-size:var(--calcite-font-size--1)}.time-picker.scale-s .button,.time-picker.scale-s .input{padding-inline:0.75rem;padding-block:0.25rem}.time-picker.scale-s:not(.show-meridiem) .delimiter:last-child{padding-inline-end:0.75rem}.time-picker.scale-m{font-size:var(--calcite-font-size-0)}.time-picker.scale-m .button,.time-picker.scale-m .input{padding-inline:1rem;padding-block:0.5rem}.time-picker.scale-m:not(.show-meridiem) .delimiter:last-child{padding-inline-end:1rem}.time-picker.scale-l{font-size:var(--calcite-font-size-1)}.time-picker.scale-l .button,.time-picker.scale-l .input{padding-inline:1.25rem;padding-block:0.75rem}.time-picker.scale-l:not(.show-meridiem) .delimiter:last-child{padding-inline-end:1.25rem}:host([hidden]){display:none}[hidden]{display:none}";

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
const TimePicker = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalTimePickerBlur = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerBlur", 6);
    this.calciteInternalTimePickerChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerChange", 6);
    this.calciteInternalTimePickerFocus = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTimePickerFocus", 6);
    this.pointerActivated = false;
    this.decrementHour = () => {
      const newHour = !this.hour ? 0 : this.hour === "00" ? 23 : parseInt(this.hour) - 1;
      this.setValuePart("hour", newHour);
    };
    this.decrementMeridiem = () => {
      const newMeridiem = this.meridiem === "PM" ? "AM" : "PM";
      this.setValuePart("meridiem", newMeridiem);
    };
    this.decrementMinuteOrSecond = (key) => {
      let newValue;
      if ((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this[key])) {
        const valueAsNumber = parseInt(this[key]);
        newValue = valueAsNumber === 0 ? 59 : valueAsNumber - 1;
      }
      else {
        newValue = 59;
      }
      this.setValuePart(key, newValue);
    };
    this.decrementMinute = () => {
      this.decrementMinuteOrSecond("minute");
    };
    this.decrementSecond = () => {
      this.decrementMinuteOrSecond("second");
    };
    this.focusHandler = (event) => {
      if (this.pointerActivated) {
        return;
      }
      this.activeEl = event.currentTarget;
    };
    this.fractionalSecondKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(key)) {
        const stepPrecision = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step);
        const fractionalSecondAsInteger = parseInt(this.fractionalSecond);
        const fractionalSecondAsIntegerLength = fractionalSecondAsInteger.toString().length;
        let newFractionalSecondAsIntegerString;
        if (fractionalSecondAsIntegerLength >= stepPrecision) {
          newFractionalSecondAsIntegerString = key.padStart(stepPrecision, "0");
        }
        else if (fractionalSecondAsIntegerLength < stepPrecision) {
          newFractionalSecondAsIntegerString = `${fractionalSecondAsInteger}${key}`.padStart(stepPrecision, "0");
        }
        this.setValuePart("fractionalSecond", parseFloat(`0.${newFractionalSecondAsIntegerString}`));
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("fractionalSecond", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.nudgeFractionalSecond("down");
            break;
          case "ArrowUp":
            event.preventDefault();
            this.nudgeFractionalSecond("up");
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.fractionalSecondDownClickHandler = () => {
      this.activeEl = this.fractionalSecondEl;
      this.fractionalSecondEl.focus();
      this.nudgeFractionalSecond("down");
    };
    this.fractionalSecondUpClickHandler = () => {
      this.activeEl = this.fractionalSecondEl;
      this.fractionalSecondEl.focus();
      this.nudgeFractionalSecond("up");
    };
    this.hourDownClickHandler = () => {
      this.activeEl = this.hourEl;
      this.hourEl.focus();
      this.decrementHour();
    };
    this.hourKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newHour;
        if ((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.hour)) {
          switch (this.hourCycle) {
            case "12":
              newHour =
                this.hour === "01" && keyAsNumber >= 0 && keyAsNumber <= 2
                  ? `1${keyAsNumber}`
                  : keyAsNumber;
              break;
            case "24":
              if (this.hour === "01") {
                newHour = `1${keyAsNumber}`;
              }
              else if (this.hour === "02" && keyAsNumber >= 0 && keyAsNumber <= 3) {
                newHour = `2${keyAsNumber}`;
              }
              else {
                newHour = keyAsNumber;
              }
              break;
          }
        }
        else {
          newHour = keyAsNumber;
        }
        this.setValuePart("hour", newHour);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("hour", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementHour();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementHour();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.hourUpClickHandler = () => {
      this.activeEl = this.hourEl;
      this.hourEl.focus();
      this.incrementHour();
    };
    this.incrementMeridiem = () => {
      const newMeridiem = this.meridiem === "AM" ? "PM" : "AM";
      this.setValuePart("meridiem", newMeridiem);
    };
    this.incrementHour = () => {
      const newHour = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.hour)
        ? this.hour === "23"
          ? 0
          : parseInt(this.hour) + 1
        : 1;
      this.setValuePart("hour", newHour);
    };
    this.incrementMinuteOrSecond = (key) => {
      const newValue = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this[key])
        ? this[key] === "59"
          ? 0
          : parseInt(this[key]) + 1
        : 0;
      this.setValuePart(key, newValue);
    };
    this.incrementMinute = () => {
      this.incrementMinuteOrSecond("minute");
    };
    this.incrementSecond = () => {
      this.incrementMinuteOrSecond("second");
    };
    this.inputClickHandler = (event) => {
      this.activeEl = event.target;
    };
    this.meridiemUpClickHandler = () => {
      this.activeEl = this.meridiemEl;
      this.meridiemEl.focus();
      this.incrementMeridiem();
    };
    this.meridiemKeyDownHandler = (event) => {
      switch (event.key) {
        case "a":
          this.setValuePart("meridiem", "AM");
          break;
        case "p":
          this.setValuePart("meridiem", "PM");
          break;
        case "Backspace":
        case "Delete":
          this.setValuePart("meridiem", null);
          break;
        case "ArrowUp":
          event.preventDefault();
          this.incrementMeridiem();
          break;
        case "ArrowDown":
          event.preventDefault();
          this.decrementMeridiem();
          break;
        case " ":
          event.preventDefault();
          break;
      }
    };
    this.meridiemDownClickHandler = () => {
      this.activeEl = this.meridiemEl;
      this.meridiemEl.focus();
      this.decrementMeridiem();
    };
    this.minuteDownClickHandler = () => {
      this.activeEl = this.minuteEl;
      this.minuteEl.focus();
      this.decrementMinute();
    };
    this.minuteUpClickHandler = () => {
      this.activeEl = this.minuteEl;
      this.minuteEl.focus();
      this.incrementMinute();
    };
    this.minuteKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newMinute;
        if ((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.minute) && this.minute.startsWith("0")) {
          const minuteAsNumber = parseInt(this.minute);
          newMinute =
            minuteAsNumber > maxTenthForMinuteAndSecond
              ? keyAsNumber
              : `${minuteAsNumber}${keyAsNumber}`;
        }
        else {
          newMinute = keyAsNumber;
        }
        this.setValuePart("minute", newMinute);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("minute", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementMinute();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementMinute();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.nudgeFractionalSecond = (direction) => {
      const stepDecimal = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.g)(this.step);
      const stepPrecision = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step);
      const fractionalSecondAsInteger = parseInt(this.fractionalSecond);
      const fractionalSecondAsFloat = parseFloat(`0.${this.fractionalSecond}`);
      let nudgedValue;
      let nudgedValueRounded;
      let nudgedValueRoundedDecimals;
      let newFractionalSecond;
      if (direction === "up") {
        nudgedValue = isNaN(fractionalSecondAsInteger) ? 0 : fractionalSecondAsFloat + stepDecimal;
        nudgedValueRounded = parseFloat(nudgedValue.toFixed(stepPrecision));
        nudgedValueRoundedDecimals = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.g)(nudgedValueRounded);
        newFractionalSecond =
          nudgedValueRounded < 1 && (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(nudgedValueRoundedDecimals) > 0
            ? formatTimePart(nudgedValueRoundedDecimals, stepPrecision)
            : "".padStart(stepPrecision, "0");
      }
      if (direction === "down") {
        nudgedValue =
          isNaN(fractionalSecondAsInteger) || fractionalSecondAsInteger === 0
            ? 1 - stepDecimal
            : fractionalSecondAsFloat - stepDecimal;
        nudgedValueRounded = parseFloat(nudgedValue.toFixed(stepPrecision));
        nudgedValueRoundedDecimals = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.g)(nudgedValueRounded);
        newFractionalSecond =
          nudgedValueRounded < 1 &&
            (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(nudgedValueRoundedDecimals) > 0 &&
            Math.sign(nudgedValueRoundedDecimals) === 1
            ? formatTimePart(nudgedValueRoundedDecimals, stepPrecision)
            : "".padStart(stepPrecision, "0");
      }
      this.setValuePart("fractionalSecond", newFractionalSecond);
    };
    this.sanitizeValue = (value) => {
      const { hour, minute, second, fractionalSecond } = parseTimeString(value);
      if (fractionalSecond) {
        const sanitizedFractionalSecond = this.sanitizeFractionalSecond(fractionalSecond);
        return `${hour}:${minute}:${second}.${sanitizedFractionalSecond}`;
      }
      return isValidTime(value) && value;
    };
    this.sanitizeFractionalSecond = (fractionalSecond) => fractionalSecond && (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step) !== fractionalSecond.length
      ? parseFloat(`0.${fractionalSecond}`).toFixed((0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step)).replace("0.", "")
      : fractionalSecond;
    this.secondKeyDownHandler = (event) => {
      const { key } = event;
      if (_key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_4__.n.includes(key)) {
        const keyAsNumber = parseInt(key);
        let newSecond;
        if ((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.second) && this.second.startsWith("0")) {
          const secondAsNumber = parseInt(this.second);
          newSecond =
            secondAsNumber > maxTenthForMinuteAndSecond
              ? keyAsNumber
              : `${secondAsNumber}${keyAsNumber}`;
        }
        else {
          newSecond = keyAsNumber;
        }
        this.setValuePart("second", newSecond);
      }
      else {
        switch (key) {
          case "Backspace":
          case "Delete":
            this.setValuePart("second", null);
            break;
          case "ArrowDown":
            event.preventDefault();
            this.decrementSecond();
            break;
          case "ArrowUp":
            event.preventDefault();
            this.incrementSecond();
            break;
          case " ":
            event.preventDefault();
            break;
        }
      }
    };
    this.secondDownClickHandler = () => {
      this.activeEl = this.secondEl;
      this.secondEl.focus();
      this.decrementSecond();
    };
    this.secondUpClickHandler = () => {
      this.activeEl = this.secondEl;
      this.secondEl.focus();
      this.incrementSecond();
    };
    this.setHourEl = (el) => (this.hourEl = el);
    this.setMeridiemEl = (el) => (this.meridiemEl = el);
    this.setMinuteEl = (el) => (this.minuteEl = el);
    this.setSecondEl = (el) => (this.secondEl = el);
    this.setFractionalSecondEl = (el) => (this.fractionalSecondEl = el);
    this.setValue = (value) => {
      if (isValidTime(value)) {
        const { hour, minute, second, fractionalSecond } = parseTimeString(value);
        const { effectiveLocale: locale, numberingSystem } = this;
        const { localizedHour, localizedHourSuffix, localizedMinute, localizedMinuteSuffix, localizedSecond, localizedDecimalSeparator, localizedFractionalSecond, localizedSecondSuffix, localizedMeridiem, } = localizeTimeStringToParts({ value, locale, numberingSystem });
        this.hour = hour;
        this.minute = minute;
        this.second = second;
        this.fractionalSecond = this.sanitizeFractionalSecond(fractionalSecond);
        this.localizedHour = localizedHour;
        this.localizedHourSuffix = localizedHourSuffix;
        this.localizedMinute = localizedMinute;
        this.localizedMinuteSuffix = localizedMinuteSuffix;
        this.localizedSecond = localizedSecond;
        this.localizedDecimalSeparator = localizedDecimalSeparator;
        this.localizedFractionalSecond = localizedFractionalSecond;
        this.localizedSecondSuffix = localizedSecondSuffix;
        if (localizedMeridiem) {
          this.localizedMeridiem = localizedMeridiem;
          this.meridiem = getMeridiem(this.hour);
          const formatParts = getTimeParts({ value, locale, numberingSystem });
          this.meridiemOrder = this.getMeridiemOrder(formatParts);
        }
      }
      else {
        this.hour = null;
        this.fractionalSecond = null;
        this.localizedHour = null;
        this.localizedHourSuffix = getLocalizedTimePartSuffix("hour", this.effectiveLocale, this.numberingSystem);
        this.localizedMeridiem = null;
        this.localizedMinute = null;
        this.localizedMinuteSuffix = getLocalizedTimePartSuffix("minute", this.effectiveLocale, this.numberingSystem);
        this.localizedSecond = null;
        this.localizedDecimalSeparator = getLocalizedDecimalSeparator(this.effectiveLocale, this.numberingSystem);
        this.localizedFractionalSecond = null;
        this.localizedSecondSuffix = getLocalizedTimePartSuffix("second", this.effectiveLocale, this.numberingSystem);
        this.meridiem = null;
        this.minute = null;
        this.second = null;
        this.value = null;
      }
    };
    this.setValuePart = (key, value) => {
      const { effectiveLocale: locale, numberingSystem } = this;
      if (key === "meridiem") {
        this.meridiem = value;
        if ((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.hour)) {
          const hourAsNumber = parseInt(this.hour);
          switch (value) {
            case "AM":
              if (hourAsNumber >= 12) {
                this.hour = formatTimePart(hourAsNumber - 12);
              }
              break;
            case "PM":
              if (hourAsNumber < 12) {
                this.hour = formatTimePart(hourAsNumber + 12);
              }
              break;
          }
          this.localizedHour = localizeTimePart({
            value: this.hour,
            part: "hour",
            locale,
            numberingSystem,
          });
        }
      }
      else if (key === "fractionalSecond") {
        const stepPrecision = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step);
        if (typeof value === "number") {
          this.fractionalSecond =
            value === 0 ? "".padStart(stepPrecision, "0") : formatTimePart(value, stepPrecision);
        }
        else {
          this.fractionalSecond = value;
        }
        this.localizedFractionalSecond = localizeTimePart({
          value: this.fractionalSecond,
          part: "fractionalSecond",
          locale,
          numberingSystem,
        });
      }
      else {
        this[key] = typeof value === "number" ? formatTimePart(value) : value;
        this[`localized${capitalize(key)}`] = localizeTimePart({
          value: this[key],
          part: key,
          locale,
          numberingSystem,
        });
      }
      let emit = false;
      let newValue;
      if (this.hour && this.minute) {
        newValue = `${this.hour}:${this.minute}`;
        if (this.showSecond) {
          newValue = `${newValue}:${this.second ?? "00"}`;
          if (this.showFractionalSecond && this.fractionalSecond) {
            newValue = `${newValue}.${this.fractionalSecond}`;
          }
        }
      }
      else {
        newValue = null;
      }
      if (this.value !== newValue) {
        emit = true;
      }
      this.value = newValue;
      this.localizedMeridiem = this.value
        ? localizeTimeStringToParts({ value: this.value, locale, numberingSystem })
          ?.localizedMeridiem || null
        : localizeTimePart({ value: this.meridiem, part: "meridiem", locale, numberingSystem });
      if (emit) {
        this.calciteInternalTimePickerChange.emit();
      }
    };
    this.scale = "m";
    this.step = 60;
    this.numberingSystem = undefined;
    this.value = null;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.activeEl = undefined;
    this.effectiveLocale = "";
    this.fractionalSecond = undefined;
    this.hour = undefined;
    this.hourCycle = undefined;
    this.localizedDecimalSeparator = ".";
    this.localizedHour = undefined;
    this.localizedHourSuffix = undefined;
    this.localizedMeridiem = undefined;
    this.localizedFractionalSecond = undefined;
    this.localizedMinute = undefined;
    this.localizedMinuteSuffix = undefined;
    this.localizedSecond = undefined;
    this.localizedSecondSuffix = undefined;
    this.meridiem = undefined;
    this.minute = undefined;
    this.second = undefined;
    this.showFractionalSecond = undefined;
    this.showSecond = undefined;
    this.defaultMessages = undefined;
  }
  stepChange() {
    this.toggleSecond();
  }
  valueWatcher(newValue) {
    this.setValue(newValue);
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleWatcher() {
    this.updateLocale();
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  blurHandler() {
    this.activeEl = undefined;
    this.pointerActivated = false;
    this.calciteInternalTimePickerBlur.emit();
  }
  hostFocusHandler() {
    this.calciteInternalTimePickerFocus.emit();
  }
  keyDownHandler(event) {
    this.pointerActivated = false;
    const { defaultPrevented, key } = event;
    if (defaultPrevented) {
      return;
    }
    switch (this.activeEl) {
      case this.hourEl:
        if (key === "ArrowRight") {
          this.focusPart("minute");
          event.preventDefault();
        }
        break;
      case this.minuteEl:
        switch (key) {
          case "ArrowLeft":
            this.focusPart("hour");
            event.preventDefault();
            break;
          case "ArrowRight":
            if (this.step !== 60) {
              this.focusPart("second");
              event.preventDefault();
            }
            else if (this.hourCycle === "12") {
              this.focusPart("meridiem");
              event.preventDefault();
            }
            break;
        }
        break;
      case this.secondEl:
        switch (key) {
          case "ArrowLeft":
            this.focusPart("minute");
            event.preventDefault();
            break;
          case "ArrowRight":
            if (this.showFractionalSecond) {
              this.focusPart("fractionalSecond");
            }
            else if (this.hourCycle === "12") {
              this.focusPart("meridiem");
              event.preventDefault();
            }
            break;
        }
        break;
      case this.fractionalSecondEl:
        switch (key) {
          case "ArrowLeft":
            this.focusPart("second");
            event.preventDefault();
            break;
          case "ArrowRight":
            if (this.hourCycle === "12") {
              this.focusPart("meridiem");
              event.preventDefault();
            }
            break;
        }
        break;
      case this.meridiemEl:
        switch (key) {
          case "ArrowLeft":
            if (this.showFractionalSecond) {
              this.focusPart("fractionalSecond");
            }
            else if (this.step !== 60) {
              this.focusPart("second");
              event.preventDefault();
            }
            else {
              this.focusPart("minute");
              event.preventDefault();
            }
            break;
        }
        break;
    }
  }
  pointerDownHandler() {
    this.pointerActivated = true;
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Sets focus on the component's first focusable element.
   */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    this.el?.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  async focusPart(target) {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    this[`${target || "hour"}El`]?.focus();
  }
  toggleSecond() {
    this.showSecond = this.step < 60;
    this.showFractionalSecond = (0,_math_922e37ec_js__WEBPACK_IMPORTED_MODULE_9__.d)(this.step) > 0;
  }
  getMeridiemOrder(formatParts) {
    const locale = this.effectiveLocale;
    const isRTLKind = locale === "ar" || locale === "he";
    if (formatParts && !isRTLKind) {
      const index = formatParts.findIndex((parts) => {
        return parts.value === this.localizedMeridiem;
      });
      return index;
    }
    return 0;
  }
  updateLocale() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.u)(this, this.effectiveLocale);
    this.hourCycle = getLocaleHourCycle(this.effectiveLocale, this.numberingSystem);
    this.localizedDecimalSeparator = getLocalizedDecimalSeparator(this.effectiveLocale, this.numberingSystem);
    this.setValue(this.sanitizeValue(this.value));
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    this.updateLocale();
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.c)(this);
    this.toggleSecond();
    this.meridiemOrder = this.getMeridiemOrder(getTimeParts({
      value: "0:00:00",
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
    }));
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
  }
  disconnectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_10__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const hourIsNumber = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.hour);
    const iconScale = (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.scale);
    const minuteIsNumber = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.minute);
    const secondIsNumber = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.second);
    const fractionalSecondIsNumber = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_7__.i)(this.fractionalSecond);
    const showMeridiem = this.hourCycle === "12";
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.timePicker]: true,
        [CSS.showMeridiem]: showMeridiem,
        [CSS.showSecond]: this.showSecond,
        [CSS[`scale-${this.scale}`]]: true,
      }, dir: "ltr" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hourUp, class: {
        [CSS.button]: true,
        [CSS.buttonHourUp]: true,
        [CSS.buttonTopLeft]: true,
      }, onClick: this.hourUpClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hour, "aria-valuemax": "23", "aria-valuemin": "1", "aria-valuenow": (hourIsNumber && parseInt(this.hour)) || "0", "aria-valuetext": this.hour, class: {
        [CSS.input]: true,
        [CSS.hour]: true,
        [CSS.inputFocus]: this.activeEl && this.activeEl === this.hourEl,
      }, onClick: this.inputClickHandler, onFocus: this.focusHandler, onKeyDown: this.hourKeyDownHandler, role: "spinbutton", tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setHourEl }, this.localizedHour || "--"), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.hourDown, class: {
        [CSS.button]: true,
        [CSS.buttonHourDown]: true,
        [CSS.buttonBottomLeft]: true,
      }, onClick: this.hourDownClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedHourSuffix), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minuteUp, class: {
        [CSS.button]: true,
        [CSS.buttonMinuteUp]: true,
      }, onClick: this.minuteUpClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minute, "aria-valuemax": "12", "aria-valuemin": "1", "aria-valuenow": (minuteIsNumber && parseInt(this.minute)) || "0", "aria-valuetext": this.minute, class: {
        [CSS.input]: true,
        [CSS.minute]: true,
        [CSS.inputFocus]: this.activeEl && this.activeEl === this.minuteEl,
      }, onClick: this.inputClickHandler, onFocus: this.focusHandler, onKeyDown: this.minuteKeyDownHandler, role: "spinbutton", tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setMinuteEl }, this.localizedMinute || "--"), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.minuteDown, class: {
        [CSS.button]: true,
        [CSS.buttonMinuteDown]: true,
      }, onClick: this.minuteDownClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))), this.showSecond && (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedMinuteSuffix), this.showSecond && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.secondUp, class: {
        [CSS.button]: true,
        [CSS.buttonSecondUp]: true,
      }, onClick: this.secondUpClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.second, "aria-valuemax": "59", "aria-valuemin": "0", "aria-valuenow": (secondIsNumber && parseInt(this.second)) || "0", "aria-valuetext": this.second, class: {
        [CSS.input]: true,
        [CSS.second]: true,
        [CSS.inputFocus]: this.activeEl && this.activeEl === this.secondEl,
      }, onClick: this.inputClickHandler, onFocus: this.focusHandler, onKeyDown: this.secondKeyDownHandler, role: "spinbutton", tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setSecondEl }, this.localizedSecond || "--"), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.secondDown, class: {
        [CSS.button]: true,
        [CSS.buttonSecondDown]: true,
      }, onClick: this.secondDownClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale })))), this.showFractionalSecond && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedDecimalSeparator)), this.showFractionalSecond && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.column, role: "group" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.fractionalSecondUp, class: {
        [CSS.button]: true,
        [CSS.buttonFractionalSecondUp]: true,
      }, onClick: this.fractionalSecondUpClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.fractionalSecond, "aria-valuemax": "999", "aria-valuemin": "1", "aria-valuenow": (fractionalSecondIsNumber && parseInt(this.fractionalSecond)) || "0", "aria-valuetext": this.localizedFractionalSecond, class: {
        [CSS.input]: true,
        [CSS.fractionalSecond]: true,
        [CSS.inputFocus]: this.activeEl && this.activeEl === this.fractionalSecondEl,
      }, onClick: this.inputClickHandler, onFocus: this.focusHandler, onKeyDown: this.fractionalSecondKeyDownHandler, role: "spinbutton", tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setFractionalSecondEl }, this.localizedFractionalSecond || "--"), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.fractionalSecondDown, class: {
        [CSS.button]: true,
        [CSS.buttonFractionalSecondDown]: true,
      }, onClick: this.fractionalSecondDownClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale })))), this.localizedSecondSuffix && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.delimiter }, this.localizedSecondSuffix)), showMeridiem && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.column]: true,
        [CSS.meridiemStart]: this.meridiemOrder === 0,
      }, role: "group" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiemUp, class: {
        [CSS.button]: true,
        [CSS.buttonMeridiemUp]: true,
        [CSS.buttonTopRight]: true,
      }, onClick: this.meridiemUpClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-up", scale: iconScale })), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiem, "aria-valuemax": "2", "aria-valuemin": "1", "aria-valuenow": (this.meridiem === "PM" && "2") || "1", "aria-valuetext": this.meridiem, class: {
        [CSS.input]: true,
        [CSS.meridiem]: true,
        [CSS.inputFocus]: this.activeEl && this.activeEl === this.meridiemEl,
      }, onClick: this.inputClickHandler, onFocus: this.focusHandler, onKeyDown: this.meridiemKeyDownHandler, role: "spinbutton", tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setMeridiemEl }, this.localizedMeridiem || "--"), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-label": this.messages.meridiemDown, class: {
        [CSS.button]: true,
        [CSS.buttonMeridiemDown]: true,
        [CSS.buttonBottomRight]: true,
      }, onClick: this.meridiemDownClickHandler, role: "button" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: iconScale }))))));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "step": ["stepChange"],
    "value": ["valueWatcher"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
};
TimePicker.style = timePickerCss;



//# sourceMappingURL=calcite-input-time-picker.calcite-time-picker-f368e9a2.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-input-time-picker_2.entry.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-input-time-picker_2.entry.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_input_time_picker: () => (/* reexport safe */ _calcite_input_time_picker_calcite_time_picker_f368e9a2_js__WEBPACK_IMPORTED_MODULE_0__.I),
/* harmony export */   calcite_time_picker: () => (/* reexport safe */ _calcite_input_time_picker_calcite_time_picker_f368e9a2_js__WEBPACK_IMPORTED_MODULE_0__.T)
/* harmony export */ });
/* harmony import */ var _calcite_input_time_picker_calcite_time_picker_f368e9a2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./calcite-input-time-picker.calcite-time-picker-f368e9a2.js */ "./node_modules/@esri/calcite-components/dist/esm/calcite-input-time-picker.calcite-time-picker-f368e9a2.js");
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-4876c9e5.js */ "./node_modules/@esri/calcite-components/dist/esm/form-4876c9e5.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interactive-cbd8a6dc.js */ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js");
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _label_1c285d41_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./label-1c285d41.js */ "./node_modules/@esri/calcite-components/dist/esm/label-1c285d41.js");
/* harmony import */ var _component_f94cab72_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./component-f94cab72.js */ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./focusTrapComponent-aee15b41.js */ "./node_modules/@esri/calcite-components/dist/esm/focusTrapComponent-aee15b41.js");
/* harmony import */ var _math_922e37ec_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./math-922e37ec.js */ "./node_modules/@esri/calcite-components/dist/esm/math-922e37ec.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./openCloseComponent-48db6daf.js */ "./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



















//# sourceMappingURL=calcite-input-time-picker_2.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ componentOnReady),
/* harmony export */   g: () => (/* binding */ getIconScale)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
function getIconScale(componentScale) {
  return componentScale === "l" ? "m" : "s";
}
/**
 * This util helps us wait for a component to be ready for both lazy-loading (`dist` output) and non-lazy-loading (`components` output) components.
 *
 * Based on https://github.com/ionic-team/ionic-framework/blob/1a8bd6d/core/src/utils/helpers.ts#L60C1-L79C3
 *
 * @param el - the host element to wait for
 */
async function componentOnReady(el) {
  await (isStencilEl(el)
    ? el.componentOnReady()
    : new Promise((resolve) => requestAnimationFrame(() => resolve())));
}
function isStencilEl(el) {
  return typeof el.componentOnReady === "function";
}



//# sourceMappingURL=component-f94cab72.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectInteractive),
/* harmony export */   d: () => (/* binding */ disconnectInteractive),
/* harmony export */   u: () => (/* binding */ updateHostInteraction)
/* harmony export */ });
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


//  browser-sniffing is not a best practice and should be avoided 
const isFirefox = /firefox/i.test((0,_browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_0__.g)());
const interactiveElementToParent = isFirefox
  ? new WeakMap()
  : null;
function interceptedClick() {
  const { disabled } = this;
  if (!disabled) {
    HTMLElement.prototype.click.call(this);
  }
}
function onPointerDown(event) {
  const interactiveElement = event.target;
  if (isFirefox && !interactiveElementToParent.get(interactiveElement)) {
    return;
  }
  const { disabled } = interactiveElement;
  if (disabled) {
    // prevent click from moving focus on host
    event.preventDefault();
  }
}
const nonBubblingWhenDisabledMouseEvents = ["mousedown", "mouseup", "click"];
function onNonBubblingWhenDisabledMouseEvent(event) {
  if (isFirefox && !interactiveElementToParent.get(event.target)) {
    return;
  }
  const { disabled } = event.target;
  // prevent disallowed mouse events from being emitted on the disabled host (per https://github.com/whatwg/html/issues/5886)
  // we generally avoid stopping propagation of events, but this is needed to adhere to the intended spec changes above 
  if (disabled) {
    event.stopImmediatePropagation();
    event.preventDefault();
  }
}
const captureOnlyOptions = { capture: true };
/**
 * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.
 *
 * This should be used in the `componentDidRender` lifecycle hook.
 *
 * **Notes**
 *
 * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.
 * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error
 *
 * @param component
 * @param hostIsTabbable  when set to true or its predicate returns true, the host is tabbable and will be managed by the helper. Set to "managed" for cases where a component's parent determines which item is tabbable (i.e., sets `tabindex` to allow tabbing).
 */
function updateHostInteraction(component, hostIsTabbable = false) {
  if (component.disabled) {
    component.el.setAttribute("tabindex", "-1");
    component.el.setAttribute("aria-disabled", "true");
    if (component.el.contains(document.activeElement)) {
      document.activeElement.blur();
    }
    blockInteraction(component);
    return;
  }
  restoreInteraction(component);
  if (typeof hostIsTabbable === "function") {
    component.el.setAttribute("tabindex", hostIsTabbable.call(component) ? "0" : "-1");
  }
  else if (hostIsTabbable === true) {
    component.el.setAttribute("tabindex", "0");
  }
  else if (hostIsTabbable === false) {
    component.el.removeAttribute("tabindex");
  }
  else ;
  component.el.removeAttribute("aria-disabled");
}
function blockInteraction(component) {
  component.el.click = interceptedClick;
  addInteractionListeners(isFirefox ? getParentElement(component) : component.el);
}
function addInteractionListeners(element) {
  if (!element) {
    // this path is only applicable to Firefox
    return;
  }
  element.addEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
function getParentElement(component) {
  return interactiveElementToParent.get(component.el);
}
function restoreInteraction(component) {
  delete component.el.click; // fallback on HTMLElement.prototype.click
  removeInteractionListeners(isFirefox ? getParentElement(component) : component.el);
}
function removeInteractionListeners(element) {
  if (!element) {
    // this path is only applicable to Firefox
    return;
  }
  element.removeEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
/**
 * This utility helps disable components consistently in Firefox.
 *
 * It needs to be called in `connectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).
 *
 * @param component
 */
function connectInteractive(component) {
  if (!component.disabled || !isFirefox) {
    return;
  }
  const parent = component.el.parentElement || component.el; /* assume element is host if it has no parent when connected */
  interactiveElementToParent.set(component.el, parent);
  blockInteraction(component);
}
/**
 * This utility restores interactivity to disabled components consistently in Firefox.
 *
 * It needs to be called in `disconnectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).
 *
 * @param component
 */
function disconnectInteractive(component) {
  if (!isFirefox) {
    return;
  }
  // always remove on disconnect as render or connect will restore it
  interactiveElementToParent.delete(component.el);
  restoreInteraction(component);
}



//# sourceMappingURL=interactive-cbd8a6dc.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/label-1c285d41.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/label-1c285d41.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ associateExplicitLabelToUnlabeledComponent),
/* harmony export */   b: () => (/* binding */ labelDisconnectedEvent),
/* harmony export */   c: () => (/* binding */ connectLabel),
/* harmony export */   d: () => (/* binding */ disconnectLabel),
/* harmony export */   g: () => (/* binding */ getLabelText),
/* harmony export */   l: () => (/* binding */ labelConnectedEvent)
/* harmony export */ });
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _component_f94cab72_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component-f94cab72.js */ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



/**
 * Exported for testing purposes only
 *
 * @internal
 */
const labelClickEvent = "calciteInternalLabelClick";
const labelConnectedEvent = "calciteInternalLabelConnected";
const labelDisconnectedEvent = "calciteInternalLabelDisconnected";
const labelTagName = "calcite-label";
const labelToLabelables = new WeakMap();
const onLabelClickMap = new WeakMap();
const onLabelConnectedMap = new WeakMap();
const onLabelDisconnectedMap = new WeakMap();
const unlabeledComponents = new Set();
const findLabelForComponent = (componentEl) => {
  const { id } = componentEl;
  const forLabel = id && (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_0__.q)(componentEl, { selector: `${labelTagName}[for="${id}"]` });
  if (forLabel) {
    return forLabel;
  }
  const parentLabel = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_0__.c)(componentEl, labelTagName);
  if (!parentLabel ||
    // labelable components within other custom elements are not considered labelable
    hasAncestorCustomElements(parentLabel, componentEl)) {
    return null;
  }
  return parentLabel;
};
function hasAncestorCustomElements(label, componentEl) {
  let traversedElements;
  const customElementAncestorCheckEventType = "custom-element-ancestor-check";
  const listener = (event) => {
    event.stopImmediatePropagation();
    const composedPath = event.composedPath();
    traversedElements = composedPath.slice(composedPath.indexOf(componentEl), composedPath.indexOf(label));
  };
  label.addEventListener(customElementAncestorCheckEventType, listener, { once: true });
  componentEl.dispatchEvent(new CustomEvent(customElementAncestorCheckEventType, { composed: true, bubbles: true }));
  label.removeEventListener(customElementAncestorCheckEventType, listener);
  const ancestorCustomElements = traversedElements
    .filter((el) => el !== componentEl && el !== label)
    .filter((el) => el.tagName?.includes("-"));
  return ancestorCustomElements.length > 0;
}
/**
 * Helper to set up label interactions on connectedCallback.
 *
 * @param component
 */
function connectLabel(component) {
  if (!component) {
    return;
  }
  const labelEl = findLabelForComponent(component.el);
  if ((onLabelClickMap.has(labelEl) && labelEl === component.labelEl) ||
    (!labelEl && unlabeledComponents.has(component))) {
    return;
  }
  const boundOnLabelDisconnected = onLabelDisconnected.bind(component);
  if (labelEl) {
    component.labelEl = labelEl;
    const labelables = labelToLabelables.get(labelEl) || [];
    labelables.push(component);
    labelToLabelables.set(labelEl, labelables.sort(sortByDOMOrder));
    if (!onLabelClickMap.has(component.labelEl)) {
      onLabelClickMap.set(component.labelEl, onLabelClick);
      component.labelEl.addEventListener(labelClickEvent, onLabelClick);
    }
    unlabeledComponents.delete(component);
    document.removeEventListener(labelConnectedEvent, onLabelConnectedMap.get(component));
    onLabelDisconnectedMap.set(component, boundOnLabelDisconnected);
    document.addEventListener(labelDisconnectedEvent, boundOnLabelDisconnected);
  }
  else if (!unlabeledComponents.has(component)) {
    boundOnLabelDisconnected();
    document.removeEventListener(labelDisconnectedEvent, onLabelDisconnectedMap.get(component));
  }
}
/**
 * Helper to tear down label interactions on disconnectedCallback on labelable components.
 *
 * @param component
 */
function disconnectLabel(component) {
  if (!component) {
    return;
  }
  unlabeledComponents.delete(component);
  document.removeEventListener(labelConnectedEvent, onLabelConnectedMap.get(component));
  document.removeEventListener(labelDisconnectedEvent, onLabelDisconnectedMap.get(component));
  onLabelConnectedMap.delete(component);
  onLabelDisconnectedMap.delete(component);
  if (!component.labelEl) {
    return;
  }
  const labelables = labelToLabelables.get(component.labelEl);
  if (labelables.length === 1) {
    component.labelEl.removeEventListener(labelClickEvent, onLabelClickMap.get(component.labelEl));
    onLabelClickMap.delete(component.labelEl);
  }
  labelToLabelables.set(component.labelEl, labelables.filter((labelable) => labelable !== component).sort(sortByDOMOrder));
  component.labelEl = null;
}
function sortByDOMOrder(a, b) {
  return (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_0__.k)(a.el, b.el) ? -1 : 1;
}
/**
 * Helper to get the label text from a component.
 *
 * @param component
 */
function getLabelText(component) {
  return component.label || component.labelEl?.textContent?.trim() || "";
}
function onLabelClick(event) {
  const labelClickTarget = event.detail.sourceEvent.target;
  const labelables = labelToLabelables.get(this);
  const clickedLabelable = labelables.find((labelable) => labelable.el === labelClickTarget);
  const labelableChildClicked = labelables.includes(clickedLabelable);
  if (labelableChildClicked) {
    // no need to forward click as labelable will receive focus
    return;
  }
  const firstLabelable = labelables[0];
  if (firstLabelable.disabled) {
    return;
  }
  firstLabelable.onLabelClick(event);
}
function onLabelConnected() {
  if (unlabeledComponents.has(this)) {
    connectLabel(this);
  }
}
function onLabelDisconnected() {
  unlabeledComponents.add(this);
  const boundOnLabelConnected = onLabelConnectedMap.get(this) || onLabelConnected.bind(this);
  onLabelConnectedMap.set(this, boundOnLabelConnected);
  document.addEventListener(labelConnectedEvent, boundOnLabelConnected);
}
/**
 * Helper to associate an explicit label (i.e., using `for`) with a labelable component that does not have an associated label.
 *
 * @param label - the label element
 */
async function associateExplicitLabelToUnlabeledComponent(label) {
  await (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_1__.c)(label);
  const alreadyLabeled = labelToLabelables.has(label);
  if (alreadyLabeled) {
    return;
  }
  const forComponentEl = label.ownerDocument?.getElementById(label.for);
  if (!forComponentEl) {
    return;
  }
  requestAnimationFrame(() => {
    for (const labelable of unlabeledComponents) {
      if (labelable.el === forComponentEl) {
        connectLabel(labelable);
        break;
      }
    }
  });
}



//# sourceMappingURL=label-1c285d41.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/math-922e37ec.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/math-922e37ec.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ closeToRangeEdge),
/* harmony export */   c: () => (/* binding */ clamp),
/* harmony export */   d: () => (/* binding */ decimalPlaces),
/* harmony export */   g: () => (/* binding */ getDecimals),
/* harmony export */   r: () => (/* binding */ remap)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
const clamp = (value, min, max) => Math.max(min, Math.min(value, max));
const decimalNumberRegex = new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
/**
 * Returns the quantity of real decimal places for a number, which excludes trailing zeros.
 *
 * Adapted from {@link https://stackoverflow.com/questions/10454518/javascript-how-to-retrieve-the-number-of-decimals-of-a-string-number}.
 *
 * @param decimal - decimal value
 * @param value
 * @returns {number} the amount of decimal places in a number
 */
const decimalPlaces = (value) => {
  const match = ("" + value).match(decimalNumberRegex);
  if (!match || parseInt(match[1]) === 0) {
    return 0;
  }
  return Math.max(0, 
  // Number of digits right of decimal point.
  (match[1] ? match[1].length : 0) -
    // Adjust for scientific notation.
    (match[2] ? +match[2] : 0));
};
function getDecimals(value) {
  if (decimalPlaces(value) > 0 && value > 0) {
    return parseFloat(`0.${value.toString().split(".")[1]}`);
  }
  return value;
}
function remap(value, fromMin, fromMax, toMin, toMax) {
  return ((value - fromMin) * (toMax - toMin)) / (fromMax - fromMin) + toMin;
}
/**
 * Helper to determine if a value is close to the edge of a range within a threshold.
 *
 * @param value
 * @param range
 * @param threshold
 * @returns -1 if close to lower edge, 1 if close to upper edge, 0 otherwise.
 */
function closeToRangeEdge(value, range, threshold) {
  return value < threshold ? -1 : value > range - threshold ? 1 : 0;
}



//# sourceMappingURL=math-922e37ec.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ onToggleOpenCloseComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


function isOpen(component) {
  return "opened" in component ? component.opened : component.open;
}
function emitImmediately(component, nonOpenCloseComponent = false) {
  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
    ? component.onBeforeOpen()
    : component.onBeforeClose();
  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
    ? component.onOpen()
    : component.onClose();
}
/**
 * Helper to determine globally set transition duration on the given openTransitionProp, which is imported and set in the @Watch("open").
 * Used to emit (before)open/close events both for when the opacity transition is present and when there is none (transition-duration is set to 0).
 *
 * @example
 * import { onToggleOpenCloseComponent, OpenCloseComponent } from "../../utils/openCloseComponent";
 *
 * async componentWillLoad() {
 * // When component initially renders, if `open` was set we need to trigger on load as watcher doesn't fire.
 * if (this.open) {
 *    onToggleOpenCloseComponent(this);
 * }
 * @Watch("open")
 * async toggleModal(value: boolean): Promise<void> {
 *    onToggleOpenCloseComponent(this);
 * }
 *
 * @param component - OpenCloseComponent uses `open` prop to emit (before)open/close.
 * @param nonOpenCloseComponent - OpenCloseComponent uses `expanded` prop to emit (before)open/close.
 */
function onToggleOpenCloseComponent(component, nonOpenCloseComponent = false) {
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.e)(() => {
    if (component.transitionEl) {
      const { transitionDuration: allDurations, transitionProperty: allProps } = getComputedStyle(component.transitionEl);
      const allTransitionDurationsArray = allDurations.split(",");
      const allTransitionPropsArray = allProps.split(",");
      const openTransitionPropIndex = allTransitionPropsArray.indexOf(component.openTransitionProp);
      const transitionDuration = allTransitionDurationsArray[openTransitionPropIndex] ??
        /* Safari will have a single transition value if multiple props share it,
        so we fall back to it if there's no matching prop duration */
        allTransitionDurationsArray[0];
      if (transitionDuration === "0s") {
        emitImmediately(component, nonOpenCloseComponent);
        return;
      }
      const fallbackTimeoutId = setTimeout(() => {
        component.transitionEl.removeEventListener("transitionstart", onStart);
        component.transitionEl.removeEventListener("transitionend", onEndOrCancel);
        component.transitionEl.removeEventListener("transitioncancel", onEndOrCancel);
        emitImmediately(component, nonOpenCloseComponent);
      }, parseFloat(transitionDuration) * 1000);
      component.transitionEl.addEventListener("transitionstart", onStart);
      component.transitionEl.addEventListener("transitionend", onEndOrCancel);
      component.transitionEl.addEventListener("transitioncancel", onEndOrCancel);
      function onStart(event) {
        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {
          clearTimeout(fallbackTimeoutId);
          component.transitionEl.removeEventListener("transitionstart", onStart);
          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
            ? component.onBeforeOpen()
            : component.onBeforeClose();
        }
      }
      function onEndOrCancel(event) {
        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {
          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
            ? component.onOpen()
            : component.onClose();
          component.transitionEl.removeEventListener("transitionend", onEndOrCancel);
          component.transitionEl.removeEventListener("transitioncancel", onEndOrCancel);
        }
      }
    }
  });
}



//# sourceMappingURL=openCloseComponent-48db6daf.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-0bcdca54.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLWlucHV0LXRpbWUtcGlja2VyXzJfZW50cnlfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGdCQUFnQixRQUFRLE1BQU0sR0FBRyxRQUFRO0FBQ3BFO0FBQ0E7O0FBRW1DOztBQUVuQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM2RztBQUNTO0FBQ3ZFO0FBQzZFO0FBQ3hFO0FBQzZDO0FBQ3NCO0FBQ21HO0FBQy9GO0FBQ2pEO0FBQ2lEO0FBQ3hDO0FBQ3ZCOztBQUU1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsc0RBQTJCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzREFBaUI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9EQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUseUNBQXlDO0FBQ25ELDBCQUEwQiwrQkFBK0IsR0FBRyxpQ0FBaUM7QUFDN0Y7QUFDQSwwQkFBMEIsaUNBQWlDO0FBQzNEO0FBQ0EsNEJBQTRCLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHFCQUFxQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsa0RBQXFCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7O0FBRTdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MsbUxBQW1MOztBQUUzTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLEdBQUc7QUFDUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxJQUFJLEdBQUcsSUFBSTtBQUMzRDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLG1HQUFtRyxJQUFJO0FBQ3ZHLG1CQUFt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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWtHOztBQUVsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2Jyb3dzZXItZWNlMjlkYTcuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vY2FsY2l0ZS1pbnB1dC10aW1lLXBpY2tlci5jYWxjaXRlLXRpbWUtcGlja2VyLWYzNjhlOWEyLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtaW5wdXQtdGltZS1waWNrZXJfMi5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9jb21wb25lbnQtZjk0Y2FiNzIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vaW50ZXJhY3RpdmUtY2JkOGE2ZGMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vbGFiZWwtMWMyODVkNDEuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vbWF0aC05MjJlMzdlYy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9vcGVuQ2xvc2VDb21wb25lbnQtNDhkYjZkYWYuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vdDluLTBiY2RjYTU0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuZnVuY3Rpb24gZ2V0VXNlckFnZW50RGF0YSgpIHtcbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xufVxuZnVuY3Rpb24gZ2V0VXNlckFnZW50U3RyaW5nKCkge1xuICBjb25zdCB1YURhdGEgPSBnZXRVc2VyQWdlbnREYXRhKCk7XG4gIHJldHVybiB1YURhdGE/LmJyYW5kc1xuICAgID8gdWFEYXRhLmJyYW5kcy5tYXAoKHsgYnJhbmQsIHZlcnNpb24gfSkgPT4gYCR7YnJhbmR9LyR7dmVyc2lvbn1gKS5qb2luKFwiIFwiKVxuICAgIDogbmF2aWdhdG9yLnVzZXJBZ2VudDtcbn1cblxuZXhwb3J0IHsgZ2V0VXNlckFnZW50U3RyaW5nIGFzIGcgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1lY2UyOWRhNy5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcbmltcG9ydCB7IHMgYXMgc3VibWl0Rm9ybSwgYyBhcyBjb25uZWN0Rm9ybSwgZCBhcyBkaXNjb25uZWN0Rm9ybSwgSCBhcyBIaWRkZW5Gb3JtSW5wdXRTbG90IH0gZnJvbSAnLi9mb3JtLTQ4NzZjOWU1LmpzJztcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gJy4vZ3VpZC0yMWZlY2ZhNC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RJbnRlcmFjdGl2ZSwgZCBhcyBkaXNjb25uZWN0SW50ZXJhY3RpdmUsIHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS1jYmQ4YTZkYy5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlcktleXMgfSBmcm9tICcuL2tleS02MWY4MmRkYi5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMYWJlbCwgZCBhcyBkaXNjb25uZWN0TGFiZWwsIGcgYXMgZ2V0TGFiZWxUZXh0IH0gZnJvbSAnLi9sYWJlbC0xYzI4NWQ0MS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSwgcyBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBhIGFzIHNldENvbXBvbmVudExvYWRlZCB9IGZyb20gJy4vbG9hZGFibGUtYjE3Mzk2ZTAuanMnO1xuaW1wb3J0IHsgbiBhcyBudW1iZXJTdHJpbmdGb3JtYXR0ZXIsIGUgYXMgZ2V0RGF0ZVRpbWVGb3JtYXQsIGkgYXMgaXNWYWxpZE51bWJlciwgZiBhcyBnZXRTdXBwb3J0ZWROdW1iZXJpbmdTeXN0ZW0sIGcgYXMgZ2V0U3VwcG9ydGVkTG9jYWxlLCBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLTZlNzgzY2YwLmpzJztcbmltcG9ydCB7IGQgYXMgZGVhY3RpdmF0ZUZvY3VzVHJhcCwgYSBhcyBhY3RpdmF0ZUZvY3VzVHJhcCwgYyBhcyBjb25uZWN0Rm9jdXNUcmFwIH0gZnJvbSAnLi9mb2N1c1RyYXBDb21wb25lbnQtYWVlMTViNDEuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWNpbWFsUGxhY2VzLCBnIGFzIGdldERlY2ltYWxzIH0gZnJvbSAnLi9tYXRoLTkyMmUzN2VjLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdE1lc3NhZ2VzLCBzIGFzIHNldFVwTWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzLCB1IGFzIHVwZGF0ZU1lc3NhZ2VzIH0gZnJvbSAnLi90OW4tMGJjZGNhNTQuanMnO1xuaW1wb3J0IHsgbyBhcyBvblRvZ2dsZU9wZW5DbG9zZUNvbXBvbmVudCB9IGZyb20gJy4vb3BlbkNsb3NlQ29tcG9uZW50LTQ4ZGI2ZGFmLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0SWNvblNjYWxlIH0gZnJvbSAnLi9jb21wb25lbnQtZjk0Y2FiNzIuanMnO1xuXG5jb25zdCBtYXhUZW50aEZvck1pbnV0ZUFuZFNlY29uZCA9IDU7XG5mdW5jdGlvbiBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgaW5jbHVkZVNlY29uZHMgPSB0cnVlLCBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICB0aW1lWm9uZTogXCJVVENcIixcbiAgICBudW1iZXJpbmdTeXN0ZW06IGdldFN1cHBvcnRlZE51bWJlcmluZ1N5c3RlbShudW1iZXJpbmdTeXN0ZW0pLFxuICB9O1xuICBpZiAoaW5jbHVkZVNlY29uZHMpIHtcbiAgICBvcHRpb25zLnNlY29uZCA9IFwiMi1kaWdpdFwiO1xuICAgIGlmIChmcmFjdGlvbmFsU2Vjb25kRGlnaXRzKSB7XG4gICAgICBvcHRpb25zLmZyYWN0aW9uYWxTZWNvbmREaWdpdHMgPSBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2V0RGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFRpbWVQYXJ0KG51bWJlciwgbWluTGVuZ3RoKSB7XG4gIGlmIChudW1iZXIgPT09IG51bGwgfHwgbnVtYmVyID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbnVtYmVyQXNTdHJpbmcgPSBudW1iZXIudG9TdHJpbmcoKTtcbiAgY29uc3QgbnVtYmVyRGVjaW1hbFBsYWNlcyA9IGRlY2ltYWxQbGFjZXMobnVtYmVyKTtcbiAgaWYgKG51bWJlciA8IDEgJiYgbnVtYmVyRGVjaW1hbFBsYWNlcyA+IDAgJiYgbnVtYmVyRGVjaW1hbFBsYWNlcyA8IDQpIHtcbiAgICBjb25zdCBmcmFjdGlvbmFsRGlnaXRzID0gbnVtYmVyQXNTdHJpbmcucmVwbGFjZShcIjAuXCIsIFwiXCIpO1xuICAgIGlmICghbWluTGVuZ3RoIHx8IGZyYWN0aW9uYWxEaWdpdHMubGVuZ3RoID09PSBtaW5MZW5ndGgpIHtcbiAgICAgIHJldHVybiBmcmFjdGlvbmFsRGlnaXRzO1xuICAgIH1cbiAgICBpZiAoZnJhY3Rpb25hbERpZ2l0cy5sZW5ndGggPCBtaW5MZW5ndGgpIHtcbiAgICAgIHJldHVybiBmcmFjdGlvbmFsRGlnaXRzLnBhZEVuZChtaW5MZW5ndGgsIFwiMFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWN0aW9uYWxEaWdpdHM7XG4gIH1cbiAgaWYgKG51bWJlciA+PSAwICYmIG51bWJlciA8IDEwKSB7XG4gICAgcmV0dXJuIG51bWJlckFzU3RyaW5nLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgfVxuICBpZiAobnVtYmVyID49IDEwKSB7XG4gICAgcmV0dXJuIG51bWJlckFzU3RyaW5nO1xuICB9XG59XG5mdW5jdGlvbiBmb3JtYXRUaW1lU3RyaW5nKHZhbHVlKSB7XG4gIGlmICghaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgeyBob3VyLCBtaW51dGUsIHNlY29uZCwgZnJhY3Rpb25hbFNlY29uZCB9ID0gcGFyc2VUaW1lU3RyaW5nKHZhbHVlKTtcbiAgbGV0IGZvcm1hdHRlZFZhbHVlID0gYCR7Zm9ybWF0VGltZVBhcnQocGFyc2VJbnQoaG91cikpfToke2Zvcm1hdFRpbWVQYXJ0KHBhcnNlSW50KG1pbnV0ZSkpfWA7XG4gIGlmIChzZWNvbmQpIHtcbiAgICBmb3JtYXR0ZWRWYWx1ZSArPSBgOiR7Zm9ybWF0VGltZVBhcnQocGFyc2VJbnQoc2Vjb25kKSl9YDtcbiAgICBpZiAoZnJhY3Rpb25hbFNlY29uZCkge1xuICAgICAgZm9ybWF0dGVkVmFsdWUgKz0gYC4ke2ZyYWN0aW9uYWxTZWNvbmR9YDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlO1xufVxuZnVuY3Rpb24gZnJhY3Rpb25hbFNlY29uZFBhcnRUb01pbGxpc2Vjb25kcyhmcmFjdGlvbmFsU2Vjb25kUGFydCkge1xuICByZXR1cm4gcGFyc2VJbnQoKHBhcnNlRmxvYXQoYDAuJHtmcmFjdGlvbmFsU2Vjb25kUGFydH1gKSAvIDAuMDAxKS50b0ZpeGVkKDMpKTtcbn1cbmZ1bmN0aW9uIGdldExvY2FsZUhvdXJDeWNsZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSkge1xuICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdFRvUGFydHMobmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgMCwgMCwgMCkpKTtcbiAgcmV0dXJuIGdldExvY2FsaXplZFRpbWVQYXJ0KFwibWVyaWRpZW1cIiwgcGFydHMpID8gXCIxMlwiIDogXCIyNFwiO1xufVxuZnVuY3Rpb24gZ2V0TG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSkge1xuICBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcbiAgICBsb2NhbGUsXG4gICAgbnVtYmVyaW5nU3lzdGVtLFxuICB9O1xuICByZXR1cm4gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLmxvY2FsaXplKFwiMS4xXCIpLnNwbGl0KFwiXCIpWzFdO1xufVxuZnVuY3Rpb24gZ2V0TG9jYWxpemVkVGltZVBhcnRTdWZmaXgocGFydCwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gPSBcImxhdG5cIikge1xuICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdFRvUGFydHMobmV3IERhdGUoRGF0ZS5VVEMoMCwgMCwgMCwgMCwgMCwgMCkpKTtcbiAgcmV0dXJuIGdldExvY2FsaXplZFRpbWVQYXJ0KGAke3BhcnR9U3VmZml4YCwgcGFydHMpO1xufVxuZnVuY3Rpb24gZ2V0TG9jYWxpemVkVGltZVBhcnQocGFydCwgcGFydHMpIHtcbiAgaWYgKCFwYXJ0IHx8ICFwYXJ0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChwYXJ0ID09PSBcImhvdXJTdWZmaXhcIikge1xuICAgIGNvbnN0IGhvdXJJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwiaG91clwiKSk7XG4gICAgY29uc3QgbWludXRlSW5kZXggPSBwYXJ0cy5pbmRleE9mKHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiB0eXBlID09PSBcIm1pbnV0ZVwiKSk7XG4gICAgY29uc3QgaG91clN1ZmZpeCA9IHBhcnRzW2hvdXJJbmRleCArIDFdO1xuICAgIHJldHVybiBob3VyU3VmZml4ICYmIGhvdXJTdWZmaXgudHlwZSA9PT0gXCJsaXRlcmFsXCIgJiYgbWludXRlSW5kZXggLSBob3VySW5kZXggPT09IDJcbiAgICAgID8gaG91clN1ZmZpeC52YWx1ZT8udHJpbSgpIHx8IG51bGxcbiAgICAgIDogbnVsbDtcbiAgfVxuICBpZiAocGFydCA9PT0gXCJtaW51dGVTdWZmaXhcIikge1xuICAgIGNvbnN0IG1pbnV0ZUluZGV4ID0gcGFydHMuaW5kZXhPZihwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJtaW51dGVcIikpO1xuICAgIGNvbnN0IHNlY29uZEluZGV4ID0gcGFydHMuaW5kZXhPZihwYXJ0cy5maW5kKCh7IHR5cGUgfSkgPT4gdHlwZSA9PT0gXCJzZWNvbmRcIikpO1xuICAgIGNvbnN0IG1pbnV0ZVN1ZmZpeCA9IHBhcnRzW21pbnV0ZUluZGV4ICsgMV07XG4gICAgcmV0dXJuIG1pbnV0ZVN1ZmZpeCAmJiBtaW51dGVTdWZmaXgudHlwZSA9PT0gXCJsaXRlcmFsXCIgJiYgc2Vjb25kSW5kZXggLSBtaW51dGVJbmRleCA9PT0gMlxuICAgICAgPyBtaW51dGVTdWZmaXgudmFsdWU/LnRyaW0oKSB8fCBudWxsXG4gICAgICA6IG51bGw7XG4gIH1cbiAgaWYgKHBhcnQgPT09IFwic2Vjb25kU3VmZml4XCIpIHtcbiAgICBjb25zdCBzZWNvbmRJbmRleCA9IHBhcnRzLmluZGV4T2YocGFydHMuZmluZCgoeyB0eXBlIH0pID0+IHR5cGUgPT09IFwic2Vjb25kXCIpKTtcbiAgICBjb25zdCBzZWNvbmRTdWZmaXggPSBwYXJ0c1tzZWNvbmRJbmRleCArIDFdO1xuICAgIHJldHVybiBzZWNvbmRTdWZmaXggJiYgc2Vjb25kU3VmZml4LnR5cGUgPT09IFwibGl0ZXJhbFwiID8gc2Vjb25kU3VmZml4LnZhbHVlPy50cmltKCkgfHwgbnVsbCA6IG51bGw7XG4gIH1cbiAgcmV0dXJuIHBhcnRzLmZpbmQoKHsgdHlwZSB9KSA9PiAocGFydCA9PSBcIm1lcmlkaWVtXCIgPyB0eXBlID09PSBcImRheVBlcmlvZFwiIDogdHlwZSA9PT0gcGFydCkpPy52YWx1ZSB8fCBudWxsO1xufVxuZnVuY3Rpb24gZ2V0TWVyaWRpZW0oaG91cikge1xuICBpZiAoIWlzVmFsaWROdW1iZXIoaG91cikpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBob3VyQXNOdW1iZXIgPSBwYXJzZUludChob3VyKTtcbiAgcmV0dXJuIGhvdXJBc051bWJlciA+PSAwICYmIGhvdXJBc051bWJlciA8PSAxMSA/IFwiQU1cIiA6IFwiUE1cIjtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRUaW1lKHZhbHVlKSB7XG4gIGlmICghdmFsdWUgfHwgdmFsdWUuc3RhcnRzV2l0aChcIjpcIikgfHwgdmFsdWUuZW5kc1dpdGgoXCI6XCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNwbGl0VmFsdWUgPSB2YWx1ZS5zcGxpdChcIjpcIik7XG4gIGNvbnN0IHZhbGlkTGVuZ3RoID0gc3BsaXRWYWx1ZS5sZW5ndGggPiAxICYmIHNwbGl0VmFsdWUubGVuZ3RoIDwgNDtcbiAgaWYgKCF2YWxpZExlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBbaG91ciwgbWludXRlLCBzZWNvbmRdID0gc3BsaXRWYWx1ZTtcbiAgY29uc3QgaG91ckFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVswXSk7XG4gIGNvbnN0IG1pbnV0ZUFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVsxXSk7XG4gIGNvbnN0IHNlY29uZEFzTnVtYmVyID0gcGFyc2VJbnQoc3BsaXRWYWx1ZVsyXSk7XG4gIGNvbnN0IGhvdXJWYWxpZCA9IGlzVmFsaWROdW1iZXIoaG91cikgJiYgaG91ckFzTnVtYmVyID49IDAgJiYgaG91ckFzTnVtYmVyIDwgMjQ7XG4gIGNvbnN0IG1pbnV0ZVZhbGlkID0gaXNWYWxpZE51bWJlcihtaW51dGUpICYmIG1pbnV0ZUFzTnVtYmVyID49IDAgJiYgbWludXRlQXNOdW1iZXIgPCA2MDtcbiAgY29uc3Qgc2Vjb25kVmFsaWQgPSBpc1ZhbGlkTnVtYmVyKHNlY29uZCkgJiYgc2Vjb25kQXNOdW1iZXIgPj0gMCAmJiBzZWNvbmRBc051bWJlciA8IDYwO1xuICBpZiAoKGhvdXJWYWxpZCAmJiBtaW51dGVWYWxpZCAmJiAhc2Vjb25kKSB8fCAoaG91clZhbGlkICYmIG1pbnV0ZVZhbGlkICYmIHNlY29uZFZhbGlkKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkVGltZVBhcnQodmFsdWUsIHBhcnQpIHtcbiAgaWYgKHBhcnQgPT09IFwibWVyaWRpZW1cIikge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gXCJBTVwiIHx8IHZhbHVlID09PSBcIlBNXCI7XG4gIH1cbiAgaWYgKCFpc1ZhbGlkTnVtYmVyKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB2YWx1ZUFzTnVtYmVyID0gTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIHBhcnQgPT09IFwiaG91clwiID8gdmFsdWVBc051bWJlciA+PSAwICYmIHZhbHVlQXNOdW1iZXIgPCAyNCA6IHZhbHVlQXNOdW1iZXIgPj0gMCAmJiB2YWx1ZUFzTnVtYmVyIDwgNjA7XG59XG5mdW5jdGlvbiBsb2NhbGl6ZVRpbWVQYXJ0KHsgdmFsdWUsIHBhcnQsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pIHtcbiAgaWYgKHBhcnQgPT09IFwiZnJhY3Rpb25hbFNlY29uZFwiKSB7XG4gICAgY29uc3QgbG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvciA9IGdldExvY2FsaXplZERlY2ltYWxTZXBhcmF0b3IobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICAgIGxldCBsb2NhbGl6ZWRGcmFjdGlvbmFsU2Vjb25kID0gbnVsbDtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xuICAgICAgICBsb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSxcbiAgICAgIH07XG4gICAgICBjb25zdCBsb2NhbGl6ZWRaZXJvID0gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLmxvY2FsaXplKFwiMFwiKTtcbiAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkgPT09IDApIHtcbiAgICAgICAgbG9jYWxpemVkRnJhY3Rpb25hbFNlY29uZCA9IFwiXCIucGFkU3RhcnQodmFsdWUubGVuZ3RoLCBsb2NhbGl6ZWRaZXJvKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsb2NhbGl6ZWRGcmFjdGlvbmFsU2Vjb25kID0gbnVtYmVyU3RyaW5nRm9ybWF0dGVyXG4gICAgICAgICAgLmxvY2FsaXplKGAwLiR7dmFsdWV9YClcbiAgICAgICAgICAucmVwbGFjZShgJHtsb2NhbGl6ZWRaZXJvfSR7bG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvcn1gLCBcIlwiKTtcbiAgICAgICAgaWYgKGxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQubGVuZ3RoIDwgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgbG9jYWxpemVkRnJhY3Rpb25hbFNlY29uZCA9IGxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQucGFkRW5kKHZhbHVlLmxlbmd0aCwgbG9jYWxpemVkWmVybyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQ7XG4gIH1cbiAgaWYgKCFpc1ZhbGlkVGltZVBhcnQodmFsdWUsIHBhcnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHZhbHVlQXNOdW1iZXIgPSBwYXJzZUludCh2YWx1ZSk7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQygwLCAwLCAwLCBwYXJ0ID09PSBcImhvdXJcIiA/IHZhbHVlQXNOdW1iZXIgOiBwYXJ0ID09PSBcIm1lcmlkaWVtXCIgPyAodmFsdWUgPT09IFwiQU1cIiA/IDAgOiAxMikgOiAwLCBwYXJ0ID09PSBcIm1pbnV0ZVwiID8gdmFsdWVBc051bWJlciA6IDAsIHBhcnQgPT09IFwic2Vjb25kXCIgPyB2YWx1ZUFzTnVtYmVyIDogMCkpO1xuICBpZiAoIWRhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICBjb25zdCBwYXJ0cyA9IGZvcm1hdHRlci5mb3JtYXRUb1BhcnRzKGRhdGUpO1xuICByZXR1cm4gZ2V0TG9jYWxpemVkVGltZVBhcnQocGFydCwgcGFydHMpO1xufVxuZnVuY3Rpb24gbG9jYWxpemVUaW1lU3RyaW5nKHsgdmFsdWUsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBpbmNsdWRlU2Vjb25kcyA9IHRydWUsIGZyYWN0aW9uYWxTZWNvbmREaWdpdHMsIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gXCIwXCIsIGZyYWN0aW9uYWxTZWNvbmQgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGNvbnN0IGRhdGVGcm9tVGltZVN0cmluZyA9IG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIHBhcnNlSW50KGhvdXIpLCBwYXJzZUludChtaW51dGUpLCBwYXJzZUludChzZWNvbmQpLCBmcmFjdGlvbmFsU2Vjb25kICYmIGZyYWN0aW9uYWxTZWNvbmRQYXJ0VG9NaWxsaXNlY29uZHMoZnJhY3Rpb25hbFNlY29uZCkpKTtcbiAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGluY2x1ZGVTZWNvbmRzLCBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzKTtcbiAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoZGF0ZUZyb21UaW1lU3RyaW5nKSB8fCBudWxsO1xufVxuZnVuY3Rpb24gbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh7IHZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSA9IFwibGF0blwiLCB9KSB7XG4gIGlmICghaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgeyBob3VyLCBtaW51dGUsIHNlY29uZCA9IFwiMFwiLCBmcmFjdGlvbmFsU2Vjb25kIH0gPSBwYXJzZVRpbWVTdHJpbmcodmFsdWUpO1xuICBjb25zdCBkYXRlRnJvbVRpbWVTdHJpbmcgPSBuZXcgRGF0ZShEYXRlLlVUQygwLCAwLCAwLCBwYXJzZUludChob3VyKSwgcGFyc2VJbnQobWludXRlKSwgcGFyc2VJbnQoc2Vjb25kKSkpO1xuICBpZiAoZGF0ZUZyb21UaW1lU3RyaW5nKSB7XG4gICAgY29uc3QgZm9ybWF0dGVyID0gY3JlYXRlTG9jYWxlRGF0ZVRpbWVGb3JtYXR0ZXIobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0pO1xuICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdFRvUGFydHMoZGF0ZUZyb21UaW1lU3RyaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgbG9jYWxpemVkSG91cjogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJob3VyXCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZEhvdXJTdWZmaXg6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwiaG91clN1ZmZpeFwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWRNaW51dGU6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwibWludXRlXCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZE1pbnV0ZVN1ZmZpeDogZ2V0TG9jYWxpemVkVGltZVBhcnQoXCJtaW51dGVTdWZmaXhcIiwgcGFydHMpLFxuICAgICAgbG9jYWxpemVkU2Vjb25kOiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcInNlY29uZFwiLCBwYXJ0cyksXG4gICAgICBsb2NhbGl6ZWREZWNpbWFsU2VwYXJhdG9yOiBnZXRMb2NhbGl6ZWREZWNpbWFsU2VwYXJhdG9yKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtKSxcbiAgICAgIGxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQ6IGxvY2FsaXplVGltZVBhcnQoe1xuICAgICAgICB2YWx1ZTogZnJhY3Rpb25hbFNlY29uZCxcbiAgICAgICAgcGFydDogXCJmcmFjdGlvbmFsU2Vjb25kXCIsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgfSksXG4gICAgICBsb2NhbGl6ZWRTZWNvbmRTdWZmaXg6IGdldExvY2FsaXplZFRpbWVQYXJ0KFwic2Vjb25kU3VmZml4XCIsIHBhcnRzKSxcbiAgICAgIGxvY2FsaXplZE1lcmlkaWVtOiBnZXRMb2NhbGl6ZWRUaW1lUGFydChcIm1lcmlkaWVtXCIsIHBhcnRzKSxcbiAgICB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZ2V0VGltZVBhcnRzKHsgdmFsdWUsIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pIHtcbiAgaWYgKCFpc1ZhbGlkVGltZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kID0gXCIwXCIgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGNvbnN0IGRhdGVGcm9tVGltZVN0cmluZyA9IG5ldyBEYXRlKERhdGUuVVRDKDAsIDAsIDAsIHBhcnNlSW50KGhvdXIpLCBwYXJzZUludChtaW51dGUpLCBwYXJzZUludChzZWNvbmQpKSk7XG4gIGlmIChkYXRlRnJvbVRpbWVTdHJpbmcpIHtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVMb2NhbGVEYXRlVGltZUZvcm1hdHRlcihsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSk7XG4gICAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZXIuZm9ybWF0VG9QYXJ0cyhkYXRlRnJvbVRpbWVTdHJpbmcpO1xuICAgIHJldHVybiBwYXJ0cztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHBhcnNlVGltZVN0cmluZyh2YWx1ZSkge1xuICBpZiAoaXNWYWxpZFRpbWUodmFsdWUpKSB7XG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kRGVjaW1hbF0gPSB2YWx1ZS5zcGxpdChcIjpcIik7XG4gICAgbGV0IHNlY29uZCA9IHNlY29uZERlY2ltYWw7XG4gICAgbGV0IGZyYWN0aW9uYWxTZWNvbmQgPSBudWxsO1xuICAgIGlmIChzZWNvbmREZWNpbWFsPy5pbmNsdWRlcyhcIi5cIikpIHtcbiAgICAgIFtzZWNvbmQsIGZyYWN0aW9uYWxTZWNvbmRdID0gc2Vjb25kRGVjaW1hbC5zcGxpdChcIi5cIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBmcmFjdGlvbmFsU2Vjb25kLFxuICAgICAgaG91cixcbiAgICAgIG1pbnV0ZSxcbiAgICAgIHNlY29uZCxcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgZnJhY3Rpb25hbFNlY29uZDogbnVsbCxcbiAgICBob3VyOiBudWxsLFxuICAgIG1pbnV0ZTogbnVsbCxcbiAgICBzZWNvbmQ6IG51bGwsXG4gIH07XG59XG5mdW5jdGlvbiB0b0lTT1RpbWVTdHJpbmcodmFsdWUsIGluY2x1ZGVTZWNvbmRzID0gdHJ1ZSkge1xuICBpZiAoIWlzVmFsaWRUaW1lKHZhbHVlKSkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uYWxTZWNvbmQgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gIGxldCBpc29UaW1lU3RyaW5nID0gYCR7Zm9ybWF0VGltZVBhcnQocGFyc2VJbnQoaG91cikpfToke2Zvcm1hdFRpbWVQYXJ0KHBhcnNlSW50KG1pbnV0ZSkpfWA7XG4gIGlmIChpbmNsdWRlU2Vjb25kcykge1xuICAgIGlzb1RpbWVTdHJpbmcgKz0gYDoke2Zvcm1hdFRpbWVQYXJ0KHBhcnNlSW50KChpbmNsdWRlU2Vjb25kcyAmJiBzZWNvbmQpIHx8IFwiMFwiKSl9YDtcbiAgICBpZiAoZnJhY3Rpb25hbFNlY29uZCkge1xuICAgICAgaXNvVGltZVN0cmluZyArPSBgLiR7ZnJhY3Rpb25hbFNlY29uZH1gO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaXNvVGltZVN0cmluZztcbn1cblxuY29uc3QgQ1NTJDEgPSB7XG4gIHRvZ2dsZUljb246IFwidG9nZ2xlLWljb25cIixcbn07XG5cbnZhciBTRUNPTkRTX0FfTUlOVVRFID0gNjA7XG52YXIgU0VDT05EU19BX0hPVVIgPSBTRUNPTkRTX0FfTUlOVVRFICogNjA7XG52YXIgU0VDT05EU19BX0RBWSA9IFNFQ09ORFNfQV9IT1VSICogMjQ7XG52YXIgU0VDT05EU19BX1dFRUsgPSBTRUNPTkRTX0FfREFZICogNztcbnZhciBNSUxMSVNFQ09ORFNfQV9TRUNPTkQgPSAxZTM7XG52YXIgTUlMTElTRUNPTkRTX0FfTUlOVVRFID0gU0VDT05EU19BX01JTlVURSAqIE1JTExJU0VDT05EU19BX1NFQ09ORDtcbnZhciBNSUxMSVNFQ09ORFNfQV9IT1VSID0gU0VDT05EU19BX0hPVVIgKiBNSUxMSVNFQ09ORFNfQV9TRUNPTkQ7XG52YXIgTUlMTElTRUNPTkRTX0FfREFZID0gU0VDT05EU19BX0RBWSAqIE1JTExJU0VDT05EU19BX1NFQ09ORDtcbnZhciBNSUxMSVNFQ09ORFNfQV9XRUVLID0gU0VDT05EU19BX1dFRUsgKiBNSUxMSVNFQ09ORFNfQV9TRUNPTkQ7IC8vIEVuZ2xpc2ggbG9jYWxlc1xuXG52YXIgTVMgPSAnbWlsbGlzZWNvbmQnO1xudmFyIFMgPSAnc2Vjb25kJztcbnZhciBNSU4gPSAnbWludXRlJztcbnZhciBIID0gJ2hvdXInO1xudmFyIEQgPSAnZGF5JztcbnZhciBXID0gJ3dlZWsnO1xudmFyIE0gPSAnbW9udGgnO1xudmFyIFEgPSAncXVhcnRlcic7XG52YXIgWSA9ICd5ZWFyJztcbnZhciBEQVRFID0gJ2RhdGUnO1xudmFyIEZPUk1BVF9ERUZBVUxUID0gJ1lZWVktTU0tRERUSEg6bW06c3NaJztcbnZhciBJTlZBTElEX0RBVEVfU1RSSU5HID0gJ0ludmFsaWQgRGF0ZSc7IC8vIHJlZ2V4XG5cbnZhciBSRUdFWF9QQVJTRSA9IC9eKFxcZHs0fSlbLS9dPyhcXGR7MSwyfSk/Wy0vXT8oXFxkezAsMn0pW1R0XFxzXSooXFxkezEsMn0pPzo/KFxcZHsxLDJ9KT86PyhcXGR7MSwyfSk/Wy46XT8oXFxkKyk/JC87XG52YXIgUkVHRVhfRk9STUFUID0gL1xcWyhbXlxcXV0rKV18WXsxLDR9fE17MSw0fXxEezEsMn18ZHsxLDR9fEh7MSwyfXxoezEsMn18YXxBfG17MSwyfXxzezEsMn18WnsxLDJ9fFNTUy9nO1xuXG4vLyBFbmdsaXNoIFtlbl1cbi8vIFdlIGRvbid0IG5lZWQgd2Vla2RheXNTaG9ydCwgd2Vla2RheXNNaW4sIG1vbnRoc1Nob3J0IGluIGVuLmpzIGxvY2FsZVxuY29uc3QgZW4gPSB7XG4gIG5hbWU6ICdlbicsXG4gIHdlZWtkYXlzOiAnU3VuZGF5X01vbmRheV9UdWVzZGF5X1dlZG5lc2RheV9UaHVyc2RheV9GcmlkYXlfU2F0dXJkYXknLnNwbGl0KCdfJyksXG4gIG1vbnRoczogJ0phbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXInLnNwbGl0KCdfJyksXG4gIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobikge1xuICAgIHZhciBzID0gWyd0aCcsICdzdCcsICduZCcsICdyZCddO1xuICAgIHZhciB2ID0gbiAlIDEwMDtcbiAgICByZXR1cm4gXCJbXCIgKyBuICsgKHNbKHYgLSAyMCkgJSAxMF0gfHwgc1t2XSB8fCBzWzBdKSArIFwiXVwiO1xuICB9XG59O1xuXG5jb25zdCBlbiQxID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICBfX3Byb3RvX186IG51bGwsXG4gICdkZWZhdWx0JzogZW5cbn0pO1xuXG52YXIgcGFkU3RhcnQgPSBmdW5jdGlvbiBwYWRTdGFydChzdHJpbmcsIGxlbmd0aCwgcGFkKSB7XG4gIHZhciBzID0gU3RyaW5nKHN0cmluZyk7XG4gIGlmICghcyB8fCBzLmxlbmd0aCA+PSBsZW5ndGgpIHJldHVybiBzdHJpbmc7XG4gIHJldHVybiBcIlwiICsgQXJyYXkobGVuZ3RoICsgMSAtIHMubGVuZ3RoKS5qb2luKHBhZCkgKyBzdHJpbmc7XG59O1xuXG52YXIgcGFkWm9uZVN0ciA9IGZ1bmN0aW9uIHBhZFpvbmVTdHIoaW5zdGFuY2UpIHtcbiAgdmFyIG5lZ01pbnV0ZXMgPSAtaW5zdGFuY2UudXRjT2Zmc2V0KCk7XG4gIHZhciBtaW51dGVzID0gTWF0aC5hYnMobmVnTWludXRlcyk7XG4gIHZhciBob3VyT2Zmc2V0ID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICB2YXIgbWludXRlT2Zmc2V0ID0gbWludXRlcyAlIDYwO1xuICByZXR1cm4gXCJcIiArIChuZWdNaW51dGVzIDw9IDAgPyAnKycgOiAnLScpICsgcGFkU3RhcnQoaG91ck9mZnNldCwgMiwgJzAnKSArIFwiOlwiICsgcGFkU3RhcnQobWludXRlT2Zmc2V0LCAyLCAnMCcpO1xufTtcblxudmFyIG1vbnRoRGlmZiA9IGZ1bmN0aW9uIG1vbnRoRGlmZihhLCBiKSB7XG4gIC8vIGZ1bmN0aW9uIGZyb20gbW9tZW50LmpzIGluIG9yZGVyIHRvIGtlZXAgdGhlIHNhbWUgcmVzdWx0XG4gIGlmIChhLmRhdGUoKSA8IGIuZGF0ZSgpKSByZXR1cm4gLW1vbnRoRGlmZihiLCBhKTtcbiAgdmFyIHdob2xlTW9udGhEaWZmID0gKGIueWVhcigpIC0gYS55ZWFyKCkpICogMTIgKyAoYi5tb250aCgpIC0gYS5tb250aCgpKTtcbiAgdmFyIGFuY2hvciA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYsIE0pO1xuICB2YXIgYyA9IGIgLSBhbmNob3IgPCAwO1xuICB2YXIgYW5jaG9yMiA9IGEuY2xvbmUoKS5hZGQod2hvbGVNb250aERpZmYgKyAoYyA/IC0xIDogMSksIE0pO1xuICByZXR1cm4gKygtKHdob2xlTW9udGhEaWZmICsgKGIgLSBhbmNob3IpIC8gKGMgPyBhbmNob3IgLSBhbmNob3IyIDogYW5jaG9yMiAtIGFuY2hvcikpIHx8IDApO1xufTtcblxudmFyIGFic0Zsb29yID0gZnVuY3Rpb24gYWJzRmxvb3Iobikge1xuICByZXR1cm4gbiA8IDAgPyBNYXRoLmNlaWwobikgfHwgMCA6IE1hdGguZmxvb3Iobik7XG59O1xuXG52YXIgcHJldHR5VW5pdCA9IGZ1bmN0aW9uIHByZXR0eVVuaXQodSkge1xuICB2YXIgc3BlY2lhbCA9IHtcbiAgICBNOiBNLFxuICAgIHk6IFksXG4gICAgdzogVyxcbiAgICBkOiBELFxuICAgIEQ6IERBVEUsXG4gICAgaDogSCxcbiAgICBtOiBNSU4sXG4gICAgczogUyxcbiAgICBtczogTVMsXG4gICAgUTogUVxuICB9O1xuICByZXR1cm4gc3BlY2lhbFt1XSB8fCBTdHJpbmcodSB8fCAnJykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9zJC8sICcnKTtcbn07XG5cbnZhciBpc1VuZGVmaW5lZCA9IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHMpIHtcbiAgcmV0dXJuIHMgPT09IHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IFUgPSB7XG4gIHM6IHBhZFN0YXJ0LFxuICB6OiBwYWRab25lU3RyLFxuICBtOiBtb250aERpZmYsXG4gIGE6IGFic0Zsb29yLFxuICBwOiBwcmV0dHlVbml0LFxuICB1OiBpc1VuZGVmaW5lZFxufTtcblxudmFyIEwgPSAnZW4nOyAvLyBnbG9iYWwgbG9jYWxlXG5cbnZhciBMcyA9IHt9OyAvLyBnbG9iYWwgbG9hZGVkIGxvY2FsZVxuXG5Mc1tMXSA9IGVuO1xudmFyIElTX0RBWUpTID0gJyRpc0RheWpzT2JqZWN0JzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lXG5cbnZhciBpc0RheWpzID0gZnVuY3Rpb24gaXNEYXlqcyhkKSB7XG4gIHJldHVybiBkIGluc3RhbmNlb2YgRGF5anMgfHwgISEoZCAmJiBkW0lTX0RBWUpTXSk7XG59O1xuXG52YXIgcGFyc2VMb2NhbGUgPSBmdW5jdGlvbiBwYXJzZUxvY2FsZShwcmVzZXQsIG9iamVjdCwgaXNMb2NhbCkge1xuICB2YXIgbDtcbiAgaWYgKCFwcmVzZXQpIHJldHVybiBMO1xuXG4gIGlmICh0eXBlb2YgcHJlc2V0ID09PSAnc3RyaW5nJykge1xuICAgIHZhciBwcmVzZXRMb3dlciA9IHByZXNldC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKExzW3ByZXNldExvd2VyXSkge1xuICAgICAgbCA9IHByZXNldExvd2VyO1xuICAgIH1cblxuICAgIGlmIChvYmplY3QpIHtcbiAgICAgIExzW3ByZXNldExvd2VyXSA9IG9iamVjdDtcbiAgICAgIGwgPSBwcmVzZXRMb3dlcjtcbiAgICB9XG5cbiAgICB2YXIgcHJlc2V0U3BsaXQgPSBwcmVzZXQuc3BsaXQoJy0nKTtcblxuICAgIGlmICghbCAmJiBwcmVzZXRTcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gcGFyc2VMb2NhbGUocHJlc2V0U3BsaXRbMF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgbmFtZSA9IHByZXNldC5uYW1lO1xuICAgIExzW25hbWVdID0gcHJlc2V0O1xuICAgIGwgPSBuYW1lO1xuICB9XG5cbiAgaWYgKCFpc0xvY2FsICYmIGwpIEwgPSBsO1xuICByZXR1cm4gbCB8fCAhaXNMb2NhbCAmJiBMO1xufTtcblxudmFyIGRheWpzID0gZnVuY3Rpb24gZGF5anMoZGF0ZSwgYykge1xuICBpZiAoaXNEYXlqcyhkYXRlKSkge1xuICAgIHJldHVybiBkYXRlLmNsb25lKCk7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cblxuICB2YXIgY2ZnID0gdHlwZW9mIGMgPT09ICdvYmplY3QnID8gYyA6IHt9O1xuICBjZmcuZGF0ZSA9IGRhdGU7XG4gIGNmZy5hcmdzID0gYXJndW1lbnRzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuXG4gIHJldHVybiBuZXcgRGF5anMoY2ZnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxufTtcblxudmFyIHdyYXBwZXIgPSBmdW5jdGlvbiB3cmFwcGVyKGRhdGUsIGluc3RhbmNlKSB7XG4gIHJldHVybiBkYXlqcyhkYXRlLCB7XG4gICAgbG9jYWxlOiBpbnN0YW5jZS4kTCxcbiAgICB1dGM6IGluc3RhbmNlLiR1LFxuICAgIHg6IGluc3RhbmNlLiR4LFxuICAgICRvZmZzZXQ6IGluc3RhbmNlLiRvZmZzZXQgLy8gdG9kbzogcmVmYWN0b3I7IGRvIG5vdCB1c2UgdGhpcy4kb2Zmc2V0IGluIHlvdSBjb2RlXG5cbiAgfSk7XG59O1xuXG52YXIgVXRpbHMgPSBVOyAvLyBmb3IgcGx1Z2luIHVzZVxuXG5VdGlscy5sID0gcGFyc2VMb2NhbGU7XG5VdGlscy5pID0gaXNEYXlqcztcblV0aWxzLncgPSB3cmFwcGVyO1xuXG52YXIgcGFyc2VEYXRlID0gZnVuY3Rpb24gcGFyc2VEYXRlKGNmZykge1xuICB2YXIgZGF0ZSA9IGNmZy5kYXRlLFxuICAgICAgdXRjID0gY2ZnLnV0YztcbiAgaWYgKGRhdGUgPT09IG51bGwpIHJldHVybiBuZXcgRGF0ZShOYU4pOyAvLyBudWxsIGlzIGludmFsaWRcblxuICBpZiAoVXRpbHMudShkYXRlKSkgcmV0dXJuIG5ldyBEYXRlKCk7IC8vIHRvZGF5XG5cbiAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gbmV3IERhdGUoZGF0ZSk7XG5cbiAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJyAmJiAhL1okL2kudGVzdChkYXRlKSkge1xuICAgIHZhciBkID0gZGF0ZS5tYXRjaChSRUdFWF9QQVJTRSk7XG5cbiAgICBpZiAoZCkge1xuICAgICAgdmFyIG0gPSBkWzJdIC0gMSB8fCAwO1xuICAgICAgdmFyIG1zID0gKGRbN10gfHwgJzAnKS5zdWJzdHJpbmcoMCwgMyk7XG5cbiAgICAgIGlmICh1dGMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKGRbMV0sIG0sIGRbM10gfHwgMSwgZFs0XSB8fCAwLCBkWzVdIHx8IDAsIGRbNl0gfHwgMCwgbXMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRbMV0sIG0sIGRbM10gfHwgMSwgZFs0XSB8fCAwLCBkWzVdIHx8IDAsIGRbNl0gfHwgMCwgbXMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZShkYXRlKTsgLy8gZXZlcnl0aGluZyBlbHNlXG59O1xuXG52YXIgRGF5anMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEYXlqcyhjZmcpIHtcbiAgICB0aGlzLiRMID0gcGFyc2VMb2NhbGUoY2ZnLmxvY2FsZSwgbnVsbCwgdHJ1ZSk7XG4gICAgdGhpcy5wYXJzZShjZmcpOyAvLyBmb3IgcGx1Z2luXG5cbiAgICB0aGlzLiR4ID0gdGhpcy4keCB8fCBjZmcueCB8fCB7fTtcbiAgICB0aGlzW0lTX0RBWUpTXSA9IHRydWU7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gRGF5anMucHJvdG90eXBlO1xuXG4gIF9wcm90by5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKGNmZykge1xuICAgIHRoaXMuJGQgPSBwYXJzZURhdGUoY2ZnKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcblxuICBfcHJvdG8uaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyICRkID0gdGhpcy4kZDtcbiAgICB0aGlzLiR5ID0gJGQuZ2V0RnVsbFllYXIoKTtcbiAgICB0aGlzLiRNID0gJGQuZ2V0TW9udGgoKTtcbiAgICB0aGlzLiREID0gJGQuZ2V0RGF0ZSgpO1xuICAgIHRoaXMuJFcgPSAkZC5nZXREYXkoKTtcbiAgICB0aGlzLiRIID0gJGQuZ2V0SG91cnMoKTtcbiAgICB0aGlzLiRtID0gJGQuZ2V0TWludXRlcygpO1xuICAgIHRoaXMuJHMgPSAkZC5nZXRTZWNvbmRzKCk7XG4gICAgdGhpcy4kbXMgPSAkZC5nZXRNaWxsaXNlY29uZHMoKTtcbiAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICA7XG5cbiAgX3Byb3RvLiR1dGlscyA9IGZ1bmN0aW9uICR1dGlscygpIHtcbiAgICByZXR1cm4gVXRpbHM7XG4gIH07XG5cbiAgX3Byb3RvLmlzVmFsaWQgPSBmdW5jdGlvbiBpc1ZhbGlkKCkge1xuICAgIHJldHVybiAhKHRoaXMuJGQudG9TdHJpbmcoKSA9PT0gSU5WQUxJRF9EQVRFX1NUUklORyk7XG4gIH07XG5cbiAgX3Byb3RvLmlzU2FtZSA9IGZ1bmN0aW9uIGlzU2FtZSh0aGF0LCB1bml0cykge1xuICAgIHZhciBvdGhlciA9IGRheWpzKHRoYXQpO1xuICAgIHJldHVybiB0aGlzLnN0YXJ0T2YodW5pdHMpIDw9IG90aGVyICYmIG90aGVyIDw9IHRoaXMuZW5kT2YodW5pdHMpO1xuICB9O1xuXG4gIF9wcm90by5pc0FmdGVyID0gZnVuY3Rpb24gaXNBZnRlcih0aGF0LCB1bml0cykge1xuICAgIHJldHVybiBkYXlqcyh0aGF0KSA8IHRoaXMuc3RhcnRPZih1bml0cyk7XG4gIH07XG5cbiAgX3Byb3RvLmlzQmVmb3JlID0gZnVuY3Rpb24gaXNCZWZvcmUodGhhdCwgdW5pdHMpIHtcbiAgICByZXR1cm4gdGhpcy5lbmRPZih1bml0cykgPCBkYXlqcyh0aGF0KTtcbiAgfTtcblxuICBfcHJvdG8uJGcgPSBmdW5jdGlvbiAkZyhpbnB1dCwgZ2V0LCBzZXQpIHtcbiAgICBpZiAoVXRpbHMudShpbnB1dCkpIHJldHVybiB0aGlzW2dldF07XG4gICAgcmV0dXJuIHRoaXMuc2V0KHNldCwgaW5wdXQpO1xuICB9O1xuXG4gIF9wcm90by51bml4ID0gZnVuY3Rpb24gdW5peCgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnZhbHVlT2YoKSAvIDEwMDApO1xuICB9O1xuXG4gIF9wcm90by52YWx1ZU9mID0gZnVuY3Rpb24gdmFsdWVPZigpIHtcbiAgICAvLyB0aW1lem9uZShob3VyKSAqIDYwICogNjAgKiAxMDAwID0+IG1zXG4gICAgcmV0dXJuIHRoaXMuJGQuZ2V0VGltZSgpO1xuICB9O1xuXG4gIF9wcm90by5zdGFydE9mID0gZnVuY3Rpb24gc3RhcnRPZih1bml0cywgX3N0YXJ0T2YpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgLy8gc3RhcnRPZiAtPiBlbmRPZlxuICAgIHZhciBpc1N0YXJ0T2YgPSAhVXRpbHMudShfc3RhcnRPZikgPyBfc3RhcnRPZiA6IHRydWU7XG4gICAgdmFyIHVuaXQgPSBVdGlscy5wKHVuaXRzKTtcblxuICAgIHZhciBpbnN0YW5jZUZhY3RvcnkgPSBmdW5jdGlvbiBpbnN0YW5jZUZhY3RvcnkoZCwgbSkge1xuICAgICAgdmFyIGlucyA9IFV0aWxzLncoX3RoaXMuJHUgPyBEYXRlLlVUQyhfdGhpcy4keSwgbSwgZCkgOiBuZXcgRGF0ZShfdGhpcy4keSwgbSwgZCksIF90aGlzKTtcbiAgICAgIHJldHVybiBpc1N0YXJ0T2YgPyBpbnMgOiBpbnMuZW5kT2YoRCk7XG4gICAgfTtcblxuICAgIHZhciBpbnN0YW5jZUZhY3RvcnlTZXQgPSBmdW5jdGlvbiBpbnN0YW5jZUZhY3RvcnlTZXQobWV0aG9kLCBzbGljZSkge1xuICAgICAgdmFyIGFyZ3VtZW50U3RhcnQgPSBbMCwgMCwgMCwgMF07XG4gICAgICB2YXIgYXJndW1lbnRFbmQgPSBbMjMsIDU5LCA1OSwgOTk5XTtcbiAgICAgIHJldHVybiBVdGlscy53KF90aGlzLnRvRGF0ZSgpW21ldGhvZF0uYXBwbHkoIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLXNwcmVhZFxuICAgICAgX3RoaXMudG9EYXRlKCdzJyksIChpc1N0YXJ0T2YgPyBhcmd1bWVudFN0YXJ0IDogYXJndW1lbnRFbmQpLnNsaWNlKHNsaWNlKSksIF90aGlzKTtcbiAgICB9O1xuXG4gICAgdmFyICRXID0gdGhpcy4kVyxcbiAgICAgICAgJE0gPSB0aGlzLiRNLFxuICAgICAgICAkRCA9IHRoaXMuJEQ7XG4gICAgdmFyIHV0Y1BhZCA9IFwic2V0XCIgKyAodGhpcy4kdSA/ICdVVEMnIDogJycpO1xuXG4gICAgc3dpdGNoICh1bml0KSB7XG4gICAgICBjYXNlIFk6XG4gICAgICAgIHJldHVybiBpc1N0YXJ0T2YgPyBpbnN0YW5jZUZhY3RvcnkoMSwgMCkgOiBpbnN0YW5jZUZhY3RvcnkoMzEsIDExKTtcblxuICAgICAgY2FzZSBNOlxuICAgICAgICByZXR1cm4gaXNTdGFydE9mID8gaW5zdGFuY2VGYWN0b3J5KDEsICRNKSA6IGluc3RhbmNlRmFjdG9yeSgwLCAkTSArIDEpO1xuXG4gICAgICBjYXNlIFc6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgd2Vla1N0YXJ0ID0gdGhpcy4kbG9jYWxlKCkud2Vla1N0YXJ0IHx8IDA7XG4gICAgICAgICAgdmFyIGdhcCA9ICgkVyA8IHdlZWtTdGFydCA/ICRXICsgNyA6ICRXKSAtIHdlZWtTdGFydDtcbiAgICAgICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5KGlzU3RhcnRPZiA/ICREIC0gZ2FwIDogJEQgKyAoNiAtIGdhcCksICRNKTtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIEQ6XG4gICAgICBjYXNlIERBVEU6XG4gICAgICAgIHJldHVybiBpbnN0YW5jZUZhY3RvcnlTZXQodXRjUGFkICsgXCJIb3Vyc1wiLCAwKTtcblxuICAgICAgY2FzZSBIOlxuICAgICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KHV0Y1BhZCArIFwiTWludXRlc1wiLCAxKTtcblxuICAgICAgY2FzZSBNSU46XG4gICAgICAgIHJldHVybiBpbnN0YW5jZUZhY3RvcnlTZXQodXRjUGFkICsgXCJTZWNvbmRzXCIsIDIpO1xuXG4gICAgICBjYXNlIFM6XG4gICAgICAgIHJldHVybiBpbnN0YW5jZUZhY3RvcnlTZXQodXRjUGFkICsgXCJNaWxsaXNlY29uZHNcIiwgMyk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5lbmRPZiA9IGZ1bmN0aW9uIGVuZE9mKGFyZykge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0T2YoYXJnLCBmYWxzZSk7XG4gIH07XG5cbiAgX3Byb3RvLiRzZXQgPSBmdW5jdGlvbiAkc2V0KHVuaXRzLCBfaW50KSB7XG4gICAgdmFyIF9DJEQkQyREQVRFJEMkTSRDJFkkQztcblxuICAgIC8vIHByaXZhdGUgc2V0XG4gICAgdmFyIHVuaXQgPSBVdGlscy5wKHVuaXRzKTtcbiAgICB2YXIgdXRjUGFkID0gXCJzZXRcIiArICh0aGlzLiR1ID8gJ1VUQycgOiAnJyk7XG4gICAgdmFyIG5hbWUgPSAoX0MkRCRDJERBVEUkQyRNJEMkWSRDID0ge30sIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tEXSA9IHV0Y1BhZCArIFwiRGF0ZVwiLCBfQyREJEMkREFURSRDJE0kQyRZJENbREFURV0gPSB1dGNQYWQgKyBcIkRhdGVcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDW01dID0gdXRjUGFkICsgXCJNb250aFwiLCBfQyREJEMkREFURSRDJE0kQyRZJENbWV0gPSB1dGNQYWQgKyBcIkZ1bGxZZWFyXCIsIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tIXSA9IHV0Y1BhZCArIFwiSG91cnNcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDW01JTl0gPSB1dGNQYWQgKyBcIk1pbnV0ZXNcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDW1NdID0gdXRjUGFkICsgXCJTZWNvbmRzXCIsIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tNU10gPSB1dGNQYWQgKyBcIk1pbGxpc2Vjb25kc1wiLCBfQyREJEMkREFURSRDJE0kQyRZJEMpW3VuaXRdO1xuICAgIHZhciBhcmcgPSB1bml0ID09PSBEID8gdGhpcy4kRCArIChfaW50IC0gdGhpcy4kVykgOiBfaW50O1xuXG4gICAgaWYgKHVuaXQgPT09IE0gfHwgdW5pdCA9PT0gWSkge1xuICAgICAgLy8gY2xvbmUgaXMgZm9yIGJhZE11dGFibGUgcGx1Z2luXG4gICAgICB2YXIgZGF0ZSA9IHRoaXMuY2xvbmUoKS5zZXQoREFURSwgMSk7XG4gICAgICBkYXRlLiRkW25hbWVdKGFyZyk7XG4gICAgICBkYXRlLmluaXQoKTtcbiAgICAgIHRoaXMuJGQgPSBkYXRlLnNldChEQVRFLCBNYXRoLm1pbih0aGlzLiRELCBkYXRlLmRheXNJbk1vbnRoKCkpKS4kZDtcbiAgICB9IGVsc2UgaWYgKG5hbWUpIHRoaXMuJGRbbmFtZV0oYXJnKTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIF9wcm90by5zZXQgPSBmdW5jdGlvbiBzZXQoc3RyaW5nLCBfaW50Mikge1xuICAgIHJldHVybiB0aGlzLmNsb25lKCkuJHNldChzdHJpbmcsIF9pbnQyKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0ID0gZnVuY3Rpb24gZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1tVdGlscy5wKHVuaXQpXSgpO1xuICB9O1xuXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQobnVtYmVyLCB1bml0cykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzLFxuICAgICAgICBfQyRNSU4kQyRIJEMkUyR1bml0O1xuXG4gICAgbnVtYmVyID0gTnVtYmVyKG51bWJlcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblxuICAgIHZhciB1bml0ID0gVXRpbHMucCh1bml0cyk7XG5cbiAgICB2YXIgaW5zdGFuY2VGYWN0b3J5U2V0ID0gZnVuY3Rpb24gaW5zdGFuY2VGYWN0b3J5U2V0KG4pIHtcbiAgICAgIHZhciBkID0gZGF5anMoX3RoaXMyKTtcbiAgICAgIHJldHVybiBVdGlscy53KGQuZGF0ZShkLmRhdGUoKSArIE1hdGgucm91bmQobiAqIG51bWJlcikpLCBfdGhpczIpO1xuICAgIH07XG5cbiAgICBpZiAodW5pdCA9PT0gTSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KE0sIHRoaXMuJE0gKyBudW1iZXIpO1xuICAgIH1cblxuICAgIGlmICh1bml0ID09PSBZKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoWSwgdGhpcy4keSArIG51bWJlcik7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQgPT09IEQpIHtcbiAgICAgIHJldHVybiBpbnN0YW5jZUZhY3RvcnlTZXQoMSk7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQgPT09IFcpIHtcbiAgICAgIHJldHVybiBpbnN0YW5jZUZhY3RvcnlTZXQoNyk7XG4gICAgfVxuXG4gICAgdmFyIHN0ZXAgPSAoX0MkTUlOJEMkSCRDJFMkdW5pdCA9IHt9LCBfQyRNSU4kQyRIJEMkUyR1bml0W01JTl0gPSBNSUxMSVNFQ09ORFNfQV9NSU5VVEUsIF9DJE1JTiRDJEgkQyRTJHVuaXRbSF0gPSBNSUxMSVNFQ09ORFNfQV9IT1VSLCBfQyRNSU4kQyRIJEMkUyR1bml0W1NdID0gTUlMTElTRUNPTkRTX0FfU0VDT05ELCBfQyRNSU4kQyRIJEMkUyR1bml0KVt1bml0XSB8fCAxOyAvLyBtc1xuXG4gICAgdmFyIG5leHRUaW1lU3RhbXAgPSB0aGlzLiRkLmdldFRpbWUoKSArIG51bWJlciAqIHN0ZXA7XG4gICAgcmV0dXJuIFV0aWxzLncobmV4dFRpbWVTdGFtcCwgdGhpcyk7XG4gIH07XG5cbiAgX3Byb3RvLnN1YnRyYWN0ID0gZnVuY3Rpb24gc3VidHJhY3QobnVtYmVyLCBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5hZGQobnVtYmVyICogLTEsIHN0cmluZyk7XG4gIH07XG5cbiAgX3Byb3RvLmZvcm1hdCA9IGZ1bmN0aW9uIGZvcm1hdChmb3JtYXRTdHIpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBsb2NhbGUgPSB0aGlzLiRsb2NhbGUoKTtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSByZXR1cm4gbG9jYWxlLmludmFsaWREYXRlIHx8IElOVkFMSURfREFURV9TVFJJTkc7XG4gICAgdmFyIHN0ciA9IGZvcm1hdFN0ciB8fCBGT1JNQVRfREVGQVVMVDtcbiAgICB2YXIgem9uZVN0ciA9IFV0aWxzLnoodGhpcyk7XG4gICAgdmFyICRIID0gdGhpcy4kSCxcbiAgICAgICAgJG0gPSB0aGlzLiRtLFxuICAgICAgICAkTSA9IHRoaXMuJE07XG4gICAgdmFyIHdlZWtkYXlzID0gbG9jYWxlLndlZWtkYXlzLFxuICAgICAgICBtb250aHMgPSBsb2NhbGUubW9udGhzLFxuICAgICAgICBtZXJpZGllbSA9IGxvY2FsZS5tZXJpZGllbTtcblxuICAgIHZhciBnZXRTaG9ydCA9IGZ1bmN0aW9uIGdldFNob3J0KGFyciwgaW5kZXgsIGZ1bGwsIGxlbmd0aCkge1xuICAgICAgcmV0dXJuIGFyciAmJiAoYXJyW2luZGV4XSB8fCBhcnIoX3RoaXMzLCBzdHIpKSB8fCBmdWxsW2luZGV4XS5zbGljZSgwLCBsZW5ndGgpO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0JEggPSBmdW5jdGlvbiBnZXQkSChudW0pIHtcbiAgICAgIHJldHVybiBVdGlscy5zKCRIICUgMTIgfHwgMTIsIG51bSwgJzAnKTtcbiAgICB9O1xuXG4gICAgdmFyIG1lcmlkaWVtRnVuYyA9IG1lcmlkaWVtIHx8IGZ1bmN0aW9uIChob3VyLCBtaW51dGUsIGlzTG93ZXJjYXNlKSB7XG4gICAgICB2YXIgbSA9IGhvdXIgPCAxMiA/ICdBTScgOiAnUE0nO1xuICAgICAgcmV0dXJuIGlzTG93ZXJjYXNlID8gbS50b0xvd2VyQ2FzZSgpIDogbTtcbiAgICB9O1xuXG4gICAgdmFyIG1hdGNoZXMgPSBmdW5jdGlvbiBtYXRjaGVzKG1hdGNoKSB7XG4gICAgICBzd2l0Y2ggKG1hdGNoKSB7XG4gICAgICAgIGNhc2UgJ1lZJzpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKF90aGlzMy4keSkuc2xpY2UoLTIpO1xuXG4gICAgICAgIGNhc2UgJ1lZWVknOlxuICAgICAgICAgIHJldHVybiBVdGlscy5zKF90aGlzMy4keSwgNCwgJzAnKTtcblxuICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgICByZXR1cm4gJE0gKyAxO1xuXG4gICAgICAgIGNhc2UgJ01NJzpcbiAgICAgICAgICByZXR1cm4gVXRpbHMucygkTSArIDEsIDIsICcwJyk7XG5cbiAgICAgICAgY2FzZSAnTU1NJzpcbiAgICAgICAgICByZXR1cm4gZ2V0U2hvcnQobG9jYWxlLm1vbnRoc1Nob3J0LCAkTSwgbW9udGhzLCAzKTtcblxuICAgICAgICBjYXNlICdNTU1NJzpcbiAgICAgICAgICByZXR1cm4gZ2V0U2hvcnQobW9udGhzLCAkTSk7XG5cbiAgICAgICAgY2FzZSAnRCc6XG4gICAgICAgICAgcmV0dXJuIF90aGlzMy4kRDtcblxuICAgICAgICBjYXNlICdERCc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoX3RoaXMzLiRELCAyLCAnMCcpO1xuXG4gICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgIHJldHVybiBTdHJpbmcoX3RoaXMzLiRXKTtcblxuICAgICAgICBjYXNlICdkZCc6XG4gICAgICAgICAgcmV0dXJuIGdldFNob3J0KGxvY2FsZS53ZWVrZGF5c01pbiwgX3RoaXMzLiRXLCB3ZWVrZGF5cywgMik7XG5cbiAgICAgICAgY2FzZSAnZGRkJzpcbiAgICAgICAgICByZXR1cm4gZ2V0U2hvcnQobG9jYWxlLndlZWtkYXlzU2hvcnQsIF90aGlzMy4kVywgd2Vla2RheXMsIDMpO1xuXG4gICAgICAgIGNhc2UgJ2RkZGQnOlxuICAgICAgICAgIHJldHVybiB3ZWVrZGF5c1tfdGhpczMuJFddO1xuXG4gICAgICAgIGNhc2UgJ0gnOlxuICAgICAgICAgIHJldHVybiBTdHJpbmcoJEgpO1xuXG4gICAgICAgIGNhc2UgJ0hIJzpcbiAgICAgICAgICByZXR1cm4gVXRpbHMucygkSCwgMiwgJzAnKTtcblxuICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICByZXR1cm4gZ2V0JEgoMSk7XG5cbiAgICAgICAgY2FzZSAnaGgnOlxuICAgICAgICAgIHJldHVybiBnZXQkSCgyKTtcblxuICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICByZXR1cm4gbWVyaWRpZW1GdW5jKCRILCAkbSwgdHJ1ZSk7XG5cbiAgICAgICAgY2FzZSAnQSc6XG4gICAgICAgICAgcmV0dXJuIG1lcmlkaWVtRnVuYygkSCwgJG0sIGZhbHNlKTtcblxuICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKCRtKTtcblxuICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoJG0sIDIsICcwJyk7XG5cbiAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgcmV0dXJuIFN0cmluZyhfdGhpczMuJHMpO1xuXG4gICAgICAgIGNhc2UgJ3NzJzpcbiAgICAgICAgICByZXR1cm4gVXRpbHMucyhfdGhpczMuJHMsIDIsICcwJyk7XG5cbiAgICAgICAgY2FzZSAnU1NTJzpcbiAgICAgICAgICByZXR1cm4gVXRpbHMucyhfdGhpczMuJG1zLCAzLCAnMCcpO1xuXG4gICAgICAgIGNhc2UgJ1onOlxuICAgICAgICAgIHJldHVybiB6b25lU3RyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKFJFR0VYX0ZPUk1BVCwgZnVuY3Rpb24gKG1hdGNoLCAkMSkge1xuICAgICAgcmV0dXJuICQxIHx8IG1hdGNoZXMobWF0Y2gpIHx8IHpvbmVTdHIucmVwbGFjZSgnOicsICcnKTtcbiAgICB9KTsgLy8gJ1paJ1xuICB9O1xuXG4gIF9wcm90by51dGNPZmZzZXQgPSBmdW5jdGlvbiB1dGNPZmZzZXQoKSB7XG4gICAgLy8gQmVjYXVzZSBhIGJ1ZyBhdCBGRjI0LCB3ZSdyZSByb3VuZGluZyB0aGUgdGltZXpvbmUgb2Zmc2V0IGFyb3VuZCAxNSBtaW51dGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvcHVsbC8xODcxXG4gICAgcmV0dXJuIC1NYXRoLnJvdW5kKHRoaXMuJGQuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDE1KSAqIDE1O1xuICB9O1xuXG4gIF9wcm90by5kaWZmID0gZnVuY3Rpb24gZGlmZihpbnB1dCwgdW5pdHMsIF9mbG9hdCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgdmFyIHVuaXQgPSBVdGlscy5wKHVuaXRzKTtcbiAgICB2YXIgdGhhdCA9IGRheWpzKGlucHV0KTtcbiAgICB2YXIgem9uZURlbHRhID0gKHRoYXQudXRjT2Zmc2V0KCkgLSB0aGlzLnV0Y09mZnNldCgpKSAqIE1JTExJU0VDT05EU19BX01JTlVURTtcbiAgICB2YXIgZGlmZiA9IHRoaXMgLSB0aGF0O1xuXG4gICAgdmFyIGdldE1vbnRoID0gZnVuY3Rpb24gZ2V0TW9udGgoKSB7XG4gICAgICByZXR1cm4gVXRpbHMubShfdGhpczQsIHRoYXQpO1xuICAgIH07XG5cbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgc3dpdGNoICh1bml0KSB7XG4gICAgICBjYXNlIFk6XG4gICAgICAgIHJlc3VsdCA9IGdldE1vbnRoKCkgLyAxMjtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTTpcbiAgICAgICAgcmVzdWx0ID0gZ2V0TW9udGgoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUTpcbiAgICAgICAgcmVzdWx0ID0gZ2V0TW9udGgoKSAvIDM7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFc6XG4gICAgICAgIHJlc3VsdCA9IChkaWZmIC0gem9uZURlbHRhKSAvIE1JTExJU0VDT05EU19BX1dFRUs7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEQ6XG4gICAgICAgIHJlc3VsdCA9IChkaWZmIC0gem9uZURlbHRhKSAvIE1JTExJU0VDT05EU19BX0RBWTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgSDpcbiAgICAgICAgcmVzdWx0ID0gZGlmZiAvIE1JTExJU0VDT05EU19BX0hPVVI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIE1JTjpcbiAgICAgICAgcmVzdWx0ID0gZGlmZiAvIE1JTExJU0VDT05EU19BX01JTlVURTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgUzpcbiAgICAgICAgcmVzdWx0ID0gZGlmZiAvIE1JTExJU0VDT05EU19BX1NFQ09ORDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJlc3VsdCA9IGRpZmY7IC8vIG1pbGxpc2Vjb25kc1xuXG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBfZmxvYXQgPyByZXN1bHQgOiBVdGlscy5hKHJlc3VsdCk7XG4gIH07XG5cbiAgX3Byb3RvLmRheXNJbk1vbnRoID0gZnVuY3Rpb24gZGF5c0luTW9udGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kT2YoTSkuJEQ7XG4gIH07XG5cbiAgX3Byb3RvLiRsb2NhbGUgPSBmdW5jdGlvbiAkbG9jYWxlKCkge1xuICAgIC8vIGdldCBsb2NhbGUgb2JqZWN0XG4gICAgcmV0dXJuIExzW3RoaXMuJExdO1xuICB9O1xuXG4gIF9wcm90by5sb2NhbGUgPSBmdW5jdGlvbiBsb2NhbGUocHJlc2V0LCBvYmplY3QpIHtcbiAgICBpZiAoIXByZXNldCkgcmV0dXJuIHRoaXMuJEw7XG4gICAgdmFyIHRoYXQgPSB0aGlzLmNsb25lKCk7XG4gICAgdmFyIG5leHRMb2NhbGVOYW1lID0gcGFyc2VMb2NhbGUocHJlc2V0LCBvYmplY3QsIHRydWUpO1xuICAgIGlmIChuZXh0TG9jYWxlTmFtZSkgdGhhdC4kTCA9IG5leHRMb2NhbGVOYW1lO1xuICAgIHJldHVybiB0aGF0O1xuICB9O1xuXG4gIF9wcm90by5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lKCkge1xuICAgIHJldHVybiBVdGlscy53KHRoaXMuJGQsIHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by50b0RhdGUgPSBmdW5jdGlvbiB0b0RhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKTtcbiAgfTtcblxuICBfcHJvdG8udG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMudG9JU09TdHJpbmcoKSA6IG51bGw7XG4gIH07XG5cbiAgX3Byb3RvLnRvSVNPU3RyaW5nID0gZnVuY3Rpb24gdG9JU09TdHJpbmcoKSB7XG4gICAgLy8gaWUgOCByZXR1cm5cbiAgICAvLyBuZXcgRGF5anModGhpcy52YWx1ZU9mKCkgKyB0aGlzLiRkLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMClcbiAgICAvLyAuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzLlNTU1taXScpXG4gICAgcmV0dXJuIHRoaXMuJGQudG9JU09TdHJpbmcoKTtcbiAgfTtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy4kZC50b1VUQ1N0cmluZygpO1xuICB9O1xuXG4gIHJldHVybiBEYXlqcztcbn0oKTtcblxudmFyIHByb3RvID0gRGF5anMucHJvdG90eXBlO1xuZGF5anMucHJvdG90eXBlID0gcHJvdG87XG5bWyckbXMnLCBNU10sIFsnJHMnLCBTXSwgWyckbScsIE1JTl0sIFsnJEgnLCBIXSwgWyckVycsIERdLCBbJyRNJywgTV0sIFsnJHknLCBZXSwgWyckRCcsIERBVEVdXS5mb3JFYWNoKGZ1bmN0aW9uIChnKSB7XG4gIHByb3RvW2dbMV1dID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgcmV0dXJuIHRoaXMuJGcoaW5wdXQsIGdbMF0sIGdbMV0pO1xuICB9O1xufSk7XG5cbmRheWpzLmV4dGVuZCA9IGZ1bmN0aW9uIChwbHVnaW4sIG9wdGlvbikge1xuICBpZiAoIXBsdWdpbi4kaSkge1xuICAgIC8vIGluc3RhbGwgcGx1Z2luIG9ubHkgb25jZVxuICAgIHBsdWdpbihvcHRpb24sIERheWpzLCBkYXlqcyk7XG4gICAgcGx1Z2luLiRpID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBkYXlqcztcbn07XG5cbmRheWpzLmxvY2FsZSA9IHBhcnNlTG9jYWxlO1xuZGF5anMuaXNEYXlqcyA9IGlzRGF5anM7XG5cbmRheWpzLnVuaXggPSBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gIHJldHVybiBkYXlqcyh0aW1lc3RhbXAgKiAxZTMpO1xufTtcblxuZGF5anMuZW4gPSBMc1tMXTtcbmRheWpzLkxzID0gTHM7XG5kYXlqcy5wID0ge307XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0XG52YXIgdCA9IGZ1bmN0aW9uIHQoZm9ybWF0KSB7XG4gIHJldHVybiBmb3JtYXQucmVwbGFjZSgvKFxcW1teXFxdXStdKXwoTU1NTXxNTXxERHxkZGRkKS9nLCBmdW5jdGlvbiAoXywgYSwgYikge1xuICAgIHJldHVybiBhIHx8IGIuc2xpY2UoMSk7XG4gIH0pO1xufTtcbnZhciBlbmdsaXNoRm9ybWF0cyA9IHtcbiAgTFRTOiAnaDptbTpzcyBBJyxcbiAgTFQ6ICdoOm1tIEEnLFxuICBMOiAnTU0vREQvWVlZWScsXG4gIExMOiAnTU1NTSBELCBZWVlZJyxcbiAgTExMOiAnTU1NTSBELCBZWVlZIGg6bW0gQScsXG4gIExMTEw6ICdkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBJ1xufTtcbnZhciB1ID0gZnVuY3Rpb24gdShmb3JtYXRTdHIsIGZvcm1hdHMpIHtcbiAgcmV0dXJuIGZvcm1hdFN0ci5yZXBsYWNlKC8oXFxbW15cXF1dK10pfChMVFM/fGx7MSw0fXxMezEsNH0pL2csIGZ1bmN0aW9uIChfLCBhLCBiKSB7XG4gICAgdmFyIEIgPSBiICYmIGIudG9VcHBlckNhc2UoKTtcbiAgICByZXR1cm4gYSB8fCBmb3JtYXRzW2JdIHx8IGVuZ2xpc2hGb3JtYXRzW2JdIHx8IHQoZm9ybWF0c1tCXSk7XG4gIH0pO1xufTtcblxudmFyIGZvcm1hdHRpbmdUb2tlbnMgPSAvKFxcW1teW10qXFxdKXwoWy1fOi8uLCgpXFxzXSspfChBfGF8WVlZWXxZWT98TU0/TT9NP3xEb3xERD98aGg/fEhIP3xtbT98c3M/fFN7MSwzfXx6fFpaPykvZztcbnZhciBtYXRjaDEgPSAvXFxkLzsgLy8gMCAtIDlcblxudmFyIG1hdGNoMiA9IC9cXGRcXGQvOyAvLyAwMCAtIDk5XG5cbnZhciBtYXRjaDMgPSAvXFxkezN9LzsgLy8gMDAwIC0gOTk5XG5cbnZhciBtYXRjaDQgPSAvXFxkezR9LzsgLy8gMDAwMCAtIDk5OTlcblxudmFyIG1hdGNoMXRvMiA9IC9cXGRcXGQ/LzsgLy8gMCAtIDk5XG5cbnZhciBtYXRjaFNpZ25lZCA9IC9bKy1dP1xcZCsvOyAvLyAtaW5mIC0gaW5mXG5cbnZhciBtYXRjaE9mZnNldCA9IC9bKy1dXFxkXFxkOj8oXFxkXFxkKT98Wi87IC8vICswMDowMCAtMDA6MDAgKzAwMDAgb3IgLTAwMDAgKzAwIG9yIFpcblxudmFyIG1hdGNoV29yZCA9IC9cXGQqW14tXzovLCgpXFxzXFxkXSsvOyAvLyBXb3JkXG5cbnZhciBsb2NhbGUgPSB7fTtcblxudmFyIHBhcnNlVHdvRGlnaXRZZWFyID0gZnVuY3Rpb24gcGFyc2VUd29EaWdpdFllYXIoaW5wdXQpIHtcbiAgaW5wdXQgPSAraW5wdXQ7XG4gIHJldHVybiBpbnB1dCArIChpbnB1dCA+IDY4ID8gMTkwMCA6IDIwMDApO1xufTtcblxuZnVuY3Rpb24gb2Zmc2V0RnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgaWYgKCFzdHJpbmcpIHJldHVybiAwO1xuICBpZiAoc3RyaW5nID09PSAnWicpIHJldHVybiAwO1xuICB2YXIgcGFydHMgPSBzdHJpbmcubWF0Y2goLyhbKy1dfFxcZFxcZCkvZyk7XG4gIHZhciBtaW51dGVzID0gKyhwYXJ0c1sxXSAqIDYwKSArICgrcGFydHNbMl0gfHwgMCk7XG4gIHJldHVybiBtaW51dGVzID09PSAwID8gMCA6IHBhcnRzWzBdID09PSAnKycgPyAtbWludXRlcyA6IG1pbnV0ZXM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbn1cblxudmFyIGFkZElucHV0ID0gZnVuY3Rpb24gYWRkSW5wdXQocHJvcGVydHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXNbcHJvcGVydHldID0gK2lucHV0O1xuICB9O1xufTtcblxudmFyIHpvbmVFeHByZXNzaW9ucyA9IFttYXRjaE9mZnNldCwgZnVuY3Rpb24gKGlucHV0KSB7XG4gIHZhciB6b25lID0gdGhpcy56b25lIHx8ICh0aGlzLnpvbmUgPSB7fSk7XG4gIHpvbmUub2Zmc2V0ID0gb2Zmc2V0RnJvbVN0cmluZyhpbnB1dCk7XG59XTtcblxudmFyIGdldExvY2FsZVBhcnQgPSBmdW5jdGlvbiBnZXRMb2NhbGVQYXJ0KG5hbWUpIHtcbiAgdmFyIHBhcnQgPSBsb2NhbGVbbmFtZV07XG4gIHJldHVybiBwYXJ0ICYmIChwYXJ0LmluZGV4T2YgPyBwYXJ0IDogcGFydC5zLmNvbmNhdChwYXJ0LmYpKTtcbn07XG5cbnZhciBtZXJpZGllbU1hdGNoID0gZnVuY3Rpb24gbWVyaWRpZW1NYXRjaChpbnB1dCwgaXNMb3dlckNhc2UpIHtcbiAgdmFyIGlzQWZ0ZXJub29uO1xuICB2YXIgX2xvY2FsZSA9IGxvY2FsZSxcbiAgICAgIG1lcmlkaWVtID0gX2xvY2FsZS5tZXJpZGllbTtcblxuICBpZiAoIW1lcmlkaWVtKSB7XG4gICAgaXNBZnRlcm5vb24gPSBpbnB1dCA9PT0gKGlzTG93ZXJDYXNlID8gJ3BtJyA6ICdQTScpO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDI0OyBpICs9IDEpIHtcbiAgICAgIC8vIHRvZG86IGZpeCBpbnB1dCA9PT0gbWVyaWRpZW0oaSwgMCwgaXNMb3dlckNhc2UpXG4gICAgICBpZiAoaW5wdXQuaW5kZXhPZihtZXJpZGllbShpLCAwLCBpc0xvd2VyQ2FzZSkpID4gLTEpIHtcbiAgICAgICAgaXNBZnRlcm5vb24gPSBpID4gMTI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpc0FmdGVybm9vbjtcbn07XG5cbnZhciBleHByZXNzaW9ucyA9IHtcbiAgQTogW21hdGNoV29yZCwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy5hZnRlcm5vb24gPSBtZXJpZGllbU1hdGNoKGlucHV0LCBmYWxzZSk7XG4gIH1dLFxuICBhOiBbbWF0Y2hXb3JkLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB0aGlzLmFmdGVybm9vbiA9IG1lcmlkaWVtTWF0Y2goaW5wdXQsIHRydWUpO1xuICB9XSxcbiAgUzogW21hdGNoMSwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy5taWxsaXNlY29uZHMgPSAraW5wdXQgKiAxMDA7XG4gIH1dLFxuICBTUzogW21hdGNoMiwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy5taWxsaXNlY29uZHMgPSAraW5wdXQgKiAxMDtcbiAgfV0sXG4gIFNTUzogW21hdGNoMywgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy5taWxsaXNlY29uZHMgPSAraW5wdXQ7XG4gIH1dLFxuICBzOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnc2Vjb25kcycpXSxcbiAgc3M6IFttYXRjaDF0bzIsIGFkZElucHV0KCdzZWNvbmRzJyldLFxuICBtOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnbWludXRlcycpXSxcbiAgbW06IFttYXRjaDF0bzIsIGFkZElucHV0KCdtaW51dGVzJyldLFxuICBIOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnaG91cnMnKV0sXG4gIGg6IFttYXRjaDF0bzIsIGFkZElucHV0KCdob3VycycpXSxcbiAgSEg6IFttYXRjaDF0bzIsIGFkZElucHV0KCdob3VycycpXSxcbiAgaGg6IFttYXRjaDF0bzIsIGFkZElucHV0KCdob3VycycpXSxcbiAgRDogW21hdGNoMXRvMiwgYWRkSW5wdXQoJ2RheScpXSxcbiAgREQ6IFttYXRjaDIsIGFkZElucHV0KCdkYXknKV0sXG4gIERvOiBbbWF0Y2hXb3JkLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgX2xvY2FsZTIgPSBsb2NhbGUsXG4gICAgICAgIG9yZGluYWwgPSBfbG9jYWxlMi5vcmRpbmFsO1xuXG4gICAgdmFyIF9pbnB1dCRtYXRjaCA9IGlucHV0Lm1hdGNoKC9cXGQrLyk7XG5cbiAgICB0aGlzLmRheSA9IF9pbnB1dCRtYXRjaFswXTtcbiAgICBpZiAoIW9yZGluYWwpIHJldHVybjtcblxuICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDMxOyBpICs9IDEpIHtcbiAgICAgIGlmIChvcmRpbmFsKGkpLnJlcGxhY2UoL1xcW3xcXF0vZywgJycpID09PSBpbnB1dCkge1xuICAgICAgICB0aGlzLmRheSA9IGk7XG4gICAgICB9XG4gICAgfVxuICB9XSxcbiAgTTogW21hdGNoMXRvMiwgYWRkSW5wdXQoJ21vbnRoJyldLFxuICBNTTogW21hdGNoMiwgYWRkSW5wdXQoJ21vbnRoJyldLFxuICBNTU06IFttYXRjaFdvcmQsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciBtb250aHMgPSBnZXRMb2NhbGVQYXJ0KCdtb250aHMnKTtcbiAgICB2YXIgbW9udGhzU2hvcnQgPSBnZXRMb2NhbGVQYXJ0KCdtb250aHNTaG9ydCcpO1xuICAgIHZhciBtYXRjaEluZGV4ID0gKG1vbnRoc1Nob3J0IHx8IG1vbnRocy5tYXAoZnVuY3Rpb24gKF8pIHtcbiAgICAgIHJldHVybiBfLnNsaWNlKDAsIDMpO1xuICAgIH0pKS5pbmRleE9mKGlucHV0KSArIDE7XG5cbiAgICBpZiAobWF0Y2hJbmRleCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHRoaXMubW9udGggPSBtYXRjaEluZGV4ICUgMTIgfHwgbWF0Y2hJbmRleDtcbiAgfV0sXG4gIE1NTU06IFttYXRjaFdvcmQsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciBtb250aHMgPSBnZXRMb2NhbGVQYXJ0KCdtb250aHMnKTtcbiAgICB2YXIgbWF0Y2hJbmRleCA9IG1vbnRocy5pbmRleE9mKGlucHV0KSArIDE7XG5cbiAgICBpZiAobWF0Y2hJbmRleCA8IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHRoaXMubW9udGggPSBtYXRjaEluZGV4ICUgMTIgfHwgbWF0Y2hJbmRleDtcbiAgfV0sXG4gIFk6IFttYXRjaFNpZ25lZCwgYWRkSW5wdXQoJ3llYXInKV0sXG4gIFlZOiBbbWF0Y2gyLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB0aGlzLnllYXIgPSBwYXJzZVR3b0RpZ2l0WWVhcihpbnB1dCk7XG4gIH1dLFxuICBZWVlZOiBbbWF0Y2g0LCBhZGRJbnB1dCgneWVhcicpXSxcbiAgWjogem9uZUV4cHJlc3Npb25zLFxuICBaWjogem9uZUV4cHJlc3Npb25zXG59O1xuXG5mdW5jdGlvbiBjb3JyZWN0SG91cnModGltZSkge1xuICB2YXIgYWZ0ZXJub29uID0gdGltZS5hZnRlcm5vb247XG5cbiAgaWYgKGFmdGVybm9vbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGhvdXJzID0gdGltZS5ob3VycztcblxuICAgIGlmIChhZnRlcm5vb24pIHtcbiAgICAgIGlmIChob3VycyA8IDEyKSB7XG4gICAgICAgIHRpbWUuaG91cnMgKz0gMTI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChob3VycyA9PT0gMTIpIHtcbiAgICAgIHRpbWUuaG91cnMgPSAwO1xuICAgIH1cblxuICAgIGRlbGV0ZSB0aW1lLmFmdGVybm9vbjtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlUGFyc2VyKGZvcm1hdCkge1xuICBmb3JtYXQgPSB1KGZvcm1hdCwgbG9jYWxlICYmIGxvY2FsZS5mb3JtYXRzKTtcbiAgdmFyIGFycmF5ID0gZm9ybWF0Lm1hdGNoKGZvcm1hdHRpbmdUb2tlbnMpO1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgdG9rZW4gPSBhcnJheVtpXTtcbiAgICB2YXIgcGFyc2VUbyA9IGV4cHJlc3Npb25zW3Rva2VuXTtcbiAgICB2YXIgcmVnZXggPSBwYXJzZVRvICYmIHBhcnNlVG9bMF07XG4gICAgdmFyIHBhcnNlciA9IHBhcnNlVG8gJiYgcGFyc2VUb1sxXTtcblxuICAgIGlmIChwYXJzZXIpIHtcbiAgICAgIGFycmF5W2ldID0ge1xuICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgIHBhcnNlcjogcGFyc2VyXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBhcnJheVtpXSA9IHRva2VuLnJlcGxhY2UoL15cXFt8XFxdJC9nLCAnJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciB0aW1lID0ge307XG5cbiAgICBmb3IgKHZhciBfaSA9IDAsIHN0YXJ0ID0gMDsgX2kgPCBsZW5ndGg7IF9pICs9IDEpIHtcbiAgICAgIHZhciBfdG9rZW4gPSBhcnJheVtfaV07XG5cbiAgICAgIGlmICh0eXBlb2YgX3Rva2VuID09PSAnc3RyaW5nJykge1xuICAgICAgICBzdGFydCArPSBfdG9rZW4ubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9yZWdleCA9IF90b2tlbi5yZWdleCxcbiAgICAgICAgICAgIF9wYXJzZXIgPSBfdG9rZW4ucGFyc2VyO1xuICAgICAgICB2YXIgcGFydCA9IGlucHV0LnNsaWNlKHN0YXJ0KTtcblxuICAgICAgICB2YXIgbWF0Y2ggPSBfcmVnZXguZXhlYyhwYXJ0KTtcblxuICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFswXTtcblxuICAgICAgICBfcGFyc2VyLmNhbGwodGltZSwgdmFsdWUpO1xuXG4gICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSh2YWx1ZSwgJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvcnJlY3RIb3Vycyh0aW1lKTtcbiAgICByZXR1cm4gdGltZTtcbiAgfTtcbn1cblxudmFyIHBhcnNlRm9ybWF0dGVkSW5wdXQgPSBmdW5jdGlvbiBwYXJzZUZvcm1hdHRlZElucHV0KGlucHV0LCBmb3JtYXQsIHV0Yykge1xuICB0cnkge1xuICAgIGlmIChbJ3gnLCAnWCddLmluZGV4T2YoZm9ybWF0KSA+IC0xKSByZXR1cm4gbmV3IERhdGUoKGZvcm1hdCA9PT0gJ1gnID8gMTAwMCA6IDEpICogaW5wdXQpO1xuICAgIHZhciBwYXJzZXIgPSBtYWtlUGFyc2VyKGZvcm1hdCk7XG5cbiAgICB2YXIgX3BhcnNlcjIgPSBwYXJzZXIoaW5wdXQpLFxuICAgICAgICB5ZWFyID0gX3BhcnNlcjIueWVhcixcbiAgICAgICAgbW9udGggPSBfcGFyc2VyMi5tb250aCxcbiAgICAgICAgZGF5ID0gX3BhcnNlcjIuZGF5LFxuICAgICAgICBob3VycyA9IF9wYXJzZXIyLmhvdXJzLFxuICAgICAgICBtaW51dGVzID0gX3BhcnNlcjIubWludXRlcyxcbiAgICAgICAgc2Vjb25kcyA9IF9wYXJzZXIyLnNlY29uZHMsXG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IF9wYXJzZXIyLm1pbGxpc2Vjb25kcyxcbiAgICAgICAgem9uZSA9IF9wYXJzZXIyLnpvbmU7XG5cbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICB2YXIgZCA9IGRheSB8fCAoIXllYXIgJiYgIW1vbnRoID8gbm93LmdldERhdGUoKSA6IDEpO1xuICAgIHZhciB5ID0geWVhciB8fCBub3cuZ2V0RnVsbFllYXIoKTtcbiAgICB2YXIgTSA9IDA7XG5cbiAgICBpZiAoISh5ZWFyICYmICFtb250aCkpIHtcbiAgICAgIE0gPSBtb250aCA+IDAgPyBtb250aCAtIDEgOiBub3cuZ2V0TW9udGgoKTtcbiAgICB9XG5cbiAgICB2YXIgaCA9IGhvdXJzIHx8IDA7XG4gICAgdmFyIG0gPSBtaW51dGVzIHx8IDA7XG4gICAgdmFyIHMgPSBzZWNvbmRzIHx8IDA7XG4gICAgdmFyIG1zID0gbWlsbGlzZWNvbmRzIHx8IDA7XG5cbiAgICBpZiAoem9uZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHksIE0sIGQsIGgsIG0sIHMsIG1zICsgem9uZS5vZmZzZXQgKiA2MCAqIDEwMDApKTtcbiAgICB9XG5cbiAgICBpZiAodXRjKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeSwgTSwgZCwgaCwgbSwgcywgbXMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoeSwgTSwgZCwgaCwgbSwgcywgbXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCcnKTsgLy8gSW52YWxpZCBEYXRlXG4gIH1cbn07XG5cbmNvbnN0IGN1c3RvbVBhcnNlRm9ybWF0ID0gKGZ1bmN0aW9uIChvLCBDLCBkKSB7XG4gIGQucC5jdXN0b21QYXJzZUZvcm1hdCA9IHRydWU7XG5cbiAgaWYgKG8gJiYgby5wYXJzZVR3b0RpZ2l0WWVhcikge1xuICAgIHBhcnNlVHdvRGlnaXRZZWFyID0gby5wYXJzZVR3b0RpZ2l0WWVhcjtcbiAgfVxuXG4gIHZhciBwcm90byA9IEMucHJvdG90eXBlO1xuICB2YXIgb2xkUGFyc2UgPSBwcm90by5wYXJzZTtcblxuICBwcm90by5wYXJzZSA9IGZ1bmN0aW9uIChjZmcpIHtcbiAgICB2YXIgZGF0ZSA9IGNmZy5kYXRlLFxuICAgICAgICB1dGMgPSBjZmcudXRjLFxuICAgICAgICBhcmdzID0gY2ZnLmFyZ3M7XG4gICAgdGhpcy4kdSA9IHV0YztcbiAgICB2YXIgZm9ybWF0ID0gYXJnc1sxXTtcblxuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIGlzU3RyaWN0V2l0aG91dExvY2FsZSA9IGFyZ3NbMl0gPT09IHRydWU7XG4gICAgICB2YXIgaXNTdHJpY3RXaXRoTG9jYWxlID0gYXJnc1szXSA9PT0gdHJ1ZTtcbiAgICAgIHZhciBpc1N0cmljdCA9IGlzU3RyaWN0V2l0aG91dExvY2FsZSB8fCBpc1N0cmljdFdpdGhMb2NhbGU7XG4gICAgICB2YXIgcGwgPSBhcmdzWzJdO1xuXG4gICAgICBpZiAoaXNTdHJpY3RXaXRoTG9jYWxlKSB7XG4gICAgICAgIHBsID0gYXJnc1syXTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxlID0gdGhpcy4kbG9jYWxlKCk7XG5cbiAgICAgIGlmICghaXNTdHJpY3RXaXRob3V0TG9jYWxlICYmIHBsKSB7XG4gICAgICAgIGxvY2FsZSA9IGQuTHNbcGxdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLiRkID0gcGFyc2VGb3JtYXR0ZWRJbnB1dChkYXRlLCBmb3JtYXQsIHV0Yyk7XG4gICAgICB0aGlzLmluaXQoKTtcbiAgICAgIGlmIChwbCAmJiBwbCAhPT0gdHJ1ZSkgdGhpcy4kTCA9IHRoaXMubG9jYWxlKHBsKS4kTDsgLy8gdXNlICE9IHRvIHRyZWF0XG4gICAgICAvLyBpbnB1dCBudW1iZXIgMTQxMDcxNTY0MDU3OSBhbmQgZm9ybWF0IHN0cmluZyAnMTQxMDcxNTY0MDU3OScgZXF1YWxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcblxuICAgICAgaWYgKGlzU3RyaWN0ICYmIGRhdGUgIT0gdGhpcy5mb3JtYXQoZm9ybWF0KSkge1xuICAgICAgICB0aGlzLiRkID0gbmV3IERhdGUoJycpO1xuICAgICAgfSAvLyByZXNldCBnbG9iYWwgbG9jYWxlIHRvIG1ha2UgcGFyYWxsZWwgdW5pdCB0ZXN0XG5cblxuICAgICAgbG9jYWxlID0ge307XG4gICAgfSBlbHNlIGlmIChmb3JtYXQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgdmFyIGxlbiA9IGZvcm1hdC5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGFyZ3NbMV0gPSBmb3JtYXRbaSAtIDFdO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZC5hcHBseSh0aGlzLCBhcmdzKTtcblxuICAgICAgICBpZiAocmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgICAgIHRoaXMuJGQgPSByZXN1bHQuJGQ7XG4gICAgICAgICAgdGhpcy4kTCA9IHJlc3VsdC4kTDtcbiAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpID09PSBsZW4pIHRoaXMuJGQgPSBuZXcgRGF0ZSgnJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG9sZFBhcnNlLmNhbGwodGhpcywgY2ZnKTtcbiAgICB9XG4gIH07XG59KTtcblxuY29uc3QgbG9jYWxlRGF0YSA9IChmdW5jdGlvbiAobywgYywgZGF5anMpIHtcbiAgLy8gbG9jYWxlIG5lZWRlZCBsYXRlclxuICB2YXIgcHJvdG8gPSBjLnByb3RvdHlwZTtcblxuICB2YXIgZ2V0TG9jYWxlUGFydCA9IGZ1bmN0aW9uIGdldExvY2FsZVBhcnQocGFydCkge1xuICAgIHJldHVybiBwYXJ0ICYmIChwYXJ0LmluZGV4T2YgPyBwYXJ0IDogcGFydC5zKTtcbiAgfTtcblxuICB2YXIgZ2V0U2hvcnQgPSBmdW5jdGlvbiBnZXRTaG9ydChpbnMsIHRhcmdldCwgZnVsbCwgbnVtLCBsb2NhbGVPcmRlcikge1xuICAgIHZhciBsb2NhbGUgPSBpbnMubmFtZSA/IGlucyA6IGlucy4kbG9jYWxlKCk7XG4gICAgdmFyIHRhcmdldExvY2FsZSA9IGdldExvY2FsZVBhcnQobG9jYWxlW3RhcmdldF0pO1xuICAgIHZhciBmdWxsTG9jYWxlID0gZ2V0TG9jYWxlUGFydChsb2NhbGVbZnVsbF0pO1xuICAgIHZhciByZXN1bHQgPSB0YXJnZXRMb2NhbGUgfHwgZnVsbExvY2FsZS5tYXAoZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmLnNsaWNlKDAsIG51bSk7XG4gICAgfSk7XG4gICAgaWYgKCFsb2NhbGVPcmRlcikgcmV0dXJuIHJlc3VsdDtcbiAgICB2YXIgd2Vla1N0YXJ0ID0gbG9jYWxlLndlZWtTdGFydDtcbiAgICByZXR1cm4gcmVzdWx0Lm1hcChmdW5jdGlvbiAoXywgaW5kZXgpIHtcbiAgICAgIHJldHVybiByZXN1bHRbKGluZGV4ICsgKHdlZWtTdGFydCB8fCAwKSkgJSA3XTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgZ2V0RGF5anNMb2NhbGVPYmplY3QgPSBmdW5jdGlvbiBnZXREYXlqc0xvY2FsZU9iamVjdCgpIHtcbiAgICByZXR1cm4gZGF5anMuTHNbZGF5anMubG9jYWxlKCldO1xuICB9O1xuXG4gIHZhciBnZXRMb25nRGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIGdldExvbmdEYXRlRm9ybWF0KGwsIGZvcm1hdCkge1xuICAgIHJldHVybiBsLmZvcm1hdHNbZm9ybWF0XSB8fCB0KGwuZm9ybWF0c1tmb3JtYXQudG9VcHBlckNhc2UoKV0pO1xuICB9O1xuXG4gIHZhciBsb2NhbGVEYXRhID0gZnVuY3Rpb24gbG9jYWxlRGF0YSgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1vbnRoczogZnVuY3Rpb24gbW9udGhzKGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLmZvcm1hdCgnTU1NTScpIDogZ2V0U2hvcnQoX3RoaXMsICdtb250aHMnKTtcbiAgICAgIH0sXG4gICAgICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQoaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2UuZm9ybWF0KCdNTU0nKSA6IGdldFNob3J0KF90aGlzLCAnbW9udGhzU2hvcnQnLCAnbW9udGhzJywgMyk7XG4gICAgICB9LFxuICAgICAgZmlyc3REYXlPZldlZWs6IGZ1bmN0aW9uIGZpcnN0RGF5T2ZXZWVrKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMuJGxvY2FsZSgpLndlZWtTdGFydCB8fCAwO1xuICAgICAgfSxcbiAgICAgIHdlZWtkYXlzOiBmdW5jdGlvbiB3ZWVrZGF5cyhpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UgPyBpbnN0YW5jZS5mb3JtYXQoJ2RkZGQnKSA6IGdldFNob3J0KF90aGlzLCAnd2Vla2RheXMnKTtcbiAgICAgIH0sXG4gICAgICB3ZWVrZGF5c01pbjogZnVuY3Rpb24gd2Vla2RheXNNaW4oaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2UuZm9ybWF0KCdkZCcpIDogZ2V0U2hvcnQoX3RoaXMsICd3ZWVrZGF5c01pbicsICd3ZWVrZGF5cycsIDIpO1xuICAgICAgfSxcbiAgICAgIHdlZWtkYXlzU2hvcnQ6IGZ1bmN0aW9uIHdlZWtkYXlzU2hvcnQoaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2UuZm9ybWF0KCdkZGQnKSA6IGdldFNob3J0KF90aGlzLCAnd2Vla2RheXNTaG9ydCcsICd3ZWVrZGF5cycsIDMpO1xuICAgICAgfSxcbiAgICAgIGxvbmdEYXRlRm9ybWF0OiBmdW5jdGlvbiBsb25nRGF0ZUZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGdldExvbmdEYXRlRm9ybWF0KF90aGlzLiRsb2NhbGUoKSwgZm9ybWF0KTtcbiAgICAgIH0sXG4gICAgICBtZXJpZGllbTogdGhpcy4kbG9jYWxlKCkubWVyaWRpZW0sXG4gICAgICBvcmRpbmFsOiB0aGlzLiRsb2NhbGUoKS5vcmRpbmFsXG4gICAgfTtcbiAgfTtcblxuICBwcm90by5sb2NhbGVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBsb2NhbGVEYXRhLmJpbmQodGhpcykoKTtcbiAgfTtcblxuICBkYXlqcy5sb2NhbGVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsb2NhbGVPYmplY3QgPSBnZXREYXlqc0xvY2FsZU9iamVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICBmaXJzdERheU9mV2VlazogZnVuY3Rpb24gZmlyc3REYXlPZldlZWsoKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVPYmplY3Qud2Vla1N0YXJ0IHx8IDA7XG4gICAgICB9LFxuICAgICAgd2Vla2RheXM6IGZ1bmN0aW9uIHdlZWtkYXlzKCkge1xuICAgICAgICByZXR1cm4gZGF5anMud2Vla2RheXMoKTtcbiAgICAgIH0sXG4gICAgICB3ZWVrZGF5c1Nob3J0OiBmdW5jdGlvbiB3ZWVrZGF5c1Nob3J0KCkge1xuICAgICAgICByZXR1cm4gZGF5anMud2Vla2RheXNTaG9ydCgpO1xuICAgICAgfSxcbiAgICAgIHdlZWtkYXlzTWluOiBmdW5jdGlvbiB3ZWVrZGF5c01pbigpIHtcbiAgICAgICAgcmV0dXJuIGRheWpzLndlZWtkYXlzTWluKCk7XG4gICAgICB9LFxuICAgICAgbW9udGhzOiBmdW5jdGlvbiBtb250aHMoKSB7XG4gICAgICAgIHJldHVybiBkYXlqcy5tb250aHMoKTtcbiAgICAgIH0sXG4gICAgICBtb250aHNTaG9ydDogZnVuY3Rpb24gbW9udGhzU2hvcnQoKSB7XG4gICAgICAgIHJldHVybiBkYXlqcy5tb250aHNTaG9ydCgpO1xuICAgICAgfSxcbiAgICAgIGxvbmdEYXRlRm9ybWF0OiBmdW5jdGlvbiBsb25nRGF0ZUZvcm1hdChmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGdldExvbmdEYXRlRm9ybWF0KGxvY2FsZU9iamVjdCwgZm9ybWF0KTtcbiAgICAgIH0sXG4gICAgICBtZXJpZGllbTogbG9jYWxlT2JqZWN0Lm1lcmlkaWVtLFxuICAgICAgb3JkaW5hbDogbG9jYWxlT2JqZWN0Lm9yZGluYWxcbiAgICB9O1xuICB9O1xuXG4gIGRheWpzLm1vbnRocyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0U2hvcnQoZ2V0RGF5anNMb2NhbGVPYmplY3QoKSwgJ21vbnRocycpO1xuICB9O1xuXG4gIGRheWpzLm1vbnRoc1Nob3J0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnZXRTaG9ydChnZXREYXlqc0xvY2FsZU9iamVjdCgpLCAnbW9udGhzU2hvcnQnLCAnbW9udGhzJywgMyk7XG4gIH07XG5cbiAgZGF5anMud2Vla2RheXMgPSBmdW5jdGlvbiAobG9jYWxlT3JkZXIpIHtcbiAgICByZXR1cm4gZ2V0U2hvcnQoZ2V0RGF5anNMb2NhbGVPYmplY3QoKSwgJ3dlZWtkYXlzJywgbnVsbCwgbnVsbCwgbG9jYWxlT3JkZXIpO1xuICB9O1xuXG4gIGRheWpzLndlZWtkYXlzU2hvcnQgPSBmdW5jdGlvbiAobG9jYWxlT3JkZXIpIHtcbiAgICByZXR1cm4gZ2V0U2hvcnQoZ2V0RGF5anNMb2NhbGVPYmplY3QoKSwgJ3dlZWtkYXlzU2hvcnQnLCAnd2Vla2RheXMnLCAzLCBsb2NhbGVPcmRlcik7XG4gIH07XG5cbiAgZGF5anMud2Vla2RheXNNaW4gPSBmdW5jdGlvbiAobG9jYWxlT3JkZXIpIHtcbiAgICByZXR1cm4gZ2V0U2hvcnQoZ2V0RGF5anNMb2NhbGVPYmplY3QoKSwgJ3dlZWtkYXlzTWluJywgJ3dlZWtkYXlzJywgMiwgbG9jYWxlT3JkZXIpO1xuICB9O1xufSk7XG5cbmNvbnN0IGxvY2FsaXplZEZvcm1hdCA9IChmdW5jdGlvbiAobywgYywgZCkge1xuICB2YXIgcHJvdG8gPSBjLnByb3RvdHlwZTtcbiAgdmFyIG9sZEZvcm1hdCA9IHByb3RvLmZvcm1hdDtcbiAgZC5lbi5mb3JtYXRzID0gZW5nbGlzaEZvcm1hdHM7XG5cbiAgcHJvdG8uZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdFN0cikge1xuICAgIGlmIChmb3JtYXRTdHIgPT09IHZvaWQgMCkge1xuICAgICAgZm9ybWF0U3RyID0gRk9STUFUX0RFRkFVTFQ7XG4gICAgfVxuXG4gICAgdmFyIF90aGlzJCRsb2NhbGUgPSB0aGlzLiRsb2NhbGUoKSxcbiAgICAgICAgX3RoaXMkJGxvY2FsZSRmb3JtYXRzID0gX3RoaXMkJGxvY2FsZS5mb3JtYXRzLFxuICAgICAgICBmb3JtYXRzID0gX3RoaXMkJGxvY2FsZSRmb3JtYXRzID09PSB2b2lkIDAgPyB7fSA6IF90aGlzJCRsb2NhbGUkZm9ybWF0cztcblxuICAgIHZhciByZXN1bHQgPSB1KGZvcm1hdFN0ciwgZm9ybWF0cyk7XG4gICAgcmV0dXJuIG9sZEZvcm1hdC5jYWxsKHRoaXMsIHJlc3VsdCk7XG4gIH07XG59KTtcblxuLy8gUGx1Z2luIHRlbXBsYXRlIGZyb20gaHR0cHM6Ly9kYXkuanMub3JnL2RvY3MvZW4vcGx1Z2luL3BsdWdpblxuY29uc3QgcHJlUGFyc2VQb3N0Rm9ybWF0ID0gKGZ1bmN0aW9uIChvcHRpb24sIGRheWpzQ2xhc3MpIHtcbiAgdmFyIG9sZFBhcnNlID0gZGF5anNDbGFzcy5wcm90b3R5cGUucGFyc2U7XG5cbiAgZGF5anNDbGFzcy5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgaWYgKHR5cGVvZiBjZmcuZGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBsb2NhbGUgPSB0aGlzLiRsb2NhbGUoKTtcbiAgICAgIGNmZy5kYXRlID0gbG9jYWxlICYmIGxvY2FsZS5wcmVwYXJzZSA/IGxvY2FsZS5wcmVwYXJzZShjZmcuZGF0ZSkgOiBjZmcuZGF0ZTtcbiAgICB9IC8vIG9yaWdpbmFsIHBhcnNlIHJlc3VsdFxuXG5cbiAgICByZXR1cm4gb2xkUGFyc2UuYmluZCh0aGlzKShjZmcpO1xuICB9OyAvLyAvLyBvdmVycmlkaW5nIGV4aXN0aW5nIEFQSVxuICAvLyAvLyBlLmcuIGV4dGVuZCBkYXlqcygpLmZvcm1hdCgpXG5cblxuICB2YXIgb2xkRm9ybWF0ID0gZGF5anNDbGFzcy5wcm90b3R5cGUuZm9ybWF0O1xuXG4gIGRheWpzQ2xhc3MucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgLy8gb3JpZ2luYWwgZm9ybWF0IHJlc3VsdFxuICAgIHZhciByZXN1bHQgPSBvbGRGb3JtYXQuY2FsbC5hcHBseShvbGRGb3JtYXQsIFt0aGlzXS5jb25jYXQoYXJncykpOyAvLyByZXR1cm4gbW9kaWZpZWQgcmVzdWx0XG5cbiAgICB2YXIgbG9jYWxlID0gdGhpcy4kbG9jYWxlKCk7XG4gICAgcmV0dXJuIGxvY2FsZSAmJiBsb2NhbGUucG9zdGZvcm1hdCA/IGxvY2FsZS5wb3N0Zm9ybWF0KHJlc3VsdCkgOiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIG9sZEZyb21UbyA9IGRheWpzQ2xhc3MucHJvdG90eXBlLmZyb21Ub0Jhc2U7XG5cbiAgaWYgKG9sZEZyb21Ubykge1xuICAgIGRheWpzQ2xhc3MucHJvdG90eXBlLmZyb21Ub0Jhc2UgPSBmdW5jdGlvbiAoaW5wdXQsIHdpdGhvdXRTdWZmaXgsIGluc3RhbmNlLCBpc0Zyb20pIHtcbiAgICAgIHZhciBsb2NhbGUgPSB0aGlzLiRsb2NhbGUoKSB8fCBpbnN0YW5jZS4kbG9jYWxlKCk7IC8vIG9yaWdpbmFsIGZvcm1hdCByZXN1bHRcblxuICAgICAgcmV0dXJuIG9sZEZyb21Uby5jYWxsKHRoaXMsIGlucHV0LCB3aXRob3V0U3VmZml4LCBpbnN0YW5jZSwgaXNGcm9tLCBsb2NhbGUgJiYgbG9jYWxlLnBvc3Rmb3JtYXQpO1xuICAgIH07XG4gIH1cbn0pO1xuXG5jb25zdCB1cGRhdGVMb2NhbGUgPSAoZnVuY3Rpb24gKG9wdGlvbiwgRGF5anMsIGRheWpzKSB7XG4gIGRheWpzLnVwZGF0ZUxvY2FsZSA9IGZ1bmN0aW9uIChsb2NhbGUsIGN1c3RvbUNvbmZpZykge1xuICAgIHZhciBsb2NhbGVMaXN0ID0gZGF5anMuTHM7XG4gICAgdmFyIGxvY2FsZUNvbmZpZyA9IGxvY2FsZUxpc3RbbG9jYWxlXTtcbiAgICBpZiAoIWxvY2FsZUNvbmZpZykgcmV0dXJuO1xuICAgIHZhciBjdXN0b21Db25maWdLZXlzID0gY3VzdG9tQ29uZmlnID8gT2JqZWN0LmtleXMoY3VzdG9tQ29uZmlnKSA6IFtdO1xuICAgIGN1c3RvbUNvbmZpZ0tleXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgbG9jYWxlQ29uZmlnW2NdID0gY3VzdG9tQ29uZmlnW2NdO1xuICAgIH0pO1xuICAgIHJldHVybiBsb2NhbGVDb25maWc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgfTtcbn0pO1xuXG5jb25zdCBpbnB1dFRpbWVQaWNrZXJDc3MgPSBcIjpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6aW5saW5lLWJsb2NrOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX06OnNsb3R0ZWQoaW5wdXRbc2xvdD1oaWRkZW4tZm9ybS1pbnB1dF0pe21hcmdpbjowICFpbXBvcnRhbnQ7b3BhY2l0eTowICFpbXBvcnRhbnQ7b3V0bGluZTpub25lICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDtpbnNldDowICFpbXBvcnRhbnQ7dHJhbnNmb3JtOm5vbmUgIWltcG9ydGFudDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZSAhaW1wb3J0YW50O3otaW5kZXg6LTEgIWltcG9ydGFudH06aG9zdChbc2NhbGU9c10pey0tY2FsY2l0ZS10b2dnbGUtc3BhY2luZzowLjVyZW07LS1jYWxjaXRlLWludGVybmFsLWlucHV0LXRleHQtaW5wdXQtcGFkZGluZy1pbmxpbmUtZW5kOmNhbGModmFyKC0tY2FsY2l0ZS10b2dnbGUtc3BhY2luZykgKyAxcmVtKX06aG9zdChbc2NhbGU9bV0pey0tY2FsY2l0ZS10b2dnbGUtc3BhY2luZzowLjc1cmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1pbnB1dC10ZXh0LWlucHV0LXBhZGRpbmctaW5saW5lLWVuZDpjYWxjKHZhcigtLWNhbGNpdGUtdG9nZ2xlLXNwYWNpbmcpICsgMS41cmVtKX06aG9zdChbc2NhbGU9bF0pey0tY2FsY2l0ZS10b2dnbGUtc3BhY2luZzoxcmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC1pbnB1dC10ZXh0LWlucHV0LXBhZGRpbmctaW5saW5lLWVuZDpjYWxjKHZhcigtLWNhbGNpdGUtdG9nZ2xlLXNwYWNpbmcpICsgMnJlbSl9LmlucHV0LXdyYXBwZXJ7cG9zaXRpb246cmVsYXRpdmV9LnRvZ2dsZS1pY29ue3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7aW5zZXQtaW5saW5lLWVuZDowO2luc2V0LWJsb2NrOjA7cGFkZGluZy1pbmxpbmU6dmFyKC0tY2FsY2l0ZS10b2dnbGUtc3BhY2luZyl9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbi8vIHNvbWUgYnVuZGxlcnMgKGUuZy4sIFdlYnBhY2spIG5lZWQgZHluYW1pYyBpbXBvcnQgcGF0aHMgdG8gYmUgc3RhdGljXG5jb25zdCBzdXBwb3J0ZWREYXlqc0xvY2FsZVRvTG9jYWxlQ29uZmlnSW1wb3J0ID0gbmV3IE1hcChbXG4gIFtcImFyXCIsICgpID0+IGltcG9ydCgnLi9hci0wOTMzZmJjZC5qcycpXSxcbiAgW1wiYmdcIiwgKCkgPT4gaW1wb3J0KCcuL2JnLTUwNmRkYTUyLmpzJyldLFxuICBbXCJic1wiLCAoKSA9PiBpbXBvcnQoJy4vYnMtYjM2NGU5OGEuanMnKV0sXG4gIFtcImNhXCIsICgpID0+IGltcG9ydCgnLi9jYS1hZGU2MDRkMC5qcycpXSxcbiAgW1wiY3NcIiwgKCkgPT4gaW1wb3J0KCcuL2NzLTI4MzY1ZTQ1LmpzJyldLFxuICBbXCJkYVwiLCAoKSA9PiBpbXBvcnQoJy4vZGEtYmZlOTIwY2UuanMnKV0sXG4gIFtcImRlXCIsICgpID0+IGltcG9ydCgnLi9kZS0yMDliN2NkMi5qcycpXSxcbiAgW1wiZGUtYXRcIiwgKCkgPT4gaW1wb3J0KCcuL2RlLWF0LWJkYmZiMWFlLmpzJyldLFxuICBbXCJkZS1jaFwiLCAoKSA9PiBpbXBvcnQoJy4vZGUtY2gtOWUwZTE3YzEuanMnKV0sXG4gIFtcImVsXCIsICgpID0+IGltcG9ydCgnLi9lbC1kZTUyY2FlMS5qcycpXSxcbiAgW1wiZW5cIiwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBlbiQxOyB9KV0sXG4gIFtcImVuLWF1XCIsICgpID0+IGltcG9ydCgnLi9lbi1hdS1mMDBjZjk3YS5qcycpXSxcbiAgW1wiZW4tY2FcIiwgKCkgPT4gaW1wb3J0KCcuL2VuLWNhLWRjMTA3YjdjLmpzJyldLFxuICBbXCJlbi1nYlwiLCAoKSA9PiBpbXBvcnQoJy4vZW4tZ2ItY2JmMTZmYzIuanMnKV0sXG4gIFtcImVzXCIsICgpID0+IGltcG9ydCgnLi9lcy1iYTBjOWE3Ni5qcycpXSxcbiAgW1wiZXMtbXhcIiwgKCkgPT4gaW1wb3J0KCcuL2VzLW14LTlmNTE0NWQ3LmpzJyldLFxuICBbXCJldFwiLCAoKSA9PiBpbXBvcnQoJy4vZXQtODIxOTc1OTAuanMnKV0sXG4gIFtcImZpXCIsICgpID0+IGltcG9ydCgnLi9maS1mYWVlNTc5Ni5qcycpXSxcbiAgW1wiZnJcIiwgKCkgPT4gaW1wb3J0KCcuL2ZyLTk4NGJhZTY2LmpzJyldLFxuICBbXCJmci1jaFwiLCAoKSA9PiBpbXBvcnQoJy4vZnItY2gtZGRkYjIxMmQuanMnKV0sXG4gIFtcImhlXCIsICgpID0+IGltcG9ydCgnLi9oZS1kNzVmZTBhMi5qcycpXSxcbiAgW1wiaGlcIiwgKCkgPT4gaW1wb3J0KCcuL2hpLWM0NjU3YzMwLmpzJyldLFxuICBbXCJoclwiLCAoKSA9PiBpbXBvcnQoJy4vaHItNWJjOGI3OGQuanMnKV0sXG4gIFtcImh1XCIsICgpID0+IGltcG9ydCgnLi9odS01MmE2NzM2Zi5qcycpXSxcbiAgW1wiaWRcIiwgKCkgPT4gaW1wb3J0KCcuL2lkLTljODllMGVmLmpzJyldLFxuICBbXCJpdFwiLCAoKSA9PiBpbXBvcnQoJy4vaXQtMTFhYjM1NTQuanMnKV0sXG4gIFtcIml0LWNoXCIsICgpID0+IGltcG9ydCgnLi9pdC1jaC04NzczYzJiNS5qcycpXSxcbiAgW1wiamFcIiwgKCkgPT4gaW1wb3J0KCcuL2phLTVmZjM1OWQwLmpzJyldLFxuICBbXCJrb1wiLCAoKSA9PiBpbXBvcnQoJy4va28tMTc1YmYwZTMuanMnKV0sXG4gIFtcImx0XCIsICgpID0+IGltcG9ydCgnLi9sdC1kNjE5NTZlYy5qcycpXSxcbiAgW1wibHZcIiwgKCkgPT4gaW1wb3J0KCcuL2x2LWJhZDA2MjM1LmpzJyldLFxuICBbXCJta1wiLCAoKSA9PiBpbXBvcnQoJy4vbWstMmRkZjhkYzYuanMnKV0sXG4gIFtcIm5sXCIsICgpID0+IGltcG9ydCgnLi9ubC03MzIwZTIxOS5qcycpXSxcbiAgW1wibmJcIiwgKCkgPT4gaW1wb3J0KCcuL25iLWM2ZGE3YWM2LmpzJyldLFxuICBbXCJwbFwiLCAoKSA9PiBpbXBvcnQoJy4vcGwtNGNiMDdiMzcuanMnKV0sXG4gIFtcInB0XCIsICgpID0+IGltcG9ydCgnLi9wdC0zNTEwNTI0OC5qcycpXSxcbiAgW1wicHQtYnJcIiwgKCkgPT4gaW1wb3J0KCcuL3B0LWJyLTlmNzE3ZTBmLmpzJyldLFxuICBbXCJyb1wiLCAoKSA9PiBpbXBvcnQoJy4vcm8tZmJiNzdkY2YuanMnKV0sXG4gIFtcInJ1XCIsICgpID0+IGltcG9ydCgnLi9ydS04NDgyNmNjZi5qcycpXSxcbiAgW1wic2tcIiwgKCkgPT4gaW1wb3J0KCcuL3NrLWNlYjAxMjE0LmpzJyldLFxuICBbXCJzbFwiLCAoKSA9PiBpbXBvcnQoJy4vc2wtNzExMzdjYWEuanMnKV0sXG4gIFtcInNyXCIsICgpID0+IGltcG9ydCgnLi9zci05NjRjNGI2My5qcycpXSxcbiAgW1wic3ZcIiwgKCkgPT4gaW1wb3J0KCcuL3N2LTEyZjU0NzUwLmpzJyldLFxuICBbXCJ0aFwiLCAoKSA9PiBpbXBvcnQoJy4vdGgtZjVmOTUyNDAuanMnKV0sXG4gIFtcInRyXCIsICgpID0+IGltcG9ydCgnLi90ci05MTg1MWRjNS5qcycpXSxcbiAgW1widWtcIiwgKCkgPT4gaW1wb3J0KCcuL3VrLTI1MDc4YjYyLmpzJyldLFxuICBbXCJ2aVwiLCAoKSA9PiBpbXBvcnQoJy4vdmktZjU1N2QxNTkuanMnKV0sXG4gIFtcInpoLWNuXCIsICgpID0+IGltcG9ydCgnLi96aC1jbi00N2ZjYzU2Mi5qcycpXSxcbiAgW1wiemgtaGtcIiwgKCkgPT4gaW1wb3J0KCcuL3poLWhrLTIyNzJlZmYxLmpzJyldLFxuICBbXCJ6aC10d1wiLCAoKSA9PiBpbXBvcnQoJy4vemgtdHctYjExOTY4Y2UuanMnKV0sXG5dKTtcbmRheWpzLmV4dGVuZChjdXN0b21QYXJzZUZvcm1hdCk7XG5kYXlqcy5leHRlbmQobG9jYWxlRGF0YSk7XG5kYXlqcy5leHRlbmQobG9jYWxpemVkRm9ybWF0KTtcbmRheWpzLmV4dGVuZChwcmVQYXJzZVBvc3RGb3JtYXQpO1xuZGF5anMuZXh0ZW5kKHVwZGF0ZUxvY2FsZSk7XG5jb25zdCBJbnB1dFRpbWVQaWNrZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuY2FsY2l0ZUlucHV0VGltZVBpY2tlckJlZm9yZUNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW5wdXRUaW1lUGlja2VyQmVmb3JlQ2xvc2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQmVmb3JlT3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUlucHV0VGltZVBpY2tlckJlZm9yZU9wZW5cIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW5wdXRUaW1lUGlja2VyQ2hhbmdlXCIsIDcpO1xuICAgIHRoaXMuY2FsY2l0ZUlucHV0VGltZVBpY2tlckNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW5wdXRUaW1lUGlja2VyQ2xvc2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyT3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUlucHV0VGltZVBpY2tlck9wZW5cIiwgNik7XG4gICAgdGhpcy5mb2N1c09uT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuZGlhbG9nSWQgPSBgdGltZS1waWNrZXItZGlhbG9nLS0ke2d1aWQoKX1gO1xuICAgIC8qKiB3aGV0aGVyIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgd2FzIGNoYW5nZWQgYXMgYSByZXN1bHQgb2YgdXNlciB0eXBpbmcgb3Igbm90ICovXG4gICAgdGhpcy51c2VyQ2hhbmdlZFZhbHVlID0gZmFsc2U7XG4gICAgdGhpcy5yZWZlcmVuY2VFbGVtZW50SWQgPSBgaW5wdXQtdGltZS1waWNrZXItJHtndWlkKCl9YDtcbiAgICB0aGlzLm9wZW5UcmFuc2l0aW9uUHJvcCA9IFwib3BhY2l0eVwiO1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBFdmVudCBMaXN0ZW5lcnNcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB0aGlzLmhvc3RCbHVySGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSB0aGlzLmNhbGNpdGVJbnB1dEVsLnZhbHVlO1xuICAgICAgY29uc3QgZGVsb2NhbGl6ZWRJbnB1dFZhbHVlID0gdGhpcy5kZWxvY2FsaXplVGltZVN0cmluZyhpbnB1dFZhbHVlKTtcbiAgICAgIGlmICghZGVsb2NhbGl6ZWRJbnB1dFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoXCJcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkZWxvY2FsaXplZElucHV0VmFsdWUgIT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShkZWxvY2FsaXplZElucHV0VmFsdWUpO1xuICAgICAgfVxuICAgICAgY29uc3QgbG9jYWxpemVkVGltZVN0cmluZyA9IGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBpbmNsdWRlU2Vjb25kczogdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpLFxuICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCksXG4gICAgICB9KTtcbiAgICAgIGlmIChsb2NhbGl6ZWRUaW1lU3RyaW5nICE9PSBpbnB1dFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZWRUaW1lU3RyaW5nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxJbnB1dEZvY3VzSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnJlYWRPbmx5KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxJbnB1dElucHV0SGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBlZmZlY3RpdmVMb2NhbGU6IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0gPSB0aGlzO1xuICAgICAgaWYgKG51bWJlcmluZ1N5c3RlbSAmJiBudW1iZXJpbmdTeXN0ZW0gIT09IFwibGF0blwiKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgIG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgICB1c2VHcm91cGluZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHZhbHVlSW5OdW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJTdHJpbmdGb3JtYXR0ZXJcbiAgICAgICAgICAuZGVsb2NhbGl6ZSh0YXJnZXQudmFsdWUpXG4gICAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgICAgLm1hcCgoY2hhcikgPT4gbnVtYmVyS2V5cy5pbmNsdWRlcyhjaGFyKVxuICAgICAgICAgID8gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdHRlci5mb3JtYXQoTnVtYmVyKGNoYXIpKVxuICAgICAgICAgIDogY2hhcilcbiAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHZhbHVlSW5OdW1iZXJpbmdTeXN0ZW0pO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy50aW1lUGlja2VyQ2hhbmdlSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgIGNvbnN0IGluY2x1ZGVTZWNvbmRzID0gdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpO1xuICAgICAgdGhpcy5zZXRWYWx1ZSh0b0lTT1RpbWVTdHJpbmcodmFsdWUsIGluY2x1ZGVTZWNvbmRzKSk7XG4gICAgICB0aGlzLnNldElucHV0VmFsdWUobG9jYWxpemVUaW1lU3RyaW5nKHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGluY2x1ZGVTZWNvbmRzLFxuICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCksXG4gICAgICB9KSk7XG4gICAgfTtcbiAgICB0aGlzLnBvcG92ZXJDbG9zZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBkZWFjdGl2YXRlRm9jdXNUcmFwKHRoaXMsIHtcbiAgICAgICAgb25EZWFjdGl2YXRlOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbC5zZXRGb2N1cygpO1xuICAgICAgICAgIHRoaXMuZm9jdXNPbk9wZW4gPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgfTtcbiAgICB0aGlzLnBvcG92ZXJPcGVuSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGFjdGl2YXRlRm9jdXNUcmFwKHRoaXMsIHtcbiAgICAgICAgb25BY3RpdmF0ZTogKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmZvY3VzT25PcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNpdGVUaW1lUGlja2VyRWwuc2V0Rm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNPbk9wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMua2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgZGVmYXVsdFByZXZlbnRlZCwga2V5IH0gPSBldmVudDtcbiAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICBpZiAoc3VibWl0Rm9ybSh0aGlzKSkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbC5zZXRGb2N1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmNhbGNpdGVUaW1lUGlja2VyRWwpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5kZWxvY2FsaXplVGltZVN0cmluZyh0aGlzLmNhbGNpdGVJbnB1dEVsLnZhbHVlKTtcbiAgICAgICAgaWYgKGlzVmFsaWRUaW1lKG5ld1ZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuc2V0VmFsdWUobmV3VmFsdWUpO1xuICAgICAgICAgIGNvbnN0IGxvY2FsaXplZFRpbWVTdHJpbmcgPSBsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgICAgIGluY2x1ZGVTZWNvbmRzOiB0aGlzLnNob3VsZEluY2x1ZGVTZWNvbmRzKCksXG4gICAgICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG5ld1ZhbHVlICYmIHRoaXMuY2FsY2l0ZUlucHV0RWwudmFsdWUgIT09IGxvY2FsaXplZFRpbWVTdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZWRUaW1lU3RyaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xuICAgICAgICB0aGlzLm9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmZvY3VzT25PcGVuID0gdHJ1ZTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJFc2NhcGVcIiAmJiB0aGlzLm9wZW4pIHtcbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUlucHV0RWwuc2V0Rm9jdXMoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuc2V0Q2FsY2l0ZVBvcG92ZXJFbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5wb3BvdmVyRWwgPSBlbDtcbiAgICB9O1xuICAgIHRoaXMuc2V0SW5wdXRBbmRUcmFuc2l0aW9uRWwgPSAoZWwpID0+IHtcbiAgICAgIHRoaXMuY2FsY2l0ZUlucHV0RWwgPSBlbDtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkVsID0gZWw7XG4gICAgfTtcbiAgICB0aGlzLnNldENhbGNpdGVUaW1lUGlja2VyRWwgPSAoZWwpID0+IHtcbiAgICAgIHRoaXMuY2FsY2l0ZVRpbWVQaWNrZXJFbCA9IGVsO1xuICAgICAgY29ubmVjdEZvY3VzVHJhcCh0aGlzLCB7XG4gICAgICAgIGZvY3VzVHJhcEVsOiBlbCxcbiAgICAgICAgZm9jdXNUcmFwT3B0aW9uczoge1xuICAgICAgICAgIGluaXRpYWxGb2N1czogZmFsc2UsXG4gICAgICAgICAgc2V0UmV0dXJuRm9jdXM6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnNldElucHV0VmFsdWUgPSAobmV3SW5wdXRWYWx1ZSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmNhbGNpdGVJbnB1dEVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FsY2l0ZUlucHV0RWwudmFsdWUgPSBuZXdJbnB1dFZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgYW5kIGVtaXRzIGEgY2hhbmdlIGV2ZW50LlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byB1cGRhdGUgdGhlIHZhbHVlIGFzIGEgcmVzdWx0IG9mIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKi9cbiAgICB0aGlzLnNldFZhbHVlID0gKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IGZvcm1hdFRpbWVTdHJpbmcodmFsdWUpIHx8IFwiXCI7XG4gICAgICBpZiAobmV3VmFsdWUgPT09IG9sZFZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IHRydWU7XG4gICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWUgfHwgXCJcIjtcbiAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQ2hhbmdlLmVtaXQoKTtcbiAgICAgIGlmIChjaGFuZ2VFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgICAgIHZhbHVlOiBvbGRWYWx1ZSxcbiAgICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCksXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIGRpcmVjdGx5IHdpdGhvdXQgZW1pdHRpbmcgYSBjaGFuZ2UgZXZlbnQuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIHVwZGF0ZSB0aGUgdmFsdWUgb24gaW5pdGlhbCBsb2FkIGFuZCB3aGVuIHByb3BzIGNoYW5nZSB0aGF0IGFyZSBub3QgdGhlIHJlc3VsdCBvZiB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICovXG4gICAgdGhpcy5zZXRWYWx1ZURpcmVjdGx5ID0gKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCBpbmNsdWRlU2Vjb25kcyA9IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKTtcbiAgICAgIHRoaXMudmFsdWUgPSB0b0lTT1RpbWVTdHJpbmcodmFsdWUsIGluY2x1ZGVTZWNvbmRzKTtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLnZhbHVlXG4gICAgICAgID8gbG9jYWxpemVUaW1lU3RyaW5nKHtcbiAgICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgICAgICBpbmNsdWRlU2Vjb25kcyxcbiAgICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgICAgICB9KVxuICAgICAgICA6IFwiXCIpO1xuICAgIH07XG4gICAgdGhpcy5vbklucHV0V3JhcHBlckNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcbiAgICB9O1xuICAgIHRoaXMuZGVhY3RpdmF0ZSA9ICgpID0+IHtcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIH07XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuZm9jdXNUcmFwRGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZvcm0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZWFkT25seSA9IGZhbHNlO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubmFtZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJlcXVpcmVkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuc3RhdHVzID0gXCJpZGxlXCI7XG4gICAgdGhpcy5vdmVybGF5UG9zaXRpb25pbmcgPSBcImFic29sdXRlXCI7XG4gICAgdGhpcy5wbGFjZW1lbnQgPSBcImF1dG9cIjtcbiAgICB0aGlzLnN0ZXAgPSA2MDtcbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IFwiXCI7XG4gIH1cbiAgb3BlbkhhbmRsZXIob3Blbikge1xuICAgIG9uVG9nZ2xlT3BlbkNsb3NlQ29tcG9uZW50KHRoaXMpO1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZE9ubHkpIHtcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob3Blbikge1xuICAgICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVGb2N1c1RyYXBEaXNhYmxlZChmb2N1c1RyYXBEaXNhYmxlZCkge1xuICAgIGlmICghdGhpcy5vcGVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvY3VzVHJhcERpc2FibGVkID8gZGVhY3RpdmF0ZUZvY3VzVHJhcCh0aGlzKSA6IGFjdGl2YXRlRm9jdXNUcmFwKHRoaXMpO1xuICB9XG4gIGhhbmRsZURpc2FibGVkQW5kUmVhZE9ubHlDaGFuZ2UodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgb25NZXNzYWdlc0NoYW5nZSgpIHtcbiAgICAvKiB3aXJlZCB1cCBieSB0OW4gdXRpbCAqL1xuICB9XG4gIG51bWJlcmluZ1N5c3RlbVdhdGNoZXIobnVtYmVyaW5nU3lzdGVtKSB7XG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICBpbmNsdWRlU2Vjb25kczogdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpLFxuICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgIH0pKTtcbiAgfVxuICBzdGVwV2F0Y2hlcihuZXdTdGVwLCBvbGRTdGVwKSB7XG4gICAgaWYgKChvbGRTdGVwID49IDYwICYmIG5ld1N0ZXAgPiAwICYmIG5ld1N0ZXAgPCA2MCkgfHxcbiAgICAgIChuZXdTdGVwID49IDYwICYmIG9sZFN0ZXAgPiAwICYmIG9sZFN0ZXAgPCA2MCkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWVEaXJlY3RseSh0aGlzLnZhbHVlKTtcbiAgICB9XG4gIH1cbiAgdmFsdWVXYXRjaGVyKG5ld1ZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLnVzZXJDaGFuZ2VkVmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWVEaXJlY3RseShuZXdWYWx1ZSk7XG4gICAgfVxuICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IGZhbHNlO1xuICB9XG4gIGFzeW5jIGVmZmVjdGl2ZUxvY2FsZVdhdGNoZXIobG9jYWxlKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRGF0ZVRpbWVMb2NhbGVEYXRhKCk7XG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICBpbmNsdWRlU2Vjb25kczogdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpLFxuICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgIH0pKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqIFNldHMgZm9jdXMgb24gdGhlIGNvbXBvbmVudC4gKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIGRlbGF5ZWRcbiAgICovXG4gIGFzeW5jIHJlcG9zaXRpb24oZGVsYXllZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5wb3BvdmVyRWw/LnJlcG9zaXRpb24oZGVsYXllZCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBvbkJlZm9yZU9wZW4oKSB7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQmVmb3JlT3Blbi5lbWl0KCk7XG4gIH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY2FsY2l0ZUlucHV0VGltZVBpY2tlck9wZW4uZW1pdCgpO1xuICB9XG4gIG9uQmVmb3JlQ2xvc2UoKSB7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQmVmb3JlQ2xvc2UuZW1pdCgpO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jYWxjaXRlSW5wdXRUaW1lUGlja2VyQ2xvc2UuZW1pdCgpO1xuICB9XG4gIGRlbG9jYWxpemVUaW1lU3RyaW5nKHZhbHVlKSB7XG4gICAgLy8gd2UgbmVlZCB0byBzZXQgdGhlIGNvcnJlc3BvbmRpbmcgbG9jYWxlIGJlZm9yZSBwYXJzaW5nLCBvdGhlcndpc2UgaXQgZGVmYXVsdHMgdG8gRW5nbGlzaCAocG9zc2libGUgZGF5anMgYnVnKVxuICAgIGRheWpzLmxvY2FsZSh0aGlzLmVmZmVjdGl2ZUxvY2FsZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBjb25zdCBub25GcmFjdGlvbmFsU2Vjb25kUGFydHMgPSB0aGlzLmRlbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh2YWx1ZSk7XG4gICAgbGV0IGRlbG9jYWxpemVkVGltZVN0cmluZztcbiAgICBpZiAodGhpcy5zaG91bGRJbmNsdWRlRnJhY3Rpb25hbFNlY29uZHMoKSkge1xuICAgICAgY29uc3Qgc3RlcFByZWNpc2lvbiA9IGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKTtcbiAgICAgIGNvbnN0IGNlbnRpc2Vjb25kUGFydHMgPSB0aGlzLmRlbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh2YWx1ZSwgXCJTXCIpO1xuICAgICAgaWYgKHN0ZXBQcmVjaXNpb24gPT09IDEpIHtcbiAgICAgICAgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nID1cbiAgICAgICAgICBjZW50aXNlY29uZFBhcnRzLm1pbGxpc2Vjb25kICE9PSAwXG4gICAgICAgICAgICA/IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhjZW50aXNlY29uZFBhcnRzKVxuICAgICAgICAgICAgOiB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMobm9uRnJhY3Rpb25hbFNlY29uZFBhcnRzKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBkZWNpc2Vjb25kUGFydHMgPSB0aGlzLmRlbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh2YWx1ZSwgXCJTU1wiKTtcbiAgICAgICAgaWYgKHN0ZXBQcmVjaXNpb24gPT09IDIpIHtcbiAgICAgICAgICBpZiAoZGVjaXNlY29uZFBhcnRzLm1pbGxpc2Vjb25kICE9PSAwKSB7XG4gICAgICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMoZGVjaXNlY29uZFBhcnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VudGlzZWNvbmRQYXJ0cy5taWxsaXNlY29uZCAhPT0gMCkge1xuICAgICAgICAgICAgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nID0gdGhpcy5nZXRUaW1lU3RyaW5nRnJvbVBhcnRzKGNlbnRpc2Vjb25kUGFydHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhub25GcmFjdGlvbmFsU2Vjb25kUGFydHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGVwUHJlY2lzaW9uID49IDMpIHtcbiAgICAgICAgICBjb25zdCBtaWxsaXNlY29uZFBhcnRzID0gdGhpcy5kZWxvY2FsaXplVGltZVN0cmluZ1RvUGFydHModmFsdWUsIFwiU1NTXCIpO1xuICAgICAgICAgIGlmIChtaWxsaXNlY29uZFBhcnRzLm1pbGxpc2Vjb25kICE9PSAwKSB7XG4gICAgICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMobWlsbGlzZWNvbmRQYXJ0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGRlY2lzZWNvbmRQYXJ0cy5taWxsaXNlY29uZCAhPT0gMCkge1xuICAgICAgICAgICAgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nID0gdGhpcy5nZXRUaW1lU3RyaW5nRnJvbVBhcnRzKGRlY2lzZWNvbmRQYXJ0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGNlbnRpc2Vjb25kUGFydHMubWlsbGlzZWNvbmQgIT09IDApIHtcbiAgICAgICAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhjZW50aXNlY29uZFBhcnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMobm9uRnJhY3Rpb25hbFNlY29uZFBhcnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMobm9uRnJhY3Rpb25hbFNlY29uZFBhcnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlbG9jYWxpemVkVGltZVN0cmluZztcbiAgfVxuICBkZWxvY2FsaXplVGltZVN0cmluZ1RvUGFydHMobG9jYWxpemVkVGltZVN0cmluZywgZnJhY3Rpb25hbFNlY29uZEZvcm1hdFRva2VuKSB7XG4gICAgY29uc3QgbHRzRm9ybWF0U3RyaW5nID0gdGhpcy5sb2NhbGVDb25maWc/LmZvcm1hdHM/LkxUUztcbiAgICBjb25zdCBmcmFjdGlvbmFsU2Vjb25kVG9rZW5NYXRjaCA9IGx0c0Zvcm1hdFN0cmluZy5tYXRjaCgvc3NcXC4qKFMrKS9nKTtcbiAgICBpZiAoZnJhY3Rpb25hbFNlY29uZEZvcm1hdFRva2VuICYmIHRoaXMuc2hvdWxkSW5jbHVkZUZyYWN0aW9uYWxTZWNvbmRzKCkpIHtcbiAgICAgIGNvbnN0IHNlY29uZEZvcm1hdFRva2VuID0gYHNzLiR7ZnJhY3Rpb25hbFNlY29uZEZvcm1hdFRva2VufWA7XG4gICAgICB0aGlzLmxvY2FsZUNvbmZpZy5mb3JtYXRzLkxUUyA9IGZyYWN0aW9uYWxTZWNvbmRUb2tlbk1hdGNoXG4gICAgICAgID8gbHRzRm9ybWF0U3RyaW5nLnJlcGxhY2UoZnJhY3Rpb25hbFNlY29uZFRva2VuTWF0Y2hbMF0sIHNlY29uZEZvcm1hdFRva2VuKVxuICAgICAgICA6IGx0c0Zvcm1hdFN0cmluZy5yZXBsYWNlKFwic3NcIiwgc2Vjb25kRm9ybWF0VG9rZW4pO1xuICAgIH1cbiAgICBlbHNlIGlmIChmcmFjdGlvbmFsU2Vjb25kVG9rZW5NYXRjaCkge1xuICAgICAgdGhpcy5sb2NhbGVDb25maWcuZm9ybWF0cy5MVFMgPSBsdHNGb3JtYXRTdHJpbmcucmVwbGFjZShmcmFjdGlvbmFsU2Vjb25kVG9rZW5NYXRjaFswXSwgXCJzc1wiKTtcbiAgICB9XG4gICAgZGF5anMudXBkYXRlTG9jYWxlKHRoaXMuZ2V0U3VwcG9ydGVkRGF5anNMb2NhbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKHRoaXMuZWZmZWN0aXZlTG9jYWxlKSksIHRoaXMubG9jYWxlQ29uZmlnKTtcbiAgICBjb25zdCBkYXlqc1BhcnNlUmVzdWx0ID0gZGF5anMobG9jYWxpemVkVGltZVN0cmluZywgW1wiTFRTXCIsIFwiTFRcIl0pO1xuICAgIGlmIChkYXlqc1BhcnNlUmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaG91cjogZGF5anNQYXJzZVJlc3VsdC5nZXQoXCJob3VyXCIpLFxuICAgICAgICBtaW51dGU6IGRheWpzUGFyc2VSZXN1bHQuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICBzZWNvbmQ6IGRheWpzUGFyc2VSZXN1bHQuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICBtaWxsaXNlY29uZDogZGF5anNQYXJzZVJlc3VsdC5nZXQoXCJtaWxsaXNlY29uZFwiKSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBob3VyOiBudWxsLFxuICAgICAgbWludXRlOiBudWxsLFxuICAgICAgc2Vjb25kOiBudWxsLFxuICAgICAgbWlsbGlzZWNvbmQ6IG51bGwsXG4gICAgfTtcbiAgfVxuICBnZXRUaW1lU3RyaW5nRnJvbVBhcnRzKHBhcnRzKSB7XG4gICAgbGV0IHRpbWVTdHJpbmcgPSBcIlwiO1xuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHJldHVybiB0aW1lU3RyaW5nO1xuICAgIH1cbiAgICBpZiAocGFydHMuaG91ciAhPT0gbnVsbCAmJiBwYXJ0cy5taW51dGUgIT09IG51bGwpIHtcbiAgICAgIHRpbWVTdHJpbmcgPSBgJHtmb3JtYXRUaW1lUGFydChwYXJ0cy5ob3VyKX06JHtmb3JtYXRUaW1lUGFydChwYXJ0cy5taW51dGUpfWA7XG4gICAgICBpZiAodGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpICYmIHBhcnRzLnNlY29uZCAhPT0gbnVsbCkge1xuICAgICAgICB0aW1lU3RyaW5nICs9IGA6JHtmb3JtYXRUaW1lUGFydChwYXJ0cy5zZWNvbmQpfWA7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZEluY2x1ZGVGcmFjdGlvbmFsU2Vjb25kcygpICYmIHBhcnRzLm1pbGxpc2Vjb25kICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3Qgc2Vjb25kID0gKHBhcnRzLm1pbGxpc2Vjb25kICogMC4wMDEpLnRvRml4ZWQoZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApKTtcbiAgICAgICAgICB0aW1lU3RyaW5nICs9IGAuJHtzZWNvbmQudG9TdHJpbmcoKS5yZXBsYWNlKFwiMC5cIiwgXCJcIil9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGltZVN0cmluZztcbiAgfVxuICBnZXRTdXBwb3J0ZWREYXlqc0xvY2FsZShsb2NhbGUpIHtcbiAgICBjb25zdCBkYXlqc0xvY2FsZSA9IGxvY2FsZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChkYXlqc0xvY2FsZSA9PT0gXCJub1wiKSB7XG4gICAgICByZXR1cm4gXCJuYlwiO1xuICAgIH1cbiAgICBpZiAoZGF5anNMb2NhbGUgPT09IFwicHQtcHRcIikge1xuICAgICAgcmV0dXJuIFwicHRcIjtcbiAgICB9XG4gICAgcmV0dXJuIGRheWpzTG9jYWxlO1xuICB9XG4gIGFzeW5jIGxvYWREYXRlVGltZUxvY2FsZURhdGEoKSB7XG4gICAgbGV0IHN1cHBvcnRlZExvY2FsZSA9IGdldFN1cHBvcnRlZExvY2FsZSh0aGlzLmVmZmVjdGl2ZUxvY2FsZSkudG9Mb3dlckNhc2UoKTtcbiAgICBzdXBwb3J0ZWRMb2NhbGUgPSB0aGlzLmdldFN1cHBvcnRlZERheWpzTG9jYWxlKHN1cHBvcnRlZExvY2FsZSk7XG4gICAgY29uc3QgeyBkZWZhdWx0OiBsb2NhbGVDb25maWcgfSA9IGF3YWl0IHN1cHBvcnRlZERheWpzTG9jYWxlVG9Mb2NhbGVDb25maWdJbXBvcnQuZ2V0KHN1cHBvcnRlZExvY2FsZSkoKTtcbiAgICB0aGlzLmxvY2FsZUNvbmZpZyA9IGxvY2FsZUNvbmZpZztcbiAgICBkYXlqcy5sb2NhbGUodGhpcy5sb2NhbGVDb25maWcsIG51bGwsIHRydWUpO1xuICAgIGRheWpzLnVwZGF0ZUxvY2FsZShzdXBwb3J0ZWRMb2NhbGUsIHRoaXMuZ2V0RXh0ZW5kZWRMb2NhbGVDb25maWcoc3VwcG9ydGVkTG9jYWxlKSk7XG4gIH1cbiAgZ2V0RXh0ZW5kZWRMb2NhbGVDb25maWcobG9jYWxlKSB7XG4gICAgaWYgKGxvY2FsZSA9PT0gXCJhclwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXJpZGllbTogKGhvdXIpID0+IChob3VyID4gMTIgPyBcItmFXCIgOiBcIti1XCIpLFxuICAgICAgICBmb3JtYXRzOiB7XG4gICAgICAgICAgTFQ6IFwiSEg6bW0gQVwiLFxuICAgICAgICAgIExUUzogXCJISDptbTpzcyBBXCIsXG4gICAgICAgICAgTDogXCJERC9NTS9ZWVlZXCIsXG4gICAgICAgICAgTEw6IFwiRCBNTU1NIFlZWVlcIixcbiAgICAgICAgICBMTEw6IFwiRCBNTU1NIFlZWVkgSEg6bW0gQVwiLFxuICAgICAgICAgIExMTEw6IFwiZGRkZCBEIE1NTU0gWVlZWSBISDptbSBBXCIsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcImVuLWF1XCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwicG1cIiA6IFwiYW1cIiksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcImVuLWNhXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwicC5tLlwiIDogXCJhLm0uXCIpLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxvY2FsZSA9PT0gXCJlbFwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXJpZGllbTogKGhvdXIpID0+IChob3VyID4gMTIgPyBcIs68Ls68LlwiIDogXCLPgC7OvC5cIiksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcImhpXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvcm1hdHM6IHtcbiAgICAgICAgICBMVDogXCJoOm1tIEFcIixcbiAgICAgICAgICBMVFM6IFwiaDptbTpzcyBBXCIsXG4gICAgICAgICAgTDogXCJERC9NTS9ZWVlZXCIsXG4gICAgICAgICAgTEw6IFwiRCBNTU1NIFlZWVlcIixcbiAgICAgICAgICBMTEw6IFwiRCBNTU1NIFlZWVksIGg6bW0gQVwiLFxuICAgICAgICAgIExMTEw6IFwiZGRkZCwgRCBNTU1NIFlZWVksIGg6bW0gQVwiLFxuICAgICAgICB9LFxuICAgICAgICBtZXJpZGllbTogKGhvdXIpID0+IChob3VyID4gMTIgPyBcInBtXCIgOiBcImFtXCIpLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGxvY2FsZSA9PT0gXCJrb1wiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXJpZGllbTogKGhvdXIpID0+IChob3VyID4gMTIgPyBcIuyYpO2bhFwiIDogXCLsmKTsoIRcIiksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcInpoLXR3XCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvcm1hdHM6IHtcbiAgICAgICAgICBMVDogXCJBSEg6bW1cIixcbiAgICAgICAgICBMVFM6IFwiQUhIOm1tOnNzXCIsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcInpoLWhrXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvcm1hdHM6IHtcbiAgICAgICAgICBMVDogXCJBSEg6bW1cIixcbiAgICAgICAgICBMVFM6IFwiQUhIOm1tOnNzXCIsXG4gICAgICAgIH0sXG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwi5LiL5Y2IXCIgOiBcIuS4iuWNiFwiKSxcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIG9uTGFiZWxDbGljaygpIHtcbiAgICB0aGlzLnNldEZvY3VzKCk7XG4gIH1cbiAgc2hvdWxkSW5jbHVkZVNlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RlcCA8IDYwO1xuICB9XG4gIHNob3VsZEluY2x1ZGVGcmFjdGlvbmFsU2Vjb25kcygpIHtcbiAgICByZXR1cm4gZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApID4gMDtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBpZiAoaXNWYWxpZFRpbWUodGhpcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWVEaXJlY3RseSh0aGlzLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25uZWN0TGFiZWwodGhpcyk7XG4gICAgY29ubmVjdEZvcm0odGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW3NldFVwTWVzc2FnZXModGhpcyksIHRoaXMubG9hZERhdGVUaW1lTG9jYWxlRGF0YSgpXSk7XG4gICAgaWYgKHRoaXMub3Blbikge1xuICAgICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gICAgfVxuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICAgIGlmIChpc1ZhbGlkVGltZSh0aGlzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBpbmNsdWRlU2Vjb25kczogdGhpcy5zaG91bGRJbmNsdWRlU2Vjb25kcygpLFxuICAgICAgICBmcmFjdGlvbmFsU2Vjb25kRGlnaXRzOiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCksXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBkaXNjb25uZWN0TGFiZWwodGhpcyk7XG4gICAgZGlzY29ubmVjdEZvcm0odGhpcyk7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkZWFjdGl2YXRlRm9jdXNUcmFwKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkaXNhYmxlZCwgbWVzc2FnZXMsIHJlYWRPbmx5LCBkaWFsb2dJZCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBvbkJsdXI6IHRoaXMuaG9zdEJsdXJIYW5kbGVyLCBvbktleURvd246IHRoaXMua2V5RG93bkhhbmRsZXIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImlucHV0LXdyYXBwZXJcIiwgb25DbGljazogdGhpcy5vbklucHV0V3JhcHBlckNsaWNrIH0sIGgoXCJjYWxjaXRlLWlucHV0LXRleHRcIiwgeyBcImFyaWEtYXV0b2NvbXBsZXRlXCI6IFwibm9uZVwiLCBcImFyaWEtaGFzcG9wdXBcIjogXCJkaWFsb2dcIiwgZGlzYWJsZWQ6IGRpc2FibGVkLCBpY29uOiBcImNsb2NrXCIsIGlkOiB0aGlzLnJlZmVyZW5jZUVsZW1lbnRJZCwgbGFiZWw6IGdldExhYmVsVGV4dCh0aGlzKSwgbGFuZzogdGhpcy5lZmZlY3RpdmVMb2NhbGUsIG9uQ2FsY2l0ZUlucHV0VGV4dElucHV0OiB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0SW5wdXRIYW5kbGVyLCBvbkNhbGNpdGVJbnRlcm5hbElucHV0VGV4dEZvY3VzOiB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0Rm9jdXNIYW5kbGVyLCByZWFkT25seTogcmVhZE9ubHksIHJvbGU6IFwiY29tYm9ib3hcIiwgc2NhbGU6IHRoaXMuc2NhbGUsIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiB0aGlzLnNldElucHV0QW5kVHJhbnNpdGlvbkVsIH0pLCAhdGhpcy5yZWFkT25seSAmJiB0aGlzLnJlbmRlclRvZ2dsZUljb24odGhpcy5vcGVuKSksIGgoXCJjYWxjaXRlLXBvcG92ZXJcIiwgeyBmb2N1c1RyYXBEaXNhYmxlZDogdHJ1ZSwgaWQ6IGRpYWxvZ0lkLCBsYWJlbDogbWVzc2FnZXMuY2hvb3NlVGltZSwgbGFuZzogdGhpcy5lZmZlY3RpdmVMb2NhbGUsIG9uQ2FsY2l0ZVBvcG92ZXJDbG9zZTogdGhpcy5wb3BvdmVyQ2xvc2VIYW5kbGVyLCBvbkNhbGNpdGVQb3BvdmVyT3BlbjogdGhpcy5wb3BvdmVyT3BlbkhhbmRsZXIsIG9wZW46IHRoaXMub3Blbiwgb3ZlcmxheVBvc2l0aW9uaW5nOiB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZywgcGxhY2VtZW50OiB0aGlzLnBsYWNlbWVudCwgcmVmZXJlbmNlRWxlbWVudDogdGhpcy5yZWZlcmVuY2VFbGVtZW50SWQsIHRyaWdnZXJEaXNhYmxlZDogdHJ1ZSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0Q2FsY2l0ZVBvcG92ZXJFbCB9LCBoKFwiY2FsY2l0ZS10aW1lLXBpY2tlclwiLCB7IGxhbmc6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLCBtZXNzYWdlT3ZlcnJpZGVzOiB0aGlzLm1lc3NhZ2VPdmVycmlkZXMsIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sIG9uQ2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZTogdGhpcy50aW1lUGlja2VyQ2hhbmdlSGFuZGxlciwgc2NhbGU6IHRoaXMuc2NhbGUsIHN0ZXA6IHRoaXMuc3RlcCwgdGFiSW5kZXg6IHRoaXMub3BlbiA/IHVuZGVmaW5lZCA6IC0xLCB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0Q2FsY2l0ZVRpbWVQaWNrZXJFbCB9KSksIGgoSGlkZGVuRm9ybUlucHV0U2xvdCwgeyBjb21wb25lbnQ6IHRoaXMgfSkpKTtcbiAgfVxuICByZW5kZXJUb2dnbGVJY29uKG9wZW4pIHtcbiAgICByZXR1cm4gKGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUyQxLnRvZ2dsZUljb24gfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IG9wZW4gPyBcImNoZXZyb24tdXBcIiA6IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBnZXRJY29uU2NhbGUodGhpcy5zY2FsZSkgfSkpKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGRlbGVnYXRlc0ZvY3VzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwib3BlblwiOiBbXCJvcGVuSGFuZGxlclwiXSxcbiAgICBcImZvY3VzVHJhcERpc2FibGVkXCI6IFtcImhhbmRsZUZvY3VzVHJhcERpc2FibGVkXCJdLFxuICAgIFwiZGlzYWJsZWRcIjogW1wiaGFuZGxlRGlzYWJsZWRBbmRSZWFkT25seUNoYW5nZVwiXSxcbiAgICBcInJlYWRPbmx5XCI6IFtcImhhbmRsZURpc2FibGVkQW5kUmVhZE9ubHlDaGFuZ2VcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJudW1iZXJpbmdTeXN0ZW1cIjogW1wibnVtYmVyaW5nU3lzdGVtV2F0Y2hlclwiXSxcbiAgICBcInN0ZXBcIjogW1wic3RlcFdhdGNoZXJcIl0sXG4gICAgXCJ2YWx1ZVwiOiBbXCJ2YWx1ZVdhdGNoZXJcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlV2F0Y2hlclwiXVxuICB9OyB9XG59O1xuSW5wdXRUaW1lUGlja2VyLnN0eWxlID0gaW5wdXRUaW1lUGlja2VyQ3NzO1xuXG5jb25zdCBDU1MgPSB7XG4gIGJ1dHRvbjogXCJidXR0b25cIixcbiAgYnV0dG9uQm90dG9tTGVmdDogXCJidXR0b24tLWJvdHRvbS1sZWZ0XCIsXG4gIGJ1dHRvbkJvdHRvbVJpZ2h0OiBcImJ1dHRvbi0tYm90dG9tLXJpZ2h0XCIsXG4gIGJ1dHRvbkZyYWN0aW9uYWxTZWNvbmREb3duOiBcImJ1dHRvbi0tZnJhY3Rpb25hbFNlY29uZC1kb3duXCIsXG4gIGJ1dHRvbkZyYWN0aW9uYWxTZWNvbmRVcDogXCJidXR0b24tLWZyYWN0aW9uYWxTZWNvbmQtdXBcIixcbiAgYnV0dG9uSG91ckRvd246IFwiYnV0dG9uLS1ob3VyLWRvd25cIixcbiAgYnV0dG9uSG91clVwOiBcImJ1dHRvbi0taG91ci11cFwiLFxuICBidXR0b25NZXJpZGllbURvd246IFwiYnV0dG9uLS1tZXJpZGllbS1kb3duXCIsXG4gIGJ1dHRvbk1lcmlkaWVtVXA6IFwiYnV0dG9uLS1tZXJpZGllbS11cFwiLFxuICBidXR0b25NaW51dGVEb3duOiBcImJ1dHRvbi0tbWludXRlLWRvd25cIixcbiAgYnV0dG9uTWludXRlVXA6IFwiYnV0dG9uLS1taW51dGUtdXBcIixcbiAgYnV0dG9uU2Vjb25kRG93bjogXCJidXR0b24tLXNlY29uZC1kb3duXCIsXG4gIGJ1dHRvblNlY29uZFVwOiBcImJ1dHRvbi0tc2Vjb25kLXVwXCIsXG4gIGJ1dHRvblRvcExlZnQ6IFwiYnV0dG9uLS10b3AtbGVmdFwiLFxuICBidXR0b25Ub3BSaWdodDogXCJidXR0b24tLXRvcC1yaWdodFwiLFxuICBjb2x1bW46IFwiY29sdW1uXCIsXG4gIGRlbGltaXRlcjogXCJkZWxpbWl0ZXJcIixcbiAgZnJhY3Rpb25hbFNlY29uZDogXCJmcmFjdGlvbmFsU2Vjb25kXCIsXG4gIGhvdXI6IFwiaG91clwiLFxuICBpbnB1dDogXCJpbnB1dFwiLFxuICBpbnB1dEZvY3VzOiBcImlucHV0Rm9jdXNcIixcbiAgbWVyaWRpZW06IFwibWVyaWRpZW1cIixcbiAgbWludXRlOiBcIm1pbnV0ZVwiLFxuICBzZWNvbmQ6IFwic2Vjb25kXCIsXG4gIHNob3dNZXJpZGllbTogXCJzaG93LW1lcmlkaWVtXCIsXG4gIHNob3dTZWNvbmQ6IFwic2hvdy1zZWNvbmRcIixcbiAgXCJzY2FsZS1zXCI6IFwic2NhbGUtc1wiLFxuICBcInNjYWxlLW1cIjogXCJzY2FsZS1tXCIsXG4gIFwic2NhbGUtbFwiOiBcInNjYWxlLWxcIixcbiAgdGltZVBpY2tlcjogXCJ0aW1lLXBpY2tlclwiLFxuICBtZXJpZGllbVN0YXJ0OiBcIm1lcmlkaWVtLS1zdGFydFwiLFxufTtcblxuY29uc3QgdGltZVBpY2tlckNzcyA9IFwiOmhvc3R7ZGlzcGxheTppbmxpbmUtYmxvY2t9LnRpbWUtcGlja2Vye2Rpc3BsYXk6ZmxleDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSk7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKTstLXR3LXNoYWRvdzowIDZweCAyMHB4IC00cHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwIDRweCAxMnB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjA4KTstLXR3LXNoYWRvdy1jb2xvcmVkOjAgNnB4IDIwcHggLTRweCB2YXIoLS10dy1zaGFkb3ctY29sb3IpLCAwIDRweCAxMnB4IC0ycHggdmFyKC0tdHctc2hhZG93LWNvbG9yKTtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyk7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpfS50aW1lLXBpY2tlciAuY29sdW1ue2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59LnRpbWUtcGlja2VyIC5tZXJpZGllbS0tc3RhcnR7b3JkZXI6LTF9LnRpbWUtcGlja2VyIC5idXR0b257ZGlzcGxheTppbmxpbmUtZmxleDtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKX0udGltZS1waWNrZXIgLmJ1dHRvbjpob3ZlciwudGltZS1waWNrZXIgLmJ1dHRvbjpmb2N1c3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0yKTtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lLW9mZnNldDoycHg7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgtaGVhZGVyKTtvdXRsaW5lLW9mZnNldDowfS50aW1lLXBpY2tlciAuYnV0dG9uOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKX0udGltZS1waWNrZXIgLmJ1dHRvbi50b3AtbGVmdHtib3JkZXItc3RhcnQtc3RhcnQtcmFkaXVzOnZhcigtLWNhbGNpdGUtYm9yZGVyLXJhZGl1cyl9LnRpbWUtcGlja2VyIC5idXR0b24uYm90dG9tLWxlZnR7Ym9yZGVyLWVuZC1zdGFydC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0udGltZS1waWNrZXIgLmJ1dHRvbi50b3AtcmlnaHR7Ym9yZGVyLXN0YXJ0LWVuZC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0udGltZS1waWNrZXIgLmJ1dHRvbi5ib3R0b20tcmlnaHR7Ym9yZGVyLWVuZC1lbmQtcmFkaXVzOnZhcigtLWNhbGNpdGUtYm9yZGVyLXJhZGl1cyl9LnRpbWUtcGlja2VyIC5idXR0b24gY2FsY2l0ZS1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0zKX0udGltZS1waWNrZXIgLmlucHV0e2Rpc3BsYXk6aW5saW5lLWZsZXg7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSk7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pfS50aW1lLXBpY2tlciAuaW5wdXQ6aG92ZXJ7Ym94LXNoYWRvdzppbnNldCAwIDAgMCAycHggdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTIpO3otaW5kZXg6dmFyKC0tY2FsY2l0ZS16LWluZGV4LWhlYWRlcil9LnRpbWUtcGlja2VyIC5pbnB1dDpmb2N1cywudGltZS1waWNrZXIgLmlucHV0OmhvdmVyOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHRyYW5zcGFyZW50O291dGxpbmUtb2Zmc2V0OjJweDtvdXRsaW5lLW9mZnNldDowfS50aW1lLXBpY2tlciAuaW5wdXQuaW5wdXRGb2N1cywudGltZS1waWNrZXIgLmlucHV0OmhvdmVyLmlucHV0Rm9jdXN7Ym94LXNoYWRvdzppbnNldCAwIDAgMCAycHggdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCk7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgtaGVhZGVyKX0udGltZS1waWNrZXIuc2NhbGUtc3tmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfS50aW1lLXBpY2tlci5zY2FsZS1zIC5idXR0b24sLnRpbWUtcGlja2VyLnNjYWxlLXMgLmlucHV0e3BhZGRpbmctaW5saW5lOjAuNzVyZW07cGFkZGluZy1ibG9jazowLjI1cmVtfS50aW1lLXBpY2tlci5zY2FsZS1zOm5vdCguc2hvdy1tZXJpZGllbSkgLmRlbGltaXRlcjpsYXN0LWNoaWxke3BhZGRpbmctaW5saW5lLWVuZDowLjc1cmVtfS50aW1lLXBpY2tlci5zY2FsZS1te2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKX0udGltZS1waWNrZXIuc2NhbGUtbSAuYnV0dG9uLC50aW1lLXBpY2tlci5zY2FsZS1tIC5pbnB1dHtwYWRkaW5nLWlubGluZToxcmVtO3BhZGRpbmctYmxvY2s6MC41cmVtfS50aW1lLXBpY2tlci5zY2FsZS1tOm5vdCguc2hvdy1tZXJpZGllbSkgLmRlbGltaXRlcjpsYXN0LWNoaWxke3BhZGRpbmctaW5saW5lLWVuZDoxcmVtfS50aW1lLXBpY2tlci5zY2FsZS1se2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0xKX0udGltZS1waWNrZXIuc2NhbGUtbCAuYnV0dG9uLC50aW1lLXBpY2tlci5zY2FsZS1sIC5pbnB1dHtwYWRkaW5nLWlubGluZToxLjI1cmVtO3BhZGRpbmctYmxvY2s6MC43NXJlbX0udGltZS1waWNrZXIuc2NhbGUtbDpub3QoLnNob3ctbWVyaWRpZW0pIC5kZWxpbWl0ZXI6bGFzdC1jaGlsZHtwYWRkaW5nLWlubGluZS1lbmQ6MS4yNXJlbX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cbmNvbnN0IFRpbWVQaWNrZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckJsdXIgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJCbHVyXCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJGb2N1cyA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckZvY3VzXCIsIDYpO1xuICAgIHRoaXMucG9pbnRlckFjdGl2YXRlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVjcmVtZW50SG91ciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0hvdXIgPSAhdGhpcy5ob3VyID8gMCA6IHRoaXMuaG91ciA9PT0gXCIwMFwiID8gMjMgOiBwYXJzZUludCh0aGlzLmhvdXIpIC0gMTtcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwiaG91clwiLCBuZXdIb3VyKTtcbiAgICB9O1xuICAgIHRoaXMuZGVjcmVtZW50TWVyaWRpZW0gPSAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdNZXJpZGllbSA9IHRoaXMubWVyaWRpZW0gPT09IFwiUE1cIiA/IFwiQU1cIiA6IFwiUE1cIjtcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgbmV3TWVyaWRpZW0pO1xuICAgIH07XG4gICAgdGhpcy5kZWNyZW1lbnRNaW51dGVPclNlY29uZCA9IChrZXkpID0+IHtcbiAgICAgIGxldCBuZXdWYWx1ZTtcbiAgICAgIGlmIChpc1ZhbGlkTnVtYmVyKHRoaXNba2V5XSkpIHtcbiAgICAgICAgY29uc3QgdmFsdWVBc051bWJlciA9IHBhcnNlSW50KHRoaXNba2V5XSk7XG4gICAgICAgIG5ld1ZhbHVlID0gdmFsdWVBc051bWJlciA9PT0gMCA/IDU5IDogdmFsdWVBc051bWJlciAtIDE7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbmV3VmFsdWUgPSA1OTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KGtleSwgbmV3VmFsdWUpO1xuICAgIH07XG4gICAgdGhpcy5kZWNyZW1lbnRNaW51dGUgPSAoKSA9PiB7XG4gICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZU9yU2Vjb25kKFwibWludXRlXCIpO1xuICAgIH07XG4gICAgdGhpcy5kZWNyZW1lbnRTZWNvbmQgPSAoKSA9PiB7XG4gICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZU9yU2Vjb25kKFwic2Vjb25kXCIpO1xuICAgIH07XG4gICAgdGhpcy5mb2N1c0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnBvaW50ZXJBY3RpdmF0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5hY3RpdmVFbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgfTtcbiAgICB0aGlzLmZyYWN0aW9uYWxTZWNvbmRLZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xuICAgICAgaWYgKG51bWJlcktleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICBjb25zdCBzdGVwUHJlY2lzaW9uID0gZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApO1xuICAgICAgICBjb25zdCBmcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyID0gcGFyc2VJbnQodGhpcy5mcmFjdGlvbmFsU2Vjb25kKTtcbiAgICAgICAgY29uc3QgZnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlckxlbmd0aCA9IGZyYWN0aW9uYWxTZWNvbmRBc0ludGVnZXIudG9TdHJpbmcoKS5sZW5ndGg7XG4gICAgICAgIGxldCBuZXdGcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyU3RyaW5nO1xuICAgICAgICBpZiAoZnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlckxlbmd0aCA+PSBzdGVwUHJlY2lzaW9uKSB7XG4gICAgICAgICAgbmV3RnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlclN0cmluZyA9IGtleS5wYWRTdGFydChzdGVwUHJlY2lzaW9uLCBcIjBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlckxlbmd0aCA8IHN0ZXBQcmVjaXNpb24pIHtcbiAgICAgICAgICBuZXdGcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyU3RyaW5nID0gYCR7ZnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlcn0ke2tleX1gLnBhZFN0YXJ0KHN0ZXBQcmVjaXNpb24sIFwiMFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcImZyYWN0aW9uYWxTZWNvbmRcIiwgcGFyc2VGbG9hdChgMC4ke25ld0ZyYWN0aW9uYWxTZWNvbmRBc0ludGVnZXJTdHJpbmd9YCkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkJhY2tzcGFjZVwiOlxuICAgICAgICAgIGNhc2UgXCJEZWxldGVcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwiZnJhY3Rpb25hbFNlY29uZFwiLCBudWxsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLm51ZGdlRnJhY3Rpb25hbFNlY29uZChcImRvd25cIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMubnVkZ2VGcmFjdGlvbmFsU2Vjb25kKFwidXBcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiIFwiOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmZyYWN0aW9uYWxTZWNvbmREb3duQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMuZnJhY3Rpb25hbFNlY29uZEVsO1xuICAgICAgdGhpcy5mcmFjdGlvbmFsU2Vjb25kRWwuZm9jdXMoKTtcbiAgICAgIHRoaXMubnVkZ2VGcmFjdGlvbmFsU2Vjb25kKFwiZG93blwiKTtcbiAgICB9O1xuICAgIHRoaXMuZnJhY3Rpb25hbFNlY29uZFVwQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMuZnJhY3Rpb25hbFNlY29uZEVsO1xuICAgICAgdGhpcy5mcmFjdGlvbmFsU2Vjb25kRWwuZm9jdXMoKTtcbiAgICAgIHRoaXMubnVkZ2VGcmFjdGlvbmFsU2Vjb25kKFwidXBcIik7XG4gICAgfTtcbiAgICB0aGlzLmhvdXJEb3duQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMuaG91ckVsO1xuICAgICAgdGhpcy5ob3VyRWwuZm9jdXMoKTtcbiAgICAgIHRoaXMuZGVjcmVtZW50SG91cigpO1xuICAgIH07XG4gICAgdGhpcy5ob3VyS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICAgIGlmIChudW1iZXJLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgY29uc3Qga2V5QXNOdW1iZXIgPSBwYXJzZUludChrZXkpO1xuICAgICAgICBsZXQgbmV3SG91cjtcbiAgICAgICAgaWYgKGlzVmFsaWROdW1iZXIodGhpcy5ob3VyKSkge1xuICAgICAgICAgIHN3aXRjaCAodGhpcy5ob3VyQ3ljbGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCIxMlwiOlxuICAgICAgICAgICAgICBuZXdIb3VyID1cbiAgICAgICAgICAgICAgICB0aGlzLmhvdXIgPT09IFwiMDFcIiAmJiBrZXlBc051bWJlciA+PSAwICYmIGtleUFzTnVtYmVyIDw9IDJcbiAgICAgICAgICAgICAgICAgID8gYDEke2tleUFzTnVtYmVyfWBcbiAgICAgICAgICAgICAgICAgIDoga2V5QXNOdW1iZXI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjI0XCI6XG4gICAgICAgICAgICAgIGlmICh0aGlzLmhvdXIgPT09IFwiMDFcIikge1xuICAgICAgICAgICAgICAgIG5ld0hvdXIgPSBgMSR7a2V5QXNOdW1iZXJ9YDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmhvdXIgPT09IFwiMDJcIiAmJiBrZXlBc051bWJlciA+PSAwICYmIGtleUFzTnVtYmVyIDw9IDMpIHtcbiAgICAgICAgICAgICAgICBuZXdIb3VyID0gYDIke2tleUFzTnVtYmVyfWA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3SG91ciA9IGtleUFzTnVtYmVyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBuZXdIb3VyID0ga2V5QXNOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJob3VyXCIsIG5ld0hvdXIpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkJhY2tzcGFjZVwiOlxuICAgICAgICAgIGNhc2UgXCJEZWxldGVcIjpcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwiaG91clwiLCBudWxsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudEhvdXIoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRIb3VyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiIFwiOlxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhvdXJVcENsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlRWwgPSB0aGlzLmhvdXJFbDtcbiAgICAgIHRoaXMuaG91ckVsLmZvY3VzKCk7XG4gICAgICB0aGlzLmluY3JlbWVudEhvdXIoKTtcbiAgICB9O1xuICAgIHRoaXMuaW5jcmVtZW50TWVyaWRpZW0gPSAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdNZXJpZGllbSA9IHRoaXMubWVyaWRpZW0gPT09IFwiQU1cIiA/IFwiUE1cIiA6IFwiQU1cIjtcbiAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgbmV3TWVyaWRpZW0pO1xuICAgIH07XG4gICAgdGhpcy5pbmNyZW1lbnRIb3VyID0gKCkgPT4ge1xuICAgICAgY29uc3QgbmV3SG91ciA9IGlzVmFsaWROdW1iZXIodGhpcy5ob3VyKVxuICAgICAgICA/IHRoaXMuaG91ciA9PT0gXCIyM1wiXG4gICAgICAgICAgPyAwXG4gICAgICAgICAgOiBwYXJzZUludCh0aGlzLmhvdXIpICsgMVxuICAgICAgICA6IDE7XG4gICAgICB0aGlzLnNldFZhbHVlUGFydChcImhvdXJcIiwgbmV3SG91cik7XG4gICAgfTtcbiAgICB0aGlzLmluY3JlbWVudE1pbnV0ZU9yU2Vjb25kID0gKGtleSkgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBpc1ZhbGlkTnVtYmVyKHRoaXNba2V5XSlcbiAgICAgICAgPyB0aGlzW2tleV0gPT09IFwiNTlcIlxuICAgICAgICAgID8gMFxuICAgICAgICAgIDogcGFyc2VJbnQodGhpc1trZXldKSArIDFcbiAgICAgICAgOiAwO1xuICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoa2V5LCBuZXdWYWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLmluY3JlbWVudE1pbnV0ZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuaW5jcmVtZW50TWludXRlT3JTZWNvbmQoXCJtaW51dGVcIik7XG4gICAgfTtcbiAgICB0aGlzLmluY3JlbWVudFNlY29uZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuaW5jcmVtZW50TWludXRlT3JTZWNvbmQoXCJzZWNvbmRcIik7XG4gICAgfTtcbiAgICB0aGlzLmlucHV0Q2xpY2tIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmFjdGl2ZUVsID0gZXZlbnQudGFyZ2V0O1xuICAgIH07XG4gICAgdGhpcy5tZXJpZGllbVVwQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMubWVyaWRpZW1FbDtcbiAgICAgIHRoaXMubWVyaWRpZW1FbC5mb2N1cygpO1xuICAgICAgdGhpcy5pbmNyZW1lbnRNZXJpZGllbSgpO1xuICAgIH07XG4gICAgdGhpcy5tZXJpZGllbUtleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgXCJBTVwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBcIjpcbiAgICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcIm1lcmlkaWVtXCIsIFwiUE1cIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcbiAgICAgICAgY2FzZSBcIkRlbGV0ZVwiOlxuICAgICAgICAgIHRoaXMuc2V0VmFsdWVQYXJ0KFwibWVyaWRpZW1cIiwgbnVsbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmluY3JlbWVudE1lcmlkaWVtKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuZGVjcmVtZW50TWVyaWRpZW0oKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5tZXJpZGllbURvd25DbGlja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2ZUVsID0gdGhpcy5tZXJpZGllbUVsO1xuICAgICAgdGhpcy5tZXJpZGllbUVsLmZvY3VzKCk7XG4gICAgICB0aGlzLmRlY3JlbWVudE1lcmlkaWVtKCk7XG4gICAgfTtcbiAgICB0aGlzLm1pbnV0ZURvd25DbGlja0hhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2ZUVsID0gdGhpcy5taW51dGVFbDtcbiAgICAgIHRoaXMubWludXRlRWwuZm9jdXMoKTtcbiAgICAgIHRoaXMuZGVjcmVtZW50TWludXRlKCk7XG4gICAgfTtcbiAgICB0aGlzLm1pbnV0ZVVwQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMubWludXRlRWw7XG4gICAgICB0aGlzLm1pbnV0ZUVsLmZvY3VzKCk7XG4gICAgICB0aGlzLmluY3JlbWVudE1pbnV0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5taW51dGVLZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xuICAgICAgaWYgKG51bWJlcktleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICBjb25zdCBrZXlBc051bWJlciA9IHBhcnNlSW50KGtleSk7XG4gICAgICAgIGxldCBuZXdNaW51dGU7XG4gICAgICAgIGlmIChpc1ZhbGlkTnVtYmVyKHRoaXMubWludXRlKSAmJiB0aGlzLm1pbnV0ZS5zdGFydHNXaXRoKFwiMFwiKSkge1xuICAgICAgICAgIGNvbnN0IG1pbnV0ZUFzTnVtYmVyID0gcGFyc2VJbnQodGhpcy5taW51dGUpO1xuICAgICAgICAgIG5ld01pbnV0ZSA9XG4gICAgICAgICAgICBtaW51dGVBc051bWJlciA+IG1heFRlbnRoRm9yTWludXRlQW5kU2Vjb25kXG4gICAgICAgICAgICAgID8ga2V5QXNOdW1iZXJcbiAgICAgICAgICAgICAgOiBgJHttaW51dGVBc051bWJlcn0ke2tleUFzTnVtYmVyfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3TWludXRlID0ga2V5QXNOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJtaW51dGVcIiwgbmV3TWludXRlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcbiAgICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcIm1pbnV0ZVwiLCBudWxsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudE1pbnV0ZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudE1pbnV0ZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5udWRnZUZyYWN0aW9uYWxTZWNvbmQgPSAoZGlyZWN0aW9uKSA9PiB7XG4gICAgICBjb25zdCBzdGVwRGVjaW1hbCA9IGdldERlY2ltYWxzKHRoaXMuc3RlcCk7XG4gICAgICBjb25zdCBzdGVwUHJlY2lzaW9uID0gZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApO1xuICAgICAgY29uc3QgZnJhY3Rpb25hbFNlY29uZEFzSW50ZWdlciA9IHBhcnNlSW50KHRoaXMuZnJhY3Rpb25hbFNlY29uZCk7XG4gICAgICBjb25zdCBmcmFjdGlvbmFsU2Vjb25kQXNGbG9hdCA9IHBhcnNlRmxvYXQoYDAuJHt0aGlzLmZyYWN0aW9uYWxTZWNvbmR9YCk7XG4gICAgICBsZXQgbnVkZ2VkVmFsdWU7XG4gICAgICBsZXQgbnVkZ2VkVmFsdWVSb3VuZGVkO1xuICAgICAgbGV0IG51ZGdlZFZhbHVlUm91bmRlZERlY2ltYWxzO1xuICAgICAgbGV0IG5ld0ZyYWN0aW9uYWxTZWNvbmQ7XG4gICAgICBpZiAoZGlyZWN0aW9uID09PSBcInVwXCIpIHtcbiAgICAgICAgbnVkZ2VkVmFsdWUgPSBpc05hTihmcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyKSA/IDAgOiBmcmFjdGlvbmFsU2Vjb25kQXNGbG9hdCArIHN0ZXBEZWNpbWFsO1xuICAgICAgICBudWRnZWRWYWx1ZVJvdW5kZWQgPSBwYXJzZUZsb2F0KG51ZGdlZFZhbHVlLnRvRml4ZWQoc3RlcFByZWNpc2lvbikpO1xuICAgICAgICBudWRnZWRWYWx1ZVJvdW5kZWREZWNpbWFscyA9IGdldERlY2ltYWxzKG51ZGdlZFZhbHVlUm91bmRlZCk7XG4gICAgICAgIG5ld0ZyYWN0aW9uYWxTZWNvbmQgPVxuICAgICAgICAgIG51ZGdlZFZhbHVlUm91bmRlZCA8IDEgJiYgZGVjaW1hbFBsYWNlcyhudWRnZWRWYWx1ZVJvdW5kZWREZWNpbWFscykgPiAwXG4gICAgICAgICAgICA/IGZvcm1hdFRpbWVQYXJ0KG51ZGdlZFZhbHVlUm91bmRlZERlY2ltYWxzLCBzdGVwUHJlY2lzaW9uKVxuICAgICAgICAgICAgOiBcIlwiLnBhZFN0YXJ0KHN0ZXBQcmVjaXNpb24sIFwiMFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24gPT09IFwiZG93blwiKSB7XG4gICAgICAgIG51ZGdlZFZhbHVlID1cbiAgICAgICAgICBpc05hTihmcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyKSB8fCBmcmFjdGlvbmFsU2Vjb25kQXNJbnRlZ2VyID09PSAwXG4gICAgICAgICAgICA/IDEgLSBzdGVwRGVjaW1hbFxuICAgICAgICAgICAgOiBmcmFjdGlvbmFsU2Vjb25kQXNGbG9hdCAtIHN0ZXBEZWNpbWFsO1xuICAgICAgICBudWRnZWRWYWx1ZVJvdW5kZWQgPSBwYXJzZUZsb2F0KG51ZGdlZFZhbHVlLnRvRml4ZWQoc3RlcFByZWNpc2lvbikpO1xuICAgICAgICBudWRnZWRWYWx1ZVJvdW5kZWREZWNpbWFscyA9IGdldERlY2ltYWxzKG51ZGdlZFZhbHVlUm91bmRlZCk7XG4gICAgICAgIG5ld0ZyYWN0aW9uYWxTZWNvbmQgPVxuICAgICAgICAgIG51ZGdlZFZhbHVlUm91bmRlZCA8IDEgJiZcbiAgICAgICAgICAgIGRlY2ltYWxQbGFjZXMobnVkZ2VkVmFsdWVSb3VuZGVkRGVjaW1hbHMpID4gMCAmJlxuICAgICAgICAgICAgTWF0aC5zaWduKG51ZGdlZFZhbHVlUm91bmRlZERlY2ltYWxzKSA9PT0gMVxuICAgICAgICAgICAgPyBmb3JtYXRUaW1lUGFydChudWRnZWRWYWx1ZVJvdW5kZWREZWNpbWFscywgc3RlcFByZWNpc2lvbilcbiAgICAgICAgICAgIDogXCJcIi5wYWRTdGFydChzdGVwUHJlY2lzaW9uLCBcIjBcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnNldFZhbHVlUGFydChcImZyYWN0aW9uYWxTZWNvbmRcIiwgbmV3RnJhY3Rpb25hbFNlY29uZCk7XG4gICAgfTtcbiAgICB0aGlzLnNhbml0aXplVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uYWxTZWNvbmQgfSA9IHBhcnNlVGltZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoZnJhY3Rpb25hbFNlY29uZCkge1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRGcmFjdGlvbmFsU2Vjb25kID0gdGhpcy5zYW5pdGl6ZUZyYWN0aW9uYWxTZWNvbmQoZnJhY3Rpb25hbFNlY29uZCk7XG4gICAgICAgIHJldHVybiBgJHtob3VyfToke21pbnV0ZX06JHtzZWNvbmR9LiR7c2FuaXRpemVkRnJhY3Rpb25hbFNlY29uZH1gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzVmFsaWRUaW1lKHZhbHVlKSAmJiB2YWx1ZTtcbiAgICB9O1xuICAgIHRoaXMuc2FuaXRpemVGcmFjdGlvbmFsU2Vjb25kID0gKGZyYWN0aW9uYWxTZWNvbmQpID0+IGZyYWN0aW9uYWxTZWNvbmQgJiYgZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApICE9PSBmcmFjdGlvbmFsU2Vjb25kLmxlbmd0aFxuICAgICAgPyBwYXJzZUZsb2F0KGAwLiR7ZnJhY3Rpb25hbFNlY29uZH1gKS50b0ZpeGVkKGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKSkucmVwbGFjZShcIjAuXCIsIFwiXCIpXG4gICAgICA6IGZyYWN0aW9uYWxTZWNvbmQ7XG4gICAgdGhpcy5zZWNvbmRLZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xuICAgICAgaWYgKG51bWJlcktleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICBjb25zdCBrZXlBc051bWJlciA9IHBhcnNlSW50KGtleSk7XG4gICAgICAgIGxldCBuZXdTZWNvbmQ7XG4gICAgICAgIGlmIChpc1ZhbGlkTnVtYmVyKHRoaXMuc2Vjb25kKSAmJiB0aGlzLnNlY29uZC5zdGFydHNXaXRoKFwiMFwiKSkge1xuICAgICAgICAgIGNvbnN0IHNlY29uZEFzTnVtYmVyID0gcGFyc2VJbnQodGhpcy5zZWNvbmQpO1xuICAgICAgICAgIG5ld1NlY29uZCA9XG4gICAgICAgICAgICBzZWNvbmRBc051bWJlciA+IG1heFRlbnRoRm9yTWludXRlQW5kU2Vjb25kXG4gICAgICAgICAgICAgID8ga2V5QXNOdW1iZXJcbiAgICAgICAgICAgICAgOiBgJHtzZWNvbmRBc051bWJlcn0ke2tleUFzTnVtYmVyfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbmV3U2Vjb25kID0ga2V5QXNOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRWYWx1ZVBhcnQoXCJzZWNvbmRcIiwgbmV3U2Vjb25kKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgXCJCYWNrc3BhY2VcIjpcbiAgICAgICAgICBjYXNlIFwiRGVsZXRlXCI6XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlUGFydChcInNlY29uZFwiLCBudWxsKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudFNlY29uZCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudFNlY29uZCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5zZWNvbmREb3duQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmVFbCA9IHRoaXMuc2Vjb25kRWw7XG4gICAgICB0aGlzLnNlY29uZEVsLmZvY3VzKCk7XG4gICAgICB0aGlzLmRlY3JlbWVudFNlY29uZCgpO1xuICAgIH07XG4gICAgdGhpcy5zZWNvbmRVcENsaWNrSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZlRWwgPSB0aGlzLnNlY29uZEVsO1xuICAgICAgdGhpcy5zZWNvbmRFbC5mb2N1cygpO1xuICAgICAgdGhpcy5pbmNyZW1lbnRTZWNvbmQoKTtcbiAgICB9O1xuICAgIHRoaXMuc2V0SG91ckVsID0gKGVsKSA9PiAodGhpcy5ob3VyRWwgPSBlbCk7XG4gICAgdGhpcy5zZXRNZXJpZGllbUVsID0gKGVsKSA9PiAodGhpcy5tZXJpZGllbUVsID0gZWwpO1xuICAgIHRoaXMuc2V0TWludXRlRWwgPSAoZWwpID0+ICh0aGlzLm1pbnV0ZUVsID0gZWwpO1xuICAgIHRoaXMuc2V0U2Vjb25kRWwgPSAoZWwpID0+ICh0aGlzLnNlY29uZEVsID0gZWwpO1xuICAgIHRoaXMuc2V0RnJhY3Rpb25hbFNlY29uZEVsID0gKGVsKSA9PiAodGhpcy5mcmFjdGlvbmFsU2Vjb25kRWwgPSBlbCk7XG4gICAgdGhpcy5zZXRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKGlzVmFsaWRUaW1lKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBmcmFjdGlvbmFsU2Vjb25kIH0gPSBwYXJzZVRpbWVTdHJpbmcodmFsdWUpO1xuICAgICAgICBjb25zdCB7IGVmZmVjdGl2ZUxvY2FsZTogbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgbG9jYWxpemVkSG91ciwgbG9jYWxpemVkSG91clN1ZmZpeCwgbG9jYWxpemVkTWludXRlLCBsb2NhbGl6ZWRNaW51dGVTdWZmaXgsIGxvY2FsaXplZFNlY29uZCwgbG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvciwgbG9jYWxpemVkRnJhY3Rpb25hbFNlY29uZCwgbG9jYWxpemVkU2Vjb25kU3VmZml4LCBsb2NhbGl6ZWRNZXJpZGllbSwgfSA9IGxvY2FsaXplVGltZVN0cmluZ1RvUGFydHMoeyB2YWx1ZSwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSk7XG4gICAgICAgIHRoaXMuaG91ciA9IGhvdXI7XG4gICAgICAgIHRoaXMubWludXRlID0gbWludXRlO1xuICAgICAgICB0aGlzLnNlY29uZCA9IHNlY29uZDtcbiAgICAgICAgdGhpcy5mcmFjdGlvbmFsU2Vjb25kID0gdGhpcy5zYW5pdGl6ZUZyYWN0aW9uYWxTZWNvbmQoZnJhY3Rpb25hbFNlY29uZCk7XG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91ciA9IGxvY2FsaXplZEhvdXI7XG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91clN1ZmZpeCA9IGxvY2FsaXplZEhvdXJTdWZmaXg7XG4gICAgICAgIHRoaXMubG9jYWxpemVkTWludXRlID0gbG9jYWxpemVkTWludXRlO1xuICAgICAgICB0aGlzLmxvY2FsaXplZE1pbnV0ZVN1ZmZpeCA9IGxvY2FsaXplZE1pbnV0ZVN1ZmZpeDtcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRTZWNvbmQgPSBsb2NhbGl6ZWRTZWNvbmQ7XG4gICAgICAgIHRoaXMubG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvciA9IGxvY2FsaXplZERlY2ltYWxTZXBhcmF0b3I7XG4gICAgICAgIHRoaXMubG9jYWxpemVkRnJhY3Rpb25hbFNlY29uZCA9IGxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQ7XG4gICAgICAgIHRoaXMubG9jYWxpemVkU2Vjb25kU3VmZml4ID0gbG9jYWxpemVkU2Vjb25kU3VmZml4O1xuICAgICAgICBpZiAobG9jYWxpemVkTWVyaWRpZW0pIHtcbiAgICAgICAgICB0aGlzLmxvY2FsaXplZE1lcmlkaWVtID0gbG9jYWxpemVkTWVyaWRpZW07XG4gICAgICAgICAgdGhpcy5tZXJpZGllbSA9IGdldE1lcmlkaWVtKHRoaXMuaG91cik7XG4gICAgICAgICAgY29uc3QgZm9ybWF0UGFydHMgPSBnZXRUaW1lUGFydHMoeyB2YWx1ZSwgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSk7XG4gICAgICAgICAgdGhpcy5tZXJpZGllbU9yZGVyID0gdGhpcy5nZXRNZXJpZGllbU9yZGVyKGZvcm1hdFBhcnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuaG91ciA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJhY3Rpb25hbFNlY29uZCA9IG51bGw7XG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91ciA9IG51bGw7XG4gICAgICAgIHRoaXMubG9jYWxpemVkSG91clN1ZmZpeCA9IGdldExvY2FsaXplZFRpbWVQYXJ0U3VmZml4KFwiaG91clwiLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0pO1xuICAgICAgICB0aGlzLmxvY2FsaXplZE1lcmlkaWVtID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWRNaW51dGUgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2FsaXplZE1pbnV0ZVN1ZmZpeCA9IGdldExvY2FsaXplZFRpbWVQYXJ0U3VmZml4KFwibWludXRlXCIsIHRoaXMuZWZmZWN0aXZlTG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSk7XG4gICAgICAgIHRoaXMubG9jYWxpemVkU2Vjb25kID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2NhbGl6ZWREZWNpbWFsU2VwYXJhdG9yID0gZ2V0TG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvcih0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0pO1xuICAgICAgICB0aGlzLmxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2FsaXplZFNlY29uZFN1ZmZpeCA9IGdldExvY2FsaXplZFRpbWVQYXJ0U3VmZml4KFwic2Vjb25kXCIsIHRoaXMuZWZmZWN0aXZlTG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSk7XG4gICAgICAgIHRoaXMubWVyaWRpZW0gPSBudWxsO1xuICAgICAgICB0aGlzLm1pbnV0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2Vjb25kID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnNldFZhbHVlUGFydCA9IChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCB7IGVmZmVjdGl2ZUxvY2FsZTogbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSA9IHRoaXM7XG4gICAgICBpZiAoa2V5ID09PSBcIm1lcmlkaWVtXCIpIHtcbiAgICAgICAgdGhpcy5tZXJpZGllbSA9IHZhbHVlO1xuICAgICAgICBpZiAoaXNWYWxpZE51bWJlcih0aGlzLmhvdXIpKSB7XG4gICAgICAgICAgY29uc3QgaG91ckFzTnVtYmVyID0gcGFyc2VJbnQodGhpcy5ob3VyKTtcbiAgICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQU1cIjpcbiAgICAgICAgICAgICAgaWYgKGhvdXJBc051bWJlciA+PSAxMikge1xuICAgICAgICAgICAgICAgIHRoaXMuaG91ciA9IGZvcm1hdFRpbWVQYXJ0KGhvdXJBc051bWJlciAtIDEyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQTVwiOlxuICAgICAgICAgICAgICBpZiAoaG91ckFzTnVtYmVyIDwgMTIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhvdXIgPSBmb3JtYXRUaW1lUGFydChob3VyQXNOdW1iZXIgKyAxMik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMubG9jYWxpemVkSG91ciA9IGxvY2FsaXplVGltZVBhcnQoe1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMuaG91cixcbiAgICAgICAgICAgIHBhcnQ6IFwiaG91clwiLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChrZXkgPT09IFwiZnJhY3Rpb25hbFNlY29uZFwiKSB7XG4gICAgICAgIGNvbnN0IHN0ZXBQcmVjaXNpb24gPSBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCk7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICB0aGlzLmZyYWN0aW9uYWxTZWNvbmQgPVxuICAgICAgICAgICAgdmFsdWUgPT09IDAgPyBcIlwiLnBhZFN0YXJ0KHN0ZXBQcmVjaXNpb24sIFwiMFwiKSA6IGZvcm1hdFRpbWVQYXJ0KHZhbHVlLCBzdGVwUHJlY2lzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZyYWN0aW9uYWxTZWNvbmQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQgPSBsb2NhbGl6ZVRpbWVQYXJ0KHtcbiAgICAgICAgICB2YWx1ZTogdGhpcy5mcmFjdGlvbmFsU2Vjb25kLFxuICAgICAgICAgIHBhcnQ6IFwiZnJhY3Rpb25hbFNlY29uZFwiLFxuICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXNba2V5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiA/IGZvcm1hdFRpbWVQYXJ0KHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB0aGlzW2Bsb2NhbGl6ZWQke2NhcGl0YWxpemUoa2V5KX1gXSA9IGxvY2FsaXplVGltZVBhcnQoe1xuICAgICAgICAgIHZhbHVlOiB0aGlzW2tleV0sXG4gICAgICAgICAgcGFydDoga2V5LFxuICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbGV0IGVtaXQgPSBmYWxzZTtcbiAgICAgIGxldCBuZXdWYWx1ZTtcbiAgICAgIGlmICh0aGlzLmhvdXIgJiYgdGhpcy5taW51dGUpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBgJHt0aGlzLmhvdXJ9OiR7dGhpcy5taW51dGV9YDtcbiAgICAgICAgaWYgKHRoaXMuc2hvd1NlY29uZCkge1xuICAgICAgICAgIG5ld1ZhbHVlID0gYCR7bmV3VmFsdWV9OiR7dGhpcy5zZWNvbmQgPz8gXCIwMFwifWA7XG4gICAgICAgICAgaWYgKHRoaXMuc2hvd0ZyYWN0aW9uYWxTZWNvbmQgJiYgdGhpcy5mcmFjdGlvbmFsU2Vjb25kKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGAke25ld1ZhbHVlfS4ke3RoaXMuZnJhY3Rpb25hbFNlY29uZH1gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5ld1ZhbHVlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICBlbWl0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIHRoaXMubG9jYWxpemVkTWVyaWRpZW0gPSB0aGlzLnZhbHVlXG4gICAgICAgID8gbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh7IHZhbHVlOiB0aGlzLnZhbHVlLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KVxuICAgICAgICAgID8ubG9jYWxpemVkTWVyaWRpZW0gfHwgbnVsbFxuICAgICAgICA6IGxvY2FsaXplVGltZVBhcnQoeyB2YWx1ZTogdGhpcy5tZXJpZGllbSwgcGFydDogXCJtZXJpZGllbVwiLCBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KTtcbiAgICAgIGlmIChlbWl0KSB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckNoYW5nZS5lbWl0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5zdGVwID0gNjA7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VPdmVycmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5hY3RpdmVFbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IFwiXCI7XG4gICAgdGhpcy5mcmFjdGlvbmFsU2Vjb25kID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaG91ciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhvdXJDeWNsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxvY2FsaXplZERlY2ltYWxTZXBhcmF0b3IgPSBcIi5cIjtcbiAgICB0aGlzLmxvY2FsaXplZEhvdXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2NhbGl6ZWRIb3VyU3VmZml4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9jYWxpemVkTWVyaWRpZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2NhbGl6ZWRGcmFjdGlvbmFsU2Vjb25kID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9jYWxpemVkTWludXRlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9jYWxpemVkTWludXRlU3VmZml4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9jYWxpemVkU2Vjb25kID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9jYWxpemVkU2Vjb25kU3VmZml4ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVyaWRpZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5taW51dGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWNvbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaG93RnJhY3Rpb25hbFNlY29uZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNob3dTZWNvbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgc3RlcENoYW5nZSgpIHtcbiAgICB0aGlzLnRvZ2dsZVNlY29uZCgpO1xuICB9XG4gIHZhbHVlV2F0Y2hlcihuZXdWYWx1ZSkge1xuICAgIHRoaXMuc2V0VmFsdWUobmV3VmFsdWUpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVXYXRjaGVyKCkge1xuICAgIHRoaXMudXBkYXRlTG9jYWxlKCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgRXZlbnQgTGlzdGVuZXJzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYmx1ckhhbmRsZXIoKSB7XG4gICAgdGhpcy5hY3RpdmVFbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvaW50ZXJBY3RpdmF0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRpbWVQaWNrZXJCbHVyLmVtaXQoKTtcbiAgfVxuICBob3N0Rm9jdXNIYW5kbGVyKCkge1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGltZVBpY2tlckZvY3VzLmVtaXQoKTtcbiAgfVxuICBrZXlEb3duSGFuZGxlcihldmVudCkge1xuICAgIHRoaXMucG9pbnRlckFjdGl2YXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHsgZGVmYXVsdFByZXZlbnRlZCwga2V5IH0gPSBldmVudDtcbiAgICBpZiAoZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlRWwpIHtcbiAgICAgIGNhc2UgdGhpcy5ob3VyRWw6XG4gICAgICAgIGlmIChrZXkgPT09IFwiQXJyb3dSaWdodFwiKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtaW51dGVcIik7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdGhpcy5taW51dGVFbDpcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcImhvdXJcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgIGlmICh0aGlzLnN0ZXAgIT09IDYwKSB7XG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNQYXJ0KFwic2Vjb25kXCIpO1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5ob3VyQ3ljbGUgPT09IFwiMTJcIikge1xuICAgICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcIm1lcmlkaWVtXCIpO1xuICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRoaXMuc2Vjb25kRWw6XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtaW51dGVcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dGcmFjdGlvbmFsU2Vjb25kKSB7XG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNQYXJ0KFwiZnJhY3Rpb25hbFNlY29uZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaG91ckN5Y2xlID09PSBcIjEyXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtZXJpZGllbVwiKTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0aGlzLmZyYWN0aW9uYWxTZWNvbmRFbDpcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcInNlY29uZFwiKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICAgICAgaWYgKHRoaXMuaG91ckN5Y2xlID09PSBcIjEyXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJtZXJpZGllbVwiKTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0aGlzLm1lcmlkaWVtRWw6XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0ZyYWN0aW9uYWxTZWNvbmQpIHtcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c1BhcnQoXCJmcmFjdGlvbmFsU2Vjb25kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zdGVwICE9PSA2MCkge1xuICAgICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcInNlY29uZFwiKTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmZvY3VzUGFydChcIm1pbnV0ZVwiKTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBwb2ludGVyRG93bkhhbmRsZXIoKSB7XG4gICAgdGhpcy5wb2ludGVyQWN0aXZhdGVkID0gdHJ1ZTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKlxuICAgKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudC5cbiAgICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICB0aGlzLmVsPy5mb2N1cygpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXN5bmMgZm9jdXNQYXJ0KHRhcmdldCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICB0aGlzW2Ake3RhcmdldCB8fCBcImhvdXJcIn1FbGBdPy5mb2N1cygpO1xuICB9XG4gIHRvZ2dsZVNlY29uZCgpIHtcbiAgICB0aGlzLnNob3dTZWNvbmQgPSB0aGlzLnN0ZXAgPCA2MDtcbiAgICB0aGlzLnNob3dGcmFjdGlvbmFsU2Vjb25kID0gZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApID4gMDtcbiAgfVxuICBnZXRNZXJpZGllbU9yZGVyKGZvcm1hdFBhcnRzKSB7XG4gICAgY29uc3QgbG9jYWxlID0gdGhpcy5lZmZlY3RpdmVMb2NhbGU7XG4gICAgY29uc3QgaXNSVExLaW5kID0gbG9jYWxlID09PSBcImFyXCIgfHwgbG9jYWxlID09PSBcImhlXCI7XG4gICAgaWYgKGZvcm1hdFBhcnRzICYmICFpc1JUTEtpbmQpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gZm9ybWF0UGFydHMuZmluZEluZGV4KChwYXJ0cykgPT4ge1xuICAgICAgICByZXR1cm4gcGFydHMudmFsdWUgPT09IHRoaXMubG9jYWxpemVkTWVyaWRpZW07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgdXBkYXRlTG9jYWxlKCkge1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgICB0aGlzLmhvdXJDeWNsZSA9IGdldExvY2FsZUhvdXJDeWNsZSh0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0pO1xuICAgIHRoaXMubG9jYWxpemVkRGVjaW1hbFNlcGFyYXRvciA9IGdldExvY2FsaXplZERlY2ltYWxTZXBhcmF0b3IodGhpcy5lZmZlY3RpdmVMb2NhbGUsIHRoaXMubnVtYmVyaW5nU3lzdGVtKTtcbiAgICB0aGlzLnNldFZhbHVlKHRoaXMuc2FuaXRpemVWYWx1ZSh0aGlzLnZhbHVlKSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlTG9jYWxlKCk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIHRoaXMudG9nZ2xlU2Vjb25kKCk7XG4gICAgdGhpcy5tZXJpZGllbU9yZGVyID0gdGhpcy5nZXRNZXJpZGllbU9yZGVyKGdldFRpbWVQYXJ0cyh7XG4gICAgICB2YWx1ZTogXCIwOjAwOjAwXCIsXG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICB9KSk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgaG91cklzTnVtYmVyID0gaXNWYWxpZE51bWJlcih0aGlzLmhvdXIpO1xuICAgIGNvbnN0IGljb25TY2FsZSA9IGdldEljb25TY2FsZSh0aGlzLnNjYWxlKTtcbiAgICBjb25zdCBtaW51dGVJc051bWJlciA9IGlzVmFsaWROdW1iZXIodGhpcy5taW51dGUpO1xuICAgIGNvbnN0IHNlY29uZElzTnVtYmVyID0gaXNWYWxpZE51bWJlcih0aGlzLnNlY29uZCk7XG4gICAgY29uc3QgZnJhY3Rpb25hbFNlY29uZElzTnVtYmVyID0gaXNWYWxpZE51bWJlcih0aGlzLmZyYWN0aW9uYWxTZWNvbmQpO1xuICAgIGNvbnN0IHNob3dNZXJpZGllbSA9IHRoaXMuaG91ckN5Y2xlID09PSBcIjEyXCI7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgW0NTUy50aW1lUGlja2VyXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5zaG93TWVyaWRpZW1dOiBzaG93TWVyaWRpZW0sXG4gICAgICAgIFtDU1Muc2hvd1NlY29uZF06IHRoaXMuc2hvd1NlY29uZCxcbiAgICAgICAgW0NTU1tgc2NhbGUtJHt0aGlzLnNjYWxlfWBdXTogdHJ1ZSxcbiAgICAgIH0sIGRpcjogXCJsdHJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb2x1bW4sIHJvbGU6IFwiZ3JvdXBcIiB9LCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLmhvdXJVcCwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5idXR0b25dOiB0cnVlLFxuICAgICAgICBbQ1NTLmJ1dHRvbkhvdXJVcF06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uVG9wTGVmdF06IHRydWUsXG4gICAgICB9LCBvbkNsaWNrOiB0aGlzLmhvdXJVcENsaWNrSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLXVwXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLmhvdXIsIFwiYXJpYS12YWx1ZW1heFwiOiBcIjIzXCIsIFwiYXJpYS12YWx1ZW1pblwiOiBcIjFcIiwgXCJhcmlhLXZhbHVlbm93XCI6IChob3VySXNOdW1iZXIgJiYgcGFyc2VJbnQodGhpcy5ob3VyKSkgfHwgXCIwXCIsIFwiYXJpYS12YWx1ZXRleHRcIjogdGhpcy5ob3VyLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmlucHV0XTogdHJ1ZSxcbiAgICAgICAgW0NTUy5ob3VyXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5pbnB1dEZvY3VzXTogdGhpcy5hY3RpdmVFbCAmJiB0aGlzLmFjdGl2ZUVsID09PSB0aGlzLmhvdXJFbCxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5wdXRDbGlja0hhbmRsZXIsIG9uRm9jdXM6IHRoaXMuZm9jdXNIYW5kbGVyLCBvbktleURvd246IHRoaXMuaG91cktleURvd25IYW5kbGVyLCByb2xlOiBcInNwaW5idXR0b25cIiwgdGFiSW5kZXg6IDAsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiB0aGlzLnNldEhvdXJFbCB9LCB0aGlzLmxvY2FsaXplZEhvdXIgfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5ob3VyRG93biwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5idXR0b25dOiB0cnVlLFxuICAgICAgICBbQ1NTLmJ1dHRvbkhvdXJEb3duXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5idXR0b25Cb3R0b21MZWZ0XTogdHJ1ZSxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaG91ckRvd25DbGlja0hhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpKSwgaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLmRlbGltaXRlciB9LCB0aGlzLmxvY2FsaXplZEhvdXJTdWZmaXgpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb2x1bW4sIHJvbGU6IFwiZ3JvdXBcIiB9LCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLm1pbnV0ZVVwLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmJ1dHRvbl06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uTWludXRlVXBdOiB0cnVlLFxuICAgICAgfSwgb25DbGljazogdGhpcy5taW51dGVVcENsaWNrSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLXVwXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLm1pbnV0ZSwgXCJhcmlhLXZhbHVlbWF4XCI6IFwiMTJcIiwgXCJhcmlhLXZhbHVlbWluXCI6IFwiMVwiLCBcImFyaWEtdmFsdWVub3dcIjogKG1pbnV0ZUlzTnVtYmVyICYmIHBhcnNlSW50KHRoaXMubWludXRlKSkgfHwgXCIwXCIsIFwiYXJpYS12YWx1ZXRleHRcIjogdGhpcy5taW51dGUsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuaW5wdXRdOiB0cnVlLFxuICAgICAgICBbQ1NTLm1pbnV0ZV06IHRydWUsXG4gICAgICAgIFtDU1MuaW5wdXRGb2N1c106IHRoaXMuYWN0aXZlRWwgJiYgdGhpcy5hY3RpdmVFbCA9PT0gdGhpcy5taW51dGVFbCxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5wdXRDbGlja0hhbmRsZXIsIG9uRm9jdXM6IHRoaXMuZm9jdXNIYW5kbGVyLCBvbktleURvd246IHRoaXMubWludXRlS2V5RG93bkhhbmRsZXIsIHJvbGU6IFwic3BpbmJ1dHRvblwiLCB0YWJJbmRleDogMCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0TWludXRlRWwgfSwgdGhpcy5sb2NhbGl6ZWRNaW51dGUgfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5taW51dGVEb3duLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmJ1dHRvbl06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uTWludXRlRG93bl06IHRydWUsXG4gICAgICB9LCBvbkNsaWNrOiB0aGlzLm1pbnV0ZURvd25DbGlja0hhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBpY29uU2NhbGUgfSkpKSwgdGhpcy5zaG93U2Vjb25kICYmIGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5kZWxpbWl0ZXIgfSwgdGhpcy5sb2NhbGl6ZWRNaW51dGVTdWZmaXgpLCB0aGlzLnNob3dTZWNvbmQgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbHVtbiwgcm9sZTogXCJncm91cFwiIH0sIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuc2Vjb25kVXAsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5idXR0b25TZWNvbmRVcF06IHRydWUsXG4gICAgICB9LCBvbkNsaWNrOiB0aGlzLnNlY29uZFVwQ2xpY2tIYW5kbGVyLCByb2xlOiBcImJ1dHRvblwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tdXBcIiwgc2NhbGU6IGljb25TY2FsZSB9KSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMuc2Vjb25kLCBcImFyaWEtdmFsdWVtYXhcIjogXCI1OVwiLCBcImFyaWEtdmFsdWVtaW5cIjogXCIwXCIsIFwiYXJpYS12YWx1ZW5vd1wiOiAoc2Vjb25kSXNOdW1iZXIgJiYgcGFyc2VJbnQodGhpcy5zZWNvbmQpKSB8fCBcIjBcIiwgXCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLnNlY29uZCwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5pbnB1dF06IHRydWUsXG4gICAgICAgIFtDU1Muc2Vjb25kXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5pbnB1dEZvY3VzXTogdGhpcy5hY3RpdmVFbCAmJiB0aGlzLmFjdGl2ZUVsID09PSB0aGlzLnNlY29uZEVsLFxuICAgICAgfSwgb25DbGljazogdGhpcy5pbnB1dENsaWNrSGFuZGxlciwgb25Gb2N1czogdGhpcy5mb2N1c0hhbmRsZXIsIG9uS2V5RG93bjogdGhpcy5zZWNvbmRLZXlEb3duSGFuZGxlciwgcm9sZTogXCJzcGluYnV0dG9uXCIsIHRhYkluZGV4OiAwLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRTZWNvbmRFbCB9LCB0aGlzLmxvY2FsaXplZFNlY29uZCB8fCBcIi0tXCIpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLnNlY29uZERvd24sIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5idXR0b25TZWNvbmREb3duXTogdHJ1ZSxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuc2Vjb25kRG93bkNsaWNrSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLWRvd25cIiwgc2NhbGU6IGljb25TY2FsZSB9KSkpKSwgdGhpcy5zaG93RnJhY3Rpb25hbFNlY29uZCAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLmRlbGltaXRlciB9LCB0aGlzLmxvY2FsaXplZERlY2ltYWxTZXBhcmF0b3IpKSwgdGhpcy5zaG93RnJhY3Rpb25hbFNlY29uZCAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuY29sdW1uLCByb2xlOiBcImdyb3VwXCIgfSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5mcmFjdGlvbmFsU2Vjb25kVXAsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5idXR0b25GcmFjdGlvbmFsU2Vjb25kVXBdOiB0cnVlLFxuICAgICAgfSwgb25DbGljazogdGhpcy5mcmFjdGlvbmFsU2Vjb25kVXBDbGlja0hhbmRsZXIsIHJvbGU6IFwiYnV0dG9uXCIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi11cFwiLCBzY2FsZTogaWNvblNjYWxlIH0pKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5mcmFjdGlvbmFsU2Vjb25kLCBcImFyaWEtdmFsdWVtYXhcIjogXCI5OTlcIiwgXCJhcmlhLXZhbHVlbWluXCI6IFwiMVwiLCBcImFyaWEtdmFsdWVub3dcIjogKGZyYWN0aW9uYWxTZWNvbmRJc051bWJlciAmJiBwYXJzZUludCh0aGlzLmZyYWN0aW9uYWxTZWNvbmQpKSB8fCBcIjBcIiwgXCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLmxvY2FsaXplZEZyYWN0aW9uYWxTZWNvbmQsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuaW5wdXRdOiB0cnVlLFxuICAgICAgICBbQ1NTLmZyYWN0aW9uYWxTZWNvbmRdOiB0cnVlLFxuICAgICAgICBbQ1NTLmlucHV0Rm9jdXNdOiB0aGlzLmFjdGl2ZUVsICYmIHRoaXMuYWN0aXZlRWwgPT09IHRoaXMuZnJhY3Rpb25hbFNlY29uZEVsLFxuICAgICAgfSwgb25DbGljazogdGhpcy5pbnB1dENsaWNrSGFuZGxlciwgb25Gb2N1czogdGhpcy5mb2N1c0hhbmRsZXIsIG9uS2V5RG93bjogdGhpcy5mcmFjdGlvbmFsU2Vjb25kS2V5RG93bkhhbmRsZXIsIHJvbGU6IFwic3BpbmJ1dHRvblwiLCB0YWJJbmRleDogMCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0RnJhY3Rpb25hbFNlY29uZEVsIH0sIHRoaXMubG9jYWxpemVkRnJhY3Rpb25hbFNlY29uZCB8fCBcIi0tXCIpLCBoKFwic3BhblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLmZyYWN0aW9uYWxTZWNvbmREb3duLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmJ1dHRvbl06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uRnJhY3Rpb25hbFNlY29uZERvd25dOiB0cnVlLFxuICAgICAgfSwgb25DbGljazogdGhpcy5mcmFjdGlvbmFsU2Vjb25kRG93bkNsaWNrSGFuZGxlciwgcm9sZTogXCJidXR0b25cIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLWRvd25cIiwgc2NhbGU6IGljb25TY2FsZSB9KSkpKSwgdGhpcy5sb2NhbGl6ZWRTZWNvbmRTdWZmaXggJiYgKGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5kZWxpbWl0ZXIgfSwgdGhpcy5sb2NhbGl6ZWRTZWNvbmRTdWZmaXgpKSwgc2hvd01lcmlkaWVtICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5jb2x1bW5dOiB0cnVlLFxuICAgICAgICBbQ1NTLm1lcmlkaWVtU3RhcnRdOiB0aGlzLm1lcmlkaWVtT3JkZXIgPT09IDAsXG4gICAgICB9LCByb2xlOiBcImdyb3VwXCIgfSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5tZXJpZGllbVVwLCBjbGFzczoge1xuICAgICAgICBbQ1NTLmJ1dHRvbl06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uTWVyaWRpZW1VcF06IHRydWUsXG4gICAgICAgIFtDU1MuYnV0dG9uVG9wUmlnaHRdOiB0cnVlLFxuICAgICAgfSwgb25DbGljazogdGhpcy5tZXJpZGllbVVwQ2xpY2tIYW5kbGVyLCByb2xlOiBcImJ1dHRvblwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tdXBcIiwgc2NhbGU6IGljb25TY2FsZSB9KSksIGgoXCJzcGFuXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMubWVyaWRpZW0sIFwiYXJpYS12YWx1ZW1heFwiOiBcIjJcIiwgXCJhcmlhLXZhbHVlbWluXCI6IFwiMVwiLCBcImFyaWEtdmFsdWVub3dcIjogKHRoaXMubWVyaWRpZW0gPT09IFwiUE1cIiAmJiBcIjJcIikgfHwgXCIxXCIsIFwiYXJpYS12YWx1ZXRleHRcIjogdGhpcy5tZXJpZGllbSwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5pbnB1dF06IHRydWUsXG4gICAgICAgIFtDU1MubWVyaWRpZW1dOiB0cnVlLFxuICAgICAgICBbQ1NTLmlucHV0Rm9jdXNdOiB0aGlzLmFjdGl2ZUVsICYmIHRoaXMuYWN0aXZlRWwgPT09IHRoaXMubWVyaWRpZW1FbCxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMuaW5wdXRDbGlja0hhbmRsZXIsIG9uRm9jdXM6IHRoaXMuZm9jdXNIYW5kbGVyLCBvbktleURvd246IHRoaXMubWVyaWRpZW1LZXlEb3duSGFuZGxlciwgcm9sZTogXCJzcGluYnV0dG9uXCIsIHRhYkluZGV4OiAwLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRNZXJpZGllbUVsIH0sIHRoaXMubG9jYWxpemVkTWVyaWRpZW0gfHwgXCItLVwiKSwgaChcInNwYW5cIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5tZXJpZGllbURvd24sIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuYnV0dG9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5idXR0b25NZXJpZGllbURvd25dOiB0cnVlLFxuICAgICAgICBbQ1NTLmJ1dHRvbkJvdHRvbVJpZ2h0XTogdHJ1ZSxcbiAgICAgIH0sIG9uQ2xpY2s6IHRoaXMubWVyaWRpZW1Eb3duQ2xpY2tIYW5kbGVyLCByb2xlOiBcImJ1dHRvblwiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBcImNoZXZyb24tZG93blwiLCBzY2FsZTogaWNvblNjYWxlIH0pKSkpKSk7XG4gIH1cbiAgc3RhdGljIGdldCBkZWxlZ2F0ZXNGb2N1cygpIHsgcmV0dXJuIHRydWU7IH1cbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInN0ZXBcIjogW1wic3RlcENoYW5nZVwiXSxcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlV2F0Y2hlclwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVXYXRjaGVyXCJdXG4gIH07IH1cbn07XG5UaW1lUGlja2VyLnN0eWxlID0gdGltZVBpY2tlckNzcztcblxuZXhwb3J0IHsgSW5wdXRUaW1lUGlja2VyIGFzIEksIFRpbWVQaWNrZXIgYXMgVCwgZGF5anMgYXMgZCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxjaXRlLWlucHV0LXRpbWUtcGlja2VyLmNhbGNpdGUtdGltZS1waWNrZXItZjM2OGU5YTIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5leHBvcnQgeyBJIGFzIGNhbGNpdGVfaW5wdXRfdGltZV9waWNrZXIsIFQgYXMgY2FsY2l0ZV90aW1lX3BpY2tlciB9IGZyb20gJy4vY2FsY2l0ZS1pbnB1dC10aW1lLXBpY2tlci5jYWxjaXRlLXRpbWUtcGlja2VyLWYzNjhlOWEyLmpzJztcbmltcG9ydCAnLi9pbmRleC04NmZhZWY5Yy5qcyc7XG5pbXBvcnQgJy4vZm9ybS00ODc2YzllNS5qcyc7XG5pbXBvcnQgJy4vZG9tLWVkMDBhNTg1LmpzJztcbmltcG9ydCAnLi9ndWlkLTIxZmVjZmE0LmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtY2Y4MjM4OGMuanMnO1xuaW1wb3J0ICcuL2ludGVyYWN0aXZlLWNiZDhhNmRjLmpzJztcbmltcG9ydCAnLi9icm93c2VyLWVjZTI5ZGE3LmpzJztcbmltcG9ydCAnLi9rZXktNjFmODJkZGIuanMnO1xuaW1wb3J0ICcuL2xhYmVsLTFjMjg1ZDQxLmpzJztcbmltcG9ydCAnLi9jb21wb25lbnQtZjk0Y2FiNzIuanMnO1xuaW1wb3J0ICcuL2xvYWRhYmxlLWIxNzM5NmUwLmpzJztcbmltcG9ydCAnLi9sb2NhbGUtNmU3ODNjZjAuanMnO1xuaW1wb3J0ICcuL29ic2VydmVycy03MWQzMzJkYi5qcyc7XG5pbXBvcnQgJy4vZm9jdXNUcmFwQ29tcG9uZW50LWFlZTE1YjQxLmpzJztcbmltcG9ydCAnLi9tYXRoLTkyMmUzN2VjLmpzJztcbmltcG9ydCAnLi90OW4tMGJjZGNhNTQuanMnO1xuaW1wb3J0ICcuL29wZW5DbG9zZUNvbXBvbmVudC00OGRiNmRhZi5qcyc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtaW5wdXQtdGltZS1waWNrZXJfMi5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmZ1bmN0aW9uIGdldEljb25TY2FsZShjb21wb25lbnRTY2FsZSkge1xuICByZXR1cm4gY29tcG9uZW50U2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIjtcbn1cbi8qKlxuICogVGhpcyB1dGlsIGhlbHBzIHVzIHdhaXQgZm9yIGEgY29tcG9uZW50IHRvIGJlIHJlYWR5IGZvciBib3RoIGxhenktbG9hZGluZyAoYGRpc3RgIG91dHB1dCkgYW5kIG5vbi1sYXp5LWxvYWRpbmcgKGBjb21wb25lbnRzYCBvdXRwdXQpIGNvbXBvbmVudHMuXG4gKlxuICogQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvMWE4YmQ2ZC9jb3JlL3NyYy91dGlscy9oZWxwZXJzLnRzI0w2MEMxLUw3OUMzXG4gKlxuICogQHBhcmFtIGVsIC0gdGhlIGhvc3QgZWxlbWVudCB0byB3YWl0IGZvclxuICovXG5hc3luYyBmdW5jdGlvbiBjb21wb25lbnRPblJlYWR5KGVsKSB7XG4gIGF3YWl0IChpc1N0ZW5jaWxFbChlbClcbiAgICA/IGVsLmNvbXBvbmVudE9uUmVhZHkoKVxuICAgIDogbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpKSk7XG59XG5mdW5jdGlvbiBpc1N0ZW5jaWxFbChlbCkge1xuICByZXR1cm4gdHlwZW9mIGVsLmNvbXBvbmVudE9uUmVhZHkgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuZXhwb3J0IHsgY29tcG9uZW50T25SZWFkeSBhcyBjLCBnZXRJY29uU2NhbGUgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb25lbnQtZjk0Y2FiNzIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBnIGFzIGdldFVzZXJBZ2VudFN0cmluZyB9IGZyb20gJy4vYnJvd3Nlci1lY2UyOWRhNy5qcyc7XG5cbi8vIOKaoO+4jyBicm93c2VyLXNuaWZmaW5nIGlzIG5vdCBhIGJlc3QgcHJhY3RpY2UgYW5kIHNob3VsZCBiZSBhdm9pZGVkIOKaoO+4j1xuY29uc3QgaXNGaXJlZm94ID0gL2ZpcmVmb3gvaS50ZXN0KGdldFVzZXJBZ2VudFN0cmluZygpKTtcbmNvbnN0IGludGVyYWN0aXZlRWxlbWVudFRvUGFyZW50ID0gaXNGaXJlZm94XG4gID8gbmV3IFdlYWtNYXAoKVxuICA6IG51bGw7XG5mdW5jdGlvbiBpbnRlcmNlcHRlZENsaWNrKCkge1xuICBjb25zdCB7IGRpc2FibGVkIH0gPSB0aGlzO1xuICBpZiAoIWRpc2FibGVkKSB7XG4gICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmNsaWNrLmNhbGwodGhpcyk7XG4gIH1cbn1cbmZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgY29uc3QgaW50ZXJhY3RpdmVFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICBpZiAoaXNGaXJlZm94ICYmICFpbnRlcmFjdGl2ZUVsZW1lbnRUb1BhcmVudC5nZXQoaW50ZXJhY3RpdmVFbGVtZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7IGRpc2FibGVkIH0gPSBpbnRlcmFjdGl2ZUVsZW1lbnQ7XG4gIGlmIChkaXNhYmxlZCkge1xuICAgIC8vIHByZXZlbnQgY2xpY2sgZnJvbSBtb3ZpbmcgZm9jdXMgb24gaG9zdFxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn1cbmNvbnN0IG5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudHMgPSBbXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCIsIFwiY2xpY2tcIl07XG5mdW5jdGlvbiBvbk5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudChldmVudCkge1xuICBpZiAoaXNGaXJlZm94ICYmICFpbnRlcmFjdGl2ZUVsZW1lbnRUb1BhcmVudC5nZXQoZXZlbnQudGFyZ2V0KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCB7IGRpc2FibGVkIH0gPSBldmVudC50YXJnZXQ7XG4gIC8vIHByZXZlbnQgZGlzYWxsb3dlZCBtb3VzZSBldmVudHMgZnJvbSBiZWluZyBlbWl0dGVkIG9uIHRoZSBkaXNhYmxlZCBob3N0IChwZXIgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9odG1sL2lzc3Vlcy81ODg2KVxuICAvL+KaoCB3ZSBnZW5lcmFsbHkgYXZvaWQgc3RvcHBpbmcgcHJvcGFnYXRpb24gb2YgZXZlbnRzLCBidXQgdGhpcyBpcyBuZWVkZWQgdG8gYWRoZXJlIHRvIHRoZSBpbnRlbmRlZCBzcGVjIGNoYW5nZXMgYWJvdmUg4pqgXG4gIGlmIChkaXNhYmxlZCkge1xuICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn1cbmNvbnN0IGNhcHR1cmVPbmx5T3B0aW9ucyA9IHsgY2FwdHVyZTogdHJ1ZSB9O1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1cGRhdGVzIHRoZSBob3N0IGVsZW1lbnQgdG8gcHJldmVudCBrZXlib2FyZCBpbnRlcmFjdGlvbiBvbiBpdHMgc3VidHJlZSBhbmQgc2V0cyB0aGUgYXBwcm9wcmlhdGUgYXJpYSBhdHRyaWJ1dGUgZm9yIGFjY2Vzc2liaWxpdHkuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudERpZFJlbmRlcmAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogKipOb3RlcyoqXG4gKlxuICogdGhpcyB1dGlsIGlzIG5vdCBuZWVkZWQgZm9yIHNpbXBsZSBjb21wb25lbnRzIHdob3NlIHJvb3QgZWxlbWVudCBvciBlbGVtZW50cyBhcmUgYW4gaW50ZXJhY3RpdmUgY29tcG9uZW50IChjdXN0b20gZWxlbWVudCBvciBuYXRpdmUgY29udHJvbCkuIEZvciB0aG9zZSBjYXNlcywgc2V0IHRoZSBgZGlzYWJsZWRgIHByb3BzIG9uIHRoZSByb290IGNvbXBvbmVudHMgaW5zdGVhZC5cbiAqIHRlY2huaWNhbGx5LCB1c2VycyBjYW4gb3ZlcnJpZGUgYHRhYmluZGV4YCBhbmQgcmVzdG9yZSBrZXlib2FyZCBuYXZpZ2F0aW9uLCBidXQgdGhpcyB3aWxsIGJlIGNvbnNpZGVyZWQgdXNlciBlcnJvclxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEBwYXJhbSBob3N0SXNUYWJiYWJsZSDigJMgd2hlbiBzZXQgdG8gdHJ1ZSBvciBpdHMgcHJlZGljYXRlIHJldHVybnMgdHJ1ZSwgdGhlIGhvc3QgaXMgdGFiYmFibGUgYW5kIHdpbGwgYmUgbWFuYWdlZCBieSB0aGUgaGVscGVyLiBTZXQgdG8gXCJtYW5hZ2VkXCIgZm9yIGNhc2VzIHdoZXJlIGEgY29tcG9uZW50J3MgcGFyZW50IGRldGVybWluZXMgd2hpY2ggaXRlbSBpcyB0YWJiYWJsZSAoaS5lLiwgc2V0cyBgdGFiaW5kZXhgIHRvIGFsbG93IHRhYmJpbmcpLlxuICovXG5mdW5jdGlvbiB1cGRhdGVIb3N0SW50ZXJhY3Rpb24oY29tcG9uZW50LCBob3N0SXNUYWJiYWJsZSA9IGZhbHNlKSB7XG4gIGlmIChjb21wb25lbnQuZGlzYWJsZWQpIHtcbiAgICBjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgICBjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgaWYgKGNvbXBvbmVudC5lbC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XG4gICAgfVxuICAgIGJsb2NrSW50ZXJhY3Rpb24oY29tcG9uZW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVzdG9yZUludGVyYWN0aW9uKGNvbXBvbmVudCk7XG4gIGlmICh0eXBlb2YgaG9zdElzVGFiYmFibGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGNvbXBvbmVudC5lbC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBob3N0SXNUYWJiYWJsZS5jYWxsKGNvbXBvbmVudCkgPyBcIjBcIiA6IFwiLTFcIik7XG4gIH1cbiAgZWxzZSBpZiAoaG9zdElzVGFiYmFibGUgPT09IHRydWUpIHtcbiAgICBjb21wb25lbnQuZWwuc2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuICB9XG4gIGVsc2UgaWYgKGhvc3RJc1RhYmJhYmxlID09PSBmYWxzZSkge1xuICAgIGNvbXBvbmVudC5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKTtcbiAgfVxuICBlbHNlIDtcbiAgY29tcG9uZW50LmVsLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIik7XG59XG5mdW5jdGlvbiBibG9ja0ludGVyYWN0aW9uKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQuZWwuY2xpY2sgPSBpbnRlcmNlcHRlZENsaWNrO1xuICBhZGRJbnRlcmFjdGlvbkxpc3RlbmVycyhpc0ZpcmVmb3ggPyBnZXRQYXJlbnRFbGVtZW50KGNvbXBvbmVudCkgOiBjb21wb25lbnQuZWwpO1xufVxuZnVuY3Rpb24gYWRkSW50ZXJhY3Rpb25MaXN0ZW5lcnMoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICAvLyB0aGlzIHBhdGggaXMgb25seSBhcHBsaWNhYmxlIHRvIEZpcmVmb3hcbiAgICByZXR1cm47XG4gIH1cbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93biwgY2FwdHVyZU9ubHlPcHRpb25zKTtcbiAgbm9uQnViYmxpbmdXaGVuRGlzYWJsZWRNb3VzZUV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBvbk5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudCwgY2FwdHVyZU9ubHlPcHRpb25zKSk7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnRFbGVtZW50KGNvbXBvbmVudCkge1xuICByZXR1cm4gaW50ZXJhY3RpdmVFbGVtZW50VG9QYXJlbnQuZ2V0KGNvbXBvbmVudC5lbCk7XG59XG5mdW5jdGlvbiByZXN0b3JlSW50ZXJhY3Rpb24oY29tcG9uZW50KSB7XG4gIGRlbGV0ZSBjb21wb25lbnQuZWwuY2xpY2s7IC8vIGZhbGxiYWNrIG9uIEhUTUxFbGVtZW50LnByb3RvdHlwZS5jbGlja1xuICByZW1vdmVJbnRlcmFjdGlvbkxpc3RlbmVycyhpc0ZpcmVmb3ggPyBnZXRQYXJlbnRFbGVtZW50KGNvbXBvbmVudCkgOiBjb21wb25lbnQuZWwpO1xufVxuZnVuY3Rpb24gcmVtb3ZlSW50ZXJhY3Rpb25MaXN0ZW5lcnMoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICAvLyB0aGlzIHBhdGggaXMgb25seSBhcHBsaWNhYmxlIHRvIEZpcmVmb3hcbiAgICByZXR1cm47XG4gIH1cbiAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93biwgY2FwdHVyZU9ubHlPcHRpb25zKTtcbiAgbm9uQnViYmxpbmdXaGVuRGlzYWJsZWRNb3VzZUV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBvbk5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudCwgY2FwdHVyZU9ubHlPcHRpb25zKSk7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSBoZWxwcyBkaXNhYmxlIGNvbXBvbmVudHMgY29uc2lzdGVudGx5IGluIEZpcmVmb3guXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2AgYW5kIGlzIG9ubHkgbmVlZGVkIGZvciBGaXJlZm94IGFzIGl0IGRvZXMgbm90IGNhbGwgY2FwdHVyZSBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIG5vbi1jYXB0dXJlIG9uZXMgKHNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzMxNTA0KS5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RJbnRlcmFjdGl2ZShjb21wb25lbnQpIHtcbiAgaWYgKCFjb21wb25lbnQuZGlzYWJsZWQgfHwgIWlzRmlyZWZveCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwYXJlbnQgPSBjb21wb25lbnQuZWwucGFyZW50RWxlbWVudCB8fCBjb21wb25lbnQuZWw7IC8qIGFzc3VtZSBlbGVtZW50IGlzIGhvc3QgaWYgaXQgaGFzIG5vIHBhcmVudCB3aGVuIGNvbm5lY3RlZCAqL1xuICBpbnRlcmFjdGl2ZUVsZW1lbnRUb1BhcmVudC5zZXQoY29tcG9uZW50LmVsLCBwYXJlbnQpO1xuICBibG9ja0ludGVyYWN0aW9uKGNvbXBvbmVudCk7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSByZXN0b3JlcyBpbnRlcmFjdGl2aXR5IHRvIGRpc2FibGVkIGNvbXBvbmVudHMgY29uc2lzdGVudGx5IGluIEZpcmVmb3guXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBkaXNjb25uZWN0ZWRDYWxsYmFja2AgYW5kIGlzIG9ubHkgbmVlZGVkIGZvciBGaXJlZm94IGFzIGl0IGRvZXMgbm90IGNhbGwgY2FwdHVyZSBldmVudCBsaXN0ZW5lcnMgYmVmb3JlIG5vbi1jYXB0dXJlIG9uZXMgKHNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzMxNTA0KS5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZShjb21wb25lbnQpIHtcbiAgaWYgKCFpc0ZpcmVmb3gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gYWx3YXlzIHJlbW92ZSBvbiBkaXNjb25uZWN0IGFzIHJlbmRlciBvciBjb25uZWN0IHdpbGwgcmVzdG9yZSBpdFxuICBpbnRlcmFjdGl2ZUVsZW1lbnRUb1BhcmVudC5kZWxldGUoY29tcG9uZW50LmVsKTtcbiAgcmVzdG9yZUludGVyYWN0aW9uKGNvbXBvbmVudCk7XG59XG5cbmV4cG9ydCB7IGNvbm5lY3RJbnRlcmFjdGl2ZSBhcyBjLCBkaXNjb25uZWN0SW50ZXJhY3RpdmUgYXMgZCwgdXBkYXRlSG9zdEludGVyYWN0aW9uIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJhY3RpdmUtY2JkOGE2ZGMuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBrIGFzIGlzQmVmb3JlLCBxIGFzIHF1ZXJ5RWxlbWVudFJvb3RzLCBjIGFzIGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeSB9IGZyb20gJy4vZG9tLWVkMDBhNTg1LmpzJztcbmltcG9ydCB7IGMgYXMgY29tcG9uZW50T25SZWFkeSB9IGZyb20gJy4vY29tcG9uZW50LWY5NGNhYjcyLmpzJztcblxuLyoqXG4gKiBFeHBvcnRlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5XG4gKlxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IGxhYmVsQ2xpY2tFdmVudCA9IFwiY2FsY2l0ZUludGVybmFsTGFiZWxDbGlja1wiO1xuY29uc3QgbGFiZWxDb25uZWN0ZWRFdmVudCA9IFwiY2FsY2l0ZUludGVybmFsTGFiZWxDb25uZWN0ZWRcIjtcbmNvbnN0IGxhYmVsRGlzY29ubmVjdGVkRXZlbnQgPSBcImNhbGNpdGVJbnRlcm5hbExhYmVsRGlzY29ubmVjdGVkXCI7XG5jb25zdCBsYWJlbFRhZ05hbWUgPSBcImNhbGNpdGUtbGFiZWxcIjtcbmNvbnN0IGxhYmVsVG9MYWJlbGFibGVzID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG9uTGFiZWxDbGlja01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCBvbkxhYmVsQ29ubmVjdGVkTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IG9uTGFiZWxEaXNjb25uZWN0ZWRNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdW5sYWJlbGVkQ29tcG9uZW50cyA9IG5ldyBTZXQoKTtcbmNvbnN0IGZpbmRMYWJlbEZvckNvbXBvbmVudCA9IChjb21wb25lbnRFbCkgPT4ge1xuICBjb25zdCB7IGlkIH0gPSBjb21wb25lbnRFbDtcbiAgY29uc3QgZm9yTGFiZWwgPSBpZCAmJiBxdWVyeUVsZW1lbnRSb290cyhjb21wb25lbnRFbCwgeyBzZWxlY3RvcjogYCR7bGFiZWxUYWdOYW1lfVtmb3I9XCIke2lkfVwiXWAgfSk7XG4gIGlmIChmb3JMYWJlbCkge1xuICAgIHJldHVybiBmb3JMYWJlbDtcbiAgfVxuICBjb25zdCBwYXJlbnRMYWJlbCA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShjb21wb25lbnRFbCwgbGFiZWxUYWdOYW1lKTtcbiAgaWYgKCFwYXJlbnRMYWJlbCB8fFxuICAgIC8vIGxhYmVsYWJsZSBjb21wb25lbnRzIHdpdGhpbiBvdGhlciBjdXN0b20gZWxlbWVudHMgYXJlIG5vdCBjb25zaWRlcmVkIGxhYmVsYWJsZVxuICAgIGhhc0FuY2VzdG9yQ3VzdG9tRWxlbWVudHMocGFyZW50TGFiZWwsIGNvbXBvbmVudEVsKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBwYXJlbnRMYWJlbDtcbn07XG5mdW5jdGlvbiBoYXNBbmNlc3RvckN1c3RvbUVsZW1lbnRzKGxhYmVsLCBjb21wb25lbnRFbCkge1xuICBsZXQgdHJhdmVyc2VkRWxlbWVudHM7XG4gIGNvbnN0IGN1c3RvbUVsZW1lbnRBbmNlc3RvckNoZWNrRXZlbnRUeXBlID0gXCJjdXN0b20tZWxlbWVudC1hbmNlc3Rvci1jaGVja1wiO1xuICBjb25zdCBsaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGNvbXBvc2VkUGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICAgIHRyYXZlcnNlZEVsZW1lbnRzID0gY29tcG9zZWRQYXRoLnNsaWNlKGNvbXBvc2VkUGF0aC5pbmRleE9mKGNvbXBvbmVudEVsKSwgY29tcG9zZWRQYXRoLmluZGV4T2YobGFiZWwpKTtcbiAgfTtcbiAgbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcihjdXN0b21FbGVtZW50QW5jZXN0b3JDaGVja0V2ZW50VHlwZSwgbGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgY29tcG9uZW50RWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoY3VzdG9tRWxlbWVudEFuY2VzdG9yQ2hlY2tFdmVudFR5cGUsIHsgY29tcG9zZWQ6IHRydWUsIGJ1YmJsZXM6IHRydWUgfSkpO1xuICBsYWJlbC5yZW1vdmVFdmVudExpc3RlbmVyKGN1c3RvbUVsZW1lbnRBbmNlc3RvckNoZWNrRXZlbnRUeXBlLCBsaXN0ZW5lcik7XG4gIGNvbnN0IGFuY2VzdG9yQ3VzdG9tRWxlbWVudHMgPSB0cmF2ZXJzZWRFbGVtZW50c1xuICAgIC5maWx0ZXIoKGVsKSA9PiBlbCAhPT0gY29tcG9uZW50RWwgJiYgZWwgIT09IGxhYmVsKVxuICAgIC5maWx0ZXIoKGVsKSA9PiBlbC50YWdOYW1lPy5pbmNsdWRlcyhcIi1cIikpO1xuICByZXR1cm4gYW5jZXN0b3JDdXN0b21FbGVtZW50cy5sZW5ndGggPiAwO1xufVxuLyoqXG4gKiBIZWxwZXIgdG8gc2V0IHVwIGxhYmVsIGludGVyYWN0aW9ucyBvbiBjb25uZWN0ZWRDYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RMYWJlbChjb21wb25lbnQpIHtcbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbGFiZWxFbCA9IGZpbmRMYWJlbEZvckNvbXBvbmVudChjb21wb25lbnQuZWwpO1xuICBpZiAoKG9uTGFiZWxDbGlja01hcC5oYXMobGFiZWxFbCkgJiYgbGFiZWxFbCA9PT0gY29tcG9uZW50LmxhYmVsRWwpIHx8XG4gICAgKCFsYWJlbEVsICYmIHVubGFiZWxlZENvbXBvbmVudHMuaGFzKGNvbXBvbmVudCkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGJvdW5kT25MYWJlbERpc2Nvbm5lY3RlZCA9IG9uTGFiZWxEaXNjb25uZWN0ZWQuYmluZChjb21wb25lbnQpO1xuICBpZiAobGFiZWxFbCkge1xuICAgIGNvbXBvbmVudC5sYWJlbEVsID0gbGFiZWxFbDtcbiAgICBjb25zdCBsYWJlbGFibGVzID0gbGFiZWxUb0xhYmVsYWJsZXMuZ2V0KGxhYmVsRWwpIHx8IFtdO1xuICAgIGxhYmVsYWJsZXMucHVzaChjb21wb25lbnQpO1xuICAgIGxhYmVsVG9MYWJlbGFibGVzLnNldChsYWJlbEVsLCBsYWJlbGFibGVzLnNvcnQoc29ydEJ5RE9NT3JkZXIpKTtcbiAgICBpZiAoIW9uTGFiZWxDbGlja01hcC5oYXMoY29tcG9uZW50LmxhYmVsRWwpKSB7XG4gICAgICBvbkxhYmVsQ2xpY2tNYXAuc2V0KGNvbXBvbmVudC5sYWJlbEVsLCBvbkxhYmVsQ2xpY2spO1xuICAgICAgY29tcG9uZW50LmxhYmVsRWwuYWRkRXZlbnRMaXN0ZW5lcihsYWJlbENsaWNrRXZlbnQsIG9uTGFiZWxDbGljayk7XG4gICAgfVxuICAgIHVubGFiZWxlZENvbXBvbmVudHMuZGVsZXRlKGNvbXBvbmVudCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsYWJlbENvbm5lY3RlZEV2ZW50LCBvbkxhYmVsQ29ubmVjdGVkTWFwLmdldChjb21wb25lbnQpKTtcbiAgICBvbkxhYmVsRGlzY29ubmVjdGVkTWFwLnNldChjb21wb25lbnQsIGJvdW5kT25MYWJlbERpc2Nvbm5lY3RlZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihsYWJlbERpc2Nvbm5lY3RlZEV2ZW50LCBib3VuZE9uTGFiZWxEaXNjb25uZWN0ZWQpO1xuICB9XG4gIGVsc2UgaWYgKCF1bmxhYmVsZWRDb21wb25lbnRzLmhhcyhjb21wb25lbnQpKSB7XG4gICAgYm91bmRPbkxhYmVsRGlzY29ubmVjdGVkKCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsYWJlbERpc2Nvbm5lY3RlZEV2ZW50LCBvbkxhYmVsRGlzY29ubmVjdGVkTWFwLmdldChjb21wb25lbnQpKTtcbiAgfVxufVxuLyoqXG4gKiBIZWxwZXIgdG8gdGVhciBkb3duIGxhYmVsIGludGVyYWN0aW9ucyBvbiBkaXNjb25uZWN0ZWRDYWxsYmFjayBvbiBsYWJlbGFibGUgY29tcG9uZW50cy5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGRpc2Nvbm5lY3RMYWJlbChjb21wb25lbnQpIHtcbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdW5sYWJlbGVkQ29tcG9uZW50cy5kZWxldGUoY29tcG9uZW50KTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsYWJlbENvbm5lY3RlZEV2ZW50LCBvbkxhYmVsQ29ubmVjdGVkTWFwLmdldChjb21wb25lbnQpKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsYWJlbERpc2Nvbm5lY3RlZEV2ZW50LCBvbkxhYmVsRGlzY29ubmVjdGVkTWFwLmdldChjb21wb25lbnQpKTtcbiAgb25MYWJlbENvbm5lY3RlZE1hcC5kZWxldGUoY29tcG9uZW50KTtcbiAgb25MYWJlbERpc2Nvbm5lY3RlZE1hcC5kZWxldGUoY29tcG9uZW50KTtcbiAgaWYgKCFjb21wb25lbnQubGFiZWxFbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBsYWJlbGFibGVzID0gbGFiZWxUb0xhYmVsYWJsZXMuZ2V0KGNvbXBvbmVudC5sYWJlbEVsKTtcbiAgaWYgKGxhYmVsYWJsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgY29tcG9uZW50LmxhYmVsRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihsYWJlbENsaWNrRXZlbnQsIG9uTGFiZWxDbGlja01hcC5nZXQoY29tcG9uZW50LmxhYmVsRWwpKTtcbiAgICBvbkxhYmVsQ2xpY2tNYXAuZGVsZXRlKGNvbXBvbmVudC5sYWJlbEVsKTtcbiAgfVxuICBsYWJlbFRvTGFiZWxhYmxlcy5zZXQoY29tcG9uZW50LmxhYmVsRWwsIGxhYmVsYWJsZXMuZmlsdGVyKChsYWJlbGFibGUpID0+IGxhYmVsYWJsZSAhPT0gY29tcG9uZW50KS5zb3J0KHNvcnRCeURPTU9yZGVyKSk7XG4gIGNvbXBvbmVudC5sYWJlbEVsID0gbnVsbDtcbn1cbmZ1bmN0aW9uIHNvcnRCeURPTU9yZGVyKGEsIGIpIHtcbiAgcmV0dXJuIGlzQmVmb3JlKGEuZWwsIGIuZWwpID8gLTEgOiAxO1xufVxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IHRoZSBsYWJlbCB0ZXh0IGZyb20gYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBnZXRMYWJlbFRleHQoY29tcG9uZW50KSB7XG4gIHJldHVybiBjb21wb25lbnQubGFiZWwgfHwgY29tcG9uZW50LmxhYmVsRWw/LnRleHRDb250ZW50Py50cmltKCkgfHwgXCJcIjtcbn1cbmZ1bmN0aW9uIG9uTGFiZWxDbGljayhldmVudCkge1xuICBjb25zdCBsYWJlbENsaWNrVGFyZ2V0ID0gZXZlbnQuZGV0YWlsLnNvdXJjZUV2ZW50LnRhcmdldDtcbiAgY29uc3QgbGFiZWxhYmxlcyA9IGxhYmVsVG9MYWJlbGFibGVzLmdldCh0aGlzKTtcbiAgY29uc3QgY2xpY2tlZExhYmVsYWJsZSA9IGxhYmVsYWJsZXMuZmluZCgobGFiZWxhYmxlKSA9PiBsYWJlbGFibGUuZWwgPT09IGxhYmVsQ2xpY2tUYXJnZXQpO1xuICBjb25zdCBsYWJlbGFibGVDaGlsZENsaWNrZWQgPSBsYWJlbGFibGVzLmluY2x1ZGVzKGNsaWNrZWRMYWJlbGFibGUpO1xuICBpZiAobGFiZWxhYmxlQ2hpbGRDbGlja2VkKSB7XG4gICAgLy8gbm8gbmVlZCB0byBmb3J3YXJkIGNsaWNrIGFzIGxhYmVsYWJsZSB3aWxsIHJlY2VpdmUgZm9jdXNcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZmlyc3RMYWJlbGFibGUgPSBsYWJlbGFibGVzWzBdO1xuICBpZiAoZmlyc3RMYWJlbGFibGUuZGlzYWJsZWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZmlyc3RMYWJlbGFibGUub25MYWJlbENsaWNrKGV2ZW50KTtcbn1cbmZ1bmN0aW9uIG9uTGFiZWxDb25uZWN0ZWQoKSB7XG4gIGlmICh1bmxhYmVsZWRDb21wb25lbnRzLmhhcyh0aGlzKSkge1xuICAgIGNvbm5lY3RMYWJlbCh0aGlzKTtcbiAgfVxufVxuZnVuY3Rpb24gb25MYWJlbERpc2Nvbm5lY3RlZCgpIHtcbiAgdW5sYWJlbGVkQ29tcG9uZW50cy5hZGQodGhpcyk7XG4gIGNvbnN0IGJvdW5kT25MYWJlbENvbm5lY3RlZCA9IG9uTGFiZWxDb25uZWN0ZWRNYXAuZ2V0KHRoaXMpIHx8IG9uTGFiZWxDb25uZWN0ZWQuYmluZCh0aGlzKTtcbiAgb25MYWJlbENvbm5lY3RlZE1hcC5zZXQodGhpcywgYm91bmRPbkxhYmVsQ29ubmVjdGVkKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihsYWJlbENvbm5lY3RlZEV2ZW50LCBib3VuZE9uTGFiZWxDb25uZWN0ZWQpO1xufVxuLyoqXG4gKiBIZWxwZXIgdG8gYXNzb2NpYXRlIGFuIGV4cGxpY2l0IGxhYmVsIChpLmUuLCB1c2luZyBgZm9yYCkgd2l0aCBhIGxhYmVsYWJsZSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBoYXZlIGFuIGFzc29jaWF0ZWQgbGFiZWwuXG4gKlxuICogQHBhcmFtIGxhYmVsIC0gdGhlIGxhYmVsIGVsZW1lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYXNzb2NpYXRlRXhwbGljaXRMYWJlbFRvVW5sYWJlbGVkQ29tcG9uZW50KGxhYmVsKSB7XG4gIGF3YWl0IGNvbXBvbmVudE9uUmVhZHkobGFiZWwpO1xuICBjb25zdCBhbHJlYWR5TGFiZWxlZCA9IGxhYmVsVG9MYWJlbGFibGVzLmhhcyhsYWJlbCk7XG4gIGlmIChhbHJlYWR5TGFiZWxlZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBmb3JDb21wb25lbnRFbCA9IGxhYmVsLm93bmVyRG9jdW1lbnQ/LmdldEVsZW1lbnRCeUlkKGxhYmVsLmZvcik7XG4gIGlmICghZm9yQ29tcG9uZW50RWwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBmb3IgKGNvbnN0IGxhYmVsYWJsZSBvZiB1bmxhYmVsZWRDb21wb25lbnRzKSB7XG4gICAgICBpZiAobGFiZWxhYmxlLmVsID09PSBmb3JDb21wb25lbnRFbCkge1xuICAgICAgICBjb25uZWN0TGFiZWwobGFiZWxhYmxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgYXNzb2NpYXRlRXhwbGljaXRMYWJlbFRvVW5sYWJlbGVkQ29tcG9uZW50IGFzIGEsIGxhYmVsRGlzY29ubmVjdGVkRXZlbnQgYXMgYiwgY29ubmVjdExhYmVsIGFzIGMsIGRpc2Nvbm5lY3RMYWJlbCBhcyBkLCBnZXRMYWJlbFRleHQgYXMgZywgbGFiZWxDb25uZWN0ZWRFdmVudCBhcyBsIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhYmVsLTFjMjg1ZDQxLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuY29uc3QgY2xhbXAgPSAodmFsdWUsIG1pbiwgbWF4KSA9PiBNYXRoLm1heChtaW4sIE1hdGgubWluKHZhbHVlLCBtYXgpKTtcbmNvbnN0IGRlY2ltYWxOdW1iZXJSZWdleCA9IG5ldyBSZWdFeHAoLyg/OlxcLihcXGQrKSk/KD86W2VFXShbKy1dP1xcZCspKT8kLyk7XG4vKipcbiAqIFJldHVybnMgdGhlIHF1YW50aXR5IG9mIHJlYWwgZGVjaW1hbCBwbGFjZXMgZm9yIGEgbnVtYmVyLCB3aGljaCBleGNsdWRlcyB0cmFpbGluZyB6ZXJvcy5cbiAqXG4gKiBBZGFwdGVkIGZyb20ge0BsaW5rIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNDU0NTE4L2phdmFzY3JpcHQtaG93LXRvLXJldHJpZXZlLXRoZS1udW1iZXItb2YtZGVjaW1hbHMtb2YtYS1zdHJpbmctbnVtYmVyfS5cbiAqXG4gKiBAcGFyYW0gZGVjaW1hbCAtIGRlY2ltYWwgdmFsdWVcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnMge251bWJlcn0gdGhlIGFtb3VudCBvZiBkZWNpbWFsIHBsYWNlcyBpbiBhIG51bWJlclxuICovXG5jb25zdCBkZWNpbWFsUGxhY2VzID0gKHZhbHVlKSA9PiB7XG4gIGNvbnN0IG1hdGNoID0gKFwiXCIgKyB2YWx1ZSkubWF0Y2goZGVjaW1hbE51bWJlclJlZ2V4KTtcbiAgaWYgKCFtYXRjaCB8fCBwYXJzZUludChtYXRjaFsxXSkgPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gTWF0aC5tYXgoMCwgXG4gIC8vIE51bWJlciBvZiBkaWdpdHMgcmlnaHQgb2YgZGVjaW1hbCBwb2ludC5cbiAgKG1hdGNoWzFdID8gbWF0Y2hbMV0ubGVuZ3RoIDogMCkgLVxuICAgIC8vIEFkanVzdCBmb3Igc2NpZW50aWZpYyBub3RhdGlvbi5cbiAgICAobWF0Y2hbMl0gPyArbWF0Y2hbMl0gOiAwKSk7XG59O1xuZnVuY3Rpb24gZ2V0RGVjaW1hbHModmFsdWUpIHtcbiAgaWYgKGRlY2ltYWxQbGFjZXModmFsdWUpID4gMCAmJiB2YWx1ZSA+IDApIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChgMC4ke3ZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdfWApO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHJlbWFwKHZhbHVlLCBmcm9tTWluLCBmcm9tTWF4LCB0b01pbiwgdG9NYXgpIHtcbiAgcmV0dXJuICgodmFsdWUgLSBmcm9tTWluKSAqICh0b01heCAtIHRvTWluKSkgLyAoZnJvbU1heCAtIGZyb21NaW4pICsgdG9NaW47XG59XG4vKipcbiAqIEhlbHBlciB0byBkZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBjbG9zZSB0byB0aGUgZWRnZSBvZiBhIHJhbmdlIHdpdGhpbiBhIHRocmVzaG9sZC5cbiAqXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSByYW5nZVxuICogQHBhcmFtIHRocmVzaG9sZFxuICogQHJldHVybnMgLTEgaWYgY2xvc2UgdG8gbG93ZXIgZWRnZSwgMSBpZiBjbG9zZSB0byB1cHBlciBlZGdlLCAwIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gY2xvc2VUb1JhbmdlRWRnZSh2YWx1ZSwgcmFuZ2UsIHRocmVzaG9sZCkge1xuICByZXR1cm4gdmFsdWUgPCB0aHJlc2hvbGQgPyAtMSA6IHZhbHVlID4gcmFuZ2UgLSB0aHJlc2hvbGQgPyAxIDogMDtcbn1cblxuZXhwb3J0IHsgY2xvc2VUb1JhbmdlRWRnZSBhcyBhLCBjbGFtcCBhcyBjLCBkZWNpbWFsUGxhY2VzIGFzIGQsIGdldERlY2ltYWxzIGFzIGcsIHJlbWFwIGFzIHIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0aC05MjJlMzdlYy5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IGUgYXMgcmVhZFRhc2sgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcblxuZnVuY3Rpb24gaXNPcGVuKGNvbXBvbmVudCkge1xuICByZXR1cm4gXCJvcGVuZWRcIiBpbiBjb21wb25lbnQgPyBjb21wb25lbnQub3BlbmVkIDogY29tcG9uZW50Lm9wZW47XG59XG5mdW5jdGlvbiBlbWl0SW1tZWRpYXRlbHkoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQgPSBmYWxzZSkge1xuICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICA/IGNvbXBvbmVudC5vbkJlZm9yZU9wZW4oKVxuICAgIDogY29tcG9uZW50Lm9uQmVmb3JlQ2xvc2UoKTtcbiAgKG5vbk9wZW5DbG9zZUNvbXBvbmVudCA/IGNvbXBvbmVudFtjb21wb25lbnQudHJhbnNpdGlvblByb3BdIDogaXNPcGVuKGNvbXBvbmVudCkpXG4gICAgPyBjb21wb25lbnQub25PcGVuKClcbiAgICA6IGNvbXBvbmVudC5vbkNsb3NlKCk7XG59XG4vKipcbiAqIEhlbHBlciB0byBkZXRlcm1pbmUgZ2xvYmFsbHkgc2V0IHRyYW5zaXRpb24gZHVyYXRpb24gb24gdGhlIGdpdmVuIG9wZW5UcmFuc2l0aW9uUHJvcCwgd2hpY2ggaXMgaW1wb3J0ZWQgYW5kIHNldCBpbiB0aGUgQFdhdGNoKFwib3BlblwiKS5cbiAqIFVzZWQgdG8gZW1pdCAoYmVmb3JlKW9wZW4vY2xvc2UgZXZlbnRzIGJvdGggZm9yIHdoZW4gdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBpcyBwcmVzZW50IGFuZCB3aGVuIHRoZXJlIGlzIG5vbmUgKHRyYW5zaXRpb24tZHVyYXRpb24gaXMgc2V0IHRvIDApLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBvblRvZ2dsZU9wZW5DbG9zZUNvbXBvbmVudCwgT3BlbkNsb3NlQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL3V0aWxzL29wZW5DbG9zZUNvbXBvbmVudFwiO1xuICpcbiAqIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICogLy8gV2hlbiBjb21wb25lbnQgaW5pdGlhbGx5IHJlbmRlcnMsIGlmIGBvcGVuYCB3YXMgc2V0IHdlIG5lZWQgdG8gdHJpZ2dlciBvbiBsb2FkIGFzIHdhdGNoZXIgZG9lc24ndCBmaXJlLlxuICogaWYgKHRoaXMub3Blbikge1xuICogICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKiBAV2F0Y2goXCJvcGVuXCIpXG4gKiBhc3luYyB0b2dnbGVNb2RhbCh2YWx1ZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICogICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKlxuICogQHBhcmFtIGNvbXBvbmVudCAtIE9wZW5DbG9zZUNvbXBvbmVudCB1c2VzIGBvcGVuYCBwcm9wIHRvIGVtaXQgKGJlZm9yZSlvcGVuL2Nsb3NlLlxuICogQHBhcmFtIG5vbk9wZW5DbG9zZUNvbXBvbmVudCAtIE9wZW5DbG9zZUNvbXBvbmVudCB1c2VzIGBleHBhbmRlZGAgcHJvcCB0byBlbWl0IChiZWZvcmUpb3Blbi9jbG9zZS5cbiAqL1xuZnVuY3Rpb24gb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQgPSBmYWxzZSkge1xuICByZWFkVGFzaygoKSA9PiB7XG4gICAgaWYgKGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgIGNvbnN0IHsgdHJhbnNpdGlvbkR1cmF0aW9uOiBhbGxEdXJhdGlvbnMsIHRyYW5zaXRpb25Qcm9wZXJ0eTogYWxsUHJvcHMgfSA9IGdldENvbXB1dGVkU3R5bGUoY29tcG9uZW50LnRyYW5zaXRpb25FbCk7XG4gICAgICBjb25zdCBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXkgPSBhbGxEdXJhdGlvbnMuc3BsaXQoXCIsXCIpO1xuICAgICAgY29uc3QgYWxsVHJhbnNpdGlvblByb3BzQXJyYXkgPSBhbGxQcm9wcy5zcGxpdChcIixcIik7XG4gICAgICBjb25zdCBvcGVuVHJhbnNpdGlvblByb3BJbmRleCA9IGFsbFRyYW5zaXRpb25Qcm9wc0FycmF5LmluZGV4T2YoY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCk7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXlbb3BlblRyYW5zaXRpb25Qcm9wSW5kZXhdID8/XG4gICAgICAgIC8qIFNhZmFyaSB3aWxsIGhhdmUgYSBzaW5nbGUgdHJhbnNpdGlvbiB2YWx1ZSBpZiBtdWx0aXBsZSBwcm9wcyBzaGFyZSBpdCxcbiAgICAgICAgc28gd2UgZmFsbCBiYWNrIHRvIGl0IGlmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgcHJvcCBkdXJhdGlvbiAqL1xuICAgICAgICBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXlbMF07XG4gICAgICBpZiAodHJhbnNpdGlvbkR1cmF0aW9uID09PSBcIjBzXCIpIHtcbiAgICAgICAgZW1pdEltbWVkaWF0ZWx5KGNvbXBvbmVudCwgbm9uT3BlbkNsb3NlQ29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZmFsbGJhY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbnN0YXJ0XCIsIG9uU3RhcnQpO1xuICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uY2FuY2VsXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICBlbWl0SW1tZWRpYXRlbHkoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQpO1xuICAgICAgfSwgcGFyc2VGbG9hdCh0cmFuc2l0aW9uRHVyYXRpb24pICogMTAwMCk7XG4gICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uc3RhcnRcIiwgb25TdGFydCk7XG4gICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmNhbmNlbFwiLCBvbkVuZE9yQ2FuY2VsKTtcbiAgICAgIGZ1bmN0aW9uIG9uU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCAmJiBldmVudC50YXJnZXQgPT09IGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZmFsbGJhY2tUaW1lb3V0SWQpO1xuICAgICAgICAgIGNvbXBvbmVudC50cmFuc2l0aW9uRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25zdGFydFwiLCBvblN0YXJ0KTtcbiAgICAgICAgICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICAgICAgICAgID8gY29tcG9uZW50Lm9uQmVmb3JlT3BlbigpXG4gICAgICAgICAgICA6IGNvbXBvbmVudC5vbkJlZm9yZUNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uRW5kT3JDYW5jZWwoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCAmJiBldmVudC50YXJnZXQgPT09IGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgICAgICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICAgICAgICAgID8gY29tcG9uZW50Lm9uT3BlbigpXG4gICAgICAgICAgICA6IGNvbXBvbmVudC5vbkNsb3NlKCk7XG4gICAgICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBvbkVuZE9yQ2FuY2VsKTtcbiAgICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uY2FuY2VsXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQgYXMgbyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuQ2xvc2VDb21wb25lbnQtNDhkYjZkYWYuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBhIGFzIGdldEFzc2V0UGF0aCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5cbmNvbnN0IGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZSA9IHt9O1xuYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZUJ1bmRsZShsYW5nLCBjb21wb25lbnQpIHtcbiAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50fV8ke2xhbmd9YDtcbiAgaWYgKGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xuICB9XG4gIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldID0gZmV0Y2goZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy8ke2NvbXBvbmVudH0vdDluL21lc3NhZ2VzXyR7bGFuZ30uanNvbmApKVxuICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwLmpzb24oKTtcbiAgfSlcbiAgICAuY2F0Y2goKCkgPT4gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpKTtcbiAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xufVxuZnVuY3Rpb24gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGZldGNoIGNvbXBvbmVudCBtZXNzYWdlIGJ1bmRsZVwiKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5tZXNzYWdlcyA9IHtcbiAgICAuLi5jb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzLFxuICAgIC4uLmNvbXBvbmVudC5tZXNzYWdlT3ZlcnJpZGVzLFxuICB9O1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCB0aGUgbWVzc2FnZXMgdXNlZCBieSB0aGUgY29tcG9uZW50LiBJdCBzaG91bGQgYmUgYXdhaXRlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNldFVwTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMgPSBhd2FpdCBmZXRjaE1lc3NhZ2VzKGNvbXBvbmVudCwgY29tcG9uZW50LmVmZmVjdGl2ZUxvY2FsZSk7XG4gIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKSB7XG4gIGNvbnN0IHsgZWwgfSA9IGNvbXBvbmVudDtcbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnLnJlcGxhY2UoXCJjYWxjaXRlLVwiLCBcIlwiKTtcbiAgcmV0dXJuIGdldE1lc3NhZ2VCdW5kbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKGxhbmcsIFwidDluXCIpLCBjb21wb25lbnROYW1lKTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IG11c3QgYmUgc2V0IHVwIGZvciB0aGUgY29tcG9uZW50IHRvIHVwZGF0ZSBpdHMgZGVmYXVsdCBtZXNzYWdlIGJ1bmRsZSBpZiB0aGUgbG9jYWxlIGNoYW5nZXMuXG4gKlxuICogSXQgY2FuIGJlIHNldCB1cCBpbiAqKmVpdGhlcioqIG9mIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqXG4gKiAxLiBjYWxsZWQgZnJvbSBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBvbkxvY2FsZUNoYW5nZWAgbWV0aG9kIG9yXG4gKiAyLiBjYWxsZWQgZnJvbSBhIHdhdGNoZXIgY29uZmlndXJlZCB0byB3YXRjaCBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBlZmZlY3RpdmVMb2NhbGVgIHByb3BcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gbGFuZ1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCBpbnRlcm5hbHMgZm9yIG1lc3NhZ2VzIHN1cHBvcnQuXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBtdXN0IGJlIGNhbGxlZCBhZnRlciBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBjb25uZWN0TG9jYWxpemVkYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2U7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSB0ZWFycyBkb3duIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdE1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQub25NZXNzYWdlc0NoYW5nZSA9IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRPbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICBtZXJnZU1lc3NhZ2VzKHRoaXMpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0TWVzc2FnZXMgYXMgYywgZGlzY29ubmVjdE1lc3NhZ2VzIGFzIGQsIHNldFVwTWVzc2FnZXMgYXMgcywgdXBkYXRlTWVzc2FnZXMgYXMgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10OW4tMGJjZGNhNTQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9