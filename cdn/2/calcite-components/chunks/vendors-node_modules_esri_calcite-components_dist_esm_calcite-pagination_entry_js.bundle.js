"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-pagination_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-pagination.entry.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-pagination.entry.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_pagination: () => (/* binding */ Pagination)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _component_f94cab72_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component-f94cab72.js */ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */











const CSS = {
  page: "page",
  selected: "selected",
  chevron: "chevron",
  disabled: "disabled",
  ellipsis: "ellipsis",
};
const ICONS = {
  next: "chevron-right",
  previous: "chevron-left",
  first: "chevron-start",
  last: "chevron-end",
};

/**
 * Do not edit directly
 * Generated on Sat, 02 Dec 2023 04:05:27 GMT
 */
const calciteContainerSizeWidthXxs = {"min":"0","max":"320px"}; // Small handheld devices and mini-windows
const calciteContainerSizeWidthXs = {"min":"321px","max":"476px"}; // Handheld devices
const calciteContainerSizeWidthSm = {"min":"477px","max":"768px"}; // Small tablets
const calciteContainerSizeWidthMd = {"min":"769px","max":"1152px"}; // Small laptops
const calciteContainerSizeWidthLg = {"min":"1153px","max":"1440px"}; // Large laptops and desktop computers

/**
 * A breakpoints lookup object.
 */
const breakpoints = {
  width: {
    large: cssLengthToNumber(calciteContainerSizeWidthLg.max),
    medium: cssLengthToNumber(calciteContainerSizeWidthMd.max),
    small: cssLengthToNumber(calciteContainerSizeWidthSm.max),
    xsmall: cssLengthToNumber(calciteContainerSizeWidthXs.max),
    xxsmall: cssLengthToNumber(calciteContainerSizeWidthXxs.max),
  },
};
function cssLengthToNumber(length) {
  return parseInt(length);
}

const paginationCss = ":host{display:flex;writing-mode:horizontal-tb}:host([scale=s]) .chevron,:host([scale=s]) .page,:host([scale=s]) .ellipsis{block-size:1.5rem;padding-inline:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;min-inline-size:1.5rem}:host([scale=m]) .chevron,:host([scale=m]) .page,:host([scale=m]) .ellipsis{block-size:2rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;min-inline-size:2rem}:host([scale=l]) .chevron,:host([scale=l]) .page,:host([scale=l]) .ellipsis{block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-inline-size:2.75rem}:host([scale=l]) .chevron{padding-inline:0.625rem}:host([scale=l]) .page,:host([scale=l]) .ellipsis{padding-inline:0.75rem}:host button{outline-color:transparent}:host button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}.chevron,.page,.ellipsis{margin:0px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;border-style:none;--tw-border-opacity:0;background-color:transparent;padding:0px;vertical-align:baseline;font-family:inherit;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-color-text-3)}.chevron,.page{cursor:pointer;border-block:2px solid transparent}.chevron:hover,.page:hover{color:var(--calcite-color-text-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.page:hover{border-block-end-color:var(--calcite-color-border-2)}.page.selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);border-block-end-color:var(--calcite-color-brand)}.chevron:hover{background-color:var(--calcite-color-foreground-2);color:var(--calcite-color-brand)}.chevron:active{background-color:var(--calcite-color-foreground-3)}.chevron.disabled{pointer-events:none;background-color:transparent}.chevron.disabled>calcite-icon{opacity:var(--calcite-opacity-disabled)}:host([hidden]){display:none}[hidden]{display:none}";

const firstAndLastPageCount = 2;
const ellipsisCount = 2;
const maxItemBreakpoints = {
  large: 11,
  medium: 9,
  small: 7,
  xsmall: 5,
  xxsmall: 1,
};
const Pagination = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calcitePaginationChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calcitePaginationChange", 6);
    this.resizeObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_4__.c)("resize", (entries) => entries.forEach(this.resizeHandler));
    this.resizeHandler = ({ contentRect: { width } }) => this.setMaxItemsToBreakpoint(width);
    this.firstClicked = () => {
      this.startItem = 1;
      this.emitUpdate();
    };
    this.lastClicked = () => {
      this.startItem = this.lastStartItem;
      this.emitUpdate();
    };
    this.previousClicked = async () => {
      await this.previousPage();
      this.emitUpdate();
    };
    this.nextClicked = async () => {
      await this.nextPage();
      this.emitUpdate();
    };
    this.handlePageClick = (event) => {
      const target = event.target;
      this.startItem = parseInt(target.value, 10);
      this.emitUpdate();
    };
    this.groupSeparator = false;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.numberingSystem = undefined;
    this.pageSize = 20;
    this.scale = "m";
    this.startItem = 1;
    this.totalItems = 0;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.maxItems = maxItemBreakpoints.xxsmall;
    this.totalPages = undefined;
    this.lastStartItem = undefined;
    this.isXXSmall = undefined;
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  handleTotalPages() {
    if (this.pageSize < 1) {
      this.pageSize = 1;
    }
    this.totalPages = this.totalItems / this.pageSize;
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_3__.u)(this, this.effectiveLocale);
  }
  effectiveLocaleWatcher() {
    _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatOptions = {
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      useGrouping: this.groupSeparator,
    };
  }
  handleLastStartItemChange() {
    const { totalItems, pageSize, totalPages } = this;
    this.lastStartItem =
      (totalItems % pageSize === 0 ? totalItems - pageSize : Math.floor(totalPages) * pageSize) + 1;
  }
  handleIsXXSmall() {
    this.isXXSmall = this.maxItems === maxItemBreakpoints.xxsmall;
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    this.resizeObserver?.observe(this.el);
  }
  async componentWillLoad() {
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_3__.s)(this);
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    this.handleTotalPages();
    this.handleLastStartItemChange();
    this.handleIsXXSmall();
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
    this.setMaxItemsToBreakpoint(this.el.clientWidth);
  }
  disconnectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    this.resizeObserver?.disconnect();
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component's first focusable element. */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    this.el.focus();
  }
  /** Go to the next page of results. */
  async nextPage() {
    this.startItem = Math.min(this.lastStartItem, this.startItem + this.pageSize);
  }
  /** Go to the previous page of results. */
  async previousPage() {
    this.startItem = Math.max(1, this.startItem - this.pageSize);
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  setMaxItemsToBreakpoint(width) {
    if (!breakpoints || !width) {
      return;
    }
    if (width >= breakpoints.width.medium) {
      this.maxItems = maxItemBreakpoints.large;
      return;
    }
    if (width >= breakpoints.width.small) {
      this.maxItems = maxItemBreakpoints.medium;
      return;
    }
    if (width >= breakpoints.width.xsmall) {
      this.maxItems = maxItemBreakpoints.small;
      return;
    }
    if (width >= breakpoints.width.xxsmall) {
      this.maxItems = maxItemBreakpoints.xsmall;
      return;
    }
    this.maxItems = maxItemBreakpoints.xxsmall;
  }
  showStartEllipsis() {
    return (this.totalPages > this.maxItems &&
      Math.floor(this.startItem / this.pageSize) >
        this.maxItems - firstAndLastPageCount - ellipsisCount);
  }
  showEndEllipsis() {
    return (this.totalPages > this.maxItems &&
      (this.totalItems - this.startItem) / this.pageSize >
        this.maxItems - firstAndLastPageCount - (ellipsisCount - 1));
  }
  emitUpdate() {
    this.calcitePaginationChange.emit();
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderEllipsis(type) {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.ellipsis, "data-test-ellipsis": type, key: type }, "\u2026"));
  }
  renderItems() {
    const { totalItems, pageSize, startItem, maxItems, totalPages, lastStartItem, isXXSmall } = this;
    const items = [];
    if (isXXSmall) {
      items.push(this.renderPage(startItem));
      return items;
    }
    const renderFirstPage = totalItems > pageSize;
    const renderStartEllipsis = this.showStartEllipsis();
    const renderEndEllipsis = this.showEndEllipsis();
    if (renderFirstPage) {
      items.push(this.renderPage(1));
    }
    if (renderStartEllipsis) {
      items.push(this.renderEllipsis("start"));
    }
    const remainingItems = maxItems -
      firstAndLastPageCount -
      (renderEndEllipsis ? 1 : 0) -
      (renderStartEllipsis ? 1 : 0);
    let end;
    let nextStart;
    // if we don't need ellipses render the whole set
    if (totalPages - 1 <= remainingItems) {
      nextStart = 1 + pageSize;
      end = lastStartItem - pageSize;
    }
    else {
      // if we're within max pages of page 1
      if (startItem / pageSize < remainingItems) {
        nextStart = 1 + pageSize;
        end = 1 + remainingItems * pageSize;
      }
      else {
        // if we're within max pages of last page
        if (startItem + remainingItems * pageSize >= totalItems) {
          nextStart = lastStartItem - remainingItems * pageSize;
          end = lastStartItem - pageSize;
        }
        else {
          // if we're within the center pages
          nextStart = startItem - pageSize * ((remainingItems - 1) / 2);
          end = startItem + pageSize * ((remainingItems - 1) / 2);
        }
      }
    }
    for (let i = 0; i < remainingItems && nextStart <= end; i++) {
      items.push(this.renderPage(nextStart));
      nextStart = nextStart + pageSize;
    }
    if (renderEndEllipsis) {
      items.push(this.renderEllipsis("end"));
    }
    items.push(this.renderPage(lastStartItem));
    return items;
  }
  renderPage(start) {
    const { pageSize } = this;
    const page = Math.floor(start / pageSize) + (pageSize === 1 ? 0 : 1);
    _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__.n.numberFormatOptions = {
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      useGrouping: this.groupSeparator,
    };
    const displayedPage = _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_2__.n.localize(page.toString());
    const selected = start === this.startItem;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { "aria-current": selected ? "page" : "false", class: {
        [CSS.page]: true,
        [CSS.selected]: selected,
      }, onClick: this.handlePageClick, value: start }, displayedPage));
  }
  renderPreviousChevron() {
    const { pageSize, startItem, messages } = this;
    const disabled = pageSize === 1 ? startItem <= pageSize : startItem < pageSize;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { "aria-label": messages.previous, class: {
        [CSS.chevron]: true,
        [CSS.disabled]: disabled,
      }, "data-test-chevron": "previous", disabled: disabled, key: "previous", onClick: this.previousClicked }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { flipRtl: true, icon: ICONS.previous, scale: (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.scale) })));
  }
  renderNextChevron() {
    const { totalItems, pageSize, startItem, messages } = this;
    const disabled = pageSize === 1 ? startItem + pageSize > totalItems : startItem + pageSize > totalItems;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { "aria-label": messages.next, class: {
        [CSS.chevron]: true,
        [CSS.disabled]: disabled,
      }, "data-test-chevron": "next", disabled: disabled, key: "next-button", onClick: this.nextClicked }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { flipRtl: true, icon: ICONS.next, scale: (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.scale) })));
  }
  renderFirstChevron() {
    const { messages, startItem, isXXSmall } = this;
    const disabled = startItem === 1;
    return isXXSmall ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { "aria-label": messages.first, class: {
        [CSS.chevron]: true,
        [CSS.disabled]: disabled,
      }, disabled: disabled, key: "first-button", onClick: this.firstClicked }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { flipRtl: true, icon: ICONS.first, scale: (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.scale) }))) : null;
  }
  renderLastChevron() {
    const { messages, startItem, isXXSmall, lastStartItem } = this;
    const disabled = startItem === lastStartItem;
    return isXXSmall ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { "aria-label": messages.last, class: {
        [CSS.chevron]: true,
        [CSS.disabled]: disabled,
      }, disabled: disabled, key: "last-button", onClick: this.lastClicked }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { flipRtl: true, icon: ICONS.last, scale: (0,_component_f94cab72_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.scale) }))) : null;
  }
  render() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.F, null, this.renderFirstChevron(), this.renderPreviousChevron(), this.renderItems(), this.renderNextChevron(), this.renderLastChevron()));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "messageOverrides": ["onMessagesChange"],
    "totalItems": ["handleTotalPages", "handleLastStartItemChange"],
    "pageSize": ["handleTotalPages", "handleLastStartItemChange"],
    "effectiveLocale": ["effectiveLocaleChange", "effectiveLocaleWatcher"],
    "totalPages": ["handleLastStartItemChange"],
    "maxItems": ["handleIsXXSmall"]
  }; }
};
Pagination.style = paginationCss;



//# sourceMappingURL=calcite-pagination.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/component-f94cab72.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ componentOnReady),
/* harmony export */   g: () => (/* binding */ getIconScale)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
function getIconScale(componentScale) {
  return componentScale === "l" ? "m" : "s";
}
/**
 * This util helps us wait for a component to be ready for both lazy-loading (`dist` output) and non-lazy-loading (`components` output) components.
 *
 * Based on https://github.com/ionic-team/ionic-framework/blob/1a8bd6d/core/src/utils/helpers.ts#L60C1-L79C3
 *
 * @param el - the host element to wait for
 */
async function componentOnReady(el) {
  await (isStencilEl(el)
    ? el.componentOnReady()
    : new Promise((resolve) => requestAnimationFrame(() => resolve())));
}
function isStencilEl(el) {
  return typeof el.componentOnReady === "function";
}



//# sourceMappingURL=component-f94cab72.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setComponentLoaded),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setUpLoadableComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.f)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}



//# sourceMappingURL=loadable-b17396e0.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-0bcdca54.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLXBhZ2luYXRpb25fZW50cnlfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNpSDtBQUNNO0FBQ0o7QUFDUTtBQUM3RDtBQUNGO0FBQ2pDO0FBQ0M7QUFDSztBQUNOOztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwQkFBMEI7QUFDaEUscUNBQXFDLDhCQUE4QjtBQUNuRSxxQ0FBcUMsOEJBQThCO0FBQ25FLHFDQUFxQywrQkFBK0I7QUFDcEUscUNBQXFDLGdDQUFnQzs7QUFFckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLGFBQWEsMkJBQTJCLDRFQUE0RSxrQkFBa0IsdUJBQXVCLHNDQUFzQyxpQkFBaUIsdUJBQXVCLDRFQUE0RSxnQkFBZ0Isc0JBQXNCLHNDQUFzQyxpQkFBaUIscUJBQXFCLDRFQUE0RSxtQkFBbUIscUNBQXFDLG9CQUFvQix3QkFBd0IsMEJBQTBCLHdCQUF3QixrREFBa0QsdUJBQXVCLGFBQWEsMEJBQTBCLG1CQUFtQiw2Q0FBNkMsa1BBQWtQLHlCQUF5QixXQUFXLHNCQUFzQixhQUFhLG1CQUFtQix1QkFBdUIsa0JBQWtCLHNCQUFzQiw2QkFBNkIsWUFBWSx3QkFBd0Isb0JBQW9CLHFDQUFxQyxvQkFBb0Isa0NBQWtDLGVBQWUsZUFBZSxtQ0FBbUMsMkJBQTJCLGtDQUFrQyw2RkFBNkYsWUFBWSxxREFBcUQsZUFBZSw4Q0FBOEMsa0NBQWtDLGtEQUFrRCxlQUFlLG1EQUFtRCxpQ0FBaUMsZ0JBQWdCLG1EQUFtRCxrQkFBa0Isb0JBQW9CLDZCQUE2QiwrQkFBK0Isd0NBQXdDLGdCQUFnQixhQUFhLFNBQVMsYUFBYTs7QUFFbnFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQixtQ0FBbUMscURBQVc7QUFDOUMsMEJBQTBCLHlEQUFjO0FBQ3hDLDRCQUE0QixlQUFlLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFjO0FBQ2xCO0FBQ0E7QUFDQSxJQUFJLGtEQUFxQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNEQUFnQjtBQUNwQixJQUFJLG1EQUFlO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbURBQWE7QUFDdkIsSUFBSSx3REFBc0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksd0RBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQW1CO0FBQ3ZCLElBQUksbURBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsd0RBQWtCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFDLFdBQVcsNERBQTREO0FBQ3BGO0FBQ0E7QUFDQSxZQUFZLGtGQUFrRjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdDQUF3QztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBLElBQUksa0RBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFxQjtBQUMvQztBQUNBLFlBQVkscURBQUMsYUFBYTtBQUMxQjtBQUNBO0FBQ0EsT0FBTywrQ0FBK0M7QUFDdEQ7QUFDQTtBQUNBLFlBQVksZ0NBQWdDO0FBQzVDO0FBQ0EsWUFBWSxxREFBQyxhQUFhO0FBQzFCO0FBQ0E7QUFDQSxPQUFPLHVHQUF1RyxFQUFFLHFEQUFDLG1CQUFtQiw0Q0FBNEMseURBQVksY0FBYztBQUMxTTtBQUNBO0FBQ0EsWUFBWSw0Q0FBNEM7QUFDeEQ7QUFDQSxZQUFZLHFEQUFDLGFBQWE7QUFDMUI7QUFDQTtBQUNBLE9BQU8sa0dBQWtHLEVBQUUscURBQUMsbUJBQW1CLHdDQUF3Qyx5REFBWSxjQUFjO0FBQ2pNO0FBQ0E7QUFDQSxZQUFZLGlDQUFpQztBQUM3QztBQUNBLHdCQUF3QixxREFBQyxhQUFhO0FBQ3RDO0FBQ0E7QUFDQSxPQUFPLHVFQUF1RSxFQUFFLHFEQUFDLG1CQUFtQix5Q0FBeUMseURBQVksY0FBYztBQUN2SztBQUNBO0FBQ0EsWUFBWSxnREFBZ0Q7QUFDNUQ7QUFDQSx3QkFBd0IscURBQUMsYUFBYTtBQUN0QztBQUNBO0FBQ0EsT0FBTyxxRUFBcUUsRUFBRSxxREFBQyxtQkFBbUIsd0NBQXdDLHlEQUFZLGNBQWM7QUFDcEs7QUFDQTtBQUNBLFlBQVkscURBQUMsQ0FBQyxpREFBUTtBQUN0QjtBQUNBLGdDQUFnQztBQUNoQyw0QkFBNEI7QUFDNUIsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTRDOztBQUU1Qzs7Ozs7Ozs7Ozs7Ozs7O0FDOVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9EOztBQUVwRDs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDdUQ7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUscURBQVc7QUFDYjtBQUNBOztBQUUrRzs7QUFFL0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3RDtBQUNPOztBQUUvRDtBQUNBO0FBQ0EsaUJBQWlCLFVBQVUsR0FBRyxLQUFLO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxxREFBWSxhQUFhLFVBQVUsZ0JBQWdCLEtBQUs7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSztBQUNmO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWtHOztBQUVsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtcGFnaW5hdGlvbi5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9jb21wb25lbnQtZjk0Y2FiNzIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vbG9hZGFibGUtYjE3Mzk2ZTAuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vdDluLTBiY2RjYTU0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBGIGFzIEZyYWdtZW50LCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcbmltcG9ydCB7IHMgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgYSBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS1iMTczOTZlMC5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlclN0cmluZ0Zvcm1hdHRlciwgYyBhcyBjb25uZWN0TG9jYWxpemVkLCBkIGFzIGRpc2Nvbm5lY3RMb2NhbGl6ZWQgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZU1lc3NhZ2VzLCBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcyB9IGZyb20gJy4vdDluLTBiY2RjYTU0LmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy03MWQzMzJkYi5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldEljb25TY2FsZSB9IGZyb20gJy4vY29tcG9uZW50LWY5NGNhYjcyLmpzJztcbmltcG9ydCAnLi9kb20tZWQwMGE1ODUuanMnO1xuaW1wb3J0ICcuL2d1aWQtMjFmZWNmYTQuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy1jZjgyMzg4Yy5qcyc7XG5pbXBvcnQgJy4va2V5LTYxZjgyZGRiLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBwYWdlOiBcInBhZ2VcIixcbiAgc2VsZWN0ZWQ6IFwic2VsZWN0ZWRcIixcbiAgY2hldnJvbjogXCJjaGV2cm9uXCIsXG4gIGRpc2FibGVkOiBcImRpc2FibGVkXCIsXG4gIGVsbGlwc2lzOiBcImVsbGlwc2lzXCIsXG59O1xuY29uc3QgSUNPTlMgPSB7XG4gIG5leHQ6IFwiY2hldnJvbi1yaWdodFwiLFxuICBwcmV2aW91czogXCJjaGV2cm9uLWxlZnRcIixcbiAgZmlyc3Q6IFwiY2hldnJvbi1zdGFydFwiLFxuICBsYXN0OiBcImNoZXZyb24tZW5kXCIsXG59O1xuXG4vKipcbiAqIERvIG5vdCBlZGl0IGRpcmVjdGx5XG4gKiBHZW5lcmF0ZWQgb24gU2F0LCAwMiBEZWMgMjAyMyAwNDowNToyNyBHTVRcbiAqL1xuY29uc3QgY2FsY2l0ZUNvbnRhaW5lclNpemVXaWR0aFh4cyA9IHtcIm1pblwiOlwiMFwiLFwibWF4XCI6XCIzMjBweFwifTsgLy8gU21hbGwgaGFuZGhlbGQgZGV2aWNlcyBhbmQgbWluaS13aW5kb3dzXG5jb25zdCBjYWxjaXRlQ29udGFpbmVyU2l6ZVdpZHRoWHMgPSB7XCJtaW5cIjpcIjMyMXB4XCIsXCJtYXhcIjpcIjQ3NnB4XCJ9OyAvLyBIYW5kaGVsZCBkZXZpY2VzXG5jb25zdCBjYWxjaXRlQ29udGFpbmVyU2l6ZVdpZHRoU20gPSB7XCJtaW5cIjpcIjQ3N3B4XCIsXCJtYXhcIjpcIjc2OHB4XCJ9OyAvLyBTbWFsbCB0YWJsZXRzXG5jb25zdCBjYWxjaXRlQ29udGFpbmVyU2l6ZVdpZHRoTWQgPSB7XCJtaW5cIjpcIjc2OXB4XCIsXCJtYXhcIjpcIjExNTJweFwifTsgLy8gU21hbGwgbGFwdG9wc1xuY29uc3QgY2FsY2l0ZUNvbnRhaW5lclNpemVXaWR0aExnID0ge1wibWluXCI6XCIxMTUzcHhcIixcIm1heFwiOlwiMTQ0MHB4XCJ9OyAvLyBMYXJnZSBsYXB0b3BzIGFuZCBkZXNrdG9wIGNvbXB1dGVyc1xuXG4vKipcbiAqIEEgYnJlYWtwb2ludHMgbG9va3VwIG9iamVjdC5cbiAqL1xuY29uc3QgYnJlYWtwb2ludHMgPSB7XG4gIHdpZHRoOiB7XG4gICAgbGFyZ2U6IGNzc0xlbmd0aFRvTnVtYmVyKGNhbGNpdGVDb250YWluZXJTaXplV2lkdGhMZy5tYXgpLFxuICAgIG1lZGl1bTogY3NzTGVuZ3RoVG9OdW1iZXIoY2FsY2l0ZUNvbnRhaW5lclNpemVXaWR0aE1kLm1heCksXG4gICAgc21hbGw6IGNzc0xlbmd0aFRvTnVtYmVyKGNhbGNpdGVDb250YWluZXJTaXplV2lkdGhTbS5tYXgpLFxuICAgIHhzbWFsbDogY3NzTGVuZ3RoVG9OdW1iZXIoY2FsY2l0ZUNvbnRhaW5lclNpemVXaWR0aFhzLm1heCksXG4gICAgeHhzbWFsbDogY3NzTGVuZ3RoVG9OdW1iZXIoY2FsY2l0ZUNvbnRhaW5lclNpemVXaWR0aFh4cy5tYXgpLFxuICB9LFxufTtcbmZ1bmN0aW9uIGNzc0xlbmd0aFRvTnVtYmVyKGxlbmd0aCkge1xuICByZXR1cm4gcGFyc2VJbnQobGVuZ3RoKTtcbn1cblxuY29uc3QgcGFnaW5hdGlvbkNzcyA9IFwiOmhvc3R7ZGlzcGxheTpmbGV4O3dyaXRpbmctbW9kZTpob3Jpem9udGFsLXRifTpob3N0KFtzY2FsZT1zXSkgLmNoZXZyb24sOmhvc3QoW3NjYWxlPXNdKSAucGFnZSw6aG9zdChbc2NhbGU9c10pIC5lbGxpcHNpc3tibG9jay1zaXplOjEuNXJlbTtwYWRkaW5nLWlubGluZTowLjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbTttaW4taW5saW5lLXNpemU6MS41cmVtfTpob3N0KFtzY2FsZT1tXSkgLmNoZXZyb24sOmhvc3QoW3NjYWxlPW1dKSAucGFnZSw6aG9zdChbc2NhbGU9bV0pIC5lbGxpcHNpc3tibG9jay1zaXplOjJyZW07cGFkZGluZy1pbmxpbmU6MC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbTttaW4taW5saW5lLXNpemU6MnJlbX06aG9zdChbc2NhbGU9bF0pIC5jaGV2cm9uLDpob3N0KFtzY2FsZT1sXSkgLnBhZ2UsOmhvc3QoW3NjYWxlPWxdKSAuZWxsaXBzaXN7YmxvY2stc2l6ZToyLjc1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO21pbi1pbmxpbmUtc2l6ZToyLjc1cmVtfTpob3N0KFtzY2FsZT1sXSkgLmNoZXZyb257cGFkZGluZy1pbmxpbmU6MC42MjVyZW19Omhvc3QoW3NjYWxlPWxdKSAucGFnZSw6aG9zdChbc2NhbGU9bF0pIC5lbGxpcHNpc3twYWRkaW5nLWlubGluZTowLjc1cmVtfTpob3N0IGJ1dHRvbntvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50fTpob3N0IGJ1dHRvbjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDpjYWxjKFxcbiAgICAgICAgICAgIC0ycHggKlxcbiAgICAgICAgICAgIGNhbGMoXFxuICAgICAgICAgICAgICAxIC1cXG4gICAgICAgICAgICAgIDIgKiBjbGFtcChcXG4gICAgICAgICAgICAgICAgMCxcXG4gICAgICAgICAgICAgICAgdmFyKC0tY2FsY2l0ZS1vZmZzZXQtaW52ZXJ0LWZvY3VzKSxcXG4gICAgICAgICAgICAgICAgMVxcbiAgICAgICAgICAgICAgKVxcbiAgICAgICAgICAgIClcXG4gICAgICAgICAgKX0uY2hldnJvbiwucGFnZSwuZWxsaXBzaXN7bWFyZ2luOjBweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JvcmRlci1zdHlsZTpub25lOy0tdHctYm9yZGVyLW9wYWNpdHk6MDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O3BhZGRpbmc6MHB4O3ZlcnRpY2FsLWFsaWduOmJhc2VsaW5lO2ZvbnQtZmFtaWx5OmluaGVyaXQ7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApO2xpbmUtaGVpZ2h0OjEuMjVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpfS5jaGV2cm9uLC5wYWdle2N1cnNvcjpwb2ludGVyO2JvcmRlci1ibG9jazoycHggc29saWQgdHJhbnNwYXJlbnR9LmNoZXZyb246aG92ZXIsLnBhZ2U6aG92ZXJ7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpO3RyYW5zaXRpb246YWxsIHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZykgZWFzZS1pbi1vdXQgMHMsIG91dGxpbmUgMHMsIG91dGxpbmUtb2Zmc2V0IDBzfS5wYWdlOmhvdmVye2JvcmRlci1ibG9jay1lbmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMil9LnBhZ2Uuc2VsZWN0ZWR7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKTtib3JkZXItYmxvY2stZW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfS5jaGV2cm9uOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTIpO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfS5jaGV2cm9uOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKX0uY2hldnJvbi5kaXNhYmxlZHtwb2ludGVyLWV2ZW50czpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LmNoZXZyb24uZGlzYWJsZWQ+Y2FsY2l0ZS1pY29ue29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgZmlyc3RBbmRMYXN0UGFnZUNvdW50ID0gMjtcbmNvbnN0IGVsbGlwc2lzQ291bnQgPSAyO1xuY29uc3QgbWF4SXRlbUJyZWFrcG9pbnRzID0ge1xuICBsYXJnZTogMTEsXG4gIG1lZGl1bTogOSxcbiAgc21hbGw6IDcsXG4gIHhzbWFsbDogNSxcbiAgeHhzbWFsbDogMSxcbn07XG5jb25zdCBQYWdpbmF0aW9uID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNhbGNpdGVQYWdpbmF0aW9uQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlUGFnaW5hdGlvbkNoYW5nZVwiLCA2KTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKGVudHJpZXMpID0+IGVudHJpZXMuZm9yRWFjaCh0aGlzLnJlc2l6ZUhhbmRsZXIpKTtcbiAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSAoeyBjb250ZW50UmVjdDogeyB3aWR0aCB9IH0pID0+IHRoaXMuc2V0TWF4SXRlbXNUb0JyZWFrcG9pbnQod2lkdGgpO1xuICAgIHRoaXMuZmlyc3RDbGlja2VkID0gKCkgPT4ge1xuICAgICAgdGhpcy5zdGFydEl0ZW0gPSAxO1xuICAgICAgdGhpcy5lbWl0VXBkYXRlKCk7XG4gICAgfTtcbiAgICB0aGlzLmxhc3RDbGlja2VkID0gKCkgPT4ge1xuICAgICAgdGhpcy5zdGFydEl0ZW0gPSB0aGlzLmxhc3RTdGFydEl0ZW07XG4gICAgICB0aGlzLmVtaXRVcGRhdGUoKTtcbiAgICB9O1xuICAgIHRoaXMucHJldmlvdXNDbGlja2VkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5wcmV2aW91c1BhZ2UoKTtcbiAgICAgIHRoaXMuZW1pdFVwZGF0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5uZXh0Q2xpY2tlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMubmV4dFBhZ2UoKTtcbiAgICAgIHRoaXMuZW1pdFVwZGF0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVQYWdlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgIHRoaXMuc3RhcnRJdGVtID0gcGFyc2VJbnQodGFyZ2V0LnZhbHVlLCAxMCk7XG4gICAgICB0aGlzLmVtaXRVcGRhdGUoKTtcbiAgICB9O1xuICAgIHRoaXMuZ3JvdXBTZXBhcmF0b3IgPSBmYWxzZTtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBhZ2VTaXplID0gMjA7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuc3RhcnRJdGVtID0gMTtcbiAgICB0aGlzLnRvdGFsSXRlbXMgPSAwO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLm1heEl0ZW1zID0gbWF4SXRlbUJyZWFrcG9pbnRzLnh4c21hbGw7XG4gICAgdGhpcy50b3RhbFBhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubGFzdFN0YXJ0SXRlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmlzWFhTbWFsbCA9IHVuZGVmaW5lZDtcbiAgfVxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICAgIC8qIHdpcmVkIHVwIGJ5IHQ5biB1dGlsICovXG4gIH1cbiAgaGFuZGxlVG90YWxQYWdlcygpIHtcbiAgICBpZiAodGhpcy5wYWdlU2l6ZSA8IDEpIHtcbiAgICAgIHRoaXMucGFnZVNpemUgPSAxO1xuICAgIH1cbiAgICB0aGlzLnRvdGFsUGFnZXMgPSB0aGlzLnRvdGFsSXRlbXMgLyB0aGlzLnBhZ2VTaXplO1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gIH1cbiAgZWZmZWN0aXZlTG9jYWxlV2F0Y2hlcigpIHtcbiAgICBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcbiAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgdXNlR3JvdXBpbmc6IHRoaXMuZ3JvdXBTZXBhcmF0b3IsXG4gICAgfTtcbiAgfVxuICBoYW5kbGVMYXN0U3RhcnRJdGVtQ2hhbmdlKCkge1xuICAgIGNvbnN0IHsgdG90YWxJdGVtcywgcGFnZVNpemUsIHRvdGFsUGFnZXMgfSA9IHRoaXM7XG4gICAgdGhpcy5sYXN0U3RhcnRJdGVtID1cbiAgICAgICh0b3RhbEl0ZW1zICUgcGFnZVNpemUgPT09IDAgPyB0b3RhbEl0ZW1zIC0gcGFnZVNpemUgOiBNYXRoLmZsb29yKHRvdGFsUGFnZXMpICogcGFnZVNpemUpICsgMTtcbiAgfVxuICBoYW5kbGVJc1hYU21hbGwoKSB7XG4gICAgdGhpcy5pc1hYU21hbGwgPSB0aGlzLm1heEl0ZW1zID09PSBtYXhJdGVtQnJlYWtwb2ludHMueHhzbWFsbDtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5lbCk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVG90YWxQYWdlcygpO1xuICAgIHRoaXMuaGFuZGxlTGFzdFN0YXJ0SXRlbUNoYW5nZSgpO1xuICAgIHRoaXMuaGFuZGxlSXNYWFNtYWxsKCk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gICAgdGhpcy5zZXRNYXhJdGVtc1RvQnJlYWtwb2ludCh0aGlzLmVsLmNsaWVudFdpZHRoKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudC4gKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgfVxuICAvKiogR28gdG8gdGhlIG5leHQgcGFnZSBvZiByZXN1bHRzLiAqL1xuICBhc3luYyBuZXh0UGFnZSgpIHtcbiAgICB0aGlzLnN0YXJ0SXRlbSA9IE1hdGgubWluKHRoaXMubGFzdFN0YXJ0SXRlbSwgdGhpcy5zdGFydEl0ZW0gKyB0aGlzLnBhZ2VTaXplKTtcbiAgfVxuICAvKiogR28gdG8gdGhlIHByZXZpb3VzIHBhZ2Ugb2YgcmVzdWx0cy4gKi9cbiAgYXN5bmMgcHJldmlvdXNQYWdlKCkge1xuICAgIHRoaXMuc3RhcnRJdGVtID0gTWF0aC5tYXgoMSwgdGhpcy5zdGFydEl0ZW0gLSB0aGlzLnBhZ2VTaXplKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHNldE1heEl0ZW1zVG9CcmVha3BvaW50KHdpZHRoKSB7XG4gICAgaWYgKCFicmVha3BvaW50cyB8fCAhd2lkdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpZHRoID49IGJyZWFrcG9pbnRzLndpZHRoLm1lZGl1bSkge1xuICAgICAgdGhpcy5tYXhJdGVtcyA9IG1heEl0ZW1CcmVha3BvaW50cy5sYXJnZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpZHRoID49IGJyZWFrcG9pbnRzLndpZHRoLnNtYWxsKSB7XG4gICAgICB0aGlzLm1heEl0ZW1zID0gbWF4SXRlbUJyZWFrcG9pbnRzLm1lZGl1bTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpZHRoID49IGJyZWFrcG9pbnRzLndpZHRoLnhzbWFsbCkge1xuICAgICAgdGhpcy5tYXhJdGVtcyA9IG1heEl0ZW1CcmVha3BvaW50cy5zbWFsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdpZHRoID49IGJyZWFrcG9pbnRzLndpZHRoLnh4c21hbGwpIHtcbiAgICAgIHRoaXMubWF4SXRlbXMgPSBtYXhJdGVtQnJlYWtwb2ludHMueHNtYWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1heEl0ZW1zID0gbWF4SXRlbUJyZWFrcG9pbnRzLnh4c21hbGw7XG4gIH1cbiAgc2hvd1N0YXJ0RWxsaXBzaXMoKSB7XG4gICAgcmV0dXJuICh0aGlzLnRvdGFsUGFnZXMgPiB0aGlzLm1heEl0ZW1zICYmXG4gICAgICBNYXRoLmZsb29yKHRoaXMuc3RhcnRJdGVtIC8gdGhpcy5wYWdlU2l6ZSkgPlxuICAgICAgICB0aGlzLm1heEl0ZW1zIC0gZmlyc3RBbmRMYXN0UGFnZUNvdW50IC0gZWxsaXBzaXNDb3VudCk7XG4gIH1cbiAgc2hvd0VuZEVsbGlwc2lzKCkge1xuICAgIHJldHVybiAodGhpcy50b3RhbFBhZ2VzID4gdGhpcy5tYXhJdGVtcyAmJlxuICAgICAgKHRoaXMudG90YWxJdGVtcyAtIHRoaXMuc3RhcnRJdGVtKSAvIHRoaXMucGFnZVNpemUgPlxuICAgICAgICB0aGlzLm1heEl0ZW1zIC0gZmlyc3RBbmRMYXN0UGFnZUNvdW50IC0gKGVsbGlwc2lzQ291bnQgLSAxKSk7XG4gIH1cbiAgZW1pdFVwZGF0ZSgpIHtcbiAgICB0aGlzLmNhbGNpdGVQYWdpbmF0aW9uQ2hhbmdlLmVtaXQoKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlckVsbGlwc2lzKHR5cGUpIHtcbiAgICByZXR1cm4gKGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5lbGxpcHNpcywgXCJkYXRhLXRlc3QtZWxsaXBzaXNcIjogdHlwZSwga2V5OiB0eXBlIH0sIFwiXFx1MjAyNlwiKSk7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgY29uc3QgeyB0b3RhbEl0ZW1zLCBwYWdlU2l6ZSwgc3RhcnRJdGVtLCBtYXhJdGVtcywgdG90YWxQYWdlcywgbGFzdFN0YXJ0SXRlbSwgaXNYWFNtYWxsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgaWYgKGlzWFhTbWFsbCkge1xuICAgICAgaXRlbXMucHVzaCh0aGlzLnJlbmRlclBhZ2Uoc3RhcnRJdGVtKSk7XG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlckZpcnN0UGFnZSA9IHRvdGFsSXRlbXMgPiBwYWdlU2l6ZTtcbiAgICBjb25zdCByZW5kZXJTdGFydEVsbGlwc2lzID0gdGhpcy5zaG93U3RhcnRFbGxpcHNpcygpO1xuICAgIGNvbnN0IHJlbmRlckVuZEVsbGlwc2lzID0gdGhpcy5zaG93RW5kRWxsaXBzaXMoKTtcbiAgICBpZiAocmVuZGVyRmlyc3RQYWdlKSB7XG4gICAgICBpdGVtcy5wdXNoKHRoaXMucmVuZGVyUGFnZSgxKSk7XG4gICAgfVxuICAgIGlmIChyZW5kZXJTdGFydEVsbGlwc2lzKSB7XG4gICAgICBpdGVtcy5wdXNoKHRoaXMucmVuZGVyRWxsaXBzaXMoXCJzdGFydFwiKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlbWFpbmluZ0l0ZW1zID0gbWF4SXRlbXMgLVxuICAgICAgZmlyc3RBbmRMYXN0UGFnZUNvdW50IC1cbiAgICAgIChyZW5kZXJFbmRFbGxpcHNpcyA/IDEgOiAwKSAtXG4gICAgICAocmVuZGVyU3RhcnRFbGxpcHNpcyA/IDEgOiAwKTtcbiAgICBsZXQgZW5kO1xuICAgIGxldCBuZXh0U3RhcnQ7XG4gICAgLy8gaWYgd2UgZG9uJ3QgbmVlZCBlbGxpcHNlcyByZW5kZXIgdGhlIHdob2xlIHNldFxuICAgIGlmICh0b3RhbFBhZ2VzIC0gMSA8PSByZW1haW5pbmdJdGVtcykge1xuICAgICAgbmV4dFN0YXJ0ID0gMSArIHBhZ2VTaXplO1xuICAgICAgZW5kID0gbGFzdFN0YXJ0SXRlbSAtIHBhZ2VTaXplO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIGlmIHdlJ3JlIHdpdGhpbiBtYXggcGFnZXMgb2YgcGFnZSAxXG4gICAgICBpZiAoc3RhcnRJdGVtIC8gcGFnZVNpemUgPCByZW1haW5pbmdJdGVtcykge1xuICAgICAgICBuZXh0U3RhcnQgPSAxICsgcGFnZVNpemU7XG4gICAgICAgIGVuZCA9IDEgKyByZW1haW5pbmdJdGVtcyAqIHBhZ2VTaXplO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIGlmIHdlJ3JlIHdpdGhpbiBtYXggcGFnZXMgb2YgbGFzdCBwYWdlXG4gICAgICAgIGlmIChzdGFydEl0ZW0gKyByZW1haW5pbmdJdGVtcyAqIHBhZ2VTaXplID49IHRvdGFsSXRlbXMpIHtcbiAgICAgICAgICBuZXh0U3RhcnQgPSBsYXN0U3RhcnRJdGVtIC0gcmVtYWluaW5nSXRlbXMgKiBwYWdlU2l6ZTtcbiAgICAgICAgICBlbmQgPSBsYXN0U3RhcnRJdGVtIC0gcGFnZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaWYgd2UncmUgd2l0aGluIHRoZSBjZW50ZXIgcGFnZXNcbiAgICAgICAgICBuZXh0U3RhcnQgPSBzdGFydEl0ZW0gLSBwYWdlU2l6ZSAqICgocmVtYWluaW5nSXRlbXMgLSAxKSAvIDIpO1xuICAgICAgICAgIGVuZCA9IHN0YXJ0SXRlbSArIHBhZ2VTaXplICogKChyZW1haW5pbmdJdGVtcyAtIDEpIC8gMik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1haW5pbmdJdGVtcyAmJiBuZXh0U3RhcnQgPD0gZW5kOyBpKyspIHtcbiAgICAgIGl0ZW1zLnB1c2godGhpcy5yZW5kZXJQYWdlKG5leHRTdGFydCkpO1xuICAgICAgbmV4dFN0YXJ0ID0gbmV4dFN0YXJ0ICsgcGFnZVNpemU7XG4gICAgfVxuICAgIGlmIChyZW5kZXJFbmRFbGxpcHNpcykge1xuICAgICAgaXRlbXMucHVzaCh0aGlzLnJlbmRlckVsbGlwc2lzKFwiZW5kXCIpKTtcbiAgICB9XG4gICAgaXRlbXMucHVzaCh0aGlzLnJlbmRlclBhZ2UobGFzdFN0YXJ0SXRlbSkpO1xuICAgIHJldHVybiBpdGVtcztcbiAgfVxuICByZW5kZXJQYWdlKHN0YXJ0KSB7XG4gICAgY29uc3QgeyBwYWdlU2l6ZSB9ID0gdGhpcztcbiAgICBjb25zdCBwYWdlID0gTWF0aC5mbG9vcihzdGFydCAvIHBhZ2VTaXplKSArIChwYWdlU2l6ZSA9PT0gMSA/IDAgOiAxKTtcbiAgICBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcbiAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgdXNlR3JvdXBpbmc6IHRoaXMuZ3JvdXBTZXBhcmF0b3IsXG4gICAgfTtcbiAgICBjb25zdCBkaXNwbGF5ZWRQYWdlID0gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLmxvY2FsaXplKHBhZ2UudG9TdHJpbmcoKSk7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBzdGFydCA9PT0gdGhpcy5zdGFydEl0ZW07XG4gICAgcmV0dXJuIChoKFwiYnV0dG9uXCIsIHsgXCJhcmlhLWN1cnJlbnRcIjogc2VsZWN0ZWQgPyBcInBhZ2VcIiA6IFwiZmFsc2VcIiwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5wYWdlXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5zZWxlY3RlZF06IHNlbGVjdGVkLFxuICAgICAgfSwgb25DbGljazogdGhpcy5oYW5kbGVQYWdlQ2xpY2ssIHZhbHVlOiBzdGFydCB9LCBkaXNwbGF5ZWRQYWdlKSk7XG4gIH1cbiAgcmVuZGVyUHJldmlvdXNDaGV2cm9uKCkge1xuICAgIGNvbnN0IHsgcGFnZVNpemUsIHN0YXJ0SXRlbSwgbWVzc2FnZXMgfSA9IHRoaXM7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBwYWdlU2l6ZSA9PT0gMSA/IHN0YXJ0SXRlbSA8PSBwYWdlU2l6ZSA6IHN0YXJ0SXRlbSA8IHBhZ2VTaXplO1xuICAgIHJldHVybiAoaChcImJ1dHRvblwiLCB7IFwiYXJpYS1sYWJlbFwiOiBtZXNzYWdlcy5wcmV2aW91cywgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5jaGV2cm9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5kaXNhYmxlZF06IGRpc2FibGVkLFxuICAgICAgfSwgXCJkYXRhLXRlc3QtY2hldnJvblwiOiBcInByZXZpb3VzXCIsIGRpc2FibGVkOiBkaXNhYmxlZCwga2V5OiBcInByZXZpb3VzXCIsIG9uQ2xpY2s6IHRoaXMucHJldmlvdXNDbGlja2VkIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBmbGlwUnRsOiB0cnVlLCBpY29uOiBJQ09OUy5wcmV2aW91cywgc2NhbGU6IGdldEljb25TY2FsZSh0aGlzLnNjYWxlKSB9KSkpO1xuICB9XG4gIHJlbmRlck5leHRDaGV2cm9uKCkge1xuICAgIGNvbnN0IHsgdG90YWxJdGVtcywgcGFnZVNpemUsIHN0YXJ0SXRlbSwgbWVzc2FnZXMgfSA9IHRoaXM7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBwYWdlU2l6ZSA9PT0gMSA/IHN0YXJ0SXRlbSArIHBhZ2VTaXplID4gdG90YWxJdGVtcyA6IHN0YXJ0SXRlbSArIHBhZ2VTaXplID4gdG90YWxJdGVtcztcbiAgICByZXR1cm4gKGgoXCJidXR0b25cIiwgeyBcImFyaWEtbGFiZWxcIjogbWVzc2FnZXMubmV4dCwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5jaGV2cm9uXTogdHJ1ZSxcbiAgICAgICAgW0NTUy5kaXNhYmxlZF06IGRpc2FibGVkLFxuICAgICAgfSwgXCJkYXRhLXRlc3QtY2hldnJvblwiOiBcIm5leHRcIiwgZGlzYWJsZWQ6IGRpc2FibGVkLCBrZXk6IFwibmV4dC1idXR0b25cIiwgb25DbGljazogdGhpcy5uZXh0Q2xpY2tlZCB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgZmxpcFJ0bDogdHJ1ZSwgaWNvbjogSUNPTlMubmV4dCwgc2NhbGU6IGdldEljb25TY2FsZSh0aGlzLnNjYWxlKSB9KSkpO1xuICB9XG4gIHJlbmRlckZpcnN0Q2hldnJvbigpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBzdGFydEl0ZW0sIGlzWFhTbWFsbCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXNhYmxlZCA9IHN0YXJ0SXRlbSA9PT0gMTtcbiAgICByZXR1cm4gaXNYWFNtYWxsID8gKGgoXCJidXR0b25cIiwgeyBcImFyaWEtbGFiZWxcIjogbWVzc2FnZXMuZmlyc3QsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuY2hldnJvbl06IHRydWUsXG4gICAgICAgIFtDU1MuZGlzYWJsZWRdOiBkaXNhYmxlZCxcbiAgICAgIH0sIGRpc2FibGVkOiBkaXNhYmxlZCwga2V5OiBcImZpcnN0LWJ1dHRvblwiLCBvbkNsaWNrOiB0aGlzLmZpcnN0Q2xpY2tlZCB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgZmxpcFJ0bDogdHJ1ZSwgaWNvbjogSUNPTlMuZmlyc3QsIHNjYWxlOiBnZXRJY29uU2NhbGUodGhpcy5zY2FsZSkgfSkpKSA6IG51bGw7XG4gIH1cbiAgcmVuZGVyTGFzdENoZXZyb24oKSB7XG4gICAgY29uc3QgeyBtZXNzYWdlcywgc3RhcnRJdGVtLCBpc1hYU21hbGwsIGxhc3RTdGFydEl0ZW0gfSA9IHRoaXM7XG4gICAgY29uc3QgZGlzYWJsZWQgPSBzdGFydEl0ZW0gPT09IGxhc3RTdGFydEl0ZW07XG4gICAgcmV0dXJuIGlzWFhTbWFsbCA/IChoKFwiYnV0dG9uXCIsIHsgXCJhcmlhLWxhYmVsXCI6IG1lc3NhZ2VzLmxhc3QsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuY2hldnJvbl06IHRydWUsXG4gICAgICAgIFtDU1MuZGlzYWJsZWRdOiBkaXNhYmxlZCxcbiAgICAgIH0sIGRpc2FibGVkOiBkaXNhYmxlZCwga2V5OiBcImxhc3QtYnV0dG9uXCIsIG9uQ2xpY2s6IHRoaXMubGFzdENsaWNrZWQgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGZsaXBSdGw6IHRydWUsIGljb246IElDT05TLmxhc3QsIHNjYWxlOiBnZXRJY29uU2NhbGUodGhpcy5zY2FsZSkgfSkpKSA6IG51bGw7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChGcmFnbWVudCwgbnVsbCwgdGhpcy5yZW5kZXJGaXJzdENoZXZyb24oKSwgdGhpcy5yZW5kZXJQcmV2aW91c0NoZXZyb24oKSwgdGhpcy5yZW5kZXJJdGVtcygpLCB0aGlzLnJlbmRlck5leHRDaGV2cm9uKCksIHRoaXMucmVuZGVyTGFzdENoZXZyb24oKSkpO1xuICB9XG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJ0b3RhbEl0ZW1zXCI6IFtcImhhbmRsZVRvdGFsUGFnZXNcIiwgXCJoYW5kbGVMYXN0U3RhcnRJdGVtQ2hhbmdlXCJdLFxuICAgIFwicGFnZVNpemVcIjogW1wiaGFuZGxlVG90YWxQYWdlc1wiLCBcImhhbmRsZUxhc3RTdGFydEl0ZW1DaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCIsIFwiZWZmZWN0aXZlTG9jYWxlV2F0Y2hlclwiXSxcbiAgICBcInRvdGFsUGFnZXNcIjogW1wiaGFuZGxlTGFzdFN0YXJ0SXRlbUNoYW5nZVwiXSxcbiAgICBcIm1heEl0ZW1zXCI6IFtcImhhbmRsZUlzWFhTbWFsbFwiXVxuICB9OyB9XG59O1xuUGFnaW5hdGlvbi5zdHlsZSA9IHBhZ2luYXRpb25Dc3M7XG5cbmV4cG9ydCB7IFBhZ2luYXRpb24gYXMgY2FsY2l0ZV9wYWdpbmF0aW9uIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtcGFnaW5hdGlvbi5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmZ1bmN0aW9uIGdldEljb25TY2FsZShjb21wb25lbnRTY2FsZSkge1xuICByZXR1cm4gY29tcG9uZW50U2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIjtcbn1cbi8qKlxuICogVGhpcyB1dGlsIGhlbHBzIHVzIHdhaXQgZm9yIGEgY29tcG9uZW50IHRvIGJlIHJlYWR5IGZvciBib3RoIGxhenktbG9hZGluZyAoYGRpc3RgIG91dHB1dCkgYW5kIG5vbi1sYXp5LWxvYWRpbmcgKGBjb21wb25lbnRzYCBvdXRwdXQpIGNvbXBvbmVudHMuXG4gKlxuICogQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvMWE4YmQ2ZC9jb3JlL3NyYy91dGlscy9oZWxwZXJzLnRzI0w2MEMxLUw3OUMzXG4gKlxuICogQHBhcmFtIGVsIC0gdGhlIGhvc3QgZWxlbWVudCB0byB3YWl0IGZvclxuICovXG5hc3luYyBmdW5jdGlvbiBjb21wb25lbnRPblJlYWR5KGVsKSB7XG4gIGF3YWl0IChpc1N0ZW5jaWxFbChlbClcbiAgICA/IGVsLmNvbXBvbmVudE9uUmVhZHkoKVxuICAgIDogbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiByZXNvbHZlKCkpKSk7XG59XG5mdW5jdGlvbiBpc1N0ZW5jaWxFbChlbCkge1xuICByZXR1cm4gdHlwZW9mIGVsLmNvbXBvbmVudE9uUmVhZHkgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuZXhwb3J0IHsgY29tcG9uZW50T25SZWFkeSBhcyBjLCBnZXRJY29uU2NhbGUgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb25lbnQtZjk0Y2FiNzIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBmIGFzIGZvcmNlVXBkYXRlIH0gZnJvbSAnLi9pbmRleC04NmZhZWY5Yy5qcyc7XG5cbmNvbnN0IHJlc29sdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJvbWlzZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgc2V0cyB1cCB0aGUgY29tcG9uZW50IGZvciB0aGUgYWJpbGl0eSB0byBrbm93IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudFdpbGxMb2FkKCk6IHZvaWQge1xuICogICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRVcExvYWRhYmxlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBwcm9taXNlTWFwLnNldChjb21wb25lbnQsIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlTWFwLnNldChjb21wb25lbnQsIHJlc29sdmUpKSk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgbGV0cyB0aGUgbG9hZGFibGUgY29tcG9uZW50IGtub3cgdGhhdCBpdCBpcyBub3cgbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudERpZExvYWQoKTogdm9pZCB7XG4gKiAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXNvbHZlTWFwLmdldChjb21wb25lbnQpKCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJlIGEgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZCAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIFN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQpLlxuICpcbiAqIFJlcXVpcmVzIHJlcXVpcmVzIGBMb2FkYWJsZUNvbXBvbmVudGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdC5cbiAqXG4gKiBgYGBcbiAqIGFzeW5jIG15TWV0aG9kKCk6IFByb21pc2U8dm9pZD4ge1xuICogICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmZ1bmN0aW9uIGNvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmV0dXJuIHByb21pc2VNYXAuZ2V0KGNvbXBvbmVudCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJpbmcgdGhlIGNvbXBvbmVudCBpcyBsb2FkZWQgYW5kIHJlbmRlcmVkIGJ5IHRoZSBicm93c2VyIChUaGUgXCJjb21wb25lbnREaWRMb2FkXCIgU3RlbmNpbCBsaWZlY3ljbGUgbWV0aG9kIGhhcyBiZWVuIGNhbGxlZCBhbmQgYW55IGludGVybmFsIGVsZW1lbnRzIGFyZSBmb2N1c2FibGUpLlxuICpcbiAqIFJlcXVpcmVzIHJlcXVpcmVzIGBMb2FkYWJsZUNvbXBvbmVudGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdCBhbmQgdGhlbiBhbiBpbnRlcm5hbCBlbGVtZW50IGJlIGZvY3VzZWQuXG4gKlxuICogYGBgXG4gKiBhc3luYyBzZXRGb2N1cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICogICB0aGlzLmludGVybmFsRWxlbWVudD8uZm9jdXMoKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29tcG9uZW50Rm9jdXNhYmxlKGNvbXBvbmVudCkge1xuICBhd2FpdCBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KTtcbiAgZm9yY2VVcGRhdGUoY29tcG9uZW50KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSk7XG59XG5cbmV4cG9ydCB7IHNldENvbXBvbmVudExvYWRlZCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYiwgY29tcG9uZW50Rm9jdXNhYmxlIGFzIGMsIHNldFVwTG9hZGFibGVDb21wb25lbnQgYXMgcyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkYWJsZS1iMTczOTZlMC5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IGEgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnLi9pbmRleC04NmZhZWY5Yy5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN1cHBvcnRlZExvY2FsZSB9IGZyb20gJy4vbG9jYWxlLTZlNzgzY2YwLmpzJztcblxuY29uc3QgY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlID0ge307XG5hc3luYyBmdW5jdGlvbiBnZXRNZXNzYWdlQnVuZGxlKGxhbmcsIGNvbXBvbmVudCkge1xuICBjb25zdCBrZXkgPSBgJHtjb21wb25lbnR9XyR7bGFuZ31gO1xuICBpZiAoY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV0pIHtcbiAgICByZXR1cm4gY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV07XG4gIH1cbiAgY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV0gPSBmZXRjaChnZXRBc3NldFBhdGgoYC4vYXNzZXRzLyR7Y29tcG9uZW50fS90OW4vbWVzc2FnZXNfJHtsYW5nfS5qc29uYCkpXG4gICAgLnRoZW4oKHJlc3ApID0+IHtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93TWVzc2FnZUZldGNoRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3AuanNvbigpO1xuICB9KVxuICAgIC5jYXRjaCgoKSA9PiB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCkpO1xuICByZXR1cm4gY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV07XG59XG5mdW5jdGlvbiB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgZmV0Y2ggY29tcG9uZW50IG1lc3NhZ2UgYnVuZGxlXCIpO1xufVxuZnVuY3Rpb24gbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50Lm1lc3NhZ2VzID0ge1xuICAgIC4uLmNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMsXG4gICAgLi4uY29tcG9uZW50Lm1lc3NhZ2VPdmVycmlkZXMsXG4gIH07XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSBzZXRzIHVwIHRoZSBtZXNzYWdlcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQuIEl0IHNob3VsZCBiZSBhd2FpdGVkIGluIHRoZSBgY29tcG9uZW50V2lsbExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2V0VXBNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBjb21wb25lbnQuZWZmZWN0aXZlTG9jYWxlKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29uc3QgeyBlbCB9ID0gY29tcG9uZW50O1xuICBjb25zdCB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0YWcucmVwbGFjZShcImNhbGNpdGUtXCIsIFwiXCIpO1xuICByZXR1cm4gZ2V0TWVzc2FnZUJ1bmRsZShnZXRTdXBwb3J0ZWRMb2NhbGUobGFuZywgXCJ0OW5cIiksIGNvbXBvbmVudE5hbWUpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgbXVzdCBiZSBzZXQgdXAgZm9yIHRoZSBjb21wb25lbnQgdG8gdXBkYXRlIGl0cyBkZWZhdWx0IG1lc3NhZ2UgYnVuZGxlIGlmIHRoZSBsb2NhbGUgY2hhbmdlcy5cbiAqXG4gKiBJdCBjYW4gYmUgc2V0IHVwIGluICoqZWl0aGVyKiogb2YgdGhlIGZvbGxvd2luZyB3YXlzOlxuICpcbiAqIDEuIGNhbGxlZCBmcm9tIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYG9uTG9jYWxlQ2hhbmdlYCBtZXRob2Qgb3JcbiAqIDIuIGNhbGxlZCBmcm9tIGEgd2F0Y2hlciBjb25maWd1cmVkIHRvIHdhdGNoIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYGVmZmVjdGl2ZUxvY2FsZWAgcHJvcFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEBwYXJhbSBsYW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VzKGNvbXBvbmVudCwgbGFuZykge1xuICBjb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzID0gYXdhaXQgZmV0Y2hNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpO1xuICBtZXJnZU1lc3NhZ2VzKGNvbXBvbmVudCk7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSBzZXRzIHVwIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGNvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqICoqTm90ZSoqOiB0aGlzIG11c3QgYmUgY2FsbGVkIGFmdGVyIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYGNvbm5lY3RMb2NhbGl6ZWRgIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50Lm9uTWVzc2FnZXNDaGFuZ2UgPSBkZWZhdWx0T25NZXNzYWdlc0NoYW5nZTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IHRlYXJzIGRvd24gaW50ZXJuYWxzIGZvciBtZXNzYWdlcyBzdXBwb3J0LlxuICpcbiAqIEl0IG5lZWRzIHRvIGJlIGNhbGxlZCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBkaXNjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gIG1lcmdlTWVzc2FnZXModGhpcyk7XG59XG5cbmV4cG9ydCB7IGNvbm5lY3RNZXNzYWdlcyBhcyBjLCBkaXNjb25uZWN0TWVzc2FnZXMgYXMgZCwgc2V0VXBNZXNzYWdlcyBhcyBzLCB1cGRhdGVNZXNzYWdlcyBhcyB1IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXQ5bi0wYmNkY2E1NC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=