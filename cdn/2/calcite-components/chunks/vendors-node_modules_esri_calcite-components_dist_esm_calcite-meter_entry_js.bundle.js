"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-meter_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-meter.entry.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-meter.entry.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_meter: () => (/* binding */ Meter)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-4876c9e5.js */ "./node_modules/@esri/calcite-components/dist/esm/form-4876c9e5.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */










const CSS = {
  container: "container",
  fill: "fill",
  stepLine: "step-line",
  label: "label",
  labelHidden: "label-hidden",
  labelRange: "label-range",
  labelValue: "label-value",
  unitLabel: "unit-label",
  stepsVisible: "steps-visible",
  valueVisible: "value-visible",
  success: "fill-success",
  warning: "fill-warning",
  danger: "fill-danger",
};

const meterCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host{display:flex;--calcite-meter-space-internal:0.125rem;--calcite-meter-height-internal:1rem;--calcite-meter-font-size-internal:var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal:0.75rem;--calcite-meter-font-size-internal:var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal:1.5rem;--calcite-meter-font-size-internal:var(--calcite-font-size-0)}.container{position:relative;margin:0px;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-color-foreground-3);background-color:var(--calcite-color-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-color-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + 0.5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-1)}.label-range{color:var(--calcite-color-text-3);inset-block-start:calc(100% + 0.5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.fill{position:absolute;z-index:var(--calcite-z-index);display:block;background-color:var(--calcite-color-brand);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size, background-color, box-shadow}.fill-danger{background-color:var(--calcite-color-status-danger)}.fill-success{background-color:var(--calcite-color-status-success)}.fill-warning{background-color:var(--calcite-color-status-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-color-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-color-status-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-color-status-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-color-status-warning)}";

const Meter = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.labelFlipMax = 0.8;
    this.labelFlipProximity = 0.15;
    this.maxPercent = 100;
    this.minPercent = 0;
    this.resizeObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_5__.c)("resize", () => this.resizeHandler());
    this.formatLabel = (value, labelType) => {
      if (labelType === "percent") {
        if (!this.percentFormatting) {
          const locale = (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.g)(this.effectiveLocale);
          const formatter = new Intl.NumberFormat(locale, {
            useGrouping: this.groupSeparator,
            style: "percent",
          });
          this.percentFormatting = { formatter, locale };
        }
        return this.percentFormatting.formatter.format(value);
      }
      else {
        _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.n.numberFormatOptions = {
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          useGrouping: this.groupSeparator,
        };
        return _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.n.localize(value.toString());
      }
    };
    this.appearance = "outline-fill";
    this.disabled = false;
    this.fillType = "range";
    this.form = undefined;
    this.groupSeparator = false;
    this.high = undefined;
    this.label = undefined;
    this.low = undefined;
    this.max = 100;
    this.min = 0;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.rangeLabels = false;
    this.rangeLabelType = "percent";
    this.scale = "m";
    this.unitLabel = "";
    this.value = undefined;
    this.valueLabel = false;
    this.valueLabelType = "percent";
    this.currentPercent = undefined;
    this.effectiveLocale = undefined;
    this.highActive = undefined;
    this.highPercent = undefined;
    this.lowActive = undefined;
    this.lowPercent = undefined;
  }
  handleRangeChange() {
    this.calculateValues();
    this.updateLabels();
  }
  handleLabelChange() {
    this.updateLabels();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    this.calculateValues();
    (0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_2__.a)(this, this.value);
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
    this.updateLabels();
  }
  connectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    this.resizeObserver?.observe(this.el);
  }
  disconnectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_form_4876c9e5_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    this.resizeObserver?.disconnect();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  resizeHandler() {
    this.updateLabels();
  }
  updateLabels() {
    if (this.valueLabelEl) {
      this.determineValueLabelPosition();
    }
    if (this.rangeLabels) {
      this.determineVisibleLabels();
    }
  }
  calculateValues() {
    const { min, max, low, high, value } = this;
    const lowPercent = (100 * (low - min)) / (max - min);
    const highPercent = (100 * (high - min)) / (max - min);
    const currentPercent = (100 * (value - min)) / (max - min);
    if (!low || low < min || low > high || low > max) {
      this.low = min;
    }
    if (!high || high > max || high < low || high < min) {
      this.high = max;
    }
    if (!value) {
      this.value = min;
    }
    this.lowPercent = lowPercent;
    this.highPercent = highPercent;
    this.currentPercent = value ? currentPercent : 0;
    this.lowActive = !!low && low > min && (!value || low > value) && (!high || low < high);
    this.highActive =
      !!high && min <= high && high < max && (!value || high > value) && (!low || high > low);
  }
  getMeterKindCssClass() {
    const { low, high, min, max, value } = this;
    const lowest = low ? low : min;
    const highest = high ? high : max;
    const aboveLowest = value >= lowest;
    const belowLowest = value < lowest;
    const aboveHighest = value >= highest;
    const belowHighest = value < highest;
    if (!value || (!low && belowHighest) || belowLowest) {
      return CSS.success;
    }
    else if (aboveLowest && belowHighest) {
      return CSS.warning;
    }
    else if (aboveHighest) {
      return CSS.danger;
    }
    else {
      return CSS.success;
    }
  }
  intersects(el1, el2) {
    return el1 && el2 && (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_4__.v)(el1.getBoundingClientRect(), el2.getBoundingClientRect());
  }
  determineVisibleLabels() {
    const { minLabelEl, lowLabelEl, highLabelEl, maxLabelEl } = this;
    const highMaxOverlap = this.intersects(highLabelEl, maxLabelEl);
    const lowHighOverlap = this.intersects(lowLabelEl, highLabelEl);
    const lowMaxOverlap = this.intersects(lowLabelEl, maxLabelEl);
    const minHighOverlap = this.intersects(minLabelEl, highLabelEl);
    const minLowOverlap = this.intersects(minLabelEl, lowLabelEl);
    const minMaxOverlap = this.intersects(minLabelEl, maxLabelEl);
    const hiddenClass = CSS.labelHidden;
    if (lowLabelEl) {
      if (minLowOverlap || lowMaxOverlap || lowHighOverlap) {
        lowLabelEl.classList.add(hiddenClass);
      }
      else {
        lowLabelEl.classList.remove(hiddenClass);
      }
    }
    if (highLabelEl) {
      if (minHighOverlap || lowMaxOverlap || highMaxOverlap) {
        highLabelEl.classList.add(hiddenClass);
      }
      else {
        highLabelEl.classList.remove(hiddenClass);
      }
    }
    if (minLabelEl && maxLabelEl) {
      if (minMaxOverlap) {
        maxLabelEl.classList.add(hiddenClass);
      }
      else {
        maxLabelEl.classList.remove(hiddenClass);
      }
    }
  }
  determineValueLabelPosition() {
    const { valueLabelEl, meterContainerEl, currentPercent } = this;
    const valuePosition = currentPercent > 100 ? 100 : currentPercent > 0 ? currentPercent : 0;
    const valueLabelWidth = valueLabelEl.getBoundingClientRect().width;
    const containerWidth = meterContainerEl.getBoundingClientRect().width;
    const labelWidthPercent = (100 * (valueLabelWidth - 0)) / (containerWidth - 0);
    if (valuePosition + labelWidthPercent >= 100) {
      valueLabelEl.style.insetInlineEnd = "0%";
      valueLabelEl.style.removeProperty("inset-inline-start");
    }
    else {
      valueLabelEl.style.insetInlineStart = `${valuePosition}% `;
      valueLabelEl.style.removeProperty("inset-inline-end");
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderMeterFill() {
    const { currentPercent, fillType } = this;
    const kindClass = this.getMeterKindCssClass();
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.fill]: true, [kindClass]: fillType !== "single" }, style: { width: `${currentPercent}%` } }));
  }
  renderRangeLine(position) {
    const style = { insetInlineStart: `${position}%` };
    return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.stepLine, style: style });
  }
  renderValueLabel() {
    const { currentPercent, valueLabelType, unitLabel, value } = this;
    const label = this.formatLabel(valueLabelType === "percent" ? currentPercent / 100 : value || 0, valueLabelType);
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.label]: true, [CSS.labelValue]: true }, key: "low-label-line",
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.valueLabelEl = el) }, label, unitLabel && valueLabelType !== "percent" && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.unitLabel }, "\u00A0", unitLabel))));
  }
  renderMinLabel() {
    const { rangeLabelType, min, minPercent, unitLabel } = this;
    const style = { insetInlineStart: `${minPercent}%` };
    const labelMin = this.formatLabel(rangeLabelType === "percent" ? minPercent : min, rangeLabelType);
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "min-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.minLabelEl = el) }, labelMin, unitLabel && rangeLabelType !== "percent" && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.unitLabel }, "\u00A0", unitLabel))));
  }
  renderLowLabel() {
    const { rangeLabelType, low, lowPercent, highPercent, labelFlipProximity } = this;
    const label = low
      ? this.formatLabel(rangeLabelType === "percent" ? lowPercent / 100 : low, rangeLabelType)
      : "";
    const styleDefault = { insetInlineStart: `${lowPercent}%` };
    const styleFlipped = { insetInlineEnd: `${100 - lowPercent}%` };
    const style = (highPercent - lowPercent) / 100 < labelFlipProximity ? styleFlipped : styleDefault;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "low-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.lowLabelEl = el) }, label));
  }
  renderHighLabel() {
    const { rangeLabelType, high, highPercent, labelFlipMax } = this;
    const label = high
      ? this.formatLabel(rangeLabelType === "percent" ? highPercent / 100 : high, rangeLabelType)
      : "";
    const styleDefault = { insetInlineStart: `${highPercent}%` };
    const styleFlipped = { insetInlineEnd: `${100 - highPercent}%` };
    const style = highPercent / 100 >= labelFlipMax ? styleFlipped : styleDefault;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "high-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.highLabelEl = el) }, label));
  }
  renderMaxLabel() {
    const { rangeLabelType, max, maxPercent } = this;
    const style = { insetInlineEnd: `${100 - maxPercent}%` };
    const labelMax = this.formatLabel(rangeLabelType === "percent" ? maxPercent / 100 : max, rangeLabelType);
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: { [CSS.label]: true, [CSS.labelRange]: true }, key: "max-label-line", style: style,
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.maxLabelEl = el) }, labelMax));
  }
  render() {
    const { appearance, currentPercent, highActive, highPercent, label, lowActive, lowPercent, max, maxPercent, min, minPercent, rangeLabels, rangeLabelType, unitLabel, value, valueLabel, valueLabelType, } = this;
    const textPercentLabelWithPercent = this.formatLabel(currentPercent / 100, "percent");
    const textUnitLabel = `${value} ${unitLabel}`;
    const valueText = valueLabelType === "percent"
      ? textPercentLabelWithPercent
      : unitLabel
        ? textUnitLabel
        : undefined;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-label": label, "aria-valuemax": rangeLabelType === "percent" ? maxPercent : max, "aria-valuemin": rangeLabelType === "percent" ? minPercent : min, "aria-valuenow": valueLabelType === "percent" ? currentPercent : value, "aria-valuetext": valueText, class: {
        [CSS.container]: true,
        [CSS.stepsVisible]: rangeLabels,
        [CSS.valueVisible]: valueLabel,
        [appearance]: appearance !== "outline-fill",
      }, role: "meter",
      // eslint-disable-next-line react/jsx-sort-props
      ref: (el) => (this.meterContainerEl = el) }, this.renderMeterFill(), valueLabel && this.renderValueLabel(), lowActive && this.renderRangeLine(lowPercent), highActive && this.renderRangeLine(highPercent), rangeLabels && this.renderMinLabel(), rangeLabels && lowActive && this.renderLowLabel(), rangeLabels && highActive && this.renderHighLabel(), rangeLabels && this.renderMaxLabel())));
  }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "min": ["handleRangeChange"],
    "max": ["handleRangeChange"],
    "low": ["handleRangeChange"],
    "high": ["handleRangeChange"],
    "value": ["handleRangeChange"],
    "rangeLabels": ["handleLabelChange"],
    "rangeLabelType": ["handleLabelChange"],
    "unitLabel": ["handleLabelChange"],
    "valueLabel": ["handleLabelChange"],
    "valueLabelType": ["handleLabelChange"]
  }; }
};
Meter.style = meterCss;



//# sourceMappingURL=calcite-meter.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLW1ldGVyX2VudHJ5X2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMyRjtBQUNHO0FBQ2U7QUFDK0I7QUFDeEY7QUFDVTtBQUNuQztBQUNDO0FBQ0s7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0MsZUFBZSx5QkFBeUIsaUJBQWlCLHdDQUF3QyxtREFBbUQsb0JBQW9CLGdCQUFnQixhQUFhLFNBQVMsYUFBYSx5R0FBeUcsVUFBVSxNQUFNLGFBQWEsd0NBQXdDLHFDQUFxQywrREFBK0QsaUJBQWlCLHdDQUF3QywrREFBK0QsaUJBQWlCLHVDQUF1Qyw4REFBOEQsV0FBVyxrQkFBa0IsV0FBVyxhQUFhLGlCQUFpQixtQkFBbUIsZ0RBQWdELG1EQUFtRCwrQ0FBK0MsbURBQW1ELE9BQU8sbURBQW1ELG1EQUFtRCxTQUFTLDZCQUE2QixlQUFlLDBCQUEwQixlQUFlLHdCQUF3QixXQUFXLGtCQUFrQixnQkFBZ0IsY0FBYyxnREFBZ0QsK0NBQStDLE9BQU8sa0JBQWtCLGtEQUFrRCxjQUFjLGtCQUFrQixVQUFVLGFBQWEsbUNBQW1DLDRDQUE0QyxrQ0FBa0MsYUFBYSxrQ0FBa0MscUNBQXFDLFlBQVksOENBQThDLGtDQUFrQyx5QkFBeUIsNENBQTRDLGtDQUFrQyxNQUFNLGtCQUFrQiwrQkFBK0IsY0FBYyw0Q0FBNEMsMEJBQTBCLHdEQUF3RCx1REFBdUQsZ0RBQWdELG1EQUFtRCxxRUFBcUUscUdBQXFHLDhEQUE4RCxhQUFhLG9EQUFvRCxjQUFjLHFEQUFxRCxjQUFjLHFEQUFxRCxhQUFhLGNBQWMscUJBQXFCLHFC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QjtBQUMvRDtBQUNBLFlBQVkscURBQUMsVUFBVSxTQUFTLDJDQUEyQztBQUMzRTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0EsWUFBWSxrREFBa0Q7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFCQUFxQixZQUFZO0FBQzVELDJCQUEyQixtQkFBbUIsa0JBQWtCO0FBQ2hFO0FBQ0EsWUFBWSxxREFBQyxVQUFVLFNBQVMsMkNBQTJDO0FBQzNFO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQSxZQUFZLGtDQUFrQztBQUM5QyxvQkFBb0IsbUJBQW1CLGlCQUFpQjtBQUN4RDtBQUNBLFlBQVkscURBQUMsVUFBVSxTQUFTLDJDQUEyQztBQUMzRTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0EsWUFBWSxrTUFBa007QUFDOU07QUFDQSw2QkFBNkIsT0FBTyxFQUFFLFVBQVU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLFVBQVU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrQzs7QUFFbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9jYWxjaXRlLW1ldGVyLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBoLCBIIGFzIEhvc3QsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgcyBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBhIGFzIHNldENvbXBvbmVudExvYWRlZCB9IGZyb20gJy4vbG9hZGFibGUtYjE3Mzk2ZTAuanMnO1xuaW1wb3J0IHsgYSBhcyBhZnRlckNvbm5lY3REZWZhdWx0VmFsdWVTZXQsIGMgYXMgY29ubmVjdEZvcm0sIGQgYXMgZGlzY29ubmVjdEZvcm0gfSBmcm9tICcuL2Zvcm0tNDg3NmM5ZTUuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUsIG4gYXMgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLCBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLTZlNzgzY2YwLmpzJztcbmltcG9ydCB7IHYgYXMgaW50ZXJzZWN0cyB9IGZyb20gJy4vZG9tLWVkMDBhNTg1LmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy03MWQzMzJkYi5qcyc7XG5pbXBvcnQgJy4va2V5LTYxZjgyZGRiLmpzJztcbmltcG9ydCAnLi9ndWlkLTIxZmVjZmE0LmpzJztcbmltcG9ydCAnLi9yZXNvdXJjZXMtY2Y4MjM4OGMuanMnO1xuXG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgZmlsbDogXCJmaWxsXCIsXG4gIHN0ZXBMaW5lOiBcInN0ZXAtbGluZVwiLFxuICBsYWJlbDogXCJsYWJlbFwiLFxuICBsYWJlbEhpZGRlbjogXCJsYWJlbC1oaWRkZW5cIixcbiAgbGFiZWxSYW5nZTogXCJsYWJlbC1yYW5nZVwiLFxuICBsYWJlbFZhbHVlOiBcImxhYmVsLXZhbHVlXCIsXG4gIHVuaXRMYWJlbDogXCJ1bml0LWxhYmVsXCIsXG4gIHN0ZXBzVmlzaWJsZTogXCJzdGVwcy12aXNpYmxlXCIsXG4gIHZhbHVlVmlzaWJsZTogXCJ2YWx1ZS12aXNpYmxlXCIsXG4gIHN1Y2Nlc3M6IFwiZmlsbC1zdWNjZXNzXCIsXG4gIHdhcm5pbmc6IFwiZmlsbC13YXJuaW5nXCIsXG4gIGRhbmdlcjogXCJmaWxsLWRhbmdlclwiLFxufTtcblxuY29uc3QgbWV0ZXJDc3MgPSBcIjpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX06aG9zdHtkaXNwbGF5OmZsZXg7LS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsOjAuMTI1cmVtOy0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWw6MXJlbTstLWNhbGNpdGUtbWV0ZXItZm9udC1zaXplLWludGVybmFsOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKX06aG9zdChbc2NhbGU9c10pey0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWw6MC43NXJlbTstLWNhbGNpdGUtbWV0ZXItZm9udC1zaXplLWludGVybmFsOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKX06aG9zdChbc2NhbGU9bF0pey0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWw6MS41cmVtOy0tY2FsY2l0ZS1tZXRlci1mb250LXNpemUtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtMCl9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MHB4O2Rpc3BsYXk6ZmxleDtpbmxpbmUtc2l6ZToxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtibG9jay1zaXplOnZhcigtLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0yKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpO2JvcmRlci1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1tZXRlci1oZWlnaHQtaW50ZXJuYWwpfS5zb2xpZHtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKX0ub3V0bGluZXtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS52YWx1ZS12aXNpYmxle21hcmdpbi1ibG9jay1zdGFydDoxLjVyZW19LnN0ZXBzLXZpc2libGV7bWFyZ2luLWJsb2NrLWVuZDoxLjVyZW19LnN0ZXAtbGluZXtwb3NpdGlvbjphYnNvbHV0ZTtpbnNldC1ibG9jazowcHg7ZGlzcGxheTpibG9jaztpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpfS5sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1tZXRlci1mb250LXNpemUtaW50ZXJuYWwpfS5sYWJlbC1oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowfS5sYWJlbC12YWx1ZXtpbnNldC1ibG9jay1lbmQ6Y2FsYygxMDAlICsgMC41ZW0pO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtYm9sZCk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpfS5sYWJlbC1yYW5nZXtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyk7aW5zZXQtYmxvY2stc3RhcnQ6Y2FsYygxMDAlICsgMC41ZW0pfS51bml0LWxhYmVse2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyl9LmxhYmVsLXZhbHVlIC51bml0LWxhYmVse2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtYm9sZCk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfS5maWxse3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6dmFyKC0tY2FsY2l0ZS16LWluZGV4KTtkaXNwbGF5OmJsb2NrO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCk7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO2luc2V0LWlubGluZS1zdGFydDp2YXIoLS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsKTtpbnNldC1ibG9jazp2YXIoLS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsKTtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsKTttYXgtaW5saW5lLXNpemU6Y2FsYygxMDAlIC0gdmFyKC0tY2FsY2l0ZS1tZXRlci1zcGFjZS1pbnRlcm5hbCkgKiAyKTttaW4taW5saW5lLXNpemU6Y2FsYyh2YXIoLS1jYWxjaXRlLW1ldGVyLWhlaWdodC1pbnRlcm5hbCkgLSB2YXIoLS1jYWxjaXRlLW1ldGVyLXNwYWNlLWludGVybmFsKSAqIDIpO3RyYW5zaXRpb24tcHJvcGVydHk6aW5saW5lLXNpemUsIGJhY2tncm91bmQtY29sb3IsIGJveC1zaGFkb3d9LmZpbGwtZGFuZ2Vye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX0uZmlsbC1zdWNjZXNze2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtc3VjY2Vzcyl9LmZpbGwtd2FybmluZ3tiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLXdhcm5pbmcpfS5zb2xpZCAuZmlsbHtpbnNldC1ibG9jazowO2luc2V0LWlubGluZS1zdGFydDowO21heC1pbmxpbmUtc2l6ZToxMDAlO21pbi1pbmxpbmUtc2l6ZTpjYWxjKHZhcigtLWNhbGNpdGUtbWV0ZXItaGVpZ2h0LWludGVybmFsKSk7Ym94LXNoYWRvdzowIDAgMCAxcHggdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9LnNvbGlkIC5maWxsLWRhbmdlcntib3gtc2hhZG93OjAgMCAwIDFweCB2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpfS5zb2xpZCAuZmlsbC1zdWNjZXNze2JveC1zaGFkb3c6MCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLXN1Y2Nlc3MpfS5zb2xpZCAuZmlsbC13YXJuaW5ne2JveC1zaGFkb3c6MCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLXdhcm5pbmcpfVwiO1xuXG5jb25zdCBNZXRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5sYWJlbEZsaXBNYXggPSAwLjg7XG4gICAgdGhpcy5sYWJlbEZsaXBQcm94aW1pdHkgPSAwLjE1O1xuICAgIHRoaXMubWF4UGVyY2VudCA9IDEwMDtcbiAgICB0aGlzLm1pblBlcmNlbnQgPSAwO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcihcInJlc2l6ZVwiLCAoKSA9PiB0aGlzLnJlc2l6ZUhhbmRsZXIoKSk7XG4gICAgdGhpcy5mb3JtYXRMYWJlbCA9ICh2YWx1ZSwgbGFiZWxUeXBlKSA9PiB7XG4gICAgICBpZiAobGFiZWxUeXBlID09PSBcInBlcmNlbnRcIikge1xuICAgICAgICBpZiAoIXRoaXMucGVyY2VudEZvcm1hdHRpbmcpIHtcbiAgICAgICAgICBjb25zdCBsb2NhbGUgPSBnZXRTdXBwb3J0ZWRMb2NhbGUodGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICAgICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHtcbiAgICAgICAgICAgIHVzZUdyb3VwaW5nOiB0aGlzLmdyb3VwU2VwYXJhdG9yLFxuICAgICAgICAgICAgc3R5bGU6IFwicGVyY2VudFwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMucGVyY2VudEZvcm1hdHRpbmcgPSB7IGZvcm1hdHRlciwgbG9jYWxlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucGVyY2VudEZvcm1hdHRpbmcuZm9ybWF0dGVyLmZvcm1hdCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICAgIHVzZUdyb3VwaW5nOiB0aGlzLmdyb3VwU2VwYXJhdG9yLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbnVtYmVyU3RyaW5nRm9ybWF0dGVyLmxvY2FsaXplKHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5hcHBlYXJhbmNlID0gXCJvdXRsaW5lLWZpbGxcIjtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5maWxsVHlwZSA9IFwicmFuZ2VcIjtcbiAgICB0aGlzLmZvcm0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ncm91cFNlcGFyYXRvciA9IGZhbHNlO1xuICAgIHRoaXMuaGlnaCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG93ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWF4ID0gMTAwO1xuICAgIHRoaXMubWluID0gMDtcbiAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yYW5nZUxhYmVscyA9IGZhbHNlO1xuICAgIHRoaXMucmFuZ2VMYWJlbFR5cGUgPSBcInBlcmNlbnRcIjtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy51bml0TGFiZWwgPSBcIlwiO1xuICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy52YWx1ZUxhYmVsID0gZmFsc2U7XG4gICAgdGhpcy52YWx1ZUxhYmVsVHlwZSA9IFwicGVyY2VudFwiO1xuICAgIHRoaXMuY3VycmVudFBlcmNlbnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oaWdoQWN0aXZlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGlnaFBlcmNlbnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb3dBY3RpdmUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb3dQZXJjZW50ID0gdW5kZWZpbmVkO1xuICB9XG4gIGhhbmRsZVJhbmdlQ2hhbmdlKCkge1xuICAgIHRoaXMuY2FsY3VsYXRlVmFsdWVzKCk7XG4gICAgdGhpcy51cGRhdGVMYWJlbHMoKTtcbiAgfVxuICBoYW5kbGVMYWJlbENoYW5nZSgpIHtcbiAgICB0aGlzLnVwZGF0ZUxhYmVscygpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgdGhpcy5jYWxjdWxhdGVWYWx1ZXMoKTtcbiAgICBhZnRlckNvbm5lY3REZWZhdWx0VmFsdWVTZXQodGhpcywgdGhpcy52YWx1ZSk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gICAgdGhpcy51cGRhdGVMYWJlbHMoKTtcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGNvbm5lY3RGb3JtKHRoaXMpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5lbCk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0Rm9ybSh0aGlzKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVzaXplSGFuZGxlcigpIHtcbiAgICB0aGlzLnVwZGF0ZUxhYmVscygpO1xuICB9XG4gIHVwZGF0ZUxhYmVscygpIHtcbiAgICBpZiAodGhpcy52YWx1ZUxhYmVsRWwpIHtcbiAgICAgIHRoaXMuZGV0ZXJtaW5lVmFsdWVMYWJlbFBvc2l0aW9uKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnJhbmdlTGFiZWxzKSB7XG4gICAgICB0aGlzLmRldGVybWluZVZpc2libGVMYWJlbHMoKTtcbiAgICB9XG4gIH1cbiAgY2FsY3VsYXRlVmFsdWVzKCkge1xuICAgIGNvbnN0IHsgbWluLCBtYXgsIGxvdywgaGlnaCwgdmFsdWUgfSA9IHRoaXM7XG4gICAgY29uc3QgbG93UGVyY2VudCA9ICgxMDAgKiAobG93IC0gbWluKSkgLyAobWF4IC0gbWluKTtcbiAgICBjb25zdCBoaWdoUGVyY2VudCA9ICgxMDAgKiAoaGlnaCAtIG1pbikpIC8gKG1heCAtIG1pbik7XG4gICAgY29uc3QgY3VycmVudFBlcmNlbnQgPSAoMTAwICogKHZhbHVlIC0gbWluKSkgLyAobWF4IC0gbWluKTtcbiAgICBpZiAoIWxvdyB8fCBsb3cgPCBtaW4gfHwgbG93ID4gaGlnaCB8fCBsb3cgPiBtYXgpIHtcbiAgICAgIHRoaXMubG93ID0gbWluO1xuICAgIH1cbiAgICBpZiAoIWhpZ2ggfHwgaGlnaCA+IG1heCB8fCBoaWdoIDwgbG93IHx8IGhpZ2ggPCBtaW4pIHtcbiAgICAgIHRoaXMuaGlnaCA9IG1heDtcbiAgICB9XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy52YWx1ZSA9IG1pbjtcbiAgICB9XG4gICAgdGhpcy5sb3dQZXJjZW50ID0gbG93UGVyY2VudDtcbiAgICB0aGlzLmhpZ2hQZXJjZW50ID0gaGlnaFBlcmNlbnQ7XG4gICAgdGhpcy5jdXJyZW50UGVyY2VudCA9IHZhbHVlID8gY3VycmVudFBlcmNlbnQgOiAwO1xuICAgIHRoaXMubG93QWN0aXZlID0gISFsb3cgJiYgbG93ID4gbWluICYmICghdmFsdWUgfHwgbG93ID4gdmFsdWUpICYmICghaGlnaCB8fCBsb3cgPCBoaWdoKTtcbiAgICB0aGlzLmhpZ2hBY3RpdmUgPVxuICAgICAgISFoaWdoICYmIG1pbiA8PSBoaWdoICYmIGhpZ2ggPCBtYXggJiYgKCF2YWx1ZSB8fCBoaWdoID4gdmFsdWUpICYmICghbG93IHx8IGhpZ2ggPiBsb3cpO1xuICB9XG4gIGdldE1ldGVyS2luZENzc0NsYXNzKCkge1xuICAgIGNvbnN0IHsgbG93LCBoaWdoLCBtaW4sIG1heCwgdmFsdWUgfSA9IHRoaXM7XG4gICAgY29uc3QgbG93ZXN0ID0gbG93ID8gbG93IDogbWluO1xuICAgIGNvbnN0IGhpZ2hlc3QgPSBoaWdoID8gaGlnaCA6IG1heDtcbiAgICBjb25zdCBhYm92ZUxvd2VzdCA9IHZhbHVlID49IGxvd2VzdDtcbiAgICBjb25zdCBiZWxvd0xvd2VzdCA9IHZhbHVlIDwgbG93ZXN0O1xuICAgIGNvbnN0IGFib3ZlSGlnaGVzdCA9IHZhbHVlID49IGhpZ2hlc3Q7XG4gICAgY29uc3QgYmVsb3dIaWdoZXN0ID0gdmFsdWUgPCBoaWdoZXN0O1xuICAgIGlmICghdmFsdWUgfHwgKCFsb3cgJiYgYmVsb3dIaWdoZXN0KSB8fCBiZWxvd0xvd2VzdCkge1xuICAgICAgcmV0dXJuIENTUy5zdWNjZXNzO1xuICAgIH1cbiAgICBlbHNlIGlmIChhYm92ZUxvd2VzdCAmJiBiZWxvd0hpZ2hlc3QpIHtcbiAgICAgIHJldHVybiBDU1Mud2FybmluZztcbiAgICB9XG4gICAgZWxzZSBpZiAoYWJvdmVIaWdoZXN0KSB7XG4gICAgICByZXR1cm4gQ1NTLmRhbmdlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gQ1NTLnN1Y2Nlc3M7XG4gICAgfVxuICB9XG4gIGludGVyc2VjdHMoZWwxLCBlbDIpIHtcbiAgICByZXR1cm4gZWwxICYmIGVsMiAmJiBpbnRlcnNlY3RzKGVsMS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZWwyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgfVxuICBkZXRlcm1pbmVWaXNpYmxlTGFiZWxzKCkge1xuICAgIGNvbnN0IHsgbWluTGFiZWxFbCwgbG93TGFiZWxFbCwgaGlnaExhYmVsRWwsIG1heExhYmVsRWwgfSA9IHRoaXM7XG4gICAgY29uc3QgaGlnaE1heE92ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMoaGlnaExhYmVsRWwsIG1heExhYmVsRWwpO1xuICAgIGNvbnN0IGxvd0hpZ2hPdmVybGFwID0gdGhpcy5pbnRlcnNlY3RzKGxvd0xhYmVsRWwsIGhpZ2hMYWJlbEVsKTtcbiAgICBjb25zdCBsb3dNYXhPdmVybGFwID0gdGhpcy5pbnRlcnNlY3RzKGxvd0xhYmVsRWwsIG1heExhYmVsRWwpO1xuICAgIGNvbnN0IG1pbkhpZ2hPdmVybGFwID0gdGhpcy5pbnRlcnNlY3RzKG1pbkxhYmVsRWwsIGhpZ2hMYWJlbEVsKTtcbiAgICBjb25zdCBtaW5Mb3dPdmVybGFwID0gdGhpcy5pbnRlcnNlY3RzKG1pbkxhYmVsRWwsIGxvd0xhYmVsRWwpO1xuICAgIGNvbnN0IG1pbk1heE92ZXJsYXAgPSB0aGlzLmludGVyc2VjdHMobWluTGFiZWxFbCwgbWF4TGFiZWxFbCk7XG4gICAgY29uc3QgaGlkZGVuQ2xhc3MgPSBDU1MubGFiZWxIaWRkZW47XG4gICAgaWYgKGxvd0xhYmVsRWwpIHtcbiAgICAgIGlmIChtaW5Mb3dPdmVybGFwIHx8IGxvd01heE92ZXJsYXAgfHwgbG93SGlnaE92ZXJsYXApIHtcbiAgICAgICAgbG93TGFiZWxFbC5jbGFzc0xpc3QuYWRkKGhpZGRlbkNsYXNzKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsb3dMYWJlbEVsLmNsYXNzTGlzdC5yZW1vdmUoaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGlnaExhYmVsRWwpIHtcbiAgICAgIGlmIChtaW5IaWdoT3ZlcmxhcCB8fCBsb3dNYXhPdmVybGFwIHx8IGhpZ2hNYXhPdmVybGFwKSB7XG4gICAgICAgIGhpZ2hMYWJlbEVsLmNsYXNzTGlzdC5hZGQoaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGhpZ2hMYWJlbEVsLmNsYXNzTGlzdC5yZW1vdmUoaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWluTGFiZWxFbCAmJiBtYXhMYWJlbEVsKSB7XG4gICAgICBpZiAobWluTWF4T3ZlcmxhcCkge1xuICAgICAgICBtYXhMYWJlbEVsLmNsYXNzTGlzdC5hZGQoaGlkZGVuQ2xhc3MpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG1heExhYmVsRWwuY2xhc3NMaXN0LnJlbW92ZShoaWRkZW5DbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRldGVybWluZVZhbHVlTGFiZWxQb3NpdGlvbigpIHtcbiAgICBjb25zdCB7IHZhbHVlTGFiZWxFbCwgbWV0ZXJDb250YWluZXJFbCwgY3VycmVudFBlcmNlbnQgfSA9IHRoaXM7XG4gICAgY29uc3QgdmFsdWVQb3NpdGlvbiA9IGN1cnJlbnRQZXJjZW50ID4gMTAwID8gMTAwIDogY3VycmVudFBlcmNlbnQgPiAwID8gY3VycmVudFBlcmNlbnQgOiAwO1xuICAgIGNvbnN0IHZhbHVlTGFiZWxXaWR0aCA9IHZhbHVlTGFiZWxFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IG1ldGVyQ29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgY29uc3QgbGFiZWxXaWR0aFBlcmNlbnQgPSAoMTAwICogKHZhbHVlTGFiZWxXaWR0aCAtIDApKSAvIChjb250YWluZXJXaWR0aCAtIDApO1xuICAgIGlmICh2YWx1ZVBvc2l0aW9uICsgbGFiZWxXaWR0aFBlcmNlbnQgPj0gMTAwKSB7XG4gICAgICB2YWx1ZUxhYmVsRWwuc3R5bGUuaW5zZXRJbmxpbmVFbmQgPSBcIjAlXCI7XG4gICAgICB2YWx1ZUxhYmVsRWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJpbnNldC1pbmxpbmUtc3RhcnRcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFsdWVMYWJlbEVsLnN0eWxlLmluc2V0SW5saW5lU3RhcnQgPSBgJHt2YWx1ZVBvc2l0aW9ufSUgYDtcbiAgICAgIHZhbHVlTGFiZWxFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImluc2V0LWlubGluZS1lbmRcIik7XG4gICAgfVxuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyTWV0ZXJGaWxsKCkge1xuICAgIGNvbnN0IHsgY3VycmVudFBlcmNlbnQsIGZpbGxUeXBlIH0gPSB0aGlzO1xuICAgIGNvbnN0IGtpbmRDbGFzcyA9IHRoaXMuZ2V0TWV0ZXJLaW5kQ3NzQ2xhc3MoKTtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmZpbGxdOiB0cnVlLCBba2luZENsYXNzXTogZmlsbFR5cGUgIT09IFwic2luZ2xlXCIgfSwgc3R5bGU6IHsgd2lkdGg6IGAke2N1cnJlbnRQZXJjZW50fSVgIH0gfSkpO1xuICB9XG4gIHJlbmRlclJhbmdlTGluZShwb3NpdGlvbikge1xuICAgIGNvbnN0IHN0eWxlID0geyBpbnNldElubGluZVN0YXJ0OiBgJHtwb3NpdGlvbn0lYCB9O1xuICAgIHJldHVybiBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5zdGVwTGluZSwgc3R5bGU6IHN0eWxlIH0pO1xuICB9XG4gIHJlbmRlclZhbHVlTGFiZWwoKSB7XG4gICAgY29uc3QgeyBjdXJyZW50UGVyY2VudCwgdmFsdWVMYWJlbFR5cGUsIHVuaXRMYWJlbCwgdmFsdWUgfSA9IHRoaXM7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmZvcm1hdExhYmVsKHZhbHVlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IGN1cnJlbnRQZXJjZW50IC8gMTAwIDogdmFsdWUgfHwgMCwgdmFsdWVMYWJlbFR5cGUpO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MubGFiZWxdOiB0cnVlLCBbQ1NTLmxhYmVsVmFsdWVdOiB0cnVlIH0sIGtleTogXCJsb3ctbGFiZWwtbGluZVwiLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMudmFsdWVMYWJlbEVsID0gZWwpIH0sIGxhYmVsLCB1bml0TGFiZWwgJiYgdmFsdWVMYWJlbFR5cGUgIT09IFwicGVyY2VudFwiICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBDU1MudW5pdExhYmVsIH0sIFwiXFx1MDBBMFwiLCB1bml0TGFiZWwpKSkpO1xuICB9XG4gIHJlbmRlck1pbkxhYmVsKCkge1xuICAgIGNvbnN0IHsgcmFuZ2VMYWJlbFR5cGUsIG1pbiwgbWluUGVyY2VudCwgdW5pdExhYmVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IHN0eWxlID0geyBpbnNldElubGluZVN0YXJ0OiBgJHttaW5QZXJjZW50fSVgIH07XG4gICAgY29uc3QgbGFiZWxNaW4gPSB0aGlzLmZvcm1hdExhYmVsKHJhbmdlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IG1pblBlcmNlbnQgOiBtaW4sIHJhbmdlTGFiZWxUeXBlKTtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmxhYmVsXTogdHJ1ZSwgW0NTUy5sYWJlbFJhbmdlXTogdHJ1ZSB9LCBrZXk6IFwibWluLWxhYmVsLWxpbmVcIiwgc3R5bGU6IHN0eWxlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMubWluTGFiZWxFbCA9IGVsKSB9LCBsYWJlbE1pbiwgdW5pdExhYmVsICYmIHJhbmdlTGFiZWxUeXBlICE9PSBcInBlcmNlbnRcIiAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLnVuaXRMYWJlbCB9LCBcIlxcdTAwQTBcIiwgdW5pdExhYmVsKSkpKTtcbiAgfVxuICByZW5kZXJMb3dMYWJlbCgpIHtcbiAgICBjb25zdCB7IHJhbmdlTGFiZWxUeXBlLCBsb3csIGxvd1BlcmNlbnQsIGhpZ2hQZXJjZW50LCBsYWJlbEZsaXBQcm94aW1pdHkgfSA9IHRoaXM7XG4gICAgY29uc3QgbGFiZWwgPSBsb3dcbiAgICAgID8gdGhpcy5mb3JtYXRMYWJlbChyYW5nZUxhYmVsVHlwZSA9PT0gXCJwZXJjZW50XCIgPyBsb3dQZXJjZW50IC8gMTAwIDogbG93LCByYW5nZUxhYmVsVHlwZSlcbiAgICAgIDogXCJcIjtcbiAgICBjb25zdCBzdHlsZURlZmF1bHQgPSB7IGluc2V0SW5saW5lU3RhcnQ6IGAke2xvd1BlcmNlbnR9JWAgfTtcbiAgICBjb25zdCBzdHlsZUZsaXBwZWQgPSB7IGluc2V0SW5saW5lRW5kOiBgJHsxMDAgLSBsb3dQZXJjZW50fSVgIH07XG4gICAgY29uc3Qgc3R5bGUgPSAoaGlnaFBlcmNlbnQgLSBsb3dQZXJjZW50KSAvIDEwMCA8IGxhYmVsRmxpcFByb3hpbWl0eSA/IHN0eWxlRmxpcHBlZCA6IHN0eWxlRGVmYXVsdDtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmxhYmVsXTogdHJ1ZSwgW0NTUy5sYWJlbFJhbmdlXTogdHJ1ZSB9LCBrZXk6IFwibG93LWxhYmVsLWxpbmVcIiwgc3R5bGU6IHN0eWxlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMubG93TGFiZWxFbCA9IGVsKSB9LCBsYWJlbCkpO1xuICB9XG4gIHJlbmRlckhpZ2hMYWJlbCgpIHtcbiAgICBjb25zdCB7IHJhbmdlTGFiZWxUeXBlLCBoaWdoLCBoaWdoUGVyY2VudCwgbGFiZWxGbGlwTWF4IH0gPSB0aGlzO1xuICAgIGNvbnN0IGxhYmVsID0gaGlnaFxuICAgICAgPyB0aGlzLmZvcm1hdExhYmVsKHJhbmdlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IGhpZ2hQZXJjZW50IC8gMTAwIDogaGlnaCwgcmFuZ2VMYWJlbFR5cGUpXG4gICAgICA6IFwiXCI7XG4gICAgY29uc3Qgc3R5bGVEZWZhdWx0ID0geyBpbnNldElubGluZVN0YXJ0OiBgJHtoaWdoUGVyY2VudH0lYCB9O1xuICAgIGNvbnN0IHN0eWxlRmxpcHBlZCA9IHsgaW5zZXRJbmxpbmVFbmQ6IGAkezEwMCAtIGhpZ2hQZXJjZW50fSVgIH07XG4gICAgY29uc3Qgc3R5bGUgPSBoaWdoUGVyY2VudCAvIDEwMCA+PSBsYWJlbEZsaXBNYXggPyBzdHlsZUZsaXBwZWQgOiBzdHlsZURlZmF1bHQ7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHsgW0NTUy5sYWJlbF06IHRydWUsIFtDU1MubGFiZWxSYW5nZV06IHRydWUgfSwga2V5OiBcImhpZ2gtbGFiZWwtbGluZVwiLCBzdHlsZTogc3R5bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5oaWdoTGFiZWxFbCA9IGVsKSB9LCBsYWJlbCkpO1xuICB9XG4gIHJlbmRlck1heExhYmVsKCkge1xuICAgIGNvbnN0IHsgcmFuZ2VMYWJlbFR5cGUsIG1heCwgbWF4UGVyY2VudCB9ID0gdGhpcztcbiAgICBjb25zdCBzdHlsZSA9IHsgaW5zZXRJbmxpbmVFbmQ6IGAkezEwMCAtIG1heFBlcmNlbnR9JWAgfTtcbiAgICBjb25zdCBsYWJlbE1heCA9IHRoaXMuZm9ybWF0TGFiZWwocmFuZ2VMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gbWF4UGVyY2VudCAvIDEwMCA6IG1heCwgcmFuZ2VMYWJlbFR5cGUpO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiB7IFtDU1MubGFiZWxdOiB0cnVlLCBbQ1NTLmxhYmVsUmFuZ2VdOiB0cnVlIH0sIGtleTogXCJtYXgtbGFiZWwtbGluZVwiLCBzdHlsZTogc3R5bGUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHNcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5tYXhMYWJlbEVsID0gZWwpIH0sIGxhYmVsTWF4KSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgYXBwZWFyYW5jZSwgY3VycmVudFBlcmNlbnQsIGhpZ2hBY3RpdmUsIGhpZ2hQZXJjZW50LCBsYWJlbCwgbG93QWN0aXZlLCBsb3dQZXJjZW50LCBtYXgsIG1heFBlcmNlbnQsIG1pbiwgbWluUGVyY2VudCwgcmFuZ2VMYWJlbHMsIHJhbmdlTGFiZWxUeXBlLCB1bml0TGFiZWwsIHZhbHVlLCB2YWx1ZUxhYmVsLCB2YWx1ZUxhYmVsVHlwZSwgfSA9IHRoaXM7XG4gICAgY29uc3QgdGV4dFBlcmNlbnRMYWJlbFdpdGhQZXJjZW50ID0gdGhpcy5mb3JtYXRMYWJlbChjdXJyZW50UGVyY2VudCAvIDEwMCwgXCJwZXJjZW50XCIpO1xuICAgIGNvbnN0IHRleHRVbml0TGFiZWwgPSBgJHt2YWx1ZX0gJHt1bml0TGFiZWx9YDtcbiAgICBjb25zdCB2YWx1ZVRleHQgPSB2YWx1ZUxhYmVsVHlwZSA9PT0gXCJwZXJjZW50XCJcbiAgICAgID8gdGV4dFBlcmNlbnRMYWJlbFdpdGhQZXJjZW50XG4gICAgICA6IHVuaXRMYWJlbFxuICAgICAgICA/IHRleHRVbml0TGFiZWxcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJkaXZcIiwgeyBcImFyaWEtbGFiZWxcIjogbGFiZWwsIFwiYXJpYS12YWx1ZW1heFwiOiByYW5nZUxhYmVsVHlwZSA9PT0gXCJwZXJjZW50XCIgPyBtYXhQZXJjZW50IDogbWF4LCBcImFyaWEtdmFsdWVtaW5cIjogcmFuZ2VMYWJlbFR5cGUgPT09IFwicGVyY2VudFwiID8gbWluUGVyY2VudCA6IG1pbiwgXCJhcmlhLXZhbHVlbm93XCI6IHZhbHVlTGFiZWxUeXBlID09PSBcInBlcmNlbnRcIiA/IGN1cnJlbnRQZXJjZW50IDogdmFsdWUsIFwiYXJpYS12YWx1ZXRleHRcIjogdmFsdWVUZXh0LCBjbGFzczoge1xuICAgICAgICBbQ1NTLmNvbnRhaW5lcl06IHRydWUsXG4gICAgICAgIFtDU1Muc3RlcHNWaXNpYmxlXTogcmFuZ2VMYWJlbHMsXG4gICAgICAgIFtDU1MudmFsdWVWaXNpYmxlXTogdmFsdWVMYWJlbCxcbiAgICAgICAgW2FwcGVhcmFuY2VdOiBhcHBlYXJhbmNlICE9PSBcIm91dGxpbmUtZmlsbFwiLFxuICAgICAgfSwgcm9sZTogXCJtZXRlclwiLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMubWV0ZXJDb250YWluZXJFbCA9IGVsKSB9LCB0aGlzLnJlbmRlck1ldGVyRmlsbCgpLCB2YWx1ZUxhYmVsICYmIHRoaXMucmVuZGVyVmFsdWVMYWJlbCgpLCBsb3dBY3RpdmUgJiYgdGhpcy5yZW5kZXJSYW5nZUxpbmUobG93UGVyY2VudCksIGhpZ2hBY3RpdmUgJiYgdGhpcy5yZW5kZXJSYW5nZUxpbmUoaGlnaFBlcmNlbnQpLCByYW5nZUxhYmVscyAmJiB0aGlzLnJlbmRlck1pbkxhYmVsKCksIHJhbmdlTGFiZWxzICYmIGxvd0FjdGl2ZSAmJiB0aGlzLnJlbmRlckxvd0xhYmVsKCksIHJhbmdlTGFiZWxzICYmIGhpZ2hBY3RpdmUgJiYgdGhpcy5yZW5kZXJIaWdoTGFiZWwoKSwgcmFuZ2VMYWJlbHMgJiYgdGhpcy5yZW5kZXJNYXhMYWJlbCgpKSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcIm1pblwiOiBbXCJoYW5kbGVSYW5nZUNoYW5nZVwiXSxcbiAgICBcIm1heFwiOiBbXCJoYW5kbGVSYW5nZUNoYW5nZVwiXSxcbiAgICBcImxvd1wiOiBbXCJoYW5kbGVSYW5nZUNoYW5nZVwiXSxcbiAgICBcImhpZ2hcIjogW1wiaGFuZGxlUmFuZ2VDaGFuZ2VcIl0sXG4gICAgXCJ2YWx1ZVwiOiBbXCJoYW5kbGVSYW5nZUNoYW5nZVwiXSxcbiAgICBcInJhbmdlTGFiZWxzXCI6IFtcImhhbmRsZUxhYmVsQ2hhbmdlXCJdLFxuICAgIFwicmFuZ2VMYWJlbFR5cGVcIjogW1wiaGFuZGxlTGFiZWxDaGFuZ2VcIl0sXG4gICAgXCJ1bml0TGFiZWxcIjogW1wiaGFuZGxlTGFiZWxDaGFuZ2VcIl0sXG4gICAgXCJ2YWx1ZUxhYmVsXCI6IFtcImhhbmRsZUxhYmVsQ2hhbmdlXCJdLFxuICAgIFwidmFsdWVMYWJlbFR5cGVcIjogW1wiaGFuZGxlTGFiZWxDaGFuZ2VcIl1cbiAgfTsgfVxufTtcbk1ldGVyLnN0eWxlID0gbWV0ZXJDc3M7XG5cbmV4cG9ydCB7IE1ldGVyIGFzIGNhbGNpdGVfbWV0ZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY2l0ZS1tZXRlci5lbnRyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=