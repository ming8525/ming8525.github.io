"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-sheet_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-sheet.entry.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-sheet.entry.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_sheet: () => (/* binding */ Sheet)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./focusTrapComponent-aee15b41.js */ "./node_modules/@esri/calcite-components/dist/esm/focusTrapComponent-aee15b41.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openCloseComponent-48db6daf.js */ "./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */









const CSS = {
  scrim: "scrim",
  container: "container",
  containerOpen: "container--open",
  content: "content",
  containerSlottedInShell: "container--slotted-in-shell",
};

const sheetCss = ":host{position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;visibility:hidden !important;--calcite-sheet-scrim-background-internal:rgba(0, 0, 0, 0.85);--calcite-scrim-shadow-block-start-internal:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-scrim-shadow-block-end-internal:0 -4px 8px -1px rgba(0, 0, 0, 0.08), 0 -2px 4px -1px rgba(0, 0, 0, 0.04);--calcite-scrim-shadow-inline-start-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08), 2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-scrim-shadow-inline-end-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08), -2px 0 4px -1px rgba(0, 0, 0, 0.04)}.calcite--rtl{--calcite-scrim-shadow-inline-start-internal:-4px 0 8px -1px rgba(0, 0, 0, 0.08), -2px 0 4px -1px rgba(0, 0, 0, 0.04);--calcite-scrim-shadow-inline-end-internal:4px 0 8px -1px rgba(0, 0, 0, 0.08), 2px 0 4px -1px rgba(0, 0, 0, 0.04)}.container{visibility:hidden;position:fixed;z-index:var(--calcite-z-index-overlay);display:flex;overflow-y:hidden;color:var(--calcite-color-text-2);opacity:0;transition:visibility 0ms linear var(--calcite-internal-animation-timing-medium), opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88)}:host([position=inline-start]) .container{justify-content:flex-start;inset-block:0;inset-inline:0 auto;--calcite-sheet-hidden-position-internal:translate3d(-1rem, 0, 0)}:host([position=inline-end]) .container{justify-content:flex-end;inset-block:0;inset-inline:auto 0;--calcite-sheet-hidden-position-internal:translate3d(1rem, 0, 0)}:host([position=block-start]) .container{align-items:flex-start;inset-block:0 auto;inset-inline:0;--calcite-sheet-hidden-position-internal:translate3d(0, -1rem, 0)}:host([position=block-end]) .container{align-items:flex-end;inset-block:auto 0;inset-inline:0;--calcite-sheet-hidden-position-internal:translate3d(0, 1rem, 0)}:host([display-mode=float]) .content{--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([display-mode=overlay][position=inline-start]) .container{box-shadow:var(--calcite-scrim-shadow-inline-start-internal)}:host([display-mode=overlay][position=inline-end]) .container{box-shadow:var(--calcite-scrim-shadow-inline-end-internal)}:host([display-mode=overlay][position=block-start]) .container{box-shadow:var(--calcite-scrim-shadow-block-start-internal)}:host([display-mode=overlay][position=block-end]) .container{box-shadow:var(--calcite-scrim-shadow-block-end-internal)}:host([position^=inline]) .container,:host([position^=inline]) .content{inline-size:var(--calcite-sheet-width-internal);max-inline-size:var(--calcite-sheet-max-width-internal);min-inline-size:var(--calcite-sheet-min-width-internal)}:host([position^=block]) .container,:host([position^=block]) .content{block-size:var(--calcite-sheet-height-internal);max-block-size:var(--calcite-sheet-max-height-internal);min-block-size:var(--calcite-sheet-min-height-internal)}:host([display-mode=float][position^=inline]) .container{block-size:calc(100% - 1.5rem);max-block-size:calc(100% - 1.5rem);min-block-size:calc(100% - 1.5rem)}:host([display-mode=float][position^=block]) .container{inline-size:calc(100% - 1.5rem);max-inline-size:calc(100% - 1.5rem);min-inline-size:calc(100% - 1.5rem)}:host([position^=inline][width-scale=s]){--calcite-sheet-width-internal:var(--calcite-sheet-width, 15vw);--calcite-sheet-max-width-internal:var(--calcite-sheet-max-width, 360px);--calcite-sheet-min-width-internal:var(--calcite-sheet-min-width, 260px)}:host([position^=inline][width-scale=m]){--calcite-sheet-width-internal:var(--calcite-sheet-width, 25vw);--calcite-sheet-max-width-internal:var(--calcite-sheet-max-width, 420px);--calcite-sheet-min-width-internal:var(--calcite-sheet-min-width, 300px)}:host([position^=inline][width-scale=l]){--calcite-sheet-width-internal:var(--calcite-sheet-width, 45vw);--calcite-sheet-max-width-internal:var(--calcite-sheet-max-width, 680px);--calcite-sheet-min-width-internal:var(--calcite-sheet-min-width, 340px)}:host([position^=block][height-scale=s]){--calcite-sheet-min-height-internal:var(--calcite-sheet-min-height, 160px);--calcite-sheet-height-internal:var(--calcite-sheet-height, 30vh);--calcite-sheet-max-height-internal:var(--calcite-sheet-max-height, 30vh)}:host([position^=block][height-scale=m]){--calcite-sheet-min-height-internal:var(--calcite-sheet-min-height, 200px);--calcite-sheet-height-internal:var(--calcite-sheet-height, 45vh);--calcite-sheet-max-height-internal:var(--calcite-sheet-max-height, 50vh)}:host([position^=block][height-scale=l]){--calcite-sheet-min-height-internal:var(--calcite-sheet-min-height, 240px);--calcite-sheet-height-internal:var(--calcite-sheet-height, 60vh);--calcite-sheet-max-height-internal:var(--calcite-sheet-max-height, 70vh)}.scrim{--calcite-scrim-background:var(--calcite-sheet-scrim-background, var(--calcite-sheet-scrim-background-internal));position:fixed;inset:0px;display:flex;overflow-y:hidden}:host([opened]){visibility:visible !important}.content{position:relative;z-index:var(--calcite-z-index-modal);box-sizing:border-box;display:block;max-block-size:100%;max-inline-size:100%;overflow-y:hidden;padding:0px;background-color:var(--calcite-color-foreground-1);max-block-size:100%;visibility:hidden;transition:transform var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88), visibility 0ms linear var(--calcite-internal-animation-timing-medium), opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88);transform:var(--calcite-sheet-hidden-position-internal)}.container--open .content{transform:translate3d(0, 0, 0)}:host([display-mode=float]) .content,:host([display-mode=float]) .container{border-radius:0.25rem}:host([display-mode=float]) .container{padding:0.75rem}.container--open{visibility:visible;opacity:1;transition-delay:0ms}.container--open .content{pointer-events:auto;visibility:visible;opacity:1;transition:transform var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88), visibility 0ms linear, opacity var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88), max-inline-size var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88), max-block-size var(--calcite-internal-animation-timing-medium) cubic-bezier(0.215, 0.44, 0.42, 0.88);transition-delay:0ms}:host([position=inline-start]) .content,:host([position=inline-end]) .content{block-size:100%}:host([position=block-start]) .content,:host([position=block-end]) .content{inline-size:100%}:host([position]) .container--slotted-in-shell{pointer-events:auto;position:absolute;inline-size:100%;max-inline-size:100%;min-inline-size:100%;block-size:100%;max-block-size:100%;min-block-size:100%}:host([position]) .container--slotted-in-shell calcite-scrim{position:absolute}:host([hidden]){display:none}[hidden]{display:none}";

const Sheet = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteSheetBeforeClose = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSheetBeforeClose", 6);
    this.calciteSheetClose = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSheetClose", 6);
    this.calciteSheetBeforeOpen = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSheetBeforeOpen", 6);
    this.calciteSheetOpen = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteSheetOpen", 6);
    //--------------------------------------------------------------------------
    //
    //  Private Properties/ State
    //
    //--------------------------------------------------------------------------
    this.openTransitionProp = "opacity";
    this.ignoreOpenChange = false;
    this.mutationObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_4__.c)("mutation", () => this.handleMutationObserver());
    this.setTransitionEl = (el) => {
      this.transitionEl = el;
      this.contentId = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.w)(el);
    };
    this.openEnd = () => {
      this.setFocus();
      this.el.removeEventListener("calciteSheetOpen", this.openEnd);
    };
    this.handleOutsideClose = () => {
      if (this.outsideCloseDisabled) {
        return;
      }
      this.open = false;
    };
    this.closeSheet = async () => {
      if (this.beforeClose) {
        try {
          await this.beforeClose(this.el);
        }
        catch (_error) {
          // close prevented
          requestAnimationFrame(() => {
            this.ignoreOpenChange = true;
            this.open = true;
            this.ignoreOpenChange = false;
          });
          return;
        }
      }
      this.opened = false;
      this.removeOverflowHiddenClass();
    };
    this.beforeClose = undefined;
    this.displayMode = "overlay";
    this.escapeDisabled = false;
    this.heightScale = "m";
    this.focusTrapDisabled = false;
    this.label = undefined;
    this.open = false;
    this.opened = false;
    this.outsideCloseDisabled = false;
    this.position = "inline-start";
    this.slottedInShell = undefined;
    this.widthScale = "m";
  }
  handleFocusTrapDisabled(focusTrapDisabled) {
    if (!this.open) {
      return;
    }
    focusTrapDisabled ? (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.d)(this) : (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.a)(this);
  }
  toggleSheet(value) {
    if (this.ignoreOpenChange) {
      return;
    }
    if (value) {
      this.openSheet();
    }
    else {
      this.closeSheet();
    }
  }
  handleOpenedChange() {
    (0,_openCloseComponent_48db6daf_js__WEBPACK_IMPORTED_MODULE_5__.o)(this);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.s)(this);
    // when sheet initially renders, if active was set we need to open as watcher doesn't fire
    if (this.open) {
      requestAnimationFrame(() => this.openSheet());
    }
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.a)(this);
  }
  connectedCallback() {
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  disconnectedCallback() {
    this.removeOverflowHiddenClass();
    this.mutationObserver?.disconnect();
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    this.slottedInShell = false;
  }
  render() {
    const dir = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.el);
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-describedby": this.contentId, "aria-label": this.label, "aria-modal": "true", role: "dialog" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.container]: true,
        [CSS.containerOpen]: this.opened,
        [CSS.containerSlottedInShell]: this.slottedInShell,
        [_resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_6__.C.rtl]: dir === "rtl",
      } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-scrim", { class: CSS.scrim, onClick: this.handleOutsideClose }), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.content]: true,
      },
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setTransitionEl }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)))));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  handleEscape(event) {
    if (this.open && !this.escapeDisabled && event.key === "Escape" && !event.defaultPrevented) {
      this.open = false;
      event.preventDefault();
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Sets focus on the component's "close" button (the first focusable item).
   *
   */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.f)(this.el);
  }
  /**
   * Updates the element(s) that are used within the focus-trap of the component.
   */
  async updateFocusTrapElements() {
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  onBeforeOpen() {
    this.calciteSheetBeforeOpen.emit();
  }
  onOpen() {
    this.calciteSheetOpen.emit();
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.a)(this);
  }
  onBeforeClose() {
    this.calciteSheetBeforeClose.emit();
  }
  onClose() {
    this.calciteSheetClose.emit();
    (0,_focusTrapComponent_aee15b41_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  openSheet() {
    this.el.addEventListener("calciteSheetOpen", this.openEnd);
    this.opened = true;
    if (!this.slottedInShell) {
      this.initialOverflowCSS = document.documentElement.style.overflow;
      // use an inline style instead of a utility class to avoid global class declarations.
      document.documentElement.style.setProperty("overflow", "hidden");
    }
  }
  removeOverflowHiddenClass() {
    document.documentElement.style.setProperty("overflow", this.initialOverflowCSS);
  }
  handleMutationObserver() {
    this.updateFocusTrapElements();
  }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "focusTrapDisabled": ["handleFocusTrapDisabled"],
    "open": ["toggleSheet"],
    "opened": ["handleOpenedChange"]
  }; }
};
Sheet.style = sheetCss;



//# sourceMappingURL=calcite-sheet.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setComponentLoaded),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setUpLoadableComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.f)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}



//# sourceMappingURL=loadable-b17396e0.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
/**
 * This utility ensures observers are created only for browser contexts.
 *
 * @param type - the type of observer to create
 * @param callback - the observer callback
 * @param options - the observer options
 */
function createObserver(type, callback, options) {
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  // based on https://github.com/whatwg/dom/issues/126#issuecomment-1049814948
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return (function () {
    return (type === "intersection"
      ? window.IntersectionObserver
      : type === "mutation"
        ? ExtendedMutationObserver
        : window.ResizeObserver);
  })();
}



//# sourceMappingURL=observers-71d332db.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/openCloseComponent-48db6daf.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ onToggleOpenCloseComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


function isOpen(component) {
  return "opened" in component ? component.opened : component.open;
}
function emitImmediately(component, nonOpenCloseComponent = false) {
  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
    ? component.onBeforeOpen()
    : component.onBeforeClose();
  (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
    ? component.onOpen()
    : component.onClose();
}
/**
 * Helper to determine globally set transition duration on the given openTransitionProp, which is imported and set in the @Watch("open").
 * Used to emit (before)open/close events both for when the opacity transition is present and when there is none (transition-duration is set to 0).
 *
 * @example
 * import { onToggleOpenCloseComponent, OpenCloseComponent } from "../../utils/openCloseComponent";
 *
 * async componentWillLoad() {
 * // When component initially renders, if `open` was set we need to trigger on load as watcher doesn't fire.
 * if (this.open) {
 *    onToggleOpenCloseComponent(this);
 * }
 * @Watch("open")
 * async toggleModal(value: boolean): Promise<void> {
 *    onToggleOpenCloseComponent(this);
 * }
 *
 * @param component - OpenCloseComponent uses `open` prop to emit (before)open/close.
 * @param nonOpenCloseComponent - OpenCloseComponent uses `expanded` prop to emit (before)open/close.
 */
function onToggleOpenCloseComponent(component, nonOpenCloseComponent = false) {
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.e)(() => {
    if (component.transitionEl) {
      const { transitionDuration: allDurations, transitionProperty: allProps } = getComputedStyle(component.transitionEl);
      const allTransitionDurationsArray = allDurations.split(",");
      const allTransitionPropsArray = allProps.split(",");
      const openTransitionPropIndex = allTransitionPropsArray.indexOf(component.openTransitionProp);
      const transitionDuration = allTransitionDurationsArray[openTransitionPropIndex] ??
        /* Safari will have a single transition value if multiple props share it,
        so we fall back to it if there's no matching prop duration */
        allTransitionDurationsArray[0];
      if (transitionDuration === "0s") {
        emitImmediately(component, nonOpenCloseComponent);
        return;
      }
      const fallbackTimeoutId = setTimeout(() => {
        component.transitionEl.removeEventListener("transitionstart", onStart);
        component.transitionEl.removeEventListener("transitionend", onEndOrCancel);
        component.transitionEl.removeEventListener("transitioncancel", onEndOrCancel);
        emitImmediately(component, nonOpenCloseComponent);
      }, parseFloat(transitionDuration) * 1000);
      component.transitionEl.addEventListener("transitionstart", onStart);
      component.transitionEl.addEventListener("transitionend", onEndOrCancel);
      component.transitionEl.addEventListener("transitioncancel", onEndOrCancel);
      function onStart(event) {
        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {
          clearTimeout(fallbackTimeoutId);
          component.transitionEl.removeEventListener("transitionstart", onStart);
          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
            ? component.onBeforeOpen()
            : component.onBeforeClose();
        }
      }
      function onEndOrCancel(event) {
        if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {
          (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))
            ? component.onOpen()
            : component.onClose();
          component.transitionEl.removeEventListener("transitionend", onEndOrCancel);
          component.transitionEl.removeEventListener("transitioncancel", onEndOrCancel);
        }
      }
    }
  });
}



//# sourceMappingURL=openCloseComponent-48db6daf.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLXNoZWV0X2VudHJ5X2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ2Q7QUFDMEQ7QUFDbEM7QUFDekQ7QUFDcUI7QUFDeEI7QUFDL0I7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixrQkFBa0IsVUFBVSx1Q0FBdUMsYUFBYSw2QkFBNkIsOERBQThELG1IQUFtSCxtSEFBbUgsb0hBQW9ILG9IQUFvSCxjQUFjLHNIQUFzSCxrSEFBa0gsV0FBVyxrQkFBa0IsZUFBZSx1Q0FBdUMsYUFBYSxrQkFBa0Isa0NBQWtDLFVBQVUsZ0xBQWdMLDBDQUEwQywyQkFBMkIsY0FBYyxvQkFBb0Isa0VBQWtFLHdDQUF3Qyx5QkFBeUIsY0FBYyxvQkFBb0IsaUVBQWlFLHlDQUF5Qyx1QkFBdUIsbUJBQW1CLGVBQWUsa0VBQWtFLHVDQUF1QyxxQkFBcUIsbUJBQW1CLGVBQWUsaUVBQWlFLHFDQUFxQyxtRkFBbUYsa0dBQWtHLHVHQUF1RyxnRUFBZ0UsNkRBQTZELDhEQUE4RCwyREFBMkQsK0RBQStELDREQUE0RCw2REFBNkQsMERBQTBELHdFQUF3RSxnREFBZ0Qsd0RBQXdELHdEQUF3RCxzRUFBc0UsZ0RBQWdELHdEQUF3RCx3REFBd0QseURBQXlELCtCQUErQixtQ0FBbUMsbUNBQW1DLHdEQUF3RCxnQ0FBZ0Msb0NBQW9DLG9DQUFvQyx5Q0FBeUMsZ0VBQWdFLHlFQUF5RSx5RUFBeUUseUNBQXlDLGdFQUFnRSx5RUFBeUUseUVBQXlFLHlDQUF5QyxnRUFBZ0UseUVBQXlFLHlFQUF5RSx5Q0FBeUMsMkVBQTJFLGtFQUFrRSwwRUFBMEUseUNBQXlDLDJFQUEyRSxrRUFBa0UsMEVBQTBFLHlD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxxREFBUTtBQUNWO0FBQ0EsY0FBYyxpRUFBaUU7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRTJDOztBQUUzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtc2hlZXQuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vbG9hZGFibGUtYjE3Mzk2ZTAuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vb2JzZXJ2ZXJzLTcxZDMzMmRiLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL29wZW5DbG9zZUNvbXBvbmVudC00OGRiNmRhZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcbmltcG9ydCB7IHcgYXMgZW5zdXJlSWQsIGcgYXMgZ2V0RWxlbWVudERpciwgZiBhcyBmb2N1c0ZpcnN0VGFiYmFibGUgfSBmcm9tICcuL2RvbS1lZDAwYTU4NS5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlYWN0aXZhdGVGb2N1c1RyYXAsIGEgYXMgYWN0aXZhdGVGb2N1c1RyYXAsIGMgYXMgY29ubmVjdEZvY3VzVHJhcCwgdSBhcyB1cGRhdGVGb2N1c1RyYXBFbGVtZW50cyB9IGZyb20gJy4vZm9jdXNUcmFwQ29tcG9uZW50LWFlZTE1YjQxLmpzJztcbmltcG9ydCB7IHMgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgYSBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS1iMTczOTZlMC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAnLi9vYnNlcnZlcnMtNzFkMzMyZGIuanMnO1xuaW1wb3J0IHsgbyBhcyBvblRvZ2dsZU9wZW5DbG9zZUNvbXBvbmVudCB9IGZyb20gJy4vb3BlbkNsb3NlQ29tcG9uZW50LTQ4ZGI2ZGFmLmpzJztcbmltcG9ydCB7IEMgYXMgQ1NTX1VUSUxJVFkgfSBmcm9tICcuL3Jlc291cmNlcy1jZjgyMzg4Yy5qcyc7XG5pbXBvcnQgJy4vZ3VpZC0yMWZlY2ZhNC5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgc2NyaW06IFwic2NyaW1cIixcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBjb250YWluZXJPcGVuOiBcImNvbnRhaW5lci0tb3BlblwiLFxuICBjb250ZW50OiBcImNvbnRlbnRcIixcbiAgY29udGFpbmVyU2xvdHRlZEluU2hlbGw6IFwiY29udGFpbmVyLS1zbG90dGVkLWluLXNoZWxsXCIsXG59O1xuXG5jb25zdCBzaGVldENzcyA9IFwiOmhvc3R7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6MHB4O3otaW5kZXg6dmFyKC0tY2FsY2l0ZS16LWluZGV4LW92ZXJsYXkpO2Rpc3BsYXk6ZmxleDt2aXNpYmlsaXR5OmhpZGRlbiAhaW1wb3J0YW50Oy0tY2FsY2l0ZS1zaGVldC1zY3JpbS1iYWNrZ3JvdW5kLWludGVybmFsOnJnYmEoMCwgMCwgMCwgMC44NSk7LS1jYWxjaXRlLXNjcmltLXNoYWRvdy1ibG9jay1zdGFydC1pbnRlcm5hbDowIDRweCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAwIDJweCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDQpOy0tY2FsY2l0ZS1zY3JpbS1zaGFkb3ctYmxvY2stZW5kLWludGVybmFsOjAgLTRweCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAwIC0ycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA0KTstLWNhbGNpdGUtc2NyaW0tc2hhZG93LWlubGluZS1zdGFydC1pbnRlcm5hbDo0cHggMCA4cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDgpLCAycHggMCA0cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMDQpOy0tY2FsY2l0ZS1zY3JpbS1zaGFkb3ctaW5saW5lLWVuZC1pbnRlcm5hbDotNHB4IDAgOHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA4KSwgLTJweCAwIDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCl9LmNhbGNpdGUtLXJ0bHstLWNhbGNpdGUtc2NyaW0tc2hhZG93LWlubGluZS1zdGFydC1pbnRlcm5hbDotNHB4IDAgOHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA4KSwgLTJweCAwIDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCk7LS1jYWxjaXRlLXNjcmltLXNoYWRvdy1pbmxpbmUtZW5kLWludGVybmFsOjRweCAwIDhweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wOCksIDJweCAwIDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNCl9LmNvbnRhaW5lcnt2aXNpYmlsaXR5OmhpZGRlbjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OnZhcigtLWNhbGNpdGUtei1pbmRleC1vdmVybGF5KTtkaXNwbGF5OmZsZXg7b3ZlcmZsb3cteTpoaWRkZW47Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpO29wYWNpdHk6MDt0cmFuc2l0aW9uOnZpc2liaWxpdHkgMG1zIGxpbmVhciB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSwgb3BhY2l0eSB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSBjdWJpYy1iZXppZXIoMC4yMTUsIDAuNDQsIDAuNDIsIDAuODgpfTpob3N0KFtwb3NpdGlvbj1pbmxpbmUtc3RhcnRdKSAuY29udGFpbmVye2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2luc2V0LWJsb2NrOjA7aW5zZXQtaW5saW5lOjAgYXV0bzstLWNhbGNpdGUtc2hlZXQtaGlkZGVuLXBvc2l0aW9uLWludGVybmFsOnRyYW5zbGF0ZTNkKC0xcmVtLCAwLCAwKX06aG9zdChbcG9zaXRpb249aW5saW5lLWVuZF0pIC5jb250YWluZXJ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kO2luc2V0LWJsb2NrOjA7aW5zZXQtaW5saW5lOmF1dG8gMDstLWNhbGNpdGUtc2hlZXQtaGlkZGVuLXBvc2l0aW9uLWludGVybmFsOnRyYW5zbGF0ZTNkKDFyZW0sIDAsIDApfTpob3N0KFtwb3NpdGlvbj1ibG9jay1zdGFydF0pIC5jb250YWluZXJ7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtpbnNldC1ibG9jazowIGF1dG87aW5zZXQtaW5saW5lOjA7LS1jYWxjaXRlLXNoZWV0LWhpZGRlbi1wb3NpdGlvbi1pbnRlcm5hbDp0cmFuc2xhdGUzZCgwLCAtMXJlbSwgMCl9Omhvc3QoW3Bvc2l0aW9uPWJsb2NrLWVuZF0pIC5jb250YWluZXJ7YWxpZ24taXRlbXM6ZmxleC1lbmQ7aW5zZXQtYmxvY2s6YXV0byAwO2luc2V0LWlubGluZTowOy0tY2FsY2l0ZS1zaGVldC1oaWRkZW4tcG9zaXRpb24taW50ZXJuYWw6dHJhbnNsYXRlM2QoMCwgMXJlbSwgMCl9Omhvc3QoW2Rpc3BsYXktbW9kZT1mbG9hdF0pIC5jb250ZW50ey0tdHctc2hhZG93OjAgMnB4IDEycHggLTRweCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgMnB4IDRweCAtMnB4IHJnYmEoMCwgMCwgMCwgMC4xNik7LS10dy1zaGFkb3ctY29sb3JlZDowIDJweCAxMnB4IC00cHggdmFyKC0tdHctc2hhZG93LWNvbG9yKSwgMCAycHggNHB4IC0ycHggdmFyKC0tdHctc2hhZG93LWNvbG9yKTtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyl9Omhvc3QoW2Rpc3BsYXktbW9kZT1vdmVybGF5XVtwb3NpdGlvbj1pbmxpbmUtc3RhcnRdKSAuY29udGFpbmVye2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1zY3JpbS1zaGFkb3ctaW5saW5lLXN0YXJ0LWludGVybmFsKX06aG9zdChbZGlzcGxheS1tb2RlPW92ZXJsYXldW3Bvc2l0aW9uPWlubGluZS1lbmRdKSAuY29udGFpbmVye2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1zY3JpbS1zaGFkb3ctaW5saW5lLWVuZC1pbnRlcm5hbCl9Omhvc3QoW2Rpc3BsYXktbW9kZT1vdmVybGF5XVtwb3NpdGlvbj1ibG9jay1zdGFydF0pIC5jb250YWluZXJ7Ym94LXNoYWRvdzp2YXIoLS1jYWxjaXRlLXNjcmltLXNoYWRvdy1ibG9jay1zdGFydC1pbnRlcm5hbCl9Omhvc3QoW2Rpc3BsYXktbW9kZT1vdmVybGF5XVtwb3NpdGlvbj1ibG9jay1lbmRdKSAuY29udGFpbmVye2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1zY3JpbS1zaGFkb3ctYmxvY2stZW5kLWludGVybmFsKX06aG9zdChbcG9zaXRpb25ePWlubGluZV0pIC5jb250YWluZXIsOmhvc3QoW3Bvc2l0aW9uXj1pbmxpbmVdKSAuY29udGVudHtpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLXNoZWV0LXdpZHRoLWludGVybmFsKTttYXgtaW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1zaGVldC1tYXgtd2lkdGgtaW50ZXJuYWwpO21pbi1pbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLXNoZWV0LW1pbi13aWR0aC1pbnRlcm5hbCl9Omhvc3QoW3Bvc2l0aW9uXj1ibG9ja10pIC5jb250YWluZXIsOmhvc3QoW3Bvc2l0aW9uXj1ibG9ja10pIC5jb250ZW50e2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1zaGVldC1oZWlnaHQtaW50ZXJuYWwpO21heC1ibG9jay1zaXplOnZhcigtLWNhbGNpdGUtc2hlZXQtbWF4LWhlaWdodC1pbnRlcm5hbCk7bWluLWJsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1zaGVldC1taW4taGVpZ2h0LWludGVybmFsKX06aG9zdChbZGlzcGxheS1tb2RlPWZsb2F0XVtwb3NpdGlvbl49aW5saW5lXSkgLmNvbnRhaW5lcntibG9jay1zaXplOmNhbGMoMTAwJSAtIDEuNXJlbSk7bWF4LWJsb2NrLXNpemU6Y2FsYygxMDAlIC0gMS41cmVtKTttaW4tYmxvY2stc2l6ZTpjYWxjKDEwMCUgLSAxLjVyZW0pfTpob3N0KFtkaXNwbGF5LW1vZGU9ZmxvYXRdW3Bvc2l0aW9uXj1ibG9ja10pIC5jb250YWluZXJ7aW5saW5lLXNpemU6Y2FsYygxMDAlIC0gMS41cmVtKTttYXgtaW5saW5lLXNpemU6Y2FsYygxMDAlIC0gMS41cmVtKTttaW4taW5saW5lLXNpemU6Y2FsYygxMDAlIC0gMS41cmVtKX06aG9zdChbcG9zaXRpb25ePWlubGluZV1bd2lkdGgtc2NhbGU9c10pey0tY2FsY2l0ZS1zaGVldC13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LXdpZHRoLCAxNXZ3KTstLWNhbGNpdGUtc2hlZXQtbWF4LXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtbWF4LXdpZHRoLCAzNjBweCk7LS1jYWxjaXRlLXNoZWV0LW1pbi13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LW1pbi13aWR0aCwgMjYwcHgpfTpob3N0KFtwb3NpdGlvbl49aW5saW5lXVt3aWR0aC1zY2FsZT1tXSl7LS1jYWxjaXRlLXNoZWV0LXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtd2lkdGgsIDI1dncpOy0tY2FsY2l0ZS1zaGVldC1tYXgtd2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC1tYXgtd2lkdGgsIDQyMHB4KTstLWNhbGNpdGUtc2hlZXQtbWluLXdpZHRoLWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtbWluLXdpZHRoLCAzMDBweCl9Omhvc3QoW3Bvc2l0aW9uXj1pbmxpbmVdW3dpZHRoLXNjYWxlPWxdKXstLWNhbGNpdGUtc2hlZXQtd2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC13aWR0aCwgNDV2dyk7LS1jYWxjaXRlLXNoZWV0LW1heC13aWR0aC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LW1heC13aWR0aCwgNjgwcHgpOy0tY2FsY2l0ZS1zaGVldC1taW4td2lkdGgtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC1taW4td2lkdGgsIDM0MHB4KX06aG9zdChbcG9zaXRpb25ePWJsb2NrXVtoZWlnaHQtc2NhbGU9c10pey0tY2FsY2l0ZS1zaGVldC1taW4taGVpZ2h0LWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtbWluLWhlaWdodCwgMTYwcHgpOy0tY2FsY2l0ZS1zaGVldC1oZWlnaHQtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC1oZWlnaHQsIDMwdmgpOy0tY2FsY2l0ZS1zaGVldC1tYXgtaGVpZ2h0LWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtbWF4LWhlaWdodCwgMzB2aCl9Omhvc3QoW3Bvc2l0aW9uXj1ibG9ja11baGVpZ2h0LXNjYWxlPW1dKXstLWNhbGNpdGUtc2hlZXQtbWluLWhlaWdodC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LW1pbi1oZWlnaHQsIDIwMHB4KTstLWNhbGNpdGUtc2hlZXQtaGVpZ2h0LWludGVybmFsOnZhcigtLWNhbGNpdGUtc2hlZXQtaGVpZ2h0LCA0NXZoKTstLWNhbGNpdGUtc2hlZXQtbWF4LWhlaWdodC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LW1heC1oZWlnaHQsIDUwdmgpfTpob3N0KFtwb3NpdGlvbl49YmxvY2tdW2hlaWdodC1zY2FsZT1sXSl7LS1jYWxjaXRlLXNoZWV0LW1pbi1oZWlnaHQtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC1taW4taGVpZ2h0LCAyNDBweCk7LS1jYWxjaXRlLXNoZWV0LWhlaWdodC1pbnRlcm5hbDp2YXIoLS1jYWxjaXRlLXNoZWV0LWhlaWdodCwgNjB2aCk7LS1jYWxjaXRlLXNoZWV0LW1heC1oZWlnaHQtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS1zaGVldC1tYXgtaGVpZ2h0LCA3MHZoKX0uc2NyaW17LS1jYWxjaXRlLXNjcmltLWJhY2tncm91bmQ6dmFyKC0tY2FsY2l0ZS1zaGVldC1zY3JpbS1iYWNrZ3JvdW5kLCB2YXIoLS1jYWxjaXRlLXNoZWV0LXNjcmltLWJhY2tncm91bmQtaW50ZXJuYWwpKTtwb3NpdGlvbjpmaXhlZDtpbnNldDowcHg7ZGlzcGxheTpmbGV4O292ZXJmbG93LXk6aGlkZGVufTpob3N0KFtvcGVuZWRdKXt2aXNpYmlsaXR5OnZpc2libGUgIWltcG9ydGFudH0uY29udGVudHtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OnZhcigtLWNhbGNpdGUtei1pbmRleC1tb2RhbCk7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7bWF4LWJsb2NrLXNpemU6MTAwJTttYXgtaW5saW5lLXNpemU6MTAwJTtvdmVyZmxvdy15OmhpZGRlbjtwYWRkaW5nOjBweDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKTttYXgtYmxvY2stc2l6ZToxMDAlO3Zpc2liaWxpdHk6aGlkZGVuO3RyYW5zaXRpb246dHJhbnNmb3JtIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW0pIGN1YmljLWJlemllcigwLjIxNSwgMC40NCwgMC40MiwgMC44OCksIHZpc2liaWxpdHkgMG1zIGxpbmVhciB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSwgb3BhY2l0eSB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSBjdWJpYy1iZXppZXIoMC4yMTUsIDAuNDQsIDAuNDIsIDAuODgpO3RyYW5zZm9ybTp2YXIoLS1jYWxjaXRlLXNoZWV0LWhpZGRlbi1wb3NpdGlvbi1pbnRlcm5hbCl9LmNvbnRhaW5lci0tb3BlbiAuY29udGVudHt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCl9Omhvc3QoW2Rpc3BsYXktbW9kZT1mbG9hdF0pIC5jb250ZW50LDpob3N0KFtkaXNwbGF5LW1vZGU9ZmxvYXRdKSAuY29udGFpbmVye2JvcmRlci1yYWRpdXM6MC4yNXJlbX06aG9zdChbZGlzcGxheS1tb2RlPWZsb2F0XSkgLmNvbnRhaW5lcntwYWRkaW5nOjAuNzVyZW19LmNvbnRhaW5lci0tb3Blbnt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxO3RyYW5zaXRpb24tZGVsYXk6MG1zfS5jb250YWluZXItLW9wZW4gLmNvbnRlbnR7cG9pbnRlci1ldmVudHM6YXV0bzt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxO3RyYW5zaXRpb246dHJhbnNmb3JtIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW0pIGN1YmljLWJlemllcigwLjIxNSwgMC40NCwgMC40MiwgMC44OCksIHZpc2liaWxpdHkgMG1zIGxpbmVhciwgb3BhY2l0eSB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctbWVkaXVtKSBjdWJpYy1iZXppZXIoMC4yMTUsIDAuNDQsIDAuNDIsIDAuODgpLCBtYXgtaW5saW5lLXNpemUgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bSkgY3ViaWMtYmV6aWVyKDAuMjE1LCAwLjQ0LCAwLjQyLCAwLjg4KSwgbWF4LWJsb2NrLXNpemUgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bSkgY3ViaWMtYmV6aWVyKDAuMjE1LCAwLjQ0LCAwLjQyLCAwLjg4KTt0cmFuc2l0aW9uLWRlbGF5OjBtc306aG9zdChbcG9zaXRpb249aW5saW5lLXN0YXJ0XSkgLmNvbnRlbnQsOmhvc3QoW3Bvc2l0aW9uPWlubGluZS1lbmRdKSAuY29udGVudHtibG9jay1zaXplOjEwMCV9Omhvc3QoW3Bvc2l0aW9uPWJsb2NrLXN0YXJ0XSkgLmNvbnRlbnQsOmhvc3QoW3Bvc2l0aW9uPWJsb2NrLWVuZF0pIC5jb250ZW50e2lubGluZS1zaXplOjEwMCV9Omhvc3QoW3Bvc2l0aW9uXSkgLmNvbnRhaW5lci0tc2xvdHRlZC1pbi1zaGVsbHtwb2ludGVyLWV2ZW50czphdXRvO3Bvc2l0aW9uOmFic29sdXRlO2lubGluZS1zaXplOjEwMCU7bWF4LWlubGluZS1zaXplOjEwMCU7bWluLWlubGluZS1zaXplOjEwMCU7YmxvY2stc2l6ZToxMDAlO21heC1ibG9jay1zaXplOjEwMCU7bWluLWJsb2NrLXNpemU6MTAwJX06aG9zdChbcG9zaXRpb25dKSAuY29udGFpbmVyLS1zbG90dGVkLWluLXNoZWxsIGNhbGNpdGUtc2NyaW17cG9zaXRpb246YWJzb2x1dGV9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IFNoZWV0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNhbGNpdGVTaGVldEJlZm9yZUNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlU2hlZXRCZWZvcmVDbG9zZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVTaGVldENsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlU2hlZXRDbG9zZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVTaGVldEJlZm9yZU9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVTaGVldEJlZm9yZU9wZW5cIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlU2hlZXRPcGVuID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlU2hlZXRPcGVuXCIsIDYpO1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIFByb3BlcnRpZXMvIFN0YXRlXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5vcGVuVHJhbnNpdGlvblByb3AgPSBcIm9wYWNpdHlcIjtcbiAgICB0aGlzLmlnbm9yZU9wZW5DaGFuZ2UgPSBmYWxzZTtcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcihcIm11dGF0aW9uXCIsICgpID0+IHRoaXMuaGFuZGxlTXV0YXRpb25PYnNlcnZlcigpKTtcbiAgICB0aGlzLnNldFRyYW5zaXRpb25FbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy50cmFuc2l0aW9uRWwgPSBlbDtcbiAgICAgIHRoaXMuY29udGVudElkID0gZW5zdXJlSWQoZWwpO1xuICAgIH07XG4gICAgdGhpcy5vcGVuRW5kID0gKCkgPT4ge1xuICAgICAgdGhpcy5zZXRGb2N1cygpO1xuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FsY2l0ZVNoZWV0T3BlblwiLCB0aGlzLm9wZW5FbmQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVPdXRzaWRlQ2xvc2UgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vdXRzaWRlQ2xvc2VEaXNhYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB9O1xuICAgIHRoaXMuY2xvc2VTaGVldCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmJlZm9yZUNsb3NlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVDbG9zZSh0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgLy8gY2xvc2UgcHJldmVudGVkXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlT3BlbkNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVPcGVuQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgdGhpcy5yZW1vdmVPdmVyZmxvd0hpZGRlbkNsYXNzKCk7XG4gICAgfTtcbiAgICB0aGlzLmJlZm9yZUNsb3NlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGlzcGxheU1vZGUgPSBcIm92ZXJsYXlcIjtcbiAgICB0aGlzLmVzY2FwZURpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5oZWlnaHRTY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuZm9jdXNUcmFwRGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIHRoaXMub3BlbmVkID0gZmFsc2U7XG4gICAgdGhpcy5vdXRzaWRlQ2xvc2VEaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMucG9zaXRpb24gPSBcImlubGluZS1zdGFydFwiO1xuICAgIHRoaXMuc2xvdHRlZEluU2hlbGwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy53aWR0aFNjYWxlID0gXCJtXCI7XG4gIH1cbiAgaGFuZGxlRm9jdXNUcmFwRGlzYWJsZWQoZm9jdXNUcmFwRGlzYWJsZWQpIHtcbiAgICBpZiAoIXRoaXMub3Blbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb2N1c1RyYXBEaXNhYmxlZCA/IGRlYWN0aXZhdGVGb2N1c1RyYXAodGhpcykgOiBhY3RpdmF0ZUZvY3VzVHJhcCh0aGlzKTtcbiAgfVxuICB0b2dnbGVTaGVldCh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmlnbm9yZU9wZW5DaGFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLm9wZW5TaGVldCgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuY2xvc2VTaGVldCgpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVPcGVuZWRDaGFuZ2UoKSB7XG4gICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICAvLyB3aGVuIHNoZWV0IGluaXRpYWxseSByZW5kZXJzLCBpZiBhY3RpdmUgd2FzIHNldCB3ZSBuZWVkIHRvIG9wZW4gYXMgd2F0Y2hlciBkb2Vzbid0IGZpcmVcbiAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5vcGVuU2hlZXQoKSk7XG4gICAgfVxuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgICBjb25uZWN0Rm9jdXNUcmFwKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMucmVtb3ZlT3ZlcmZsb3dIaWRkZW5DbGFzcygpO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIGRlYWN0aXZhdGVGb2N1c1RyYXAodGhpcyk7XG4gICAgdGhpcy5zbG90dGVkSW5TaGVsbCA9IGZhbHNlO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBkaXIgPSBnZXRFbGVtZW50RGlyKHRoaXMuZWwpO1xuICAgIHJldHVybiAoaChIb3N0LCB7IFwiYXJpYS1kZXNjcmliZWRieVwiOiB0aGlzLmNvbnRlbnRJZCwgXCJhcmlhLWxhYmVsXCI6IHRoaXMubGFiZWwsIFwiYXJpYS1tb2RhbFwiOiBcInRydWVcIiwgcm9sZTogXCJkaWFsb2dcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5jb250YWluZXJdOiB0cnVlLFxuICAgICAgICBbQ1NTLmNvbnRhaW5lck9wZW5dOiB0aGlzLm9wZW5lZCxcbiAgICAgICAgW0NTUy5jb250YWluZXJTbG90dGVkSW5TaGVsbF06IHRoaXMuc2xvdHRlZEluU2hlbGwsXG4gICAgICAgIFtDU1NfVVRJTElUWS5ydGxdOiBkaXIgPT09IFwicnRsXCIsXG4gICAgICB9IH0sIGgoXCJjYWxjaXRlLXNjcmltXCIsIHsgY2xhc3M6IENTUy5zY3JpbSwgb25DbGljazogdGhpcy5oYW5kbGVPdXRzaWRlQ2xvc2UgfSksIGgoXCJkaXZcIiwgeyBjbGFzczoge1xuICAgICAgICBbQ1NTLmNvbnRlbnRdOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0VHJhbnNpdGlvbkVsIH0sIGgoXCJzbG90XCIsIG51bGwpKSkpKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBFdmVudCBMaXN0ZW5lcnNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBoYW5kbGVFc2NhcGUoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vcGVuICYmICF0aGlzLmVzY2FwZURpc2FibGVkICYmIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKlxuICAgKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBcImNsb3NlXCIgYnV0dG9uICh0aGUgZmlyc3QgZm9jdXNhYmxlIGl0ZW0pLlxuICAgKlxuICAgKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICAgIGZvY3VzRmlyc3RUYWJiYWJsZSh0aGlzLmVsKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZWxlbWVudChzKSB0aGF0IGFyZSB1c2VkIHdpdGhpbiB0aGUgZm9jdXMtdHJhcCBvZiB0aGUgY29tcG9uZW50LlxuICAgKi9cbiAgYXN5bmMgdXBkYXRlRm9jdXNUcmFwRWxlbWVudHMoKSB7XG4gICAgdXBkYXRlRm9jdXNUcmFwRWxlbWVudHModGhpcyk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgb25CZWZvcmVPcGVuKCkge1xuICAgIHRoaXMuY2FsY2l0ZVNoZWV0QmVmb3JlT3Blbi5lbWl0KCk7XG4gIH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY2FsY2l0ZVNoZWV0T3Blbi5lbWl0KCk7XG4gICAgYWN0aXZhdGVGb2N1c1RyYXAodGhpcyk7XG4gIH1cbiAgb25CZWZvcmVDbG9zZSgpIHtcbiAgICB0aGlzLmNhbGNpdGVTaGVldEJlZm9yZUNsb3NlLmVtaXQoKTtcbiAgfVxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY2FsY2l0ZVNoZWV0Q2xvc2UuZW1pdCgpO1xuICAgIGRlYWN0aXZhdGVGb2N1c1RyYXAodGhpcyk7XG4gIH1cbiAgb3BlblNoZWV0KCkge1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNhbGNpdGVTaGVldE9wZW5cIiwgdGhpcy5vcGVuRW5kKTtcbiAgICB0aGlzLm9wZW5lZCA9IHRydWU7XG4gICAgaWYgKCF0aGlzLnNsb3R0ZWRJblNoZWxsKSB7XG4gICAgICB0aGlzLmluaXRpYWxPdmVyZmxvd0NTUyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdztcbiAgICAgIC8vIHVzZSBhbiBpbmxpbmUgc3R5bGUgaW5zdGVhZCBvZiBhIHV0aWxpdHkgY2xhc3MgdG8gYXZvaWQgZ2xvYmFsIGNsYXNzIGRlY2xhcmF0aW9ucy5cbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIm92ZXJmbG93XCIsIFwiaGlkZGVuXCIpO1xuICAgIH1cbiAgfVxuICByZW1vdmVPdmVyZmxvd0hpZGRlbkNsYXNzKCkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIm92ZXJmbG93XCIsIHRoaXMuaW5pdGlhbE92ZXJmbG93Q1NTKTtcbiAgfVxuICBoYW5kbGVNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgIHRoaXMudXBkYXRlRm9jdXNUcmFwRWxlbWVudHMoKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJmb2N1c1RyYXBEaXNhYmxlZFwiOiBbXCJoYW5kbGVGb2N1c1RyYXBEaXNhYmxlZFwiXSxcbiAgICBcIm9wZW5cIjogW1widG9nZ2xlU2hlZXRcIl0sXG4gICAgXCJvcGVuZWRcIjogW1wiaGFuZGxlT3BlbmVkQ2hhbmdlXCJdXG4gIH07IH1cbn07XG5TaGVldC5zdHlsZSA9IHNoZWV0Q3NzO1xuXG5leHBvcnQgeyBTaGVldCBhcyBjYWxjaXRlX3NoZWV0IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtc2hlZXQuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBmIGFzIGZvcmNlVXBkYXRlIH0gZnJvbSAnLi9pbmRleC04NmZhZWY5Yy5qcyc7XG5cbmNvbnN0IHJlc29sdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJvbWlzZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgc2V0cyB1cCB0aGUgY29tcG9uZW50IGZvciB0aGUgYWJpbGl0eSB0byBrbm93IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudFdpbGxMb2FkKCk6IHZvaWQge1xuICogICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRVcExvYWRhYmxlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBwcm9taXNlTWFwLnNldChjb21wb25lbnQsIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlTWFwLnNldChjb21wb25lbnQsIHJlc29sdmUpKSk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgbGV0cyB0aGUgbG9hZGFibGUgY29tcG9uZW50IGtub3cgdGhhdCBpdCBpcyBub3cgbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudERpZExvYWQoKTogdm9pZCB7XG4gKiAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXNvbHZlTWFwLmdldChjb21wb25lbnQpKCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJlIGEgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZCAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIFN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQpLlxuICpcbiAqIFJlcXVpcmVzIHJlcXVpcmVzIGBMb2FkYWJsZUNvbXBvbmVudGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdC5cbiAqXG4gKiBgYGBcbiAqIGFzeW5jIG15TWV0aG9kKCk6IFByb21pc2U8dm9pZD4ge1xuICogICBhd2FpdCBjb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmZ1bmN0aW9uIGNvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmV0dXJuIHByb21pc2VNYXAuZ2V0KGNvbXBvbmVudCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJpbmcgdGhlIGNvbXBvbmVudCBpcyBsb2FkZWQgYW5kIHJlbmRlcmVkIGJ5IHRoZSBicm93c2VyIChUaGUgXCJjb21wb25lbnREaWRMb2FkXCIgU3RlbmNpbCBsaWZlY3ljbGUgbWV0aG9kIGhhcyBiZWVuIGNhbGxlZCBhbmQgYW55IGludGVybmFsIGVsZW1lbnRzIGFyZSBmb2N1c2FibGUpLlxuICpcbiAqIFJlcXVpcmVzIHJlcXVpcmVzIGBMb2FkYWJsZUNvbXBvbmVudGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gKlxuICogQSBjb21wb25lbnQgZGV2ZWxvcGVyIGNhbiBhd2FpdCB0aGlzIG1ldGhvZCBiZWZvcmUgcHJvY2VlZGluZyB3aXRoIGFueSBsb2dpYyB0aGF0IHJlcXVpcmVzIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBmaXJzdCBhbmQgdGhlbiBhbiBpbnRlcm5hbCBlbGVtZW50IGJlIGZvY3VzZWQuXG4gKlxuICogYGBgXG4gKiBhc3luYyBzZXRGb2N1cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICogICB0aGlzLmludGVybmFsRWxlbWVudD8uZm9jdXMoKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29tcG9uZW50Rm9jdXNhYmxlKGNvbXBvbmVudCkge1xuICBhd2FpdCBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KTtcbiAgZm9yY2VVcGRhdGUoY29tcG9uZW50KTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKSk7XG59XG5cbmV4cG9ydCB7IHNldENvbXBvbmVudExvYWRlZCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYiwgY29tcG9uZW50Rm9jdXNhYmxlIGFzIGMsIHNldFVwTG9hZGFibGVDb21wb25lbnQgYXMgcyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkYWJsZS1iMTczOTZlMC5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbi8qKlxuICogVGhpcyB1dGlsaXR5IGVuc3VyZXMgb2JzZXJ2ZXJzIGFyZSBjcmVhdGVkIG9ubHkgZm9yIGJyb3dzZXIgY29udGV4dHMuXG4gKlxuICogQHBhcmFtIHR5cGUgLSB0aGUgdHlwZSBvZiBvYnNlcnZlciB0byBjcmVhdGVcbiAqIEBwYXJhbSBjYWxsYmFjayAtIHRoZSBvYnNlcnZlciBjYWxsYmFja1xuICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb2JzZXJ2ZXIgb3B0aW9uc1xuICovXG5mdW5jdGlvbiBjcmVhdGVPYnNlcnZlcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9kb20vaXNzdWVzLzEyNiNpc3N1ZWNvbW1lbnQtMTA0OTgxNDk0OFxuICBjbGFzcyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXIgZXh0ZW5kcyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICAgIHN1cGVyKGNhbGxiYWNrKTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBvYnNlcnZlKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5LnB1c2goeyB0YXJnZXQsIG9wdGlvbnMgfSk7XG4gICAgICByZXR1cm4gc3VwZXIub2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB1bm9ic2VydmUodGFyZ2V0KSB7XG4gICAgICBjb25zdCBuZXdPYnNlcnZlZEVudHJpZXMgPSB0aGlzLm9ic2VydmVkRW50cnkuZmlsdGVyKChvYnNlcnZlZCkgPT4gb2JzZXJ2ZWQudGFyZ2V0ICE9PSB0YXJnZXQpO1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5ID0gW107XG4gICAgICB0aGlzLmNhbGxiYWNrKHN1cGVyLnRha2VSZWNvcmRzKCksIHRoaXMpO1xuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICBuZXdPYnNlcnZlZEVudHJpZXMuZm9yRWFjaCgob2JzZXJ2ZWQpID0+IHRoaXMub2JzZXJ2ZShvYnNlcnZlZC50YXJnZXQsIG9ic2VydmVkLm9wdGlvbnMpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0eXBlID09PSBcImludGVyc2VjdGlvblwiXG4gICAgICA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgICAgOiB0eXBlID09PSBcIm11dGF0aW9uXCJcbiAgICAgICAgPyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXJcbiAgICAgICAgOiB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIpO1xuICB9KSgpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVPYnNlcnZlciBhcyBjIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVycy03MWQzMzJkYi5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IGUgYXMgcmVhZFRhc2sgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcblxuZnVuY3Rpb24gaXNPcGVuKGNvbXBvbmVudCkge1xuICByZXR1cm4gXCJvcGVuZWRcIiBpbiBjb21wb25lbnQgPyBjb21wb25lbnQub3BlbmVkIDogY29tcG9uZW50Lm9wZW47XG59XG5mdW5jdGlvbiBlbWl0SW1tZWRpYXRlbHkoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQgPSBmYWxzZSkge1xuICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICA/IGNvbXBvbmVudC5vbkJlZm9yZU9wZW4oKVxuICAgIDogY29tcG9uZW50Lm9uQmVmb3JlQ2xvc2UoKTtcbiAgKG5vbk9wZW5DbG9zZUNvbXBvbmVudCA/IGNvbXBvbmVudFtjb21wb25lbnQudHJhbnNpdGlvblByb3BdIDogaXNPcGVuKGNvbXBvbmVudCkpXG4gICAgPyBjb21wb25lbnQub25PcGVuKClcbiAgICA6IGNvbXBvbmVudC5vbkNsb3NlKCk7XG59XG4vKipcbiAqIEhlbHBlciB0byBkZXRlcm1pbmUgZ2xvYmFsbHkgc2V0IHRyYW5zaXRpb24gZHVyYXRpb24gb24gdGhlIGdpdmVuIG9wZW5UcmFuc2l0aW9uUHJvcCwgd2hpY2ggaXMgaW1wb3J0ZWQgYW5kIHNldCBpbiB0aGUgQFdhdGNoKFwib3BlblwiKS5cbiAqIFVzZWQgdG8gZW1pdCAoYmVmb3JlKW9wZW4vY2xvc2UgZXZlbnRzIGJvdGggZm9yIHdoZW4gdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBpcyBwcmVzZW50IGFuZCB3aGVuIHRoZXJlIGlzIG5vbmUgKHRyYW5zaXRpb24tZHVyYXRpb24gaXMgc2V0IHRvIDApLlxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgeyBvblRvZ2dsZU9wZW5DbG9zZUNvbXBvbmVudCwgT3BlbkNsb3NlQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL3V0aWxzL29wZW5DbG9zZUNvbXBvbmVudFwiO1xuICpcbiAqIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICogLy8gV2hlbiBjb21wb25lbnQgaW5pdGlhbGx5IHJlbmRlcnMsIGlmIGBvcGVuYCB3YXMgc2V0IHdlIG5lZWQgdG8gdHJpZ2dlciBvbiBsb2FkIGFzIHdhdGNoZXIgZG9lc24ndCBmaXJlLlxuICogaWYgKHRoaXMub3Blbikge1xuICogICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKiBAV2F0Y2goXCJvcGVuXCIpXG4gKiBhc3luYyB0b2dnbGVNb2RhbCh2YWx1ZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuICogICAgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gKiB9XG4gKlxuICogQHBhcmFtIGNvbXBvbmVudCAtIE9wZW5DbG9zZUNvbXBvbmVudCB1c2VzIGBvcGVuYCBwcm9wIHRvIGVtaXQgKGJlZm9yZSlvcGVuL2Nsb3NlLlxuICogQHBhcmFtIG5vbk9wZW5DbG9zZUNvbXBvbmVudCAtIE9wZW5DbG9zZUNvbXBvbmVudCB1c2VzIGBleHBhbmRlZGAgcHJvcCB0byBlbWl0IChiZWZvcmUpb3Blbi9jbG9zZS5cbiAqL1xuZnVuY3Rpb24gb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQgPSBmYWxzZSkge1xuICByZWFkVGFzaygoKSA9PiB7XG4gICAgaWYgKGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgIGNvbnN0IHsgdHJhbnNpdGlvbkR1cmF0aW9uOiBhbGxEdXJhdGlvbnMsIHRyYW5zaXRpb25Qcm9wZXJ0eTogYWxsUHJvcHMgfSA9IGdldENvbXB1dGVkU3R5bGUoY29tcG9uZW50LnRyYW5zaXRpb25FbCk7XG4gICAgICBjb25zdCBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXkgPSBhbGxEdXJhdGlvbnMuc3BsaXQoXCIsXCIpO1xuICAgICAgY29uc3QgYWxsVHJhbnNpdGlvblByb3BzQXJyYXkgPSBhbGxQcm9wcy5zcGxpdChcIixcIik7XG4gICAgICBjb25zdCBvcGVuVHJhbnNpdGlvblByb3BJbmRleCA9IGFsbFRyYW5zaXRpb25Qcm9wc0FycmF5LmluZGV4T2YoY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCk7XG4gICAgICBjb25zdCB0cmFuc2l0aW9uRHVyYXRpb24gPSBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXlbb3BlblRyYW5zaXRpb25Qcm9wSW5kZXhdID8/XG4gICAgICAgIC8qIFNhZmFyaSB3aWxsIGhhdmUgYSBzaW5nbGUgdHJhbnNpdGlvbiB2YWx1ZSBpZiBtdWx0aXBsZSBwcm9wcyBzaGFyZSBpdCxcbiAgICAgICAgc28gd2UgZmFsbCBiYWNrIHRvIGl0IGlmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgcHJvcCBkdXJhdGlvbiAqL1xuICAgICAgICBhbGxUcmFuc2l0aW9uRHVyYXRpb25zQXJyYXlbMF07XG4gICAgICBpZiAodHJhbnNpdGlvbkR1cmF0aW9uID09PSBcIjBzXCIpIHtcbiAgICAgICAgZW1pdEltbWVkaWF0ZWx5KGNvbXBvbmVudCwgbm9uT3BlbkNsb3NlQ29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZmFsbGJhY2tUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbnN0YXJ0XCIsIG9uU3RhcnQpO1xuICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uY2FuY2VsXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICBlbWl0SW1tZWRpYXRlbHkoY29tcG9uZW50LCBub25PcGVuQ2xvc2VDb21wb25lbnQpO1xuICAgICAgfSwgcGFyc2VGbG9hdCh0cmFuc2l0aW9uRHVyYXRpb24pICogMTAwMCk7XG4gICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uc3RhcnRcIiwgb25TdGFydCk7XG4gICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmNhbmNlbFwiLCBvbkVuZE9yQ2FuY2VsKTtcbiAgICAgIGZ1bmN0aW9uIG9uU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCAmJiBldmVudC50YXJnZXQgPT09IGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoZmFsbGJhY2tUaW1lb3V0SWQpO1xuICAgICAgICAgIGNvbXBvbmVudC50cmFuc2l0aW9uRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25zdGFydFwiLCBvblN0YXJ0KTtcbiAgICAgICAgICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICAgICAgICAgID8gY29tcG9uZW50Lm9uQmVmb3JlT3BlbigpXG4gICAgICAgICAgICA6IGNvbXBvbmVudC5vbkJlZm9yZUNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIG9uRW5kT3JDYW5jZWwoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gY29tcG9uZW50Lm9wZW5UcmFuc2l0aW9uUHJvcCAmJiBldmVudC50YXJnZXQgPT09IGNvbXBvbmVudC50cmFuc2l0aW9uRWwpIHtcbiAgICAgICAgICAobm9uT3BlbkNsb3NlQ29tcG9uZW50ID8gY29tcG9uZW50W2NvbXBvbmVudC50cmFuc2l0aW9uUHJvcF0gOiBpc09wZW4oY29tcG9uZW50KSlcbiAgICAgICAgICAgID8gY29tcG9uZW50Lm9uT3BlbigpXG4gICAgICAgICAgICA6IGNvbXBvbmVudC5vbkNsb3NlKCk7XG4gICAgICAgICAgY29tcG9uZW50LnRyYW5zaXRpb25FbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCBvbkVuZE9yQ2FuY2VsKTtcbiAgICAgICAgICBjb21wb25lbnQudHJhbnNpdGlvbkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uY2FuY2VsXCIsIG9uRW5kT3JDYW5jZWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHsgb25Ub2dnbGVPcGVuQ2xvc2VDb21wb25lbnQgYXMgbyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuQ2xvc2VDb21wb25lbnQtNDhkYjZkYWYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9