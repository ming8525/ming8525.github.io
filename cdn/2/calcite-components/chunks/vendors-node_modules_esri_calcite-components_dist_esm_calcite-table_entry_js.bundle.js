"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-table_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getUserAgentString)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
function getUserAgentData() {
  return navigator.userAgentData;
}
function getUserAgentString() {
  const uaData = getUserAgentData();
  return uaData?.brands
    ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(" ")
    : navigator.userAgent;
}



//# sourceMappingURL=browser-ece29da7.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-table.entry.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-table.entry.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_table: () => (/* binding */ Table)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */











const CSS = {
  bordered: "bordered",
  zebra: "zebra",
  selectionArea: "selection-area",
  paginationArea: "pagination-area",
  container: "container",
  tableContainer: "table-container",
  tableFixed: "table--fixed",
  assistiveText: "assistive-text",
  selectionActions: "selection-actions",
};
const SLOTS = {
  selectionActions: "selection-actions",
  tableHeader: "table-header",
  tableFooter: "table-footer",
};

const tableCss = ":host([scale=s]){--calcite-internal-table-cell-padding:0.25rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--2);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--3)}:host([scale=m]){--calcite-internal-table-cell-padding:0.5rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size--1);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--2)}:host([scale=l]){--calcite-internal-table-cell-padding:1rem;--calcite-internal-table-cell-font-size:var(--calcite-font-size-0);--calcite-internal-table-cell-font-size-secondary:var(--calcite-font-size--1)}:host{display:table}.container{max-inline-size:100vw;inline-size:100%}.table-container{overflow-x:auto;white-space:nowrap}.table-container:not(.bordered){border-block-end:1px solid var(--calcite-color-border-3)}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}table{inline-size:100%;border-collapse:collapse;overflow-x:scroll;border-block-start:1px solid var(--calcite-color-border-3);border-inline-start:1px solid var(--calcite-color-border-3);border-block-end:1px solid var(--calcite-color-border-3)}tbody{border-block-end:1px solid var(--calcite-color-border-3)}.table--fixed{table-layout:fixed}.bordered ::slotted(calcite-table-row){--calcite-table-row-border-color:var(--calcite-color-border-3)}.zebra ::slotted(calcite-table-row:nth-child(2n+1)){--calcite-table-row-background:var(--calcite-color-foreground-2)}.selection-actions{display:flex;flex-direction:row;margin-inline-start:auto}.selection-area{display:flex;flex-direction:row;align-items:center;padding-block:var(--calcite-internal-table-cell-padding)}.selection-area calcite-chip:last-of-type{margin-inline-end:0.5rem}.selection-area calcite-chip:last-of-type:not(:first-of-type){margin-inline-start:0.5rem}.selection-area calcite-button{margin-inline-end:1rem}.pagination-area{display:flex;inline-size:100%;flex-direction:row;justify-content:center;padding-block:var(--calcite-internal-table-cell-padding)}calcite-pagination{flex:1;justify-content:center}:host([hidden]){display:none}[hidden]{display:none}";

const Table = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteTableSelect = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteTableSelect", 6);
    this.calciteTablePageChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteTablePageChange", 6);
    this.calciteInternalTableRowFocusChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalTableRowFocusChange", 6);
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.getSlottedRows = (el) => {
      return el
        ?.assignedElements({ flatten: true })
        ?.filter((el) => el?.matches("calcite-table-row"));
    };
    this.updateRows = () => {
      const headRows = this.getSlottedRows(this.tableHeadSlotEl) || [];
      const bodyRows = this.getSlottedRows(this.tableBodySlotEl) || [];
      const footRows = this.getSlottedRows(this.tableFootSlotEl) || [];
      const allRows = [...headRows, ...bodyRows, ...footRows];
      headRows?.forEach((row) => {
        const position = headRows?.indexOf(row);
        row.rowType = "head";
        row.positionSection = position;
        row.positionSectionLocalized = this.localizeNumber((position + 1).toString());
      });
      bodyRows?.forEach((row) => {
        const position = bodyRows?.indexOf(row);
        row.rowType = "body";
        row.positionSection = position;
        row.positionSectionLocalized = this.localizeNumber((position + 1).toString());
      });
      footRows?.forEach((row) => {
        const position = footRows?.indexOf(row);
        row.rowType = "foot";
        row.positionSection = position;
        row.positionSectionLocalized = this.localizeNumber((position + 1).toString());
      });
      allRows?.forEach((row) => {
        row.selectionMode = this.selectionMode;
        row.bodyRowCount = bodyRows?.length;
        row.positionAll = allRows?.indexOf(row);
        row.numbered = this.numbered;
        row.scale = this.scale;
        row.readCellContentsToAT = this.readCellContentsToAT;
      });
      const colCount = headRows[0]?.cellCount || headRows[0]?.querySelectorAll("calcite-table-header")?.length;
      this.colCount = colCount;
      this.headRows = headRows;
      this.bodyRows = bodyRows;
      this.footRows = footRows;
      this.allRows = allRows;
      this.updateSelectedItems();
      this.paginateRows();
    };
    this.handlePaginationChange = () => {
      const requestedItem = this.paginationEl?.startItem;
      this.pageStartRow = requestedItem || 1;
      this.calciteTablePageChange.emit();
      this.updateRows();
    };
    this.paginateRows = () => {
      this.bodyRows?.forEach((row) => {
        const rowPos = row.positionSection + 1;
        const inView = rowPos >= this.pageStartRow && rowPos < this.pageStartRow + this.pageSize;
        row.hidden = this.pageSize > 0 && !inView && !this.footRows.includes(row);
      });
    };
    this.updateSelectedItems = (emit) => {
      const selectedItems = this.bodyRows?.filter((el) => el.selected);
      this.selectedItems = selectedItems;
      this.selectedCount = selectedItems?.length;
      this.allRows?.forEach((row) => {
        row.selectedRowCount = this.selectedCount;
        row.selectedRowCountLocalized = this.localizeNumber(this.selectedCount);
      });
      if (emit) {
        this.calciteTableSelect.emit();
      }
    };
    this.handleDeselectAllRows = () => {
      this.bodyRows?.forEach((row) => {
        row.selected = false;
      });
      this.updateSelectedItems(true);
    };
    this.setSelectedItems = (elToMatch) => {
      this.bodyRows?.forEach((el) => {
        if (elToMatch?.rowType === "head") {
          el.selected = this.selectedCount !== this.bodyRows?.length;
        }
        else {
          el.selected =
            elToMatch === el ? !el.selected : this.selectionMode === "multiple" ? el.selected : false;
        }
      });
      this.updateSelectedItems(true);
    };
    this.localizeNumber = (value) => {
      _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.n.numberFormatOptions = {
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        useGrouping: this.groupSeparator,
      };
      return _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.n.localize(value.toString());
    };
    this.bordered = false;
    this.caption = undefined;
    this.groupSeparator = false;
    this.layout = "auto";
    this.numbered = false;
    this.numberingSystem = undefined;
    this.pageSize = 0;
    this.scale = "m";
    this.selectionMode = "none";
    this.zebra = false;
    this.selectedItems = [];
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.colCount = 0;
    this.pageStartRow = 1;
    this.selectedCount = 0;
    this.readCellContentsToAT = undefined;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
  }
  handleNumberedChange() {
    this.updateRows();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_2__.u)(this, this.effectiveLocale);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_2__.s)(this);
    this.readCellContentsToAT = /safari/i.test((0,_browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_4__.g)());
    this.updateRows();
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
  }
  connectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  disconnectedCallback() {
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  calciteChipSelectListener(event) {
    if (event.composedPath().includes(this.el)) {
      this.setSelectedItems(event.target);
    }
  }
  calciteInternalTableRowFocusEvent(event) {
    const cellPosition = event["detail"].cellPosition;
    const rowPos = event["detail"].rowPosition;
    const destination = event["detail"].destination;
    const lastCell = event["detail"].lastCell;
    const visibleBody = this.bodyRows?.filter((row) => !row.hidden);
    const visibleAll = this.allRows?.filter((row) => !row.hidden);
    const lastHeadRow = this.headRows[this.headRows.length - 1]?.positionAll;
    const firstBodyRow = visibleBody[0]?.positionAll;
    const lastBodyRow = visibleBody[visibleBody.length - 1]?.positionAll;
    const firstFootRow = this.footRows[0]?.positionAll;
    const lastTableRow = visibleAll[visibleAll.length - 1]?.positionAll;
    const leavingHeader = destination === "next" && rowPos === lastHeadRow;
    const leavingFooter = destination === "previous" && rowPos === firstFootRow;
    const enteringHeader = destination === "previous" && rowPos === firstBodyRow;
    const enteringFooter = destination === "next" && rowPos === lastBodyRow;
    let rowPosition;
    switch (destination) {
      case "first":
        rowPosition = 0;
        break;
      case "last":
        rowPosition = lastTableRow;
        break;
      case "next":
        rowPosition = leavingHeader ? firstBodyRow : enteringFooter ? firstFootRow : rowPos + 1;
        break;
      case "previous":
        rowPosition = leavingFooter ? lastBodyRow : enteringHeader ? lastHeadRow : rowPos - 1;
        break;
    }
    const destinationCount = this.allRows?.find((row) => row.positionAll === rowPosition)?.cellCount;
    const adjustedPos = cellPosition > destinationCount ? destinationCount : cellPosition;
    if (rowPosition !== undefined) {
      this.calciteInternalTableRowFocusChange.emit({
        cellPosition: adjustedPos,
        rowPosition,
        destination,
        lastCell,
      });
    }
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderSelectionArea() {
    const outOfViewCount = this.selectedItems?.filter((el) => el.hidden)?.length;
    const localizedOutOfView = this.localizeNumber(outOfViewCount?.toString());
    const localizedSelectedCount = this.localizeNumber(this.selectedCount?.toString());
    const selectionText = `${localizedSelectedCount} ${this.messages.selected}`;
    const outOfView = `${localizedOutOfView} ${this.messages.hiddenSelected}`;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.selectionArea }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", { kind: this.selectedCount > 0 ? "brand" : "neutral", scale: this.scale, value: selectionText }, selectionText), outOfViewCount > 0 && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", { icon: "hide-empty", scale: this.scale, title: outOfView, value: outOfView }, localizedOutOfView)), this.selectedCount > 0 && ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { "icon-start": "x", kind: "neutral", onClick: this.handleDeselectAllRows, round: true, scale: this.scale, title: `${this.messages.clear} ${selectionText} ${this.messages.row}` }, this.messages.clear)), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.selectionActions }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.selectionActions }))));
  }
  renderPaginationArea() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.paginationArea }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-pagination", { groupSeparator: this.groupSeparator, numberingSystem: this.numberingSystem, onCalcitePaginationChange: this.handlePaginationChange, pageSize: this.pageSize, scale: this.scale, startItem: 1, totalItems: this.bodyRows?.length,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.paginationEl = el) })));
  }
  renderTHead() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("thead", null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.tableHeader, onSlotchange: this.updateRows, ref: (el) => (this.tableHeadSlotEl = el) })));
  }
  renderTBody() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tbody", null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.updateRows, ref: (el) => (this.tableBodySlotEl = el) })));
  }
  renderTFoot() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tfoot", null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.tableFooter, onSlotchange: this.updateRows, ref: (el) => (this.tableFootSlotEl = el) })));
  }
  render() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.container }, this.selectionMode !== "none" && this.renderSelectionArea(), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS.bordered]: this.bordered,
        [CSS.zebra]: this.zebra,
        [CSS.tableContainer]: true,
      } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("table", { "aria-colcount": this.colCount, "aria-multiselectable": this.selectionMode === "multiple", "aria-readonly": true, "aria-rowcount": this.allRows?.length, class: { [CSS.tableFixed]: this.layout === "fixed" }, role: "grid" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("caption", { class: CSS.assistiveText }, this.caption), this.renderTHead(), this.renderTBody(), this.renderTFoot())), this.pageSize > 0 && this.renderPaginationArea())));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "groupSeparator": ["handleNumberedChange"],
    "numbered": ["handleNumberedChange"],
    "numberingSystem": ["handleNumberedChange"],
    "pageSize": ["handleNumberedChange"],
    "scale": ["handleNumberedChange"],
    "selectionMode": ["handleNumberedChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
};
Table.style = tableCss;



//# sourceMappingURL=calcite-table.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setComponentLoaded),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setUpLoadableComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.f)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}



//# sourceMappingURL=loadable-b17396e0.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-0bcdca54.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLXRhYmxlX2VudHJ5X2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnQkFBZ0IsUUFBUSxNQUFNLEdBQUcsUUFBUTtBQUNwRTtBQUNBOztBQUVtQzs7QUFFbkM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ2Y7QUFDNkI7QUFDUjtBQUNuRDtBQUNyQztBQUNDO0FBQ0s7QUFDTjtBQUNNOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQ0FBbUMsOENBQThDLG9FQUFvRSw4RUFBOEUsaUJBQWlCLDZDQUE2QyxvRUFBb0UsOEVBQThFLGlCQUFpQiwyQ0FBMkMsbUVBQW1FLDhFQUE4RSxNQUFNLGNBQWMsV0FBVyxzQkFBc0IsaUJBQWlCLGlCQUFpQixnQkFBZ0IsbUJBQW1CLGdDQUFnQyx5REFBeUQsZ0JBQWdCLGtCQUFrQixnQkFBZ0IsZUFBZSxVQUFVLFlBQVksZ0JBQWdCLHNCQUFzQixtQkFBbUIsZUFBZSxNQUFNLGlCQUFpQix5QkFBeUIsa0JBQWtCLDJEQUEyRCw0REFBNEQseURBQXlELE1BQU0seURBQXlELGNBQWMsbUJBQW1CLHVDQUF1QywrREFBK0Qsb0RBQW9ELGlFQUFpRSxtQkFBbUIsYUFBYSxtQkFBbUIseUJBQXlCLGdCQUFnQixhQUFhLG1CQUFtQixtQkFBbUIseURBQXlELDBDQUEwQyx5QkFBeUIsOERBQThELDJCQUEyQiwrQkFBK0IsdUJBQXVCLGlCQUFpQixhQUFhLGlCQUFpQixt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QUFDQTtBQUNBLGlCQUFpQixVQUFVLEdBQUcsS0FBSztBQUNuQztBQUNBO0FBQ0E7QUFDQSxpREFBaUQscURBQVksYUFBYSxVQUFVLGdCQUFnQixLQUFLO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEtBQUs7QUFDZjtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrRzs7QUFFbEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9icm93c2VyLWVjZTI5ZGE3LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvZXNtL2NhbGNpdGUtdGFibGUuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vbG9hZGFibGUtYjE3Mzk2ZTAuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vdDluLTBiY2RjYTU0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuZnVuY3Rpb24gZ2V0VXNlckFnZW50RGF0YSgpIHtcbiAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnREYXRhO1xufVxuZnVuY3Rpb24gZ2V0VXNlckFnZW50U3RyaW5nKCkge1xuICBjb25zdCB1YURhdGEgPSBnZXRVc2VyQWdlbnREYXRhKCk7XG4gIHJldHVybiB1YURhdGE/LmJyYW5kc1xuICAgID8gdWFEYXRhLmJyYW5kcy5tYXAoKHsgYnJhbmQsIHZlcnNpb24gfSkgPT4gYCR7YnJhbmR9LyR7dmVyc2lvbn1gKS5qb2luKFwiIFwiKVxuICAgIDogbmF2aWdhdG9yLnVzZXJBZ2VudDtcbn1cblxuZXhwb3J0IHsgZ2V0VXNlckFnZW50U3RyaW5nIGFzIGcgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvd3Nlci1lY2UyOWRhNy5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBnIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTg2ZmFlZjljLmpzJztcbmltcG9ydCB7IHMgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgYSBhcyBzZXRDb21wb25lbnRMb2FkZWQgfSBmcm9tICcuL2xvYWRhYmxlLWIxNzM5NmUwLmpzJztcbmltcG9ydCB7IHUgYXMgdXBkYXRlTWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgYyBhcyBjb25uZWN0TWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzIH0gZnJvbSAnLi90OW4tMGJjZGNhNTQuanMnO1xuaW1wb3J0IHsgbiBhcyBudW1iZXJTdHJpbmdGb3JtYXR0ZXIsIGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUtNmU3ODNjZjAuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRVc2VyQWdlbnRTdHJpbmcgfSBmcm9tICcuL2Jyb3dzZXItZWNlMjlkYTcuanMnO1xuaW1wb3J0ICcuL2RvbS1lZDAwYTU4NS5qcyc7XG5pbXBvcnQgJy4vZ3VpZC0yMWZlY2ZhNC5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLWNmODIzODhjLmpzJztcbmltcG9ydCAnLi9rZXktNjFmODJkZGIuanMnO1xuaW1wb3J0ICcuL29ic2VydmVycy03MWQzMzJkYi5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgYm9yZGVyZWQ6IFwiYm9yZGVyZWRcIixcbiAgemVicmE6IFwiemVicmFcIixcbiAgc2VsZWN0aW9uQXJlYTogXCJzZWxlY3Rpb24tYXJlYVwiLFxuICBwYWdpbmF0aW9uQXJlYTogXCJwYWdpbmF0aW9uLWFyZWFcIixcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICB0YWJsZUNvbnRhaW5lcjogXCJ0YWJsZS1jb250YWluZXJcIixcbiAgdGFibGVGaXhlZDogXCJ0YWJsZS0tZml4ZWRcIixcbiAgYXNzaXN0aXZlVGV4dDogXCJhc3Npc3RpdmUtdGV4dFwiLFxuICBzZWxlY3Rpb25BY3Rpb25zOiBcInNlbGVjdGlvbi1hY3Rpb25zXCIsXG59O1xuY29uc3QgU0xPVFMgPSB7XG4gIHNlbGVjdGlvbkFjdGlvbnM6IFwic2VsZWN0aW9uLWFjdGlvbnNcIixcbiAgdGFibGVIZWFkZXI6IFwidGFibGUtaGVhZGVyXCIsXG4gIHRhYmxlRm9vdGVyOiBcInRhYmxlLWZvb3RlclwiLFxufTtcblxuY29uc3QgdGFibGVDc3MgPSBcIjpob3N0KFtzY2FsZT1zXSl7LS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtcGFkZGluZzowLjI1cmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7LS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtZm9udC1zaXplLXNlY29uZGFyeTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMyl9Omhvc3QoW3NjYWxlPW1dKXstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtY2VsbC1wYWRkaW5nOjAuNXJlbTstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtY2VsbC1mb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpOy0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWZvbnQtc2l6ZS1zZWNvbmRhcnk6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTIpfTpob3N0KFtzY2FsZT1sXSl7LS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtcGFkZGluZzoxcmVtOy0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtY2VsbC1mb250LXNpemUtc2Vjb25kYXJ5OnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKX06aG9zdHtkaXNwbGF5OnRhYmxlfS5jb250YWluZXJ7bWF4LWlubGluZS1zaXplOjEwMHZ3O2lubGluZS1zaXplOjEwMCV9LnRhYmxlLWNvbnRhaW5lcntvdmVyZmxvdy14OmF1dG87d2hpdGUtc3BhY2U6bm93cmFwfS50YWJsZS1jb250YWluZXI6bm90KC5ib3JkZXJlZCl7Ym9yZGVyLWJsb2NrLWVuZDoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMyl9LmFzc2lzdGl2ZS10ZXh0e3Bvc2l0aW9uOmFic29sdXRlO2lubGluZS1zaXplOjFweDtibG9jay1zaXplOjFweDtwYWRkaW5nOjA7bWFyZ2luOi0xcHg7b3ZlcmZsb3c6aGlkZGVuO2NsaXA6cmVjdCgwLCAwLCAwLCAwKTt3aGl0ZS1zcGFjZTpub3dyYXA7Ym9yZGVyLXdpZHRoOjB9dGFibGV7aW5saW5lLXNpemU6MTAwJTtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7b3ZlcmZsb3cteDpzY3JvbGw7Ym9yZGVyLWJsb2NrLXN0YXJ0OjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKTtib3JkZXItaW5saW5lLXN0YXJ0OjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKTtib3JkZXItYmxvY2stZW5kOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX10Ym9keXtib3JkZXItYmxvY2stZW5kOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX0udGFibGUtLWZpeGVke3RhYmxlLWxheW91dDpmaXhlZH0uYm9yZGVyZWQgOjpzbG90dGVkKGNhbGNpdGUtdGFibGUtcm93KXstLWNhbGNpdGUtdGFibGUtcm93LWJvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX0uemVicmEgOjpzbG90dGVkKGNhbGNpdGUtdGFibGUtcm93Om50aC1jaGlsZCgybisxKSl7LS1jYWxjaXRlLXRhYmxlLXJvdy1iYWNrZ3JvdW5kOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0yKX0uc2VsZWN0aW9uLWFjdGlvbnN7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOnJvdzttYXJnaW4taW5saW5lLXN0YXJ0OmF1dG99LnNlbGVjdGlvbi1hcmVhe2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmctYmxvY2s6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLXBhZGRpbmcpfS5zZWxlY3Rpb24tYXJlYSBjYWxjaXRlLWNoaXA6bGFzdC1vZi10eXBle21hcmdpbi1pbmxpbmUtZW5kOjAuNXJlbX0uc2VsZWN0aW9uLWFyZWEgY2FsY2l0ZS1jaGlwOmxhc3Qtb2YtdHlwZTpub3QoOmZpcnN0LW9mLXR5cGUpe21hcmdpbi1pbmxpbmUtc3RhcnQ6MC41cmVtfS5zZWxlY3Rpb24tYXJlYSBjYWxjaXRlLWJ1dHRvbnttYXJnaW4taW5saW5lLWVuZDoxcmVtfS5wYWdpbmF0aW9uLWFyZWF7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjEwMCU7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZy1ibG9jazp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtcGFkZGluZyl9Y2FsY2l0ZS1wYWdpbmF0aW9ue2ZsZXg6MTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG5jb25zdCBUYWJsZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5jYWxjaXRlVGFibGVTZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVUYWJsZVNlbGVjdFwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVUYWJsZVBhZ2VDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVUYWJsZVBhZ2VDaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzQ2hhbmdlXCIsIDYpO1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHRoaXMuZ2V0U2xvdHRlZFJvd3MgPSAoZWwpID0+IHtcbiAgICAgIHJldHVybiBlbFxuICAgICAgICA/LmFzc2lnbmVkRWxlbWVudHMoeyBmbGF0dGVuOiB0cnVlIH0pXG4gICAgICAgID8uZmlsdGVyKChlbCkgPT4gZWw/Lm1hdGNoZXMoXCJjYWxjaXRlLXRhYmxlLXJvd1wiKSk7XG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZVJvd3MgPSAoKSA9PiB7XG4gICAgICBjb25zdCBoZWFkUm93cyA9IHRoaXMuZ2V0U2xvdHRlZFJvd3ModGhpcy50YWJsZUhlYWRTbG90RWwpIHx8IFtdO1xuICAgICAgY29uc3QgYm9keVJvd3MgPSB0aGlzLmdldFNsb3R0ZWRSb3dzKHRoaXMudGFibGVCb2R5U2xvdEVsKSB8fCBbXTtcbiAgICAgIGNvbnN0IGZvb3RSb3dzID0gdGhpcy5nZXRTbG90dGVkUm93cyh0aGlzLnRhYmxlRm9vdFNsb3RFbCkgfHwgW107XG4gICAgICBjb25zdCBhbGxSb3dzID0gWy4uLmhlYWRSb3dzLCAuLi5ib2R5Um93cywgLi4uZm9vdFJvd3NdO1xuICAgICAgaGVhZFJvd3M/LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGhlYWRSb3dzPy5pbmRleE9mKHJvdyk7XG4gICAgICAgIHJvdy5yb3dUeXBlID0gXCJoZWFkXCI7XG4gICAgICAgIHJvdy5wb3NpdGlvblNlY3Rpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgcm93LnBvc2l0aW9uU2VjdGlvbkxvY2FsaXplZCA9IHRoaXMubG9jYWxpemVOdW1iZXIoKHBvc2l0aW9uICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICAgIGJvZHlSb3dzPy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBib2R5Um93cz8uaW5kZXhPZihyb3cpO1xuICAgICAgICByb3cucm93VHlwZSA9IFwiYm9keVwiO1xuICAgICAgICByb3cucG9zaXRpb25TZWN0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHJvdy5wb3NpdGlvblNlY3Rpb25Mb2NhbGl6ZWQgPSB0aGlzLmxvY2FsaXplTnVtYmVyKChwb3NpdGlvbiArIDEpLnRvU3RyaW5nKCkpO1xuICAgICAgfSk7XG4gICAgICBmb290Um93cz8uZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gZm9vdFJvd3M/LmluZGV4T2Yocm93KTtcbiAgICAgICAgcm93LnJvd1R5cGUgPSBcImZvb3RcIjtcbiAgICAgICAgcm93LnBvc2l0aW9uU2VjdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICByb3cucG9zaXRpb25TZWN0aW9uTG9jYWxpemVkID0gdGhpcy5sb2NhbGl6ZU51bWJlcigocG9zaXRpb24gKyAxKS50b1N0cmluZygpKTtcbiAgICAgIH0pO1xuICAgICAgYWxsUm93cz8uZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgIHJvdy5zZWxlY3Rpb25Nb2RlID0gdGhpcy5zZWxlY3Rpb25Nb2RlO1xuICAgICAgICByb3cuYm9keVJvd0NvdW50ID0gYm9keVJvd3M/Lmxlbmd0aDtcbiAgICAgICAgcm93LnBvc2l0aW9uQWxsID0gYWxsUm93cz8uaW5kZXhPZihyb3cpO1xuICAgICAgICByb3cubnVtYmVyZWQgPSB0aGlzLm51bWJlcmVkO1xuICAgICAgICByb3cuc2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgICAgICByb3cucmVhZENlbGxDb250ZW50c1RvQVQgPSB0aGlzLnJlYWRDZWxsQ29udGVudHNUb0FUO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBjb2xDb3VudCA9IGhlYWRSb3dzWzBdPy5jZWxsQ291bnQgfHwgaGVhZFJvd3NbMF0/LnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLXRhYmxlLWhlYWRlclwiKT8ubGVuZ3RoO1xuICAgICAgdGhpcy5jb2xDb3VudCA9IGNvbENvdW50O1xuICAgICAgdGhpcy5oZWFkUm93cyA9IGhlYWRSb3dzO1xuICAgICAgdGhpcy5ib2R5Um93cyA9IGJvZHlSb3dzO1xuICAgICAgdGhpcy5mb290Um93cyA9IGZvb3RSb3dzO1xuICAgICAgdGhpcy5hbGxSb3dzID0gYWxsUm93cztcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRJdGVtcygpO1xuICAgICAgdGhpcy5wYWdpbmF0ZVJvd3MoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlUGFnaW5hdGlvbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RlZEl0ZW0gPSB0aGlzLnBhZ2luYXRpb25FbD8uc3RhcnRJdGVtO1xuICAgICAgdGhpcy5wYWdlU3RhcnRSb3cgPSByZXF1ZXN0ZWRJdGVtIHx8IDE7XG4gICAgICB0aGlzLmNhbGNpdGVUYWJsZVBhZ2VDaGFuZ2UuZW1pdCgpO1xuICAgICAgdGhpcy51cGRhdGVSb3dzKCk7XG4gICAgfTtcbiAgICB0aGlzLnBhZ2luYXRlUm93cyA9ICgpID0+IHtcbiAgICAgIHRoaXMuYm9keVJvd3M/LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICBjb25zdCByb3dQb3MgPSByb3cucG9zaXRpb25TZWN0aW9uICsgMTtcbiAgICAgICAgY29uc3QgaW5WaWV3ID0gcm93UG9zID49IHRoaXMucGFnZVN0YXJ0Um93ICYmIHJvd1BvcyA8IHRoaXMucGFnZVN0YXJ0Um93ICsgdGhpcy5wYWdlU2l6ZTtcbiAgICAgICAgcm93LmhpZGRlbiA9IHRoaXMucGFnZVNpemUgPiAwICYmICFpblZpZXcgJiYgIXRoaXMuZm9vdFJvd3MuaW5jbHVkZXMocm93KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zID0gKGVtaXQpID0+IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSB0aGlzLmJvZHlSb3dzPy5maWx0ZXIoKGVsKSA9PiBlbC5zZWxlY3RlZCk7XG4gICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBzZWxlY3RlZEl0ZW1zO1xuICAgICAgdGhpcy5zZWxlY3RlZENvdW50ID0gc2VsZWN0ZWRJdGVtcz8ubGVuZ3RoO1xuICAgICAgdGhpcy5hbGxSb3dzPy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgICAgcm93LnNlbGVjdGVkUm93Q291bnQgPSB0aGlzLnNlbGVjdGVkQ291bnQ7XG4gICAgICAgIHJvdy5zZWxlY3RlZFJvd0NvdW50TG9jYWxpemVkID0gdGhpcy5sb2NhbGl6ZU51bWJlcih0aGlzLnNlbGVjdGVkQ291bnQpO1xuICAgICAgfSk7XG4gICAgICBpZiAoZW1pdCkge1xuICAgICAgICB0aGlzLmNhbGNpdGVUYWJsZVNlbGVjdC5lbWl0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZURlc2VsZWN0QWxsUm93cyA9ICgpID0+IHtcbiAgICAgIHRoaXMuYm9keVJvd3M/LmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgICByb3cuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKHRydWUpO1xuICAgIH07XG4gICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW1zID0gKGVsVG9NYXRjaCkgPT4ge1xuICAgICAgdGhpcy5ib2R5Um93cz8uZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgaWYgKGVsVG9NYXRjaD8ucm93VHlwZSA9PT0gXCJoZWFkXCIpIHtcbiAgICAgICAgICBlbC5zZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb3VudCAhPT0gdGhpcy5ib2R5Um93cz8ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGVsLnNlbGVjdGVkID1cbiAgICAgICAgICAgIGVsVG9NYXRjaCA9PT0gZWwgPyAhZWwuc2VsZWN0ZWQgOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIiA/IGVsLnNlbGVjdGVkIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKHRydWUpO1xuICAgIH07XG4gICAgdGhpcy5sb2NhbGl6ZU51bWJlciA9ICh2YWx1ZSkgPT4ge1xuICAgICAgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIHVzZUdyb3VwaW5nOiB0aGlzLmdyb3VwU2VwYXJhdG9yLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubG9jYWxpemUodmFsdWUudG9TdHJpbmcoKSk7XG4gICAgfTtcbiAgICB0aGlzLmJvcmRlcmVkID0gZmFsc2U7XG4gICAgdGhpcy5jYXB0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZ3JvdXBTZXBhcmF0b3IgPSBmYWxzZTtcbiAgICB0aGlzLmxheW91dCA9IFwiYXV0b1wiO1xuICAgIHRoaXMubnVtYmVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBhZ2VTaXplID0gMDtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gXCJub25lXCI7XG4gICAgdGhpcy56ZWJyYSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29sQ291bnQgPSAwO1xuICAgIHRoaXMucGFnZVN0YXJ0Um93ID0gMTtcbiAgICB0aGlzLnNlbGVjdGVkQ291bnQgPSAwO1xuICAgIHRoaXMucmVhZENlbGxDb250ZW50c1RvQVQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZWZhdWx0TWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSBcIlwiO1xuICB9XG4gIGhhbmRsZU51bWJlcmVkQ2hhbmdlKCkge1xuICAgIHRoaXMudXBkYXRlUm93cygpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgICB0aGlzLnJlYWRDZWxsQ29udGVudHNUb0FUID0gL3NhZmFyaS9pLnRlc3QoZ2V0VXNlckFnZW50U3RyaW5nKCkpO1xuICAgIHRoaXMudXBkYXRlUm93cygpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIEV2ZW50IExpc3RlbmVyc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNhbGNpdGVDaGlwU2VsZWN0TGlzdGVuZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcy5lbCkpIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyhldmVudC50YXJnZXQpO1xuICAgIH1cbiAgfVxuICBjYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCBjZWxsUG9zaXRpb24gPSBldmVudFtcImRldGFpbFwiXS5jZWxsUG9zaXRpb247XG4gICAgY29uc3Qgcm93UG9zID0gZXZlbnRbXCJkZXRhaWxcIl0ucm93UG9zaXRpb247XG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBldmVudFtcImRldGFpbFwiXS5kZXN0aW5hdGlvbjtcbiAgICBjb25zdCBsYXN0Q2VsbCA9IGV2ZW50W1wiZGV0YWlsXCJdLmxhc3RDZWxsO1xuICAgIGNvbnN0IHZpc2libGVCb2R5ID0gdGhpcy5ib2R5Um93cz8uZmlsdGVyKChyb3cpID0+ICFyb3cuaGlkZGVuKTtcbiAgICBjb25zdCB2aXNpYmxlQWxsID0gdGhpcy5hbGxSb3dzPy5maWx0ZXIoKHJvdykgPT4gIXJvdy5oaWRkZW4pO1xuICAgIGNvbnN0IGxhc3RIZWFkUm93ID0gdGhpcy5oZWFkUm93c1t0aGlzLmhlYWRSb3dzLmxlbmd0aCAtIDFdPy5wb3NpdGlvbkFsbDtcbiAgICBjb25zdCBmaXJzdEJvZHlSb3cgPSB2aXNpYmxlQm9keVswXT8ucG9zaXRpb25BbGw7XG4gICAgY29uc3QgbGFzdEJvZHlSb3cgPSB2aXNpYmxlQm9keVt2aXNpYmxlQm9keS5sZW5ndGggLSAxXT8ucG9zaXRpb25BbGw7XG4gICAgY29uc3QgZmlyc3RGb290Um93ID0gdGhpcy5mb290Um93c1swXT8ucG9zaXRpb25BbGw7XG4gICAgY29uc3QgbGFzdFRhYmxlUm93ID0gdmlzaWJsZUFsbFt2aXNpYmxlQWxsLmxlbmd0aCAtIDFdPy5wb3NpdGlvbkFsbDtcbiAgICBjb25zdCBsZWF2aW5nSGVhZGVyID0gZGVzdGluYXRpb24gPT09IFwibmV4dFwiICYmIHJvd1BvcyA9PT0gbGFzdEhlYWRSb3c7XG4gICAgY29uc3QgbGVhdmluZ0Zvb3RlciA9IGRlc3RpbmF0aW9uID09PSBcInByZXZpb3VzXCIgJiYgcm93UG9zID09PSBmaXJzdEZvb3RSb3c7XG4gICAgY29uc3QgZW50ZXJpbmdIZWFkZXIgPSBkZXN0aW5hdGlvbiA9PT0gXCJwcmV2aW91c1wiICYmIHJvd1BvcyA9PT0gZmlyc3RCb2R5Um93O1xuICAgIGNvbnN0IGVudGVyaW5nRm9vdGVyID0gZGVzdGluYXRpb24gPT09IFwibmV4dFwiICYmIHJvd1BvcyA9PT0gbGFzdEJvZHlSb3c7XG4gICAgbGV0IHJvd1Bvc2l0aW9uO1xuICAgIHN3aXRjaCAoZGVzdGluYXRpb24pIHtcbiAgICAgIGNhc2UgXCJmaXJzdFwiOlxuICAgICAgICByb3dQb3NpdGlvbiA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImxhc3RcIjpcbiAgICAgICAgcm93UG9zaXRpb24gPSBsYXN0VGFibGVSb3c7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm5leHRcIjpcbiAgICAgICAgcm93UG9zaXRpb24gPSBsZWF2aW5nSGVhZGVyID8gZmlyc3RCb2R5Um93IDogZW50ZXJpbmdGb290ZXIgPyBmaXJzdEZvb3RSb3cgOiByb3dQb3MgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICByb3dQb3NpdGlvbiA9IGxlYXZpbmdGb290ZXIgPyBsYXN0Qm9keVJvdyA6IGVudGVyaW5nSGVhZGVyID8gbGFzdEhlYWRSb3cgOiByb3dQb3MgLSAxO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgZGVzdGluYXRpb25Db3VudCA9IHRoaXMuYWxsUm93cz8uZmluZCgocm93KSA9PiByb3cucG9zaXRpb25BbGwgPT09IHJvd1Bvc2l0aW9uKT8uY2VsbENvdW50O1xuICAgIGNvbnN0IGFkanVzdGVkUG9zID0gY2VsbFBvc2l0aW9uID4gZGVzdGluYXRpb25Db3VudCA/IGRlc3RpbmF0aW9uQ291bnQgOiBjZWxsUG9zaXRpb247XG4gICAgaWYgKHJvd1Bvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFibGVSb3dGb2N1c0NoYW5nZS5lbWl0KHtcbiAgICAgICAgY2VsbFBvc2l0aW9uOiBhZGp1c3RlZFBvcyxcbiAgICAgICAgcm93UG9zaXRpb24sXG4gICAgICAgIGRlc3RpbmF0aW9uLFxuICAgICAgICBsYXN0Q2VsbCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyU2VsZWN0aW9uQXJlYSgpIHtcbiAgICBjb25zdCBvdXRPZlZpZXdDb3VudCA9IHRoaXMuc2VsZWN0ZWRJdGVtcz8uZmlsdGVyKChlbCkgPT4gZWwuaGlkZGVuKT8ubGVuZ3RoO1xuICAgIGNvbnN0IGxvY2FsaXplZE91dE9mVmlldyA9IHRoaXMubG9jYWxpemVOdW1iZXIob3V0T2ZWaWV3Q291bnQ/LnRvU3RyaW5nKCkpO1xuICAgIGNvbnN0IGxvY2FsaXplZFNlbGVjdGVkQ291bnQgPSB0aGlzLmxvY2FsaXplTnVtYmVyKHRoaXMuc2VsZWN0ZWRDb3VudD8udG9TdHJpbmcoKSk7XG4gICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IGAke2xvY2FsaXplZFNlbGVjdGVkQ291bnR9ICR7dGhpcy5tZXNzYWdlcy5zZWxlY3RlZH1gO1xuICAgIGNvbnN0IG91dE9mVmlldyA9IGAke2xvY2FsaXplZE91dE9mVmlld30gJHt0aGlzLm1lc3NhZ2VzLmhpZGRlblNlbGVjdGVkfWA7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5zZWxlY3Rpb25BcmVhIH0sIGgoXCJjYWxjaXRlLWNoaXBcIiwgeyBraW5kOiB0aGlzLnNlbGVjdGVkQ291bnQgPiAwID8gXCJicmFuZFwiIDogXCJuZXV0cmFsXCIsIHNjYWxlOiB0aGlzLnNjYWxlLCB2YWx1ZTogc2VsZWN0aW9uVGV4dCB9LCBzZWxlY3Rpb25UZXh0KSwgb3V0T2ZWaWV3Q291bnQgPiAwICYmIChoKFwiY2FsY2l0ZS1jaGlwXCIsIHsgaWNvbjogXCJoaWRlLWVtcHR5XCIsIHNjYWxlOiB0aGlzLnNjYWxlLCB0aXRsZTogb3V0T2ZWaWV3LCB2YWx1ZTogb3V0T2ZWaWV3IH0sIGxvY2FsaXplZE91dE9mVmlldykpLCB0aGlzLnNlbGVjdGVkQ291bnQgPiAwICYmIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBcImljb24tc3RhcnRcIjogXCJ4XCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBvbkNsaWNrOiB0aGlzLmhhbmRsZURlc2VsZWN0QWxsUm93cywgcm91bmQ6IHRydWUsIHNjYWxlOiB0aGlzLnNjYWxlLCB0aXRsZTogYCR7dGhpcy5tZXNzYWdlcy5jbGVhcn0gJHtzZWxlY3Rpb25UZXh0fSAke3RoaXMubWVzc2FnZXMucm93fWAgfSwgdGhpcy5tZXNzYWdlcy5jbGVhcikpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5zZWxlY3Rpb25BY3Rpb25zIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMuc2VsZWN0aW9uQWN0aW9ucyB9KSkpKTtcbiAgfVxuICByZW5kZXJQYWdpbmF0aW9uQXJlYSgpIHtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLnBhZ2luYXRpb25BcmVhIH0sIGgoXCJjYWxjaXRlLXBhZ2luYXRpb25cIiwgeyBncm91cFNlcGFyYXRvcjogdGhpcy5ncm91cFNlcGFyYXRvciwgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgb25DYWxjaXRlUGFnaW5hdGlvbkNoYW5nZTogdGhpcy5oYW5kbGVQYWdpbmF0aW9uQ2hhbmdlLCBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwgc2NhbGU6IHRoaXMuc2NhbGUsIHN0YXJ0SXRlbTogMSwgdG90YWxJdGVtczogdGhpcy5ib2R5Um93cz8ubGVuZ3RoLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5wYWdpbmF0aW9uRWwgPSBlbCkgfSkpKTtcbiAgfVxuICByZW5kZXJUSGVhZCgpIHtcbiAgICByZXR1cm4gKGgoXCJ0aGVhZFwiLCBudWxsLCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLnRhYmxlSGVhZGVyLCBvblNsb3RjaGFuZ2U6IHRoaXMudXBkYXRlUm93cywgcmVmOiAoZWwpID0+ICh0aGlzLnRhYmxlSGVhZFNsb3RFbCA9IGVsKSB9KSkpO1xuICB9XG4gIHJlbmRlclRCb2R5KCkge1xuICAgIHJldHVybiAoaChcInRib2R5XCIsIG51bGwsIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLnVwZGF0ZVJvd3MsIHJlZjogKGVsKSA9PiAodGhpcy50YWJsZUJvZHlTbG90RWwgPSBlbCkgfSkpKTtcbiAgfVxuICByZW5kZXJURm9vdCgpIHtcbiAgICByZXR1cm4gKGgoXCJ0Zm9vdFwiLCBudWxsLCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLnRhYmxlRm9vdGVyLCBvblNsb3RjaGFuZ2U6IHRoaXMudXBkYXRlUm93cywgcmVmOiAoZWwpID0+ICh0aGlzLnRhYmxlRm9vdFNsb3RFbCA9IGVsKSB9KSkpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuY29udGFpbmVyIH0sIHRoaXMuc2VsZWN0aW9uTW9kZSAhPT0gXCJub25lXCIgJiYgdGhpcy5yZW5kZXJTZWxlY3Rpb25BcmVhKCksIGgoXCJkaXZcIiwgeyBjbGFzczoge1xuICAgICAgICBbQ1NTLmJvcmRlcmVkXTogdGhpcy5ib3JkZXJlZCxcbiAgICAgICAgW0NTUy56ZWJyYV06IHRoaXMuemVicmEsXG4gICAgICAgIFtDU1MudGFibGVDb250YWluZXJdOiB0cnVlLFxuICAgICAgfSB9LCBoKFwidGFibGVcIiwgeyBcImFyaWEtY29sY291bnRcIjogdGhpcy5jb2xDb3VudCwgXCJhcmlhLW11bHRpc2VsZWN0YWJsZVwiOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIiwgXCJhcmlhLXJlYWRvbmx5XCI6IHRydWUsIFwiYXJpYS1yb3djb3VudFwiOiB0aGlzLmFsbFJvd3M/Lmxlbmd0aCwgY2xhc3M6IHsgW0NTUy50YWJsZUZpeGVkXTogdGhpcy5sYXlvdXQgPT09IFwiZml4ZWRcIiB9LCByb2xlOiBcImdyaWRcIiB9LCBoKFwiY2FwdGlvblwiLCB7IGNsYXNzOiBDU1MuYXNzaXN0aXZlVGV4dCB9LCB0aGlzLmNhcHRpb24pLCB0aGlzLnJlbmRlclRIZWFkKCksIHRoaXMucmVuZGVyVEJvZHkoKSwgdGhpcy5yZW5kZXJURm9vdCgpKSksIHRoaXMucGFnZVNpemUgPiAwICYmIHRoaXMucmVuZGVyUGFnaW5hdGlvbkFyZWEoKSkpKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiZ3JvdXBTZXBhcmF0b3JcIjogW1wiaGFuZGxlTnVtYmVyZWRDaGFuZ2VcIl0sXG4gICAgXCJudW1iZXJlZFwiOiBbXCJoYW5kbGVOdW1iZXJlZENoYW5nZVwiXSxcbiAgICBcIm51bWJlcmluZ1N5c3RlbVwiOiBbXCJoYW5kbGVOdW1iZXJlZENoYW5nZVwiXSxcbiAgICBcInBhZ2VTaXplXCI6IFtcImhhbmRsZU51bWJlcmVkQ2hhbmdlXCJdLFxuICAgIFwic2NhbGVcIjogW1wiaGFuZGxlTnVtYmVyZWRDaGFuZ2VcIl0sXG4gICAgXCJzZWxlY3Rpb25Nb2RlXCI6IFtcImhhbmRsZU51bWJlcmVkQ2hhbmdlXCJdLFxuICAgIFwibWVzc2FnZU92ZXJyaWRlc1wiOiBbXCJvbk1lc3NhZ2VzQ2hhbmdlXCJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFtcImVmZmVjdGl2ZUxvY2FsZUNoYW5nZVwiXVxuICB9OyB9XG59O1xuVGFibGUuc3R5bGUgPSB0YWJsZUNzcztcblxuZXhwb3J0IHsgVGFibGUgYXMgY2FsY2l0ZV90YWJsZSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxjaXRlLXRhYmxlLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgZiBhcyBmb3JjZVVwZGF0ZSB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuXG5jb25zdCByZXNvbHZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIHNldHMgdXAgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGFiaWxpdHkgdG8ga25vdyB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnRXaWxsTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnRXaWxsTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0VXBMb2FkYWJsZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcHJvbWlzZU1hcC5zZXQoY29tcG9uZW50LCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZU1hcC5zZXQoY29tcG9uZW50LCByZXNvbHZlKSkpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGxldHMgdGhlIGxvYWRhYmxlIGNvbXBvbmVudCBrbm93IHRoYXQgaXQgaXMgbm93IGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50RGlkTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnREaWRMb2FkKCk6IHZvaWQge1xuICogICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmVzb2x2ZU1hcC5nZXQoY29tcG9uZW50KSgpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBTdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QuXG4gKlxuICogYGBgXG4gKiBhc3luYyBteU1ldGhvZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICogQHJldHVybnMgUHJvbWlzZTx2b2lkPlxuICovXG5mdW5jdGlvbiBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJldHVybiBwcm9taXNlTWFwLmdldChjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyaW5nIHRoZSBjb21wb25lbnQgaXMgbG9hZGVkIGFuZCByZW5kZXJlZCBieSB0aGUgYnJvd3NlciAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIFN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQgYW5kIGFueSBpbnRlcm5hbCBlbGVtZW50cyBhcmUgZm9jdXNhYmxlKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QgYW5kIHRoZW4gYW4gaW50ZXJuYWwgZWxlbWVudCBiZSBmb2N1c2VkLlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAqICAgdGhpcy5pbnRlcm5hbEVsZW1lbnQ/LmZvY3VzKCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbXBvbmVudEZvY3VzYWJsZShjb21wb25lbnQpIHtcbiAgYXdhaXQgY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCk7XG4gIGZvcmNlVXBkYXRlKGNvbXBvbmVudCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xufVxuXG5leHBvcnQgeyBzZXRDb21wb25lbnRMb2FkZWQgYXMgYSwgY29tcG9uZW50TG9hZGVkIGFzIGIsIGNvbXBvbmVudEZvY3VzYWJsZSBhcyBjLCBzZXRVcExvYWRhYmxlQ29tcG9uZW50IGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtYjE3Mzk2ZTAuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5pbXBvcnQgeyBhIGFzIGdldEFzc2V0UGF0aCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5cbmNvbnN0IGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZSA9IHt9O1xuYXN5bmMgZnVuY3Rpb24gZ2V0TWVzc2FnZUJ1bmRsZShsYW5nLCBjb21wb25lbnQpIHtcbiAgY29uc3Qga2V5ID0gYCR7Y29tcG9uZW50fV8ke2xhbmd9YDtcbiAgaWYgKGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xuICB9XG4gIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldID0gZmV0Y2goZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy8ke2NvbXBvbmVudH0vdDluL21lc3NhZ2VzXyR7bGFuZ30uanNvbmApKVxuICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgaWYgKCFyZXNwLm9rKSB7XG4gICAgICB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwLmpzb24oKTtcbiAgfSlcbiAgICAuY2F0Y2goKCkgPT4gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpKTtcbiAgcmV0dXJuIGNvbXBvbmVudExhbmdUb01lc3NhZ2VCdW5kbGVDYWNoZVtrZXldO1xufVxuZnVuY3Rpb24gdGhyb3dNZXNzYWdlRmV0Y2hFcnJvcigpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGZldGNoIGNvbXBvbmVudCBtZXNzYWdlIGJ1bmRsZVwiKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5tZXNzYWdlcyA9IHtcbiAgICAuLi5jb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzLFxuICAgIC4uLmNvbXBvbmVudC5tZXNzYWdlT3ZlcnJpZGVzLFxuICB9O1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCB0aGUgbWVzc2FnZXMgdXNlZCBieSB0aGUgY29tcG9uZW50LiBJdCBzaG91bGQgYmUgYXdhaXRlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNldFVwTWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMgPSBhd2FpdCBmZXRjaE1lc3NhZ2VzKGNvbXBvbmVudCwgY29tcG9uZW50LmVmZmVjdGl2ZUxvY2FsZSk7XG4gIG1lcmdlTWVzc2FnZXMoY29tcG9uZW50KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKSB7XG4gIGNvbnN0IHsgZWwgfSA9IGNvbXBvbmVudDtcbiAgY29uc3QgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnLnJlcGxhY2UoXCJjYWxjaXRlLVwiLCBcIlwiKTtcbiAgcmV0dXJuIGdldE1lc3NhZ2VCdW5kbGUoZ2V0U3VwcG9ydGVkTG9jYWxlKGxhbmcsIFwidDluXCIpLCBjb21wb25lbnROYW1lKTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IG11c3QgYmUgc2V0IHVwIGZvciB0aGUgY29tcG9uZW50IHRvIHVwZGF0ZSBpdHMgZGVmYXVsdCBtZXNzYWdlIGJ1bmRsZSBpZiB0aGUgbG9jYWxlIGNoYW5nZXMuXG4gKlxuICogSXQgY2FuIGJlIHNldCB1cCBpbiAqKmVpdGhlcioqIG9mIHRoZSBmb2xsb3dpbmcgd2F5czpcbiAqXG4gKiAxLiBjYWxsZWQgZnJvbSBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBvbkxvY2FsZUNoYW5nZWAgbWV0aG9kIG9yXG4gKiAyLiBjYWxsZWQgZnJvbSBhIHdhdGNoZXIgY29uZmlndXJlZCB0byB3YXRjaCBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBlZmZlY3RpdmVMb2NhbGVgIHByb3BcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gbGFuZ1xuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBsYW5nKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgc2V0cyB1cCBpbnRlcm5hbHMgZm9yIG1lc3NhZ2VzIHN1cHBvcnQuXG4gKlxuICogSXQgbmVlZHMgdG8gYmUgY2FsbGVkIGluIGBjb25uZWN0ZWRDYWxsYmFja2BcbiAqXG4gKiAqKk5vdGUqKjogdGhpcyBtdXN0IGJlIGNhbGxlZCBhZnRlciBgTG9jYWxpemVkQ29tcG9uZW50YCdzIGBjb25uZWN0TG9jYWxpemVkYCBtZXRob2QuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2U7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSB0ZWFycyBkb3duIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gZGlzY29ubmVjdE1lc3NhZ2VzKGNvbXBvbmVudCkge1xuICBjb21wb25lbnQub25NZXNzYWdlc0NoYW5nZSA9IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRPbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICBtZXJnZU1lc3NhZ2VzKHRoaXMpO1xufVxuXG5leHBvcnQgeyBjb25uZWN0TWVzc2FnZXMgYXMgYywgZGlzY29ubmVjdE1lc3NhZ2VzIGFzIGQsIHNldFVwTWVzc2FnZXMgYXMgcywgdXBkYXRlTWVzc2FnZXMgYXMgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10OW4tMGJjZGNhNTQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9