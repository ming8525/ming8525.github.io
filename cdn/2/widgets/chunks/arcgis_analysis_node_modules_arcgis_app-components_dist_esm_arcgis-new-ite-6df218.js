"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-6df218"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-bdfs-cloud.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-bdfs-cloud.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_select_bdfs_cloud: () => (/* binding */ ArcgisNewItemPagesDataStoreSelectBdfsCloud)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-store-e2ae6a67.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e2ae6a67.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./data-store-8e83fb7a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8e83fb7a.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


































const arcgisNewItemPagesDataStoreSelectBdfsCloudCss = ".input-label{margin-top:1.25rem}.tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}";

const ArcgisNewItemPagesDataStoreSelectBdfsCloud = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.cloudTypes = ["new", "existing"];
        this.cloudProviders = [
            "amazon",
            "azure",
            "azuredatalakegen2store"
        ];
        this.handleSelectCloudStore = async (e) => {
            const datastoreName = e.target.value;
            // if a data store is unselected
            if (!datastoreName) {
                this.selectedExistingCloudStore = null;
                return;
            }
            const cloudStoreList = this.existingCloudStoreList;
            let selectedCloudStore = cloudStoreList.find((existingCloudStoreItem) => {
                return existingCloudStoreItem.title === datastoreName;
            });
            const selectedCloudStoreId = selectedCloudStore === null || selectedCloudStore === void 0 ? void 0 : selectedCloudStore.id;
            const result = await (0,_data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_3__.r)(selectedCloudStoreId);
            this.selectedExistingCloudStore = {
                id: result.id,
                path: result.path,
                provider: result.provider
            };
        };
        this.selectedCloudProvider = null;
        this.selectedCloudType = "new";
        this.selectedExistingCloudStore = null;
        this.existingCloudStoreList = undefined;
        this.error = null;
    }
    async componentWillLoad() {
        this.existingCloudStoreList = (await (0,_data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_3__.b)()).result;
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_1__.u.i18n.dataStoreSelectBdfs;
        this.selectedCloudType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType || null;
        if (_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType === "new") {
            this.selectedCloudProvider = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudProvider;
        }
        else if (_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType === "existing") {
            this.selectedExistingCloudStore = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsExistingDatastore;
        }
    }
    handleNext() {
        const { selectedCloudProvider, selectedCloudType, selectedExistingCloudStore } = this;
        if (selectedCloudType === "existing" && !selectedExistingCloudStore) {
            this.error = "noDataStoreSelected";
            return;
        }
        if (selectedCloudType === "new" && !selectedCloudProvider) {
            this.error = "noCloudSelected";
            return;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudType = selectedCloudType;
        if (selectedCloudType === "new") {
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsCloudProvider = selectedCloudProvider;
            this.newItemUpdatePage.emit("dataStoreSelectCloudCredentials");
        }
        else if (selectedCloudType === "existing") {
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.bdfsExistingDatastore = selectedExistingCloudStore;
            this.newItemUpdatePage.emit("dataStoreSelectServerList");
        }
    }
    createCloudStoreListForDisplay() {
        const { existingCloudStoreList, selectedExistingCloudStore } = this;
        return existingCloudStoreList.map((item) => {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox-item", { key: item.id, id: item.id, textLabel: item.title, value: item.title, selected: item.id === (selectedExistingCloudStore === null || selectedExistingCloudStore === void 0 ? void 0 : selectedExistingCloudStore.id) }, item.title));
        });
    }
    render() {
        const { i18n, cloudTypes, cloudProviders, selectedCloudProvider, selectedCloudType, error } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSelectType, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select-group" }, cloudTypes.map((key) => {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: key, class: "tile-select", checked: selectedCloudType === key, heading: i18n.cloudTypes[key], name: "cloud-type-selection", "input-enabled": true, width: "full", type: "radio", value: key, onCalciteTileSelectChange: (e) => {
                    this.selectedCloudType = e.target.value;
                } }));
        })))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, selectedCloudType === "new" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSelectProvider, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select-group" }, cloudProviders.map((key) => {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: key, class: "tile-select", checked: selectedCloudProvider === key, heading: i18n.bdfsCloudProviders[key], name: "cloud-provider-selection", "input-enabled": true, width: "full", type: "radio", value: key, onCalciteTileSelectChange: (e) => {
                    this.selectedCloudProvider = e.target.value;
                } }));
        })))), selectedCloudType === "existing" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.cloudSearch, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox", { id: "existing-data-store", scale: "m", label: "Single selection-mode combobox", selectionMode: "single", onCalciteComboboxChange: this.handleSelectCloudStore, placeholder: i18n.cloudSearchPlaceholder }, this.createCloudStoreListForDisplay())))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error && i18n.errors[error].heading, description: error && i18n.errors[error].description, active: error !== null, onAlertDismiss: () => {
                this.error = null;
            } })));
    }
};
ArcgisNewItemPagesDataStoreSelectBdfsCloud.style = arcgisNewItemPagesDataStoreSelectBdfsCloudCss;



//# sourceMappingURL=arcgis-new-item-pages-data-store-select-bdfs-cloud.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtNmRmMjE4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNpRjtBQUM1QjtBQUNNO0FBQ3VDO0FBQ3JFO0FBQ0M7QUFDSztBQUNMO0FBQ0g7QUFDTztBQUNIO0FBQ0c7QUFDRztBQUNFO0FBQ0Y7QUFDVDtBQUNLO0FBQ0w7QUFDQztBQUNGO0FBQ0c7QUFDSDtBQUNDO0FBQ087QUFDUDtBQUNNO0FBQ0E7QUFDRztBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLG9FQUFvRSxtQkFBbUIsbUJBQW1CLG1CQUFtQixhQUFhLHVCQUF1Qjs7QUFFaks7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGlDQUFpQywwREFBcUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMERBQXFCO0FBQ2xFLG9CQUFvQiw4Q0FBWTtBQUNoQyxpQ0FBaUMsb0RBQVk7QUFDN0MsWUFBWSxvREFBWTtBQUN4Qix5Q0FBeUMsb0RBQVk7QUFDckQ7QUFDQSxpQkFBaUIsb0RBQVk7QUFDN0IsOENBQThDLG9EQUFZO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RUFBdUU7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0RBQVk7QUFDcEI7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0RBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQXFEO0FBQ3JFO0FBQ0Esb0JBQW9CLHFEQUFDLDRCQUE0QixvTkFBb047QUFDclEsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0Isb0ZBQW9GO0FBQ3BHLGdCQUFnQixxREFBQyxjQUFjLHFEQUFDLFVBQVUsc0JBQXNCLEVBQUUscURBQUMsOENBQThDLHFEQUFDLGdDQUFnQyxnREFBZ0Q7QUFDbE0sb0JBQW9CLHFEQUFDLDBCQUEwQjtBQUMvQztBQUNBLG1CQUFtQjtBQUNuQixTQUFTLE1BQU0scURBQUMsVUFBVSxzQkFBc0Isa0NBQWtDLHFEQUFDLGtEQUFrRCxxREFBQyxnQ0FBZ0MsZ0RBQWdEO0FBQ3ROLG9CQUFvQixxREFBQywwQkFBMEI7QUFDL0M7QUFDQSxtQkFBbUI7QUFDbkIsU0FBUywyQ0FBMkMscURBQUMsMENBQTBDLHFEQUFDLHVCQUF1Qix5TUFBeU0sNkNBQTZDLHFEQUFDLDRCQUE0QjtBQUMxWTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRTRHOztBQUU1RyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kYXRhLXN0b3JlLXNlbGVjdC1iZGZzLWNsb3VkLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoIH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktYmNhN2JjZDEuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcbmltcG9ydCB7IHIgYXMgcmVxdWVzdENsb3VkU3RvcmVJbmZvLCBiIGFzIHJlcXVlc3RDbG91ZFN0b3JlTGlzdCB9IGZyb20gJy4vZGF0YS1zdG9yZS1lMmFlNmE2Ny5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCAnLi9zZXJ2aWNlLThjMmM0MjQxLmpzJztcbmltcG9ydCAnLi9kYXRhLXN0b3JlLThlODNmYjdhLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTU3M2JiNDczLmpzJztcbmltcG9ydCAnLi9pdGVtLXByb3BlcnRpZXMtMTA0OTFiMmUuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNzlmYjMwMmMuanMnO1xuaW1wb3J0ICcuL2d1aWQtYWVhZWQ4NGQuanMnO1xuaW1wb3J0ICcuL3RodW1ibmFpbC1iY2I4OWU2OS5qcyc7XG5pbXBvcnQgJy4vdXNlci0zZWE2OWMzYS5qcyc7XG5pbXBvcnQgJy4vcXVlcnktZDYyNjYwZDQuanMnO1xuaW1wb3J0ICcuL2FwaS0yZTNhMTM2Zi5qcyc7XG5pbXBvcnQgJy4vc3RyaW5nLTU4YTVmZWYzLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tYzU4ZmZjZWQuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLThkMzg0Nzk2LmpzJztcbmltcG9ydCAnLi9pdGVtLTM1MzU1NTJkLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTgxMzczZjZkLmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLTIwMjliMDZiLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTE3YjY0OTQ2LmpzJztcbmltcG9ydCAnLi9hZ3MtZWI0NThhMDMuanMnO1xuaW1wb3J0ICcuL3VybC0zNTg3NWExMC5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS0wMzUzYTc2OS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1iZjhhYjkwZi5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtNmE4OGU2YzUuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVTZWxlY3RCZGZzQ2xvdWRDc3MgPSBcIi5pbnB1dC1sYWJlbHttYXJnaW4tdG9wOjEuMjVyZW19LnRpbGUtc2VsZWN0LWdyb3Vwe21hcmdpbi10b3A6MS4yNXJlbX0udGlsZS1zZWxlY3R7bWFyZ2luLWJvdHRvbTowLjEyNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0QmRmc0Nsb3VkID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMuY2xvdWRUeXBlcyA9IFtcIm5ld1wiLCBcImV4aXN0aW5nXCJdO1xuICAgICAgICB0aGlzLmNsb3VkUHJvdmlkZXJzID0gW1xuICAgICAgICAgICAgXCJhbWF6b25cIixcbiAgICAgICAgICAgIFwiYXp1cmVcIixcbiAgICAgICAgICAgIFwiYXp1cmVkYXRhbGFrZWdlbjJzdG9yZVwiXG4gICAgICAgIF07XG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0Q2xvdWRTdG9yZSA9IGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhc3RvcmVOYW1lID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAvLyBpZiBhIGRhdGEgc3RvcmUgaXMgdW5zZWxlY3RlZFxuICAgICAgICAgICAgaWYgKCFkYXRhc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2xvdWRTdG9yZUxpc3QgPSB0aGlzLmV4aXN0aW5nQ2xvdWRTdG9yZUxpc3Q7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRDbG91ZFN0b3JlID0gY2xvdWRTdG9yZUxpc3QuZmluZCgoZXhpc3RpbmdDbG91ZFN0b3JlSXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0Nsb3VkU3RvcmVJdGVtLnRpdGxlID09PSBkYXRhc3RvcmVOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENsb3VkU3RvcmVJZCA9IHNlbGVjdGVkQ2xvdWRTdG9yZSA9PT0gbnVsbCB8fCBzZWxlY3RlZENsb3VkU3RvcmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGVjdGVkQ2xvdWRTdG9yZS5pZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3RDbG91ZFN0b3JlSW5mbyhzZWxlY3RlZENsb3VkU3RvcmVJZCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID0ge1xuICAgICAgICAgICAgICAgIGlkOiByZXN1bHQuaWQsXG4gICAgICAgICAgICAgICAgcGF0aDogcmVzdWx0LnBhdGgsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IHJlc3VsdC5wcm92aWRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENsb3VkUHJvdmlkZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2xvdWRUeXBlID0gXCJuZXdcIjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXhpc3RpbmdDbG91ZFN0b3JlTGlzdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLmV4aXN0aW5nQ2xvdWRTdG9yZUxpc3QgPSAoYXdhaXQgcmVxdWVzdENsb3VkU3RvcmVMaXN0KCkpLnJlc3VsdDtcbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGF0YVN0b3JlU2VsZWN0QmRmcztcbiAgICAgICAgdGhpcy5zZWxlY3RlZENsb3VkVHlwZSA9IGFkZEl0ZW1TdGF0ZS5iZGZzQ2xvdWRUeXBlIHx8IG51bGw7XG4gICAgICAgIGlmIChhZGRJdGVtU3RhdGUuYmRmc0Nsb3VkVHlwZSA9PT0gXCJuZXdcIikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENsb3VkUHJvdmlkZXIgPSBhZGRJdGVtU3RhdGUuYmRmc0Nsb3VkUHJvdmlkZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWRkSXRlbVN0YXRlLmJkZnNDbG91ZFR5cGUgPT09IFwiZXhpc3RpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSA9IGFkZEl0ZW1TdGF0ZS5iZGZzRXhpc3RpbmdEYXRhc3RvcmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTmV4dCgpIHtcbiAgICAgICAgY29uc3QgeyBzZWxlY3RlZENsb3VkUHJvdmlkZXIsIHNlbGVjdGVkQ2xvdWRUeXBlLCBzZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGVjdGVkQ2xvdWRUeXBlID09PSBcImV4aXN0aW5nXCIgJiYgIXNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJub0RhdGFTdG9yZVNlbGVjdGVkXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGVkQ2xvdWRUeXBlID09PSBcIm5ld1wiICYmICFzZWxlY3RlZENsb3VkUHJvdmlkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBcIm5vQ2xvdWRTZWxlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5iZGZzQ2xvdWRUeXBlID0gc2VsZWN0ZWRDbG91ZFR5cGU7XG4gICAgICAgIGlmIChzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJuZXdcIikge1xuICAgICAgICAgICAgYWRkSXRlbVN0YXRlLmJkZnNDbG91ZFByb3ZpZGVyID0gc2VsZWN0ZWRDbG91ZFByb3ZpZGVyO1xuICAgICAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZGF0YVN0b3JlU2VsZWN0Q2xvdWRDcmVkZW50aWFsc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJleGlzdGluZ1wiKSB7XG4gICAgICAgICAgICBhZGRJdGVtU3RhdGUuYmRmc0V4aXN0aW5nRGF0YXN0b3JlID0gc2VsZWN0ZWRFeGlzdGluZ0Nsb3VkU3RvcmU7XG4gICAgICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJkYXRhU3RvcmVTZWxlY3RTZXJ2ZXJMaXN0XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUNsb3VkU3RvcmVMaXN0Rm9yRGlzcGxheSgpIHtcbiAgICAgICAgY29uc3QgeyBleGlzdGluZ0Nsb3VkU3RvcmVMaXN0LCBzZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZSB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQ2xvdWRTdG9yZUxpc3QubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWNvbWJvYm94LWl0ZW1cIiwgeyBrZXk6IGl0ZW0uaWQsIGlkOiBpdGVtLmlkLCB0ZXh0TGFiZWw6IGl0ZW0udGl0bGUsIHZhbHVlOiBpdGVtLnRpdGxlLCBzZWxlY3RlZDogaXRlbS5pZCA9PT0gKHNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID09PSBudWxsIHx8IHNlbGVjdGVkRXhpc3RpbmdDbG91ZFN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZEV4aXN0aW5nQ2xvdWRTdG9yZS5pZCkgfSwgaXRlbS50aXRsZSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGNsb3VkVHlwZXMsIGNsb3VkUHJvdmlkZXJzLCBzZWxlY3RlZENsb3VkUHJvdmlkZXIsIHNlbGVjdGVkQ2xvdWRUeXBlLCBlcnJvciB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbnB1dC1sYWJlbFwiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIG51bGwsIGkxOG4uY2xvdWRTZWxlY3RUeXBlLCBoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdC1ncm91cFwiLCB7IGxheW91dDogXCJ2ZXJ0aWNhbFwiLCBjbGFzczogXCJ0aWxlLXNlbGVjdC1ncm91cFwiIH0sIGNsb3VkVHlwZXMubWFwKChrZXkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoaChcImNhbGNpdGUtdGlsZS1zZWxlY3RcIiwgeyBrZXk6IGtleSwgY2xhc3M6IFwidGlsZS1zZWxlY3RcIiwgY2hlY2tlZDogc2VsZWN0ZWRDbG91ZFR5cGUgPT09IGtleSwgaGVhZGluZzogaTE4bi5jbG91ZFR5cGVzW2tleV0sIG5hbWU6IFwiY2xvdWQtdHlwZS1zZWxlY3Rpb25cIiwgXCJpbnB1dC1lbmFibGVkXCI6IHRydWUsIHdpZHRoOiBcImZ1bGxcIiwgdHlwZTogXCJyYWRpb1wiLCB2YWx1ZToga2V5LCBvbkNhbGNpdGVUaWxlU2VsZWN0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2xvdWRUeXBlID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIH0pKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5wdXQtbGFiZWxcIiB9LCBzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJuZXdcIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgbnVsbCwgaTE4bi5jbG91ZFNlbGVjdFByb3ZpZGVyLCBoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdC1ncm91cFwiLCB7IGxheW91dDogXCJ2ZXJ0aWNhbFwiLCBjbGFzczogXCJ0aWxlLXNlbGVjdC1ncm91cFwiIH0sIGNsb3VkUHJvdmlkZXJzLm1hcCgoa2V5KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0XCIsIHsga2V5OiBrZXksIGNsYXNzOiBcInRpbGUtc2VsZWN0XCIsIGNoZWNrZWQ6IHNlbGVjdGVkQ2xvdWRQcm92aWRlciA9PT0ga2V5LCBoZWFkaW5nOiBpMThuLmJkZnNDbG91ZFByb3ZpZGVyc1trZXldLCBuYW1lOiBcImNsb3VkLXByb3ZpZGVyLXNlbGVjdGlvblwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBrZXksIG9uQ2FsY2l0ZVRpbGVTZWxlY3RDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDbG91ZFByb3ZpZGVyID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIH0pKSkpLCBzZWxlY3RlZENsb3VkVHlwZSA9PT0gXCJleGlzdGluZ1wiICYmIChoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLmNsb3VkU2VhcmNoLCBoKFwiY2FsY2l0ZS1jb21ib2JveFwiLCB7IGlkOiBcImV4aXN0aW5nLWRhdGEtc3RvcmVcIiwgc2NhbGU6IFwibVwiLCBsYWJlbDogXCJTaW5nbGUgc2VsZWN0aW9uLW1vZGUgY29tYm9ib3hcIiwgc2VsZWN0aW9uTW9kZTogXCJzaW5nbGVcIiwgb25DYWxjaXRlQ29tYm9ib3hDaGFuZ2U6IHRoaXMuaGFuZGxlU2VsZWN0Q2xvdWRTdG9yZSwgcGxhY2Vob2xkZXI6IGkxOG4uY2xvdWRTZWFyY2hQbGFjZWhvbGRlciB9LCB0aGlzLmNyZWF0ZUNsb3VkU3RvcmVMaXN0Rm9yRGlzcGxheSgpKSkpKSwgaChcImFyY2dpcy1uZXctaXRlbS1hbGVydFwiLCB7IGhlYWRpbmc6IGVycm9yICYmIGkxOG4uZXJyb3JzW2Vycm9yXS5oZWFkaW5nLCBkZXNjcmlwdGlvbjogZXJyb3IgJiYgaTE4bi5lcnJvcnNbZXJyb3JdLmRlc2NyaXB0aW9uLCBhY3RpdmU6IGVycm9yICE9PSBudWxsLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgfSB9KSkpO1xuICAgIH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVTZWxlY3RCZGZzQ2xvdWQuc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVTZWxlY3RCZGZzQ2xvdWRDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdEJkZnNDbG91ZCBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZGF0YV9zdG9yZV9zZWxlY3RfYmRmc19jbG91ZCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtZGF0YS1zdG9yZS1zZWxlY3QtYmRmcy1jbG91ZC5lbnRyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=