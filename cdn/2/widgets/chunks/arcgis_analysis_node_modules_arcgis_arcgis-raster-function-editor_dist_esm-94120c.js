"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-94120c"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-tree.entry.js":
/*!**************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-tree.entry.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_tree: () => (/* binding */ RfxTree)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
















const rfxTreeCss = ":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}:host{overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth;height:100%;width:100%}";

const RfxTree = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxTreeValueChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxTreeValueChange", 7);
        /**
         * @category Public
         * @type {string[]}
         * @description
         * Indicates which tree items are expanded.
         */
        this.treeItemsOpen = new Set();
        /**
         * handle mutations to the tree
         * @category private
         * @param {MutationRecord[]} mutations
         * @returns {void}
         */
        this.handleMutations = (mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === "attributes" && mutation.attributeName === "expanded") {
                    const target = mutation.target;
                    if ("key" in target.dataset && target.dataset.key !== undefined) {
                        const previousState = this.treeItemsOpen.has(target.dataset.key);
                        if (previousState !== target.expanded) {
                            this.toggleTreeItem(target.dataset.key);
                        }
                    }
                }
            });
        };
        /**
         * Helper function to toggle expanded/open tree items
         * @param {string} key - key of the tree item
         * @category private
         */
        this.toggleTreeItem = (key) => {
            if (this.treeItemsOpen.has(key)) {
                this.treeItemsOpen.delete(key);
            }
            else {
                this.treeItemsOpen.add(key);
            }
            this.buildJSXTree();
        };
        this.data = {};
        this.value = undefined;
        this.renderedTree = [];
    }
    onDataChange() {
        this.setupComponent();
    }
    componentWillLoad() {
        this.setupComponent();
    }
    /**
     * @category Lifecycle
     */
    componentDidLoad() {
        this.setupObserver();
    }
    /**
     * @category Lifecycle
     */
    disconnectedCallback() {
        this.observer?.disconnect();
    }
    /**
     * @category private
     */
    setupComponent() {
        // Reset the tree, assume all items are closed
        this.treeItemsOpen.clear();
        // Build the tree
        this.buildJSXTree();
    }
    /**
     * @category Private
     * @description
     */
    setupObserver() {
        // create observer to track expansion of tree items
        this.observer = new MutationObserver(this.handleMutations);
        const target = this.hostElement.shadowRoot ?? this.hostElement;
        this.observer.observe(target, {
            attributes: true,
            subtree: true,
            attributeFilter: ["expanded"]
        });
    }
    /**
     * @category Private
     * @returns {void}
     * @description
     * Builds the tree from the data object, updates this.renderedTree param
     */
    buildJSXTree() {
        const buildJSXTreeRecursive = (subData) => {
            const elements = [];
            for (const key in subData) {
                const value = subData[key];
                let children = undefined;
                if (typeof value === "object") {
                    // If it's an object and expanded recurse over children, otherwise add a placeholder
                    children = this.treeItemsOpen.has(key)
                        ? buildJSXTreeRecursive(value)
                        : [this.createTreeItem("placeholder", "placeholder")];
                }
                const treeValue = typeof value === "object" ? key : value;
                elements.push(this.createTreeItem(key, treeValue, children));
            }
            return elements;
        };
        this.renderedTree = buildJSXTreeRecursive(this.data);
    }
    /**
     * @category Private
     * @param {string} key - key of the tree item
     * @param {string} value - value of the tree item
     * @param {h.Element[] | undefined} children - children of the tree item (if any)
     * @returns {h.Element} - tree item element with children
     * @description
     * Used to create a tree item element with children.
     */
    createTreeItem(key, value, children) {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree-item", { key: `${key}-item`, "data-key": key, selected: this.value === key, "aria-selected": this.value === key, expanded: this.treeItemsOpen.has(key), "aria-expanded": this.treeItemsOpen.has(key), onClick: children !== undefined ? () => this.toggleTreeItem(key) : undefined }, value, children !== undefined && ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree", { key: `${key}-child-tree`, slot: "children" }, children))));
    }
    /**
     * @category private
     * @param {CustomEvent} event - calcite-tree-select event
     * @description
     * Updates component value with selected item
     */
    handleTreeSelect(event) {
        const treeEl = event.target;
        const selectedKey = treeEl?.selectedItems[0]?.dataset.key;
        if (selectedKey !== undefined) {
            // This should never happen, but if it does, we want to fix it
            if (selectedKey.includes("placeholder") === true) {
                const parentKey = treeEl?.selectedItems[0].parentElement?.dataset.key;
                if (parentKey !== undefined) {
                    this.treeItemsOpen.add(parentKey);
                }
                // trigger re-render to replace placeholder with expected children
                this.buildJSXTree();
            }
            else {
                this.value = selectedKey;
                this.rfxTreeValueChange.emit();
            }
        }
    }
    /**
     * @category lifecycle
     * @description
     * Renders the component
     */
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree", { key: "base-tree", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale, onCalciteTreeSelect: (event) => this.handleTreeSelect(event) }, this.renderedTree))));
    }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
    static get watchers() { return {
        "data": ["onDataChange"]
    }; }
};
RfxTree.style = rfxTreeCss;



//# sourceMappingURL=rfx-tree.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfZGlzdF9lc20tOTQxMjBjLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkc7QUFDMUU7QUFDc0I7QUFDUDtBQUNYO0FBQ0Q7QUFDTztBQUNrQjtBQUM5QjtBQUMwQjtBQUNGO0FBQzFCO0FBQ087QUFDSztBQUNBOztBQUUzQywwQkFBMEIsOEJBQThCLG9DQUFvQyxvQ0FBb0Msb0NBQW9DLHVDQUF1Qyx1Q0FBdUMsc0NBQXNDLDRDQUE0Qyw0Q0FBNEMsbUNBQW1DLHFDQUFxQyxxQ0FBcUMscUNBQXFDLCtCQUErQiwrQkFBK0IsK0JBQStCLHFDQUFxQyxrQ0FBa0MsaUNBQWlDLGlDQUFpQyxpQ0FBaUMscUNBQXFDLDhCQUE4QiwwQkFBMEIsb0NBQW9DLHdCQUF3QixtQ0FBbUMsb0RBQW9ELHNDQUFzQyxzQ0FBc0Msa0NBQWtDLGlDQUFpQyxNQUFNLGdCQUFnQixrQkFBa0IsdUJBQXVCLFlBQVksV0FBVzs7QUFFOXRDO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4QixrQ0FBa0MscURBQVc7QUFDN0M7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckMscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsZUFBZSx5QkFBeUI7QUFDeEMsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQUMsd0JBQXdCLFFBQVEsSUFBSSwrUEFBK1Asb0NBQW9DLHFEQUFDLG1CQUFtQixRQUFRLElBQUksZ0NBQWdDO0FBQ3haO0FBQ0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsY0FBYyxxREFBQyxtQkFBbUIseUJBQXlCLG9EQUFVLHNFQUFzRTtBQUMxSztBQUNBLHdCQUF3QixPQUFPLHFEQUFVO0FBQ3pDLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFK0I7O0FBRS9COzs7Ozs7Ozs7Ozs7Ozs7O0FDMUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOEU7O0FBRTlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LXRyZWUuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vdWktdXRpbHMtOTI4YTQwOTYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGEgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCB7IFUgYXMgVUlEZWZhdWx0cyB9IGZyb20gJy4vdWktdXRpbHMtOTI4YTQwOTYuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvaWRlbnRpdHkvSWRlbnRpdHlNYW5hZ2VyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BbGdvcml0aG1pY0NvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvTXVsdGlwYXJ0Q29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL0NvbG9yLmpzJztcbmltcG9ydCAnLi9jb2xvclJhbXBVdGlscy04YmRkNDZjNS5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L2dlb3Byb2Nlc3Nvci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9wb3J0YWwvUG9ydGFsSXRlbS5qcyc7XG5cbmNvbnN0IHJmeFRyZWVDc3MgPSBcIjpyb290ey0tY2FsY2l0ZS1jb2xvci1icmFuZDojMDA3YWMyOy0tY2FsY2l0ZS1jb2xvci1icmFuZC1ob3ZlcjojMDA2MTliOy0tY2FsY2l0ZS1jb2xvci1icmFuZC1wcmVzczojMDA0ODc0Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtaW5mbzojMDA2MTliOy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtc3VjY2VzczojMzVhYzQ2Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtd2FybmluZzojZWRkMzE3Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyOiNkODMwMjA7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXItaG92ZXI6I2E4MmIxZTstLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlci1wcmVzczojN2MxZDEzOy0tY2FsY2l0ZS1jb2xvci1iYWNrZ3JvdW5kOiNmOGY4Zjg7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMTojZmZmZmZmOy0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTI6I2YzZjNmMzstLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zOiNlYWVhZWE7LS1jYWxjaXRlLWNvbG9yLXRleHQtMTojMTUxNTE1Oy0tY2FsY2l0ZS1jb2xvci10ZXh0LTI6IzRhNGE0YTstLWNhbGNpdGUtY29sb3ItdGV4dC0zOiM2YTZhNmE7LS1jYWxjaXRlLWNvbG9yLXRleHQtaW52ZXJzZTojZmZmZmZmOy0tY2FsY2l0ZS1jb2xvci10ZXh0LWxpbms6IzAwNjE5YjstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTE6I2NhY2FjYTstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTI6I2Q0ZDRkNDstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTM6I2RmZGZkZjstLWNhbGNpdGUtY29sb3ItYm9yZGVyLWlucHV0OiM5NDk0OTQ7LS1yZngtcXVhcnRlci1zcGFjaW5nOjAuMjVyZW07LS1yZngtaGFsZi1zcGFjaW5nOjAuNXJlbTstLXJmeC10aHJlZS1xdWFydGVyLXNwYWNpbmc6MC43NXJlbTstLXJmeC1mdWxsLXNwYWNpbmc6MXJlbTstLXJmeC1jb21wb25lbnQtZGVmYXVsdC13aWR0aDoxMDAlOy0tcmZ4LXVpLWJvcmRlci1pbnB1dDp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0yKTstLXJmeC1wb3BvdmVyLWNvbnRlbnQtbWluLWhlaWdodDozMHZoOy0tcmZ4LXBvcG92ZXItY29udGVudC1tYXgtaGVpZ2h0OjYwdmg7LS1yZngtcG9wb3Zlci1jb250ZW50LWhlaWdodDo0NXZoOy0tcmZ4LXdpZGdldC1jb250ZW50LWhlaWdodDozMHZofTpob3N0e292ZXJmbG93LXk6YXV0bztvdmVyZmxvdy14OmhpZGRlbjtzY3JvbGwtYmVoYXZpb3I6c21vb3RoO2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9XCI7XG5cbmNvbnN0IFJmeFRyZWUgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLnJmeFRyZWVWYWx1ZUNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwicmZ4VHJlZVZhbHVlQ2hhbmdlXCIsIDcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNhdGVnb3J5IFB1YmxpY1xuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nW119XG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBJbmRpY2F0ZXMgd2hpY2ggdHJlZSBpdGVtcyBhcmUgZXhwYW5kZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyZWVJdGVtc09wZW4gPSBuZXcgU2V0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBoYW5kbGUgbXV0YXRpb25zIHRvIHRoZSB0cmVlXG4gICAgICAgICAqIEBjYXRlZ29yeSBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7TXV0YXRpb25SZWNvcmRbXX0gbXV0YXRpb25zXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVNdXRhdGlvbnMgPSAobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJhdHRyaWJ1dGVzXCIgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gXCJleHBhbmRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG11dGF0aW9uLnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwia2V5XCIgaW4gdGFyZ2V0LmRhdGFzZXQgJiYgdGFyZ2V0LmRhdGFzZXQua2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSB0aGlzLnRyZWVJdGVtc09wZW4uaGFzKHRhcmdldC5kYXRhc2V0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNTdGF0ZSAhPT0gdGFyZ2V0LmV4cGFuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVUcmVlSXRlbSh0YXJnZXQuZGF0YXNldC5rZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gdG9nZ2xlIGV4cGFuZGVkL29wZW4gdHJlZSBpdGVtc1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0ga2V5IG9mIHRoZSB0cmVlIGl0ZW1cbiAgICAgICAgICogQGNhdGVnb3J5IHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9nZ2xlVHJlZUl0ZW0gPSAoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50cmVlSXRlbXNPcGVuLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlSXRlbXNPcGVuLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmVlSXRlbXNPcGVuLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5idWlsZEpTWFRyZWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRUcmVlID0gW107XG4gICAgfVxuICAgIG9uRGF0YUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXR1cENvbXBvbmVudCgpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cENvbXBvbmVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgTGlmZWN5Y2xlXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cE9ic2VydmVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBjYXRlZ29yeSBMaWZlY3ljbGVcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgcHJpdmF0ZVxuICAgICAqL1xuICAgIHNldHVwQ29tcG9uZW50KCkge1xuICAgICAgICAvLyBSZXNldCB0aGUgdHJlZSwgYXNzdW1lIGFsbCBpdGVtcyBhcmUgY2xvc2VkXG4gICAgICAgIHRoaXMudHJlZUl0ZW1zT3Blbi5jbGVhcigpO1xuICAgICAgICAvLyBCdWlsZCB0aGUgdHJlZVxuICAgICAgICB0aGlzLmJ1aWxkSlNYVHJlZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgUHJpdmF0ZVxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqL1xuICAgIHNldHVwT2JzZXJ2ZXIoKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBvYnNlcnZlciB0byB0cmFjayBleHBhbnNpb24gb2YgdHJlZSBpdGVtc1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5oYW5kbGVNdXRhdGlvbnMpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmhvc3RFbGVtZW50LnNoYWRvd1Jvb3QgPz8gdGhpcy5ob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRhcmdldCwge1xuICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgICAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcImV4cGFuZGVkXCJdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgUHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIEJ1aWxkcyB0aGUgdHJlZSBmcm9tIHRoZSBkYXRhIG9iamVjdCwgdXBkYXRlcyB0aGlzLnJlbmRlcmVkVHJlZSBwYXJhbVxuICAgICAqL1xuICAgIGJ1aWxkSlNYVHJlZSgpIHtcbiAgICAgICAgY29uc3QgYnVpbGRKU1hUcmVlUmVjdXJzaXZlID0gKHN1YkRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdWJEYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzdWJEYXRhW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhbiBvYmplY3QgYW5kIGV4cGFuZGVkIHJlY3Vyc2Ugb3ZlciBjaGlsZHJlbiwgb3RoZXJ3aXNlIGFkZCBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gdGhpcy50cmVlSXRlbXNPcGVuLmhhcyhrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGJ1aWxkSlNYVHJlZVJlY3Vyc2l2ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW3RoaXMuY3JlYXRlVHJlZUl0ZW0oXCJwbGFjZWhvbGRlclwiLCBcInBsYWNlaG9sZGVyXCIpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdHJlZVZhbHVlID0gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8ga2V5IDogdmFsdWU7XG4gICAgICAgICAgICAgICAgZWxlbWVudHMucHVzaCh0aGlzLmNyZWF0ZVRyZWVJdGVtKGtleSwgdHJlZVZhbHVlLCBjaGlsZHJlbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbmRlcmVkVHJlZSA9IGJ1aWxkSlNYVHJlZVJlY3Vyc2l2ZSh0aGlzLmRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgUHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSBrZXkgb2YgdGhlIHRyZWUgaXRlbVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIHZhbHVlIG9mIHRoZSB0cmVlIGl0ZW1cbiAgICAgKiBAcGFyYW0ge2guRWxlbWVudFtdIHwgdW5kZWZpbmVkfSBjaGlsZHJlbiAtIGNoaWxkcmVuIG9mIHRoZSB0cmVlIGl0ZW0gKGlmIGFueSlcbiAgICAgKiBAcmV0dXJucyB7aC5FbGVtZW50fSAtIHRyZWUgaXRlbSBlbGVtZW50IHdpdGggY2hpbGRyZW5cbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBVc2VkIHRvIGNyZWF0ZSBhIHRyZWUgaXRlbSBlbGVtZW50IHdpdGggY2hpbGRyZW4uXG4gICAgICovXG4gICAgY3JlYXRlVHJlZUl0ZW0oa2V5LCB2YWx1ZSwgY2hpbGRyZW4pIHtcbiAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS10cmVlLWl0ZW1cIiwgeyBrZXk6IGAke2tleX0taXRlbWAsIFwiZGF0YS1rZXlcIjoga2V5LCBzZWxlY3RlZDogdGhpcy52YWx1ZSA9PT0ga2V5LCBcImFyaWEtc2VsZWN0ZWRcIjogdGhpcy52YWx1ZSA9PT0ga2V5LCBleHBhbmRlZDogdGhpcy50cmVlSXRlbXNPcGVuLmhhcyhrZXkpLCBcImFyaWEtZXhwYW5kZWRcIjogdGhpcy50cmVlSXRlbXNPcGVuLmhhcyhrZXkpLCBvbkNsaWNrOiBjaGlsZHJlbiAhPT0gdW5kZWZpbmVkID8gKCkgPT4gdGhpcy50b2dnbGVUcmVlSXRlbShrZXkpIDogdW5kZWZpbmVkIH0sIHZhbHVlLCBjaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIChoKFwiY2FsY2l0ZS10cmVlXCIsIHsga2V5OiBgJHtrZXl9LWNoaWxkLXRyZWVgLCBzbG90OiBcImNoaWxkcmVuXCIgfSwgY2hpbGRyZW4pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAY2F0ZWdvcnkgcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Q3VzdG9tRXZlbnR9IGV2ZW50IC0gY2FsY2l0ZS10cmVlLXNlbGVjdCBldmVudFxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFVwZGF0ZXMgY29tcG9uZW50IHZhbHVlIHdpdGggc2VsZWN0ZWQgaXRlbVxuICAgICAqL1xuICAgIGhhbmRsZVRyZWVTZWxlY3QoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdHJlZUVsID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBjb25zdCBzZWxlY3RlZEtleSA9IHRyZWVFbD8uc2VsZWN0ZWRJdGVtc1swXT8uZGF0YXNldC5rZXk7XG4gICAgICAgIGlmIChzZWxlY3RlZEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4sIGJ1dCBpZiBpdCBkb2VzLCB3ZSB3YW50IHRvIGZpeCBpdFxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkS2V5LmluY2x1ZGVzKFwicGxhY2Vob2xkZXJcIikgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRLZXkgPSB0cmVlRWw/LnNlbGVjdGVkSXRlbXNbMF0ucGFyZW50RWxlbWVudD8uZGF0YXNldC5rZXk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZUl0ZW1zT3Blbi5hZGQocGFyZW50S2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1yZW5kZXIgdG8gcmVwbGFjZSBwbGFjZWhvbGRlciB3aXRoIGV4cGVjdGVkIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgdGhpcy5idWlsZEpTWFRyZWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSBzZWxlY3RlZEtleTtcbiAgICAgICAgICAgICAgICB0aGlzLnJmeFRyZWVWYWx1ZUNoYW5nZS5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGNhdGVnb3J5IGxpZmVjeWNsZVxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJlbmRlcnMgdGhlIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJkaXZcIiwgbnVsbCwgaChcImNhbGNpdGUtdHJlZVwiLCB7IGtleTogXCJiYXNlLXRyZWVcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIG9uQ2FsY2l0ZVRyZWVTZWxlY3Q6IChldmVudCkgPT4gdGhpcy5oYW5kbGVUcmVlU2VsZWN0KGV2ZW50KSB9LCB0aGlzLnJlbmRlcmVkVHJlZSkpKSk7XG4gICAgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcImRhdGFcIjogW1wib25EYXRhQ2hhbmdlXCJdXG4gICAgfTsgfVxufTtcblJmeFRyZWUuc3R5bGUgPSByZnhUcmVlQ3NzO1xuXG5leHBvcnQgeyBSZnhUcmVlIGFzIHJmeF90cmVlIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJmeC10cmVlLmVudHJ5LmpzLm1hcCIsImNvbnN0IFVJRGVmYXVsdHMgPSB7XG4gICAgU2NhbGU6IFwic1wiLFxuICAgIFBvcG92ZXJUaW1lcjogNjBcbn07XG5jb25zdCBDYWxjaXRlU2NhbGUgPSB7XG4gICAgczogXCJzXCIsXG4gICAgbTogXCJtXCJcbn07XG5jb25zdCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nID0ge1xuICAgIGFic29sdXRlOiBcImFic29sdXRlXCIsXG4gICAgZml4ZWQ6IFwiZml4ZWRcIlxufTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVNjYWxlIGFzIEMsIFVJRGVmYXVsdHMgYXMgVSwgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyBhcyBhIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVpLXV0aWxzLTkyOGE0MDk2LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==