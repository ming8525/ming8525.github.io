"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-33c806"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-file-browser.entry.js":
/*!**********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-file-browser.entry.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_file_browser: () => (/* binding */ ArcgisFileBrowser)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-050b6db9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js");
/* harmony import */ var _privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./privileges-74639dae.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-74639dae.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./privileges-5c382f61.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-5c382f61.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */














const arcgisFileBrowserCss = ".file-browser{margin-bottom:2rem;box-sizing:border-box;width:100%;border-width:2px;border-style:dashed;border-color:var(--calcite-color-border-1);background-color:var(--calcite-color-background);padding-top:2rem;padding-bottom:2rem;text-align:center}.file-browser.full-height{align-items:center;justify-content:center}.file-browser.append-height{align-items:center;justify-content:center}.alert{text-align:initial}.input{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.text-container{margin-top:2rem;margin-bottom:2rem}.text{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1);margin-top:0px;margin-bottom:0px}.help-text{font-size:0.875rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:0.5rem;margin-bottom:0px;max-width:38rem}.file-browser-button{margin-top:0px;margin-bottom:0px;margin-left:0.75rem;margin-right:0.75rem;box-sizing:border-box;width:auto;cursor:pointer;border-radius:0;padding:0px;font-size:0.875rem;line-height:1rem;color:var(--calcite-color-text-1);display:inline-flex;align-items:center;border:1px solid var(--calcite-color-border-1);background-color:white;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.file-browser-button:hover{border-color:var(--calcite-color-brand)}.file-browser-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.file-browser-button__icon{background-color:#f8f8f8;color:var(--calcite-color-text-link);width:32px;height:32px;box-sizing:border-box;padding:4px;display:flex;align-items:center;justify-content:center}.file-browser-button__icon svg{width:100%}.file-browser-button__text{padding:8px}:host(.full-height),.full-height{display:flex;flex-direction:column;height:100%;width:100%}";

const ArcgisFileBrowser = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.cloudDriveConnected = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "cloudDriveConnected", 7);
        this.fileSelect = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "fileSelect", 7);
        this.portal = undefined;
        this.config = undefined;
        this.user = undefined;
        this.userLicensedItems = undefined;
        this.cloud = true;
        this.showHelpLinkOnError = true;
        this.allowedExtensions = null;
        this.validTypes = null;
        this.maxFileSize = undefined;
        this.insideModal = undefined;
        this.fullHeight = undefined;
        this.helpText = undefined;
        this.helpLink = undefined;
        this.helpIdType = "default";
        this.errorMessage = undefined;
        this.files = undefined;
        this.fromDevice = false;
    }
    async componentWillLoad() {
        const { el, user, portal, userLicensedItems } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
        this.i18n = locale[0];
        this.canPublishFromCloud = this.cloud && (0,_privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_2__.c)(user, portal, userLicensedItems);
    }
    connectCloudDrive(provider) {
        this.cloudDriveConnected.emit(provider);
    }
    async focusMainInput() {
        this.mainInputRef.focus();
    }
    render() {
        const { i18n, canPublishFromCloud, allowedExtensions, maxFileSize, insideModal, helpText, helpLink, helpIdType, fullHeight, user, config, showHelpLinkOnError, validTypes } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-drag-and-drop", { files: this.files, showHelpLinkOnError: showHelpLinkOnError, allowedExtensions: allowedExtensions, helpIdType: helpIdType, validTypes: validTypes, maxFileSize: maxFileSize, insideModal: insideModal, fullHeight: fullHeight, class: { "full-height": fullHeight }, user: user, config: config, onArcgisDropSuccess: (e) => {
                this.fileSelect.emit({
                    file: e.detail,
                    // ! Don't remove `this` because the state might not be fully updated when this is called
                    // !   so destructing will give us old values
                    source: this.fromDevice ? "local-device" : "drag-n-drop"
                });
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
                "file-browser": true,
                "full-height": fullHeight
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "42", height: "54", viewBox: "0 0 42 54", fill: "none", xmlns: "http://www.w3.org/2000/svg", "aria-hidden": "true", focusable: "false" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z", fill: "#6A6A6A" }), ")", (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z", fill: "#6A6A6A" })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { onChange: (e) => {
                this.fromDevice = true;
                this.files = Object.assign({}, e.target.files);
                // We store the actual value in `files` already so
                //  just clear this just in case the user re-upload
                this.inputElement.value = null;
            }, ref: (el) => (this.inputElement = el), accept: allowedExtensions === null || allowedExtensions === void 0 ? void 0 : allowedExtensions.map((extension) => `.${extension}`).join(","), tabIndex: -1, class: "input", type: "file" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "text-container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: "text" }, i18n.drag), helpLink ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { href: helpLink, target: "_blank" }, helpText)) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "help-text" }, helpText))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "cta-container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => { var _a; return (_a = this.inputElement) === null || _a === void 0 ? void 0 : _a.click(); }, ref: (ele) => (this.mainInputRef = ele) }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "desktop" })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.device)), canPublishFromCloud && [
            (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("google drive") }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m9.84 48.35 2.3 4a5.25 5.25 0 0 0 2 2l8.2-14.2H5.9a5.4 5.4 0 0 0 .72 2.69z", fill: "#0066da" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m32 23.37-8.26-14.2a5.29 5.29 0 0 0-2 2L6.62 37.39a5.42 5.42 0 0 0-.72 2.69h16.41z", fill: "#00ac47" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M49.79 54.28a5.25 5.25 0 0 0 2-2l1-1.64 4.56-7.9a5.4 5.4 0 0 0 .65-2.66H41.59l3.49 6.86z", fill: "#ea4335" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m32 23.37 8.21-14.2a5.24 5.24 0 0 0-2.69-.72h-11a5.58 5.58 0 0 0-2.69.72z", fill: "#00832d" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M41.59 40.08H22.31l-8.2 14.2a5.2 5.2 0 0 0 2.68.72h30.32a5.51 5.51 0 0 0 2.68-.72z", fill: "#2684fc" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m49.7 24.27-7.57-13.13a5.39 5.39 0 0 0-2-2L32 23.37l9.64 16.71H58a5.43 5.43 0 0 0-.72-2.69z", fill: "#ffba00" }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.googleDrive)),
            (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("dropbox") }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M20 11.61 8 19.26l12 7.64 12-7.64-12-7.65zM44 11.61l-12 7.65 12 7.64 12-7.64-12-7.65z", fill: "#0061ff" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "m8 34.55 12 7.64 12-7.64-12-7.65-12 7.65zM44 26.9l-12 7.65 12 7.64 12-7.64-12-7.65zM20 44.74l12 7.65 12-7.65-12-7.64-12 7.64z", fill: "#0061ff" }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.dropbox)),
            (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "file-browser-button", onClick: () => this.connectCloudDrive("onedrive") }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__icon" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 64 64" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("g", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M37.14 37.93 47.5 28a15.68 15.68 0 0 0-28.29-4.7c.16 0 17.93 14.63 17.93 14.63z", fill: "#0364b8" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M26 25.16a12.38 12.38 0 0 0-6.59-1.87h-.16A12.53 12.53 0 0 0 9.09 43l15.51-1.94 11.89-9.59z", fill: "#0078d4" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M47.5 28h-.69a10.18 10.18 0 0 0-4 .83l-6.28 2.64L43.41 40l12.37 3a10.2 10.2 0 0 0-8.28-15z", fill: "#1490df" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M9.09 43a12.53 12.53 0 0 0 10.28 5.37h27.44a10.19 10.19 0 0 0 9-5.36L36.49 31.47z", fill: "#28a8ea" })))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "file-browser-button__text" }, i18n.oneDrive))
        ]))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisFileBrowser.style = arcgisFileBrowserCss;



//# sourceMappingURL=arcgis-file-browser.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js":
/*!**********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isSubscriber),
/* harmony export */   b: () => (/* binding */ isPremium),
/* harmony export */   c: () => (/* binding */ canUpdateItem),
/* harmony export */   d: () => (/* binding */ itemsBelongToUserOrg),
/* harmony export */   g: () => (/* binding */ getItemHomeAppUrl),
/* harmony export */   i: () => (/* binding */ isOwner),
/* harmony export */   u: () => (/* binding */ userIsItemAdmin)
/* harmony export */ });
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


function isEsri(item) {
    var _a;
    return !!((_a = item.owner) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes("esri"));
}
function isPremium(item) {
    var _a;
    return isEsri(item) && !!((_a = item.typeKeywords) === null || _a === void 0 ? void 0 : _a.includes("Requires Credits"));
}
function isSubscriber(item) {
    var _a;
    return isEsri(item) && !!((_a = item.typeKeywords) === null || _a === void 0 ? void 0 : _a.includes("Requires Subscription"));
}
function isOwner(item, user) {
    return item.owner === user.username;
}
/**
 * Can the user update the item
 */
function canUpdateItem(item, user) {
    return userIsItemAdmin(item, user) || item.itemControl === "update";
}
/**
 * Is the user either an owner or admin of the item
 */
function userIsItemAdmin(item, user) {
    return isOwner(item, user) || isItemAdmin(item, user);
}
/**
 * Does the user have admin capabilities on this item
 */
function isItemAdmin(item, user) {
    var _a;
    // if this flag is already set (probably home app), use it
    if (item.isAdmin != null) {
        return !!item.isAdmin;
    }
    const itemOwner = item.owner;
    const itemControlAdmin = item.itemControl === "admin";
    const esriUsers = ["esri_livingatlas", "esri_demographics", "esri_boundaries"];
    if (((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) &&
        !isOwner(item, user) &&
        itemControlAdmin &&
        itemOwner.includes("esri_") &&
        // portal incorrectly returns "itemControl="admin" for esri owned items
        !esriUsers.includes(itemOwner)) {
        return false;
    }
    return itemControlAdmin;
}
const itemsBelongToUserOrg = (items, user) => {
    return !!user.orgId && items.every((item) => item.isOrgItem);
};
const getItemHomeAppUrl = (itemId, baseUrl) => `${(0,_url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_0__.a)(baseUrl)}item.html?id=${itemId}`;



//# sourceMappingURL=item-3535552d.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS_UTILITY),
/* harmony export */   a: () => (/* binding */ formatDate),
/* harmony export */   b: () => (/* binding */ formatPlural),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   g: () => (/* binding */ getElementDir),
/* harmony export */   l: () => (/* binding */ languageMap)
/* harmony export */ });
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



const languageMap = new Map([
    ["ar", "ar"],
    ["bg", "bg"],
    ["bs", "bs"],
    ["ca", "ca"],
    ["cs", "cs"],
    ["da", "da"],
    ["de", "de"],
    ["el", "el"],
    ["en", "en"],
    ["es", "es"],
    ["et", "et"],
    ["fi", "fi"],
    ["fr", "fr"],
    ["he", "he"],
    ["hr", "hr"],
    ["hu", "hu"],
    ["id", "id"],
    ["it", "it"],
    ["ja", "ja"],
    ["ko", "ko"],
    ["lt", "lt"],
    ["lv", "lv"],
    ["nb", "nb"],
    ["nl", "nl"],
    ["pl", "pl"],
    ["pt-br", "pt-BR"],
    ["pt-pt", "pt-PT"],
    ["ro", "ro"],
    ["ru", "ru"],
    ["sk", "sk"],
    ["sl", "sl"],
    ["sr", "sr"],
    ["sv", "sv"],
    ["th", "th"],
    ["tr", "tr"],
    ["uk", "uk"],
    ["vi", "vi"],
    ["zh-cn", "zh-CN"],
    ["zh-hk", "zh-HK"],
    ["zh-tw", "zh-TW"]
]);
// rtl
function getElementDir(el) {
    return getElementProp(el, "dir", "ltr");
}
function getElementProp(el, prop, value) {
    const closestWithProp = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__.c)(el, `[${prop}]`);
    return closestWithProp ? closestWithProp.getAttribute(prop) : value;
}
// css
const CSS_UTILITY = {
    rtl: "arcgis--rtl"
};
async function formatNumber(number, options) {
    const { api, type, places } = options || {};
    if (api === 4) {
        const [intl] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["esri/intl"]);
        const numberFormatIntlOptions = intl.convertNumberFormatToIntlOptions({
            places,
            style: type,
            digitSeparator: true
        });
        return intl.formatNumber(number, Object.assign(Object.assign({}, numberFormatIntlOptions), { style: type }));
    }
    const [dojoNumber] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["dojo/number"]);
    return dojoNumber.format(number, {
        type,
        places,
        pattern: options === null || options === void 0 ? void 0 : options.pattern
    });
}
const cache = {};
function formatDate(date) {
    const lang = document.documentElement.lang;
    const dayShortMonthYear = {
        year: "numeric",
        month: "short",
        day: "numeric"
    };
    if (!cache[lang]) {
        cache[lang] = new Intl.DateTimeFormat(document.documentElement.lang, dayShortMonthYear);
    }
    return cache[lang].format(date);
}
function formatPlural(lang, stringObj, number) {
    const singles = ["id", "ja", "ko", "th", "vi", "zh-cn", "zh-hk", "zh-tw"];
    const likeEnglish = [
        "en",
        "ca",
        "da",
        "de",
        "el",
        "es",
        "et",
        "fi",
        "hi",
        "hu",
        "it",
        "nb",
        "nl",
        "pt-pt",
        "sv",
        "tr"
    ];
    const locale = lang !== null && lang !== void 0 ? lang : "en";
    // if the number is one, or it is a "simple" language, return the 1 string
    if (number === 1 || singles.includes(locale)) {
        return stringObj.single.replace("${number}", "1");
    }
    // if the number is not 1 and the language uses the same pluralization strategy as english,
    // return the multiple string
    if (number !== 1 && likeEnglish.includes(locale)) {
        return stringObj.multiple.replace("${number}", `${number}`);
    }
    // if none of the above worked, return the "unknown" string
    return stringObj.unknown.replace("${number}", `${number}`);
}



//# sourceMappingURL=languageUtil-ef0e54b2.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getComponentClosestLanguage),
/* harmony export */   g: () => (/* binding */ getLocaleComponentStrings)
/* harmony export */ });
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */




// https://medium.com/stencil-tricks/implementing-internationalisation-i18n-with-stencil-5e6559554117
function getComponentClosestLanguage(element) {
    var _a, _b, _c;
    const closestElement = (_a = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
    // language set by the calling application or browser. defaults to english.
    const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
    if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
        return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
    }
    else {
        // "ru-RU" maps to "ru" use case
        if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
            return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang.slice(0, 2));
        }
        else {
            return "en";
        }
    }
}
function getComponentClosestLanguageIntl(element) {
    var _a, _b, _c;
    // it's OK if we don't have the 4 letter language file for it
    // 4 letter language code needed for formatting numbers
    const closestElement = (_a = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
    // language set by the calling application or browser. defaults to english.
    const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
    if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
        return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
    }
    else {
        if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
            // we support the 2 letter coded language
            // e.g. it-CH vs it
            return lang;
        }
        else {
            return "en";
        }
    }
}
function fetchLocaleStringsForComponent(componentName, locale) {
    return new Promise((resolve, reject) => {
        fetch((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_2__.a)(`../arcgis-app-assets/i18n/${componentName}.i18n.${locale}.json`)).then((result) => {
            if (result.ok)
                resolve(result.json());
            else
                reject();
        }, () => reject());
    });
}
const stringCache = {};
function fetchLocaleStringsFromCache(componentName, locale) {
    const id = `${componentName}${locale}`;
    if (!stringCache[id]) {
        stringCache[id] = fetchLocaleStringsForComponent(componentName, locale);
    }
    return stringCache[id];
}
/**
 * Get strings and language codes.
 * This method returns 2 language codes.
 * The first one returns a code that's also supported as a language file.
 * The second one returns a code where there is support for the first 2 letters of the code as part of a language file,
 * but will return the original 4 letter code from the page.
 * E.g. For "it-ch" it will return "it" as the first language code and "it-ch" as the second.
 * The second one is required for esri.intl.setLocale() to get the correct formatting.
 *
 * If a tagName is provided it will overwite the element's tagName
 *
 *  @return [ strings, first language code, second language code]
 */
async function getLocaleComponentStrings(element, tagName) {
    const componentName = tagName || element.tagName.toLowerCase();
    const componentLanguage = getComponentClosestLanguage(element);
    const componentLanguageIntl = getComponentClosestLanguageIntl(element);
    let strings;
    try {
        strings = await fetchLocaleStringsFromCache(componentName, componentLanguage);
    }
    catch (e) {
        console.warn(`no locale for ${componentName} (${componentLanguage}) loading default locale en.`);
        strings = await fetchLocaleStringsFromCache(componentName, "en");
    }
    return [strings, componentLanguage, componentLanguageIntl];
}



//# sourceMappingURL=locale-050b6db9.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTMzYzgwNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2tHO0FBQzVCO0FBQ0Y7QUFDekM7QUFDUztBQUNEO0FBQ0w7QUFDQTtBQUNEO0FBQ0Y7QUFDTztBQUNBO0FBQ047O0FBRTVCLDRDQUE0QyxtQkFBbUIsc0JBQXNCLFdBQVcsaUJBQWlCLG9CQUFvQiwyQ0FBMkMsaURBQWlELGlCQUFpQixvQkFBb0Isa0JBQWtCLDBCQUEwQixtQkFBbUIsdUJBQXVCLDRCQUE0QixtQkFBbUIsdUJBQXVCLE9BQU8sbUJBQW1CLE9BQU8sa0JBQWtCLFVBQVUsV0FBVyxVQUFVLFlBQVksZ0JBQWdCLHNCQUFzQixtQkFBbUIsZUFBZSxnQkFBZ0IsZ0JBQWdCLG1CQUFtQixNQUFNLGVBQWUsZ0JBQWdCLGtDQUFrQyxlQUFlLGtCQUFrQixXQUFXLG1CQUFtQixnQkFBZ0IsaUJBQWlCLGtCQUFrQixrQkFBa0Isa0JBQWtCLGdCQUFnQixxQkFBcUIsZUFBZSxrQkFBa0Isb0JBQW9CLHFCQUFxQixzQkFBc0IsV0FBVyxlQUFlLGdCQUFnQixZQUFZLG1CQUFtQixpQkFBaUIsa0NBQWtDLG9CQUFvQixtQkFBbUIsK0NBQStDLHVCQUF1QixpQ0FBaUMsbUJBQW1CLDBCQUEwQixvQkFBb0IsMkJBQTJCLHdDQUF3QywyQkFBMkIsNkNBQTZDLG9CQUFvQiwyQkFBMkIseUJBQXlCLHFDQUFxQyxXQUFXLFlBQVksc0JBQXNCLFlBQVksYUFBYSxtQkFBbUIsdUJBQXVCLCtCQUErQixXQUFXLDJCQUEyQixZQUFZLGlDQUFpQyxhQUFhLHNCQUFzQixZQUFZLFdBQVc7O0FBRTV6RDtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsbUNBQW1DLHFEQUFXO0FBQzlDLDBCQUEwQixxREFB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LHdEQUFXO0FBQ3ZCLG1CQUFtQix3REFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtREFBaUM7QUFDbEU7QUFDQTtBQUNBLFFBQVEsd0RBQVc7QUFDbkIsZUFBZSx3REFBVztBQUMxQjtBQUNBO0FBQ0EsWUFBWSx3REFBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxREFBWSw4QkFBOEIsY0FBYyxRQUFRLE9BQU87QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjLEVBQUUsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZSxHQUFHLGtCQUFrQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTs7QUFFNEU7O0FBRTVFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLWZpbGUtYnJvd3Nlci5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pdGVtLTM1MzU1NTJkLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9sb2NhbGUtMDUwYjZkYjkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGQgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzIH0gZnJvbSAnLi9sb2NhbGUtMDUwYjZkYjkuanMnO1xuaW1wb3J0IHsgYyBhcyBjYW5QdWJsaXNoRnJvbUNsb3VkIH0gZnJvbSAnLi9wcml2aWxlZ2VzLTc0NjM5ZGFlLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vY29uZmlnLTc1YWRmOTYyLmpzJztcbmltcG9ydCAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCAnLi9wcml2aWxlZ2VzLTVjMzgyZjYxLmpzJztcbmltcG9ydCAnLi9pdGVtLTM1MzU1NTJkLmpzJztcblxuY29uc3QgYXJjZ2lzRmlsZUJyb3dzZXJDc3MgPSBcIi5maWxlLWJyb3dzZXJ7bWFyZ2luLWJvdHRvbToycmVtO2JveC1zaXppbmc6Ym9yZGVyLWJveDt3aWR0aDoxMDAlO2JvcmRlci13aWR0aDoycHg7Ym9yZGVyLXN0eWxlOmRhc2hlZDtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJhY2tncm91bmQpO3BhZGRpbmctdG9wOjJyZW07cGFkZGluZy1ib3R0b206MnJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uZmlsZS1icm93c2VyLmZ1bGwtaGVpZ2h0e2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5maWxlLWJyb3dzZXIuYXBwZW5kLWhlaWdodHthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0uYWxlcnR7dGV4dC1hbGlnbjppbml0aWFsfS5pbnB1dHtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxcHg7aGVpZ2h0OjFweDtwYWRkaW5nOjA7bWFyZ2luOi0xcHg7b3ZlcmZsb3c6aGlkZGVuO2NsaXA6cmVjdCgwLCAwLCAwLCAwKTt3aGl0ZS1zcGFjZTpub3dyYXA7Ym9yZGVyLXdpZHRoOjB9LnRleHQtY29udGFpbmVye21hcmdpbi10b3A6MnJlbTttYXJnaW4tYm90dG9tOjJyZW19LnRleHR7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NTAwO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKTttYXJnaW4tdG9wOjBweDttYXJnaW4tYm90dG9tOjBweH0uaGVscC10ZXh0e2ZvbnQtc2l6ZTowLjg3NXJlbTtmb250LXdlaWdodDo0MDA7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0bzttYXJnaW4tdG9wOjAuNXJlbTttYXJnaW4tYm90dG9tOjBweDttYXgtd2lkdGg6MzhyZW19LmZpbGUtYnJvd3Nlci1idXR0b257bWFyZ2luLXRvcDowcHg7bWFyZ2luLWJvdHRvbTowcHg7bWFyZ2luLWxlZnQ6MC43NXJlbTttYXJnaW4tcmlnaHQ6MC43NXJlbTtib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6YXV0bztjdXJzb3I6cG9pbnRlcjtib3JkZXItcmFkaXVzOjA7cGFkZGluZzowcHg7Zm9udC1zaXplOjAuODc1cmVtO2xpbmUtaGVpZ2h0OjFyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlcjoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSk7YmFja2dyb3VuZC1jb2xvcjp3aGl0ZTt0cmFuc2l0aW9uOmFsbCAxNTBtcyBlYXNlLWluLW91dDtvdXRsaW5lLW9mZnNldDowcHg7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtmb250LWZhbWlseTppbmhlcml0fS5maWxlLWJyb3dzZXItYnV0dG9uOmhvdmVye2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKX0uZmlsZS1icm93c2VyLWJ1dHRvbjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDotMnB4fS5maWxlLWJyb3dzZXItYnV0dG9uX19pY29ue2JhY2tncm91bmQtY29sb3I6I2Y4ZjhmODtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtbGluayk7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzo0cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5maWxlLWJyb3dzZXItYnV0dG9uX19pY29uIHN2Z3t3aWR0aDoxMDAlfS5maWxlLWJyb3dzZXItYnV0dG9uX190ZXh0e3BhZGRpbmc6OHB4fTpob3N0KC5mdWxsLWhlaWdodCksLmZ1bGwtaGVpZ2h0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1cIjtcblxuY29uc3QgQXJjZ2lzRmlsZUJyb3dzZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmNsb3VkRHJpdmVDb25uZWN0ZWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNsb3VkRHJpdmVDb25uZWN0ZWRcIiwgNyk7XG4gICAgICAgIHRoaXMuZmlsZVNlbGVjdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiZmlsZVNlbGVjdFwiLCA3KTtcbiAgICAgICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVzZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXNlckxpY2Vuc2VkSXRlbXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2xvdWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dIZWxwTGlua09uRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWxpZFR5cGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tYXhGaWxlU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pbnNpZGVNb2RhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5mdWxsSGVpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhlbHBUZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhlbHBMaW5rID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhlbHBJZFR5cGUgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZmlsZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZnJvbURldmljZSA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgY29uc3QgeyBlbCwgdXNlciwgcG9ydGFsLCB1c2VyTGljZW5zZWRJdGVtcyB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbCk7XG4gICAgICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICAgICAgdGhpcy5jYW5QdWJsaXNoRnJvbUNsb3VkID0gdGhpcy5jbG91ZCAmJiBjYW5QdWJsaXNoRnJvbUNsb3VkKHVzZXIsIHBvcnRhbCwgdXNlckxpY2Vuc2VkSXRlbXMpO1xuICAgIH1cbiAgICBjb25uZWN0Q2xvdWREcml2ZShwcm92aWRlcikge1xuICAgICAgICB0aGlzLmNsb3VkRHJpdmVDb25uZWN0ZWQuZW1pdChwcm92aWRlcik7XG4gICAgfVxuICAgIGFzeW5jIGZvY3VzTWFpbklucHV0KCkge1xuICAgICAgICB0aGlzLm1haW5JbnB1dFJlZi5mb2N1cygpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgaTE4biwgY2FuUHVibGlzaEZyb21DbG91ZCwgYWxsb3dlZEV4dGVuc2lvbnMsIG1heEZpbGVTaXplLCBpbnNpZGVNb2RhbCwgaGVscFRleHQsIGhlbHBMaW5rLCBoZWxwSWRUeXBlLCBmdWxsSGVpZ2h0LCB1c2VyLCBjb25maWcsIHNob3dIZWxwTGlua09uRXJyb3IsIHZhbGlkVHlwZXMgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChcImFyY2dpcy1kcmFnLWFuZC1kcm9wXCIsIHsgZmlsZXM6IHRoaXMuZmlsZXMsIHNob3dIZWxwTGlua09uRXJyb3I6IHNob3dIZWxwTGlua09uRXJyb3IsIGFsbG93ZWRFeHRlbnNpb25zOiBhbGxvd2VkRXh0ZW5zaW9ucywgaGVscElkVHlwZTogaGVscElkVHlwZSwgdmFsaWRUeXBlczogdmFsaWRUeXBlcywgbWF4RmlsZVNpemU6IG1heEZpbGVTaXplLCBpbnNpZGVNb2RhbDogaW5zaWRlTW9kYWwsIGZ1bGxIZWlnaHQ6IGZ1bGxIZWlnaHQsIGNsYXNzOiB7IFwiZnVsbC1oZWlnaHRcIjogZnVsbEhlaWdodCB9LCB1c2VyOiB1c2VyLCBjb25maWc6IGNvbmZpZywgb25BcmNnaXNEcm9wU3VjY2VzczogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVTZWxlY3QuZW1pdCh7XG4gICAgICAgICAgICAgICAgICAgIGZpbGU6IGUuZGV0YWlsLFxuICAgICAgICAgICAgICAgICAgICAvLyAhIERvbid0IHJlbW92ZSBgdGhpc2AgYmVjYXVzZSB0aGUgc3RhdGUgbWlnaHQgbm90IGJlIGZ1bGx5IHVwZGF0ZWQgd2hlbiB0aGlzIGlzIGNhbGxlZFxuICAgICAgICAgICAgICAgICAgICAvLyAhICAgc28gZGVzdHJ1Y3Rpbmcgd2lsbCBnaXZlIHVzIG9sZCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLmZyb21EZXZpY2UgPyBcImxvY2FsLWRldmljZVwiIDogXCJkcmFnLW4tZHJvcFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IH0sIGgoXCJkaXZcIiwgeyBjbGFzczoge1xuICAgICAgICAgICAgICAgIFwiZmlsZS1icm93c2VyXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJmdWxsLWhlaWdodFwiOiBmdWxsSGVpZ2h0XG4gICAgICAgICAgICB9IH0sIGgoXCJzdmdcIiwgeyB3aWR0aDogXCI0MlwiLCBoZWlnaHQ6IFwiNTRcIiwgdmlld0JveDogXCIwIDAgNDIgNTRcIiwgZmlsbDogXCJub25lXCIsIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGZvY3VzYWJsZTogXCJmYWxzZVwiIH0sIGgoXCJwYXRoXCIsIHsgZDogXCJNMzEuNTY2IDBIMFY1My44SDQxLjhWMTAuMjM0TDMxLjU2NiAwWk0zMS44IDEuMzY2TDQwLjQzNCAxMEgzMS44VjEuMzY2Wk0wLjc5OTk5OSA1M1YwLjhIMzFWMTAuOEg0MVY1M0gwLjc5OTk5OVpcIiwgZmlsbDogXCIjNkE2QTZBXCIgfSksIFwiKVwiLCBoKFwicGF0aFwiLCB7IFwiZmlsbC1ydWxlXCI6IFwiZXZlbm9kZFwiLCBcImNsaXAtcnVsZVwiOiBcImV2ZW5vZGRcIiwgZDogXCJNMjAuOTAwNCAzOFYyNS43MDdMMTguMjU0NCAyOC4zNTRMMTcuNTQ3NCAyNy42NDdMMjEuNDAwNCAyMy43OTNMMjUuMjU0NCAyNy42NDdMMjQuNTQ3NCAyOC4zNTRMMjEuOTAwNCAyNS43MDdWMzhIMjAuOTAwNFpNMTQuOTAwNCAyMUgyNy45MDA0VjIwSDE0LjkwMDRWMjFaXCIsIGZpbGw6IFwiIzZBNkE2QVwiIH0pKSwgaChcImlucHV0XCIsIHsgb25DaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tRGV2aWNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVzID0gT2JqZWN0LmFzc2lnbih7fSwgZS50YXJnZXQuZmlsZXMpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHN0b3JlIHRoZSBhY3R1YWwgdmFsdWUgaW4gYGZpbGVzYCBhbHJlYWR5IHNvXG4gICAgICAgICAgICAgICAgLy8gIGp1c3QgY2xlYXIgdGhpcyBqdXN0IGluIGNhc2UgdGhlIHVzZXIgcmUtdXBsb2FkXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgfSwgcmVmOiAoZWwpID0+ICh0aGlzLmlucHV0RWxlbWVudCA9IGVsKSwgYWNjZXB0OiBhbGxvd2VkRXh0ZW5zaW9ucyA9PT0gbnVsbCB8fCBhbGxvd2VkRXh0ZW5zaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxsb3dlZEV4dGVuc2lvbnMubWFwKChleHRlbnNpb24pID0+IGAuJHtleHRlbnNpb259YCkuam9pbihcIixcIiksIHRhYkluZGV4OiAtMSwgY2xhc3M6IFwiaW5wdXRcIiwgdHlwZTogXCJmaWxlXCIgfSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJ0ZXh0LWNvbnRhaW5lclwiIH0sIGgoXCJoM1wiLCB7IGNsYXNzOiBcInRleHRcIiB9LCBpMThuLmRyYWcpLCBoZWxwTGluayA/IChoKFwiY2FsY2l0ZS1saW5rXCIsIHsgaHJlZjogaGVscExpbmssIHRhcmdldDogXCJfYmxhbmtcIiB9LCBoZWxwVGV4dCkpIDogKGgoXCJwXCIsIHsgY2xhc3M6IFwiaGVscC10ZXh0XCIgfSwgaGVscFRleHQpKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJjdGEtY29udGFpbmVyXCIgfSwgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25cIiwgb25DbGljazogKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLmlucHV0RWxlbWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsaWNrKCk7IH0sIHJlZjogKGVsZSkgPT4gKHRoaXMubWFpbklucHV0UmVmID0gZWxlKSB9LCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX2ljb25cIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJkZXNrdG9wXCIgfSkpLCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX3RleHRcIiB9LCBpMThuLmRldmljZSkpLCBjYW5QdWJsaXNoRnJvbUNsb3VkICYmIFtcbiAgICAgICAgICAgIGgoXCJidXR0b25cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uXCIsIG9uQ2xpY2s6ICgpID0+IHRoaXMuY29ubmVjdENsb3VkRHJpdmUoXCJnb29nbGUgZHJpdmVcIikgfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uX19pY29uXCIgfSwgaChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHZpZXdCb3g6IFwiMCAwIDY0IDY0XCIgfSwgaChcInBhdGhcIiwgeyBkOiBcIm05Ljg0IDQ4LjM1IDIuMyA0YTUuMjUgNS4yNSAwIDAgMCAyIDJsOC4yLTE0LjJINS45YTUuNCA1LjQgMCAwIDAgLjcyIDIuNjl6XCIsIGZpbGw6IFwiIzAwNjZkYVwiIH0pLCBoKFwicGF0aFwiLCB7IGQ6IFwibTMyIDIzLjM3LTguMjYtMTQuMmE1LjI5IDUuMjkgMCAwIDAtMiAyTDYuNjIgMzcuMzlhNS40MiA1LjQyIDAgMCAwLS43MiAyLjY5aDE2LjQxelwiLCBmaWxsOiBcIiMwMGFjNDdcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIk00OS43OSA1NC4yOGE1LjI1IDUuMjUgMCAwIDAgMi0ybDEtMS42NCA0LjU2LTcuOWE1LjQgNS40IDAgMCAwIC42NS0yLjY2SDQxLjU5bDMuNDkgNi44NnpcIiwgZmlsbDogXCIjZWE0MzM1XCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJtMzIgMjMuMzcgOC4yMS0xNC4yYTUuMjQgNS4yNCAwIDAgMC0yLjY5LS43MmgtMTFhNS41OCA1LjU4IDAgMCAwLTIuNjkuNzJ6XCIsIGZpbGw6IFwiIzAwODMyZFwiIH0pLCBoKFwicGF0aFwiLCB7IGQ6IFwiTTQxLjU5IDQwLjA4SDIyLjMxbC04LjIgMTQuMmE1LjIgNS4yIDAgMCAwIDIuNjguNzJoMzAuMzJhNS41MSA1LjUxIDAgMCAwIDIuNjgtLjcyelwiLCBmaWxsOiBcIiMyNjg0ZmNcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIm00OS43IDI0LjI3LTcuNTctMTMuMTNhNS4zOSA1LjM5IDAgMCAwLTItMkwzMiAyMy4zN2w5LjY0IDE2LjcxSDU4YTUuNDMgNS40MyAwIDAgMC0uNzItMi42OXpcIiwgZmlsbDogXCIjZmZiYTAwXCIgfSkpKSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uX190ZXh0XCIgfSwgaTE4bi5nb29nbGVEcml2ZSkpLFxuICAgICAgICAgICAgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25cIiwgb25DbGljazogKCkgPT4gdGhpcy5jb25uZWN0Q2xvdWREcml2ZShcImRyb3Bib3hcIikgfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uX19pY29uXCIgfSwgaChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHZpZXdCb3g6IFwiMCAwIDY0IDY0XCIgfSwgaChcInBhdGhcIiwgeyBkOiBcIk0yMCAxMS42MSA4IDE5LjI2bDEyIDcuNjQgMTItNy42NC0xMi03LjY1ek00NCAxMS42MWwtMTIgNy42NSAxMiA3LjY0IDEyLTcuNjQtMTItNy42NXpcIiwgZmlsbDogXCIjMDA2MWZmXCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJtOCAzNC41NSAxMiA3LjY0IDEyLTcuNjQtMTItNy42NS0xMiA3LjY1ek00NCAyNi45bC0xMiA3LjY1IDEyIDcuNjQgMTItNy42NC0xMi03LjY1ek0yMCA0NC43NGwxMiA3LjY1IDEyLTcuNjUtMTItNy42NC0xMiA3LjY0elwiLCBmaWxsOiBcIiMwMDYxZmZcIiB9KSkpLCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX3RleHRcIiB9LCBpMThuLmRyb3Bib3gpKSxcbiAgICAgICAgICAgIGgoXCJidXR0b25cIiwgeyBjbGFzczogXCJmaWxlLWJyb3dzZXItYnV0dG9uXCIsIG9uQ2xpY2s6ICgpID0+IHRoaXMuY29ubmVjdENsb3VkRHJpdmUoXCJvbmVkcml2ZVwiKSB9LCBoKFwic3BhblwiLCB7IGNsYXNzOiBcImZpbGUtYnJvd3Nlci1idXR0b25fX2ljb25cIiB9LCBoKFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdmlld0JveDogXCIwIDAgNjQgNjRcIiB9LCBoKFwiZ1wiLCBudWxsLCBoKFwicGF0aFwiLCB7IGQ6IFwiTTM3LjE0IDM3LjkzIDQ3LjUgMjhhMTUuNjggMTUuNjggMCAwIDAtMjguMjktNC43Yy4xNiAwIDE3LjkzIDE0LjYzIDE3LjkzIDE0LjYzelwiLCBmaWxsOiBcIiMwMzY0YjhcIiB9KSwgaChcInBhdGhcIiwgeyBkOiBcIk0yNiAyNS4xNmExMi4zOCAxMi4zOCAwIDAgMC02LjU5LTEuODdoLS4xNkExMi41MyAxMi41MyAwIDAgMCA5LjA5IDQzbDE1LjUxLTEuOTQgMTEuODktOS41OXpcIiwgZmlsbDogXCIjMDA3OGQ0XCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJNNDcuNSAyOGgtLjY5YTEwLjE4IDEwLjE4IDAgMCAwLTQgLjgzbC02LjI4IDIuNjRMNDMuNDEgNDBsMTIuMzcgM2ExMC4yIDEwLjIgMCAwIDAtOC4yOC0xNXpcIiwgZmlsbDogXCIjMTQ5MGRmXCIgfSksIGgoXCJwYXRoXCIsIHsgZDogXCJNOS4wOSA0M2ExMi41MyAxMi41MyAwIDAgMCAxMC4yOCA1LjM3aDI3LjQ0YTEwLjE5IDEwLjE5IDAgMCAwIDktNS4zNkwzNi40OSAzMS40N3pcIiwgZmlsbDogXCIjMjhhOGVhXCIgfSkpKSksIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiZmlsZS1icm93c2VyLWJ1dHRvbl9fdGV4dFwiIH0sIGkxOG4ub25lRHJpdmUpKVxuICAgICAgICBdKSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0ZpbGVCcm93c2VyLnN0eWxlID0gYXJjZ2lzRmlsZUJyb3dzZXJDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc0ZpbGVCcm93c2VyIGFzIGFyY2dpc19maWxlX2Jyb3dzZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLWZpbGUtYnJvd3Nlci5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGEgYXMgYWRkVHJhaWxpbmdTbGFzaElmTWlzc2luZyB9IGZyb20gJy4vdXJsLTRjM2FlNTRjLmpzJztcblxuZnVuY3Rpb24gaXNFc3JpKGl0ZW0pIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICEhKChfYSA9IGl0ZW0ub3duZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZXNyaVwiKSk7XG59XG5mdW5jdGlvbiBpc1ByZW1pdW0oaXRlbSkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gaXNFc3JpKGl0ZW0pICYmICEhKChfYSA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoXCJSZXF1aXJlcyBDcmVkaXRzXCIpKTtcbn1cbmZ1bmN0aW9uIGlzU3Vic2NyaWJlcihpdGVtKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBpc0VzcmkoaXRlbSkgJiYgISEoKF9hID0gaXRlbS50eXBlS2V5d29yZHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhcIlJlcXVpcmVzIFN1YnNjcmlwdGlvblwiKSk7XG59XG5mdW5jdGlvbiBpc093bmVyKGl0ZW0sIHVzZXIpIHtcbiAgICByZXR1cm4gaXRlbS5vd25lciA9PT0gdXNlci51c2VybmFtZTtcbn1cbi8qKlxuICogQ2FuIHRoZSB1c2VyIHVwZGF0ZSB0aGUgaXRlbVxuICovXG5mdW5jdGlvbiBjYW5VcGRhdGVJdGVtKGl0ZW0sIHVzZXIpIHtcbiAgICByZXR1cm4gdXNlcklzSXRlbUFkbWluKGl0ZW0sIHVzZXIpIHx8IGl0ZW0uaXRlbUNvbnRyb2wgPT09IFwidXBkYXRlXCI7XG59XG4vKipcbiAqIElzIHRoZSB1c2VyIGVpdGhlciBhbiBvd25lciBvciBhZG1pbiBvZiB0aGUgaXRlbVxuICovXG5mdW5jdGlvbiB1c2VySXNJdGVtQWRtaW4oaXRlbSwgdXNlcikge1xuICAgIHJldHVybiBpc093bmVyKGl0ZW0sIHVzZXIpIHx8IGlzSXRlbUFkbWluKGl0ZW0sIHVzZXIpO1xufVxuLyoqXG4gKiBEb2VzIHRoZSB1c2VyIGhhdmUgYWRtaW4gY2FwYWJpbGl0aWVzIG9uIHRoaXMgaXRlbVxuICovXG5mdW5jdGlvbiBpc0l0ZW1BZG1pbihpdGVtLCB1c2VyKSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIGlmIHRoaXMgZmxhZyBpcyBhbHJlYWR5IHNldCAocHJvYmFibHkgaG9tZSBhcHApLCB1c2UgaXRcbiAgICBpZiAoaXRlbS5pc0FkbWluICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICEhaXRlbS5pc0FkbWluO1xuICAgIH1cbiAgICBjb25zdCBpdGVtT3duZXIgPSBpdGVtLm93bmVyO1xuICAgIGNvbnN0IGl0ZW1Db250cm9sQWRtaW4gPSBpdGVtLml0ZW1Db250cm9sID09PSBcImFkbWluXCI7XG4gICAgY29uc3QgZXNyaVVzZXJzID0gW1wiZXNyaV9saXZpbmdhdGxhc1wiLCBcImVzcmlfZGVtb2dyYXBoaWNzXCIsIFwiZXNyaV9ib3VuZGFyaWVzXCJdO1xuICAgIGlmICgoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgJiZcbiAgICAgICAgIWlzT3duZXIoaXRlbSwgdXNlcikgJiZcbiAgICAgICAgaXRlbUNvbnRyb2xBZG1pbiAmJlxuICAgICAgICBpdGVtT3duZXIuaW5jbHVkZXMoXCJlc3JpX1wiKSAmJlxuICAgICAgICAvLyBwb3J0YWwgaW5jb3JyZWN0bHkgcmV0dXJucyBcIml0ZW1Db250cm9sPVwiYWRtaW5cIiBmb3IgZXNyaSBvd25lZCBpdGVtc1xuICAgICAgICAhZXNyaVVzZXJzLmluY2x1ZGVzKGl0ZW1Pd25lcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbUNvbnRyb2xBZG1pbjtcbn1cbmNvbnN0IGl0ZW1zQmVsb25nVG9Vc2VyT3JnID0gKGl0ZW1zLCB1c2VyKSA9PiB7XG4gICAgcmV0dXJuICEhdXNlci5vcmdJZCAmJiBpdGVtcy5ldmVyeSgoaXRlbSkgPT4gaXRlbS5pc09yZ0l0ZW0pO1xufTtcbmNvbnN0IGdldEl0ZW1Ib21lQXBwVXJsID0gKGl0ZW1JZCwgYmFzZVVybCkgPT4gYCR7YWRkVHJhaWxpbmdTbGFzaElmTWlzc2luZyhiYXNlVXJsKX1pdGVtLmh0bWw/aWQ9JHtpdGVtSWR9YDtcblxuZXhwb3J0IHsgaXNTdWJzY3JpYmVyIGFzIGEsIGlzUHJlbWl1bSBhcyBiLCBjYW5VcGRhdGVJdGVtIGFzIGMsIGl0ZW1zQmVsb25nVG9Vc2VyT3JnIGFzIGQsIGdldEl0ZW1Ib21lQXBwVXJsIGFzIGcsIGlzT3duZXIgYXMgaSwgdXNlcklzSXRlbUFkbWluIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbS0zNTM1NTUyZC5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGwgYXMgbG9hZE1vZHVsZXMgfSBmcm9tICcuL2xvYWRNb2R1bGVzLWI0YWMxMjQ3LmpzJztcbmltcG9ydCB7IGMgYXMgY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5IH0gZnJvbSAnLi9kb20tNGQzNjc2NzcuanMnO1xuXG5jb25zdCBsYW5ndWFnZU1hcCA9IG5ldyBNYXAoW1xuICAgIFtcImFyXCIsIFwiYXJcIl0sXG4gICAgW1wiYmdcIiwgXCJiZ1wiXSxcbiAgICBbXCJic1wiLCBcImJzXCJdLFxuICAgIFtcImNhXCIsIFwiY2FcIl0sXG4gICAgW1wiY3NcIiwgXCJjc1wiXSxcbiAgICBbXCJkYVwiLCBcImRhXCJdLFxuICAgIFtcImRlXCIsIFwiZGVcIl0sXG4gICAgW1wiZWxcIiwgXCJlbFwiXSxcbiAgICBbXCJlblwiLCBcImVuXCJdLFxuICAgIFtcImVzXCIsIFwiZXNcIl0sXG4gICAgW1wiZXRcIiwgXCJldFwiXSxcbiAgICBbXCJmaVwiLCBcImZpXCJdLFxuICAgIFtcImZyXCIsIFwiZnJcIl0sXG4gICAgW1wiaGVcIiwgXCJoZVwiXSxcbiAgICBbXCJoclwiLCBcImhyXCJdLFxuICAgIFtcImh1XCIsIFwiaHVcIl0sXG4gICAgW1wiaWRcIiwgXCJpZFwiXSxcbiAgICBbXCJpdFwiLCBcIml0XCJdLFxuICAgIFtcImphXCIsIFwiamFcIl0sXG4gICAgW1wia29cIiwgXCJrb1wiXSxcbiAgICBbXCJsdFwiLCBcImx0XCJdLFxuICAgIFtcImx2XCIsIFwibHZcIl0sXG4gICAgW1wibmJcIiwgXCJuYlwiXSxcbiAgICBbXCJubFwiLCBcIm5sXCJdLFxuICAgIFtcInBsXCIsIFwicGxcIl0sXG4gICAgW1wicHQtYnJcIiwgXCJwdC1CUlwiXSxcbiAgICBbXCJwdC1wdFwiLCBcInB0LVBUXCJdLFxuICAgIFtcInJvXCIsIFwicm9cIl0sXG4gICAgW1wicnVcIiwgXCJydVwiXSxcbiAgICBbXCJza1wiLCBcInNrXCJdLFxuICAgIFtcInNsXCIsIFwic2xcIl0sXG4gICAgW1wic3JcIiwgXCJzclwiXSxcbiAgICBbXCJzdlwiLCBcInN2XCJdLFxuICAgIFtcInRoXCIsIFwidGhcIl0sXG4gICAgW1widHJcIiwgXCJ0clwiXSxcbiAgICBbXCJ1a1wiLCBcInVrXCJdLFxuICAgIFtcInZpXCIsIFwidmlcIl0sXG4gICAgW1wiemgtY25cIiwgXCJ6aC1DTlwiXSxcbiAgICBbXCJ6aC1oa1wiLCBcInpoLUhLXCJdLFxuICAgIFtcInpoLXR3XCIsIFwiemgtVFdcIl1cbl0pO1xuLy8gcnRsXG5mdW5jdGlvbiBnZXRFbGVtZW50RGlyKGVsKSB7XG4gICAgcmV0dXJuIGdldEVsZW1lbnRQcm9wKGVsLCBcImRpclwiLCBcImx0clwiKTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnRQcm9wKGVsLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IGNsb3Nlc3RXaXRoUHJvcCA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShlbCwgYFske3Byb3B9XWApO1xuICAgIHJldHVybiBjbG9zZXN0V2l0aFByb3AgPyBjbG9zZXN0V2l0aFByb3AuZ2V0QXR0cmlidXRlKHByb3ApIDogdmFsdWU7XG59XG4vLyBjc3NcbmNvbnN0IENTU19VVElMSVRZID0ge1xuICAgIHJ0bDogXCJhcmNnaXMtLXJ0bFwiXG59O1xuYXN5bmMgZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgYXBpLCB0eXBlLCBwbGFjZXMgfSA9IG9wdGlvbnMgfHwge307XG4gICAgaWYgKGFwaSA9PT0gNCkge1xuICAgICAgICBjb25zdCBbaW50bF0gPSBhd2FpdCBsb2FkTW9kdWxlcyhbXCJlc3JpL2ludGxcIl0pO1xuICAgICAgICBjb25zdCBudW1iZXJGb3JtYXRJbnRsT3B0aW9ucyA9IGludGwuY29udmVydE51bWJlckZvcm1hdFRvSW50bE9wdGlvbnMoe1xuICAgICAgICAgICAgcGxhY2VzLFxuICAgICAgICAgICAgc3R5bGU6IHR5cGUsXG4gICAgICAgICAgICBkaWdpdFNlcGFyYXRvcjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGludGwuZm9ybWF0TnVtYmVyKG51bWJlciwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBudW1iZXJGb3JtYXRJbnRsT3B0aW9ucyksIHsgc3R5bGU6IHR5cGUgfSkpO1xuICAgIH1cbiAgICBjb25zdCBbZG9qb051bWJlcl0gPSBhd2FpdCBsb2FkTW9kdWxlcyhbXCJkb2pvL251bWJlclwiXSk7XG4gICAgcmV0dXJuIGRvam9OdW1iZXIuZm9ybWF0KG51bWJlciwge1xuICAgICAgICB0eXBlLFxuICAgICAgICBwbGFjZXMsXG4gICAgICAgIHBhdHRlcm46IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wYXR0ZXJuXG4gICAgfSk7XG59XG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gICAgY29uc3QgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xuICAgIGNvbnN0IGRheVNob3J0TW9udGhZZWFyID0ge1xuICAgICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgICAgbW9udGg6IFwic2hvcnRcIixcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgIH07XG4gICAgaWYgKCFjYWNoZVtsYW5nXSkge1xuICAgICAgICBjYWNoZVtsYW5nXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLCBkYXlTaG9ydE1vbnRoWWVhcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVtsYW5nXS5mb3JtYXQoZGF0ZSk7XG59XG5mdW5jdGlvbiBmb3JtYXRQbHVyYWwobGFuZywgc3RyaW5nT2JqLCBudW1iZXIpIHtcbiAgICBjb25zdCBzaW5nbGVzID0gW1wiaWRcIiwgXCJqYVwiLCBcImtvXCIsIFwidGhcIiwgXCJ2aVwiLCBcInpoLWNuXCIsIFwiemgtaGtcIiwgXCJ6aC10d1wiXTtcbiAgICBjb25zdCBsaWtlRW5nbGlzaCA9IFtcbiAgICAgICAgXCJlblwiLFxuICAgICAgICBcImNhXCIsXG4gICAgICAgIFwiZGFcIixcbiAgICAgICAgXCJkZVwiLFxuICAgICAgICBcImVsXCIsXG4gICAgICAgIFwiZXNcIixcbiAgICAgICAgXCJldFwiLFxuICAgICAgICBcImZpXCIsXG4gICAgICAgIFwiaGlcIixcbiAgICAgICAgXCJodVwiLFxuICAgICAgICBcIml0XCIsXG4gICAgICAgIFwibmJcIixcbiAgICAgICAgXCJubFwiLFxuICAgICAgICBcInB0LXB0XCIsXG4gICAgICAgIFwic3ZcIixcbiAgICAgICAgXCJ0clwiXG4gICAgXTtcbiAgICBjb25zdCBsb2NhbGUgPSBsYW5nICE9PSBudWxsICYmIGxhbmcgIT09IHZvaWQgMCA/IGxhbmcgOiBcImVuXCI7XG4gICAgLy8gaWYgdGhlIG51bWJlciBpcyBvbmUsIG9yIGl0IGlzIGEgXCJzaW1wbGVcIiBsYW5ndWFnZSwgcmV0dXJuIHRoZSAxIHN0cmluZ1xuICAgIGlmIChudW1iZXIgPT09IDEgfHwgc2luZ2xlcy5pbmNsdWRlcyhsb2NhbGUpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdPYmouc2luZ2xlLnJlcGxhY2UoXCIke251bWJlcn1cIiwgXCIxXCIpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgbnVtYmVyIGlzIG5vdCAxIGFuZCB0aGUgbGFuZ3VhZ2UgdXNlcyB0aGUgc2FtZSBwbHVyYWxpemF0aW9uIHN0cmF0ZWd5IGFzIGVuZ2xpc2gsXG4gICAgLy8gcmV0dXJuIHRoZSBtdWx0aXBsZSBzdHJpbmdcbiAgICBpZiAobnVtYmVyICE9PSAxICYmIGxpa2VFbmdsaXNoLmluY2x1ZGVzKGxvY2FsZSkpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ09iai5tdWx0aXBsZS5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke251bWJlcn1gKTtcbiAgICB9XG4gICAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgd29ya2VkLCByZXR1cm4gdGhlIFwidW5rbm93blwiIHN0cmluZ1xuICAgIHJldHVybiBzdHJpbmdPYmoudW5rbm93bi5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke251bWJlcn1gKTtcbn1cblxuZXhwb3J0IHsgQ1NTX1VUSUxJVFkgYXMgQywgZm9ybWF0RGF0ZSBhcyBhLCBmb3JtYXRQbHVyYWwgYXMgYiwgZm9ybWF0TnVtYmVyIGFzIGYsIGdldEVsZW1lbnREaXIgYXMgZywgbGFuZ3VhZ2VNYXAgYXMgbCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYW5ndWFnZVV0aWwtZWYwZTU0YjIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyBjIGFzIGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeSB9IGZyb20gJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCB7IGwgYXMgbGFuZ3VhZ2VNYXAgfSBmcm9tICcuL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyc7XG5pbXBvcnQgeyBhIGFzIGdldEFzc2V0UGF0aCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuXG4vLyBodHRwczovL21lZGl1bS5jb20vc3RlbmNpbC10cmlja3MvaW1wbGVtZW50aW5nLWludGVybmF0aW9uYWxpc2F0aW9uLWkxOG4td2l0aC1zdGVuY2lsLTVlNjU1OTU1NDExN1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50Q2xvc2VzdExhbmd1YWdlKGVsZW1lbnQpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCBjbG9zZXN0RWxlbWVudCA9IChfYSA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShlbGVtZW50LCBcIltsYW5nXVwiKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9jID0gKF9iID0gZWxlbWVudC5zaGFkb3dSb290KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iub3duZXJEb2N1bWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAvLyBsYW5ndWFnZSBzZXQgYnkgdGhlIGNhbGxpbmcgYXBwbGljYXRpb24gb3IgYnJvd3Nlci4gZGVmYXVsdHMgdG8gZW5nbGlzaC5cbiAgICBjb25zdCBsYW5nID0gKChjbG9zZXN0RWxlbWVudCA9PT0gbnVsbCB8fCBjbG9zZXN0RWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xvc2VzdEVsZW1lbnQubGFuZykgfHwgKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5sYW5ndWFnZSkgfHwgXCJlblwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsYW5ndWFnZU1hcC5oYXMobGFuZykpIHtcbiAgICAgICAgcmV0dXJuIGxhbmd1YWdlTWFwLmdldChsYW5nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFwicnUtUlVcIiBtYXBzIHRvIFwicnVcIiB1c2UgY2FzZVxuICAgICAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcuc2xpY2UoMCwgMikpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcuc2xpY2UoMCwgMikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiZW5cIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZUludGwoZWxlbWVudCkge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIC8vIGl0J3MgT0sgaWYgd2UgZG9uJ3QgaGF2ZSB0aGUgNCBsZXR0ZXIgbGFuZ3VhZ2UgZmlsZSBmb3IgaXRcbiAgICAvLyA0IGxldHRlciBsYW5ndWFnZSBjb2RlIG5lZWRlZCBmb3IgZm9ybWF0dGluZyBudW1iZXJzXG4gICAgY29uc3QgY2xvc2VzdEVsZW1lbnQgPSAoX2EgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWxlbWVudCwgXCJbbGFuZ11cIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYyA9IChfYiA9IGVsZW1lbnQuc2hhZG93Um9vdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgLy8gbGFuZ3VhZ2Ugc2V0IGJ5IHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIuIGRlZmF1bHRzIHRvIGVuZ2xpc2guXG4gICAgY29uc3QgbGFuZyA9ICgoY2xvc2VzdEVsZW1lbnQgPT09IG51bGwgfHwgY2xvc2VzdEVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsb3Nlc3RFbGVtZW50LmxhbmcpIHx8IChuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubGFuZ3VhZ2UpIHx8IFwiZW5cIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcpKSB7XG4gICAgICAgIHJldHVybiBsYW5ndWFnZU1hcC5nZXQobGFuZyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcuc2xpY2UoMCwgMikpKSB7XG4gICAgICAgICAgICAvLyB3ZSBzdXBwb3J0IHRoZSAyIGxldHRlciBjb2RlZCBsYW5ndWFnZVxuICAgICAgICAgICAgLy8gZS5nLiBpdC1DSCB2cyBpdFxuICAgICAgICAgICAgcmV0dXJuIGxhbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJlblwiO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGZldGNoKGdldEFzc2V0UGF0aChgLi4vYXJjZ2lzLWFwcC1hc3NldHMvaTE4bi8ke2NvbXBvbmVudE5hbWV9LmkxOG4uJHtsb2NhbGV9Lmpzb25gKSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lm9rKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0Lmpzb24oKSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgIH0sICgpID0+IHJlamVjdCgpKTtcbiAgICB9KTtcbn1cbmNvbnN0IHN0cmluZ0NhY2hlID0ge307XG5mdW5jdGlvbiBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgbG9jYWxlKSB7XG4gICAgY29uc3QgaWQgPSBgJHtjb21wb25lbnROYW1lfSR7bG9jYWxlfWA7XG4gICAgaWYgKCFzdHJpbmdDYWNoZVtpZF0pIHtcbiAgICAgICAgc3RyaW5nQ2FjaGVbaWRdID0gZmV0Y2hMb2NhbGVTdHJpbmdzRm9yQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIGxvY2FsZSk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdDYWNoZVtpZF07XG59XG4vKipcbiAqIEdldCBzdHJpbmdzIGFuZCBsYW5ndWFnZSBjb2Rlcy5cbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgMiBsYW5ndWFnZSBjb2Rlcy5cbiAqIFRoZSBmaXJzdCBvbmUgcmV0dXJucyBhIGNvZGUgdGhhdCdzIGFsc28gc3VwcG9ydGVkIGFzIGEgbGFuZ3VhZ2UgZmlsZS5cbiAqIFRoZSBzZWNvbmQgb25lIHJldHVybnMgYSBjb2RlIHdoZXJlIHRoZXJlIGlzIHN1cHBvcnQgZm9yIHRoZSBmaXJzdCAyIGxldHRlcnMgb2YgdGhlIGNvZGUgYXMgcGFydCBvZiBhIGxhbmd1YWdlIGZpbGUsXG4gKiBidXQgd2lsbCByZXR1cm4gdGhlIG9yaWdpbmFsIDQgbGV0dGVyIGNvZGUgZnJvbSB0aGUgcGFnZS5cbiAqIEUuZy4gRm9yIFwiaXQtY2hcIiBpdCB3aWxsIHJldHVybiBcIml0XCIgYXMgdGhlIGZpcnN0IGxhbmd1YWdlIGNvZGUgYW5kIFwiaXQtY2hcIiBhcyB0aGUgc2Vjb25kLlxuICogVGhlIHNlY29uZCBvbmUgaXMgcmVxdWlyZWQgZm9yIGVzcmkuaW50bC5zZXRMb2NhbGUoKSB0byBnZXQgdGhlIGNvcnJlY3QgZm9ybWF0dGluZy5cbiAqXG4gKiBJZiBhIHRhZ05hbWUgaXMgcHJvdmlkZWQgaXQgd2lsbCBvdmVyd2l0ZSB0aGUgZWxlbWVudCdzIHRhZ05hbWVcbiAqXG4gKiAgQHJldHVybiBbIHN0cmluZ3MsIGZpcnN0IGxhbmd1YWdlIGNvZGUsIHNlY29uZCBsYW5ndWFnZSBjb2RlXVxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gdGFnTmFtZSB8fCBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBjb21wb25lbnRMYW5ndWFnZSA9IGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZShlbGVtZW50KTtcbiAgICBjb25zdCBjb21wb25lbnRMYW5ndWFnZUludGwgPSBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2VJbnRsKGVsZW1lbnQpO1xuICAgIGxldCBzdHJpbmdzO1xuICAgIHRyeSB7XG4gICAgICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgY29tcG9uZW50TGFuZ3VhZ2UpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYG5vIGxvY2FsZSBmb3IgJHtjb21wb25lbnROYW1lfSAoJHtjb21wb25lbnRMYW5ndWFnZX0pIGxvYWRpbmcgZGVmYXVsdCBsb2NhbGUgZW4uYCk7XG4gICAgICAgIHN0cmluZ3MgPSBhd2FpdCBmZXRjaExvY2FsZVN0cmluZ3NGcm9tQ2FjaGUoY29tcG9uZW50TmFtZSwgXCJlblwiKTtcbiAgICB9XG4gICAgcmV0dXJuIFtzdHJpbmdzLCBjb21wb25lbnRMYW5ndWFnZSwgY29tcG9uZW50TGFuZ3VhZ2VJbnRsXTtcbn1cblxuZXhwb3J0IHsgZ2V0Q29tcG9uZW50Q2xvc2VzdExhbmd1YWdlIGFzIGEsIGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2NhbGUtMDUwYjZkYjkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9