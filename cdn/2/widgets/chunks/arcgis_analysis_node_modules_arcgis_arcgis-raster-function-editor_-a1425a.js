"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-a1425a"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-factor-function-editor-312f39de.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-factor-function-editor-312f39de.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxCteFactorFunctionEditor)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");




















const verticalFactorTypes = {
    BINARY: "factorFunctionBinary",
    LINEAR: "factorFunctionLinear",
    SYM_LINEAR: "factorFunctionSymLinear",
    INVERSE_LINEAR: "factorFunctionInvLinear",
    SYM_INVERSE_LINEAR: "factorFunctionSymInvLinear",
    COS: "factorFunctionCos",
    SEC: "factorFunctionSec",
    COS_SEC: "factorFunctionCosSec",
    SEC_COS: "factorFunctionSecCos"
    // TABLE: "factorFunctionTable"  // not yet supported
};
const horizontalFactorTypes = {
    BINARY: "factorFunctionBinary",
    FORWARD: "factorFunctionForward",
    LINEAR: "factorFunctionLinear",
    INVERSE_LINEAR: "factorFunctionInvLinear"
    // TABLE: "factorFunctionTable"  // not yet supported
};
const factorFunctionTypeModifiers = {
    zeroFactor: "factorFunctionZeroFactor",
    cutAngle: "factorFunctionCutAngle",
    sideValue: "factorFunctionSideFactor",
    slope: "factorFunctionSlope",
    lowCutAngle: "factorFunctionLowCutAngle",
    highCutAngle: "factorFunctionHighCutAngle",
    power: "localPower",
    cosPower: "factorFunctionCosPower",
    secPower: "factorFunctionSecPower",
    table: "factorFunctionTablePath"
};
/**
 * ***************************************************************************
 *                          Vertical Factor Modifiers
 * ***************************************************************************
 *
 * Keyword                   ZF      LCA    HCA    Slope  Power  CP    SP
 * ------------------------  ------  -----  -----  -----  -----  -----  -----
 * Binary                    1.0     -30    30     ~      ~      ~      ~
 * Linear                    1.0     -90    90      1/90  ~      ~      ~
 * Symmetric linear          1.0     -90    90      1/90  ~      ~      ~
 * Inverse linear            1.0     -45    45     -1/45  ~      ~      ~
 * Symmetric inverse linear  1.0     -45    45     -1/45  ~      ~      ~
 * Cos                       ~       -90    90     ~      1.0    ~      ~
 * Sec                       ~       -90    90     ~      1.0    ~      ~
 * Cos_sec                   ~       -90    90     ~      ~      1.0    1.0
 * Sec_cos                   ~       -90    90     ~      ~      1.0    1.0
 *
 */
const verticalFactorModifiers = {
    BINARY: {
        zeroFactor: 1.0,
        lowCutAngle: -30,
        highCutAngle: 30
    },
    LINEAR: {
        zeroFactor: 1.0,
        lowCutAngle: -90,
        highCutAngle: 90,
        slope: 1 / 90
    },
    SYM_LINEAR: {
        zeroFactor: 1.0,
        lowCutAngle: -90,
        highCutAngle: 90,
        slope: 1 / 90
    },
    INVERSE_LINEAR: {
        zeroFactor: 1.0,
        lowCutAngle: -45,
        highCutAngle: 45,
        slope: -(1 / 45)
    },
    SYM_INVERSE_LINEAR: {
        zeroFactor: 1.0,
        lowCutAngle: -45,
        highCutAngle: 45,
        slope: -(1 / 45)
    },
    COS: {
        lowCutAngle: -90,
        highCutAngle: 90,
        power: 1.0
    },
    SEC: {
        lowCutAngle: -90,
        highCutAngle: 90,
        power: 1.0
    },
    COS_SEC: {
        lowCutAngle: -90,
        highCutAngle: 90,
        cosPower: 1.0,
        secPower: 1.0
    },
    SEC_COS: {
        lowCutAngle: -90,
        highCutAngle: 90,
        cosPower: 1.0,
        secPower: 1.0
    }
};
/**
 * ***************************************************************************
 *                          Horizontal Factor Modifiers
 * ***************************************************************************
 *
 * Keywords         Zero factor   Cut angle     Slope   Side value
 * --------------   -----------   -----------   -----   ---------
 * Binary           1.0            45           ~       ~
 * Forward          0.5            45 (fixed)   ~       1.0
 * Linear           0.5           181            1/90   ~
 * Inverse linear   2.0           180           -1/90   ~
 */
const horizotalFactorModifiers = {
    BINARY: {
        zeroFactor: 1.0,
        cutAngle: 45
    },
    FORWARD: {
        zeroFactor: 0.5,
        // cutAngle: 45, // fixed so do not show in editor
        sideValue: 1
    },
    LINEAR: {
        zeroFactor: 0.5,
        cutAngle: 181,
        slope: 1 / 90
    },
    INVERSE_LINEAR: {
        zeroFactor: 2.0,
        cutAngle: 180,
        slope: -(1 / 90)
    }
};
const HelpClickHandlerKeys = {
    inputArgHelpClickHandler: "inputArgHelpClickHandler"
};
const component = "rfx-factor-function-editor";
const HTMLClasses = {
    container: `${component}__container`,
    select: `${component}__select`,
    text: `${component}__text`
};

const rfxCteFactorFunctionEditorCss = ":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}:host{height:100%;margin-bottom:var(--rfx-half-spacing)}.rfx-factor-function-editor__container{border:1px var(--calcite-color-border-1) solid;border-radius:var(--calcite-border-radius);padding:var(--rfx-half-spacing);margin-bottom:var(--rfx-half-spacing)}.rfx-factor-function-editor__select{padding:var(--rfx-quarter-spacing) var(--rfx-quarter-spacing) 0 var(--rfx-quarter-spacing)}.rfx-factor-function-editor__text{padding:0.5em 0 0.5em 0}";

const RfxCteFactorFunctionEditor = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        /**
         * The same override widget is used for both vertical factor function override
         * and horizontal factor function override; hence define mode.
         */
        this.factorFunctionMode = null;
        /**
         * value and i18n strings key value pairs
         * for Dropdown options in vertical factor
         * key value should be the key values from verticalFactorModifiers
         * value should be corresponding i18n string from rfxArgs
         */
        this.verticalFactorTypes = verticalFactorTypes;
        /**
         * value and i18n strings key value pairs
         * for Dropdown options in horizontal factor
         * key value should be the key values from horizontalFactorModifiers
         * value should be corresponding i18n string from rfxArgs
         */
        this.horizontalFactorTypes = horizontalFactorTypes;
        /**
         * value and i18n strings key value pairs
         * for display string for Table below dropdown
         * common for both vertical and horizontal factor types
         * key value should be the key values from vertical/horizontalFactorModifiers
         * value should be corresponding i18n string from enumLabels
         */
        this.factorFunctionTypeModifiers = factorFunctionTypeModifiers;
        this.verticalFactorModifiers = verticalFactorModifiers;
        this.horizotalFactorModifiers = horizotalFactorModifiers;
        /**
         * Grid Schema
         */
        this.gridSchema = {
            gridLayout: {},
            gridOptions: [],
            hasBorder: false,
            hasHeader: false,
            canAdd: false,
            hasIdColumn: false,
            canRemove: false,
            isStacked: true
        };
        /**
         * holds store of factor function type select
         */
        this.store = [];
        /**
         * value of factor function type select
         */
        this.factorFunctionType = null;
        this.handleFactorFunctionTypeChange = (e) => {
            e.stopPropagation();
            const element = e.target;
            const value = element.value;
            this.factorFunctionType = value;
            const gridStore = this.createDataObjects(this.factorFunctionType);
            this.gridStore = gridStore;
        };
        this.updateGridValue = (event) => {
            const { detail: { gridOptions } } = event;
            if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(gridOptions)) {
                return;
            }
            const gridStore = this.gridStore;
            gridStore.forEach((storeItem, index) => {
                storeItem.factorModifierValue = gridOptions[index].factorModifierValue;
                return storeItem;
            });
            this.gridStore = [...gridStore];
        };
        this.gridStore = [];
        this.widgetArgs = undefined;
        this.value = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.processWidgetArgs(this.widgetArgs);
    }
    async componentWillLoad() {
        ({ strings: this.strings, dir: this.direction } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(".")));
        this.setupInitialState();
    }
    componentWillRender() {
        this.initGrid();
        this.setWidgetValue();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * All validation logic of widgetArgs -> mainly the inputArgs and triggerAttributes
     * goes here
     */
    processWidgetArgs({ inputArgs, triggerArgs }) {
        // should have only one inputArg
        Object.keys(inputArgs).forEach((_inputArg) => {
            const rfxArg = inputArgs[_inputArg];
            this.inputArg = rfxArg;
            rfxArg.input = this.hostElement;
        });
        // this.triggerArgs should have only 1 key
        Object.keys(triggerArgs).forEach((triggerArgKey) => {
            const triggerArg = triggerArgs[triggerArgKey];
            this.triggerArg = triggerArg;
            this.factorFunctionMode =
                triggerArgKey.indexOf("vertical") >= 0
                    ? "VERTICAL"
                    : triggerArgKey.indexOf("horizontal") >= 0
                        ? "HORIZONTAL"
                        : null;
            triggerArg?.input?.addEventListener("rfxArgumentChange", ({ detail: { value } }) => {
                this.handleTriggerArgChange(value);
            });
        });
    }
    setupInitialState() {
        this.store = this.getFactorFunctionTypesStore();
        const persistedData = this.inputArg?.value;
        const { factorFunctionType, gridData } = this.parseWidgetValue(persistedData);
        this.factorFunctionType = factorFunctionType ?? this.store[0]?.key;
        const gridStore = this.createDataObjects(this.factorFunctionType);
        // if persisted data is present override the gridStore
        if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(gridData)) {
            gridStore.forEach((storeItem, index) => {
                storeItem.factorModifierValue = gridData[index];
                return storeItem;
            });
        }
        this.gridStore = gridStore;
    }
    /**
     * Creates an array of data objects, expected input of form: { zeroFactor: 1.0, cutAngle: 45 }
     * use factorFunctionTypeModifiers object to push the i18n display name for appropriate modifier
     * Format is such that, it is understood by the rfx-grid
     * @returns {Object[]} An array of data objects.
     */
    createDataObjects(factorFunctionType) {
        // get Modifiers for that factorFunctionType
        const factorFunctionTypeModifier = this.getFactorFunctionTypeModifier(factorFunctionType);
        const widgetData = [];
        if (!factorFunctionTypeModifier) {
            return widgetData;
        }
        Object.keys(factorFunctionTypeModifier).forEach((modifier, index) => {
            widgetData.push({
                id: index + 1,
                factorModifier: this.strings[this.factorFunctionTypeModifiers[modifier]],
                factorModifierValue: (0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_16__.f)(factorFunctionTypeModifier[modifier], 3)
            });
        });
        return widgetData;
    }
    initGrid() {
        /* Shell Layout as the column headers won't be visible
         * | modifier Text | modifier value | (name)
         * | string        | long           | (dataType)
         * | false         | true           | (isEditable)
         */
        const gridLayout = {
            factorModifier: {
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__.G.text
            },
            factorModifierValue: {
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__.G.number
            }
        };
        // set when data is persisted & whenever factor function type is changed
        const gridOptions = this.gridStore;
        this.gridSchema = {
            ...this.gridSchema,
            gridLayout,
            gridOptions
        };
    }
    attachHelpClickEventHandlers() {
        const inputArgHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.inputArg.displayName,
            referenceElement: this.widgetContainer,
            helpTextID: this.inputArg?.helpTextID
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.inputArgHelpClickHandler, inputArgHelpClickHandler);
    }
    /**
     * handles raster change, mainly used to clear value when raster is removed
     */
    handleTriggerArgChange(value) {
        const isRasterRemoved = (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(value);
        if (!isRasterRemoved) {
            return;
        }
        this.setWidgetValue();
    }
    /**
     * function returns store for creating Factor Function Types Select
     */
    getFactorFunctionTypesStore() {
        let store;
        switch (this.factorFunctionMode) {
            case "VERTICAL":
                store = this.verticalFactorTypes;
                break;
            case "HORIZONTAL":
                store = this.horizontalFactorTypes;
                break;
        }
        const selectOptions = Object.keys(store).map((selectOption) => {
            return {
                key: selectOption,
                label: this.strings[store[selectOption]]
            };
        });
        return selectOptions;
    }
    /**
     * @factorFunctionType {string} - key of either verticalFactorTypes or horizontalFactorTypes
     * function which returns the Factor Function Type Modifier;
     * using verticalFactorModifiers, horizotalFactorModifiers and factorFunctionMode
     */
    getFactorFunctionTypeModifier(factorFunctionType) {
        let factorFunctionTypeModifier;
        switch (this.factorFunctionMode) {
            case "VERTICAL":
                factorFunctionTypeModifier = this.verticalFactorModifiers[factorFunctionType];
                break;
            case "HORIZONTAL":
                factorFunctionTypeModifier = this.horizotalFactorModifiers[factorFunctionType];
                break;
        }
        return factorFunctionTypeModifier;
    }
    /**
     * Function parses the widget Value and return data in fromat accepted by
     * grid store and the factorFunctionTypeSelect widget
     * @param {string} widgetValue usually of the format "BINARY 12 2.5 0.3"
     */
    parseWidgetValue(widgetValue) {
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(widgetValue)) {
            return {
                gridData: undefined,
                factorFunctionType: undefined
            };
        }
        // widgetValue                                       // BINARY 10 10 2
        const widgetValueFragments = widgetValue.split(" "); // ["BINARY", "10", "10", "2"]
        const factorFunctionType = widgetValueFragments[0]; // ["BINARY"]
        const factorFunctionGridData = widgetValueFragments.splice(1); // ["10", "10", "2"]
        return {
            gridData: factorFunctionGridData,
            factorFunctionType: factorFunctionType
        };
    }
    setWidgetValue() {
        const widgetValue = `${this.factorFunctionType} ${this.gridStore
            .map((option) => option.factorModifierValue)
            .join(" ")}`;
        const isTriggerArgPresent = !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(this.triggerArg?.input?.value);
        const value = isTriggerArgPresent ? widgetValue : undefined;
        this.value = value;
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "default", ref: (e) => {
                this.widgetContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.inputArg.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers.get(HelpClickHandlerKeys.inputArgHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: HTMLClasses.container }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: HTMLClasses.select }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: HTMLClasses.text }, this.strings.type), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dtex-common-select", { options: this.store, value: this.factorFunctionType, onRfxArgumentChange: this.handleFactorFunctionTypeChange })), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-grid", { hasHeader: this.gridSchema.hasHeader, canAdd: this.gridSchema.canAdd, hasIdColumn: this.gridSchema.hasIdColumn, gridLayout: this.gridSchema.gridLayout, gridOptions: this.gridSchema.gridOptions, hasBorder: this.gridSchema.hasBorder, canRemove: this.gridSchema.canRemove, isStacked: this.gridSchema.isStacked, onRfxGridOptionChange: this.updateGridValue })))));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};
RfxCteFactorFunctionEditor.style = rfxCteFactorFunctionEditorCss;



//# sourceMappingURL=rfx-cte-factor-function-editor-312f39de.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-factor-function-editor.entry.js":
/*!************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-factor-function-editor.entry.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_factor_function_editor: () => (/* reexport safe */ _rfx_cte_factor_function_editor_312f39de_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_factor_function_editor_312f39de_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-factor-function-editor-312f39de.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-factor-function-editor-312f39de.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");






















//# sourceMappingURL=rfx-cte-factor-function-editor.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ formatNumberToLocale),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   i: () => (/* binding */ isValidNumber),
/* harmony export */   p: () => (/* binding */ parseNumber),
/* harmony export */   s: () => (/* binding */ sanitizeNumber)
/* harmony export */ });
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");



/**
 * Indicates if a provided number value is valid.
 * An invalid value is: undefined | NaN | Infinite | -Infinite | null
 * See for more details:
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN
 * @param {number | undefined | null} value value to check
 * @returns {boolean} if valid or not
 */
function isValidNumber(value) {
    return value !== undefined && value !== null && Number.isNaN(value) === false && Number.isFinite(value) === true;
}
/**
 * Returns a string representation of the provided number for use with calcite-input. It also
 * guards against invalid types following this logic:
 *   - If the value is valid (not NaN, finite), the value is returned as a string
 *   - If not and if a valid default value is provided, the default value is returned as a string
 *   - If not, an empty string is returned
 * @param value
 * @param defaultValue
 * @returns a sanitized string
 */
function sanitizeNumber(value, defaultValue) {
    let returnedValue;
    if (value !== null) {
        const testedValue = typeof value === "string" ? Number.parseFloat(value) : value;
        if (isValidNumber(testedValue))
            returnedValue = testedValue;
        else if (isValidNumber(defaultValue))
            returnedValue = defaultValue;
    }
    return returnedValue === undefined ? "" : `${returnedValue}`;
}
/**
 * Parses a value string to a number for use with calcite-input. If the string is empty, it will return undefined.
 * If the string is otherwise invalid, it will return NaN.
 * @param value calcite-input value
 * @returns {number | undefined} the parsed number
 */
function parseNumber(value) {
    if (value === "")
        return undefined;
    return Number.parseFloat(value);
}
/**
 * Formats a number to a specified number of decimal places.
 *
 * @param {number} value - The number to format.
 * @param {number} [fractionDigits=3] - The number of decimal places to include in the formatted number. Defaults to 3.
 * @returns {number|undefined} - The formatted number, or undefined if the input value is empty.
 */
function formatNumber(value, fractionDigits = 3) {
    if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value))
        return undefined;
    return Number.parseFloat(value.toFixed(fractionDigits));
}
/**
 * Formats a number or string representing a number according to the locale, passing Intl number format options
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/ReferenceGlobal_Objects/Intl/NumberFormat/NumberFormat#options
 * @param {number | string | undefined} value to be formatted and localized
 * @param {Intl.NumberFormatOptions} formatOptions options object matching Intl.NumberFormat
 * @returns {string} localized / rounded string
 */
function formatNumberToLocale(value, formatOptions) {
    let formattedValue = "";
    if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value) && !Number.isNaN(value)) {
        const localeCode = (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__.g)().locale;
        formattedValue = Intl.NumberFormat(localeCode, formatOptions).format(Number(value));
    }
    return formattedValue;
}



//# sourceMappingURL=sanitize-number-d84114f7.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLWExNDI1YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxSDtBQUNoQztBQUNsRDtBQUM4QjtBQUNSO0FBQ0U7QUFDVDtBQUNYO0FBQ0Q7QUFDTztBQUNrQjtBQUM5QjtBQUMwQjtBQUNGO0FBQzFCO0FBQ087QUFDNEI7QUFDdkI7QUFDQTs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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Q0M7QUFDSTtBQUNBOztBQUUzQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QnVFO0FBQ047O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkJBQTJCO0FBQ3RDLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGNBQWM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0JBQW9CO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxrQkFBa0I7QUFDL0I7QUFDQTtBQUNBLFFBQVEsMkRBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2QkFBNkI7QUFDeEMsV0FBVywwQkFBMEI7QUFDckMsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkRBQWU7QUFDeEIsMkJBQTJCLG1FQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBOztBQUVtSDs7QUFFbkg7Ozs7Ozs7Ozs7Ozs7Ozs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4RTs7QUFFOUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS9yZngtY3RlLWZhY3Rvci1mdW5jdGlvbi1lZGl0b3ItMzEyZjM5ZGUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LWN0ZS1mYWN0b3ItZnVuY3Rpb24tZWRpdG9yLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3Nhbml0aXplLW51bWJlci1kODQxMTRmNy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGcgYXMgZ2V0QXNzZXRQYXRoLCBoLCBhIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWRhMWI3MTM4LmpzJztcbmltcG9ydCB7IGIgYXMgZmV0Y2hDb21wb25lbnRMb2NhbGVTdHJpbmdzIH0gZnJvbSAnLi9sb2NhbGl6YXRpb24taGVscGVyLTQ4MTliNjdkLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvbGFuZy5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzRW1wdHlEYXRhSXRlbSB9IGZyb20gJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0IHsgVSBhcyBVSURlZmF1bHRzIH0gZnJvbSAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgeyBHIGFzIEdyaWRDb2x1bW4gfSBmcm9tICcuL2ludGVyZmFjZXMtZDBjNjg5NDQuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvaWRlbnRpdHkvSWRlbnRpdHlNYW5hZ2VyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BbGdvcml0aG1pY0NvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvTXVsdGlwYXJ0Q29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL0NvbG9yLmpzJztcbmltcG9ydCAnLi9jb2xvclJhbXBVdGlscy04YmRkNDZjNS5qcyc7XG5pbXBvcnQgeyBmIGFzIGZvcm1hdE51bWJlciB9IGZyb20gJy4vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcblxuY29uc3QgdmVydGljYWxGYWN0b3JUeXBlcyA9IHtcbiAgICBCSU5BUlk6IFwiZmFjdG9yRnVuY3Rpb25CaW5hcnlcIixcbiAgICBMSU5FQVI6IFwiZmFjdG9yRnVuY3Rpb25MaW5lYXJcIixcbiAgICBTWU1fTElORUFSOiBcImZhY3RvckZ1bmN0aW9uU3ltTGluZWFyXCIsXG4gICAgSU5WRVJTRV9MSU5FQVI6IFwiZmFjdG9yRnVuY3Rpb25JbnZMaW5lYXJcIixcbiAgICBTWU1fSU5WRVJTRV9MSU5FQVI6IFwiZmFjdG9yRnVuY3Rpb25TeW1JbnZMaW5lYXJcIixcbiAgICBDT1M6IFwiZmFjdG9yRnVuY3Rpb25Db3NcIixcbiAgICBTRUM6IFwiZmFjdG9yRnVuY3Rpb25TZWNcIixcbiAgICBDT1NfU0VDOiBcImZhY3RvckZ1bmN0aW9uQ29zU2VjXCIsXG4gICAgU0VDX0NPUzogXCJmYWN0b3JGdW5jdGlvblNlY0Nvc1wiXG4gICAgLy8gVEFCTEU6IFwiZmFjdG9yRnVuY3Rpb25UYWJsZVwiICAvLyBub3QgeWV0IHN1cHBvcnRlZFxufTtcbmNvbnN0IGhvcml6b250YWxGYWN0b3JUeXBlcyA9IHtcbiAgICBCSU5BUlk6IFwiZmFjdG9yRnVuY3Rpb25CaW5hcnlcIixcbiAgICBGT1JXQVJEOiBcImZhY3RvckZ1bmN0aW9uRm9yd2FyZFwiLFxuICAgIExJTkVBUjogXCJmYWN0b3JGdW5jdGlvbkxpbmVhclwiLFxuICAgIElOVkVSU0VfTElORUFSOiBcImZhY3RvckZ1bmN0aW9uSW52TGluZWFyXCJcbiAgICAvLyBUQUJMRTogXCJmYWN0b3JGdW5jdGlvblRhYmxlXCIgIC8vIG5vdCB5ZXQgc3VwcG9ydGVkXG59O1xuY29uc3QgZmFjdG9yRnVuY3Rpb25UeXBlTW9kaWZpZXJzID0ge1xuICAgIHplcm9GYWN0b3I6IFwiZmFjdG9yRnVuY3Rpb25aZXJvRmFjdG9yXCIsXG4gICAgY3V0QW5nbGU6IFwiZmFjdG9yRnVuY3Rpb25DdXRBbmdsZVwiLFxuICAgIHNpZGVWYWx1ZTogXCJmYWN0b3JGdW5jdGlvblNpZGVGYWN0b3JcIixcbiAgICBzbG9wZTogXCJmYWN0b3JGdW5jdGlvblNsb3BlXCIsXG4gICAgbG93Q3V0QW5nbGU6IFwiZmFjdG9yRnVuY3Rpb25Mb3dDdXRBbmdsZVwiLFxuICAgIGhpZ2hDdXRBbmdsZTogXCJmYWN0b3JGdW5jdGlvbkhpZ2hDdXRBbmdsZVwiLFxuICAgIHBvd2VyOiBcImxvY2FsUG93ZXJcIixcbiAgICBjb3NQb3dlcjogXCJmYWN0b3JGdW5jdGlvbkNvc1Bvd2VyXCIsXG4gICAgc2VjUG93ZXI6IFwiZmFjdG9yRnVuY3Rpb25TZWNQb3dlclwiLFxuICAgIHRhYmxlOiBcImZhY3RvckZ1bmN0aW9uVGFibGVQYXRoXCJcbn07XG4vKipcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRpY2FsIEZhY3RvciBNb2RpZmllcnNcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICpcbiAqIEtleXdvcmQgICAgICAgICAgICAgICAgICAgWkYgICAgICBMQ0EgICAgSENBICAgIFNsb3BlICBQb3dlciAgQ1AgICAgU1BcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgLS0tLS0tICAtLS0tLSAgLS0tLS0gIC0tLS0tICAtLS0tLSAgLS0tLS0gIC0tLS0tXG4gKiBCaW5hcnkgICAgICAgICAgICAgICAgICAgIDEuMCAgICAgLTMwICAgIDMwICAgICB+ICAgICAgfiAgICAgIH4gICAgICB+XG4gKiBMaW5lYXIgICAgICAgICAgICAgICAgICAgIDEuMCAgICAgLTkwICAgIDkwICAgICAgMS85MCAgfiAgICAgIH4gICAgICB+XG4gKiBTeW1tZXRyaWMgbGluZWFyICAgICAgICAgIDEuMCAgICAgLTkwICAgIDkwICAgICAgMS85MCAgfiAgICAgIH4gICAgICB+XG4gKiBJbnZlcnNlIGxpbmVhciAgICAgICAgICAgIDEuMCAgICAgLTQ1ICAgIDQ1ICAgICAtMS80NSAgfiAgICAgIH4gICAgICB+XG4gKiBTeW1tZXRyaWMgaW52ZXJzZSBsaW5lYXIgIDEuMCAgICAgLTQ1ICAgIDQ1ICAgICAtMS80NSAgfiAgICAgIH4gICAgICB+XG4gKiBDb3MgICAgICAgICAgICAgICAgICAgICAgIH4gICAgICAgLTkwICAgIDkwICAgICB+ICAgICAgMS4wICAgIH4gICAgICB+XG4gKiBTZWMgICAgICAgICAgICAgICAgICAgICAgIH4gICAgICAgLTkwICAgIDkwICAgICB+ICAgICAgMS4wICAgIH4gICAgICB+XG4gKiBDb3Nfc2VjICAgICAgICAgICAgICAgICAgIH4gICAgICAgLTkwICAgIDkwICAgICB+ICAgICAgfiAgICAgIDEuMCAgICAxLjBcbiAqIFNlY19jb3MgICAgICAgICAgICAgICAgICAgfiAgICAgICAtOTAgICAgOTAgICAgIH4gICAgICB+ICAgICAgMS4wICAgIDEuMFxuICpcbiAqL1xuY29uc3QgdmVydGljYWxGYWN0b3JNb2RpZmllcnMgPSB7XG4gICAgQklOQVJZOiB7XG4gICAgICAgIHplcm9GYWN0b3I6IDEuMCxcbiAgICAgICAgbG93Q3V0QW5nbGU6IC0zMCxcbiAgICAgICAgaGlnaEN1dEFuZ2xlOiAzMFxuICAgIH0sXG4gICAgTElORUFSOiB7XG4gICAgICAgIHplcm9GYWN0b3I6IDEuMCxcbiAgICAgICAgbG93Q3V0QW5nbGU6IC05MCxcbiAgICAgICAgaGlnaEN1dEFuZ2xlOiA5MCxcbiAgICAgICAgc2xvcGU6IDEgLyA5MFxuICAgIH0sXG4gICAgU1lNX0xJTkVBUjoge1xuICAgICAgICB6ZXJvRmFjdG9yOiAxLjAsXG4gICAgICAgIGxvd0N1dEFuZ2xlOiAtOTAsXG4gICAgICAgIGhpZ2hDdXRBbmdsZTogOTAsXG4gICAgICAgIHNsb3BlOiAxIC8gOTBcbiAgICB9LFxuICAgIElOVkVSU0VfTElORUFSOiB7XG4gICAgICAgIHplcm9GYWN0b3I6IDEuMCxcbiAgICAgICAgbG93Q3V0QW5nbGU6IC00NSxcbiAgICAgICAgaGlnaEN1dEFuZ2xlOiA0NSxcbiAgICAgICAgc2xvcGU6IC0oMSAvIDQ1KVxuICAgIH0sXG4gICAgU1lNX0lOVkVSU0VfTElORUFSOiB7XG4gICAgICAgIHplcm9GYWN0b3I6IDEuMCxcbiAgICAgICAgbG93Q3V0QW5nbGU6IC00NSxcbiAgICAgICAgaGlnaEN1dEFuZ2xlOiA0NSxcbiAgICAgICAgc2xvcGU6IC0oMSAvIDQ1KVxuICAgIH0sXG4gICAgQ09TOiB7XG4gICAgICAgIGxvd0N1dEFuZ2xlOiAtOTAsXG4gICAgICAgIGhpZ2hDdXRBbmdsZTogOTAsXG4gICAgICAgIHBvd2VyOiAxLjBcbiAgICB9LFxuICAgIFNFQzoge1xuICAgICAgICBsb3dDdXRBbmdsZTogLTkwLFxuICAgICAgICBoaWdoQ3V0QW5nbGU6IDkwLFxuICAgICAgICBwb3dlcjogMS4wXG4gICAgfSxcbiAgICBDT1NfU0VDOiB7XG4gICAgICAgIGxvd0N1dEFuZ2xlOiAtOTAsXG4gICAgICAgIGhpZ2hDdXRBbmdsZTogOTAsXG4gICAgICAgIGNvc1Bvd2VyOiAxLjAsXG4gICAgICAgIHNlY1Bvd2VyOiAxLjBcbiAgICB9LFxuICAgIFNFQ19DT1M6IHtcbiAgICAgICAgbG93Q3V0QW5nbGU6IC05MCxcbiAgICAgICAgaGlnaEN1dEFuZ2xlOiA5MCxcbiAgICAgICAgY29zUG93ZXI6IDEuMCxcbiAgICAgICAgc2VjUG93ZXI6IDEuMFxuICAgIH1cbn07XG4vKipcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgIEhvcml6b250YWwgRmFjdG9yIE1vZGlmaWVyc1xuICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKlxuICogS2V5d29yZHMgICAgICAgICBaZXJvIGZhY3RvciAgIEN1dCBhbmdsZSAgICAgU2xvcGUgICBTaWRlIHZhbHVlXG4gKiAtLS0tLS0tLS0tLS0tLSAgIC0tLS0tLS0tLS0tICAgLS0tLS0tLS0tLS0gICAtLS0tLSAgIC0tLS0tLS0tLVxuICogQmluYXJ5ICAgICAgICAgICAxLjAgICAgICAgICAgICA0NSAgICAgICAgICAgfiAgICAgICB+XG4gKiBGb3J3YXJkICAgICAgICAgIDAuNSAgICAgICAgICAgIDQ1IChmaXhlZCkgICB+ICAgICAgIDEuMFxuICogTGluZWFyICAgICAgICAgICAwLjUgICAgICAgICAgIDE4MSAgICAgICAgICAgIDEvOTAgICB+XG4gKiBJbnZlcnNlIGxpbmVhciAgIDIuMCAgICAgICAgICAgMTgwICAgICAgICAgICAtMS85MCAgIH5cbiAqL1xuY29uc3QgaG9yaXpvdGFsRmFjdG9yTW9kaWZpZXJzID0ge1xuICAgIEJJTkFSWToge1xuICAgICAgICB6ZXJvRmFjdG9yOiAxLjAsXG4gICAgICAgIGN1dEFuZ2xlOiA0NVxuICAgIH0sXG4gICAgRk9SV0FSRDoge1xuICAgICAgICB6ZXJvRmFjdG9yOiAwLjUsXG4gICAgICAgIC8vIGN1dEFuZ2xlOiA0NSwgLy8gZml4ZWQgc28gZG8gbm90IHNob3cgaW4gZWRpdG9yXG4gICAgICAgIHNpZGVWYWx1ZTogMVxuICAgIH0sXG4gICAgTElORUFSOiB7XG4gICAgICAgIHplcm9GYWN0b3I6IDAuNSxcbiAgICAgICAgY3V0QW5nbGU6IDE4MSxcbiAgICAgICAgc2xvcGU6IDEgLyA5MFxuICAgIH0sXG4gICAgSU5WRVJTRV9MSU5FQVI6IHtcbiAgICAgICAgemVyb0ZhY3RvcjogMi4wLFxuICAgICAgICBjdXRBbmdsZTogMTgwLFxuICAgICAgICBzbG9wZTogLSgxIC8gOTApXG4gICAgfVxufTtcbmNvbnN0IEhlbHBDbGlja0hhbmRsZXJLZXlzID0ge1xuICAgIGlucHV0QXJnSGVscENsaWNrSGFuZGxlcjogXCJpbnB1dEFyZ0hlbHBDbGlja0hhbmRsZXJcIlxufTtcbmNvbnN0IGNvbXBvbmVudCA9IFwicmZ4LWZhY3Rvci1mdW5jdGlvbi1lZGl0b3JcIjtcbmNvbnN0IEhUTUxDbGFzc2VzID0ge1xuICAgIGNvbnRhaW5lcjogYCR7Y29tcG9uZW50fV9fY29udGFpbmVyYCxcbiAgICBzZWxlY3Q6IGAke2NvbXBvbmVudH1fX3NlbGVjdGAsXG4gICAgdGV4dDogYCR7Y29tcG9uZW50fV9fdGV4dGBcbn07XG5cbmNvbnN0IHJmeEN0ZUZhY3RvckZ1bmN0aW9uRWRpdG9yQ3NzID0gXCI6cm9vdHstLWNhbGNpdGUtY29sb3ItYnJhbmQ6IzAwN2FjMjstLWNhbGNpdGUtY29sb3ItYnJhbmQtaG92ZXI6IzAwNjE5YjstLWNhbGNpdGUtY29sb3ItYnJhbmQtcHJlc3M6IzAwNDg3NDstLWNhbGNpdGUtY29sb3Itc3RhdHVzLWluZm86IzAwNjE5YjstLWNhbGNpdGUtY29sb3Itc3RhdHVzLXN1Y2Nlc3M6IzM1YWM0NjstLWNhbGNpdGUtY29sb3Itc3RhdHVzLXdhcm5pbmc6I2VkZDMxNzstLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlcjojZDgzMDIwOy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyLWhvdmVyOiNhODJiMWU7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXItcHJlc3M6IzdjMWQxMzstLWNhbGNpdGUtY29sb3ItYmFja2dyb3VuZDojZjhmOGY4Oy0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTE6I2ZmZmZmZjstLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0yOiNmM2YzZjM7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMzojZWFlYWVhOy0tY2FsY2l0ZS1jb2xvci10ZXh0LTE6IzE1MTUxNTstLWNhbGNpdGUtY29sb3ItdGV4dC0yOiM0YTRhNGE7LS1jYWxjaXRlLWNvbG9yLXRleHQtMzojNmE2YTZhOy0tY2FsY2l0ZS1jb2xvci10ZXh0LWludmVyc2U6I2ZmZmZmZjstLWNhbGNpdGUtY29sb3ItdGV4dC1saW5rOiMwMDYxOWI7LS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xOiNjYWNhY2E7LS1jYWxjaXRlLWNvbG9yLWJvcmRlci0yOiNkNGQ0ZDQ7LS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zOiNkZmRmZGY7LS1jYWxjaXRlLWNvbG9yLWJvcmRlci1pbnB1dDojOTQ5NDk0Oy0tcmZ4LXF1YXJ0ZXItc3BhY2luZzowLjI1cmVtOy0tcmZ4LWhhbGYtc3BhY2luZzowLjVyZW07LS1yZngtdGhyZWUtcXVhcnRlci1zcGFjaW5nOjAuNzVyZW07LS1yZngtZnVsbC1zcGFjaW5nOjFyZW07LS1yZngtY29tcG9uZW50LWRlZmF1bHQtd2lkdGg6MTAwJTstLXJmeC11aS1ib3JkZXItaW5wdXQ6dmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMik7LS1yZngtcG9wb3Zlci1jb250ZW50LW1pbi1oZWlnaHQ6MzB2aDstLXJmeC1wb3BvdmVyLWNvbnRlbnQtbWF4LWhlaWdodDo2MHZoOy0tcmZ4LXBvcG92ZXItY29udGVudC1oZWlnaHQ6NDV2aDstLXJmeC13aWRnZXQtY29udGVudC1oZWlnaHQ6MzB2aH06aG9zdHtoZWlnaHQ6MTAwJTttYXJnaW4tYm90dG9tOnZhcigtLXJmeC1oYWxmLXNwYWNpbmcpfS5yZngtZmFjdG9yLWZ1bmN0aW9uLWVkaXRvcl9fY29udGFpbmVye2JvcmRlcjoxcHggdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSkgc29saWQ7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLWJvcmRlci1yYWRpdXMpO3BhZGRpbmc6dmFyKC0tcmZ4LWhhbGYtc3BhY2luZyk7bWFyZ2luLWJvdHRvbTp2YXIoLS1yZngtaGFsZi1zcGFjaW5nKX0ucmZ4LWZhY3Rvci1mdW5jdGlvbi1lZGl0b3JfX3NlbGVjdHtwYWRkaW5nOnZhcigtLXJmeC1xdWFydGVyLXNwYWNpbmcpIHZhcigtLXJmeC1xdWFydGVyLXNwYWNpbmcpIDAgdmFyKC0tcmZ4LXF1YXJ0ZXItc3BhY2luZyl9LnJmeC1mYWN0b3ItZnVuY3Rpb24tZWRpdG9yX190ZXh0e3BhZGRpbmc6MC41ZW0gMCAwLjVlbSAwfVwiO1xuXG5jb25zdCBSZnhDdGVGYWN0b3JGdW5jdGlvbkVkaXRvciA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMucmZ4QXJndW1lbnRDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcInJmeEFyZ3VtZW50Q2hhbmdlXCIsIDcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIGV2ZW50IGhhbmRsZXJzIGZvciBoZWxwIGFjdGlvbiBjbGljaywgc3RvcmVkIGluIGNvbm5lY3RlZCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAgKiBmZXRjaGluZyBmdW5jdGlvbiBvbiBlYWNoIHJlbmRlciAoIHRvIGF2b2lkIGNvbW1vbiBiYWQgcHJhY3RpY2UgKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNhbWUgb3ZlcnJpZGUgd2lkZ2V0IGlzIHVzZWQgZm9yIGJvdGggdmVydGljYWwgZmFjdG9yIGZ1bmN0aW9uIG92ZXJyaWRlXG4gICAgICAgICAqIGFuZCBob3Jpem9udGFsIGZhY3RvciBmdW5jdGlvbiBvdmVycmlkZTsgaGVuY2UgZGVmaW5lIG1vZGUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uTW9kZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB2YWx1ZSBhbmQgaTE4biBzdHJpbmdzIGtleSB2YWx1ZSBwYWlyc1xuICAgICAgICAgKiBmb3IgRHJvcGRvd24gb3B0aW9ucyBpbiB2ZXJ0aWNhbCBmYWN0b3JcbiAgICAgICAgICoga2V5IHZhbHVlIHNob3VsZCBiZSB0aGUga2V5IHZhbHVlcyBmcm9tIHZlcnRpY2FsRmFjdG9yTW9kaWZpZXJzXG4gICAgICAgICAqIHZhbHVlIHNob3VsZCBiZSBjb3JyZXNwb25kaW5nIGkxOG4gc3RyaW5nIGZyb20gcmZ4QXJnc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNhbEZhY3RvclR5cGVzID0gdmVydGljYWxGYWN0b3JUeXBlcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHZhbHVlIGFuZCBpMThuIHN0cmluZ3Mga2V5IHZhbHVlIHBhaXJzXG4gICAgICAgICAqIGZvciBEcm9wZG93biBvcHRpb25zIGluIGhvcml6b250YWwgZmFjdG9yXG4gICAgICAgICAqIGtleSB2YWx1ZSBzaG91bGQgYmUgdGhlIGtleSB2YWx1ZXMgZnJvbSBob3Jpem9udGFsRmFjdG9yTW9kaWZpZXJzXG4gICAgICAgICAqIHZhbHVlIHNob3VsZCBiZSBjb3JyZXNwb25kaW5nIGkxOG4gc3RyaW5nIGZyb20gcmZ4QXJnc1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ob3Jpem9udGFsRmFjdG9yVHlwZXMgPSBob3Jpem9udGFsRmFjdG9yVHlwZXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB2YWx1ZSBhbmQgaTE4biBzdHJpbmdzIGtleSB2YWx1ZSBwYWlyc1xuICAgICAgICAgKiBmb3IgZGlzcGxheSBzdHJpbmcgZm9yIFRhYmxlIGJlbG93IGRyb3Bkb3duXG4gICAgICAgICAqIGNvbW1vbiBmb3IgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBmYWN0b3IgdHlwZXNcbiAgICAgICAgICoga2V5IHZhbHVlIHNob3VsZCBiZSB0aGUga2V5IHZhbHVlcyBmcm9tIHZlcnRpY2FsL2hvcml6b250YWxGYWN0b3JNb2RpZmllcnNcbiAgICAgICAgICogdmFsdWUgc2hvdWxkIGJlIGNvcnJlc3BvbmRpbmcgaTE4biBzdHJpbmcgZnJvbSBlbnVtTGFiZWxzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVycyA9IGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVycztcbiAgICAgICAgdGhpcy52ZXJ0aWNhbEZhY3Rvck1vZGlmaWVycyA9IHZlcnRpY2FsRmFjdG9yTW9kaWZpZXJzO1xuICAgICAgICB0aGlzLmhvcml6b3RhbEZhY3Rvck1vZGlmaWVycyA9IGhvcml6b3RhbEZhY3Rvck1vZGlmaWVycztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdyaWQgU2NoZW1hXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdyaWRTY2hlbWEgPSB7XG4gICAgICAgICAgICBncmlkTGF5b3V0OiB7fSxcbiAgICAgICAgICAgIGdyaWRPcHRpb25zOiBbXSxcbiAgICAgICAgICAgIGhhc0JvcmRlcjogZmFsc2UsXG4gICAgICAgICAgICBoYXNIZWFkZXI6IGZhbHNlLFxuICAgICAgICAgICAgY2FuQWRkOiBmYWxzZSxcbiAgICAgICAgICAgIGhhc0lkQ29sdW1uOiBmYWxzZSxcbiAgICAgICAgICAgIGNhblJlbW92ZTogZmFsc2UsXG4gICAgICAgICAgICBpc1N0YWNrZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGhvbGRzIHN0b3JlIG9mIGZhY3RvciBmdW5jdGlvbiB0eXBlIHNlbGVjdFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9yZSA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogdmFsdWUgb2YgZmFjdG9yIGZ1bmN0aW9uIHR5cGUgc2VsZWN0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uVHlwZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFuZGxlRmFjdG9yRnVuY3Rpb25UeXBlQ2hhbmdlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uVHlwZSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZ3JpZFN0b3JlID0gdGhpcy5jcmVhdGVEYXRhT2JqZWN0cyh0aGlzLmZhY3RvckZ1bmN0aW9uVHlwZSk7XG4gICAgICAgICAgICB0aGlzLmdyaWRTdG9yZSA9IGdyaWRTdG9yZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVHcmlkVmFsdWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGV0YWlsOiB7IGdyaWRPcHRpb25zIH0gfSA9IGV2ZW50O1xuICAgICAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbShncmlkT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBncmlkU3RvcmUgPSB0aGlzLmdyaWRTdG9yZTtcbiAgICAgICAgICAgIGdyaWRTdG9yZS5mb3JFYWNoKChzdG9yZUl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgc3RvcmVJdGVtLmZhY3Rvck1vZGlmaWVyVmFsdWUgPSBncmlkT3B0aW9uc1tpbmRleF0uZmFjdG9yTW9kaWZpZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVJdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmdyaWRTdG9yZSA9IFsuLi5ncmlkU3RvcmVdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdyaWRTdG9yZSA9IFtdO1xuICAgICAgICB0aGlzLndpZGdldEFyZ3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBMaWZlY3ljbGVcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzV2lkZ2V0QXJncyh0aGlzLndpZGdldEFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgKHsgc3RyaW5nczogdGhpcy5zdHJpbmdzLCBkaXI6IHRoaXMuZGlyZWN0aW9uIH0gPSBhd2FpdCBmZXRjaENvbXBvbmVudExvY2FsZVN0cmluZ3ModGhpcy5ob3N0RWxlbWVudCwgZ2V0QXNzZXRQYXRoKFwiLlwiKSkpO1xuICAgICAgICB0aGlzLnNldHVwSW5pdGlhbFN0YXRlKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxSZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuaW5pdEdyaWQoKTtcbiAgICAgICAgdGhpcy5zZXRXaWRnZXRWYWx1ZSgpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgICAgICB0aGlzLmF0dGFjaEhlbHBDbGlja0V2ZW50SGFuZGxlcnMoKTtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIEFsbCB2YWxpZGF0aW9uIGxvZ2ljIG9mIHdpZGdldEFyZ3MgLT4gbWFpbmx5IHRoZSBpbnB1dEFyZ3MgYW5kIHRyaWdnZXJBdHRyaWJ1dGVzXG4gICAgICogZ29lcyBoZXJlXG4gICAgICovXG4gICAgcHJvY2Vzc1dpZGdldEFyZ3MoeyBpbnB1dEFyZ3MsIHRyaWdnZXJBcmdzIH0pIHtcbiAgICAgICAgLy8gc2hvdWxkIGhhdmUgb25seSBvbmUgaW5wdXRBcmdcbiAgICAgICAgT2JqZWN0LmtleXMoaW5wdXRBcmdzKS5mb3JFYWNoKChfaW5wdXRBcmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJmeEFyZyA9IGlucHV0QXJnc1tfaW5wdXRBcmddO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEFyZyA9IHJmeEFyZztcbiAgICAgICAgICAgIHJmeEFyZy5pbnB1dCA9IHRoaXMuaG9zdEVsZW1lbnQ7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyB0aGlzLnRyaWdnZXJBcmdzIHNob3VsZCBoYXZlIG9ubHkgMSBrZXlcbiAgICAgICAgT2JqZWN0LmtleXModHJpZ2dlckFyZ3MpLmZvckVhY2goKHRyaWdnZXJBcmdLZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJBcmcgPSB0cmlnZ2VyQXJnc1t0cmlnZ2VyQXJnS2V5XTtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckFyZyA9IHRyaWdnZXJBcmc7XG4gICAgICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uTW9kZSA9XG4gICAgICAgICAgICAgICAgdHJpZ2dlckFyZ0tleS5pbmRleE9mKFwidmVydGljYWxcIikgPj0gMFxuICAgICAgICAgICAgICAgICAgICA/IFwiVkVSVElDQUxcIlxuICAgICAgICAgICAgICAgICAgICA6IHRyaWdnZXJBcmdLZXkuaW5kZXhPZihcImhvcml6b250YWxcIikgPj0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIkhPUklaT05UQUxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgdHJpZ2dlckFyZz8uaW5wdXQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJyZnhBcmd1bWVudENoYW5nZVwiLCAoeyBkZXRhaWw6IHsgdmFsdWUgfSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmlnZ2VyQXJnQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0dXBJbml0aWFsU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0aGlzLmdldEZhY3RvckZ1bmN0aW9uVHlwZXNTdG9yZSgpO1xuICAgICAgICBjb25zdCBwZXJzaXN0ZWREYXRhID0gdGhpcy5pbnB1dEFyZz8udmFsdWU7XG4gICAgICAgIGNvbnN0IHsgZmFjdG9yRnVuY3Rpb25UeXBlLCBncmlkRGF0YSB9ID0gdGhpcy5wYXJzZVdpZGdldFZhbHVlKHBlcnNpc3RlZERhdGEpO1xuICAgICAgICB0aGlzLmZhY3RvckZ1bmN0aW9uVHlwZSA9IGZhY3RvckZ1bmN0aW9uVHlwZSA/PyB0aGlzLnN0b3JlWzBdPy5rZXk7XG4gICAgICAgIGNvbnN0IGdyaWRTdG9yZSA9IHRoaXMuY3JlYXRlRGF0YU9iamVjdHModGhpcy5mYWN0b3JGdW5jdGlvblR5cGUpO1xuICAgICAgICAvLyBpZiBwZXJzaXN0ZWQgZGF0YSBpcyBwcmVzZW50IG92ZXJyaWRlIHRoZSBncmlkU3RvcmVcbiAgICAgICAgaWYgKCFpc0VtcHR5RGF0YUl0ZW0oZ3JpZERhdGEpKSB7XG4gICAgICAgICAgICBncmlkU3RvcmUuZm9yRWFjaCgoc3RvcmVJdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0b3JlSXRlbS5mYWN0b3JNb2RpZmllclZhbHVlID0gZ3JpZERhdGFbaW5kZXhdO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZUl0ZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdyaWRTdG9yZSA9IGdyaWRTdG9yZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBkYXRhIG9iamVjdHMsIGV4cGVjdGVkIGlucHV0IG9mIGZvcm06IHsgemVyb0ZhY3RvcjogMS4wLCBjdXRBbmdsZTogNDUgfVxuICAgICAqIHVzZSBmYWN0b3JGdW5jdGlvblR5cGVNb2RpZmllcnMgb2JqZWN0IHRvIHB1c2ggdGhlIGkxOG4gZGlzcGxheSBuYW1lIGZvciBhcHByb3ByaWF0ZSBtb2RpZmllclxuICAgICAqIEZvcm1hdCBpcyBzdWNoIHRoYXQsIGl0IGlzIHVuZGVyc3Rvb2QgYnkgdGhlIHJmeC1ncmlkXG4gICAgICogQHJldHVybnMge09iamVjdFtdfSBBbiBhcnJheSBvZiBkYXRhIG9iamVjdHMuXG4gICAgICovXG4gICAgY3JlYXRlRGF0YU9iamVjdHMoZmFjdG9yRnVuY3Rpb25UeXBlKSB7XG4gICAgICAgIC8vIGdldCBNb2RpZmllcnMgZm9yIHRoYXQgZmFjdG9yRnVuY3Rpb25UeXBlXG4gICAgICAgIGNvbnN0IGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyID0gdGhpcy5nZXRGYWN0b3JGdW5jdGlvblR5cGVNb2RpZmllcihmYWN0b3JGdW5jdGlvblR5cGUpO1xuICAgICAgICBjb25zdCB3aWRnZXREYXRhID0gW107XG4gICAgICAgIGlmICghZmFjdG9yRnVuY3Rpb25UeXBlTW9kaWZpZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB3aWRnZXREYXRhO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyKS5mb3JFYWNoKChtb2RpZmllciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHdpZGdldERhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICBmYWN0b3JNb2RpZmllcjogdGhpcy5zdHJpbmdzW3RoaXMuZmFjdG9yRnVuY3Rpb25UeXBlTW9kaWZpZXJzW21vZGlmaWVyXV0sXG4gICAgICAgICAgICAgICAgZmFjdG9yTW9kaWZpZXJWYWx1ZTogZm9ybWF0TnVtYmVyKGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyW21vZGlmaWVyXSwgMylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHdpZGdldERhdGE7XG4gICAgfVxuICAgIGluaXRHcmlkKCkge1xuICAgICAgICAvKiBTaGVsbCBMYXlvdXQgYXMgdGhlIGNvbHVtbiBoZWFkZXJzIHdvbid0IGJlIHZpc2libGVcbiAgICAgICAgICogfCBtb2RpZmllciBUZXh0IHwgbW9kaWZpZXIgdmFsdWUgfCAobmFtZSlcbiAgICAgICAgICogfCBzdHJpbmcgICAgICAgIHwgbG9uZyAgICAgICAgICAgfCAoZGF0YVR5cGUpXG4gICAgICAgICAqIHwgZmFsc2UgICAgICAgICB8IHRydWUgICAgICAgICAgIHwgKGlzRWRpdGFibGUpXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBncmlkTGF5b3V0ID0ge1xuICAgICAgICAgICAgZmFjdG9yTW9kaWZpZXI6IHtcbiAgICAgICAgICAgICAgICB1aVR5cGU6IEdyaWRDb2x1bW4udGV4dFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhY3Rvck1vZGlmaWVyVmFsdWU6IHtcbiAgICAgICAgICAgICAgICB1aVR5cGU6IEdyaWRDb2x1bW4ubnVtYmVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIHNldCB3aGVuIGRhdGEgaXMgcGVyc2lzdGVkICYgd2hlbmV2ZXIgZmFjdG9yIGZ1bmN0aW9uIHR5cGUgaXMgY2hhbmdlZFxuICAgICAgICBjb25zdCBncmlkT3B0aW9ucyA9IHRoaXMuZ3JpZFN0b3JlO1xuICAgICAgICB0aGlzLmdyaWRTY2hlbWEgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmdyaWRTY2hlbWEsXG4gICAgICAgICAgICBncmlkTGF5b3V0LFxuICAgICAgICAgICAgZ3JpZE9wdGlvbnNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRBcmdIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgIGhlYWRpbmc6IHRoaXMuaW5wdXRBcmcuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50OiB0aGlzLndpZGdldENvbnRhaW5lcixcbiAgICAgICAgICAgIGhlbHBUZXh0SUQ6IHRoaXMuaW5wdXRBcmc/LmhlbHBUZXh0SURcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMuaW5wdXRBcmdIZWxwQ2xpY2tIYW5kbGVyLCBpbnB1dEFyZ0hlbHBDbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBoYW5kbGVzIHJhc3RlciBjaGFuZ2UsIG1haW5seSB1c2VkIHRvIGNsZWFyIHZhbHVlIHdoZW4gcmFzdGVyIGlzIHJlbW92ZWRcbiAgICAgKi9cbiAgICBoYW5kbGVUcmlnZ2VyQXJnQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGlzUmFzdGVyUmVtb3ZlZCA9IGlzRW1wdHlEYXRhSXRlbSh2YWx1ZSk7XG4gICAgICAgIGlmICghaXNSYXN0ZXJSZW1vdmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRXaWRnZXRWYWx1ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiByZXR1cm5zIHN0b3JlIGZvciBjcmVhdGluZyBGYWN0b3IgRnVuY3Rpb24gVHlwZXMgU2VsZWN0XG4gICAgICovXG4gICAgZ2V0RmFjdG9yRnVuY3Rpb25UeXBlc1N0b3JlKCkge1xuICAgICAgICBsZXQgc3RvcmU7XG4gICAgICAgIHN3aXRjaCAodGhpcy5mYWN0b3JGdW5jdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJWRVJUSUNBTFwiOlxuICAgICAgICAgICAgICAgIHN0b3JlID0gdGhpcy52ZXJ0aWNhbEZhY3RvclR5cGVzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkhPUklaT05UQUxcIjpcbiAgICAgICAgICAgICAgICBzdG9yZSA9IHRoaXMuaG9yaXpvbnRhbEZhY3RvclR5cGVzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlbGVjdE9wdGlvbnMgPSBPYmplY3Qua2V5cyhzdG9yZSkubWFwKChzZWxlY3RPcHRpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAga2V5OiBzZWxlY3RPcHRpb24sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuc3RyaW5nc1tzdG9yZVtzZWxlY3RPcHRpb25dXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RPcHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZmFjdG9yRnVuY3Rpb25UeXBlIHtzdHJpbmd9IC0ga2V5IG9mIGVpdGhlciB2ZXJ0aWNhbEZhY3RvclR5cGVzIG9yIGhvcml6b250YWxGYWN0b3JUeXBlc1xuICAgICAqIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIEZhY3RvciBGdW5jdGlvbiBUeXBlIE1vZGlmaWVyO1xuICAgICAqIHVzaW5nIHZlcnRpY2FsRmFjdG9yTW9kaWZpZXJzLCBob3Jpem90YWxGYWN0b3JNb2RpZmllcnMgYW5kIGZhY3RvckZ1bmN0aW9uTW9kZVxuICAgICAqL1xuICAgIGdldEZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyKGZhY3RvckZ1bmN0aW9uVHlwZSkge1xuICAgICAgICBsZXQgZmFjdG9yRnVuY3Rpb25UeXBlTW9kaWZpZXI7XG4gICAgICAgIHN3aXRjaCAodGhpcy5mYWN0b3JGdW5jdGlvbk1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJWRVJUSUNBTFwiOlxuICAgICAgICAgICAgICAgIGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyID0gdGhpcy52ZXJ0aWNhbEZhY3Rvck1vZGlmaWVyc1tmYWN0b3JGdW5jdGlvblR5cGVdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkhPUklaT05UQUxcIjpcbiAgICAgICAgICAgICAgICBmYWN0b3JGdW5jdGlvblR5cGVNb2RpZmllciA9IHRoaXMuaG9yaXpvdGFsRmFjdG9yTW9kaWZpZXJzW2ZhY3RvckZ1bmN0aW9uVHlwZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY3RvckZ1bmN0aW9uVHlwZU1vZGlmaWVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiBwYXJzZXMgdGhlIHdpZGdldCBWYWx1ZSBhbmQgcmV0dXJuIGRhdGEgaW4gZnJvbWF0IGFjY2VwdGVkIGJ5XG4gICAgICogZ3JpZCBzdG9yZSBhbmQgdGhlIGZhY3RvckZ1bmN0aW9uVHlwZVNlbGVjdCB3aWRnZXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gd2lkZ2V0VmFsdWUgdXN1YWxseSBvZiB0aGUgZm9ybWF0IFwiQklOQVJZIDEyIDIuNSAwLjNcIlxuICAgICAqL1xuICAgIHBhcnNlV2lkZ2V0VmFsdWUod2lkZ2V0VmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbSh3aWRnZXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3JpZERhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmYWN0b3JGdW5jdGlvblR5cGU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3aWRnZXRWYWx1ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJJTkFSWSAxMCAxMCAyXG4gICAgICAgIGNvbnN0IHdpZGdldFZhbHVlRnJhZ21lbnRzID0gd2lkZ2V0VmFsdWUuc3BsaXQoXCIgXCIpOyAvLyBbXCJCSU5BUllcIiwgXCIxMFwiLCBcIjEwXCIsIFwiMlwiXVxuICAgICAgICBjb25zdCBmYWN0b3JGdW5jdGlvblR5cGUgPSB3aWRnZXRWYWx1ZUZyYWdtZW50c1swXTsgLy8gW1wiQklOQVJZXCJdXG4gICAgICAgIGNvbnN0IGZhY3RvckZ1bmN0aW9uR3JpZERhdGEgPSB3aWRnZXRWYWx1ZUZyYWdtZW50cy5zcGxpY2UoMSk7IC8vIFtcIjEwXCIsIFwiMTBcIiwgXCIyXCJdXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBncmlkRGF0YTogZmFjdG9yRnVuY3Rpb25HcmlkRGF0YSxcbiAgICAgICAgICAgIGZhY3RvckZ1bmN0aW9uVHlwZTogZmFjdG9yRnVuY3Rpb25UeXBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldFdpZGdldFZhbHVlKCkge1xuICAgICAgICBjb25zdCB3aWRnZXRWYWx1ZSA9IGAke3RoaXMuZmFjdG9yRnVuY3Rpb25UeXBlfSAke3RoaXMuZ3JpZFN0b3JlXG4gICAgICAgICAgICAubWFwKChvcHRpb24pID0+IG9wdGlvbi5mYWN0b3JNb2RpZmllclZhbHVlKVxuICAgICAgICAgICAgLmpvaW4oXCIgXCIpfWA7XG4gICAgICAgIGNvbnN0IGlzVHJpZ2dlckFyZ1ByZXNlbnQgPSAhaXNFbXB0eURhdGFJdGVtKHRoaXMudHJpZ2dlckFyZz8uaW5wdXQ/LnZhbHVlKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpc1RyaWdnZXJBcmdQcmVzZW50ID8gd2lkZ2V0VmFsdWUgOiB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBhbGlnbm1lbnQ6IFwic3RhcnRcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIGxheW91dDogXCJkZWZhdWx0XCIsIHJlZjogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldENvbnRhaW5lciA9IGU7XG4gICAgICAgICAgICB9IH0sIGgoXCJyZngtbGFiZWxcIiwgeyBsYWJlbDogdGhpcy5pbnB1dEFyZy5kaXNwbGF5TmFtZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzLmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5pbnB1dEFyZ0hlbHBDbGlja0hhbmRsZXIpKCkgfSksIGgoXCJkaXZcIiwgeyBjbGFzczogSFRNTENsYXNzZXMuY29udGFpbmVyIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogSFRNTENsYXNzZXMuc2VsZWN0IH0sIGgoXCJkaXZcIiwgeyBjbGFzczogSFRNTENsYXNzZXMudGV4dCB9LCB0aGlzLnN0cmluZ3MudHlwZSksIGgoXCJyZngtZHRleC1jb21tb24tc2VsZWN0XCIsIHsgb3B0aW9uczogdGhpcy5zdG9yZSwgdmFsdWU6IHRoaXMuZmFjdG9yRnVuY3Rpb25UeXBlLCBvblJmeEFyZ3VtZW50Q2hhbmdlOiB0aGlzLmhhbmRsZUZhY3RvckZ1bmN0aW9uVHlwZUNoYW5nZSB9KSksIGgoXCJyZngtZ3JpZFwiLCB7IGhhc0hlYWRlcjogdGhpcy5ncmlkU2NoZW1hLmhhc0hlYWRlciwgY2FuQWRkOiB0aGlzLmdyaWRTY2hlbWEuY2FuQWRkLCBoYXNJZENvbHVtbjogdGhpcy5ncmlkU2NoZW1hLmhhc0lkQ29sdW1uLCBncmlkTGF5b3V0OiB0aGlzLmdyaWRTY2hlbWEuZ3JpZExheW91dCwgZ3JpZE9wdGlvbnM6IHRoaXMuZ3JpZFNjaGVtYS5ncmlkT3B0aW9ucywgaGFzQm9yZGVyOiB0aGlzLmdyaWRTY2hlbWEuaGFzQm9yZGVyLCBjYW5SZW1vdmU6IHRoaXMuZ3JpZFNjaGVtYS5jYW5SZW1vdmUsIGlzU3RhY2tlZDogdGhpcy5ncmlkU2NoZW1hLmlzU3RhY2tlZCwgb25SZnhHcmlkT3B0aW9uQ2hhbmdlOiB0aGlzLnVwZGF0ZUdyaWRWYWx1ZSB9KSkpKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcInQ5blwiXTsgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5SZnhDdGVGYWN0b3JGdW5jdGlvbkVkaXRvci5zdHlsZSA9IHJmeEN0ZUZhY3RvckZ1bmN0aW9uRWRpdG9yQ3NzO1xuXG5leHBvcnQgeyBSZnhDdGVGYWN0b3JGdW5jdGlvbkVkaXRvciBhcyBSIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJmeC1jdGUtZmFjdG9yLWZ1bmN0aW9uLWVkaXRvci0zMTJmMzlkZS5qcy5tYXAiLCJleHBvcnQgeyBSIGFzIHJmeF9jdGVfZmFjdG9yX2Z1bmN0aW9uX2VkaXRvciB9IGZyb20gJy4vcmZ4LWN0ZS1mYWN0b3ItZnVuY3Rpb24tZWRpdG9yLTMxMmYzOWRlLmpzJztcbmltcG9ydCAnLi9pbmRleC1kYTFiNzEzOC5qcyc7XG5pbXBvcnQgJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0ICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcbmltcG9ydCAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgJy4vaW50ZXJmYWNlcy1kMGM2ODk0NC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9pZGVudGl0eS9JZGVudGl0eU1hbmFnZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS91cmxVdGlscy5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvTGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0ltYWdlcnlMYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9zbWFydE1hcHBpbmcvcmFzdGVyL3JlbmRlcmVycy9zdHJldGNoLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnLi9zYW5pdGl6ZS1udW1iZXItZDg0MTE0ZjcuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLWZhY3Rvci1mdW5jdGlvbi1lZGl0b3IuZW50cnkuanMubWFwIiwiaW1wb3J0IHsgZyBhcyBnZXRMb2NhbGVJbmZvIH0gZnJvbSAnLi9sb2NhbGl6YXRpb24taGVscGVyLTQ4MTliNjdkLmpzJztcbmltcG9ydCB7IGkgYXMgaXNFbXB0eURhdGFJdGVtIH0gZnJvbSAnLi90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyc7XG5cbi8qKlxuICogSW5kaWNhdGVzIGlmIGEgcHJvdmlkZWQgbnVtYmVyIHZhbHVlIGlzIHZhbGlkLlxuICogQW4gaW52YWxpZCB2YWx1ZSBpczogdW5kZWZpbmVkIHwgTmFOIHwgSW5maW5pdGUgfCAtSW5maW5pdGUgfCBudWxsXG4gKiBTZWUgZm9yIG1vcmUgZGV0YWlsczpcbiAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9OdW1iZXIvaXNGaW5pdGVcbiAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9OdW1iZXIvaXNOYU5cbiAqIEBwYXJhbSB7bnVtYmVyIHwgdW5kZWZpbmVkIHwgbnVsbH0gdmFsdWUgdmFsdWUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtib29sZWFufSBpZiB2YWxpZCBvciBub3RcbiAqL1xuZnVuY3Rpb24gaXNWYWxpZE51bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIE51bWJlci5pc05hTih2YWx1ZSkgPT09IGZhbHNlICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkgPT09IHRydWU7XG59XG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3ZpZGVkIG51bWJlciBmb3IgdXNlIHdpdGggY2FsY2l0ZS1pbnB1dC4gSXQgYWxzb1xuICogZ3VhcmRzIGFnYWluc3QgaW52YWxpZCB0eXBlcyBmb2xsb3dpbmcgdGhpcyBsb2dpYzpcbiAqICAgLSBJZiB0aGUgdmFsdWUgaXMgdmFsaWQgKG5vdCBOYU4sIGZpbml0ZSksIHRoZSB2YWx1ZSBpcyByZXR1cm5lZCBhcyBhIHN0cmluZ1xuICogICAtIElmIG5vdCBhbmQgaWYgYSB2YWxpZCBkZWZhdWx0IHZhbHVlIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyByZXR1cm5lZCBhcyBhIHN0cmluZ1xuICogICAtIElmIG5vdCwgYW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gKiBAcGFyYW0gdmFsdWVcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWVcbiAqIEByZXR1cm5zIGEgc2FuaXRpemVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBzYW5pdGl6ZU51bWJlcih2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgbGV0IHJldHVybmVkVmFsdWU7XG4gICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHRlc3RlZFZhbHVlID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIGlmIChpc1ZhbGlkTnVtYmVyKHRlc3RlZFZhbHVlKSlcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSB0ZXN0ZWRWYWx1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNWYWxpZE51bWJlcihkZWZhdWx0VmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJldHVybmVkVmFsdWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBgJHtyZXR1cm5lZFZhbHVlfWA7XG59XG4vKipcbiAqIFBhcnNlcyBhIHZhbHVlIHN0cmluZyB0byBhIG51bWJlciBmb3IgdXNlIHdpdGggY2FsY2l0ZS1pbnB1dC4gSWYgdGhlIHN0cmluZyBpcyBlbXB0eSwgaXQgd2lsbCByZXR1cm4gdW5kZWZpbmVkLlxuICogSWYgdGhlIHN0cmluZyBpcyBvdGhlcndpc2UgaW52YWxpZCwgaXQgd2lsbCByZXR1cm4gTmFOLlxuICogQHBhcmFtIHZhbHVlIGNhbGNpdGUtaW5wdXQgdmFsdWVcbiAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9IHRoZSBwYXJzZWQgbnVtYmVyXG4gKi9cbmZ1bmN0aW9uIHBhcnNlTnVtYmVyKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBcIlwiKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdCh2YWx1ZSk7XG59XG4vKipcbiAqIEZvcm1hdHMgYSBudW1iZXIgdG8gYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFRoZSBudW1iZXIgdG8gZm9ybWF0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcmFjdGlvbkRpZ2l0cz0zXSAtIFRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgdG8gaW5jbHVkZSBpbiB0aGUgZm9ybWF0dGVkIG51bWJlci4gRGVmYXVsdHMgdG8gMy5cbiAqIEByZXR1cm5zIHtudW1iZXJ8dW5kZWZpbmVkfSAtIFRoZSBmb3JtYXR0ZWQgbnVtYmVyLCBvciB1bmRlZmluZWQgaWYgdGhlIGlucHV0IHZhbHVlIGlzIGVtcHR5LlxuICovXG5mdW5jdGlvbiBmb3JtYXROdW1iZXIodmFsdWUsIGZyYWN0aW9uRGlnaXRzID0gMykge1xuICAgIGlmIChpc0VtcHR5RGF0YUl0ZW0odmFsdWUpKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdCh2YWx1ZS50b0ZpeGVkKGZyYWN0aW9uRGlnaXRzKSk7XG59XG4vKipcbiAqIEZvcm1hdHMgYSBudW1iZXIgb3Igc3RyaW5nIHJlcHJlc2VudGluZyBhIG51bWJlciBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZSwgcGFzc2luZyBJbnRsIG51bWJlciBmb3JtYXQgb3B0aW9uc1xuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2VHbG9iYWxfT2JqZWN0cy9JbnRsL051bWJlckZvcm1hdC9OdW1iZXJGb3JtYXQjb3B0aW9uc1xuICogQHBhcmFtIHtudW1iZXIgfCBzdHJpbmcgfCB1bmRlZmluZWR9IHZhbHVlIHRvIGJlIGZvcm1hdHRlZCBhbmQgbG9jYWxpemVkXG4gKiBAcGFyYW0ge0ludGwuTnVtYmVyRm9ybWF0T3B0aW9uc30gZm9ybWF0T3B0aW9ucyBvcHRpb25zIG9iamVjdCBtYXRjaGluZyBJbnRsLk51bWJlckZvcm1hdFxuICogQHJldHVybnMge3N0cmluZ30gbG9jYWxpemVkIC8gcm91bmRlZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gZm9ybWF0TnVtYmVyVG9Mb2NhbGUodmFsdWUsIGZvcm1hdE9wdGlvbnMpIHtcbiAgICBsZXQgZm9ybWF0dGVkVmFsdWUgPSBcIlwiO1xuICAgIGlmICghaXNFbXB0eURhdGFJdGVtKHZhbHVlKSAmJiAhTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xuICAgICAgICBjb25zdCBsb2NhbGVDb2RlID0gZ2V0TG9jYWxlSW5mbygpLmxvY2FsZTtcbiAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBJbnRsLk51bWJlckZvcm1hdChsb2NhbGVDb2RlLCBmb3JtYXRPcHRpb25zKS5mb3JtYXQoTnVtYmVyKHZhbHVlKSk7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRWYWx1ZTtcbn1cblxuZXhwb3J0IHsgZm9ybWF0TnVtYmVyVG9Mb2NhbGUgYXMgYSwgZm9ybWF0TnVtYmVyIGFzIGYsIGlzVmFsaWROdW1iZXIgYXMgaSwgcGFyc2VOdW1iZXIgYXMgcCwgc2FuaXRpemVOdW1iZXIgYXMgcyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW5pdGl6ZS1udW1iZXItZDg0MTE0ZjcuanMubWFwIiwiY29uc3QgVUlEZWZhdWx0cyA9IHtcbiAgICBTY2FsZTogXCJzXCIsXG4gICAgUG9wb3ZlclRpbWVyOiA2MFxufTtcbmNvbnN0IENhbGNpdGVTY2FsZSA9IHtcbiAgICBzOiBcInNcIixcbiAgICBtOiBcIm1cIlxufTtcbmNvbnN0IENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgPSB7XG4gICAgYWJzb2x1dGU6IFwiYWJzb2x1dGVcIixcbiAgICBmaXhlZDogXCJmaXhlZFwiXG59O1xuXG5leHBvcnQgeyBDYWxjaXRlU2NhbGUgYXMgQywgVUlEZWZhdWx0cyBhcyBVLCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nIGFzIGEgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktdXRpbHMtOTI4YTQwOTYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9