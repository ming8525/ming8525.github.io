"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-f95ccc"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-kernel-selector-c86395fb.js":
/*!********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-kernel-selector-c86395fb.js ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxKernelSelector)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _functions_f1f2dffd_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./functions-f1f2dffd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/functions-f1f2dffd.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _resources_27c66f5c_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resources-27c66f5c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/resources-27c66f5c.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./rfx-args-helper-ab401543.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-args-helper-ab401543.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./multidimensional-helper-fc8fbe0e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/multidimensional-helper-fc8fbe0e.js");























const HelpClickHandlerKeys = {
    typeHelpClickHandler: "typeHelpClickHandler",
    kernelHelpClickHandler: "kernelHelpClickHandler"
};

const RfxKernelSelector = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        //--------------------------------------------------------------------------
        //
        //  Properties
        //
        //--------------------------------------------------------------------------
        /**
         * The strings used for localization.
         * @private
         * @type {Object}
         */
        // private strings: typeof import("./t9n/rfx-cte-kernel-selector.t9n.en.json");
        /**
         * The direction of the locale, either "ltr" or "rtl".
         * @private
         * @type {"ltr" | "rtl"}
         */
        // private direction: "ltr" | "rtl";
        /**
         * The reference elements for the widget contains Paramter reference and labels.
         * @category Private
         */
        this.uiElements = {
            kernelArgLabel: undefined,
            kernelArgContainer: undefined,
            rowArgLabel: undefined,
            columnArgLabel: undefined
        };
        /**
         * Stores an Array of kernel Info, each item has "columns", "rows", "value".
         * @private
         */
        this.kernelTypesInfo = _resources_27c66f5c_js__WEBPACK_IMPORTED_MODULE_3__.k;
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.userDefinedOptionKey = -1;
        this.noneOptionKey = 255;
        /**
         * Stores default values
         */
        this.defaults = {
            rowArgDefaultValue: undefined,
            columnArgDefaultValue: undefined,
            kernelArgDefaultValue: []
        };
        this.onConvolutionTypeChange = (e) => {
            e.stopPropagation();
            const element = e.target;
            const value = (0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__.p)(element.value);
            this.inputArg.value = value;
            this.value = value;
            const kernelInfo = this.kernelTypesInfo[value?.toString()];
            // the defaults are used in the case where value is "User defined"
            this.widgetState = {
                columns: kernelInfo?.columns ?? this.defaults.columnArgDefaultValue,
                rows: kernelInfo?.rows ?? this.defaults.rowArgDefaultValue,
                value: kernelInfo?.value ?? this.defaults.kernelArgDefaultValue
            };
            this.rfxArgumentChange.emit({ value });
        };
        this.value = undefined;
        this.widgetArgs = undefined;
        this.store = [];
        this.widgetState = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.processWidgetArgs(this.widgetArgs);
    }
    componentWillLoad() {
        this.setupInitialState(this.widgetArgs);
    }
    componentWillRender() {
        this.setWidgetValue();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * All validation logic of widgetArgs -> mainly the inputArgs and triggerAttributes
     * goes here
     */
    processWidgetArgs({ inputArgs }) {
        const convolutionTypeArg = inputArgs.ConvolutionType;
        this.inputArg = convolutionTypeArg;
        convolutionTypeArg.input = this.hostElement;
        this.uiElements.rowArgLabel = inputArgs.Rows.displayName;
        this.uiElements.columnArgLabel = inputArgs.Columns.displayName;
        this.uiElements.kernelArgLabel = inputArgs.Kernel.displayName;
    }
    setupInitialState({ inputArgs, rfxArgs, rasterFunctions }) {
        // Set initial store
        const widgetName = (0,_functions_f1f2dffd_js__WEBPACK_IMPORTED_MODULE_1__.e)(rfxArgs);
        const rasterFunction = rasterFunctions[widgetName];
        const rasterFunctionArguments = rasterFunction?.rasterFunctionArguments;
        const inputArgName = this.inputArg.name;
        this.value = this.inputArg.value;
        const inputArgDomain = rasterFunctionArguments?.[inputArgName]?.domain;
        if (inputArgDomain?.type === "list") {
            // const enumData = rfxUtils.coerceEnumDataForCurrentEnv(this.rfxArgs, inputArgDomain.enum, this.portalMode);
            const enumData = inputArgDomain.enum;
            this.store = (0,_rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_5__.j)(enumData);
        }
        else {
            console.error("Invalid inputArg! Check Schema");
        }
        this.store?.forEach((enumElement) => {
            enumElement.key = enumElement.key.toString();
        });
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__.i)(this.store)) {
            console.error("Domain list Enum not set! Check Schema");
        }
        const inputArgDefaultValue = rasterFunctionArguments?.[inputArgName]?.defaultValue;
        this.value = this.inputArg.value || inputArgDefaultValue;
        const rowArgDefaultValue = rasterFunctionArguments?.Rows?.defaultValue;
        const columnArgDefaultValue = rasterFunctionArguments?.Columns?.defaultValue;
        const kernelArgDefaultValue = this.kernelTypesInfo[this.value?.toString()]?.value;
        this.defaults.columnArgDefaultValue = columnArgDefaultValue;
        this.defaults.rowArgDefaultValue = rowArgDefaultValue;
        const value = inputArgs.Kernel.value ?? kernelArgDefaultValue;
        const cols = inputArgs.Columns.value ?? columnArgDefaultValue;
        const rows = inputArgs.Rows.value ?? rowArgDefaultValue;
        this.widgetState = (0,_multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_21__.c)({
            columns: cols,
            rows: rows,
            value: value
        });
    }
    setWidgetValue() {
        this.widgetArgs.inputArgs.ConvolutionType.value = this.value;
        this.widgetArgs.inputArgs.Columns.value = this.widgetState?.columns;
        this.widgetArgs.inputArgs.Rows.value = this.widgetState?.rows;
        this.widgetArgs.inputArgs.Kernel.value = this.widgetState?.value;
    }
    attachHelpClickEventHandlers() {
        const typeHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.inputArg.displayName,
            referenceElement: this.widgetContainer,
            helpTextID: this.widgetArgs.helpTextIDs?.convolution_type
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.typeHelpClickHandler, typeHelpClickHandler);
    }
    onColumnValueChange(newValue) {
        if (!newValue || newValue <= 0) {
            // invalid
            // this.triggerArgs.Width.input.set("displayedValue", this._info.columns);
            return;
        }
        this.widgetState = { ...this.widgetState, columns: newValue };
    }
    onRowValueChange(newValue) {
        if (!newValue || newValue <= 0) {
            // this.triggerArgs.Height.input.set("displayedValue", this._info.rows);
            return;
        }
        this.widgetState = { ...this.widgetState, rows: newValue };
    }
    render() {
        const isTypeUserDefined = this.value === this.userDefinedOptionKey;
        const isTypeNone = this.value === this.noneOptionKey;
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale, layout: "default", ref: (e) => {
                this.widgetContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.inputArg.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.typeHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dtex-common-select", { options: this.store, value: String(this.value), onRfxArgumentChange: this.onConvolutionTypeChange })), isTypeUserDefined ? ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale, layout: "default" }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.uiElements.rowArgLabel, hideHelp: true }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-number", { value: this.widgetState.rows?.toString(), onCalciteInputNumberChange: (event) => {
                event.stopPropagation();
                const value = (0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__.p)(event.target?.value);
                this.onRowValueChange(value);
            }, scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale })), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale, layout: "default" }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.uiElements.columnArgLabel, hideHelp: true }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-number", { value: this.widgetState.columns?.toString(), onCalciteInputNumberChange: (event) => {
                event.stopPropagation();
                const value = (0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__.p)(event.target?.value);
                this.onColumnValueChange(value);
            }, scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale })))) : null, isTypeNone ? null : ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_2__.U.Scale, layout: "default", ref: (e) => {
                this.uiElements.kernelArgContainer = e;
                const kernelHelpClickHandler = this.widgetArgs.onHelpActionClick({
                    heading: this.uiElements.kernelArgLabel,
                    referenceElement: this.uiElements.kernelArgContainer,
                    helpTextID: this.widgetArgs.helpTextIDs?.convolution_kernel
                });
                this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.kernelHelpClickHandler, kernelHelpClickHandler);
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.uiElements.kernelArgLabel, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.kernelHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-simple-matrix", { columns: this.widgetState.columns, rows: this.widgetState.rows, value: this.widgetState.value, onRfxArgumentChange: (e) => {
                e.stopPropagation();
                const { detail: { value } } = e;
                // if values are same, do not update state
                if ((0,_common_fda1462e_js__WEBPACK_IMPORTED_MODULE_12__.i)(this.widgetState.value, value)) {
                    return;
                }
                this.widgetState = { ...this.widgetState, value };
            } })))));
    }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};



//# sourceMappingURL=rfx-cte-kernel-selector-c86395fb.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-kernel-selector.entry.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-kernel-selector.entry.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_kernel_selector: () => (/* reexport safe */ _rfx_cte_kernel_selector_c86395fb_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_kernel_selector_c86395fb_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-kernel-selector-c86395fb.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-kernel-selector-c86395fb.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _functions_f1f2dffd_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functions-f1f2dffd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/functions-f1f2dffd.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _resources_27c66f5c_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resources-27c66f5c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/resources-27c66f5c.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./rfx-args-helper-ab401543.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-args-helper-ab401543.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _Uint8Array_68e1e3f9_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./_Uint8Array-68e1e3f9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_Uint8Array-68e1e3f9.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./multidimensional-helper-fc8fbe0e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/multidimensional-helper-fc8fbe0e.js");




























//# sourceMappingURL=rfx-cte-kernel-selector.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ formatNumberToLocale),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   i: () => (/* binding */ isValidNumber),
/* harmony export */   p: () => (/* binding */ parseNumber),
/* harmony export */   s: () => (/* binding */ sanitizeNumber)
/* harmony export */ });
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");



/**
 * Indicates if a provided number value is valid.
 * An invalid value is: undefined | NaN | Infinite | -Infinite | null
 * See for more details:
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN
 * @param {number | undefined | null} value value to check
 * @returns {boolean} if valid or not
 */
function isValidNumber(value) {
    return value !== undefined && value !== null && Number.isNaN(value) === false && Number.isFinite(value) === true;
}
/**
 * Returns a string representation of the provided number for use with calcite-input. It also
 * guards against invalid types following this logic:
 *   - If the value is valid (not NaN, finite), the value is returned as a string
 *   - If not and if a valid default value is provided, the default value is returned as a string
 *   - If not, an empty string is returned
 * @param value
 * @param defaultValue
 * @returns a sanitized string
 */
function sanitizeNumber(value, defaultValue) {
    let returnedValue;
    if (value !== null) {
        const testedValue = typeof value === "string" ? Number.parseFloat(value) : value;
        if (isValidNumber(testedValue))
            returnedValue = testedValue;
        else if (isValidNumber(defaultValue))
            returnedValue = defaultValue;
    }
    return returnedValue === undefined ? "" : `${returnedValue}`;
}
/**
 * Parses a value string to a number for use with calcite-input. If the string is empty, it will return undefined.
 * If the string is otherwise invalid, it will return NaN.
 * @param value calcite-input value
 * @returns {number | undefined} the parsed number
 */
function parseNumber(value) {
    if (value === "")
        return undefined;
    return Number.parseFloat(value);
}
/**
 * Formats a number to a specified number of decimal places.
 *
 * @param {number} value - The number to format.
 * @param {number} [fractionDigits=3] - The number of decimal places to include in the formatted number. Defaults to 3.
 * @returns {number|undefined} - The formatted number, or undefined if the input value is empty.
 */
function formatNumber(value, fractionDigits = 3) {
    if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value))
        return undefined;
    return Number.parseFloat(value.toFixed(fractionDigits));
}
/**
 * Formats a number or string representing a number according to the locale, passing Intl number format options
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/ReferenceGlobal_Objects/Intl/NumberFormat/NumberFormat#options
 * @param {number | string | undefined} value to be formatted and localized
 * @param {Intl.NumberFormatOptions} formatOptions options object matching Intl.NumberFormat
 * @returns {string} localized / rounded string
 */
function formatNumberToLocale(value, formatOptions) {
    let formattedValue = "";
    if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value) && !Number.isNaN(value)) {
        const localeCode = (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__.g)().locale;
        formattedValue = Intl.NumberFormat(localeCode, formatOptions).format(Number(value));
    }
    return formattedValue;
}



//# sourceMappingURL=sanitize-number-d84114f7.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLWY5NWNjYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRztBQUNuQztBQUNOO0FBQ007QUFDRTtBQUNIO0FBQ1o7QUFDZjtBQUNJO0FBQ0Q7QUFDTztBQUNrQjtBQUNMO0FBQ0M7QUFDRjtBQUMxQjtBQUNPO0FBQzJCO0FBQ3RCO0FBQ1Y7QUFDVTtBQUM0Qjs7QUFFdkU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscURBQWU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdFQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxPQUFPO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsV0FBVztBQUNuQztBQUNBO0FB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LFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsU0FBUywyREFBZTtBQUN4QiwyQkFBMkIsbUVBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRW1IOztBQUVuSDs7Ozs7Ozs7Ozs7Ozs7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThFOztBQUU5RSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUta2VybmVsLXNlbGVjdG9yLWM4NjM5NWZiLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUta2VybmVsLXNlbGVjdG9yLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3Nhbml0aXplLW51bWJlci1kODQxMTRmNy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGEgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0IHsgZSBhcyBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tICcuL2Z1bmN0aW9ucy1mMWYyZGZmZC5qcyc7XG5pbXBvcnQgeyBVIGFzIFVJRGVmYXVsdHMgfSBmcm9tICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCB7IGsgYXMga2VybmVsVHlwZXNJbmZvIH0gZnJvbSAnLi9yZXNvdXJjZXMtMjdjNjZmNWMuanMnO1xuaW1wb3J0IHsgaSBhcyBpc0VtcHR5RGF0YUl0ZW0gfSBmcm9tICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCB7IGogYXMgY2xvbmVSRlQgfSBmcm9tICcuL3JmeC1hcmdzLWhlbHBlci1hYjQwMTU0My5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9pZGVudGl0eS9JZGVudGl0eU1hbmFnZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzT2JqZWN0RXF1YWwgfSBmcm9tICcuL2NvbW1vbi1mZGExNDYyZS5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0IHsgcCBhcyBwYXJzZU51bWJlciB9IGZyb20gJy4vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuaW1wb3J0IHsgYyBhcyBjbG9uZURhdGEgfSBmcm9tICcuL211bHRpZGltZW5zaW9uYWwtaGVscGVyLWZjOGZiZTBlLmpzJztcblxuY29uc3QgSGVscENsaWNrSGFuZGxlcktleXMgPSB7XG4gICAgdHlwZUhlbHBDbGlja0hhbmRsZXI6IFwidHlwZUhlbHBDbGlja0hhbmRsZXJcIixcbiAgICBrZXJuZWxIZWxwQ2xpY2tIYW5kbGVyOiBcImtlcm5lbEhlbHBDbGlja0hhbmRsZXJcIlxufTtcblxuY29uc3QgUmZ4S2VybmVsU2VsZWN0b3IgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLnJmeEFyZ3VtZW50Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJyZnhBcmd1bWVudENoYW5nZVwiLCA3KTtcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvL1xuICAgICAgICAvLyAgUHJvcGVydGllc1xuICAgICAgICAvL1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3RyaW5ncyB1c2VkIGZvciBsb2NhbGl6YXRpb24uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICAvLyBwcml2YXRlIHN0cmluZ3M6IHR5cGVvZiBpbXBvcnQoXCIuL3Q5bi9yZngtY3RlLWtlcm5lbC1zZWxlY3Rvci50OW4uZW4uanNvblwiKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkaXJlY3Rpb24gb2YgdGhlIGxvY2FsZSwgZWl0aGVyIFwibHRyXCIgb3IgXCJydGxcIi5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1wibHRyXCIgfCBcInJ0bFwifVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gcHJpdmF0ZSBkaXJlY3Rpb246IFwibHRyXCIgfCBcInJ0bFwiO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlZmVyZW5jZSBlbGVtZW50cyBmb3IgdGhlIHdpZGdldCBjb250YWlucyBQYXJhbXRlciByZWZlcmVuY2UgYW5kIGxhYmVscy5cbiAgICAgICAgICogQGNhdGVnb3J5IFByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudWlFbGVtZW50cyA9IHtcbiAgICAgICAgICAgIGtlcm5lbEFyZ0xhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBrZXJuZWxBcmdDb250YWluZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJvd0FyZ0xhYmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb2x1bW5BcmdMYWJlbDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgYW4gQXJyYXkgb2Yga2VybmVsIEluZm8sIGVhY2ggaXRlbSBoYXMgXCJjb2x1bW5zXCIsIFwicm93c1wiLCBcInZhbHVlXCIuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmtlcm5lbFR5cGVzSW5mbyA9IGtlcm5lbFR5cGVzSW5mbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBldmVudCBoYW5kbGVycyBmb3IgaGVscCBhY3Rpb24gY2xpY2ssIHN0b3JlZCBpbiBjb25uZWN0ZWQgY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgICogZmV0Y2hpbmcgZnVuY3Rpb24gb24gZWFjaCByZW5kZXIgKCB0byBhdm9pZCBjb21tb24gYmFkIHByYWN0aWNlIClcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy51c2VyRGVmaW5lZE9wdGlvbktleSA9IC0xO1xuICAgICAgICB0aGlzLm5vbmVPcHRpb25LZXkgPSAyNTU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgZGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICByb3dBcmdEZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGNvbHVtbkFyZ0RlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAga2VybmVsQXJnRGVmYXVsdFZhbHVlOiBbXVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uQ29udm9sdXRpb25UeXBlQ2hhbmdlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlTnVtYmVyKGVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEFyZy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3Qga2VybmVsSW5mbyA9IHRoaXMua2VybmVsVHlwZXNJbmZvW3ZhbHVlPy50b1N0cmluZygpXTtcbiAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0cyBhcmUgdXNlZCBpbiB0aGUgY2FzZSB3aGVyZSB2YWx1ZSBpcyBcIlVzZXIgZGVmaW5lZFwiXG4gICAgICAgICAgICB0aGlzLndpZGdldFN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGNvbHVtbnM6IGtlcm5lbEluZm8/LmNvbHVtbnMgPz8gdGhpcy5kZWZhdWx0cy5jb2x1bW5BcmdEZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgcm93czoga2VybmVsSW5mbz8ucm93cyA/PyB0aGlzLmRlZmF1bHRzLnJvd0FyZ0RlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2VybmVsSW5mbz8udmFsdWUgPz8gdGhpcy5kZWZhdWx0cy5rZXJuZWxBcmdEZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJmeEFyZ3VtZW50Q2hhbmdlLmVtaXQoeyB2YWx1ZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWRnZXRBcmdzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0b3JlID0gW107XG4gICAgICAgIHRoaXMud2lkZ2V0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBMaWZlY3ljbGVcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzV2lkZ2V0QXJncyh0aGlzLndpZGdldEFyZ3MpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cEluaXRpYWxTdGF0ZSh0aGlzLndpZGdldEFyZ3MpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsUmVuZGVyKCkge1xuICAgICAgICB0aGlzLnNldFdpZGdldFZhbHVlKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLyoqXG4gICAgICogQWxsIHZhbGlkYXRpb24gbG9naWMgb2Ygd2lkZ2V0QXJncyAtPiBtYWlubHkgdGhlIGlucHV0QXJncyBhbmQgdHJpZ2dlckF0dHJpYnV0ZXNcbiAgICAgKiBnb2VzIGhlcmVcbiAgICAgKi9cbiAgICBwcm9jZXNzV2lkZ2V0QXJncyh7IGlucHV0QXJncyB9KSB7XG4gICAgICAgIGNvbnN0IGNvbnZvbHV0aW9uVHlwZUFyZyA9IGlucHV0QXJncy5Db252b2x1dGlvblR5cGU7XG4gICAgICAgIHRoaXMuaW5wdXRBcmcgPSBjb252b2x1dGlvblR5cGVBcmc7XG4gICAgICAgIGNvbnZvbHV0aW9uVHlwZUFyZy5pbnB1dCA9IHRoaXMuaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMudWlFbGVtZW50cy5yb3dBcmdMYWJlbCA9IGlucHV0QXJncy5Sb3dzLmRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLnVpRWxlbWVudHMuY29sdW1uQXJnTGFiZWwgPSBpbnB1dEFyZ3MuQ29sdW1ucy5kaXNwbGF5TmFtZTtcbiAgICAgICAgdGhpcy51aUVsZW1lbnRzLmtlcm5lbEFyZ0xhYmVsID0gaW5wdXRBcmdzLktlcm5lbC5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgc2V0dXBJbml0aWFsU3RhdGUoeyBpbnB1dEFyZ3MsIHJmeEFyZ3MsIHJhc3RlckZ1bmN0aW9ucyB9KSB7XG4gICAgICAgIC8vIFNldCBpbml0aWFsIHN0b3JlXG4gICAgICAgIGNvbnN0IHdpZGdldE5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocmZ4QXJncyk7XG4gICAgICAgIGNvbnN0IHJhc3RlckZ1bmN0aW9uID0gcmFzdGVyRnVuY3Rpb25zW3dpZGdldE5hbWVdO1xuICAgICAgICBjb25zdCByYXN0ZXJGdW5jdGlvbkFyZ3VtZW50cyA9IHJhc3RlckZ1bmN0aW9uPy5yYXN0ZXJGdW5jdGlvbkFyZ3VtZW50cztcbiAgICAgICAgY29uc3QgaW5wdXRBcmdOYW1lID0gdGhpcy5pbnB1dEFyZy5uYW1lO1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbnB1dEFyZy52YWx1ZTtcbiAgICAgICAgY29uc3QgaW5wdXRBcmdEb21haW4gPSByYXN0ZXJGdW5jdGlvbkFyZ3VtZW50cz8uW2lucHV0QXJnTmFtZV0/LmRvbWFpbjtcbiAgICAgICAgaWYgKGlucHV0QXJnRG9tYWluPy50eXBlID09PSBcImxpc3RcIikge1xuICAgICAgICAgICAgLy8gY29uc3QgZW51bURhdGEgPSByZnhVdGlscy5jb2VyY2VFbnVtRGF0YUZvckN1cnJlbnRFbnYodGhpcy5yZnhBcmdzLCBpbnB1dEFyZ0RvbWFpbi5lbnVtLCB0aGlzLnBvcnRhbE1vZGUpO1xuICAgICAgICAgICAgY29uc3QgZW51bURhdGEgPSBpbnB1dEFyZ0RvbWFpbi5lbnVtO1xuICAgICAgICAgICAgdGhpcy5zdG9yZSA9IGNsb25lUkZUKGVudW1EYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIGlucHV0QXJnISBDaGVjayBTY2hlbWFcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9yZT8uZm9yRWFjaCgoZW51bUVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGVudW1FbGVtZW50LmtleSA9IGVudW1FbGVtZW50LmtleS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbSh0aGlzLnN0b3JlKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRvbWFpbiBsaXN0IEVudW0gbm90IHNldCEgQ2hlY2sgU2NoZW1hXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucHV0QXJnRGVmYXVsdFZhbHVlID0gcmFzdGVyRnVuY3Rpb25Bcmd1bWVudHM/LltpbnB1dEFyZ05hbWVdPy5kZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmlucHV0QXJnLnZhbHVlIHx8IGlucHV0QXJnRGVmYXVsdFZhbHVlO1xuICAgICAgICBjb25zdCByb3dBcmdEZWZhdWx0VmFsdWUgPSByYXN0ZXJGdW5jdGlvbkFyZ3VtZW50cz8uUm93cz8uZGVmYXVsdFZhbHVlO1xuICAgICAgICBjb25zdCBjb2x1bW5BcmdEZWZhdWx0VmFsdWUgPSByYXN0ZXJGdW5jdGlvbkFyZ3VtZW50cz8uQ29sdW1ucz8uZGVmYXVsdFZhbHVlO1xuICAgICAgICBjb25zdCBrZXJuZWxBcmdEZWZhdWx0VmFsdWUgPSB0aGlzLmtlcm5lbFR5cGVzSW5mb1t0aGlzLnZhbHVlPy50b1N0cmluZygpXT8udmFsdWU7XG4gICAgICAgIHRoaXMuZGVmYXVsdHMuY29sdW1uQXJnRGVmYXVsdFZhbHVlID0gY29sdW1uQXJnRGVmYXVsdFZhbHVlO1xuICAgICAgICB0aGlzLmRlZmF1bHRzLnJvd0FyZ0RlZmF1bHRWYWx1ZSA9IHJvd0FyZ0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dEFyZ3MuS2VybmVsLnZhbHVlID8/IGtlcm5lbEFyZ0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgY29uc3QgY29scyA9IGlucHV0QXJncy5Db2x1bW5zLnZhbHVlID8/IGNvbHVtbkFyZ0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgY29uc3Qgcm93cyA9IGlucHV0QXJncy5Sb3dzLnZhbHVlID8/IHJvd0FyZ0RlZmF1bHRWYWx1ZTtcbiAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IGNsb25lRGF0YSh7XG4gICAgICAgICAgICBjb2x1bW5zOiBjb2xzLFxuICAgICAgICAgICAgcm93czogcm93cyxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0V2lkZ2V0VmFsdWUoKSB7XG4gICAgICAgIHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQ29udm9sdXRpb25UeXBlLnZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5Db2x1bW5zLnZhbHVlID0gdGhpcy53aWRnZXRTdGF0ZT8uY29sdW1ucztcbiAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5Sb3dzLnZhbHVlID0gdGhpcy53aWRnZXRTdGF0ZT8ucm93cztcbiAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5LZXJuZWwudmFsdWUgPSB0aGlzLndpZGdldFN0YXRlPy52YWx1ZTtcbiAgICB9XG4gICAgYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgY29uc3QgdHlwZUhlbHBDbGlja0hhbmRsZXIgPSB0aGlzLndpZGdldEFyZ3Mub25IZWxwQWN0aW9uQ2xpY2soe1xuICAgICAgICAgICAgaGVhZGluZzogdGhpcy5pbnB1dEFyZy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IHRoaXMud2lkZ2V0Q29udGFpbmVyLFxuICAgICAgICAgICAgaGVscFRleHRJRDogdGhpcy53aWRnZXRBcmdzLmhlbHBUZXh0SURzPy5jb252b2x1dGlvbl90eXBlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMuc2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLnR5cGVIZWxwQ2xpY2tIYW5kbGVyLCB0eXBlSGVscENsaWNrSGFuZGxlcik7XG4gICAgfVxuICAgIG9uQ29sdW1uVmFsdWVDaGFuZ2UobmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKCFuZXdWYWx1ZSB8fCBuZXdWYWx1ZSA8PSAwKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkXG4gICAgICAgICAgICAvLyB0aGlzLnRyaWdnZXJBcmdzLldpZHRoLmlucHV0LnNldChcImRpc3BsYXllZFZhbHVlXCIsIHRoaXMuX2luZm8uY29sdW1ucyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IHsgLi4udGhpcy53aWRnZXRTdGF0ZSwgY29sdW1uczogbmV3VmFsdWUgfTtcbiAgICB9XG4gICAgb25Sb3dWYWx1ZUNoYW5nZShuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoIW5ld1ZhbHVlIHx8IG5ld1ZhbHVlIDw9IDApIHtcbiAgICAgICAgICAgIC8vIHRoaXMudHJpZ2dlckFyZ3MuSGVpZ2h0LmlucHV0LnNldChcImRpc3BsYXllZFZhbHVlXCIsIHRoaXMuX2luZm8ucm93cyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IHsgLi4udGhpcy53aWRnZXRTdGF0ZSwgcm93czogbmV3VmFsdWUgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBpc1R5cGVVc2VyRGVmaW5lZCA9IHRoaXMudmFsdWUgPT09IHRoaXMudXNlckRlZmluZWRPcHRpb25LZXk7XG4gICAgICAgIGNvbnN0IGlzVHlwZU5vbmUgPSB0aGlzLnZhbHVlID09PSB0aGlzLm5vbmVPcHRpb25LZXk7XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCBudWxsLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGFsaWdubWVudDogXCJzdGFydFwiLCBzY2FsZTogVUlEZWZhdWx0cy5TY2FsZSwgbGF5b3V0OiBcImRlZmF1bHRcIiwgcmVmOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0Q29udGFpbmVyID0gZTtcbiAgICAgICAgICAgIH0gfSwgaChcInJmeC1sYWJlbFwiLCB7IGxhYmVsOiB0aGlzLmlucHV0QXJnLmRpc3BsYXlOYW1lLCBvblJmeExhYmVsSGVscEFjdGlvbkNsaWNrOiAoKSA9PiB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnM/LmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy50eXBlSGVscENsaWNrSGFuZGxlcikoKSB9KSwgaChcInJmeC1kdGV4LWNvbW1vbi1zZWxlY3RcIiwgeyBvcHRpb25zOiB0aGlzLnN0b3JlLCB2YWx1ZTogU3RyaW5nKHRoaXMudmFsdWUpLCBvblJmeEFyZ3VtZW50Q2hhbmdlOiB0aGlzLm9uQ29udm9sdXRpb25UeXBlQ2hhbmdlIH0pKSwgaXNUeXBlVXNlckRlZmluZWQgPyAoaChcImRpdlwiLCBudWxsLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGFsaWdubWVudDogXCJzdGFydFwiLCBzY2FsZTogVUlEZWZhdWx0cy5TY2FsZSwgbGF5b3V0OiBcImRlZmF1bHRcIiB9LCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMudWlFbGVtZW50cy5yb3dBcmdMYWJlbCwgaGlkZUhlbHA6IHRydWUgfSksIGgoXCJjYWxjaXRlLWlucHV0LW51bWJlclwiLCB7IHZhbHVlOiB0aGlzLndpZGdldFN0YXRlLnJvd3M/LnRvU3RyaW5nKCksIG9uQ2FsY2l0ZUlucHV0TnVtYmVyQ2hhbmdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlTnVtYmVyKGV2ZW50LnRhcmdldD8udmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Sb3dWYWx1ZUNoYW5nZSh2YWx1ZSk7XG4gICAgICAgICAgICB9LCBzY2FsZTogVUlEZWZhdWx0cy5TY2FsZSB9KSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiZGVmYXVsdFwiIH0sIGgoXCJyZngtbGFiZWxcIiwgeyBsYWJlbDogdGhpcy51aUVsZW1lbnRzLmNvbHVtbkFyZ0xhYmVsLCBoaWRlSGVscDogdHJ1ZSB9KSwgaChcImNhbGNpdGUtaW5wdXQtbnVtYmVyXCIsIHsgdmFsdWU6IHRoaXMud2lkZ2V0U3RhdGUuY29sdW1ucz8udG9TdHJpbmcoKSwgb25DYWxjaXRlSW5wdXROdW1iZXJDaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VOdW1iZXIoZXZlbnQudGFyZ2V0Py52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbHVtblZhbHVlQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlIH0pKSkpIDogbnVsbCwgaXNUeXBlTm9uZSA/IG51bGwgOiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBhbGlnbm1lbnQ6IFwic3RhcnRcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIGxheW91dDogXCJkZWZhdWx0XCIsIHJlZjogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVpRWxlbWVudHMua2VybmVsQXJnQ29udGFpbmVyID0gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXJuZWxIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogdGhpcy51aUVsZW1lbnRzLmtlcm5lbEFyZ0xhYmVsLFxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50OiB0aGlzLnVpRWxlbWVudHMua2VybmVsQXJnQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LmNvbnZvbHV0aW9uX2tlcm5lbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMua2VybmVsSGVscENsaWNrSGFuZGxlciwga2VybmVsSGVscENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB9IH0sIGgoXCJyZngtbGFiZWxcIiwgeyBsYWJlbDogdGhpcy51aUVsZW1lbnRzLmtlcm5lbEFyZ0xhYmVsLCBvblJmeExhYmVsSGVscEFjdGlvbkNsaWNrOiAoKSA9PiB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnM/LmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5rZXJuZWxIZWxwQ2xpY2tIYW5kbGVyKSgpIH0pLCBoKFwicmZ4LXNpbXBsZS1tYXRyaXhcIiwgeyBjb2x1bW5zOiB0aGlzLndpZGdldFN0YXRlLmNvbHVtbnMsIHJvd3M6IHRoaXMud2lkZ2V0U3RhdGUucm93cywgdmFsdWU6IHRoaXMud2lkZ2V0U3RhdGUudmFsdWUsIG9uUmZ4QXJndW1lbnRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRldGFpbDogeyB2YWx1ZSB9IH0gPSBlO1xuICAgICAgICAgICAgICAgIC8vIGlmIHZhbHVlcyBhcmUgc2FtZSwgZG8gbm90IHVwZGF0ZSBzdGF0ZVxuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdEVxdWFsKHRoaXMud2lkZ2V0U3RhdGUudmFsdWUsIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0U3RhdGUgPSB7IC4uLnRoaXMud2lkZ2V0U3RhdGUsIHZhbHVlIH07XG4gICAgICAgICAgICB9IH0pKSkpKTtcbiAgICB9XG4gICAgZ2V0IGhvc3RFbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblxuZXhwb3J0IHsgUmZ4S2VybmVsU2VsZWN0b3IgYXMgUiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLWtlcm5lbC1zZWxlY3Rvci1jODYzOTVmYi5qcy5tYXAiLCJleHBvcnQgeyBSIGFzIHJmeF9jdGVfa2VybmVsX3NlbGVjdG9yIH0gZnJvbSAnLi9yZngtY3RlLWtlcm5lbC1zZWxlY3Rvci1jODYzOTVmYi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9ucy1mMWYyZGZmZC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy0yN2M2NmY1Yy5qcyc7XG5pbXBvcnQgJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0ICcuL19nZXRUYWctOTZhZjAyOWQuanMnO1xuaW1wb3J0ICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnLi9yZngtYXJncy1oZWxwZXItYWI0MDE1NDMuanMnO1xuaW1wb3J0ICcuL2ludGVyZmFjZXMtZDBjNjg5NDQuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvaWRlbnRpdHkvSWRlbnRpdHlNYW5hZ2VyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgJy4vY29tbW9uLWZkYTE0NjJlLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICcuL19VaW50OEFycmF5LTY4ZTFlM2Y5LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BbGdvcml0aG1pY0NvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvTXVsdGlwYXJ0Q29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL0NvbG9yLmpzJztcbmltcG9ydCAnLi9jb2xvclJhbXBVdGlscy04YmRkNDZjNS5qcyc7XG5pbXBvcnQgJy4vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcbmltcG9ydCAnLi9tdWx0aWRpbWVuc2lvbmFsLWhlbHBlci1mYzhmYmUwZS5qcyc7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJmeC1jdGUta2VybmVsLXNlbGVjdG9yLmVudHJ5LmpzLm1hcCIsImltcG9ydCB7IGcgYXMgZ2V0TG9jYWxlSW5mbyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzRW1wdHlEYXRhSXRlbSB9IGZyb20gJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuXG4vKipcbiAqIEluZGljYXRlcyBpZiBhIHByb3ZpZGVkIG51bWJlciB2YWx1ZSBpcyB2YWxpZC5cbiAqIEFuIGludmFsaWQgdmFsdWUgaXM6IHVuZGVmaW5lZCB8IE5hTiB8IEluZmluaXRlIHwgLUluZmluaXRlIHwgbnVsbFxuICogU2VlIGZvciBtb3JlIGRldGFpbHM6XG4gKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL2lzRmluaXRlXG4gKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL2lzTmFOXG4gKiBAcGFyYW0ge251bWJlciB8IHVuZGVmaW5lZCB8IG51bGx9IHZhbHVlIHZhbHVlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gaWYgdmFsaWQgb3Igbm90XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWROdW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBOdW1iZXIuaXNOYU4odmFsdWUpID09PSBmYWxzZSAmJiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpID09PSB0cnVlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm92aWRlZCBudW1iZXIgZm9yIHVzZSB3aXRoIGNhbGNpdGUtaW5wdXQuIEl0IGFsc29cbiAqIGd1YXJkcyBhZ2FpbnN0IGludmFsaWQgdHlwZXMgZm9sbG93aW5nIHRoaXMgbG9naWM6XG4gKiAgIC0gSWYgdGhlIHZhbHVlIGlzIHZhbGlkIChub3QgTmFOLCBmaW5pdGUpLCB0aGUgdmFsdWUgaXMgcmV0dXJuZWQgYXMgYSBzdHJpbmdcbiAqICAgLSBJZiBub3QgYW5kIGlmIGEgdmFsaWQgZGVmYXVsdCB2YWx1ZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgcmV0dXJuZWQgYXMgYSBzdHJpbmdcbiAqICAgLSBJZiBub3QsIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogQHBhcmFtIHZhbHVlXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlXG4gKiBAcmV0dXJucyBhIHNhbml0aXplZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gc2FuaXRpemVOdW1iZXIodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGxldCByZXR1cm5lZFZhbHVlO1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0ZXN0ZWRWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IE51bWJlci5wYXJzZUZsb2F0KHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICBpZiAoaXNWYWxpZE51bWJlcih0ZXN0ZWRWYWx1ZSkpXG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gdGVzdGVkVmFsdWU7XG4gICAgICAgIGVsc2UgaWYgKGlzVmFsaWROdW1iZXIoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5lZFZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogYCR7cmV0dXJuZWRWYWx1ZX1gO1xufVxuLyoqXG4gKiBQYXJzZXMgYSB2YWx1ZSBzdHJpbmcgdG8gYSBudW1iZXIgZm9yIHVzZSB3aXRoIGNhbGNpdGUtaW5wdXQuIElmIHRoZSBzdHJpbmcgaXMgZW1wdHksIGl0IHdpbGwgcmV0dXJuIHVuZGVmaW5lZC5cbiAqIElmIHRoZSBzdHJpbmcgaXMgb3RoZXJ3aXNlIGludmFsaWQsIGl0IHdpbGwgcmV0dXJuIE5hTi5cbiAqIEBwYXJhbSB2YWx1ZSBjYWxjaXRlLWlucHV0IHZhbHVlXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfSB0aGUgcGFyc2VkIG51bWJlclxuICovXG5mdW5jdGlvbiBwYXJzZU51bWJlcih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gXCJcIilcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUpO1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgbnVtYmVyIHRvIGEgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgbnVtYmVyIHRvIGZvcm1hdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHM9M10gLSBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIGluY2x1ZGUgaW4gdGhlIGZvcm1hdHRlZCBudW1iZXIuIERlZmF1bHRzIHRvIDMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfHVuZGVmaW5lZH0gLSBUaGUgZm9ybWF0dGVkIG51bWJlciwgb3IgdW5kZWZpbmVkIGlmIHRoZSBpbnB1dCB2YWx1ZSBpcyBlbXB0eS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKHZhbHVlLCBmcmFjdGlvbkRpZ2l0cyA9IDMpIHtcbiAgICBpZiAoaXNFbXB0eURhdGFJdGVtKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUudG9GaXhlZChmcmFjdGlvbkRpZ2l0cykpO1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgbnVtYmVyIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSBudW1iZXIgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUsIHBhc3NpbmcgSW50bCBudW1iZXIgZm9ybWF0IG9wdGlvbnNcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlR2xvYmFsX09iamVjdHMvSW50bC9OdW1iZXJGb3JtYXQvTnVtYmVyRm9ybWF0I29wdGlvbnNcbiAqIEBwYXJhbSB7bnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkfSB2YWx1ZSB0byBiZSBmb3JtYXR0ZWQgYW5kIGxvY2FsaXplZFxuICogQHBhcmFtIHtJbnRsLk51bWJlckZvcm1hdE9wdGlvbnN9IGZvcm1hdE9wdGlvbnMgb3B0aW9ucyBvYmplY3QgbWF0Y2hpbmcgSW50bC5OdW1iZXJGb3JtYXRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGxvY2FsaXplZCAvIHJvdW5kZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE51bWJlclRvTG9jYWxlKHZhbHVlLCBmb3JtYXRPcHRpb25zKSB7XG4gICAgbGV0IGZvcm1hdHRlZFZhbHVlID0gXCJcIjtcbiAgICBpZiAoIWlzRW1wdHlEYXRhSXRlbSh2YWx1ZSkgJiYgIU51bWJlci5pc05hTih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgbG9jYWxlQ29kZSA9IGdldExvY2FsZUluZm8oKS5sb2NhbGU7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0gSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlQ29kZSwgZm9ybWF0T3B0aW9ucykuZm9ybWF0KE51bWJlcih2YWx1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7XG59XG5cbmV4cG9ydCB7IGZvcm1hdE51bWJlclRvTG9jYWxlIGFzIGEsIGZvcm1hdE51bWJlciBhcyBmLCBpc1ZhbGlkTnVtYmVyIGFzIGksIHBhcnNlTnVtYmVyIGFzIHAsIHNhbml0aXplTnVtYmVyIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzLm1hcCIsImNvbnN0IFVJRGVmYXVsdHMgPSB7XG4gICAgU2NhbGU6IFwic1wiLFxuICAgIFBvcG92ZXJUaW1lcjogNjBcbn07XG5jb25zdCBDYWxjaXRlU2NhbGUgPSB7XG4gICAgczogXCJzXCIsXG4gICAgbTogXCJtXCJcbn07XG5jb25zdCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nID0ge1xuICAgIGFic29sdXRlOiBcImFic29sdXRlXCIsXG4gICAgZml4ZWQ6IFwiZml4ZWRcIlxufTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVNjYWxlIGFzIEMsIFVJRGVmYXVsdHMgYXMgVSwgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyBhcyBhIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVpLXV0aWxzLTkyOGE0MDk2LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==