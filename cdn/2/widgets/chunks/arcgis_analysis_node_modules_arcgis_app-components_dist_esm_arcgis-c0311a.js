"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-scratch.entry.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-scratch.entry.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_from_scratch: () => (/* binding */ ArcgisNewItemPagesFeatureLayerFromScratch)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./feature-layer-58e18b03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js");
/* harmony import */ var _type_to_icon_7546439f_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./type-to-icon-7546439f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */




























const arcgisNewItemPagesFeatureLayerFromScratchCss = "p{margin-top:0px;margin-bottom:0px}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0px}.add-new-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;padding-bottom:2.5rem;background-color:var(--calcite-color-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;flex-grow:1;align-items:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);border-color:var(--calcite-color-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0px}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;margin-inline-end:1rem;flex-basis:100%}.layer-type:last-child{margin-inline-end:0px}";

const ArcgisNewItemPagesFeatureLayerFromScratch = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        /** Used to focus on the correct input when name is missing */
        this.layerNameInputRefs = {};
        /**
         * Used to determine if a layer/table's name field has been changed by the user or not
         *
         * `Record<layer's id, boolean>`
         * */
        this.nameFieldChangedByUser = {};
        this.getDuplicateLayerNameId = () => {
            const { layerInfos } = this;
            const lookupMap = {};
            for (let index = 0; index < layerInfos.length; index++) {
                const { name, id } = layerInfos[index];
                if (lookupMap[name]) {
                    return id;
                }
                lookupMap[name] = true;
            }
            return null;
        };
        this.getDefaultName = (prefix) => {
            const { layerInfos } = this;
            const getLayerNameFromIndex = (index) => `${prefix}_${index}`;
            const getIndexFromLayerName = (layerName) => parseInt(layerName.split("_")[1]);
            const latestLayerIndex = layerInfos.reduce((acc, curr) => {
                const index = getIndexFromLayerName(curr.name);
                if (!curr.name.startsWith(prefix) || isNaN(index)) {
                    return acc;
                }
                if (acc <= index) {
                    return index + 1;
                }
                return acc;
            }, 1);
            return getLayerNameFromIndex(latestLayerIndex);
        };
        this.addLayer = () => {
            const { i18n, layerInfos, getDefaultName, layerNameInputRefs } = this;
            const layerPrefix = i18n.layer;
            const id = (0,_guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_3__.g)();
            const name = getDefaultName(layerPrefix);
            this.layerInfos = [...layerInfos, { id, type: "point", name }];
            (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_2__.t)(100).then(() => {
                var _a;
                (_a = layerNameInputRefs[id]) === null || _a === void 0 ? void 0 : _a.setFocus();
            });
        };
        this.deleteLayer = (id, index) => {
            const { layerNameInputRefs, layerInfos, nameFieldChangedByUser } = this;
            if (layerInfos.length === 1) {
                return;
            }
            function removeItemFromList(itemList, index) {
                const newArr = [...itemList];
                newArr.splice(index, 1);
                return newArr;
            }
            this.layerInfos = removeItemFromList(layerInfos, index);
            delete layerNameInputRefs[id];
            delete nameFieldChangedByUser[id];
        };
        this.changeLayerName = (index, newName) => {
            const { layerInfos, nameFieldChangedByUser } = this;
            const layer = layerInfos[index];
            layer.name = newName;
            nameFieldChangedByUser[layer.id] = true;
        };
        this.changeLayerType = (index, oldType, newType) => {
            const { layerInfos, nameFieldChangedByUser, i18n, getDefaultName } = this;
            const layer = Object.assign({}, layerInfos[index]);
            // --- Change layer name to another default name if the user has NOT changed the name field
            if (!nameFieldChangedByUser[layer.id]) {
                // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/37189
                if (oldType === "table" && newType !== "table") {
                    // Switching from table to point/polygon/polyline
                    layer.name = getDefaultName(i18n.layer);
                }
                else if (oldType !== "table" && newType === "table") {
                    // Switching from point/polygon/polyline to table
                    layer.name = getDefaultName(i18n.table);
                }
            }
            layer.type = newType;
            this.layerInfos = [...layerInfos.slice(0, index), layer, ...layerInfos.slice(index + 1)];
        };
        this.setAlertMessage = (type) => {
            this.alertInfo = this.i18n.error[type];
        };
        this.alertInfo = undefined;
        this.layerInfos = [];
        this.layerPreference = {
            captureGPS: false,
            enableZDefaults: false,
            enableMDefaults: false
        };
    }
    async componentWillLoad() {
        this.addCreateI18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n;
        this.i18n = this.addCreateI18n.featureLayerFromScratch;
        const { layerPreference, newLayerInfos } = (0,_feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_7__.a)();
        this.layerPreference = layerPreference;
        if (newLayerInfos.length <= 0) {
            this.addLayer();
        }
        else {
            this.layerInfos = [...newLayerInfos];
        }
    }
    async handleNext() {
        var _a, _b, _c;
        const { layerInfos, layerNameInputRefs, setAlertMessage, getDuplicateLayerNameId, newItemUpdatePage, layerPreference } = this;
        const { portal } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        const missingNameId = (_a = layerInfos.find((info) => !info.name.trim())) === null || _a === void 0 ? void 0 : _a.id;
        if (missingNameId) {
            (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__.f)("Missing layer name");
            (_b = layerNameInputRefs[missingNameId]) === null || _b === void 0 ? void 0 : _b.setFocus();
            setAlertMessage("emptyName");
            return;
        }
        const duplicateId = getDuplicateLayerNameId();
        if (duplicateId) {
            (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__.f)("Layer names must be unique");
            (_c = layerNameInputRefs[duplicateId]) === null || _c === void 0 ? void 0 : _c.setFocus();
            setAlertMessage("duplicateTitle");
            return;
        }
        // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/37048
        if (this.layerInfos.length === 1) {
            _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_4__.i.title = this.layerInfos[0].name;
        }
        (0,_feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_7__.b)(this.layerInfos, layerPreference, portal);
        newItemUpdatePage.emit("itemProperties");
    }
    render() {
        const { i18n, alertInfo, addCreateI18n, addLayer, layerInfos, layerNameInputRefs, deleteLayer, layerPreference, changeLayerName, changeLayerType } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.header }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "add-new-container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "layer-container" }, layerInfos.map(({ id, name, type: layerType }, index) => {
            const curLayer = layerInfos[index];
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: "info-card", key: id, value: id }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: name, class: "layer-name-input", placeholder: addCreateI18n.featureLayer.placeholders[layerType], onCalciteInputInput: (event) => {
                    const node = event.target;
                    changeLayerName(index, node.value);
                }, ref: (ele) => (layerNameInputRefs[id] = ele) }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox", { label: addCreateI18n.featureLayer.type[curLayer.type], class: "layer-type", selectionMode: "single", clearDisabled: true, onCalciteComboboxChange: (event) => {
                    const node = event.target;
                    changeLayerType(index, curLayer.type, node.selectedItems[0].value);
                } }, _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_6__.f
                .filter((type) => type !== "multipatch")
                .map((type) => ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-combobox-item", { textLabel: addCreateI18n.featureLayer.type[type], icon: _type_to_icon_7546439f_js__WEBPACK_IMPORTED_MODULE_9__.a[type], selected: curLayer.type === type, value: type })))), layerInfos.length > 1 && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "transparent", kind: "danger", scale: "m", href: "", "icon-start": "trash", onClick: () => deleteLayer(id, index) }))));
        })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "transparent", scale: "m", "icon-start": "plus", class: "add-layer", onClick: addLayer }, i18n.add)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-layer-preference", { i18n: i18n, defaultPreference: layerPreference, onLayerPreferenceChange: (event) => {
                const { layerPreference } = this;
                const detail = event.detail;
                if (!layerPreference.captureGPS && detail.captureGPS) {
                    (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__.e)("captureGPS");
                }
                if (!layerPreference.enableZDefaults && detail.enableZDefaults) {
                    (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__.e)("enableZDefaults");
                }
                if (!layerPreference.enableMDefaults && detail.enableMDefaults) {
                    (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_8__.e)("enableMDefaults");
                }
                this.layerPreference = event.detail;
            } }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.title, description: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.description, active: !!alertInfo, onAlertDismiss: () => (this.alertInfo = null) })));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisNewItemPagesFeatureLayerFromScratch.style = arcgisNewItemPagesFeatureLayerFromScratchCss;



//# sourceMappingURL=arcgis-new-item-pages-feature-layer-from-scratch.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
    switch (type) {
        case "build":
            return "blank";
        case "existing":
            return "fs";
        case "template":
            return "template";
        case "link":
            return "url";
    }
};
const enableLayerPreferenceTelemetry = (type) => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const itemExpandedTelemetry = (type) => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const filterChangeTelemetry = () => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const featureLayerTypeTelemetry = (type) => {
    const telemetryType = addFeatureLayerTypeToTelemetry(type);
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
        category: TELEMETRY_ID,
        attribute: telemetryType,
        pageName: TELEMETRY_PAGE_NAME
    });
};
const featureServiceEndTelemetry = () => {
    const { addFeatureLayerType, serviceInfo } = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a;
    const featureLayerServiceInfo = serviceInfo;
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME,
        count: featureLayerServiceInfo.layers.length,
        number: featureLayerServiceInfo.tables.length
    });
};
const featureLayerErrorTelemetry = (errString) => {
    var _a;
    (_a = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
        category: TELEMETRY_ID,
        error: errString
    });
};



//# sourceMappingURL=feature-layer-58e18b03.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureLayerIconInfo),
/* harmony export */   e: () => (/* binding */ esriGeometryIcons),
/* harmony export */   f: () => (/* binding */ fieldTypeIcons)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const featureLayerIconInfo = {
    point: "point",
    line: "line",
    polygon: "polygon",
    multipatch: "cube",
    table: "table",
    multipoint: "layer-points"
};
const esriGeometryIcons = {
    esriGeometryPoint: "point",
    esriGeometryPolyline: "line",
    esriGeometryPolygon: "polygon",
    esriGeometryMultiPatch: "cube",
    esriGeometryMultipoint: "point",
    none: "table"
};
const fieldTypeIcons = {
    esriFieldTypeOID: "key",
    esriFieldTypeBoolean: "boolean",
    esriFieldTypeString: "string",
    esriFieldTypeSingle: "number",
    esriFieldTypeDouble: "number",
    esriFieldTypeInteger: "integer",
    esriFieldTypeSmallInteger: "integer",
    esriFieldTypeGlobalID: "key",
    esriFieldTypeDate: "date-time",
    esriFieldTypeBigInteger: "integer",
    esriFieldTypeDateOnly: "calendar",
    esriFieldTypeTimeOnly: "clock",
    esriFieldTypeTimestampOffset: "time-zone"
};



//# sourceMappingURL=type-to-icon-7546439f.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWMwMzExYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkc7QUFDckQ7QUFDQTtBQUNUO0FBQzBCO0FBQ3BCO0FBQ2dCO0FBQzJCO0FBQ21CO0FBQzVDO0FBQzFDO0FBQ0Y7QUFDTTtBQUNIO0FBQ0s7QUFDSjtBQUNIO0FBQ0M7QUFDRjtBQUNHO0FBQ0g7QUFDQztBQUNPO0FBQ1A7QUFDSTtBQUNFO0FBQ0E7O0FBRWxDLHdEQUF3RCxlQUFlLGtCQUFrQixPQUFPLGVBQWUsMEJBQTBCLFlBQVksZ0JBQWdCLHVCQUF1QixpQkFBaUIsTUFBTSxrQkFBa0IsbUJBQW1CLGdCQUFnQixxQkFBcUIsZUFBZSxzQkFBc0IsaURBQWlELFdBQVcsZ0JBQWdCLHVCQUF1QixrQkFBa0IsV0FBVyxnQ0FBZ0MsYUFBYSxZQUFZLG1CQUFtQixpQkFBaUIsbUJBQW1CLG1EQUFtRCwyQ0FBMkMsYUFBYSw4QkFBOEIsd0JBQXdCLHVCQUF1QixvREFBb0QscURBQXFELHNCQUFzQix3REFBd0QsdURBQXVELFlBQVksdUJBQXVCLDhCQUE4QixZQUFZLHVCQUF1QixnQkFBZ0IsdUJBQXVCLHNCQUFzQjs7QUFFem5DO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4QixpQ0FBaUMscURBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQSxnQ0FBZ0MsMkJBQTJCO0FBQzNELHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsYUFBYTtBQUNqQyx3REFBd0QsT0FBTyxHQUFHLE1BQU07QUFDeEU7QUFDQTtB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a0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVksbUNBQW1DLEVBQUUsb0RBQVk7QUFDN0Q7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0RBQVc7QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFeU07O0FBRXpNOzs7Ozs7Ozs7Ozs7Ozs7O0FDNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWtGOztBQUVsRiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1mZWF0dXJlLWxheWVyLWZyb20tc2NyYXRjaC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9mZWF0dXJlLWxheWVyLTU4ZTE4YjAzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL3R5cGUtdG8taWNvbi03NTQ2NDM5Zi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgeyB0IGFzIHRpbWVvdXQgfSBmcm9tICcuL2Z1bmN0aW9uYWwtNDRkZThmY2YuanMnO1xuaW1wb3J0IHsgZyBhcyBndWlkIH0gZnJvbSAnLi9ndWlkLWFlYWVkODRkLmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLTEwNDkxYjJlLmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1iY2E3YmNkMS5qcyc7XG5pbXBvcnQgeyBmIGFzIGZlYXR1cmVMYXllclR5cGVzIH0gZnJvbSAnLi9mZWF0dXJlLWxheWVyLTE3YjY0OTQ2LmpzJztcbmltcG9ydCB7IGEgYXMgZ2V0TmV3SW5mb0Zyb21TdG9yZSwgYiBhcyBzYXZlTmV3SW5mb1RvU3RvcmUgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNzlmYjMwMmMuanMnO1xuaW1wb3J0IHsgZiBhcyBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSwgZSBhcyBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNThlMThiMDMuanMnO1xuaW1wb3J0IHsgYSBhcyBmZWF0dXJlTGF5ZXJJY29uSW5mbyB9IGZyb20gJy4vdHlwZS10by1pY29uLTc1NDY0MzlmLmpzJztcbmltcG9ydCAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtYmNiODllNjkuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3NlcnZpY2UtOGMyYzQyNDEuanMnO1xuaW1wb3J0ICcuL3VzZXItM2VhNjljM2EuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LWQ2MjY2MGQ0LmpzJztcbmltcG9ydCAnLi9hcGktMmUzYTEzNmYuanMnO1xuaW1wb3J0ICcuL3N0cmluZy01OGE1ZmVmMy5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCAnLi9pdGVtLWM1OGZmY2VkLmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS04ZDM4NDc5Ni5qcyc7XG5pbXBvcnQgJy4vaXRlbS0zNTM1NTUyZC5qcyc7XG5pbXBvcnQgJy4vYWRkLWl0ZW0tZGJiZTJmNTcuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtODEzNzNmNmQuanMnO1xuaW1wb3J0ICcuL2l0ZW0tdHlwZXMtMjAyOWIwNmIuanMnO1xuXG5jb25zdCBhcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJGcm9tU2NyYXRjaENzcyA9IFwicHttYXJnaW4tdG9wOjBweDttYXJnaW4tYm90dG9tOjBweH1idXR0b257Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbi1kdXJhdGlvbjoyMDBtcztib3JkZXI6bm9uZTtib3gtc2hhZG93Om5vbmU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtsaW5lLWhlaWdodDoxNnB4fWxhYmVse21hcmdpbi1ib3R0b206MHB4fS5hZGQtbmV3LWNvbnRhaW5lcnttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxLjVyZW07cGFkZGluZzoxLjVyZW07cGFkZGluZy1ib3R0b206Mi41cmVtO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1iYWNrZ3JvdW5kKX0uYWRkLWxheWVye21hcmdpbi10b3A6MXJlbTt3aWR0aDotbW96LWZpdC1jb250ZW50O3dpZHRoOmZpdC1jb250ZW50fS5pbmZvLWNhcmR7LS1jYWxjaXRlLWZvbnQtc2l6ZS0tMjowLjg3NXJlbTtkaXNwbGF5OmZsZXg7ZmxleC1ncm93OjE7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKTtwYWRkaW5nOjFyZW19LmluZm8tY2FyZDpub3QoOmxhc3Qtb2YtdHlwZSl7Ym9yZGVyLWJvdHRvbS13aWR0aDowcHh9LmluZm8tY2FyZDpmaXJzdC1jaGlsZHtib3JkZXItdG9wLWxlZnQtcmFkaXVzOnZhcigtLWNhbGNpdGUtYm9yZGVyLXJhZGl1cyk7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKX0uaW5mby1jYXJkOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOnZhcigtLWNhbGNpdGUtYm9yZGVyLXJhZGl1cyl9LmxheWVyLWljb257bWFyZ2luLWlubGluZS1lbmQ6MXJlbX0ubGF5ZXItbmFtZS1pbnB1dCwubGF5ZXItdHlwZXtmbGV4LWdyb3c6MTttYXJnaW4taW5saW5lLWVuZDoxcmVtO2ZsZXgtYmFzaXM6MTAwJX0ubGF5ZXItdHlwZTpsYXN0LWNoaWxke21hcmdpbi1pbmxpbmUtZW5kOjBweH1cIjtcblxuY29uc3QgQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2ggPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICAgICAgLyoqIFVzZWQgdG8gZm9jdXMgb24gdGhlIGNvcnJlY3QgaW5wdXQgd2hlbiBuYW1lIGlzIG1pc3NpbmcgKi9cbiAgICAgICAgdGhpcy5sYXllck5hbWVJbnB1dFJlZnMgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIGEgbGF5ZXIvdGFibGUncyBuYW1lIGZpZWxkIGhhcyBiZWVuIGNoYW5nZWQgYnkgdGhlIHVzZXIgb3Igbm90XG4gICAgICAgICAqXG4gICAgICAgICAqIGBSZWNvcmQ8bGF5ZXIncyBpZCwgYm9vbGVhbj5gXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMubmFtZUZpZWxkQ2hhbmdlZEJ5VXNlciA9IHt9O1xuICAgICAgICB0aGlzLmdldER1cGxpY2F0ZUxheWVyTmFtZUlkID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBsYXllckluZm9zIH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgbG9va3VwTWFwID0ge307XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGF5ZXJJbmZvcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG5hbWUsIGlkIH0gPSBsYXllckluZm9zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAobG9va3VwTWFwW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9va3VwTWFwW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldERlZmF1bHROYW1lID0gKHByZWZpeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBsYXllckluZm9zIH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgZ2V0TGF5ZXJOYW1lRnJvbUluZGV4ID0gKGluZGV4KSA9PiBgJHtwcmVmaXh9XyR7aW5kZXh9YDtcbiAgICAgICAgICAgIGNvbnN0IGdldEluZGV4RnJvbUxheWVyTmFtZSA9IChsYXllck5hbWUpID0+IHBhcnNlSW50KGxheWVyTmFtZS5zcGxpdChcIl9cIilbMV0pO1xuICAgICAgICAgICAgY29uc3QgbGF0ZXN0TGF5ZXJJbmRleCA9IGxheWVySW5mb3MucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGdldEluZGV4RnJvbUxheWVyTmFtZShjdXJyLm5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghY3Vyci5uYW1lLnN0YXJ0c1dpdGgocHJlZml4KSB8fCBpc05hTihpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFjYyA8PSBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggKyAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TGF5ZXJOYW1lRnJvbUluZGV4KGxhdGVzdExheWVySW5kZXgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZExheWVyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBpMThuLCBsYXllckluZm9zLCBnZXREZWZhdWx0TmFtZSwgbGF5ZXJOYW1lSW5wdXRSZWZzIH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgbGF5ZXJQcmVmaXggPSBpMThuLmxheWVyO1xuICAgICAgICAgICAgY29uc3QgaWQgPSBndWlkKCk7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0RGVmYXVsdE5hbWUobGF5ZXJQcmVmaXgpO1xuICAgICAgICAgICAgdGhpcy5sYXllckluZm9zID0gWy4uLmxheWVySW5mb3MsIHsgaWQsIHR5cGU6IFwicG9pbnRcIiwgbmFtZSB9XTtcbiAgICAgICAgICAgIHRpbWVvdXQoMTAwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgKF9hID0gbGF5ZXJOYW1lSW5wdXRSZWZzW2lkXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldEZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVMYXllciA9IChpZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGF5ZXJOYW1lSW5wdXRSZWZzLCBsYXllckluZm9zLCBuYW1lRmllbGRDaGFuZ2VkQnlVc2VyIH0gPSB0aGlzO1xuICAgICAgICAgICAgaWYgKGxheWVySW5mb3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSXRlbUZyb21MaXN0KGl0ZW1MaXN0LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FyciA9IFsuLi5pdGVtTGlzdF07XG4gICAgICAgICAgICAgICAgbmV3QXJyLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0FycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGF5ZXJJbmZvcyA9IHJlbW92ZUl0ZW1Gcm9tTGlzdChsYXllckluZm9zLCBpbmRleCk7XG4gICAgICAgICAgICBkZWxldGUgbGF5ZXJOYW1lSW5wdXRSZWZzW2lkXTtcbiAgICAgICAgICAgIGRlbGV0ZSBuYW1lRmllbGRDaGFuZ2VkQnlVc2VyW2lkXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFuZ2VMYXllck5hbWUgPSAoaW5kZXgsIG5ld05hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGF5ZXJJbmZvcywgbmFtZUZpZWxkQ2hhbmdlZEJ5VXNlciB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJJbmZvc1tpbmRleF07XG4gICAgICAgICAgICBsYXllci5uYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIG5hbWVGaWVsZENoYW5nZWRCeVVzZXJbbGF5ZXIuaWRdID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFuZ2VMYXllclR5cGUgPSAoaW5kZXgsIG9sZFR5cGUsIG5ld1R5cGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGF5ZXJJbmZvcywgbmFtZUZpZWxkQ2hhbmdlZEJ5VXNlciwgaTE4biwgZ2V0RGVmYXVsdE5hbWUgfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IE9iamVjdC5hc3NpZ24oe30sIGxheWVySW5mb3NbaW5kZXhdKTtcbiAgICAgICAgICAgIC8vIC0tLSBDaGFuZ2UgbGF5ZXIgbmFtZSB0byBhbm90aGVyIGRlZmF1bHQgbmFtZSBpZiB0aGUgdXNlciBoYXMgTk9UIGNoYW5nZWQgdGhlIG5hbWUgZmllbGRcbiAgICAgICAgICAgIGlmICghbmFtZUZpZWxkQ2hhbmdlZEJ5VXNlcltsYXllci5pZF0pIHtcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtcG9ydGFsLWFwcC9pc3N1ZXMvMzcxODlcbiAgICAgICAgICAgICAgICBpZiAob2xkVHlwZSA9PT0gXCJ0YWJsZVwiICYmIG5ld1R5cGUgIT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBTd2l0Y2hpbmcgZnJvbSB0YWJsZSB0byBwb2ludC9wb2x5Z29uL3BvbHlsaW5lXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm5hbWUgPSBnZXREZWZhdWx0TmFtZShpMThuLmxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkVHlwZSAhPT0gXCJ0YWJsZVwiICYmIG5ld1R5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBTd2l0Y2hpbmcgZnJvbSBwb2ludC9wb2x5Z29uL3BvbHlsaW5lIHRvIHRhYmxlXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLm5hbWUgPSBnZXREZWZhdWx0TmFtZShpMThuLnRhYmxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXllci50eXBlID0gbmV3VHlwZTtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJJbmZvcyA9IFsuLi5sYXllckluZm9zLnNsaWNlKDAsIGluZGV4KSwgbGF5ZXIsIC4uLmxheWVySW5mb3Muc2xpY2UoaW5kZXggKyAxKV07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0QWxlcnRNZXNzYWdlID0gKHR5cGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRJbmZvID0gdGhpcy5pMThuLmVycm9yW3R5cGVdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFsZXJ0SW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYXllckluZm9zID0gW107XG4gICAgICAgIHRoaXMubGF5ZXJQcmVmZXJlbmNlID0ge1xuICAgICAgICAgICAgY2FwdHVyZUdQUzogZmFsc2UsXG4gICAgICAgICAgICBlbmFibGVaRGVmYXVsdHM6IGZhbHNlLFxuICAgICAgICAgICAgZW5hYmxlTURlZmF1bHRzOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5hZGRDcmVhdGVJMThuID0gdWlTdG9yZVN0YXRlLmkxOG47XG4gICAgICAgIHRoaXMuaTE4biA9IHRoaXMuYWRkQ3JlYXRlSTE4bi5mZWF0dXJlTGF5ZXJGcm9tU2NyYXRjaDtcbiAgICAgICAgY29uc3QgeyBsYXllclByZWZlcmVuY2UsIG5ld0xheWVySW5mb3MgfSA9IGdldE5ld0luZm9Gcm9tU3RvcmUoKTtcbiAgICAgICAgdGhpcy5sYXllclByZWZlcmVuY2UgPSBsYXllclByZWZlcmVuY2U7XG4gICAgICAgIGlmIChuZXdMYXllckluZm9zLmxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExheWVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxheWVySW5mb3MgPSBbLi4ubmV3TGF5ZXJJbmZvc107XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTmV4dCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGNvbnN0IHsgbGF5ZXJJbmZvcywgbGF5ZXJOYW1lSW5wdXRSZWZzLCBzZXRBbGVydE1lc3NhZ2UsIGdldER1cGxpY2F0ZUxheWVyTmFtZUlkLCBuZXdJdGVtVXBkYXRlUGFnZSwgbGF5ZXJQcmVmZXJlbmNlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IHBvcnRhbCB9ID0gY29uZmlnU3RhdGU7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdOYW1lSWQgPSAoX2EgPSBsYXllckluZm9zLmZpbmQoKGluZm8pID0+ICFpbmZvLm5hbWUudHJpbSgpKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkO1xuICAgICAgICBpZiAobWlzc2luZ05hbWVJZCkge1xuICAgICAgICAgICAgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkoXCJNaXNzaW5nIGxheWVyIG5hbWVcIik7XG4gICAgICAgICAgICAoX2IgPSBsYXllck5hbWVJbnB1dFJlZnNbbWlzc2luZ05hbWVJZF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zZXRGb2N1cygpO1xuICAgICAgICAgICAgc2V0QWxlcnRNZXNzYWdlKFwiZW1wdHlOYW1lXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZUlkID0gZ2V0RHVwbGljYXRlTGF5ZXJOYW1lSWQoKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZUlkKSB7XG4gICAgICAgICAgICBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeShcIkxheWVyIG5hbWVzIG11c3QgYmUgdW5pcXVlXCIpO1xuICAgICAgICAgICAgKF9jID0gbGF5ZXJOYW1lSW5wdXRSZWZzW2R1cGxpY2F0ZUlkXSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnNldEZvY3VzKCk7XG4gICAgICAgICAgICBzZXRBbGVydE1lc3NhZ2UoXCJkdXBsaWNhdGVUaXRsZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtcG9ydGFsLWFwcC9pc3N1ZXMvMzcwNDhcbiAgICAgICAgaWYgKHRoaXMubGF5ZXJJbmZvcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGl0ZW1Qcm9wZXJ0aWVzU3RhdGUudGl0bGUgPSB0aGlzLmxheWVySW5mb3NbMF0ubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBzYXZlTmV3SW5mb1RvU3RvcmUodGhpcy5sYXllckluZm9zLCBsYXllclByZWZlcmVuY2UsIHBvcnRhbCk7XG4gICAgICAgIG5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJpdGVtUHJvcGVydGllc1wiKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGFsZXJ0SW5mbywgYWRkQ3JlYXRlSTE4biwgYWRkTGF5ZXIsIGxheWVySW5mb3MsIGxheWVyTmFtZUlucHV0UmVmcywgZGVsZXRlTGF5ZXIsIGxheWVyUHJlZmVyZW5jZSwgY2hhbmdlTGF5ZXJOYW1lLCBjaGFuZ2VMYXllclR5cGUgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWRlc2NyaXB0aW9uXCIsIHsgaGVhZGVyOiBpMThuLmhlYWRlciB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImFkZC1uZXctY29udGFpbmVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImxheWVyLWNvbnRhaW5lclwiIH0sIGxheWVySW5mb3MubWFwKCh7IGlkLCBuYW1lLCB0eXBlOiBsYXllclR5cGUgfSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1ckxheWVyID0gbGF5ZXJJbmZvc1tpbmRleF07XG4gICAgICAgICAgICByZXR1cm4gKGgoXCJsaVwiLCB7IGNsYXNzOiBcImluZm8tY2FyZFwiLCBrZXk6IGlkLCB2YWx1ZTogaWQgfSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogbmFtZSwgY2xhc3M6IFwibGF5ZXItbmFtZS1pbnB1dFwiLCBwbGFjZWhvbGRlcjogYWRkQ3JlYXRlSTE4bi5mZWF0dXJlTGF5ZXIucGxhY2Vob2xkZXJzW2xheWVyVHlwZV0sIG9uQ2FsY2l0ZUlucHV0SW5wdXQ6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMYXllck5hbWUoaW5kZXgsIG5vZGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sIHJlZjogKGVsZSkgPT4gKGxheWVyTmFtZUlucHV0UmVmc1tpZF0gPSBlbGUpIH0pLCBoKFwiY2FsY2l0ZS1jb21ib2JveFwiLCB7IGxhYmVsOiBhZGRDcmVhdGVJMThuLmZlYXR1cmVMYXllci50eXBlW2N1ckxheWVyLnR5cGVdLCBjbGFzczogXCJsYXllci10eXBlXCIsIHNlbGVjdGlvbk1vZGU6IFwic2luZ2xlXCIsIGNsZWFyRGlzYWJsZWQ6IHRydWUsIG9uQ2FsY2l0ZUNvbWJvYm94Q2hhbmdlOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlTGF5ZXJUeXBlKGluZGV4LCBjdXJMYXllci50eXBlLCBub2RlLnNlbGVjdGVkSXRlbXNbMF0udmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gfSwgZmVhdHVyZUxheWVyVHlwZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCh0eXBlKSA9PiB0eXBlICE9PSBcIm11bHRpcGF0Y2hcIilcbiAgICAgICAgICAgICAgICAubWFwKCh0eXBlKSA9PiAoaChcImNhbGNpdGUtY29tYm9ib3gtaXRlbVwiLCB7IHRleHRMYWJlbDogYWRkQ3JlYXRlSTE4bi5mZWF0dXJlTGF5ZXIudHlwZVt0eXBlXSwgaWNvbjogZmVhdHVyZUxheWVySWNvbkluZm9bdHlwZV0sIHNlbGVjdGVkOiBjdXJMYXllci50eXBlID09PSB0eXBlLCB2YWx1ZTogdHlwZSB9KSkpKSwgbGF5ZXJJbmZvcy5sZW5ndGggPiAxICYmIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBhcHBlYXJhbmNlOiBcInRyYW5zcGFyZW50XCIsIGtpbmQ6IFwiZGFuZ2VyXCIsIHNjYWxlOiBcIm1cIiwgaHJlZjogXCJcIiwgXCJpY29uLXN0YXJ0XCI6IFwidHJhc2hcIiwgb25DbGljazogKCkgPT4gZGVsZXRlTGF5ZXIoaWQsIGluZGV4KSB9KSkpKTtcbiAgICAgICAgfSkpLCBoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBhcHBlYXJhbmNlOiBcInRyYW5zcGFyZW50XCIsIHNjYWxlOiBcIm1cIiwgXCJpY29uLXN0YXJ0XCI6IFwicGx1c1wiLCBjbGFzczogXCJhZGQtbGF5ZXJcIiwgb25DbGljazogYWRkTGF5ZXIgfSwgaTE4bi5hZGQpKSwgaChcImFyY2dpcy1uZXctaXRlbS1sYXllci1wcmVmZXJlbmNlXCIsIHsgaTE4bjogaTE4biwgZGVmYXVsdFByZWZlcmVuY2U6IGxheWVyUHJlZmVyZW5jZSwgb25MYXllclByZWZlcmVuY2VDaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGF5ZXJQcmVmZXJlbmNlIH0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgICAgICBpZiAoIWxheWVyUHJlZmVyZW5jZS5jYXB0dXJlR1BTICYmIGRldGFpbC5jYXB0dXJlR1BTKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeShcImNhcHR1cmVHUFNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbGF5ZXJQcmVmZXJlbmNlLmVuYWJsZVpEZWZhdWx0cyAmJiBkZXRhaWwuZW5hYmxlWkRlZmF1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeShcImVuYWJsZVpEZWZhdWx0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsYXllclByZWZlcmVuY2UuZW5hYmxlTURlZmF1bHRzICYmIGRldGFpbC5lbmFibGVNRGVmYXVsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXJQcmVmZXJlbmNlVGVsZW1ldHJ5KFwiZW5hYmxlTURlZmF1bHRzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyUHJlZmVyZW5jZSA9IGV2ZW50LmRldGFpbDtcbiAgICAgICAgICAgIH0gfSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBhbGVydEluZm8gPT09IG51bGwgfHwgYWxlcnRJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbGVydEluZm8udGl0bGUsIGRlc2NyaXB0aW9uOiBhbGVydEluZm8gPT09IG51bGwgfHwgYWxlcnRJbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhbGVydEluZm8uZGVzY3JpcHRpb24sIGFjdGl2ZTogISFhbGVydEluZm8sIG9uQWxlcnREaXNtaXNzOiAoKSA9PiAodGhpcy5hbGVydEluZm8gPSBudWxsKSB9KSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2guc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJGcm9tU2NyYXRjaENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRmVhdHVyZUxheWVyRnJvbVNjcmF0Y2ggYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2ZlYXR1cmVfbGF5ZXJfZnJvbV9zY3JhdGNoIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyY2dpcy1uZXctaXRlbS1wYWdlcy1mZWF0dXJlLWxheWVyLWZyb20tc2NyYXRjaC5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tZGJiZTJmNTcuanMnO1xuXG5jb25zdCBURUxFTUVUUllfSUQgPSBcImNyZWF0ZSBmZWF0dXJlIGxheWVyXCI7XG5jb25zdCBURUxFTUVUUllfUEFHRV9OQU1FID0gXCJteSBjb250ZW50XCI7XG5jb25zdCBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiYnVpbGRcIjpcbiAgICAgICAgICAgIHJldHVybiBcImJsYW5rXCI7XG4gICAgICAgIGNhc2UgXCJleGlzdGluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZnNcIjtcbiAgICAgICAgY2FzZSBcInRlbXBsYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ0ZW1wbGF0ZVwiO1xuICAgICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwidXJsXCI7XG4gICAgfVxufTtcbmNvbnN0IGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gICAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICAgIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBgZW5hYmxlICR7dHlwZSA9PT0gXCJjYXB0dXJlR1BTXCIgPyBcImdwc1wiIDogdHlwZSA9PT0gXCJlbmFibGVaRGVmYXVsdHNcIiA/IFwielwiIDogXCJtXCJ9YCwge1xuICAgICAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgICAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gICAgfSk7XG59O1xuY29uc3QgaXRlbUV4cGFuZGVkVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gICAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIGBleHBhbmQgJHt0eXBlfSBkZXRhaWxzYCwge1xuICAgICAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgICAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gICAgfSk7XG59O1xuY29uc3QgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgXCJmaWx0ZXJcIiwge1xuICAgICAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgICAgICBhdHRyaWJ1dGU6IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeShhZGRJdGVtU3RhdGUuYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gICAgfSk7XG59O1xuY29uc3QgZmVhdHVyZUxheWVyVHlwZVRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gICAgY29uc3QgdGVsZW1ldHJ5VHlwZSA9IGFkZEZlYXR1cmVMYXllclR5cGVUb1RlbGVtZXRyeSh0eXBlKTtcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gICAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIFwiZnJvbSBvcHRpb25cIiwge1xuICAgICAgICBjYXRlZ29yeTogVEVMRU1FVFJZX0lELFxuICAgICAgICBhdHRyaWJ1dGU6IHRlbGVtZXRyeVR5cGUsXG4gICAgICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FXG4gICAgfSk7XG59O1xuY29uc3QgZmVhdHVyZVNlcnZpY2VFbmRUZWxlbWV0cnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBhZGRGZWF0dXJlTGF5ZXJUeXBlLCBzZXJ2aWNlSW5mbyB9ID0gYWRkSXRlbVN0YXRlO1xuICAgIGNvbnN0IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvID0gc2VydmljZUluZm87XG4gICAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICAgIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5lbmRXb3JrZmxvdyhURUxFTUVUUllfSUQsIHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkRmVhdHVyZUxheWVyVHlwZSksXG4gICAgICAgIHBhZ2VOYW1lOiBURUxFTUVUUllfUEFHRV9OQU1FLFxuICAgICAgICBjb3VudDogZmVhdHVyZUxheWVyU2VydmljZUluZm8ubGF5ZXJzLmxlbmd0aCxcbiAgICAgICAgbnVtYmVyOiBmZWF0dXJlTGF5ZXJTZXJ2aWNlSW5mby50YWJsZXMubGVuZ3RoXG4gICAgfSk7XG59O1xuY29uc3QgZmVhdHVyZUxheWVyRXJyb3JUZWxlbWV0cnkgPSAoZXJyU3RyaW5nKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIChfYSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvZ0Vycm9yKHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgZXJyb3I6IGVyclN0cmluZ1xuICAgIH0pO1xufTtcblxuZXhwb3J0IHsgZmVhdHVyZVNlcnZpY2VFbmRUZWxlbWV0cnkgYXMgYSwgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5IGFzIGIsIGZlYXR1cmVMYXllclR5cGVUZWxlbWV0cnkgYXMgYywgZW5hYmxlTGF5ZXJQcmVmZXJlbmNlVGVsZW1ldHJ5IGFzIGUsIGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5IGFzIGYsIGl0ZW1FeHBhbmRlZFRlbGVtZXRyeSBhcyBpIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZlYXR1cmUtbGF5ZXItNThlMThiMDMuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5jb25zdCBmZWF0dXJlTGF5ZXJJY29uSW5mbyA9IHtcbiAgICBwb2ludDogXCJwb2ludFwiLFxuICAgIGxpbmU6IFwibGluZVwiLFxuICAgIHBvbHlnb246IFwicG9seWdvblwiLFxuICAgIG11bHRpcGF0Y2g6IFwiY3ViZVwiLFxuICAgIHRhYmxlOiBcInRhYmxlXCIsXG4gICAgbXVsdGlwb2ludDogXCJsYXllci1wb2ludHNcIlxufTtcbmNvbnN0IGVzcmlHZW9tZXRyeUljb25zID0ge1xuICAgIGVzcmlHZW9tZXRyeVBvaW50OiBcInBvaW50XCIsXG4gICAgZXNyaUdlb21ldHJ5UG9seWxpbmU6IFwibGluZVwiLFxuICAgIGVzcmlHZW9tZXRyeVBvbHlnb246IFwicG9seWdvblwiLFxuICAgIGVzcmlHZW9tZXRyeU11bHRpUGF0Y2g6IFwiY3ViZVwiLFxuICAgIGVzcmlHZW9tZXRyeU11bHRpcG9pbnQ6IFwicG9pbnRcIixcbiAgICBub25lOiBcInRhYmxlXCJcbn07XG5jb25zdCBmaWVsZFR5cGVJY29ucyA9IHtcbiAgICBlc3JpRmllbGRUeXBlT0lEOiBcImtleVwiLFxuICAgIGVzcmlGaWVsZFR5cGVCb29sZWFuOiBcImJvb2xlYW5cIixcbiAgICBlc3JpRmllbGRUeXBlU3RyaW5nOiBcInN0cmluZ1wiLFxuICAgIGVzcmlGaWVsZFR5cGVTaW5nbGU6IFwibnVtYmVyXCIsXG4gICAgZXNyaUZpZWxkVHlwZURvdWJsZTogXCJudW1iZXJcIixcbiAgICBlc3JpRmllbGRUeXBlSW50ZWdlcjogXCJpbnRlZ2VyXCIsXG4gICAgZXNyaUZpZWxkVHlwZVNtYWxsSW50ZWdlcjogXCJpbnRlZ2VyXCIsXG4gICAgZXNyaUZpZWxkVHlwZUdsb2JhbElEOiBcImtleVwiLFxuICAgIGVzcmlGaWVsZFR5cGVEYXRlOiBcImRhdGUtdGltZVwiLFxuICAgIGVzcmlGaWVsZFR5cGVCaWdJbnRlZ2VyOiBcImludGVnZXJcIixcbiAgICBlc3JpRmllbGRUeXBlRGF0ZU9ubHk6IFwiY2FsZW5kYXJcIixcbiAgICBlc3JpRmllbGRUeXBlVGltZU9ubHk6IFwiY2xvY2tcIixcbiAgICBlc3JpRmllbGRUeXBlVGltZXN0YW1wT2Zmc2V0OiBcInRpbWUtem9uZVwiXG59O1xuXG5leHBvcnQgeyBmZWF0dXJlTGF5ZXJJY29uSW5mbyBhcyBhLCBlc3JpR2VvbWV0cnlJY29ucyBhcyBlLCBmaWVsZFR5cGVJY29ucyBhcyBmIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGUtdG8taWNvbi03NTQ2NDM5Zi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=