"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5d05d8"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-developer-credentials-select.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-developer-credentials-select.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_developer_credentials_select: () => (/* binding */ ArcgisNewItemPagesDeveloperCredentialsSelect)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _developer_credentials_492d3e3f_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./developer-credentials-492d3e3f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-492d3e3f.js");
/* harmony import */ var _privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./privileges-74639dae.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-74639dae.js");
/* harmony import */ var _subscription_22caae1a_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./subscription-22caae1a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-22caae1a.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/* harmony import */ var _privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./privileges-5c382f61.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-5c382f61.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */




































const arcgisNewItemPagesDeveloperCredentialsSelectCss = ".title-container{display:flex;align-items:center}.onboarding{--arcgis-information-min-width:0}.onboarding__scroll{overflow:auto;max-height:min(700px, 60vh)}.onboarding__section{padding-left:0.75rem;padding-right:0.75rem;padding-bottom:1rem;padding-top:0.5rem;width:286px}.onboarding__title{margin:0px;padding-top:0px;font-size:0.875rem;color:var(--calcite-color-text-1);font-weight:600}.onboarding__description{margin-top:0.5rem;margin-bottom:0.75rem;font-size:0.75rem;color:var(--calcite-color-text-1)}.section{margin-top:2rem}.url-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;background-color:var(--calcite-color-background)}.info-card{display:flex;align-items:center;list-style-type:none}.url-input{margin-top:0.5rem;margin-inline-end:1rem;width:100%}.add-url{margin-top:1rem;width:-moz-fit-content;width:fit-content}.header{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1);margin-top:0px;margin-bottom:0px;padding:0px}";

const ArcgisNewItemPagesDeveloperCredentialsSelect = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.workflowComplete = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "workflowComplete", 7);
        this.canCreateAPIKey = false;
        this.canShowLearnMore = true;
        this.isRegisterTerminalPage = () => {
            // API Key can't re-register
            return _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.workflow === "register" && this.selectedCredentialType === "oauth";
        };
        this.setAlertMessage = (type) => {
            this.alertInfo = this.i18n.error[type];
        };
        // R3 TODO: Add proper strings to DeveloperCredentialsSelectError, then remove this
        this.setUnsupportedUrlAlertMessage = () => {
            const error = this.i18nBase.featureLayerFromUrl.error;
            this.alertInfo = {
                title: error.invalidFeatureLayerUrl.title,
                description: this.i18n.error.registerError.description
            };
        };
        this.alertInfo = undefined;
        this.selectedCredentialType = "oauth";
        this.selectedApplicationEnvironment = "multiple";
        this.redirectUrls = [];
        this.referrerUrls = [];
        this.url = "";
        this.isLoading = false;
    }
    componentWillLoad() {
        var _a, _b;
        if (this.isRegisterTerminalPage()) {
            _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.nextText = "register";
        }
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.developerCredentialsSelect;
        this.i18nBase = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n;
        this.selectedCredentialType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsType || "apiKey";
        if (!this.canCreateAPIKey) {
            this.selectedCredentialType = "oauth";
        }
        const existingItem = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem;
        if (existingItem) {
            if (existingItem.type === "API Key") {
                this.selectedCredentialType = "apiKey";
            }
            else if (existingItem.type === "Application") {
                this.selectedCredentialType = "oauth";
            }
        }
        this.selectedApplicationEnvironment = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.applicationEnvironment || "multiple";
        // Use existing item if it's from registration process
        this.url = (_a = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.url) !== null && _a !== void 0 ? _a : (_b = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem) === null || _b === void 0 ? void 0 : _b.url;
        const redirectUrls = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsRedirectUrls;
        this.redirectUrls = (redirectUrls === null || redirectUrls === void 0 ? void 0 : redirectUrls.length) > 0 ? redirectUrls : [""];
        const referrerUrls = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.apiKeyReferrerUrls;
        this.referrerUrls = (referrerUrls === null || referrerUrls === void 0 ? void 0 : referrerUrls.length) > 0 ? referrerUrls : [""];
        const { portal, config: { helpBase } } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c;
        this.canShowLearnMore = !portal.isPortal || helpBase.includes("https://enterprise.arcgis.com/");
    }
    async componentDidLoad() {
        if (!_config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c.subscriptionInfo) {
            // This can be the first page on the workflow
            this.isLoading = true;
            const { result: subscriptionInfo } = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_1__.f)(() => (0,_subscription_22caae1a_js__WEBPACK_IMPORTED_MODULE_8__.g)(_config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c.portal), "subscriptionType", (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_1__.n)(_config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c.user));
            _config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c.subscriptionInfo = subscriptionInfo;
            this.isLoading = false;
        }
        this.canCreateAPIKey = (0,_privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_7__.p)();
    }
    async handleNext() {
        const { selectedCredentialType, selectedApplicationEnvironment, isRegisterTerminalPage, redirectUrls, redirectManagmentRef, referrerUrls, referrerManagmentRef, urlRef, setAlertMessage, url } = this;
        const validateUrlError = await urlRef.validateInput();
        if (validateUrlError) {
            urlRef.focusMainInput();
            return;
        }
        const nonEmptyRedirectUrls = redirectUrls.filter((url) => url);
        if (nonEmptyRedirectUrls.length <= 0) {
            setAlertMessage("redirectEmpty");
            redirectManagmentRef.focusInputByIndex(0);
            return;
        }
        const nonEmptyReferrerUrls = referrerUrls.filter((url) => url);
        if (selectedCredentialType === "apiKey" && nonEmptyReferrerUrls.length <= 0) {
            setAlertMessage("referrerEmpty");
            referrerManagmentRef.focusInputByIndex(0);
            return;
        }
        const valid = await this.redirectManagmentRef.validateAllInputs({ focusWhenInvalid: true });
        if (!valid) {
            this.setUnsupportedUrlAlertMessage();
            return;
        }
        const isCreatingApiKey = selectedCredentialType === "apiKey";
        if (isRegisterTerminalPage()) {
            this.isLoading = true;
            // TODO: handle error
            // API Key will go through service scope selection first
            // However, since users can't re-register API Key
            //  that page will not also have this part
            const { result } = await (0,_feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_3__.z)(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.id, (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_1__.g)(_config_75adf962_js__WEBPACK_IMPORTED_MODULE_2__.c.portal), { appType: selectedApplicationEnvironment, redirect_uris: nonEmptyRedirectUrls, url });
            this.isLoading = false;
            if (result) {
                this.workflowComplete.emit({
                    id: _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.id,
                    redirectUrls: nonEmptyRedirectUrls,
                    httpReferrers: nonEmptyReferrerUrls,
                    clientId: result.client_id,
                    clientSecret: result.client_secret,
                    appType: result.appType
                });
            }
            else {
                this.setUnsupportedUrlAlertMessage();
            }
            return;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsType = selectedCredentialType;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.applicationEnvironment = isCreatingApiKey
            ? undefined
            : selectedApplicationEnvironment;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.apiKeyReferrerUrls = isCreatingApiKey ? nonEmptyReferrerUrls : undefined;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.developerCredentialsRedirectUrls = nonEmptyRedirectUrls;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.type = isCreatingApiKey ? "API Key" : "Application";
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.url = isCreatingApiKey ? undefined : url;
        this.newItemUpdatePage.emit(isCreatingApiKey ? "serviceScope" : "itemProperties");
    }
    render() {
        const { i18n, selectedCredentialType, selectedApplicationEnvironment, redirectUrls, alertInfo, isLoading, referrerUrls, url, canCreateAPIKey, canShowLearnMore } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: { "overflow-hidden": isLoading } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { active: isLoading, text: i18n.registering }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, canCreateAPIKey ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "title-container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.title }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-information", { label: i18n.onboard.title, placement: "bottom-start", heading: i18n.onboard.title, headingLevel: 3, class: "onboarding", overlayPositioning: "fixed", paddedContent: false }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "onboarding__scroll" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("img", { class: "illustration", src: (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/cred-type.png`) }), _developer_credentials_492d3e3f_js__WEBPACK_IMPORTED_MODULE_6__.d.map((option) => {
            const { description, title } = i18n.onboard[option];
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "onboarding__section" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("h4", { class: "onboarding__title" }, title), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "onboarding__description" }, description)));
        })))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", class: "tile-select" }, _developer_credentials_492d3e3f_js__WEBPACK_IMPORTED_MODULE_6__.d.map((option) => ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", {
            // TODO: rework the condition once Steven publish his dubstep diagram
            disabled: !!_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.existingItem, checked: selectedCredentialType === option, heading: i18n.options[option].title, description: i18n.options[option].description, name: "dev-cred-create-mode", "input-enabled": true, width: "full", type: "radio", value: option, onCalciteTileSelectChange: (e) => (this.selectedCredentialType = e.target.value)
        })))))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { innerHTML: canShowLearnMore
                ? i18n.oauth2Hint
                    .replace("${apiLinkStart}", `<a href="https://developers.arcgis.com/documentation/mapping-apis-and-services/security/oauth-2.0/" target="_blank">`)
                    .replace("${endLink}", "</a>")
                : i18n.oauth2HintNoLink }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-data-array-management", { header: i18n.redirectUrlsTitle, description: i18n.redirectUrlsDescription, addNewText: _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.common.add, placeholder: "https://<server>[:port]", initialData: redirectUrls, required: true, validateData: (data) => {
                // Only printable ASCII characters are valid
                const invalidCharacters = new RegExp(/[^ -~]/);
                const containsInvalidCharacters = invalidCharacters.test(data.content);
                return data.content.length > 0 && !containsInvalidCharacters;
            }, onDataChanged: ({ detail: { allData } }) => {
                this.redirectUrls = allData.map((data) => data.content);
            }, ref: (ele) => (this.redirectManagmentRef = ele) })), selectedCredentialType === "apiKey" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-data-array-management", { header: i18n.refererrUrlsTitle, description: i18n.refererrUrlsDescription, addNewText: _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.common.add, placeholder: "http://*.your-app.com", initialData: referrerUrls, required: true, validateData: (data) => data.content.length > 0, onDataChanged: ({ detail: { allData } }) => {
                this.referrerUrls = allData.map((data) => data.content);
            }, ref: (ele) => (this.referrerManagmentRef = ele) }))), selectedCredentialType === "oauth" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-application-environment", { defaultEnvironment: selectedApplicationEnvironment, onArcgisApplicationEnvironmentChange: (e) => {
                this.selectedApplicationEnvironment = e.detail;
            } })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "section" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-url", { onNewItemUrlChange: (event) => (this.url = event.detail.url), url: url, ref: (ele) => (this.urlRef = ele), required: false, headerScale: "m" })))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.title, description: alertInfo === null || alertInfo === void 0 ? void 0 : alertInfo.description, active: !!alertInfo, onAlertDismiss: () => (this.alertInfo = null) })));
    }
    static get assetsDirs() { return ["assets"]; }
};
ArcgisNewItemPagesDeveloperCredentialsSelect.style = arcgisNewItemPagesDeveloperCredentialsSelectCss;



//# sourceMappingURL=arcgis-new-item-pages-developer-credentials-select.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-492d3e3f.js":
/*!***************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/developer-credentials-492d3e3f.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ serviceScopes),
/* harmony export */   b: () => (/* binding */ developerDefaultServiceScopes),
/* harmony export */   d: () => (/* binding */ developerCredentialsTypes),
/* harmony export */   o: () => (/* binding */ onlineDefaultServiceScopes),
/* harmony export */   r: () => (/* binding */ requiredServiceScopes),
/* harmony export */   s: () => (/* binding */ serviceScopeToPrivilege)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const developerCredentialsTypes = ["apiKey", "oauth"];
const serviceScopes = [
    "basemap",
    "geocodingNotStored",
    "routing",
    "serviceArea",
    "geocodingStored",
    "optimizedRouting",
    "closestFacility",
    "locationAllocation",
    "multiVehicleRouting",
    "costMatrix",
    "geoEnrichment"
];
const requiredServiceScopes = ["basemap"];
const onlineDefaultServiceScopes = ["geocodingNotStored"];
const developerDefaultServiceScopes = ["geocodingNotStored", "routing", "serviceArea"];
const serviceScopeToPrivilege = {
    basemap: "portal:apikey:basemaps",
    geocodingNotStored: "premium:user:geocode:temporary",
    routing: "premium:user:networkanalysis:routing",
    serviceArea: "premium:user:networkanalysis:servicearea",
    geocodingStored: "premium:user:geocode:stored",
    optimizedRouting: "premium:user:networkanalysis:optimizedrouting",
    closestFacility: "premium:user:networkanalysis:closestfacility",
    locationAllocation: "premium:user:networkanalysis:locationallocation",
    multiVehicleRouting: "premium:user:networkanalysis:vehiclerouting",
    costMatrix: "premium:user:networkanalysis:origindestinationcostmatrix",
    geoEnrichment: "premium:user:geoenrichment"
};



//# sourceMappingURL=developer-credentials-492d3e3f.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-22caae1a.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/subscription-22caae1a.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getSubscriptionInfo)
/* harmony export */ });
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const getSubscriptionInfo = async (portal) => {
    try {
        const subscriptionInfo = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_0__.r)(`${(0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_0__.g)(portal)}portals/self/subscriptionInfo`);
        return { result: subscriptionInfo };
    }
    catch (error) {
        console.error(error);
        return { error: { code: "unhandledError" } };
    }
};



//# sourceMappingURL=subscription-22caae1a.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTVkMDVkOC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUM4SDtBQUNuQztBQUNuQztBQUNlO0FBQ1o7QUFDTjtBQUNnQztBQUN4QjtBQUNTO0FBQ25DO0FBQ1I7QUFDTztBQUNMO0FBQ1U7QUFDRjtBQUNUO0FBQ0s7QUFDRjtBQUNIO0FBQ0M7QUFDRjtBQUNHO0FBQ0g7QUFDQztBQUNPO0FBQ1A7QUFDTTtBQUNBO0FBQ0c7QUFDVjtBQUNBO0FBQ0k7QUFDSDtBQUNDO0FBQ0s7O0FBRWxDLDBFQUEwRSxhQUFhLG1CQUFtQixZQUFZLGlDQUFpQyxvQkFBb0IsY0FBYyw0QkFBNEIscUJBQXFCLHFCQUFxQixzQkFBc0Isb0JBQW9CLG1CQUFtQixZQUFZLG1CQUFtQixXQUFXLGdCQUFnQixtQkFBbUIsa0NBQWtDLGdCQUFnQix5QkFBeUIsa0JBQWtCLHNCQUFzQixrQkFBa0Isa0NBQWtDLFNBQVMsZ0JBQWdCLGVBQWUsZ0JBQWdCLHFCQUFxQixlQUFlLGlEQUFpRCxXQUFXLGFBQWEsbUJBQW1CLHFCQUFxQixXQUFXLGtCQUFrQix1QkFBdUIsV0FBVyxTQUFTLGdCQUFnQix1QkFBdUIsa0JBQWtCLFFBQVEsZUFBZSxnQkFBZ0Isa0NBQWtDLGVBQWUsa0JBQWtCLFlBQVk7O0FBRXAvQjtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsaUNBQWlDLHFEQUFXO0FBQzVDLGdDQUFnQyxxREFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw4Q0FBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ25NO0FBQ0EsZUFBZSxJQUFJLHFEQUFDLFVBQVUsa0JBQWtCLEVBQUUscURBQUMsMEJBQTBCLDhJQUE4SSxNQUFNLHFEQUFDLDRCQUE0Qiw4T0FBOE87QUFDNWU7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTs7QUFFOEc7O0FBRTlHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDek1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU2TDs7QUFFN0w7Ozs7Ozs7Ozs7Ozs7OztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUN5RTs7QUFFekU7QUFDQTtBQUNBLHVDQUF1QyxzREFBTyxJQUFJLHNEQUFjLFNBQVM7QUFDekUsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7O0FBRW9DOztBQUVwQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kZXZlbG9wZXItY3JlZGVudGlhbHMtc2VsZWN0LmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2RldmVsb3Blci1jcmVkZW50aWFscy00OTJkM2UzZi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9zdWJzY3JpcHRpb24tMjJjYWFlMWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQsIGEgYXMgZ2V0QXNzZXRQYXRoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGYgYXMgZnJvbUNhY2hlLCBnIGFzIGdldFJlc3RCYXNlVXJsLCBuIGFzIGdldFVzZXJJZCB9IGZyb20gJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgeyB6IGFzIHJlZ2lzdGVyQXBwbGljYXRpb24gfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNTczYmI0NzMuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1iY2E3YmNkMS5qcyc7XG5pbXBvcnQgeyBkIGFzIGRldmVsb3BlckNyZWRlbnRpYWxzVHlwZXMgfSBmcm9tICcuL2RldmVsb3Blci1jcmVkZW50aWFscy00OTJkM2UzZi5qcyc7XG5pbXBvcnQgeyBwIGFzIGNhbkFkZEFQSUtleSB9IGZyb20gJy4vcHJpdmlsZWdlcy03NDYzOWRhZS5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN1YnNjcmlwdGlvbkluZm8gfSBmcm9tICcuL3N1YnNjcmlwdGlvbi0yMmNhYWUxYS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC00NGRlOGZjZi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL2l0ZW0tcHJvcGVydGllcy0xMDQ5MWIyZS5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci03OWZiMzAyYy5qcyc7XG5pbXBvcnQgJy4vZ3VpZC1hZWFlZDg0ZC5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLWJjYjg5ZTY5LmpzJztcbmltcG9ydCAnLi9zZXJ2aWNlLThjMmM0MjQxLmpzJztcbmltcG9ydCAnLi91c2VyLTNlYTY5YzNhLmpzJztcbmltcG9ydCAnLi9xdWVyeS1kNjI2NjBkNC5qcyc7XG5pbXBvcnQgJy4vYXBpLTJlM2ExMzZmLmpzJztcbmltcG9ydCAnLi9zdHJpbmctNThhNWZlZjMuanMnO1xuaW1wb3J0ICcuL2RvbS00ZDM2NzY3Ny5qcyc7XG5pbXBvcnQgJy4vaXRlbS1jNThmZmNlZC5qcyc7XG5pbXBvcnQgJy4vc2VydmVyLWl0ZW0tOGQzODQ3OTYuanMnO1xuaW1wb3J0ICcuL2l0ZW0tMzUzNTU1MmQuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtODEzNzNmNmQuanMnO1xuaW1wb3J0ICcuL2l0ZW0tdHlwZXMtMjAyOWIwNmIuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItMTdiNjQ5NDYuanMnO1xuaW1wb3J0ICcuL2Fncy1lYjQ1OGEwMy5qcyc7XG5pbXBvcnQgJy4vdXJsLTM1ODc1YTEwLmpzJztcbmltcG9ydCAnLi9zdG9yYWdlLTAzNTNhNzY5LmpzJztcbmltcG9ydCAnLi9maWxlLWJmOGFiOTBmLmpzJztcbmltcG9ydCAnLi9zdG9yZS02YTg4ZTZjNS5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy01YzM4MmY2MS5qcyc7XG5cbmNvbnN0IGFyY2dpc05ld0l0ZW1QYWdlc0RldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0Q3NzID0gXCIudGl0bGUtY29udGFpbmVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Lm9uYm9hcmRpbmd7LS1hcmNnaXMtaW5mb3JtYXRpb24tbWluLXdpZHRoOjB9Lm9uYm9hcmRpbmdfX3Njcm9sbHtvdmVyZmxvdzphdXRvO21heC1oZWlnaHQ6bWluKDcwMHB4LCA2MHZoKX0ub25ib2FyZGluZ19fc2VjdGlvbntwYWRkaW5nLWxlZnQ6MC43NXJlbTtwYWRkaW5nLXJpZ2h0OjAuNzVyZW07cGFkZGluZy1ib3R0b206MXJlbTtwYWRkaW5nLXRvcDowLjVyZW07d2lkdGg6Mjg2cHh9Lm9uYm9hcmRpbmdfX3RpdGxle21hcmdpbjowcHg7cGFkZGluZy10b3A6MHB4O2ZvbnQtc2l6ZTowLjg3NXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSk7Zm9udC13ZWlnaHQ6NjAwfS5vbmJvYXJkaW5nX19kZXNjcmlwdGlvbnttYXJnaW4tdG9wOjAuNXJlbTttYXJnaW4tYm90dG9tOjAuNzVyZW07Zm9udC1zaXplOjAuNzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpfS5zZWN0aW9ue21hcmdpbi10b3A6MnJlbX0udXJsLWNvbnRhaW5lcnttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxLjVyZW07cGFkZGluZzoxLjVyZW07YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJhY2tncm91bmQpfS5pbmZvLWNhcmR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtsaXN0LXN0eWxlLXR5cGU6bm9uZX0udXJsLWlucHV0e21hcmdpbi10b3A6MC41cmVtO21hcmdpbi1pbmxpbmUtZW5kOjFyZW07d2lkdGg6MTAwJX0uYWRkLXVybHttYXJnaW4tdG9wOjFyZW07d2lkdGg6LW1vei1maXQtY29udGVudDt3aWR0aDpmaXQtY29udGVudH0uaGVhZGVye2ZvbnQtc2l6ZToxcmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSk7bWFyZ2luLXRvcDowcHg7bWFyZ2luLWJvdHRvbTowcHg7cGFkZGluZzowcHh9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0ID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMud29ya2Zsb3dDb21wbGV0ZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwid29ya2Zsb3dDb21wbGV0ZVwiLCA3KTtcbiAgICAgICAgdGhpcy5jYW5DcmVhdGVBUElLZXkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5TaG93TGVhcm5Nb3JlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc1JlZ2lzdGVyVGVybWluYWxQYWdlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gQVBJIEtleSBjYW4ndCByZS1yZWdpc3RlclxuICAgICAgICAgICAgcmV0dXJuIHVpU3RvcmVTdGF0ZS53b3JrZmxvdyA9PT0gXCJyZWdpc3RlclwiICYmIHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9PT0gXCJvYXV0aFwiO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEFsZXJ0TWVzc2FnZSA9ICh0eXBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0SW5mbyA9IHRoaXMuaTE4bi5lcnJvclt0eXBlXTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUjMgVE9ETzogQWRkIHByb3BlciBzdHJpbmdzIHRvIERldmVsb3BlckNyZWRlbnRpYWxzU2VsZWN0RXJyb3IsIHRoZW4gcmVtb3ZlIHRoaXNcbiAgICAgICAgdGhpcy5zZXRVbnN1cHBvcnRlZFVybEFsZXJ0TWVzc2FnZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5pMThuQmFzZS5mZWF0dXJlTGF5ZXJGcm9tVXJsLmVycm9yO1xuICAgICAgICAgICAgdGhpcy5hbGVydEluZm8gPSB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGVycm9yLmludmFsaWRGZWF0dXJlTGF5ZXJVcmwudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuaTE4bi5lcnJvci5yZWdpc3RlckVycm9yLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFsZXJ0SW5mbyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENyZWRlbnRpYWxUeXBlID0gXCJvYXV0aFwiO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCA9IFwibXVsdGlwbGVcIjtcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVybHMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWZlcnJlclVybHMgPSBbXTtcbiAgICAgICAgdGhpcy51cmwgPSBcIlwiO1xuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWdpc3RlclRlcm1pbmFsUGFnZSgpKSB7XG4gICAgICAgICAgICB1aVN0b3JlU3RhdGUubmV4dFRleHQgPSBcInJlZ2lzdGVyXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGV2ZWxvcGVyQ3JlZGVudGlhbHNTZWxlY3Q7XG4gICAgICAgIHRoaXMuaTE4bkJhc2UgPSB1aVN0b3JlU3RhdGUuaTE4bjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENyZWRlbnRpYWxUeXBlID0gYWRkSXRlbVN0YXRlLmRldmVsb3BlckNyZWRlbnRpYWxzVHlwZSB8fCBcImFwaUtleVwiO1xuICAgICAgICBpZiAoIXRoaXMuY2FuQ3JlYXRlQVBJS2V5KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPSBcIm9hdXRoXCI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gYWRkSXRlbVN0YXRlLmV4aXN0aW5nSXRlbTtcbiAgICAgICAgaWYgKGV4aXN0aW5nSXRlbSkge1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nSXRlbS50eXBlID09PSBcIkFQSSBLZXlcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9IFwiYXBpS2V5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0l0ZW0udHlwZSA9PT0gXCJBcHBsaWNhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENyZWRlbnRpYWxUeXBlID0gXCJvYXV0aFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50ID0gYWRkSXRlbVN0YXRlLmFwcGxpY2F0aW9uRW52aXJvbm1lbnQgfHwgXCJtdWx0aXBsZVwiO1xuICAgICAgICAvLyBVc2UgZXhpc3RpbmcgaXRlbSBpZiBpdCdzIGZyb20gcmVnaXN0cmF0aW9uIHByb2Nlc3NcbiAgICAgICAgdGhpcy51cmwgPSAoX2EgPSBhZGRJdGVtU3RhdGUudXJsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudXJsO1xuICAgICAgICBjb25zdCByZWRpcmVjdFVybHMgPSBhZGRJdGVtU3RhdGUuZGV2ZWxvcGVyQ3JlZGVudGlhbHNSZWRpcmVjdFVybHM7XG4gICAgICAgIHRoaXMucmVkaXJlY3RVcmxzID0gKHJlZGlyZWN0VXJscyA9PT0gbnVsbCB8fCByZWRpcmVjdFVybHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlZGlyZWN0VXJscy5sZW5ndGgpID4gMCA/IHJlZGlyZWN0VXJscyA6IFtcIlwiXTtcbiAgICAgICAgY29uc3QgcmVmZXJyZXJVcmxzID0gYWRkSXRlbVN0YXRlLmFwaUtleVJlZmVycmVyVXJscztcbiAgICAgICAgdGhpcy5yZWZlcnJlclVybHMgPSAocmVmZXJyZXJVcmxzID09PSBudWxsIHx8IHJlZmVycmVyVXJscyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVmZXJyZXJVcmxzLmxlbmd0aCkgPiAwID8gcmVmZXJyZXJVcmxzIDogW1wiXCJdO1xuICAgICAgICBjb25zdCB7IHBvcnRhbCwgY29uZmlnOiB7IGhlbHBCYXNlIH0gfSA9IGNvbmZpZ1N0YXRlO1xuICAgICAgICB0aGlzLmNhblNob3dMZWFybk1vcmUgPSAhcG9ydGFsLmlzUG9ydGFsIHx8IGhlbHBCYXNlLmluY2x1ZGVzKFwiaHR0cHM6Ly9lbnRlcnByaXNlLmFyY2dpcy5jb20vXCIpO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnREaWRMb2FkKCkge1xuICAgICAgICBpZiAoIWNvbmZpZ1N0YXRlLnN1YnNjcmlwdGlvbkluZm8pIHtcbiAgICAgICAgICAgIC8vIFRoaXMgY2FuIGJlIHRoZSBmaXJzdCBwYWdlIG9uIHRoZSB3b3JrZmxvd1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgeyByZXN1bHQ6IHN1YnNjcmlwdGlvbkluZm8gfSA9IGF3YWl0IGZyb21DYWNoZSgoKSA9PiBnZXRTdWJzY3JpcHRpb25JbmZvKGNvbmZpZ1N0YXRlLnBvcnRhbCksIFwic3Vic2NyaXB0aW9uVHlwZVwiLCBnZXRVc2VySWQoY29uZmlnU3RhdGUudXNlcikpO1xuICAgICAgICAgICAgY29uZmlnU3RhdGUuc3Vic2NyaXB0aW9uSW5mbyA9IHN1YnNjcmlwdGlvbkluZm87XG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FuQ3JlYXRlQVBJS2V5ID0gY2FuQWRkQVBJS2V5KCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSwgc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50LCBpc1JlZ2lzdGVyVGVybWluYWxQYWdlLCByZWRpcmVjdFVybHMsIHJlZGlyZWN0TWFuYWdtZW50UmVmLCByZWZlcnJlclVybHMsIHJlZmVycmVyTWFuYWdtZW50UmVmLCB1cmxSZWYsIHNldEFsZXJ0TWVzc2FnZSwgdXJsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB2YWxpZGF0ZVVybEVycm9yID0gYXdhaXQgdXJsUmVmLnZhbGlkYXRlSW5wdXQoKTtcbiAgICAgICAgaWYgKHZhbGlkYXRlVXJsRXJyb3IpIHtcbiAgICAgICAgICAgIHVybFJlZi5mb2N1c01haW5JbnB1dCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vbkVtcHR5UmVkaXJlY3RVcmxzID0gcmVkaXJlY3RVcmxzLmZpbHRlcigodXJsKSA9PiB1cmwpO1xuICAgICAgICBpZiAobm9uRW1wdHlSZWRpcmVjdFVybHMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHNldEFsZXJ0TWVzc2FnZShcInJlZGlyZWN0RW1wdHlcIik7XG4gICAgICAgICAgICByZWRpcmVjdE1hbmFnbWVudFJlZi5mb2N1c0lucHV0QnlJbmRleCgwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub25FbXB0eVJlZmVycmVyVXJscyA9IHJlZmVycmVyVXJscy5maWx0ZXIoKHVybCkgPT4gdXJsKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPT09IFwiYXBpS2V5XCIgJiYgbm9uRW1wdHlSZWZlcnJlclVybHMubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHNldEFsZXJ0TWVzc2FnZShcInJlZmVycmVyRW1wdHlcIik7XG4gICAgICAgICAgICByZWZlcnJlck1hbmFnbWVudFJlZi5mb2N1c0lucHV0QnlJbmRleCgwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZCA9IGF3YWl0IHRoaXMucmVkaXJlY3RNYW5hZ21lbnRSZWYudmFsaWRhdGVBbGxJbnB1dHMoeyBmb2N1c1doZW5JbnZhbGlkOiB0cnVlIH0pO1xuICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFVuc3VwcG9ydGVkVXJsQWxlcnRNZXNzYWdlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNDcmVhdGluZ0FwaUtleSA9IHNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPT09IFwiYXBpS2V5XCI7XG4gICAgICAgIGlmIChpc1JlZ2lzdGVyVGVybWluYWxQYWdlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBlcnJvclxuICAgICAgICAgICAgLy8gQVBJIEtleSB3aWxsIGdvIHRocm91Z2ggc2VydmljZSBzY29wZSBzZWxlY3Rpb24gZmlyc3RcbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHNpbmNlIHVzZXJzIGNhbid0IHJlLXJlZ2lzdGVyIEFQSSBLZXlcbiAgICAgICAgICAgIC8vICB0aGF0IHBhZ2Ugd2lsbCBub3QgYWxzbyBoYXZlIHRoaXMgcGFydFxuICAgICAgICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IHJlZ2lzdGVyQXBwbGljYXRpb24oYWRkSXRlbVN0YXRlLmlkLCBnZXRSZXN0QmFzZVVybChjb25maWdTdGF0ZS5wb3J0YWwpLCB7IGFwcFR5cGU6IHNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCwgcmVkaXJlY3RfdXJpczogbm9uRW1wdHlSZWRpcmVjdFVybHMsIHVybCB9KTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZmxvd0NvbXBsZXRlLmVtaXQoe1xuICAgICAgICAgICAgICAgICAgICBpZDogYWRkSXRlbVN0YXRlLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFVybHM6IG5vbkVtcHR5UmVkaXJlY3RVcmxzLFxuICAgICAgICAgICAgICAgICAgICBodHRwUmVmZXJyZXJzOiBub25FbXB0eVJlZmVycmVyVXJscyxcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50SWQ6IHJlc3VsdC5jbGllbnRfaWQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldDogcmVzdWx0LmNsaWVudF9zZWNyZXQsXG4gICAgICAgICAgICAgICAgICAgIGFwcFR5cGU6IHJlc3VsdC5hcHBUeXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVuc3VwcG9ydGVkVXJsQWxlcnRNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYWRkSXRlbVN0YXRlLmRldmVsb3BlckNyZWRlbnRpYWxzVHlwZSA9IHNlbGVjdGVkQ3JlZGVudGlhbFR5cGU7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5hcHBsaWNhdGlvbkVudmlyb25tZW50ID0gaXNDcmVhdGluZ0FwaUtleVxuICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50O1xuICAgICAgICBhZGRJdGVtU3RhdGUuYXBpS2V5UmVmZXJyZXJVcmxzID0gaXNDcmVhdGluZ0FwaUtleSA/IG5vbkVtcHR5UmVmZXJyZXJVcmxzIDogdW5kZWZpbmVkO1xuICAgICAgICBhZGRJdGVtU3RhdGUuZGV2ZWxvcGVyQ3JlZGVudGlhbHNSZWRpcmVjdFVybHMgPSBub25FbXB0eVJlZGlyZWN0VXJscztcbiAgICAgICAgYWRkSXRlbVN0YXRlLnR5cGUgPSBpc0NyZWF0aW5nQXBpS2V5ID8gXCJBUEkgS2V5XCIgOiBcIkFwcGxpY2F0aW9uXCI7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS51cmwgPSBpc0NyZWF0aW5nQXBpS2V5ID8gdW5kZWZpbmVkIDogdXJsO1xuICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoaXNDcmVhdGluZ0FwaUtleSA/IFwic2VydmljZVNjb3BlXCIgOiBcIml0ZW1Qcm9wZXJ0aWVzXCIpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgaTE4biwgc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSwgc2VsZWN0ZWRBcHBsaWNhdGlvbkVudmlyb25tZW50LCByZWRpcmVjdFVybHMsIGFsZXJ0SW5mbywgaXNMb2FkaW5nLCByZWZlcnJlclVybHMsIHVybCwgY2FuQ3JlYXRlQVBJS2V5LCBjYW5TaG93TGVhcm5Nb3JlIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczogeyBcIm92ZXJmbG93LWhpZGRlblwiOiBpc0xvYWRpbmcgfSB9LCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWxvYWRlclwiLCB7IGFjdGl2ZTogaXNMb2FkaW5nLCB0ZXh0OiBpMThuLnJlZ2lzdGVyaW5nIH0pLCBoKFwiZGl2XCIsIG51bGwsIGNhbkNyZWF0ZUFQSUtleSA/IChoKEZyYWdtZW50LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwidGl0bGUtY29udGFpbmVyXCIgfSwgaChcImFyY2dpcy1uZXctaXRlbS1kZXNjcmlwdGlvblwiLCB7IGhlYWRlcjogaTE4bi50aXRsZSB9KSwgaChcImFyY2dpcy1pbmZvcm1hdGlvblwiLCB7IGxhYmVsOiBpMThuLm9uYm9hcmQudGl0bGUsIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIiwgaGVhZGluZzogaTE4bi5vbmJvYXJkLnRpdGxlLCBoZWFkaW5nTGV2ZWw6IDMsIGNsYXNzOiBcIm9uYm9hcmRpbmdcIiwgb3ZlcmxheVBvc2l0aW9uaW5nOiBcImZpeGVkXCIsIHBhZGRlZENvbnRlbnQ6IGZhbHNlIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJvbmJvYXJkaW5nX19zY3JvbGxcIiB9LCBoKFwiaW1nXCIsIHsgY2xhc3M6IFwiaWxsdXN0cmF0aW9uXCIsIHNyYzogZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy9jcmVkLXR5cGUucG5nYCkgfSksIGRldmVsb3BlckNyZWRlbnRpYWxzVHlwZXMubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGVzY3JpcHRpb24sIHRpdGxlIH0gPSBpMThuLm9uYm9hcmRbb3B0aW9uXTtcbiAgICAgICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBcIm9uYm9hcmRpbmdfX3NlY3Rpb25cIiB9LCBoKFwiaDRcIiwgeyBjbGFzczogXCJvbmJvYXJkaW5nX190aXRsZVwiIH0sIHRpdGxlKSwgaChcInBcIiwgeyBjbGFzczogXCJvbmJvYXJkaW5nX19kZXNjcmlwdGlvblwiIH0sIGRlc2NyaXB0aW9uKSkpO1xuICAgICAgICB9KSkpKSwgaChcImNhbGNpdGUtdGlsZS1zZWxlY3QtZ3JvdXBcIiwgeyBsYXlvdXQ6IFwidmVydGljYWxcIiwgY2xhc3M6IFwidGlsZS1zZWxlY3RcIiB9LCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzLm1hcCgob3B0aW9uKSA9PiAoaChcImNhbGNpdGUtdGlsZS1zZWxlY3RcIiwge1xuICAgICAgICAgICAgLy8gVE9ETzogcmV3b3JrIHRoZSBjb25kaXRpb24gb25jZSBTdGV2ZW4gcHVibGlzaCBoaXMgZHVic3RlcCBkaWFncmFtXG4gICAgICAgICAgICBkaXNhYmxlZDogISFhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLCBjaGVja2VkOiBzZWxlY3RlZENyZWRlbnRpYWxUeXBlID09PSBvcHRpb24sIGhlYWRpbmc6IGkxOG4ub3B0aW9uc1tvcHRpb25dLnRpdGxlLCBkZXNjcmlwdGlvbjogaTE4bi5vcHRpb25zW29wdGlvbl0uZGVzY3JpcHRpb24sIG5hbWU6IFwiZGV2LWNyZWQtY3JlYXRlLW1vZGVcIiwgXCJpbnB1dC1lbmFibGVkXCI6IHRydWUsIHdpZHRoOiBcImZ1bGxcIiwgdHlwZTogXCJyYWRpb1wiLCB2YWx1ZTogb3B0aW9uLCBvbkNhbGNpdGVUaWxlU2VsZWN0Q2hhbmdlOiAoZSkgPT4gKHRoaXMuc2VsZWN0ZWRDcmVkZW50aWFsVHlwZSA9IGUudGFyZ2V0LnZhbHVlKVxuICAgICAgICB9KSkpKSkpIDogKGgoXCJwXCIsIHsgaW5uZXJIVE1MOiBjYW5TaG93TGVhcm5Nb3JlXG4gICAgICAgICAgICAgICAgPyBpMThuLm9hdXRoMkhpbnRcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIke2FwaUxpbmtTdGFydH1cIiwgYDxhIGhyZWY9XCJodHRwczovL2RldmVsb3BlcnMuYXJjZ2lzLmNvbS9kb2N1bWVudGF0aW9uL21hcHBpbmctYXBpcy1hbmQtc2VydmljZXMvc2VjdXJpdHkvb2F1dGgtMi4wL1wiIHRhcmdldD1cIl9ibGFua1wiPmApXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiJHtlbmRMaW5rfVwiLCBcIjwvYT5cIilcbiAgICAgICAgICAgICAgICA6IGkxOG4ub2F1dGgySGludE5vTGluayB9KSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VjdGlvblwiIH0sIGgoXCJhcmNnaXMtZGF0YS1hcnJheS1tYW5hZ2VtZW50XCIsIHsgaGVhZGVyOiBpMThuLnJlZGlyZWN0VXJsc1RpdGxlLCBkZXNjcmlwdGlvbjogaTE4bi5yZWRpcmVjdFVybHNEZXNjcmlwdGlvbiwgYWRkTmV3VGV4dDogdWlTdG9yZVN0YXRlLmkxOG4uY29tbW9uLmFkZCwgcGxhY2Vob2xkZXI6IFwiaHR0cHM6Ly88c2VydmVyPls6cG9ydF1cIiwgaW5pdGlhbERhdGE6IHJlZGlyZWN0VXJscywgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRlRGF0YTogKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHByaW50YWJsZSBBU0NJSSBjaGFyYWN0ZXJzIGFyZSB2YWxpZFxuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRDaGFyYWN0ZXJzID0gbmV3IFJlZ0V4cCgvW14gLX5dLyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbnNJbnZhbGlkQ2hhcmFjdGVycyA9IGludmFsaWRDaGFyYWN0ZXJzLnRlc3QoZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb250ZW50Lmxlbmd0aCA+IDAgJiYgIWNvbnRhaW5zSW52YWxpZENoYXJhY3RlcnM7XG4gICAgICAgICAgICB9LCBvbkRhdGFDaGFuZ2VkOiAoeyBkZXRhaWw6IHsgYWxsRGF0YSB9IH0pID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXJscyA9IGFsbERhdGEubWFwKChkYXRhKSA9PiBkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgfSwgcmVmOiAoZWxlKSA9PiAodGhpcy5yZWRpcmVjdE1hbmFnbWVudFJlZiA9IGVsZSkgfSkpLCBzZWxlY3RlZENyZWRlbnRpYWxUeXBlID09PSBcImFwaUtleVwiICYmIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VjdGlvblwiIH0sIGgoXCJhcmNnaXMtZGF0YS1hcnJheS1tYW5hZ2VtZW50XCIsIHsgaGVhZGVyOiBpMThuLnJlZmVyZXJyVXJsc1RpdGxlLCBkZXNjcmlwdGlvbjogaTE4bi5yZWZlcmVyclVybHNEZXNjcmlwdGlvbiwgYWRkTmV3VGV4dDogdWlTdG9yZVN0YXRlLmkxOG4uY29tbW9uLmFkZCwgcGxhY2Vob2xkZXI6IFwiaHR0cDovLyoueW91ci1hcHAuY29tXCIsIGluaXRpYWxEYXRhOiByZWZlcnJlclVybHMsIHJlcXVpcmVkOiB0cnVlLCB2YWxpZGF0ZURhdGE6IChkYXRhKSA9PiBkYXRhLmNvbnRlbnQubGVuZ3RoID4gMCwgb25EYXRhQ2hhbmdlZDogKHsgZGV0YWlsOiB7IGFsbERhdGEgfSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZlcnJlclVybHMgPSBhbGxEYXRhLm1hcCgoZGF0YSkgPT4gZGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgIH0sIHJlZjogKGVsZSkgPT4gKHRoaXMucmVmZXJyZXJNYW5hZ21lbnRSZWYgPSBlbGUpIH0pKSksIHNlbGVjdGVkQ3JlZGVudGlhbFR5cGUgPT09IFwib2F1dGhcIiAmJiAoaChGcmFnbWVudCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcInNlY3Rpb25cIiB9LCBoKFwiYXJjZ2lzLWFwcGxpY2F0aW9uLWVudmlyb25tZW50XCIsIHsgZGVmYXVsdEVudmlyb25tZW50OiBzZWxlY3RlZEFwcGxpY2F0aW9uRW52aXJvbm1lbnQsIG9uQXJjZ2lzQXBwbGljYXRpb25FbnZpcm9ubWVudENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkQXBwbGljYXRpb25FbnZpcm9ubWVudCA9IGUuZGV0YWlsO1xuICAgICAgICAgICAgfSB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJzZWN0aW9uXCIgfSwgaChcImFyY2dpcy1uZXctaXRlbS11cmxcIiwgeyBvbk5ld0l0ZW1VcmxDaGFuZ2U6IChldmVudCkgPT4gKHRoaXMudXJsID0gZXZlbnQuZGV0YWlsLnVybCksIHVybDogdXJsLCByZWY6IChlbGUpID0+ICh0aGlzLnVybFJlZiA9IGVsZSksIHJlcXVpcmVkOiBmYWxzZSwgaGVhZGVyU2NhbGU6IFwibVwiIH0pKSkpLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLnRpdGxlLCBkZXNjcmlwdGlvbjogYWxlcnRJbmZvID09PSBudWxsIHx8IGFsZXJ0SW5mbyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxlcnRJbmZvLmRlc2NyaXB0aW9uLCBhY3RpdmU6ICEhYWxlcnRJbmZvLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4gKHRoaXMuYWxlcnRJbmZvID0gbnVsbCkgfSkpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRGV2ZWxvcGVyQ3JlZGVudGlhbHNTZWxlY3Quc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNEZXZlbG9wZXJDcmVkZW50aWFsc1NlbGVjdENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGV2ZWxvcGVyQ3JlZGVudGlhbHNTZWxlY3QgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2RldmVsb3Blcl9jcmVkZW50aWFsc19zZWxlY3QgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRldmVsb3Blci1jcmVkZW50aWFscy1zZWxlY3QuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5jb25zdCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzID0gW1wiYXBpS2V5XCIsIFwib2F1dGhcIl07XG5jb25zdCBzZXJ2aWNlU2NvcGVzID0gW1xuICAgIFwiYmFzZW1hcFwiLFxuICAgIFwiZ2VvY29kaW5nTm90U3RvcmVkXCIsXG4gICAgXCJyb3V0aW5nXCIsXG4gICAgXCJzZXJ2aWNlQXJlYVwiLFxuICAgIFwiZ2VvY29kaW5nU3RvcmVkXCIsXG4gICAgXCJvcHRpbWl6ZWRSb3V0aW5nXCIsXG4gICAgXCJjbG9zZXN0RmFjaWxpdHlcIixcbiAgICBcImxvY2F0aW9uQWxsb2NhdGlvblwiLFxuICAgIFwibXVsdGlWZWhpY2xlUm91dGluZ1wiLFxuICAgIFwiY29zdE1hdHJpeFwiLFxuICAgIFwiZ2VvRW5yaWNobWVudFwiXG5dO1xuY29uc3QgcmVxdWlyZWRTZXJ2aWNlU2NvcGVzID0gW1wiYmFzZW1hcFwiXTtcbmNvbnN0IG9ubGluZURlZmF1bHRTZXJ2aWNlU2NvcGVzID0gW1wiZ2VvY29kaW5nTm90U3RvcmVkXCJdO1xuY29uc3QgZGV2ZWxvcGVyRGVmYXVsdFNlcnZpY2VTY29wZXMgPSBbXCJnZW9jb2RpbmdOb3RTdG9yZWRcIiwgXCJyb3V0aW5nXCIsIFwic2VydmljZUFyZWFcIl07XG5jb25zdCBzZXJ2aWNlU2NvcGVUb1ByaXZpbGVnZSA9IHtcbiAgICBiYXNlbWFwOiBcInBvcnRhbDphcGlrZXk6YmFzZW1hcHNcIixcbiAgICBnZW9jb2RpbmdOb3RTdG9yZWQ6IFwicHJlbWl1bTp1c2VyOmdlb2NvZGU6dGVtcG9yYXJ5XCIsXG4gICAgcm91dGluZzogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOnJvdXRpbmdcIixcbiAgICBzZXJ2aWNlQXJlYTogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOnNlcnZpY2VhcmVhXCIsXG4gICAgZ2VvY29kaW5nU3RvcmVkOiBcInByZW1pdW06dXNlcjpnZW9jb2RlOnN0b3JlZFwiLFxuICAgIG9wdGltaXplZFJvdXRpbmc6IFwicHJlbWl1bTp1c2VyOm5ldHdvcmthbmFseXNpczpvcHRpbWl6ZWRyb3V0aW5nXCIsXG4gICAgY2xvc2VzdEZhY2lsaXR5OiBcInByZW1pdW06dXNlcjpuZXR3b3JrYW5hbHlzaXM6Y2xvc2VzdGZhY2lsaXR5XCIsXG4gICAgbG9jYXRpb25BbGxvY2F0aW9uOiBcInByZW1pdW06dXNlcjpuZXR3b3JrYW5hbHlzaXM6bG9jYXRpb25hbGxvY2F0aW9uXCIsXG4gICAgbXVsdGlWZWhpY2xlUm91dGluZzogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOnZlaGljbGVyb3V0aW5nXCIsXG4gICAgY29zdE1hdHJpeDogXCJwcmVtaXVtOnVzZXI6bmV0d29ya2FuYWx5c2lzOm9yaWdpbmRlc3RpbmF0aW9uY29zdG1hdHJpeFwiLFxuICAgIGdlb0VucmljaG1lbnQ6IFwicHJlbWl1bTp1c2VyOmdlb2VucmljaG1lbnRcIlxufTtcblxuZXhwb3J0IHsgc2VydmljZVNjb3BlcyBhcyBhLCBkZXZlbG9wZXJEZWZhdWx0U2VydmljZVNjb3BlcyBhcyBiLCBkZXZlbG9wZXJDcmVkZW50aWFsc1R5cGVzIGFzIGQsIG9ubGluZURlZmF1bHRTZXJ2aWNlU2NvcGVzIGFzIG8sIHJlcXVpcmVkU2VydmljZVNjb3BlcyBhcyByLCBzZXJ2aWNlU2NvcGVUb1ByaXZpbGVnZSBhcyBzIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRldmVsb3Blci1jcmVkZW50aWFscy00OTJkM2UzZi5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVxdWVzdCwgZyBhcyBnZXRSZXN0QmFzZVVybCB9IGZyb20gJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcblxuY29uc3QgZ2V0U3Vic2NyaXB0aW9uSW5mbyA9IGFzeW5jIChwb3J0YWwpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25JbmZvID0gYXdhaXQgcmVxdWVzdChgJHtnZXRSZXN0QmFzZVVybChwb3J0YWwpfXBvcnRhbHMvc2VsZi9zdWJzY3JpcHRpb25JbmZvYCk7XG4gICAgICAgIHJldHVybiB7IHJlc3VsdDogc3Vic2NyaXB0aW9uSW5mbyB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiB7IGNvZGU6IFwidW5oYW5kbGVkRXJyb3JcIiB9IH07XG4gICAgfVxufTtcblxuZXhwb3J0IHsgZ2V0U3Vic2NyaXB0aW9uSW5mbyBhcyBnIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmlwdGlvbi0yMmNhYWUxYS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=