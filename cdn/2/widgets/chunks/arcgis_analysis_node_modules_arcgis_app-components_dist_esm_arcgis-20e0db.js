"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20e0db"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-item-badge_10.entry.js":
/*!***********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-item-badge_10.entry.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_item_badge: () => (/* binding */ ArcgisItemBadge),
/* harmony export */   arcgis_item_badges: () => (/* binding */ ArcgisItemBadges),
/* harmony export */   arcgis_item_favorite: () => (/* binding */ ArcgisItemFavorite),
/* harmony export */   arcgis_item_share_summary: () => (/* binding */ ArcgisItemShareSummary),
/* harmony export */   arcgis_selected: () => (/* binding */ ArcgisSelectedItem$1),
/* harmony export */   arcgis_selected_item: () => (/* binding */ ArcgisSelectedItem),
/* harmony export */   arcgis_sublayer_type: () => (/* binding */ ArcgisSublayerTypeIcon),
/* harmony export */   arcgis_user_avatar: () => (/* binding */ ArcgisUserAvatar),
/* harmony export */   arcgis_user_popup: () => (/* binding */ ArcgisUserPopup),
/* harmony export */   arcgis_user_popup_popover: () => (/* binding */ ArcgisUserPopupPopover)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-050b6db9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js");
/* harmony import */ var _badges_555e1b90_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./badges-555e1b90.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-555e1b90.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _utils_aa26c49f_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils-aa26c49f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js");
/* harmony import */ var _user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./user-0fa9ff5a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-0fa9ff5a.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./privileges-5c382f61.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-5c382f61.js");
/* harmony import */ var _privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./privileges-74639dae.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-74639dae.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */






















function getIcon$2() {
    return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { viewBox: "0 0 16 16", fill: "currentColor" },
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M2.7 9c-.4-1.3-.2-2.8.4-4s1.7-2.2 3-2.6c.4.4.8.9 1.1 1.2h.2l.1-.1v-.1C7.2 2.4 6.8.2 6.3 0c-.1 0-.2-.1-.4-.1-.1.1-.2.1-.4.2-.1 0-.2.1-.3.2 0 .2-.1.3-.1.4 0 .2.1.5.4.8-1.4.6-2.6 1.7-3.3 3-.7 1.4-.9 3-.5 4.5h1z" }),
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M14 5c-.5-1.2-1.3-2.2-2.4-2.9S9.3 1 8 1h-.1c.1.3.2.6.3 1 1.2 0 2.4.5 3.3 1.2.9.8 1.5 1.8 1.8 3-3.4 4-10.1 4-12.2 3.9H1v.2l1.2.3c.5 1 1.3 1.8 2.2 2.4.9.6 2 .9 3 1v1h-2v1h5v-1h-2v-1c.9-.1 1.7-.3 2.5-.7.8-.4 1.5-1 2-1.6.6-.7 1-1.5 1.2-2.3.2-.8.3-1.7.2-2.6.7-.8.8-1.5-.3-1.8zm-6 8c-.9 0-1.7-.2-2.5-.6-.8-.4-1.4-.9-1.9-1.6 1.8.2 3.6 0 5.3-.5 1.7-.5 3.3-1.4 4.6-2.5-.1 1.4-.7 2.8-1.7 3.7-1 .9-2.4 1.5-3.8 1.5z" })));
}

function getIcon$1() {
    return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "12", height: "15", viewBox: "0 0 12 15", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M6 0C2.58 0 0 1.29 0 3C0 4.71 2.58 6 6 6C7.76001 6.08843 9.5049 5.6358 11 4.703V10.037C11 10.1696 11.0527 10.2968 11.1464 10.3906C11.2402 10.4843 11.3674 10.537 11.5 10.537C11.6326 10.537 11.7598 10.4843 11.8536 10.3906C11.9473 10.2968 12 10.1696 12 10.037V3C12 1.29 9.42 0 6 0ZM6 5C3.138 5 1 3.944 1 3C1 2.056 3.138 1 6 1C8.862 1 11 2.056 11 3C11 3.944 8.862 5 6 5ZM11.5 11.5C11.3674 11.5 11.2402 11.5527 11.1464 11.6464C11.0527 11.7402 11 11.8674 11 12V12.064C11 12.96 8.816 14 6 14C3.184 14 1 12.96 1 12.064V7.85C2.5767 8.53314 4.28202 8.86875 6 8.834C6.13261 8.834 6.25979 8.78132 6.35355 8.68755C6.44732 8.59379 6.5 8.46661 6.5 8.334C6.5 8.20139 6.44732 8.07421 6.35355 7.98045C6.25979 7.88668 6.13261 7.834 6 7.834C4.1944 7.89821 2.40441 7.4791 0.815 6.62C0.749152 6.56222 0.668856 6.5234 0.582675 6.50767C0.496494 6.49194 0.40766 6.4999 0.325646 6.53069C0.243632 6.56148 0.171514 6.61396 0.116982 6.68252C0.0624495 6.75108 0.0275483 6.83316 0.016 6.92C0.014 6.933 0.0100001 6.945 0.00900006 6.957C0.00700006 6.972 0 6.985 0 7V12.064C0 13.902 3.05 15 6 15C8.95 15 12 13.902 12 12.064V12C12 11.8674 11.9473 11.7402 11.8536 11.6464C11.7598 11.5527 11.6326 11.5 11.5 11.5Z", fill: "currentColor" })));
}

function getIcon() {
    return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("svg", { width: "15", height: "14", viewBox: "0 0 15 14", fill: "none", xmlns: "http://www.w3.org/2000/svg" },
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M14.9815 2.83602C14.9814 2.62597 14.8979 2.42454 14.7494 2.27596C14.6009 2.12738 14.3996 2.04379 14.1895 2.04352H11.5525C11.5402 2.04359 11.528 2.04122 11.5166 2.03655C11.5052 2.03188 11.4948 2.025 11.4861 2.01632C11.4773 2.00763 11.4704 1.9973 11.4657 1.98592C11.461 1.97454 11.4585 1.96234 11.4585 1.95002V0.988524C11.4571 0.85421 11.4287 0.721556 11.3749 0.598477C11.3211 0.475399 11.243 0.364419 11.1454 0.272161C11.0478 0.179903 10.9326 0.108259 10.8067 0.0615025C10.6807 0.0147464 10.5467 -0.00616255 10.4125 2.35228e-05H5.57652C5.29905 0.000288282 5.03302 0.110629 4.83682 0.306829C4.64062 0.503028 4.53028 0.769056 4.53002 1.04652V1.95002C4.53002 1.97482 4.52017 1.9986 4.50263 2.01614C4.4851 2.03367 4.46132 2.04352 4.43652 2.04352H1.79902C1.58896 2.04379 1.38759 2.12738 1.23911 2.27596C1.09062 2.42454 1.00715 2.62597 1.00702 2.83602V4.84402C1.00715 4.8812 1.02201 4.91681 1.04835 4.94305C1.07468 4.96929 1.11034 4.98402 1.14752 4.98402H2.45002L2.45702 4.97752V3.57652C2.45702 3.55305 2.46634 3.53054 2.48294 3.51394C2.49954 3.49735 2.52205 3.48802 2.54552 3.48802H13.2755C13.3349 3.48893 13.3915 3.51294 13.4334 3.55496C13.4754 3.59697 13.4992 3.65368 13.5 3.71302V10.584C13.5 10.7043 13.4763 10.8234 13.4303 10.9346C13.3843 11.0457 13.3168 11.1467 13.2317 11.2317C13.1467 11.3168 13.0457 11.3843 12.9346 11.4303C12.8234 11.4763 12.7043 11.5 12.584 11.5H8.13802C8.07976 11.5001 8.02289 11.4822 7.97513 11.4488C7.92737 11.4155 7.89102 11.3682 7.87102 11.3135C7.72621 10.9132 7.45683 10.5698 7.10244 10.3339C6.74805 10.0979 6.32734 9.98189 5.90211 10.0028C5.47688 10.0236 5.06956 10.1803 4.73997 10.4498C4.41039 10.7193 4.17592 11.0874 4.07102 11.5H2.82852C2.72813 11.5 2.63186 11.4601 2.56088 11.3892C2.4899 11.3182 2.45002 11.2219 2.45002 11.1215V9.59402C2.45002 9.56927 2.44025 9.54551 2.42284 9.52791C2.40543 9.51031 2.38178 9.50029 2.35702 9.50002H1.01402L1.00702 9.50702V11.797C1.00755 12.108 1.13137 12.4062 1.35134 12.6261C1.57132 12.8459 1.8695 12.9696 2.18052 12.97H4.26102C4.42562 13.2708 4.66545 13.5237 4.95706 13.704C5.24867 13.8844 5.58208 13.9859 5.9247 13.9988C6.26732 14.0117 6.60742 13.9355 6.91176 13.7776C7.21611 13.6197 7.47427 13.3856 7.66102 13.098C7.68692 13.0587 7.72218 13.0264 7.76363 13.0041C7.80508 12.9817 7.85143 12.97 7.89852 12.97H13.931C14.2096 12.9699 14.4767 12.8592 14.6737 12.6622C14.8707 12.4652 14.9814 12.1981 14.9815 11.9195V2.83602ZM10.5 1.81252C10.5 1.86225 10.4803 1.90994 10.4451 1.94511C10.4099 1.98027 10.3622 2.00002 10.3125 2.00002H5.68752C5.63779 2.00002 5.5901 1.98027 5.55494 1.94511C5.51977 1.90994 5.50002 1.86225 5.50002 1.81252V1.22502C5.5008 1.16559 5.52475 1.10881 5.56678 1.06678C5.60881 1.02476 5.66559 1.0008 5.72502 1.00002H10.275C10.3345 1.0008 10.3912 1.02476 10.4333 1.06678C10.4753 1.10881 10.4992 1.16559 10.5 1.22502V1.81252ZM6.00002 13C5.80224 13 5.6089 12.9414 5.44445 12.8315C5.28 12.7216 5.15183 12.5654 5.07614 12.3827C5.00045 12.2 4.98065 11.9989 5.01923 11.8049C5.05782 11.611 5.15306 11.4328 5.29291 11.2929C5.43277 11.1531 5.61095 11.0578 5.80493 11.0192C5.99891 10.9807 6.19998 11.0005 6.3827 11.0761C6.56543 11.1518 6.72161 11.28 6.83149 11.4445C6.94137 11.6089 7.00002 11.8022 7.00002 12C7.00002 12.2652 6.89466 12.5196 6.70713 12.7071C6.51959 12.8947 6.26524 13 6.00002 13Z", fill: "currentColor" }),
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("path", { d: "M6.6365 7.99698C6.68419 7.99703 6.73111 8.00905 6.77295 8.03194C6.8148 8.05483 6.85023 8.08785 6.876 8.12798C7.04796 8.40157 7.28805 8.62578 7.57274 8.77864C7.85743 8.93151 8.17696 9.00778 8.5 8.99998C8.84896 9.00826 9.19327 8.91871 9.49397 8.74145C9.79468 8.56419 10.0398 8.30631 10.2015 7.99698H11.9065C11.9313 7.99685 11.9551 7.98689 11.9726 7.96927C11.9902 7.95166 12 7.92783 12 7.90298V6.60848C12.0001 6.59612 11.9977 6.58387 11.993 6.57243C11.9883 6.561 11.9814 6.55061 11.9726 6.54187C11.9639 6.53312 11.9535 6.5262 11.9421 6.5215C11.9306 6.5168 11.9184 6.51442 11.906 6.51448H10.4C10.31 6.07987 10.0708 5.69047 9.72373 5.41383C9.37667 5.13719 8.94373 4.99077 8.5 4.99998C8.09556 5.01149 7.70379 5.14365 7.37503 5.37948C7.04627 5.61532 6.79552 5.94406 6.655 6.32348C6.63575 6.37938 6.59953 6.42787 6.55139 6.4622C6.50326 6.49653 6.44562 6.51498 6.3865 6.51498H0.5465C0.534208 6.51511 0.522456 6.52005 0.513763 6.52875C0.505071 6.53744 0.50013 6.54919 0.5 6.56148V7.94998C0.5 7.96245 0.504952 7.9744 0.513766 7.98322C0.52258 7.99203 0.534535 7.99698 0.547 7.99698H6.6365ZM8.5 5.94998C8.70767 5.94998 8.91068 6.01156 9.08335 6.12694C9.25602 6.24231 9.3906 6.4063 9.47007 6.59816C9.54955 6.79003 9.57034 7.00115 9.52982 7.20483C9.48931 7.40851 9.38931 7.5956 9.24246 7.74244C9.09562 7.88929 8.90852 7.98929 8.70484 8.02981C8.50116 8.07032 8.29005 8.04953 8.09818 7.97006C7.90632 7.89058 7.74233 7.756 7.62696 7.58333C7.51158 7.41066 7.45 7.20765 7.45 6.99998C7.45 6.72151 7.56062 6.45443 7.75754 6.25752C7.95445 6.06061 8.22152 5.94998 8.5 5.94998Z", fill: "currentColor" })));
}

const badgeIcons = {
    Authoritative: {
        icon: "check-circle"
    },
    Deprecated: {
        icon: "circle-disallowed"
    },
    Marketplace: {
        icon: "marketplace"
    },
    Retired: {
        icon: "exclamation-mark-triangle"
    },
    "Public Data Collection": {
        icon: "pencil"
    },
    Subscriber: { icon: "security" },
    Premium: { icon: "shield-coin" },
    Collaboration: { icon: "collaboration-distributed" },
    Registered: { icon: "key" },
    "Living Atlas": { image: getIcon$2 },
    "Open Data": { image: getIcon$1 },
    Solution: { image: getIcon }
};

const arcgisItemBadgeCss = ".badge{--calcite-color-foreground-2:var(--arcgis-item-badge-info-background);--calcite-color-text-1:var(--arcgis-item-badge-info-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-info-foreground);display:inline-block;border-width:0px}.authoritative{--calcite-color-foreground-2:var(--arcgis-item-badge-success-background);--calcite-color-text-1:var(--arcgis-item-badge-success-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-success-foreground)}.deprecated{--calcite-color-foreground-2:var(--arcgis-item-badge-danger-background);--calcite-color-text-1:var(--arcgis-item-badge-danger-foreground);--calcite-ui-icon-color:var(--arcgis-item-badge-danger-foreground)}.image{align-items:center;justify-content:flex-end;border-radius:0}.narrow{box-sizing:border-box;width:2rem;--calcite-chip-spacing-unit-l:0}.narrow .image{justify-content:center}.wrapper{display:flex;align-items:center}.icon{margin-top:0.25rem;margin-inline-start:0.375rem}.image svg{height:1rem;width:1rem;color:var(--calcite-ui-icon-color)}.image-l svg{height:1.5rem;width:1.5rem}.narrow--s{width:1.5rem}.narrow--s .icon{margin:0.25rem}.narrow--s .image{margin-inline-start:0px}.narrow--m .icon{margin:0.3125rem 0.5rem}.narrow--m .image{margin-inline-start:0px}.narrow--l{width:2.75rem}.narrow--l .icon{margin:0.5rem 0.8rem}.narrow--l .image{margin-inline-end:0.25rem}";

const ArcgisItemBadge = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.openTooltip = () => {
            this.tooltipOpen = true;
        };
        this.closeTooltip = async () => {
            await (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.t)(200);
            this.tooltipOpen = false;
            this.tooltip = null;
        };
        this.item = undefined;
        this.user = undefined;
        this.width = "full";
        this.scale = "m";
        this.badgeType = undefined;
        this.showTooltip = true;
        this.loading = true;
        this.tooltipText = "";
        this.tooltipOpen = undefined;
    }
    async componentWillLoad() {
        const { el } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
        this.i18n = locale[0];
        this.lang = locale[1];
        this.updateTooltipText();
    }
    async updateTooltipText() {
        const { badgeType, item, i18n, lang, user } = this;
        this.tooltipText = await (0,_badges_555e1b90_js__WEBPACK_IMPORTED_MODULE_2__.b)(badgeType, item, user, i18n, lang);
        this.loading = false;
    }
    renderImage(image) {
        if (!image) {
            return null;
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { slot: "image", class: { image: true, [`image-${this.scale}`]: true } }, image()));
    }
    render() {
        const { badgeType, width, loading, tooltipText, scale, showTooltip } = this;
        const i18n = this.i18n[badgeType];
        const { icon, image } = badgeIcons[this.badgeType];
        const narrow = width === "narrow";
        const classes = {
            badge: true,
            authoritative: badgeType === "Authoritative",
            deprecated: badgeType === "Deprecated",
            narrow,
            [`narrow--${scale}`]: narrow
        };
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", Object.assign({ class: "wrapper" }, (showTooltip
            ? {
                onMouseLeave: this.closeTooltip,
                onMouseEnter: this.openTooltip,
                onFocusout: this.closeTooltip,
                onFocusin: this.openTooltip
            }
            : {})), narrow ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", Object.assign({ class: classes, value: badgeType }, (icon ? { icon } : {}), (showTooltip ? { tabIndex: 0 } : {}), { ref: (el) => (this.chip = el), scale: scale }), image && this.renderImage(image))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-chip", Object.assign({ class: classes, value: badgeType }, (icon ? { icon } : {}), (showTooltip ? { tabIndex: 0 } : {}), { ref: (el) => (this.chip = el), scale: scale }), image && this.renderImage(image), i18n.title)), this.tooltipOpen && this.showTooltip && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-tunnel", { reference: this.el }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tooltip", { ref: (el) => {
                if (!el) {
                    return;
                }
                el.referenceElement = this.chip;
                if (!this.tooltip) {
                    this.tooltip = el;
                    this.tooltip.open = true;
                }
            }, closeOnClick: true, label: i18n.title, placement: "bottom-start", offsetDistance: 6, offsetSkidding: 0, style: { pointerEvents: "none" } }, narrow && !loading && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", { class: "tooltip__title", style: {
                fontSize: "var(--calcite-font-size--1)",
                color: "var(--calcite-color-text-1)",
                margin: "0 0 .25rem 0",
                padding: "0"
            } }, i18n.title)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "tooltip__text", style: {
                fontSize: "var(--calcite-font-size--2)",
                color: "var(--calcite-color-text-1)",
                margin: "0",
                padding: "0"
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { hidden: !loading, label: this.i18n.loading, inline: true, scale: "s" }), loading ? this.i18n.loading : tooltipText)))))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemBadge.style = arcgisItemBadgeCss;

const arcgisItemBadgesCss = ":host{display:flex;align-items:center}.badge{display:inline-block;margin-inline-end:0.25rem}";

const ArcgisItemBadges = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.item = undefined;
        this.portal = undefined;
        this.user = undefined;
        this.width = "full";
        this.showTooltips = false;
        this.empty = false;
        this.scale = "m";
        this.badges = [];
    }
    componentWillLoad() {
        if (this.item) {
            this.updateBadges(this.item);
        }
    }
    updateBadges(item) {
        var _a;
        this.badges = (0,_badges_555e1b90_js__WEBPACK_IMPORTED_MODULE_2__.a)(item, this.portal, this.user);
        if (!((_a = this.badges) === null || _a === void 0 ? void 0 : _a.length)) {
            this.empty = true;
        }
    }
    render() {
        const { item, width, scale, badges, user, showTooltips } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, badges.map((badge) => ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-badge", { class: "badge", item: item, user: user, badgeType: badge, width: width, scale: scale, showTooltip: showTooltips })))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
    static get watchers() { return {
        "item": ["updateBadges"]
    }; }
};
ArcgisItemBadges.style = arcgisItemBadgesCss;

let QUEUE = [];
let PROMISES = [];
const fetchFavorites = (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.d)(async (portal, user) => {
    var _a;
    // empty the queues and save the current state locally so that further calls can be staged in the queue
    const ids = [...QUEUE];
    const promises = [...PROMISES];
    QUEUE = [];
    PROMISES = [];
    const q = `(group:${getFavGroupId(user)} AND id:(${ids.join(" OR ")}))`;
    const response = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.r)(`${(0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.g)(portal)}search`, { num: 100, q });
    const favorites = (_a = response === null || response === void 0 ? void 0 : response.results) === null || _a === void 0 ? void 0 : _a.map((item) => item.id);
    promises.forEach(({ id, resolve }) => {
        resolve(favorites.includes(id));
    });
    return;
}, 300);
function getFavGroupId(user) {
    var _a, _b;
    return (_a = user.favGroupId) !== null && _a !== void 0 ? _a : (_b = user.sourceJSON) === null || _b === void 0 ? void 0 : _b.favGroupId;
}
async function isItemInFavorites(id, portal, user) {
    if (!user) {
        return false;
    }
    const promise = new Promise((resolve) => {
        PROMISES.push({ id, resolve });
    });
    if (!QUEUE.includes(id)) {
        QUEUE.push(id);
    }
    fetchFavorites(portal, user);
    return promise;
}
function addToFavorites(options) {
    return updateFavoriteStatus(options, true);
}
function removeFromFavorites(options) {
    return updateFavoriteStatus(options, false);
}
function updateFavoriteStatus({ item, portal, user }, favorite) {
    const { access, id } = item;
    const url = `${(0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.g)(portal)}content/items/${id}/${favorite ? "share" : "unshare"}`;
    const content = {
        everyone: access === "public",
        org: access === "org",
        groups: getFavGroupId(user),
        items: id
    };
    return (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.r)(url, content, {}, "post");
}

const ArcgisItemFavorite = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisItemFavoriteUpdate = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisItemFavoriteUpdate", 7);
        this.item = undefined;
        this.portal = undefined;
        this.user = undefined;
        this.width = "full";
        this.iconOnly = false;
        this.scale = "m";
        this.isFavorite = undefined;
    }
    /** Set focus on the component */
    async setFocus() {
        var _a;
        (_a = this.button) === null || _a === void 0 ? void 0 : _a.setFocus();
    }
    /** When favorite is updated, sync different favorite components for the same item */
    updateFavorite(e) {
        const { id, favorite } = e.detail;
        if (id === this.item.id) {
            this.isFavorite = favorite;
        }
    }
    async componentWillLoad() {
        const { el, item, portal, user } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
        this.i18n = locale[0];
        this.isFavorite = await isItemInFavorites(item.id, portal, user);
    }
    async toggleFavorite() {
        const { user, portal, item, isFavorite } = this;
        this.isFavorite = !isFavorite;
        const options = { user, portal, item };
        await (isFavorite ? removeFromFavorites(options) : addToFavorites(options));
        this.arcgisItemFavoriteUpdate.emit({
            id: item.id,
            favorite: this.isFavorite
        });
    }
    render() {
        const { i18n, isFavorite, width, scale, iconOnly } = this;
        const text = isFavorite ? i18n.remove : i18n.add;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", Object.assign({ width: iconOnly ? "auto" : width, scale: scale, appearance: iconOnly ? "transparent" : "outline-fill", kind: "neutral", iconStart: isFavorite ? "star-f" : "star", onClick: () => {
                this.toggleFavorite();
            }, ref: (el) => (this.button = el) }, (iconOnly ? { ariaLabel: text } : {})), !iconOnly && text)));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};

const arcgisItemShareSummaryCss = ":host{display:inline-flex;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);border:1px solid var(--calcite-color-border-1);border-radius:calc(var(--arcgis-item-share-summary-spacing) + 0.25rem);padding:0.25rem 0.5rem;min-width:calc(var(--arcgis-item-share-summary-spacing))}:host([scale=s]){font-size:0.875rem;--arcgis-item-share-summary-spacing:1rem}:host([scale=m]){font-size:1rem;--arcgis-item-share-summary-spacing:1.5rem}:host([scale=l]){font-size:1.125rem;--arcgis-item-share-summary-spacing:2rem}.icon{display:block;flex-shrink:0;flex-grow:0;width:var(--arcgis-item-share-summary-spacing);height:var(--arcgis-item-share-summary-spacing)}.text{font-weight:400;color:var(--calcite-color-text-1);margin-inline-start:calc(var(--arcgis-item-share-summary-spacing) / 2)}";

const ArcgisItemShareSummary = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.item = undefined;
        this.groups = undefined;
        this.showText = true;
        this.scale = "m";
    }
    async componentWillLoad() {
        const { el } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
        this.i18n = locale[0];
    }
    getIcon(access) {
        const lookup = {
            private: "user",
            shared: "user",
            org: "organization",
            public: "globe"
        };
        return lookup[access] || "globe";
    }
    render() {
        const { item, i18n, scale, showText } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: this.getIcon(item.access), scale: scale }), item.access === "shared" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: "plus", scale: scale }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: "icon", icon: "group", scale: scale }))), showText && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "text" }, i18n[item.access])));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemShareSummary.style = arcgisItemShareSummaryCss;

const arcgisSelectedCss = ".hide{display:none}.wrapper{display:flex;opacity:1;transition-property:opacity}.empty{display:block;padding:0.75rem;font-size:0.75rem;color:var(--calcite-color-text-3)}.loading{opacity:0}.button{margin-inline-end:0.5rem}.white-button{border:1px solid var(--calcite-color-border-1);border-inline-end:none;font-family:inherit;box-sizing:border-box;display:flex;height:2rem;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.white-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.white-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.white-button--disabled{pointer-events:none;opacity:0.25}.white-button__icon{margin-inline-start:0.75rem}calcite-dropdown[open] .white-button{border-bottom-color:var(--calcite-color-brand)}.page-range{font-size:0.875rem;font-weight:400;line-height:2rem;color:var(--calcite-color-text-2)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.checkbox{margin-top:0.75rem}";

const ArcgisSelectedItem$1 = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisSelectedDeselectAll = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedDeselectAll", 7);
        this.arcgisSelectedSelectPage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedSelectPage", 7);
        this.checked = undefined;
        this.indeterminate = undefined;
        this.heading = undefined;
        this.emptyText = undefined;
        this.total = undefined;
        this.totalSelected = undefined;
        this.hideCheckbox = false;
        this.hideSelectedText = false;
        this.loading = undefined;
    }
    async componentWillLoad() {
        const { element } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(element);
        this.i18n = locale[0];
    }
    renderButton() {
        const { totalSelected, i18n } = this;
        const attributes = {
            class: "button",
            slot: "trigger",
            kind: "neutral",
            appearance: "outline-fill",
            iconEnd: !!totalSelected ? "caret-down" : null
        };
        return this.hideSelectedText ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", Object.assign({}, attributes))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", Object.assign({}, attributes), i18n.selected.replace("${number}", `${totalSelected || 0}`)));
    }
    render() {
        const { i18n, checked, indeterminate, heading, totalSelected, hideSelectedText } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "wrapper" }, !this.hideCheckbox && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { for: "selected-checkbox", class: "white-button" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "screen-readers-only" }, checked ? i18n.deselect : i18n.selectPage), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { class: "checkbox", id: "selected-checkbox", disabled: !this.total, checked: checked, indeterminate: indeterminate, onCalciteCheckboxChange: (e) => {
                e.stopPropagation();
                const checked = e.currentTarget.checked;
                if (checked) {
                    this.arcgisSelectedSelectPage.emit();
                }
                else {
                    this.arcgisSelectedDeselectAll.emit();
                }
            } }))), (!hideSelectedText || !!totalSelected) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown", { widthScale: "l", closeOnSelectDisabled: true }, this.renderButton(), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-group", { selectionMode: "none", groupTitle: heading }, totalSelected < 1 && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "empty" }, this.emptyText), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)))))));
    }
    get element() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSelectedItem$1.style = arcgisSelectedCss;

const arcgisSelectedItemCss = ".selected-item__wrapper{display:flex;align-items:center}.selected-item__content{box-sizing:border-box;flex:1 1 0%;width:100%;padding-inline-start:0.5rem;max-width:12rem}.selected-item__title{margin:0px;margin-top:0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1)}.selected-item__description{margin:0px;margin-top:0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-1)}";

const ArcgisSelectedItem = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisSelectedItemRemove = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSelectedItemRemove", 7);
        this.heading = undefined;
        this.description = undefined;
    }
    render() {
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { "selection-mode": "none", onClick: (e) => {
                // there is an error with dropdown-items looking across shadow dom, so prevent default and manage this ourselves
                e.preventDefault();
                e.stopPropagation();
                this.arcgisSelectedItemRemove.emit();
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "selected-item__wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-start" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "selected-item__content" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("h4", { class: "selected-item__title", title: this.heading }, this.heading), this.description && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "selected-item__description" }, this.description)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-end" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "x", scale: "s" })))));
    }
    get element() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSelectedItem.style = arcgisSelectedItemCss;

const arcgisSublayerTypeCss = ":host{display:flex;align-items:center;line-height:1.35;--sublayer-type-font-size:var(--calcite-font-size--1)}.text{flex:1 1 0%;margin-inline-start:0.5rem;color:inherit}.name{font-weight:500;font-size:var(--sublayer-type-font-size)}.type{font-weight:400;font-size:var(--sublayer-type-font-size)}";

const ArcgisSublayerTypeIcon = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.geometry = undefined;
        this.type = undefined;
        this.scale = undefined;
        this.name = undefined;
        this.showName = true;
        this.showIcon = true;
        this.showType = true;
        this.renderer = undefined;
    }
    async componentWillLoad() {
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.el);
        this.i18n = locale[0];
    }
    render() {
        const { geometry, name, type, showName, showIcon, showType, renderer, i18n } = this;
        const info = (0,_utils_aa26c49f_js__WEBPACK_IMPORTED_MODULE_5__.g)({ type, geometry });
        if (renderer) {
            return renderer(Object.assign(Object.assign({}, info), { name }));
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, showIcon && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: info.icon, class: "icon", scale: this.scale }), (showType || showName) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "text" }, showName && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "name" }, name), showType && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "type" }, i18n[info.type])))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSublayerTypeIcon.style = arcgisSublayerTypeCss;

const arcgisUserAvatarCss = ":host{max-width:100%}.skeleton{display:flex}@keyframes pulse{50%{opacity:.5}}.skeleton{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;align-items:center}.skeleton-avatar{border-radius:100%;background-color:var(--calcite-color-foreground-3);width:var(--arcgis-user-avatar-size);height:var(--arcgis-user-avatar-size)}.skeleton-name{border-radius:var(--calcite-border-radius);background-color:var(--calcite-color-foreground-3);width:var(--arcgis-user-avatar-skeleton-width);border-radius:var(--arcgis-user-avatar-spacing);height:var(--arcgis-user-avatar-spacing);margin-inline-start:var(--arcgis-user-avatar-spacing)}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.avatar{display:block;flex-shrink:0;flex-grow:0;border-radius:100%;background-color:var(--calcite-color-foreground-3);width:var(--arcgis-user-avatar-size);height:var(--arcgis-user-avatar-size)}.text{display:flex;min-width:0px;flex-direction:column;justify-content:center;color:var(--calcite-color-text-2);text-align:start;margin-inline-start:var(--arcgis-user-avatar-spacing);line-height:calc(var(--arcgis-user-avatar-size) / 2)}.-text-no-avatar{margin-inline-start:0px}.-text-underline .title{text-decoration-line:underline}.title,.description{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.has-description{font-weight:500}.description{font-weight:400;color:var(--calcite-color-text-2)}:host{display:flex;min-width:0px;align-items:center}:host([scale=xs]){font-size:0.75rem;--arcgis-user-avatar-size:18px;--arcgis-user-avatar-spacing:0.25rem}:host([scale=xs]) .description{font-size:0.625rem;margin-top:-0.125rem}:host([scale=xs]) .text{line-height:1.35}:host([scale=s]){font-size:0.75rem;--arcgis-user-avatar-size:1.5rem;--arcgis-user-avatar-spacing:0.5rem;--arcgis-user-avatar-skeleton-width:4rem}:host([scale=s]) .description{font-size:0.625rem}:host([scale=m]){font-size:0.875rem;--arcgis-user-avatar-size:2rem;--arcgis-user-avatar-spacing:0.75rem;--arcgis-user-avatar-skeleton-width:5rem}:host([scale=m]) .description{font-size:0.75rem}:host([scale=l]){font-size:1rem;--arcgis-user-avatar-size:2.5rem;--arcgis-user-avatar-spacing:1rem;--arcgis-user-avatar-skeleton-width:6rem}:host([scale=l]) .description{font-size:0.875rem}";

const ArcgisUserAvatar = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.user = undefined;
        this.portal = undefined;
        this.scale = "m";
        this.showName = undefined;
        this.showAvatar = true;
        this.heading = undefined;
        this.description = undefined;
        this.underline = undefined;
        this.username = undefined;
        this.checkOnline = undefined;
    }
    async componentWillLoad() {
        const { el, portal, username } = this;
        this.lang = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.a)(el);
        if (username) {
            this.user = await (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.f)(username, portal);
        }
    }
    renderSkeleton() {
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton" }, this.showAvatar && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton-avatar" }), this.showName && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "skeleton-name" })));
    }
    renderUser() {
        const { user, lang, portal, showAvatar, showName, description, scale, underline, heading } = this;
        const { fullName, username } = user;
        const id = (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.n)(user);
        const showDescription = !!description;
        const name = ((fullName === null || fullName === void 0 ? void 0 : fullName.split(" ")) || []).slice(0, 2).join(" ");
        return [
            showAvatar && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-avatar", Object.assign({ class: "avatar", scale: scale === "xs" ? "s" : scale, fullName: name, username: username, userId: id, thumbnail: (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.c)(user, portal, this.checkOnline) }, (showName || showDescription ? { inert: true } : {})))),
            (showName || showDescription) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { text: true, "text--underline": underline, "text--no-avatar": !showAvatar } }, showName && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { title: true, "has-description": showDescription } }, heading || (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.g)(user, lang))), showDescription && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "description" }, description)))
        ];
    }
    render() {
        return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.user && this.lang ? this.renderUser() : this.renderSkeleton());
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisUserAvatar.style = arcgisUserAvatarCss;

const arcgisUserPopupCss = ":host{display:flex}.button{display:flex;align-items:center;max-width:100%;cursor:pointer;border-style:none;padding:0px;font-size:0.75rem;color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;transition-property:all;outline-color:transparent;background:transparent;font-family:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.name{overflow:hidden;white-space:nowrap;margin-inline-start:0.5rem;text-overflow:ellipsis}";

const ArcgisUserPopup = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisUserPopupInternalUIAction = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupInternalUIAction", 7);
        this.user = undefined;
        this.username = undefined;
        this.item = undefined;
        this.api = undefined;
        this.scale = "m";
        this.portal = undefined;
        this.baseUrl = undefined;
        this.underline = undefined;
        this.showAvatar = true;
        this.showName = true;
        this.checkOnline = undefined;
        this.itemUserInfo = undefined;
        this.groups = undefined;
        this.total = undefined;
        this.showPopover = undefined;
        this.privateUser = undefined;
    }
    async componentWillLoad() {
        this.init();
    }
    async init() {
        const { el, item, username, portal } = this;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
        this.i18n = locale[0];
        this.lang = locale[1];
        if (item) {
            this.fetchItemUserInfo();
        }
        else if (username) {
            try {
                const userInfo = await (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.f)(username, portal);
                this.itemUserInfo = userInfo;
            }
            catch (_a) {
                this.privateUser = true;
            }
        }
    }
    async setFocus() {
        var _a;
        (_a = this.button) === null || _a === void 0 ? void 0 : _a.focus();
    }
    async fetchItemUserInfo() {
        const { portal, item, lang, checkOnline } = this;
        this.itemUserInfo = await (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.a)(item, portal, lang, checkOnline);
    }
    async fetchItemsAndGroups() {
        const { user, itemUserInfo, item, portal, total, username: propUsername, checkOnline } = this;
        const username = propUsername || (user === null || user === void 0 ? void 0 : user.username) || (item === null || item === void 0 ? void 0 : item.owner);
        if (!(0,_badges_555e1b90_js__WEBPACK_IMPORTED_MODULE_2__.i)(item)) {
            if (!this.groups) {
                this.groups = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.f)(() => (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.d)(username, portal, checkOnline), "userGroups", username);
            }
            if (isNaN(total)) {
                this.total = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.f)(() => (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.e)(user || itemUserInfo, portal, checkOnline), "userItemsTotal", username);
            }
        }
    }
    render() {
        const { user, itemUserInfo, portal, item, baseUrl, button, i18n, scale } = this;
        const userInfo = user || itemUserInfo;
        if (!userInfo || !i18n) {
            return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { scale: "s", showName: true, checkOnline: this.checkOnline });
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "button", ref: (el) => (this.button = el), onClick: async () => {
                if (!this.showPopover) {
                    this.showPopover = true;
                }
                this.fetchItemsAndGroups();
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { user: userInfo, scale: scale === "m" ? "m" : "s", portal: portal, showName: this.showName, showAvatar: this.showAvatar, underline: this.underline, checkOnline: this.checkOnline }))), this.showPopover && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-tunnel", { reference: this.el }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-popup-popover", { onArcgisUserPopupInternalUIAction: (e) => {
                e.stopPropagation();
                this.arcgisUserPopupInternalUIAction.emit(e.detail);
            }, onArcgisUserPopupPopoverClose: () => {
                this.showPopover = false;
                this.popoverNode = null;
            }, onArcgisUserPopupPopoverKeyDown: (e) => {
                if (e.detail.key === "Escape") {
                    // ! Has to be focused after the popover is completely closed
                    const POPOVER_CLOSE_TIME = 200;
                    setTimeout(() => {
                        this.button.focus();
                    }, POPOVER_CLOSE_TIME);
                }
            }, user: user, item: item, portal: portal, baseUrl: baseUrl, itemUserInfo: itemUserInfo, i18n: i18n, groups: this.groups, total: this.total, checkOnline: this.checkOnline, ref: (el) => {
                if (!el) {
                    return;
                }
                el.referenceElement = button;
                // open when first added
                if (!this.popoverNode) {
                    this.popoverNode = el;
                    el.open();
                }
            } })))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
    static get watchers() { return {
        "item": ["fetchItemUserInfo"]
    }; }
};
ArcgisUserPopup.style = arcgisUserPopupCss;

function addHyperlinks(text) {
    const urlRegex = /(https?:\/\/[^\s]+)/g;
    return text === null || text === void 0 ? void 0 : text.replace(urlRegex, (url) => `<a href="${url}" target="_blank">${url}</a>`);
}
function escapeNewlines(text) {
    return text === null || text === void 0 ? void 0 : text.replace(/(?:\r)/g, "&#10;").replace(/(?:\n)/g, "&#13;");
}
function restoreNewlines(text) {
    return text === null || text === void 0 ? void 0 : text.replace(/(?:&#10;)/g, "\r").replace(/(?:&#13;)/g, "\n");
}
function insertHtmlLineBreaks(text) {
    return text === null || text === void 0 ? void 0 : text.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g, "<br>");
}
function getHtmlFromText(text) {
    return insertHtmlLineBreaks(escapeNewlines(addHyperlinks(restoreNewlines(text))));
}

function getUserLink({ baseUrl, portal, user, type }) {
    var _a, _b;
    const base = (0,_url_35875a10_js__WEBPACK_IMPORTED_MODULE_11__.r)(baseUrl);
    const { username, orgId } = user;
    const name = encodeURIComponent(username);
    const isSelf = ((_a = portal.user) === null || _a === void 0 ? void 0 : _a.username) === user.username;
    const canView = (type === "groups" && (0,_privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_10__.t)(portal.user)) || (type === "content" && (0,_privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_10__.u)(portal.user));
    if ((canView || (0,_privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_9__.b)(portal.user) || isSelf) && orgId === ((_b = portal.user) === null || _b === void 0 ? void 0 : _b.orgId)) {
        return `${base}/${type}.html${!isSelf ? `?user=${name}` : ""}`;
    }
    else {
        return `${base}/search.html?q=owner:%22${name}%22&restrict=false#${type}`;
    }
}

const arcgisUserPopupPopoverCss = ".wrapper{background-color:var(--calcite-color-foreground-1);width:20rem}.header{padding-left:1rem;padding-right:1rem;padding-top:1.25rem;padding-bottom:1.25rem}.user-avatar{max-width:100%}.content{padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:1.25rem}.content__description{margin:0px;overflow:auto;padding:0px;padding-bottom:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-2);max-height:15.5rem}.content__description--expanded:after{content:\"\";display:block;height:1rem}.content__fade{position:relative;z-index:10;margin-bottom:0.25rem;display:block;height:1rem;width:100%;background:linear-gradient(to bottom, transparent, var(--calcite-color-foreground-1) 74%);margin-top:-1rem}.content__link{font-size:0.875rem}.buttons{display:grid;grid-auto-flow:column;padding-top:1rem;grid-gap:0.5rem}.button{min-width:0px}.loader{--calcite-loader-padding:0}";

const ArcgisUserPopupPopover = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisUserPopupPopoverClose = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupPopoverClose", 7);
        this.arcgisUserPopupPopoverKeyDown = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupPopoverKeyDown", 7);
        this.arcgisUserPopupInternalUIAction = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPopupInternalUIAction", 7);
        this.numberFormatOptions = {
            api: _config_75adf962_js__WEBPACK_IMPORTED_MODULE_7__.c.api,
            places: 0,
            type: "decimal"
        };
        this.user = undefined;
        this.item = undefined;
        this.portal = undefined;
        this.baseUrl = undefined;
        this.referenceElement = undefined;
        this.itemUserInfo = undefined;
        this.groups = undefined;
        this.total = undefined;
        this.i18n = undefined;
        this.checkOnline = undefined;
        this.groupsText = "";
        this.itemsText = "";
        this.expanded = undefined;
    }
    async close() {
        this.togglePopover(false);
    }
    async open() {
        this.togglePopover(true);
    }
    async updateGroupsText(groups) {
        const number = await (0,_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_8__.f)(groups.total, this.numberFormatOptions);
        this.groupsText = this.i18n.groups.replace("${number}", number);
    }
    async updateItemsText(total) {
        const number = await (0,_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_8__.f)(total, this.numberFormatOptions);
        this.itemsText = this.i18n.items.replace("${number}", number);
    }
    componentWillLoad() {
        // when the component is reopened, set groups/total text again as the watcher doesn't fire
        if (this.groups) {
            this.updateGroupsText(this.groups);
        }
        if (!isNaN(this.total)) {
            this.updateItemsText(this.total);
        }
    }
    async togglePopover(open) {
        if (this.popoverNode) {
            this.popoverNode.open = open;
            await (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.t)(150);
            return;
        }
    }
    openLink(e) {
        var _a;
        // not totally sure why, but if you just link to the page, you'll be signed out
        // if we use window.open, it retains your current signed in status
        e.preventDefault();
        const href = (_a = e.target) === null || _a === void 0 ? void 0 : _a.href;
        window.open(href, "_blank");
    }
    renderOrgButtons() {
        const { i18n, baseUrl, itemUserInfo } = this;
        const url = (0,_url_35875a10_js__WEBPACK_IMPORTED_MODULE_11__.r)((itemUserInfo === null || itemUserInfo === void 0 ? void 0 : itemUserInfo.url) || baseUrl);
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "outline-fill", kind: "neutral", href: url, target: "_blank", onClick: (e) => this.openLink(e) }, i18n.homepage), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "outline-fill", kind: "neutral", href: `${url}/gallery.html`, target: "_blank", onClick: (e) => this.openLink(e) }, i18n.gallery)));
    }
    renderUserButtons(userInfo) {
        const { i18n, baseUrl, portal, total, groups } = this;
        const loading = !this.groupsText || !this.itemsText;
        const { username } = userInfo;
        if (loading) {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { label: i18n.loadingUserInformation, scale: "s", class: "loader" }));
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, !!(groups === null || groups === void 0 ? void 0 : groups.total) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${getUserLink({ baseUrl, portal, user: userInfo, type: "groups" })}`, target: "_blank", onClick: (e) => {
                this.openLink(e);
                this.arcgisUserPopupInternalUIAction.emit({
                    category: "profile popup",
                    action: "view all groups"
                });
            } }, this.groupsText)), !!total && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${getUserLink({
                baseUrl,
                portal,
                user: userInfo,
                type: "content"
            })}`, target: "_blank", onClick: (e) => {
                this.openLink(e);
                this.arcgisUserPopupInternalUIAction.emit({
                    category: "profile popup",
                    action: "view all content"
                });
            } }, this.itemsText)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { class: "button", appearance: "outline-fill", kind: "neutral", href: `${(0,_url_35875a10_js__WEBPACK_IMPORTED_MODULE_11__.r)(baseUrl)}/user.html?user=${encodeURIComponent(username)}`, target: "_blank", onClick: (e) => {
                this.openLink(e);
                this.arcgisUserPopupInternalUIAction.emit({
                    category: "profile popup",
                    action: "view profile"
                });
            } }, i18n.profile)));
    }
    render() {
        const { i18n, user, item, itemUserInfo, lang, portal, expanded, referenceElement } = this;
        const userInfo = user || itemUserInfo;
        const isAuthoritative = (0,_badges_555e1b90_js__WEBPACK_IMPORTED_MODULE_2__.i)(item);
        const { username, description } = userInfo;
        const name = (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_6__.g)(userInfo, lang);
        const decodedDescription = getHtmlFromText(description) || "";
        //each line break is approximately 40 chars long
        const tempDescription = decodedDescription.replace(/<br>/g, " ".repeat(40));
        const shortenDescription = !expanded && tempDescription.length >= 240;
        const shortDescription = shortenDescription
            ? // Trim at 240 chars, then add back the line breaks assuming 5-40 consecutive spaces is a line break
                `${tempDescription
                    .substring(0, 240)
                    .trim()
                    .replace(/\s{5,40}/g, "<br>")}...`
            : decodedDescription;
        const managedBy = isAuthoritative
            ? this.i18n.itemManagedBy.replace("${username}", username)
            : username;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { class: "popover", label: name, pointerDisabled: true, referenceElement: referenceElement, placement: "bottom-start", id: `${username}-popover`, ref: (el) => (this.popoverNode = el), autoClose: true, onCalcitePopoverOpen: (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.d)(() => {
                this.arcgisUserPopupInternalUIAction.emit({
                    category: "profile popup",
                    action: "open profile popup"
                });
            }, 100), onCalcitePopoverClose: () => this.arcgisUserPopupPopoverClose.emit(), onKeyDown: (e) => this.arcgisUserPopupPopoverKeyDown.emit(e) }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "header" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { class: "user-avatar", user: userInfo, scale: "l", portal: portal, showName: true, description: managedBy, checkOnline: this.checkOnline })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content" }, shortDescription && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: { content__description: true, "content__description--expanded": expanded }, innerHTML: shortDescription })), expanded && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content__fade" }), shortenDescription && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { class: "content__link", onClick: () => (this.expanded = true) }, i18n.expand)), expanded && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { class: "content__link", onClick: () => (this.expanded = false) }, i18n.showLess)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "buttons" }, isAuthoritative ? this.renderOrgButtons() : this.renderUserButtons(userInfo)))))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
    static get watchers() { return {
        "groups": ["updateGroupsText"],
        "total": ["updateItemsText"]
    }; }
};
ArcgisUserPopupPopover.style = arcgisUserPopupPopoverCss;



//# sourceMappingURL=arcgis-item-badge_10.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-555e1b90.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/badges-555e1b90.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getBadges),
/* harmony export */   b: () => (/* binding */ getTooltip),
/* harmony export */   g: () => (/* binding */ getContentStatus),
/* harmony export */   i: () => (/* binding */ isPublicAuthoritative)
/* harmony export */ });
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./privileges-5c382f61.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-5c382f61.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user-0fa9ff5a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-0fa9ff5a.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */





const retiredUrlParts = [
    "3DInsetMap",
    "3DScene",
    "3DViz",
    "AttachmentViewer",
    "CapacityAnalysis",
    "Compare/storytelling_compare",
    "Compare/storytelling_tabbed",
    "Compare/storytelling_sidepanel",
    "Compare/Multiviewer",
    "Compare/Search",
    "Compare/Configure",
    "Compare/SideBySideViewer_Configure",
    "Compare3d",
    "CompareAnalysis",
    "CompareMaps",
    "Directions",
    "Edit",
    "Editor",
    "Elevations",
    "ElevationsProfile",
    "Embed",
    "Filter",
    "FilterGallery",
    "GeoList",
    "GeoTour",
    "HeaderFooter",
    "Identify",
    "ImageInterpretation",
    "ImageryViewer",
    "ImpactSummary",
    "InformationLookup",
    "InteractiveFilter",
    "InteractiveLegend",
    "LayerShowcase",
    "Legend",
    "LiveMaps",
    "LocalPerspective",
    "MapAndAppGallery",
    "MapCarousel",
    "MapTools",
    "Media",
    "MinimalGallery",
    "Minimalist",
    "Nearby",
    "OnePane",
    "Panels",
    "PanelsLegend",
    "Profile",
    "PublicGallery",
    "PublicInformation",
    "ServiceLookup",
    "SimpleMapViewer",
    "SimpleViewer",
    "SocialMedia",
    "Solutions/s2.html?app=apps2/FindEditFilter",
    "Solutions/s2.html?app=apps2/Finder",
    "StorytellingTextLegend",
    "StoryMapBasic",
    "Styler",
    "SummaryViewer",
    "Time",
    "TimeAware",
    "TwoPane",
    "Viewer",
    "ZoneLookup"
];

function isRetiredItemType(type) {
    return _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_2__.r.includes(type);
}
function isRetiredStoryMap(item) {
    var _a, _b;
    return ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) && item.type === "Web Mapping Application" && ((_b = item.typeKeywords) === null || _b === void 0 ? void 0 : _b.includes("Story Map"));
}
function isCityEngineWebScene(item) {
    return item.type === "CityEngine Web Scene";
}
function isRetiredApp(item) {
    var _a;
    const isRetiredUrl = retiredUrlParts.some((urlPart) => {
        var _a;
        const containsHtml = urlPart.includes(".html");
        const fullRetiredPath = `/apps/${urlPart}${!containsHtml ? "/" : ""}`;
        return (_a = item.url) === null || _a === void 0 ? void 0 : _a.includes(fullRetiredPath);
    });
    return ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) && item.type === "Web Mapping Application" && item.url && isRetiredUrl;
}
function getContentStatus(item) {
    var _a;
    return (item === null || item === void 0 ? void 0 : item.contentStatus) || ((_a = item === null || item === void 0 ? void 0 : item.sourceJSON) === null || _a === void 0 ? void 0 : _a.contentStatus);
}
function isOrgAuthoritative(item) {
    return getContentStatus(item) === "org_authoritative";
}
function isPublicAuthoritative(item) {
    return getContentStatus(item) === "public_authoritative";
}
function getBadges(item, portal, user) {
    var _a, _b, _c, _d, _e, _f, _g;
    const badges = [];
    const groupDesignations = (_b = (item.groupDesignations || ((_a = item.sourceJSON) === null || _a === void 0 ? void 0 : _a.groupDesignations))) === null || _b === void 0 ? void 0 : _b.split(", ");
    if (isOrgAuthoritative(item) || isPublicAuthoritative(item)) {
        badges.push("Authoritative");
    }
    if (getContentStatus(item) === "deprecated") {
        badges.push("Deprecated");
    }
    if (item.type === "Solution" && ((_c = item.typeKeywords) === null || _c === void 0 ? void 0 : _c.includes("ArcGIS Solution"))) {
        badges.push("Solution");
    }
    if (((_d = item.typeKeywords) === null || _d === void 0 ? void 0 : _d.includes("Public Data Collection")) && user) {
        badges.push("Public Data Collection");
    }
    if (isRetiredItemType(item.type) || isRetiredStoryMap(item) || isRetiredApp(item)) {
        badges.push("Retired");
    }
    if (groupDesignations === null || groupDesignations === void 0 ? void 0 : groupDesignations.includes("livingatlas")) {
        badges.push("Living Atlas");
    }
    if (groupDesignations && groupDesignations.includes("opendata")) {
        badges.push("Open Data");
    }
    if ((0,_item_3535552d_js__WEBPACK_IMPORTED_MODULE_0__.b)(item)) {
        badges.push("Premium");
    }
    if ((0,_item_3535552d_js__WEBPACK_IMPORTED_MODULE_0__.a)(item)) {
        badges.push("Subscriber");
    }
    if (item.origin || ((_e = item.sourceJSON) === null || _e === void 0 ? void 0 : _e.origin)) {
        badges.push("Collaboration");
    }
    if ((item.listed || ((_f = item.sourceJSON) === null || _f === void 0 ? void 0 : _f.listed)) && !(portal === null || portal === void 0 ? void 0 : portal.isPortal)) {
        badges.push("Marketplace");
    }
    if (((_g = item.typeKeywords) === null || _g === void 0 ? void 0 : _g.includes("Registered App")) &&
        item.type !== "API Key" &&
        (!(portal === null || portal === void 0 ? void 0 : portal.isPortal) || item.owner !== "esri_apps")) {
        badges.push("Registered");
    }
    return badges;
}
async function getTooltip(badgeType, item, user, i18n, locale) {
    var _a, _b;
    const publicUser = !user || (0,_privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_1__.a)(user);
    switch (badgeType) {
        case "Authoritative":
            if (getContentStatus(item) === "public_authoritative") {
                const verified = await (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_3__.b)(item, locale);
                const name = ((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) ? (_b = item.portal) === null || _b === void 0 ? void 0 : _b.name : verified === null || verified === void 0 ? void 0 : verified.name;
                return i18n.Authoritative.tooltip.public.replace("${name}", name);
            }
            else {
                return i18n.Authoritative.tooltip.org;
            }
        case "Retired":
            const retired = i18n.Retired.tooltip;
            if (isRetiredStoryMap(item)) {
                return retired.storyMap;
            }
            else if (isCityEngineWebScene(item)) {
                return retired.cityEngine;
            }
            else if (isRetiredApp(item)) {
                return retired.app;
            }
            else {
                return retired.general;
            }
        case "Subscriber":
            return publicUser ? i18n.Subscriber.tooltip.public : i18n.Subscriber.tooltip.org;
        case "Premium":
            return publicUser ? i18n.Premium.tooltip.public : i18n.Premium.tooltip.org;
        case "Registered":
            return i18n.Registered.tooltip;
        default:
            return i18n[badgeType].tooltip;
    }
}



//# sourceMappingURL=badges-555e1b90.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js":
/*!**********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isSubscriber),
/* harmony export */   b: () => (/* binding */ isPremium),
/* harmony export */   c: () => (/* binding */ canUpdateItem),
/* harmony export */   d: () => (/* binding */ itemsBelongToUserOrg),
/* harmony export */   g: () => (/* binding */ getItemHomeAppUrl),
/* harmony export */   i: () => (/* binding */ isOwner),
/* harmony export */   u: () => (/* binding */ userIsItemAdmin)
/* harmony export */ });
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


function isEsri(item) {
    var _a;
    return !!((_a = item.owner) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes("esri"));
}
function isPremium(item) {
    var _a;
    return isEsri(item) && !!((_a = item.typeKeywords) === null || _a === void 0 ? void 0 : _a.includes("Requires Credits"));
}
function isSubscriber(item) {
    var _a;
    return isEsri(item) && !!((_a = item.typeKeywords) === null || _a === void 0 ? void 0 : _a.includes("Requires Subscription"));
}
function isOwner(item, user) {
    return item.owner === user.username;
}
/**
 * Can the user update the item
 */
function canUpdateItem(item, user) {
    return userIsItemAdmin(item, user) || item.itemControl === "update";
}
/**
 * Is the user either an owner or admin of the item
 */
function userIsItemAdmin(item, user) {
    return isOwner(item, user) || isItemAdmin(item, user);
}
/**
 * Does the user have admin capabilities on this item
 */
function isItemAdmin(item, user) {
    var _a;
    // if this flag is already set (probably home app), use it
    if (item.isAdmin != null) {
        return !!item.isAdmin;
    }
    const itemOwner = item.owner;
    const itemControlAdmin = item.itemControl === "admin";
    const esriUsers = ["esri_livingatlas", "esri_demographics", "esri_boundaries"];
    if (((_a = item.portal) === null || _a === void 0 ? void 0 : _a.isPortal) &&
        !isOwner(item, user) &&
        itemControlAdmin &&
        itemOwner.includes("esri_") &&
        // portal incorrectly returns "itemControl="admin" for esri owned items
        !esriUsers.includes(itemOwner)) {
        return false;
    }
    return itemControlAdmin;
}
const itemsBelongToUserOrg = (items, user) => {
    return !!user.orgId && items.every((item) => item.isOrgItem);
};
const getItemHomeAppUrl = (itemId, baseUrl) => `${(0,_url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_0__.a)(baseUrl)}item.html?id=${itemId}`;



//# sourceMappingURL=item-3535552d.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ HIDDEN_ITEMS_QUERY)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const HIDDEN_ITEMS_QUERY = `-type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage" -type:"Indoors Map Configuration" -typekeywords:"SMX"`;



//# sourceMappingURL=query-d62660d4.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getSublayerTypeInfo)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
/** Get the correct geometry icon based on layer/table type and geometry type
 * will handles types used by the jsapi, the esri types used on the server,
 * and the types returned by the Search API
 */
function getSublayerTypeInfo({ geometry, type }) {
    switch (type) {
        case "Catalog Layer":
            return {
                icon: "catalog-dataset",
                type: "catalog",
                isGeometry: false
            };
        case "Parcel Layer":
            return {
                icon: "parcel-layer",
                type: "parcel",
                isGeometry: false
            };
        case "Oriented Imagery Layer":
            return {
                icon: "oriented-imagery-layer",
                type: "oriented imagery",
                isGeometry: false
            };
        case "Table":
            return {
                icon: "table",
                type: "table",
                isGeometry: true
            };
    }
    switch (geometry) {
        case "point":
        case "esriGeometryPoint":
            return {
                type: "point",
                icon: "point",
                isGeometry: true
            };
        case "esriGeometryMultipoint":
        case "multipoint":
            return {
                type: "multipoint",
                icon: "layer-points",
                isGeometry: true
            };
        case "line":
        case "polyline":
        case "esriGeometryPolyline":
            return {
                type: "line",
                icon: "line",
                isGeometry: true
            };
        case "polygon":
        case "esriGeometryPolygon":
            return {
                type: "polygon",
                icon: "polygon",
                isGeometry: true
            };
        case "multipatch":
        case "esriGeometryMultiPatch":
            return {
                type: "multipatch",
                icon: "cube",
                isGeometry: true
            };
        default:
            return {
                type: "table",
                icon: "table",
                isGeometry: true
            };
    }
}



//# sourceMappingURL=utils-aa26c49f.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTIwZTBkYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNEg7QUFDcEI7QUFDTDtBQUM1QjtBQUNrQztBQUMxQztBQUN5RztBQUNoSDtBQUNPO0FBQ0o7QUFDMkI7QUFDekI7QUFDbEM7QUFDQztBQUNEO0FBQ087QUFDQztBQUNOO0FBQ0E7QUFDRTtBQUNKOztBQUUzQjtBQUNBLFlBQVkscURBQUMsVUFBVSw0Q0FBNEM7QUFDbkUsUUFBUSxxREFBQyxXQUFXLHNOQUFzTjtBQUMxTyxRQUFRLHFEQUFDLFdBQVcsMFpBQTBaO0FBQzlhOztBQUVBO0FBQ0EsWUFBWSxxREFBQyxVQUFVLG9HQUFvRztBQUMzSCxRQUFRLHFEQUFDLFdBQVcsb3JDQUFvckM7QUFDeHNDOztBQUVBO0FBQ0EsWUFBWSxxREFBQyxVQUFVLG9HQUFvRztBQUMzSCxRQUFRLHFEQUFDLFdBQVcsK3RHQUErdEc7QUFDbnZHLFFBQVEscURBQUMsV0FBVyw2aURBQTZpRDtBQUNqa0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsa0JBQWtCLGtCQUFrQjtBQUNwQyxlQUFlLHFCQUFxQjtBQUNwQyxxQkFBcUIsbUNBQW1DO0FBQ3hELGtCQUFrQixhQUFhO0FBQy9CLHNCQUFzQixrQkFBa0I7QUFDeEMsbUJBQW1CLGtCQUFrQjtBQUNyQyxnQkFBZ0I7QUFDaEI7O0FBRUEsbUNBQW1DLHNFQUFzRSxnRUFBZ0UsaUVBQWlFLHFCQUFxQixpQkFBaUIsZUFBZSx5RUFBeUUsbUVBQW1FLG9FQUFvRSxZQUFZLHdF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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsbURBQXlCLFVBQVUsZUFBZSxPQUFPOztBQUU2Qzs7QUFFeEo7Ozs7Ozs7Ozs7Ozs7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW1DOztBQUVuQzs7Ozs7Ozs7Ozs7Ozs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdCQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVvQzs7QUFFcEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtaXRlbS1iYWRnZV8xMC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9iYWRnZXMtNTU1ZTFiOTAuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vaXRlbS0zNTM1NTUyZC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9xdWVyeS1kNjI2NjBkNC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS91dGlscy1hYTI2YzQ5Zi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGgsIHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQsIGMgYXMgY3JlYXRlRXZlbnQsIEYgYXMgRnJhZ21lbnQgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncywgYSBhcyBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UgfSBmcm9tICcuL2xvY2FsZS0wNTBiNmRiOS5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldFRvb2x0aXAsIGEgYXMgZ2V0QmFkZ2VzLCBpIGFzIGlzUHVibGljQXV0aG9yaXRhdGl2ZSB9IGZyb20gJy4vYmFkZ2VzLTU1NWUxYjkwLmpzJztcbmltcG9ydCB7IHQgYXMgdGltZW91dCwgZCBhcyBkZWJvdW5jZSB9IGZyb20gJy4vZnVuY3Rpb25hbC00NGRlOGZjZi5qcyc7XG5pbXBvcnQgeyByIGFzIHJlcXVlc3QsIGcgYXMgZ2V0UmVzdEJhc2VVcmwsIG4gYXMgZ2V0VXNlcklkLCBmIGFzIGZyb21DYWNoZSB9IGZyb20gJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0U3VibGF5ZXJUeXBlSW5mbyB9IGZyb20gJy4vdXRpbHMtYWEyNmM0OWYuanMnO1xuaW1wb3J0IHsgZiBhcyBmZXRjaFVzZXIsIGMgYXMgZ2V0VXNlclRodW1ibmFpbFVSSSwgZyBhcyBnZXRGdWxsTmFtZSwgYSBhcyBmZXRjaEl0ZW1Vc2VySW5mbywgZCBhcyBmZXRjaFVzZXJHcm91cHMsIGUgYXMgZmV0Y2hVc2VySXRlbXNUb3RhbCB9IGZyb20gJy4vdXNlci0wZmE5ZmY1YS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctNzVhZGY5NjIuanMnO1xuaW1wb3J0IHsgZiBhcyBmb3JtYXROdW1iZXIgfSBmcm9tICcuL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyc7XG5pbXBvcnQgeyBiIGFzIGlzT3JnQWRtaW4gfSBmcm9tICcuL3ByaXZpbGVnZXMtNWMzODJmNjEuanMnO1xuaW1wb3J0IHsgdCBhcyBjYW5WaWV3T3JnR3JvdXBzLCB1IGFzIGNhbk1hbmFnZUl0ZW1zIH0gZnJvbSAnLi9wcml2aWxlZ2VzLTc0NjM5ZGFlLmpzJztcbmltcG9ydCB7IHIgYXMgcmVtb3ZlVHJhaWxpbmdTbGFzaCB9IGZyb20gJy4vdXJsLTM1ODc1YTEwLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tMzUzNTU1MmQuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy0yMDI5YjA2Yi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LWQ2MjY2MGQ0LmpzJztcbmltcG9ydCAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS0wMzUzYTc2OS5qcyc7XG5pbXBvcnQgJy4vYWdzLWViNDU4YTAzLmpzJztcblxuZnVuY3Rpb24gZ2V0SWNvbiQyKCkge1xuICAgIHJldHVybiAoaChcInN2Z1wiLCB7IHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSxcbiAgICAgICAgaChcInBhdGhcIiwgeyBkOiBcIk0yLjcgOWMtLjQtMS4zLS4yLTIuOC40LTRzMS43LTIuMiAzLTIuNmMuNC40LjguOSAxLjEgMS4yaC4ybC4xLS4xdi0uMUM3LjIgMi40IDYuOC4yIDYuMyAwYy0uMSAwLS4yLS4xLS40LS4xLS4xLjEtLjIuMS0uNC4yLS4xIDAtLjIuMS0uMy4yIDAgLjItLjEuMy0uMS40IDAgLjIuMS41LjQuOC0xLjQuNi0yLjYgMS43LTMuMyAzLS43IDEuNC0uOSAzLS41IDQuNWgxelwiIH0pLFxuICAgICAgICBoKFwicGF0aFwiLCB7IGQ6IFwiTTE0IDVjLS41LTEuMi0xLjMtMi4yLTIuNC0yLjlTOS4zIDEgOCAxaC0uMWMuMS4zLjIuNi4zIDEgMS4yIDAgMi40LjUgMy4zIDEuMi45LjggMS41IDEuOCAxLjggMy0zLjQgNC0xMC4xIDQtMTIuMiAzLjlIMXYuMmwxLjIuM2MuNSAxIDEuMyAxLjggMi4yIDIuNC45LjYgMiAuOSAzIDF2MWgtMnYxaDV2LTFoLTJ2LTFjLjktLjEgMS43LS4zIDIuNS0uNy44LS40IDEuNS0xIDItMS42LjYtLjcgMS0xLjUgMS4yLTIuMy4yLS44LjMtMS43LjItMi42LjctLjguOC0xLjUtLjMtMS44em0tNiA4Yy0uOSAwLTEuNy0uMi0yLjUtLjYtLjgtLjQtMS40LS45LTEuOS0xLjYgMS44LjIgMy42IDAgNS4zLS41IDEuNy0uNSAzLjMtMS40IDQuNi0yLjUtLjEgMS40LS43IDIuOC0xLjcgMy43LTEgLjktMi40IDEuNS0zLjggMS41elwiIH0pKSk7XG59XG5cbmZ1bmN0aW9uIGdldEljb24kMSgpIHtcbiAgICByZXR1cm4gKGgoXCJzdmdcIiwgeyB3aWR0aDogXCIxMlwiLCBoZWlnaHQ6IFwiMTVcIiwgdmlld0JveDogXCIwIDAgMTIgMTVcIiwgZmlsbDogXCJub25lXCIsIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgfSxcbiAgICAgICAgaChcInBhdGhcIiwgeyBkOiBcIk02IDBDMi41OCAwIDAgMS4yOSAwIDNDMCA0LjcxIDIuNTggNiA2IDZDNy43NjAwMSA2LjA4ODQzIDkuNTA0OSA1LjYzNTggMTEgNC43MDNWMTAuMDM3QzExIDEwLjE2OTYgMTEuMDUyNyAxMC4yOTY4IDExLjE0NjQgMTAuMzkwNkMxMS4yNDAyIDEwLjQ4NDMgMTEuMzY3NCAxMC41MzcgMTEuNSAxMC41MzdDMTEuNjMyNiAxMC41MzcgMTEuNzU5OCAxMC40ODQzIDExLjg1MzYgMTAuMzkwNkMxMS45NDczIDEwLjI5NjggMTIgMTAuMTY5NiAxMiAxMC4wMzdWM0MxMiAxLjI5IDkuNDIgMCA2IDBaTTYgNUMzLjEzOCA1IDEgMy45NDQgMSAzQzEgMi4wNTYgMy4xMzggMSA2IDFDOC44NjIgMSAxMSAyLjA1NiAxMSAzQzExIDMuOTQ0IDguODYyIDUgNiA1Wk0xMS41IDExLjVDMTEuMzY3NCAxMS41IDExLjI0MDIgMTEuNTUyNyAxMS4xNDY0IDExLjY0NjRDMTEuMDUyNyAxMS43NDAyIDExIDExLjg2NzQgMTEgMTJWMTIuMDY0QzExIDEyLjk2IDguODE2IDE0IDYgMTRDMy4xODQgMTQgMSAxMi45NiAxIDEyLjA2NFY3Ljg1QzIuNTc2NyA4LjUzMzE0IDQuMjgyMDIgOC44Njg3NSA2IDguODM0QzYuMTMyNjEgOC44MzQgNi4yNTk3OSA4Ljc4MTMyIDYuMzUzNTUgOC42ODc1NUM2LjQ0NzMyIDguNTkzNzkgNi41IDguNDY2NjEgNi41IDguMzM0QzYuNSA4LjIwMTM5IDYuNDQ3MzIgOC4wNzQyMSA2LjM1MzU1IDcuOTgwNDVDNi4yNTk3OSA3Ljg4NjY4IDYuMTMyNjEgNy44MzQgNiA3LjgzNEM0LjE5NDQgNy44OTgyMSAyLjQwNDQxIDcuNDc5MSAwLjgxNSA2LjYyQzAuNzQ5MTUyIDYuNTYyMjIgMC42Njg4NTYgNi41MjM0IDAuNTgyNjc1IDYuNTA3NjdDMC40OTY0OTQgNi40OTE5NCAwLjQwNzY2IDYuNDk5OSAwLjMyNTY0NiA2LjUzMDY5QzAuMjQzNjMyIDYuNTYxNDggMC4xNzE1MTQgNi42MTM5NiAwLjExNjk4MiA2LjY4MjUyQzAuMDYyNDQ5NSA2Ljc1MTA4IDAuMDI3NTQ4MyA2LjgzMzE2IDAuMDE2IDYuOTJDMC4wMTQgNi45MzMgMC4wMTAwMDAxIDYuOTQ1IDAuMDA5MDAwMDYgNi45NTdDMC4wMDcwMDAwNiA2Ljk3MiAwIDYuOTg1IDAgN1YxMi4wNjRDMCAxMy45MDIgMy4wNSAxNSA2IDE1QzguOTUgMTUgMTIgMTMuOTAyIDEyIDEyLjA2NFYxMkMxMiAxMS44Njc0IDExLjk0NzMgMTEuNzQwMiAxMS44NTM2IDExLjY0NjRDMTEuNzU5OCAxMS41NTI3IDExLjYzMjYgMTEuNSAxMS41IDExLjVaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSkpKTtcbn1cblxuZnVuY3Rpb24gZ2V0SWNvbigpIHtcbiAgICByZXR1cm4gKGgoXCJzdmdcIiwgeyB3aWR0aDogXCIxNVwiLCBoZWlnaHQ6IFwiMTRcIiwgdmlld0JveDogXCIwIDAgMTUgMTRcIiwgZmlsbDogXCJub25lXCIsIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgfSxcbiAgICAgICAgaChcInBhdGhcIiwgeyBkOiBcIk0xNC45ODE1IDIuODM2MDJDMTQuOTgxNCAyLjYyNTk3IDE0Ljg5NzkgMi40MjQ1NCAxNC43NDk0IDIuMjc1OTZDMTQuNjAwOSAyLjEyNzM4IDE0LjM5OTYgMi4wNDM3OSAxNC4xODk1IDIuMDQzNTJIMTEuNTUyNUMxMS41NDAyIDIuMDQzNTkgMTEuNTI4IDIuMDQxMjIgMTEuNTE2NiAyLjAzNjU1QzExLjUwNTIgMi4wMzE4OCAxMS40OTQ4IDIuMDI1IDExLjQ4NjEgMi4wMTYzMkMxMS40NzczIDIuMDA3NjMgMTEuNDcwNCAxLjk5NzMgMTEuNDY1NyAxLjk4NTkyQzExLjQ2MSAxLjk3NDU0IDExLjQ1ODUgMS45NjIzNCAxMS40NTg1IDEuOTUwMDJWMC45ODg1MjRDMTEuNDU3MSAwLjg1NDIxIDExLjQyODcgMC43MjE1NTYgMTEuMzc0OSAwLjU5ODQ3N0MxMS4zMjExIDAuNDc1Mzk5IDExLjI0MyAwLjM2NDQxOSAxMS4xNDU0IDAuMjcyMTYxQzExLjA0NzggMC4xNzk5MDMgMTAuOTMyNiAwLjEwODI1OSAxMC44MDY3IDAuMDYxNTAyNUMxMC42ODA3IDAuMDE0NzQ2NCAxMC41NDY3IC0wLjAwNjE2MjU1IDEwLjQxMjUgMi4zNTIyOGUtMDVINS41NzY1MkM1LjI5OTA1IDAuMDAwMjg4MjgyIDUuMDMzMDIgMC4xMTA2MjkgNC44MzY4MiAwLjMwNjgyOUM0LjY0MDYyIDAuNTAzMDI4IDQuNTMwMjggMC43NjkwNTYgNC41MzAwMiAxLjA0NjUyVjEuOTUwMDJDNC41MzAwMiAxLjk3NDgyIDQuNTIwMTcgMS45OTg2IDQuNTAyNjMgMi4wMTYxNEM0LjQ4NTEgMi4wMzM2NyA0LjQ2MTMyIDIuMDQzNTIgNC40MzY1MiAyLjA0MzUySDEuNzk5MDJDMS41ODg5NiAyLjA0Mzc5IDEuMzg3NTkgMi4xMjczOCAxLjIzOTExIDIuMjc1OTZDMS4wOTA2MiAyLjQyNDU0IDEuMDA3MTUgMi42MjU5NyAxLjAwNzAyIDIuODM2MDJWNC44NDQwMkMxLjAwNzE1IDQuODgxMiAxLjAyMjAxIDQuOTE2ODEgMS4wNDgzNSA0Ljk0MzA1QzEuMDc0NjggNC45NjkyOSAxLjExMDM0IDQuOTg0MDIgMS4xNDc1MiA0Ljk4NDAySDIuNDUwMDJMMi40NTcwMiA0Ljk3NzUyVjMuNTc2NTJDMi40NTcwMiAzLjU1MzA1IDIuNDY2MzQgMy41MzA1NCAyLjQ4Mjk0IDMuNTEzOTRDMi40OTk1NCAzLjQ5NzM1IDIuNTIyMDUgMy40ODgwMiAyLjU0NTUyIDMuNDg4MDJIMTMuMjc1NUMxMy4zMzQ5IDMuNDg4OTMgMTMuMzkxNSAzLjUxMjk0IDEzLjQzMzQgMy41NTQ5NkMxMy40NzU0IDMuNTk2OTcgMTMuNDk5MiAzLjY1MzY4IDEzLjUgMy43MTMwMlYxMC41ODRDMTMuNSAxMC43MDQzIDEzLjQ3NjMgMTAuODIzNCAxMy40MzAzIDEwLjkzNDZDMTMuMzg0MyAxMS4wNDU3IDEzLjMxNjggMTEuMTQ2NyAxMy4yMzE3IDExLjIzMTdDMTMuMTQ2NyAxMS4zMTY4IDEzLjA0NTcgMTEuMzg0MyAxMi45MzQ2IDExLjQzMDNDMTIuODIzNCAxMS40NzYzIDEyLjcwNDMgMTEuNSAxMi41ODQgMTEuNUg4LjEzODAyQzguMDc5NzYgMTEuNTAwMSA4LjAyMjg5IDExLjQ4MjIgNy45NzUxMyAxMS40NDg4QzcuOTI3MzcgMTEuNDE1NSA3Ljg5MTAyIDExLjM2ODIgNy44NzEwMiAxMS4zMTM1QzcuNzI2MjEgMTAuOTEzMiA3LjQ1NjgzIDEwLjU2OTggNy4xMDI0NCAxMC4zMzM5QzYuNzQ4MDUgMTAuMDk3OSA2LjMyNzM0IDkuOTgxODkgNS45MDIxMSAxMC4wMDI4QzUuNDc2ODggMTAuMDIzNiA1LjA2OTU2IDEwLjE4MDMgNC43Mzk5NyAxMC40NDk4QzQuNDEwMzkgMTAuNzE5MyA0LjE3NTkyIDExLjA4NzQgNC4wNzEwMiAxMS41SDIuODI4NTJDMi43MjgxMyAxMS41IDIuNjMxODYgMTEuNDYwMSAyLjU2MDg4IDExLjM4OTJDMi40ODk5IDExLjMxODIgMi40NTAwMiAxMS4yMjE5IDIuNDUwMDIgMTEuMTIxNVY5LjU5NDAyQzIuNDUwMDIgOS41NjkyNyAyLjQ0MDI1IDkuNTQ1NTEgMi40MjI4NCA5LjUyNzkxQzIuNDA1NDMgOS41MTAzMSAyLjM4MTc4IDkuNTAwMjkgMi4zNTcwMiA5LjUwMDAySDEuMDE0MDJMMS4wMDcwMiA5LjUwNzAyVjExLjc5N0MxLjAwNzU1IDEyLjEwOCAxLjEzMTM3IDEyLjQwNjIgMS4zNTEzNCAxMi42MjYxQzEuNTcxMzIgMTIuODQ1OSAxLjg2OTUgMTIuOTY5NiAyLjE4MDUyIDEyLjk3SDQuMjYxMDJDNC40MjU2MiAxMy4yNzA4IDQuNjY1NDUgMTMuNTIzNyA0Ljk1NzA2IDEzLjcwNEM1LjI0ODY3IDEzLjg4NDQgNS41ODIwOCAxMy45ODU5IDUuOTI0NyAxMy45OTg4QzYuMjY3MzIgMTQuMDExNyA2LjYwNzQyIDEzLjkzNTUgNi45MTE3NiAxMy43Nzc2QzcuMjE2MTEgMTMuNjE5NyA3LjQ3NDI3IDEzLjM4NTYgNy42NjEwMiAxMy4wOThDNy42ODY5MiAxMy4wNTg3IDcuNzIyMTggMTMuMDI2NCA3Ljc2MzYzIDEzLjAwNDFDNy44MDUwOCAxMi45ODE3IDcuODUxNDMgMTIuOTcgNy44OTg1MiAxMi45N0gxMy45MzFDMTQuMjA5NiAxMi45Njk5IDE0LjQ3NjcgMTIuODU5MiAxNC42NzM3IDEyLjY2MjJDMTQuODcwNyAxMi40NjUyIDE0Ljk4MTQgMTIuMTk4MSAxNC45ODE1IDExLjkxOTVWMi44MzYwMlpNMTAuNSAxLjgxMjUyQzEwLjUgMS44NjIyNSAxMC40ODAzIDEuOTA5OTQgMTAuNDQ1MSAxLjk0NTExQzEwLjQwOTkgMS45ODAyNyAxMC4zNjIyIDIuMDAwMDIgMTAuMzEyNSAyLjAwMDAySDUuNjg3NTJDNS42Mzc3OSAyLjAwMDAyIDUuNTkwMSAxLjk4MDI3IDUuNTU0OTQgMS45NDUxMUM1LjUxOTc3IDEuOTA5OTQgNS41MDAwMiAxLjg2MjI1IDUuNTAwMDIgMS44MTI1MlYxLjIyNTAyQzUuNTAwOCAxLjE2NTU5IDUuNTI0NzUgMS4xMDg4MSA1LjU2Njc4IDEuMDY2NzhDNS42MDg4MSAxLjAyNDc2IDUuNjY1NTkgMS4wMDA4IDUuNzI1MDIgMS4wMDAwMkgxMC4yNzVDMTAuMzM0NSAxLjAwMDggMTAuMzkxMiAxLjAyNDc2IDEwLjQzMzMgMS4wNjY3OEMxMC40NzUzIDEuMTA4ODEgMTAuNDk5MiAxLjE2NTU5IDEwLjUgMS4yMjUwMlYxLjgxMjUyWk02LjAwMDAyIDEzQzUuODAyMjQgMTMgNS42MDg5IDEyLjk0MTQgNS40NDQ0NSAxMi44MzE1QzUuMjggMTIuNzIxNiA1LjE1MTgzIDEyLjU2NTQgNS4wNzYxNCAxMi4zODI3QzUuMDAwNDUgMTIuMiA0Ljk4MDY1IDExLjk5ODkgNS4wMTkyMyAxMS44MDQ5QzUuMDU3ODIgMTEuNjExIDUuMTUzMDYgMTEuNDMyOCA1LjI5MjkxIDExLjI5MjlDNS40MzI3NyAxMS4xNTMxIDUuNjEwOTUgMTEuMDU3OCA1LjgwNDkzIDExLjAxOTJDNS45OTg5MSAxMC45ODA3IDYuMTk5OTggMTEuMDAwNSA2LjM4MjcgMTEuMDc2MUM2LjU2NTQzIDExLjE1MTggNi43MjE2MSAxMS4yOCA2LjgzMTQ5IDExLjQ0NDVDNi45NDEzNyAxMS42MDg5IDcuMDAwMDIgMTEuODAyMiA3LjAwMDAyIDEyQzcuMDAwMDIgMTIuMjY1MiA2Ljg5NDY2IDEyLjUxOTYgNi43MDcxMyAxMi43MDcxQzYuNTE5NTkgMTIuODk0NyA2LjI2NTI0IDEzIDYuMDAwMDIgMTNaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSksXG4gICAgICAgIGgoXCJwYXRoXCIsIHsgZDogXCJNNi42MzY1IDcuOTk2OThDNi42ODQxOSA3Ljk5NzAzIDYuNzMxMTEgOC4wMDkwNSA2Ljc3Mjk1IDguMDMxOTRDNi44MTQ4IDguMDU0ODMgNi44NTAyMyA4LjA4Nzg1IDYuODc2IDguMTI3OThDNy4wNDc5NiA4LjQwMTU3IDcuMjg4MDUgOC42MjU3OCA3LjU3Mjc0IDguNzc4NjRDNy44NTc0MyA4LjkzMTUxIDguMTc2OTYgOS4wMDc3OCA4LjUgOC45OTk5OEM4Ljg0ODk2IDkuMDA4MjYgOS4xOTMyNyA4LjkxODcxIDkuNDkzOTcgOC43NDE0NUM5Ljc5NDY4IDguNTY0MTkgMTAuMDM5OCA4LjMwNjMxIDEwLjIwMTUgNy45OTY5OEgxMS45MDY1QzExLjkzMTMgNy45OTY4NSAxMS45NTUxIDcuOTg2ODkgMTEuOTcyNiA3Ljk2OTI3QzExLjk5MDIgNy45NTE2NiAxMiA3LjkyNzgzIDEyIDcuOTAyOThWNi42MDg0OEMxMi4wMDAxIDYuNTk2MTIgMTEuOTk3NyA2LjU4Mzg3IDExLjk5MyA2LjU3MjQzQzExLjk4ODMgNi41NjEgMTEuOTgxNCA2LjU1MDYxIDExLjk3MjYgNi41NDE4N0MxMS45NjM5IDYuNTMzMTIgMTEuOTUzNSA2LjUyNjIgMTEuOTQyMSA2LjUyMTVDMTEuOTMwNiA2LjUxNjggMTEuOTE4NCA2LjUxNDQyIDExLjkwNiA2LjUxNDQ4SDEwLjRDMTAuMzEgNi4wNzk4NyAxMC4wNzA4IDUuNjkwNDcgOS43MjM3MyA1LjQxMzgzQzkuMzc2NjcgNS4xMzcxOSA4Ljk0MzczIDQuOTkwNzcgOC41IDQuOTk5OThDOC4wOTU1NiA1LjAxMTQ5IDcuNzAzNzkgNS4xNDM2NSA3LjM3NTAzIDUuMzc5NDhDNy4wNDYyNyA1LjYxNTMyIDYuNzk1NTIgNS45NDQwNiA2LjY1NSA2LjMyMzQ4QzYuNjM1NzUgNi4zNzkzOCA2LjU5OTUzIDYuNDI3ODcgNi41NTEzOSA2LjQ2MjJDNi41MDMyNiA2LjQ5NjUzIDYuNDQ1NjIgNi41MTQ5OCA2LjM4NjUgNi41MTQ5OEgwLjU0NjVDMC41MzQyMDggNi41MTUxMSAwLjUyMjQ1NiA2LjUyMDA1IDAuNTEzNzYzIDYuNTI4NzVDMC41MDUwNzEgNi41Mzc0NCAwLjUwMDEzIDYuNTQ5MTkgMC41IDYuNTYxNDhWNy45NDk5OEMwLjUgNy45NjI0NSAwLjUwNDk1MiA3Ljk3NDQgMC41MTM3NjYgNy45ODMyMkMwLjUyMjU4IDcuOTkyMDMgMC41MzQ1MzUgNy45OTY5OCAwLjU0NyA3Ljk5Njk4SDYuNjM2NVpNOC41IDUuOTQ5OThDOC43MDc2NyA1Ljk0OTk4IDguOTEwNjggNi4wMTE1NiA5LjA4MzM1IDYuMTI2OTRDOS4yNTYwMiA2LjI0MjMxIDkuMzkwNiA2LjQwNjMgOS40NzAwNyA2LjU5ODE2QzkuNTQ5NTUgNi43OTAwMyA5LjU3MDM0IDcuMDAxMTUgOS41Mjk4MiA3LjIwNDgzQzkuNDg5MzEgNy40MDg1MSA5LjM4OTMxIDcuNTk1NiA5LjI0MjQ2IDcuNzQyNDRDOS4wOTU2MiA3Ljg4OTI5IDguOTA4NTIgNy45ODkyOSA4LjcwNDg0IDguMDI5ODFDOC41MDExNiA4LjA3MDMyIDguMjkwMDUgOC4wNDk1MyA4LjA5ODE4IDcuOTcwMDZDNy45MDYzMiA3Ljg5MDU4IDcuNzQyMzMgNy43NTYgNy42MjY5NiA3LjU4MzMzQzcuNTExNTggNy40MTA2NiA3LjQ1IDcuMjA3NjUgNy40NSA2Ljk5OTk4QzcuNDUgNi43MjE1MSA3LjU2MDYyIDYuNDU0NDMgNy43NTc1NCA2LjI1NzUyQzcuOTU0NDUgNi4wNjA2MSA4LjIyMTUyIDUuOTQ5OTggOC41IDUuOTQ5OThaXCIsIGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSkpKTtcbn1cblxuY29uc3QgYmFkZ2VJY29ucyA9IHtcbiAgICBBdXRob3JpdGF0aXZlOiB7XG4gICAgICAgIGljb246IFwiY2hlY2stY2lyY2xlXCJcbiAgICB9LFxuICAgIERlcHJlY2F0ZWQ6IHtcbiAgICAgICAgaWNvbjogXCJjaXJjbGUtZGlzYWxsb3dlZFwiXG4gICAgfSxcbiAgICBNYXJrZXRwbGFjZToge1xuICAgICAgICBpY29uOiBcIm1hcmtldHBsYWNlXCJcbiAgICB9LFxuICAgIFJldGlyZWQ6IHtcbiAgICAgICAgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCJcbiAgICB9LFxuICAgIFwiUHVibGljIERhdGEgQ29sbGVjdGlvblwiOiB7XG4gICAgICAgIGljb246IFwicGVuY2lsXCJcbiAgICB9LFxuICAgIFN1YnNjcmliZXI6IHsgaWNvbjogXCJzZWN1cml0eVwiIH0sXG4gICAgUHJlbWl1bTogeyBpY29uOiBcInNoaWVsZC1jb2luXCIgfSxcbiAgICBDb2xsYWJvcmF0aW9uOiB7IGljb246IFwiY29sbGFib3JhdGlvbi1kaXN0cmlidXRlZFwiIH0sXG4gICAgUmVnaXN0ZXJlZDogeyBpY29uOiBcImtleVwiIH0sXG4gICAgXCJMaXZpbmcgQXRsYXNcIjogeyBpbWFnZTogZ2V0SWNvbiQyIH0sXG4gICAgXCJPcGVuIERhdGFcIjogeyBpbWFnZTogZ2V0SWNvbiQxIH0sXG4gICAgU29sdXRpb246IHsgaW1hZ2U6IGdldEljb24gfVxufTtcblxuY29uc3QgYXJjZ2lzSXRlbUJhZGdlQ3NzID0gXCIuYmFkZ2V7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1pbmZvLWJhY2tncm91bmQpOy0tY2FsY2l0ZS1jb2xvci10ZXh0LTE6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2UtaW5mby1mb3JlZ3JvdW5kKTstLWNhbGNpdGUtdWktaWNvbi1jb2xvcjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1pbmZvLWZvcmVncm91bmQpO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JvcmRlci13aWR0aDowcHh9LmF1dGhvcml0YXRpdmV7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1zdWNjZXNzLWJhY2tncm91bmQpOy0tY2FsY2l0ZS1jb2xvci10ZXh0LTE6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2Utc3VjY2Vzcy1mb3JlZ3JvdW5kKTstLWNhbGNpdGUtdWktaWNvbi1jb2xvcjp2YXIoLS1hcmNnaXMtaXRlbS1iYWRnZS1zdWNjZXNzLWZvcmVncm91bmQpfS5kZXByZWNhdGVkey0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTI6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2UtZGFuZ2VyLWJhY2tncm91bmQpOy0tY2FsY2l0ZS1jb2xvci10ZXh0LTE6dmFyKC0tYXJjZ2lzLWl0ZW0tYmFkZ2UtZGFuZ2VyLWZvcmVncm91bmQpOy0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWFyY2dpcy1pdGVtLWJhZGdlLWRhbmdlci1mb3JlZ3JvdW5kKX0uaW1hZ2V7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtib3JkZXItcmFkaXVzOjB9Lm5hcnJvd3tib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6MnJlbTstLWNhbGNpdGUtY2hpcC1zcGFjaW5nLXVuaXQtbDowfS5uYXJyb3cgLmltYWdle2p1c3RpZnktY29udGVudDpjZW50ZXJ9LndyYXBwZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0uaWNvbnttYXJnaW4tdG9wOjAuMjVyZW07bWFyZ2luLWlubGluZS1zdGFydDowLjM3NXJlbX0uaW1hZ2Ugc3Zne2hlaWdodDoxcmVtO3dpZHRoOjFyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1pY29uLWNvbG9yKX0uaW1hZ2UtbCBzdmd7aGVpZ2h0OjEuNXJlbTt3aWR0aDoxLjVyZW19Lm5hcnJvdy0tc3t3aWR0aDoxLjVyZW19Lm5hcnJvdy0tcyAuaWNvbnttYXJnaW46MC4yNXJlbX0ubmFycm93LS1zIC5pbWFnZXttYXJnaW4taW5saW5lLXN0YXJ0OjBweH0ubmFycm93LS1tIC5pY29ue21hcmdpbjowLjMxMjVyZW0gMC41cmVtfS5uYXJyb3ctLW0gLmltYWdle21hcmdpbi1pbmxpbmUtc3RhcnQ6MHB4fS5uYXJyb3ctLWx7d2lkdGg6Mi43NXJlbX0ubmFycm93LS1sIC5pY29ue21hcmdpbjowLjVyZW0gMC44cmVtfS5uYXJyb3ctLWwgLmltYWdle21hcmdpbi1pbmxpbmUtZW5kOjAuMjVyZW19XCI7XG5cbmNvbnN0IEFyY2dpc0l0ZW1CYWRnZSA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMub3BlblRvb2x0aXAgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBPcGVuID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbG9zZVRvb2x0aXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aW1lb3V0KDIwMCk7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRvb2x0aXAgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWR0aCA9IFwiZnVsbFwiO1xuICAgICAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgICAgIHRoaXMuYmFkZ2VUeXBlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNob3dUb29sdGlwID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50b29sdGlwVGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMudG9vbHRpcE9wZW4gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICBjb25zdCB7IGVsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsb2NhbGUgPSBhd2FpdCBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzKGVsKTtcbiAgICAgICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgICAgICB0aGlzLmxhbmcgPSBsb2NhbGVbMV07XG4gICAgICAgIHRoaXMudXBkYXRlVG9vbHRpcFRleHQoKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlVG9vbHRpcFRleHQoKSB7XG4gICAgICAgIGNvbnN0IHsgYmFkZ2VUeXBlLCBpdGVtLCBpMThuLCBsYW5nLCB1c2VyIH0gPSB0aGlzO1xuICAgICAgICB0aGlzLnRvb2x0aXBUZXh0ID0gYXdhaXQgZ2V0VG9vbHRpcChiYWRnZVR5cGUsIGl0ZW0sIHVzZXIsIGkxOG4sIGxhbmcpO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVySW1hZ2UoaW1hZ2UpIHtcbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChoKFwic3BhblwiLCB7IHNsb3Q6IFwiaW1hZ2VcIiwgY2xhc3M6IHsgaW1hZ2U6IHRydWUsIFtgaW1hZ2UtJHt0aGlzLnNjYWxlfWBdOiB0cnVlIH0gfSwgaW1hZ2UoKSkpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgYmFkZ2VUeXBlLCB3aWR0aCwgbG9hZGluZywgdG9vbHRpcFRleHQsIHNjYWxlLCBzaG93VG9vbHRpcCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaTE4biA9IHRoaXMuaTE4bltiYWRnZVR5cGVdO1xuICAgICAgICBjb25zdCB7IGljb24sIGltYWdlIH0gPSBiYWRnZUljb25zW3RoaXMuYmFkZ2VUeXBlXTtcbiAgICAgICAgY29uc3QgbmFycm93ID0gd2lkdGggPT09IFwibmFycm93XCI7XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAgICAgICBiYWRnZTogdHJ1ZSxcbiAgICAgICAgICAgIGF1dGhvcml0YXRpdmU6IGJhZGdlVHlwZSA9PT0gXCJBdXRob3JpdGF0aXZlXCIsXG4gICAgICAgICAgICBkZXByZWNhdGVkOiBiYWRnZVR5cGUgPT09IFwiRGVwcmVjYXRlZFwiLFxuICAgICAgICAgICAgbmFycm93LFxuICAgICAgICAgICAgW2BuYXJyb3ctLSR7c2NhbGV9YF06IG5hcnJvd1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCBPYmplY3QuYXNzaWduKHsgY2xhc3M6IFwid3JhcHBlclwiIH0sIChzaG93VG9vbHRpcFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiB0aGlzLmNsb3NlVG9vbHRpcCxcbiAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI6IHRoaXMub3BlblRvb2x0aXAsXG4gICAgICAgICAgICAgICAgb25Gb2N1c291dDogdGhpcy5jbG9zZVRvb2x0aXAsXG4gICAgICAgICAgICAgICAgb25Gb2N1c2luOiB0aGlzLm9wZW5Ub29sdGlwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KSksIG5hcnJvdyA/IChoKFwiY2FsY2l0ZS1jaGlwXCIsIE9iamVjdC5hc3NpZ24oeyBjbGFzczogY2xhc3NlcywgdmFsdWU6IGJhZGdlVHlwZSB9LCAoaWNvbiA/IHsgaWNvbiB9IDoge30pLCAoc2hvd1Rvb2x0aXAgPyB7IHRhYkluZGV4OiAwIH0gOiB7fSksIHsgcmVmOiAoZWwpID0+ICh0aGlzLmNoaXAgPSBlbCksIHNjYWxlOiBzY2FsZSB9KSwgaW1hZ2UgJiYgdGhpcy5yZW5kZXJJbWFnZShpbWFnZSkpKSA6IChoKFwiY2FsY2l0ZS1jaGlwXCIsIE9iamVjdC5hc3NpZ24oeyBjbGFzczogY2xhc3NlcywgdmFsdWU6IGJhZGdlVHlwZSB9LCAoaWNvbiA/IHsgaWNvbiB9IDoge30pLCAoc2hvd1Rvb2x0aXAgPyB7IHRhYkluZGV4OiAwIH0gOiB7fSksIHsgcmVmOiAoZWwpID0+ICh0aGlzLmNoaXAgPSBlbCksIHNjYWxlOiBzY2FsZSB9KSwgaW1hZ2UgJiYgdGhpcy5yZW5kZXJJbWFnZShpbWFnZSksIGkxOG4udGl0bGUpKSwgdGhpcy50b29sdGlwT3BlbiAmJiB0aGlzLnNob3dUb29sdGlwICYmIChoKFwiYXJjZ2lzLXR1bm5lbFwiLCB7IHJlZmVyZW5jZTogdGhpcy5lbCB9LCBoKFwiY2FsY2l0ZS10b29sdGlwXCIsIHsgcmVmOiAoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWwucmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuY2hpcDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudG9vbHRpcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2x0aXAgPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sdGlwLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGNsb3NlT25DbGljazogdHJ1ZSwgbGFiZWw6IGkxOG4udGl0bGUsIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIiwgb2Zmc2V0RGlzdGFuY2U6IDYsIG9mZnNldFNraWRkaW5nOiAwLCBzdHlsZTogeyBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIiB9IH0sIG5hcnJvdyAmJiAhbG9hZGluZyAmJiAoaChcImgzXCIsIHsgY2xhc3M6IFwidG9vbHRpcF9fdGl0bGVcIiwgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogXCJ2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSlcIixcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJ2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSlcIixcbiAgICAgICAgICAgICAgICBtYXJnaW46IFwiMCAwIC4yNXJlbSAwXCIsXG4gICAgICAgICAgICAgICAgcGFkZGluZzogXCIwXCJcbiAgICAgICAgICAgIH0gfSwgaTE4bi50aXRsZSkpLCBoKFwicFwiLCB7IGNsYXNzOiBcInRvb2x0aXBfX3RleHRcIiwgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogXCJ2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMilcIixcbiAgICAgICAgICAgICAgICBjb2xvcjogXCJ2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSlcIixcbiAgICAgICAgICAgICAgICBtYXJnaW46IFwiMFwiLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMFwiXG4gICAgICAgICAgICB9IH0sIGgoXCJjYWxjaXRlLWxvYWRlclwiLCB7IGhpZGRlbjogIWxvYWRpbmcsIGxhYmVsOiB0aGlzLmkxOG4ubG9hZGluZywgaW5saW5lOiB0cnVlLCBzY2FsZTogXCJzXCIgfSksIGxvYWRpbmcgPyB0aGlzLmkxOG4ubG9hZGluZyA6IHRvb2x0aXBUZXh0KSkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0l0ZW1CYWRnZS5zdHlsZSA9IGFyY2dpc0l0ZW1CYWRnZUNzcztcblxuY29uc3QgYXJjZ2lzSXRlbUJhZGdlc0NzcyA9IFwiOmhvc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0uYmFkZ2V7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWlubGluZS1lbmQ6MC4yNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzSXRlbUJhZGdlcyA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuaXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWR0aCA9IFwiZnVsbFwiO1xuICAgICAgICB0aGlzLnNob3dUb29sdGlwcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVtcHR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICAgICAgdGhpcy5iYWRnZXMgPSBbXTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmFkZ2VzKHRoaXMuaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlQmFkZ2VzKGl0ZW0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmJhZGdlcyA9IGdldEJhZGdlcyhpdGVtLCB0aGlzLnBvcnRhbCwgdGhpcy51c2VyKTtcbiAgICAgICAgaWYgKCEoKF9hID0gdGhpcy5iYWRnZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpKSB7XG4gICAgICAgICAgICB0aGlzLmVtcHR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbSwgd2lkdGgsIHNjYWxlLCBiYWRnZXMsIHVzZXIsIHNob3dUb29sdGlwcyB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGJhZGdlcy5tYXAoKGJhZGdlKSA9PiAoaChcImFyY2dpcy1pdGVtLWJhZGdlXCIsIHsgY2xhc3M6IFwiYmFkZ2VcIiwgaXRlbTogaXRlbSwgdXNlcjogdXNlciwgYmFkZ2VUeXBlOiBiYWRnZSwgd2lkdGg6IHdpZHRoLCBzY2FsZTogc2NhbGUsIHNob3dUb29sdGlwOiBzaG93VG9vbHRpcHMgfSkpKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gICAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICAgICAgXCJpdGVtXCI6IFtcInVwZGF0ZUJhZGdlc1wiXVxuICAgIH07IH1cbn07XG5BcmNnaXNJdGVtQmFkZ2VzLnN0eWxlID0gYXJjZ2lzSXRlbUJhZGdlc0NzcztcblxubGV0IFFVRVVFID0gW107XG5sZXQgUFJPTUlTRVMgPSBbXTtcbmNvbnN0IGZldGNoRmF2b3JpdGVzID0gZGVib3VuY2UoYXN5bmMgKHBvcnRhbCwgdXNlcikgPT4ge1xuICAgIHZhciBfYTtcbiAgICAvLyBlbXB0eSB0aGUgcXVldWVzIGFuZCBzYXZlIHRoZSBjdXJyZW50IHN0YXRlIGxvY2FsbHkgc28gdGhhdCBmdXJ0aGVyIGNhbGxzIGNhbiBiZSBzdGFnZWQgaW4gdGhlIHF1ZXVlXG4gICAgY29uc3QgaWRzID0gWy4uLlFVRVVFXTtcbiAgICBjb25zdCBwcm9taXNlcyA9IFsuLi5QUk9NSVNFU107XG4gICAgUVVFVUUgPSBbXTtcbiAgICBQUk9NSVNFUyA9IFtdO1xuICAgIGNvbnN0IHEgPSBgKGdyb3VwOiR7Z2V0RmF2R3JvdXBJZCh1c2VyKX0gQU5EIGlkOigke2lkcy5qb2luKFwiIE9SIFwiKX0pKWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGAke2dldFJlc3RCYXNlVXJsKHBvcnRhbCl9c2VhcmNoYCwgeyBudW06IDEwMCwgcSB9KTtcbiAgICBjb25zdCBmYXZvcml0ZXMgPSAoX2EgPSByZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2UucmVzdWx0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcCgoaXRlbSkgPT4gaXRlbS5pZCk7XG4gICAgcHJvbWlzZXMuZm9yRWFjaCgoeyBpZCwgcmVzb2x2ZSB9KSA9PiB7XG4gICAgICAgIHJlc29sdmUoZmF2b3JpdGVzLmluY2x1ZGVzKGlkKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xufSwgMzAwKTtcbmZ1bmN0aW9uIGdldEZhdkdyb3VwSWQodXNlcikge1xuICAgIHZhciBfYSwgX2I7XG4gICAgcmV0dXJuIChfYSA9IHVzZXIuZmF2R3JvdXBJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKF9iID0gdXNlci5zb3VyY2VKU09OKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZmF2R3JvdXBJZDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlzSXRlbUluRmF2b3JpdGVzKGlkLCBwb3J0YWwsIHVzZXIpIHtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgUFJPTUlTRVMucHVzaCh7IGlkLCByZXNvbHZlIH0pO1xuICAgIH0pO1xuICAgIGlmICghUVVFVUUuaW5jbHVkZXMoaWQpKSB7XG4gICAgICAgIFFVRVVFLnB1c2goaWQpO1xuICAgIH1cbiAgICBmZXRjaEZhdm9yaXRlcyhwb3J0YWwsIHVzZXIpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gYWRkVG9GYXZvcml0ZXMob3B0aW9ucykge1xuICAgIHJldHVybiB1cGRhdGVGYXZvcml0ZVN0YXR1cyhvcHRpb25zLCB0cnVlKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUZyb21GYXZvcml0ZXMob3B0aW9ucykge1xuICAgIHJldHVybiB1cGRhdGVGYXZvcml0ZVN0YXR1cyhvcHRpb25zLCBmYWxzZSk7XG59XG5mdW5jdGlvbiB1cGRhdGVGYXZvcml0ZVN0YXR1cyh7IGl0ZW0sIHBvcnRhbCwgdXNlciB9LCBmYXZvcml0ZSkge1xuICAgIGNvbnN0IHsgYWNjZXNzLCBpZCB9ID0gaXRlbTtcbiAgICBjb25zdCB1cmwgPSBgJHtnZXRSZXN0QmFzZVVybChwb3J0YWwpfWNvbnRlbnQvaXRlbXMvJHtpZH0vJHtmYXZvcml0ZSA/IFwic2hhcmVcIiA6IFwidW5zaGFyZVwifWA7XG4gICAgY29uc3QgY29udGVudCA9IHtcbiAgICAgICAgZXZlcnlvbmU6IGFjY2VzcyA9PT0gXCJwdWJsaWNcIixcbiAgICAgICAgb3JnOiBhY2Nlc3MgPT09IFwib3JnXCIsXG4gICAgICAgIGdyb3VwczogZ2V0RmF2R3JvdXBJZCh1c2VyKSxcbiAgICAgICAgaXRlbXM6IGlkXG4gICAgfTtcbiAgICByZXR1cm4gcmVxdWVzdCh1cmwsIGNvbnRlbnQsIHt9LCBcInBvc3RcIik7XG59XG5cbmNvbnN0IEFyY2dpc0l0ZW1GYXZvcml0ZSA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuYXJjZ2lzSXRlbUZhdm9yaXRlVXBkYXRlID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNJdGVtRmF2b3JpdGVVcGRhdGVcIiwgNyk7XG4gICAgICAgIHRoaXMuaXRlbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWR0aCA9IFwiZnVsbFwiO1xuICAgICAgICB0aGlzLmljb25Pbmx5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICAgICAgdGhpcy5pc0Zhdm9yaXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiogU2V0IGZvY3VzIG9uIHRoZSBjb21wb25lbnQgKi9cbiAgICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLmJ1dHRvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldEZvY3VzKCk7XG4gICAgfVxuICAgIC8qKiBXaGVuIGZhdm9yaXRlIGlzIHVwZGF0ZWQsIHN5bmMgZGlmZmVyZW50IGZhdm9yaXRlIGNvbXBvbmVudHMgZm9yIHRoZSBzYW1lIGl0ZW0gKi9cbiAgICB1cGRhdGVGYXZvcml0ZShlKSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGZhdm9yaXRlIH0gPSBlLmRldGFpbDtcbiAgICAgICAgaWYgKGlkID09PSB0aGlzLml0ZW0uaWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNGYXZvcml0ZSA9IGZhdm9yaXRlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICBjb25zdCB7IGVsLCBpdGVtLCBwb3J0YWwsIHVzZXIgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MoZWwpO1xuICAgICAgICB0aGlzLmkxOG4gPSBsb2NhbGVbMF07XG4gICAgICAgIHRoaXMuaXNGYXZvcml0ZSA9IGF3YWl0IGlzSXRlbUluRmF2b3JpdGVzKGl0ZW0uaWQsIHBvcnRhbCwgdXNlcik7XG4gICAgfVxuICAgIGFzeW5jIHRvZ2dsZUZhdm9yaXRlKCkge1xuICAgICAgICBjb25zdCB7IHVzZXIsIHBvcnRhbCwgaXRlbSwgaXNGYXZvcml0ZSB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0Zhdm9yaXRlID0gIWlzRmF2b3JpdGU7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHVzZXIsIHBvcnRhbCwgaXRlbSB9O1xuICAgICAgICBhd2FpdCAoaXNGYXZvcml0ZSA/IHJlbW92ZUZyb21GYXZvcml0ZXMob3B0aW9ucykgOiBhZGRUb0Zhdm9yaXRlcyhvcHRpb25zKSk7XG4gICAgICAgIHRoaXMuYXJjZ2lzSXRlbUZhdm9yaXRlVXBkYXRlLmVtaXQoe1xuICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICBmYXZvcml0ZTogdGhpcy5pc0Zhdm9yaXRlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgaTE4biwgaXNGYXZvcml0ZSwgd2lkdGgsIHNjYWxlLCBpY29uT25seSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdGV4dCA9IGlzRmF2b3JpdGUgPyBpMThuLnJlbW92ZSA6IGkxOG4uYWRkO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtYnV0dG9uXCIsIE9iamVjdC5hc3NpZ24oeyB3aWR0aDogaWNvbk9ubHkgPyBcImF1dG9cIiA6IHdpZHRoLCBzY2FsZTogc2NhbGUsIGFwcGVhcmFuY2U6IGljb25Pbmx5ID8gXCJ0cmFuc3BhcmVudFwiIDogXCJvdXRsaW5lLWZpbGxcIiwga2luZDogXCJuZXV0cmFsXCIsIGljb25TdGFydDogaXNGYXZvcml0ZSA/IFwic3Rhci1mXCIgOiBcInN0YXJcIiwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRmF2b3JpdGUoKTtcbiAgICAgICAgICAgIH0sIHJlZjogKGVsKSA9PiAodGhpcy5idXR0b24gPSBlbCkgfSwgKGljb25Pbmx5ID8geyBhcmlhTGFiZWw6IHRleHQgfSA6IHt9KSksICFpY29uT25seSAmJiB0ZXh0KSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuXG5jb25zdCBhcmNnaXNJdGVtU2hhcmVTdW1tYXJ5Q3NzID0gXCI6aG9zdHtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSk7Ym9yZGVyLXJhZGl1czpjYWxjKHZhcigtLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZykgKyAwLjI1cmVtKTtwYWRkaW5nOjAuMjVyZW0gMC41cmVtO21pbi13aWR0aDpjYWxjKHZhcigtLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZykpfTpob3N0KFtzY2FsZT1zXSl7Zm9udC1zaXplOjAuODc1cmVtOy0tYXJjZ2lzLWl0ZW0tc2hhcmUtc3VtbWFyeS1zcGFjaW5nOjFyZW19Omhvc3QoW3NjYWxlPW1dKXtmb250LXNpemU6MXJlbTstLWFyY2dpcy1pdGVtLXNoYXJlLXN1bW1hcnktc3BhY2luZzoxLjVyZW19Omhvc3QoW3NjYWxlPWxdKXtmb250LXNpemU6MS4xMjVyZW07LS1hcmNnaXMtaXRlbS1zaGFyZS1zdW1tYXJ5LXNwYWNpbmc6MnJlbX0uaWNvbntkaXNwbGF5OmJsb2NrO2ZsZXgtc2hyaW5rOjA7ZmxleC1ncm93OjA7d2lkdGg6dmFyKC0tYXJjZ2lzLWl0ZW0tc2hhcmUtc3VtbWFyeS1zcGFjaW5nKTtoZWlnaHQ6dmFyKC0tYXJjZ2lzLWl0ZW0tc2hhcmUtc3VtbWFyeS1zcGFjaW5nKX0udGV4dHtmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpO21hcmdpbi1pbmxpbmUtc3RhcnQ6Y2FsYyh2YXIoLS1hcmNnaXMtaXRlbS1zaGFyZS1zdW1tYXJ5LXNwYWNpbmcpIC8gMil9XCI7XG5cbmNvbnN0IEFyY2dpc0l0ZW1TaGFyZVN1bW1hcnkgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNob3dUZXh0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbCk7XG4gICAgICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICB9XG4gICAgZ2V0SWNvbihhY2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbG9va3VwID0ge1xuICAgICAgICAgICAgcHJpdmF0ZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBzaGFyZWQ6IFwidXNlclwiLFxuICAgICAgICAgICAgb3JnOiBcIm9yZ2FuaXphdGlvblwiLFxuICAgICAgICAgICAgcHVibGljOiBcImdsb2JlXCJcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGxvb2t1cFthY2Nlc3NdIHx8IFwiZ2xvYmVcIjtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGl0ZW0sIGkxOG4sIHNjYWxlLCBzaG93VGV4dCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogXCJpY29uXCIsIGljb246IHRoaXMuZ2V0SWNvbihpdGVtLmFjY2VzcyksIHNjYWxlOiBzY2FsZSB9KSwgaXRlbS5hY2Nlc3MgPT09IFwic2hhcmVkXCIgJiYgKGgoRnJhZ21lbnQsIG51bGwsIGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogXCJpY29uXCIsIGljb246IFwicGx1c1wiLCBzY2FsZTogc2NhbGUgfSksIGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogXCJpY29uXCIsIGljb246IFwiZ3JvdXBcIiwgc2NhbGU6IHNjYWxlIH0pKSksIHNob3dUZXh0ICYmIGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwidGV4dFwiIH0sIGkxOG5baXRlbS5hY2Nlc3NdKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzSXRlbVNoYXJlU3VtbWFyeS5zdHlsZSA9IGFyY2dpc0l0ZW1TaGFyZVN1bW1hcnlDc3M7XG5cbmNvbnN0IGFyY2dpc1NlbGVjdGVkQ3NzID0gXCIuaGlkZXtkaXNwbGF5Om5vbmV9LndyYXBwZXJ7ZGlzcGxheTpmbGV4O29wYWNpdHk6MTt0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHl9LmVtcHR5e2Rpc3BsYXk6YmxvY2s7cGFkZGluZzowLjc1cmVtO2ZvbnQtc2l6ZTowLjc1cmVtO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0zKX0ubG9hZGluZ3tvcGFjaXR5OjB9LmJ1dHRvbnttYXJnaW4taW5saW5lLWVuZDowLjVyZW19LndoaXRlLWJ1dHRvbntib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpO2JvcmRlci1pbmxpbmUtZW5kOm5vbmU7Zm9udC1mYW1pbHk6aW5oZXJpdDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O2hlaWdodDoycmVtO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSk7cGFkZGluZy1sZWZ0OjAuNzVyZW07cGFkZGluZy1yaWdodDowLjc1cmVtO3BhZGRpbmctdG9wOjAuNXJlbTtwYWRkaW5nLWJvdHRvbTowLjVyZW07b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDt0cmFuc2l0aW9uOmFsbCB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpIGVhc2UtaW4tb3V0IDBzLCBvdXRsaW5lIDBzLCBvdXRsaW5lLW9mZnNldCAwc30ud2hpdGUtYnV0dG9uOmhvdmVye2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgMXB4IHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKX0ud2hpdGUtYnV0dG9uOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpO291dGxpbmUtb2Zmc2V0OjJweH0ud2hpdGUtYnV0dG9uLS1kaXNhYmxlZHtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MC4yNX0ud2hpdGUtYnV0dG9uX19pY29ue21hcmdpbi1pbmxpbmUtc3RhcnQ6MC43NXJlbX1jYWxjaXRlLWRyb3Bkb3duW29wZW5dIC53aGl0ZS1idXR0b257Ym9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKX0ucGFnZS1yYW5nZXtmb250LXNpemU6MC44NzVyZW07Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjJyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfS5zY3JlZW4tcmVhZGVycy1vbmx5e3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjFweDtoZWlnaHQ6MXB4O3BhZGRpbmc6MDttYXJnaW46LTFweDtvdmVyZmxvdzpoaWRkZW47Y2xpcDpyZWN0KDAsIDAsIDAsIDApO3doaXRlLXNwYWNlOm5vd3JhcDtib3JkZXItd2lkdGg6MH0uY2hlY2tib3h7bWFyZ2luLXRvcDowLjc1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNTZWxlY3RlZEl0ZW0kMSA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWREZXNlbGVjdEFsbCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzU2VsZWN0ZWREZXNlbGVjdEFsbFwiLCA3KTtcbiAgICAgICAgdGhpcy5hcmNnaXNTZWxlY3RlZFNlbGVjdFBhZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1NlbGVjdGVkU2VsZWN0UGFnZVwiLCA3KTtcbiAgICAgICAgdGhpcy5jaGVja2VkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGVhZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbXB0eVRleHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWxTZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5oaWRlQ2hlY2tib3ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oaWRlU2VsZWN0ZWRUZXh0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbG9jYWxlID0gYXdhaXQgZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbGVtZW50KTtcbiAgICAgICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgIH1cbiAgICByZW5kZXJCdXR0b24oKSB7XG4gICAgICAgIGNvbnN0IHsgdG90YWxTZWxlY3RlZCwgaTE4biB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgIGNsYXNzOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgc2xvdDogXCJ0cmlnZ2VyXCIsXG4gICAgICAgICAgICBraW5kOiBcIm5ldXRyYWxcIixcbiAgICAgICAgICAgIGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsXG4gICAgICAgICAgICBpY29uRW5kOiAhIXRvdGFsU2VsZWN0ZWQgPyBcImNhcmV0LWRvd25cIiA6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlkZVNlbGVjdGVkVGV4dCA/IChoKFwiY2FsY2l0ZS1idXR0b25cIiwgT2JqZWN0LmFzc2lnbih7fSwgYXR0cmlidXRlcykpKSA6IChoKFwiY2FsY2l0ZS1idXR0b25cIiwgT2JqZWN0LmFzc2lnbih7fSwgYXR0cmlidXRlcyksIGkxOG4uc2VsZWN0ZWQucmVwbGFjZShcIiR7bnVtYmVyfVwiLCBgJHt0b3RhbFNlbGVjdGVkIHx8IDB9YCkpKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGNoZWNrZWQsIGluZGV0ZXJtaW5hdGUsIGhlYWRpbmcsIHRvdGFsU2VsZWN0ZWQsIGhpZGVTZWxlY3RlZFRleHQgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwid3JhcHBlclwiIH0sICF0aGlzLmhpZGVDaGVja2JveCAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBmb3I6IFwic2VsZWN0ZWQtY2hlY2tib3hcIiwgY2xhc3M6IFwid2hpdGUtYnV0dG9uXCIgfSwgaChcInNwYW5cIiwgeyBjbGFzczogXCJzY3JlZW4tcmVhZGVycy1vbmx5XCIgfSwgY2hlY2tlZCA/IGkxOG4uZGVzZWxlY3QgOiBpMThuLnNlbGVjdFBhZ2UpLCBoKFwiY2FsY2l0ZS1jaGVja2JveFwiLCB7IGNsYXNzOiBcImNoZWNrYm94XCIsIGlkOiBcInNlbGVjdGVkLWNoZWNrYm94XCIsIGRpc2FibGVkOiAhdGhpcy50b3RhbCwgY2hlY2tlZDogY2hlY2tlZCwgaW5kZXRlcm1pbmF0ZTogaW5kZXRlcm1pbmF0ZSwgb25DYWxjaXRlQ2hlY2tib3hDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmNnaXNTZWxlY3RlZFNlbGVjdFBhZ2UuZW1pdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmNnaXNTZWxlY3RlZERlc2VsZWN0QWxsLmVtaXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IH0pKSksICghaGlkZVNlbGVjdGVkVGV4dCB8fCAhIXRvdGFsU2VsZWN0ZWQpICYmIChoKFwiY2FsY2l0ZS1kcm9wZG93blwiLCB7IHdpZHRoU2NhbGU6IFwibFwiLCBjbG9zZU9uU2VsZWN0RGlzYWJsZWQ6IHRydWUgfSwgdGhpcy5yZW5kZXJCdXR0b24oKSwgaChcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIiwgeyBzZWxlY3Rpb25Nb2RlOiBcIm5vbmVcIiwgZ3JvdXBUaXRsZTogaGVhZGluZyB9LCB0b3RhbFNlbGVjdGVkIDwgMSAmJiBoKFwic3BhblwiLCB7IGNsYXNzOiBcImVtcHR5XCIgfSwgdGhpcy5lbXB0eVRleHQpLCBoKFwic2xvdFwiLCBudWxsKSkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsZW1lbnQoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzU2VsZWN0ZWRJdGVtJDEuc3R5bGUgPSBhcmNnaXNTZWxlY3RlZENzcztcblxuY29uc3QgYXJjZ2lzU2VsZWN0ZWRJdGVtQ3NzID0gXCIuc2VsZWN0ZWQtaXRlbV9fd3JhcHBlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS5zZWxlY3RlZC1pdGVtX19jb250ZW50e2JveC1zaXppbmc6Ym9yZGVyLWJveDtmbGV4OjEgMSAwJTt3aWR0aDoxMDAlO3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuNXJlbTttYXgtd2lkdGg6MTJyZW19LnNlbGVjdGVkLWl0ZW1fX3RpdGxle21hcmdpbjowcHg7bWFyZ2luLXRvcDowLjI1cmVtO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcDtwYWRkaW5nOjBweDtmb250LXNpemU6MC44NzVyZW07Zm9udC13ZWlnaHQ6NTAwO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKX0uc2VsZWN0ZWQtaXRlbV9fZGVzY3JpcHRpb257bWFyZ2luOjBweDttYXJnaW4tdG9wOjAuMjVyZW07b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwO3BhZGRpbmc6MHB4O2ZvbnQtc2l6ZTowLjc1cmVtO2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9XCI7XG5cbmNvbnN0IEFyY2dpc1NlbGVjdGVkSXRlbSA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWRJdGVtUmVtb3ZlID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNTZWxlY3RlZEl0ZW1SZW1vdmVcIiwgNyk7XG4gICAgICAgIHRoaXMuaGVhZGluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtZHJvcGRvd24taXRlbVwiLCB7IFwic2VsZWN0aW9uLW1vZGVcIjogXCJub25lXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCBkcm9wZG93bi1pdGVtcyBsb29raW5nIGFjcm9zcyBzaGFkb3cgZG9tLCBzbyBwcmV2ZW50IGRlZmF1bHQgYW5kIG1hbmFnZSB0aGlzIG91cnNlbHZlc1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJjZ2lzU2VsZWN0ZWRJdGVtUmVtb3ZlLmVtaXQoKTtcbiAgICAgICAgICAgIH0gfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX3dyYXBwZXJcIiB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiY29udGVudC1zdGFydFwiIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VsZWN0ZWQtaXRlbV9fY29udGVudFwiIH0sIGgoXCJoNFwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX3RpdGxlXCIsIHRpdGxlOiB0aGlzLmhlYWRpbmcgfSwgdGhpcy5oZWFkaW5nKSwgdGhpcy5kZXNjcmlwdGlvbiAmJiBoKFwicFwiLCB7IGNsYXNzOiBcInNlbGVjdGVkLWl0ZW1fX2Rlc2NyaXB0aW9uXCIgfSwgdGhpcy5kZXNjcmlwdGlvbikpLCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiY29udGVudC1lbmRcIiB9KSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwieFwiLCBzY2FsZTogXCJzXCIgfSkpKSkpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5BcmNnaXNTZWxlY3RlZEl0ZW0uc3R5bGUgPSBhcmNnaXNTZWxlY3RlZEl0ZW1Dc3M7XG5cbmNvbnN0IGFyY2dpc1N1YmxheWVyVHlwZUNzcyA9IFwiOmhvc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtsaW5lLWhlaWdodDoxLjM1Oy0tc3VibGF5ZXItdHlwZS1mb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfS50ZXh0e2ZsZXg6MSAxIDAlO21hcmdpbi1pbmxpbmUtc3RhcnQ6MC41cmVtO2NvbG9yOmluaGVyaXR9Lm5hbWV7Zm9udC13ZWlnaHQ6NTAwO2ZvbnQtc2l6ZTp2YXIoLS1zdWJsYXllci10eXBlLWZvbnQtc2l6ZSl9LnR5cGV7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZTp2YXIoLS1zdWJsYXllci10eXBlLWZvbnQtc2l6ZSl9XCI7XG5cbmNvbnN0IEFyY2dpc1N1YmxheWVyVHlwZUljb24gPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnR5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2NhbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zaG93TmFtZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hvd0ljb24gPSB0cnVlO1xuICAgICAgICB0aGlzLnNob3dUeXBlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3ModGhpcy5lbCk7XG4gICAgICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGdlb21ldHJ5LCBuYW1lLCB0eXBlLCBzaG93TmFtZSwgc2hvd0ljb24sIHNob3dUeXBlLCByZW5kZXJlciwgaTE4biB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaW5mbyA9IGdldFN1YmxheWVyVHlwZUluZm8oeyB0eXBlLCBnZW9tZXRyeSB9KTtcbiAgICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbmZvKSwgeyBuYW1lIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgc2hvd0ljb24gJiYgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IGluZm8uaWNvbiwgY2xhc3M6IFwiaWNvblwiLCBzY2FsZTogdGhpcy5zY2FsZSB9KSwgKHNob3dUeXBlIHx8IHNob3dOYW1lKSAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBcInRleHRcIiB9LCBzaG93TmFtZSAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwibmFtZVwiIH0sIG5hbWUpLCBzaG93VHlwZSAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwidHlwZVwiIH0sIGkxOG5baW5mby50eXBlXSkpKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzU3VibGF5ZXJUeXBlSWNvbi5zdHlsZSA9IGFyY2dpc1N1YmxheWVyVHlwZUNzcztcblxuY29uc3QgYXJjZ2lzVXNlckF2YXRhckNzcyA9IFwiOmhvc3R7bWF4LXdpZHRoOjEwMCV9LnNrZWxldG9ue2Rpc3BsYXk6ZmxleH1Aa2V5ZnJhbWVzIHB1bHNlezUwJXtvcGFjaXR5Oi41fX0uc2tlbGV0b257YW5pbWF0aW9uOnB1bHNlIDJzIGN1YmljLWJlemllcigwLjQsIDAsIDAuNiwgMSkgaW5maW5pdGU7YWxpZ24taXRlbXM6Y2VudGVyfS5za2VsZXRvbi1hdmF0YXJ7Ym9yZGVyLXJhZGl1czoxMDAlO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTMpO3dpZHRoOnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zaXplKTtoZWlnaHQ6dmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemUpfS5za2VsZXRvbi1uYW1le2JvcmRlci1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1ib3JkZXItcmFkaXVzKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKTt3aWR0aDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc2tlbGV0b24td2lkdGgpO2JvcmRlci1yYWRpdXM6dmFyKC0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmcpO2hlaWdodDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZyk7bWFyZ2luLWlubGluZS1zdGFydDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZyl9QGtleWZyYW1lcyBwdWxzZXswJSwxMDAle29wYWNpdHk6MX01MCV7b3BhY2l0eTowLjV9fS5hdmF0YXJ7ZGlzcGxheTpibG9jaztmbGV4LXNocmluazowO2ZsZXgtZ3JvdzowO2JvcmRlci1yYWRpdXM6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKTt3aWR0aDp2YXIoLS1hcmNnaXMtdXNlci1hdmF0YXItc2l6ZSk7aGVpZ2h0OnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zaXplKX0udGV4dHtkaXNwbGF5OmZsZXg7bWluLXdpZHRoOjBweDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMik7dGV4dC1hbGlnbjpzdGFydDttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zcGFjaW5nKTtsaW5lLWhlaWdodDpjYWxjKHZhcigtLWFyY2dpcy11c2VyLWF2YXRhci1zaXplKSAvIDIpfS4tdGV4dC1uby1hdmF0YXJ7bWFyZ2luLWlubGluZS1zdGFydDowcHh9Li10ZXh0LXVuZGVybGluZSAudGl0bGV7dGV4dC1kZWNvcmF0aW9uLWxpbmU6dW5kZXJsaW5lfS50aXRsZSwuZGVzY3JpcHRpb257b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfS5oYXMtZGVzY3JpcHRpb257Zm9udC13ZWlnaHQ6NTAwfS5kZXNjcmlwdGlvbntmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfTpob3N0e2Rpc3BsYXk6ZmxleDttaW4td2lkdGg6MHB4O2FsaWduLWl0ZW1zOmNlbnRlcn06aG9zdChbc2NhbGU9eHNdKXtmb250LXNpemU6MC43NXJlbTstLWFyY2dpcy11c2VyLWF2YXRhci1zaXplOjE4cHg7LS1hcmNnaXMtdXNlci1hdmF0YXItc3BhY2luZzowLjI1cmVtfTpob3N0KFtzY2FsZT14c10pIC5kZXNjcmlwdGlvbntmb250LXNpemU6MC42MjVyZW07bWFyZ2luLXRvcDotMC4xMjVyZW19Omhvc3QoW3NjYWxlPXhzXSkgLnRleHR7bGluZS1oZWlnaHQ6MS4zNX06aG9zdChbc2NhbGU9c10pe2ZvbnQtc2l6ZTowLjc1cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemU6MS41cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmc6MC41cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNrZWxldG9uLXdpZHRoOjRyZW19Omhvc3QoW3NjYWxlPXNdKSAuZGVzY3JpcHRpb257Zm9udC1zaXplOjAuNjI1cmVtfTpob3N0KFtzY2FsZT1tXSl7Zm9udC1zaXplOjAuODc1cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemU6MnJlbTstLWFyY2dpcy11c2VyLWF2YXRhci1zcGFjaW5nOjAuNzVyZW07LS1hcmNnaXMtdXNlci1hdmF0YXItc2tlbGV0b24td2lkdGg6NXJlbX06aG9zdChbc2NhbGU9bV0pIC5kZXNjcmlwdGlvbntmb250LXNpemU6MC43NXJlbX06aG9zdChbc2NhbGU9bF0pe2ZvbnQtc2l6ZToxcmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNpemU6Mi41cmVtOy0tYXJjZ2lzLXVzZXItYXZhdGFyLXNwYWNpbmc6MXJlbTstLWFyY2dpcy11c2VyLWF2YXRhci1za2VsZXRvbi13aWR0aDo2cmVtfTpob3N0KFtzY2FsZT1sXSkgLmRlc2NyaXB0aW9ue2ZvbnQtc2l6ZTowLjg3NXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzVXNlckF2YXRhciA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wb3J0YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICAgICAgdGhpcy5zaG93TmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zaG93QXZhdGFyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oZWFkaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVuZGVybGluZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jaGVja09ubGluZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIGNvbnN0IHsgZWwsIHBvcnRhbCwgdXNlcm5hbWUgfSA9IHRoaXM7XG4gICAgICAgIHRoaXMubGFuZyA9IGF3YWl0IGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZShlbCk7XG4gICAgICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgICAgICAgdGhpcy51c2VyID0gYXdhaXQgZmV0Y2hVc2VyKHVzZXJuYW1lLCBwb3J0YWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlclNrZWxldG9uKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogXCJza2VsZXRvblwiIH0sIHRoaXMuc2hvd0F2YXRhciAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2tlbGV0b24tYXZhdGFyXCIgfSksIHRoaXMuc2hvd05hbWUgJiYgaChcImRpdlwiLCB7IGNsYXNzOiBcInNrZWxldG9uLW5hbWVcIiB9KSkpO1xuICAgIH1cbiAgICByZW5kZXJVc2VyKCkge1xuICAgICAgICBjb25zdCB7IHVzZXIsIGxhbmcsIHBvcnRhbCwgc2hvd0F2YXRhciwgc2hvd05hbWUsIGRlc2NyaXB0aW9uLCBzY2FsZSwgdW5kZXJsaW5lLCBoZWFkaW5nIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IGZ1bGxOYW1lLCB1c2VybmFtZSB9ID0gdXNlcjtcbiAgICAgICAgY29uc3QgaWQgPSBnZXRVc2VySWQodXNlcik7XG4gICAgICAgIGNvbnN0IHNob3dEZXNjcmlwdGlvbiA9ICEhZGVzY3JpcHRpb247XG4gICAgICAgIGNvbnN0IG5hbWUgPSAoKGZ1bGxOYW1lID09PSBudWxsIHx8IGZ1bGxOYW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmdWxsTmFtZS5zcGxpdChcIiBcIikpIHx8IFtdKS5zbGljZSgwLCAyKS5qb2luKFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHNob3dBdmF0YXIgJiYgKGgoXCJjYWxjaXRlLWF2YXRhclwiLCBPYmplY3QuYXNzaWduKHsgY2xhc3M6IFwiYXZhdGFyXCIsIHNjYWxlOiBzY2FsZSA9PT0gXCJ4c1wiID8gXCJzXCIgOiBzY2FsZSwgZnVsbE5hbWU6IG5hbWUsIHVzZXJuYW1lOiB1c2VybmFtZSwgdXNlcklkOiBpZCwgdGh1bWJuYWlsOiBnZXRVc2VyVGh1bWJuYWlsVVJJKHVzZXIsIHBvcnRhbCwgdGhpcy5jaGVja09ubGluZSkgfSwgKHNob3dOYW1lIHx8IHNob3dEZXNjcmlwdGlvbiA/IHsgaW5lcnQ6IHRydWUgfSA6IHt9KSkpKSxcbiAgICAgICAgICAgIChzaG93TmFtZSB8fCBzaG93RGVzY3JpcHRpb24pICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiB7IHRleHQ6IHRydWUsIFwidGV4dC0tdW5kZXJsaW5lXCI6IHVuZGVybGluZSwgXCJ0ZXh0LS1uby1hdmF0YXJcIjogIXNob3dBdmF0YXIgfSB9LCBzaG93TmFtZSAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogeyB0aXRsZTogdHJ1ZSwgXCJoYXMtZGVzY3JpcHRpb25cIjogc2hvd0Rlc2NyaXB0aW9uIH0gfSwgaGVhZGluZyB8fCBnZXRGdWxsTmFtZSh1c2VyLCBsYW5nKSkpLCBzaG93RGVzY3JpcHRpb24gJiYgaChcInNwYW5cIiwgeyBjbGFzczogXCJkZXNjcmlwdGlvblwiIH0sIGRlc2NyaXB0aW9uKSkpXG4gICAgICAgIF07XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGgoSG9zdCwgbnVsbCwgdGhpcy51c2VyICYmIHRoaXMubGFuZyA/IHRoaXMucmVuZGVyVXNlcigpIDogdGhpcy5yZW5kZXJTa2VsZXRvbigpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc1VzZXJBdmF0YXIuc3R5bGUgPSBhcmNnaXNVc2VyQXZhdGFyQ3NzO1xuXG5jb25zdCBhcmNnaXNVc2VyUG9wdXBDc3MgPSBcIjpob3N0e2Rpc3BsYXk6ZmxleH0uYnV0dG9ue2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7bWF4LXdpZHRoOjEwMCU7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXN0eWxlOm5vbmU7cGFkZGluZzowcHg7Zm9udC1zaXplOjAuNzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpO291dGxpbmU6MnB4IHNvbGlkIHRyYW5zcGFyZW50O291dGxpbmUtb2Zmc2V0OjJweDt0cmFuc2l0aW9uLXByb3BlcnR5OmFsbDtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Zm9udC1mYW1pbHk6aW5oZXJpdDtsaW5lLWhlaWdodDoxLjV9LmJ1dHRvbjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDoycHh9Lm5hbWV7b3ZlcmZsb3c6aGlkZGVuO3doaXRlLXNwYWNlOm5vd3JhcDttYXJnaW4taW5saW5lLXN0YXJ0OjAuNXJlbTt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzfVwiO1xuXG5jb25zdCBBcmNnaXNVc2VyUG9wdXAgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb24gPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb25cIiwgNyk7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmFwaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgICAgICB0aGlzLnBvcnRhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVuZGVybGluZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zaG93QXZhdGFyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zaG93TmFtZSA9IHRydWU7XG4gICAgICAgIHRoaXMuY2hlY2tPbmxpbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXRlbVVzZXJJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmdyb3VwcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3RhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zaG93UG9wb3ZlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcml2YXRlVXNlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBjb25zdCB7IGVsLCBpdGVtLCB1c2VybmFtZSwgcG9ydGFsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsb2NhbGUgPSBhd2FpdCBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzKGVsKTtcbiAgICAgICAgdGhpcy5pMThuID0gbG9jYWxlWzBdO1xuICAgICAgICB0aGlzLmxhbmcgPSBsb2NhbGVbMV07XG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoSXRlbVVzZXJJbmZvKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlckluZm8gPSBhd2FpdCBmZXRjaFVzZXIodXNlcm5hbWUsIHBvcnRhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtVXNlckluZm8gPSB1c2VySW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJpdmF0ZVVzZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNldEZvY3VzKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IHRoaXMuYnV0dG9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hJdGVtVXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHsgcG9ydGFsLCBpdGVtLCBsYW5nLCBjaGVja09ubGluZSB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5pdGVtVXNlckluZm8gPSBhd2FpdCBmZXRjaEl0ZW1Vc2VySW5mbyhpdGVtLCBwb3J0YWwsIGxhbmcsIGNoZWNrT25saW5lKTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hJdGVtc0FuZEdyb3VwcygpIHtcbiAgICAgICAgY29uc3QgeyB1c2VyLCBpdGVtVXNlckluZm8sIGl0ZW0sIHBvcnRhbCwgdG90YWwsIHVzZXJuYW1lOiBwcm9wVXNlcm5hbWUsIGNoZWNrT25saW5lIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB1c2VybmFtZSA9IHByb3BVc2VybmFtZSB8fCAodXNlciA9PT0gbnVsbCB8fCB1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyLnVzZXJuYW1lKSB8fCAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLm93bmVyKTtcbiAgICAgICAgaWYgKCFpc1B1YmxpY0F1dGhvcml0YXRpdmUoaXRlbSkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwcyA9IGF3YWl0IGZyb21DYWNoZSgoKSA9PiBmZXRjaFVzZXJHcm91cHModXNlcm5hbWUsIHBvcnRhbCwgY2hlY2tPbmxpbmUpLCBcInVzZXJHcm91cHNcIiwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzTmFOKHRvdGFsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBhd2FpdCBmcm9tQ2FjaGUoKCkgPT4gZmV0Y2hVc2VySXRlbXNUb3RhbCh1c2VyIHx8IGl0ZW1Vc2VySW5mbywgcG9ydGFsLCBjaGVja09ubGluZSksIFwidXNlckl0ZW1zVG90YWxcIiwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyB1c2VyLCBpdGVtVXNlckluZm8sIHBvcnRhbCwgaXRlbSwgYmFzZVVybCwgYnV0dG9uLCBpMThuLCBzY2FsZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdXNlckluZm8gPSB1c2VyIHx8IGl0ZW1Vc2VySW5mbztcbiAgICAgICAgaWYgKCF1c2VySW5mbyB8fCAhaTE4bikge1xuICAgICAgICAgICAgcmV0dXJuIGgoXCJhcmNnaXMtdXNlci1hdmF0YXJcIiwgeyBzY2FsZTogXCJzXCIsIHNob3dOYW1lOiB0cnVlLCBjaGVja09ubGluZTogdGhpcy5jaGVja09ubGluZSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcImJ1dHRvblwiLCByZWY6IChlbCkgPT4gKHRoaXMuYnV0dG9uID0gZWwpLCBvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNob3dQb3BvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BvcG92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoSXRlbXNBbmRHcm91cHMoKTtcbiAgICAgICAgICAgIH0gfSwgaChcInNsb3RcIiwgbnVsbCwgaChcImFyY2dpcy11c2VyLWF2YXRhclwiLCB7IHVzZXI6IHVzZXJJbmZvLCBzY2FsZTogc2NhbGUgPT09IFwibVwiID8gXCJtXCIgOiBcInNcIiwgcG9ydGFsOiBwb3J0YWwsIHNob3dOYW1lOiB0aGlzLnNob3dOYW1lLCBzaG93QXZhdGFyOiB0aGlzLnNob3dBdmF0YXIsIHVuZGVybGluZTogdGhpcy51bmRlcmxpbmUsIGNoZWNrT25saW5lOiB0aGlzLmNoZWNrT25saW5lIH0pKSksIHRoaXMuc2hvd1BvcG92ZXIgJiYgKGgoXCJhcmNnaXMtdHVubmVsXCIsIHsgcmVmZXJlbmNlOiB0aGlzLmVsIH0sIGgoXCJhcmNnaXMtdXNlci1wb3B1cC1wb3BvdmVyXCIsIHsgb25BcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoZS5kZXRhaWwpO1xuICAgICAgICAgICAgfSwgb25BcmNnaXNVc2VyUG9wdXBQb3BvdmVyQ2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dQb3BvdmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyTm9kZSA9IG51bGw7XG4gICAgICAgICAgICB9LCBvbkFyY2dpc1VzZXJQb3B1cFBvcG92ZXJLZXlEb3duOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gISBIYXMgdG8gYmUgZm9jdXNlZCBhZnRlciB0aGUgcG9wb3ZlciBpcyBjb21wbGV0ZWx5IGNsb3NlZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBQT1BPVkVSX0NMT1NFX1RJTUUgPSAyMDA7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgUE9QT1ZFUl9DTE9TRV9USU1FKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB1c2VyOiB1c2VyLCBpdGVtOiBpdGVtLCBwb3J0YWw6IHBvcnRhbCwgYmFzZVVybDogYmFzZVVybCwgaXRlbVVzZXJJbmZvOiBpdGVtVXNlckluZm8sIGkxOG46IGkxOG4sIGdyb3VwczogdGhpcy5ncm91cHMsIHRvdGFsOiB0aGlzLnRvdGFsLCBjaGVja09ubGluZTogdGhpcy5jaGVja09ubGluZSwgcmVmOiAoZWwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWwucmVmZXJlbmNlRWxlbWVudCA9IGJ1dHRvbjtcbiAgICAgICAgICAgICAgICAvLyBvcGVuIHdoZW4gZmlyc3QgYWRkZWRcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucG9wb3Zlck5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyTm9kZSA9IGVsO1xuICAgICAgICAgICAgICAgICAgICBlbC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB9KSkpKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcIml0ZW1cIjogW1wiZmV0Y2hJdGVtVXNlckluZm9cIl1cbiAgICB9OyB9XG59O1xuQXJjZ2lzVXNlclBvcHVwLnN0eWxlID0gYXJjZ2lzVXNlclBvcHVwQ3NzO1xuXG5mdW5jdGlvbiBhZGRIeXBlcmxpbmtzKHRleHQpIHtcbiAgICBjb25zdCB1cmxSZWdleCA9IC8oaHR0cHM/OlxcL1xcL1teXFxzXSspL2c7XG4gICAgcmV0dXJuIHRleHQgPT09IG51bGwgfHwgdGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGV4dC5yZXBsYWNlKHVybFJlZ2V4LCAodXJsKSA9PiBgPGEgaHJlZj1cIiR7dXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPiR7dXJsfTwvYT5gKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZU5ld2xpbmVzKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dCA9PT0gbnVsbCB8fCB0ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZXh0LnJlcGxhY2UoLyg/OlxccikvZywgXCImIzEwO1wiKS5yZXBsYWNlKC8oPzpcXG4pL2csIFwiJiMxMztcIik7XG59XG5mdW5jdGlvbiByZXN0b3JlTmV3bGluZXModGV4dCkge1xuICAgIHJldHVybiB0ZXh0ID09PSBudWxsIHx8IHRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRleHQucmVwbGFjZSgvKD86JiMxMDspL2csIFwiXFxyXCIpLnJlcGxhY2UoLyg/OiYjMTM7KS9nLCBcIlxcblwiKTtcbn1cbmZ1bmN0aW9uIGluc2VydEh0bWxMaW5lQnJlYWtzKHRleHQpIHtcbiAgICByZXR1cm4gdGV4dCA9PT0gbnVsbCB8fCB0ZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZXh0LnJlcGxhY2UoLyYjMTA7JiMxMzt8JiMxMDt8JiMxMzt8XFxyXFxufFxccnxcXG4vZywgXCI8YnI+XCIpO1xufVxuZnVuY3Rpb24gZ2V0SHRtbEZyb21UZXh0KHRleHQpIHtcbiAgICByZXR1cm4gaW5zZXJ0SHRtbExpbmVCcmVha3MoZXNjYXBlTmV3bGluZXMoYWRkSHlwZXJsaW5rcyhyZXN0b3JlTmV3bGluZXModGV4dCkpKSk7XG59XG5cbmZ1bmN0aW9uIGdldFVzZXJMaW5rKHsgYmFzZVVybCwgcG9ydGFsLCB1c2VyLCB0eXBlIH0pIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IGJhc2UgPSByZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2VVcmwpO1xuICAgIGNvbnN0IHsgdXNlcm5hbWUsIG9yZ0lkIH0gPSB1c2VyO1xuICAgIGNvbnN0IG5hbWUgPSBlbmNvZGVVUklDb21wb25lbnQodXNlcm5hbWUpO1xuICAgIGNvbnN0IGlzU2VsZiA9ICgoX2EgPSBwb3J0YWwudXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVzZXJuYW1lKSA9PT0gdXNlci51c2VybmFtZTtcbiAgICBjb25zdCBjYW5WaWV3ID0gKHR5cGUgPT09IFwiZ3JvdXBzXCIgJiYgY2FuVmlld09yZ0dyb3Vwcyhwb3J0YWwudXNlcikpIHx8ICh0eXBlID09PSBcImNvbnRlbnRcIiAmJiBjYW5NYW5hZ2VJdGVtcyhwb3J0YWwudXNlcikpO1xuICAgIGlmICgoY2FuVmlldyB8fCBpc09yZ0FkbWluKHBvcnRhbC51c2VyKSB8fCBpc1NlbGYpICYmIG9yZ0lkID09PSAoKF9iID0gcG9ydGFsLnVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5vcmdJZCkpIHtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2V9LyR7dHlwZX0uaHRtbCR7IWlzU2VsZiA/IGA/dXNlcj0ke25hbWV9YCA6IFwiXCJ9YDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHtiYXNlfS9zZWFyY2guaHRtbD9xPW93bmVyOiUyMiR7bmFtZX0lMjImcmVzdHJpY3Q9ZmFsc2UjJHt0eXBlfWA7XG4gICAgfVxufVxuXG5jb25zdCBhcmNnaXNVc2VyUG9wdXBQb3BvdmVyQ3NzID0gXCIud3JhcHBlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKTt3aWR0aDoyMHJlbX0uaGVhZGVye3BhZGRpbmctbGVmdDoxcmVtO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLXRvcDoxLjI1cmVtO3BhZGRpbmctYm90dG9tOjEuMjVyZW19LnVzZXItYXZhdGFye21heC13aWR0aDoxMDAlfS5jb250ZW50e3BhZGRpbmctbGVmdDoxcmVtO3BhZGRpbmctcmlnaHQ6MXJlbTtwYWRkaW5nLXRvcDowLjVyZW07cGFkZGluZy1ib3R0b206MS4yNXJlbX0uY29udGVudF9fZGVzY3JpcHRpb257bWFyZ2luOjBweDtvdmVyZmxvdzphdXRvO3BhZGRpbmc6MHB4O3BhZGRpbmctYm90dG9tOjAuMjVyZW07Zm9udC1zaXplOjAuODc1cmVtO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKTttYXgtaGVpZ2h0OjE1LjVyZW19LmNvbnRlbnRfX2Rlc2NyaXB0aW9uLS1leHBhbmRlZDphZnRlcntjb250ZW50OlxcXCJcXFwiO2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjFyZW19LmNvbnRlbnRfX2ZhZGV7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxMDttYXJnaW4tYm90dG9tOjAuMjVyZW07ZGlzcGxheTpibG9jaztoZWlnaHQ6MXJlbTt3aWR0aDoxMDAlO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgdHJhbnNwYXJlbnQsIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKSA3NCUpO21hcmdpbi10b3A6LTFyZW19LmNvbnRlbnRfX2xpbmt7Zm9udC1zaXplOjAuODc1cmVtfS5idXR0b25ze2Rpc3BsYXk6Z3JpZDtncmlkLWF1dG8tZmxvdzpjb2x1bW47cGFkZGluZy10b3A6MXJlbTtncmlkLWdhcDowLjVyZW19LmJ1dHRvbnttaW4td2lkdGg6MHB4fS5sb2FkZXJ7LS1jYWxjaXRlLWxvYWRlci1wYWRkaW5nOjB9XCI7XG5cbmNvbnN0IEFyY2dpc1VzZXJQb3B1cFBvcG92ZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cFBvcG92ZXJDbG9zZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNsb3NlXCIsIDcpO1xuICAgICAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cFBvcG92ZXJLZXlEb3duID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNVc2VyUG9wdXBQb3BvdmVyS2V5RG93blwiLCA3KTtcbiAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uID0gY3JlYXRlRXZlbnQodGhpcywgXCJhcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uXCIsIDcpO1xuICAgICAgICB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhcGk6IGNvbmZpZ1N0YXRlLmFwaSxcbiAgICAgICAgICAgIHBsYWNlczogMCxcbiAgICAgICAgICAgIHR5cGU6IFwiZGVjaW1hbFwiXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBvcnRhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXRlbVVzZXJJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmdyb3VwcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3RhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pMThuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNoZWNrT25saW5lID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmdyb3Vwc1RleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLml0ZW1zVGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuZXhwYW5kZWQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcG92ZXIoZmFsc2UpO1xuICAgIH1cbiAgICBhc3luYyBvcGVuKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVBvcG92ZXIodHJ1ZSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUdyb3Vwc1RleHQoZ3JvdXBzKSB7XG4gICAgICAgIGNvbnN0IG51bWJlciA9IGF3YWl0IGZvcm1hdE51bWJlcihncm91cHMudG90YWwsIHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZ3JvdXBzVGV4dCA9IHRoaXMuaTE4bi5ncm91cHMucmVwbGFjZShcIiR7bnVtYmVyfVwiLCBudW1iZXIpO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVJdGVtc1RleHQodG90YWwpIHtcbiAgICAgICAgY29uc3QgbnVtYmVyID0gYXdhaXQgZm9ybWF0TnVtYmVyKHRvdGFsLCB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMpO1xuICAgICAgICB0aGlzLml0ZW1zVGV4dCA9IHRoaXMuaTE4bi5pdGVtcy5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIG51bWJlcik7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICAvLyB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVvcGVuZWQsIHNldCBncm91cHMvdG90YWwgdGV4dCBhZ2FpbiBhcyB0aGUgd2F0Y2hlciBkb2Vzbid0IGZpcmVcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBzKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdyb3Vwc1RleHQodGhpcy5ncm91cHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOYU4odGhpcy50b3RhbCkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSXRlbXNUZXh0KHRoaXMudG90YWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRvZ2dsZVBvcG92ZXIob3Blbikge1xuICAgICAgICBpZiAodGhpcy5wb3BvdmVyTm9kZSkge1xuICAgICAgICAgICAgdGhpcy5wb3BvdmVyTm9kZS5vcGVuID0gb3BlbjtcbiAgICAgICAgICAgIGF3YWl0IHRpbWVvdXQoMTUwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcGVuTGluayhlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gbm90IHRvdGFsbHkgc3VyZSB3aHksIGJ1dCBpZiB5b3UganVzdCBsaW5rIHRvIHRoZSBwYWdlLCB5b3UnbGwgYmUgc2lnbmVkIG91dFxuICAgICAgICAvLyBpZiB3ZSB1c2Ugd2luZG93Lm9wZW4sIGl0IHJldGFpbnMgeW91ciBjdXJyZW50IHNpZ25lZCBpbiBzdGF0dXNcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBocmVmID0gKF9hID0gZS50YXJnZXQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ocmVmO1xuICAgICAgICB3aW5kb3cub3BlbihocmVmLCBcIl9ibGFua1wiKTtcbiAgICB9XG4gICAgcmVuZGVyT3JnQnV0dG9ucygpIHtcbiAgICAgICAgY29uc3QgeyBpMThuLCBiYXNlVXJsLCBpdGVtVXNlckluZm8gfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHVybCA9IHJlbW92ZVRyYWlsaW5nU2xhc2goKGl0ZW1Vc2VySW5mbyA9PT0gbnVsbCB8fCBpdGVtVXNlckluZm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW1Vc2VySW5mby51cmwpIHx8IGJhc2VVcmwpO1xuICAgICAgICByZXR1cm4gKGgoRnJhZ21lbnQsIG51bGwsIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBocmVmOiB1cmwsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHRoaXMub3BlbkxpbmsoZSkgfSwgaTE4bi5ob21lcGFnZSksIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBocmVmOiBgJHt1cmx9L2dhbGxlcnkuaHRtbGAsIHRhcmdldDogXCJfYmxhbmtcIiwgb25DbGljazogKGUpID0+IHRoaXMub3BlbkxpbmsoZSkgfSwgaTE4bi5nYWxsZXJ5KSkpO1xuICAgIH1cbiAgICByZW5kZXJVc2VyQnV0dG9ucyh1c2VySW5mbykge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGJhc2VVcmwsIHBvcnRhbCwgdG90YWwsIGdyb3VwcyB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbG9hZGluZyA9ICF0aGlzLmdyb3Vwc1RleHQgfHwgIXRoaXMuaXRlbXNUZXh0O1xuICAgICAgICBjb25zdCB7IHVzZXJuYW1lIH0gPSB1c2VySW5mbztcbiAgICAgICAgaWYgKGxvYWRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiAoaChcImNhbGNpdGUtbG9hZGVyXCIsIHsgbGFiZWw6IGkxOG4ubG9hZGluZ1VzZXJJbmZvcm1hdGlvbiwgc2NhbGU6IFwic1wiLCBjbGFzczogXCJsb2FkZXJcIiB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChoKEZyYWdtZW50LCBudWxsLCAhIShncm91cHMgPT09IG51bGwgfHwgZ3JvdXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncm91cHMudG90YWwpICYmIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBjbGFzczogXCJidXR0b25cIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lLWZpbGxcIiwga2luZDogXCJuZXV0cmFsXCIsIGhyZWY6IGAke2dldFVzZXJMaW5rKHsgYmFzZVVybCwgcG9ydGFsLCB1c2VyOiB1c2VySW5mbywgdHlwZTogXCJncm91cHNcIiB9KX1gLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIG9uQ2xpY2s6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuTGluayhlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb24uZW1pdCh7XG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcInByb2ZpbGUgcG9wdXBcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInZpZXcgYWxsIGdyb3Vwc1wiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IH0sIHRoaXMuZ3JvdXBzVGV4dCkpLCAhIXRvdGFsICYmIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBjbGFzczogXCJidXR0b25cIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lLWZpbGxcIiwga2luZDogXCJuZXV0cmFsXCIsIGhyZWY6IGAke2dldFVzZXJMaW5rKHtcbiAgICAgICAgICAgICAgICBiYXNlVXJsLFxuICAgICAgICAgICAgICAgIHBvcnRhbCxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VySW5mbyxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNvbnRlbnRcIlxuICAgICAgICAgICAgfSl9YCwgdGFyZ2V0OiBcIl9ibGFua1wiLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkxpbmsoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogXCJwcm9maWxlIHBvcHVwXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJ2aWV3IGFsbCBjb250ZW50XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gfSwgdGhpcy5pdGVtc1RleHQpKSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgY2xhc3M6IFwiYnV0dG9uXCIsIGFwcGVhcmFuY2U6IFwib3V0bGluZS1maWxsXCIsIGtpbmQ6IFwibmV1dHJhbFwiLCBocmVmOiBgJHtyZW1vdmVUcmFpbGluZ1NsYXNoKGJhc2VVcmwpfS91c2VyLmh0bWw/dXNlcj0ke2VuY29kZVVSSUNvbXBvbmVudCh1c2VybmFtZSl9YCwgdGFyZ2V0OiBcIl9ibGFua1wiLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkxpbmsoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmNnaXNVc2VyUG9wdXBJbnRlcm5hbFVJQWN0aW9uLmVtaXQoe1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogXCJwcm9maWxlIHBvcHVwXCIsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJ2aWV3IHByb2ZpbGVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSB9LCBpMThuLnByb2ZpbGUpKSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBpMThuLCB1c2VyLCBpdGVtLCBpdGVtVXNlckluZm8sIGxhbmcsIHBvcnRhbCwgZXhwYW5kZWQsIHJlZmVyZW5jZUVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0gdXNlciB8fCBpdGVtVXNlckluZm87XG4gICAgICAgIGNvbnN0IGlzQXV0aG9yaXRhdGl2ZSA9IGlzUHVibGljQXV0aG9yaXRhdGl2ZShpdGVtKTtcbiAgICAgICAgY29uc3QgeyB1c2VybmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvO1xuICAgICAgICBjb25zdCBuYW1lID0gZ2V0RnVsbE5hbWUodXNlckluZm8sIGxhbmcpO1xuICAgICAgICBjb25zdCBkZWNvZGVkRGVzY3JpcHRpb24gPSBnZXRIdG1sRnJvbVRleHQoZGVzY3JpcHRpb24pIHx8IFwiXCI7XG4gICAgICAgIC8vZWFjaCBsaW5lIGJyZWFrIGlzIGFwcHJveGltYXRlbHkgNDAgY2hhcnMgbG9uZ1xuICAgICAgICBjb25zdCB0ZW1wRGVzY3JpcHRpb24gPSBkZWNvZGVkRGVzY3JpcHRpb24ucmVwbGFjZSgvPGJyPi9nLCBcIiBcIi5yZXBlYXQoNDApKTtcbiAgICAgICAgY29uc3Qgc2hvcnRlbkRlc2NyaXB0aW9uID0gIWV4cGFuZGVkICYmIHRlbXBEZXNjcmlwdGlvbi5sZW5ndGggPj0gMjQwO1xuICAgICAgICBjb25zdCBzaG9ydERlc2NyaXB0aW9uID0gc2hvcnRlbkRlc2NyaXB0aW9uXG4gICAgICAgICAgICA/IC8vIFRyaW0gYXQgMjQwIGNoYXJzLCB0aGVuIGFkZCBiYWNrIHRoZSBsaW5lIGJyZWFrcyBhc3N1bWluZyA1LTQwIGNvbnNlY3V0aXZlIHNwYWNlcyBpcyBhIGxpbmUgYnJlYWtcbiAgICAgICAgICAgICAgICBgJHt0ZW1wRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgLnN1YnN0cmluZygwLCAyNDApXG4gICAgICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcc3s1LDQwfS9nLCBcIjxicj5cIil9Li4uYFxuICAgICAgICAgICAgOiBkZWNvZGVkRGVzY3JpcHRpb247XG4gICAgICAgIGNvbnN0IG1hbmFnZWRCeSA9IGlzQXV0aG9yaXRhdGl2ZVxuICAgICAgICAgICAgPyB0aGlzLmkxOG4uaXRlbU1hbmFnZWRCeS5yZXBsYWNlKFwiJHt1c2VybmFtZX1cIiwgdXNlcm5hbWUpXG4gICAgICAgICAgICA6IHVzZXJuYW1lO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtcG9wb3ZlclwiLCB7IGNsYXNzOiBcInBvcG92ZXJcIiwgbGFiZWw6IG5hbWUsIHBvaW50ZXJEaXNhYmxlZDogdHJ1ZSwgcmVmZXJlbmNlRWxlbWVudDogcmVmZXJlbmNlRWxlbWVudCwgcGxhY2VtZW50OiBcImJvdHRvbS1zdGFydFwiLCBpZDogYCR7dXNlcm5hbWV9LXBvcG92ZXJgLCByZWY6IChlbCkgPT4gKHRoaXMucG9wb3Zlck5vZGUgPSBlbCksIGF1dG9DbG9zZTogdHJ1ZSwgb25DYWxjaXRlUG9wb3Zlck9wZW46IGRlYm91bmNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFyY2dpc1VzZXJQb3B1cEludGVybmFsVUlBY3Rpb24uZW1pdCh7XG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcInByb2ZpbGUgcG9wdXBcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcIm9wZW4gcHJvZmlsZSBwb3B1cFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAxMDApLCBvbkNhbGNpdGVQb3BvdmVyQ2xvc2U6ICgpID0+IHRoaXMuYXJjZ2lzVXNlclBvcHVwUG9wb3ZlckNsb3NlLmVtaXQoKSwgb25LZXlEb3duOiAoZSkgPT4gdGhpcy5hcmNnaXNVc2VyUG9wdXBQb3BvdmVyS2V5RG93bi5lbWl0KGUpIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJ3cmFwcGVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhlYWRlclwiIH0sIGgoXCJhcmNnaXMtdXNlci1hdmF0YXJcIiwgeyBjbGFzczogXCJ1c2VyLWF2YXRhclwiLCB1c2VyOiB1c2VySW5mbywgc2NhbGU6IFwibFwiLCBwb3J0YWw6IHBvcnRhbCwgc2hvd05hbWU6IHRydWUsIGRlc2NyaXB0aW9uOiBtYW5hZ2VkQnksIGNoZWNrT25saW5lOiB0aGlzLmNoZWNrT25saW5lIH0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImNvbnRlbnRcIiB9LCBzaG9ydERlc2NyaXB0aW9uICYmIChoKFwicFwiLCB7IGNsYXNzOiB7IGNvbnRlbnRfX2Rlc2NyaXB0aW9uOiB0cnVlLCBcImNvbnRlbnRfX2Rlc2NyaXB0aW9uLS1leHBhbmRlZFwiOiBleHBhbmRlZCB9LCBpbm5lckhUTUw6IHNob3J0RGVzY3JpcHRpb24gfSkpLCBleHBhbmRlZCAmJiBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29udGVudF9fZmFkZVwiIH0pLCBzaG9ydGVuRGVzY3JpcHRpb24gJiYgKGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBjbGFzczogXCJjb250ZW50X19saW5rXCIsIG9uQ2xpY2s6ICgpID0+ICh0aGlzLmV4cGFuZGVkID0gdHJ1ZSkgfSwgaTE4bi5leHBhbmQpKSwgZXhwYW5kZWQgJiYgKGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBjbGFzczogXCJjb250ZW50X19saW5rXCIsIG9uQ2xpY2s6ICgpID0+ICh0aGlzLmV4cGFuZGVkID0gZmFsc2UpIH0sIGkxOG4uc2hvd0xlc3MpKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImJ1dHRvbnNcIiB9LCBpc0F1dGhvcml0YXRpdmUgPyB0aGlzLnJlbmRlck9yZ0J1dHRvbnMoKSA6IHRoaXMucmVuZGVyVXNlckJ1dHRvbnModXNlckluZm8pKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gICAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICAgICAgXCJncm91cHNcIjogW1widXBkYXRlR3JvdXBzVGV4dFwiXSxcbiAgICAgICAgXCJ0b3RhbFwiOiBbXCJ1cGRhdGVJdGVtc1RleHRcIl1cbiAgICB9OyB9XG59O1xuQXJjZ2lzVXNlclBvcHVwUG9wb3Zlci5zdHlsZSA9IGFyY2dpc1VzZXJQb3B1cFBvcG92ZXJDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc0l0ZW1CYWRnZSBhcyBhcmNnaXNfaXRlbV9iYWRnZSwgQXJjZ2lzSXRlbUJhZGdlcyBhcyBhcmNnaXNfaXRlbV9iYWRnZXMsIEFyY2dpc0l0ZW1GYXZvcml0ZSBhcyBhcmNnaXNfaXRlbV9mYXZvcml0ZSwgQXJjZ2lzSXRlbVNoYXJlU3VtbWFyeSBhcyBhcmNnaXNfaXRlbV9zaGFyZV9zdW1tYXJ5LCBBcmNnaXNTZWxlY3RlZEl0ZW0kMSBhcyBhcmNnaXNfc2VsZWN0ZWQsIEFyY2dpc1NlbGVjdGVkSXRlbSBhcyBhcmNnaXNfc2VsZWN0ZWRfaXRlbSwgQXJjZ2lzU3VibGF5ZXJUeXBlSWNvbiBhcyBhcmNnaXNfc3VibGF5ZXJfdHlwZSwgQXJjZ2lzVXNlckF2YXRhciBhcyBhcmNnaXNfdXNlcl9hdmF0YXIsIEFyY2dpc1VzZXJQb3B1cCBhcyBhcmNnaXNfdXNlcl9wb3B1cCwgQXJjZ2lzVXNlclBvcHVwUG9wb3ZlciBhcyBhcmNnaXNfdXNlcl9wb3B1cF9wb3BvdmVyIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyY2dpcy1pdGVtLWJhZGdlXzEwLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYiBhcyBpc1ByZW1pdW0sIGEgYXMgaXNTdWJzY3JpYmVyIH0gZnJvbSAnLi9pdGVtLTM1MzU1NTJkLmpzJztcbmltcG9ydCB7IGEgYXMgaXNQdWJsaWNVc2VyIH0gZnJvbSAnLi9wcml2aWxlZ2VzLTVjMzgyZjYxLmpzJztcbmltcG9ydCB7IHIgYXMgcmV0aXJlZEl0ZW1UeXBlcyB9IGZyb20gJy4vaXRlbS10eXBlcy0yMDI5YjA2Yi5qcyc7XG5pbXBvcnQgeyBiIGFzIGZldGNoVmVyaWZpZWQgfSBmcm9tICcuL3VzZXItMGZhOWZmNWEuanMnO1xuXG5jb25zdCByZXRpcmVkVXJsUGFydHMgPSBbXG4gICAgXCIzREluc2V0TWFwXCIsXG4gICAgXCIzRFNjZW5lXCIsXG4gICAgXCIzRFZpelwiLFxuICAgIFwiQXR0YWNobWVudFZpZXdlclwiLFxuICAgIFwiQ2FwYWNpdHlBbmFseXNpc1wiLFxuICAgIFwiQ29tcGFyZS9zdG9yeXRlbGxpbmdfY29tcGFyZVwiLFxuICAgIFwiQ29tcGFyZS9zdG9yeXRlbGxpbmdfdGFiYmVkXCIsXG4gICAgXCJDb21wYXJlL3N0b3J5dGVsbGluZ19zaWRlcGFuZWxcIixcbiAgICBcIkNvbXBhcmUvTXVsdGl2aWV3ZXJcIixcbiAgICBcIkNvbXBhcmUvU2VhcmNoXCIsXG4gICAgXCJDb21wYXJlL0NvbmZpZ3VyZVwiLFxuICAgIFwiQ29tcGFyZS9TaWRlQnlTaWRlVmlld2VyX0NvbmZpZ3VyZVwiLFxuICAgIFwiQ29tcGFyZTNkXCIsXG4gICAgXCJDb21wYXJlQW5hbHlzaXNcIixcbiAgICBcIkNvbXBhcmVNYXBzXCIsXG4gICAgXCJEaXJlY3Rpb25zXCIsXG4gICAgXCJFZGl0XCIsXG4gICAgXCJFZGl0b3JcIixcbiAgICBcIkVsZXZhdGlvbnNcIixcbiAgICBcIkVsZXZhdGlvbnNQcm9maWxlXCIsXG4gICAgXCJFbWJlZFwiLFxuICAgIFwiRmlsdGVyXCIsXG4gICAgXCJGaWx0ZXJHYWxsZXJ5XCIsXG4gICAgXCJHZW9MaXN0XCIsXG4gICAgXCJHZW9Ub3VyXCIsXG4gICAgXCJIZWFkZXJGb290ZXJcIixcbiAgICBcIklkZW50aWZ5XCIsXG4gICAgXCJJbWFnZUludGVycHJldGF0aW9uXCIsXG4gICAgXCJJbWFnZXJ5Vmlld2VyXCIsXG4gICAgXCJJbXBhY3RTdW1tYXJ5XCIsXG4gICAgXCJJbmZvcm1hdGlvbkxvb2t1cFwiLFxuICAgIFwiSW50ZXJhY3RpdmVGaWx0ZXJcIixcbiAgICBcIkludGVyYWN0aXZlTGVnZW5kXCIsXG4gICAgXCJMYXllclNob3djYXNlXCIsXG4gICAgXCJMZWdlbmRcIixcbiAgICBcIkxpdmVNYXBzXCIsXG4gICAgXCJMb2NhbFBlcnNwZWN0aXZlXCIsXG4gICAgXCJNYXBBbmRBcHBHYWxsZXJ5XCIsXG4gICAgXCJNYXBDYXJvdXNlbFwiLFxuICAgIFwiTWFwVG9vbHNcIixcbiAgICBcIk1lZGlhXCIsXG4gICAgXCJNaW5pbWFsR2FsbGVyeVwiLFxuICAgIFwiTWluaW1hbGlzdFwiLFxuICAgIFwiTmVhcmJ5XCIsXG4gICAgXCJPbmVQYW5lXCIsXG4gICAgXCJQYW5lbHNcIixcbiAgICBcIlBhbmVsc0xlZ2VuZFwiLFxuICAgIFwiUHJvZmlsZVwiLFxuICAgIFwiUHVibGljR2FsbGVyeVwiLFxuICAgIFwiUHVibGljSW5mb3JtYXRpb25cIixcbiAgICBcIlNlcnZpY2VMb29rdXBcIixcbiAgICBcIlNpbXBsZU1hcFZpZXdlclwiLFxuICAgIFwiU2ltcGxlVmlld2VyXCIsXG4gICAgXCJTb2NpYWxNZWRpYVwiLFxuICAgIFwiU29sdXRpb25zL3MyLmh0bWw/YXBwPWFwcHMyL0ZpbmRFZGl0RmlsdGVyXCIsXG4gICAgXCJTb2x1dGlvbnMvczIuaHRtbD9hcHA9YXBwczIvRmluZGVyXCIsXG4gICAgXCJTdG9yeXRlbGxpbmdUZXh0TGVnZW5kXCIsXG4gICAgXCJTdG9yeU1hcEJhc2ljXCIsXG4gICAgXCJTdHlsZXJcIixcbiAgICBcIlN1bW1hcnlWaWV3ZXJcIixcbiAgICBcIlRpbWVcIixcbiAgICBcIlRpbWVBd2FyZVwiLFxuICAgIFwiVHdvUGFuZVwiLFxuICAgIFwiVmlld2VyXCIsXG4gICAgXCJab25lTG9va3VwXCJcbl07XG5cbmZ1bmN0aW9uIGlzUmV0aXJlZEl0ZW1UeXBlKHR5cGUpIHtcbiAgICByZXR1cm4gcmV0aXJlZEl0ZW1UeXBlcy5pbmNsdWRlcyh0eXBlKTtcbn1cbmZ1bmN0aW9uIGlzUmV0aXJlZFN0b3J5TWFwKGl0ZW0pIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHJldHVybiAoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgJiYgaXRlbS50eXBlID09PSBcIldlYiBNYXBwaW5nIEFwcGxpY2F0aW9uXCIgJiYgKChfYiA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaW5jbHVkZXMoXCJTdG9yeSBNYXBcIikpO1xufVxuZnVuY3Rpb24gaXNDaXR5RW5naW5lV2ViU2NlbmUoaXRlbSkge1xuICAgIHJldHVybiBpdGVtLnR5cGUgPT09IFwiQ2l0eUVuZ2luZSBXZWIgU2NlbmVcIjtcbn1cbmZ1bmN0aW9uIGlzUmV0aXJlZEFwcChpdGVtKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGlzUmV0aXJlZFVybCA9IHJldGlyZWRVcmxQYXJ0cy5zb21lKCh1cmxQYXJ0KSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY29udGFpbnNIdG1sID0gdXJsUGFydC5pbmNsdWRlcyhcIi5odG1sXCIpO1xuICAgICAgICBjb25zdCBmdWxsUmV0aXJlZFBhdGggPSBgL2FwcHMvJHt1cmxQYXJ0fSR7IWNvbnRhaW5zSHRtbCA/IFwiL1wiIDogXCJcIn1gO1xuICAgICAgICByZXR1cm4gKF9hID0gaXRlbS51cmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhmdWxsUmV0aXJlZFBhdGgpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgJiYgaXRlbS50eXBlID09PSBcIldlYiBNYXBwaW5nIEFwcGxpY2F0aW9uXCIgJiYgaXRlbS51cmwgJiYgaXNSZXRpcmVkVXJsO1xufVxuZnVuY3Rpb24gZ2V0Q29udGVudFN0YXR1cyhpdGVtKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmNvbnRlbnRTdGF0dXMpIHx8ICgoX2EgPSBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uc291cmNlSlNPTikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbnRlbnRTdGF0dXMpO1xufVxuZnVuY3Rpb24gaXNPcmdBdXRob3JpdGF0aXZlKGl0ZW0pIHtcbiAgICByZXR1cm4gZ2V0Q29udGVudFN0YXR1cyhpdGVtKSA9PT0gXCJvcmdfYXV0aG9yaXRhdGl2ZVwiO1xufVxuZnVuY3Rpb24gaXNQdWJsaWNBdXRob3JpdGF0aXZlKGl0ZW0pIHtcbiAgICByZXR1cm4gZ2V0Q29udGVudFN0YXR1cyhpdGVtKSA9PT0gXCJwdWJsaWNfYXV0aG9yaXRhdGl2ZVwiO1xufVxuZnVuY3Rpb24gZ2V0QmFkZ2VzKGl0ZW0sIHBvcnRhbCwgdXNlcikge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZztcbiAgICBjb25zdCBiYWRnZXMgPSBbXTtcbiAgICBjb25zdCBncm91cERlc2lnbmF0aW9ucyA9IChfYiA9IChpdGVtLmdyb3VwRGVzaWduYXRpb25zIHx8ICgoX2EgPSBpdGVtLnNvdXJjZUpTT04pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ncm91cERlc2lnbmF0aW9ucykpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc3BsaXQoXCIsIFwiKTtcbiAgICBpZiAoaXNPcmdBdXRob3JpdGF0aXZlKGl0ZW0pIHx8IGlzUHVibGljQXV0aG9yaXRhdGl2ZShpdGVtKSkge1xuICAgICAgICBiYWRnZXMucHVzaChcIkF1dGhvcml0YXRpdmVcIik7XG4gICAgfVxuICAgIGlmIChnZXRDb250ZW50U3RhdHVzKGl0ZW0pID09PSBcImRlcHJlY2F0ZWRcIikge1xuICAgICAgICBiYWRnZXMucHVzaChcIkRlcHJlY2F0ZWRcIik7XG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgPT09IFwiU29sdXRpb25cIiAmJiAoKF9jID0gaXRlbS50eXBlS2V5d29yZHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5pbmNsdWRlcyhcIkFyY0dJUyBTb2x1dGlvblwiKSkpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goXCJTb2x1dGlvblwiKTtcbiAgICB9XG4gICAgaWYgKCgoX2QgPSBpdGVtLnR5cGVLZXl3b3JkcykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmluY2x1ZGVzKFwiUHVibGljIERhdGEgQ29sbGVjdGlvblwiKSkgJiYgdXNlcikge1xuICAgICAgICBiYWRnZXMucHVzaChcIlB1YmxpYyBEYXRhIENvbGxlY3Rpb25cIik7XG4gICAgfVxuICAgIGlmIChpc1JldGlyZWRJdGVtVHlwZShpdGVtLnR5cGUpIHx8IGlzUmV0aXJlZFN0b3J5TWFwKGl0ZW0pIHx8IGlzUmV0aXJlZEFwcChpdGVtKSkge1xuICAgICAgICBiYWRnZXMucHVzaChcIlJldGlyZWRcIik7XG4gICAgfVxuICAgIGlmIChncm91cERlc2lnbmF0aW9ucyA9PT0gbnVsbCB8fCBncm91cERlc2lnbmF0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3JvdXBEZXNpZ25hdGlvbnMuaW5jbHVkZXMoXCJsaXZpbmdhdGxhc1wiKSkge1xuICAgICAgICBiYWRnZXMucHVzaChcIkxpdmluZyBBdGxhc1wiKTtcbiAgICB9XG4gICAgaWYgKGdyb3VwRGVzaWduYXRpb25zICYmIGdyb3VwRGVzaWduYXRpb25zLmluY2x1ZGVzKFwib3BlbmRhdGFcIikpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goXCJPcGVuIERhdGFcIik7XG4gICAgfVxuICAgIGlmIChpc1ByZW1pdW0oaXRlbSkpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goXCJQcmVtaXVtXCIpO1xuICAgIH1cbiAgICBpZiAoaXNTdWJzY3JpYmVyKGl0ZW0pKSB7XG4gICAgICAgIGJhZGdlcy5wdXNoKFwiU3Vic2NyaWJlclwiKTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ub3JpZ2luIHx8ICgoX2UgPSBpdGVtLnNvdXJjZUpTT04pID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vcmlnaW4pKSB7XG4gICAgICAgIGJhZGdlcy5wdXNoKFwiQ29sbGFib3JhdGlvblwiKTtcbiAgICB9XG4gICAgaWYgKChpdGVtLmxpc3RlZCB8fCAoKF9mID0gaXRlbS5zb3VyY2VKU09OKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YubGlzdGVkKSkgJiYgIShwb3J0YWwgPT09IG51bGwgfHwgcG9ydGFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwb3J0YWwuaXNQb3J0YWwpKSB7XG4gICAgICAgIGJhZGdlcy5wdXNoKFwiTWFya2V0cGxhY2VcIik7XG4gICAgfVxuICAgIGlmICgoKF9nID0gaXRlbS50eXBlS2V5d29yZHMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5pbmNsdWRlcyhcIlJlZ2lzdGVyZWQgQXBwXCIpKSAmJlxuICAgICAgICBpdGVtLnR5cGUgIT09IFwiQVBJIEtleVwiICYmXG4gICAgICAgICghKHBvcnRhbCA9PT0gbnVsbCB8fCBwb3J0YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcnRhbC5pc1BvcnRhbCkgfHwgaXRlbS5vd25lciAhPT0gXCJlc3JpX2FwcHNcIikpIHtcbiAgICAgICAgYmFkZ2VzLnB1c2goXCJSZWdpc3RlcmVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYmFkZ2VzO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VG9vbHRpcChiYWRnZVR5cGUsIGl0ZW0sIHVzZXIsIGkxOG4sIGxvY2FsZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgcHVibGljVXNlciA9ICF1c2VyIHx8IGlzUHVibGljVXNlcih1c2VyKTtcbiAgICBzd2l0Y2ggKGJhZGdlVHlwZSkge1xuICAgICAgICBjYXNlIFwiQXV0aG9yaXRhdGl2ZVwiOlxuICAgICAgICAgICAgaWYgKGdldENvbnRlbnRTdGF0dXMoaXRlbSkgPT09IFwicHVibGljX2F1dGhvcml0YXRpdmVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWVkID0gYXdhaXQgZmV0Y2hWZXJpZmllZChpdGVtLCBsb2NhbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgPyAoX2IgPSBpdGVtLnBvcnRhbCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm5hbWUgOiB2ZXJpZmllZCA9PT0gbnVsbCB8fCB2ZXJpZmllZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmVyaWZpZWQubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTE4bi5BdXRob3JpdGF0aXZlLnRvb2x0aXAucHVibGljLnJlcGxhY2UoXCIke25hbWV9XCIsIG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkxOG4uQXV0aG9yaXRhdGl2ZS50b29sdGlwLm9yZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBcIlJldGlyZWRcIjpcbiAgICAgICAgICAgIGNvbnN0IHJldGlyZWQgPSBpMThuLlJldGlyZWQudG9vbHRpcDtcbiAgICAgICAgICAgIGlmIChpc1JldGlyZWRTdG9yeU1hcChpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRpcmVkLnN0b3J5TWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNDaXR5RW5naW5lV2ViU2NlbmUoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0aXJlZC5jaXR5RW5naW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNSZXRpcmVkQXBwKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldGlyZWQuYXBwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldGlyZWQuZ2VuZXJhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FzZSBcIlN1YnNjcmliZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBwdWJsaWNVc2VyID8gaTE4bi5TdWJzY3JpYmVyLnRvb2x0aXAucHVibGljIDogaTE4bi5TdWJzY3JpYmVyLnRvb2x0aXAub3JnO1xuICAgICAgICBjYXNlIFwiUHJlbWl1bVwiOlxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY1VzZXIgPyBpMThuLlByZW1pdW0udG9vbHRpcC5wdWJsaWMgOiBpMThuLlByZW1pdW0udG9vbHRpcC5vcmc7XG4gICAgICAgIGNhc2UgXCJSZWdpc3RlcmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gaTE4bi5SZWdpc3RlcmVkLnRvb2x0aXA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gaTE4bltiYWRnZVR5cGVdLnRvb2x0aXA7XG4gICAgfVxufVxuXG5leHBvcnQgeyBnZXRCYWRnZXMgYXMgYSwgZ2V0VG9vbHRpcCBhcyBiLCBnZXRDb250ZW50U3RhdHVzIGFzIGcsIGlzUHVibGljQXV0aG9yaXRhdGl2ZSBhcyBpIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhZGdlcy01NTVlMWI5MC5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGEgYXMgYWRkVHJhaWxpbmdTbGFzaElmTWlzc2luZyB9IGZyb20gJy4vdXJsLTRjM2FlNTRjLmpzJztcblxuZnVuY3Rpb24gaXNFc3JpKGl0ZW0pIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuICEhKChfYSA9IGl0ZW0ub3duZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZXNyaVwiKSk7XG59XG5mdW5jdGlvbiBpc1ByZW1pdW0oaXRlbSkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gaXNFc3JpKGl0ZW0pICYmICEhKChfYSA9IGl0ZW0udHlwZUtleXdvcmRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoXCJSZXF1aXJlcyBDcmVkaXRzXCIpKTtcbn1cbmZ1bmN0aW9uIGlzU3Vic2NyaWJlcihpdGVtKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBpc0VzcmkoaXRlbSkgJiYgISEoKF9hID0gaXRlbS50eXBlS2V5d29yZHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmNsdWRlcyhcIlJlcXVpcmVzIFN1YnNjcmlwdGlvblwiKSk7XG59XG5mdW5jdGlvbiBpc093bmVyKGl0ZW0sIHVzZXIpIHtcbiAgICByZXR1cm4gaXRlbS5vd25lciA9PT0gdXNlci51c2VybmFtZTtcbn1cbi8qKlxuICogQ2FuIHRoZSB1c2VyIHVwZGF0ZSB0aGUgaXRlbVxuICovXG5mdW5jdGlvbiBjYW5VcGRhdGVJdGVtKGl0ZW0sIHVzZXIpIHtcbiAgICByZXR1cm4gdXNlcklzSXRlbUFkbWluKGl0ZW0sIHVzZXIpIHx8IGl0ZW0uaXRlbUNvbnRyb2wgPT09IFwidXBkYXRlXCI7XG59XG4vKipcbiAqIElzIHRoZSB1c2VyIGVpdGhlciBhbiBvd25lciBvciBhZG1pbiBvZiB0aGUgaXRlbVxuICovXG5mdW5jdGlvbiB1c2VySXNJdGVtQWRtaW4oaXRlbSwgdXNlcikge1xuICAgIHJldHVybiBpc093bmVyKGl0ZW0sIHVzZXIpIHx8IGlzSXRlbUFkbWluKGl0ZW0sIHVzZXIpO1xufVxuLyoqXG4gKiBEb2VzIHRoZSB1c2VyIGhhdmUgYWRtaW4gY2FwYWJpbGl0aWVzIG9uIHRoaXMgaXRlbVxuICovXG5mdW5jdGlvbiBpc0l0ZW1BZG1pbihpdGVtLCB1c2VyKSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIGlmIHRoaXMgZmxhZyBpcyBhbHJlYWR5IHNldCAocHJvYmFibHkgaG9tZSBhcHApLCB1c2UgaXRcbiAgICBpZiAoaXRlbS5pc0FkbWluICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICEhaXRlbS5pc0FkbWluO1xuICAgIH1cbiAgICBjb25zdCBpdGVtT3duZXIgPSBpdGVtLm93bmVyO1xuICAgIGNvbnN0IGl0ZW1Db250cm9sQWRtaW4gPSBpdGVtLml0ZW1Db250cm9sID09PSBcImFkbWluXCI7XG4gICAgY29uc3QgZXNyaVVzZXJzID0gW1wiZXNyaV9saXZpbmdhdGxhc1wiLCBcImVzcmlfZGVtb2dyYXBoaWNzXCIsIFwiZXNyaV9ib3VuZGFyaWVzXCJdO1xuICAgIGlmICgoKF9hID0gaXRlbS5wb3J0YWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc1BvcnRhbCkgJiZcbiAgICAgICAgIWlzT3duZXIoaXRlbSwgdXNlcikgJiZcbiAgICAgICAgaXRlbUNvbnRyb2xBZG1pbiAmJlxuICAgICAgICBpdGVtT3duZXIuaW5jbHVkZXMoXCJlc3JpX1wiKSAmJlxuICAgICAgICAvLyBwb3J0YWwgaW5jb3JyZWN0bHkgcmV0dXJucyBcIml0ZW1Db250cm9sPVwiYWRtaW5cIiBmb3IgZXNyaSBvd25lZCBpdGVtc1xuICAgICAgICAhZXNyaVVzZXJzLmluY2x1ZGVzKGl0ZW1Pd25lcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbUNvbnRyb2xBZG1pbjtcbn1cbmNvbnN0IGl0ZW1zQmVsb25nVG9Vc2VyT3JnID0gKGl0ZW1zLCB1c2VyKSA9PiB7XG4gICAgcmV0dXJuICEhdXNlci5vcmdJZCAmJiBpdGVtcy5ldmVyeSgoaXRlbSkgPT4gaXRlbS5pc09yZ0l0ZW0pO1xufTtcbmNvbnN0IGdldEl0ZW1Ib21lQXBwVXJsID0gKGl0ZW1JZCwgYmFzZVVybCkgPT4gYCR7YWRkVHJhaWxpbmdTbGFzaElmTWlzc2luZyhiYXNlVXJsKX1pdGVtLmh0bWw/aWQ9JHtpdGVtSWR9YDtcblxuZXhwb3J0IHsgaXNTdWJzY3JpYmVyIGFzIGEsIGlzUHJlbWl1bSBhcyBiLCBjYW5VcGRhdGVJdGVtIGFzIGMsIGl0ZW1zQmVsb25nVG9Vc2VyT3JnIGFzIGQsIGdldEl0ZW1Ib21lQXBwVXJsIGFzIGcsIGlzT3duZXIgYXMgaSwgdXNlcklzSXRlbUFkbWluIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbS0zNTM1NTUyZC5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmNvbnN0IEhJRERFTl9JVEVNU19RVUVSWSA9IGAtdHlwZTpcIkNvZGUgQXR0YWNobWVudFwiIC10eXBlOlwiRmVhdHVyZWQgSXRlbXNcIiAtdHlwZTpcIlN5bWJvbCBTZXRcIiAtdHlwZTpcIkNvbG9yIFNldFwiIC10eXBlOlwiV2luZG93cyBWaWV3ZXIgQWRkIEluXCIgLXR5cGU6XCJXaW5kb3dzIFZpZXdlciBDb25maWd1cmF0aW9uXCIgLXR5cGU6XCJNYXAgQXJlYVwiIC10eXBla2V5d29yZHM6XCJNYXBBcmVhUGFja2FnZVwiIC10eXBlOlwiSW5kb29ycyBNYXAgQ29uZmlndXJhdGlvblwiIC10eXBla2V5d29yZHM6XCJTTVhcImA7XG5cbmV4cG9ydCB7IEhJRERFTl9JVEVNU19RVUVSWSBhcyBIIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXJ5LWQ2MjY2MGQ0LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuLyoqIEdldCB0aGUgY29ycmVjdCBnZW9tZXRyeSBpY29uIGJhc2VkIG9uIGxheWVyL3RhYmxlIHR5cGUgYW5kIGdlb21ldHJ5IHR5cGVcbiAqIHdpbGwgaGFuZGxlcyB0eXBlcyB1c2VkIGJ5IHRoZSBqc2FwaSwgdGhlIGVzcmkgdHlwZXMgdXNlZCBvbiB0aGUgc2VydmVyLFxuICogYW5kIHRoZSB0eXBlcyByZXR1cm5lZCBieSB0aGUgU2VhcmNoIEFQSVxuICovXG5mdW5jdGlvbiBnZXRTdWJsYXllclR5cGVJbmZvKHsgZ2VvbWV0cnksIHR5cGUgfSkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiQ2F0YWxvZyBMYXllclwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpY29uOiBcImNhdGFsb2ctZGF0YXNldFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2F0YWxvZ1wiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIFwiUGFyY2VsIExheWVyXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGljb246IFwicGFyY2VsLWxheWVyXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJwYXJjZWxcIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcIk9yaWVudGVkIEltYWdlcnkgTGF5ZXJcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWNvbjogXCJvcmllbnRlZC1pbWFnZXJ5LWxheWVyXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJvcmllbnRlZCBpbWFnZXJ5XCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgXCJUYWJsZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpY29uOiBcInRhYmxlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoZ2VvbWV0cnkpIHtcbiAgICAgICAgY2FzZSBcInBvaW50XCI6XG4gICAgICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlQb2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInBvaW50XCIsXG4gICAgICAgICAgICAgICAgaWNvbjogXCJwb2ludFwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlNdWx0aXBvaW50XCI6XG4gICAgICAgIGNhc2UgXCJtdWx0aXBvaW50XCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibXVsdGlwb2ludFwiLFxuICAgICAgICAgICAgICAgIGljb246IFwibGF5ZXItcG9pbnRzXCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcImxpbmVcIjpcbiAgICAgICAgY2FzZSBcInBvbHlsaW5lXCI6XG4gICAgICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcImxpbmVcIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIFwicG9seWdvblwiOlxuICAgICAgICBjYXNlIFwiZXNyaUdlb21ldHJ5UG9seWdvblwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInBvbHlnb25cIixcbiAgICAgICAgICAgICAgICBpY29uOiBcInBvbHlnb25cIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIFwibXVsdGlwYXRjaFwiOlxuICAgICAgICBjYXNlIFwiZXNyaUdlb21ldHJ5TXVsdGlQYXRjaFwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm11bHRpcGF0Y2hcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcImN1YmVcIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRhYmxlXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogXCJ0YWJsZVwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgfVxufVxuXG5leHBvcnQgeyBnZXRTdWJsYXllclR5cGVJbmZvIGFzIGcgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMtYWEyNmM0OWYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9