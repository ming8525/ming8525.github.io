"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-user-picker.entry.js":
/*!*********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-user-picker.entry.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_user_picker: () => (/* binding */ ArcgisUserPicker)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-050b6db9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./user-0fa9ff5a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-0fa9ff5a.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */














function isBackedByEnterpriseGroup(group) {
    return (group === null || group === void 0 ? void 0 : group.provider) === "enterprise" && !!(group === null || group === void 0 ? void 0 : group.providerGroupName);
}
async function searchUsers({ portal, query, searchTerm, group, config }) {
    const term = searchTerm ? `(${searchTerm}) ` : "";
    const url = `${(0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.g)(portal)}portals/self/users/search`;
    const excludedUsers = portal.isPortal
        ? "-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav"
        : "";
    // subtract system users
    const systemUsers = ((config === null || config === void 0 ? void 0 : config.systemUsers) || []).reduce((prev, user) => `${prev} -username: ${user}`, "");
    const onlineFromPortal = (url === null || url === void 0 ? void 0 : url.includes("www.arcgis.com")) && portal.isPortal;
    const options = onlineFromPortal ? { disableIdentityLookup: true, addTokenManually: false } : {};
    return (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__.r)(url, Object.assign({ num: 100, sortField: "relevance" }, (isBackedByEnterpriseGroup(group)
        ? { name: term }
        : { q: `${term} ${query !== null && query !== void 0 ? query : ""} ${excludedUsers} ${systemUsers}` })), options);
}

const arcgisUserPickerCss = ":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;overflow:auto;max-height:16rem}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}";

const ArcgisUserPicker = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisUserPickerSelect = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisUserPickerSelect", 7);
        this.uniqueId = (0,_guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_2__.g)();
        this.scrollToActiveItem = () => {
            var _a;
            const activeItem = (_a = this.list) === null || _a === void 0 ? void 0 : _a.querySelector(`li#${this.getActiveDescendantId()}`);
            if (!activeItem || !this.list) {
                return;
            }
            const scrollParent = this.list.parentElement;
            // if list item is out of view (even partially) on top or bottom of list, scroll to it
            if (activeItem.offsetTop < scrollParent.scrollTop ||
                activeItem.offsetTop + activeItem.offsetHeight >
                    scrollParent.offsetTop + scrollParent.offsetHeight) {
                activeItem.scrollIntoView({ behavior: "smooth" });
            }
        };
        this.keydownHandler = (event) => {
            const { key } = event;
            switch (key) {
                case "ArrowUp":
                    event.preventDefault();
                    this.shiftActiveItemIndex(-1);
                    break;
                case "ArrowDown":
                    event.preventDefault();
                    this.shiftActiveItemIndex(1);
                    break;
                case "Home":
                    event.preventDefault();
                    this.activeItemIndex = 0;
                    this.scrollToActiveItem();
                    break;
                case "End":
                    if (!this.open) {
                        return;
                    }
                    event.preventDefault();
                    this.activeItemIndex = this.getResultsLength() - 1;
                    this.scrollToActiveItem();
                    break;
                case "Escape":
                    this.reset();
                    event.preventDefault();
                    this.waitAndFocusButton();
                    break;
                case "Enter":
                    const activeUser = this.getActiveUser();
                    if (activeUser) {
                        this.selectedUser = activeUser;
                        this.arcgisUserPickerSelect.emit(activeUser);
                        event.preventDefault();
                        this.reset();
                        this.waitAndFocusButton();
                    }
                    break;
            }
        };
        this.searchUsers = async () => {
            const { portal, query, search, group } = this;
            const response = await searchUsers({ portal, query, searchTerm: search, group });
            this.searchResults = response;
            this.loading = false;
            this.activeItemIndex = 0;
            this.open = true;
        };
        this.inputHandler = (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.d)(this.searchUsers, 300);
        this.renderUser = (user, i) => {
            const { portal, selectedUser, activeItemIndex } = this;
            const uniqueId = this.formatUniqueUserId(user);
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { "aria-selected": (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.username) === user.username, key: uniqueId, id: uniqueId, role: "option", tabindex: "-1", class: {
                    "list-item": true,
                    "list-item--active": activeItemIndex === i
                }, onClick: () => {
                    this.selectedUser = user;
                    this.arcgisUserPickerSelect.emit(user);
                    this.reset();
                } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { class: "user-avatar", user: user, scale: "m", portal: portal, showName: true, description: user.username })));
        };
        this.portal = undefined;
        this.query = "";
        this.group = undefined;
        this.config = undefined;
        this.selectedUser = undefined;
        this.selection = "single";
        this.status = "idle";
        this.search = "";
        this.activeItemIndex = 0;
        this.searchResults = undefined;
        this.open = false;
        this.loading = true;
    }
    async componentWillLoad() {
        var _a;
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.el);
        this.i18n = locale[0];
        this.lang = locale[1];
        (_a = this.config) !== null && _a !== void 0 ? _a : (this.config = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_6__.c === null || _config_75adf962_js__WEBPACK_IMPORTED_MODULE_6__.c === void 0 ? void 0 : _config_75adf962_js__WEBPACK_IMPORTED_MODULE_6__.c.config);
    }
    async setFocus() {
        var _a;
        (_a = this.input) === null || _a === void 0 ? void 0 : _a.focus();
    }
    reset() {
        this.search = "";
        this.activeItemIndex = 0;
        this.open = false;
        this.loading = true;
    }
    getResultsLength() {
        var _a, _b;
        return ((_b = (_a = this.searchResults) === null || _a === void 0 ? void 0 : _a.results) === null || _b === void 0 ? void 0 : _b.length) || 0;
    }
    getActiveUser() {
        var _a, _b;
        return (_b = (_a = this.searchResults) === null || _a === void 0 ? void 0 : _a.results) === null || _b === void 0 ? void 0 : _b[this.activeItemIndex];
    }
    getActiveDescendantId() {
        const user = this.getActiveUser();
        return this.formatUniqueUserId(user);
    }
    formatUniqueUserId(user) {
        return (user === null || user === void 0 ? void 0 : user.username) ? `${user.username.replace(".", "")}-${this.uniqueId}` : "";
    }
    shiftActiveItemIndex(delta) {
        const length = this.getResultsLength();
        const newIndex = (this.activeItemIndex + length + delta) % length;
        this.activeItemIndex = newIndex;
        this.scrollToActiveItem();
    }
    async waitAndFocusButton() {
        var _a;
        await (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.t)(200);
        (_a = this.button) === null || _a === void 0 ? void 0 : _a.focus();
    }
    render() {
        var _a;
        const { i18n, portal, selectedUser, referenceElement, uniqueId, open, loading, lang, status } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "wrapper" }, open || !selectedUser ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "search-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "search", scale: "s", class: "search" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("label", { class: "screen-readers-only", htmlFor: `input-${uniqueId}`, id: `label-${uniqueId}` }, i18n.selectUser), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { ref: (el) => (this.input = el), class: "input", id: `input-${uniqueId}`, role: "combobox", "aria-autocomplete": "none", "aria-expanded": "false", "aria-controls": `listbox-${uniqueId}`, "aria-activedescendant": this.getActiveDescendantId(), onInput: (e) => {
                this.search = e.currentTarget.value;
                this.loading = true;
                this.open = true;
                this.inputHandler();
            }, onBlur: async () => {
                // need to wait here to make sure the click of list items can go through
                await (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_3__.t)(300);
                this.open = false;
            }, onFocus: () => {
                if (this.search || !this.searchResults) {
                    this.searchUsers();
                }
            }, onKeyDown: this.keydownHandler, placeholder: this.i18n.searchMembers, type: "text", value: this.search, onClick: (e) => e.stopPropagation() }), !!this.search && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: "x", "aria-label": this.i18n.clear, onClick: () => {
                this.search = "";
                this.searchUsers();
            }, tabIndex: -1 }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "x", scale: "m", class: "x--icon" }))))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { class: {
                edit: true,
                invalid: status === "invalid"
            }, onClick: () => {
                this.open = true;
                this.searchUsers();
                setTimeout(() => {
                    var _a;
                    (_a = this.input) === null || _a === void 0 ? void 0 : _a.focus();
                }, 200);
            }, "aria-label": selectedUser
                ? i18n.editSelection.replace("${name}", (0,_user_0fa9ff5a_js__WEBPACK_IMPORTED_MODULE_5__.g)(selectedUser, lang))
                : i18n.selectUser, ref: (el) => (this.button = el) }, selectedUser ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-user-avatar", { class: "user-avatar", user: selectedUser, scale: "m", portal: portal, showName: true, description: selectedUser.username }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "pencil", scale: "s" }))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, i18n.searchMembers, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-down", scale: "s" }))))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "reference-element", ref: (el) => (this.referenceElement = el) }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "input-message" })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { class: "popover", label: i18n.selectUser, pointerDisabled: true, referenceElement: referenceElement, placement: "bottom-start", open: open && (loading || !!this.getResultsLength()), focusTrapDisabled: true, offsetDistance: 2 }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "list-wrapper" }, loading ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { label: "Loading", class: "loader" })) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("ul", { ref: (el) => (this.list = el), "aria-label": i18n.members, "aria-multiselectable": "false", class: "list", id: `listbox-${uniqueId}`, role: "listbox", tabIndex: -1 }, (_a = this.searchResults) === null || _a === void 0 ? void 0 : _a.results.map(this.renderUser)))))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisUserPicker.style = arcgisUserPickerCss;



//# sourceMappingURL=arcgis-user-picker.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js":
/*!**********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ guid)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
function generateId(counts) {
    return counts
        .map((count) => {
        let out = "";
        for (let i = 0; i < count; i++) {
            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return out;
    })
        .join("-");
}
const guid = () => generateId([2, 1, 1, 1, 3]);



//# sourceMappingURL=guid-aeaed84d.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ HIDDEN_ITEMS_QUERY)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const HIDDEN_ITEMS_QUERY = `-type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage" -type:"Indoors Map Configuration" -typekeywords:"SMX"`;



//# sourceMappingURL=query-d62660d4.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTUxMzg5OS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzRIO0FBQ3REO0FBQ3ZCO0FBQ3dCO0FBQ0U7QUFDbkI7QUFDRTtBQUM3QjtBQUNTO0FBQ0Q7QUFDUjtBQUNFO0FBQ0E7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBMEM7QUFDdkUsa0NBQWtDLFdBQVc7QUFDN0MsbUJBQW1CLHNEQUFjLFNBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrSEFBK0gsTUFBTSxhQUFhLEtBQUs7QUFDdko7QUFDQSx5Q0FBeUMsdURBQXVEO0FBQ2hHLFdBQVcsc0RBQU8sc0JBQXNCLGtDQUFrQztBQUMxRSxZQUFZO0FBQ1osWUFBWSxNQUFNLE1BQU0sRUFBRSxpREFBaUQsRUFBRSxlQUFlLEVBQUUsWUFBWSxHQUFHO0FBQzdHOztBQUVBLG1DQUFtQyxrQkFBa0IsY0FBYyxXQUFXLE1BQU0sbURBQW1ELG9CQUFvQixzQkFBc0Isc0JBQXNCLGFBQWEsV0FBVyxlQUFlLHdCQUF3QixxQkFBcUIsZ0JBQWdCLG1CQUFtQiw4QkFBOEIsZ0JBQWdCLHVCQUF1QixtQkFBbUIsbURBQW1ELHFCQUFxQixzQkFBc0Isb0JBQW9CLHVCQUF1QixrQ0FBa0MsMEJBQTBCLDBCQUEwQiw2RkFBNkYsWUFBWSxpREFBaUQsWUFBWSw2Q0FBNkMsb0JBQW9CLFNBQVMsZ0RBQWdELGVBQWUsaURBQWlELHFCQUFxQixrQkFBa0IsVUFBVSxXQUFXLFVBQVUsWUFBWSxnQkFBZ0Isc0JBQXNCLG1CQUFtQixlQUFlLGdCQUFnQixrQkFBa0IsY0FBYyxXQUFXLFFBQVEsb0JBQW9CLGtCQUFrQixXQUFXLGdCQUFnQixtQkFBbUIsa0NBQWtDLDJCQUEyQixHQUFHLGtCQUFrQixR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YUFBYSwrSUFBK0kscUJBQXFCLHFEQUFDLGFBQWE7QUFDL0w7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCLEVBQUUscURBQUMsbUJBQW1CLHlDQUF5QyxTQUFTLHFEQUFDLGFBQWE7QUFDbkg7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixnREFBZ0QsS0FBSyxHQUFHLG9EQUFXO0FBQ25FLG9FQUFvRSxrQkFBa0IscURBQUMsQ0FBQyxpREFBUSxRQUFRLHFEQUFDLHlCQUF5QiwwSEFBMEgsR0FBRyxxREFBQyxtQkFBbUIsNEJBQTRCLE9BQU8scURBQUMsQ0FBQyxpREFBUSw0QkFBNEIscURBQUMsbUJBQW1CLGtDQUFrQyxPQUFPLHFEQUFDLFVBQVUsdUVBQXVFLEdBQUcscURBQUMsV0FBVyx1QkFBdUIsSUFBSSxxREFBQyxzQkFBc0Isa09BQWtPLEVBQUUscURBQUMsVUFBVSx1QkFBdUIsYUFBYSxxREFBQyxxQkFBcUIsbUNBQW1DLE1BQU0scURBQUMsU0FBUywwSEFBMEgsU0FBUyxrQ0FBa0M7QUFDN2lDO0FBQ0EsZUFBZSxPQUFPLHFEQUFVO0FBQ2hDO0FBQ0E7O0FBRWtEOztBQUVsRDs7Ozs7Ozs7Ozs7Ozs7QUN0TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRXFCOztBQUVyQjs7Ozs7Ozs7Ozs7Ozs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUM7O0FBRW5DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLXVzZXItcGlja2VyLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2d1aWQtYWVhZWQ4NGQuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vcXVlcnktZDYyNjYwZDQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQsIEggYXMgSG9zdCwgZCBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3MgfSBmcm9tICcuL2xvY2FsZS0wNTBiNmRiOS5qcyc7XG5pbXBvcnQgeyBnIGFzIGd1aWQgfSBmcm9tICcuL2d1aWQtYWVhZWQ4NGQuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWJvdW5jZSwgdCBhcyB0aW1lb3V0IH0gZnJvbSAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCB7IHIgYXMgcmVxdWVzdCwgZyBhcyBnZXRSZXN0QmFzZVVybCB9IGZyb20gJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0RnVsbE5hbWUgfSBmcm9tICcuL3VzZXItMGZhOWZmNWEuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLTc1YWRmOTYyLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5pbXBvcnQgJy4vcXVlcnktZDYyNjYwZDQuanMnO1xuaW1wb3J0ICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcblxuZnVuY3Rpb24gaXNCYWNrZWRCeUVudGVycHJpc2VHcm91cChncm91cCkge1xuICAgIHJldHVybiAoZ3JvdXAgPT09IG51bGwgfHwgZ3JvdXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyb3VwLnByb3ZpZGVyKSA9PT0gXCJlbnRlcnByaXNlXCIgJiYgISEoZ3JvdXAgPT09IG51bGwgfHwgZ3JvdXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyb3VwLnByb3ZpZGVyR3JvdXBOYW1lKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFVzZXJzKHsgcG9ydGFsLCBxdWVyeSwgc2VhcmNoVGVybSwgZ3JvdXAsIGNvbmZpZyB9KSB7XG4gICAgY29uc3QgdGVybSA9IHNlYXJjaFRlcm0gPyBgKCR7c2VhcmNoVGVybX0pIGAgOiBcIlwiO1xuICAgIGNvbnN0IHVybCA9IGAke2dldFJlc3RCYXNlVXJsKHBvcnRhbCl9cG9ydGFscy9zZWxmL3VzZXJzL3NlYXJjaGA7XG4gICAgY29uc3QgZXhjbHVkZWRVc2VycyA9IHBvcnRhbC5pc1BvcnRhbFxuICAgICAgICA/IFwiLXVzZXJuYW1lOmVzcmlfbGl2aW5nYXRsYXMgLXVzZXJuYW1lOmVzcmlfYm91bmRhcmllcyAtdXNlcm5hbWU6ZXNyaV9kZW1vZ3JhcGhpY3MgLXVzZXJuYW1lOmVzcmlfbmF2XCJcbiAgICAgICAgOiBcIlwiO1xuICAgIC8vIHN1YnRyYWN0IHN5c3RlbSB1c2Vyc1xuICAgIGNvbnN0IHN5c3RlbVVzZXJzID0gKChjb25maWcgPT09IG51bGwgfHwgY29uZmlnID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWcuc3lzdGVtVXNlcnMpIHx8IFtdKS5yZWR1Y2UoKHByZXYsIHVzZXIpID0+IGAke3ByZXZ9IC11c2VybmFtZTogJHt1c2VyfWAsIFwiXCIpO1xuICAgIGNvbnN0IG9ubGluZUZyb21Qb3J0YWwgPSAodXJsID09PSBudWxsIHx8IHVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXJsLmluY2x1ZGVzKFwid3d3LmFyY2dpcy5jb21cIikpICYmIHBvcnRhbC5pc1BvcnRhbDtcbiAgICBjb25zdCBvcHRpb25zID0gb25saW5lRnJvbVBvcnRhbCA/IHsgZGlzYWJsZUlkZW50aXR5TG9va3VwOiB0cnVlLCBhZGRUb2tlbk1hbnVhbGx5OiBmYWxzZSB9IDoge307XG4gICAgcmV0dXJuIHJlcXVlc3QodXJsLCBPYmplY3QuYXNzaWduKHsgbnVtOiAxMDAsIHNvcnRGaWVsZDogXCJyZWxldmFuY2VcIiB9LCAoaXNCYWNrZWRCeUVudGVycHJpc2VHcm91cChncm91cClcbiAgICAgICAgPyB7IG5hbWU6IHRlcm0gfVxuICAgICAgICA6IHsgcTogYCR7dGVybX0gJHtxdWVyeSAhPT0gbnVsbCAmJiBxdWVyeSAhPT0gdm9pZCAwID8gcXVlcnkgOiBcIlwifSAke2V4Y2x1ZGVkVXNlcnN9ICR7c3lzdGVtVXNlcnN9YCB9KSksIG9wdGlvbnMpO1xufVxuXG5jb25zdCBhcmNnaXNVc2VyUGlja2VyQ3NzID0gXCI6aG9zdHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCV9LmVkaXR7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci1pbnB1dCk7Zm9udC1mYW1pbHk6aW5oZXJpdDttYXJnaW4tYm90dG9tOjAuNzVyZW07Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6ZmxleDt3aWR0aDoxMDAlO2N1cnNvcjpwb2ludGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO3BhZGRpbmctbGVmdDowLjc1cmVtO3BhZGRpbmctcmlnaHQ6MC43NXJlbTtwYWRkaW5nLXRvcDowLjc1cmVtO3BhZGRpbmctYm90dG9tOjAuNzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpO3RleHQtZGVjb3JhdGlvbi1saW5lOm5vbmU7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDt0cmFuc2l0aW9uOmFsbCB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpIGVhc2UtaW4tb3V0IDBzLCBvdXRsaW5lIDBzLCBvdXRsaW5lLW9mZnNldCAwc30uZWRpdDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYmFja2dyb3VuZCl9LmVkaXQ6Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCk7b3V0bGluZS1vZmZzZXQ6LTJweH0uaW52YWxpZHtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX0uaW52YWxpZDpmb2N1c3tvdXRsaW5lLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlcil9LnNjcmVlbi1yZWFkZXJzLW9ubHl7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MXB4O2hlaWdodDoxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfS5zZWFyY2gtd3JhcHBlcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCV9LnNlYXJjaHtwb2ludGVyLWV2ZW50czpub25lO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTA7bWFyZ2luLXRvcDoxcmVtO2ZvbnQtc2l6ZTowLjg3NXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyk7aW5zZXQtaW5saW5lLXN0YXJ0OjAuNzVyZW19Lnh7cG9zaXRpb246YWJzb2x1dGU7dG9wOjBweDt6LWluZGV4OjEwO21hcmdpbi10b3A6MC4yNXJlbTtjdXJzb3I6cG9pbnRlcjtib3JkZXItc3R5bGU6bm9uZTtwYWRkaW5nOjAuNXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSk7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4O2luc2V0LWlubGluZS1lbmQ6MC4yNXJlbTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fS5pbnB1dHtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjA7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjNyZW07d2lkdGg6MTAwJTtwYWRkaW5nLXRvcDowLjc1cmVtO3BhZGRpbmctYm90dG9tOjAuNzVyZW07cGFkZGluZy1sZWZ0OjIuNXJlbTtwYWRkaW5nLXJpZ2h0OjIuNXJlbTtmb250LXNpemU6MC44NzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpOy0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyk7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCB0ZXh0LWRlY29yYXRpb24tY29sb3IsIGZpbGwsIHN0cm9rZSwgb3BhY2l0eSwgYm94LXNoYWRvdywgdHJhbnNmb3JtLCBmaWx0ZXIsIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyO3RyYW5zaXRpb24tcHJvcGVydHk6Y29sb3IsIGJhY2tncm91bmQtY29sb3IsIGJvcmRlci1jb2xvciwgdGV4dC1kZWNvcmF0aW9uLWNvbG9yLCBmaWxsLCBzdHJva2UsIG9wYWNpdHksIGJveC1zaGFkb3csIHRyYW5zZm9ybSwgZmlsdGVyLCBiYWNrZHJvcC1maWx0ZXI7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCB0ZXh0LWRlY29yYXRpb24tY29sb3IsIGZpbGwsIHN0cm9rZSwgb3BhY2l0eSwgYm94LXNoYWRvdywgdHJhbnNmb3JtLCBmaWx0ZXIsIGJhY2tkcm9wLWZpbHRlciwgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtcztib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLWlucHV0KTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2ZvbnQtZmFtaWx5OmluaGVyaXR9LmlucHV0Ojotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9ue2Rpc3BsYXk6bm9uZX0uaW5wdXQ6Oi1tcy1jbGVhcntkaXNwbGF5Om5vbmV9LmlucHV0OmZvY3Vzey0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyk7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCk7b3V0bGluZS1vZmZzZXQ6LTJweH0ucG9wb3Zlcnt6LWluZGV4OjIwO3dpZHRoOjEwMCV9LmxvYWRlcntwYWRkaW5nLXRvcDo2cmVtO3BhZGRpbmctYm90dG9tOjZyZW19Lmxpc3Qtd3JhcHBlcntoZWlnaHQ6YXV0bztvdmVyZmxvdzphdXRvO21heC1oZWlnaHQ6MTZyZW19Lmxpc3R7bWFyZ2luOjBweDt3aWR0aDoxMDAlO2xpc3Qtc3R5bGUtdHlwZTpub25lO3BhZGRpbmc6MHB4fS5saXN0LWl0ZW17Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjNyZW07d2lkdGg6MTAwJTtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nLXRvcDowLjVyZW07cGFkZGluZy1ib3R0b206MC41cmVtO3BhZGRpbmctbGVmdDoyLjVyZW07cGFkZGluZy1yaWdodDoyLjVyZW07dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCB0ZXh0LWRlY29yYXRpb24tY29sb3IsIGZpbGwsIHN0cm9rZSwgb3BhY2l0eSwgYm94LXNoYWRvdywgdHJhbnNmb3JtLCBmaWx0ZXIsIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyO3RyYW5zaXRpb24tcHJvcGVydHk6Y29sb3IsIGJhY2tncm91bmQtY29sb3IsIGJvcmRlci1jb2xvciwgdGV4dC1kZWNvcmF0aW9uLWNvbG9yLCBmaWxsLCBzdHJva2UsIG9wYWNpdHksIGJveC1zaGFkb3csIHRyYW5zZm9ybSwgZmlsdGVyLCBiYWNrZHJvcC1maWx0ZXI7dHJhbnNpdGlvbi1wcm9wZXJ0eTpjb2xvciwgYmFja2dyb3VuZC1jb2xvciwgYm9yZGVyLWNvbG9yLCB0ZXh0LWRlY29yYXRpb24tY29sb3IsIGZpbGwsIHN0cm9rZSwgb3BhY2l0eSwgYm94LXNoYWRvdywgdHJhbnNmb3JtLCBmaWx0ZXIsIGJhY2tkcm9wLWZpbHRlciwgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtcztib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX0ubGlzdC1pdGVtOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1iYWNrZ3JvdW5kKX0ubGlzdC1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbS13aWR0aDowcHh9Lmxpc3QtaXRlbS0tYWN0aXZle291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpO291dGxpbmUtb2Zmc2V0Oi0ycHh9XCI7XG5cbmNvbnN0IEFyY2dpc1VzZXJQaWNrZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmFyY2dpc1VzZXJQaWNrZXJTZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1VzZXJQaWNrZXJTZWxlY3RcIiwgNyk7XG4gICAgICAgIHRoaXMudW5pcXVlSWQgPSBndWlkKCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9BY3RpdmVJdGVtID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlSXRlbSA9IChfYSA9IHRoaXMubGlzdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnF1ZXJ5U2VsZWN0b3IoYGxpIyR7dGhpcy5nZXRBY3RpdmVEZXNjZW5kYW50SWQoKX1gKTtcbiAgICAgICAgICAgIGlmICghYWN0aXZlSXRlbSB8fCAhdGhpcy5saXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsUGFyZW50ID0gdGhpcy5saXN0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAvLyBpZiBsaXN0IGl0ZW0gaXMgb3V0IG9mIHZpZXcgKGV2ZW4gcGFydGlhbGx5KSBvbiB0b3Agb3IgYm90dG9tIG9mIGxpc3QsIHNjcm9sbCB0byBpdFxuICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW0ub2Zmc2V0VG9wIDwgc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCB8fFxuICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0ub2Zmc2V0VG9wICsgYWN0aXZlSXRlbS5vZmZzZXRIZWlnaHQgPlxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxQYXJlbnQub2Zmc2V0VG9wICsgc2Nyb2xsUGFyZW50Lm9mZnNldEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5rZXlkb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBrZXkgfSA9IGV2ZW50O1xuICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJyb3dVcFwiOlxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0QWN0aXZlSXRlbUluZGV4KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkFycm93RG93blwiOlxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0QWN0aXZlSXRlbUluZGV4KDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiSG9tZVwiOlxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1JbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9BY3RpdmVJdGVtKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1JbmRleCA9IHRoaXMuZ2V0UmVzdWx0c0xlbmd0aCgpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2FpdEFuZEZvY3VzQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFbnRlclwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVVc2VyID0gdGhpcy5nZXRBY3RpdmVVc2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVVc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlciA9IGFjdGl2ZVVzZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFyY2dpc1VzZXJQaWNrZXJTZWxlY3QuZW1pdChhY3RpdmVVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRBbmRGb2N1c0J1dHRvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlYXJjaFVzZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBwb3J0YWwsIHF1ZXJ5LCBzZWFyY2gsIGdyb3VwIH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZWFyY2hVc2Vycyh7IHBvcnRhbCwgcXVlcnksIHNlYXJjaFRlcm06IHNlYXJjaCwgZ3JvdXAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHMgPSByZXNwb25zZTtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJdGVtSW5kZXggPSAwO1xuICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEhhbmRsZXIgPSBkZWJvdW5jZSh0aGlzLnNlYXJjaFVzZXJzLCAzMDApO1xuICAgICAgICB0aGlzLnJlbmRlclVzZXIgPSAodXNlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBwb3J0YWwsIHNlbGVjdGVkVXNlciwgYWN0aXZlSXRlbUluZGV4IH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgdW5pcXVlSWQgPSB0aGlzLmZvcm1hdFVuaXF1ZVVzZXJJZCh1c2VyKTtcbiAgICAgICAgICAgIHJldHVybiAoaChcImxpXCIsIHsgXCJhcmlhLXNlbGVjdGVkXCI6IChzZWxlY3RlZFVzZXIgPT09IG51bGwgfHwgc2VsZWN0ZWRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFVzZXIudXNlcm5hbWUpID09PSB1c2VyLnVzZXJuYW1lLCBrZXk6IHVuaXF1ZUlkLCBpZDogdW5pcXVlSWQsIHJvbGU6IFwib3B0aW9uXCIsIHRhYmluZGV4OiBcIi0xXCIsIGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwibGlzdC1pdGVtXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwibGlzdC1pdGVtLS1hY3RpdmVcIjogYWN0aXZlSXRlbUluZGV4ID09PSBpXG4gICAgICAgICAgICAgICAgfSwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVXNlciA9IHVzZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJjZ2lzVXNlclBpY2tlclNlbGVjdC5lbWl0KHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfSB9LCBoKFwiYXJjZ2lzLXVzZXItYXZhdGFyXCIsIHsgY2xhc3M6IFwidXNlci1hdmF0YXJcIiwgdXNlcjogdXNlciwgc2NhbGU6IFwibVwiLCBwb3J0YWw6IHBvcnRhbCwgc2hvd05hbWU6IHRydWUsIGRlc2NyaXB0aW9uOiB1c2VyLnVzZXJuYW1lIH0pKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucG9ydGFsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgdGhpcy5ncm91cCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb25maWcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVc2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IFwic2luZ2xlXCI7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gXCJpZGxlXCI7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gXCJcIjtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnNlYXJjaFJlc3VsdHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBsb2NhbGUgPSBhd2FpdCBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzKHRoaXMuZWwpO1xuICAgICAgICB0aGlzLmkxOG4gPSBsb2NhbGVbMF07XG4gICAgICAgIHRoaXMubGFuZyA9IGxvY2FsZVsxXTtcbiAgICAgICAgKF9hID0gdGhpcy5jb25maWcpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6ICh0aGlzLmNvbmZpZyA9IGNvbmZpZ1N0YXRlID09PSBudWxsIHx8IGNvbmZpZ1N0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25maWdTdGF0ZS5jb25maWcpO1xuICAgIH1cbiAgICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSB0aGlzLmlucHV0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gXCJcIjtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtSW5kZXggPSAwO1xuICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0UmVzdWx0c0xlbmd0aCgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuICgoX2IgPSAoX2EgPSB0aGlzLnNlYXJjaFJlc3VsdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZXN1bHRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGVuZ3RoKSB8fCAwO1xuICAgIH1cbiAgICBnZXRBY3RpdmVVc2VyKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICByZXR1cm4gKF9iID0gKF9hID0gdGhpcy5zZWFyY2hSZXN1bHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVzdWx0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3RoaXMuYWN0aXZlSXRlbUluZGV4XTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlRGVzY2VuZGFudElkKCkge1xuICAgICAgICBjb25zdCB1c2VyID0gdGhpcy5nZXRBY3RpdmVVc2VyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFVuaXF1ZVVzZXJJZCh1c2VyKTtcbiAgICB9XG4gICAgZm9ybWF0VW5pcXVlVXNlcklkKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuICh1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXIudXNlcm5hbWUpID8gYCR7dXNlci51c2VybmFtZS5yZXBsYWNlKFwiLlwiLCBcIlwiKX0tJHt0aGlzLnVuaXF1ZUlkfWAgOiBcIlwiO1xuICAgIH1cbiAgICBzaGlmdEFjdGl2ZUl0ZW1JbmRleChkZWx0YSkge1xuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmdldFJlc3VsdHNMZW5ndGgoKTtcbiAgICAgICAgY29uc3QgbmV3SW5kZXggPSAodGhpcy5hY3RpdmVJdGVtSW5kZXggKyBsZW5ndGggKyBkZWx0YSkgJSBsZW5ndGg7XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbUluZGV4ID0gbmV3SW5kZXg7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9BY3RpdmVJdGVtKCk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRBbmRGb2N1c0J1dHRvbigpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBhd2FpdCB0aW1lb3V0KDIwMCk7XG4gICAgICAgIChfYSA9IHRoaXMuYnV0dG9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHsgaTE4biwgcG9ydGFsLCBzZWxlY3RlZFVzZXIsIHJlZmVyZW5jZUVsZW1lbnQsIHVuaXF1ZUlkLCBvcGVuLCBsb2FkaW5nLCBsYW5nLCBzdGF0dXMgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwid3JhcHBlclwiIH0sIG9wZW4gfHwgIXNlbGVjdGVkVXNlciA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VhcmNoLXdyYXBwZXJcIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJzZWFyY2hcIiwgc2NhbGU6IFwic1wiLCBjbGFzczogXCJzZWFyY2hcIiB9KSwgaChcImxhYmVsXCIsIHsgY2xhc3M6IFwic2NyZWVuLXJlYWRlcnMtb25seVwiLCBodG1sRm9yOiBgaW5wdXQtJHt1bmlxdWVJZH1gLCBpZDogYGxhYmVsLSR7dW5pcXVlSWR9YCB9LCBpMThuLnNlbGVjdFVzZXIpLCBoKFwiaW5wdXRcIiwgeyByZWY6IChlbCkgPT4gKHRoaXMuaW5wdXQgPSBlbCksIGNsYXNzOiBcImlucHV0XCIsIGlkOiBgaW5wdXQtJHt1bmlxdWVJZH1gLCByb2xlOiBcImNvbWJvYm94XCIsIFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJub25lXCIsIFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsIFwiYXJpYS1jb250cm9sc1wiOiBgbGlzdGJveC0ke3VuaXF1ZUlkfWAsIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IHRoaXMuZ2V0QWN0aXZlRGVzY2VuZGFudElkKCksIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSBlLmN1cnJlbnRUYXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRIYW5kbGVyKCk7XG4gICAgICAgICAgICB9LCBvbkJsdXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIHdhaXQgaGVyZSB0byBtYWtlIHN1cmUgdGhlIGNsaWNrIG9mIGxpc3QgaXRlbXMgY2FuIGdvIHRocm91Z2hcbiAgICAgICAgICAgICAgICBhd2FpdCB0aW1lb3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9LCBvbkZvY3VzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoIHx8ICF0aGlzLnNlYXJjaFJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hVc2VycygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIG9uS2V5RG93bjogdGhpcy5rZXlkb3duSGFuZGxlciwgcGxhY2Vob2xkZXI6IHRoaXMuaTE4bi5zZWFyY2hNZW1iZXJzLCB0eXBlOiBcInRleHRcIiwgdmFsdWU6IHRoaXMuc2VhcmNoLCBvbkNsaWNrOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSB9KSwgISF0aGlzLnNlYXJjaCAmJiAoaChcImJ1dHRvblwiLCB7IGNsYXNzOiBcInhcIiwgXCJhcmlhLWxhYmVsXCI6IHRoaXMuaTE4bi5jbGVhciwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJzKCk7XG4gICAgICAgICAgICB9LCB0YWJJbmRleDogLTEgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwieFwiLCBzY2FsZTogXCJtXCIsIGNsYXNzOiBcIngtLWljb25cIiB9KSkpKSkgOiAoaChcImJ1dHRvblwiLCB7IGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgZWRpdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkOiBzdGF0dXMgPT09IFwiaW52YWxpZFwiXG4gICAgICAgICAgICB9LCBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFVzZXJzKCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gdGhpcy5pbnB1dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgIH0sIFwiYXJpYS1sYWJlbFwiOiBzZWxlY3RlZFVzZXJcbiAgICAgICAgICAgICAgICA/IGkxOG4uZWRpdFNlbGVjdGlvbi5yZXBsYWNlKFwiJHtuYW1lfVwiLCBnZXRGdWxsTmFtZShzZWxlY3RlZFVzZXIsIGxhbmcpKVxuICAgICAgICAgICAgICAgIDogaTE4bi5zZWxlY3RVc2VyLCByZWY6IChlbCkgPT4gKHRoaXMuYnV0dG9uID0gZWwpIH0sIHNlbGVjdGVkVXNlciA/IChoKEZyYWdtZW50LCBudWxsLCBoKFwiYXJjZ2lzLXVzZXItYXZhdGFyXCIsIHsgY2xhc3M6IFwidXNlci1hdmF0YXJcIiwgdXNlcjogc2VsZWN0ZWRVc2VyLCBzY2FsZTogXCJtXCIsIHBvcnRhbDogcG9ydGFsLCBzaG93TmFtZTogdHJ1ZSwgZGVzY3JpcHRpb246IHNlbGVjdGVkVXNlci51c2VybmFtZSB9KSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwicGVuY2lsXCIsIHNjYWxlOiBcInNcIiB9KSkpIDogKGgoRnJhZ21lbnQsIG51bGwsIGkxOG4uc2VhcmNoTWVtYmVycywgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBcInNcIiB9KSkpKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJyZWZlcmVuY2UtZWxlbWVudFwiLCByZWY6IChlbCkgPT4gKHRoaXMucmVmZXJlbmNlRWxlbWVudCA9IGVsKSB9KSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImlucHV0LW1lc3NhZ2VcIiB9KSksIGgoXCJjYWxjaXRlLXBvcG92ZXJcIiwgeyBjbGFzczogXCJwb3BvdmVyXCIsIGxhYmVsOiBpMThuLnNlbGVjdFVzZXIsIHBvaW50ZXJEaXNhYmxlZDogdHJ1ZSwgcmVmZXJlbmNlRWxlbWVudDogcmVmZXJlbmNlRWxlbWVudCwgcGxhY2VtZW50OiBcImJvdHRvbS1zdGFydFwiLCBvcGVuOiBvcGVuICYmIChsb2FkaW5nIHx8ICEhdGhpcy5nZXRSZXN1bHRzTGVuZ3RoKCkpLCBmb2N1c1RyYXBEaXNhYmxlZDogdHJ1ZSwgb2Zmc2V0RGlzdGFuY2U6IDIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImxpc3Qtd3JhcHBlclwiIH0sIGxvYWRpbmcgPyAoaChcImNhbGNpdGUtbG9hZGVyXCIsIHsgbGFiZWw6IFwiTG9hZGluZ1wiLCBjbGFzczogXCJsb2FkZXJcIiB9KSkgOiAoaChcInVsXCIsIHsgcmVmOiAoZWwpID0+ICh0aGlzLmxpc3QgPSBlbCksIFwiYXJpYS1sYWJlbFwiOiBpMThuLm1lbWJlcnMsIFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIjogXCJmYWxzZVwiLCBjbGFzczogXCJsaXN0XCIsIGlkOiBgbGlzdGJveC0ke3VuaXF1ZUlkfWAsIHJvbGU6IFwibGlzdGJveFwiLCB0YWJJbmRleDogLTEgfSwgKF9hID0gdGhpcy5zZWFyY2hSZXN1bHRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVzdWx0cy5tYXAodGhpcy5yZW5kZXJVc2VyKSkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc1VzZXJQaWNrZXIuc3R5bGUgPSBhcmNnaXNVc2VyUGlja2VyQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNVc2VyUGlja2VyIGFzIGFyY2dpc191c2VyX3BpY2tlciB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtdXNlci1waWNrZXIuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUlkKGNvdW50cykge1xuICAgIHJldHVybiBjb3VudHNcbiAgICAgICAgLm1hcCgoY291bnQpID0+IHtcbiAgICAgICAgbGV0IG91dCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgb3V0ICs9ICgoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pXG4gICAgICAgIC5qb2luKFwiLVwiKTtcbn1cbmNvbnN0IGd1aWQgPSAoKSA9PiBnZW5lcmF0ZUlkKFsyLCAxLCAxLCAxLCAzXSk7XG5cbmV4cG9ydCB7IGd1aWQgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWlkLWFlYWVkODRkLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuY29uc3QgSElEREVOX0lURU1TX1FVRVJZID0gYC10eXBlOlwiQ29kZSBBdHRhY2htZW50XCIgLXR5cGU6XCJGZWF0dXJlZCBJdGVtc1wiIC10eXBlOlwiU3ltYm9sIFNldFwiIC10eXBlOlwiQ29sb3IgU2V0XCIgLXR5cGU6XCJXaW5kb3dzIFZpZXdlciBBZGQgSW5cIiAtdHlwZTpcIldpbmRvd3MgVmlld2VyIENvbmZpZ3VyYXRpb25cIiAtdHlwZTpcIk1hcCBBcmVhXCIgLXR5cGVrZXl3b3JkczpcIk1hcEFyZWFQYWNrYWdlXCIgLXR5cGU6XCJJbmRvb3JzIE1hcCBDb25maWd1cmF0aW9uXCIgLXR5cGVrZXl3b3JkczpcIlNNWFwiYDtcblxuZXhwb3J0IHsgSElEREVOX0lURU1TX1FVRVJZIGFzIEggfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktZDYyNjYwZDQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9