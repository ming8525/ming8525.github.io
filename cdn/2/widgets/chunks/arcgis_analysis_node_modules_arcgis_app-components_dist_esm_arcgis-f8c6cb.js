"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f8c6cb"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-database-credentials.entry.js":
/*!********************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-database-credentials.entry.js ***!
  \********************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_database_credentials: () => (/* binding */ ArcgisNewItemPagesDataStoreDatabaseCredentials)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-store-e2ae6a67.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e2ae6a67.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-store-8e83fb7a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8e83fb7a.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _data_store_8f8ac640_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./data-store-8f8ac640.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8f8ac640.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



































const arcgisNewItemPagesDataStoreDatabaseCredentialsCss = ".configure-form{margin-top:1.5rem}.fill-credentials{display:flex}.credentials{flex:1 1 0%}.password{margin-inline-start:3rem}.info-icon{color:var(--calcite-color-brand)}.hidden{display:none}calcite-label{--calcite-label-margin-bottom:1.25rem}.asterisk{color:var(--calcite-color-status-danger)}";

const ArcgisNewItemPagesDataStoreDatabaseCredentials = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.handleFileInputChange = (event) => {
            this.processFile(event.target.files[0]);
        };
        this.authenticationType = "serviceAuthentication";
        this.loading = false;
        this.loaderType = "indeterminate";
        this.loaderMessage = undefined;
        this.refreshToken = undefined;
        this.keyFileContents = undefined;
        this.projectId = undefined;
        this.defaultDataset = undefined;
        this.server = undefined;
        this.user = undefined;
        this.password = undefined;
        this.role = undefined;
        this.database = undefined;
        this.schema = undefined;
        this.warehouse = undefined;
        this.validJson = true;
        this.invalidLogin = false;
        this.emptyFieldsExist = false;
        this.keyFileName = undefined;
        this.error = undefined;
    }
    async handleNext() {
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.authenticationType = this.authenticationType;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.refreshToken = this.refreshToken;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.projectID = this.projectId;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.defaultDataset = this.defaultDataset;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeServer = this.server;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeUsername = this.user;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakePassword = this.password;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.role = this.role;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.database = this.database;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.schema = this.schema;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.warehouse = this.warehouse;
        if (!this.checkValidFields()) {
            this.handleError({ code: "unhandledError" });
            return;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseConnectionPath = this.createDatabaseConnectionPath();
        await this.validateConnection();
    }
    async componentWillLoad() {
        this.dataStoreConnectionType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseProvider;
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.dataStoreDatabaseCredentials;
        this.populateFields();
    }
    checkValidFields() {
        const { projectId, keyFileName, server, database, schema, warehouse, role, user, password, dataStoreConnectionType } = this;
        const fields = dataStoreConnectionType === "snowflake"
            ? [server, database, schema, warehouse, role, user, password]
            : [keyFileName, projectId];
        this.emptyFieldsExist = fields.some((field) => !field);
        return !this.emptyFieldsExist;
    }
    populateFields() {
        var _a;
        //Save fields if user goes back to this page
        this.server = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.snowflakeServer;
        (_a = this.authenticationType) !== null && _a !== void 0 ? _a : (this.authenticationType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.authenticationType);
        this.projectId = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.projectID;
        this.defaultDataset = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.defaultDataset;
        this.role = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.role;
        this.database = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.database;
        this.schema = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.schema;
        this.warehouse = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.warehouse;
    }
    createDatabaseConnectionPath() {
        const { dataStoreConnectionType, authenticationType, projectId, defaultDataset, server, user, role, database, schema, warehouse } = this;
        let databaseConnectionPath;
        switch (dataStoreConnectionType) {
            case "bigQuery":
                databaseConnectionPath = `${this.i18n.bigQuery}/${authenticationType === "serviceAuthentication"
                    ? this.i18n.serviceAuthentication
                    : this.i18n.userAuthentication}/${projectId}/${defaultDataset}`;
                break;
            case "snowflake":
                databaseConnectionPath = `${server}/${user}/${role}/${database}/${schema}/${warehouse}`;
                break;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.databaseConnectionPath = databaseConnectionPath;
        return databaseConnectionPath;
    }
    async validateConnection() {
        const { dataStoreConnectionType, projectId, defaultDataset, keyFileContents, refreshToken, user, password, database, role, server, warehouse, schema } = this;
        let payload;
        const { orgId } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c.user;
        this.invalidLogin = false; //reset fields without error state
        this.loading = true;
        this.loaderMessage = this.i18n.validating;
        const keyFile = keyFileContents || "";
        const refreshTokenInput = refreshToken || "";
        if (dataStoreConnectionType === "bigQuery") {
            const bigQueryPayload = await (0,_data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_6__.l)(projectId, defaultDataset, keyFile, refreshTokenInput);
            if (bigQueryPayload === null || bigQueryPayload === void 0 ? void 0 : bigQueryPayload.error) {
                if (bigQueryPayload.error.code === "invalidJSON") {
                    this.validJson = false;
                }
                this.handleError({ code: bigQueryPayload.error.code });
                return;
            }
            else {
                payload = bigQueryPayload.result;
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.jdbcConnection = Object.assign({}, payload.info.JDBCConnection);
            }
        }
        else {
            payload = (0,_data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_6__.m)({
                user,
                password,
                database,
                role,
                server,
                warehouse,
                schema
            });
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.jdbcConnection = Object.assign({}, payload.info.JDBCConnection);
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords = [..._add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords, "CDW", "snowflake"];
        }
        const fieldValue = dataStoreConnectionType === "bigQuery" ? projectId : database;
        _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_7__.i.title = (0,_data_store_8f8ac640_js__WEBPACK_IMPORTED_MODULE_8__.f)(dataStoreConnectionType, fieldValue);
        const { result, error } = await (0,_data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_3__.v)(orgId, _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c.portal, payload);
        if ((result === null || result === void 0 ? void 0 : result.status) === "success") {
            this.newItemUpdatePage.emit("itemProperties");
        }
        else {
            this.handleError({ code: error.code });
            return;
        }
    }
    processFile(file) {
        if (!file) {
            return;
        }
        const { extension, fileName } = (0,_file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__.s)(file);
        this.keyFileName = fileName;
        if (extension !== "json") {
            this.validJson = false;
            return;
        }
        this.validJson = true;
        const reader = new FileReader();
        reader.onload = (event) => {
            this.keyFileContents = String(event.target.result);
        };
        reader.readAsText(file);
    }
    trimInput(input) {
        return input.trim();
    }
    handleError(error) {
        this.loading = false;
        let errorTitle = this.i18n.errors.validationFailedTitle;
        let errorMessage = this.i18n.errors.validationFailedDescription;
        switch (error.code) {
            case "invalidJSON":
                errorTitle = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.itemProperties.invalidJSON.title;
                errorMessage = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.itemProperties.invalidJSON.description;
                break;
            case "invalidUsernameOrPassword":
                this.invalidLogin = true;
                break;
        }
        this.error = {
            title: errorTitle,
            description: errorMessage
        };
    }
    render() {
        const { dataStoreConnectionType, i18n, server, authenticationType, projectId, defaultDataset, role, database, schema, warehouse, validJson, error, invalidLogin } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { type: this.loaderType, active: this.loading, text: this.loaderMessage }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { class: "header", header: i18n.dataStoreConnection, content: dataStoreConnectionType === "bigQuery" ? i18n.bigQuery : i18n.snowflake }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configure-form" }, dataStoreConnectionType === "snowflake" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.server, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { placeholder: "server_name.com", value: server, onInput: (e) => {
                this.server = this.trimInput(e.target.value);
            }, required: true }), !this.server && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noServer)))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.authenticationType, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-select", { value: authenticationType, label: "authentication-type", disabled: true, onCalciteSelectChange: (e) => {
                this.authenticationType = e.target.selectedOption.value;
            } }, dataStoreConnectionType === "bigQuery" ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { value: "serviceAuthentication" }, i18n.serviceAuthentication)) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-option", { value: "userAuthentication" }, i18n.userAuthentication)))), dataStoreConnectionType === "bigQuery" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configureBigQuery" }, authenticationType === "serviceAuthentication" ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field keyFileInput" }, i18n.keyFile, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { status: !validJson || (!this.keyFileName && this.emptyFieldsExist)
                ? "invalid"
                : "valid", "read-only": true, value: this.keyFileName, required: true }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { "icon-start": "folder", slot: "action", kind: "neutral", appearance: "outline", onClick: () => { var _a; return (_a = this.inputFileElement) === null || _a === void 0 ? void 0 : _a.click(); } }, i18n.selectKeyFile)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { class: "hidden", type: "file", id: "snowflake-key-file", accept: ".json", onChange: this.handleFileInputChange, ref: (el) => (this.inputFileElement = el) }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: !validJson || (!this.keyFileName && this.emptyFieldsExist)
                ? "exclamation-mark-triangle"
                : "information", status: !validJson || (!this.keyFileName && this.emptyFieldsExist)
                ? "invalid"
                : "idle" }, !this.keyFileName && this.emptyFieldsExist
            ? i18n.errors.noKeyFile
            : validJson
                ? i18n.jsonOnly
                : i18n.notJson))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field refreshTokenInput" }, i18n.refreshToken, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { type: "password", status: "valid", onInput: (e) => {
                this.refreshToken = e.target.value;
            } }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.projectId, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: projectId, onInput: (e) => {
                this.projectId = this.trimInput(e.target.value);
            }, required: true }), !this.projectId && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noProjectId))), authenticationType === "userAuthentication" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.defaultDataset, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: defaultDataset, onInput: (e) => {
                this.defaultDataset = this.trimInput(e.target.value);
            } }))))), dataStoreConnectionType === "snowflake" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "configureSnowflake" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "field fill-credentials" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "credentials" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "username" }, i18n.username, " ", ((!this.user && this.emptyFieldsExist) || invalidLogin) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "asterisk" }, "*"))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { onInput: (e) => {
                this.user = this.trimInput(e.target.value);
            }, required: true }), (((!this.user || !this.password) && this.emptyFieldsExist) || invalidLogin) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.incorrectLogin))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "credentials" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "password" }, i18n.password, " ", ((!this.password && this.emptyFieldsExist) || invalidLogin) && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "asterisk" }, "*"))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { class: "credentials password", type: "password", onInput: (e) => {
                this.password = this.trimInput(e.target.value);
            }, required: true }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.database, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: database, onInput: (e) => {
                this.database = this.trimInput(e.target.value);
            }, required: true }), !this.database && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noDatabase))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.schema, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: schema, onInput: (e) => {
                this.schema = this.trimInput(e.target.value);
            }, required: true }), !this.schema && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noSchema))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.warehouse, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: warehouse, onInput: (e) => {
                this.warehouse = this.trimInput(e.target.value);
            }, required: true }), !this.warehouse && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noWarehouse))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { class: "field" }, i18n.role, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { value: role, onInput: (e) => {
                this.role = this.trimInput(e.target.value);
            }, required: true }), !this.role && this.emptyFieldsExist && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { icon: "exclamation-mark-triangle", status: "invalid" }, i18n.errors.noRole)))))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error === null || error === void 0 ? void 0 : error.title, description: error === null || error === void 0 ? void 0 : error.description, active: !!error, onAlertDismiss: () => (this.error = null) })));
    }
};
ArcgisNewItemPagesDataStoreDatabaseCredentials.style = arcgisNewItemPagesDataStoreDatabaseCredentialsCss;



//# sourceMappingURL=arcgis-new-item-pages-data-store-database-credentials.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8f8ac640.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8f8ac640.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ formatTitleForDataStoreItem)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const formatTitleForDataStoreItem = (provider, fieldValue) => {
    let title;
    const initialTitle = fieldValue !== null && fieldValue !== void 0 ? fieldValue : "";
    switch (provider) {
        case "amazon":
            title = `AmazonS3_${initialTitle}`;
            break;
        case "azure":
            title = `Microsoft_Azure_Storage_${initialTitle}`;
            break;
        case "bigQuery":
            title = `BigQuery_${initialTitle}`;
            break;
        case "snowflake":
            title = `Snowflake_${initialTitle}`;
            break;
    }
    return title.replace(/ /g, "_").replace(/-/g, "_");
};



//# sourceMappingURL=data-store-8f8ac640.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWY4YzZjYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lGO0FBQ3pCO0FBQ0k7QUFDZTtBQUNoQjtBQUNOO0FBQ29EO0FBQ2hDO0FBQ0c7QUFDL0M7QUFDSztBQUNOO0FBQ0U7QUFDSztBQUNSO0FBQ087QUFDSDtBQUNNO0FBQ0E7QUFDSjtBQUNMO0FBQ0M7QUFDRjtBQUNHO0FBQ0g7QUFDQztBQUNPO0FBQ1A7QUFDTTtBQUNHO0FBQ1Y7QUFDQTtBQUNJO0FBQ0Y7O0FBRTdCLDJFQUEyRSxrQkFBa0Isa0JBQWtCLGFBQWEsYUFBYSxZQUFZLFVBQVUseUJBQXlCLFdBQVcsaUNBQWlDLFFBQVEsYUFBYSxjQUFjLHNDQUFzQyxVQUFVLHlDQUF5Qzs7QUFFaFc7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQjtBQUNBLCtCQUErQix3QkFBd0I7QUFDdkQ7QUFDQTtBQUNBLFFBQVEsb0RBQVk7QUFDcEI7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBOztBQUVtSDs7QUFFbkg7Ozs7Ozs7Ozs7Ozs7O0FDL1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxhQUFhO0FBQzdDO0FBQ0E7QUFDQSwrQ0FBK0MsYUFBYTtBQUM1RDtBQUNBO0FBQ0EsZ0NBQWdDLGFBQWE7QUFDN0M7QUFDQTtBQUNBLGlDQUFpQyxhQUFhO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUU0Qzs7QUFFNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtZGF0YS1zdG9yZS1kYXRhYmFzZS1jcmVkZW50aWFscy5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9kYXRhLXN0b3JlLThmOGFjNjQwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoIH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctNzVhZGY5NjIuanMnO1xuaW1wb3J0IHsgcyBhcyBzYW5pdGl6ZUZpbGVJbnB1dCB9IGZyb20gJy4vZmlsZS1iZjhhYjkwZi5qcyc7XG5pbXBvcnQgeyB2IGFzIHZhbGlkYXRlRGF0YXN0b3JlRm9yT25saW5lIH0gZnJvbSAnLi9kYXRhLXN0b3JlLWUyYWU2YTY3LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS1kYmJlMmY1Ny5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktYmNhN2JjZDEuanMnO1xuaW1wb3J0IHsgbCBhcyBjcmVhdGVCaWdRdWVyeURhdGFPYmplY3QsIG0gYXMgY3JlYXRlU25vd2ZsYWtlRGF0YU9iamVjdCB9IGZyb20gJy4vZGF0YS1zdG9yZS04ZTgzZmI3YS5qcyc7XG5pbXBvcnQgeyBpIGFzIGl0ZW1Qcm9wZXJ0aWVzU3RhdGUgfSBmcm9tICcuL2l0ZW0tcHJvcGVydGllcy0xMDQ5MWIyZS5qcyc7XG5pbXBvcnQgeyBmIGFzIGZvcm1hdFRpdGxlRm9yRGF0YVN0b3JlSXRlbSB9IGZyb20gJy4vZGF0YS1zdG9yZS04ZjhhYzY0MC5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL2l0ZW0tdHlwZXMtMjAyOWIwNmIuanMnO1xuaW1wb3J0ICcuL2d1aWQtYWVhZWQ4NGQuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC00NGRlOGZjZi5qcyc7XG5pbXBvcnQgJy4vc2VydmljZS04YzJjNDI0MS5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci01NzNiYjQ3My5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci03OWZiMzAyYy5qcyc7XG5pbXBvcnQgJy4vdGh1bWJuYWlsLWJjYjg5ZTY5LmpzJztcbmltcG9ydCAnLi91c2VyLTNlYTY5YzNhLmpzJztcbmltcG9ydCAnLi9xdWVyeS1kNjI2NjBkNC5qcyc7XG5pbXBvcnQgJy4vYXBpLTJlM2ExMzZmLmpzJztcbmltcG9ydCAnLi9zdHJpbmctNThhNWZlZjMuanMnO1xuaW1wb3J0ICcuL2RvbS00ZDM2NzY3Ny5qcyc7XG5pbXBvcnQgJy4vaXRlbS1jNThmZmNlZC5qcyc7XG5pbXBvcnQgJy4vc2VydmVyLWl0ZW0tOGQzODQ3OTYuanMnO1xuaW1wb3J0ICcuL2l0ZW0tMzUzNTU1MmQuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtODEzNzNmNmQuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItMTdiNjQ5NDYuanMnO1xuaW1wb3J0ICcuL2Fncy1lYjQ1OGEwMy5qcyc7XG5pbXBvcnQgJy4vdXJsLTM1ODc1YTEwLmpzJztcbmltcG9ydCAnLi9zdG9yYWdlLTAzNTNhNzY5LmpzJztcbmltcG9ydCAnLi9zdG9yZS02YTg4ZTZjNS5qcyc7XG5cbmNvbnN0IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZURhdGFiYXNlQ3JlZGVudGlhbHNDc3MgPSBcIi5jb25maWd1cmUtZm9ybXttYXJnaW4tdG9wOjEuNXJlbX0uZmlsbC1jcmVkZW50aWFsc3tkaXNwbGF5OmZsZXh9LmNyZWRlbnRpYWxze2ZsZXg6MSAxIDAlfS5wYXNzd29yZHttYXJnaW4taW5saW5lLXN0YXJ0OjNyZW19LmluZm8taWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKX0uaGlkZGVue2Rpc3BsYXk6bm9uZX1jYWxjaXRlLWxhYmVsey0tY2FsY2l0ZS1sYWJlbC1tYXJnaW4tYm90dG9tOjEuMjVyZW19LmFzdGVyaXNre2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlcil9XCI7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZURhdGFiYXNlQ3JlZGVudGlhbHMgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICAgICAgdGhpcy5oYW5kbGVGaWxlSW5wdXRDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0ZpbGUoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvblR5cGUgPSBcInNlcnZpY2VBdXRoZW50aWNhdGlvblwiO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2FkZXJUeXBlID0gXCJpbmRldGVybWluYXRlXCI7XG4gICAgICAgIHRoaXMubG9hZGVyTWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMua2V5RmlsZUNvbnRlbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kZWZhdWx0RGF0YXNldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXNlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yb2xlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRhdGFiYXNlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53YXJlaG91c2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudmFsaWRKc29uID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbnZhbGlkTG9naW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMua2V5RmlsZU5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5hdXRoZW50aWNhdGlvblR5cGUgPSB0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnJlZnJlc2hUb2tlbiA9IHRoaXMucmVmcmVzaFRva2VuO1xuICAgICAgICBhZGRJdGVtU3RhdGUucHJvamVjdElEID0gdGhpcy5wcm9qZWN0SWQ7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5kZWZhdWx0RGF0YXNldCA9IHRoaXMuZGVmYXVsdERhdGFzZXQ7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5zbm93Zmxha2VTZXJ2ZXIgPSB0aGlzLnNlcnZlcjtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNub3dmbGFrZVVzZXJuYW1lID0gdGhpcy51c2VyO1xuICAgICAgICBhZGRJdGVtU3RhdGUuc25vd2ZsYWtlUGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkO1xuICAgICAgICBhZGRJdGVtU3RhdGUucm9sZSA9IHRoaXMucm9sZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmRhdGFiYXNlID0gdGhpcy5kYXRhYmFzZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNjaGVtYSA9IHRoaXMuc2NoZW1hO1xuICAgICAgICBhZGRJdGVtU3RhdGUud2FyZWhvdXNlID0gdGhpcy53YXJlaG91c2U7XG4gICAgICAgIGlmICghdGhpcy5jaGVja1ZhbGlkRmllbGRzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBcInVuaGFuZGxlZEVycm9yXCIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYWRkSXRlbVN0YXRlLmRhdGFiYXNlQ29ubmVjdGlvblBhdGggPSB0aGlzLmNyZWF0ZURhdGFiYXNlQ29ubmVjdGlvblBhdGgoKTtcbiAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUNvbm5lY3Rpb24oKTtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIHRoaXMuZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPSBhZGRJdGVtU3RhdGUuZGF0YWJhc2VQcm92aWRlcjtcbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFscztcbiAgICAgICAgdGhpcy5wb3B1bGF0ZUZpZWxkcygpO1xuICAgIH1cbiAgICBjaGVja1ZhbGlkRmllbGRzKCkge1xuICAgICAgICBjb25zdCB7IHByb2plY3RJZCwga2V5RmlsZU5hbWUsIHNlcnZlciwgZGF0YWJhc2UsIHNjaGVtYSwgd2FyZWhvdXNlLCByb2xlLCB1c2VyLCBwYXNzd29yZCwgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGZpZWxkcyA9IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcInNub3dmbGFrZVwiXG4gICAgICAgICAgICA/IFtzZXJ2ZXIsIGRhdGFiYXNlLCBzY2hlbWEsIHdhcmVob3VzZSwgcm9sZSwgdXNlciwgcGFzc3dvcmRdXG4gICAgICAgICAgICA6IFtrZXlGaWxlTmFtZSwgcHJvamVjdElkXTtcbiAgICAgICAgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ID0gZmllbGRzLnNvbWUoKGZpZWxkKSA9PiAhZmllbGQpO1xuICAgICAgICByZXR1cm4gIXRoaXMuZW1wdHlGaWVsZHNFeGlzdDtcbiAgICB9XG4gICAgcG9wdWxhdGVGaWVsZHMoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy9TYXZlIGZpZWxkcyBpZiB1c2VyIGdvZXMgYmFjayB0byB0aGlzIHBhZ2VcbiAgICAgICAgdGhpcy5zZXJ2ZXIgPSBhZGRJdGVtU3RhdGUuc25vd2ZsYWtlU2VydmVyO1xuICAgICAgICAoX2EgPSB0aGlzLmF1dGhlbnRpY2F0aW9uVHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKHRoaXMuYXV0aGVudGljYXRpb25UeXBlID0gYWRkSXRlbVN0YXRlLmF1dGhlbnRpY2F0aW9uVHlwZSk7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gYWRkSXRlbVN0YXRlLnByb2plY3RJRDtcbiAgICAgICAgdGhpcy5kZWZhdWx0RGF0YXNldCA9IGFkZEl0ZW1TdGF0ZS5kZWZhdWx0RGF0YXNldDtcbiAgICAgICAgdGhpcy5yb2xlID0gYWRkSXRlbVN0YXRlLnJvbGU7XG4gICAgICAgIHRoaXMuZGF0YWJhc2UgPSBhZGRJdGVtU3RhdGUuZGF0YWJhc2U7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gYWRkSXRlbVN0YXRlLnNjaGVtYTtcbiAgICAgICAgdGhpcy53YXJlaG91c2UgPSBhZGRJdGVtU3RhdGUud2FyZWhvdXNlO1xuICAgIH1cbiAgICBjcmVhdGVEYXRhYmFzZUNvbm5lY3Rpb25QYXRoKCkge1xuICAgICAgICBjb25zdCB7IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlLCBhdXRoZW50aWNhdGlvblR5cGUsIHByb2plY3RJZCwgZGVmYXVsdERhdGFzZXQsIHNlcnZlciwgdXNlciwgcm9sZSwgZGF0YWJhc2UsIHNjaGVtYSwgd2FyZWhvdXNlIH0gPSB0aGlzO1xuICAgICAgICBsZXQgZGF0YWJhc2VDb25uZWN0aW9uUGF0aDtcbiAgICAgICAgc3dpdGNoIChkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcImJpZ1F1ZXJ5XCI6XG4gICAgICAgICAgICAgICAgZGF0YWJhc2VDb25uZWN0aW9uUGF0aCA9IGAke3RoaXMuaTE4bi5iaWdRdWVyeX0vJHthdXRoZW50aWNhdGlvblR5cGUgPT09IFwic2VydmljZUF1dGhlbnRpY2F0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmkxOG4uc2VydmljZUF1dGhlbnRpY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5pMThuLnVzZXJBdXRoZW50aWNhdGlvbn0vJHtwcm9qZWN0SWR9LyR7ZGVmYXVsdERhdGFzZXR9YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzbm93Zmxha2VcIjpcbiAgICAgICAgICAgICAgICBkYXRhYmFzZUNvbm5lY3Rpb25QYXRoID0gYCR7c2VydmVyfS8ke3VzZXJ9LyR7cm9sZX0vJHtkYXRhYmFzZX0vJHtzY2hlbWF9LyR7d2FyZWhvdXNlfWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYWRkSXRlbVN0YXRlLmRhdGFiYXNlQ29ubmVjdGlvblBhdGggPSBkYXRhYmFzZUNvbm5lY3Rpb25QYXRoO1xuICAgICAgICByZXR1cm4gZGF0YWJhc2VDb25uZWN0aW9uUGF0aDtcbiAgICB9XG4gICAgYXN5bmMgdmFsaWRhdGVDb25uZWN0aW9uKCkge1xuICAgICAgICBjb25zdCB7IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlLCBwcm9qZWN0SWQsIGRlZmF1bHREYXRhc2V0LCBrZXlGaWxlQ29udGVudHMsIHJlZnJlc2hUb2tlbiwgdXNlciwgcGFzc3dvcmQsIGRhdGFiYXNlLCByb2xlLCBzZXJ2ZXIsIHdhcmVob3VzZSwgc2NoZW1hIH0gPSB0aGlzO1xuICAgICAgICBsZXQgcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBvcmdJZCB9ID0gY29uZmlnU3RhdGUudXNlcjtcbiAgICAgICAgdGhpcy5pbnZhbGlkTG9naW4gPSBmYWxzZTsgLy9yZXNldCBmaWVsZHMgd2l0aG91dCBlcnJvciBzdGF0ZVxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvYWRlck1lc3NhZ2UgPSB0aGlzLmkxOG4udmFsaWRhdGluZztcbiAgICAgICAgY29uc3Qga2V5RmlsZSA9IGtleUZpbGVDb250ZW50cyB8fCBcIlwiO1xuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5JbnB1dCA9IHJlZnJlc2hUb2tlbiB8fCBcIlwiO1xuICAgICAgICBpZiAoZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPT09IFwiYmlnUXVlcnlcIikge1xuICAgICAgICAgICAgY29uc3QgYmlnUXVlcnlQYXlsb2FkID0gYXdhaXQgY3JlYXRlQmlnUXVlcnlEYXRhT2JqZWN0KHByb2plY3RJZCwgZGVmYXVsdERhdGFzZXQsIGtleUZpbGUsIHJlZnJlc2hUb2tlbklucHV0KTtcbiAgICAgICAgICAgIGlmIChiaWdRdWVyeVBheWxvYWQgPT09IG51bGwgfHwgYmlnUXVlcnlQYXlsb2FkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiaWdRdWVyeVBheWxvYWQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmlnUXVlcnlQYXlsb2FkLmVycm9yLmNvZGUgPT09IFwiaW52YWxpZEpTT05cIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkSnNvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHsgY29kZTogYmlnUXVlcnlQYXlsb2FkLmVycm9yLmNvZGUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZCA9IGJpZ1F1ZXJ5UGF5bG9hZC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgYWRkSXRlbVN0YXRlLmpkYmNDb25uZWN0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZC5pbmZvLkpEQkNDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBheWxvYWQgPSBjcmVhdGVTbm93Zmxha2VEYXRhT2JqZWN0KHtcbiAgICAgICAgICAgICAgICB1c2VyLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIGRhdGFiYXNlLFxuICAgICAgICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgICAgIHdhcmVob3VzZSxcbiAgICAgICAgICAgICAgICBzY2hlbWFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWRkSXRlbVN0YXRlLmpkYmNDb25uZWN0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZC5pbmZvLkpEQkNDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS50eXBlS2V5d29yZHMgPSBbLi4uYWRkSXRlbVN0YXRlLnR5cGVLZXl3b3JkcywgXCJDRFdcIiwgXCJzbm93Zmxha2VcIl07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcImJpZ1F1ZXJ5XCIgPyBwcm9qZWN0SWQgOiBkYXRhYmFzZTtcbiAgICAgICAgaXRlbVByb3BlcnRpZXNTdGF0ZS50aXRsZSA9IGZvcm1hdFRpdGxlRm9yRGF0YVN0b3JlSXRlbShkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSwgZmllbGRWYWx1ZSk7XG4gICAgICAgIGNvbnN0IHsgcmVzdWx0LCBlcnJvciB9ID0gYXdhaXQgdmFsaWRhdGVEYXRhc3RvcmVGb3JPbmxpbmUob3JnSWQsIGNvbmZpZ1N0YXRlLnBvcnRhbCwgcGF5bG9hZCk7XG4gICAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnN0YXR1cykgPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJpdGVtUHJvcGVydGllc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBlcnJvci5jb2RlIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NGaWxlKGZpbGUpIHtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBleHRlbnNpb24sIGZpbGVOYW1lIH0gPSBzYW5pdGl6ZUZpbGVJbnB1dChmaWxlKTtcbiAgICAgICAgdGhpcy5rZXlGaWxlTmFtZSA9IGZpbGVOYW1lO1xuICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgdGhpcy52YWxpZEpzb24gPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZhbGlkSnNvbiA9IHRydWU7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMua2V5RmlsZUNvbnRlbnRzID0gU3RyaW5nKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICB9XG4gICAgdHJpbUlucHV0KGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC50cmltKCk7XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBsZXQgZXJyb3JUaXRsZSA9IHRoaXMuaTE4bi5lcnJvcnMudmFsaWRhdGlvbkZhaWxlZFRpdGxlO1xuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gdGhpcy5pMThuLmVycm9ycy52YWxpZGF0aW9uRmFpbGVkRGVzY3JpcHRpb247XG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgY2FzZSBcImludmFsaWRKU09OXCI6XG4gICAgICAgICAgICAgICAgZXJyb3JUaXRsZSA9IHVpU3RvcmVTdGF0ZS5pMThuLml0ZW1Qcm9wZXJ0aWVzLmludmFsaWRKU09OLnRpdGxlO1xuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHVpU3RvcmVTdGF0ZS5pMThuLml0ZW1Qcm9wZXJ0aWVzLmludmFsaWRKU09OLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImludmFsaWRVc2VybmFtZU9yUGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRMb2dpbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lcnJvciA9IHtcbiAgICAgICAgICAgIHRpdGxlOiBlcnJvclRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUsIGkxOG4sIHNlcnZlciwgYXV0aGVudGljYXRpb25UeXBlLCBwcm9qZWN0SWQsIGRlZmF1bHREYXRhc2V0LCByb2xlLCBkYXRhYmFzZSwgc2NoZW1hLCB3YXJlaG91c2UsIHZhbGlkSnNvbiwgZXJyb3IsIGludmFsaWRMb2dpbiB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tbG9hZGVyXCIsIHsgdHlwZTogdGhpcy5sb2FkZXJUeXBlLCBhY3RpdmU6IHRoaXMubG9hZGluZywgdGV4dDogdGhpcy5sb2FkZXJNZXNzYWdlIH0pLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWRlc2NyaXB0aW9uXCIsIHsgY2xhc3M6IFwiaGVhZGVyXCIsIGhlYWRlcjogaTE4bi5kYXRhU3RvcmVDb25uZWN0aW9uLCBjb250ZW50OiBkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSA9PT0gXCJiaWdRdWVyeVwiID8gaTE4bi5iaWdRdWVyeSA6IGkxOG4uc25vd2ZsYWtlIH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29uZmlndXJlLWZvcm1cIiB9LCBkYXRhU3RvcmVDb25uZWN0aW9uVHlwZSA9PT0gXCJzbm93Zmxha2VcIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4uc2VydmVyLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IHBsYWNlaG9sZGVyOiBcInNlcnZlcl9uYW1lLmNvbVwiLCB2YWx1ZTogc2VydmVyLCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICF0aGlzLnNlcnZlciAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub1NlcnZlcikpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiZmllbGRcIiB9LCBpMThuLmF1dGhlbnRpY2F0aW9uVHlwZSwgaChcImNhbGNpdGUtc2VsZWN0XCIsIHsgdmFsdWU6IGF1dGhlbnRpY2F0aW9uVHlwZSwgbGFiZWw6IFwiYXV0aGVudGljYXRpb24tdHlwZVwiLCBkaXNhYmxlZDogdHJ1ZSwgb25DYWxjaXRlU2VsZWN0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0aGVudGljYXRpb25UeXBlID0gZS50YXJnZXQuc2VsZWN0ZWRPcHRpb24udmFsdWU7XG4gICAgICAgICAgICB9IH0sIGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcImJpZ1F1ZXJ5XCIgPyAoaChcImNhbGNpdGUtb3B0aW9uXCIsIHsgdmFsdWU6IFwic2VydmljZUF1dGhlbnRpY2F0aW9uXCIgfSwgaTE4bi5zZXJ2aWNlQXV0aGVudGljYXRpb24pKSA6IChoKFwiY2FsY2l0ZS1vcHRpb25cIiwgeyB2YWx1ZTogXCJ1c2VyQXV0aGVudGljYXRpb25cIiB9LCBpMThuLnVzZXJBdXRoZW50aWNhdGlvbikpKSksIGRhdGFTdG9yZUNvbm5lY3Rpb25UeXBlID09PSBcImJpZ1F1ZXJ5XCIgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJjb25maWd1cmVCaWdRdWVyeVwiIH0sIGF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gXCJzZXJ2aWNlQXV0aGVudGljYXRpb25cIiA/IChoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkIGtleUZpbGVJbnB1dFwiIH0sIGkxOG4ua2V5RmlsZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBzdGF0dXM6ICF2YWxpZEpzb24gfHwgKCF0aGlzLmtleUZpbGVOYW1lICYmIHRoaXMuZW1wdHlGaWVsZHNFeGlzdClcbiAgICAgICAgICAgICAgICA/IFwiaW52YWxpZFwiXG4gICAgICAgICAgICAgICAgOiBcInZhbGlkXCIsIFwicmVhZC1vbmx5XCI6IHRydWUsIHZhbHVlOiB0aGlzLmtleUZpbGVOYW1lLCByZXF1aXJlZDogdHJ1ZSB9LCBoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBcImljb24tc3RhcnRcIjogXCJmb2xkZXJcIiwgc2xvdDogXCJhY3Rpb25cIiwga2luZDogXCJuZXV0cmFsXCIsIGFwcGVhcmFuY2U6IFwib3V0bGluZVwiLCBvbkNsaWNrOiAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IHRoaXMuaW5wdXRGaWxlRWxlbWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsaWNrKCk7IH0gfSwgaTE4bi5zZWxlY3RLZXlGaWxlKSksIGgoXCJpbnB1dFwiLCB7IGNsYXNzOiBcImhpZGRlblwiLCB0eXBlOiBcImZpbGVcIiwgaWQ6IFwic25vd2ZsYWtlLWtleS1maWxlXCIsIGFjY2VwdDogXCIuanNvblwiLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVGaWxlSW5wdXRDaGFuZ2UsIHJlZjogKGVsKSA9PiAodGhpcy5pbnB1dEZpbGVFbGVtZW50ID0gZWwpIH0pLCBoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogIXZhbGlkSnNvbiB8fCAoIXRoaXMua2V5RmlsZU5hbWUgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0KVxuICAgICAgICAgICAgICAgID8gXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCJcbiAgICAgICAgICAgICAgICA6IFwiaW5mb3JtYXRpb25cIiwgc3RhdHVzOiAhdmFsaWRKc29uIHx8ICghdGhpcy5rZXlGaWxlTmFtZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QpXG4gICAgICAgICAgICAgICAgPyBcImludmFsaWRcIlxuICAgICAgICAgICAgICAgIDogXCJpZGxlXCIgfSwgIXRoaXMua2V5RmlsZU5hbWUgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0XG4gICAgICAgICAgICA/IGkxOG4uZXJyb3JzLm5vS2V5RmlsZVxuICAgICAgICAgICAgOiB2YWxpZEpzb25cbiAgICAgICAgICAgICAgICA/IGkxOG4uanNvbk9ubHlcbiAgICAgICAgICAgICAgICA6IGkxOG4ubm90SnNvbikpKSA6IChoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkIHJlZnJlc2hUb2tlbklucHV0XCIgfSwgaTE4bi5yZWZyZXNoVG9rZW4sIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgdHlwZTogXCJwYXNzd29yZFwiLCBzdGF0dXM6IFwidmFsaWRcIiwgb25JbnB1dDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgfSB9KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkXCIgfSwgaTE4bi5wcm9qZWN0SWQsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgdmFsdWU6IHByb2plY3RJZCwgb25JbnB1dDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMudHJpbUlucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH0sIHJlcXVpcmVkOiB0cnVlIH0pLCAhdGhpcy5wcm9qZWN0SWQgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9Qcm9qZWN0SWQpKSksIGF1dGhlbnRpY2F0aW9uVHlwZSA9PT0gXCJ1c2VyQXV0aGVudGljYXRpb25cIiAmJiAoaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4uZGVmYXVsdERhdGFzZXQsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgdmFsdWU6IGRlZmF1bHREYXRhc2V0LCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdERhdGFzZXQgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9IH0pKSkpKSwgZGF0YVN0b3JlQ29ubmVjdGlvblR5cGUgPT09IFwic25vd2ZsYWtlXCIgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJjb25maWd1cmVTbm93Zmxha2VcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZmllbGQgZmlsbC1jcmVkZW50aWFsc1wiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiY3JlZGVudGlhbHNcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwidXNlcm5hbWVcIiB9LCBpMThuLnVzZXJuYW1lLCBcIiBcIiwgKCghdGhpcy51c2VyICYmIHRoaXMuZW1wdHlGaWVsZHNFeGlzdCkgfHwgaW52YWxpZExvZ2luKSAmJiAoaChcInNwYW5cIiwgeyBjbGFzczogXCJhc3Rlcmlza1wiIH0sIFwiKlwiKSkpLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICgoKCF0aGlzLnVzZXIgfHwgIXRoaXMucGFzc3dvcmQpICYmIHRoaXMuZW1wdHlGaWVsZHNFeGlzdCkgfHwgaW52YWxpZExvZ2luKSAmJiAoaChcImNhbGNpdGUtaW5wdXQtbWVzc2FnZVwiLCB7IGljb246IFwiZXhjbGFtYXRpb24tbWFyay10cmlhbmdsZVwiLCBzdGF0dXM6IFwiaW52YWxpZFwiIH0sIGkxOG4uZXJyb3JzLmluY29ycmVjdExvZ2luKSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImNyZWRlbnRpYWxzXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInBhc3N3b3JkXCIgfSwgaTE4bi5wYXNzd29yZCwgXCIgXCIsICgoIXRoaXMucGFzc3dvcmQgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0KSB8fCBpbnZhbGlkTG9naW4pICYmIChoKFwic3BhblwiLCB7IGNsYXNzOiBcImFzdGVyaXNrXCIgfSwgXCIqXCIpKSksIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgY2xhc3M6IFwiY3JlZGVudGlhbHMgcGFzc3dvcmRcIiwgdHlwZTogXCJwYXNzd29yZFwiLCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9LCByZXF1aXJlZDogdHJ1ZSB9KSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkXCIgfSwgaTE4bi5kYXRhYmFzZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogZGF0YWJhc2UsIG9uSW5wdXQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZSA9IHRoaXMudHJpbUlucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH0sIHJlcXVpcmVkOiB0cnVlIH0pLCAhdGhpcy5kYXRhYmFzZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub0RhdGFiYXNlKSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGNsYXNzOiBcImZpZWxkXCIgfSwgaTE4bi5zY2hlbWEsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsgdmFsdWU6IHNjaGVtYSwgb25JbnB1dDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYSA9IHRoaXMudHJpbUlucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH0sIHJlcXVpcmVkOiB0cnVlIH0pLCAhdGhpcy5zY2hlbWEgJiYgdGhpcy5lbXB0eUZpZWxkc0V4aXN0ICYmIChoKFwiY2FsY2l0ZS1pbnB1dC1tZXNzYWdlXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHN0YXR1czogXCJpbnZhbGlkXCIgfSwgaTE4bi5lcnJvcnMubm9TY2hlbWEpKSksIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgY2xhc3M6IFwiZmllbGRcIiB9LCBpMThuLndhcmVob3VzZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogd2FyZWhvdXNlLCBvbklucHV0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2FyZWhvdXNlID0gdGhpcy50cmltSW5wdXQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgfSwgcmVxdWlyZWQ6IHRydWUgfSksICF0aGlzLndhcmVob3VzZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub1dhcmVob3VzZSkpKSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBjbGFzczogXCJmaWVsZFwiIH0sIGkxOG4ucm9sZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB2YWx1ZTogcm9sZSwgb25JbnB1dDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvbGUgPSB0aGlzLnRyaW1JbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9LCByZXF1aXJlZDogdHJ1ZSB9KSwgIXRoaXMucm9sZSAmJiB0aGlzLmVtcHR5RmllbGRzRXhpc3QgJiYgKGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBpY29uOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGVcIiwgc3RhdHVzOiBcImludmFsaWRcIiB9LCBpMThuLmVycm9ycy5ub1JvbGUpKSkpKSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IudGl0bGUsIGRlc2NyaXB0aW9uOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuZGVzY3JpcHRpb24sIGFjdGl2ZTogISFlcnJvciwgb25BbGVydERpc21pc3M6ICgpID0+ICh0aGlzLmVycm9yID0gbnVsbCkgfSkpKTtcbiAgICB9XG59O1xuQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlRGF0YWJhc2VDcmVkZW50aWFscy5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZURhdGFiYXNlQ3JlZGVudGlhbHNDc3M7XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZURhdGFiYXNlQ3JlZGVudGlhbHMgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2RhdGFfc3RvcmVfZGF0YWJhc2VfY3JlZGVudGlhbHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtZGF0YWJhc2UtY3JlZGVudGlhbHMuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5jb25zdCBmb3JtYXRUaXRsZUZvckRhdGFTdG9yZUl0ZW0gPSAocHJvdmlkZXIsIGZpZWxkVmFsdWUpID0+IHtcbiAgICBsZXQgdGl0bGU7XG4gICAgY29uc3QgaW5pdGlhbFRpdGxlID0gZmllbGRWYWx1ZSAhPT0gbnVsbCAmJiBmaWVsZFZhbHVlICE9PSB2b2lkIDAgPyBmaWVsZFZhbHVlIDogXCJcIjtcbiAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XG4gICAgICAgIGNhc2UgXCJhbWF6b25cIjpcbiAgICAgICAgICAgIHRpdGxlID0gYEFtYXpvblMzXyR7aW5pdGlhbFRpdGxlfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImF6dXJlXCI6XG4gICAgICAgICAgICB0aXRsZSA9IGBNaWNyb3NvZnRfQXp1cmVfU3RvcmFnZV8ke2luaXRpYWxUaXRsZX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiaWdRdWVyeVwiOlxuICAgICAgICAgICAgdGl0bGUgPSBgQmlnUXVlcnlfJHtpbml0aWFsVGl0bGV9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic25vd2ZsYWtlXCI6XG4gICAgICAgICAgICB0aXRsZSA9IGBTbm93Zmxha2VfJHtpbml0aWFsVGl0bGV9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdGl0bGUucmVwbGFjZSgvIC9nLCBcIl9cIikucmVwbGFjZSgvLS9nLCBcIl9cIik7XG59O1xuXG5leHBvcnQgeyBmb3JtYXRUaXRsZUZvckRhdGFTdG9yZUl0ZW0gYXMgZiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhLXN0b3JlLThmOGFjNjQwLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==