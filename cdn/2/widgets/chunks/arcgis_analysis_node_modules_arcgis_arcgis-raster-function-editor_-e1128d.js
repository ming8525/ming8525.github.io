"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-e1128d"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-neighborhood-values-fa58c0d8.js":
/*!************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-neighborhood-values-fa58c0d8.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxCteNeighborhoodValues)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./multidimensional-helper-fc8fbe0e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/multidimensional-helper-fc8fbe0e.js");



















const HelpClickHandlerKeys = {
    inputArgHelpClickHandler: "inputArgHelpClickHandler"
};

const rfxCteNeighborhoodValuesCss = "";

const RfxCteNeighborhoodValues = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.renderGrid = false;
        this.widgetState = undefined;
        this.widgetArgs = undefined;
        this.value = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.processWidgetArgs(this.widgetArgs);
    }
    componentWillLoad() {
        this.setupInitialState(this.widgetArgs);
    }
    componentWillRender() {
        this.setWidgetValue();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * All validation logic of widgetArgs -> mainly the inputArgs and triggerAttributes
     * goes here
     */
    processWidgetArgs({ inputArgs, triggerArgs }) {
        // should have only one inputArg
        Object.keys(inputArgs).forEach((_inputArg) => {
            const rfxArg = inputArgs[_inputArg];
            this.inputArg = rfxArg;
            rfxArg.input = this.hostElement;
        });
        triggerArgs.Width?.input.addEventListener("rfxArgumentChange", (event) => {
            event.stopPropagation();
            const { detail: { value } } = event;
            this.onWidthValueChange(value);
        });
        triggerArgs.Height?.input.addEventListener("rfxArgumentChange", (event) => {
            event.stopPropagation();
            const { detail: { value } } = event;
            this.onHeightValueChange(value);
        });
        /**
         * FIXME: temp solution
         * UI gets stuck when rendering large grids, even when the grid is supposed
         * to be hidden. Fix: listen to NeighborhoodType and only render grid when value is correct.
         */
        triggerArgs.NeighborhoodType?.input.addEventListener("rfxArgumentChange", (event) => {
            // Do not stop event as it'll interfere with state trigger handling
            // event.stopPropagation();
            const { detail: { value } } = event;
            this.onNeighborhoodTypeValueChange(value);
        });
    }
    setupInitialState({ inputArgs, triggerArgs }) {
        const defaultRowColCount = 3;
        const value = inputArgs.NeighborhoodValues.value;
        const cols = triggerArgs.Width?.value ?? defaultRowColCount;
        const rows = triggerArgs.Height?.value ?? defaultRowColCount;
        this.widgetState = (0,_multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_17__.c)({
            columns: cols,
            rows: rows,
            value: value
        });
        this.value = value;
        // FIXME
        this.renderGrid = triggerArgs.NeighborhoodType === 5 || triggerArgs.NeighborhoodType === 5;
    }
    setWidgetValue() {
        this.value = this.widgetState?.value;
    }
    attachHelpClickEventHandlers() {
        const inputArgHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.inputArg.displayName,
            referenceElement: this.widgetContainer,
            helpTextID: this.inputArg?.helpTextID
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.inputArgHelpClickHandler, inputArgHelpClickHandler);
    }
    onWidthValueChange(newValue) {
        if (!newValue || newValue <= 0) {
            // invalid
            // this.triggerArgs.Width.input.set("displayedValue", this._info.columns);
            return;
        }
        this.widgetState = { ...this.widgetState, columns: newValue };
    }
    onHeightValueChange(newValue) {
        if (!newValue || newValue <= 0) {
            // this.triggerArgs.Height.input.set("displayedValue", this._info.rows);
            return;
        }
        this.widgetState = { ...this.widgetState, rows: newValue };
    }
    onNeighborhoodTypeValueChange(newValue) {
        if (newValue === 5 || newValue === 6) {
            this.renderGrid = true;
        }
        else {
            this.renderGrid = false;
        }
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, this.renderGrid ? ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.U.Scale, layout: "default", ref: (e) => {
                this.widgetContainer = e;
                this.attachHelpClickEventHandlers();
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.inputArg.displayName, hideHelp: (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_2__.i)(this.inputArg.helpTextID), onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers.get(HelpClickHandlerKeys.inputArgHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-simple-matrix", { columns: this.widgetState.columns, rows: this.widgetState.rows, value: this.widgetState.value, onRfxArgumentChange: (e) => {
                e.stopPropagation();
                const { detail: { value } } = e;
                // if values are same, do not update state
                if ((0,_common_fda1462e_js__WEBPACK_IMPORTED_MODULE_9__.i)(this.value, value)) {
                    return;
                }
                this.widgetState = { ...this.widgetState, value };
            } }))) : null));
    }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};
RfxCteNeighborhoodValues.style = rfxCteNeighborhoodValuesCss;



//# sourceMappingURL=rfx-cte-neighborhood-values-fa58c0d8.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-neighborhood-values.entry.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-neighborhood-values.entry.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_neighborhood_values: () => (/* reexport safe */ _rfx_cte_neighborhood_values_fa58c0d8_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_neighborhood_values_fa58c0d8_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-neighborhood-values-fa58c0d8.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-neighborhood-values-fa58c0d8.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _Uint8Array_68e1e3f9_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./_Uint8Array-68e1e3f9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_Uint8Array-68e1e3f9.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _multidimensional_helper_fc8fbe0e_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./multidimensional-helper-fc8fbe0e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/multidimensional-helper-fc8fbe0e.js");






















//# sourceMappingURL=rfx-cte-neighborhood-values.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js":
/*!********************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ARGS_KEYWORD),
/* harmony export */   F: () => (/* binding */ FUNCTION_KEYWORD),
/* harmony export */   R: () => (/* binding */ RFV_TYPE),
/* harmony export */   T: () => (/* binding */ TYPE_KEYWORD),
/* harmony export */   a: () => (/* binding */ isRFxArg),
/* harmony export */   b: () => (/* binding */ RFT_TYPE),
/* harmony export */   c: () => (/* binding */ isReferencedObject),
/* harmony export */   d: () => (/* binding */ isNumber),
/* harmony export */   e: () => (/* binding */ isWidgetValueBoolean),
/* harmony export */   f: () => (/* binding */ isColorRamp),
/* harmony export */   g: () => (/* binding */ isRecordSet),
/* harmony export */   h: () => (/* binding */ isFeatureLayer),
/* harmony export */   i: () => (/* binding */ isEmptyDataItem),
/* harmony export */   j: () => (/* binding */ isTileLayer),
/* harmony export */   k: () => (/* binding */ isDynamicImageryLayer),
/* harmony export */   l: () => (/* binding */ isImageryLayer),
/* harmony export */   m: () => (/* binding */ isImageryTileLayer)
/* harmony export */ });
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");


/** `Object#toString` result references. */
var mapTag = '[object Map]',
    setTag = '[object Set]';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Checks if `value` is an empty object, collection, map, or set.
 *
 * Objects are considered empty if they have no own enumerable string keyed
 * properties.
 *
 * Array-like values such as `arguments` objects, arrays, buffers, strings, or
 * jQuery-like collections are considered empty if they have a `length` of `0`.
 * Similarly, maps and sets are considered empty if they have a `size` of `0`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is empty, else `false`.
 * @example
 *
 * _.isEmpty(null);
 * // => true
 *
 * _.isEmpty(true);
 * // => true
 *
 * _.isEmpty(1);
 * // => true
 *
 * _.isEmpty([1, 2, 3]);
 * // => false
 *
 * _.isEmpty({ 'a': 1 });
 * // => false
 */
function isEmpty(value) {
  if (value == null) {
    return true;
  }
  if ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.i)(value) &&
      ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) || typeof value == 'string' || typeof value.splice == 'function' ||
        (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.b)(value) || (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.c)(value) || (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.d)(value))) {
    return !value.length;
  }
  var tag = (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.g)(value);
  if (tag == mapTag || tag == setTag) {
    return !value.size;
  }
  if ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.e)(value)) {
    return !(0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.f)(value).length;
  }
  for (var key in value) {
    if (hasOwnProperty.call(value, key)) {
      return false;
    }
  }
  return true;
}

const RFT_TYPE = "RasterFunctionTemplate";
const TYPE_KEYWORD = "type";
const RFV_TYPE = "RasterFunctionVariable";
const ARGS_KEYWORD = "arguments";
const FUNCTION_KEYWORD = "function";
function isReferencedObject(obj) {
    if (!obj) {
        return false;
    }
    if (obj._object_ref_id != null) {
        return true;
    }
    return false;
}
function isNumber(x) {
    x = String(x).trim();
    if (x === "") {
        return false;
    }
    return /^[+-]?(\d+)?(\.\d+)?$/.test(x);
}
function isWidgetValueBoolean(x) {
    x = String(x).trim();
    return ["true", "false"].indexOf(x) >= 0;
}
function isColorRamp(rfxArg) {
    if (!rfxArg) {
        return false;
    }
    if (rfxArg.type && rfxArg.type.toLowerCase().indexOf("colorramp") >= 0) {
        return true;
    }
    if (rfxArg.value && rfxArg.value.type && rfxArg.value.type.toLowerCase().indexOf("colorramp") >= 0) {
        return true;
    }
    return false;
}
function isRecordSet(rfxArg) {
    return rfxArg.type && rfxArg.type.toLowerCase().indexOf("recordset") >= 0;
}
/**
 * Determines whether the given RFT element is an RFx argument.
 *
 * @param {any} rftElement - The RFT element to check.
 * @returns {boolean} `true` if the given element is RasterFunctionTemplate,
 * RasterFunctionVariable, isColorRamp, isRecordSet; `false` otherwise.
 */
function isRFxArg(rftElement) {
    if (!rftElement) {
        return false;
    }
    const type = rftElement.type;
    return [RFT_TYPE, RFV_TYPE].indexOf(type) >= 0 || isColorRamp(rftElement) || isRecordSet(rftElement);
}
/**
 * Determines if the input is a FeatureLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.FeatureLayer} layer is a FeatureLayer
 */
function isFeatureLayer(layer) {
    return layer.type === "feature";
}
/**
 * Determines if the input is a TileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.TileLayer} layer is a TileLayer
 */
function isTileLayer(layer) {
    return layer.type === "tile";
}
/**
 * Determines if the input is a ImageryTileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryLayer} layer is a ImageryLayer
 */
function isDynamicImageryLayer(layer) {
    return (layer.type === "imagery-tile" &&
        layer.sourceJSON.capabilities.toLowerCase().indexOf("tilesonly") < 0);
}
/**
 * Determines if the input is a ImageryLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryLayer} layer is a ImageryLayer
 */
function isImageryLayer(layer) {
    return layer.type === "imagery" || isDynamicImageryLayer(layer);
}
/**
 * Determines if the input is a ImageryTileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryTileLayer} layer is a ImageryTileLayer
 */
function isImageryTileLayer(layer) {
    return layer.type === "imagery-tile" && !isDynamicImageryLayer(layer);
}
function isEveryPropertyEmpty(value) {
    let isAllPropsEmpty = true;
    if (typeof value === "object" && (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) === false) {
        // using for-in as it will work with objects with properties that set via accessors as well
        for (const prop in value) {
            // This will tell the TypeScript compiler that the obj object has a string index signature,
            // and will allow to access its properties using a string index without getting the "Element implicitly has an 'any' type" error.
            const propValue = value?.[prop];
            if (value.hasOwnProperty(prop) === true && propValue !== undefined && propValue !== null && propValue !== "") {
                isAllPropsEmpty = false;
                break;
            }
        }
    }
    return isAllPropsEmpty;
}
/**
 * Check for an empty value for data items like GPString and Field.
 * @param value data item value.
 * @returns whether the value is considered empty.
 */
function isEmptyDataItem(value) {
    return (value === undefined ||
        value === null ||
        // single-select, "" is a special case for strings
        (typeof value === "string" && value === "") ||
        // single-select, empty objects are a special case for nested values
        ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.h)(value) && isEmpty(value)) ||
        // multi-select
        (Array.isArray(value) && value.length < 1) ||
        // only testing objects which are not arrays
        // TODO: combine isEveryPropertyEmpty and isEmptyDataItem to single function
        (typeof value === "object" && (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) === false && isEveryPropertyEmpty(value)));
}



//# sourceMappingURL=type-gaurds-1840747f.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLWUxMTI4ZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtHO0FBQy9EO0FBQzhCO0FBQ1I7QUFDUDtBQUNYO0FBQ0Q7QUFDTztBQUNrQjtBQUNMO0FBQ0M7QUFDRjtBQUMxQjtBQUNPO0FBQ0s7QUFDVjtBQUNVO0FBQzRCOztBQUV2RTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixVQUFVLFVBQVU7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixVQUFVLFVBQVU7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVLFVBQVU7QUFDeEM7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdFQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQUMsaUNBQWlDLHFEQUFDLG9CQUFvQiwyQkFBMkIsb0RBQVU7QUFDNUc7QUFDQTtBQUNBLGVBQWUsRUFBRSxxREFBQyxnQkFBZ0IsNENBQTRDLDJEQUFlLHFKQUFxSixHQUFHLHFEQUFDLHdCQUF3QjtBQUM5UTtBQUNBLHdCQUF3QixVQUFVLFVBQVU7QUFDNUM7QUFDQSxvQkFBb0Isc0RBQWE7QUFDakM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxlQUFlO0FBQ2Y7QUFDQSx3QkFBd0IsT0FBTyxxREFBVTtBQUN6QztBQUNBOztBQUV5Qzs7QUFFekM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbEs2RjtBQUNoRTtBQUNNO0FBQ0E7QUFDSjtBQUNDO0FBQ2tCO0FBQ1g7QUFDRDtBQUNPO0FBQ2tCO0FBQ2pDO0FBQ0c7QUFDRTtBQUN3QjtBQUNGO0FBQzFCO0FBQ087QUFDSztBQUNBO0FBQ0k7O0FBRS9DOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEI2TDs7QUFFN0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2QsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzREFBVztBQUNqQixPQUFPLHNEQUFPO0FBQ2QsUUFBUSxzREFBUSxXQUFXLHNEQUFZLFdBQVcsc0RBQVc7QUFDN0Q7QUFDQTtBQUNBLFlBQVksc0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0EsTUFBTSxzREFBVztBQUNqQixZQUFZLHNEQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEtBQUs7QUFDaEIsYUFBYSxTQUFTO0FBQ3RCLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QixhQUFhLDhCQUE4QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsYUFBYSwyQkFBMkI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLGFBQWEsOEJBQThCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCLGFBQWEsOEJBQThCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QixhQUFhLGtDQUFrQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsc0RBQU87QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzREFBYTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxzREFBTztBQUM3Qzs7QUFFa1c7O0FBRWxXOzs7Ozs7Ozs7Ozs7Ozs7O0FDek1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOEU7O0FBRTlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LWN0ZS1uZWlnaGJvcmhvb2QtdmFsdWVzLWZhNThjMGQ4LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUtbmVpZ2hib3Job29kLXZhbHVlcy5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGEgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCB7IGkgYXMgaXNFbXB0eURhdGFJdGVtIH0gZnJvbSAnLi90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyc7XG5pbXBvcnQgeyBVIGFzIFVJRGVmYXVsdHMgfSBmcm9tICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0IHsgaSBhcyBpc09iamVjdEVxdWFsIH0gZnJvbSAnLi9jb21tb24tZmRhMTQ2MmUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuaW1wb3J0IHsgYyBhcyBjbG9uZURhdGEgfSBmcm9tICcuL211bHRpZGltZW5zaW9uYWwtaGVscGVyLWZjOGZiZTBlLmpzJztcblxuY29uc3QgSGVscENsaWNrSGFuZGxlcktleXMgPSB7XG4gICAgaW5wdXRBcmdIZWxwQ2xpY2tIYW5kbGVyOiBcImlucHV0QXJnSGVscENsaWNrSGFuZGxlclwiXG59O1xuXG5jb25zdCByZnhDdGVOZWlnaGJvcmhvb2RWYWx1ZXNDc3MgPSBcIlwiO1xuXG5jb25zdCBSZnhDdGVOZWlnaGJvcmhvb2RWYWx1ZXMgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLnJmeEFyZ3VtZW50Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJyZnhBcmd1bWVudENoYW5nZVwiLCA3KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBldmVudCBoYW5kbGVycyBmb3IgaGVscCBhY3Rpb24gY2xpY2ssIHN0b3JlZCBpbiBjb25uZWN0ZWQgY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgICogZmV0Y2hpbmcgZnVuY3Rpb24gb24gZWFjaCByZW5kZXIgKCB0byBhdm9pZCBjb21tb24gYmFkIHByYWN0aWNlIClcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJHcmlkID0gZmFsc2U7XG4gICAgICAgIHRoaXMud2lkZ2V0U3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkZ2V0QXJncyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIExpZmVjeWNsZVxuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NXaWRnZXRBcmdzKHRoaXMud2lkZ2V0QXJncyk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLnNldHVwSW5pdGlhbFN0YXRlKHRoaXMud2lkZ2V0QXJncyk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxSZW5kZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0V2lkZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvKipcbiAgICAgKiBBbGwgdmFsaWRhdGlvbiBsb2dpYyBvZiB3aWRnZXRBcmdzIC0+IG1haW5seSB0aGUgaW5wdXRBcmdzIGFuZCB0cmlnZ2VyQXR0cmlidXRlc1xuICAgICAqIGdvZXMgaGVyZVxuICAgICAqL1xuICAgIHByb2Nlc3NXaWRnZXRBcmdzKHsgaW5wdXRBcmdzLCB0cmlnZ2VyQXJncyB9KSB7XG4gICAgICAgIC8vIHNob3VsZCBoYXZlIG9ubHkgb25lIGlucHV0QXJnXG4gICAgICAgIE9iamVjdC5rZXlzKGlucHV0QXJncykuZm9yRWFjaCgoX2lucHV0QXJnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZnhBcmcgPSBpbnB1dEFyZ3NbX2lucHV0QXJnXTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRBcmcgPSByZnhBcmc7XG4gICAgICAgICAgICByZnhBcmcuaW5wdXQgPSB0aGlzLmhvc3RFbGVtZW50O1xuICAgICAgICB9KTtcbiAgICAgICAgdHJpZ2dlckFyZ3MuV2lkdGg/LmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZnhBcmd1bWVudENoYW5nZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgeyBkZXRhaWw6IHsgdmFsdWUgfSB9ID0gZXZlbnQ7XG4gICAgICAgICAgICB0aGlzLm9uV2lkdGhWYWx1ZUNoYW5nZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0cmlnZ2VyQXJncy5IZWlnaHQ/LmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZnhBcmd1bWVudENoYW5nZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgeyBkZXRhaWw6IHsgdmFsdWUgfSB9ID0gZXZlbnQ7XG4gICAgICAgICAgICB0aGlzLm9uSGVpZ2h0VmFsdWVDaGFuZ2UodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZJWE1FOiB0ZW1wIHNvbHV0aW9uXG4gICAgICAgICAqIFVJIGdldHMgc3R1Y2sgd2hlbiByZW5kZXJpbmcgbGFyZ2UgZ3JpZHMsIGV2ZW4gd2hlbiB0aGUgZ3JpZCBpcyBzdXBwb3NlZFxuICAgICAgICAgKiB0byBiZSBoaWRkZW4uIEZpeDogbGlzdGVuIHRvIE5laWdoYm9yaG9vZFR5cGUgYW5kIG9ubHkgcmVuZGVyIGdyaWQgd2hlbiB2YWx1ZSBpcyBjb3JyZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgdHJpZ2dlckFyZ3MuTmVpZ2hib3Job29kVHlwZT8uaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcInJmeEFyZ3VtZW50Q2hhbmdlXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gRG8gbm90IHN0b3AgZXZlbnQgYXMgaXQnbGwgaW50ZXJmZXJlIHdpdGggc3RhdGUgdHJpZ2dlciBoYW5kbGluZ1xuICAgICAgICAgICAgLy8gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCB7IGRldGFpbDogeyB2YWx1ZSB9IH0gPSBldmVudDtcbiAgICAgICAgICAgIHRoaXMub25OZWlnaGJvcmhvb2RUeXBlVmFsdWVDaGFuZ2UodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0dXBJbml0aWFsU3RhdGUoeyBpbnB1dEFyZ3MsIHRyaWdnZXJBcmdzIH0pIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFJvd0NvbENvdW50ID0gMztcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dEFyZ3MuTmVpZ2hib3Job29kVmFsdWVzLnZhbHVlO1xuICAgICAgICBjb25zdCBjb2xzID0gdHJpZ2dlckFyZ3MuV2lkdGg/LnZhbHVlID8/IGRlZmF1bHRSb3dDb2xDb3VudDtcbiAgICAgICAgY29uc3Qgcm93cyA9IHRyaWdnZXJBcmdzLkhlaWdodD8udmFsdWUgPz8gZGVmYXVsdFJvd0NvbENvdW50O1xuICAgICAgICB0aGlzLndpZGdldFN0YXRlID0gY2xvbmVEYXRhKHtcbiAgICAgICAgICAgIGNvbHVtbnM6IGNvbHMsXG4gICAgICAgICAgICByb3dzOiByb3dzLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIC8vIEZJWE1FXG4gICAgICAgIHRoaXMucmVuZGVyR3JpZCA9IHRyaWdnZXJBcmdzLk5laWdoYm9yaG9vZFR5cGUgPT09IDUgfHwgdHJpZ2dlckFyZ3MuTmVpZ2hib3Job29kVHlwZSA9PT0gNTtcbiAgICB9XG4gICAgc2V0V2lkZ2V0VmFsdWUoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLndpZGdldFN0YXRlPy52YWx1ZTtcbiAgICB9XG4gICAgYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRBcmdIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgIGhlYWRpbmc6IHRoaXMuaW5wdXRBcmcuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50OiB0aGlzLndpZGdldENvbnRhaW5lcixcbiAgICAgICAgICAgIGhlbHBUZXh0SUQ6IHRoaXMuaW5wdXRBcmc/LmhlbHBUZXh0SURcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMuaW5wdXRBcmdIZWxwQ2xpY2tIYW5kbGVyLCBpbnB1dEFyZ0hlbHBDbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICBvbldpZHRoVmFsdWVDaGFuZ2UobmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKCFuZXdWYWx1ZSB8fCBuZXdWYWx1ZSA8PSAwKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkXG4gICAgICAgICAgICAvLyB0aGlzLnRyaWdnZXJBcmdzLldpZHRoLmlucHV0LnNldChcImRpc3BsYXllZFZhbHVlXCIsIHRoaXMuX2luZm8uY29sdW1ucyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IHsgLi4udGhpcy53aWRnZXRTdGF0ZSwgY29sdW1uczogbmV3VmFsdWUgfTtcbiAgICB9XG4gICAgb25IZWlnaHRWYWx1ZUNoYW5nZShuZXdWYWx1ZSkge1xuICAgICAgICBpZiAoIW5ld1ZhbHVlIHx8IG5ld1ZhbHVlIDw9IDApIHtcbiAgICAgICAgICAgIC8vIHRoaXMudHJpZ2dlckFyZ3MuSGVpZ2h0LmlucHV0LnNldChcImRpc3BsYXllZFZhbHVlXCIsIHRoaXMuX2luZm8ucm93cyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IHsgLi4udGhpcy53aWRnZXRTdGF0ZSwgcm93czogbmV3VmFsdWUgfTtcbiAgICB9XG4gICAgb25OZWlnaGJvcmhvb2RUeXBlVmFsdWVDaGFuZ2UobmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09PSA1IHx8IG5ld1ZhbHVlID09PSA2KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdyaWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmlkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgdGhpcy5yZW5kZXJHcmlkID8gKGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiZGVmYXVsdFwiLCByZWY6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53aWRnZXRDb250YWluZXIgPSBlO1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpO1xuICAgICAgICAgICAgfSB9LCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMuaW5wdXRBcmcuZGlzcGxheU5hbWUsIGhpZGVIZWxwOiBpc0VtcHR5RGF0YUl0ZW0odGhpcy5pbnB1dEFyZy5oZWxwVGV4dElEKSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzLmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5pbnB1dEFyZ0hlbHBDbGlja0hhbmRsZXIpKCkgfSksIGgoXCJyZngtc2ltcGxlLW1hdHJpeFwiLCB7IGNvbHVtbnM6IHRoaXMud2lkZ2V0U3RhdGUuY29sdW1ucywgcm93czogdGhpcy53aWRnZXRTdGF0ZS5yb3dzLCB2YWx1ZTogdGhpcy53aWRnZXRTdGF0ZS52YWx1ZSwgb25SZnhBcmd1bWVudENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGV0YWlsOiB7IHZhbHVlIH0gfSA9IGU7XG4gICAgICAgICAgICAgICAgLy8gaWYgdmFsdWVzIGFyZSBzYW1lLCBkbyBub3QgdXBkYXRlIHN0YXRlXG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0RXF1YWwodGhpcy52YWx1ZSwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53aWRnZXRTdGF0ZSA9IHsgLi4udGhpcy53aWRnZXRTdGF0ZSwgdmFsdWUgfTtcbiAgICAgICAgICAgIH0gfSkpKSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0IGhvc3RFbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblJmeEN0ZU5laWdoYm9yaG9vZFZhbHVlcy5zdHlsZSA9IHJmeEN0ZU5laWdoYm9yaG9vZFZhbHVlc0NzcztcblxuZXhwb3J0IHsgUmZ4Q3RlTmVpZ2hib3Job29kVmFsdWVzIGFzIFIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS1uZWlnaGJvcmhvb2QtdmFsdWVzLWZhNThjMGQ4LmpzLm1hcCIsImV4cG9ydCB7IFIgYXMgcmZ4X2N0ZV9uZWlnaGJvcmhvb2RfdmFsdWVzIH0gZnJvbSAnLi9yZngtY3RlLW5laWdoYm9yaG9vZC12YWx1ZXMtZmE1OGMwZDguanMnO1xuaW1wb3J0ICcuL2luZGV4LWRhMWI3MTM4LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvbGFuZy5qcyc7XG5pbXBvcnQgJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0ICcuL19nZXRUYWctOTZhZjAyOWQuanMnO1xuaW1wb3J0ICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0ICcuL2NvbW1vbi1mZGExNDYyZS5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnLi9fVWludDhBcnJheS02OGUxZTNmOS5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuaW1wb3J0ICcuL211bHRpZGltZW5zaW9uYWwtaGVscGVyLWZjOGZiZTBlLmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS1uZWlnaGJvcmhvb2QtdmFsdWVzLmVudHJ5LmpzLm1hcCIsImltcG9ydCB7IGkgYXMgaXNBcnJheUxpa2UsIGEgYXMgaXNBcnJheSwgYiBhcyBpc0J1ZmZlciwgYyBhcyBpc1R5cGVkQXJyYXksIGQgYXMgaXNBcmd1bWVudHMsIGcgYXMgZ2V0VGFnLCBlIGFzIGlzUHJvdG90eXBlLCBmIGFzIGJhc2VLZXlzLCBoIGFzIGlzUGxhaW5PYmplY3QgfSBmcm9tICcuL19nZXRUYWctOTZhZjAyOWQuanMnO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gZW1wdHkgb2JqZWN0LCBjb2xsZWN0aW9uLCBtYXAsIG9yIHNldC5cbiAqXG4gKiBPYmplY3RzIGFyZSBjb25zaWRlcmVkIGVtcHR5IGlmIHRoZXkgaGF2ZSBubyBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWRcbiAqIHByb3BlcnRpZXMuXG4gKlxuICogQXJyYXktbGlrZSB2YWx1ZXMgc3VjaCBhcyBgYXJndW1lbnRzYCBvYmplY3RzLCBhcnJheXMsIGJ1ZmZlcnMsIHN0cmluZ3MsIG9yXG4gKiBqUXVlcnktbGlrZSBjb2xsZWN0aW9ucyBhcmUgY29uc2lkZXJlZCBlbXB0eSBpZiB0aGV5IGhhdmUgYSBgbGVuZ3RoYCBvZiBgMGAuXG4gKiBTaW1pbGFybHksIG1hcHMgYW5kIHNldHMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYHNpemVgIG9mIGAwYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBlbXB0eSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRW1wdHkobnVsbCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0VtcHR5KHRydWUpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNFbXB0eSgxKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRW1wdHkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0VtcHR5KHsgJ2EnOiAxIH0pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiZcbiAgICAgIChpc0FycmF5KHZhbHVlKSB8fCB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlLnNwbGljZSA9PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgIGlzQnVmZmVyKHZhbHVlKSB8fCBpc1R5cGVkQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gIXZhbHVlLmxlbmd0aDtcbiAgfVxuICB2YXIgdGFnID0gZ2V0VGFnKHZhbHVlKTtcbiAgaWYgKHRhZyA9PSBtYXBUYWcgfHwgdGFnID09IHNldFRhZykge1xuICAgIHJldHVybiAhdmFsdWUuc2l6ZTtcbiAgfVxuICBpZiAoaXNQcm90b3R5cGUodmFsdWUpKSB7XG4gICAgcmV0dXJuICFiYXNlS2V5cyh2YWx1ZSkubGVuZ3RoO1xuICB9XG4gIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBSRlRfVFlQRSA9IFwiUmFzdGVyRnVuY3Rpb25UZW1wbGF0ZVwiO1xuY29uc3QgVFlQRV9LRVlXT1JEID0gXCJ0eXBlXCI7XG5jb25zdCBSRlZfVFlQRSA9IFwiUmFzdGVyRnVuY3Rpb25WYXJpYWJsZVwiO1xuY29uc3QgQVJHU19LRVlXT1JEID0gXCJhcmd1bWVudHNcIjtcbmNvbnN0IEZVTkNUSU9OX0tFWVdPUkQgPSBcImZ1bmN0aW9uXCI7XG5mdW5jdGlvbiBpc1JlZmVyZW5jZWRPYmplY3Qob2JqKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAob2JqLl9vYmplY3RfcmVmX2lkICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzTnVtYmVyKHgpIHtcbiAgICB4ID0gU3RyaW5nKHgpLnRyaW0oKTtcbiAgICBpZiAoeCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAvXlsrLV0/KFxcZCspPyhcXC5cXGQrKT8kLy50ZXN0KHgpO1xufVxuZnVuY3Rpb24gaXNXaWRnZXRWYWx1ZUJvb2xlYW4oeCkge1xuICAgIHggPSBTdHJpbmcoeCkudHJpbSgpO1xuICAgIHJldHVybiBbXCJ0cnVlXCIsIFwiZmFsc2VcIl0uaW5kZXhPZih4KSA+PSAwO1xufVxuZnVuY3Rpb24gaXNDb2xvclJhbXAocmZ4QXJnKSB7XG4gICAgaWYgKCFyZnhBcmcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAocmZ4QXJnLnR5cGUgJiYgcmZ4QXJnLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY29sb3JyYW1wXCIpID49IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChyZnhBcmcudmFsdWUgJiYgcmZ4QXJnLnZhbHVlLnR5cGUgJiYgcmZ4QXJnLnZhbHVlLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY29sb3JyYW1wXCIpID49IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzUmVjb3JkU2V0KHJmeEFyZykge1xuICAgIHJldHVybiByZnhBcmcudHlwZSAmJiByZnhBcmcudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJyZWNvcmRzZXRcIikgPj0gMDtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBSRlQgZWxlbWVudCBpcyBhbiBSRnggYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHthbnl9IHJmdEVsZW1lbnQgLSBUaGUgUkZUIGVsZW1lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnaXZlbiBlbGVtZW50IGlzIFJhc3RlckZ1bmN0aW9uVGVtcGxhdGUsXG4gKiBSYXN0ZXJGdW5jdGlvblZhcmlhYmxlLCBpc0NvbG9yUmFtcCwgaXNSZWNvcmRTZXQ7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc1JGeEFyZyhyZnRFbGVtZW50KSB7XG4gICAgaWYgKCFyZnRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHJmdEVsZW1lbnQudHlwZTtcbiAgICByZXR1cm4gW1JGVF9UWVBFLCBSRlZfVFlQRV0uaW5kZXhPZih0eXBlKSA+PSAwIHx8IGlzQ29sb3JSYW1wKHJmdEVsZW1lbnQpIHx8IGlzUmVjb3JkU2V0KHJmdEVsZW1lbnQpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCBpcyBhIEZlYXR1cmVMYXllclxuICogQHBhcmFtIHtfX2VzcmkuTGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBjaGVjayB0aGUgdHlwZSBvZlxuICogQHJldHVybnMge2xheWVyIGlzIF9fZXNyaS5GZWF0dXJlTGF5ZXJ9IGxheWVyIGlzIGEgRmVhdHVyZUxheWVyXG4gKi9cbmZ1bmN0aW9uIGlzRmVhdHVyZUxheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLnR5cGUgPT09IFwiZmVhdHVyZVwiO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCBpcyBhIFRpbGVMYXllclxuICogQHBhcmFtIHtfX2VzcmkuTGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBjaGVjayB0aGUgdHlwZSBvZlxuICogQHJldHVybnMge2xheWVyIGlzIF9fZXNyaS5UaWxlTGF5ZXJ9IGxheWVyIGlzIGEgVGlsZUxheWVyXG4gKi9cbmZ1bmN0aW9uIGlzVGlsZUxheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLnR5cGUgPT09IFwidGlsZVwiO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCBpcyBhIEltYWdlcnlUaWxlTGF5ZXJcbiAqIEBwYXJhbSB7X19lc3JpLkxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gY2hlY2sgdGhlIHR5cGUgb2ZcbiAqIEByZXR1cm5zIHtsYXllciBpcyBfX2VzcmkuSW1hZ2VyeUxheWVyfSBsYXllciBpcyBhIEltYWdlcnlMYXllclxuICovXG5mdW5jdGlvbiBpc0R5bmFtaWNJbWFnZXJ5TGF5ZXIobGF5ZXIpIHtcbiAgICByZXR1cm4gKGxheWVyLnR5cGUgPT09IFwiaW1hZ2VyeS10aWxlXCIgJiZcbiAgICAgICAgbGF5ZXIuc291cmNlSlNPTi5jYXBhYmlsaXRpZXMudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwidGlsZXNvbmx5XCIpIDwgMCk7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGlucHV0IGlzIGEgSW1hZ2VyeUxheWVyXG4gKiBAcGFyYW0ge19fZXNyaS5MYXllcn0gbGF5ZXIgdGhlIGxheWVyIHRvIGNoZWNrIHRoZSB0eXBlIG9mXG4gKiBAcmV0dXJucyB7bGF5ZXIgaXMgX19lc3JpLkltYWdlcnlMYXllcn0gbGF5ZXIgaXMgYSBJbWFnZXJ5TGF5ZXJcbiAqL1xuZnVuY3Rpb24gaXNJbWFnZXJ5TGF5ZXIobGF5ZXIpIHtcbiAgICByZXR1cm4gbGF5ZXIudHlwZSA9PT0gXCJpbWFnZXJ5XCIgfHwgaXNEeW5hbWljSW1hZ2VyeUxheWVyKGxheWVyKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgaW5wdXQgaXMgYSBJbWFnZXJ5VGlsZUxheWVyXG4gKiBAcGFyYW0ge19fZXNyaS5MYXllcn0gbGF5ZXIgdGhlIGxheWVyIHRvIGNoZWNrIHRoZSB0eXBlIG9mXG4gKiBAcmV0dXJucyB7bGF5ZXIgaXMgX19lc3JpLkltYWdlcnlUaWxlTGF5ZXJ9IGxheWVyIGlzIGEgSW1hZ2VyeVRpbGVMYXllclxuICovXG5mdW5jdGlvbiBpc0ltYWdlcnlUaWxlTGF5ZXIobGF5ZXIpIHtcbiAgICByZXR1cm4gbGF5ZXIudHlwZSA9PT0gXCJpbWFnZXJ5LXRpbGVcIiAmJiAhaXNEeW5hbWljSW1hZ2VyeUxheWVyKGxheWVyKTtcbn1cbmZ1bmN0aW9uIGlzRXZlcnlQcm9wZXJ0eUVtcHR5KHZhbHVlKSB7XG4gICAgbGV0IGlzQWxsUHJvcHNFbXB0eSA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBpc0FycmF5KHZhbHVlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gdXNpbmcgZm9yLWluIGFzIGl0IHdpbGwgd29yayB3aXRoIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgc2V0IHZpYSBhY2Nlc3NvcnMgYXMgd2VsbFxuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCB0ZWxsIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIHRoYXQgdGhlIG9iaiBvYmplY3QgaGFzIGEgc3RyaW5nIGluZGV4IHNpZ25hdHVyZSxcbiAgICAgICAgICAgIC8vIGFuZCB3aWxsIGFsbG93IHRvIGFjY2VzcyBpdHMgcHJvcGVydGllcyB1c2luZyBhIHN0cmluZyBpbmRleCB3aXRob3V0IGdldHRpbmcgdGhlIFwiRWxlbWVudCBpbXBsaWNpdGx5IGhhcyBhbiAnYW55JyB0eXBlXCIgZXJyb3IuXG4gICAgICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSB2YWx1ZT8uW3Byb3BdO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KHByb3ApID09PSB0cnVlICYmIHByb3BWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIHByb3BWYWx1ZSAhPT0gbnVsbCAmJiBwcm9wVmFsdWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBpc0FsbFByb3BzRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNBbGxQcm9wc0VtcHR5O1xufVxuLyoqXG4gKiBDaGVjayBmb3IgYW4gZW1wdHkgdmFsdWUgZm9yIGRhdGEgaXRlbXMgbGlrZSBHUFN0cmluZyBhbmQgRmllbGQuXG4gKiBAcGFyYW0gdmFsdWUgZGF0YSBpdGVtIHZhbHVlLlxuICogQHJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgaXMgY29uc2lkZXJlZCBlbXB0eS5cbiAqL1xuZnVuY3Rpb24gaXNFbXB0eURhdGFJdGVtKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgIC8vIHNpbmdsZS1zZWxlY3QsIFwiXCIgaXMgYSBzcGVjaWFsIGNhc2UgZm9yIHN0cmluZ3NcbiAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSA9PT0gXCJcIikgfHxcbiAgICAgICAgLy8gc2luZ2xlLXNlbGVjdCwgZW1wdHkgb2JqZWN0cyBhcmUgYSBzcGVjaWFsIGNhc2UgZm9yIG5lc3RlZCB2YWx1ZXNcbiAgICAgICAgKGlzUGxhaW5PYmplY3QodmFsdWUpICYmIGlzRW1wdHkodmFsdWUpKSB8fFxuICAgICAgICAvLyBtdWx0aS1zZWxlY3RcbiAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA8IDEpIHx8XG4gICAgICAgIC8vIG9ubHkgdGVzdGluZyBvYmplY3RzIHdoaWNoIGFyZSBub3QgYXJyYXlzXG4gICAgICAgIC8vIFRPRE86IGNvbWJpbmUgaXNFdmVyeVByb3BlcnR5RW1wdHkgYW5kIGlzRW1wdHlEYXRhSXRlbSB0byBzaW5nbGUgZnVuY3Rpb25cbiAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBpc0FycmF5KHZhbHVlKSA9PT0gZmFsc2UgJiYgaXNFdmVyeVByb3BlcnR5RW1wdHkodmFsdWUpKSk7XG59XG5cbmV4cG9ydCB7IEFSR1NfS0VZV09SRCBhcyBBLCBGVU5DVElPTl9LRVlXT1JEIGFzIEYsIFJGVl9UWVBFIGFzIFIsIFRZUEVfS0VZV09SRCBhcyBULCBpc1JGeEFyZyBhcyBhLCBSRlRfVFlQRSBhcyBiLCBpc1JlZmVyZW5jZWRPYmplY3QgYXMgYywgaXNOdW1iZXIgYXMgZCwgaXNXaWRnZXRWYWx1ZUJvb2xlYW4gYXMgZSwgaXNDb2xvclJhbXAgYXMgZiwgaXNSZWNvcmRTZXQgYXMgZywgaXNGZWF0dXJlTGF5ZXIgYXMgaCwgaXNFbXB0eURhdGFJdGVtIGFzIGksIGlzVGlsZUxheWVyIGFzIGosIGlzRHluYW1pY0ltYWdlcnlMYXllciBhcyBrLCBpc0ltYWdlcnlMYXllciBhcyBsLCBpc0ltYWdlcnlUaWxlTGF5ZXIgYXMgbSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcy5tYXAiLCJjb25zdCBVSURlZmF1bHRzID0ge1xuICAgIFNjYWxlOiBcInNcIixcbiAgICBQb3BvdmVyVGltZXI6IDYwXG59O1xuY29uc3QgQ2FsY2l0ZVNjYWxlID0ge1xuICAgIHM6IFwic1wiLFxuICAgIG06IFwibVwiXG59O1xuY29uc3QgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyA9IHtcbiAgICBhYnNvbHV0ZTogXCJhYnNvbHV0ZVwiLFxuICAgIGZpeGVkOiBcImZpeGVkXCJcbn07XG5cbmV4cG9ydCB7IENhbGNpdGVTY2FsZSBhcyBDLCBVSURlZmF1bHRzIGFzIFUsIENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgYXMgYSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11aS11dGlscy05MjhhNDA5Ni5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=