"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b06de6"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-simple-color-picker.entry.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-simple-color-picker.entry.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_simple_color_picker: () => (/* binding */ ArcgisSimpleColorPicker)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */





const CSS = {
    colorHolder: "color-holder",
    colorInputDisplayDiv: "color-input-display-div",
    colorItem: "color-item",
    colorItemSelected: "color-item--selected",
    colorPicker: "color-picker",
    colorPickerHexInput: "color-picker-hex-input"
};

const arcgisSimpleColorPickerCss = ".color-input-display-div{align-items:stretch;display:flex;justify-content:space-between;width:100%;position:relative}.color-picker-hex-input{font:var(--arcgis-app-font-size-0) var(--arcgis-app-font-family);box-shadow:none;border:1px solid var(--arcgis-app-border);border-radius:var(--arcgis-app-border-radius) 0 0 var(--arcgis-app-border-radius);min-width:85%;margin:0;flex:0 1 85%;height:2rem}.color-holder{flex:1 0 auto;border-radius:0 var(--arcgis-app-border-radius) var(--arcgis-app-border-radius) 0;border:1px solid var(--arcgis-app-border);border-left:none;cursor:pointer}.color-picker{display:flex;flex-flow:row wrap;width:11.2rem;background:var(--arcgis-app-background);padding:var(--arcgis-app-cap-spacing-quarter) var(--arcgis-app-side-spacing-quarter);margin-bottom:var(--arcgis-app-cap-spacing);border:1px solid var(--arcgis-app-border-subtle);box-shadow:var(--arcgis-app-shadow-0);position:absolute;margin-top:2rem;right:0;z-index:1000}.arcgis--rtl .color-picker-hex-input{border-radius:0 var(--arcgis-app-border-radius) var(--arcgis-app-border-radius) 0}.arcgis--rtl .color-holder{border-radius:var(--arcgis-app-border-radius) 0 0 var(--arcgis-app-border-radius);border-right:none;border-left:unset}.arcgis--rtl .color-picker{right:unset;left:0}.color-picker .color-item{box-shadow:0 0 0 1px var(--arcgis-app-border);flex:0 0 1rem;cursor:pointer;width:1rem;height:1rem;list-style-type:none;margin:0.2rem}.color-picker .color-item--selected{box-shadow:0 0 0 2px var(--arcgis-app-foreground), 0 0 0 2px var(--arcgis-app-background) inset;border-radius:50%}.color-picker .color-item:hover{box-shadow:0 0 0 2px var(--arcgis-app-border-hover)}";

const ArcgisSimpleColorPicker = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.colorChanged = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "colorChanged", 7);
        this.textColorList = [
            "#ff4040",
            "#ff8202",
            "#faa83e",
            "#ffd159",
            "#73b566",
            "#008977",
            "#33e3c8",
            "#43abeb",
            "#4b64c9",
            "#9868ed",
            "#b055e6",
            "#db5181",
            "#e03b99",
            "#2b2b2b",
            "#bdbdbd",
            "#ffffff"
        ];
        this.haloColorList = [
            "#ffffff",
            "#bdbdbd",
            "#2b2b2b",
            "#e03b99",
            "#db5181",
            "#b055e6",
            "#9868ed",
            "#4b64c9",
            "#43abeb",
            "#33e3c8",
            "#008977",
            "#73b566",
            "#ffd159",
            "#faa83e",
            "#ff8202",
            "#ff4040"
        ];
        this.colorList = [];
        this.guid = undefined;
        this.inputColorHex = undefined;
        this.colorType = undefined;
        this.intlColor = undefined;
    }
    componentWillLoad() {
        if (this.colorType === "textColor") {
            this.colorList = this.textColorList;
        }
        else if (this.colorType === "haloColor") {
            this.colorList = this.haloColorList;
        }
        else {
            this.colorList = this.textColorList;
        }
    }
    // Public Methods
    async updateColor(updateColor) {
        if (updateColor === null || updateColor === void 0 ? void 0 : updateColor.toHex()) {
            this.setColor(updateColor.toHex());
        }
    }
    showHideColors(show) {
        const colorPicker = this.hostElement.shadowRoot.getElementById("color-picker");
        colorPicker.style.display = show ? "flex" : "none";
        if (show) {
            colorPicker.style.display = "flex";
        }
        else {
            colorPicker.style.display = "none";
            // https://stackoverflow.com/questions/8027423/how-to-check-if-a-string-is-a-valid-hex-color-representation/8027444
            if (/^#([0-9A-F]{3}){1,2}$/i.test(this.hexInputElement.value)) {
                this.setColor(this.hexInputElement.value);
            }
            else {
                this.setColor("#000000");
            }
        }
    }
    setColor(color) {
        this.inputColorHex = color;
        this.hostElement.shadowRoot.getElementById("colorHolder_Id").style.background = color;
        this.hexInputElement.value = color;
        this.colorChanged.emit([this.guid, this.colorType, color]);
    }
    render() {
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { dir: (0,_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.hostElement), class: (0,_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.hostElement) === "rtl" && _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.C.rtl }, this.intlColor, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.colorInputDisplayDiv }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("input", { type: "text", autoComplete: "Off", name: "custom_color", placeholder: "#Hex", class: CSS.colorPickerHexInput, value: this.inputColorHex, ref: (element) => {
                this.hexInputElement = element;
            }, onClick: (event) => {
                event.stopPropagation();
                this.showHideColors(true);
            }, onBlur: (event) => {
                event.stopPropagation();
                this.showHideColors(false);
            } }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.colorHolder, id: "colorHolder_Id", style: { background: this.inputColorHex }, onClick: (event) => {
                event.stopPropagation();
                this.showHideColors(true);
            }, onBlur: (event) => {
                event.stopPropagation();
                this.showHideColors(false);
            } }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.colorPicker, id: "color-picker", style: { display: "none" } }, this.colorList.map((color) => {
            const colorItemClasses = this.inputColorHex !== color
                ? CSS.colorItem
                : `${CSS.colorItemSelected} ${CSS.colorItem}`;
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: colorItemClasses, "data-hex": color, style: { backgroundColor: color }, onMouseDown: (event) => {
                    event.preventDefault();
                    this.setColor(color);
                    this.showHideColors(false);
                } }));
        }))))));
    }
    get hostElement() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSimpleColorPicker.style = arcgisSimpleColorPickerCss;



//# sourceMappingURL=arcgis-simple-color-picker.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS_UTILITY),
/* harmony export */   a: () => (/* binding */ formatDate),
/* harmony export */   b: () => (/* binding */ formatPlural),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   g: () => (/* binding */ getElementDir),
/* harmony export */   l: () => (/* binding */ languageMap)
/* harmony export */ });
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



const languageMap = new Map([
    ["ar", "ar"],
    ["bg", "bg"],
    ["bs", "bs"],
    ["ca", "ca"],
    ["cs", "cs"],
    ["da", "da"],
    ["de", "de"],
    ["el", "el"],
    ["en", "en"],
    ["es", "es"],
    ["et", "et"],
    ["fi", "fi"],
    ["fr", "fr"],
    ["he", "he"],
    ["hr", "hr"],
    ["hu", "hu"],
    ["id", "id"],
    ["it", "it"],
    ["ja", "ja"],
    ["ko", "ko"],
    ["lt", "lt"],
    ["lv", "lv"],
    ["nb", "nb"],
    ["nl", "nl"],
    ["pl", "pl"],
    ["pt-br", "pt-BR"],
    ["pt-pt", "pt-PT"],
    ["ro", "ro"],
    ["ru", "ru"],
    ["sk", "sk"],
    ["sl", "sl"],
    ["sr", "sr"],
    ["sv", "sv"],
    ["th", "th"],
    ["tr", "tr"],
    ["uk", "uk"],
    ["vi", "vi"],
    ["zh-cn", "zh-CN"],
    ["zh-hk", "zh-HK"],
    ["zh-tw", "zh-TW"]
]);
// rtl
function getElementDir(el) {
    return getElementProp(el, "dir", "ltr");
}
function getElementProp(el, prop, value) {
    const closestWithProp = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__.c)(el, `[${prop}]`);
    return closestWithProp ? closestWithProp.getAttribute(prop) : value;
}
// css
const CSS_UTILITY = {
    rtl: "arcgis--rtl"
};
async function formatNumber(number, options) {
    const { api, type, places } = options || {};
    if (api === 4) {
        const [intl] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["esri/intl"]);
        const numberFormatIntlOptions = intl.convertNumberFormatToIntlOptions({
            places,
            style: type,
            digitSeparator: true
        });
        return intl.formatNumber(number, Object.assign(Object.assign({}, numberFormatIntlOptions), { style: type }));
    }
    const [dojoNumber] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["dojo/number"]);
    return dojoNumber.format(number, {
        type,
        places,
        pattern: options === null || options === void 0 ? void 0 : options.pattern
    });
}
const cache = {};
function formatDate(date) {
    const lang = document.documentElement.lang;
    const dayShortMonthYear = {
        year: "numeric",
        month: "short",
        day: "numeric"
    };
    if (!cache[lang]) {
        cache[lang] = new Intl.DateTimeFormat(document.documentElement.lang, dayShortMonthYear);
    }
    return cache[lang].format(date);
}
function formatPlural(lang, stringObj, number) {
    const singles = ["id", "ja", "ko", "th", "vi", "zh-cn", "zh-hk", "zh-tw"];
    const likeEnglish = [
        "en",
        "ca",
        "da",
        "de",
        "el",
        "es",
        "et",
        "fi",
        "hi",
        "hu",
        "it",
        "nb",
        "nl",
        "pt-pt",
        "sv",
        "tr"
    ];
    const locale = lang !== null && lang !== void 0 ? lang : "en";
    // if the number is one, or it is a "simple" language, return the 1 string
    if (number === 1 || singles.includes(locale)) {
        return stringObj.single.replace("${number}", "1");
    }
    // if the number is not 1 and the language uses the same pluralization strategy as english,
    // return the multiple string
    if (number !== 1 && likeEnglish.includes(locale)) {
        return stringObj.multiple.replace("${number}", `${number}`);
    }
    // if none of the above worked, return the "unknown" string
    return stringObj.unknown.replace("${number}", `${number}`);
}



//# sourceMappingURL=languageUtil-ef0e54b2.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWIwNmRlNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQzNCO0FBQy9DO0FBQ1I7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQTZELG9CQUFvQixhQUFhLDhCQUE4QixXQUFXLGtCQUFrQix3QkFBd0IsaUVBQWlFLGdCQUFnQiwwQ0FBMEMsa0ZBQWtGLGNBQWMsU0FBUyxhQUFhLFlBQVksY0FBYyxjQUFjLGtGQUFrRiwwQ0FBMEMsaUJBQWlCLGVBQWUsY0FBYyxhQUFhLG1CQUFtQixjQUFjLHdDQUF3QyxxRkFBcUYsNENBQTRDLGlEQUFpRCxzQ0FBc0Msa0JBQWtCLGdCQUFnQixRQUFRLGFBQWEscUNBQXFDLGtGQUFrRiwyQkFBMkIsa0ZBQWtGLGtCQUFrQixrQkFBa0IsMkJBQTJCLFlBQVksT0FBTywwQkFBMEIsOENBQThDLGNBQWMsZUFBZSxXQUFXLFlBQVkscUJBQXFCLGNBQWMsb0NBQW9DLGdHQUFnRyxrQkFBa0IsZ0NBQWdDLG9EQUFvRDs7QUFFeHBEO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4Qiw0QkFBNEIscURBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixFQUFFLEVBQUUsSUFBSTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFDLENBQUMsaURBQUksUUFBUSxxREFBQyxvQkFBb0IsS0FBSyw0REFBYSwyQkFBMkIsNERBQWEsZ0NBQWdDLHdEQUFXLE1BQU0sa0JBQWtCLHFEQUFDLFVBQVUsaUNBQWlDLEVBQUUscURBQUMsWUFBWTtBQUMzTztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlLEdBQUcscURBQUMsVUFBVSx1REFBdUQsZ0NBQWdDO0FBQ3BIO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWUsR0FBRyxxREFBQyxVQUFVLHFEQUFxRCxtQkFBbUI7QUFDckc7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUIsRUFBRSxjQUFjO0FBQzVELG9CQUFvQixxREFBQyxTQUFTLHFEQUFxRCx3QkFBd0I7QUFDM0c7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLFNBQVM7QUFDVDtBQUNBLHdCQUF3QixPQUFPLHFEQUFVO0FBQ3pDO0FBQ0E7O0FBRWlFOztBQUVqRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDMUlBO0FBQ0E7QUFDQTtBQUNBO0FBQzZEO0FBQ2M7O0FBRTNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsbURBQWlDLFNBQVMsS0FBSztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0EsNkJBQTZCLDJEQUFXO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVFQUF1RSw4QkFBOEIsYUFBYTtBQUNsSDtBQUNBLCtCQUErQiwyREFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLE9BQU8sTUFBTSxPQUFPO0FBQ2pFO0FBQ0E7QUFDQSx3Q0FBd0MsT0FBTyxNQUFNLE9BQU87QUFDNUQ7O0FBRXlIOztBQUV6SCIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1zaW1wbGUtY29sb3ItcGlja2VyLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0RWxlbWVudERpciwgQyBhcyBDU1NfVVRJTElUWSB9IGZyb20gJy4vbGFuZ3VhZ2VVdGlsLWVmMGU1NGIyLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1iNGFjMTI0Ny5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcblxuY29uc3QgQ1NTID0ge1xuICAgIGNvbG9ySG9sZGVyOiBcImNvbG9yLWhvbGRlclwiLFxuICAgIGNvbG9ySW5wdXREaXNwbGF5RGl2OiBcImNvbG9yLWlucHV0LWRpc3BsYXktZGl2XCIsXG4gICAgY29sb3JJdGVtOiBcImNvbG9yLWl0ZW1cIixcbiAgICBjb2xvckl0ZW1TZWxlY3RlZDogXCJjb2xvci1pdGVtLS1zZWxlY3RlZFwiLFxuICAgIGNvbG9yUGlja2VyOiBcImNvbG9yLXBpY2tlclwiLFxuICAgIGNvbG9yUGlja2VySGV4SW5wdXQ6IFwiY29sb3ItcGlja2VyLWhleC1pbnB1dFwiXG59O1xuXG5jb25zdCBhcmNnaXNTaW1wbGVDb2xvclBpY2tlckNzcyA9IFwiLmNvbG9yLWlucHV0LWRpc3BsYXktZGl2e2FsaWduLWl0ZW1zOnN0cmV0Y2g7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmV9LmNvbG9yLXBpY2tlci1oZXgtaW5wdXR7Zm9udDp2YXIoLS1hcmNnaXMtYXBwLWZvbnQtc2l6ZS0wKSB2YXIoLS1hcmNnaXMtYXBwLWZvbnQtZmFtaWx5KTtib3gtc2hhZG93Om5vbmU7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpO21pbi13aWR0aDo4NSU7bWFyZ2luOjA7ZmxleDowIDEgODUlO2hlaWdodDoycmVtfS5jb2xvci1ob2xkZXJ7ZmxleDoxIDAgYXV0bztib3JkZXItcmFkaXVzOjAgdmFyKC0tYXJjZ2lzLWFwcC1ib3JkZXItcmFkaXVzKSB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpIDA7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlcik7Ym9yZGVyLWxlZnQ6bm9uZTtjdXJzb3I6cG9pbnRlcn0uY29sb3ItcGlja2Vye2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IHdyYXA7d2lkdGg6MTEuMnJlbTtiYWNrZ3JvdW5kOnZhcigtLWFyY2dpcy1hcHAtYmFja2dyb3VuZCk7cGFkZGluZzp2YXIoLS1hcmNnaXMtYXBwLWNhcC1zcGFjaW5nLXF1YXJ0ZXIpIHZhcigtLWFyY2dpcy1hcHAtc2lkZS1zcGFjaW5nLXF1YXJ0ZXIpO21hcmdpbi1ib3R0b206dmFyKC0tYXJjZ2lzLWFwcC1jYXAtc3BhY2luZyk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1zdWJ0bGUpO2JveC1zaGFkb3c6dmFyKC0tYXJjZ2lzLWFwcC1zaGFkb3ctMCk7cG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLXRvcDoycmVtO3JpZ2h0OjA7ei1pbmRleDoxMDAwfS5hcmNnaXMtLXJ0bCAuY29sb3ItcGlja2VyLWhleC1pbnB1dHtib3JkZXItcmFkaXVzOjAgdmFyKC0tYXJjZ2lzLWFwcC1ib3JkZXItcmFkaXVzKSB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpIDB9LmFyY2dpcy0tcnRsIC5jb2xvci1ob2xkZXJ7Ym9yZGVyLXJhZGl1czp2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1hcmNnaXMtYXBwLWJvcmRlci1yYWRpdXMpO2JvcmRlci1yaWdodDpub25lO2JvcmRlci1sZWZ0OnVuc2V0fS5hcmNnaXMtLXJ0bCAuY29sb3ItcGlja2Vye3JpZ2h0OnVuc2V0O2xlZnQ6MH0uY29sb3ItcGlja2VyIC5jb2xvci1pdGVte2JveC1zaGFkb3c6MCAwIDAgMXB4IHZhcigtLWFyY2dpcy1hcHAtYm9yZGVyKTtmbGV4OjAgMCAxcmVtO2N1cnNvcjpwb2ludGVyO3dpZHRoOjFyZW07aGVpZ2h0OjFyZW07bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luOjAuMnJlbX0uY29sb3ItcGlja2VyIC5jb2xvci1pdGVtLS1zZWxlY3RlZHtib3gtc2hhZG93OjAgMCAwIDJweCB2YXIoLS1hcmNnaXMtYXBwLWZvcmVncm91bmQpLCAwIDAgMCAycHggdmFyKC0tYXJjZ2lzLWFwcC1iYWNrZ3JvdW5kKSBpbnNldDtib3JkZXItcmFkaXVzOjUwJX0uY29sb3ItcGlja2VyIC5jb2xvci1pdGVtOmhvdmVye2JveC1zaGFkb3c6MCAwIDAgMnB4IHZhcigtLWFyY2dpcy1hcHAtYm9yZGVyLWhvdmVyKX1cIjtcblxuY29uc3QgQXJjZ2lzU2ltcGxlQ29sb3JQaWNrZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmNvbG9yQ2hhbmdlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY29sb3JDaGFuZ2VkXCIsIDcpO1xuICAgICAgICB0aGlzLnRleHRDb2xvckxpc3QgPSBbXG4gICAgICAgICAgICBcIiNmZjQwNDBcIixcbiAgICAgICAgICAgIFwiI2ZmODIwMlwiLFxuICAgICAgICAgICAgXCIjZmFhODNlXCIsXG4gICAgICAgICAgICBcIiNmZmQxNTlcIixcbiAgICAgICAgICAgIFwiIzczYjU2NlwiLFxuICAgICAgICAgICAgXCIjMDA4OTc3XCIsXG4gICAgICAgICAgICBcIiMzM2UzYzhcIixcbiAgICAgICAgICAgIFwiIzQzYWJlYlwiLFxuICAgICAgICAgICAgXCIjNGI2NGM5XCIsXG4gICAgICAgICAgICBcIiM5ODY4ZWRcIixcbiAgICAgICAgICAgIFwiI2IwNTVlNlwiLFxuICAgICAgICAgICAgXCIjZGI1MTgxXCIsXG4gICAgICAgICAgICBcIiNlMDNiOTlcIixcbiAgICAgICAgICAgIFwiIzJiMmIyYlwiLFxuICAgICAgICAgICAgXCIjYmRiZGJkXCIsXG4gICAgICAgICAgICBcIiNmZmZmZmZcIlxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmhhbG9Db2xvckxpc3QgPSBbXG4gICAgICAgICAgICBcIiNmZmZmZmZcIixcbiAgICAgICAgICAgIFwiI2JkYmRiZFwiLFxuICAgICAgICAgICAgXCIjMmIyYjJiXCIsXG4gICAgICAgICAgICBcIiNlMDNiOTlcIixcbiAgICAgICAgICAgIFwiI2RiNTE4MVwiLFxuICAgICAgICAgICAgXCIjYjA1NWU2XCIsXG4gICAgICAgICAgICBcIiM5ODY4ZWRcIixcbiAgICAgICAgICAgIFwiIzRiNjRjOVwiLFxuICAgICAgICAgICAgXCIjNDNhYmViXCIsXG4gICAgICAgICAgICBcIiMzM2UzYzhcIixcbiAgICAgICAgICAgIFwiIzAwODk3N1wiLFxuICAgICAgICAgICAgXCIjNzNiNTY2XCIsXG4gICAgICAgICAgICBcIiNmZmQxNTlcIixcbiAgICAgICAgICAgIFwiI2ZhYTgzZVwiLFxuICAgICAgICAgICAgXCIjZmY4MjAyXCIsXG4gICAgICAgICAgICBcIiNmZjQwNDBcIlxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmNvbG9yTGlzdCA9IFtdO1xuICAgICAgICB0aGlzLmd1aWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW5wdXRDb2xvckhleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jb2xvclR5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaW50bENvbG9yID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3JUeXBlID09PSBcInRleHRDb2xvclwiKSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yTGlzdCA9IHRoaXMudGV4dENvbG9yTGlzdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbG9yVHlwZSA9PT0gXCJoYWxvQ29sb3JcIikge1xuICAgICAgICAgICAgdGhpcy5jb2xvckxpc3QgPSB0aGlzLmhhbG9Db2xvckxpc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yTGlzdCA9IHRoaXMudGV4dENvbG9yTGlzdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBQdWJsaWMgTWV0aG9kc1xuICAgIGFzeW5jIHVwZGF0ZUNvbG9yKHVwZGF0ZUNvbG9yKSB7XG4gICAgICAgIGlmICh1cGRhdGVDb2xvciA9PT0gbnVsbCB8fCB1cGRhdGVDb2xvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXBkYXRlQ29sb3IudG9IZXgoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xvcih1cGRhdGVDb2xvci50b0hleCgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93SGlkZUNvbG9ycyhzaG93KSB7XG4gICAgICAgIGNvbnN0IGNvbG9yUGlja2VyID0gdGhpcy5ob3N0RWxlbWVudC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiY29sb3ItcGlja2VyXCIpO1xuICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IFwiZmxleFwiIDogXCJub25lXCI7XG4gICAgICAgIGlmIChzaG93KSB7XG4gICAgICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84MDI3NDIzL2hvdy10by1jaGVjay1pZi1hLXN0cmluZy1pcy1hLXZhbGlkLWhleC1jb2xvci1yZXByZXNlbnRhdGlvbi84MDI3NDQ0XG4gICAgICAgICAgICBpZiAoL14jKFswLTlBLUZdezN9KXsxLDJ9JC9pLnRlc3QodGhpcy5oZXhJbnB1dEVsZW1lbnQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2xvcih0aGlzLmhleElucHV0RWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbG9yKFwiIzAwMDAwMFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRDb2xvcihjb2xvcikge1xuICAgICAgICB0aGlzLmlucHV0Q29sb3JIZXggPSBjb2xvcjtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudC5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiY29sb3JIb2xkZXJfSWRcIikuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yO1xuICAgICAgICB0aGlzLmhleElucHV0RWxlbWVudC52YWx1ZSA9IGNvbG9yO1xuICAgICAgICB0aGlzLmNvbG9yQ2hhbmdlZC5lbWl0KFt0aGlzLmd1aWQsIHRoaXMuY29sb3JUeXBlLCBjb2xvcl0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGRpcjogZ2V0RWxlbWVudERpcih0aGlzLmhvc3RFbGVtZW50KSwgY2xhc3M6IGdldEVsZW1lbnREaXIodGhpcy5ob3N0RWxlbWVudCkgPT09IFwicnRsXCIgJiYgQ1NTX1VUSUxJVFkucnRsIH0sIHRoaXMuaW50bENvbG9yLCBoKFwiZGl2XCIsIHsgY2xhc3M6IENTUy5jb2xvcklucHV0RGlzcGxheURpdiB9LCBoKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgYXV0b0NvbXBsZXRlOiBcIk9mZlwiLCBuYW1lOiBcImN1c3RvbV9jb2xvclwiLCBwbGFjZWhvbGRlcjogXCIjSGV4XCIsIGNsYXNzOiBDU1MuY29sb3JQaWNrZXJIZXhJbnB1dCwgdmFsdWU6IHRoaXMuaW5wdXRDb2xvckhleCwgcmVmOiAoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGV4SW5wdXRFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIH0sIG9uQ2xpY2s6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVDb2xvcnModHJ1ZSk7XG4gICAgICAgICAgICB9LCBvbkJsdXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hpZGVDb2xvcnMoZmFsc2UpO1xuICAgICAgICAgICAgfSB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuY29sb3JIb2xkZXIsIGlkOiBcImNvbG9ySG9sZGVyX0lkXCIsIHN0eWxlOiB7IGJhY2tncm91bmQ6IHRoaXMuaW5wdXRDb2xvckhleCB9LCBvbkNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlQ29sb3JzKHRydWUpO1xuICAgICAgICAgICAgfSwgb25CbHVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dIaWRlQ29sb3JzKGZhbHNlKTtcbiAgICAgICAgICAgIH0gfSksIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbG9yUGlja2VyLCBpZDogXCJjb2xvci1waWNrZXJcIiwgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSB9LCB0aGlzLmNvbG9yTGlzdC5tYXAoKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2xvckl0ZW1DbGFzc2VzID0gdGhpcy5pbnB1dENvbG9ySGV4ICE9PSBjb2xvclxuICAgICAgICAgICAgICAgID8gQ1NTLmNvbG9ySXRlbVxuICAgICAgICAgICAgICAgIDogYCR7Q1NTLmNvbG9ySXRlbVNlbGVjdGVkfSAke0NTUy5jb2xvckl0ZW19YDtcbiAgICAgICAgICAgIHJldHVybiAoaChcImxpXCIsIHsgY2xhc3M6IGNvbG9ySXRlbUNsYXNzZXMsIFwiZGF0YS1oZXhcIjogY29sb3IsIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfSwgb25Nb3VzZURvd246IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbG9yKGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93SGlkZUNvbG9ycyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIH0pKSkpKSk7XG4gICAgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5BcmNnaXNTaW1wbGVDb2xvclBpY2tlci5zdHlsZSA9IGFyY2dpc1NpbXBsZUNvbG9yUGlja2VyQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNTaW1wbGVDb2xvclBpY2tlciBhcyBhcmNnaXNfc2ltcGxlX2NvbG9yX3BpY2tlciB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtc2ltcGxlLWNvbG9yLXBpY2tlci5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGwgYXMgbG9hZE1vZHVsZXMgfSBmcm9tICcuL2xvYWRNb2R1bGVzLWI0YWMxMjQ3LmpzJztcbmltcG9ydCB7IGMgYXMgY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5IH0gZnJvbSAnLi9kb20tNGQzNjc2NzcuanMnO1xuXG5jb25zdCBsYW5ndWFnZU1hcCA9IG5ldyBNYXAoW1xuICAgIFtcImFyXCIsIFwiYXJcIl0sXG4gICAgW1wiYmdcIiwgXCJiZ1wiXSxcbiAgICBbXCJic1wiLCBcImJzXCJdLFxuICAgIFtcImNhXCIsIFwiY2FcIl0sXG4gICAgW1wiY3NcIiwgXCJjc1wiXSxcbiAgICBbXCJkYVwiLCBcImRhXCJdLFxuICAgIFtcImRlXCIsIFwiZGVcIl0sXG4gICAgW1wiZWxcIiwgXCJlbFwiXSxcbiAgICBbXCJlblwiLCBcImVuXCJdLFxuICAgIFtcImVzXCIsIFwiZXNcIl0sXG4gICAgW1wiZXRcIiwgXCJldFwiXSxcbiAgICBbXCJmaVwiLCBcImZpXCJdLFxuICAgIFtcImZyXCIsIFwiZnJcIl0sXG4gICAgW1wiaGVcIiwgXCJoZVwiXSxcbiAgICBbXCJoclwiLCBcImhyXCJdLFxuICAgIFtcImh1XCIsIFwiaHVcIl0sXG4gICAgW1wiaWRcIiwgXCJpZFwiXSxcbiAgICBbXCJpdFwiLCBcIml0XCJdLFxuICAgIFtcImphXCIsIFwiamFcIl0sXG4gICAgW1wia29cIiwgXCJrb1wiXSxcbiAgICBbXCJsdFwiLCBcImx0XCJdLFxuICAgIFtcImx2XCIsIFwibHZcIl0sXG4gICAgW1wibmJcIiwgXCJuYlwiXSxcbiAgICBbXCJubFwiLCBcIm5sXCJdLFxuICAgIFtcInBsXCIsIFwicGxcIl0sXG4gICAgW1wicHQtYnJcIiwgXCJwdC1CUlwiXSxcbiAgICBbXCJwdC1wdFwiLCBcInB0LVBUXCJdLFxuICAgIFtcInJvXCIsIFwicm9cIl0sXG4gICAgW1wicnVcIiwgXCJydVwiXSxcbiAgICBbXCJza1wiLCBcInNrXCJdLFxuICAgIFtcInNsXCIsIFwic2xcIl0sXG4gICAgW1wic3JcIiwgXCJzclwiXSxcbiAgICBbXCJzdlwiLCBcInN2XCJdLFxuICAgIFtcInRoXCIsIFwidGhcIl0sXG4gICAgW1widHJcIiwgXCJ0clwiXSxcbiAgICBbXCJ1a1wiLCBcInVrXCJdLFxuICAgIFtcInZpXCIsIFwidmlcIl0sXG4gICAgW1wiemgtY25cIiwgXCJ6aC1DTlwiXSxcbiAgICBbXCJ6aC1oa1wiLCBcInpoLUhLXCJdLFxuICAgIFtcInpoLXR3XCIsIFwiemgtVFdcIl1cbl0pO1xuLy8gcnRsXG5mdW5jdGlvbiBnZXRFbGVtZW50RGlyKGVsKSB7XG4gICAgcmV0dXJuIGdldEVsZW1lbnRQcm9wKGVsLCBcImRpclwiLCBcImx0clwiKTtcbn1cbmZ1bmN0aW9uIGdldEVsZW1lbnRQcm9wKGVsLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IGNsb3Nlc3RXaXRoUHJvcCA9IGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeShlbCwgYFske3Byb3B9XWApO1xuICAgIHJldHVybiBjbG9zZXN0V2l0aFByb3AgPyBjbG9zZXN0V2l0aFByb3AuZ2V0QXR0cmlidXRlKHByb3ApIDogdmFsdWU7XG59XG4vLyBjc3NcbmNvbnN0IENTU19VVElMSVRZID0ge1xuICAgIHJ0bDogXCJhcmNnaXMtLXJ0bFwiXG59O1xuYXN5bmMgZnVuY3Rpb24gZm9ybWF0TnVtYmVyKG51bWJlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHsgYXBpLCB0eXBlLCBwbGFjZXMgfSA9IG9wdGlvbnMgfHwge307XG4gICAgaWYgKGFwaSA9PT0gNCkge1xuICAgICAgICBjb25zdCBbaW50bF0gPSBhd2FpdCBsb2FkTW9kdWxlcyhbXCJlc3JpL2ludGxcIl0pO1xuICAgICAgICBjb25zdCBudW1iZXJGb3JtYXRJbnRsT3B0aW9ucyA9IGludGwuY29udmVydE51bWJlckZvcm1hdFRvSW50bE9wdGlvbnMoe1xuICAgICAgICAgICAgcGxhY2VzLFxuICAgICAgICAgICAgc3R5bGU6IHR5cGUsXG4gICAgICAgICAgICBkaWdpdFNlcGFyYXRvcjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGludGwuZm9ybWF0TnVtYmVyKG51bWJlciwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBudW1iZXJGb3JtYXRJbnRsT3B0aW9ucyksIHsgc3R5bGU6IHR5cGUgfSkpO1xuICAgIH1cbiAgICBjb25zdCBbZG9qb051bWJlcl0gPSBhd2FpdCBsb2FkTW9kdWxlcyhbXCJkb2pvL251bWJlclwiXSk7XG4gICAgcmV0dXJuIGRvam9OdW1iZXIuZm9ybWF0KG51bWJlciwge1xuICAgICAgICB0eXBlLFxuICAgICAgICBwbGFjZXMsXG4gICAgICAgIHBhdHRlcm46IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wYXR0ZXJuXG4gICAgfSk7XG59XG5jb25zdCBjYWNoZSA9IHt9O1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gICAgY29uc3QgbGFuZyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nO1xuICAgIGNvbnN0IGRheVNob3J0TW9udGhZZWFyID0ge1xuICAgICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgICAgbW9udGg6IFwic2hvcnRcIixcbiAgICAgICAgZGF5OiBcIm51bWVyaWNcIlxuICAgIH07XG4gICAgaWYgKCFjYWNoZVtsYW5nXSkge1xuICAgICAgICBjYWNoZVtsYW5nXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5sYW5nLCBkYXlTaG9ydE1vbnRoWWVhcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZVtsYW5nXS5mb3JtYXQoZGF0ZSk7XG59XG5mdW5jdGlvbiBmb3JtYXRQbHVyYWwobGFuZywgc3RyaW5nT2JqLCBudW1iZXIpIHtcbiAgICBjb25zdCBzaW5nbGVzID0gW1wiaWRcIiwgXCJqYVwiLCBcImtvXCIsIFwidGhcIiwgXCJ2aVwiLCBcInpoLWNuXCIsIFwiemgtaGtcIiwgXCJ6aC10d1wiXTtcbiAgICBjb25zdCBsaWtlRW5nbGlzaCA9IFtcbiAgICAgICAgXCJlblwiLFxuICAgICAgICBcImNhXCIsXG4gICAgICAgIFwiZGFcIixcbiAgICAgICAgXCJkZVwiLFxuICAgICAgICBcImVsXCIsXG4gICAgICAgIFwiZXNcIixcbiAgICAgICAgXCJldFwiLFxuICAgICAgICBcImZpXCIsXG4gICAgICAgIFwiaGlcIixcbiAgICAgICAgXCJodVwiLFxuICAgICAgICBcIml0XCIsXG4gICAgICAgIFwibmJcIixcbiAgICAgICAgXCJubFwiLFxuICAgICAgICBcInB0LXB0XCIsXG4gICAgICAgIFwic3ZcIixcbiAgICAgICAgXCJ0clwiXG4gICAgXTtcbiAgICBjb25zdCBsb2NhbGUgPSBsYW5nICE9PSBudWxsICYmIGxhbmcgIT09IHZvaWQgMCA/IGxhbmcgOiBcImVuXCI7XG4gICAgLy8gaWYgdGhlIG51bWJlciBpcyBvbmUsIG9yIGl0IGlzIGEgXCJzaW1wbGVcIiBsYW5ndWFnZSwgcmV0dXJuIHRoZSAxIHN0cmluZ1xuICAgIGlmIChudW1iZXIgPT09IDEgfHwgc2luZ2xlcy5pbmNsdWRlcyhsb2NhbGUpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdPYmouc2luZ2xlLnJlcGxhY2UoXCIke251bWJlcn1cIiwgXCIxXCIpO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgbnVtYmVyIGlzIG5vdCAxIGFuZCB0aGUgbGFuZ3VhZ2UgdXNlcyB0aGUgc2FtZSBwbHVyYWxpemF0aW9uIHN0cmF0ZWd5IGFzIGVuZ2xpc2gsXG4gICAgLy8gcmV0dXJuIHRoZSBtdWx0aXBsZSBzdHJpbmdcbiAgICBpZiAobnVtYmVyICE9PSAxICYmIGxpa2VFbmdsaXNoLmluY2x1ZGVzKGxvY2FsZSkpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ09iai5tdWx0aXBsZS5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke251bWJlcn1gKTtcbiAgICB9XG4gICAgLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgd29ya2VkLCByZXR1cm4gdGhlIFwidW5rbm93blwiIHN0cmluZ1xuICAgIHJldHVybiBzdHJpbmdPYmoudW5rbm93bi5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke251bWJlcn1gKTtcbn1cblxuZXhwb3J0IHsgQ1NTX1VUSUxJVFkgYXMgQywgZm9ybWF0RGF0ZSBhcyBhLCBmb3JtYXRQbHVyYWwgYXMgYiwgZm9ybWF0TnVtYmVyIGFzIGYsIGdldEVsZW1lbnREaXIgYXMgZywgbGFuZ3VhZ2VNYXAgYXMgbCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sYW5ndWFnZVV0aWwtZWYwZTU0YjIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9