/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_portal-68dbcb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_portal-68dbcb"],{49853:(e,t,n)=>{n.d(t,{c:()=>o,o:()=>s});const r=(0,n(70464).c)({portal:null,user:null,api:4,scale:"m"}),o=r.state,s=r.onChange},36238:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>v,c:()=>o,d:()=>r,e:()=>s,f:()=>c,g:()=>p,i:()=>i,m:()=>l,t:()=>u,u:()=>d});const r=(e,t)=>{let n,r="idle";const o=(...o)=>new Promise((s=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),s(e(...o))):s(null);break;case"invoked":clearTimeout(n),r="idle",s(e(...o));break;case"cancelled":clearTimeout(n),r="idle",s(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout((()=>(r="idle",s(e(...o)))),t)}}));return o.flush=function(...e){return r="flushed",o(...e)},o.invoke=function(...e){return r="invoked",o(...e)},o.cancel=function(...e){return r="cancelled",o(...e)},o.getStatus=function(){return r},o},o=(e,t)=>{let n;return(...r)=>new Promise((o=>{n||(n=setTimeout((()=>{clearTimeout(n),n=void 0,o(e(...r))}),t))}))};function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function l(e,t){return await Promise.all([e,u(t)]),e}function u(e){return new Promise((t=>setTimeout(t,e)))}const a=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:r}=t(e);return[n,r]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function d(e,t){const n=[],r={};return e.forEach((e=>{const o=t(e);null==r[o]&&(r[o]=e,n.push(e))})),n}function v(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,r)=>e.slice(t*r,t+t*r)))},70464:(e,t,n)=>{n.d(t,{c:()=>l});var r=n(81149);const o=e=>!("isConnected"in e)||e.isConnected,s=((e,t)=>{let n;return(...e)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))})(...e)}),2e3)}})(),i=e=>"function"==typeof e?e():e,l=(e,t)=>{const n=((e,t=((e,t)=>e!==t))=>{const n=i(e);let r=new Map(Object.entries(null!=n?n:{}));const o={dispose:[],get:[],set:[],reset:[]},s=()=>{var t;r=new Map(Object.entries(null!==(t=i(e))&&void 0!==t?t:{})),o.reset.forEach((e=>e()))},l=e=>(o.get.forEach((t=>t(e))),r.get(e)),u=(e,n)=>{const s=r.get(e);t(n,s,e)&&(r.set(e,n),o.set.forEach((t=>t(e,n,s))))},a="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,t)=>l(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,n)=>(u(t,n),!0)}),c=(e,t)=>(o[e].push(t),()=>{((e,t)=>{const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)})(o[e],t)});return{state:a,get:l,set:u,on:c,onChange:(t,n)=>{const r=c("set",((e,r)=>{e===t&&n(r)})),o=c("reset",(()=>n(i(e)[t])));return()=>{r(),o()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(c("set",t.set)),t.get&&e.push(c("get",t.get)),t.reset&&e.push(c("reset",t.reset)),t.dispose&&e.push(c("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),s()},reset:s,forceUpdate:e=>{const t=r.get(e);o.set.forEach((n=>n(e,t,t)))}}})(e,t);return n.use((()=>{if("function"!=typeof r.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const n=(0,r.g)();n&&((e,t,n)=>{const r=e.get(t);r?r.includes(n)||r.push(n):e.set(t,[n])})(e,t,n)},set:t=>{const n=e.get(t);n&&e.set(t,n.filter(r.f)),s(e)},reset:()=>{e.forEach((e=>e.forEach(r.f))),s(e)}}})()),n}},20164:(e,t,n)=>{n.d(t,{a:()=>$,b:()=>M,c:()=>y,d:()=>a,e:()=>l,f:()=>h,g:()=>w,h:()=>j,i:()=>k,j:()=>O,k:()=>T,l:()=>E,m:()=>_,n:()=>b,o:()=>m,p:()=>v,q:()=>C,r:()=>c,s:()=>S,t:()=>A,u:()=>P});var r=n(69283),o=n(49853),s=n(79210),i=n(36238);function l(e){var t,n,r,s;return null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(r=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===r?void 0:r.token)||(null===(s=null==e?void 0:e.portalUser)||void 0===s?void 0:s.token)||""}function u(e){var t;const{config:n}=o.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}async function a(e,t,n={},s){const[i]=await(0,r.l)(["esri/request"]),{api:a}=o.c;e.includes("f=")||t.append("f","json");const c=l();return c&&!t.has("token")&&t.append("token",c),new Promise(((r,o)=>{if(3===a){const l={url:!1===n.addSSL?e:u(e),form:t,timeout:n.timeout||0},a="post"===s?Object.assign({usePost:!0},n):n;i(l,a).then(r,o)}else i(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:s||"auto"})).then((e=>{r(e.data)})).catch((e=>o(e)))}))}async function c(e,t={},n={},s,i){const[l]=await(0,r.l)(["esri/request"]),{api:a,portal:c}=o.c,{customToken:d,addTokenManually:v,addSSL:p}=n,f=Object.assign({},t);if(e.includes("f=")||!0===(null==i?void 0:i.excludeJson)||(f.f="json"),d)f.token=d;else if(!1!==v){const e=await j(c,a);f.token=e}const g=!1===p?e:u(e);if(3===a){const e=Object.assign({url:g,content:f,timeout:n.timeout||0},null==i?void 0:i.v3Request);return n.withCredentials&&(e.withCredentials=n.withCredentials),l(e,"post"===s?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:f,method:s||"auto"},n),{timeout:n.timeout||0}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await l(g,e)).data}}const d=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120],v=async(e,t,n)=>{var r,o;const s=null!==(r=null==t?void 0:t.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],l=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let u=0;const a=async()=>{const r=await c(e,null==t?void 0:t.requestParams,{},n),o=r.status||r.jobStatus;if(s.includes(o))return await(0,i.t)((v=u++,1e3*d[v>-1&&v<d.length-1?v:d.length-1])),a();if(l.includes(o))return r;throw r;var v};try{return a()}catch(e){throw console.error(e),e}},p={},f={},g={};async function h(e,t,n,r){var o,s,i,l;const u=null===(s=null===(o=g[t])||void 0===o?void 0:o[n])||void 0===s?void 0:s.expireAt,a=!!u&&(new Date).getTime()>u;if((null===(i=p[t])||void 0===i?void 0:i[n])&&!a)return p[t][n];f[t]||(f[t]={}),f[t][n]&&!a||(f[t][n]=e());const c=await f[t][n];if(p[t]||(p[t]={}),g[t]||(g[t]={}),p[t][n]=c,r){const{expireAfter:e,getExpireAfterFromResult:o}=r,s=o||e?(new Date).getTime()+(null!==(l=null==o?void 0:o(c))&&void 0!==l?l:e):null;g[t][n]=Object.assign(Object.assign({},g[t][n]),{expireAt:s})}return c}function m(e,t){var n;return null===(n=null==p?void 0:p[e])||void 0===n?void 0:n[t]}const y=(e,t)=>{var n,r;t?(null===(n=p[e])||void 0===n||delete n[t],null===(r=f[e])||void 0===r||delete r[t]):(delete p[e],delete f[e])};function w(e){var t;const{portal:n,config:r}=o.c||{};return null!==(t=(0,s.a)(null==r?void 0:r.restBaseUrl))&&void 0!==t?t:S(e||n)}function S(e){var t;return(0,s.a)(null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl)}function b(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}function k(e){var t,n;return null!==(t=null==e?void 0:e.isWebTierAuth)&&void 0!==t?t:null===(n=e.sourceJSON)||void 0===n?void 0:n.isWebTierAuth}function P(e){var t;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(t=e.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))}function O(e){var t,n;return e.isPortal?"modern"===(null===(n=e.portalProperties)||void 0===n?void 0:n.homePage)||function(e){var t;return e.isPortal&&"modernOnly"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)}(e):"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){const t=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=t}(e)}async function T(e){return h((()=>c(`${w(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}async function E(e){return h((()=>c(`${w(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}const j=async(e,t)=>{var n;if(!(null==e?void 0:e.isPortal)||!k(e))return l(e);const{token:r}=await h((()=>x(e,null!=t?t:null===o.c||void 0===o.c?void 0:o.c.api)),"platformSelf",null!==(n=b(e.user))&&void 0!==n?n:e.id,{getExpireAfterFromResult:e=>e.expires_in});return r},x=async(e,t)=>{const n=await(async(e,t)=>{var n,o,s;const i=3===t,[l]=await r.e.loadModules([i?"esri/IdentityManager":"esri/identity/IdentityManager"]),u=await h((()=>l.getCredential(w(e),{oAuthPopupConfirmation:!1})),"credential",b(e.user));return null!==(s=i?null===(n=u._oAuthCred)||void 0===n?void 0:n.appId:null===(o=u.oAuthState)||void 0===o?void 0:o.appId)&&void 0!==s?s:"arcgisonline"})(e,t),o={"X-Esri-Auth-Client-Id":n,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return c(`${w(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:4===t?o:void 0,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:o}})};async function C(e={},t){return c(`${w(t)}/community/groups`,e)}const A=async(e,t)=>{var n;if(!e)return[];const r=`${(0,s.a)(null!==(n=t.restUrl)&&void 0!==n?n:t.portalUrl)}portals/self/servers`,o=await h((()=>c(r)),"selfServers",t.id);return null==o?void 0:o.servers},$=e=>M(S(e)),M=e=>{var t;const n=`${(0,s.a)(null!==(t=(0,s.g)(e))&&void 0!==t?t:e)}info`;return h((()=>c(n,{},{addTokenManually:!1})),"portalInfo",n)},_=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{const n=I(t,e);return{result:!!(null==n?void 0:n[0])}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},I=async(e,t)=>{var n;return(null!==(n=await A(e,t))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]}},79210:(e,t,n)=>{n.d(t,{a:()=>v,b:()=>o,c:()=>s,g:()=>d,p:()=>c,r:()=>l,s:()=>r,v:()=>u});const r=/\+|\?|\/|\(|\)|\\|\!|\#|\"|\||\*|\:|<|>|\%|\$|\@|\'|\^|\[|\]|\,|\=|\;/gi,o=/(\.|outputFormat=)json|geojson$/i,s=/\/ags\//gi,i="MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer|VideoServer",l=new RegExp(`http.+/(${i})`),u="/arcgis/rest/services|/rest/services|/arcgis/services|/arcgis/rest",a=new RegExp(`(?<server>http.+(?:${u})(?:/?.*/(?<name>.*)/(?<type>${i})))(?!.*/${i})/?(?<soe>\\d+)?.*`,"i"),c=e=>{const t=e.match(a);if(!t)return e.match(s)?{baseServerUrl:e,serverName:null,serverType:"MapServer",index:null}:null;const[,n,r,o,i]=t,l=parseInt(i);return{baseServerUrl:n,serverName:r,serverType:o,index:isNaN(l)?null:l}},d=e=>{if(!e)return null;if(!e.match(u))return null;const t=e.split("/rest");return t.length<2?null:`${t[0]}/rest/`},v=e=>e&&"/"!==e.charAt(e.length-1)?`${e}/`:e}}]);