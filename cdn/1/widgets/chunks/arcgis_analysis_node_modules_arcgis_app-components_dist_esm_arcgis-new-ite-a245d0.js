"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a245d0"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-template.entry.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-feature-layer-from-template.entry.js ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_feature_layer_from_template: () => (/* binding */ ArcgisNewItemPagesFeatureLayerFromTemplate)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./feature-layer-58e18b03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */

































const esriLocaleMap = {
    "de-ch": "esri_de",
    "de-de": "esri_de",
    "en-au": "esri_en",
    "en-ca": "esri_en",
    "en-gb": "esri_en",
    "en-us": "esri_en",
    "es-es": "esri_es",
    "es-mx": "esri_es",
    "fr-ch": "esri_fr",
    "fr-fr": "esri_fr",
    id: "esri_ind",
    "it-ch": "esri_it",
    "it-it": "esri_it",
    "pt-br": "esri_pt",
    "pt-pt": "esri_po",
    uk: "esri_ukr",
    "zh-hk": "esri_hk",
    "zh-tw": "esri_tw",
    "zh-cn": "esri_zh"
};
/**
 * Return the esri_x owner for the given locale.
 */
function getEsriUserForLocale(locale) {
    var _a;
    const lang = (locale === null || locale === void 0 ? void 0 : locale.toLowerCase()) || "en";
    return (_a = esriLocaleMap[lang]) !== null && _a !== void 0 ? _a : `esri_${lang}`;
}

/**
 * Find the ID of the group which stores template feature layers
 */
async function fetchTemplatesGroup(lang) {
    var _a, _b;
    const esriUser = getEsriUserForLocale(lang);
    const response = await (0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_2__.q)({ q: `title: "Esri Layer Templates" AND owner: ${esriUser}`, num: 1 });
    return ((_b = (_a = response.results) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.id) || "";
}

const ArcgisNewItemPagesFeatureLayerFromTemplate = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.blacklist = `"sourceId#PointsLinesPolygons" OR "sourceId#Points" OR "sourceId#Lines" OR "sourceId#Polygons"`;
        this.selectedTemplate = undefined;
        this.error = undefined;
    }
    async componentWillLoad() {
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.featureLayerFromTemplate;
        this.templateGroupID = this.templateGroupID || (await fetchTemplatesGroup(_config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c.lang));
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.serviceInfo = null;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.selectedServiceInfoLayersNames = null;
    }
    async handleNext() {
        const { selectedTemplate } = this;
        if (!selectedTemplate) {
            (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_7__.f)("No template selected");
            this.error = true;
            return;
        }
        const { portal } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        const serviceInfo = await (0,_feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_3__.A)(selectedTemplate, portal);
        // https://devtopia.esri.com/WebGIS/arcgis-portal-app/issues/39179#issuecomment-3448405
        serviceInfo.enableZDefaults = serviceInfo.serviceItemId === "19a4cead1af64f579d664f1dfdb50574";
        const typeKeywords = selectedTemplate.typeKeywords;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.serviceInfo = serviceInfo;
        if (_config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c.portal.isPortal) {
            typeKeywords.push("providerSDS");
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.typeKeywords = selectedTemplate.typeKeywords;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.sourceTitle = selectedTemplate.title;
        (0,_feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_6__.s)(selectedTemplate);
        this.newItemUpdatePage.emit("featureLayerSummary");
    }
    filterHandler() {
        (0,_feature_layer_58e18b03_js__WEBPACK_IMPORTED_MODULE_7__.b)();
    }
    render() {
        const { templateGroupID, i18n, error, blacklist } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-feature-layer-browser", { query: `group:${templateGroupID} type:"Layer Template" typekeywords: "Service Template" -typekeywords:(${blacklist}) -type:"Attachment"`, sortDropdownOptions: ["title", "relevance", "modified"], hideBucketSelect: true, filterSlot: (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-browser-filters", { slot: "filters" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-browser-filter-industry", { expanded: true })), onItemSelected: ({ detail }) => {
                this.selectedTemplate = detail;
                this.error = false;
            }, showOwner: false, showDateUpdated: false, showItemType: false, showSummary: true, showThumbnail: false }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: i18n.errorHeading, description: i18n.errorDescription, active: error, onAlertDismiss: () => {
                this.error = false;
            } })));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};



//# sourceMappingURL=arcgis-new-item-pages-feature-layer-from-template.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js":
/*!*******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-58e18b03.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureServiceEndTelemetry),
/* harmony export */   b: () => (/* binding */ filterChangeTelemetry),
/* harmony export */   c: () => (/* binding */ featureLayerTypeTelemetry),
/* harmony export */   e: () => (/* binding */ enableLayerPreferenceTelemetry),
/* harmony export */   f: () => (/* binding */ featureLayerErrorTelemetry),
/* harmony export */   i: () => (/* binding */ itemExpandedTelemetry)
/* harmony export */ });
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



const TELEMETRY_ID = "create feature layer";
const TELEMETRY_PAGE_NAME = "my content";
const addFeatureLayerTypeToTelemetry = (type) => {
    switch (type) {
        case "build":
            return "blank";
        case "existing":
            return "fs";
        case "template":
            return "template";
        case "link":
            return "url";
    }
};
const enableLayerPreferenceTelemetry = (type) => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `enable ${type === "captureGPS" ? "gps" : type === "enableZDefaults" ? "z" : "m"}`, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const itemExpandedTelemetry = (type) => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, `expand ${type} details`, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const filterChangeTelemetry = () => {
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "filter", {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME
    });
};
const featureLayerTypeTelemetry = (type) => {
    const telemetryType = addFeatureLayerTypeToTelemetry(type);
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.stepWorkflow(TELEMETRY_ID, "from option", {
        category: TELEMETRY_ID,
        attribute: telemetryType,
        pageName: TELEMETRY_PAGE_NAME
    });
};
const featureServiceEndTelemetry = () => {
    const { addFeatureLayerType, serviceInfo } = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a;
    const featureLayerServiceInfo = serviceInfo;
    const telemetry = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry;
    telemetry === null || telemetry === void 0 ? void 0 : telemetry.endWorkflow(TELEMETRY_ID, {
        category: TELEMETRY_ID,
        attribute: addFeatureLayerTypeToTelemetry(addFeatureLayerType),
        pageName: TELEMETRY_PAGE_NAME,
        count: featureLayerServiceInfo.layers.length,
        number: featureLayerServiceInfo.tables.length
    });
};
const featureLayerErrorTelemetry = (errString) => {
    var _a;
    (_a = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_0__.c.telemetry) === null || _a === void 0 ? void 0 : _a.logError({
        category: TELEMETRY_ID,
        error: errString
    });
};



//# sourceMappingURL=feature-layer-58e18b03.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtYTI0NWQwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ3JEO0FBQ0E7QUFDWTtBQUNUO0FBQ047QUFDMkI7QUFDMEI7QUFDN0U7QUFDTTtBQUNSO0FBQ087QUFDSztBQUNMO0FBQ0M7QUFDUDtBQUNNO0FBQ1A7QUFDQTtBQUNJO0FBQ0g7QUFDQTtBQUNDO0FBQ0k7QUFDRjtBQUNIO0FBQ0M7QUFDRjtBQUNHO0FBQ0g7QUFDQztBQUNTOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsS0FBSztBQUNwRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQVcsR0FBRywrQ0FBK0MsU0FBUyxXQUFXO0FBQzVHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhDQUFZO0FBQ2hDLGtGQUFrRixrREFBVztBQUM3RixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEI7QUFDQTtBQUNBLGdCQUFnQixtQkFBbUI7QUFDbkM7QUFDQSxZQUFZLDZEQUEwQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUyxFQUFFLGtEQUFXO0FBQ3RDLGtDQUFrQyw2REFBZ0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBWTtBQUNwQixZQUFZLGtEQUFXO0FBQ3ZCO0FBQ0E7QUFDQSxRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSw2REFBNEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2REFBcUI7QUFDN0I7QUFDQTtBQUNBLGdCQUFnQiwwQ0FBMEM7QUFDMUQsZ0JBQWdCLHFEQUFDLENBQUMsaURBQUksUUFBUSxxREFBQyw0Q0FBNEMsZ0JBQWdCLGlCQUFpQix3RUFBd0UsVUFBVSxvSEFBb0gscURBQUMsa0NBQWtDLGlCQUFpQixFQUFFLHFEQUFDLDBDQUEwQyxnQkFBZ0IsdUJBQXVCLFFBQVE7QUFDbGM7QUFDQTtBQUNBLGFBQWEsMEdBQTBHLEdBQUcscURBQUMsNEJBQTRCO0FBQ3ZKO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZSxPQUFPLHFEQUFVO0FBQ2hDOztBQUUyRzs7QUFFM0c7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pJQTtBQUNBO0FBQ0E7QUFDQTtBQUN3RDtBQUNHOztBQUUzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakMseUdBQXlHLHVFQUF1RTtBQUNoTDtBQUNBLGtEQUFrRCxvREFBWTtBQUM5RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esc0JBQXNCLGtEQUFXO0FBQ2pDLHlHQUF5RyxNQUFNO0FBQy9HO0FBQ0Esa0RBQWtELG9EQUFZO0FBQzlEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBLGtEQUFrRCxvREFBWTtBQUM5RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVksbUNBQW1DLEVBQUUsb0RBQVk7QUFDN0Q7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0RBQVc7QUFDckI7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFeU07O0FBRXpNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWZlYXR1cmUtbGF5ZXItZnJvbS10ZW1wbGF0ZS5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9mZWF0dXJlLWxheWVyLTU4ZTE4YjAzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGQgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25maWdTdGF0ZSB9IGZyb20gJy4vY29uZmlnLTc1YWRmOTYyLmpzJztcbmltcG9ydCB7IHEgYXMgcXVlcnlHcm91cHMgfSBmcm9tICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgeyBBIGFzIGdldExheWVySXRlbURhdGEgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNTczYmI0NzMuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1iY2E3YmNkMS5qcyc7XG5pbXBvcnQgeyBzIGFzIHNhdmVGZWF0dXJlTGF5ZXJTZWFyY2hSZXN1bHQgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNzlmYjMwMmMuanMnO1xuaW1wb3J0IHsgZiBhcyBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSwgYiBhcyBmaWx0ZXJDaGFuZ2VUZWxlbWV0cnkgfSBmcm9tICcuL2ZlYXR1cmUtbGF5ZXItNThlMThiMDMuanMnO1xuaW1wb3J0ICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1iNGFjMTI0Ny5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCAnLi9pdGVtLXByb3BlcnRpZXMtMTA0OTFiMmUuanMnO1xuaW1wb3J0ICcuL2Z1bmN0aW9uYWwtODEzNzNmNmQuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLThkMzg0Nzk2LmpzJztcbmltcG9ydCAnLi9pdGVtLTM1MzU1NTJkLmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLTIwMjliMDZiLmpzJztcbmltcG9ydCAnLi9hZ3MtZWI0NThhMDMuanMnO1xuaW1wb3J0ICcuL3VybC0zNTg3NWExMC5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS0wMzUzYTc2OS5qcyc7XG5pbXBvcnQgJy4vZmlsZS1iZjhhYjkwZi5qcyc7XG5pbXBvcnQgJy4vZ3VpZC1hZWFlZDg0ZC5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtNmE4OGU2YzUuanMnO1xuaW1wb3J0ICcuL3RodW1ibmFpbC1iY2I4OWU2OS5qcyc7XG5pbXBvcnQgJy4vc2VydmljZS04YzJjNDI0MS5qcyc7XG5pbXBvcnQgJy4vdXNlci0zZWE2OWMzYS5qcyc7XG5pbXBvcnQgJy4vcXVlcnktZDYyNjYwZDQuanMnO1xuaW1wb3J0ICcuL2FwaS0yZTNhMTM2Zi5qcyc7XG5pbXBvcnQgJy4vc3RyaW5nLTU4YTVmZWYzLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tYzU4ZmZjZWQuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItMTdiNjQ5NDYuanMnO1xuXG5jb25zdCBlc3JpTG9jYWxlTWFwID0ge1xuICAgIFwiZGUtY2hcIjogXCJlc3JpX2RlXCIsXG4gICAgXCJkZS1kZVwiOiBcImVzcmlfZGVcIixcbiAgICBcImVuLWF1XCI6IFwiZXNyaV9lblwiLFxuICAgIFwiZW4tY2FcIjogXCJlc3JpX2VuXCIsXG4gICAgXCJlbi1nYlwiOiBcImVzcmlfZW5cIixcbiAgICBcImVuLXVzXCI6IFwiZXNyaV9lblwiLFxuICAgIFwiZXMtZXNcIjogXCJlc3JpX2VzXCIsXG4gICAgXCJlcy1teFwiOiBcImVzcmlfZXNcIixcbiAgICBcImZyLWNoXCI6IFwiZXNyaV9mclwiLFxuICAgIFwiZnItZnJcIjogXCJlc3JpX2ZyXCIsXG4gICAgaWQ6IFwiZXNyaV9pbmRcIixcbiAgICBcIml0LWNoXCI6IFwiZXNyaV9pdFwiLFxuICAgIFwiaXQtaXRcIjogXCJlc3JpX2l0XCIsXG4gICAgXCJwdC1iclwiOiBcImVzcmlfcHRcIixcbiAgICBcInB0LXB0XCI6IFwiZXNyaV9wb1wiLFxuICAgIHVrOiBcImVzcmlfdWtyXCIsXG4gICAgXCJ6aC1oa1wiOiBcImVzcmlfaGtcIixcbiAgICBcInpoLXR3XCI6IFwiZXNyaV90d1wiLFxuICAgIFwiemgtY25cIjogXCJlc3JpX3poXCJcbn07XG4vKipcbiAqIFJldHVybiB0aGUgZXNyaV94IG93bmVyIGZvciB0aGUgZ2l2ZW4gbG9jYWxlLlxuICovXG5mdW5jdGlvbiBnZXRFc3JpVXNlckZvckxvY2FsZShsb2NhbGUpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgbGFuZyA9IChsb2NhbGUgPT09IG51bGwgfHwgbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbGUudG9Mb3dlckNhc2UoKSkgfHwgXCJlblwiO1xuICAgIHJldHVybiAoX2EgPSBlc3JpTG9jYWxlTWFwW2xhbmddKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBgZXNyaV8ke2xhbmd9YDtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBJRCBvZiB0aGUgZ3JvdXAgd2hpY2ggc3RvcmVzIHRlbXBsYXRlIGZlYXR1cmUgbGF5ZXJzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoVGVtcGxhdGVzR3JvdXAobGFuZykge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgZXNyaVVzZXIgPSBnZXRFc3JpVXNlckZvckxvY2FsZShsYW5nKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHF1ZXJ5R3JvdXBzKHsgcTogYHRpdGxlOiBcIkVzcmkgTGF5ZXIgVGVtcGxhdGVzXCIgQU5EIG93bmVyOiAke2VzcmlVc2VyfWAsIG51bTogMSB9KTtcbiAgICByZXR1cm4gKChfYiA9IChfYSA9IHJlc3BvbnNlLnJlc3VsdHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlkKSB8fCBcIlwiO1xufVxuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNGZWF0dXJlTGF5ZXJGcm9tVGVtcGxhdGUgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICAgICAgdGhpcy5ibGFja2xpc3QgPSBgXCJzb3VyY2VJZCNQb2ludHNMaW5lc1BvbHlnb25zXCIgT1IgXCJzb3VyY2VJZCNQb2ludHNcIiBPUiBcInNvdXJjZUlkI0xpbmVzXCIgT1IgXCJzb3VyY2VJZCNQb2x5Z29uc1wiYDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFRlbXBsYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZmVhdHVyZUxheWVyRnJvbVRlbXBsYXRlO1xuICAgICAgICB0aGlzLnRlbXBsYXRlR3JvdXBJRCA9IHRoaXMudGVtcGxhdGVHcm91cElEIHx8IChhd2FpdCBmZXRjaFRlbXBsYXRlc0dyb3VwKGNvbmZpZ1N0YXRlLmxhbmcpKTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNlcnZpY2VJbmZvID0gbnVsbDtcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNlbGVjdGVkU2VydmljZUluZm9MYXllcnNOYW1lcyA9IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU5leHQoKSB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0ZWRUZW1wbGF0ZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKCFzZWxlY3RlZFRlbXBsYXRlKSB7XG4gICAgICAgICAgICBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeShcIk5vIHRlbXBsYXRlIHNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBwb3J0YWwgfSA9IGNvbmZpZ1N0YXRlO1xuICAgICAgICBjb25zdCBzZXJ2aWNlSW5mbyA9IGF3YWl0IGdldExheWVySXRlbURhdGEoc2VsZWN0ZWRUZW1wbGF0ZSwgcG9ydGFsKTtcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZ0b3BpYS5lc3JpLmNvbS9XZWJHSVMvYXJjZ2lzLXBvcnRhbC1hcHAvaXNzdWVzLzM5MTc5I2lzc3VlY29tbWVudC0zNDQ4NDA1XG4gICAgICAgIHNlcnZpY2VJbmZvLmVuYWJsZVpEZWZhdWx0cyA9IHNlcnZpY2VJbmZvLnNlcnZpY2VJdGVtSWQgPT09IFwiMTlhNGNlYWQxYWY2NGY1NzlkNjY0ZjFkZmRiNTA1NzRcIjtcbiAgICAgICAgY29uc3QgdHlwZUtleXdvcmRzID0gc2VsZWN0ZWRUZW1wbGF0ZS50eXBlS2V5d29yZHM7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5zZXJ2aWNlSW5mbyA9IHNlcnZpY2VJbmZvO1xuICAgICAgICBpZiAoY29uZmlnU3RhdGUucG9ydGFsLmlzUG9ydGFsKSB7XG4gICAgICAgICAgICB0eXBlS2V5d29yZHMucHVzaChcInByb3ZpZGVyU0RTXCIpO1xuICAgICAgICB9XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS50eXBlS2V5d29yZHMgPSBzZWxlY3RlZFRlbXBsYXRlLnR5cGVLZXl3b3JkcztcbiAgICAgICAgYWRkSXRlbVN0YXRlLnNvdXJjZVRpdGxlID0gc2VsZWN0ZWRUZW1wbGF0ZS50aXRsZTtcbiAgICAgICAgc2F2ZUZlYXR1cmVMYXllclNlYXJjaFJlc3VsdChzZWxlY3RlZFRlbXBsYXRlKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZmVhdHVyZUxheWVyU3VtbWFyeVwiKTtcbiAgICB9XG4gICAgZmlsdGVySGFuZGxlcigpIHtcbiAgICAgICAgZmlsdGVyQ2hhbmdlVGVsZW1ldHJ5KCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyB0ZW1wbGF0ZUdyb3VwSUQsIGkxOG4sIGVycm9yLCBibGFja2xpc3QgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWZlYXR1cmUtbGF5ZXItYnJvd3NlclwiLCB7IHF1ZXJ5OiBgZ3JvdXA6JHt0ZW1wbGF0ZUdyb3VwSUR9IHR5cGU6XCJMYXllciBUZW1wbGF0ZVwiIHR5cGVrZXl3b3JkczogXCJTZXJ2aWNlIFRlbXBsYXRlXCIgLXR5cGVrZXl3b3JkczooJHtibGFja2xpc3R9KSAtdHlwZTpcIkF0dGFjaG1lbnRcImAsIHNvcnREcm9wZG93bk9wdGlvbnM6IFtcInRpdGxlXCIsIFwicmVsZXZhbmNlXCIsIFwibW9kaWZpZWRcIl0sIGhpZGVCdWNrZXRTZWxlY3Q6IHRydWUsIGZpbHRlclNsb3Q6IGgoXCJhcmNnaXMtaXRlbS1icm93c2VyLWZpbHRlcnNcIiwgeyBzbG90OiBcImZpbHRlcnNcIiB9LCBoKFwiYXJjZ2lzLWl0ZW0tYnJvd3Nlci1maWx0ZXItaW5kdXN0cnlcIiwgeyBleHBhbmRlZDogdHJ1ZSB9KSksIG9uSXRlbVNlbGVjdGVkOiAoeyBkZXRhaWwgfSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUZW1wbGF0ZSA9IGRldGFpbDtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB9LCBzaG93T3duZXI6IGZhbHNlLCBzaG93RGF0ZVVwZGF0ZWQ6IGZhbHNlLCBzaG93SXRlbVR5cGU6IGZhbHNlLCBzaG93U3VtbWFyeTogdHJ1ZSwgc2hvd1RodW1ibmFpbDogZmFsc2UgfSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBpMThuLmVycm9ySGVhZGluZywgZGVzY3JpcHRpb246IGkxOG4uZXJyb3JEZXNjcmlwdGlvbiwgYWN0aXZlOiBlcnJvciwgb25BbGVydERpc21pc3M6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB9IH0pKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5cbmV4cG9ydCB7IEFyY2dpc05ld0l0ZW1QYWdlc0ZlYXR1cmVMYXllckZyb21UZW1wbGF0ZSBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZmVhdHVyZV9sYXllcl9mcm9tX3RlbXBsYXRlIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyY2dpcy1uZXctaXRlbS1wYWdlcy1mZWF0dXJlLWxheWVyLWZyb20tdGVtcGxhdGUuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctNzVhZGY5NjIuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcblxuY29uc3QgVEVMRU1FVFJZX0lEID0gXCJjcmVhdGUgZmVhdHVyZSBsYXllclwiO1xuY29uc3QgVEVMRU1FVFJZX1BBR0VfTkFNRSA9IFwibXkgY29udGVudFwiO1xuY29uc3QgYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5ID0gKHR5cGUpID0+IHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImJ1aWxkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJibGFua1wiO1xuICAgICAgICBjYXNlIFwiZXhpc3RpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcImZzXCI7XG4gICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidGVtcGxhdGVcIjtcbiAgICAgICAgY2FzZSBcImxpbmtcIjpcbiAgICAgICAgICAgIHJldHVybiBcInVybFwiO1xuICAgIH1cbn07XG5jb25zdCBlbmFibGVMYXllclByZWZlcmVuY2VUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICAgIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuc3RlcFdvcmtmbG93KFRFTEVNRVRSWV9JRCwgYGVuYWJsZSAke3R5cGUgPT09IFwiY2FwdHVyZUdQU1wiID8gXCJncHNcIiA6IHR5cGUgPT09IFwiZW5hYmxlWkRlZmF1bHRzXCIgPyBcInpcIiA6IFwibVwifWAsIHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgICAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICAgIH0pO1xufTtcbmNvbnN0IGl0ZW1FeHBhbmRlZFRlbGVtZXRyeSA9ICh0eXBlKSA9PiB7XG4gICAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICAgIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBgZXhwYW5kICR7dHlwZX0gZGV0YWlsc2AsIHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgICAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICAgIH0pO1xufTtcbmNvbnN0IGZpbHRlckNoYW5nZVRlbGVtZXRyeSA9ICgpID0+IHtcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnk7XG4gICAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LnN0ZXBXb3JrZmxvdyhURUxFTUVUUllfSUQsIFwiZmlsdGVyXCIsIHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgYXR0cmlidXRlOiBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkoYWRkSXRlbVN0YXRlLmFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgICAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICAgIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVMYXllclR5cGVUZWxlbWV0cnkgPSAodHlwZSkgPT4ge1xuICAgIGNvbnN0IHRlbGVtZXRyeVR5cGUgPSBhZGRGZWF0dXJlTGF5ZXJUeXBlVG9UZWxlbWV0cnkodHlwZSk7XG4gICAgY29uc3QgdGVsZW1ldHJ5ID0gY29uZmlnU3RhdGUudGVsZW1ldHJ5O1xuICAgIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5zdGVwV29ya2Zsb3coVEVMRU1FVFJZX0lELCBcImZyb20gb3B0aW9uXCIsIHtcbiAgICAgICAgY2F0ZWdvcnk6IFRFTEVNRVRSWV9JRCxcbiAgICAgICAgYXR0cmlidXRlOiB0ZWxlbWV0cnlUeXBlLFxuICAgICAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRVxuICAgIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVTZXJ2aWNlRW5kVGVsZW1ldHJ5ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgYWRkRmVhdHVyZUxheWVyVHlwZSwgc2VydmljZUluZm8gfSA9IGFkZEl0ZW1TdGF0ZTtcbiAgICBjb25zdCBmZWF0dXJlTGF5ZXJTZXJ2aWNlSW5mbyA9IHNlcnZpY2VJbmZvO1xuICAgIGNvbnN0IHRlbGVtZXRyeSA9IGNvbmZpZ1N0YXRlLnRlbGVtZXRyeTtcbiAgICB0ZWxlbWV0cnkgPT09IG51bGwgfHwgdGVsZW1ldHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0ZWxlbWV0cnkuZW5kV29ya2Zsb3coVEVMRU1FVFJZX0lELCB7XG4gICAgICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgICAgIGF0dHJpYnV0ZTogYWRkRmVhdHVyZUxheWVyVHlwZVRvVGVsZW1ldHJ5KGFkZEZlYXR1cmVMYXllclR5cGUpLFxuICAgICAgICBwYWdlTmFtZTogVEVMRU1FVFJZX1BBR0VfTkFNRSxcbiAgICAgICAgY291bnQ6IGZlYXR1cmVMYXllclNlcnZpY2VJbmZvLmxheWVycy5sZW5ndGgsXG4gICAgICAgIG51bWJlcjogZmVhdHVyZUxheWVyU2VydmljZUluZm8udGFibGVzLmxlbmd0aFxuICAgIH0pO1xufTtcbmNvbnN0IGZlYXR1cmVMYXllckVycm9yVGVsZW1ldHJ5ID0gKGVyclN0cmluZykgPT4ge1xuICAgIHZhciBfYTtcbiAgICAoX2EgPSBjb25maWdTdGF0ZS50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb2dFcnJvcih7XG4gICAgICAgIGNhdGVnb3J5OiBURUxFTUVUUllfSUQsXG4gICAgICAgIGVycm9yOiBlcnJTdHJpbmdcbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGZlYXR1cmVTZXJ2aWNlRW5kVGVsZW1ldHJ5IGFzIGEsIGZpbHRlckNoYW5nZVRlbGVtZXRyeSBhcyBiLCBmZWF0dXJlTGF5ZXJUeXBlVGVsZW1ldHJ5IGFzIGMsIGVuYWJsZUxheWVyUHJlZmVyZW5jZVRlbGVtZXRyeSBhcyBlLCBmZWF0dXJlTGF5ZXJFcnJvclRlbGVtZXRyeSBhcyBmLCBpdGVtRXhwYW5kZWRUZWxlbWV0cnkgYXMgaSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZWF0dXJlLWxheWVyLTU4ZTE4YjAzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==