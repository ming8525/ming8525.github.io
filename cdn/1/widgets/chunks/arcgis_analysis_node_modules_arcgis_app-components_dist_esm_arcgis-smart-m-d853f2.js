/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-d853f2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-d853f2"],{68927:(e,i,o)=>{o.r(i),o.d(i,{arcgis_smart_mapping_panels_color:()=>l});var t=o(81149),r=o(9225),s=o(5996),n=(o(69283),o(49306),o(25902)),a=o(51837);o(82218),o(42577),o(70464),o(10519);const l=class{constructor(e){(0,t.r)(this,e),this.arcgisSmartMappingPanelsColorClose=(0,t.c)(this,"arcgisSmartMappingPanelsColorClose",7),this.arcgisSmartMappingPanelsColorBackClick=(0,t.c)(this,"arcgisSmartMappingPanelsColorBackClick",7),this.arcgisSmartMappingPanelsColorError=(0,t.c)(this,"arcgisSmartMappingPanelsColorError",7),this.handleDone=()=>{this.arcgisSmartMappingPanelsColorClose.emit("save")},this.handleCancel=()=>{const{originalRendererJSON:e,originalFeatureReduction:i}=this;(0,r.j)(e,i),this.arcgisSmartMappingPanelsColorClose.emit("cancel")},this.hideTransparency=!1,this.hideRotation=!1,this.menuOpen=void 0,this.showBackButton=void 0,this.beforeBack=void 0,this.visualizationOpen=!1}async setFocus(){var e;null===(e=this.flowItemNode)||void 0===e||e.setFocus()}async componentWillLoad(){this.visualizationOpen=!0;const{layer:e,modules:i}=r.s,o=(0,r.h)(e);this.originalRendererJSON=o.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?i.esriLang.clone(e.featureReduction):void 0}componentDidLoad(){requestAnimationFrame((()=>{var e;return null===(e=this.flowItemNode)||void 0===e?void 0:e.setFocus()}))}render(){const{layer:e,hideLayerTitle:i,isRTL:o,strings:s}=r.s;return(0,t.h)(t.H,{class:"calcite-match-height"},(0,t.h)("calcite-flow-item",{heading:s.panels.styleOptions,description:i?void 0:e.title,class:{"flow-item":!0,[a.C.rtl]:o},closable:(0,r.aa)(this.hostElement),menuOpen:this.menuOpen,beforeBack:this.beforeBack,showBackButton:this.showBackButton,onCalciteFlowItemClose:this.handleDone,onCalciteFlowItemBack:()=>{this.arcgisSmartMappingPanelsColorBackClick.emit()},ref:e=>this.flowItemNode=e},this.renderDoneButton(),this.renderCancelButton(),this.renderVisualization(),this.renderTransparency(),this.renderRotation()))}renderDoneButton(){const{layer:e,strings:i}=r.s;return e?(0,t.h)("calcite-button",{slot:"footer",label:i.done,onClick:this.handleDone,appearance:"solid",width:"half"},i.done):null}renderCancelButton(){const{layer:e,strings:i}=r.s;return e?(0,t.h)("calcite-button",{slot:"footer",label:i.cancel,onClick:this.handleCancel,appearance:"outline-fill",width:"half"},i.cancel):null}renderVisualization(){var e,i;const{visualizationOpen:o,hideTransparency:s,hideRotation:n}=this,{layer:a,strings:l}=r.s,c=(0,r.g)(),d=["color-age","color-age-size"].indexOf(c)>-1,h=(0,r.h)(a),p=(0,r.a)(h,"color"),g=p?p.field?null===(e=(0,r.u)(p.field))||void 0===e?void 0:e.label:p.valueExpressionTitle||l.expression:h.field?null===(i=(0,r.u)(h.field))||void 0===i?void 0:i.label:h.valueExpressionTitle||l.expression,u=(0,r.f)(a)[0].simpleFieldType===r.w.DATE;return(0,t.h)("calcite-block",{class:"color-block",heading:d?l.panels.color.colorAgeStyle:u?l.panels.color.colorStyleDate:l.panels.color.colorStyle,collapsible:!s||!n,open:o,onCalciteBlockOpen:()=>this.visualizationOpen=!0,onCalciteBlockClose:()=>this.visualizationOpen=!1},d?null:(0,t.h)("calcite-label",{class:"attribute-name"},g),this.renderAge(),this.renderTheme(),this.renderDividedBy(),this.renderSymbol(),this.renderColorSlider(),this.renderBackgroundStyle(),this.renderDefaultSymbol(),this.renderShowInLegend(),this.renderClassify())}renderAge(){const e=(0,r.g)();return["color-age","color-age-size"].indexOf(e)>-1?(0,t.h)("arcgis-smart-mapping-age",{rendererSubtype:"color",onArcgisSmartMappingAgeChange:()=>this.sliderNode.updateStatistics(),onArcgisSmartMappingAgeError:e=>this.arcgisSmartMappingPanelsColorError.emit(e.detail)}):null}renderTheme(){const{layer:e}=r.s,i=(0,r.h)(e);if(!(0,r.a)(i,"color"))return null;const o=(0,r.g)();return(0,t.h)("arcgis-smart-mapping-theme-button",{ref:e=>this.themeButtonNode=e,rendererSubtype:"color",onArcgisSmartMappingThemeButtonBeforeOpen:()=>(0,r.E)(),onArcgisSmartMappingThemeButtonChange:i=>{const a=(0,r.h)(e);let l=n.b;["color-age","color-age-size"].indexOf(o)>-1&&(l=n.d),(0,s.r)(l({theme:i.detail,discardMinMax:!0}),this.flowItemNode).then((e=>{a.visualVariables=(0,r.n)(a,"color")||[],a.visualVariables.push((0,r.a)(e.renderer,"color")),a.authoringInfo.visualVariables=(0,r.o)(a,"color")||[],a.authoringInfo.visualVariables.push((0,r.p)(e.renderer,"color")),(0,r.ab)(),(0,t.f)(this.hostElement),this.themeButtonNode&&(0,t.f)(this.themeButtonNode),this.sliderNode&&((0,t.f)(this.sliderNode),this.sliderNode.updateStatistics())}),(e=>{(0,t.f)(this.themeButtonNode),this.arcgisSmartMappingPanelsColorError.emit(e)}))}})}renderDividedBy(){const{layer:e,fields:i}=r.s,o=(0,r.h)(e),s=(0,r.g)();if(["color-age","color-age-size"].indexOf(s)>-1)return null;if((0,r.I)(i).number<2)return null;const n=(0,r.a)(o,"color");if(n){const e=(0,r.u)(n.field),i={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle,simpleFieldType:e?e.simpleFieldType:r.w.NUMBER};if(i.expression||i.simpleFieldType!==r.w.NUMBER)return null}return(0,t.h)("arcgis-smart-mapping-divided-by",{rendererSubtype:"color",normalizationField:n?n.normalizationField:o.normalizationField,onArcgisSmartMappingDividedByChange:()=>{(0,t.f)(this.hostElement),this.sliderNode.updateStatistics(),this.classifyNode&&(0,t.f)(this.classifyNode)},onArcgisSmartMappingDividedByError:e=>this.arcgisSmartMappingPanelsColorError.emit(e.detail)})}renderSymbol(){const{layer:e}=r.s,i=(0,r.h)(e),o=(0,r.a)(i,"color"),s=i.classBreakInfos,n=s[0].symbol;let a;return o?a=o.stops.map((e=>{const i=e.color.clone();return i.a=1,i})):(null==s?void 0:s.length)&&(a=s.map((e=>(0,r.t)(e.symbol)))),(0,t.h)("arcgis-smart-mapping-symbol-button",{symbol:n,colors:a,type:"color-ramp",rampType:o?"continuous":"discrete",ref:e=>{e&&(this.symbolButtonNode=e)},onArcgisSmartMappingSymbolButtonSymbolChange:()=>{(0,t.f)(this.hostElement),this.sliderNode&&(0,t.f)(this.sliderNode),this.classifyNode&&(0,t.f)(this.classifyNode),this.rotationNode&&(0,t.f)(this.rotationNode)}})}renderColorSlider(){return(0,t.h)("arcgis-smart-mapping-color-slider",{ref:e=>{e&&(this.sliderNode=e)},onArcgisSmartMappingColorSliderChange:()=>{(0,t.f)(this.hostElement),this.classifyNode&&(0,t.f)(this.classifyNode),this.rotationNode&&(0,t.f)(this.rotationNode)},onArcgisSmartMappingColorSliderError:e=>this.arcgisSmartMappingPanelsColorError.emit(e.detail)})}renderBackgroundStyle(){const{layer:e}=r.s,i=(0,r.g)();return(0,r.q)(e)&&-1!==["color-size"].indexOf(i)?(0,t.h)("arcgis-smart-mapping-background-symbol",null):null}renderDefaultSymbol(){return(0,t.h)("arcgis-smart-mapping-default-symbol",{ref:e=>{e&&(this.defaultSymbolNode=e)},onArcgisSmartMappingDefaultSymbolBeforeToggle:()=>(0,r.E)(),onArcgisSmartMappingDefaultSymbolChange:()=>(0,t.f)(this.symbolButtonNode)})}renderShowInLegend(){const{layer:e,strings:i}=r.s,o=(0,r.h)(e),s=(0,r.a)(o,"color");if(!s)return null;const n=s.legendOptions,a=!n||!1!==n.showLegend;return(0,t.h)("calcite-label",{class:"legend-toggle-padding",layout:"inline-space-between"},i.panels.color.includeInLegend,(0,t.h)("calcite-switch",{scale:"s",checked:a,onCalciteSwitchChange:()=>this.handleIncludeInLegendToggle()}))}renderClassify(){const{layer:e}=r.s,i=(0,r.h)(e),o=(0,r.g)(),s=(0,r.f)(e)[0].simpleFieldType===r.w.DATE,n=["color-age","color-age-size"].indexOf(o)>-1;if("color"!==o||s||n)return null;const a=i.classBreakInfos;return(0,t.h)("arcgis-smart-mapping-classify",{ref:e=>this.classifyNode=e,onArcgisSmartMappingClassifyChange:e=>{const i=e.detail;((null==i?void 0:i.closePopovers)||(null==i?void 0:i.classesChange))&&(0,r.E)(),((null==i?void 0:i.classesChange)||(null==i?void 0:i.symbolChange))&&(this.symbolButtonNode.colors=a.map((e=>(0,r.t)(e.symbol)))),(0,t.f)(this.hostElement),this.sliderNode&&(0,t.f)(this.sliderNode),((null==i?void 0:i.toggle)||!(null==i?void 0:i.symbolChange)&&!(null==i?void 0:i.closePopovers))&&this.sliderNode.updateStatistics(),this.classifyNode&&(0,t.f)(this.classifyNode),this.symbolButtonNode&&(0,t.f)(this.symbolButtonNode),this.defaultSymbolNode&&(0,t.f)(this.defaultSymbolNode)},onArcgisSmartMappingClassifyError:e=>this.arcgisSmartMappingPanelsColorError.emit(e.detail)})}renderTransparency(){const{hideTransparency:e}=this;if(e)return;const{layer:i}=r.s,o=(0,r.h)(i),s=(0,r.a)(o,"opacity");return(0,t.h)("arcgis-smart-mapping-transparency",{open:!!s,onArcgisSmartMappingSymbolTransparencyError:({detail:e})=>this.arcgisSmartMappingPanelsColorError.emit(e)})}renderRotation(){const{hideRotation:e}=this;if(e)return;const{layer:i}=r.s,o=(0,r.h)(i),s=(0,r.a)(o,"opacity"),n=(0,r.a)(o,"rotation");return(0,t.h)("arcgis-smart-mapping-rotation",{open:!s&&!!n,ref:e=>this.rotationNode=e,onArcgisSmartMappingRotationError:({detail:e})=>this.arcgisSmartMappingPanelsColorError.emit(e)})}handleIncludeInLegendToggle(){const{layer:e}=r.s,i=(0,r.h)(e),o=(0,r.a)(i,"color"),t=o.legendOptions;t&&!1===t.showLegend?t.title?t.showLegend=!0:o.legendOptions=void 0:(o.legendOptions=t||{},o.legendOptions.showLegend=!1),(0,r.ab)()}get hostElement(){return(0,t.d)(this)}};l.style=":host{width:100%}.flow-item{height:100%}.color-block{overflow-x:hidden}.attribute-name{word-break:break-all}.legend-toggle-padding{padding-top:12px;padding-bottom:12px}"},5996:(e,i,o)=>{let t,r;function s(e){e.loading=!1}function n(e,i){return function(e){e.loading=!0,r=!1,t&&clearTimeout(t),t=setTimeout((()=>{s(e),r=!0}),6e4)}(i),e.then((e=>(s(i),r?Promise.reject(new Error("timeout")):Promise.resolve(e)))).catch((e=>(s(i),Promise.reject(e))))}o.d(i,{r:()=>n})}}]);