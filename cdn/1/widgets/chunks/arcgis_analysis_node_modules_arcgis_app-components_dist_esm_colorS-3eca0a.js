/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-3eca0a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-3eca0a"],{98371:(e,i,n)=>{n.d(i,{a:()=>r,b:()=>v,c:()=>a,d:()=>b,e:()=>z,f:()=>t,g:()=>d,h:()=>h,i:()=>g,j:()=>p,k:()=>u,l:()=>m,m:()=>c,s:()=>f});var s=n(9225),l=(n(69283),n(49306),n(25902)),o=n(10519);function a(e){var i,n;const{layer:l,mapImageSublayer:a,mapView:r,supportsArcade:t,modules:d}=s.s,u=l;if(a&&!t)return function(e){var i,n;const{layer:l,mapImageSublayer:a,mapView:r,modules:t}=s.s,d=l;e=e||{};const u=(0,s.m)((0,s.h)(d)),f=null===(i=e.fieldInfos)||void 0===i?void 0:i[0];return t.SizeCreator.createClassBreaksRenderer({layer:d,view:r,field:null==f?void 0:f.field,valueExpression:null==f?void 0:f.expression,valueExpressionTitle:null==f?void 0:f.expressionTitle,normalizationField:void 0,classificationMethod:e.classificationMethod?e.classificationMethod:"natural-breaks",standardDeviationInterval:"standard-deviation"===e.classificationMethod?e.standardDeviationInterval?e.standardDeviationInterval:1:void 0,numClasses:e.numClasses?e.numClasses:4,outlineOptimizationEnabled:!a&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.q)(d)),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=d.featureReduction)||void 0===n?void 0:n.type)}).then((e=>((0,s.l)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}(e);const m=(0,s.h)(u).authoringInfo,c=(0,s.g)();e=e||{};const v=(0,s.m)((0,s.h)(u)),b=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],z=e.theme?e.theme:"high-to-low",p={layer:u,view:r,field:null==b?void 0:b.field,theme:z,valueExpression:null==b?void 0:b.expression,valueExpressionTitle:null==b?void 0:b.expressionTitle,normalizationField:e.normalizationField,outlineOptimizationEnabled:!a&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.q)(u)),sizeOptimizationEnabled:!a&&(!(0,o.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)};return d.SizeCreator.createContinuousRenderer(p).then((i=>{if(!e.noReuse&&f(e)&&["size","color-size","type-size","relationship-size"].indexOf(c)>-1&&m&&"above-and-below"!==m.univariateTheme){const e=(0,s.h)(u).clone(),n=(0,s.a)(e,"size"),l=(0,s.p)(e,"size"),o=(0,s.a)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.Q)(i.renderer)}return(0,s.l)(v,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function r(e){var i;const{layer:n,mapImageSublayer:l,mapView:a,modules:r}=s.s,t=n,d=(0,s.h)(t).authoringInfo,u=(0,s.g)();e=e||{};const m=(0,s.m)((0,s.h)(t)),c=null===(i=e.fieldInfos)||void 0===i?void 0:i[0],v=e.theme?e.theme:"high-to-low",b={layer:t,view:a,startTime:null==c?void 0:c.field,endTime:new Date,theme:v,unit:void 0,outlineOptimizationEnabled:!l&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,s.q)(t)),sizeOptimizationEnabled:!0,legendOptions:e.legendOptions,defaultSymbolEnabled:!1};return r.SizeCreator.createAgeRenderer(b).then((i=>{if(f(e)&&["size-age","color-size-age","type-size-age"].indexOf(u)>-1&&d&&"above-and-below"!==(null==d?void 0:d.univariateTheme)){const e=(0,s.h)(t).clone(),n=(0,s.a)(e,"size"),l=(0,s.p)(e,"size"),o=(0,s.a)(e,"size","outline");i.renderer.visualVariables=[n],o&&i.renderer.visualVariables.push(o),i.renderer.authoringInfo.visualVariables=[l],(0,s.Q)(i.renderer)}return(0,s.l)(m,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function t(e){var i,n,l,a;const{layer:r,mapImageSublayer:t,mapView:d,supportsArcade:f,modules:m}=s.s,c=r;if(t&&!f)return u(e);e=e||{};const v=(0,s.h)(c),b=v.authoringInfo||{},z=(0,s.g)(),p=(0,s.a)(v,"size"),h=(0,s.p)(v,"size"),g=(0,s.m)(v);let I;if(["type-size","relationship-size"].indexOf(z)>-1){const e=(0,s.h)(c);I=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.S)(c,d,z)}else I=v.classBreakInfos&&v.classBreakInfos.length?v.classBreakInfos[v.classBreakInfos.length-1].symbol:(0,s.S)(c,d,z);const y=v.defaultSymbol,x=v.defaultLabel,S=v.backgroundFillSymbol,O=e.theme?e.theme:h?h.theme:"high-to-low";let V=!1;if(p)O===p.theme&&(V=p.minSize.stops?p.minSize.stops[0].size>p.maxSize.stops[0].size:p.minSize>p.maxSize);else{const e=v.classBreakInfos[0].symbol,i=v.classBreakInfos[v.classBreakInfos.length-1].symbol,n=(0,s.T)(e),l=(0,s.T)(i);V=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&p&&e.fieldInfos[0].field===p.field&&e.fieldInfos[0].expression===p.valueExpression&&e.normalizationField===p.normalizationField&&(delete e.fieldInfos,(0,s.R)(e))){const e=v.clone();return e.visualVariables=(0,s.n)(v,"color"),Promise.resolve({renderer:e})}const E=e.fieldInfos&&e.fieldInfos[0]?e.fieldInfos[0]:p?{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:s.w.NUMBER}:{field:v.field,expression:v.valueExpression,expressionTitle:v.valueExpressionTitle,simpleFieldType:s.w.NUMBER},k=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:p?p.normalizationField:v.normalizationField;let T=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0]||"manual"===b.classificationMethod&&!e.theme||"equal-interval"===b.classificationMethod)&&(T=!0);const B=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:T?void 0:p?null==h?void 0:h.minSliderValue:v.classBreakInfos[0].minValue,j=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:T?void 0:p?null==h?void 0:h.maxSliderValue:v.classBreakInfos[v.classBreakInfos.length-1].maxValue,P={layer:c,view:d,theme:O,field:E.field,valueExpression:E.expression,valueExpressionTitle:E.expressionTitle,normalizationField:k,minValue:B,maxValue:j,outlineOptimizationEnabled:!t&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!g.sizeOutlineVisVar),sizeOptimizationEnabled:!t&&(!p||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof p.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==p?void 0:p.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=v.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!v.defaultSymbol,forBinning:"binning"===(null===(a=c.featureReduction)||void 0===a?void 0:a.type)};return m.SizeCreator.createContinuousRenderer(P).then((i=>{var n;if(e.discardMinMax){const e=(0,s.a)(v,"size"),n=(0,s.a)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if(!e.fieldInfos&&void 0===e.normalizationField&&p&&O===(null==p?void 0:p.theme)){const e=(0,s.a)(i.renderer,"size");e.minDataValue=p.minDataValue,e.maxDataValue=p.maxDataValue}if(["color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size","predominance-size"].indexOf(z)>-1){v.visualVariables=(0,s.n)(v,"size")||[],v.visualVariables=(0,s.n)(v,"size","outline")||[],v.authoringInfo.visualVariables=(0,s.o)(v,"size")||[];const e=(0,s.a)(i.renderer,"size");v.visualVariables.push(e);const n=(0,s.p)(i.renderer,"size");v.authoringInfo.visualVariables.push(n);const l=(0,s.a)(i.renderer,"size","outline");return l&&v.visualVariables.push(l),(0,s.Q)(v),i.renderer=v.clone(),Promise.resolve(i)}if((0,s.l)(g,i.renderer),I&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=I),y&&(i.renderer.defaultSymbol=y,i.renderer.defaultLabel=x),S&&(i.renderer.backgroundFillSymbol=S),V){const e=(0,s.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function d(e){var i,n,l;const{layer:a,mapImageSublayer:r,mapView:t,modules:d}=s.s,u=a;e=e||{};const f=(0,s.h)(u),m=(0,s.g)(),c=(0,s.a)(f,"size"),v=(0,s.p)(f,"size"),b=(0,s.m)(f),z=e.startTime?e.startTime:v.startTime,p=e.endTime?e.endTime:v.endTime;let h;if(["type-size-age"].indexOf(m)>-1){const e=(0,s.h)(u);h=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.S)(u,t,m)}else h=f.classBreakInfos&&f.classBreakInfos.length?f.classBreakInfos[0].symbol:(0,s.S)(u,t,m);const g=f.defaultSymbol,I=f.defaultLabel,y=f.backgroundFillSymbol;let x=!1;if(c)x=c.minSize.stops?c.minSize.stops[0].size>c.maxSize.stops[0].size:c.minSize>c.maxSize,"below"===v.theme&&(x=!x);else{const e=f.classBreakInfos[0].symbol,i=f.classBreakInfos[f.classBreakInfos.length-1].symbol,n=(0,s.T)(e),l=(0,s.T)(i);x=n>l}if(e.fieldInfos&&e.fieldInfos[0]&&c&&e.fieldInfos[0].field===c.field&&(delete e.fieldInfos,(0,s.R)(e))){const e=f.clone();return e.visualVariables=(0,s.n)(f,"color"),Promise.resolve({renderer:e})}let S=!1;(e.startTime||e.endTime||e.units||e.fieldInfo||e.theme)&&(S=!0);const O=e.discardMinMax?void 0:(0,o.i)(e.min)?e.min:S?void 0:v?v.minSliderValue:f.classBreakInfos[0].minValue,V=e.discardMinMax?void 0:(0,o.i)(e.max)?e.max:S?void 0:v?v.maxSliderValue:f.classBreakInfos[f.classBreakInfos.length-1].maxValue,E={layer:u,view:t,theme:e.theme?e.theme:v?v.theme:"high-to-low",startTime:z,endTime:p,unit:e.units?e.units:v.units,minValue:O,maxValue:V,outlineOptimizationEnabled:!r&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!b.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&(!c||((0,o.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:"object"==typeof c.minSize)),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==c?void 0:c.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(l=f.legendOptions)||void 0===l?void 0:l.toJSON()),defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!f.defaultSymbol};return d.SizeCreator.createAgeRenderer(E).then((i=>{var n;if(e.discardMinMax){const e=(0,s.a)(f,"size"),n=(0,s.a)(i.renderer,"size");e.minDataValue=n.minDataValue,e.maxDataValue=n.maxDataValue}if((0,s.p)(i.renderer,"size").field=v.field,!S){const e=(0,s.a)(i.renderer,"size");e.minDataValue=c.minDataValue,e.maxDataValue=c.maxDataValue}if(["color-size-age"].indexOf(m)>-1){f.visualVariables=(0,s.n)(f,"size")||[],f.visualVariables=(0,s.n)(f,"size","outline")||[],f.authoringInfo.visualVariables=(0,s.o)(f,"size")||[];const e=(0,s.a)(i.renderer,"size");f.visualVariables.push(e);const n=(0,s.p)(i.renderer,"size");f.authoringInfo.visualVariables.push(n);const l=(0,s.a)(i.renderer,"size","outline");return l&&f.visualVariables.push(l),(0,s.Q)(f),i.renderer=f.clone(),Promise.resolve(i)}if((0,s.l)(b,i.renderer),h&&(null===(n=i.renderer.classBreakInfos)||void 0===n?void 0:n.length)&&(i.renderer.classBreakInfos[0].symbol=h),g&&(i.renderer.defaultSymbol=g,i.renderer.defaultLabel=I),y&&(i.renderer.backgroundFillSymbol=y),x){const e=(0,s.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function u(e){var i;const{layer:n,mapImageSublayer:l,mapView:a,modules:r}=s.s,t=n;e=e||{};const d=(0,s.h)(t),u=(0,s.g)(),f=d.authoringInfo,m=(0,s.a)(d,"size"),c=(0,s.p)(d,"size"),v=(0,s.m)(d),b={field:d.field,expression:d.valueExpression,expressionTitle:d.valueExpressionTitle,simpleFieldType:s.w.NUMBER};let z=e.fieldInfos?e.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:s.w.NUMBER}:b;const p=void 0!==e.normalizationField?e.normalizationField:m?m.normalizationField:d.normalizationField;let h;if(["type-size"].indexOf(u)>-1){const e=(0,s.h)(t);h=e.uniqueValueInfos&&e.uniqueValueInfos.length?e.uniqueValueInfos[0].symbol:(0,s.S)(t,a,u)}else h=d.classBreakInfos&&d.classBreakInfos.length?d.classBreakInfos[0].symbol:(0,s.S)(t,a,u);const g=d.defaultSymbol,I=d.defaultLabel,y=d.backgroundFillSymbol;let x=!1;if(d.classBreakInfos.length>1){const e=d.classBreakInfos[0].symbol,i=d.classBreakInfos[1].symbol,n=(0,s.T)(e)||0,l=(0,s.T)(i)||0;x=n>l}if(!m&&f&&(0,s.x)(z,b)&&p===d.normalizationField&&(delete e.fieldInfos,(0,s.R)(e))){const e=d.clone();return e.visualVariables=(0,s.n)(d,"color"),Promise.resolve({renderer:e})}const S=e.classificationMethod?e.classificationMethod:(null==f?void 0:f.classificationMethod)&&"manual"!==f.classificationMethod?f.classificationMethod:"equal-interval",O="standard-deviation"===S?e.standardDeviationInterval?e.standardDeviationInterval:f.standardDeviationInterval?f.standardDeviationInterval:1:void 0;let V=!0;!e.classificationMethod||e.classificationMethod===(null==f?void 0:f.classificationMethod)||"standard-deviation"!==e.classificationMethod&&"standard-deviation"!==(null==f?void 0:f.classificationMethod)||(V=!1);let E=!1;(void 0!==e.normalizationField||!(0,s.x)(z,b)||"equal-interval"!==S||(null==c?void 0:c.minSliderValue)||(null==c?void 0:c.maxSliderValue))&&(E=!0);const k=(0,o.i)(e.min)?e.min:E?void 0:c?c.minSliderValue:d.classBreakInfos[0].minValue,T=(0,o.i)(e.max)?e.max:E?void 0:c?c.maxSliderValue:d.classBreakInfos[d.classBreakInfos.length-1].maxValue;return r.SizeCreator.createClassBreaksRenderer({layer:t,view:a,field:z.field,valueExpression:z.expression,valueExpressionTitle:z.expressionTitle,normalizationField:p,classificationMethod:S,standardDeviationInterval:O,numClasses:(0,o.i)(e.numClasses)?e.numClasses:m||!V?4:d.classBreakInfos.length,minValue:k,maxValue:T,outlineOptimizationEnabled:!l&&((0,o.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!v.sizeOutlineVisVar),legendOptions:e.legendOptions||d.legendOptions,defaultSymbolEnabled:(0,o.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!d.defaultSymbol,forBinning:"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)}).then((e=>{if((0,s.l)(v,e.renderer),h&&e.renderer.classBreakInfos&&e.renderer.classBreakInfos.map((e=>{const i=h.clone();(0,s.U)(i,(0,s.T)(e.symbol)),e.symbol=i})),g&&(e.renderer.defaultSymbol=g,e.renderer.defaultLabel=I),y&&(e.renderer.backgroundFillSymbol=y),x){const i=(0,s.a)(e.renderer,"size"),n=i.minSize;i.minSize=i.maxSize,i.maxSize=n}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function f(e){var i;const{layer:n}=s.s,l=(0,s.h)(n).clone(),o=(0,s.g)();if(["size","size-age","color-size","color-size-age","color-age-size","type-size","type-size-age","relationship-size"].indexOf(o)>-1&&void 0===e.normalizationField){let n;const a=(0,s.a)(l,"size");if(n=a?["size-age","color-size-age","type-size-age"].indexOf(o)>-1?{field:(0,s.p)(l,"size").field}:{field:a.field,expression:a.valueExpression,expressionTitle:a.valueExpressionTitle}:{field:l.field,expression:l.valueExpression,expressionTitle:l.valueExpressionTitle},(0,s.x)(null===(i=e.fieldInfos)||void 0===i?void 0:i[0],n))return!0}return!1}function m(){const{layer:e,mapView:i,modules:n}=s.s,l=(0,s.h)(e),o=(0,s.a)(l,"size"),a=i.scale,{minSize:r,maxSize:t,minDataValue:d,maxDataValue:u}=o;let f;if(o.stops)f=n.esriLang.clone(o.stops);else{let e,i;if("number"==typeof r)e=r,i=t;else{const n=r.stops.length-1;a>r.stops[n].value?(e=r.stops[n].size,i=t.stops[n].size):r.stops.forEach(((n,s)=>{a<=n.value&&(e=n.size,i=t.stops[s].size)}))}f=[new n.SizeStop({value:d,size:e}),new n.SizeStop({value:u,size:i})]}return f}function c(){const{layer:e}=s.s;return(0,s.h)(e).classBreakInfos.map((e=>{const i=e.symbol;return{min:e.minValue,max:e.maxValue,size:(0,s.T)(i)}}))}function v(e){const{layer:i}=s.s,n=(0,s.h)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size","color-age-size","type-size"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.h)(i),"size")?I((0,s.h)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):a(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>I(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function b(e){const{layer:i}=s.s,n=(0,s.h)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size","color-age-size","type-size"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.h)(i),"size")?y((0,s.h)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):a(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>y(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function z(e){const{layer:i}=s.s,n=(0,s.h)(i).authoringInfo,l=(0,s.g)(),o=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return f({fieldInfos:[o]})&&["color-size-age","type-size-age"].indexOf(l)>-1&&n&&"above-and-below"!==(null==n?void 0:n.univariateTheme)&&(0,s.a)((0,s.h)(i),"size")?I((0,s.h)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):r(Object.assign(Object.assign({},e),{fieldInfos:[o]})).then((i=>I(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function p(e,i){const{layer:n}=s.s;return e=e||{},t(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.h)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function h(e,i){const{layer:n}=s.s;return e=e||{},t(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.d)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.h)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function g(e,i){const{layer:n}=s.s;return e=e||{},d(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?e.fieldInfos.length>1?[e.fieldInfos[1]]:[e.fieldInfos[0]]:null})).then((o=>(0,l.b)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(x(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.h)(n).backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function I(e,i){const{layer:n}=s.s,o=(0,s.h)(n),a=o.authoringInfo,r=(0,s.g)(),t=(0,s.p)(o,"color");if((0,l.s)(i)&&["color","color-size","color-size-age"].indexOf(r)>-1&&a&&"above-and-below"!==(null==a?void 0:a.univariateTheme)&&-1===["centered-on","extremes"].indexOf(t.theme)){const l=(0,s.h)(n).clone();if(x(l,e),2===i.fieldInfos.length){const e=l.authoringInfo;e.type=null,e.univariateTheme=null,e.univariateSymbolStyle=null}return Promise.resolve({renderer:l})}return(0,l.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(x(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function y(e,i){const{layer:n}=s.s,o=(0,s.h)(n).authoringInfo,a=(0,s.g)();if((0,l.s)(i)&&["color-age","color-age-size"].indexOf(a)>-1&&o&&"above-and-below"!==(null==o?void 0:o.univariateTheme)){const i=(0,s.h)(n).clone();return x(i,e),Promise.resolve({renderer:i})}return(0,l.a)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(x(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function x(e,i){var n;const{layer:l,mapView:o}=s.s;if(!e.authoringInfo)return;e.visualVariables=(0,s.n)(e,"size")||[],e.visualVariables=(0,s.n)(e,"size","auto")||[];const a=(0,s.a)(i,"size");e.visualVariables.push(a),e.authoringInfo.visualVariables=(0,s.o)(e,"size")||[];const r=(0,s.p)(i,"size");e.authoringInfo.visualVariables.push(r);const t=(null===(n=i.classBreakInfos)||void 0===n?void 0:n.length)?i.classBreakInfos:i.uniqueValueInfos;let d=(null==t?void 0:t.length)?t[0].symbol:(0,s.S)(l,o,"color-size");if("picture-marker"===d.type&&(d=(0,s.S)(l,o,"color-size")),(0,s.q)(l)){e.classBreakInfos.map((e=>{const i=(0,s.t)(e.symbol);e.symbol=d.clone(),(0,s.r)(e.symbol,i)})),e.backgroundFillSymbol=i.backgroundFillSymbol;const n=(0,s.a)(i,"size","outline");n&&e.visualVariables.push(n)}!function(e){const{modules:i}=s.s;"simple-line"===e.type?(e.color=[0,0,0,.5],e.width=1):"cim"===e.type?((0,s.r)(e,new i.esriColor([0,0,0,.5])),(0,s.U)(e,4)):(e.color=null,e.outline.color=[0,0,0,.5],(0,s.U)(e,4))}(d)}}}]);