"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-b8ba38"],{53248:(e,t,r)=>{r.d(t,{A:()=>o,G:()=>c,J:()=>a,M:()=>s,P:()=>u,U:()=>n,a:()=>l,d:()=>i});const n={IDLE:"idle",VALID:"valid",INVALID:"invalid"},a={RASTER_FUNCTION_TEMPLATE:"RasterFunctionTemplate",RASTER_FUNCTION_VARIABLE:"RasterFunctionVariable",ARGUMENT_ARRAY:"ArgumentArray",RECORD_SET:"RecordSet",ECD_FILE:"ECDFile"},s={MATCH_VARIABLE:"MatchVariable",UNION_DIMENSION:"UnionDimension"},i={name:"Raster",isDataset:!0,isPublic:!1,type:a.RASTER_FUNCTION_VARIABLE},o={RFX_DTEX_COMMON_SELECT:"RFX-DTEX-COMMON-SELECT",RFX_DTE_COMMON_CHECKBOX:"CALCITE-CHECKBOX",RFX_DTE_COMMON_TEXTINPUT:"CALCITE-INPUT-TEXT",RFX_DTE_COMMON_NUMBERINPUT:"CALCITE-INPUT-NUMBER",RFX_DTE_RASTER_INPUT:"RFX-DTE-RASTER-INPUT",RFX_DTE_FEATURE_SELECT:"RFX-DTE-FEATURE-SELECT",RFX_DTEX_RASTER_VARIABLES_LIST:"RFX-DTEX-RASTER-VARIABLES-LIST",RFX_CTE_RANGED_VALUE_EDITOR:"RFX-CTE-RANGED-VALUE-EDITOR",RFX_CTE_GAMMA_EDITOR:"RFX-CTE-GAMMA-EDITOR",RFX_DTE_COLOR_RAMP_SELECTOR:"RFX-DTE-COLOR-RAMP-SELECTOR",RFX_DTE_EXTENT:"RFX-DTE-EXTENT",RFX_DTE_JSON_FILE_UPLOADER:"RFX-DTE-JSON-FILE-UPLOADER",RFX_CTE_FACTOR_FUNCTION_EDITOR:"RFX-CTE-FACTOR-FUNCTION-EDITOR",RFX_CTE_NEIGHBORHOOD_VALUES:"RFX-CTE-NEIGHBORHOOD-VALUES"},l={ANALYSIS:"analysis",EDITOR:"editor"},c={textInput:"text-input",text:"text",raster:"raster-input",number:"number-input",boolean:"check-box",switch:"switch",field:"field-select",color:"color-input",select:"select",icon:"icon"},u={loading:"loading",success:"success",error:"error"}},89920:(e,t,r)=>{r.d(t,{S:()=>l,a:()=>E,b:()=>p,d:()=>f,e:()=>R,f:()=>_,g:()=>A,h:()=>T,i:()=>c,j:()=>u,k:()=>d,l:()=>g,m:()=>y,n:()=>O,p:()=>C,q:()=>v,r:()=>N,s:()=>m,u:()=>h});var n=r(34319),a=r(36676),s=r(77162),i=r(81279),o=r(53248);const l={List:"list",Unit:"linearUnit",Number:"number",Field:"field"};function c(e){const t=!(0,s.i)(e?.isDataset),r=e?.type===s.R;return t&&r}function u(e,t){if((0,s.i)(t))return n.clone(e);const r={};if("object"==typeof e&&null!==e&&!Array.isArray(e)){for(const n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&(r[n]=u(e[n],t));return r}return Array.isArray(e)?e.map((e=>u(e,t))):n.clone(e)}function f(e,t){if((0,s.i)(e)||(0,s.i)(t))return;const r=Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()));return r?t[r]:void 0}function d(e,t){if(!e)return"";const r=Object.keys(e);return void 0===t&&1===r.length?r[0]:r.find((e=>e.toLowerCase()===t?.toLowerCase()))??""}async function E(e){const t=e?.function?.type?.toLowerCase()?.replace("function",""),r=e?.arguments,n=a.h.rfxNameSpecialCases,i=a.h.localFunctionOperations,o=await(0,a.g)();switch(t){case"local":const e=r?.Operation?.value,a=i.find((t=>t.key===e));if(!(0,s.i)(a))return a.label;if(o.cellStatisticsTypes.some((t=>t.key===e)))return"CellStatistics";break;case"pythonadapter":{const e=r?.ClassName?.value;return e||null}case"gpadapter":{const e=r?.ToolName?.value?.toLowerCase()?.replace("_sa",""),t=n.find((t=>t.key===e));return t?.value||e||null}default:{const e=n.find((e=>e.key===t));return e?.value||t||null}}return null}function p(e){if(e)return e.type===s.b?e:e.value&&e.value.type===s.b?e.value:void 0}function A({schema:e,rfxTemplate:t}){if((0,s.i)(t?.function?.type))return;const r=t.function.type,n=t?.arguments;let a=(0,i.e)(n);return(!a||!e.hasOwnProperty(a)&&e.hasOwnProperty(r))&&(a=r),e[a]}function T(e){if(!e||!e.value)return!1;const t=(e.value.elements?e.value.elements:e.value)[0];return t&&(t.isDataset||t.type===s.b)}function m(e){if(!e||!e[s.A])return!1;if(e.aliases)return!0;const t=e=>{if(!e)return!1;if(e.isPublic)return!0;if(T(e)){const r=e.value&&e.value.elements?e.value.elements:e.value;if(r&&Array.isArray(r))return r.some((e=>t(e)))}const r=p(e);return!!r&&m(r)},r=e[s.A];return(0,s.a)(r)?t(r):Object.keys(r).some((e=>{const n=r[e];if((0,s.a)(n))return t(n)}))}function h(e){if(!e)return!1;const t=e.dataType===a.d.rasterArray,r=Boolean(e.elementInfos),n=e.dataType===a.d.table;return t&&r||n}function R(e,t){return Array.isArray(e)&&e.some((e=>e.toLowerCase()===t.toLowerCase()))}function g(e){if(!e||!e.value)return!1;const t=e.value.elements?e.value.elements:e.value;return!!Array.isArray(t)&&t.some((function(e){return e&&e.type===s.b}))}function _(e){return e?.forEach((e=>{e.key=e.key.toString()})),e}function C(e,t){return e.forEach((e=>{if("field"===e.type){const r=f(e.argumentName,t);e.argumentName=r.name,e.layerArgument=r}else e.type!==a.a.list&&e.type!==a.a.linearUnit||(e.enumStore=_[e.enum])})),e}function y(e,t){let r;const n=f(e.nElementsArgument,t),a=n?.value,s=e.elementInfos;return void 0!==n&&void 0!==a||1!==s.length?(Array.isArray(s)&&s.some((e=>{const t=e.values;if(Array.isArray(t)&&t.indexOf(a)>-1)return r=e.inputArgs,!0})),r):s[0].inputArgs}function O(e){let t=!1;const r=e[s.A];if((0,s.a)(r))return!0;for(const e in r)if(e!==s.T&&(n=r[e])&&(p(n)||g(n)))return t=!0,t;var n;return t}function v({functionSchema:e,rfxTemplate:t}){if(!t)return;const r=[],a=t.arguments,i=a&&a.type;if(function({functionSchema:e,rfxTemplate:t}){const r=e;let n;if(r&&(n=r.rasterFunctionArguments,1===Object.keys(n).length&&!r.hasArgumentsObject))return!0;const a=t.arguments,s=a&&a.type;return!(!s||s!==o.J.RASTER_FUNCTION_TEMPLATE&&s!==o.J.RASTER_FUNCTION_VARIABLE)||void 0}({functionSchema:e,rfxTemplate:t})){const e=n.clone(a);let t;return t=i===o.J.RASTER_FUNCTION_TEMPLATE||e.isDataset?"Raster":"Rasters",r.push({...e,key:t}),r}return Object.keys(a).forEach((e=>{if(e===o.M.MATCH_VARIABLE||e===o.M.UNION_DIMENSION)return;const t=n.clone(a[e]);(0,s.a)(t)&&r.push({...t,key:e})})),r}function N(e,t){const r=t&&t.value;if(null==r)return;let n;return e.some((e=>{if(e.values&&e.values.indexOf(r)>-1)return n=e.inputArgs,!0})),n}},8366:(e,t,r)=>{r.r(t),r.d(t,{rfx_cte_named_raster_editor:()=>d});var n=r(19451),a=(r(34319),r(48302)),s=r(77162),i=r(64729),o=r(89920),l=r(53248);r(46574),r(46717),r(55139),r(57098),r(78979),r(83345),r(99248),r(16888),r(95323),r(43278),r(86944),r(74656);const c="rfx-cte-named-raster-editor",u={nameColumn:`${c}__name-column`,layerColumn:`${c}__layer-column`},f="rasterVariablesHelpClickHandler",d=class{constructor(e){(0,n.r)(this,e),this.gridLayout={inputName:{uiType:l.G.textInput,style:u.nameColumn},assignment:{uiType:l.G.text,constValue:"="},raster:{uiType:l.G.raster,allowScalar:!0,style:u.layerColumn}},this.helpActionClickEventHandlers=new Map,this.updateWidgetArgs=e=>{const{detail:{gridOptions:t}}=e,r=[],n=[];t.forEach(((e,a)=>{a!==t.length-1&&((0,s.i)(e.inputName)||(0,s.i)(e.raster)||(e.raster.name=e.inputName),r.push(e.inputName),n.push(e.raster))}));const a=this.widgetArgs.inputArgs;a.Rasters&&((0,s.i)(a.Rasters.value)?a.Rasters.value={elements:n,type:"ArgumentArray"}:a.Rasters.value.elements=n),a.InputNames&&(a.InputNames.value=r)},this.gridOptions=[],this.allowScalar=void 0,this.widgetArgs=void 0}async componentWillLoad(){({strings:this.strings}=await(0,a.b)(this.hostElement,(0,n.g)("."))),this.readInputArgs()}componentDidLoad(){this.attachHelpClickEventHandlers()}readInputArgs(){const e=this.widgetArgs.inputArgs,t=e?.InputNames?.value??[],r=e?.Rasters,n=r?.value?.elements||r?.value||[],a=Math.max(t.length,n.length);let i=0;do{const e=n[i],r=(0,o.b)(e);let a;(0,s.i)(r)||(a=this.widgetArgs.getRFT(r)),this.gridOptions.push({id:i,inputName:t[i],rasterElement:e,raster:a??e}),i++}while(i<=a)}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.rasterVariables,referenceElement:this.variablesContainer,helpTextID:this.widgetArgs.helpTextIDs?.calculator_rastervariables});this.helpActionClickEventHandlers.set(f,e)}render(){return(0,n.h)("div",null,(0,n.h)("calcite-label",{alignment:"start",scale:i.U.Scale,layout:"default",ref:e=>{this.variablesContainer=e}},(0,n.h)("rfx-label",{label:this.strings.rasterVariables,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(f)()}),(0,n.h)("rfx-grid",{inputLayers:this.widgetArgs.inputLayers,gridLayout:this.gridLayout,gridOptions:this.gridOptions,onRfxGridOptionChange:this.updateWidgetArgs,hasHeader:!1,hasIdColumn:!1,canAdd:!0,canRemove:!0,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,n.a)(this)}};d.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}.rfx-cte-named-raster-editor__name-column{width:5rem}",r(48363),r(36676),r(81279)},64729:(e,t,r)=>{r.d(t,{C:()=>a,U:()=>n,a:()=>s});const n={Scale:"s",PopoverTimer:60},a={s:"s",m:"m"},s={absolute:"absolute",fixed:"fixed"}}}]);