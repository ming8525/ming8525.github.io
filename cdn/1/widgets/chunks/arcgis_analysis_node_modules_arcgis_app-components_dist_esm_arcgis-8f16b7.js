/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8f16b7.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8f16b7"],{33944:(e,r,t)=>{t.r(r),t.d(r,{arcgis_new_item_pages_tile_layer_from_existing:()=>f});var n=t(81149),o=t(88780),a=t(20164),i=t(49853),s=t(62824),l=t(87953),c=t(20206),u=t(65804),d=t(43237),y=t(6990);t(69283),t(79210),t(70464),t(12846),t(82102),t(74689),t(13615),t(52787),t(25145),t(41487),t(50202),t(70217),t(78239),t(70105),t(18762),t(49288),t(42577),t(30301),t(14192);const f=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.selectedItem=void 0,this.error=void 0,this.isProcessing=!1}async handleNext(){var e;if("3dTiles"===c.a.tileLayerPublishType)return;this.error=null;const{selectedItem:r}=this;if(!r)return(0,y.f)("No layer selected"),void(this.error="noLayerSelected");const{id:t,url:n,title:u}=r;try{const y=c.a.tileLayerPublishType;this.isProcessing=!0;const f=i.c.portal,[{layers:p,tables:v,serviceInfo:m},{total:h,relatedItems:g}]=await Promise.all([(0,s.q)(n,(0,a.g)(f),!0),(0,o.g)(t,f,{relationshipType:"Service2Service"})]),{result:w}=await(0,l.f)({itemId:t,itemUrl:n,publishType:"vectorTiles"===c.a.tileLayerPublishType?"vector":"raster",portal:f,fullLayers:p});if(h>0&&("vectorTiles"===y&&g.some((e=>"Vector Tile Service"===e.type))||"tiles"===y&&g.some((e=>"Map Service"===e.type))))return void(this.error="tileLayerAlreadyExist");const b=e=>(null!=e?e:[]).some((e=>{var r,t;const{drawingInfo:n,fields:o,layerDefinition:a}=e,i=null==a?void 0:a.drawingInfo,s=null!==(r=null==i?void 0:i.renderer)&&void 0!==r?r:null==n?void 0:n.renderer;return s&&o?!(0,l.c)(s,e.geometryType,o)||(0,l.l)(e):null!==(t=(0,l.l)(e))&&void 0!==t&&t}));if(b(p)||b(w.layers))return void(this.error="badRenderer");const L=e=>(0,l.a)(e,!0);if(!p.some(L)||(null===(e=null==w?void 0:w.layers)||void 0===e?void 0:e.length)>0&&!w.layers.some(L))return void(this.error="badLayer");c.a.sourceTitle=u,(0,d.s)(r),c.a.tileAutoCreation=!0,c.a.tileLayerBasemapType="standard",c.a.tileLayerBasemapUrl="",c.a.tileLayerFromFeatureLayer=!0,c.a.tileLayerLayers=p,c.a.tileLayerTables=v,c.a.tileLayerServiceInfo=m,c.a.tileLayerData=w,c.a.item=r,this.isProcessing=!1,this.newItemUpdatePage.emit("tileLayerSettings")}catch(e){console.error(e)}}onError(){this.isProcessing=!1}componentWillLoad(){c.a.serviceInfo=null,c.a.selectedServiceInfoLayersNames=null,this.i18n=u.u.i18n.tileLayerFromExisting}render(){var e,r;const{error:t,i18n:o,isProcessing:a}=this;return(0,n.h)(n.H,null,(0,n.h)("arcgis-new-item-loader",{active:a}),(0,n.h)("arcgis-new-item-feature-layer-browser",{itemBrowserBucket:["my"],onItemSelected:({detail:e})=>this.selectedItem=e,query:'type:"Feature Service" AND typekeywords:"Hosted Service" NOT typekeywords:"Spatiotemporal"'}),(0,n.h)("arcgis-new-item-alert",{heading:"badLayer"===t?o.error.tileLayerAlreadyExist.title:null===(e=o.error[t])||void 0===e?void 0:e.title,description:"badLayer"===t||null===(r=o.error[t])||void 0===r?void 0:r.description,active:null!=t,onAlertDismiss:()=>{this.error=null}}))}static get watchers(){return{error:["onError"]}}}},6990:(e,r,t)=>{t.d(r,{a:()=>y,b:()=>u,c:()=>d,e:()=>l,f:()=>f,i:()=>c});var n=t(49853),o=t(20206);const a="create feature layer",i="my content",s=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},l=e=>{const r=n.c.telemetry;null==r||r.stepWorkflow(a,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:a,attribute:s(o.a.addFeatureLayerType),pageName:i})},c=e=>{const r=n.c.telemetry;null==r||r.stepWorkflow(a,`expand ${e} details`,{category:a,attribute:s(o.a.addFeatureLayerType),pageName:i})},u=()=>{const e=n.c.telemetry;null==e||e.stepWorkflow(a,"filter",{category:a,attribute:s(o.a.addFeatureLayerType),pageName:i})},d=e=>{const r=s(e),t=n.c.telemetry;null==t||t.stepWorkflow(a,"from option",{category:a,attribute:r,pageName:i})},y=()=>{const{addFeatureLayerType:e,serviceInfo:r}=o.a,t=r,l=n.c.telemetry;null==l||l.endWorkflow(a,{category:a,attribute:s(e),pageName:i,count:t.layers.length,number:t.tables.length})},f=e=>{var r;null===(r=n.c.telemetry)||void 0===r||r.logError({category:a,error:e})}},69283:(e,r,t)=>{t.d(r,{a:()=>n,c:()=>a,e:()=>i,g:()=>o,l:()=>s});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,r,t){return e(t={path:r,exports:{},require:function(e,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}var i=a((function(e,r){!function(e){var r={Promise:"undefined"!=typeof window?window.Promise:void 0},t="4.24",n="next";function o(e){if(e.toLowerCase()===n)return n;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function a(e){return void 0===e&&(e=t),"https://js.arcgis.com/".concat(e,"/")}function i(e){return!e||o(e)?function(e){void 0===e&&(e=t);var r=a(e),i=o(e);if(i!==n&&3===i.major){var s=i.minor<=10?"js/":"";return"".concat(r).concat(s,"esri/css/esri.css")}return"".concat(r,"esri/themes/light/main.css")}(e):e}function s(e,r){var t=i(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return n||function(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(n=function(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}(t),r),n}var l={};function c(e,r,t){var n;t&&(n=function(e,r){var t=function(n){r(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var o=function(){r(e),e.removeEventListener("load",o,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",o,!1)}function u(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var t={};[l,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}));var n=t.version,o=t.url||a(n);return new r.Promise((function(e,r){var a=u();if(a){var i=a.getAttribute("src");i!==o?r(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):d()?e(a):c(a,e,r)}else if(d())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=t.css;l&&s(!0===l?n:l,t.insertCssBefore),c(a=function(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}(o),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),r),document.body.appendChild(a)}}))}function f(e){return new r.Promise((function(r,t){var n=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.remove(),r(e)}))}))}e.utils=r,e.loadModules=function(e,r){if(void 0===r&&(r={}),d())return f(e);var t=u(),n=t&&t.getAttribute("src");return!r.url&&n&&(r.url=n),y(r).then((function(){return f(e)}))},e.getScript=u,e.isLoaded=d,e.loadScript=y,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(r)}));const s=async(e,r)=>(await i.loadModules(e,r)).map((e=>e.__esModule&&e.default?e.default:e))}}]);