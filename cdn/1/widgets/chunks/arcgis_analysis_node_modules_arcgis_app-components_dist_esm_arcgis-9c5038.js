"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-9c5038"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-4e11032c.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-4e11032c.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ AppendOverwriteCloudPublishTypes),
/* harmony export */   N: () => (/* binding */ NONE_VALUE),
/* harmony export */   a: () => (/* binding */ appendFileTypes),
/* harmony export */   b: () => (/* binding */ AppendOverwritePublishTypes),
/* harmony export */   c: () => (/* binding */ appendExtensionsForEnterprise),
/* harmony export */   d: () => (/* binding */ appendExtensions),
/* harmony export */   u: () => (/* binding */ uidFields)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const uidFields = ["esriFieldTypeOID", "esriFieldTypeGlobalID"];
const NONE_VALUE = "<None>";
const AppendOverwritePublishTypes = {
    "file geodatabase": "filegeodatabase",
    shapefile: "shapefile",
    geojson: "geojson",
    csv: "CSV",
    "microsoft excel": "excel",
    geopackage: "geoPackage"
};
const appendFileTypes = {
    Shapefile: "shapefile",
    "File Geodatabase": "fileGeodatabase",
    CSV: "csv",
    "Microsoft Excel": "excel",
    GeoJson: "geojson",
    GeoPackage: "geoPackage"
};
const AppendOverwriteCloudPublishTypes = {
    csv: "CSV",
    excel: "Microsoft Excel",
    shapefile: "Shapefile",
    fgdb: "File Geodatabase",
    geojson: "GeoJson",
    googlesheets: "Microsoft Excel"
};
const appendExtensions = ["zip", "csv", "xls", "xlsx", "geojson", "gpkg", "json"];
const appendExtensionsForEnterprise = ["zip", "csv", "xls", "xlsx"];



//# sourceMappingURL=append-4e11032c.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-upload.entry.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-upload.entry.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_upload: () => (/* binding */ ArcgisNewItemPagesDataUpload)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _overwrite_7eb8dfd4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./overwrite-7eb8dfd4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/overwrite-7eb8dfd4.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _item_types_586f0301_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./item-types-586f0301.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/* harmony import */ var _publish_item_17d2f9a3_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./publish-item-17d2f9a3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/publish-item-17d2f9a3.js");
/* harmony import */ var _tile_layer_cf04fa97_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./tile-layer-cf04fa97.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/tile-layer-cf04fa97.js");
/* harmony import */ var _geocode_64e0b0d3_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./geocode-64e0b0d3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/geocode-64e0b0d3.js");
/* harmony import */ var _privileges_5c382f61_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./privileges-5c382f61.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-5c382f61.js");
/* harmony import */ var _privileges_74639dae_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./privileges-74639dae.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/privileges-74639dae.js");
/* harmony import */ var _append_4e11032c_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./append-4e11032c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/append-4e11032c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */








































const arcgisNewItemPagesDataUploadCss = ".arcgis-file-browser{display:block;height:95%}";

const ArcgisNewItemPagesDataUpload = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.workflowComplete = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "workflowComplete", 7);
        this.allowedExtensions = null; //TODO: Add specified file extensions for update workflow when known
        this.loading = false;
        this.loaderMessage = undefined;
        this.loaderType = "indeterminate";
        this.error = undefined;
    }
    componentWillLoad() {
        const { existingItem, fileName } = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a;
        const type = existingItem.type;
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.appendUpload;
        this.item = existingItem;
        switch (type) {
            case "Vector Tile Service":
                this.header = this.i18n.editStyle;
                break;
            case "Vector Tile Package":
            case "Layer Package":
            case "Tile Package":
                this.header = (this.i18n.updatePackages).replace("${type}", type.toLowerCase()).replace("${hostedLayerName}", fileName);
                break;
            default:
                this.header = this.i18n.sameFileNameDescription.replace("${fileName}", fileName);
        }
        if (type === "Vector Tile Service") {
            this.allowedExtensions = ["json"]; //Todo: should fix the helpmap number for /updateresources.
        }
    }
    // Triggered when a file is selected (via drop or button)
    async fileSelectHandler(event) {
        var _a;
        this.sourceName = ((_a = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.sourceData) === null || _a === void 0 ? void 0 : _a.name) || _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.name;
        const file = event.detail.file;
        const itemType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem.type;
        const { title, fileName, extension } = (0,_file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__.s)(file);
        if (itemType === "Vector Tile Service") {
            if (extension !== "json") {
                this.handleError({ code: "invalidExtension" });
                return;
            }
        }
        else if (fileName !== this.sourceName) {
            this.handleError({ code: "useSameFileName" });
            return;
        }
        _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_3__.i.title = title;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.file = file;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.fileName = fileName;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.newItemMode = "file";
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.extension = extension;
        const possibleItemTypes = (0,_item_types_586f0301_js__WEBPACK_IMPORTED_MODULE_7__.f)(extension);
        if (possibleItemTypes.length === 1) {
            const type = possibleItemTypes[0].type;
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.type = type;
        }
        if (itemType === "Layer Package") {
            this.newItemUpdatePage.emit("appendSelectUpdate");
        }
        else if (itemType === "Vector Tile Service") {
            this.handleUpdateStyle();
        }
        else {
            this.handleUpdate();
        }
    }
    async handleUpdate() {
        this.loading = true;
        this.loaderMessage = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.append.appendLoadingMessages.updating;
        const response = await (0,_overwrite_7eb8dfd4_js__WEBPACK_IMPORTED_MODULE_4__.b)(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem, this.item.itemOwner.userContentUrl, // ! Use fetchUser if itemOwner is not available
        {
            file: _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.file,
            overwrite: true,
            keepDescription: true
        });
        if (!response.success) {
            this.handleError({ code: "unhandledError" });
        }
        else {
            this.workflowComplete.emit({
                success: response.success
            });
        }
    }
    async handleUpdateStyle() {
        this.loading = true;
        this.loaderMessage = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.append.appendLoadingMessages.updating;
        const { result, error } = await (0,_overwrite_7eb8dfd4_js__WEBPACK_IMPORTED_MODULE_4__.c)(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.existingItem, this.item.itemOwner.userContentUrl, // ! Use fetchUser if itemOwner is not available
        {
            file: _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_5__.a.file
        });
        if (result.success) {
            this.workflowComplete.emit({
                success: result.success
            });
        }
        if (error) {
            this.handleError({ code: error.code });
        }
    }
    async handleError(error) {
        let errorMessage = this.i18n.errors.errorWhileUpload;
        this.loading = false;
        switch (error.code) {
            case "invalidExtension":
                errorMessage = this.i18n.errors.invalidStyleFileExtension;
            case "useSameFileName":
                errorMessage = this.i18n.errors.sameFileName.replace("${x}", this.sourceName);
                break;
            case "unhandledError":
                errorMessage = this.i18n.errors.errorUpdate;
                break;
        }
        this.error = { title: _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_6__.u.i18n.error, description: errorMessage };
        return;
    }
    render() {
        const { header, loaderType, loading, loaderMessage, error, allowedExtensions } = this;
        const { portal, config, user } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-loader", { type: loaderType, active: loading, text: loaderMessage }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: header }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-file-browser", { class: "arcgis-file-browser", cloud: false, insideModal: true, fullHeight: true, portal: portal, config: config, user: user, allowedExtensions: allowedExtensions }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: error === null || error === void 0 ? void 0 : error.title, description: error === null || error === void 0 ? void 0 : error.description, link: { href: error === null || error === void 0 ? void 0 : error.link, title: error === null || error === void 0 ? void 0 : error.linkText }, active: !!error, onAlertDismiss: () => (this.error = null) })));
    }
};
ArcgisNewItemPagesDataUpload.style = arcgisNewItemPagesDataUploadCss;



//# sourceMappingURL=arcgis-new-item-pages-data-upload.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isLargeCSV),
/* harmony export */   f: () => (/* binding */ findPossibleItemTypesByExtension),
/* harmony export */   i: () => (/* binding */ isLargeGeoJSON),
/* harmony export */   m: () => (/* binding */ mapItemTypesToFileExtensions)
/* harmony export */ });
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



function findPossibleItemTypesByExtension(extension, validationTypes) {
    // Search item types extensions for the one imported
    let itemTypes;
    if (validationTypes) {
        itemTypes = validationTypes.map((value) => {
            return value.type;
        });
    }
    else {
        itemTypes = Object.keys(_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a);
    }
    let possibleItemTypes = [];
    itemTypes.forEach((type) => {
        var _a;
        if (((_a = _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type].fileExt) === null || _a === void 0 ? void 0 : _a.indexOf(extension)) >= 0) {
            possibleItemTypes.push(_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type]);
        }
    });
    return possibleItemTypes;
}
function mapItemTypesToFileExtensions(types) {
    if (!types) {
        return null;
    }
    return (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_0__.b)(types.flatMap((type) => { var _a; return (_a = _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type]) === null || _a === void 0 ? void 0 : _a.fileExt; }).filter((valid) => !!valid));
}
const isLargeGeoJSON = (sizeInBytes) => {
    const sizeInMB = sizeInBytes / 1024 / 1024;
    // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2553#issuecomment-3645404
    return sizeInMB > 50; // 50MB
};
const isLargeCSV = (sizeInBytes) => {
    const sizeInMB = sizeInBytes / 1024 / 1024;
    // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2875#issuecomment-3748913
    return sizeInMB > 20; // 20MB
};



//# sourceMappingURL=item-types-586f0301.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTljNTAzOC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFcU07O0FBRXJNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUM0RjtBQUNwQztBQUNJO0FBQ2E7QUFDbUI7QUFDakM7QUFDTjtBQUM0QjtBQUNwRDtBQUNLO0FBQ047QUFDUztBQUNIO0FBQ1A7QUFDVTtBQUNKO0FBQ0g7QUFDSztBQUNKO0FBQ0g7QUFDQztBQUNGO0FBQ0c7QUFDSDtBQUNDO0FBQ087QUFDUDtBQUNNO0FBQ0c7QUFDVjtBQUNBO0FBQ0k7QUFDRjtBQUNPO0FBQ0Y7QUFDSDtBQUNHO0FBQ0E7QUFDSjs7QUFFOUIsOERBQThELGNBQWMsV0FBVzs7QUFFdkY7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QyxnQ0FBZ0MscURBQVc7QUFDM0MsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5QkFBeUIsRUFBRSxvREFBWTtBQUN2RDtBQUNBLG9CQUFvQiw4Q0FBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEtBQUssa0NBQWtDLGdCQUFnQjtBQUMzSDtBQUNBO0FBQ0EsMkVBQTJFLFNBQVM7QUFDcEY7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9EQUFZLDJFQUEyRSxvREFBWTtBQUNwSTtBQUNBLHlCQUF5QixvREFBWTtBQUNyQyxnQkFBZ0IsNkJBQTZCLEVBQUUsb0RBQWlCO0FBQ2hFO0FBQ0E7QUFDQSxtQ0FBbUMsMEJBQTBCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlCQUF5QjtBQUN4RDtBQUNBO0FBQ0EsUUFBUSwyREFBbUI7QUFDM0IsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixrQ0FBa0MsMERBQWdDO0FBQ2xFO0FBQ0E7QUFDQSxZQUFZLG9EQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhDQUFZO0FBQ3pDLCtCQUErQix5REFBbUIsQ0FBQyxvREFBWTtBQUMvRDtBQUNBLGtCQUFrQixvREFBWTtBQUM5QjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsK0JBQStCLHdCQUF3QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4Q0FBWTtBQUN6QyxnQkFBZ0IsZ0JBQWdCLFFBQVEseURBQWtCLENBQUMsb0RBQVk7QUFDdkU7QUFDQSxrQkFBa0Isb0RBQVk7QUFDOUIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsK0JBQStCLGtCQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsRUFBRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU8sOENBQVk7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUF1RTtBQUN2RixnQkFBZ0IsdUJBQXVCLEVBQUUsa0RBQVc7QUFDcEQsZ0JBQWdCLHFEQUFDLENBQUMsaURBQUksUUFBUSxxREFBQyw2QkFBNkIsd0RBQXdELEdBQUcscURBQUMsa0NBQWtDLGdCQUFnQixHQUFHLHFEQUFDLDBCQUEwQixtS0FBbUssR0FBRyxxREFBQyw0QkFBNEIsMEpBQTBKLHFJQUFxSSw4REFBOEQ7QUFDeHVCO0FBQ0E7QUFDQTs7QUFFNkU7O0FBRTdFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDL0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VEO0FBQ1k7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0NBQWdDLHNEQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzREFBa0I7QUFDckMsbUNBQW1DLHNEQUFrQjtBQUNyRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDBEQUFNLDJCQUEyQixRQUFRLGFBQWEsc0RBQWtCLDBEQUEwRDtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjs7QUFFMEg7O0FBRTFIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXBwZW5kLTRlMTEwMzJjLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kYXRhLXVwbG9hZC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pdGVtLXR5cGVzLTU4NmYwMzAxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuY29uc3QgdWlkRmllbGRzID0gW1wiZXNyaUZpZWxkVHlwZU9JRFwiLCBcImVzcmlGaWVsZFR5cGVHbG9iYWxJRFwiXTtcbmNvbnN0IE5PTkVfVkFMVUUgPSBcIjxOb25lPlwiO1xuY29uc3QgQXBwZW5kT3ZlcndyaXRlUHVibGlzaFR5cGVzID0ge1xuICAgIFwiZmlsZSBnZW9kYXRhYmFzZVwiOiBcImZpbGVnZW9kYXRhYmFzZVwiLFxuICAgIHNoYXBlZmlsZTogXCJzaGFwZWZpbGVcIixcbiAgICBnZW9qc29uOiBcImdlb2pzb25cIixcbiAgICBjc3Y6IFwiQ1NWXCIsXG4gICAgXCJtaWNyb3NvZnQgZXhjZWxcIjogXCJleGNlbFwiLFxuICAgIGdlb3BhY2thZ2U6IFwiZ2VvUGFja2FnZVwiXG59O1xuY29uc3QgYXBwZW5kRmlsZVR5cGVzID0ge1xuICAgIFNoYXBlZmlsZTogXCJzaGFwZWZpbGVcIixcbiAgICBcIkZpbGUgR2VvZGF0YWJhc2VcIjogXCJmaWxlR2VvZGF0YWJhc2VcIixcbiAgICBDU1Y6IFwiY3N2XCIsXG4gICAgXCJNaWNyb3NvZnQgRXhjZWxcIjogXCJleGNlbFwiLFxuICAgIEdlb0pzb246IFwiZ2VvanNvblwiLFxuICAgIEdlb1BhY2thZ2U6IFwiZ2VvUGFja2FnZVwiXG59O1xuY29uc3QgQXBwZW5kT3ZlcndyaXRlQ2xvdWRQdWJsaXNoVHlwZXMgPSB7XG4gICAgY3N2OiBcIkNTVlwiLFxuICAgIGV4Y2VsOiBcIk1pY3Jvc29mdCBFeGNlbFwiLFxuICAgIHNoYXBlZmlsZTogXCJTaGFwZWZpbGVcIixcbiAgICBmZ2RiOiBcIkZpbGUgR2VvZGF0YWJhc2VcIixcbiAgICBnZW9qc29uOiBcIkdlb0pzb25cIixcbiAgICBnb29nbGVzaGVldHM6IFwiTWljcm9zb2Z0IEV4Y2VsXCJcbn07XG5jb25zdCBhcHBlbmRFeHRlbnNpb25zID0gW1wiemlwXCIsIFwiY3N2XCIsIFwieGxzXCIsIFwieGxzeFwiLCBcImdlb2pzb25cIiwgXCJncGtnXCIsIFwianNvblwiXTtcbmNvbnN0IGFwcGVuZEV4dGVuc2lvbnNGb3JFbnRlcnByaXNlID0gW1wiemlwXCIsIFwiY3N2XCIsIFwieGxzXCIsIFwieGxzeFwiXTtcblxuZXhwb3J0IHsgQXBwZW5kT3ZlcndyaXRlQ2xvdWRQdWJsaXNoVHlwZXMgYXMgQSwgTk9ORV9WQUxVRSBhcyBOLCBhcHBlbmRGaWxlVHlwZXMgYXMgYSwgQXBwZW5kT3ZlcndyaXRlUHVibGlzaFR5cGVzIGFzIGIsIGFwcGVuZEV4dGVuc2lvbnNGb3JFbnRlcnByaXNlIGFzIGMsIGFwcGVuZEV4dGVuc2lvbnMgYXMgZCwgdWlkRmllbGRzIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwZW5kLTRlMTEwMzJjLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgeyBzIGFzIHNhbml0aXplRmlsZUlucHV0IH0gZnJvbSAnLi9maWxlLWJmOGFiOTBmLmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLTEwNDkxYjJlLmpzJztcbmltcG9ydCB7IGIgYXMgdXBkYXRlSXRlbU92ZXJ3cml0ZSwgYyBhcyB1cGRhdGVJdGVtUmVzb3VyY2UgfSBmcm9tICcuL292ZXJ3cml0ZS03ZWI4ZGZkNC5qcyc7XG5pbXBvcnQgeyBhIGFzIGFkZEl0ZW1TdGF0ZSB9IGZyb20gJy4vYWRkLWl0ZW0tZGJiZTJmNTcuanMnO1xuaW1wb3J0IHsgdSBhcyB1aVN0b3JlU3RhdGUgfSBmcm9tICcuL3VpLWJjYTdiY2QxLmpzJztcbmltcG9ydCB7IGYgYXMgZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24gfSBmcm9tICcuL2l0ZW0tdHlwZXMtNTg2ZjAzMDEuanMnO1xuaW1wb3J0ICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcbmltcG9ydCAnLi9pdGVtLXR5cGVzLTIwMjliMDZiLmpzJztcbmltcG9ydCAnLi9ndWlkLWFlYWVkODRkLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTU3M2JiNDczLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCAnLi91cmwtNGMzYWU1NGMuanMnO1xuaW1wb3J0ICcuL2ZlYXR1cmUtbGF5ZXItNzlmYjMwMmMuanMnO1xuaW1wb3J0ICcuL3RodW1ibmFpbC1iY2I4OWU2OS5qcyc7XG5pbXBvcnQgJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1iNGFjMTI0Ny5qcyc7XG5pbXBvcnQgJy4vc2VydmljZS04YzJjNDI0MS5qcyc7XG5pbXBvcnQgJy4vdXNlci0zZWE2OWMzYS5qcyc7XG5pbXBvcnQgJy4vcXVlcnktZDYyNjYwZDQuanMnO1xuaW1wb3J0ICcuL2FwaS0yZTNhMTM2Zi5qcyc7XG5pbXBvcnQgJy4vc3RyaW5nLTU4YTVmZWYzLmpzJztcbmltcG9ydCAnLi9kb20tNGQzNjc2NzcuanMnO1xuaW1wb3J0ICcuL2l0ZW0tYzU4ZmZjZWQuanMnO1xuaW1wb3J0ICcuL3NlcnZlci1pdGVtLThkMzg0Nzk2LmpzJztcbmltcG9ydCAnLi9pdGVtLTM1MzU1NTJkLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTgxMzczZjZkLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTE3YjY0OTQ2LmpzJztcbmltcG9ydCAnLi9hZ3MtZWI0NThhMDMuanMnO1xuaW1wb3J0ICcuL3VybC0zNTg3NWExMC5qcyc7XG5pbXBvcnQgJy4vc3RvcmFnZS0wMzUzYTc2OS5qcyc7XG5pbXBvcnQgJy4vc3RvcmUtNmE4OGU2YzUuanMnO1xuaW1wb3J0ICcuL3B1Ymxpc2gtaXRlbS0xN2QyZjlhMy5qcyc7XG5pbXBvcnQgJy4vdGlsZS1sYXllci1jZjA0ZmE5Ny5qcyc7XG5pbXBvcnQgJy4vZ2VvY29kZS02NGUwYjBkMy5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy01YzM4MmY2MS5qcyc7XG5pbXBvcnQgJy4vcHJpdmlsZWdlcy03NDYzOWRhZS5qcyc7XG5pbXBvcnQgJy4vYXBwZW5kLTRlMTEwMzJjLmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVVwbG9hZENzcyA9IFwiLmFyY2dpcy1maWxlLWJyb3dzZXJ7ZGlzcGxheTpibG9jaztoZWlnaHQ6OTUlfVwiO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhVXBsb2FkID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMud29ya2Zsb3dDb21wbGV0ZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwid29ya2Zsb3dDb21wbGV0ZVwiLCA3KTtcbiAgICAgICAgdGhpcy5hbGxvd2VkRXh0ZW5zaW9ucyA9IG51bGw7IC8vVE9ETzogQWRkIHNwZWNpZmllZCBmaWxlIGV4dGVuc2lvbnMgZm9yIHVwZGF0ZSB3b3JrZmxvdyB3aGVuIGtub3duXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvYWRlck1lc3NhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubG9hZGVyVHlwZSA9IFwiaW5kZXRlcm1pbmF0ZVwiO1xuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgY29uc3QgeyBleGlzdGluZ0l0ZW0sIGZpbGVOYW1lIH0gPSBhZGRJdGVtU3RhdGU7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBleGlzdGluZ0l0ZW0udHlwZTtcbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uYXBwZW5kVXBsb2FkO1xuICAgICAgICB0aGlzLml0ZW0gPSBleGlzdGluZ0l0ZW07XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIlZlY3RvciBUaWxlIFNlcnZpY2VcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9IHRoaXMuaTE4bi5lZGl0U3R5bGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVmVjdG9yIFRpbGUgUGFja2FnZVwiOlxuICAgICAgICAgICAgY2FzZSBcIkxheWVyIFBhY2thZ2VcIjpcbiAgICAgICAgICAgIGNhc2UgXCJUaWxlIFBhY2thZ2VcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlciA9ICh0aGlzLmkxOG4udXBkYXRlUGFja2FnZXMpLnJlcGxhY2UoXCIke3R5cGV9XCIsIHR5cGUudG9Mb3dlckNhc2UoKSkucmVwbGFjZShcIiR7aG9zdGVkTGF5ZXJOYW1lfVwiLCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5pMThuLnNhbWVGaWxlTmFtZURlc2NyaXB0aW9uLnJlcGxhY2UoXCIke2ZpbGVOYW1lfVwiLCBmaWxlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFwiVmVjdG9yIFRpbGUgU2VydmljZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gW1wianNvblwiXTsgLy9Ub2RvOiBzaG91bGQgZml4IHRoZSBoZWxwbWFwIG51bWJlciBmb3IgL3VwZGF0ZXJlc291cmNlcy5cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUcmlnZ2VyZWQgd2hlbiBhIGZpbGUgaXMgc2VsZWN0ZWQgKHZpYSBkcm9wIG9yIGJ1dHRvbilcbiAgICBhc3luYyBmaWxlU2VsZWN0SGFuZGxlcihldmVudCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuc291cmNlTmFtZSA9ICgoX2EgPSBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLnNvdXJjZURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lKSB8fCBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLm5hbWU7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC5kZXRhaWwuZmlsZTtcbiAgICAgICAgY29uc3QgaXRlbVR5cGUgPSBhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLnR5cGU7XG4gICAgICAgIGNvbnN0IHsgdGl0bGUsIGZpbGVOYW1lLCBleHRlbnNpb24gfSA9IHNhbml0aXplRmlsZUlucHV0KGZpbGUpO1xuICAgICAgICBpZiAoaXRlbVR5cGUgPT09IFwiVmVjdG9yIFRpbGUgU2VydmljZVwiKSB7XG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBcImpzb25cIikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBcImludmFsaWRFeHRlbnNpb25cIiB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmlsZU5hbWUgIT09IHRoaXMuc291cmNlTmFtZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7IGNvZGU6IFwidXNlU2FtZUZpbGVOYW1lXCIgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXRlbVByb3BlcnRpZXNTdGF0ZS50aXRsZSA9IHRpdGxlO1xuICAgICAgICBhZGRJdGVtU3RhdGUuZmlsZSA9IGZpbGU7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5maWxlTmFtZSA9IGZpbGVOYW1lO1xuICAgICAgICBhZGRJdGVtU3RhdGUubmV3SXRlbU1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmV4dGVuc2lvbiA9IGV4dGVuc2lvbjtcbiAgICAgICAgY29uc3QgcG9zc2libGVJdGVtVHlwZXMgPSBmaW5kUG9zc2libGVJdGVtVHlwZXNCeUV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgICAgICBpZiAocG9zc2libGVJdGVtVHlwZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gcG9zc2libGVJdGVtVHlwZXNbMF0udHlwZTtcbiAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS50eXBlID0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbVR5cGUgPT09IFwiTGF5ZXIgUGFja2FnZVwiKSB7XG4gICAgICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlLmVtaXQoXCJhcHBlbmRTZWxlY3RVcGRhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbVR5cGUgPT09IFwiVmVjdG9yIFRpbGUgU2VydmljZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVVwZGF0ZVN0eWxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sb2FkZXJNZXNzYWdlID0gdWlTdG9yZVN0YXRlLmkxOG4uYXBwZW5kLmFwcGVuZExvYWRpbmdNZXNzYWdlcy51cGRhdGluZztcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGRhdGVJdGVtT3ZlcndyaXRlKGFkZEl0ZW1TdGF0ZS5leGlzdGluZ0l0ZW0sIHRoaXMuaXRlbS5pdGVtT3duZXIudXNlckNvbnRlbnRVcmwsIC8vICEgVXNlIGZldGNoVXNlciBpZiBpdGVtT3duZXIgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICB7XG4gICAgICAgICAgICBmaWxlOiBhZGRJdGVtU3RhdGUuZmlsZSxcbiAgICAgICAgICAgIG92ZXJ3cml0ZTogdHJ1ZSxcbiAgICAgICAgICAgIGtlZXBEZXNjcmlwdGlvbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHsgY29kZTogXCJ1bmhhbmRsZWRFcnJvclwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53b3JrZmxvd0NvbXBsZXRlLmVtaXQoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2Nlc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVVwZGF0ZVN0eWxlKCkge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvYWRlck1lc3NhZ2UgPSB1aVN0b3JlU3RhdGUuaTE4bi5hcHBlbmQuYXBwZW5kTG9hZGluZ01lc3NhZ2VzLnVwZGF0aW5nO1xuICAgICAgICBjb25zdCB7IHJlc3VsdCwgZXJyb3IgfSA9IGF3YWl0IHVwZGF0ZUl0ZW1SZXNvdXJjZShhZGRJdGVtU3RhdGUuZXhpc3RpbmdJdGVtLCB0aGlzLml0ZW0uaXRlbU93bmVyLnVzZXJDb250ZW50VXJsLCAvLyAhIFVzZSBmZXRjaFVzZXIgaWYgaXRlbU93bmVyIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAge1xuICAgICAgICAgICAgZmlsZTogYWRkSXRlbVN0YXRlLmZpbGVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhpcy53b3JrZmxvd0NvbXBsZXRlLmVtaXQoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoeyBjb2RlOiBlcnJvci5jb2RlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLmVycm9yV2hpbGVVcGxvYWQ7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJpbnZhbGlkRXh0ZW5zaW9uXCI6XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gdGhpcy5pMThuLmVycm9ycy5pbnZhbGlkU3R5bGVGaWxlRXh0ZW5zaW9uO1xuICAgICAgICAgICAgY2FzZSBcInVzZVNhbWVGaWxlTmFtZVwiOlxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IHRoaXMuaTE4bi5lcnJvcnMuc2FtZUZpbGVOYW1lLnJlcGxhY2UoXCIke3h9XCIsIHRoaXMuc291cmNlTmFtZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwidW5oYW5kbGVkRXJyb3JcIjpcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSB0aGlzLmkxOG4uZXJyb3JzLmVycm9yVXBkYXRlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXJyb3IgPSB7IHRpdGxlOiB1aVN0b3JlU3RhdGUuaTE4bi5lcnJvciwgZGVzY3JpcHRpb246IGVycm9yTWVzc2FnZSB9O1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBoZWFkZXIsIGxvYWRlclR5cGUsIGxvYWRpbmcsIGxvYWRlck1lc3NhZ2UsIGVycm9yLCBhbGxvd2VkRXh0ZW5zaW9ucyB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBwb3J0YWwsIGNvbmZpZywgdXNlciB9ID0gY29uZmlnU3RhdGU7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWxvYWRlclwiLCB7IHR5cGU6IGxvYWRlclR5cGUsIGFjdGl2ZTogbG9hZGluZywgdGV4dDogbG9hZGVyTWVzc2FnZSB9KSwgaChcImFyY2dpcy1uZXctaXRlbS1kZXNjcmlwdGlvblwiLCB7IGhlYWRlcjogaGVhZGVyIH0pLCBoKFwiYXJjZ2lzLWZpbGUtYnJvd3NlclwiLCB7IGNsYXNzOiBcImFyY2dpcy1maWxlLWJyb3dzZXJcIiwgY2xvdWQ6IGZhbHNlLCBpbnNpZGVNb2RhbDogdHJ1ZSwgZnVsbEhlaWdodDogdHJ1ZSwgcG9ydGFsOiBwb3J0YWwsIGNvbmZpZzogY29uZmlnLCB1c2VyOiB1c2VyLCBhbGxvd2VkRXh0ZW5zaW9uczogYWxsb3dlZEV4dGVuc2lvbnMgfSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IudGl0bGUsIGRlc2NyaXB0aW9uOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuZGVzY3JpcHRpb24sIGxpbms6IHsgaHJlZjogZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmxpbmssIHRpdGxlOiBlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubGlua1RleHQgfSwgYWN0aXZlOiAhIWVycm9yLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4gKHRoaXMuZXJyb3IgPSBudWxsKSB9KSkpO1xuICAgIH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNEYXRhVXBsb2FkLnN0eWxlID0gYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVVwbG9hZENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVVwbG9hZCBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfZGF0YV91cGxvYWQgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtdXBsb2FkLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYiBhcyB1bmlxdWUgfSBmcm9tICcuL2Z1bmN0aW9uYWwtNDRkZThmY2YuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRDcmVhdGVJdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW0tdHlwZXMtMjAyOWIwNmIuanMnO1xuXG5mdW5jdGlvbiBmaW5kUG9zc2libGVJdGVtVHlwZXNCeUV4dGVuc2lvbihleHRlbnNpb24sIHZhbGlkYXRpb25UeXBlcykge1xuICAgIC8vIFNlYXJjaCBpdGVtIHR5cGVzIGV4dGVuc2lvbnMgZm9yIHRoZSBvbmUgaW1wb3J0ZWRcbiAgICBsZXQgaXRlbVR5cGVzO1xuICAgIGlmICh2YWxpZGF0aW9uVHlwZXMpIHtcbiAgICAgICAgaXRlbVR5cGVzID0gdmFsaWRhdGlvblR5cGVzLm1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50eXBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGl0ZW1UeXBlcyA9IE9iamVjdC5rZXlzKGFkZENyZWF0ZUl0ZW1UeXBlcyk7XG4gICAgfVxuICAgIGxldCBwb3NzaWJsZUl0ZW1UeXBlcyA9IFtdO1xuICAgIGl0ZW1UeXBlcy5mb3JFYWNoKCh0eXBlKSA9PiB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCgoX2EgPSBhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0uZmlsZUV4dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluZGV4T2YoZXh0ZW5zaW9uKSkgPj0gMCkge1xuICAgICAgICAgICAgcG9zc2libGVJdGVtVHlwZXMucHVzaChhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHBvc3NpYmxlSXRlbVR5cGVzO1xufVxuZnVuY3Rpb24gbWFwSXRlbVR5cGVzVG9GaWxlRXh0ZW5zaW9ucyh0eXBlcykge1xuICAgIGlmICghdHlwZXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB1bmlxdWUodHlwZXMuZmxhdE1hcCgodHlwZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWxlRXh0OyB9KS5maWx0ZXIoKHZhbGlkKSA9PiAhIXZhbGlkKSk7XG59XG5jb25zdCBpc0xhcmdlR2VvSlNPTiA9IChzaXplSW5CeXRlcykgPT4ge1xuICAgIGNvbnN0IHNpemVJbk1CID0gc2l6ZUluQnl0ZXMgLyAxMDI0IC8gMTAyNDtcbiAgICAvLyBodHRwczovL2RldnRvcGlhLmVzcmkuY29tL1dlYkdJUy9hcmNnaXMtYXBwLWNvbXBvbmVudHMvaXNzdWVzLzI1NTMjaXNzdWVjb21tZW50LTM2NDU0MDRcbiAgICByZXR1cm4gc2l6ZUluTUIgPiA1MDsgLy8gNTBNQlxufTtcbmNvbnN0IGlzTGFyZ2VDU1YgPSAoc2l6ZUluQnl0ZXMpID0+IHtcbiAgICBjb25zdCBzaXplSW5NQiA9IHNpemVJbkJ5dGVzIC8gMTAyNCAvIDEwMjQ7XG4gICAgLy8gaHR0cHM6Ly9kZXZ0b3BpYS5lc3JpLmNvbS9XZWJHSVMvYXJjZ2lzLWFwcC1jb21wb25lbnRzL2lzc3Vlcy8yODc1I2lzc3VlY29tbWVudC0zNzQ4OTEzXG4gICAgcmV0dXJuIHNpemVJbk1CID4gMjA7IC8vIDIwTUJcbn07XG5cbmV4cG9ydCB7IGlzTGFyZ2VDU1YgYXMgYSwgZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24gYXMgZiwgaXNMYXJnZUdlb0pTT04gYXMgaSwgbWFwSXRlbVR5cGVzVG9GaWxlRXh0ZW5zaW9ucyBhcyBtIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW0tdHlwZXMtNTg2ZjAzMDEuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9