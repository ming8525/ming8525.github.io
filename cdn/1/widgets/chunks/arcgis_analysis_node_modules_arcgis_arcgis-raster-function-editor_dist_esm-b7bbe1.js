"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-b7bbe1"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-named-raster-editor-6ae6a250.js":
/*!************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-named-raster-editor-6ae6a250.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RFxCteNamedRasterEditor)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./rfx-args-helper-ab401543.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-args-helper-ab401543.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");




















const component = "rfx-cte-named-raster-editor";
const HTMLClasses = {
    nameColumn: `${component}__name-column`,
    layerColumn: `${component}__layer-column`
};
const HelpClickHandlerKeys = {
    rasterVariablesHelpClickHandler: "rasterVariablesHelpClickHandler"
};

const rfxCteNamedRasterEditorCss = ":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}.rfx-cte-named-raster-editor__name-column{width:5rem}";

const RFxCteNamedRasterEditor = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        /**
         * layout for the variables grid
         */
        this.gridLayout = {
            inputName: {
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_6__.G.textInput,
                style: HTMLClasses.nameColumn
            },
            assignment: {
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_6__.G.text,
                constValue: "="
            },
            raster: {
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_6__.G.raster,
                allowScalar: true,
                style: HTMLClasses.layerColumn
            }
        };
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        /**
         * called to update the raster args on each event change
         */
        this.updateWidgetArgs = (event) => {
            const { detail: { gridOptions } } = event;
            const inputNames = [], rasterValues = [];
            gridOptions.forEach((gridOption, id) => {
                if (id === gridOptions.length - 1) {
                    return; // last is a placeholder
                }
                if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(gridOption.inputName) && !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(gridOption.raster)) {
                    gridOption.raster.name = gridOption.inputName;
                }
                inputNames.push(gridOption.inputName);
                rasterValues.push(gridOption.raster);
            });
            const inputArgs = this.widgetArgs.inputArgs;
            if (inputArgs.Rasters) {
                // rasterValues is an array of Raster RFxVariables
                if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(inputArgs.Rasters.value)) {
                    inputArgs.Rasters.value = { elements: rasterValues, type: "ArgumentArray" };
                }
                else {
                    inputArgs.Rasters.value.elements = rasterValues;
                }
            }
            if (inputArgs.InputNames) {
                inputArgs.InputNames.value = inputNames;
            }
        };
        this.gridOptions = [];
        this.allowScalar = undefined;
        this.widgetArgs = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    async componentWillLoad() {
        ({ strings: this.strings } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(`.`)));
        this.readInputArgs();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    /**
     * Function to read the value and initialize that rasterElements
     * @returns
     */
    readInputArgs() {
        const inputArgs = this.widgetArgs.inputArgs, inputNames = inputArgs?.InputNames?.value ?? [], rastersArg = inputArgs?.Rasters, rasterElements = rastersArg?.value?.elements || rastersArg?.value || [];
        const maxN = Math.max(inputNames.length, rasterElements.length);
        let i = 0;
        // even no options are there, show an empty row
        do {
            const rasterElement = rasterElements[i];
            const rft = (0,_rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_5__.b)(rasterElement);
            let value;
            if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(rft)) {
                value = this.widgetArgs.getRFT(rft);
            }
            this.gridOptions.push({
                id: i,
                inputName: inputNames[i],
                rasterElement,
                raster: value ?? rasterElement
            });
            i++;
        } while (i <= maxN);
    }
    attachHelpClickEventHandlers() {
        const rasterVariablesHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.strings.rasterVariables,
            referenceElement: this.variablesContainer,
            helpTextID: this.widgetArgs.helpTextIDs?.calculator_rastervariables
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.rasterVariablesHelpClickHandler, rasterVariablesHelpClickHandler);
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "default", ref: (e) => {
                this.variablesContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.strings.rasterVariables, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.rasterVariablesHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-grid", { inputLayers: this.widgetArgs.inputLayers, gridLayout: this.gridLayout, gridOptions: this.gridOptions, onRfxGridOptionChange: this.updateWidgetArgs, hasHeader: false, hasIdColumn: false, canAdd: true, canRemove: true, rfxBrowseLayerClick: this.widgetArgs.onRfxBrowseLayerClick }))));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};
RFxCteNamedRasterEditor.style = rfxCteNamedRasterEditorCss;



//# sourceMappingURL=rfx-cte-named-raster-editor-6ae6a250.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-named-raster-editor.entry.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-named-raster-editor.entry.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_named_raster_editor: () => (/* reexport safe */ _rfx_cte_named_raster_editor_6ae6a250_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_named_raster_editor_6ae6a250_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-named-raster-editor-6ae6a250.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-named-raster-editor-6ae6a250.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _rfx_args_helper_ab401543_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./rfx-args-helper-ab401543.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-args-helper-ab401543.js");
/* harmony import */ var _resources_27c66f5c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources-27c66f5c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/resources-27c66f5c.js");
/* harmony import */ var _functions_f1f2dffd_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functions-f1f2dffd.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/functions-f1f2dffd.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
























//# sourceMappingURL=rfx-cte-named-raster-editor.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfZGlzdF9lc20tYjdiYmUxLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1HO0FBQ2hFO0FBQ2tEO0FBQ3BCO0FBQ1I7QUFDTTtBQUNKO0FBQ1Q7QUFDWDtBQUNEO0FBQ087QUFDa0I7QUFDOUI7QUFDMEI7QUFDRjtBQUMxQjtBQUNPO0FBQ0s7QUFDQTs7QUFFM0M7QUFDQTtBQUNBLG1CQUFtQixVQUFVO0FBQzdCLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBDQUEwQyw4QkFBOEIsb0NBQW9DLG9DQUFvQyxvQ0FBb0MsdUNBQXVDLHVDQUF1QyxzQ0FBc0MsNENBQTRDLDRDQUE0QyxtQ0FBbUMscUNBQXFDLHFDQUFxQyxxQ0FBcUMsK0JBQStCLCtCQUErQiwrQkFBK0IscUNBQXFDLGtDQUFrQyxpQ0FBaUMsaUNBQWlDLGlDQUFpQyxxQ0FBcUMsOEJBQThCLDBCQUEwQixvQ0FBb0Msd0JBQXdCLG1DQUFtQyxvREFBb0Qsc0NBQXNDLHNDQUFzQyxrQ0FBa0MsaUNBQWlDLDBDQUEwQyxXQUFXOztBQUU3c0M7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQVU7QUFDbEM7QUFDQSxhQUFhO0FBQ2I7QUFDQSx3QkFBd0Isc0RBQVU7QUFDbEM7QUFDQSxhQUFhO0FBQ2I7QUFDQSx3QkFBd0Isc0RBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsVUFBVSxnQkFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EscUJBQXFCLDJEQUFlLDJCQUEyQiwyREFBZTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQWU7QUFDbkMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx3QkFBd0IsUUFBUSxtRUFBMkIsbUJBQW1CLHFEQUFZO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLCtEQUFTO0FBQ2pDO0FBQ0EsaUJBQWlCLDJEQUFlO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQUMsY0FBYyxxREFBQyxvQkFBb0IsMkJBQTJCLG9EQUFVO0FBQ3pGO0FBQ0EsZUFBZSxFQUFFLHFEQUFDLGdCQUFnQixzS0FBc0ssR0FBRyxxREFBQyxlQUFlLHFSQUFxUjtBQUNoZjtBQUNBLDhCQUE4QjtBQUM5Qix3QkFBd0IsT0FBTyxxREFBVTtBQUN6QztBQUNBOztBQUV3Qzs7QUFFeEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwSjZGO0FBQ2hFO0FBQ007QUFDUTtBQUNSO0FBQ0o7QUFDQztBQUNPO0FBQ047QUFDQTtBQUNDO0FBQ2dCO0FBQ1g7QUFDRDtBQUNPO0FBQ2tCO0FBQzlCO0FBQzBCO0FBQ0Y7QUFDMUI7QUFDTztBQUNLO0FBQ0E7O0FBRTNDOzs7Ozs7Ozs7Ozs7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFOEU7O0FBRTlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LWN0ZS1uYW1lZC1yYXN0ZXItZWRpdG9yLTZhZTZhMjUwLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUtbmFtZWQtcmFzdGVyLWVkaXRvci5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGcgYXMgZ2V0QXNzZXRQYXRoLCBoLCBhIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWRhMWI3MTM4LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvbGFuZy5qcyc7XG5pbXBvcnQgeyBiIGFzIGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzRW1wdHlEYXRhSXRlbSB9IGZyb20gJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0IHsgVSBhcyBVSURlZmF1bHRzIH0gZnJvbSAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldEFyZ1JGVCB9IGZyb20gJy4vcmZ4LWFyZ3MtaGVscGVyLWFiNDAxNTQzLmpzJztcbmltcG9ydCB7IEcgYXMgR3JpZENvbHVtbiB9IGZyb20gJy4vaW50ZXJmYWNlcy1kMGM2ODk0NC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9pZGVudGl0eS9JZGVudGl0eU1hbmFnZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS91cmxVdGlscy5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvTGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0ltYWdlcnlMYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9zbWFydE1hcHBpbmcvcmFzdGVyL3JlbmRlcmVycy9zdHJldGNoLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcblxuY29uc3QgY29tcG9uZW50ID0gXCJyZngtY3RlLW5hbWVkLXJhc3Rlci1lZGl0b3JcIjtcbmNvbnN0IEhUTUxDbGFzc2VzID0ge1xuICAgIG5hbWVDb2x1bW46IGAke2NvbXBvbmVudH1fX25hbWUtY29sdW1uYCxcbiAgICBsYXllckNvbHVtbjogYCR7Y29tcG9uZW50fV9fbGF5ZXItY29sdW1uYFxufTtcbmNvbnN0IEhlbHBDbGlja0hhbmRsZXJLZXlzID0ge1xuICAgIHJhc3RlclZhcmlhYmxlc0hlbHBDbGlja0hhbmRsZXI6IFwicmFzdGVyVmFyaWFibGVzSGVscENsaWNrSGFuZGxlclwiXG59O1xuXG5jb25zdCByZnhDdGVOYW1lZFJhc3RlckVkaXRvckNzcyA9IFwiOnJvb3R7LS1jYWxjaXRlLWNvbG9yLWJyYW5kOiMwMDdhYzI7LS1jYWxjaXRlLWNvbG9yLWJyYW5kLWhvdmVyOiMwMDYxOWI7LS1jYWxjaXRlLWNvbG9yLWJyYW5kLXByZXNzOiMwMDQ4NzQ7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1pbmZvOiMwMDYxOWI7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1zdWNjZXNzOiMzNWFjNDY7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy13YXJuaW5nOiNlZGQzMTc7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXI6I2Q4MzAyMDstLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlci1ob3ZlcjojYTgyYjFlOy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyLXByZXNzOiM3YzFkMTM7LS1jYWxjaXRlLWNvbG9yLWJhY2tncm91bmQ6I2Y4ZjhmODstLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xOiNmZmZmZmY7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMjojZjNmM2YzOy0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTM6I2VhZWFlYTstLWNhbGNpdGUtY29sb3ItdGV4dC0xOiMxNTE1MTU7LS1jYWxjaXRlLWNvbG9yLXRleHQtMjojNGE0YTRhOy0tY2FsY2l0ZS1jb2xvci10ZXh0LTM6IzZhNmE2YTstLWNhbGNpdGUtY29sb3ItdGV4dC1pbnZlcnNlOiNmZmZmZmY7LS1jYWxjaXRlLWNvbG9yLXRleHQtbGluazojMDA2MTliOy0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMTojY2FjYWNhOy0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMjojZDRkNGQ0Oy0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMzojZGZkZmRmOy0tY2FsY2l0ZS1jb2xvci1ib3JkZXItaW5wdXQ6Izk0OTQ5NDstLXJmeC1xdWFydGVyLXNwYWNpbmc6MC4yNXJlbTstLXJmeC1oYWxmLXNwYWNpbmc6MC41cmVtOy0tcmZ4LXRocmVlLXF1YXJ0ZXItc3BhY2luZzowLjc1cmVtOy0tcmZ4LWZ1bGwtc3BhY2luZzoxcmVtOy0tcmZ4LWNvbXBvbmVudC1kZWZhdWx0LXdpZHRoOjEwMCU7LS1yZngtdWktYm9yZGVyLWlucHV0OnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTIpOy0tcmZ4LXBvcG92ZXItY29udGVudC1taW4taGVpZ2h0OjMwdmg7LS1yZngtcG9wb3Zlci1jb250ZW50LW1heC1oZWlnaHQ6NjB2aDstLXJmeC1wb3BvdmVyLWNvbnRlbnQtaGVpZ2h0OjQ1dmg7LS1yZngtd2lkZ2V0LWNvbnRlbnQtaGVpZ2h0OjMwdmh9LnJmeC1jdGUtbmFtZWQtcmFzdGVyLWVkaXRvcl9fbmFtZS1jb2x1bW57d2lkdGg6NXJlbX1cIjtcblxuY29uc3QgUkZ4Q3RlTmFtZWRSYXN0ZXJFZGl0b3IgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICAvKipcbiAgICAgICAgICogbGF5b3V0IGZvciB0aGUgdmFyaWFibGVzIGdyaWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JpZExheW91dCA9IHtcbiAgICAgICAgICAgIGlucHV0TmFtZToge1xuICAgICAgICAgICAgICAgIHVpVHlwZTogR3JpZENvbHVtbi50ZXh0SW5wdXQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IEhUTUxDbGFzc2VzLm5hbWVDb2x1bW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3NpZ25tZW50OiB7XG4gICAgICAgICAgICAgICAgdWlUeXBlOiBHcmlkQ29sdW1uLnRleHQsXG4gICAgICAgICAgICAgICAgY29uc3RWYWx1ZTogXCI9XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByYXN0ZXI6IHtcbiAgICAgICAgICAgICAgICB1aVR5cGU6IEdyaWRDb2x1bW4ucmFzdGVyLFxuICAgICAgICAgICAgICAgIGFsbG93U2NhbGFyOiB0cnVlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBIVE1MQ2xhc3Nlcy5sYXllckNvbHVtblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIGV2ZW50IGhhbmRsZXJzIGZvciBoZWxwIGFjdGlvbiBjbGljaywgc3RvcmVkIGluIGNvbm5lY3RlZCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAgKiBmZXRjaGluZyBmdW5jdGlvbiBvbiBlYWNoIHJlbmRlciAoIHRvIGF2b2lkIGNvbW1vbiBiYWQgcHJhY3RpY2UgKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogY2FsbGVkIHRvIHVwZGF0ZSB0aGUgcmFzdGVyIGFyZ3Mgb24gZWFjaCBldmVudCBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXBkYXRlV2lkZ2V0QXJncyA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkZXRhaWw6IHsgZ3JpZE9wdGlvbnMgfSB9ID0gZXZlbnQ7XG4gICAgICAgICAgICBjb25zdCBpbnB1dE5hbWVzID0gW10sIHJhc3RlclZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgZ3JpZE9wdGlvbnMuZm9yRWFjaCgoZ3JpZE9wdGlvbiwgaWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT09IGdyaWRPcHRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBsYXN0IGlzIGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpc0VtcHR5RGF0YUl0ZW0oZ3JpZE9wdGlvbi5pbnB1dE5hbWUpICYmICFpc0VtcHR5RGF0YUl0ZW0oZ3JpZE9wdGlvbi5yYXN0ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyaWRPcHRpb24ucmFzdGVyLm5hbWUgPSBncmlkT3B0aW9uLmlucHV0TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXROYW1lcy5wdXNoKGdyaWRPcHRpb24uaW5wdXROYW1lKTtcbiAgICAgICAgICAgICAgICByYXN0ZXJWYWx1ZXMucHVzaChncmlkT3B0aW9uLnJhc3Rlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0QXJncyA9IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3M7XG4gICAgICAgICAgICBpZiAoaW5wdXRBcmdzLlJhc3RlcnMpIHtcbiAgICAgICAgICAgICAgICAvLyByYXN0ZXJWYWx1ZXMgaXMgYW4gYXJyYXkgb2YgUmFzdGVyIFJGeFZhcmlhYmxlc1xuICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5RGF0YUl0ZW0oaW5wdXRBcmdzLlJhc3RlcnMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0QXJncy5SYXN0ZXJzLnZhbHVlID0geyBlbGVtZW50czogcmFzdGVyVmFsdWVzLCB0eXBlOiBcIkFyZ3VtZW50QXJyYXlcIiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRBcmdzLlJhc3RlcnMudmFsdWUuZWxlbWVudHMgPSByYXN0ZXJWYWx1ZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0QXJncy5JbnB1dE5hbWVzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRBcmdzLklucHV0TmFtZXMudmFsdWUgPSBpbnB1dE5hbWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdyaWRPcHRpb25zID0gW107XG4gICAgICAgIHRoaXMuYWxsb3dTY2FsYXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2lkZ2V0QXJncyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIExpZmVjeWNsZVxuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICAoeyBzdHJpbmdzOiB0aGlzLnN0cmluZ3MgfSA9IGF3YWl0IGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyh0aGlzLmhvc3RFbGVtZW50LCBnZXRBc3NldFBhdGgoYC5gKSkpO1xuICAgICAgICB0aGlzLnJlYWRJbnB1dEFyZ3MoKTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIHJlYWQgdGhlIHZhbHVlIGFuZCBpbml0aWFsaXplIHRoYXQgcmFzdGVyRWxlbWVudHNcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHJlYWRJbnB1dEFyZ3MoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0QXJncyA9IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MsIGlucHV0TmFtZXMgPSBpbnB1dEFyZ3M/LklucHV0TmFtZXM/LnZhbHVlID8/IFtdLCByYXN0ZXJzQXJnID0gaW5wdXRBcmdzPy5SYXN0ZXJzLCByYXN0ZXJFbGVtZW50cyA9IHJhc3RlcnNBcmc/LnZhbHVlPy5lbGVtZW50cyB8fCByYXN0ZXJzQXJnPy52YWx1ZSB8fCBbXTtcbiAgICAgICAgY29uc3QgbWF4TiA9IE1hdGgubWF4KGlucHV0TmFtZXMubGVuZ3RoLCByYXN0ZXJFbGVtZW50cy5sZW5ndGgpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIC8vIGV2ZW4gbm8gb3B0aW9ucyBhcmUgdGhlcmUsIHNob3cgYW4gZW1wdHkgcm93XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNvbnN0IHJhc3RlckVsZW1lbnQgPSByYXN0ZXJFbGVtZW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHJmdCA9IGdldEFyZ1JGVChyYXN0ZXJFbGVtZW50KTtcbiAgICAgICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eURhdGFJdGVtKHJmdCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMud2lkZ2V0QXJncy5nZXRSRlQocmZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ3JpZE9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IGksXG4gICAgICAgICAgICAgICAgaW5wdXROYW1lOiBpbnB1dE5hbWVzW2ldLFxuICAgICAgICAgICAgICAgIHJhc3RlckVsZW1lbnQsXG4gICAgICAgICAgICAgICAgcmFzdGVyOiB2YWx1ZSA/PyByYXN0ZXJFbGVtZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfSB3aGlsZSAoaSA8PSBtYXhOKTtcbiAgICB9XG4gICAgYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgY29uc3QgcmFzdGVyVmFyaWFibGVzSGVscENsaWNrSGFuZGxlciA9IHRoaXMud2lkZ2V0QXJncy5vbkhlbHBBY3Rpb25DbGljayh7XG4gICAgICAgICAgICBoZWFkaW5nOiB0aGlzLnN0cmluZ3MucmFzdGVyVmFyaWFibGVzLFxuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudDogdGhpcy52YXJpYWJsZXNDb250YWluZXIsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LmNhbGN1bGF0b3JfcmFzdGVydmFyaWFibGVzXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMuc2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLnJhc3RlclZhcmlhYmxlc0hlbHBDbGlja0hhbmRsZXIsIHJhc3RlclZhcmlhYmxlc0hlbHBDbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCBudWxsLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGFsaWdubWVudDogXCJzdGFydFwiLCBzY2FsZTogVUlEZWZhdWx0cy5TY2FsZSwgbGF5b3V0OiBcImRlZmF1bHRcIiwgcmVmOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudmFyaWFibGVzQ29udGFpbmVyID0gZTtcbiAgICAgICAgICAgIH0gfSwgaChcInJmeC1sYWJlbFwiLCB7IGxhYmVsOiB0aGlzLnN0cmluZ3MucmFzdGVyVmFyaWFibGVzLCBvblJmeExhYmVsSGVscEFjdGlvbkNsaWNrOiAoKSA9PiB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnM/LmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5yYXN0ZXJWYXJpYWJsZXNIZWxwQ2xpY2tIYW5kbGVyKSgpIH0pLCBoKFwicmZ4LWdyaWRcIiwgeyBpbnB1dExheWVyczogdGhpcy53aWRnZXRBcmdzLmlucHV0TGF5ZXJzLCBncmlkTGF5b3V0OiB0aGlzLmdyaWRMYXlvdXQsIGdyaWRPcHRpb25zOiB0aGlzLmdyaWRPcHRpb25zLCBvblJmeEdyaWRPcHRpb25DaGFuZ2U6IHRoaXMudXBkYXRlV2lkZ2V0QXJncywgaGFzSGVhZGVyOiBmYWxzZSwgaGFzSWRDb2x1bW46IGZhbHNlLCBjYW5BZGQ6IHRydWUsIGNhblJlbW92ZTogdHJ1ZSwgcmZ4QnJvd3NlTGF5ZXJDbGljazogdGhpcy53aWRnZXRBcmdzLm9uUmZ4QnJvd3NlTGF5ZXJDbGljayB9KSkpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1widDluXCJdOyB9XG4gICAgZ2V0IGhvc3RFbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblJGeEN0ZU5hbWVkUmFzdGVyRWRpdG9yLnN0eWxlID0gcmZ4Q3RlTmFtZWRSYXN0ZXJFZGl0b3JDc3M7XG5cbmV4cG9ydCB7IFJGeEN0ZU5hbWVkUmFzdGVyRWRpdG9yIGFzIFIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS1uYW1lZC1yYXN0ZXItZWRpdG9yLTZhZTZhMjUwLmpzLm1hcCIsImV4cG9ydCB7IFIgYXMgcmZ4X2N0ZV9uYW1lZF9yYXN0ZXJfZWRpdG9yIH0gZnJvbSAnLi9yZngtY3RlLW5hbWVkLXJhc3Rlci1lZGl0b3ItNmFlNmEyNTAuanMnO1xuaW1wb3J0ICcuL2luZGV4LWRhMWI3MTM4LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvbGFuZy5qcyc7XG5pbXBvcnQgJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0ICcuL19nZXRUYWctOTZhZjAyOWQuanMnO1xuaW1wb3J0ICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnLi9yZngtYXJncy1oZWxwZXItYWI0MDE1NDMuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy0yN2M2NmY1Yy5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25zLWYxZjJkZmZkLmpzJztcbmltcG9ydCAnLi9pbnRlcmZhY2VzLWQwYzY4OTQ0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVxdWVzdC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLW5hbWVkLXJhc3Rlci1lZGl0b3IuZW50cnkuanMubWFwIiwiY29uc3QgVUlEZWZhdWx0cyA9IHtcbiAgICBTY2FsZTogXCJzXCIsXG4gICAgUG9wb3ZlclRpbWVyOiA2MFxufTtcbmNvbnN0IENhbGNpdGVTY2FsZSA9IHtcbiAgICBzOiBcInNcIixcbiAgICBtOiBcIm1cIlxufTtcbmNvbnN0IENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgPSB7XG4gICAgYWJzb2x1dGU6IFwiYWJzb2x1dGVcIixcbiAgICBmaXhlZDogXCJmaXhlZFwiXG59O1xuXG5leHBvcnQgeyBDYWxjaXRlU2NhbGUgYXMgQywgVUlEZWZhdWx0cyBhcyBVLCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nIGFzIGEgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktdXRpbHMtOTI4YTQwOTYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9