/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a7f161"],{20206:(e,t,i)=>{i.d(t,{a:()=>a,b:()=>r,c:()=>n,d:()=>o});const o=(0,i(70464).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=o.state,n=o.state,r=o.state},40092:(e,t,i)=>{i.d(t,{a:()=>d,s:()=>u});var o=i(30884),a=(i(49306),i(69283),i(20206)),n=i(13337),r=i(8899),s=i(73411),l=i(20164);function c(e,t,i,o){var a,n,r,s;const l=null!==(a=t.latitudeFieldName)&&void 0!==a?a:i.latitudeFieldName,c=null!==(n=t.longitudeFieldName)&&void 0!==n?n:i.longitudeFieldName,d=null!==(r=t.coordinateFieldName)&&void 0!==r?r:i.coordinateFieldName,u=null!==(s=t.coordinateFieldType)&&void 0!==s?s:i.coordinateFieldType;return o[e.name]?o[e.name]:e.name===d?null==u?void 0:u.toLowerCase():e.name===l?"latitude":e.name===c?"longitude":e.locationType||"unknown"}async function d({analyzeArgs:e,configArgs:t,itemArgs:i,initialize:d}){var h,g;const{config:y,lang:v,portal:m,user:f}=t,{itemType:b}=i;if(d&&(0,s.m)(f)){const e=(0,r.b)(null!==(g=null===(h=m.helperServices)||void 0===h?void 0:h.geocode)&&void 0!==g?g:[],f,m.isPortal);if(e&&(a.a.allowGeocode=e.allowGeocode,a.a.isAgoWorldGeocodeServer=e.isAgoWorldGeocodeServer,a.a.isServiceProxyAgoWorldGeocodeServer=e.isServiceProxyAgoWorldGeocodeServer,a.a.isWorldGeocodeServer=e.isWorldGeocodeServer,a.a.geocodeServers=e.geocodeServers,a.a.geocodeServiceUrl=e.geocodeServiceUrl),a.a.geocodeServers){a.a.sourceCountry=(0,r.d)(f.region,m.ipCntryCode);try{a.a.countryCodes=await async function(e,t,i){const o=(0,r.f)(e,i);let a;if(null==o?void 0:o.itemId){const e=`${t}/content/items/${o.itemId}`,i=await(0,l.r)(e),n=i.proxyFilter&&JSON.parse(i.proxyFilter).sourceCountry;n&&(a=n.split(",").map((e=>e.toLowerCase())),a.push("world"))}return Object.keys(r.c).map((e=>({label:r.c[e],value:e}))).filter((({value:e})=>!a||a.includes(e.toLowerCase()))).sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0))}(a.a.geocodeServiceUrl,y.restBaseUrl,a.a.geocodeServers),a.a.standardizedFieldNames=await p(a.a.geocodeServiceUrl,v)}catch(e){return console.error("Geocoder unavailable",e),{error:{code:"unavailableGeocoder"}}}}}const{locationType:w,isWorldGeocodeServer:T,geocodeServiceUrl:S,geocodeServers:C,isServiceProxyAgoWorldGeocodeServer:L,sourceCountry:F,analyzeResults:x,analyzedLocationTypes:k}=a.a,P=`${y.restBaseUrl}content/features/analyze`,{isPortal:A}=m;let z,O=!1;"item"===(null==e?void 0:e.type)&&"append"===e.workflow?(z=n.a[b],O=!0):z="Microsoft Excel"===b?"excel":b.toLowerCase();let _={filetype:z};switch(null==e?void 0:e.type){case"url":_.sourceUrl=e.sourceUrl;break;case"item":_.itemid=e.itemid;break;case"file":_=new FormData,_.append("file",e.file),_.append("filetype",z);break;case"text":_.text=e.text}const E={enableGlobalGeocoding:!0,sourceLocale:v,locationType:w,returnEstimatedRowCount:!0,returnSize:!0};if(A&&S||!A){if((A||!A&&(null==C?void 0:C.length))&&(E.geocodeServiceUrl=encodeURI(S)),x||A){const e="address"===w?"addressTypes":"locationTypes";-1===k.indexOf(e)&&k.push(e),E.locationType=w||"coordinates"}(!m.isPortal&&T||m.isPortal&&L)&&(E.sourceCountryHint=x?"":F.toLowerCase(),E.sourceCountry=x?F.toLowerCase():"");const e=JSON.stringify(E);_ instanceof FormData?_.append("analyzeParameters",e):_.analyzeParameters=e}try{return async function({response:e,analyzeSelectedLayer:t,initialize:i,geocodeServiceUrl:n,lang:s,portal:d,itemType:p}){var h,g,y,v,m,f;const b=a.a,w=d.isPortal,T="Microsoft Excel"===p?null!==(g=null===(h=e.publishParameters.layers)||void 0===h?void 0:h[b.selectedSheet])&&void 0!==g?g:null===(y=e.publishParameters.layers)||void 0===y?void 0:y[0]:e.publishParameters;let S;if(!w&&b.isWorldGeocodeServer||w&&b.isServiceProxyAgoWorldGeocodeServer){const e=(0,o.a)(T.sourceCountry);S=b.sourceCountry||T.sourceCountry||"world",S="wo"===S?"world":S,a.a.isWorldGeocodeServer=e,a.a.sourceCountry=S}b.allowGeocode||"address"!==T.locationType||(a.a.locationType="none"),function(e){var t,i,o,n,r,s;const{selectedSheet:l}=a.a,{publishParameters:d}=e,u=null!==(n=null!==(i=null===(t=d.layers)||void 0===t?void 0:t[l])&&void 0!==i?i:null===(o=d.layers)||void 0===o?void 0:o[0])&&void 0!==n?n:d.layerInfo;if(!u)return e;const p=null!==(s=null!==(r=u.addressFields)&&void 0!==r?r:d.addressFields)&&void 0!==s?s:{},h=Object.keys(p).reduce(((e,t)=>Object.assign(Object.assign({},e),{[p[t]]:t})),{});u.fields=u.fields.map((e=>Object.assign(Object.assign({},e),{locationType:c(e,u,d,h)}))),a.a.selectedFields&&(a.a.selectedFields=Object.keys(a.a.selectedFields).reduce(((e,t)=>{const i=a.a.selectedFields[t];return e[t]=Object.assign(Object.assign({},i),{locationType:c(i,u,d,h)}),e}),{}))}(e);const C=function(e){return function(e,t){var i,o,a,n;const{selectedFields:r,type:s,selectedSheet:l}=t;if(!r)return e;const c=e.publishParameters;let d=null==c?void 0:c.layerInfo;switch(s){case"Microsoft Excel":d=null!==(o=null===(i=null==c?void 0:c.layers)||void 0===i?void 0:i[l])&&void 0!==o?o:null===(a=null==c?void 0:c.layers)||void 0===a?void 0:a[0];break;case"GeoJson":d=null===(n=null==c?void 0:c.layers)||void 0===n?void 0:n[0]}return d.fields=d.fields.reduce(((e,t)=>{const i=r[t.name];return i&&(t.alias=i.alias,e.push(t)),e}),[]),e}(e,a.a)}(e);a.a.analyzeResults=C,(null===(v=null==C?void 0:C.publishParameters)||void 0===v?void 0:v.layers)&&(a.a.excelLayers=null===(m=null==C?void 0:C.publishParameters)||void 0===m?void 0:m.layers);const L=(0,r.a)(e,t);var F;i?a.a.backupLayerFields=JSON.parse(JSON.stringify(L.fields)):T.standardizedFieldNames?a.a.standardizedFieldNames=T.standardizedFieldNames:u({lang:s,geocodeServiceUrl:n,locationType:a.a.locationType}),"address"===a.a.locationType||"address"===L.locationType||"address"===(null===(f=null==e?void 0:e.publishParameters)||void 0===f?void 0:f.locationType)?a.a.geocodeCost=await(F=L.estimatedRecordCount,(0,l.r)(`${(0,l.g)()}portals/self/cost`,{geocodeCount:F})):a.a.geocodeCost=null}({response:await(_ instanceof FormData?(0,l.d)(P,_,{},"post"):(0,l.r)(P,_,{},"post")),initialize:d,analyzeSelectedLayer:O,geocodeServiceUrl:S,lang:v,portal:m,itemType:b}),{}}catch(e){console.error(e);const t=(null==e?void 0:e.message)||e||"";switch(!0){case t.includes("specify data to be analyzed"):return{error:{code:"emptyFile"}};case t.includes("Duplicate field names are not allowed"):return{error:{code:"duplicateFieldNames"}};case t.toLowerCase().includes("timeout"):return{error:{code:"timeout"}}}return{error:{code:"unhandledError"}}}}async function u({lang:e,geocodeServiceUrl:t,locationType:i}){"address"===i&&(a.a.standardizedFieldNames=await p(t,e))}async function p(e,t){return(await(0,l.r)(e,{},{addTokenManually:!1})).addressFields.reduce(((e,i)=>{var o;return"unknown"!==i.name&&(e[i.name]=(null===(o=null==i?void 0:i.localizedNames)||void 0===o?void 0:o[`${t}`])||i.alias||i.name),e}),{})}},13337:(e,t,i)=>{i.d(t,{A:()=>s,N:()=>a,a:()=>r,b:()=>n,c:()=>c,d:()=>l,u:()=>o});const o=["esriFieldTypeOID","esriFieldTypeGlobalID"],a="<None>",n={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage"},r={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},s={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},l=["zip","csv","xls","xlsx","geojson","gpkg","json"],c=["zip","csv","xls","xlsx"]},48303:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_csv_location_fields:()=>h});var o=i(81149),a=i(49853),n=i(51837),r=i(40092),s=i(20206),l=i(65804),c=i(8899),d=i(55234),u=i(73411),p=i(12046);i(70464),i(69283),i(42577),i(30884),i(49306),i(13337),i(20164),i(79210),i(13615),i(74689);const h=class{constructor(e){(0,o.r)(this,e),this.newItemUpdatePage=(0,o.c)(this,"newItemUpdatePage",7),this.workflowComplete=(0,o.c)(this,"workflowComplete",7),this.newItemToggleNavigationEnabled=(0,o.c)(this,"newItemToggleNavigationEnabled",7),this.newItemDisableCloseButtons=(0,o.c)(this,"newItemDisableCloseButtons",7),this.userHasAssignedCredits=!1,this.orgIsRestricted=!1,this.showTotalCredits=!1,this.isAppendWorkflow=!1,this.logCSVLocationFieldsChanges=()=>{const e=a.c.telemetry,t={eventType:"other",pageName:"my content",category:"new item csv location settings",label:this.currentLocationType};"address place names"===this.currentLocationType&&(this.displayEnrichLayerSettings?t.action="GeometryOnly"===this.selectedCandidateFieldsType?"enrich with some fields":"enrich with all fields":t.action="enrich with no fields",t.facetValue="Multiple"===this.selectedLocationFieldSelectionType?"multi":"single line address",t.details=this.initialLocator===s.a.geocodeServiceUrl?"default locator":"locator changed",t.attribute=this.initialRegion===s.a.sourceCountry?"default region":"region changed"),null==e||e.logEvent(t)},this.selectedLocationType="none",this.advancedExpanded=!1,this.selectedCandidateFieldsType="GeometryOnly",this.displayEnrichLayerSettings=!1,this.selectedLocationFieldSelectionType="Single",this.error=void 0,this.i18n=void 0}async handleNext(){var e;if((this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits())return this.error=this.i18n.errors.insufficientCredits,void(null===(e=this.estimate)||void 0===e||e.scrollIntoView());const t=this.validateFields();if(t)this.error=t;else{if(this.error=null,this.isAppendWorkflow&&("add"===s.a.addAppendSelectOption||"upsert"===s.a.addAppendSelectOption)&&"none"===s.a.locationType&&"esriGeometryPoint"===s.a.sourceDataLayer.geometryType)return void(this.error=this.i18n.errors.noLocationTypeForAppend);const e=s.a.analyzeResults,t=(0,c.e)(this.selectedLocationFieldSelectionType,this.isAppendWorkflow);if(s.a.analyzeResults=Object.assign(Object.assign({},e),{publishParameters:t}),this.isAppendWorkflow){const{name:e}=s.a.dataLayer;s.a.dataLayer=t,s.a.dataLayer.name=e}this.logCSVLocationFieldsChanges();let i="itemProperties";this.isAddToMapTerminalPage()?this.workflowComplete.emit({type:s.a.type,url:encodeURI(s.a.url),customParameters:s.a.customParameters,results:{analyzeResults:s.a.analyzeResults,fields:s.a.selectedFields}}):(this.isAppendWorkflow&&(i="add"!==s.a.addAppendSelectOption||s.a.backupLayerFields.some((e=>"esriFieldTypeDate"===e.type))&&!this.isEnterprise?"appendKeyPairSelect":"appendMatchFields"),this.newItemUpdatePage.emit(i))}}hasInsufficientCredits(){return"address"===this.selectedLocationType&&(0,c.i)(s.a.geocodeServiceUrl)&&s.a.geocodeCost&&s.a.geocodeCost.transactionCreditCost>s.a.geocodeCost.availableCredits}showUnrestrictedOrgCreditsNotice(){return!(this.orgIsRestricted||this.userHasAssignedCredits)&&this.hasInsufficientCredits()}isAddToMapTerminalPage(){return"map"===l.u.workflow&&"url"===s.a.newItemMode&&!s.a.enablePublishing}async analyze(){var e;const{file:t,url:i,existingItem:o,id:n,cloudProviderResource:l,type:c}=s.a,{portal:u,user:p,config:h,lang:g}=a.c;return(0,r.a)({analyzeArgs:(o||l||(0,d.a)(null!==(e=null==t?void 0:t.size)&&void 0!==e?e:0))&&n?{type:"item",itemid:n}:t?{type:"file",file:t}:{type:"url",sourceUrl:i},itemArgs:{itemType:c},configArgs:{portal:u,user:p,config:h,lang:g}})}async componentWillLoad(){var e,t,i,o,n,d;const{analyzeResults:h,type:g,selectedSheet:y,standardizedFieldNames:v,enablePublishing:m,cloudProviderResource:f,geocodeServiceUrl:b}=s.a,{portal:w,user:T,config:S,lang:C}=a.c,L=(0,c.a)();this.isAppendWorkflow="append"===l.u.workflow,this.subscriptionInfo=a.c.subscriptionInfo,this.isEnterprise=w.isPortal;const F=this.isAppendWorkflow&&S.self.isPortal,x=4===a.c.api?null===(e=T.sourceJSON)||void 0===e?void 0:e.assignedCredits:T.assignedCredits;this.userHasAssignedCredits=x>0,this.orgIsRestricted="restricted"===(null===(t=this.subscriptionInfo)||void 0===t?void 0:t.state),this.i18n=l.u.i18n.csvLocationFields,this.isAddToMapTerminalPage()&&(l.u.nextText="addToMap");let k=F?["coordinates","none"]:["coordinates","address","none","mgrs","usng"];const P=(0,u.m)(T)&&s.a.geocodeServers&&("map"!==l.u.workflow||m),A=(0,p.i)(a.c.subscriptionInfo);this.showTotalCredits=(0,u.o)(T,w);const{selectedLocationFieldSelectionType:z}=s.a;this.selectedLocationFieldSelectionType=null!=z?z:"Single";const O="map"===l.u.workflow&&!m;this.locationTypes=k.map((e=>({optionTitle:this.i18n.locationTypes[e].title,description:A&&"address"===e?this.i18n.locationTypes.address.descriptionDeveloper:this.i18n.locationTypes[e].description.replace("${type}","googlesheets"===(null==f?void 0:f.cloudFileType)?"Google Sheet":g),value:e,badge:"address"!==e||a.c.portal.isPortal||A?null:{label:this.i18n.consumesCredits,icon:"credits"},icon:"none"===e?"table":"layer-points"}))).filter((({value:e})=>("address"!==e||P)&&("coordinates"===e||!O)));const _=null==h?void 0:h.publishParameters;if(_){const e="Microsoft Excel"===g?null!==(o=null===(i=null==_?void 0:_.layers)||void 0===i?void 0:i[y])&&void 0!==o?o:null===(n=null==_?void 0:_.layers)||void 0===n?void 0:n[0]:null==h?void 0:h.publishParameters;if((e.latitudeFieldName||e.longitudeFieldName)&&(this.selectedLocationType="coordinates",s.a.locationType="coordinates",s.a.coordinateFieldType="LatitudeAndLongitude"),"coordinates"===_.locationType&&_.coordinateFieldType)switch(s.a.locationType="coordinates",_.coordinateFieldType){case"MGRS":this.selectedLocationType="mgrs",s.a.coordinateFieldType="MGRS";break;case"USNG":this.selectedLocationType="usng",s.a.coordinateFieldType="USNG";break;default:this.selectedLocationType="coordinates",s.a.coordinateFieldType="LatitudeAndLongitude"}else"address"===e.locationType&&P&&(this.selectedLocationType="address",s.a.locationType="address");null!==(d=s.a.locationType)&&void 0!==d||(s.a.locationType="none")}if(1===this.locationTypes.length){const e=this.locationTypes[0].value;this.selectedLocationType=e,s.a.locationType="mgrs"===e||"usng"===e?"coordinates":e}P||"address"!==this.selectedLocationType||(this.selectedLocationType="coordinates",s.a.locationType="coordinates"),"address"!==this.selectedLocationType||L.addressFields||(s.a.locationType="address"),v||await(0,r.s)({geocodeServiceUrl:b,locationType:s.a.locationType,lang:C}),F&&(this.selectedLocationType="coordinates",s.a.locationType="coordinates"),this.initialLocator=s.a.geocodeServiceUrl,this.initialRegion=s.a.sourceCountry,this.setLocationTypeTelemetry(this.selectedLocationType)}validateFields(){const{standardizedFieldNames:e,selectedFields:t,backupLayerFields:i}=s.a,o=this.isAppendWorkflow?i:Object.values(t),a=!o.find((({locationType:t})=>{const i=(null==t?void 0:t.toLowerCase())===this.selectedLocationType.toLowerCase(),o=!!(null==e?void 0:e[t]);return i||o}));switch(this.selectedLocationType){case"usng":case"mgrs":if(a)return this.i18n.errors.noFieldSelected;break;case"address":if("Single"===this.selectedLocationFieldSelectionType&&a)return this.i18n.errors.noFieldSelected;if("Multiple"===this.selectedLocationFieldSelectionType&&!o.find((e=>e.locationType&&"unknown"!==e.locationType)))return this.i18n.errors.noFieldSelected;break;case"coordinates":if(o.filter((({locationType:e})=>"latitude"===e||"longitude"===e)).length<2)return this.i18n.errors.coordinate}}async updateLocationType(e,t){if(this.selectedLocationType=e,"none"===e)return s.a.locationType="none",void(this.currentLocationType="none");switch(e){case"mgrs":s.a.coordinateFieldType="MGRS",s.a.locationType="coordinates";break;case"coordinates":s.a.coordinateFieldType="LatitudeAndLongitude",s.a.locationType="coordinates";break;case"usng":s.a.coordinateFieldType="USNG",s.a.locationType="coordinates";break;case"address":s.a.locationType="address"}t&&await this.analyze(),this.setLocationTypeTelemetry(e)}setLocationTypeTelemetry(e){switch(e){case"mgrs":this.currentLocationType="mgrs coordinates";break;case"coordinates":this.currentLocationType="lat lon";break;case"usng":this.currentLocationType="usng coordinates";break;case"address":this.currentLocationType="address place names";break;case"none":this.currentLocationType="none"}}async updateGeocodeServer(e){s.a.geocodeServiceUrl=e,await this.analyze()}async updateRegion(e){s.a.sourceCountry=e,await this.analyze()}handleEnrichLayerSwitchChange(e){const t=e.target.checked;this.displayEnrichLayerSettings=t,this.updateCandidateFields(t?"Minimal":"GeometryOnly")}updateCandidateFields(e){this.selectedCandidateFieldsType=e,s.a.candidateFieldsType=e}renderLocationFields(){const{standardizedFieldNames:e}=s.a,t={address:e,coordinates:{latitude:this.i18n.latitude,longitude:this.i18n.longitude},mgrs:{mgrs:"MGRS"},usng:{usng:"USNG"}}[this.selectedLocationType];if("Single"===this.selectedLocationFieldSelectionType&&"address"===this.selectedLocationType&&t){const e=Object.keys(t)[0];return(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},t[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,t[e])))}return t&&Object.keys(t).map((e=>(0,o.h)("div",{class:"row",role:"row"},(0,o.h)("div",{class:"cell",role:"cell"},t[e]),(0,o.h)("div",{class:"cell",role:"cell"},this.renderFieldSelect(e,t[e])))))}updateFieldLocationType(e,t){(this.isAppendWorkflow?s.a.backupLayerFields:Object.values(s.a.selectedFields)).forEach((i=>{i.name===e?i.locationType=t:i.locationType===t&&(i.locationType="unknown")}))}handleLocationFieldSelectionChange(e){this.selectedLocationFieldSelectionType=e,s.a.selectedLocationFieldSelectionType=e}renderFieldSelect(e,t){const i=this.isAppendWorkflow?s.a.backupLayerFields:s.a.selectedFields,a=Object.keys(i).map((e=>i[e])),n=!a.some((t=>t.locationType===e));return(0,o.h)("calcite-select",{label:t,role:"cell",onCalciteSelectChange:t=>this.updateFieldLocationType(t.currentTarget.selectedOption.value,e)},(0,o.h)("calcite-option",{value:"unknown",selected:n},this.i18n.unknown),a.map((t=>(0,o.h)("calcite-option",{value:t.name,selected:t.locationType===e},t.alias||t.name))))}render(){var e,t,i,r,d;const{geocodeServiceUrl:u,geocodeServers:h,geocodeCost:g,sourceCountry:y,countryCodes:v}=s.a,{config:m}=a.c,f=null!==(t=null===(e=(0,c.a)())||void 0===e?void 0:e.estimatedRecordCount)&&void 0!==t?t:0,{helpMap:b,helpBase:w}=m,T=(0,n.g)(this.el);return(0,o.h)("div",{class:"wrapper"},(0,o.h)("arcgis-select",{class:"label--top",selectedOption:this.selectedLocationType,options:this.locationTypes,label:this.i18n.locationSettings,labelDescription:this.i18n.locationSettingsDescription,onArcgisOptionChange:e=>this.updateLocationType(e.detail,!0)}),"none"!==this.selectedLocationType&&(0,o.h)("div",null,"address"===this.selectedLocationType&&(0,o.h)("div",{class:"advanced"},(0,o.h)("button",{class:"advanced__toggle","aria-expanded":this.advancedExpanded.toString(),"aria-controls":"advanced__content",onClick:()=>this.advancedExpanded=!this.advancedExpanded},(0,o.h)("calcite-icon",{icon:"chevron-up",scale:"s",class:{advanced__icon:!0,[n.C.rtl]:"rtl"===T,"advanced__icon--open":this.advancedExpanded}}),this.i18n.advancedSettings),this.advancedExpanded&&(0,o.h)("div",{class:"advanced__content",id:"advanced__content"},(0,o.h)("div",{class:"two-up"},(0,o.h)("calcite-label",{class:"column"},this.i18n.locator,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateGeocodeServer(e.currentTarget.selectedOption.value)},null==h?void 0:h.map((e=>(0,o.h)("calcite-option",{value:e.url,selected:e.url===u},e.name))))),(0,o.h)("calcite-label",{class:"column"},this.i18n.region,(0,o.h)("calcite-select",{label:"",onCalciteSelectChange:e=>this.updateRegion(e.currentTarget.selectedOption.value)},null==v?void 0:v.map((e=>(0,o.h)("calcite-option",{value:e.value,selected:e.value.toLowerCase()===y.toLowerCase()},this.i18n.countryCodes[e.value.toUpperCase()]||e.label)))))),!a.c.portal.isPortal&&!this.isAppendWorkflow&&(0,o.h)("div",{class:"enrich-layer-container"},(0,o.h)("calcite-label",{layout:"inline-space-between"},(0,o.h)("span",{class:"enrich-title"},this.i18n.enrich,(0,o.h)("arcgis-information",{label:null===(i=l.u.i18n)||void 0===i?void 0:i.moreInfo,placement:"top-start",paddedContent:!0},(0,o.h)("p",{class:"enrich-description"},this.i18n.enrichLayerDescription),(0,o.h)("calcite-link",{target:"_blank",href:`${w}${b[120002541]}`},this.i18n.enrichLayerLink))),(0,o.h)("calcite-switch",{checked:this.displayEnrichLayerSettings,onCalciteSwitchChange:this.handleEnrichLayerSwitchChange.bind(this)})),this.displayEnrichLayerSettings?(0,o.h)("calcite-radio-button-group",{layout:"vertical",name:"enrich-group",onCalciteRadioButtonGroupChange:e=>this.updateCandidateFields(e.target.selectedItem.value)},["Minimal","AllFields"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedCandidateFieldsType===e,value:e}),(0,o.h)("span",{class:"enrich-radio-text"},this.i18n.candidateFieldsTypes[e].description))))):null))),(0,o.h)("h3",{class:"header"},this.i18n.locationFields," ",(0,o.h)("span",{class:"asterisk"},"*")),"address"===this.selectedLocationType?(0,o.h)("calcite-radio-button-group",{name:"location-field-selection-group",layout:"vertical",onCalciteRadioButtonGroupChange:e=>this.handleLocationFieldSelectionChange(e.target.selectedItem.value)},["Single","Multiple"].map((e=>(0,o.h)("calcite-label",{layout:"inline",key:e},(0,o.h)("calcite-radio-button",{checked:this.selectedLocationFieldSelectionType===e,value:e}),this.i18n["Single"===e?"locationFieldSingle":"locationFieldMultiple"])))):null,(0,o.h)("div",{role:"table",class:"table"},(0,o.h)("div",{class:"row row--header",role:"row"},(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.locationType),(0,o.h)("span",{class:"cell cell--header",role:"columnheader","aria-sort":"none"},this.i18n.field)),this.renderLocationFields())),"address"===this.selectedLocationType&&g&&!a.c.portal.isPortal&&(0,c.i)(u)&&(0,o.h)(o.F,null,(0,p.i)(a.c.subscriptionInfo)?(0,o.h)("div",null,(0,o.h)("calcite-notice",{scale:"m",width:"full",open:!0,icon:"information"},(0,o.h)("div",{slot:"message"},this.i18n.recordCount.replace("${num}",`${f}`)))):(0,o.h)("arcgis-credit-estimate",{transactionCreditCost:g.transactionCreditCost,availableCredits:g.availableCredits,showTotal:this.showTotalCredits,class:"credit-estimate",api:a.c.api,ref:e=>this.estimate=e}),this.showUnrestrictedOrgCreditsNotice()&&(0,o.h)("calcite-notice",{class:"notice",kind:"brand",icon:"information",open:!0},(0,o.h)("div",{slot:"title"},this.i18n.unrestrictedOrgCredits.title),(0,o.h)("div",{slot:"message"},this.i18n.unrestrictedOrgCredits.description))),(0,o.h)("arcgis-new-item-alert",{heading:null===(r=this.error)||void 0===r?void 0:r.title,description:null===(d=this.error)||void 0===d?void 0:d.description,active:!!this.error,onAlertDismiss:()=>this.error=null}))}get el(){return(0,o.d)(this)}};h.style=".wrapper{padding-bottom:2rem}.table{margin-bottom:1.5rem}.row{display:flex;align-items:center;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;box-shadow:0px -1px 0px #eaeaea}.row--header{box-shadow:none}.cell{box-sizing:border-box;width:50%;padding:0.5rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1)}.cell--header{font-weight:400}.advanced{margin-top:1rem;margin-bottom:2rem;background-color:var(--calcite-color-foreground-2)}.advanced__toggle{margin:0px;box-sizing:border-box;display:flex;width:100%;cursor:pointer;align-items:center;border-radius:0;border-style:none;padding:1.25rem;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-2);background-color:transparent;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.advanced__toggle:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.advanced__icon{margin-inline-end:1rem;transform:rotate(90deg);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.arcgis--rtl{transform:rotate(-90deg)}.advanced__icon--open{transform:rotate(180deg)}.advanced__content{padding-left:1.25rem;padding-right:1.25rem;padding-top:0.5rem;padding-bottom:0.5rem}.two-up{margin-bottom:0.75rem;display:flex;justify-content:space-between}.column{width:calc(50% - 6px)}.header{margin:0px;margin-bottom:0.5rem;padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.description{margin:0px;margin-bottom:1.5rem;padding:0px;font-size:1rem;color:var(--calcite-color-text-3)}.enrich-layer-container{background-color:var(--calcite-color-foreground-1);border:1px solid var(--calcite-color-border-input);padding:15px 15px 0px 15px}.enrich-switch{display:flex;justify-content:space-between}.enrich-title{display:flex;color:var(--calcite-color-text-1)}.enrich-radio-text{color:var(--calcite-color-text-3)}.radio{margin-bottom:0.75rem}.asterisk{color:var(--calcite-color-status-danger)}.notice{margin-top:0.5rem}.loader-overlay{overflow:hidden}.enrich-description{margin-bottom:0.75rem;margin-top:0px}"},30884:(e,t,i)=>{var o;function a(e){return null!=e}function n(e,t){for(;e;){if(e.nodeName===t.toUpperCase())return!0;e=e.parentElement}return!1}i.d(t,{a:()=>a,i:()=>n,s:()=>o}),function(e){e.SMALL="s",e.MEDIUM="m",e.LARGE="l"}(o||(o={}))},49306:(e,t,i)=>{var o,a,n,r,s,l;i.d(t,{L:()=>l,a:()=>s,f:()=>a,i:()=>o,l:()=>n,s:()=>r}),function(e){e.sourceUrl="sourceUrl",e.title="title",e.caption="caption",e.linkUrl="linkUrl",e.altText="altText"}(o||(o={})),function(e){e.expression="expression/",e.relationship="relationships/",e.raster="Raster."}(a||(a={})),function(e){e.feature="feature",e.cluster="cluster",e.mapNotes="mapNotes"}(n||(n={})),function(e){e.feature="feature",e.mapImage="map-image",e.scene="scene",e.ogcFeature="ogc-feature",e.imagery="imagery",e.wfs="wfs",e.wms="wms",e.csv="csv",e.geojson="geojson",e.stream="stream",e.imageryTile="imagery-tile",e.tile="tile",e.subtype="subtype"}(r||(r={})),function(e){e.integer="integer",e.smallInteger="small-integer",e.bigInteger="big-integer",e.single="single",e.double="double",e.long="long",e.string="string",e.date="date",e.dateOnly="date-only",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e.oid="oid",e.guid="guid",e.globalId="global-id",e.number="number"}(s||(s={})),function(e){e.default="default",e.display="display",e.type="type",e.field="field"}(l||(l={}))},74689:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>n,c:()=>l,d:()=>d,g:()=>u,i:()=>s,u:()=>c});var o=i(79210);function a(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function n(e){var t;return a(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function r(e){var t;return a(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function s(e,t){return e.owner===t.username}function l(e,t){return c(e,t)||"update"===e.itemControl}function c(e,t){return s(e,t)||function(e,t){var i;if(null!=e.isAdmin)return!!e.isAdmin;const o=e.owner,a="admin"===e.itemControl;return!((null===(i=e.portal)||void 0===i?void 0:i.isPortal)&&!s(e,t)&&a&&o.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(o))&&a}(e,t)}const d=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),u=(e,t)=>`${(0,o.a)(t)}item.html?id=${e}`},55234:(e,t,i)=>{i.d(t,{a:()=>l,f:()=>n,i:()=>s,m:()=>r});var o=i(36238),a=i(13615);function n(e,t){let i;i=t?t.map((e=>e.type)):Object.keys(a.a);let o=[];return i.forEach((t=>{var i;(null===(i=a.a[t].fileExt)||void 0===i?void 0:i.indexOf(e))>=0&&o.push(a.a[t])})),o}function r(e){return e?(0,o.b)(e.flatMap((e=>{var t;return null===(t=a.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const s=e=>e/1024/1024>50,l=e=>e/1024/1024>20},51837:(e,t,i)=>{i.d(t,{C:()=>s,a:()=>d,b:()=>u,f:()=>l,g:()=>r,l:()=>n});var o=i(69283),a=i(42577);const n=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","nb"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function r(e){return function(e,t,i){const o=(0,a.c)(e,"[dir]");return o?o.getAttribute("dir"):"ltr"}(e)}const s={rtl:"arcgis--rtl"};async function l(e,t){const{api:i,type:a,places:n}=t||{};if(4===i){const[t]=await(0,o.l)(["esri/intl"]),i=t.convertNumberFormatToIntlOptions({places:n,style:a,digitSeparator:!0});return t.formatNumber(e,Object.assign(Object.assign({},i),{style:a}))}const[r]=await(0,o.l)(["dojo/number"]);return r.format(e,{type:a,places:n,pattern:null==t?void 0:t.pattern})}const c={};function d(e){const t=document.documentElement.lang;return c[t]||(c[t]=new Intl.DateTimeFormat(document.documentElement.lang,{year:"numeric",month:"short",day:"numeric"})),c[t].format(e)}function u(e,t,i){const o=null!=e?e:"en";return 1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o)?t.single.replace("${number}","1"):1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)?t.multiple.replace("${number}",`${i}`):t.unknown.replace("${number}",`${i}`)}},69283:(e,t,i)=>{i.d(t,{a:()=>o,c:()=>n,e:()=>r,g:()=>a,l:()=>s});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var r=n((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",o="next";function a(e){if(e.toLowerCase()===o)return o;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function r(e){return!e||a(e)?function(e){void 0===e&&(e=i);var t=n(e),r=a(e);if(r!==o&&3===r.major){var s=r.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var i=r(e),o=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(i);return o||function(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}(o=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(i),t),o}var l={};function c(e,t,i){var o;i&&(o=function(e,t){var i=function(o){t(o.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}(e,i));var a=function(){t(e),e.removeEventListener("load",a,!1),o&&e.removeEventListener("error",o,!1)};e.addEventListener("load",a,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var i={};[l,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var o=i.version,a=i.url||n(o);return new t.Promise((function(e,t){var n=d();if(n){var r=n.getAttribute("src");r!==a?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(r,")."))):u()?e(n):c(n,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=i.css;l&&s(!0===l?o:l,i.insertCssBefore),c(n=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(a),(function(){n.setAttribute("data-esri-loader","loaded"),e(n)}),t),document.body.appendChild(n)}}))}function h(e){return new t.Promise((function(t,i){var o=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return h(e);var i=d(),o=i&&i.getAttribute("src");return!t.url&&o&&(t.url=o),p(t).then((function(){return h(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const s=async(e,t)=>(await r.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},65804:(e,t,i)=>{i.d(t,{a:()=>o,u:()=>a});const o=(0,i(70464).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),a=o.state}}]);