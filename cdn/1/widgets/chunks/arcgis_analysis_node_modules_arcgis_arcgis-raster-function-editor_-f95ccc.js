"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-f95ccc"],{53248:(e,t,n)=>{n.d(t,{A:()=>l,G:()=>u,J:()=>r,M:()=>s,P:()=>c,U:()=>i,a:()=>o,d:()=>a});const i={IDLE:"idle",VALID:"valid",INVALID:"invalid"},r={RASTER_FUNCTION_TEMPLATE:"RasterFunctionTemplate",RASTER_FUNCTION_VARIABLE:"RasterFunctionVariable",ARGUMENT_ARRAY:"ArgumentArray",RECORD_SET:"RecordSet",ECD_FILE:"ECDFile"},s={MATCH_VARIABLE:"MatchVariable",UNION_DIMENSION:"UnionDimension"},a={name:"Raster",isDataset:!0,isPublic:!1,type:r.RASTER_FUNCTION_VARIABLE},l={RFX_DTEX_COMMON_SELECT:"RFX-DTEX-COMMON-SELECT",RFX_DTE_COMMON_CHECKBOX:"CALCITE-CHECKBOX",RFX_DTE_COMMON_TEXTINPUT:"CALCITE-INPUT-TEXT",RFX_DTE_COMMON_NUMBERINPUT:"CALCITE-INPUT-NUMBER",RFX_DTE_RASTER_INPUT:"RFX-DTE-RASTER-INPUT",RFX_DTE_FEATURE_SELECT:"RFX-DTE-FEATURE-SELECT",RFX_DTEX_RASTER_VARIABLES_LIST:"RFX-DTEX-RASTER-VARIABLES-LIST",RFX_CTE_RANGED_VALUE_EDITOR:"RFX-CTE-RANGED-VALUE-EDITOR",RFX_CTE_GAMMA_EDITOR:"RFX-CTE-GAMMA-EDITOR",RFX_DTE_COLOR_RAMP_SELECTOR:"RFX-DTE-COLOR-RAMP-SELECTOR",RFX_DTE_EXTENT:"RFX-DTE-EXTENT",RFX_DTE_JSON_FILE_UPLOADER:"RFX-DTE-JSON-FILE-UPLOADER",RFX_CTE_FACTOR_FUNCTION_EDITOR:"RFX-CTE-FACTOR-FUNCTION-EDITOR",RFX_CTE_NEIGHBORHOOD_VALUES:"RFX-CTE-NEIGHBORHOOD-VALUES"},o={ANALYSIS:"analysis",EDITOR:"editor"},u={textInput:"text-input",text:"text",raster:"raster-input",number:"number-input",boolean:"check-box",switch:"switch",field:"field-select",color:"color-input",select:"select",icon:"icon"},c={loading:"loading",success:"success",error:"error"}},89920:(e,t,n)=>{n.d(t,{S:()=>o,a:()=>A,b:()=>f,d:()=>h,e:()=>T,f:()=>v,g:()=>d,h:()=>m,i:()=>u,j:()=>c,k:()=>g,l:()=>C,m:()=>y,n:()=>_,p:()=>R,q:()=>S,r:()=>N,s:()=>p,u:()=>E});var i=n(34319),r=n(36676),s=n(77162),a=n(81279),l=n(53248);const o={List:"list",Unit:"linearUnit",Number:"number",Field:"field"};function u(e){const t=!(0,s.i)(e?.isDataset),n=e?.type===s.R;return t&&n}function c(e,t){if((0,s.i)(t))return i.clone(e);const n={};if("object"==typeof e&&null!==e&&!Array.isArray(e)){for(const i in e)e.hasOwnProperty(i)&&t.indexOf(i)<0&&(n[i]=c(e[i],t));return n}return Array.isArray(e)?e.map((e=>c(e,t))):i.clone(e)}function h(e,t){if((0,s.i)(e)||(0,s.i)(t))return;const n=Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()));return n?t[n]:void 0}function g(e,t){if(!e)return"";const n=Object.keys(e);return void 0===t&&1===n.length?n[0]:n.find((e=>e.toLowerCase()===t?.toLowerCase()))??""}async function A(e){const t=e?.function?.type?.toLowerCase()?.replace("function",""),n=e?.arguments,i=r.h.rfxNameSpecialCases,a=r.h.localFunctionOperations,l=await(0,r.g)();switch(t){case"local":const e=n?.Operation?.value,r=a.find((t=>t.key===e));if(!(0,s.i)(r))return r.label;if(l.cellStatisticsTypes.some((t=>t.key===e)))return"CellStatistics";break;case"pythonadapter":{const e=n?.ClassName?.value;return e||null}case"gpadapter":{const e=n?.ToolName?.value?.toLowerCase()?.replace("_sa",""),t=i.find((t=>t.key===e));return t?.value||e||null}default:{const e=i.find((e=>e.key===t));return e?.value||t||null}}return null}function f(e){if(e)return e.type===s.b?e:e.value&&e.value.type===s.b?e.value:void 0}function d({schema:e,rfxTemplate:t}){if((0,s.i)(t?.function?.type))return;const n=t.function.type,i=t?.arguments;let r=(0,a.e)(i);return(!r||!e.hasOwnProperty(r)&&e.hasOwnProperty(n))&&(r=n),e[r]}function m(e){if(!e||!e.value)return!1;const t=(e.value.elements?e.value.elements:e.value)[0];return t&&(t.isDataset||t.type===s.b)}function p(e){if(!e||!e[s.A])return!1;if(e.aliases)return!0;const t=e=>{if(!e)return!1;if(e.isPublic)return!0;if(m(e)){const n=e.value&&e.value.elements?e.value.elements:e.value;if(n&&Array.isArray(n))return n.some((e=>t(e)))}const n=f(e);return!!n&&p(n)},n=e[s.A];return(0,s.a)(n)?t(n):Object.keys(n).some((e=>{const i=n[e];if((0,s.a)(i))return t(i)}))}function E(e){if(!e)return!1;const t=e.dataType===r.d.rasterArray,n=Boolean(e.elementInfos),i=e.dataType===r.d.table;return t&&n||i}function T(e,t){return Array.isArray(e)&&e.some((e=>e.toLowerCase()===t.toLowerCase()))}function C(e){if(!e||!e.value)return!1;const t=e.value.elements?e.value.elements:e.value;return!!Array.isArray(t)&&t.some((function(e){return e&&e.type===s.b}))}function v(e){return e?.forEach((e=>{e.key=e.key.toString()})),e}function R(e,t){return e.forEach((e=>{if("field"===e.type){const n=h(e.argumentName,t);e.argumentName=n.name,e.layerArgument=n}else e.type!==r.a.list&&e.type!==r.a.linearUnit||(e.enumStore=v[e.enum])})),e}function y(e,t){let n;const i=h(e.nElementsArgument,t),r=i?.value,s=e.elementInfos;return void 0!==i&&void 0!==r||1!==s.length?(Array.isArray(s)&&s.some((e=>{const t=e.values;if(Array.isArray(t)&&t.indexOf(r)>-1)return n=e.inputArgs,!0})),n):s[0].inputArgs}function _(e){let t=!1;const n=e[s.A];if((0,s.a)(n))return!0;for(const e in n)if(e!==s.T&&(i=n[e])&&(f(i)||C(i)))return t=!0,t;var i;return t}function S({functionSchema:e,rfxTemplate:t}){if(!t)return;const n=[],r=t.arguments,a=r&&r.type;if(function({functionSchema:e,rfxTemplate:t}){const n=e;let i;if(n&&(i=n.rasterFunctionArguments,1===Object.keys(i).length&&!n.hasArgumentsObject))return!0;const r=t.arguments,s=r&&r.type;return!(!s||s!==l.J.RASTER_FUNCTION_TEMPLATE&&s!==l.J.RASTER_FUNCTION_VARIABLE)||void 0}({functionSchema:e,rfxTemplate:t})){const e=i.clone(r);let t;return t=a===l.J.RASTER_FUNCTION_TEMPLATE||e.isDataset?"Raster":"Rasters",n.push({...e,key:t}),n}return Object.keys(r).forEach((e=>{if(e===l.M.MATCH_VARIABLE||e===l.M.UNION_DIMENSION)return;const t=i.clone(r[e]);(0,s.a)(t)&&n.push({...t,key:e})})),n}function N(e,t){const n=t&&t.value;if(null==n)return;let i;return e.some((e=>{if(e.values&&e.values.indexOf(n)>-1)return i=e.inputArgs,!0})),i}},94358:(e,t,n)=>{n.r(t),n.d(t,{rfx_cte_kernel_selector:()=>f});var i=n(19451),r=n(81279),s=n(64729),a=n(36676),l=n(77162),o=n(89920),u=(n(46574),n(34319),n(46717),n(55139),n(57098),n(78979),n(95876)),c=(n(99248),n(16888),n(95323),n(43278),n(34751)),h=(n(86944),n(83345),n(74656),n(35746));const g="typeHelpClickHandler",A="kernelHelpClickHandler",f=class{constructor(e){(0,i.r)(this,e),this.rfxArgumentChange=(0,i.c)(this,"rfxArgumentChange",7),this.uiElements={kernelArgLabel:void 0,kernelArgContainer:void 0,rowArgLabel:void 0,columnArgLabel:void 0},this.kernelTypesInfo=a.k,this.helpActionClickEventHandlers=new Map,this.userDefinedOptionKey=-1,this.noneOptionKey=255,this.defaults={rowArgDefaultValue:void 0,columnArgDefaultValue:void 0,kernelArgDefaultValue:[]},this.onConvolutionTypeChange=e=>{e.stopPropagation();const t=e.target,n=(0,c.p)(t.value);this.inputArg.value=n,this.value=n;const i=this.kernelTypesInfo[n?.toString()];this.widgetState={columns:i?.columns??this.defaults.columnArgDefaultValue,rows:i?.rows??this.defaults.rowArgDefaultValue,value:i?.value??this.defaults.kernelArgDefaultValue},this.rfxArgumentChange.emit({value:n})},this.value=void 0,this.widgetArgs=void 0,this.store=[],this.widgetState=void 0}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){const t=e.ConvolutionType;this.inputArg=t,t.input=this.hostElement,this.uiElements.rowArgLabel=e.Rows.displayName,this.uiElements.columnArgLabel=e.Columns.displayName,this.uiElements.kernelArgLabel=e.Kernel.displayName}setupInitialState({inputArgs:e,rfxArgs:t,rasterFunctions:n}){const i=n[(0,r.e)(t)],s=i?.rasterFunctionArguments,a=this.inputArg.name;this.value=this.inputArg.value;const u=s?.[a]?.domain;if("list"===u?.type){const e=u.enum;this.store=(0,o.j)(e)}else console.error("Invalid inputArg! Check Schema");this.store?.forEach((e=>{e.key=e.key.toString()})),(0,l.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");const c=s?.[a]?.defaultValue;this.value=this.inputArg.value||c;const g=s?.Rows?.defaultValue,A=s?.Columns?.defaultValue,f=this.kernelTypesInfo[this.value?.toString()]?.value;this.defaults.columnArgDefaultValue=A,this.defaults.rowArgDefaultValue=g;const d=e.Kernel.value??f,m=e.Columns.value??A,p=e.Rows.value??g;this.widgetState=(0,h.c)({columns:m,rows:p,value:d})}setWidgetValue(){this.widgetArgs.inputArgs.ConvolutionType.value=this.value,this.widgetArgs.inputArgs.Columns.value=this.widgetState?.columns,this.widgetArgs.inputArgs.Rows.value=this.widgetState?.rows,this.widgetArgs.inputArgs.Kernel.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_type});this.helpActionClickEventHandlers.set(g,e)}onColumnValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,columns:e})}onRowValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,rows:e})}render(){const e=this.value===this.userDefinedOptionKey,t=this.value===this.noneOptionKey;return(0,i.h)("div",null,(0,i.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,i.h)("rfx-label",{label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),(0,i.h)("rfx-dtex-common-select",{options:this.store,value:String(this.value),onRfxArgumentChange:this.onConvolutionTypeChange})),e?(0,i.h)("div",null,(0,i.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"default"},(0,i.h)("rfx-label",{label:this.uiElements.rowArgLabel,hideHelp:!0}),(0,i.h)("calcite-input-number",{value:this.widgetState.rows?.toString(),onCalciteInputNumberChange:e=>{e.stopPropagation();const t=(0,c.p)(e.target?.value);this.onRowValueChange(t)},scale:s.U.Scale})),(0,i.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"default"},(0,i.h)("rfx-label",{label:this.uiElements.columnArgLabel,hideHelp:!0}),(0,i.h)("calcite-input-number",{value:this.widgetState.columns?.toString(),onCalciteInputNumberChange:e=>{e.stopPropagation();const t=(0,c.p)(e.target?.value);this.onColumnValueChange(t)},scale:s.U.Scale}))):null,t?null:(0,i.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"default",ref:e=>{this.uiElements.kernelArgContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.kernelArgLabel,referenceElement:this.uiElements.kernelArgContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_kernel});this.helpActionClickEventHandlers.set(A,t)}},(0,i.h)("rfx-label",{label:this.uiElements.kernelArgLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(A)()}),(0,i.h)("rfx-simple-matrix",{columns:this.widgetState.columns,rows:this.widgetState.rows,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,u.i)(this.widgetState.value,t)||(this.widgetState={...this.widgetState,value:t})}})))}get hostElement(){return(0,i.a)(this)}};n(48302),n(48363),n(53248),n(32804)},34751:(e,t,n)=>{n.d(t,{a:()=>u,f:()=>o,i:()=>s,p:()=>l,s:()=>a});var i=n(48302),r=n(77162);function s(e){return null!=e&&!1===Number.isNaN(e)&&!0===Number.isFinite(e)}function a(e,t){let n;if(null!==e){const i="string"==typeof e?Number.parseFloat(e):e;s(i)?n=i:s(t)&&(n=t)}return void 0===n?"":`${n}`}function l(e){if(""!==e)return Number.parseFloat(e)}function o(e,t=3){if(!(0,r.i)(e))return Number.parseFloat(e.toFixed(t))}function u(e,t){let n="";if(!(0,r.i)(e)&&!Number.isNaN(e)){const r=(0,i.g)().locale;n=Intl.NumberFormat(r,t).format(Number(e))}return n}},64729:(e,t,n)=>{n.d(t,{C:()=>r,U:()=>i,a:()=>s});const i={Scale:"s",PopoverTimer:60},r={s:"s",m:"m"},s={absolute:"absolute",fixed:"fixed"}}}]);