/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{96868:(e,t,r)=>{r.r(t),r.d(t,{arcgis_user_picker:()=>d});var o=r(81149),i=r(82218),s=r(31500),a=r(36238),n=r(20164),l=r(47415),c=r(49853);r(42577),r(51837),r(69283),r(79210),r(70464);const d=class{constructor(e){(0,o.r)(this,e),this.arcgisUserPickerSelect=(0,o.c)(this,"arcgisUserPickerSelect",7),this.uniqueId=(0,s.g)(),this.scrollToActiveItem=()=>{var e;const t=null===(e=this.list)||void 0===e?void 0:e.querySelector(`li#${this.getActiveDescendantId()}`);if(!t||!this.list)return;const r=this.list.parentElement;(t.offsetTop<r.scrollTop||t.offsetTop+t.offsetHeight>r.offsetTop+r.offsetHeight)&&t.scrollIntoView({behavior:"smooth"})},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.shiftActiveItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.shiftActiveItemIndex(1);break;case"Home":e.preventDefault(),this.activeItemIndex=0,this.scrollToActiveItem();break;case"End":if(!this.open)return;e.preventDefault(),this.activeItemIndex=this.getResultsLength()-1,this.scrollToActiveItem();break;case"Escape":this.reset(),e.preventDefault(),this.waitAndFocusButton();break;case"Enter":const t=this.getActiveUser();t&&(this.selectedUser=t,this.arcgisUserPickerSelect.emit(t),e.preventDefault(),this.reset(),this.waitAndFocusButton())}},this.searchUsers=async()=>{const{portal:e,query:t,search:r,group:o}=this,i=await async function({portal:e,query:t,searchTerm:r,group:o,config:i}){const s=r?`(${r}) `:"",a=`${(0,n.g)(e)}portals/self/users/search`,l=e.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav":"",c=((null==i?void 0:i.systemUsers)||[]).reduce(((e,t)=>`${e} -username: ${t}`),""),d=(null==a?void 0:a.includes("www.arcgis.com"))&&e.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,n.r)(a,Object.assign({num:100,sortField:"relevance"},function(e){return"enterprise"===(null==e?void 0:e.provider)&&!!(null==e?void 0:e.providerGroupName)}(o)?{name:s}:{q:`${s} ${null!=t?t:""} ${l} ${c}`}),d)}({portal:e,query:t,searchTerm:r,group:o});this.searchResults=i,this.loading=!1,this.activeItemIndex=0,this.open=!0},this.inputHandler=(0,a.d)(this.searchUsers,300),this.renderUser=(e,t)=>{const{portal:r,selectedUser:i,activeItemIndex:s}=this,a=this.formatUniqueUserId(e);return(0,o.h)("li",{"aria-selected":(null==i?void 0:i.username)===e.username,key:a,id:a,role:"option",tabindex:"-1",class:{"list-item":!0,"list-item--active":s===t},onClick:()=>{this.selectedUser=e,this.arcgisUserPickerSelect.emit(e),this.reset()}},(0,o.h)("arcgis-user-avatar",{class:"user-avatar",user:e,scale:"m",portal:r,showName:!0,description:e.username}))},this.portal=void 0,this.query="",this.group=void 0,this.config=void 0,this.selectedUser=void 0,this.selection="single",this.status="idle",this.search="",this.activeItemIndex=0,this.searchResults=void 0,this.open=!1,this.loading=!0}async componentWillLoad(){var e;const t=await(0,i.g)(this.el);this.i18n=t[0],this.lang=t[1],null!==(e=this.config)&&void 0!==e||(this.config=null===c.c||void 0===c.c?void 0:c.c.config)}async setFocus(){var e;null===(e=this.input)||void 0===e||e.focus()}reset(){this.search="",this.activeItemIndex=0,this.open=!1,this.loading=!0}getResultsLength(){var e,t;return(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)||0}getActiveUser(){var e,t;return null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t[this.activeItemIndex]}getActiveDescendantId(){const e=this.getActiveUser();return this.formatUniqueUserId(e)}formatUniqueUserId(e){return(null==e?void 0:e.username)?`${e.username.replace(".","")}-${this.uniqueId}`:""}shiftActiveItemIndex(e){const t=this.getResultsLength(),r=(this.activeItemIndex+t+e)%t;this.activeItemIndex=r,this.scrollToActiveItem()}async waitAndFocusButton(){var e;await(0,a.t)(200),null===(e=this.button)||void 0===e||e.focus()}render(){var e;const{i18n:t,portal:r,selectedUser:i,referenceElement:s,uniqueId:n,open:c,loading:d,lang:u,status:h}=this;return(0,o.h)(o.H,null,(0,o.h)("div",{class:"wrapper"},c||!i?(0,o.h)("div",{class:"search-wrapper"},(0,o.h)("calcite-icon",{icon:"search",scale:"s",class:"search"}),(0,o.h)("label",{class:"screen-readers-only",htmlFor:`input-${n}`,id:`label-${n}`},t.selectUser),(0,o.h)("input",{ref:e=>this.input=e,class:"input",id:`input-${n}`,role:"combobox","aria-autocomplete":"none","aria-expanded":"false","aria-controls":`listbox-${n}`,"aria-activedescendant":this.getActiveDescendantId(),onInput:e=>{this.search=e.currentTarget.value,this.loading=!0,this.open=!0,this.inputHandler()},onBlur:async()=>{await(0,a.t)(300),this.open=!1},onFocus:()=>{!this.search&&this.searchResults||this.searchUsers()},onKeyDown:this.keydownHandler,placeholder:this.i18n.searchMembers,type:"text",value:this.search,onClick:e=>e.stopPropagation()}),!!this.search&&(0,o.h)("button",{class:"x","aria-label":this.i18n.clear,onClick:()=>{this.search="",this.searchUsers()},tabIndex:-1},(0,o.h)("calcite-icon",{icon:"x",scale:"m",class:"x--icon"}))):(0,o.h)("button",{class:{edit:!0,invalid:"invalid"===h},onClick:()=>{this.open=!0,this.searchUsers(),setTimeout((()=>{var e;null===(e=this.input)||void 0===e||e.focus()}),200)},"aria-label":i?t.editSelection.replace("${name}",(0,l.g)(i,u)):t.selectUser,ref:e=>this.button=e},i?(0,o.h)(o.F,null,(0,o.h)("arcgis-user-avatar",{class:"user-avatar",user:i,scale:"m",portal:r,showName:!0,description:i.username}),(0,o.h)("calcite-icon",{icon:"pencil",scale:"s"})):(0,o.h)(o.F,null,t.searchMembers,(0,o.h)("calcite-icon",{icon:"chevron-down",scale:"s"}))),(0,o.h)("div",{class:"reference-element",ref:e=>this.referenceElement=e}),(0,o.h)("slot",{name:"input-message"})),(0,o.h)("calcite-popover",{class:"popover",label:t.selectUser,pointerDisabled:!0,referenceElement:s,placement:"bottom-start",open:c&&(d||!!this.getResultsLength()),focusTrapDisabled:!0,offsetDistance:2},(0,o.h)("div",{class:"list-wrapper"},d?(0,o.h)("calcite-loader",{label:"Loading",class:"loader"}):(0,o.h)("ul",{ref:e=>this.list=e,"aria-label":t.members,"aria-multiselectable":"false",class:"list",id:`listbox-${n}`,role:"listbox",tabIndex:-1},null===(e=this.searchResults)||void 0===e?void 0:e.results.map(this.renderUser)))))}get el(){return(0,o.d)(this)}};d.style=":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;overflow:auto;max-height:16rem}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}"},31500:(e,t,r)=>{r.d(t,{g:()=>o});const o=()=>[2,1,1,1,3].map((e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},79759:(e,t,r)=>{r.d(t,{H:()=>o});const o='-type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage" -type:"Indoors Map Configuration" -typekeywords:"SMX"'},47415:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>a,c:()=>u,d:()=>c,e:()=>d,f:()=>n,g:()=>h});var o=r(20164),i=r(79759),s=r(42577);async function a(e,t,r,i){var a,n,l;const c=null!==(l=null!==(a=e.orgId)&&void 0!==a?a:null===(n=e.portal)||void 0===n?void 0:n.id)&&void 0!==l?l:null==r?void 0:r.id;return(0,o.f)((()=>async function(e,t,r,i,a){var n,l;const c=(null===(n=e.portal)||void 0===n?void 0:n.portalHostname)||(null==i?void 0:i.portalHostname)||(null===(l=null==i?void 0:i.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),d=a?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!a)return null;const u=a?{disableIdentityLookup:!0,addTokenManually:!1}:{},h=await(0,o.r)(d,{},u),{urlKey:p,thumbnail:m,customBaseUrl:v}=h,g=`https://${p}.${v}/`,f=m?`${g}sharing/rest/portals/self/resources/${m}`:null;let b,w;try{const e=await(0,o.r)(`${d}/resources/localizedOrgProperties`,{start:1,num:100},u);if(e){const t=e[r]||e.default;b=t.name,w=t.description||e.description}}catch(e){}return{name:b||h.name,description:(0,s.a)(w||h.description),url:`${g}home/`,thumbnail:f}}(e,c,t,r,i)),"verified",c)}async function n(e,t,r){const i=r?"https://www.arcgis.com/sharing/rest/":(0,o.g)(t),s=`${null!=i?i:(0,o.g)(t)}community/users/${e}`,a=(null==s?void 0:s.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>{try{return await(0,o.r)(s,{},a)}catch(t){return{username:e}}}),"user",s)}async function l(e,t,r,o){var i,l;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(i=e.sourceJSON)||void 0===i?void 0:i.contentStatus)){const i=await a(e,r,t,o);if(!i)return n(e.owner,t,o);const{description:c,name:d,thumbnail:u,url:h}=i;return{description:c?(0,s.s)(c):"",fullName:d,username:e.owner,thumbnail:u,id:e.orgId||(null===(l=e.portal)||void 0===l?void 0:l.id),url:h}}return n(e.owner,t,o)}async function c(e,t,r){const i=r?"https://www.arcgis.com/sharing/rest/":(0,o.g)(t),s=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(0,o.r)(`${i}community/groups`,{q:`(owner:"${e}")`,num:100},s)),"userGroups",e)}async function d(e,t,r){const{username:s}=e,a=r?"https://www.arcgis.com/sharing/rest/":(0,o.g)(t),n=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(await(0,o.r)(`${a}search`,{q:`(owner:"${s}") ${i.H}`,num:1},n)).total),"userItemsTotal",s)}function u(e,t,r=!1){if(e.thumbnailUrl)return e.thumbnailUrl;if(!e.thumbnail)return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const i=(0,o.e)(t);return`${(0,o.g)(t)}community/users/${e.username}/info/${e.thumbnail}${i&&!r?`?token=${i}`:""}`}function h(e,t){const{fullName:r,firstName:o,lastName:i,username:s}=e;return r||(o&&i?"ja"===t?`${i} ${o}`:`${o} ${i}`:s)}}}]);