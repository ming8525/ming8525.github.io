/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c87fee.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c87fee"],{43863:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_tile_layer_settings:()=>h});var r=i(81149),a=i(20164),l=i(49853),n=i(12846),s=i(62824),o=i(87953),c=i(20206),u=i(65804),d=i(70217);i(69283),i(79210),i(70464),i(43237),i(78239),i(88780),i(70105),i(18762),i(49288),i(42577),i(30301),i(82102),i(74689),i(13615),i(14192),i(52787),i(25145),i(41487),i(50202);const h=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.publishType="tiles",this.autoCreation=!0,this.basemapUrl="",this.featureLayerInfos=null,this.featureLayerLayers=null,this.serviceInfo=null,this.cacheOnDemandMinScale=d.T,this.calculatedScale={minScale:d.T,maxScale:d.e},this.curLods=[],this.ranges=[{level:0,label:"world"},{level:1,label:"continent"},{level:2,label:"countries"},{level:3,label:"countriesSmall"},{level:4,label:"states"},{level:5,label:"state"},{level:6,label:"counties"},{level:7,label:"county"},{level:8,label:"metropolitan"},{level:9,label:"cities"},{level:10,label:"city"},{level:11,label:"town"},{level:12,label:"neighborhood"},{level:13,label:"streets"},{level:14,label:"street"},{level:15,label:"buildings"},{level:16,label:"building"},{level:17,label:"small"},{level:18,label:"rooms"},{level:19,label:"room"}],this.tileLayerInfo=null,this.handleUrlInputError=e=>{const{error:t}=this.i18n;this.alertInfo={title:"invalidUrl"===e?this.invalidUrlString:t.urlErrorTitle,description:"invalidUrl"===e?void 0:t[e]}},this.getPublishTypeInfo=()=>{const{publishType:e}=this;switch(e){case"tiles":return"mapserver";case"scenes":return"sceneserver";case"features":return"featureserver";case"vectorTiles":return"vectortileserver";case"tiledImagery":case"dynamicImagery":return"imageserver";default:return e}},this.toggleAutoCreation=e=>{this.autoCreation=e.detail},this.handleBasemapChange=e=>{var t;const{tileLayerInfo:i,curLods:r}=this;this.basemapType=e;const a=e=>{e.length===r.length&&e.every(((e,t)=>{const i=r[t];return e.level===i.level&&e.resolution===i.resolution&&e.scale===i.scale&&e.label===i.label}))||(this.curLods=e)},l=null===(t=null==i?void 0:i.info)||void 0===t?void 0:t.lods;"standard"===e?a(d.g):l&&a(l)},this.fetchTileLayerInfo=async e=>{this.isProcessing=!0,this.alertInfo=null,this.tileLayerInfo=null;const{error:t,result:i}=await(0,o.b)(e,!1);return t?this.handleUrlInputError(t.code):i&&(this.tileLayerInfo={url:e,info:i}),this.isProcessing=!1,!t},this.onUrlInputBlur=async()=>{const{tileLayerInfo:e,basemapUrl:t}=this;if(!t)return this.tileLayerInfo=null,void(this.basemapUrl=null);(null==e?void 0:e.url)!==t&&this.fetchTileLayerInfo(t)},this.alertInfo=void 0,this.isProcessing=!1,this.showIncreaseScaleRangeWarning=!1,this.selectedItem=void 0,this.basemapType=void 0}async handleNext(){var e;if("3dTiles"===c.a.tileLayerPublishType)return;const{publishType:t,serviceInfo:i,autoCreation:r,cacheOnDemandMinScale:a,calculatedScale:n,tileLayerInfo:s,selectedItem:u,basemapType:d,basemapUrl:h,inputRef:p,handleUrlInputError:v,fetchTileLayerInfo:f}=this;if("custom"===d){if(!h)return v("invalidUrl"),void p.setFocus();if(!s&&!await f(h))return void p.setFocus()}const{publishContent:m}=(0,o.d)({id:u.id,title:u.title},{publishType:t,cacheOnDemand:"vectorTiles"!==t&&r,cacheOnDemandMinScale:a,tileInfo:null==s?void 0:s.info,scale:Object.assign({},n),layers:null===(e=c.a.tileLayerData)||void 0===e?void 0:e.layers},l.c.portal.isPortal);c.a.tileLayerPublishContent=m,c.a.tileAutoCreation=r,c.a.tileLayerBasemapType=d,c.a.tileLayerBasemapUrl=h,c.a.tileLayerPublishType=t,this.newItemUpdatePage.emit("itemProperties")}async componentWillLoad(){var e,t;if("3dTiles"===c.a.tileLayerPublishType)return;this.fromFeatureLayer=c.a.tileLayerFromFeatureLayer,this.publishType=c.a.tileLayerPublishType,this.i18n=u.u.i18n.tileLayerSettings,this.invalidUrlString=u.u.i18n.url.invalidUrl,this.autoCreation=null===(e=c.a.tileAutoCreation)||void 0===e||e,this.basemapUrl=c.a.tileLayerBasemapUrl,this.basemapType=null!==(t=c.a.tileLayerBasemapType)&&void 0!==t?t:"standard",c.a.tileLayerPublishContent=null;let i=c.a.item;i||(i=Object.assign(Object.assign({},c.a.existingItem),{id:c.a.id,title:c.a.sourceTitle,type:c.a.type,tags:n.i.tags}),c.a.item=i),c.a.type={vectorTiles:"Vector Tile Service",tiles:"Tile Layer",scenes:"Scene Service"}[c.a.tileLayerPublishType],n.i.title=i.title,this.selectedItem=i,(async()=>{var e;if("3dTiles"===c.a.tileLayerPublishType)return;this.isProcessing=!0;const t=i.url;let r=c.a.tileLayerLayers,n=c.a.tileLayerTables,u=c.a.tileLayerServiceInfo;if(!(l.c.portal.isPortal&&c.a.tileLayerFromFeatureLayer||r||n||u)){const e=await(0,s.q)(t,(0,a.g)(l.c.portal),!0);r=e.layers,n=e.tables,u=e.serviceInfo}this.serviceInfo=u,this.featureLayerInfos=[...r||[],...n||[]],this.featureLayerLayers=[...r||[]],await this.handleTileLayerScaleChange({minScale:d.T,maxScale:d.e}),"tiles"===this.publishType&&(0,o.h)(this.featureLayerLayers,null!==(e=l.c.config.tilesOnDemandEnabled)&&void 0!==e&&e),this.isProcessing=!1})()}async handleTileLayerScaleChange(e){var t,i;const{selectedItem:r,featureLayerInfos:a,tileLayerInfo:l,publishType:n}=this;if("tiles"!==n)return;const s=r.url,{cacheOnDemandMinScale:c,calculatedScale:u}=await(0,o.e)(e,null!==(i=null===(t=null==l?void 0:l.info)||void 0===t?void 0:t.lods)&&void 0!==i?i:d.a.lods,a,s);s&&(c&&(this.cacheOnDemandMinScale=c),this.calculatedScale=u)}render(){const{ranges:e,i18n:t,toggleAutoCreation:i,handleBasemapChange:a,onUrlInputBlur:n,isProcessing:s,autoCreation:o,basemapType:c,basemapUrl:u,alertInfo:h,publishType:p,fromFeatureLayer:v}=this;return(0,r.h)(r.H,null,(0,r.h)("arcgis-new-item-loader",{active:s}),(0,r.h)("div",{class:"title"},(0,r.h)("arcgis-new-item-description",{header:t.title,scale:"l"})),"tiles"===p&&(!l.c.portal.isPortal||!v)&&(0,r.h)("div",{class:"section"},(0,r.h)("arcgis-new-item-switch-card",{defaultChecked:o,header:t.autoCreateOption.title,description:t.autoCreateOption.description,onSwitchChange:i})),(0,r.h)("div",{class:"section"},(0,r.h)("p",{class:"section-title"},t.basemapOption),(0,r.h)("calcite-tile-select-group",{layout:"vertical"},d.f.map((e=>{const i="custom"===e?"customBasemap":"onlineBasemapOption";return(0,r.h)("calcite-tile-select",{key:e,checked:e===c,onCalciteTileSelectChange:()=>a(e),description:t[i].description,heading:t[i].title,name:e,"input-enabled":!0,"input-alignment":"start",type:"radio",value:e,width:"full",id:`${e}-input-option`})})))),"custom"===c&&(0,r.h)("div",{class:"section"},(0,r.h)("p",{class:"section-title"},t.customBasemapUrl),(0,r.h)("calcite-input",{scale:"m",disabled:s,value:u,onCalciteInputInput:e=>{this.basemapUrl=e.target.value,this.alertInfo=null},onBlur:n,placeholder:"https://webadaptorhost.domain.com/arcgis/rest/services/service/MapServer",ref:e=>this.inputRef=e})),(0,r.h)("arcgis-new-item-alert",{heading:null==h?void 0:h.title,description:null==h?void 0:h.description,active:!!h,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,r.d)(this)}};h.style=".title{margin-bottom:1.5rem}.section{margin-bottom:2rem}.section-title{font-size:1rem;font-weight:400;margin-bottom:0.25rem;margin-top:0px}.description{margin-bottom:1rem;margin-top:0px;font-size:0.75rem}"},69283:(e,t,i)=>{i.d(t,{a:()=>r,c:()=>l,e:()=>n,g:()=>a,l:()=>s});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var n=l((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",r="next";function a(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function l(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function n(e){return!e||a(e)?function(e){void 0===e&&(e=i);var t=l(e),n=a(e);if(n!==r&&3===n.major){var s=n.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var i=n(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(i);return r||function(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(i),t),r}var o={};function c(e,t,i){var r;i&&(r=function(e,t){var i=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}(e,i));var a=function(){t(e),e.removeEventListener("load",a,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",a,!1)}function u(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function h(e){void 0===e&&(e={});var i={};[o,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}));var r=i.version,a=i.url||l(r);return new t.Promise((function(e,t){var l=u();if(l){var n=l.getAttribute("src");n!==a?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(n,")."))):d()?e(l):c(l,e,t)}else if(d())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var o=i.css;o&&s(!0===o?r:o,i.insertCssBefore),c(l=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(a),(function(){l.setAttribute("data-esri-loader","loaded"),e(l)}),t),document.body.appendChild(l)}}))}function p(e){return new t.Promise((function(t,i){var r=window.require.on("error",i);window.require(e,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];r.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),d())return p(e);var i=u(),r=i&&i.getAttribute("src");return!t.url&&r&&(t.url=r),h(t).then((function(){return p(e)}))},e.getScript=u,e.isLoaded=d,e.loadScript=h,e.setDefaultOptions=function(e){void 0===e&&(e={}),o=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const s=async(e,t)=>(await n.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);