/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-08e915.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-08e915"],{20206:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>o,c:()=>i,d:()=>r});const r=(0,n(70464).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=r.state,i=r.state,o=r.state},88431:(e,t,n)=>{n.r(t),n.d(t,{arcgis_publish_item:()=>u});var r=n(81149),s=n(49853),i=n(20164),o=n(82218),a=n(82102),l=n(50202),c=n(82627);n(70464),n(69283),n(79210),n(42577),n(51837),n(74689),n(12846),n(20206),n(65804),n(13615);const u=class{constructor(e){(0,r.r)(this,e),this.portal=void 0,this.user=void 0,this.api=4,this.scale="m",this.itemId=void 0,this.telemetry=void 0,this.primaryButtonText=void 0,this.firstPage={element:"arcgis-publish-item-pages-item-properties"}}handlePageUpdate(e){this.primaryButtonText=c.p.i18n.next,"arcgis-publish-item-pages-item-properties"===e.detail.element&&(this.primaryButtonText=c.p.i18n.publish)}async componentWillLoad(){const{portal:e,user:t,itemId:n,api:r,scale:u}=this,d=await(0,o.g)(this.el);if(c.p.i18n=Object.assign(Object.assign({},l.w.i18n),d[0]),s.c.portal=e,t){const{error:n,result:r}=await(0,i.f)((()=>(0,i.m)(e,t)),"isPortalBackedBySDS",e.id);n||(s.c.portal.isBackedBySDS=r)}s.c.user=t,s.c.api=r,s.c.scale=u;const{result:p,error:m}=await(0,a.a)(n,e);m?console.warn("No item found, workflow unavailable"):c.p.sourceItem=p}componentDidLoad(){c.p.sourceItem&&this.routeFirstPage(c.p.sourceItem.type)}routeFirstPage(e){const{i18n:t}=c.p;["CSV","Microsoft Excel","GeoJson"].includes(e)?(this.firstPage={element:"arcgis-publish-item-pages-item-properties"},this.primaryButtonText=t.next):(this.firstPage={element:"arcgis-publish-item-pages-item-properties",props:{item:c.p.sourceItem}},this.primaryButtonText=t.publish)}render(){const{i18n:e}=c.p;return(0,r.h)(r.H,null,(0,r.h)("arcgis-workflow",{headerText:e.publishItem,primaryButtonText:this.primaryButtonText,firstPage:this.firstPage,onArcgisWorkflowUpdatePage:this.handlePageUpdate}))}get el(){return(0,r.d)(this)}}},64606:(e,t,n)=>{n.d(t,{a:()=>s,f:()=>i,s:()=>a});var r=n(36238);const s=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",i=e=>{const t=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,r.b)(t(e)):(0,r.b)(e.flatMap((e=>[...t(e)]))):[]},o=async e=>new Promise(((t,n)=>{for(let r=0;r<e.length;r++)e[r].then((n=>{const s=[...e];s.splice(r,1),t({remainingPromises:s,result:n})})).catch(n)}));async function a(e,t){var n,r;const s=[],{getBatchSize:i,onPromiseCompleted:a,onPromiseThrow:l,shouldContinue:c}=null!=t?t:{};let u=[];for(let t=0;t<(null!==(n=null==i?void 0:i())&&void 0!==n?n:1);t++)try{const t=e();t&&u.push(t)}catch(e){null==l||l(e)}let d=null;for(;u.length>0&&(!c||c(d));)try{const{remainingPromises:t,result:n}=await o(u);u=t,d=n,n&&s.push(n),null==a||a(n);const l=null!==(r=null==i?void 0:i())&&void 0!==r?r:1;for(;u.length<l;){const t=e();if(t&&u.push(t),null==t)break}}catch(e){null==l||l(e)}return s}},74689:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>i,c:()=>l,d:()=>u,g:()=>d,i:()=>a,u:()=>c});var r=n(79210);function s(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function i(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function o(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function a(e,t){return e.owner===t.username}function l(e,t){return c(e,t)||"update"===e.itemControl}function c(e,t){return a(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,s="admin"===e.itemControl;return!((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!a(e,t)&&s&&r.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(r))&&s}(e,t)}const u=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),d=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`},12846:(e,t,n)=>{n.d(t,{a:()=>r,i:()=>s});const r=(0,n(70464).c)({title:"",snippet:"",tags:[],categories:[]}),s=r.state},82102:(e,t,n)=>{n.d(t,{a:()=>h,b:()=>j,c:()=>I,d:()=>v,e:()=>y,f:()=>d,g:()=>g,h:()=>p,i:()=>m,j:()=>x,k:()=>f,l:()=>P,m:()=>w,n:()=>$,s:()=>k,u:()=>b});var r=n(20164),s=n(49853),i=n(74689),o=n(12846),a=n(20206),l=n(65804),c=n(64606),u=n(13615);function d({title:e,snippet:t,tags:n}){return{title:e,snippet:t,tags:(0,c.f)(n).join(",")}}const p=(e,t)=>{var n;const{file:r,type:s,extension:i,dataUrl:o,properties:a,typeKeywords:l}=t,c=d(e),p=[...null===(n=u.a[s])||void 0===n?void 0:n.typeKeywords,...l?[l]:[],i].join(", "),m=Object.assign({type:s,extension:i},a?{properties:JSON.stringify(a)}:{}),f=r?{file:r}:{dataUrl:o.includes('httpHeaders={"Authorization"')?o:encodeURI(o)};return Object.assign(Object.assign(Object.assign(Object.assign({},m),f),c),{typeKeywords:p})},m=(e,t)=>{const n=p(e,t),r=!!t.addAsUniqueFile,s=new FormData;return s.append("f","json"),s.append("async","true"),Object.keys(n).forEach((e=>{if(r&&"file"===e){const r=t.fileName;s.append(e,n[e],r)}else s.append(e,n[e])})),s},f=(e,t)=>{const n=(null==t?void 0:t.id)&&!function(e){return["all","recycle"].includes(e.id)||e.id===e.username}(t)?`/${t.id}`:"";return`${e.userContentUrl}${n}/addItem`},g=(e,t)=>`${(0,r.g)(t)}content/items/${e}`,h=async(e,t)=>{try{const n=g(e,t);return{result:await(0,r.r)(n)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},y=async(e,t)=>{const n=new FormData;switch(t.type){case"base64":n.append("data",t.data);break;case"url":n.append("url",t.url);break;case"file":n.append("file",t.file)}return n.append("f","json"),n.append("token",(0,r.e)(s.c.portal)),await(0,r.d)(`${(0,r.g)()}content/users/${s.c.user.username}/items/${e}/updateThumbnail`,n,{},"post")};async function w(e,t){const n=`${s.c.user.userContentUrl}/moveItems`;return await(0,r.r)(n,{items:e,folder:t},{},"post")}async function v(e,{permanentDelete:t=!1}={}){const n=`${s.c.user.userContentUrl}/items/${e}/delete`;return await(0,r.r)(n,{permanentDelete:t},{},"post")}async function b(e,t,n){var i;const o=null!==(i=null!=n?n:s.c.user)&&void 0!==i?i:s.c.portal.user,c=`${"append"===l.u.workflow?a.a.existingItem.itemOwner.userContentUrl:o.userContentUrl}/items/${e}/update`;return(0,r.r)(c,t,{},"post")}const $=(e,t)=>{const n=`${(0,r.g)(t)}content/items/${e}/data`;return(0,r.r)(n)},x=async(e,t)=>{const n=`${s.c.user.userContentUrl}/items/${e}/commit`,i=m(o.i,t);return i.delete("file"),await(0,r.d)(n,i,{},"post")},P=async e=>{const t=`${s.c.user.userContentUrl}/items/${e}/cancel`;return await(0,r.r)(t,{},{},"post")},j=async e=>{const t=f(s.c.user,o.i.folder),n=d(o.i),i=Object.assign({},e);return delete i.initialFolders,delete i.initialTitle,delete i.newItemMode,delete i.serviceInfo,delete i.allowStoredAuth,delete i.isSecured,delete i.checkAuth,delete i.agsType,delete i.developerCredentialsType,delete i.applicationEnvironment,delete i.apiKeyReferrerUrls,delete i.developerCredentialsRedirectUrls,delete i.developerPrivileges,await(0,r.r)(t,Object.assign(Object.assign(Object.assign(Object.assign({},i),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),n),{},"post")};async function k(e,t,n,o,a,l){null!=a||(a=s.c.user),null!=l||(l=s.c.portal);const c=n&&n.id!==a.username?n.id:"root",u=e.replace(`.${o}`,"");if("featurecollection"===o||"Microsoft Excel"===t)return null;const d=[`title: "${u}"`,`type: "${t}"`,`owner: "${a.username}"`,`ownerfolder: "${c}"`],p=await(0,r.r)(`${(0,r.g)(l)}search`,{filter:d.join(" AND "),num:1});return(null==p?void 0:p.total)>0?{num:p.num,itemURLList:p.results.map((e=>(0,i.g)(e.id,s.c.config.baseUrl)))}:null}async function I(e,t){const n=(0,c.a)(e),{user:a,config:l,portal:u}=s.c,{folder:d}=o.i,p=d&&d.id!==a.username?d.id:"root",m=[`owner: "${a.username}"`,`ownerfolder: "${p}"`];t&&m.push(`type: "${t}"`);let f,g=1;for(let e=0;e<10&&!f&&g>-1;e++){const{nextStart:e,results:t}=await(0,r.r)(`${(0,r.g)()}search`,{[u.isPortal?"q":"filter"]:m.join(" AND "),num:100,start:g});f=t.find((e=>e.name===n)),g=e}return f?(0,i.g)(f.id,l.baseUrl):null}},82627:(e,t,n)=>{n.d(t,{p:()=>r});const r=(0,n(70464).c)({sourceItem:null,i18n:null}).state},50202:(e,t,n)=>{n.d(t,{w:()=>r});const r=(0,n(70464).c)({portal:null,user:null,i18n:null,scale:"m",api:4,nextText:null,uploadProgress:0}).state},65804:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>s});const r=(0,n(70464).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),s=r.state}}]);