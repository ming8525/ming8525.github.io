/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff"],{20206:(e,i,t)=>{t.d(i,{a:()=>n,b:()=>s,c:()=>a,d:()=>r});const r=(0,t(70464).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=r.state,a=r.state,s=r.state},95433:(e,i,t)=>{t.d(i,{c:()=>l,g:()=>d});var r=t(20206),n=t(13337),a=t(8899),s=t(13615),o=function(e,i){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&i.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)i.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]])}return t};function l(e,i){var t;const r=(null==e?void 0:e.type)||null,n=(null==i?void 0:i.type)||null;return n&&(n===r||(null===(t={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeDate","esriFieldTypeGUID"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDateOnly:["esriFieldTypeDateOnly"],esriFieldTypeTimeOnly:["esriFieldTypeTimeOnly"],esriFieldTypeTimestampOffset:["esriFieldTypeTimestampOffset"],esriFieldTypeBigInteger:["esriFieldTypeBigInteger"]}[r])||void 0===t?void 0:t.indexOf(n))>-1)}function d(e){var i;const{timezone:t,analyzeResults:l,type:d,fieldMappings:c,dataLayer:u,id:p,uidPair:m,addAppendSelectOption:y,sourceDataLayer:f}=e;let g,h;const{publishParameters:v}=l,T=o(l,["publishParameters"]),F="upsert"===y||"update"===y,b=function(e){return e.filter((e=>e.source!==n.N)).map((({source:e,name:i})=>({source:e,name:i})))}(c),w=function(e){return e.map((e=>e.name))}(b),I={dateFieldsTimeReference:{timeZone:t||"UTC",respectsDaylightSaving:!0}},P={sourceTableName:u.name,fieldMappings:(null==b?void 0:b.length)?JSON.stringify(b):null,upsert:F,skipInserts:"update"===y,skipUpdates:!1,useGlobalIds:F&&"esriFieldTypeGlobalID"===(null==m?void 0:m.type),updateGeometry:!F||"attributeAndGeometry"===r.a.addAppendSelectUpdateTypeOption,appendFields:w.length?JSON.stringify(w):null,appendItemId:p,appendUploadFormat:s.a[r.a.type].appendUploadFormat,rollbackOnFailure:!0},O=o(v,["layers"]);if("CSV"===d)v.layerInfo.dateFieldsTimeReference=I.dateFieldsTimeReference,h=Object.assign(Object.assign(Object.assign({},I),v),T);else if("Microsoft Excel"===d){const e=function(e,i){const t=Object.assign({},e);return t.locationType=i.locationType,"address"===t.locationType?(t.addressFields=i.addressFields,t.sourceCountry=i.sourceCountry):"coordinates"===t.locationType&&(t.coordinateFieldType=i.coordinateFieldType,"LatitudeAndLongitude"===t.coordinateFieldType?(t.latitudeFieldName=i.latitudeFieldName,t.longitudeFieldName=i.longitudeFieldName):t.coordinateFieldName=i.coordinateFieldName),t}((0,a.a)({},!0),O);e.dateFieldsTimeReference=I.dateFieldsTimeReference,O.name=u.name,h=Object.assign(Object.assign(Object.assign(Object.assign({},I),{layers:[e]}),O),T)}else h=Object.assign(Object.assign(Object.assign({},I),v),T);return g=Object.assign(Object.assign({},P),{appendSourceInfo:JSON.stringify(h)}),"add"===y?g.upsertMatchingField=f.objectIdField||(null===(i=f.uniqueField)||void 0===i?void 0:i.name):F&&(null==m?void 0:m.isUniqueIndex)&&(g.upsertMatchingField=null==m?void 0:m.name),g}},13337:(e,i,t)=>{t.d(i,{A:()=>o,N:()=>n,a:()=>s,b:()=>a,c:()=>d,d:()=>l,u:()=>r});const r=["esriFieldTypeOID","esriFieldTypeGlobalID"],n="<None>",a={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage"},s={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},o={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},l=["zip","csv","xls","xlsx","geojson","gpkg","json"],d=["zip","csv","xls","xlsx"]},37197:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_append_key_pair_select:()=>d});var r=t(81149),n=t(20206),a=t(13337),s=t(65804),o=t(95433),l=t(49853);t(70464),t(8899),t(12046),t(74689),t(79210),t(73411),t(20164),t(69283),t(13615);const d=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemPrevPage=(0,r.c)(this,"newItemPrevPage",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.handleTimezoneChange=e=>{this.selectedTimezone=e.detail},this.handleKeyPairChange=e=>{this.selectedKeyPair=e.detail},this.i18n=void 0,this.selectedKeyPair=void 0,this.selectedTimezone=void 0,this.oidFieldSelected=!1,this.error=void 0}handleNext(){if("add"!==n.a.addAppendSelectOption){if(Object.values(this.selectedKeyPair).includes(a.N))return void(this.error={title:s.u.i18n.error,message:this.i18n.noKeyPair});n.a.uidPair=this.selectedKeyPair}n.a.timezone=this.selectedTimezone,this.newItemUpdatePage.emit("appendMatchFields")}async handlePrev(e){var i;(null===(i=n.a.analyzeResults.publishParameters.layers)||void 0===i?void 0:i.length)>1||(e.preventDefault(),n.a.uidPair=null,this.newItemPrevPage.emit())}componentWillLoad(){var e;const{existingItem:i,dateFieldsTimeReference:t,originalFileName:r}=n.a;this.i18n=s.u.i18n.appendKeyValuePair,this.serviceLayer=n.a.sourceDataLayer,this.selectedTimezone=null!==(e=n.a.timezone)&&void 0!==e?e:"UTC",this.timezoneDescription=this.i18n.timezoneDescription.replace("${uploadedFileName}",r).replace("${featureLayerName}",i.title).replace("${featureLayerTimezone}",t.timeZone),this.isEnterprise=l.c.portal.isPortal,this.findKeyPairs()}findKeyPairs(){var e;const i={},t=this.serviceLayer.fields||[],r=this.serviceLayer.indexes||[],s=n.a.backupLayerFields;r.filter((e=>null==e?void 0:e.isUnique)).forEach((e=>{var i;((null===(i=e.fields)||void 0===i?void 0:i.split(","))||[]).forEach((e=>{t.some((i=>i.name.toLowerCase()===e.toLowerCase()&&(i.isUniqueIndex=!0,!0)))}))})),this.serviceUIDFields=t.filter((e=>e.type&&a.u.includes(e.type)||e.isUniqueIndex)).sort(((e,i)=>e.name.localeCompare(i.name))),this.serviceUIDFields.forEach((e=>{const t=[];s.forEach((i=>{(0,o.c)(e,i)&&t.push(i.name)})),i[e.name]={name:e.name,type:e.type,idx:0,isUniqueIndex:null==e?void 0:e.isUniqueIndex,possibleMatches:[a.N,...t],disabled:!0}})),this.finalKeyPairs=Object.assign({"<None>":{name:a.N,type:"None",possibleMatches:[a.N]}},i),this.selectedKeyPair=null!==(e=n.a.uidPair)&&void 0!==e?e:this.finalKeyPairs[a.N],n.a.serviceUIDFields=this.serviceUIDFields}render(){const{error:e,i18n:i,isEnterprise:t,timezoneDescription:a}=this,{addAppendSelectOption:s,backupLayerFields:o}=n.a,{helpBase:d,helpMap:c}=l.c.config,u="add"===s,p=null==o?void 0:o.some((e=>"esriFieldTypeDate"===e.type)),m=`${d}${c[120004711]}`;return(0,r.h)(r.H,null,!u&&(0,r.h)("arcgis-new-item-append-key-value-pair",{class:"key-value-pair",keyPairs:this.finalKeyPairs,onKeyPairChange:this.handleKeyPairChange}),p&&!t&&(0,r.h)("calcite-label",null,(0,r.h)("div",{class:"timezone-header"},i.timezoneHeader),(0,r.h)("div",{class:"timezone-wrapper"},(0,r.h)("arcgis-new-item-timezone-dropdown",{class:"timezone",onTimezoneChange:this.handleTimezoneChange,defaultTimezone:this.selectedTimezone,subTitle:a}))),(0,r.h)("arcgis-new-item-alert",{active:"esriFieldTypeOID"===this.selectedKeyPair.type,kind:"warning",heading:i.learnMoreUIDTitle,link:{href:m,title:i.learnMoreUIDLink}}),(0,r.h)("arcgis-new-item-alert",{heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,kind:"danger",onAlertDismiss:()=>this.error=null}))}get el(){return(0,r.d)(this)}};d.style=".timezone-wrapper{background-color:var(--calcite-color-background);padding-left:1rem}.timezone{margin-bottom:0.75rem;margin-inline-end:2.5rem;display:block}.timezone-header{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}"},74689:(e,i,t)=>{t.d(i,{a:()=>s,b:()=>a,c:()=>l,d:()=>c,g:()=>u,i:()=>o,u:()=>d});var r=t(79210);function n(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function a(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function s(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function o(e,i){return e.owner===i.username}function l(e,i){return d(e,i)||"update"===e.itemControl}function d(e,i){return o(e,i)||function(e,i){var t;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,n="admin"===e.itemControl;return!((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!o(e,i)&&n&&r.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(r))&&n}(e,i)}const c=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),u=(e,i)=>`${(0,r.a)(i)}item.html?id=${e}`},69283:(e,i,t)=>{t.d(i,{a:()=>r,c:()=>a,e:()=>s,g:()=>n,l:()=>o});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,i,t){return e(t={path:i,exports:{},require:function(e,i){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}var s=a((function(e,i){!function(e){var i={Promise:"undefined"!=typeof window?window.Promise:void 0},t="4.24",r="next";function n(e){if(e.toLowerCase()===r)return r;var i=e&&e.match(/^(\d)\.(\d+)/);return i&&{major:parseInt(i[1],10),minor:parseInt(i[2],10)}}function a(e){return void 0===e&&(e=t),"https://js.arcgis.com/".concat(e,"/")}function s(e){return!e||n(e)?function(e){void 0===e&&(e=t);var i=a(e),s=n(e);if(s!==r&&3===s.major){var o=s.minor<=10?"js/":"";return"".concat(i).concat(o,"esri/css/esri.css")}return"".concat(i,"esri/themes/light/main.css")}(e):e}function o(e,i){var t=s(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return r||function(e,i){if(i){var t=document.querySelector(i);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(r=function(e){var i=document.createElement("link");return i.rel="stylesheet",i.href=e,i}(t),i),r}var l={};function d(e,i,t){var r;t&&(r=function(e,i){var t=function(r){i(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var n=function(){i(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",n,!1)}function c(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var t={};[l,e].forEach((function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}));var r=t.version,n=t.url||a(r);return new i.Promise((function(e,i){var a=c();if(a){var s=a.getAttribute("src");s!==n?i(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):u()?e(a):d(a,e,i)}else if(u())i(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=t.css;l&&o(!0===l?r:l,t.insertCssBefore),d(a=function(e){var i=document.createElement("script");return i.type="text/javascript",i.src=e,i.setAttribute("data-esri-loader","loading"),i}(n),(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),i),document.body.appendChild(a)}}))}function m(e){return new i.Promise((function(i,t){var r=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.remove(),i(e)}))}))}e.utils=i,e.loadModules=function(e,i){if(void 0===i&&(i={}),u())return m(e);var t=c(),r=t&&t.getAttribute("src");return!i.url&&r&&(i.url=r),p(i).then((function(){return m(e)}))},e.getScript=c,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=o,Object.defineProperty(e,"__esModule",{value:!0})}(i)}));const o=async(e,i)=>(await s.loadModules(e,i)).map((e=>e.__esModule&&e.default?e.default:e))},65804:(e,i,t)=>{t.d(i,{a:()=>r,u:()=>n});const r=(0,t(70464).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),n=r.state}}]);