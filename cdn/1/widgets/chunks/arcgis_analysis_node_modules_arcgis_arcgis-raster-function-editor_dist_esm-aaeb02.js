"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-aaeb02"],{45265:(e,t,i)=>{i.r(t),i.d(t,{rfx_cte_dimensionless_editor:()=>o});var n=i(19451),r=(i(34319),i(77162)),s=i(64729),a=(i(46574),i(46717),i(55139),i(57098),i(78979),i(83345),i(99248),i(16888),i(95323),i(43278),i(86944),i(74656),i(35746));const l="inputArgHelpClickHandler",o=class{constructor(e){(0,n.r)(this,e),this.rfxArgumentChange=(0,n.c)(this,"rfxArgumentChange",7),this.showDimensionLessCheckbox=!0,this.helpActionClickEventHandlers=new Map,this.evaluateFilterTriggerArg=async e=>{const t=await this.isMultidimensionalDefinitionAppliedSingleSlice(e);this.mdimDefLeadsToSingleSlice=void 0,this.mdimDefLeadsToSingleSlice=t},this.evaluateRasterTriggerArg=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,i=await t.getSelectedLayer();if(i){const e=this.checkIfRasterIsSingleSlice(i);this.isRasterSingleSlice=e}else this.mdimDefLeadsToSingleSlice=!1},this.isRasterSingleSlice=!1,this.mdimDefLeadsToSingleSlice=!1,this.widgetArgs=void 0}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentWillRender(){const e=this.isRasterSingleSlice||this.mdimDefLeadsToSingleSlice,t=this.widgetArgs.triggerArgs.Raster?.input,i=!1===Boolean(t?.value)||e;this.showDimensionLessCheckbox=i}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach((t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement}));const i=t.Raster;i?.input?.addEventListener("rfxArgumentChange",(()=>{this.evaluateRasterTriggerArg()}));const n=t.Filter;n?.input?.addEventListener("rfxArgumentChange",(({detail:{value:e}})=>{this.evaluateFilterTriggerArg(e)}))}async setupInitialState({triggerArgs:e}){const t=e.Raster?.input;if(!t||!t.value)return this.isRasterSingleSlice=!1,void(this.mdimDefLeadsToSingleSlice=!1);await this.evaluateRasterTriggerArg();const i=e.Filter?.input,n=i.value||e.Filter.value;i&&n?this.evaluateFilterTriggerArg(n):this.mdimDefLeadsToSingleSlice=!1}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(l,e)}checkIfRasterIsSingleSlice(e){const t=e.multidimensionalInfo,i=t&&t.variables;return!(!t||!i||1!==i.length)&&i[0].dimensions.every((e=>{const t=e&&e.values;return t&&1===t.length}))}async isMultidimensionalDefinitionAppliedSingleSlice(e){"string"==typeof e&&(e=JSON.parse(e));const t=this.widgetArgs.triggerArgs.Raster?.input;if(!t.value)return!1;const i=await t.getSelectedLayer();if((0,r.i)(i))return;const n="imagery-tile"===i.type?i.rasterInfo.multidimensionalInfo:i.multidimensionalInfo;return(0,a.m)(e,(0,a.c)(n))}render(){return(0,n.h)("div",null,this.showDimensionLessCheckbox?(0,n.h)("calcite-label",{alignment:"start",scale:s.U.Scale,layout:"inline-space-between",ref:e=>{this.widgetContainer=e}},(0,n.h)("calcite-checkbox",{checked:this.inputArg.value,onCalciteCheckboxChange:e=>{const t=e.target.checked;this.inputArg.value=t}}),(0,n.h)("rfx-label",{label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()})):null)}get hostElement(){return(0,n.a)(this)}};o.style="",i(48363),i(32804)},77162:(e,t,i)=>{i.d(t,{A:()=>g,F:()=>u,R:()=>c,T:()=>o,a:()=>m,b:()=>l,c:()=>h,d:()=>d,e:()=>p,g:()=>f,h:()=>y,i:()=>b,l:()=>S,m:()=>v});var n=i(48363),r="[object Map]",s="[object Set]",a=Object.prototype.hasOwnProperty;const l="RasterFunctionTemplate",o="type",c="RasterFunctionVariable",g="arguments",u="function";function h(e){return!!e&&null!=e._object_ref_id}function d(e){return""!==(e=String(e).trim())&&/^[+-]?(\d+)?(\.\d+)?$/.test(e)}function p(e){return e=String(e).trim(),["true","false"].indexOf(e)>=0}function f(e){return e.type&&e.type.toLowerCase().indexOf("recordset")>=0}function m(e){if(!e)return!1;const t=e.type;return[l,c].indexOf(t)>=0||!(!(i=e)||!(i.type&&i.type.toLowerCase().indexOf("colorramp")>=0||i.value&&i.value.type&&i.value.type.toLowerCase().indexOf("colorramp")>=0))||f(e);var i}function y(e){return"feature"===e.type}function A(e){return"imagery-tile"===e.type&&e.sourceJSON.capabilities.toLowerCase().indexOf("tilesonly")<0}function S(e){return"imagery"===e.type||A(e)}function v(e){return"imagery-tile"===e.type&&!A(e)}function b(e){return null==e||"string"==typeof e&&""===e||(0,n.h)(e)&&function(e){if(null==e)return!0;if((0,n.i)(e)&&((0,n.a)(e)||"string"==typeof e||"function"==typeof e.splice||(0,n.b)(e)||(0,n.c)(e)||(0,n.d)(e)))return!e.length;var t=(0,n.g)(e);if(t==r||t==s)return!e.size;if((0,n.e)(e))return!(0,n.f)(e).length;for(var i in e)if(a.call(e,i))return!1;return!0}(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===(0,n.a)(e)&&function(e){let t=!0;if("object"==typeof e&&!1===(0,n.a)(e))for(const i in e){const n=e?.[i];if(!0===e.hasOwnProperty(i)&&null!=n&&""!==n){t=!1;break}}return t}(e)}},64729:(e,t,i)=>{i.d(t,{C:()=>r,U:()=>n,a:()=>s});const n={Scale:"s",PopoverTimer:60},r={s:"s",m:"m"},s={absolute:"absolute",fixed:"fixed"}}}]);