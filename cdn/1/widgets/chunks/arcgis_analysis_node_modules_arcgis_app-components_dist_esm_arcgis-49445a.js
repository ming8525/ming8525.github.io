"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-49445a"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-layers-and-tables-summary.entry.js":
/*!***********************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-layers-and-tables-summary.entry.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_layers_and_tables_summary: () => (/* binding */ ArcgisLayersAndTablesSummary)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale-050b6db9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js");
/* harmony import */ var _telemetry_49d4aa88_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./telemetry-49d4aa88.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/telemetry-49d4aa88.js");
/* harmony import */ var _type_to_icon_7546439f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-to-icon-7546439f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js");
/* harmony import */ var _utils_aa26c49f_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils-aa26c49f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */











const arcgisLayersAndTablesSummaryCss = ":host{max-width:100%;width:380px}.bg{background-color:var(--calcite-color-background)}.layers{white-space:normal;background-color:var(--calcite-color-background);padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem}.field-aliases{padding-top:0.5rem;padding-bottom:0.5rem;padding-inline-start:1.75rem}.field-aliases-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:-8px}.field-aliases-title{margin:0px;flex:1 1 0%;padding-left:0px;padding-right:0px;padding-top:0.5rem;padding-bottom:0.5rem;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-2);text-decoration-line:underline}.field-aliases-list{margin:0px;list-style-type:none;overflow:auto;padding:0px;max-height:200px}.field-alias{margin:0px;display:flex;padding-left:0px;padding-right:0px;padding-top:0.5rem;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-2)}.icon{padding-inline-end:0.5rem}.post{display:flex;justify-content:flex-end;padding-left:0.5rem;padding-right:0.5rem;padding-bottom:0.75rem;font-size:0.875rem}.page-number{display:inline-block;flex:1 1 0%;color:var(--calcite-color-text-2)}.pagination{display:flex;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);padding-top:0.75rem;padding-bottom:1rem;border-top:1px solid var(--calcite-color-border-1)}.notice{padding-top:1rem;padding-bottom:1rem}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.no-layers{padding:0.75rem 1rem 0 1rem;color:var(--calcite-color-text-2)}";

const ArcgisLayersAndTablesSummary = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.layersAndTablesFocusEnd = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "layersAndTablesFocusEnd", 7);
        this.expanded = {};
        this.handleTabChage = ({ detail }) => {
            var _a;
            this.activeTab = detail.tab;
            (_a = this.telemetry) === null || _a === void 0 ? void 0 : _a.logEvent({
                category: "preview popup",
                action: "switch tab",
                label: detail.tab ? "matched" : "all",
                pageName: (0,_telemetry_49d4aa88_js__WEBPACK_IMPORTED_MODULE_3__.g)(),
                pageUrl: window.location.href
            });
        };
        this.renderLayer = (layer, matched) => {
            const { i18n, telemetry } = this;
            const { icon, type } = (0,_utils_aa26c49f_js__WEBPACK_IMPORTED_MODULE_5__.g)({ geometry: layer.geometryType, type: layer.type });
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion-item", { heading: layer.title, description: i18n.layerTypes[type], iconStart: icon, class: "layer", onClick: (e) => {
                    if (e.currentTarget.expanded &&
                        !this.expanded[layer.id]) {
                        telemetry === null || telemetry === void 0 ? void 0 : telemetry.logEvent({
                            category: "preview popup",
                            action: "expand layer",
                            label: matched ? "matched" : "all",
                            pageName: (0,_telemetry_49d4aa88_js__WEBPACK_IMPORTED_MODULE_3__.g)(),
                            pageUrl: window.location.href
                        });
                        this.expanded[layer.id] = true;
                    }
                } }, this.renderAliases(layer, matched)));
        };
        this.user = undefined;
        this.item = undefined;
        this.portal = undefined;
        this.layers = [];
        this.showMatched = undefined;
        this.error = undefined;
        this.loading = undefined;
        this.telemetry = undefined;
        this.currentStart = 1;
        this.activeTab = 1;
    }
    async componentWillLoad() {
        const locale = await (0,_locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.el);
        this.i18n = locale[0];
    }
    closeAccordion() {
        this.el.shadowRoot
            .querySelectorAll(".layer")
            .forEach((item) => {
            item.expanded = false;
        });
    }
    checkAlias(alias) {
        const blacklist = [
            // exact
            /^fnode_$/i,
            /^tnode_$/i,
            /^lpoly_$/i,
            /^rpoly_$/i,
            /^poly_$/i,
            /^subclass$/i,
            /^subclass_$/i,
            /^rings_ok$/i,
            /^rings_nok$/i,
            // partial
            /shape/i,
            /perimeter/i,
            /objectid/i,
            // ending
            /_i$/i
        ];
        return !blacklist.find((re) => re.test(alias));
    }
    renderAliases(layer, matched) {
        var _a;
        const { config, user } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        const mapViewerUrl = config.newMapViewerUrl;
        const oldMapViewerUrl = `${config.baseUrl}webmap/viewer.html`;
        const sceneViewerUrl = `${config.baseUrl}webscene/viewer.html`;
        const oldViewer = (user === null || user === void 0 ? void 0 : user.defaultMapViewer) === "classic";
        const { i18n, loading, checkAlias, telemetry } = this;
        const { id } = this.item;
        const fields = (_a = layer.fields) === null || _a === void 0 ? void 0 : _a.filter((field) => checkAlias(field.alias || field.name));
        return loading ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { scale: "s", label: i18n.loading })) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "field-aliases" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "field-aliases-header" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("h5", { class: "field-aliases-title" }, i18n.fields), this.item.type === "Feature Service" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown", { placement: "bottom-end", widthScale: "m", type: "click", class: "field-aliases-dropdown", onCalciteDropdownOpen: () => {
                telemetry === null || telemetry === void 0 ? void 0 : telemetry.logEvent({
                    category: "preview popup",
                    action: "open actions",
                    label: matched ? "matched" : "all",
                    pageName: (0,_telemetry_49d4aa88_js__WEBPACK_IMPORTED_MODULE_3__.g)(),
                    pageUrl: window.location.href
                });
            } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { slot: "trigger", scale: "s", label: "layer actions", appearance: "transparent", icon: "ellipsis", text: "" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-group", { selectionMode: "single" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { href: `${config.baseUrl}item.html?id=${id}&sublayer=${layer.id}`, target: "_blank" }, i18n.viewDetails), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { href: `${mapViewerUrl}?layers=${id}&layerId=${layer.id}`, target: "_blank" }, i18n.openInMapViewer), oldViewer && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { href: `${oldMapViewerUrl}?useExisting=1&layers=${id}&layerId=${layer.id}`, target: "_blank" }, i18n.openInMapViewerClassic), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { href: `${oldMapViewerUrl}?layers=${id}&layerId=${layer.id}`, target: "_blank" }, i18n.addToNewMap))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-dropdown-item", { href: `${sceneViewerUrl}?layers=${id}&layerId=${layer.id}`, target: "_blank" }, i18n.addToSceneViewer))))), (fields === null || fields === void 0 ? void 0 : fields.length) > 0 ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("ul", { class: "field-aliases-list" }, fields.map((field) => ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: "field-alias" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: _type_to_icon_7546439f_js__WEBPACK_IMPORTED_MODULE_4__.f[field.type] || "string", scale: "s", class: "icon" }), field.alias || field.name))))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "field-alias" }, i18n.noAliasFound))));
    }
    renderPageNumberText() {
        const start = this.currentStart;
        const total = this.layers.length;
        const end = Math.min(start + 5, total);
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: "page-number" }, this.i18n.paginationRange
            .replace("${start}", `${start}`)
            .replace("${end}", `${end}`)
            .replace("${total}", `${total}`)));
    }
    render() {
        var _a;
        const { i18n, renderLayer, error, handleTabChage, item, activeTab } = this;
        const sublayers = this.layers || [];
        const matched = (this.layers || []).filter((layer) => layer.matched);
        const layers = sublayers.slice(this.currentStart - 1, this.currentStart + 5);
        const showMatched = this.showMatched && (matched === null || matched === void 0 ? void 0 : matched.length) > 0;
        const showPagination = ((_a = (activeTab && showMatched ? matched : sublayers)) === null || _a === void 0 ? void 0 : _a.length) > 6;
        if (error) {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "layers" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-notice", { icon: true, open: true, scale: "s", width: "full", kind: "warning", class: "notice" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "title" }, error.title), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "message" }, error.message)))));
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "bg" }, !sublayers || (sublayers.length === 0 && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "no-layers" }, this.i18n.noLayers)), showMatched ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tabs", { layout: "center" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tab-nav", { slot: "title-group", onCalciteTabChange: handleTabChage }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tab-title", { selected: activeTab === 0 }, i18n.all.replace("${number}", `${sublayers.length}`)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tab-title", { selected: activeTab === 1 }, i18n.matched.replace("${number}", `${matched.length}`))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tab", { class: "layers", selected: activeTab === 0 }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { selectionMode: "single", scale: "m", iconPosition: "end", iconType: "chevron" }, layers.map((layer) => renderLayer(layer)))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tab", { class: "layers", selected: activeTab === 1 }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { selectionMode: "single", scale: "m", iconPosition: "end", iconType: "chevron" }, matched.map((layer) => renderLayer(layer, true)))))) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "layers" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { selectionMode: "single", scale: "m", iconPosition: "end", iconType: "chevron" }, layers.map((layer) => renderLayer(layer))))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "post" }, showPagination && this.renderPageNumberText(), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { href: `item.html?id=${item.id}`, class: "details-link", target: "_blank", rel: "noopener noreferrer", onClick: () => {
                var _a;
                (_a = this.telemetry) === null || _a === void 0 ? void 0 : _a.logEvent({
                    category: "preview popup",
                    action: "view item details",
                    pageName: (0,_telemetry_49d4aa88_js__WEBPACK_IMPORTED_MODULE_3__.g)(),
                    pageUrl: window.location.href
                });
            } }, i18n.viewItemDetails)), showPagination && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-pagination", { scale: "m", totalItems: sublayers.length, pageSize: 6, startItem: this.currentStart, onCalcitePaginationChange: (e) => {
                this.currentStart = e.target.startItem;
                this.closeAccordion();
            } }))))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisLayersAndTablesSummary.style = arcgisLayersAndTablesSummaryCss;



//# sourceMappingURL=arcgis-layers-and-tables-summary.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ configState),
/* harmony export */   o: () => (/* binding */ onConfigChange)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const configStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    portal: null,
    user: null,
    api: 4,
    scale: "m"
});
const configState = configStore.state;
const onConfigChange = configStore.onChange;



//# sourceMappingURL=config-75adf962.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createStore)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const appendToMap = (map, propName, value) => {
    const items = map.get(propName);
    if (!items) {
        map.set(propName, [value]);
    }
    else if (!items.includes(value)) {
        items.push(value);
    }
};
const debounce = (fn, ms) => {
    let timeoutId;
    return (...args) => {
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => {
            timeoutId = 0;
            fn(...args);
        }, ms);
    };
};

/**
 * Check if a possible element isConnected.
 * The property might not be there, so we check for it.
 *
 * We want it to return true if isConnected is not a property,
 * otherwise we would remove these elements and would not update.
 *
 * Better leak in Edge than to be useless.
 */
const isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;
const cleanupElements = debounce((map) => {
    for (let key of map.keys()) {
        map.set(key, map.get(key).filter(isConnected));
    }
}, 2000);
const stencilSubscription = () => {
    if (typeof _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.g !== 'function') {
        // If we are not in a stencil project, we do nothing.
        // This function is not really exported by @stencil/core.
        return {};
    }
    const elmsToUpdate = new Map();
    return {
        dispose: () => elmsToUpdate.clear(),
        get: (propName) => {
            const elm = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.g)();
            if (elm) {
                appendToMap(elmsToUpdate, propName, elm);
            }
        },
        set: (propName) => {
            const elements = elmsToUpdate.get(propName);
            if (elements) {
                elmsToUpdate.set(propName, elements.filter(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.f));
            }
            cleanupElements(elmsToUpdate);
        },
        reset: () => {
            elmsToUpdate.forEach((elms) => elms.forEach(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.f));
            cleanupElements(elmsToUpdate);
        },
    };
};

const unwrap = (val) => (typeof val === 'function' ? val() : val);
const createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {
    const unwrappedState = unwrap(defaultState);
    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));
    const handlers = {
        dispose: [],
        get: [],
        set: [],
        reset: [],
    };
    const reset = () => {
        var _a;
        // When resetting the state, the default state may be a function - unwrap it to invoke it.
        // otherwise, the state won't be properly reset
        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));
        handlers.reset.forEach((cb) => cb());
    };
    const dispose = () => {
        // Call first dispose as resetting the state would
        // cause less updates ;)
        handlers.dispose.forEach((cb) => cb());
        reset();
    };
    const get = (propName) => {
        handlers.get.forEach((cb) => cb(propName));
        return states.get(propName);
    };
    const set = (propName, value) => {
        const oldValue = states.get(propName);
        if (shouldUpdate(value, oldValue, propName)) {
            states.set(propName, value);
            handlers.set.forEach((cb) => cb(propName, value, oldValue));
        }
    };
    const state = (typeof Proxy === 'undefined'
        ? {}
        : new Proxy(unwrappedState, {
            get(_, propName) {
                return get(propName);
            },
            ownKeys(_) {
                return Array.from(states.keys());
            },
            getOwnPropertyDescriptor() {
                return {
                    enumerable: true,
                    configurable: true,
                };
            },
            has(_, propName) {
                return states.has(propName);
            },
            set(_, propName, value) {
                set(propName, value);
                return true;
            },
        }));
    const on = (eventName, callback) => {
        handlers[eventName].push(callback);
        return () => {
            removeFromArray(handlers[eventName], callback);
        };
    };
    const onChange = (propName, cb) => {
        const unSet = on('set', (key, newValue) => {
            if (key === propName) {
                cb(newValue);
            }
        });
        // We need to unwrap the defaultState because it might be a function.
        // Otherwise we might not be sending the right reset value.
        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));
        return () => {
            unSet();
            unReset();
        };
    };
    const use = (...subscriptions) => {
        const unsubs = subscriptions.reduce((unsubs, subscription) => {
            if (subscription.set) {
                unsubs.push(on('set', subscription.set));
            }
            if (subscription.get) {
                unsubs.push(on('get', subscription.get));
            }
            if (subscription.reset) {
                unsubs.push(on('reset', subscription.reset));
            }
            if (subscription.dispose) {
                unsubs.push(on('dispose', subscription.dispose));
            }
            return unsubs;
        }, []);
        return () => unsubs.forEach((unsub) => unsub());
    };
    const forceUpdate = (key) => {
        const oldValue = states.get(key);
        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));
    };
    return {
        state,
        get,
        set,
        on,
        onChange,
        use,
        dispose,
        reset,
        forceUpdate,
    };
};
const removeFromArray = (array, item) => {
    const index = array.indexOf(item);
    if (index >= 0) {
        array[index] = array[array.length - 1];
        array.length--;
    }
};

const createStore = (defaultState, shouldUpdate) => {
    const map = createObservableMap(defaultState, shouldUpdate);
    map.use(stencilSubscription());
    return map;
};



//# sourceMappingURL=index-05956cab.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS_UTILITY),
/* harmony export */   a: () => (/* binding */ formatDate),
/* harmony export */   b: () => (/* binding */ formatPlural),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   g: () => (/* binding */ getElementDir),
/* harmony export */   l: () => (/* binding */ languageMap)
/* harmony export */ });
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



const languageMap = new Map([
    ["ar", "ar"],
    ["bg", "bg"],
    ["bs", "bs"],
    ["ca", "ca"],
    ["cs", "cs"],
    ["da", "da"],
    ["de", "de"],
    ["el", "el"],
    ["en", "en"],
    ["es", "es"],
    ["et", "et"],
    ["fi", "fi"],
    ["fr", "fr"],
    ["he", "he"],
    ["hr", "hr"],
    ["hu", "hu"],
    ["id", "id"],
    ["it", "it"],
    ["ja", "ja"],
    ["ko", "ko"],
    ["lt", "lt"],
    ["lv", "lv"],
    ["nb", "nb"],
    ["nl", "nl"],
    ["pl", "pl"],
    ["pt-br", "pt-BR"],
    ["pt-pt", "pt-PT"],
    ["ro", "ro"],
    ["ru", "ru"],
    ["sk", "sk"],
    ["sl", "sl"],
    ["sr", "sr"],
    ["sv", "sv"],
    ["th", "th"],
    ["tr", "tr"],
    ["uk", "uk"],
    ["vi", "vi"],
    ["zh-cn", "zh-CN"],
    ["zh-hk", "zh-HK"],
    ["zh-tw", "zh-TW"]
]);
// rtl
function getElementDir(el) {
    return getElementProp(el, "dir", "ltr");
}
function getElementProp(el, prop, value) {
    const closestWithProp = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_1__.c)(el, `[${prop}]`);
    return closestWithProp ? closestWithProp.getAttribute(prop) : value;
}
// css
const CSS_UTILITY = {
    rtl: "arcgis--rtl"
};
async function formatNumber(number, options) {
    const { api, type, places } = options || {};
    if (api === 4) {
        const [intl] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["esri/intl"]);
        const numberFormatIntlOptions = intl.convertNumberFormatToIntlOptions({
            places,
            style: type,
            digitSeparator: true
        });
        return intl.formatNumber(number, Object.assign(Object.assign({}, numberFormatIntlOptions), { style: type }));
    }
    const [dojoNumber] = await (0,_loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_0__.l)(["dojo/number"]);
    return dojoNumber.format(number, {
        type,
        places,
        pattern: options === null || options === void 0 ? void 0 : options.pattern
    });
}
const cache = {};
function formatDate(date) {
    const lang = document.documentElement.lang;
    const dayShortMonthYear = {
        year: "numeric",
        month: "short",
        day: "numeric"
    };
    if (!cache[lang]) {
        cache[lang] = new Intl.DateTimeFormat(document.documentElement.lang, dayShortMonthYear);
    }
    return cache[lang].format(date);
}
function formatPlural(lang, stringObj, number) {
    const singles = ["id", "ja", "ko", "th", "vi", "zh-cn", "zh-hk", "zh-tw"];
    const likeEnglish = [
        "en",
        "ca",
        "da",
        "de",
        "el",
        "es",
        "et",
        "fi",
        "hi",
        "hu",
        "it",
        "nb",
        "nl",
        "pt-pt",
        "sv",
        "tr"
    ];
    const locale = lang !== null && lang !== void 0 ? lang : "en";
    // if the number is one, or it is a "simple" language, return the 1 string
    if (number === 1 || singles.includes(locale)) {
        return stringObj.single.replace("${number}", "1");
    }
    // if the number is not 1 and the language uses the same pluralization strategy as english,
    // return the multiple string
    if (number !== 1 && likeEnglish.includes(locale)) {
        return stringObj.multiple.replace("${number}", `${number}`);
    }
    // if none of the above worked, return the "unknown" string
    return stringObj.unknown.replace("${number}", `${number}`);
}



//# sourceMappingURL=languageUtil-ef0e54b2.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js":
/*!************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ getComponentClosestLanguage),
/* harmony export */   g: () => (/* binding */ getLocaleComponentStrings)
/* harmony export */ });
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */




// https://medium.com/stencil-tricks/implementing-internationalisation-i18n-with-stencil-5e6559554117
function getComponentClosestLanguage(element) {
    var _a, _b, _c;
    const closestElement = (_a = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
    // language set by the calling application or browser. defaults to english.
    const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
    if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
        return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
    }
    else {
        // "ru-RU" maps to "ru" use case
        if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
            return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang.slice(0, 2));
        }
        else {
            return "en";
        }
    }
}
function getComponentClosestLanguageIntl(element) {
    var _a, _b, _c;
    // it's OK if we don't have the 4 letter language file for it
    // 4 letter language code needed for formatting numbers
    const closestElement = (_a = (0,_dom_4d367677_js__WEBPACK_IMPORTED_MODULE_0__.c)(element, "[lang]")) !== null && _a !== void 0 ? _a : (_c = (_b = element.shadowRoot) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.documentElement;
    // language set by the calling application or browser. defaults to english.
    const lang = ((closestElement === null || closestElement === void 0 ? void 0 : closestElement.lang) || (navigator === null || navigator === void 0 ? void 0 : navigator.language) || "en").toLowerCase();
    if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang)) {
        return _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.get(lang);
    }
    else {
        if (_languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_1__.l.has(lang.slice(0, 2))) {
            // we support the 2 letter coded language
            // e.g. it-CH vs it
            return lang;
        }
        else {
            return "en";
        }
    }
}
function fetchLocaleStringsForComponent(componentName, locale) {
    return new Promise((resolve, reject) => {
        fetch((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_2__.a)(`../arcgis-app-assets/i18n/${componentName}.i18n.${locale}.json`)).then((result) => {
            if (result.ok)
                resolve(result.json());
            else
                reject();
        }, () => reject());
    });
}
const stringCache = {};
function fetchLocaleStringsFromCache(componentName, locale) {
    const id = `${componentName}${locale}`;
    if (!stringCache[id]) {
        stringCache[id] = fetchLocaleStringsForComponent(componentName, locale);
    }
    return stringCache[id];
}
/**
 * Get strings and language codes.
 * This method returns 2 language codes.
 * The first one returns a code that's also supported as a language file.
 * The second one returns a code where there is support for the first 2 letters of the code as part of a language file,
 * but will return the original 4 letter code from the page.
 * E.g. For "it-ch" it will return "it" as the first language code and "it-ch" as the second.
 * The second one is required for esri.intl.setLocale() to get the correct formatting.
 *
 * If a tagName is provided it will overwite the element's tagName
 *
 *  @return [ strings, first language code, second language code]
 */
async function getLocaleComponentStrings(element, tagName) {
    const componentName = tagName || element.tagName.toLowerCase();
    const componentLanguage = getComponentClosestLanguage(element);
    const componentLanguageIntl = getComponentClosestLanguageIntl(element);
    let strings;
    try {
        strings = await fetchLocaleStringsFromCache(componentName, componentLanguage);
    }
    catch (e) {
        console.warn(`no locale for ${componentName} (${componentLanguage}) loading default locale en.`);
        strings = await fetchLocaleStringsFromCache(componentName, "en");
    }
    return [strings, componentLanguage, componentLanguageIntl];
}



//# sourceMappingURL=locale-050b6db9.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/telemetry-49d4aa88.js":
/*!***************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/telemetry-49d4aa88.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getPageName)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
function getPageName() {
    const { hash, pathname } = window.location;
    if (pathname.includes("group.html")) {
        return "group page";
    }
    if (pathname.includes("search.html")) {
        return "search result page";
    }
    switch (hash) {
        case "#favorites":
            return "favorites";
        case "#groups":
            return "my groups content";
        case "#organization":
            return "my org content";
        case "#livingAtlas":
            return "living atlas";
        default:
            return "my content";
    }
}



//# sourceMappingURL=telemetry-49d4aa88.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js":
/*!******************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/type-to-icon-7546439f.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ featureLayerIconInfo),
/* harmony export */   e: () => (/* binding */ esriGeometryIcons),
/* harmony export */   f: () => (/* binding */ fieldTypeIcons)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
const featureLayerIconInfo = {
    point: "point",
    line: "line",
    polygon: "polygon",
    multipatch: "cube",
    table: "table",
    multipoint: "layer-points"
};
const esriGeometryIcons = {
    esriGeometryPoint: "point",
    esriGeometryPolyline: "line",
    esriGeometryPolygon: "polygon",
    esriGeometryMultiPatch: "cube",
    esriGeometryMultipoint: "point",
    none: "table"
};
const fieldTypeIcons = {
    esriFieldTypeOID: "key",
    esriFieldTypeBoolean: "boolean",
    esriFieldTypeString: "string",
    esriFieldTypeSingle: "number",
    esriFieldTypeDouble: "number",
    esriFieldTypeInteger: "integer",
    esriFieldTypeSmallInteger: "integer",
    esriFieldTypeGlobalID: "key",
    esriFieldTypeDate: "date-time",
    esriFieldTypeBigInteger: "integer",
    esriFieldTypeDateOnly: "calendar",
    esriFieldTypeTimeOnly: "clock",
    esriFieldTypeTimestampOffset: "time-zone"
};



//# sourceMappingURL=type-to-icon-7546439f.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js":
/*!***********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/utils-aa26c49f.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ getSublayerTypeInfo)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
/** Get the correct geometry icon based on layer/table type and geometry type
 * will handles types used by the jsapi, the esri types used on the server,
 * and the types returned by the Search API
 */
function getSublayerTypeInfo({ geometry, type }) {
    switch (type) {
        case "Catalog Layer":
            return {
                icon: "catalog-dataset",
                type: "catalog",
                isGeometry: false
            };
        case "Parcel Layer":
            return {
                icon: "parcel-layer",
                type: "parcel",
                isGeometry: false
            };
        case "Oriented Imagery Layer":
            return {
                icon: "oriented-imagery-layer",
                type: "oriented imagery",
                isGeometry: false
            };
        case "Table":
            return {
                icon: "table",
                type: "table",
                isGeometry: true
            };
    }
    switch (geometry) {
        case "point":
        case "esriGeometryPoint":
            return {
                type: "point",
                icon: "point",
                isGeometry: true
            };
        case "esriGeometryMultipoint":
        case "multipoint":
            return {
                type: "multipoint",
                icon: "layer-points",
                isGeometry: true
            };
        case "line":
        case "polyline":
        case "esriGeometryPolyline":
            return {
                type: "line",
                icon: "line",
                isGeometry: true
            };
        case "polygon":
        case "esriGeometryPolygon":
            return {
                type: "polygon",
                icon: "polygon",
                isGeometry: true
            };
        case "multipatch":
        case "esriGeometryMultiPatch":
            return {
                type: "multipatch",
                icon: "cube",
                isGeometry: true
            };
        default:
            return {
                type: "table",
                icon: "table",
                isGeometry: true
            };
    }
}



//# sourceMappingURL=utils-aa26c49f.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTQ5NDQ1YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzRIO0FBQ3BFO0FBQ2M7QUFDWDtBQUNNO0FBQ0Y7QUFDbEM7QUFDRjtBQUNTO0FBQ0Q7O0FBRW5DLCtDQUErQyxlQUFlLFlBQVksSUFBSSxpREFBaUQsUUFBUSxtQkFBbUIsaURBQWlELG9CQUFvQix1QkFBdUIsb0JBQW9CLHFCQUFxQixlQUFlLG1CQUFtQixzQkFBc0IsNkJBQTZCLHNCQUFzQixhQUFhLG1CQUFtQiw4QkFBOEIsbUJBQW1CLHFCQUFxQixXQUFXLFlBQVksaUJBQWlCLGtCQUFrQixtQkFBbUIsc0JBQXNCLGtCQUFrQixnQkFBZ0Isa0NBQWtDLCtCQUErQixvQkFBb0IsV0FBVyxxQkFBcUIsY0FBYyxZQUFZLGlCQUFpQixhQUFhLFdBQVcsYUFBYSxpQkFBaUIsa0JBQWtCLG1CQUFtQixrQkFBa0IsZ0JBQWdCLGtDQUFrQyxNQUFNLDBCQUEwQixNQUFNLGFBQWEseUJBQXlCLG9CQUFvQixxQkFBcUIsdUJBQXVCLG1CQUFtQixhQUFhLHFCQUFxQixZQUFZLGtDQUFrQyxZQUFZLGFBQWEsbUJBQW1CLHVCQUF1QixtREFBbUQsb0JBQW9CLG9CQUFvQixtREFBbUQsUUFBUSxpQkFBaUIsb0JBQW9CLHFCQUFxQixrQkFBa0IsVUFBVSxXQUFXLFVBQVUsWUFBWSxnQkFBZ0Isc0JBQXNCLG1CQUFtQixlQUFlLFdBQVcsNEJBQTRCLGtDQUFrQzs7QUFFcG9EO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4Qix1Q0FBdUMscURBQVc7QUFDbEQ7QUFDQSxpQ0FBaUMsUUFBUTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseURBQVc7QUFDckM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsb0JBQW9CLGFBQWEsRUFBRSxxREFBbUIsR0FBRyxnREFBZ0Q7QUFDekcsb0JBQW9CLHFEQUFDLDZCQUE2QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MseURBQVc7QUFDakQ7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixzREFBeUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWUsRUFBRSxrREFBVztBQUM1QztBQUNBLG1DQUFtQyxlQUFlO0FBQ2xELGtDQUFrQyxlQUFlO0FBQ2pEO0FBQ0EsZ0JBQWdCLHVDQUF1QztBQUN2RCxnQkFBZ0IsS0FBSztBQUNyQjtBQUNBLDBCQUEwQixxREFBQyxxQkFBcUIsaUNBQWlDLE1BQU0scURBQUMsVUFBVSx3QkFBd0IsRUFBRSxxREFBQyxVQUFVLCtCQUErQixFQUFFLHFEQUFDLFNBQVMsOEJBQThCLHlEQUF5RCxxREFBQyx1QkFBdUI7QUFDalM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseURBQVc7QUFDekM7QUFDQSxpQkFBaUI7QUFDakIsZUFBZSxFQUFFLHFEQUFDLHFCQUFxQiw0R0FBNEcsR0FBRyxxREFBQyw2QkFBNkIseUJBQXlCLEVBQUUscURBQUMsNEJBQTRCLFNBQVMsZUFBZSxlQUFlLEdBQUcsWUFBWSxTQUFTLHFCQUFxQixxQkFBcUIscURBQUMsNEJBQTRCLFNBQVMsYUFBYSxVQUFVLEdBQUcsV0FBVyxTQUFTLHFCQUFxQix1Q0FBdUMscURBQUMsQ0FBQyxpREFBUSxRQUFRLHFEQUFDLDRCQUE0QixTQUFTLGdCQUFnQix3QkFBd0IsR0FBRyxXQUFXLFNBQVMscUJBQXFCLGdDQUFnQyxxREFBQyw0QkFBNEIsU0FBUyxnQkFBZ0IsVUFBVSxHQUFHLFdBQVcsU0FBUyxxQkFBcUIsdUJBQXVCLHFEQUFDLDRCQUE0QixTQUFTLGVBQWUsVUFBVSxHQUFHLFdBQVcsU0FBUyxxQkFBcUIscUdBQXFHLHFEQUFDLFNBQVMsNkJBQTZCLHlCQUF5QixxREFBQyxTQUFTLHNCQUFzQixFQUFFLHFEQUFDLG1CQUFtQixNQUFNLHdEQUFjLHFEQUFxRCxxQ0FBcUMscURBQUMsUUFBUSxzQkFBc0I7QUFDdnVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQUMsV0FBVyxzQkFBc0I7QUFDbEQsd0JBQXdCLE1BQU0sTUFBTSxNQUFNO0FBQzFDLHdCQUF3QixJQUFJLE1BQU0sSUFBSTtBQUN0Qyx3QkFBd0IsTUFBTSxNQUFNLE1BQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDREQUE0RDtBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLFVBQVUsaUJBQWlCLEVBQUUscURBQUMscUJBQXFCLHFGQUFxRixFQUFFLHFEQUFDLFVBQVUsZUFBZSxnQkFBZ0IscURBQUMsVUFBVSxpQkFBaUI7QUFDblA7QUFDQSxnQkFBZ0IscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLFVBQVUsYUFBYSwyQ0FBMkMscURBQUMsUUFBUSxvQkFBb0IsdUNBQXVDLHFEQUFDLG1CQUFtQixrQkFBa0IsRUFBRSxxREFBQyxzQkFBc0IseURBQXlELEVBQUUscURBQUMsd0JBQXdCLDJCQUEyQixzQkFBc0IsT0FBTyxNQUFNLGlCQUFpQixLQUFLLHFEQUFDLHdCQUF3QiwyQkFBMkIsMEJBQTBCLE9BQU8sTUFBTSxlQUFlLE1BQU0scURBQUMsa0JBQWtCLDRDQUE0QyxFQUFFLHFEQUFDLHdCQUF3QiwrRUFBK0UsK0NBQStDLHFEQUFDLGtCQUFrQiw0Q0FBNEMsRUFBRSxxREFBQyx3QkFBd0IsK0VBQStFLDBEQUEwRCxxREFBQyxVQUFVLGlCQUFpQixFQUFFLHFEQUFDLHdCQUF3QiwrRUFBK0UsZ0RBQWdELHFEQUFDLFVBQVUsZUFBZSxpREFBaUQscURBQUMsbUJBQW1CLHNCQUFzQixRQUFRO0FBQzF1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix5REFBVztBQUN6QztBQUNBLGlCQUFpQjtBQUNqQixlQUFlLDZDQUE2QyxxREFBQyxVQUFVLHFCQUFxQixFQUFFLHFEQUFDLHlCQUF5QjtBQUN4SDtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsZUFBZSxPQUFPLHFEQUFVO0FBQ2hDO0FBQ0E7O0FBRTRFOztBQUU1RTs7Ozs7Ozs7Ozs7Ozs7OztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUN1RDs7QUFFdkQsb0JBQW9CLHFEQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRWlEOztBQUVqRDs7Ozs7Ozs7Ozs7Ozs7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQzZFOztBQUU3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsZUFBZSxpREFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFEQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsaURBQVc7QUFDdEU7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHdEQUF3RCxpREFBVztBQUNuRTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSDtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU0Qjs7QUFFNUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZNQTtBQUNBO0FBQ0E7QUFDQTtBQUM2RDtBQUNjOztBQUUzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRW9DOztBQUVwQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1sYXllcnMtYW5kLXRhYmxlcy1zdW1tYXJ5LmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2NvbmZpZy03NWFkZjk2Mi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pbmRleC0wNTk1NmNhYi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9sYW5ndWFnZVV0aWwtZWYwZTU0YjIuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vbG9jYWxlLTA1MGI2ZGI5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL3RlbGVtZXRyeS00OWQ0YWE4OC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS90eXBlLXRvLWljb24tNzU0NjQzOWYuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vdXRpbHMtYWEyNmM0OWYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEYgYXMgRnJhZ21lbnQsIEggYXMgSG9zdCwgZCBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbmZpZ1N0YXRlIH0gZnJvbSAnLi9jb25maWctNzVhZGY5NjIuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzIH0gZnJvbSAnLi9sb2NhbGUtMDUwYjZkYjkuanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRQYWdlTmFtZSB9IGZyb20gJy4vdGVsZW1ldHJ5LTQ5ZDRhYTg4LmpzJztcbmltcG9ydCB7IGYgYXMgZmllbGRUeXBlSWNvbnMgfSBmcm9tICcuL3R5cGUtdG8taWNvbi03NTQ2NDM5Zi5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN1YmxheWVyVHlwZUluZm8gfSBmcm9tICcuL3V0aWxzLWFhMjZjNDlmLmpzJztcbmltcG9ydCAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCAnLi9sYW5ndWFnZVV0aWwtZWYwZTU0YjIuanMnO1xuaW1wb3J0ICcuL2xvYWRNb2R1bGVzLWI0YWMxMjQ3LmpzJztcblxuY29uc3QgYXJjZ2lzTGF5ZXJzQW5kVGFibGVzU3VtbWFyeUNzcyA9IFwiOmhvc3R7bWF4LXdpZHRoOjEwMCU7d2lkdGg6MzgwcHh9LmJne2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1iYWNrZ3JvdW5kKX0ubGF5ZXJze3doaXRlLXNwYWNlOm5vcm1hbDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYmFja2dyb3VuZCk7cGFkZGluZy10b3A6MC43NXJlbTtwYWRkaW5nLWJvdHRvbTowLjc1cmVtO3BhZGRpbmctbGVmdDowLjVyZW07cGFkZGluZy1yaWdodDowLjVyZW19LmZpZWxkLWFsaWFzZXN7cGFkZGluZy10b3A6MC41cmVtO3BhZGRpbmctYm90dG9tOjAuNXJlbTtwYWRkaW5nLWlubGluZS1zdGFydDoxLjc1cmVtfS5maWVsZC1hbGlhc2VzLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO21hcmdpbi1ib3R0b206LThweH0uZmllbGQtYWxpYXNlcy10aXRsZXttYXJnaW46MHB4O2ZsZXg6MSAxIDAlO3BhZGRpbmctbGVmdDowcHg7cGFkZGluZy1yaWdodDowcHg7cGFkZGluZy10b3A6MC41cmVtO3BhZGRpbmctYm90dG9tOjAuNXJlbTtmb250LXNpemU6MC43NXJlbTtmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpO3RleHQtZGVjb3JhdGlvbi1saW5lOnVuZGVybGluZX0uZmllbGQtYWxpYXNlcy1saXN0e21hcmdpbjowcHg7bGlzdC1zdHlsZS10eXBlOm5vbmU7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjBweDttYXgtaGVpZ2h0OjIwMHB4fS5maWVsZC1hbGlhc3ttYXJnaW46MHB4O2Rpc3BsYXk6ZmxleDtwYWRkaW5nLWxlZnQ6MHB4O3BhZGRpbmctcmlnaHQ6MHB4O3BhZGRpbmctdG9wOjAuNXJlbTtmb250LXNpemU6MC43NXJlbTtmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfS5pY29ue3BhZGRpbmctaW5saW5lLWVuZDowLjVyZW19LnBvc3R7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtwYWRkaW5nLWxlZnQ6MC41cmVtO3BhZGRpbmctcmlnaHQ6MC41cmVtO3BhZGRpbmctYm90dG9tOjAuNzVyZW07Zm9udC1zaXplOjAuODc1cmVtfS5wYWdlLW51bWJlcntkaXNwbGF5OmlubGluZS1ibG9jaztmbGV4OjEgMSAwJTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMil9LnBhZ2luYXRpb257ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO3BhZGRpbmctdG9wOjAuNzVyZW07cGFkZGluZy1ib3R0b206MXJlbTtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKX0ubm90aWNle3BhZGRpbmctdG9wOjFyZW07cGFkZGluZy1ib3R0b206MXJlbX0uc2NyZWVuLXJlYWRlcnMtb25seXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxcHg7aGVpZ2h0OjFweDtwYWRkaW5nOjA7bWFyZ2luOi0xcHg7b3ZlcmZsb3c6aGlkZGVuO2NsaXA6cmVjdCgwLCAwLCAwLCAwKTt3aGl0ZS1zcGFjZTpub3dyYXA7Ym9yZGVyLXdpZHRoOjB9Lm5vLWxheWVyc3twYWRkaW5nOjAuNzVyZW0gMXJlbSAwIDFyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfVwiO1xuXG5jb25zdCBBcmNnaXNMYXllcnNBbmRUYWJsZXNTdW1tYXJ5ID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5sYXllcnNBbmRUYWJsZXNGb2N1c0VuZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibGF5ZXJzQW5kVGFibGVzRm9jdXNFbmRcIiwgNyk7XG4gICAgICAgIHRoaXMuZXhwYW5kZWQgPSB7fTtcbiAgICAgICAgdGhpcy5oYW5kbGVUYWJDaGFnZSA9ICh7IGRldGFpbCB9KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYiA9IGRldGFpbC50YWI7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLnRlbGVtZXRyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxvZ0V2ZW50KHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogXCJwcmV2aWV3IHBvcHVwXCIsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcInN3aXRjaCB0YWJcIixcbiAgICAgICAgICAgICAgICBsYWJlbDogZGV0YWlsLnRhYiA/IFwibWF0Y2hlZFwiIDogXCJhbGxcIixcbiAgICAgICAgICAgICAgICBwYWdlTmFtZTogZ2V0UGFnZU5hbWUoKSxcbiAgICAgICAgICAgICAgICBwYWdlVXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuZGVyTGF5ZXIgPSAobGF5ZXIsIG1hdGNoZWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaTE4biwgdGVsZW1ldHJ5IH0gPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgeyBpY29uLCB0eXBlIH0gPSBnZXRTdWJsYXllclR5cGVJbmZvKHsgZ2VvbWV0cnk6IGxheWVyLmdlb21ldHJ5VHlwZSwgdHlwZTogbGF5ZXIudHlwZSB9KTtcbiAgICAgICAgICAgIHJldHVybiAoaChcImNhbGNpdGUtYWNjb3JkaW9uLWl0ZW1cIiwgeyBoZWFkaW5nOiBsYXllci50aXRsZSwgZGVzY3JpcHRpb246IGkxOG4ubGF5ZXJUeXBlc1t0eXBlXSwgaWNvblN0YXJ0OiBpY29uLCBjbGFzczogXCJsYXllclwiLCBvbkNsaWNrOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdXJyZW50VGFyZ2V0LmV4cGFuZGVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5leHBhbmRlZFtsYXllci5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbGVtZXRyeSA9PT0gbnVsbCB8fCB0ZWxlbWV0cnkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRlbGVtZXRyeS5sb2dFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwicHJldmlldyBwb3B1cFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJleHBhbmQgbGF5ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbWF0Y2hlZCA/IFwibWF0Y2hlZFwiIDogXCJhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlTmFtZTogZ2V0UGFnZU5hbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZGVkW2xheWVyLmlkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IH0sIHRoaXMucmVuZGVyQWxpYXNlcyhsYXllciwgbWF0Y2hlZCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLml0ZW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9ydGFsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxheWVycyA9IFtdO1xuICAgICAgICB0aGlzLnNob3dNYXRjaGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudGVsZW1ldHJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGFydCA9IDE7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFiID0gMTtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IGF3YWl0IGdldExvY2FsZUNvbXBvbmVudFN0cmluZ3ModGhpcy5lbCk7XG4gICAgICAgIHRoaXMuaTE4biA9IGxvY2FsZVswXTtcbiAgICB9XG4gICAgY2xvc2VBY2NvcmRpb24oKSB7XG4gICAgICAgIHRoaXMuZWwuc2hhZG93Um9vdFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGF5ZXJcIilcbiAgICAgICAgICAgIC5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjaGVja0FsaWFzKGFsaWFzKSB7XG4gICAgICAgIGNvbnN0IGJsYWNrbGlzdCA9IFtcbiAgICAgICAgICAgIC8vIGV4YWN0XG4gICAgICAgICAgICAvXmZub2RlXyQvaSxcbiAgICAgICAgICAgIC9edG5vZGVfJC9pLFxuICAgICAgICAgICAgL15scG9seV8kL2ksXG4gICAgICAgICAgICAvXnJwb2x5XyQvaSxcbiAgICAgICAgICAgIC9ecG9seV8kL2ksXG4gICAgICAgICAgICAvXnN1YmNsYXNzJC9pLFxuICAgICAgICAgICAgL15zdWJjbGFzc18kL2ksXG4gICAgICAgICAgICAvXnJpbmdzX29rJC9pLFxuICAgICAgICAgICAgL15yaW5nc19ub2skL2ksXG4gICAgICAgICAgICAvLyBwYXJ0aWFsXG4gICAgICAgICAgICAvc2hhcGUvaSxcbiAgICAgICAgICAgIC9wZXJpbWV0ZXIvaSxcbiAgICAgICAgICAgIC9vYmplY3RpZC9pLFxuICAgICAgICAgICAgLy8gZW5kaW5nXG4gICAgICAgICAgICAvX2kkL2lcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuICFibGFja2xpc3QuZmluZCgocmUpID0+IHJlLnRlc3QoYWxpYXMpKTtcbiAgICB9XG4gICAgcmVuZGVyQWxpYXNlcyhsYXllciwgbWF0Y2hlZCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHsgY29uZmlnLCB1c2VyIH0gPSBjb25maWdTdGF0ZTtcbiAgICAgICAgY29uc3QgbWFwVmlld2VyVXJsID0gY29uZmlnLm5ld01hcFZpZXdlclVybDtcbiAgICAgICAgY29uc3Qgb2xkTWFwVmlld2VyVXJsID0gYCR7Y29uZmlnLmJhc2VVcmx9d2VibWFwL3ZpZXdlci5odG1sYDtcbiAgICAgICAgY29uc3Qgc2NlbmVWaWV3ZXJVcmwgPSBgJHtjb25maWcuYmFzZVVybH13ZWJzY2VuZS92aWV3ZXIuaHRtbGA7XG4gICAgICAgIGNvbnN0IG9sZFZpZXdlciA9ICh1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZXIuZGVmYXVsdE1hcFZpZXdlcikgPT09IFwiY2xhc3NpY1wiO1xuICAgICAgICBjb25zdCB7IGkxOG4sIGxvYWRpbmcsIGNoZWNrQWxpYXMsIHRlbGVtZXRyeSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy5pdGVtO1xuICAgICAgICBjb25zdCBmaWVsZHMgPSAoX2EgPSBsYXllci5maWVsZHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maWx0ZXIoKGZpZWxkKSA9PiBjaGVja0FsaWFzKGZpZWxkLmFsaWFzIHx8IGZpZWxkLm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIGxvYWRpbmcgPyAoaChcImNhbGNpdGUtbG9hZGVyXCIsIHsgc2NhbGU6IFwic1wiLCBsYWJlbDogaTE4bi5sb2FkaW5nIH0pKSA6IChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZmllbGQtYWxpYXNlc1wiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJmaWVsZC1hbGlhc2VzLWhlYWRlclwiIH0sIGgoXCJoNVwiLCB7IGNsYXNzOiBcImZpZWxkLWFsaWFzZXMtdGl0bGVcIiB9LCBpMThuLmZpZWxkcyksIHRoaXMuaXRlbS50eXBlID09PSBcIkZlYXR1cmUgU2VydmljZVwiICYmIChoKFwiY2FsY2l0ZS1kcm9wZG93blwiLCB7IHBsYWNlbWVudDogXCJib3R0b20tZW5kXCIsIHdpZHRoU2NhbGU6IFwibVwiLCB0eXBlOiBcImNsaWNrXCIsIGNsYXNzOiBcImZpZWxkLWFsaWFzZXMtZHJvcGRvd25cIiwgb25DYWxjaXRlRHJvcGRvd25PcGVuOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGVsZW1ldHJ5ID09PSBudWxsIHx8IHRlbGVtZXRyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGVsZW1ldHJ5LmxvZ0V2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwicHJldmlldyBwb3B1cFwiLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwib3BlbiBhY3Rpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBtYXRjaGVkID8gXCJtYXRjaGVkXCIgOiBcImFsbFwiLFxuICAgICAgICAgICAgICAgICAgICBwYWdlTmFtZTogZ2V0UGFnZU5hbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZVVybDogd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gfSwgaChcImNhbGNpdGUtYWN0aW9uXCIsIHsgc2xvdDogXCJ0cmlnZ2VyXCIsIHNjYWxlOiBcInNcIiwgbGFiZWw6IFwibGF5ZXIgYWN0aW9uc1wiLCBhcHBlYXJhbmNlOiBcInRyYW5zcGFyZW50XCIsIGljb246IFwiZWxsaXBzaXNcIiwgdGV4dDogXCJcIiB9KSwgaChcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIiwgeyBzZWxlY3Rpb25Nb2RlOiBcInNpbmdsZVwiIH0sIGgoXCJjYWxjaXRlLWRyb3Bkb3duLWl0ZW1cIiwgeyBocmVmOiBgJHtjb25maWcuYmFzZVVybH1pdGVtLmh0bWw/aWQ9JHtpZH0mc3VibGF5ZXI9JHtsYXllci5pZH1gLCB0YXJnZXQ6IFwiX2JsYW5rXCIgfSwgaTE4bi52aWV3RGV0YWlscyksIGgoXCJjYWxjaXRlLWRyb3Bkb3duLWl0ZW1cIiwgeyBocmVmOiBgJHttYXBWaWV3ZXJVcmx9P2xheWVycz0ke2lkfSZsYXllcklkPSR7bGF5ZXIuaWR9YCwgdGFyZ2V0OiBcIl9ibGFua1wiIH0sIGkxOG4ub3BlbkluTWFwVmlld2VyKSwgb2xkVmlld2VyICYmIChoKEZyYWdtZW50LCBudWxsLCBoKFwiY2FsY2l0ZS1kcm9wZG93bi1pdGVtXCIsIHsgaHJlZjogYCR7b2xkTWFwVmlld2VyVXJsfT91c2VFeGlzdGluZz0xJmxheWVycz0ke2lkfSZsYXllcklkPSR7bGF5ZXIuaWR9YCwgdGFyZ2V0OiBcIl9ibGFua1wiIH0sIGkxOG4ub3BlbkluTWFwVmlld2VyQ2xhc3NpYyksIGgoXCJjYWxjaXRlLWRyb3Bkb3duLWl0ZW1cIiwgeyBocmVmOiBgJHtvbGRNYXBWaWV3ZXJVcmx9P2xheWVycz0ke2lkfSZsYXllcklkPSR7bGF5ZXIuaWR9YCwgdGFyZ2V0OiBcIl9ibGFua1wiIH0sIGkxOG4uYWRkVG9OZXdNYXApKSksIGgoXCJjYWxjaXRlLWRyb3Bkb3duLWl0ZW1cIiwgeyBocmVmOiBgJHtzY2VuZVZpZXdlclVybH0/bGF5ZXJzPSR7aWR9JmxheWVySWQ9JHtsYXllci5pZH1gLCB0YXJnZXQ6IFwiX2JsYW5rXCIgfSwgaTE4bi5hZGRUb1NjZW5lVmlld2VyKSkpKSksIChmaWVsZHMgPT09IG51bGwgfHwgZmllbGRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaWVsZHMubGVuZ3RoKSA+IDAgPyAoaChcInVsXCIsIHsgY2xhc3M6IFwiZmllbGQtYWxpYXNlcy1saXN0XCIgfSwgZmllbGRzLm1hcCgoZmllbGQpID0+IChoKFwibGlcIiwgeyBjbGFzczogXCJmaWVsZC1hbGlhc1wiIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBmaWVsZFR5cGVJY29uc1tmaWVsZC50eXBlXSB8fCBcInN0cmluZ1wiLCBzY2FsZTogXCJzXCIsIGNsYXNzOiBcImljb25cIiB9KSwgZmllbGQuYWxpYXMgfHwgZmllbGQubmFtZSkpKSkpIDogKGgoXCJwXCIsIHsgY2xhc3M6IFwiZmllbGQtYWxpYXNcIiB9LCBpMThuLm5vQWxpYXNGb3VuZCkpKSk7XG4gICAgfVxuICAgIHJlbmRlclBhZ2VOdW1iZXJUZXh0KCkge1xuICAgICAgICBjb25zdCBzdGFydCA9IHRoaXMuY3VycmVudFN0YXJ0O1xuICAgICAgICBjb25zdCB0b3RhbCA9IHRoaXMubGF5ZXJzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4oc3RhcnQgKyA1LCB0b3RhbCk7XG4gICAgICAgIHJldHVybiAoaChcInNwYW5cIiwgeyBjbGFzczogXCJwYWdlLW51bWJlclwiIH0sIHRoaXMuaTE4bi5wYWdpbmF0aW9uUmFuZ2VcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiJHtzdGFydH1cIiwgYCR7c3RhcnR9YClcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiJHtlbmR9XCIsIGAke2VuZH1gKVxuICAgICAgICAgICAgLnJlcGxhY2UoXCIke3RvdGFsfVwiLCBgJHt0b3RhbH1gKSkpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgeyBpMThuLCByZW5kZXJMYXllciwgZXJyb3IsIGhhbmRsZVRhYkNoYWdlLCBpdGVtLCBhY3RpdmVUYWIgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHN1YmxheWVycyA9IHRoaXMubGF5ZXJzIHx8IFtdO1xuICAgICAgICBjb25zdCBtYXRjaGVkID0gKHRoaXMubGF5ZXJzIHx8IFtdKS5maWx0ZXIoKGxheWVyKSA9PiBsYXllci5tYXRjaGVkKTtcbiAgICAgICAgY29uc3QgbGF5ZXJzID0gc3VibGF5ZXJzLnNsaWNlKHRoaXMuY3VycmVudFN0YXJ0IC0gMSwgdGhpcy5jdXJyZW50U3RhcnQgKyA1KTtcbiAgICAgICAgY29uc3Qgc2hvd01hdGNoZWQgPSB0aGlzLnNob3dNYXRjaGVkICYmIChtYXRjaGVkID09PSBudWxsIHx8IG1hdGNoZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hdGNoZWQubGVuZ3RoKSA+IDA7XG4gICAgICAgIGNvbnN0IHNob3dQYWdpbmF0aW9uID0gKChfYSA9IChhY3RpdmVUYWIgJiYgc2hvd01hdGNoZWQgPyBtYXRjaGVkIDogc3VibGF5ZXJzKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiA2O1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwibGF5ZXJzXCIgfSwgaChcImNhbGNpdGUtbm90aWNlXCIsIHsgaWNvbjogdHJ1ZSwgb3BlbjogdHJ1ZSwgc2NhbGU6IFwic1wiLCB3aWR0aDogXCJmdWxsXCIsIGtpbmQ6IFwid2FybmluZ1wiLCBjbGFzczogXCJub3RpY2VcIiB9LCBoKFwiZGl2XCIsIHsgc2xvdDogXCJ0aXRsZVwiIH0sIGVycm9yLnRpdGxlKSwgaChcImRpdlwiLCB7IHNsb3Q6IFwibWVzc2FnZVwiIH0sIGVycm9yLm1lc3NhZ2UpKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcImJnXCIgfSwgIXN1YmxheWVycyB8fCAoc3VibGF5ZXJzLmxlbmd0aCA9PT0gMCAmJiBoKFwicFwiLCB7IGNsYXNzOiBcIm5vLWxheWVyc1wiIH0sIHRoaXMuaTE4bi5ub0xheWVycykpLCBzaG93TWF0Y2hlZCA/IChoKFwiY2FsY2l0ZS10YWJzXCIsIHsgbGF5b3V0OiBcImNlbnRlclwiIH0sIGgoXCJjYWxjaXRlLXRhYi1uYXZcIiwgeyBzbG90OiBcInRpdGxlLWdyb3VwXCIsIG9uQ2FsY2l0ZVRhYkNoYW5nZTogaGFuZGxlVGFiQ2hhZ2UgfSwgaChcImNhbGNpdGUtdGFiLXRpdGxlXCIsIHsgc2VsZWN0ZWQ6IGFjdGl2ZVRhYiA9PT0gMCB9LCBpMThuLmFsbC5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke3N1YmxheWVycy5sZW5ndGh9YCkpLCBoKFwiY2FsY2l0ZS10YWItdGl0bGVcIiwgeyBzZWxlY3RlZDogYWN0aXZlVGFiID09PSAxIH0sIGkxOG4ubWF0Y2hlZC5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIGAke21hdGNoZWQubGVuZ3RofWApKSksIGgoXCJjYWxjaXRlLXRhYlwiLCB7IGNsYXNzOiBcImxheWVyc1wiLCBzZWxlY3RlZDogYWN0aXZlVGFiID09PSAwIH0sIGgoXCJjYWxjaXRlLWFjY29yZGlvblwiLCB7IHNlbGVjdGlvbk1vZGU6IFwic2luZ2xlXCIsIHNjYWxlOiBcIm1cIiwgaWNvblBvc2l0aW9uOiBcImVuZFwiLCBpY29uVHlwZTogXCJjaGV2cm9uXCIgfSwgbGF5ZXJzLm1hcCgobGF5ZXIpID0+IHJlbmRlckxheWVyKGxheWVyKSkpKSwgaChcImNhbGNpdGUtdGFiXCIsIHsgY2xhc3M6IFwibGF5ZXJzXCIsIHNlbGVjdGVkOiBhY3RpdmVUYWIgPT09IDEgfSwgaChcImNhbGNpdGUtYWNjb3JkaW9uXCIsIHsgc2VsZWN0aW9uTW9kZTogXCJzaW5nbGVcIiwgc2NhbGU6IFwibVwiLCBpY29uUG9zaXRpb246IFwiZW5kXCIsIGljb25UeXBlOiBcImNoZXZyb25cIiB9LCBtYXRjaGVkLm1hcCgobGF5ZXIpID0+IHJlbmRlckxheWVyKGxheWVyLCB0cnVlKSkpKSkpIDogKGgoXCJkaXZcIiwgeyBjbGFzczogXCJsYXllcnNcIiB9LCBoKFwiY2FsY2l0ZS1hY2NvcmRpb25cIiwgeyBzZWxlY3Rpb25Nb2RlOiBcInNpbmdsZVwiLCBzY2FsZTogXCJtXCIsIGljb25Qb3NpdGlvbjogXCJlbmRcIiwgaWNvblR5cGU6IFwiY2hldnJvblwiIH0sIGxheWVycy5tYXAoKGxheWVyKSA9PiByZW5kZXJMYXllcihsYXllcikpKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwicG9zdFwiIH0sIHNob3dQYWdpbmF0aW9uICYmIHRoaXMucmVuZGVyUGFnZU51bWJlclRleHQoKSwgaChcImNhbGNpdGUtbGlua1wiLCB7IGhyZWY6IGBpdGVtLmh0bWw/aWQ9JHtpdGVtLmlkfWAsIGNsYXNzOiBcImRldGFpbHMtbGlua1wiLCB0YXJnZXQ6IFwiX2JsYW5rXCIsIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgKF9hID0gdGhpcy50ZWxlbWV0cnkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb2dFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBcInByZXZpZXcgcG9wdXBcIixcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcInZpZXcgaXRlbSBkZXRhaWxzXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VOYW1lOiBnZXRQYWdlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICBwYWdlVXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSB9LCBpMThuLnZpZXdJdGVtRGV0YWlscykpLCBzaG93UGFnaW5hdGlvbiAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBcInBhZ2luYXRpb25cIiB9LCBoKFwiY2FsY2l0ZS1wYWdpbmF0aW9uXCIsIHsgc2NhbGU6IFwibVwiLCB0b3RhbEl0ZW1zOiBzdWJsYXllcnMubGVuZ3RoLCBwYWdlU2l6ZTogNiwgc3RhcnRJdGVtOiB0aGlzLmN1cnJlbnRTdGFydCwgb25DYWxjaXRlUGFnaW5hdGlvbkNoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGFydCA9IGUudGFyZ2V0LnN0YXJ0SXRlbTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQWNjb3JkaW9uKCk7XG4gICAgICAgICAgICB9IH0pKSkpKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5BcmNnaXNMYXllcnNBbmRUYWJsZXNTdW1tYXJ5LnN0eWxlID0gYXJjZ2lzTGF5ZXJzQW5kVGFibGVzU3VtbWFyeUNzcztcblxuZXhwb3J0IHsgQXJjZ2lzTGF5ZXJzQW5kVGFibGVzU3VtbWFyeSBhcyBhcmNnaXNfbGF5ZXJzX2FuZF90YWJsZXNfc3VtbWFyeSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtbGF5ZXJzLWFuZC10YWJsZXMtc3VtbWFyeS5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGMgYXMgY3JlYXRlU3RvcmUgfSBmcm9tICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcblxuY29uc3QgY29uZmlnU3RvcmUgPSBjcmVhdGVTdG9yZSh7XG4gICAgcG9ydGFsOiBudWxsLFxuICAgIHVzZXI6IG51bGwsXG4gICAgYXBpOiA0LFxuICAgIHNjYWxlOiBcIm1cIlxufSk7XG5jb25zdCBjb25maWdTdGF0ZSA9IGNvbmZpZ1N0b3JlLnN0YXRlO1xuY29uc3Qgb25Db25maWdDaGFuZ2UgPSBjb25maWdTdG9yZS5vbkNoYW5nZTtcblxuZXhwb3J0IHsgY29uZmlnU3RhdGUgYXMgYywgb25Db25maWdDaGFuZ2UgYXMgbyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWctNzVhZGY5NjIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyBnIGFzIGdldFJlbmRlcmluZ1JlZiwgZiBhcyBmb3JjZVVwZGF0ZSB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuXG5jb25zdCBhcHBlbmRUb01hcCA9IChtYXAsIHByb3BOYW1lLCB2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1zID0gbWFwLmdldChwcm9wTmFtZSk7XG4gICAgaWYgKCFpdGVtcykge1xuICAgICAgICBtYXAuc2V0KHByb3BOYW1lLCBbdmFsdWVdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWl0ZW1zLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICB9XG59O1xuY29uc3QgZGVib3VuY2UgPSAoZm4sIG1zKSA9PiB7XG4gICAgbGV0IHRpbWVvdXRJZDtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSAwO1xuICAgICAgICAgICAgZm4oLi4uYXJncyk7XG4gICAgICAgIH0sIG1zKTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIHBvc3NpYmxlIGVsZW1lbnQgaXNDb25uZWN0ZWQuXG4gKiBUaGUgcHJvcGVydHkgbWlnaHQgbm90IGJlIHRoZXJlLCBzbyB3ZSBjaGVjayBmb3IgaXQuXG4gKlxuICogV2Ugd2FudCBpdCB0byByZXR1cm4gdHJ1ZSBpZiBpc0Nvbm5lY3RlZCBpcyBub3QgYSBwcm9wZXJ0eSxcbiAqIG90aGVyd2lzZSB3ZSB3b3VsZCByZW1vdmUgdGhlc2UgZWxlbWVudHMgYW5kIHdvdWxkIG5vdCB1cGRhdGUuXG4gKlxuICogQmV0dGVyIGxlYWsgaW4gRWRnZSB0aGFuIHRvIGJlIHVzZWxlc3MuXG4gKi9cbmNvbnN0IGlzQ29ubmVjdGVkID0gKG1heWJlRWxlbWVudCkgPT4gISgnaXNDb25uZWN0ZWQnIGluIG1heWJlRWxlbWVudCkgfHwgbWF5YmVFbGVtZW50LmlzQ29ubmVjdGVkO1xuY29uc3QgY2xlYW51cEVsZW1lbnRzID0gZGVib3VuY2UoKG1hcCkgPT4ge1xuICAgIGZvciAobGV0IGtleSBvZiBtYXAua2V5cygpKSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCBtYXAuZ2V0KGtleSkuZmlsdGVyKGlzQ29ubmVjdGVkKSk7XG4gICAgfVxufSwgMjAwMCk7XG5jb25zdCBzdGVuY2lsU3Vic2NyaXB0aW9uID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZ2V0UmVuZGVyaW5nUmVmICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBub3QgaW4gYSBzdGVuY2lsIHByb2plY3QsIHdlIGRvIG5vdGhpbmcuXG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgbm90IHJlYWxseSBleHBvcnRlZCBieSBAc3RlbmNpbC9jb3JlLlxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGVsbXNUb1VwZGF0ZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNwb3NlOiAoKSA9PiBlbG1zVG9VcGRhdGUuY2xlYXIoKSxcbiAgICAgICAgZ2V0OiAocHJvcE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsbSA9IGdldFJlbmRlcmluZ1JlZigpO1xuICAgICAgICAgICAgaWYgKGVsbSkge1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvTWFwKGVsbXNUb1VwZGF0ZSwgcHJvcE5hbWUsIGVsbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogKHByb3BOYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGVsbXNUb1VwZGF0ZS5nZXQocHJvcE5hbWUpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgZWxtc1RvVXBkYXRlLnNldChwcm9wTmFtZSwgZWxlbWVudHMuZmlsdGVyKGZvcmNlVXBkYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhbnVwRWxlbWVudHMoZWxtc1RvVXBkYXRlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIGVsbXNUb1VwZGF0ZS5mb3JFYWNoKChlbG1zKSA9PiBlbG1zLmZvckVhY2goZm9yY2VVcGRhdGUpKTtcbiAgICAgICAgICAgIGNsZWFudXBFbGVtZW50cyhlbG1zVG9VcGRhdGUpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5jb25zdCB1bndyYXAgPSAodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHZhbCgpIDogdmFsKTtcbmNvbnN0IGNyZWF0ZU9ic2VydmFibGVNYXAgPSAoZGVmYXVsdFN0YXRlLCBzaG91bGRVcGRhdGUgPSAoYSwgYikgPT4gYSAhPT0gYikgPT4ge1xuICAgIGNvbnN0IHVud3JhcHBlZFN0YXRlID0gdW53cmFwKGRlZmF1bHRTdGF0ZSk7XG4gICAgbGV0IHN0YXRlcyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXModW53cmFwcGVkU3RhdGUgIT09IG51bGwgJiYgdW53cmFwcGVkU3RhdGUgIT09IHZvaWQgMCA/IHVud3JhcHBlZFN0YXRlIDoge30pKTtcbiAgICBjb25zdCBoYW5kbGVycyA9IHtcbiAgICAgICAgZGlzcG9zZTogW10sXG4gICAgICAgIGdldDogW10sXG4gICAgICAgIHNldDogW10sXG4gICAgICAgIHJlc2V0OiBbXSxcbiAgICB9O1xuICAgIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIC8vIFdoZW4gcmVzZXR0aW5nIHRoZSBzdGF0ZSwgdGhlIGRlZmF1bHQgc3RhdGUgbWF5IGJlIGEgZnVuY3Rpb24gLSB1bndyYXAgaXQgdG8gaW52b2tlIGl0LlxuICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBzdGF0ZSB3b24ndCBiZSBwcm9wZXJseSByZXNldFxuICAgICAgICBzdGF0ZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKChfYSA9IHVud3JhcChkZWZhdWx0U3RhdGUpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkpO1xuICAgICAgICBoYW5kbGVycy5yZXNldC5mb3JFYWNoKChjYikgPT4gY2IoKSk7XG4gICAgfTtcbiAgICBjb25zdCBkaXNwb3NlID0gKCkgPT4ge1xuICAgICAgICAvLyBDYWxsIGZpcnN0IGRpc3Bvc2UgYXMgcmVzZXR0aW5nIHRoZSBzdGF0ZSB3b3VsZFxuICAgICAgICAvLyBjYXVzZSBsZXNzIHVwZGF0ZXMgOylcbiAgICAgICAgaGFuZGxlcnMuZGlzcG9zZS5mb3JFYWNoKChjYikgPT4gY2IoKSk7XG4gICAgICAgIHJlc2V0KCk7XG4gICAgfTtcbiAgICBjb25zdCBnZXQgPSAocHJvcE5hbWUpID0+IHtcbiAgICAgICAgaGFuZGxlcnMuZ2V0LmZvckVhY2goKGNiKSA9PiBjYihwcm9wTmFtZSkpO1xuICAgICAgICByZXR1cm4gc3RhdGVzLmdldChwcm9wTmFtZSk7XG4gICAgfTtcbiAgICBjb25zdCBzZXQgPSAocHJvcE5hbWUsIHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gc3RhdGVzLmdldChwcm9wTmFtZSk7XG4gICAgICAgIGlmIChzaG91bGRVcGRhdGUodmFsdWUsIG9sZFZhbHVlLCBwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIHN0YXRlcy5zZXQocHJvcE5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXJzLnNldC5mb3JFYWNoKChjYikgPT4gY2IocHJvcE5hbWUsIHZhbHVlLCBvbGRWYWx1ZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGF0ZSA9ICh0eXBlb2YgUHJveHkgPT09ICd1bmRlZmluZWQnXG4gICAgICAgID8ge31cbiAgICAgICAgOiBuZXcgUHJveHkodW53cmFwcGVkU3RhdGUsIHtcbiAgICAgICAgICAgIGdldChfLCBwcm9wTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXQocHJvcE5hbWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHN0YXRlcy5rZXlzKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXMoXywgcHJvcE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVzLmhhcyhwcm9wTmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KF8sIHByb3BOYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHNldChwcm9wTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgIGNvbnN0IG9uID0gKGV2ZW50TmFtZSwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgaGFuZGxlcnNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHJlbW92ZUZyb21BcnJheShoYW5kbGVyc1tldmVudE5hbWVdLCBjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCBvbkNoYW5nZSA9IChwcm9wTmFtZSwgY2IpID0+IHtcbiAgICAgICAgY29uc3QgdW5TZXQgPSBvbignc2V0JywgKGtleSwgbmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHByb3BOYW1lKSB7XG4gICAgICAgICAgICAgICAgY2IobmV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2UgbmVlZCB0byB1bndyYXAgdGhlIGRlZmF1bHRTdGF0ZSBiZWNhdXNlIGl0IG1pZ2h0IGJlIGEgZnVuY3Rpb24uXG4gICAgICAgIC8vIE90aGVyd2lzZSB3ZSBtaWdodCBub3QgYmUgc2VuZGluZyB0aGUgcmlnaHQgcmVzZXQgdmFsdWUuXG4gICAgICAgIGNvbnN0IHVuUmVzZXQgPSBvbigncmVzZXQnLCAoKSA9PiBjYih1bndyYXAoZGVmYXVsdFN0YXRlKVtwcm9wTmFtZV0pKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuU2V0KCk7XG4gICAgICAgICAgICB1blJlc2V0KCk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdCB1c2UgPSAoLi4uc3Vic2NyaXB0aW9ucykgPT4ge1xuICAgICAgICBjb25zdCB1bnN1YnMgPSBzdWJzY3JpcHRpb25zLnJlZHVjZSgodW5zdWJzLCBzdWJzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uc2V0KSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzLnB1c2gob24oJ3NldCcsIHN1YnNjcmlwdGlvbi5zZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uZ2V0KSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzLnB1c2gob24oJ2dldCcsIHN1YnNjcmlwdGlvbi5nZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24ucmVzZXQpIHtcbiAgICAgICAgICAgICAgICB1bnN1YnMucHVzaChvbigncmVzZXQnLCBzdWJzY3JpcHRpb24ucmVzZXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uZGlzcG9zZSkge1xuICAgICAgICAgICAgICAgIHVuc3Vicy5wdXNoKG9uKCdkaXNwb3NlJywgc3Vic2NyaXB0aW9uLmRpc3Bvc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bnN1YnM7XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHVuc3Vicy5mb3JFYWNoKCh1bnN1YikgPT4gdW5zdWIoKSk7XG4gICAgfTtcbiAgICBjb25zdCBmb3JjZVVwZGF0ZSA9IChrZXkpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBzdGF0ZXMuZ2V0KGtleSk7XG4gICAgICAgIGhhbmRsZXJzLnNldC5mb3JFYWNoKChjYikgPT4gY2Ioa2V5LCBvbGRWYWx1ZSwgb2xkVmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBnZXQsXG4gICAgICAgIHNldCxcbiAgICAgICAgb24sXG4gICAgICAgIG9uQ2hhbmdlLFxuICAgICAgICB1c2UsXG4gICAgICAgIGRpc3Bvc2UsXG4gICAgICAgIHJlc2V0LFxuICAgICAgICBmb3JjZVVwZGF0ZSxcbiAgICB9O1xufTtcbmNvbnN0IHJlbW92ZUZyb21BcnJheSA9IChhcnJheSwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihpdGVtKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICAgICAgYXJyYXkubGVuZ3RoLS07XG4gICAgfVxufTtcblxuY29uc3QgY3JlYXRlU3RvcmUgPSAoZGVmYXVsdFN0YXRlLCBzaG91bGRVcGRhdGUpID0+IHtcbiAgICBjb25zdCBtYXAgPSBjcmVhdGVPYnNlcnZhYmxlTWFwKGRlZmF1bHRTdGF0ZSwgc2hvdWxkVXBkYXRlKTtcbiAgICBtYXAudXNlKHN0ZW5jaWxTdWJzY3JpcHRpb24oKSk7XG4gICAgcmV0dXJuIG1hcDtcbn07XG5cbmV4cG9ydCB7IGNyZWF0ZVN0b3JlIGFzIGMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtMDU5NTZjYWIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyBsIGFzIGxvYWRNb2R1bGVzIH0gZnJvbSAnLi9sb2FkTW9kdWxlcy1iNGFjMTI0Ny5qcyc7XG5pbXBvcnQgeyBjIGFzIGNsb3Nlc3RFbGVtZW50Q3Jvc3NTaGFkb3dCb3VuZGFyeSB9IGZyb20gJy4vZG9tLTRkMzY3Njc3LmpzJztcblxuY29uc3QgbGFuZ3VhZ2VNYXAgPSBuZXcgTWFwKFtcbiAgICBbXCJhclwiLCBcImFyXCJdLFxuICAgIFtcImJnXCIsIFwiYmdcIl0sXG4gICAgW1wiYnNcIiwgXCJic1wiXSxcbiAgICBbXCJjYVwiLCBcImNhXCJdLFxuICAgIFtcImNzXCIsIFwiY3NcIl0sXG4gICAgW1wiZGFcIiwgXCJkYVwiXSxcbiAgICBbXCJkZVwiLCBcImRlXCJdLFxuICAgIFtcImVsXCIsIFwiZWxcIl0sXG4gICAgW1wiZW5cIiwgXCJlblwiXSxcbiAgICBbXCJlc1wiLCBcImVzXCJdLFxuICAgIFtcImV0XCIsIFwiZXRcIl0sXG4gICAgW1wiZmlcIiwgXCJmaVwiXSxcbiAgICBbXCJmclwiLCBcImZyXCJdLFxuICAgIFtcImhlXCIsIFwiaGVcIl0sXG4gICAgW1wiaHJcIiwgXCJoclwiXSxcbiAgICBbXCJodVwiLCBcImh1XCJdLFxuICAgIFtcImlkXCIsIFwiaWRcIl0sXG4gICAgW1wiaXRcIiwgXCJpdFwiXSxcbiAgICBbXCJqYVwiLCBcImphXCJdLFxuICAgIFtcImtvXCIsIFwia29cIl0sXG4gICAgW1wibHRcIiwgXCJsdFwiXSxcbiAgICBbXCJsdlwiLCBcImx2XCJdLFxuICAgIFtcIm5iXCIsIFwibmJcIl0sXG4gICAgW1wibmxcIiwgXCJubFwiXSxcbiAgICBbXCJwbFwiLCBcInBsXCJdLFxuICAgIFtcInB0LWJyXCIsIFwicHQtQlJcIl0sXG4gICAgW1wicHQtcHRcIiwgXCJwdC1QVFwiXSxcbiAgICBbXCJyb1wiLCBcInJvXCJdLFxuICAgIFtcInJ1XCIsIFwicnVcIl0sXG4gICAgW1wic2tcIiwgXCJza1wiXSxcbiAgICBbXCJzbFwiLCBcInNsXCJdLFxuICAgIFtcInNyXCIsIFwic3JcIl0sXG4gICAgW1wic3ZcIiwgXCJzdlwiXSxcbiAgICBbXCJ0aFwiLCBcInRoXCJdLFxuICAgIFtcInRyXCIsIFwidHJcIl0sXG4gICAgW1widWtcIiwgXCJ1a1wiXSxcbiAgICBbXCJ2aVwiLCBcInZpXCJdLFxuICAgIFtcInpoLWNuXCIsIFwiemgtQ05cIl0sXG4gICAgW1wiemgtaGtcIiwgXCJ6aC1IS1wiXSxcbiAgICBbXCJ6aC10d1wiLCBcInpoLVRXXCJdXG5dKTtcbi8vIHJ0bFxuZnVuY3Rpb24gZ2V0RWxlbWVudERpcihlbCkge1xuICAgIHJldHVybiBnZXRFbGVtZW50UHJvcChlbCwgXCJkaXJcIiwgXCJsdHJcIik7XG59XG5mdW5jdGlvbiBnZXRFbGVtZW50UHJvcChlbCwgcHJvcCwgdmFsdWUpIHtcbiAgICBjb25zdCBjbG9zZXN0V2l0aFByb3AgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWwsIGBbJHtwcm9wfV1gKTtcbiAgICByZXR1cm4gY2xvc2VzdFdpdGhQcm9wID8gY2xvc2VzdFdpdGhQcm9wLmdldEF0dHJpYnV0ZShwcm9wKSA6IHZhbHVlO1xufVxuLy8gY3NzXG5jb25zdCBDU1NfVVRJTElUWSA9IHtcbiAgICBydGw6IFwiYXJjZ2lzLS1ydGxcIlxufTtcbmFzeW5jIGZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFwaSwgdHlwZSwgcGxhY2VzIH0gPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmIChhcGkgPT09IDQpIHtcbiAgICAgICAgY29uc3QgW2ludGxdID0gYXdhaXQgbG9hZE1vZHVsZXMoW1wiZXNyaS9pbnRsXCJdKTtcbiAgICAgICAgY29uc3QgbnVtYmVyRm9ybWF0SW50bE9wdGlvbnMgPSBpbnRsLmNvbnZlcnROdW1iZXJGb3JtYXRUb0ludGxPcHRpb25zKHtcbiAgICAgICAgICAgIHBsYWNlcyxcbiAgICAgICAgICAgIHN0eWxlOiB0eXBlLFxuICAgICAgICAgICAgZGlnaXRTZXBhcmF0b3I6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbnRsLmZvcm1hdE51bWJlcihudW1iZXIsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbnVtYmVyRm9ybWF0SW50bE9wdGlvbnMpLCB7IHN0eWxlOiB0eXBlIH0pKTtcbiAgICB9XG4gICAgY29uc3QgW2Rvam9OdW1iZXJdID0gYXdhaXQgbG9hZE1vZHVsZXMoW1wiZG9qby9udW1iZXJcIl0pO1xuICAgIHJldHVybiBkb2pvTnVtYmVyLmZvcm1hdChudW1iZXIsIHtcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcGxhY2VzLFxuICAgICAgICBwYXR0ZXJuOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucGF0dGVyblxuICAgIH0pO1xufVxuY29uc3QgY2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuICAgIGNvbnN0IGxhbmcgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcbiAgICBjb25zdCBkYXlTaG9ydE1vbnRoWWVhciA9IHtcbiAgICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICAgIG1vbnRoOiBcInNob3J0XCIsXG4gICAgICAgIGRheTogXCJudW1lcmljXCJcbiAgICB9O1xuICAgIGlmICghY2FjaGVbbGFuZ10pIHtcbiAgICAgICAgY2FjaGVbbGFuZ10gPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZywgZGF5U2hvcnRNb250aFllYXIpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVbbGFuZ10uZm9ybWF0KGRhdGUpO1xufVxuZnVuY3Rpb24gZm9ybWF0UGx1cmFsKGxhbmcsIHN0cmluZ09iaiwgbnVtYmVyKSB7XG4gICAgY29uc3Qgc2luZ2xlcyA9IFtcImlkXCIsIFwiamFcIiwgXCJrb1wiLCBcInRoXCIsIFwidmlcIiwgXCJ6aC1jblwiLCBcInpoLWhrXCIsIFwiemgtdHdcIl07XG4gICAgY29uc3QgbGlrZUVuZ2xpc2ggPSBbXG4gICAgICAgIFwiZW5cIixcbiAgICAgICAgXCJjYVwiLFxuICAgICAgICBcImRhXCIsXG4gICAgICAgIFwiZGVcIixcbiAgICAgICAgXCJlbFwiLFxuICAgICAgICBcImVzXCIsXG4gICAgICAgIFwiZXRcIixcbiAgICAgICAgXCJmaVwiLFxuICAgICAgICBcImhpXCIsXG4gICAgICAgIFwiaHVcIixcbiAgICAgICAgXCJpdFwiLFxuICAgICAgICBcIm5iXCIsXG4gICAgICAgIFwibmxcIixcbiAgICAgICAgXCJwdC1wdFwiLFxuICAgICAgICBcInN2XCIsXG4gICAgICAgIFwidHJcIlxuICAgIF07XG4gICAgY29uc3QgbG9jYWxlID0gbGFuZyAhPT0gbnVsbCAmJiBsYW5nICE9PSB2b2lkIDAgPyBsYW5nIDogXCJlblwiO1xuICAgIC8vIGlmIHRoZSBudW1iZXIgaXMgb25lLCBvciBpdCBpcyBhIFwic2ltcGxlXCIgbGFuZ3VhZ2UsIHJldHVybiB0aGUgMSBzdHJpbmdcbiAgICBpZiAobnVtYmVyID09PSAxIHx8IHNpbmdsZXMuaW5jbHVkZXMobG9jYWxlKSkge1xuICAgICAgICByZXR1cm4gc3RyaW5nT2JqLnNpbmdsZS5yZXBsYWNlKFwiJHtudW1iZXJ9XCIsIFwiMVwiKTtcbiAgICB9XG4gICAgLy8gaWYgdGhlIG51bWJlciBpcyBub3QgMSBhbmQgdGhlIGxhbmd1YWdlIHVzZXMgdGhlIHNhbWUgcGx1cmFsaXphdGlvbiBzdHJhdGVneSBhcyBlbmdsaXNoLFxuICAgIC8vIHJldHVybiB0aGUgbXVsdGlwbGUgc3RyaW5nXG4gICAgaWYgKG51bWJlciAhPT0gMSAmJiBsaWtlRW5nbGlzaC5pbmNsdWRlcyhsb2NhbGUpKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdPYmoubXVsdGlwbGUucmVwbGFjZShcIiR7bnVtYmVyfVwiLCBgJHtudW1iZXJ9YCk7XG4gICAgfVxuICAgIC8vIGlmIG5vbmUgb2YgdGhlIGFib3ZlIHdvcmtlZCwgcmV0dXJuIHRoZSBcInVua25vd25cIiBzdHJpbmdcbiAgICByZXR1cm4gc3RyaW5nT2JqLnVua25vd24ucmVwbGFjZShcIiR7bnVtYmVyfVwiLCBgJHtudW1iZXJ9YCk7XG59XG5cbmV4cG9ydCB7IENTU19VVElMSVRZIGFzIEMsIGZvcm1hdERhdGUgYXMgYSwgZm9ybWF0UGx1cmFsIGFzIGIsIGZvcm1hdE51bWJlciBhcyBmLCBnZXRFbGVtZW50RGlyIGFzIGcsIGxhbmd1YWdlTWFwIGFzIGwgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFuZ3VhZ2VVdGlsLWVmMGU1NGIyLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYyBhcyBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkgfSBmcm9tICcuL2RvbS00ZDM2NzY3Ny5qcyc7XG5pbXBvcnQgeyBsIGFzIGxhbmd1YWdlTWFwIH0gZnJvbSAnLi9sYW5ndWFnZVV0aWwtZWYwZTU0YjIuanMnO1xuaW1wb3J0IHsgYSBhcyBnZXRBc3NldFBhdGggfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcblxuLy8gaHR0cHM6Ly9tZWRpdW0uY29tL3N0ZW5jaWwtdHJpY2tzL2ltcGxlbWVudGluZy1pbnRlcm5hdGlvbmFsaXNhdGlvbi1pMThuLXdpdGgtc3RlbmNpbC01ZTY1NTk1NTQxMTdcbmZ1bmN0aW9uIGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZShlbGVtZW50KSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgY2xvc2VzdEVsZW1lbnQgPSAoX2EgPSBjbG9zZXN0RWxlbWVudENyb3NzU2hhZG93Qm91bmRhcnkoZWxlbWVudCwgXCJbbGFuZ11cIikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChfYyA9IChfYiA9IGVsZW1lbnQuc2hhZG93Um9vdCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm93bmVyRG9jdW1lbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgLy8gbGFuZ3VhZ2Ugc2V0IGJ5IHRoZSBjYWxsaW5nIGFwcGxpY2F0aW9uIG9yIGJyb3dzZXIuIGRlZmF1bHRzIHRvIGVuZ2xpc2guXG4gICAgY29uc3QgbGFuZyA9ICgoY2xvc2VzdEVsZW1lbnQgPT09IG51bGwgfHwgY2xvc2VzdEVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsb3Nlc3RFbGVtZW50LmxhbmcpIHx8IChuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubGFuZ3VhZ2UpIHx8IFwiZW5cIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobGFuZ3VhZ2VNYXAuaGFzKGxhbmcpKSB7XG4gICAgICAgIHJldHVybiBsYW5ndWFnZU1hcC5nZXQobGFuZyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBcInJ1LVJVXCIgbWFwcyB0byBcInJ1XCIgdXNlIGNhc2VcbiAgICAgICAgaWYgKGxhbmd1YWdlTWFwLmhhcyhsYW5nLnNsaWNlKDAsIDIpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmd1YWdlTWFwLmdldChsYW5nLnNsaWNlKDAsIDIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcImVuXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2VJbnRsKGVsZW1lbnQpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAvLyBpdCdzIE9LIGlmIHdlIGRvbid0IGhhdmUgdGhlIDQgbGV0dGVyIGxhbmd1YWdlIGZpbGUgZm9yIGl0XG4gICAgLy8gNCBsZXR0ZXIgbGFuZ3VhZ2UgY29kZSBuZWVkZWQgZm9yIGZvcm1hdHRpbmcgbnVtYmVyc1xuICAgIGNvbnN0IGNsb3Nlc3RFbGVtZW50ID0gKF9hID0gY2xvc2VzdEVsZW1lbnRDcm9zc1NoYWRvd0JvdW5kYXJ5KGVsZW1lbnQsIFwiW2xhbmddXCIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2MgPSAoX2IgPSBlbGVtZW50LnNoYWRvd1Jvb3QpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5vd25lckRvY3VtZW50KSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZG9jdW1lbnRFbGVtZW50O1xuICAgIC8vIGxhbmd1YWdlIHNldCBieSB0aGUgY2FsbGluZyBhcHBsaWNhdGlvbiBvciBicm93c2VyLiBkZWZhdWx0cyB0byBlbmdsaXNoLlxuICAgIGNvbnN0IGxhbmcgPSAoKGNsb3Nlc3RFbGVtZW50ID09PSBudWxsIHx8IGNsb3Nlc3RFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbG9zZXN0RWxlbWVudC5sYW5nKSB8fCAobmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLmxhbmd1YWdlKSB8fCBcImVuXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxhbmd1YWdlTWFwLmhhcyhsYW5nKSkge1xuICAgICAgICByZXR1cm4gbGFuZ3VhZ2VNYXAuZ2V0KGxhbmcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGxhbmd1YWdlTWFwLmhhcyhsYW5nLnNsaWNlKDAsIDIpKSkge1xuICAgICAgICAgICAgLy8gd2Ugc3VwcG9ydCB0aGUgMiBsZXR0ZXIgY29kZWQgbGFuZ3VhZ2VcbiAgICAgICAgICAgIC8vIGUuZy4gaXQtQ0ggdnMgaXRcbiAgICAgICAgICAgIHJldHVybiBsYW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiZW5cIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGZldGNoTG9jYWxlU3RyaW5nc0ZvckNvbXBvbmVudChjb21wb25lbnROYW1lLCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBmZXRjaChnZXRBc3NldFBhdGgoYC4uL2FyY2dpcy1hcHAtYXNzZXRzL2kxOG4vJHtjb21wb25lbnROYW1lfS5pMThuLiR7bG9jYWxlfS5qc29uYCkpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5vaylcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdC5qc29uKCkpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICB9LCAoKSA9PiByZWplY3QoKSk7XG4gICAgfSk7XG59XG5jb25zdCBzdHJpbmdDYWNoZSA9IHt9O1xuZnVuY3Rpb24gZmV0Y2hMb2NhbGVTdHJpbmdzRnJvbUNhY2hlKGNvbXBvbmVudE5hbWUsIGxvY2FsZSkge1xuICAgIGNvbnN0IGlkID0gYCR7Y29tcG9uZW50TmFtZX0ke2xvY2FsZX1gO1xuICAgIGlmICghc3RyaW5nQ2FjaGVbaWRdKSB7XG4gICAgICAgIHN0cmluZ0NhY2hlW2lkXSA9IGZldGNoTG9jYWxlU3RyaW5nc0ZvckNvbXBvbmVudChjb21wb25lbnROYW1lLCBsb2NhbGUpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nQ2FjaGVbaWRdO1xufVxuLyoqXG4gKiBHZXQgc3RyaW5ncyBhbmQgbGFuZ3VhZ2UgY29kZXMuXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIDIgbGFuZ3VhZ2UgY29kZXMuXG4gKiBUaGUgZmlyc3Qgb25lIHJldHVybnMgYSBjb2RlIHRoYXQncyBhbHNvIHN1cHBvcnRlZCBhcyBhIGxhbmd1YWdlIGZpbGUuXG4gKiBUaGUgc2Vjb25kIG9uZSByZXR1cm5zIGEgY29kZSB3aGVyZSB0aGVyZSBpcyBzdXBwb3J0IGZvciB0aGUgZmlyc3QgMiBsZXR0ZXJzIG9mIHRoZSBjb2RlIGFzIHBhcnQgb2YgYSBsYW5ndWFnZSBmaWxlLFxuICogYnV0IHdpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCA0IGxldHRlciBjb2RlIGZyb20gdGhlIHBhZ2UuXG4gKiBFLmcuIEZvciBcIml0LWNoXCIgaXQgd2lsbCByZXR1cm4gXCJpdFwiIGFzIHRoZSBmaXJzdCBsYW5ndWFnZSBjb2RlIGFuZCBcIml0LWNoXCIgYXMgdGhlIHNlY29uZC5cbiAqIFRoZSBzZWNvbmQgb25lIGlzIHJlcXVpcmVkIGZvciBlc3JpLmludGwuc2V0TG9jYWxlKCkgdG8gZ2V0IHRoZSBjb3JyZWN0IGZvcm1hdHRpbmcuXG4gKlxuICogSWYgYSB0YWdOYW1lIGlzIHByb3ZpZGVkIGl0IHdpbGwgb3ZlcndpdGUgdGhlIGVsZW1lbnQncyB0YWdOYW1lXG4gKlxuICogIEByZXR1cm4gWyBzdHJpbmdzLCBmaXJzdCBsYW5ndWFnZSBjb2RlLCBzZWNvbmQgbGFuZ3VhZ2UgY29kZV1cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0TG9jYWxlQ29tcG9uZW50U3RyaW5ncyhlbGVtZW50LCB0YWdOYW1lKSB7XG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IHRhZ05hbWUgfHwgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgY29tcG9uZW50TGFuZ3VhZ2UgPSBnZXRDb21wb25lbnRDbG9zZXN0TGFuZ3VhZ2UoZWxlbWVudCk7XG4gICAgY29uc3QgY29tcG9uZW50TGFuZ3VhZ2VJbnRsID0gZ2V0Q29tcG9uZW50Q2xvc2VzdExhbmd1YWdlSW50bChlbGVtZW50KTtcbiAgICBsZXQgc3RyaW5ncztcbiAgICB0cnkge1xuICAgICAgICBzdHJpbmdzID0gYXdhaXQgZmV0Y2hMb2NhbGVTdHJpbmdzRnJvbUNhY2hlKGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudExhbmd1YWdlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBubyBsb2NhbGUgZm9yICR7Y29tcG9uZW50TmFtZX0gKCR7Y29tcG9uZW50TGFuZ3VhZ2V9KSBsb2FkaW5nIGRlZmF1bHQgbG9jYWxlIGVuLmApO1xuICAgICAgICBzdHJpbmdzID0gYXdhaXQgZmV0Y2hMb2NhbGVTdHJpbmdzRnJvbUNhY2hlKGNvbXBvbmVudE5hbWUsIFwiZW5cIik7XG4gICAgfVxuICAgIHJldHVybiBbc3RyaW5ncywgY29tcG9uZW50TGFuZ3VhZ2UsIGNvbXBvbmVudExhbmd1YWdlSW50bF07XG59XG5cbmV4cG9ydCB7IGdldENvbXBvbmVudENsb3Nlc3RMYW5ndWFnZSBhcyBhLCBnZXRMb2NhbGVDb21wb25lbnRTdHJpbmdzIGFzIGcgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9jYWxlLTA1MGI2ZGI5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuZnVuY3Rpb24gZ2V0UGFnZU5hbWUoKSB7XG4gICAgY29uc3QgeyBoYXNoLCBwYXRobmFtZSB9ID0gd2luZG93LmxvY2F0aW9uO1xuICAgIGlmIChwYXRobmFtZS5pbmNsdWRlcyhcImdyb3VwLmh0bWxcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3JvdXAgcGFnZVwiO1xuICAgIH1cbiAgICBpZiAocGF0aG5hbWUuaW5jbHVkZXMoXCJzZWFyY2guaHRtbFwiKSkge1xuICAgICAgICByZXR1cm4gXCJzZWFyY2ggcmVzdWx0IHBhZ2VcIjtcbiAgICB9XG4gICAgc3dpdGNoIChoYXNoKSB7XG4gICAgICAgIGNhc2UgXCIjZmF2b3JpdGVzXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmYXZvcml0ZXNcIjtcbiAgICAgICAgY2FzZSBcIiNncm91cHNcIjpcbiAgICAgICAgICAgIHJldHVybiBcIm15IGdyb3VwcyBjb250ZW50XCI7XG4gICAgICAgIGNhc2UgXCIjb3JnYW5pemF0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJteSBvcmcgY29udGVudFwiO1xuICAgICAgICBjYXNlIFwiI2xpdmluZ0F0bGFzXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJsaXZpbmcgYXRsYXNcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcIm15IGNvbnRlbnRcIjtcbiAgICB9XG59XG5cbmV4cG9ydCB7IGdldFBhZ2VOYW1lIGFzIGcgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVsZW1ldHJ5LTQ5ZDRhYTg4LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuY29uc3QgZmVhdHVyZUxheWVySWNvbkluZm8gPSB7XG4gICAgcG9pbnQ6IFwicG9pbnRcIixcbiAgICBsaW5lOiBcImxpbmVcIixcbiAgICBwb2x5Z29uOiBcInBvbHlnb25cIixcbiAgICBtdWx0aXBhdGNoOiBcImN1YmVcIixcbiAgICB0YWJsZTogXCJ0YWJsZVwiLFxuICAgIG11bHRpcG9pbnQ6IFwibGF5ZXItcG9pbnRzXCJcbn07XG5jb25zdCBlc3JpR2VvbWV0cnlJY29ucyA9IHtcbiAgICBlc3JpR2VvbWV0cnlQb2ludDogXCJwb2ludFwiLFxuICAgIGVzcmlHZW9tZXRyeVBvbHlsaW5lOiBcImxpbmVcIixcbiAgICBlc3JpR2VvbWV0cnlQb2x5Z29uOiBcInBvbHlnb25cIixcbiAgICBlc3JpR2VvbWV0cnlNdWx0aVBhdGNoOiBcImN1YmVcIixcbiAgICBlc3JpR2VvbWV0cnlNdWx0aXBvaW50OiBcInBvaW50XCIsXG4gICAgbm9uZTogXCJ0YWJsZVwiXG59O1xuY29uc3QgZmllbGRUeXBlSWNvbnMgPSB7XG4gICAgZXNyaUZpZWxkVHlwZU9JRDogXCJrZXlcIixcbiAgICBlc3JpRmllbGRUeXBlQm9vbGVhbjogXCJib29sZWFuXCIsXG4gICAgZXNyaUZpZWxkVHlwZVN0cmluZzogXCJzdHJpbmdcIixcbiAgICBlc3JpRmllbGRUeXBlU2luZ2xlOiBcIm51bWJlclwiLFxuICAgIGVzcmlGaWVsZFR5cGVEb3VibGU6IFwibnVtYmVyXCIsXG4gICAgZXNyaUZpZWxkVHlwZUludGVnZXI6IFwiaW50ZWdlclwiLFxuICAgIGVzcmlGaWVsZFR5cGVTbWFsbEludGVnZXI6IFwiaW50ZWdlclwiLFxuICAgIGVzcmlGaWVsZFR5cGVHbG9iYWxJRDogXCJrZXlcIixcbiAgICBlc3JpRmllbGRUeXBlRGF0ZTogXCJkYXRlLXRpbWVcIixcbiAgICBlc3JpRmllbGRUeXBlQmlnSW50ZWdlcjogXCJpbnRlZ2VyXCIsXG4gICAgZXNyaUZpZWxkVHlwZURhdGVPbmx5OiBcImNhbGVuZGFyXCIsXG4gICAgZXNyaUZpZWxkVHlwZVRpbWVPbmx5OiBcImNsb2NrXCIsXG4gICAgZXNyaUZpZWxkVHlwZVRpbWVzdGFtcE9mZnNldDogXCJ0aW1lLXpvbmVcIlxufTtcblxuZXhwb3J0IHsgZmVhdHVyZUxheWVySWNvbkluZm8gYXMgYSwgZXNyaUdlb21ldHJ5SWNvbnMgYXMgZSwgZmllbGRUeXBlSWNvbnMgYXMgZiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlLXRvLWljb24tNzU0NjQzOWYuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG4vKiogR2V0IHRoZSBjb3JyZWN0IGdlb21ldHJ5IGljb24gYmFzZWQgb24gbGF5ZXIvdGFibGUgdHlwZSBhbmQgZ2VvbWV0cnkgdHlwZVxuICogd2lsbCBoYW5kbGVzIHR5cGVzIHVzZWQgYnkgdGhlIGpzYXBpLCB0aGUgZXNyaSB0eXBlcyB1c2VkIG9uIHRoZSBzZXJ2ZXIsXG4gKiBhbmQgdGhlIHR5cGVzIHJldHVybmVkIGJ5IHRoZSBTZWFyY2ggQVBJXG4gKi9cbmZ1bmN0aW9uIGdldFN1YmxheWVyVHlwZUluZm8oeyBnZW9tZXRyeSwgdHlwZSB9KSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgXCJDYXRhbG9nIExheWVyXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGljb246IFwiY2F0YWxvZy1kYXRhc2V0XCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjYXRhbG9nXCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgXCJQYXJjZWwgTGF5ZXJcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWNvbjogXCJwYXJjZWwtbGF5ZXJcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInBhcmNlbFwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIFwiT3JpZW50ZWQgSW1hZ2VyeSBMYXllclwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpY29uOiBcIm9yaWVudGVkLWltYWdlcnktbGF5ZXJcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm9yaWVudGVkIGltYWdlcnlcIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcIlRhYmxlXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGljb246IFwidGFibGVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRhYmxlXCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICB9XG4gICAgc3dpdGNoIChnZW9tZXRyeSkge1xuICAgICAgICBjYXNlIFwicG9pbnRcIjpcbiAgICAgICAgY2FzZSBcImVzcmlHZW9tZXRyeVBvaW50XCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9pbnRcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcInBvaW50XCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSBcImVzcmlHZW9tZXRyeU11bHRpcG9pbnRcIjpcbiAgICAgICAgY2FzZSBcIm11bHRpcG9pbnRcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJtdWx0aXBvaW50XCIsXG4gICAgICAgICAgICAgICAgaWNvbjogXCJsYXllci1wb2ludHNcIixcbiAgICAgICAgICAgICAgICBpc0dlb21ldHJ5OiB0cnVlXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlIFwibGluZVwiOlxuICAgICAgICBjYXNlIFwicG9seWxpbmVcIjpcbiAgICAgICAgY2FzZSBcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIGljb246IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgXCJwb2x5Z29uXCI6XG4gICAgICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9seWdvblwiLFxuICAgICAgICAgICAgICAgIGljb246IFwicG9seWdvblwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgXCJtdWx0aXBhdGNoXCI6XG4gICAgICAgIGNhc2UgXCJlc3JpR2VvbWV0cnlNdWx0aVBhdGNoXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibXVsdGlwYXRjaFwiLFxuICAgICAgICAgICAgICAgIGljb246IFwiY3ViZVwiLFxuICAgICAgICAgICAgICAgIGlzR2VvbWV0cnk6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGFibGVcIixcbiAgICAgICAgICAgICAgICBpY29uOiBcInRhYmxlXCIsXG4gICAgICAgICAgICAgICAgaXNHZW9tZXRyeTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IGdldFN1YmxheWVyVHlwZUluZm8gYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy1hYTI2YzQ5Zi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=