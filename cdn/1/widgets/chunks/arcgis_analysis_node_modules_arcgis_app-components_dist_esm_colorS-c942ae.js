/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-c942ae.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_colorS-c942ae"],{70490:(e,s,o)=>{o.d(s,{a:()=>a,c:()=>r,g:()=>t});var l=o(9225),n=(o(69283),o(10519)),i=o(25902);function r(e){var s;const{layer:o,mapImageSublayer:r,mapView:a,modules:t}=l.s,d=o;e=e||{};const m=(0,l.g)(),c=(0,l.m)((0,l.h)(d)),u=e.fieldInfos?e.fieldInfos[0]:null,f=e.theme?e.theme:"high-to-low",b={layer:d,view:a,field:u.field,valueExpression:u.expression,valueExpressionTitle:u.expressionTitle,normalizationField:e.normalizationField,theme:f,legendOptions:e.legendOptions,colorOptions:{colorScheme:e.colorScheme||(0,l.P)(f),isContinuous:!!(0,n.i)(e.isContinuous)&&e.isContinuous},symbolOptions:(0,l.B)(d)?void 0:{symbolStyle:e.symbolOptions||"caret"},symbols:e.symbols||void 0,minValue:e.min,maxValue:e.max,sizeOptimizationEnabled:!r&&"above-and-below"!==f&&(!(0,n.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:"binning"===(null===(s=d.featureReduction)||void 0===s?void 0:s.type)};return t.UnivariateColorSizeCreator.createContinuousRenderer(b).then((s=>{if(!e.noReuse&&["color","color-size","color-size-age"].indexOf(m)>-1&&(0,i.s)(e)){const e=(0,l.a)((0,l.h)(d),"color"),o=(0,l.p)((0,l.h)(d),"color");e&&o&&f===o.univariateTheme&&(s.renderer.visualVariables=[e],c.sizeOutlineVisVar&&s.renderer.visualVariables.push(c.sizeOutlineVisVar),s.renderer.authoringInfo.visualVariables=[o],(0,l.Q)(s.renderer))}return(0,l.l)(c,s.renderer),Promise.resolve(s)}),(e=>Promise.reject(e)))}function a(e){var s,o,i,r,a,t,d,m;const{layer:c,mapImageSublayer:u,mapView:f,modules:b}=l.s,v=c;e=e||{};const y=(0,l.h)(v),p=(0,l.a)(y,"color");if(p&&e.fieldInfos&&e.fieldInfos[0]&&e.fieldInfos[0].field==p.field&&e.fieldInfos[0].expression==p.valueExpression&&e.normalizationField===p.normalizationField&&(delete e.fieldInfos,(0,l.R)(e)))return Promise.resolve({renderer:y.clone()});const I=(0,l.m)(y),z=(0,l.a)(y,"size"),h=y.authoringInfo,k=(0,l.p)(y,"size");let g=e.fieldInfos?e.fieldInfos[0]:p?{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:(null===(s=(0,l.u)(p.field))||void 0===s?void 0:s.simpleFieldType)||l.w.NUMBER}:{field:y.field,expression:y.valueExpression,expressionTitle:y.valueExpressionTitle,simpleFieldType:(null===(o=(0,l.u)(y.field))||void 0===o?void 0:o.simpleFieldType)||l.w.NUMBER};const B=null===e.normalizationField?void 0:e.normalizationField?e.normalizationField:p?p.normalizationField:y.normalizationField,S=e.theme?e.theme:h?h.univariateTheme:"high-to-low",x="above-and-below"===h.univariateTheme,E="above-and-below"===S,w="custom"===h.univariateSymbolStyle;"custom"!==e.symbolStyle||e.symbols||(1===y.classBreakInfos.length?e.symbols=[b.esriLang.clone(y.classBreakInfos[0].symbol),b.esriLang.clone(y.classBreakInfos[0].symbol)]:e.symbols=[b.esriLang.clone(y.classBreakInfos[0].symbol),b.esriLang.clone(y.classBreakInfos[1].symbol)]);const V=(0,n.i)(e.isContinuous)?e.isContinuous:!(!x&&E||!p),O="picture-marker"===(null===(i=y.classBreakInfos[0].symbol)||void 0===i?void 0:i.type)||"picture-marker"===(null===(r=y.classBreakInfos[2===y.classBreakInfos.length?1:0].symbol)||void 0===r?void 0:r.type),T=!x&&E||O&&V?"caret":E?e.symbolStyle?["single","custom"].indexOf(e.symbolStyle)>-1?void 0:e.symbolStyle:e.symbols?void 0:"custom"!==h.univariateSymbolStyle?h.univariateSymbolStyle:void 0:void 0,F=!(O&&V)&&("custom"===e.symbolStyle||!e.symbolStyle&&w);let C=E&&!(0,l.B)(v)?{symbolStyle:T,symbols:T?void 0:2===(null===(a=e.symbols)||void 0===a?void 0:a.length)?{below:e.symbols[0],above:e.symbols[1]}:1===(null===(t=e.symbols)||void 0===t?void 0:t.length)?void 0:F?{below:y.classBreakInfos[0].symbol,above:y.classBreakInfos[2===y.classBreakInfos.length?1:0].symbol}:void 0}:void 0;(null==C?void 0:C.symbolStyle)||(null==C?void 0:C.symbols)||(C=void 0),V&&(null==C?void 0:C.symbols)&&((0,l.r)(null==C?void 0:C.symbols.below,new b.esriColor([0,0,0,.5])),(0,l.r)(null==C?void 0:C.symbols.above,new b.esriColor([0,0,0,.5])));const L=y.defaultSymbol,_=y.defaultLabel,P=y.backgroundFillSymbol;let M=!1;S===(null==h?void 0:h.univariateTheme)&&(0,n.i)(z.minSize)&&(M=z.minSize.stops?z.minSize.stops[0].size>z.maxSize.stops[0].size:z.minSize>z.maxSize);let R=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfos&&e.fieldInfos[0])&&(R=!0);const D=E&&!x||!E&&x,j=e.discardMinMax?void 0:(0,n.i)(e.min)?e.min:R?void 0:k?k.minSliderValue:void 0,U=e.discardMinMax?void 0:(0,n.i)(e.max)?e.max:R?void 0:k?k.maxSliderValue:void 0,N="below"===h.univariateTheme,Q="below"===S,q=Q&&!N||!Q&&N,A=e.colorScheme||!D&&(0,l.P)(S),G={layer:v,view:f,field:g.field,valueExpression:g.expression,valueExpressionTitle:g.expressionTitle,theme:S,legendOptions:e.legendOptions||z.legendOptions,colorOptions:{colorScheme:A,isContinuous:V},symbolOptions:C,normalizationField:B,minValue:j,maxValue:U,sizeOptimizationEnabled:!u&&"above-and-below"!==S&&((0,n.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!(0,n.i)(null===(d=z.minSize)||void 0===d?void 0:d.stops)),defaultSymbolEnabled:(0,n.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!y.defaultSymbol,forBinning:"binning"===(null===(m=v.featureReduction)||void 0===m?void 0:m.type)};return b.UnivariateColorSizeCreator.createContinuousRenderer(G).then((s=>{var o,n,i,r,a;if(e.discardMinMax){const e=(0,l.a)(y,"color"),n=(0,l.a)(s.renderer,"color");null==e||e.stops.forEach(((e,s)=>e.value=null==n?void 0:n.stops[s].value));const i=(0,l.a)(y,"size"),r=(0,l.a)(s.renderer,"size");"above-and-below"===h.univariateTheme?null===(o=i.stops)||void 0===o||o.forEach(((e,s)=>{r.stops&&(e.value=r.stops[s].value)})):(i.minDataValue=r.minDataValue,i.maxDataValue=r.maxDataValue)}if((0,l.l)(I,s.renderer),E){const o=(0,l.t)(s.renderer.classBreakInfos[0].symbol),r=s.renderer.classBreakInfos[1]?(0,l.t)(s.renderer.classBreakInfos[1].symbol):o;if(!T)if(1===(null===(n=e.symbols)||void 0===n?void 0:n.length)&&1===s.renderer.classBreakInfos.length)s.renderer.classBreakInfos[0].symbol=e.symbols[0];else if(2===(null===(i=e.symbols)||void 0===i?void 0:i.length)&&1===s.renderer.classBreakInfos.length){const e=b.esriLang.clone(y.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e}else if("single"===e.symbolStyle&&2===s.renderer.classBreakInfos.length){let e=b.esriLang.clone(y.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e.clone(),(0,l.r)(e,(0,l.t)(s.renderer.classBreakInfos[1].symbol)),s.renderer.classBreakInfos[1].symbol=e,s.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let e=b.esriLang.clone(y.classBreakInfos[0].symbol);s.renderer.classBreakInfos[0].symbol=e,s.renderer.classBreakInfos[1]&&(e=y.classBreakInfos[1]?b.esriLang.clone(y.classBreakInfos[1].symbol):b.esriLang.clone(y.classBreakInfos[0].symbol),s.renderer.classBreakInfos[1].symbol=e)}const a=(0,l.a)(s.renderer,"color");if(a){const e=new b.esriColor([0,0,0,.5]);(0,l.r)(s.renderer.classBreakInfos[0].symbol,e),s.renderer.classBreakInfos[1]&&(0,l.r)(s.renderer.classBreakInfos[1].symbol,e)}else p||a?((0,l.r)(s.renderer.classBreakInfos[0].symbol,o),s.renderer.classBreakInfos[1]&&(0,l.r)(s.renderer.classBreakInfos[1].symbol,r)):((0,l.r)(s.renderer.classBreakInfos[0].symbol,(0,l.t)(y.classBreakInfos[0].symbol)),(0,l.r)(s.renderer.classBreakInfos[1].symbol,(0,l.t)(y.classBreakInfos[1].symbol)))}else E||(1===(null===(r=e.symbols)||void 0===r?void 0:r.length)?s.renderer.classBreakInfos[0].symbol=e.symbols[0]:1===(null===(a=y.classBreakInfos)||void 0===a?void 0:a.length)&&(s.renderer.classBreakInfos[0].symbol=y.classBreakInfos[0].symbol));if(x&&E&&!R){const e=(0,l.a)(s.renderer,"size"),o=(0,l.a)(s.renderer,"color");e.stops=b.esriLang.clone(z.stops),o&&o.stops.forEach(((e,s)=>{e.value=z.stops[s].value})),2==s.renderer.classBreakInfos.length&&(s.renderer.classBreakInfos[0].maxValue=z.stops[2].value,s.renderer.classBreakInfos[1].minValue=z.stops[2].value)}if(q&&A&&p){const e=(0,l.a)(s.renderer,"color"),o=p.stops.length-1;e.stops.forEach(((e,s)=>{e.color=p.stops[o-s].color}))}if(L&&(s.renderer.defaultSymbol=L,s.renderer.defaultLabel=_),s.renderer.backgroundFillSymbol=P||void 0,M){const e=(0,l.a)(s.renderer,"size"),o=e.minSize;e.minSize=e.maxSize,e.maxSize=o}return Promise.resolve(s)}),(e=>Promise.reject(e)))}function t(){const{layer:e,mapView:s}=l.s,o=(0,l.h)(e),n=(0,l.a)(o,"color"),i=(0,l.a)(o,"size"),r=s.scale,{minSize:a,maxSize:t}=i;let d;if(i.stops)d=n.stops.map(((e,s)=>{const o=i.stops[s];return{color:e.color,size:o.size,value:o.value}}));else{const e=n.stops.length-1;if("number"==typeof a)d=n.stops.map(((s,o)=>({color:s.color,value:s.value,size:0===o?a:o===e?t:null})));else{let s,o;const l=a.stops.length-1;r>a.stops[l].value?(s=a.stops[l].size,o=t.stops[l].size):a.stops.forEach(((e,l)=>{r<=e.value&&(s=e.size,o=t.stops[l].size)}));const m=i.minDataValue,c=i.maxDataValue,u=(c-m)/4;d=n.stops.map(((l,n)=>({color:l.color,value:0===n?m:n===e?c:m+n*u,size:0===n?s:n===e?o:void 0})))}}return d}},5996:(e,s,o)=>{let l,n;function i(e){e.loading=!1}function r(e,s){return function(e){e.loading=!0,n=!1,l&&clearTimeout(l),l=setTimeout((()=>{i(e),n=!0}),6e4)}(s),e.then((e=>(i(s),n?Promise.reject(new Error("timeout")):Promise.resolve(e)))).catch((e=>(i(s),Promise.reject(e))))}o.d(s,{r:()=>r})}}]);