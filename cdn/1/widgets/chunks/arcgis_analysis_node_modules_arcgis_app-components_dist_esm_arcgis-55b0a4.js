/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-55b0a4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-55b0a4"],{10755:(e,r,t)=>{t.r(r),t.d(r,{arcgis_new_item_pages_locator_select:()=>p});var i=t(81149),o=t(49853),n=t(12846),l=t(73411),s=t(62824),a=t(20206),u=t(65804),c=t(79210),d=t(25145);t(70464),t(20164),t(69283),t(12046),t(74689),t(43237),t(78239),t(88780),t(70105),t(18762),t(49288),t(42577),t(30301),t(82102),t(13615),t(14192),t(52787),t(41487),t(50202);const v=["locator-view","locator"],p=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.handleAuthSwitchChange=e=>{this.storeAuth=e.detail},this.handleNewUrl=async e=>{const{type:r,url:t}=e;this.type=r,this.locatorUrl=t,this.isSecured=null,this.error=null,t&&(this.allowStoredAuth=!1,this.storeAuth=!1,this.loading=!0,await this.getServiceInfo(!1),this.loading=!1)},this.selectedLocatorType="locator-view",this.locatorUrl="",this.type=void 0,this.loading=!1,this.error=null,this.canPublishLocatorView=!0,this.allowStoredAuth=!1,this.storeAuth=!1,this.isSecured=null,this.serviceInfo=null,this.itemType=void 0}async componentWillLoad(){var e;const r=u.u.i18n;this.i18n=r.locatorSelect,this.urlTypeI18n=r.urlType,this.urlI18n=r.url,this.allowStoredAuth=a.a.allowStoredAuth,this.storeAuth=a.a.storeAuth,this.isSecured=a.a.isSecured,this.itemType=a.a.type;const{user:t,portal:i}=o.c;this.canPublishLocatorView=(0,l.i)(t,i),this.selectedLocatorType=null!==(e=a.a.locatorType)&&void 0!==e?e:"locator-view",this.canPublishLocatorView||(this.selectedLocatorType="locator"),"locator"===this.selectedLocatorType&&(this.locatorUrl=a.a.url)}async handleNext(){const{selectedLocatorType:e,urlI18n:r,locatorUrl:t,allowStoredAuth:i}=this;if(a.a.locatorType=e,"locator-view"===e){const e=await(0,l.q)();a.a.newItemMode="create",a.a.type="Geocoding Service",a.a.typeKeywords=["Geocoding filter"],a.a.thumbnailURL="https://static.arcgis.com/images/desktopapp.png",a.a.createAsServiceProxy=!0,a.a.url=e}else{if(!t)return this.inputRef.focusMainInput(),void(this.error=r.invalidUrl);const{portal:e}=o.c,{error:n,result:l}=(0,d.g)((0,d.f)(t,e.allSSL),e.isPortal);if(n)return void(this.error=r[n.code]);if("Geocoding Service"!==l)return void(this.error=r.invalidUrl);if(a.a.url=t,a.a.type="Geocoding Service",a.a.newItemMode="url",a.a.allowStoredAuth=i,a.a.storeAuth=this.storeAuth,a.a.isSecured=this.isSecured,a.a.serviceInfo=this.serviceInfo,this.storeAuth&&(a.a.checkAuth=!0),this.allowStoredAuth&&!this.storeAuth){this.loading=!0;const e=await this.getServiceInfo(!0);if(this.loading=!1,!e)return}}this.allowStoredAuth&&this.storeAuth?this.newItemUpdatePage.emit("auth"):this.newItemUpdatePage.emit("itemProperties")}async getServiceInfo(e=!1){const{urlTypeI18n:r,locatorUrl:t,type:i}=this,{error:o,result:l}=await(0,s.n)({url:t,customParameters:a.a.customParameters,type:i,checkAuth:e,storeAuth:a.a.storeAuth});if(o||!l)return"does not point to a GIS server"===(null==o?void 0:o.message)?this.error=r.serviceNotGIS:"serviceNotExist"===(null==o?void 0:o.code)?this.error=r.serviceNotExist:"unsupportedWFSVersion"===(null==o?void 0:o.code)?this.error=r.unsupportedWFSVersion:this.error=r[null==o?void 0:o.code]||r.serviceNotExist,!1;const{tags:u,title:d,isSecured:v,allowStoredAuth:p,serviceInfo:h}=l;return this.allowStoredAuth=p,this.isSecured=v,this.serviceInfo=h,u&&(n.i.tags=u),n.i.title=(null==d?void 0:d.replace(c.s,""))||"",!0}render(){const{error:e,i18n:r,urlTypeI18n:t,loading:n,selectedLocatorType:l,locatorUrl:s,canPublishLocatorView:u,isSecured:c,allowStoredAuth:d,itemType:p}=this,{config:{helpBase:h,helpMap:f}}=o.c;return(0,i.h)("div",null,u&&(0,i.h)(i.F,null,(0,i.h)("arcgis-new-item-description",{header:r.heading}),(0,i.h)("calcite-tile-select-group",{layout:"vertical",class:"tile-select"},v.map((e=>(0,i.h)("calcite-tile-select",{checked:l===e,heading:r.options[e].title,description:r.options[e].description,name:"tile-layer-type","input-enabled":!0,width:"full",type:"radio",value:e,onCalciteTileSelectChange:()=>this.selectedLocatorType=e}))))),"locator"===l&&(0,i.h)(i.F,null,(0,i.h)("arcgis-new-item-description",{header:r.url.heading,content:r.url.description}),(0,i.h)("arcgis-new-item-url",{url:s,inputTitle:" ",placeholder:"https://myserver.com/arcgis/rest/services/folder/service/GeocodeServer",onNewItemUrlChange:e=>this.handleNewUrl(e.detail),ref:e=>this.inputRef=e}),(0,i.h)("div",{class:"custom-parameter-container"},(0,i.h)("arcgis-new-item-custom-parameters",{itemType:p})),d&&!!c&&(0,i.h)("arcgis-new-item-switch-card",{onSwitchChange:this.handleAuthSwitchChange,header:t.storeAuth,headerLink:{text:t.learnMore,href:`${h}${f[120000597]}`},defaultChecked:a.a.storeAuth})),(0,i.h)("arcgis-new-item-loader",{active:n,text:t.getServiceInfo}),(0,i.h)("arcgis-new-item-alert",{active:!!e,description:e,onAlertDismiss:()=>this.error=null}))}get el(){return(0,i.d)(this)}};p.style=".tile-select:not(:last-child){margin-bottom:1.5rem}.custom-parameter-container{margin-top:1.5rem}"},69283:(e,r,t)=>{t.d(r,{a:()=>i,c:()=>n,e:()=>l,g:()=>o,l:()=>s});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,r,t){return e(t={path:r,exports:{},require:function(e,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}var l=n((function(e,r){!function(e){var r={Promise:"undefined"!=typeof window?window.Promise:void 0},t="4.24",i="next";function o(e){if(e.toLowerCase()===i)return i;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function n(e){return void 0===e&&(e=t),"https://js.arcgis.com/".concat(e,"/")}function l(e){return!e||o(e)?function(e){void 0===e&&(e=t);var r=n(e),l=o(e);if(l!==i&&3===l.major){var s=l.minor<=10?"js/":"";return"".concat(r).concat(s,"esri/css/esri.css")}return"".concat(r,"esri/themes/light/main.css")}(e):e}function s(e,r){var t=l(e),i=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return i||function(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(i=function(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}(t),r),i}var a={};function u(e,r,t){var i;t&&(i=function(e,r){var t=function(i){r(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var o=function(){r(e),e.removeEventListener("load",o,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",o,!1)}function c(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function v(e){void 0===e&&(e={});var t={};[a,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}));var i=t.version,o=t.url||n(i);return new r.Promise((function(e,r){var n=c();if(n){var l=n.getAttribute("src");l!==o?r(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):d()?e(n):u(n,e,r)}else if(d())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=t.css;a&&s(!0===a?i:a,t.insertCssBefore),u(n=function(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}(o),(function(){n.setAttribute("data-esri-loader","loaded"),e(n)}),r),document.body.appendChild(n)}}))}function p(e){return new r.Promise((function(r,t){var i=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.remove(),r(e)}))}))}e.utils=r,e.loadModules=function(e,r){if(void 0===r&&(r={}),d())return p(e);var t=c(),i=t&&t.getAttribute("src");return!r.url&&i&&(r.url=i),v(r).then((function(){return p(e)}))},e.getScript=c,e.isLoaded=d,e.loadScript=v,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(r)}));const s=async(e,r)=>(await l.loadModules(e,r)).map((e=>e.__esModule&&e.default?e.default:e))},12046:(e,r,t)=>{t.d(r,{a:()=>n,b:()=>a,c:()=>l,d:()=>c,e:()=>v,f:()=>d,g:()=>y,h:()=>u,i:()=>s,j:()=>p,k:()=>h,l:()=>w,m:()=>m,n:()=>f,o:()=>g,p:()=>b,q:()=>S});var i=t(74689);const o=e=>{var r,t,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(r=null==e?void 0:e.roleId)&&void 0!==r?r:null==e?void 0:e.id)&&void 0!==t?t:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function n(e){return e&&!e.orgId}function l(e){return!e.isPortal||!!e.isBackedBySDS}function s(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function a(e){return"org_admin"===o(e)||"account_admin"===o(e)}function u(e){return"org_user"===o(e)||"account_user"===o(e)}function c(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function d(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItemCategorySchema"))}function v(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateGroups"))}function p(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function h(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function m(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function g(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function y(e,r,t,i){const o=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),n=((null==r?void 0:r.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!r||!a(r)&&!n||!(null==t?void 0:t.isPortal)&&!o)}function S(e){return!!e&&(!c(e)||c(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const b=({items:e,user:r,portal:t})=>{const o=e[0],n=o.owner;if(t.isPortal&&n!==r.username&&n.includes("esri_")&&!["esri_livingatlas"].includes(n))return!1;const l=(0,i.u)(o,r),s=c(r),a=I(r),u=(0,i.c)(o,r)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(r)&&!s&&(function(e,r){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(r)||p(e)||h(e)||!!r.canSharePublic&&f(e)}(r,t)||I(r));return l||u||(0,i.d)(e,r)&&a};function I(e){return w(e)||m(e)||g(e)}},73411:(e,r,t)=>{t.d(r,{a:()=>T,b:()=>c,c:()=>A,d:()=>h,e:()=>f,f:()=>g,g:()=>d,h:()=>p,i:()=>w,j:()=>y,k:()=>I,l:()=>a,m:()=>P,n:()=>u,o:()=>_,p:()=>L,q:()=>l,r:()=>b,s:()=>S,t:()=>C,u:()=>x});var i=t(20164),o=t(12046),n=t(49853);async function l(){return new Promise((async e=>{const{portal:r}=n.c;if(null==r?void 0:r.isPortal){const t=r.helperServices.geocode,o=await function(e){const{config:r,portal:t}=n.c;return new Promise((async(o,n)=>{const l=e.filter((e=>s(e.url,t))).filter((e=>e.isEsriBatchGeocoder))[0];if(l){const e=l.url.split("/servers/")[1].split("/rest/services/")[0],t=`${r.restBaseUrl}/content/items/${e}`;try{o((await(0,i.r)(t)).url)}catch(e){n(e)}}else n("No world geocoder configured")}))}(t);e(o)}else{const t=function(e){const r=null==e?void 0:e.portalHostname;return-1!==r.indexOf("dev")?"dev":-1!==r.indexOf("qa")?"qa":""}(r);e(`https://geocode${t}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function s(e="",r){var t;const i=r.isPortal,o=e.toLowerCase(),n=o.indexOf("/geocodeserver")>-1&&o.indexOf("/rest/services/")>-1,l=i&&o.indexOf(null===(t=r.portalHostname)||void 0===t?void 0:t.toLowerCase())>-1,s=!i&&o.indexOf("utility")&&o.indexOf(".arcgis.com")>-1;return n&&(l||s)}function a(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function u(e){return(0,o.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}function c(e,r){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&(!r.isPortal||r.isBackedBySDS)}function d(e,r){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&(!r.isPortal||r.isBackedBySDS)}function v(e){return!(0,o.a)(e)&&!0}function p(e){var r;return!(0,o.a)(e)&&(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishScenes"))}const h=e=>!(0,o.a)(e);function f(e,r,t){var i,o;const n=!!(null===(o=null===(i=r.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===o?void 0:o.url),l=function(e,r,t){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(r.isPortal||m(t))}(e,r,t),s=r.isPortal?l:l||function(e,r,t){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!r.isPortal&&m(t)}(e,r,t);return n&&s}function m(e){return null==e?void 0:e.some((e=>{var r;return null===(r=e.entitlements)||void 0===r?void 0:r.some((e=>"image"===e.toLowerCase()))}))}async function g(e){var r;const{userLicensedItems:t}=await(0,i.r)(`${null!==(r=e.restUrl)&&void 0!==r?r:e.portalUrl}/community/self?returnUserLicensedItems=true`);return t}function w(e,r){var t,n;const l=null===(t=r.helperServices)||void 0===t?void 0:t.geocode.some((({url:e})=>s(e,r))),a=null!==(n=null==e?void 0:e.privileges)&&void 0!==n?n:[];return!(0,o.a)(e)&&l&&(!r.isPortal||!(0,i.i)(r)&&a.includes("portal:user:viewOrgItems")&&a.includes("portal:user:createItem"))}const y=e=>!(0,o.a)(e);function S(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function b(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function I(e,r){var t;return!!r.isPortal&&!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:registerDataStores"))}function P(e){return!(0,o.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}function A(e,r,t){return!r.isPortal&&c(e,r)&&function(e,r,t){return!(0,o.a)(e)&&!!r.supportsHostedServices&&a(e)&&(d(e,r)||c(e,r)||p(e)||v(e)||f(e,r,t))}(e,r,t)}function T(e,r,t){switch(r){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return c(e,t);case"Tile Package":return d(e,t);case"Vector Tile Package":return v(e);case"Scene Package":return p(e);case"Service Definition":return function(e,r){return c(e,r)&&d(e,r)}(e,t);default:return!0}}function _(e,r){var t,i,n;return(0,o.b)(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageCredits"))}(e)||!!((null!==(t=null==e?void 0:e.assignedCredits)&&void 0!==t?t:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.assignedCredits)>-1&&(null===(n=null==r?void 0:r.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const L=e=>!1;function C(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewGroups"))}function x(e){return(0,o.b)(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewUsers"))}(e)&&function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewItems"))}(e)&&(function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:reassignItems"))}(e))}}}]);