/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_geocod-babcba.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_geocod-babcba"],{8899:(e,i,n)=>{n.d(i,{a:()=>d,b:()=>f,c:()=>t,d:()=>S,e:()=>s,f:()=>v,g:()=>c,i:()=>m});var r=n(36238),a=n(12046),l=n(20206),o=n(73411);const t={WORLD:"World",EU:"Europe",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthélemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CD:"Congo, the Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Côte d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Réunion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Republic of Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function s(e,i){const{sourceCountry:n,locationType:r,analyzeResults:a,candidateFieldsType:o,coordinateFieldType:t,type:s,standardizedFieldNames:c,selectedFields:v}=l.a,p=d(),g=i?l.a.backupLayerFields:Object.values(v),m=Object.assign(Object.assign({locationType:r||"address",sourceCountry:n,candidateFieldsType:o},"coordinates"===r&&function(e,i){return e.reduce(((e,n)=>{switch(n.locationType){case"latitude":e.latitudeFieldName=n.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"longitude":e.longitudeFieldName=n.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"mgrs":"MGRS"===i&&(e.coordinateFieldName=n.name,i||(e.coordinateFieldType="MGRS"));break;case"usng":"USNG"===i&&(e.coordinateFieldName=n.name,i||(e.coordinateFieldType="USNG"))}return e}),{coordinateFieldType:i})}(g,t)),"address"===r&&{addressFields:u(g,e,c)});let S;return S=i||"Microsoft Excel"!==s?Object.assign(Object.assign({},a.publishParameters),m):Object.assign(Object.assign({},a.publishParameters),{layers:[Object.assign(Object.assign({},p),m)],hasStaticData:!0,maxRecordCount:2e3,layerInfo:{capabilities:"Query"}}),S}function u(e,i,n){if("Single"===i){const i=Object.keys(n)[0]||"Address",r=e.find((({locationType:e})=>e===i||"address"===(null==e?void 0:e.toLowerCase())));return{[i]:(null==r?void 0:r.name)||""}}return e.reduce(((e,i)=>("unknown"!==i.locationType&&(e[i.locationType]=i.name),e)),{})}function d(e,i){var n,r,a,o,t,s,u;const{type:d,analyzeResults:c=e,selectedSheet:v}=l.a,p=null==c?void 0:c.publishParameters;if(i)return"CSV"===d?null==p?void 0:p.layerInfo:null!==(r=null===(n=null==p?void 0:p.layers)||void 0===n?void 0:n[v])&&void 0!==r?r:null===(a=null==p?void 0:p.layers)||void 0===a?void 0:a[0];switch(d){case"Microsoft Excel":return null!==(t=null===(o=null==p?void 0:p.layers)||void 0===o?void 0:o[v])&&void 0!==t?t:null===(s=null==p?void 0:p.layers)||void 0===s?void 0:s[0];case"GeoJson":return null===(u=null==p?void 0:p.layers)||void 0===u?void 0:u[0];default:return null==p?void 0:p.layerInfo}}function c(e){switch(e){case"esriFieldTypeBigInteger":return["esriFieldTypeBigInteger","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSmallInteger":return["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeInteger":return["esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSingle":return["esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDouble":return["esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDate":return["esriFieldTypeDate","esriFieldTypeString"];case"esriFieldTypeDateOnly":return["esriFieldTypeDateOnly","esriFieldTypeString"];case"esriFieldTypeTimeOnly":return["esriFieldTypeTimeOnly","esriFieldTypeString"];case"esriFieldTypeTimestampOffset":return["esriFieldTypeTimestampOffset","esriFieldTypeString"];case"esriFieldTypeOID":return["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeString"];default:return["esriFieldTypeString"]}}function v(e,i){const n=null==i?void 0:i.filter((i=>i.url===e));return(null==n?void 0:n.length)?n.shift():null}function p(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com.*\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi))}function g(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi))}function m(e){return!!e&&(g(e)||p(e))}function S(e,i,n){let r=n||e||i||"";return r="wo"===(null==r?void 0:r.toLowerCase())?"world":r,t[r.toUpperCase()]||(r="world"),r}function f(e,i,n){var l;let t=(0,o.l)(i)&&(0,o.m)(i);const s=function(e,i,n){return e.filter((e=>{const a=Object.assign({},e),l=g(null==a?void 0:a.url),o=p(null==a?void 0:a.url);return(l||o)&&((0,r.i)(a.name)?"Esri World Geocoder"===a.name&&(a.name="ArcGIS World Geocoding Service"):a.name="ArcGIS World Geocoding Service"),(!l||!n&&!i)&&((0,r.i)(a.batch)?!!a.batch:l||o)}))}(e,!t,n),u=null===(l=s[0])||void 0===l?void 0:l.url;if(null==s?void 0:s.length){t=!0;const e=v(s[0].url,s),r=g(null==e?void 0:e.url),l=p(null==e?void 0:e.url),o=r||l;let d=o||!!e.batch;return{allowGeocode:(!(0,a.d)(i)||t)&&(!n&&d||n&&(!r||l)&&d),isAgoWorldGeocodeServer:r,isServiceProxyAgoWorldGeocodeServer:l,isWorldGeocodeServer:o,geocodeServers:s,geocodeServiceUrl:u}}return null}},12046:(e,i,n)=>{n.d(i,{a:()=>l,b:()=>s,c:()=>o,d:()=>d,e:()=>v,f:()=>c,g:()=>T,h:()=>u,i:()=>t,j:()=>p,k:()=>g,l:()=>y,m:()=>S,n:()=>m,o:()=>f,p:()=>h,q:()=>b});var r=n(74689);const a=e=>{var i,n,r;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==n?n:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id};function l(e){return e&&!e.orgId}function o(e){return!e.isPortal||!!e.isBackedBySDS}function t(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function s(e){return"org_admin"===a(e)||"account_admin"===a(e)}function u(e){return"org_user"===a(e)||"account_user"===a(e)}function d(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function c(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function v(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function p(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function g(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function m(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function y(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function T(e,i,n,r){const a=r&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(r.type),l=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!s(i)&&!l||!(null==n?void 0:n.isPortal)&&!a)}function b(e){return!!e&&(!d(e)||d(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const h=({items:e,user:i,portal:n})=>{const a=e[0],l=a.owner;if(n.isPortal&&l!==i.username&&l.includes("esri_")&&!["esri_livingatlas"].includes(l))return!1;const o=(0,r.u)(a,i),t=d(i),s=F(i),u=(0,r.c)(a,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!t&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||p(e)||g(e)||!!i.canSharePublic&&m(e)}(i,n)||F(i));return o||u||(0,r.d)(e,i)&&s};function F(e){return y(e)||S(e)||f(e)}},73411:(e,i,n)=>{n.d(i,{a:()=>G,b:()=>d,c:()=>M,d:()=>g,e:()=>m,f:()=>f,g:()=>c,h:()=>p,i:()=>y,j:()=>T,k:()=>F,l:()=>s,m:()=>I,n:()=>u,o:()=>C,p:()=>P,q:()=>o,r:()=>h,s:()=>b,t:()=>B,u:()=>A});var r=n(20164),a=n(12046),l=n(49853);async function o(){return new Promise((async e=>{const{portal:i}=l.c;if(null==i?void 0:i.isPortal){const n=i.helperServices.geocode,a=await function(e){const{config:i,portal:n}=l.c;return new Promise((async(a,l)=>{const o=e.filter((e=>t(e.url,n))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],n=`${i.restBaseUrl}/content/items/${e}`;try{a((await(0,r.r)(n)).url)}catch(e){l(e)}}else l("No world geocoder configured")}))}(n);e(a)}else{const n=function(e){const i=null==e?void 0:e.portalHostname;return-1!==i.indexOf("dev")?"dev":-1!==i.indexOf("qa")?"qa":""}(i);e(`https://geocode${n}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function t(e="",i){var n;const r=i.isPortal,a=e.toLowerCase(),l=a.indexOf("/geocodeserver")>-1&&a.indexOf("/rest/services/")>-1,o=r&&a.indexOf(null===(n=i.portalHostname)||void 0===n?void 0:n.toLowerCase())>-1,t=!r&&a.indexOf("utility")&&a.indexOf(".arcgis.com")>-1;return l&&(o||t)}function s(e){return(0,a.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function u(e){return(0,a.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}function d(e,i){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&(!i.isPortal||i.isBackedBySDS)}function c(e,i){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&(!i.isPortal||i.isBackedBySDS)}function v(e){return!(0,a.a)(e)&&!0}function p(e){var i;return!(0,a.a)(e)&&(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishScenes"))}const g=e=>!(0,a.a)(e);function m(e,i,n){var r,a;const l=!!(null===(a=null===(r=i.helperServices)||void 0===r?void 0:r.rasterAnalytics)||void 0===a?void 0:a.url),o=function(e,i,n){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishDynamicImagery"))&&(i.isPortal||S(n))}(e,i,n),t=i.isPortal?o:o||function(e,i,n){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishTiledImagery"))&&!i.isPortal&&S(n)}(e,i,n);return l&&t}function S(e){return null==e?void 0:e.some((e=>{var i;return null===(i=e.entitlements)||void 0===i?void 0:i.some((e=>"image"===e.toLowerCase()))}))}async function f(e){var i;const{userLicensedItems:n}=await(0,r.r)(`${null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl}/community/self?returnUserLicensedItems=true`);return n}function y(e,i){var n,l;const o=null===(n=i.helperServices)||void 0===n?void 0:n.geocode.some((({url:e})=>t(e,i))),s=null!==(l=null==e?void 0:e.privileges)&&void 0!==l?l:[];return!(0,a.a)(e)&&o&&(!i.isPortal||!(0,r.i)(i)&&s.includes("portal:user:viewOrgItems")&&s.includes("portal:user:createItem"))}const T=e=>!(0,a.a)(e);function b(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function h(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function F(e,i){var n;return!!i.isPortal&&!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:registerDataStores"))}function I(e){return!(0,a.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}function M(e,i,n){return!i.isPortal&&d(e,i)&&function(e,i,n){return!(0,a.a)(e)&&!!i.supportsHostedServices&&s(e)&&(c(e,i)||d(e,i)||p(e)||v(e)||m(e,i,n))}(e,i,n)}function G(e,i,n){switch(i){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return d(e,n);case"Tile Package":return c(e,n);case"Vector Tile Package":return v(e);case"Scene Package":return p(e);case"Service Definition":return function(e,i){return d(e,i)&&c(e,i)}(e,n);default:return!0}}function C(e,i){var n,r,l;return(0,a.b)(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageCredits"))}(e)||!!((null!==(n=null==e?void 0:e.assignedCredits)&&void 0!==n?n:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.assignedCredits)>-1&&(null===(l=null==i?void 0:i.portalProperties)||void 0===l?void 0:l.showCreditsOnProfile))}const P=e=>!1;function B(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))}function A(e){return(0,a.b)(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))}(e)&&function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewItems"))}(e)&&(function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:reassignItems"))}(e))}}}]);