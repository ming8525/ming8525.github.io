"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-50f4ee"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js":
/*!****************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ DefaultLocale),
/* harmony export */   S: () => (/* binding */ SupportedLocales),
/* harmony export */   a: () => (/* binding */ getDirectionBasedOnRTL),
/* harmony export */   b: () => (/* binding */ fetchComponentLocaleStrings),
/* harmony export */   f: () => (/* binding */ formatLocalizedHelpUrl),
/* harmony export */   g: () => (/* binding */ getLocaleInfo)
/* harmony export */ });
/**
 * Locale list reference [JSAPI](https://devtopia.esri.com/WebGIS/arcgis-js-api/tree/master/esri/nls)
 * also has Hindi: "hi"
 */
const SupportedLocales = {
    Arabic: "ar",
    Bosnian: "bs",
    Bulgarian: "bg",
    Catalan: "ca",
    Czech: "cs",
    Danish: "da",
    German: "de",
    Greek: "el",
    English: "en",
    EnglishUSA: "en-US",
    Spanish: "es",
    Estonian: "et",
    Finnish: "fi",
    French: "fr",
    Hebrew: "he",
    Hindi: "hi",
    Croatian: "hr",
    Hungarian: "hu",
    Indonesian: "id",
    Italian: "it",
    Japanese: "ja",
    Korean: "ko",
    Lithuanian: "lt",
    Latvian: "lv",
    NorwegianBokml: "nb",
    Dutch: "nl",
    Polish: "pl",
    PortugueseBrazil: "pt-BR",
    PortuguesePortugal: "pt-PT",
    Romanian: "ro",
    Russian: "ru",
    Serbian: "sr",
    Slovenian: "sl",
    Slovak: "sk",
    Swedish: "sv",
    Thai: "th",
    Turkish: "tr",
    Ukrainian: "uk",
    Vietnamese: "vi",
    ChineseChina: "zh-CN",
    ChineseHongKong: "zh-HK",
    ChineseTaiwan: "zh-TW"
};
const SupportedOnlineHelpLocales = ["ar", "de", "es", "fr", "it", "ja", "ko", "ru", "pl", "pt-br", "zh-cn"];
const LocaleMap = {
    "en-AU": "en",
    "en-CA": "en",
    "en-GB": "en",
    "en-US": "en",
    "es-ES": "es",
    "es-MX": "es",
    "de-CH": "de",
    "de-AT": "de",
    "de-DE": "de",
    "fr-CH": "fr",
    "fr-FR": "fr",
    "it-CH": "it",
    "it-IT": "it",
    ind: "id",
    ukr: "uk"
};
/**
 * List of supported locales that are RTL
 * reference: https://devtopia.esri.com/WebGIS/arcgis-js-api/blob/4master/esri/intl/locale.ts
 */
const RTLLocales = [SupportedLocales.Arabic, SupportedLocales.Hebrew];
const DefaultLocale = SupportedLocales.English;
/**
 * Utility to centralize logic, and return "rtl" or "rtl" depending on rtl boolean
 * @param {boolean} rtl whether locale is in Right to Left direction
 * @returns {"ltr" | "rtl"} codes that can be passed to "dir" prop of a component.
 */
function getDirectionBasedOnRTL(rtl) {
    return rtl === true ? "rtl" : "ltr";
}
/**
 * Helper function to find the closest element crossing multiple (parent) shadowDOM boundaries.
 * The implementation is based on [this](https://stackoverflow.com/questions/54520554/custom-element-getrootnode-closest-function-crossing-multiple-parent-shadowd) solution.
 *
 * @param {string} selector
 * @param {Element} base
 */
function getClosestElement(selector, base) {
    function closestFrom(el) {
        let element;
        if (el === undefined || el === document || el === window)
            element = null;
        else {
            const found = el.closest(selector);
            element = found || closestFrom(el.getRootNode().host);
        }
        return element;
    }
    return closestFrom(base);
}
/**
 * Converts the given locale to a supported locale using the provided locale map.
 *
 * @param {string | undefined} locale - The locale to be converted.
 * @param {object} localeMap - A map of locales to supported locales.
 * @returns {string} - The supported locale.
 */
function convertToSupportedLocale(locale, localeMap) {
    const defaultLocale = DefaultLocale;
    let localeSanitized = locale?.toLowerCase();
    if (localeSanitized !== undefined && localeSanitized.indexOf("-") !== -1) {
        const [lang, region] = localeSanitized.split("-");
        localeSanitized = `${lang}-${region.toUpperCase()}`;
    }
    if (!localeSanitized) {
        return defaultLocale;
    }
    const localeMapKeys = Object.keys(LocaleMap);
    if (localeMapKeys.includes(localeSanitized) === true) {
        return localeMap[localeSanitized];
    }
    return localeSanitized;
}
/**
 * Retrieves locale information; In the case of Regional codes (en-au) it is converted to a supported locale (en).
 *
 * @param {Element} [element=document.documentElement] - The element to search for locale information.
 * @returns {Object} An object containing the locale information.
 * @property {string} locale - The locale code.
 * @property {boolean} rtl - A flag indicating whether the locale is right-to-left.
 */
function getLocaleInfo(element = document.documentElement) {
    // Gets the closest element with a lang attribute and falls back to navigator.language if not found
    const closestElement = getClosestElement("[lang]", element);
    const locale = closestElement?.lang ?? window.navigator.language;
    const supportedLocales = Object.values(SupportedLocales);
    const defaultLocale = DefaultLocale;
    const convertedLocale = convertToSupportedLocale(locale, LocaleMap);
    const isSupportedLocale = supportedLocales.includes(convertedLocale);
    return {
        locale: isSupportedLocale ? convertedLocale : defaultLocale,
        rtl: RTLLocales.includes(locale)
    };
}
/**
 * Fetches the locale file of the given component; defaults to `"en"` locale
 * @param componentName
 * @param props
 * @param locale
 * @param resourcesUrl
 * @param props.path
 * @param props.locale
 * @param props.baseURL
 */
async function fetchLocaleStrings(props) {
    const { path, locale, baseURL } = props;
    // Using the getPublicPath method that leverages `data-resources-url` currently this is not working.
    // const rUrl = getPublicPath(componentName) || resourcesUrl;
    let localeData = {};
    try {
        const response = await fetch(`${baseURL}t9n/${path}.t9n.${locale}.json`);
        localeData = await response.json();
    }
    catch (e) {
        const defaultResponse = await fetch(`${baseURL}t9n/${path}.t9n.${DefaultLocale}.json`);
        localeData = await defaultResponse.json();
    }
    return localeData;
}
async function fetchComponentLocaleStrings(element, baseURL) {
    const componentName = element.tagName.toLowerCase();
    const { locale, rtl } = getLocaleInfo(element);
    const strings = await fetchLocaleStrings({ path: componentName, locale, baseURL });
    return { strings, dir: getDirectionBasedOnRTL(rtl), locale: locale };
}
/**
 * Formats a URL to link to
 * @param {string} url the url string from after the locale
 * @param {string} basePath the base path from the signed in portal object.
 * @param {string} locale the locale abbreviation for the browser.
 * @returns {string} the formatted url.
 */
function formatLocalizedHelpUrl(url, basePath, locale = "en") {
    let localeSanitized = locale;
    const localeMapKeys = Object.keys(LocaleMap);
    if (localeMapKeys.includes(locale) === true) {
        localeSanitized = LocaleMap[locale];
    }
    const localeInLowerCase = localeSanitized.toLocaleLowerCase();
    if (SupportedOnlineHelpLocales.includes(localeInLowerCase) === true) {
        // following regex tests /en/ is present in url and replaces it with the locale
        // https://docdev.arcgis.com/en/arcgis-online/analyze/aggregate-points-mv.htm
        // self Response only provides with `en` locale not as per the user locale or current app locale
        // so we need this replace call.
        basePath = basePath.replace(/^https?:\/\/[^/]+\/en/, (match) => match.replace("en", localeInLowerCase));
    }
    const learnMoreUrl = `${basePath}analyze/${url}`;
    return learnMoreUrl;
}



//# sourceMappingURL=localization-helper-4819b67d.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-close-without-saving-modal.entry.js":
/*!************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-close-without-saving-modal.entry.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_close_without_saving_modal: () => (/* binding */ RFxCloseWithoutSavingModal)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _Uint8Array_68e1e3f9_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./_Uint8Array-68e1e3f9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_Uint8Array-68e1e3f9.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");




















const rfxCloseWithoutSavingModalCss = "";

const RFxCloseWithoutSavingModal = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rftTitle = "Raster Function Template 1";
        this.handleClose = undefined;
        this.handleDontSave = undefined;
        this.handleSave = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    async componentWillLoad() {
        ({ strings: this.strings, dir: this.direction } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(".")));
        this.setupInitialState();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    setupInitialState() { }
    render() {
        const content = (0,_common_fda1462e_js__WEBPACK_IMPORTED_MODULE_9__.f)(this.strings.content, { rftTitle: this.rftTitle });
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-modal", { "aria-labelledby": "modal-title", id: "continue-without-saving", kind: "danger", open: true, "outside-close-disabled": true, scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.C.m, widthScale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.C.s }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "header", id: "modal-title" }, this.strings.header), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "content" }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, content)), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { slot: "back", kind: "neutral", width: "full", onClick: this.handleSave }, this.strings.cancel), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { slot: "secondary", width: "full", appearance: "outline", onClick: this.handleDontSave }, this.strings.dontSave), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { slot: "primary", width: "full", onClick: this.handleClose }, this.strings.save)));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};
RFxCloseWithoutSavingModal.style = rfxCloseWithoutSavingModalCss;



//# sourceMappingURL=rfx-close-without-saving-modal.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLTUwZjRlZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxRQUFRO0FBQ25CLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsS0FBSyxHQUFHLHFCQUFxQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQixjQUFjLFFBQVE7QUFDdEIsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxRQUFRLE1BQU0sS0FBSyxPQUFPLE9BQU87QUFDekU7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVEsTUFBTSxLQUFLLE9BQU8sY0FBYztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUIsK0NBQStDLHNDQUFzQztBQUNyRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixTQUFTLFVBQVUsSUFBSTtBQUNuRDtBQUNBOztBQUVxSzs7QUFFcks7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzFNbUc7QUFDZDtBQUNsRDtBQUN3QjtBQUNUO0FBQ1g7QUFDRDtBQUNPO0FBQ2tCO0FBQ0w7QUFDQztBQUNGO0FBQzFCO0FBQ087QUFDSztBQUNWO0FBQ1U7QUFDUjtBQUNKOztBQUUvQjs7QUFFQTtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkNBQTZDLFFBQVEsbUVBQTJCLG1CQUFtQixxREFBWTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQWEseUJBQXlCLHlCQUF5QjtBQUN2RixnQkFBZ0IscURBQUMsb0JBQW9CLG9JQUFvSSxvREFBWSxnQkFBZ0Isb0RBQVksSUFBSSxFQUFFLHFEQUFDLFVBQVUsbUNBQW1DLHdCQUF3QixxREFBQyxVQUFVLGlCQUFpQixFQUFFLHFEQUFDLG1DQUFtQyxxREFBQyxxQkFBcUIsd0VBQXdFLHdCQUF3QixxREFBQyxxQkFBcUIsdUZBQXVGLDBCQUEwQixxREFBQyxxQkFBcUIsMkRBQTJEO0FBQzdxQjtBQUNBLDhCQUE4QjtBQUM5Qix3QkFBd0IsT0FBTyxxREFBVTtBQUN6QztBQUNBOztBQUV3RTs7QUFFeEU7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4RTs7QUFFOUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS9sb2NhbGl6YXRpb24taGVscGVyLTQ4MTliNjdkLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jbG9zZS13aXRob3V0LXNhdmluZy1tb2RhbC5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExvY2FsZSBsaXN0IHJlZmVyZW5jZSBbSlNBUEldKGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1qcy1hcGkvdHJlZS9tYXN0ZXIvZXNyaS9ubHMpXG4gKiBhbHNvIGhhcyBIaW5kaTogXCJoaVwiXG4gKi9cbmNvbnN0IFN1cHBvcnRlZExvY2FsZXMgPSB7XG4gICAgQXJhYmljOiBcImFyXCIsXG4gICAgQm9zbmlhbjogXCJic1wiLFxuICAgIEJ1bGdhcmlhbjogXCJiZ1wiLFxuICAgIENhdGFsYW46IFwiY2FcIixcbiAgICBDemVjaDogXCJjc1wiLFxuICAgIERhbmlzaDogXCJkYVwiLFxuICAgIEdlcm1hbjogXCJkZVwiLFxuICAgIEdyZWVrOiBcImVsXCIsXG4gICAgRW5nbGlzaDogXCJlblwiLFxuICAgIEVuZ2xpc2hVU0E6IFwiZW4tVVNcIixcbiAgICBTcGFuaXNoOiBcImVzXCIsXG4gICAgRXN0b25pYW46IFwiZXRcIixcbiAgICBGaW5uaXNoOiBcImZpXCIsXG4gICAgRnJlbmNoOiBcImZyXCIsXG4gICAgSGVicmV3OiBcImhlXCIsXG4gICAgSGluZGk6IFwiaGlcIixcbiAgICBDcm9hdGlhbjogXCJoclwiLFxuICAgIEh1bmdhcmlhbjogXCJodVwiLFxuICAgIEluZG9uZXNpYW46IFwiaWRcIixcbiAgICBJdGFsaWFuOiBcIml0XCIsXG4gICAgSmFwYW5lc2U6IFwiamFcIixcbiAgICBLb3JlYW46IFwia29cIixcbiAgICBMaXRodWFuaWFuOiBcImx0XCIsXG4gICAgTGF0dmlhbjogXCJsdlwiLFxuICAgIE5vcndlZ2lhbkJva21sOiBcIm5iXCIsXG4gICAgRHV0Y2g6IFwibmxcIixcbiAgICBQb2xpc2g6IFwicGxcIixcbiAgICBQb3J0dWd1ZXNlQnJhemlsOiBcInB0LUJSXCIsXG4gICAgUG9ydHVndWVzZVBvcnR1Z2FsOiBcInB0LVBUXCIsXG4gICAgUm9tYW5pYW46IFwicm9cIixcbiAgICBSdXNzaWFuOiBcInJ1XCIsXG4gICAgU2VyYmlhbjogXCJzclwiLFxuICAgIFNsb3ZlbmlhbjogXCJzbFwiLFxuICAgIFNsb3ZhazogXCJza1wiLFxuICAgIFN3ZWRpc2g6IFwic3ZcIixcbiAgICBUaGFpOiBcInRoXCIsXG4gICAgVHVya2lzaDogXCJ0clwiLFxuICAgIFVrcmFpbmlhbjogXCJ1a1wiLFxuICAgIFZpZXRuYW1lc2U6IFwidmlcIixcbiAgICBDaGluZXNlQ2hpbmE6IFwiemgtQ05cIixcbiAgICBDaGluZXNlSG9uZ0tvbmc6IFwiemgtSEtcIixcbiAgICBDaGluZXNlVGFpd2FuOiBcInpoLVRXXCJcbn07XG5jb25zdCBTdXBwb3J0ZWRPbmxpbmVIZWxwTG9jYWxlcyA9IFtcImFyXCIsIFwiZGVcIiwgXCJlc1wiLCBcImZyXCIsIFwiaXRcIiwgXCJqYVwiLCBcImtvXCIsIFwicnVcIiwgXCJwbFwiLCBcInB0LWJyXCIsIFwiemgtY25cIl07XG5jb25zdCBMb2NhbGVNYXAgPSB7XG4gICAgXCJlbi1BVVwiOiBcImVuXCIsXG4gICAgXCJlbi1DQVwiOiBcImVuXCIsXG4gICAgXCJlbi1HQlwiOiBcImVuXCIsXG4gICAgXCJlbi1VU1wiOiBcImVuXCIsXG4gICAgXCJlcy1FU1wiOiBcImVzXCIsXG4gICAgXCJlcy1NWFwiOiBcImVzXCIsXG4gICAgXCJkZS1DSFwiOiBcImRlXCIsXG4gICAgXCJkZS1BVFwiOiBcImRlXCIsXG4gICAgXCJkZS1ERVwiOiBcImRlXCIsXG4gICAgXCJmci1DSFwiOiBcImZyXCIsXG4gICAgXCJmci1GUlwiOiBcImZyXCIsXG4gICAgXCJpdC1DSFwiOiBcIml0XCIsXG4gICAgXCJpdC1JVFwiOiBcIml0XCIsXG4gICAgaW5kOiBcImlkXCIsXG4gICAgdWtyOiBcInVrXCJcbn07XG4vKipcbiAqIExpc3Qgb2Ygc3VwcG9ydGVkIGxvY2FsZXMgdGhhdCBhcmUgUlRMXG4gKiByZWZlcmVuY2U6IGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1qcy1hcGkvYmxvYi80bWFzdGVyL2VzcmkvaW50bC9sb2NhbGUudHNcbiAqL1xuY29uc3QgUlRMTG9jYWxlcyA9IFtTdXBwb3J0ZWRMb2NhbGVzLkFyYWJpYywgU3VwcG9ydGVkTG9jYWxlcy5IZWJyZXddO1xuY29uc3QgRGVmYXVsdExvY2FsZSA9IFN1cHBvcnRlZExvY2FsZXMuRW5nbGlzaDtcbi8qKlxuICogVXRpbGl0eSB0byBjZW50cmFsaXplIGxvZ2ljLCBhbmQgcmV0dXJuIFwicnRsXCIgb3IgXCJydGxcIiBkZXBlbmRpbmcgb24gcnRsIGJvb2xlYW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcnRsIHdoZXRoZXIgbG9jYWxlIGlzIGluIFJpZ2h0IHRvIExlZnQgZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7XCJsdHJcIiB8IFwicnRsXCJ9IGNvZGVzIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBcImRpclwiIHByb3Agb2YgYSBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIGdldERpcmVjdGlvbkJhc2VkT25SVEwocnRsKSB7XG4gICAgcmV0dXJuIHJ0bCA9PT0gdHJ1ZSA/IFwicnRsXCIgOiBcImx0clwiO1xufVxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZmluZCB0aGUgY2xvc2VzdCBlbGVtZW50IGNyb3NzaW5nIG11bHRpcGxlIChwYXJlbnQpIHNoYWRvd0RPTSBib3VuZGFyaWVzLlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGJhc2VkIG9uIFt0aGlzXShodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NDUyMDU1NC9jdXN0b20tZWxlbWVudC1nZXRyb290bm9kZS1jbG9zZXN0LWZ1bmN0aW9uLWNyb3NzaW5nLW11bHRpcGxlLXBhcmVudC1zaGFkb3dkKSBzb2x1dGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7RWxlbWVudH0gYmFzZVxuICovXG5mdW5jdGlvbiBnZXRDbG9zZXN0RWxlbWVudChzZWxlY3RvciwgYmFzZSkge1xuICAgIGZ1bmN0aW9uIGNsb3Nlc3RGcm9tKGVsKSB7XG4gICAgICAgIGxldCBlbGVtZW50O1xuICAgICAgICBpZiAoZWwgPT09IHVuZGVmaW5lZCB8fCBlbCA9PT0gZG9jdW1lbnQgfHwgZWwgPT09IHdpbmRvdylcbiAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gZWwuY2xvc2VzdChzZWxlY3Rvcik7XG4gICAgICAgICAgICBlbGVtZW50ID0gZm91bmQgfHwgY2xvc2VzdEZyb20oZWwuZ2V0Um9vdE5vZGUoKS5ob3N0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIGNsb3Nlc3RGcm9tKGJhc2UpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gbG9jYWxlIHRvIGEgc3VwcG9ydGVkIGxvY2FsZSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxlIG1hcC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZyB8IHVuZGVmaW5lZH0gbG9jYWxlIC0gVGhlIGxvY2FsZSB0byBiZSBjb252ZXJ0ZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gbG9jYWxlTWFwIC0gQSBtYXAgb2YgbG9jYWxlcyB0byBzdXBwb3J0ZWQgbG9jYWxlcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIHN1cHBvcnRlZCBsb2NhbGUuXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRUb1N1cHBvcnRlZExvY2FsZShsb2NhbGUsIGxvY2FsZU1hcCkge1xuICAgIGNvbnN0IGRlZmF1bHRMb2NhbGUgPSBEZWZhdWx0TG9jYWxlO1xuICAgIGxldCBsb2NhbGVTYW5pdGl6ZWQgPSBsb2NhbGU/LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvY2FsZVNhbml0aXplZCAhPT0gdW5kZWZpbmVkICYmIGxvY2FsZVNhbml0aXplZC5pbmRleE9mKFwiLVwiKSAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgW2xhbmcsIHJlZ2lvbl0gPSBsb2NhbGVTYW5pdGl6ZWQuc3BsaXQoXCItXCIpO1xuICAgICAgICBsb2NhbGVTYW5pdGl6ZWQgPSBgJHtsYW5nfS0ke3JlZ2lvbi50b1VwcGVyQ2FzZSgpfWA7XG4gICAgfVxuICAgIGlmICghbG9jYWxlU2FuaXRpemVkKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0TG9jYWxlO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbGVNYXBLZXlzID0gT2JqZWN0LmtleXMoTG9jYWxlTWFwKTtcbiAgICBpZiAobG9jYWxlTWFwS2V5cy5pbmNsdWRlcyhsb2NhbGVTYW5pdGl6ZWQpID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVNYXBbbG9jYWxlU2FuaXRpemVkXTtcbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsZVNhbml0aXplZDtcbn1cbi8qKlxuICogUmV0cmlldmVzIGxvY2FsZSBpbmZvcm1hdGlvbjsgSW4gdGhlIGNhc2Ugb2YgUmVnaW9uYWwgY29kZXMgKGVuLWF1KSBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdXBwb3J0ZWQgbG9jYWxlIChlbikuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBbZWxlbWVudD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdIC0gVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvciBsb2NhbGUgaW5mb3JtYXRpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgbG9jYWxlIGluZm9ybWF0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxvY2FsZSAtIFRoZSBsb2NhbGUgY29kZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcnRsIC0gQSBmbGFnIGluZGljYXRpbmcgd2hldGhlciB0aGUgbG9jYWxlIGlzIHJpZ2h0LXRvLWxlZnQuXG4gKi9cbmZ1bmN0aW9uIGdldExvY2FsZUluZm8oZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuICAgIC8vIEdldHMgdGhlIGNsb3Nlc3QgZWxlbWVudCB3aXRoIGEgbGFuZyBhdHRyaWJ1dGUgYW5kIGZhbGxzIGJhY2sgdG8gbmF2aWdhdG9yLmxhbmd1YWdlIGlmIG5vdCBmb3VuZFxuICAgIGNvbnN0IGNsb3Nlc3RFbGVtZW50ID0gZ2V0Q2xvc2VzdEVsZW1lbnQoXCJbbGFuZ11cIiwgZWxlbWVudCk7XG4gICAgY29uc3QgbG9jYWxlID0gY2xvc2VzdEVsZW1lbnQ/LmxhbmcgPz8gd2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICBjb25zdCBzdXBwb3J0ZWRMb2NhbGVzID0gT2JqZWN0LnZhbHVlcyhTdXBwb3J0ZWRMb2NhbGVzKTtcbiAgICBjb25zdCBkZWZhdWx0TG9jYWxlID0gRGVmYXVsdExvY2FsZTtcbiAgICBjb25zdCBjb252ZXJ0ZWRMb2NhbGUgPSBjb252ZXJ0VG9TdXBwb3J0ZWRMb2NhbGUobG9jYWxlLCBMb2NhbGVNYXApO1xuICAgIGNvbnN0IGlzU3VwcG9ydGVkTG9jYWxlID0gc3VwcG9ydGVkTG9jYWxlcy5pbmNsdWRlcyhjb252ZXJ0ZWRMb2NhbGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGxvY2FsZTogaXNTdXBwb3J0ZWRMb2NhbGUgPyBjb252ZXJ0ZWRMb2NhbGUgOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgICBydGw6IFJUTExvY2FsZXMuaW5jbHVkZXMobG9jYWxlKVxuICAgIH07XG59XG4vKipcbiAqIEZldGNoZXMgdGhlIGxvY2FsZSBmaWxlIG9mIHRoZSBnaXZlbiBjb21wb25lbnQ7IGRlZmF1bHRzIHRvIGBcImVuXCJgIGxvY2FsZVxuICogQHBhcmFtIGNvbXBvbmVudE5hbWVcbiAqIEBwYXJhbSBwcm9wc1xuICogQHBhcmFtIGxvY2FsZVxuICogQHBhcmFtIHJlc291cmNlc1VybFxuICogQHBhcmFtIHByb3BzLnBhdGhcbiAqIEBwYXJhbSBwcm9wcy5sb2NhbGVcbiAqIEBwYXJhbSBwcm9wcy5iYXNlVVJMXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTG9jYWxlU3RyaW5ncyhwcm9wcykge1xuICAgIGNvbnN0IHsgcGF0aCwgbG9jYWxlLCBiYXNlVVJMIH0gPSBwcm9wcztcbiAgICAvLyBVc2luZyB0aGUgZ2V0UHVibGljUGF0aCBtZXRob2QgdGhhdCBsZXZlcmFnZXMgYGRhdGEtcmVzb3VyY2VzLXVybGAgY3VycmVudGx5IHRoaXMgaXMgbm90IHdvcmtpbmcuXG4gICAgLy8gY29uc3QgclVybCA9IGdldFB1YmxpY1BhdGgoY29tcG9uZW50TmFtZSkgfHwgcmVzb3VyY2VzVXJsO1xuICAgIGxldCBsb2NhbGVEYXRhID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVVJMfXQ5bi8ke3BhdGh9LnQ5bi4ke2xvY2FsZX0uanNvbmApO1xuICAgICAgICBsb2NhbGVEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBkZWZhdWx0UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVVJMfXQ5bi8ke3BhdGh9LnQ5bi4ke0RlZmF1bHRMb2NhbGV9Lmpzb25gKTtcbiAgICAgICAgbG9jYWxlRGF0YSA9IGF3YWl0IGRlZmF1bHRSZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbGVEYXRhO1xufVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb21wb25lbnRMb2NhbGVTdHJpbmdzKGVsZW1lbnQsIGJhc2VVUkwpIHtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgeyBsb2NhbGUsIHJ0bCB9ID0gZ2V0TG9jYWxlSW5mbyhlbGVtZW50KTtcbiAgICBjb25zdCBzdHJpbmdzID0gYXdhaXQgZmV0Y2hMb2NhbGVTdHJpbmdzKHsgcGF0aDogY29tcG9uZW50TmFtZSwgbG9jYWxlLCBiYXNlVVJMIH0pO1xuICAgIHJldHVybiB7IHN0cmluZ3MsIGRpcjogZ2V0RGlyZWN0aW9uQmFzZWRPblJUTChydGwpLCBsb2NhbGU6IGxvY2FsZSB9O1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgVVJMIHRvIGxpbmsgdG9cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgdGhlIHVybCBzdHJpbmcgZnJvbSBhZnRlciB0aGUgbG9jYWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVBhdGggdGhlIGJhc2UgcGF0aCBmcm9tIHRoZSBzaWduZWQgaW4gcG9ydGFsIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbGUgdGhlIGxvY2FsZSBhYmJyZXZpYXRpb24gZm9yIHRoZSBicm93c2VyLlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIGZvcm1hdHRlZCB1cmwuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdExvY2FsaXplZEhlbHBVcmwodXJsLCBiYXNlUGF0aCwgbG9jYWxlID0gXCJlblwiKSB7XG4gICAgbGV0IGxvY2FsZVNhbml0aXplZCA9IGxvY2FsZTtcbiAgICBjb25zdCBsb2NhbGVNYXBLZXlzID0gT2JqZWN0LmtleXMoTG9jYWxlTWFwKTtcbiAgICBpZiAobG9jYWxlTWFwS2V5cy5pbmNsdWRlcyhsb2NhbGUpID09PSB0cnVlKSB7XG4gICAgICAgIGxvY2FsZVNhbml0aXplZCA9IExvY2FsZU1hcFtsb2NhbGVdO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbGVJbkxvd2VyQ2FzZSA9IGxvY2FsZVNhbml0aXplZC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgIGlmIChTdXBwb3J0ZWRPbmxpbmVIZWxwTG9jYWxlcy5pbmNsdWRlcyhsb2NhbGVJbkxvd2VyQ2FzZSkgPT09IHRydWUpIHtcbiAgICAgICAgLy8gZm9sbG93aW5nIHJlZ2V4IHRlc3RzIC9lbi8gaXMgcHJlc2VudCBpbiB1cmwgYW5kIHJlcGxhY2VzIGl0IHdpdGggdGhlIGxvY2FsZVxuICAgICAgICAvLyBodHRwczovL2RvY2Rldi5hcmNnaXMuY29tL2VuL2FyY2dpcy1vbmxpbmUvYW5hbHl6ZS9hZ2dyZWdhdGUtcG9pbnRzLW12Lmh0bVxuICAgICAgICAvLyBzZWxmIFJlc3BvbnNlIG9ubHkgcHJvdmlkZXMgd2l0aCBgZW5gIGxvY2FsZSBub3QgYXMgcGVyIHRoZSB1c2VyIGxvY2FsZSBvciBjdXJyZW50IGFwcCBsb2NhbGVcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0aGlzIHJlcGxhY2UgY2FsbC5cbiAgICAgICAgYmFzZVBhdGggPSBiYXNlUGF0aC5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcL1teL10rXFwvZW4vLCAobWF0Y2gpID0+IG1hdGNoLnJlcGxhY2UoXCJlblwiLCBsb2NhbGVJbkxvd2VyQ2FzZSkpO1xuICAgIH1cbiAgICBjb25zdCBsZWFybk1vcmVVcmwgPSBgJHtiYXNlUGF0aH1hbmFseXplLyR7dXJsfWA7XG4gICAgcmV0dXJuIGxlYXJuTW9yZVVybDtcbn1cblxuZXhwb3J0IHsgRGVmYXVsdExvY2FsZSBhcyBELCBTdXBwb3J0ZWRMb2NhbGVzIGFzIFMsIGdldERpcmVjdGlvbkJhc2VkT25SVEwgYXMgYSwgZmV0Y2hDb21wb25lbnRMb2NhbGVTdHJpbmdzIGFzIGIsIGZvcm1hdExvY2FsaXplZEhlbHBVcmwgYXMgZiwgZ2V0TG9jYWxlSW5mbyBhcyBnIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvY2FsaXphdGlvbi1oZWxwZXItNDgxOWI2N2QuanMubWFwIiwiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBnIGFzIGdldEFzc2V0UGF0aCwgaCwgYSBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC1kYTFiNzEzOC5qcyc7XG5pbXBvcnQgeyBiIGFzIGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0IHsgQyBhcyBDYWxjaXRlU2NhbGUgfSBmcm9tICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0IHsgZiBhcyBmb3JtYXRNZXNzYWdlIH0gZnJvbSAnLi9jb21tb24tZmRhMTQ2MmUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuaW1wb3J0ICcuL19VaW50OEFycmF5LTY4ZTFlM2Y5LmpzJztcbmltcG9ydCAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcblxuY29uc3QgcmZ4Q2xvc2VXaXRob3V0U2F2aW5nTW9kYWxDc3MgPSBcIlwiO1xuXG5jb25zdCBSRnhDbG9zZVdpdGhvdXRTYXZpbmdNb2RhbCA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMucmZ0VGl0bGUgPSBcIlJhc3RlciBGdW5jdGlvbiBUZW1wbGF0ZSAxXCI7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGFuZGxlRG9udFNhdmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGFuZGxlU2F2ZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIExpZmVjeWNsZVxuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICAoeyBzdHJpbmdzOiB0aGlzLnN0cmluZ3MsIGRpcjogdGhpcy5kaXJlY3Rpb24gfSA9IGF3YWl0IGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyh0aGlzLmhvc3RFbGVtZW50LCBnZXRBc3NldFBhdGgoXCIuXCIpKSk7XG4gICAgICAgIHRoaXMuc2V0dXBJbml0aWFsU3RhdGUoKTtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHNldHVwSW5pdGlhbFN0YXRlKCkgeyB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZm9ybWF0TWVzc2FnZSh0aGlzLnN0cmluZ3MuY29udGVudCwgeyByZnRUaXRsZTogdGhpcy5yZnRUaXRsZSB9KTtcbiAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1tb2RhbFwiLCB7IFwiYXJpYS1sYWJlbGxlZGJ5XCI6IFwibW9kYWwtdGl0bGVcIiwgaWQ6IFwiY29udGludWUtd2l0aG91dC1zYXZpbmdcIiwga2luZDogXCJkYW5nZXJcIiwgb3BlbjogdHJ1ZSwgXCJvdXRzaWRlLWNsb3NlLWRpc2FibGVkXCI6IHRydWUsIHNjYWxlOiBDYWxjaXRlU2NhbGUubSwgd2lkdGhTY2FsZTogQ2FsY2l0ZVNjYWxlLnMgfSwgaChcImRpdlwiLCB7IHNsb3Q6IFwiaGVhZGVyXCIsIGlkOiBcIm1vZGFsLXRpdGxlXCIgfSwgdGhpcy5zdHJpbmdzLmhlYWRlciksIGgoXCJkaXZcIiwgeyBzbG90OiBcImNvbnRlbnRcIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBjb250ZW50KSksIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IHNsb3Q6IFwiYmFja1wiLCBraW5kOiBcIm5ldXRyYWxcIiwgd2lkdGg6IFwiZnVsbFwiLCBvbkNsaWNrOiB0aGlzLmhhbmRsZVNhdmUgfSwgdGhpcy5zdHJpbmdzLmNhbmNlbCksIGgoXCJjYWxjaXRlLWJ1dHRvblwiLCB7IHNsb3Q6IFwic2Vjb25kYXJ5XCIsIHdpZHRoOiBcImZ1bGxcIiwgYXBwZWFyYW5jZTogXCJvdXRsaW5lXCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlRG9udFNhdmUgfSwgdGhpcy5zdHJpbmdzLmRvbnRTYXZlKSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgc2xvdDogXCJwcmltYXJ5XCIsIHdpZHRoOiBcImZ1bGxcIiwgb25DbGljazogdGhpcy5oYW5kbGVDbG9zZSB9LCB0aGlzLnN0cmluZ3Muc2F2ZSkpKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1widDluXCJdOyB9XG4gICAgZ2V0IGhvc3RFbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblJGeENsb3NlV2l0aG91dFNhdmluZ01vZGFsLnN0eWxlID0gcmZ4Q2xvc2VXaXRob3V0U2F2aW5nTW9kYWxDc3M7XG5cbmV4cG9ydCB7IFJGeENsb3NlV2l0aG91dFNhdmluZ01vZGFsIGFzIHJmeF9jbG9zZV93aXRob3V0X3NhdmluZ19tb2RhbCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY2xvc2Utd2l0aG91dC1zYXZpbmctbW9kYWwuZW50cnkuanMubWFwIiwiY29uc3QgVUlEZWZhdWx0cyA9IHtcbiAgICBTY2FsZTogXCJzXCIsXG4gICAgUG9wb3ZlclRpbWVyOiA2MFxufTtcbmNvbnN0IENhbGNpdGVTY2FsZSA9IHtcbiAgICBzOiBcInNcIixcbiAgICBtOiBcIm1cIlxufTtcbmNvbnN0IENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgPSB7XG4gICAgYWJzb2x1dGU6IFwiYWJzb2x1dGVcIixcbiAgICBmaXhlZDogXCJmaXhlZFwiXG59O1xuXG5leHBvcnQgeyBDYWxjaXRlU2NhbGUgYXMgQywgVUlEZWZhdWx0cyBhcyBVLCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nIGFzIGEgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktdXRpbHMtOTI4YTQwOTYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9