"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-e69989"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js":
/*!**************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ addItemState),
/* harmony export */   b: () => (/* binding */ addItemUrlState),
/* harmony export */   c: () => (/* binding */ addItemRequestState),
/* harmony export */   d: () => (/* binding */ addItemStore)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const addItemStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    typeKeywords: [],
    customParameters: [],
    analyzedLocationTypes: [],
    allowStoredAuth: true,
    isSecured: null,
    checkAuth: false
});
// Entire add item state object
const addItemState = addItemStore.state;
// Subsets of add item state
const addItemRequestState = addItemStore.state;
const addItemUrlState = addItemStore.state;



//# sourceMappingURL=add-item-dbbe2f57.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-layer-upload.entry.js":
/*!*************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-layer-upload.entry.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_layer_upload: () => (/* binding */ ArcgisNewItemPagesLayerUpload)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _item_types_586f0301_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./item-types-586f0301.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */















const ArcgisNewItemPagesLayerUpload = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.allowedExtensions = [];
    }
    componentWillLoad() {
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_5__.u.i18n.tileLayerUpload;
        const { portal } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        // TODO: lock newItemMode to original selection, but keep file workflow navigation in tact
        const layerModeMap = {
            "Tile Package": "tileLayer",
            "3DTiles Package": "tileLayer",
            "Vector Tile Package": "tileLayer",
            "Service Definition": "tileLayer",
            "Scene Package": "sceneLayer"
        };
        if (_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode === "file") {
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode = layerModeMap[_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.type];
        }
        switch (_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode) {
            case "tileLayer":
                const tileLayerPublishType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.tileLayerPublishType;
                if (tileLayerPublishType === "tiles") {
                    this.allowedExtensions = !(0,_portal_d518b571_js__WEBPACK_IMPORTED_MODULE_7__.u)(portal) ? ["tpk", "tpkx", "sd"] : ["tpkx", "sd"];
                    break;
                }
                this.allowedExtensions = tileLayerPublishType === "3dTiles" ? ["3tz"] : ["vtpk"];
                break;
            case "sceneLayer":
                this.allowedExtensions = ["slpk", "spk"];
                break;
            default:
                this.allowedExtensions = [];
        }
    }
    // Triggered when a file is selected (via drop or button)
    async fileSelectHandler(event) {
        var _a;
        const file = (_a = event.detail) === null || _a === void 0 ? void 0 : _a.file;
        let nextPage = "itemProperties";
        if (_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode === "sceneLayer" || _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode === "tileLayer") {
            nextPage = "publishSelect";
        }
        const { title, fileName, extension } = (0,_file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_2__.s)(file);
        _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_3__.i.title = title;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.file = file;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.fileName = fileName;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.newItemMode = "file";
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.extension = extension;
        const possibleItemTypes = (0,_item_types_586f0301_js__WEBPACK_IMPORTED_MODULE_6__.f)(extension);
        if (possibleItemTypes.length === 1) {
            const type = possibleItemTypes[0].type;
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_4__.a.type = type;
        }
        this.newItemUpdatePage.emit(nextPage);
    }
    render() {
        const { i18n, allowedExtensions } = this;
        const { portal, config, user, userLicensedItems } = _config_75adf962_js__WEBPACK_IMPORTED_MODULE_1__.c;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.header }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-file-browser", { cloud: false, allowedExtensions: allowedExtensions, insideModal: true, fullHeight: true, portal: portal, config: config, user: user, userLicensedItems: userLicensedItems })));
    }
};



//# sourceMappingURL=arcgis-new-item-pages-layer-upload.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js":
/*!**********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ sanitizeFileName),
/* harmony export */   f: () => (/* binding */ formatFileSize),
/* harmony export */   g: () => (/* binding */ getItemInfoByType),
/* harmony export */   s: () => (/* binding */ sanitizeFileInput),
/* harmony export */   v: () => (/* binding */ validateOverwriteFileName)
/* harmony export */ });
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



function sanitizeFileName(name, addGUID) {
    //TODO: add new param to spec file.
    const expression = /(?:\.([^.]+))?$/;
    const invalidTitleCharacters = /\.|-/g;
    let fileName = name.replace(/^.*(\\|\/|:)/, "");
    let extension = (fileName && expression.exec(fileName)[1] ? expression.exec(fileName)[1].toLowerCase() : "");
    let title = "";
    if (fileName.indexOf(".rft.") > -1) {
        const [name, suffix] = fileName.split(".rft.");
        extension = `rft.${suffix}`;
        title = name;
    }
    if (fileName && !title) {
        title = fileName.lastIndexOf(".") === -1 ? fileName : fileName.substring(0, fileName.lastIndexOf("."));
    }
    // Replace any invalid characters with an underscore
    title = title.replace(invalidTitleCharacters, "_");
    // Allow file upload of existing item's file name // currently used in append
    if (addGUID) {
        title = makeUniqueFileName(title);
        fileName = `${title}.${extension}`;
    }
    return { title, fileName, extension };
}
// Helper method that takes in a file & returns the cleaned up file name as is and in title form, and the detected file extension
function sanitizeFileInput(file, addGUID) {
    return sanitizeFileName(file.name, !!addGUID);
}
function makeUniqueFileName(name) {
    return `${name}_${(0,_guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
}
function validateOverwriteFileName(uploadedFileName, sourceFileName) {
    let fileName = uploadedFileName;
    const position = uploadedFileName.lastIndexOf("\\");
    if (position > -1) {
        fileName = fileName.substring(position + 1, fileName.length);
    }
    return fileName.replace(/\ /g, "_") === sourceFileName.replace(/\ /g, "_");
}
function getItemInfoByType(type) {
    if (_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__.a[type]) {
        return _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__.a[type];
    }
    else {
        return _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__.a[Object.keys(_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__.a).find((fileType) => _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_0__.a[fileType].type === type)];
    }
}
function formatFileSize(size) {
    if (!size) {
        return "0 B";
    }
    const i = Math.floor(Math.log(size) / Math.log(1024));
    const adjustedSize = Math.round(size / Math.pow(1024, i));
    const unit = ["B", "KB", "MB", "GB", "TB"][i];
    return `${adjustedSize} ${unit}`;
}



//# sourceMappingURL=file-bf8ab90f.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js":
/*!**********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ guid)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */
function generateId(counts) {
    return counts
        .map((count) => {
        let out = "";
        for (let i = 0; i < count; i++) {
            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
        }
        return out;
    })
        .join("-");
}
const guid = () => generateId([2, 1, 1, 1, 3]);



//# sourceMappingURL=guid-aeaed84d.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js":
/*!*********************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ itemPropertiesStore),
/* harmony export */   i: () => (/* binding */ itemPropertiesState)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const itemPropertiesStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    title: "",
    snippet: "",
    tags: [],
    categories: []
});
const itemPropertiesState = itemPropertiesStore.state;



//# sourceMappingURL=item-properties-10491b2e.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js":
/*!****************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-586f0301.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ isLargeCSV),
/* harmony export */   f: () => (/* binding */ findPossibleItemTypesByExtension),
/* harmony export */   i: () => (/* binding */ isLargeGeoJSON),
/* harmony export */   m: () => (/* binding */ mapItemTypesToFileExtensions)
/* harmony export */ });
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */



function findPossibleItemTypesByExtension(extension, validationTypes) {
    // Search item types extensions for the one imported
    let itemTypes;
    if (validationTypes) {
        itemTypes = validationTypes.map((value) => {
            return value.type;
        });
    }
    else {
        itemTypes = Object.keys(_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a);
    }
    let possibleItemTypes = [];
    itemTypes.forEach((type) => {
        var _a;
        if (((_a = _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type].fileExt) === null || _a === void 0 ? void 0 : _a.indexOf(extension)) >= 0) {
            possibleItemTypes.push(_item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type]);
        }
    });
    return possibleItemTypes;
}
function mapItemTypesToFileExtensions(types) {
    if (!types) {
        return null;
    }
    return (0,_functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_0__.b)(types.flatMap((type) => { var _a; return (_a = _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_1__.a[type]) === null || _a === void 0 ? void 0 : _a.fileExt; }).filter((valid) => !!valid));
}
const isLargeGeoJSON = (sizeInBytes) => {
    const sizeInMB = sizeInBytes / 1024 / 1024;
    // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2553#issuecomment-3645404
    return sizeInMB > 50; // 50MB
};
const isLargeCSV = (sizeInBytes) => {
    const sizeInMB = sizeInBytes / 1024 / 1024;
    // https://devtopia.esri.com/WebGIS/arcgis-app-components/issues/2875#issuecomment-3748913
    return sizeInMB > 20; // 20MB
};



//# sourceMappingURL=item-types-586f0301.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js":
/*!********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ uiStore),
/* harmony export */   u: () => (/* binding */ uiStoreState)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const uiStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    nextText: "next",
    workflow: "content",
    scale: "m",
    disableScroll: false,
    featureFlags: {}
});
const uiStoreState = uiStore.state;



//# sourceMappingURL=ui-bca7bcd1.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWU2OTk4OS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ3VEOztBQUV2RCxxQkFBcUIscURBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWdHOztBQUVoRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUM0RjtBQUNwQztBQUNJO0FBQ2E7QUFDZDtBQUNOO0FBQzRCO0FBQ3hCO0FBQzVCO0FBQ0s7QUFDTjtBQUNNO0FBQ0M7QUFDUjs7QUFFM0I7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOENBQVk7QUFDaEMsZ0JBQWdCLFNBQVMsRUFBRSxrREFBVztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBWTtBQUN4QixZQUFZLG9EQUFZLDRCQUE0QixvREFBWTtBQUNoRTtBQUNBLGdCQUFnQixvREFBWTtBQUM1QjtBQUNBLDZDQUE2QyxvREFBWTtBQUN6RDtBQUNBLDhDQUE4QyxzREFBWTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0RBQVksaUNBQWlDLG9EQUFZO0FBQ3JFO0FBQ0E7QUFDQSxnQkFBZ0IsNkJBQTZCLEVBQUUsb0RBQWlCO0FBQ2hFLFFBQVEsMkRBQW1CO0FBQzNCLFFBQVEsb0RBQVk7QUFDcEIsUUFBUSxvREFBWTtBQUNwQixRQUFRLG9EQUFZO0FBQ3BCLFFBQVEsb0RBQVk7QUFDcEIsa0NBQWtDLDBEQUFnQztBQUNsRTtBQUNBO0FBQ0EsWUFBWSxvREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQkFBMEI7QUFDMUMsZ0JBQWdCLDBDQUEwQyxFQUFFLGtEQUFXO0FBQ3ZFLGdCQUFnQixxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsa0NBQWtDLHFCQUFxQixHQUFHLHFEQUFDLDBCQUEwQiwyS0FBMks7QUFDL1I7QUFDQTs7QUFFK0U7O0FBRS9FOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNtRTtBQUNwQjs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsTUFBTSxHQUFHLFVBQVU7QUFDekM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLLEdBQUcsb0RBQUksR0FBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQWtCO0FBQzFCLGVBQWUsc0RBQWtCO0FBQ2pDO0FBQ0E7QUFDQSxlQUFlLHNEQUFrQixhQUFhLHNEQUFrQixxQkFBcUIsc0RBQWtCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsY0FBYyxFQUFFLEtBQUs7QUFDbkM7O0FBRXNJOztBQUV0STs7Ozs7Ozs7Ozs7Ozs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRXFCOztBQUVyQjs7Ozs7Ozs7Ozs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUN1RDs7QUFFdkQsNEJBQTRCLHFEQUFXO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUU4RDs7QUFFOUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDdUQ7QUFDWTs7QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQ0FBZ0Msc0RBQWtCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNEQUFrQjtBQUNyQyxtQ0FBbUMsc0RBQWtCO0FBQ3JEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMERBQU0sMkJBQTJCLFFBQVEsYUFBYSxzREFBa0IsMERBQTBEO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCOztBQUUwSDs7QUFFMUg7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDdUQ7O0FBRXZELGdCQUFnQixxREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUUyQzs7QUFFM0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hZGQtaXRlbS1kYmJlMmY1Ny5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtbGF5ZXItdXBsb2FkLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2ZpbGUtYmY4YWI5MGYuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vZ3VpZC1hZWFlZDg0ZC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9pdGVtLXByb3BlcnRpZXMtMTA0OTFiMmUuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vaXRlbS10eXBlcy01ODZmMDMwMS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS91aS1iY2E3YmNkMS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGMgYXMgY3JlYXRlU3RvcmUgfSBmcm9tICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcblxuY29uc3QgYWRkSXRlbVN0b3JlID0gY3JlYXRlU3RvcmUoe1xuICAgIHR5cGVLZXl3b3JkczogW10sXG4gICAgY3VzdG9tUGFyYW1ldGVyczogW10sXG4gICAgYW5hbHl6ZWRMb2NhdGlvblR5cGVzOiBbXSxcbiAgICBhbGxvd1N0b3JlZEF1dGg6IHRydWUsXG4gICAgaXNTZWN1cmVkOiBudWxsLFxuICAgIGNoZWNrQXV0aDogZmFsc2Vcbn0pO1xuLy8gRW50aXJlIGFkZCBpdGVtIHN0YXRlIG9iamVjdFxuY29uc3QgYWRkSXRlbVN0YXRlID0gYWRkSXRlbVN0b3JlLnN0YXRlO1xuLy8gU3Vic2V0cyBvZiBhZGQgaXRlbSBzdGF0ZVxuY29uc3QgYWRkSXRlbVJlcXVlc3RTdGF0ZSA9IGFkZEl0ZW1TdG9yZS5zdGF0ZTtcbmNvbnN0IGFkZEl0ZW1VcmxTdGF0ZSA9IGFkZEl0ZW1TdG9yZS5zdGF0ZTtcblxuZXhwb3J0IHsgYWRkSXRlbVN0YXRlIGFzIGEsIGFkZEl0ZW1VcmxTdGF0ZSBhcyBiLCBhZGRJdGVtUmVxdWVzdFN0YXRlIGFzIGMsIGFkZEl0ZW1TdG9yZSBhcyBkIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkZC1pdGVtLWRiYmUyZjU3LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnU3RhdGUgfSBmcm9tICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgeyBzIGFzIHNhbml0aXplRmlsZUlucHV0IH0gZnJvbSAnLi9maWxlLWJmOGFiOTBmLmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLTEwNDkxYjJlLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS1kYmJlMmY1Ny5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktYmNhN2JjZDEuanMnO1xuaW1wb3J0IHsgZiBhcyBmaW5kUG9zc2libGVJdGVtVHlwZXNCeUV4dGVuc2lvbiB9IGZyb20gJy4vaXRlbS10eXBlcy01ODZmMDMwMS5qcyc7XG5pbXBvcnQgeyB1IGFzIGlzS3ViZXJuZXRlcyB9IGZyb20gJy4vcG9ydGFsLWQ1MThiNTcxLmpzJztcbmltcG9ydCAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy0yMDI5YjA2Yi5qcyc7XG5pbXBvcnQgJy4vZ3VpZC1hZWFlZDg0ZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC00NGRlOGZjZi5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5cbmNvbnN0IEFyY2dpc05ld0l0ZW1QYWdlc0xheWVyVXBsb2FkID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMuYWxsb3dlZEV4dGVuc2lvbnMgPSBbXTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIHRoaXMuaTE4biA9IHVpU3RvcmVTdGF0ZS5pMThuLnRpbGVMYXllclVwbG9hZDtcbiAgICAgICAgY29uc3QgeyBwb3J0YWwgfSA9IGNvbmZpZ1N0YXRlO1xuICAgICAgICAvLyBUT0RPOiBsb2NrIG5ld0l0ZW1Nb2RlIHRvIG9yaWdpbmFsIHNlbGVjdGlvbiwgYnV0IGtlZXAgZmlsZSB3b3JrZmxvdyBuYXZpZ2F0aW9uIGluIHRhY3RcbiAgICAgICAgY29uc3QgbGF5ZXJNb2RlTWFwID0ge1xuICAgICAgICAgICAgXCJUaWxlIFBhY2thZ2VcIjogXCJ0aWxlTGF5ZXJcIixcbiAgICAgICAgICAgIFwiM0RUaWxlcyBQYWNrYWdlXCI6IFwidGlsZUxheWVyXCIsXG4gICAgICAgICAgICBcIlZlY3RvciBUaWxlIFBhY2thZ2VcIjogXCJ0aWxlTGF5ZXJcIixcbiAgICAgICAgICAgIFwiU2VydmljZSBEZWZpbml0aW9uXCI6IFwidGlsZUxheWVyXCIsXG4gICAgICAgICAgICBcIlNjZW5lIFBhY2thZ2VcIjogXCJzY2VuZUxheWVyXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGFkZEl0ZW1TdGF0ZS5uZXdJdGVtTW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS5uZXdJdGVtTW9kZSA9IGxheWVyTW9kZU1hcFthZGRJdGVtU3RhdGUudHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChhZGRJdGVtU3RhdGUubmV3SXRlbU1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0aWxlTGF5ZXJcIjpcbiAgICAgICAgICAgICAgICBjb25zdCB0aWxlTGF5ZXJQdWJsaXNoVHlwZSA9IGFkZEl0ZW1TdGF0ZS50aWxlTGF5ZXJQdWJsaXNoVHlwZTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZUxheWVyUHVibGlzaFR5cGUgPT09IFwidGlsZXNcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gIWlzS3ViZXJuZXRlcyhwb3J0YWwpID8gW1widHBrXCIsIFwidHBreFwiLCBcInNkXCJdIDogW1widHBreFwiLCBcInNkXCJdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkRXh0ZW5zaW9ucyA9IHRpbGVMYXllclB1Ymxpc2hUeXBlID09PSBcIjNkVGlsZXNcIiA/IFtcIjN0elwiXSA6IFtcInZ0cGtcIl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2NlbmVMYXllclwiOlxuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZEV4dGVuc2lvbnMgPSBbXCJzbHBrXCIsIFwic3BrXCJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRFeHRlbnNpb25zID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJpZ2dlcmVkIHdoZW4gYSBmaWxlIGlzIHNlbGVjdGVkICh2aWEgZHJvcCBvciBidXR0b24pXG4gICAgYXN5bmMgZmlsZVNlbGVjdEhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmaWxlID0gKF9hID0gZXZlbnQuZGV0YWlsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsZTtcbiAgICAgICAgbGV0IG5leHRQYWdlID0gXCJpdGVtUHJvcGVydGllc1wiO1xuICAgICAgICBpZiAoYWRkSXRlbVN0YXRlLm5ld0l0ZW1Nb2RlID09PSBcInNjZW5lTGF5ZXJcIiB8fCBhZGRJdGVtU3RhdGUubmV3SXRlbU1vZGUgPT09IFwidGlsZUxheWVyXCIpIHtcbiAgICAgICAgICAgIG5leHRQYWdlID0gXCJwdWJsaXNoU2VsZWN0XCI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0aXRsZSwgZmlsZU5hbWUsIGV4dGVuc2lvbiB9ID0gc2FuaXRpemVGaWxlSW5wdXQoZmlsZSk7XG4gICAgICAgIGl0ZW1Qcm9wZXJ0aWVzU3RhdGUudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmZpbGUgPSBmaWxlO1xuICAgICAgICBhZGRJdGVtU3RhdGUuZmlsZU5hbWUgPSBmaWxlTmFtZTtcbiAgICAgICAgYWRkSXRlbVN0YXRlLm5ld0l0ZW1Nb2RlID0gXCJmaWxlXCI7XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5leHRlbnNpb24gPSBleHRlbnNpb247XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSXRlbVR5cGVzID0gZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSXRlbVR5cGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHBvc3NpYmxlSXRlbVR5cGVzWzBdLnR5cGU7XG4gICAgICAgICAgICBhZGRJdGVtU3RhdGUudHlwZSA9IHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KG5leHRQYWdlKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGFsbG93ZWRFeHRlbnNpb25zIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IHBvcnRhbCwgY29uZmlnLCB1c2VyLCB1c2VyTGljZW5zZWRJdGVtcyB9ID0gY29uZmlnU3RhdGU7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiYXJjZ2lzLW5ldy1pdGVtLWRlc2NyaXB0aW9uXCIsIHsgaGVhZGVyOiBpMThuLmhlYWRlciB9KSwgaChcImFyY2dpcy1maWxlLWJyb3dzZXJcIiwgeyBjbG91ZDogZmFsc2UsIGFsbG93ZWRFeHRlbnNpb25zOiBhbGxvd2VkRXh0ZW5zaW9ucywgaW5zaWRlTW9kYWw6IHRydWUsIGZ1bGxIZWlnaHQ6IHRydWUsIHBvcnRhbDogcG9ydGFsLCBjb25maWc6IGNvbmZpZywgdXNlcjogdXNlciwgdXNlckxpY2Vuc2VkSXRlbXM6IHVzZXJMaWNlbnNlZEl0ZW1zIH0pKSk7XG4gICAgfVxufTtcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzTGF5ZXJVcGxvYWQgYXMgYXJjZ2lzX25ld19pdGVtX3BhZ2VzX2xheWVyX3VwbG9hZCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtbmV3LWl0ZW0tcGFnZXMtbGF5ZXItdXBsb2FkLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYSBhcyBhZGRDcmVhdGVJdGVtVHlwZXMgfSBmcm9tICcuL2l0ZW0tdHlwZXMtMjAyOWIwNmIuanMnO1xuaW1wb3J0IHsgZyBhcyBndWlkIH0gZnJvbSAnLi9ndWlkLWFlYWVkODRkLmpzJztcblxuZnVuY3Rpb24gc2FuaXRpemVGaWxlTmFtZShuYW1lLCBhZGRHVUlEKSB7XG4gICAgLy9UT0RPOiBhZGQgbmV3IHBhcmFtIHRvIHNwZWMgZmlsZS5cbiAgICBjb25zdCBleHByZXNzaW9uID0gLyg/OlxcLihbXi5dKykpPyQvO1xuICAgIGNvbnN0IGludmFsaWRUaXRsZUNoYXJhY3RlcnMgPSAvXFwufC0vZztcbiAgICBsZXQgZmlsZU5hbWUgPSBuYW1lLnJlcGxhY2UoL14uKihcXFxcfFxcL3w6KS8sIFwiXCIpO1xuICAgIGxldCBleHRlbnNpb24gPSAoZmlsZU5hbWUgJiYgZXhwcmVzc2lvbi5leGVjKGZpbGVOYW1lKVsxXSA/IGV4cHJlc3Npb24uZXhlYyhmaWxlTmFtZSlbMV0udG9Mb3dlckNhc2UoKSA6IFwiXCIpO1xuICAgIGxldCB0aXRsZSA9IFwiXCI7XG4gICAgaWYgKGZpbGVOYW1lLmluZGV4T2YoXCIucmZ0LlwiKSA+IC0xKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lLCBzdWZmaXhdID0gZmlsZU5hbWUuc3BsaXQoXCIucmZ0LlwiKTtcbiAgICAgICAgZXh0ZW5zaW9uID0gYHJmdC4ke3N1ZmZpeH1gO1xuICAgICAgICB0aXRsZSA9IG5hbWU7XG4gICAgfVxuICAgIGlmIChmaWxlTmFtZSAmJiAhdGl0bGUpIHtcbiAgICAgICAgdGl0bGUgPSBmaWxlTmFtZS5sYXN0SW5kZXhPZihcIi5cIikgPT09IC0xID8gZmlsZU5hbWUgOiBmaWxlTmFtZS5zdWJzdHJpbmcoMCwgZmlsZU5hbWUubGFzdEluZGV4T2YoXCIuXCIpKTtcbiAgICB9XG4gICAgLy8gUmVwbGFjZSBhbnkgaW52YWxpZCBjaGFyYWN0ZXJzIHdpdGggYW4gdW5kZXJzY29yZVxuICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZShpbnZhbGlkVGl0bGVDaGFyYWN0ZXJzLCBcIl9cIik7XG4gICAgLy8gQWxsb3cgZmlsZSB1cGxvYWQgb2YgZXhpc3RpbmcgaXRlbSdzIGZpbGUgbmFtZSAvLyBjdXJyZW50bHkgdXNlZCBpbiBhcHBlbmRcbiAgICBpZiAoYWRkR1VJRCkge1xuICAgICAgICB0aXRsZSA9IG1ha2VVbmlxdWVGaWxlTmFtZSh0aXRsZSk7XG4gICAgICAgIGZpbGVOYW1lID0gYCR7dGl0bGV9LiR7ZXh0ZW5zaW9ufWA7XG4gICAgfVxuICAgIHJldHVybiB7IHRpdGxlLCBmaWxlTmFtZSwgZXh0ZW5zaW9uIH07XG59XG4vLyBIZWxwZXIgbWV0aG9kIHRoYXQgdGFrZXMgaW4gYSBmaWxlICYgcmV0dXJucyB0aGUgY2xlYW5lZCB1cCBmaWxlIG5hbWUgYXMgaXMgYW5kIGluIHRpdGxlIGZvcm0sIGFuZCB0aGUgZGV0ZWN0ZWQgZmlsZSBleHRlbnNpb25cbmZ1bmN0aW9uIHNhbml0aXplRmlsZUlucHV0KGZpbGUsIGFkZEdVSUQpIHtcbiAgICByZXR1cm4gc2FuaXRpemVGaWxlTmFtZShmaWxlLm5hbWUsICEhYWRkR1VJRCk7XG59XG5mdW5jdGlvbiBtYWtlVW5pcXVlRmlsZU5hbWUobmFtZSkge1xuICAgIHJldHVybiBgJHtuYW1lfV8ke2d1aWQoKX1gO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVPdmVyd3JpdGVGaWxlTmFtZSh1cGxvYWRlZEZpbGVOYW1lLCBzb3VyY2VGaWxlTmFtZSkge1xuICAgIGxldCBmaWxlTmFtZSA9IHVwbG9hZGVkRmlsZU5hbWU7XG4gICAgY29uc3QgcG9zaXRpb24gPSB1cGxvYWRlZEZpbGVOYW1lLmxhc3RJbmRleE9mKFwiXFxcXFwiKTtcbiAgICBpZiAocG9zaXRpb24gPiAtMSkge1xuICAgICAgICBmaWxlTmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZyhwb3NpdGlvbiArIDEsIGZpbGVOYW1lLmxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiBmaWxlTmFtZS5yZXBsYWNlKC9cXCAvZywgXCJfXCIpID09PSBzb3VyY2VGaWxlTmFtZS5yZXBsYWNlKC9cXCAvZywgXCJfXCIpO1xufVxuZnVuY3Rpb24gZ2V0SXRlbUluZm9CeVR5cGUodHlwZSkge1xuICAgIGlmIChhZGRDcmVhdGVJdGVtVHlwZXNbdHlwZV0pIHtcbiAgICAgICAgcmV0dXJuIGFkZENyZWF0ZUl0ZW1UeXBlc1t0eXBlXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhZGRDcmVhdGVJdGVtVHlwZXNbT2JqZWN0LmtleXMoYWRkQ3JlYXRlSXRlbVR5cGVzKS5maW5kKChmaWxlVHlwZSkgPT4gYWRkQ3JlYXRlSXRlbVR5cGVzW2ZpbGVUeXBlXS50eXBlID09PSB0eXBlKV07XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0RmlsZVNpemUoc2l6ZSkge1xuICAgIGlmICghc2l6ZSkge1xuICAgICAgICByZXR1cm4gXCIwIEJcIjtcbiAgICB9XG4gICAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coc2l6ZSkgLyBNYXRoLmxvZygxMDI0KSk7XG4gICAgY29uc3QgYWRqdXN0ZWRTaXplID0gTWF0aC5yb3VuZChzaXplIC8gTWF0aC5wb3coMTAyNCwgaSkpO1xuICAgIGNvbnN0IHVuaXQgPSBbXCJCXCIsIFwiS0JcIiwgXCJNQlwiLCBcIkdCXCIsIFwiVEJcIl1baV07XG4gICAgcmV0dXJuIGAke2FkanVzdGVkU2l6ZX0gJHt1bml0fWA7XG59XG5cbmV4cG9ydCB7IHNhbml0aXplRmlsZU5hbWUgYXMgYSwgZm9ybWF0RmlsZVNpemUgYXMgZiwgZ2V0SXRlbUluZm9CeVR5cGUgYXMgZywgc2FuaXRpemVGaWxlSW5wdXQgYXMgcywgdmFsaWRhdGVPdmVyd3JpdGVGaWxlTmFtZSBhcyB2IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbGUtYmY4YWI5MGYuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUlkKGNvdW50cykge1xuICAgIHJldHVybiBjb3VudHNcbiAgICAgICAgLm1hcCgoY291bnQpID0+IHtcbiAgICAgICAgbGV0IG91dCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgb3V0ICs9ICgoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pXG4gICAgICAgIC5qb2luKFwiLVwiKTtcbn1cbmNvbnN0IGd1aWQgPSAoKSA9PiBnZW5lcmF0ZUlkKFsyLCAxLCAxLCAxLCAzXSk7XG5cbmV4cG9ydCB7IGd1aWQgYXMgZyB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWlkLWFlYWVkODRkLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVTdG9yZSB9IGZyb20gJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuXG5jb25zdCBpdGVtUHJvcGVydGllc1N0b3JlID0gY3JlYXRlU3RvcmUoe1xuICAgIHRpdGxlOiBcIlwiLFxuICAgIHNuaXBwZXQ6IFwiXCIsXG4gICAgdGFnczogW10sXG4gICAgY2F0ZWdvcmllczogW11cbn0pO1xuY29uc3QgaXRlbVByb3BlcnRpZXNTdGF0ZSA9IGl0ZW1Qcm9wZXJ0aWVzU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IGl0ZW1Qcm9wZXJ0aWVzU3RvcmUgYXMgYSwgaXRlbVByb3BlcnRpZXNTdGF0ZSBhcyBpIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW0tcHJvcGVydGllcy0xMDQ5MWIyZS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGIgYXMgdW5pcXVlIH0gZnJvbSAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCB7IGEgYXMgYWRkQ3JlYXRlSXRlbVR5cGVzIH0gZnJvbSAnLi9pdGVtLXR5cGVzLTIwMjliMDZiLmpzJztcblxuZnVuY3Rpb24gZmluZFBvc3NpYmxlSXRlbVR5cGVzQnlFeHRlbnNpb24oZXh0ZW5zaW9uLCB2YWxpZGF0aW9uVHlwZXMpIHtcbiAgICAvLyBTZWFyY2ggaXRlbSB0eXBlcyBleHRlbnNpb25zIGZvciB0aGUgb25lIGltcG9ydGVkXG4gICAgbGV0IGl0ZW1UeXBlcztcbiAgICBpZiAodmFsaWRhdGlvblR5cGVzKSB7XG4gICAgICAgIGl0ZW1UeXBlcyA9IHZhbGlkYXRpb25UeXBlcy5tYXAoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudHlwZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpdGVtVHlwZXMgPSBPYmplY3Qua2V5cyhhZGRDcmVhdGVJdGVtVHlwZXMpO1xuICAgIH1cbiAgICBsZXQgcG9zc2libGVJdGVtVHlwZXMgPSBbXTtcbiAgICBpdGVtVHlwZXMuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoKF9hID0gYWRkQ3JlYXRlSXRlbVR5cGVzW3R5cGVdLmZpbGVFeHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmRleE9mKGV4dGVuc2lvbikpID49IDApIHtcbiAgICAgICAgICAgIHBvc3NpYmxlSXRlbVR5cGVzLnB1c2goYWRkQ3JlYXRlSXRlbVR5cGVzW3R5cGVdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBwb3NzaWJsZUl0ZW1UeXBlcztcbn1cbmZ1bmN0aW9uIG1hcEl0ZW1UeXBlc1RvRmlsZUV4dGVuc2lvbnModHlwZXMpIHtcbiAgICBpZiAoIXR5cGVzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdW5pcXVlKHR5cGVzLmZsYXRNYXAoKHR5cGUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gYWRkQ3JlYXRlSXRlbVR5cGVzW3R5cGVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsZUV4dDsgfSkuZmlsdGVyKCh2YWxpZCkgPT4gISF2YWxpZCkpO1xufVxuY29uc3QgaXNMYXJnZUdlb0pTT04gPSAoc2l6ZUluQnl0ZXMpID0+IHtcbiAgICBjb25zdCBzaXplSW5NQiA9IHNpemVJbkJ5dGVzIC8gMTAyNCAvIDEwMjQ7XG4gICAgLy8gaHR0cHM6Ly9kZXZ0b3BpYS5lc3JpLmNvbS9XZWJHSVMvYXJjZ2lzLWFwcC1jb21wb25lbnRzL2lzc3Vlcy8yNTUzI2lzc3VlY29tbWVudC0zNjQ1NDA0XG4gICAgcmV0dXJuIHNpemVJbk1CID4gNTA7IC8vIDUwTUJcbn07XG5jb25zdCBpc0xhcmdlQ1NWID0gKHNpemVJbkJ5dGVzKSA9PiB7XG4gICAgY29uc3Qgc2l6ZUluTUIgPSBzaXplSW5CeXRlcyAvIDEwMjQgLyAxMDI0O1xuICAgIC8vIGh0dHBzOi8vZGV2dG9waWEuZXNyaS5jb20vV2ViR0lTL2FyY2dpcy1hcHAtY29tcG9uZW50cy9pc3N1ZXMvMjg3NSNpc3N1ZWNvbW1lbnQtMzc0ODkxM1xuICAgIHJldHVybiBzaXplSW5NQiA+IDIwOyAvLyAyME1CXG59O1xuXG5leHBvcnQgeyBpc0xhcmdlQ1NWIGFzIGEsIGZpbmRQb3NzaWJsZUl0ZW1UeXBlc0J5RXh0ZW5zaW9uIGFzIGYsIGlzTGFyZ2VHZW9KU09OIGFzIGksIG1hcEl0ZW1UeXBlc1RvRmlsZUV4dGVuc2lvbnMgYXMgbSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtLXR5cGVzLTU4NmYwMzAxLmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVTdG9yZSB9IGZyb20gJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuXG5jb25zdCB1aVN0b3JlID0gY3JlYXRlU3RvcmUoe1xuICAgIG5leHRUZXh0OiBcIm5leHRcIixcbiAgICB3b3JrZmxvdzogXCJjb250ZW50XCIsXG4gICAgc2NhbGU6IFwibVwiLFxuICAgIGRpc2FibGVTY3JvbGw6IGZhbHNlLFxuICAgIGZlYXR1cmVGbGFnczoge31cbn0pO1xuY29uc3QgdWlTdG9yZVN0YXRlID0gdWlTdG9yZS5zdGF0ZTtcblxuZXhwb3J0IHsgdWlTdG9yZSBhcyBhLCB1aVN0b3JlU3RhdGUgYXMgdSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11aS1iY2E3YmNkMS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=