"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5b7e87"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-browser.entry.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-browser.entry.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_browser: () => (/* binding */ ArcgisNewItemPagesDataStoreBrowser)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-store-e2ae6a67.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e2ae6a67.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./data-store-8e83fb7a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8e83fb7a.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


































const arcgisNewItemPagesDataStoreBrowserCss = ":host{background-color:var(--calcite-color-foreground-2);padding:0px}.inner-container{display:flex;flex-direction:column;padding:1.5rem;height:calc(100% - 65px)}.content-wrapper{flex-grow:1}.breadcrumb-container{margin-top:1rem;margin-bottom:1rem;font-weight:500;display:flex}.breadcrumb__item{display:flex;align-items:center;font-size:0.875rem;color:var(--calcite-color-text-2);margin-right:0.5rem}.breadcrumb--inactive{cursor:pointer;margin-right:0.5rem;color:#00619b}.pagination-text{font-size:0.75rem;font-weight:500;margin-top:1rem;margin-bottom:1rem;color:#757575}.data-set-container{background-color:var(--calcite-color-foreground-1)}.data-set__header{border-width:0px;border-bottom-width:2px;border-style:solid;font-size:0.875rem;padding:0px;border-color:transparent;width:-moz-fit-content;width:fit-content}.data-set__header:hover{cursor:pointer}.data-set__header--selected{border-color:#0079c1}.header-icon{margin-right:0.5rem}.item-list{margin-left:0px;margin-inline-start:0px;padding-inline-start:0px}.data-set__item{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem}.data-set__item:hover{cursor:pointer}.data-set__item>.item--title{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.blue-calcite-icon{--calcite-ui-icon-color:var(--calcite-color-brand)}.sort-icon{margin-left:6rem}.hidden-icon{visibility:hidden}.pagination-wrapper{display:flex;justify-content:center;margin-top:auto;padding-left:0.5rem;padding-right:0.5rem}.header-text{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}";

const ArcgisNewItemPagesDataStoreBrowser = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.dataStoreContentType = "tile-layer";
        this.selectedDataset = null;
        this.datastoreContents = undefined;
        this.originalDatasets = undefined;
        this.sortedDatasets = undefined;
        this.displayDatasets = undefined;
        this.pathHistories = [];
        this.cachedData = {};
        this.error = null;
        this.loading = undefined;
        this.sortCriteria = {
            direction: null,
            criteria: null
        };
        this.userTileLayerTypeSelection = undefined;
        this.itemsPerPage = undefined;
        this.totalItems = undefined;
        this.paginationData = undefined;
    }
    /*
      'Vector tile layer' => vectorCacheDataset
      'Raster tile layer' => cacheDataset
      'Scene layer' => i3sRestCache
      Also show 'folder' type datastore contents
     */
    async componentWillLoad() {
        this.dataStoreContentType =
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.newItemMode === "tileLayer" ? "tile-layer" : "scene-layer";
        this.dataStoreName = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreName;
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_4__.u.i18n.dataStore;
        this.pathHistories = ["/"];
        this.datastoreContents = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents;
        this.originalDatasets = [..._add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents.children];
        this.sortedDatasets = [...this.originalDatasets];
        this.selectedDataset = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset;
        this.cachedData = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedData;
        this.selectedDataset = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset;
        this.serverId = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.serverId;
    }
    toggleSort(criteria) {
        const { sortCriteria } = this;
        const direction = criteria == null
            ? null
            : sortCriteria.criteria !== criteria
                ? "desc"
                : sortCriteria.direction === "desc"
                    ? "asc"
                    : null;
        if (criteria === null || direction === null) {
            this.sortCriteria = { criteria: null, direction: null };
            this.sortedDatasets = this.originalDatasets;
            return;
        }
        this.sortCriteria = { criteria, direction };
        const sortDirectionMultiplier = direction === "asc" ? 1 : -1;
        this.sortedDatasets = [...this.sortedDatasets].sort(function (a, b) {
            const criteriaA = a[criteria].toLowerCase();
            const criteriaB = b[criteria].toLowerCase();
            return criteriaA.localeCompare(criteriaB) * sortDirectionMultiplier;
        });
    }
    async exploreFolder(path, type) {
        var _a;
        this.loading = true;
        const hasCachedData = this.cachedData[path] != null;
        if (!hasCachedData) {
            const response = await (0,_data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_2__.g)(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreId, path, type, this.serverId);
            if (((_a = response.error) === null || _a === void 0 ? void 0 : _a.code) === "failToListDataStoreContents") {
                this.loading = false;
                this.error = "failToListDataStoreContents";
                return;
            }
            this.cachedData = Object.assign(Object.assign({}, this.cachedData), { [path]: response.result });
        }
        const newData = this.cachedData[path];
        this.pathHistories = path === "/" ? ["/"] : path.split("/");
        this.datastoreContents = this.filterContentsByUserSelection(newData);
        this.originalDatasets = [...this.datastoreContents.children];
        this.loading = false;
    }
    filterContentsByUserSelection(contents) {
        const storeType = this.dataStoreContentType;
        const tileLayerPublishType = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.tileLayerPublishType;
        // handles an edge case where the selected data store is empty
        // when the data store is empty, the children attribute does not exist
        if (!contents.children) {
            return Object.assign(Object.assign({}, contents), { children: [] });
        }
        return Object.assign(Object.assign({}, contents), { children: contents.children.filter((element) => {
                const type = element.type;
                let isAcceptable = type === "folder";
                if (storeType === "tile-layer") {
                    isAcceptable || (isAcceptable = (tileLayerPublishType === "tiles" && type === "cacheDataset") ||
                        (tileLayerPublishType === "vectorTiles" && type === "vectorCacheDataset"));
                }
                else if (storeType === "scene-layer") {
                    isAcceptable || (isAcceptable = type === "extractedScenePackage" || type === "i3sRestCache");
                }
                return isAcceptable;
            }) });
    }
    renderErrorItem() {
        const { i18n, error, loading } = this;
        let heading = "";
        let description = "";
        if (error) {
            const i18nErr = i18n.error;
            if (error === "failToListDataStoreContents") {
                heading = i18nErr.listing.heading;
                description = i18nErr.listing.description;
            }
            else {
                heading = i18nErr.noDatasetErrorHeading;
                description = i18nErr.noDatasetErrorDescription;
            }
        }
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: heading, description: description, active: error !== null && !loading, onAlertDismiss: () => {
                this.error = null;
            } }));
    }
    renderHeaderItem(type) {
        const { i18n, sortCriteria } = this;
        const { criteria, direction } = sortCriteria;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { onClick: () => this.toggleSort(type), class: {
                "data-set__header": true,
                "data-set__header--selected": criteria === type && direction != null
            } }, type === "name" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { scale: "s", icon: "circle", class: "hidden-icon header-icon" })), type === "name" ? i18n.fileName : i18n.fileType, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: {
                "blue-calcite-icon sort-icon": true,
                "hidden-icon": criteria !== type || !direction
            }, scale: "s", icon: direction === "asc" ? "caret-up" : "caret-down" })));
    }
    onDatastoreContentsChange() {
        // Reset sort on new data
        this.toggleSort(null);
    }
    onSortedDataSetsChange() {
        // Reset pagination on new sorted data
        // 1 because CC pagination starts at 1
        this.calculatePagination(1);
    }
    calculatePagination(start) {
        const { sortedDatasets } = this;
        const totalItems = sortedDatasets.length;
        this.totalItems = totalItems;
        const MAX_ITEM_PER_PAGE = 5;
        const itemsPerPage = Math.min(totalItems, MAX_ITEM_PER_PAGE);
        const startIndex = start - 1;
        const endIndex = Math.min(startIndex + itemsPerPage, totalItems) - 1;
        this.itemsPerPage = itemsPerPage;
        this.displayDatasets = sortedDatasets.slice(startIndex, endIndex + 1);
        this.paginationData = { startIndex, endIndex };
    }
    handleNext() {
        const dataset = this.selectedDataset;
        if (!dataset) {
            this.error = "noDataSetSelected";
            return;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataset = dataset;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedId = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreId;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.serverId = this.serverId;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.datastoreContents = this.datastoreContents;
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.dataStoreCachedData = this.cachedData;
        _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_1__.i.title = dataset.name.split(".")[0];
        let type;
        switch (dataset.type) {
            case "vectorCacheDataset":
                type = "Vector Tile Service";
                break;
            case "i3sRestCache":
            case "extractedScenePackage":
                type = "Scene Service";
                break;
            case "cacheDataset":
                type = "Map Service";
                // Might be an Image Service but we don't know for sure
                // We can make a certain call to the backend but it would take a really long time
                // Garima is trying to solve this issue with the backend team
                // type = "Image Service";
                break;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_3__.a.type = type;
        this.newItemUpdatePage.emit("serverList");
    }
    render() {
        const { i18n, loading, displayDatasets, originalDatasets, pathHistories, paginationData, dataStoreName } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "inner-container" }, loading ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-loader", { label: "datastore-loader", text: i18n.processing })) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.F, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "content-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "header-text" }, i18n.header), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "breadcrumb-container" }, pathHistories.map((path, index) => {
            const isLast = index === pathHistories.length - 1;
            const isFirst = index === 0;
            const onClickPath = isFirst ? "/" : pathHistories.slice(0, index + 1).join("/");
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "breadcrumb__item", key: `${path}_${index}` }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { onClick: isLast ? undefined : () => this.exploreFolder(onClickPath, "folder") }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: { "breadcrumb--inactive": !isLast } }, isFirst ? dataStoreName : path)), !isLast && (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "chevron-right", scale: "s" })));
        })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination-text" }, displayDatasets.length > 0 &&
            i18n.paginationRange
                .replace("${start}", `${paginationData.startIndex + 1}`)
                .replace("${end}", `${paginationData.endIndex + 1}`)
                .replace("${total}", `${originalDatasets.length}`)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "data-set-container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "data-set__item" }, this.renderHeaderItem("name"), this.renderHeaderItem("type")), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button-group", { name: "file-group", onCalciteRadioButtonGroupChange: (event) => {
                this.selectedDataset = event.target.selectedItem.value;
            }, layout: "vertical" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("ul", { class: "item-list" }, displayDatasets.length > 0 ? (displayDatasets.map((dataSet) => {
            var _a;
            const { name, path, type } = dataSet;
            const isFolder = type === "folder";
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { key: `dataSet--item__${path}`, class: "data-set__item", onClick: () => {
                    if (isFolder) {
                        this.exploreFolder(dataSet.path, "folder");
                    }
                } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { layout: "inline", class: "description" }, isFolder ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "folder", scale: "s", class: "blue-calcite-icon" })) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button", { value: dataSet, checked: path === ((_a = this.selectedDataset) === null || _a === void 0 ? void 0 : _a.path) })), name), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "item--title" }, type)));
        })) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", { class: "data-set__item" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { layout: "inline" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: "exclamation-mark-triangle", scale: "s" }), i18n.emptyFolder))))))), this.itemsPerPage > 0 && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "pagination-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-pagination", { startItem: paginationData.startIndex + 1, totalItems: this.totalItems, pageSize: this.itemsPerPage, onCalcitePaginationChange: (event) => {
                const node = event.target;
                this.calculatePagination(node.startItem);
            } })))))), this.renderErrorItem()));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
    static get watchers() { return {
        "originalDatasets": ["onDatastoreContentsChange"],
        "sortedDatasets": ["onSortedDataSetsChange"]
    }; }
};
ArcgisNewItemPagesDataStoreBrowser.style = arcgisNewItemPagesDataStoreBrowserCss;



//# sourceMappingURL=arcgis-new-item-pages-data-store-browser.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLTViN2U4Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNEg7QUFDbkQ7QUFDSjtBQUNWO0FBQ047QUFDeEI7QUFDQztBQUNLO0FBQ0w7QUFDSDtBQUNPO0FBQ0g7QUFDRztBQUNHO0FBQ0E7QUFDVDtBQUNLO0FBQ0w7QUFDQztBQUNGO0FBQ0c7QUFDSDtBQUNDO0FBQ087QUFDUDtBQUNNO0FBQ0E7QUFDRztBQUNWO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7O0FBRTdCLHFEQUFxRCxtREFBbUQsWUFBWSxpQkFBaUIsYUFBYSxzQkFBc0IsZUFBZSx5QkFBeUIsaUJBQWlCLFlBQVksc0JBQXNCLGdCQUFnQixtQkFBbUIsZ0JBQWdCLGFBQWEsa0JBQWtCLGFBQWEsbUJBQW1CLG1CQUFtQixrQ0FBa0Msb0JBQW9CLHNCQUFzQixlQUFlLG9CQUFvQixjQUFjLGlCQUFpQixrQkFBa0IsZ0JBQWdCLGdCQUFnQixtQkFBbUIsY0FBYyxvQkFBb0IsbURBQW1ELGtCQUFrQixpQkFBaUIsd0JBQXdCLG1CQUFtQixtQkFBbUIsWUFBWSx5QkFBeUIsdUJBQXVCLGtCQUFrQix3QkFBd0IsZUFBZSw0QkFBNEIscUJBQXFCLGFBQWEsb0JBQW9CLFdBQVcsZ0JBQWdCLHdCQUF3Qix5QkFBeUIsZ0JBQWdCLGFBQWEsZ0RBQWdELHFCQUFxQixzQkFBc0IsbUJBQW1CLHNCQUFzQixzQkFBc0IsZUFBZSw2QkFBNkIsbUJBQW1CLGVBQWUsa0JBQWtCLG1CQUFtQixtREFBbUQsV0FBVyxpQkFBaUIsYUFBYSxrQkFBa0Isb0JBQW9CLGFBQWEsdUJBQXVCLGdCQUFnQixvQkFBb0IscUJBQXFCLGFBQWEsZUFBZSxnQkFBZ0Isa0NBQWtDOztBQUUzbkQ7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LFNBQVMsbUNBQW1DLCtDQUErQyxxREFBQyxtQkFBbUIsbUNBQW1DO0FBQ2hWLFNBQVMsSUFBSSxxREFBQyxVQUFVLDBCQUEwQjtBQUNsRDtBQUNBLDRCQUE0QixNQUFNLE1BQU0sOEJBQThCO0FBQ3RFLDRCQUE0QixJQUFJLE1BQU0sNEJBQTRCO0FBQ2xFLDRCQUE0QixNQUFNLE1BQU0sd0JBQXdCLEtBQUsscURBQUMsVUFBVSw2QkFBNkIsRUFBRSxxREFBQyxVQUFVLHlCQUF5QixpRUFBaUUscURBQUMsaUNBQWlDO0FBQ3RQO0FBQ0EsYUFBYSxzQkFBc0IsRUFBRSxxREFBQyxTQUFTLG9CQUFvQjtBQUNuRTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQSxvQkFBb0IscURBQUMsU0FBUyx1QkFBdUIsS0FBSztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsRUFBRSxxREFBQyxvQkFBb0Isd0NBQXdDLGNBQWMscURBQUMsbUJBQW1CLHdEQUF3RCxNQUFNLHFEQUFDLDJCQUEyQiw4R0FBOEcsV0FBVyxxREFBQyxRQUFRLHNCQUFzQjtBQUN0VyxTQUFTLE1BQU0scURBQUMsU0FBUyx5QkFBeUIsRUFBRSxxREFBQyxvQkFBb0Isa0JBQWtCLEVBQUUscURBQUMsbUJBQW1CLCtDQUErQyxzREFBc0QscURBQUMsVUFBVSw2QkFBNkIsRUFBRSxxREFBQyx5QkFBeUI7QUFDMVI7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGVBQWUsT0FBTyxxREFBVTtBQUNoQyw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEY7O0FBRTFGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtYnJvd3Nlci5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgRiBhcyBGcmFnbWVudCwgSCBhcyBIb3N0LCBkIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWUzYmY3ZGE3LmpzJztcbmltcG9ydCB7IGkgYXMgaXRlbVByb3BlcnRpZXNTdGF0ZSB9IGZyb20gJy4vaXRlbS1wcm9wZXJ0aWVzLTEwNDkxYjJlLmpzJztcbmltcG9ydCB7IGcgYXMgZ2V0RGF0YXN0b3JlQ29udGVudHMgfSBmcm9tICcuL2RhdGEtc3RvcmUtZTJhZTZhNjcuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1iY2E3YmNkMS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcbmltcG9ydCAnLi9zZXJ2aWNlLThjMmM0MjQxLmpzJztcbmltcG9ydCAnLi9kYXRhLXN0b3JlLThlODNmYjdhLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTU3M2JiNDczLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTc5ZmIzMDJjLmpzJztcbmltcG9ydCAnLi9ndWlkLWFlYWVkODRkLmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtYmNiODllNjkuanMnO1xuaW1wb3J0ICcuL3VzZXItM2VhNjljM2EuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LWQ2MjY2MGQ0LmpzJztcbmltcG9ydCAnLi9hcGktMmUzYTEzNmYuanMnO1xuaW1wb3J0ICcuL3N0cmluZy01OGE1ZmVmMy5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCAnLi9pdGVtLWM1OGZmY2VkLmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS04ZDM4NDc5Ni5qcyc7XG5pbXBvcnQgJy4vaXRlbS0zNTM1NTUyZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC04MTM3M2Y2ZC5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy0yMDI5YjA2Yi5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci0xN2I2NDk0Ni5qcyc7XG5pbXBvcnQgJy4vYWdzLWViNDU4YTAzLmpzJztcbmltcG9ydCAnLi91cmwtMzU4NzVhMTAuanMnO1xuaW1wb3J0ICcuL3N0b3JhZ2UtMDM1M2E3NjkuanMnO1xuaW1wb3J0ICcuL2ZpbGUtYmY4YWI5MGYuanMnO1xuaW1wb3J0ICcuL3N0b3JlLTZhODhlNmM1LmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlQnJvd3NlckNzcyA9IFwiOmhvc3R7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMik7cGFkZGluZzowcHh9LmlubmVyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3BhZGRpbmc6MS41cmVtO2hlaWdodDpjYWxjKDEwMCUgLSA2NXB4KX0uY29udGVudC13cmFwcGVye2ZsZXgtZ3JvdzoxfS5icmVhZGNydW1iLWNvbnRhaW5lcnttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxcmVtO2ZvbnQtd2VpZ2h0OjUwMDtkaXNwbGF5OmZsZXh9LmJyZWFkY3J1bWJfX2l0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MC44NzVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpO21hcmdpbi1yaWdodDowLjVyZW19LmJyZWFkY3J1bWItLWluYWN0aXZle2N1cnNvcjpwb2ludGVyO21hcmdpbi1yaWdodDowLjVyZW07Y29sb3I6IzAwNjE5Yn0ucGFnaW5hdGlvbi10ZXh0e2ZvbnQtc2l6ZTowLjc1cmVtO2ZvbnQtd2VpZ2h0OjUwMDttYXJnaW4tdG9wOjFyZW07bWFyZ2luLWJvdHRvbToxcmVtO2NvbG9yOiM3NTc1NzV9LmRhdGEtc2V0LWNvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKX0uZGF0YS1zZXRfX2hlYWRlcntib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ib3R0b20td2lkdGg6MnB4O2JvcmRlci1zdHlsZTpzb2xpZDtmb250LXNpemU6MC44NzVyZW07cGFkZGluZzowcHg7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O3dpZHRoOi1tb3otZml0LWNvbnRlbnQ7d2lkdGg6Zml0LWNvbnRlbnR9LmRhdGEtc2V0X19oZWFkZXI6aG92ZXJ7Y3Vyc29yOnBvaW50ZXJ9LmRhdGEtc2V0X19oZWFkZXItLXNlbGVjdGVke2JvcmRlci1jb2xvcjojMDA3OWMxfS5oZWFkZXItaWNvbnttYXJnaW4tcmlnaHQ6MC41cmVtfS5pdGVtLWxpc3R7bWFyZ2luLWxlZnQ6MHB4O21hcmdpbi1pbmxpbmUtc3RhcnQ6MHB4O3BhZGRpbmctaW5saW5lLXN0YXJ0OjBweH0uZGF0YS1zZXRfX2l0ZW17ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMiwgbWlubWF4KDAsIDFmcikpO3BhZGRpbmctbGVmdDowLjc1cmVtO3BhZGRpbmctcmlnaHQ6MC43NXJlbTtwYWRkaW5nLXRvcDowLjVyZW07cGFkZGluZy1ib3R0b206MC41cmVtfS5kYXRhLXNldF9faXRlbTpob3ZlcntjdXJzb3I6cG9pbnRlcn0uZGF0YS1zZXRfX2l0ZW0+Lml0ZW0tLXRpdGxle2ZvbnQtc2l6ZTowLjg3NXJlbTttYXJnaW4tdG9wOjBweDttYXJnaW4tYm90dG9tOjBweH0uYmx1ZS1jYWxjaXRlLWljb257LS1jYWxjaXRlLXVpLWljb24tY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCl9LnNvcnQtaWNvbnttYXJnaW4tbGVmdDo2cmVtfS5oaWRkZW4taWNvbnt2aXNpYmlsaXR5OmhpZGRlbn0ucGFnaW5hdGlvbi13cmFwcGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbi10b3A6YXV0bztwYWRkaW5nLWxlZnQ6MC41cmVtO3BhZGRpbmctcmlnaHQ6MC41cmVtfS5oZWFkZXItdGV4dHtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDo1MDA7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpfVwiO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMuZGF0YVN0b3JlQ29udGVudFR5cGUgPSBcInRpbGUtbGF5ZXJcIjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFzZXQgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGFzdG9yZUNvbnRlbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRGF0YXNldHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc29ydGVkRGF0YXNldHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGlzcGxheURhdGFzZXRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBhdGhIaXN0b3JpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jYWNoZWREYXRhID0ge307XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc29ydENyaXRlcmlhID0ge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiBudWxsLFxuICAgICAgICAgICAgY3JpdGVyaWE6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VyVGlsZUxheWVyVHlwZVNlbGVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pdGVtc1BlclBhZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWxJdGVtcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wYWdpbmF0aW9uRGF0YSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLypcbiAgICAgICdWZWN0b3IgdGlsZSBsYXllcicgPT4gdmVjdG9yQ2FjaGVEYXRhc2V0XG4gICAgICAnUmFzdGVyIHRpbGUgbGF5ZXInID0+IGNhY2hlRGF0YXNldFxuICAgICAgJ1NjZW5lIGxheWVyJyA9PiBpM3NSZXN0Q2FjaGVcbiAgICAgIEFsc28gc2hvdyAnZm9sZGVyJyB0eXBlIGRhdGFzdG9yZSBjb250ZW50c1xuICAgICAqL1xuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLmRhdGFTdG9yZUNvbnRlbnRUeXBlID1cbiAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS5uZXdJdGVtTW9kZSA9PT0gXCJ0aWxlTGF5ZXJcIiA/IFwidGlsZS1sYXllclwiIDogXCJzY2VuZS1sYXllclwiO1xuICAgICAgICB0aGlzLmRhdGFTdG9yZU5hbWUgPSBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlTmFtZTtcbiAgICAgICAgdGhpcy5pMThuID0gdWlTdG9yZVN0YXRlLmkxOG4uZGF0YVN0b3JlO1xuICAgICAgICB0aGlzLnBhdGhIaXN0b3JpZXMgPSBbXCIvXCJdO1xuICAgICAgICB0aGlzLmRhdGFzdG9yZUNvbnRlbnRzID0gYWRkSXRlbVN0YXRlLmRhdGFzdG9yZUNvbnRlbnRzO1xuICAgICAgICB0aGlzLm9yaWdpbmFsRGF0YXNldHMgPSBbLi4uYWRkSXRlbVN0YXRlLmRhdGFzdG9yZUNvbnRlbnRzLmNoaWxkcmVuXTtcbiAgICAgICAgdGhpcy5zb3J0ZWREYXRhc2V0cyA9IFsuLi50aGlzLm9yaWdpbmFsRGF0YXNldHNdO1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YXNldCA9IGFkZEl0ZW1TdGF0ZS5kYXRhc2V0O1xuICAgICAgICB0aGlzLmNhY2hlZERhdGEgPSBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlQ2FjaGVkRGF0YTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGFzZXQgPSBhZGRJdGVtU3RhdGUuZGF0YXNldDtcbiAgICAgICAgdGhpcy5zZXJ2ZXJJZCA9IGFkZEl0ZW1TdGF0ZS5zZXJ2ZXJJZDtcbiAgICB9XG4gICAgdG9nZ2xlU29ydChjcml0ZXJpYSkge1xuICAgICAgICBjb25zdCB7IHNvcnRDcml0ZXJpYSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gY3JpdGVyaWEgPT0gbnVsbFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IHNvcnRDcml0ZXJpYS5jcml0ZXJpYSAhPT0gY3JpdGVyaWFcbiAgICAgICAgICAgICAgICA/IFwiZGVzY1wiXG4gICAgICAgICAgICAgICAgOiBzb3J0Q3JpdGVyaWEuZGlyZWN0aW9uID09PSBcImRlc2NcIlxuICAgICAgICAgICAgICAgICAgICA/IFwiYXNjXCJcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBpZiAoY3JpdGVyaWEgPT09IG51bGwgfHwgZGlyZWN0aW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRDcml0ZXJpYSA9IHsgY3JpdGVyaWE6IG51bGwsIGRpcmVjdGlvbjogbnVsbCB9O1xuICAgICAgICAgICAgdGhpcy5zb3J0ZWREYXRhc2V0cyA9IHRoaXMub3JpZ2luYWxEYXRhc2V0cztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvcnRDcml0ZXJpYSA9IHsgY3JpdGVyaWEsIGRpcmVjdGlvbiB9O1xuICAgICAgICBjb25zdCBzb3J0RGlyZWN0aW9uTXVsdGlwbGllciA9IGRpcmVjdGlvbiA9PT0gXCJhc2NcIiA/IDEgOiAtMTtcbiAgICAgICAgdGhpcy5zb3J0ZWREYXRhc2V0cyA9IFsuLi50aGlzLnNvcnRlZERhdGFzZXRzXS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICBjb25zdCBjcml0ZXJpYUEgPSBhW2NyaXRlcmlhXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgY3JpdGVyaWFCID0gYltjcml0ZXJpYV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiBjcml0ZXJpYUEubG9jYWxlQ29tcGFyZShjcml0ZXJpYUIpICogc29ydERpcmVjdGlvbk11bHRpcGxpZXI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBleHBsb3JlRm9sZGVyKHBhdGgsIHR5cGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCBoYXNDYWNoZWREYXRhID0gdGhpcy5jYWNoZWREYXRhW3BhdGhdICE9IG51bGw7XG4gICAgICAgIGlmICghaGFzQ2FjaGVkRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXREYXRhc3RvcmVDb250ZW50cyhhZGRJdGVtU3RhdGUuZGF0YVN0b3JlSWQsIHBhdGgsIHR5cGUsIHRoaXMuc2VydmVySWQpO1xuICAgICAgICAgICAgaWYgKCgoX2EgPSByZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvZGUpID09PSBcImZhaWxUb0xpc3REYXRhU3RvcmVDb250ZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiZmFpbFRvTGlzdERhdGFTdG9yZUNvbnRlbnRzXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jYWNoZWREYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmNhY2hlZERhdGEpLCB7IFtwYXRoXTogcmVzcG9uc2UucmVzdWx0IH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0RhdGEgPSB0aGlzLmNhY2hlZERhdGFbcGF0aF07XG4gICAgICAgIHRoaXMucGF0aEhpc3RvcmllcyA9IHBhdGggPT09IFwiL1wiID8gW1wiL1wiXSA6IHBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICB0aGlzLmRhdGFzdG9yZUNvbnRlbnRzID0gdGhpcy5maWx0ZXJDb250ZW50c0J5VXNlclNlbGVjdGlvbihuZXdEYXRhKTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbERhdGFzZXRzID0gWy4uLnRoaXMuZGF0YXN0b3JlQ29udGVudHMuY2hpbGRyZW5dO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZmlsdGVyQ29udGVudHNCeVVzZXJTZWxlY3Rpb24oY29udGVudHMpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVUeXBlID0gdGhpcy5kYXRhU3RvcmVDb250ZW50VHlwZTtcbiAgICAgICAgY29uc3QgdGlsZUxheWVyUHVibGlzaFR5cGUgPSBhZGRJdGVtU3RhdGUudGlsZUxheWVyUHVibGlzaFR5cGU7XG4gICAgICAgIC8vIGhhbmRsZXMgYW4gZWRnZSBjYXNlIHdoZXJlIHRoZSBzZWxlY3RlZCBkYXRhIHN0b3JlIGlzIGVtcHR5XG4gICAgICAgIC8vIHdoZW4gdGhlIGRhdGEgc3RvcmUgaXMgZW1wdHksIHRoZSBjaGlsZHJlbiBhdHRyaWJ1dGUgZG9lcyBub3QgZXhpc3RcbiAgICAgICAgaWYgKCFjb250ZW50cy5jaGlsZHJlbikge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29udGVudHMpLCB7IGNoaWxkcmVuOiBbXSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZW50cyksIHsgY2hpbGRyZW46IGNvbnRlbnRzLmNoaWxkcmVuLmZpbHRlcigoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBlbGVtZW50LnR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IGlzQWNjZXB0YWJsZSA9IHR5cGUgPT09IFwiZm9sZGVyXCI7XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlVHlwZSA9PT0gXCJ0aWxlLWxheWVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNBY2NlcHRhYmxlIHx8IChpc0FjY2VwdGFibGUgPSAodGlsZUxheWVyUHVibGlzaFR5cGUgPT09IFwidGlsZXNcIiAmJiB0eXBlID09PSBcImNhY2hlRGF0YXNldFwiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRpbGVMYXllclB1Ymxpc2hUeXBlID09PSBcInZlY3RvclRpbGVzXCIgJiYgdHlwZSA9PT0gXCJ2ZWN0b3JDYWNoZURhdGFzZXRcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdG9yZVR5cGUgPT09IFwic2NlbmUtbGF5ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBpc0FjY2VwdGFibGUgfHwgKGlzQWNjZXB0YWJsZSA9IHR5cGUgPT09IFwiZXh0cmFjdGVkU2NlbmVQYWNrYWdlXCIgfHwgdHlwZSA9PT0gXCJpM3NSZXN0Q2FjaGVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpc0FjY2VwdGFibGU7XG4gICAgICAgICAgICB9KSB9KTtcbiAgICB9XG4gICAgcmVuZGVyRXJyb3JJdGVtKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGVycm9yLCBsb2FkaW5nIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaGVhZGluZyA9IFwiXCI7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgaTE4bkVyciA9IGkxOG4uZXJyb3I7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT09IFwiZmFpbFRvTGlzdERhdGFTdG9yZUNvbnRlbnRzXCIpIHtcbiAgICAgICAgICAgICAgICBoZWFkaW5nID0gaTE4bkVyci5saXN0aW5nLmhlYWRpbmc7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBpMThuRXJyLmxpc3RpbmcuZGVzY3JpcHRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWFkaW5nID0gaTE4bkVyci5ub0RhdGFzZXRFcnJvckhlYWRpbmc7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBpMThuRXJyLm5vRGF0YXNldEVycm9yRGVzY3JpcHRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChoKFwiYXJjZ2lzLW5ldy1pdGVtLWFsZXJ0XCIsIHsgaGVhZGluZzogaGVhZGluZywgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLCBhY3RpdmU6IGVycm9yICE9PSBudWxsICYmICFsb2FkaW5nLCBvbkFsZXJ0RGlzbWlzczogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgfSB9KSk7XG4gICAgfVxuICAgIHJlbmRlckhlYWRlckl0ZW0odHlwZSkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIHNvcnRDcml0ZXJpYSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBjcml0ZXJpYSwgZGlyZWN0aW9uIH0gPSBzb3J0Q3JpdGVyaWE7XG4gICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IG9uQ2xpY2s6ICgpID0+IHRoaXMudG9nZ2xlU29ydCh0eXBlKSwgY2xhc3M6IHtcbiAgICAgICAgICAgICAgICBcImRhdGEtc2V0X19oZWFkZXJcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImRhdGEtc2V0X19oZWFkZXItLXNlbGVjdGVkXCI6IGNyaXRlcmlhID09PSB0eXBlICYmIGRpcmVjdGlvbiAhPSBudWxsXG4gICAgICAgICAgICB9IH0sIHR5cGUgPT09IFwibmFtZVwiICYmIChoKFwiY2FsY2l0ZS1pY29uXCIsIHsgc2NhbGU6IFwic1wiLCBpY29uOiBcImNpcmNsZVwiLCBjbGFzczogXCJoaWRkZW4taWNvbiBoZWFkZXItaWNvblwiIH0pKSwgdHlwZSA9PT0gXCJuYW1lXCIgPyBpMThuLmZpbGVOYW1lIDogaTE4bi5maWxlVHlwZSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgXCJibHVlLWNhbGNpdGUtaWNvbiBzb3J0LWljb25cIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcImhpZGRlbi1pY29uXCI6IGNyaXRlcmlhICE9PSB0eXBlIHx8ICFkaXJlY3Rpb25cbiAgICAgICAgICAgIH0sIHNjYWxlOiBcInNcIiwgaWNvbjogZGlyZWN0aW9uID09PSBcImFzY1wiID8gXCJjYXJldC11cFwiIDogXCJjYXJldC1kb3duXCIgfSkpKTtcbiAgICB9XG4gICAgb25EYXRhc3RvcmVDb250ZW50c0NoYW5nZSgpIHtcbiAgICAgICAgLy8gUmVzZXQgc29ydCBvbiBuZXcgZGF0YVxuICAgICAgICB0aGlzLnRvZ2dsZVNvcnQobnVsbCk7XG4gICAgfVxuICAgIG9uU29ydGVkRGF0YVNldHNDaGFuZ2UoKSB7XG4gICAgICAgIC8vIFJlc2V0IHBhZ2luYXRpb24gb24gbmV3IHNvcnRlZCBkYXRhXG4gICAgICAgIC8vIDEgYmVjYXVzZSBDQyBwYWdpbmF0aW9uIHN0YXJ0cyBhdCAxXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlUGFnaW5hdGlvbigxKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlUGFnaW5hdGlvbihzdGFydCkge1xuICAgICAgICBjb25zdCB7IHNvcnRlZERhdGFzZXRzIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB0b3RhbEl0ZW1zID0gc29ydGVkRGF0YXNldHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRvdGFsSXRlbXMgPSB0b3RhbEl0ZW1zO1xuICAgICAgICBjb25zdCBNQVhfSVRFTV9QRVJfUEFHRSA9IDU7XG4gICAgICAgIGNvbnN0IGl0ZW1zUGVyUGFnZSA9IE1hdGgubWluKHRvdGFsSXRlbXMsIE1BWF9JVEVNX1BFUl9QQUdFKTtcbiAgICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IHN0YXJ0IC0gMTtcbiAgICAgICAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1pbihzdGFydEluZGV4ICsgaXRlbXNQZXJQYWdlLCB0b3RhbEl0ZW1zKSAtIDE7XG4gICAgICAgIHRoaXMuaXRlbXNQZXJQYWdlID0gaXRlbXNQZXJQYWdlO1xuICAgICAgICB0aGlzLmRpc3BsYXlEYXRhc2V0cyA9IHNvcnRlZERhdGFzZXRzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4ICsgMSk7XG4gICAgICAgIHRoaXMucGFnaW5hdGlvbkRhdGEgPSB7IHN0YXJ0SW5kZXgsIGVuZEluZGV4IH07XG4gICAgfVxuICAgIGhhbmRsZU5leHQoKSB7XG4gICAgICAgIGNvbnN0IGRhdGFzZXQgPSB0aGlzLnNlbGVjdGVkRGF0YXNldDtcbiAgICAgICAgaWYgKCFkYXRhc2V0KSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gXCJub0RhdGFTZXRTZWxlY3RlZFwiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFkZEl0ZW1TdGF0ZS5kYXRhc2V0ID0gZGF0YXNldDtcbiAgICAgICAgYWRkSXRlbVN0YXRlLmRhdGFTdG9yZUNhY2hlZElkID0gYWRkSXRlbVN0YXRlLmRhdGFTdG9yZUlkO1xuICAgICAgICBhZGRJdGVtU3RhdGUuc2VydmVySWQgPSB0aGlzLnNlcnZlcklkO1xuICAgICAgICBhZGRJdGVtU3RhdGUuZGF0YXN0b3JlQ29udGVudHMgPSB0aGlzLmRhdGFzdG9yZUNvbnRlbnRzO1xuICAgICAgICBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlQ2FjaGVkRGF0YSA9IHRoaXMuY2FjaGVkRGF0YTtcbiAgICAgICAgaXRlbVByb3BlcnRpZXNTdGF0ZS50aXRsZSA9IGRhdGFzZXQubmFtZS5zcGxpdChcIi5cIilbMF07XG4gICAgICAgIGxldCB0eXBlO1xuICAgICAgICBzd2l0Y2ggKGRhdGFzZXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInZlY3RvckNhY2hlRGF0YXNldFwiOlxuICAgICAgICAgICAgICAgIHR5cGUgPSBcIlZlY3RvciBUaWxlIFNlcnZpY2VcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJpM3NSZXN0Q2FjaGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJleHRyYWN0ZWRTY2VuZVBhY2thZ2VcIjpcbiAgICAgICAgICAgICAgICB0eXBlID0gXCJTY2VuZSBTZXJ2aWNlXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2FjaGVEYXRhc2V0XCI6XG4gICAgICAgICAgICAgICAgdHlwZSA9IFwiTWFwIFNlcnZpY2VcIjtcbiAgICAgICAgICAgICAgICAvLyBNaWdodCBiZSBhbiBJbWFnZSBTZXJ2aWNlIGJ1dCB3ZSBkb24ndCBrbm93IGZvciBzdXJlXG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuIG1ha2UgYSBjZXJ0YWluIGNhbGwgdG8gdGhlIGJhY2tlbmQgYnV0IGl0IHdvdWxkIHRha2UgYSByZWFsbHkgbG9uZyB0aW1lXG4gICAgICAgICAgICAgICAgLy8gR2FyaW1hIGlzIHRyeWluZyB0byBzb2x2ZSB0aGlzIGlzc3VlIHdpdGggdGhlIGJhY2tlbmQgdGVhbVxuICAgICAgICAgICAgICAgIC8vIHR5cGUgPSBcIkltYWdlIFNlcnZpY2VcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBhZGRJdGVtU3RhdGUudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubmV3SXRlbVVwZGF0ZVBhZ2UuZW1pdChcInNlcnZlckxpc3RcIik7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBpMThuLCBsb2FkaW5nLCBkaXNwbGF5RGF0YXNldHMsIG9yaWdpbmFsRGF0YXNldHMsIHBhdGhIaXN0b3JpZXMsIHBhZ2luYXRpb25EYXRhLCBkYXRhU3RvcmVOYW1lIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcImlubmVyLWNvbnRhaW5lclwiIH0sIGxvYWRpbmcgPyAoaChcImNhbGNpdGUtbG9hZGVyXCIsIHsgbGFiZWw6IFwiZGF0YXN0b3JlLWxvYWRlclwiLCB0ZXh0OiBpMThuLnByb2Nlc3NpbmcgfSkpIDogKGgoRnJhZ21lbnQsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJjb250ZW50LXdyYXBwZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGVhZGVyLXRleHRcIiB9LCBpMThuLmhlYWRlciksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJicmVhZGNydW1iLWNvbnRhaW5lclwiIH0sIHBhdGhIaXN0b3JpZXMubWFwKChwYXRoLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNMYXN0ID0gaW5kZXggPT09IHBhdGhIaXN0b3JpZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgICAgIGNvbnN0IG9uQ2xpY2tQYXRoID0gaXNGaXJzdCA/IFwiL1wiIDogcGF0aEhpc3Rvcmllcy5zbGljZSgwLCBpbmRleCArIDEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiYnJlYWRjcnVtYl9faXRlbVwiLCBrZXk6IGAke3BhdGh9XyR7aW5kZXh9YCB9LCBoKFwic3BhblwiLCB7IG9uQ2xpY2s6IGlzTGFzdCA/IHVuZGVmaW5lZCA6ICgpID0+IHRoaXMuZXhwbG9yZUZvbGRlcihvbkNsaWNrUGF0aCwgXCJmb2xkZXJcIikgfSwgaChcInNwYW5cIiwgeyBjbGFzczogeyBcImJyZWFkY3J1bWItLWluYWN0aXZlXCI6ICFpc0xhc3QgfSB9LCBpc0ZpcnN0ID8gZGF0YVN0b3JlTmFtZSA6IHBhdGgpKSwgIWlzTGFzdCAmJiBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJjaGV2cm9uLXJpZ2h0XCIsIHNjYWxlOiBcInNcIiB9KSkpO1xuICAgICAgICB9KSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJwYWdpbmF0aW9uLXRleHRcIiB9LCBkaXNwbGF5RGF0YXNldHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgaTE4bi5wYWdpbmF0aW9uUmFuZ2VcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIiR7c3RhcnR9XCIsIGAke3BhZ2luYXRpb25EYXRhLnN0YXJ0SW5kZXggKyAxfWApXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIke2VuZH1cIiwgYCR7cGFnaW5hdGlvbkRhdGEuZW5kSW5kZXggKyAxfWApXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCIke3RvdGFsfVwiLCBgJHtvcmlnaW5hbERhdGFzZXRzLmxlbmd0aH1gKSksIGgoXCJkaXZcIiwgeyBjbGFzczogXCJkYXRhLXNldC1jb250YWluZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZGF0YS1zZXRfX2l0ZW1cIiB9LCB0aGlzLnJlbmRlckhlYWRlckl0ZW0oXCJuYW1lXCIpLCB0aGlzLnJlbmRlckhlYWRlckl0ZW0oXCJ0eXBlXCIpKSwgaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uLWdyb3VwXCIsIHsgbmFtZTogXCJmaWxlLWdyb3VwXCIsIG9uQ2FsY2l0ZVJhZGlvQnV0dG9uR3JvdXBDaGFuZ2U6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhc2V0ID0gZXZlbnQudGFyZ2V0LnNlbGVjdGVkSXRlbS52YWx1ZTtcbiAgICAgICAgICAgIH0sIGxheW91dDogXCJ2ZXJ0aWNhbFwiIH0sIGgoXCJ1bFwiLCB7IGNsYXNzOiBcIml0ZW0tbGlzdFwiIH0sIGRpc3BsYXlEYXRhc2V0cy5sZW5ndGggPiAwID8gKGRpc3BsYXlEYXRhc2V0cy5tYXAoKGRhdGFTZXQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgcGF0aCwgdHlwZSB9ID0gZGF0YVNldDtcbiAgICAgICAgICAgIGNvbnN0IGlzRm9sZGVyID0gdHlwZSA9PT0gXCJmb2xkZXJcIjtcbiAgICAgICAgICAgIHJldHVybiAoaChcImxpXCIsIHsga2V5OiBgZGF0YVNldC0taXRlbV9fJHtwYXRofWAsIGNsYXNzOiBcImRhdGEtc2V0X19pdGVtXCIsIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cGxvcmVGb2xkZXIoZGF0YVNldC5wYXRoLCBcImZvbGRlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gfSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBsYXlvdXQ6IFwiaW5saW5lXCIsIGNsYXNzOiBcImRlc2NyaXB0aW9uXCIgfSwgaXNGb2xkZXIgPyAoaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IFwiZm9sZGVyXCIsIHNjYWxlOiBcInNcIiwgY2xhc3M6IFwiYmx1ZS1jYWxjaXRlLWljb25cIiB9KSkgOiAoaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uXCIsIHsgdmFsdWU6IGRhdGFTZXQsIGNoZWNrZWQ6IHBhdGggPT09ICgoX2EgPSB0aGlzLnNlbGVjdGVkRGF0YXNldCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhdGgpIH0pKSwgbmFtZSksIGgoXCJwXCIsIHsgY2xhc3M6IFwiaXRlbS0tdGl0bGVcIiB9LCB0eXBlKSkpO1xuICAgICAgICB9KSkgOiAoaChcImxpXCIsIHsgY2xhc3M6IFwiZGF0YS1zZXRfX2l0ZW1cIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGxheW91dDogXCJpbmxpbmVcIiB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsIHNjYWxlOiBcInNcIiB9KSwgaTE4bi5lbXB0eUZvbGRlcikpKSkpKSksIHRoaXMuaXRlbXNQZXJQYWdlID4gMCAmJiAoaChcImRpdlwiLCB7IGNsYXNzOiBcInBhZ2luYXRpb24td3JhcHBlclwiIH0sIGgoXCJjYWxjaXRlLXBhZ2luYXRpb25cIiwgeyBzdGFydEl0ZW06IHBhZ2luYXRpb25EYXRhLnN0YXJ0SW5kZXggKyAxLCB0b3RhbEl0ZW1zOiB0aGlzLnRvdGFsSXRlbXMsIHBhZ2VTaXplOiB0aGlzLml0ZW1zUGVyUGFnZSwgb25DYWxjaXRlUGFnaW5hdGlvbkNoYW5nZTogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVBhZ2luYXRpb24obm9kZS5zdGFydEl0ZW0pO1xuICAgICAgICAgICAgfSB9KSkpKSkpLCB0aGlzLnJlbmRlckVycm9ySXRlbSgpKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcIm9yaWdpbmFsRGF0YXNldHNcIjogW1wib25EYXRhc3RvcmVDb250ZW50c0NoYW5nZVwiXSxcbiAgICAgICAgXCJzb3J0ZWREYXRhc2V0c1wiOiBbXCJvblNvcnRlZERhdGFTZXRzQ2hhbmdlXCJdXG4gICAgfTsgfVxufTtcbkFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZUJyb3dzZXIuc3R5bGUgPSBhcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVCcm93c2VyIGFzIGFyY2dpc19uZXdfaXRlbV9wYWdlc19kYXRhX3N0b3JlX2Jyb3dzZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtYnJvd3Nlci5lbnRyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=