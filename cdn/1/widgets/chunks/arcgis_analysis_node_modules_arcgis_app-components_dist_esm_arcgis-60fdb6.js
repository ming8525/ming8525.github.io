/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-60fdb6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-60fdb6"],{96565:(e,t,r)=>{r.r(t),r.d(t,{arcgis_image_item_preview:()=>a});var n=r(81149),i=r(69283),o=r(59224);const a=class{constructor(e){(0,n.r)(this,e),this.jsapiUrl=void 0,this.previewLayerUrl=void 0,this.previewImageItemObjectId=void 0,this.loading=!0}async componentDidLoad(){this.el.shadowRoot.firstElementChild.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${this.jsapiUrl}/themes/light/main.css" />`),this.initMapView()}handleRefreshImageItemPreviewLayer(){this.refreshImageItemPreviewLayer(this.previewImageItemObjectId)}async initMapView(){try{const{previewLayerUrl:e,previewImageItemObjectId:t}=this,[r,n,o]=await(0,i.l)(["esri/Map","esri/views/MapView","esri/layers/ImageryLayer"]);this.previewLayer=new o({url:e,visible:!1});const a=new r({layers:[this.previewLayer]});this.mapView=new n({map:a,container:this.container}),this.mapView.ui.remove(["attribution"]),this.mapView.when((()=>{this.refreshImageItemPreviewLayer(t),this.loading=!1}))}catch(e){}}async refreshImageItemPreviewLayer(e){const[t]=await(0,i.l)(["esri/layers/support/MosaicRule"]),r=new t({method:"lock-raster",lockRasterIds:[e]});this.previewLayer.mosaicRule=r;const n=await(0,o.m)(this.previewLayer,e);this.mapView.goTo({target:n}),this.previewLayer.visible=!0}render(){return(0,n.h)(n.H,null,(0,n.h)("div",{class:"map-container",ref:e=>this.container=e}))}get el(){return(0,n.d)(this)}static get watchers(){return{previewImageItemObjectId:["handleRefreshImageItemPreviewLayer"]}}};a.style=".from-map-wrapper{position:relative;padding:0.5rem}.loader-container{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.map-container{width:100%;height:100%}.esri-zoom{position:absolute;top:1px;left:1px}.is-rtl .esri-zoom{left:0}"},36238:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>f,c:()=>i,d:()=>n,e:()=>o,f:()=>c,g:()=>m,i:()=>a,m:()=>s,t:()=>l,u:()=>d});const n=(e,t)=>{let r,n="idle";const i=(...i)=>new Promise((o=>{switch(n){case"flushed":n="idle",r?(clearTimeout(r),o(e(...i))):o(null);break;case"invoked":clearTimeout(r),n="idle",o(e(...i));break;case"cancelled":clearTimeout(r),n="idle",o(null);break;default:r&&clearTimeout(r),n="pending",r=setTimeout((()=>(n="idle",o(e(...i)))),t)}}));return i.flush=function(...e){return n="flushed",i(...e)},i.invoke=function(...e){return n="invoked",i(...e)},i.cancel=function(...e){return n="cancelled",i(...e)},i.getStatus=function(){return n},i},i=(e,t)=>{let r;return(...n)=>new Promise((i=>{r||(r=setTimeout((()=>{clearTimeout(r),r=void 0,i(e(...n))}),t))}))};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function s(e,t){return await Promise.all([e,l(t)]),e}function l(e){return new Promise((t=>setTimeout(t,e)))}const u=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:r,data:n}=t(e);return[r,n]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,r)=>e&&t.indexOf(r)>-1),!0);function d(e,t){const r=[],n={};return e.forEach((e=>{const i=t(e);null==n[i]&&(n[i]=e,r.push(e))})),r}function f(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)}))}const m=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((r,n)=>e.slice(t*n,t+t*n)))},59224:(e,t,r)=>{r.d(t,{A:()=>i,N:()=>n,a:()=>f,b:()=>g,c:()=>m,d:()=>h,e:()=>w,f:()=>v,g:()=>b,h:()=>y,i:()=>s,j:()=>d,k:()=>l,l:()=>u,m:()=>p});var n,i,o=r(69283),a=r(36238);function s(e){return"AbortError"===(null==e?void 0:e.name)}function l(e){return["small-integer","big-integer","integer","single","double","oid"].includes(e)}function u(e){const t=new Date(e);return`${t.getFullYear()}-${c((t.getMonth()+1).toString(),2,"0")}-${c(t.getDate().toString(),2,"0")} ${c(t.getHours().toString(),2,"0")}:${c(t.getMinutes().toString(),2,"0")}:${c(t.getSeconds().toString(),2,"0")}`}function c(e,t,r){for(r=r||" ";e.length<t;)e=r+e;return e}function d(e){const t=e.find((e=>"best"===e.name.toLowerCase()));if(t)return t;const r=e.find((e=>"acquisitiondate"===e.name.toLowerCase()));if(r)return r;const n=e.find((e=>"date"===e.name.toLowerCase()));return n||e.find((e=>"double"===e.type||"integer"===e.type))}async function f(e,t){let r;try{r=await e.queryRasterCount(t)}catch(e){console.log(e)}return Number.isInteger(r)?r:null}async function m(e,t){t.outFields=["*"],t.returnGeometry=!0;const r=await e.queryRasters(t);return Array.isArray(null==r?void 0:r.features)?r:null}async function p(e,t){var r;const n=e.createQuery();let i;n.where=`${e.objectIdField} = ${t}`,n.returnGeometry=!0;try{i=await e.queryRasters(n)}catch(e){console.log(e)}return(null===(r=null==i?void 0:i.features)||void 0===r?void 0:r[0].geometry)||null}function h(e,t){const r=e.fields,n=e.objectIdField;let i=r.find((e=>"name"===e.name.toLowerCase()));return i||(i=r.find((e=>e.name===n))),i&&i.name!==t.name?[i,t]:[t]}function y(e){const t=["small-integer","big-integer","integer","single","double","date","oid","string"];return Array.isArray(e)?e.filter((e=>t.includes(e.type))):[]}function g(e,t,r,n,o,a){const s=e.createQuery();if((null==r?void 0:r.length)>0){let e="";if("date"===t.type){if(1===r.length){const n=new Date(r[0]),i=n.setSeconds(n.getSeconds()+1);e=e=`${t.name} BETWEEN timestamp '${u(r[0])}' AND timestamp '${u(i)}'`}2===r.length&&(e=`${t.name} BETWEEN timestamp '${u(r[0])}' AND timestamp '${u(r[1])}'`)}else 1===r.length&&(e="string"==typeof r[0]?`${t.name}='${r[0]}'`:`${t.name}=${r[0]}`),2===r.length&&(e="string"==typeof r[0]?`${t.name} BETWEEN '${r[0]}' AND '${r[1]}'`:`${t.name} BETWEEN ${r[0]} AND ${r[1]}`);s.where=e}const l="(Category <> 2)";if(o)s.where=s.where.replace(l,"");else{const e=l+(s.where?" AND "+s.where:"");s.where=e}return s.geometry=n===i.DisplayExtent?a:null,s.spatialRelationship=n===i.DisplayExtent?"intersects":null,s}async function v(e,t,r,n,o,s=!1){var l,u;if(!t)return[];const c=e.createQuery();c.where="1=1";const d=r===i.DisplayExtent||r===i.Visible;c.geometry=d?n:null,c.spatialRelationship=d?"intersects":null,c.outFields=[t],c.orderByFields=[`${t} ASC`],c.returnExceededLimitFeatures=!0,c.returnGeometry=!1;const f=[];if(s){let r=!0;for(;r;){const n=await e.queryRasters(c,{signal:o});if(r=null==n?void 0:n.exceededTransferLimit,(null===(l=n.features)||void 0===l?void 0:l.length)>0){const e=(0,a.b)(n.features.map((e=>e.attributes[t])));f.push(...e)}}return f}const m=await e.queryRasters(c,{signal:o});return(null===(u=null==m?void 0:m.features)||void 0===u?void 0:u.length)>0?(0,a.b)(m.features.map((e=>e.attributes[t]))):[]}async function w(e,t,r,n,o){var a;if(!t)return[];const s=e.createQuery();s.where="1=1";const l=r===i.DisplayExtent||r===i.Visible;s.geometry=l?n:null,s.spatialRelationship=l?"intersects":null,s.returnGeometry=!1,s.outStatistics=[{statisticType:"min",onStatisticField:t,outStatisticFieldName:"MIN_FIELD_VALUE"},{statisticType:"max",onStatisticField:t,outStatisticFieldName:"MAX_FIELD_VALUE"}];const u=await e.queryRasters(s,{signal:o});if((null===(a=null==u?void 0:u.features)||void 0===a?void 0:a.length)>0){const[e]=u.features;return[e.attributes.MIN_FIELD_VALUE,e.attributes.MAX_FIELD_VALUE]}return[]}async function b(e,t,r){var n;let i=[];const a=await async function(e,t){const[r,n,i]=await(0,o.l)(["esri/geometry/Polygon","esri/geometry/Point","esri/rest/support/ImageIdentifyParameters"]),{extent:a,width:s,height:l}=t,u=new r(a.spatialReference);u.addRing([[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]);const c=new n((a.xmax-a.xmin)/s,(a.ymax-a.ymin)/l,a.spatialReference),d=new i;d.geometry=u,d.returnGeometry=!1,d.pixelSize=c;const f=e.mosaicRule.clone();return e.definitionExpression&&(f.where=e.definitionExpression),d.mosaicRule=f,d}(e,t);if(e.visible){const t=await e.identify(a);if(!(null===(n=null==t?void 0:t.catalogItems)||void 0===n?void 0:n.features)||!(null==t?void 0:t.catalogItemVisibilities))return null;const o=e.objectIdField;for(let e=0;e<t.catalogItems.features.length;e++)t.catalogItemVisibilities[e]>0&&i.push(t.catalogItems.features[e].attributes[o]);if(0===i.length)return null;const s=`${e.objectIdField} in (${i.map((e=>`${e}`)).join(",")})`;r.where=`${r.where} AND ${s}`,r.outFields=["*"],r.returnGeometry=!0;const l=await e.queryRasters(r);return Array.isArray(null==l?void 0:l.features)?l:null}}!function(e){e.Inspect="inspect",e.Select="select"}(n||(n={})),function(e){e.Visible="visible",e.DisplayExtent="displayExtent",e.All="all"}(i||(i={}))},69283:(e,t,r)=>{r.d(t,{a:()=>n,c:()=>o,e:()=>a,g:()=>i,l:()=>s});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var a=o((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function i(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function a(e){return!e||i(e)?function(e){void 0===e&&(e=r);var t=o(e),a=i(e);if(a!==n&&3===a.major){var s=a.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var r=a(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(r);return n||function(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(r),t),n}var l={};function u(e,t,r){var n;r&&(n=function(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}(e,r));var i=function(){t(e),e.removeEventListener("load",i,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",i,!1)}function c(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function f(e){void 0===e&&(e={});var r={};[l,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var n=r.version,i=r.url||o(n);return new t.Promise((function(e,t){var o=c();if(o){var a=o.getAttribute("src");a!==i?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(a,")."))):d()?e(o):u(o,e,t)}else if(d())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=r.css;l&&s(!0===l?n:l,r.insertCssBefore),u(o=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(i),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function m(e){return new t.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),d())return m(e);var r=c(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),f(t).then((function(){return m(e)}))},e.getScript=c,e.isLoaded=d,e.loadScript=f,e.setDefaultOptions=function(e){void 0===e&&(e={}),l=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const s=async(e,t)=>(await a.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);