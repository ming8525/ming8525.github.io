/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9e79b3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9e79b3"],{38700:(e,t,a)=>{a.r(t),a.d(t,{arcgis_smart_mapping_heatmap_slider:()=>r});var s=a(81149),i=a(9225);a(69283),a(49306),a(51837),a(42577),a(82218),a(70464),a(10519);const r=class{constructor(e){(0,s.r)(this,e),this.styleSheetStatus="not-loaded"}render(){const{config:e}=i.s;return(0,s.h)(s.H,null,(0,s.h)("link",{rel:"stylesheet",href:`${e.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,s.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,s.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderHeatmapSlider():"not-loaded"===this.styleSheetStatus?this.renderHeatmapSliderLoading():null)}renderHeatmapSlider(){return this.prepareHeatmapSlider()||this.heatmapSlider?(0,s.h)("div",{class:"slider-box"},(0,s.h)("div",{ref:e=>{e&&this.afterHeatmapSliderCreate(e)}})):this.renderHeatmapSliderLoading()}renderHeatmapSliderLoading(){const{strings:e}=i.s;return(0,s.h)("div",{class:"slider-box"},(0,s.h)("calcite-loader",{label:e.loading}))}prepareHeatmapSlider(){var e;const{layer:t,modules:a}=i.s,s=(0,i.h)(t);if(this.heatmapSlider){if("dragging"===(null===(e=this.heatmapSlider.slider)||void 0===e?void 0:e.state))return!0;const t=s.colorStops.map((e=>new a.HeatmapColorStop({color:new a.esriColor(e.color.toRgba()),ratio:e.ratio}))),i={stops:t.splice(3,t.length-3)};this.heatmapSlider.set(i)}else{const e=s.colorStops.map((e=>new a.HeatmapColorStop({color:new a.esriColor(e.color.toRgba()),ratio:e.ratio}))),t={stops:e.splice(3,e.length-3)};this.heatmapSlider=new a.HeatmapSlider(t),this.createHeatmapSliderChangeEvents()}return(0,i.ac)(this.heatmapSlider)}afterHeatmapSliderCreate(e){if(!this.heatmapSlider.container){const t=document.createElement("div");e.append(t),this.heatmapSlider.container=t}}createHeatmapSliderChangeEvents(){this.heatmapSlider&&(this.heatmapSlider.on("thumb-change",(()=>{this.handleHeatmapSliderEvent()})),this.heatmapSlider.on("thumb-drag",(()=>{this.handleHeatmapSliderEvent()})))}handleHeatmapSliderEvent(){const{layer:e,modules:t}=i.s,a=(0,i.h)(e),s=this.heatmapSlider.values[0],r=this.heatmapSlider.values[1];s===r&&(s+.001<=1?this.heatmapSlider.viewModel.setValue(1,s+.001):this.heatmapSlider.viewModel.setValue(0,r-.001));const l=a.colorStops.filter(((e,t)=>t<3)).map((e=>new t.HeatmapColorStop({color:new t.esriColor(e.color.toRgba()),ratio:e.ratio}))),o=l[l.length-1].ratio;s<o&&this.heatmapSlider.viewModel.setValue(0,o);const h=l.concat(this.heatmapSlider.stops.slice());a.colorStops=h,(0,i.ab)()}get hostElement(){return(0,s.d)(this)}};r.style=".slider-box{height:255px}.slider-box .esri-heatmap-slider__ramp{width:30px}.slider-box .esri-heatmap-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-heatmap-slider{min-width:200px}"}}]);