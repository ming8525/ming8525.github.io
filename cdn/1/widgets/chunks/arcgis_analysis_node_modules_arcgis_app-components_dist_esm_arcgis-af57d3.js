/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-af57d3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-af57d3"],{29398:(e,i,t)=>{t.r(i),t.d(i,{arcgis_smart_mapping_color_size_slider:()=>d,arcgis_smart_mapping_symbol_pair_button:()=>h,arcgis_smart_mapping_symbol_pair_popover:()=>m});var s=t(81149),o=t(9225),l=t(95129),a=t(5996),r=(t(69283),t(41267)),n=(t(49306),t(74537)),u=t(70490);t(51837),t(42577),t(82218),t(70464),t(10519),t(25902);const d=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingColorSizeSliderChange=(0,s.c)(this,"arcgisSmartMappingColorSizeSliderChange",7),this.arcgisSmartMappingColorSizeSliderError=(0,s.c)(this,"arcgisSmartMappingColorSizeSliderError",7),this.currentColorStopValues=[],this.currentSizeStopSizes=[],this.zigzagClick=!1,this.styleSheetStatus="not-loaded",this.histogramStatus=o.b.MISSING,this.statisticsStatus=o.b.MISSING,this.sliderZoomed=!1}async updateStatistics(){var e;this.statisticsStatus=o.b.MISSING,this.statistics=null,this.histogramStatus=o.b.MISSING,this.histogram=null,null===(e=this.colorSizeSlider)||void 0===e||e.destroy(),this.colorSizeSlider=void 0,this.sliderZoomed=!1,this.getStatistics()}componentWillLoad(){this.getStatistics()}componentDidLoad(){this.flowItemNode=(0,o.F)(this.hostElement,"calcite-flow-item")}render(){const{config:e}=o.s;return(0,s.h)(s.H,null,(0,s.h)("link",{rel:"stylesheet",href:`${e.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,s.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,s.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderColorSizeSlider():"not-loaded"===this.styleSheetStatus?this.renderColorSizeSliderLoading():null)}renderColorSizeSlider(){var e,i,t,l;const{histogramStatus:a,statistics:r,statisticsStatus:n,sliderZoomed:d}=this,{layer:h,strings:m}=o.s,c=(0,o.h)(h),p=c.authoringInfo,S=(0,o.a)(c,"color"),g=(0,o.a)(c,"size"),v="above-and-below"===p.univariateTheme;if(n!==o.b.FAILED&&n!==o.b.MISSING){if(n===o.b.IN_PROGRESS||a===o.b.IN_PROGRESS&&!this.colorSizeSlider)return this.renderColorSizeSliderLoading();{const a=this.prepareColorSizeSlider();let n=!1;if(S&&!d){const t=(0,o.p)(c,"color"),s=(0,u.g)(),l=(0,o.aC)(s,null!==(e=null==t?void 0:t.minSliderValue)&&void 0!==e?e:r.min,null!==(i=null==t?void 0:t.maxSliderValue)&&void 0!==i?i:r.max);((null==l?void 0:l.minMaxSame)||!(0,o.ac)(null==l?void 0:l.min)&&!(0,o.ac)(null==l?void 0:l.max))&&(n=!0,this.zoomButtonNode&&(this.zoomButtonNode.disabled=!0))}else if(g&&!d){const e=(0,o.p)(c,"size"),i=(0,o.aC)(v?g.stops:[{value:g.minDataValue},{value:g.maxDataValue}],null!==(t=null==e?void 0:e.minSliderValue)&&void 0!==t?t:r.min,null!==(l=null==e?void 0:e.maxSliderValue)&&void 0!==l?l:r.max);(i.minMaxSame||!(0,o.ac)(i.min)&&!(0,o.ac)(i.max))&&(n=!0,this.zoomButtonNode&&(this.zoomButtonNode.disabled=!0))}return S&&(this.currentColorStopValues=S.stops.map((e=>e.value))),(null==g?void 0:g.stops)&&(this.currentSizeStopSizes=g.stops.map((e=>e.size))),a||this.colorSizeSlider?(0,s.h)("div",{class:"slider-box"},(0,s.h)("calcite-label",null,m.colorSizeSlider.dataRange),(0,s.h)("div",{class:"slider-box-buttons-front"},this.renderInvertButton(),g&&(0,s.h)(s.F,null,(0,s.h)("div",null," "),this.renderZoomButton(n),(0,s.h)("div",null," "),this.renderResetButton())),(0,s.h)("div",{ref:e=>{e&&this.afterColorSizeSliderCreate(e)}})):this.renderColorSizeSliderLoading()}}this.colorSizeSlider&&(this.colorSizeSlider.destroy(),this.colorSizeSlider=void 0)}renderColorSizeSliderLoading(){const{strings:e}=o.s;return(0,s.h)("div",{class:"slider-box"},(0,s.h)("calcite-loader",{label:e.loading}))}renderInvertButton(){const{strings:e}=o.s;return(0,s.h)("arcgis-smart-mapping-action",{text:e.colorSizeSlider.invertSlider,icon:"arrowUpDown",onClick:()=>this.handleInvertSlider()})}renderZoomButton(e){const{strings:i}=o.s,{sliderZoomed:t}=this;return(0,s.h)("arcgis-smart-mapping-action",{text:i.colorSizeSlider.zoomSlider,icon:t?"magnifyingGlassMinus":"magnifyingGlassPlus",disabled:e,onClick:()=>this.handleZoomSlider(),ref:e=>{e&&(this.zoomButtonNode=e)}})}renderResetButton(){const{strings:e}=o.s;return(0,s.h)("arcgis-smart-mapping-action",{text:e.colorSizeSlider.resetSlider,icon:"undo",onClick:()=>this.handleResetSlider()})}prepareColorSizeSlider(){var e,i,t,s,a,d,h,m;const{statistics:c,histogram:p,histogramStatus:S,sliderZoomed:g}=this,{layer:v,mapView:b,modules:f}=o.s,z=(0,o.h)(v),x=(0,o.g)(),y="above-and-below"===z.authoringInfo.univariateTheme,C=["size-age","color-size-age","type-size-age"].indexOf(x)>-1,P=this.getFieldInfo().simpleFieldType===o.w.DATE,V=(0,o.a)(z,"color"),M=(0,o.a)(z,"size"),w=(0,o.p)(z,"size"),B=(0,o.p)(z,"color");let D,I,E;B?(D=(0,o.aD)(B.theme,V.stops,!0),I=null==B?void 0:B.minSliderValue,E=null==B?void 0:B.maxSliderValue):(I=null!==(e=null==w?void 0:w.minSliderValue)&&void 0!==e?e:c.min,E=null!==(i=null==w?void 0:w.maxSliderValue)&&void 0!==i?i:c.max),({min:I,max:E}=(0,o.ad)({min:I,max:E}));const _=this.colorSizeSlider;if(this.colorSizeSlider&&(V&&_.style||!V&&!_.style)&&(null===(t=this.colorSizeSlider)||void 0===t||t.destroy(),this.colorSizeSlider=void 0),S===o.b.IN_PROGRESS)return!1;if(this.colorSizeSlider){if("dragging"===(null===(s=this.colorSizeSlider.slider)||void 0===s?void 0:s.state))return!0;let e={histogramConfig:{bins:null==p?void 0:p.bins,average:Math.round(10*c.avg)/10,standardDeviation:c.stddev,standardDeviationCount:1},min:null!=I?I:c.min,max:null!=E?E:c.max};V?(e=Object.assign(Object.assign({},e),D),e.stops=(0,u.g)(),e.precision=(0,r.g)(e.stops),e.hasTimeData=P&&!C,P&&(0,l.a)(e,b.timeZone),g?this.zigzagClick||(e.zoomOptions=(0,o.aC)(V.stops,null!==(a=null==B?void 0:B.minSliderValue)&&void 0!==a?a:c.min,null!==(d=null==B?void 0:B.maxSliderValue)&&void 0!==d?d:c.max)):e.zoomOptions=null,e.histogramConfig.barCreatedFunction=p&&n.b.bind(this,V,p,this.colorSliderBars),(0,n.u)(this.colorSizeSlider,this.colorSliderBars,e,p)):(e.style={trackBelowFillColor:(0,o.t)(z.classBreakInfos[0].symbol)||new f.esriColor([0,0,0,.5]),trackAboveFillColor:(0,o.t)(z.classBreakInfos[1].symbol)||new f.esriColor([0,0,0,.5])},e.stops=M.stops,e.precision=(0,r.g)(e.stops),g?this.zigzagClick||(e.zoomOptions=(0,o.aC)(y?M.stops:[{value:M.minDataValue},{value:M.maxDataValue}],null!==(h=null==w?void 0:w.minSliderValue)&&void 0!==h?h:c.min,null!==(m=null==w?void 0:w.maxSliderValue)&&void 0!==m?m:c.max)):e.zoomOptions=null),this.sliderZoomed&&this.adjustedZoomOptions&&!this.zigzagClick&&(e.zoomOptions=this.adjustedZoomOptions,"min"===this.zoomAdjustment?(this.colorSizeSlider.slider.min=e.zoomOptions.min,e.zoomOptions.min=null):(this.colorSizeSlider.slider.max=e.zoomOptions.max,e.zoomOptions.max=null)),this.adjustedZoomOptions=null,this.zoomAdjustment=null,this.colorSizeSlider.set(e),this.zigzagClick=!1}else{this.colorSliderBars=[];let e={histogramConfig:{bins:null==p?void 0:p.bins,average:Math.round(10*c.avg)/10,standardDeviation:c.stddev,standardDeviationCount:1},min:null!=I?I:c.min,max:null!=E?E:c.max};y&&(e.primaryHandleEnabled=!0,e.persistSizeRangeEnabled=!0),P&&(e.hasTimeData=!0,(0,l.a)(e,b.timeZone)),V?(e=Object.assign(Object.assign({},e),D),e.stops=(0,u.g)(),e.precision=(0,r.g)(V.stops),e.histogramConfig.barCreatedFunction=p&&n.b.bind(this,e,p,this.colorSliderBars),this.colorSizeSlider=new f.ColorSizeSlider(e),(0,n.u)(this.colorSizeSlider,this.colorSliderBars)):(e.style={trackBelowFillColor:(0,o.t)(z.classBreakInfos[0].symbol)||new f.esriColor([0,0,0,.5]),trackAboveFillColor:(0,o.t)(z.classBreakInfos[1].symbol)||new f.esriColor([0,0,0,.5])},e.stops=M.stops,e.handlesSyncedToPrimary=!1,e.precision=(0,r.g)(e.stops),this.colorSizeSlider=new f.BinaryColorSizeSlider(e)),this.createColorSizeSliderChangeEvents()}return(0,o.ac)(this.colorSizeSlider)}handleInvertSlider(){const{layer:e}=o.s,i=(0,o.h)(e),t=(0,o.a)(i,"color");if(t){let e=t.stops.map((e=>e.color));e=e.reverse(),t.stops.forEach(((i,t)=>{i.color=e[t]}))}else{const e=(0,o.t)(i.classBreakInfos[0].symbol);(0,o.r)(i.classBreakInfos[0].symbol,(0,o.t)(i.classBreakInfos[1].symbol)),(0,o.r)(i.classBreakInfos[1].symbol,e)}const l=(0,o.a)(i,"size");[l.minSize,l.maxSize]=[l.maxSize,l.minSize],(0,o.ab)(),(0,s.f)(this.hostElement),this.arcgisSmartMappingColorSizeSliderChange.emit()}handleZoomSlider(e){var i,t,s,l;if(this.histogramStatus===o.b.IN_PROGRESS)return;const{statistics:a}=this,{layer:r}=o.s,n=(0,o.h)(r),u="above-and-below"===n.authoringInfo.univariateTheme;this.sliderZoomed=(0,o.ac)(e)?e:!this.sliderZoomed;const d=(0,o.a)(n,"size");d||(this.sliderZoomed=!1);const h=d?d.normalizationField:n.normalizationField,m=this.getFieldInfo(),c=(0,o.p)(n,"size"),p=this.sliderZoomed?(0,o.aC)(u?d.stops:[{value:d.minDataValue},{value:d.maxDataValue}],null!==(i=null==c?void 0:c.minSliderValue)&&void 0!==i?i:a.min,null!==(t=null==c?void 0:c.maxSliderValue)&&void 0!==t?t:a.max):null;this.getHistogram(m,h,a,p&&p.min||(null!==(s=null==c?void 0:c.minSliderValue)&&void 0!==s?s:a.min),p&&p.max||(null!==(l=null==c?void 0:c.maxSliderValue)&&void 0!==l?l:a.max))}handleResetSlider(){const{layer:e}=o.s,i=(0,o.h)(e),t=i.authoringInfo;this.sliderZoomed=!1;const s=(0,o.a)(i,"color"),l=(0,o.a)(i,"size"),r=(0,o.p)(i,"color"),n=(0,o.p)(i,"size"),d=this.getFieldInfo(),h=s?s.normalizationField:i.normalizationField;(0,a.r)((0,u.a)({fieldInfos:[d],normalizationField:l.normalizationField,theme:t.univariateTheme,isContinuous:!!s,noReuse:!0,discardMinMax:!0}),this.flowItemNode).then((e=>{var i;if(0===(null===(i=e.statistics)||void 0===i?void 0:i.count)){const[i,t]=this.getDefaultDataRange(d),s=(null==r?void 0:r.minSliderValue)||i,l=(null==r?void 0:r.maxSliderValue)||t;e.statistics.min=s,e.statistics.max=l,e.statistics.avg=(l+s)/2,this.statistics=e.statistics,this.statisticsStatus=o.b.SUCCESS}else e.statistics&&(0,o.ac)(e.statistics.min)&&(0,o.ac)(e.statistics.max)&&e.statistics.min<=e.statistics.max?(this.statistics=e.statistics,this.statisticsStatus=o.b.SUCCESS,this.getHistogram(d,h,e.statistics,e.statistics.min,e.statistics.max)):this.statisticsStatus=o.b.FAILED;r&&(r.minSliderValue=this.statistics.min,r.maxSliderValue=this.statistics.max),n.minSliderValue=this.statistics.min,n.maxSliderValue=this.statistics.max,(0,o.ab)()}),(e=>this.arcgisSmartMappingColorSizeSliderError.emit(e)))}afterColorSizeSliderCreate(e){const i=document.createElement("div");e.appendChild(i),this.colorSizeSlider&&!this.colorSizeSlider.container&&(this.colorSizeSlider.container=i)}getStatistics(){var e;const{layer:i,mapView:t,modules:s}=o.s,l=i,a=(0,o.h)(l),r=(0,o.a)(a,"size"),n=(0,o.p)(a,"size");let u,d;const h=this.getFieldInfo(),m=r?r.normalizationField:a.normalizationField;u=null==n?void 0:n.minSliderValue,d=null==n?void 0:n.maxSliderValue,this.statisticsStatus=o.b.IN_PROGRESS,this.statistics||s.summaryStatistics({layer:l,view:t,field:h.field,valueExpression:h.expression,normalizationField:m,forBinning:"featureReduction"in l&&"binning"===(null===(e=l.featureReduction)||void 0===e?void 0:e.type)}).then((e=>{if(0===e.count){const[i,t]=this.getDefaultDataRange(h),s=(null==n?void 0:n.minSliderValue)||i,l=(null==n?void 0:n.maxSliderValue)||t;e.min=s,e.max=l,e.avg=(l+s)/2,(0,o.ac)(n.minSliderValue)||(n.minSliderValue=s,n.maxSliderValue=l)}else if(!(0,o.ac)(e.avg)||!(0,o.ac)(e.min)||!(0,o.ac)(e.max))return void(this.statisticsStatus=o.b.FAILED);e=(0,o.ad)(e),u=null!=u?u:e.min,d=null!=d?d:e.max,this.statistics=e,this.statisticsStatus=o.b.SUCCESS,this.getHistogram(h,m,e,u,d)}),(e=>{console.log(e),this.statisticsStatus=o.b.FAILED}))}getHistogram(e,i,t,s,l){var a;const{layer:r,mapView:n,modules:u}=o.s,d=r;(t=t||this.statistics)&&0!==t.count&&(this.histogramStatus=o.b.IN_PROGRESS,u.histogram({layer:d,view:n,field:e.field,valueExpression:e.expression,numBins:50,minValue:(0,o.ac)(s)?s:t.min,maxValue:(0,o.ac)(l)?l:t.max,normalizationField:i,forBinning:"featureReduction"in d&&"binning"===(null===(a=d.featureReduction)||void 0===a?void 0:a.type)}).then((e=>{this.histogram=e,this.histogramStatus=o.b.SUCCESS}),(()=>{this.histogramStatus=o.b.FAILED})))}onMinMaxChange(e,i,t){const{layer:s}=o.s,l=(0,o.h)(s),a=l.authoringInfo,r="above-and-below"===(null==a?void 0:a.univariateTheme),n=(0,o.a)(l,"color"),u=(0,o.a)(l,"size");(null==n?void 0:n.stops)&&(e=Math.min(e,n.stops[0].value),i=Math.max(i,n.stops[n.stops.length-1].value)),r&&(e=Math.min(e,u.stops[0].value),i=Math.max(i,u.stops[u.stops.length-1].value),u.stops.forEach(((e,i)=>{e.size=this.currentSizeStopSizes[i]}))),this.handleMinMaxChange(e,i,t)}handleMinMaxChange(e,i,t){const{statistics:s}=this,{layer:l}=o.s,a=(0,o.h)(l),r=(0,o.a)(a,"color"),u=(0,o.a)(a,"size"),d=(0,o.p)(a,"color")||{},h=(0,o.p)(a,"size")||{};"min"===t?(d.minSliderValue=e,h.minSliderValue=e):(d.maxSliderValue=i,h.maxSliderValue=i);const m=(0,o.aC)(null==r?void 0:r.stops,d.minSliderValue,d.maxSliderValue);this.zoomButtonNode&&(this.sliderZoomed?this.zoomButtonNode.disabled=!1:!m||m.minMaxSame||!(0,o.ac)(m.min)&&!(0,o.ac)(m.max)?this.zoomButtonNode.disabled=!0:this.zoomButtonNode.disabled=!1),this.sliderZoomed&&(this.adjustedZoomOptions=this.colorSizeSlider.zoomOptions,"min"===t?(this.adjustedZoomOptions.min=e,this.zoomAdjustment="min"):(this.adjustedZoomOptions.max=i,this.zoomAdjustment="max"));const c=this.getFieldInfo(),p=u?u.normalizationField:a.normalizationField;this.getHistogram(c,p,s,e,i),(0,n.u)(this.colorSizeSlider,this.colorSliderBars,r,this.histogram),e===d.minSliderValue&&i===d.maxSliderValue&&(this.sliderZoomed=!1),a.authoringInfo.classificationMethod="manual",this.arcgisSmartMappingColorSizeSliderChange.emit()}createColorSizeSliderChangeEvents(){const{layer:e}=o.s,i=(0,o.h)(e),t=(0,o.g)(),l=(0,o.a)(i,"size"),a=["size-age","color-size-age","type-size-age"].indexOf(t)>-1,r=this.getFieldInfo().simpleFieldType===o.w.DATE;this.colorSizeSlider&&(this.colorSizeSlider.watch("zoomOptions",((e,i)=>{this.sliderZoomed&&((null==i?void 0:i.min)&&!(null==e?void 0:e.min)||(null==i?void 0:i.max)&&!(null==e?void 0:e.max))&&(this.zigzagClick=!0,this.handleZigzagClick(e))})),this.colorSizeSlider.on("min-change",(e=>{e.value>this.currentColorStopValues[0]?(this.colorSizeSlider.stops.forEach(((e,i)=>{e.value=this.currentColorStopValues[i]})),this.onMinMaxChange(this.currentColorStopValues[0],this.colorSizeSlider.slider.max,"min")):this.onMinMaxChange(e.value,this.colorSizeSlider.slider.max,"min")})),this.colorSizeSlider.on("max-change",(e=>{e.value<this.currentColorStopValues[this.currentColorStopValues.length-1]?(this.colorSizeSlider.stops.forEach(((e,i)=>{e.value=this.currentColorStopValues[i]})),this.onMinMaxChange(this.colorSizeSlider.slider.min,this.currentColorStopValues[this.currentColorStopValues.length-1],"max")):this.onMinMaxChange(this.colorSizeSlider.slider.min,e.value,"max")})),this.colorSizeSlider.on("thumb-change",(e=>{if(l){if(r&&!a&&0===e.value)return void(0,s.f)(this.hostElement);this.updateRendererStops(this.colorSizeSlider.stops)}})),this.colorSizeSlider.on("thumb-drag",(()=>{if(l){const e=this.colorSizeSlider.stops;this.updateRendererStops(e)}})),this.colorSizeSlider.on("segment-drag",(()=>{this.updateRendererStops(this.colorSizeSlider.stops)})))}updateRendererStops(e){const{layer:i}=o.s,t=(0,o.h)(i),s=(0,o.a)(t,"color"),l=(0,o.a)(t,"size"),a=(0,o.p)(t,"size"),r="above-and-below"===t.authoringInfo.univariateTheme;l.stops?l.stops.forEach(((i,t)=>{i.value=e[t].value,i.size=e[t].size,i.label=""})):(l.minDataValue=e[0].value,l.maxDataValue=e[e.length-1].value),s&&s.stops.forEach(((i,t)=>{i.value=e[t].value,i.color=e[t].color,i.label=""})),this.currentColorStopValues=e.map((e=>e.value)),this.currentSizeStopSizes=e.map((e=>e.size)),2===t.classBreakInfos.length&&(t.classBreakInfos[0].maxValue=e[2].value,t.classBreakInfos[1].minValue=e[2].value);const u=(0,o.aC)(r?l.stops:[{value:l.minDataValue},{value:l.maxDataValue}],null==a?void 0:a.minSliderValue,null==a?void 0:a.maxSliderValue);this.sliderZoomed?this.zoomButtonNode.disabled=!1:!u||u.minMaxSame||!(0,o.ac)(u.min)&&!(0,o.ac)(u.max)?this.zoomButtonNode.disabled=!0:this.zoomButtonNode.disabled=!1,(0,n.u)(this.colorSizeSlider,this.colorSliderBars),(0,o.ab)()}getDefaultDataRange(e){if(e.simpleFieldType===o.w.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}getFieldInfo(){const{layer:e}=o.s,i=(0,o.h)(e),t=(0,o.a)(i,"size"),s=(0,o.u)(t?t.field:i.field);return{field:(null==t?void 0:t.field)||i.field,expression:(null==t?void 0:t.valueExpression)||i.valueExpression,expressionTitle:(null==t?void 0:t.valueExpressionTitle)||i.valueExpressionTitle,simpleFieldType:s?s.simpleFieldType:o.w.NUMBER}}handleZigzagClick(e){var i,t;const{statistics:s}=this,{layer:l}=o.s,a=(0,o.h)(l),r=(0,o.a)(a,"size"),n=(0,o.p)(a,"size"),u=this.getFieldInfo(),d=r?r.normalizationField:a.normalizationField;this.getHistogram(u,d,s,null!==(i=null==e?void 0:e.min)&&void 0!==i?i:n.minSliderValue,null!==(t=null==e?void 0:e.max)&&void 0!==t?t:n.maxSliderValue),e||(this.sliderZoomed=!1)}get hostElement(){return(0,s.d)(this)}};d.style=".slider-box{height:320px}.slider-box .esri-color-size-slider,.slider-box .esri-binary-color-size-slider{min-width:200px}.slider-box .esri-color-size-slider .esri-slider .esri-slider__content,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-color-size-slider__histogram-container,.slider-box .esri-binary-color-size-slider__histogram-container{width:85px}.slider-box .esri-color-size-slider .esri-slider .esri-slider__label,.slider-box .esri-color-size-slider .esri-slider .esri-slider__min,.slider-box .esri-color-size-slider .esri-slider .esri-slider__max,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__label,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__min,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__max{text-decoration:underline}.slider-box .esri-color-size-slider .esri-slider .esri-slider__label:hover,.slider-box .esri-color-size-slider .esri-slider .esri-slider__min:hover,.slider-box .esri-color-size-slider .esri-slider .esri-slider__max:hover,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__label:hover,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__min:hover,.slider-box .esri-binary-color-size-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}.slider-box-buttons-front{display:flex}";const h=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSymbolPairButtonChange=(0,s.c)(this,"arcgisSmartMappingSymbolPairButtonChange",7),this.arcgisSmartMappingSymbolPairButtonBeforeOpen=(0,s.c)(this,"arcgisSmartMappingSymbolPairButtonBeforeOpen",7),this.arcgisSmartMappingSymbolPairButtonError=(0,s.c)(this,"arcgisSmartMappingSymbolPairButtonError",7),this.symbolPairPopoverOpen=!1}arcgisSmartMappingClosePopoversHandler(){var e;this.symbolPairPopoverOpen=!1,this.symbolPairPopoverNode&&(null===(e=this.symbolPairPopoverNode.parentNode)||void 0===e||e.removeChild(this.symbolPairPopoverNode),this.symbolPairPopoverNode=null)}componentWillLoad(){const{strings:e}=o.s;this.flowItemNode=(0,o.F)(this.hostElement,"calcite-flow-item"),this.allSymbolPairs=[["single",e.symbolPairButton.singleSymbol],["circle",e.symbolPairButton.circles],["square",e.symbolPairButton.squares],["caret",e.symbolPairButton.chevrons],["circle-caret",e.symbolPairButton.circlesChevrons],["arrow",e.symbolPairButton.arrows],["circle-arrow",e.symbolPairButton.circleArrows],["plus-minus",e.symbolPairButton.plusMinus],["circle-plus-minus",e.symbolPairButton.circlePlusMinus],["happy-sad",e.symbolPairButton.faces],["triangle",e.symbolPairButton.triangles],["thumb",e.symbolPairButton.thumbs]]}render(){const{layer:e,strings:i}=o.s,t=(0,o.h)(e).authoringInfo.univariateSymbolStyle;let l=i.symbolPairButton.singleSymbol;return this.allSymbolPairs.forEach((e=>{t===e[0]&&(l=e[1])})),"custom"===t&&(l=i.symbolPairButton.custom),(0,s.h)("calcite-label",null,i.symbolPairButton.symbolPair,(0,s.h)("calcite-button",{ref:e=>this.symbolPairButtonNode=e,scale:"m",alignment:"icon-end-space-between",iconEnd:"chevron-down",appearance:"outline-fill",width:"full",tabindex:"0",role:"button",kind:"neutral","aria-haspopup":"true",label:i.symbolPairButton.symbolPair,onClick:()=>this.symbolPairPopoverOpen?(0,o.E)():this.handleSymbolPairClick()},l))}handleSymbolPairClick(){this.arcgisSmartMappingSymbolPairButtonBeforeOpen.emit();const e=document.createElement("arcgis-smart-mapping-symbol-pair-popover");this.symbolPairPopoverNode=e,e.popoverProps={refElement:this.flowItemNode,placement:"leading",offsetDistance:0,overlayPositioning:"absolute",flipDisabled:!1,triggerDisabled:!1},e.symbolPairs=this.allSymbolPairs,e.addEventListener("arcgisSmartMappingSymbolPairPopoverClose",(()=>this.closePopover())),e.addEventListener("arcgisSmartMappingSymbolPairPopoverChange",(e=>{const i=e.detail;this.closePopover();const{layer:t}=o.s;(0,a.r)((0,u.a)({symbolStyle:i}),this.flowItemNode).then((e=>{(0,o.e)(e.renderer,t),(0,o.ab)(),(0,s.f)(this.hostElement),this.arcgisSmartMappingSymbolPairButtonChange.emit()}),(e=>this.arcgisSmartMappingSymbolPairButtonError.emit(e)))})),document.body.appendChild(e),this.symbolPairPopoverOpen=!0}closePopover(){var e;this.symbolPairPopoverOpen=!1,this.symbolPairPopoverNode&&(null===(e=this.symbolPairPopoverNode.parentNode)||void 0===e||e.removeChild(this.symbolPairPopoverNode),this.symbolPairPopoverNode=null,setTimeout((()=>this.symbolPairButtonNode.setFocus()),300))}get hostElement(){return(0,s.d)(this)}};h.style=".symbol-pair-name{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);outline-color:var(--calcite-color-foreground-3);outline-width:1px;outline-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.symbol-pair-name:hover{outline-width:2px}.symbol-pair-name:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}";const m=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSymbolPairPopoverClose=(0,s.c)(this,"arcgisSmartMappingSymbolPairPopoverClose",7),this.arcgisSmartMappingSymbolPairPopoverChange=(0,s.c)(this,"arcgisSmartMappingSymbolPairPopoverChange",7),this.resizeObserver=new ResizeObserver((e=>{const i=e.pop();this.popoverWidth=1.05*i.contentRect.width,this.offsetDistance=-Math.round(1.025*this.popoverProps.refElement.getBoundingClientRect().width)})),this.popoverProps=void 0,this.symbolPairs=void 0,this.popoverWidth=void 0}async setFocus(){this.calcitePopoverNode.setFocus()}componentDidLoad(){requestAnimationFrame((()=>this.calcitePopoverNode.setFocus())),this.resizeObserver.observe(this.popoverProps.refElement)}disconnectedCallback(){this.resizeObserver.unobserve(this.popoverProps.refElement)}render(){const{strings:e}=o.s,i=this.popoverProps;return(0,s.h)(s.H,{class:"js-app-flyout"},(0,s.h)("calcite-popover",{ref:e=>this.calcitePopoverNode=e,dir:o.s.isRTL?"rtl":"ltr",placement:"leading-start",open:!0,heading:e.symbolPairButton.symbolPair,closable:!0,pointerDisabled:!0,referenceElement:i.refElement,offsetDistance:this.offsetDistance,offsetSkidding:105,overlayPositioning:i.overlayPositioning,triggerDisabled:i.triggerDisabled,label:e.symbolPairButton.symbolPair,onCalcitePopoverClose:()=>this.arcgisSmartMappingSymbolPairPopoverClose.emit(),style:{width:`${this.popoverWidth}px`}},(0,s.h)("calcite-list",{selectionMode:"single-persist"},this.renderItems())))}renderItems(){const{layer:e}=o.s,i=(0,o.h)(e).authoringInfo.univariateSymbolStyle||"single",t=[];return this.symbolPairs.forEach((e=>{t.push(this.renderItem(e[0],e[1],i===e[0]))})),t}renderItem(e,i,t){const o=e.charAt(0).toUpperCase()+e.slice(1)+".svg";return(0,s.h)("calcite-list-item",{label:i,selected:t,onClick:()=>this.arcgisSmartMappingSymbolPairPopoverChange.emit(e),onKeyDown:i=>{" "!==i.key&&"Enter"!==i.key||(i.preventDefault(),i.stopPropagation(),this.arcgisSmartMappingSymbolPairPopoverChange.emit(e))}},"single"!==e?(0,s.h)("calcite-action",{scale:"s",slot:"actions-end",text:"symbol-pair-symbols"},(0,s.h)("div",{style:{width:"32px",height:"32px",backgroundImage:`url(${(0,s.a)("./assets/arcgis-smart-mapping-symbol-pair-images/")}${o})`}})):null)}get hostElement(){return(0,s.d)(this)}}},95129:(e,i,t)=>{t.d(i,{a:()=>o,b:()=>a,d:()=>r,u:()=>l});var s=t(9225);function o(e,i){e.labelFormatFunction=e=>n(e,i,"short-date"),e.inputFormatFunction=e=>n(e,i,"short-date"),e.inputParseFunction=e=>function(e,i){if(!e)return e;let t;if(i&&"system"!==i)if("unknown"===i)t=e;else{const s=new Date;t=e+(new Date(s.toLocaleString("en-US",{timeZone:"utc"})).getTime()-new Date(s.toLocaleString("en-US",{timeZone:i})).getTime())}else t=e+6e4*(new Date).getTimezoneOffset();return console.log("mapTZToUTC",e," - ",new Date(e).toISOString()," - ",new Date(t).toISOString()),t}(Date.parse(e),i)}function l(e,i){let t;if(i&&"system"!==i)if("unknown"===i)t=new Date(e).toISOString();else{const s=(new Date).getTimezoneOffset(),o=new Date(e).toLocaleString("en-US",{timeZone:i});t=new Date(new Date(o).getTime()-6e4*s).toISOString()}else{const i=(new Date).getTimezoneOffset();t=new Date(e-6e4*i).toISOString()}return t}function a(e,i,t){let s;if(i&&"system"!==i)if("unknown"===i)s=new Date(e).toISOString();else{const t=(new Date).getTimezoneOffset(),o=new Date(e).toLocaleString("en-US",{timeZone:i});s=new Date(new Date(o).getTime()-6e4*t).toISOString()}else{const i=(new Date).getTimezoneOffset();s=new Date(e-6e4*i).toISOString()}return s=t?s.substring(11,19):s.substring(11,16),s}function r(e,i){let t,s=new Date(e);if(s=new Date(s.getTime()-6e4*s.getTimezoneOffset()),i&&"system"!==i)if("unknown"===i)t=s.getTime();else{const e=new Date(s.toLocaleString("en-US",{timeZone:"utc"})).getTime()-new Date(s.toLocaleString("en-US",{timeZone:i})).getTime();t=s.getTime()+e}else t=s.getTime()+6e4*s.getTimezoneOffset();return t}function n(e,i,t){const{modules:o}=s.s;let l;return l="unknown"===i?o.intl.formatDate(e,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(t||"short-date-short-time")),{timeZone:"utc",timeZoneName:"shortOffset"})):o.intl.formatDate(e,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(t||"short-date-short-time")),{timeZone:i})),l}t(69283),t(49306)},41267:(e,i,t)=>{t.d(i,{a:()=>r,b:()=>a,g:()=>h,u:()=>l});var s=t(9225),o=(t(69283),t(10519));function l(e){const{layer:i,modules:t}=s.s,l=(0,s.h)(i),a=t.esriLang.clone(l.classBreakInfos);l.classBreakInfos=[],a.forEach(((i,t)=>{i=function(e,i,t,l){if((0,o.i)(i))if(0===i);else if(i<1){const o=Math.round(1/i);e.minValue="first"===l?Math.floor(e.minValue/i)/o:Math.round(e.minValue/i)/o,e.maxValue="last"===l?Math.ceil(e.maxValue/i)/o:Math.round(e.maxValue/i)/o,e.label=`${t>0?"> ":""}${e.minValue.toLocaleString(s.s.fullLocale,{maximumSignificantDigits:15})} - ${e.maxValue.toLocaleString(s.s.fullLocale,{maximumSignificantDigits:15})}`}else e.minValue="first"===l?Math.floor(e.minValue/i)*i:Math.round(e.minValue/i)*i,e.maxValue="last"===l?Math.ceil(e.maxValue/i)*i:Math.round(e.maxValue/i)*i,e.label=(t>0?"> ":"")+e.minValue.toLocaleString()+" - "+e.maxValue.toLocaleString();return e}(i,e,t,0===t?"first":t===a.length-1?"last":void 0),l.addClassBreakInfo({minValue:i.minValue,maxValue:i.maxValue,symbol:i.symbol,label:i.label})}))}function a(e){const{layer:i}=s.s,t=(0,s.h)(i).classBreakInfos;let o=e,l=1/0;t.forEach((e=>{o||(o=Math.max(n(e.minValue),n(e.maxValue))),l=Math.min(l,e.maxValue-e.minValue)}));const a=[];return l>1e7?(a.push(1e7),a.push(1e6),a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01)):l>1e6?(a.push(1e6),a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01)):l>1e5?(a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01)):l>1e4?(a.push(1e4),a.push(1e3),a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01)):l>1e3?(a.push(1e3),a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01),o>3&&a.push(.001)):l>100?(a.push(100),a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01),o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5)):l>10?(a.push(10),o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01),o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6)):l>1?(o>0&&a.push(1),o>1&&a.push(.1),o>2&&a.push(.01),o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6)):l>.1?(o>1&&a.push(.1),o>2&&a.push(.01),o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6)):l>.01?(o>2&&a.push(.01),o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6)):l>.001?(o>3&&a.push(.001),o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6),o>7&&a.push(1e-7)):l>1e-4?(o>4&&a.push(1e-4),o>5&&a.push(1e-5),o>6&&a.push(1e-6),o>7&&a.push(1e-7),o>8&&a.push(1e-8)):l>1e-5&&(o>5&&a.push(1e-5),o>6&&a.push(1e-6),o>7&&a.push(1e-7),o>8&&a.push(1e-8),o>9&&a.push(1e-9)),a}function r(){const{layer:e}=s.s,i=(0,s.h)(e);let t=1e10;return i.classBreakInfos.forEach((e=>{t=Math.min(t,u(e.minValue)),t=Math.min(t,u(e.maxValue))})),t}function n(e){let i=1;for(;Math.round(e*i)/i!==e;)i*=10;return Math.log(i)/Math.LN10}function u(e){let i=1e-8;for(;d(Math.round(e/i)*i)===e;)i*=10;return i/10}function d(e){return parseFloat(e.toPrecision(12))}function h(e){var i,t,s,l,a,r,u,h;let m=0;e.forEach((e=>{(0,o.i)(e.value)?m=Math.max(n(d(e.value)),m):((0,o.i)(e.minValue)&&(m=Math.max(n(d(e.minValue)),m)),(0,o.i)(e.maxValue)&&(m=Math.max(n(d(e.maxValue)),m)),(0,o.i)(e.min)&&(m=Math.max(n(d(e.min)),m)),(0,o.i)(e.max)&&(m=Math.max(n(d(e.max)),m)))})),m=Math.min(m,3);const c=e[0],p=e[e.length-1],S=Math.min(null!==(t=null!==(i=c.minValue)&&void 0!==i?i:c.min)&&void 0!==t?t:c.value,null!==(l=null!==(s=p.minValue)&&void 0!==s?s:p.min)&&void 0!==l?l:p.value),g=Math.max(null!==(r=null!==(a=c.maxValue)&&void 0!==a?a:c.max)&&void 0!==r?r:c.value,null!==(h=null!==(u=p.maxValue)&&void 0!==u?u:p.max)&&void 0!==h?h:p.value)-S;return g/e.length<2e-7?m=8:g/e.length<2e-6?m=7:g/e.length<2e-5?m=6:g/e.length<2e-4?m=5:g/e.length<.002?m=4:g/e.length<.02?m=3:g/e.length<.2?m=Math.max(m,2):g/e.length<2&&(m=Math.max(m,1)),Math.round(m)}},74537:(e,i,t)=>{t.d(i,{b:()=>o,u:()=>l});var s=t(9225);function o(e,i,t,s,o){const l=(null==e?void 0:e.length)?r(e,i.bins[s]):a(e.stops,i.bins[s]);l&&o.setAttribute("fill",l.toHex()),l&&o.setAttribute("opacity",`${Math.max(l.a,.2)}`),t.push(o)}function l(e,i,t,s){null==i||i.forEach(((i,o)=>{const l=(s||e.histogramConfig).bins[o],n=e.breaks?r(t||e.breaks,l):a((t||e).stops,l);n&&i.setAttribute("fill",n.toHex()),n&&i.setAttribute("opacity",`${Math.max(n.a,.2)}`)}))}function a(e,i){const{modules:t}=s.s;if(!i)return;const o=(i.maxValue-i.minValue)/2+i.minValue;let l=e[0],a=e[e.length-1];const r=l.value,n=a.value;if(o<r)return l.color;if(o>n)return a.color;const u=e.filter((e=>e.value===o));if(u.length>0)return u[0].color;l=null,a=null,e.forEach(((i,t)=>{!l&&!a&&i.value>=o&&(l=e[t-1],a=i)}));const d=(o-l.value)/(a.value-l.value);return t.esriColor.blendColors(l.color,a.color,d)}function r(e,i){if(!i)return;const t=(i.maxValue-i.minValue)/2+i.minValue;let s=e[0],o=e[e.length-1];if(t<s.min||t>o.max)return;const l=e.filter((e=>e.min===t));return l.length>0?l[0].color:(s=e[e.length-1],o=null,e.forEach(((i,l)=>{!o&&i.min>=t&&(s=e[l-1],o=i)})),s.color)}t(69283),t(49306)}}]);