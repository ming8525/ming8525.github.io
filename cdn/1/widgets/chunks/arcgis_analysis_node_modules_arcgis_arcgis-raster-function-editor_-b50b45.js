"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-b50b45"],{60764:(e,t,a)=>{a.d(t,{R:()=>i});const i={CORE:"CORE",STANDARD:"STANDARD"}},29614:(e,t,a)=>{function i(e){void 0!==e&&(e.open=!1,e.remove())}function o(e,t){!1===e.body.contains(t)&&(e.body.appendChild(t),t.open=!0)}function l(e,t){const{helpUrl:a,helpId:l,heading:r,referenceElement:n,portal:s,helpSrcdoc:d,helpFileName:c,learnMoreUrl:h,offsetDistance:m,offsetSkidding:p}=t;return void 0!==e&&(i(e),e=void 0),e=function(e){const{helpUrl:t,helpId:a,heading:i,referenceElement:o,portal:l,helpSrcdoc:r,learnMoreUrl:n,placement:s,offsetDistance:d,offsetSkidding:c}=e,h=document.createElement("rfx-help-popover");return h.helpUrl=t,h.helpId=a,h.heading=i,h.referenceElement=o,h.placement=s??"leading-start",h.portal=l,h.helpSrcdoc=r,h.learnMoreUrl=n,void 0!==d&&(h.offsetDistance=d),void 0!==c&&(h.offsetSkidding=c),h}({helpUrl:a,helpId:l,heading:r,referenceElement:n,portal:s,helpSrcdoc:d,helpFileName:c,learnMoreUrl:h,offsetDistance:m,offsetSkidding:p}),o(document,e),e}function r(e,t){const{referenceElement:a,label:l,direction:r,offsetDistance:n,offsetSkidding:s,showPropertiesAction:d,handleNodeDuplicate:c,handleNodeRename:h,handleNodeDelete:m,handleNodeEditProperties:p}=t;void 0!==e&&(i(e),e=void 0),e=document.createElement("calcite-popover");const f={overlayPositioning:"absolute",autoClose:!0,dir:r,focusTrapDisabled:!0,triggerDisabled:!0,pointerDisabled:!0,placement:"top",closable:!1,open:!0,referenceElement:a,label:l,offsetDistance:n,offsetSkidding:s};Object.assign(e,f);const u=document.createElement("rfx-node-interaction-toolbar"),g={showPropertiesAction:d,handleNodeDuplicate:c,handleNodeRename:h,handleNodeDelete:m,handleNodeEditProperties:p};return Object.assign(u,g),e.append(u),o(document,e),e}a.d(t,{c:()=>r,r:()=>i,s:()=>l})},35670:(e,t,a)=>{a.d(t,{H:()=>i,R:()=>o});const i={panel:"panel"},o={headerContent:"header-content",headerActionsEnd:"header-actions-end"}},97279:(e,t,a)=>{a.d(t,{E:()=>i});const i={newTemplate:"new-template",openTemplate:"open-template",addFunction:"add-function",addConstant:"add-constant",addRaster:"add-raster"}},80567:(e,t,a)=>{a.r(t),a.d(t,{rfx_editor_app:()=>f});var i=a(19451),o=a(97279),l=a(81279),r=a(84428),n=(a(34319),a(48302)),s=(a(46574),a(46717),a(55139),a(57098),a(78979),a(83345),a(99248),a(16888),a(95323),a(43278),a(86944),a(74656),a(35670)),d=a(29614),c=a(73594),h=a(60764);const m="overlay-element",p="overlay-panel",f=class{constructor(e){(0,i.r)(this,e),this.analysisRFTLaunch=(0,i.c)(this,"analysisRFTLaunch",7),this.rfxCoreServices={diagramZoomInCommand:void 0,diagramZoomOutCommand:void 0,diagramAutoLayoutCommand:void 0,diagramStretchCommand:void 0,diagramPanCommand:void 0,addRFxFunctionCommand:void 0,addRasterNodeCommand:void 0,addScalarNodeCommand:void 0,addRFTPortalItemCommand:void 0},this.overlayElementsConfig={leftToolBar:{slot:"left",visible:!0,builder:()=>(({handleDiagramZoomIn:e,handleDiagramZoomOut:t,handleDiagramAutoLayout:a,handleDiagramStretch:o,handleDiagramSelect:l,handleDiagramPan:r})=>(0,i.h)("rfx-diagram-interaction-toolbar",{handleDiagramZoomIn:e,handleDiagramZoomOut:t,handleDiagramAutoLayout:a,handleDiagramStretch:o,handleDiagramSelect:l,handleDiagramPan:r}))({handleDiagramZoomIn:this.handleDiagramZoomIn,handleDiagramZoomOut:this.handleDiagramZoomOut,handleDiagramAutoLayout:this.handleDiagramAutoLayout,handleDiagramStretch:this.handleDiagramStretch,handleDiagramSelect:this.handleDiagramSelect,handleDiagramPan:this.handleDiagramPan}),type:"static"},rightToolBar:{slot:"right",visible:!0,builder:()=>(({handleRFTLaunch:e,handleRFTSave:t,handleRFTSaveAs:a,handleOpenTemplateEditor:o,handleRFTShare:l})=>(0,i.h)("rfx-rft-interaction-toolbar",{handleRFTLaunch:e,handleRFTSave:t,handleRFTSaveAs:a,handleOpenTemplateEditor:o,handleRFTShare:l}))({handleRFTLaunch:this.handleRFTLaunch,handleRFTSave:this.handleRFTSave,handleRFTSaveAs:this.handleRFTSaveAs,handleOpenTemplateEditor:this.handleOpenTemplateEditor,handleRFTShare:this.handleRFTShare}),type:"static"},rfxTemplateEditor:{slot:"right",visible:!1,builder:({templatePropertiesTitle:e})=>(({heading:e,data:t,handlePanelClose:a,handlePanelCancel:o,handlePanelOk:l})=>(0,i.h)("rfx-panel",{heading:e,data:t,class:{[m]:!0,[p]:!0},showFooter:!0,closable:!0,onPanelOkClick:l,onPanelCancelClick:o,onCalcitePanelClose:a},(0,i.h)("rfx-template-editor",null)))({heading:e,handlePanelCancel:this.handleRFxTemplateEditorPanelCancel,handlePanelOk:this.handleRFxTemplateEditorPanelOk,handlePanelClose:this.handleRFxTemplateEditorPanelClose,data:{trialData:"trialData"}})},rfxListView:{slot:"left",visible:!1,builder:({addRasterFunctionTitle:e})=>(({handleTriggerSelectFunction:e,handlePanelClose:t,heading:a})=>(0,i.h)("rfx-panel",{heading:a,closable:!0,showFooter:!1,closed:!1,class:{[m]:!0,[p]:!0},onCalcitePanelClose:t},(0,i.h)("rfx-list-view",{mode:h.R.CORE,onTriggerSelectFunction:e})))({heading:e,handleTriggerSelectFunction:this.handleRFxListViewTriggerSelectFunction,handlePanelClose:this.handleRFxListViewPanelClose}),type:"static"},rfxArgDetailsEditor:{slot:"right",visible:!1,builder:({detailsEditorRfxTemplate:e})=>(({rfxTemplate:e,handlePanelClose:t,headerElementComponent:a,helpActionComponent:o})=>(0,i.h)("rfx-panel",{heading:e?.name,closable:!0,showFooter:!0,customHeader:!0,customHeaderAction:!0,class:{[m]:!0,[p]:!0},onCalcitePanelClose:t},a,o,(0,i.h)("rfx-details-editor",{rfxTemplate:e})))({rfxTemplate:e,handlePanelClose:this.handleRFxDetailsEditorPanelClose,headerElementComponent:(0,i.h)("div",{slot:s.R.headerContent,ref:e=>{this.headerElement=e}},e?.name),helpActionComponent:(0,i.h)("calcite-action",{label:"",text:"",icon:"information",slot:s.R.headerActionsEnd,class:"header-actions",onClick:this.handleRFxDetailsEditorHeadingHelpClick})})},rfxBrowseLayersDialog:{slot:"right",visible:!1,builder:({browseLayerDialogTitle:e})=>(({heading:e,handlePanelClose:t})=>(0,i.h)("rfx-panel",{heading:e,closable:!0,showFooter:!0,class:{[m]:!0,[p]:!0},onCalcitePanelClose:t},(0,i.h)("rfx-select-layer-panel",null)))({heading:e,handlePanelClose:this.handleRFxBrowseLayersPanelClose})}},this.initializeRFxEditorCore=e=>{const t=e;var a;this.rfxEditorCoreElement=e,this.rfxCoreServices.diagramZoomInCommand=(a=t,{execute:async()=>{await a.zoomIn()}}),this.rfxCoreServices.diagramZoomOutCommand=(e=>({execute:async()=>{await e.zoomOut()}}))(t),this.rfxCoreServices.diagramAutoLayoutCommand=(e=>({execute:async()=>{await e.autoLayout()}}))(t),this.rfxCoreServices.diagramStretchCommand=(e=>({execute:async()=>{await e.stretch()}}))(t),this.rfxCoreServices.diagramPanCommand=(e=>({execute:async()=>{await e.pan()}}))(t),this.rfxCoreServices.addRFxFunctionCommand=(e=>({execute:async t=>{await e.addRFxFunction(t)}}))(t),this.rfxCoreServices.addRasterNodeCommand=(e=>({execute:async()=>{await e.addRasterNode()}}))(t),this.rfxCoreServices.addScalarNodeCommand=(e=>({execute:async()=>{await e.addScalarNode()}}))(t),this.rfxCoreServices.addRFTPortalItemCommand=(e=>({execute:async t=>{await e.addRFTPortalItem(t)}}))(t)},this.afterCreatePanel=e=>{console.log("rfx-editor-app: panel created.",e)},this.handleNewTemplateClick=()=>{},this.handleOpenTemplateClick=()=>{const{portal:e}=this;this.itemBrowserElement=(0,c.c)({header:this.strings.browseRFT,portal:e,user:e.user,onClose:this.closItemBrowser,onSelection:this.handleItemBrowserSelection}),document.body.appendChild(this.itemBrowserElement)},this.handleItemBrowserSelection=async e=>{if(null!==e.detail){const t=e.detail.id;try{await this.rfxCoreServices.addRFTPortalItemCommand.execute(t)}catch(e){console.error("Unable to display selected Raster function template.")}}},this.handleAddFunctionClick=()=>{this.visibilityReducer({key:"rfxListView",visible:!0})},this.handleAddConstantClick=()=>{this.rfxCoreServices.addScalarNodeCommand.execute()},this.handleAddRasterClick=()=>{this.rfxCoreServices.addRasterNodeCommand.execute()},this.handleRunClick=()=>{},this.handleSaveClick=()=>{},this.handleCloseClick=()=>{},this.handleDiagramZoomIn=()=>{this.rfxCoreServices.diagramZoomInCommand.execute()},this.handleDiagramZoomOut=()=>{this.rfxCoreServices.diagramZoomOutCommand.execute()},this.handleDiagramAutoLayout=()=>{this.rfxCoreServices.diagramAutoLayoutCommand.execute()},this.handleDiagramStretch=()=>{this.rfxCoreServices.diagramStretchCommand.execute()},this.handleDiagramPan=()=>{this.rfxCoreServices.diagramPanCommand.execute()},this.handleDiagramSelect=()=>{this.rfxCoreServices.diagramPanCommand.execute()},this.handleRFTLaunch=()=>{this.analysisRFTLaunch.emit(this.rfxTemplate)},this.handleRFTSave=()=>{console.log("handleRFTSave")},this.closeSaveModal=()=>{void 0!==this.saveModalElement&&(this.saveModalElement.removeEventListener("cancelClick",this.closeSaveModal),this.saveModalElement.remove(),this.saveModalElement=void 0)},this.closItemBrowser=()=>{void 0!==this.itemBrowserElement&&(this.itemBrowserElement.removeEventListener("rfxItemBrowserClose",this.closItemBrowser),this.itemBrowserElement.remove(),this.itemBrowserElement=void 0)},this.handleRFTSaveAs=()=>{console.log("handleRFTSaveAs");const{portal:e,portalItem:t,closeSaveModal:a}=this;this.saveModalElement?.remove(),this.saveModalElement=(0,c.a)({portal:e,portalItem:t,onCancel:a}),document.body.appendChild(this.saveModalElement)},this.handleOpenTemplateEditor=()=>{this.visibilityReducer({key:"rfxTemplateEditor",visible:!0})},this.handleRFTShare=()=>{console.log("handleRFTShare")},this.handleRFxListViewTriggerSelectFunction=async e=>{e.stopPropagation();const{detail:t}=e,a=await(0,l.d)(t);this.detailsEditorRfxTemplate=a,this.rfxCoreServices.addRFxFunctionCommand.execute(a)},this.handleRFxListViewPanelClose=e=>{e.stopPropagation(),this.visibilityReducer({key:"rfxListView",visible:!1})},this.handleRFxTemplateEditorPanelClose=e=>{e.stopPropagation(),this.visibilityReducer({key:"rfxTemplateEditor",visible:!1})},this.handleRFxTemplateEditorPanelOk=e=>{e.stopPropagation();const{detail:t}=e;console.log(t)},this.handleRFxTemplateEditorPanelCancel=e=>{e.stopPropagation();const{detail:t}=e;console.log(t)},this.handleRFxDetailsEditorPanelClose=e=>{e.stopPropagation(),this.visibilityReducer({key:"rfxArgDetailsEditor",visible:!1})},this.handleRFxBrowseLayersPanelClose=e=>{e.stopPropagation(),this.visibilityReducer({key:"rfxBrowseLayersDialog",visible:!1})},this.handlePopoverClose=()=>{(0,d.r)(this.toolHelpPopover)},this.handleRFxDetailsEditorHeadingHelpClick=async()=>{const e=this.detailsEditorRfxTemplate,t=(0,l.h)(e),{helpTemplate:a,learnMoreUrl:i}=await(0,r.b)({rfxName:t,rfxTemplate:e,portal:void 0});this.toolHelpPopover=(0,d.s)(this.toolHelpPopover,{helpSrcdoc:a,helpId:"toolDescription",heading:e.name,referenceElement:this.headerElement,learnMoreUrl:i,offsetDistance:25,offsetSkidding:0}),this.toolHelpPopover.addEventListener("rfxHelpPopoverClose",this.handlePopoverClose)},this.showRfxList=!1,this.mapView=void 0,this.mapLayers=void 0,this.portal=void 0,this.portalItem=void 0,this.detailsEditorRfxTemplate=void 0,this.renderFlag=!1}handleActionBarClick(e){switch(e.detail.actionId){case o.E.newTemplate:this.handleNewTemplateClick();break;case o.E.openTemplate:this.handleOpenTemplateClick();break;case o.E.addFunction:this.handleAddFunctionClick();break;case o.E.addConstant:this.handleAddConstantClick();break;case o.E.addRaster:this.handleAddRasterClick()}console.log("actionBar clicked")}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,n.b)(this.hostElement,(0,i.g)(".")))}disconnectedCallback(){(0,d.r)(this.toolHelpPopover)}visibilityReducer({key:e,visible:t}){const a=this.overlayElementsConfig[e];if(a.visible!==t){if(!0===t){const e=Object.values(this.overlayElementsConfig).filter((e=>e.slot===a.slot));e.length>=2&&e.slice(1).forEach((e=>{e.visible=!1}))}a.visible=t,this.scheduleRenderer()}}scheduleRenderer(){this.renderFlag=!this.renderFlag}renderOverlayElements(){const e={detailsEditorRfxTemplate:this.detailsEditorRfxTemplate,addRasterFunctionTitle:this.strings.addRasterFunctionTitle,templatePropertiesTitle:this.strings.templatePropertiesTitle,browseLayerDialogTitle:this.strings.browseLayerDialogTitle},t=this.overlayElementsConfig;return Object.keys(t).map((a=>{const i=t[a];if(!i.visible)return[];const o=i?.builder?.(e);return o.$attrs$.slot=i.slot,o}))}_renderEditorCoreUI(){return(0,i.h)("rfx-editor-core",{ref:this.initializeRFxEditorCore,onRfxCoreNodeEditProperties:e=>{e.stopPropagation();const{detail:t}=e;switch(console.log(t),t.dataType){case"Raster":this.visibilityReducer({key:"rfxBrowseLayersDialog",visible:!0});break;case"Tool":this.visibilityReducer({key:"rfxArgDetailsEditor",visible:!0}),this.detailsEditorRfxTemplate=t.json}}},this.renderOverlayElements())}render(){return console.log("rfx-editor-app render"),(0,i.h)(i.H,{class:"host"},(0,i.h)("div",{class:{content:!0,"arcgis--rtl":"rtl"===this.direction}},(0,i.h)("slot",{name:"action-bar"}),(0,i.h)("calcite-panel",{heading:"",ref:this.afterCreatePanel},this._renderEditorCoreUI())))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,i.a)(this)}};f.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}.host{height:100%;width:100%}.content{height:100%;display:flex}.action-bar{height:100%;border-width:0 1px 0 0;border-style:solid;border-color:var(--calcite-color-border-2)}.menu-actions{display:inline-flex;justify-self:stretch}.header-actions{height:100%}.tooltip{white-space:nowrap}.arcgis--rtl .action-bar{border-width:0 0 0 1px}.editor-container{position:relative;}.overlay-element{z-index:3;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);border-radius:0.25rem}.overlay-panel{max-height:32rem;max-width:22rem;width:22rem}",a(36676),a(77162),a(48363),a(89920),a(53248)},73594:(e,t,a)=>{a.d(t,{a:()=>n,b:()=>l,c:()=>s,d:()=>o,e:()=>r});var i=a(77162);const o=({label:e,open:t})=>{const a=document.createElement("rfx-section");return a.label=e,a.open=t,a},l=({content:e,unsupportedWarningComponent:t,title:a,isFunctionChain:o})=>{const l=document.createElement("calcite-block");return l.open=!0,!0===o&&(l.heading=a,l.collapsible=!0,l.headingLevel=3),(0,i.i)(t)||l.appendChild(t),l.appendChild(e),l},r=({label:e,hideHelp:t=!1,onHelpActionClick:a})=>{const i=document.createElement("rfx-label");return i.label=e,i.hideHelp=t,i.addEventListener("rfxLabelHelpActionClick",a),i},n=({portal:e,portalItem:t,onCancel:a})=>{const i=document.createElement("rfx-save-modal");return i.portal=e,i.portalItem=t,i.addEventListener("cancelClick",a),i},s=({header:e,portal:t,user:a,onClose:i,onSelection:o})=>{const l=document.createElement("rfx-item-browser");return l.portal=t,l.user=a,l.header=e,l.filter='(type: "Raster function template")',l.selectionMode="single",l.addEventListener("rfxItemBrowserClose",i),l.addEventListener("rfxItemBrowserSelection",o),l}}}]);