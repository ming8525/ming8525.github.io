"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-eeb4bf"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-weighted-sum-table-editor-b4008d36.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-weighted-sum-table-editor-b4008d36.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxCteWeightedSumTableEditor)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");




















const component = "rfx-cte-weighted-sum-table-editor";
const HTMLClasses = {
    grid: `${component}__grid`,
    layerColumn: `${component}__layer-column`,
    fieldColumn: `${component}__field-column`,
    weightColumn: `${component}__weight-column`
};
const HelpClickHandlerKeys = {
    weightedSumTableHelpClickHandler: "weightedSumTableHelpClickHandler"
};

const rfxCteWeightedSumTableEditorCss = ":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh}.rfx-cte-weighted-sum-table-editor__grid table{width:100%;table-layout:fixed}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__layer-column{width:40%}.rfx-cte-weighted-sum-table-editor__field-column{width:30%}.rfx-cte-weighted-sum-table-editor__weight-column{width:16%}";

const RfxCteWeightedSumTableEditor = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.updateValue = (event) => {
            const { detail: { gridOptions } } = event;
            const { inputArgs } = this.widgetArgs;
            if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(gridOptions) || (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(inputArgs)) {
                return;
            }
            const rastersValueElements = [], fieldsValue = [], weightsValue = [];
            gridOptions.forEach((dataObj, id) => {
                if (id === gridOptions.length - 1) {
                    return; // last is a placeholder
                }
                const { layer, field, weight } = dataObj;
                rastersValueElements.push(layer);
                fieldsValue.push(field);
                weightsValue.push((0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_16__.p)(weight));
            });
            // Set inputArgs for Raster Function Template
            const rasters = inputArgs.Rasters, fields = inputArgs.Fields, weights = inputArgs.Weights;
            if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(rasters.value)) {
                rasters.value = { elements: rastersValueElements, type: "ArgumentArray" };
            }
            else {
                rasters.value.elements = rastersValueElements;
            }
            fields.value = fieldsValue;
            weights.value = weightsValue;
        };
        this.gridSchema = {
            canAdd: true,
            gridLayout: {},
            gridOptions: [],
            hasBorder: true,
            hasHeader: true,
            hasIdColumn: true
        };
        this.widgetArgs = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    async componentWillLoad() {
        ({ strings: this.strings, dir: this.direction } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(".")));
        this.initGrid();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * Creates an array of data objects as grid options based on the input arguments.
     * @returns {Object[]} The result array of data objects as grid options.
     */
    createGridOptions() {
        const { inputArgs } = this.widgetArgs;
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(inputArgs)) {
            return;
        }
        let dataLength = 0, idx = 0;
        const dataObjs = [], rasters = inputArgs.Rasters, fields = inputArgs.Fields, weights = inputArgs.Weights;
        const rasterElements = rasters.value?.elements ?? rasters.value ?? [];
        if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(rasters) && !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(fields) && !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(weights)) {
            dataLength = Math.max(rasterElements?.length, fields.value?.length || 0, weights.value?.length || 0);
        }
        if (dataLength === 0 || isNaN(dataLength)) {
            // add a blank object
            dataObjs.push({
                id: 0
            });
        }
        if (dataLength > 0 && ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(weights.value) || weights.value.length < dataLength)) {
            //if data is there (i.e. a raster is connected) and the weights array is empty, add a default value of 1 as in Pro.
            let i = 0;
            const weightDefault = weights.value ?? [];
            while (i < dataLength) {
                if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(weights.value?.[i])) {
                    weightDefault.push(1);
                }
                i++;
            }
            weights.value = weightDefault;
        }
        while (idx < dataLength) {
            dataObjs.push({
                id: idx,
                layer: rasterElements?.[idx],
                field: fields.value?.[idx],
                weight: weights.value?.[idx]
            });
            idx++;
        }
        return dataObjs;
    }
    initGrid() {
        const gridLayout = {
            layer: {
                allowScalar: false,
                label: this.strings.layer,
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__.G.raster,
                style: HTMLClasses.layerColumn
            },
            field: {
                label: this.strings.field,
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__.G.field,
                style: HTMLClasses.fieldColumn
            },
            weight: {
                label: this.strings.weight,
                uiType: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__.G.number,
                style: HTMLClasses.weightColumn
            }
        };
        const gridOptions = this.createGridOptions();
        this.gridSchema = {
            ...this.gridSchema,
            gridLayout,
            gridOptions
        };
    }
    attachHelpClickEventHandlers() {
        const weightedSumTableHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.strings.weightedSumTable,
            referenceElement: this.weightedSumTableElement,
            helpTextID: this.widgetArgs.helpTextIDs?.weightedsum_weightedsumtable
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.weightedSumTableHelpClickHandler, weightedSumTableHelpClickHandler);
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "default", ref: (e) => {
                this.weightedSumTableElement = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.strings.weightedSumTable, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.weightedSumTableHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-grid", { canAdd: this.gridSchema.canAdd, class: HTMLClasses.grid, gridLayout: this.gridSchema.gridLayout, gridOptions: this.gridSchema.gridOptions, hasBorder: this.gridSchema.hasBorder, hasHeader: this.gridSchema.hasHeader, hasIdColumn: this.gridSchema.hasIdColumn, inputLayers: this.widgetArgs.inputLayers, onRfxGridOptionChange: this.updateValue, rfxBrowseLayerClick: this.widgetArgs.onRfxBrowseLayerClick }))));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};
RfxCteWeightedSumTableEditor.style = rfxCteWeightedSumTableEditorCss;



//# sourceMappingURL=rfx-cte-weighted-sum-table-editor-b4008d36.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-weighted-sum-table-editor.entry.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-weighted-sum-table-editor.entry.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_weighted_sum_table_editor: () => (/* reexport safe */ _rfx_cte_weighted_sum_table_editor_b4008d36_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_weighted_sum_table_editor_b4008d36_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-weighted-sum-table-editor-b4008d36.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-weighted-sum-table-editor-b4008d36.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");






















//# sourceMappingURL=rfx-cte-weighted-sum-table-editor.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ formatNumberToLocale),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   i: () => (/* binding */ isValidNumber),
/* harmony export */   p: () => (/* binding */ parseNumber),
/* harmony export */   s: () => (/* binding */ sanitizeNumber)
/* harmony export */ });
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");



/**
 * Indicates if a provided number value is valid.
 * An invalid value is: undefined | NaN | Infinite | -Infinite | null
 * See for more details:
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN
 * @param {number | undefined | null} value value to check
 * @returns {boolean} if valid or not
 */
function isValidNumber(value) {
    return value !== undefined && value !== null && Number.isNaN(value) === false && Number.isFinite(value) === true;
}
/**
 * Returns a string representation of the provided number for use with calcite-input. It also
 * guards against invalid types following this logic:
 *   - If the value is valid (not NaN, finite), the value is returned as a string
 *   - If not and if a valid default value is provided, the default value is returned as a string
 *   - If not, an empty string is returned
 * @param value
 * @param defaultValue
 * @returns a sanitized string
 */
function sanitizeNumber(value, defaultValue) {
    let returnedValue;
    if (value !== null) {
        const testedValue = typeof value === "string" ? Number.parseFloat(value) : value;
        if (isValidNumber(testedValue))
            returnedValue = testedValue;
        else if (isValidNumber(defaultValue))
            returnedValue = defaultValue;
    }
    return returnedValue === undefined ? "" : `${returnedValue}`;
}
/**
 * Parses a value string to a number for use with calcite-input. If the string is empty, it will return undefined.
 * If the string is otherwise invalid, it will return NaN.
 * @param value calcite-input value
 * @returns {number | undefined} the parsed number
 */
function parseNumber(value) {
    if (value === "")
        return undefined;
    return Number.parseFloat(value);
}
/**
 * Formats a number to a specified number of decimal places.
 *
 * @param {number} value - The number to format.
 * @param {number} [fractionDigits=3] - The number of decimal places to include in the formatted number. Defaults to 3.
 * @returns {number|undefined} - The formatted number, or undefined if the input value is empty.
 */
function formatNumber(value, fractionDigits = 3) {
    if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value))
        return undefined;
    return Number.parseFloat(value.toFixed(fractionDigits));
}
/**
 * Formats a number or string representing a number according to the locale, passing Intl number format options
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/ReferenceGlobal_Objects/Intl/NumberFormat/NumberFormat#options
 * @param {number | string | undefined} value to be formatted and localized
 * @param {Intl.NumberFormatOptions} formatOptions options object matching Intl.NumberFormat
 * @returns {string} localized / rounded string
 */
function formatNumberToLocale(value, formatOptions) {
    let formattedValue = "";
    if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value) && !Number.isNaN(value)) {
        const localeCode = (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__.g)().locale;
        formattedValue = Intl.NumberFormat(localeCode, formatOptions).format(Number(value));
    }
    return formattedValue;
}



//# sourceMappingURL=sanitize-number-d84114f7.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLWVlYjRiZi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxSDtBQUNsRjtBQUNrRDtBQUNwQjtBQUNSO0FBQ0U7QUFDVDtBQUNYO0FBQ0Q7QUFDTztBQUNrQjtBQUM5QjtBQUMwQjtBQUNGO0FBQzFCO0FBQ087QUFDMkI7QUFDdEI7QUFDQTs7QUFFM0M7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QixvQkFBb0IsVUFBVTtBQUM5QixvQkFBb0IsVUFBVTtBQUM5QixxQkFBcUIsVUFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBK0MsOEJBQThCLG9DQUFvQyxvQ0FBb0Msb0NBQW9DLHVDQUF1Qyx1Q0FBdUMsc0NBQXNDLDRDQUE0Qyw0Q0FBNEMsbUNBQW1DLHFDQUFxQyxxQ0FBcUMscUNBQXFDLCtCQUErQiwrQkFBK0IsK0JBQStCLHFDQUFxQyxrQ0FBa0MsaUNBQWlDLGlDQUFpQyxpQ0FBaUMscUNBQXFDLDhCQUE4QiwwQkFBMEIsb0NBQW9DLHdCQUF3QixtQ0FBbUMsb0RBQW9ELHNDQUFzQyxzQ0FBc0Msa0NBQWtDLGlDQUFpQywrQ0FBK0MsV0FBVyxtQkFBbUIsdUVBQXVFLFNBQVMsc0VBQXNFLFNBQVMsdUVBQXVFLFNBQVMsc0VBQXNFLFNBQVMsaURBQWlELFVBQVUsaURBQWlELFVBQVUsa0RBQWtELFVBQVU7O0FBRTF0RDtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsaUNBQWlDLHFEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVLGdCQUFnQjtBQUM5QyxvQkFBb0IsWUFBWTtBQUNoQyxnQkFBZ0IsMkRBQWUsaUJBQWlCLDJEQUFlO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4RTs7QUFFOUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS9yZngtY3RlLXdlaWdodGVkLXN1bS10YWJsZS1lZGl0b3ItYjQwMDhkMzYuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LWN0ZS13ZWlnaHRlZC1zdW0tdGFibGUtZWRpdG9yLmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3Nhbml0aXplLW51bWJlci1kODQxMTRmNy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGcgYXMgZ2V0QXNzZXRQYXRoLCBoLCBhIGFzIGdldEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LWRhMWI3MTM4LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvbGFuZy5qcyc7XG5pbXBvcnQgeyBiIGFzIGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzRW1wdHlEYXRhSXRlbSB9IGZyb20gJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuaW1wb3J0IHsgVSBhcyBVSURlZmF1bHRzIH0gZnJvbSAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgeyBHIGFzIEdyaWRDb2x1bW4gfSBmcm9tICcuL2ludGVyZmFjZXMtZDBjNjg5NDQuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvaWRlbnRpdHkvSWRlbnRpdHlNYW5hZ2VyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BbGdvcml0aG1pY0NvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvTXVsdGlwYXJ0Q29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL0NvbG9yLmpzJztcbmltcG9ydCAnLi9jb2xvclJhbXBVdGlscy04YmRkNDZjNS5qcyc7XG5pbXBvcnQgeyBwIGFzIHBhcnNlTnVtYmVyIH0gZnJvbSAnLi9zYW5pdGl6ZS1udW1iZXItZDg0MTE0ZjcuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG5jb25zdCBjb21wb25lbnQgPSBcInJmeC1jdGUtd2VpZ2h0ZWQtc3VtLXRhYmxlLWVkaXRvclwiO1xuY29uc3QgSFRNTENsYXNzZXMgPSB7XG4gICAgZ3JpZDogYCR7Y29tcG9uZW50fV9fZ3JpZGAsXG4gICAgbGF5ZXJDb2x1bW46IGAke2NvbXBvbmVudH1fX2xheWVyLWNvbHVtbmAsXG4gICAgZmllbGRDb2x1bW46IGAke2NvbXBvbmVudH1fX2ZpZWxkLWNvbHVtbmAsXG4gICAgd2VpZ2h0Q29sdW1uOiBgJHtjb21wb25lbnR9X193ZWlnaHQtY29sdW1uYFxufTtcbmNvbnN0IEhlbHBDbGlja0hhbmRsZXJLZXlzID0ge1xuICAgIHdlaWdodGVkU3VtVGFibGVIZWxwQ2xpY2tIYW5kbGVyOiBcIndlaWdodGVkU3VtVGFibGVIZWxwQ2xpY2tIYW5kbGVyXCJcbn07XG5cbmNvbnN0IHJmeEN0ZVdlaWdodGVkU3VtVGFibGVFZGl0b3JDc3MgPSBcIjpyb290ey0tY2FsY2l0ZS1jb2xvci1icmFuZDojMDA3YWMyOy0tY2FsY2l0ZS1jb2xvci1icmFuZC1ob3ZlcjojMDA2MTliOy0tY2FsY2l0ZS1jb2xvci1icmFuZC1wcmVzczojMDA0ODc0Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtaW5mbzojMDA2MTliOy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtc3VjY2VzczojMzVhYzQ2Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtd2FybmluZzojZWRkMzE3Oy0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyOiNkODMwMjA7LS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXItaG92ZXI6I2E4MmIxZTstLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlci1wcmVzczojN2MxZDEzOy0tY2FsY2l0ZS1jb2xvci1iYWNrZ3JvdW5kOiNmOGY4Zjg7LS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMTojZmZmZmZmOy0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTI6I2YzZjNmMzstLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zOiNlYWVhZWE7LS1jYWxjaXRlLWNvbG9yLXRleHQtMTojMTUxNTE1Oy0tY2FsY2l0ZS1jb2xvci10ZXh0LTI6IzRhNGE0YTstLWNhbGNpdGUtY29sb3ItdGV4dC0zOiM2YTZhNmE7LS1jYWxjaXRlLWNvbG9yLXRleHQtaW52ZXJzZTojZmZmZmZmOy0tY2FsY2l0ZS1jb2xvci10ZXh0LWxpbms6IzAwNjE5YjstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTE6I2NhY2FjYTstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTI6I2Q0ZDRkNDstLWNhbGNpdGUtY29sb3ItYm9yZGVyLTM6I2RmZGZkZjstLWNhbGNpdGUtY29sb3ItYm9yZGVyLWlucHV0OiM5NDk0OTQ7LS1yZngtcXVhcnRlci1zcGFjaW5nOjAuMjVyZW07LS1yZngtaGFsZi1zcGFjaW5nOjAuNXJlbTstLXJmeC10aHJlZS1xdWFydGVyLXNwYWNpbmc6MC43NXJlbTstLXJmeC1mdWxsLXNwYWNpbmc6MXJlbTstLXJmeC1jb21wb25lbnQtZGVmYXVsdC13aWR0aDoxMDAlOy0tcmZ4LXVpLWJvcmRlci1pbnB1dDp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0yKTstLXJmeC1wb3BvdmVyLWNvbnRlbnQtbWluLWhlaWdodDozMHZoOy0tcmZ4LXBvcG92ZXItY29udGVudC1tYXgtaGVpZ2h0OjYwdmg7LS1yZngtcG9wb3Zlci1jb250ZW50LWhlaWdodDo0NXZoOy0tcmZ4LXdpZGdldC1jb250ZW50LWhlaWdodDozMHZofS5yZngtY3RlLXdlaWdodGVkLXN1bS10YWJsZS1lZGl0b3JfX2dyaWQgdGFibGV7d2lkdGg6MTAwJTt0YWJsZS1sYXlvdXQ6Zml4ZWR9LnJmeC1jdGUtd2VpZ2h0ZWQtc3VtLXRhYmxlLWVkaXRvcl9fZ3JpZCB0YWJsZSB0aGVhZCB0ciB0aDpmaXJzdC1jaGlsZHt3aWR0aDo3JX0ucmZ4LWN0ZS13ZWlnaHRlZC1zdW0tdGFibGUtZWRpdG9yX19ncmlkIHRhYmxlIHRoZWFkIHRyIHRoOmxhc3QtY2hpbGR7d2lkdGg6NyV9LnJmeC1jdGUtd2VpZ2h0ZWQtc3VtLXRhYmxlLWVkaXRvcl9fZ3JpZCB0YWJsZSB0Ym9keSB0ciB0ZDpmaXJzdC1jaGlsZHt3aWR0aDo3JX0ucmZ4LWN0ZS13ZWlnaHRlZC1zdW0tdGFibGUtZWRpdG9yX19ncmlkIHRhYmxlIHRib2R5IHRyIHRkOmxhc3QtY2hpbGR7d2lkdGg6NyV9LnJmeC1jdGUtd2VpZ2h0ZWQtc3VtLXRhYmxlLWVkaXRvcl9fbGF5ZXItY29sdW1ue3dpZHRoOjQwJX0ucmZ4LWN0ZS13ZWlnaHRlZC1zdW0tdGFibGUtZWRpdG9yX19maWVsZC1jb2x1bW57d2lkdGg6MzAlfS5yZngtY3RlLXdlaWdodGVkLXN1bS10YWJsZS1lZGl0b3JfX3dlaWdodC1jb2x1bW57d2lkdGg6MTYlfVwiO1xuXG5jb25zdCBSZnhDdGVXZWlnaHRlZFN1bVRhYmxlRWRpdG9yID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5yZnhBcmd1bWVudENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwicmZ4QXJndW1lbnRDaGFuZ2VcIiwgNyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgZXZlbnQgaGFuZGxlcnMgZm9yIGhlbHAgYWN0aW9uIGNsaWNrLCBzdG9yZWQgaW4gY29ubmVjdGVkIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgICAqIGZldGNoaW5nIGZ1bmN0aW9uIG9uIGVhY2ggcmVuZGVyICggdG8gYXZvaWQgY29tbW9uIGJhZCBwcmFjdGljZSApXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGV0YWlsOiB7IGdyaWRPcHRpb25zIH0gfSA9IGV2ZW50O1xuICAgICAgICAgICAgY29uc3QgeyBpbnB1dEFyZ3MgfSA9IHRoaXMud2lkZ2V0QXJncztcbiAgICAgICAgICAgIGlmIChpc0VtcHR5RGF0YUl0ZW0oZ3JpZE9wdGlvbnMpIHx8IGlzRW1wdHlEYXRhSXRlbShpbnB1dEFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmFzdGVyc1ZhbHVlRWxlbWVudHMgPSBbXSwgZmllbGRzVmFsdWUgPSBbXSwgd2VpZ2h0c1ZhbHVlID0gW107XG4gICAgICAgICAgICBncmlkT3B0aW9ucy5mb3JFYWNoKChkYXRhT2JqLCBpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gZ3JpZE9wdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIGxhc3QgaXMgYSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGxheWVyLCBmaWVsZCwgd2VpZ2h0IH0gPSBkYXRhT2JqO1xuICAgICAgICAgICAgICAgIHJhc3RlcnNWYWx1ZUVsZW1lbnRzLnB1c2gobGF5ZXIpO1xuICAgICAgICAgICAgICAgIGZpZWxkc1ZhbHVlLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgICAgIHdlaWdodHNWYWx1ZS5wdXNoKHBhcnNlTnVtYmVyKHdlaWdodCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTZXQgaW5wdXRBcmdzIGZvciBSYXN0ZXIgRnVuY3Rpb24gVGVtcGxhdGVcbiAgICAgICAgICAgIGNvbnN0IHJhc3RlcnMgPSBpbnB1dEFyZ3MuUmFzdGVycywgZmllbGRzID0gaW5wdXRBcmdzLkZpZWxkcywgd2VpZ2h0cyA9IGlucHV0QXJncy5XZWlnaHRzO1xuICAgICAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbShyYXN0ZXJzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJhc3RlcnMudmFsdWUgPSB7IGVsZW1lbnRzOiByYXN0ZXJzVmFsdWVFbGVtZW50cywgdHlwZTogXCJBcmd1bWVudEFycmF5XCIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJhc3RlcnMudmFsdWUuZWxlbWVudHMgPSByYXN0ZXJzVmFsdWVFbGVtZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkcy52YWx1ZSA9IGZpZWxkc1ZhbHVlO1xuICAgICAgICAgICAgd2VpZ2h0cy52YWx1ZSA9IHdlaWdodHNWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ncmlkU2NoZW1hID0ge1xuICAgICAgICAgICAgY2FuQWRkOiB0cnVlLFxuICAgICAgICAgICAgZ3JpZExheW91dDoge30sXG4gICAgICAgICAgICBncmlkT3B0aW9uczogW10sXG4gICAgICAgICAgICBoYXNCb3JkZXI6IHRydWUsXG4gICAgICAgICAgICBoYXNIZWFkZXI6IHRydWUsXG4gICAgICAgICAgICBoYXNJZENvbHVtbjogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLndpZGdldEFyZ3MgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBMaWZlY3ljbGVcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgKHsgc3RyaW5nczogdGhpcy5zdHJpbmdzLCBkaXI6IHRoaXMuZGlyZWN0aW9uIH0gPSBhd2FpdCBmZXRjaENvbXBvbmVudExvY2FsZVN0cmluZ3ModGhpcy5ob3N0RWxlbWVudCwgZ2V0QXNzZXRQYXRoKFwiLlwiKSkpO1xuICAgICAgICB0aGlzLmluaXRHcmlkKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBkYXRhIG9iamVjdHMgYXMgZ3JpZCBvcHRpb25zIGJhc2VkIG9uIHRoZSBpbnB1dCBhcmd1bWVudHMuXG4gICAgICogQHJldHVybnMge09iamVjdFtdfSBUaGUgcmVzdWx0IGFycmF5IG9mIGRhdGEgb2JqZWN0cyBhcyBncmlkIG9wdGlvbnMuXG4gICAgICovXG4gICAgY3JlYXRlR3JpZE9wdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHsgaW5wdXRBcmdzIH0gPSB0aGlzLndpZGdldEFyZ3M7XG4gICAgICAgIGlmIChpc0VtcHR5RGF0YUl0ZW0oaW5wdXRBcmdzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhTGVuZ3RoID0gMCwgaWR4ID0gMDtcbiAgICAgICAgY29uc3QgZGF0YU9ianMgPSBbXSwgcmFzdGVycyA9IGlucHV0QXJncy5SYXN0ZXJzLCBmaWVsZHMgPSBpbnB1dEFyZ3MuRmllbGRzLCB3ZWlnaHRzID0gaW5wdXRBcmdzLldlaWdodHM7XG4gICAgICAgIGNvbnN0IHJhc3RlckVsZW1lbnRzID0gcmFzdGVycy52YWx1ZT8uZWxlbWVudHMgPz8gcmFzdGVycy52YWx1ZSA/PyBbXTtcbiAgICAgICAgaWYgKCFpc0VtcHR5RGF0YUl0ZW0ocmFzdGVycykgJiYgIWlzRW1wdHlEYXRhSXRlbShmaWVsZHMpICYmICFpc0VtcHR5RGF0YUl0ZW0od2VpZ2h0cykpIHtcbiAgICAgICAgICAgIGRhdGFMZW5ndGggPSBNYXRoLm1heChyYXN0ZXJFbGVtZW50cz8ubGVuZ3RoLCBmaWVsZHMudmFsdWU/Lmxlbmd0aCB8fCAwLCB3ZWlnaHRzLnZhbHVlPy5sZW5ndGggfHwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFMZW5ndGggPT09IDAgfHwgaXNOYU4oZGF0YUxlbmd0aCkpIHtcbiAgICAgICAgICAgIC8vIGFkZCBhIGJsYW5rIG9iamVjdFxuICAgICAgICAgICAgZGF0YU9ianMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhTGVuZ3RoID4gMCAmJiAoaXNFbXB0eURhdGFJdGVtKHdlaWdodHMudmFsdWUpIHx8IHdlaWdodHMudmFsdWUubGVuZ3RoIDwgZGF0YUxlbmd0aCkpIHtcbiAgICAgICAgICAgIC8vaWYgZGF0YSBpcyB0aGVyZSAoaS5lLiBhIHJhc3RlciBpcyBjb25uZWN0ZWQpIGFuZCB0aGUgd2VpZ2h0cyBhcnJheSBpcyBlbXB0eSwgYWRkIGEgZGVmYXVsdCB2YWx1ZSBvZiAxIGFzIGluIFByby5cbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIGNvbnN0IHdlaWdodERlZmF1bHQgPSB3ZWlnaHRzLnZhbHVlID8/IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBkYXRhTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbSh3ZWlnaHRzLnZhbHVlPy5baV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodERlZmF1bHQucHVzaCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2VpZ2h0cy52YWx1ZSA9IHdlaWdodERlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGlkeCA8IGRhdGFMZW5ndGgpIHtcbiAgICAgICAgICAgIGRhdGFPYmpzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBpZHgsXG4gICAgICAgICAgICAgICAgbGF5ZXI6IHJhc3RlckVsZW1lbnRzPy5baWR4XSxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGRzLnZhbHVlPy5baWR4XSxcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodHMudmFsdWU/LltpZHhdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkeCsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhT2JqcztcbiAgICB9XG4gICAgaW5pdEdyaWQoKSB7XG4gICAgICAgIGNvbnN0IGdyaWRMYXlvdXQgPSB7XG4gICAgICAgICAgICBsYXllcjoge1xuICAgICAgICAgICAgICAgIGFsbG93U2NhbGFyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5zdHJpbmdzLmxheWVyLFxuICAgICAgICAgICAgICAgIHVpVHlwZTogR3JpZENvbHVtbi5yYXN0ZXIsXG4gICAgICAgICAgICAgICAgc3R5bGU6IEhUTUxDbGFzc2VzLmxheWVyQ29sdW1uXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5zdHJpbmdzLmZpZWxkLFxuICAgICAgICAgICAgICAgIHVpVHlwZTogR3JpZENvbHVtbi5maWVsZCxcbiAgICAgICAgICAgICAgICBzdHlsZTogSFRNTENsYXNzZXMuZmllbGRDb2x1bW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3ZWlnaHQ6IHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5zdHJpbmdzLndlaWdodCxcbiAgICAgICAgICAgICAgICB1aVR5cGU6IEdyaWRDb2x1bW4ubnVtYmVyLFxuICAgICAgICAgICAgICAgIHN0eWxlOiBIVE1MQ2xhc3Nlcy53ZWlnaHRDb2x1bW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZ3JpZE9wdGlvbnMgPSB0aGlzLmNyZWF0ZUdyaWRPcHRpb25zKCk7XG4gICAgICAgIHRoaXMuZ3JpZFNjaGVtYSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuZ3JpZFNjaGVtYSxcbiAgICAgICAgICAgIGdyaWRMYXlvdXQsXG4gICAgICAgICAgICBncmlkT3B0aW9uc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBjb25zdCB3ZWlnaHRlZFN1bVRhYmxlSGVscENsaWNrSGFuZGxlciA9IHRoaXMud2lkZ2V0QXJncy5vbkhlbHBBY3Rpb25DbGljayh7XG4gICAgICAgICAgICBoZWFkaW5nOiB0aGlzLnN0cmluZ3Mud2VpZ2h0ZWRTdW1UYWJsZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IHRoaXMud2VpZ2h0ZWRTdW1UYWJsZUVsZW1lbnQsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LndlaWdodGVkc3VtX3dlaWdodGVkc3VtdGFibGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMud2VpZ2h0ZWRTdW1UYWJsZUhlbHBDbGlja0hhbmRsZXIsIHdlaWdodGVkU3VtVGFibGVIZWxwQ2xpY2tIYW5kbGVyKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBhbGlnbm1lbnQ6IFwic3RhcnRcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIGxheW91dDogXCJkZWZhdWx0XCIsIHJlZjogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndlaWdodGVkU3VtVGFibGVFbGVtZW50ID0gZTtcbiAgICAgICAgICAgIH0gfSwgaChcInJmeC1sYWJlbFwiLCB7IGxhYmVsOiB0aGlzLnN0cmluZ3Mud2VpZ2h0ZWRTdW1UYWJsZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzPy5nZXQoSGVscENsaWNrSGFuZGxlcktleXMud2VpZ2h0ZWRTdW1UYWJsZUhlbHBDbGlja0hhbmRsZXIpKCkgfSksIGgoXCJyZngtZ3JpZFwiLCB7IGNhbkFkZDogdGhpcy5ncmlkU2NoZW1hLmNhbkFkZCwgY2xhc3M6IEhUTUxDbGFzc2VzLmdyaWQsIGdyaWRMYXlvdXQ6IHRoaXMuZ3JpZFNjaGVtYS5ncmlkTGF5b3V0LCBncmlkT3B0aW9uczogdGhpcy5ncmlkU2NoZW1hLmdyaWRPcHRpb25zLCBoYXNCb3JkZXI6IHRoaXMuZ3JpZFNjaGVtYS5oYXNCb3JkZXIsIGhhc0hlYWRlcjogdGhpcy5ncmlkU2NoZW1hLmhhc0hlYWRlciwgaGFzSWRDb2x1bW46IHRoaXMuZ3JpZFNjaGVtYS5oYXNJZENvbHVtbiwgaW5wdXRMYXllcnM6IHRoaXMud2lkZ2V0QXJncy5pbnB1dExheWVycywgb25SZnhHcmlkT3B0aW9uQ2hhbmdlOiB0aGlzLnVwZGF0ZVZhbHVlLCByZnhCcm93c2VMYXllckNsaWNrOiB0aGlzLndpZGdldEFyZ3Mub25SZnhCcm93c2VMYXllckNsaWNrIH0pKSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJ0OW5cIl07IH1cbiAgICBnZXQgaG9zdEVsZW1lbnQoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuUmZ4Q3RlV2VpZ2h0ZWRTdW1UYWJsZUVkaXRvci5zdHlsZSA9IHJmeEN0ZVdlaWdodGVkU3VtVGFibGVFZGl0b3JDc3M7XG5cbmV4cG9ydCB7IFJmeEN0ZVdlaWdodGVkU3VtVGFibGVFZGl0b3IgYXMgUiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLXdlaWdodGVkLXN1bS10YWJsZS1lZGl0b3ItYjQwMDhkMzYuanMubWFwIiwiZXhwb3J0IHsgUiBhcyByZnhfY3RlX3dlaWdodGVkX3N1bV90YWJsZV9lZGl0b3IgfSBmcm9tICcuL3JmeC1jdGUtd2VpZ2h0ZWQtc3VtLXRhYmxlLWVkaXRvci1iNDAwOGQzNi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCAnLi9sb2NhbGl6YXRpb24taGVscGVyLTQ4MTliNjdkLmpzJztcbmltcG9ydCAnLi90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyc7XG5pbXBvcnQgJy4vX2dldFRhZy05NmFmMDI5ZC5qcyc7XG5pbXBvcnQgJy4vdWktdXRpbHMtOTI4YTQwOTYuanMnO1xuaW1wb3J0ICcuL2ludGVyZmFjZXMtZDBjNjg5NDQuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvaWRlbnRpdHkvSWRlbnRpdHlNYW5hZ2VyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2NvcmUvdXJsVXRpbHMuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0xheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9JbWFnZXJ5TGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvc21hcnRNYXBwaW5nL3Jhc3Rlci9yZW5kZXJlcnMvc3RyZXRjaC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BbGdvcml0aG1pY0NvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvTXVsdGlwYXJ0Q29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL0NvbG9yLmpzJztcbmltcG9ydCAnLi9jb2xvclJhbXBVdGlscy04YmRkNDZjNS5qcyc7XG5pbXBvcnQgJy4vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS13ZWlnaHRlZC1zdW0tdGFibGUtZWRpdG9yLmVudHJ5LmpzLm1hcCIsImltcG9ydCB7IGcgYXMgZ2V0TG9jYWxlSW5mbyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgeyBpIGFzIGlzRW1wdHlEYXRhSXRlbSB9IGZyb20gJy4vdHlwZS1nYXVyZHMtMTg0MDc0N2YuanMnO1xuXG4vKipcbiAqIEluZGljYXRlcyBpZiBhIHByb3ZpZGVkIG51bWJlciB2YWx1ZSBpcyB2YWxpZC5cbiAqIEFuIGludmFsaWQgdmFsdWUgaXM6IHVuZGVmaW5lZCB8IE5hTiB8IEluZmluaXRlIHwgLUluZmluaXRlIHwgbnVsbFxuICogU2VlIGZvciBtb3JlIGRldGFpbHM6XG4gKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL2lzRmluaXRlXG4gKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL2lzTmFOXG4gKiBAcGFyYW0ge251bWJlciB8IHVuZGVmaW5lZCB8IG51bGx9IHZhbHVlIHZhbHVlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gaWYgdmFsaWQgb3Igbm90XG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWROdW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBOdW1iZXIuaXNOYU4odmFsdWUpID09PSBmYWxzZSAmJiBOdW1iZXIuaXNGaW5pdGUodmFsdWUpID09PSB0cnVlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm92aWRlZCBudW1iZXIgZm9yIHVzZSB3aXRoIGNhbGNpdGUtaW5wdXQuIEl0IGFsc29cbiAqIGd1YXJkcyBhZ2FpbnN0IGludmFsaWQgdHlwZXMgZm9sbG93aW5nIHRoaXMgbG9naWM6XG4gKiAgIC0gSWYgdGhlIHZhbHVlIGlzIHZhbGlkIChub3QgTmFOLCBmaW5pdGUpLCB0aGUgdmFsdWUgaXMgcmV0dXJuZWQgYXMgYSBzdHJpbmdcbiAqICAgLSBJZiBub3QgYW5kIGlmIGEgdmFsaWQgZGVmYXVsdCB2YWx1ZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgcmV0dXJuZWQgYXMgYSBzdHJpbmdcbiAqICAgLSBJZiBub3QsIGFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogQHBhcmFtIHZhbHVlXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlXG4gKiBAcmV0dXJucyBhIHNhbml0aXplZCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gc2FuaXRpemVOdW1iZXIodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGxldCByZXR1cm5lZFZhbHVlO1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB0ZXN0ZWRWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IE51bWJlci5wYXJzZUZsb2F0KHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICBpZiAoaXNWYWxpZE51bWJlcih0ZXN0ZWRWYWx1ZSkpXG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gdGVzdGVkVmFsdWU7XG4gICAgICAgIGVsc2UgaWYgKGlzVmFsaWROdW1iZXIoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgICAgIHJldHVybmVkVmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5lZFZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogYCR7cmV0dXJuZWRWYWx1ZX1gO1xufVxuLyoqXG4gKiBQYXJzZXMgYSB2YWx1ZSBzdHJpbmcgdG8gYSBudW1iZXIgZm9yIHVzZSB3aXRoIGNhbGNpdGUtaW5wdXQuIElmIHRoZSBzdHJpbmcgaXMgZW1wdHksIGl0IHdpbGwgcmV0dXJuIHVuZGVmaW5lZC5cbiAqIElmIHRoZSBzdHJpbmcgaXMgb3RoZXJ3aXNlIGludmFsaWQsIGl0IHdpbGwgcmV0dXJuIE5hTi5cbiAqIEBwYXJhbSB2YWx1ZSBjYWxjaXRlLWlucHV0IHZhbHVlXG4gKiBAcmV0dXJucyB7bnVtYmVyIHwgdW5kZWZpbmVkfSB0aGUgcGFyc2VkIG51bWJlclxuICovXG5mdW5jdGlvbiBwYXJzZU51bWJlcih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gXCJcIilcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUpO1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgbnVtYmVyIHRvIGEgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBUaGUgbnVtYmVyIHRvIGZvcm1hdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHM9M10gLSBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIGluY2x1ZGUgaW4gdGhlIGZvcm1hdHRlZCBudW1iZXIuIERlZmF1bHRzIHRvIDMuXG4gKiBAcmV0dXJucyB7bnVtYmVyfHVuZGVmaW5lZH0gLSBUaGUgZm9ybWF0dGVkIG51bWJlciwgb3IgdW5kZWZpbmVkIGlmIHRoZSBpbnB1dCB2YWx1ZSBpcyBlbXB0eS5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0TnVtYmVyKHZhbHVlLCBmcmFjdGlvbkRpZ2l0cyA9IDMpIHtcbiAgICBpZiAoaXNFbXB0eURhdGFJdGVtKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQodmFsdWUudG9GaXhlZChmcmFjdGlvbkRpZ2l0cykpO1xufVxuLyoqXG4gKiBGb3JtYXRzIGEgbnVtYmVyIG9yIHN0cmluZyByZXByZXNlbnRpbmcgYSBudW1iZXIgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUsIHBhc3NpbmcgSW50bCBudW1iZXIgZm9ybWF0IG9wdGlvbnNcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlR2xvYmFsX09iamVjdHMvSW50bC9OdW1iZXJGb3JtYXQvTnVtYmVyRm9ybWF0I29wdGlvbnNcbiAqIEBwYXJhbSB7bnVtYmVyIHwgc3RyaW5nIHwgdW5kZWZpbmVkfSB2YWx1ZSB0byBiZSBmb3JtYXR0ZWQgYW5kIGxvY2FsaXplZFxuICogQHBhcmFtIHtJbnRsLk51bWJlckZvcm1hdE9wdGlvbnN9IGZvcm1hdE9wdGlvbnMgb3B0aW9ucyBvYmplY3QgbWF0Y2hpbmcgSW50bC5OdW1iZXJGb3JtYXRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGxvY2FsaXplZCAvIHJvdW5kZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE51bWJlclRvTG9jYWxlKHZhbHVlLCBmb3JtYXRPcHRpb25zKSB7XG4gICAgbGV0IGZvcm1hdHRlZFZhbHVlID0gXCJcIjtcbiAgICBpZiAoIWlzRW1wdHlEYXRhSXRlbSh2YWx1ZSkgJiYgIU51bWJlci5pc05hTih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgbG9jYWxlQ29kZSA9IGdldExvY2FsZUluZm8oKS5sb2NhbGU7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0gSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlQ29kZSwgZm9ybWF0T3B0aW9ucykuZm9ybWF0KE51bWJlcih2YWx1ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWU7XG59XG5cbmV4cG9ydCB7IGZvcm1hdE51bWJlclRvTG9jYWxlIGFzIGEsIGZvcm1hdE51bWJlciBhcyBmLCBpc1ZhbGlkTnVtYmVyIGFzIGksIHBhcnNlTnVtYmVyIGFzIHAsIHNhbml0aXplTnVtYmVyIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzLm1hcCIsImNvbnN0IFVJRGVmYXVsdHMgPSB7XG4gICAgU2NhbGU6IFwic1wiLFxuICAgIFBvcG92ZXJUaW1lcjogNjBcbn07XG5jb25zdCBDYWxjaXRlU2NhbGUgPSB7XG4gICAgczogXCJzXCIsXG4gICAgbTogXCJtXCJcbn07XG5jb25zdCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nID0ge1xuICAgIGFic29sdXRlOiBcImFic29sdXRlXCIsXG4gICAgZml4ZWQ6IFwiZml4ZWRcIlxufTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVNjYWxlIGFzIEMsIFVJRGVmYXVsdHMgYXMgVSwgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyBhcyBhIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVpLXV0aWxzLTkyOGE0MDk2LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==