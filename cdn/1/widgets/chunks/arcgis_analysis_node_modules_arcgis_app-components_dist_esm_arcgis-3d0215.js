/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3d0215.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3d0215"],{6535:(e,t,r)=>{r.r(t),r.d(t,{arcgis_delete_items_recycle_disabled:()=>c,arcgis_delete_items_recycle_enabled:()=>l});var n=r(81149),s=r(42577),i=r(91942);r(88780),r(20164),r(69283),r(49853),r(70464),r(79210);const o=new Map;function a(e){return function(e,t){const r=o.get(e);if(r)return r;const n=(0,s.c)(e,"arcgis-delete-items");return n?(o.set(e,n.store),n.store):null}(e)}const c=class{constructor(e){(0,n.r)(this,e),this.renderRecycle=()=>{const{unprotectedItems:e}=this.buckets;switch(this.mode){case"PROTECTED":case"PROTECTED_UNPROTECTED":return(0,n.h)(n.F,null,(0,n.h)("span",null,this.i18n.cantDelete),e.length>0&&(0,n.h)("span",null,this.i18n.proceed));default:return(0,n.h)("span",null,this.i18n.areYouSure[this.buckets.unprotectedItems.length>1?"multiple":"single"])}},this.buckets=void 0,this.mode=void 0}async componentWillLoad(){this.store=a(this.el),this.i18n=this.store.state.i18n}render(){return(0,n.h)(n.H,null,this.renderRecycle())}get el(){return(0,n.d)(this)}};c.style=":host{display:flex;flex-direction:column;font-size:var(--calcite-font-size--1)}";const l=class{constructor(e){(0,n.r)(this,e),this.arcgisDeleteItemsPermanentlyDeleteOverride=(0,n.c)(this,"arcgisDeleteItemsPermanentlyDeleteOverride",7),this.renderUnrecyclableBucket=()=>{const{i18n:e,items:t,isPermanentlyDeleteBucketDisabled:r}=this,{protectedItems:s,unprotectedItems:i,unrecyclableItems:o}=this.buckets;return(0,n.h)(n.F,null,(0,n.h)("arcgis-items-summary",{icon:"trash",disabled:r},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.permanentlyDelete),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"unrecyclable-bucket",summaryGroups:[{items:o,heading:e.summary.permanentDelete.group.notSupported}]})),(0,n.h)("div",{slot:"description"},e.summary.permanentDelete.notSupported[1===t.length?"single":"multiple"]),(0,n.h)("div",{slot:"link"},(0,n.h)("calcite-link",{"icon-end":"launch",href:"",target:"_blank"},e.learnMore)),!(0===i.length&&0===s.length)&&(0,n.h)("div",{slot:"actions",class:"enabled"},(0,n.h)("calcite-button",{scale:"s",appearance:"outline",onClick:()=>{this.isPermanentlyDeleteBucketDisabled=!r}},r?e.summary.select:e.summary.deselect))),(i.length>0||s.length>0)&&(0,n.h)("hr",{class:"divider"}))},this.renderUnprotectedBucket=()=>{const{i18n:e,items:t}=this,{unprotectedItems:r}=this.buckets;return(0,n.h)("arcgis-items-summary",{icon:"recycle-bin"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.willBeRecycled),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"unprotected-bucket",summaryGroups:[{items:r}]})),(0,n.h)("div",{slot:"description"},e.summary.canBeRecovered[1===t.length?"single":"multiple"].replace("${days}",`${i.D}`)))},this.renderProtectedBucket=()=>{const{i18n:e}=this,{protectedItems:t}=this.buckets;return(0,n.h)("arcgis-items-summary",{icon:"security"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.cannotBeDeleted),(0,n.h)("arcgis-items-summary-bucket",{popoverId:"protected-bucket",summaryGroups:[{items:t,heading:e.summary.protectedGroup.deleteProtected}]})),(0,n.h)("div",{slot:"description"},e.summary.cannotDelete.all))},this.renderPermanentlyDeleteAllOverride=()=>{const{i18n:e}=this,{unprotectedItems:t,unrecyclableItems:r}=this.buckets,s=[...t,...r];return(0,n.h)("div",{class:"override"},(0,n.h)("span",{class:"override__description"},e.deleteOverride[s.length>0?"multiple":"single"]),(0,n.h)("arcgis-items-summary",{icon:"trash"},(0,n.h)("div",{slot:"title"},(0,n.h)("span",null,e.summary.permanentlyDelete),(0,n.h)("arcgis-items-summary-bucket",{label:e.summary.permanentlyDelete,popoverId:"permanently-delete-override-bucket",summaryGroups:[{items:s}]}))))},this.renderMoreOptions=()=>{const{i18n:e,isMoreOptionsExpanded:t,isAllSameDeleteMode:r,buckets:s,items:i,mode:o,primaryAction:a,arcgisDeleteItemsPermanentlyDeleteOverride:c}=this,{unprotectedItems:l,unrecyclableItems:d}=s;return"PROTECTED"===o||"PERMANENTLY_DELETE"===a?null:(0,n.h)("div",{class:"more-options__container"},(0,n.h)("calcite-button",{class:"more-options__button",scale:"s",iconEnd:t?"minus":"plus",appearance:"transparent",onClick:()=>{this.isMoreOptionsExpanded=!t},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(this.isMoreOptionsExpanded=!t)}},t?e.hideOptions:e.moreOptions),t&&(0,n.h)("calcite-button",{kind:"danger",scale:"s",appearance:"transparent",iconStart:"trash",onClick:()=>{this.permanentlyDeleteOverridden=!0,c.emit()}},r?e.deletePermanently:e.summary.deleteXPermanently.replace("${subset}",`${l.length+d.length}`).replace("${total}",`${i.length}`)))},this.buckets=void 0,this.mode=void 0,this.primaryAction=void 0,this.items=void 0,this.permanentlyDeleteOverridden=void 0,this.showSelectedItemsCount=!0,this.isPermanentlyDeleteBucketDisabled=void 0,this.isMoreOptionsExpanded=void 0}async componentWillLoad(){this.store=a(this.el),this.i18n=this.store.state.i18n,this.isAllSameDeleteMode=["PROTECTED","UNPROTECTED","UNRECYCLABLE"].includes(this.mode)}render(){const{i18n:e,items:t,isPermanentlyDeleteBucketDisabled:r,permanentlyDeleteOverridden:s,isAllSameDeleteMode:i,showSelectedItemsCount:o,renderPermanentlyDeleteAllOverride:a,renderUnrecyclableBucket:c,renderUnprotectedBucket:l,renderProtectedBucket:d,renderMoreOptions:u}=this,{protectedItems:m,unprotectedItems:p,unrecyclableItems:h}=this.buckets;return(0,n.h)(n.H,null,s?a():(0,n.h)(n.F,null,o&&!i&&(0,n.h)("span",{class:"selected-items"},`${e.summary.selectedItems} ${t.length-(r?h.length:0)}`),h.length>0&&c(),p.length>0&&l(),m.length>0&&d(),u()))}get el(){return(0,n.d)(this)}};l.style=":host{display:flex;flex-direction:column;font-size:var(--calcite-font-size--1)}.selected-items{margin-bottom:2rem;font-size:var(--calcite-font-size-0)}.divider{margin-left:0px;margin-right:0px;margin-top:1rem;margin-bottom:0px;border-style:none;border-top:1px solid #ccc}.more-options__container{display:flex;flex-direction:column;align-items:flex-start}.more-options__button{margin-top:2rem;margin-bottom:1rem}.override{display:flex;flex-direction:column}.override__description{margin-bottom:1rem}arcgis-items-summary:not(:first-of-type){margin-top:2rem}"},91942:(e,t,r)=>{r.d(t,{D:()=>a,a:()=>o,b:()=>c,c:()=>l,d:()=>i,e:()=>d});var n=r(88780),s=(r(69283),r(49853),r(20164));const i=async(e,t,r=!1)=>{const n=`${t.userContentUrl}/items/${e.id}/delete`;return(0,s.r)(n,{permanentDelete:r},{},"post")},o=async(e,t,r=!1)=>{const n={items:e.map((e=>e.id)).join(","),permanentDelete:r},i=`${t.userContentUrl}/deleteItems`;return(0,s.r)(i,n,{},"post")},a=14,c=async(e,t,r,i=!1)=>{const o=[],a=[],c=[];return await Promise.all(e.map((async l=>{var d;try{const h=await(async(e,t,r)=>{const n=r.sourceJSON.recycleBinEnabled?"/canRecycle":"/canDelete",i=`${t.userContentUrl}/items/${e.id}${n}`;return await(0,s.r)(i)})(l,t,r);if(h.success){const t=await(async(e,t)=>{const{type:r,typeKeywords:s}=e,i=["Scene Service","Map Service","WFS","OGCFeatureServer","Vector Tile Service","3DTiles Service"].includes(r),o=["Map Service","Vector Tile Service"].includes(r);let a,c=i?"Service2Service":e.typeKeywords.includes("Route Layer")?"Service2Route":"Service2Data",l="Service2Service"===c||"Service2Route"===c?"reverse":"forward";s.indexOf("Bulk Published Service")>-1&&(c="DataStore2BPService",l="reverse");try{const r=await(0,n.g)(e.id,t,{relationshipType:c,direction:l});if(a=(null==r?void 0:r.total)?r.relatedItems.shift():null,i){if(o&&!(e=>e&&e.typeKeywords.includes("View Service")||!1)(a)||!a){const r=await(0,n.g)(e.id,t,{relationshipType:"Service2Data",direction:"forward"});return(null==r?void 0:r.total)?r.relatedItems.shift():a}return a}return a}catch(e){console.error(e)}})(l,r),s=await(async(e,t)=>{const{type:r}=e,s=n.i?"Service2Service":"Service2Data",i="Service2Service"===s&&"Feed"!==r?"forward":"reverse",o=await(0,n.g)(e.id,t,{relationshipType:s,direction:i});return o.total>0&&o.relatedItems})(l,r),c=await(async(e,t,r)=>{const{typeKeywords:s,type:i}=e;return!t&&(null==r?void 0:r.length)&&!(0,n.i)(s,i)})(l,t,s),h=!(c||!s||m(l,s)||p(l,s)),y=null!==(d=i&&1===e.length&&c&&{item:l,error:{message:"Delete discouraged"}})&&void 0!==d?d:null;y?a.push(y):c&&!u(e,s)?o.push({item:l,error:{message:"Delete discouraged"}}):h&&!u(e,s)?o.push({item:l,error:{messageCode:"CONT_00481",offendingItems:s}}):a.push({item:l})}else l.protected?o.push({item:l,error:{messageCode:"CONT_0048"}}):c.push({item:l})}catch(t){const r=Object.assign({},t);switch(t.messageCode){case"CONT_00481":{const{offendingItems:n}=t;u(e,n)?a.push({item:l}):o.push({item:l,error:r});break}case"CONT_0048":default:o.push({item:l,error:r});break;case"CONT_0298":c.push({item:l})}}}))),Promise.resolve({protectedItems:o,unprotectedItems:a,unrecyclableItems:c})},l=e=>{const{protectedItems:t,unrecyclableItems:r,unprotectedItems:n}=e,s=[];return t.length>0&&s.push("PROTECTED"),r.length>0&&s.push("UNRECYCLABLE"),n.length>0&&s.push("UNPROTECTED"),s.join("_")},d=e=>{let t="DELETE";switch(e){case"PROTECTED":t="NONE";break;case"UNRECYCLABLE":case"PROTECTED_UNRECYCLABLE":t="PERMANENTLY_DELETE"}return t},u=(e,t)=>{var r;const n=null!==(r=null==t?void 0:t.map((e=>{var t;return null!==(t=e.itemId)&&void 0!==t?t:e.id})))&&void 0!==r?r:[],s=e.filter((e=>n.includes(e.id))),i=n.every((t=>e.some((e=>e.id===t)))),o=s.every((e=>!e.protected));return i&&o},m=(e,t)=>{const{typeKeywords:r,type:s}=e;return"Feed"===e.type&&(0,n.i)(r,s)&&1===(null==t?void 0:t.length)&&"Feature Service"===t[0].type&&t[0].typeKeywords.includes("Hosted Service")},p=(e,t)=>{const{typeKeywords:r,type:s}=e;return"Feature Service"===e.type&&(0,n.i)(r,s)&&1===(null==t?void 0:t.length)&&"Feed"===t[0].type&&t[0].typeKeywords.includes("Hosted Service")}},69283:(e,t,r)=>{r.d(t,{a:()=>n,c:()=>i,e:()=>o,g:()=>s,l:()=>a});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var o=i((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function s(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||s(e)?function(e){void 0===e&&(e=r);var t=i(e),o=s(e);if(o!==n&&3===o.major){var a=o.minor<=10?"js/":"";return"".concat(t).concat(a,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function a(e,t){var r=o(e),n=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(r);return n||function(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}(n=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(r),t),n}var c={};function l(e,t,r){var n;r&&(n=function(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}(e,r));var s=function(){t(e),e.removeEventListener("load",s,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",s,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var r={};[c,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var n=r.version,s=r.url||i(n);return new t.Promise((function(e,t){var i=d();if(i){var o=i.getAttribute("src");o!==s?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):u()?e(i):l(i,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var c=r.css;c&&a(!0===c?n:c,r.insertCssBefore),l(i=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(s),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),t),document.body.appendChild(i)}}))}function p(e){return new t.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return p(e);var r=d(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),m(t).then((function(){return p(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=m,e.setDefaultOptions=function(e){void 0===e&&(e={}),c=e},e.loadCss=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const a=async(e,t)=>(await o.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},88780:(e,t,r)=>{r.d(t,{a:()=>o,g:()=>a,i:()=>c,r:()=>i});var n=r(20164),s=r(49853);const i=async(e,t,r={})=>{const{body:i,usePost:o,addTokenManually:a,api:c=(null===s.c||void 0===s.c?void 0:s.c.api),customToken:l}=r,d=new URLSearchParams;i&&Object.entries(i).forEach((([e,t])=>{void 0!==t&&d.append(e,t)}));const u=new URL(e);if(u.searchParams.append("f","json"),l)u.searchParams.append("token",l);else{const e=!1===a?null:await(0,n.h)(t,c);e&&u.searchParams.append("token",e)}const m=await fetch(u.toString(),{body:o?d:void 0,method:o?"POST":"GET"}),p=await m.json(),h=p.error;if(h)throw"string"==typeof h?new Error(h):h;return p},o=async(e,t)=>{var r;try{return{result:await i(e,t,{addTokenManually:!1})}}catch(e){const t="token required";return(null===(r=null==e?void 0:e.message)||void 0===r?void 0:r.toLowerCase().includes(t))?{error:{code:"tokenRequired"}}:(console.error(e),{error:{code:"unhandledError"}})}};async function a(e,t,{relationshipType:r,direction:s}){const i=`${(0,n.g)(t)}content/items/${e}/relatedItems`;return await(0,n.r)(i,{relationshipType:r,direction:s})}const c=(e,t)=>"Feature Service"===t&&e.includes("Hosted Service")}}]);