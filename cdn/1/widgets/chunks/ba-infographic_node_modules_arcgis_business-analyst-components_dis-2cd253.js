"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-2cd253"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ba-accordion_4.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ba-accordion_4.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ba_accordion: () => (/* binding */ BaAccordion),
/* harmony export */   calcite_dropdown: () => (/* binding */ Dropdown),
/* harmony export */   calcite_dropdown_group: () => (/* binding */ DropdownGroup),
/* harmony export */   calcite_dropdown_item: () => (/* binding */ DropdownItem)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ElementIds-f7d257e8.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/ElementIds-f7d257e8.js");
/* harmony import */ var _dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./dom-1997bfaf.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-1997bfaf.js");
/* harmony import */ var _floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./floating-ui-0f98fc53.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/floating-ui-0f98fc53.js");
/* harmony import */ var _guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guid-88a3729f.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/guid-88a3729f.js");
/* harmony import */ var _interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./interactive-29995522.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js");
/* harmony import */ var _key_b75491c4_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./key-b75491c4.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js");
/* harmony import */ var _observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observers-56740e99.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js");
/* harmony import */ var _openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openCloseComponent-7d58834c.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/openCloseComponent-7d58834c.js");
/* harmony import */ var _loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./loadable-cc14d728.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js");














const baAccordionCss = "calcite-list-item{margin-block-end:unset !important;--tw-shadow:unset !important;--tw-shadow-colored:unset !important;box-shadow:unset !important}";

const BaAccordion = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.accordionOpened = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionOpened", 7);
    this.accordionWillOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionWillOpen", 7);
    this.accordionItemClicked = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionItemClicked", 7);
    this.accordionItemsChecked = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "accordionItemsChecked", 7);
    this.defaultReportSelected = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "defaultReportSelected", 7);
    // debug data
    this.debugContent = [];
    this.ignoreClick = 0;
    this._idPrefix = 'ba-accordion-';
    this._idItemPrefix = 'ba-item-';
    this._idIconPrefix = 'ba-accordion-icon-';
    this._idContentPrefix = 'ba-content-';
    this._isReport = false;
    this._dbg = false;
    /* Props */
    // @Prop() checkboxAlignRight: boolean = false;  // shows checkboxes on the right side of each item
    this.hideOnEmpty = 'true'; // hides accordion when empty
    this.displayCount = true; // shows a count of accordion content items
    this.contentInline = 'true'; // displays accordion content inline or absolute positioned over other elements
    this.stSourceCountry = 'US';
    this.stShowDefault = false;
    this.toggleCheckState = (data, id) => {
      if (data && data.length > 0 && id) {
        for (let i = 0; i < data.length; i++) {
          if (data[i].id === id) {
            const checked = data[i].isChecked;
            data[i].isChecked = !checked;
            return !checked;
          }
        }
      }
      return false;
    };
    this.onCheckAllChanged = (ev) => {
      const self = this;
      const elemChecked = ev.srcElement?.checked;
      const checkState = !elemChecked;
      const _delay = function () {
        self.notifyCheckedItems(checkState);
      };
      setTimeout(_delay, 0);
    };
    this.langCode = 'en-us';
    this.sourceCountry = 'US';
  }
  /* Watches */
  onSourceCountryChanged() {
    this.stSourceCountry = this.sourceCountry;
  }
  onshowDefaultChanged() {
    this.stShowDefault = this.showDefault == 'true';
  }
  onDefaultReportChanged() {
    this.stDefaultReportId = this.defaultReportId;
  }
  onSugliteChanged() {
    this.stSuglite = false;
    if (typeof this.suglite !== undefined && (this.suglite === 'true')) {
      this.stSuglite = true;
    }
  }
  onContentChanged() {
    try {
      if (this.content && _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(this.content))
        this.stContent = JSON.parse(this.content);
    }
    catch (ex) {
      _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Error('ba-accordion content error', ex);
    }
  }
  onAccordionTextChanged() {
    this.stDisplayName = this.displayname;
  }
  onSelectedIdChanged() {
    this.stSelectedId = this.selectedId;
  }
  onGroupIdChanged() {
    this.stGroupId = this.groupid;
  }
  onContentInlineChanged() {
    this.stContentInline = (this.contentInline == 'true');
  }
  accordionCheckboxChanged() {
    this.stShowCheckboxes = this.showCheckboxes;
  }
  // Update the Infographic Report when the arcgis-report-list changes
  accordionOpenedEventHandler(event) {
    let groupId = event.detail.groupid;
    let emitId = event.detail.instanceId;
    if (emitId != null && emitId != this._instanceId) {
      if (groupId != null) {
        if (!this.stGroupId && this.groupid)
          this.stGroupId = this.groupid;
        if (this.stGroupId && this.stGroupId == groupId) {
          // received a signal that another accordion just opened,
          // that means we should close this one.
          this.closeAccordion(null);
        }
      }
    }
  }
  // @Method()
  async openAccordion() {
  }
  // @Method()
  async setSelectedId(id) {
    this.selectedId = id;
    this.stSelectedId = id;
  }
  // @Method()
  async setShowCheckbox(flag) {
    this.stShowCheckboxes = flag;
  }
  // @Method()
  async setShowDefault(flag, defaultId) {
    this.stShowDefault = flag;
    this.stDefaultReportId = defaultId;
  }
  async setColorTheme(name) {
    if (name && _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(name) && this.el) {
      this.stColorTheme = name.trim().toLowerCase();
      const n = name.trim().toLowerCase();
      if (n === 'light') {
        this.el.style.setProperty('--calcite-ui-brand', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#00619b');
        this.el.style.setProperty('--calcite-ui-brand-press', '#004874');
        this.el.style.setProperty('--calcite-ui-background', '#f8f8f8');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#f3f3f3');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#eaeaea');
        this.el.style.setProperty('--calcite-ui-text-1', '#151515');
        this.el.style.setProperty('--calcite-ui-text-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-text-3', '#6a6a6a');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-link', '#00619b');
        this.el.style.setProperty('--calcite-ui-border-1', '#cacaca');
        this.el.style.setProperty('--calcite-ui-border-2', '#d4d4d4');
        this.el.style.setProperty('--calcite-ui-border-3', '#dfdfdf');
        this.el.style.setProperty('--calcite-ui-border-input', '#949494');
        this.el.style.setProperty('--calcite-ui-info', '#00619b');
        this.el.style.setProperty('--calcite-ui-success', '#35ac46');
      }
      else if (n === 'dark') {
        this.el.style.setProperty('--calcite-ui-brand', '#009af2');
        this.el.style.setProperty('--calcite-ui-brand-hover', '#007ac2');
        this.el.style.setProperty('--calcite-ui-brand-press', '#00619b');
        this.el.style.setProperty('--calcite-ui-background', '#353535');
        this.el.style.setProperty('--calcite-ui-foreground-1', '#2b2b2b');
        this.el.style.setProperty('--calcite-ui-foreground-2', '#202020');
        this.el.style.setProperty('--calcite-ui-foreground-3', '#151515');
        this.el.style.setProperty('--calcite-ui-text-1', '#ffffff');
        this.el.style.setProperty('--calcite-ui-text-2', '#bfbfbf');
        this.el.style.setProperty('--calcite-ui-text-3', '#9f9f9f');
        this.el.style.setProperty('--calcite-ui-text-inverse', '#151515');
        this.el.style.setProperty('--calcite-ui-text-link', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-border-1', '#555555');
        this.el.style.setProperty('--calcite-ui-border-2', '#4a4a4a');
        this.el.style.setProperty('--calcite-ui-border-3', '#404040');
        this.el.style.setProperty('--calcite-ui-border-input', '#757575');
        this.el.style.setProperty('--calcite-ui-info', '#00a0ff');
        this.el.style.setProperty('--calcite-ui-success', '#36da43');
      }
    }
  }
  componentWillLoad() {
    _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Log('ACCORDION: will load');
    this.stLangCode = this.langCode;
    this.stSourceCountry = this.sourceCountry;
    this.stShowCheckboxes = this.showCheckboxes;
    this.stShowDefault = this.showDefault == 'true';
    this.stDefaultReportId = this.defaultReportId;
    if (!this._instanceId)
      this._instanceId = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idPrefix).id;
    if (!this._instanceContentId)
      this._instanceContentId = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idContentPrefix).id;
    if (!this._instanceIconId)
      this._instanceIconId = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.E.generateId(this._idIconPrefix).id;
    this.stSuglite = false;
    if (typeof this.suglite !== undefined && (this.suglite === 'true')) {
      this.stSuglite = true;
    }
    // const self = this;
    if (!this.stDisplayName || this.stDisplayName.length <= 0) {
      if (this.displayname && this.displayname.length > 0)
        this.stDisplayName = this.displayname;
      else {
        this.stDisplayName = '?';
      }
    }
    if (!this.stGroupId && this.groupid)
      this.stGroupId = this.groupid;
    if (!this.stContentInline && this.contentInline)
      this.stContentInline = (this.contentInline == 'true');
    if (!this.stContent && this.content && _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(this.content)) {
      try {
        this.stContent = JSON.parse(this.content);
      }
      catch (error) {
        this.stContent = {};
      }
    }
    this.stSelectedId = this.selectedId;
  }
  componentDidLoad() {
    const self = this;
    if (this.el) {
      this.el.addEventListener('click', (ev) => {
        self.onClickAccordion.call(self, ev);
      });
    }
    self.applyStyles();
    // const makeDefs = ACLUtils.queryElementAll.call(this, 'calcite-list-item.ba-report-item')
    // if (makeDefs) {
    //   for (let ii = 0; ii < makeDefs.length; ii++) {
    //     const icon = makeDefs[ii]
    //     icon.addEventListener('click', (ev) => {
    //       self.onClickListItemAction.call(self, ev)
    //     })
    //   }
    // }
  }
  componentDidRender() {
    const self = this;
    setTimeout(() => {
      self.applyStyles();
    }, 10);
  }
  applyStyles() {
    _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Log('ACCORDION applyStyles');
    // styling in case we are showing checkboxes
    if (this.stShowCheckboxes) {
      // apply size to calcite-checkbox div inside the shadow dom
      const calciteAcc = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(this, 'calcite-accordion');
      if (calciteAcc) {
        const calciteAccItem = calciteAcc.querySelector('calcite-accordion-item');
        if (calciteAccItem) {
          const aiShadow = calciteAccItem.shadowRoot;
          if (aiShadow) {
            // adjust accordion main label
            const headerContent = aiShadow.querySelector('div.header-content');
            if (headerContent) {
              headerContent.style.position = 'relative';
              headerContent.style.top = '2px';
              headerContent.style.left = '1px';
              headerContent.style.padding = '8px 12px 10px 12px';
            }
          }
          // adjust accordion main checkbox
          const check = calciteAccItem.querySelector('calcite-checkbox');
          if (check) {
            const boxDiv = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(check, 'div.toggle');
            if (boxDiv) {
              boxDiv.style.position = 'relative';
              boxDiv.style.left = '-3px';
              boxDiv.style.width = '16px';
              boxDiv.style.height = '14px';
              boxDiv.style.border = 'solid 1px var(--calcite-ui-border-2)';
            }
          }
          // for all list items
          const list = calciteAcc.querySelector('calcite-list');
          if (list) {
            const listItems = list.querySelectorAll('calcite-list-item');
            if (listItems && listItems.length > 0) {
              for (let ii = 0; ii < listItems.length; ii++) {
                const item = listItems[ii];
                // accordion label
                const labelElem = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(item, 'div.label');
                if (labelElem) {
                  labelElem.style.position = 'relative';
                  labelElem.style.left = '1px';
                  labelElem.style.padding = '0';
                }
                // accordion list item checkbox
                const check = item.querySelector('calcite-checkbox');
                if (check) {
                  const boxDiv = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(check, 'div.toggle');
                  if (boxDiv) {
                    boxDiv.style.position = 'relative';
                    boxDiv.style.left = '5px';
                    boxDiv.style.width = '15px';
                    boxDiv.style.height = '13px';
                    boxDiv.style.border = 'solid 1px var(--calcite-ui-border-2)';
                  }
                }
              }
            }
          }
          const divActionStart = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElement.call(calciteAccItem, 'div.actions-start');
          if (divActionStart) {
            divActionStart.style.width = '24px';
          }
        }
      }
    }
  }
  onCheckboxChanged(id) {
    _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Log('ACCORDION: onCheckboxChanged');
    const reportId = id;
    const isChecked = this.toggleCheckState(this.stContent, reportId);
    this.notifyCheckedItems(isChecked, reportId);
    this.updateCheckboxes();
    return false;
  }
  /*
   * closeAccordion
   *
   *    context - internal use only, set to null otherwise
   */
  closeAccordion(context) {
    let accordion = context ? context.elem : _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceId);
    let content = context ? context.content : _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    let icon = context ? context.icon : _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceIconId);
    accordion.classList.remove('accordion__active');
    content.style.maxHeight = null;
    icon.setAttribute('icon-end', 'caret-down');
    // hide content to prevent tab actions
    this.hideContent(content);
  }
  // shows the accordion content div containing all the row items
  showContent(content) {
    if (!content)
      content = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    if (content.classList.contains('ba-content-hidden')) {
      content.classList.remove('ba-content-hidden');
    }
  }
  hideContent(content) {
    if (!content)
      content = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    if (!content.classList.contains('ba-content-hidden')) {
      content.classList.add('ba-content-hidden');
    }
  }
  onClickAccordionItem(e, context, data) {
    if (!data.usesCheckbox) {
      // data = { id:<reportid>, name:<reportName> }
      this.accordionItemClicked.emit({ context: context, item: data });
    }
    e.stopPropagation();
    e.preventDefault();
    return false;
  }
  onClickMakeDefaultAction(ev, reportId) {
    const name = this._getContentItem(reportId).name;
    const isDefault = reportId == this.stDefaultReportId;
    if (isDefault) {
      this.stDefaultReportId = '';
    }
    else {
      // notify listeners of default change
      this.stDefaultReportId = reportId;
      this.defaultReportSelected.emit({ reportId: reportId, name: name });
    }
    // close the menu popover
    const popoverId = reportId + '-pop';
    const popoverElem = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.fixId(popoverId));
    if (popoverElem) {
      popoverElem.setAttribute('open', 'false');
    }
  }
  onClickAccordion(ev) {
    if (ev.target.classList.contains('ba-target-check'))
      return false;
    if (this.ignoreClick > 0) {
      this.ignoreClick--;
      return false;
    }
    // const acc = ACLUtils.queryElementById.call (this, this._instanceId)
    const acc = ev.currentTarget;
    const content = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceContentId);
    const icon = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceIconId);
    if (content) {
      if (content.style.maxHeight) {
        // accordion is currently open
        this.closeAccordion({ elem: acc, content: content, icon: icon });
      }
      else {
        // accordion is closed - open it
        acc.classList.add('accordion__active');
        content.style.maxHeight = '100%'; //content.scrollHeight + 'px';
        // icon.innerText = '-';
        icon.setAttribute('icon-end', 'caret-up');
        this.showContent(content);
        // notify other accordions in our group that this accordion just opened
        this.accordionOpened.emit({ accordion: this, groupid: this.stGroupId, instanceId: this._instanceId });
        function _afterAnimation() {
          content.style.overflow = 'auto';
        }
        setTimeout(_afterAnimation, 500);
      }
    }
    return true;
  }
  _getContent() {
    // Note: stContent is an object, content is a string
    if (!this.stContent) {
      if (this.content) {
        this.stContent = JSON.parse(this.content);
      }
      else {
        if (!this.showDebug) {
          let accElem = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.queryElementById.call(this, this._instanceId);
          if (accElem) {
            let c = accElem.getAttribute('content');
            if (c && c.length > 0) {
              this.content = c;
              this.stContent = JSON.parse(this.content);
            }
          }
        }
      }
    }
    return this.stContent;
  }
  _getContentItem(id) {
    for (let ii = 0; ii < this.stContent.length; ii++) {
      let item = this.stContent[ii];
      if (item.id == id) {
        return item;
      }
    }
    return null;
  }
  _setContentItem(id, prop, val) {
    for (let ii = 0; ii < this.stContent.length; ii++) {
      let item = this.stContent.stContenttent[ii];
      if (item.id == id) {
        this.stContent[ii][prop] = val;
        break;
      }
    }
  }
  _toggleContentItem(id, prop) {
    let item = this._getContentItem(id);
    if (item) {
      const newValue = item[prop] ? false : true;
      this._setContentItem(id, prop, newValue);
    }
  }
  updateCheckboxes() {
    this.stTimestamp = new Date().getTime();
  }
  // emits notification when any/all checkbox changes
  //   list = array of reportIds to set, or (null or empty) to set all
  //   newState = new forced state to notify
  //
  notifyCheckedItems(newState, id) {
    const applyToAll = (!id || !_ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(id));
    const checkboxes = this.el.shadowRoot?.querySelectorAll('calcite-checkbox[data-group]');
    if (checkboxes) {
      const reports = [];
      for (let ii = 0; ii < checkboxes.length; ii++) {
        const box = checkboxes[ii];
        let flag = box.checked;
        const reportId = box.getAttribute('guid');
        if (reportId && _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.A.hasText(reportId)) {
          if (applyToAll || id == reportId) {
            flag = newState;
          }
          const report = { id: reportId, isChecked: flag };
          reports.push(report);
        }
      }
      if (reports.length > 0) {
        // Notify other components
        this.accordionItemsChecked.emit({ accordion: this, reports: reports });
      }
    }
  }
  renderMakeDefaultUI(reportId) {
    const actionStyle = {
      'padding': '4px',
      'position': 'relative',
      'left': '12px'
    };
    // const listItemStyle = {
    //   'min-width': '160px',
    //   'display': 'flex'
    // }
    // const listItemIconStyle = {
    //   'display': 'flex',
    //   'flex': '0 0 auto',
    //   'width': '28px',
    //   'height': '28px',
    //   'transform': 'scale(0.7)'
    // }
    // const listItemTextStyle = {
    //   'display': 'flex',
    //   'flex': '1 1 auto',
    //   'justify-content': 'left',
    //   'text-align': 'left',
    //   'align-items': 'center',
    //   'padding-right': '5px',
    //   'max-width': '200px',
    //   'cursor': 'pointer'
    // }
    // const popoverListItemStyle = {
    //   'display': 'flex',
    //   'align-items': 'center'
    // }
    // Only renders the ellipsis and popup menu if 'showDefault' is true
    if (this.stShowDefault) {
      const makeDefText = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('make-default');
      const removeDefText = _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.B.i18n('remove-default');
      const actionId = reportId + '-action';
      const popoverId = reportId + '-pop';
      const isDefault = reportId == this.stDefaultReportId;
      const popoverIconName = (isDefault) ? 'x' : 'check';
      const defText = (isDefault) ? removeDefText : makeDefText;
      const popoverActionId = reportId + '-popitem';
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { slot: "actions-end", style: actionStyle }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { id: actionId, icon: "ellipsis", "aria-expanded": "true", alignment: "center", appearance: "transparent", scale: "s" }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { id: popoverId, "aria-hidden": "false", "aria-live": "polite", role: "dialog", "auto-close": "", "pointer-disabled": "", "offset-distance": "6", "offset-skidding": "0", "overlay-positioning": "fixed", placement: "left-end", scale: "m", "data-placement": "right-start", "reference-element": actionId, open: "" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { id: popoverActionId, text: defText, icon: popoverIconName, onClick: (e) => this.onClickMakeDefaultAction(e, reportId), "text-enabled": "true" }))));
    }
    else {
      return ('');
    }
  }
  getAccordion() {
    try {
      const self = this;
      let content = self._getContent();
      _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Log('getAccordion', content, self.stShowDefault);
      const sName = self.stDisplayName;
      const iconName = self.calciteicon || '';
      const listItemTextUnderlined = {
        'text-decoration': 'underline'
      };
      if (self.stShowCheckboxes) {
        let anyChecked = [];
        if (self.stContent?.length > 0) {
          anyChecked = self.stContent.some((obj) => obj.isChecked);
        }
        const mainCheckStyle = {
          'margin': '-2px -4px 0px 5px',
          'width': '16px',
          'height': '16px',
          'position': 'relative',
          'left': '5px',
          'top': '2px'
        };
        const listCheckStyle = {
          'margin': '-4px 0px 0px -4px',
          'width': '15px',
          'height': '13px'
        };
        return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { appearance: "solid", "icon-position": "end" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion-item", { scale: "s", heading: sName }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { slot: "actions-start", style: mainCheckStyle, name: 'Select All', value: "all", checked: anyChecked, onClick: self.onCheckAllChanged }), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list", null, content
          ? content.map(({ id, name, subText }) => {
            const accListItemId = id + '-acc-item';
            const isDefault = id == this.stDefaultReportId;
            const defStyle = (isDefault) ? listItemTextUnderlined : '';
            return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list-item", { id: accListItemId, label: name, data: id, description: subText || '', style: defStyle }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { style: listCheckStyle, name: name, "data-group": self.reportsGroupId, value: id, id: id, slot: "actions-start", checked: self.stContent && self.stContent.some((obj) => obj.id === id && obj.isChecked), onClick: (e) => self.onCheckboxChanged(e.target.value) }), self.renderMakeDefaultUI(id)));
          })
          : ''))));
      }
      else {
        return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion", { appearance: "solid", "icon-position": "end" }, content ?
          (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-accordion-item", { "icon-start": iconName, scale: "s", heading: sName, expanded: content.some((obj) => obj['id'] === self.stSelectedId) ? true : false }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree", null, content
            ? content.map(({ id, name }) => ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tree-item", { style: {
                padding: '8px 0',
                whiteSpace: 'wrap',
                overflowX: 'hidden',
                lineHeight: '1.25rem',
              }, data: id, label: name, selected: id === self.stSelectedId ? true : false, onclick: (e) => self.onClickAccordionItem(e, self, { id: id, name: name }) }, name, self.renderMakeDefaultUI(id))))
            : ''))
          : ''));
      }
    }
    catch (error) {
      _ElementIds_f7d257e8_js__WEBPACK_IMPORTED_MODULE_1__.a.Error('ba-accordion', error);
    }
  }
  render() {
    const self = this;
    let content = self._getContent();
    if (!content) {
      return;
    }
    this._isReport = self.el.classList.contains('reportList');
    return (this.getAccordion());
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "sourceCountry": ["onSourceCountryChanged"],
    "showDefault": ["onshowDefaultChanged"],
    "defaultReportId": ["onDefaultReportChanged"],
    "suglite": ["onSugliteChanged"],
    "content": ["onContentChanged"],
    "displayname": ["onAccordionTextChanged"],
    "selectedId": ["onSelectedIdChanged"],
    "groupid": ["onGroupIdChanged"],
    "contentInline": ["onContentInlineChanged"],
    "showCheckboxes": ["accordionCheckboxChanged"]
  }; }
};
BaAccordion.style = baAccordionCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const SLOTS = {
  dropdownTrigger: "trigger"
};

const dropdownCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-flex;flex:0 1 auto}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;flex:1 1 auto}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width=s]){--calcite-dropdown-width:12rem}:host([width=m]){--calcite-dropdown-width:14rem}:host([width=l]){--calcite-dropdown-width:16rem}";

const Dropdown = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteDropdownSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownSelect", 6);
    this.calciteDropdownBeforeClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownBeforeClose", 6);
    this.calciteDropdownClose = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownClose", 6);
    this.calciteDropdownBeforeOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownBeforeOpen", 6);
    this.calciteDropdownOpen = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownOpen", 6);
    this.items = [];
    this.groups = [];
    this.mutationObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__.c)("mutation", () => this.updateItems());
    this.resizeObserver = (0,_observers_56740e99_js__WEBPACK_IMPORTED_MODULE_2__.c)("resize", (entries) => this.resizeObserverCallback(entries));
    this.openTransitionProp = "opacity";
    this.guid = `calcite-dropdown-${(0,_guid_88a3729f_js__WEBPACK_IMPORTED_MODULE_3__.g)()}`;
    this.defaultAssignedElements = [];
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    this.slotChangeHandler = (event) => {
      this.defaultAssignedElements = event.target.assignedElements({
        flatten: true
      });
      this.updateItems();
    };
    this.setFilteredPlacements = () => {
      const { el, flipPlacements } = this;
      this.filteredFlipPlacements = flipPlacements
        ? (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.f)(flipPlacements, el)
        : null;
    };
    this.updateTriggers = (event) => {
      this.triggers = event.target.assignedElements({
        flatten: true
      });
      this.reposition(true);
    };
    this.updateItems = () => {
      this.items = this.groups
        .map((group) => Array.from(group?.querySelectorAll("calcite-dropdown-item")))
        .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
      this.updateSelectedItems();
      this.reposition(true);
    };
    this.updateGroups = (event) => {
      const groups = event.target
        .assignedElements({ flatten: true })
        .filter((el) => el?.matches("calcite-dropdown-group"));
      this.groups = groups;
      this.updateItems();
    };
    this.resizeObserverCallback = (entries) => {
      entries.forEach((entry) => {
        const { target } = entry;
        if (target === this.referenceEl) {
          this.setDropdownWidth();
        }
        else if (target === this.scrollerEl) {
          this.setMaxScrollerHeight();
        }
      });
    };
    this.setDropdownWidth = () => {
      const { referenceEl, scrollerEl } = this;
      const referenceElWidth = referenceEl?.clientWidth;
      if (!referenceElWidth || !scrollerEl) {
        return;
      }
      scrollerEl.style.minWidth = `${referenceElWidth}px`;
    };
    this.setMaxScrollerHeight = () => {
      const { scrollerEl } = this;
      if (!scrollerEl) {
        return;
      }
      this.reposition(true);
      const maxScrollerHeight = this.getMaxScrollerHeight();
      scrollerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : "";
      this.reposition(true);
    };
    this.setScrollerAndTransitionEl = (el) => {
      this.resizeObserver.observe(el);
      this.scrollerEl = el;
      this.transitionEl = el;
      (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    };
    this.setReferenceEl = (el) => {
      this.referenceEl = el;
      (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.c)(this, this.referenceEl, this.floatingEl);
      this.resizeObserver.observe(el);
    };
    this.setFloatingEl = (el) => {
      this.floatingEl = el;
      (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.c)(this, this.referenceEl, this.floatingEl);
    };
    this.keyDownHandler = (event) => {
      const target = event.target;
      if (target !== this.referenceEl) {
        return;
      }
      const { defaultPrevented, key } = event;
      if (defaultPrevented) {
        return;
      }
      if (this.open) {
        if (key === "Escape") {
          this.closeCalciteDropdown();
          event.preventDefault();
          return;
        }
        else if (event.shiftKey && key === "Tab") {
          this.closeCalciteDropdown();
          event.preventDefault();
          return;
        }
      }
      if ((0,_key_b75491c4_js__WEBPACK_IMPORTED_MODULE_6__.i)(key)) {
        this.openCalciteDropdown();
        event.preventDefault();
      }
      else if (key === "Escape") {
        this.closeCalciteDropdown();
        event.preventDefault();
      }
    };
    this.focusOnFirstActiveOrFirstItem = () => {
      this.getFocusableElement(this.items.find((item) => item.selected) || this.items[0]);
    };
    this.toggleOpenEnd = () => {
      this.focusOnFirstActiveOrFirstItem();
      this.el.removeEventListener("calciteDropdownOpen", this.toggleOpenEnd);
    };
    this.openCalciteDropdown = () => {
      this.open = !this.open;
      if (this.open) {
        this.el.addEventListener("calciteDropdownOpen", this.toggleOpenEnd);
      }
    };
    this.open = false;
    this.closeOnSelectDisabled = false;
    this.disabled = false;
    this.flipPlacements = undefined;
    this.maxItems = 0;
    this.overlayPositioning = "absolute";
    this.placement = _floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.d;
    this.scale = "m";
    this.selectedItems = [];
    this.type = "click";
    this.width = undefined;
  }
  openHandler(value) {
    if (!this.disabled) {
      if (value) {
        this.reposition(true);
      }
      else {
        (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.u)(this.floatingEl);
      }
      return;
    }
    if (!value) {
      (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.u)(this.floatingEl);
    }
    this.open = false;
  }
  handleDisabledChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  flipPlacementsHandler() {
    this.setFilteredPlacements();
    this.reposition(true);
  }
  maxItemsHandler() {
    this.setMaxScrollerHeight();
  }
  overlayPositioningHandler() {
    this.reposition(true);
  }
  placementHandler() {
    this.reposition(true);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
    this.setFilteredPlacements();
    this.reposition(true);
    if (this.open) {
      this.openHandler(this.open);
    }
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
  }
  componentDidLoad() {
    this.reposition(true);
  }
  componentDidRender() {
    (0,_interactive_29995522_js__WEBPACK_IMPORTED_MODULE_7__.u)(this);
  }
  disconnectedCallback() {
    this.mutationObserver?.disconnect();
    (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.a)(this, this.referenceEl, this.floatingEl);
    this.resizeObserver?.disconnect();
    (0,_openCloseComponent_7d58834c_js__WEBPACK_IMPORTED_MODULE_5__.d)(this);
  }
  render() {
    const { open, guid } = this;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "calcite-trigger-container", id: `${guid}-menubutton`, onClick: this.openCalciteDropdown, onKeyDown: this.keyDownHandler, ref: this.setReferenceEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { "aria-controls": `${guid}-menu`, "aria-expanded": (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.t)(open), "aria-haspopup": "menu", name: SLOTS.dropdownTrigger, onSlotchange: this.updateTriggers })), (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-hidden": (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.t)(!open), class: "calcite-dropdown-wrapper", ref: this.setFloatingEl }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-labelledby": `${guid}-menubutton`, class: {
        ["calcite-dropdown-content"]: true,
        [_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.F.animation]: true,
        [_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.F.animationActive]: open
      }, id: `${guid}-menu`, ref: this.setScrollerAndTransitionEl, role: "menu" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.updateGroups })))));
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;
    return (0,_floating_ui_0f98fc53_js__WEBPACK_IMPORTED_MODULE_4__.r)(this, {
      floatingEl,
      referenceEl,
      overlayPositioning,
      placement,
      flipPlacements: filteredFlipPlacements,
      type: "menu"
    }, delayed);
  }
  closeCalciteDropdownOnClick(event) {
    if (!(0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.i)(event) || !this.open || event.composedPath().includes(this.el)) {
      return;
    }
    this.closeCalciteDropdown(false);
  }
  closeCalciteDropdownOnEvent(event) {
    this.closeCalciteDropdown();
    event.stopPropagation();
  }
  closeCalciteDropdownOnOpenEvent(event) {
    if (event.composedPath().includes(this.el)) {
      return;
    }
    this.open = false;
  }
  mouseEnterHandler() {
    if (this.type === "hover") {
      this.openCalciteDropdown();
    }
  }
  mouseLeaveHandler() {
    if (this.type === "hover") {
      this.closeCalciteDropdown();
    }
  }
  calciteInternalDropdownItemKeyEvent(event) {
    const { keyboardEvent } = event.detail;
    const target = keyboardEvent.target;
    switch (keyboardEvent.key) {
      case "Tab":
        if (this.items.indexOf(target) === this.items.length - 1 && !keyboardEvent.shiftKey) {
          this.closeCalciteDropdown();
        }
        else if (this.items.indexOf(target) === 0 && keyboardEvent.shiftKey) {
          this.closeCalciteDropdown();
        }
        break;
      case "ArrowDown":
        (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "next");
        break;
      case "ArrowUp":
        (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "previous");
        break;
      case "Home":
        (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "first");
        break;
      case "End":
        (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.p)(this.items, target, "last");
        break;
    }
    event.stopPropagation();
  }
  handleItemSelect(event) {
    this.updateSelectedItems();
    event.stopPropagation();
    this.calciteDropdownSelect.emit();
    if (!this.closeOnSelectDisabled ||
      event.detail.requestedDropdownGroup.selectionMode === "none") {
      this.closeCalciteDropdown();
    }
    event.stopPropagation();
  }
  onBeforeOpen() {
    this.calciteDropdownBeforeOpen.emit();
  }
  onOpen() {
    this.calciteDropdownOpen.emit();
  }
  onBeforeClose() {
    this.calciteDropdownBeforeClose.emit();
  }
  onClose() {
    this.calciteDropdownClose.emit();
  }
  updateSelectedItems() {
    this.selectedItems = this.items.filter((item) => item.selected);
  }
  getMaxScrollerHeight() {
    const { maxItems, items } = this;
    let itemsToProcess = 0;
    let maxScrollerHeight = 0;
    let groupHeaderHeight;
    this.groups.forEach((group) => {
      if (maxItems > 0 && itemsToProcess < maxItems) {
        Array.from(group.children).forEach((item, index) => {
          if (index === 0) {
            if (isNaN(groupHeaderHeight)) {
              groupHeaderHeight = item.offsetTop;
            }
            maxScrollerHeight += groupHeaderHeight;
          }
          if (itemsToProcess < maxItems) {
            maxScrollerHeight += item.offsetHeight;
            itemsToProcess += 1;
          }
        });
      }
    });
    return items.length > maxItems ? maxScrollerHeight : 0;
  }
  closeCalciteDropdown(focusTrigger = true) {
    this.open = false;
    if (focusTrigger) {
      (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.h)(this.triggers[0]);
    }
  }
  getFocusableElement(item) {
    if (!item) {
      return;
    }
    const target = item.attributes.isLink
      ? item.shadowRoot.querySelector("a")
      : item;
    (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.h)(target);
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "open": ["openHandler"],
    "disabled": ["handleDisabledChange"],
    "flipPlacements": ["flipPlacementsHandler"],
    "maxItems": ["maxItemsHandler"],
    "overlayPositioning": ["overlayPositioningHandler"],
    "placement": ["placementHandler"]
  }; }
};
Dropdown.style = dropdownCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS$1 = {
  containerSmall: "container--s",
  containerMedium: "container--m",
  containerLarge: "container--l"
};

const dropdownGroupCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:block}.container{text-align:start}.container--s{font-size:var(--calcite-font-size--2);line-height:1rem}.container--s .dropdown-title{padding:0.5rem}.container--m{font-size:var(--calcite-font-size--1);line-height:1rem}.container--m .dropdown-title{padding:0.75rem}.container--l{font-size:var(--calcite-font-size-0);line-height:1.25rem}.container--l .dropdown-title{padding:1rem}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-ui-border-3)}";

const DropdownGroup = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalDropdownItemChange = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemChange", 6);
    this.groupTitle = undefined;
    this.selectionMode = "single";
    this.scale = undefined;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentWillLoad() {
    this.groupPosition = this.getGroupPosition();
  }
  render() {
    const scale = this.scale || (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "scale", "m");
    const groupTitle = this.groupTitle ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-hidden": "true", class: "dropdown-title" }, this.groupTitle)) : null;
    const dropdownSeparator = this.groupPosition > 0 ? (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "dropdown-separator", role: "separator" }) : null;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-label": this.groupTitle, role: "group" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        container: true,
        [CSS$1.containerSmall]: scale === "s",
        [CSS$1.containerMedium]: scale === "m",
        [CSS$1.containerLarge]: scale === "l"
      }, title: this.groupTitle }, dropdownSeparator, groupTitle, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null))));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  updateActiveItemOnChange(event) {
    this.requestedDropdownGroup = event.detail.requestedDropdownGroup;
    this.requestedDropdownItem = event.detail.requestedDropdownItem;
    this.calciteInternalDropdownItemChange.emit({
      requestedDropdownGroup: this.requestedDropdownGroup,
      requestedDropdownItem: this.requestedDropdownItem
    });
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  getGroupPosition() {
    return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"), this.el);
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
DropdownGroup.style = dropdownGroupCss;

/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const CSS = {
  containerLink: "container--link",
  containerSmall: "container--s",
  containerMedium: "container--m",
  containerLarge: "container--l",
  containerMulti: "container--multi-selection",
  containerSingle: "container--single-selection",
  containerNone: "container--none-selection",
  icon: "dropdown-item-icon",
  iconEnd: "dropdown-item-icon-end",
  iconStart: "dropdown-item-icon-start",
  itemContent: "dropdown-item-content",
  link: "dropdown-link"
};

const dropdownItemCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}.container--s{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}.container--s.container--none-selection{padding-inline-start:0.25rem}.container--s.container--none-selection .dropdown-link{padding-inline-start:0px}.container--m.container--none-selection{padding-inline-start:0.5rem}.container--m.container--none-selection .dropdown-link{padding-inline-start:0px}.container--l.container--none-selection{padding-inline-start:0.75rem}.container--l.container--none-selection .dropdown-link{padding-inline-start:0px}:host{position:relative;display:flex;flex-grow:1;align-items:center}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem;padding-inline-end:auto;padding-inline-start:0.25rem}:host,.container--link a{outline-color:transparent}:host(:focus){outline:2px solid transparent;outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.container--link{padding:0px}.container--link a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.container--s .dropdown-link{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m .dropdown-link{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l .dropdown-link{padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}:host(:hover) .container,:host(:active) .container{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:hover) .container--link .dropdown-link,:host(:active) .container--link .dropdown-link{color:var(--calcite-ui-text-1)}:host(:focus) .container{color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:active) .container{background-color:var(--calcite-ui-foreground-3)}:host(:hover) .container:before,:host(:active) .container:before,:host(:focus) .container:before{opacity:1}:host([selected]) .container:not(.container--none-selection),:host([selected]) .container--link .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([selected]) .container:not(.container--none-selection):before,:host([selected]) .container--link .dropdown-link:before{opacity:1;color:var(--calcite-ui-brand)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .container--link .dropdown-link calcite-icon{color:var(--calcite-ui-brand)}.container--multi-selection:before,.container--none-selection:before{display:none}.container--s:before{inset-inline-start:0.5rem}.container--m:before{inset-inline-start:0.75rem}.container--l:before{inset-inline-start:1rem}.dropdown-item-icon{position:absolute;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}.container--s .dropdown-item-icon{inset-inline-start:0.25rem}.container--m .dropdown-item-icon{inset-inline-start:0.5rem}.container--l .dropdown-item-icon{inset-inline-start:0.75rem}:host(:hover) .dropdown-item-icon{color:var(--calcite-ui-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-ui-brand);opacity:1}.container--s .dropdown-item-icon-start{margin-inline-end:0.5rem;margin-inline-start:0.25rem}.container--s .dropdown-item-icon-end{margin-inline-start:0.5rem}.container--m .dropdown-item-icon-start{margin-inline-end:0.75rem;margin-inline-start:0.25rem}.container--m .dropdown-item-icon-end{margin-inline-start:0.75rem}.container--l .dropdown-item-icon-start{margin-inline-end:1rem;margin-inline-start:0.25rem}.container--l .dropdown-item-icon-end{margin-inline-start:1rem}";

const DropdownItem = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteDropdownItemSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteDropdownItemSelect", 6);
    this.calciteInternalDropdownItemSelect = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemSelect", 6);
    this.calciteInternalDropdownItemKeyEvent = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownItemKeyEvent", 6);
    this.calciteInternalDropdownCloseRequest = (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalDropdownCloseRequest", 6);
    /** Specifies the scale of dropdown-item controlled by the parent, defaults to m */
    this.scale = "m";
    this.selected = false;
    this.iconFlipRtl = undefined;
    this.iconStart = undefined;
    this.iconEnd = undefined;
    this.href = undefined;
    this.label = undefined;
    this.rel = undefined;
    this.target = undefined;
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  //--------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.c)(this);
    this.el?.focus();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentWillLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.a)(this);
    this.initialize();
  }
  componentDidLoad() {
    (0,_loadable_cc14d728_js__WEBPACK_IMPORTED_MODULE_9__.s)(this);
  }
  connectedCallback() {
    this.initialize();
  }
  render() {
    const scale = (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "scale", this.scale);
    const iconStartEl = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.iconStart, flipRtl: this.iconFlipRtl === "start" || this.iconFlipRtl === "both", icon: this.iconStart, scale: scale === "l" ? "m" : "s" }));
    const contentNode = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { class: CSS.itemContent }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)));
    const iconEndEl = ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.iconEnd, flipRtl: this.iconFlipRtl === "end" || this.iconFlipRtl === "both", icon: this.iconEnd, scale: scale === "l" ? "m" : "s" }));
    const slottedContent = this.iconStart && this.iconEnd
      ? [iconStartEl, contentNode, iconEndEl]
      : this.iconStart
        ? [iconStartEl, contentNode]
        : this.iconEnd
          ? [contentNode, iconEndEl]
          : contentNode;
    const contentEl = !this.href ? (slottedContent) : ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("a", { "aria-label": this.label, class: CSS.link, href: this.href, ref: (el) => (this.childLink = el), rel: this.rel, tabIndex: -1, target: this.target }, slottedContent));
    const itemRole = this.href
      ? null
      : this.selectionMode === "single"
        ? "menuitemradio"
        : this.selectionMode === "multiple"
          ? "menuitemcheckbox"
          : "menuitem";
    const itemAria = this.selectionMode !== "none" ? (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.t)(this.selected) : null;
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.H, { "aria-checked": itemAria, role: itemRole, tabindex: "0" }, (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        container: true,
        [CSS.containerLink]: !!this.href,
        [CSS.containerSmall]: scale === "s",
        [CSS.containerMedium]: scale === "m",
        [CSS.containerLarge]: scale === "l",
        [CSS.containerMulti]: this.selectionMode === "multiple",
        [CSS.containerSingle]: this.selectionMode === "single",
        [CSS.containerNone]: this.selectionMode === "none"
      } }, this.selectionMode !== "none" ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: CSS.icon, icon: this.selectionMode === "multiple" ? "check" : "bullet-point", scale: scale === "l" ? "m" : "s" })) : null, contentEl)));
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  onClick() {
    this.emitRequestedItem();
  }
  keyDownHandler(event) {
    switch (event.key) {
      case " ":
      case "Enter":
        this.emitRequestedItem();
        if (this.href) {
          this.childLink.click();
        }
        event.preventDefault();
        break;
      case "Escape":
        this.calciteInternalDropdownCloseRequest.emit();
        event.preventDefault();
        break;
      case "Tab":
        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });
        break;
      case "ArrowUp":
      case "ArrowDown":
      case "Home":
      case "End":
        event.preventDefault();
        this.calciteInternalDropdownItemKeyEvent.emit({ keyboardEvent: event });
        break;
    }
  }
  updateActiveItemOnChange(event) {
    const parentEmittedChange = event.composedPath().includes(this.parentDropdownGroupEl);
    if (parentEmittedChange) {
      this.requestedDropdownGroup = event.detail.requestedDropdownGroup;
      this.requestedDropdownItem = event.detail.requestedDropdownItem;
      this.determineActiveItem();
    }
    event.stopPropagation();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  initialize() {
    this.selectionMode = (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_8__.f)(this.el, "selection-mode", "single");
    this.parentDropdownGroupEl = this.el.closest("calcite-dropdown-group");
    if (this.selectionMode === "none") {
      this.selected = false;
    }
  }
  determineActiveItem() {
    switch (this.selectionMode) {
      case "multiple":
        if (this.el === this.requestedDropdownItem) {
          this.selected = !this.selected;
        }
        break;
      case "single":
        if (this.el === this.requestedDropdownItem) {
          this.selected = true;
        }
        else if (this.requestedDropdownGroup === this.parentDropdownGroupEl) {
          this.selected = false;
        }
        break;
      case "none":
        this.selected = false;
        break;
    }
  }
  emitRequestedItem() {
    this.calciteDropdownItemSelect.emit();
    this.calciteInternalDropdownItemSelect.emit({
      requestedDropdownItem: this.el,
      requestedDropdownGroup: this.parentDropdownGroupEl
    });
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
DropdownItem.style = dropdownItemCss;



//# sourceMappingURL=ba-accordion_4.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/interactive-29995522.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ updateHostInteraction)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function noopClick() {
  /** noop */
}
/**
 * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.
 *
 * This should be used in the `componentDidRender` lifecycle hook.
 *
 * **Notes**
 *
 * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.
 * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error
 *
 * @param component
 * @param hostIsTabbable
 */
function updateHostInteraction(component, hostIsTabbable = false) {
  if (component.disabled) {
    component.el.setAttribute("tabindex", "-1");
    component.el.setAttribute("aria-disabled", "true");
    if (component.el.contains(document.activeElement)) {
      document.activeElement.blur();
    }
    component.el.click = noopClick;
    return;
  }
  component.el.click = HTMLElement.prototype.click;
  if (typeof hostIsTabbable === "function") {
    component.el.setAttribute("tabindex", hostIsTabbable.call(component) ? "0" : "-1");
  }
  else if (hostIsTabbable === true) {
    component.el.setAttribute("tabindex", "0");
  }
  else if (hostIsTabbable === false) {
    component.el.removeAttribute("tabindex");
  }
  else ;
  component.el.removeAttribute("aria-disabled");
}



//# sourceMappingURL=interactive-29995522.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/key-b75491c4.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ isActivationKey),
/* harmony export */   n: () => (/* binding */ numberKeys)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function isActivationKey(key) {
  return key === "Enter" || key === " ";
}
const numberKeys = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];



//# sourceMappingURL=key-b75491c4.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/loadable-cc14d728.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setUpLoadableComponent),
/* harmony export */   c: () => (/* binding */ componentLoaded),
/* harmony export */   s: () => (/* binding */ setComponentLoaded)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" stencil lifecycle method has been called).
 *
 * Requires "setUpLoadableComponent" and "setComponentLoaded" to be called first.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}



//# sourceMappingURL=loadable-cc14d728.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/observers-56740e99.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
/**
 * This utility ensures observers are created only for browser contexts.
 *
 * @param type - the type of observer to create
 * @param callback - the observer callback
 * @param options - the observer options
 */
function createObserver(type, callback, options) {
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  // based on https://github.com/whatwg/dom/issues/126#issuecomment-1049814948
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return (function () {
    return (type === "intersection"
      ? window.IntersectionObserver
      : type === "mutation"
        ? ExtendedMutationObserver
        : window.ResizeObserver);
  })();
}



//# sourceMappingURL=observers-56740e99.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzLTJjZDI1My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE2RztBQUNJO0FBQ3FDO0FBQzREO0FBQ25LO0FBQ3dCO0FBQ2Q7QUFDSztBQUN1RDtBQUNEO0FBQ25GO0FBQ0E7QUFDRDs7QUFFaEMsMENBQTBDLGtDQUFrQyw2QkFBNkIscUNBQXFDLDRCQUE0Qjs7QUFFMUs7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLDJCQUEyQixxREFBVztBQUN0Qyw2QkFBNkIscURBQVc7QUFDeEMsZ0NBQWdDLHFEQUFXO0FBQzNDLGlDQUFpQyxxREFBVztBQUM1QyxpQ0FBaUMscURBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQsK0JBQStCO0FBQy9CLDhCQUE4QjtBQUM5QixpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFRO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0M7O0FBRXRDOzs7Ozs7Ozs7Ozs7Ozs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpRDs7QUFFakQ7Ozs7Ozs7Ozs7Ozs7Ozs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0Y7O0FBRXRGOzs7Ozs7Ozs7Ozs7OztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRStCOztBQUUvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2JhLWFjY29yZGlvbl80LmVudHJ5LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2ludGVyYWN0aXZlLTI5OTk1NTIyLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYmEtaW5mb2dyYXBoaWMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYnVzaW5lc3MtYW5hbHlzdC1jb21wb25lbnRzL2Rpc3Qvc3RlbmNpbC1jb21wb25lbnRzL2Rpc3QvZXNtL2tleS1iNzU0OTFjNC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1jYzE0ZDcyOC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9vYnNlcnZlcnMtNTY3NDBlOTkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBnIGFzIGdldEVsZW1lbnQsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgQSBhcyBBQ0xVdGlscywgYSBhcyBCYXNlVXRpbCwgRSBhcyBFbGVtZW50SWRzLCBCIGFzIEJhUmVwb3J0c0xhbmd1YWdlIH0gZnJvbSAnLi9FbGVtZW50SWRzLWY3ZDI1N2U4LmpzJztcbmltcG9ydCB7IHQgYXMgdG9BcmlhQm9vbGVhbiwgaSBhcyBpc1ByaW1hcnlQb2ludGVyQnV0dG9uLCBwIGFzIGZvY3VzRWxlbWVudEluR3JvdXAsIGggYXMgZm9jdXNFbGVtZW50LCBmIGFzIGdldEVsZW1lbnRQcm9wIH0gZnJvbSAnLi9kb20tMTk5N2JmYWYuanMnO1xuaW1wb3J0IHsgZiBhcyBmaWx0ZXJDb21wdXRlZFBsYWNlbWVudHMsIGMgYXMgY29ubmVjdEZsb2F0aW5nVUksIGQgYXMgZGVmYXVsdE1lbnVQbGFjZW1lbnQsIHUgYXMgdXBkYXRlQWZ0ZXJDbG9zZSwgYSBhcyBkaXNjb25uZWN0RmxvYXRpbmdVSSwgRiBhcyBGbG9hdGluZ0NTUywgciBhcyByZXBvc2l0aW9uIH0gZnJvbSAnLi9mbG9hdGluZy11aS0wZjk4ZmM1My5qcyc7XG5pbXBvcnQgeyBnIGFzIGd1aWQgfSBmcm9tICcuL2d1aWQtODhhMzcyOWYuanMnO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24gfSBmcm9tICcuL2ludGVyYWN0aXZlLTI5OTk1NTIyLmpzJztcbmltcG9ydCB7IGkgYXMgaXNBY3RpdmF0aW9uS2V5IH0gZnJvbSAnLi9rZXktYjc1NDkxYzQuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLTU2NzQwZTk5LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCwgZCBhcyBkaXNjb25uZWN0T3BlbkNsb3NlQ29tcG9uZW50IH0gZnJvbSAnLi9vcGVuQ2xvc2VDb21wb25lbnQtN2Q1ODgzNGMuanMnO1xuaW1wb3J0IHsgYyBhcyBjb21wb25lbnRMb2FkZWQsIGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQgfSBmcm9tICcuL2xvYWRhYmxlLWNjMTRkNzI4LmpzJztcbmltcG9ydCAnLi9pbmRleC5lc20tNjdmMGYyNWEuanMnO1xuaW1wb3J0ICcuL3Jlc291cmNlcy00ODQzNmVlYS5qcyc7XG5pbXBvcnQgJy4vZGVib3VuY2UtMDQ3ZTA5ZjQuanMnO1xuXG5jb25zdCBiYUFjY29yZGlvbkNzcyA9IFwiY2FsY2l0ZS1saXN0LWl0ZW17bWFyZ2luLWJsb2NrLWVuZDp1bnNldCAhaW1wb3J0YW50Oy0tdHctc2hhZG93OnVuc2V0ICFpbXBvcnRhbnQ7LS10dy1zaGFkb3ctY29sb3JlZDp1bnNldCAhaW1wb3J0YW50O2JveC1zaGFkb3c6dW5zZXQgIWltcG9ydGFudH1cIjtcblxuY29uc3QgQmFBY2NvcmRpb24gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuYWNjb3JkaW9uT3BlbmVkID0gY3JlYXRlRXZlbnQodGhpcywgXCJhY2NvcmRpb25PcGVuZWRcIiwgNyk7XG4gICAgdGhpcy5hY2NvcmRpb25XaWxsT3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYWNjb3JkaW9uV2lsbE9wZW5cIiwgNyk7XG4gICAgdGhpcy5hY2NvcmRpb25JdGVtQ2xpY2tlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYWNjb3JkaW9uSXRlbUNsaWNrZWRcIiwgNyk7XG4gICAgdGhpcy5hY2NvcmRpb25JdGVtc0NoZWNrZWQgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFjY29yZGlvbkl0ZW1zQ2hlY2tlZFwiLCA3KTtcbiAgICB0aGlzLmRlZmF1bHRSZXBvcnRTZWxlY3RlZCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiZGVmYXVsdFJlcG9ydFNlbGVjdGVkXCIsIDcpO1xuICAgIC8vIGRlYnVnIGRhdGFcbiAgICB0aGlzLmRlYnVnQ29udGVudCA9IFtdO1xuICAgIHRoaXMuaWdub3JlQ2xpY2sgPSAwO1xuICAgIHRoaXMuX2lkUHJlZml4ID0gJ2JhLWFjY29yZGlvbi0nO1xuICAgIHRoaXMuX2lkSXRlbVByZWZpeCA9ICdiYS1pdGVtLSc7XG4gICAgdGhpcy5faWRJY29uUHJlZml4ID0gJ2JhLWFjY29yZGlvbi1pY29uLSc7XG4gICAgdGhpcy5faWRDb250ZW50UHJlZml4ID0gJ2JhLWNvbnRlbnQtJztcbiAgICB0aGlzLl9pc1JlcG9ydCA9IGZhbHNlO1xuICAgIHRoaXMuX2RiZyA9IGZhbHNlO1xuICAgIC8qIFByb3BzICovXG4gICAgLy8gQFByb3AoKSBjaGVja2JveEFsaWduUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZTsgIC8vIHNob3dzIGNoZWNrYm94ZXMgb24gdGhlIHJpZ2h0IHNpZGUgb2YgZWFjaCBpdGVtXG4gICAgdGhpcy5oaWRlT25FbXB0eSA9ICd0cnVlJzsgLy8gaGlkZXMgYWNjb3JkaW9uIHdoZW4gZW1wdHlcbiAgICB0aGlzLmRpc3BsYXlDb3VudCA9IHRydWU7IC8vIHNob3dzIGEgY291bnQgb2YgYWNjb3JkaW9uIGNvbnRlbnQgaXRlbXNcbiAgICB0aGlzLmNvbnRlbnRJbmxpbmUgPSAndHJ1ZSc7IC8vIGRpc3BsYXlzIGFjY29yZGlvbiBjb250ZW50IGlubGluZSBvciBhYnNvbHV0ZSBwb3NpdGlvbmVkIG92ZXIgb3RoZXIgZWxlbWVudHNcbiAgICB0aGlzLnN0U291cmNlQ291bnRyeSA9ICdVUyc7XG4gICAgdGhpcy5zdFNob3dEZWZhdWx0ID0gZmFsc2U7XG4gICAgdGhpcy50b2dnbGVDaGVja1N0YXRlID0gKGRhdGEsIGlkKSA9PiB7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDAgJiYgaWQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGRhdGFbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZGF0YVtpXS5pc0NoZWNrZWQ7XG4gICAgICAgICAgICBkYXRhW2ldLmlzQ2hlY2tlZCA9ICFjaGVja2VkO1xuICAgICAgICAgICAgcmV0dXJuICFjaGVja2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgdGhpcy5vbkNoZWNrQWxsQ2hhbmdlZCA9IChldikgPT4ge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBjb25zdCBlbGVtQ2hlY2tlZCA9IGV2LnNyY0VsZW1lbnQ/LmNoZWNrZWQ7XG4gICAgICBjb25zdCBjaGVja1N0YXRlID0gIWVsZW1DaGVja2VkO1xuICAgICAgY29uc3QgX2RlbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm5vdGlmeUNoZWNrZWRJdGVtcyhjaGVja1N0YXRlKTtcbiAgICAgIH07XG4gICAgICBzZXRUaW1lb3V0KF9kZWxheSwgMCk7XG4gICAgfTtcbiAgICB0aGlzLmxhbmdDb2RlID0gJ2VuLXVzJztcbiAgICB0aGlzLnNvdXJjZUNvdW50cnkgPSAnVVMnO1xuICB9XG4gIC8qIFdhdGNoZXMgKi9cbiAgb25Tb3VyY2VDb3VudHJ5Q2hhbmdlZCgpIHtcbiAgICB0aGlzLnN0U291cmNlQ291bnRyeSA9IHRoaXMuc291cmNlQ291bnRyeTtcbiAgfVxuICBvbnNob3dEZWZhdWx0Q2hhbmdlZCgpIHtcbiAgICB0aGlzLnN0U2hvd0RlZmF1bHQgPSB0aGlzLnNob3dEZWZhdWx0ID09ICd0cnVlJztcbiAgfVxuICBvbkRlZmF1bHRSZXBvcnRDaGFuZ2VkKCkge1xuICAgIHRoaXMuc3REZWZhdWx0UmVwb3J0SWQgPSB0aGlzLmRlZmF1bHRSZXBvcnRJZDtcbiAgfVxuICBvblN1Z2xpdGVDaGFuZ2VkKCkge1xuICAgIHRoaXMuc3RTdWdsaXRlID0gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Z2xpdGUgIT09IHVuZGVmaW5lZCAmJiAodGhpcy5zdWdsaXRlID09PSAndHJ1ZScpKSB7XG4gICAgICB0aGlzLnN0U3VnbGl0ZSA9IHRydWU7XG4gICAgfVxuICB9XG4gIG9uQ29udGVudENoYW5nZWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNvbnRlbnQgJiYgQUNMVXRpbHMuaGFzVGV4dCh0aGlzLmNvbnRlbnQpKVxuICAgICAgICB0aGlzLnN0Q29udGVudCA9IEpTT04ucGFyc2UodGhpcy5jb250ZW50KTtcbiAgICB9XG4gICAgY2F0Y2ggKGV4KSB7XG4gICAgICBCYXNlVXRpbC5FcnJvcignYmEtYWNjb3JkaW9uIGNvbnRlbnQgZXJyb3InLCBleCk7XG4gICAgfVxuICB9XG4gIG9uQWNjb3JkaW9uVGV4dENoYW5nZWQoKSB7XG4gICAgdGhpcy5zdERpc3BsYXlOYW1lID0gdGhpcy5kaXNwbGF5bmFtZTtcbiAgfVxuICBvblNlbGVjdGVkSWRDaGFuZ2VkKCkge1xuICAgIHRoaXMuc3RTZWxlY3RlZElkID0gdGhpcy5zZWxlY3RlZElkO1xuICB9XG4gIG9uR3JvdXBJZENoYW5nZWQoKSB7XG4gICAgdGhpcy5zdEdyb3VwSWQgPSB0aGlzLmdyb3VwaWQ7XG4gIH1cbiAgb25Db250ZW50SW5saW5lQ2hhbmdlZCgpIHtcbiAgICB0aGlzLnN0Q29udGVudElubGluZSA9ICh0aGlzLmNvbnRlbnRJbmxpbmUgPT0gJ3RydWUnKTtcbiAgfVxuICBhY2NvcmRpb25DaGVja2JveENoYW5nZWQoKSB7XG4gICAgdGhpcy5zdFNob3dDaGVja2JveGVzID0gdGhpcy5zaG93Q2hlY2tib3hlcztcbiAgfVxuICAvLyBVcGRhdGUgdGhlIEluZm9ncmFwaGljIFJlcG9ydCB3aGVuIHRoZSBhcmNnaXMtcmVwb3J0LWxpc3QgY2hhbmdlc1xuICBhY2NvcmRpb25PcGVuZWRFdmVudEhhbmRsZXIoZXZlbnQpIHtcbiAgICBsZXQgZ3JvdXBJZCA9IGV2ZW50LmRldGFpbC5ncm91cGlkO1xuICAgIGxldCBlbWl0SWQgPSBldmVudC5kZXRhaWwuaW5zdGFuY2VJZDtcbiAgICBpZiAoZW1pdElkICE9IG51bGwgJiYgZW1pdElkICE9IHRoaXMuX2luc3RhbmNlSWQpIHtcbiAgICAgIGlmIChncm91cElkICE9IG51bGwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0R3JvdXBJZCAmJiB0aGlzLmdyb3VwaWQpXG4gICAgICAgICAgdGhpcy5zdEdyb3VwSWQgPSB0aGlzLmdyb3VwaWQ7XG4gICAgICAgIGlmICh0aGlzLnN0R3JvdXBJZCAmJiB0aGlzLnN0R3JvdXBJZCA9PSBncm91cElkKSB7XG4gICAgICAgICAgLy8gcmVjZWl2ZWQgYSBzaWduYWwgdGhhdCBhbm90aGVyIGFjY29yZGlvbiBqdXN0IG9wZW5lZCxcbiAgICAgICAgICAvLyB0aGF0IG1lYW5zIHdlIHNob3VsZCBjbG9zZSB0aGlzIG9uZS5cbiAgICAgICAgICB0aGlzLmNsb3NlQWNjb3JkaW9uKG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIEBNZXRob2QoKVxuICBhc3luYyBvcGVuQWNjb3JkaW9uKCkge1xuICB9XG4gIC8vIEBNZXRob2QoKVxuICBhc3luYyBzZXRTZWxlY3RlZElkKGlkKSB7XG4gICAgdGhpcy5zZWxlY3RlZElkID0gaWQ7XG4gICAgdGhpcy5zdFNlbGVjdGVkSWQgPSBpZDtcbiAgfVxuICAvLyBATWV0aG9kKClcbiAgYXN5bmMgc2V0U2hvd0NoZWNrYm94KGZsYWcpIHtcbiAgICB0aGlzLnN0U2hvd0NoZWNrYm94ZXMgPSBmbGFnO1xuICB9XG4gIC8vIEBNZXRob2QoKVxuICBhc3luYyBzZXRTaG93RGVmYXVsdChmbGFnLCBkZWZhdWx0SWQpIHtcbiAgICB0aGlzLnN0U2hvd0RlZmF1bHQgPSBmbGFnO1xuICAgIHRoaXMuc3REZWZhdWx0UmVwb3J0SWQgPSBkZWZhdWx0SWQ7XG4gIH1cbiAgYXN5bmMgc2V0Q29sb3JUaGVtZShuYW1lKSB7XG4gICAgaWYgKG5hbWUgJiYgQUNMVXRpbHMuaGFzVGV4dChuYW1lKSAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLnN0Q29sb3JUaGVtZSA9IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBuID0gbmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChuID09PSAnbGlnaHQnKSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZCcsICcjMDA3YWMyJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZC1ob3ZlcicsICcjMDA2MTliJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1icmFuZC1wcmVzcycsICcjMDA0ODc0Jyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1iYWNrZ3JvdW5kJywgJyNmOGY4ZjgnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMScsICcjZmZmZmZmJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTInLCAnI2YzZjNmMycpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0zJywgJyNlYWVhZWEnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMScsICcjMTUxNTE1Jyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTInLCAnIzRhNGE0YScpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0zJywgJyM2YTZhNmEnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtaW52ZXJzZScsICcjZmZmZmZmJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LWxpbmsnLCAnIzAwNjE5YicpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTEnLCAnI2NhY2FjYScpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTInLCAnI2Q0ZDRkNCcpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLTMnLCAnI2RmZGZkZicpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktYm9yZGVyLWlucHV0JywgJyM5NDk0OTQnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWluZm8nLCAnIzAwNjE5YicpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktc3VjY2VzcycsICcjMzVhYzQ2Jyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChuID09PSAnZGFyaycpIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kJywgJyMwMDlhZjInKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kLWhvdmVyJywgJyMwMDdhYzInKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJyYW5kLXByZXNzJywgJyMwMDYxOWInKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWJhY2tncm91bmQnLCAnIzM1MzUzNScpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xJywgJyMyYjJiMmInKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMicsICcjMjAyMDIwJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTMnLCAnIzE1MTUxNScpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC0xJywgJyNmZmZmZmYnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtMicsICcjYmZiZmJmJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS10ZXh0LTMnLCAnIzlmOWY5ZicpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktdGV4dC1pbnZlcnNlJywgJyMxNTE1MTUnKTtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYWxjaXRlLXVpLXRleHQtbGluaycsICcjMDBhMGZmJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMScsICcjNTU1NTU1Jyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMicsICcjNGE0YTRhJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItMycsICcjNDA0MDQwJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1ib3JkZXItaW5wdXQnLCAnIzc1NzU3NScpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhbGNpdGUtdWktaW5mbycsICcjMDBhMGZmJyk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FsY2l0ZS11aS1zdWNjZXNzJywgJyMzNmRhNDMnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgQmFzZVV0aWwuTG9nKCdBQ0NPUkRJT046IHdpbGwgbG9hZCcpO1xuICAgIHRoaXMuc3RMYW5nQ29kZSA9IHRoaXMubGFuZ0NvZGU7XG4gICAgdGhpcy5zdFNvdXJjZUNvdW50cnkgPSB0aGlzLnNvdXJjZUNvdW50cnk7XG4gICAgdGhpcy5zdFNob3dDaGVja2JveGVzID0gdGhpcy5zaG93Q2hlY2tib3hlcztcbiAgICB0aGlzLnN0U2hvd0RlZmF1bHQgPSB0aGlzLnNob3dEZWZhdWx0ID09ICd0cnVlJztcbiAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gdGhpcy5kZWZhdWx0UmVwb3J0SWQ7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZUlkKVxuICAgICAgdGhpcy5faW5zdGFuY2VJZCA9IEVsZW1lbnRJZHMuZ2VuZXJhdGVJZCh0aGlzLl9pZFByZWZpeCkuaWQ7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZUNvbnRlbnRJZClcbiAgICAgIHRoaXMuX2luc3RhbmNlQ29udGVudElkID0gRWxlbWVudElkcy5nZW5lcmF0ZUlkKHRoaXMuX2lkQ29udGVudFByZWZpeCkuaWQ7XG4gICAgaWYgKCF0aGlzLl9pbnN0YW5jZUljb25JZClcbiAgICAgIHRoaXMuX2luc3RhbmNlSWNvbklkID0gRWxlbWVudElkcy5nZW5lcmF0ZUlkKHRoaXMuX2lkSWNvblByZWZpeCkuaWQ7XG4gICAgdGhpcy5zdFN1Z2xpdGUgPSBmYWxzZTtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VnbGl0ZSAhPT0gdW5kZWZpbmVkICYmICh0aGlzLnN1Z2xpdGUgPT09ICd0cnVlJykpIHtcbiAgICAgIHRoaXMuc3RTdWdsaXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLnN0RGlzcGxheU5hbWUgfHwgdGhpcy5zdERpc3BsYXlOYW1lLmxlbmd0aCA8PSAwKSB7XG4gICAgICBpZiAodGhpcy5kaXNwbGF5bmFtZSAmJiB0aGlzLmRpc3BsYXluYW1lLmxlbmd0aCA+IDApXG4gICAgICAgIHRoaXMuc3REaXNwbGF5TmFtZSA9IHRoaXMuZGlzcGxheW5hbWU7XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zdERpc3BsYXlOYW1lID0gJz8nO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RHcm91cElkICYmIHRoaXMuZ3JvdXBpZClcbiAgICAgIHRoaXMuc3RHcm91cElkID0gdGhpcy5ncm91cGlkO1xuICAgIGlmICghdGhpcy5zdENvbnRlbnRJbmxpbmUgJiYgdGhpcy5jb250ZW50SW5saW5lKVxuICAgICAgdGhpcy5zdENvbnRlbnRJbmxpbmUgPSAodGhpcy5jb250ZW50SW5saW5lID09ICd0cnVlJyk7XG4gICAgaWYgKCF0aGlzLnN0Q29udGVudCAmJiB0aGlzLmNvbnRlbnQgJiYgQUNMVXRpbHMuaGFzVGV4dCh0aGlzLmNvbnRlbnQpKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnN0Q29udGVudCA9IEpTT04ucGFyc2UodGhpcy5jb250ZW50KTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLnN0Q29udGVudCA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnN0U2VsZWN0ZWRJZCA9IHRoaXMuc2VsZWN0ZWRJZDtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGlmICh0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KSA9PiB7XG4gICAgICAgIHNlbGYub25DbGlja0FjY29yZGlvbi5jYWxsKHNlbGYsIGV2KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzZWxmLmFwcGx5U3R5bGVzKCk7XG4gICAgLy8gY29uc3QgbWFrZURlZnMgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRBbGwuY2FsbCh0aGlzLCAnY2FsY2l0ZS1saXN0LWl0ZW0uYmEtcmVwb3J0LWl0ZW0nKVxuICAgIC8vIGlmIChtYWtlRGVmcykge1xuICAgIC8vICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IG1ha2VEZWZzLmxlbmd0aDsgaWkrKykge1xuICAgIC8vICAgICBjb25zdCBpY29uID0gbWFrZURlZnNbaWldXG4gICAgLy8gICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcbiAgICAvLyAgICAgICBzZWxmLm9uQ2xpY2tMaXN0SXRlbUFjdGlvbi5jYWxsKHNlbGYsIGV2KVxuICAgIC8vICAgICB9KVxuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZWxmLmFwcGx5U3R5bGVzKCk7XG4gICAgfSwgMTApO1xuICB9XG4gIGFwcGx5U3R5bGVzKCkge1xuICAgIEJhc2VVdGlsLkxvZygnQUNDT1JESU9OIGFwcGx5U3R5bGVzJyk7XG4gICAgLy8gc3R5bGluZyBpbiBjYXNlIHdlIGFyZSBzaG93aW5nIGNoZWNrYm94ZXNcbiAgICBpZiAodGhpcy5zdFNob3dDaGVja2JveGVzKSB7XG4gICAgICAvLyBhcHBseSBzaXplIHRvIGNhbGNpdGUtY2hlY2tib3ggZGl2IGluc2lkZSB0aGUgc2hhZG93IGRvbVxuICAgICAgY29uc3QgY2FsY2l0ZUFjYyA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudC5jYWxsKHRoaXMsICdjYWxjaXRlLWFjY29yZGlvbicpO1xuICAgICAgaWYgKGNhbGNpdGVBY2MpIHtcbiAgICAgICAgY29uc3QgY2FsY2l0ZUFjY0l0ZW0gPSBjYWxjaXRlQWNjLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtYWNjb3JkaW9uLWl0ZW0nKTtcbiAgICAgICAgaWYgKGNhbGNpdGVBY2NJdGVtKSB7XG4gICAgICAgICAgY29uc3QgYWlTaGFkb3cgPSBjYWxjaXRlQWNjSXRlbS5zaGFkb3dSb290O1xuICAgICAgICAgIGlmIChhaVNoYWRvdykge1xuICAgICAgICAgICAgLy8gYWRqdXN0IGFjY29yZGlvbiBtYWluIGxhYmVsXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gYWlTaGFkb3cucXVlcnlTZWxlY3RvcignZGl2LmhlYWRlci1jb250ZW50Jyk7XG4gICAgICAgICAgICBpZiAoaGVhZGVyQ29udGVudCkge1xuICAgICAgICAgICAgICBoZWFkZXJDb250ZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zdHlsZS50b3AgPSAnMnB4JztcbiAgICAgICAgICAgICAgaGVhZGVyQ29udGVudC5zdHlsZS5sZWZ0ID0gJzFweCc7XG4gICAgICAgICAgICAgIGhlYWRlckNvbnRlbnQuc3R5bGUucGFkZGluZyA9ICc4cHggMTJweCAxMHB4IDEycHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBhZGp1c3QgYWNjb3JkaW9uIG1haW4gY2hlY2tib3hcbiAgICAgICAgICBjb25zdCBjaGVjayA9IGNhbGNpdGVBY2NJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtY2hlY2tib3gnKTtcbiAgICAgICAgICBpZiAoY2hlY2spIHtcbiAgICAgICAgICAgIGNvbnN0IGJveERpdiA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudC5jYWxsKGNoZWNrLCAnZGl2LnRvZ2dsZScpO1xuICAgICAgICAgICAgaWYgKGJveERpdikge1xuICAgICAgICAgICAgICBib3hEaXYuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgICBib3hEaXYuc3R5bGUubGVmdCA9ICctM3B4JztcbiAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLndpZHRoID0gJzE2cHgnO1xuICAgICAgICAgICAgICBib3hEaXYuc3R5bGUuaGVpZ2h0ID0gJzE0cHgnO1xuICAgICAgICAgICAgICBib3hEaXYuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDFweCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0yKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZvciBhbGwgbGlzdCBpdGVtc1xuICAgICAgICAgIGNvbnN0IGxpc3QgPSBjYWxjaXRlQWNjLnF1ZXJ5U2VsZWN0b3IoJ2NhbGNpdGUtbGlzdCcpO1xuICAgICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbGNpdGUtbGlzdC1pdGVtJyk7XG4gICAgICAgICAgICBpZiAobGlzdEl0ZW1zICYmIGxpc3RJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBsaXN0SXRlbXMubGVuZ3RoOyBpaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxpc3RJdGVtc1tpaV07XG4gICAgICAgICAgICAgICAgLy8gYWNjb3JkaW9uIGxhYmVsXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxFbGVtID0gQUNMVXRpbHMucXVlcnlFbGVtZW50LmNhbGwoaXRlbSwgJ2Rpdi5sYWJlbCcpO1xuICAgICAgICAgICAgICAgIGlmIChsYWJlbEVsZW0pIHtcbiAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uc3R5bGUubGVmdCA9ICcxcHgnO1xuICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLnN0eWxlLnBhZGRpbmcgPSAnMCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGFjY29yZGlvbiBsaXN0IGl0ZW0gY2hlY2tib3hcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVjayA9IGl0ZW0ucXVlcnlTZWxlY3RvcignY2FsY2l0ZS1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgIGlmIChjaGVjaykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYm94RGl2ID0gQUNMVXRpbHMucXVlcnlFbGVtZW50LmNhbGwoY2hlY2ssICdkaXYudG9nZ2xlJyk7XG4gICAgICAgICAgICAgICAgICBpZiAoYm94RGl2KSB7XG4gICAgICAgICAgICAgICAgICAgIGJveERpdi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgIGJveERpdi5zdHlsZS5sZWZ0ID0gJzVweCc7XG4gICAgICAgICAgICAgICAgICAgIGJveERpdi5zdHlsZS53aWR0aCA9ICcxNXB4JztcbiAgICAgICAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmhlaWdodCA9ICcxM3B4JztcbiAgICAgICAgICAgICAgICAgICAgYm94RGl2LnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHggdmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMiknO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkaXZBY3Rpb25TdGFydCA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudC5jYWxsKGNhbGNpdGVBY2NJdGVtLCAnZGl2LmFjdGlvbnMtc3RhcnQnKTtcbiAgICAgICAgICBpZiAoZGl2QWN0aW9uU3RhcnQpIHtcbiAgICAgICAgICAgIGRpdkFjdGlvblN0YXJ0LnN0eWxlLndpZHRoID0gJzI0cHgnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBvbkNoZWNrYm94Q2hhbmdlZChpZCkge1xuICAgIEJhc2VVdGlsLkxvZygnQUNDT1JESU9OOiBvbkNoZWNrYm94Q2hhbmdlZCcpO1xuICAgIGNvbnN0IHJlcG9ydElkID0gaWQ7XG4gICAgY29uc3QgaXNDaGVja2VkID0gdGhpcy50b2dnbGVDaGVja1N0YXRlKHRoaXMuc3RDb250ZW50LCByZXBvcnRJZCk7XG4gICAgdGhpcy5ub3RpZnlDaGVja2VkSXRlbXMoaXNDaGVja2VkLCByZXBvcnRJZCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2JveGVzKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qXG4gICAqIGNsb3NlQWNjb3JkaW9uXG4gICAqXG4gICAqICAgIGNvbnRleHQgLSBpbnRlcm5hbCB1c2Ugb25seSwgc2V0IHRvIG51bGwgb3RoZXJ3aXNlXG4gICAqL1xuICBjbG9zZUFjY29yZGlvbihjb250ZXh0KSB7XG4gICAgbGV0IGFjY29yZGlvbiA9IGNvbnRleHQgPyBjb250ZXh0LmVsZW0gOiBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VJZCk7XG4gICAgbGV0IGNvbnRlbnQgPSBjb250ZXh0ID8gY29udGV4dC5jb250ZW50IDogQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIHRoaXMuX2luc3RhbmNlQ29udGVudElkKTtcbiAgICBsZXQgaWNvbiA9IGNvbnRleHQgPyBjb250ZXh0Lmljb24gOiBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VJY29uSWQpO1xuICAgIGFjY29yZGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpb25fX2FjdGl2ZScpO1xuICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgnaWNvbi1lbmQnLCAnY2FyZXQtZG93bicpO1xuICAgIC8vIGhpZGUgY29udGVudCB0byBwcmV2ZW50IHRhYiBhY3Rpb25zXG4gICAgdGhpcy5oaWRlQ29udGVudChjb250ZW50KTtcbiAgfVxuICAvLyBzaG93cyB0aGUgYWNjb3JkaW9uIGNvbnRlbnQgZGl2IGNvbnRhaW5pbmcgYWxsIHRoZSByb3cgaXRlbXNcbiAgc2hvd0NvbnRlbnQoY29udGVudCkge1xuICAgIGlmICghY29udGVudClcbiAgICAgIGNvbnRlbnQgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VDb250ZW50SWQpO1xuICAgIGlmIChjb250ZW50LmNsYXNzTGlzdC5jb250YWlucygnYmEtY29udGVudC1oaWRkZW4nKSkge1xuICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdiYS1jb250ZW50LWhpZGRlbicpO1xuICAgIH1cbiAgfVxuICBoaWRlQ29udGVudChjb250ZW50KSB7XG4gICAgaWYgKCFjb250ZW50KVxuICAgICAgY29udGVudCA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCh0aGlzLCB0aGlzLl9pbnN0YW5jZUNvbnRlbnRJZCk7XG4gICAgaWYgKCFjb250ZW50LmNsYXNzTGlzdC5jb250YWlucygnYmEtY29udGVudC1oaWRkZW4nKSkge1xuICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdiYS1jb250ZW50LWhpZGRlbicpO1xuICAgIH1cbiAgfVxuICBvbkNsaWNrQWNjb3JkaW9uSXRlbShlLCBjb250ZXh0LCBkYXRhKSB7XG4gICAgaWYgKCFkYXRhLnVzZXNDaGVja2JveCkge1xuICAgICAgLy8gZGF0YSA9IHsgaWQ6PHJlcG9ydGlkPiwgbmFtZTo8cmVwb3J0TmFtZT4gfVxuICAgICAgdGhpcy5hY2NvcmRpb25JdGVtQ2xpY2tlZC5lbWl0KHsgY29udGV4dDogY29udGV4dCwgaXRlbTogZGF0YSB9KTtcbiAgICB9XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIG9uQ2xpY2tNYWtlRGVmYXVsdEFjdGlvbihldiwgcmVwb3J0SWQpIHtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5fZ2V0Q29udGVudEl0ZW0ocmVwb3J0SWQpLm5hbWU7XG4gICAgY29uc3QgaXNEZWZhdWx0ID0gcmVwb3J0SWQgPT0gdGhpcy5zdERlZmF1bHRSZXBvcnRJZDtcbiAgICBpZiAoaXNEZWZhdWx0KSB7XG4gICAgICB0aGlzLnN0RGVmYXVsdFJlcG9ydElkID0gJyc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gbm90aWZ5IGxpc3RlbmVycyBvZiBkZWZhdWx0IGNoYW5nZVxuICAgICAgdGhpcy5zdERlZmF1bHRSZXBvcnRJZCA9IHJlcG9ydElkO1xuICAgICAgdGhpcy5kZWZhdWx0UmVwb3J0U2VsZWN0ZWQuZW1pdCh7IHJlcG9ydElkOiByZXBvcnRJZCwgbmFtZTogbmFtZSB9KTtcbiAgICB9XG4gICAgLy8gY2xvc2UgdGhlIG1lbnUgcG9wb3ZlclxuICAgIGNvbnN0IHBvcG92ZXJJZCA9IHJlcG9ydElkICsgJy1wb3AnO1xuICAgIGNvbnN0IHBvcG92ZXJFbGVtID0gQUNMVXRpbHMucXVlcnlFbGVtZW50QnlJZC5jYWxsKHRoaXMsIEFDTFV0aWxzLmZpeElkKHBvcG92ZXJJZCkpO1xuICAgIGlmIChwb3BvdmVyRWxlbSkge1xuICAgICAgcG9wb3ZlckVsZW0uc2V0QXR0cmlidXRlKCdvcGVuJywgJ2ZhbHNlJyk7XG4gICAgfVxuICB9XG4gIG9uQ2xpY2tBY2NvcmRpb24oZXYpIHtcbiAgICBpZiAoZXYudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmEtdGFyZ2V0LWNoZWNrJykpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHRoaXMuaWdub3JlQ2xpY2sgPiAwKSB7XG4gICAgICB0aGlzLmlnbm9yZUNsaWNrLS07XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGNvbnN0IGFjYyA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCAodGhpcywgdGhpcy5faW5zdGFuY2VJZClcbiAgICBjb25zdCBhY2MgPSBldi5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IGNvbnRlbnQgPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VDb250ZW50SWQpO1xuICAgIGNvbnN0IGljb24gPSBBQ0xVdGlscy5xdWVyeUVsZW1lbnRCeUlkLmNhbGwodGhpcywgdGhpcy5faW5zdGFuY2VJY29uSWQpO1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBpZiAoY29udGVudC5zdHlsZS5tYXhIZWlnaHQpIHtcbiAgICAgICAgLy8gYWNjb3JkaW9uIGlzIGN1cnJlbnRseSBvcGVuXG4gICAgICAgIHRoaXMuY2xvc2VBY2NvcmRpb24oeyBlbGVtOiBhY2MsIGNvbnRlbnQ6IGNvbnRlbnQsIGljb246IGljb24gfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gYWNjb3JkaW9uIGlzIGNsb3NlZCAtIG9wZW4gaXRcbiAgICAgICAgYWNjLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbl9fYWN0aXZlJyk7XG4gICAgICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzEwMCUnOyAvL2NvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgLy8gaWNvbi5pbm5lclRleHQgPSAnLSc7XG4gICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdpY29uLWVuZCcsICdjYXJldC11cCcpO1xuICAgICAgICB0aGlzLnNob3dDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAvLyBub3RpZnkgb3RoZXIgYWNjb3JkaW9ucyBpbiBvdXIgZ3JvdXAgdGhhdCB0aGlzIGFjY29yZGlvbiBqdXN0IG9wZW5lZFxuICAgICAgICB0aGlzLmFjY29yZGlvbk9wZW5lZC5lbWl0KHsgYWNjb3JkaW9uOiB0aGlzLCBncm91cGlkOiB0aGlzLnN0R3JvdXBJZCwgaW5zdGFuY2VJZDogdGhpcy5faW5zdGFuY2VJZCB9KTtcbiAgICAgICAgZnVuY3Rpb24gX2FmdGVyQW5pbWF0aW9uKCkge1xuICAgICAgICAgIGNvbnRlbnQuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChfYWZ0ZXJBbmltYXRpb24sIDUwMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIF9nZXRDb250ZW50KCkge1xuICAgIC8vIE5vdGU6IHN0Q29udGVudCBpcyBhbiBvYmplY3QsIGNvbnRlbnQgaXMgYSBzdHJpbmdcbiAgICBpZiAoIXRoaXMuc3RDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5jb250ZW50KSB7XG4gICAgICAgIHRoaXMuc3RDb250ZW50ID0gSlNPTi5wYXJzZSh0aGlzLmNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5zaG93RGVidWcpIHtcbiAgICAgICAgICBsZXQgYWNjRWxlbSA9IEFDTFV0aWxzLnF1ZXJ5RWxlbWVudEJ5SWQuY2FsbCh0aGlzLCB0aGlzLl9pbnN0YW5jZUlkKTtcbiAgICAgICAgICBpZiAoYWNjRWxlbSkge1xuICAgICAgICAgICAgbGV0IGMgPSBhY2NFbGVtLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xuICAgICAgICAgICAgaWYgKGMgJiYgYy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IGM7XG4gICAgICAgICAgICAgIHRoaXMuc3RDb250ZW50ID0gSlNPTi5wYXJzZSh0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdENvbnRlbnQ7XG4gIH1cbiAgX2dldENvbnRlbnRJdGVtKGlkKSB7XG4gICAgZm9yIChsZXQgaWkgPSAwOyBpaSA8IHRoaXMuc3RDb250ZW50Lmxlbmd0aDsgaWkrKykge1xuICAgICAgbGV0IGl0ZW0gPSB0aGlzLnN0Q29udGVudFtpaV07XG4gICAgICBpZiAoaXRlbS5pZCA9PSBpZCkge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgX3NldENvbnRlbnRJdGVtKGlkLCBwcm9wLCB2YWwpIHtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5zdENvbnRlbnQubGVuZ3RoOyBpaSsrKSB7XG4gICAgICBsZXQgaXRlbSA9IHRoaXMuc3RDb250ZW50LnN0Q29udGVudHRlbnRbaWldO1xuICAgICAgaWYgKGl0ZW0uaWQgPT0gaWQpIHtcbiAgICAgICAgdGhpcy5zdENvbnRlbnRbaWldW3Byb3BdID0gdmFsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX3RvZ2dsZUNvbnRlbnRJdGVtKGlkLCBwcm9wKSB7XG4gICAgbGV0IGl0ZW0gPSB0aGlzLl9nZXRDb250ZW50SXRlbShpZCk7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gaXRlbVtwcm9wXSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgIHRoaXMuX3NldENvbnRlbnRJdGVtKGlkLCBwcm9wLCBuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XG4gICAgdGhpcy5zdFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9XG4gIC8vIGVtaXRzIG5vdGlmaWNhdGlvbiB3aGVuIGFueS9hbGwgY2hlY2tib3ggY2hhbmdlc1xuICAvLyAgIGxpc3QgPSBhcnJheSBvZiByZXBvcnRJZHMgdG8gc2V0LCBvciAobnVsbCBvciBlbXB0eSkgdG8gc2V0IGFsbFxuICAvLyAgIG5ld1N0YXRlID0gbmV3IGZvcmNlZCBzdGF0ZSB0byBub3RpZnlcbiAgLy9cbiAgbm90aWZ5Q2hlY2tlZEl0ZW1zKG5ld1N0YXRlLCBpZCkge1xuICAgIGNvbnN0IGFwcGx5VG9BbGwgPSAoIWlkIHx8ICFBQ0xVdGlscy5oYXNUZXh0KGlkKSk7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IHRoaXMuZWwuc2hhZG93Um9vdD8ucXVlcnlTZWxlY3RvckFsbCgnY2FsY2l0ZS1jaGVja2JveFtkYXRhLWdyb3VwXScpO1xuICAgIGlmIChjaGVja2JveGVzKSB7XG4gICAgICBjb25zdCByZXBvcnRzID0gW107XG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgY2hlY2tib3hlcy5sZW5ndGg7IGlpKyspIHtcbiAgICAgICAgY29uc3QgYm94ID0gY2hlY2tib3hlc1tpaV07XG4gICAgICAgIGxldCBmbGFnID0gYm94LmNoZWNrZWQ7XG4gICAgICAgIGNvbnN0IHJlcG9ydElkID0gYm94LmdldEF0dHJpYnV0ZSgnZ3VpZCcpO1xuICAgICAgICBpZiAocmVwb3J0SWQgJiYgQUNMVXRpbHMuaGFzVGV4dChyZXBvcnRJZCkpIHtcbiAgICAgICAgICBpZiAoYXBwbHlUb0FsbCB8fCBpZCA9PSByZXBvcnRJZCkge1xuICAgICAgICAgICAgZmxhZyA9IG5ld1N0YXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByZXBvcnQgPSB7IGlkOiByZXBvcnRJZCwgaXNDaGVja2VkOiBmbGFnIH07XG4gICAgICAgICAgcmVwb3J0cy5wdXNoKHJlcG9ydCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyZXBvcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gTm90aWZ5IG90aGVyIGNvbXBvbmVudHNcbiAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtc0NoZWNrZWQuZW1pdCh7IGFjY29yZGlvbjogdGhpcywgcmVwb3J0czogcmVwb3J0cyB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVuZGVyTWFrZURlZmF1bHRVSShyZXBvcnRJZCkge1xuICAgIGNvbnN0IGFjdGlvblN0eWxlID0ge1xuICAgICAgJ3BhZGRpbmcnOiAnNHB4JyxcbiAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsXG4gICAgICAnbGVmdCc6ICcxMnB4J1xuICAgIH07XG4gICAgLy8gY29uc3QgbGlzdEl0ZW1TdHlsZSA9IHtcbiAgICAvLyAgICdtaW4td2lkdGgnOiAnMTYwcHgnLFxuICAgIC8vICAgJ2Rpc3BsYXknOiAnZmxleCdcbiAgICAvLyB9XG4gICAgLy8gY29uc3QgbGlzdEl0ZW1JY29uU3R5bGUgPSB7XG4gICAgLy8gICAnZGlzcGxheSc6ICdmbGV4JyxcbiAgICAvLyAgICdmbGV4JzogJzAgMCBhdXRvJyxcbiAgICAvLyAgICd3aWR0aCc6ICcyOHB4JyxcbiAgICAvLyAgICdoZWlnaHQnOiAnMjhweCcsXG4gICAgLy8gICAndHJhbnNmb3JtJzogJ3NjYWxlKDAuNyknXG4gICAgLy8gfVxuICAgIC8vIGNvbnN0IGxpc3RJdGVtVGV4dFN0eWxlID0ge1xuICAgIC8vICAgJ2Rpc3BsYXknOiAnZmxleCcsXG4gICAgLy8gICAnZmxleCc6ICcxIDEgYXV0bycsXG4gICAgLy8gICAnanVzdGlmeS1jb250ZW50JzogJ2xlZnQnLFxuICAgIC8vICAgJ3RleHQtYWxpZ24nOiAnbGVmdCcsXG4gICAgLy8gICAnYWxpZ24taXRlbXMnOiAnY2VudGVyJyxcbiAgICAvLyAgICdwYWRkaW5nLXJpZ2h0JzogJzVweCcsXG4gICAgLy8gICAnbWF4LXdpZHRoJzogJzIwMHB4JyxcbiAgICAvLyAgICdjdXJzb3InOiAncG9pbnRlcidcbiAgICAvLyB9XG4gICAgLy8gY29uc3QgcG9wb3Zlckxpc3RJdGVtU3R5bGUgPSB7XG4gICAgLy8gICAnZGlzcGxheSc6ICdmbGV4JyxcbiAgICAvLyAgICdhbGlnbi1pdGVtcyc6ICdjZW50ZXInXG4gICAgLy8gfVxuICAgIC8vIE9ubHkgcmVuZGVycyB0aGUgZWxsaXBzaXMgYW5kIHBvcHVwIG1lbnUgaWYgJ3Nob3dEZWZhdWx0JyBpcyB0cnVlXG4gICAgaWYgKHRoaXMuc3RTaG93RGVmYXVsdCkge1xuICAgICAgY29uc3QgbWFrZURlZlRleHQgPSBCYVJlcG9ydHNMYW5ndWFnZS5pMThuKCdtYWtlLWRlZmF1bHQnKTtcbiAgICAgIGNvbnN0IHJlbW92ZURlZlRleHQgPSBCYVJlcG9ydHNMYW5ndWFnZS5pMThuKCdyZW1vdmUtZGVmYXVsdCcpO1xuICAgICAgY29uc3QgYWN0aW9uSWQgPSByZXBvcnRJZCArICctYWN0aW9uJztcbiAgICAgIGNvbnN0IHBvcG92ZXJJZCA9IHJlcG9ydElkICsgJy1wb3AnO1xuICAgICAgY29uc3QgaXNEZWZhdWx0ID0gcmVwb3J0SWQgPT0gdGhpcy5zdERlZmF1bHRSZXBvcnRJZDtcbiAgICAgIGNvbnN0IHBvcG92ZXJJY29uTmFtZSA9IChpc0RlZmF1bHQpID8gJ3gnIDogJ2NoZWNrJztcbiAgICAgIGNvbnN0IGRlZlRleHQgPSAoaXNEZWZhdWx0KSA/IHJlbW92ZURlZlRleHQgOiBtYWtlRGVmVGV4dDtcbiAgICAgIGNvbnN0IHBvcG92ZXJBY3Rpb25JZCA9IHJlcG9ydElkICsgJy1wb3BpdGVtJztcbiAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IHNsb3Q6IFwiYWN0aW9ucy1lbmRcIiwgc3R5bGU6IGFjdGlvblN0eWxlIH0sIGgoXCJjYWxjaXRlLWFjdGlvblwiLCB7IGlkOiBhY3Rpb25JZCwgaWNvbjogXCJlbGxpcHNpc1wiLCBcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsIGFsaWdubWVudDogXCJjZW50ZXJcIiwgYXBwZWFyYW5jZTogXCJ0cmFuc3BhcmVudFwiLCBzY2FsZTogXCJzXCIgfSksIGgoXCJjYWxjaXRlLXBvcG92ZXJcIiwgeyBpZDogcG9wb3ZlcklkLCBcImFyaWEtaGlkZGVuXCI6IFwiZmFsc2VcIiwgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIiwgcm9sZTogXCJkaWFsb2dcIiwgXCJhdXRvLWNsb3NlXCI6IFwiXCIsIFwicG9pbnRlci1kaXNhYmxlZFwiOiBcIlwiLCBcIm9mZnNldC1kaXN0YW5jZVwiOiBcIjZcIiwgXCJvZmZzZXQtc2tpZGRpbmdcIjogXCIwXCIsIFwib3ZlcmxheS1wb3NpdGlvbmluZ1wiOiBcImZpeGVkXCIsIHBsYWNlbWVudDogXCJsZWZ0LWVuZFwiLCBzY2FsZTogXCJtXCIsIFwiZGF0YS1wbGFjZW1lbnRcIjogXCJyaWdodC1zdGFydFwiLCBcInJlZmVyZW5jZS1lbGVtZW50XCI6IGFjdGlvbklkLCBvcGVuOiBcIlwiIH0sIGgoXCJjYWxjaXRlLWFjdGlvblwiLCB7IGlkOiBwb3BvdmVyQWN0aW9uSWQsIHRleHQ6IGRlZlRleHQsIGljb246IHBvcG92ZXJJY29uTmFtZSwgb25DbGljazogKGUpID0+IHRoaXMub25DbGlja01ha2VEZWZhdWx0QWN0aW9uKGUsIHJlcG9ydElkKSwgXCJ0ZXh0LWVuYWJsZWRcIjogXCJ0cnVlXCIgfSkpKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuICgnJyk7XG4gICAgfVxuICB9XG4gIGdldEFjY29yZGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBsZXQgY29udGVudCA9IHNlbGYuX2dldENvbnRlbnQoKTtcbiAgICAgIEJhc2VVdGlsLkxvZygnZ2V0QWNjb3JkaW9uJywgY29udGVudCwgc2VsZi5zdFNob3dEZWZhdWx0KTtcbiAgICAgIGNvbnN0IHNOYW1lID0gc2VsZi5zdERpc3BsYXlOYW1lO1xuICAgICAgY29uc3QgaWNvbk5hbWUgPSBzZWxmLmNhbGNpdGVpY29uIHx8ICcnO1xuICAgICAgY29uc3QgbGlzdEl0ZW1UZXh0VW5kZXJsaW5lZCA9IHtcbiAgICAgICAgJ3RleHQtZGVjb3JhdGlvbic6ICd1bmRlcmxpbmUnXG4gICAgICB9O1xuICAgICAgaWYgKHNlbGYuc3RTaG93Q2hlY2tib3hlcykge1xuICAgICAgICBsZXQgYW55Q2hlY2tlZCA9IFtdO1xuICAgICAgICBpZiAoc2VsZi5zdENvbnRlbnQ/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbnlDaGVja2VkID0gc2VsZi5zdENvbnRlbnQuc29tZSgob2JqKSA9PiBvYmouaXNDaGVja2VkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYWluQ2hlY2tTdHlsZSA9IHtcbiAgICAgICAgICAnbWFyZ2luJzogJy0ycHggLTRweCAwcHggNXB4JyxcbiAgICAgICAgICAnd2lkdGgnOiAnMTZweCcsXG4gICAgICAgICAgJ2hlaWdodCc6ICcxNnB4JyxcbiAgICAgICAgICAncG9zaXRpb24nOiAncmVsYXRpdmUnLFxuICAgICAgICAgICdsZWZ0JzogJzVweCcsXG4gICAgICAgICAgJ3RvcCc6ICcycHgnXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGxpc3RDaGVja1N0eWxlID0ge1xuICAgICAgICAgICdtYXJnaW4nOiAnLTRweCAwcHggMHB4IC00cHgnLFxuICAgICAgICAgICd3aWR0aCc6ICcxNXB4JyxcbiAgICAgICAgICAnaGVpZ2h0JzogJzEzcHgnXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAoaChcImNhbGNpdGUtYWNjb3JkaW9uXCIsIHsgYXBwZWFyYW5jZTogXCJzb2xpZFwiLCBcImljb24tcG9zaXRpb25cIjogXCJlbmRcIiB9LCBoKFwiY2FsY2l0ZS1hY2NvcmRpb24taXRlbVwiLCB7IHNjYWxlOiBcInNcIiwgaGVhZGluZzogc05hbWUgfSwgaChcImNhbGNpdGUtY2hlY2tib3hcIiwgeyBzbG90OiBcImFjdGlvbnMtc3RhcnRcIiwgc3R5bGU6IG1haW5DaGVja1N0eWxlLCBuYW1lOiAnU2VsZWN0IEFsbCcsIHZhbHVlOiBcImFsbFwiLCBjaGVja2VkOiBhbnlDaGVja2VkLCBvbkNsaWNrOiBzZWxmLm9uQ2hlY2tBbGxDaGFuZ2VkIH0pLCBoKFwiY2FsY2l0ZS1saXN0XCIsIG51bGwsIGNvbnRlbnRcbiAgICAgICAgICA/IGNvbnRlbnQubWFwKCh7IGlkLCBuYW1lLCBzdWJUZXh0IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjY0xpc3RJdGVtSWQgPSBpZCArICctYWNjLWl0ZW0nO1xuICAgICAgICAgICAgY29uc3QgaXNEZWZhdWx0ID0gaWQgPT0gdGhpcy5zdERlZmF1bHRSZXBvcnRJZDtcbiAgICAgICAgICAgIGNvbnN0IGRlZlN0eWxlID0gKGlzRGVmYXVsdCkgPyBsaXN0SXRlbVRleHRVbmRlcmxpbmVkIDogJyc7XG4gICAgICAgICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWxpc3QtaXRlbVwiLCB7IGlkOiBhY2NMaXN0SXRlbUlkLCBsYWJlbDogbmFtZSwgZGF0YTogaWQsIGRlc2NyaXB0aW9uOiBzdWJUZXh0IHx8ICcnLCBzdHlsZTogZGVmU3R5bGUgfSwgaChcImNhbGNpdGUtY2hlY2tib3hcIiwgeyBzdHlsZTogbGlzdENoZWNrU3R5bGUsIG5hbWU6IG5hbWUsIFwiZGF0YS1ncm91cFwiOiBzZWxmLnJlcG9ydHNHcm91cElkLCB2YWx1ZTogaWQsIGlkOiBpZCwgc2xvdDogXCJhY3Rpb25zLXN0YXJ0XCIsIGNoZWNrZWQ6IHNlbGYuc3RDb250ZW50ICYmIHNlbGYuc3RDb250ZW50LnNvbWUoKG9iaikgPT4gb2JqLmlkID09PSBpZCAmJiBvYmouaXNDaGVja2VkKSwgb25DbGljazogKGUpID0+IHNlbGYub25DaGVja2JveENoYW5nZWQoZS50YXJnZXQudmFsdWUpIH0pLCBzZWxmLnJlbmRlck1ha2VEZWZhdWx0VUkoaWQpKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICA6ICcnKSkpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWFjY29yZGlvblwiLCB7IGFwcGVhcmFuY2U6IFwic29saWRcIiwgXCJpY29uLXBvc2l0aW9uXCI6IFwiZW5kXCIgfSwgY29udGVudCA/XG4gICAgICAgICAgaChcImNhbGNpdGUtYWNjb3JkaW9uLWl0ZW1cIiwgeyBcImljb24tc3RhcnRcIjogaWNvbk5hbWUsIHNjYWxlOiBcInNcIiwgaGVhZGluZzogc05hbWUsIGV4cGFuZGVkOiBjb250ZW50LnNvbWUoKG9iaikgPT4gb2JqWydpZCddID09PSBzZWxmLnN0U2VsZWN0ZWRJZCkgPyB0cnVlIDogZmFsc2UgfSwgaChcImNhbGNpdGUtdHJlZVwiLCBudWxsLCBjb250ZW50XG4gICAgICAgICAgICA/IGNvbnRlbnQubWFwKCh7IGlkLCBuYW1lIH0pID0+IChoKFwiY2FsY2l0ZS10cmVlLWl0ZW1cIiwgeyBzdHlsZToge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc4cHggMCcsXG4gICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ3dyYXAnLFxuICAgICAgICAgICAgICAgIG92ZXJmbG93WDogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodDogJzEuMjVyZW0nLFxuICAgICAgICAgICAgICB9LCBkYXRhOiBpZCwgbGFiZWw6IG5hbWUsIHNlbGVjdGVkOiBpZCA9PT0gc2VsZi5zdFNlbGVjdGVkSWQgPyB0cnVlIDogZmFsc2UsIG9uY2xpY2s6IChlKSA9PiBzZWxmLm9uQ2xpY2tBY2NvcmRpb25JdGVtKGUsIHNlbGYsIHsgaWQ6IGlkLCBuYW1lOiBuYW1lIH0pIH0sIG5hbWUsIHNlbGYucmVuZGVyTWFrZURlZmF1bHRVSShpZCkpKSlcbiAgICAgICAgICAgIDogJycpKVxuICAgICAgICAgIDogJycpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICBCYXNlVXRpbC5FcnJvcignYmEtYWNjb3JkaW9uJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGNvbnRlbnQgPSBzZWxmLl9nZXRDb250ZW50KCk7XG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzUmVwb3J0ID0gc2VsZi5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3JlcG9ydExpc3QnKTtcbiAgICByZXR1cm4gKHRoaXMuZ2V0QWNjb3JkaW9uKCkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInNvdXJjZUNvdW50cnlcIjogW1wib25Tb3VyY2VDb3VudHJ5Q2hhbmdlZFwiXSxcbiAgICBcInNob3dEZWZhdWx0XCI6IFtcIm9uc2hvd0RlZmF1bHRDaGFuZ2VkXCJdLFxuICAgIFwiZGVmYXVsdFJlcG9ydElkXCI6IFtcIm9uRGVmYXVsdFJlcG9ydENoYW5nZWRcIl0sXG4gICAgXCJzdWdsaXRlXCI6IFtcIm9uU3VnbGl0ZUNoYW5nZWRcIl0sXG4gICAgXCJjb250ZW50XCI6IFtcIm9uQ29udGVudENoYW5nZWRcIl0sXG4gICAgXCJkaXNwbGF5bmFtZVwiOiBbXCJvbkFjY29yZGlvblRleHRDaGFuZ2VkXCJdLFxuICAgIFwic2VsZWN0ZWRJZFwiOiBbXCJvblNlbGVjdGVkSWRDaGFuZ2VkXCJdLFxuICAgIFwiZ3JvdXBpZFwiOiBbXCJvbkdyb3VwSWRDaGFuZ2VkXCJdLFxuICAgIFwiY29udGVudElubGluZVwiOiBbXCJvbkNvbnRlbnRJbmxpbmVDaGFuZ2VkXCJdLFxuICAgIFwic2hvd0NoZWNrYm94ZXNcIjogW1wiYWNjb3JkaW9uQ2hlY2tib3hDaGFuZ2VkXCJdXG4gIH07IH1cbn07XG5CYUFjY29yZGlvbi5zdHlsZSA9IGJhQWNjb3JkaW9uQ3NzO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgU0xPVFMgPSB7XG4gIGRyb3Bkb3duVHJpZ2dlcjogXCJ0cmlnZ2VyXCJcbn07XG5cbmNvbnN0IGRyb3Bkb3duQ3NzID0gXCJAa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBpbi1kb3duezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgLTVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tc2NhbGV7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNEKDAuOTUsIDAuOTUsIDEpfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNEKDEsIDEsIDEpfX06cm9vdHstLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZzpjYWxjKDE1MG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOnZhcigtLWNhbGNpdGUtZHVyYXRpb24tZmFjdG9yLCAxKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0OmNhbGMoMTAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bTpjYWxjKDIwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93OmNhbGMoMzAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpfS5jYWxjaXRlLWFuaW1hdGV7b3BhY2l0eTowO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKX0uY2FsY2l0ZS1hbmltYXRlX19pbnthbmltYXRpb24tbmFtZTppbn0uY2FsY2l0ZS1hbmltYXRlX19pbi1kb3due2FuaW1hdGlvbi1uYW1lOmluLWRvd259LmNhbGNpdGUtYW5pbWF0ZV9faW4tdXB7YW5pbWF0aW9uLW5hbWU6aW4tdXB9LmNhbGNpdGUtYW5pbWF0ZV9faW4tc2NhbGV7YW5pbWF0aW9uLW5hbWU6aW4tc2NhbGV9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2Upezpyb290ey0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6MH19OnJvb3R7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX06aG9zdChbZGlzYWJsZWRdKXtwb2ludGVyLWV2ZW50czpub25lO2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdHtkaXNwbGF5OmlubGluZS1mbGV4O2ZsZXg6MCAxIGF1dG99Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfTpob3N0IC5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJ7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXg6NjAwO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDp2YXIoLS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXgpO3Zpc2liaWxpdHk6aGlkZGVufS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXIgLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtZmxvYXRpbmctdWktdHJhbnNpdGlvbik7dHJhbnNpdGlvbi1wcm9wZXJ0eTp0cmFuc2Zvcm0sIHZpc2liaWxpdHksIG9wYWNpdHk7b3BhY2l0eTowO2JveC1zaGFkb3c6MCAwIDE2cHggMCByZ2JhKDAsIDAsIDAsIDAuMTYpO3otaW5kZXg6MTtib3JkZXItcmFkaXVzOjAuMjVyZW19LmNhbGNpdGUtZHJvcGRvd24td3JhcHBlcltkYXRhLXBsYWNlbWVudF49Ym90dG9tXSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmlte3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpfS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJbZGF0YS1wbGFjZW1lbnRePXRvcF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXt0cmFuc2Zvcm06dHJhbnNsYXRlWSg1cHgpfS5jYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJbZGF0YS1wbGFjZW1lbnRePWxlZnRdIC5jYWxjaXRlLWZsb2F0aW5nLXVpLWFuaW17dHJhbnNmb3JtOnRyYW5zbGF0ZVgoNXB4KX0uY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVyW2RhdGEtcGxhY2VtZW50Xj1yaWdodF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNXB4KX0uY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVyW2RhdGEtcGxhY2VtZW50XSAuY2FsY2l0ZS1mbG9hdGluZy11aS1hbmltLS1hY3RpdmV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUoMCl9Omhvc3QoW29wZW5dKSAuY2FsY2l0ZS1kcm9wZG93bi13cmFwcGVye3Zpc2liaWxpdHk6dmlzaWJsZX06aG9zdCAuY2FsY2l0ZS1kcm9wZG93bi1jb250ZW50e21heC1ibG9jay1zaXplOjQ1dmg7aW5saW5lLXNpemU6YXV0bztvdmVyZmxvdy15OmF1dG87b3ZlcmZsb3cteDpoaWRkZW47YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSk7aW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1kcm9wZG93bi13aWR0aCl9LmNhbGNpdGUtdHJpZ2dlci1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpmbGV4O2ZsZXg6MSAxIGF1dG99QG1lZGlhIChmb3JjZWQtY29sb3JzOiBhY3RpdmUpezpob3N0KFtvcGVuXSkgLmNhbGNpdGUtZHJvcGRvd24td3JhcHBlcntib3JkZXI6MXB4IHNvbGlkIGNhbnZhc1RleHR9fTpob3N0KFt3aWR0aD1zXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjEycmVtfTpob3N0KFt3aWR0aD1tXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjE0cmVtfTpob3N0KFt3aWR0aD1sXSl7LS1jYWxjaXRlLWRyb3Bkb3duLXdpZHRoOjE2cmVtfVwiO1xuXG5jb25zdCBEcm9wZG93biA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25TZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93blNlbGVjdFwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bkJlZm9yZUNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlRHJvcGRvd25CZWZvcmVDbG9zZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bkNsb3NlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlRHJvcGRvd25DbG9zZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVEcm9wZG93bkJlZm9yZU9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVEcm9wZG93bkJlZm9yZU9wZW5cIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25PcGVuID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlRHJvcGRvd25PcGVuXCIsIDYpO1xuICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB0aGlzLmdyb3VwcyA9IFtdO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwibXV0YXRpb25cIiwgKCkgPT4gdGhpcy51cGRhdGVJdGVtcygpKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKGVudHJpZXMpID0+IHRoaXMucmVzaXplT2JzZXJ2ZXJDYWxsYmFjayhlbnRyaWVzKSk7XG4gICAgdGhpcy5vcGVuVHJhbnNpdGlvblByb3AgPSBcIm9wYWNpdHlcIjtcbiAgICB0aGlzLmd1aWQgPSBgY2FsY2l0ZS1kcm9wZG93bi0ke2d1aWQoKX1gO1xuICAgIHRoaXMuZGVmYXVsdEFzc2lnbmVkRWxlbWVudHMgPSBbXTtcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5zbG90Q2hhbmdlSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5kZWZhdWx0QXNzaWduZWRFbGVtZW50cyA9IGV2ZW50LnRhcmdldC5hc3NpZ25lZEVsZW1lbnRzKHtcbiAgICAgICAgZmxhdHRlbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XG4gICAgfTtcbiAgICB0aGlzLnNldEZpbHRlcmVkUGxhY2VtZW50cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgZWwsIGZsaXBQbGFjZW1lbnRzIH0gPSB0aGlzO1xuICAgICAgdGhpcy5maWx0ZXJlZEZsaXBQbGFjZW1lbnRzID0gZmxpcFBsYWNlbWVudHNcbiAgICAgICAgPyBmaWx0ZXJDb21wdXRlZFBsYWNlbWVudHMoZmxpcFBsYWNlbWVudHMsIGVsKVxuICAgICAgICA6IG51bGw7XG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZVRyaWdnZXJzID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXJzID0gZXZlbnQudGFyZ2V0LmFzc2lnbmVkRWxlbWVudHMoe1xuICAgICAgICBmbGF0dGVuOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgICB9O1xuICAgIHRoaXMudXBkYXRlSXRlbXMgPSAoKSA9PiB7XG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5ncm91cHNcbiAgICAgICAgLm1hcCgoZ3JvdXApID0+IEFycmF5LmZyb20oZ3JvdXA/LnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLWRyb3Bkb3duLWl0ZW1cIikpKVxuICAgICAgICAucmVkdWNlKChwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpID0+IFsuLi5wcmV2aW91c1ZhbHVlLCAuLi5jdXJyZW50VmFsdWVdLCBbXSk7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMoKTtcbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgICB9O1xuICAgIHRoaXMudXBkYXRlR3JvdXBzID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBncm91cHMgPSBldmVudC50YXJnZXRcbiAgICAgICAgLmFzc2lnbmVkRWxlbWVudHMoeyBmbGF0dGVuOiB0cnVlIH0pXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtZHJvcGRvd24tZ3JvdXBcIikpO1xuICAgICAgdGhpcy5ncm91cHMgPSBncm91cHM7XG4gICAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XG4gICAgfTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyQ2FsbGJhY2sgPSAoZW50cmllcykgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZW50cnk7XG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRoaXMucmVmZXJlbmNlRWwpIHtcbiAgICAgICAgICB0aGlzLnNldERyb3Bkb3duV2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXQgPT09IHRoaXMuc2Nyb2xsZXJFbCkge1xuICAgICAgICAgIHRoaXMuc2V0TWF4U2Nyb2xsZXJIZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnNldERyb3Bkb3duV2lkdGggPSAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlZmVyZW5jZUVsLCBzY3JvbGxlckVsIH0gPSB0aGlzO1xuICAgICAgY29uc3QgcmVmZXJlbmNlRWxXaWR0aCA9IHJlZmVyZW5jZUVsPy5jbGllbnRXaWR0aDtcbiAgICAgIGlmICghcmVmZXJlbmNlRWxXaWR0aCB8fCAhc2Nyb2xsZXJFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzY3JvbGxlckVsLnN0eWxlLm1pbldpZHRoID0gYCR7cmVmZXJlbmNlRWxXaWR0aH1weGA7XG4gICAgfTtcbiAgICB0aGlzLnNldE1heFNjcm9sbGVySGVpZ2h0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgeyBzY3JvbGxlckVsIH0gPSB0aGlzO1xuICAgICAgaWYgKCFzY3JvbGxlckVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgICAgIGNvbnN0IG1heFNjcm9sbGVySGVpZ2h0ID0gdGhpcy5nZXRNYXhTY3JvbGxlckhlaWdodCgpO1xuICAgICAgc2Nyb2xsZXJFbC5zdHlsZS5tYXhIZWlnaHQgPSBtYXhTY3JvbGxlckhlaWdodCA+IDAgPyBgJHttYXhTY3JvbGxlckhlaWdodH1weGAgOiBcIlwiO1xuICAgICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xuICAgIH07XG4gICAgdGhpcy5zZXRTY3JvbGxlckFuZFRyYW5zaXRpb25FbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsKTtcbiAgICAgIHRoaXMuc2Nyb2xsZXJFbCA9IGVsO1xuICAgICAgdGhpcy50cmFuc2l0aW9uRWwgPSBlbDtcbiAgICAgIGNvbm5lY3RPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gICAgfTtcbiAgICB0aGlzLnNldFJlZmVyZW5jZUVsID0gKGVsKSA9PiB7XG4gICAgICB0aGlzLnJlZmVyZW5jZUVsID0gZWw7XG4gICAgICBjb25uZWN0RmxvYXRpbmdVSSh0aGlzLCB0aGlzLnJlZmVyZW5jZUVsLCB0aGlzLmZsb2F0aW5nRWwpO1xuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsKTtcbiAgICB9O1xuICAgIHRoaXMuc2V0RmxvYXRpbmdFbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5mbG9hdGluZ0VsID0gZWw7XG4gICAgICBjb25uZWN0RmxvYXRpbmdVSSh0aGlzLCB0aGlzLnJlZmVyZW5jZUVsLCB0aGlzLmZsb2F0aW5nRWwpO1xuICAgIH07XG4gICAgdGhpcy5rZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgaWYgKHRhcmdldCAhPT0gdGhpcy5yZWZlcmVuY2VFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRlZmF1bHRQcmV2ZW50ZWQsIGtleSB9ID0gZXZlbnQ7XG4gICAgICBpZiAoZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkgJiYga2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXNBY3RpdmF0aW9uS2V5KGtleSkpIHtcbiAgICAgICAgdGhpcy5vcGVuQ2FsY2l0ZURyb3Bkb3duKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChrZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5mb2N1c09uRmlyc3RBY3RpdmVPckZpcnN0SXRlbSA9ICgpID0+IHtcbiAgICAgIHRoaXMuZ2V0Rm9jdXNhYmxlRWxlbWVudCh0aGlzLml0ZW1zLmZpbmQoKGl0ZW0pID0+IGl0ZW0uc2VsZWN0ZWQpIHx8IHRoaXMuaXRlbXNbMF0pO1xuICAgIH07XG4gICAgdGhpcy50b2dnbGVPcGVuRW5kID0gKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c09uRmlyc3RBY3RpdmVPckZpcnN0SXRlbSgpO1xuICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FsY2l0ZURyb3Bkb3duT3BlblwiLCB0aGlzLnRvZ2dsZU9wZW5FbmQpO1xuICAgIH07XG4gICAgdGhpcy5vcGVuQ2FsY2l0ZURyb3Bkb3duID0gKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuID0gIXRoaXMub3BlbjtcbiAgICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiY2FsY2l0ZURyb3Bkb3duT3BlblwiLCB0aGlzLnRvZ2dsZU9wZW5FbmQpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zZU9uU2VsZWN0RGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5mbGlwUGxhY2VtZW50cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1heEl0ZW1zID0gMDtcbiAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZyA9IFwiYWJzb2x1dGVcIjtcbiAgICB0aGlzLnBsYWNlbWVudCA9IGRlZmF1bHRNZW51UGxhY2VtZW50O1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICB0aGlzLnR5cGUgPSBcImNsaWNrXCI7XG4gICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDtcbiAgfVxuICBvcGVuSGFuZGxlcih2YWx1ZSkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB1cGRhdGVBZnRlckNsb3NlKHRoaXMuZmxvYXRpbmdFbCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHVwZGF0ZUFmdGVyQ2xvc2UodGhpcy5mbG9hdGluZ0VsKTtcbiAgICB9XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gIH1cbiAgaGFuZGxlRGlzYWJsZWRDaGFuZ2UodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgZmxpcFBsYWNlbWVudHNIYW5kbGVyKCkge1xuICAgIHRoaXMuc2V0RmlsdGVyZWRQbGFjZW1lbnRzKCk7XG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xuICB9XG4gIG1heEl0ZW1zSGFuZGxlcigpIHtcbiAgICB0aGlzLnNldE1heFNjcm9sbGVySGVpZ2h0KCk7XG4gIH1cbiAgb3ZlcmxheVBvc2l0aW9uaW5nSGFuZGxlcigpIHtcbiAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XG4gIH1cbiAgcGxhY2VtZW50SGFuZGxlcigpIHtcbiAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIHRoaXMuc2V0RmlsdGVyZWRQbGFjZW1lbnRzKCk7XG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xuICAgIGlmICh0aGlzLm9wZW4pIHtcbiAgICAgIHRoaXMub3BlbkhhbmRsZXIodGhpcy5vcGVuKTtcbiAgICB9XG4gICAgY29ubmVjdE9wZW5DbG9zZUNvbXBvbmVudCh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIGRpc2Nvbm5lY3RGbG9hdGluZ1VJKHRoaXMsIHRoaXMucmVmZXJlbmNlRWwsIHRoaXMuZmxvYXRpbmdFbCk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIGRpc2Nvbm5lY3RPcGVuQ2xvc2VDb21wb25lbnQodGhpcyk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgb3BlbiwgZ3VpZCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImRpdlwiLCB7IGNsYXNzOiBcImNhbGNpdGUtdHJpZ2dlci1jb250YWluZXJcIiwgaWQ6IGAke2d1aWR9LW1lbnVidXR0b25gLCBvbkNsaWNrOiB0aGlzLm9wZW5DYWxjaXRlRHJvcGRvd24sIG9uS2V5RG93bjogdGhpcy5rZXlEb3duSGFuZGxlciwgcmVmOiB0aGlzLnNldFJlZmVyZW5jZUVsIH0sIGgoXCJzbG90XCIsIHsgXCJhcmlhLWNvbnRyb2xzXCI6IGAke2d1aWR9LW1lbnVgLCBcImFyaWEtZXhwYW5kZWRcIjogdG9BcmlhQm9vbGVhbihvcGVuKSwgXCJhcmlhLWhhc3BvcHVwXCI6IFwibWVudVwiLCBuYW1lOiBTTE9UUy5kcm9wZG93blRyaWdnZXIsIG9uU2xvdGNoYW5nZTogdGhpcy51cGRhdGVUcmlnZ2VycyB9KSksIGgoXCJkaXZcIiwgeyBcImFyaWEtaGlkZGVuXCI6IHRvQXJpYUJvb2xlYW4oIW9wZW4pLCBjbGFzczogXCJjYWxjaXRlLWRyb3Bkb3duLXdyYXBwZXJcIiwgcmVmOiB0aGlzLnNldEZsb2F0aW5nRWwgfSwgaChcImRpdlwiLCB7IFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGAke2d1aWR9LW1lbnVidXR0b25gLCBjbGFzczoge1xuICAgICAgICBbXCJjYWxjaXRlLWRyb3Bkb3duLWNvbnRlbnRcIl06IHRydWUsXG4gICAgICAgIFtGbG9hdGluZ0NTUy5hbmltYXRpb25dOiB0cnVlLFxuICAgICAgICBbRmxvYXRpbmdDU1MuYW5pbWF0aW9uQWN0aXZlXTogb3BlblxuICAgICAgfSwgaWQ6IGAke2d1aWR9LW1lbnVgLCByZWY6IHRoaXMuc2V0U2Nyb2xsZXJBbmRUcmFuc2l0aW9uRWwsIHJvbGU6IFwibWVudVwiIH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLnVwZGF0ZUdyb3VwcyB9KSkpKSk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIGRlbGF5ZWRcbiAgICovXG4gIGFzeW5jIHJlcG9zaXRpb24oZGVsYXllZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgeyBmbG9hdGluZ0VsLCByZWZlcmVuY2VFbCwgcGxhY2VtZW50LCBvdmVybGF5UG9zaXRpb25pbmcsIGZpbHRlcmVkRmxpcFBsYWNlbWVudHMgfSA9IHRoaXM7XG4gICAgcmV0dXJuIHJlcG9zaXRpb24odGhpcywge1xuICAgICAgZmxvYXRpbmdFbCxcbiAgICAgIHJlZmVyZW5jZUVsLFxuICAgICAgb3ZlcmxheVBvc2l0aW9uaW5nLFxuICAgICAgcGxhY2VtZW50LFxuICAgICAgZmxpcFBsYWNlbWVudHM6IGZpbHRlcmVkRmxpcFBsYWNlbWVudHMsXG4gICAgICB0eXBlOiBcIm1lbnVcIlxuICAgIH0sIGRlbGF5ZWQpO1xuICB9XG4gIGNsb3NlQ2FsY2l0ZURyb3Bkb3duT25DbGljayhldmVudCkge1xuICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkgfHwgIXRoaXMub3BlbiB8fCBldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKGZhbHNlKTtcbiAgfVxuICBjbG9zZUNhbGNpdGVEcm9wZG93bk9uRXZlbnQoZXZlbnQpIHtcbiAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgY2xvc2VDYWxjaXRlRHJvcGRvd25Pbk9wZW5FdmVudChldmVudCkge1xuICAgIGlmIChldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgfVxuICBtb3VzZUVudGVySGFuZGxlcigpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSBcImhvdmVyXCIpIHtcbiAgICAgIHRoaXMub3BlbkNhbGNpdGVEcm9wZG93bigpO1xuICAgIH1cbiAgfVxuICBtb3VzZUxlYXZlSGFuZGxlcigpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSBcImhvdmVyXCIpIHtcbiAgICAgIHRoaXMuY2xvc2VDYWxjaXRlRHJvcGRvd24oKTtcbiAgICB9XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCB7IGtleWJvYXJkRXZlbnQgfSA9IGV2ZW50LmRldGFpbDtcbiAgICBjb25zdCB0YXJnZXQgPSBrZXlib2FyZEV2ZW50LnRhcmdldDtcbiAgICBzd2l0Y2ggKGtleWJvYXJkRXZlbnQua2V5KSB7XG4gICAgICBjYXNlIFwiVGFiXCI6XG4gICAgICAgIGlmICh0aGlzLml0ZW1zLmluZGV4T2YodGFyZ2V0KSA9PT0gdGhpcy5pdGVtcy5sZW5ndGggLSAxICYmICFrZXlib2FyZEV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXRlbXMuaW5kZXhPZih0YXJnZXQpID09PSAwICYmIGtleWJvYXJkRXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlQ2FsY2l0ZURyb3Bkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAodGhpcy5pdGVtcywgdGFyZ2V0LCBcIm5leHRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgZm9jdXNFbGVtZW50SW5Hcm91cCh0aGlzLml0ZW1zLCB0YXJnZXQsIFwicHJldmlvdXNcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkhvbWVcIjpcbiAgICAgICAgZm9jdXNFbGVtZW50SW5Hcm91cCh0aGlzLml0ZW1zLCB0YXJnZXQsIFwiZmlyc3RcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkVuZFwiOlxuICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKHRoaXMuaXRlbXMsIHRhcmdldCwgXCJsYXN0XCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgaGFuZGxlSXRlbVNlbGVjdChldmVudCkge1xuICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRJdGVtcygpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuY2FsY2l0ZURyb3Bkb3duU2VsZWN0LmVtaXQoKTtcbiAgICBpZiAoIXRoaXMuY2xvc2VPblNlbGVjdERpc2FibGVkIHx8XG4gICAgICBldmVudC5kZXRhaWwucmVxdWVzdGVkRHJvcGRvd25Hcm91cC5zZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIikge1xuICAgICAgdGhpcy5jbG9zZUNhbGNpdGVEcm9wZG93bigpO1xuICAgIH1cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICBvbkJlZm9yZU9wZW4oKSB7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25CZWZvcmVPcGVuLmVtaXQoKTtcbiAgfVxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25PcGVuLmVtaXQoKTtcbiAgfVxuICBvbkJlZm9yZUNsb3NlKCkge1xuICAgIHRoaXMuY2FsY2l0ZURyb3Bkb3duQmVmb3JlQ2xvc2UuZW1pdCgpO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25DbG9zZS5lbWl0KCk7XG4gIH1cbiAgdXBkYXRlU2VsZWN0ZWRJdGVtcygpIHtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zZWxlY3RlZCk7XG4gIH1cbiAgZ2V0TWF4U2Nyb2xsZXJIZWlnaHQoKSB7XG4gICAgY29uc3QgeyBtYXhJdGVtcywgaXRlbXMgfSA9IHRoaXM7XG4gICAgbGV0IGl0ZW1zVG9Qcm9jZXNzID0gMDtcbiAgICBsZXQgbWF4U2Nyb2xsZXJIZWlnaHQgPSAwO1xuICAgIGxldCBncm91cEhlYWRlckhlaWdodDtcbiAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgaWYgKG1heEl0ZW1zID4gMCAmJiBpdGVtc1RvUHJvY2VzcyA8IG1heEl0ZW1zKSB7XG4gICAgICAgIEFycmF5LmZyb20oZ3JvdXAuY2hpbGRyZW4pLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oZ3JvdXBIZWFkZXJIZWlnaHQpKSB7XG4gICAgICAgICAgICAgIGdyb3VwSGVhZGVySGVpZ2h0ID0gaXRlbS5vZmZzZXRUb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXhTY3JvbGxlckhlaWdodCArPSBncm91cEhlYWRlckhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW1zVG9Qcm9jZXNzIDwgbWF4SXRlbXMpIHtcbiAgICAgICAgICAgIG1heFNjcm9sbGVySGVpZ2h0ICs9IGl0ZW0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgaXRlbXNUb1Byb2Nlc3MgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpdGVtcy5sZW5ndGggPiBtYXhJdGVtcyA/IG1heFNjcm9sbGVySGVpZ2h0IDogMDtcbiAgfVxuICBjbG9zZUNhbGNpdGVEcm9wZG93bihmb2N1c1RyaWdnZXIgPSB0cnVlKSB7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgaWYgKGZvY3VzVHJpZ2dlcikge1xuICAgICAgZm9jdXNFbGVtZW50KHRoaXMudHJpZ2dlcnNbMF0pO1xuICAgIH1cbiAgfVxuICBnZXRGb2N1c2FibGVFbGVtZW50KGl0ZW0pIHtcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gaXRlbS5hdHRyaWJ1dGVzLmlzTGlua1xuICAgICAgPyBpdGVtLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImFcIilcbiAgICAgIDogaXRlbTtcbiAgICBmb2N1c0VsZW1lbnQodGFyZ2V0KTtcbiAgfVxuICBzdGF0aWMgZ2V0IGRlbGVnYXRlc0ZvY3VzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJvcGVuXCI6IFtcIm9wZW5IYW5kbGVyXCJdLFxuICAgIFwiZGlzYWJsZWRcIjogW1wiaGFuZGxlRGlzYWJsZWRDaGFuZ2VcIl0sXG4gICAgXCJmbGlwUGxhY2VtZW50c1wiOiBbXCJmbGlwUGxhY2VtZW50c0hhbmRsZXJcIl0sXG4gICAgXCJtYXhJdGVtc1wiOiBbXCJtYXhJdGVtc0hhbmRsZXJcIl0sXG4gICAgXCJvdmVybGF5UG9zaXRpb25pbmdcIjogW1wib3ZlcmxheVBvc2l0aW9uaW5nSGFuZGxlclwiXSxcbiAgICBcInBsYWNlbWVudFwiOiBbXCJwbGFjZW1lbnRIYW5kbGVyXCJdXG4gIH07IH1cbn07XG5Ecm9wZG93bi5zdHlsZSA9IGRyb3Bkb3duQ3NzO1xuXG4vKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Jsb2IvbWFzdGVyL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4wLjVcbiAqL1xuY29uc3QgQ1NTJDEgPSB7XG4gIGNvbnRhaW5lclNtYWxsOiBcImNvbnRhaW5lci0tc1wiLFxuICBjb250YWluZXJNZWRpdW06IFwiY29udGFpbmVyLS1tXCIsXG4gIGNvbnRhaW5lckxhcmdlOiBcImNvbnRhaW5lci0tbFwiXG59O1xuXG5jb25zdCBkcm9wZG93bkdyb3VwQ3NzID0gXCJAa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH0xMDAle29wYWNpdHk6MX19QGtleWZyYW1lcyBpbi1kb3duezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgLTVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgNXB4LCAwKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM0QoMCwgMCwgMCl9fUBrZXlmcmFtZXMgaW4tc2NhbGV7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNEKDAuOTUsIDAuOTUsIDEpfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNEKDEsIDEsIDEpfX06cm9vdHstLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZzpjYWxjKDE1MG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOnZhcigtLWNhbGNpdGUtZHVyYXRpb24tZmFjdG9yLCAxKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1mYXN0OmNhbGMoMTAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpOy0tY2FsY2l0ZS1pbnRlcm5hbC1hbmltYXRpb24tdGltaW5nLW1lZGl1bTpjYWxjKDIwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93OmNhbGMoMzAwbXMgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3RvcikpfS5jYWxjaXRlLWFuaW1hdGV7b3BhY2l0eTowO2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aDthbmltYXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKX0uY2FsY2l0ZS1hbmltYXRlX19pbnthbmltYXRpb24tbmFtZTppbn0uY2FsY2l0ZS1hbmltYXRlX19pbi1kb3due2FuaW1hdGlvbi1uYW1lOmluLWRvd259LmNhbGNpdGUtYW5pbWF0ZV9faW4tdXB7YW5pbWF0aW9uLW5hbWU6aW4tdXB9LmNhbGNpdGUtYW5pbWF0ZV9faW4tc2NhbGV7YW5pbWF0aW9uLW5hbWU6aW4tc2NhbGV9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2Upezpyb290ey0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3I6MH19OnJvb3R7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTstLWNhbGNpdGUtZmxvYXRpbmctdWktei1pbmRleDo2MDB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX06aG9zdHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrfS5jb250YWluZXJ7dGV4dC1hbGlnbjpzdGFydH0uY29udGFpbmVyLS1ze2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjAuNXJlbX0uY29udGFpbmVyLS1te2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjAuNzVyZW19LmNvbnRhaW5lci0tbHtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtMCk7bGluZS1oZWlnaHQ6MS4yNXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi10aXRsZXtwYWRkaW5nOjFyZW19LmRyb3Bkb3duLXRpdGxle21hcmdpbi1ibG9jay1lbmQ6LTFweDtkaXNwbGF5OmJsb2NrO2N1cnNvcjpkZWZhdWx0O292ZXJmbG93LXdyYXA6YnJlYWstd29yZDtib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMyk7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1ib2xkKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9LmRyb3Bkb3duLXNlcGFyYXRvcntkaXNwbGF5OmJsb2NrO2Jsb2NrLXNpemU6MXB4O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMyl9XCI7XG5cbmNvbnN0IERyb3Bkb3duR3JvdXAgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1DaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5ncm91cFRpdGxlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2VsZWN0aW9uTW9kZSA9IFwic2luZ2xlXCI7XG4gICAgdGhpcy5zY2FsZSA9IHVuZGVmaW5lZDtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmdyb3VwUG9zaXRpb24gPSB0aGlzLmdldEdyb3VwUG9zaXRpb24oKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlIHx8IGdldEVsZW1lbnRQcm9wKHRoaXMuZWwsIFwic2NhbGVcIiwgXCJtXCIpO1xuICAgIGNvbnN0IGdyb3VwVGl0bGUgPSB0aGlzLmdyb3VwVGl0bGUgPyAoaChcInNwYW5cIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogXCJkcm9wZG93bi10aXRsZVwiIH0sIHRoaXMuZ3JvdXBUaXRsZSkpIDogbnVsbDtcbiAgICBjb25zdCBkcm9wZG93blNlcGFyYXRvciA9IHRoaXMuZ3JvdXBQb3NpdGlvbiA+IDAgPyBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZHJvcGRvd24tc2VwYXJhdG9yXCIsIHJvbGU6IFwic2VwYXJhdG9yXCIgfSkgOiBudWxsO1xuICAgIHJldHVybiAoaChIb3N0LCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLmdyb3VwVGl0bGUsIHJvbGU6IFwiZ3JvdXBcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgY29udGFpbmVyOiB0cnVlLFxuICAgICAgICBbQ1NTJDEuY29udGFpbmVyU21hbGxdOiBzY2FsZSA9PT0gXCJzXCIsXG4gICAgICAgIFtDU1MkMS5jb250YWluZXJNZWRpdW1dOiBzY2FsZSA9PT0gXCJtXCIsXG4gICAgICAgIFtDU1MkMS5jb250YWluZXJMYXJnZV06IHNjYWxlID09PSBcImxcIlxuICAgICAgfSwgdGl0bGU6IHRoaXMuZ3JvdXBUaXRsZSB9LCBkcm9wZG93blNlcGFyYXRvciwgZ3JvdXBUaXRsZSwgaChcInNsb3RcIiwgbnVsbCkpKSk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgRXZlbnQgTGlzdGVuZXJzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgdXBkYXRlQWN0aXZlSXRlbU9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkdyb3VwID0gZXZlbnQuZGV0YWlsLnJlcXVlc3RlZERyb3Bkb3duR3JvdXA7XG4gICAgdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkl0ZW0gPSBldmVudC5kZXRhaWwucmVxdWVzdGVkRHJvcGRvd25JdGVtO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtQ2hhbmdlLmVtaXQoe1xuICAgICAgcmVxdWVzdGVkRHJvcGRvd25Hcm91cDogdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkdyb3VwLFxuICAgICAgcmVxdWVzdGVkRHJvcGRvd25JdGVtOiB0aGlzLnJlcXVlc3RlZERyb3Bkb3duSXRlbVxuICAgIH0pO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGdldEdyb3VwUG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcy5lbC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLWRyb3Bkb3duLWdyb3VwXCIpLCB0aGlzLmVsKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGRlbGVnYXRlc0ZvY3VzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuRHJvcGRvd25Hcm91cC5zdHlsZSA9IGRyb3Bkb3duR3JvdXBDc3M7XG5cbi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvYmxvYi9tYXN0ZXIvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjAuNVxuICovXG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lckxpbms6IFwiY29udGFpbmVyLS1saW5rXCIsXG4gIGNvbnRhaW5lclNtYWxsOiBcImNvbnRhaW5lci0tc1wiLFxuICBjb250YWluZXJNZWRpdW06IFwiY29udGFpbmVyLS1tXCIsXG4gIGNvbnRhaW5lckxhcmdlOiBcImNvbnRhaW5lci0tbFwiLFxuICBjb250YWluZXJNdWx0aTogXCJjb250YWluZXItLW11bHRpLXNlbGVjdGlvblwiLFxuICBjb250YWluZXJTaW5nbGU6IFwiY29udGFpbmVyLS1zaW5nbGUtc2VsZWN0aW9uXCIsXG4gIGNvbnRhaW5lck5vbmU6IFwiY29udGFpbmVyLS1ub25lLXNlbGVjdGlvblwiLFxuICBpY29uOiBcImRyb3Bkb3duLWl0ZW0taWNvblwiLFxuICBpY29uRW5kOiBcImRyb3Bkb3duLWl0ZW0taWNvbi1lbmRcIixcbiAgaWNvblN0YXJ0OiBcImRyb3Bkb3duLWl0ZW0taWNvbi1zdGFydFwiLFxuICBpdGVtQ29udGVudDogXCJkcm9wZG93bi1pdGVtLWNvbnRlbnRcIixcbiAgbGluazogXCJkcm9wZG93bi1saW5rXCJcbn07XG5cbmNvbnN0IGRyb3Bkb3duSXRlbUNzcyA9IFwiQGtleWZyYW1lcyBpbnswJXtvcGFjaXR5OjB9MTAwJXtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgaW4tZG93bnswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIC01cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi11cHswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXNjYWxlezAle29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUzRCgwLjk1LCAwLjk1LCAxKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUzRCgxLCAxLCAxKX19OnJvb3R7LS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmc6Y2FsYygxNTBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3Rvcjp2YXIoLS1jYWxjaXRlLWR1cmF0aW9uLWZhY3RvciwgMSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctZmFzdDpjYWxjKDEwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW06Y2FsYygyMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctc2xvdzpjYWxjKDMwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKX0uY2FsY2l0ZS1hbmltYXRle29wYWNpdHk6MDthbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9LmNhbGNpdGUtYW5pbWF0ZV9faW57YW5pbWF0aW9uLW5hbWU6aW59LmNhbGNpdGUtYW5pbWF0ZV9faW4tZG93bnthbmltYXRpb24tbmFtZTppbi1kb3dufS5jYWxjaXRlLWFuaW1hdGVfX2luLXVwe2FuaW1hdGlvbi1uYW1lOmluLXVwfS5jYWxjaXRlLWFuaW1hdGVfX2luLXNjYWxle2FuaW1hdGlvbi1uYW1lOmluLXNjYWxlfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKXs6cm9vdHstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOjB9fTpyb290ey0tY2FsY2l0ZS1mbG9hdGluZy11aS10cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyk7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXg6NjAwfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9LmNvbnRhaW5lci0tc3twYWRkaW5nLWJsb2NrOjAuMjVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtsaW5lLWhlaWdodDoxcmVtO3BhZGRpbmctaW5saW5lLWVuZDowLjVyZW07cGFkZGluZy1pbmxpbmUtc3RhcnQ6MS41cmVtfS5jb250YWluZXItLW17cGFkZGluZy1ibG9jazowLjVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtsaW5lLWhlaWdodDoxcmVtO3BhZGRpbmctaW5saW5lLWVuZDowLjc1cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjJyZW19LmNvbnRhaW5lci0tbHtwYWRkaW5nLWJsb2NrOjAuNjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDoxcmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjIuNXJlbX0uY29udGFpbmVyLS1zLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb257cGFkZGluZy1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1zLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb24gLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1pbmxpbmUtc3RhcnQ6MHB4fS5jb250YWluZXItLW0uY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbntwYWRkaW5nLWlubGluZS1zdGFydDowLjVyZW19LmNvbnRhaW5lci0tbS5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uIC5kcm9wZG93bi1saW5re3BhZGRpbmctaW5saW5lLXN0YXJ0OjBweH0uY29udGFpbmVyLS1sLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb257cGFkZGluZy1pbmxpbmUtc3RhcnQ6MC43NXJlbX0uY29udGFpbmVyLS1sLmNvbnRhaW5lci0tbm9uZS1zZWxlY3Rpb24gLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1pbmxpbmUtc3RhcnQ6MHB4fTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTthbGlnbi1pdGVtczpjZW50ZXJ9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleC1ncm93OjE7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKTt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lO3RyYW5zaXRpb24tZHVyYXRpb246MTUwbXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTt0ZXh0LWFsaWduOnN0YXJ0fS5kcm9wZG93bi1pdGVtLWNvbnRlbnR7ZmxleDoxIDEgYXV0bztwYWRkaW5nLWJsb2NrOjAuMTI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDphdXRvO3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuMjVyZW19Omhvc3QsLmNvbnRhaW5lci0tbGluayBhe291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnR9Omhvc3QoOmZvY3VzKXtvdXRsaW5lOjJweCBzb2xpZCB0cmFuc3BhcmVudDtvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKTtvdXRsaW5lLW9mZnNldDotMnB4fS5jb250YWluZXItLWxpbmt7cGFkZGluZzowcHh9LmNvbnRhaW5lci0tbGluayBhe3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpO3RleHQtZGVjb3JhdGlvbi1saW5lOm5vbmU7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpfS5jb250YWluZXItLXMgLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1ibG9jazowLjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbTtwYWRkaW5nLWlubGluZS1lbmQ6MC41cmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjEuNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1saW5re3BhZGRpbmctYmxvY2s6MC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbTtwYWRkaW5nLWlubGluZS1lbmQ6MC43NXJlbTtwYWRkaW5nLWlubGluZS1zdGFydDoycmVtfS5jb250YWluZXItLWwgLmRyb3Bkb3duLWxpbmt7cGFkZGluZy1ibG9jazowLjc1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO3BhZGRpbmctaW5saW5lLWVuZDoxcmVtO3BhZGRpbmctaW5saW5lLXN0YXJ0OjIuNXJlbX06aG9zdCg6aG92ZXIpIC5jb250YWluZXIsOmhvc3QoOmFjdGl2ZSkgLmNvbnRhaW5lcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7dGV4dC1kZWNvcmF0aW9uLWxpbmU6bm9uZX06aG9zdCg6aG92ZXIpIC5jb250YWluZXItLWxpbmsgLmRyb3Bkb3duLWxpbmssOmhvc3QoOmFjdGl2ZSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGlua3tjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSl9Omhvc3QoOmZvY3VzKSAuY29udGFpbmVye2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTt0ZXh0LWRlY29yYXRpb24tbGluZTpub25lfTpob3N0KDphY3RpdmUpIC5jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyl9Omhvc3QoOmhvdmVyKSAuY29udGFpbmVyOmJlZm9yZSw6aG9zdCg6YWN0aXZlKSAuY29udGFpbmVyOmJlZm9yZSw6aG9zdCg6Zm9jdXMpIC5jb250YWluZXI6YmVmb3Jle29wYWNpdHk6MX06aG9zdChbc2VsZWN0ZWRdKSAuY29udGFpbmVyOm5vdCguY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbiksOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGlua3tmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTEpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXI6bm90KC5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uKTpiZWZvcmUsOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGluazpiZWZvcmV7b3BhY2l0eToxO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXI6bm90KC5jb250YWluZXItLW5vbmUtc2VsZWN0aW9uKSBjYWxjaXRlLWljb24sOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tbGluayAuZHJvcGRvd24tbGluayBjYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LmNvbnRhaW5lci0tbXVsdGktc2VsZWN0aW9uOmJlZm9yZSwuY29udGFpbmVyLS1ub25lLXNlbGVjdGlvbjpiZWZvcmV7ZGlzcGxheTpub25lfS5jb250YWluZXItLXM6YmVmb3Jle2luc2V0LWlubGluZS1zdGFydDowLjVyZW19LmNvbnRhaW5lci0tbTpiZWZvcmV7aW5zZXQtaW5saW5lLXN0YXJ0OjAuNzVyZW19LmNvbnRhaW5lci0tbDpiZWZvcmV7aW5zZXQtaW5saW5lLXN0YXJ0OjFyZW19LmRyb3Bkb3duLWl0ZW0taWNvbntwb3NpdGlvbjphYnNvbHV0ZTtvcGFjaXR5OjA7dHJhbnNpdGlvbi1kdXJhdGlvbjoxNTBtczt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO3RyYW5zZm9ybTpzY2FsZSgwLjkpfS5jb250YWluZXItLXMgLmRyb3Bkb3duLWl0ZW0taWNvbntpbnNldC1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1pdGVtLWljb257aW5zZXQtaW5saW5lLXN0YXJ0OjAuNXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi1pdGVtLWljb257aW5zZXQtaW5saW5lLXN0YXJ0OjAuNzVyZW19Omhvc3QoOmhvdmVyKSAuZHJvcGRvd24taXRlbS1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTEpO29wYWNpdHk6MX06aG9zdChbc2VsZWN0ZWRdKSAuZHJvcGRvd24taXRlbS1pY29ue2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpO29wYWNpdHk6MX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi1pdGVtLWljb24tc3RhcnR7bWFyZ2luLWlubGluZS1lbmQ6MC41cmVtO21hcmdpbi1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1zIC5kcm9wZG93bi1pdGVtLWljb24tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6MC41cmVtfS5jb250YWluZXItLW0gLmRyb3Bkb3duLWl0ZW0taWNvbi1zdGFydHttYXJnaW4taW5saW5lLWVuZDowLjc1cmVtO21hcmdpbi1pbmxpbmUtc3RhcnQ6MC4yNXJlbX0uY29udGFpbmVyLS1tIC5kcm9wZG93bi1pdGVtLWljb24tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6MC43NXJlbX0uY29udGFpbmVyLS1sIC5kcm9wZG93bi1pdGVtLWljb24tc3RhcnR7bWFyZ2luLWlubGluZS1lbmQ6MXJlbTttYXJnaW4taW5saW5lLXN0YXJ0OjAuMjVyZW19LmNvbnRhaW5lci0tbCAuZHJvcGRvd24taXRlbS1pY29uLWVuZHttYXJnaW4taW5saW5lLXN0YXJ0OjFyZW19XCI7XG5cbmNvbnN0IERyb3Bkb3duSXRlbSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25JdGVtU2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlRHJvcGRvd25JdGVtU2VsZWN0XCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtU2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1TZWxlY3RcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1LZXlFdmVudCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnRcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkNsb3NlUmVxdWVzdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsRHJvcGRvd25DbG9zZVJlcXVlc3RcIiwgNik7XG4gICAgLyoqIFNwZWNpZmllcyB0aGUgc2NhbGUgb2YgZHJvcGRvd24taXRlbSBjb250cm9sbGVkIGJ5IHRoZSBwYXJlbnQsIGRlZmF1bHRzIHRvIG0gKi9cbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuaWNvbkZsaXBSdGwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pY29uU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pY29uRW5kID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaHJlZiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhYmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudGFyZ2V0ID0gdW5kZWZpbmVkO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqIFNldHMgZm9jdXMgb24gdGhlIGNvbXBvbmVudC4gKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICAgIHRoaXMuZWw/LmZvY3VzKCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2NhbGUgPSBnZXRFbGVtZW50UHJvcCh0aGlzLmVsLCBcInNjYWxlXCIsIHRoaXMuc2NhbGUpO1xuICAgIGNvbnN0IGljb25TdGFydEVsID0gKGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogQ1NTLmljb25TdGFydCwgZmxpcFJ0bDogdGhpcy5pY29uRmxpcFJ0bCA9PT0gXCJzdGFydFwiIHx8IHRoaXMuaWNvbkZsaXBSdGwgPT09IFwiYm90aFwiLCBpY29uOiB0aGlzLmljb25TdGFydCwgc2NhbGU6IHNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCIgfSkpO1xuICAgIGNvbnN0IGNvbnRlbnROb2RlID0gKGgoXCJzcGFuXCIsIHsgY2xhc3M6IENTUy5pdGVtQ29udGVudCB9LCBoKFwic2xvdFwiLCBudWxsKSkpO1xuICAgIGNvbnN0IGljb25FbmRFbCA9IChoKFwiY2FsY2l0ZS1pY29uXCIsIHsgY2xhc3M6IENTUy5pY29uRW5kLCBmbGlwUnRsOiB0aGlzLmljb25GbGlwUnRsID09PSBcImVuZFwiIHx8IHRoaXMuaWNvbkZsaXBSdGwgPT09IFwiYm90aFwiLCBpY29uOiB0aGlzLmljb25FbmQsIHNjYWxlOiBzY2FsZSA9PT0gXCJsXCIgPyBcIm1cIiA6IFwic1wiIH0pKTtcbiAgICBjb25zdCBzbG90dGVkQ29udGVudCA9IHRoaXMuaWNvblN0YXJ0ICYmIHRoaXMuaWNvbkVuZFxuICAgICAgPyBbaWNvblN0YXJ0RWwsIGNvbnRlbnROb2RlLCBpY29uRW5kRWxdXG4gICAgICA6IHRoaXMuaWNvblN0YXJ0XG4gICAgICAgID8gW2ljb25TdGFydEVsLCBjb250ZW50Tm9kZV1cbiAgICAgICAgOiB0aGlzLmljb25FbmRcbiAgICAgICAgICA/IFtjb250ZW50Tm9kZSwgaWNvbkVuZEVsXVxuICAgICAgICAgIDogY29udGVudE5vZGU7XG4gICAgY29uc3QgY29udGVudEVsID0gIXRoaXMuaHJlZiA/IChzbG90dGVkQ29udGVudCkgOiAoaChcImFcIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5sYWJlbCwgY2xhc3M6IENTUy5saW5rLCBocmVmOiB0aGlzLmhyZWYsIHJlZjogKGVsKSA9PiAodGhpcy5jaGlsZExpbmsgPSBlbCksIHJlbDogdGhpcy5yZWwsIHRhYkluZGV4OiAtMSwgdGFyZ2V0OiB0aGlzLnRhcmdldCB9LCBzbG90dGVkQ29udGVudCkpO1xuICAgIGNvbnN0IGl0ZW1Sb2xlID0gdGhpcy5ocmVmXG4gICAgICA/IG51bGxcbiAgICAgIDogdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcInNpbmdsZVwiXG4gICAgICAgID8gXCJtZW51aXRlbXJhZGlvXCJcbiAgICAgICAgOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIlxuICAgICAgICAgID8gXCJtZW51aXRlbWNoZWNrYm94XCJcbiAgICAgICAgICA6IFwibWVudWl0ZW1cIjtcbiAgICBjb25zdCBpdGVtQXJpYSA9IHRoaXMuc2VsZWN0aW9uTW9kZSAhPT0gXCJub25lXCIgPyB0b0FyaWFCb29sZWFuKHRoaXMuc2VsZWN0ZWQpIDogbnVsbDtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBcImFyaWEtY2hlY2tlZFwiOiBpdGVtQXJpYSwgcm9sZTogaXRlbVJvbGUsIHRhYmluZGV4OiBcIjBcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgY29udGFpbmVyOiB0cnVlLFxuICAgICAgICBbQ1NTLmNvbnRhaW5lckxpbmtdOiAhIXRoaXMuaHJlZixcbiAgICAgICAgW0NTUy5jb250YWluZXJTbWFsbF06IHNjYWxlID09PSBcInNcIixcbiAgICAgICAgW0NTUy5jb250YWluZXJNZWRpdW1dOiBzY2FsZSA9PT0gXCJtXCIsXG4gICAgICAgIFtDU1MuY29udGFpbmVyTGFyZ2VdOiBzY2FsZSA9PT0gXCJsXCIsXG4gICAgICAgIFtDU1MuY29udGFpbmVyTXVsdGldOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIixcbiAgICAgICAgW0NTUy5jb250YWluZXJTaW5nbGVdOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwic2luZ2xlXCIsXG4gICAgICAgIFtDU1MuY29udGFpbmVyTm9uZV06IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJub25lXCJcbiAgICAgIH0gfSwgdGhpcy5zZWxlY3Rpb25Nb2RlICE9PSBcIm5vbmVcIiA/IChoKFwiY2FsY2l0ZS1pY29uXCIsIHsgY2xhc3M6IENTUy5pY29uLCBpY29uOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIiA/IFwiY2hlY2tcIiA6IFwiYnVsbGV0LXBvaW50XCIsIHNjYWxlOiBzY2FsZSA9PT0gXCJsXCIgPyBcIm1cIiA6IFwic1wiIH0pKSA6IG51bGwsIGNvbnRlbnRFbCkpKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBFdmVudCBMaXN0ZW5lcnNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBvbkNsaWNrKCkge1xuICAgIHRoaXMuZW1pdFJlcXVlc3RlZEl0ZW0oKTtcbiAgfVxuICBrZXlEb3duSGFuZGxlcihldmVudCkge1xuICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICBjYXNlIFwiIFwiOlxuICAgICAgY2FzZSBcIkVudGVyXCI6XG4gICAgICAgIHRoaXMuZW1pdFJlcXVlc3RlZEl0ZW0oKTtcbiAgICAgICAgaWYgKHRoaXMuaHJlZikge1xuICAgICAgICAgIHRoaXMuY2hpbGRMaW5rLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25DbG9zZVJlcXVlc3QuZW1pdCgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJUYWJcIjpcbiAgICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxEcm9wZG93bkl0ZW1LZXlFdmVudC5lbWl0KHsga2V5Ym9hcmRFdmVudDogZXZlbnQgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgIGNhc2UgXCJIb21lXCI6XG4gICAgICBjYXNlIFwiRW5kXCI6XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsRHJvcGRvd25JdGVtS2V5RXZlbnQuZW1pdCh7IGtleWJvYXJkRXZlbnQ6IGV2ZW50IH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdXBkYXRlQWN0aXZlSXRlbU9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgY29uc3QgcGFyZW50RW1pdHRlZENoYW5nZSA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMucGFyZW50RHJvcGRvd25Hcm91cEVsKTtcbiAgICBpZiAocGFyZW50RW1pdHRlZENoYW5nZSkge1xuICAgICAgdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkdyb3VwID0gZXZlbnQuZGV0YWlsLnJlcXVlc3RlZERyb3Bkb3duR3JvdXA7XG4gICAgICB0aGlzLnJlcXVlc3RlZERyb3Bkb3duSXRlbSA9IGV2ZW50LmRldGFpbC5yZXF1ZXN0ZWREcm9wZG93bkl0ZW07XG4gICAgICB0aGlzLmRldGVybWluZUFjdGl2ZUl0ZW0oKTtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBnZXRFbGVtZW50UHJvcCh0aGlzLmVsLCBcInNlbGVjdGlvbi1tb2RlXCIsIFwic2luZ2xlXCIpO1xuICAgIHRoaXMucGFyZW50RHJvcGRvd25Hcm91cEVsID0gdGhpcy5lbC5jbG9zZXN0KFwiY2FsY2l0ZS1kcm9wZG93bi1ncm91cFwiKTtcbiAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIikge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBkZXRlcm1pbmVBY3RpdmVJdGVtKCkge1xuICAgIHN3aXRjaCAodGhpcy5zZWxlY3Rpb25Nb2RlKSB7XG4gICAgICBjYXNlIFwibXVsdGlwbGVcIjpcbiAgICAgICAgaWYgKHRoaXMuZWwgPT09IHRoaXMucmVxdWVzdGVkRHJvcGRvd25JdGVtKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZCA9ICF0aGlzLnNlbGVjdGVkO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNpbmdsZVwiOlxuICAgICAgICBpZiAodGhpcy5lbCA9PT0gdGhpcy5yZXF1ZXN0ZWREcm9wZG93bkl0ZW0pIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJlcXVlc3RlZERyb3Bkb3duR3JvdXAgPT09IHRoaXMucGFyZW50RHJvcGRvd25Hcm91cEVsKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm5vbmVcIjpcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgZW1pdFJlcXVlc3RlZEl0ZW0oKSB7XG4gICAgdGhpcy5jYWxjaXRlRHJvcGRvd25JdGVtU2VsZWN0LmVtaXQoKTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbERyb3Bkb3duSXRlbVNlbGVjdC5lbWl0KHtcbiAgICAgIHJlcXVlc3RlZERyb3Bkb3duSXRlbTogdGhpcy5lbCxcbiAgICAgIHJlcXVlc3RlZERyb3Bkb3duR3JvdXA6IHRoaXMucGFyZW50RHJvcGRvd25Hcm91cEVsXG4gICAgfSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkRyb3Bkb3duSXRlbS5zdHlsZSA9IGRyb3Bkb3duSXRlbUNzcztcblxuZXhwb3J0IHsgQmFBY2NvcmRpb24gYXMgYmFfYWNjb3JkaW9uLCBEcm9wZG93biBhcyBjYWxjaXRlX2Ryb3Bkb3duLCBEcm9wZG93bkdyb3VwIGFzIGNhbGNpdGVfZHJvcGRvd25fZ3JvdXAsIERyb3Bkb3duSXRlbSBhcyBjYWxjaXRlX2Ryb3Bkb3duX2l0ZW0gfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmEtYWNjb3JkaW9uXzQuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIG5vb3BDbGljaygpIHtcbiAgLyoqIG5vb3AgKi9cbn1cbi8qKlxuICogVGhpcyBoZWxwZXIgdXBkYXRlcyB0aGUgaG9zdCBlbGVtZW50IHRvIHByZXZlbnQga2V5Ym9hcmQgaW50ZXJhY3Rpb24gb24gaXRzIHN1YnRyZWUgYW5kIHNldHMgdGhlIGFwcHJvcHJpYXRlIGFyaWEgYXR0cmlidXRlIGZvciBhY2Nlc3NpYmlsaXR5LlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRSZW5kZXJgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqICoqTm90ZXMqKlxuICpcbiAqIHRoaXMgdXRpbCBpcyBub3QgbmVlZGVkIGZvciBzaW1wbGUgY29tcG9uZW50cyB3aG9zZSByb290IGVsZW1lbnQgb3IgZWxlbWVudHMgYXJlIGFuIGludGVyYWN0aXZlIGNvbXBvbmVudCAoY3VzdG9tIGVsZW1lbnQgb3IgbmF0aXZlIGNvbnRyb2wpLiBGb3IgdGhvc2UgY2FzZXMsIHNldCB0aGUgYGRpc2FibGVkYCBwcm9wcyBvbiB0aGUgcm9vdCBjb21wb25lbnRzIGluc3RlYWQuXG4gKiB0ZWNobmljYWxseSwgdXNlcnMgY2FuIG92ZXJyaWRlIGB0YWJpbmRleGAgYW5kIHJlc3RvcmUga2V5Ym9hcmQgbmF2aWdhdGlvbiwgYnV0IHRoaXMgd2lsbCBiZSBjb25zaWRlcmVkIHVzZXIgZXJyb3JcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcGFyYW0gaG9zdElzVGFiYmFibGVcbiAqL1xuZnVuY3Rpb24gdXBkYXRlSG9zdEludGVyYWN0aW9uKGNvbXBvbmVudCwgaG9zdElzVGFiYmFibGUgPSBmYWxzZSkge1xuICBpZiAoY29tcG9uZW50LmRpc2FibGVkKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiLTFcIik7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGlmIChjb21wb25lbnQuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICBjb21wb25lbnQuZWwuY2xpY2sgPSBub29wQ2xpY2s7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbXBvbmVudC5lbC5jbGljayA9IEhUTUxFbGVtZW50LnByb3RvdHlwZS5jbGljaztcbiAgaWYgKHR5cGVvZiBob3N0SXNUYWJiYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIGhvc3RJc1RhYmJhYmxlLmNhbGwoY29tcG9uZW50KSA/IFwiMFwiIDogXCItMVwiKTtcbiAgfVxuICBlbHNlIGlmIChob3N0SXNUYWJiYWJsZSA9PT0gdHJ1ZSkge1xuICAgIGNvbXBvbmVudC5lbC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gIH1cbiAgZWxzZSBpZiAoaG9zdElzVGFiYmFibGUgPT09IGZhbHNlKSB7XG4gICAgY29tcG9uZW50LmVsLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICB9XG4gIGVsc2UgO1xuICBjb21wb25lbnQuZWwucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTtcbn1cblxuZXhwb3J0IHsgdXBkYXRlSG9zdEludGVyYWN0aW9uIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJhY3RpdmUtMjk5OTU1MjIuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIGlzQWN0aXZhdGlvbktleShrZXkpIHtcbiAgcmV0dXJuIGtleSA9PT0gXCJFbnRlclwiIHx8IGtleSA9PT0gXCIgXCI7XG59XG5jb25zdCBudW1iZXJLZXlzID0gW1wiMFwiLCBcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiXTtcblxuZXhwb3J0IHsgaXNBY3RpdmF0aW9uS2V5IGFzIGksIG51bWJlcktleXMgYXMgbiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXktYjc1NDkxYzQuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmNvbnN0IHJlc29sdmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcHJvbWlzZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgc2V0cyB1cCB0aGUgY29tcG9uZW50IGZvciB0aGUgYWJpbGl0eSB0byBrbm93IHdoZW4gdGhlIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgdXNlZCBpbiB0aGUgYGNvbXBvbmVudFdpbGxMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudFdpbGxMb2FkKCk6IHZvaWQge1xuICogICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBzZXRVcExvYWRhYmxlQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICBwcm9taXNlTWFwLnNldChjb21wb25lbnQsIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlTWFwLnNldChjb21wb25lbnQsIHJlc29sdmUpKSk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgbGV0cyB0aGUgbG9hZGFibGUgY29tcG9uZW50IGtub3cgdGhhdCBpdCBpcyBub3cgbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnREaWRMb2FkYCBsaWZlY3ljbGUgaG9vay5cbiAqXG4gKiBgYGBcbiAqIGNvbXBvbmVudERpZExvYWQoKTogdm9pZCB7XG4gKiAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0Q29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXNvbHZlTWFwLmdldChjb21wb25lbnQpKCk7XG59XG4vKipcbiAqIFRoaXMgaGVscGVyIHV0aWwgY2FuIGJlIHVzZWQgdG8gZW5zdXJlIGEgY29tcG9uZW50IGhhcyBiZWVuIGxvYWRlZCAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIHN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQpLlxuICpcbiAqIFJlcXVpcmVzIFwic2V0VXBMb2FkYWJsZUNvbXBvbmVudFwiIGFuZCBcInNldENvbXBvbmVudExvYWRlZFwiIHRvIGJlIGNhbGxlZCBmaXJzdC5cbiAqXG4gKiBBIGNvbXBvbmVudCBkZXZlbG9wZXIgY2FuIGF3YWl0IHRoaXMgbWV0aG9kIGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW55IGxvZ2ljIHRoYXQgcmVxdWlyZXMgYSBjb21wb25lbnQgdG8gYmUgbG9hZGVkIGZpcnN0LlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEByZXR1cm5zIFByb21pc2U8dm9pZD5cbiAqL1xuZnVuY3Rpb24gY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCkge1xuICByZXR1cm4gcHJvbWlzZU1hcC5nZXQoY29tcG9uZW50KTtcbn1cblxuZXhwb3J0IHsgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCBhcyBhLCBjb21wb25lbnRMb2FkZWQgYXMgYywgc2V0Q29tcG9uZW50TG9hZGVkIGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtY2MxNGQ3MjguanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbi8qKlxuICogVGhpcyB1dGlsaXR5IGVuc3VyZXMgb2JzZXJ2ZXJzIGFyZSBjcmVhdGVkIG9ubHkgZm9yIGJyb3dzZXIgY29udGV4dHMuXG4gKlxuICogQHBhcmFtIHR5cGUgLSB0aGUgdHlwZSBvZiBvYnNlcnZlciB0byBjcmVhdGVcbiAqIEBwYXJhbSBjYWxsYmFjayAtIHRoZSBvYnNlcnZlciBjYWxsYmFja1xuICogQHBhcmFtIG9wdGlvbnMgLSB0aGUgb2JzZXJ2ZXIgb3B0aW9uc1xuICovXG5mdW5jdGlvbiBjcmVhdGVPYnNlcnZlcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9kb20vaXNzdWVzLzEyNiNpc3N1ZWNvbW1lbnQtMTA0OTgxNDk0OFxuICBjbGFzcyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXIgZXh0ZW5kcyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICAgIHN1cGVyKGNhbGxiYWNrKTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBvYnNlcnZlKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5LnB1c2goeyB0YXJnZXQsIG9wdGlvbnMgfSk7XG4gICAgICByZXR1cm4gc3VwZXIub2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB1bm9ic2VydmUodGFyZ2V0KSB7XG4gICAgICBjb25zdCBuZXdPYnNlcnZlZEVudHJpZXMgPSB0aGlzLm9ic2VydmVkRW50cnkuZmlsdGVyKChvYnNlcnZlZCkgPT4gb2JzZXJ2ZWQudGFyZ2V0ICE9PSB0YXJnZXQpO1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5ID0gW107XG4gICAgICB0aGlzLmNhbGxiYWNrKHN1cGVyLnRha2VSZWNvcmRzKCksIHRoaXMpO1xuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICBuZXdPYnNlcnZlZEVudHJpZXMuZm9yRWFjaCgob2JzZXJ2ZWQpID0+IHRoaXMub2JzZXJ2ZShvYnNlcnZlZC50YXJnZXQsIG9ic2VydmVkLm9wdGlvbnMpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICh0eXBlID09PSBcImludGVyc2VjdGlvblwiXG4gICAgICA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlclxuICAgICAgOiB0eXBlID09PSBcIm11dGF0aW9uXCJcbiAgICAgICAgPyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXJcbiAgICAgICAgOiB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIpO1xuICB9KSgpO1xufVxuXG5leHBvcnQgeyBjcmVhdGVPYnNlcnZlciBhcyBjIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVycy01Njc0MGU5OS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=