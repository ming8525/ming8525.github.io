/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-106253.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-106253"],{70464:(e,i,n)=>{n.d(i,{c:()=>s});var t=n(81149);const o=e=>!("isConnected"in e)||e.isConnected,r=((e,i)=>{let n;return(...e)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,(e=>{for(let i of e.keys())e.set(i,e.get(i).filter(o))})(...e)}),2e3)}})(),l=e=>"function"==typeof e?e():e,s=(e,i)=>{const n=((e,i=((e,i)=>e!==i))=>{const n=l(e);let t=new Map(Object.entries(null!=n?n:{}));const o={dispose:[],get:[],set:[],reset:[]},r=()=>{var i;t=new Map(Object.entries(null!==(i=l(e))&&void 0!==i?i:{})),o.reset.forEach((e=>e()))},s=e=>(o.get.forEach((i=>i(e))),t.get(e)),a=(e,n)=>{const r=t.get(e);i(n,r,e)&&(t.set(e,n),o.set.forEach((i=>i(e,n,r))))},c="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,i)=>s(i),ownKeys:e=>Array.from(t.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,i)=>t.has(i),set:(e,i,n)=>(a(i,n),!0)}),u=(e,i)=>(o[e].push(i),()=>{((e,i)=>{const n=e.indexOf(i);n>=0&&(e[n]=e[e.length-1],e.length--)})(o[e],i)});return{state:c,get:s,set:a,on:u,onChange:(i,n)=>{const t=u("set",((e,t)=>{e===i&&n(t)})),o=u("reset",(()=>n(l(e)[i])));return()=>{t(),o()}},use:(...e)=>{const i=e.reduce(((e,i)=>(i.set&&e.push(u("set",i.set)),i.get&&e.push(u("get",i.get)),i.reset&&e.push(u("reset",i.reset)),i.dispose&&e.push(u("dispose",i.dispose)),e)),[]);return()=>i.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const i=t.get(e);o.set.forEach((n=>n(e,i,i)))}}})(e,i);return n.use((()=>{if("function"!=typeof t.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:i=>{const n=(0,t.g)();n&&((e,i,n)=>{const t=e.get(i);t?t.includes(n)||t.push(n):e.set(i,[n])})(e,i,n)},set:i=>{const n=e.get(i);n&&e.set(i,n.filter(t.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(t.f))),r(e)}}})()),n}},9225:(e,i,n)=>{n.d(i,{$:()=>ve,A:()=>S,B:()=>I,C:()=>_,D:()=>b,E:()=>u,F:()=>d,G:()=>H,H:()=>W,I:()=>k,J:()=>ae,K:()=>V,L:()=>p,M:()=>J,N:()=>G,O:()=>D,P:()=>de,Q:()=>Z,R:()=>c,S:()=>Ee,T:()=>Re,U:()=>ze,V:()=>ge,W:()=>fe,X:()=>Ae,Y:()=>Be,Z:()=>ye,_:()=>me,a:()=>Xe,a0:()=>pe,a1:()=>pi,a2:()=>oi,a3:()=>ui,a4:()=>be,a5:()=>De,a6:()=>Ge,a7:()=>Te,a8:()=>Pe,a9:()=>Se,aA:()=>fi,aB:()=>mi,aC:()=>te,aD:()=>ie,aE:()=>xe,aF:()=>f,aG:()=>h,aH:()=>L,aI:()=>C,aJ:()=>Ze,aK:()=>R,aL:()=>F,aa:()=>m,ab:()=>oe,ac:()=>E,ad:()=>v,ae:()=>g,af:()=>y,ag:()=>z,ah:()=>Fe,ai:()=>qe,aj:()=>Ce,ak:()=>Le,al:()=>Ue,am:()=>je,an:()=>We,ao:()=>Me,ap:()=>_e,aq:()=>Ne,ar:()=>Je,as:()=>si,at:()=>x,au:()=>ri,av:()=>ni,aw:()=>ti,ax:()=>ci,ay:()=>di,az:()=>ai,b:()=>t,c:()=>X,d:()=>w,e:()=>re,f:()=>ee,g:()=>Y,h:()=>se,i:()=>q,j:()=>le,k:()=>li,l:()=>ii,m:()=>ei,n:()=>Ye,o:()=>Qe,p:()=>$e,q:()=>T,r:()=>Oe,s:()=>K,t:()=>we,u:()=>M,v:()=>A,w:()=>o,x:()=>B,y:()=>U,z:()=>P});var t,o,r=n(51837),l=n(82218),s=(n(69283),n(49306),n(70464)),a=n(10519);function c(e){return 0===Object.keys(e).length&&e.constructor===Object}function u(){document.querySelectorAll("calcite-popover").forEach((e=>{let i=!1;if(e.classList.forEach((e=>{e.startsWith("smart-mapping-")&&e.endsWith("-popover")&&(i=!0)})),i){e.setAttribute("open","false");const i=e.parentNode;null==i||i.removeChild(e)}})),document.querySelectorAll("arcgis-smart-mapping-styler-popover, arcgis-smart-mapping-info-popover").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function d(e,i,n){if(i&&(null==e?void 0:e.tagName)===i.toUpperCase()||n&&(null==e?void 0:e.classList.contains(n)))return e;{let t=null==e?void 0:e.parentElement;for(;t;){if(i&&t.tagName===i.toUpperCase()||n&&t.classList.contains(n))return t;if("BODY"===t.tagName)break;t=t.parentElement}}}function p(e,i){const n=function(e){if("CALCITE-PANEL"===(null==e?void 0:e.tagName))return e;if("CALCITE-FLOW-ITEM"===(null==e?void 0:e.tagName))return e;{let i=null==e?void 0:e.parentElement;for(;i;){if("CALCITE-PANEL"===i.tagName)return i;if("CALCITE-FLOW-ITEM"===i.tagName)return i;i=i.parentElement}}}(e);n&&(n.disabled=i)}function m(e){let i=null==e?void 0:e.parentElement;if("CALCITE-FLOW"===(null==i?void 0:i.tagName)){let n=0;return i.childNodes.forEach(((i,t)=>{i===e&&(n=t)})),0===n}return!1}function f(e,i,n,t=!0){let o=document.getElementById(n);(null==o?void 0:o.parentNode)&&o.parentNode.removeChild(o);const r=document.createElement("calcite-tooltip");r.className="smart-mapping-tooltip",r.id=n,r.referenceElement=e,r.open=t,r.innerHTML=i,document.body.append(r)}function y(e,i,n=!0){const t=document.createElement("calcite-tooltip");t.className="smart-mapping-tooltip",t.referenceElement=e,t.open=n,t.innerHTML=i,document.body.append(t)}function g(){document.querySelectorAll(".smart-mapping-tooltip").forEach((e=>{var i;null===(i=e.parentNode)||void 0===i||i.removeChild(e)}))}function h(e){const i=document.getElementById(e);"smart-mapping-tooltip"===(null==i?void 0:i.className)&&(null==i?void 0:i.parentNode)&&i.parentNode.removeChild(i)}function v(e){return e.min===e.max&&E(e.min)&&(e.min>0?(e.min=0,e.max=2*e.max):e.min<0?(e.min=2*e.min,e.max=0):(e.min=-10,e.max=10)),e}function b(e){var i;return"featureReduction"in e&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)||"imagery"===e.type||"imagery-tile"===e.type?"polygon":"geo-rss"===e.type?"point":e.geometryType}function S(e){return"stream"===e.type||"point"===b(e)||"multipoint"===b(e)}function T(e){return!("stream"===e.type)&&"polygon"===b(e)}function I(e){return!("stream"===e.type)&&"polyline"===b(e)}function E(e){return null!=e}function F(e){if(e.simpleFieldType===o.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}function C(e){setTimeout((()=>{e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),setTimeout((()=>{var e;const i=null===(e=document.getElementsByTagName("calcite-shell"))||void 0===e?void 0:e[0];i&&(i.scrollTop=0)}),100)}),100)}function x(e){const i=(0,l.a)(e),n=(0,r.g)(e),t=new Intl.NumberFormat(i,{style:"percent"}).format(0);return"rtl"===n?t.endsWith("%"):t.startsWith("%")}!function(e){e.MISSING="missing",e.IN_PROGRESS="inProgress",e.SUCCESS="success",e.FAILED="failed"}(t||(t={})),function(e){e.NUMBER="number",e.STRING="string",e.DATE="date",e.OID="oid",e.GUID="guid",e.UNKNOWN="unknown"}(o||(o={}));let N=["id","fips","fid","objectid","_objectid","__objectid","x","y","lat","long","latitude","longitude","shape","shape_length","shape_leng","shape_area","perimeter","stretched_value","fnode_","tnode_","lpoly_","rpoly_","poly_","subclass","rings_ok","rings_nok","st_length(shape)","st_area(shape)"];function w(){const{layer:e,mapImageSublayer:i}=K;let{layerFields:n}=K;return!e||n?Promise.resolve():(K.layerFields=function(e){var i;const{modules:n}=K;if("feature"===e.type&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)){const i=e.featureReduction.fields,t=[];return i.forEach((i=>{const o=e.fields.find((e=>e.name===i.onStatisticField));i.onStatisticField&&!o||t.push(new n.Field({name:i.name,alias:i.alias||i.name,type:P(i)}))})),t}return"fields"in e&&e.fields}(e),i&&i.layer.portalItem&&i.layer.url.indexOf("https://demographics")>-1&&i.layer.url.indexOf(".arcgis.com")>-1?i.layer.portalItem.fetchData().then((e=>{if(null==e?void 0:e.thematicGroup){const i=e.thematicGroup.fieldNames;i&&(n=n.filter((e=>i.indexOf(e.name)>-1)))}return O(),Promise.resolve()})).catch((()=>(O(),Promise.resolve()))):(O(),Promise.resolve()))}function O(){var e,i;const{layer:n,mapImageSublayer:t,layerFields:r,supportsArcade:l}=K,s=n.hasOwnProperty("capabilities")&&(null===(i=null===(e=n.capabilities)||void 0===e?void 0:e.query)||void 0===i?void 0:i.supportsSqlExpression);K.fields=[],K.stringFieldsCount=0,K.dateFieldsCount=0,K.numberFieldsCount=0;const a="popupTemplate"in n&&n.popupTemplate?n.popupTemplate.fieldInfos:[],c=ee(n).filter((e=>!!e.field)).map((e=>e.field.toLowerCase()));(null==c?void 0:c.length)&&(N=N.filter((e=>-1===c.indexOf(e)))),r.forEach((e=>{if(N.indexOf(e.name.toLowerCase())>-1)return;if(["date","date-only"].indexOf(e.type)>-1&&(t&&!l||"stream"!==n.type&&!s))return;const i=a?a.filter((i=>i.fieldName===e.name)):null,r=i&&i.length?i[0].label:null,u={layerField:e,label:r||e.alias||e.name};!function(e,i){switch(P(e.layerField)){case"string":case"date-only":e.simpleFieldType=o.STRING,K.stringFieldsCount++;break;case"date":e.simpleFieldType=o.DATE,K.dateFieldsCount++;break;case"oid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.OID);break;case"guid":i.indexOf(e.layerField.name.toLowerCase())>-1&&(e.simpleFieldType=o.GUID);break;case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":e.simpleFieldType=o.NUMBER,K.numberFieldsCount++}}(u,c),u.simpleFieldType&&K.fields.push(u)}))}function M(e){const{layer:i}=K;if(q(i)){const i=fi().filter((i=>i.name===e));if(i.length){const e=i[0];return{label:e.alias,layerField:e,simpleFieldType:o.STRING}}}else{const i=K.fields.filter((i=>i.layerField.name===e));if(i.length)return i[0]}}function R(){const e=K.fields.filter((e=>e.simpleFieldType===o.NUMBER));if(e.length)return e[0]}function z(){return K.numberFieldsCount>0}function _(){const{selectedFields:e}=K,i={string:0,number:0,date:0,unknown:0,expression:0};return e.forEach((e=>{let n;if(i.expression+=e.expression?1:0,e.field){const i=M(e.field);n=i?i.simpleFieldType:o.UNKNOWN}else n=e.simpleFieldType;switch(n){case o.NUMBER:case o.OID:case o.GUID:i.number++;break;case o.STRING:i.string++;break;case o.DATE:i.date++;break;case o.UNKNOWN:i.unknown++}})),i}function k(e){const{fields:i}=K,n={string:0,number:0,date:0,expression:0};return(e=e||i).forEach((e=>{switch(e.simpleFieldType){case o.NUMBER:case o.OID:case o.GUID:n.number++;break;case o.STRING:n.string++;break;case o.DATE:n.date++}})),n}function V(e){const{layer:i}=K;"featureReduction"in i&&i.featureReduction&&"binning"===i.featureReduction.type||D(e)}function D(e){const{layer:i}=K;"geojson"!==i.type&&"wfs"!==i.type&&"feature"!==i.type||(i.outFields=e)}function A(e,i){let n=!0;return e.length===i.length&&(e.forEach(((e,t)=>{n&&!B(e,i[t])&&(n=!1)})),n)}function B(e,i){return!(!e||!i||e.field!=i.field||e.expression!=i.expression||e.expressionTitle!=i.expressionTitle)}function L(e){return e.simpleFieldType===o.DATE}function U(e){const i=e.layerField;switch(P(i)){case"small-integer":case"big-integer":case"integer":case"single":case"double":if("domain"in i&&i.domain)return"string";switch("valueType"in i&&i.valueType){case"name-or-title":case"type-or-category":case"description":case"location-or-place-name":case"ordered-or-ranked":case"binary":case"unique-identifier":case"date-and-time":return"string";case"count-or-amount":return"integer";default:return"double"}case"string":case"date-only":return"string";case"date":return"date";default:return"string"}}function P(e){const{layer:i}=K;if(e&&"fields"in i){if("type"in e)return e.type;if("statisticType"in e){const n=i.fields.find((i=>i.name===e.onStatisticField));if(!e.onStatisticField||n){if("count"===e.statisticType)return"integer";if("avg"===e.statisticType)return"double";if(["min","max","sum","mode"].indexOf(e.statisticType)-1)return(null==n?void 0:n.type)||"integer"}}}}function q(e){return["imagery","imagery-tile"].indexOf(e.type)>-1}var G,J;!function(e){e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications"}(G||(G={})),function(e){e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed"}(J||(J={}));const j=e=>{const i=(e=>localStorage.getItem(e))(e);return i?JSON.parse(i):{}},W=(e,i)=>{const n=j(e);n[i.key]=i.value,((e,i)=>{localStorage.setItem(e,i)})(e,JSON.stringify(n))},H=(e,i)=>{const n=j(e);return(null==n?void 0:n.hasOwnProperty(i))?n[i]:null},K=(0,s.c)({selectedFields:[],hideLayerTitle:!1,supportsArcade:!1,stringFieldsCount:-1,dateFieldsCount:-1,numberFieldsCount:-1,isRTL:!1,oneFeatureResponseStatus:t.MISSING}).state;function X(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.oneFeatureResponseStatus=t.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0}const $="polygon";function Y(){const{layer:e}=K;return Q(se(e))}function Q(e){var i;const{layer:n}=K,t=Ke(e,"size"),o=Ke(e,"color"),r=Xe(e,"color"),l=$e(e,"color"),s=$e(e,"size");let a="unknown";if(e.normalizationType&&"field"!==e.normalizationType)return"unknown";if("simple"===e.type)a="simple";else if("dot-density"===e.type)a="dot-density";else if("heatmap"===e.type)a="heatmap";else if("class-breaks"===e.type){const c=e;if(o)a=c.valueExpression&&!l?"color":t?s&&s.units?"color-size-age":l&&l.units?"color-age-size":"color-size":l&&l.style&&r.normalizationField?"compare":l&&l.units?t?"color-age-size":"color-age":"color";else if(t)a="univariate-color-size"===(null===(i=c.authoringInfo)||void 0===i?void 0:i.type)?"color-size":c.valueExpression&&!s?"size":s&&s.units?"size-age":"size";else{const i=e,t=i.authoringInfo;a=t?"class-breaks-color"===t.type?"color":"class-breaks-size"===t.type||ce(i.classBreakInfos)?"size":"color":T(n)?i.valueExpression?ce(i.classBreakInfos)?"size":"color":i.backgroundFillSymbol?"size":"color":ce(i.classBreakInfos)?"size":"color"}}else"unique-value"===e.type?a=e.valueExpression?e.authoringInfo&&"predominance"===e.authoringInfo.type||"Predominant category"===e.valueExpressionTitle?Ke(e,"size")?"predominance-size":"predominance":e.authoringInfo&&"relationship"===e.authoringInfo.type?Ke(e,"size")?"relationship-size":"relationship":Ke(e,"size")?"type-size":"type":t?s&&s.units?"type-size-age":"type-size":"type":"pie-chart"===e.type&&(a=Ke(e,"size")?"chart-size":"chart");return a}function Z(e){const i=Xe(e,"color"),n=Xe(e,"size"),t=Q(e);(null==i?void 0:i.normalizationField)?(e.normalizationField=i.normalizationField,e.normalizationType="field"):["color-size","color-age-size","color-size-age"].indexOf(t)>-1&&i?(e.normalizationField=void 0,e.normalizationType=void 0):"size"===t&&(null==n?void 0:n.normalizationField)&&(e.normalizationField=n.normalizationField,e.normalizationType="field")}function ee(e){var i;let n=se(e),t=[];switch(Y()){case"relationship":case"relationship-size":{t=[{field:n.authoringInfo.field1.field,simpleFieldType:o.NUMBER},{field:n.authoringInfo.field2.field,simpleFieldType:o.NUMBER}];const e=Xe(n,"size");if(e){const i=M(e.field);t.push({field:e.field,expression:e.valueExpression,expressionTitle:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER})}break}case"predominance":case"predominance-size":t=n.uniqueValueInfos.map((e=>{var i;return{field:""+e.value,simpleFieldType:(null===(i=M(""+e.value))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"chart":case"chart-size":t=n.attributes.map((e=>{const i=M(e.field);return{field:e.field,expression:e.valueExpression,expressionTitle:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER}}))}if(t.length)return t;switch(n.type){case"dot-density":t=n.attributes.map((e=>{var i;return{field:e.field,simpleFieldType:(null===(i=M(e.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}}));break;case"heatmap":{const e=n;t=e.field?[{field:e.field,simpleFieldType:(null===(i=M(e.field))||void 0===i?void 0:i.simpleFieldType)||o.NUMBER}]:[];break}case"class-breaks":{const e=n,i=M(e.field);t=[{field:e.field,expression:i?void 0:e.valueExpression,expressionTitle:i?void 0:e.valueExpressionTitle,simpleFieldType:e.field&&i?i.simpleFieldType:o.NUMBER}];const r=Xe(n,"color"),l=Xe(n,"size"),s=$e(n,"color"),a=$e(n,"size");if(r&&l)if(r.field===l.field&&r.valueExpression===l.valueExpression&&r.valueExpressionTitle===l.valueExpressionTitle){const e=M(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}else{if(s&&s.units)t=[{field:s.field,simpleFieldType:o.DATE}];else{const e=M(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}if(a&&a.units)t.push({field:a.field,simpleFieldType:o.DATE});else{const e=M(l.field);t.push({field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER})}}else if(r)if(s&&s.units)t=[{field:s.field,simpleFieldType:o.DATE}];else{const e=M(r.field);t=[{field:r.field,expression:e?void 0:r.valueExpression,expressionTitle:e?void 0:r.valueExpressionTitle,simpleFieldType:r.field&&e?e.simpleFieldType:o.NUMBER}]}else if(l)if(a&&a.units)t=[{field:a.field,simpleFieldType:o.DATE}];else{const e=M(l.field);t=[{field:l.field,expression:e?void 0:l.valueExpression,expressionTitle:e?void 0:l.valueExpressionTitle,simpleFieldType:l.field&&e?e.simpleFieldType:o.NUMBER}]}if(s&&s.style&&r.normalizationField){const e=M(r.field),i=M(r.normalizationField);t=[{field:r.field,simpleFieldType:e?e.simpleFieldType:o.NUMBER},{field:r.normalizationField,simpleFieldType:i?i.simpleFieldType:o.NUMBER}]}break}case"unique-value":if(n.authoringInfo&&"predominance"===n.authoringInfo.type)t=n.uniqueValueInfos.map((e=>{const i=M(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}));else if(n.authoringInfo&&"chart"===n.authoringInfo.type)t=n.uniqueValueInfos.map((e=>{const i=M(""+e.value);return{field:""+e.value,simpleFieldType:i?i.simpleFieldType:o.NUMBER}}));else if(n.authoringInfo&&"relationship"===n.authoringInfo.type){const e=M(n.authoringInfo.field1.field),i=M(n.authoringInfo.field2.field);t=[{field:n.authoringInfo.field1.field,simpleFieldType:e?e.simpleFieldType:o.NUMBER},{field:n.authoringInfo.field2.field,simpleFieldType:i?i.simpleFieldType:o.NUMBER}]}else{const e=n,i=M(e.field);let r=o.NUMBER;e.field&&i?r=i.simpleFieldType:e.valueExpression&&e.uniqueValueInfos&&e.uniqueValueInfos[0]&&"string"==typeof e.uniqueValueInfos[0].value&&(r=o.STRING),t=[{field:e.field,expression:i?void 0:e.valueExpression,expressionTitle:i?void 0:e.valueExpressionTitle,simpleFieldType:r}];const l=Xe(n,"size");if(l){let e=l.field;e||(e=($e(n,"size")||{}).field);const i=M(e);t.push({field:e,expression:i?void 0:l.valueExpression,expressionTitle:i?void 0:l.valueExpressionTitle,simpleFieldType:e&&i?i.simpleFieldType:o.NUMBER})}}}return t}function ie(e,i,n=!1){if(i&&5!==i.length)return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};switch(e){case"high-to-low":case"above":case"below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!1,visibleElements:{interactiveTrack:!0}};case"above-and-below":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!n,visibleElements:{interactiveTrack:!n}};case"centered-on":case"extremes":return{handlesSyncedToPrimary:!1,primaryHandleEnabled:!0,syncedSegmentsEnabled:!0,visibleElements:{interactiveTrack:!0}}}}function ne(e){const i=e.map.basemap.baseLayers.getItemAt(0);if(!i.url)return"esri.layers.OpenStreetMapLayer"===i.declaredClass?"osm":"topo";const n=i.url.toLowerCase();return n.indexOf("arcgis/rest/services/World_Street_Map".toLowerCase())>-1?"streets":n.indexOf("ArcGIS/rest/services/Canvas/World_Light_Gray_Base".toLowerCase())>-1?"gray":n.indexOf("arcgis/rest/services/World_Topo_Map".toLowerCase())>-1||n.indexOf("arcgis/rest/services/USGSTopo".toLowerCase())>-1?"topo":n.indexOf("ArcGIS/rest/services/World_Terrain_Base".toLowerCase())>-1?"terrain":n.indexOf("arcgis/rest/services/NatGeo_World_Map".toLowerCase())>-1?"national-geographic":n.indexOf("arcgis/rest/services/Ocean/World_Ocean_Base".toLowerCase())>-1?"oceans":n.indexOf("arcgis/rest/services/World_Imagery".toLowerCase())>-1?"satellite":n.indexOf("ArcGIS/rest/services/Reference/World_Boundaries_and_Places".toLowerCase())>-1?"hybrid":n.indexOf("arcgis/rest/services/Canvas/World_Dark_Gray_Base".toLowerCase())>-1?"dark-gray":"topo"}function te(e,i,n){if(!(0,a.i)(i)||!(0,a.i)(n))return null;const t=e[0].value,o=e[e.length-1].value,r=.3*(o-t);return{min:t-r>i?t-r:null,max:o+r<n?o+r:null,minMaxSame:t===o}}function oe(){const{layer:e,mapImageSublayer:i}=K;if("esri.layers.GeoRSSLayer"===e.declaredClass){const i=e;i.pointSymbol=i.pointSymbol.clone(),i.lineSymbol=i.lineSymbol.clone(),i.polygonSymbol=i.polygonSymbol.clone()}else re(se(e).clone(),e),i&&(i.renderer=se(e).clone())}function re(e,i){var n;"featureReduction"in i&&"binning"===(null===(n=i.featureReduction)||void 0===n?void 0:n.type)?i.featureReduction.renderer=e:"renderer"in i&&(i.renderer=e)}function le(e,i){const{layer:n,mapImageSublayer:t,modules:o}=K;i&&"featureReduction"in n&&(n.featureReduction=null),re(o.rendererJsonUtils.fromJSON(e),n),i&&"featureReduction"in n&&(n.featureReduction=i),t&&(t.renderer=o.rendererJsonUtils.fromJSON(e))}function se(e){var i;return"featureReduction"in e&&"binning"===(null===(i=e.featureReduction)||void 0===i?void 0:i.type)?e.featureReduction.renderer:"renderer"in e&&e.renderer}function ae(e){const{layer:i}=K,n="renderer"in i&&i.renderer,t="authoringInfo"in n&&n.authoringInfo,o=$e(se(i),"color"),r=$e(se(i),"size");return("color"===e?null==o?void 0:o.theme:"size"===e?null==r?void 0:r.theme:(null==t?void 0:t.univariateTheme)||(null==o?void 0:o.theme)||(null==r?void 0:r.theme))||""}function ce(e){let i,n;for(i=0;i<e.length;i++){const t=e[i].symbol;for(n=0;n<e.length;n++){const o=e[n].symbol;if(i!==n&&ue(t,o))return!0}}return!1}function ue(e,i){return"picture-marker"!=e.type&&("cross"===e.style||"x"===e.style?"cross"===i.style||"x"===i.style?!e.outline.color&&!i.outline.color||e.outline.color&&i.outline.color&&e.outline.color.toString()===i.outline.color.toString():!e.outline.color&&!i.color||e.outline.color&&i.color&&e.outline.color.toString()===i.color.toString():"cross"===i.style||"x"===i.style?!e.color&&!i.outline.color||e.color&&i.outline.color&&e.color.toString()===i.outline.color.toString():!e.color&&!i.color||e.color&&i.color&&e.color.toString()===i.color.toString())}function de(e){const{layer:i,modules:n}=K,t=se(i),o=Y();if(["unique-size","unique-size-age"].indexOf(o)>-1)return null;let r;const l=Xe(t,"color"),s=t.classBreakInfos?t.classBreakInfos:t.uniqueValueInfos;let a;return l?(a=l.stops.map((e=>e.color)),r=n.colorSchemes.getMatchingSchemes({theme:e||"high-to-low",colors:a,geometryType:b(i)||$})):s&&s.length>=1&&(a=s?s.map((e=>we(e.symbol))).filter((e=>e)):null,a&&a.length&&(a.length>10&&(a=a.slice(0,9)),r=function(e,i){const{layer:n,modules:t}=K;let o=t.colorSchemes.getMatchingSchemes({theme:i||"high-to-low",colors:e,geometryType:b(n)||$});return!i||o&&o.length||(o=t.colorSchemes.getMatchingSchemes({theme:"high-to-low",colors:e,geometryType:b(n)||$})),o&&o.length||(o=t.colorSchemes.getMatchingSchemes({theme:"above-and-below",colors:e,geometryType:b(n)||$})),o}(a,e))),r&&r.length?r[0]:null}function pe(){const{layer:e,mapView:i,modules:n}=K,t=se(e).uniqueValueInfos;if(!t||t.length<2)return null;const o=Math.sqrt(t.length),r=n.relationshipSchemes.getSchemes({basemap:i.map.basemap||"topo",geometryType:b(e)}),l=[r.primaryScheme].concat(r.secondarySchemes),s=[];return l.forEach((e=>{let i=[];e.colorsForClassBreaks[o-2].colors.forEach((e=>{i=i.concat(n.esriLang.clone(e))})),t.some((e=>{const n=we(e.symbol);return!!n&&!i.find((e=>be(e,n)))}))||s.push(e)})),s.length?s[0]:null}function me(){const{layer:e,mapView:i,modules:n}=K,t=se(e);return!t.uniqueValueInfos||t.uniqueValueInfos.length<2?null:he(n.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e)||$}))}function fe(){const{layer:e,mapView:i,modules:n}=K,t=se(e);return!t.uniqueValueInfos||t.uniqueValueInfos.length<2?null:he(n.predominanceSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e),numColors:10}))}function ye(){const{layer:e,mapView:i,modules:n}=K,t=se(e);return!t.attributes||t.attributes.length<2?null:he(n.pieChartSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e),numColors:10}))}function ge(){const{layer:e,mapView:i,modules:n}=K,t=se(e);let o;o=t.colorStops.filter(((e,i)=>i>=3)).map((e=>e.color));const r=n.heatmapSchemes.getSchemes({basemap:i.map.basemap||"topo"}),l=[r.primaryScheme].concat(r.secondarySchemes),s=[];return l.forEach((e=>{o.some(((i,n)=>!be(e.colors[n],i)))||s.push(e)})),s.length?s[0]:null}function he(e){const{layer:i}=K,n=se(i).uniqueValueInfos;if(!n||n.length<2)return null;const t=Se(e,Math.min(n.length,10)),o=[];return t.forEach((e=>{n.filter(((e,i)=>i<10)).some(((i,n)=>{const t=we(i.symbol);return!!t&&!be(e.colors[n],t)}))||o.push(e.scheme)})),o.length?o[0]:null}function ve(){const{layer:e,mapView:i,modules:n}=K;return n.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:b(e)||$}).primaryScheme}function be(e,i){return e.r===i.r&&e.g===i.g&&e.b===i.b}function Se(e,i){const n=Ie(e),t=[];return n.forEach((e=>{const n=i>0,o=!!e.colorsForClassBreaks;let r;r=n&&o?function(e,i){const n=e.length;let t=[];for(let o=0;o<n;o++){const n=e[o];if(i<n.numClasses)break;t=n.colors}return t}(e.colorsForClassBreaks,i):e.colors,t.push({colors:r,scheme:e})})),t}function Te(e){const i=Ie(e);let n=[];return i.forEach((function(e){e.colors&&(n=n.concat(e.colors))})),function(e){const i={};return e.filter((function(e){const n=!i[e.toHex()];return n&&(i[e.toHex()]=1),n}))}(n)}function Ie(e){return[e.primaryScheme].concat(e.secondarySchemes)}function Ee(e,i,n){const{modules:t}=K,o=t.typeSchemes.getSchemes({theme:"default",basemap:ne(i),geometryType:b(e)}).primaryScheme;let r;if(S(e)||n&&["size","color-size","color-age-size","color-size-age","color-age-size-age","type-size","predominance-size","chart-size","relationship-size"].indexOf(n)>-1){const e=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(o.outline.color),width:o.outline.width});r=new t.SimpleMarkerSymbol({style:"circle",size:o.size,outline:e,color:o.noDataColor})}else if(T(e)){const e=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(o.outline.color),width:o.outline.width});r=new t.SimpleFillSymbol({style:"solid",outline:e,color:o.noDataColor})}else I(e)&&(r=new t.SimpleLineSymbol({style:"solid",color:new t.esriColor(o.noDataColor),width:o.width}));return r}function Fe(e,i){const{modules:n}=K,t=n.typeSchemes.getSchemes({theme:"default",basemap:ne(e),geometryType:"line"===i?"polyline":i}).primaryScheme;let o;if("point"===i){const e=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(t.outline.color),width:t.outline.width});o=new n.SimpleMarkerSymbol({style:"circle",size:t.size,outline:e,color:t.noDataColor})}else if("polygon"===i){const e=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(t.outline.color),width:t.outline.width});o=new n.SimpleFillSymbol({style:"solid",outline:e,color:t.noDataColor})}else"line"===i&&(o=new n.SimpleLineSymbol({style:"solid",color:new n.esriColor(t.noDataColor),width:t.width}));return o}function Ce(){const{modules:e}=K;return new e.SimpleFillSymbol({color:[184,184,184,1],style:"solid",outline:{color:"white",width:1}})}function xe(e){if(!e)return!1;let i=!1;const n=we(e);if(e&&"esri.symbols.SimpleFillSymbol"===e.declaredClass){const t=e.outline;n&&0!==n.a||t&&t.color&&0!==t.color.a||(i=!0)}else if(e&&"esri.symbols.SimpleLineSymbol"===e.declaredClass)n&&0!==n.a||(i=!0);else if(e&&"esri.symbols.SimpleMarkerSymbol"===e.declaredClass){const t=e.outline;n&&0!==n.a||t&&t.color&&0!==t.color.a||(i=!0)}return i}function Ne(e){const{modules:i}=K;return!!e&&"dark"===i.previewSymbol2D.getContrastingBackgroundTheme(e,245)}function we(e){var i,n;const{modules:t}=K;return"cim"===(null==e?void 0:e.type)?t.esriColor.fromJSON(null===(i=t.cimSymbolUtils.getCIMSymbolColor(e))||void 0===i?void 0:i.toJSON()):"simple-marker"===(null==e?void 0:e.type)&&["x","cross"].indexOf(null==e?void 0:e.style)>-1?null===(n=null==e?void 0:e.outline)||void 0===n?void 0:n.color:null==e?void 0:e.color}function Oe(e,i){const{modules:n}=K;"picture-marker"!==e.type&&("cim"===e.type?n.cimSymbolUtils.applyCIMSymbolColor(e,i):"simple-marker"===e.type&&e.style&&["cross","x"].indexOf(e.style)>-1?(e.outline||(e.outline=new __esri.SimpleLineSymbol),e.outline.color=i):e.color=i)}function Me(e,i){return e&&(e.a=i),e}function Re(e){const{modules:i}=K;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolSize(e):e.size?e.size:e.width}function ze(e,i){const{modules:n}=K;if("cim"===e.type)n.cimSymbolUtils.scaleCIMSymbolTo(e,i);else if((0,a.i)(e.size))e.size=i;else{const n=e.height/e.width;e.width=i,e.height=e.width*n}}function _e(e){var i,n;const t=null===(i=e.data.symbol.symbolLayers)||void 0===i?void 0:i.find((e=>["CIMSolidStroke","CIMPictureStroke"].indexOf(e.type)>-1));return null!==(n=null==t?void 0:t.width)&&void 0!==n?n:0}function ke(e){const{modules:i}=K;return"cim"===e.type?i.cimSymbolUtils.getCIMSymbolRotation(e,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1?e.angle:void 0}function Ve(e,i){const{modules:n}=K;null!=i&&("cim"===e.type?n.cimSymbolUtils.applyCIMSymbolRotation(e,i,!0):["simple-marker","picture-marker"].indexOf(e.type)>-1&&(e.angle=i))}function De(e){var i;return"picture-marker"!==e.type&&("cim"===e.type?["CIMPolygonSymbol"].indexOf(e.data.symbol.type)>-1&&!!Ue(e):!!(null===(i=e.outline)||void 0===i?void 0:i.color))}function Ae(e,i){var n,t;if(null===(n=e.uniqueValueInfos)||void 0===n?void 0:n.length){const n=e.uniqueValueInfos.slice();n.map((e=>{const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n})),e.uniqueValueInfos=n}else if(null===(t=e.classBreakInfos)||void 0===t?void 0:t.length){const n=e.classBreakInfos.slice();n.map((e=>{const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n})),e.classBreakInfos=n}else if(e.symbol){const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n}}function Be(e,i){var n,t;if(null===(n=e.uniqueValueInfos)||void 0===n?void 0:n.length){const n=e.uniqueValueInfos.slice();n.map((e=>{const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n})),e.uniqueValueInfos=n}else if(null===(t=e.classBreakInfos)||void 0===t?void 0:t.length){const n=e.classBreakInfos.slice();n.map((e=>{const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n})),e.classBreakInfos=n}else if(e.symbol){const n=i.clone();Oe(n,we(e.symbol)),e.symbol=n}}function Le(e){var i;return"cim"===e.type&&"CIMLineSymbol"===(null===(i=e.data.symbol)||void 0===i?void 0:i.type)}function Ue(e){var i,n,t;if("CIMPointSymbol"!==(null===(i=e.data.symbol)||void 0===i?void 0:i.type))return"CIMLineSymbol"===(null===(n=e.data.symbol)||void 0===n?void 0:n.type)?function(e){return e.data.symbol.symbolLayers[0]}(e):"CIMPolygonSymbol"===(null===(t=e.data.symbol)||void 0===t?void 0:t.type)?function(e){return e.data.symbol.symbolLayers.find((e=>"CIMSolidStroke"===e.type))}(e):void 0}function Pe(){var e;const{mapImageSublayer:i,layer:n}=K;return!i||!!(null===(e=n.sourceJSON)||void 0===e?void 0:e.cimVersion)}function qe(e){return!!(e.style&&["cross","x"].indexOf(e.style)>-1)}function Ge(e){return"picture-marker"===e.type||"cim"===e.type&&!function(e){const{modules:i}=K;return!!i.cimSymbolUtils.getCIMSymbolColor(e)}(e)}function Je(e){return"simple-line"===e.type?{width:12,height:3}:"cim"===e.type&&"CIMLineSymbol"===e.data.symbol.type?void 0:"simple-fill"===e.type?14:"cim"===e.type&&"CIMPolygonSymbol"===e.data.symbol.type?void 0:"cim"===e.type?20:14}function je(e,i){var n,t,o,r;if(e.type!==i.type)return{hasOtherChanges:!0,any:!0};const l=ke(e)!==ke(i),s=Math.abs(Re(e)-Re(i))>.01,a=JSON.stringify(null===(n=we(e))||void 0===n?void 0:n.toJSON())!==JSON.stringify(null===(t=we(i))||void 0===t?void 0:t.toJSON()),c=["simple-marker","simple-fill"].indexOf(e.type)>-1&&JSON.stringify(null===(o=e.outline)||void 0===o?void 0:o.toJSON())!==JSON.stringify(null===(r=i.outline)||void 0===r?void 0:r.toJSON()),u=e.clone();ze(u,Re(i)),Oe(u,we(i)),["simple-marker","simple-fill"].indexOf(e.type)>-1&&(u.outline=i.outline.clone()),Ve(u,ke(i));const d=(p=u,m=i,!(JSON.stringify(p.toJSON())===JSON.stringify(m.toJSON())||"cim"===p.type&&"cim"===m.type&&He(p.toJSON().symbol,m.toJSON().symbol)));var p,m;return{rotation:l&&!s&&!a&&!c&&!d,size:s&&!l&&!a&&!c&&!d,outline:c&&!l&&!s&&!a&&!d,color:a&&!l&&!s&&!c&&!d,other:d,any:l||s||c||a||d}}function We(e,i,n,t){var o;return t.rotation?Ve(e,ke(i)):t.size?ze(e,Re(i)):t.color?("picture-marker"===e.type&&(e=i.clone()),Oe(e,n)):t.outline?"picture-marker"===e.type?e=i.clone():e.outline=null===(o=i.outline)||void 0===o?void 0:o.clone():Oe(e=i.clone(),n),e}function He(e,i){const n=Object.keys,t=typeof e;return e&&i&&"object"===t&&t===typeof i?n(e).length===n(i).length&&n(e).every((n=>"size"===n||"width"===n?Math.abs(e[n]-i[n])<.01:He(e[n],i[n]))):e===i}function Ke(e,i,n){const t=e&&e.visualVariables;return!!t&&t.some((e=>{const t=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(t)&&!(0,a.i)(n)&&!o||t===n||"auto"===n&&o)}))}function Xe(e,i,n){const t=e&&e.visualVariables;if(t){const e=t.filter((e=>{const t=e.target,o="$view.scale"===e.valueExpression;return e.type===i&&(!(0,a.i)(t)&&!(0,a.i)(n)&&!o||t===n||"auto"===n&&o&&!t)}));if(e.length)return e[0]}}function $e(e,i,n){if(!e.authoringInfo)return;const t=e&&e.authoringInfo&&e.authoringInfo.visualVariables;if(t){const e=t.filter((e=>{const t=e.target;return e.type===i&&(!(0,a.i)(t)&&!(0,a.i)(n)||t===n)}));if(e.length)return e[0]}}function Ye(e,i,n){const t=e&&e.visualVariables;if(t){const e=t.filter((e=>{const t=e.target,o="$view.scale"===e.valueExpression;return!(e.type===i&&(!(0,a.i)(t)&&!(0,a.i)(n)&&!o||t===n||"auto"===n&&o))}));if(e.length)return e}}function Qe(e,i,n){if(!("authoringInfo"in e)||!e.authoringInfo)return;const t=e&&e.authoringInfo.visualVariables&&e.authoringInfo.visualVariables;if(t){const e=t.filter((e=>{const t=e.target;return!(e.type===i&&(!(0,a.i)(t)&&!(0,a.i)(n)||t===n))}));if(e.length)return e}}function Ze(e,i){if(!("renderer"in i)||!("visualVariables"in i.renderer))return;const{renderer:n}=i;n.visualVariables=Ye(n,e),"authoringInfo"in n&&n.authoringInfo&&(n.authoringInfo.visualVariables=Qe(n,e))}function ei(e){const i=Q(e),n=Xe(e,"size","outline"),t=Xe(e,"size","auto"),o=Xe(e,"rotation");let r,l;return-1===["predominance","predominance-size"].indexOf(i)&&(r=Xe(e,"opacity"),l=$e(e,"opacity")),{sizeOutlineVisVar:n,sizeAutoVisVar:t,opacityVisVar:r,authOpacityVisVar:l,rotationVisVar:o}}function ii(e,i,n){const{sizeOutlineVisVar:t,opacityVisVar:o,authOpacityVisVar:r,rotationVisVar:l}=e;t&&(i.visualVariables=Ye(i,"size","outline")||[],i.visualVariables.push(t)),!o||!r||n&&n.notOpacity||(i.visualVariables=Ye(i,"opacity")||[],i.visualVariables.push(o),i.authoringInfo=i.authoringInfo||{},i.authoringInfo.visualVariables=Qe(i,"opacity")||[],i.authoringInfo.visualVariables.push(r)),l&&(i.visualVariables=i.visualVariables||[],i.visualVariables.push(l))}var ni;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(ni||(ni={}));const ti={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,STRETCH_TYPE:ni.NONE};async function oi(){const{layer:e,modules:i}=K,n=e,t="imagery"===n.type?n.rasterFunction:void 0;return n.bandIds=await si(n),i.RasterRGBCreator.createRenderer({layer:n,rasterFunction:t,rgbBandIds:n.bandIds}).then((e=>(n.effect=void 0,n.renderer=e.renderer,Promise.resolve(e))),(e=>Promise.reject(e)))}function ri(e){const{layer:i,modules:n}=K,t=i,o=t.renderer,r="imagery"===t.type?t.rasterFunction:void 0;return e=e||{},n.RasterRGBCreator.createRenderer({layer:t,rasterFunction:r,rgbBandIds:t.bandIds,stretchType:e.stretchType||o.stretchType}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,E(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=ti.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}function li(e){var i,n,t,o;const r="raster-stretch"===(null===(i=e.renderer)||void 0===i?void 0:i.type);if(!r)return!1;const l=(null===(n=e.bandIds)||void 0===n?void 0:n.length)>1,s=(null===(t=e.rasterInfo)||void 0===t?void 0:t.bandCount)>1,a=(null===(o=e.renderer.gamma)||void 0===o?void 0:o.length)>1;return r&&(l||s&&a)}async function si(e){var i;const{modules:n}=K,{rasterInfo:t}=e,{bandCount:o}=t;let r=await n.RasterRendererUtils.getDefaultBandCombination({layer:e});const l=r.length;return l!==o&&r.push(...new Array(3-l).fill(o-1)),3!==(null===(i=e.bandIds)||void 0===i?void 0:i.length)&&(e.bandIds=r),e.bandIds}var ai;!function(e){e.NONE="none",e.MINIMUM_MAXIMUM="min-max",e.PERCENT_CLIP="percent-clip",e.STANDARD_DEVIATION="standard-deviation"}(ai||(ai={}));const ci={STD_DEV:2,MIN_PERCENT:2,MAX_PERCENT:2,GAMMA:1,BAND_INDEX:0,STRETCH_TYPE:ai.NONE};function ui(){const{layer:e,modules:i}=K,n=e,t="imagery"===n.type?n.rasterFunction:void 0;return n.bandIds=[0],i.RasterStretchCreator.createRenderer({layer:n,rasterFunction:t}).then((e=>{n.effect=void 0;const i=e.renderer.statistics;return Array.isArray(i)&&i.length>1&&(e.renderer.statistics=[{min:i[0],max:i[1],avg:i[2],stddev:i[3]}]),n.renderer=e.renderer,Promise.resolve(e)}),(e=>Promise.reject(e)))}function di(e){const{layer:i,modules:n}=K,t=i,o=t.renderer,r="imagery"===t.type?t.rasterFunction:void 0;return e=e||{},n.RasterStretchCreator.createRenderer({layer:t,rasterFunction:r,stretchType:e.stretchType||o.stretchType}).then((e=>(e.renderer.dynamicRangeAdjustment=o.dynamicRangeAdjustment,e.renderer.colorRamp=o.colorRamp,e.renderer.statistics=o.statistics,E(e.renderer.numberOfStandardDeviations)&&0!==e.renderer.numberOfStandardDeviations||(e.renderer.numberOfStandardDeviations=ci.STD_DEV),Promise.resolve(e))),(e=>Promise.reject(e)))}async function pi(){const{layer:e,modules:i}=K,n=e,t="imagery"===n.type?n.rasterFunction:void 0;return i.RasterUniqueValueCreator.createRenderer({layer:n,rasterFunction:t})}function mi(e){const{layer:i,modules:n}=K,t=i,o=t.renderer,r="imagery"===t.type?t.rasterFunction:void 0;return e=e||{},n.RasterUniqueValueCreator.createRenderer({layer:t,rasterFunction:r,classFieldName:e.field||o.field}).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}function fi(){var e;const{layer:i,modules:n,strings:t}=K,o=i;let r;const{rasterInfo:l}=o,s=null===(e=null==l?void 0:l.attributeTable)||void 0===e?void 0:e.fields;return r=s?s.filter((e=>"oid"!==e.type)):[new n.Field({name:"value",alias:t.panels.uniqueValue.value})],r}}}]);