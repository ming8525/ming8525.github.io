"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-symbol--4112e9"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-symbol-styler-inline-input.entry.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-symbol-styler-inline-input.entry.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_symbol_styler_inline_input: () => (/* binding */ ArcgisSymbolStylerInlineInput)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const CSS = {
    recent: "recent",
    preview: "preview",
    colorPickerContainer: "color-picker-container"
};

const arcgisSymbolStylerInlineInputCss = ":host{--arcgis-symbol-styler-inline-input-trigger-background-color:var(--arcgis-app-background);display:flex}:host([disabled]){opacity:var(--arcgis-app-disabled-opacity);pointer-events:none}button{overflow:hidden;background-color:var(--arcgis-symbol-styler-inline-input-trigger-background-color);align-items:center;border:none;border-radius:0;box-sizing:border-box;cursor:pointer;display:flex;font-family:inherit;gap:8px;height:100%;justify-content:center;outline-color:transparent;outline-offset:0;padding:3px 0;padding-inline:3px 8px;position:relative;text-decoration:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;text-align:center;-webkit-appearance:none;width:100%}button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}button:hover{text-decoration:none}.preview{border:1px solid #949494;display:flex;align-items:center;flex-grow:1}.container{display:flex;gap:16px;width:100%}::slotted([slot=preview]){flex-grow:1;display:flex}calcite-icon{color:var(--calcite-color-text-3)}";

const ArcgisSymbolStylerInlineInput = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisSymbolStylerInlineInputClose = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSymbolStylerInlineInputClose", 7);
        this.arcgisSymbolStylerInlineInputOpen = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSymbolStylerInlineInputOpen", 7);
        //--------------------------------------------------------------------------
        //
        //  Private Methods
        //
        //--------------------------------------------------------------------------
        this.handlePanelDismissedChange = (event) => {
            const panel = event.currentTarget;
            if (panel.closed) {
                this.close();
                panel.closed = false;
            }
            event.stopPropagation();
        };
        this.handleTriggerClick = () => {
            this.open = !this.open;
            if (this.open) {
                setTimeout(() => {
                    // doesn't work without timeout
                    this.panelElement.setFocus();
                }, 300);
            }
        };
        this.handleDone = () => {
            this.close();
        };
        this.handlePopoverOpen = (event) => {
            this.arcgisSymbolStylerInlineInputOpen.emit();
            event.stopPropagation();
        };
        this.handlePopoverClose = (event) => {
            this.arcgisSymbolStylerInlineInputClose.emit();
            event.stopPropagation();
        };
        this.handlePopoverKeyUp = ({ key }) => {
            if (key === "Escape") {
                this.close();
            }
        };
        this.setTriggerRef = (el) => {
            this.triggerEl = el;
        };
        this.setPreviewContainerRef = (el) => {
            this.previewContainerEl = el;
        };
        this.disabled = false;
        this.heading = undefined;
        this.iconEnd = "pencil";
        this.intlDone = undefined;
        this.label = undefined;
        this.popoverProps = undefined;
        this.open = false;
    }
    disabledChanged(value) {
        if (value && this.open) {
            this.close();
        }
    }
    onInlineInputOpen(event) {
        if (!this.open) {
            return;
        }
        if (!event.composedPath().includes(this.el)) {
            this.open = false;
        }
    }
    //--------------------------------------------------------------------------
    //
    //  Public Methods
    //
    //--------------------------------------------------------------------------
    async setFocus() {
        var _a;
        (_a = this.triggerEl) === null || _a === void 0 ? void 0 : _a.focus();
    }
    async close() {
        this.open = false;
        this.arcgisSymbolStylerInlineInputClose.emit();
        await this.setFocus();
    }
    //--------------------------------------------------------------------------
    //
    //  Render Methods
    //
    //--------------------------------------------------------------------------
    render() {
        const { popoverProps } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { pointerDisabled: true, onKeyUp: this.handlePopoverKeyUp, label: this.label, offsetDistance: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.offsetDistance) || 0, offsetSkidding: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.offsetSkidding) || 0, flipDisabled: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.flipDisabled) || false, open: this.open, overlayPositioning: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.overlayPositioning) || "fixed", referenceElement: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.refElement) || this.previewContainerEl, onCalcitePopoverClose: this.handlePopoverClose, onCalcitePopoverOpen: this.handlePopoverOpen, placement: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.placement) || "bottom" // setting to bottom (vs auto) to workaround absolute placement issue
            ,
            triggerDisabled: true }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-panel", { closable: true, onCalcitePanelClose: this.handlePanelDismissedChange, heading: this.heading, style: (popoverProps === null || popoverProps === void 0 ? void 0 : popoverProps.maxHeight) && { maxHeight: popoverProps.maxHeight }, ref: (node) => (this.panelElement = node) }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { appearance: "solid", scale: "m", slot: "footer", width: "full", label: this.intlDone, onClick: this.handleDone }, this.intlDone))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "container" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS.preview, ref: this.setPreviewContainerRef }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { disabled: this.disabled, onClick: this.handleTriggerClick, ref: this.setTriggerRef, type: "button", "aria-label": this.label }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "preview" }), this.iconEnd ? (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: this.iconEnd, scale: "s" }) : null)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content-end" }))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
    static get watchers() { return {
        "disabled": ["disabledChanged"]
    }; }
};
ArcgisSymbolStylerInlineInput.style = arcgisSymbolStylerInlineInputCss;



//# sourceMappingURL=arcgis-symbol-styler-inline-input.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLXN5bWJvbC0tNDExMmU5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNkc7O0FBRTdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdELDBGQUEwRixhQUFhLGtCQUFrQiwyQ0FBMkMsb0JBQW9CLE9BQU8sZ0JBQWdCLG1GQUFtRixtQkFBbUIsWUFBWSxnQkFBZ0Isc0JBQXNCLGVBQWUsYUFBYSxvQkFBb0IsUUFBUSxZQUFZLHVCQUF1QiwwQkFBMEIsaUJBQWlCLGNBQWMsdUJBQXVCLGtCQUFrQixxQkFBcUIseUJBQXlCLHNCQUFzQixpQkFBaUIsa0JBQWtCLHdCQUF3QixXQUFXLGFBQWEsNkNBQTZDLG1CQUFtQixhQUFhLHFCQUFxQixTQUFTLHlCQUF5QixhQUFhLG1CQUFtQixZQUFZLFdBQVcsYUFBYSxTQUFTLFdBQVcsMEJBQTBCLFlBQVksYUFBYSxhQUFhLGtDQUFrQzs7QUFFemlDO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4QixrREFBa0QscURBQVc7QUFDN0QsaURBQWlELHFEQUFXO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLEtBQUs7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGVBQWU7QUFDL0IsZ0JBQWdCLHFEQUFDLENBQUMsaURBQUksUUFBUSxxREFBQyxzQkFBc0I7QUFDckQ7QUFDQSxtQ0FBbUMsRUFBRSxxREFBQyxvQkFBb0IsOExBQThMLG1DQUFtQyw2Q0FBNkMsRUFBRSxxREFBQyxXQUFXLGlCQUFpQixHQUFHLHFEQUFDLHFCQUFxQixnSEFBZ0gsb0JBQW9CLHFEQUFDLFVBQVUsb0JBQW9CLEVBQUUscURBQUMsVUFBVSxzREFBc0QsRUFBRSxxREFBQyxhQUFhLDhIQUE4SCxFQUFFLHFEQUFDLFdBQVcsaUJBQWlCLGtCQUFrQixxREFBQyxtQkFBbUIsZ0NBQWdDLFlBQVkscURBQUMsV0FBVyxxQkFBcUI7QUFDdDRCO0FBQ0EsZUFBZSxPQUFPLHFEQUFVO0FBQ2hDLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFOEU7O0FBRTlFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vYXJjZ2lzLXN5bWJvbC1zdHlsZXItaW5saW5lLWlucHV0LmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBIIGFzIEhvc3QsIGQgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuXG5jb25zdCBDU1MgPSB7XG4gICAgcmVjZW50OiBcInJlY2VudFwiLFxuICAgIHByZXZpZXc6IFwicHJldmlld1wiLFxuICAgIGNvbG9yUGlja2VyQ29udGFpbmVyOiBcImNvbG9yLXBpY2tlci1jb250YWluZXJcIlxufTtcblxuY29uc3QgYXJjZ2lzU3ltYm9sU3R5bGVySW5saW5lSW5wdXRDc3MgPSBcIjpob3N0ey0tYXJjZ2lzLXN5bWJvbC1zdHlsZXItaW5saW5lLWlucHV0LXRyaWdnZXItYmFja2dyb3VuZC1jb2xvcjp2YXIoLS1hcmNnaXMtYXBwLWJhY2tncm91bmQpO2Rpc3BsYXk6ZmxleH06aG9zdChbZGlzYWJsZWRdKXtvcGFjaXR5OnZhcigtLWFyY2dpcy1hcHAtZGlzYWJsZWQtb3BhY2l0eSk7cG9pbnRlci1ldmVudHM6bm9uZX1idXR0b257b3ZlcmZsb3c6aGlkZGVuO2JhY2tncm91bmQtY29sb3I6dmFyKC0tYXJjZ2lzLXN5bWJvbC1zdHlsZXItaW5saW5lLWlucHV0LXRyaWdnZXItYmFja2dyb3VuZC1jb2xvcik7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MDtib3gtc2l6aW5nOmJvcmRlci1ib3g7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2ZvbnQtZmFtaWx5OmluaGVyaXQ7Z2FwOjhweDtoZWlnaHQ6MTAwJTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MDtwYWRkaW5nOjNweCAwO3BhZGRpbmctaW5saW5lOjNweCA4cHg7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1kZWNvcmF0aW9uOm5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO3RleHQtYWxpZ246Y2VudGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3dpZHRoOjEwMCV9YnV0dG9uOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpO291dGxpbmUtb2Zmc2V0OjJweH1idXR0b246aG92ZXJ7dGV4dC1kZWNvcmF0aW9uOm5vbmV9LnByZXZpZXd7Ym9yZGVyOjFweCBzb2xpZCAjOTQ5NDk0O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1ncm93OjF9LmNvbnRhaW5lcntkaXNwbGF5OmZsZXg7Z2FwOjE2cHg7d2lkdGg6MTAwJX06OnNsb3R0ZWQoW3Nsb3Q9cHJldmlld10pe2ZsZXgtZ3JvdzoxO2Rpc3BsYXk6ZmxleH1jYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpfVwiO1xuXG5jb25zdCBBcmNnaXNTeW1ib2xTdHlsZXJJbmxpbmVJbnB1dCA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuYXJjZ2lzU3ltYm9sU3R5bGVySW5saW5lSW5wdXRDbG9zZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzU3ltYm9sU3R5bGVySW5saW5lSW5wdXRDbG9zZVwiLCA3KTtcbiAgICAgICAgdGhpcy5hcmNnaXNTeW1ib2xTdHlsZXJJbmxpbmVJbnB1dE9wZW4gPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc1N5bWJvbFN0eWxlcklubGluZUlucHV0T3BlblwiLCA3KTtcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvL1xuICAgICAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgICAgIC8vXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdGhpcy5oYW5kbGVQYW5lbERpc21pc3NlZENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFuZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHBhbmVsLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBwYW5lbC5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVRyaWdnZXJDbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XG4gICAgICAgICAgICBpZiAodGhpcy5vcGVuKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3Qgd29yayB3aXRob3V0IHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYW5lbEVsZW1lbnQuc2V0Rm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZURvbmUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlUG9wb3Zlck9wZW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXJjZ2lzU3ltYm9sU3R5bGVySW5saW5lSW5wdXRPcGVuLmVtaXQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVBvcG92ZXJDbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcmNnaXNTeW1ib2xTdHlsZXJJbmxpbmVJbnB1dENsb3NlLmVtaXQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhhbmRsZVBvcG92ZXJLZXlVcCA9ICh7IGtleSB9KSA9PiB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFRyaWdnZXJSZWYgPSAoZWwpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckVsID0gZWw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0UHJldmlld0NvbnRhaW5lclJlZiA9IChlbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyRWwgPSBlbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaWNvbkVuZCA9IFwicGVuY2lsXCI7XG4gICAgICAgIHRoaXMuaW50bERvbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubGFiZWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9wb3ZlclByb3BzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB9XG4gICAgZGlzYWJsZWRDaGFuZ2VkKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbklubGluZUlucHV0T3BlbihldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcy5lbCkpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQdWJsaWMgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGFzeW5jIHNldEZvY3VzKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IHRoaXMudHJpZ2dlckVsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFyY2dpc1N5bWJvbFN0eWxlcklubGluZUlucHV0Q2xvc2UuZW1pdCgpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldEZvY3VzKCk7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBSZW5kZXIgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyBwb3BvdmVyUHJvcHMgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwiY2FsY2l0ZS1wb3BvdmVyXCIsIHsgcG9pbnRlckRpc2FibGVkOiB0cnVlLCBvbktleVVwOiB0aGlzLmhhbmRsZVBvcG92ZXJLZXlVcCwgbGFiZWw6IHRoaXMubGFiZWwsIG9mZnNldERpc3RhbmNlOiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLm9mZnNldERpc3RhbmNlKSB8fCAwLCBvZmZzZXRTa2lkZGluZzogKHBvcG92ZXJQcm9wcyA9PT0gbnVsbCB8fCBwb3BvdmVyUHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBvcG92ZXJQcm9wcy5vZmZzZXRTa2lkZGluZykgfHwgMCwgZmxpcERpc2FibGVkOiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLmZsaXBEaXNhYmxlZCkgfHwgZmFsc2UsIG9wZW46IHRoaXMub3Blbiwgb3ZlcmxheVBvc2l0aW9uaW5nOiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLm92ZXJsYXlQb3NpdGlvbmluZykgfHwgXCJmaXhlZFwiLCByZWZlcmVuY2VFbGVtZW50OiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLnJlZkVsZW1lbnQpIHx8IHRoaXMucHJldmlld0NvbnRhaW5lckVsLCBvbkNhbGNpdGVQb3BvdmVyQ2xvc2U6IHRoaXMuaGFuZGxlUG9wb3ZlckNsb3NlLCBvbkNhbGNpdGVQb3BvdmVyT3BlbjogdGhpcy5oYW5kbGVQb3BvdmVyT3BlbiwgcGxhY2VtZW50OiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLnBsYWNlbWVudCkgfHwgXCJib3R0b21cIiAvLyBzZXR0aW5nIHRvIGJvdHRvbSAodnMgYXV0bykgdG8gd29ya2Fyb3VuZCBhYnNvbHV0ZSBwbGFjZW1lbnQgaXNzdWVcbiAgICAgICAgICAgICxcbiAgICAgICAgICAgIHRyaWdnZXJEaXNhYmxlZDogdHJ1ZSB9LCBoKFwiY2FsY2l0ZS1wYW5lbFwiLCB7IGNsb3NhYmxlOiB0cnVlLCBvbkNhbGNpdGVQYW5lbENsb3NlOiB0aGlzLmhhbmRsZVBhbmVsRGlzbWlzc2VkQ2hhbmdlLCBoZWFkaW5nOiB0aGlzLmhlYWRpbmcsIHN0eWxlOiAocG9wb3ZlclByb3BzID09PSBudWxsIHx8IHBvcG92ZXJQcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcG9wb3ZlclByb3BzLm1heEhlaWdodCkgJiYgeyBtYXhIZWlnaHQ6IHBvcG92ZXJQcm9wcy5tYXhIZWlnaHQgfSwgcmVmOiAobm9kZSkgPT4gKHRoaXMucGFuZWxFbGVtZW50ID0gbm9kZSkgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImNvbnRlbnRcIiB9KSwgaChcImNhbGNpdGUtYnV0dG9uXCIsIHsgYXBwZWFyYW5jZTogXCJzb2xpZFwiLCBzY2FsZTogXCJtXCIsIHNsb3Q6IFwiZm9vdGVyXCIsIHdpZHRoOiBcImZ1bGxcIiwgbGFiZWw6IHRoaXMuaW50bERvbmUsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlRG9uZSB9LCB0aGlzLmludGxEb25lKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiY29udGFpbmVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBDU1MucHJldmlldywgcmVmOiB0aGlzLnNldFByZXZpZXdDb250YWluZXJSZWYgfSwgaChcImJ1dHRvblwiLCB7IGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLCBvbkNsaWNrOiB0aGlzLmhhbmRsZVRyaWdnZXJDbGljaywgcmVmOiB0aGlzLnNldFRyaWdnZXJSZWYsIHR5cGU6IFwiYnV0dG9uXCIsIFwiYXJpYS1sYWJlbFwiOiB0aGlzLmxhYmVsIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJwcmV2aWV3XCIgfSksIHRoaXMuaWNvbkVuZCA/IGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiB0aGlzLmljb25FbmQsIHNjYWxlOiBcInNcIiB9KSA6IG51bGwpKSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImNvbnRlbnQtZW5kXCIgfSkpKSk7XG4gICAgfVxuICAgIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcImRpc2FibGVkXCI6IFtcImRpc2FibGVkQ2hhbmdlZFwiXVxuICAgIH07IH1cbn07XG5BcmNnaXNTeW1ib2xTdHlsZXJJbmxpbmVJbnB1dC5zdHlsZSA9IGFyY2dpc1N5bWJvbFN0eWxlcklubGluZUlucHV0Q3NzO1xuXG5leHBvcnQgeyBBcmNnaXNTeW1ib2xTdHlsZXJJbmxpbmVJbnB1dCBhcyBhcmNnaXNfc3ltYm9sX3N0eWxlcl9pbmxpbmVfaW5wdXQgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLXN5bWJvbC1zdHlsZXItaW5saW5lLWlucHV0LmVudHJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==