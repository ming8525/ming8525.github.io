"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-cf0438"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-server-list.entry.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-server-list.entry.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_server_list: () => (/* binding */ ArcgisNewItemPagesServerList)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data-store-e2ae6a67.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-e2ae6a67.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/* harmony import */ var _service_8c2c4241_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./service-8c2c4241.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/service-8c2c4241.js");
/* harmony import */ var _data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./data-store-8e83fb7a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8e83fb7a.js");
/* harmony import */ var _feature_layer_573bb473_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./feature-layer-573bb473.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-573bb473.js");
/* harmony import */ var _item_properties_10491b2e_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./item-properties-10491b2e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-properties-10491b2e.js");
/* harmony import */ var _feature_layer_79fb302c_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./feature-layer-79fb302c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-79fb302c.js");
/* harmony import */ var _guid_aeaed84d_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./guid-aeaed84d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/guid-aeaed84d.js");
/* harmony import */ var _thumbnail_bcb89e69_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./thumbnail-bcb89e69.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/thumbnail-bcb89e69.js");
/* harmony import */ var _user_3ea69c3a_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./user-3ea69c3a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/user-3ea69c3a.js");
/* harmony import */ var _query_d62660d4_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./query-d62660d4.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/query-d62660d4.js");
/* harmony import */ var _api_2e3a136f_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./api-2e3a136f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/api-2e3a136f.js");
/* harmony import */ var _string_58a5fef3_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./string-58a5fef3.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/string-58a5fef3.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _item_c58ffced_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./item-c58ffced.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-c58ffced.js");
/* harmony import */ var _server_item_8d384796_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./server-item-8d384796.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/server-item-8d384796.js");
/* harmony import */ var _item_3535552d_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./item-3535552d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-3535552d.js");
/* harmony import */ var _functional_81373f6d_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./functional-81373f6d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-81373f6d.js");
/* harmony import */ var _item_types_2029b06b_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./item-types-2029b06b.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/item-types-2029b06b.js");
/* harmony import */ var _feature_layer_17b64946_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./feature-layer-17b64946.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/feature-layer-17b64946.js");
/* harmony import */ var _ags_eb458a03_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ags-eb458a03.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ags-eb458a03.js");
/* harmony import */ var _url_35875a10_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./url-35875a10.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-35875a10.js");
/* harmony import */ var _storage_0353a769_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./storage-0353a769.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/storage-0353a769.js");
/* harmony import */ var _file_bf8ab90f_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./file-bf8ab90f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/file-bf8ab90f.js");
/* harmony import */ var _store_6a88e6c5_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./store-6a88e6c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/store-6a88e6c5.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


































const arcgisNewItemPagesServerListCss = ":host{font-size:0.875rem;font-weight:500}.heading{color:var(--calcite-color-text-1)}.sub-heading{font-weight:400;color:var(--calcite-color-text-3)}.row-wrapper{margin-top:0.5rem;margin-bottom:0.5rem;display:flex;width:100%;padding-top:0.75rem;padding-bottom:0.75rem}.row-divider{box-shadow:0 -1px 0 #eaeaea}.status-wrapper{display:flex;gap:0.5rem;line-height:1rem}.success{--calcite-ui-icon-color:var(--calcite-color-status-success)}.failure{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.error{--calcite-ui-icon-color:var(--calcite-color-status-warning)}.validating{--calcite-ui-icon-color:var(--calcite-color-status-info)}.half-row{width:50%}.server-wrapper:hover{cursor:pointer}";

const ArcgisNewItemPagesServerList = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.serverStatusIcons = {
            success: "check-circle-f",
            failure: "exclamation-mark-circle-f",
            error: "exclamation-mark-triangle-f",
            validating: "information"
        };
        this.serverList = undefined;
        this.serverId = undefined;
        this.error = undefined;
    }
    async componentWillLoad() {
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_3__.u.i18n.serverSelection;
        this.serverList = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.serverList;
        this.serverList = this.serverList.map((server) => (Object.assign(Object.assign({}, server), { serverStatus: "validating" })));
        Promise.all(this.serverList.map((server) => (0,_data_store_e2ae6a67_js__WEBPACK_IMPORTED_MODULE_1__.e)(server, _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.dataStoreId))).then((responses) => {
            this.serverList = this.serverList.map((server, index) => {
                return Object.assign(Object.assign({}, server), { serverStatus: responses[index].result });
            });
            if (this.serverList.length === 1 && this.serverList[0].serverStatus === "success") {
                this.serverId = this.serverList[0]["id"];
            }
        });
    }
    handleNext() {
        if (!this.serverId) {
            this.error = true;
            return;
        }
        _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_2__.a.serverId = this.serverId;
        this.newItemUpdatePage.emit("itemProperties");
    }
    convertStatusDisplayText(status) {
        const i18n = this.i18n;
        const displayTable = {
            success: i18n.status.success,
            failure: i18n.status.failure,
            error: i18n.status.error,
            validating: i18n.status.validating
        };
        return displayTable[status];
    }
    render() {
        const { i18n, error, serverList } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "heading" }, i18n.layer.heading), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", { class: "sub-heading" }, " ", i18n.layer.subHeading), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "row-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "half-row" }, i18n.list.title), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "half-row" }, i18n.list.status)), serverList.map((server) => {
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "row-wrapper row-divider" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "half-row" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { layout: "inline", class: "server-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-radio-button", { disabled: server.serverStatus !== "success", value: server["id"], onCalciteRadioButtonChange: (e) => (this.serverId = e.target.value), checked: this.serverId === server["id"] }), server["url"])), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "half-row" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "status-wrapper" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: {
                    success: server.serverStatus === "success",
                    failure: server.serverStatus === "failure",
                    error: server.serverStatus === "error",
                    validating: server.serverStatus === "validating"
                }, scale: "s", icon: this.serverStatusIcons[server.serverStatus] }), this.convertStatusDisplayText(server.serverStatus)))));
        }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: i18n.error.noServerSelectedHeading, description: i18n.error.noServerSelectedDescription, active: error, onAlertDismiss: () => {
                this.error = false;
            } })));
    }
};
ArcgisNewItemPagesServerList.style = arcgisNewItemPagesServerListCss;



//# sourceMappingURL=arcgis-new-item-pages-server-list.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtY2YwNDM4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUM0RjtBQUNwQjtBQUNiO0FBQ047QUFDdkI7QUFDSztBQUNMO0FBQ0Q7QUFDRjtBQUNPO0FBQ0g7QUFDRztBQUNHO0FBQ0U7QUFDRjtBQUNUO0FBQ0s7QUFDTDtBQUNDO0FBQ0Y7QUFDRztBQUNIO0FBQ0M7QUFDTztBQUNQO0FBQ007QUFDQTtBQUNHO0FBQ1Y7QUFDQTtBQUNJO0FBQ0g7QUFDQzs7QUFFN0IsK0NBQStDLG1CQUFtQixnQkFBZ0IsU0FBUyxrQ0FBa0MsYUFBYSxnQkFBZ0Isa0NBQWtDLGFBQWEsa0JBQWtCLHFCQUFxQixhQUFhLFdBQVcsb0JBQW9CLHVCQUF1QixhQUFhLDRCQUE0QixnQkFBZ0IsYUFBYSxXQUFXLGlCQUFpQixTQUFTLDREQUE0RCxTQUFTLDJEQUEyRCxPQUFPLDREQUE0RCxZQUFZLHlEQUF5RCxVQUFVLFVBQVUsc0JBQXNCLGVBQWU7O0FBRS90QjtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsaUNBQWlDLHFEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOENBQVk7QUFDaEMsMEJBQTBCLG9EQUFZO0FBQ3RDLHlGQUF5RixhQUFhLDRCQUE0QjtBQUNsSSxvREFBb0QsMERBQXVCLFNBQVMsb0RBQVk7QUFDaEc7QUFDQSxxREFBcUQsYUFBYSx1Q0FBdUM7QUFDekcsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9EQUFZO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBCQUEwQjtBQUMxQyxnQkFBZ0IscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLFFBQVEsa0JBQWtCLHVCQUF1QixxREFBQyxRQUFRLHNCQUFzQiwrQkFBK0IscURBQUMsVUFBVSxzQkFBc0IsRUFBRSxxREFBQyxVQUFVLG1CQUFtQixvQkFBb0IscURBQUMsVUFBVSxtQkFBbUI7QUFDalEsb0JBQW9CLHFEQUFDLFVBQVUsa0NBQWtDLEVBQUUscURBQUMsVUFBVSxtQkFBbUIsRUFBRSxxREFBQyxvQkFBb0IsMkNBQTJDLEVBQUUscURBQUMsMkJBQTJCLGdMQUFnTCxvQkFBb0IscURBQUMsVUFBVSxtQkFBbUIsRUFBRSxxREFBQyxVQUFVLHlCQUF5QixFQUFFLHFEQUFDLG1CQUFtQjtBQUMvZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpRUFBaUU7QUFDbEYsU0FBUyxHQUFHLHFEQUFDLDRCQUE0QjtBQUN6QztBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRTZFOztBQUU3RSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1zZXJ2ZXItbGlzdC5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCwgSCBhcyBIb3N0IH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyBlIGFzIHZhbGlkYXRlRGF0YXN0b3JlU2VydmVyIH0gZnJvbSAnLi9kYXRhLXN0b3JlLWUyYWU2YTY3LmpzJztcbmltcG9ydCB7IGEgYXMgYWRkSXRlbVN0YXRlIH0gZnJvbSAnLi9hZGQtaXRlbS1kYmJlMmY1Ny5qcyc7XG5pbXBvcnQgeyB1IGFzIHVpU3RvcmVTdGF0ZSB9IGZyb20gJy4vdWktYmNhN2JjZDEuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL3VybC00YzNhZTU0Yy5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC00NGRlOGZjZi5qcyc7XG5pbXBvcnQgJy4vc2VydmljZS04YzJjNDI0MS5qcyc7XG5pbXBvcnQgJy4vZGF0YS1zdG9yZS04ZTgzZmI3YS5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci01NzNiYjQ3My5qcyc7XG5pbXBvcnQgJy4vaXRlbS1wcm9wZXJ0aWVzLTEwNDkxYjJlLmpzJztcbmltcG9ydCAnLi9mZWF0dXJlLWxheWVyLTc5ZmIzMDJjLmpzJztcbmltcG9ydCAnLi9ndWlkLWFlYWVkODRkLmpzJztcbmltcG9ydCAnLi90aHVtYm5haWwtYmNiODllNjkuanMnO1xuaW1wb3J0ICcuL3VzZXItM2VhNjljM2EuanMnO1xuaW1wb3J0ICcuL3F1ZXJ5LWQ2MjY2MGQ0LmpzJztcbmltcG9ydCAnLi9hcGktMmUzYTEzNmYuanMnO1xuaW1wb3J0ICcuL3N0cmluZy01OGE1ZmVmMy5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCAnLi9pdGVtLWM1OGZmY2VkLmpzJztcbmltcG9ydCAnLi9zZXJ2ZXItaXRlbS04ZDM4NDc5Ni5qcyc7XG5pbXBvcnQgJy4vaXRlbS0zNTM1NTUyZC5qcyc7XG5pbXBvcnQgJy4vZnVuY3Rpb25hbC04MTM3M2Y2ZC5qcyc7XG5pbXBvcnQgJy4vaXRlbS10eXBlcy0yMDI5YjA2Yi5qcyc7XG5pbXBvcnQgJy4vZmVhdHVyZS1sYXllci0xN2I2NDk0Ni5qcyc7XG5pbXBvcnQgJy4vYWdzLWViNDU4YTAzLmpzJztcbmltcG9ydCAnLi91cmwtMzU4NzVhMTAuanMnO1xuaW1wb3J0ICcuL3N0b3JhZ2UtMDM1M2E3NjkuanMnO1xuaW1wb3J0ICcuL2ZpbGUtYmY4YWI5MGYuanMnO1xuaW1wb3J0ICcuL3N0b3JlLTZhODhlNmM1LmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzU2VydmVyTGlzdENzcyA9IFwiOmhvc3R7Zm9udC1zaXplOjAuODc1cmVtO2ZvbnQtd2VpZ2h0OjUwMH0uaGVhZGluZ3tjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9LnN1Yi1oZWFkaW5ne2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyl9LnJvdy13cmFwcGVye21hcmdpbi10b3A6MC41cmVtO21hcmdpbi1ib3R0b206MC41cmVtO2Rpc3BsYXk6ZmxleDt3aWR0aDoxMDAlO3BhZGRpbmctdG9wOjAuNzVyZW07cGFkZGluZy1ib3R0b206MC43NXJlbX0ucm93LWRpdmlkZXJ7Ym94LXNoYWRvdzowIC0xcHggMCAjZWFlYWVhfS5zdGF0dXMtd3JhcHBlcntkaXNwbGF5OmZsZXg7Z2FwOjAuNXJlbTtsaW5lLWhlaWdodDoxcmVtfS5zdWNjZXNzey0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLXN1Y2Nlc3MpfS5mYWlsdXJley0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlcil9LmVycm9yey0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLXdhcm5pbmcpfS52YWxpZGF0aW5ney0tY2FsY2l0ZS11aS1pY29uLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWluZm8pfS5oYWxmLXJvd3t3aWR0aDo1MCV9LnNlcnZlci13cmFwcGVyOmhvdmVye2N1cnNvcjpwb2ludGVyfVwiO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNTZXJ2ZXJMaXN0ID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwibmV3SXRlbVVwZGF0ZVBhZ2VcIiwgNyk7XG4gICAgICAgIHRoaXMuc2VydmVyU3RhdHVzSWNvbnMgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiBcImNoZWNrLWNpcmNsZS1mXCIsXG4gICAgICAgICAgICBmYWlsdXJlOiBcImV4Y2xhbWF0aW9uLW1hcmstY2lyY2xlLWZcIixcbiAgICAgICAgICAgIGVycm9yOiBcImV4Y2xhbWF0aW9uLW1hcmstdHJpYW5nbGUtZlwiLFxuICAgICAgICAgICAgdmFsaWRhdGluZzogXCJpbmZvcm1hdGlvblwiXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VydmVyTGlzdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zZXJ2ZXJJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgICAgIHRoaXMuaTE4biA9IHVpU3RvcmVTdGF0ZS5pMThuLnNlcnZlclNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5zZXJ2ZXJMaXN0ID0gYWRkSXRlbVN0YXRlLnNlcnZlckxpc3Q7XG4gICAgICAgIHRoaXMuc2VydmVyTGlzdCA9IHRoaXMuc2VydmVyTGlzdC5tYXAoKHNlcnZlcikgPT4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2VydmVyKSwgeyBzZXJ2ZXJTdGF0dXM6IFwidmFsaWRhdGluZ1wiIH0pKSk7XG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMuc2VydmVyTGlzdC5tYXAoKHNlcnZlcikgPT4gdmFsaWRhdGVEYXRhc3RvcmVTZXJ2ZXIoc2VydmVyLCBhZGRJdGVtU3RhdGUuZGF0YVN0b3JlSWQpKSkudGhlbigocmVzcG9uc2VzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlcnZlckxpc3QgPSB0aGlzLnNlcnZlckxpc3QubWFwKChzZXJ2ZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2VydmVyKSwgeyBzZXJ2ZXJTdGF0dXM6IHJlc3BvbnNlc1tpbmRleF0ucmVzdWx0IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXJ2ZXJMaXN0Lmxlbmd0aCA9PT0gMSAmJiB0aGlzLnNlcnZlckxpc3RbMF0uc2VydmVyU3RhdHVzID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySWQgPSB0aGlzLnNlcnZlckxpc3RbMF1bXCJpZFwiXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZU5leHQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXJ2ZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYWRkSXRlbVN0YXRlLnNlcnZlcklkID0gdGhpcy5zZXJ2ZXJJZDtcbiAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiaXRlbVByb3BlcnRpZXNcIik7XG4gICAgfVxuICAgIGNvbnZlcnRTdGF0dXNEaXNwbGF5VGV4dChzdGF0dXMpIHtcbiAgICAgICAgY29uc3QgaTE4biA9IHRoaXMuaTE4bjtcbiAgICAgICAgY29uc3QgZGlzcGxheVRhYmxlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogaTE4bi5zdGF0dXMuc3VjY2VzcyxcbiAgICAgICAgICAgIGZhaWx1cmU6IGkxOG4uc3RhdHVzLmZhaWx1cmUsXG4gICAgICAgICAgICBlcnJvcjogaTE4bi5zdGF0dXMuZXJyb3IsXG4gICAgICAgICAgICB2YWxpZGF0aW5nOiBpMThuLnN0YXR1cy52YWxpZGF0aW5nXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXNwbGF5VGFibGVbc3RhdHVzXTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGkxOG4sIGVycm9yLCBzZXJ2ZXJMaXN0IH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcInBcIiwgeyBjbGFzczogXCJoZWFkaW5nXCIgfSwgaTE4bi5sYXllci5oZWFkaW5nKSwgaChcInBcIiwgeyBjbGFzczogXCJzdWItaGVhZGluZ1wiIH0sIFwiIFwiLCBpMThuLmxheWVyLnN1YkhlYWRpbmcpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwicm93LXdyYXBwZXJcIiB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFsZi1yb3dcIiB9LCBpMThuLmxpc3QudGl0bGUpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGFsZi1yb3dcIiB9LCBpMThuLmxpc3Quc3RhdHVzKSksIHNlcnZlckxpc3QubWFwKChzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBcInJvdy13cmFwcGVyIHJvdy1kaXZpZGVyXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbGYtcm93XCIgfSwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBsYXlvdXQ6IFwiaW5saW5lXCIsIGNsYXNzOiBcInNlcnZlci13cmFwcGVyXCIgfSwgaChcImNhbGNpdGUtcmFkaW8tYnV0dG9uXCIsIHsgZGlzYWJsZWQ6IHNlcnZlci5zZXJ2ZXJTdGF0dXMgIT09IFwic3VjY2Vzc1wiLCB2YWx1ZTogc2VydmVyW1wiaWRcIl0sIG9uQ2FsY2l0ZVJhZGlvQnV0dG9uQ2hhbmdlOiAoZSkgPT4gKHRoaXMuc2VydmVySWQgPSBlLnRhcmdldC52YWx1ZSksIGNoZWNrZWQ6IHRoaXMuc2VydmVySWQgPT09IHNlcnZlcltcImlkXCJdIH0pLCBzZXJ2ZXJbXCJ1cmxcIl0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImhhbGYtcm93XCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInN0YXR1cy13cmFwcGVyXCIgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHNlcnZlci5zZXJ2ZXJTdGF0dXMgPT09IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlOiBzZXJ2ZXIuc2VydmVyU3RhdHVzID09PSBcImZhaWx1cmVcIixcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHNlcnZlci5zZXJ2ZXJTdGF0dXMgPT09IFwiZXJyb3JcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGluZzogc2VydmVyLnNlcnZlclN0YXR1cyA9PT0gXCJ2YWxpZGF0aW5nXCJcbiAgICAgICAgICAgICAgICB9LCBzY2FsZTogXCJzXCIsIGljb246IHRoaXMuc2VydmVyU3RhdHVzSWNvbnNbc2VydmVyLnNlcnZlclN0YXR1c10gfSksIHRoaXMuY29udmVydFN0YXR1c0Rpc3BsYXlUZXh0KHNlcnZlci5zZXJ2ZXJTdGF0dXMpKSkpKTtcbiAgICAgICAgfSksIGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiBpMThuLmVycm9yLm5vU2VydmVyU2VsZWN0ZWRIZWFkaW5nLCBkZXNjcmlwdGlvbjogaTE4bi5lcnJvci5ub1NlcnZlclNlbGVjdGVkRGVzY3JpcHRpb24sIGFjdGl2ZTogZXJyb3IsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgfSB9KSkpO1xuICAgIH1cbn07XG5BcmNnaXNOZXdJdGVtUGFnZXNTZXJ2ZXJMaXN0LnN0eWxlID0gYXJjZ2lzTmV3SXRlbVBhZ2VzU2VydmVyTGlzdENzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzU2VydmVyTGlzdCBhcyBhcmNnaXNfbmV3X2l0ZW1fcGFnZXNfc2VydmVyX2xpc3QgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLXNlcnZlci1saXN0LmVudHJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==