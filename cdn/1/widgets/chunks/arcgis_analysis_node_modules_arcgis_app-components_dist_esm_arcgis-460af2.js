/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2"],{18528:(e,t,n)=>{n.d(t,{a:()=>h,i:()=>p});var r=n(20164),a=n(70105),i=n(49853),o=n(12846),s=n(20206),c=n(13615),l=n(70217),d=n(62824),u=n(87953);const p=async(e,t)=>{var n;const{existingItemType:p,portal:h,existingItemPublishType:f}=t;i.c.initialFolder=null!==(n=await(0,a.a)(e.folderId||e.ownerFolder,e.itemOwner))&&void 0!==n?n:(0,a.b)(e.itemOwner);let y=e.type;"GeoJSON"===y&&(y="GeoJson"),o.i.title=e.title,o.i.categories=e.categories;const g=e.tags;switch(Array.isArray(g)?o.i.tags=g||[]:o.i.tags=(null!=g?g:"").split(","),s.a.id=e.id,s.a.type=y,s.a.fileName=e.name,s.a.existingItem=e,s.a.enablePublishing="tileLayer"!==p,s.a.newItemMode=p,p){case"file":s.a.extension=c.a[y].fileExt[0];break;case"tileLayer":const{id:t,url:n,title:a}=e,[{layers:i,tables:o,serviceInfo:p}]=await Promise.all([(0,d.q)(n,(0,r.g)(h),!0)]),{result:g}=await(0,u.f)({itemId:t,itemUrl:n,publishType:"vectorTiles"===f?"vector":"raster",portal:h,fullLayers:i});if(s.a.sourceTitle=a,s.a.tileLayerPublishType=f,"3dTiles"===s.a.tileLayerPublishType){s.a.tilesLayer3dTilesLayerType=l.D;break}s.a.tileLayerData=g,s.a.tileAutoCreation=!0,s.a.tileLayerBasemapType="standard",s.a.tileLayerBasemapUrl="",s.a.tileLayerFromFeatureLayer=!0,s.a.tileLayerLayers=i,s.a.tileLayerTables=o,s.a.tileLayerServiceInfo=p}},h=e=>{s.a.newItemMode="dataStore",s.a.type="Data Store",(null==e?void 0:e.portal.isPortal)||(s.a.typeKeywords=["Data Store connection"])}},91133:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_data_store_select:()=>d});var r=n(81149),a=n(20164),i=n(49853),o=n(20206),s=n(65804),c=n(15953),l=n(18528);n(69283),n(79210),n(70464),n(70105),n(12846),n(13615),n(70217),n(62824),n(43237),n(78239),n(88780),n(18762),n(49288),n(42577),n(30301),n(82102),n(74689),n(14192),n(52787),n(25145),n(41487),n(50202),n(87953);const d=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.options={folder:{page:"dataStoreSelectFolder",enabled:!0},database:{page:"dataStoreSelectDatabaseType",enabled:!0},cloud:{page:"dataStoreSelectCloud",enabled:!0},bdfs:{page:"dataStoreSelectBdfs",enabled:!1}},this.cloudOptions=["amazon","azure"],this.databaseOptions=["bigQuery","snowflake"],this.selected="folder",this.pipelineCloudSelection="amazon",this.pipelineDatabaseSelection="bigQuery",this.serverList=[]}async componentWillLoad(){const e=i.c.portal,t=i.c.user;(0,l.a)({portal:i.c.portal}),this.i18n=s.u.i18n.dataStoreSelect,this.isPortal=i.c.portal.isPortal,this.isPortal?this.selected="folder":this.selected="database",this.tileStrings=s.u.i18n.dataStoreSelectDatabase.pipelineProviders,this.serverList=await(0,a.t)(t,e),this.filterServers()}filterServers(){if(!i.c.portal.isPortal)return this.options.folder.enabled=!1,this.options.database.enabled=!0,this.options.cloud.enabled=!0,void(this.options.bdfs.enabled=!1);const e=this.serverList.filter((function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()}));e.length&&(o.a.hostingServer=e[0]);const t=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("GEOANALYTICS")>-1})),n=i.c.config.bdfsEnabled;this.options.bdfs.enabled=!!(null==t?void 0:t.length)&&n;const r=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("KNOWLEDGE")>-1})),a=i.c.config.noSQLEnabled;o.a.noSqlEnabled=!!(null==r?void 0:r.length)&&a&&!(0,c.i)()}handleNext(){let e;const t=this.selected;o.a.addDataStoreType=t,o.a.dataStoreSelectServerList=this.serverList,this.isPortal?e=this.options[t].page:"cloud"===this.selected?(o.a.addDataStoreType="cloud",o.a.provider=this.pipelineCloudSelection,e="dataStoreSelectCloudCredentials"):(o.a.addDataStoreType="database",o.a.databaseProvider=this.pipelineDatabaseSelection,e="dataStoreDatabaseCredentials"),this.newItemUpdatePage.emit(e)}render(){const{i18n:e,options:t,cloudOptions:n,databaseOptions:a,tileStrings:i}=this;let s="cloud"===this.selected?n:a;return(0,r.h)("div",null,(0,r.h)("arcgis-new-item-description",{header:e.heading}),(0,r.h)("calcite-tile-select-group",{layout:"vertical",class:"tile-select-group"},Object.keys(t).map((n=>{let a;return a=this.isPortal?o.a.noSqlEnabled?e.options.database.descriptionNoSql:e.options.database.description:e.databaseDescriptionForOnline,t[n].enabled&&(0,r.h)("calcite-tile-select",{key:n,class:"tile-select",checked:this.selected===n,heading:e.options[n].title,description:"database"===n?a:e.options[n].description,name:"data-store-selection","input-enabled":!0,width:"full",type:"radio",value:n,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})}))),!this.isPortal&&(0,r.h)("div",{class:"dynamic-select"},(0,r.h)("arcgis-new-item-description",{class:"dynamic-header",header:"cloud"===this.selected?e.subOptionsCloudDescription:e.subOptionsDatabaseDescription}),(0,r.h)("calcite-tile-select-group",{layout:"vertical"},s.map((e=>(0,r.h)("calcite-tile-select",{key:e,"input-enabled":!0,checked:s[0]===e,width:"full",type:"radio",value:e,heading:i[e].title,description:i[e].description,onCalciteTileSelectChange:e=>{"cloud"===this.selected?this.pipelineCloudSelection=e.target.value:this.pipelineDatabaseSelection=e.target.value}}))))))}};d.style=".tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.dynamic-header{margin-bottom:1.5rem;margin-top:1.5rem;display:block}"},15953:(e,t,n)=>{n.d(t,{a:()=>p,b:()=>h,c:()=>u,d:()=>d,e:()=>i,f:()=>o,g:()=>g,h:()=>l,i:()=>S,j:()=>f,k:()=>w,l:()=>s,m:()=>c});var r=n(20164),a=n(49853);function i(e,t){const n={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(n.clientPath=e.publisherFolderPath,n.info.path=e.newServerFolderPath,n.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(n.clientPath=e.publisherFolderPath,n.provider="UserManaged",n.info.datastoreConnectionType="replicated",n.info.fileServerPath=e.nfsSharePath,n.info.fileServerHost=e.nfsHostName,n.info.fileServerType="nfs"),n}function o(e,t){const n={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(n.info.connectionString=e.serverConnectionString,n.info.clientConnectionString=e.publisherConnectionString,n.info.dataStoreConnectionType="replicated"):"bigQuery"===e.databaseProvider||"snowflake"===e.databaseProvider?n.info.JDBCConnection=e.jdbcConnection:n.info.connectionString=e.publisherConnectionString,n}const s=async(e,t,n,r)=>{let a,i;if((null==n?void 0:n.length)>0){try{i=JSON.parse(n)}catch(e){return{error:{code:"invalidJSON"}}}a=function(e,t){const{type:n,project_id:r,private_key_id:a,private_key:i,client_email:o,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}=t;return{oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:n,project_id:r,private_key_id:a,private_key:i,client_email:o,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}}}(e,i)}else(null==r?void 0:r.length)>0&&(a=function(e,t,n){return{name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:n}}(e,t,r));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{JDBCConnection:a}}}};function c(e){const{user:t,password:n,database:r,role:a,server:i,warehouse:o,schema:s}=e;return{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{JDBCConnection:{user:t,password:n,database:r,role:a,connectionUrl:`jdbc:snowflake://${i}`,warehouse:o,schema:s}}}}function l(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const n={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?n.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete n.info.connectionProperties.fallbackServerAddresses,n}function d(e,t){const n="bdfs"===e.addDataStoreType?e.bdfsCloudProvider:e.provider,r={info:{}},a={credentialType:"accesskey"};return"amazon"===n&&("accessKey"===e.credentialType?(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey):a.credentialType=e.credentialType,"custom"===e.selectedRegion.id?a.regionEndpointUrl=e.storageURL:(a.regionEndpointUrl=y(e.regions,e.selectedRegion),a.region=e.selectedRegion.id),r.info.objectStore=e.bucketName,r.provider="amazon"),"google"===n&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,a.regionEndpointUrl="https://storage.googleapis.com",r.info.objectStore=e.bucketName,r.provider="Google"),"azure"===n&&("sharedKey"===e.azureAuthenticationType?(a.credentialType="accessKey",a.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(a.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(a.tenantId=e.tenantId,a.clientId=e.clientId,a.clientSecret=e.clientSecret):"userAssignedIdentity"===e.azureIdentityType&&(a.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(a.credentialType=e.azureAuthenticationType,a.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(a.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?a.regionEndpointUrl=e.endpoint:a.accountEndpoint=y(e.regions,e.environment),a.accountName=e.accountName,r.info.objectStore=e.containerName,r.provider="azure"),"azuredatalakegen2store"===n&&("other"===e.environment.id?a.regionEndpointUrl=e.endpoint:a.accountEndpoint=y(e.regions,e.environment),a.credentialType="accessKey",a.accountKey=e.accountKey,r.info.folder=e.cloudFolder?`${e.containerName}/${e.cloudFolder}`:e.containerName,a.accountName=e.accountName,r.provider="azureDataLakeStore"),"alibaba"===n&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,r.info.objectStore=e.bucketName,r.provider="Alibaba",a.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:y(e.regions,e.selectedRegion)),a.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==n&&(r.info.objectStore=r.info.objectStore+"/"+e.cloudFolder),r.type="cloudStore",r.path="/cloudStores/"+t,r.info.connectionString=JSON.stringify(a),r}function u(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsFilesharePath}),connectionType:"fileShare"}}}function p(e,t){return{type:"bigDataFileShare",path:`/bigDataFileShares/${t}`,info:{connectionString:JSON.stringify({path:e.bdfsHdfsPath,username:e.bdfsHdfsUsername}),connectionType:"hdfs"}}}function h(e,t){const n={type:"bigDataFileShare",path:"/bigDataFileShares/"+t,info:{connectionString:"",connectionType:"hive"}},r=e.useNonDefaultDatabase;return n.info.connectionString=JSON.stringify({metaStoreUris:e.metastoreUris,database:r&&e.nonDefaultDatabaseName||"default"}),n}function f(e,t){return JSON.stringify({info:{connectionString:JSON.stringify({path:t}),connectionType:"dataStore"},path:`/bigDataFileShares/${e}`,type:"bigDataFileShare"})}function y(e,t){let n;return e.forEach((function(e){e.id===t.id&&(n=e.blobStoreEndpoint||e.storageEndpointSuffix)})),n}const g=async(e,t)=>{const n=e.results.out_connectionString.paramUrl,a=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${n}`,i=await(0,r.r)(a);return b(i)},b=e=>{const t=e.value;return{connectionStringProps:v(t),connectionString:t}},v=e=>{let t=[];return e&&e.split(";").forEach((e=>{const n=e.split("=");2!==n.length||m(t,n[0])||t.push({key:n[0],value:n[1]})})),t},m=(e,t)=>e.some((e=>e.key===t)),S=()=>{var e;const t=a.c.portal,n=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===n},w=e=>e?`${e}/rest/services/System/PublishingTools/GPServer`:""},69283:(e,t,n)=>{n.d(t,{a:()=>r,c:()=>i,e:()=>o,g:()=>a,l:()=>s});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var o=i((function(e,t){!function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},n="4.24",r="next";function a(e){if(e.toLowerCase()===r)return r;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){return void 0===e&&(e=n),"https://js.arcgis.com/".concat(e,"/")}function o(e){return!e||a(e)?function(e){void 0===e&&(e=n);var t=i(e),o=a(e);if(o!==r&&3===o.major){var s=o.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}(e):e}function s(e,t){var n=o(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(n);return r||function(e,t){if(t){var n=document.querySelector(t);n.parentNode.insertBefore(e,n)}else document.head.appendChild(e)}(r=function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}(n),t),r}var c={};function l(e,t,n){var r;n&&(r=function(e,t){var n=function(r){t(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",n,!1)};return e.addEventListener("error",n,!1),n}(e,n));var a=function(){t(e),e.removeEventListener("load",a,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",a,!1)}function d(){return document.querySelector("script[data-esri-loader]")}function u(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var n={};[c,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}));var r=n.version,a=n.url||i(r);return new t.Promise((function(e,t){var i=d();if(i){var o=i.getAttribute("src");o!==a?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):u()?e(i):l(i,e,t)}else if(u())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var c=n.css;c&&s(!0===c?r:c,n.insertCssBefore),l(i=function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}(a),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),t),document.body.appendChild(i)}}))}function h(e){return new t.Promise((function(t,n){var r=window.require.on("error",n);window.require(e,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.remove(),t(e)}))}))}e.utils=t,e.loadModules=function(e,t){if(void 0===t&&(t={}),u())return h(e);var n=d(),r=n&&n.getAttribute("src");return!t.url&&r&&(t.url=r),p(t).then((function(){return h(e)}))},e.getScript=d,e.isLoaded=u,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),c=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)}));const s=async(e,t)=>(await o.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);