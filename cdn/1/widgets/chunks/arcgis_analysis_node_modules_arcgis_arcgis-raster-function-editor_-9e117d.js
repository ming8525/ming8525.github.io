"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-9e117d"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-clipping-geometry-acac287a.js":
/*!**********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-clipping-geometry-acac287a.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RFxClippingGeometry)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./layer-helper-3867eef7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/layer-helper-3867eef7.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");














const HelpClickHandlerKeys = {
    clippingGeometryOrRasterHelpClickHandler: "clippingGeometryOrRasterHelpClickHandler",
    useinputFeaturesHelpClickHandler: "useinputFeaturesHelpClickHandler",
    outputExtentHelpClickHandler: "outputExtentHelpClickHandler"
};

const clippingGeometryTypes = {
    clippingRaster: "clippingRaster",
    clippingGeometry: "clippingGeometry",
    currentExtent: "currentExtent"
};
const RFxClippingGeometry = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        /**
         * holds values of raster-input and feature-select for persistence
         * @private
         */
        this.rasterOrGeometryValueMapper = {
            geometryValue: undefined,
            rasterValue: undefined
        };
        /**
         * holds extents so we do not have to recalcute on each render
         * Updated only when -> input raster, clipping raster, clipping geometry is changed
         * @private
         */
        this.extentMapper = {
            mapExtent: undefined,
            inputRasterExtent: undefined,
            clippingRasterGeometryExtent: undefined,
            clippingFeatureGeometryExtent: undefined,
            useInputFeatureGeometryExtent: undefined
        };
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.inituseInputFeatureGeometry = (el) => {
            this.useInputFeatureGeometryRfxArg = el;
            const { triggerArgs } = this.widgetArgs;
            const useInputFeatureGeometryRfxArg = triggerArgs.UseInputFeatureGeometry;
            useInputFeatureGeometryRfxArg.input = this.useInputFeatureGeometryRfxArg;
            this.useInputFeatureGeometryRfxArg?.addEventListener("calciteCheckboxChange", (e) => {
                const element = e.target;
                const value = element.checked;
                this.useInputFeatureGeometryRfxArgValue = value;
                this.widgetArgs.triggerArgs.UseInputFeatureGeometry.value = value;
                this.widgetArgs.inputArgs.ClippingGeometry.value = this.useInputFeatureGeometryRfxArgValue
                    ? this.extentMapper.useInputFeatureGeometryExtent
                    : this.extentMapper.clippingFeatureGeometryExtent;
                // {useInputFeatureGeometryRfxArgValue} State change -> componentWillRender will handle UI update
            });
        };
        this.initExtent = (el) => {
            this.extentWidget = el;
            const { inputArgs } = this.widgetArgs;
            const extentRfxArg = inputArgs.Extent;
            extentRfxArg.input = this.extentWidget;
        };
        this.handleClippingGeometryTypesChange = (e) => {
            e.stopPropagation();
            const element = e.target;
            this.clippingGeometryTypeSelected = element.value;
            // Following is done to unset the value of other fields, and helps persistence
            switch (this.clippingGeometryTypeSelected) {
                case clippingGeometryTypes.currentExtent:
                    this.extentMapper.mapExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(this.map?.extent);
                    this.widgetArgs.inputArgs.ClippingRaster.value = undefined;
                    this.widgetArgs.inputArgs.ClippingGeometry.value = undefined;
                    break;
                case clippingGeometryTypes.clippingRaster:
                    this.widgetArgs.inputArgs.ClippingGeometry.value = undefined;
                    break;
                case clippingGeometryTypes.clippingGeometry:
                    this.widgetArgs.inputArgs.ClippingRaster.value = undefined;
                    break;
            }
            // {clippingGeometryTypeSelected} State change -> componentWillRender will handle UI update
        };
        this.setMapExtent = () => {
            if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(this.map)) {
                return;
            }
            this.extentMapper.mapExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(this.map?.extent);
            this.renderFlag = !this.renderFlag;
            // {renderFlag} State change -> componentWillRender will handle UI update
        };
        this.renderUpdateActiveMapExtentButton = () => {
            return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-button", { alignment: "center", appearance: "outline", kind: "neutral", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, type: "button", width: "full", onClick: this.setMapExtent }, this.strings.currentMapExtent));
        };
        this.handleClippingGeometryRasterChange = async ({ detail: { value } }) => {
            // Done only for persistence
            this.rasterOrGeometryValueMapper.rasterValue = value;
            const layer = await this.clippingGeometryRasterArg?.getSelectedLayer?.();
            const layerExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(layer);
            this.widgetArgs.inputArgs.ClippingRaster.value = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.d)(layer);
            this.extentMapper.clippingRasterGeometryExtent = layerExtent;
            this.renderFlag = !this.renderFlag;
            // {renderFlag} State change -> componentWillRender will handle UI update
        };
        this.handleClippingGeometryFeatureChange = async ({ detail: { value } }) => {
            // Done only for persistence
            this.rasterOrGeometryValueMapper.geometryValue = value;
            const layer = await this.clippingGeometryFeatureArg?.getSelectedLayer?.();
            const layerExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(layer);
            this.extentMapper.clippingFeatureGeometryExtent = layerExtent;
            const geometries = await (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.k)(layer);
            let geometriesExtent = {};
            // Essentially avoids "point" type geometries.
            if (layer.geometryType === "polygon") {
                geometriesExtent = {
                    // geometries: geometries?.map((geometry) => ({ rings: geometry.toJSON().rings })),
                    rings: geometries?.map((geometry) => geometry?.toJSON().rings?.[0]),
                    spatialReference: geometries?.[0]?.toJSON().spatialReference
                };
            }
            else if (layer.geometryType === "point") {
                geometriesExtent = {
                    geometries: geometries?.map((geometry) => {
                        const toJSON = geometry.toJSON();
                        return {
                            x: toJSON.x,
                            y: toJSON.y
                        };
                    }),
                    spatialReference: geometries?.[0]?.toJSON().spatialReference
                };
            }
            else {
                geometriesExtent = layerExtent;
            }
            this.extentMapper.useInputFeatureGeometryExtent = geometriesExtent;
            this.widgetArgs.inputArgs.ClippingGeometry.value = this.useInputFeatureGeometryRfxArgValue
                ? geometriesExtent
                : layerExtent;
            this.renderFlag = !this.renderFlag;
            // {renderFlag} State change -> componentWillRender will handle UI update
        };
        this.widgetArgs = undefined;
        this.clippingGeometryTypeSelected = undefined;
        this.clippingTypeRfxArgValue = undefined;
        this.useInputFeatureGeometryRfxArgValue = false;
        this.extentvalue = undefined;
        this.renderFlag = false;
    }
    onWidgetArgsChange(widgetArgs) {
        this.processWidgetArgs(widgetArgs);
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.processWidgetArgs(this.widgetArgs);
    }
    async componentWillLoad() {
        ({ strings: this.strings, dir: this.direction } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(`.`)));
        await this.setInitialState(this.widgetArgs);
    }
    componentWillRender() {
        // 1 -> Clip Outside , 2 -> Clip Inside
        const clippingType = this.clippingTypeRfxArgValue;
        // If Raster is set find the extent of raster and populate custom extent UI
        const clipInsideHandler = () => {
            return this.extentMapper.inputRasterExtent;
        };
        // Identify whether Raster or Geometry is set
        // find the extent of either and populate custom extent UI
        const clipOutsideHandler = () => {
            const clippingLayerMode = this.clippingGeometryTypeSelected;
            switch (clippingLayerMode) {
                case clippingGeometryTypes.currentExtent:
                    return this.extentMapper.mapExtent;
                case clippingGeometryTypes.clippingRaster:
                    return this.extentMapper.clippingRasterGeometryExtent;
                case clippingGeometryTypes.clippingGeometry:
                    return this.extentMapper.clippingFeatureGeometryExtent;
            }
        };
        const clippingTypeChangeHandler = {
            "1": clipOutsideHandler,
            "2": clipInsideHandler
        };
        const extent = clippingTypeChangeHandler[clippingType].bind(this)();
        this.extentvalue = extent;
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * All validation logic of widgetArgs -> mainly the inputArgs and triggerAttributes
     * goes here
     */
    processWidgetArgs({ browseProperties, triggerArgs }) {
        this.map = browseProperties.map;
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(triggerArgs) ||
            (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(triggerArgs.Raster) ||
            (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(triggerArgs.ClippingType) ||
            (0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(triggerArgs.UseInputFeatureGeometry)) {
            console.error("Invalid Schema: TriggerArgs is incorrect!");
        }
        const rasterRfxArg = triggerArgs.Raster;
        this.rasterArg = rasterRfxArg;
        rasterRfxArg.input?.addEventListener("rfxArgumentChange", this.handleRasterChange.bind(this));
        const clippingTypeRfxArg = triggerArgs.ClippingType;
        this.clippingTypeRfxArg = clippingTypeRfxArg;
        clippingTypeRfxArg.input?.addEventListener("rfxArgumentChange", ({ detail: { value } }) => {
            this.clippingTypeRfxArgValue = value;
            // {clippingTypeRfxArgValue} State change -> componentWillRender will handle UI update
        });
    }
    attachHelpClickEventHandlers() {
        const clippingGeometryOrRasterHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.widgetArgs.inputArgs.ClippingGeometry.displayName,
            referenceElement: this.clippingGeometryOrRasterContainer,
            helpTextID: this.widgetArgs.helpTextIDs?.clip_clippinggeometryorraster
        });
        const outputExtentHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.widgetArgs.inputArgs.Extent.displayName,
            referenceElement: this.extentContainer,
            helpTextID: this.widgetArgs.helpTextIDs?.clip_outputextent
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.clippingGeometryOrRasterHelpClickHandler, clippingGeometryOrRasterHelpClickHandler);
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.outputExtentHelpClickHandler, outputExtentHelpClickHandler);
    }
    async setInitialState({ inputArgs, triggerArgs }) {
        const rasterRfxArg = triggerArgs.Raster;
        const rasterInput = rasterRfxArg?.input;
        const inputRasterLayer = await rasterInput?.getSelectedLayer?.();
        this.extentMapper.inputRasterExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(inputRasterLayer);
        const clippingTypeRfxArg = triggerArgs.ClippingType;
        this.clippingTypeRfxArgValue = clippingTypeRfxArg.value;
        const useInputFeatureGeometryRfxArg = triggerArgs.UseInputFeatureGeometry;
        this.useInputFeatureGeometryRfxArgValue = useInputFeatureGeometryRfxArg.value ? true : false;
        const extentRfxArg = inputArgs.Extent;
        this.extentvalue = extentRfxArg.value;
        this.extentMapper.mapExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(this.map?.extent);
        // Persistence of clipping type
        const isClippingRasterPresent = !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(inputArgs.ClippingRaster?.value);
        const isClippingGeometryPresent = !(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__.i)(inputArgs.ClippingGeometry?.value);
        const isActiveMapExtent = !isClippingRasterPresent && !isClippingGeometryPresent;
        const isClipOutsideSelected = this.clippingTypeRfxArgValue === 1;
        if (isClippingRasterPresent && isClipOutsideSelected) {
            this.extentMapper.clippingRasterGeometryExtent = this.extentvalue;
        }
        if (isClippingGeometryPresent && isClipOutsideSelected) {
            this.extentMapper.clippingFeatureGeometryExtent = this.extentvalue;
        }
        this.clippingGeometryTypeSelected = isActiveMapExtent
            ? clippingGeometryTypes.currentExtent
            : isClippingRasterPresent
                ? clippingGeometryTypes.clippingRaster
                : clippingGeometryTypes.clippingGeometry;
    }
    async handleRasterChange() {
        const rasterInput = this.rasterArg?.input;
        const layer = await rasterInput?.getSelectedLayer?.();
        const inputRasterExtent = (0,_layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_5__.j)(layer);
        this.extentMapper.inputRasterExtent = inputRasterExtent;
    }
    renderClippingGeometryTypes() {
        const clippingGeometryTypesOptions = [
            { key: clippingGeometryTypes.currentExtent, label: this.strings.activeMapViewExtent },
            {
                key: clippingGeometryTypes.clippingRaster,
                label: this.strings.chooseRaster
            },
            { key: clippingGeometryTypes.clippingGeometry, label: this.strings.chooseGeometry }
        ];
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dtex-common-select", { options: clippingGeometryTypesOptions, value: this.clippingGeometryTypeSelected, onRfxArgumentChange: this.handleClippingGeometryTypesChange }));
    }
    renderClippingGeometryRaster() {
        const { inputLayers } = this.widgetArgs;
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dte-raster-input", { ref: (el) => (this.clippingGeometryRasterArg = el), inputLayers: inputLayers, value: this.rasterOrGeometryValueMapper.rasterValue, onRfxArgumentChange: this.handleClippingGeometryRasterChange, rfxBrowseLayerClick: this.widgetArgs.onRfxBrowseLayerClick }));
    }
    renderClippingGeometryFeature() {
        const { featureLayers } = this.widgetArgs;
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dte-feature-select", { ref: (el) => (this.clippingGeometryFeatureArg = el), inputLayers: featureLayers, value: this.rasterOrGeometryValueMapper.geometryValue, onRfxArgumentChange: this.handleClippingGeometryFeatureChange, rfxBrowseLayerClick: this.widgetArgs.onRfxBrowseLayerClick }));
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "default", ref: (e) => {
                this.clippingGeometryOrRasterContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.widgetArgs.inputArgs.ClippingGeometry.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.clippingGeometryOrRasterHelpClickHandler)() }), this.renderClippingGeometryTypes(), this.clippingGeometryTypeSelected === clippingGeometryTypes.currentExtent
            ? this.renderUpdateActiveMapExtentButton()
            : null, this.clippingGeometryTypeSelected === clippingGeometryTypes.clippingRaster
            ? this.renderClippingGeometryRaster()
            : null, this.clippingGeometryTypeSelected === clippingGeometryTypes.clippingGeometry
            ? this.renderClippingGeometryFeature()
            : null), this.clippingGeometryTypeSelected === clippingGeometryTypes.clippingGeometry ? ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "inline-space-between", ref: (e) => {
                this.useInputFeatureGeometryContainer = e;
                const useinputFeaturesHelpClickHandler = this.widgetArgs.onHelpActionClick({
                    heading: this.widgetArgs.triggerArgs.UseInputFeatureGeometry.displayName,
                    referenceElement: this.useInputFeatureGeometryContainer,
                    helpTextID: this.widgetArgs.helpTextIDs?.clip_useinputfeaturesforclippinggeometry
                });
                this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.useinputFeaturesHelpClickHandler, useinputFeaturesHelpClickHandler);
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-checkbox", { checked: this.useInputFeatureGeometryRfxArgValue, ref: this.inituseInputFeatureGeometry }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.widgetArgs.triggerArgs.UseInputFeatureGeometry.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.useinputFeaturesHelpClickHandler)() }))) : null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__.U.Scale, layout: "default", ref: (e) => {
                this.extentContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.widgetArgs.inputArgs.Extent.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.outputExtentHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dte-extent", { ref: this.initExtent, value: this.extentvalue }))));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
    static get watchers() { return {
        "widgetArgs": ["onWidgetArgsChange"]
    }; }
};



//# sourceMappingURL=rfx-cte-clipping-geometry-acac287a.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-clipping-geometry.entry.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-clipping-geometry.entry.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_clipping_geometry: () => (/* reexport safe */ _rfx_cte_clipping_geometry_acac287a_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_clipping_geometry_acac287a_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-clipping-geometry-acac287a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-clipping-geometry-acac287a.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _layer_helper_3867eef7_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./layer-helper-3867eef7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/layer-helper-3867eef7.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _common_fda1462e_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./common-fda1462e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/common-fda1462e.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _Uint8Array_68e1e3f9_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./_Uint8Array-68e1e3f9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_Uint8Array-68e1e3f9.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
























//# sourceMappingURL=rfx-cte-clipping-geometry.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLTllMTE3ZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFxSDtBQUNoQztBQUNsRDtBQUM4QjtBQUNSO0FBQ3VEO0FBQ3JEO0FBQ0Y7QUFDMUI7QUFDTztBQUNLO0FBQ1Y7QUFDVTs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQ0FBb0M7QUFDeEQsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDREQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhCQUE4QjtBQUM5QztBQUNBO0FBQ0EsZ0JBQWdCLDJEQUFlO0FBQy9CO0FBQ0E7QUFDQSwwQ0FBMEMsNERBQWM7QUFDeEQ7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0Esb0JBQW9CLHFEQUFDLHFCQUFxQixvRUFBb0Usb0RBQVUsbUVBQW1FO0FBQzNMO0FBQ0EsMkRBQTJELFVBQVUsU0FBUztBQUM5RTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsNERBQWM7QUFDOUMsNkRBQTZELDREQUFzQjtBQUNuRjtBQUNBO0FBQ0EsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQSw0REFBNEQsVUFBVSxTQUFTO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0REFBYztBQUM5QztBQUNBLHFDQUFxQyw0REFBVztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxnQ0FBZ0M7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsWUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2Q0FBNkMsUUFBUSxtRUFBMkIsbUJBQW1CLHFEQUFZO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0JBQStCO0FBQ3ZEO0FBQ0EsWUFBWSwyREFBZTtBQUMzQixZQUFZLDJEQUFlO0FBQzNCLFlBQVksMkRBQWU7QUFDM0IsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxVQUFVLFNBQVM7QUFDOUY7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdCQUF3QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsNERBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDREQUFjO0FBQ3BEO0FBQ0EseUNBQXlDLDJEQUFlO0FBQ3hELDJDQUEyQywyREFBZTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDREQUFjO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtRkFBbUY7QUFDakc7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGNBQWM7QUFDZDtBQUNBLGdCQUFnQixxREFBQyw2QkFBNkIsOElBQThJO0FBQzVMO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QixnQkFBZ0IscURBQUMsMkJBQTJCLDZQQUE2UDtBQUN6UztBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQyxnQkFBZ0IscURBQUMsNkJBQTZCLG1RQUFtUTtBQUNqVDtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFDLGNBQWMscURBQUMsb0JBQW9CLDJCQUEyQixvREFBVTtBQUN6RjtBQUNBLGVBQWUsRUFBRSxxREFBQyxnQkFBZ0IseU1BQXlNO0FBQzNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxR0FBcUcscURBQUMsb0JBQW9CLDJCQUEyQixvREFBVTtBQUMvSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZUFBZSxFQUFFLHFEQUFDLHVCQUF1Qix5RkFBeUYsR0FBRyxxREFBQyxnQkFBZ0IsME1BQTBNLFlBQVkscURBQUMsb0JBQW9CLDJCQUEyQixvREFBVTtBQUN0YTtBQUNBLGVBQWUsRUFBRSxxREFBQyxnQkFBZ0IsbUxBQW1MLEdBQUcscURBQUMscUJBQXFCLCtDQUErQztBQUM3UjtBQUNBLDhCQUE4QjtBQUM5Qix3QkFBd0IsT0FBTyxxREFBVTtBQUN6Qyw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBOztBQUVvQzs7QUFFcEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM1VXlGO0FBQzVEO0FBQ2M7QUFDUjtBQUNBO0FBQ0o7QUFDQztBQUNJO0FBQ2M7QUFDWDtBQUNEO0FBQ087QUFDa0I7QUFDakM7QUFDRztBQUNFO0FBQ0Q7QUFDeUI7QUFDRjtBQUMxQjtBQUNPO0FBQ0s7QUFDQTs7QUFFM0M7Ozs7Ozs7Ozs7Ozs7Ozs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUU4RTs7QUFFOUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS9yZngtY3RlLWNsaXBwaW5nLWdlb21ldHJ5LWFjYWMyODdhLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUtY2xpcHBpbmctZ2VvbWV0cnkuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vdWktdXRpbHMtOTI4YTQwOTYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBnIGFzIGdldEFzc2V0UGF0aCwgYSBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC1kYTFiNzEzOC5qcyc7XG5pbXBvcnQgeyBiIGFzIGZldGNoQ29tcG9uZW50TG9jYWxlU3RyaW5ncyB9IGZyb20gJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0IHsgaSBhcyBpc0VtcHR5RGF0YUl0ZW0gfSBmcm9tICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCB7IFUgYXMgVUlEZWZhdWx0cyB9IGZyb20gJy4vdWktdXRpbHMtOTI4YTQwOTYuanMnO1xuaW1wb3J0IHsgaiBhcyBnZXRMYXllckV4dGVudCwgZCBhcyBnZXRSYXN0ZXJKc29uRnJvbUxheWVyLCBrIGFzIGdldEdlb21ldHJ5IH0gZnJvbSAnLi9sYXllci1oZWxwZXItMzg2N2VlZjcuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG5jb25zdCBIZWxwQ2xpY2tIYW5kbGVyS2V5cyA9IHtcbiAgICBjbGlwcGluZ0dlb21ldHJ5T3JSYXN0ZXJIZWxwQ2xpY2tIYW5kbGVyOiBcImNsaXBwaW5nR2VvbWV0cnlPclJhc3RlckhlbHBDbGlja0hhbmRsZXJcIixcbiAgICB1c2VpbnB1dEZlYXR1cmVzSGVscENsaWNrSGFuZGxlcjogXCJ1c2VpbnB1dEZlYXR1cmVzSGVscENsaWNrSGFuZGxlclwiLFxuICAgIG91dHB1dEV4dGVudEhlbHBDbGlja0hhbmRsZXI6IFwib3V0cHV0RXh0ZW50SGVscENsaWNrSGFuZGxlclwiXG59O1xuXG5jb25zdCBjbGlwcGluZ0dlb21ldHJ5VHlwZXMgPSB7XG4gICAgY2xpcHBpbmdSYXN0ZXI6IFwiY2xpcHBpbmdSYXN0ZXJcIixcbiAgICBjbGlwcGluZ0dlb21ldHJ5OiBcImNsaXBwaW5nR2VvbWV0cnlcIixcbiAgICBjdXJyZW50RXh0ZW50OiBcImN1cnJlbnRFeHRlbnRcIlxufTtcbmNvbnN0IFJGeENsaXBwaW5nR2VvbWV0cnkgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLnJmeEFyZ3VtZW50Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJyZnhBcmd1bWVudENoYW5nZVwiLCA3KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGhvbGRzIHZhbHVlcyBvZiByYXN0ZXItaW5wdXQgYW5kIGZlYXR1cmUtc2VsZWN0IGZvciBwZXJzaXN0ZW5jZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yYXN0ZXJPckdlb21ldHJ5VmFsdWVNYXBwZXIgPSB7XG4gICAgICAgICAgICBnZW9tZXRyeVZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByYXN0ZXJWYWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBob2xkcyBleHRlbnRzIHNvIHdlIGRvIG5vdCBoYXZlIHRvIHJlY2FsY3V0ZSBvbiBlYWNoIHJlbmRlclxuICAgICAgICAgKiBVcGRhdGVkIG9ubHkgd2hlbiAtPiBpbnB1dCByYXN0ZXIsIGNsaXBwaW5nIHJhc3RlciwgY2xpcHBpbmcgZ2VvbWV0cnkgaXMgY2hhbmdlZFxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRNYXBwZXIgPSB7XG4gICAgICAgICAgICBtYXBFeHRlbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlucHV0UmFzdGVyRXh0ZW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGlwcGluZ1Jhc3Rlckdlb21ldHJ5RXh0ZW50OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGlwcGluZ0ZlYXR1cmVHZW9tZXRyeUV4dGVudDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlFeHRlbnQ6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIGV2ZW50IGhhbmRsZXJzIGZvciBoZWxwIGFjdGlvbiBjbGljaywgc3RvcmVkIGluIGNvbm5lY3RlZCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAgKiBmZXRjaGluZyBmdW5jdGlvbiBvbiBlYWNoIHJlbmRlciAoIHRvIGF2b2lkIGNvbW1vbiBiYWQgcHJhY3RpY2UgKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmluaXR1c2VJbnB1dEZlYXR1cmVHZW9tZXRyeSA9IChlbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZyA9IGVsO1xuICAgICAgICAgICAgY29uc3QgeyB0cmlnZ2VyQXJncyB9ID0gdGhpcy53aWRnZXRBcmdzO1xuICAgICAgICAgICAgY29uc3QgdXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlSZnhBcmcgPSB0cmlnZ2VyQXJncy5Vc2VJbnB1dEZlYXR1cmVHZW9tZXRyeTtcbiAgICAgICAgICAgIHVzZUlucHV0RmVhdHVyZUdlb21ldHJ5UmZ4QXJnLmlucHV0ID0gdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZztcbiAgICAgICAgICAgIHRoaXMudXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlSZnhBcmc/LmFkZEV2ZW50TGlzdGVuZXIoXCJjYWxjaXRlQ2hlY2tib3hDaGFuZ2VcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlbGVtZW50LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZ1ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy53aWRnZXRBcmdzLnRyaWdnZXJBcmdzLlVzZUlucHV0RmVhdHVyZUdlb21ldHJ5LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5DbGlwcGluZ0dlb21ldHJ5LnZhbHVlID0gdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZ1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5leHRlbnRNYXBwZXIudXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlFeHRlbnRcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmV4dGVudE1hcHBlci5jbGlwcGluZ0ZlYXR1cmVHZW9tZXRyeUV4dGVudDtcbiAgICAgICAgICAgICAgICAvLyB7dXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlSZnhBcmdWYWx1ZX0gU3RhdGUgY2hhbmdlIC0+IGNvbXBvbmVudFdpbGxSZW5kZXIgd2lsbCBoYW5kbGUgVUkgdXBkYXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0RXh0ZW50ID0gKGVsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4dGVudFdpZGdldCA9IGVsO1xuICAgICAgICAgICAgY29uc3QgeyBpbnB1dEFyZ3MgfSA9IHRoaXMud2lkZ2V0QXJncztcbiAgICAgICAgICAgIGNvbnN0IGV4dGVudFJmeEFyZyA9IGlucHV0QXJncy5FeHRlbnQ7XG4gICAgICAgICAgICBleHRlbnRSZnhBcmcuaW5wdXQgPSB0aGlzLmV4dGVudFdpZGdldDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGlwcGluZ0dlb21ldHJ5VHlwZXNDaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuY2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZCA9IGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICAvLyBGb2xsb3dpbmcgaXMgZG9uZSB0byB1bnNldCB0aGUgdmFsdWUgb2Ygb3RoZXIgZmllbGRzLCBhbmQgaGVscHMgcGVyc2lzdGVuY2VcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jbGlwcGluZ0dlb21ldHJ5VHlwZVNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY3VycmVudEV4dGVudDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRlbnRNYXBwZXIubWFwRXh0ZW50ID0gZ2V0TGF5ZXJFeHRlbnQodGhpcy5tYXA/LmV4dGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQ2xpcHBpbmdSYXN0ZXIudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQ2xpcHBpbmdHZW9tZXRyeS52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY2xpcHBpbmdSYXN0ZXI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQ2xpcHBpbmdHZW9tZXRyeS52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY2xpcHBpbmdHZW9tZXRyeTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5DbGlwcGluZ1Jhc3Rlci52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB7Y2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZH0gU3RhdGUgY2hhbmdlIC0+IGNvbXBvbmVudFdpbGxSZW5kZXIgd2lsbCBoYW5kbGUgVUkgdXBkYXRlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0TWFwRXh0ZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbSh0aGlzLm1hcCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4dGVudE1hcHBlci5tYXBFeHRlbnQgPSBnZXRMYXllckV4dGVudCh0aGlzLm1hcD8uZXh0ZW50KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmxhZyA9ICF0aGlzLnJlbmRlckZsYWc7XG4gICAgICAgICAgICAvLyB7cmVuZGVyRmxhZ30gU3RhdGUgY2hhbmdlIC0+IGNvbXBvbmVudFdpbGxSZW5kZXIgd2lsbCBoYW5kbGUgVUkgdXBkYXRlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuZGVyVXBkYXRlQWN0aXZlTWFwRXh0ZW50QnV0dG9uID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1idXR0b25cIiwgeyBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsIGFwcGVhcmFuY2U6IFwib3V0bGluZVwiLCBraW5kOiBcIm5ldXRyYWxcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIHR5cGU6IFwiYnV0dG9uXCIsIHdpZHRoOiBcImZ1bGxcIiwgb25DbGljazogdGhpcy5zZXRNYXBFeHRlbnQgfSwgdGhpcy5zdHJpbmdzLmN1cnJlbnRNYXBFeHRlbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGlwcGluZ0dlb21ldHJ5UmFzdGVyQ2hhbmdlID0gYXN5bmMgKHsgZGV0YWlsOiB7IHZhbHVlIH0gfSkgPT4ge1xuICAgICAgICAgICAgLy8gRG9uZSBvbmx5IGZvciBwZXJzaXN0ZW5jZVxuICAgICAgICAgICAgdGhpcy5yYXN0ZXJPckdlb21ldHJ5VmFsdWVNYXBwZXIucmFzdGVyVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gYXdhaXQgdGhpcy5jbGlwcGluZ0dlb21ldHJ5UmFzdGVyQXJnPy5nZXRTZWxlY3RlZExheWVyPy4oKTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyRXh0ZW50ID0gZ2V0TGF5ZXJFeHRlbnQobGF5ZXIpO1xuICAgICAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5DbGlwcGluZ1Jhc3Rlci52YWx1ZSA9IGdldFJhc3Rlckpzb25Gcm9tTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgdGhpcy5leHRlbnRNYXBwZXIuY2xpcHBpbmdSYXN0ZXJHZW9tZXRyeUV4dGVudCA9IGxheWVyRXh0ZW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGbGFnID0gIXRoaXMucmVuZGVyRmxhZztcbiAgICAgICAgICAgIC8vIHtyZW5kZXJGbGFnfSBTdGF0ZSBjaGFuZ2UgLT4gY29tcG9uZW50V2lsbFJlbmRlciB3aWxsIGhhbmRsZSBVSSB1cGRhdGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVDbGlwcGluZ0dlb21ldHJ5RmVhdHVyZUNoYW5nZSA9IGFzeW5jICh7IGRldGFpbDogeyB2YWx1ZSB9IH0pID0+IHtcbiAgICAgICAgICAgIC8vIERvbmUgb25seSBmb3IgcGVyc2lzdGVuY2VcbiAgICAgICAgICAgIHRoaXMucmFzdGVyT3JHZW9tZXRyeVZhbHVlTWFwcGVyLmdlb21ldHJ5VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gYXdhaXQgdGhpcy5jbGlwcGluZ0dlb21ldHJ5RmVhdHVyZUFyZz8uZ2V0U2VsZWN0ZWRMYXllcj8uKCk7XG4gICAgICAgICAgICBjb25zdCBsYXllckV4dGVudCA9IGdldExheWVyRXh0ZW50KGxheWVyKTtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50TWFwcGVyLmNsaXBwaW5nRmVhdHVyZUdlb21ldHJ5RXh0ZW50ID0gbGF5ZXJFeHRlbnQ7XG4gICAgICAgICAgICBjb25zdCBnZW9tZXRyaWVzID0gYXdhaXQgZ2V0R2VvbWV0cnkobGF5ZXIpO1xuICAgICAgICAgICAgbGV0IGdlb21ldHJpZXNFeHRlbnQgPSB7fTtcbiAgICAgICAgICAgIC8vIEVzc2VudGlhbGx5IGF2b2lkcyBcInBvaW50XCIgdHlwZSBnZW9tZXRyaWVzLlxuICAgICAgICAgICAgaWYgKGxheWVyLmdlb21ldHJ5VHlwZSA9PT0gXCJwb2x5Z29uXCIpIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyaWVzRXh0ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAvLyBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzPy5tYXAoKGdlb21ldHJ5KSA9PiAoeyByaW5nczogZ2VvbWV0cnkudG9KU09OKCkucmluZ3MgfSkpLFxuICAgICAgICAgICAgICAgICAgICByaW5nczogZ2VvbWV0cmllcz8ubWFwKChnZW9tZXRyeSkgPT4gZ2VvbWV0cnk/LnRvSlNPTigpLnJpbmdzPy5bMF0pLFxuICAgICAgICAgICAgICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyaWVzPy5bMF0/LnRvSlNPTigpLnNwYXRpYWxSZWZlcmVuY2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGF5ZXIuZ2VvbWV0cnlUeXBlID09PSBcInBvaW50XCIpIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyaWVzRXh0ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyaWVzOiBnZW9tZXRyaWVzPy5tYXAoKGdlb21ldHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b0pTT04gPSBnZW9tZXRyeS50b0pTT04oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdG9KU09OLngsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdG9KU09OLnlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiBnZW9tZXRyaWVzPy5bMF0/LnRvSlNPTigpLnNwYXRpYWxSZWZlcmVuY2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cmllc0V4dGVudCA9IGxheWVyRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHRlbnRNYXBwZXIudXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlFeHRlbnQgPSBnZW9tZXRyaWVzRXh0ZW50O1xuICAgICAgICAgICAgdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5DbGlwcGluZ0dlb21ldHJ5LnZhbHVlID0gdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZ1ZhbHVlXG4gICAgICAgICAgICAgICAgPyBnZW9tZXRyaWVzRXh0ZW50XG4gICAgICAgICAgICAgICAgOiBsYXllckV4dGVudDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmxhZyA9ICF0aGlzLnJlbmRlckZsYWc7XG4gICAgICAgICAgICAvLyB7cmVuZGVyRmxhZ30gU3RhdGUgY2hhbmdlIC0+IGNvbXBvbmVudFdpbGxSZW5kZXIgd2lsbCBoYW5kbGUgVUkgdXBkYXRlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud2lkZ2V0QXJncyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jbGlwcGluZ0dlb21ldHJ5VHlwZVNlbGVjdGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNsaXBwaW5nVHlwZVJmeEFyZ1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVzZUlucHV0RmVhdHVyZUdlb21ldHJ5UmZ4QXJnVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5leHRlbnR2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZW5kZXJGbGFnID0gZmFsc2U7XG4gICAgfVxuICAgIG9uV2lkZ2V0QXJnc0NoYW5nZSh3aWRnZXRBcmdzKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc1dpZGdldEFyZ3Mod2lkZ2V0QXJncyk7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBMaWZlY3ljbGVcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzV2lkZ2V0QXJncyh0aGlzLndpZGdldEFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgKHsgc3RyaW5nczogdGhpcy5zdHJpbmdzLCBkaXI6IHRoaXMuZGlyZWN0aW9uIH0gPSBhd2FpdCBmZXRjaENvbXBvbmVudExvY2FsZVN0cmluZ3ModGhpcy5ob3N0RWxlbWVudCwgZ2V0QXNzZXRQYXRoKGAuYCkpKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRJbml0aWFsU3RhdGUodGhpcy53aWRnZXRBcmdzKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFJlbmRlcigpIHtcbiAgICAgICAgLy8gMSAtPiBDbGlwIE91dHNpZGUgLCAyIC0+IENsaXAgSW5zaWRlXG4gICAgICAgIGNvbnN0IGNsaXBwaW5nVHlwZSA9IHRoaXMuY2xpcHBpbmdUeXBlUmZ4QXJnVmFsdWU7XG4gICAgICAgIC8vIElmIFJhc3RlciBpcyBzZXQgZmluZCB0aGUgZXh0ZW50IG9mIHJhc3RlciBhbmQgcG9wdWxhdGUgY3VzdG9tIGV4dGVudCBVSVxuICAgICAgICBjb25zdCBjbGlwSW5zaWRlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4dGVudE1hcHBlci5pbnB1dFJhc3RlckV4dGVudDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gSWRlbnRpZnkgd2hldGhlciBSYXN0ZXIgb3IgR2VvbWV0cnkgaXMgc2V0XG4gICAgICAgIC8vIGZpbmQgdGhlIGV4dGVudCBvZiBlaXRoZXIgYW5kIHBvcHVsYXRlIGN1c3RvbSBleHRlbnQgVUlcbiAgICAgICAgY29uc3QgY2xpcE91dHNpZGVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xpcHBpbmdMYXllck1vZGUgPSB0aGlzLmNsaXBwaW5nR2VvbWV0cnlUeXBlU2VsZWN0ZWQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGNsaXBwaW5nTGF5ZXJNb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY3VycmVudEV4dGVudDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50TWFwcGVyLm1hcEV4dGVudDtcbiAgICAgICAgICAgICAgICBjYXNlIGNsaXBwaW5nR2VvbWV0cnlUeXBlcy5jbGlwcGluZ1Jhc3RlcjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50TWFwcGVyLmNsaXBwaW5nUmFzdGVyR2VvbWV0cnlFeHRlbnQ7XG4gICAgICAgICAgICAgICAgY2FzZSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY2xpcHBpbmdHZW9tZXRyeTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50TWFwcGVyLmNsaXBwaW5nRmVhdHVyZUdlb21ldHJ5RXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbGlwcGluZ1R5cGVDaGFuZ2VIYW5kbGVyID0ge1xuICAgICAgICAgICAgXCIxXCI6IGNsaXBPdXRzaWRlSGFuZGxlcixcbiAgICAgICAgICAgIFwiMlwiOiBjbGlwSW5zaWRlSGFuZGxlclxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBleHRlbnQgPSBjbGlwcGluZ1R5cGVDaGFuZ2VIYW5kbGVyW2NsaXBwaW5nVHlwZV0uYmluZCh0aGlzKSgpO1xuICAgICAgICB0aGlzLmV4dGVudHZhbHVlID0gZXh0ZW50O1xuICAgIH1cbiAgICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgICAgICB0aGlzLmF0dGFjaEhlbHBDbGlja0V2ZW50SGFuZGxlcnMoKTtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIEFsbCB2YWxpZGF0aW9uIGxvZ2ljIG9mIHdpZGdldEFyZ3MgLT4gbWFpbmx5IHRoZSBpbnB1dEFyZ3MgYW5kIHRyaWdnZXJBdHRyaWJ1dGVzXG4gICAgICogZ29lcyBoZXJlXG4gICAgICovXG4gICAgcHJvY2Vzc1dpZGdldEFyZ3MoeyBicm93c2VQcm9wZXJ0aWVzLCB0cmlnZ2VyQXJncyB9KSB7XG4gICAgICAgIHRoaXMubWFwID0gYnJvd3NlUHJvcGVydGllcy5tYXA7XG4gICAgICAgIGlmIChpc0VtcHR5RGF0YUl0ZW0odHJpZ2dlckFyZ3MpIHx8XG4gICAgICAgICAgICBpc0VtcHR5RGF0YUl0ZW0odHJpZ2dlckFyZ3MuUmFzdGVyKSB8fFxuICAgICAgICAgICAgaXNFbXB0eURhdGFJdGVtKHRyaWdnZXJBcmdzLkNsaXBwaW5nVHlwZSkgfHxcbiAgICAgICAgICAgIGlzRW1wdHlEYXRhSXRlbSh0cmlnZ2VyQXJncy5Vc2VJbnB1dEZlYXR1cmVHZW9tZXRyeSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIFNjaGVtYTogVHJpZ2dlckFyZ3MgaXMgaW5jb3JyZWN0IVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXN0ZXJSZnhBcmcgPSB0cmlnZ2VyQXJncy5SYXN0ZXI7XG4gICAgICAgIHRoaXMucmFzdGVyQXJnID0gcmFzdGVyUmZ4QXJnO1xuICAgICAgICByYXN0ZXJSZnhBcmcuaW5wdXQ/LmFkZEV2ZW50TGlzdGVuZXIoXCJyZnhBcmd1bWVudENoYW5nZVwiLCB0aGlzLmhhbmRsZVJhc3RlckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29uc3QgY2xpcHBpbmdUeXBlUmZ4QXJnID0gdHJpZ2dlckFyZ3MuQ2xpcHBpbmdUeXBlO1xuICAgICAgICB0aGlzLmNsaXBwaW5nVHlwZVJmeEFyZyA9IGNsaXBwaW5nVHlwZVJmeEFyZztcbiAgICAgICAgY2xpcHBpbmdUeXBlUmZ4QXJnLmlucHV0Py5hZGRFdmVudExpc3RlbmVyKFwicmZ4QXJndW1lbnRDaGFuZ2VcIiwgKHsgZGV0YWlsOiB7IHZhbHVlIH0gfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGlwcGluZ1R5cGVSZnhBcmdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgLy8ge2NsaXBwaW5nVHlwZVJmeEFyZ1ZhbHVlfSBTdGF0ZSBjaGFuZ2UgLT4gY29tcG9uZW50V2lsbFJlbmRlciB3aWxsIGhhbmRsZSBVSSB1cGRhdGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF0dGFjaEhlbHBDbGlja0V2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGNvbnN0IGNsaXBwaW5nR2VvbWV0cnlPclJhc3RlckhlbHBDbGlja0hhbmRsZXIgPSB0aGlzLndpZGdldEFyZ3Mub25IZWxwQWN0aW9uQ2xpY2soe1xuICAgICAgICAgICAgaGVhZGluZzogdGhpcy53aWRnZXRBcmdzLmlucHV0QXJncy5DbGlwcGluZ0dlb21ldHJ5LmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudDogdGhpcy5jbGlwcGluZ0dlb21ldHJ5T3JSYXN0ZXJDb250YWluZXIsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LmNsaXBfY2xpcHBpbmdnZW9tZXRyeW9ycmFzdGVyXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvdXRwdXRFeHRlbnRIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgIGhlYWRpbmc6IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuRXh0ZW50LmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudDogdGhpcy5leHRlbnRDb250YWluZXIsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LmNsaXBfb3V0cHV0ZXh0ZW50XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMuc2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLmNsaXBwaW5nR2VvbWV0cnlPclJhc3RlckhlbHBDbGlja0hhbmRsZXIsIGNsaXBwaW5nR2VvbWV0cnlPclJhc3RlckhlbHBDbGlja0hhbmRsZXIpO1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMuc2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLm91dHB1dEV4dGVudEhlbHBDbGlja0hhbmRsZXIsIG91dHB1dEV4dGVudEhlbHBDbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICBhc3luYyBzZXRJbml0aWFsU3RhdGUoeyBpbnB1dEFyZ3MsIHRyaWdnZXJBcmdzIH0pIHtcbiAgICAgICAgY29uc3QgcmFzdGVyUmZ4QXJnID0gdHJpZ2dlckFyZ3MuUmFzdGVyO1xuICAgICAgICBjb25zdCByYXN0ZXJJbnB1dCA9IHJhc3RlclJmeEFyZz8uaW5wdXQ7XG4gICAgICAgIGNvbnN0IGlucHV0UmFzdGVyTGF5ZXIgPSBhd2FpdCByYXN0ZXJJbnB1dD8uZ2V0U2VsZWN0ZWRMYXllcj8uKCk7XG4gICAgICAgIHRoaXMuZXh0ZW50TWFwcGVyLmlucHV0UmFzdGVyRXh0ZW50ID0gZ2V0TGF5ZXJFeHRlbnQoaW5wdXRSYXN0ZXJMYXllcik7XG4gICAgICAgIGNvbnN0IGNsaXBwaW5nVHlwZVJmeEFyZyA9IHRyaWdnZXJBcmdzLkNsaXBwaW5nVHlwZTtcbiAgICAgICAgdGhpcy5jbGlwcGluZ1R5cGVSZnhBcmdWYWx1ZSA9IGNsaXBwaW5nVHlwZVJmeEFyZy52YWx1ZTtcbiAgICAgICAgY29uc3QgdXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlSZnhBcmcgPSB0cmlnZ2VyQXJncy5Vc2VJbnB1dEZlYXR1cmVHZW9tZXRyeTtcbiAgICAgICAgdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZ1ZhbHVlID0gdXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlSZnhBcmcudmFsdWUgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGV4dGVudFJmeEFyZyA9IGlucHV0QXJncy5FeHRlbnQ7XG4gICAgICAgIHRoaXMuZXh0ZW50dmFsdWUgPSBleHRlbnRSZnhBcmcudmFsdWU7XG4gICAgICAgIHRoaXMuZXh0ZW50TWFwcGVyLm1hcEV4dGVudCA9IGdldExheWVyRXh0ZW50KHRoaXMubWFwPy5leHRlbnQpO1xuICAgICAgICAvLyBQZXJzaXN0ZW5jZSBvZiBjbGlwcGluZyB0eXBlXG4gICAgICAgIGNvbnN0IGlzQ2xpcHBpbmdSYXN0ZXJQcmVzZW50ID0gIWlzRW1wdHlEYXRhSXRlbShpbnB1dEFyZ3MuQ2xpcHBpbmdSYXN0ZXI/LnZhbHVlKTtcbiAgICAgICAgY29uc3QgaXNDbGlwcGluZ0dlb21ldHJ5UHJlc2VudCA9ICFpc0VtcHR5RGF0YUl0ZW0oaW5wdXRBcmdzLkNsaXBwaW5nR2VvbWV0cnk/LnZhbHVlKTtcbiAgICAgICAgY29uc3QgaXNBY3RpdmVNYXBFeHRlbnQgPSAhaXNDbGlwcGluZ1Jhc3RlclByZXNlbnQgJiYgIWlzQ2xpcHBpbmdHZW9tZXRyeVByZXNlbnQ7XG4gICAgICAgIGNvbnN0IGlzQ2xpcE91dHNpZGVTZWxlY3RlZCA9IHRoaXMuY2xpcHBpbmdUeXBlUmZ4QXJnVmFsdWUgPT09IDE7XG4gICAgICAgIGlmIChpc0NsaXBwaW5nUmFzdGVyUHJlc2VudCAmJiBpc0NsaXBPdXRzaWRlU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50TWFwcGVyLmNsaXBwaW5nUmFzdGVyR2VvbWV0cnlFeHRlbnQgPSB0aGlzLmV4dGVudHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NsaXBwaW5nR2VvbWV0cnlQcmVzZW50ICYmIGlzQ2xpcE91dHNpZGVTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5leHRlbnRNYXBwZXIuY2xpcHBpbmdGZWF0dXJlR2VvbWV0cnlFeHRlbnQgPSB0aGlzLmV4dGVudHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZCA9IGlzQWN0aXZlTWFwRXh0ZW50XG4gICAgICAgICAgICA/IGNsaXBwaW5nR2VvbWV0cnlUeXBlcy5jdXJyZW50RXh0ZW50XG4gICAgICAgICAgICA6IGlzQ2xpcHBpbmdSYXN0ZXJQcmVzZW50XG4gICAgICAgICAgICAgICAgPyBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY2xpcHBpbmdSYXN0ZXJcbiAgICAgICAgICAgICAgICA6IGNsaXBwaW5nR2VvbWV0cnlUeXBlcy5jbGlwcGluZ0dlb21ldHJ5O1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSYXN0ZXJDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IHJhc3RlcklucHV0ID0gdGhpcy5yYXN0ZXJBcmc/LmlucHV0O1xuICAgICAgICBjb25zdCBsYXllciA9IGF3YWl0IHJhc3RlcklucHV0Py5nZXRTZWxlY3RlZExheWVyPy4oKTtcbiAgICAgICAgY29uc3QgaW5wdXRSYXN0ZXJFeHRlbnQgPSBnZXRMYXllckV4dGVudChsYXllcik7XG4gICAgICAgIHRoaXMuZXh0ZW50TWFwcGVyLmlucHV0UmFzdGVyRXh0ZW50ID0gaW5wdXRSYXN0ZXJFeHRlbnQ7XG4gICAgfVxuICAgIHJlbmRlckNsaXBwaW5nR2VvbWV0cnlUeXBlcygpIHtcbiAgICAgICAgY29uc3QgY2xpcHBpbmdHZW9tZXRyeVR5cGVzT3B0aW9ucyA9IFtcbiAgICAgICAgICAgIHsga2V5OiBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY3VycmVudEV4dGVudCwgbGFiZWw6IHRoaXMuc3RyaW5ncy5hY3RpdmVNYXBWaWV3RXh0ZW50IH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY2xpcHBpbmdSYXN0ZXIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuc3RyaW5ncy5jaG9vc2VSYXN0ZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IGtleTogY2xpcHBpbmdHZW9tZXRyeVR5cGVzLmNsaXBwaW5nR2VvbWV0cnksIGxhYmVsOiB0aGlzLnN0cmluZ3MuY2hvb3NlR2VvbWV0cnkgfVxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gKGgoXCJyZngtZHRleC1jb21tb24tc2VsZWN0XCIsIHsgb3B0aW9uczogY2xpcHBpbmdHZW9tZXRyeVR5cGVzT3B0aW9ucywgdmFsdWU6IHRoaXMuY2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZCwgb25SZnhBcmd1bWVudENoYW5nZTogdGhpcy5oYW5kbGVDbGlwcGluZ0dlb21ldHJ5VHlwZXNDaGFuZ2UgfSkpO1xuICAgIH1cbiAgICByZW5kZXJDbGlwcGluZ0dlb21ldHJ5UmFzdGVyKCkge1xuICAgICAgICBjb25zdCB7IGlucHV0TGF5ZXJzIH0gPSB0aGlzLndpZGdldEFyZ3M7XG4gICAgICAgIHJldHVybiAoaChcInJmeC1kdGUtcmFzdGVyLWlucHV0XCIsIHsgcmVmOiAoZWwpID0+ICh0aGlzLmNsaXBwaW5nR2VvbWV0cnlSYXN0ZXJBcmcgPSBlbCksIGlucHV0TGF5ZXJzOiBpbnB1dExheWVycywgdmFsdWU6IHRoaXMucmFzdGVyT3JHZW9tZXRyeVZhbHVlTWFwcGVyLnJhc3RlclZhbHVlLCBvblJmeEFyZ3VtZW50Q2hhbmdlOiB0aGlzLmhhbmRsZUNsaXBwaW5nR2VvbWV0cnlSYXN0ZXJDaGFuZ2UsIHJmeEJyb3dzZUxheWVyQ2xpY2s6IHRoaXMud2lkZ2V0QXJncy5vblJmeEJyb3dzZUxheWVyQ2xpY2sgfSkpO1xuICAgIH1cbiAgICByZW5kZXJDbGlwcGluZ0dlb21ldHJ5RmVhdHVyZSgpIHtcbiAgICAgICAgY29uc3QgeyBmZWF0dXJlTGF5ZXJzIH0gPSB0aGlzLndpZGdldEFyZ3M7XG4gICAgICAgIHJldHVybiAoaChcInJmeC1kdGUtZmVhdHVyZS1zZWxlY3RcIiwgeyByZWY6IChlbCkgPT4gKHRoaXMuY2xpcHBpbmdHZW9tZXRyeUZlYXR1cmVBcmcgPSBlbCksIGlucHV0TGF5ZXJzOiBmZWF0dXJlTGF5ZXJzLCB2YWx1ZTogdGhpcy5yYXN0ZXJPckdlb21ldHJ5VmFsdWVNYXBwZXIuZ2VvbWV0cnlWYWx1ZSwgb25SZnhBcmd1bWVudENoYW5nZTogdGhpcy5oYW5kbGVDbGlwcGluZ0dlb21ldHJ5RmVhdHVyZUNoYW5nZSwgcmZ4QnJvd3NlTGF5ZXJDbGljazogdGhpcy53aWRnZXRBcmdzLm9uUmZ4QnJvd3NlTGF5ZXJDbGljayB9KSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiZGVmYXVsdFwiLCByZWY6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlwcGluZ0dlb21ldHJ5T3JSYXN0ZXJDb250YWluZXIgPSBlO1xuICAgICAgICAgICAgfSB9LCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQ2xpcHBpbmdHZW9tZXRyeS5kaXNwbGF5TmFtZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzPy5nZXQoSGVscENsaWNrSGFuZGxlcktleXMuY2xpcHBpbmdHZW9tZXRyeU9yUmFzdGVySGVscENsaWNrSGFuZGxlcikoKSB9KSwgdGhpcy5yZW5kZXJDbGlwcGluZ0dlb21ldHJ5VHlwZXMoKSwgdGhpcy5jbGlwcGluZ0dlb21ldHJ5VHlwZVNlbGVjdGVkID09PSBjbGlwcGluZ0dlb21ldHJ5VHlwZXMuY3VycmVudEV4dGVudFxuICAgICAgICAgICAgPyB0aGlzLnJlbmRlclVwZGF0ZUFjdGl2ZU1hcEV4dGVudEJ1dHRvbigpXG4gICAgICAgICAgICA6IG51bGwsIHRoaXMuY2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZCA9PT0gY2xpcHBpbmdHZW9tZXRyeVR5cGVzLmNsaXBwaW5nUmFzdGVyXG4gICAgICAgICAgICA/IHRoaXMucmVuZGVyQ2xpcHBpbmdHZW9tZXRyeVJhc3RlcigpXG4gICAgICAgICAgICA6IG51bGwsIHRoaXMuY2xpcHBpbmdHZW9tZXRyeVR5cGVTZWxlY3RlZCA9PT0gY2xpcHBpbmdHZW9tZXRyeVR5cGVzLmNsaXBwaW5nR2VvbWV0cnlcbiAgICAgICAgICAgID8gdGhpcy5yZW5kZXJDbGlwcGluZ0dlb21ldHJ5RmVhdHVyZSgpXG4gICAgICAgICAgICA6IG51bGwpLCB0aGlzLmNsaXBwaW5nR2VvbWV0cnlUeXBlU2VsZWN0ZWQgPT09IGNsaXBwaW5nR2VvbWV0cnlUeXBlcy5jbGlwcGluZ0dlb21ldHJ5ID8gKGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiaW5saW5lLXNwYWNlLWJldHdlZW5cIiwgcmVmOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlSW5wdXRGZWF0dXJlR2VvbWV0cnlDb250YWluZXIgPSBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZWlucHV0RmVhdHVyZXNIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogdGhpcy53aWRnZXRBcmdzLnRyaWdnZXJBcmdzLlVzZUlucHV0RmVhdHVyZUdlb21ldHJ5LmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VFbGVtZW50OiB0aGlzLnVzZUlucHV0RmVhdHVyZUdlb21ldHJ5Q29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLndpZGdldEFyZ3MuaGVscFRleHRJRHM/LmNsaXBfdXNlaW5wdXRmZWF0dXJlc2ZvcmNsaXBwaW5nZ2VvbWV0cnlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMuc2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLnVzZWlucHV0RmVhdHVyZXNIZWxwQ2xpY2tIYW5kbGVyLCB1c2VpbnB1dEZlYXR1cmVzSGVscENsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICB9IH0sIGgoXCJjYWxjaXRlLWNoZWNrYm94XCIsIHsgY2hlY2tlZDogdGhpcy51c2VJbnB1dEZlYXR1cmVHZW9tZXRyeVJmeEFyZ1ZhbHVlLCByZWY6IHRoaXMuaW5pdHVzZUlucHV0RmVhdHVyZUdlb21ldHJ5IH0pLCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMud2lkZ2V0QXJncy50cmlnZ2VyQXJncy5Vc2VJbnB1dEZlYXR1cmVHZW9tZXRyeS5kaXNwbGF5TmFtZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzPy5nZXQoSGVscENsaWNrSGFuZGxlcktleXMudXNlaW5wdXRGZWF0dXJlc0hlbHBDbGlja0hhbmRsZXIpKCkgfSkpKSA6IG51bGwsIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiZGVmYXVsdFwiLCByZWY6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRlbnRDb250YWluZXIgPSBlO1xuICAgICAgICAgICAgfSB9LCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuRXh0ZW50LmRpc3BsYXlOYW1lLCBvblJmeExhYmVsSGVscEFjdGlvbkNsaWNrOiAoKSA9PiB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnM/LmdldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5vdXRwdXRFeHRlbnRIZWxwQ2xpY2tIYW5kbGVyKSgpIH0pLCBoKFwicmZ4LWR0ZS1leHRlbnRcIiwgeyByZWY6IHRoaXMuaW5pdEV4dGVudCwgdmFsdWU6IHRoaXMuZXh0ZW50dmFsdWUgfSkpKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcInQ5blwiXTsgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbiAgICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgICAgICBcIndpZGdldEFyZ3NcIjogW1wib25XaWRnZXRBcmdzQ2hhbmdlXCJdXG4gICAgfTsgfVxufTtcblxuZXhwb3J0IHsgUkZ4Q2xpcHBpbmdHZW9tZXRyeSBhcyBSIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJmeC1jdGUtY2xpcHBpbmctZ2VvbWV0cnktYWNhYzI4N2EuanMubWFwIiwiZXhwb3J0IHsgUiBhcyByZnhfY3RlX2NsaXBwaW5nX2dlb21ldHJ5IH0gZnJvbSAnLi9yZngtY3RlLWNsaXBwaW5nLWdlb21ldHJ5LWFjYWMyODdhLmpzJztcbmltcG9ydCAnLi9pbmRleC1kYTFiNzEzOC5qcyc7XG5pbXBvcnQgJy4vbG9jYWxpemF0aW9uLWhlbHBlci00ODE5YjY3ZC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0ICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcbmltcG9ydCAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgJy4vbGF5ZXItaGVscGVyLTM4NjdlZWY3LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0ICcuL2NvbW1vbi1mZGExNDYyZS5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXF1ZXN0LmpzJztcbmltcG9ydCAnLi9fVWludDhBcnJheS02OGUxZTNmOS5qcyc7XG5pbXBvcnQgJy4vaW50ZXJmYWNlcy1kMGM2ODk0NC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLWNsaXBwaW5nLWdlb21ldHJ5LmVudHJ5LmpzLm1hcCIsImNvbnN0IFVJRGVmYXVsdHMgPSB7XG4gICAgU2NhbGU6IFwic1wiLFxuICAgIFBvcG92ZXJUaW1lcjogNjBcbn07XG5jb25zdCBDYWxjaXRlU2NhbGUgPSB7XG4gICAgczogXCJzXCIsXG4gICAgbTogXCJtXCJcbn07XG5jb25zdCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nID0ge1xuICAgIGFic29sdXRlOiBcImFic29sdXRlXCIsXG4gICAgZml4ZWQ6IFwiZml4ZWRcIlxufTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVNjYWxlIGFzIEMsIFVJRGVmYXVsdHMgYXMgVSwgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyBhcyBhIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVpLXV0aWxzLTkyOGE0MDk2LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==