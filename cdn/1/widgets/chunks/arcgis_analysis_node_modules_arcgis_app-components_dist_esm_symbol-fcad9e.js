/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-fcad9e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-fcad9e"],{7659:(e,o,s)=>{s.d(o,{a:()=>i,b:()=>a,c:()=>r});var l=s(9225),t=(s(69283),s(10519));function r(e){var o;const{layer:s,mapImageSublayer:r,mapView:i,modules:a}=l.s,n=s;e=e||{};const c=(0,l.m)((0,l.h)(n));return a.LocationCreator.createRenderer({layer:n,view:i,outlineOptimizationEnabled:!r&&(!(0,t.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,t.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),forBinning:"binning"===(null===(o=n.featureReduction)||void 0===o?void 0:o.type)}).then((e=>((0,l.l)(c,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function i(){var e;const{layer:o,mapView:s,modules:t}=l.s,r=o;return t.LocationCreator.createRenderer({layer:r,view:s,outlineOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)}).then((e=>{const o=(0,l.a)(e.renderer,"size","outline");return Promise.resolve(o)}))}function a(){var e;const{layer:o,mapView:s,modules:t}=l.s,r=o;return t.LocationCreator.createRenderer({layer:r,view:s,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)}).then((e=>{const o=(0,l.a)(e.renderer,"size","auto");return Promise.resolve(o)}))}},89:(e,o,s)=>{s.d(o,{a:()=>G,b:()=>R,c:()=>y,d:()=>B,e:()=>I,f:()=>T,g:()=>z,h:()=>i,i:()=>w,j:()=>V,k:()=>P,l:()=>C,m:()=>S,n:()=>q,o:()=>k,p:()=>M,q:()=>v,r:()=>g,s:()=>a,t:()=>F,u:()=>A,v:()=>L,w:()=>x,x:()=>E,y:()=>j});var l=s(9225),t=(s(69283),s(49306),s(10519)),r=s(7659);function i(){const{mapView:e,layer:o}=l.s,s=(0,l.h)(o),r=s.authoringInfo,i="class-breaks"===s.type?s.classBreakInfos:s.uniqueValueInfos,a=(0,l.a)(s,"size"),n=!!a&&!(0,t.i)(a.minSize),c=!!a&&"number"==typeof a.minSize,u="above-and-below"===(null==r?void 0:r.univariateTheme);let p=2,m=20;if(a)if(u){const e=a.stops;[p,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(n){const e=a.stops;[p,m]=[e[0].size,e[e.length-1].size]}else if(c)[p,m]=[a.minSize,a.maxSize];else{const o=e.scale,s=a.minSize.stops,l=a.maxSize.stops;[p,m]=[s[s.length-1].size,l[l.length-1].size];for(let e=0;e<s.length;e++){const t=s[e],r=l[e];if(o<=t.value){if(e>0){let i=s[e-1],a=l[e-1];const n=(o-i.value)/(t.value-i.value);[p,m]=[i.size+(t.size-i.size)*n,a.size+(r.size-a.size)*n]}else[p,m]=[s[0].size,l[0].size];break}}}else if(i){const e=i[0].symbol,o=i[i.length-1].symbol;[p,m]=[(0,l.T)(e),(0,l.T)(o)],p>m&&([p,m]=[m,p])}return[p,m]}function a(e){const{mapView:o,layer:s,modules:r}=l.s,a=(0,l.h)(s),n=(0,l.a)(a,"size");let c=e[0],u=(0,t.i)(e[1])?e[1]:c;if(n){const s=a.authoringInfo,l="above-and-below"===(null==s?void 0:s.univariateTheme),p=!!n&&!(0,t.i)(n.minSize),m=!!n&&"number"==typeof n.minSize;let[d,y]=i();const g=d>y;if(!g&&c>=y?c=y-.75:g&&c>=d&&(c=d-.75),!g&&d>=u?u=d+.75:g&&y>=u&&(u=y+.75),l){const o=n.stops,s=g?e[1]:e[0],l=g?e[0]:e[1],t=Math.max(...o.map((e=>e.value))),r=o[2].value,i=Math.min(...o.map((e=>e.value))),a=Math.abs(t-r),c=Math.abs(i-r),u=a>c?a:c,p=l-s;o.forEach((e=>{const{value:o}=e;e.size=Math.abs(o-r)/u*p+s}))}else if(p){const e=n.stops;n.stops=null,n.minSize=c,n.maxSize=u,n.minDataValue=e[0].value,n.maxDataValue=e[e.length-1].value}else if(m)g?(n.maxSize=c,n.minSize=u):(n.minSize=c,n.maxSize=u);else{const e=o.scale;let s=r.esriLang.clone(n.minSize.stops),l=r.esriLang.clone(n.maxSize.stops);g&&([s,l]=[l,s]);let t=c/s[s.length-1].size,i=u/l[l.length-1].size;for(let o=0;o<s.length;o++){const r=s[o],a=l[o];if(e<=r.value){if(o>0){let n=s[o-1],p=l[o-1];const m=(e-n.value)/(r.value-n.value),[d,y]=[n.size+(r.size-n.size)*m,p.size+(a.size-p.size)*m];t=c/d,i=u/y}else t=c/s[0].size,i=u/l[0].size;break}}s.forEach((e=>e.size=Math.round(t*e.size*10)/10)),l.forEach((e=>e.size=Math.round(i*e.size*10)/10)),g&&([s,l]=[l,s]),n.minSize.stops=s,n.maxSize.stops=l}}else{const e=a.classBreakInfos[0].symbol,o=a.classBreakInfos[a.classBreakInfos.length-1].symbol;let s=(0,l.T)(e),t=(0,l.T)(o),r=!1;s>t&&([s,t]=[t,s],r=!0),s!==t&&c>t&&(c=t-.75),s=c,s!==t&&s>u&&(u=s+.75),t=u;const i=1===a.classBreakInfos.length?1:Math.max(t-s,10)/(a.classBreakInfos.length-1);a.classBreakInfos.forEach(((e,o)=>{const a=e.symbol;r?(0,l.U)(a,t-i*o):(0,l.U)(a,s+i*o)}))}}function n(e,o){const s=e.stops,l=s.length-1,t=s[0].value,r=s[l].value;if(o<=t)return s[0].size;if(o>=r)return s[l].size;for(let e=0;e<=l;e++){const l=s[e],t=s[e+1];if(o>=l.value&&o<t.value){const e=t.value-l.value,s=l.size-t.size,r=(o-l.value)/e,i=l.size-s*r;return Math.round(100*i)/100}}return 1}let c;const u="polygon";function p(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}function m(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}function d(){return m().reverse()}function y(e){const{referenceElement:o,heading:s}=e,l=document.createElement("arcgis-smart-mapping-styler-popover");return l.referenceElement=o,l.heading=s,document.body.appendChild(l),l.open=!0,l.reposition(),l}function g(e){var o;(null==e?void 0:e.parentNode)&&(e.open=!1,null===(o=e.parentNode)||void 0===o||o.removeChild(e))}async function b(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=c,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>c=e)),o}function f(e,o,s){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},s),{portal:"..."})))),e.edit(o,s)}function h(e,o){const{symbol:s,info:{marker:l,stroke:t,fill:r}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==s?void 0:s.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(t)),console.log("onStylerEdit - info.fill:",JSON.stringify(r))),e(o)}async function k(e){const{layer:o,mapImageSublayer:s,portal:t,modules:r}=l.s,{onChange:i,popoverNode:a}=e,n=(0,l.h)(o),c=(0,l.q)(o),u="pie-chart"===(0,l.h)(o).type,m=(0,l.a)(n,"size"),d=(0,l.a)(n,"size","outline");let y=n.backgroundFillSymbol;y||(y=new r.SimpleFillSymbol,y.color=null,(0,l.h)(o).backgroundFillSymbol=y,i());const g=!!y.color,k=(0,l.a5)(y),v=p(),w=p();let z;z=y.outline?{color:y.outline.color?y.outline.color:new r.esriColor([0,0,0,.5]),size:y.outline.width,style:y.outline.style,autoAdjusted:!!d}:{color:new r.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!d},y.outline||(y.outline=new r.SimpleLineSymbol,(0,l.r)(y,new r.esriColor([0,0,0,0])));const S=await b(a),C=f(S,r.esriLang.clone(y),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:w,extraParts:{width:!0,autoStrokeAdjust:!(s||c&&u&&!m)&&"editable"}}},fill:{color:y.color?y.color:new r.esriColor([0,0,0,.5])},stroke:z,fillEnabled:g,strokeEnabled:k});return S.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.h)(o).backgroundFillSymbol=s,N(s,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,S,e)}))),a.addStyler(S),await C,_(y,S)}async function v(e){var o;const{layer:s,mapImageSublayer:t,portal:r,modules:i}=l.s,{popoverNode:a}=e,n=(0,l.h)(s),c=(0,l.a)(n,"size","outline"),u=!!n.backgroundColor,m=!!(null===(o=n.outline)||void 0===o?void 0:o.color),d=p(),y=p();let g;g=n.outline?{color:n.outline.color?n.outline.color:new i.esriColor([0,0,0,.5]),size:n.outline.width,style:n.outline.style,autoAdjusted:!!c}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const k=new i.SimpleFillSymbol;k.color=(0,l.h)(s).backgroundColor,k.outline=(0,l.h)(s).outline;const v=await b(a),w=f(v,i.esriLang.clone(k),{portal:r,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:d},stroke:{type:"color",optional:!0,suggestedColors:y,extraParts:{width:!0,autoStrokeAdjust:!t&&"editable"}}},fill:{color:n.backgroundColor?n.backgroundColor:new i.esriColor([0,0,0,.5])},stroke:g,fillEnabled:u,strokeEnabled:m});v.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:t,stroke:r}}})=>{(0,l.h)(s).backgroundColor=(0,l.t)(o),(0,l.h)(s).outline=o.outline,N(o,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,v,e)}))),a.addStyler(v),await w;const z=new i.SimpleFillSymbol;return z.color=n.backgroundColor,z.outline=n.outline,_(z,v)}async function w(e){const{onChange:o,popoverNode:s}=e,{layer:t,mapView:r,portal:i,modules:a}=l.s,n=(0,l.A)(t),c=(0,l.B)(t),u=(0,l.q)(t),m=(0,l.h)(t),d=(0,l.g)(),y=(0,l.a)(m,"size","auto"),g=(0,l.a)(m,"size","outline");let k=m.defaultSymbol;K(k)||(k=(0,l.S)(t,r,d));const v="picture-marker"!==k.type&&!!k.color,w=(0,l.a5)(k),z="cim"===k.type&&"CIMPointSymbol"===k.data.symbol.type,S=p(),C=p();let O;if(k||(k=u?new a.SimpleFillSymbol:c?new a.SimpleLineSymbol:new a.SimpleMarkerSymbol),"simple-fill"===k.type){const e=k;if(e.outline){const o=e.outline;O={color:o.color?o.color:new a.esriColor([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!g}}else O={color:new a.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!g}}else if("simple-line"===k.type){const e=k;O={color:e.color?e.color:new a.esriColor([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===k.type&&k.outline){const e=k.outline;O={color:e.color?e.color:new a.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else O="cim"===k.type?H(k):{color:new a.esriColor([255,255,255,.5]),size:1};const j=await b(s);let A;A=f(j,a.esriLang.clone(k),c?{portal:i,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:C,extraParts:{width:!y,autoStrokeAdjust:!1}}},stroke:O}:{portal:i,symbolFilter:u&&!(0,l.a8)()?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].indexOf(k.type)>-1?{open:!0,parts:{size:!y},symbolsOpen:!0,sizeOpen:!0,markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:S},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(k.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.t)(k)||new a.esriColor([128,128,128])},marker:n?{size:(0,l.T)(k)}:void 0,stroke:O,fillEnabled:v,strokeEnabled:w}),j.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{(0,l.h)(t).defaultSymbol=e,o()}))),s.addStyler(j),await A}async function z(e){var o,s;const{layer:t,mapImageSublayer:r,mapView:i,classedSymbolSelectedIdx:a,portal:c,modules:u}=l.s,{onChange:p,popoverNode:y}=e,g=(0,l.A)(t),k=(0,l.B)(t),v=(0,l.q)(t),w=(0,l.h)(t),z=(0,l.g)(),S=(0,l.a)(w,"size","auto"),C=(0,l.a)(w,"size","outline");let O=(null===(o=w.classBreakInfos)||void 0===o?void 0:o.length)?u.esriLang.clone(w.classBreakInfos[a].symbol):(0,l.S)(t,i,z);K(O)||(O=(0,l.S)(t,i,z)),S&&(0,l.U)(O,n(S,i.scale));const j="picture-marker"!==O.type&&!!O.color,A=(0,l.a5)(O),E="cim"===O.type&&"CIMPointSymbol"===O.data.symbol.type,x=m(),V=d();let I;if("simple-fill"===O.type){const e=O;I=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===O.type){const e=O;I=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===O.type)I=H(O);else if("simple-line"===O.type){const e=O;I={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new u.esriColor([0,0,0,.5])}}else I={color:new u.esriColor([255,255,255,.5]),size:1};const T=await b(y);let L;if(L=f(T,u.esriLang.clone(O),k?{portal:c,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:x,extraParts:{style:"cim"!==O.type,arrow:"cim"!==O.type,width:"size"!==z,autoStrokeAdjust:!r&&"size"!==z&&"editable"},parts:{extra:"size"!==z&&!S||"cim"!==O.type}}},stroke:I}:{portal:c,symbolFilter:v&&!(0,l.a8)()?"simple":void 0,sections:{marker:E||["simple-marker","picture-marker"].indexOf(O.type)>-1?{open:!0,parts:{size:"size"!==z&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==z,markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(O),suggestedColors:x},stroke:{type:"color",optional:!0,suggestedColors:V,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(O.type),width:!0,autoStrokeAdjust:!(r||!v||"cim"===O.type||"size"===z)&&"editable"}}},fill:{color:(0,l.t)(O)||W(x[1],.85)},marker:g?{size:(0,l.T)(O),autoAdjusted:!!S}:void 0,stroke:I,fillEnabled:j,strokeEnabled:A}),T.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:r}}})=>{const i=(0,l.h)(t),n=i.classBreakInfos.slice(),c=n[a],u=(0,l.T)(c.symbol);c.symbol=o,i.classBreakInfos=n,"size"===z?((0,l.U)(c.symbol,u),p()):N(o,null==s?void 0:s.autoAdjusted,null==r?void 0:r.autoAdjusted,T,e)}))),y.addStyler(T),await L,"size"!==z)return _((null===(s=w.classBreakInfos)||void 0===s?void 0:s.length)?w.classBreakInfos[0].symbol:void 0,T)}async function S(e){await O(Object.assign(Object.assign({},e),{type:"above"}))}async function C(e){await O(Object.assign(Object.assign({},e),{type:"below"}))}async function O(e){var o,s;const{layer:t,mapView:r,portal:i,modules:a}=l.s,{onChange:n,popoverNode:c}=e,u=(0,l.h)(t),p=(0,l.a)(u,"color"),y="above"===e.type;let g=(null===(s=null===(o=u.classBreakInfos)||void 0===o?void 0:o[y?1:0])||void 0===s?void 0:s.symbol)||(0,l.S)(t,r,"color-size");K(g)||(g=(0,l.S)(t,r,"color-size"));const k="picture-marker"!==g.type&&!!g.color,v=(0,l.a5)(g),w=m(),z="simple-line"===g.type?m():d();let S;if("simple-marker"===g.type){const e=g;S=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;S={color:e.color,size:e.width,style:e.style,marker:e.marker}}else S="cim"===g.type?H(g):{color:new a.esriColor([255,255,255,.5]),size:1};const C=await b(c),O=f(C,a.esriLang.clone(g),{portal:i,sections:{marker:p&&["simple-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]}:!p&&["simple-marker","picture-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:p?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(g),suggestedColors:w},stroke:p?void 0:{type:"color",optional:!0,suggestedColors:z,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:p?void 0:{color:(0,l.t)(g)||W(w[1],.85)},marker:{size:(0,l.T)(g)},stroke:S,fillEnabled:k,strokeEnabled:v});C.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.h)(t);o.authoringInfo.univariateSymbolStyle="custom";const s=o.classBreakInfos.slice();s[y?1:0].symbol=e,o.classBreakInfos=s,n()}))),c.addStyler(C),await O}async function j(e){const{layer:o,mapImageSublayer:s,mapView:t,portal:r,modules:i}=l.s,{popoverNode:a}=e,c="ogc-feature"===o.type,u=(0,l.A)(o),p=(0,l.B)(o),y=(0,l.q)(o),g=(0,l.h)(o),k=(0,l.a)(g,"size","auto"),v=(0,l.a)(g,"size","outline");let w=g.symbol;K(w)||(w=(0,l.S)(o,t));const z="picture-marker"!==w.type&&!!w.color,S=(0,l.a5)(w),C="cim"===w.type&&"CIMPointSymbol"===w.data.symbol.type,O=m(),j="simple-line"===w.type?m():d();let A;if("simple-fill"===w.type){const e=w;A=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!v}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===w.type){const e=w;A=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===w.type){const e=w;A={color:e.color,size:k?n(k,t.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!k}}else"cim"===w.type?(A=H(w),p&&(A.size=k?n(k,t.scale):A.size,A.autoAdjusted=!!k,k&&(0,l.U)(w,A.size))):A={color:new i.esriColor([255,255,255,.5]),size:1};const E=await b(a);let x;return x=f(E,i.esriLang.clone(w),p?{portal:r,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===w.type,open:!0,suggestedColorsOpen:!0,suggestedColors:j,extraParts:{style:"cim"!==w.type,arrow:"cim"!==w.type,width:!0,autoStrokeAdjust:!c&&!s&&"editable"}}},stroke:A}:{portal:r,symbolFilter:y&&!(0,l.a8)()?"simple":void 0,sections:{marker:C||["simple-marker","picture-marker"].indexOf(w.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!c&&!s&&"editable"}},markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(w),suggestedColors:O},stroke:{type:"color",optional:!0,suggestedColors:j,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(w.type),width:!0,autoStrokeAdjust:!(c||s||!y||"cim"===w.type)&&"editable"}}},fill:{color:(0,l.t)(w)||W(O[1],.85)},marker:u?{size:k?n(k,t.scale):(0,l.T)(w),autoAdjusted:!s&&!!k}:void 0,stroke:A,fillEnabled:z,strokeEnabled:S}),E.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:s,info:{marker:t,stroke:r}}})=>{(0,l.h)(o).symbol=s,N(s,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,E,e)}))),a.addStyler(E),await x,_(g.symbol,E)}async function A(e,o){const{layer:s,mapView:t,portal:r,modules:i}=l.s,{onChange:a,popoverNode:n}=o,c=s,u="point"===e,p="line"===e;let y=u?c.pointSymbol:p?c.lineSymbol:c.polygonSymbol;K(y)||(y=(0,l.ah)(t,e));const g="picture-marker"!==y.type&&!!y.color,k=(0,l.a5)(y),v=m(),w="simple-line"===y.type?m():d();let z;if("simple-fill"===y.type){const e=y;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===y.type){const e=y;z=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===y.type){const e=y;z={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else z={color:new i.esriColor([255,255,255,.5]),size:1};const S=await b(n);let C;C=f(S,i.esriLang.clone(y),p?{portal:r,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:w,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:z}:{portal:r,sections:{marker:["simple-marker","picture-marker"].indexOf(y.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(y),suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:w,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(y.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.t)(y)||W(v[1],.85)},marker:u?{size:(0,l.T)(y),autoAdjusted:!1}:void 0,stroke:z,fillEnabled:g,strokeEnabled:k}),S.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{u?c.pointSymbol=e:p?c.lineSymbol=e:c.polygonSymbol=e,a()}))),n.addStyler(S),await C}async function E(e){var o,s;const{layer:t,mapView:r,portal:i,modules:a}=l.s,{onChange:n,popoverNode:c}=e,u=(0,l.B)(t),p=(0,l.h)(t),y=(0,l.g)(),g=(0,l.a)(p,"color");let k;if(["type-size","type-size-age","predominance-size","relationship-size"].indexOf(y)>-1){const e=(0,l.h)(t);k=(null===(o=e.uniqueValueInfos)||void 0===o?void 0:o.length)?e.uniqueValueInfos[0].symbol:(0,l.S)(t,r,y)}else k=(null===(s=p.classBreakInfos)||void 0===s?void 0:s.length)?p.classBreakInfos[0].symbol:(0,l.S)(t,r,y);K(k)||(k=(0,l.S)(t,r,y));const v="picture-marker"!==k.type&&!!k.color,w=(0,l.a5)(k),z="cim"===k.type&&"CIMPointSymbol"===k.data.symbol.type,S=m(),C="simple-line"===k.type?m():d();let O;if("simple-fill"===k.type){const e=k;O=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new a.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===k.type){const e=k;O=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===k.type){const e=k;O={color:e.color,size:e.width,style:e.style,marker:e.marker}}else O="cim"===k.type?H(k):{color:new a.esriColor([255,255,255,.5]),size:1};const j=await b(c);let A;A=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].indexOf((0,l.g)())>-1?f(j,a.esriLang.clone(k),u?{portal:i,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==k.type,arrow:"cim"!==k.type,width:!1,autoStrokeAdjust:!1},suggestedColors:C,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==k.type}}},stroke:O}:{portal:i,sections:{marker:z||["simple-marker","picture-marker"].indexOf(k.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(k.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,l.T)(k)},stroke:O,strokeEnabled:w}):f(j,a.esriLang.clone(k),u?{portal:i,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==k.type,arrow:"cim"!==k.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:C,parts:{extra:"cim"!==k.type}}},stroke:O}:{portal:i,sections:{marker:z||["simple-marker","picture-marker"].indexOf(k.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(k),suggestedColors:S},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(k.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.t)(k)||W(S[1],.85)},marker:{size:(0,l.T)(k)},stroke:O,fillEnabled:v,strokeEnabled:w}),j.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.h)(t);if(o.classBreakInfos){let s=o.classBreakInfos;if(!s||!s.length)return;s=s.slice(),s.forEach((s=>{const t=(0,l.T)(s.symbol),r=(0,l.t)(s.symbol);s.symbol=e.clone(),g?(0,l.r)(s.symbol,new a.esriColor([0,0,0,.5])):o.uniqueValueInfos&&(0,l.r)(s.symbol,r),(0,l.U)(s.symbol,t)})),o.classBreakInfos=s}else{let s=o.uniqueValueGroups;if(!(s&&s.length&&s[0].classes&&s[0].classes.length))return;s=s.slice(),s.forEach((o=>{o.classes.forEach((o=>{const s=(0,l.T)(o.symbol),t=(0,l.t)(o.symbol);o.symbol=e.clone(),g?(0,l.r)(o.symbol,new a.esriColor([0,0,0,.5])):(0,l.r)(o.symbol,t),(0,l.U)(o.symbol,s)}))})),o.uniqueValueGroups=s}n()}))),c.addStyler(j),await A}async function x(e){var o,s,t,r;const{layer:i,mapImageSublayer:a,mapView:c,portal:p,modules:m}=l.s,{onChange:y,popoverNode:g}=e,k=(0,l.A)(i),v=(0,l.B)(i),w=(0,l.q)(i),z=(0,l.h)(i),S=z.authoringInfo,C=(0,l.g)(),O="univariate-color-size"===(null==S?void 0:S.type),j="above-and-below"===(null==S?void 0:S.univariateTheme),A=j&&!S.univariateSymbolStyle,E=(0,l.a)((0,l.h)(i),"color"),x=(0,l.a)(z,"size","auto"),V=(0,l.a)(z,"size","outline"),I=["color-size","color-age-size","color-size-age"].indexOf(C)>-1,T=(0,l.p)((0,l.h)(i),"color");let L,q=E?E.stops.map((e=>e.color)):z.classBreakInfos.map((e=>{var o;return(null===(o=(0,l.t)(e.symbol))||void 0===o?void 0:o.clone())||new m.esriColor([0,0,0,0])}));q.length>10&&(q=q.slice(0,10)),q.reverse();let B=(null===(o=z.classBreakInfos)||void 0===o?void 0:o.length)?z.classBreakInfos[0].symbol:(0,l.S)(i,c);if(!K(B)||(!j||A)&&!Q(B)){const e=null!==(s=(0,l.T)(B))&&void 0!==s?s:B.width;B=(0,l.S)(i,c,C),(0,l.U)(B,e)}const P=!(j&&!E&&"picture-marker"===B.type&&"picture-marker"===(null===(t=z.classBreakInfos[1].symbol)||void 0===t?void 0:t.type)),G=(0,l.a5)(B),F="cim"===B.type&&"CIMPointSymbol"===B.data.symbol.type,R=await m.colorUtils.getBackgroundColorTheme(c),M=m.colorSchemes.getSchemes({basemapTheme:R,geometryType:(0,l.D)(i)||u,theme:(null==S?void 0:S.univariateTheme)||(null==T?void 0:T.theme)||"high-to-low"});if(!E){const e=m.colorSchemes.getSchemes({basemap:c.map.basemap||"topo",geometryType:(0,l.D)(i)||u,theme:"above-and-below"});M.secondarySchemes.push(e.primaryScheme),M.secondarySchemes=M.secondarySchemes.concat(e.secondarySchemes)}const U=E?0:z.classBreakInfos.length;let D=(0,l.a9)(M,U);D=D.filter((e=>{var o;return null===(o=e.colors)||void 0===o?void 0:o.length}));const J=D.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),W=d();let X;if("simple-fill"===B.type){const e=B;X=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!V}:{color:new m.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!V}}else if("simple-marker"===B.type){const e=B;X=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new m.esriColor([0,0,0,.5]),size:1}}else if("cim"===B.type)X=H(B),v&&(X.size=x?n(x,c.scale):X.size,X.autoAdjusted=!!x,x&&(0,l.U)(B,X.size));else if("simple-line"===B.type){const e=B;X={color:new m.esriColor([255,255,255,.5]),size:x?n(x,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!x}}else X={color:new m.esriColor([255,255,255,.5]),size:1};const Y=await b(g);let Z;return(0,l.r)(B,q[q.length-1]),(I||k||v)&&x?(0,l.U)(B,n(x,c.scale)):w&&x&&B.outline&&(B.outline.width=n(x,c.scale)),L=B.clone(),Z=v?f(Y,m.esriLang.clone(B),{portal:p,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:E?"continuous":"discrete",colorRamps:J,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==B.type,arrow:"cim"!==B.type,autoStrokeAdjust:!a&&!I&&"editable",width:!I},parts:{extra:!I||"cim"!==B.type}}},stroke:Object.assign(Object.assign({},X),{color:q})}):f(Y,!j||A?m.esriLang.clone(B):(0,l.S)(i,c),{portal:p,symbolFilter:w&&!(0,l.a8)()?"simple":void 0,sections:{marker:j&&!A||!(F||["simple-marker","picture-marker"].indexOf(B.type)>-1)?j&&!A?{parts:{preview:!1,rotation:!1,size:!1}}:void 0:{open:!0,parts:{size:!I&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!I,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:E?"continuous":"discrete",open:!(0,l.ai)(B),colorRampsOpen:!(0,l.ai)(B),colorRamps:J},stroke:!j||A?{type:"color",optional:!0,open:!1,suggestedColors:W,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(B.type),width:!0,autoStrokeAdjust:!(a||!w||"cim"===B.type||I)&&"editable"}}:void 0},fill:{color:q},marker:j&&!A||!I&&!k?void 0:{size:x?n(x,c.scale):(0,l.T)(B),autoAdjusted:!!x},stroke:X,strokeEnabled:G,fillEnabled:P}),Y.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const a=(0,l.h)(i),n=(0,l.a)(a,"color");let c=m.esriLang.clone((r||t).color);const u=q[0],p=q.length!==c.length||q.some(((e,o)=>e.r!==c[o].r||e.g!==c[o].g||e.b!==c[o].b))||u.r!==c[0].r||u.g!==c[0].g||u.b!==c[0].b,d=u.a!==c[0].a,g=c[0].a,b=(0,l.am)(o,L);if(p&&!b.any&&(b.any=!0,b.color=!0),O&&j||c.reverse(),!j||A){if(b.any){const e=a.classBreakInfos.slice();e.forEach(((e,s)=>{e.symbol=(0,l.an)(e.symbol,o,p&&!n?c[s%c.length]:d&&!n?(0,l.ao)((0,l.t)(e.symbol),g):(0,l.t)(e.symbol)||new m.esriColor([0,0,0,0]),b)})),a.classBreakInfos=e}}else if(!n){c.reverse();const e=a.classBreakInfos.slice();e.forEach(((e,o)=>{(0,l.r)(e.symbol,c[o])})),a.classBreakInfos=e}if(n){if(q.length!==c.length&&5===c.length){const e=n.stops.length,o=[];o[0]=n.stops[0],o[1]=n.stops[Math.floor(e/4)],o[2]=n.stops[Math.floor(e/2)],o[3]=n.stops[e-Math.ceil(e/4)],o[4]=n.stops[e-1],n.stops=o}n.stops.forEach(((e,o)=>{e.color=c[o]}));const e=a.classBreakInfos.slice();(0,l.r)(e[0].symbol,new m.esriColor([170,170,170,1])),a.classBreakInfos=e}I?y():N(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,Y,e),L=o.clone(),q=n?n.stops.map((e=>e.color)):a.classBreakInfos.map((e=>(0,l.t)(e.symbol)||new m.esriColor([0,0,0,0]))).reverse()}))),g.addStyler(Y),await Z,_((null===(r=z.classBreakInfos)||void 0===r?void 0:r.length)?z.classBreakInfos[0].symbol:void 0,Y,(e=>{w&&B.outline?B.outline.width=e:!w&&(0,l.U)(B,e),L=B.clone()}))}async function V(e){var o,s,t,r,i;const{layer:a,mapImageSublayer:c,mapView:p,portal:m,modules:y}=l.s,{onChange:g,popoverNode:k}=e,v=(0,l.A)(a),w=(0,l.B)(a),z=(0,l.q)(a),S=(0,l.h)(a),C=(0,l.g)(),O=["type-size","type-size-age"].indexOf(C)>-1,j=(0,l.a)(S,"size","auto"),A=(0,l.a)(S,"size","outline"),E=S.uniqueValueGroups;let x,V=[];const I=E.length?E[E.length-1]:void 0;let T=(null===(o=null==I?void 0:I.classes)||void 0===o?void 0:o.length)&&(null===(s=(0,l.t)(I.classes[I.classes.length-1].symbol))||void 0===s?void 0:s.a)||1;E.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.t)(e.symbol)||new y.esriColor([0,0,0,T])))))),V.reverse(),V.length>10&&(V=V.slice(0,10));const L=y.typeSchemes.getSchemes({basemap:p.map.basemap,geometryType:(0,l.D)(a)||u});let q=(null===(t=S.uniqueValueGroups)||void 0===t?void 0:t.length)&&S.uniqueValueGroups[0].classes.length?y.esriLang.clone(S.uniqueValueGroups[0].classes[0].symbol):(0,l.S)(a,p,C);if(!Q(q)){const e=null!==(r=(0,l.T)(q))&&void 0!==r?r:q.width;q=(0,l.S)(a,p,C),(0,l.U)(q,e)}const B=(0,l.a5)(q),P="cim"===q.type&&"CIMPointSymbol"===q.data.symbol.type;let G=0;E.forEach((e=>G+=e.classes.length));const F=(0,l.a9)(L,Math.min(G,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),R=d();let M;if("simple-fill"===q.type){const e=q;M=e.outline?{color:e.outline.color?e.outline.color:new y.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!A}:{color:new y.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!A}}else if("simple-marker"===q.type){const e=q;M=e.outline?{color:e.outline.color?e.outline.color:new y.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new y.esriColor([0,0,0,.5]),size:1}}else if("cim"===q.type)M=H(q),w&&(M.size=j?n(j,p.scale):M.size,M.autoAdjusted=!!j,j&&(0,l.U)(q,M.size));else if("simple-line"===q.type){const e=q;M={color:V[V.length-1],size:j?n(j,p.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!j}}else M={color:new y.esriColor([255,255,255,.5]),size:1};const U=await b(k);let D;return(0,l.r)(q,V[V.length-1]),(O||v||w)&&j?(0,l.U)(q,n(j,p.scale)):z&&j&&q.outline&&(q.outline.width=n(j,p.scale)),x=q.clone(),D=f(U,y.esriLang.clone(q),w?{portal:m,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:F,extraParts:{style:"cim"!==q.type,arrow:"cim"!==q.type,autoStrokeAdjust:!c&&!O&&"editable",width:!O},parts:{extra:!O||"cim"!==q.type}}},stroke:Object.assign(Object.assign({},M),{color:V})}:{portal:m,symbolFilter:z&&!(0,l.a8)()?"simple":void 0,sections:{marker:P||["simple-marker","picture-marker"].indexOf(q.type)>-1?{open:!!(0,l.ai)(q),parts:{size:!O&&(!!c||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!O,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.ai)(q),colorRampsOpen:!(0,l.ai)(q),colorRamps:F},stroke:{type:"color",optional:!0,open:!1,suggestedColors:R,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(q.type),width:!0,autoStrokeAdjust:!(c||!z||"cim"===q.type||O)&&"editable"}}},fill:{color:V},marker:O||v?{size:j?n(j,p.scale):(0,l.T)(q),autoAdjusted:!!j}:void 0,stroke:M,strokeEnabled:B}),U.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const i=y.esriLang.clone((r||t).color),n=V[0],c=V.length!==i.length||V.some(((e,o)=>e.r!==i[o].r||e.g!==i[o].g||e.b!==i[o].b))||n.r!==i[0].r||n.g!==i[0].g||n.b!==i[0].b,u=n.a!==i[0].a,p=i[0].a;i.reverse();const m=(0,l.h)(a),d=(0,l.am)(o,x);if(c&&!d.any&&(d.any=!0,d.color=!0),d.any){const e=m.uniqueValueGroups.slice();let s=0;e.forEach((e=>{e.classes.forEach(((e,t)=>{"picture-marker"===e.symbol.type&&(c||u)&&(e.symbol=y.esriLang.clone(o),(0,l.r)(e.symbol,i[(s+t)%i.length])),e.symbol=(0,l.an)(e.symbol,o,c?i[(s+t)%i.length]:u?(0,l.ao)((0,l.t)(e.symbol),p):(0,l.t)(e.symbol)||new y.esriColor([0,0,0,0]),d)})),s+=e.classes.length})),m.uniqueValueGroups=e}O?g():N(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,U,e),x=o.clone(),c&&(V=[],m.uniqueValueGroups.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.t)(e.symbol)||new y.esriColor([0,0,0,0])))))),V.reverse(),V.length>10&&(V=V.slice(0,10)))}))),k.addStyler(U),await D,_((null===(i=S.uniqueValueGroups)||void 0===i?void 0:i.length)&&S.uniqueValueGroups[0].classes.length?S.uniqueValueGroups[0].classes[0].symbol:void 0,U,(e=>{z&&q.outline?q.outline.width=e:!z&&(0,l.U)(q,e),x=q.clone()}))}async function I(e){var o;const{layer:s,mapView:t,portal:r,modules:i}=l.s,{groupIdx:a,onChange:n,popoverNode:c}=e,p=(0,l.h)(s).uniqueValueGroups[a];let m=(null===(o=(0,l.t)(p.classes[p.classes.length-1].symbol))||void 0===o?void 0:o.a)||1,d=p.classes.map((e=>(0,l.t)(e.symbol)||new i.esriColor([0,0,0,m])));d.reverse(),d.length>10&&(d=d.slice(0,10));const y=await i.colorUtils.getBackgroundColorTheme(t),g=i.typeSchemes.getSchemes({basemapTheme:y,geometryType:(0,l.D)(s)||u}),k=i.colorSchemes.getSchemes({basemapTheme:y,geometryType:(0,l.D)(s)||u,theme:"high-to-low"});k.primaryScheme.colors=k.primaryScheme.colorsForClassBreaks[9].colors,k.primaryScheme.colorsForClassBreaks=void 0,k.secondarySchemes=k.secondarySchemes.filter((e=>{var o;return(null===(o=e.colorsForClassBreaks)||void 0===o?void 0:o.length)>=10})),k.secondarySchemes.forEach((e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0})),g.secondarySchemes.push(k.primaryScheme),g.secondarySchemes=g.secondarySchemes.concat(k.secondarySchemes);let v=p.classes.length;const w=(0,l.a9)(g,Math.min(v,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),z=await b(c),S=f(z,new i.SimpleFillSymbol,{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:w,parts:{transparency:!1}}},fill:{color:d}});z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color).reverse(),r=(0,l.h)(s),c=(0,l.g)(),u=r.uniqueValueGroups.slice();u[a].classes.forEach(((e,r)=>{"picture-marker"===e.symbol.type&&(e.symbol=(0,l.S)(s,t,c)),(0,l.r)(e.symbol,o[r%o.length])})),r.uniqueValueGroups=u,n(),d=r.uniqueValueGroups[a].classes.map((e=>(0,l.t)(e.symbol))),d.reverse(),d.length>10&&(d=d.slice(0,10))}))),c.addStyler(z),await S}async function T(e){var o,s;const{layer:t,mapImageSublayer:r,mapView:i,lastDefault:a,portal:c,modules:m}=l.s,{onChange:y,popoverNode:g,selectedValue:k}=e,[v,w]=!(0,l.i)(t)&&k.split("/").map((e=>parseInt(e))),z=(0,l.A)(t),S=(0,l.B)(t),C=(0,l.q)(t),O=(0,l.h)(t),j=(0,l.g)(),A=["type-size","type-size-age"].indexOf(j)>-1,E=(0,l.a)(O,"size","auto"),x=(0,l.a)(O,"size","outline");let V;V=!(0,l.i)(t)&&-1===v||(0,l.i)(t)&&-1===k?O.defaultSymbol||a.defaultSymbol:(0,l.i)(t)?O.uniqueValueInfos[k].symbol:O.uniqueValueGroups[v].classes[w].symbol,K(V)||(V=(0,l.i)(t)?(0,l.aj)():(0,l.S)(t,i,j),(!(0,l.i)(t)&&-1===v||(0,l.i)(t)&&-1===k)&&!O.defaultSymbol&&(a.defaultSymbol=V));const I="picture-marker"!==V.type&&!!V.color,T=(0,l.a5)(V),L="cim"===V.type&&"CIMPointSymbol"===V.data.symbol.type;let q;if(!(0,l.i)(t)&&-1===v||(0,l.i)(t)&&-1===k)q=p();else{const e=m.typeSchemes.getSchemes({basemap:i.map.basemap,geometryType:(0,l.D)(t)||u});q=(0,l.a7)(e).slice(0,16)}const B=d();let P;if("simple-fill"===V.type){const e=V;P=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new m.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===V.type){const e=V;P=e.outline?{color:e.outline.color?e.outline.color:new m.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new m.esriColor([0,0,0,.5]),size:1}}else if("cim"===V.type)P=H(V),S&&(P.size=E?n(E,i.scale):P.size,P.autoAdjusted=!!E,E&&(0,l.U)(V,P.size));else if("simple-line"===V.type){const e=V;P={size:E?n(E,i.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!E}}else P={color:new m.esriColor([255,255,255,.5]),size:1};const G=await b(g);let F;return F=S?f(G,m.esriLang.clone(V),{portal:c,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:q,extraParts:{style:"cim"!==V.type,arrow:"cim"!==V.type,autoStrokeAdjust:!r&&!A&&"editable",width:!A},parts:{extra:!A||"cim"!==V.type}}},stroke:P}):(0,l.i)(t)?f(G,m.esriLang.clone(V),{portal:c,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:q,parts:{transparency:!1}}},fill:{color:(0,l.t)(V)||(-1===k?(0,l.aj)().color:W(q[k%q.length],.85))},stroke:P,fillEnabled:I}):f(G,m.esriLang.clone(V),{portal:c,symbolFilter:C&&!(0,l.a8)()?"simple":void 0,sections:{marker:L||["simple-marker","picture-marker"].indexOf(V.type)>-1?{open:!0,parts:{size:!A&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!A,markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(V),suggestedColors:q},stroke:{type:"color",optional:!0,suggestedColors:B,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(V.type),width:!0,autoStrokeAdjust:!(r||!C||"cim"===V.type||A)&&"editable"}}},fill:{color:(0,l.t)(V)||W(q[w%q.length],.85)},marker:A||z?{size:E?n(E,i.scale):(0,l.T)(V),autoAdjusted:!!E}:void 0,stroke:P,fillEnabled:I,strokeEnabled:T}),G.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:r}}})=>{const i=(0,l.h)(t);if(!(0,l.i)(t)&&-1===v||(0,l.i)(t)&&-1===k)i.defaultSymbol=o;else if((0,l.i)(t)){const e=i.uniqueValueInfos.slice();e[k].symbol=o,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[v].classes[w].symbol=o,i.uniqueValueGroups=e}A?y():N(o,null==s?void 0:s.autoAdjusted,null==r?void 0:r.autoAdjusted,G,e)}))),g.addStyler(G),await F,_((0,l.i)(t)?(null===(o=O.uniqueValueInfos)||void 0===o?void 0:o.length)?O.uniqueValueInfos[0].symbol:void 0:(null===(s=O.uniqueValueGroups)||void 0===s?void 0:s.length)&&O.uniqueValueGroups[0].classes.length?O.uniqueValueGroups[0].classes[0].symbol:void 0,G)}async function L(e){var o,s,t;const{layer:r,mapImageSublayer:i,mapView:a,portal:c,modules:u}=l.s,{onChange:p,popoverNode:m}=e,y=(0,l.A)(r),g=(0,l.B)(r),k=(0,l.q)(r),v=(0,l.h)(r),w=(0,l.g)(),z="relationship-size"===w,S=(0,l.a)(v,"size","auto"),C=(0,l.a)(v,"size","outline"),O=v.uniqueValueGroups[0].classes,j=O.map((e=>(0,l.t)(e.symbol)||new u.esriColor([0,0,0,0]))),A=u.relationshipSchemes.getSchemes({basemap:a.map.basemap||"topo",geometryType:(0,l.D)(r)});let E=(null===(o=v.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?u.esriLang.clone(v.uniqueValueGroups[0].classes[0].symbol):(0,l.S)(r,a,w);if(!Q(E)){const e=null!==(s=(0,l.T)(E))&&void 0!==s?s:E.width;E=(0,l.S)(r,a,w),(0,l.U)(E,e)}const x=(0,l.a5)(E),V="cim"===E.type&&"CIMPointSymbol"===E.data.symbol.type,I=(0,l.a9)(A,Math.sqrt(O.length)).map((({colors:e,scheme:{tags:o,name:s}})=>({stops:u.relationshipSchemes.flatten2DArray(e),tags:o,name:s}))),T=d();let L;if("simple-fill"===E.type){const e=E;L=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===E.type){const e=E;L=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===E.type)L=H(E),g&&(L.size=S?n(S,a.scale):L.size,L.autoAdjusted=!!S,S&&(0,l.U)(E,L.size));else if("simple-line"===E.type){const e=E;L={color:new u.esriColor([255,255,255,.5]),size:S?n(S,a.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!S}}else L={color:new u.esriColor([255,255,255,.5]),size:1};const q=await b(m);let B;return B=f(q,u.esriLang.clone(E),g?{portal:c,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:I,extraParts:{style:"cim"!==E.type,arrow:"cim"!==E.type,autoStrokeAdjust:!i&&!z&&"editable",width:!z},parts:{extra:!z||"cim"!==E.type}}},stroke:Object.assign(Object.assign({},L),{color:j})}:{portal:c,symbolFilter:k&&!(0,l.a8)()?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].indexOf(E.type)>-1?{open:!!(0,l.ai)(E),parts:{size:!z&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!z,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,l.ai)(E),colorRampsOpen:!(0,l.ai)(E),colorRamps:I},stroke:{type:"color",optional:!0,open:!1,suggestedColors:T,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(E.type),width:!0,autoStrokeAdjust:!(i||!k||"cim"===E.type||z)&&"editable"}}},fill:{color:j},marker:z||y?{size:S?n(S,a.scale):(0,l.T)(E),autoAdjusted:!!S}:void 0,stroke:L,strokeEnabled:x}),q.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const a=u.esriLang.clone((i||t).color),n=(0,l.h)(r),c=n.uniqueValueGroups[0].classes.slice();c.forEach(((e,s)=>{e.symbol=o.clone(),(0,l.r)(e.symbol,a[s%a.length])})),n.uniqueValueGroups[0].classes=c,z?p():N(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,q,e)}))),m.addStyler(q),await B,_((null===(t=v.uniqueValueGroups[0].classes)||void 0===t?void 0:t.length)?v.uniqueValueGroups[0].classes[0].symbol:void 0,q)}async function q(e){var o,s,t,r;const{layer:i,mapImageSublayer:a,mapView:c,portal:u,modules:p}=l.s,{onChange:m,popoverNode:y}=e,g=(0,l.A)(i),k=(0,l.B)(i),v=(0,l.q)(i),w=(0,l.h)(i),z=(0,l.g)(),S="predominance-size"===z,C=(0,l.a)(w,"size","auto"),O=(0,l.a)(w,"size","outline"),j=w.uniqueValueGroups[0].classes;let A,E=j.length&&(null===(o=(0,l.t)(j[j.length-1].symbol))||void 0===o?void 0:o.a)||1,x=j.map((e=>(0,l.t)(e.symbol)||new p.esriColor([0,0,0,E])));x.reverse();const V=p.predominanceSchemes.getSchemes({basemap:c.map.basemap,geometryType:(0,l.D)(i),numColors:j.length});let I=(null===(s=w.uniqueValueGroups[0].classes)||void 0===s?void 0:s.length)?p.esriLang.clone(w.uniqueValueGroups[0].classes[0].symbol):(0,l.S)(i,c,z);if(!Q(I)){const e=null!==(t=(0,l.T)(I))&&void 0!==t?t:I.width;I=(0,l.S)(i,c,z),(0,l.U)(I,e)}const T=(0,l.a5)(I),L="cim"===I.type&&"CIMPointSymbol"===I.data.symbol.type,q=(0,l.a9)(V,j.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),B=d();let P;if("simple-fill"===I.type){const e=I;P=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!O}:{color:new p.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!O}}else if("simple-marker"===I.type){const e=I;P=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new p.esriColor([0,0,0,.5]),size:1}}else if("cim"===I.type)P=H(I),k&&(P.size=C?n(C,c.scale):P.size,P.autoAdjusted=!!C,C&&(0,l.U)(I,P.size));else if("simple-line"===I.type){const e=I;P={color:new p.esriColor([255,255,255,.5]),size:C?n(C,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else P={color:new p.esriColor([255,255,255,.5]),size:1};const G=await b(y);let F;return(0,l.r)(I,x[x.length-1]),(S||g||k)&&C?(0,l.U)(I,n(C,c.scale)):v&&C&&I.outline&&(I.outline.width=n(C,c.scale)),A=I.clone(),F=f(G,p.esriLang.clone(I),k?{portal:u,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:q,parts:{transparency:!0,extra:!S||"cim"!==I.type},extraParts:{style:"cim"!==I.type,arrow:"cim"!==I.type,autoStrokeAdjust:!a&&!S&&"editable",width:!S}}},stroke:Object.assign(Object.assign({},P),{color:x})}:{portal:u,symbolFilter:v&&!(0,l.a8)()?"simple":void 0,sections:{marker:L||["simple-marker","picture-marker"].indexOf(I.type)>-1?{open:!!(0,l.ai)(I),parts:{size:!S&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!S,markerType:(0,l.a8)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.ai)(I),colorRampsOpen:!(0,l.ai)(I),colorRamps:q},stroke:{type:"color",optional:!0,open:!1,suggestedColors:B,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(I.type),width:!0,autoStrokeAdjust:!(a||!v||"cim"===I.type||S)&&"editable"}}},fill:{color:x},marker:S||g?{size:C?n(C,c.scale):(0,l.T)(I),autoAdjusted:!!C}:void 0,stroke:P,strokeEnabled:T}),G.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:r}}})=>{const a=p.esriLang.clone((r||t).color),n=x[0],c=x.length!==a.length||x.some(((e,o)=>e.r!==a[o].r||e.g!==a[o].g||e.b!==a[o].b))||n.r!==a[0].r||n.g!==a[0].g||n.b!==a[0].b,u=n.a!==a[0].a,d=a[0].a;a.reverse();const y=(0,l.h)(i),g=(0,l.am)(o,A);if(c&&!g.any&&(g.any=!0,g.color=!0),g.any){const e=y.uniqueValueGroups[0].classes.slice();e.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(c||u)&&(e.symbol=p.esriLang.clone(o),(0,l.r)(e.symbol,a[s%a.length])),e.symbol=(0,l.an)(e.symbol,o,c?a[s%a.length]:u?(0,l.ao)((0,l.t)(e.symbol),d):(0,l.t)(e.symbol)||new p.esriColor([0,0,0,0]),g)})),y.uniqueValueGroups[0].classes=e}S?m():N(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,G,e),A=o.clone(),c&&(x=y.uniqueValueGroups[0].classes.map((e=>(0,l.t)(e.symbol)||new p.esriColor([0,0,0,.5]))),x.reverse())}))),y.addStyler(G),await F,_((null===(r=w.uniqueValueGroups[0].classes)||void 0===r?void 0:r.length)?w.uniqueValueGroups[0].classes[0].symbol:void 0,G,(e=>{v&&I.outline?I.outline.width=e:!v&&(0,l.U)(I,e),A=I.clone()}))}async function B(e){var o;const{layer:s,mapImageSublayer:t,mapView:r,selectedValue:i,lastDefault:a,portal:c,modules:u}=l.s,{onChange:m,popoverNode:y}=e,g=(0,l.A)(s),k=(0,l.B)(s),v=(0,l.q)(s),w=(0,l.h)(s),z=(0,l.g)(),S="predominance-size"===z,C=(0,l.a)(w,"size","auto"),O=(0,l.a)(w,"size","outline");let j;j=-1===i?w.defaultSymbol||a.defaultSymbol:w.uniqueValueGroups[0].classes[i].symbol,K(j)||(j=(0,l.S)(s,r,z),-1!==i||w.defaultSymbol||(a.defaultSymbol=j));const A="picture-marker"!==j.type&&!!j.color,E=(0,l.a5)(j),x="cim"===j.type&&"CIMPointSymbol"===j.data.symbol.type;let V;if(-1===i)V=p();else{const e=u.predominanceSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.D)(s),numColors:10});V=(0,l.a7)(e).slice(0,16)}const I=d();let T;if("simple-fill"===j.type){const e=j;T=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!O}:{color:new u.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!O}}else if("simple-marker"===j.type){const e=j;T=e.outline?{color:e.outline.color?e.outline.color:new u.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new u.esriColor([0,0,0,.5]),size:1}}else if("cim"===j.type)T=H(j);else if("simple-line"===j.type){const e=j;T={size:e.width,style:e.style,marker:e.marker,color:e.color}}else T={color:new u.esriColor([255,255,255,.5]),size:1};const L=await b(y);let q;return q=f(L,u.esriLang.clone(j),k?{portal:c,symbolFilter:(0,l.a8)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:V,extraParts:{style:"cim"!==j.type,arrow:"cim"!==j.type,autoStrokeAdjust:!t&&!S&&"editable",width:!S},parts:{extra:!S||"cim"!==j.type}}},stroke:T}:{portal:c,symbolFilter:v&&!(0,l.a8)()?"simple":void 0,sections:{marker:x||["simple-marker","picture-marker"].indexOf(j.type)>-1?{open:!0,parts:{size:!S&&(!!t||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!S,markerType:(0,l.a8)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.a6)(j),suggestedColors:V},stroke:{type:"color",optional:!0,suggestedColors:I,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(j.type),width:!0,autoStrokeAdjust:!(t||!v||"cim"===j.type||S)&&"editable"}}},fill:{color:(0,l.t)(j)||W(V[i],.85)},marker:S||g?{size:C?n(C,r.scale):(0,l.T)(j),autoAdjusted:!!C}:void 0,stroke:T,fillEnabled:A,strokeEnabled:E}),L.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:o,info:{marker:t,stroke:r}}})=>{const a=(0,l.h)(s);if(-1===i)a.defaultSymbol=o;else{const e=a.uniqueValueGroups[0].classes.slice();e[i].symbol=o,a.uniqueValueGroups[0].classes=e}S?m():N(o,null==t?void 0:t.autoAdjusted,null==r?void 0:r.autoAdjusted,L,e)}))),y.addStyler(L),await q,_((null===(o=w.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?w.uniqueValueGroups[0].classes[0].symbol:void 0,L)}async function P(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.h)(o),m=c.attributes,d=m.map((e=>e.color)),y=i.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.D)(o)||u,numColors:m.length}),g=p(),k=(0,l.a9)(y,m.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),v=(0,l.S)(o,s);let w;if(v.outline=c.outline,"simple-fill"===v.type)if(v.outline){const e=v.outline;w={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else w={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===v.type&&v.outline){const e=v.outline;w={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}const z=await b(n),S=f(z,v,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:k},stroke:{type:"color",optional:!0,suggestedColors:g,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:d.reverse()},stroke:w});z.stringOverrides={fillColor:r.styler.color,fillTransparency:r.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e,info:{fill:s}}})=>{const t=i.esriLang.clone(s.color);t.reverse(),(0,l.h)(o).attributes.forEach(((e,o)=>e.color=t[o])),(0,l.h)(o).outline=e.outline.clone(),a()}))),n.addStyler(z),await S}async function G(e){var o;const{layer:s,mapView:t,selectedAttribute:r,lastDefault:i,portal:a,strings:n,modules:c}=l.s,{onChange:p,popoverNode:m}=e,d=(0,l.h)(s),y=d.attributes;let g;g=-1===r?(null===(o=d.othersCategory)||void 0===o?void 0:o.color)||(null==i?void 0:i.otherColor)||new c.esriColor([170,170,170,1]):-2===r?d.defaultColor||(null==i?void 0:i.defaultColor)||new c.esriColor([170,170,170,1]):y[r].color;const k=c.pieChartSchemes.getSchemes({basemap:t.map.basemap,geometryType:(0,l.D)(s)||u,numColors:y.length}),v=(0,l.a7)(k).slice(0,16),w=(0,l.S)(s,t);w.outline=void 0,(0,l.r)(w,g);const z=await b(m),S=f(z,w,{portal:a,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:v}},fill:{color:g}});z.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},z.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{var o;-1===r?(0,l.h)(s).othersCategory?(0,l.h)(s).othersCategory.color=(0,l.t)(e):(0,l.h)(s).othersCategory={color:(0,l.t)(e),label:(null==i?void 0:i.otherLabel)||n.styler.other,threshold:null!==(o=null==i?void 0:i.threshold)&&void 0!==o?o:0}:-2===r?(0,l.h)(s).defaultColor=(0,l.t)(e):(0,l.h)(s).attributes[r].color=(0,l.t)(e),p()}))),m.addStyler(z),await S}async function F(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.h)(o).attributes,u=c.map((e=>e.color)),p=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:c.length}),m=(0,l.a9)(p,c.length).map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}))),d=await b(n),y=f(d,(0,l.S)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:m}},fill:{color:u}});d.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{(0,l.h)(o).attributes.forEach(((o,s)=>o.color=e.color[s])),a()}))),n.addStyler(d),await y}async function R(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n,selectedAttribute:c}=e,u=(0,l.h)(o).attributes,p=i.dotDensitySchemes.getSchemes({basemap:s.map.basemap,numColors:u.length}),m=(0,l.a7)(p).slice(0,16),d=await b(n),y=f(d,(0,l.S)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:m}},fill:{color:u[c].color}});d.stringOverrides={fillColor:r.styler.dotColor,fillTransparency:r.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{symbol:e}})=>{(0,l.h)(o).attributes[c].color=(0,l.t)(e),a()}))),n.addStyler(d),await y}async function M(e){const{layer:o,mapView:s,portal:t,strings:r,modules:i}=l.s,{onChange:a,popoverNode:n}=e,c=(0,l.h)(o).colorStops,u=c.filter(((e,o)=>o>=3)).map((e=>e.color)),p=await i.colorUtils.getBackgroundColorTheme(s),m=i.heatmapSchemes.getSchemes({basemapTheme:p}),d=(0,l.a9)(m,c.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),y=await b(n),g=f(y,(0,l.S)(o,s),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:d,parts:{transparency:!1}}},fill:{color:u.reverse()}});y.stringOverrides={fillTransparency:r.styler.transparency},y.addEventListener("arcgisSymbolStylerEdit",h.bind(null,(({detail:{info:{fill:e}}})=>{const s=i.esriLang.clone(e.color);s.reverse();const t=Math.max(c.length-s.length,0);(0,l.h)(o).colorStops.forEach(((e,o)=>{const l=e.color.a;e.color=o<=t-2||o<=t?i.esriLang.clone(s[0]):i.esriLang.clone(s[o-t]),e.color.a=l})),a()}))),n.addStyler(y),await g}function N(e,o,s,t,i){const{layer:a,modules:c}=l.s,u=(0,l.A)(a),p=(0,l.B)(a);u?U(o,(0,l.T)(e),e,t,i):p?U(s,(0,l.T)(e),e,t,i):function(e,o,s,t,i){const{layer:a,mapView:c}=l.s,{onChange:u}=i,p=(0,l.h)(a),m=(0,l.a)(p,"size","outline");e&&!m?(0,r.a)().then((e=>{if(e){const o=(0,l.h)(a);o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),J(e,c.scale,s,t)}u()})):!e&&m?(p.visualVariables=p.visualVariables.filter((e=>!("size"===e.type&&"outline"===e.target))),p.visualVariables&&!p.visualVariables.length&&(p.visualVariables=void 0),u()):(e&&function(e,o){const{layer:s,mapView:t}=l.s,{onChange:i}=o,a=t.scale;let c=(0,l.h)(s);const u=(0,l.a)(c,"size","outline"),p=u.stops;if(0!==e&&0===p[p.length-2].size)(0,r.a)().then((o=>{if(o){const t=n(o,a);D(o,(0===e?Math.max(.5,e):e)/(0===t?Math.max(.5,t):t));const r=(0,l.n)((0,l.h)(s),"size","outline")||[];r.push(o),(0,l.h)(s).visualVariables=r,i(),setTimeout((()=>{}),2e3)}}));else{const o=n(u,a),s=(0===e?Math.max(.5,e):e)/(0===o?Math.max(.5,o):o);D(u,s),0!==e&&0!==o||(function(e,o,s){const l=e.stops,t=l.length-1,r=l[0].value,i=l[t].value;if(o<=r)for(let e=0;e<=t;e++)l[e].size=s;else if(o>=i)l[t].size=s;else for(let e=0;e<t;e++){const r=l[e],i=l[e+1];if(o>=r.value&&o<i.value){for(let o=e+1;o<=t;o++)l[o].size=s;break}}}(u,a,e),u.stops.forEach(((e,o)=>{o>0&&e.size===u.stops[o-1].size&&(o===u.stops.length-1?o>1&&(u.stops[o-1].size=(u.stops[o-2].size+e.size)/2):e.size=(u.stops[o+1].size+u.stops[o-1].size)/2)})))}}(o,i),u())}(s,"cim"===e.type?(0,l.ap)(e):(0,l.T)(e.outline||new c.SimpleLineSymbol),e,t,i)}function U(e,o,s,t,i){const{layer:a,mapView:c}=l.s,{onChange:u}=i,p=(0,l.h)(a);o=Math.max(o,.1);const m=(0,l.a)(p,"size","auto");if(e&&!m)(0,r.b)().then((e=>{if(e){const o=(0,l.h)(a);o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),(0,l.ak)(s)&&D(e,(0,l.T)(s)/n(e,c.scale)),J(e,c.scale,s,t)}u()}));else if(!e&&m){const e=(0,l.n)(p,"size","auto");(null==e?void 0:e.length)?p.visualVariables=e:p.visualVariables=void 0,u()}else e&&function(e){const{layer:o,mapView:s}=l.s,t=s.scale,r=(0,l.h)(o),i=(0,l.a)(r,"size","auto");D(i,e/n(i,t))}(o),u()}function D(e,o){e.stops.forEach((e=>{e.size*=o}))}function _(e,o,s){const{layer:t,mapView:r,modules:i}=l.s;let a;return i.reactiveUtils.when((()=>r.stationary),(()=>{const i=r.scale;if(a!==i){const r=(0,l.h)(t),n=(0,l.a)(r,"size","simple-fill"===e.type?"outline":"auto");n&&J(n,i,e,o,s),a=i}}))}function J(e,o,s,t,r){const i=n(e,o),a=["simple-line","simple-fill"].indexOf(s.type)>-1||(0,l.ak)(s)?"stroke":"marker";t.setSize(a,i),null==r||r(i)}function W(e,o){return e&&(e.a=o),e}function H(e){var o,s,t;const{modules:r}=l.s;if((0,l.ak)(e))return{color:(null===(o=(0,l.t)(e))||void 0===o?void 0:o.clone())||new r.esriColor([255,255,255,.5]),size:null!==(s=(0,l.T)(e))&&void 0!==s?s:1};{const o=(0,l.al)(e);return{color:new r.esriColor(null==o?void 0:o.color)||new r.esriColor([255,255,255,.5]),size:null!==(t=null==o?void 0:o.width)&&void 0!==t?t:1}}}function K(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1}function Q(e){return["simple-fill","simple-marker","simple-line","cim"].indexOf(e.type)>-1}}}]);