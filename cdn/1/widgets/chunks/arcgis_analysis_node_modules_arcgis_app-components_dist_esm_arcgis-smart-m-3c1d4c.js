"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-3c1d4c"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-smart-mapping-hillshade-type-button.entry.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-smart-mapping-hillshade-type-button.entry.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_smart_mapping_hillshade_type_button: () => (/* binding */ ArcgisSmartMappingHillshadeTypeButton)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./raster-unique-value-0976ec7f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/raster-unique-value-0976ec7f.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _commonEnums_fcf13661_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./commonEnums-fcf13661.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonEnums-fcf13661.js");
/* harmony import */ var _languageUtil_ef0e54b2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./languageUtil-ef0e54b2.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/languageUtil-ef0e54b2.js");
/* harmony import */ var _dom_4d367677_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dom-4d367677.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/dom-4d367677.js");
/* harmony import */ var _locale_050b6db9_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locale-050b6db9.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/locale-050b6db9.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _commonFunctions_b0830e9e_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commonFunctions-b0830e9e.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/commonFunctions-b0830e9e.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */










const arcgisSmartMappingHillshadeTypeButtonCss = ".hillshade-type-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.hillshade-type-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.hillshade-type-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.hillshade-type-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.hillshade-type-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.hillshade-type-content{display:flex;align-items:center;justify-content:space-between;width:100%}.hillshade-type-button-text{display:inline-block;padding:0 10px}.hillshade-type-button-title{font-weight:bold}.hillshade-type-button-msg{font-size:80%;line-height:16px}";

const ArcgisSmartMappingHillshadeTypeButton = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisSmartMappingHillshadeTypeButtonChange = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSmartMappingHillshadeTypeButtonChange", 7);
        this.arcgisSmartMappingHillshadeTypeButtonBeforeOpen = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisSmartMappingHillshadeTypeButtonBeforeOpen", 7);
        this.hillshadeTypeInfos = [];
        this.open = false;
    }
    //--------------------------------------------------------------------------
    //
    //  Public Methods
    //
    //--------------------------------------------------------------------------
    async setFocus() {
        this.buttonNode.focus();
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    componentWillLoad() {
        this.populateHillshadeTypeInfo();
        this.setSelection();
    }
    componentWillUpdate() {
        const { layer: smLayer } = _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__.s;
        const layer = smLayer;
        const renderer = layer.renderer;
        const { hillshadeType } = renderer;
        if (this.selectedHillshadeTypeInfo.value !== hillshadeType) {
            this.setSelection();
        }
    }
    // --------------------------------------------------------------------------
    //
    // Render Methods
    //
    //--------------------------------------------------------------------------
    render() {
        const { strings } = _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__.s;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, strings.panels.shadedRelief.hillshadeType, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hillshade-type-button", role: "button", tabindex: "0", "aria-haspopup": "true", "aria-label": strings.panels.shadedRelief.hillshadeType, ref: (node) => (this.buttonNode = node), onKeyDown: (event) => {
                if (event.key === " " || event.key === "Enter") {
                    event.preventDefault();
                    event.stopPropagation();
                    this.openHillshadeTypeDropdown();
                }
            }, onClick: () => this.openHillshadeTypeDropdown() }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hillshade-type-content" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hillshade-type-button-text" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hillshade-type-button-title" }, this.selectedHillshadeTypeInfo.title), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hillshade-type-button-msg" }, this.selectedHillshadeTypeInfo.msg)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { scale: "s", icon: "chevron-down" })))))));
    }
    // --------------------------------------------------------------------------
    //
    // Private methods
    //
    // --------------------------------------------------------------------------
    populateHillshadeTypeInfo() {
        const { strings } = _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__.s;
        const hillshadeTypeOptions = strings.panels.shadedRelief.hillshadeTypeOptions;
        const hillshadeTypeOptionDescriptions = strings.panels.shadedRelief.hillshadeTypeOptionDescriptions;
        this.hillshadeTypeInfos.push({
            value: "traditional",
            title: hillshadeTypeOptions.traditional,
            msg: hillshadeTypeOptionDescriptions.traditional,
            iconPath: null,
            selected: false
        });
        this.hillshadeTypeInfos.push({
            value: "multi-directional",
            title: hillshadeTypeOptions.multidirectional,
            msg: hillshadeTypeOptionDescriptions.multidirectional,
            iconPath: null,
            selected: false
        });
    }
    setSelection() {
        const { layer: smLayer } = _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__.s;
        const layer = smLayer;
        const renderer = layer.renderer;
        this.selectedHillshadeTypeInfo = this.hillshadeTypeInfos.find((info) => info.value === renderer.hillshadeType);
        this.hillshadeTypeInfos.forEach((hillshadeTypeInfo) => {
            hillshadeTypeInfo.selected = hillshadeTypeInfo.value === this.selectedHillshadeTypeInfo.value;
        });
    }
    closePopover() {
        var _a;
        this.open = false;
        if (this.dropdownNode) {
            (_a = this.dropdownNode.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.dropdownNode);
            this.dropdownNode = null;
            this.buttonNode.classList.remove("active");
        }
    }
    openHillshadeTypeDropdown() {
        if (!this.open) {
            this.arcgisSmartMappingHillshadeTypeButtonBeforeOpen.emit();
            const dropdown = document.createElement("arcgis-smart-mapping-dropdown");
            dropdown.buttonNode = this.buttonNode;
            dropdown.infos = this.hillshadeTypeInfos;
            this.dropdownNode = dropdown;
            dropdown.addEventListener("arcgisSmartMappingDropdownClose", (event) => {
                this.closePopover();
                event.detail === "Escape" && this.setFocus();
            });
            dropdown.addEventListener("arcgisSmartMappingDropdownChange", (event) => this.setHillshadeType(event.detail));
            this.buttonNode.classList.add("active");
            document.body.appendChild(dropdown);
            this.open = true;
        }
        else {
            this.open = false;
        }
    }
    setHillshadeType(newHillshadeTypeInfo) {
        const { layer: smLayer } = _raster_unique_value_0976ec7f_js__WEBPACK_IMPORTED_MODULE_1__.s;
        const layer = smLayer;
        const renderer = layer.renderer;
        const { hillshadeType: currentHillshadeType } = renderer;
        const newHillshadeType = newHillshadeTypeInfo.value;
        if (newHillshadeType === currentHillshadeType) {
            this.closePopover();
            setTimeout(() => this.setFocus(), 300);
            return;
        }
        this.hillshadeTypeInfos.forEach((hillshadeTypeInfo) => {
            hillshadeTypeInfo.selected = hillshadeTypeInfo.value === newHillshadeType;
        });
        this.selectedHillshadeTypeInfo = newHillshadeTypeInfo;
        this.arcgisSmartMappingHillshadeTypeButtonChange.emit(this.selectedHillshadeTypeInfo.value);
        this.closePopover();
        setTimeout(() => this.setFocus(), 300);
    }
    get hostElement() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisSmartMappingHillshadeTypeButton.style = arcgisSmartMappingHillshadeTypeButtonCss;



//# sourceMappingURL=arcgis-smart-mapping-hillshade-type-button.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLXNtYXJ0LW0tM2MxZDRjLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUM2RztBQUNsQztBQUN4QztBQUNBO0FBQ0M7QUFDVDtBQUNHO0FBQ0Q7QUFDVTs7QUFFdkMseUVBQXlFLGFBQWEsWUFBWSw4QkFBOEIsbUJBQW1CLGdCQUFnQixlQUFlLG1EQUFtRCxrQ0FBa0MsK0NBQStDLGlCQUFpQixtQkFBbUIsNkNBQTZDLDZCQUE2Qiw2REFBNkQsOEJBQThCLDZEQUE2RCw2QkFBNkIsNkRBQTZELDZDQUE2QyxtQkFBbUIsOEJBQThCLDRFQUE0RSx3QkFBd0IsYUFBYSxtQkFBbUIsOEJBQThCLFdBQVcsNEJBQTRCLHFCQUFxQixlQUFlLDZCQUE2QixpQkFBaUIsMkJBQTJCLGNBQWMsaUJBQWlCOztBQUV6a0M7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLDJEQUEyRCxxREFBVztBQUN0RSwrREFBK0QscURBQVc7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlCQUFpQixFQUFFLCtEQUFpQjtBQUNwRDtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixVQUFVLEVBQUUsK0RBQWlCO0FBQzdDLGdCQUFnQixxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsbUVBQW1FLHFEQUFDLFVBQVU7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQW1ELEVBQUUscURBQUMsVUFBVSxpQ0FBaUMsRUFBRSxxREFBQyxVQUFVLHFDQUFxQyxFQUFFLHFEQUFDLFVBQVUsc0NBQXNDLHlDQUF5QyxxREFBQyxVQUFVLG9DQUFvQyx3Q0FBd0MscURBQUMsY0FBYyxxREFBQyxtQkFBbUIsa0NBQWtDO0FBQ3haO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFVBQVUsRUFBRSwrREFBaUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdCQUFnQixpQkFBaUIsRUFBRSwrREFBaUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlCQUFpQixFQUFFLCtEQUFpQjtBQUNwRDtBQUNBO0FBQ0EsZ0JBQWdCLHNDQUFzQztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTyxxREFBVTtBQUN6QztBQUNBOztBQUUrRjs7QUFFL0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtc21hcnQtbWFwcGluZy1oaWxsc2hhZGUtdHlwZS1idXR0b24uZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCwgZCBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC1lM2JmN2RhNy5qcyc7XG5pbXBvcnQgeyBzIGFzIHNtYXJ0TWFwcGluZ1N0YXRlIH0gZnJvbSAnLi9yYXN0ZXItdW5pcXVlLXZhbHVlLTA5NzZlYzdmLmpzJztcbmltcG9ydCAnLi9sb2FkTW9kdWxlcy1iNGFjMTI0Ny5qcyc7XG5pbXBvcnQgJy4vY29tbW9uRW51bXMtZmNmMTM2NjEuanMnO1xuaW1wb3J0ICcuL2xhbmd1YWdlVXRpbC1lZjBlNTRiMi5qcyc7XG5pbXBvcnQgJy4vZG9tLTRkMzY3Njc3LmpzJztcbmltcG9ydCAnLi9sb2NhbGUtMDUwYjZkYjkuanMnO1xuaW1wb3J0ICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcbmltcG9ydCAnLi9jb21tb25GdW5jdGlvbnMtYjA4MzBlOWUuanMnO1xuXG5jb25zdCBhcmNnaXNTbWFydE1hcHBpbmdIaWxsc2hhZGVUeXBlQnV0dG9uQ3NzID0gXCIuaGlsbHNoYWRlLXR5cGUtYnV0dG9ue2Rpc3BsYXk6ZmxleDtwYWRkaW5nOjZweDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7Ym9yZGVyLXJhZGl1czowO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKTtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTMpO2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JveC1zaGFkb3c6dHJhbnNwYXJlbnQgMHB4IDBweCAwcHggMXB4IGluc2V0fS5oaWxsc2hhZGUtdHlwZS1idXR0b246aG92ZXJ7Ym94LXNoYWRvdzppbnNldCAwIDAgMCAxcHggdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTMpfS5oaWxsc2hhZGUtdHlwZS1idXR0b246YWN0aXZle2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgMnB4IHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKX0uaGlsbHNoYWRlLXR5cGUtYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6aW5zZXQgMCAwIDAgMnB4IHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKTtvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtvdXRsaW5lLW9mZnNldDoycHh9LmhpbGxzaGFkZS10eXBlLWJ1dHRvbi5hY3RpdmV7b3V0bGluZToxcHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpfS5oaWxsc2hhZGUtdHlwZS1jb250ZW50e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47d2lkdGg6MTAwJX0uaGlsbHNoYWRlLXR5cGUtYnV0dG9uLXRleHR7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIDEwcHh9LmhpbGxzaGFkZS10eXBlLWJ1dHRvbi10aXRsZXtmb250LXdlaWdodDpib2xkfS5oaWxsc2hhZGUtdHlwZS1idXR0b24tbXNne2ZvbnQtc2l6ZTo4MCU7bGluZS1oZWlnaHQ6MTZweH1cIjtcblxuY29uc3QgQXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbiA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMuYXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbkNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbkNoYW5nZVwiLCA3KTtcbiAgICAgICAgdGhpcy5hcmNnaXNTbWFydE1hcHBpbmdIaWxsc2hhZGVUeXBlQnV0dG9uQmVmb3JlT3BlbiA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiYXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbkJlZm9yZU9wZW5cIiwgNyk7XG4gICAgICAgIHRoaXMuaGlsbHNoYWRlVHlwZUluZm9zID0gW107XG4gICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHVibGljIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICAgICAgdGhpcy5idXR0b25Ob2RlLmZvY3VzKCk7XG4gICAgfVxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBMaWZlY3ljbGVcbiAgICAvL1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy5wb3B1bGF0ZUhpbGxzaGFkZVR5cGVJbmZvKCk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVcGRhdGUoKSB7XG4gICAgICAgIGNvbnN0IHsgbGF5ZXI6IHNtTGF5ZXIgfSA9IHNtYXJ0TWFwcGluZ1N0YXRlO1xuICAgICAgICBjb25zdCBsYXllciA9IHNtTGF5ZXI7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbGF5ZXIucmVuZGVyZXI7XG4gICAgICAgIGNvbnN0IHsgaGlsbHNoYWRlVHlwZSB9ID0gcmVuZGVyZXI7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSGlsbHNoYWRlVHlwZUluZm8udmFsdWUgIT09IGhpbGxzaGFkZVR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vIFJlbmRlciBNZXRob2RzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHN0cmluZ3MgfSA9IHNtYXJ0TWFwcGluZ1N0YXRlO1xuICAgICAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcImNhbGNpdGUtbGFiZWxcIiwgbnVsbCwgc3RyaW5ncy5wYW5lbHMuc2hhZGVkUmVsaWVmLmhpbGxzaGFkZVR5cGUsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoaWxsc2hhZGUtdHlwZS1idXR0b25cIiwgcm9sZTogXCJidXR0b25cIiwgdGFiaW5kZXg6IFwiMFwiLCBcImFyaWEtaGFzcG9wdXBcIjogXCJ0cnVlXCIsIFwiYXJpYS1sYWJlbFwiOiBzdHJpbmdzLnBhbmVscy5zaGFkZWRSZWxpZWYuaGlsbHNoYWRlVHlwZSwgcmVmOiAobm9kZSkgPT4gKHRoaXMuYnV0dG9uTm9kZSA9IG5vZGUpLCBvbktleURvd246IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiIFwiIHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5IaWxsc2hhZGVUeXBlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBvbkNsaWNrOiAoKSA9PiB0aGlzLm9wZW5IaWxsc2hhZGVUeXBlRHJvcGRvd24oKSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGlsbHNoYWRlLXR5cGUtY29udGVudFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoaWxsc2hhZGUtdHlwZS1idXR0b24tdGV4dFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJoaWxsc2hhZGUtdHlwZS1idXR0b24tdGl0bGVcIiB9LCB0aGlzLnNlbGVjdGVkSGlsbHNoYWRlVHlwZUluZm8udGl0bGUpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaGlsbHNoYWRlLXR5cGUtYnV0dG9uLW1zZ1wiIH0sIHRoaXMuc2VsZWN0ZWRIaWxsc2hhZGVUeXBlSW5mby5tc2cpKSwgaChcImRpdlwiLCBudWxsLCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgc2NhbGU6IFwic1wiLCBpY29uOiBcImNoZXZyb24tZG93blwiIH0pKSkpKSkpO1xuICAgIH1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gUHJpdmF0ZSBtZXRob2RzXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHBvcHVsYXRlSGlsbHNoYWRlVHlwZUluZm8oKSB7XG4gICAgICAgIGNvbnN0IHsgc3RyaW5ncyB9ID0gc21hcnRNYXBwaW5nU3RhdGU7XG4gICAgICAgIGNvbnN0IGhpbGxzaGFkZVR5cGVPcHRpb25zID0gc3RyaW5ncy5wYW5lbHMuc2hhZGVkUmVsaWVmLmhpbGxzaGFkZVR5cGVPcHRpb25zO1xuICAgICAgICBjb25zdCBoaWxsc2hhZGVUeXBlT3B0aW9uRGVzY3JpcHRpb25zID0gc3RyaW5ncy5wYW5lbHMuc2hhZGVkUmVsaWVmLmhpbGxzaGFkZVR5cGVPcHRpb25EZXNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMuaGlsbHNoYWRlVHlwZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgdmFsdWU6IFwidHJhZGl0aW9uYWxcIixcbiAgICAgICAgICAgIHRpdGxlOiBoaWxsc2hhZGVUeXBlT3B0aW9ucy50cmFkaXRpb25hbCxcbiAgICAgICAgICAgIG1zZzogaGlsbHNoYWRlVHlwZU9wdGlvbkRlc2NyaXB0aW9ucy50cmFkaXRpb25hbCxcbiAgICAgICAgICAgIGljb25QYXRoOiBudWxsLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhpbGxzaGFkZVR5cGVJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgIHZhbHVlOiBcIm11bHRpLWRpcmVjdGlvbmFsXCIsXG4gICAgICAgICAgICB0aXRsZTogaGlsbHNoYWRlVHlwZU9wdGlvbnMubXVsdGlkaXJlY3Rpb25hbCxcbiAgICAgICAgICAgIG1zZzogaGlsbHNoYWRlVHlwZU9wdGlvbkRlc2NyaXB0aW9ucy5tdWx0aWRpcmVjdGlvbmFsLFxuICAgICAgICAgICAgaWNvblBhdGg6IG51bGwsXG4gICAgICAgICAgICBzZWxlY3RlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFNlbGVjdGlvbigpIHtcbiAgICAgICAgY29uc3QgeyBsYXllcjogc21MYXllciB9ID0gc21hcnRNYXBwaW5nU3RhdGU7XG4gICAgICAgIGNvbnN0IGxheWVyID0gc21MYXllcjtcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBsYXllci5yZW5kZXJlcjtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEhpbGxzaGFkZVR5cGVJbmZvID0gdGhpcy5oaWxsc2hhZGVUeXBlSW5mb3MuZmluZCgoaW5mbykgPT4gaW5mby52YWx1ZSA9PT0gcmVuZGVyZXIuaGlsbHNoYWRlVHlwZSk7XG4gICAgICAgIHRoaXMuaGlsbHNoYWRlVHlwZUluZm9zLmZvckVhY2goKGhpbGxzaGFkZVR5cGVJbmZvKSA9PiB7XG4gICAgICAgICAgICBoaWxsc2hhZGVUeXBlSW5mby5zZWxlY3RlZCA9IGhpbGxzaGFkZVR5cGVJbmZvLnZhbHVlID09PSB0aGlzLnNlbGVjdGVkSGlsbHNoYWRlVHlwZUluZm8udmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjbG9zZVBvcG92ZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmRyb3Bkb3duTm9kZSkge1xuICAgICAgICAgICAgKF9hID0gdGhpcy5kcm9wZG93bk5vZGUucGFyZW50Tm9kZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbW92ZUNoaWxkKHRoaXMuZHJvcGRvd25Ob2RlKTtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd25Ob2RlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW5IaWxsc2hhZGVUeXBlRHJvcGRvd24oKSB7XG4gICAgICAgIGlmICghdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmFyY2dpc1NtYXJ0TWFwcGluZ0hpbGxzaGFkZVR5cGVCdXR0b25CZWZvcmVPcGVuLmVtaXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFyY2dpcy1zbWFydC1tYXBwaW5nLWRyb3Bkb3duXCIpO1xuICAgICAgICAgICAgZHJvcGRvd24uYnV0dG9uTm9kZSA9IHRoaXMuYnV0dG9uTm9kZTtcbiAgICAgICAgICAgIGRyb3Bkb3duLmluZm9zID0gdGhpcy5oaWxsc2hhZGVUeXBlSW5mb3M7XG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duTm9kZSA9IGRyb3Bkb3duO1xuICAgICAgICAgICAgZHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcihcImFyY2dpc1NtYXJ0TWFwcGluZ0Ryb3Bkb3duQ2xvc2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBvcG92ZXIoKTtcbiAgICAgICAgICAgICAgICBldmVudC5kZXRhaWwgPT09IFwiRXNjYXBlXCIgJiYgdGhpcy5zZXRGb2N1cygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKFwiYXJjZ2lzU21hcnRNYXBwaW5nRHJvcGRvd25DaGFuZ2VcIiwgKGV2ZW50KSA9PiB0aGlzLnNldEhpbGxzaGFkZVR5cGUoZXZlbnQuZGV0YWlsKSk7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbk5vZGUuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZHJvcGRvd24pO1xuICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEhpbGxzaGFkZVR5cGUobmV3SGlsbHNoYWRlVHlwZUluZm8pIHtcbiAgICAgICAgY29uc3QgeyBsYXllcjogc21MYXllciB9ID0gc21hcnRNYXBwaW5nU3RhdGU7XG4gICAgICAgIGNvbnN0IGxheWVyID0gc21MYXllcjtcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBsYXllci5yZW5kZXJlcjtcbiAgICAgICAgY29uc3QgeyBoaWxsc2hhZGVUeXBlOiBjdXJyZW50SGlsbHNoYWRlVHlwZSB9ID0gcmVuZGVyZXI7XG4gICAgICAgIGNvbnN0IG5ld0hpbGxzaGFkZVR5cGUgPSBuZXdIaWxsc2hhZGVUeXBlSW5mby52YWx1ZTtcbiAgICAgICAgaWYgKG5ld0hpbGxzaGFkZVR5cGUgPT09IGN1cnJlbnRIaWxsc2hhZGVUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlUG9wb3ZlcigpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldEZvY3VzKCksIDMwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oaWxsc2hhZGVUeXBlSW5mb3MuZm9yRWFjaCgoaGlsbHNoYWRlVHlwZUluZm8pID0+IHtcbiAgICAgICAgICAgIGhpbGxzaGFkZVR5cGVJbmZvLnNlbGVjdGVkID0gaGlsbHNoYWRlVHlwZUluZm8udmFsdWUgPT09IG5ld0hpbGxzaGFkZVR5cGU7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSGlsbHNoYWRlVHlwZUluZm8gPSBuZXdIaWxsc2hhZGVUeXBlSW5mbztcbiAgICAgICAgdGhpcy5hcmNnaXNTbWFydE1hcHBpbmdIaWxsc2hhZGVUeXBlQnV0dG9uQ2hhbmdlLmVtaXQodGhpcy5zZWxlY3RlZEhpbGxzaGFkZVR5cGVJbmZvLnZhbHVlKTtcbiAgICAgICAgdGhpcy5jbG9zZVBvcG92ZXIoKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldEZvY3VzKCksIDMwMCk7XG4gICAgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5BcmNnaXNTbWFydE1hcHBpbmdIaWxsc2hhZGVUeXBlQnV0dG9uLnN0eWxlID0gYXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbkNzcztcblxuZXhwb3J0IHsgQXJjZ2lzU21hcnRNYXBwaW5nSGlsbHNoYWRlVHlwZUJ1dHRvbiBhcyBhcmNnaXNfc21hcnRfbWFwcGluZ19oaWxsc2hhZGVfdHlwZV9idXR0b24gfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLXNtYXJ0LW1hcHBpbmctaGlsbHNoYWRlLXR5cGUtYnV0dG9uLmVudHJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==