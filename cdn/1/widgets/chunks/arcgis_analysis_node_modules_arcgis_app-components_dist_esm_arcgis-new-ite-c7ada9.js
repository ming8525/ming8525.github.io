/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-c7ada9.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-c7ada9"],{552:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_data_upload:()=>h});var s=t(81149),a=t(49853),r=t(41487),n=t(12846),l=t(97762),o=t(20206),d=t(65804),c=t(55234);t(70464),t(13615),t(62824),t(79210),t(43237),t(78239),t(20164),t(69283),t(88780),t(70105),t(18762),t(49288),t(42577),t(30301),t(82102),t(74689),t(14192),t(52787),t(25145),t(50202),t(41450),t(70217),t(8899),t(12046),t(73411),t(13337);const h=class{constructor(e){(0,s.r)(this,e),this.newItemUpdatePage=(0,s.c)(this,"newItemUpdatePage",7),this.workflowComplete=(0,s.c)(this,"workflowComplete",7),this.allowedExtensions=null,this.loading=!1,this.loaderMessage=void 0,this.loaderType="indeterminate",this.error=void 0}componentWillLoad(){const{existingItem:e,fileName:i}=o.a,t=e.type;switch(this.i18n=d.u.i18n.appendUpload,this.item=e,t){case"Vector Tile Service":this.header=this.i18n.editStyle;break;case"Vector Tile Package":case"Layer Package":case"Tile Package":this.header=this.i18n.updatePackages.replace("${type}",t.toLowerCase()).replace("${hostedLayerName}",i);break;default:this.header=this.i18n.sameFileNameDescription.replace("${fileName}",i)}"Vector Tile Service"===t&&(this.allowedExtensions=["json"])}async fileSelectHandler(e){var i;this.sourceName=(null===(i=o.a.existingItem.sourceData)||void 0===i?void 0:i.name)||o.a.existingItem.name;const t=e.detail.file,s=o.a.existingItem.type,{title:a,fileName:l,extension:d}=(0,r.s)(t);if("Vector Tile Service"===s){if("json"!==d)return void this.handleError({code:"invalidExtension"})}else if(l!==this.sourceName)return void this.handleError({code:"useSameFileName"});n.i.title=a,o.a.file=t,o.a.fileName=l,o.a.newItemMode="file",o.a.extension=d;const h=(0,c.f)(d);if(1===h.length){const e=h[0].type;o.a.type=e}"Layer Package"===s?this.newItemUpdatePage.emit("appendSelectUpdate"):"Vector Tile Service"===s?this.handleUpdateStyle():this.handleUpdate()}async handleUpdate(){this.loading=!0,this.loaderMessage=d.u.i18n.append.appendLoadingMessages.updating;const e=await(0,l.b)(o.a.existingItem,this.item.itemOwner.userContentUrl,{file:o.a.file,overwrite:!0,keepDescription:!0});e.success?this.workflowComplete.emit({success:e.success}):this.handleError({code:"unhandledError"})}async handleUpdateStyle(){this.loading=!0,this.loaderMessage=d.u.i18n.append.appendLoadingMessages.updating;const{result:e,error:i}=await(0,l.c)(o.a.existingItem,this.item.itemOwner.userContentUrl,{file:o.a.file});e.success&&this.workflowComplete.emit({success:e.success}),i&&this.handleError({code:i.code})}async handleError(e){let i=this.i18n.errors.errorWhileUpload;switch(this.loading=!1,e.code){case"invalidExtension":i=this.i18n.errors.invalidStyleFileExtension;case"useSameFileName":i=this.i18n.errors.sameFileName.replace("${x}",this.sourceName);break;case"unhandledError":i=this.i18n.errors.errorUpdate}this.error={title:d.u.i18n.error,description:i}}render(){const{header:e,loaderType:i,loading:t,loaderMessage:r,error:n,allowedExtensions:l}=this,{portal:o,config:d,user:c}=a.c;return(0,s.h)(s.H,null,(0,s.h)("arcgis-new-item-loader",{type:i,active:t,text:r}),(0,s.h)("arcgis-new-item-description",{header:e}),(0,s.h)("arcgis-file-browser",{class:"arcgis-file-browser",cloud:!1,insideModal:!0,fullHeight:!0,portal:o,config:d,user:c,allowedExtensions:l}),(0,s.h)("arcgis-new-item-alert",{heading:null==n?void 0:n.title,description:null==n?void 0:n.description,link:{href:null==n?void 0:n.link,title:null==n?void 0:n.linkText},active:!!n,onAlertDismiss:()=>this.error=null}))}};h.style=".arcgis-file-browser{display:block;height:95%}"},55234:(e,i,t)=>{t.d(i,{a:()=>o,f:()=>r,i:()=>l,m:()=>n});var s=t(36238),a=t(13615);function r(e,i){let t;t=i?i.map((e=>e.type)):Object.keys(a.a);let s=[];return t.forEach((i=>{var t;(null===(t=a.a[i].fileExt)||void 0===t?void 0:t.indexOf(e))>=0&&s.push(a.a[i])})),s}function n(e){return e?(0,s.b)(e.flatMap((e=>{var i;return null===(i=a.a[e])||void 0===i?void 0:i.fileExt})).filter((e=>!!e))):null}const l=e=>e/1024/1024>50,o=e=>e/1024/1024>20}}]);