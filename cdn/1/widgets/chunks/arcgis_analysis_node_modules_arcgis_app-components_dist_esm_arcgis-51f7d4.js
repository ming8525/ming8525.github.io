/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-51f7d4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-51f7d4"],{67258:(e,t,r)=>{r.r(t),r.d(t,{arcgis_group_browser:()=>y,arcgis_group_browser_actions:()=>x,arcgis_group_browser_content:()=>_,arcgis_group_browser_filter_date:()=>G,arcgis_group_browser_filter_groups_by_user:()=>k,arcgis_group_browser_filter_member_org:()=>O,arcgis_group_browser_filter_membership:()=>I,arcgis_group_browser_filter_owner:()=>B,arcgis_group_browser_filter_special_groups:()=>F,arcgis_group_browser_filters:()=>U,arcgis_group_browser_pagination:()=>$,arcgis_group_browser_preview:()=>P,arcgis_group_browser_preview_card:()=>E,arcgis_group_browser_search:()=>T,arcgis_group_browser_sort:()=>A,arcgis_group_browser_top_bar:()=>L});var i=r(81149),s=r(70464),o=r(49853),a=r(42577),n=r(36238),l=r(82218),c=r(8484),d=r(20164),h=r(49288),u=r(69240),p=r(10157),g=r(12046),m=r(41761),v=r(77825),w=r(47415),f=r(51837),b=r(47110);r(69283),r(79210),r(74689),r(92638);const y=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserUpdate=(0,i.c)(this,"arcgisGroupBrowserUpdate",7),this.arcgisGroupBrowserLoading=(0,i.c)(this,"arcgisGroupBrowserLoading",7),this.arcgisGroupBrowserSelect=(0,i.c)(this,"arcgisGroupBrowserSelect",7),this.arcgisGroupBrowserPreview=(0,i.c)(this,"arcgisGroupBrowserPreview",7),this.arcgisGroupBrowserSublayerPreview=(0,i.c)(this,"arcgisGroupBrowserSublayerPreview",7),this.arcgisGroupBrowserInternalUIAction=(0,i.c)(this,"arcgisGroupBrowserInternalUIAction",7),this.liveRegionUpdate=(0,i.c)(this,"liveRegionUpdate",7),this.allowFetch=!1,this.currentResults=[],this.updateFiltersEmpty=()=>{var e;this.store.state.filtersEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="filters"]'))},this.updateTopbarEmpty=()=>{var e;this.store.state.topbarEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="top-bar"]'))},this.updateSortEmpty=()=>{var e;this.store.state.sortEmpty=!(null===(e=this.el)||void 0===e?void 0:e.querySelector('[slot="sort"]'))},this.filterMutationObserver=new MutationObserver(this.updateFiltersEmpty),this.topbarMutationObserver=new MutationObserver(this.updateTopbarEmpty),this.sortMutationObserver=new MutationObserver(this.updateSortEmpty),this.fetchGroups=(0,n.d)((async()=>{if(this.loading=!0,this.currentResults=[],this.arcgisGroupBrowserLoading.emit(),this.store.state.preview=null,!this.portal||!this.allowFetch)return;let e=this.getQuery();this.preflight&&(e=await this.preflight(e));const t=await(0,n.m)(this.queryGroups(e),500);this.arcgisGroupBrowserUpdate.emit(Object.assign(Object.assign(Object.assign({},t),{selectedGroups:this.selectedGroups,filters:Object.assign({},this.store.state.filters),searchTerm:this.searchTerm}),this.sort)),this.currentResponse=t,this.currentResults=t.results,this.loading=!1}),150),this.handleResizeEvent=e=>{this.resize(e)},this.renderSelectedItem=e=>(0,i.h)("arcgis-selected-item",{key:e.id,heading:e.title,onArcgisSelectedItemRemove:()=>{this.deselectGroup(e),this.arcgisGroupBrowserSelect.emit(this.selectedGroups)}},(0,i.h)("arcgis-group-thumbnail",{slot:"content-start",group:e,portal:this.portal,scale:"s"})),this.api=void 0,this.portal=void 0,this.user=void 0,this.searchUser=void 0,this.config=void 0,this.selection="none",this.view="list",this.num=20,this.q="",this.selectedGroups=[],this.preflight=void 0,this.fetch=void 0,this.hidePreviewFooter=!1,this.hidePreviewBadges=!1,this.hasIndoorsSpaces=!1,this.height="full",this.store=(0,s.c)({filters:{}}),this.usePanelLayout=!1,this.searchTerm="",this.sort=void 0,this.page={num:this.num,start:1,nextStart:-1},this.loading=!0,this.formFactor=void 0,this.pageRangeText="",this.previewGroup=void 0,this.currentResponse=void 0}async refresh(){this.fetchGroups()}async componentWillLoad(){const{el:e,hasIndoorsSpaces:t,selectedGroups:r,view:i}=this,s=await(0,l.g)(e);this.i18n=s[0],this.store.state.i18n=s[0],this.store.state.lang=s[1],this.store.state.view=i,this.store.state.hasIndoorsSpaces=t,this.store.state.selectedGroups=r,this.initializeConfig(),(0,c.s)(this.store).observe(this.el),e.addEventListener("arcgisBrowserResize",this.handleResizeEvent),this.filterMutationObserver.observe(e,{childList:!0}),this.topbarMutationObserver.observe(e,{childList:!0}),this.sortMutationObserver.observe(e,{childList:!0}),this.updateFiltersEmpty(),this.updateTopbarEmpty(),this.updateSortEmpty(),(this.usePanelLayout||(0,a.c)(this.el,"calcite-shell-panel"))&&(this.store.state.panel=!0,this.store.state.filtersExpanded=!1)}disconnectedCallback(){var e,t;null===(e=this.store.state.resizeObserver)||void 0===e||e.unobserve(this.el),this.filterMutationObserver.disconnect(),this.topbarMutationObserver.disconnect(),this.sortMutationObserver.disconnect(),this.filterClearHandler(!1),null===(t=this.el)||void 0===t||t.removeEventListener("arcgisBrowserResize",this.handleResizeEvent)}updateUser(e){var t;null!==(t=o.c.user)&&void 0!==t||(o.c.user=e)}updatePortal(e){var t;null!==(t=o.c.portal)&&void 0!==t||(o.c.portal=e)}updateAPI(e){var t;null!==(t=o.c.api)&&void 0!==t||(o.c.api=e)}updateConfig(e){var t;null!==(t=o.c.config)&&void 0!==t||(o.c.config=e)}updateSelection(e){this.store.state.selection=e}updateSelectedGroups(e){this.store.state.selectedGroups=e}updateQ(){this.resetPagination(),this.fetchGroups()}async componentDidLoad(){this.initializeConfig(),await(0,n.t)(400),this.allowFetch=!0,o.c.portal?this.fetchGroups():(0,o.o)("portal",(()=>{this.initializeConfig(),this.fetchGroups()}))}filterHandler(e){const t=Object.assign(Object.assign({},this.store.state.filters),{[e.detail.id]:e.detail});e.detail.value||delete t[e.detail.id],this.store.state.filters=t,this.resetPagination(),this.fetchGroups()}filterRemoveHandler(e){if(!e.detail)return;const t=Object.assign({},this.store.state.filters);delete t[e.detail],this.store.state.filters=t,this.resetPagination(),this.fetchGroups()}filterClearHandler(e=!0){this.store.state.filters={},this.resetPagination(),e&&this.fetchGroups()}genericFilterClearHandler(){this.filterClearHandler()}filterToggleHandler(){this.store.state.preview=null,this.store.state.filtersExpanded=!this.store.state.filtersExpanded}searchHandler(e){const t=e.detail;this.searchTerm=t,this.resetPagination(),t?this.fetchGroups():this.fetchGroups.invoke()}sortHandler(e){this.sort=e.detail,this.fetchGroups()}async pageHandler(e){var t;this.page=e.detail,this.allowFetch&&(await this.fetchGroups(),await(0,n.t)(400),null===(t=this.el.shadowRoot.querySelector(".content__view"))||void 0===t||t.scrollTo({top:0,behavior:"smooth"}))}selectHandler(e){const{selected:t,group:r}=e.detail;switch(this.selection){case"single":this.selectedGroups=[r];break;case"multiple":t?this.selectGroup(r):this.deselectGroup(r)}this.arcgisGroupBrowserSelect.emit(this.selectedGroups)}async togglePreview({detail:e}){this.store.state.filtersExpanded=!1,e&&this.store.state.preview!==e.id?(this.restoreFocusElement=document.activeElement,this.store.state.preview=e.id,this.previewGroup=Object.assign({},e),this.arcgisGroupBrowserPreview.emit(Object.assign({},e))):(this.store.state.preview=null,this.previewGroup=null,this.arcgisGroupBrowserPreview.emit(),this.arcgisGroupBrowserSublayerPreview.emit()),this.arcgisGroupBrowserInternalUIAction.emit({action:this.previewGroup?"open panel":"close panel",category:"card action"})}async initializeConfig(){var e,t,r,i;null!==(e=o.c.api)&&void 0!==e||(o.c.api=this.api),null!==(t=o.c.user)&&void 0!==t||(o.c.user=this.user),null!==(r=o.c.portal)&&void 0!==r||(o.c.portal=this.portal),null!==(i=o.c.config)&&void 0!==i||(o.c.config=this.config)}resetPagination(){this.page.start=1,this.page.total=0}getQuery(){return Object.assign(Object.assign({filters:this.store.state.filters,searchUser:this.searchUser,searchTerm:this.searchTerm,baseQuery:this.q},this.sort),this.page)}queryGroups(e){return this.fetch?this.fetch(e):async function(e,t){const r=`${(0,d.g)(e)}community/groups`,{num:i,start:s,sortOrder:o,sortField:a,filters:n,baseQuery:l,searchTerm:c,searchUser:u}=t,p=Object.keys(n||{}),g=c?`(${(0,h.c)(c)}) `:"",m=Object.assign(Object.assign({},u?{searchUserAccess:"groupMember",searchUserName:u}:{}),{q:`${l||""} ${g}`}),v=p.reduce(((e,t)=>{const{param:r,value:i}=n[t];return Object.assign(Object.assign({},e),{[r]:`${e[r]||""} ${i}`})}),m),w=Object.assign(Object.assign({num:i,start:s},"relevance"===a?{}:{sortField:a,sortOrder:o}),v||{});if(!Object.entries(v).some((([e,t])=>"string"!=typeof t||!!(null==t?void 0:t.trim()))))return{nextStart:-1,num:0,results:[],start:0,total:0};const f=await(0,d.r)(r,w);return Object.assign(Object.assign({},f),{q:v.q,queryParams:w})}(this.portal,e)}restoreFocus(){if(this.restoreFocusElement){const e=this.restoreFocusElement;e.restoreFocus?e.restoreFocus():e.setFocus?e.setFocus():e.focus&&e.focus()}}selectGroup(e){this.isSelected(e)||(this.selectedGroups=[...this.selectedGroups,e])}deselectGroup(e){this.selectedGroups=this.selectedGroups.filter((({id:t})=>t!==e.id))}isSelected(e){var t;return null===(t=this.selectedGroups)||void 0===t?void 0:t.some((({id:t})=>e.id===t))}resize({detail:{width:e,height:t}}){this.formFactor=e>c.b.sm?"large":"small";const r=this.store.state.width>c.b.sm?"large":"small";"large"===r&&"small"===this.formFactor&&(this.store.state.panel=this.usePanelLayout,this.store.state.filtersExpanded=!1),"small"===r&&"large"===this.formFactor&&(this.store.state.panel=!1,this.store.state.filtersExpanded=!0),this.store.state.width=e,this.store.state.height=t}renderSelected(){var e,t,r,s;const o=null===(e=this.currentResults)||void 0===e?void 0:e.every((e=>this.isSelected(e))),a=null===(t=this.selectedGroups)||void 0===t?void 0:t.length;return(0,i.h)("arcgis-selected",{slot:"selection",loading:this.loading,total:null===(r=this.currentResults)||void 0===r?void 0:r.length,totalSelected:a,emptyText:this.i18n.groupBrowser.noSelectedGroups,heading:this.i18n.groupBrowser.selectedGroups,checked:!this.loading&&o,indeterminate:!o&&!!a,onArcgisSelectedDeselectAll:()=>{this.selectedGroups=[],this.arcgisGroupBrowserSelect.emit(this.selectedGroups)},onArcgisSelectedSelectPage:()=>{var e;null===(e=this.currentResults)||void 0===e||e.forEach((e=>{this.selectGroup(e)})),this.arcgisGroupBrowserSelect.emit(this.selectedGroups)}},null===(s=this.selectedGroups)||void 0===s?void 0:s.map(this.renderSelectedItem))}renderSlot(e,t){return(0,i.h)("div",{slot:e},(0,i.h)("slot",{name:e},t))}render(){const{loading:e,i18n:t,selectedGroups:r,selection:s,currentResponse:o,store:a,api:n,searchTerm:l,formFactor:c,height:d,renderSlot:h}=this;return(0,i.h)(i.H,null,(0,i.h)("arcgis-browser",{preview:!!this.previewGroup,loading:e,selected:r,alwaysShowSelection:"multiple"===s,response:o,store:a,api:n,formFactor:c,searchTerm:l,height:d},h("top-bar"),h("sort"),(0,i.h)("arcgis-group-browser-preview",{slot:"preview",group:this.previewGroup,portal:this.portal,user:this.user,key:this.store.state.preview,onArcgisGroupBrowserPreviewClose:()=>{this.store.state.preview=null,this.previewGroup=null,this.arcgisGroupBrowserPreview.emit(),this.arcgisGroupBrowserSublayerPreview.emit(),this.restoreFocus()},hidePreviewFooter:this.hidePreviewFooter,showBadges:!this.hidePreviewBadges,currentResponse:this.currentResponse},(0,i.h)("div",{slot:"footer-action"},(0,i.h)("slot",{name:"preview-footer-action"}))),this.renderSelected(),h("actions"),h("content-start"),h("content"),h("content-end"),h("pagination"),h("filters"),h("scroll-end"),h("no-results",t.content.noResults),h("no-content",t.content.noContent)))}get el(){return(0,i.d)(this)}static get watchers(){return{user:["updateUser"],portal:["updatePortal"],api:["updateAPI"],config:["updateConfig"],selection:["updateSelection"],selectedGroups:["updateSelectedGroups"],q:["updateQ"]}}};y.style=":host{position:relative;display:flex;height:100%;flex-direction:column;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-background);--group-browser-max-width:100%;--group-browser-pane-width:18.75rem;--group-browser-pane-z-index:11;--group-browser-top-bar-background:var(--calcite-color-foreground-1)}arcgis-browser{--arcgis-browser-max-width:var(--group-browser-max-width);--arcgis-browser-pane-width:var(--group-browser-pane-width);--arcgis-browser-pane-z-index:var(--group-browser-pane-z-index);--arcgis-browser-top-bar-background:var(--group-browser-top-bar-background)}@media screen and (max-width: 640px){:host{--group-browser-pane-width:100%}}";const x=class{constructor(e){(0,i.r)(this,e),this.actions=[]}async componentWillLoad(){this.store=(0,u.g)(this.el)}render(){return(0,i.h)(i.H,null,(0,i.h)("arcgis-browser-actions",{actions:this.actions,selection:this.store.state.selectedGroups,store:this.store}))}get el(){return(0,i.d)(this)}},_=class{constructor(e){(0,i.r)(this,e)}async componentWillLoad(){this.store=(0,u.g)(this.el)}render(){const e=this.store.state.view;return(0,i.h)(i.H,null,(0,i.h)("div",{class:{[e]:!0,"no-space":this.store.state.width<c.b.xs&&this.store.state.panel}},(0,i.h)("slot",null)))}get el(){return(0,i.d)(this)}};_.style=":host{--arcgis-group-browser-columns:repeat(1, 1fr);--arcgis-group-browser-gap:0.5rem}.list slot,.compact slot{display:grid;grid-template-columns:var(--arcgis-group-browser-columns)}.compact slot{gap:0px}.list slot{gap:var(--arcgis-group-browser-gap)}";const G=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserFilter=(0,i.c)(this,"arcgisGroupBrowserFilter",7),this.property="modified",this.range=void 0,this.start=void 0,this.end=void 0,this.expanded=void 0}componentWillLoad(){this.store=(0,u.g)(this.el)}getEventDetail(e){return Object.assign({param:"q"},e)}render(){const{property:e,range:t,start:r,end:s,store:o,expanded:a}=this;return(0,i.h)("arcgis-browser-filter-date",{serverProperty:e,property:e,store:o,start:r,end:s,range:t,expanded:a,onArcgisBrowserFilter:e=>{this.arcgisGroupBrowserFilter.emit(this.getEventDetail(e.detail))}})}get el(){return(0,i.d)(this)}},k=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserUsernamesFilter=(0,i.c)(this,"arcgisGroupBrowserUsernamesFilter",7),this.searchUsernames=void 0,this.searchUsername=void 0,this.owner=void 0,this.expanded=void 0,this.allUsernames=[],this.selectedUsername=void 0}async componentWillLoad(){var e,t,r;this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.filterGroupsByUser,this.selectedUsername=null!==(t=null!==(e=this.searchUsername)&&void 0!==e?e:this.searchUsernames[0])&&void 0!==t?t:null===(r=o.c.user)||void 0===r?void 0:r.username}async searchUsernamesChanged(){this.allUsernames=this.searchUsernames}async searchUsernameChanged(){this.selectedUsername=this.searchUsername}render(){var e;const{allUsernames:t,selectedUsername:r,searchUsername:s,i18n:a}=this,n=null===(e=o.c.user)||void 0===e?void 0:e.username;return(0,i.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,onArcgisBrowserFilterRemove:()=>{this.selectedUsername=s}},(0,i.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:e=>{var t,r;const i=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.username)||"";this.selectedUsername=i,this.arcgisGroupBrowserUsernamesFilter.emit(i)}},t.map((e=>(0,i.h)("calcite-tree-item",{"data-username":e,selected:e===r},(0,i.h)("a",null,e===n?a.me.replace("${username}",e):e))))))}get el(){return(0,i.d)(this)}static get watchers(){return{searchUsernames:["searchUsernamesChanged"],searchUsername:["searchUsernameChanged"]}}},O=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserFilter=(0,i.c)(this,"arcgisGroupBrowserFilter",7),this.memberOrg=void 0,this.orgId=void 0,this.expanded=void 0}async componentWillLoad(){this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.filterMemberOrg}async componentDidLoad(){this.memberOrg&&this.arcgisGroupBrowserFilter.emit(this.getEventDetail()),(0,p.a)("memberOrg",this.store,(()=>this.memberOrg=null))}getQueryValue(){const{username:e}=o.c.user,t=o.c.portal.id;if(!e||!t)return"";switch(this.memberOrg){case"myOrg":return"memberorgids:NULL";case"anotherOrg":return this.orgId?`(memberorgids:${this.orgId} OR orgid:${this.orgId})`:"-memberorgids:NULL";default:return""}}getEventDetail(){const{memberOrg:e,orgId:t}=this;return{id:"memberOrg",param:"q",value:this.getQueryValue(),label:this.i18n.label.replace("${label}",this.i18n[e]),memberOrg:e,orgId:t}}render(){var e;return(null===(e=null===o.c||void 0===o.c?void 0:o.c.portal)||void 0===e?void 0:e.isPortal)?null:(0,i.h)("arcgis-browser-filter",{heading:this.i18n.currentMembersAreFrom,expanded:this.expanded,active:!!this.memberOrg,filterID:"memberOrg",onArcgisBrowserFilterRemove:()=>{this.memberOrg=null,this.orgId=null}},(0,i.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:e=>{var t,r;const i=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.memberOrg)||"";this.memberOrg===i?this.memberOrg=null:this.memberOrg=i,this.arcgisGroupBrowserFilter.emit(this.getEventDetail())}},["myOrg","anotherOrg"].map((e=>(0,i.h)("calcite-tree-item",{"data-member-org":e,selected:e===this.memberOrg},(0,i.h)("a",null,this.i18n[e]))))))}get el(){return(0,i.d)(this)}},I=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserFilter=(0,i.c)(this,"arcgisGroupBrowserFilter",7),this.hasIndoorsSpaces=!1,this.membership=void 0,this.expanded=void 0}async componentWillLoad(){this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.filterMembership,this.hasIndoorsSpaces=this.store.state.hasIndoorsSpaces}async componentDidLoad(){this.membership&&this.arcgisGroupBrowserFilter.emit(this.getEventDetail()),(0,p.a)("membership",this.store,(()=>this.membership=null))}getQueryValue(){if(this.hasIndoorsSpaces)return"membershipaccess:org";switch(this.membership){case"org":return"membershipaccess:org";case"collaboration":return"membershipaccess:collaboration";case"anyOrg":return"membershipaccess:NULL";default:return""}}getEventDetail(){const{membership:e}=this;return{id:"membership",param:"q",value:this.getQueryValue(),label:this.i18n.label.replace("${label}",this.i18n[e]),membership:e}}render(){var e;return this.hasIndoorsSpaces||(null===(e=null===o.c||void 0===o.c?void 0:o.c.portal)||void 0===e?void 0:e.isPortal)?null:(0,i.h)("arcgis-browser-filter",{heading:this.i18n.groupMembershipSetting,expanded:this.expanded,active:!!this.membership,filterID:"membership",onArcgisBrowserFilterRemove:()=>{this.membership=null}},(0,i.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:e=>{var t,r;const i=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.membership)||"";this.membership===i?this.membership=null:this.membership=i,this.arcgisGroupBrowserFilter.emit(this.getEventDetail())}},["org","collaboration","anyOrg"].map((e=>(0,i.h)("calcite-tree-item",{"data-membership":e,selected:e===this.membership},(0,i.h)("a",null,this.i18n[e]))))))}get el(){return(0,i.d)(this)}},B=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserFilter=(0,i.c)(this,"arcgisGroupBrowserFilter",7),this.hasIndoorsSpaces=!1,this.searchUsername=void 0,this.owner=void 0,this.expanded=void 0}async componentWillLoad(){this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.filterOwner,this.hasIndoorsSpaces=this.store.state.hasIndoorsSpaces}async componentDidLoad(){var e,t;this.owner&&this.arcgisGroupBrowserFilter.emit(this.getEventDetail()),(0,p.a)("owner",this.store,(()=>this.owner=null)),null!==(e=this.searchUsername)&&void 0!==e||(this.searchUsername=null===(t=o.c.user)||void 0===t?void 0:t.username)}getQueryValue(){var e,t,r;const i=null!==(e=this.searchUsername)&&void 0!==e?e:null===(t=o.c.user)||void 0===t?void 0:t.username,s=null===(r=o.c.portal)||void 0===r?void 0:r.id;if(!i)return"";switch(this.owner){case"owner":return`owner:${i}`;case"inOrg":return`-owner:${i} orgid:${s}`;case"outsideOrg":return`(orgid: [0 TO {]) -orgid:${s}`;default:return""}}getEventDetail(){const{owner:e,searchUsername:t}=this;return{id:"owner",param:"q",value:this.getQueryValue(),label:this.i18n.label.replace("${label}","owner"===e?t:this.i18n[e]),owner:e,username:t}}getOwnerText(e){return"owner"===e?this.searchUsername:"outsideOrg"===e?this.i18n[(0,g.a)(o.c.user)?"someoneElse":"outsideOrg"]:this.i18n[e]}searchUsernameChanged(){this.arcgisGroupBrowserFilter.emit(this.getEventDetail())}render(){const e=o.c.user;if(!(null==e?void 0:e.username))return null;const t=(0,g.a)(e)?["owner","outsideOrg"]:["owner","inOrg","outsideOrg"];return(0,i.h)("arcgis-browser-filter",{heading:this.i18n.owner,expanded:this.expanded,active:!!this.owner,filterID:"owner",onArcgisBrowserFilterRemove:()=>{this.owner=null}},(0,i.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:e=>{var t,r;const i=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.owner)||"";this.owner===i?this.owner=null:this.owner=i,this.arcgisGroupBrowserFilter.emit(this.getEventDetail())}},t.filter((e=>!(o.c.portal.isPortal||this.hasIndoorsSpaces)||"outsideOrg"!==e)).map((e=>(0,i.h)("calcite-tree-item",{"data-owner":e,selected:e===this.owner},(0,i.h)("a",null,this.getOwnerText(e)))))))}get el(){return(0,i.d)(this)}static get watchers(){return{searchUsername:["searchUsernameChanged"]}}};async function S(e){var t,r,i,s,o,a;let n=[];const l=[e.featuredItemsGroupQuery,e.basemapGalleryGroupQuery,e.templatesGroupQuery,e["2DStylesGroupQuery"],null!==(t=e.stylesGroupQuery)&&void 0!==t?t:null===(r=e.sourceJSON)||void 0===r?void 0:r.stylesGroupQuery,null!==(i=e.analysisLayersGroupQuery)&&void 0!==i?i:null===(s=e.sourceJSON)||void 0===s?void 0:s.analysisLayersGroupQuery,e.galleryTemplatesGroupQuery];if((0,d.j)(e)){const t=await(0,d.k)(e),r=(null===(o=null==t?void 0:t.content)||void 0===o?void 0:o.filter((e=>"gallery"===e.type&&!!e.groupId)))||[];r.length>0&&r.forEach((({groupId:e})=>{n=C(`id:${e}`,n)}))}else l.push(e.homePageFeaturedContent);l.forEach((e=>{n=C(e,n)})),e.featuredGroups.forEach((e=>{if(e.id){const t=`id:${e.id}`;n=C(t,n)}else{const t=`(${Object.entries(e).map((e=>`${e[0]}:"${e[1]}"`)).join(" ")})`;n=C(t,n,!0)}}));const c=await(0,d.l)(e);return null===(a=null==c?void 0:c.groups)||void 0===a||a.forEach((e=>{n=C(`id:${e}`,n)})),n.length>0?`(${n.join(" OR ")})`:""}function C(e,t,r){return 0!==(null==e?void 0:e.indexOf("id:"))&&!r||t.includes(e)?[...t]:[...t,e]}const F=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserFilter=(0,i.c)(this,"arcgisGroupBrowserFilter",7),this.hasIndoorsSpaces=!1,this.specialGroup=void 0,this.expanded=void 0,this.options=[]}async componentWillLoad(){this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.filterSpecialGroups,this.hasIndoorsSpaces=this.store.state.hasIndoorsSpaces,this.validateOptions(),(0,o.o)("portal",(()=>this.validateOptions()))}async validateOptions(){if(!o.c.portal)return this.options=[];const e=await S(o.c.portal);this.options=["openData","sharedUpdate","distributed","admin","settings"].filter((t=>!("openData"===t&&o.c.portal.isPortal||"distributed"===t&&this.hasIndoorsSpaces||"settings"===t&&!e)))}async componentDidLoad(){this.specialGroup&&this.arcgisGroupBrowserFilter.emit(await this.getEventDetail()),(0,p.a)("specialGroups",this.store,(()=>this.specialGroup=null))}async getQueryValue(){switch(this.specialGroup){case"openData":return"isopendata:true";case"sharedUpdate":return"capabilities:updateitemcontrol";case"distributed":return"capabilities:distributed";case"admin":return"isleavingdisallowed:true";case"settings":return await S(o.c.portal);default:return""}}async getEventDetail(){const{specialGroup:e}=this;return{id:"specialGroups",param:"q",value:await this.getQueryValue(),label:this.i18n.label.replace("${label}",this.i18n[e]),specialGroups:e}}render(){return(null===o.c||void 0===o.c?void 0:o.c.portal)?(0,i.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.specialGroup,filterID:"specialGroups",onArcgisBrowserFilterRemove:async()=>{this.specialGroup=null}},(0,i.h)("calcite-tree",{selectionMode:"single",scale:"m",onCalciteTreeSelect:async e=>{var t,r;const i=(null===(r=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0])||void 0===r?void 0:r.dataset.specialGroups)||"";this.specialGroup===i?this.specialGroup=null:this.specialGroup=i,this.arcgisGroupBrowserFilter.emit(await this.getEventDetail())}},this.options.map((e=>(0,i.h)("calcite-tree-item",{"data-special-groups":e,selected:e===this.specialGroup},(0,i.h)("a",null,this.i18n[e],"settings"===e&&(0,i.h)("arcgis-information",{style:{verticalAlign:"-.25rem","--arcgis-information-min-width":"0"},label:this.i18n.tooltipLabel,overlayPositioning:"fixed",placement:"bottom-end",paddedContent:!0},(0,i.h)("div",null,this.i18n.tooltip)))))))):null}get el(){return(0,i.d)(this)}},U=class{constructor(e){(0,i.r)(this,e)}async componentWillLoad(){this.store=(0,u.g)(this.el)}render(){return(0,i.h)("arcgis-browser-filters",{store:this.store},(0,i.h)("div",{slot:"top"},(0,i.h)("slot",{name:"top"})),(0,i.h)("slot",null),(0,i.h)("div",{slot:"bottom"},(0,i.h)("slot",{name:"bottom"})))}get el(){return(0,i.d)(this)}},$=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserPage=(0,i.c)(this,"arcgisGroupBrowserPage",7),this.total=void 0,this.start=void 0,this.num=60}async componentWillLoad(){this.store=(0,u.g)(this.el)}render(){const{start:e,total:t,num:r,store:s}=this;return(0,i.h)("arcgis-browser-pagination",{start:e,total:t,num:r,store:s,onArcgisBrowserPage:e=>this.arcgisGroupBrowserPage.emit(e.detail)})}get el(){return(0,i.d)(this)}};$.style=".wrapper{display:flex;justify-content:center;padding-left:0.5rem;padding-right:0.5rem;padding-top:2rem;padding-bottom:2rem}.hide{display:none}";const P=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserPreviewClose=(0,i.c)(this,"arcgisGroupBrowserPreviewClose",7),this.arcgisGroupBrowserInternalUIAction=(0,i.c)(this,"arcgisGroupBrowserInternalUIAction",7),this.group=void 0,this.portal=void 0,this.user=void 0,this.hidePreviewFooter=!1,this.showBadges=!0,this.currentResponse=void 0,this.fullGroup=void 0,this.userInfo=void 0,this.content=void 0,this.managers=void 0}async componentWillLoad(){this.store=(0,u.g)(this.el),this.lang=await(0,l.a)(this.el),this.i18n=this.store.state.i18n.preview,this.init()}updatePreview(){this.init()}async init(){var e,t,r;if(!this.group)return;const{group:i,portal:s,user:o}=this;this.isGroupOwner=i.owner===(null==o?void 0:o.username),this.fullGroup=null,this.fullGroup=await(0,n.m)((0,m.f)(i.id,this.portal),600),this.userInfo=await(0,w.f)(i.owner,s);const a=this.getTypeQuery(this.fullGroup);this.content=await((null===(t=null===(e=this.fullGroup.properties)||void 0===e?void 0:e.featuredItemIds)||void 0===t?void 0:t.length)&&this.fullGroup.properties.isFeatured?async function(e,t,r,i=4){const s=`${(0,d.g)(e)}content/groups/${t}/search`,o={num:i,start:0,q:`id:(${r.slice(0,i).join(" OR ")})`},a=await(0,d.r)(s,o);if(a.total){const e=r.map((e=>a.results.find((t=>t.id===e)))).filter(Boolean);a.results=e}return a}(s,i.id,this.fullGroup.properties.featuredItemIds):async function(e,t,r={}){const i=`${(0,d.g)(e)}content/groups/${t}/search`;return await(0,d.r)(i,Object.assign(Object.assign({},{num:4,start:0,sortField:"modified",sortOrder:"desc"}),r))}(s,i.id,Object.assign({sortField:this.fullGroup.sortField||"modified",sortOrder:this.fullGroup.sortOrder||"desc"},a?{q:a}:{}))),this.managers=await this.fetchGroupAdmins(s,i),null===(r=this.flowItem)||void 0===r||r.setFocus()}handleAccordionItemClick(e,t){this.arcgisGroupBrowserInternalUIAction.emit({action:e.expanded?"expand":"collapse",category:"group panel action",details:t})}closePreview(){this.fullGroup=null,this.arcgisGroupBrowserInternalUIAction.emit({action:"close panel",category:"group panel action"}),this.arcgisGroupBrowserPreviewClose.emit()}handleDetailsClick(e){this.arcgisGroupBrowserInternalUIAction.emit({action:"click",category:"group panel action",details:e})}renderHeader(){var e;return(0,i.h)("div",{slot:"header-content",class:"preview__header"},(0,i.h)("h3",{class:"preview__title"},null===(e=this.group)||void 0===e?void 0:e.title))}isAccordionItem(e){return"CALCITE-ACCORDION-ITEM"===e.tagName}getViewByText(e){switch(e.access){case"public":return this.i18n.everyone;case"private":return this.i18n.onlyMembers;case"org":return this.i18n.onlyOrganization;case"shared":return this.i18n.onlyOrganizationAndPartners}}getJoinByText(e){return e.autoJoin?this.i18n.byAutojoin:e.isInvitationOnly?this.i18n.byInvitation:e.providerGroupName?this.i18n.byEnterprise:this.i18n.byRequest}async fetchGroupAdmins(e,t){var r,i;const s=null!==(i=null===(r=await async function(e,t,r={}){const i=`${(0,d.g)(t)}community/groups/${e}/userlist`;return(0,d.r)(i,r)}(t.id,e,{memberType:"admin"}))||void 0===r?void 0:r.users)&&void 0!==i?i:[],o=s.find((e=>e.username===t.owner));return[o,...s.filter((e=>e.username!==o.username))]}getTypeQuery(e){var t;if(null===(t=e.displaySettings)||void 0===t?void 0:t.itemTypes)switch(e.displaySettings.itemTypes.split(",")[0].toLowerCase()){case"application":return m.i.applications.q;case"web map":return m.i.maps.q;case"web scene":return m.i.scenes.q;case"locator package":return m.i.tools.q;case"csv":return m.i.files.q;case"layer":return m.i.layers.q;default:return""}}render(){const{group:e,fullGroup:t,i18n:r,managers:s,portal:o,content:n,showBadges:l,user:c}=this;return(0,i.h)(i.H,null,(0,i.h)("calcite-flow",null,(0,i.h)("calcite-flow-item",{closable:!0,loading:!t,onCalciteFlowItemClose:()=>this.closePreview(),ref:e=>this.flowItem=e},this.renderHeader(),t&&(0,i.h)("div",{class:"content"},(0,i.h)("calcite-accordion",{"icon-position":"start",appearance:"transparent",key:e.id,class:"accordion"},(0,i.h)("calcite-accordion-item",{heading:r.overview,expanded:Boolean(t.snippet),ref:e=>{this.overviewElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.overviewElement,"overview")},(0,i.h)("div",{class:"section"},t.snippet?(0,i.h)("p",{class:"details-text"},t.snippet):(0,i.h)("p",{class:"details-text details-text--empty"},r.noSummary),l&&(0,i.h)("arcgis-group-badges",{group:t,portal:o,showTooltips:!1,width:"full",scale:"s",appearance:"outline-fill",class:"badges"}))),(0,i.h)("calcite-accordion-item",{heading:r.description,key:"description",ref:e=>{this.descriptionElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.descriptionElement,"description")},(0,i.h)("div",{class:"section"},t.description?(0,i.h)("div",{class:"description",innerHTML:(0,a.s)(t.description)}):(0,i.h)("p",{class:"details-text details-text--empty"},r.noDescription))),(0,i.h)("calcite-accordion-item",{heading:r.content.replace("${count}",n?`${n.total}`:"0"),expanded:!0,ref:e=>{this.contentElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.contentElement,"content")},(0,i.h)("div",{class:{section:!0,"section--tight":(null==n?void 0:n.total)>0}},(null==n?void 0:n.total)?(0,i.h)("div",{class:"full-card-wrapper"},n.results.map((e=>(0,i.h)("arcgis-group-browser-preview-card",{class:"content-card",item:e,portal:o,user:c,key:e.id}))),(0,i.h)("div",{class:"details-link block--padded"},(0,i.h)("calcite-link",{href:`${(0,v.g)(o)}/home/group.html?id=${e.id}&view=list#content`,onClick:()=>{this.handleDetailsClick("view all content")}},r.viewContent))):(0,i.h)("div",{class:"section--centered"},(0,i.h)("calcite-icon",{scale:"l",icon:"files",class:"icon-xl details-text--empty"}),(0,i.h)("p",{class:"details-text details-text--empty"},r.noContent)))),(0,i.h)("calcite-accordion-item",{heading:r.groupManagers.replace("${count}",s?`${s.length}`:"0"),expanded:!0,ref:e=>{this.managersElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.managersElement,"managers")},(0,i.h)("div",{class:"section section--tight"},(0,i.h)("div",{class:"full-card-wrapper"},null==s?void 0:s.map((t=>(0,i.h)("calcite-card",{key:t.username,class:"content-card"},(0,i.h)("arcgis-user-avatar",{heading:t.username===e.owner?r.groupOwner.replace("${fullName}",(0,w.g)(t,this.lang)):t.fullName,showName:!0,user:t,description:t.username,portal:o})))),(0,i.h)("div",{class:"details-link block--padded"},(0,i.h)("calcite-link",{href:`${(0,v.g)(o)}/home/group.html?id=${e.id}#members`,onClick:()=>{this.handleDetailsClick("open members page")}},r.openMembers))))),(0,i.h)("calcite-accordion-item",{heading:r.settings,expanded:this.isGroupOwner,ref:e=>{this.settingsElement=e},onClick:e=>this.isAccordionItem(e.target)&&this.handleAccordionItemClick(this.settingsElement,"settings")},(0,i.h)("div",{class:"section"},(0,i.h)("h4",{class:"details-title"},r.viewableBy,":"),(0,i.h)("p",{class:"settings-text"},this.getViewByText(t)),(0,i.h)("h4",{class:"details-title"},r.contributors,":"),(0,i.h)("p",{class:"settings-text"},t.isViewOnly?r.onlyOwnerManager:r.allMembers),this.isGroupOwner&&(0,i.h)(i.F,null,(0,i.h)("h4",{class:"details-title"},r.joinMethod,":"),(0,i.h)("p",{class:"settings-text"},this.getJoinByText(t)),(0,i.h)("div",{class:"details-link"},(0,i.h)("calcite-link",{href:`${(0,v.g)(o)}/home/group.html?id=${e.id}#settings`,onClick:()=>{this.handleDetailsClick("open settings")}},r.openSettings))))))),!this.hidePreviewFooter&&(0,i.h)("div",{slot:"footer",class:"footer-actions"},o&&e&&(0,i.h)("calcite-button",{onClick:()=>{var e;const{currentResponse:t,group:r}=this,i=(null===(e=null==t?void 0:t.results)||void 0===e?void 0:e.findIndex((e=>e.id===r.id)))+t.start;this.arcgisGroupBrowserInternalUIAction.emit({action:"view group details",category:"group panel action",position:i})},href:`${(0,v.g)(o)}/home/group.html?id=${e.id}`,kind:"neutral",appearance:"solid",width:"full"},r.viewDetails),(0,i.h)("slot",{name:"footer-action"})))))}get el(){return(0,i.d)(this)}static get watchers(){return{group:["updatePreview"]}}};P.style=":host{display:flex;height:100%;width:100%;flex:1 1 0%;flex-direction:column;background-color:var(--calcite-color-background)}.preview__header{margin-inline-start:0.75rem}.preview__title{margin:0px;overflow-wrap:break-word;padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1);line-height:1.375}.title{margin-top:0.75rem;margin-bottom:0.75rem;padding:0px;font-size:1.125rem;font-weight:500;color:var(--calcite-color-text-1);word-wrap:break-word;word-break:break-word}.badges{margin-top:1rem}.badges[empty]{display:none}calcite-accordion-item{--calcite-accordion-item-padding:1rem 1rem;--calcite-accordion-item-background:var(--calcite-color-foreground-1);width:100%;box-sizing:border-box;border-bottom:1px solid var(--calcite-color-border-2)}.section{background-color:var(--calcite-color-background);padding:1rem;margin:0rem -1rem calc(-1rem - 1px);line-height:1.35}.section--tight{padding-top:0px;padding-bottom:0px;padding-left:0px;padding-right:0px}.section--centered{display:flex;width:100%;flex-direction:column;align-items:center;row-gap:0.75rem}.full-card-wrapper{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.75rem}.details-title{margin-top:1rem;margin-bottom:0px;padding-bottom:0.25rem;padding-top:0px;font-size:0.75rem;font-weight:500;color:var(--calcite-color-text-3);--calcite-label-margin-bottom:0}.details-title:first-of-type{margin-top:0px}.details-title--label{padding-bottom:0px}.details-text{margin:0px;overflow-wrap:break-word;padding:0px;font-size:0.875rem;font-weight:400;color:var(--calcite-color-text-1)}.details-text a{color:var(--calcite-color-text-link)}.details--text-empty{font-weight:400;color:var(--calcite-color-text-3)}.details-link{margin-top:0.75rem}.description{overflow-wrap:break-word;line-height:1.35}.description *{font-size:0.875rem !important}.icon-xl{height:3rem;width:3rem}.content-card{margin-bottom:0.25rem}.content-thumbnail{margin-top:auto;margin-bottom:auto;width:100%;margin-inline-end:1rem}.settings-text{margin-top:-0.25rem;margin-bottom:-0.25rem;font-size:0.875rem;font-weight:400}.footer-actions{display:flex;width:100%;flex-direction:column;row-gap:0.5rem;padding:1rem}.block--padded{padding-bottom:1rem;padding-inline-start:0.25rem}";const E=class{constructor(e){var t;(0,i.r)(this,e),this.arcgisGroupBrowserInternalUIAction=(0,i.c)(this,"arcgisGroupBrowserInternalUIAction",7),this.arcgisGroupBrowserPreviewCardSelect=(0,i.c)(this,"arcgisGroupBrowserPreviewCardSelect",7),this.handleCardClick=()=>{this.link||this.arcgisGroupBrowserPreviewCardSelect.emit(this.item)},this.item=void 0,this.portal=void 0,this.user=void 0,this.api=4,this.baseUrl=null===(t=null===o.c||void 0===o.c?void 0:o.c.config)||void 0===t?void 0:t.baseUrl,this.link=void 0,this.newTab=void 0,this.showThumbnail=!0,this.showOwner=!0,this.showItemType=!0,this.showDateUpdated=!1,this.showSummary=!1,this.showBadges=!1,this.showOwnerPopup=!1,this.interactive=!1,this.hover=void 0,this.updatedText="",this.loaded=void 0}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():this.sectionEl&&this.sectionEl.focus()}async componentWillLoad(){var e,t,r;this.updatedText=(0,f.a)(this.item.modified),this.portal=null!==(e=this.portal)&&void 0!==e?e:o.c.portal,this.user=null!==(t=this.user)&&void 0!==t?t:o.c.user,this.api=null!==(r=this.api)&&void 0!==r?r:o.c.api}async componentDidLoad(){await(0,n.t)(100),this.loaded=!0}render(){var e,t;const{item:r,user:s,portal:a,api:n,loaded:l,showDateUpdated:c,showItemType:d,showOwner:h,showOwnerPopup:u,showBadges:p,showSummary:g,showThumbnail:m,interactive:v,link:w,newTab:f}=this,b=null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=o.c.config)||void 0===t?void 0:t.baseUrl,y=this.link?"a":"div",x=Object.assign({href:w},f?{target:"_blank",rel:"noopener noreferrer"}:{});return(0,i.h)(i.H,null,(0,i.h)("section",Object.assign({class:{card:!0,"card--hoverable":v,"card--loaded":l}},v?{onMouseOver:()=>this.hover=!0}:{},v?{onMouseOut:()=>this.hover=!1}:{},w?{}:{onClick:this.handleCardClick},{ref:e=>this.sectionEl=e}),(0,i.h)("slot",{name:"content-top"}),(0,i.h)(y,Object.assign({class:{card__upper:!0,"card__upper--link":!!w}},w?x:{},{ref:e=>this.linkEl=e}),(0,i.h)("div",{class:"card-flex card__top"},(0,i.h)("div",{class:"card-flex-1"},(0,i.h)("div",{class:"card-flex"},(0,i.h)("div",{class:"card__content"},(0,i.h)("h3",{class:{card__title:!0,"card__title--padded":d||g&&!!r.snippet}},(0,i.h)("span",{class:"card__title__span"},r.title)),g&&r.snippet&&(0,i.h)("p",{class:"card__summary"},r.snippet.length>250?`${r.snippet.substring(0,250)}…`:r.snippet),d&&(0,i.h)("arcgis-item-type",{scale:"s",item:r,portal:a}),(0,i.h)("div",{class:"card__details"},c&&(0,i.h)("span",{class:{card__detail:!0,card__divider:!0}},this.updatedText),p&&(0,i.h)("arcgis-item-badges",{item:r,user:s,portal:a,width:"narrow",showTooltips:!0,class:{card__badges:!0,card__divider:!0},scale:"s"}))),m&&(0,i.h)("figure",{class:"card__thumbnail"},(0,i.h)("arcgis-item-browser-card-thumbnail",{item:r,user:s,portal:a})))))),(0,i.h)("div",{class:"card__footer",onClick:e=>{e.stopPropagation()},onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||e.stopPropagation()}},(0,i.h)("div",{class:{card__footer__start:!0,"card__footer__start--owner":h}},h&&(0,i.h)("div",{class:"card__profile-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},u?(0,i.h)("arcgis-user-popup",{underline:!0,username:r.owner,api:n,portal:a,baseUrl:b,showAvatar:!1,class:"card__owner",scale:"s",onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisGroupBrowserInternalUIAction.emit(e.detail)}}):(0,i.h)("arcgis-user-avatar",{slot:"footer-start",scale:"s",showName:!0,showAvatar:!1,username:r.owner,portal:a}))),(0,i.h)("slot",{name:"actions-end"}))))}get el(){return(0,i.d)(this)}};E.style=':host{display:block;min-width:0px}.card{position:relative;box-sizing:border-box;display:flex;height:100%;width:100%;flex-direction:column;color:var(--calcite-color-text-1);opacity:0;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-duration:150ms;outline-color:transparent;background-color:var(--calcite-color-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-color-border-3)}.card:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.card--loaded{opacity:1}.card--selected{border-color:var(--calcite-color-brand)}.card--hoverable{cursor:pointer}.card__top{padding:0.75rem}.card__upper{flex:1 1 0%;background-color:var(--calcite-color-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.card--hoverable .card__upper:hover{background-color:var(--calcite-color-background)}.card__upper--link{color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent}.card__upper--link:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:2px}.card__content{display:flex;min-width:0px;flex:1 1 0%;flex-direction:column}.card__details{margin-top:0.25rem;display:flex;flex-direction:row}.card__detail{font-size:0.75rem;color:var(--calcite-color-text-2)}.card__footer{margin-top:auto;display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;border-top:1px solid var(--calcite-color-border-2)}.card__footer__start{display:flex;min-width:0px;flex:1 1 0%;flex-direction:row;align-items:center;overflow:hidden;margin-inline-end:0.75rem}.card__footer__start--owner{margin-inline-start:-0.25rem}.card__profile-wrap{box-sizing:border-box;max-width:100%;padding:0.25rem}.card__summary{margin:0px;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-2)}.card__divider{display:flex;align-items:center;flex:0 0 auto}.card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-color-border-1);margin-inline:0.75rem}.card__divider:first-child:before{display:none}.card-flex{display:flex}.card-flex-1{min-width:0px;flex:1 1 0%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.card__title{margin-top:0px;margin-bottom:0px;height:2rem;overflow:hidden;overflow-wrap:break-word;padding-top:0px;padding-bottom:0px;font-size:0.875rem;font-weight:500;line-height:1.15;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.card__title--padded{margin-bottom:0.5rem}.card__snippet{margin:0px;margin-bottom:0.75rem;flex:1 1 0%;padding:0px;font-size:0.875rem}.card__badges--stacked{margin-top:0.5rem}.card__thumbnail{margin:0px;box-sizing:content-box;width:4rem;padding:0px;padding-inline-start:0.5rem}.card__owner{min-width:0px}';const T=class{constructor(e){(0,i.r)(this,e),this.arcgisGroupBrowserSearch=(0,i.c)(this,"arcgisGroupBrowserSearch",7),this.arcgisGroupBrowserSearchInput=(0,i.c)(this,"arcgisGroupBrowserSearchInput",7),this.term=void 0,this.placeholder=void 0,this.showClear=!1}async componentWillLoad(){this.store=(0,u.g)(this.el),this.i18n=this.store.state.i18n.search}render(){const{term:e,placeholder:t}=this;return(0,i.h)(i.H,null,(0,i.h)("arcgis-browser-search",{term:e,placeholder:t||this.i18n.label,onArcgisBrowserSearch:e=>this.arcgisGroupBrowserSearch.emit(e.detail),onArcgisBrowserSearchInput:e=>this.arcgisGroupBrowserSearchInput.emit(e.detail)}))}get el(){return(0,i.d)(this)}};T.style=":host{position:relative;display:block}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-1);inset-inline-start:1.5rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;border-style:none;padding-top:1rem;padding-bottom:1rem;padding-left:3rem;padding-right:3rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;background-color:transparent;border-bottom:2px solid transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid transparent;outline-offset:2px;border-bottom-color:var(--calcite-color-brand)}";const A=class{constructor(e){var t;(0,i.r)(this,e),this.arcgisGroupBrowserSort=(0,i.c)(this,"arcgisGroupBrowserSort",7),this.options=["title","relevance","modified"],this.field=(null===(t=this.options)||void 0===t?void 0:t[0])||"relevance",this.order=void 0,this.activeField=void 0,this.activeOrder=void 0}async componentWillLoad(){this.store=(0,u.g)(this.el),this.activeField=this.field}componentDidLoad(){this.arcgisGroupBrowserSort.emit({sortField:this.field,sortOrder:this.order||(0,b.a)(this.field)})}updateSortField(e){this.activeField=e,this.activeOrder=(0,b.a)(e),this.arcgisGroupBrowserSort.emit({sortField:this.activeField,sortOrder:this.activeOrder})}updateSortOrder(e){this.activeOrder=e,this.arcgisGroupBrowserSort.emit({sortField:this.activeField,sortOrder:this.activeOrder})}render(){const{activeField:e,activeOrder:t,field:r,order:s,options:o}=this,a=e||(o.includes(r)?r:o[0]),n=t||s;return(0,i.h)(i.H,null,(0,i.h)("arcgis-browser-sort",{store:this.store,field:a,order:n,options:o,onArcgisBrowserSortFieldChange:e=>this.updateSortField(e.detail),onArcgisBrowserSortOrderChange:e=>this.updateSortOrder(e.detail)}))}get el(){return(0,i.d)(this)}},L=class{constructor(e){(0,i.r)(this,e)}async componentWillLoad(){this.store=(0,u.g)(this.el)}render(){return(0,i.h)(i.H,null,(0,i.h)("arcgis-browser-top-bar",{store:this.store},(0,i.h)("div",{slot:"content-start"},(0,i.h)("slot",{name:"content-start"})),(0,i.h)("div",{slot:"search"},(0,i.h)("slot",{name:"search"})),(0,i.h)("div",{slot:"content-end"},(0,i.h)("slot",{name:"content-end"}))))}get el(){return(0,i.d)(this)}}},74689:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>o,c:()=>l,d:()=>d,g:()=>h,i:()=>n,u:()=>c});var i=r(79210);function s(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function o(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function a(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function n(e,t){return e.owner===t.username}function l(e,t){return c(e,t)||"update"===e.itemControl}function c(e,t){return n(e,t)||function(e,t){var r;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,s="admin"===e.itemControl;return!((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!n(e,t)&&s&&i.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(i))&&s}(e,t)}const d=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),h=(e,t)=>`${(0,i.a)(t)}item.html?id=${e}`},77825:(e,t,r)=>{function i(e){const{customBaseUrl:t,portalHostname:r,urlKey:i}=e,{protocol:s}=window.location;return`${s}//${i?`${i}.${t}`:r}`}r.d(t,{g:()=>i})},12046:(e,t,r)=>{r.d(t,{a:()=>o,b:()=>l,c:()=>a,d:()=>d,e:()=>u,f:()=>h,g:()=>b,h:()=>c,i:()=>n,j:()=>p,k:()=>g,l:()=>f,m:()=>v,n:()=>m,o:()=>w,p:()=>x,q:()=>y});var i=r(74689);const s=e=>{var t,r,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function o(e){return e&&!e.orgId}function a(e){return!e.isPortal||!!e.isBackedBySDS}function n(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function l(e){return"org_admin"===s(e)||"account_admin"===s(e)}function c(e){return"org_user"===s(e)||"account_user"===s(e)}function d(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function h(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function u(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function p(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function g(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function m(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function v(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function b(e,t,r,i){const s=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),o=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!l(t)&&!o||!(null==r?void 0:r.isPortal)&&!s)}function y(e){return!!e&&(!d(e)||d(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const x=({items:e,user:t,portal:r})=>{const s=e[0],o=s.owner;if(r.isPortal&&o!==t.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const a=(0,i.u)(s,t),n=d(t),l=_(t),c=(0,i.c)(s,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!n&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||p(e)||g(e)||!!t.canSharePublic&&m(e)}(t,r)||_(t));return a||c||(0,i.d)(e,t)&&l};function _(e){return f(e)||v(e)||w(e)}},79759:(e,t,r)=>{r.d(t,{H:()=>i});const i='-type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage" -type:"Indoors Map Configuration" -typekeywords:"SMX"'},69240:(e,t,r)=>{r.d(t,{a:()=>a,g:()=>o});var i=r(70464),s=r(10157);function o(e){return(0,s.g)(e,"arcgis-group-browser")}const a=(0,i.c)({filters:{}}).state},49288:(e,t,r)=>{r.d(t,{c:()=>s});var i=r(42577);function s(e=""){return(0,i.s)(e).replace(/[<>\/\\[\]\?]/g,"\\$&").trim()}},47415:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>a,c:()=>h,d:()=>c,e:()=>d,f:()=>n,g:()=>u});var i=r(20164),s=r(79759),o=r(42577);async function a(e,t,r,s){var a,n,l;const c=null!==(l=null!==(a=e.orgId)&&void 0!==a?a:null===(n=e.portal)||void 0===n?void 0:n.id)&&void 0!==l?l:null==r?void 0:r.id;return(0,i.f)((()=>async function(e,t,r,s,a){var n,l;const c=(null===(n=e.portal)||void 0===n?void 0:n.portalHostname)||(null==s?void 0:s.portalHostname)||(null===(l=null==s?void 0:s.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),d=a?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!a)return null;const h=a?{disableIdentityLookup:!0,addTokenManually:!1}:{},u=await(0,i.r)(d,{},h),{urlKey:p,thumbnail:g,customBaseUrl:m}=u,v=`https://${p}.${m}/`,w=g?`${v}sharing/rest/portals/self/resources/${g}`:null;let f,b;try{const e=await(0,i.r)(`${d}/resources/localizedOrgProperties`,{start:1,num:100},h);if(e){const t=e[r]||e.default;f=t.name,b=t.description||e.description}}catch(e){}return{name:f||u.name,description:(0,o.a)(b||u.description),url:`${v}home/`,thumbnail:w}}(e,c,t,r,s)),"verified",c)}async function n(e,t,r){const s=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),o=`${null!=s?s:(0,i.g)(t)}community/users/${e}`,a=(null==o?void 0:o.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>{try{return await(0,i.r)(o,{},a)}catch(t){return{username:e}}}),"user",o)}async function l(e,t,r,i){var s,l;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(s=e.sourceJSON)||void 0===s?void 0:s.contentStatus)){const s=await a(e,r,t,i);if(!s)return n(e.owner,t,i);const{description:c,name:d,thumbnail:h,url:u}=s;return{description:c?(0,o.s)(c):"",fullName:d,username:e.owner,thumbnail:h,id:e.orgId||(null===(l=e.portal)||void 0===l?void 0:l.id),url:u}}return n(e.owner,t,i)}async function c(e,t,r){const s=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),o=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>(0,i.r)(`${s}community/groups`,{q:`(owner:"${e}")`,num:100},o)),"userGroups",e)}async function d(e,t,r){const{username:o}=e,a=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),n=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)((async()=>(await(0,i.r)(`${a}search`,{q:`(owner:"${o}") ${s.H}`,num:1},n)).total),"userItemsTotal",o)}function h(e,t,r=!1){if(e.thumbnailUrl)return e.thumbnailUrl;if(!e.thumbnail)return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const s=(0,i.e)(t);return`${(0,i.g)(t)}community/users/${e.username}/info/${e.thumbnail}${s&&!r?`?token=${s}`:""}`}function u(e,t){const{fullName:r,firstName:i,lastName:s,username:o}=e;return r||(i&&s?"ja"===t?`${s} ${i}`:`${i} ${s}`:o)}}}]);