/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f670f8.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-f670f8"],{65661:(e,t,i)=>{i.r(t),i.d(t,{arcgis_config_image_item_card_results_modal:()=>r});var n=i(81149),s=i(82218),a=i(59224);i(42577),i(51837),i(69283);const r=class{constructor(e){(0,n.r)(this,e),this.arcgisConfigImageItemCardResultsModalClosed=(0,n.c)(this,"arcgisConfigImageItemCardResultsModalClosed",7),this.arcgisConfigImageItemCardResultsModalSave=(0,n.c)(this,"arcgisConfigImageItemCardResultsModalSave",7),this.handleModalClosed=()=>{this.arcgisConfigImageItemCardResultsModalClosed.emit()},this.handleModalSaveAndClosed=()=>{const{selectedFieldNames:e,isShowThumbnailsChecked:t}=this;this.arcgisConfigImageItemCardResultsModalSave.emit({selectedFieldNames:e,isShowingThumbnails:t}),this.arcgisConfigImageItemCardResultsModalClosed.emit()},this.handleSelectedFieldChange=(e,t)=>{const{selectedFieldNames:i}=this,n=t?[...i,e]:i.filter((t=>t!==e));this.selectedFieldNames=n},this.open=void 0,this.fields=void 0,this.preSelectedFieldNames=void 0,this.isShowingThumbnails=void 0,this.selectedFieldNames=[],this.isShowThumbnailsChecked=void 0}async componentWillLoad(){[this.strings]=await(0,s.g)(this.hostElement,"arcgis-image-collection-explorer")}updateModal(e){e&&(Array.isArray(this.preSelectedFieldNames)&&(this.selectedFieldNames=this.preSelectedFieldNames),this.isShowThumbnailsChecked=this.isShowingThumbnails)}render(){const{strings:e,open:t,isShowThumbnailsChecked:i}=this;return(0,n.h)("calcite-modal",{open:t,scale:"s",widthScale:"m",onCalciteModalClose:this.handleModalClosed},(0,n.h)("h3",{slot:"header",class:"trailer-0 font-size-1"},e.configureResults),(0,n.h)("div",{slot:"content"},(0,n.h)("div",null,e.selectFieldsForResultCards),this.renderFieldList(),(0,n.h)("calcite-label",{layout:"inline"},(0,n.h)("calcite-checkbox",{checked:i,onCalciteCheckboxChange:e=>{e.stopPropagation();const t=e.currentTarget.checked;this.isShowThumbnailsChecked=t}})," ",e.showThumbnails),(0,n.h)("div",{class:"button-wrapper"},(0,n.h)("calcite-button",{appearance:"outline-fill",width:"half",onClick:this.handleModalSaveAndClosed},e.done))))}renderFieldList(){const{fields:e,selectedFieldNames:t}=this,i=(0,a.h)(e).map((e=>{const i=t.includes(e.name);return(0,n.h)("li",null,(0,n.h)("calcite-checkbox",{checked:i,onCalciteCheckboxChange:i=>{i.stopPropagation();const n=i.currentTarget.checked;n&&4===t.length?i.currentTarget.checked=!1:this.handleSelectedFieldChange(e.name,n)}})," ",e.name)}));return(0,n.h)("ul",{class:"field-list"},i)}get hostElement(){return(0,n.d)(this)}static get watchers(){return{open:["updateModal"]}}};r.style=".field-list{list-style-type:none;padding:0;margin:var(--arcgis-app-cap-spacing) 0;border:solid 1px var(--arcgis-app-border)}.field-list li{display:flex;align-items:center;gap:5px;padding:0 5px}.field-list li:nth-child(odd){background:var(--calcite-color-foreground-1)}.field-list li:nth-child(even){background:var(--calcite-color-foreground-2)}.button-wrapper{padding-top:var(--arcgis-app-cap-spacing);text-align:center}"},36238:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>h,c:()=>s,d:()=>n,e:()=>a,f:()=>d,g:()=>m,i:()=>r,m:()=>l,t:()=>o,u:()=>u});const n=(e,t)=>{let i,n="idle";const s=(...s)=>new Promise((a=>{switch(n){case"flushed":n="idle",i?(clearTimeout(i),a(e(...s))):a(null);break;case"invoked":clearTimeout(i),n="idle",a(e(...s));break;case"cancelled":clearTimeout(i),n="idle",a(null);break;default:i&&clearTimeout(i),n="pending",i=setTimeout((()=>(n="idle",a(e(...s)))),t)}}));return s.flush=function(...e){return n="flushed",s(...e)},s.invoke=function(...e){return n="invoked",s(...e)},s.cancel=function(...e){return n="cancelled",s(...e)},s.getStatus=function(){return n},s},s=(e,t)=>{let i;return(...n)=>new Promise((s=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,s(e(...n))}),t))}))};function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){return null!=e}async function l(e,t){return await Promise.all([e,o(t)]),e}function o(e){return new Promise((t=>setTimeout(t,e)))}const c=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:n}=t(e);return[i,n]}))),d=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function u(e,t){const i=[],n={};return e.forEach((e=>{const s=t(e);null==n[s]&&(n[s]=e,i.push(e))})),i}function h(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const m=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,n)=>e.slice(t*n,t+t*n)))},59224:(e,t,i)=>{i.d(t,{A:()=>s,N:()=>n,a:()=>h,b:()=>y,c:()=>m,d:()=>f,e:()=>w,f:()=>b,g:()=>v,h:()=>p,i:()=>l,j:()=>u,k:()=>o,l:()=>c,m:()=>g});var n,s,a=i(69283),r=i(36238);function l(e){return"AbortError"===(null==e?void 0:e.name)}function o(e){return["small-integer","big-integer","integer","single","double","oid"].includes(e)}function c(e){const t=new Date(e);return`${t.getFullYear()}-${d((t.getMonth()+1).toString(),2,"0")}-${d(t.getDate().toString(),2,"0")} ${d(t.getHours().toString(),2,"0")}:${d(t.getMinutes().toString(),2,"0")}:${d(t.getSeconds().toString(),2,"0")}`}function d(e,t,i){for(i=i||" ";e.length<t;)e=i+e;return e}function u(e){const t=e.find((e=>"best"===e.name.toLowerCase()));if(t)return t;const i=e.find((e=>"acquisitiondate"===e.name.toLowerCase()));if(i)return i;const n=e.find((e=>"date"===e.name.toLowerCase()));return n||e.find((e=>"double"===e.type||"integer"===e.type))}async function h(e,t){let i;try{i=await e.queryRasterCount(t)}catch(e){console.log(e)}return Number.isInteger(i)?i:null}async function m(e,t){t.outFields=["*"],t.returnGeometry=!0;const i=await e.queryRasters(t);return Array.isArray(null==i?void 0:i.features)?i:null}async function g(e,t){var i;const n=e.createQuery();let s;n.where=`${e.objectIdField} = ${t}`,n.returnGeometry=!0;try{s=await e.queryRasters(n)}catch(e){console.log(e)}return(null===(i=null==s?void 0:s.features)||void 0===i?void 0:i[0].geometry)||null}function f(e,t){const i=e.fields,n=e.objectIdField;let s=i.find((e=>"name"===e.name.toLowerCase()));return s||(s=i.find((e=>e.name===n))),s&&s.name!==t.name?[s,t]:[t]}function p(e){const t=["small-integer","big-integer","integer","single","double","date","oid","string"];return Array.isArray(e)?e.filter((e=>t.includes(e.type))):[]}function y(e,t,i,n,a,r){const l=e.createQuery();if((null==i?void 0:i.length)>0){let e="";if("date"===t.type){if(1===i.length){const n=new Date(i[0]),s=n.setSeconds(n.getSeconds()+1);e=e=`${t.name} BETWEEN timestamp '${c(i[0])}' AND timestamp '${c(s)}'`}2===i.length&&(e=`${t.name} BETWEEN timestamp '${c(i[0])}' AND timestamp '${c(i[1])}'`)}else 1===i.length&&(e="string"==typeof i[0]?`${t.name}='${i[0]}'`:`${t.name}=${i[0]}`),2===i.length&&(e="string"==typeof i[0]?`${t.name} BETWEEN '${i[0]}' AND '${i[1]}'`:`${t.name} BETWEEN ${i[0]} AND ${i[1]}`);l.where=e}const o="(Category <> 2)";if(a)l.where=l.where.replace(o,"");else{const e=o+(l.where?" AND "+l.where:"");l.where=e}return l.geometry=n===s.DisplayExtent?r:null,l.spatialRelationship=n===s.DisplayExtent?"intersects":null,l}async function b(e,t,i,n,a,l=!1){var o,c;if(!t)return[];const d=e.createQuery();d.where="1=1";const u=i===s.DisplayExtent||i===s.Visible;d.geometry=u?n:null,d.spatialRelationship=u?"intersects":null,d.outFields=[t],d.orderByFields=[`${t} ASC`],d.returnExceededLimitFeatures=!0,d.returnGeometry=!1;const h=[];if(l){let i=!0;for(;i;){const n=await e.queryRasters(d,{signal:a});if(i=null==n?void 0:n.exceededTransferLimit,(null===(o=n.features)||void 0===o?void 0:o.length)>0){const e=(0,r.b)(n.features.map((e=>e.attributes[t])));h.push(...e)}}return h}const m=await e.queryRasters(d,{signal:a});return(null===(c=null==m?void 0:m.features)||void 0===c?void 0:c.length)>0?(0,r.b)(m.features.map((e=>e.attributes[t]))):[]}async function w(e,t,i,n,a){var r;if(!t)return[];const l=e.createQuery();l.where="1=1";const o=i===s.DisplayExtent||i===s.Visible;l.geometry=o?n:null,l.spatialRelationship=o?"intersects":null,l.returnGeometry=!1,l.outStatistics=[{statisticType:"min",onStatisticField:t,outStatisticFieldName:"MIN_FIELD_VALUE"},{statisticType:"max",onStatisticField:t,outStatisticFieldName:"MAX_FIELD_VALUE"}];const c=await e.queryRasters(l,{signal:a});if((null===(r=null==c?void 0:c.features)||void 0===r?void 0:r.length)>0){const[e]=c.features;return[e.attributes.MIN_FIELD_VALUE,e.attributes.MAX_FIELD_VALUE]}return[]}async function v(e,t,i){var n;let s=[];const r=await async function(e,t){const[i,n,s]=await(0,a.l)(["esri/geometry/Polygon","esri/geometry/Point","esri/rest/support/ImageIdentifyParameters"]),{extent:r,width:l,height:o}=t,c=new i(r.spatialReference);c.addRing([[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]);const d=new n((r.xmax-r.xmin)/l,(r.ymax-r.ymin)/o,r.spatialReference),u=new s;u.geometry=c,u.returnGeometry=!1,u.pixelSize=d;const h=e.mosaicRule.clone();return e.definitionExpression&&(h.where=e.definitionExpression),u.mosaicRule=h,u}(e,t);if(e.visible){const t=await e.identify(r);if(!(null===(n=null==t?void 0:t.catalogItems)||void 0===n?void 0:n.features)||!(null==t?void 0:t.catalogItemVisibilities))return null;const a=e.objectIdField;for(let e=0;e<t.catalogItems.features.length;e++)t.catalogItemVisibilities[e]>0&&s.push(t.catalogItems.features[e].attributes[a]);if(0===s.length)return null;const l=`${e.objectIdField} in (${s.map((e=>`${e}`)).join(",")})`;i.where=`${i.where} AND ${l}`,i.outFields=["*"],i.returnGeometry=!0;const o=await e.queryRasters(i);return Array.isArray(null==o?void 0:o.features)?o:null}}!function(e){e.Inspect="inspect",e.Select="select"}(n||(n={})),function(e){e.Visible="visible",e.DisplayExtent="displayExtent",e.All="all"}(s||(s={}))}}]);