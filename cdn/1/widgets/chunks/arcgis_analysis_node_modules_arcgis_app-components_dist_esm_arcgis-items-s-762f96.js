"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-items-s-762f96"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-items-summary_3.entry.js":
/*!*************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-items-summary_3.entry.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_items_summary: () => (/* binding */ ArcgisItemsSummary),
/* harmony export */   arcgis_items_summary_bucket: () => (/* binding */ ArcgisItemsSummaryBucket),
/* harmony export */   arcgis_items_summary_popover: () => (/* binding */ ArcgisItemsSummaryPopover)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const arcgisItemsSummaryCss = ".summary-container{display:flex}.summary-icon{padding-inline-end:0.5rem}.disabled{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:none;opacity:var(--calcite-opacity-disabled)}::slotted([slot=title]){font-weight:500}::slotted([slot=actions]){margin-top:0.75rem}";

const ArcgisItemsSummary = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.icon = undefined;
        this.disabled = false;
    }
    render() {
        const { icon, disabled } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "summary-container" }, !!icon && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { class: {
                "summary-icon": true,
                disabled
            }, scale: "l", icon: icon })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "summary-content" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: `${this.disabled && "disabled"}` }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "title" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "description" }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "link" })), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "actions" }))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemsSummary.style = arcgisItemsSummaryCss;

const arcgisItemsSummaryBucketCss = ":host{padding-inline-start:0.5rem}";

const ArcgisItemsSummaryBucket = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.arcgisDeleteItemsSummaryItemClick = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "arcgisDeleteItemsSummaryItemClick", 7);
        this.renderSingleItemLink = () => {
            const { item } = this.singleItem;
            return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { onClick: () => {
                    /** TODO: Fire an event, or link to item details? Not all consumers may want to launch item details */
                } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-type", { showText: false, item: item }), " ", item.title));
        };
        this.popoverId = undefined;
        this.label = undefined;
        this.summaryGroups = undefined;
    }
    async componentWillLoad() {
        var _a;
        this.singleItem =
            (_a = (this.summaryGroups.length === 1 &&
                this.summaryGroups[0].items.length === 1 &&
                this.summaryGroups[0].items[0])) !== null && _a !== void 0 ? _a : null;
    }
    render() {
        const { popoverId, label } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.singleItem ? (this.renderSingleItemLink()) : ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-items-summary-popover", { label: label, popoverId: popoverId, summaryGroups: this.summaryGroups }))));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemsSummaryBucket.style = arcgisItemsSummaryBucketCss;

const arcgisItemsSummaryPopoverCss = ".popover{max-height:250px;width:300px;max-width:100%;overflow:auto}.popover__item-type{padding-inline-start:1rem}";

const ArcgisItemsSummaryPopover = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.mapSummaryGroupsToList = () => {
            const renderList = (group) => ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list", null, group.items.map((bucketItem) => {
                const { item } = bucketItem;
                const id = item.id;
                return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list-item", { label: item.title, value: item.title, key: id, onCalciteListItemSelect: () => {
                        /** TODO: Fire an event, or link to item details? Not all consumers may want to launch item details */
                    } }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-item-type", { slot: "content-start", showText: false, item: item, class: "popover__item-type" })));
            })));
            const groups = this.summaryGroups.map((group) => {
                return group.heading ? ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-list-item-group", { heading: group.heading }, renderList(group))) : (renderList(group));
            });
            return groups;
        };
        this.popoverId = undefined;
        this.label = undefined;
        this.summaryGroups = undefined;
        this.disableLinks = undefined;
        this.totalItems = undefined;
    }
    async componentWillLoad() {
        this.totalItems = this.summaryGroups.reduce((total, summary) => total + summary.items.length, 0);
    }
    render() {
        const { popoverId, label, totalItems, mapSummaryGroupsToList } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-link", { id: popoverId }, totalItems), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-popover", { class: "popover", label: label, referenceElement: popoverId, placement: "bottom", overlayPositioning: "fixed", autoClose: true }, mapSummaryGroupsToList())));
    }
    get el() { return (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.d)(this); }
};
ArcgisItemsSummaryPopover.style = arcgisItemsSummaryPopoverCss;



//# sourceMappingURL=arcgis-items-summary_3.entry.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLWl0ZW1zLXMtNzYyZjk2LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUM2Rzs7QUFFN0csa0RBQWtELGFBQWEsY0FBYywwQkFBMEIsVUFBVSxlQUFlLHlCQUF5QixzQkFBc0IsaUJBQWlCLG9CQUFvQix3Q0FBd0Msd0JBQXdCLGdCQUFnQiwwQkFBMEIsbUJBQW1COztBQUVqVjtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUJBQWlCO0FBQ2pDLGdCQUFnQixxREFBQyxVQUFVLDRCQUE0QixhQUFhLHFEQUFDLG1CQUFtQjtBQUN4RjtBQUNBO0FBQ0EsYUFBYSwwQkFBMEIsSUFBSSxxREFBQyxVQUFVLDBCQUEwQixFQUFFLHFEQUFDLFVBQVUsVUFBVSw0QkFBNEIsR0FBRyxFQUFFLHFEQUFDLFdBQVcsZUFBZSxHQUFHLHFEQUFDLFdBQVcscUJBQXFCLEdBQUcscURBQUMsV0FBVyxjQUFjLElBQUkscURBQUMsV0FBVyxpQkFBaUI7QUFDclE7QUFDQSxlQUFlLE9BQU8scURBQVU7QUFDaEM7QUFDQTs7QUFFQSwyQ0FBMkMsNEJBQTRCOztBQUV2RTtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsaURBQWlELHFEQUFXO0FBQzVEO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0Isb0JBQW9CLHFEQUFDLG1CQUFtQjtBQUN4QztBQUNBLG1CQUFtQixFQUFFLHFEQUFDLHVCQUF1Qiw2QkFBNkI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUJBQW1CO0FBQ25DLGdCQUFnQixxREFBQyxDQUFDLGlEQUFJLDJEQUEyRCxxREFBQyxtQ0FBbUMsdUVBQXVFO0FBQzVMO0FBQ0EsZUFBZSxPQUFPLHFEQUFVO0FBQ2hDO0FBQ0E7O0FBRUEsK0NBQStDLGlCQUFpQixZQUFZLGVBQWUsY0FBYyxvQkFBb0IsMEJBQTBCOztBQUV2SjtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEI7QUFDQSwyQ0FBMkMscURBQUM7QUFDNUMsd0JBQXdCLE9BQU87QUFDL0I7QUFDQSx3QkFBd0IscURBQUMsd0JBQXdCO0FBQ2pEO0FBQ0EsdUJBQXVCLEVBQUUscURBQUMsdUJBQXVCLGlGQUFpRjtBQUNsSSxhQUFhO0FBQ2I7QUFDQSx3Q0FBd0MscURBQUMsOEJBQThCLHdCQUF3QjtBQUMvRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVEQUF1RDtBQUN2RSxnQkFBZ0IscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLG1CQUFtQixlQUFlLGVBQWUscURBQUMsc0JBQXNCLGdJQUFnSTtBQUN2TztBQUNBLGVBQWUsT0FBTyxxREFBVTtBQUNoQztBQUNBOztBQUUwSzs7QUFFMUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcHAtY29tcG9uZW50cy9kaXN0L2VzbS9hcmNnaXMtaXRlbXMtc3VtbWFyeV8zLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIHY0LjAuNThcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBoLCBkIGFzIGdldEVsZW1lbnQsIGMgYXMgY3JlYXRlRXZlbnQsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuXG5jb25zdCBhcmNnaXNJdGVtc1N1bW1hcnlDc3MgPSBcIi5zdW1tYXJ5LWNvbnRhaW5lcntkaXNwbGF5OmZsZXh9LnN1bW1hcnktaWNvbntwYWRkaW5nLWlubGluZS1lbmQ6MC41cmVtfS5kaXNhYmxlZHtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7cG9pbnRlci1ldmVudHM6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtb3BhY2l0eS1kaXNhYmxlZCl9OjpzbG90dGVkKFtzbG90PXRpdGxlXSl7Zm9udC13ZWlnaHQ6NTAwfTo6c2xvdHRlZChbc2xvdD1hY3Rpb25zXSl7bWFyZ2luLXRvcDowLjc1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNJdGVtc1N1bW1hcnkgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLmljb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGljb24sIGRpc2FibGVkIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogXCJzdW1tYXJ5LWNvbnRhaW5lclwiIH0sICEhaWNvbiAmJiAoaChcImNhbGNpdGUtaWNvblwiLCB7IGNsYXNzOiB7XG4gICAgICAgICAgICAgICAgXCJzdW1tYXJ5LWljb25cIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFxuICAgICAgICAgICAgfSwgc2NhbGU6IFwibFwiLCBpY29uOiBpY29uIH0pKSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInN1bW1hcnktY29udGVudFwiIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogYCR7dGhpcy5kaXNhYmxlZCAmJiBcImRpc2FibGVkXCJ9YCB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFwidGl0bGVcIiB9KSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImRlc2NyaXB0aW9uXCIgfSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJsaW5rXCIgfSkpLCBoKFwic2xvdFwiLCB7IG5hbWU6IFwiYWN0aW9uc1wiIH0pKSkpO1xuICAgIH1cbiAgICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXJjZ2lzSXRlbXNTdW1tYXJ5LnN0eWxlID0gYXJjZ2lzSXRlbXNTdW1tYXJ5Q3NzO1xuXG5jb25zdCBhcmNnaXNJdGVtc1N1bW1hcnlCdWNrZXRDc3MgPSBcIjpob3N0e3BhZGRpbmctaW5saW5lLXN0YXJ0OjAuNXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzSXRlbXNTdW1tYXJ5QnVja2V0ID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5hcmNnaXNEZWxldGVJdGVtc1N1bW1hcnlJdGVtQ2xpY2sgPSBjcmVhdGVFdmVudCh0aGlzLCBcImFyY2dpc0RlbGV0ZUl0ZW1zU3VtbWFyeUl0ZW1DbGlja1wiLCA3KTtcbiAgICAgICAgdGhpcy5yZW5kZXJTaW5nbGVJdGVtTGluayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXRlbSB9ID0gdGhpcy5zaW5nbGVJdGVtO1xuICAgICAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1saW5rXCIsIHsgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvKiogVE9ETzogRmlyZSBhbiBldmVudCwgb3IgbGluayB0byBpdGVtIGRldGFpbHM/IE5vdCBhbGwgY29uc3VtZXJzIG1heSB3YW50IHRvIGxhdW5jaCBpdGVtIGRldGFpbHMgKi9cbiAgICAgICAgICAgICAgICB9IH0sIGgoXCJhcmNnaXMtaXRlbS10eXBlXCIsIHsgc2hvd1RleHQ6IGZhbHNlLCBpdGVtOiBpdGVtIH0pLCBcIiBcIiwgaXRlbS50aXRsZSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcG92ZXJJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYWJlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdW1tYXJ5R3JvdXBzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLnNpbmdsZUl0ZW0gPVxuICAgICAgICAgICAgKF9hID0gKHRoaXMuc3VtbWFyeUdyb3Vwcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnN1bW1hcnlHcm91cHNbMF0uaXRlbXMubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAgICAgdGhpcy5zdW1tYXJ5R3JvdXBzWzBdLml0ZW1zWzBdKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IHBvcG92ZXJJZCwgbGFiZWwgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChIb3N0LCBudWxsLCB0aGlzLnNpbmdsZUl0ZW0gPyAodGhpcy5yZW5kZXJTaW5nbGVJdGVtTGluaygpKSA6IChoKFwiYXJjZ2lzLWl0ZW1zLXN1bW1hcnktcG9wb3ZlclwiLCB7IGxhYmVsOiBsYWJlbCwgcG9wb3ZlcklkOiBwb3BvdmVySWQsIHN1bW1hcnlHcm91cHM6IHRoaXMuc3VtbWFyeUdyb3VwcyB9KSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0l0ZW1zU3VtbWFyeUJ1Y2tldC5zdHlsZSA9IGFyY2dpc0l0ZW1zU3VtbWFyeUJ1Y2tldENzcztcblxuY29uc3QgYXJjZ2lzSXRlbXNTdW1tYXJ5UG9wb3ZlckNzcyA9IFwiLnBvcG92ZXJ7bWF4LWhlaWdodDoyNTBweDt3aWR0aDozMDBweDttYXgtd2lkdGg6MTAwJTtvdmVyZmxvdzphdXRvfS5wb3BvdmVyX19pdGVtLXR5cGV7cGFkZGluZy1pbmxpbmUtc3RhcnQ6MXJlbX1cIjtcblxuY29uc3QgQXJjZ2lzSXRlbXNTdW1tYXJ5UG9wb3ZlciA9IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIHRoaXMubWFwU3VtbWFyeUdyb3Vwc1RvTGlzdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlckxpc3QgPSAoZ3JvdXApID0+IChoKFwiY2FsY2l0ZS1saXN0XCIsIG51bGwsIGdyb3VwLml0ZW1zLm1hcCgoYnVja2V0SXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgaXRlbSB9ID0gYnVja2V0SXRlbTtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChoKFwiY2FsY2l0ZS1saXN0LWl0ZW1cIiwgeyBsYWJlbDogaXRlbS50aXRsZSwgdmFsdWU6IGl0ZW0udGl0bGUsIGtleTogaWQsIG9uQ2FsY2l0ZUxpc3RJdGVtU2VsZWN0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiogVE9ETzogRmlyZSBhbiBldmVudCwgb3IgbGluayB0byBpdGVtIGRldGFpbHM/IE5vdCBhbGwgY29uc3VtZXJzIG1heSB3YW50IHRvIGxhdW5jaCBpdGVtIGRldGFpbHMgKi9cbiAgICAgICAgICAgICAgICAgICAgfSB9LCBoKFwiYXJjZ2lzLWl0ZW0tdHlwZVwiLCB7IHNsb3Q6IFwiY29udGVudC1zdGFydFwiLCBzaG93VGV4dDogZmFsc2UsIGl0ZW06IGl0ZW0sIGNsYXNzOiBcInBvcG92ZXJfX2l0ZW0tdHlwZVwiIH0pKSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5zdW1tYXJ5R3JvdXBzLm1hcCgoZ3JvdXApID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXAuaGVhZGluZyA/IChoKFwiY2FsY2l0ZS1saXN0LWl0ZW0tZ3JvdXBcIiwgeyBoZWFkaW5nOiBncm91cC5oZWFkaW5nIH0sIHJlbmRlckxpc3QoZ3JvdXApKSkgOiAocmVuZGVyTGlzdChncm91cCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBvcG92ZXJJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYWJlbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdW1tYXJ5R3JvdXBzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmRpc2FibGVMaW5rcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3RhbEl0ZW1zID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgdGhpcy50b3RhbEl0ZW1zID0gdGhpcy5zdW1tYXJ5R3JvdXBzLnJlZHVjZSgodG90YWwsIHN1bW1hcnkpID0+IHRvdGFsICsgc3VtbWFyeS5pdGVtcy5sZW5ndGgsIDApO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgcG9wb3ZlcklkLCBsYWJlbCwgdG90YWxJdGVtcywgbWFwU3VtbWFyeUdyb3Vwc1RvTGlzdCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJjYWxjaXRlLWxpbmtcIiwgeyBpZDogcG9wb3ZlcklkIH0sIHRvdGFsSXRlbXMpLCBoKFwiY2FsY2l0ZS1wb3BvdmVyXCIsIHsgY2xhc3M6IFwicG9wb3ZlclwiLCBsYWJlbDogbGFiZWwsIHJlZmVyZW5jZUVsZW1lbnQ6IHBvcG92ZXJJZCwgcGxhY2VtZW50OiBcImJvdHRvbVwiLCBvdmVybGF5UG9zaXRpb25pbmc6IFwiZml4ZWRcIiwgYXV0b0Nsb3NlOiB0cnVlIH0sIG1hcFN1bW1hcnlHcm91cHNUb0xpc3QoKSkpKTtcbiAgICB9XG4gICAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbkFyY2dpc0l0ZW1zU3VtbWFyeVBvcG92ZXIuc3R5bGUgPSBhcmNnaXNJdGVtc1N1bW1hcnlQb3BvdmVyQ3NzO1xuXG5leHBvcnQgeyBBcmNnaXNJdGVtc1N1bW1hcnkgYXMgYXJjZ2lzX2l0ZW1zX3N1bW1hcnksIEFyY2dpc0l0ZW1zU3VtbWFyeUJ1Y2tldCBhcyBhcmNnaXNfaXRlbXNfc3VtbWFyeV9idWNrZXQsIEFyY2dpc0l0ZW1zU3VtbWFyeVBvcG92ZXIgYXMgYXJjZ2lzX2l0ZW1zX3N1bW1hcnlfcG9wb3ZlciB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmNnaXMtaXRlbXMtc3VtbWFyeV8zLmVudHJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==