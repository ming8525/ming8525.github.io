"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-48d7b2"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-band-arithmetic-band-indexes-editor-2c58a432.js":
/*!****************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-band-arithmetic-band-indexes-editor-2c58a432.js ***!
  \****************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxBandArithmeticBandIndexesEditor)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");



















const HelpClickHandlerKeys = {
    bandindexesHelpClickHandler: "bandindexesHelpClickHandler"
};
/**
 * formats string such that the numbers in string are formatted
 * correctly based on locale. specifically uses "," as decimal seprators.
 */
const formatNumbersInStringToLocale = (str) => {
    const numberRegex = /(\d+(\.\d+)?)/g;
    // Replace each matched number with its formatted counterpart
    return str.replace(numberRegex, function (match) {
        return (0,_sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_17__.a)(parseFloat(match));
    });
};

const RfxBandArithmeticBandIndexesEditor = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.placeholder = undefined;
        this.bandIndexEditorMessage = undefined;
        this.widgetArgs = undefined;
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.widgetArgs.triggerArgs?.Method.input.addEventListener("rfxArgumentChange", ({ detail: { value } }) => {
            this.handleMethodChange(value);
        });
    }
    async componentWillLoad() {
        ({ strings: this.strings, dir: this.direction } = await (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.hostElement, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.g)(`.`)));
        this.setInitialState();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    setInitialState() {
        const bandIndexesRfxArgValue = this.widgetArgs.inputArgs?.BandIndexes.value;
        this.value = bandIndexesRfxArgValue;
        const methodRfxArgValue = this.widgetArgs.triggerArgs?.Method.value;
        this.handleMethodChange(methodRfxArgValue);
    }
    attachHelpClickEventHandlers() {
        const bandindexesHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.widgetArgs?.inputArgs?.BandIndexes?.displayName,
            referenceElement: this.bandIndexsEditorContainer,
            helpTextID: this.widgetArgs.helpTextIDs?.bandarithmetic_bandindexes
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.bandindexesHelpClickHandler, bandindexesHelpClickHandler);
    }
    /**
     * Handles changes to the method value and sets the placeholder and bandIndexEditorMessage message.
     * @private
     * @param {any} method - The method value.
     */
    handleMethodChange(method) {
        let example = `${this.strings.example}: `;
        let iDetails = `${this.strings.input}: `;
        let oDetails = `${this.strings.output}: `;
        const optional = ` (${this.strings.optional})`;
        const newLine = "</br>";
        switch (parseInt(method)) {
            case 0: // user-defined
                example += "(B3 - B1) / (B3 + B1)";
                iDetails = "";
                oDetails = "";
                break;
            case 1: // NDVI
                example += "3 1";
                iDetails += "NIR Red";
                oDetails += "(NIR - Red) / (NIR + Red)";
                break;
            case 2: // SAVI
                example += "3 1 0.33";
                iDetails += "NIR Red L";
                oDetails += "((NIR - Red) / (NIR + Red + L)) * (1 + L)";
                break;
            case 3: // TSAVI
                example += "3 1 0.33 0.5 1.5";
                iDetails += "NIR Red s a X";
                oDetails += "(s * (NIR - s * Red - a)) / (a * NIR + Red - a * s + X * (1 + s * s))";
                break;
            case 4: // MSAVI
                example += "3 1";
                iDetails += "NIR Red";
                oDetails += "(2 * NIR + 1 - Sqrt((2 * NIR + 1) ^ 2 - 8 * (NIR - Red))) / 2";
                break;
            case 5: // GEMI
                example += "3 1";
                iDetails += "NIR Red";
                oDetails += "eta * (1 - 0.25 * eta) - ((Red - 0.125) / (1 - Red))";
                oDetails += newLine;
                oDetails += newLine;
                oDetails += " *eta = [2 * (NIR ^ 2 â€“ Red ^ 2) + 1.5 * NIR + 0.5 * Red] / (NIR + Red + 0.5)";
                break;
            case 6: // PVI
                example += "3 1 0.33 0.5";
                iDetails += "NIR Red a b";
                oDetails += "(NIR - a * Red - b) / (Sqrt(1 + a ^ 2))";
                break;
            case 7: // GVITM
                example += "1 2 3 4 5 7";
                iDetails += "TM1 TM2 TM3 TM4 TM5 TM7";
                iDetails += optional;
                oDetails +=
                    "-0.2848 * TM1 - 0.2435 * TM2 - 0.5436 * TM3 + 0.7243 * TM4 + 0.084 * TM5 - 0.18 * TM7";
                break;
            case 8: // Sultan's
                example += "1 3 4 5 6";
                iDetails += "Band1 Band3 Band4 Band5 Band6";
                iDetails += optional;
                oDetails += newLine;
                oDetails += " Band1 = (Band5 / Band6) * 100";
                oDetails += newLine;
                oDetails += " Band2 = (Band5 / Band1) * 100";
                oDetails += newLine;
                oDetails += " Band3 = (Band3 / Band4) * (Band5 / Band4) * 100";
                break;
            case 9: // VARI
                example += "3 2 1";
                iDetails += "Red Green Blue";
                oDetails += "(Green - Red) / (Green + Red - Blue)";
                break;
            case 10: // GNDVI
                example += "3 1";
                iDetails += "NIR Green";
                oDetails += "(NIR - Green) / (NIR + Green)";
                break;
            case 11: // SR
                example += "3 1";
                iDetails += "NIR Red";
                oDetails += "NIR / Red";
                break;
            case 12: // NDVIre
                example += "3 1";
                iDetails += "NIR RedEdge";
                oDetails += "(NIR - RedEdge) / (NIR + RedEdge)";
                break;
            case 13: // SRre
                example += "3 1";
                iDetails += "NIR RedEdge";
                oDetails += "NIR / RedEdge";
                break;
            case 14: // MTVI2
                example += "3 1 2";
                iDetails += "NIR Green Red";
                oDetails +=
                    "(1.5 * (1.2 * (NIR - Green) - 2.5 * (Red - Green) ) / Sqrt( (2 * NIR + 1) ^ 2 - (6 * NIR - 5 * Sqrt(Red) ) - 0.5 ) )";
                break;
            case 15: // RTVICore
                example += "3 2 1";
                iDetails += "NIR RedEdge Green";
                oDetails += "(100 * (NIR - RedEdge) - 10 * (NIR - Green))";
                break;
            case 16: // CIre
                example += "3 2";
                iDetails += "NIR RedEdge";
                oDetails += "(NIR / RedEdge) - 1.0";
                break;
            case 17: // CIg
                example += "3 1";
                iDetails += "NIR Green";
                oDetails += "(NIR / Green) - 1.0";
                break;
            case 18: // NDWI
                example += "3 1";
                iDetails += "NIR Green";
                oDetails += "(Green - NIR) / (Green + NIR)";
                break;
            case 19: // EVI
                example += "3 2 1";
                iDetails += "NIR Red Blue";
                oDetails += "2.5 * [(NIR - Red)/ (NIR + (6 * Red) - (7.5 * Blue) + 1.0)]";
                break;
            case 20: // IronOxide
                example += "3 1";
                iDetails += "Red Blue";
                oDetails += "Red / Blue";
                break;
            case 21: // FerrousMinerals
                example += "3 1";
                iDetails += "SWIR NIR";
                oDetails += "SWIR / NIR";
                break;
            case 22: // ClayMinerals
                example += "3 1";
                iDetails += "SWIR1 SWIR2";
                oDetails += "SWIR1 / SWIR2";
                break;
            case 23: // WNDWI
                example += "3 2 1";
                iDetails += "Green NIR SWIR";
                oDetails += "[Green â€“ Î± * NIR â€“ (1 â€“ Î±) * SWIR ] / [Green + Î± * NIR + (1 â€“ Î±) * SWIR]";
                break;
            case 24: // BAI
                example += "3 1";
                iDetails += "Red NIR";
                oDetails += "1/((0.1 -RED)^2 + (0.06 - NIR)^2)";
                break;
            case 25: // NBR
                example += "3 1";
                iDetails += "NIR SWIR";
                oDetails += "(NIR - SWIR) / (NIR + SWIR)";
                break;
            case 26: // NDBI
                example += "3 1";
                iDetails += "SWIR NIR";
                oDetails += "(SWIR - NIR) / (SWIR + NIR)";
                break;
            case 27: // NDMI
                example += "3 1";
                iDetails += "NIR SWIR1";
                oDetails += "(NIR - SWIR1) / (NIR + SWIR1)";
                break;
            case 28: // NDSI
                example += "3 1";
                iDetails += "Green SWIR";
                oDetails += "(Green - SWIR) / (Green + SWIR)";
                break;
            case 29: // MNDWI
                example += "3 1";
                iDetails += "Green SWIR";
                oDetails += "(Green - SWIR) / (Green + SWIR)";
                break;
        }
        this.placeholder = example;
        let bandIndexEditorMessage;
        try {
            const formattedString = formatNumbersInStringToLocale(iDetails + newLine + oDetails);
            bandIndexEditorMessage = formattedString;
        }
        catch {
            bandIndexEditorMessage = iDetails + newLine + oDetails;
        }
        this.bandIndexEditorMessage = bandIndexEditorMessage;
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.U.Scale, layout: "default", ref: (e) => {
                this.bandIndexsEditorContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.widgetArgs.inputArgs.BandIndexes.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.bandindexesHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { type: "text", ref: (input) => {
                // Automatically handles value setting
                this.widgetArgs.inputArgs.BandIndexes.input = input;
            }, scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.U.Scale, placeholder: this.placeholder, value: this.value }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input-message", { status: _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_4__.U.IDLE, icon: true, "icon-flip-rtl": this.direction === "rtl", ref: (e) => {
                // TODO: bug the html doesn't render as HTML but as plain string so <br> doesn't work.
                e.innerHTML = this.bandIndexEditorMessage;
            } }))));
    }
    static get assetsDirs() { return ["t9n"]; }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};



//# sourceMappingURL=rfx-cte-band-arithmetic-band-indexes-editor-2c58a432.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-band-arithmetic-band-indexes-editor.entry.js":
/*!*************************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-band-arithmetic-band-indexes-editor.entry.js ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_band_arithmetic_band_indexes_editor: () => (/* reexport safe */ _rfx_cte_band_arithmetic_band_indexes_editor_2c58a432_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_band_arithmetic_band_indexes_editor_2c58a432_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-band-arithmetic-band-indexes-editor-2c58a432.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-band-arithmetic-band-indexes-editor-2c58a432.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _interfaces_d0c68944_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interfaces-d0c68944.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/interfaces-d0c68944.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _sanitize_number_d84114f7_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./sanitize-number-d84114f7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");






















//# sourceMappingURL=rfx-cte-band-arithmetic-band-indexes-editor.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js":
/*!************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/sanitize-number-d84114f7.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ formatNumberToLocale),
/* harmony export */   f: () => (/* binding */ formatNumber),
/* harmony export */   i: () => (/* binding */ isValidNumber),
/* harmony export */   p: () => (/* binding */ parseNumber),
/* harmony export */   s: () => (/* binding */ sanitizeNumber)
/* harmony export */ });
/* harmony import */ var _localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./localization-helper-4819b67d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/localization-helper-4819b67d.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");



/**
 * Indicates if a provided number value is valid.
 * An invalid value is: undefined | NaN | Infinite | -Infinite | null
 * See for more details:
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite
 *   - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN
 * @param {number | undefined | null} value value to check
 * @returns {boolean} if valid or not
 */
function isValidNumber(value) {
    return value !== undefined && value !== null && Number.isNaN(value) === false && Number.isFinite(value) === true;
}
/**
 * Returns a string representation of the provided number for use with calcite-input. It also
 * guards against invalid types following this logic:
 *   - If the value is valid (not NaN, finite), the value is returned as a string
 *   - If not and if a valid default value is provided, the default value is returned as a string
 *   - If not, an empty string is returned
 * @param value
 * @param defaultValue
 * @returns a sanitized string
 */
function sanitizeNumber(value, defaultValue) {
    let returnedValue;
    if (value !== null) {
        const testedValue = typeof value === "string" ? Number.parseFloat(value) : value;
        if (isValidNumber(testedValue))
            returnedValue = testedValue;
        else if (isValidNumber(defaultValue))
            returnedValue = defaultValue;
    }
    return returnedValue === undefined ? "" : `${returnedValue}`;
}
/**
 * Parses a value string to a number for use with calcite-input. If the string is empty, it will return undefined.
 * If the string is otherwise invalid, it will return NaN.
 * @param value calcite-input value
 * @returns {number | undefined} the parsed number
 */
function parseNumber(value) {
    if (value === "")
        return undefined;
    return Number.parseFloat(value);
}
/**
 * Formats a number to a specified number of decimal places.
 *
 * @param {number} value - The number to format.
 * @param {number} [fractionDigits=3] - The number of decimal places to include in the formatted number. Defaults to 3.
 * @returns {number|undefined} - The formatted number, or undefined if the input value is empty.
 */
function formatNumber(value, fractionDigits = 3) {
    if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value))
        return undefined;
    return Number.parseFloat(value.toFixed(fractionDigits));
}
/**
 * Formats a number or string representing a number according to the locale, passing Intl number format options
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/ReferenceGlobal_Objects/Intl/NumberFormat/NumberFormat#options
 * @param {number | string | undefined} value to be formatted and localized
 * @param {Intl.NumberFormatOptions} formatOptions options object matching Intl.NumberFormat
 * @returns {string} localized / rounded string
 */
function formatNumberToLocale(value, formatOptions) {
    let formattedValue = "";
    if (!(0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_1__.i)(value) && !Number.isNaN(value)) {
        const localeCode = (0,_localization_helper_4819b67d_js__WEBPACK_IMPORTED_MODULE_0__.g)().locale;
        formattedValue = Intl.NumberFormat(localeCode, formatOptions).format(Number(value));
    }
    return formattedValue;
}



//# sourceMappingURL=sanitize-number-d84114f7.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLTQ4ZDdiMi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFIO0FBQ2hDO0FBQ2xEO0FBQ3NCO0FBQ0s7QUFDWjtBQUNYO0FBQ0Q7QUFDTztBQUNrQjtBQUM5QjtBQUMwQjtBQUNGO0FBQzFCO0FBQ087QUFDSztBQUNBO0FBQytCOztBQUUxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnRUFBb0I7QUFDbkMsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxRQUFRLHFEQUFnQjtBQUN4QixpQ0FBaUMscURBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLFVBQVUsU0FBUztBQUM5RztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsV0FBVyw2Q0FBNkMsUUFBUSxtRUFBMkIsbUJBQW1CLHFEQUFZO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBLHlCQUF5QixxQkFBcUI7QUFDOUMsMEJBQTBCLG1CQUFtQjtBQUM3QywwQkFBMEIsb0JBQW9CO0FBQzlDLDhCQUE4QixzQkFBc0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBOztBQUU4RTs7QUFFOUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS9yZngtY3RlLWJhbmQtYXJpdGhtZXRpYy1iYW5kLWluZGV4ZXMtZWRpdG9yLTJjNThhNDMyLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUtYmFuZC1hcml0aG1ldGljLWJhbmQtaW5kZXhlcy1lZGl0b3IuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3VpLXV0aWxzLTkyOGE0MDk2LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgZyBhcyBnZXRBc3NldFBhdGgsIGgsIGEgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0IHsgYiBhcyBmZXRjaENvbXBvbmVudExvY2FsZVN0cmluZ3MgfSBmcm9tICcuL2xvY2FsaXphdGlvbi1oZWxwZXItNDgxOWI2N2QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCB7IFUgYXMgVUlEZWZhdWx0cyB9IGZyb20gJy4vdWktdXRpbHMtOTI4YTQwOTYuanMnO1xuaW1wb3J0IHsgVSBhcyBVSUlucHV0U3RhdHVzIH0gZnJvbSAnLi9pbnRlcmZhY2VzLWQwYzY4OTQ0LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVxdWVzdC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuaW1wb3J0IHsgYSBhcyBmb3JtYXROdW1iZXJUb0xvY2FsZSB9IGZyb20gJy4vc2FuaXRpemUtbnVtYmVyLWQ4NDExNGY3LmpzJztcblxuY29uc3QgSGVscENsaWNrSGFuZGxlcktleXMgPSB7XG4gICAgYmFuZGluZGV4ZXNIZWxwQ2xpY2tIYW5kbGVyOiBcImJhbmRpbmRleGVzSGVscENsaWNrSGFuZGxlclwiXG59O1xuLyoqXG4gKiBmb3JtYXRzIHN0cmluZyBzdWNoIHRoYXQgdGhlIG51bWJlcnMgaW4gc3RyaW5nIGFyZSBmb3JtYXR0ZWRcbiAqIGNvcnJlY3RseSBiYXNlZCBvbiBsb2NhbGUuIHNwZWNpZmljYWxseSB1c2VzIFwiLFwiIGFzIGRlY2ltYWwgc2VwcmF0b3JzLlxuICovXG5jb25zdCBmb3JtYXROdW1iZXJzSW5TdHJpbmdUb0xvY2FsZSA9IChzdHIpID0+IHtcbiAgICBjb25zdCBudW1iZXJSZWdleCA9IC8oXFxkKyhcXC5cXGQrKT8pL2c7XG4gICAgLy8gUmVwbGFjZSBlYWNoIG1hdGNoZWQgbnVtYmVyIHdpdGggaXRzIGZvcm1hdHRlZCBjb3VudGVycGFydFxuICAgIHJldHVybiBzdHIucmVwbGFjZShudW1iZXJSZWdleCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXROdW1iZXJUb0xvY2FsZShwYXJzZUZsb2F0KG1hdGNoKSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBSZnhCYW5kQXJpdGhtZXRpY0JhbmRJbmRleGVzRWRpdG9yID0gY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgdGhpcy5yZnhBcmd1bWVudENoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwicmZ4QXJndW1lbnRDaGFuZ2VcIiwgNyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgZXZlbnQgaGFuZGxlcnMgZm9yIGhlbHAgYWN0aW9uIGNsaWNrLCBzdG9yZWQgaW4gY29ubmVjdGVkIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgICAqIGZldGNoaW5nIGZ1bmN0aW9uIG9uIGVhY2ggcmVuZGVyICggdG8gYXZvaWQgY29tbW9uIGJhZCBwcmFjdGljZSApXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlbHBBY3Rpb25DbGlja0V2ZW50SGFuZGxlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYmFuZEluZGV4RWRpdG9yTWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53aWRnZXRBcmdzID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgTGlmZWN5Y2xlXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMud2lkZ2V0QXJncy50cmlnZ2VyQXJncz8uTWV0aG9kLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZnhBcmd1bWVudENoYW5nZVwiLCAoeyBkZXRhaWw6IHsgdmFsdWUgfSB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1ldGhvZENoYW5nZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICAgICAgKHsgc3RyaW5nczogdGhpcy5zdHJpbmdzLCBkaXI6IHRoaXMuZGlyZWN0aW9uIH0gPSBhd2FpdCBmZXRjaENvbXBvbmVudExvY2FsZVN0cmluZ3ModGhpcy5ob3N0RWxlbWVudCwgZ2V0QXNzZXRQYXRoKGAuYCkpKTtcbiAgICAgICAgdGhpcy5zZXRJbml0aWFsU3RhdGUoKTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuICAgIHNldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgYmFuZEluZGV4ZXNSZnhBcmdWYWx1ZSA9IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3M/LkJhbmRJbmRleGVzLnZhbHVlO1xuICAgICAgICB0aGlzLnZhbHVlID0gYmFuZEluZGV4ZXNSZnhBcmdWYWx1ZTtcbiAgICAgICAgY29uc3QgbWV0aG9kUmZ4QXJnVmFsdWUgPSB0aGlzLndpZGdldEFyZ3MudHJpZ2dlckFyZ3M/Lk1ldGhvZC52YWx1ZTtcbiAgICAgICAgdGhpcy5oYW5kbGVNZXRob2RDaGFuZ2UobWV0aG9kUmZ4QXJnVmFsdWUpO1xuICAgIH1cbiAgICBhdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBjb25zdCBiYW5kaW5kZXhlc0hlbHBDbGlja0hhbmRsZXIgPSB0aGlzLndpZGdldEFyZ3Mub25IZWxwQWN0aW9uQ2xpY2soe1xuICAgICAgICAgICAgaGVhZGluZzogdGhpcy53aWRnZXRBcmdzPy5pbnB1dEFyZ3M/LkJhbmRJbmRleGVzPy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IHRoaXMuYmFuZEluZGV4c0VkaXRvckNvbnRhaW5lcixcbiAgICAgICAgICAgIGhlbHBUZXh0SUQ6IHRoaXMud2lkZ2V0QXJncy5oZWxwVGV4dElEcz8uYmFuZGFyaXRobWV0aWNfYmFuZGluZGV4ZXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMuYmFuZGluZGV4ZXNIZWxwQ2xpY2tIYW5kbGVyLCBiYW5kaW5kZXhlc0hlbHBDbGlja0hhbmRsZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGNoYW5nZXMgdG8gdGhlIG1ldGhvZCB2YWx1ZSBhbmQgc2V0cyB0aGUgcGxhY2Vob2xkZXIgYW5kIGJhbmRJbmRleEVkaXRvck1lc3NhZ2UgbWVzc2FnZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7YW55fSBtZXRob2QgLSBUaGUgbWV0aG9kIHZhbHVlLlxuICAgICAqL1xuICAgIGhhbmRsZU1ldGhvZENoYW5nZShtZXRob2QpIHtcbiAgICAgICAgbGV0IGV4YW1wbGUgPSBgJHt0aGlzLnN0cmluZ3MuZXhhbXBsZX06IGA7XG4gICAgICAgIGxldCBpRGV0YWlscyA9IGAke3RoaXMuc3RyaW5ncy5pbnB1dH06IGA7XG4gICAgICAgIGxldCBvRGV0YWlscyA9IGAke3RoaXMuc3RyaW5ncy5vdXRwdXR9OiBgO1xuICAgICAgICBjb25zdCBvcHRpb25hbCA9IGAgKCR7dGhpcy5zdHJpbmdzLm9wdGlvbmFsfSlgO1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gXCI8L2JyPlwiO1xuICAgICAgICBzd2l0Y2ggKHBhcnNlSW50KG1ldGhvZCkpIHtcbiAgICAgICAgICAgIGNhc2UgMDogLy8gdXNlci1kZWZpbmVkXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIihCMyAtIEIxKSAvIChCMyArIEIxKVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzID0gXCJcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6IC8vIE5EVklcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJOSVIgUmVkXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIoTklSIC0gUmVkKSAvIChOSVIgKyBSZWQpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6IC8vIFNBVklcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxIDAuMzNcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBSZWQgTFwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKChOSVIgLSBSZWQpIC8gKE5JUiArIFJlZCArIEwpKSAqICgxICsgTClcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzogLy8gVFNBVklcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxIDAuMzMgMC41IDEuNVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZCBzIGEgWFwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKHMgKiAoTklSIC0gcyAqIFJlZCAtIGEpKSAvIChhICogTklSICsgUmVkIC0gYSAqIHMgKyBYICogKDEgKyBzICogcykpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6IC8vIE1TQVZJXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZFwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKDIgKiBOSVIgKyAxIC0gU3FydCgoMiAqIE5JUiArIDEpIF4gMiAtIDggKiAoTklSIC0gUmVkKSkpIC8gMlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OiAvLyBHRU1JXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZFwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiZXRhICogKDEgLSAwLjI1ICogZXRhKSAtICgoUmVkIC0gMC4xMjUpIC8gKDEgLSBSZWQpKVwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IG5ld0xpbmU7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gbmV3TGluZTtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIiAqZXRhID0gWzIgKiAoTklSIF4gMiDigJMgUmVkIF4gMikgKyAxLjUgKiBOSVIgKyAwLjUgKiBSZWRdIC8gKE5JUiArIFJlZCArIDAuNSlcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjogLy8gUFZJXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMSAwLjMzIDAuNVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZCBhIGJcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIihOSVIgLSBhICogUmVkIC0gYikgLyAoU3FydCgxICsgYSBeIDIpKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA3OiAvLyBHVklUTVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIxIDIgMyA0IDUgN1wiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiVE0xIFRNMiBUTTMgVE00IFRNNSBUTTdcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBvcHRpb25hbDtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPVxuICAgICAgICAgICAgICAgICAgICBcIi0wLjI4NDggKiBUTTEgLSAwLjI0MzUgKiBUTTIgLSAwLjU0MzYgKiBUTTMgKyAwLjcyNDMgKiBUTTQgKyAwLjA4NCAqIFRNNSAtIDAuMTggKiBUTTdcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODogLy8gU3VsdGFuJ3NcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMSAzIDQgNSA2XCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJCYW5kMSBCYW5kMyBCYW5kNCBCYW5kNSBCYW5kNlwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IG9wdGlvbmFsO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IG5ld0xpbmU7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIgQmFuZDEgPSAoQmFuZDUgLyBCYW5kNikgKiAxMDBcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBuZXdMaW5lO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiIEJhbmQyID0gKEJhbmQ1IC8gQmFuZDEpICogMTAwXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gbmV3TGluZTtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIiBCYW5kMyA9IChCYW5kMyAvIEJhbmQ0KSAqIChCYW5kNSAvIEJhbmQ0KSAqIDEwMFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA5OiAvLyBWQVJJXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMiAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJSZWQgR3JlZW4gQmx1ZVwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKEdyZWVuIC0gUmVkKSAvIChHcmVlbiArIFJlZCAtIEJsdWUpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEwOiAvLyBHTkRWSVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBHcmVlblwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKE5JUiAtIEdyZWVuKSAvIChOSVIgKyBHcmVlbilcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTE6IC8vIFNSXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZFwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiTklSIC8gUmVkXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEyOiAvLyBORFZJcmVcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJOSVIgUmVkRWRnZVwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKE5JUiAtIFJlZEVkZ2UpIC8gKE5JUiArIFJlZEVkZ2UpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEzOiAvLyBTUnJlXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZEVkZ2VcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIk5JUiAvIFJlZEVkZ2VcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTQ6IC8vIE1UVkkyXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMSAyXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJOSVIgR3JlZW4gUmVkXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz1cbiAgICAgICAgICAgICAgICAgICAgXCIoMS41ICogKDEuMiAqIChOSVIgLSBHcmVlbikgLSAyLjUgKiAoUmVkIC0gR3JlZW4pICkgLyBTcXJ0KCAoMiAqIE5JUiArIDEpIF4gMiAtICg2ICogTklSIC0gNSAqIFNxcnQoUmVkKSApIC0gMC41ICkgKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNTogLy8gUlRWSUNvcmVcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAyIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBSZWRFZGdlIEdyZWVuXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIoMTAwICogKE5JUiAtIFJlZEVkZ2UpIC0gMTAgKiAoTklSIC0gR3JlZW4pKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxNjogLy8gQ0lyZVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDJcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBSZWRFZGdlXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIoTklSIC8gUmVkRWRnZSkgLSAxLjBcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTc6IC8vIENJZ1xuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBHcmVlblwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKE5JUiAvIEdyZWVuKSAtIDEuMFwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxODogLy8gTkRXSVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIk5JUiBHcmVlblwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKEdyZWVuIC0gTklSKSAvIChHcmVlbiArIE5JUilcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTk6IC8vIEVWSVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDIgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFJlZCBCbHVlXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIyLjUgKiBbKE5JUiAtIFJlZCkvIChOSVIgKyAoNiAqIFJlZCkgLSAoNy41ICogQmx1ZSkgKyAxLjApXVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMDogLy8gSXJvbk94aWRlXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiUmVkIEJsdWVcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIlJlZCAvIEJsdWVcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjE6IC8vIEZlcnJvdXNNaW5lcmFsc1xuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIlNXSVIgTklSXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCJTV0lSIC8gTklSXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIyOiAvLyBDbGF5TWluZXJhbHNcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJTV0lSMSBTV0lSMlwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiU1dJUjEgLyBTV0lSMlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMzogLy8gV05EV0lcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAyIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIkdyZWVuIE5JUiBTV0lSXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCJbR3JlZW4g4oCTIM6xICogTklSIOKAkyAoMSDigJMgzrEpICogU1dJUiBdIC8gW0dyZWVuICsgzrEgKiBOSVIgKyAoMSDigJMgzrEpICogU1dJUl1cIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjQ6IC8vIEJBSVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIlJlZCBOSVJcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIjEvKCgwLjEgLVJFRCleMiArICgwLjA2IC0gTklSKV4yKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyNTogLy8gTkJSXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiTklSIFNXSVJcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIihOSVIgLSBTV0lSKSAvIChOSVIgKyBTV0lSKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyNjogLy8gTkRCSVxuICAgICAgICAgICAgICAgIGV4YW1wbGUgKz0gXCIzIDFcIjtcbiAgICAgICAgICAgICAgICBpRGV0YWlscyArPSBcIlNXSVIgTklSXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIoU1dJUiAtIE5JUikgLyAoU1dJUiArIE5JUilcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjc6IC8vIE5ETUlcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJOSVIgU1dJUjFcIjtcbiAgICAgICAgICAgICAgICBvRGV0YWlscyArPSBcIihOSVIgLSBTV0lSMSkgLyAoTklSICsgU1dJUjEpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI4OiAvLyBORFNJXG4gICAgICAgICAgICAgICAgZXhhbXBsZSArPSBcIjMgMVwiO1xuICAgICAgICAgICAgICAgIGlEZXRhaWxzICs9IFwiR3JlZW4gU1dJUlwiO1xuICAgICAgICAgICAgICAgIG9EZXRhaWxzICs9IFwiKEdyZWVuIC0gU1dJUikgLyAoR3JlZW4gKyBTV0lSKVwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOTogLy8gTU5EV0lcbiAgICAgICAgICAgICAgICBleGFtcGxlICs9IFwiMyAxXCI7XG4gICAgICAgICAgICAgICAgaURldGFpbHMgKz0gXCJHcmVlbiBTV0lSXCI7XG4gICAgICAgICAgICAgICAgb0RldGFpbHMgKz0gXCIoR3JlZW4gLSBTV0lSKSAvIChHcmVlbiArIFNXSVIpXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IGV4YW1wbGU7XG4gICAgICAgIGxldCBiYW5kSW5kZXhFZGl0b3JNZXNzYWdlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkU3RyaW5nID0gZm9ybWF0TnVtYmVyc0luU3RyaW5nVG9Mb2NhbGUoaURldGFpbHMgKyBuZXdMaW5lICsgb0RldGFpbHMpO1xuICAgICAgICAgICAgYmFuZEluZGV4RWRpdG9yTWVzc2FnZSA9IGZvcm1hdHRlZFN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBiYW5kSW5kZXhFZGl0b3JNZXNzYWdlID0gaURldGFpbHMgKyBuZXdMaW5lICsgb0RldGFpbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYW5kSW5kZXhFZGl0b3JNZXNzYWdlID0gYmFuZEluZGV4RWRpdG9yTWVzc2FnZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKGgoXCJkaXZcIiwgbnVsbCwgaChcImNhbGNpdGUtbGFiZWxcIiwgeyBhbGlnbm1lbnQ6IFwic3RhcnRcIiwgc2NhbGU6IFVJRGVmYXVsdHMuU2NhbGUsIGxheW91dDogXCJkZWZhdWx0XCIsIHJlZjogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmJhbmRJbmRleHNFZGl0b3JDb250YWluZXIgPSBlO1xuICAgICAgICAgICAgfSB9LCBoKFwicmZ4LWxhYmVsXCIsIHsgbGFiZWw6IHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQmFuZEluZGV4ZXMuZGlzcGxheU5hbWUsIG9uUmZ4TGFiZWxIZWxwQWN0aW9uQ2xpY2s6ICgpID0+IHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycz8uZ2V0KEhlbHBDbGlja0hhbmRsZXJLZXlzLmJhbmRpbmRleGVzSGVscENsaWNrSGFuZGxlcikoKSB9KSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgcmVmOiAoaW5wdXQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBdXRvbWF0aWNhbGx5IGhhbmRsZXMgdmFsdWUgc2V0dGluZ1xuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0QXJncy5pbnB1dEFyZ3MuQmFuZEluZGV4ZXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgICAgIH0sIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBwbGFjZWhvbGRlcjogdGhpcy5wbGFjZWhvbGRlciwgdmFsdWU6IHRoaXMudmFsdWUgfSksIGgoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgeyBzdGF0dXM6IFVJSW5wdXRTdGF0dXMuSURMRSwgaWNvbjogdHJ1ZSwgXCJpY29uLWZsaXAtcnRsXCI6IHRoaXMuZGlyZWN0aW9uID09PSBcInJ0bFwiLCByZWY6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYnVnIHRoZSBodG1sIGRvZXNuJ3QgcmVuZGVyIGFzIEhUTUwgYnV0IGFzIHBsYWluIHN0cmluZyBzbyA8YnI+IGRvZXNuJ3Qgd29yay5cbiAgICAgICAgICAgICAgICBlLmlubmVySFRNTCA9IHRoaXMuYmFuZEluZGV4RWRpdG9yTWVzc2FnZTtcbiAgICAgICAgICAgIH0gfSkpKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcInQ5blwiXTsgfVxuICAgIGdldCBob3N0RWxlbWVudCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5cbmV4cG9ydCB7IFJmeEJhbmRBcml0aG1ldGljQmFuZEluZGV4ZXNFZGl0b3IgYXMgUiB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZngtY3RlLWJhbmQtYXJpdGhtZXRpYy1iYW5kLWluZGV4ZXMtZWRpdG9yLTJjNThhNDMyLmpzLm1hcCIsImV4cG9ydCB7IFIgYXMgcmZ4X2N0ZV9iYW5kX2FyaXRobWV0aWNfYmFuZF9pbmRleGVzX2VkaXRvciB9IGZyb20gJy4vcmZ4LWN0ZS1iYW5kLWFyaXRobWV0aWMtYmFuZC1pbmRleGVzLWVkaXRvci0yYzU4YTQzMi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICcuL2xvY2FsaXphdGlvbi1oZWxwZXItNDgxOWI2N2QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgJy4vaW50ZXJmYWNlcy1kMGM2ODk0NC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9pZGVudGl0eS9JZGVudGl0eU1hbmFnZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS91cmxVdGlscy5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvTGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0ltYWdlcnlMYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9zbWFydE1hcHBpbmcvcmFzdGVyL3JlbmRlcmVycy9zdHJldGNoLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcbmltcG9ydCAnLi9zYW5pdGl6ZS1udW1iZXItZDg0MTE0ZjcuanMnO1xuaW1wb3J0ICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS1iYW5kLWFyaXRobWV0aWMtYmFuZC1pbmRleGVzLWVkaXRvci5lbnRyeS5qcy5tYXAiLCJpbXBvcnQgeyBnIGFzIGdldExvY2FsZUluZm8gfSBmcm9tICcuL2xvY2FsaXphdGlvbi1oZWxwZXItNDgxOWI2N2QuanMnO1xuaW1wb3J0IHsgaSBhcyBpc0VtcHR5RGF0YUl0ZW0gfSBmcm9tICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcblxuLyoqXG4gKiBJbmRpY2F0ZXMgaWYgYSBwcm92aWRlZCBudW1iZXIgdmFsdWUgaXMgdmFsaWQuXG4gKiBBbiBpbnZhbGlkIHZhbHVlIGlzOiB1bmRlZmluZWQgfCBOYU4gfCBJbmZpbml0ZSB8IC1JbmZpbml0ZSB8IG51bGxcbiAqIFNlZSBmb3IgbW9yZSBkZXRhaWxzOlxuICogICAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9pc0Zpbml0ZVxuICogICAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9pc05hTlxuICogQHBhcmFtIHtudW1iZXIgfCB1bmRlZmluZWQgfCBudWxsfSB2YWx1ZSB2YWx1ZSB0byBjaGVja1xuICogQHJldHVybnMge2Jvb2xlYW59IGlmIHZhbGlkIG9yIG5vdFxuICovXG5mdW5jdGlvbiBpc1ZhbGlkTnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwgJiYgTnVtYmVyLmlzTmFOKHZhbHVlKSA9PT0gZmFsc2UgJiYgTnVtYmVyLmlzRmluaXRlKHZhbHVlKSA9PT0gdHJ1ZTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvdmlkZWQgbnVtYmVyIGZvciB1c2Ugd2l0aCBjYWxjaXRlLWlucHV0LiBJdCBhbHNvXG4gKiBndWFyZHMgYWdhaW5zdCBpbnZhbGlkIHR5cGVzIGZvbGxvd2luZyB0aGlzIGxvZ2ljOlxuICogICAtIElmIHRoZSB2YWx1ZSBpcyB2YWxpZCAobm90IE5hTiwgZmluaXRlKSwgdGhlIHZhbHVlIGlzIHJldHVybmVkIGFzIGEgc3RyaW5nXG4gKiAgIC0gSWYgbm90IGFuZCBpZiBhIHZhbGlkIGRlZmF1bHQgdmFsdWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHJldHVybmVkIGFzIGEgc3RyaW5nXG4gKiAgIC0gSWYgbm90LCBhbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIGRlZmF1bHRWYWx1ZVxuICogQHJldHVybnMgYSBzYW5pdGl6ZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplTnVtYmVyKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICBsZXQgcmV0dXJuZWRWYWx1ZTtcbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdGVzdGVkVmFsdWUgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyBOdW1iZXIucGFyc2VGbG9hdCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgaWYgKGlzVmFsaWROdW1iZXIodGVzdGVkVmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuZWRWYWx1ZSA9IHRlc3RlZFZhbHVlO1xuICAgICAgICBlbHNlIGlmIChpc1ZhbGlkTnVtYmVyKGRlZmF1bHRWYWx1ZSkpXG4gICAgICAgICAgICByZXR1cm5lZFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuZWRWYWx1ZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGAke3JldHVybmVkVmFsdWV9YDtcbn1cbi8qKlxuICogUGFyc2VzIGEgdmFsdWUgc3RyaW5nIHRvIGEgbnVtYmVyIGZvciB1c2Ugd2l0aCBjYWxjaXRlLWlucHV0LiBJZiB0aGUgc3RyaW5nIGlzIGVtcHR5LCBpdCB3aWxsIHJldHVybiB1bmRlZmluZWQuXG4gKiBJZiB0aGUgc3RyaW5nIGlzIG90aGVyd2lzZSBpbnZhbGlkLCBpdCB3aWxsIHJldHVybiBOYU4uXG4gKiBAcGFyYW0gdmFsdWUgY2FsY2l0ZS1pbnB1dCB2YWx1ZVxuICogQHJldHVybnMge251bWJlciB8IHVuZGVmaW5lZH0gdGhlIHBhcnNlZCBudW1iZXJcbiAqL1xuZnVuY3Rpb24gcGFyc2VOdW1iZXIodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IFwiXCIpXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHZhbHVlKTtcbn1cbi8qKlxuICogRm9ybWF0cyBhIG51bWJlciB0byBhIHNwZWNpZmllZCBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVGhlIG51bWJlciB0byBmb3JtYXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ZyYWN0aW9uRGlnaXRzPTNdIC0gVGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byBpbmNsdWRlIGluIHRoZSBmb3JtYXR0ZWQgbnVtYmVyLiBEZWZhdWx0cyB0byAzLlxuICogQHJldHVybnMge251bWJlcnx1bmRlZmluZWR9IC0gVGhlIGZvcm1hdHRlZCBudW1iZXIsIG9yIHVuZGVmaW5lZCBpZiB0aGUgaW5wdXQgdmFsdWUgaXMgZW1wdHkuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcih2YWx1ZSwgZnJhY3Rpb25EaWdpdHMgPSAzKSB7XG4gICAgaWYgKGlzRW1wdHlEYXRhSXRlbSh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHZhbHVlLnRvRml4ZWQoZnJhY3Rpb25EaWdpdHMpKTtcbn1cbi8qKlxuICogRm9ybWF0cyBhIG51bWJlciBvciBzdHJpbmcgcmVwcmVzZW50aW5nIGEgbnVtYmVyIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLCBwYXNzaW5nIEludGwgbnVtYmVyIGZvcm1hdCBvcHRpb25zXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZUdsb2JhbF9PYmplY3RzL0ludGwvTnVtYmVyRm9ybWF0L051bWJlckZvcm1hdCNvcHRpb25zXG4gKiBAcGFyYW0ge251bWJlciB8IHN0cmluZyB8IHVuZGVmaW5lZH0gdmFsdWUgdG8gYmUgZm9ybWF0dGVkIGFuZCBsb2NhbGl6ZWRcbiAqIEBwYXJhbSB7SW50bC5OdW1iZXJGb3JtYXRPcHRpb25zfSBmb3JtYXRPcHRpb25zIG9wdGlvbnMgb2JqZWN0IG1hdGNoaW5nIEludGwuTnVtYmVyRm9ybWF0XG4gKiBAcmV0dXJucyB7c3RyaW5nfSBsb2NhbGl6ZWQgLyByb3VuZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBmb3JtYXROdW1iZXJUb0xvY2FsZSh2YWx1ZSwgZm9ybWF0T3B0aW9ucykge1xuICAgIGxldCBmb3JtYXR0ZWRWYWx1ZSA9IFwiXCI7XG4gICAgaWYgKCFpc0VtcHR5RGF0YUl0ZW0odmFsdWUpICYmICFOdW1iZXIuaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsZUNvZGUgPSBnZXRMb2NhbGVJbmZvKCkubG9jYWxlO1xuICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IEludGwuTnVtYmVyRm9ybWF0KGxvY2FsZUNvZGUsIGZvcm1hdE9wdGlvbnMpLmZvcm1hdChOdW1iZXIodmFsdWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlO1xufVxuXG5leHBvcnQgeyBmb3JtYXROdW1iZXJUb0xvY2FsZSBhcyBhLCBmb3JtYXROdW1iZXIgYXMgZiwgaXNWYWxpZE51bWJlciBhcyBpLCBwYXJzZU51bWJlciBhcyBwLCBzYW5pdGl6ZU51bWJlciBhcyBzIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhbml0aXplLW51bWJlci1kODQxMTRmNy5qcy5tYXAiLCJjb25zdCBVSURlZmF1bHRzID0ge1xuICAgIFNjYWxlOiBcInNcIixcbiAgICBQb3BvdmVyVGltZXI6IDYwXG59O1xuY29uc3QgQ2FsY2l0ZVNjYWxlID0ge1xuICAgIHM6IFwic1wiLFxuICAgIG06IFwibVwiXG59O1xuY29uc3QgQ2FsY2l0ZU92ZXJsYXlQb3NpdGlvbmluZyA9IHtcbiAgICBhYnNvbHV0ZTogXCJhYnNvbHV0ZVwiLFxuICAgIGZpeGVkOiBcImZpeGVkXCJcbn07XG5cbmV4cG9ydCB7IENhbGNpdGVTY2FsZSBhcyBDLCBVSURlZmF1bHRzIGFzIFUsIENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgYXMgYSB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11aS11dGlscy05MjhhNDA5Ni5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=