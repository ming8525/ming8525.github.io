"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dist_stenci-cd6c27"],{

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-avatar.entry.js":
/*!*****************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/calcite-avatar.entry.js ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_avatar: () => (/* binding */ Avatar)
/* harmony export */ });
/* harmony import */ var _index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-4e647411.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/index-4e647411.js");
/* harmony import */ var _dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom-1997bfaf.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/dom-1997bfaf.js");
/* harmony import */ var _utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils-a71d8ee9.js */ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js");







/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
/**
 * Convert a string to a valid hex by hashing its contents
 * and using the hash as a seed for three distinct color values
 *
 * @param str
 */
function stringToHex(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = str.charCodeAt(i) + ((hash << 5) - hash);
  }
  let hex = "#";
  for (let j = 0; j < 3; j++) {
    const value = (hash >> (j * 8)) & 0xff;
    hex += ("00" + value.toString(16)).substr(-2);
  }
  return hex;
}
/**
 * Find the hue of a color given the separate RGB color channels
 *
 * @param rgb
 */
function rgbToHue(rgb) {
  let { r, g, b } = rgb;
  r /= 255;
  g /= 255;
  b /= 255;
  const max = Math.max(r, g, b);
  const min = Math.min(r, g, b);
  const delta = max - min;
  if (max === min) {
    return 0;
  }
  let hue = (max + min) / 2;
  switch (max) {
    case r:
      hue = (g - b) / delta + (g < b ? 6 : 0);
      break;
    case g:
      hue = (b - r) / delta + 2;
      break;
    case b:
      hue = (r - g) / delta + 4;
      break;
  }
  return Math.round(hue * 60);
}
/**
 * For a hex color, find the hue
 *
 * @param hex {string} - form of "#------"
 */
function hexToHue(hex) {
  return rgbToHue((0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_0__.h)(hex));
}

const avatarCss = "@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:inline-block;overflow:hidden;border-radius:50%}:host([scale=s]){block-size:1.5rem;inline-size:1.5rem;font-size:var(--calcite-font-size--3)}:host([scale=m]){block-size:2rem;inline-size:2rem;font-size:var(--calcite-font-size--2)}:host([scale=l]){block-size:2.75rem;inline-size:2.75rem;font-size:var(--calcite-font-size-0)}.icon{display:flex}.background{display:flex;block-size:100%;inline-size:100%;align-items:center;justify-content:center;border-radius:50%}.initials{font-weight:var(--calcite-font-weight-bold);text-transform:uppercase;color:var(--calcite-ui-text-3)}.thumbnail{block-size:100%;inline-size:100%;border-radius:50%}";

const Avatar = class {
  constructor(hostRef) {
    (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.scale = "m";
    this.thumbnail = undefined;
    this.fullName = undefined;
    this.username = undefined;
    this.userId = undefined;
    this.thumbnailFailedToLoad = false;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  render() {
    return this.determineContent();
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  determineContent() {
    if (this.thumbnail && !this.thumbnailFailedToLoad) {
      return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("img", { alt: "", class: "thumbnail", onError: () => (this.thumbnailFailedToLoad = true), src: this.thumbnail }));
    }
    const initials = this.generateInitials();
    const backgroundColor = this.generateFillColor();
    return ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { class: "background", style: { backgroundColor } }, initials ? ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("span", { "aria-hidden": "true", class: "initials" }, initials)) : ((0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.h)("calcite-icon", { class: "icon", icon: "user", scale: this.scale }))));
  }
  /**
   * Generate a valid background color that is consistent and unique to this user
   */
  generateFillColor() {
    const { userId, username, fullName, el } = this;
    const theme = (0,_dom_1997bfaf_js__WEBPACK_IMPORTED_MODULE_2__.e)(el);
    const id = userId && `#${userId.substr(userId.length - 6)}`;
    const name = username || fullName || "";
    const hex = id && (0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_0__.i)(id) ? id : stringToHex(name);
    // if there is not unique information, or an invalid hex is produced, return a default
    if ((!userId && !name) || !(0,_utils_a71d8ee9_js__WEBPACK_IMPORTED_MODULE_0__.i)(hex)) {
      return `var(--calcite-ui-foreground-2)`;
    }
    const hue = hexToHue(hex);
    const l = theme === "dark" ? 20 : 90;
    return `hsl(${hue}, 60%, ${l}%)`;
  }
  /**
   * Use fullname or username to generate initials
   */
  generateInitials() {
    const { fullName, username } = this;
    if (fullName) {
      return fullName
        .trim()
        .split(" ")
        .map((name) => name.substring(0, 1))
        .join("");
    }
    else if (username) {
      return username.substring(0, 2);
    }
    return false;
  }
  get el() { return (0,_index_4e647411_js__WEBPACK_IMPORTED_MODULE_1__.g)(this); }
};
Avatar.style = avatarCss;



//# sourceMappingURL=calcite-avatar.entry.js.map

/***/ }),

/***/ "./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./extensions/widgets/ba-infographic/node_modules/@arcgis/business-analyst-components/dist/stencil-components/dist/esm/utils-a71d8ee9.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSSColorMode),
/* harmony export */   a: () => (/* binding */ isLonghandHex),
/* harmony export */   b: () => (/* binding */ hexChar),
/* harmony export */   c: () => (/* binding */ colorEqual),
/* harmony export */   h: () => (/* binding */ hexToRGB),
/* harmony export */   i: () => (/* binding */ isValidHex),
/* harmony export */   n: () => (/* binding */ normalizeHex),
/* harmony export */   p: () => (/* binding */ parseMode),
/* harmony export */   r: () => (/* binding */ rgbToHex)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.5
 */
function rgbToHex(color) {
  const { r, g, b } = color;
  return `#${r.toString(16).padStart(2, "0")}${g.toString(16).padStart(2, "0")}${b
    .toString(16)
    .padStart(2, "0")}`.toLowerCase();
}
const hexChar = /^[0-9A-F]$/i;
const shortHandHex = /^#[0-9A-F]{3}$/i;
const longhandHex = /^#[0-9A-F]{6}$/i;
function isValidHex(hex) {
  return isShorthandHex(hex) || isLonghandHex(hex);
}
function isShorthandHex(hex) {
  return hex && hex.length === 4 && shortHandHex.test(hex);
}
function isLonghandHex(hex) {
  return hex && hex.length === 7 && longhandHex.test(hex);
}
function normalizeHex(hex) {
  hex = hex.toLowerCase();
  if (!hex.startsWith("#")) {
    hex = `#${hex}`;
  }
  if (isShorthandHex(hex)) {
    return rgbToHex(hexToRGB(hex));
  }
  return hex;
}
function hexToRGB(hex) {
  if (!isValidHex(hex)) {
    return null;
  }
  hex = hex.replace("#", "");
  if (hex.length === 3) {
    const [first, second, third] = hex.split("");
    const r = parseInt(`${first}${first}`, 16);
    const g = parseInt(`${second}${second}`, 16);
    const b = parseInt(`${third}${third}`, 16);
    return { r, g, b };
  }
  const r = parseInt(hex.slice(0, 2), 16);
  const g = parseInt(hex.slice(2, 4), 16);
  const b = parseInt(hex.slice(4, 6), 16);
  return { r, g, b };
}
// these utils allow users to pass enum values as strings without having to access the enum
// based on the approach suggested by https://github.com/microsoft/TypeScript/issues/17690#issuecomment-321365759,
const enumify = (x) => x;
const CSSColorMode = enumify({
  HEX: "hex",
  HEXA: "hexa",
  RGB_CSS: "rgb-css",
  RGBA_CSS: "rgba-css",
  HSL_CSS: "hsl-css",
  HSLA_CSS: "hsla-css"
});
const ObjectColorMode = enumify({
  RGB: "rgb",
  RGBA: "rgba",
  HSL: "hsl",
  HSLA: "hsla",
  HSV: "hsv",
  HSVA: "hsva"
});
function parseMode(colorValue) {
  if (typeof colorValue === "string") {
    if (colorValue.startsWith("#")) {
      const { length } = colorValue;
      if (length === 4 || length === 7) {
        return CSSColorMode.HEX;
      }
      if (length === 5 || length === 9) {
        return CSSColorMode.HEXA;
      }
    }
    if (colorValue.startsWith("rgba(")) {
      return CSSColorMode.RGBA_CSS;
    }
    if (colorValue.startsWith("rgb(")) {
      return CSSColorMode.RGB_CSS;
    }
    if (colorValue.startsWith("hsl(")) {
      return CSSColorMode.HSL_CSS;
    }
    if (colorValue.startsWith("hsla(")) {
      return CSSColorMode.HSLA_CSS;
    }
  }
  if (typeof colorValue === "object") {
    if (hasChannels(colorValue, "r", "g", "b")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.RGBA : ObjectColorMode.RGB;
    }
    if (hasChannels(colorValue, "h", "s", "l")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSLA : ObjectColorMode.HSL;
    }
    if (hasChannels(colorValue, "h", "s", "v")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSVA : ObjectColorMode.HSV;
    }
  }
  return null;
}
function hasChannels(colorObject, ...channels) {
  return channels.every((channel) => channel && colorObject && `${channel}` in colorObject);
}
function colorEqual(value1, value2) {
  return value1?.rgbNumber() === value2?.rgbNumber();
}



//# sourceMappingURL=utils-a71d8ee9.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYmEtaW5mb2dyYXBoaWNfbm9kZV9tb2R1bGVzX2FyY2dpc19idXNpbmVzcy1hbmFseXN0LWNvbXBvbmVudHNfZGlzdF9zdGVuY2ktY2Q2YzI3LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Y7QUFDM0I7QUFDZ0I7QUFDcEM7QUFDTDtBQUNLOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsVUFBVTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxrQkFBa0IscURBQVE7QUFDMUI7O0FBRUEsaUNBQWlDLEdBQUcsVUFBVSxLQUFLLFdBQVcsbUJBQW1CLEdBQUcsVUFBVSxrQ0FBa0MsS0FBSyxVQUFVLGdDQUFnQyxpQkFBaUIsR0FBRyxVQUFVLGlDQUFpQyxLQUFLLFVBQVUsZ0NBQWdDLG9CQUFvQixHQUFHLFVBQVUsaUNBQWlDLEtBQUssVUFBVSw0QkFBNEIsTUFBTSxpRkFBaUYscUVBQXFFLCtGQUErRixpR0FBaUcsK0ZBQStGLGlCQUFpQixVQUFVLHlCQUF5QixtREFBbUQscUJBQXFCLGtCQUFrQiwwQkFBMEIsdUJBQXVCLHdCQUF3QixxQkFBcUIsMkJBQTJCLHdCQUF3Qix3Q0FBd0MsTUFBTSxzQ0FBc0MsTUFBTSxpRUFBaUUsa0NBQWtDLGdCQUFnQixhQUFhLE1BQU0scUJBQXFCLGdCQUFnQixrQkFBa0IsaUJBQWlCLGtCQUFrQixtQkFBbUIsc0NBQXNDLGlCQUFpQixnQkFBZ0IsaUJBQWlCLHNDQUFzQyxpQkFBaUIsbUJBQW1CLG9CQUFvQixxQ0FBcUMsTUFBTSxhQUFhLFlBQVksYUFBYSxnQkFBZ0IsaUJBQWlCLG1CQUFtQix1QkFBdUIsa0JBQWtCLFVBQVUsNENBQTRDLHlCQUF5QiwrQkFBK0IsV0FBVyxnQkFBZ0IsaUJBQWlCLGtCQUFrQjs7QUFFajhEO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscURBQUMsVUFBVSxzR0FBc0c7QUFDL0g7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBQyxXQUFXLDhCQUE4QixtQkFBbUIsY0FBYyxxREFBQyxXQUFXLDBDQUEwQyxnQkFBZ0IscURBQUMsbUJBQW1CLGdEQUFnRDtBQUNqTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQ0FBaUM7QUFDN0Msa0JBQWtCLG1EQUFXO0FBQzdCLDZCQUE2QixpQ0FBaUM7QUFDOUQ7QUFDQSxzQkFBc0IscURBQVU7QUFDaEM7QUFDQSwrQkFBK0IscURBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsSUFBSSxTQUFTLEVBQUU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscUJBQXFCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTyxxREFBVTtBQUM5QjtBQUNBOztBQUVvQzs7QUFFcEM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxVQUFVO0FBQ3BCLGFBQWEsZ0NBQWdDLEVBQUUsZ0NBQWdDLEVBQUU7QUFDakY7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGlDQUFpQyxFQUFFO0FBQ25DLGdDQUFnQyxFQUFFO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsSUFBSTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixNQUFNLEVBQUUsTUFBTTtBQUN4QywwQkFBMEIsT0FBTyxFQUFFLE9BQU87QUFDMUMsMEJBQTBCLE1BQU0sRUFBRSxNQUFNO0FBQ3hDLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxRQUFRO0FBQzFFO0FBQ0E7QUFDQTtBQUNBOztBQUVrSzs7QUFFbEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS9jYWxjaXRlLWF2YXRhci5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2JhLWluZm9ncmFwaGljL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2J1c2luZXNzLWFuYWx5c3QtY29tcG9uZW50cy9kaXN0L3N0ZW5jaWwtY29tcG9uZW50cy9kaXN0L2VzbS91dGlscy1hNzFkOGVlOS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGgsIGcgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtNGU2NDc0MTEuanMnO1xuaW1wb3J0IHsgZSBhcyBnZXRNb2RlTmFtZSB9IGZyb20gJy4vZG9tLTE5OTdiZmFmLmpzJztcbmltcG9ydCB7IGggYXMgaGV4VG9SR0IsIGkgYXMgaXNWYWxpZEhleCB9IGZyb20gJy4vdXRpbHMtYTcxZDhlZTkuanMnO1xuaW1wb3J0ICcuL2luZGV4LmVzbS02N2YwZjI1YS5qcyc7XG5pbXBvcnQgJy4vZ3VpZC04OGEzNzI5Zi5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLTQ4NDM2ZWVhLmpzJztcblxuLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0byBhIHZhbGlkIGhleCBieSBoYXNoaW5nIGl0cyBjb250ZW50c1xuICogYW5kIHVzaW5nIHRoZSBoYXNoIGFzIGEgc2VlZCBmb3IgdGhyZWUgZGlzdGluY3QgY29sb3IgdmFsdWVzXG4gKlxuICogQHBhcmFtIHN0clxuICovXG5mdW5jdGlvbiBzdHJpbmdUb0hleChzdHIpIHtcbiAgbGV0IGhhc2ggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSBzdHIuY2hhckNvZGVBdChpKSArICgoaGFzaCA8PCA1KSAtIGhhc2gpO1xuICB9XG4gIGxldCBoZXggPSBcIiNcIjtcbiAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IChoYXNoID4+IChqICogOCkpICYgMHhmZjtcbiAgICBoZXggKz0gKFwiMDBcIiArIHZhbHVlLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC0yKTtcbiAgfVxuICByZXR1cm4gaGV4O1xufVxuLyoqXG4gKiBGaW5kIHRoZSBodWUgb2YgYSBjb2xvciBnaXZlbiB0aGUgc2VwYXJhdGUgUkdCIGNvbG9yIGNoYW5uZWxzXG4gKlxuICogQHBhcmFtIHJnYlxuICovXG5mdW5jdGlvbiByZ2JUb0h1ZShyZ2IpIHtcbiAgbGV0IHsgciwgZywgYiB9ID0gcmdiO1xuICByIC89IDI1NTtcbiAgZyAvPSAyNTU7XG4gIGIgLz0gMjU1O1xuICBjb25zdCBtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgY29uc3QgbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gIGNvbnN0IGRlbHRhID0gbWF4IC0gbWluO1xuICBpZiAobWF4ID09PSBtaW4pIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuICBsZXQgaHVlID0gKG1heCArIG1pbikgLyAyO1xuICBzd2l0Y2ggKG1heCkge1xuICAgIGNhc2UgcjpcbiAgICAgIGh1ZSA9IChnIC0gYikgLyBkZWx0YSArIChnIDwgYiA/IDYgOiAwKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgZzpcbiAgICAgIGh1ZSA9IChiIC0gcikgLyBkZWx0YSArIDI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGI6XG4gICAgICBodWUgPSAociAtIGcpIC8gZGVsdGEgKyA0O1xuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIE1hdGgucm91bmQoaHVlICogNjApO1xufVxuLyoqXG4gKiBGb3IgYSBoZXggY29sb3IsIGZpbmQgdGhlIGh1ZVxuICpcbiAqIEBwYXJhbSBoZXgge3N0cmluZ30gLSBmb3JtIG9mIFwiIy0tLS0tLVwiXG4gKi9cbmZ1bmN0aW9uIGhleFRvSHVlKGhleCkge1xuICByZXR1cm4gcmdiVG9IdWUoaGV4VG9SR0IoaGV4KSk7XG59XG5cbmNvbnN0IGF2YXRhckNzcyA9IFwiQGtleWZyYW1lcyBpbnswJXtvcGFjaXR5OjB9MTAwJXtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgaW4tZG93bnswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIC01cHgsIDApfTEwMCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUzRCgwLCAwLCAwKX19QGtleWZyYW1lcyBpbi11cHswJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDVweCwgMCl9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZTNEKDAsIDAsIDApfX1Aa2V5ZnJhbWVzIGluLXNjYWxlezAle29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUzRCgwLjk1LCAwLjk1LCAxKX0xMDAle29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUzRCgxLCAxLCAxKX19OnJvb3R7LS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmc6Y2FsYygxNTBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWR1cmF0aW9uLWZhY3Rvcjp2YXIoLS1jYWxjaXRlLWR1cmF0aW9uLWZhY3RvciwgMSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctZmFzdDpjYWxjKDEwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKTstLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW06Y2FsYygyMDBtcyAqIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yKSk7LS1jYWxjaXRlLWludGVybmFsLWFuaW1hdGlvbi10aW1pbmctc2xvdzpjYWxjKDMwMG1zICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1kdXJhdGlvbi1mYWN0b3IpKX0uY2FsY2l0ZS1hbmltYXRle29wYWNpdHk6MDthbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9LmNhbGNpdGUtYW5pbWF0ZV9faW57YW5pbWF0aW9uLW5hbWU6aW59LmNhbGNpdGUtYW5pbWF0ZV9faW4tZG93bnthbmltYXRpb24tbmFtZTppbi1kb3dufS5jYWxjaXRlLWFuaW1hdGVfX2luLXVwe2FuaW1hdGlvbi1uYW1lOmluLXVwfS5jYWxjaXRlLWFuaW1hdGVfX2luLXNjYWxle2FuaW1hdGlvbi1uYW1lOmluLXNjYWxlfUBtZWRpYSAocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKXs6cm9vdHstLWNhbGNpdGUtaW50ZXJuYWwtZHVyYXRpb24tZmFjdG9yOjB9fTpyb290ey0tY2FsY2l0ZS1mbG9hdGluZy11aS10cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyk7LS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXg6NjAwfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9Omhvc3R7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3ZlcmZsb3c6aGlkZGVuO2JvcmRlci1yYWRpdXM6NTAlfTpob3N0KFtzY2FsZT1zXSl7YmxvY2stc2l6ZToxLjVyZW07aW5saW5lLXNpemU6MS41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMyl9Omhvc3QoW3NjYWxlPW1dKXtibG9jay1zaXplOjJyZW07aW5saW5lLXNpemU6MnJlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTIpfTpob3N0KFtzY2FsZT1sXSl7YmxvY2stc2l6ZToyLjc1cmVtO2lubGluZS1zaXplOjIuNzVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApfS5pY29ue2Rpc3BsYXk6ZmxleH0uYmFja2dyb3VuZHtkaXNwbGF5OmZsZXg7YmxvY2stc2l6ZToxMDAlO2lubGluZS1zaXplOjEwMCU7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Ym9yZGVyLXJhZGl1czo1MCV9LmluaXRpYWxze2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtYm9sZCk7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKX0udGh1bWJuYWlse2Jsb2NrLXNpemU6MTAwJTtpbmxpbmUtc2l6ZToxMDAlO2JvcmRlci1yYWRpdXM6NTAlfVwiO1xuXG5jb25zdCBBdmF0YXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnRodW1ibmFpbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZ1bGxOYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudXNlcm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51c2VySWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy50aHVtYm5haWxGYWlsZWRUb0xvYWQgPSBmYWxzZTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5lQ29udGVudCgpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGRldGVybWluZUNvbnRlbnQoKSB7XG4gICAgaWYgKHRoaXMudGh1bWJuYWlsICYmICF0aGlzLnRodW1ibmFpbEZhaWxlZFRvTG9hZCkge1xuICAgICAgcmV0dXJuIChoKFwiaW1nXCIsIHsgYWx0OiBcIlwiLCBjbGFzczogXCJ0aHVtYm5haWxcIiwgb25FcnJvcjogKCkgPT4gKHRoaXMudGh1bWJuYWlsRmFpbGVkVG9Mb2FkID0gdHJ1ZSksIHNyYzogdGhpcy50aHVtYm5haWwgfSkpO1xuICAgIH1cbiAgICBjb25zdCBpbml0aWFscyA9IHRoaXMuZ2VuZXJhdGVJbml0aWFscygpO1xuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHRoaXMuZ2VuZXJhdGVGaWxsQ29sb3IoKTtcbiAgICByZXR1cm4gKGgoXCJzcGFuXCIsIHsgY2xhc3M6IFwiYmFja2dyb3VuZFwiLCBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3IgfSB9LCBpbml0aWFscyA/IChoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsIGNsYXNzOiBcImluaXRpYWxzXCIgfSwgaW5pdGlhbHMpKSA6IChoKFwiY2FsY2l0ZS1pY29uXCIsIHsgY2xhc3M6IFwiaWNvblwiLCBpY29uOiBcInVzZXJcIiwgc2NhbGU6IHRoaXMuc2NhbGUgfSkpKSk7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgdmFsaWQgYmFja2dyb3VuZCBjb2xvciB0aGF0IGlzIGNvbnNpc3RlbnQgYW5kIHVuaXF1ZSB0byB0aGlzIHVzZXJcbiAgICovXG4gIGdlbmVyYXRlRmlsbENvbG9yKCkge1xuICAgIGNvbnN0IHsgdXNlcklkLCB1c2VybmFtZSwgZnVsbE5hbWUsIGVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IHRoZW1lID0gZ2V0TW9kZU5hbWUoZWwpO1xuICAgIGNvbnN0IGlkID0gdXNlcklkICYmIGAjJHt1c2VySWQuc3Vic3RyKHVzZXJJZC5sZW5ndGggLSA2KX1gO1xuICAgIGNvbnN0IG5hbWUgPSB1c2VybmFtZSB8fCBmdWxsTmFtZSB8fCBcIlwiO1xuICAgIGNvbnN0IGhleCA9IGlkICYmIGlzVmFsaWRIZXgoaWQpID8gaWQgOiBzdHJpbmdUb0hleChuYW1lKTtcbiAgICAvLyBpZiB0aGVyZSBpcyBub3QgdW5pcXVlIGluZm9ybWF0aW9uLCBvciBhbiBpbnZhbGlkIGhleCBpcyBwcm9kdWNlZCwgcmV0dXJuIGEgZGVmYXVsdFxuICAgIGlmICgoIXVzZXJJZCAmJiAhbmFtZSkgfHwgIWlzVmFsaWRIZXgoaGV4KSkge1xuICAgICAgcmV0dXJuIGB2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMilgO1xuICAgIH1cbiAgICBjb25zdCBodWUgPSBoZXhUb0h1ZShoZXgpO1xuICAgIGNvbnN0IGwgPSB0aGVtZSA9PT0gXCJkYXJrXCIgPyAyMCA6IDkwO1xuICAgIHJldHVybiBgaHNsKCR7aHVlfSwgNjAlLCAke2x9JSlgO1xuICB9XG4gIC8qKlxuICAgKiBVc2UgZnVsbG5hbWUgb3IgdXNlcm5hbWUgdG8gZ2VuZXJhdGUgaW5pdGlhbHNcbiAgICovXG4gIGdlbmVyYXRlSW5pdGlhbHMoKSB7XG4gICAgY29uc3QgeyBmdWxsTmFtZSwgdXNlcm5hbWUgfSA9IHRoaXM7XG4gICAgaWYgKGZ1bGxOYW1lKSB7XG4gICAgICByZXR1cm4gZnVsbE5hbWVcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgIC5tYXAoKG5hbWUpID0+IG5hbWUuc3Vic3RyaW5nKDAsIDEpKVxuICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodXNlcm5hbWUpIHtcbiAgICAgIHJldHVybiB1c2VybmFtZS5zdWJzdHJpbmcoMCwgMik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xuQXZhdGFyLnN0eWxlID0gYXZhdGFyQ3NzO1xuXG5leHBvcnQgeyBBdmF0YXIgYXMgY2FsY2l0ZV9hdmF0YXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsY2l0ZS1hdmF0YXIuZW50cnkuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtY29tcG9uZW50cy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuMC41XG4gKi9cbmZ1bmN0aW9uIHJnYlRvSGV4KGNvbG9yKSB7XG4gIGNvbnN0IHsgciwgZywgYiB9ID0gY29sb3I7XG4gIHJldHVybiBgIyR7ci50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpfSR7Zy50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpfSR7YlxuICAgIC50b1N0cmluZygxNilcbiAgICAucGFkU3RhcnQoMiwgXCIwXCIpfWAudG9Mb3dlckNhc2UoKTtcbn1cbmNvbnN0IGhleENoYXIgPSAvXlswLTlBLUZdJC9pO1xuY29uc3Qgc2hvcnRIYW5kSGV4ID0gL14jWzAtOUEtRl17M30kL2k7XG5jb25zdCBsb25naGFuZEhleCA9IC9eI1swLTlBLUZdezZ9JC9pO1xuZnVuY3Rpb24gaXNWYWxpZEhleChoZXgpIHtcbiAgcmV0dXJuIGlzU2hvcnRoYW5kSGV4KGhleCkgfHwgaXNMb25naGFuZEhleChoZXgpO1xufVxuZnVuY3Rpb24gaXNTaG9ydGhhbmRIZXgoaGV4KSB7XG4gIHJldHVybiBoZXggJiYgaGV4Lmxlbmd0aCA9PT0gNCAmJiBzaG9ydEhhbmRIZXgudGVzdChoZXgpO1xufVxuZnVuY3Rpb24gaXNMb25naGFuZEhleChoZXgpIHtcbiAgcmV0dXJuIGhleCAmJiBoZXgubGVuZ3RoID09PSA3ICYmIGxvbmdoYW5kSGV4LnRlc3QoaGV4KTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhleChoZXgpIHtcbiAgaGV4ID0gaGV4LnRvTG93ZXJDYXNlKCk7XG4gIGlmICghaGV4LnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgaGV4ID0gYCMke2hleH1gO1xuICB9XG4gIGlmIChpc1Nob3J0aGFuZEhleChoZXgpKSB7XG4gICAgcmV0dXJuIHJnYlRvSGV4KGhleFRvUkdCKGhleCkpO1xuICB9XG4gIHJldHVybiBoZXg7XG59XG5mdW5jdGlvbiBoZXhUb1JHQihoZXgpIHtcbiAgaWYgKCFpc1ZhbGlkSGV4KGhleCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBoZXggPSBoZXgucmVwbGFjZShcIiNcIiwgXCJcIik7XG4gIGlmIChoZXgubGVuZ3RoID09PSAzKSB7XG4gICAgY29uc3QgW2ZpcnN0LCBzZWNvbmQsIHRoaXJkXSA9IGhleC5zcGxpdChcIlwiKTtcbiAgICBjb25zdCByID0gcGFyc2VJbnQoYCR7Zmlyc3R9JHtmaXJzdH1gLCAxNik7XG4gICAgY29uc3QgZyA9IHBhcnNlSW50KGAke3NlY29uZH0ke3NlY29uZH1gLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KGAke3RoaXJkfSR7dGhpcmR9YCwgMTYpO1xuICAgIHJldHVybiB7IHIsIGcsIGIgfTtcbiAgfVxuICBjb25zdCByID0gcGFyc2VJbnQoaGV4LnNsaWNlKDAsIDIpLCAxNik7XG4gIGNvbnN0IGcgPSBwYXJzZUludChoZXguc2xpY2UoMiwgNCksIDE2KTtcbiAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zbGljZSg0LCA2KSwgMTYpO1xuICByZXR1cm4geyByLCBnLCBiIH07XG59XG4vLyB0aGVzZSB1dGlscyBhbGxvdyB1c2VycyB0byBwYXNzIGVudW0gdmFsdWVzIGFzIHN0cmluZ3Mgd2l0aG91dCBoYXZpbmcgdG8gYWNjZXNzIHRoZSBlbnVtXG4vLyBiYXNlZCBvbiB0aGUgYXBwcm9hY2ggc3VnZ2VzdGVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTc2OTAjaXNzdWVjb21tZW50LTMyMTM2NTc1OSxcbmNvbnN0IGVudW1pZnkgPSAoeCkgPT4geDtcbmNvbnN0IENTU0NvbG9yTW9kZSA9IGVudW1pZnkoe1xuICBIRVg6IFwiaGV4XCIsXG4gIEhFWEE6IFwiaGV4YVwiLFxuICBSR0JfQ1NTOiBcInJnYi1jc3NcIixcbiAgUkdCQV9DU1M6IFwicmdiYS1jc3NcIixcbiAgSFNMX0NTUzogXCJoc2wtY3NzXCIsXG4gIEhTTEFfQ1NTOiBcImhzbGEtY3NzXCJcbn0pO1xuY29uc3QgT2JqZWN0Q29sb3JNb2RlID0gZW51bWlmeSh7XG4gIFJHQjogXCJyZ2JcIixcbiAgUkdCQTogXCJyZ2JhXCIsXG4gIEhTTDogXCJoc2xcIixcbiAgSFNMQTogXCJoc2xhXCIsXG4gIEhTVjogXCJoc3ZcIixcbiAgSFNWQTogXCJoc3ZhXCJcbn0pO1xuZnVuY3Rpb24gcGFyc2VNb2RlKGNvbG9yVmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBjb2xvclZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBjb2xvclZhbHVlO1xuICAgICAgaWYgKGxlbmd0aCA9PT0gNCB8fCBsZW5ndGggPT09IDcpIHtcbiAgICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5IRVg7XG4gICAgICB9XG4gICAgICBpZiAobGVuZ3RoID09PSA1IHx8IGxlbmd0aCA9PT0gOSkge1xuICAgICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLkhFWEE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJyZ2JhKFwiKSkge1xuICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5SR0JBX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcInJnYihcIikpIHtcbiAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuUkdCX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcImhzbChcIikpIHtcbiAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuSFNMX0NTUztcbiAgICB9XG4gICAgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aChcImhzbGEoXCIpKSB7XG4gICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLkhTTEFfQ1NTO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIGNvbG9yVmFsdWUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBpZiAoaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJyXCIsIFwiZ1wiLCBcImJcIikpIHtcbiAgICAgIHJldHVybiBoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImFcIikgPyBPYmplY3RDb2xvck1vZGUuUkdCQSA6IE9iamVjdENvbG9yTW9kZS5SR0I7XG4gICAgfVxuICAgIGlmIChoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImhcIiwgXCJzXCIsIFwibFwiKSkge1xuICAgICAgcmV0dXJuIGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiYVwiKSA/IE9iamVjdENvbG9yTW9kZS5IU0xBIDogT2JqZWN0Q29sb3JNb2RlLkhTTDtcbiAgICB9XG4gICAgaWYgKGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiaFwiLCBcInNcIiwgXCJ2XCIpKSB7XG4gICAgICByZXR1cm4gaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJhXCIpID8gT2JqZWN0Q29sb3JNb2RlLkhTVkEgOiBPYmplY3RDb2xvck1vZGUuSFNWO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGhhc0NoYW5uZWxzKGNvbG9yT2JqZWN0LCAuLi5jaGFubmVscykge1xuICByZXR1cm4gY2hhbm5lbHMuZXZlcnkoKGNoYW5uZWwpID0+IGNoYW5uZWwgJiYgY29sb3JPYmplY3QgJiYgYCR7Y2hhbm5lbH1gIGluIGNvbG9yT2JqZWN0KTtcbn1cbmZ1bmN0aW9uIGNvbG9yRXF1YWwodmFsdWUxLCB2YWx1ZTIpIHtcbiAgcmV0dXJuIHZhbHVlMT8ucmdiTnVtYmVyKCkgPT09IHZhbHVlMj8ucmdiTnVtYmVyKCk7XG59XG5cbmV4cG9ydCB7IENTU0NvbG9yTW9kZSBhcyBDLCBpc0xvbmdoYW5kSGV4IGFzIGEsIGhleENoYXIgYXMgYiwgY29sb3JFcXVhbCBhcyBjLCBoZXhUb1JHQiBhcyBoLCBpc1ZhbGlkSGV4IGFzIGksIG5vcm1hbGl6ZUhleCBhcyBuLCBwYXJzZU1vZGUgYXMgcCwgcmdiVG9IZXggYXMgciB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy1hNzFkOGVlOS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=