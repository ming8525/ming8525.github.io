"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-782d37"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js":
/*!**************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js ***!
  \**************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ addItemState),
/* harmony export */   b: () => (/* binding */ addItemUrlState),
/* harmony export */   c: () => (/* binding */ addItemRequestState),
/* harmony export */   d: () => (/* binding */ addItemStore)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const addItemStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    typeKeywords: [],
    customParameters: [],
    analyzedLocationTypes: [],
    allowStoredAuth: true,
    isSecured: null,
    checkAuth: false
});
// Entire add item state object
const addItemState = addItemStore.state;
// Subsets of add item state
const addItemRequestState = addItemStore.state;
const addItemUrlState = addItemStore.state;



//# sourceMappingURL=add-item-dbbe2f57.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-folder.entry.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/arcgis-new-item-pages-data-store-select-folder.entry.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   arcgis_new_item_pages_data_store_select_folder: () => (/* binding */ ArcgisNewItemPagesDataStoreSelectFolder)
/* harmony export */ });
/* harmony import */ var _index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-e3bf7da7.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-e3bf7da7.js");
/* harmony import */ var _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./add-item-dbbe2f57.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/add-item-dbbe2f57.js");
/* harmony import */ var _data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-store-8e83fb7a.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/data-store-8e83fb7a.js");
/* harmony import */ var _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-bca7bcd1.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js");
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/* harmony import */ var _portal_d518b571_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./portal-d518b571.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/portal-d518b571.js");
/* harmony import */ var _loadModules_b4ac1247_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadModules-b4ac1247.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/loadModules-b4ac1247.js");
/* harmony import */ var _config_75adf962_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./config-75adf962.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/config-75adf962.js");
/* harmony import */ var _url_4c3ae54c_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./url-4c3ae54c.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/url-4c3ae54c.js");
/* harmony import */ var _functional_44de8fcf_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functional-44de8fcf.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/functional-44de8fcf.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */











const arcgisNewItemPagesDataStoreSelectFolderCss = ".input-label{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.hostname-info{font-size:0.75rem}";

const ArcgisNewItemPagesDataStoreSelectFolder = class {
    constructor(hostRef) {
        (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.newItemUpdatePage = (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "newItemUpdatePage", 7);
        this.serverFolderPath = null;
        this.publisherFolderPath = "";
        this.publisherFolderPathIsDriveLetterLocation = false;
        this.publisherFolderPathHostname = "";
        this.newServerFolderPath = "";
        this.nfsHostName = "";
        this.nfsSharePath = "";
        this.error = null;
    }
    async componentWillLoad() {
        this.i18n = _ui_bca7bcd1_js__WEBPACK_IMPORTED_MODULE_3__.u.i18n.dataStoreSelectFolder;
        this.checkIfDriveLetterLocation(_add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.publisherFolderPath || "");
        this.publisherFolderPathHostname = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.publisherFolderPathHostname;
        this.serverFolderPath = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.serverFolderPath || null;
        this.newServerFolderPath = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.newServerFolderPath;
        this.nfsHostName = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsHostName;
        this.nfsSharePath = _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsSharePath;
    }
    checkIfDriveLetterLocation(path) {
        this.publisherFolderPath = path;
        this.publisherFolderPathIsDriveLetterLocation = path.split(":")[0].length === 1;
    }
    validateFolderInputs() {
        if (!this.publisherFolderPath) {
            this.error = "invalidPublisherFolderPath";
            return false;
        }
        if (this.publisherFolderPathIsDriveLetterLocation && !this.publisherFolderPathHostname) {
            this.error = "invalidPublisherHostName";
            return false;
        }
        if (this.serverFolderPath === "newPath" && !this.newServerFolderPath) {
            this.error = "invalidServerFolderPath";
            return false;
        }
        if (this.serverFolderPath === "nfsHostAndPath") {
            if (!this.nfsHostName && !this.nfsSharePath) {
                this.error = "invalidNfsHostAndPath";
                return false;
            }
            if (!this.nfsHostName && this.nfsSharePath) {
                this.error = "invalidNfsHostName";
                return false;
            }
            if (this.nfsHostName && !this.nfsSharePath) {
                this.error = "invalidNfsPath";
                return false;
            }
        }
        return true;
    }
    renderErrorItem() {
        var _a, _b;
        const { i18n, error } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-alert", { heading: (_a = i18n.errors[error]) === null || _a === void 0 ? void 0 : _a.heading, description: (_b = i18n.errors[error]) === null || _b === void 0 ? void 0 : _b.description, active: error !== null, onAlertDismiss: () => {
                this.error = null;
            } }));
    }
    handleNext() {
        if (this.validateFolderInputs()) {
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.publisherFolderPath = this.publisherFolderPath;
            _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.serverFolderPath = this.serverFolderPath;
            if (this.publisherFolderPathIsDriveLetterLocation && this.publisherFolderPathHostname) {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.publisherFolderPathHostname = this.publisherFolderPathHostname;
            }
            else {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.publisherFolderPathHostname = null;
            }
            if (this.serverFolderPath === "newPath" && this.newServerFolderPath) {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.newServerFolderPath = this.newServerFolderPath;
            }
            else {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.newServerFolderPath = null;
            }
            if (this.serverFolderPath === "nfsHostAndPath") {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsHostName = this.nfsHostName;
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsSharePath = this.nfsSharePath;
            }
            else {
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsHostName = null;
                _add_item_dbbe2f57_js__WEBPACK_IMPORTED_MODULE_1__.a.nfsSharePath = null;
            }
            this.newItemUpdatePage.emit("dataStoreSelectServerList");
        }
    }
    render() {
        const { i18n, publisherFolderPathIsDriveLetterLocation } = this;
        return ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("arcgis-new-item-description", { header: i18n.heading }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.publisherFolderPath.heading, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { key: "publisher-folder-path", placeholder: i18n.publisherFolderPath.placeholder, value: this.publisherFolderPath, required: true, onCalciteInputChange: (e) => {
                const publisherFolderPath = e.target.value;
                this.checkIfDriveLetterLocation(publisherFolderPath);
            } }))), publisherFolderPathIsDriveLetterLocation && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.publisherFolderPath.hostname, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { key: "publisher-folder-path-hostname", type: "textarea", value: this.publisherFolderPathHostname, onCalciteInputChange: (e) => {
                const hostname = e.target.value;
                this.publisherFolderPathHostname = hostname;
            } }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "hostname-info" }, i18n.publisherFolderPath.hostnameInfo)))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.serverFolderPath.heading)), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select-group", { layout: "vertical", key: "server-folder-path-select" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { class: "tile-select", key: "publisher-folder-path-select", checked: this.serverFolderPath === null, description: i18n.serverFolderPath.sameAsPublisher, name: "same-as-publisher-folder-path", "input-enabled": true, width: "full", type: "radio", value: null, onCalciteTileSelectChange: () => {
                this.serverFolderPath = null;
            } }), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { class: "tile-select", key: "new-server-folder-path-select", checked: this.serverFolderPath === "newPath", description: i18n.serverFolderPath.newPath, name: "new-path", "input-enabled": true, width: "full", type: "radio", value: "newPath", onCalciteTileSelectChange: () => {
                this.serverFolderPath = "newPath";
            } }), (0,_data_store_8e83fb7a_js__WEBPACK_IMPORTED_MODULE_2__.i)() && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-tile-select", { key: "nfs-host-and-path-select", checked: this.serverFolderPath === "nfsHostAndPath", description: i18n.serverFolderPath.nfsHostAndPath.description, name: "nfs-host-and-path", "input-enabled": true, width: "full", type: "radio", value: "nfsHostAndPath", onCalciteTileSelectChange: () => {
                this.serverFolderPath = "nfsHostAndPath";
            } }))), this.serverFolderPath === "newPath" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { key: "new-server-folder-path", placeholder: i18n.serverFolderPath.placeholder, value: this.newServerFolderPath, onCalciteInputChange: (e) => {
                const newServerFolderPath = e.target.value;
                this.newServerFolderPath = newServerFolderPath;
            } }))), this.serverFolderPath === "nfsHostAndPath" && ((0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", null, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.serverFolderPath.nfsHostAndPath.hostname, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { key: "nfs-hostname", type: "textarea", value: this.nfsHostName, onCalciteInputChange: (e) => {
                const hostname = e.target.value;
                this.nfsHostName = hostname;
            } }))), (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "input-label" }, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", null, i18n.serverFolderPath.nfsHostAndPath.sharePath, (0,_index_e3bf7da7_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-input", { key: "nfs-sharepath", type: "textarea", value: this.nfsSharePath, onCalciteInputChange: (e) => {
                const sharePath = e.target.value;
                this.nfsSharePath = sharePath;
            } }))))), this.renderErrorItem()));
    }
};
ArcgisNewItemPagesDataStoreSelectFolder.style = arcgisNewItemPagesDataStoreSelectFolderCss;



//# sourceMappingURL=arcgis-new-item-pages-data-store-select-folder.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js":
/*!********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/ui-bca7bcd1.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ uiStore),
/* harmony export */   u: () => (/* binding */ uiStoreState)
/* harmony export */ });
/* harmony import */ var _index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-05956cab.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/app-components/dist/esm/index-05956cab.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * v4.0.58
 */


const uiStore = (0,_index_05956cab_js__WEBPACK_IMPORTED_MODULE_0__.c)({
    nextText: "next",
    workflow: "content",
    scale: "m",
    disableScroll: false,
    featureFlags: {}
});
const uiStoreState = uiStore.state;



//# sourceMappingURL=ui-bca7bcd1.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXBwLWNvbXBvbmVudHNfZGlzdF9lc21fYXJjZ2lzLW5ldy1pdGUtNzgyZDM3LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDdUQ7O0FBRXZELHFCQUFxQixxREFBVztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0c7O0FBRWhHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDaUY7QUFDdEI7QUFDb0I7QUFDMUI7QUFDeEI7QUFDQztBQUNLO0FBQ0w7QUFDSDtBQUNPOztBQUVsQyxpRUFBaUUsbUJBQW1CLGFBQWEsdUJBQXVCLGVBQWUsa0JBQWtCOztBQUV6SjtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEIsaUNBQWlDLHFEQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhDQUFZO0FBQ2hDLHdDQUF3QyxvREFBWTtBQUNwRCwyQ0FBMkMsb0RBQVk7QUFDdkQsZ0NBQWdDLG9EQUFZO0FBQzVDLG1DQUFtQyxvREFBWTtBQUMvQywyQkFBMkIsb0RBQVk7QUFDdkMsNEJBQTRCLG9EQUFZO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQixxREFBQyw0QkFBNEI7QUFDN0M7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBWTtBQUN4QixZQUFZLG9EQUFZO0FBQ3hCO0FBQ0EsZ0JBQWdCLG9EQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVk7QUFDNUI7QUFDQTtBQUNBLGdCQUFnQixvREFBWTtBQUM1QjtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVk7QUFDNUIsZ0JBQWdCLG9EQUFZO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVk7QUFDNUIsZ0JBQWdCLG9EQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaURBQWlEO0FBQ2pFLGdCQUFnQixxREFBQyxjQUFjLHFEQUFDLGtDQUFrQyxzQkFBc0IsR0FBRyxxREFBQyxVQUFVLHNCQUFzQixFQUFFLHFEQUFDLDBEQUEwRCxxREFBQyxvQkFBb0I7QUFDOU07QUFDQTtBQUNBLGVBQWUsa0RBQWtELHFEQUFDLFVBQVUsc0JBQXNCLEVBQUUscURBQUMsMkRBQTJELHFEQUFDLG9CQUFvQjtBQUNyTDtBQUNBO0FBQ0EsZUFBZSxHQUFHLHFEQUFDLFVBQVUsd0JBQXdCLDZDQUE2QyxxREFBQyxVQUFVLHNCQUFzQixFQUFFLHFEQUFDLHlEQUF5RCxxREFBQyxnQ0FBZ0Msc0RBQXNELEVBQUUscURBQUMsMEJBQTBCO0FBQ25UO0FBQ0EsZUFBZSxHQUFHLHFEQUFDLDBCQUEwQjtBQUM3QztBQUNBLGVBQWUsR0FBRywwREFBOEIsT0FBTyxxREFBQywwQkFBMEI7QUFDbEY7QUFDQSxlQUFlLDZDQUE2QyxxREFBQyxVQUFVLHNCQUFzQixFQUFFLHFEQUFDLG9CQUFvQjtBQUNwSDtBQUNBO0FBQ0EsZUFBZSxvREFBb0QscURBQUMsY0FBYyxxREFBQyxVQUFVLHNCQUFzQixFQUFFLHFEQUFDLHVFQUF1RSxxREFBQyxvQkFBb0I7QUFDbE47QUFDQTtBQUNBLGVBQWUsS0FBSyxxREFBQyxVQUFVLHNCQUFzQixFQUFFLHFEQUFDLHdFQUF3RSxxREFBQyxvQkFBb0I7QUFDcko7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRXFHOztBQUVyRzs7Ozs7Ozs7Ozs7Ozs7OztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUN1RDs7QUFFdkQsZ0JBQWdCLHFEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRTJDOztBQUUzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FkZC1pdGVtLWRiYmUyZjU3LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FwcC1jb21wb25lbnRzL2Rpc3QvZXNtL2FyY2dpcy1uZXctaXRlbS1wYWdlcy1kYXRhLXN0b3JlLXNlbGVjdC1mb2xkZXIuZW50cnkuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXBwLWNvbXBvbmVudHMvZGlzdC9lc20vdWktYmNhN2JjZDEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogdjQuMC41OFxuICovXG5pbXBvcnQgeyBjIGFzIGNyZWF0ZVN0b3JlIH0gZnJvbSAnLi9pbmRleC0wNTk1NmNhYi5qcyc7XG5cbmNvbnN0IGFkZEl0ZW1TdG9yZSA9IGNyZWF0ZVN0b3JlKHtcbiAgICB0eXBlS2V5d29yZHM6IFtdLFxuICAgIGN1c3RvbVBhcmFtZXRlcnM6IFtdLFxuICAgIGFuYWx5emVkTG9jYXRpb25UeXBlczogW10sXG4gICAgYWxsb3dTdG9yZWRBdXRoOiB0cnVlLFxuICAgIGlzU2VjdXJlZDogbnVsbCxcbiAgICBjaGVja0F1dGg6IGZhbHNlXG59KTtcbi8vIEVudGlyZSBhZGQgaXRlbSBzdGF0ZSBvYmplY3RcbmNvbnN0IGFkZEl0ZW1TdGF0ZSA9IGFkZEl0ZW1TdG9yZS5zdGF0ZTtcbi8vIFN1YnNldHMgb2YgYWRkIGl0ZW0gc3RhdGVcbmNvbnN0IGFkZEl0ZW1SZXF1ZXN0U3RhdGUgPSBhZGRJdGVtU3RvcmUuc3RhdGU7XG5jb25zdCBhZGRJdGVtVXJsU3RhdGUgPSBhZGRJdGVtU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IGFkZEl0ZW1TdGF0ZSBhcyBhLCBhZGRJdGVtVXJsU3RhdGUgYXMgYiwgYWRkSXRlbVJlcXVlc3RTdGF0ZSBhcyBjLCBhZGRJdGVtU3RvcmUgYXMgZCB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGQtaXRlbS1kYmJlMmY1Ny5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgYyBhcyBjcmVhdGVFdmVudCwgaCB9IGZyb20gJy4vaW5kZXgtZTNiZjdkYTcuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRJdGVtU3RhdGUgfSBmcm9tICcuL2FkZC1pdGVtLWRiYmUyZjU3LmpzJztcbmltcG9ydCB7IGkgYXMgaXNBcmNHSVNFbnRlcnByaXNlT25LdWJlcm5ldGVzIH0gZnJvbSAnLi9kYXRhLXN0b3JlLThlODNmYjdhLmpzJztcbmltcG9ydCB7IHUgYXMgdWlTdG9yZVN0YXRlIH0gZnJvbSAnLi91aS1iY2E3YmNkMS5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtMDU5NTZjYWIuanMnO1xuaW1wb3J0ICcuL3BvcnRhbC1kNTE4YjU3MS5qcyc7XG5pbXBvcnQgJy4vbG9hZE1vZHVsZXMtYjRhYzEyNDcuanMnO1xuaW1wb3J0ICcuL2NvbmZpZy03NWFkZjk2Mi5qcyc7XG5pbXBvcnQgJy4vdXJsLTRjM2FlNTRjLmpzJztcbmltcG9ydCAnLi9mdW5jdGlvbmFsLTQ0ZGU4ZmNmLmpzJztcblxuY29uc3QgYXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0Rm9sZGVyQ3NzID0gXCIuaW5wdXQtbGFiZWx7bWFyZ2luLXRvcDoxLjI1cmVtfS50aWxlLXNlbGVjdHttYXJnaW4tYm90dG9tOjAuMTI1cmVtfS5ob3N0bmFtZS1pbmZve2ZvbnQtc2l6ZTowLjc1cmVtfVwiO1xuXG5jb25zdCBBcmNnaXNOZXdJdGVtUGFnZXNEYXRhU3RvcmVTZWxlY3RGb2xkZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLm5ld0l0ZW1VcGRhdGVQYWdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJuZXdJdGVtVXBkYXRlUGFnZVwiLCA3KTtcbiAgICAgICAgdGhpcy5zZXJ2ZXJGb2xkZXJQYXRoID0gbnVsbDtcbiAgICAgICAgdGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoID0gXCJcIjtcbiAgICAgICAgdGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoSXNEcml2ZUxldHRlckxvY2F0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lID0gXCJcIjtcbiAgICAgICAgdGhpcy5uZXdTZXJ2ZXJGb2xkZXJQYXRoID0gXCJcIjtcbiAgICAgICAgdGhpcy5uZnNIb3N0TmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMubmZzU2hhcmVQYXRoID0gXCJcIjtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLmkxOG4gPSB1aVN0b3JlU3RhdGUuaTE4bi5kYXRhU3RvcmVTZWxlY3RGb2xkZXI7XG4gICAgICAgIHRoaXMuY2hlY2tJZkRyaXZlTGV0dGVyTG9jYXRpb24oYWRkSXRlbVN0YXRlLnB1Ymxpc2hlckZvbGRlclBhdGggfHwgXCJcIik7XG4gICAgICAgIHRoaXMucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lID0gYWRkSXRlbVN0YXRlLnB1Ymxpc2hlckZvbGRlclBhdGhIb3N0bmFtZTtcbiAgICAgICAgdGhpcy5zZXJ2ZXJGb2xkZXJQYXRoID0gYWRkSXRlbVN0YXRlLnNlcnZlckZvbGRlclBhdGggfHwgbnVsbDtcbiAgICAgICAgdGhpcy5uZXdTZXJ2ZXJGb2xkZXJQYXRoID0gYWRkSXRlbVN0YXRlLm5ld1NlcnZlckZvbGRlclBhdGg7XG4gICAgICAgIHRoaXMubmZzSG9zdE5hbWUgPSBhZGRJdGVtU3RhdGUubmZzSG9zdE5hbWU7XG4gICAgICAgIHRoaXMubmZzU2hhcmVQYXRoID0gYWRkSXRlbVN0YXRlLm5mc1NoYXJlUGF0aDtcbiAgICB9XG4gICAgY2hlY2tJZkRyaXZlTGV0dGVyTG9jYXRpb24ocGF0aCkge1xuICAgICAgICB0aGlzLnB1Ymxpc2hlckZvbGRlclBhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLnB1Ymxpc2hlckZvbGRlclBhdGhJc0RyaXZlTGV0dGVyTG9jYXRpb24gPSBwYXRoLnNwbGl0KFwiOlwiKVswXS5sZW5ndGggPT09IDE7XG4gICAgfVxuICAgIHZhbGlkYXRlRm9sZGVySW5wdXRzKCkge1xuICAgICAgICBpZiAoIXRoaXMucHVibGlzaGVyRm9sZGVyUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiaW52YWxpZFB1Ymxpc2hlckZvbGRlclBhdGhcIjtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoSXNEcml2ZUxldHRlckxvY2F0aW9uICYmICF0aGlzLnB1Ymxpc2hlckZvbGRlclBhdGhIb3N0bmFtZSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiaW52YWxpZFB1Ymxpc2hlckhvc3ROYW1lXCI7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9PT0gXCJuZXdQYXRoXCIgJiYgIXRoaXMubmV3U2VydmVyRm9sZGVyUGF0aCkge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IFwiaW52YWxpZFNlcnZlckZvbGRlclBhdGhcIjtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXJ2ZXJGb2xkZXJQYXRoID09PSBcIm5mc0hvc3RBbmRQYXRoXCIpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5uZnNIb3N0TmFtZSAmJiAhdGhpcy5uZnNTaGFyZVBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJpbnZhbGlkTmZzSG9zdEFuZFBhdGhcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMubmZzSG9zdE5hbWUgJiYgdGhpcy5uZnNTaGFyZVBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJpbnZhbGlkTmZzSG9zdE5hbWVcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5uZnNIb3N0TmFtZSAmJiAhdGhpcy5uZnNTaGFyZVBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gXCJpbnZhbGlkTmZzUGF0aFwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVuZGVyRXJyb3JJdGVtKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCB7IGkxOG4sIGVycm9yIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gKGgoXCJhcmNnaXMtbmV3LWl0ZW0tYWxlcnRcIiwgeyBoZWFkaW5nOiAoX2EgPSBpMThuLmVycm9yc1tlcnJvcl0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFkaW5nLCBkZXNjcmlwdGlvbjogKF9iID0gaTE4bi5lcnJvcnNbZXJyb3JdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZGVzY3JpcHRpb24sIGFjdGl2ZTogZXJyb3IgIT09IG51bGwsIG9uQWxlcnREaXNtaXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICAgICAgICB9IH0pKTtcbiAgICB9XG4gICAgaGFuZGxlTmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVGb2xkZXJJbnB1dHMoKSkge1xuICAgICAgICAgICAgYWRkSXRlbVN0YXRlLnB1Ymxpc2hlckZvbGRlclBhdGggPSB0aGlzLnB1Ymxpc2hlckZvbGRlclBhdGg7XG4gICAgICAgICAgICBhZGRJdGVtU3RhdGUuc2VydmVyRm9sZGVyUGF0aCA9IHRoaXMuc2VydmVyRm9sZGVyUGF0aDtcbiAgICAgICAgICAgIGlmICh0aGlzLnB1Ymxpc2hlckZvbGRlclBhdGhJc0RyaXZlTGV0dGVyTG9jYXRpb24gJiYgdGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoSG9zdG5hbWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtU3RhdGUucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lID0gdGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoSG9zdG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtU3RhdGUucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlckZvbGRlclBhdGggPT09IFwibmV3UGF0aFwiICYmIHRoaXMubmV3U2VydmVyRm9sZGVyUGF0aCkge1xuICAgICAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS5uZXdTZXJ2ZXJGb2xkZXJQYXRoID0gdGhpcy5uZXdTZXJ2ZXJGb2xkZXJQYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWRkSXRlbVN0YXRlLm5ld1NlcnZlckZvbGRlclBhdGggPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9PT0gXCJuZnNIb3N0QW5kUGF0aFwiKSB7XG4gICAgICAgICAgICAgICAgYWRkSXRlbVN0YXRlLm5mc0hvc3ROYW1lID0gdGhpcy5uZnNIb3N0TmFtZTtcbiAgICAgICAgICAgICAgICBhZGRJdGVtU3RhdGUubmZzU2hhcmVQYXRoID0gdGhpcy5uZnNTaGFyZVBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhZGRJdGVtU3RhdGUubmZzSG9zdE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGFkZEl0ZW1TdGF0ZS5uZnNTaGFyZVBhdGggPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5uZXdJdGVtVXBkYXRlUGFnZS5lbWl0KFwiZGF0YVN0b3JlU2VsZWN0U2VydmVyTGlzdFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgaTE4biwgcHVibGlzaGVyRm9sZGVyUGF0aElzRHJpdmVMZXR0ZXJMb2NhdGlvbiB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIG51bGwsIGgoXCJhcmNnaXMtbmV3LWl0ZW0tZGVzY3JpcHRpb25cIiwgeyBoZWFkZXI6IGkxOG4uaGVhZGluZyB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcImlucHV0LWxhYmVsXCIgfSwgaChcImNhbGNpdGUtbGFiZWxcIiwgbnVsbCwgaTE4bi5wdWJsaXNoZXJGb2xkZXJQYXRoLmhlYWRpbmcsIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsga2V5OiBcInB1Ymxpc2hlci1mb2xkZXItcGF0aFwiLCBwbGFjZWhvbGRlcjogaTE4bi5wdWJsaXNoZXJGb2xkZXJQYXRoLnBsYWNlaG9sZGVyLCB2YWx1ZTogdGhpcy5wdWJsaXNoZXJGb2xkZXJQYXRoLCByZXF1aXJlZDogdHJ1ZSwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGlzaGVyRm9sZGVyUGF0aCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJZkRyaXZlTGV0dGVyTG9jYXRpb24ocHVibGlzaGVyRm9sZGVyUGF0aCk7XG4gICAgICAgICAgICB9IH0pKSksIHB1Ymxpc2hlckZvbGRlclBhdGhJc0RyaXZlTGV0dGVyTG9jYXRpb24gJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbnB1dC1sYWJlbFwiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIG51bGwsIGkxOG4ucHVibGlzaGVyRm9sZGVyUGF0aC5ob3N0bmFtZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBrZXk6IFwicHVibGlzaGVyLWZvbGRlci1wYXRoLWhvc3RuYW1lXCIsIHR5cGU6IFwidGV4dGFyZWFcIiwgdmFsdWU6IHRoaXMucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0bmFtZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaGVyRm9sZGVyUGF0aEhvc3RuYW1lID0gaG9zdG5hbWU7XG4gICAgICAgICAgICB9IH0pLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaG9zdG5hbWUtaW5mb1wiIH0sIGkxOG4ucHVibGlzaGVyRm9sZGVyUGF0aC5ob3N0bmFtZUluZm8pKSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5wdXQtbGFiZWxcIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLnNlcnZlckZvbGRlclBhdGguaGVhZGluZykpLCBoKFwiY2FsY2l0ZS10aWxlLXNlbGVjdC1ncm91cFwiLCB7IGxheW91dDogXCJ2ZXJ0aWNhbFwiLCBrZXk6IFwic2VydmVyLWZvbGRlci1wYXRoLXNlbGVjdFwiIH0sIGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0XCIsIHsgY2xhc3M6IFwidGlsZS1zZWxlY3RcIiwga2V5OiBcInB1Ymxpc2hlci1mb2xkZXItcGF0aC1zZWxlY3RcIiwgY2hlY2tlZDogdGhpcy5zZXJ2ZXJGb2xkZXJQYXRoID09PSBudWxsLCBkZXNjcmlwdGlvbjogaTE4bi5zZXJ2ZXJGb2xkZXJQYXRoLnNhbWVBc1B1Ymxpc2hlciwgbmFtZTogXCJzYW1lLWFzLXB1Ymxpc2hlci1mb2xkZXItcGF0aFwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBudWxsLCBvbkNhbGNpdGVUaWxlU2VsZWN0Q2hhbmdlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJGb2xkZXJQYXRoID0gbnVsbDtcbiAgICAgICAgICAgIH0gfSksIGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0XCIsIHsgY2xhc3M6IFwidGlsZS1zZWxlY3RcIiwga2V5OiBcIm5ldy1zZXJ2ZXItZm9sZGVyLXBhdGgtc2VsZWN0XCIsIGNoZWNrZWQ6IHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9PT0gXCJuZXdQYXRoXCIsIGRlc2NyaXB0aW9uOiBpMThuLnNlcnZlckZvbGRlclBhdGgubmV3UGF0aCwgbmFtZTogXCJuZXctcGF0aFwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBcIm5ld1BhdGhcIiwgb25DYWxjaXRlVGlsZVNlbGVjdENoYW5nZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9IFwibmV3UGF0aFwiO1xuICAgICAgICAgICAgfSB9KSwgaXNBcmNHSVNFbnRlcnByaXNlT25LdWJlcm5ldGVzKCkgJiYgKGgoXCJjYWxjaXRlLXRpbGUtc2VsZWN0XCIsIHsga2V5OiBcIm5mcy1ob3N0LWFuZC1wYXRoLXNlbGVjdFwiLCBjaGVja2VkOiB0aGlzLnNlcnZlckZvbGRlclBhdGggPT09IFwibmZzSG9zdEFuZFBhdGhcIiwgZGVzY3JpcHRpb246IGkxOG4uc2VydmVyRm9sZGVyUGF0aC5uZnNIb3N0QW5kUGF0aC5kZXNjcmlwdGlvbiwgbmFtZTogXCJuZnMtaG9zdC1hbmQtcGF0aFwiLCBcImlucHV0LWVuYWJsZWRcIjogdHJ1ZSwgd2lkdGg6IFwiZnVsbFwiLCB0eXBlOiBcInJhZGlvXCIsIHZhbHVlOiBcIm5mc0hvc3RBbmRQYXRoXCIsIG9uQ2FsY2l0ZVRpbGVTZWxlY3RDaGFuZ2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckZvbGRlclBhdGggPSBcIm5mc0hvc3RBbmRQYXRoXCI7XG4gICAgICAgICAgICB9IH0pKSksIHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9PT0gXCJuZXdQYXRoXCIgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbnB1dC1sYWJlbFwiIH0sIGgoXCJjYWxjaXRlLWlucHV0XCIsIHsga2V5OiBcIm5ldy1zZXJ2ZXItZm9sZGVyLXBhdGhcIiwgcGxhY2Vob2xkZXI6IGkxOG4uc2VydmVyRm9sZGVyUGF0aC5wbGFjZWhvbGRlciwgdmFsdWU6IHRoaXMubmV3U2VydmVyRm9sZGVyUGF0aCwgb25DYWxjaXRlSW5wdXRDaGFuZ2U6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3U2VydmVyRm9sZGVyUGF0aCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMubmV3U2VydmVyRm9sZGVyUGF0aCA9IG5ld1NlcnZlckZvbGRlclBhdGg7XG4gICAgICAgICAgICB9IH0pKSksIHRoaXMuc2VydmVyRm9sZGVyUGF0aCA9PT0gXCJuZnNIb3N0QW5kUGF0aFwiICYmIChoKFwiZGl2XCIsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbnB1dC1sYWJlbFwiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIG51bGwsIGkxOG4uc2VydmVyRm9sZGVyUGF0aC5uZnNIb3N0QW5kUGF0aC5ob3N0bmFtZSwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBrZXk6IFwibmZzLWhvc3RuYW1lXCIsIHR5cGU6IFwidGV4dGFyZWFcIiwgdmFsdWU6IHRoaXMubmZzSG9zdE5hbWUsIG9uQ2FsY2l0ZUlucHV0Q2hhbmdlOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3RuYW1lID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5uZnNIb3N0TmFtZSA9IGhvc3RuYW1lO1xuICAgICAgICAgICAgfSB9KSkpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5wdXQtbGFiZWxcIiB9LCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCBudWxsLCBpMThuLnNlcnZlckZvbGRlclBhdGgubmZzSG9zdEFuZFBhdGguc2hhcmVQYXRoLCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IGtleTogXCJuZnMtc2hhcmVwYXRoXCIsIHR5cGU6IFwidGV4dGFyZWFcIiwgdmFsdWU6IHRoaXMubmZzU2hhcmVQYXRoLCBvbkNhbGNpdGVJbnB1dENoYW5nZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGFyZVBhdGggPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm5mc1NoYXJlUGF0aCA9IHNoYXJlUGF0aDtcbiAgICAgICAgICAgIH0gfSkpKSkpLCB0aGlzLnJlbmRlckVycm9ySXRlbSgpKSk7XG4gICAgfVxufTtcbkFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdEZvbGRlci5zdHlsZSA9IGFyY2dpc05ld0l0ZW1QYWdlc0RhdGFTdG9yZVNlbGVjdEZvbGRlckNzcztcblxuZXhwb3J0IHsgQXJjZ2lzTmV3SXRlbVBhZ2VzRGF0YVN0b3JlU2VsZWN0Rm9sZGVyIGFzIGFyY2dpc19uZXdfaXRlbV9wYWdlc19kYXRhX3N0b3JlX3NlbGVjdF9mb2xkZXIgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJjZ2lzLW5ldy1pdGVtLXBhZ2VzLWRhdGEtc3RvcmUtc2VsZWN0LWZvbGRlci5lbnRyeS5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiB2NC4wLjU4XG4gKi9cbmltcG9ydCB7IGMgYXMgY3JlYXRlU3RvcmUgfSBmcm9tICcuL2luZGV4LTA1OTU2Y2FiLmpzJztcblxuY29uc3QgdWlTdG9yZSA9IGNyZWF0ZVN0b3JlKHtcbiAgICBuZXh0VGV4dDogXCJuZXh0XCIsXG4gICAgd29ya2Zsb3c6IFwiY29udGVudFwiLFxuICAgIHNjYWxlOiBcIm1cIixcbiAgICBkaXNhYmxlU2Nyb2xsOiBmYWxzZSxcbiAgICBmZWF0dXJlRmxhZ3M6IHt9XG59KTtcbmNvbnN0IHVpU3RvcmVTdGF0ZSA9IHVpU3RvcmUuc3RhdGU7XG5cbmV4cG9ydCB7IHVpU3RvcmUgYXMgYSwgdWlTdG9yZVN0YXRlIGFzIHUgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktYmNhN2JjZDEuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9