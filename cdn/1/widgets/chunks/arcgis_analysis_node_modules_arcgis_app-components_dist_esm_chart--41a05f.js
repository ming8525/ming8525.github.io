/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_chart--41a05f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_chart--41a05f"],{86478:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r});var l=n(9225),a=(n(69283),n(10519));function r(e){var i;const{layer:n,mapView:r,selectedFields:o,modules:t}=l.s,u=n;e=e||{};const d=(0,l.m)((0,l.h)(u)),f=!!(0,a.i)(e.includeSizeVariable)&&e.includeSizeVariable;return t.PieChartCreator.createRenderer({layer:u,view:r,attributes:s(e.fieldInfos),pieChartScheme:e.pieChartScheme||(0,l.Z)(),includeSizeVariable:f,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!(!(0,l.q)(u)||!f),sizeOptimizationEnabled:!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)}).then((e=>{(0,l.l)(d,e.renderer,{notOpacity:!0});const i=(0,l.g)();if(["chart","chart-size"].indexOf(i)>-1){const i=(0,l.f)(u),n=o.map((e=>e.field)),a=i.map((e=>e.field)),r=n.toString()===a.toString(),s=t.esriLang.clone(n),d=t.esriLang.clone(a);s.sort(),d.sort(),s.toString()===d.toString()&&(e.renderer.attributes=(0,l.h)(u).attributes,r||e.renderer.attributes.sort(((e,i)=>n.indexOf(e.field)-n.indexOf(i.field))),e.renderer.othersCategory=(0,l.h)(u).othersCategory,e.renderer.holePercentage=(0,l.h)(u).holePercentage)}return Promise.resolve(e)}),(e=>Promise.reject(e)))}function o(e){var i,n;const{layer:r,mapView:o,modules:t}=l.s,u=r;e=e||{};const d=(0,l.h)(u),f=(0,l.a)(d,"size"),c=(0,l.p)(d,"size"),m=(0,l.m)(d);let p,b=e.fieldInfos?e.fieldInfos:d.attributes.map((e=>({field:e.field,simpleFieldType:l.w.NUMBER}))),h=!0;if(e.fieldInfos&&(d.attributes.forEach(((i,n)=>{i.field!==e.fieldInfos[n].field&&(h=!1)})),h&&(delete e.fieldInfos,(0,l.R)(e)))){const e=d.clone();return Promise.resolve({renderer:e})}h&&(p=d.attributes.map((e=>e.field)));const y=(0,l.h)(u),z=(null===(i=y.attributes)||void 0===i?void 0:i.length)?y.attributes[0].color:null,g=d.backgroundFillSymbol;let V=!1;f&&(V=f.minSize.stops?f.minSize.stops[0].size>f.maxSize.stops[0].size:f.minSize>f.maxSize);const v=b[0];return b[0]=b[1],b[1]=v,t.PieChartCreator.createRenderer({layer:u,view:o,attributes:s(b),pieChartScheme:e.pieChartScheme||(0,l.Z)(),includeSizeVariable:(0,a.i)(e.includeSizeVariable)?e.includeSizeVariable:!!f,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!m.sizeOutlineVisVar,sizeOptimizationEnabled:(0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!m.sizeAutoVisVar,legendOptions:void 0,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)}).then((i=>{var n;if(!e.fieldInfos&&f){const e=(0,l.a)(i.renderer,"size");if(e.minDataValue=f.minDataValue,e.maxDataValue=f.maxDataValue,c){const e=(0,l.p)(i.renderer,"size");e.minSliderValue=c.minSliderValue,e.maxSliderValue=c.maxSliderValue}}if(h&&m.opacityVisVar&&m.authOpacityVisVar&&(i.renderer.visualVariables=(0,l.n)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,l.o)(i.renderer,"opacity"),i.renderer.visualVariables.push(m.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(m.authOpacityVisVar)),(0,l.l)(m,i.renderer,{notOpacity:!0}),p&&i.renderer.attributes.sort(((e,i)=>{const n=p.indexOf(e.field),l=p.indexOf(i.field);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),h&&i.renderer.attributes.forEach(((e,i)=>{e.label=d.attributes[i].label})),i.renderer.size=d.size,i.renderer.holePercentage=d.holePercentage,i.renderer.othersCategory=d.othersCategory,z&&(null===(n=i.renderer.attributes)||void 0===n?void 0:n.length)&&i.renderer.attributes.map(((e,i)=>{h&&(e.color=d.attributes[i].color)})),g&&(i.renderer.backgroundFillSymbol=g),V){const e=(0,l.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function s(e){return e.map((e=>({field:e.field,label:t(e.field)})))}function t(e){const i=l.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}},70616:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,g:()=>s});var l=n(9225),a=(n(69283),n(10519));function r(e){var i;const{layer:n,mapView:r,selectedFields:o,modules:s}=l.s,u=n;e=e||{};const d=(0,l.m)((0,l.h)(u));return s.PredominanceCreator.createRenderer({layer:u,view:r,fields:t(e.fieldInfos),predominanceScheme:e.predominanceScheme||(0,l.W)(),includeOpacityVariable:!(0,a.i)(e.includeOpacityVariable)||(0,a.i)(e.includeOpacityVariable),includeSizeVariable:!!(0,a.i)(e.includeSizeVariable)&&e.includeSizeVariable,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!(0,l.q)(u),sizeOptimizationEnabled:!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled,legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=u.featureReduction)||void 0===i?void 0:i.type)}).then((i=>{(0,l.l)(d,i.renderer,{notOpacity:!0});const n=(0,l.g)();if(!(0,a.i)(e.includeOpacityVariable)&&["predominance","predominance-size"].indexOf(n)>-1){const n=(0,l.f)(u),a=o.map((e=>e.field)).sort(),r=n.map((e=>e.field)).sort();if(a.toString()===r.toString()){const n=(0,l.a)((0,l.h)(u),"opacity"),a=(0,l.p)((0,l.h)(u),"opacity");i.renderer.visualVariables=(0,l.n)(i.renderer,"opacity")||[],n&&i.renderer.visualVariables.push(n),i.renderer.authoringInfo.visualVariables=(0,l.o)(i.renderer,"opacity")||[],a&&i.renderer.authoringInfo.visualVariables.push(a);const r=i.renderer.uniqueValueInfos[0].symbol.clone();i.renderer.uniqueValueInfos=(0,l.h)(u).uniqueValueInfos,(0,l.q)(u)&&("predominance-size"===(0,l.g)()&&!0!==e.includeSizeVariable?(0,l.X)(i.renderer,r):"predominance"===(0,l.g)()&&!0===e.includeSizeVariable&&(0,l.Y)(i.renderer,r))}}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,mapView:r,modules:o}=l.s,s=n;e=e||{};const u=(0,l.h)(s),d=(0,l.a)(u,"size"),f=(0,l.p)(u,"size"),c=(0,l.m)(u);let m,p,b=e.fieldInfos?e.fieldInfos:u.uniqueValueGroups[0].classes.map((e=>({field:e.values[0].value,simpleFieldType:l.w.NUMBER}))),h=!0;if(e.fieldInfos&&(u.uniqueValueGroups[0].classes.forEach(((i,n)=>{i.values[0].value!==e.fieldInfos[n].field&&(h=!1)})),h&&(delete e.fieldInfos,(0,l.R)(e)))){const e=u.clone();return Promise.resolve({renderer:e})}h&&(m=u.uniqueValueInfos.map((e=>e.value)));const y=(0,l.h)(s);p=y.uniqueValueInfos&&y.uniqueValueInfos.length?y.uniqueValueInfos[0].symbol:null;const z=u.defaultSymbol,g=u.defaultLabel,V=u.backgroundFillSymbol;let v=!1;d&&(v=d.minSize.stops?d.minSize.stops[0].size>d.maxSize.stops[0].size:d.minSize>d.maxSize);const I=b[0];return b[0]=b[1],b[1]=I,o.PredominanceCreator.createRenderer({layer:s,view:r,fields:t(b),predominanceScheme:e.predominanceScheme||(0,l.W)(),includeOpacityVariable:(0,a.i)(e.includeOpacityVariable)?e.includeOpacityVariable:!!c.opacityVisVar,includeSizeVariable:(0,a.i)(e.includeSizeVariable)?e.includeSizeVariable:!!d,outlineOptimizationEnabled:(0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!c.sizeOutlineVisVar,sizeOptimizationEnabled:(0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!c.sizeAutoVisVar,legendOptions:void 0,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!z,forBinning:"binning"===(null===(i=s.featureReduction)||void 0===i?void 0:i.type)}).then((i=>{if(!e.fieldInfos&&d){const e=(0,l.a)(i.renderer,"size");if(e.minDataValue=d.minDataValue,e.maxDataValue=d.maxDataValue,f){const e=(0,l.p)(i.renderer,"size");e.minSliderValue=f.minSliderValue,e.maxSliderValue=f.maxSliderValue}}if(!(0,a.i)(e.includeOpacityVariable)&&h&&c.opacityVisVar&&c.authOpacityVisVar&&(i.renderer.visualVariables=(0,l.n)(i.renderer,"opacity"),i.renderer.authoringInfo.visualVariables=(0,l.o)(i.renderer,"opacity"),i.renderer.visualVariables.push(c.opacityVisVar),i.renderer.authoringInfo.visualVariables=i.renderer.authoringInfo.visualVariables||[],i.renderer.authoringInfo.visualVariables.push(c.authOpacityVisVar)),(0,l.l)(c,i.renderer,{notOpacity:!0}),m&&i.renderer.uniqueValueInfos.sort(((e,i)=>{const n=m.indexOf(e.value),l=m.indexOf(i.value);return n>-1&&l>-1&&n<l?-1:n>-1&&l>-1&&n>l?1:n>-1?-1:l>-1?1:0})),h&&i.renderer.uniqueValueInfos.forEach(((e,i)=>{e.label=u.uniqueValueInfos[i].label})),p&&i.renderer.uniqueValueInfos&&i.renderer.uniqueValueInfos.length){const e=i.renderer.uniqueValueInfos.slice();e.map(((e,i)=>{let n;h?n=u.uniqueValueInfos[i].symbol:(n=p.clone(),(0,l.r)(n,(0,l.t)(e.symbol))),e.symbol=n})),i.renderer.uniqueValueInfos=e}if(z&&(i.renderer.defaultSymbol=z,i.renderer.defaultLabel=g),V&&(i.renderer.backgroundFillSymbol=V),v){const e=(0,l.a)(i.renderer,"size"),n=e.minSize;e.minSize=e.maxSize,e.maxSize=n}return Promise.resolve(i)}),(e=>Promise.reject(e)))}function s(e){var i;const{layer:n,mapView:a,modules:r}=l.s,o=n;return e=e||{},r.predominantCategories({layer:o,view:a,fields:e.fieldInfos.map((e=>e.field)),forBinning:"binning"===(null===(i=o.featureReduction)||void 0===i?void 0:i.type)})}function t(e){return e.map((e=>({name:e.field,label:u(e.field)})))}function u(e){const i=l.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}},67214:(e,i,n)=>{n.d(i,{a:()=>o,c:()=>r,u:()=>s});var l=n(9225),a=(n(69283),n(10519));function r(e){var i,n;const{layer:r,mapImageSublayer:o,mapView:s,modules:t}=l.s,u=r,d=(0,l.g)();let f=e.relationshipScheme;if(!f&&["relationship","relationship-size"].indexOf(d)>-1&&(f=(0,l.a0)()),e=e||{},"relationship-size"===d){const n=(0,l.h)(u).clone(),a=n.authoringInfo;if(a&&(null===(i=e.fieldInfos)||void 0===i?void 0:i.length)>1&&e.fieldInfos[0].field==a.field1.field&&e.fieldInfos[1].field==a.field2.field){if(n.visualVariables=(0,l.n)(n,"size"),n.authoringInfo.visualVariables=(0,l.o)(n,"size"),(0,l.q)(u)){const e=(0,l.S)(u,s),i=n.uniqueValueInfos.slice();i.map((i=>{const n=(0,l.t)(i.symbol);i.symbol=e.clone(),(0,l.r)(i.symbol,n)})),n.uniqueValueInfos=i}return Promise.resolve({renderer:n})}}const c=(0,l.m)((0,l.h)(u)),m={layer:u,view:s,field1:{field:e.fieldInfos[0].field},field2:{field:e.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:f,outlineOptimizationEnabled:!o&&(!(0,a.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!o&&(!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(n=u.featureReduction)||void 0===n?void 0:n.type)};return t.RelationshipCreator.createRenderer(m).then((e=>((0,l.l)(c,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,mapImageSublayer:r,mapView:o,modules:s}=l.s,t=n;e=e||{};const u=(0,l.h)(t),d=(0,l.g)(),f=u.authoringInfo,c=(0,l.a)(u,"size");if(e.fieldInfos&&e.fieldInfos.length>1&&e.fieldInfos[0].field==f.field1.field&&e.normalizationField1===f.field1.normalizationField&&e.fieldInfos[1].field==f.field2.field&&e.normalizationField2===f.field2.normalizationField&&(delete e.fieldInfos,delete e.normalizationField1,delete e.normalizationField2,(0,l.R)(e)&&!c))return Promise.resolve({renderer:u.clone()});let m=e.relationshipScheme;!m&&["relationship","relationship-size"].indexOf(d)>-1&&(m=(0,l.a0)());const p=(0,l.m)(u);let b=e.fieldInfos?e.fieldInfos[0]:{field:f.field1.field,simpleFieldType:l.w.NUMBER},h=e.fieldInfos?e.fieldInfos[1]:{field:f.field2.field,simpleFieldType:l.w.NUMBER};const y=void 0!==e.normalizationField1?e.normalizationField1:f.field1.normalizationField,z=void 0!==e.normalizationField2?e.normalizationField2:f.field2.normalizationField,g=u.uniqueValueInfos&&u.uniqueValueInfos.length?u.uniqueValueInfos[0].symbol:null,V=u.defaultSymbol,v=u.defaultLabel,I=e.numClasses?e.numClasses:f.numClasses;return s.RelationshipCreator.createRenderer({layer:t,view:o,field1:{field:b?b.field:u.field,normalizationField:y},field2:{field:h?h.field:u.field,normalizationField:z},classificationMethod:e.classificationMethod?e.classificationMethod:"manual"!==f.classificationMethod?f.classificationMethod:"quantile",numClasses:I,focus:e.focus?e.focus:f.focus,relationshipScheme:m,outlineOptimizationEnabled:!r&&((0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!p.sizeAutoVisVar),legendOptions:e.legendOptions?e.legendOptions:u.legendOptions,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)}).then((i=>((0,l.l)(p,i.renderer),g&&i.renderer.uniqueValueInfos.forEach((e=>{const i=g.clone();(0,l.r)(i,(0,l.t)(e.symbol)),e.symbol=i})),e.numClasses&&e.numClasses!==f.numClasses||(0,l.h)(t).uniqueValueInfos.forEach((e=>{i.renderer.uniqueValueInfos.forEach((i=>{e.value===i.value&&(i.label=e.label)}))})),V&&(i.renderer.defaultSymbol=V,i.renderer.defaultLabel=v),Promise.resolve(i))),(e=>Promise.reject(e)))}function s(e){const{layer:i,modules:n}=l.s;e=e||{};const a=(0,l.h)(i),r=a.authoringInfo;return n.RelationshipCreator.updateRenderer({field1:r.field1,field2:r.field2,numClasses:e.numClasses?e.numClasses:r.numClasses,focus:e.focus?"none"===e.focus?null:e.focus:r.focus,colors:e.colors,renderer:a})}},81555:(e,i,n)=>{n.d(i,{a:()=>o,b:()=>u,c:()=>r,d:()=>f,e:()=>t,f:()=>m,g:()=>d,s:()=>c});var l=n(9225),a=(n(69283),n(10519));function r(e){var i;const{layer:n,mapImageSublayer:r,mapView:o,modules:s}=l.s,t=n;e=e||{};const u=(0,l.m)((0,l.h)(t)),d=e.fieldInfos[0];return s.TypeCreator.createRenderer({layer:t,view:o,field:d.field,valueExpression:d.expression,valueExpressionTitle:d.expressionTitle,numTypes:e.numTypes||10,sortBy:e.sortBy||"count",typeScheme:e.typeScheme||(0,l._)(),returnAllCodedValues:!0,outlineOptimizationEnabled:!r&&(!(0,a.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,a.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!0,forBinning:"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)}).then((i=>{if(i.excludedUniqueValueInfos.length||(i.renderer.defaultLabel=null,i.renderer.defaultSymbol=null),c(e)){const e=(0,l.h)(t).clone(),n=(0,l.a)(e,"size","auto"),a=(0,l.a)(e,"size","outline");if(i.renderer.visualVariables=[],n&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(n)),a&&(i.renderer.visualVariables=i.renderer.visualVariables||[],i.renderer.visualVariables.push(a)),i.renderer.uniqueValueInfos=e.uniqueValueInfos,i.renderer.field2=e.field2,i.renderer.field3=e.field3,(0,l.q)(t)&&"type-size"===(0,l.g)()){const e=(0,l.S)(t,o),n=i.renderer.uniqueValueInfos.slice();n.map((i=>{const n=(0,l.t)(i.symbol);i.symbol=e.clone(),(0,l.r)(i.symbol,n)})),i.renderer.uniqueValueInfos=n}}return(0,l.l)(u,i.renderer),Promise.resolve(i)}),(e=>Promise.reject(e)))}function o(e){var i;const{layer:n,mapImageSublayer:r,mapView:o,modules:s}=l.s,t=n;let u=(e=e||[]).fieldInfos?e.fieldInfos[0]:null;const d=(0,l.h)(t),f=(0,l.m)(d),c=d.uniqueValueInfos&&d.uniqueValueInfos.length?d.uniqueValueInfos[0].symbol:null,m=d.defaultSymbol,p=d.defaultLabel,b=u&&(u.field!=d.field||u.expression!=d.valueExpression);return e=e||{},s.TypeCreator.createRenderer({layer:t,view:o,field:u?u.field:d.field,valueExpression:u?u.expression:d.valueExpression,valueExpressionTitle:u?u.expressionTitle:d.valueExpressionTitle,numTypes:e.numTypes||(b?10:d.uniqueValueInfos.length),sortBy:e.sortBy||"count",typeScheme:(0,l._)(),outlineOptimizationEnabled:!r&&((0,a.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!f.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,a.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!f.sizeAutoVisVar),legendOptions:e.legendOptions||d.legendOptions,defaultSymbolEnabled:(0,a.i)(e.defaultSymbolEnabled)||!!d.defaultSymbol,forBinning:"binning"===(null===(i=t.featureReduction)||void 0===i?void 0:i.type)}).then((e=>{if((0,l.l)(f,e.renderer),c&&e.renderer.uniqueValueInfos&&e.renderer.uniqueValueInfos.length){const i=e.renderer.uniqueValueInfos.slice();i.map((e=>{const i=c.clone();(0,l.r)(i,(0,l.t)(e.symbol)),e.symbol=i})),e.renderer.uniqueValueInfos=i}return m&&(e.renderer.defaultSymbol=m,e.renderer.defaultLabel=p),Promise.resolve(e)}),(e=>Promise.reject(e)))}const s={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function t(e,i){const{allUniqueValues:n,locale:a,mapView:r,modules:o}=l.s;if(o.intl.setLocale(a),(null==i?void 0:i.simpleFieldType)===l.w.DATE){const i=n&&o.rendererSupportUtils.calculateDateFormatInterval(n.map((e=>e.value)));return"unknown"===r.timeZone?o.intl.formatDate(e,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(i?s[i]:"long-month-day-year")),{timeZone:"utc",timeZoneName:"shortOffset"})):o.intl.formatDate(e,Object.assign(Object.assign({},o.intl.convertDateFormatToIntlOptions(i?s[i]:"long-month-day-year")),{timeZone:r.timeZone}))}return o.intl.formatDateOnly(e,o.intl.convertDateFormatToIntlOptions("long-month-day-year"))}function u(){const{allUniqueValues:e,layer:i,modules:n}=l.s,r=(0,l.h)(i);if(!(null==e?void 0:e.length)||!(0,a.i)(e[0].count))return[];let o=[];return r.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),o=o.concat(i)})),e.filter((e=>-1===o.indexOf(`${e.value}`))).map((e=>new n.UniqueValueClass({label:e.label,symbol:e.symbol,values:[{value:e.value}]})))}function d(){const{allUniqueValues:e,layer:i}=l.s,n=(0,l.h)(i);if(!(null==e?void 0:e.length)||!(0,a.i)(e[0].count))return[];let r=[];return n.uniqueValueGroups.forEach((e=>{const i=[];e.classes.forEach((e=>e.values.forEach((e=>i.push(`${e.value}`))))),r=r.concat(i)})),e.filter((e=>-1===r.indexOf(`${e.value}`)))}function f(e){const{strings:i}=l.s;let n=1,a=i.panels.type.defaultGroupName.replace("${number}",n.toString());for(;e.find((e=>e.heading===a));)a=i.panels.type.defaultGroupName.replace("${number}",(++n).toString());return a}function c(e){const{layer:i}=l.s;if(["type","type-size"].indexOf((0,l.g)())>-1){const n=(0,l.h)(i),a={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle};if((0,l.x)(e.fieldInfos[0],a))return!0}return!1}function m(e,i){const{layer:n,mapView:a,modules:r}=l.s,o=(0,l.h)(n),s=(0,l.u)(o.field),t=s&&["small-integer","integer","big-integer","long"].indexOf((0,l.z)(s.layerField))>-1,u=(null==s?void 0:s.simpleFieldType)===l.w.DATE,d="date-only"===(0,l.z)(s.layerField),f=[],c=(0,l._)();let m=0;e.classes.forEach(((o,p)=>{var b;if(1===o.values.length||i&&-1===i.indexOf(p))f.push(o),m++;else if(!i||i.indexOf(p)>-1){const i=["simple-marker","simple-line","simple-fill","cim"].indexOf(null===(b=o.symbol)||void 0===b?void 0:b.type)>-1?o.symbol:(0,l.S)(n,a,(0,l.g)());o.values.forEach(((n,a)=>{const o=r.esriLang.clone(i);if(a>0)if(c){const i=c.colors[(e.classes.length+m)%c.colors.length];i&&(0,l.r)(o,i)}else{const i=(0,l.$)().colors,n=new r.esriColor(i[(e.classes.length+m)%10]);n&&(0,l.r)(o,n)}const p=u||d?this.getDateLabel(n.value,s):(null==s?void 0:s.simpleFieldType)===l.w.NUMBER?__esri.intl.formatNumber(t?parseInt(n.value):parseFloat(n.value)):n.value;f.push(new r.UniqueValueClass({values:[new r.UniqueValue({value:n.value})],label:p,symbol:o})),m++}))}})),e.classes=f}},80046:(e,i,n)=>{n.d(i,{a:()=>s,b:()=>u,c:()=>o,d:()=>t});var l=n(9225),a=(n(69283),n(49306),n(98371)),r=n(81555);function o(e){const{layer:i}=l.s,n=(0,l.g)(),r=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return(0,a.s)({fieldInfos:[r]})&&["color-size","type-size"].indexOf(n)>-1&&(0,l.a)((0,l.h)(i),"size")&&(0,l.h)(i).authoringInfo?d((0,l.h)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):(0,a.c)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>d(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function s(e){const{layer:i}=l.s,n=(0,l.g)(),r=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];return(0,a.s)({fieldInfos:[r]})&&["color-size-age","type-size-age"].indexOf(n)>-1&&(0,l.a)((0,l.h)(i),"size")&&(0,l.h)(i).authoringInfo?d((0,l.h)(i),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e))):(0,a.a)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>d(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function t(e,i){const{layer:n}=l.s;return e=e||{},(0,a.f)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((a=>(0,r.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,a.renderer),e.backgroundFillSymbol=(0,l.h)(n).backgroundFillSymbol,"size"===i&&(e.statistics=a.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function u(e,i){const{layer:n,modules:o}=l.s;return e=e||{},(0,a.g)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((a=>{if(delete e.units,delete e.startTime,delete e.endTime,(0,l.R)(e)){const e=(0,l.h)(n).clone();e.visualVariables=(0,l.n)(e,"size")||[];const i=(0,l.a)(a.renderer,"size");e.visualVariables.push(i),e.authoringInfo=e.authoringInfo||new o.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,l.o)(e,"size")||[];const r=(0,l.p)(a.renderer,"size");return e.authoringInfo.visualVariables.push(r),Promise.resolve({renderer:e})}return(0,r.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,a.renderer),e.backgroundFillSymbol=(0,l.h)(n).backgroundFillSymbol,"size"===i&&(e.statistics=a.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))}),(e=>Promise.reject(e)))}function d(e,i){const{layer:n}=l.s,a=(0,l.g)();if((0,r.s)(i)&&["type","type-size","type-size-age"].indexOf(a)>-1){const i=(0,l.h)(n).clone();return f(i,e),Promise.resolve({renderer:i})}return(0,r.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(f(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function f(e,i){const{layer:n,mapView:a,modules:r}=l.s;e.visualVariables=(0,l.n)(e,"size")||[],e.visualVariables=(0,l.n)(e,"size","auto")||[];const o=(0,l.a)(i,"size");e.visualVariables.push(o),e.authoringInfo=e.authoringInfo||new r.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,l.o)(e,"size")||[];const s=(0,l.p)(i,"size");if(e.authoringInfo.visualVariables.push(s),(0,l.q)(n)){const r=i.classBreakInfos&&i.classBreakInfos.length?i.classBreakInfos[0].symbol:i.uniqueValueInfos&&i.uniqueValueInfos.length?i.uniqueValueInfos[0].symbol:(0,l.S)(n,a,"type-size"),o=e.uniqueValueInfos.slice();o.map((e=>{const i=(0,l.t)(e.symbol);e.symbol=r.clone(),(0,l.r)(e.symbol,i)})),e.uniqueValueInfos=o,e.backgroundFillSymbol=i.backgroundFillSymbol;const s=(0,l.a)(i,"size","outline");s&&e.visualVariables.push(s)}}}}]);