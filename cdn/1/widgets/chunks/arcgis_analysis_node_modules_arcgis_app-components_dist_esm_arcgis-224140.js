/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-224140.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-224140"],{13545:(e,t,r)=>{r.r(t),r.d(t,{arcgis_drag_and_drop:()=>u});var i=r(81149),n=r(82218),l=r(41487),s=r(12046),o=r(55234);r(42577),r(51837),r(69283),r(13615),r(74689),r(79210);const a={append:120001300,default:120000456},u=class{constructor(e){(0,i.r)(this,e),this.arcgisDropSuccess=(0,i.c)(this,"arcgisDropSuccess",7),this.arcgisAlertActive=(0,i.c)(this,"arcgisAlertActive",7),this.arcgisDragOver=(0,i.c)(this,"arcgisDragOver",7),this.config=void 0,this.user=void 0,this.active=!0,this.alertMessage={title:""},this.alertActive=!1,this.error=!1,this.files=void 0,this.allowedExtensions=null,this.validTypes=null,this.dragOverNoticeMessage=void 0,this.insideModal=void 0,this.fullHeight=void 0,this.showHelpLinkOnError=!0,this.maxFileSize=void 0,this.helpIdType="default",this.isFolder=!1,this.dragOver=void 0}handleAlertChange(){var e,t;const{alertActive:r}=this;r?(window.dispatchEvent(new CustomEvent("calciteInternalAlertSync",{detail:{queue:[]}})),null===(e=this.el.shadowRoot.querySelector("#new-item-alert"))||void 0===e||e.setAttribute("active","")):null===(t=this.el.shadowRoot.querySelector("#new-item-alert"))||void 0===t||t.removeAttribute("active"),this.arcgisAlertActive.emit(r)}handleFileUpdate(){const{files:e,i18n:t,isFolder:r,user:i,config:n,validTypes:u,helpIdType:c}=this,{success:d,errorMessage:v}=function(e,t,r,i,n){var u,c;const{helpBase:d,helpMap:v,i18n:p,helpIdType:h}=n,{extension:g}=(0,l.s)(e[0]),{maxFileSize:f,allowedExtensions:m}=i;let b,y=!1;const w=null===(u=null==m?void 0:m.includes(g))||void 0===u||u,x=Object.keys(e).some((t=>{const{extension:r}=(0,l.s)(e[t]);return["shp","shx","dbf","prj"].includes(r)})),S=null!==(c=i.validationTypes)&&void 0!==c?c:null,_=(0,o.f)((0,l.s)(e[0]).extension,S)[0],T=_&&(_.appendUploadFormat||_.allowAddDirect||!_.orgOnly||!(0,s.a)(r));if(x)b={title:p.error.shapefileErrorTitle,message:p.error.shapefileErrorMessage,link:{text:p.error.shapefileErrorLink,path:`${d}${v[120002804]}`}};else if(e.length>1)b={title:p.error.multipleFilesErrorTitle,message:p.error.multipleFilesErrorMessage};else if(null!=f&&e[0].size>f){const e=f/1e6;b={message:p.error.maxSize.replace("${size}",e.toString())}}else if(T&&w)y=!0;else{const e=a[h];b=t?{message:p.error.folderError}:{title:p.error.unsupportedFileTypeTitle,link:{text:p.error.unsupportedFileTypeMessage,path:`${d}${v[e]}`}}}return{success:y,errorMessage:b}}(e,r,i,{allowedExtensions:this.allowedExtensions,maxFileSize:this.maxFileSize,validationTypes:u},{helpIdType:c,i18n:t,helpBase:n.helpBase,helpMap:n.helpMap});d?this.arcgisDropSuccess.emit(e[0]):(this.alertMessage=v,this.alertActive=!0)}handleDragOver(e){if(e.dataTransfer.types.includes("Files")){if(this.wellRef){const e=window.innerHeight,{y:t,bottom:r}=this.wellRef.getBoundingClientRect(),i=Math.max(t,0),n=Math.min(e,r);this.noticeRef.style.height=n-i+"px";const l=-Math.min(0,t);this.noticeRef.style.top=`${l}px`}e.preventDefault(),this.dragOver=!0,this.arcgisDragOver.emit(this.dragOver)}return!1}async componentWillLoad(){const e=await(0,n.g)(this.el);this.i18n=e[0]}render(){const{title:e,message:t,link:r}=this.alertMessage,{text:n,path:l}=Object.assign({},r),{active:s,dragOverNoticeMessage:o,dragOver:a,insideModal:u,fullHeight:c,showHelpLinkOnError:d}=this;return(0,i.h)("div",{ref:e=>this.wellRef=e,class:{hide:!s,"drag-and-drop-well":!0,dragging:this.dragOver,"full-height":c},onDragOver:s&&this.handleDragOver.bind(this),onDragLeave:()=>{this.dragOver=!1},onDrop:e=>{var t,r,i,n;if(!s)return;e.preventDefault(),this.alertActive=!1,this.dragOver=!1;const{files:l,items:o}=e.dataTransfer,a=null==o?void 0:o[0];this.isFolder=(null===(n=null!==(r=null===(t=a.webkitGetAsEntry)||void 0===t?void 0:t.call(a))&&void 0!==r?r:null===(i=null==a?void 0:a.getAsEntry)||void 0===i?void 0:i.call(a))||void 0===n?void 0:n.isDirectory)||!1,this.files=l}},(0,i.h)("slot",null),u?(0,i.h)("arcgis-new-item-alert",{id:"new-item-alert",kind:"danger",onAlertDismiss:()=>{this.alertActive=!1},active:!!this.alertActive,heading:e,description:t,link:{href:null==r?void 0:r.path,title:null==r?void 0:r.text}}):(0,i.h)("calcite-alert",{label:"",id:"new-item-alert",icon:!0,kind:"danger",onCalciteAlertClose:()=>{this.alertActive=!1},open:!!this.alertActive,tabIndex:this.alertActive?null:-1,ref:e=>{const t=e.shadowRoot.querySelector(".alert-queue-count");t&&(t.style.display="none")}},e&&(0,i.h)("div",{slot:"title"},e),t&&(0,i.h)("div",{slot:"message",class:"alert__message"},t),d&&r&&(0,i.h)("calcite-link",{slot:"link",target:"_blank",href:l,class:"alert__link"},n)),(0,i.h)("div",{class:"notice-container",ref:e=>this.noticeRef=e},o&&(0,i.h)("calcite-notice",{icon:"upload-to",open:a,scale:"m",width:"auto"},(0,i.h)("div",{slot:"message"},o))))}get el(){return(0,i.d)(this)}static get watchers(){return{alertActive:["handleAlertChange"],files:["handleFileUpdate"]}}};u.style='.drag-and-drop-well{position:relative}.drag-and-drop-well ::slotted(*){transition:all 200ms ease-in-out;position:relative;border:2px dashed transparent}.drag-and-drop-well ::slotted(*):before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(0, 121, 193, 0) !important;pointer-events:none;transition:background-color 200ms ease-in-out !important;z-index:2}.dragging ::slotted(*){border-color:#007ac2 !important}.dragging ::slotted(*):before{border-color:#007ac2 !important;background-color:rgba(0, 121, 193, 0.05) !important}.notice-container{display:flex;align-items:center;justify-content:center;position:absolute;top:0px;left:0px;right:0px;pointer-events:none;z-index:10}.alert__message{display:block;line-height:1.375}.alert__link{display:inline}.full-height{height:100%}'},41487:(e,t,r)=>{r.d(t,{a:()=>l,f:()=>u,g:()=>a,s:()=>s,v:()=>o});var i=r(13615),n=r(31500);function l(e,t){const r=/(?:\.([^.]+))?$/;let i=e.replace(/^.*(\\|\/|:)/,""),l=i&&r.exec(i)[1]?r.exec(i)[1].toLowerCase():"",s="";if(i.indexOf(".rft.")>-1){const[e,t]=i.split(".rft.");l=`rft.${t}`,s=e}return i&&!s&&(s=-1===i.lastIndexOf(".")?i:i.substring(0,i.lastIndexOf("."))),s=s.replace(/\.|-/g,"_"),t&&(s=function(e){return`${e}_${(0,n.g)()}`}(s),i=`${s}.${l}`),{title:s,fileName:i,extension:l}}function s(e,t){return l(e.name,!!t)}function o(e,t){let r=e;const i=e.lastIndexOf("\\");return i>-1&&(r=r.substring(i+1,r.length)),r.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function a(e){return i.a[e]?i.a[e]:i.a[Object.keys(i.a).find((t=>i.a[t].type===e))]}function u(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},36238:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>v,c:()=>n,d:()=>i,e:()=>l,f:()=>c,g:()=>p,i:()=>s,m:()=>o,t:()=>a,u:()=>d});const i=(e,t)=>{let r,i="idle";const n=(...n)=>new Promise((l=>{switch(i){case"flushed":i="idle",r?(clearTimeout(r),l(e(...n))):l(null);break;case"invoked":clearTimeout(r),i="idle",l(e(...n));break;case"cancelled":clearTimeout(r),i="idle",l(null);break;default:r&&clearTimeout(r),i="pending",r=setTimeout((()=>(i="idle",l(e(...n)))),t)}}));return n.flush=function(...e){return i="flushed",n(...e)},n.invoke=function(...e){return i="invoked",n(...e)},n.cancel=function(...e){return i="cancelled",n(...e)},n.getStatus=function(){return i},n},n=(e,t)=>{let r;return(...i)=>new Promise((n=>{r||(r=setTimeout((()=>{clearTimeout(r),r=void 0,n(e(...i))}),t))}))};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return null!=e}async function o(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise((t=>setTimeout(t,e)))}const u=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:r,data:i}=t(e);return[r,i]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,r)=>e&&t.indexOf(r)>-1),!0);function d(e,t){const r=[],i={};return e.forEach((e=>{const n=t(e);null==i[n]&&(i[n]=e,r.push(e))})),r}function v(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)}))}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((r,i)=>e.slice(t*i,t+t*i)))},31500:(e,t,r)=>{r.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map((e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")},74689:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>l,c:()=>a,d:()=>c,g:()=>d,i:()=>o,u:()=>u});var i=r(79210);function n(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function l(e){var t;return n(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function s(e){var t;return n(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function o(e,t){return e.owner===t.username}function a(e,t){return u(e,t)||"update"===e.itemControl}function u(e,t){return o(e,t)||function(e,t){var r;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,n="admin"===e.itemControl;return!((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!o(e,t)&&n&&i.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(i))&&n}(e,t)}const c=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),d=(e,t)=>`${(0,i.a)(t)}item.html?id=${e}`},55234:(e,t,r)=>{r.d(t,{a:()=>a,f:()=>l,i:()=>o,m:()=>s});var i=r(36238),n=r(13615);function l(e,t){let r;r=t?t.map((e=>e.type)):Object.keys(n.a);let i=[];return r.forEach((t=>{var r;(null===(r=n.a[t].fileExt)||void 0===r?void 0:r.indexOf(e))>=0&&i.push(n.a[t])})),i}function s(e){return e?(0,i.b)(e.flatMap((e=>{var t;return null===(t=n.a[e])||void 0===t?void 0:t.fileExt})).filter((e=>!!e))):null}const o=e=>e/1024/1024>50,a=e=>e/1024/1024>20},12046:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>a,c:()=>s,d:()=>c,e:()=>v,f:()=>d,g:()=>y,h:()=>u,i:()=>o,j:()=>p,k:()=>h,l:()=>b,m:()=>f,n:()=>g,o:()=>m,p:()=>x,q:()=>w});var i=r(74689);const n=e=>{var t,r,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function l(e){return e&&!e.orgId}function s(e){return!e.isPortal||!!e.isBackedBySDS}function o(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function a(e){return"org_admin"===n(e)||"account_admin"===n(e)}function u(e){return"org_user"===n(e)||"account_user"===n(e)}function c(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function d(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function v(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function p(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function h(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function g(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function m(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function b(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function y(e,t,r,i){const n=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),l=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!a(t)&&!l||!(null==r?void 0:r.isPortal)&&!n)}function w(e){return!!e&&(!c(e)||c(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const x=({items:e,user:t,portal:r})=>{const n=e[0],l=n.owner;if(r.isPortal&&l!==t.username&&l.includes("esri_")&&!["esri_livingatlas"].includes(l))return!1;const s=(0,i.u)(n,t),o=c(t),a=S(t),u=(0,i.c)(n,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!o&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||p(e)||h(e)||!!t.canSharePublic&&g(e)}(t,r)||S(t));return s||u||(0,i.d)(e,t)&&a};function S(e){return b(e)||f(e)||m(e)}},79210:(e,t,r)=>{r.d(t,{a:()=>v,b:()=>n,c:()=>l,g:()=>d,p:()=>c,r:()=>o,s:()=>i,v:()=>a});const i=/\+|\?|\/|\(|\)|\\|\!|\#|\"|\||\*|\:|<|>|\%|\$|\@|\'|\^|\[|\]|\,|\=|\;/gi,n=/(\.|outputFormat=)json|geojson$/i,l=/\/ags\//gi,s="MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer|VideoServer",o=new RegExp(`http.+/(${s})`),a="/arcgis/rest/services|/rest/services|/arcgis/services|/arcgis/rest",u=new RegExp(`(?<server>http.+(?:${a})(?:/?.*/(?<name>.*)/(?<type>${s})))(?!.*/${s})/?(?<soe>\\d+)?.*`,"i"),c=e=>{const t=e.match(u);if(!t)return e.match(l)?{baseServerUrl:e,serverName:null,serverType:"MapServer",index:null}:null;const[,r,i,n,s]=t,o=parseInt(s);return{baseServerUrl:r,serverName:i,serverType:n,index:isNaN(o)?null:o}},d=e=>{if(!e)return null;if(!e.match(a))return null;const t=e.split("/rest");return t.length<2?null:`${t[0]}/rest/`},v=e=>e&&"/"!==e.charAt(e.length-1)?`${e}/`:e}}]);