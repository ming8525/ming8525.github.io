/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-919c06"],{20206:(e,n,t)=>{t.d(n,{a:()=>i,b:()=>l,c:()=>o,d:()=>r});const r=(0,t(70464).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),i=r.state,o=r.state,l=r.state},99418:(e,n,t)=>{t.r(n),t.d(n,{arcgis_new_item_pages_home:()=>g});var r=t(81149),i=t(49853),o=t(41487),l=t(12046),s=t(12846),a=t(82102),u=t(20206),c=t(65804),d=t(34851),p=t(13615),v=t(27130),f=t(55234),m=t(73411);t(70464),t(74689),t(79210),t(20164),t(69283);const g=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.allowedFileTypes=null,this.fileSelectHandler=async(e,n)=>{const{user:t,portal:r,config:{helpMap:l,helpBase:a},telemetry:d}=i.c,p=n?"your device":"drag drop",v={eventType:"new item click",pageName:"my content",category:"new item",label:p};null==d||d.logEvent(v),c.u.telemetryDetails=p;const{title:g,fileName:h,extension:w}=(0,o.s)(e);s.i.title=g,u.a.file=e,u.a.fileName=h,u.a.newItemMode="file",u.a.extension=w,u.a.selectedFields=void 0;const y=(0,f.f)(w),b="map"===c.u.workflow;if(1===y.length){const n=y[0].type;if("GeoJson"===n&&b&&!(0,m.a)(t,n,r)&&(0,f.i)(e.size))return void(this.error={description:c.u.i18n.publishSelect.bigGeoJsonHintPublicAccount,linkText:c.u.i18n.common.learnMore,link:`${a}${l[120003923]}`});u.a.type=n,["Microsoft Excel","CSV","GeoJson"].includes(n)&&(u.a.id=null,u.a.analyzeResults=null,u.a.selectedFields=null,"GeoJson"!==n&&(u.a.selectedSheet=null)),u.a.tileLayerPublishType="3DTiles Package"===n?"3dTiles":void 0;const o=y[0].nextStep,s=["CSV","Microsoft Excel"];b&&!(0,m.a)(t,n,r)&&s.includes(n)?(u.a.enablePublishing=!1,this.newItemUpdatePage.emit("publishSelect")):!(0,m.a)(t,n,r)||!i.c.allowPublish&&"publishSelect"===o?(u.a.enablePublishing=!1,this.newItemUpdatePage.emit("itemProperties")):this.newItemUpdatePage.emit(o)}else"zip"===w&&(this.newItemUpdatePage.emit("zipSelect"),u.a.applicationFile=null)},this.managedFocus=!0,this.error=void 0}componentWillLoad(){(0,d.a)();const{allowedItemTypes:e,user:n,portal:t}=i.c;if(e){const e=["CSV","GeoJson","KML"];this.allowedFileTypes=i.c.allowedItemTypes.filter((r=>(!(0,p.i)(r)||e.includes(r))&&!!n&&(e.includes(r)||!(0,l.a)(n)&&(0,m.a)(n,r,t))));const r=c.u.i18n;this.browserHelpText=(0,v.r)(r.common.supportFileTypes,this.allowedFileTypes.map((e=>{var n;return null!==(n=r.itemTypeInfo.lowercaseDisplayName[e])&&void 0!==n?n:e})).join(", "),"typeList")}"map"!==c.u.workflow||u.a.existingItem||this.removeExistingFile()}onTransitionComplete(){var e;null===(e=this.fileBrowserRef)||void 0===e||e.focusMainInput()}async removeExistingFile(){const e=u.a.id;e&&(u.a.id=null,await(0,a.d)(e,{permanentDelete:!0}))}render(){const e="map"===c.u.workflow,{allowedFileTypes:n,error:t,fileSelectHandler:o}=this,{portal:l,config:s,user:a,userLicensedItems:d}=i.c;return(0,r.h)(r.H,null,i.c.allowedModes.includes("file")&&(0,r.h)("arcgis-file-browser",{ref:e=>this.fileBrowserRef=e,class:{"full-height":e},allowedExtensions:n?(0,f.m)(n):void 0,helpText:this.browserHelpText,fullHeight:e,portal:l,config:s,user:a,userLicensedItems:d,onCloudDriveConnected:e=>{var n;const t=e.detail,r={eventType:"new item click",pageName:"my content",category:"new item",label:t};null===(n=i.c.telemetry)||void 0===n||n.logEvent(r),c.u.telemetryDetails=t,u.a.cloudProvider=t,this.newItemUpdatePage.emit("cloud")},onFileSelect:({detail:{file:e,source:n}})=>{o(e,"local-device"===n)}}),!e&&(0,r.h)("arcgis-new-item-create-layers-list",null),(0,r.h)("arcgis-new-item-alert",{description:null==t?void 0:t.description,link:{href:null==t?void 0:t.link,title:null==t?void 0:t.linkText},active:!!t,onAlertDismiss:()=>this.error=null}))}}},41487:(e,n,t)=>{t.d(n,{a:()=>o,f:()=>u,g:()=>a,s:()=>l,v:()=>s});var r=t(13615),i=t(31500);function o(e,n){const t=/(?:\.([^.]+))?$/;let r=e.replace(/^.*(\\|\/|:)/,""),o=r&&t.exec(r)[1]?t.exec(r)[1].toLowerCase():"",l="";if(r.indexOf(".rft.")>-1){const[e,n]=r.split(".rft.");o=`rft.${n}`,l=e}return r&&!l&&(l=-1===r.lastIndexOf(".")?r:r.substring(0,r.lastIndexOf("."))),l=l.replace(/\.|-/g,"_"),n&&(l=function(e){return`${e}_${(0,i.g)()}`}(l),r=`${l}.${o}`),{title:l,fileName:r,extension:o}}function l(e,n){return o(e.name,!!n)}function s(e,n){let t=e;const r=e.lastIndexOf("\\");return r>-1&&(t=t.substring(r+1,t.length)),t.replace(/\ /g,"_")===n.replace(/\ /g,"_")}function a(e){return r.a[e]?r.a[e]:r.a[Object.keys(r.a).find((n=>r.a[n].type===e))]}function u(e){if(!e)return"0 B";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${["B","KB","MB","GB","TB"][n]}`}},64606:(e,n,t)=>{t.d(n,{a:()=>i,f:()=>o,s:()=>s});var r=t(36238);const i=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",o=e=>{const n=e=>e.split(",").map((e=>e.trim())).filter((e=>e));return e?"string"==typeof e?(0,r.b)(n(e)):(0,r.b)(e.flatMap((e=>[...n(e)]))):[]},l=async e=>new Promise(((n,t)=>{for(let r=0;r<e.length;r++)e[r].then((t=>{const i=[...e];i.splice(r,1),n({remainingPromises:i,result:t})})).catch(t)}));async function s(e,n){var t,r;const i=[],{getBatchSize:o,onPromiseCompleted:s,onPromiseThrow:a,shouldContinue:u}=null!=n?n:{};let c=[];for(let n=0;n<(null!==(t=null==o?void 0:o())&&void 0!==t?t:1);n++)try{const n=e();n&&c.push(n)}catch(e){null==a||a(e)}let d=null;for(;c.length>0&&(!u||u(d));)try{const{remainingPromises:n,result:t}=await l(c);c=n,d=t,t&&i.push(t),null==s||s(t);const a=null!==(r=null==o?void 0:o())&&void 0!==r?r:1;for(;c.length<a;){const n=e();if(n&&c.push(n),null==n)break}}catch(e){null==a||a(e)}return i}},31500:(e,n,t)=>{t.d(n,{g:()=>r});const r=()=>[2,1,1,1,3].map((e=>{let n="";for(let t=0;t<e;t++)n+=(65536*(1+Math.random())|0).toString(16).substring(1);return n})).join("-")},27130:(e,n,t)=>{t.d(n,{r:()=>i});const r={fileName:/\$\{fileName\}/g,fileType:/\$\{type\}/g,typeList:/\$\{typeList\}/g,missingFields:/\$\{\missingFields\}/g},i=(e,n,t)=>{const i=new RegExp(r[t]);return null==e?void 0:e.replace(i,n)}},74689:(e,n,t)=>{t.d(n,{a:()=>l,b:()=>o,c:()=>a,d:()=>c,g:()=>d,i:()=>s,u:()=>u});var r=t(79210);function i(e){var n;return!!(null===(n=e.owner)||void 0===n?void 0:n.toLowerCase().includes("esri"))}function o(e){var n;return i(e)&&!!(null===(n=e.typeKeywords)||void 0===n?void 0:n.includes("Requires Credits"))}function l(e){var n;return i(e)&&!!(null===(n=e.typeKeywords)||void 0===n?void 0:n.includes("Requires Subscription"))}function s(e,n){return e.owner===n.username}function a(e,n){return u(e,n)||"update"===e.itemControl}function u(e,n){return s(e,n)||function(e,n){var t;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,i="admin"===e.itemControl;return!((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!s(e,n)&&i&&r.includes("esri_")&&!["esri_livingatlas","esri_demographics","esri_boundaries"].includes(r))&&i}(e,n)}const c=(e,n)=>!!n.orgId&&e.every((e=>e.isOrgItem)),d=(e,n)=>`${(0,r.a)(n)}item.html?id=${e}`},12846:(e,n,t)=>{t.d(n,{a:()=>r,i:()=>i});const r=(0,t(70464).c)({title:"",snippet:"",tags:[],categories:[]}),i=r.state},55234:(e,n,t)=>{t.d(n,{a:()=>a,f:()=>o,i:()=>s,m:()=>l});var r=t(36238),i=t(13615);function o(e,n){let t;t=n?n.map((e=>e.type)):Object.keys(i.a);let r=[];return t.forEach((n=>{var t;(null===(t=i.a[n].fileExt)||void 0===t?void 0:t.indexOf(e))>=0&&r.push(i.a[n])})),r}function l(e){return e?(0,r.b)(e.flatMap((e=>{var n;return null===(n=i.a[e])||void 0===n?void 0:n.fileExt})).filter((e=>!!e))):null}const s=e=>e/1024/1024>50,a=e=>e/1024/1024>20},69283:(e,n,t)=>{t.d(n,{a:()=>r,c:()=>o,e:()=>l,g:()=>i,l:()=>s});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}var l=o((function(e,n){!function(e){var n={Promise:"undefined"!=typeof window?window.Promise:void 0},t="4.24",r="next";function i(e){if(e.toLowerCase()===r)return r;var n=e&&e.match(/^(\d)\.(\d+)/);return n&&{major:parseInt(n[1],10),minor:parseInt(n[2],10)}}function o(e){return void 0===e&&(e=t),"https://js.arcgis.com/".concat(e,"/")}function l(e){return!e||i(e)?function(e){void 0===e&&(e=t);var n=o(e),l=i(e);if(l!==r&&3===l.major){var s=l.minor<=10?"js/":"";return"".concat(n).concat(s,"esri/css/esri.css")}return"".concat(n,"esri/themes/light/main.css")}(e):e}function s(e,n){var t=l(e),r=function(e){return document.querySelector('link[href*="'.concat(e,'"]'))}(t);return r||function(e,n){if(n){var t=document.querySelector(n);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}(r=function(e){var n=document.createElement("link");return n.rel="stylesheet",n.href=e,n}(t),n),r}var a={};function u(e,n,t){var r;t&&(r=function(e,n){var t=function(r){n(r.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}(e,t));var i=function(){n(e),e.removeEventListener("load",i,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",i,!1)}function c(){return document.querySelector("script[data-esri-loader]")}function d(){var e=window.require;return e&&e.on}function p(e){void 0===e&&(e={});var t={};[a,e].forEach((function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}));var r=t.version,i=t.url||o(r);return new n.Promise((function(e,n){var o=c();if(o){var l=o.getAttribute("src");l!==i?n(new Error("The ArcGIS API for JavaScript is already loaded (".concat(l,")."))):d()?e(o):u(o,e,n)}else if(d())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=t.css;a&&s(!0===a?r:a,t.insertCssBefore),u(o=function(e){var n=document.createElement("script");return n.type="text/javascript",n.src=e,n.setAttribute("data-esri-loader","loading"),n}(i),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),n),document.body.appendChild(o)}}))}function v(e){return new n.Promise((function(n,t){var r=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.remove(),n(e)}))}))}e.utils=n,e.loadModules=function(e,n){if(void 0===n&&(n={}),d())return v(e);var t=c(),r=t&&t.getAttribute("src");return!n.url&&r&&(n.url=r),p(n).then((function(){return v(e)}))},e.getScript=c,e.isLoaded=d,e.loadScript=p,e.setDefaultOptions=function(e){void 0===e&&(e={}),a=e},e.loadCss=s,Object.defineProperty(e,"__esModule",{value:!0})}(n)}));const s=async(e,n)=>(await l.loadModules(e,n)).map((e=>e.__esModule&&e.default?e.default:e))},12046:(e,n,t)=>{t.d(n,{a:()=>o,b:()=>a,c:()=>l,d:()=>c,e:()=>p,f:()=>d,g:()=>y,h:()=>u,i:()=>s,j:()=>v,k:()=>f,l:()=>w,m:()=>g,n:()=>m,o:()=>h,p:()=>P,q:()=>b});var r=t(74689);const i=e=>{var n,t,r;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(n=null==e?void 0:e.roleId)&&void 0!==n?n:null==e?void 0:e.id)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id};function o(e){return e&&!e.orgId}function l(e){return!e.isPortal||!!e.isBackedBySDS}function s(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function a(e){return"org_admin"===i(e)||"account_admin"===i(e)}function u(e){return"org_user"===i(e)||"account_user"===i(e)}function c(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function d(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:updateItemCategorySchema"))}function p(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:updateGroups"))}function v(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function f(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function m(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function g(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function h(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function y(e,n,t,r){const i=r&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(r.type),o=((null==n?void 0:n.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!n||!a(n)&&!o||!(null==t?void 0:t.isPortal)&&!i)}function b(e){return!!e&&(!c(e)||c(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const P=({items:e,user:n,portal:t})=>{const i=e[0],o=i.owner;if(t.isPortal&&o!==n.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const l=(0,r.u)(i,n),s=c(n),a=S(n),u=(0,r.c)(i,n)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(n)&&!s&&(function(e,n){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(n)||v(e)||f(e)||!!n.canSharePublic&&m(e)}(n,t)||S(n));return l||u||(0,r.d)(e,n)&&a};function S(e){return w(e)||g(e)||h(e)}},73411:(e,n,t)=>{t.d(n,{a:()=>$,b:()=>c,c:()=>x,d:()=>f,e:()=>m,f:()=>h,g:()=>d,h:()=>v,i:()=>w,j:()=>y,k:()=>S,l:()=>a,m:()=>I,n:()=>u,o:()=>T,p:()=>O,q:()=>l,r:()=>P,s:()=>b,t:()=>k,u:()=>C});var r=t(20164),i=t(12046),o=t(49853);async function l(){return new Promise((async e=>{const{portal:n}=o.c;if(null==n?void 0:n.isPortal){const t=n.helperServices.geocode,i=await function(e){const{config:n,portal:t}=o.c;return new Promise((async(i,o)=>{const l=e.filter((e=>s(e.url,t))).filter((e=>e.isEsriBatchGeocoder))[0];if(l){const e=l.url.split("/servers/")[1].split("/rest/services/")[0],t=`${n.restBaseUrl}/content/items/${e}`;try{i((await(0,r.r)(t)).url)}catch(e){o(e)}}else o("No world geocoder configured")}))}(t);e(i)}else{const t=function(e){const n=null==e?void 0:e.portalHostname;return-1!==n.indexOf("dev")?"dev":-1!==n.indexOf("qa")?"qa":""}(n);e(`https://geocode${t}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function s(e="",n){var t;const r=n.isPortal,i=e.toLowerCase(),o=i.indexOf("/geocodeserver")>-1&&i.indexOf("/rest/services/")>-1,l=r&&i.indexOf(null===(t=n.portalHostname)||void 0===t?void 0:t.toLowerCase())>-1,s=!r&&i.indexOf("utility")&&i.indexOf(".arcgis.com")>-1;return o&&(l||s)}function a(e){return(0,i.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function u(e){return(0,i.a)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}function c(e,n){return!(0,i.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&(!n.isPortal||n.isBackedBySDS)}function d(e,n){return!(0,i.a)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&(!n.isPortal||n.isBackedBySDS)}function p(e){return!(0,i.a)(e)&&!0}function v(e){var n;return!(0,i.a)(e)&&(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:publishScenes"))}const f=e=>!(0,i.a)(e);function m(e,n,t){var r,i;const o=!!(null===(i=null===(r=n.helperServices)||void 0===r?void 0:r.rasterAnalytics)||void 0===i?void 0:i.url),l=function(e,n,t){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishDynamicImagery"))&&(n.isPortal||g(t))}(e,n,t),s=n.isPortal?l:l||function(e,n,t){var r;return(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishTiledImagery"))&&!n.isPortal&&g(t)}(e,n,t);return o&&s}function g(e){return null==e?void 0:e.some((e=>{var n;return null===(n=e.entitlements)||void 0===n?void 0:n.some((e=>"image"===e.toLowerCase()))}))}async function h(e){var n;const{userLicensedItems:t}=await(0,r.r)(`${null!==(n=e.restUrl)&&void 0!==n?n:e.portalUrl}/community/self?returnUserLicensedItems=true`);return t}function w(e,n){var t,o;const l=null===(t=n.helperServices)||void 0===t?void 0:t.geocode.some((({url:e})=>s(e,n))),a=null!==(o=null==e?void 0:e.privileges)&&void 0!==o?o:[];return!(0,i.a)(e)&&l&&(!n.isPortal||!(0,r.i)(n)&&a.includes("portal:user:viewOrgItems")&&a.includes("portal:user:createItem"))}const y=e=>!(0,i.a)(e);function b(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function P(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function S(e,n){var t;return!!n.isPortal&&!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:registerDataStores"))}function I(e){return!(0,i.a)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}function x(e,n,t){return!n.isPortal&&c(e,n)&&function(e,n,t){return!(0,i.a)(e)&&!!n.supportsHostedServices&&a(e)&&(d(e,n)||c(e,n)||v(e)||p(e)||m(e,n,t))}(e,n,t)}function $(e,n,t){switch(n){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return c(e,t);case"Tile Package":return d(e,t);case"Vector Tile Package":return p(e);case"Scene Package":return v(e);case"Service Definition":return function(e,n){return c(e,n)&&d(e,n)}(e,t);default:return!0}}function T(e,n){var t,r,o;return(0,i.b)(e)||function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:manageCredits"))}(e)||!!((null!==(t=null==e?void 0:e.assignedCredits)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.assignedCredits)>-1&&(null===(o=null==n?void 0:n.portalProperties)||void 0===o?void 0:o.showCreditsOnProfile))}const O=e=>!1;function k(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:viewGroups"))}function C(e){return(0,i.b)(e)||function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:viewUsers"))}(e)&&function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:viewItems"))}(e)&&(function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:updateItems"))}(e)||function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:deleteItems"))}(e)||function(e){var n;return!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:admin:reassignItems"))}(e))}},82102:(e,n,t)=>{t.d(n,{a:()=>g,b:()=>x,c:()=>T,d:()=>y,e:()=>h,f:()=>d,g:()=>m,h:()=>p,i:()=>v,j:()=>S,k:()=>f,l:()=>I,m:()=>w,n:()=>P,s:()=>$,u:()=>b});var r=t(20164),i=t(49853),o=t(74689),l=t(12846),s=t(20206),a=t(65804),u=t(64606),c=t(13615);function d({title:e,snippet:n,tags:t}){return{title:e,snippet:n,tags:(0,u.f)(t).join(",")}}const p=(e,n)=>{var t;const{file:r,type:i,extension:o,dataUrl:l,properties:s,typeKeywords:a}=n,u=d(e),p=[...null===(t=c.a[i])||void 0===t?void 0:t.typeKeywords,...a?[a]:[],o].join(", "),v=Object.assign({type:i,extension:o},s?{properties:JSON.stringify(s)}:{}),f=r?{file:r}:{dataUrl:l.includes('httpHeaders={"Authorization"')?l:encodeURI(l)};return Object.assign(Object.assign(Object.assign(Object.assign({},v),f),u),{typeKeywords:p})},v=(e,n)=>{const t=p(e,n),r=!!n.addAsUniqueFile,i=new FormData;return i.append("f","json"),i.append("async","true"),Object.keys(t).forEach((e=>{if(r&&"file"===e){const r=n.fileName;i.append(e,t[e],r)}else i.append(e,t[e])})),i},f=(e,n)=>{const t=(null==n?void 0:n.id)&&!function(e){return["all","recycle"].includes(e.id)||e.id===e.username}(n)?`/${n.id}`:"";return`${e.userContentUrl}${t}/addItem`},m=(e,n)=>`${(0,r.g)(n)}content/items/${e}`,g=async(e,n)=>{try{const t=m(e,n);return{result:await(0,r.r)(t)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},h=async(e,n)=>{const t=new FormData;switch(n.type){case"base64":t.append("data",n.data);break;case"url":t.append("url",n.url);break;case"file":t.append("file",n.file)}return t.append("f","json"),t.append("token",(0,r.e)(i.c.portal)),await(0,r.d)(`${(0,r.g)()}content/users/${i.c.user.username}/items/${e}/updateThumbnail`,t,{},"post")};async function w(e,n){const t=`${i.c.user.userContentUrl}/moveItems`;return await(0,r.r)(t,{items:e,folder:n},{},"post")}async function y(e,{permanentDelete:n=!1}={}){const t=`${i.c.user.userContentUrl}/items/${e}/delete`;return await(0,r.r)(t,{permanentDelete:n},{},"post")}async function b(e,n,t){var o;const l=null!==(o=null!=t?t:i.c.user)&&void 0!==o?o:i.c.portal.user,u=`${"append"===a.u.workflow?s.a.existingItem.itemOwner.userContentUrl:l.userContentUrl}/items/${e}/update`;return(0,r.r)(u,n,{},"post")}const P=(e,n)=>{const t=`${(0,r.g)(n)}content/items/${e}/data`;return(0,r.r)(t)},S=async(e,n)=>{const t=`${i.c.user.userContentUrl}/items/${e}/commit`,o=v(l.i,n);return o.delete("file"),await(0,r.d)(t,o,{},"post")},I=async e=>{const n=`${i.c.user.userContentUrl}/items/${e}/cancel`;return await(0,r.r)(n,{},{},"post")},x=async e=>{const n=f(i.c.user,l.i.folder),t=d(l.i),o=Object.assign({},e);return delete o.initialFolders,delete o.initialTitle,delete o.newItemMode,delete o.serviceInfo,delete o.allowStoredAuth,delete o.isSecured,delete o.checkAuth,delete o.agsType,delete o.developerCredentialsType,delete o.applicationEnvironment,delete o.apiKeyReferrerUrls,delete o.developerCredentialsRedirectUrls,delete o.developerPrivileges,await(0,r.r)(n,Object.assign(Object.assign(Object.assign(Object.assign({},o),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),t),{},"post")};async function $(e,n,t,l,s,a){null!=s||(s=i.c.user),null!=a||(a=i.c.portal);const u=t&&t.id!==s.username?t.id:"root",c=e.replace(`.${l}`,"");if("featurecollection"===l||"Microsoft Excel"===n)return null;const d=[`title: "${c}"`,`type: "${n}"`,`owner: "${s.username}"`,`ownerfolder: "${u}"`],p=await(0,r.r)(`${(0,r.g)(a)}search`,{filter:d.join(" AND "),num:1});return(null==p?void 0:p.total)>0?{num:p.num,itemURLList:p.results.map((e=>(0,o.g)(e.id,i.c.config.baseUrl)))}:null}async function T(e,n){const t=(0,u.a)(e),{user:s,config:a,portal:c}=i.c,{folder:d}=l.i,p=d&&d.id!==s.username?d.id:"root",v=[`owner: "${s.username}"`,`ownerfolder: "${p}"`];n&&v.push(`type: "${n}"`);let f,m=1;for(let e=0;e<10&&!f&&m>-1;e++){const{nextStart:e,results:n}=await(0,r.r)(`${(0,r.g)()}search`,{[c.isPortal?"q":"filter"]:v.join(" AND "),num:100,start:m});f=n.find((e=>e.name===t)),m=e}return f?(0,o.g)(f.id,a.baseUrl):null}},65804:(e,n,t)=>{t.d(n,{a:()=>r,u:()=>i});const r=(0,t(70464).c)({nextText:"next",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),i=r.state},34851:(e,n,t)=>{t.d(n,{a:()=>s,r:()=>l});var r=t(12846),i=t(20206),o=t(65804);function l(){i.d.reset(),r.a.reset()}const s=()=>{if(i.a.existingItem||"register"===o.u.workflow)return;i.d.reset();const e=r.i.folder;r.a.reset(),r.i.folder=e}}}]);