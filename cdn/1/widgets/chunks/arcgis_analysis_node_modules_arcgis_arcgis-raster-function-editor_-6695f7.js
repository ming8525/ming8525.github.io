"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-6695f7"],{

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-unit-picker-d169c208.js":
/*!****************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-unit-picker-d169c208.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ RfxUnitPicker)
/* harmony export */ });
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");

















const HelpClickHandlerKeys = {
    fromUnitHelpClickHandler: "fromUnitHelpClickHandler",
    toUnitHelpClickHandler: "toUnitHelpClickHandler"
};

const RfxUnitPicker = class {
    constructor(hostRef) {
        (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.rfxArgumentChange = (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "rfxArgumentChange", 7);
        this.unitTypes = {
            speed: [100, 101, 102, 103, 104],
            temperature: [200, 201, 202],
            distance: [1, 3, 4, 5, 6, 7, 8, 9, 10, 12]
        };
        /**
         * Stores event handlers for help action click, stored in connected callback to avoid
         * fetching function on each render ( to avoid common bad practice )
         */
        this.helpActionClickEventHandlers = new Map();
        this.handleFromUnitChange = (e) => {
            e.stopPropagation();
            const element = e.target;
            const value = parseInt(element.value);
            this.fromUnitValue = value;
            this.fromUnit.value = value;
            this.configureFromUnitEnum();
        };
        this.handleToUnitChange = (e) => {
            e.stopPropagation();
            const element = e.target;
            const value = parseInt(element.value);
            this.toUnitValue = value;
            this.toUnit.value = value;
        };
        this.widgetArgs = undefined;
        this.unitsEnum = [];
        this.toUnitsEnum = [];
    }
    //--------------------------------------------------------------------------
    //
    //  Lifecycle
    //
    //--------------------------------------------------------------------------
    connectedCallback() {
        this.processWidgetArgs();
    }
    componentWillLoad() {
        this.setupInitialState();
        this.configureFromUnitEnum();
    }
    componentDidLoad() {
        this.attachHelpClickEventHandlers();
    }
    //--------------------------------------------------------------------------
    //
    //  Private Methods
    //
    //--------------------------------------------------------------------------
    /**
     * All validation logic of widgetArgs -> mainly the inputArgs and triggerAttributes
     * goes here
     */
    processWidgetArgs() {
        const fromUnitArg = this.widgetArgs.inputArgs.FromUnit;
        this.fromUnit = fromUnitArg;
        this.fromUnitValue = fromUnitArg.value;
        // rfxArg.input = this.hostElement;
        const toUnitArg = this.widgetArgs.inputArgs.ToUnit;
        this.toUnit = toUnitArg;
        this.toUnitValue = toUnitArg.value;
        // rfxArg.input = this.hostElement;
    }
    setupInitialState() {
        const { rasterFunctionEnums } = this.widgetArgs;
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_2__.i)(rasterFunctionEnums?.esriUnitConversionFxUnitTypes) === true) {
            return;
        }
        this.unitsEnum = rasterFunctionEnums.esriUnitConversionFxUnitTypes.map((unit) => ({
            key: String(unit.key),
            label: unit.label
        }));
    }
    configureFromUnitEnum() {
        const fromUnit = this.fromUnitValue;
        const selectedUnitType = Object.keys(this.unitTypes).find((unitTypeName) => this.unitTypes[unitTypeName].includes(fromUnit));
        if ((0,_type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_2__.i)(selectedUnitType) !== true) {
            this.toUnitsEnum = this.unitsEnum.filter((unit) => this.unitTypes[selectedUnitType].includes(parseInt(unit.key)));
        }
        // Done so that select "always" has a value selected
        const toUnit = String(this.toUnitValue);
        const isToUnitValid = this.toUnitsEnum.some((toUnitOption) => toUnitOption.key === toUnit);
        if (isToUnitValid !== true) {
            this.toUnitValue = parseInt(this.toUnitsEnum[0]?.key);
        }
    }
    attachHelpClickEventHandlers() {
        const fromUnitHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.fromUnit.displayName,
            referenceElement: this.fromUnitWidgetContainer,
            helpTextID: this.fromUnit?.helpTextID
        });
        const toUnitHelpClickHandler = this.widgetArgs.onHelpActionClick({
            heading: this.toUnit.displayName,
            referenceElement: this.toUnitWidgetContainer,
            helpTextID: this.toUnit?.helpTextID
        });
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.fromUnitHelpClickHandler, fromUnitHelpClickHandler);
        this.helpActionClickEventHandlers.set(HelpClickHandlerKeys.toUnitHelpClickHandler, toUnitHelpClickHandler);
    }
    render() {
        return ((0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "esriRFxBandCombinationEditor" }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.U.Scale, layout: "default", ref: (e) => {
                this.fromUnitWidgetContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.fromUnit.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.fromUnitHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dtex-common-select", { options: this.unitsEnum, value: String(this.fromUnitValue), onRfxArgumentChange: this.handleFromUnitChange })), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-label", { alignment: "start", scale: _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_3__.U.Scale, layout: "default", ref: (e) => {
                this.toUnitWidgetContainer = e;
            } }, (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-label", { label: this.toUnit.displayName, onRfxLabelHelpActionClick: () => this.helpActionClickEventHandlers?.get(HelpClickHandlerKeys.toUnitHelpClickHandler)() }), (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.h)("rfx-dtex-common-select", { options: this.toUnitsEnum, value: String(this.toUnitValue), onRfxArgumentChange: this.handleToUnitChange }))));
    }
    get hostElement() { return (0,_index_da1b7138_js__WEBPACK_IMPORTED_MODULE_0__.a)(this); }
};



//# sourceMappingURL=rfx-cte-unit-picker-d169c208.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-unit-picker.entry.js":
/*!*************************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-unit-picker.entry.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rfx_cte_unit_picker: () => (/* reexport safe */ _rfx_cte_unit_picker_d169c208_js__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _rfx_cte_unit_picker_d169c208_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rfx-cte-unit-picker-d169c208.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/rfx-cte-unit-picker-d169c208.js");
/* harmony import */ var _index_da1b7138_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-da1b7138.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/index-da1b7138.js");
/* harmony import */ var _arcgis_core_core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/lang.js */ "@arcgis/core/core/lang.js");
/* harmony import */ var _type_gaurds_1840747f_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./type-gaurds-1840747f.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js");
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");
/* harmony import */ var _ui_utils_928a4096_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ui-utils-928a4096.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js");
/* harmony import */ var _arcgis_core_identity_IdentityManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/identity/IdentityManager.js */ "@arcgis/core/identity/IdentityManager.js");
/* harmony import */ var _arcgis_core_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/core/core/urlUtils.js */ "@arcgis/core/core/urlUtils.js");
/* harmony import */ var _arcgis_core_layers_Layer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @arcgis/core/layers/Layer.js */ "@arcgis/core/layers/Layer.js");
/* harmony import */ var _arcgis_core_layers_ImageryLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @arcgis/core/layers/ImageryLayer.js */ "@arcgis/core/layers/ImageryLayer.js");
/* harmony import */ var _arcgis_core_smartMapping_raster_renderers_stretch_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @arcgis/core/smartMapping/raster/renderers/stretch.js */ "@arcgis/core/smartMapping/raster/renderers/stretch.js");
/* harmony import */ var _arcgis_core_request_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/core/request.js */ "@arcgis/core/request.js");
/* harmony import */ var _arcgis_core_rest_support_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @arcgis/core/rest/support/AlgorithmicColorRamp.js */ "@arcgis/core/rest/support/AlgorithmicColorRamp.js");
/* harmony import */ var _arcgis_core_rest_support_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @arcgis/core/rest/support/MultipartColorRamp.js */ "@arcgis/core/rest/support/MultipartColorRamp.js");
/* harmony import */ var _arcgis_core_Color_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @arcgis/core/Color.js */ "@arcgis/core/Color.js");
/* harmony import */ var _colorRampUtils_8bdd46c5_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./colorRampUtils-8bdd46c5.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/colorRampUtils-8bdd46c5.js");
/* harmony import */ var _arcgis_core_rest_geoprocessor_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @arcgis/core/rest/geoprocessor.js */ "@arcgis/core/rest/geoprocessor.js");
/* harmony import */ var _arcgis_core_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @arcgis/core/portal/PortalItem.js */ "@arcgis/core/portal/PortalItem.js");



















//# sourceMappingURL=rfx-cte-unit-picker.entry.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js":
/*!********************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/type-gaurds-1840747f.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ ARGS_KEYWORD),
/* harmony export */   F: () => (/* binding */ FUNCTION_KEYWORD),
/* harmony export */   R: () => (/* binding */ RFV_TYPE),
/* harmony export */   T: () => (/* binding */ TYPE_KEYWORD),
/* harmony export */   a: () => (/* binding */ isRFxArg),
/* harmony export */   b: () => (/* binding */ RFT_TYPE),
/* harmony export */   c: () => (/* binding */ isReferencedObject),
/* harmony export */   d: () => (/* binding */ isNumber),
/* harmony export */   e: () => (/* binding */ isWidgetValueBoolean),
/* harmony export */   f: () => (/* binding */ isColorRamp),
/* harmony export */   g: () => (/* binding */ isRecordSet),
/* harmony export */   h: () => (/* binding */ isFeatureLayer),
/* harmony export */   i: () => (/* binding */ isEmptyDataItem),
/* harmony export */   j: () => (/* binding */ isTileLayer),
/* harmony export */   k: () => (/* binding */ isDynamicImageryLayer),
/* harmony export */   l: () => (/* binding */ isImageryLayer),
/* harmony export */   m: () => (/* binding */ isImageryTileLayer)
/* harmony export */ });
/* harmony import */ var _getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_getTag-96af029d.js */ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/_getTag-96af029d.js");


/** `Object#toString` result references. */
var mapTag = '[object Map]',
    setTag = '[object Set]';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Checks if `value` is an empty object, collection, map, or set.
 *
 * Objects are considered empty if they have no own enumerable string keyed
 * properties.
 *
 * Array-like values such as `arguments` objects, arrays, buffers, strings, or
 * jQuery-like collections are considered empty if they have a `length` of `0`.
 * Similarly, maps and sets are considered empty if they have a `size` of `0`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is empty, else `false`.
 * @example
 *
 * _.isEmpty(null);
 * // => true
 *
 * _.isEmpty(true);
 * // => true
 *
 * _.isEmpty(1);
 * // => true
 *
 * _.isEmpty([1, 2, 3]);
 * // => false
 *
 * _.isEmpty({ 'a': 1 });
 * // => false
 */
function isEmpty(value) {
  if (value == null) {
    return true;
  }
  if ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.i)(value) &&
      ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) || typeof value == 'string' || typeof value.splice == 'function' ||
        (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.b)(value) || (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.c)(value) || (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.d)(value))) {
    return !value.length;
  }
  var tag = (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.g)(value);
  if (tag == mapTag || tag == setTag) {
    return !value.size;
  }
  if ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.e)(value)) {
    return !(0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.f)(value).length;
  }
  for (var key in value) {
    if (hasOwnProperty.call(value, key)) {
      return false;
    }
  }
  return true;
}

const RFT_TYPE = "RasterFunctionTemplate";
const TYPE_KEYWORD = "type";
const RFV_TYPE = "RasterFunctionVariable";
const ARGS_KEYWORD = "arguments";
const FUNCTION_KEYWORD = "function";
function isReferencedObject(obj) {
    if (!obj) {
        return false;
    }
    if (obj._object_ref_id != null) {
        return true;
    }
    return false;
}
function isNumber(x) {
    x = String(x).trim();
    if (x === "") {
        return false;
    }
    return /^[+-]?(\d+)?(\.\d+)?$/.test(x);
}
function isWidgetValueBoolean(x) {
    x = String(x).trim();
    return ["true", "false"].indexOf(x) >= 0;
}
function isColorRamp(rfxArg) {
    if (!rfxArg) {
        return false;
    }
    if (rfxArg.type && rfxArg.type.toLowerCase().indexOf("colorramp") >= 0) {
        return true;
    }
    if (rfxArg.value && rfxArg.value.type && rfxArg.value.type.toLowerCase().indexOf("colorramp") >= 0) {
        return true;
    }
    return false;
}
function isRecordSet(rfxArg) {
    return rfxArg.type && rfxArg.type.toLowerCase().indexOf("recordset") >= 0;
}
/**
 * Determines whether the given RFT element is an RFx argument.
 *
 * @param {any} rftElement - The RFT element to check.
 * @returns {boolean} `true` if the given element is RasterFunctionTemplate,
 * RasterFunctionVariable, isColorRamp, isRecordSet; `false` otherwise.
 */
function isRFxArg(rftElement) {
    if (!rftElement) {
        return false;
    }
    const type = rftElement.type;
    return [RFT_TYPE, RFV_TYPE].indexOf(type) >= 0 || isColorRamp(rftElement) || isRecordSet(rftElement);
}
/**
 * Determines if the input is a FeatureLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.FeatureLayer} layer is a FeatureLayer
 */
function isFeatureLayer(layer) {
    return layer.type === "feature";
}
/**
 * Determines if the input is a TileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.TileLayer} layer is a TileLayer
 */
function isTileLayer(layer) {
    return layer.type === "tile";
}
/**
 * Determines if the input is a ImageryTileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryLayer} layer is a ImageryLayer
 */
function isDynamicImageryLayer(layer) {
    return (layer.type === "imagery-tile" &&
        layer.sourceJSON.capabilities.toLowerCase().indexOf("tilesonly") < 0);
}
/**
 * Determines if the input is a ImageryLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryLayer} layer is a ImageryLayer
 */
function isImageryLayer(layer) {
    return layer.type === "imagery" || isDynamicImageryLayer(layer);
}
/**
 * Determines if the input is a ImageryTileLayer
 * @param {__esri.Layer} layer the layer to check the type of
 * @returns {layer is __esri.ImageryTileLayer} layer is a ImageryTileLayer
 */
function isImageryTileLayer(layer) {
    return layer.type === "imagery-tile" && !isDynamicImageryLayer(layer);
}
function isEveryPropertyEmpty(value) {
    let isAllPropsEmpty = true;
    if (typeof value === "object" && (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) === false) {
        // using for-in as it will work with objects with properties that set via accessors as well
        for (const prop in value) {
            // This will tell the TypeScript compiler that the obj object has a string index signature,
            // and will allow to access its properties using a string index without getting the "Element implicitly has an 'any' type" error.
            const propValue = value?.[prop];
            if (value.hasOwnProperty(prop) === true && propValue !== undefined && propValue !== null && propValue !== "") {
                isAllPropsEmpty = false;
                break;
            }
        }
    }
    return isAllPropsEmpty;
}
/**
 * Check for an empty value for data items like GPString and Field.
 * @param value data item value.
 * @returns whether the value is considered empty.
 */
function isEmptyDataItem(value) {
    return (value === undefined ||
        value === null ||
        // single-select, "" is a special case for strings
        (typeof value === "string" && value === "") ||
        // single-select, empty objects are a special case for nested values
        ((0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.h)(value) && isEmpty(value)) ||
        // multi-select
        (Array.isArray(value) && value.length < 1) ||
        // only testing objects which are not arrays
        // TODO: combine isEveryPropertyEmpty and isEmptyDataItem to single function
        (typeof value === "object" && (0,_getTag_96af029d_js__WEBPACK_IMPORTED_MODULE_0__.a)(value) === false && isEveryPropertyEmpty(value)));
}



//# sourceMappingURL=type-gaurds-1840747f.js.map

/***/ }),

/***/ "./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js":
/*!*****************************************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/analysis/node_modules/@arcgis/arcgis-raster-function-editor/dist/esm/ui-utils-928a4096.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CalciteScale),
/* harmony export */   U: () => (/* binding */ UIDefaults),
/* harmony export */   a: () => (/* binding */ CalciteOverlayPositioning)
/* harmony export */ });
const UIDefaults = {
    Scale: "s",
    PopoverTimer: 60
};
const CalciteScale = {
    s: "s",
    m: "m"
};
const CalciteOverlayPositioning = {
    absolute: "absolute",
    fixed: "fixed"
};



//# sourceMappingURL=ui-utils-928a4096.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvYXJjZ2lzX2FuYWx5c2lzX25vZGVfbW9kdWxlc19hcmNnaXNfYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3JfLTY2OTVmNy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRztBQUMvRDtBQUM4QjtBQUNSO0FBQ1A7QUFDWDtBQUNEO0FBQ087QUFDa0I7QUFDOUI7QUFDMEI7QUFDRjtBQUMxQjtBQUNPO0FBQ0s7QUFDQTs7QUFFM0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCLGlDQUFpQyxxREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEMsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFDLFVBQVUsdUNBQXVD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RSIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FuYWx5c2lzL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2FyY2dpcy1yYXN0ZXItZnVuY3Rpb24tZWRpdG9yL2Rpc3QvZXNtL3JmeC1jdGUtdW5pdC1waWNrZXItZDE2OWMyMDguanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYW5hbHlzaXMvbm9kZV9tb2R1bGVzL0BhcmNnaXMvYXJjZ2lzLXJhc3Rlci1mdW5jdGlvbi1lZGl0b3IvZGlzdC9lc20vcmZ4LWN0ZS11bml0LXBpY2tlci5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hbmFseXNpcy9ub2RlX21vZHVsZXMvQGFyY2dpcy9hcmNnaXMtcmFzdGVyLWZ1bmN0aW9uLWVkaXRvci9kaXN0L2VzbS91aS11dGlscy05MjhhNDA5Ni5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGMgYXMgY3JlYXRlRXZlbnQsIGgsIGEgYXMgZ2V0RWxlbWVudCB9IGZyb20gJy4vaW5kZXgtZGExYjcxMzguanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS9sYW5nLmpzJztcbmltcG9ydCB7IGkgYXMgaXNFbXB0eURhdGFJdGVtIH0gZnJvbSAnLi90eXBlLWdhdXJkcy0xODQwNzQ3Zi5qcyc7XG5pbXBvcnQgeyBVIGFzIFVJRGVmYXVsdHMgfSBmcm9tICcuL3VpLXV0aWxzLTkyOGE0MDk2LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2lkZW50aXR5L0lkZW50aXR5TWFuYWdlci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL3VybFV0aWxzLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL2xheWVycy9MYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvSW1hZ2VyeUxheWVyLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3NtYXJ0TWFwcGluZy9yYXN0ZXIvcmVuZGVyZXJzL3N0cmV0Y2guanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVxdWVzdC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvQWxnb3JpdGhtaWNDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L011bHRpcGFydENvbG9yUmFtcC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9Db2xvci5qcyc7XG5pbXBvcnQgJy4vY29sb3JSYW1wVXRpbHMtOGJkZDQ2YzUuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9nZW9wcm9jZXNzb3IuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcG9ydGFsL1BvcnRhbEl0ZW0uanMnO1xuXG5jb25zdCBIZWxwQ2xpY2tIYW5kbGVyS2V5cyA9IHtcbiAgICBmcm9tVW5pdEhlbHBDbGlja0hhbmRsZXI6IFwiZnJvbVVuaXRIZWxwQ2xpY2tIYW5kbGVyXCIsXG4gICAgdG9Vbml0SGVscENsaWNrSGFuZGxlcjogXCJ0b1VuaXRIZWxwQ2xpY2tIYW5kbGVyXCJcbn07XG5cbmNvbnN0IFJmeFVuaXRQaWNrZXIgPSBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICB0aGlzLnJmeEFyZ3VtZW50Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJyZnhBcmd1bWVudENoYW5nZVwiLCA3KTtcbiAgICAgICAgdGhpcy51bml0VHlwZXMgPSB7XG4gICAgICAgICAgICBzcGVlZDogWzEwMCwgMTAxLCAxMDIsIDEwMywgMTA0XSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBbMjAwLCAyMDEsIDIwMl0sXG4gICAgICAgICAgICBkaXN0YW5jZTogWzEsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMl1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyBldmVudCBoYW5kbGVycyBmb3IgaGVscCBhY3Rpb24gY2xpY2ssIHN0b3JlZCBpbiBjb25uZWN0ZWQgY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgICogZmV0Y2hpbmcgZnVuY3Rpb24gb24gZWFjaCByZW5kZXIgKCB0byBhdm9pZCBjb21tb24gYmFkIHByYWN0aWNlIClcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVGcm9tVW5pdENoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbVVuaXRWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5mcm9tVW5pdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jb25maWd1cmVGcm9tVW5pdEVudW0oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb1VuaXRDaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnRvVW5pdFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnRvVW5pdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLndpZGdldEFyZ3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudW5pdHNFbnVtID0gW107XG4gICAgICAgIHRoaXMudG9Vbml0c0VudW0gPSBbXTtcbiAgICB9XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIExpZmVjeWNsZVxuICAgIC8vXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NXaWRnZXRBcmdzKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgICAgICB0aGlzLnNldHVwSW5pdGlhbFN0YXRlKCk7XG4gICAgICAgIHRoaXMuY29uZmlndXJlRnJvbVVuaXRFbnVtKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoSGVscENsaWNrRXZlbnRIYW5kbGVycygpO1xuICAgIH1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLyoqXG4gICAgICogQWxsIHZhbGlkYXRpb24gbG9naWMgb2Ygd2lkZ2V0QXJncyAtPiBtYWlubHkgdGhlIGlucHV0QXJncyBhbmQgdHJpZ2dlckF0dHJpYnV0ZXNcbiAgICAgKiBnb2VzIGhlcmVcbiAgICAgKi9cbiAgICBwcm9jZXNzV2lkZ2V0QXJncygpIHtcbiAgICAgICAgY29uc3QgZnJvbVVuaXRBcmcgPSB0aGlzLndpZGdldEFyZ3MuaW5wdXRBcmdzLkZyb21Vbml0O1xuICAgICAgICB0aGlzLmZyb21Vbml0ID0gZnJvbVVuaXRBcmc7XG4gICAgICAgIHRoaXMuZnJvbVVuaXRWYWx1ZSA9IGZyb21Vbml0QXJnLnZhbHVlO1xuICAgICAgICAvLyByZnhBcmcuaW5wdXQgPSB0aGlzLmhvc3RFbGVtZW50O1xuICAgICAgICBjb25zdCB0b1VuaXRBcmcgPSB0aGlzLndpZGdldEFyZ3MuaW5wdXRBcmdzLlRvVW5pdDtcbiAgICAgICAgdGhpcy50b1VuaXQgPSB0b1VuaXRBcmc7XG4gICAgICAgIHRoaXMudG9Vbml0VmFsdWUgPSB0b1VuaXRBcmcudmFsdWU7XG4gICAgICAgIC8vIHJmeEFyZy5pbnB1dCA9IHRoaXMuaG9zdEVsZW1lbnQ7XG4gICAgfVxuICAgIHNldHVwSW5pdGlhbFN0YXRlKCkge1xuICAgICAgICBjb25zdCB7IHJhc3RlckZ1bmN0aW9uRW51bXMgfSA9IHRoaXMud2lkZ2V0QXJncztcbiAgICAgICAgaWYgKGlzRW1wdHlEYXRhSXRlbShyYXN0ZXJGdW5jdGlvbkVudW1zPy5lc3JpVW5pdENvbnZlcnNpb25GeFVuaXRUeXBlcykgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuaXRzRW51bSA9IHJhc3RlckZ1bmN0aW9uRW51bXMuZXNyaVVuaXRDb252ZXJzaW9uRnhVbml0VHlwZXMubWFwKCh1bml0KSA9PiAoe1xuICAgICAgICAgICAga2V5OiBTdHJpbmcodW5pdC5rZXkpLFxuICAgICAgICAgICAgbGFiZWw6IHVuaXQubGFiZWxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb25maWd1cmVGcm9tVW5pdEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGZyb21Vbml0ID0gdGhpcy5mcm9tVW5pdFZhbHVlO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFVuaXRUeXBlID0gT2JqZWN0LmtleXModGhpcy51bml0VHlwZXMpLmZpbmQoKHVuaXRUeXBlTmFtZSkgPT4gdGhpcy51bml0VHlwZXNbdW5pdFR5cGVOYW1lXS5pbmNsdWRlcyhmcm9tVW5pdCkpO1xuICAgICAgICBpZiAoaXNFbXB0eURhdGFJdGVtKHNlbGVjdGVkVW5pdFR5cGUpICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnRvVW5pdHNFbnVtID0gdGhpcy51bml0c0VudW0uZmlsdGVyKCh1bml0KSA9PiB0aGlzLnVuaXRUeXBlc1tzZWxlY3RlZFVuaXRUeXBlXS5pbmNsdWRlcyhwYXJzZUludCh1bml0LmtleSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb25lIHNvIHRoYXQgc2VsZWN0IFwiYWx3YXlzXCIgaGFzIGEgdmFsdWUgc2VsZWN0ZWRcbiAgICAgICAgY29uc3QgdG9Vbml0ID0gU3RyaW5nKHRoaXMudG9Vbml0VmFsdWUpO1xuICAgICAgICBjb25zdCBpc1RvVW5pdFZhbGlkID0gdGhpcy50b1VuaXRzRW51bS5zb21lKCh0b1VuaXRPcHRpb24pID0+IHRvVW5pdE9wdGlvbi5rZXkgPT09IHRvVW5pdCk7XG4gICAgICAgIGlmIChpc1RvVW5pdFZhbGlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnRvVW5pdFZhbHVlID0gcGFyc2VJbnQodGhpcy50b1VuaXRzRW51bVswXT8ua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hIZWxwQ2xpY2tFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBjb25zdCBmcm9tVW5pdEhlbHBDbGlja0hhbmRsZXIgPSB0aGlzLndpZGdldEFyZ3Mub25IZWxwQWN0aW9uQ2xpY2soe1xuICAgICAgICAgICAgaGVhZGluZzogdGhpcy5mcm9tVW5pdC5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQ6IHRoaXMuZnJvbVVuaXRXaWRnZXRDb250YWluZXIsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLmZyb21Vbml0Py5oZWxwVGV4dElEXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b1VuaXRIZWxwQ2xpY2tIYW5kbGVyID0gdGhpcy53aWRnZXRBcmdzLm9uSGVscEFjdGlvbkNsaWNrKHtcbiAgICAgICAgICAgIGhlYWRpbmc6IHRoaXMudG9Vbml0LmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudDogdGhpcy50b1VuaXRXaWRnZXRDb250YWluZXIsXG4gICAgICAgICAgICBoZWxwVGV4dElEOiB0aGlzLnRvVW5pdD8uaGVscFRleHRJRFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzLnNldChIZWxwQ2xpY2tIYW5kbGVyS2V5cy5mcm9tVW5pdEhlbHBDbGlja0hhbmRsZXIsIGZyb21Vbml0SGVscENsaWNrSGFuZGxlcik7XG4gICAgICAgIHRoaXMuaGVscEFjdGlvbkNsaWNrRXZlbnRIYW5kbGVycy5zZXQoSGVscENsaWNrSGFuZGxlcktleXMudG9Vbml0SGVscENsaWNrSGFuZGxlciwgdG9Vbml0SGVscENsaWNrSGFuZGxlcik7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IFwiZXNyaVJGeEJhbmRDb21iaW5hdGlvbkVkaXRvclwiIH0sIGgoXCJjYWxjaXRlLWxhYmVsXCIsIHsgYWxpZ25tZW50OiBcInN0YXJ0XCIsIHNjYWxlOiBVSURlZmF1bHRzLlNjYWxlLCBsYXlvdXQ6IFwiZGVmYXVsdFwiLCByZWY6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9tVW5pdFdpZGdldENvbnRhaW5lciA9IGU7XG4gICAgICAgICAgICB9IH0sIGgoXCJyZngtbGFiZWxcIiwgeyBsYWJlbDogdGhpcy5mcm9tVW5pdC5kaXNwbGF5TmFtZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzPy5nZXQoSGVscENsaWNrSGFuZGxlcktleXMuZnJvbVVuaXRIZWxwQ2xpY2tIYW5kbGVyKSgpIH0pLCBoKFwicmZ4LWR0ZXgtY29tbW9uLXNlbGVjdFwiLCB7IG9wdGlvbnM6IHRoaXMudW5pdHNFbnVtLCB2YWx1ZTogU3RyaW5nKHRoaXMuZnJvbVVuaXRWYWx1ZSksIG9uUmZ4QXJndW1lbnRDaGFuZ2U6IHRoaXMuaGFuZGxlRnJvbVVuaXRDaGFuZ2UgfSkpLCBoKFwiY2FsY2l0ZS1sYWJlbFwiLCB7IGFsaWdubWVudDogXCJzdGFydFwiLCBzY2FsZTogVUlEZWZhdWx0cy5TY2FsZSwgbGF5b3V0OiBcImRlZmF1bHRcIiwgcmVmOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG9Vbml0V2lkZ2V0Q29udGFpbmVyID0gZTtcbiAgICAgICAgICAgIH0gfSwgaChcInJmeC1sYWJlbFwiLCB7IGxhYmVsOiB0aGlzLnRvVW5pdC5kaXNwbGF5TmFtZSwgb25SZnhMYWJlbEhlbHBBY3Rpb25DbGljazogKCkgPT4gdGhpcy5oZWxwQWN0aW9uQ2xpY2tFdmVudEhhbmRsZXJzPy5nZXQoSGVscENsaWNrSGFuZGxlcktleXMudG9Vbml0SGVscENsaWNrSGFuZGxlcikoKSB9KSwgaChcInJmeC1kdGV4LWNvbW1vbi1zZWxlY3RcIiwgeyBvcHRpb25zOiB0aGlzLnRvVW5pdHNFbnVtLCB2YWx1ZTogU3RyaW5nKHRoaXMudG9Vbml0VmFsdWUpLCBvblJmeEFyZ3VtZW50Q2hhbmdlOiB0aGlzLmhhbmRsZVRvVW5pdENoYW5nZSB9KSkpKTtcbiAgICB9XG4gICAgZ2V0IGhvc3RFbGVtZW50KCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblxuZXhwb3J0IHsgUmZ4VW5pdFBpY2tlciBhcyBSIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJmeC1jdGUtdW5pdC1waWNrZXItZDE2OWMyMDguanMubWFwIiwiZXhwb3J0IHsgUiBhcyByZnhfY3RlX3VuaXRfcGlja2VyIH0gZnJvbSAnLi9yZngtY3RlLXVuaXQtcGlja2VyLWQxNjljMjA4LmpzJztcbmltcG9ydCAnLi9pbmRleC1kYTFiNzEzOC5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9jb3JlL2xhbmcuanMnO1xuaW1wb3J0ICcuL3R5cGUtZ2F1cmRzLTE4NDA3NDdmLmpzJztcbmltcG9ydCAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcbmltcG9ydCAnLi91aS11dGlscy05MjhhNDA5Ni5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9pZGVudGl0eS9JZGVudGl0eU1hbmFnZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvY29yZS91cmxVdGlscy5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9sYXllcnMvTGF5ZXIuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvbGF5ZXJzL0ltYWdlcnlMYXllci5qcyc7XG5pbXBvcnQgJ0BhcmNnaXMvY29yZS9zbWFydE1hcHBpbmcvcmFzdGVyL3JlbmRlcmVycy9zdHJldGNoLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3JlcXVlc3QuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0FsZ29yaXRobWljQ29sb3JSYW1wLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9NdWx0aXBhcnRDb2xvclJhbXAuanMnO1xuaW1wb3J0ICdAYXJjZ2lzL2NvcmUvQ29sb3IuanMnO1xuaW1wb3J0ICcuL2NvbG9yUmFtcFV0aWxzLThiZGQ0NmM1LmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3Jlc3QvZ2VvcHJvY2Vzc29yLmpzJztcbmltcG9ydCAnQGFyY2dpcy9jb3JlL3BvcnRhbC9Qb3J0YWxJdGVtLmpzJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmZ4LWN0ZS11bml0LXBpY2tlci5lbnRyeS5qcy5tYXAiLCJpbXBvcnQgeyBpIGFzIGlzQXJyYXlMaWtlLCBhIGFzIGlzQXJyYXksIGIgYXMgaXNCdWZmZXIsIGMgYXMgaXNUeXBlZEFycmF5LCBkIGFzIGlzQXJndW1lbnRzLCBnIGFzIGdldFRhZywgZSBhcyBpc1Byb3RvdHlwZSwgZiBhcyBiYXNlS2V5cywgaCBhcyBpc1BsYWluT2JqZWN0IH0gZnJvbSAnLi9fZ2V0VGFnLTk2YWYwMjlkLmpzJztcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGVtcHR5IG9iamVjdCwgY29sbGVjdGlvbiwgbWFwLCBvciBzZXQuXG4gKlxuICogT2JqZWN0cyBhcmUgY29uc2lkZXJlZCBlbXB0eSBpZiB0aGV5IGhhdmUgbm8gb3duIGVudW1lcmFibGUgc3RyaW5nIGtleWVkXG4gKiBwcm9wZXJ0aWVzLlxuICpcbiAqIEFycmF5LWxpa2UgdmFsdWVzIHN1Y2ggYXMgYGFyZ3VtZW50c2Agb2JqZWN0cywgYXJyYXlzLCBidWZmZXJzLCBzdHJpbmdzLCBvclxuICogalF1ZXJ5LWxpa2UgY29sbGVjdGlvbnMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYGxlbmd0aGAgb2YgYDBgLlxuICogU2ltaWxhcmx5LCBtYXBzIGFuZCBzZXRzIGFyZSBjb25zaWRlcmVkIGVtcHR5IGlmIHRoZXkgaGF2ZSBhIGBzaXplYCBvZiBgMGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZW1wdHksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0VtcHR5KG51bGwpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNFbXB0eSh0cnVlKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRW1wdHkoMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0VtcHR5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNFbXB0eSh7ICdhJzogMSB9KTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgICAoaXNBcnJheSh2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZS5zcGxpY2UgPT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICBpc0J1ZmZlcih2YWx1ZSkgfHwgaXNUeXBlZEFycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgcmV0dXJuICF2YWx1ZS5sZW5ndGg7XG4gIH1cbiAgdmFyIHRhZyA9IGdldFRhZyh2YWx1ZSk7XG4gIGlmICh0YWcgPT0gbWFwVGFnIHx8IHRhZyA9PSBzZXRUYWcpIHtcbiAgICByZXR1cm4gIXZhbHVlLnNpemU7XG4gIH1cbiAgaWYgKGlzUHJvdG90eXBlKHZhbHVlKSkge1xuICAgIHJldHVybiAhYmFzZUtleXModmFsdWUpLmxlbmd0aDtcbiAgfVxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29uc3QgUkZUX1RZUEUgPSBcIlJhc3RlckZ1bmN0aW9uVGVtcGxhdGVcIjtcbmNvbnN0IFRZUEVfS0VZV09SRCA9IFwidHlwZVwiO1xuY29uc3QgUkZWX1RZUEUgPSBcIlJhc3RlckZ1bmN0aW9uVmFyaWFibGVcIjtcbmNvbnN0IEFSR1NfS0VZV09SRCA9IFwiYXJndW1lbnRzXCI7XG5jb25zdCBGVU5DVElPTl9LRVlXT1JEID0gXCJmdW5jdGlvblwiO1xuZnVuY3Rpb24gaXNSZWZlcmVuY2VkT2JqZWN0KG9iaikge1xuICAgIGlmICghb2JqKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG9iai5fb2JqZWN0X3JlZl9pZCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc051bWJlcih4KSB7XG4gICAgeCA9IFN0cmluZyh4KS50cmltKCk7XG4gICAgaWYgKHggPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gL15bKy1dPyhcXGQrKT8oXFwuXFxkKyk/JC8udGVzdCh4KTtcbn1cbmZ1bmN0aW9uIGlzV2lkZ2V0VmFsdWVCb29sZWFuKHgpIHtcbiAgICB4ID0gU3RyaW5nKHgpLnRyaW0oKTtcbiAgICByZXR1cm4gW1widHJ1ZVwiLCBcImZhbHNlXCJdLmluZGV4T2YoeCkgPj0gMDtcbn1cbmZ1bmN0aW9uIGlzQ29sb3JSYW1wKHJmeEFyZykge1xuICAgIGlmICghcmZ4QXJnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHJmeEFyZy50eXBlICYmIHJmeEFyZy50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNvbG9ycmFtcFwiKSA+PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAocmZ4QXJnLnZhbHVlICYmIHJmeEFyZy52YWx1ZS50eXBlICYmIHJmeEFyZy52YWx1ZS50eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNvbG9ycmFtcFwiKSA+PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1JlY29yZFNldChyZnhBcmcpIHtcbiAgICByZXR1cm4gcmZ4QXJnLnR5cGUgJiYgcmZ4QXJnLnR5cGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwicmVjb3Jkc2V0XCIpID49IDA7XG59XG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gUkZUIGVsZW1lbnQgaXMgYW4gUkZ4IGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7YW55fSByZnRFbGVtZW50IC0gVGhlIFJGVCBlbGVtZW50IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2l2ZW4gZWxlbWVudCBpcyBSYXN0ZXJGdW5jdGlvblRlbXBsYXRlLFxuICogUmFzdGVyRnVuY3Rpb25WYXJpYWJsZSwgaXNDb2xvclJhbXAsIGlzUmVjb3JkU2V0OyBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNSRnhBcmcocmZ0RWxlbWVudCkge1xuICAgIGlmICghcmZ0RWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSByZnRFbGVtZW50LnR5cGU7XG4gICAgcmV0dXJuIFtSRlRfVFlQRSwgUkZWX1RZUEVdLmluZGV4T2YodHlwZSkgPj0gMCB8fCBpc0NvbG9yUmFtcChyZnRFbGVtZW50KSB8fCBpc1JlY29yZFNldChyZnRFbGVtZW50KTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgaW5wdXQgaXMgYSBGZWF0dXJlTGF5ZXJcbiAqIEBwYXJhbSB7X19lc3JpLkxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gY2hlY2sgdGhlIHR5cGUgb2ZcbiAqIEByZXR1cm5zIHtsYXllciBpcyBfX2VzcmkuRmVhdHVyZUxheWVyfSBsYXllciBpcyBhIEZlYXR1cmVMYXllclxuICovXG5mdW5jdGlvbiBpc0ZlYXR1cmVMYXllcihsYXllcikge1xuICAgIHJldHVybiBsYXllci50eXBlID09PSBcImZlYXR1cmVcIjtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgaW5wdXQgaXMgYSBUaWxlTGF5ZXJcbiAqIEBwYXJhbSB7X19lc3JpLkxheWVyfSBsYXllciB0aGUgbGF5ZXIgdG8gY2hlY2sgdGhlIHR5cGUgb2ZcbiAqIEByZXR1cm5zIHtsYXllciBpcyBfX2VzcmkuVGlsZUxheWVyfSBsYXllciBpcyBhIFRpbGVMYXllclxuICovXG5mdW5jdGlvbiBpc1RpbGVMYXllcihsYXllcikge1xuICAgIHJldHVybiBsYXllci50eXBlID09PSBcInRpbGVcIjtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgaW5wdXQgaXMgYSBJbWFnZXJ5VGlsZUxheWVyXG4gKiBAcGFyYW0ge19fZXNyaS5MYXllcn0gbGF5ZXIgdGhlIGxheWVyIHRvIGNoZWNrIHRoZSB0eXBlIG9mXG4gKiBAcmV0dXJucyB7bGF5ZXIgaXMgX19lc3JpLkltYWdlcnlMYXllcn0gbGF5ZXIgaXMgYSBJbWFnZXJ5TGF5ZXJcbiAqL1xuZnVuY3Rpb24gaXNEeW5hbWljSW1hZ2VyeUxheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIChsYXllci50eXBlID09PSBcImltYWdlcnktdGlsZVwiICYmXG4gICAgICAgIGxheWVyLnNvdXJjZUpTT04uY2FwYWJpbGl0aWVzLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInRpbGVzb25seVwiKSA8IDApO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCBpcyBhIEltYWdlcnlMYXllclxuICogQHBhcmFtIHtfX2VzcmkuTGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBjaGVjayB0aGUgdHlwZSBvZlxuICogQHJldHVybnMge2xheWVyIGlzIF9fZXNyaS5JbWFnZXJ5TGF5ZXJ9IGxheWVyIGlzIGEgSW1hZ2VyeUxheWVyXG4gKi9cbmZ1bmN0aW9uIGlzSW1hZ2VyeUxheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLnR5cGUgPT09IFwiaW1hZ2VyeVwiIHx8IGlzRHluYW1pY0ltYWdlcnlMYXllcihsYXllcik7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGlucHV0IGlzIGEgSW1hZ2VyeVRpbGVMYXllclxuICogQHBhcmFtIHtfX2VzcmkuTGF5ZXJ9IGxheWVyIHRoZSBsYXllciB0byBjaGVjayB0aGUgdHlwZSBvZlxuICogQHJldHVybnMge2xheWVyIGlzIF9fZXNyaS5JbWFnZXJ5VGlsZUxheWVyfSBsYXllciBpcyBhIEltYWdlcnlUaWxlTGF5ZXJcbiAqL1xuZnVuY3Rpb24gaXNJbWFnZXJ5VGlsZUxheWVyKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLnR5cGUgPT09IFwiaW1hZ2VyeS10aWxlXCIgJiYgIWlzRHluYW1pY0ltYWdlcnlMYXllcihsYXllcik7XG59XG5mdW5jdGlvbiBpc0V2ZXJ5UHJvcGVydHlFbXB0eSh2YWx1ZSkge1xuICAgIGxldCBpc0FsbFByb3BzRW1wdHkgPSB0cnVlO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgaXNBcnJheSh2YWx1ZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIHVzaW5nIGZvci1pbiBhcyBpdCB3aWxsIHdvcmsgd2l0aCBvYmplY3RzIHdpdGggcHJvcGVydGllcyB0aGF0IHNldCB2aWEgYWNjZXNzb3JzIGFzIHdlbGxcbiAgICAgICAgZm9yIChjb25zdCBwcm9wIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgdGVsbCB0aGUgVHlwZVNjcmlwdCBjb21waWxlciB0aGF0IHRoZSBvYmogb2JqZWN0IGhhcyBhIHN0cmluZyBpbmRleCBzaWduYXR1cmUsXG4gICAgICAgICAgICAvLyBhbmQgd2lsbCBhbGxvdyB0byBhY2Nlc3MgaXRzIHByb3BlcnRpZXMgdXNpbmcgYSBzdHJpbmcgaW5kZXggd2l0aG91dCBnZXR0aW5nIHRoZSBcIkVsZW1lbnQgaW1wbGljaXRseSBoYXMgYW4gJ2FueScgdHlwZVwiIGVycm9yLlxuICAgICAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gdmFsdWU/Lltwcm9wXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSA9PT0gdHJ1ZSAmJiBwcm9wVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBwcm9wVmFsdWUgIT09IG51bGwgJiYgcHJvcFZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgaXNBbGxQcm9wc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlzQWxsUHJvcHNFbXB0eTtcbn1cbi8qKlxuICogQ2hlY2sgZm9yIGFuIGVtcHR5IHZhbHVlIGZvciBkYXRhIGl0ZW1zIGxpa2UgR1BTdHJpbmcgYW5kIEZpZWxkLlxuICogQHBhcmFtIHZhbHVlIGRhdGEgaXRlbSB2YWx1ZS5cbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIGlzIGNvbnNpZGVyZWQgZW1wdHkuXG4gKi9cbmZ1bmN0aW9uIGlzRW1wdHlEYXRhSXRlbSh2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAvLyBzaW5nbGUtc2VsZWN0LCBcIlwiIGlzIGEgc3BlY2lhbCBjYXNlIGZvciBzdHJpbmdzXG4gICAgICAgICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUgPT09IFwiXCIpIHx8XG4gICAgICAgIC8vIHNpbmdsZS1zZWxlY3QsIGVtcHR5IG9iamVjdHMgYXJlIGEgc3BlY2lhbCBjYXNlIGZvciBuZXN0ZWQgdmFsdWVzXG4gICAgICAgIChpc1BsYWluT2JqZWN0KHZhbHVlKSAmJiBpc0VtcHR5KHZhbHVlKSkgfHxcbiAgICAgICAgLy8gbXVsdGktc2VsZWN0XG4gICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPCAxKSB8fFxuICAgICAgICAvLyBvbmx5IHRlc3Rpbmcgb2JqZWN0cyB3aGljaCBhcmUgbm90IGFycmF5c1xuICAgICAgICAvLyBUT0RPOiBjb21iaW5lIGlzRXZlcnlQcm9wZXJ0eUVtcHR5IGFuZCBpc0VtcHR5RGF0YUl0ZW0gdG8gc2luZ2xlIGZ1bmN0aW9uXG4gICAgICAgICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgaXNBcnJheSh2YWx1ZSkgPT09IGZhbHNlICYmIGlzRXZlcnlQcm9wZXJ0eUVtcHR5KHZhbHVlKSkpO1xufVxuXG5leHBvcnQgeyBBUkdTX0tFWVdPUkQgYXMgQSwgRlVOQ1RJT05fS0VZV09SRCBhcyBGLCBSRlZfVFlQRSBhcyBSLCBUWVBFX0tFWVdPUkQgYXMgVCwgaXNSRnhBcmcgYXMgYSwgUkZUX1RZUEUgYXMgYiwgaXNSZWZlcmVuY2VkT2JqZWN0IGFzIGMsIGlzTnVtYmVyIGFzIGQsIGlzV2lkZ2V0VmFsdWVCb29sZWFuIGFzIGUsIGlzQ29sb3JSYW1wIGFzIGYsIGlzUmVjb3JkU2V0IGFzIGcsIGlzRmVhdHVyZUxheWVyIGFzIGgsIGlzRW1wdHlEYXRhSXRlbSBhcyBpLCBpc1RpbGVMYXllciBhcyBqLCBpc0R5bmFtaWNJbWFnZXJ5TGF5ZXIgYXMgaywgaXNJbWFnZXJ5TGF5ZXIgYXMgbCwgaXNJbWFnZXJ5VGlsZUxheWVyIGFzIG0gfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZS1nYXVyZHMtMTg0MDc0N2YuanMubWFwIiwiY29uc3QgVUlEZWZhdWx0cyA9IHtcbiAgICBTY2FsZTogXCJzXCIsXG4gICAgUG9wb3ZlclRpbWVyOiA2MFxufTtcbmNvbnN0IENhbGNpdGVTY2FsZSA9IHtcbiAgICBzOiBcInNcIixcbiAgICBtOiBcIm1cIlxufTtcbmNvbnN0IENhbGNpdGVPdmVybGF5UG9zaXRpb25pbmcgPSB7XG4gICAgYWJzb2x1dGU6IFwiYWJzb2x1dGVcIixcbiAgICBmaXhlZDogXCJmaXhlZFwiXG59O1xuXG5leHBvcnQgeyBDYWxjaXRlU2NhbGUgYXMgQywgVUlEZWZhdWx0cyBhcyBVLCBDYWxjaXRlT3ZlcmxheVBvc2l0aW9uaW5nIGFzIGEgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dWktdXRpbHMtOTI4YTQwOTYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9