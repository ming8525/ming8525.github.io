/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9ed6c3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-9ed6c3"],{29414:(e,t,n)=>{n.r(t),n.d(t,{arcgis_smart_mapping_magnitude_range_slider:()=>o,arcgis_smart_mapping_vector_symbol_button:()=>l});var s=n(81149),a=n(9225);n(69283),n(49306),n(51837),n(42577),n(82218),n(70464),n(10519);const o=class{constructor(e){(0,s.r)(this,e)}componentDidLoad(){const{config:e}=a.s;this.hostElement.shadowRoot.firstElementChild.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${e.jsapiUrl}/themes/light/main.css" />`)}render(){const{layer:e,modules:t,strings:n}=a.s,o=e.renderer,i=(0,a.a)(o,"size"),{minDataValue:l,maxDataValue:r}=i;if(this.rangeSliderNode){if(l!==this.rangeSliderNode.values[0]||r!==this.rangeSliderNode.values[1]||!(0,a.ac)(this.rangeSliderNode.values[1])){const e={min:l?Math.round(10*l)/10:0,max:r?Math.round(10*r)/10:100,values:[Math.round(10*l)/10,Math.round(10*r)/10]};this.rangeSliderNode.set(e)}}else{const e={min:l?Math.round(10*l)/10:0,max:r?Math.round(10*r)/10:100,values:[Math.round(10*l)/10,Math.round(10*r)/10],visibleElements:{labels:!0},precision:1,labelInputsEnabled:!0,labelFormatFunction:e=>e.toFixed(1)};this.rangeSliderNode=new t.Slider(e)}return(0,s.h)(s.H,null,(0,s.h)("div",{class:"magnitude-range-block"},(0,s.h)("calcite-label",null,n.panels.vectorField.magnitudeRange),(0,s.h)("div",{class:"range-slider",ref:e=>{e&&this.afterMagnitudeRangeCreate(e)}}),(0,s.h)("div",{dir:"ltr",class:"magnitude-range"},(0,s.h)("div",{class:"magnitude-range-item"},(0,s.h)("calcite-input-number",{class:"magnitude-input",label:n.panels.vectorField.min,step:.1,scale:"s",min:l?Math.round(10*l)/10:0,max:r?Math.round(10*r)/10:100,value:""+(l?Math.round(10*l)/10:0),onCalciteInputNumberInput:()=>{const e=this.rangeSliderNode.values,t=parseFloat(this.minRangeNode.value);this.minRangeNode.value&&t>=l&&t<e[1]?(clearTimeout(this.minWatchHandle),this.minRangeNode.value=`${t}`,this.rangeSliderNode.values=[parseFloat(this.minRangeNode.value),e[1]],this.handleMagnitudeRangeValuesChange(t,e[1])):this.minWatchHandle=setTimeout((()=>{const e=this.rangeSliderNode.values;this.minRangeNode.value=`${e[0]}`,this.handleMagnitudeRangeValuesChange(e[0],e[1])}),3e3)},ref:e=>this.minRangeNode=e})),(0,s.h)("div",{class:"magnitude-range-item"},(0,s.h)("calcite-input-number",{class:"magnitude-input",label:n.panels.vectorField.max,step:.1,scale:"s",min:l?Math.round(10*l)/10:0,max:r?Math.round(10*r)/10:100,value:""+(r?Math.round(10*r)/10:100),onCalciteInputNumberInput:()=>{const e=this.rangeSliderNode.values,t=parseFloat(this.maxRangeNode.value);this.maxRangeNode.value&&t>e[0]&&t<=r?(clearTimeout(this.maxWatchHandle),this.maxRangeNode.value=`${t}`,this.rangeSliderNode.values=[e[0],parseFloat(this.maxRangeNode.value)],this.handleMagnitudeRangeValuesChange(e[0],t)):this.maxWatchHandle=setTimeout((()=>{const e=this.rangeSliderNode.values;this.maxRangeNode.value=`${e[0]}`,this.handleMagnitudeRangeValuesChange(e[0],e[1])}),3e3)},ref:e=>this.maxRangeNode=e})))))}afterMagnitudeRangeCreate(e){if(!this.rangeSliderNode.container){const t=document.createElement("div");e.append(t),this.rangeSliderNode.container=t,this.createMagnitudeRangeSliderChangeEvents()}}createMagnitudeRangeSliderChangeEvents(){this.rangeSliderNode&&(this.rangeSliderNode.on("thumb-change",(e=>{const t=this.rangeSliderNode.values;0===e.index?t[0]>=t[1]&&(t[0]=e.oldValue):t[1]<=t[0]&&(t[1]=e.oldValue),this.minRangeNode.value=`${t[0]}`,this.maxRangeNode.value=`${t[1]}`,this.handleMagnitudeRangeValuesChange(t[0],t[1])})),this.rangeSliderNode.on("thumb-drag",(e=>{const t=this.rangeSliderNode.values;if(0===e.index){if(t[0]>=t[1])return void(t[0]=t[0]-.1)}else if(t[1]<=t[0])return void(t[1]=t[1]+.1);this.minRangeNode.value=`${t[0]}`,this.maxRangeNode.value=`${t[1]}`,this.handleMagnitudeRangeValuesChange(t[0],t[1])})),this.rangeSliderNode.on("segment-drag",(()=>{var e;const t=null===(e=this.rangeSliderNode)||void 0===e?void 0:e.values;this.minRangeNode.value=`${t[0]}`,this.maxRangeNode.value=`${t[1]}`,this.handleMagnitudeRangeValuesChange(t[0],t[1])})))}handleMagnitudeRangeValuesChange(e,t){if(e===this.minRangeNode.max&&t===this.maxRangeNode.min)return;const{layer:n}=a.s,s=n.renderer,o=(0,a.a)(s,"size");this.minRangeNode.value=`${e}`,this.maxRangeNode.value=`${t}`,o.minDataValue=e,o.maxDataValue=t,this.maxRangeNode.min=e+this.maxRangeNode.step,this.minRangeNode.max=t-this.minRangeNode.step,(0,a.ab)()}get hostElement(){return(0,s.d)(this)}};var i;o.style=".magnitude-range-block{margin-bottom:12px}.range-slider{height:40px;background-color:transparent;position:relative;width:90%;margin:15px auto 0 auto}.magnitude-range{display:flex;justify-content:space-between;margin-bottom:15px}.magnitude-range-item{width:48%;display:flex;flex-flow:column;justify-content:space-between}.esri-slider__label{text-decoration:underline}.esri-slider__label:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}",function(e){e.beaufort="beaufort.png",e.classifiedArrow="classifiedArrow.png",e.oceanCurrentKnots="oceanCurrentKnots.png",e.oceanCurrentMps="oceanCurrentMps.png",e.simpleScalar="simpleScalar.png",e.singleArrow="singleArrow.png",e.windBarbs="windBarbs.png"}(i||(i={}));const l=class{constructor(e){(0,s.r)(this,e),this.arcgisSmartMappingSelectChange=(0,s.c)(this,"arcgisSmartMappingSelectChange",7),this.arcgisSmartMappingSelectBeforeOpen=(0,s.c)(this,"arcgisSmartMappingSelectBeforeOpen",7),this.open=!1,this.selectInfos=[]}async setFocus(){this.buttonNode.focus()}componentWillLoad(){this.populateSymbolStyleSelectorInfo(),this.setSymbolStyleSelection()}componentWillUpdate(){const{layer:e}=a.s,t=e.renderer,{style:n}=t;this.selectedStyleInfo.value!==n&&this.setSymbolStyleSelection()}render(){const{strings:e}=a.s;return(0,s.h)("calcite-label",{onClick:e=>e.stopImmediatePropagation()},e.panels.vectorField.symbolType,(0,s.h)("div",{class:"vector-symbol-button",role:"button",tabindex:"0","aria-haspopup":"true","aria-label":e.panels.vectorField.symbolType,ref:e=>this.buttonNode=e,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.openSelectDropdown())},onClick:()=>this.openSelectDropdown()},(0,s.h)("div",{class:"vector-symbol-content"},(0,s.h)("div",{class:"vector-symbol-button-icon",style:{backgroundImage:`url(${(0,s.a)("./assets/arcgis-smart-mapping-dropdown-images/")}${this.selectedStyleInfo.iconPath})`}}),(0,s.h)("div",{class:"vector-symbol-sub-content"},(0,s.h)("div",{class:"vector-symbol-button-text"},(0,s.h)("div",{class:"vector-symbol-button-title"},this.selectedStyleInfo.title),(0,s.h)("div",{class:"vector-symbol-button-msg"},this.selectedStyleInfo.msg)),(0,s.h)("div",null,(0,s.h)("calcite-icon",{scale:"s",icon:"chevron-down"}))))))}setSymbolStyleSelection(){const{layer:e}=a.s,t=e.renderer;this.selectedStyleInfo=this.selectInfos.find((e=>e.value===t.style||t.style.includes("beaufort")&&e.value.includes("beaufort"))),this.selectInfos.forEach((e=>{e.selected=e.value===this.selectedStyleInfo.value}))}closePopover(){var e;this.open=!1,this.dropdownNode&&(null===(e=this.dropdownNode.parentNode)||void 0===e||e.removeChild(this.dropdownNode),this.dropdownNode=null,this.buttonNode.classList.remove("active"))}openSelectDropdown(){if(this.open)this.open=!1;else{this.arcgisSmartMappingSelectBeforeOpen.emit();const e=document.createElement("arcgis-smart-mapping-dropdown");e.buttonNode=this.buttonNode,e.infos=this.selectInfos,this.dropdownNode=e,e.addEventListener("arcgisSmartMappingDropdownClose",(e=>{this.closePopover(),"Escape"===e.detail&&this.setFocus()})),e.addEventListener("arcgisSmartMappingDropdownChange",(e=>this.setSymbolStyle(e.detail))),this.buttonNode.classList.add("active"),document.body.appendChild(e),this.open=!0}}setSymbolStyle(e){const{layer:t}=a.s,n=t.renderer,{style:s}=n,o=e.value,i=s.includes("beaufort"),l=o.includes("beaufort");if(o===s||i&&l)return this.closePopover(),void setTimeout((()=>this.setFocus()),300);this.selectInfos.forEach((e=>{e.selected=e.value===o})),this.selectedStyleInfo=e,this.arcgisSmartMappingSelectChange.emit(this.selectedStyleInfo.value),this.closePopover(),setTimeout((()=>this.setFocus()),300)}populateSymbolStyleSelectorInfo(){const{strings:e}=a.s,t=e.panels.vectorField.symbolStyleOptions,n="vfr_";this.selectInfos.push({value:"beaufort",title:t.beaufort.title,msg:t.beaufort.description,iconPath:`${n}${i.beaufort}`,selected:!1}),this.selectInfos.push({value:"simple-scalar",title:t.simpleScalar.title,msg:t.simpleScalar.description,iconPath:`${n}${i.simpleScalar}`,selected:!1}),this.selectInfos.push({value:"single-arrow",title:t.singleArrow.title,msg:t.singleArrow.description,iconPath:`${n}${i.singleArrow}`,selected:!1}),this.selectInfos.push({value:"wind-barb",title:t.windBarbs.title,msg:t.windBarbs.description,iconPath:`${n}${i.windBarbs}`,selected:!1}),this.selectInfos.push({value:"ocean-current-kn",title:t.oceanCurrentKnots.title,msg:t.oceanCurrentKnots.description,iconPath:`${n}${i.oceanCurrentKnots}`,selected:!1}),this.selectInfos.push({value:"ocean-current-m",title:t.oceanCurrentMps.title,msg:t.oceanCurrentMps.description,iconPath:`${n}${i.oceanCurrentMps}`,selected:!1}),this.selectInfos.push({value:"classified-arrow",title:t.classifiedArrow.title,msg:t.classifiedArrow.description,iconPath:`${n}${i.classifiedArrow}`,selected:!1})}get hostElement(){return(0,s.d)(this)}};l.style=".vector-symbol-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.vector-symbol-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.vector-symbol-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.vector-symbol-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.vector-symbol-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.vector-symbol-content{display:flex;align-items:center;width:100%}.vector-symbol-sub-content{display:flex;justify-content:space-between;align-items:center;width:100%}.vector-symbol-button-icon{min-width:16px;background-repeat:no-repeat;height:48px;padding:0;display:inline-block}.vector-symbol-button-text{display:inline-block;padding:0 10px}.vector-symbol-button-title{font-weight:bold}.vector-symbol-button-msg{font-size:80%;line-height:16px}"}}]);