System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-layouts/layout-runtime"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_arcgis__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/basemap.svg":
/*!***********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/basemap.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M.1 6.9h6.8V.1H.1zm6-.8H3.985c.077-.403.25-.78.506-1.102a4.574 4.574 0 0 0 1.609.805zm0-1.128a3.758 3.758 0 0 1-1.006-.523c.31-.203.65-.358 1.006-.459zM6.1.9v2.266a4.229 4.229 0 0 0-1.613.73 6.038 6.038 0 0 1-1.1-1.767l.002-.004-.004-.001A8.16 8.16 0 0 1 2.99.9zM.9.9h1.266a8.7 8.7 0 0 0 .359 1.249A1.93 1.93 0 0 1 .9 3.188zm0 3.09a2.828 2.828 0 0 0 2.006-.966c.262.519.594 1 .987 1.428A3.367 3.367 0 0 0 3.17 6.1H.9zM9.1.1v6.8h6.8V.1zm.8.8h4.063a.373.373 0 0 1-.045.2.594.594 0 0 1-.438.176 1.637 1.637 0 0 0-1.175.49.91.91 0 0 0-.203.708c-.001.007-.114.736-.607.742a.74.74 0 0 0-.719.384.828.828 0 0 0-.026.6H9.9zm5.2 5.2H9.9V5h2.296l-.474-.639a1.562 1.562 0 0 1-.192-.346c1.041-.03 1.37-1.188 1.365-1.587a.19.19 0 0 1 .028-.154c.031-.037.166-.162.624-.2.419 0 .81-.205 1.049-.549a1.13 1.13 0 0 0 .16-.625h.344zm-15 9.8h6.8V9.1H.1zm.8-6h5.2v.46l-2 1.973v.867l-3.2-.089zm0 4.01 4 .112v-1.355l1.2-1.182V15.1H.9zm8.2 1.99h6.8V9.1H9.1zm6-.8h-1.792l-1.27-1.572 1.468-1.468 1.594 1.605zm0-5.2v2.628L12.49 9.9zm-5.2 0h1.46l1.581 1.592-1.978 1.98 1.316 1.628H9.9z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/close-12.svg":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/close-12.svg ***!
  \************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 14\"><g fill=\"none\" fill-rule=\"nonzero\"><path fill=\"#000\" d=\"m7.745 7 4.1 4.1a.527.527 0 0 1-.745.746L7 7.746l-4.1 4.1a.527.527 0 0 1-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 0 1 .746-.746l4.1 4.1 4.1-4.1a.527.527 0 0 1 .746.746z\"></path><path d=\"M1 1h12v12H1z\"></path></g></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exchange.svg":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exchange.svg ***!
  \************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 39 32\"><path d=\"M38.784 9.778v2.962H3.236V9.778h.074L13.086.002l2.111 2.111-7.702 7.665zM3.236 21.628h31.327l-7.702 7.702 2.111 2.111 9.776-9.813h.037v-2.962H3.237v2.962z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exit-full-screen.svg":
/*!********************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exit-full-screen.svg ***!
  \********************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M5 11v5H4v-4.001L0 12v-1zm11 0v1l-4-.001V16h-1v-5zM5 0v5H0V4l4 .001V0zm7 0v4.001L16 4v1h-5V0z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/full-screen.svg":
/*!***************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/full-screen.svg ***!
  \***************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M1 11v4.001L5 15v1H0v-5zm15 0v5h-5v-1l4 .001V11zM5 0v1L1 .999V5H0V0zm11 0v5h-1V.999L11 1V0z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/layerlist.svg":
/*!*************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/layerlist.svg ***!
  \*************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"m14.376 10.573 1.647.927-8 4.5-8-4.5 1.648-.927 1.02.574-.628.353 5.96 3.353 5.96-3.353-.627-.353zm-.999-2.414.606.341-5.96 3.353L2.063 8.5l.607-.341-1.02-.574L.023 8.5l8 4.5 8-4.5-1.626-.915zM8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5 5.96-3.352 5.96 3.352-5.96 3.353z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-area.svg":
/*!****************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-area.svg ***!
  \****************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 16\"><g fill=\"#000\" fill-rule=\"nonzero\"><path d=\"M4 8h1v3H4zM2 9h1v2H2zm6-1h1v3H8zm4 0h1v3h-1z\"></path><path d=\"M15 12V6h-2V5h1V2h-3v1L4 1.05V0H1v3h1v3H0v6h2v1H1v3h3v-1h7v1h3v-3h-1v-1zm-3-9h1v1h-1zm-8-.92L11 4v1h1v1H3V3h1zM2 1h1v1H2zm1 14H2v-1h1zm8-1H4v-1H3v-1h9v1h-1zm2 1h-1v-1h1zM1 11V7h13v4z\"></path><path d=\"M6 9h1v2H6zm4 0h1v2h-1z\"></path></g></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-distance.svg":
/*!********************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-distance.svg ***!
  \********************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 10\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M0 10h15V4H0zm1-5h13v4h-1V6h-1v3h-1V7h-1v2H9V6H8v3H7V7H6v2H5V6H4v3H3V7H2v2H1zm11-5v1H3V0H0v3h3V2h9v1h3V0zM2 2H1V1h1zm12 0h-1V1h1z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure.svg":
/*!***********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure.svg ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M0 9v6h16V9zm15 3h-1v2h-1v-3h-1v3h-1v-2h-1v2H9v-3H8v3H7v-2H6v2H5v-3H4v3H3v-2H2v2H1v-4h14zm.18-7.5-2.85 2.85-.71-.7L13.23 5H9V4h4.32l-1.7-1.69.71-.7zM2.68 4H7v1H2.77l1.61 1.65-.71.7L.82 4.5l2.85-2.85.71.7z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/search.svg":
/*!**********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/search.svg ***!
  \**********************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"nonzero\" d=\"M7 1a6 6 0 1 0 0 12A6 6 0 0 0 7 1m0 13a7 7 0 1 1 5.621-2.828l-.222.284 3.405 3.404a.668.668 0 0 1-.944.944L11.456 12.4A6.974 6.974 0 0 1 7 14\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-circle.svg":
/*!*****************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-circle.svg ***!
  \*****************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><g fill=\"#363636\" fill-rule=\"nonzero\"><path d=\"m.25 3 8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48z\"></path><path d=\"M10.318 0C13.456 0 16 2.462 16 5.5S13.456 11 10.318 11a5.796 5.796 0 0 1-3.023-.842l-.22-.142.54-.752c.788.53 1.722.82 2.703.82 2.615 0 4.735-2.053 4.735-4.584 0-2.531-2.12-4.583-4.735-4.583-1.916 0-3.617 1.112-4.354 2.779l-.078.187L5 3.56C5.827 1.435 7.933 0 10.318 0\"></path></g></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-clear.svg":
/*!****************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-clear.svg ***!
  \****************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#363636\" fill-rule=\"nonzero\" d=\"M16 0v16H0V0zM7.077 1H1v14h10.561L7.078 7.616zM15 6.391 9.56 9.779 12.73 15H15zM15 1H8.077v6.335l.965 1.589L15 5.213z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-lasso.svg":
/*!****************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-lasso.svg ***!
  \****************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 17 16\"><g fill=\"#363636\" fill-rule=\"nonzero\"><path d=\"m.75 3 8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48z\"></path><path d=\"M8.721 0c1.82 0 2.865 1.556 2.865 4.35 0 .462.12.66.385.774.219.093.473.126.99.131h.551l.397.009c1.251.05 1.807.336 2.04 1.333.41 1.76-1.62 3.114-5.904 4.313l-.326.09-.245-.999.64-.18c3.516-1.02 5.088-2.089 4.88-2.979-.094-.407-.382-.535-1.304-.553l-.787-.002c-.62-.008-.943-.055-1.3-.207-.648-.276-.998-.859-.998-1.73 0-2.286-.694-3.318-1.884-3.318-.731 0-1.68.55-2.815 1.685l-.215.22L5 2.203C6.398.748 7.626 0 8.721 0\"></path></g></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-line.svg":
/*!***************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-line.svg ***!
  \***************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><g fill=\"#363636\" fill-rule=\"nonzero\"><path d=\"m.25 3 8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48zM9.72 1.11l.588-.808 5.082 3.7-4.577 2.656L14.61 9.49l-.598.801L9 6.555l4.56-2.649z\"></path></g></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-point.svg":
/*!****************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-point.svg ***!
  \****************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#363636\" fill-rule=\"nonzero\" d=\"m.25 3 8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48zM12 6a2 2 0 1 0 0-4 2 2 0 0 0 0 4\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-rectangle.svg":
/*!********************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-rectangle.svg ***!
  \********************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#363636\" fill-rule=\"nonzero\" d=\"m.25 3 8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.909 5.771 1.155-.667-2.91-5.77 2.222-.48zM16 0v11H8.5v-1H15V1H6v2.5H5V0z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-zoomto.svg":
/*!*****************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-zoomto.svg ***!
  \*****************************************************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill=\"#363636\" fill-rule=\"nonzero\" d=\"M7.682 6.318a4.5 4.5 0 0 1 .335 5.99l2.847 2.849-.707.707-2.848-2.848a4.5 4.5 0 1 1 .373-6.698m-5.657.707a3.5 3.5 0 1 0 4.95 4.95 3.5 3.5 0 0 0-4.95-4.95M16 0v11H9.5v-1h3.099L10 5.153V1H6v2.5H5V0zm-1 5.954L12.637 7.83 13.801 10H15zM15 1h-3.981v3.813l1.055 1.967L15 4.457z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/filled/data/placeholder-map.svg":
/*!********************************************************!*\
  !*** ./jimu-icons/svg/filled/data/placeholder-map.svg ***!
  \********************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#050505\" d=\"m12.687 9.074.073-.133a.147.147 0 0 0 .017-.078l-.012-.142c-.002-.033-.042-.051-.068-.028l-.205.175a.05.05 0 0 1-.019.01l-.092.017a.042.042 0 0 0-.033.051l.019.077a.135.135 0 0 0 .093.097l.07.02a.134.134 0 0 0 .157-.066M13.8 9.389a.13.13 0 0 0 .058-.014l.141-.069c.002 0 .002 0 .003.002l.104.13c.005.006.013.01.023.01h.069a.028.028 0 0 0 .023-.046l-.108-.141-.047-.04-.382-.191-.092.036h-.07v-.001l-.026-.084a.027.027 0 0 0-.025-.019h-.093a.027.027 0 0 0-.027.028v.082h.06v.024c0 .03.023.055.052.06l.136.016h.001l.074.093c.023.028.019.097-.006.125v.001h.131zM13.878 6.775l-.048.043a.294.294 0 0 0-.094.187.299.299 0 0 1-.082.178.496.496 0 0 1-.246.136l-.018.004-.076.062s-.022.11 0 .135c.009.012.049.01.061 0 .016-.012.017-.08.017-.08l.242-.087s.06.08.09.083c.012.002.042-.013.05-.025.032-.045.068-.208.068-.208a.546.546 0 0 0 .024-.113l.013-.143.108-.007.043-.087-.112-.011zM9.427 10.12a.141.141 0 0 0 .245 0v-.334a.122.122 0 0 0-.187-.105.125.125 0 0 0-.058.105zM6.698 4.315l.144-.084.002-.006a.065.065 0 0 0-.026-.085.063.063 0 0 0-.031-.008h-.328l-.035-.038a.216.216 0 0 0-.157-.074L5.778 4l-.048.009a2.362 2.362 0 0 1-.048.009l-.289.122a.209.209 0 0 1-.076.018l-.464.023a.232.232 0 0 0-.099.028l-.26.148a.03.03 0 0 0-.015.024.03.03 0 0 0 .012.026c.02.015.014.047-.01.053l-.203.051a.03.03 0 0 0-.019.044l.068.112a.03.03 0 0 0 .02.014l.364.063c.056.01.106.04.14.086l.251.333.074.102a.094.094 0 0 1-.007.118l-.056.06a.093.093 0 0 0-.015.105l.183.37a.134.134 0 0 0 .081.068.223.223 0 0 0 .274-.142l.048-.137a.097.097 0 0 1 .04-.05l.204-.175a.24.24 0 0 1 .085-.046l.32-.088a.22.22 0 0 0 .148-.133l.151-.378a.227.227 0 0 0-.001-.172l-.03-.07a.227.227 0 0 1 .097-.28M4.03 4.643l.061-.11a.221.221 0 0 1 .088-.087l.504-.282-.057-.066-.572-.035a.203.203 0 0 0-.05.003l-.557.09a.232.232 0 0 0-.137.377l.125.148c.043.051.107.08.172.08h.224a.226.226 0 0 0 .199-.118M4.666 5.672l.052-.061c.013-.016.01-.04-.007-.051l-.162-.116-.569-.425a.137.137 0 0 0-.081-.027h-.224a.131.131 0 0 0-.095.04l-.118.115a.034.034 0 0 0-.003.047l.067.085c.006.01.018.015.03.014l.064-.006a.035.035 0 0 1 .038.033l.002.038c0 .005 0 .01-.002.016l-.03.073a.036.036 0 0 0 .006.036l.07.084a.032.032 0 0 0 .028.012l.068-.003a.035.035 0 0 0 .034-.035v-.147c0-.019.014-.034.032-.035l.094-.007c.008 0 .018.002.024.007l.174.133c.013.011.017.029.01.044l-.057.116a.033.033 0 0 1-.03.018l-.054.004a.036.036 0 0 0-.032.027.036.036 0 0 0 .032.044l.117.009c.024.001.048.01.069.024l.206.146c.014.01.03.008.043-.003l.065-.055a.03.03 0 0 0 .011-.018l.021-.083a.035.035 0 0 0-.004-.029l-.07-.11.022-.004a.037.037 0 0 1 .024.004l.091.054a.035.035 0 0 0 .044-.008M2.08 5.137h.07l.104.146c.014.018.03.033.05.044l.136.068c.018.01.04.015.061.015h.422V5.27l-.156-.056-.18-.097A.14.14 0 0 1 2.52 5.1l-.288-.166a.13.13 0 0 0-.067-.018h-.173a.136.136 0 0 0-.13.095l-.014.047a.14.14 0 0 0 .033.14l.061.062h.138zM2.679 5.022l.11-.058a.139.139 0 0 1 .063-.015h.06c.052 0 .1.03.123.078l.044.092v.094h-.2v-.12l-.084-.043-.1.003zM3.061 4.95l.1.164.08.047h.115l.116-.124-.088-.116-.225.028zM2.414 4.698l.158.057a.12.12 0 0 1 .03.015l.109.073c.018.012.038.02.06.021l.2.02-.024-.124-.238-.132a.14.14 0 0 0-.065-.017h-.122zM7.46 5.712l.058.092a.025.025 0 0 1-.001.028l-.044.06c-.004.008-.007.016-.004.022l.017.061a.02.02 0 0 0 .008.012l.092.072c.063.048.07.141.017.2l-.001.002a.138.138 0 0 1-.101.046h-.11a.025.025 0 0 1-.024-.031l.028-.11a.023.023 0 0 1 .014-.017l.049-.024c.01-.004.015-.015.013-.026l-.002-.03a.026.026 0 0 0-.02-.021l-.071-.015a.024.024 0 0 0-.027.014l-.016.035v.002l-.001.002-.035.118c-.003.011-.013.018-.024.018l-.11-.003a.024.024 0 0 1-.018-.007.024.024 0 0 1-.007-.017v-.127c0-.013.011-.024.024-.024l.058-.002c.008 0 .014-.004.02-.01l.053-.079A.027.027 0 0 0 7.3 5.94V5.82c0-.008.004-.015.01-.019l.115-.094a.024.024 0 0 1 .037.005\"></path><path fill=\"#050505\" fill-rule=\"evenodd\" d=\"M15.073 5.1H14.7a.042.042 0 0 1-.04-.03l-.358-.069a.161.161 0 0 1-.088-.027l-.081-.055a.16.16 0 0 0-.088-.027s-.832-.43-1.922-.388c-.41.016-.77.222-.77.222a.033.033 0 0 0-.02.026l-.004.034a.033.033 0 0 1-.033.028l-.164-.004a.033.033 0 0 0-.034.032l-.459.016c-.04 0-.077.02-.1.053l-.041.06c-.03.045-.441.06-.441.06a.06.06 0 0 1-.036-.055v-.049c0-.017.006-.032.02-.044l.218-.2a.162.162 0 0 1 .087-.04l.136-.018a.06.06 0 0 0 .04-.024l.016-.024a.06.06 0 0 0-.028-.09l-.01-.005a.06.06 0 0 0-.047.004l-.104.061a.057.057 0 0 1-.03.008h-.101a.159.159 0 0 0-.114.049l-.244.252a.165.165 0 0 0-.042.08l-.023.11.016.047-.096.135-.087.087h-.081v-.087H9.45l-.028.11a.161.161 0 0 1-.098.11l-.081.032a.157.157 0 0 1-.156-.026l-.106-.086.284.015.032-.062S9 5.18 8.828 5.084c-.14-.08-.324-.013-.388.016a.147.147 0 0 0-.042.027l-.62.565a.162.162 0 0 0-.006.231l.058.061.083-.069a.057.057 0 0 1 .076.003l.155.146h.04l.146-.176a.057.057 0 0 0 .002-.072l-.019-.026a.06.06 0 0 1-.004-.066l.204-.334a.042.042 0 0 1 .052-.017l.036.018c.022.01.03.035.019.057l-.14.268a.134.134 0 0 0-.01.104l.023.071a.18.18 0 0 1-.03.146l-.087.12a.161.161 0 0 1-.134.064l-.254-.01a.046.046 0 0 1-.031-.013.047.047 0 0 1-.013-.032v-.042a.045.045 0 0 0-.046-.046.046.046 0 0 0-.045.042l-.007.074a.046.046 0 0 1-.045.042h-.024a.042.042 0 0 0-.03.012l-.414.386.06.088v.093a.057.057 0 0 1-.056.056h-.132c-.071 0-.127.06-.123.132l.001.018a.124.124 0 0 0 .119.116l.141.004a.16.16 0 0 0 .135-.068l.101-.144a.158.158 0 0 1 .13-.067h.097c.032 0 .064.01.09.028l.157.11c.03.022.033.068.004.092l-.088.077a.156.156 0 0 1-.104.04h-.55a.158.158 0 0 0-.126.064l-.425.573a.168.168 0 0 0-.032.096v.38c0 .035.011.069.032.097l.148.198c.013.016.02.036.027.055.01.033.036.08.1.08h.686s.172.005.172.12c0 .04-.001.08-.003.116a.162.162 0 0 0 .083.148c.048.028.099.077.099.155v.21a.203.203 0 0 1-.007.049.772.772 0 0 1-.079.178c-.036.054.015.135.052.182a.17.17 0 0 1 .035.102v.21s.016.076.088.109a.583.583 0 0 1 .097.05v.084c0 .09.071.16.16.16h.207s.094.008.155-.087l.28-.437s.04-.043 0-.12c-.04-.076-.021-.145-.021-.145l.19-.11s.09-.016.09-.141v-.136a.115.115 0 0 0-.018-.062l-.033-.057a.162.162 0 0 1 .021-.191l.395-.424s.104-.156.104-.235H9.49a.16.16 0 0 1-.136-.077l-.346-.576a.087.087 0 0 1 .033-.121.084.084 0 0 1 .112.03l.335.552-.001.05c0 .016.012.028.028.028.083 0 .327-.01.463-.13a.596.596 0 0 0 .143-.181.16.16 0 0 0-.038-.19l-.085-.076-.11.025-.197-.199a.063.063 0 0 1 .016-.1.06.06 0 0 1 .065.007l.307.238s.063.056.127.056h.18c.056 0 .108.03.136.078l.402.683s.06.056.094.054c.035-.003.082-.15.082-.15 0-.136.065-.266.176-.344l.138-.098a.158.158 0 0 1 .202.015l.085.083v.09c0 .014.012.027.028.027h.038l.036-.036h.042v.359c0 .04.015.08.043.109l.267.288v-.103a.159.159 0 0 0-.035-.1l-.125-.158a.159.159 0 0 1-.035-.1v-.109c0-.017.021-.026.033-.013l.162.167.004.105c.001.02.025.03.038.015l.229-.25s.066-.083 0-.152a5.405 5.405 0 0 0-.158-.154.05.05 0 0 1-.016-.039.05.05 0 0 1 .019-.038l.044-.037.11.002s-.023.052-.058.112c0 0 .017.096.123-.083.008-.007.036-.003.067.002.04.006.084.014.1-.002.06-.064.309-.407.309-.407s.032-.126-.043-.192c-.076-.066-.043-.147-.043-.147l.094-.082v-.058h-.244s.02-.13.194-.139l.031-.001c.011 0 .021 0 .03-.002a.132.132 0 0 1 .127.083c.006.016.01.034.01.052v.243l.036.004s.068.007.093-.084c0 0 .046-.013.046-.068v-.066l-.066-.08.107-.138a.122.122 0 0 1 .075-.045l.054-.011a.125.125 0 0 0 .08-.053l.247-.373a.165.165 0 0 0 .027-.09v-.102a.05.05 0 0 0-.05-.05h-.144s-.06-.07.022-.12c.057-.035.169-.128.232-.18a.155.155 0 0 1 .101-.038h.29a.16.16 0 0 0 .093-.03l.19-.137a.04.04 0 0 1 .025-.008c.082 0 .125.1.07.162l-.198.214a.158.158 0 0 0-.043.106l-.003.173c0 .032.026.06.059.06h.048l.259-.268a.125.125 0 0 0 .033-.066l.01-.056a.16.16 0 0 1 .155-.134h.114a.154.154 0 0 0 .104-.039l.159-.14a.043.043 0 0 1 .028-.01h.082a.042.042 0 0 0 .043-.044v-.08c0-.013.005-.024.013-.032l.062-.058a.156.156 0 0 1 .181-.024l.104.055a.061.061 0 0 0 .076-.016l.051-.065a.062.062 0 0 0 .012-.052.062.062 0 0 0-.033-.042l-.503-.25a5.427 5.427 0 0 0-.39-.014M8.141 7.024l.09-.078zl-.133-.163a.053.053 0 0 1-.01-.019.053.053 0 0 0 .01.018zm.755.493h-.081a.13.13 0 0 1-.032-.004 9.127 9.127 0 0 1-.61-.186.062.062 0 0 1-.035-.045.063.063 0 0 1 .015-.055l.11-.117a.094.094 0 0 1 .13.005l.1.107.087-.016-.024-.064s-.01-.03-.021-.056c-.011-.027.048-.061.048-.061s.06-.006.06.088c0 .093.097.163.097.163h.332c.021 0 .035.023.024.04l-.059.113a.16.16 0 0 1-.141.088m.417-.503H9.2l-.083-.065a.057.057 0 0 0-.032-.01h-.108a.067.067 0 0 0-.044.017l-.078.07-.078.012a.053.053 0 0 1-.056-.026.055.055 0 0 1-.006-.02l-.011-.087a.09.09 0 0 1 .021-.069l.128-.145.058-.005-.003.026a.051.051 0 0 0 .05.058h.029a.069.069 0 0 0 .064-.042l.026-.058.12.02.01.087a.077.077 0 0 0 .026.048l.133.112v.025c0 .03-.023.052-.053.052m.574.093v.099h-.205l-.018-.099a.05.05 0 0 1 .008-.039l.011-.015a.052.052 0 0 0-.008-.069l-.096-.089v-.163l.14-.06h.072c.028 0 .052.019.06.046l.001.004c.006.02 0 .04-.013.056a.061.061 0 0 0-.015.031l-.013.085.113.105-.08.054z\" clip-rule=\"evenodd\"></path><path fill=\"#050505\" d=\"M12.945 7.8c-.006-.015-.01-.022-.017-.021-.007 0-.018.009-.036.025a.11.11 0 0 0-.039.08c0 .02.003.04.012.062.007.018.02.032.028.032.025 0 .066-.14.052-.178M12.894 8.108a.116.116 0 0 1 .024.005l.014.004c.018.006.027.009.033.015.005.005.008.014.013.03l.004.014c.008.027.002.053-.018.07-.046.037-.038.057.03.072.047.01.061.024.061.062 0 .046-.003.046-.055.019-.03-.016-.06-.023-.065-.016-.007.007 0 .016.014.021.055.02.086.071.074.12-.014.057.014.066.059.02.048-.049.089.023.078.136-.004.038-.038.055-.09.043a.047.047 0 0 1-.022-.012.04.04 0 0 1-.013-.027c0-.024-.013-.029-.051-.02-.038.01-.05.006-.05-.018a.05.05 0 0 1 .03-.044c.013-.005.02-.009.02-.017 0-.008-.007-.019-.02-.038a.174.174 0 0 1-.03-.08c0-.02-.008-.037-.019-.037-.027 0-.088-.193-.063-.201.004-.002.009-.008.012-.016a.148.148 0 0 0 .009-.053c0-.04.003-.054.021-.052M12.8 8.567c.047-.044.072-.116.04-.116-.014 0-.082.079-.11.129-.03.052.009.045.07-.013M12.912 8.698a.02.02 0 0 1 .021.02c0 .011-.003.02-.008.02 0 0-.005 0-.007-.003a.064.064 0 0 1-.015-.017c-.007-.011-.003-.02.01-.02M13.254 8.913c-.013-.03-.03-.045-.044-.043-.014.001-.025.018-.03.05a.058.058 0 0 1-.01.026c.013.052.052.06.064.063h.004a.255.255 0 0 1 .025-.029.751.751 0 0 0 .014-.015zM13.082 8.894c.026-.004.035.015.011.043a.044.044 0 0 0-.008.015l-.057.01a.62.62 0 0 1-.036.005c-.038.006-.077.011-.1.037 0 .004.004.007.01.009.007.002.019.002.032-.001l.006-.003.005-.003.02-.002.064.008-.004.006h-.002l-.005.004-.013.008c-.03.026-.044.054-.034.067.008.012.015.04.015.062-.002.053-.066.067-.079.017-.006-.023-.01-.016-.012.021-.001.044-.011.057-.038.051-.02-.004-.035-.025-.035-.047a.142.142 0 0 0-.016-.065c-.008-.013-.006-.048.006-.078.007-.019.009-.028.01-.036l.002-.006.012-.032.018-.05-.003.001c.028-.026.056-.032.1-.022l.032.004a.15.15 0 0 0 .068-.012c.01-.005.02-.01.031-.011M13.36 9.136c0-.027-.034-.042-.092-.042a.445.445 0 0 0-.064.006c-.08.012-.103.027-.08.051.02.02.236.007.236-.015M5.866 9.362l-.35-.185a.222.222 0 0 0-.102-.026h-.101a.038.038 0 0 1-.037-.033.22.22 0 0 0-.218-.201h-.032a.217.217 0 0 1-.173-.088l-.048-.065a.216.216 0 0 0-.155-.086l-.262-.023a.028.028 0 0 1-.017-.007l-.043-.03c-.012-.007-.026-.009-.038 0l-.187.106a.216.216 0 0 1-.108.028h-.192a.037.037 0 0 1-.017-.004.146.146 0 0 1-.071-.133v-.112a.038.038 0 0 0-.023-.035.037.037 0 0 0-.014-.003h-.122a.037.037 0 0 1-.032-.019.038.038 0 0 1 0-.038l.057-.1a.044.044 0 0 0 .006-.02V8.2c0-.01-.004-.02-.011-.027a.037.037 0 0 0-.027-.011h-.066a.037.037 0 0 0-.03.017l-.038.06a.217.217 0 0 1-.184.1h-.054s-.086-.015-.086-.108v-.339a.097.097 0 0 1 .045-.067c.032-.02.107-.061.144-.081a.038.038 0 0 1 .043.005l.07.066c.007.007.015.01.024.01h.015c.022 0 .051 0 .057-.003.004-.002.004-.007.003-.014 0-.017 0-.046.045-.06.066-.019.109.04.109.04l.165.199a.037.037 0 0 0 .05.006l.023-.016a.038.038 0 0 0 .012-.05l-.002-.005a.223.223 0 0 1 .048-.28l.137-.118s.016-.01.024-.071c.005-.037.015-.09.021-.128l.021-.036.02-.036.297-.252a.036.036 0 0 1 .055.008c.014.022.038.046.069.045a.767.767 0 0 0 .208-.093.036.036 0 0 0 .019-.033v-.047l-.143.03a.038.038 0 0 1-.044-.031l-.016-.095a.038.038 0 0 0-.036-.03l-.143.015.018-.043a.043.043 0 0 1 .034-.027l.352-.037.056-.023.056-.023.071-.056a.038.038 0 0 0 .004-.055l-.396-.41a.039.039 0 0 0-.043-.008l-.118.057a.04.04 0 0 1-.038-.003L4.1 5.91a.036.036 0 0 0-.05.008l-.051.07a.033.033 0 0 0-.007.02l-.01.174c0 .011.003.02.011.029l.048.05a.038.038 0 0 1-.005.056l-.07.051a.037.037 0 0 1-.034.006l-.16.027a.22.22 0 0 0-.133-.13l-.08-.028a.222.222 0 0 1-.098-.35l.156-.19a.042.042 0 0 0 .007-.038l-.044-.115-.008-.012-.176-.19a.122.122 0 0 0-.21.065l-.001.01a.123.123 0 0 1-.12.104H2.54l-.05-.01a2.652 2.652 0 0 1-.04-.009l-.358-.162a2.003 2.003 0 0 0-.075-.018l-.33-.022a2.158 2.158 0 0 1-.092.015l-.148.058a.217.217 0 0 1-.124.01L.591 5.23a.212.212 0 0 0-.132.013l-.346.15a.038.038 0 0 0-.009.063l.09.077c.026.021.011.065-.022.066l-.136.003c-.02 0-.036.017-.036.037v.02c0 .02.016.036.036.037l.117.001c.04.002.051.056.015.072l-.101.046a.037.037 0 0 0-.022.037l.01.103a.22.22 0 0 0 .184.198l.072.012c.034.006.042.051.013.069l-.023.013c-.024.015-.024.05 0 .064l.012.006a.04.04 0 0 0 .035.003l.618-.282a.215.215 0 0 1 .237.04l.588.543a.22.22 0 0 1 .071.152l.02.415a.222.222 0 0 0 .048.128l.579.728c.01.014.03.018.045.01a.038.038 0 0 0 .014-.055s.365.383.4.399l.296.148a.22.22 0 0 0 .097.023h.147c.015 0 .028.008.033.021l.05.108V8.7l.001.001.002.003c.015.025.088.143.165.148.087.005.243 0 .243 0s.056-.001.056.06v.095a.036.036 0 0 1-.019.032c-.048.027-.172.107-.172.197v.212c0 .01.003.017.008.024.016.019.05.06.08.084.027.022.072.073.098.103l.013.014a.038.038 0 0 1 .008.024v.122a.04.04 0 0 1 .001.006l.001.007c.007.016.024.057.055.072.019.009.065.047.108.085a.222.222 0 0 1 .076.186l-.027.345-.003.02a.43.43 0 0 1-.003.02l-.119.45a1.75 1.75 0 0 0-.007.08l.012.185a.233.233 0 0 1-.01.095l-.044.126a.235.235 0 0 0-.007.125l.056.233a.123.123 0 0 0 .044.07l.057.045c.022.018.054.042.076.026.077-.054.12-.218.155-.353.015-.06.03-.115.044-.15.01-.023.067-.105.134-.202.11-.156.245-.35.244-.389l-.003-.09c0-.022.016-.038.037-.038h.114c.01 0 .02-.004.026-.012l.266-.294a.036.036 0 0 0 .01-.026v-.12c0-.021.017-.037.038-.037.045.002.12.002.145-.02.027-.021.097-.103.138-.15l.021-.024a.039.039 0 0 0 .01-.025v-.19c0-.055.02-.108.057-.15l.133-.148a.137.137 0 0 0-.043-.215M14.916 10.7l-.008.001c-.006.005.005.036.024.067.031.051.033.062.016.086-.017.025-.016.03.004.044.036.023.028.034-.022.03-.038-.004-.049.002-.07.039a.27.27 0 0 1-.078.074c-.071.044-.108.109-.06.109.013 0 .017.01.012.026-.01.032-.006.032.065-.002.041-.02.06-.038.066-.065a.065.065 0 0 1 .041-.048c.018-.006.032-.015.03-.019-.007-.018.033-.082.048-.077.02.006.08-.06.07-.076-.005-.006.001-.011.012-.011.022 0 .043-.048.03-.067-.004-.006-.023-.007-.043-.003-.024.005-.035.002-.035-.01 0-.02-.075-.089-.102-.097M12.885 9.274l-.486-.057a.119.119 0 0 1-.035-.01l-.118-.048a.144.144 0 0 1-.048-.032l-.39-.414a.05.05 0 0 0-.042-.015.047.047 0 0 0-.028.078l.41.466a.15.15 0 0 0 .063.04l.232.07a.128.128 0 0 0 .04.005h.397zM13.85 9.535l-.02.057a.255.255 0 0 1-.27.17.05.05 0 0 1-.038-.027.05.05 0 0 1 .001-.047l.1-.186-.26.01a.254.254 0 0 0-.1.023l-.098.046a.249.249 0 0 0-.07.049l-.18.178a.24.24 0 0 1-.075.051l-.123.055a.259.259 0 0 0-.152.236v.02c0 .034.007.068.02.1l.096.228c.003.005.004.01.005.015a.11.11 0 0 0 .143.077l.245-.088a.248.248 0 0 1 .108-.013l.294.027c.08.006.15.05.193.12l.02.03a.254.254 0 0 0 .218.122h.118a.255.255 0 0 0 .182-.076l.13-.132a.26.26 0 0 0 .075-.183v-.173a.26.26 0 0 0-.082-.19l-.268-.248a.24.24 0 0 1-.06-.082l-.08-.175c-.017-.027-.06-.026-.071.006M13.322 9.25c.017.001.029.014.028.037 0 .015-.029.043-.064.063a.332.332 0 0 1-.068.032c-.016.004-.019-.005-.019-.027 0-.017.006-.031.014-.031.007 0 .03-.02.051-.043.02-.022.041-.032.058-.03M13.079 9.272c.16 0 .149.04-.013.048-.095.004-.12 0-.115-.021.005-.018.045-.027.128-.027M6.117 5.52h.09l.067.046.182-.047.033.081v.115l-.175.021a.133.133 0 0 1-.1-.028l-.153-.121zM8.12 4.551h-.23l-.056.04.197.25h.09l.082-.152.202.103.032-.048-.24-.169a.132.132 0 0 0-.076-.024M8.611 4.372h-.298l-.028.046.086.064a.13.13 0 0 0 .08.027h.16l.076-.08zM3.042 4.379l-.197.074-.19.048.273.13.216-.07.072-.013-.057-.109zM3.415 4.78h-.086v.043l.046.017.01.044.071.01.048.055.424-.014.024-.05-.037-.056h-.456zM3.03 4.884l-.033-.096.033-.018.127.01.03.029-.07.082zM3.216 4.725l.016-.054.035-.024.034.013.058.025v.024h-.03l-.046.038z\"></path><path fill=\"#050505\" d=\"m3.844 8.095-.083.037c-.01.005-.01.021 0 .024l.088.037.103-.017.167.115h.119s.081-.01.081-.032-.081-.033-.081-.033l-.172-.13zM4.4 8.272s-.074.045-.065.066c.016.038.16 0 .16 0s.052-.048.043-.066c-.018-.031-.138 0-.138 0M14.162 10.93h-.28l.074.164h.066z\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-fat-left.svg":
/*!****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-fat-left.svg ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M.4 8 8 1.92V5.5h7v5H8v3.58zM7 9.5h7v-3H7V4L2 8l5 4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/directional/arrow-fat-right.svg":
/*!*****************************************************************!*\
  !*** ./jimu-icons/svg/outlined/directional/arrow-fat-right.svg ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"m16 8-7.6 6.08V10.5h-7v-5h7V1.92zM9.4 6.5h-7v3h7V12l5-4-5-4z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-icons/svg/outlined/editor/trash.svg":
/*!**************************************************!*\
  !*** ./jimu-icons/svg/outlined/editor/trash.svg ***!
  \**************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 16 16\"><path fill=\"#000\" d=\"M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5\"></path><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z\" clip-rule=\"evenodd\"></path></svg>"

/***/ }),

/***/ "./jimu-ui/lib/icons/arrow-down-header.svg":
/*!*************************************************!*\
  !*** ./jimu-ui/lib/icons/arrow-down-header.svg ***!
  \*************************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 9 5\"><path fill=\"#000\" fill-rule=\"evenodd\" d=\"M4.128 4.587.751.834A.5.5 0 0 1 1.123 0h6.754a.5.5 0 0 1 .372.834L4.872 4.587a.5.5 0 0 1-.744 0\"></path></svg>"

/***/ }),

/***/ "./jimu-ui/lib/icons/more-16.svg":
/*!***************************************!*\
  !*** ./jimu-ui/lib/icons/more-16.svg ***!
  \***************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><g fill=\"none\" fill-rule=\"nonzero\"><path fill=\"#000\" d=\"M13 7.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0m-6.5 0a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0M0 7.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0\"></path><path d=\"M0 0h16v16H0z\"></path></g></svg>"

/***/ }),

/***/ "./jimu-ui/lib/icons/widgets.svg":
/*!***************************************!*\
  !*** ./jimu-ui/lib/icons/widgets.svg ***!
  \***************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\"><path d=\"M20.889 1.333h6.222a3.556 3.556 0 0 1 3.556 3.556v6.222a3.556 3.556 0 0 1-3.556 3.556h-6.222a3.556 3.556 0 0 1-3.556-3.556V4.889a3.556 3.556 0 0 1 3.556-3.556M20 4v8h8V4zM4.889 17.333h6.222a3.556 3.556 0 0 1 3.556 3.556v6.222a3.556 3.556 0 0 1-3.556 3.556H4.889a3.556 3.556 0 0 1-3.556-3.556v-6.222a3.556 3.556 0 0 1 3.556-3.556M4 20v8h8v-8zm20 8a4 4 0 1 0 0-8 4 4 0 0 0 0 8m0 2.667a6.667 6.667 0 1 1 0-13.334 6.667 6.667 0 0 1 0 13.334M4.981 12h6.037L7.999 5.963zm4.212-9.615 5.176 10.352a1.334 1.334 0 0 1-1.192 1.93H2.825a1.333 1.333 0 0 1-1.192-1.929L6.809 2.386a1.332 1.332 0 0 1 2.385 0z\"></path></svg>"

/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/config.ts":
/*!************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/config.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SceneQualityMode: () => (/* binding */ SceneQualityMode)
/* harmony export */ });
var SceneQualityMode;
(function (SceneQualityMode) {
    SceneQualityMode["auto"] = "auto";
    SceneQualityMode["low"] = "low";
    SceneQualityMode["medium"] = "medium";
    SceneQualityMode["high"] = "high";
})(SceneQualityMode || (SceneQualityMode = {}));


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/default-map.tsx":
/*!*************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/components/default-map.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DefaultMap)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
/* harmony import */ var _multisourcemap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./multisourcemap */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");




class DefaultMap extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {
            defaultMapInfo: null
        };
    }
    componentDidMount() {
        jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.portalUtils.getDefaultWebMap(this.props.baseWidgetProps.portalUrl).then(defaultMapInfo => {
            this.setState({
                defaultMapInfo: defaultMapInfo
            });
        });
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'w-100 h-100' },
            !this.state.defaultMapInfo && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'widget-map w-100 h-100 widget-map-background' },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { style: { position: 'absolute', left: '50%', top: '50%' }, className: 'jimu-secondary-loading' })),
            this.state.defaultMapInfo && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100', { 'map-is-design-mode': !(0,_utils__WEBPACK_IMPORTED_MODULE_1__.checkIsLive)(this.props.baseWidgetProps.appMode) }) }, jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_multisourcemap__WEBPACK_IMPORTED_MODULE_2__["default"], { key: 0, fullScreenMap: this.props.fullScreenMap, baseWidgetProps: this.props.baseWidgetProps, startLoadModules: this.props.startLoadModules, isDefaultMap: true, ref: this.props.setMultiSourceMapInstance, onViewGroupCreate: this.props.onViewGroupCreate, onJimuMapViewCreated: this.props.onJimuMapViewCreated, onActiveJimuMapViewChange: this.props.onActiveJimuMapViewChange, widgetHeight: this.props.widgetHeight, widthBreakpoint: this.props.widthBreakpoint, isFullScreen: this.props.isFullScreen, isMapInVisibleArea: this.props.isMapInVisibleArea, defaultMapInfo: this.state.defaultMapInfo, autoControlWidgetId: this.props.autoControlWidgetId }))));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/map-thumb.tsx":
/*!***********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/components/map-thumb.tsx ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MapThumb)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_icons_filled_data_placeholder_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-icons/filled/data/placeholder-map */ "./jimu-icons/filled/data/placeholder-map.tsx");



class MapThumb extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.unmount = false;
        this.setMapThumbUrl = (mapId) => {
            var _a;
            if (!mapId) {
                this.setState({ mapThumbUrl: null });
            }
            // if no portalUrl or same to config portalurl, use app config's portalUrl
            const portalUrl = ((_a = this.props) === null || _a === void 0 ? void 0 : _a.portUrl) || (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().portalUrl;
            const session = jimu_core__WEBPACK_IMPORTED_MODULE_0__.SessionManager.getInstance().getSessionByUrl(portalUrl) || null;
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.esri.restPortal.searchItems({
                q: `id:${mapId}`,
                authentication: session,
                portal: portalUrl + '/sharing/rest'
            }).then(items => {
                var _a;
                if (!this.unmount) {
                    if ((_a = items.results[0]) === null || _a === void 0 ? void 0 : _a.thumbnail) {
                        const session = jimu_core__WEBPACK_IMPORTED_MODULE_0__.SessionManager.getInstance().getSessionByUrl(portalUrl);
                        let tempThumbUrl = null;
                        if (session && session.token) {
                            tempThumbUrl = `${portalUrl}/sharing/rest/content/items/${items.results[0].id}/` +
                                `info/${items.results[0].thumbnail}?token=${session.token}`;
                        }
                        else {
                            tempThumbUrl = `${portalUrl}/sharing/rest/content/items/${items.results[0].id}/` +
                                `info/${items.results[0].thumbnail}`;
                        }
                        this.setState({ mapThumbUrl: tempThumbUrl });
                    }
                    else {
                        this.setState({ mapThumbUrl: null });
                    }
                }
            });
        };
        this.state = {
            mapThumbUrl: null
        };
    }
    componentDidMount() {
        this.unmount = false;
        this.setMapThumbUrl(this.props.mapItemId);
    }
    componentDidUpdate(prevProps, prevState) {
        if (prevProps.mapItemId !== this.props.mapItemId) {
            this.setMapThumbUrl(this.props.mapItemId);
        }
    }
    componentWillUnmount() {
        this.unmount = true;
    }
    render() {
        if (this.state.mapThumbUrl) {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.ImageWithParam, { imageParam: { url: this.state.mapThumbUrl } });
        }
        else {
            const palette = this.props.theme.colors.palette;
            return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { style: { backgroundColor: palette.light[200], height: '100%' } },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_filled_data_placeholder_map__WEBPACK_IMPORTED_MODULE_2__.PlaceholderMapFilled, { color: palette.light[600], size: '100%' })));
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/mapbase.tsx":
/*!*********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/components/mapbase.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapLoadStatus: () => (/* binding */ MapLoadStatus),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config */ "./extensions/widgets/arcgis/arcgis-map/src/config.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
/* harmony import */ var _multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */






const Exchange = __webpack_require__(/*! ../assets/icons/exchange.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exchange.svg");
const DEFAULT_HIGHLIGHT_COLOR = '#00FFFF';
const DEFAULT_HIGHLIGHT_HALO_COLOR = '#00FFFF';
var MapLoadStatus;
(function (MapLoadStatus) {
    MapLoadStatus["Loading"] = "LOADING";
    MapLoadStatus["Loadok"] = "LOADOK";
    MapLoadStatus["LoadError"] = "LOADERROR";
})(MapLoadStatus || (MapLoadStatus = {}));
class MapBase extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.dsManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
        this.isFirstReceiveMessage = true;
        this.__unmount = false;
        this.debounceUpdateUrlHashParams = () => { };
        this.getInitViewPointForDefaultWebMap = () => {
            const defaultExtent = this.props.defaultMapInfo && this.props.defaultMapInfo.defaultExtent;
            let tempViewPoint = null;
            if (this.props.baseWidgetProps.config.initialMapState && this.props.baseWidgetProps.config.initialMapState.viewPoint) {
                tempViewPoint = this.generateViewPointFromInitialMapState(this.props.baseWidgetProps.config.initialMapState);
            }
            else {
                tempViewPoint = new this.Viewpoint({
                    targetGeometry: new this.Extent({
                        xmin: defaultExtent && defaultExtent.xmin,
                        ymin: defaultExtent && defaultExtent.ymin,
                        xmax: defaultExtent && defaultExtent.xmax,
                        ymax: defaultExtent && defaultExtent.ymax,
                        spatialReference: { wkid: defaultExtent.spatialReference.wkid }
                    })
                });
            }
            return tempViewPoint;
        };
        /**
         * onDataSourceCreated and onCreateDataSourceFailed will not invoked when this.props.isWebMap is true
         * @param dataSource
         */
        this.onDataSourceCreated = (dataSource) => {
            if (dataSource.id === this.props.dataSourceId) {
                const isDsCreateFailedBefore = this.createFailedDataSourceIds[this.props.dataSourceId];
                delete this.createFailedDataSourceIds[this.props.dataSourceId];
                this.mapDs = dataSource;
                if (this.isReadyToCreateJimuMapView()) {
                    this.createJimuMapView();
                    return;
                }
                if (isDsCreateFailedBefore && !this.view && !this.mapCreatingInfo && this.expectedDataSourceInfo && this.expectedDataSourceInfo.dataSourceId === dataSource.id) {
                    console.log(`recreate map because data source ${this.props.dataSourceId} is recreated`);
                    this.cacheLoadModulesAndCreateMapbaseView(this.expectedDataSourceInfo);
                }
            }
        };
        this.onCreateDataSourceFailed = (err) => {
            console.warn('onCreateDataSourceFailed', err);
            this.mapDs = null;
            const dsId = this.props.dataSourceId;
            this.createFailedDataSourceIds[dsId] = true;
            this.setState({
                mapLoadStatus: MapLoadStatus.LoadError
            }, () => {
                this.props.onMapLoaded(dsId, MapLoadStatus.LoadError);
            });
        };
        // This method is used to sync viewpoint between two mapbase of same map widget.
        this.setViewPoint = (viewPoint) => {
            if (this.view && viewPoint) {
                this.view.viewpoint = viewPoint.clone();
            }
        };
        // This method is used to sync viewpoint between two mapbase of same map widget.
        this.getViewPoint = () => {
            return this.view && this.view.viewpoint ? this.view.viewpoint.clone() : null;
        };
        this.getMapLoadStatus = () => {
            return this.state.mapLoadStatus;
        };
        this.getViewType = () => {
            return this.getDsJsonFromDsId(this.props.dataSourceId).type;
        };
        this.queryExtentFromSingleLayerQueryParams = (dataSourceId) => {
            const dataSource = this.dsManager.getDataSource(dataSourceId);
            const queryParams = dataSource.getCurrentQueryParams();
            let layerObjectPromise;
            if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.layer) {
                layerObjectPromise = Promise.resolve(dataSource.layer);
            }
            else {
                layerObjectPromise = dataSource.createJSAPILayerByDataSource().then((layerObject) => Promise.resolve(layerObject));
            }
            return (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/rest/support/Query',
                'esri/Graphic',
                'esri/geometry/Point'
            ]).then(modules => {
                const [Query, Graphic, Point] = modules;
                const query = new Query();
                query.where = queryParams === null || queryParams === void 0 ? void 0 : queryParams.where;
                return layerObjectPromise.then(layerObject => {
                    return layerObject.queryExtent(query).then(result => {
                        var _a;
                        const extentCenter = (_a = result === null || result === void 0 ? void 0 : result.extent) === null || _a === void 0 ? void 0 : _a.center;
                        const extent = result === null || result === void 0 ? void 0 : result.extent;
                        let singlePointGraphic;
                        if ((result === null || result === void 0 ? void 0 : result.count) === 1 && (layerObject.geometryType === 'point') && extentCenter) {
                            const point = new Point({
                                x: extentCenter.x,
                                y: extentCenter.y,
                                spatialReference: extent.spatialReference
                            });
                            singlePointGraphic = new Graphic({ geometry: point });
                        }
                        return {
                            extent: extent,
                            singlePointGraphic: singlePointGraphic,
                            count: result === null || result === void 0 ? void 0 : result.count,
                            layer: layerObject
                        };
                    });
                });
            });
        };
        this.queryExtentFromQueryParams = (mapBaseView, dataSourceIds, useDataSources) => {
            //const dataSource = this.dsManager.getDataSource(dataSourceId) as FeatureLayerDataSource
            //const queryParams: SqlQueryParams = dataSource.getCurrentQueryParams()
            const useDefaultExtentOfCurrentView = !useDataSources.some(useDataSource => {
                const dataSource = this.dsManager.getDataSource(useDataSource.dataSourceId);
                const queryParams = dataSource.getRuntimeQueryParams();
                // use default extent if all merged SQLs on data source is remvoved.
                const hasQueryWhere = (queryParams === null || queryParams === void 0 ? void 0 : queryParams.where) && queryParams.where !== '1=1';
                if (hasQueryWhere) {
                    return true;
                }
                else {
                    return false;
                }
            });
            if (useDefaultExtentOfCurrentView) {
                const initViewPoint = this.getMapBaseInitViewPoint();
                return Promise.resolve({
                    viewpoint: initViewPoint,
                    useDefaultExtentOfCurrentView: true,
                    singlePointGraphic: null,
                    count: 2,
                    layer: null
                });
            }
            const extentResultPromises = [];
            dataSourceIds.forEach(dataSourceId => {
                extentResultPromises.push(this.queryExtentFromSingleLayerQueryParams(dataSourceId));
            });
            return Promise.all(extentResultPromises).then(results => {
                let fullExtent = null;
                let count = 0;
                if ((results === null || results === void 0 ? void 0 : results.length) === 1) {
                    return results[0];
                }
                else {
                    results.forEach(result => {
                        if (result.extent) {
                            fullExtent = fullExtent ? fullExtent.union(result.extent) : result.extent;
                        }
                        count = count + result.count;
                    });
                    return {
                        extent: fullExtent,
                        singlePointGraphic: null,
                        count: count,
                        layer: null
                    };
                }
            });
        };
        this.debounceUpdateUrlHashParams = jimu_core__WEBPACK_IMPORTED_MODULE_0__.lodash.debounce(() => {
            this.updateUrlHashParams();
        }, 500);
        this.restored = false;
        this.createFailedDataSourceIds = {};
        this.updateExpectedDataSourceInfo();
        const restoreData = this.getRestoreDataFromMS();
        if (restoreData && restoreData.expectedDataSourceInfo.uniqueId === this.expectedDataSourceInfo.uniqueId) {
            (0,_utils__WEBPACK_IMPORTED_MODULE_4__.restoreMapBase)(this, restoreData);
            this.updateRestoreDataToMS(null);
            this.bindMapBaseViewEvent(this.view);
            if (this.view) {
                this.view.isInCaching = false;
                this.view.mapbase = this;
                this.restored = true;
                this.tryFatalErrorRecovery(this.view);
                if (this.view.isMapToolsHidden) {
                    this.view.hideMapTools();
                }
                else {
                    this.view.showMapTools();
                }
            }
        }
        else {
            this.state = {
                dataSourceId: null,
                isBasicModulesLoaded: false,
                mapLoadStatus: MapLoadStatus.Loading
            };
        }
    }
    static getDerivedStateFromProps(nextProps, prevState) {
        if (nextProps.dataSourceId !== prevState.dataSourceId) {
            return {
                dataSourceId: nextProps.dataSourceId,
                mapLoadStatus: MapLoadStatus.Loading
            };
        }
        else {
            return null;
        }
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .esri-view .esri-view-surface:focus::after {
        display: none;
      }
    `;
    }
    render() {
        let useDataSource = null;
        if (this.props.baseWidgetProps.useDataSources) {
            useDataSource = this.props.baseWidgetProps.useDataSources.find((item) => item.dataSourceId === this.props.dataSourceId);
        }
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 map-base', style: { position: 'relative' }, css: this.getStyle(), ref: ref => { this.widgetContainer = ref; } },
            (this.state.mapLoadStatus === MapLoadStatus.Loading) &&
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 widget-map-background' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { position: 'absolute', left: '50%', top: '50%' }, className: 'jimu-secondary-loading' })),
            (this.state.mapLoadStatus === MapLoadStatus.LoadError) &&
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 widget-map-background' },
                    this.getMapSwitchForErrorMap(),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 d-flex justify-content-center align-items-center' }, this.formatMessage('mapFailure'))),
            !this.props.isDefaultMap && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { position: 'absolute', display: 'none' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceComponent, { useDataSource: useDataSource, onDataSourceCreated: this.onDataSourceCreated, onCreateDataSourceFailed: this.onCreateDataSourceFailed }))));
    }
    componentDidMount() {
        this.__unmount = false;
        if (this.widgetContainer.getElementsByClassName('widget-map').length === 0) {
            if (!this.mapContainer) {
                this.mapContainer = document && document.createElement('div');
                this.mapContainer.className = 'w-100 h-100 widget-map mapview-container';
            }
            this.widgetContainer.appendChild(this.mapContainer);
        }
        if (this.props.startLoadModules) {
            this.loadCommonModules();
        }
        if (this.restored) {
            const jimuMapView = this.getJimuMapViewFoView(this.view);
            if (jimuMapView && !jimuMapView.isCached()) {
                jimuMapView.onRestore();
            }
        }
    }
    componentDidUpdate(prevProps) {
        // update the this.expectedDataSourceInfo by the current props
        this.updateExpectedDataSourceInfo();
        if (!this.state.isBasicModulesLoaded) {
            return;
        }
        // TODO: should we check isMapInVisibleArea before this.checkAndHandleIfDataSourceIdPropChange() ?
        // props.isMapInVisibleArea changed
        if (this.view && prevProps.isMapInVisibleArea !== this.props.isMapInVisibleArea && (this.props.baseWidgetProps.useDataSources && this.props.baseWidgetProps.useDataSources.length === 2)) {
            if (this.props.isMapInVisibleArea) {
                this.view.isInCaching = false;
                this.tryFatalErrorRecovery(this.view);
            }
            else {
                this.view.isInCaching = true;
            }
        }
        // the following code is mainly used to check and handle if dataSourceId prop change
        let needCreateNewView = false;
        if (this.view) {
            // this.view created, now need to check if this.view match this.props.dataSourceId or not
            if (this.isViewExpected(this.view)) {
                // data source match this.props.dataSourceId, do nothing
                needCreateNewView = false;
                // this.view is the expected view
                // We call this.tryUpdateCurrentViewByConfigProps() to consume this.props.baseWidgetProps.config change
                this.tryUpdateCurrentViewByConfigProps(false);
                // We call this.checkAndHandleMutableStateProps() to consume this.props.baseWidgetProps.mutableStateProps change
                this.checkAndHandleMutableStateProps();
                return;
            }
            else {
                // data source changed, we need to destroy this.view
                needCreateNewView = true;
            }
        }
        else {
            // this.view not created, we need to check if we are creating the expected view
            if (this.isCreatingExpectedView()) {
                // We are creating the expected view, do nothing
                needCreateNewView = false;
                return;
            }
            else {
                // need to create new view
                needCreateNewView = true;
            }
        }
        if (needCreateNewView) {
            this.destroyCurrentMapbaseView();
            this.cacheLoadModulesAndCreateMapbaseView(this.expectedDataSourceInfo);
        }
    }
    componentWillUnmount() {
        this.__unmount = true;
        if (this.view) {
            this.view.mapbase = null;
        }
        const widgets = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.widgets;
        if (widgets[this.props.baseWidgetProps.id] && widgets[this.props.baseWidgetProps.id].useDataSources === this.props.baseWidgetProps.useDataSources &&
            this.state.mapLoadStatus !== MapLoadStatus.Loading) {
            // JS API limits only 16 canvas with WebGL context on a html page. Caching the map widget (unmount the canvas from the html tree but don't destroy the view) is a workround.
            // We scroll the page and the map widget is not in the visible area, we need to cache it so we can restore it quickly.
            // We don't destroy the map view here, just cache it to mutable store.
            const restoreData = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getMapBaseRestoreData)(this);
            if (this.view) {
                this.view.isInCaching = true;
            }
            this.updateRestoreDataToMS(restoreData);
            if (this.view) {
                const jimuMapView = this.getJimuMapViewFoView(this.view);
                if (jimuMapView) {
                    jimuMapView.onCache();
                }
            }
        }
        else {
            // Destroy the map view
            this.destroyCurrentMapbaseView();
            this.mapCreatingInfo = null;
            if (this.view && !this.view.destroyed) {
                this.view.container = null;
                this.view = null;
            }
            this.mapDs = null;
        }
    }
    createDataSourceInfo(dataSourceId) {
        let result = null;
        const dataSourceJson = this.getDsJsonFromDsId(dataSourceId);
        if (dataSourceJson && dataSourceJson.id) {
            // data source case2 or data source case3
            const type = dataSourceJson.type || '';
            const itemId = dataSourceJson.itemId || '';
            const dataSourceId = dataSourceJson.id;
            const jimuMapViewId = this.getJimuMapViewId(dataSourceId);
            if (type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.DataSourceTypes.WebScene) {
                // user select a web scene
                result = {
                    isDefaultMap: false,
                    isWebMap: false,
                    uniqueId: `webscene-${dataSourceId}-${itemId}`,
                    dataSourceId,
                    jimuMapViewId,
                    dataSourceJson
                };
            }
            else {
                // user select a web map
                result = {
                    isDefaultMap: false,
                    isWebMap: true,
                    uniqueId: `webmap-${dataSourceId}-${itemId}`,
                    dataSourceId,
                    jimuMapViewId,
                    dataSourceJson
                };
            }
        }
        else {
            // data source case1: use default web map
            const dataSourceId = '';
            // TODO: could we use this.getJimuMapViewId('defaultmap') here ?
            const jimuMapViewId = this.getJimuMapViewId(dataSourceId);
            result = {
                isDefaultMap: true,
                isWebMap: true,
                uniqueId: 'webmap-default',
                dataSourceId,
                jimuMapViewId,
                dataSourceJson
            };
        }
        return result;
    }
    getJimuMapViewId(dataSourceId) {
        return (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getJimuMapViewId)(this.props.baseWidgetProps.id, dataSourceId);
    }
    getDsJsonFromDsId(dataSourceId) {
        let result = null;
        if (dataSourceId) {
            result = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.dataSources[dataSourceId];
        }
        if (!result) {
            result = {};
        }
        return result;
    }
    getCurrentDataSourceJson() {
        // when select a web map or web scene in builder, this.props.dataSourceId is not null, the result is like this
        // {
        //   id: "dataSource_5",
        //   type: "WEB_MAP",
        //   sourceLabel: "China Version 1_2",
        //   itemId: "a2c5449c4c624447bf45d48478b25838",
        //   portalUrl: "https://esridevbeijing.maps.arcgis.com",
        // }
        // when use the default web map in builder, this.props.dataSourceId is null, the result is empty object {}
        return this.getDsJsonFromDsId(this.props.dataSourceId);
    }
    updateExpectedDataSourceInfo() {
        this.expectedDataSourceInfo = this.createDataSourceInfo(this.props.dataSourceId);
    }
    isCurrentViewExpected() {
        return this.isViewExpected(this.view);
    }
    isViewExpected(view) {
        return view && view.dataSourceInfo.uniqueId === this.expectedDataSourceInfo.uniqueId;
    }
    isCreatingExpectedView() {
        return this.mapCreatingInfo && this.isDataSourceInfoExpected(this.mapCreatingInfo.dataSourceInfo);
    }
    isDataSourceInfoExpected(dataSourceInfo) {
        return dataSourceInfo && dataSourceInfo.uniqueId === this.expectedDataSourceInfo.uniqueId;
    }
    /**
     * Consume this.props.baseWidgetProps.config change
     * @param calledWhenViewCreate true means this method is called when view just created, false means this method is called when config props change
     */
    tryUpdateCurrentViewByConfigProps(calledWhenViewCreate) {
        if (!this.view) {
            return;
        }
        const config = this.props.baseWidgetProps.config;
        const preConfig = this.lastUpdateViewConfig;
        this.lastUpdateViewConfig = config;
        // update popup options
        const currPopupEnabled = !config.disablePopUp;
        if (calledWhenViewCreate) {
            // calledWhenViewCreate is true, means tryUpdateCurrentViewByConfigProps is called when view just created, we just set view.popupEnabled to !config.disablePopUp.
            this.view.popupEnabled = currPopupEnabled;
        }
        else {
            // calledWhenViewCreate is false, means tryUpdateCurrentViewByConfigProps is called when config props change, we need to handle config.disablePopUp change.
            const prePopupEnabled = !(preConfig === null || preConfig === void 0 ? void 0 : preConfig.disablePopUp);
            const popupEnabled = !config.disablePopUp;
            // Both Map widget 'disablePopUp' option and JimuMapView.enableClickOpenPopup() can control 'view.popupEnabled'.
            // We should not use `this.view.popupEnabled !== currPopupEnabled` here because we only want to check if Map widget 'disablePopUp' option changed,
            // so we should use `prePopupEnabled !== currPopupEnabled` here.
            if (prePopupEnabled !== popupEnabled) {
                // config.disablePopUp really changed
                this.view.popupEnabled = popupEnabled;
                if (!popupEnabled) {
                    this.view.closePopup();
                }
            }
        }
        if ((config.selectionHighlightColor !== (preConfig === null || preConfig === void 0 ? void 0 : preConfig.selectionHighlightColor)) || (config.selectionHighlightHaloColor !== (preConfig === null || preConfig === void 0 ? void 0 : preConfig.selectionHighlightHaloColor))) {
            // highlight info changes
            const highlightColor = config.selectionHighlightColor || DEFAULT_HIGHLIGHT_COLOR;
            const highlightHaloColor = config.selectionHighlightHaloColor || DEFAULT_HIGHLIGHT_HALO_COLOR;
            const highlightOptions = Object.assign(Object.assign({}, this.view.highlightOptions), { color: new this.Color(highlightColor), haloColor: new this.Color(highlightHaloColor) });
            this.view.highlightOptions = highlightOptions;
        }
        const enableScroll = !config.disableScroll;
        // this.view.navigation is empty sometimes, so we need to check it here.
        if (this.view.navigation) {
            if (this.view.navigation.mouseWheelZoomEnabled !== enableScroll) {
                this.view.navigation.mouseWheelZoomEnabled = enableScroll;
            }
            if (this.view.navigation.browserTouchPanEnabled !== enableScroll) {
                this.view.navigation.browserTouchPanEnabled = enableScroll;
            }
        }
        if (this.view.ui) {
            this.view.ui.components = [];
        }
        const sceneQualityMode = config.sceneQualityMode;
        if (this.isSceneView(this.view)) {
            const sceneView = this.view;
            if (sceneQualityMode && sceneQualityMode !== sceneView.qualityProfile) {
                sceneView.qualityProfile = sceneQualityMode;
            }
        }
    }
    /**
     * Consume this.props.baseWidgetProps.mutableStateProps change
     */
    checkAndHandleMutableStateProps() {
        if (this.view && this.props.baseWidgetProps.mutableStateProps) {
            const jimuMapViewId = this.view.dataSourceInfo.jimuMapViewId;
            const jimuMapView = jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().getJimuMapViewById(jimuMapViewId);
            if (jimuMapView) {
                jimuMapView.whenJimuMapViewLoaded().then(() => {
                    setTimeout(() => {
                        // We don't need to check this.view if null or destroyed here, we do it in this.handleAction()
                        this.handleAction(this.props.baseWidgetProps.mutableStateProps, this.view, jimuMapView);
                        this.isFirstReceiveMessage = false;
                    }, this.isFirstReceiveMessage ? 500 : 0);
                });
            }
        }
    }
    isMapView(view) {
        return view && view.declaredClass === 'esri.views.MapView';
    }
    isSceneView(view) {
        return view && view.declaredClass === 'esri.views.SceneView';
    }
    diffProps(prevProps) {
        const addedKeys = [];
        const removeKeys = [];
        const updatedKeys = [];
        const currKeys = Object.keys(this.props);
        const prevKeys = Object.keys(prevProps);
        const prevKeysMap = {};
        prevKeys.forEach(key => {
            prevKeysMap[key] = true;
        });
        const currKeysMap = {};
        currKeys.forEach(key => {
            currKeysMap[key] = true;
        });
        currKeys.forEach(currKey => {
            if (prevKeysMap[currKey]) {
                if (prevProps[currKey] !== this.props[currKey]) {
                    updatedKeys.push(currKey);
                }
            }
            else {
                addedKeys.push(currKey);
            }
        });
        prevKeys.forEach(prevKey => {
            if (!currKeysMap[prevKey]) {
                removeKeys.push(prevKey);
            }
        });
        return {
            addedKeys,
            removeKeys,
            updatedKeys
        };
    }
    loadCommonModules() {
        return __awaiter(this, void 0, void 0, function* () {
            const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/geometry/Extent',
                'esri/Viewpoint',
                'esri/portal/Portal',
                'esri/portal/PortalItem',
                'esri/Color'
            ]);
            [
                this.Extent, this.Viewpoint, this.Portal, this.PortalItem, this.Color
            ] = modules;
            if (this.__unmount) {
                return;
            }
            this.setState({
                isBasicModulesLoaded: true
            });
        });
    }
    cacheLoadModulesAndCreateMapbaseView(dataSourceInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.__unmount || this.isCurrentViewExpected() || this.isCreatingExpectedView()) {
                return;
            }
            this.setState({
                mapLoadStatus: MapLoadStatus.Loading
            });
            const mapCreatingInfo = {
                dataSourceInfo
            };
            this.mapCreatingInfo = mapCreatingInfo;
            try {
                if (dataSourceInfo.isWebMap) {
                    // load modules to create MapView
                    if (!this.MapView) {
                        const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                            'esri/geometry/Geometry',
                            'esri/webmap/InitialViewProperties',
                            'esri/Basemap',
                            'esri/layers/TileLayer',
                            'esri/views/MapView',
                            'esri/WebMap'
                        ]);
                        [
                            this.Geometry, this.InitialViewProperties, this.Basemap, this.TileLayer, this.MapView, this.WebMap
                        ] = modules;
                    }
                }
                else {
                    // load modules for create SceneView
                    if (!this.SceneView) {
                        const modules = yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                            'esri/views/SceneView',
                            'esri/WebScene'
                        ]);
                        [
                            this.SceneView, this.WebScene
                        ] = modules;
                    }
                }
                if (this.__unmount || this.isCurrentViewExpected() || !this.isDataSourceInfoExpected(mapCreatingInfo.dataSourceInfo)) {
                    return;
                }
                yield this.createMapbaseView(mapCreatingInfo);
            }
            catch (e) {
                console.error('cacheLoadModulesAndCreateMapbaseView error', e);
                if (this.mapCreatingInfo === mapCreatingInfo) {
                    this.setState({
                        mapLoadStatus: MapLoadStatus.LoadError
                    });
                }
            }
            if (this.mapCreatingInfo === mapCreatingInfo) {
                this.mapCreatingInfo = null;
            }
        });
    }
    createMapbaseView(mapCreatingInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            const dataSourceInfo = mapCreatingInfo.dataSourceInfo;
            if (this.__unmount || this.isCurrentViewExpected() || !this.isDataSourceInfoExpected(dataSourceInfo)) {
                return;
            }
            // get mapViewOption or sceneViewOption
            let mapViewOption = null;
            let sceneViewOption = null;
            if (dataSourceInfo.isWebMap) {
                // get map view option
                mapViewOption = yield this.getMapViewOptionToCreateMapView(dataSourceInfo);
            }
            else {
                // get scene view option
                sceneViewOption = yield this.getSceneViewOptionToCreateSceneView(dataSourceInfo);
            }
            // need to check view again to avoid new MapView() twice, because we use async function to get mapViewOption
            if (this.__unmount || this.isCurrentViewExpected() || !this.isDataSourceInfoExpected(dataSourceInfo)) {
                return;
            }
            let initUrlHashViewpoint = null;
            if (this.props.baseWidgetProps.isRunAppMode) {
                const hashViewpoint = this.generateViewpointByUrlHashParams(dataSourceInfo.isWebMap);
                if (hashViewpoint) {
                    initUrlHashViewpoint = hashViewpoint.clone();
                    if (mapViewOption) {
                        mapViewOption.viewpoint = hashViewpoint;
                        // Note, we must set snapToZoom to false if we can get hashViewpoint, otherwise the final view.scale is different with hashViewpoint.scale,
                        // because hashViewpoint.scale comes from a float-zoom map and view.scale comes from a int-zoom map.
                        mapViewOption.constraints.snapToZoom = false;
                    }
                    if (sceneViewOption) {
                        sceneViewOption.viewpoint = hashViewpoint;
                    }
                }
            }
            let view = null;
            // create map view or scene view
            if (dataSourceInfo.isWebMap) {
                view = new this.MapView(mapViewOption);
            }
            else {
                view = new this.SceneView(sceneViewOption);
            }
            view.initUrlHashViewpoint = initUrlHashViewpoint;
            const map = view.map;
            // set view.map.originalBasemap
            const setOriginalBasemap = () => {
                if (map.originalBasemap) {
                    return;
                }
                const originalBasemap = map.basemap;
                // originalBasemap maybe null, we need to check originalBasemap is null or not
                if (!originalBasemap) {
                    return;
                }
                if (!originalBasemap.thumbnailUrl) {
                    const mapThumbnailUrl = map.thumbnailUrl;
                    // use map.thumbnailUrl as originalBasemap.thumbnailUrl if originalBasemap.thumbnailUrl is empty
                    if (mapThumbnailUrl) {
                        originalBasemap.thumbnailUrl = mapThumbnailUrl;
                    }
                }
                map.originalBasemap = originalBasemap;
            };
            if (map.basemap) {
                setOriginalBasemap();
            }
            else {
                let watchBasemapHandle = null;
                watchBasemapHandle = map.watch('basemap', () => {
                    // only watch once
                    if (watchBasemapHandle) {
                        watchBasemapHandle.remove();
                    }
                    watchBasemapHandle = null;
                    if (map.basemap) {
                        setOriginalBasemap();
                    }
                });
            }
            view.mapbase = this;
            view.highLightHandles = {};
            view.mapBaseViewEventHandles = {};
            view.extentChangeRelatedWidgetIds = [];
            view.publishExtentChangeMessage = function (stationary, interacive) {
                try {
                    if (view && !view.destroyed) {
                        const mapbase = view.mapbase;
                        if (mapbase && !mapbase.__unmount && mapbase.props && mapbase.props.onExtentChanged) {
                            mapbase.publishExtentChangeMessage(view, stationary, interacive);
                        }
                    }
                }
                catch (e) {
                    console.error('view publish extent change message error', e);
                }
            };
            view.hideMapTools = function () {
                try {
                    view.isMapToolsHidden = true;
                    if (view && !view.destroyed) {
                        const mapbase = view.mapbase;
                        if (mapbase && !mapbase.__unmount && mapbase.props) {
                            if (mapbase.props.onActiveToolInfoChange) {
                                // set no active tool
                                mapbase.props.onActiveToolInfoChange(null);
                            }
                            const multiSourceMapDom = mapbase.props.multiSourceMapDom;
                            if (multiSourceMapDom) {
                                multiSourceMapDom.classList.add('hide-map-tools-layout');
                            }
                        }
                    }
                }
                catch (e) {
                    console.error('view hide map tools error', e);
                }
            };
            view.viewpointHistory = [];
            view.viewpointIndex = -1;
            view.showMapTools = function () {
                try {
                    view.isMapToolsHidden = false;
                    if (view && !view.destroyed) {
                        const mapbase = view.mapbase;
                        if (mapbase && !mapbase.__unmount && mapbase.props) {
                            const multiSourceMapDom = mapbase.props.multiSourceMapDom;
                            if (multiSourceMapDom) {
                                multiSourceMapDom.classList.remove('hide-map-tools-layout');
                            }
                        }
                    }
                }
                catch (e) {
                    console.error('view show map tools error', e);
                }
            };
            if (view.popup) {
                view.popup.spinnerEnabled = false;
            }
            view.dataSourceInfo = dataSourceInfo;
            if (this.view) {
                this.destroyCurrentMapbaseView();
                this.view = null;
            }
            // update this.view
            this.view = view;
            this.mapCreatingInfo = null;
            if (this.isReadyToCreateJimuMapView()) {
                this.createJimuMapView();
            }
            // the following code are same for both map view and scene view
            view.when(() => {
                var _a, _b, _c;
                if (view.viewpoint) {
                    view.viewWhenInitialViewpoint = view.viewpoint.clone();
                    view.lastViewpointUpdateUrlParams = view.viewpoint.clone();
                }
                else {
                    view.viewWhenInitialViewpoint = null;
                    view.lastViewpointUpdateUrlParams = null;
                }
                view.viewWhenTimestamp = Date.now();
                // view.when() is async, we need to check the view is expected or not
                // if the view is not expected again, we don't execute the following logic
                const isViewOk = !view.destroyed && this.view === view && this.isViewExpected(view);
                if (!isViewOk) {
                    return;
                }
                setTimeout(() => {
                    if (!view.destroyed) {
                        // make sure publish extent-change message at least once
                        this.publishExtentChangeMessage(view, true);
                    }
                }, 1000);
                view.watchInteractingHandle = view.watch('interacting', () => {
                    if (view.interacting) {
                        MapBase.lastInteraciveView = view;
                        // We must set view.extentChangeRelatedWidgetIds to empty array, becuase current view is the extent-change sourcer.
                        this.setExtentChangeRelatedWidgetIdsForView(view, []);
                    }
                });
                // MapView always trigger twice extent change event after view when, about 3ms - 80ms after view when.
                // SceneView always trigger 2-5 times extent change event after view when, about 3 - 5000 ms, depends on data.
                view.extentWatchHandle = view.watch('extent', (extent) => {
                    if (!extent) {
                        return;
                    }
                    this.publishExtentChangeMessage(view, false);
                    if (view.stationaryTimerId) {
                        clearTimeout(view.stationaryTimerId);
                        view.stationaryTimerId = null;
                    }
                    // We don't use view.watch('stationary', cb) to check if view is static or not, because the behavior of view.stationary is strange.
                    // Instead, we use a timeout to check if view is static or not.
                    view.stationaryTimerId = setTimeout(() => {
                        view.stationaryTimerId = null;
                        // view is static now
                        // We need to publish extent-change message again when view is static.
                        this.publishExtentChangeMessage(view, true);
                        // Note, make sure we call setExtentChangeRelatedWidgetIdsForView() after publish extent-change message.
                        this.setExtentChangeRelatedWidgetIdsForView(view, []);
                        setTimeout(() => {
                            if (view === MapBase.lastInteraciveView && !view.interacting) {
                                MapBase.lastInteraciveView = null;
                            }
                        }, 1000);
                    }, 200);
                });
                if (!view.fatalErrorWatchHandle) {
                    view.fatalErrorWatchHandle = view.watch('fatalError', (error) => {
                        var _a, _b;
                        if (error) {
                            // Don't use this.props.isMapInVisibleArea to check is map visible or not, because mapbase maybe unmounted and this.props.isMapInVisibleArea is still true.
                            // It is more safe to
                            const shouldRecovery = !view.isInCaching && view.container && view.container.clientWidth > 0 && view.container.clientHeight > 0;
                            const widgetId = ((_b = (_a = this.props) === null || _a === void 0 ? void 0 : _a.baseWidgetProps) === null || _b === void 0 ? void 0 : _b.id) || '';
                            if (shouldRecovery) {
                                console.error(`${widgetId} Fatal Error! View has lost its WebGL context. Attempting to recover it because the view is visible.`);
                                this.tryFatalErrorRecovery(view);
                            }
                            else {
                                console.error(`${widgetId} Fatal Error! View has lost its WebGL context. Don't recover it because the view is not visible.`);
                            }
                        }
                    });
                }
                // after view is loaded, send extent change message
                this.setState({ mapLoadStatus: MapLoadStatus.Loadok }, () => {
                    this.props.onMapLoaded(this.props.dataSourceId, MapLoadStatus.Loadok);
                });
                // If there is an extent is passed from extentMessage before, don't init extent here as this will publish
                // extentMessage and change other mapWidget's extent.
                if (!((_c = (_b = (_a = this.props.baseWidgetProps) === null || _a === void 0 ? void 0 : _a.mutableStateProps) === null || _b === void 0 ? void 0 : _b.zoomToFeatureActionValue) === null || _c === void 0 ? void 0 : _c.value)) {
                    // In 2023.R02, it always calls this.goHome(false) here. We keep it for compatibility.
                    // In the next release, if we can get viewpoint from url hash, we will use it as map initial viewpoint.
                    // For this case (view.initUrlHashViewpoint not empty), we don't call this.goHome(false), because goHome will let the map goto config.initialMapState.
                    if (!view.initUrlHashViewpoint) {
                        this.goHome(false);
                    }
                }
                if (this.isMapView(view)) {
                    // snapToZoom: true means integer zoom, false means float zoom
                    // We need to set the initial value to true for backward compatibility and keep the same behavior with MapViewer
                    // After map inited, we will set snapToZoom to false to get the best synchronization between two map widgets
                    // We use setTimeout here to make sure the above this.goHome(false) is done.
                    setTimeout(() => {
                        view.constraints.snapToZoom = false;
                    }, 0);
                }
            });
            this.bindMapBaseViewEvent(view);
            this.tryUpdateCurrentViewByConfigProps(true);
            this.checkAndHandleMutableStateProps();
        });
    }
    publishExtentChangeMessage(view, stationary, interacive) {
        if (!view) {
            return;
        }
        const nowTime = Date.now();
        if (!view.firstPublishExtentChangeTime) {
            view.firstPublishExtentChangeTime = nowTime;
        }
        const extent = view.extent.clone();
        const viewpoint = view.viewpoint.clone();
        const extentMessage = new jimu_core__WEBPACK_IMPORTED_MODULE_0__.ExtentChangeMessage(this.props.baseWidgetProps.id, extent, viewpoint, stationary);
        extentMessage.publishTime = nowTime;
        extentMessage.interacive = interacive || view.interacting;
        const extentChangeRelatedWidgetIdsOfView = this.getExtentChangeRelatedWidgetIdsOfView(view);
        extentMessage.setRelatedWidgetIds(extentChangeRelatedWidgetIdsOfView);
        extentMessage.addRelatedWidgetId(this.props.baseWidgetProps.id);
        this.props.onExtentChanged(this.props.dataSourceId, extentMessage);
        if (stationary) {
            // handle viewpointHistory
            const currentViewpoint = view.viewpoint.clone();
            if (view.viewpointHistory.length > 0) {
                const indexes = [view.viewpointIndex, view.viewpointIndex - 1, view.viewpointIndex + 1];
                let isSamelikeViewpoint = false;
                const lastViewpointIndex = view.viewpointHistory.length - 1;
                for (let i = 0; i < indexes.length; i++) {
                    const viewpointIndex = indexes[i];
                    if (viewpointIndex >= 0 && viewpointIndex <= lastViewpointIndex) {
                        const viewpoint = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getViewpointInstanceFromHistory)(view, viewpointIndex);
                        if (viewpoint && (0,_utils__WEBPACK_IMPORTED_MODULE_4__.isSamelikeViewpoints)(view, currentViewpoint, viewpoint)) {
                            isSamelikeViewpoint = true;
                            break;
                        }
                    }
                }
                if (!isSamelikeViewpoint) {
                    // current viewpointHistory: view.viewpointIndex point to C
                    // A -> B -> [C] -> D -> E
                    // temp viewpointHistory
                    // A -> B -> [C]
                    view.viewpointHistory.splice(view.viewpointIndex + 1);
                    // new viewpointHistory
                    // A -> B -> C -> [F]
                    view.viewpointHistory.push(currentViewpoint);
                    view.viewpointIndex += 1;
                }
            }
            else {
                // first viewpoint
                view.viewpointHistory.push(currentViewpoint);
                view.viewpointIndex = 0;
            }
            if (view.stationaryCallback) {
                view.stationaryCallback();
            }
        }
        this.debounceUpdateUrlHashParams();
    }
    updateUrlHashParams() {
        if (this.view) {
            const jimuMapView = this.getJimuMapViewFoView(this.view);
            if (jimuMapView && jimuMapView.isActive) {
                // MapView always trigger twice extent change event after view when, about 3ms - 80ms after view when.
                // SceneView always trigger 2-5 times extent change event after view when, about 3 - 5000 ms, depends on data.
                // We don't want to update map url parameters during map initializing, so need to check viewpoint really changed or not.
                const isViewpointChange = !(0,_utils__WEBPACK_IMPORTED_MODULE_4__.isSamelikeViewpoints)(this.view, this.view.viewpoint, this.view.lastViewpointUpdateUrlParams);
                if (isViewpointChange) {
                    // viewpoint really changed
                    (0,_utils__WEBPACK_IMPORTED_MODULE_4__.updateUrlHashParamsForActiveJimuMapView)(jimuMapView);
                }
            }
        }
    }
    generateViewPointFromInitialMapState(initialMapState) {
        // For 2d, initialMapState.extent and initialMapState.viewPoint have some difference.
        // The logic has run long time, for now we don't change its logic for compatibility.
        if (initialMapState.viewType === '2d') {
            return new this.Viewpoint({
                targetGeometry: this.Extent.fromJSON(initialMapState.extent),
                rotation: initialMapState.rotation
            });
        }
        else {
            return this.Viewpoint.fromJSON(initialMapState.viewPoint);
        }
    }
    generateViewpointByUrlHashParams(is2d) {
        let resultViewpoint = null;
        try {
            const isRunAppMode = this.props.baseWidgetProps.isRunAppMode;
            const runtimeUrlHashParams = this.props.baseWidgetProps.runtimeUrlHashParams;
            // if (isRunAppMode && runtimeUrlHashParams && runtimeUrlHashParams.map_state) {
            //   const mapStateJson = JSON.parse(runtimeUrlHashParams.map_state)
            //   const viewpointJson = mapStateJson.viewpoint
            //   const extentJson = mapStateJson.extent
            //   if (viewpointJson && extentJson) {
            //     const viewpoint = this.Viewpoint.fromJSON(viewpointJson)
            //     const extent = this.Extent.fromJSON(extentJson)
            //     if (viewpoint && extent) {
            //       const viewType = is2d ? '2d' : '3d'
            //       const rotation = viewpoint.rotation ?? 0
            //       const initialMapState: ImmutableObject<InitialMapState> = Immutable({
            //         viewPoint: viewpointJson,
            //         viewType,
            //         extent: extentJson,
            //         rotation
            //       })
            //       resultViewpoint = this.generateViewPointFromInitialMapState(initialMapState)
            //     }
            //   }
            // }
            if (isRunAppMode && runtimeUrlHashParams && runtimeUrlHashParams.map_state) {
                const mapStateJson = JSON.parse(runtimeUrlHashParams.map_state);
                const viewpointJson = mapStateJson.viewpoint;
                if (viewpointJson) {
                    resultViewpoint = this.Viewpoint.fromJSON(viewpointJson);
                }
            }
        }
        catch (e) {
            console.error('parse map_state from url hash params error', e);
            resultViewpoint = null;
        }
        return resultViewpoint;
    }
    /**
     * This method create web map or web scene by data source. This method doesn't consider default web map case.
     * @param dataSourceInfo
     * @returns
     */
    createWebMapOrWebSceneByDataSource(dataSourceInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let webMapOrWebScene = null;
            const MapClass = dataSourceInfo.isWebMap ? this.WebMap : this.WebScene;
            const dataSourceJson = dataSourceInfo.dataSourceJson;
            if (dataSourceJson.portalUrl) {
                // create web map or web scene for portal
                const portal = new this.Portal({
                    url: jimu_core__WEBPACK_IMPORTED_MODULE_0__.portalUrlUtils.getPlatformUrlByOrgUrl(dataSourceJson.portalUrl)
                });
                webMapOrWebScene = new MapClass({
                    portalItem: new this.PortalItem({
                        id: dataSourceJson.itemId,
                        portal: portal
                    })
                });
            }
            else {
                // create web map or web scene for arcgis online
                webMapOrWebScene = new MapClass({
                    portalItem: new this.PortalItem({
                        id: dataSourceJson.itemId
                    })
                });
            }
            if (jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getWhetherUseProxy()) {
                yield webMapOrWebScene.load();
                yield webMapOrWebScene.when();
                // set proxy url for layers and tables
                const allLayers = webMapOrWebScene.allLayers.toArray();
                const tables = webMapOrWebScene.tables ? webMapOrWebScene.tables.toArray() : [];
                const layersAndTables = allLayers.concat(tables);
                layersAndTables.forEach(layer => {
                    const sourceUrl = jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getUrlByLayer(layer);
                    if (!sourceUrl) {
                        return;
                    }
                    const proxyUrl = jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getDataSourceProxyUrl(sourceUrl);
                    if (proxyUrl) {
                        layer.url = proxyUrl;
                        // The following code is the workaround to fix JS API 4.28 issue. Need to be replaced with request interceptor in next release.
                        const portalItem = layer.portalItem;
                        if (portalItem && portalItem.when) {
                            portalItem.when(() => {
                                // After execute 'layer.url = proxyUrl', layer.url maybe still different with proxyUrl, e.g. proxyUrl is 'xxx/featureserver/0', but the final layer.url is 'xxx/featureserver'.
                                // so we use layer.url here, not proxyUrl.
                                portalItem.url = layer.url;
                                if (portalItem.sourceJSON) {
                                    portalItem.sourceJSON.url = layer.url;
                                }
                            });
                        }
                    }
                });
            }
            return webMapOrWebScene;
        });
    }
    getDefaultWebMap() {
        const defaultExtent = this.props.defaultMapInfo && this.props.defaultMapInfo.defaultExtent;
        const tempViewPoint = new this.Viewpoint({
            targetGeometry: new this.Extent({
                xmin: defaultExtent && defaultExtent.xmin,
                ymin: defaultExtent && defaultExtent.ymin,
                xmax: defaultExtent && defaultExtent.xmax,
                ymax: defaultExtent && defaultExtent.ymax,
                spatialReference: { wkid: defaultExtent.spatialReference.wkid }
            })
        });
        const defaultWebmap = new this.WebMap({
            portalItem: {
                id: this.props.defaultMapInfo.defaultMapId,
                portal: {
                    url: this.props.baseWidgetProps.portalUrl
                }
            },
            initialViewProperties: new this.InitialViewProperties({
                spatialReference: defaultExtent && defaultExtent.spatialReference,
                viewpoint: tempViewPoint
            })
        });
        return defaultWebmap;
    }
    getMapViewOptionToCreateMapView(dataSourceInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let mapViewOption;
            const initialMapState = this.props.baseWidgetProps.config.initialMapState;
            if (this.props.isDefaultMap) {
                const defaultMap = this.getDefaultWebMap();
                mapViewOption = {
                    map: defaultMap,
                    container: this.mapContainer,
                    viewpoint: this.getInitViewPointForDefaultWebMap()
                };
            }
            else {
                const webMap = yield this.createWebMapOrWebSceneByDataSource(dataSourceInfo);
                if (initialMapState) {
                    mapViewOption = {
                        map: webMap,
                        container: this.mapContainer,
                        viewpoint: initialMapState && this.generateViewPointFromInitialMapState(initialMapState)
                    };
                }
                else {
                    mapViewOption = {
                        map: webMap,
                        container: this.mapContainer
                    };
                }
                const highlightColor = this.props.baseWidgetProps.config.selectionHighlightColor || DEFAULT_HIGHLIGHT_COLOR;
                const highlightHaloColor = this.props.baseWidgetProps.config.selectionHighlightHaloColor || DEFAULT_HIGHLIGHT_HALO_COLOR;
                mapViewOption.highlightOptions = {
                    color: new this.Color(highlightColor),
                    haloColor: new this.Color(highlightHaloColor)
                };
            }
            mapViewOption.popup = {
                defaultPopupTemplateEnabled: true
            };
            mapViewOption.constraints = {
                // snapToZoom: true means integer zoom, false means float zoom
                // We need to set the initial value to true for backward compatibility and keep the same behavior with MapViewer
                // After map inited, we will set snapToZoom to false to get the best synchronization between two map widgets
                snapToZoom: true
            };
            // Set timeZone to 'system' for compatibility.
            mapViewOption.timeZone = 'system';
            if (!window.jimuConfig.isInBuilder) {
                if (this.props.baseWidgetProps.queryObject[this.props.baseWidgetProps.id]) {
                    const extentStr = this.props.baseWidgetProps.queryObject[this.props.baseWidgetProps.id].substr('extent='.length);
                    let extent;
                    try {
                        extent = new this.Extent(JSON.parse(extentStr));
                    }
                    catch (err) {
                        console.error('Bad extent URL parameter.');
                    }
                    if (extent) {
                        mapViewOption.extent = extent;
                    }
                }
            }
            return mapViewOption;
        });
    }
    getSceneViewOptionToCreateSceneView(dataSourceInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            const webScene = yield this.createWebMapOrWebSceneByDataSource(dataSourceInfo);
            const mapViewOption = {
                map: webScene,
                container: this.mapContainer,
                popup: {
                    defaultPopupTemplateEnabled: true
                }
            };
            const widgetConfig = this.props.baseWidgetProps.config;
            const initialMapState = widgetConfig.initialMapState;
            if (initialMapState) {
                mapViewOption.viewpoint = initialMapState && this.generateViewPointFromInitialMapState(initialMapState);
            }
            const highlightColor = widgetConfig.selectionHighlightColor || DEFAULT_HIGHLIGHT_COLOR;
            const highlightHaloColor = widgetConfig.selectionHighlightHaloColor || DEFAULT_HIGHLIGHT_HALO_COLOR;
            mapViewOption.highlightOptions = {
                color: new this.Color(highlightColor),
                haloColor: new this.Color(highlightHaloColor)
            };
            const sceneQualityMode = widgetConfig.sceneQualityMode;
            if (sceneQualityMode && sceneQualityMode !== _config__WEBPACK_IMPORTED_MODULE_1__.SceneQualityMode.auto) {
                mapViewOption.qualityProfile = sceneQualityMode;
            }
            else {
                // use 'low' as default value
                mapViewOption.qualityProfile = _config__WEBPACK_IMPORTED_MODULE_1__.SceneQualityMode.low;
            }
            return mapViewOption;
        });
    }
    bindMapBaseViewEvent(view) {
        if (view) {
            this.releaseMapbaseViewEventHandles(view);
            view.mapBaseViewEventHandles.click = view.on('click', () => {
                this.releaseHighLightHandles(view);
            });
        }
    }
    isReadyToCreateJimuMapView() {
        if (this.view) {
            if (this.props.isDefaultMap) {
                // Don't need data source if use default map.
                return true;
            }
            else {
                return this.mapDs && this.mapDs.id === this.props.dataSourceId;
            }
        }
        return false;
    }
    getJimuMapViewFoView(view) {
        var _a;
        const jimuMapViewId = (_a = view === null || view === void 0 ? void 0 : view.dataSourceInfo) === null || _a === void 0 ? void 0 : _a.jimuMapViewId;
        if (jimuMapViewId) {
            const jimuMapView = jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().getJimuMapViewById(jimuMapViewId);
            return jimuMapView;
        }
        return null;
    }
    createJimuMapView() {
        if (!this.isReadyToCreateJimuMapView()) {
            return;
        }
        const view = this.view;
        // If dataSourceId is null, make sure it converts to empty string.
        const dataSourceId = this.props.dataSourceId || '';
        const useUrlHashLayersVisibility = this.props.baseWidgetProps.isRunAppMode;
        jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().createJimuMapView({
            mapWidgetId: this.props.baseWidgetProps.id,
            dataSourceId,
            view,
            isEnablePopup: this.props.baseWidgetProps.config && !this.props.baseWidgetProps.config.disablePopUp,
            mapViewManager: jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance(),
            useUrlHashLayersVisibility
        });
        view.when(() => {
            const jimuMapViewId = view.dataSourceInfo.jimuMapViewId;
            const jimuMapView = jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().getJimuMapViewById(jimuMapViewId);
            if (jimuMapView) {
                if (jimuMapView.view) {
                    jimuMapView.whenJimuMapViewLoaded().then(() => {
                        if (!jimuMapView.view) {
                            jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().destroyJimuMapView(jimuMapViewId);
                            return;
                        }
                        if (this.isViewExpected(view)) {
                            if (this.props.onJimuMapViewCreated) {
                                this.props.onJimuMapViewCreated(jimuMapView);
                            }
                        }
                    });
                }
                else {
                    jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().destroyJimuMapView(jimuMapViewId);
                }
            }
        });
    }
    destroyCurrentMapbaseView() {
        if (this.view) {
            this.destroyMapbaseView(this.view);
        }
        // Note, don't set this.mapDs to null here.
        // Consider this case:
        // We create a new Mapbase instance, onDataSourceCreated callback is quickly, then we get this.mapDs.
        // Then componentDidMount is invoked for some reason (e.g. this.isBasicModulesLoaded changed from false to true),
        // and we need to call this method to destroy this.view.
        // So, if we set this.mapDs to null, we will never get this.mapDs,
        // and this.isReadyToCreateJimuMapView() always return false, then we can't create jimu map view.
        this.view = null;
    }
    destroyMapbaseView(view) {
        if (view) {
            // release handles
            if (view.watchInteractingHandle) {
                view.watchInteractingHandle.remove();
                view.watchInteractingHandle = null;
            }
            if (view.extentWatchHandle) {
                view.extentWatchHandle.remove();
                view.extentWatchHandle = null;
            }
            if (view.fatalErrorWatchHandle) {
                view.fatalErrorWatchHandle.remove();
                view.fatalErrorWatchHandle = null;
            }
            if (view.stationaryTimerId) {
                clearTimeout(view.stationaryTimerId);
                view.stationaryTimerId = null;
            }
            this.releaseHighLightHandles(view);
            this.releaseMapbaseViewEventHandles(view);
        }
        const jimuMapViewId = view.dataSourceInfo.jimuMapViewId;
        if (jimuMapViewId) {
            jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().destroyJimuMapView(jimuMapViewId);
        }
        if (!view.destroyed) {
            view.destroy();
        }
    }
    releaseHighLightHandles(view) {
        if (view.highLightHandles) {
            const keys = Object.keys(view.highLightHandles);
            for (const key of keys) {
                view.highLightHandles[key].remove();
            }
        }
        view.highLightHandles = {};
    }
    releaseMapbaseViewEventHandles(view) {
        if (view.mapBaseViewEventHandles) {
            const keys = Object.keys(view.mapBaseViewEventHandles);
            for (const key of keys) {
                view.mapBaseViewEventHandles[key].remove();
            }
        }
        view.mapBaseViewEventHandles = {};
    }
    getRestoreDataFromMS() {
        const basicKey = this.getRestoreDataKey();
        const restoreData = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().getStateValue([this.props.baseWidgetProps.id, 'restoreData', basicKey]);
        return restoreData;
    }
    updateRestoreDataToMS(restoreData) {
        const basicKey = this.getRestoreDataKey();
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.props.baseWidgetProps.id, `restoreData.${basicKey}`, restoreData);
    }
    getRestoreDataKey() {
        return `${this.props.baseWidgetProps.id}-restoreData-${this.props.dataSourceId}`;
    }
    /**
     * This method is called when user clicks the map thubnail in map setting page and change the config.initialMapDataSourceID.
     * @param useAmination
     */
    goHome(useAmination) {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.getDsJsonFromDsId(this.props.dataSourceId)) {
                return;
            }
            const widgets = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.widgets;
            if (this.view && widgets[this.props.baseWidgetProps.id]) {
                const initViewPoint = this.getMapBaseInitViewPoint();
                if (initViewPoint) {
                    // TODO: maybe need to set view.constraints.snapToZoom to true before call view.goTo() and reset it to false after view.goTo() is done.
                    return this.view.goTo(initViewPoint, {
                        animate: useAmination
                    });
                }
            }
        });
    }
    getMapBaseInitViewPoint() {
        var _a, _b;
        if (this.props.isDefaultMap) {
            return this.getInitViewPointForDefaultWebMap();
        }
        else {
            const initialMapState = this.props.baseWidgetProps.config.initialMapState;
            if (initialMapState) {
                return this.generateViewPointFromInitialMapState(initialMapState);
            }
            else {
                if (this.view) {
                    const map = this.view.map;
                    return (_b = (_a = map === null || map === void 0 ? void 0 : map.initialViewProperties) === null || _a === void 0 ? void 0 : _a.viewpoint) === null || _b === void 0 ? void 0 : _b.clone();
                }
            }
        }
    }
    formatMessage(id) {
        return this.props.baseWidgetProps.intl.formatMessage({ id: id, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages[id] });
    }
    handleDisableWheel() {
        this.widgetContainer.style.pointerEvents = 'none';
        setTimeout(() => {
            this.widgetContainer.style.pointerEvents = 'auto';
        }, 50);
    }
    getMapSwitchForErrorMap() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__.MultiSourceMapContext.Consumer, null, ({ isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap }) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mapswitch-container', style: {
                display: isShowMapSwitchBtn ? 'block' : 'none',
                marginBottom: this.props.widthBreakpoint === 'xsmall' ? 10 : 0
            } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onClick: (e) => { e.preventDefault(); switchMap(); }, className: 'w-100 h-100 esri-widget--button' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Icon, { icon: Exchange, width: 16, height: 16, className: 'mapswitch-icon' }))))));
    }
    /**
     * handle message/action.
     */
    handleAction(mutableStateProps, mapBaseView, jimuMapView) {
        if (!mapBaseView || mapBaseView.destroyed) {
            return;
        }
        // consume mutableStateProps.zoomToFeatureActionValue
        this.handleActionForZoomToFeatureActionValue(mutableStateProps, mapBaseView);
        // consume mutableStateProps.panToActionValue
        this.handleActionForPanToActionValue(mutableStateProps, mapBaseView);
        // consume mutableStateProps.newFeatureSetActionValue
        this.handleActionForNewFeatureSetActionValue(mutableStateProps, mapBaseView);
        // consume mutableStateProps.changedFeatureSetActionValue
        this.handleActionForChangedFeatureSetActionValue(mutableStateProps, mapBaseView);
        // consume mutableStateProps.selectFeatureActionValue
        this.handleActionForSelectFeatureActionValue(mutableStateProps, mapBaseView);
        // consume flashActionValue and filterActionValue
        this.handleActionForFlashActionValueAndFilterActionValue(mutableStateProps, mapBaseView);
        // handle show data on map action
        this.handleActionForShowOnMapDatas(mutableStateProps, jimuMapView);
        // handle add data to map action
        this.handleActionForAddToMapDatas(mutableStateProps, jimuMapView);
    }
    getExtentChangeRelatedWidgetIdsOfView(view) {
        let result = [];
        if (view) {
            const relatedWidgetIds = view.extentChangeRelatedWidgetIds || [];
            // We need to clone the relatedWidgetIds.
            result = relatedWidgetIds.slice();
        }
        return result;
    }
    setExtentChangeRelatedWidgetIdsForView(view, _relatedWidgetIds) {
        if (view) {
            const relatedWidgetIds = _relatedWidgetIds || [];
            // We need to clone the relatedWidgetIds.
            view.extentChangeRelatedWidgetIds = relatedWidgetIds.slice();
        }
    }
    tryFatalErrorRecovery(view) {
        if (view) {
            view.tryFatalErrorRecovery();
        }
    }
    handleActionForZoomToFeatureActionValue(mutableStateProps, mapBaseView) {
        if (!mutableStateProps.zoomToFeatureActionValue) {
            return;
        }
        const receiveMessageTime = Date.now();
        const zoomToFeatureActionValue = mutableStateProps.zoomToFeatureActionValue;
        const relatedWidgetIds = mutableStateProps.zoomToFeatureActionValue.relatedWidgets || [];
        if (relatedWidgetIds && relatedWidgetIds.includes(this.props.baseWidgetProps.id)) {
            // avoid endless loop
            this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'zoomToFeatureActionValue', null);
        }
        else {
            const zoomToFeatureInternalValue = zoomToFeatureActionValue.value;
            if (zoomToFeatureInternalValue.type === 'zoom-to-extent') {
                // ZoomToExtentInternalValue
                const nowTime = Date.now();
                mapBaseView.lastZoomToExtentTime = nowTime;
                // map widget1 extent chagnes and map widget2 needs to sync the extent by message action.
                // Finally, it calls view.goTo(extent)
                // Consider this case:
                // On app load:
                // 1. Both map widget1 and map widget2 set zoom-to action for each other.
                // 2. The initial extent of map widget1 is extent1 and the initial extent of map widget2 is extent2.
                // 3. map widget1 first publish extent-change message after the view is ready.
                // 4. Then map widget2 publish extent-change message.
                // 5. Then map widget2 receive message from map widget1 and call handleAction.
                // 6. Then map widget1 receive message from map widget2 and call handleAction.
                // At last, the extent of map widget1 is extent2 and the extent of map widget2 is extent1. This is not the expected result.
                // To avoid the above case, we need to stop the step6 because map widget1 first publish message.
                let isAboveCase = false;
                if (mapBaseView.firstPublishExtentChangeTime) {
                    if ((nowTime - mapBaseView.firstPublishExtentChangeTime) <= 2000) {
                        if (mapBaseView.firstPublishExtentChangeTime <= zoomToFeatureInternalValue.publishTime) {
                            if (!zoomToFeatureInternalValue.interacive) {
                                // #14391, if extentMessage.interacive is true, means the extent comes from a interactiving map and needs to sync viewpoint with the interactiving map
                                if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isTwoWidgetsMutuallyExtentChange)(this.props.baseWidgetProps.id, zoomToFeatureInternalValue.publishWidgetId)) {
                                    isAboveCase = true;
                                }
                            }
                        }
                    }
                }
                // If mapBaseView is the last interactive view, it means mapBaseView is the extent-change source, we should ignore the zoom-to-extent message.
                if (!isAboveCase && mapBaseView !== MapBase.lastInteraciveView) {
                    const viewpoint = zoomToFeatureInternalValue.viewpoint;
                    const extent = zoomToFeatureInternalValue.extent;
                    const stationary = zoomToFeatureInternalValue.stationary;
                    this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                    const viewSR = mapBaseView.spatialReference;
                    // viewpoint has high priority than exent, because it contains more information
                    if (viewpoint) {
                        // update view by viewpoint
                        if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isNeedProjectViewpoint)(viewpoint, viewSR)) {
                            if (stationary) {
                                // only project the viewpoint when map is static
                                (0,_utils__WEBPACK_IMPORTED_MODULE_4__.projectViewpoint)(viewpoint, viewSR).then((projectedViewpoint) => {
                                    // Consider this case(#16423):
                                    // 1. handleActionForZoomToFeatureActionValue receive message at time1, the message viewpoint is viewpoint1
                                    // 2. the viewpoint needs to be project, then send http request to project the viewpoint1, this async step maybe take long time
                                    // 3. then JimuMapView needs to update viewpoint to viewpoint2 by url data_id (sync step) in JimuMapView.moveFeatureToCenter() at time2
                                    // 4. then the async step2 is done at time3, and udpate viewpoint by the projected viewpoint1, finally the viewpoint is the projected viewpoint1
                                    // The step4 is wrong, because viewpoint2 of step3 is the new one, and the projected viewpoint1 is stale.
                                    // To avoid this case, we should check projectedViewpoint is fresh or stale.
                                    const isProjectedViewpointStale = mapBaseView.receiveMessageTimeOfLastViewUpdate && mapBaseView.receiveMessageTimeOfLastViewUpdate > receiveMessageTime;
                                    if (!isProjectedViewpointStale) {
                                        mapBaseView.viewpoint = projectedViewpoint;
                                    }
                                });
                            }
                        }
                        else {
                            mapBaseView.viewpoint = viewpoint;
                        }
                    }
                    else {
                        // TODO: need to remove the following extent logic
                        // update view by extent
                        if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isNeedProjectSpatialReference)(extent.spatialReference, viewSR)) {
                            if (stationary) {
                                // only project the extent when map is static
                                (0,_utils__WEBPACK_IMPORTED_MODULE_4__.projectGeometries)([extent], viewSR).then((projectedGeometries) => {
                                    const projectedExtent = projectedGeometries[0];
                                    mapBaseView.goTo(projectedExtent);
                                });
                            }
                        }
                        else {
                            mapBaseView.goTo(extent, { animate: false });
                        }
                    }
                }
            }
            else if (zoomToFeatureInternalValue.type === 'zoom-to-query-params') {
                // ZoomToQueryParamsInternalValue
                this.queryExtentFromQueryParams(mapBaseView, zoomToFeatureInternalValue.dataSourceIds, zoomToFeatureInternalValue.useDataSources).then((result) => {
                    let target;
                    if (result.count === 0) {
                        return;
                    }
                    else if (result.count === 1 && (result === null || result === void 0 ? void 0 : result.singlePointGraphic)) {
                        target = {
                            graphics: [result === null || result === void 0 ? void 0 : result.singlePointGraphic],
                            layer: result === null || result === void 0 ? void 0 : result.layer
                        };
                    }
                    else {
                        target = result === null || result === void 0 ? void 0 : result.extent;
                    }
                    this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                    // Because of 'zoomToUtils' does not support 'viewpoint', temporary code for using default viewpoint of sceneView.
                    if (result.useDefaultExtentOfCurrentView) {
                        mapBaseView.goTo(result.viewpoint);
                    }
                    else {
                        jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.zoomTo(mapBaseView, target, zoomToFeatureInternalValue.zoomToOption);
                    }
                });
            }
            else if (zoomToFeatureInternalValue.type === 'zoom-to-array-graphics') {
                // ZoomToArrayGraphicsInternalValue
                this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.zoomTo(mapBaseView, zoomToFeatureInternalValue.arrayFeatures, zoomToFeatureInternalValue.zoomToOption);
            }
            else if (zoomToFeatureInternalValue.type === 'zoom-to-layers') {
                // ZoomToLayersInternalValue
                const dataSourceIds = zoomToFeatureInternalValue.dataSourceIds;
                (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getLayersFromDataSourceIds)(dataSourceIds).then(layers => {
                    this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                    jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.zoomTo(mapBaseView, layers, zoomToFeatureInternalValue.zoomToOption);
                });
            }
            else {
                // zoom-to-graphics
                const dataSource = this.dsManager.getDataSource(zoomToFeatureInternalValue.dataSourceId);
                let layerPromise;
                if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.layer) {
                    layerPromise = Promise.resolve(dataSource.layer);
                }
                else if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.createJSAPILayerByDataSource) {
                    layerPromise = dataSource.createJSAPILayerByDataSource();
                }
                else {
                    layerPromise = Promise.resolve(null);
                }
                layerPromise.then(layer => {
                    const originalGraphics = zoomToFeatureInternalValue.features || [];
                    (0,_utils__WEBPACK_IMPORTED_MODULE_4__.processZoomToFeatures)(mapBaseView, layer, originalGraphics).then(handledGraphics => {
                        let zoomToTarget = null;
                        if (layer) {
                            zoomToTarget = {
                                layer,
                                graphics: handledGraphics
                            };
                        }
                        else {
                            zoomToTarget = handledGraphics;
                        }
                        if (!zoomToFeatureInternalValue.zoomToOption) {
                            zoomToFeatureInternalValue.zoomToOption = {};
                        }
                        this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                        zoomToFeatureInternalValue.zoomToOption.queryParams = ((dataSource === null || dataSource === void 0 ? void 0 : dataSource.getCurrentQueryParams) && dataSource.getCurrentQueryParams()) || '';
                        jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.zoomTo(mapBaseView, zoomToTarget, zoomToFeatureInternalValue.zoomToOption);
                    });
                });
            }
            this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'zoomToFeatureActionValue', null);
        }
    }
    handleActionForPanToActionValue(mutableStateProps, mapBaseView) {
        var _a;
        if (!mutableStateProps.panToActionValue) {
            return;
        }
        const relatedWidgetIds = mutableStateProps.panToActionValue.relatedWidgets || [];
        const panToType = (_a = mutableStateProps.panToActionValue.value) === null || _a === void 0 ? void 0 : _a.type;
        if (relatedWidgetIds && relatedWidgetIds.includes(this.props.baseWidgetProps.id)) {
            // avoid endless loop
            this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'panToActionValue', null);
        }
        else if (panToType === 'pan-to-query-params') {
            const panToValue = mutableStateProps.panToActionValue.value;
            this.queryExtentFromQueryParams(mapBaseView, panToValue.dataSourceIds, panToValue.useDataSources).then((result) => {
                var _a, _b, _c;
                // Because of 'panToGeometry' method does not support 'viewpoint', temporary code for using default viewpoint of sceneView.
                if (result.useDefaultExtentOfCurrentView) {
                    const targetGeometry = ((_b = (_a = result === null || result === void 0 ? void 0 : result.viewpoint) === null || _a === void 0 ? void 0 : _a.camera) === null || _b === void 0 ? void 0 : _b.position) || ((_c = result === null || result === void 0 ? void 0 : result.viewpoint) === null || _c === void 0 ? void 0 : _c.targetGeometry);
                    this.panToGeometry([targetGeometry], mapBaseView, relatedWidgetIds);
                }
                else {
                    this.panToGeometry([result === null || result === void 0 ? void 0 : result.extent], mapBaseView, relatedWidgetIds);
                }
            });
        }
        else if (panToType === 'pan-to-layer') {
            const panToValue = mutableStateProps.panToActionValue.value;
            const dataSource = this.dsManager.getDataSource(panToValue.dataSourceId);
            let layerPromise;
            if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.layer) {
                layerPromise = Promise.resolve(dataSource.layer);
            }
            else if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.createJSAPILayerByDataSource) {
                layerPromise = dataSource.createJSAPILayerByDataSource();
            }
            else {
                layerPromise = Promise.resolve(null);
            }
            layerPromise.then(layer => {
                let queryParams = null;
                if (dataSource) {
                    if (dataSource.getCurrentQueryParams) {
                        queryParams = dataSource.getCurrentQueryParams();
                    }
                }
                jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.layerExtent(mapBaseView, layer, queryParams).then(layerExtent => {
                    if (layerExtent) {
                        this.panToGeometry([layerExtent], mapBaseView, []);
                    }
                });
            });
        }
        else if (panToType === 'pan-to-layers') {
            const panToValue = mutableStateProps.panToActionValue.value;
            const dataSourceIds = panToValue.dataSourceIds;
            (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getLayersFromDataSourceIds)(dataSourceIds).then(layers => {
                const extentPromises = [];
                layers.forEach(layer => {
                    if (layer) {
                        extentPromises.push(jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.zoomToUtils.layerExtent(mapBaseView, layer));
                    }
                });
                let fullExtent = null;
                return Promise.all(extentPromises).then(extents => {
                    extents.forEach(extent => {
                        if (extent) {
                            fullExtent = fullExtent ? fullExtent.union(extent) : extent;
                        }
                    });
                    if (fullExtent) {
                        this.panToGeometry([fullExtent], mapBaseView, []);
                    }
                });
            });
        }
        else if (panToType === 'pan-to-geometries') {
            const panToValue = mutableStateProps.panToActionValue.value;
            this.panToGeometry(panToValue.geometries, mapBaseView, relatedWidgetIds);
        }
        else if (panToType === 'pan-to-extent') {
            // map widget1 extent changes and map widget2 needs to sync the extent by message action.
            // Finally, it calls view.goTo(extent.center).
            // Consider this case:
            // 1. Both map widget1 and map widget2 set pan-to action for each other.
            // 2. The initial extent of map widget1 is extent1 and the initial extent of map widget2 is extent2.
            // 3. map widget1 first publish extent-change message after the view is ready.
            // 4. Then map widget2 publish extent-change message.
            // 5. Then map widget2 receive message from map widget1 and call handleAction.
            // 6. Then map widget1 receive message from map widget2 and call handleAction.
            // At last, the extent of map widget1 is extent2 and the extent of map widget2 is extent1. This is not the expected result.
            // To avoid the above case, we need to stop the step6 because map widget1 first publish message.
            let isAboveCase = false;
            const nowTime = Date.now();
            if (mapBaseView.firstPublishExtentChangeTime) {
                if ((nowTime - mapBaseView.firstPublishExtentChangeTime) <= 2000) {
                    if (mapBaseView.firstPublishExtentChangeTime <= mutableStateProps.panToActionValue.value.publishTime) {
                        if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isTwoWidgetsMutuallyExtentChange)(this.props.baseWidgetProps.id, mutableStateProps.panToActionValue.value.publishWidgetId)) {
                            isAboveCase = true;
                        }
                    }
                }
            }
            // Consider this case:
            // 1. We have 4 map widgets. Here are the actions.
            // 2. Widget1 -> zoom to -> Widget2 -> zoom to -> Widget4
            // 3. Widget1 -> zoom to -> Widget3 -> pan to -> Widget4
            // 4. We move the map of widget1, finally widget4 will receive zoomTo and panTo actions serially, like zoomTo, panTo, zoomTo, panTo, ...
            // 5. Step4 will result in widget4's map view jumping.
            // 6. To avoid this case, we need to stop executing panTo action if zoomTo action is executed recently.
            let isPanZoomConflictCase = false;
            if (mapBaseView.lastZoomToExtentTime) {
                // By test, the biggest delta time is about 200ms in most cases, but it is safe to use a bigger one.
                if ((nowTime - mapBaseView.lastZoomToExtentTime) <= 500) {
                    isPanZoomConflictCase = true;
                }
            }
            // If mapBaseView is the last interactive view, it means mapBaseView is the extent-change source, we should ignore the pan-to-extent message.
            if (!isAboveCase && !isPanZoomConflictCase && mapBaseView !== MapBase.lastInteraciveView) {
                this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
                const panToValue = mutableStateProps.panToActionValue.value;
                const extent = panToValue.geometries[0];
                const extentCenter = extent.center;
                const stationary = panToValue.stationary;
                const viewSR = mapBaseView.spatialReference;
                if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isNeedProjectSpatialReference)(extentCenter.spatialReference, viewSR)) {
                    if (stationary) {
                        // only project the extent when map is static
                        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.projectGeometries)([extentCenter], viewSR).then((projectedGeometries) => {
                            const projectedCenter = projectedGeometries[0];
                            mapBaseView.goTo(projectedCenter);
                        });
                    }
                }
                else {
                    // mapBaseView.goTo(extentCenter, { animate: false })
                    mapBaseView.center = extentCenter;
                }
            }
        }
        this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'panToActionValue', null);
    }
    panToGeometry(originalGeometries, mapBaseView, relatedWidgetIds) {
        (0,_utils__WEBPACK_IMPORTED_MODULE_4__.projectGeometries)(originalGeometries, mapBaseView.spatialReference).then((projectedGeometries) => {
            this.setExtentChangeRelatedWidgetIdsForView(mapBaseView, relatedWidgetIds);
            (0,_utils__WEBPACK_IMPORTED_MODULE_4__.mapPanto)(mapBaseView, projectedGeometries);
        });
    }
    handleActionForNewFeatureSetActionValue(mutableStateProps, mapBaseView) {
        if (mutableStateProps.newFeatureSetActionValue && !mutableStateProps.newFeatureSetActionValue.promise) {
            const createNewFeaturelayerPromise = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.createNewFeaturelayer)(mapBaseView, mutableStateProps.newFeatureSetActionValue.value);
            if (createNewFeaturelayerPromise) {
                this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'newFeatureSetActionValue.promise', createNewFeaturelayerPromise);
                createNewFeaturelayerPromise.then(() => {
                    this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'newFeatureSetActionValue', null);
                });
            }
            else {
                this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'newFeatureSetActionValue', null);
            }
        }
    }
    handleActionForChangedFeatureSetActionValue(mutableStateProps, mapBaseView) {
        if (mutableStateProps.changedFeatureSetActionValue) {
            (0,_utils__WEBPACK_IMPORTED_MODULE_4__.updateFeaturelayer)(mapBaseView, mutableStateProps.changedFeatureSetActionValue);
            this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'changedFeatureSetActionValue', null);
        }
    }
    handleActionForSelectFeatureActionValue(mutableStateProps, mapBaseView) {
        if (mutableStateProps.selectFeatureActionValue) {
            mapBaseView.closePopup();
            this.releaseHighLightHandles(mapBaseView);
            const selectFeatureHandle = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.selectFeature)(mapBaseView, mutableStateProps.selectFeatureActionValue);
            if (selectFeatureHandle) {
                mapBaseView.highLightHandles[selectFeatureHandle.layerId] = selectFeatureHandle.handle;
            }
            setTimeout(() => {
                this.props.onMutableStatePropsChanged(this.props.dataSourceId, 'selectFeatureActionValue', null);
            }, 500);
        }
    }
    handleActionForFlashActionValueAndFilterActionValue(mutableStateProps, mapBaseView) {
        const mutableStatePropsKeys = Object.keys(mutableStateProps);
        // WHY: why use array.some() here ? the callback always return false
        mutableStatePropsKeys.some(actionKey => {
            var _a;
            const jimuMapViewId = mapBaseView.dataSourceInfo.jimuMapViewId;
            const tempJimuMapView = jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.MapViewManager.getInstance().getJimuMapViewById(jimuMapViewId);
            // handle flash action
            if (actionKey.indexOf('flashActionValue-') === 0 && mutableStateProps[actionKey]) {
                mutableStateProps[actionKey].querySQL && (0,_utils__WEBPACK_IMPORTED_MODULE_4__.flashFeaturesByQuery)(tempJimuMapView, mutableStateProps[actionKey].layerDataSourceId, mutableStateProps[actionKey].querySQL);
                this.props.onMutableStatePropsChanged(this.props.dataSourceId, actionKey, null);
            }
            // handle filter action
            if (actionKey.indexOf('filterActionValue-') === 0 && mutableStateProps[actionKey]) {
                ((_a = mutableStateProps[actionKey].querySQL) === null || _a === void 0 ? void 0 : _a.length) >= 0 && (0,_utils__WEBPACK_IMPORTED_MODULE_4__.filterFeaturesByQuery)(tempJimuMapView, mutableStateProps[actionKey].layerDataSourceId, mutableStateProps[actionKey].querySQL);
                this.props.onMutableStatePropsChanged(this.props.dataSourceId, actionKey, null);
            }
            return false;
        });
    }
    handleActionForShowOnMapDatas(mutableStateProps, jimuMapView) {
        if (mutableStateProps.showOnMapDatas) {
            jimuMapView.drawDataOnMap(mutableStateProps.showOnMapDatas);
        }
    }
    handleActionForAddToMapDatas(mutableStateProps, jimuMapView) {
        if (mutableStateProps.addToMapDatas) {
            jimuMapView.addOrRemoveDataOnMap(mutableStateProps.addToMapDatas);
        }
    }
}
// Record the JimuMapView/Mapbase inited count for the specific jimuMapViewId (mapWidgetId + dataSourceId) at runtime, the key is jimuMapViewId, the value is the JimuMapView/Mapbase inited count.
// We use runtimeInitedJimuMapViews to identify whether the JimuMapView/Mapbase is initialized for the first time,
// and replace config.initialMapState with map_state in the url hash during the first initialization.
MapBase.runtimeInitedJimuMapViews = {};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapBase);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts":
/*!***********************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MultiSourceMapContext: () => (/* binding */ MultiSourceMapContext)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

const MultiSourceMapContext = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createContext({
    mapWidgetId: null,
    mapWidgetHeight: null,
    isShowMapSwitchBtn: false,
    isFullScreen: false,
    dataSourceIds: [],
    activeDataSourceId: null,
    switchMap: () => { },
    fullScreenMap: () => { },
    initialMapState: null,
    mobilePanelContainer: null,
    onMobilePanelContentChange: (MobilePanelContent) => { },
    theme: null
});


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap.tsx":
/*!****************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap.tsx ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _mapbase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mapbase */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/mapbase.tsx");
/* harmony import */ var _multisourcemap_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _layout_map_fixed_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../layout/map-fixed-layout */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/map-fixed-layout.tsx");
/* harmony import */ var _layout_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../layout/layout */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/layout.tsx");
/* harmony import */ var _layout_pc_layout_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../layout/pc-layout-json */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/pc-layout-json.ts");
/* harmony import */ var _layout_mobile_layout_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../layout/mobile-layout-json */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/mobile-layout-json.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};









const VisibleStyles = {
    firstMapVisible: [{
            zIndex: 'unset',
            opacity: 1
        }, {
            zIndex: -1,
            opacity: 0
        }],
    secondMapVisible: [{
            zIndex: -1,
            opacity: 0
        }, {
            zIndex: 'unset',
            opacity: 1
        }]
};
class MultiSourceMap extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.mutableStatePropsMap = {};
        this.__unmount = false;
        this.onPageChange = (prePageId, currentPageId) => {
            // close active tool
            if (prePageId && currentPageId && prePageId !== currentPageId) {
                this.setState({
                    activeToolInfo: null
                });
            }
        };
        this.onResize = (width, height) => {
            // close active tool
            this.setState({
                activeToolInfo: null
            });
        };
        this.reInitWidgetInstance = (restoreData) => {
            this.state = restoreData;
            this.isReIniting = true;
        };
        /**
         * This method is called when user clicks the map thubnail in map setting page and change the config.initialMapDataSourceID.
         * @param dataSourceId
         * @param callBack
         */
        this.changeInitialMapDataSourceID = (dataSourceId, callBack) => {
            if (this.props.baseWidgetProps.useDataSources && this.props.baseWidgetProps.useDataSources.length > 1) {
                const firstMapInstance = this.refs.firstMapInstance;
                const secondMapInstance = this.refs.secondMapInstance;
                if (!firstMapInstance || !secondMapInstance) {
                    // Make sure both firstMapInstance and secondMapInstance exist, otherwise we don't need to call this method.
                    if (callBack) {
                        callBack();
                    }
                    return;
                }
                if (!this.state.currentMapIndex) {
                    if (this.state.secondMapDsId && this.state.secondMapDsId === dataSourceId) {
                        this.startChangeInitialMapAnimation(callBack);
                        secondMapInstance.goHome(false);
                    }
                    else {
                        firstMapInstance.goHome(false);
                    }
                }
                else {
                    if (this.state.firstMapDsId && this.state.firstMapDsId === dataSourceId) {
                        this.startChangeInitialMapAnimation(callBack);
                        firstMapInstance.goHome(false);
                    }
                    else {
                        secondMapInstance.goHome(false);
                    }
                }
            }
        };
        this.startChangeInitialMapAnimation = (callBack) => {
            const firstMapInstance = this.refs.firstMapInstance;
            const secondMapInstance = this.refs.secondMapInstance;
            if (!firstMapInstance || !secondMapInstance) {
                // Make sure both firstMapInstance and secondMapInstance exist, otherwise we don't need to call this method.
                if (callBack) {
                    callBack();
                }
                return;
            }
            const tempState = Object.assign({}, this.state);
            if (!this.state.currentMapIndex) {
                // currentMapIndex: 0 -> 1
                // first map visible -> second map visible
                tempState.currentMapIndex = 1;
                tempState.multiMapStyle = VisibleStyles.secondMapVisible;
                const viewPoint = firstMapInstance.getViewPoint();
                if (viewPoint) {
                    secondMapInstance.setViewPoint(viewPoint);
                }
                this.setState(tempState, () => { callBack && callBack(); });
            }
            else {
                // currentMapIndex: 1 -> 0
                // second map visible -> first map visible
                tempState.currentMapIndex = 0;
                tempState.multiMapStyle = VisibleStyles.firstMapVisible;
                const viewPoint = secondMapInstance.getViewPoint();
                if (viewPoint) {
                    firstMapInstance.setViewPoint(viewPoint);
                }
                this.setState(tempState, () => { callBack && callBack(); });
            }
        };
        /**
         * This method is called when user clicks the switch tool at the left bottom of map widget.
         */
        this.switchMap = (ignoreSwitchAnimation = false) => __awaiter(this, void 0, void 0, function* () {
            if (!this.props.baseWidgetProps.useDataSources || this.props.baseWidgetProps.useDataSources.length < 2) {
                yield Promise.resolve();
                return;
            }
            const firstMapInstance = this.refs.firstMapInstance;
            const secondMapInstance = this.refs.secondMapInstance;
            if (!firstMapInstance || !secondMapInstance) {
                // Make sure both firstMapInstance and secondMapInstance exist, otherwise we don't need to call this method.
                return;
            }
            const tempState = Object.assign({}, this.state);
            // By default, we enable switching opacity animation.
            tempState.useAnimation = !ignoreSwitchAnimation;
            if (!this.state.currentMapIndex) {
                // currentMapIndex: 0 -> 1
                // first map visible -> second map visible
                tempState.currentMapIndex = 1;
                tempState.multiMapStyle = VisibleStyles.secondMapVisible;
                const viewPoint = firstMapInstance.getViewPoint();
                if (viewPoint) {
                    secondMapInstance.setViewPoint(viewPoint);
                }
            }
            else {
                // currentMapIndex: 1 -> 0
                // second map visible -> first map visible
                tempState.currentMapIndex = 0;
                tempState.multiMapStyle = VisibleStyles.firstMapVisible;
                const viewPoint = secondMapInstance.getViewPoint();
                if (viewPoint) {
                    firstMapInstance.setViewPoint(viewPoint);
                }
            }
            return new Promise((resolve, reject) => {
                this.setState(tempState, () => {
                    this.confirmJimuMapViewIsActive();
                    setTimeout(() => {
                        this.setState({
                            useAnimation: false
                        }, () => {
                            resolve(null);
                        });
                    }, 500);
                });
            });
        });
        this.handleMutableStatePropsChanged = (dataSourceId, propKey, value) => {
            if (!this.mutableStatePropsMap[propKey]) {
                this.mutableStatePropsMap[propKey] = [dataSourceId];
            }
            else {
                if (!this.mutableStatePropsMap[propKey].includes(dataSourceId)) {
                    this.mutableStatePropsMap[propKey].push(dataSourceId);
                }
            }
            const multiMapDsIds = [];
            const firstMapInstance = this.refs.firstMapInstance;
            const secondMapInstance = this.refs.secondMapInstance;
            if (firstMapInstance && firstMapInstance.getViewType()) {
                multiMapDsIds.push(this.state.firstMapDsId);
            }
            if (secondMapInstance && secondMapInstance.getViewType()) {
                multiMapDsIds.push(this.state.secondMapDsId);
            }
            let isAllMatched = true;
            for (let i = 0; i < multiMapDsIds.length; i++) {
                if (!this.mutableStatePropsMap[propKey].includes(multiMapDsIds[i])) {
                    isAllMatched = false;
                    break;
                }
            }
            if (isAllMatched) {
                delete this.mutableStatePropsMap[propKey];
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.props.baseWidgetProps.id, propKey, value);
            }
        };
        // callback of view.extent change
        this.onMapbaseExtentChanged = (dataSourceId, message) => {
            const currentVisibleDsId = this.getCurrentVisibleDsId();
            if (currentVisibleDsId === dataSourceId) {
                const clonedViewpoint = message.viewpoint.clone();
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(message);
                // sync viewpoint of hidden mapbase
                let hiddenMapBase = null;
                if (this.state.firstMapDsId && this.state.firstMapDsId !== dataSourceId) {
                    hiddenMapBase = this.refs.firstMapInstance;
                }
                else if (this.state.secondMapDsId && this.state.secondMapDsId !== dataSourceId) {
                    hiddenMapBase = this.refs.secondMapInstance;
                }
                if (hiddenMapBase) {
                    hiddenMapBase.setViewPoint(clonedViewpoint);
                }
            }
        };
        this.handleMapLoaded = (dataSourceId, mapLoadStatus) => {
            this.forceUpdate();
        };
        this.handleJimuMapViewCreated = (jimuMapView) => {
            if (this.props.onJimuMapViewCreated) {
                this.props.onJimuMapViewCreated(jimuMapView);
            }
            if (this.__unmount) {
                return;
            }
            this.confirmJimuMapViewIsActive();
        };
        /**
         * Update this.state.currentJimuMapViewId by this.state.multiMapStyle and update JimuMapView.isActive by calling jimuMapView.setIsActive(isActive).
         */
        this.confirmJimuMapViewIsActive = () => {
            if (this.props.isDefaultMap) {
                const jimuMapView = this.getJimuMapViewByDataSourceId(null);
                if (jimuMapView) {
                    this.setActiveJimuMapView(jimuMapView, true);
                }
                return;
            }
            const allDatasourceIds = [];
            this.state.firstMapDsId && allDatasourceIds.push(this.state.firstMapDsId);
            this.state.secondMapDsId && allDatasourceIds.push(this.state.secondMapDsId);
            const currentDataSourceId = this.getCurrentVisibleDsId();
            for (let i = 0; i < allDatasourceIds.length; i++) {
                const jimuMapView = this.getJimuMapViewByDataSourceId(allDatasourceIds[i]);
                if (jimuMapView) {
                    if (allDatasourceIds[i] === currentDataSourceId) {
                        this.setActiveJimuMapView(jimuMapView, true);
                    }
                    else {
                        this.setActiveJimuMapView(jimuMapView, false);
                    }
                }
            }
        };
        this.isShowMapSwitchBtn = () => {
            const firstMapInstance = this.refs.firstMapInstance;
            const secondMapInstance = this.refs.secondMapInstance;
            if (firstMapInstance && secondMapInstance) {
                if (firstMapInstance.getMapLoadStatus() !== _mapbase__WEBPACK_IMPORTED_MODULE_1__.MapLoadStatus.Loading && secondMapInstance.getMapLoadStatus() !== _mapbase__WEBPACK_IMPORTED_MODULE_1__.MapLoadStatus.Loading) {
                    return true;
                }
            }
            else {
                return false;
            }
        };
        this.getCurrentVisibleDsId = () => {
            if (this.state.multiMapStyle[0].opacity === 1) {
                return this.state.firstMapDsId;
            }
            else {
                return this.state.secondMapDsId;
            }
        };
        this.handleViewGroupCreate = (viewGroup) => {
            if (this.props.onViewGroupCreate) {
                this.props.onViewGroupCreate(viewGroup);
            }
        };
        this.handleMobilePanelContentChange = (mobilePanelContent) => {
            this.setState({
                mobilePanelContent: mobilePanelContent
            });
        };
        this.handleActiveToolInfoChange = (activeToolInfo) => {
            this.setState({
                activeToolInfo: activeToolInfo
            });
        };
        this.domRef = jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createRef();
        const mapWidgetId = this.props.baseWidgetProps.id;
        if (typeof MultiSourceMap.runtimeInitedMapWidgets[mapWidgetId] === 'number') {
            // MultiSourceMap is inited multiple times for mapWidgetId
            MultiSourceMap.runtimeInitedMapWidgets[mapWidgetId] += 1;
        }
        else {
            // MultiSourceMap is inited firstly for mapWidgetId
            MultiSourceMap.runtimeInitedMapWidgets[mapWidgetId] = 1;
        }
        const restoreData = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().getStateValue([this.props.baseWidgetProps.id, 'restoreData',
            `${this.props.baseWidgetProps.id}-restoreData-multimap`]);
        if (restoreData) {
            const mobilePanelContainer = document.createElement('div');
            mobilePanelContainer.id = `${this.props.baseWidgetProps.id}-bottom-panel`;
            mobilePanelContainer.className = 'w-100 h-100';
            restoreData.mobilePanelContainer = mobilePanelContainer;
            this.reInitWidgetInstance(restoreData);
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.props.baseWidgetProps.id, `restoreData.${this.props.baseWidgetProps.id}-restoreData-multimap`, null);
        }
        else {
            const mobilePanelContainer = document.createElement('div');
            mobilePanelContainer.id = `${this.props.baseWidgetProps.id}-bottom-panel`;
            mobilePanelContainer.className = 'w-100 h-100';
            // The workflow to show top map and bottom map:
            // 1. this.state.multiMapStyle is set to VisibleStyles.firstMapVisible, this leads to getCurrentVisibleDsId() returning this.state.firstMapDsId.
            // 2. In componentDidMount, this.state.firstMapDsId is set to initialMapDataSourceID.
            // 3. When JimuMapView created, handleJimuMapViewCreated is called, then handleJimuMapViewCreated calls confirmJimuMapViewIsActive.
            // 4. In confirmJimuMapViewIsActive, it calls this.getCurrentVisibleDsId() as currentDataSourceId, currentDataSourceId is this.state.firstMapDsId due to step1.
            //    And because of step2, this.state.firstMapDsId is initialMapDataSourceID, so the currentDataSourceId is initialMapDataSourceID.
            //    Then call JimuMapView.setIsActive(isActive), isActive is true if jimuMapView.dataSourceId equals currentDataSourceId, otherwise isActive is false.
            this.state = {
                // show useDataSources[0] on the top by default
                currentMapIndex: 0,
                multiMapStyle: VisibleStyles.firstMapVisible,
                firstMapDsId: null,
                secondMapDsId: null,
                useAnimation: false,
                useDataSources: null,
                // Note, the initial currentJimuMapViewId is empty, it is not empty after called this.confirmJimuMapViewIsActive() method.
                currentJimuMapViewId: null,
                mobilePanelContent: null,
                mobilePanelContainer: mobilePanelContainer,
                activeToolInfo: null
                // showOnMapDatasKey: null
            };
        }
        this.mutableStatePropsMap = {};
        this.useMapWidgetIds = this.props.baseWidgetProps.id ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([this.props.baseWidgetProps.id]) : (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)([]);
        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.observeStore)(this.onPageChange, ['appRuntimeInfo', 'currentPageId']);
    }
    componentDidMount() {
        if ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().mapWidgetsInfo) {
            if (!(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().mapWidgetsInfo[this.props.baseWidgetProps.id]) {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.MapWidgetInfoAdded(this.props.baseWidgetProps.id, (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)({ mapWidgetId: this.props.baseWidgetProps.id })));
            }
        }
        this.__unmount = false;
        if (this.isReIniting) {
            // this.isReIniting is true means MultiSourceMap is restored.
            return;
        }
        const useDataSources = this.props.baseWidgetProps.useDataSources;
        if (useDataSources) {
            // initialMapDataSourceID maybe config.initialMapDataSourceID or url hash param active_datasource_id
            let initialMapDataSourceID = this.props.baseWidgetProps.config.initialMapDataSourceID;
            // If url hash param active_datasource_id is set and this is the first time MultiSourceMap inited,
            // then we use active_datasource_id override config.initialMapDataSourceID.
            if (this.props.baseWidgetProps.isRunAppMode) {
                const mapWidgetId = this.props.baseWidgetProps.id;
                const firstTimeInited = MultiSourceMap.runtimeInitedMapWidgets[mapWidgetId] === 1;
                if (firstTimeInited) {
                    // MultiSourceMap is inited firstly for mapWidgetId.
                    const runtimeUrlHashParams = this.props.baseWidgetProps.runtimeUrlHashParams;
                    if (runtimeUrlHashParams && runtimeUrlHashParams.active_datasource_id) {
                        const allDataSourceIds = useDataSources.map(item => item.dataSourceId);
                        if (allDataSourceIds.includes(runtimeUrlHashParams.active_datasource_id)) {
                            initialMapDataSourceID = runtimeUrlHashParams.active_datasource_id;
                        }
                    }
                }
            }
            // the following code make sure firstMapDsId points to the above initialMapDataSourceID
            if (!initialMapDataSourceID) {
                this.setState({
                    firstMapDsId: useDataSources[0] && useDataSources[0].dataSourceId,
                    secondMapDsId: useDataSources[1] && useDataSources[1].dataSourceId
                });
            }
            else {
                if (initialMapDataSourceID === (useDataSources[0] && useDataSources[0].dataSourceId)) {
                    this.setState({
                        firstMapDsId: useDataSources[0] && useDataSources[0].dataSourceId,
                        secondMapDsId: useDataSources[1] && useDataSources[1].dataSourceId
                    });
                }
                else if (initialMapDataSourceID === (useDataSources[1] && useDataSources[1].dataSourceId)) {
                    this.setState({
                        firstMapDsId: useDataSources[1] && useDataSources[1].dataSourceId,
                        secondMapDsId: useDataSources[0] && useDataSources[0].dataSourceId
                    });
                }
                else {
                    this.setState({
                        firstMapDsId: useDataSources[0] && useDataSources[0].dataSourceId,
                        secondMapDsId: useDataSources[1] && useDataSources[1].dataSourceId
                    });
                }
            }
        }
    }
    componentWillUnmount() {
        this.__unmount = true;
        const widgets = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.widgets;
        if (widgets[this.props.baseWidgetProps.id] && widgets[this.props.baseWidgetProps.id].useDataSources === this.props.baseWidgetProps.useDataSources) {
            const restoreData = {
                currentMapIndex: this.state.currentMapIndex,
                multiMapStyle: this.state.multiMapStyle,
                firstMapDsId: this.state.firstMapDsId,
                secondMapDsId: this.state.secondMapDsId,
                useAnimation: this.state.useAnimation,
                currentJimuMapViewId: this.state.currentJimuMapViewId
            };
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.props.baseWidgetProps.id, `restoreData.${this.props.baseWidgetProps.id}-restoreData-multimap`, restoreData);
        }
        if (!widgets[this.props.baseWidgetProps.id]) {
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.MapWidgetInfoRemoved(this.props.baseWidgetProps.id));
        }
    }
    static getDerivedStateFromProps(newProps, prevState) {
        if (newProps.baseWidgetProps.useDataSources !== prevState.useDataSources) {
            const newState = MultiSourceMap.getChangedState(prevState.firstMapDsId, prevState.secondMapDsId, newProps.baseWidgetProps.useDataSources);
            return newState;
        }
        else {
            return null;
        }
    }
    componentDidUpdate(prevProps, prevState, snapshot) {
        if (this.props.baseWidgetProps.stateProps && this.props.baseWidgetProps.stateProps.initialMapDataSourceID) {
            // mapWidget.props.stateProps.initialMapDataSourceID is a temporary variable to let map setting and map runtime communicate with each other.
            // If we change the initialMapDataSourceID by clicking ds thumbnail in map setting,
            // then map setting will call builderAppSync.publishChangeWidgetStatePropToApp() to update mapWidget.props.stateProps.initialMapDataSourceID.
            // Once we check mapWidget.props.stateProps.initialMapDataSourceID is not empty in MultiSourceMap, means we changed the initialMapDataSourceID,
            // then we make sure the initialMapbase go to the initial extent.
            // At last, we will reset mapWidget.props.stateProps.initialMapDataSourceID to empty.
            const initialMapDataSourceID = this.props.baseWidgetProps.stateProps.initialMapDataSourceID;
            if (this.state.firstMapDsId === initialMapDataSourceID) {
                const firstMapInstance = this.refs.firstMapInstance;
                if (firstMapInstance) {
                    firstMapInstance.goHome(false);
                }
            }
            if (this.state.secondMapDsId === initialMapDataSourceID) {
                const secondMapInstance = this.refs.secondMapInstance;
                if (secondMapInstance) {
                    secondMapInstance.goHome(false);
                }
            }
            this.props.baseWidgetProps.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetStatePropChange(this.props.baseWidgetProps.id, 'initialMapDataSourceID', null));
        }
        if (this.isReIniting) {
            this.isReIniting = false;
            return;
        }
        if (this.props.baseWidgetProps.config.initialMapDataSourceID !== prevProps.baseWidgetProps.config.initialMapDataSourceID) {
            // User clicks the map thubnail in map setting page and change the config.initialMapDataSourceID.
            this.changeInitialMapDataSourceID(this.props.baseWidgetProps.config.initialMapDataSourceID, this.confirmJimuMapViewIsActive);
        }
        if (this.props.baseWidgetProps.useDataSources !== prevProps.baseWidgetProps.useDataSources) {
            this.confirmJimuMapViewIsActive();
        }
    }
    getJimuMapViewByDataSourceId(dsId) {
        const jimuMapViewId = (0,_utils__WEBPACK_IMPORTED_MODULE_8__.getJimuMapViewId)(this.props.baseWidgetProps.id, dsId);
        const jimuMapView = jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.MapViewManager.getInstance().getJimuMapViewById(jimuMapViewId);
        return jimuMapView;
    }
    setActiveJimuMapView(jimuMapView, isActive) {
        var _a, _b;
        if (isActive) {
            // jimuMapView is active
            jimuMapView.setIsActive(isActive);
            this.setState({
                currentJimuMapViewId: jimuMapView.id
            });
            if (this.props.onActiveJimuMapViewChange) {
                this.props.onActiveJimuMapViewChange(jimuMapView);
            }
            const baseWidgetProps = (_a = this.props) === null || _a === void 0 ? void 0 : _a.baseWidgetProps;
            if (baseWidgetProps) {
                // If current url active_datasource_id is empty, we should treat it as initialMapDataSourceID.
                let urlActiveDsId = ((_b = baseWidgetProps.runtimeUrlHashParams) === null || _b === void 0 ? void 0 : _b.active_datasource_id) || baseWidgetProps.config.initialMapDataSourceID;
                // initialMapDataSourceID only exists when useDataSources.length === 2, so initialMapDataSourceID maybe null.
                if (!urlActiveDsId) {
                    // means runtimeUrlHashParams.active_datasource_id and config.initialMapDataSourceID are null
                    const useDataSources = baseWidgetProps.useDataSources;
                    if (useDataSources && useDataSources.length === 1) {
                        urlActiveDsId = useDataSources[0].dataSourceId;
                    }
                }
                if (!urlActiveDsId) {
                    urlActiveDsId = '';
                }
                const newActiveDsId = jimuMapView.dataSourceId || '';
                if (newActiveDsId !== urlActiveDsId) {
                    (0,_utils__WEBPACK_IMPORTED_MODULE_8__.updateUrlHashParamsForActiveJimuMapView)(jimuMapView);
                }
            }
        }
        else {
            // jimuMapView is not active
            jimuMapView.setIsActive(isActive);
        }
    }
    // handleShowOnMapDataChange = (showOnMapDatasKey: string[]) => {
    //  this.setState({
    //    showOnMapDatasKey: showOnMapDatasKey
    //  })
    // }
    getLayoutConfig() {
        if (this.props.widthBreakpoint === 'xsmall') {
            return _layout_mobile_layout_json__WEBPACK_IMPORTED_MODULE_7__["default"][0];
        }
        else {
            return this.props.baseWidgetProps.config.layoutIndex ? _layout_pc_layout_json__WEBPACK_IMPORTED_MODULE_6__["default"][this.props.baseWidgetProps.config.layoutIndex] : _layout_pc_layout_json__WEBPACK_IMPORTED_MODULE_6__["default"][0];
        }
    }
    render() {
        var _a;
        const mutiSourceMapDom = this.domRef.current;
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_multisourcemap_context__WEBPACK_IMPORTED_MODULE_2__.MultiSourceMapContext.Provider, { value: {
                mapWidgetId: this.props.baseWidgetProps.id,
                mapWidgetHeight: this.props.widgetHeight,
                isShowMapSwitchBtn: this.props.baseWidgetProps.useDataSources && this.props.baseWidgetProps.useDataSources.length > 1 && this.isShowMapSwitchBtn(),
                dataSourceIds: [this.state.firstMapDsId, this.state.secondMapDsId],
                activeDataSourceId: this.getCurrentVisibleDsId(),
                switchMap: this.switchMap,
                fullScreenMap: this.props.fullScreenMap,
                isFullScreen: this.props.isFullScreen,
                mobilePanelContainer: this.state.mobilePanelContainer,
                onMobilePanelContentChange: this.handleMobilePanelContentChange,
                initialMapState: this.props.baseWidgetProps.config && this.props.baseWidgetProps.config.initialMapState,
                theme: this.props.baseWidgetProps.theme
            } },
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { ref: this.domRef, className: 'w-100 h-100 multi-source-map' },
                !this.props.isDefaultMap && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'w-100 h-100 multi-map-container', style: { position: 'relative' } },
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 map1', {
                            'multisourcemap-item-appear': this.state.useAnimation && this.state.multiMapStyle[0].opacity,
                            'multisourcemap-item-disappear': this.state.useAnimation && !(this.state.multiMapStyle[0].opacity),
                            'multisourcemap-item-appear-noanimate': this.state.multiMapStyle[0].opacity,
                            'multisourcemap-item-disappear-noanimate': !(this.state.multiMapStyle[0].opacity)
                        }), style: { position: 'absolute', zIndex: this.state.multiMapStyle[0].zIndex } }, this.state.firstMapDsId && this.props.isMapInVisibleArea && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_mapbase__WEBPACK_IMPORTED_MODULE_1__["default"], { ref: 'firstMapInstance', baseWidgetProps: this.props.baseWidgetProps, onMapLoaded: this.handleMapLoaded, onMutableStatePropsChanged: this.handleMutableStatePropsChanged, onExtentChanged: this.onMapbaseExtentChanged, onJimuMapViewCreated: this.handleJimuMapViewCreated, onActiveToolInfoChange: this.handleActiveToolInfoChange, 
                        // onShowOnMapDataChanged={this.handleShowOnMapDataChange}
                        startLoadModules: this.props.startLoadModules, dataSourceId: this.state.firstMapDsId, widthBreakpoint: this.props.widthBreakpoint, isMapInVisibleArea: this.props.isMapInVisibleArea, multiSourceMapDom: mutiSourceMapDom })),
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 map2', {
                            'multisourcemap-item-appear': this.state.useAnimation && this.state.multiMapStyle[1].opacity,
                            'multisourcemap-item-disappear': this.state.useAnimation && !(this.state.multiMapStyle[1].opacity),
                            'multisourcemap-item-appear-noanimate': this.state.multiMapStyle[1].opacity,
                            'multisourcemap-item-disappear-noanimate': !(this.state.multiMapStyle[1].opacity)
                        }), style: { position: 'absolute', zIndex: this.state.multiMapStyle[1].zIndex } }, this.state.secondMapDsId && this.props.isMapInVisibleArea && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_mapbase__WEBPACK_IMPORTED_MODULE_1__["default"], { ref: 'secondMapInstance', baseWidgetProps: this.props.baseWidgetProps, onMapLoaded: this.handleMapLoaded, onMutableStatePropsChanged: this.handleMutableStatePropsChanged, onExtentChanged: this.onMapbaseExtentChanged, onJimuMapViewCreated: this.handleJimuMapViewCreated, onActiveToolInfoChange: this.handleActiveToolInfoChange, 
                        // onShowOnMapDataChanged={this.handleShowOnMapDataChange}
                        startLoadModules: this.props.startLoadModules, dataSourceId: this.state.secondMapDsId, widthBreakpoint: this.props.widthBreakpoint, isMapInVisibleArea: this.props.isMapInVisibleArea, multiSourceMapDom: mutiSourceMapDom }))),
                this.props.isDefaultMap && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'w-100 h-100 default-map-container', style: { position: 'relative' } },
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 multisourcemap-item-appear-noanimate default-map-mapbase-container'), style: { position: 'absolute', zIndex: 'unset' } }, this.props.isMapInVisibleArea && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_mapbase__WEBPACK_IMPORTED_MODULE_1__["default"], { ref: 'firstMapInstance', isDefaultMap: this.props.isDefaultMap, baseWidgetProps: this.props.baseWidgetProps, onMapLoaded: this.handleMapLoaded, onMutableStatePropsChanged: this.handleMutableStatePropsChanged, dataSourceId: null, onExtentChanged: this.onMapbaseExtentChanged, onJimuMapViewCreated: this.handleJimuMapViewCreated, onActiveToolInfoChange: this.handleActiveToolInfoChange, 
                        // onShowOnMapDataChanged={this.handleShowOnMapDataChange}
                        startLoadModules: this.props.startLoadModules, widthBreakpoint: this.props.widthBreakpoint, isMapInVisibleArea: this.props.isMapInVisibleArea, defaultMapInfo: this.props.defaultMapInfo, multiSourceMapDom: mutiSourceMapDom }))),
                this.state.currentJimuMapViewId && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_layout_map_fixed_layout__WEBPACK_IMPORTED_MODULE_4__["default"], { jimuMapView: jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.MapViewManager.getInstance().getJimuMapViewById(this.state.currentJimuMapViewId), appMode: this.props.baseWidgetProps.appMode, layouts: this.props.baseWidgetProps.layouts, LayoutEntry: this.props.baseWidgetProps.builderSupportModules && this.props.baseWidgetProps.builderSupportModules.LayoutEntry, widgetManifestName: this.props.baseWidgetProps.manifest.name }),
                this.state.currentJimuMapViewId && jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.MapViewManager.getInstance().getJimuMapViewById(this.state.currentJimuMapViewId) &&
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_layout_layout__WEBPACK_IMPORTED_MODULE_5__["default"], { mapWidgetId: this.props.baseWidgetProps.id, isMobile: this.props.widthBreakpoint === 'xsmall', jimuMapView: jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.MapViewManager.getInstance().getJimuMapViewById(this.state.currentJimuMapViewId), appMode: this.props.baseWidgetProps.appMode, layouts: this.props.baseWidgetProps.layouts, intl: this.props.baseWidgetProps.intl, LayoutEntry: this.props.baseWidgetProps.builderSupportModules && this.props.baseWidgetProps.builderSupportModules.LayoutEntry, layoutConfig: this.getLayoutConfig(), toolConfig: this.props.baseWidgetProps.config.toolConfig ? this.props.baseWidgetProps.config.toolConfig : {}, activeToolInfo: this.state.activeToolInfo, onActiveToolInfoChange: this.handleActiveToolInfoChange, theme: this.props.baseWidgetProps.theme, widgetManifestName: this.props.baseWidgetProps.manifest.name, widgetHeight: this.props.widthBreakpoint === 'xsmall' ? null : this.props.widgetHeight, autoControlWidgetId: this.props.autoControlWidgetId }),
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.JimuMapViewComponent, { useMapWidgetId: (_a = this.useMapWidgetIds) === null || _a === void 0 ? void 0 : _a[0], onViewGroupCreate: this.handleViewGroupCreate }),
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, handleWidth: true, onResize: this.onResize }))));
    }
}
// Record the MultiSourceMap inited count for the specific mapWidgetId at runtime, the key is map widget id, the value is the MultiSourceMap inited count.
// We use runtimeInitedMapWidgets to identify whether the MultiSourceMap is initialized for the first time,
// and replace config.initialMapDataSourceID with activeDataSourceId in the url hash during the first initialization.
MultiSourceMap.runtimeInitedMapWidgets = {};
MultiSourceMap.getChangedState = (firstMapDsId, secondMapDsId, useDataSources) => {
    const changedState = {};
    if (useDataSources && useDataSources[0]) {
        const newDataSourceArr = [];
        const repeatDataSourceArr = [];
        for (let i = 0; i < useDataSources.length; i++) {
            if (firstMapDsId !== useDataSources[i].dataSourceId) {
                newDataSourceArr.push(useDataSources[i].dataSourceId);
            }
            else {
                repeatDataSourceArr.push(useDataSources[i].dataSourceId);
            }
        }
        if (repeatDataSourceArr.length > 0) {
            changedState.firstMapDsId = firstMapDsId;
            changedState.secondMapDsId = newDataSourceArr[0];
        }
        else if (repeatDataSourceArr.length === 0) {
            if (newDataSourceArr.includes(secondMapDsId)) {
                newDataSourceArr.splice(newDataSourceArr.indexOf(secondMapDsId), 1);
                changedState.firstMapDsId = newDataSourceArr[0];
                changedState.secondMapDsId = secondMapDsId;
            }
            else {
                changedState.firstMapDsId = newDataSourceArr[0];
                changedState.secondMapDsId = newDataSourceArr[1];
            }
        }
    }
    else {
        changedState.firstMapDsId = null;
        changedState.secondMapDsId = null;
    }
    if (changedState.firstMapDsId !== firstMapDsId) {
        if (changedState.firstMapDsId) {
            changedState.multiMapStyle = VisibleStyles.firstMapVisible;
            changedState.currentMapIndex = 0;
        }
        else if (changedState.secondMapDsId) {
            changedState.multiMapStyle = VisibleStyles.secondMapVisible;
            changedState.currentMapIndex = 1;
        }
        else {
            changedState.multiMapStyle = VisibleStyles.firstMapVisible;
            changedState.currentMapIndex = 0;
        }
    }
    else {
        if (!changedState.secondMapDsId) {
            changedState.multiMapStyle = VisibleStyles.firstMapVisible;
            changedState.currentMapIndex = 0;
        }
        else if (changedState.secondMapDsId !== secondMapDsId) {
            changedState.multiMapStyle = VisibleStyles.secondMapVisible;
            changedState.currentMapIndex = 1;
        }
    }
    return changedState;
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MultiSourceMap);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool-shell.tsx":
/*!******************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool-shell.tsx ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseToolShell)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _ui_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui-component */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/ui-component.tsx");
/* harmony import */ var _tool_modules__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tool-modules */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/tool-modules.ts");
/** @jsx jsx */



class BaseToolShell extends _ui_component__WEBPACK_IMPORTED_MODULE_1__.UIComponent {
    render() {
        const ToolClass = _tool_modules__WEBPACK_IMPORTED_MODULE_2__["default"][this.props.toolName];
        let isAvailable = true;
        if (ToolClass) {
            if (ToolClass.isAvailable) {
                isAvailable = ToolClass.isAvailable(this.props);
            }
            else {
                isAvailable = true;
            }
        }
        else {
            isAvailable = false;
        }
        if (isAvailable) {
            const className = `exbmap-ui exbmap-ui-tool-shell divitem exbmap-ui-tool-shell-${this.props.toolName}`;
            const styleObj = this.props.layoutConfig.elements[this.props.toolName].style || {};
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(this.props.className, className, this.props.layoutConfig.elements[this.props.toolName].className, {
                    'exbmap-ui-hidden-element': this.props.isHidden,
                    'rounded-pill': ['Compass'].includes(this.props.toolName)
                }), style: styleObj },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(ToolClass, { mapWidgetId: this.props.mapWidgetId, ref: 'baseToolInstance', toolJson: this.props.layoutConfig.elements[this.props.toolName], toolName: this.props.toolName, isMobile: this.props.isMobile, jimuMapView: this.props.jimuMapView, activeToolInfo: this.props.activeToolInfo, onActiveToolInfoChange: this.props.onActiveToolInfoChange, intl: this.props.intl, theme: this.props.theme, autoControlWidgetId: this.props.autoControlWidgetId })));
        }
        else {
            if (this.props.isMobile) {
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", null);
            }
            else {
                return null;
            }
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseTool: () => (/* binding */ BaseTool)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _ui_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ui-component */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/ui-component.tsx");
/* harmony import */ var _scroll_container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scroll-container */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/scroll-container.tsx");
/* harmony import */ var _panel_shell__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./panel-shell */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/panel-shell.tsx");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/** @jsx jsx */






const defaultIcon = __webpack_require__(/*! jimu-ui/lib/icons/widgets.svg */ "./jimu-ui/lib/icons/widgets.svg");
const closeIcon = __webpack_require__(/*! ../../assets/icons/close-12.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/close-12.svg");
class BaseTool extends _ui_component__WEBPACK_IMPORTED_MODULE_2__.UIComponent {
    constructor(props) {
        super(props);
        this.toolName = null;
        this.isContainedToMobilePanel = false;
        // this param is used to update pop position when pc content has changed
        this.generation = 0;
        this._getContent = () => {
            if (this.props.toolJson.isOnlyExpanded) {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this._cssStyle(), className: 'exbmap-ui exbmap-ui-tool-panel' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null, this.getExpandPanel())));
            }
            else {
                if (this.props.isMobile) {
                    return this._renderMobileTool();
                }
                else {
                    return this._renderPCTool();
                }
            }
        };
        this.onResize = (width, height) => {
            if (!width || !height) {
                return;
            }
            this.generation = height;
            this.forceUpdate();
        };
        this.handleToggleMobilePanel = () => {
            this.props.onActiveToolInfoChange(null);
        };
        const mapContainer = this.props.jimuMapView && this.props.jimuMapView.view && this.props.jimuMapView.view.container;
        if (jimu_ui__WEBPACK_IMPORTED_MODULE_1__.MobilePanelManager.getInstance().checkDomIsContained(mapContainer)) {
            this.isContainedToMobilePanel = true;
        }
        this.modifiers = [{
                name: 'flip',
                options: {
                    padding: 0
                }
            }, {
                name: 'preventOverflow',
                options: {
                    boundary: mapContainer
                }
            }];
        this._onKeyDown = this._onKeyDown.bind(this);
        this.onPopperToggle = this.onPopperToggle.bind(this);
    }
    _cssStyle() {
        const extendCssStyle = this.getExtendCssStyle();
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .exbmap-basetool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .exbmap-basetool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .exbmap-basetool-loader:after {
        background-color: #6e6e6e;
        width: 20%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      ${extendCssStyle}

      /* pointer-events: auto;
      box-shadow: 0 1px 2px rgba(0,0,0,0.3);
      position: relative;

      .exbmap-ui-tool-icon {
        fill: black;
        left: 8px;
        top: 8px;
        position: absolute;
        display: block;
      }

      .exbmap-ui-expand-content {
        transition: opacity 250ms ease-in-out, margin 250ms ease-in-out;
        min-height: 10px;
        min-width: 10px;
        padding-top: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10)};
        padding-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10)};
        padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(20)};
        padding-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(20)};

        .exbmap-ui-expand-content-header {
          margin-bottom: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(10)};
        }

        .panel-title {
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(16)};
          color: #000000;
        }
      }

      .expand-placement-bottom {
        padding-top: 0.25rem !important;
      }

      .expand-placement-left {
        padding-right: 0.25rem !important;
      }

      .expand-placement-right {
        padding-left: 0.25rem !important;
      }

      .expand-placement-top {
        padding-bottom: 0.25rem !important;
      }

      .exbmap-basetool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .exbmap-basetool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .exbmap-basetool-loader:after {
        background-color: #6e6e6e;
        width: 20%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      } */
    `;
    }
    getExtendCssStyle() {
        return '';
    }
    focusDefaultElement() { }
    onShowPanel() { }
    onClosePanel() { }
    destroy() { }
    static getIsNeedSetting() {
        return true;
    }
    /**
     * Retrun true if the tool should be rendered on the map, otherwise return false.
     * e.g. ScaleBar only supports map view, so ScaleBarTool.isAvailable() will return false if the map is scene view.
     */
    static isAvailable(toolShellProps) {
        return true;
    }
    onPopperToggle(e) {
        if (e) {
            if (e.type === 'keydown' && e.key === 'Escape') {
                this._onIconClick();
                this.iconContainer.focus();
            }
        }
    }
    _onKeyDown(e) {
        var _a;
        if (e.key === 'Enter' || e.key === ' ') {
            if (((_a = this.props.activeToolInfo) === null || _a === void 0 ? void 0 : _a.activeToolName) !== this.toolName) {
                this._onIconClick();
            }
            else {
                this.focusDefaultElement();
            }
        }
    }
    _onIconClick(e) {
        const onIconClick = this.getIcon() && this.getIcon().onIconClick;
        if (onIconClick) {
            onIconClick(e);
        }
        if (!this.getExpandPanel()) {
            return;
        }
        if (this.props.activeToolInfo) {
            if (this.props.activeToolInfo.activeToolName === this.toolName) {
                this.props.onActiveToolInfoChange(null);
            }
            else {
                this.props.onActiveToolInfoChange({
                    activeToolName: this.toolName,
                    activeToolTitle: this.getTitle()
                });
                this.onShowPanel();
            }
        }
        else {
            this.props.onActiveToolInfoChange({
                activeToolName: this.toolName,
                activeToolTitle: this.getTitle()
            });
            this.onShowPanel();
        }
    }
    _initIconContainer(ref) {
        if (ref && !this.iconContainer) {
            this.iconContainer = ref;
            this.forceUpdate();
        }
    }
    _renderPCTool() {
        var _a;
        let toolIcon = this.getIcon();
        if (!toolIcon) {
            toolIcon = {
                icon: defaultIcon,
                onIconClick: () => { }
            };
        }
        const expandPanel = this.getExpandPanel();
        const activeToolName = this.props.activeToolInfo && this.props.activeToolInfo.activeToolName;
        this.generation = this.generation + 1;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui exbmap-ui-tool', css: this._cssStyle(), style: { width: '32px', height: '32px' } },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {}, ref: ref => { this._initIconContainer(ref); }, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool esri-widget--button', {
                    'exbmap-ui-tool-icon-selected': this.toolName === activeToolName && expandPanel
                }), title: this.props.toolJson.isShowIconTitle ? this.getTitle() : '', onClick: e => { this._onIconClick(e); }, "aria-expanded": ((_a = this.props.activeToolInfo) === null || _a === void 0 ? void 0 : _a.activeToolName) === this.toolName, role: 'button', tabIndex: 0, onKeyDown: this._onKeyDown },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: toolIcon.icon })),
            this.iconContainer && (this.toolName === activeToolName && expandPanel) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panel_shell__WEBPACK_IMPORTED_MODULE_4__["default"], { onDestroyed: () => { this.onClosePanel(); } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { className: 'exbmap-ui-popper', reference: this.iconContainer, open: !!(this.toolName === activeToolName && expandPanel), placement: this.props.toolJson.panelPlacement, modifiers: this.modifiers, version: this.generation, offset: [0, 4], toggle: this.onPopperToggle, forceLatestFocusElements: true },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__.MultiSourceMapContext.Consumer, null, ({ mapWidgetHeight }) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this._cssStyle(), className: this.getExpandPanelPlacementClassName() },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui-expand-content' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 justify-content-between d-flex exbmap-ui-expand-content-header' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'panel-title text-truncate', style: { maxWidth: '210px' }, title: this.getTitle() }, this.getTitle()),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onClick: () => { this.props.onActiveToolInfoChange(null); }, style: { cursor: 'pointer' }, tabIndex: 0, role: "button", "aria-label": this.props.intl.formatMessage({ id: 'close', defaultMessage: 'close' }) },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 20, height: 20, icon: closeIcon }))),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null,
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { maxHeight: `${mapWidgetHeight - 55}px`, overflowY: this.toolName !== 'Search' ? 'auto' : 'inherit' } }, expandPanel),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: this.onResize }))))))))));
    }
    _renderMobileTool() {
        let toolIcon = this.getIcon();
        if (!toolIcon) {
            toolIcon = {
                icon: defaultIcon,
                onIconClick: () => { }
            };
        }
        const expandPanel = this.getExpandPanel();
        const activeToolName = this.props.activeToolInfo && this.props.activeToolInfo.activeToolName;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__.MultiSourceMapContext.Consumer, null, ({ mobilePanelContainer }) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui exbmap-ui-tool', css: this._cssStyle() },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {}, ref: ref => { this.iconContainer = ref; }, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool esri-widget--button', {
                    'exbmap-ui-tool-icon-selected': this.toolName === activeToolName && expandPanel
                }), role: 'button', tabIndex: 0, onKeyDown: this._onKeyDown, title: this.props.toolJson.isShowIconTitle ? this.getTitle() : '', onClick: e => { this._onIconClick(e); } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: toolIcon.icon })),
            this.toolName === activeToolName && expandPanel &&
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactDOM.createPortal((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_panel_shell__WEBPACK_IMPORTED_MODULE_4__["default"], { onDestroyed: () => { this.onClosePanel(); } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100 d-flex flex-column', css: this._cssStyle() },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_scroll_container__WEBPACK_IMPORTED_MODULE_3__["default"], { className: 'w-100 h-100' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ErrorBoundary, null, this.getExpandPanel())))), mobilePanelContainer)))));
    }
    getExpandPanelPlacementClassName() {
        if (!this.props.toolJson.panelPlacement) {
            return null;
        }
        else {
            return `expand-placement-${this.props.toolJson.panelPlacement.split('-')[0]}`;
        }
    }
    render() {
        return this._getContent();
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/group.tsx":
/*!********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/group.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Group)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _ui_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ui-component */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/ui-component.tsx");
/* harmony import */ var _base_tool_shell__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base-tool-shell */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool-shell.tsx");
/* harmony import */ var _tool_modules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tool-modules */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/tool-modules.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/** @jsx jsx */






class Group extends _ui_component__WEBPACK_IMPORTED_MODULE_1__.UIComponent {
    getStyle() {
        const groupJson = this.props.layoutConfig.elements[this.props.groupName];
        const direction = groupJson.direction;
        const isRTL = this.props.isRTL;
        const isVertical = direction === 'vertical';
        let flexFlow = '';
        if (isVertical) {
            flexFlow = 'column';
        }
        else {
            if (isRTL) {
                flexFlow = 'row-reverse';
            }
            else {
                flexFlow = 'row';
            }
        }
        let alignItems = 'flex-start';
        if (isVertical) {
            if (groupJson.isVerticalRrlAlignItemsStart) {
                if (isRTL) {
                    alignItems = 'flex-end';
                }
                else {
                    alignItems = 'flex-start';
                }
            }
            if (groupJson.isVerticalRrlAlignItemsEnd) {
                if (isRTL) {
                    alignItems = 'flex-start';
                }
                else {
                    alignItems = 'flex-end';
                }
            }
        }
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `

      display: flex;
      flex-flow: ${flexFlow};
      align-items: ${alignItems};

      .exbmap-ui-group-expand-icon {
        fill: black;
        left: 8px;
        top: 8px;
        position: absolute;
        display: block;
      }

      .expand-mobile-panel {
        box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 2px;
        border-radius: 10px 10px 0px 0px;
      }

      .expand-mobile-panel-transition {
        transition: height 0.3s;
      }

      .expand-mobile-panel-touch-container {
        top: 0;
        position: absolute;
        width: 100%;
        height: 31px;
      }

      .expand-mobile-panel-bar {
        width: 36px;
        height: 4px;
        background-color: #434343;
        border-radius: 2px;
      }
      `;
    }
    constructor(props) {
        super(props);
        this.checkIsHiddenElement = (elementName) => {
            if (this.props.hiddenElementNames) {
                if (this.props.hiddenElementNames.includes(elementName)) {
                    return true;
                }
                else {
                    return false;
                }
            }
            else {
                return false;
            }
        };
        /**
         * Hide some tools if widget hegith is too small.
         * This method only hide child element names if current group is main group and in mobile size.
         * @returns
         */
        this.checkResponsive = () => {
            if (!this.props.onSetHiddenElementNames) {
                return;
            }
            if (!this.props.isMainGroup || !this.props.isMobile) {
                this.props.onSetHiddenElementNames([]);
                return;
            }
            const mobileResponsiveStrategy = this.props.layoutConfig.mobileResponsiveStrategy;
            const aboveHeight = this.state.widgetHeight;
            // see issue #2862 for more details
            let hiddenElementNames = [];
            if (aboveHeight >= 465) {
                hiddenElementNames = [];
            }
            else if (aboveHeight >= 400 && aboveHeight < 465) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage1) || [];
            }
            else if (aboveHeight >= 320 && aboveHeight < 400) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage2) || [];
            }
            else if (aboveHeight >= 250 && aboveHeight < 320) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage3) || [];
            }
            else if (aboveHeight >= 160 && aboveHeight < 250) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage4) || [];
            }
            else if (aboveHeight >= 54 && aboveHeight < 160) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage5) || [];
            }
            else if (aboveHeight < 54) {
                hiddenElementNames = (mobileResponsiveStrategy === null || mobileResponsiveStrategy === void 0 ? void 0 : mobileResponsiveStrategy.stage6) || [];
            }
            this.props.onSetHiddenElementNames(hiddenElementNames);
        };
        this.onResize = (width, height) => {
            if (!width || !height) {
                return;
            }
            this.setState({
                widgetWidth: width,
                widgetHeight: height
                // isThumbMap: false
            }, () => {
                this.checkResponsive();
            });
        };
        this.returnNullNode = (key) => {
            if (this.props.isMobile) {
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { key: key });
            }
            else {
                return null;
            }
        };
        this.checkIsLastElement = (parentGroupJson, toolJson) => {
            const toolName = toolJson.toolName;
            const layoutJson = this.props.layoutConfig;
            const children = layoutJson.layout[parentGroupJson.groupName].children;
            const index = children.indexOf(toolName);
            if (index === children.length - 1) {
                return true;
            }
            if (index < children.length - 1) {
                let isLastElement = true;
                for (let i = (index + 1); i < children.length; i++) {
                    const elementName = children[i];
                    if (layoutJson.elements[children[i]].type === 'GROUP') {
                        continue;
                    }
                    else if ((!_tool_modules__WEBPACK_IMPORTED_MODULE_3__["default"][elementName].getIsNeedSetting() || (this.props.toolConfig && this.props.toolConfig[`can${elementName}`]) ||
                        (layoutJson.lockToolNames && layoutJson.lockToolNames.includes(elementName)))) {
                        isLastElement = false;
                        break;
                    }
                    else {
                        continue;
                    }
                }
                return isLastElement;
            }
        };
        this.handleToggleMobilePanel = () => {
            this.props.onActiveToolInfoChange(null);
        };
        this.handlePanelHeightChange = (panelWidth, panelHeight) => {
            this.setState({ bottomPanelHeight: panelHeight }, () => {
                this.checkResponsive();
            });
        };
        this.getMobilePanelInContext = () => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_5__.MultiSourceMapContext.Consumer, null, ({ mobilePanelContainer, mapWidgetId }) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_4__.MobilePanel, { mapWidgetId: mapWidgetId, title: this.props.activeToolInfo && this.props.activeToolInfo.activeToolTitle, open: !!this.props.activeToolInfo, onClose: () => { this.handleToggleMobilePanel(); } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', ref: (container) => { if (mobilePanelContainer && container) {
                        container.appendChild(mobilePanelContainer);
                    } } })))));
        };
        this.getGroupContent = (layoutJson) => {
            if (!layoutJson) {
                return this.returnNullNode();
            }
            else {
                const children = layoutJson.layout[this.props.groupName] && layoutJson.layout[this.props.groupName].children;
                if (this.checkIsShowGroup(layoutJson, children)) {
                    const groupClassName = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)(`exbmap-ui exbmap-ui-group exbmap-ui-group-${this.props.groupName}`, this.props.className, { 'exbmap-ui-hidden-element': this.props.isHidden });
                    const styleObj = this.props.layoutConfig.elements[this.props.groupName].style || {};
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: (this.props.isMainGroup ? this.props.mapWidgetId : undefined), css: this.getStyle(), className: groupClassName, style: styleObj },
                        children.map((key, index) => {
                            var _a, _b;
                            if (!layoutJson.elements[key]) {
                                return this.returnNullNode(index);
                            }
                            if (layoutJson.elements[key].type === 'GROUP') {
                                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(Group, { mapWidgetId: this.props.mapWidgetId, isHidden: this.checkIsHiddenElement(key), className: layoutJson.elements[key].className, style: layoutJson.elements[key].style, key: index, layoutConfig: layoutJson, toolConfig: this.props.toolConfig, isMobile: this.props.isMobile, intl: this.props.intl, jimuMapView: this.props.jimuMapView, groupName: key, activeToolInfo: this.props.activeToolInfo, hiddenElementNames: this.props.hiddenElementNames, onActiveToolInfoChange: this.props.onActiveToolInfoChange, theme: this.props.theme, isThumbMap: this.props.isMainGroup ? this.state.isThumbMap : this.props.isThumbMap, autoControlWidgetId: this.props.autoControlWidgetId, isRTL: this.props.isRTL }));
                            }
                            else if (layoutJson.elements[key].type === 'TOOL') {
                                const toolName = layoutJson.elements[key].toolName;
                                const viewType = (_b = (_a = this.props.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) === null || _b === void 0 ? void 0 : _b.type;
                                // Navigation is not available for 2D MapView.
                                if ((toolName === 'Navigation' && viewType === '2d') || (toolName === 'ScaleBar' && viewType === '3d')) {
                                    return this.returnNullNode(index);
                                }
                                if (!_tool_modules__WEBPACK_IMPORTED_MODULE_3__["default"][key].getIsNeedSetting() || (this.props.toolConfig && this.props.toolConfig[`can${key}`]) || (layoutJson.lockToolNames && layoutJson.lockToolNames.includes(key))) {
                                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_base_tool_shell__WEBPACK_IMPORTED_MODULE_2__["default"], { mapWidgetId: this.props.mapWidgetId, isHidden: this.checkIsHiddenElement(key), key: index, layoutConfig: layoutJson, activeToolInfo: this.props.activeToolInfo, toolConfig: this.props.toolConfig, jimuMapView: this.props.jimuMapView, toolName: key, theme: this.props.theme, onActiveToolInfoChange: this.props.onActiveToolInfoChange, intl: this.props.intl, isMobile: this.props.isMobile, isLastElement: this.checkIsLastElement(layoutJson.elements[this.props.groupName], layoutJson.elements[key]), autoControlWidgetId: this.props.autoControlWidgetId }));
                                }
                                else {
                                    return this.returnNullNode(index);
                                }
                            }
                            else {
                                return this.returnNullNode(index);
                            }
                        }),
                        this.props.isMainGroup && this.props.isMobile && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: this.onResize }),
                        this.props.isMainGroup && this.props.isMobile && this.props.activeToolInfo && this.props.activeToolInfo.activeToolName !== 'Select' && this.getMobilePanelInContext(),
                        this.props.isMainGroup && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui w-100', style: {
                                position: 'relative',
                                pointerEvents: 'auto',
                                overflow: 'hidden',
                                touchAction: 'none',
                                display: this.props.isMobile && !(this.state.isThumbMap || this.props.isThumbMap) ? 'block' : 'none'
                            } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `${this.props.mapWidgetId}-bottom-panel exbmap-ui w-100 expand-mobile-panel`, style: { overflow: 'hidden', pointerEvents: 'auto', position: 'relative', touchAction: 'none' } },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100' },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleHeight: true, onResize: this.handlePanelHeightChange }))))));
                }
                else {
                    return this.returnNullNode();
                }
            }
        };
        this.checkIsShowGroup = (layoutJson, children) => {
            if (!children || children.length === 0) {
                return false;
            }
            else {
                const toolNames = [];
                this.findAllToolNames(layoutJson, children, toolNames);
                let isShowGroup = false;
                for (let i = 0; i < toolNames.length; i++) {
                    if (this.props.toolConfig[`can${toolNames[i]}`] || !_tool_modules__WEBPACK_IMPORTED_MODULE_3__["default"][toolNames[i]].getIsNeedSetting() ||
                        (layoutJson.lockToolNames && layoutJson.lockToolNames.includes(toolNames[i]))) {
                        isShowGroup = true;
                        break;
                    }
                }
                return isShowGroup;
            }
        };
        this.findAllToolNames = (layoutJson, children, toolNames) => {
            if (!children || children.length === 0) {
                return;
            }
            for (let i = 0; i < children.length; i++) {
                const childName = children[i];
                const elementInfo = layoutJson.elements[childName];
                if (elementInfo.type === 'GROUP') {
                    const groupName = elementInfo.groupName;
                    this.findAllToolNames(layoutJson, layoutJson.layout[groupName] && layoutJson.layout[groupName].children, toolNames);
                }
                else {
                    toolNames.push(children[i]);
                }
            }
        };
        this.state = {
            bottomPanelHeight: 0,
            isThumbMap: !!this.props.isMobile
        };
    }
    componentDidMount() {
        this.checkResponsive();
    }
    render() {
        if (this.props.isMainGroup && this.props.isMobile && this.props.toolConfig && this.props.toolConfig.canSelect) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { position: 'absolute', top: 0, left: 0, bottom: 0, right: 0 } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { id: `${this.props.mapWidgetId}-with-select-container`, style: { position: 'absolute', top: 0, left: 0, bottom: 0, right: 0 } },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', style: { position: 'relative' } }, this.getGroupContent(this.props.layoutConfig)))));
        }
        else {
            return this.getGroupContent(this.props.layoutConfig);
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/panel-shell.tsx":
/*!**************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/panel-shell.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PanelShell)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class PanelShell extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    componentWillUnmount() {
        if (this.props.onDestroyed) {
            this.props.onDestroyed();
        }
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null, this.props.children));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/scroll-container.tsx":
/*!*******************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/scroll-container.tsx ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ScrollContainer)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/** @jsx jsx */

class ScrollContainer extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.moveY = 0;
        this.startY = 0;
        this.isRegisted = false;
        this.registerTouchEvent = (ref) => {
            if (ref && !this.isRegisted) {
                ref.addEventListener('touchstart', (event) => {
                    this.moveY = 0;
                    const touch = event.touches[0];
                    this.startY = touch.clientY;
                }, { passive: false });
                ref.addEventListener('touchmove', (event) => {
                    const touch = event.touches[0];
                    this.moveY = (touch.clientY - this.startY) * -1;
                    this.startY = touch.clientY;
                    ref.scrollTop = ref.scrollTop + this.moveY;
                }, { passive: false });
                ref.addEventListener('touchend', (event) => {
                    this.moveY = 0;
                    this.startY = 0;
                }, { passive: false });
                this.isRegisted = true;
            }
        };
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      overflow: auto;
      pointer-events: auto;
      `;
    }
    render() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: this.props.className, style: this.props.style, ref: ref => {
                this.registerTouchEvent(ref);
            } }, this.props.children));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/ui-component.tsx":
/*!***************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/ui-component.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UIComponent: () => (/* binding */ UIComponent)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class UIComponent extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/layout.tsx":
/*!****************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/layout.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MapToolLayout)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _base_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base/group */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/group.tsx");
/** @jsx jsx */


class MapToolLayout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.getMaxHeightForPcExpand = (widgetHeight) => {
            if (!widgetHeight) {
                return null;
            }
            else {
                if (widgetHeight < 65) {
                    return null;
                }
                else {
                    const resultHeight = widgetHeight - 65;
                    if (resultHeight < 300) {
                        return resultHeight;
                    }
                    else {
                        return 300;
                    }
                }
            }
        };
        this.handSetHiddenElementNames = (elementNames) => {
            this.setState({
                hiddenElementNames: elementNames
            });
        };
        this.state = {
            toolsContentInMobileExpandPanel: null,
            hiddenElementNames: []
        };
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      z-index: 8;
      pointer-events: none;

      .expand-panel-transition {
        transition: opacity 0.3s, right 0.3s;
      }

      .scale-attribution-xy-group {
        > div:first-of-type:nth-last-of-type(1) {
          width: 100%;
          max-width: 100% !important;
        }
      }

      .exbmap-ui-hidden-element {
        display: none !important;
      }

      .exbmap-ui-pc-expand-maxheight {
        max-height: ${this.getMaxHeightForPcExpand(this.props.widgetHeight)}px;
        overflow: auto
      }
      `;
    }
    getLayoutContent(layoutJson) {
        if (!layoutJson || !this.props.toolConfig) {
            return null;
        }
        else {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui esri-ui-inner-container map-tool-layout', css: this.getStyle() }, Object.keys(layoutJson.layout).map((key, index) => {
                const elementItem = layoutJson.elements[key];
                const layoutItem = layoutJson.layout[key];
                if (!elementItem || elementItem.type !== 'GROUP' || !layoutItem.isMainGroup) {
                    return null;
                }
                const isRTL = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appContext.isRTL;
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_base_group__WEBPACK_IMPORTED_MODULE_1__["default"], { mapWidgetId: this.props.mapWidgetId, className: elementItem.className, style: elementItem.style, isMobile: this.props.isMobile, isMainGroup: true, key: index, layoutConfig: layoutJson, toolConfig: this.props.toolConfig, activeToolInfo: this.props.activeToolInfo, jimuMapView: this.props.jimuMapView, groupName: key, onActiveToolInfoChange: this.props.onActiveToolInfoChange, hiddenElementNames: layoutJson.mobileResponsiveStrategy && this.state.hiddenElementNames, intl: this.props.intl, onSetHiddenElementNames: this.handSetHiddenElementNames, theme: this.props.theme, autoControlWidgetId: this.props.autoControlWidgetId, isRTL: isRTL }));
            })));
        }
    }
    componentDidUpdate(prevProps) {
        if (prevProps.appMode !== this.props.appMode && this.props.appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design) {
            this.props.onActiveToolInfoChange(null);
        }
    }
    render() {
        return this.getLayoutContent(this.props.layoutConfig);
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/map-fixed-layout.tsx":
/*!**************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/map-fixed-layout.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Layout)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
/** @jsx jsx */



class Layout extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.getMapFixedLayout = () => {
            // #1197, #2960
            if (window.jimuConfig.isInBuilder) {
                const LayoutEntry = this.props.LayoutEntry;
                const layout = this.props.layouts && this.props.layouts.MapFixedLayout;
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(LayoutEntry, { layouts: layout || null, isInWidget: true, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100 map-fix-layout', { 'widget-map-usemask': !(0,_utils__WEBPACK_IMPORTED_MODULE_2__.checkIsLive)(this.props.appMode), 'map-is-live-mode': (0,_utils__WEBPACK_IMPORTED_MODULE_2__.checkIsLive)(this.props.appMode) }) }));
            }
            else {
                const layout = this.props.layouts && this.props.layouts.MapFixedLayout;
                return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.LayoutEntry, { layouts: layout ? (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable)(layout) : null, className: 'w-100 h-100 map-is-live-mode map-fix-layout' });
            }
        };
        this.state = {};
    }
    render() {
        return this.getMapFixedLayout();
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/mobile-layout-json.ts":
/*!***************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/mobile-layout-json.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const mobileLayoutJson = {
    elements: {
        mainGroup: {
            type: 'GROUP',
            groupName: 'mainGroup',
            direction: 'vertical',
            className: 'd-flex flex-column',
            style: {
                position: 'absolute',
                top: '0px',
                left: '0px',
                bottom: '0px',
                right: '0px'
            }
        },
        topGroup: {
            type: 'GROUP',
            groupName: 'topGroup',
            direction: 'horizontal',
            className: 'd-flex w-100 align-items-center justify-content-between',
            style: {
                padding: '10px 10px 0 10px'
            }
        },
        midGroup: {
            type: 'GROUP',
            groupName: 'midGroup',
            direction: 'horizontal',
            className: 'flex-grow-1 d-flex w-100 justify-content-between',
            style: {
                position: 'relative'
            }
        },
        bottomGroup: {
            type: 'GROUP',
            groupName: 'bottomGroup',
            direction: 'horizontal',
            className: 'd-flex w-100 align-items-center justify-content-between'
        },
        'midGroup-left-top': {
            type: 'GROUP',
            groupName: 'midGroup-left-top',
            direction: 'vertical',
            style: {
                position: 'absolute',
                left: '0px',
                top: '0px'
            }
        },
        'midGroup-left-bottom': {
            type: 'GROUP',
            groupName: 'midGroup-left-bottom',
            direction: 'vertical',
            className: 'd-flex flex-column',
            isVerticalRrlAlignItemsStart: true,
            style: {
                position: 'absolute',
                left: '0px',
                bottom: '0px'
            }
        },
        'midGroup-right-content-top': {
            type: 'GROUP',
            groupName: 'midGroup-right-content-top',
            direction: 'vertical',
            style: {
                position: 'absolute',
                top: '0px',
                right: '10px'
            }
        },
        'midGroup-right-content-bottom': {
            type: 'GROUP',
            groupName: 'midGroup-right-content-bottom',
            direction: 'vertical',
            style: {
                position: 'absolute',
                bottom: '10px',
                right: '10px'
            }
        },
        Search: {
            type: 'TOOL',
            toolName: 'Search',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            className: 'flex-grow-1'
        },
        FullScreen: {
            type: 'TOOL',
            toolName: 'FullScreen',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            style: {
                marginLeft: '10px'
            }
        },
        Locate: {
            type: 'TOOL',
            toolName: 'Locate',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        ClearActionData: {
            type: 'TOOL',
            toolName: 'ClearActionData',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Compass: {
            type: 'TOOL',
            toolName: 'Compass',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            className: 'mb-0',
            style: {
                marginLeft: '10px',
                marginTop: '10px'
            }
        },
        MapSwitch: {
            type: 'TOOL',
            toolName: 'MapSwitch',
            isOnlyExpanded: true,
            isShowIconTitle: true,
            style: {
                marginLeft: '10px',
                marginBottom: '10px'
            }
        },
        Zoom: {
            type: 'TOOL',
            toolName: 'Zoom',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Home: {
            type: 'TOOL',
            toolName: 'Home',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        ExtentNavigate: {
            type: 'TOOL',
            toolName: 'ExtentNavigate',
            isOnlyExpanded: true,
            isShowIconTitle: true,
            style: {
                marginLeft: '10px',
                marginBottom: '10px'
            }
        },
        Layers: {
            type: 'TOOL',
            toolName: 'Layers',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginTop: '10px'
            }
        },
        BaseMap: {
            type: 'TOOL',
            toolName: 'BaseMap',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginTop: '10px'
            }
        },
        Select: {
            type: 'TOOL',
            toolName: 'Select',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        SelectState: {
            type: 'TOOL',
            toolName: 'SelectState',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                width: '100%'
            }
        },
        Measure: {
            type: 'TOOL',
            toolName: 'Measure',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginTop: '10px'
            }
        },
        ScaleBar: {
            type: 'TOOL',
            toolName: 'ScaleBar',
            isOnlyExpanded: true,
            isShowIconTitle: false
        }
    },
    layout: {
        mainGroup: {
            isMainGroup: true,
            children: ['topGroup', 'midGroup', 'bottomGroup']
        },
        topGroup: {
            children: ['Search', 'FullScreen']
        },
        midGroup: {
            children: ['midGroup-left-top', 'midGroup-left-bottom', 'midGroup-right-content-top', 'midGroup-right-content-bottom']
        },
        'midGroup-left-top': {
            children: ['Compass']
        },
        'midGroup-left-bottom': {
            children: ['ExtentNavigate', 'MapSwitch', 'ScaleBar']
        },
        'midGroup-right-content-top': {
            children: ['Layers', 'BaseMap', 'Measure', 'Select']
        },
        'midGroup-right-content-bottom': {
            children: ['Zoom', 'Home', 'Locate', 'ClearActionData']
        },
        bottomGroup: {
            children: ['SelectState']
        }
    },
    mobileResponsiveStrategy: {
        // height: 400-465
        stage1: ['Measure', 'Locate'],
        // height: 320-400
        stage2: ['Measure', 'Select', 'Locate', 'bottomGroup'],
        // height: 250-320
        stage3: ['ExtentNavigate', 'midGroup-right-content-top', 'Locate', 'bottomGroup'],
        // height: 160-250
        stage4: ['MapSwitch', 'midGroup-right-content-top', 'Home', 'Locate', 'ClearActionData', 'bottomGroup'],
        // height: 54-160
        stage5: ['midGroup', 'bottomGroup'],
        // height: 0-54
        stage6: ['topGroup', 'midGroup', 'bottomGroup']
    },
    lockToolNames: []
};
const mobileLayoutJsons = [mobileLayoutJson];
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mobileLayoutJsons);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/pc-layout-json.ts":
/*!***********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/pc-layout-json.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const layoutJson1 = {
    elements: {
        leftTopContainer: {
            type: 'GROUP',
            groupName: 'leftTopContainer',
            direction: 'horizontal',
            style: {
                position: 'absolute',
                top: '15px',
                left: '15px'
            }
        },
        navigator: {
            type: 'GROUP',
            groupName: 'navigator',
            direction: 'vertical',
            style: {
                marginRight: '10px'
            }
        },
        interact: {
            type: 'GROUP',
            groupName: 'interact',
            direction: 'vertical',
            isResponsive: true,
            style: {
                position: 'absolute',
                top: '15px',
                right: '15px'
            }
        },
        bottom: {
            type: 'GROUP',
            groupName: 'bottom',
            direction: 'vertical',
            className: 'w-100',
            style: {
                position: 'absolute',
                bottom: '0px',
                left: '0px'
            }
        },
        'bottom-line1': {
            type: 'GROUP',
            groupName: 'bottom-line1',
            direction: 'horizontal',
            className: 'd-flex align-items-center justify-content-between w-100 scale-attribution-xy-group',
            style: {
                marginBottom: '0px',
                marginTop: '0px'
            }
        },
        'bottom-line2': {
            type: 'GROUP',
            groupName: 'bottom-line2',
            direction: 'horizontal',
            className: 'd-flex align-items-end justify-content-between w-100',
            style: {
                paddingLeft: '15px',
                paddingRight: '15px',
                marginBottom: '10px'
            }
        },
        'SelectState-FullScreen-Container': {
            type: 'GROUP',
            groupName: 'SelectState-FullScreen-Container',
            direction: 'vertical',
            isVerticalRrlAlignItemsEnd: true
        },
        attributionGroup: {
            type: 'GROUP',
            groupName: 'attributionGroup',
            direction: 'horizontal',
            style: {
                maxWidth: '60%'
            }
        },
        Zoom: {
            type: 'TOOL',
            toolName: 'Zoom',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginBottom: '10px'
            }
        },
        Home: {
            type: 'TOOL',
            toolName: 'Home',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginBottom: '10px'
            }
        },
        Compass: {
            type: 'TOOL',
            toolName: 'Compass',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Navigation: {
            type: 'TOOL',
            toolName: 'Navigation',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginBottom: '10px'
            }
        },
        Locate: {
            type: 'TOOL',
            toolName: 'Locate',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginBottom: '10px'
            }
        },
        Layers: {
            type: 'TOOL',
            toolName: 'Layers',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginBottom: '10px'
            }
        },
        BaseMap: {
            type: 'TOOL',
            toolName: 'BaseMap',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginBottom: '10px'
            }
        },
        Select: {
            type: 'TOOL',
            toolName: 'Select',
            isOnlyExpanded: true,
            isShowIconTitle: true
        },
        SelectState: {
            type: 'TOOL',
            toolName: 'SelectState',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px',
                boxShadow: '0 1px 2px 0 rgba(0,0,0,0)'
            }
        },
        ExtentNavigate: {
            type: 'TOOL',
            toolName: 'ExtentNavigate',
            isOnlyExpanded: true,
            isShowIconTitle: true,
            style: {
                marginBottom: '10px'
            }
        },
        Measure: {
            type: 'TOOL',
            toolName: 'Measure',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start'
        },
        MapSwitch: {
            type: 'TOOL',
            toolName: 'MapSwitch',
            isOnlyExpanded: true,
            isShowIconTitle: true
        },
        FullScreen: {
            type: 'TOOL',
            toolName: 'FullScreen',
            isOnlyExpanded: false,
            isShowIconTitle: true
        },
        ClearActionData: {
            type: 'TOOL',
            toolName: 'ClearActionData',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        ScaleBar: {
            type: 'TOOL',
            toolName: 'ScaleBar',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Attribution: {
            type: 'TOOL',
            toolName: 'Attribution',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            className: 'w-100'
        },
        Search: {
            type: 'TOOL',
            toolName: 'Search',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'left-start',
            style: {
                marginBottom: '10px'
            }
        }
    },
    layout: {
        leftTopContainer: {
            isMainGroup: true,
            children: ['navigator', 'Select']
        },
        navigator: {
            children: ['Zoom', 'Home', 'Navigation', 'ExtentNavigate', 'Locate', 'Compass']
        },
        interact: {
            isMainGroup: true,
            children: ['Search', 'Layers', 'BaseMap', 'Measure']
        },
        'bottom-line1': {
            children: ['ScaleBar', 'attributionGroup']
        },
        'bottom-line2': {
            children: ['MapSwitch', 'SelectState-FullScreen-Container']
        },
        'SelectState-FullScreen-Container': {
            children: ['FullScreen', 'ClearActionData', 'SelectState']
        },
        bottom: {
            isMainGroup: true,
            children: ['bottom-line2', 'bottom-line1']
        },
        attributionGroup: {
            children: ['Attribution']
        }
    }
};
const layoutJson2 = {
    elements: {
        navigator: {
            type: 'GROUP',
            groupName: 'navigator',
            direction: 'vertical',
            isVerticalRrlAlignItemsEnd: true
        },
        interact: {
            type: 'GROUP',
            groupName: 'interact',
            direction: 'horizontal',
            isResponsive: true,
            style: {
                position: 'absolute',
                top: '15px',
                left: '15px'
            }
        },
        fullScreenGroup: {
            type: 'GROUP',
            groupName: 'fullScreenGroup',
            direction: 'horizontal',
            style: {
                position: 'absolute',
                top: '15px',
                right: '15px'
            }
        },
        bottom: {
            type: 'GROUP',
            groupName: 'bottom',
            direction: 'vertical',
            className: 'w-100',
            style: {
                position: 'absolute',
                bottom: '0px',
                left: '0px'
            }
        },
        'bottom-line1': {
            type: 'GROUP',
            groupName: 'bottom-line1',
            direction: 'horizontal',
            className: 'd-flex align-items-center justify-content-between w-100 scale-attribution-xy-group',
            style: {
                marginBottom: '0px',
                marginTop: '0px'
            }
        },
        'bottom-line2': {
            type: 'GROUP',
            groupName: 'bottom-line2',
            direction: 'horizontal',
            className: 'd-flex align-items-end justify-content-between w-100',
            style: {
                paddingLeft: '15px',
                paddingRight: '15px',
                marginBottom: '10px'
            }
        },
        attributionGroup: {
            type: 'GROUP',
            groupName: 'attributionGroup',
            direction: 'horizontal',
            style: {
                maxWidth: '60%'
            },
            className: 'attibute-group'
        },
        Zoom: {
            type: 'TOOL',
            toolName: 'Zoom',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        Home: {
            type: 'TOOL',
            toolName: 'Home',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        Compass: {
            type: 'TOOL',
            toolName: 'Compass',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Navigation: {
            type: 'TOOL',
            toolName: 'Navigation',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        Locate: {
            type: 'TOOL',
            toolName: 'Locate',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px'
            }
        },
        ExtentNavigate: {
            type: 'TOOL',
            toolName: 'ExtentNavigate',
            isOnlyExpanded: true,
            isShowIconTitle: true,
            style: {
                marginTop: '10px'
            }
        },
        Layers: {
            type: 'TOOL',
            toolName: 'Layers',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'bottom',
            style: {
                marginRight: '10px'
            }
        },
        BaseMap: {
            type: 'TOOL',
            toolName: 'BaseMap',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'bottom',
            style: {
                marginRight: '10px'
            }
        },
        Select: {
            type: 'TOOL',
            toolName: 'Select',
            isOnlyExpanded: true,
            isShowIconTitle: true
        },
        SelectState: {
            type: 'TOOL',
            toolName: 'SelectState',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            style: {
                marginTop: '10px',
                boxShadow: '0 1px 2px 0 rgba(0,0,0,0)'
            }
        },
        Measure: {
            type: 'TOOL',
            toolName: 'Measure',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'bottom',
            style: {
                marginRight: '10px'
            }
        },
        MapSwitch: {
            type: 'TOOL',
            toolName: 'MapSwitch',
            isOnlyExpanded: true,
            isShowIconTitle: true
        },
        FullScreen: {
            type: 'TOOL',
            toolName: 'FullScreen',
            isOnlyExpanded: false,
            isShowIconTitle: true
        },
        ClearActionData: {
            type: 'TOOL',
            toolName: 'ClearActionData',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        ScaleBar: {
            type: 'TOOL',
            toolName: 'ScaleBar',
            isOnlyExpanded: true,
            isShowIconTitle: false
        },
        Attribution: {
            type: 'TOOL',
            toolName: 'Attribution',
            isOnlyExpanded: true,
            isShowIconTitle: false,
            className: 'w-100'
        },
        Search: {
            type: 'TOOL',
            toolName: 'Search',
            isOnlyExpanded: false,
            isShowIconTitle: true,
            panelPlacement: 'bottom',
            style: {
                marginRight: '10px'
            }
        }
    },
    layout: {
        navigator: {
            children: ['Compass', 'Locate', 'ExtentNavigate', 'Navigation', 'Zoom', 'Home', 'SelectState']
        },
        interact: {
            isMainGroup: true,
            children: ['Search', 'Layers', 'BaseMap', 'Measure', 'Select']
        },
        fullScreenGroup: {
            isMainGroup: true,
            children: ['FullScreen', 'ClearActionData']
        },
        'bottom-line1': {
            children: ['ScaleBar', 'attributionGroup']
        },
        'bottom-line2': {
            children: ['MapSwitch', 'navigator']
        },
        bottom: {
            isMainGroup: true,
            children: ['bottom-line2', 'bottom-line1']
        },
        attributionGroup: {
            children: ['Attribution']
        }
    }
};
const layoutJsons = [layoutJson1, layoutJson2];
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (layoutJsons);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/tool-modules.ts":
/*!*********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/tool-modules.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _tools_zoom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tools/zoom */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/zoom.tsx");
/* harmony import */ var _tools_home__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tools/home */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/home.tsx");
/* harmony import */ var _tools_compass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tools/compass */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/compass.tsx");
/* harmony import */ var _tools_locate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tools/locate */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/locate.tsx");
/* harmony import */ var _tools_clear_action_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tools/clear-action-data */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/clear-action-data.tsx");
/* harmony import */ var _tools_navigation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tools/navigation */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/navigation.tsx");
/* harmony import */ var _tools_search__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tools/search */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/search.tsx");
/* harmony import */ var _tools_layers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tools/layers */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/layers.tsx");
/* harmony import */ var _tools_basemap__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tools/basemap */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/basemap.tsx");
/* harmony import */ var _tools_mapswitch__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tools/mapswitch */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/mapswitch.tsx");
/* harmony import */ var _tools_fullscreen__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../tools/fullscreen */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/fullscreen.tsx");
/* harmony import */ var _tools_scalebar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tools/scalebar */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/scalebar.tsx");
/* harmony import */ var _tools_attribution__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../tools/attribution */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/attribution.tsx");
/* harmony import */ var _tools_measure__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../tools/measure */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/measure.tsx");
/* harmony import */ var _tools_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../tools/select */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/index.tsx");
/* harmony import */ var _tools_selectstate__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tools/selectstate */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/index.tsx");
/* harmony import */ var _tools_extent_navigate__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../tools/extent-navigate */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/extent-navigate.tsx");

















const ToolModules = {
    Zoom: _tools_zoom__WEBPACK_IMPORTED_MODULE_0__["default"],
    Home: _tools_home__WEBPACK_IMPORTED_MODULE_1__["default"],
    Navigation: _tools_navigation__WEBPACK_IMPORTED_MODULE_5__["default"],
    Locate: _tools_locate__WEBPACK_IMPORTED_MODULE_3__["default"],
    ClearActionData: _tools_clear_action_data__WEBPACK_IMPORTED_MODULE_4__["default"],
    Compass: _tools_compass__WEBPACK_IMPORTED_MODULE_2__["default"],
    Search: _tools_search__WEBPACK_IMPORTED_MODULE_6__["default"],
    Layers: _tools_layers__WEBPACK_IMPORTED_MODULE_7__["default"],
    BaseMap: _tools_basemap__WEBPACK_IMPORTED_MODULE_8__["default"],
    Measure: _tools_measure__WEBPACK_IMPORTED_MODULE_13__["default"],
    MapSwitch: _tools_mapswitch__WEBPACK_IMPORTED_MODULE_9__["default"],
    FullScreen: _tools_fullscreen__WEBPACK_IMPORTED_MODULE_10__["default"],
    ScaleBar: _tools_scalebar__WEBPACK_IMPORTED_MODULE_11__["default"],
    Attribution: _tools_attribution__WEBPACK_IMPORTED_MODULE_12__["default"],
    Select: _tools_select__WEBPACK_IMPORTED_MODULE_14__["default"],
    SelectState: _tools_selectstate__WEBPACK_IMPORTED_MODULE_15__["default"],
    ExtentNavigate: _tools_extent_navigate__WEBPACK_IMPORTED_MODULE_16__["default"]
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ToolModules);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/attribution.tsx":
/*!********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/attribution.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Attribution)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");



class Attribution extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Attribution';
    }
    static getIsNeedSetting() {
        return false;
    }
    getTitle() {
        return 'Attribution';
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(AttributionInner, { jimuMapView: this.props.jimuMapView });
    }
}
class AttributionInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Attribution = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Attribution']).then(modules => {
                [this.Attribution] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate(prevProps) {
        if (this.state.apiLoaded && this.container) {
            if (prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id)) {
                if (this.AttributionBtn && !this.AttributionBtn.destroy) {
                    this.AttributionBtn.view = this.props.jimuMapView.view;
                    this.AttributionBtn.renderNow();
                    this.props.jimuMapView.addJimuMapTool({
                        name: 'Attribution',
                        instance: this.AttributionBtn
                    });
                }
            }
            else {
                this.AttributionBtn = new this.Attribution({
                    container: this.container,
                    view: this.props.jimuMapView.view
                });
                this.props.jimuMapView.deleteJimuMapTool('Attribution');
                this.props.jimuMapView.addJimuMapTool({
                    name: 'Attribution',
                    instance: this.AttributionBtn
                });
            }
        }
    }
    componentWillUnmount() {
        if (this.AttributionBtn) {
            this.AttributionBtn.destroy();
            this.AttributionBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Attribution');
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'attribution-map-tool', style: { position: 'relative' }, ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/basemap.tsx":
/*!****************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/basemap.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BaseMap)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");





class BaseMap extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'BaseMap';
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'BaseMapLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.BaseMapLabel });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../assets/icons/basemap.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/basemap.svg")
        };
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(BaseMapInner, { jimuMapView: this.props.jimuMapView, isMobile: this.props.isMobile });
    }
}
class BaseMapInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.__unmount = false;
        this.state = {
            apiLoaded: false,
            sourceLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/BasemapGallery', 'esri/widgets/BasemapGallery/support/LocalBasemapsSource']).then(modules => {
                if (this.__unmount) {
                    return;
                }
                [this.BasemapGallery, this.LocalBasemapsSource] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
        if (!this.state.sourceLoaded) {
            jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.basemapUtils.getOrgBasemaps().then((basemaps) => {
                if (this.__unmount) {
                    return;
                }
                this.orgBasemaps = basemaps;
                this.setState({
                    sourceLoaded: true
                });
            }).catch(err => {
                console.error(`load basemap gallery source error: ${err}`);
            });
        }
    }
    componentDidUpdate(prevProps) {
        if (this.state.apiLoaded && this.state.sourceLoaded && this.container) {
            if (this.basemapGallery) {
                // basemapGallery already created
                const isViewChanged = prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id);
                if (isViewChanged) {
                    // view changed
                    this.basemapGallery.view = this.props.jimuMapView.view;
                    this.basemapGallery.source = this.getFinalBasemapGallerySource(this.orgBasemaps);
                    this.basemapGallery.renderNow();
                }
            }
            else {
                // basemapGallery not created
                const source = this.getFinalBasemapGallerySource(this.orgBasemaps);
                this.basemapGallery = new this.BasemapGallery({
                    container: this.container,
                    view: this.props.jimuMapView.view,
                    source,
                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment, @typescript-eslint/prefer-ts-expect-error
                    // @ts-ignore
                    includeCurrentBasemap: true
                });
                this.props.jimuMapView.deleteJimuMapTool('BaseMap');
                this.props.jimuMapView.addJimuMapTool({
                    name: 'BaseMap',
                    instance: this.basemapGallery
                });
            }
        }
    }
    getFinalBasemapGallerySource(orgBasemaps) {
        const finalBasemaps = orgBasemaps.slice();
        const source = new this.LocalBasemapsSource({
            basemaps: finalBasemaps
        });
        return source;
    }
    componentWillUnmount() {
        this.__unmount = true;
        if (this.basemapGallery) {
            this.basemapGallery.destroy();
            this.basemapGallery = null;
            this.props.jimuMapView.deleteJimuMapTool('BaseMap');
        }
    }
    render() {
        if (this.props.isMobile) {
            return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'basemap-map-tool', ref: ref => { this.container = ref; }, style: { width: '100%', minHeight: '32px', maxWidth: 'none', maxHeight: 'none', overflowY: 'auto', position: 'relative' } }, !this.state.apiLoaded && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'exbmap-basetool-loader' })));
        }
        else {
            return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { ref: ref => { this.container = ref; }, style: { width: '250px', minHeight: '32px', position: 'relative' }, className: 'exbmap-ui-pc-expand-maxheight basemap-map-tool' }, !this.state.apiLoaded && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'exbmap-basetool-loader' })));
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/clear-action-data.tsx":
/*!**************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/clear-action-data.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ClearActionData)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/** @jsx jsx */





class ClearActionData extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_3__.BaseTool {
    constructor(props) {
        super(props);
        this.toolName = 'ClearActionData';
        this.onIconClick = () => { };
        this.onDropDownToggle = () => {
            this.setState({ isOpen: !this.state.isOpen });
        };
        this.onItemClick = (listItem, mapWidgetId) => {
            var _a, _b, _c;
            this.setState({ isOpen: false });
            const layerId = listItem.layerId;
            const mutableState = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().getStateValue([mapWidgetId]) || {};
            if (listItem.isAction) {
                // this item comes from ShowOnMap/AddToMap actions, remove it by mutableStoreManager.updateStateValue().
                const actionDataId = layerId;
                const showOnMapDatas = mutableState.showOnMapDatas;
                const addToMapDatas = mutableState.addToMapDatas;
                if (showOnMapDatas) {
                    delete showOnMapDatas[actionDataId];
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(mapWidgetId, 'showOnMapDatas', showOnMapDatas);
                }
                if (addToMapDatas && ((_a = addToMapDatas[actionDataId]) === null || _a === void 0 ? void 0 : _a.dataChangeType) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.DataChangeType.Created) {
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(mapWidgetId, `addToMapDatas.${actionDataId}.dataChangeType`, jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.DataChangeType.Remove);
                }
            }
            else {
                // this item comes from JimuLayerView.removeableByMapTool
                // just remove the layer from map, don't need to update removeableLayerIdsInfo (only update removeableLayerIdsInfo when calling JimuLayerView.setRemoveableByMapTool())
                const map = (_c = (_b = this.props.jimuMapView) === null || _b === void 0 ? void 0 : _b.view) === null || _c === void 0 ? void 0 : _c.map;
                if (map) {
                    const layer = map.findLayerById(layerId);
                    if (layer) {
                        map.remove(layer);
                    }
                }
            }
        };
        this.getContent = (mapWidgetId) => {
            const listItems = this.getListItems(mapWidgetId);
            const dropdownItems = listItems.map((listItem, index) => this.createDropdownItem(listItem, mapWidgetId, index));
            if (dropdownItems.length > 0) {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), title: this.getTitle() },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Dropdown, { direction: 'down', size: 'sm', toggle: this.onDropDownToggle, isOpen: this.state.isOpen },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DropdownButton, { icon: true, arrow: false, size: 'sm', type: 'default' },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.Icon, { size: 16, className: 'exbmap-ui-tool-icon', icon: this.getIcon().icon })),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DropdownMenu, null, dropdownItems))));
            }
            return null;
        };
        this.state = { isOpen: false };
    }
    static getIsNeedSetting() {
        return false;
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .jimu-dropdown {
        display: flex;
        .icon-btn {
          padding: 7px;
          border-radius: 0;
        }
      }
    `;
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'clearResults', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages.clearResults });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! jimu-icons/svg/outlined/editor/trash.svg */ "./jimu-icons/svg/outlined/editor/trash.svg"),
            onIconClick: () => {
                this.onIconClick();
            }
        };
    }
    getListItems(mapWidgetId) {
        const mapMutableState = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().getStateValue([mapWidgetId]) || {};
        const listItems1 = this.getListItemsByAddOrShowOnMapDatas(mapWidgetId, mapMutableState);
        const layerIds1 = listItems1.map(listItem => listItem.layerId);
        let listItems2 = this.getListItemsByRemoveableLayerIdsInfo(mapMutableState);
        // one layerId maybe both in showOnMapDatas/addToMapDatas and removeableLayerIdsInfo, so need to remove repeat items
        listItems2 = listItems2.filter(listItem => !layerIds1.includes(listItem.layerId));
        const result = listItems1.concat(listItems2);
        return result;
    }
    /**
     * Only show layers that crated by data actions. The layers maybe crated by showOnMap data action or addToMap data action.
     * @param mapWidgetId
     * @returns
     */
    getListItemsByAddOrShowOnMapDatas(mapWidgetId, mapMutableState) {
        const showOnMapDatas = (mapMutableState === null || mapMutableState === void 0 ? void 0 : mapMutableState.showOnMapDatas) || {};
        const addToMapDatas = (mapMutableState === null || mapMutableState === void 0 ? void 0 : mapMutableState.addToMapDatas) || {};
        const showOnMapDataInfos = Object.entries(showOnMapDatas).map(entry => {
            return {
                id: entry[0],
                title: entry[1].title,
                jimuMapViewId: entry[1].jimuMapViewId,
                mapWidgetId: entry[1].mapWidgetId,
                needToRemove: true,
                type: entry[1].type
            };
        });
        const addToMapDataInfos = Object.entries(addToMapDatas).map(entry => {
            return {
                id: entry[0],
                title: entry[1].title,
                jimuMapViewId: entry[1].jimuMapViewId,
                mapWidgetId: entry[1].mapWidgetId,
                needToRemove: entry[1].dataChangeType === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.DataChangeType.Created,
                type: entry[1].type
            };
        });
        const dataActionInfos = showOnMapDataInfos.concat(addToMapDataInfos).filter(dataInfo => {
            // There is no jimuMapViewId while generating the action data if the map widget hasn't been loaded in the another page/view,
            // use a default jimuMapViewId to show data.
            let jimuMapViewId = dataInfo.jimuMapViewId;
            if (!jimuMapViewId && dataInfo.mapWidgetId === mapWidgetId) {
                const jimuMapViewsInfo = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().jimuMapViewsInfo;
                jimuMapViewId = Object.keys(jimuMapViewsInfo || {}).find(viewId => jimuMapViewsInfo[viewId].mapWidgetId === mapWidgetId);
            }
            return (jimuMapViewId === this.props.jimuMapView.id && dataInfo.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.ActionType.DataAction && dataInfo.needToRemove);
        });
        const dataActionListItems = dataActionInfos.map((item) => {
            const listItem = {
                layerId: item.id,
                title: item.title,
                isAction: true
            };
            return listItem;
        });
        return dataActionListItems;
    }
    /**
     * Get list items by JimuLayerView.removeableByMapTool.
     * @param mutableState
     */
    getListItemsByRemoveableLayerIdsInfo(mutableState) {
        var _a;
        const listItems = [];
        const removeableLayerIdsInfo = (mutableState === null || mutableState === void 0 ? void 0 : mutableState.removeableLayerIdsInfo) || {};
        const jimuMapView = this.props.jimuMapView;
        if (jimuMapView) {
            const map = (_a = jimuMapView.view) === null || _a === void 0 ? void 0 : _a.map;
            if (map) {
                const removeableLayerIds = removeableLayerIdsInfo[jimuMapView.id] || [];
                removeableLayerIds.forEach(layerId => {
                    const layer = map.findLayerById(layerId);
                    if (layer) {
                        const title = layer.title || layerId;
                        const listItem = {
                            layerId,
                            title,
                            isAction: false
                        };
                        listItems.push(listItem);
                    }
                });
            }
        }
        return listItems;
    }
    createDropdownItem(listItem, mapWidgetId, index) {
        const key = `${listItem.layerId}-index-${index}`;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_2__.DropdownItem, { key: key, header: false, onClick: () => { this.onItemClick(listItem, mapWidgetId); } }, listItem.title));
    }
    getExpandPanel() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_4__.MultiSourceMapContext.Consumer, null, ({ mapWidgetId }) => (this.getContent(mapWidgetId))));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/compass.tsx":
/*!****************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/compass.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Compass)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");




class Compass extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Compass';
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'CompassLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.CompassLabel });
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(CompassInner, { jimuMapView: this.props.jimuMapView });
    }
}
class CompassInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Compass = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Compass']).then(modules => {
                [this.Compass] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.CompassBtn) {
                this.container.innerHTML = '';
            }
            this.CompassBtn = new this.Compass({
                container: this.container,
                view: this.props.jimuMapView.view
            });
            this.props.jimuMapView.deleteJimuMapTool('Compass');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Compass',
                instance: this.CompassBtn
            });
        }
    }
    componentWillUnmount() {
        if (this.CompassBtn) {
            this.CompassBtn.destroy();
            this.CompassBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Compass');
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'compass-map-tool', ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/extent-navigate.tsx":
/*!************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/extent-navigate.tsx ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ExtentNavigate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
/* harmony import */ var jimu_icons_outlined_directional_arrow_fat_left__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-fat-left */ "./jimu-icons/outlined/directional/arrow-fat-left.tsx");
/* harmony import */ var jimu_icons_outlined_directional_arrow_fat_right__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-icons/outlined/directional/arrow-fat-right */ "./jimu-icons/outlined/directional/arrow-fat-right.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");






class ExtentNavigate extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'ExtentNavigate';
        this.onViewStationary = () => {
            // view static, view.viewpointHistory maybe changed
            this.updateByCurrentView();
        };
        this.onClickPrevBtn = () => {
            if (!this.isPrevBtnEnabled()) {
                return;
            }
            this.view.viewpointIndex--;
            const viewpoint = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getViewpointInstanceFromHistory)(this.view, this.view.viewpointIndex);
            if (viewpoint) {
                this.view.goTo(viewpoint);
            }
            this.updateByCurrentView();
        };
        this.onClickNextBtn = () => {
            if (!this.isNextBtnEnabled()) {
                return;
            }
            this.view.viewpointIndex++;
            const viewpoint = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getViewpointInstanceFromHistory)(this.view, this.view.viewpointIndex);
            if (viewpoint) {
                this.view.goTo(viewpoint);
            }
            this.updateByCurrentView();
        };
    }
    getTitle() {
        return 'ExtentNavigate';
    }
    getIcon() {
        return {
            icon: null
        };
    }
    getExtendCssStyle() {
        return `
      .extent-navigate-btn {
        width: 32px;
        height: 32px;
        text-align: center;
        line-height: 32px;
        cursor: default;
      }

      .extent-navigate-btn.extent-navigate-btn-disabled {
        color: grey;
      }

      .extent-navigate-prev-btn {
        border-bottom: 1px solid #ccc;
      }
    `;
    }
    getExpandPanel() {
        const isPrevBtnDisabled = !this.isPrevBtnEnabled();
        const isNextBtnDisabled = !this.isNextBtnEnabled();
        const prevBtnClassName = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('esri-widget--button extent-navigate-btn extent-navigate-prev-btn', { 'extent-navigate-btn-disabled': isPrevBtnDisabled });
        const nextBtnClassName = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('esri-widget--button extent-navigate-btn extent-navigate-next-btn', { 'extent-navigate-btn-disabled': isNextBtnDisabled });
        const prevExtentTitle = this.formatMessage('prevExtent');
        const nextExtentTitle = this.formatMessage('nextExtent');
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", null,
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: prevBtnClassName, title: prevExtentTitle, onClick: this.onClickPrevBtn },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_arrow_fat_left__WEBPACK_IMPORTED_MODULE_3__.ArrowFatLeftOutlined, null)),
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: nextBtnClassName, title: nextExtentTitle, onClick: this.onClickNextBtn },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_icons_outlined_directional_arrow_fat_right__WEBPACK_IMPORTED_MODULE_4__.ArrowFatRightOutlined, null))));
    }
    formatMessage(strId) {
        return this.props.intl.formatMessage({ id: strId, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_5__.defaultMessages[strId] });
    }
    componentDidMount() {
        this.bindView();
    }
    componentDidUpdate() {
        this.bindView();
    }
    bindView() {
        var _a;
        const view = (_a = this.props.jimuMapView) === null || _a === void 0 ? void 0 : _a.view;
        if (this.view !== view) {
            // active view changes
            if (this.view) {
                this.view.stationaryCallback = null;
            }
            this.view = view;
            if (this.view) {
                this.view.stationaryCallback = this.onViewStationary;
            }
            this.updateByCurrentView();
        }
    }
    updateByCurrentView() {
        this.forceUpdate();
    }
    isPrevBtnEnabled() {
        return this.view && this.view.viewpointHistory.length >= 2 && this.view.viewpointIndex >= 1;
    }
    isNextBtnEnabled() {
        return this.view && this.view.viewpointHistory.length >= 2 && this.view.viewpointIndex < (this.view.viewpointHistory.length - 1);
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/fullscreen.tsx":
/*!*******************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/fullscreen.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Fullscreen)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");




class Fullscreen extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Fullscreen';
        this.isFullScreen = false;
        this.fullScreenMap = () => { };
        this.getContent = (fullScreenMap, isFullScreen) => {
            this.fullScreenMap = fullScreenMap;
            this.isFullScreen = isFullScreen;
            return super.render();
        };
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'FullScreenLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.FullScreenLabel });
    }
    getIcon() {
        return {
            icon: this.isFullScreen ? __webpack_require__(/*! ../assets/icons/exit-full-screen.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exit-full-screen.svg") : __webpack_require__(/*! ../assets/icons/full-screen.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/full-screen.svg"),
            onIconClick: (evt) => {
                this.fullScreenMap();
            }
        };
    }
    getExpandPanel() {
        return null;
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_2__.MultiSourceMapContext.Consumer, null, ({ fullScreenMap, isFullScreen }) => (this.getContent(fullScreenMap, isFullScreen))));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/home.tsx":
/*!*************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/home.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Home)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





class Home extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Home';
        this.getHomeContent = (initialMapState) => {
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(HomeInner, { jimuMapView: this.props.jimuMapView, initialMapState: initialMapState });
        };
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'HomeLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.HomeLabel });
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        // return <HomeInner jimuMapView={this.props.jimuMapView}></HomeInner>;
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_4__.MultiSourceMapContext.Consumer, null, ({ initialMapState }) => (this.getHomeContent(initialMapState))));
    }
}
class HomeInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Home = null;
        this.generateViewPointFromInitialMapState = (initialMapState) => {
            if (initialMapState.viewType === '2d') {
                return new this.Viewpoint({
                    targetGeometry: this.Extent.fromJSON(initialMapState.extent),
                    rotation: initialMapState.rotation
                });
            }
            else {
                return this.Viewpoint.fromJSON(initialMapState.viewPoint);
            }
        };
        this.homeBtnGoToOverride = (view, goToParams) => __awaiter(this, void 0, void 0, function* () {
            const is2DView = view.type === '2d';
            // snapToZoom: true means integer zoom, false means float zoom
            // We need to make sure goTo the integer zoom when click home btn.
            let needToRestoreSnapToZoomToFalse = false;
            if (is2DView && view.constraints && !view.constraints.snapToZoom) {
                view.constraints.snapToZoom = true;
                needToRestoreSnapToZoomToFalse = true;
            }
            try {
                yield view.goTo(goToParams.target, goToParams.options);
            }
            catch (e) {
                console.error('home btn goto error', e);
            }
            // When goTo is done, we need to reset to float zoom to get the best synchronization between two map widgets.
            if (is2DView && view.constraints && needToRestoreSnapToZoomToFalse) {
                view.constraints.snapToZoom = false;
            }
        });
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Home',
                'esri/geometry/Extent',
                'esri/Viewpoint']).then(modules => {
                [this.Home, this.Extent, this.Viewpoint] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate(prevProps) {
        var _a;
        if (!this.state.apiLoaded || !this.container) {
            return;
        }
        const currView = ((_a = this.props.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) || null;
        // check initialMapState change or not
        // sometimes prevProps.initialMapState is undefined and props.initialMapState is null, so we need to convert undefined to null
        const preInitialMapState = (prevProps === null || prevProps === void 0 ? void 0 : prevProps.initialMapState) || null;
        const currInitialMapState = this.props.initialMapState || null;
        const isInitialMapStateChanged = preInitialMapState !== currInitialMapState;
        // destroy current view when view changed or initialMapState changed
        if (this.homeBtn && (this.homeBtn.view !== currView || isInitialMapStateChanged)) {
            this.destroyHomeBtn();
        }
        // create new home btn if this.homeBtn is empty and currView is not empty
        if (!this.homeBtn && currView) {
            let initViewpoint = this.props.initialMapState
                ? this.generateViewPointFromInitialMapState(this.props.initialMapState)
                : this.props.jimuMapView.view.map.initialViewProperties.viewpoint;
            if (initViewpoint) {
                initViewpoint = initViewpoint.clone();
            }
            const homeBtnContainer = document.createElement('div');
            this.container.appendChild(homeBtnContainer);
            this.homeBtn = new this.Home({
                container: homeBtnContainer,
                view: this.props.jimuMapView.view,
                viewpoint: initViewpoint,
                goToOverride: this.homeBtnGoToOverride
            });
            this.props.jimuMapView.deleteJimuMapTool('Home');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Home',
                instance: this.homeBtn
            });
        }
        if (isInitialMapStateChanged) {
            // initialMapState change
            if (currView && this.homeBtn) {
                // const cloneViewpoint = this.homeBtn.viewpoint.clone()
                // set currView.viewpoint to cloneViewpoint directly not work with error 'invalid scale value of 0' if the init homeBtan.viewpoint.scale is 0, so use view.goTo() instead
                // currView.viewpoint = cloneViewpoint
                // currView.goTo(cloneViewpoint, {
                //   animate: false
                // })
                this.homeBtn.go();
            }
        }
    }
    destroyHomeBtn() {
        if (this.homeBtn) {
            // this.homeBtn.destroy() will remove this.homeBtn.container from dom tree and let this.homeBtn.container.parentNode be null
            this.homeBtn.destroy();
            this.homeBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Home');
        }
        if (this.container) {
            this.container.innerHTML = '';
        }
    }
    componentWillUnmount() {
        this.destroyHomeBtn();
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'home-map-tool', ref: ref => { if (!this.container) {
                this.container = ref;
            } } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/layers.tsx":
/*!***************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/layers.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Layers)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");




class Layers extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor(props) {
        super(props);
        this.toolName = 'Layers';
        this.handleTabIndexChange = (activeTabIndex) => {
            this.setState({
                activeTabIndex: activeTabIndex
            });
        };
        this.handleKeyDown = (e, index) => {
            if (e.key === 'Enter' || e.key === ' ') {
                this.handleTabIndexChange(index);
            }
        };
        this.state = {
            activeTabIndex: 0
        };
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'LayersLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.LayersLabel });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../assets/icons/layerlist.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/layerlist.svg")
        };
    }
    getExpandPanel() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { style: { width: this.props.isMobile ? '100%' : '250px', minHeight: '32px', position: 'relative' }, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)({ 'exbmap-ui-pc-expand-maxheight': !this.props.isMobile }) },
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Nav, { tabs: true },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.NavItem, null,
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.NavLink, { active: this.state.activeTabIndex === 0, onClick: () => { this.handleTabIndexChange(0); }, onKeyDown: e => { this.handleKeyDown(e, 0); } }, this.props.intl.formatMessage({ id: 'LayersLabelLayer', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.LayersLabelLayer }))),
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.NavItem, null,
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.NavLink, { active: this.state.activeTabIndex === 1, onClick: () => { this.handleTabIndexChange(1); }, onKeyDown: e => { this.handleKeyDown(e, 1); } }, this.props.intl.formatMessage({ id: 'LayersLabelLegend', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.LayersLabelLegend })))),
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'mt-1' }),
            this.state.activeTabIndex === 0 && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(LayerListInner, { jimuMapView: this.props.jimuMapView }),
            this.state.activeTabIndex === 1 && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(LegendInner, { jimuMapView: this.props.jimuMapView })));
    }
}
class LayerListInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.LayerList = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/LayerList']).then(modules => {
                [this.LayerList] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate(prevProps) {
        if (this.state.apiLoaded && this.container) {
            if (prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id)) {
                if (this.LayerListBtn) {
                    this.LayerListBtn.view = this.props.jimuMapView.view;
                    this.LayerListBtn.renderNow();
                }
            }
            else {
                this.LayerListBtn = new this.LayerList({
                    container: this.container,
                    view: this.props.jimuMapView.view
                });
                this.props.jimuMapView.deleteJimuMapTool('LayerList');
                this.props.jimuMapView.addJimuMapTool({
                    name: 'LayerList',
                    instance: this.LayerListBtn
                });
            }
        }
    }
    componentWillUnmount() {
        if (this.LayerListBtn) {
            this.LayerListBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('LayerList');
        }
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'layers-map-tool', ref: ref => { this.container = ref; }, style: { width: '100%', minHeight: '32px', position: 'relative' } }, !this.state.apiLoaded && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'exbmap-basetool-loader' })));
    }
}
class LegendInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Legend = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Legend']).then(modules => {
                [this.Legend] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate(prevProps) {
        if (this.state.apiLoaded && this.container) {
            if (prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id)) {
                if (this.LegendBtn) {
                    this.LegendBtn.view = this.props.jimuMapView.view;
                    this.LegendBtn.renderNow();
                }
            }
            else {
                this.LegendBtn = new this.Legend({
                    container: this.container,
                    view: this.props.jimuMapView.view
                });
                this.props.jimuMapView.deleteJimuMapTool('Legend');
                this.props.jimuMapView.addJimuMapTool({
                    name: 'Legend',
                    instance: this.LegendBtn
                });
            }
        }
    }
    componentWillUnmount() {
        if (this.LegendBtn) {
            this.LegendBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Legend');
        }
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { ref: ref => { this.container = ref; }, style: { width: '100%', minHeight: '32px', position: 'relative' } }, !this.state.apiLoaded && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'exbmap-basetool-loader' })));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/locate.tsx":
/*!***************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/locate.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Locate)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");



class Locate extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Locate';
    }
    getTitle() {
        return 'Locate';
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(LocateInner, { jimuMapView: this.props.jimuMapView });
    }
}
class LocateInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Locate = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Locate']).then(modules => {
                [this.Locate] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.LocateBtn) {
                this.container.innerHTML = '';
            }
            this.LocateBtn = new this.Locate({
                container: this.container,
                view: this.props.jimuMapView.view
            });
            this.props.jimuMapView.deleteJimuMapTool('Locate');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Locate',
                instance: this.LocateBtn
            });
        }
    }
    componentWillUnmount() {
        if (this.LocateBtn) {
            this.LocateBtn.destroy();
            this.LocateBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Locate');
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'esri-widget--button locate-map-tool', ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/mapswitch.tsx":
/*!******************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/mapswitch.tsx ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ MapSwitch)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/* harmony import */ var _components_map_thumb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/map-thumb */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/map-thumb.tsx");
/** @jsx jsx */





class MapSwitch extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'MapSwitch';
        this.switchMap = () => { };
        this.handleKeyDown = (e, onClick) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e === null || e === void 0 ? void 0 : e.preventDefault();
                onClick();
            }
        };
        this.getContent = (isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap, mapWidgetId, theme) => {
            const onClick = () => {
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.requestAutoControlMapWidget(mapWidgetId, mapWidgetId));
                switchMap();
            };
            if (isShowMapSwitchBtn) {
                if (this.props.isMobile) {
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-ui-tool esri-widget--button', onClick: onClick, role: 'button', tabIndex: 0, onKeyDown: e => { this.handleKeyDown(e, onClick); }, "aria-label": this.props.intl.formatMessage({ id: 'SwitchMap', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SwitchMap }) },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: this.getIcon().icon })));
                }
                else {
                    const dsJsons = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.dataSources;
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mapswitch-map-tool', css: this.getStyle(), onClick: onClick, role: 'button', tabIndex: 0, onKeyDown: e => { this.handleKeyDown(e, onClick); }, "aria-label": this.props.intl.formatMessage({ id: 'SwitchMap', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SwitchMap }) },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { title: dsJsons[dataSourceIds[0]] ? dsJsons[dataSourceIds[0]].label : null, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('mapthumb-item', { front: dataSourceIds[0] !== activeDataSourceId }, { back: dataSourceIds[0] === activeDataSourceId }) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_map_thumb__WEBPACK_IMPORTED_MODULE_4__["default"], { mapItemId: dsJsons[dataSourceIds[0]] ? dsJsons[dataSourceIds[0]].itemId : null, portUrl: dsJsons[dataSourceIds[0]] ? dsJsons[dataSourceIds[0]].portalUrl : null, theme: theme })),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { title: dsJsons[dataSourceIds[1]] ? dsJsons[dataSourceIds[1]].label : null, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('mapthumb-item', { front: dataSourceIds[1] !== activeDataSourceId }, { back: dataSourceIds[1] === activeDataSourceId }) },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_map_thumb__WEBPACK_IMPORTED_MODULE_4__["default"], { mapItemId: dsJsons[dataSourceIds[1]] ? dsJsons[dataSourceIds[1]].itemId : null, portUrl: dsJsons[dataSourceIds[1]] ? dsJsons[dataSourceIds[1]].portalUrl : null, theme: theme }))));
                }
            }
            else {
                return null;
            }
        };
        this.getIconContent = (isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap) => {
            if (isShowMapSwitchBtn) {
                this.switchMap = switchMap;
                return super.render();
            }
            else {
                return null;
            }
        };
    }
    static getIsNeedSetting() {
        return false;
    }
    static isAvailable(toolShellProps) {
        if (toolShellProps.isMobile) {
            const widgetId = toolShellProps.mapWidgetId;
            if (widgetId) {
                const widgetInfo = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.widgets[widgetId];
                if (widgetInfo) {
                    return widgetInfo.useDataSources && widgetInfo.useDataSources.length >= 2;
                }
            }
            return false;
        }
        // Always return true for pc layout because false will let SelectState-FullScreen-Container in wroing position.
        return true;
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(68)};
      height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(52)};
      cursor: pointer;
      position: relative;

      .mapthumb-item {
        position: absolute;
        width: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(64)};
        height: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(48)};
        transition: bottom 0.5s, left 0.5s, top 0.5s, right 0.5s, z-index 0.5s;
      }

      .front {
        z-index: 1;
        bottom: 0;
        left: 0;
      }

      .back {
        z-index: 0;
        top: 0;
        right: 0;
      }
    `;
    }
    getTitle() {
        return 'MapSwitch';
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../assets/icons/exchange.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/exchange.svg"),
            onIconClick: () => {
                this.switchMap();
            }
        };
    }
    getExpandPanel() {
        if (this.props.toolJson.isOnlyExpanded) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_3__.MultiSourceMapContext.Consumer, null, ({ isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap, mapWidgetId, theme }) => (this.getContent(isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap, mapWidgetId, theme))));
        }
        else {
            return null;
        }
    }
    render() {
        if (this.props.toolJson.isOnlyExpanded) {
            return super.render();
            // In fact, it never goes here.
        }
        else {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_3__.MultiSourceMapContext.Consumer, null, ({ isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap }) => (this.getIconContent(isShowMapSwitchBtn, dataSourceIds, activeDataSourceId, switchMap))));
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/measure.tsx":
/*!****************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/measure.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Measure)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");




class Measure extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__.BaseTool {
    constructor(props) {
        super(props);
        this.toolName = 'Measure';
        this.measureModules2D = [{
                name: 'Line',
                title: 'Line',
                activeTool: 'distance',
                src: __webpack_require__(/*! ../assets/icons/measure-distance.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-distance.svg")
            }, {
                name: 'Polygon',
                title: 'Polygon',
                activeTool: 'area',
                src: __webpack_require__(/*! ../assets/icons/measure-area.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-area.svg")
            }];
        this.measureModules3D = [{
                name: 'Line',
                title: 'Line',
                activeTool: 'direct-line',
                src: __webpack_require__(/*! ../assets/icons/measure-distance.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-distance.svg")
            }, {
                name: 'Polygon',
                title: 'Polygon',
                activeTool: 'area',
                src: __webpack_require__(/*! ../assets/icons/measure-area.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure-area.svg")
            }];
        this.destroy = () => {
            if (this.state.measureInstance && !this.state.measureInstance.destroyed) {
                this.state.measureInstance.destroy();
                this.setState({
                    measureInstance: null,
                    activeTabIndex: 0
                });
            }
        };
        this.handleMeasurceInstanceCreated = (measureInstance) => {
            this.setState({
                measureInstance: measureInstance
            });
        };
        this.onTabClick = (index) => {
            if (this.state.activeTabIndex === index) {
                return;
            }
            this.state.measureInstance.clear();
            this.setState({ activeTabIndex: index });
            if (index === 0) {
                this.state.measureInstance.activeTool = this.props.jimuMapView.view.type === '2d' ? 'distance' : 'direct-line';
            }
            else if (index === 1) {
                this.state.measureInstance.activeTool = 'area';
            }
        };
        this.handleKeyDown = (e, index) => {
            if (e.key === 'Enter' || e.key === ' ') {
                this.onTabClick(index);
            }
        };
        this.onRequestClosePanel = () => {
            if (this.props.activeToolInfo.activeToolName === this.toolName) {
                this.props.onActiveToolInfoChange(null);
            }
        };
        this.onClosePanel = () => {
            this.destroy();
        };
        this.onShowPanel = () => {
            if (this.state.measureInstance) {
                if (this.state.activeTabIndex === 0) {
                    this.state.measureInstance.activeTool = this.props.jimuMapView.view.type === '2d' ? 'distance' : 'direct-line';
                }
                else if (this.state.activeTabIndex === 1) {
                    this.state.measureInstance.activeTool = 'area';
                }
            }
        };
        this.getNavTab = () => {
            if (this.props.jimuMapView.view.type === '2d') {
                return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Nav, { tabs: true }, this.measureModules2D.map((module, index) => {
                    const tabTitle = index === 0 ? 'drawModeLine' : 'drawModePolygon';
                    return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.NavItem, { key: index },
                        jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.NavLink, { active: this.state.activeTabIndex === index, ref: ref => { this.state.activeTabIndex === index && (this.activeTabRef = ref); }, onClick: () => { this.onTabClick(index); }, onKeyDown: e => { this.handleKeyDown(e, index); }, "aria-label": this.props.intl.formatMessage({ id: `${tabTitle}`, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages[tabTitle] }) },
                            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'm-0', icon: module.src }))));
                })));
            }
            else if (this.props.jimuMapView.view.type === '3d') {
                return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Nav, { tabs: true }, this.measureModules3D.map((module, index) => {
                    const tabTitle = index === 0 ? 'drawModeLine' : 'drawModePolygon';
                    return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.NavItem, { key: index },
                        jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.NavLink, { active: this.state.activeTabIndex === index, ref: ref => { this.state.activeTabIndex === index && (this.activeTabRef = ref); }, onClick: () => { this.onTabClick(index); }, onKeyDown: e => { this.handleKeyDown(e, index); }, "aria-label": this.props.intl.formatMessage({ id: `${tabTitle}`, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages[tabTitle] }) },
                            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'm-0', icon: module.src }))));
                })));
            }
            else {
                return null;
            }
        };
        this.getMeasureModule = () => {
            if (this.props.jimuMapView.view.type === '2d') {
                return this.measureModules2D[this.state.activeTabIndex];
            }
            else {
                return this.measureModules3D[this.state.activeTabIndex];
            }
        };
        this.state = {
            activeTabIndex: 0,
            measureInstance: null
        };
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'MeasureLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.MeasureLabel });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../assets/icons/measure.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/measure.svg")
        };
    }
    focusDefaultElement() {
        var _a;
        (_a = this.activeTabRef) === null || _a === void 0 ? void 0 : _a.focus();
    }
    getExpandPanel() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { style: { width: this.props.isMobile ? '100%' : '250px', position: 'relative' }, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)({ 'exbmap-ui-pc-expand-maxheight': !this.props.isMobile }) },
            this.getNavTab(),
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(MeasureInner, { mapWidgetId: this.props.mapWidgetId, activeTabIndex: this.state.activeTabIndex, jimuMapView: this.props.jimuMapView, measureModule: this.getMeasureModule(), measureInstance: this.state.measureInstance, onMeasurceInstanceCreated: this.handleMeasurceInstanceCreated, autoControlWidgetId: this.props.autoControlWidgetId, onRequestClosePanel: this.onRequestClosePanel })));
    }
}
class MeasureInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.MeasureInstance = null;
        this.toolName = 'measurement';
        this.checkContainer = () => {
            if (this.container.style.opacity === '0' || this.container.style.opacity === 0) {
                this.container.style.opacity = 1;
                this.container.style.height = '';
            }
        };
        this.id = `${this.props.mapWidgetId}-measure-tool`;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_3__.loadArcGISJSAPIModules)(['esri/widgets/Measurement']).then(modules => {
                [this.MeasureClass] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate(prevProps) {
        if (this.state.apiLoaded && this.parentContainer && this.container) {
            if (!this.props.measureInstance) {
                // crate measure isntance here
                const tempInstance = new this.MeasureClass({
                    container: this.container,
                    view: this.props.jimuMapView.view
                });
                tempInstance.activeTool = this.props.measureModule.activeTool;
                this.setCurrentJimuMapView(this.props.jimuMapView);
                this.currentJimuMapView.deleteJimuMapTool(this.toolName);
                this.currentJimuMapView.addJimuMapTool({
                    name: this.toolName,
                    instance: tempInstance
                });
                this.props.onMeasurceInstanceCreated(tempInstance);
                const action = jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.requestAutoControlMapWidget(this.props.mapWidgetId, this.id);
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(action);
            }
            else {
                const newJimuMapView = this.props.jimuMapView;
                if (this.props.measureInstance.view !== newJimuMapView.view) {
                    // map view changed by switch
                    this.restoreClickHighlightEnabledForCurrentJimuMapView();
                    this.setCurrentJimuMapView(newJimuMapView);
                    this.props.measureInstance.clear();
                    this.props.measureInstance.view = newJimuMapView.view;
                    // @ts-expect-error
                    this.props.measureInstance.activeTool = this.props.measureModule.activeTool;
                }
            }
            this.checkContainer();
        }
        // check if autoControlWidgetId changed
        const prevAutoControlWidgetId = (prevProps === null || prevProps === void 0 ? void 0 : prevProps.autoControlWidgetId) || '';
        if (prevAutoControlWidgetId === this.id && this.props.autoControlWidgetId !== this.id) {
            // measure is from active to inactive, destroy MeasureInner
            this.props.onRequestClosePanel();
        }
    }
    componentWillUnmount() {
        this.restoreClickHighlightEnabledForCurrentJimuMapView();
        if (this.props.autoControlWidgetId === this.id) {
            const action = jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.releaseAutoControlMapWidget(this.props.mapWidgetId);
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().dispatch(action);
        }
    }
    setCurrentJimuMapView(jimuMapView) {
        this.currentJimuMapView = jimuMapView;
        this.originalClickHighlightEnabled = jimuMapView.isClickHighlightEnabled();
        // disable click highlight to avoid conflict with clicking-select
        this.currentJimuMapView.disableClickHighlight();
    }
    restoreClickHighlightEnabledForCurrentJimuMapView() {
        if (this.currentJimuMapView) {
            if (this.originalClickHighlightEnabled) {
                this.currentJimuMapView.enableClickHighlight();
            }
            else {
                this.currentJimuMapView.disableClickHighlight();
            }
        }
    }
    reload() {
        if (this.container.childNodes && this.container.childNodes[0]) {
            this.container.style.opacity = 0;
            this.container.style.height = '35px';
        }
        //this.setState({
        //  apiLoaded: false
        //}, () => {
        //  loadArcGISJSAPIModules(['esri/widgets/Measurement']).then(modules => {
        //    [this.MeasureClass] = modules
        //    this.setState({
        //      apiLoaded: true
        //    })
        //  })
        //})
    }
    render() {
        return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'w-100', style: { width: '250px', position: 'relative', minHeight: '32px' }, ref: ref => { this.parentContainer = ref; } },
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'measure-container measure-map-tool', ref: ref => { this.container = ref; } }),
            !this.state.apiLoaded && jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'exbmap-basetool-loader' })));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/navigation.tsx":
/*!*******************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/navigation.tsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Navigation)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");



class Navigation extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Navigation';
    }
    getTitle() {
        return 'Navigation';
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(NavigationInner, { jimuMapView: this.props.jimuMapView });
    }
    /**
     * Navigation only supports scene view, so ScaleBarTool.isAvailable() will return false if the map is map view.
     */
    static isAvailable(toolShellProps) {
        var _a, _b;
        return ((_b = (_a = toolShellProps.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) === null || _b === void 0 ? void 0 : _b.type) === '3d';
    }
}
class NavigationInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Navigation = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/NavigationToggle']).then(modules => {
                [this.Navigation] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.NavigationBtn) {
                this.container.innerHTML = '';
            }
            this.NavigationBtn = new this.Navigation({
                container: this.container,
                view: this.props.jimuMapView.view
            });
            this.props.jimuMapView.deleteJimuMapTool('Navigation');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Navigation',
                instance: this.NavigationBtn
            });
        }
    }
    componentWillUnmount() {
        if (this.NavigationBtn) {
            this.NavigationBtn.destroy();
            this.NavigationBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Navigation');
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'navigation-map-tool', ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/scalebar.tsx":
/*!*****************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/scalebar.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ScaleBar)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");



class ScaleBar extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'ScaleBar';
    }
    getTitle() {
        return 'ScaleBar';
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(ScaleBarInner, { jimuMapView: this.props.jimuMapView });
    }
    /**
     * ScaleBar only supports map view, so ScaleBarTool.isAvailable() will return false if the map is scene view.
     */
    static isAvailable(toolShellProps) {
        var _a, _b;
        return ((_b = (_a = toolShellProps.jimuMapView) === null || _a === void 0 ? void 0 : _a.view) === null || _b === void 0 ? void 0 : _b.type) === '2d';
    }
}
class ScaleBarInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.ScaleBar = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/ScaleBar']).then(modules => {
                [this.ScaleBar] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.ScaleBarBtn) {
                this.container.innerHTML = '';
            }
            let rawUnit = '';
            const appState = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
            if (appState) {
                if (appState.user && appState.user.units) {
                    rawUnit = appState.user.units;
                }
                else if (appState.portalSelf && appState.portalSelf.units) {
                    rawUnit = appState.portalSelf.units;
                }
            }
            let scaleBarUnit = null;
            // metric => metric
            // english => imperial
            // '' => dual
            if (rawUnit === 'metric') {
                scaleBarUnit = 'metric';
            }
            else if (rawUnit === 'english') {
                scaleBarUnit = 'imperial';
            }
            else {
                scaleBarUnit = 'dual';
            }
            this.ScaleBarBtn = new this.ScaleBar({
                container: this.container,
                view: this.props.jimuMapView.view,
                unit: scaleBarUnit
            });
            this.props.jimuMapView.deleteJimuMapTool('ScaleBar');
            this.props.jimuMapView.addJimuMapTool({
                name: 'ScaleBar',
                instance: this.ScaleBarBtn
            });
        }
    }
    componentWillUnmount() {
        if (this.ScaleBarBtn) {
            this.ScaleBarBtn.destroy();
            this.ScaleBarBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('ScaleBar');
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'scalebar-map-tool', ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/search.tsx":
/*!***************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/search.tsx ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Search)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */




class Search extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Search';
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'SearchLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.SearchLabel });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../assets/icons/search.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/search.svg")
        };
    }
    getExpandPanel() {
        if (this.props.isMobile) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { minHeight: '32px', position: 'relative', width: '100%' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(SearchInner, { jimuMapView: this.props.jimuMapView, mapWidgetId: this.props.mapWidgetId })));
        }
        else {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { minWidth: '250px', minHeight: '32px', position: 'relative' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(SearchInner, { jimuMapView: this.props.jimuMapView, mapWidgetId: this.props.mapWidgetId })));
        }
    }
}
class SearchInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Search = null;
        this.Portal = null;
        this.state = {
            apiLoaded: false
        };
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      /* border: solid 1px rgba(110,110,110,0.3); */
    `;
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Search', 'esri/portal/Portal']).then(modules => {
                [this.Search, this.Portal] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.SearchBtn) {
                const containerParent = this.container.parentElement;
                this.SearchBtn.destroy();
                this.SearchBtn = null;
                if (!this.container.parentElement && containerParent) {
                    containerParent.appendChild(this.container);
                }
                this.container.innerHTML = '';
            }
            this.SearchBtn = new this.Search({
                container: this.container,
                view: this.props.jimuMapView.view,
                portal: new this.Portal({
                    url: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().portalUrl
                })
            });
            this.props.jimuMapView.deleteJimuMapTool('Search');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Search',
                instance: this.SearchBtn
            });
            this.SearchBtn.on('select-result', (event) => {
                if (!event.result.feature.layer) {
                    const geometry = event.result.feature.geometry.toJSON();
                    jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.LocationChangeMessage(this.props.mapWidgetId, geometry));
                }
                else {
                    const geometry = event.result.feature.geometry;
                    if (geometry.type === 'point') {
                        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.LocationChangeMessage(this.props.mapWidgetId, geometry.toJSON()));
                    }
                    else {
                        const point = geometry.extent.center;
                        jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageManager.getInstance().publishMessage(new jimu_core__WEBPACK_IMPORTED_MODULE_0__.LocationChangeMessage(this.props.mapWidgetId, point.toJSON()));
                    }
                }
            });
        }
    }
    componentWillUnmount() {
        if (this.SearchBtn) {
            this.SearchBtn.destroy();
            this.SearchBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Search');
        }
    }
    render() {
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100 search-map-tool', ref: ref => { this.container = ref; } }, !this.state.apiLoaded && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'exbmap-basetool-loader' })));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/index.tsx":
/*!*********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/index.tsx ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Select)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _select_pc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./select-pc */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-pc.tsx");
/* harmony import */ var _select_mobile__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./select-mobile */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-mobile.tsx");
/** @jsx jsx */





class Select extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor(props) {
        super(props);
        this.toolName = 'Select';
        this.state = {};
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'SelectLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_2__.defaultMessages.SelectLabel });
    }
    getIcon() {
        return {
            icon: __webpack_require__(/*! ../../assets/icons/select-tool/select-rectangle.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-rectangle.svg")
        };
    }
    getExpandPanel() {
        if (this.props.isMobile) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_mobile__WEBPACK_IMPORTED_MODULE_4__.SelectMobileTool, { isActive: this.toolName === (this.props.activeToolInfo && this.props.activeToolInfo.activeToolName), activeToolInfo: this.props.activeToolInfo, toolName: this.toolName, onActiveToolInfoChange: this.props.onActiveToolInfoChange, _onIconClick: () => { this._onIconClick(); }, theme: this.props.theme, intl: this.props.intl, jimuMapView: this.props.jimuMapView }));
        }
        else {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_pc__WEBPACK_IMPORTED_MODULE_3__.SelectPCTool, { theme: this.props.theme, intl: this.props.intl, jimuMapView: this.props.jimuMapView, activeToolInfo: this.props.activeToolInfo, toolName: this.toolName, onActiveToolInfoChange: this.props.onActiveToolInfoChange }));
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-mobile.tsx":
/*!*****************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-mobile.tsx ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectMobileTool: () => (/* binding */ SelectMobileTool)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/multisourcemap-context */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap-context.ts");
/* harmony import */ var _select_progress__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./select-progress */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-progress.tsx");
/** @jsx jsx */





const defaultPointSymbol = {
    style: 'esriSMSCircle',
    color: [0, 0, 128, 128],
    name: 'Circle',
    outline: {
        color: [0, 0, 128, 255],
        width: 1
    },
    type: 'esriSMS',
    size: 18
};
const defaultPolylineSymbol = {
    tags: ['solid'],
    title: 'Blue Thin',
    style: 'esriSLSSolid',
    color: [79, 129, 189, 255],
    width: 3,
    name: 'Blue 1',
    type: 'esriSLS'
};
const defaultPolygonSymbol = {
    style: 'esriSFSSolid',
    color: [79, 129, 189, 77],
    type: 'esriSFS',
    outline: {
        style: 'esriSLSSolid',
        color: [54, 93, 141, 255],
        width: 1.5,
        type: 'esriSLS'
    }
};
const SelectRectangleIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-rectangle.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-rectangle.svg");
const SelectLassoIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-lasso.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-lasso.svg");
const SelectCircleIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-circle.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-circle.svg");
const SelectLineIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-line.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-line.svg");
const SelectPointIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-point.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-point.svg");
const SelectMoreIcon = __webpack_require__(/*! jimu-ui/lib/icons/more-16.svg */ "./jimu-ui/lib/icons/more-16.svg");
class SelectMobileTool extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        var _a, _b;
        super(props);
        this.jsonUtils = null;
        this.currentActiveTool = 'rectangle';
        this.onJimuMapViewSelectProgressChange = (progress) => {
            this.setState({
                selectProgress: progress
            });
        };
        this.onKeyDown = (event) => {
            if (event.key === 'Shift') {
                this.lastShiftKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: true
                };
            }
            else if ((this.isMac && event.key === 'Meta') || (!this.isMac && event.key === 'Control')) {
                this.lastCtrlKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: true
                };
            }
        };
        this.onKeyUp = (event) => {
            if (event.key === 'Shift') {
                this.lastShiftKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: false
                };
            }
            else if ((this.isMac && event.key === 'Meta') || (!this.isMac && event.key === 'Control')) {
                this.lastCtrlKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: false
                };
            }
        };
        this.setCurrentSelectType = (currentSelectType) => {
            this.initialSketchTool();
            if (currentSelectType === this.state.currentSelectType) {
                return;
            }
            if (currentSelectType === 'Point') {
                if (this.props.isActive) {
                    this.setActiveToolForSketchViewModel('point');
                }
                this.currentActiveTool = 'point';
            }
            if (currentSelectType === 'Rectangle') {
                if (this.props.isActive) {
                    this.setActiveToolForSketchViewModel('rectangle');
                }
                this.currentActiveTool = 'rectangle';
            }
            if (currentSelectType === 'Lasso') {
                if (this.props.isActive) {
                    this.setActiveToolForSketchViewModel('polygon');
                }
                this.currentActiveTool = 'polygon';
            }
            if (currentSelectType === 'Circle') {
                if (this.props.isActive) {
                    this.setActiveToolForSketchViewModel('circle');
                }
                this.currentActiveTool = 'circle';
            }
            if (currentSelectType === 'Line') {
                if (this.props.isActive) {
                    this.setActiveToolForSketchViewModel('polyline');
                }
                this.currentActiveTool = 'polyline';
            }
            this.setState({
                currentSelectType: currentSelectType
            }, () => {
                if (!this.props.activeToolInfo || (this.props.activeToolInfo && this.props.activeToolInfo.activeToolName !== this.props.toolName)) {
                    this.props._onIconClick(null);
                }
            });
        };
        this.toggleIsSelectActive = () => {
            this.props._onIconClick(null);
        };
        this.onClickLoadingProgress = () => {
            if (this.activeJimuMapView) {
                this.activeJimuMapView.cancelSelectByQuery();
            }
        };
        this.handleIsShowSelectSetting = () => {
            this.setState({
                isShowSelectSetting: !this.state.isShowSelectSetting
            });
        };
        this.getSelectToolIcon = () => {
            if (this.state.currentSelectType === 'Point') {
                return SelectPointIcon;
            }
            else if (this.state.currentSelectType === 'Rectangle') {
                return SelectRectangleIcon;
            }
            else if (this.state.currentSelectType === 'Lasso') {
                return SelectLassoIcon;
            }
            else if (this.state.currentSelectType === 'Circle') {
                return SelectCircleIcon;
            }
            else if (this.state.currentSelectType === 'Line') {
                return SelectLineIcon;
            }
            else {
                return SelectRectangleIcon;
            }
        };
        this.getMobilePanelForSelectSetting = () => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap_context__WEBPACK_IMPORTED_MODULE_3__.MultiSourceMapContext.Consumer, null, ({ mapWidgetId }) => ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.MobilePanel, { mapWidgetId: `${mapWidgetId}-with-select-container`, title: '', open: this.state.isShowSelectSetting, onClose: () => { this.handleIsShowSelectSetting(); } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100' }, this.getMobilePanelSettingContent())))));
        };
        this.getMobilePanelSettingContent = () => {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getCSSStyle() },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content-title mt-1 mb-2' }, this.props.intl.formatMessage({ id: 'SelectionTool', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionTool })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 select-tool-type-mobile-container-shell' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-mobile-container d-flex' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-4 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                'select-tool-type-choosed': this.state.currentSelectType === 'Rectangle'
                            }), onClick: () => { this.setCurrentSelectType('Rectangle'); }, onKeyDown: e => { this.handleSelectTypeKeyDown(e, 'Rectangle'); }, role: 'button', tabIndex: 0 },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectRectangleIcon }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolRectangle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolRectangle }) }, this.props.intl.formatMessage({ id: 'SelectionToolRectangle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolRectangle }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-4 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                'select-tool-type-choosed': this.state.currentSelectType === 'Lasso'
                            }), onClick: () => { this.setCurrentSelectType('Lasso'); }, onKeyDown: e => { this.handleSelectTypeKeyDown(e, 'Lasso'); }, role: 'button', tabIndex: 0 },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectLassoIcon }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolLasso', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLasso }) }, this.props.intl.formatMessage({ id: 'SelectionToolLasso', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLasso }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-4 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                'select-tool-type-choosed': this.state.currentSelectType === 'Circle'
                            }), onClick: () => { this.setCurrentSelectType('Circle'); }, onKeyDown: e => { this.handleSelectTypeKeyDown(e, 'Circle'); }, role: 'button', tabIndex: 0 },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectCircleIcon }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolCircle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolCircle }) }, this.props.intl.formatMessage({ id: 'SelectionToolCircle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolCircle }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-4 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                'select-tool-type-choosed': this.state.currentSelectType === 'Line'
                            }), onClick: () => { this.setCurrentSelectType('Line'); }, onKeyDown: e => { this.handleSelectTypeKeyDown(e, 'Line'); }, role: 'button', tabIndex: 0 },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectLineIcon }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolLine', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLine }) }, this.props.intl.formatMessage({ id: 'SelectionToolLine', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLine }))),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-4 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                'select-tool-type-choosed': this.state.currentSelectType === 'Point'
                            }), onClick: () => { this.setCurrentSelectType('Point'); }, onKeyDown: e => { this.handleSelectTypeKeyDown(e, 'Point'); }, role: 'button', tabIndex: 0 },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectPointIcon }),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolPoint', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolPoint }) }, this.props.intl.formatMessage({ id: 'SelectionToolPoint', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolPoint }))))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content-title mt-1 mb-2' }, this.props.intl.formatMessage({ id: 'SelectionMode', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionMode })),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mt-2' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Radio, { style: { cursor: 'pointer' }, checked: this.state.spatialRelationship === 'intersects', onChange: () => { this.setState({ spatialRelationship: 'intersects' }); } }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: 'm-0 ml-2 content-title', style: { cursor: 'pointer' }, onClick: () => { this.setState({ spatialRelationship: 'intersects' }); } }, this.props.intl.formatMessage({ id: 'SelectionWithin', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionWithin }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mt-2' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Radio, { style: { cursor: 'pointer' }, checked: this.state.spatialRelationship === 'contains', onChange: () => { this.setState({ spatialRelationship: 'contains' }); } }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: 'm-0 ml-2 content-title', style: { cursor: 'pointer' }, onClick: () => { this.setState({ spatialRelationship: 'contains' }); } }, this.props.intl.formatMessage({ id: 'SelectionContain', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionContain }))))));
        };
        this.handleSelectTypeKeyDown = (e, selectType) => {
            if (e.key === 'Enter' || e.key === ' ') {
                this.setCurrentSelectType(selectType);
            }
        };
        this.handleKeyDown = (e, action) => {
            if (e.key === 'Enter' || e.key === ' ') {
                if (action === 'toggleIsSelectActive') {
                    this.toggleIsSelectActive();
                }
                else if (action === 'showSelectSetting') {
                    this.handleIsShowSelectSetting();
                }
                else if (action === 'onClickLoadingProgress') {
                    this.onClickLoadingProgress();
                }
            }
        };
        this.isMac = ((_b = (_a = window.jimuUA) === null || _a === void 0 ? void 0 : _a.os) === null || _b === void 0 ? void 0 : _b.name) === 'macOS';
        this.sketChCreateOptions = {
            polygon: {
                mode: 'hybrid'
            }
        };
        this.state = {
            currentSelectType: 'Rectangle',
            sketchInitialed: false,
            spatialRelationship: 'intersects',
            selectProgress: 0,
            isShowSelectSetting: false
        };
        this.bindShiftCtrlKeysEventListeners();
    }
    getCSSStyle() {
        const theme = this.props.theme;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .select-tool-btn-hover: hover {
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.palette.primary[500], 0.1)};;
      }

      .content-title {
        font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        font-weight: bold;
      }

      .select-tool-type-mobile-container-shell {
        overflow-x: auto;
        padding: 4px;
      }

      .select-tool-type-mobile-container-shell::-webkit-scrollbar {
        height: 0 !important;
        display: none;
      }

      .select-tool-type-mobile-container {
        width: 400px;
      }

      .select-tool-type {
        width: 64px;
        height: 64px;
        border: 1px solid ${theme.colors.palette.light[400]};
        cursor: pointer;
      }

      .select-tool-type-choosed {
        border: 1px solid ${theme.colors.primary};
        position: relative;
      }

      .select-tool-type-choosed:after {
        width: 0;
        height: 0;
        border-top: 8px solid ${theme.colors.primary};
        border-left: 8px solid transparent;
        position: absolute;
        top: 0;
        right: 0;
        content: "";
      }

      .select-tool-type-text {
        font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(12)};
      }

      .select-tool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .select-tool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .select-tool-loader:after {
        background-color: ${theme.colors.primary};
        width: 40%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

    `;
    }
    componentDidMount() {
        if (!this.state.sketchInitialed) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Sketch/SketchViewModel',
                'esri/layers/GraphicsLayer',
                'esri/rest/support/Query',
                'esri/symbols/support/jsonUtils',
                'esri/geometry/geometryEngine'
            ]).then(modules => {
                [this.SketchViewModel, this.GraphicsLayer, this.Query, this.jsonUtils, this.geometryEngine] = modules;
                this.props.jimuMapView.view.when(() => {
                    this.initialSketchTool();
                    this.setState({
                        sketchInitialed: true
                    });
                });
            });
        }
    }
    componentDidUpdate(prevProps, prevState) {
        const prevActiveToolName = prevProps.activeToolInfo && prevProps.activeToolInfo.activeToolName;
        const currentActiveToolName = this.props.activeToolInfo && this.props.activeToolInfo.activeToolName;
        if (prevActiveToolName !== currentActiveToolName && currentActiveToolName !== this.props.toolName && currentActiveToolName) {
            this.setState({
                isShowSelectSetting: false
            });
        }
        if (prevState.sketchInitialed !== this.state.sketchInitialed && this.state.sketchInitialed) {
            this.initialSketchTool();
            if (this.props.isActive && this.currentActiveTool) {
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            return;
        }
        if (prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id) && this.state.sketchInitialed) {
            // active JimuMapView changed
            // need to destroy current this.sketchViewModel and recreate it, dont't change this.sketchViewModel.view, because we need to bind view keydown/keyup events before init sketchViewModel
            this.destroySketchViewModelAndReleaseHandles();
            this.initialSketchTool();
            if (this.props.isActive && this.currentActiveTool) {
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            return;
        }
        if (prevProps.isActive !== this.props.isActive) {
            this.initialSketchTool();
            if (this.props.isActive) {
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            else {
                this.destroySketchViewModelAndReleaseHandles();
            }
        }
    }
    componentWillUnmount() {
        this.destroySketchViewModelAndReleaseHandles();
        this.releaseShiftCtrlKeysEventListeners();
    }
    destroySketchViewModelAndReleaseHandles() {
        this.releaseViewHandles();
        if (this.sketchViewModel) {
            this.sketchViewModel.destroy();
            this.sketchViewModel = null;
        }
        this.activeJimuMapView = null;
    }
    releaseViewHandles() {
        if (this.activeJimuMapView) {
            this.activeJimuMapView.removeSelectByQueryProgressChangeListener(this.onJimuMapViewSelectProgressChange);
        }
        if (this.viewKeyDownHandle) {
            this.viewKeyDownHandle.remove();
            this.viewKeyDownHandle = null;
        }
        if (this.viewKeyUpHandle) {
            this.viewKeyUpHandle.remove();
            this.viewKeyUpHandle = null;
        }
    }
    useShiftKey(tolearnaceMs) {
        return this.useKey(this.lastShiftKeyEventInfo, tolearnaceMs);
    }
    useCtrlKey(tolearnaceMs) {
        return this.useKey(this.lastCtrlKeyEventInfo, tolearnaceMs);
    }
    useKey(lastKeyEventInfo, tolearnaceMs) {
        if (lastKeyEventInfo) {
            if (lastKeyEventInfo.isKeyDown) {
                // key is still down and not up, return true
                return true;
            }
            else {
                // key is up, we use tolearnaceMs to deterine the return value
                const deltaTime = Date.now() - lastKeyEventInfo.eventDate.getTime();
                if (deltaTime <= tolearnaceMs) {
                    // keyup time is not too long from now
                    return true;
                }
                else {
                    // keyup time is too long from nows
                    return false;
                }
            }
        }
        else {
            // key never down, return false
            return false;
        }
    }
    bindShiftCtrlKeysEventListeners() {
        document.addEventListener('keydown', this.onKeyDown, true);
        document.addEventListener('keyup', this.onKeyUp, true);
    }
    releaseShiftCtrlKeysEventListeners() {
        document.removeEventListener('keydown', this.onKeyDown, true);
        document.removeEventListener('keyup', this.onKeyUp, true);
    }
    initialSketchTool() {
        if (!this.SketchViewModel) {
            return;
        }
        if (!this.sketchViewModel) {
            this.releaseViewHandles();
            const jimuMapView = this.props.jimuMapView;
            this.activeJimuMapView = jimuMapView;
            this.activeJimuMapView.addSelectByQueryProgressChangeListener(this.onJimuMapViewSelectProgressChange);
            const view = jimuMapView.view;
            this.viewKeyDownHandle = view.on('key-down', (event) => {
                if (event.key === 'Shift') {
                    event.stopPropagation();
                }
            });
            this.viewKeyDownHandle = view.on('key-up', (event) => {
                if (event.key === 'Shift') {
                    event.stopPropagation();
                }
            });
            this.sketchViewModel = new this.SketchViewModel({
                view: view,
                layer: new this.GraphicsLayer(),
                pointSymbol: this.jsonUtils.fromJSON(defaultPointSymbol),
                polylineSymbol: this.jsonUtils.fromJSON(defaultPolylineSymbol),
                polygonSymbol: this.jsonUtils.fromJSON(defaultPolygonSymbol)
            });
            this.sketchViewModel.on('create', (event) => {
                if (event.state === 'complete') {
                    // keep continuous drawing for SketchViewModel
                    this.setActiveToolForSketchViewModel(this.currentActiveTool);
                    const jimuMapView = this.props.jimuMapView;
                    jimuMapView.view.closePopup();
                    const graphic = event.graphic;
                    // graphic.geometry is null when double click map
                    if (!graphic.geometry) {
                        console.log('sketch graphic.geometry is null');
                        return;
                    }
                    const useKeyToleranceMs = 500;
                    const isShiftKey = this.useShiftKey(useKeyToleranceMs);
                    const isCtrlKey = this.useCtrlKey(useKeyToleranceMs);
                    let selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.New;
                    if (isShiftKey) {
                        if (isCtrlKey) {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.SelectFromCurrent;
                        }
                        else {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.AddToCurrent;
                        }
                    }
                    else {
                        if (isCtrlKey) {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.RemoveFromCurrent;
                        }
                        else {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.New;
                        }
                    }
                    jimuMapView.selectFeaturesByGraphic(graphic, this.state.spatialRelationship, selectionMode);
                }
            });
        }
    }
    setActiveToolForSketchViewModel(activeTool) {
        if (this.sketchViewModel) {
            const createOptions = this.sketChCreateOptions[activeTool];
            if (createOptions) {
                this.sketchViewModel.create(activeTool, createOptions);
            }
            else {
                this.sketchViewModel.create(activeTool);
            }
        }
    }
    getSelectIconTitle() {
        let topTitle = '';
        if (this.state.currentSelectType === 'Point') {
            topTitle = this.formatMessage('SelectionByPoint');
        }
        else if (this.state.currentSelectType === 'Rectangle') {
            topTitle = this.formatMessage('SelectionByRectangle');
        }
        else if (this.state.currentSelectType === 'Lasso') {
            topTitle = this.formatMessage('SelectionByLasso');
        }
        else if (this.state.currentSelectType === 'Circle') {
            topTitle = this.formatMessage('SelectionByCircle');
        }
        else if (this.state.currentSelectType === 'Line') {
            topTitle = this.formatMessage('SelectionByLine');
        }
        else {
            topTitle = this.formatMessage('SelectLabel');
        }
        const newSelection = this.formatMessage('newSelection');
        const addToCurrentSelection = this.formatMessage('addToCurrentSelection');
        const removeFromCurrentSelection = this.formatMessage('removeFromCurrentSelection');
        const selectFromCurrentSelection = this.formatMessage('selectFromCurrentSelection');
        const drawShape = this.formatMessage('drawShape');
        const draw = this.formatMessage('draw');
        const ctrlKey = this.isMac ? 'Cmd' : 'Ctrl';
        const newSelectionTip = ` ${newSelection} (${drawShape})`;
        const addToCurrentSelectionTip = ` ${addToCurrentSelection} (Shift + ${draw})`;
        const removeFromCurrentSelectionTip = ` ${removeFromCurrentSelection} (${ctrlKey} + ${draw})`;
        const selectFromCurrentSelectionTip = ` ${selectFromCurrentSelection} (Shift + ${ctrlKey} + ${draw})`;
        const finalTitle = `${topTitle}
${newSelectionTip}
${addToCurrentSelectionTip}
${removeFromCurrentSelectionTip}
${selectFromCurrentSelectionTip}
    `;
        return finalTitle;
    }
    formatMessage(strId) {
        return this.props.intl.formatMessage({ id: strId, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages[strId] });
    }
    render() {
        const selectIconTitle = this.getSelectIconTitle();
        const moreIconTitle = this.props.intl.formatMessage({ id: 'more', defaultMessage: 'More' });
        const isSelecting = this.state.selectProgress > 0 && this.state.selectProgress < 1;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getCSSStyle() },
            this.state.sketchInitialed && !isSelecting && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onClick: this.toggleIsSelectActive, style: {}, title: selectIconTitle, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool border-0 esri-widget--button', {
                    'exbmap-ui-tool-icon-selected': this.props.isActive
                }), onKeyDown: e => { this.handleKeyDown(e, 'toggleIsSelectActive'); }, role: 'button', tabIndex: 0 },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: this.getSelectToolIcon() })),
            this.state.sketchInitialed && isSelecting && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_progress__WEBPACK_IMPORTED_MODULE_4__["default"], { progress: this.state.selectProgress, intl: this.props.intl, theme: this.props.theme, onClick: this.onClickLoadingProgress }),
            !this.state.sketchInitialed && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {}, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool border-0 esri-widget--button') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: this.getSelectToolIcon() })),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'border border-top-0 w-100', style: { height: '1px' } }),
            this.state.sketchInitialed && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { onClick: this.handleIsShowSelectSetting, title: moreIconTitle, style: {}, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool border-0 esri-widget--button'), onKeyDown: e => { this.handleKeyDown(e, 'showSelectSetting'); }, role: 'button', tabIndex: 0 },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: SelectMoreIcon })),
            !this.state.sketchInitialed && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: {}, title: moreIconTitle, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('exbmap-ui-tool border-0 esri-widget--button') },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, className: 'exbmap-ui-tool-icon', icon: SelectMoreIcon })),
            this.state.isShowSelectSetting && this.getMobilePanelForSelectSetting()));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-pc.tsx":
/*!*************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-pc.tsx ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectPCTool: () => (/* binding */ SelectPCTool)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var _select_progress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./select-progress */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-progress.tsx");
/** @jsx jsx */




const defaultPointSymbol = {
    style: 'esriSMSCircle',
    color: [0, 0, 128, 128],
    name: 'Circle',
    outline: {
        color: [0, 0, 128, 255],
        width: 1
    },
    type: 'esriSMS',
    size: 18
};
const defaultPolylineSymbol = {
    tags: ['solid'],
    title: 'Blue Thin',
    style: 'esriSLSSolid',
    color: [79, 129, 189, 255],
    width: 3,
    name: 'Blue 1',
    type: 'esriSLS'
};
const defaultPolygonSymbol = {
    style: 'esriSFSSolid',
    color: [79, 129, 189, 77],
    type: 'esriSFS',
    outline: {
        style: 'esriSLSSolid',
        color: [54, 93, 141, 255],
        width: 1.5,
        type: 'esriSLS'
    }
};
const IconArrowDown = __webpack_require__(/*! jimu-ui/lib/icons/arrow-down-header.svg */ "./jimu-ui/lib/icons/arrow-down-header.svg");
const SelectRectangleIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-rectangle.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-rectangle.svg");
const SelectLassoIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-lasso.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-lasso.svg");
const SelectCircleIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-circle.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-circle.svg");
const SelectLineIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-line.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-line.svg");
const SelectPointIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-point.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-point.svg");
const SelectClearIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-clear.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-clear.svg");
class SelectPCTool extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        var _a, _b;
        super(props);
        this.currentActiveTool = 'rectangle';
        this.jsonUtils = null;
        this.resultGraphics = [];
        this.toggleIsSelectActive = () => {
            this.setState({
                isActive: !this.state.isActive
            }, () => {
                this.tryUpdateActiveToolInfoWhenStateChange();
            });
        };
        this.onClickLoadingProgress = () => {
            if (this.activeJimuMapView) {
                this.activeJimuMapView.cancelSelectByQuery();
            }
        };
        this.getSelectToolIcon = () => {
            if (this.state.currentSelectType === 'Point') {
                return SelectPointIcon;
            }
            else if (this.state.currentSelectType === 'Rectangle') {
                return SelectRectangleIcon;
            }
            else if (this.state.currentSelectType === 'Lasso') {
                return SelectLassoIcon;
            }
            else if (this.state.currentSelectType === 'Circle') {
                return SelectCircleIcon;
            }
            else if (this.state.currentSelectType === 'Line') {
                return SelectLineIcon;
            }
            else {
                return SelectRectangleIcon;
            }
        };
        this.toggleSelectTypePopup = () => {
            this.setState({
                isShowSelectTypePopup: !this.state.isShowSelectTypePopup
            }, () => {
                this.tryUpdateActiveToolInfoWhenStateChange();
            });
        };
        this.setCurrentSelectType = (currentSelectType) => {
            this.initialSketchTool();
            if (currentSelectType === 'Point') {
                this.setActiveToolForSketchViewModel('point');
                this.currentActiveTool = 'point';
            }
            if (currentSelectType === 'Rectangle') {
                this.setActiveToolForSketchViewModel('rectangle');
                this.currentActiveTool = 'rectangle';
            }
            if (currentSelectType === 'Lasso') {
                this.setActiveToolForSketchViewModel('polygon');
                this.currentActiveTool = 'polygon';
            }
            if (currentSelectType === 'Circle') {
                this.setActiveToolForSketchViewModel('circle');
                this.currentActiveTool = 'circle';
            }
            if (currentSelectType === 'Line') {
                this.setActiveToolForSketchViewModel('polyline');
                this.currentActiveTool = 'polyline';
            }
            this.setState({
                currentSelectType: currentSelectType,
                isShowSelectTypePopup: false,
                isActive: true
            });
        };
        this.onJimuMapViewSelectProgressChange = (progress) => {
            this.setState({
                selectProgress: progress
            });
        };
        this.onKeyDown = (event) => {
            if (event.key === 'Shift') {
                this.lastShiftKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: true
                };
            }
            else if ((this.isMac && event.key === 'Meta') || (!this.isMac && event.key === 'Control')) {
                this.lastCtrlKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: true
                };
            }
        };
        this.onKeyUp = (event) => {
            if (event.key === 'Shift') {
                this.lastShiftKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: false
                };
            }
            else if ((this.isMac && event.key === 'Meta') || (!this.isMac && event.key === 'Control')) {
                this.lastCtrlKeyEventInfo = {
                    eventDate: new Date(),
                    isKeyDown: false
                };
            }
        };
        this.clearSelect = () => {
            this.props.jimuMapView.clearSelectedFeatures();
        };
        this.onPopperToggle = (e) => {
            this.toggleSelectTypePopup();
            if (e) {
                if (e.type === 'keydown' && e.key === 'Escape') {
                    this.btnSelectTypeContainer.focus();
                }
            }
        };
        this.handleKeyDown = (e, selectType) => {
            if (e.key === 'Enter' || e.key === ' ') {
                this.setCurrentSelectType(selectType);
            }
        };
        this.isMac = ((_b = (_a = window.jimuUA) === null || _a === void 0 ? void 0 : _a.os) === null || _b === void 0 ? void 0 : _b.name) === 'macOS';
        this.sketChCreateOptions = {
            polygon: {
                mode: 'hybrid'
            }
        };
        this.state = {
            isShowSelectTypePopup: false,
            currentSelectType: 'Rectangle',
            sketchInitialed: false,
            isActive: false,
            spatialRelationship: 'intersects',
            resultGraphics: [],
            selectProgress: 0
        };
        this.bindShiftCtrlKeysEventListeners();
    }
    getCSSStyle() {
        const theme = this.props.theme;
        const containerbg = theme.arcgis.components.button.variants.default.default.bg;
        const containerBorder = theme.arcgis.components.button.variants.default.default.border;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .select-tool-container {
        ${containerbg && `background-color: ${containerbg};`}
        ${containerBorder && `border: ${containerBorder.color} ${containerBorder.width} solid;`}
      }

      .select-tool-btn {
        width: 32px;
        height: 32px;
      }

      .content-bg {
        background-color: ${theme.colors.palette.light[100]};
      }

      .content-title {
        font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
        font-weight: bold;
      }

      .select-tool-type-mobile-container-shell {
        overflow-x: auto;
      }

      .select-tool-type-mobile-container-shell::-webkit-scrollbar {
        height: 0 !important;
        display: none;
      }

      .select-tool-type-mobile-container {
        width: 400px;
      }

      .select-tool-type {
        width: 64px;
        height: 64px;
        border: 1px solid ${theme.colors.palette.light[400]};
        cursor: pointer;
      }

      .select-tool-type-choosed {
        border: 1px solid ${theme.colors.primary};
        position: relative;
      }

      .select-tool-type-choosed:after {
        width: 0;
        height: 0;
        border-top: 8px solid ${theme.colors.primary};
        border-left: 8px solid transparent;
        position: absolute;
        top: 0;
        right: 0;
        content: "";
      }

      .select-tool-type-text {
        font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(12)};
      }

      .select-tool-loader {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        animation: esri-fade-in 500ms ease-in-out;
      }

      .select-tool-loader:before {
        background-color: rgba(110,110,110,0.3);
        width: 100%;
        z-index: 0;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }

      .select-tool-loader:after {
        background-color: ${theme.colors.primary};
        width: 20%;
        z-index: 0;
        animation: looping-progresss-bar-ani 1500ms linear infinite;
        content: "";
        opacity: 1;
        position: absolute;
        height: 2px;
        top: 0;
        transition: opacity 500ms ease-in-out;
      }
    `;
    }
    componentDidMount() {
        if (!this.state.sketchInitialed) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)([
                'esri/widgets/Sketch/SketchViewModel',
                'esri/layers/GraphicsLayer',
                'esri/rest/support/Query',
                'esri/symbols/support/jsonUtils',
                'esri/geometry/geometryEngine'
            ]).then(modules => {
                [this.SketchViewModel, this.GraphicsLayer, this.Query, this.jsonUtils, this.geometryEngine] = modules;
                this.props.jimuMapView.view.when(() => {
                    this.initialSketchTool();
                    this.setState({
                        sketchInitialed: true
                    });
                });
            });
        }
    }
    componentDidUpdate(prevProps, prevState) {
        if (prevState.sketchInitialed !== this.state.sketchInitialed && this.state.sketchInitialed) {
            this.initialSketchTool();
            if (this.state.isActive && this.currentActiveTool) {
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            return;
        }
        if (prevProps.jimuMapView && this.props.jimuMapView && (prevProps.jimuMapView.id !== this.props.jimuMapView.id) && this.state.sketchInitialed) {
            // active JimuMapView changed
            // need to destroy current this.sketchViewModel and recreate it, dont't change this.sketchViewModel.view, because we need to bind view keydown/keyup events before init sketchViewModel
            this.destroySketchViewModelAndReleaseHandles();
            this.initialSketchTool();
            if (this.state.isActive && this.currentActiveTool) {
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            return;
        }
        if (prevState.isActive !== this.state.isActive) {
            // active change
            this.initialSketchTool();
            if (this.state.isActive) {
                // change from inactive to active
                this.setActiveToolForSketchViewModel(this.currentActiveTool);
            }
            else {
                // change from active to inactive
                this.destroySketchViewModelAndReleaseHandles();
            }
        }
        this.tryUpdateActiveToolInfoWhenPropsChange(prevProps);
    }
    componentWillUnmount() {
        this.destroySketchViewModelAndReleaseHandles();
        this.releaseShiftCtrlKeysEventListeners();
    }
    getSelectIconTitle() {
        let topTitle = '';
        if (this.state.currentSelectType === 'Point') {
            topTitle = this.formatMessage('SelectionByPoint');
        }
        else if (this.state.currentSelectType === 'Rectangle') {
            topTitle = this.formatMessage('SelectionByRectangle');
        }
        else if (this.state.currentSelectType === 'Lasso') {
            topTitle = this.formatMessage('SelectionByLasso');
        }
        else if (this.state.currentSelectType === 'Circle') {
            topTitle = this.formatMessage('SelectionByCircle');
        }
        else if (this.state.currentSelectType === 'Line') {
            topTitle = this.formatMessage('SelectionByLine');
        }
        else {
            topTitle = this.formatMessage('SelectLabel');
        }
        const newSelection = this.formatMessage('newSelection');
        const addToCurrentSelection = this.formatMessage('addToCurrentSelection');
        const removeFromCurrentSelection = this.formatMessage('removeFromCurrentSelection');
        const selectFromCurrentSelection = this.formatMessage('selectFromCurrentSelection');
        const drawShape = this.formatMessage('drawShape');
        const draw = this.formatMessage('draw');
        const ctrlKey = this.isMac ? 'Cmd' : 'Ctrl';
        const newSelectionTip = ` ${newSelection} (${drawShape})`;
        const addToCurrentSelectionTip = ` ${addToCurrentSelection} (Shift + ${draw})`;
        const removeFromCurrentSelectionTip = ` ${removeFromCurrentSelection} (${ctrlKey} + ${draw})`;
        const selectFromCurrentSelectionTip = ` ${selectFromCurrentSelection} (Shift + ${ctrlKey} + ${draw})`;
        const finalTitle = `${topTitle}
${newSelectionTip}
${addToCurrentSelectionTip}
${removeFromCurrentSelectionTip}
${selectFromCurrentSelectionTip}
    `;
        return finalTitle;
    }
    formatMessage(strId) {
        return this.props.intl.formatMessage({ id: strId, defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages[strId] });
    }
    tryUpdateActiveToolInfoWhenStateChange() {
        var _a;
        const prevSelectIsActiveTool = ((_a = this.props.activeToolInfo) === null || _a === void 0 ? void 0 : _a.activeToolName) === this.props.toolName;
        const currentSelectIsActiveTool = !!(this.state.isActive || this.state.isShowSelectTypePopup);
        if (!prevSelectIsActiveTool && currentSelectIsActiveTool) {
            // select changes to active tool
            this.props.onActiveToolInfoChange({
                activeToolName: this.props.toolName,
                activeToolTitle: this.props.toolName
            });
        }
        else if (prevSelectIsActiveTool && !currentSelectIsActiveTool) {
            // select changes to inactive tool
            this.setState({
                isActive: false,
                isShowSelectTypePopup: false
            });
            this.props.onActiveToolInfoChange(null);
        }
    }
    tryUpdateActiveToolInfoWhenPropsChange(prevProps) {
        var _a, _b;
        const preActiveToolName = ((_a = prevProps === null || prevProps === void 0 ? void 0 : prevProps.activeToolInfo) === null || _a === void 0 ? void 0 : _a.activeToolName) || '';
        const currentActiveToolName = ((_b = this.props.activeToolInfo) === null || _b === void 0 ? void 0 : _b.activeToolName) || '';
        if (preActiveToolName !== currentActiveToolName) {
            // props.activeToolInfo.activeToolName changes
            const toolName = this.props.toolName;
            const prevSelectIsActiveTool = preActiveToolName === toolName;
            const currentSelectIsActiveTool = currentActiveToolName === toolName;
            if (prevSelectIsActiveTool && !currentSelectIsActiveTool) {
                // select changes to inactive tool
                this.setState({
                    isActive: false,
                    isShowSelectTypePopup: false
                });
            }
        }
    }
    destroySketchViewModelAndReleaseHandles() {
        this.releaseViewHandles();
        if (this.sketchViewModel) {
            this.sketchViewModel.destroy();
            this.sketchViewModel = null;
        }
        this.activeJimuMapView = null;
    }
    releaseViewHandles() {
        if (this.activeJimuMapView) {
            this.activeJimuMapView.removeSelectByQueryProgressChangeListener(this.onJimuMapViewSelectProgressChange);
        }
        if (this.viewKeyDownHandle) {
            this.viewKeyDownHandle.remove();
            this.viewKeyDownHandle = null;
        }
        if (this.viewKeyUpHandle) {
            this.viewKeyUpHandle.remove();
            this.viewKeyUpHandle = null;
        }
    }
    useShiftKey(tolearnaceMs) {
        return this.useKey(this.lastShiftKeyEventInfo, tolearnaceMs);
    }
    useCtrlKey(tolearnaceMs) {
        return this.useKey(this.lastCtrlKeyEventInfo, tolearnaceMs);
    }
    useKey(lastKeyEventInfo, tolearnaceMs) {
        if (lastKeyEventInfo) {
            if (lastKeyEventInfo.isKeyDown) {
                // key is still down and not up, return true
                return true;
            }
            else {
                // key is up, we use tolearnaceMs to deterine the return value
                const deltaTime = Date.now() - lastKeyEventInfo.eventDate.getTime();
                if (deltaTime <= tolearnaceMs) {
                    // keyup time is not too long from now
                    return true;
                }
                else {
                    // keyup time is too long from nows
                    return false;
                }
            }
        }
        else {
            // key never down, return false
            return false;
        }
    }
    bindShiftCtrlKeysEventListeners() {
        document.addEventListener('keydown', this.onKeyDown, true);
        document.addEventListener('keyup', this.onKeyUp, true);
    }
    releaseShiftCtrlKeysEventListeners() {
        document.removeEventListener('keydown', this.onKeyDown, true);
        document.removeEventListener('keyup', this.onKeyUp, true);
    }
    initialSketchTool() {
        if (!this.SketchViewModel) {
            return;
        }
        if (!this.sketchViewModel) {
            this.releaseViewHandles();
            const jimuMapView = this.props.jimuMapView;
            this.activeJimuMapView = jimuMapView;
            this.activeJimuMapView.addSelectByQueryProgressChangeListener(this.onJimuMapViewSelectProgressChange);
            const view = jimuMapView.view;
            this.viewKeyDownHandle = view.on('key-down', (event) => {
                if (event.key === 'Shift') {
                    event.stopPropagation();
                }
            });
            this.viewKeyDownHandle = view.on('key-up', (event) => {
                if (event.key === 'Shift') {
                    event.stopPropagation();
                }
            });
            this.sketchViewModel = new this.SketchViewModel({
                view: view,
                layer: new this.GraphicsLayer(),
                pointSymbol: this.jsonUtils.fromJSON(defaultPointSymbol),
                polylineSymbol: this.jsonUtils.fromJSON(defaultPolylineSymbol),
                polygonSymbol: this.jsonUtils.fromJSON(defaultPolygonSymbol)
            });
            this.sketchViewModel.on('create', (event) => {
                if (event.state === 'complete') {
                    // keep continuous drawing for SketchViewModel
                    this.setActiveToolForSketchViewModel(this.currentActiveTool);
                    const jimuMapView = this.props.jimuMapView;
                    jimuMapView.view.closePopup();
                    const graphic = event.graphic;
                    // graphic.geometry is null when double click map
                    if (!graphic.geometry) {
                        console.log('sketch graphic.geometry is null');
                        return;
                    }
                    const useKeyToleranceMs = 500;
                    const isShiftKey = this.useShiftKey(useKeyToleranceMs);
                    const isCtrlKey = this.useCtrlKey(useKeyToleranceMs);
                    let selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.New;
                    if (isShiftKey) {
                        if (isCtrlKey) {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.SelectFromCurrent;
                        }
                        else {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.AddToCurrent;
                        }
                    }
                    else {
                        if (isCtrlKey) {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.RemoveFromCurrent;
                        }
                        else {
                            selectionMode = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceSelectionMode.New;
                        }
                    }
                    jimuMapView.selectFeaturesByGraphic(graphic, this.state.spatialRelationship, selectionMode);
                }
            });
        }
    }
    setActiveToolForSketchViewModel(activeTool) {
        if (this.sketchViewModel) {
            const createOptions = this.sketChCreateOptions[activeTool];
            if (createOptions) {
                this.sketchViewModel.create(activeTool, createOptions);
            }
            else {
                this.sketchViewModel.create(activeTool);
            }
        }
    }
    render() {
        const selectIconTitle = this.getSelectIconTitle();
        const clearSelectionTitle = this.props.intl.formatMessage({ id: 'clearSelection', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.clearSelection });
        const isSelecting = this.state.selectProgress > 0 && this.state.selectProgress < 1;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getCSSStyle() },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center justify-content-center select-tool-container', ref: ref => { this.btnContainer = ref; } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex', title: selectIconTitle },
                        !isSelecting && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: this.toggleIsSelectActive, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('esri-widget--button  border-0 select-tool-btn d-flex align-items-center justify-content-center', { active: this.state.isActive }), disabled: !this.state.sketchInitialed },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: this.getSelectToolIcon() })),
                        isSelecting && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_select_progress__WEBPACK_IMPORTED_MODULE_3__["default"], { progress: this.state.selectProgress, intl: this.props.intl, theme: this.props.theme, onClick: this.onClickLoadingProgress }),
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { onClick: this.toggleSelectTypePopup, style: { width: 18 }, className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('esri-widget--button border-0 pl-1 pr-1 select-tool-btn d-flex align-items-center justify-content-center', { active: this.state.isShowSelectTypePopup }), disabled: !this.state.sketchInitialed, ref: ref => { this.btnSelectTypeContainer = ref; } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 8, height: 8, icon: IconArrowDown }))),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { title: clearSelectionTitle, className: 'select-tool-btn d-flex align-items-center justify-content-center select-tool-btn-hover esri-widget--button border-0', ref: ref => { this.selectResultContainer = ref; }, onClick: this.clearSelect, disabled: !this.state.sketchInitialed },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectClearIcon })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Popper, { css: this.getCSSStyle(), reference: this.btnContainer, open: this.state.isShowSelectTypePopup, placement: 'bottom-start', toggle: this.onPopperToggle },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'p-4 content-bg', style: { display: 'flex', flexDirection: 'column' } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content-title' }, this.props.intl.formatMessage({ id: 'SelectionTool', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionTool })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'mt-2 mb-2' },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex mb-2' },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-2 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                            'select-tool-type-choosed': this.state.currentSelectType === 'Rectangle'
                                        }), onClick: () => { this.setCurrentSelectType('Rectangle'); }, onKeyDown: e => { this.handleKeyDown(e, 'Rectangle'); }, role: 'button', tabIndex: 0 },
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectRectangleIcon }),
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolRectangle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolRectangle }) }, this.props.intl.formatMessage({ id: 'SelectionToolRectangle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolRectangle }))),
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-2 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                            'select-tool-type-choosed': this.state.currentSelectType === 'Lasso'
                                        }), onClick: () => { this.setCurrentSelectType('Lasso'); }, onKeyDown: e => { this.handleKeyDown(e, 'Lasso'); }, role: 'button', tabIndex: 0 },
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectLassoIcon }),
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolLasso', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLasso }) }, this.props.intl.formatMessage({ id: 'SelectionToolLasso', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLasso }))),
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                            'select-tool-type-choosed': this.state.currentSelectType === 'Circle'
                                        }), onClick: () => { this.setCurrentSelectType('Circle'); }, onKeyDown: e => { this.handleKeyDown(e, 'Circle'); }, role: 'button', tabIndex: 0 },
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectCircleIcon }),
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolCircle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolCircle }) }, this.props.intl.formatMessage({ id: 'SelectionToolCircle', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolCircle })))),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex' },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type mr-2 d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                            'select-tool-type-choosed': this.state.currentSelectType === 'Line'
                                        }), onClick: () => { this.setCurrentSelectType('Line'); }, onKeyDown: e => { this.handleKeyDown(e, 'Line'); }, role: 'button', tabIndex: 0 },
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectLineIcon }),
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolLine', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLine }) }, this.props.intl.formatMessage({ id: 'SelectionToolLine', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolLine }))),
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('select-tool-type d-flex flex-column align-items-center justify-content-center select-tool-btn-hover', {
                                            'select-tool-type-choosed': this.state.currentSelectType === 'Point'
                                        }), onClick: () => { this.setCurrentSelectType('Point'); }, onKeyDown: e => { this.handleKeyDown(e, 'Point'); }, role: 'button', tabIndex: 0 },
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectPointIcon }),
                                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-type-text mt-1 w-100 text-truncate pl-1 pr-1 d-flex justify-content-center', title: this.props.intl.formatMessage({ id: 'SelectionToolPoint', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolPoint }) }, this.props.intl.formatMessage({ id: 'SelectionToolPoint', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionToolPoint }))))),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'content-title' }, this.props.intl.formatMessage({ id: 'SelectionMode', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionMode })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", null,
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mt-2' },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Radio, { style: { cursor: 'pointer' }, checked: this.state.spatialRelationship === 'intersects', onChange: () => { this.setState({ spatialRelationship: 'intersects' }); } }),
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: 'm-0 ml-2 content-title', style: { cursor: 'pointer' }, onClick: () => { this.setState({ spatialRelationship: 'intersects' }); } }, this.props.intl.formatMessage({ id: 'SelectionWithin', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionWithin }))),
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex align-items-center mt-2' },
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Radio, { style: { cursor: 'pointer' }, checked: this.state.spatialRelationship === 'contains', onChange: () => { this.setState({ spatialRelationship: 'contains' }); } }),
                                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: 'm-0 ml-2 content-title', style: { cursor: 'pointer' }, onClick: () => { this.setState({ spatialRelationship: 'contains' }); } }, this.props.intl.formatMessage({ id: 'SelectionContain', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionContain })))))))),
            (!this.state.sketchInitialed) && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'select-tool-loader' })));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-progress.tsx":
/*!*******************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/select/select-progress.tsx ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SelectProgress)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/** @jsx jsx */


class SelectProgress extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.state = {};
    }
    getStyle() {
        const progressColor = this.props.theme.darkTheme ? 'black' : 'white';
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: relative;

      .select-circle-progress {
        position: absolute;
        left: 6px;
        top: 6px;

        .progress-circle-bg {
          stroke: ${progressColor};
          opacity: 0.3;
        }

        .progress-circle-progress {
          stroke: ${progressColor};
        }
      }

      .progress-stop {
        width: 6px;
        height: 6px;
        background: ${progressColor};
      }

      .progress-mask {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: transparent;
      }
    `;
    }
    render() {
        var _a;
        const progress = this.props.progress * 100;
        const progressInt = parseFloat(progress.toFixed(2));
        const defaultStr = jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.selectingFeaturesTip;
        const title = ((_a = this.props.intl) === null || _a === void 0 ? void 0 : _a.formatMessage({ id: 'selectingFeaturesTip', defaultMessage: defaultStr })) || defaultStr;
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("button", { css: this.getStyle(), onClick: this.props.onClick, className: 'esri-widget--button  border-0 select-tool-btn d-flex align-items-center justify-content-center active select-progress' },
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Progress, { className: 'select-circle-progress', color: 'light', type: 'circular', value: progressInt, circleSize: 20 }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'progress-stop' }),
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'progress-mask', title: title })));
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/index.tsx":
/*!**************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/index.tsx ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SelectState)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var _selected_number__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./selected-number */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/selected-number.tsx");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */




const SelectZoomtoIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-zoomto.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-zoomto.svg");
const SelectClearIcon = __webpack_require__(/*! ../../assets/icons/select-tool/select-clear.svg */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/assets/icons/select-tool/select-clear.svg");
class SelectState extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_2__.BaseTool {
    constructor(props) {
        super(props);
        this.toolName = 'SelectState';
        this.handleSelectedGraphicsChanged = (selectedGraphicCount) => {
            this.setState({
                selectedGraphicCount
            });
        };
        this.zoomToSelectedFeatures = () => __awaiter(this, void 0, void 0, function* () {
            var _a;
            const view = (_a = this.props.jimuMapView) === null || _a === void 0 ? void 0 : _a.view;
            if (view) {
                const graphics = yield this.getSelectedGraphics();
                if (graphics.length > 0) {
                    view.goTo(graphics);
                }
            }
        });
        this.clearSelectedFeatures = () => {
            this.props.jimuMapView.clearSelectedFeatures();
        };
        this.state = {
            selectedGraphicCount: 0
        };
    }
    getStyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      background-color: ${this.props.theme.arcgis.components.button.variants.default.default.bg};

      .divide-line {
        border-right: 1px solid ${this.props.theme.colors.palette.dark[400]};
        height: 100%;
      }
    `;
    }
    getTitle() {
        return '';
    }
    getIcon() {
        return null;
    }
    getSelectedGraphics() {
        return __awaiter(this, void 0, void 0, function* () {
            let selectedGraphics = [];
            if (this.props.jimuMapView) {
                selectedGraphics = yield this.props.jimuMapView.getSelectedFeatures();
            }
            return selectedGraphics;
        });
    }
    getExpandPanel() {
        const selectedFeaturesTip = this.props.intl.formatMessage({ id: 'SelectionSelectedFeatures', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionSelectedFeatures });
        const clearSelectionTitle = this.props.intl.formatMessage({ id: 'clearSelection', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.clearSelection });
        const zoomToSelectedFeaturesTip = this.props.intl.formatMessage({ id: 'SelectionZoomToSelectedFeatures', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_1__.defaultMessages.SelectionZoomToSelectedFeatures });
        if (this.props.isMobile) {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100 d-flex justify-content-between align-items-center', style: { height: '40px' } },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'ml-2' }, `${selectedFeaturesTip}: ${this.state.selectedGraphicCount}`),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'd-flex' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { title: zoomToSelectedFeaturesTip, className: 'h-100 border border-top-0 border-bottom-0 d-flex justify-content-center align-items-center', style: { width: '40px', cursor: 'pointer' }, onClick: this.zoomToSelectedFeatures },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 18, height: 18, icon: SelectZoomtoIcon })),
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'h-100 d-flex justify-content-center align-items-center', style: { width: '40px', cursor: 'pointer' }, onClick: this.clearSelectedFeatures, title: clearSelectionTitle },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 18, height: 18, icon: SelectClearIcon }))),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_selected_number__WEBPACK_IMPORTED_MODULE_3__.SelectedNumber, { jimuMapView: this.props.jimuMapView, onSelectedGraphicsChanged: this.handleSelectedGraphicsChanged })));
        }
        else {
            return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.Fragment, null,
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { onClick: this.zoomToSelectedFeatures, title: zoomToSelectedFeaturesTip },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { width: 16, height: 16, icon: SelectZoomtoIcon, className: 'mr-2' }),
                    `${selectedFeaturesTip}: ${this.state.selectedGraphicCount}`),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_selected_number__WEBPACK_IMPORTED_MODULE_3__.SelectedNumber, { jimuMapView: this.props.jimuMapView, onSelectedGraphicsChanged: this.handleSelectedGraphicsChanged })));
        }
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/selected-number.tsx":
/*!************************************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/selectstate/selected-number.tsx ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelectedNumber: () => (/* binding */ SelectedNumber)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class _SelectedNumber extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor() {
        super(...arguments);
        this.onJimuLayerViewSelectedFeaturesChange = () => {
            // Typically, this callback method is called when we highlight a feature by popup click, but the data source is not used and not created.
            this.computerSelectedGraphicCount();
        };
    }
    componentDidMount() {
        this.setCurrentJimuMapView(this.props.jimuMapView);
        this.computerSelectedGraphicCount();
    }
    componentDidUpdate(prevProps) {
        const preJimuMapView = (prevProps === null || prevProps === void 0 ? void 0 : prevProps.jimuMapView) || null;
        const currJimuMapView = this.props.jimuMapView || null;
        if (preJimuMapView !== currJimuMapView) {
            // switch map
            this.setCurrentJimuMapView(currJimuMapView);
        }
        this.computerSelectedGraphicCount();
    }
    componentWillUnmount() {
        this.setCurrentJimuMapView(null);
    }
    setCurrentJimuMapView(jimuMapView) {
        if (this.currentJimuMapView) {
            this.currentJimuMapView.removeJimuLayerViewSelectedFeaturesChangeListener(this.onJimuLayerViewSelectedFeaturesChange);
        }
        this.currentJimuMapView = jimuMapView;
        if (this.currentJimuMapView) {
            this.currentJimuMapView.addJimuLayerViewSelectedFeaturesChangeListener(this.onJimuLayerViewSelectedFeaturesChange);
        }
    }
    computerSelectedGraphicCount() {
        if (this.props.onSelectedGraphicsChanged) {
            const selectedGraphicCount = this.props.jimuMapView.getSelectedFeatureCount();
            this.props.onSelectedGraphicsChanged(selectedGraphicCount);
        }
    }
    render() {
        return null;
    }
}
const mapStateToProps = (state, ownProps) => {
    if (state.appStateInBuilder) {
        const dataSourcesInfo = state.appStateInBuilder && state.appStateInBuilder.dataSourcesInfo;
        const jimuMapViewsInfo = state.appStateInBuilder && state.appStateInBuilder.jimuMapViewsInfo;
        return {
            dataSourcesInfo: dataSourcesInfo,
            viewInfos: jimuMapViewsInfo
        };
    }
    else {
        const dataSourcesInfo = state && state.dataSourcesInfo;
        const jimuMapViewsInfo = state && state.jimuMapViewsInfo;
        return {
            dataSourcesInfo: dataSourcesInfo,
            viewInfos: jimuMapViewsInfo
        };
    }
};
const SelectedNumber = jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactRedux.connect(mapStateToProps)(_SelectedNumber);


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/zoom.tsx":
/*!*************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/tools/zoom.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Zoom)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../layout/base/base-tool */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/layout/base/base-tool.tsx");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");




class Zoom extends _layout_base_base_tool__WEBPACK_IMPORTED_MODULE_1__.BaseTool {
    constructor() {
        super(...arguments);
        this.toolName = 'Zoom';
    }
    getTitle() {
        return this.props.intl.formatMessage({ id: 'ZoomLabel', defaultMessage: jimu_ui__WEBPACK_IMPORTED_MODULE_3__.defaultMessages.ZoomLabel });
    }
    getIcon() {
        return null;
    }
    getExpandPanel() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(ZoomInner, { jimuMapView: this.props.jimuMapView });
    }
}
class ZoomInner extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.Zoom = null;
        this.state = {
            apiLoaded: false
        };
    }
    componentDidMount() {
        if (!this.state.apiLoaded) {
            (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_2__.loadArcGISJSAPIModules)(['esri/widgets/Zoom']).then(modules => {
                [this.Zoom] = modules;
                this.setState({
                    apiLoaded: true
                });
            });
        }
    }
    componentDidUpdate() {
        if (this.state.apiLoaded && this.container) {
            if (this.ZoomBtn) {
                this.container.innerHTML = '';
            }
            this.ZoomBtn = new this.Zoom({
                container: this.container,
                view: this.props.jimuMapView.view
            });
            this.props.jimuMapView.deleteJimuMapTool('Zoom');
            this.props.jimuMapView.addJimuMapTool({
                name: 'Zoom',
                instance: this.ZoomBtn
            });
        }
    }
    componentWillUnmount() {
        if (this.ZoomBtn) {
            this.ZoomBtn.destroy();
            this.ZoomBtn = null;
            this.props.jimuMapView.deleteJimuMapTool('Zoom');
            /**
             * TODO
             * When the map widget has two maps, the "componentWillUnmount" is called only for the current active view,
             * so the another view's mapTool is not cleared.
             */
        }
    }
    render() {
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { className: 'zoom-map-tool', ref: ref => { this.container = ref; } });
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/translations/default.ts":
/*!**********************************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/translations/default.ts ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
    _widgetLabel: 'Map',
    _action_displayFeatureSet_label: 'Display feature set',
    _action_panTo_label: 'Pan to',
    _action_zoomToFeature_label: 'Zoom to',
    _action_selectFeature_label: 'Select feature',
    _action_flash_label: 'Flash',
    _action_filter_label: 'Filter',
    _action_showOnMap_label: 'Show on map',
    _action_addToMap_label: 'Add to map',
    showOnMapData: 'Show on map data',
    addedData: 'added data',
    failToAddTheDataOnMap: 'Fail to add the data.',
    addToMapData: 'Add to map data',
    mapCurrentRecord: '{layerName} map current record',
    _url_params_map_state_label: 'Viewpoint',
    _url_params_layer_center_label: 'Center',
    _url_params_layer_scale_label: 'Scale',
    _url_params_layer_rotation_label: 'Rotation',
    _url_params_layer_visibility_label: 'Layer visibility'
});


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts":
/*!*******************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkIsLive: () => (/* binding */ checkIsLive),
/* harmony export */   cloneFeature: () => (/* binding */ cloneFeature),
/* harmony export */   createNewFeaturelayer: () => (/* binding */ createNewFeaturelayer),
/* harmony export */   filterFeaturesByQuery: () => (/* binding */ filterFeaturesByQuery),
/* harmony export */   flashFeaturesByQuery: () => (/* binding */ flashFeaturesByQuery),
/* harmony export */   getJimuMapViewId: () => (/* binding */ getJimuMapViewId),
/* harmony export */   getLayersFromDataSourceIds: () => (/* binding */ getLayersFromDataSourceIds),
/* harmony export */   getMapBaseRestoreData: () => (/* binding */ getMapBaseRestoreData),
/* harmony export */   getViewpointInstanceFromHistory: () => (/* binding */ getViewpointInstanceFromHistory),
/* harmony export */   goToTargetImmediately: () => (/* binding */ goToTargetImmediately),
/* harmony export */   goToViewpointImmediately: () => (/* binding */ goToViewpointImmediately),
/* harmony export */   isNeedProjectSpatialReference: () => (/* binding */ isNeedProjectSpatialReference),
/* harmony export */   isNeedProjectViewpoint: () => (/* binding */ isNeedProjectViewpoint),
/* harmony export */   isSamelikeViewpoints: () => (/* binding */ isSamelikeViewpoints),
/* harmony export */   isTwoWidgetsMutuallyExtentChange: () => (/* binding */ isTwoWidgetsMutuallyExtentChange),
/* harmony export */   isWidgetSendZoomToActionToAnother: () => (/* binding */ isWidgetSendZoomToActionToAnother),
/* harmony export */   mapPanto: () => (/* binding */ mapPanto),
/* harmony export */   processZoomToFeatures: () => (/* binding */ processZoomToFeatures),
/* harmony export */   projectGeometries: () => (/* binding */ projectGeometries),
/* harmony export */   projectViewpoint: () => (/* binding */ projectViewpoint),
/* harmony export */   restoreMapBase: () => (/* binding */ restoreMapBase),
/* harmony export */   selectFeature: () => (/* binding */ selectFeature),
/* harmony export */   updateFeaturelayer: () => (/* binding */ updateFeaturelayer),
/* harmony export */   updateUrlHashParamsForActiveJimuMapView: () => (/* binding */ updateUrlHashParamsForActiveJimuMapView)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/* eslint-disable prefer-const */


function createNewFeaturelayer(mapBaseView, newFeatureSetValue) {
    return __awaiter(this, void 0, void 0, function* () {
        const newLayerPromises = [];
        newFeatureSetValue && Object.keys(newFeatureSetValue).forEach(layerId => {
            const layer = mapBaseView.map.layers.find(layer => layer.id === layerId);
            if (layer) {
                console.warn('the feature layer is already created');
                return;
            }
            newLayerPromises.push(addFeatureSetToMap(mapBaseView, newFeatureSetValue[layerId], layerId));
        });
        if (newLayerPromises.length === 0) {
            return null;
        }
        else {
            return Promise.all(newLayerPromises);
        }
    });
}
function updateFeaturelayer(mapBaseView, changedFeatureSetValue) {
    return __awaiter(this, void 0, void 0, function* () {
        const updatePromises = [];
        changedFeatureSetValue && Object.keys(changedFeatureSetValue).forEach(layerId => {
            const layer = mapBaseView.map.layers.find(layer => layer.id === layerId);
            if (layer) {
                mapBaseView.map.remove(layer);
                updatePromises.push(addFeatureSetToMap(mapBaseView, changedFeatureSetValue[layerId], layerId));
            }
        });
        if (updatePromises.length === 0) {
            return null;
        }
        else {
            return Promise.all(updatePromises);
        }
    });
}
function addFeatureSetToMap(mapBaseView, featureSet, layerId) {
    return __awaiter(this, void 0, void 0, function* () {
        return yield new Promise((resolve, reject) => {
            return (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
                'esri/layers/FeatureLayer'
            ]).then(modules => {
                if (featureSet.features.length < 1) {
                    resolve(null);
                }
                else {
                    // let FeatureSet: typeof  __esri.FeatureSet;
                    let FeatureLayer;
                    // eslint-disable-next-line
                    [FeatureLayer] = modules;
                    const layerFromFeatureSet = featureSet.features[0].layer;
                    const fieldsInFeaturelayer = [];
                    const fieldMap = {};
                    for (let i = 0; i < layerFromFeatureSet.fields.length; i++) {
                        const fieldsItem = getReasonableField(layerFromFeatureSet.fields[i]);
                        fieldMap[layerFromFeatureSet.fields[i].name] = fieldsItem.name;
                        fieldsInFeaturelayer.push(fieldsItem);
                    }
                    const fieldsInPopupTemplate = [];
                    for (const key in featureSet.features[0].attributes) {
                        if (fieldMap[key]) {
                            const fieldsItem = {
                                fieldName: fieldMap[key],
                                label: key
                            };
                            fieldsInPopupTemplate.push(fieldsItem);
                        }
                    }
                    const sourceFeatures = [];
                    featureSet.features.forEach((feature, index) => {
                        const tempFeature = feature;
                        if (tempFeature.attributes) {
                            for (const key in tempFeature.attributes) {
                                tempFeature.attributes[fieldMap[key]] = tempFeature.attributes[key];
                            }
                            tempFeature.attributes.exbfid = index;
                        }
                        else {
                            tempFeature.attributes = {
                                exbfid: index
                            };
                        }
                        sourceFeatures.push(tempFeature);
                    });
                    const layer = new FeatureLayer({
                        id: layerId,
                        title: layerFromFeatureSet.title,
                        source: sourceFeatures,
                        fields: fieldsInFeaturelayer,
                        outFields: ['*'],
                        objectIdField: 'exbfid',
                        renderer: layerFromFeatureSet.renderer,
                        popupEnabled: true,
                        popupTemplate: {
                            title: 'information',
                            content: [{
                                    type: 'fields',
                                    fieldInfos: fieldsInPopupTemplate
                                }]
                        }
                    });
                    mapBaseView.map.add(layer);
                    layer.on('layerview-create', event => {
                        resolve(null);
                    });
                }
            });
        });
    });
}
function getReasonableField(field) {
    // the function is supported to normalize the field.name
    const fieldName = field.name;
    return {
        name: fieldName.replace(/\./g, '_').replace(/\(/g, '_').replace(/\)/g, '_'),
        alias: field.alias,
        type: field.type
    };
}
function selectFeature(mapBaseView, target, layerId) {
    // In this function, we assume that features come from the same layer
    let featureLayerId = layerId;
    let featureLayerView = null;
    let tempFeature = null;
    // if layerId doesn't exist, we get layerId by feature
    if (!featureLayerId) {
        if (target instanceof Array) {
            tempFeature = target[0];
        }
        else {
            tempFeature = target;
        }
        if (tempFeature) {
            featureLayerId = tempFeature.layer && tempFeature.layer.id;
        }
    }
    if (featureLayerId) {
        const layerViews = mapBaseView.allLayerViews;
        for (let i = 0; i < layerViews.length; i++) {
            if (layerViews.getItemAt(i).layer.id === featureLayerId) {
                featureLayerView = layerViews.getItemAt(i);
            }
        }
        if (featureLayerView) {
            return {
                layerId: featureLayerId,
                handle: featureLayerView.highlight(target)
            };
        }
        else {
            return null;
        }
    }
}
function goToTargetImmediately(view, _target) {
    return __awaiter(this, void 0, void 0, function* () {
        const viewSR = view.spatialReference;
        const geometries = yield projectGeometries([_target], viewSR);
        if (geometries && geometries.length > 0) {
            const target = geometries[0];
            view.goTo(target, { animate: false });
        }
    });
}
function goToViewpointImmediately(view, _viewpoint) {
    return __awaiter(this, void 0, void 0, function* () {
        const viewSR = view.spatialReference;
        const viewpoint = yield projectViewpoint(_viewpoint, viewSR);
        // view.goTo(viewpoint, { animate: false })
        view.viewpoint = viewpoint;
    });
}
function isNeedProjectViewpoint(viewpoint, viewSR) {
    var _a, _b, _c;
    const sr1 = (_a = viewpoint.targetGeometry) === null || _a === void 0 ? void 0 : _a.spatialReference;
    if (sr1 && isNeedProjectSpatialReference(sr1, viewSR)) {
        return true;
    }
    const sr2 = (_c = (_b = viewpoint.camera) === null || _b === void 0 ? void 0 : _b.position) === null || _c === void 0 ? void 0 : _c.spatialReference;
    if (sr2 && isNeedProjectSpatialReference(sr2, viewSR)) {
        return true;
    }
    return false;
}
function isNeedProjectSpatialReference(sr1, sr2) {
    const isSame = sr1.wkid === sr2.wkid || sr1.equals(sr2);
    //  In JS API 4.x, the view can handle WebMercator and WGS84 spatialReference auto
    const isLike = (sr1.isWebMercator || sr1.isWGS84) && (sr2.isWebMercator || sr2.isWGS84);
    return !isSame && !isLike;
}
function projectViewpoint(_viewpoint, viewSR) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const viewpoint = _viewpoint.clone();
        const targetGeometry = viewpoint.targetGeometry;
        const cameraPositon = (_a = viewpoint.camera) === null || _a === void 0 ? void 0 : _a.position;
        const toProjectGeometries = [];
        let isProjectTargetGeometry = false;
        let isProjectCameraPosition = false;
        if (targetGeometry && isNeedProjectSpatialReference(targetGeometry.spatialReference, viewSR)) {
            isProjectTargetGeometry = true;
            toProjectGeometries.push(targetGeometry);
        }
        if (cameraPositon && isNeedProjectSpatialReference(cameraPositon.spatialReference, viewSR)) {
            isProjectCameraPosition = true;
            toProjectGeometries.push(cameraPositon);
        }
        if (toProjectGeometries.length > 0) {
            const projectedGeometries = yield projectGeometries(toProjectGeometries, viewSR);
            if (isProjectTargetGeometry) {
                viewpoint.targetGeometry = projectedGeometries[0];
            }
            if (isProjectCameraPosition) {
                viewpoint.camera.position = projectedGeometries[projectedGeometries.length - 1];
            }
        }
        return viewpoint;
    });
}
function mapPanto(mapBaseView, target) {
    return __awaiter(this, void 0, void 0, function* () {
        const panToTarget = target;
        const tempBaseMapView = mapBaseView;
        if (panToTarget instanceof Array) {
            if (panToTarget.length === 0) {
                yield Promise.resolve();
                return;
            }
            if (panToTarget[0].geometry) {
                const geometryArr = [];
                for (let i = 0; i < panToTarget.length; i++) {
                    geometryArr.push(panToTarget[i].geometry);
                }
                yield getGeometriesExtent(geometryArr).then((extent) => {
                    return goTo(tempBaseMapView, extent.center);
                });
            }
            else {
                return getGeometriesExtent(panToTarget).then((extent) => {
                    return goTo(tempBaseMapView, extent.center);
                });
            }
        }
        else {
            if (panToTarget.geometry) {
                const getmetry = panToTarget.geometry;
                return goTo(tempBaseMapView, getCenterPoint(getmetry));
            }
            else {
                return goTo(tempBaseMapView, getCenterPoint(panToTarget));
            }
        }
    });
}
function goTo(view, target) {
    return __awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve, reject) => {
            // delay before updating of view turns true, 400ms is a temporary solution.
            setTimeout(() => {
                //// there is a conflict for paning when the layer view is updating, such as 'pan to' and 'filter'.
                //// this is a temporary solution, it can reduce the frequency of the problem rather than solve it completely.
                //if (view.updating) {
                //  const handler = view.watch('updating', value => {
                //    if (!value) {
                //      view.goTo(target).then(() => resolve()).catch(() => reject())
                //      handler.remove()
                //    }
                //  })
                //} else {
                //  view.goTo(target).then(() => resolve()).catch(() => reject())
                //}
                view.goTo(target).then(() => { resolve(); }).catch(() => { reject(); });
            }, 400);
        });
    });
}
function getGeometriesExtent(geometries) {
    return __awaiter(this, void 0, void 0, function* () {
        return yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
            'esri/geometry/Extent'
        ]).then((modules) => __awaiter(this, void 0, void 0, function* () {
            // eslint-disable-next-line
            let Extent;
            [Extent] = modules;
            if (!geometries || !geometries.length) {
                return yield Promise.resolve(null);
            }
            let fullExtent = null;
            let index;
            const numGeometries = geometries.length;
            for (index = 0; index < numGeometries; index++) {
                const geometry = geometries[index];
                if (!geometry) {
                    continue;
                }
                let extent = geometry.extent;
                if (!extent && geometry.type === 'point') {
                    const pointGeometry = geometry;
                    if (pointGeometry.x && pointGeometry.y) {
                        extent = new Extent({
                            xmax: pointGeometry.x,
                            xmin: pointGeometry.x,
                            ymax: pointGeometry.y,
                            ymin: pointGeometry.y,
                            zmax: pointGeometry.z,
                            zmin: pointGeometry.z,
                            spatialReference: pointGeometry.spatialReference
                        });
                    }
                }
                if (!extent) {
                    continue;
                }
                if (fullExtent) {
                    fullExtent = fullExtent.union(extent);
                }
                else {
                    fullExtent = extent;
                }
            }
            if (fullExtent.width < 0 && fullExtent.height < 0) {
                return yield Promise.resolve(null);
            }
            return yield Promise.resolve(fullExtent);
        }));
    });
}
function filterFeaturesByQuery(jimuMapView, actionLayerDataSourceId, querySQL) {
    return __awaiter(this, void 0, void 0, function* () {
        if (!actionLayerDataSourceId) {
            return;
        }
        const dataSource = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(actionLayerDataSourceId);
        if (!dataSource) {
            return;
        }
        let jimuLayerView = null;
        try {
            jimuLayerView = yield jimuMapView.whenJimuLayerViewLoadedByDataSource(dataSource);
        }
        catch (err) {
            jimuLayerView = null;
            console.error('can\'t get jimuLayerView by dataSource', dataSource, err);
        }
        if (jimuLayerView && jimuLayerView.layer && (jimuLayerView.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.LayerTypes.FeatureLayer || jimuLayerView.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.LayerTypes.SceneLayer)) {
            jimuLayerView.setDefinitionExpression(querySQL);
        }
    });
}
function queryFeatures(layerObject, querySQL) {
    return (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
        'esri/rest/support/Query'
    ]).then(modules => {
        let Query;
        [Query] = modules;
        const query = new Query();
        query.where = querySQL;
        query.outFields = ['*'];
        query.returnGeometry = true;
        return layerObject.queryFeatures(query).then(featureSet => {
            return featureSet;
        });
    });
}
function flashOnFeatureLayer(jimuMapView, querySQL, tempJimuLayerView) {
    if ((tempJimuLayerView).view) {
        let featureLayerView = (tempJimuLayerView).view;
        if (featureLayerView) {
            queryFeatures(featureLayerView.layer, querySQL).then(featureSet => {
                if (featureSet && featureSet.features && featureSet.features.length > 0) {
                    const symbol = getFlashSymbol(featureLayerView.layer.geometryType);
                    startFlash(jimuMapView.view, featureSet.features, symbol);
                }
            });
        }
        else {
            return null;
        }
    }
    else {
        (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
            'esri/layers/FeatureLayer'
        ]).then(modules => {
            let FeatureLayer;
            [FeatureLayer] = modules;
            let tempFeatureLayer = new FeatureLayer({
                url: jimu_core__WEBPACK_IMPORTED_MODULE_0__.dataSourceUtils.getUrlByLayer(tempJimuLayerView.layer)
            });
            tempFeatureLayer.load().then(() => {
                queryFeatures(tempFeatureLayer, querySQL).then(featureSet => {
                    if (featureSet && featureSet.features && featureSet.features.length > 0) {
                        const symbol = getFlashSymbol(featureSet.features[0].geometry.type);
                        startFlash(jimuMapView.view, featureSet.features, symbol);
                    }
                });
            });
        });
    }
}
let sceneHightlightHandle = null;
function flashOnSceneLayer(jimuMapView, querySQL, tempJimuLayerView) {
    var _a;
    if ((tempJimuLayerView).view) {
        let sceneLayerView = (tempJimuLayerView).view;
        // @ts-expect-error
        queryFeatures((_a = sceneLayerView === null || sceneLayerView === void 0 ? void 0 : sceneLayerView.layer) === null || _a === void 0 ? void 0 : _a.associatedLayer, querySQL).then(featureSet => {
            if (featureSet && featureSet.features && featureSet.features.length > 0) {
                const objectIdField = sceneLayerView.layer.objectIdField;
                const objectIds = featureSet.features.map(feature => feature.attributes[objectIdField]);
                let i = 0;
                const maxFlashCount = 6;
                let highlightColor = [255, 255, 0, 0.8];
                const originalHighlightOptions = jimuMapView.view.highlightOptions;
                const flash = function () {
                    if (i < maxFlashCount) {
                        i++;
                        if (highlightColor) {
                            highlightColor = null;
                            // @ts-expect-error
                            jimuMapView.view.highlightOptions = { color: [0, 0, 0, 0] };
                            sceneHightlightHandle && sceneHightlightHandle.remove();
                            sceneHightlightHandle = sceneLayerView.highlight(objectIds);
                        }
                        else {
                            highlightColor = [255, 255, 0, 0.8];
                            // @ts-expect-error
                            jimuMapView.view.highlightOptions = { color: highlightColor };
                            sceneHightlightHandle && sceneHightlightHandle.remove();
                            sceneHightlightHandle = sceneLayerView.highlight(objectIds);
                        }
                        setTimeout(flash, 500);
                    }
                    else {
                        jimuMapView.view.highlightOptions = originalHighlightOptions;
                        sceneHightlightHandle && sceneHightlightHandle.remove();
                    }
                };
                setTimeout(flash, 500);
            }
        });
    }
}
function flashFeaturesByQuery(jimuMapView, layerDataSourceId, querySQL) {
    return __awaiter(this, void 0, void 0, function* () {
        if (!layerDataSourceId) {
            return;
        }
        const dataSource = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(layerDataSourceId);
        if (!dataSource) {
            return;
        }
        let jimuLayerView = null;
        try {
            jimuLayerView = yield jimuMapView.whenJimuLayerViewLoadedByDataSource(dataSource);
        }
        catch (err) {
            jimuLayerView = null;
            console.error('can\'t get jimuLayerView by dataSource', dataSource, err);
        }
        if (jimuLayerView && jimuLayerView.layer) {
            if (jimuLayerView.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.LayerTypes.FeatureLayer) {
                flashOnFeatureLayer(jimuMapView, querySQL, jimuLayerView);
            }
            else if (jimuLayerView.type === jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.LayerTypes.SceneLayer) {
                flashOnSceneLayer(jimuMapView, querySQL, jimuLayerView);
            }
        }
    });
}
function startFlash(mapBaseView, features, symbol) {
    (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
        'esri/Graphic'
    ]).then(modules => {
        // eslint-disable-next-line
        let Graphic;
        [Graphic] = modules;
        const flashFeatures = function (features, maxFlashCount) {
            const graphics = [];
            let flashCount = 0;
            for (let i = 0; i < features.length; i++) {
                const tempGraphic = new Graphic({
                    geometry: features[i].geometry,
                    symbol: symbol,
                    attributes: features[i].attributes
                });
                graphics.push(tempGraphic);
            }
            const singleFlash = function () {
                mapBaseView.graphics.addMany(graphics);
                setTimeout(() => {
                    mapBaseView.graphics.removeMany(graphics);
                    flashCount = flashCount + 1;
                    if (flashCount < maxFlashCount) {
                        setTimeout(() => {
                            singleFlash();
                        }, 500);
                    }
                }, 500);
            };
            singleFlash();
        };
        flashFeatures(features, 3);
    });
}
function getFlashSymbol(geometryType) {
    if (['point', 'multipoint'].includes(geometryType)) {
        return {
            type: 'simple-marker',
            style: 'circle',
            color: [255, 255, 0, 0.8],
            size: '16px',
            outline: {
                color: [255, 255, 0, 0.8],
                width: 3
            }
        };
    }
    else if (['polyline'].includes(geometryType)) {
        return {
            type: 'simple-line',
            color: [255, 255, 0, 0.8],
            width: 3,
            style: 'solid'
        };
    }
    else if (['polygon', 'extent'].includes(geometryType)) {
        return {
            type: 'simple-fill', // autocasts as new SimpleFillSymbol()
            color: [255, 255, 0, 0.5],
            style: 'solid',
            outline: {
                color: [255, 255, 0, 0.8],
                width: 3
            }
        };
    }
    else if (['mesh'].includes(geometryType)) {
        return {
            type: 'mesh-3d', // autocasts as new MeshSymbol3D()
            symbolLayers: [{
                    type: 'fill', // autocasts as new FillSymbol3DLayer()
                    material: { color: [255, 255, 0, 0.8] }
                }]
        };
    }
    else {
        return null;
    }
}
function getCenterPoint(geometry) {
    // point | multipoint | polyline | polygon | extent | mesh
    switch (geometry.type) {
        case 'point':
            return geometry;
        case 'extent':
            return geometry.center;
        case 'polygon':
            return geometry.centroid;
        case 'polyline':
            return geometry.extent.center;
        default:
            return geometry && geometry.extent ? geometry.extent.center : undefined;
        // todo
    }
}
function cloneFeature(feature, Graphic) {
    let tempFeature = null;
    if (feature.clone) {
        tempFeature = feature.clone();
    }
    else {
        tempFeature = Graphic.fromJSON(Object.assign({}, feature));
        tempFeature.attributes = Object.assign({}, feature.attributes);
    }
    return tempFeature;
}
function projectGeometries(geometries, spatialReference) {
    return __awaiter(this, void 0, void 0, function* () {
        if (!geometries || geometries.length === 0 || !geometries[0] ||
            spatialReference.wkid === geometries[0].spatialReference.wkid || (spatialReference.equals(geometries[0].spatialReference))) {
            return yield Promise.resolve(geometries);
        }
        else if (spatialReference.isWebMercator && geometries[0].spatialReference.isWGS84) {
            // In js api 4.x, the view can handle WebMercator and WGS84 spatialReference auto
            return yield Promise.resolve(geometries);
        }
        else if (spatialReference.isWGS84 && geometries[0].spatialReference.isWebMercator) {
            // In js api 4.x, the view can handle WebMercator and WGS84 spatialReference auto
            return yield Promise.resolve(geometries);
        }
        else {
            return yield jimu_core__WEBPACK_IMPORTED_MODULE_0__.geometryUtils.projectToSpatialReference(geometries, spatialReference);
        }
    });
}
function processZoomToFeatures(mapBaseView, layer, features) {
    return __awaiter(this, void 0, void 0, function* () {
        if (mapBaseView && mapBaseView.type === '3d' && layer && layer.queryFeatures && features) {
            return yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_1__.loadArcGISJSAPIModules)([
                'esri/rest/support/Query'
            ]).then((modules) => {
                const [Query] = modules;
                const query = new Query();
                query.returnGeometry = true;
                query.outFields = ['*'];
                query.objectIds = features.map(feature => feature.attributes[layer.objectIdField]);
                return layer.queryFeatures(query).then((result) => __awaiter(this, void 0, void 0, function* () {
                    if (result && result.features && result.features.length === features.length) {
                        return yield Promise.resolve(result.features);
                    }
                    else {
                        return yield Promise.resolve(features);
                    }
                }), () => __awaiter(this, void 0, void 0, function* () {
                    return yield Promise.resolve(features);
                }));
            });
        }
        else {
            return yield Promise.resolve(features);
        }
    });
}
function checkIsLive(appMode) {
    if (window.jimuConfig.isInBuilder) {
        if (appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Design) {
            return false;
        }
        else {
            return true;
        }
    }
    else {
        return true;
    }
}
function getLayersFromDataSourceIds(dataSourceIds) {
    const layerPromises = [];
    dataSourceIds.forEach(dataSourceId => {
        const dataSource = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance().getDataSource(dataSourceId);
        let layerPromise;
        if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.layer) {
            layerPromise = Promise.resolve(dataSource.layer);
        }
        else if (dataSource === null || dataSource === void 0 ? void 0 : dataSource.createJSAPILayerByDataSource) {
            layerPromise = dataSource.createJSAPILayerByDataSource();
        }
        else {
            layerPromise = Promise.resolve(null);
        }
        layerPromises.push(layerPromise);
    });
    return Promise.all(layerPromises);
}
function getJimuMapViewId(widgetId, dataSourceId) {
    // If dataSourceId is null, make sure it converts to empty string.
    const dsId = dataSourceId || '';
    return `${widgetId}-${dsId}`;
}
function getMapBaseRestoreData(mapInstance) {
    const { mapContainer, state, Geometry, InitialViewProperties, TileLayer, Basemap, MapView, SceneView, Extent, Viewpoint, PortalItem, Portal, WebMap, WebScene, Color, expectedDataSourceInfo, mapCreatingInfo, view, lastUpdateViewConfig, mapDs, dsManager, isFirstReceiveMessage } = mapInstance;
    return {
        mapContainer,
        state,
        Geometry,
        InitialViewProperties,
        TileLayer,
        Basemap,
        MapView,
        SceneView,
        Extent,
        Viewpoint,
        PortalItem,
        Portal,
        WebMap,
        WebScene,
        Color,
        expectedDataSourceInfo,
        mapCreatingInfo,
        view,
        lastUpdateViewConfig,
        mapDs,
        dsManager,
        isFirstReceiveMessage
    };
}
function restoreMapBase(mapInstance, restoreData) {
    const keys = Object.keys(restoreData);
    for (const key of keys) {
        mapInstance[key] = restoreData[key];
    }
}
function isTwoWidgetsMutuallyExtentChange(widgetId1, widgetId2) {
    if (widgetId1 && widgetId2) {
        const messageConfigs = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.messageConfigs;
        if (messageConfigs) {
            const actionNames = ['panTo', 'zoomToFeature'];
            const messageType = jimu_core__WEBPACK_IMPORTED_MODULE_0__.MessageType.ExtentChange;
            if (isWidgetSendActionsToAnother(widgetId1, widgetId2, messageConfigs, messageType, actionNames) &&
                isWidgetSendActionsToAnother(widgetId2, widgetId1, messageConfigs, messageType, actionNames)) {
                return true;
            }
        }
    }
    return false;
}
function isWidgetSendZoomToActionToAnother(sendMessageWidgetId, actionWidgetId, messageType) {
    if (sendMessageWidgetId && actionWidgetId) {
        const messageConfigs = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.messageConfigs;
        if (messageConfigs) {
            const actionNames = ['zoomToFeature'];
            return isWidgetSendActionsToAnother(sendMessageWidgetId, actionWidgetId, messageConfigs, messageType, actionNames);
        }
    }
    return false;
}
function isWidgetSendActionsToAnother(sendMessageWidgetId, actionWidgetId, messageConfigs, messageType, actionNames) {
    if (messageConfigs) {
        const messageJsonArray = Object.values(messageConfigs);
        for (let i = 0; i < messageJsonArray.length; i++) {
            const messageJson = messageJsonArray[i];
            if (messageJson.widgetId === sendMessageWidgetId && messageJson.messageType === messageType) {
                const actions = messageJson.actions;
                for (let j = 0; j < actions.length; j++) {
                    const action = actions[j];
                    if (action.widgetId === actionWidgetId) {
                        if (actionNames.includes(action.actionName)) {
                            return true;
                        }
                    }
                }
            }
        }
    }
    return false;
}
function isSamelikeViewpoints(view, vp1, vp2) {
    if (!vp1) {
        return false;
    }
    if (!vp2) {
        return false;
    }
    // We need to check both targetGeometry and camera.
    if (vp1.targetGeometry && vp1.targetGeometry.declaredClass === 'esri.geometry.Point' && vp2.targetGeometry && vp2.targetGeometry.declaredClass === 'esri.geometry.Point') {
        const screenPoint1 = view.toScreen(vp1.targetGeometry);
        const screenPoint2 = view.toScreen(vp2.targetGeometry);
        const deltaX = screenPoint1.x - screenPoint2.x;
        const deltaY = screenPoint1.y - screenPoint2.y;
        const dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
        if (dist >= 5) {
            return false;
        }
    }
    const camera1 = vp1.camera;
    const camera2 = vp2.camera;
    if (camera1 && camera2) {
        // compare viewpoint for SceneView
        const heading1 = parseFloat(camera1.heading.toFixed(2));
        const heading2 = parseFloat(camera2.heading.toFixed(2));
        if (heading1 !== heading2) {
            return false;
        }
        const tilt1 = parseFloat(camera1.tilt.toFixed(2));
        const tilt2 = parseFloat(camera2.tilt.toFixed(2));
        if (tilt1 !== tilt2) {
            return false;
        }
        const positionDist = camera1.position.distance(camera2.position);
        if (positionDist >= 1) {
            return false;
        }
    }
    else {
        // compare viewpoint for MapView
        const rotation1 = parseFloat(vp1.rotation.toFixed(2));
        const rotation2 = parseFloat(vp2.rotation.toFixed(2));
        if (rotation1 !== rotation2) {
            return false;
        }
        const deltaScale = vp1.scale - vp2.scale;
        if (Math.abs(deltaScale) >= 1) {
            return false;
        }
    }
    return true;
}
function getViewpointInstanceFromHistory(view, viewpointIndex) {
    if (view.viewpointHistory.length > 0) {
        const lastIndex = view.viewpointHistory.length - 1;
        if (viewpointIndex >= 0 && viewpointIndex <= lastIndex) {
            const viewpoint = view.viewpointHistory[viewpointIndex];
            return viewpoint.clone();
        }
    }
    return null;
}
function updateUrlHashParamsForActiveJimuMapView(jimuMapView) {
    if (jimuMapView && jimuMapView.isActive && jimuMapView.view && !jimuMapView.view.destroyed) {
        const view = jimuMapView.view;
        const urlManager = jimu_core__WEBPACK_IMPORTED_MODULE_0__.UrlManager.getInstance();
        const viewpointJson = view.viewpoint ? view.viewpoint.toJSON() : null;
        const extentJson = view.extent ? view.extent.toJSON() : null;
        let mapStateStr = null;
        if (viewpointJson && extentJson) {
            const mapState = {
                viewpoint: viewpointJson,
                extent: extentJson
            };
            mapStateStr = JSON.stringify(mapState);
        }
        view.lastViewpointUpdateUrlParams = view.viewpoint ? view.viewpoint.clone() : null;
        const activeDatasourceId = jimuMapView.dataSourceId || null;
        const mapUrlHashParams = {
            active_datasource_id: activeDatasourceId,
            // if map_state is null, UrlManager will remove it from url
            map_state: mapStateStr
        };
        urlManager.setWidgetUrlParams(jimuMapView.mapWidgetId, mapUrlHashParams);
    }
}


/***/ }),

/***/ "./extensions/widgets/arcgis/arcgis-map/src/version-manager.ts":
/*!*********************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/version-manager.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   versionManager: () => (/* binding */ versionManager)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");

class VersionManager extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.BaseVersionManager {
    constructor() {
        super(...arguments);
        this.versions = [{
                version: '1.10.0',
                description: '1.10.0',
                upgrader: (oldConfig) => {
                    let newConfig;
                    if (oldConfig.toolConifg) {
                        // fix typo for 'toolConifg'
                        newConfig = jimu_core__WEBPACK_IMPORTED_MODULE_0__.Immutable.without(oldConfig, 'toolConifg');
                        newConfig = newConfig.set('toolConfig', oldConfig.toolConifg);
                    }
                    return newConfig;
                }
            }];
    }
}
const versionManager = new VersionManager();


/***/ }),

/***/ "./jimu-icons/filled/data/placeholder-map.tsx":
/*!****************************************************!*\
  !*** ./jimu-icons/filled/data/placeholder-map.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PlaceholderMapFilled: () => (/* binding */ PlaceholderMapFilled)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_filled_data_placeholder_map_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/filled/data/placeholder-map.svg */ "./jimu-icons/svg/filled/data/placeholder-map.svg");
/* harmony import */ var _svg_filled_data_placeholder_map_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_filled_data_placeholder_map_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const PlaceholderMapFilled = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_filled_data_placeholder_map_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-fat-left.tsx":
/*!************************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-fat-left.tsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowFatLeftOutlined: () => (/* binding */ ArrowFatLeftOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_fat_left_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-fat-left.svg */ "./jimu-icons/svg/outlined/directional/arrow-fat-left.svg");
/* harmony import */ var _svg_outlined_directional_arrow_fat_left_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_fat_left_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ArrowFatLeftOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_fat_left_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "./jimu-icons/outlined/directional/arrow-fat-right.tsx":
/*!*************************************************************!*\
  !*** ./jimu-icons/outlined/directional/arrow-fat-right.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArrowFatRightOutlined: () => (/* binding */ ArrowFatRightOutlined)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _svg_outlined_directional_arrow_fat_right_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../svg/outlined/directional/arrow-fat-right.svg */ "./jimu-icons/svg/outlined/directional/arrow-fat-right.svg");
/* harmony import */ var _svg_outlined_directional_arrow_fat_right_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_svg_outlined_directional_arrow_fat_right_svg__WEBPACK_IMPORTED_MODULE_1__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};


const ArrowFatRightOutlined = (props) => {
    const SVG = window.SVG;
    const { className } = props, others = __rest(props, ["className"]);
    const classes = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('jimu-icon jimu-icon-component', className);
    if (!SVG)
        return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("svg", Object.assign({ className: classes }, others));
    return jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(SVG, Object.assign({ className: classes, src: (_svg_outlined_directional_arrow_fat_right_svg__WEBPACK_IMPORTED_MODULE_1___default()) }, others));
};


/***/ }),

/***/ "jimu-arcgis":
/*!******************************!*\
  !*** external "jimu-arcgis" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_arcgis__;

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "jimu-layouts/layout-runtime":
/*!**********************************************!*\
  !*** external "jimu-layouts/layout-runtime" ***!
  \**********************************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_layouts_layout_runtime__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
// eslint-disable-next-line
// @ts-ignore
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*********************************************************************!*\
  !*** ./extensions/widgets/arcgis/arcgis-map/src/runtime/widget.tsx ***!
  \*********************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var _components_multisourcemap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/multisourcemap */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/multisourcemap.tsx");
/* harmony import */ var _components_default_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/default-map */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/components/default-map.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/utils.ts");
/* harmony import */ var jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jimu-arcgis */ "jimu-arcgis");
/* harmony import */ var jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jimu-layouts/layout-runtime */ "jimu-layouts/layout-runtime");
/* harmony import */ var _version_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../version-manager */ "./extensions/widgets/arcgis/arcgis-map/src/version-manager.ts");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var _translations_default__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./translations/default */ "./extensions/widgets/arcgis/arcgis-map/src/runtime/translations/default.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
/** @jsx jsx */









class Widget extends jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.PureComponent {
    constructor(props) {
        super(props);
        this.multiSourceMapInstance = null;
        this.activeJimuMapView = null;
        this.watchSelectedFeatureHandle = null;
        this.dataActionListContainer = null;
        this.reactiveUtils = null;
        this.popupDomNodeObserver = null;
        this.startRenderMap = () => {
            setTimeout(() => {
                this.setState({
                    startLoadModules: true
                });
            }, 100);
        };
        this.getPlaceHolderImage = () => {
            let placeHolderImage = this.props.config.placeholderImage;
            const session = jimu_core__WEBPACK_IMPORTED_MODULE_0__.SessionManager.getInstance().getMainSession();
            if (placeHolderImage) {
                // eslint-disable-next-line
                const isPortalThumbExp = new RegExp('^(.)+/sharing/rest/content/items/(.)+/info/(.)+');
                if (isPortalThumbExp.test(placeHolderImage)) {
                    if (session) {
                        placeHolderImage = placeHolderImage + `?token=${session.token}`;
                    }
                    else {
                        // eslint-disable-next-line no-self-assign
                        placeHolderImage = placeHolderImage;
                    }
                }
            }
            return placeHolderImage;
        };
        this.fullScreenHanlder = (event) => {
            if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                this.setState({
                    isFullScreen: false
                });
            }
        };
        this.fullScreenMap = () => {
            if (jimu_core__WEBPACK_IMPORTED_MODULE_0__.utils.isTouchDevice()) {
                // is touch device
                if (this.container.style.position === 'fixed') {
                    this.container.style.height = `${this.containerClientRect.height}px`;
                    this.container.style.width = `${this.containerClientRect.width}px`;
                    this.container.style.top = `${this.containerClientRect.top}px`;
                    this.container.style.left = `${this.containerClientRect.left}px`;
                    setTimeout(() => {
                        this.container.style.transition = null;
                        this.container.style.position = 'relative';
                        this.container.style.height = '100%';
                        this.container.style.width = '100%';
                        this.container.style.top = '0';
                        this.container.style.left = '0';
                        this.container.style.backgroundColor = 'none';
                        this.parentContainer.appendChild(this.container);
                        this.setState({
                            isFullScreen: false
                        });
                    }, 100);
                }
                else {
                    const clientRect = this.container.getBoundingClientRect();
                    this.containerClientRect = clientRect;
                    this.container.style.height = `${clientRect.height}px`;
                    this.container.style.width = `${clientRect.width}px`;
                    this.container.style.position = 'fixed';
                    this.container.style.top = `${clientRect.top}px`;
                    this.container.style.left = `${clientRect.left}px`;
                    this.container.style.zIndex = '1';
                    document && document.body.appendChild(this.container);
                    setTimeout(() => {
                        this.container.style.transition = 'top 0.3s, bottom 0.3s, left 0.3s, right 0.3s, height 0.3s, width 0.3s';
                        this.container.style.top = '0px';
                        this.container.style.left = '0px';
                        this.container.style.right = '0px';
                        this.container.style.bottom = '0px';
                        this.container.style.height = null;
                        this.container.style.width = null;
                        this.container.style.backgroundColor = '#fff';
                        this.setState({
                            isFullScreen: true
                        });
                    }, 100);
                }
            }
            else {
                const element = this.container;
                if (!document) {
                    return;
                }
                document.addEventListener('webkitfullscreenchange', this.fullScreenHanlder);
                document.addEventListener('fullscreenchange', this.fullScreenHanlder);
                if (document.fullscreenElement === element) {
                    document.exitFullscreen();
                    this.setState({
                        isFullScreen: false
                    });
                    return;
                }
                if (document.webkitFullscreenElement === element) {
                    document.webkitCancelFullScreen();
                    this.setState({
                        isFullScreen: false
                    });
                    return;
                }
                const requestMethod = element.requestFullScreen || element.webkitRequestFullScreen || element.mozRequestFullScreen || element.msRequestFullScreen;
                if (requestMethod) {
                    this.setState({
                        isFullScreen: true
                    });
                    requestMethod.call(element);
                }
                else if (typeof window.ActiveXObject !== 'undefined') {
                    const wscript = new ActiveXObject('WScript.Shell');
                    if (wscript !== null) {
                        wscript.SendKeys('{F11}');
                    }
                }
            }
        };
        this.handleViewGroupCreate = (viewGroup) => {
            if (viewGroup) {
                viewGroup.setMapWidgetInstance(this);
            }
        };
        this.onJimuMapViewCreated = (jimuMapView) => {
            jimuMapView.setMapWidgetState(this.props.state);
            this.setShowPopupUponSelectionForJimuMapView(jimuMapView);
        };
        this.onActiveJimuMapViewChange = (jimuMapView) => {
            this.activeJimuMapView = jimuMapView;
            this.watchPopupSelectedFeatureChange();
        };
        this.switchMap = (ignoreSwitchAnimation = false) => __awaiter(this, void 0, void 0, function* () {
            if (this.multiSourceMapInstance) {
                return yield this.multiSourceMapInstance.switchMap(ignoreSwitchAnimation);
            }
            else {
                yield Promise.resolve();
            }
        });
        this.setMultiSourceMapInstance = (instance) => {
            this.multiSourceMapInstance = instance;
        };
        this.onResize = (width, height) => {
            if (!width || !height) {
                return;
            }
            if (width <= 545 && width > 0) {
                this.setState({
                    widthBreakpoint: 'xsmall',
                    widgetHeight: height
                });
            }
            else {
                this.setState({
                    widthBreakpoint: 'other',
                    widgetHeight: height
                });
            }
        };
        this.isLoadingDisplayed = () => {
            var _a;
            const addToMapDatas = ((_a = this.props.mutableStateProps) === null || _a === void 0 ? void 0 : _a.addToMapDatas) || {};
            return Object.values(addToMapDatas).some(value => (value === null || value === void 0 ? void 0 : value.dataChangeStatus) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.DataChangeStatus.Pending);
        };
        this.isWarningDisplayed = () => {
            var _a;
            const addToMapDatas = ((_a = this.props.mutableStateProps) === null || _a === void 0 ? void 0 : _a.addToMapDatas) || {};
            return Object.values(addToMapDatas).some(value => (value === null || value === void 0 ? void 0 : value.dataChangeStatus) === jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.DataChangeStatus.Rejected);
        };
        this.getInnerContent = (isMapInVisibleArea) => {
            if (!this.state.startLoadModules) {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100 h-100' },
                    (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'widget-map w-100 h-100' },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { style: { position: 'absolute', left: '50%', top: '50%' }, className: 'jimu-secondary-loading' }))));
            }
            else {
                if (!(this.props.useDataSources && this.props.useDataSources[0] && this.props.useDataSources[0].dataSourceId)) {
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', ref: ref => { this.parentContainer = ref; } },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100 h-100', ref: ref => { this.container = ref; } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100', { 'map-is-design-mode': !(0,_utils__WEBPACK_IMPORTED_MODULE_3__.checkIsLive)(this.props.appMode) }) },
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_default_map__WEBPACK_IMPORTED_MODULE_2__["default"], { fullScreenMap: this.fullScreenMap, baseWidgetProps: this.props, startLoadModules: this.state.startLoadModules, isDefaultMap: true, setMultiSourceMapInstance: this.setMultiSourceMapInstance, onViewGroupCreate: this.handleViewGroupCreate, onJimuMapViewCreated: this.onJimuMapViewCreated, onActiveJimuMapViewChange: this.onActiveJimuMapViewChange, widgetHeight: this.state.widgetHeight, widthBreakpoint: this.state.widthBreakpoint, isFullScreen: this.state.isFullScreen, isMapInVisibleArea: isMapInVisibleArea, autoControlWidgetId: this.props.autoControlWidgetId })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: this.onResize }))));
                }
                else {
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'w-100 h-100', ref: ref => { this.parentContainer = ref; } },
                        (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { css: this.getStyle(), className: 'w-100 h-100', ref: ref => { this.container = ref; } },
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.classNames)('w-100 h-100', { 'map-is-design-mode': !(0,_utils__WEBPACK_IMPORTED_MODULE_3__.checkIsLive)(this.props.appMode) }) }, this.props.useDataSources.length >= 1 &&
                                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_multisourcemap__WEBPACK_IMPORTED_MODULE_1__["default"], { key: 1, fullScreenMap: this.fullScreenMap, baseWidgetProps: this.props, startLoadModules: this.state.startLoadModules, ref: this.setMultiSourceMapInstance, onViewGroupCreate: this.handleViewGroupCreate, onJimuMapViewCreated: this.onJimuMapViewCreated, onActiveJimuMapViewChange: this.onActiveJimuMapViewChange, widgetHeight: this.state.widgetHeight, widthBreakpoint: this.state.widthBreakpoint, isFullScreen: this.state.isFullScreen, isMapInVisibleArea: isMapInVisibleArea, autoControlWidgetId: this.props.autoControlWidgetId })),
                            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactResizeDetector, { handleWidth: true, handleHeight: true, onResize: this.onResize }))));
                }
            }
        };
        this.warningIcon = `<svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.09926 5.37004C7.04598 4.83729 7.46434 4.375 7.99975 4.375C8.53516 4.375 8.95353 4.83728 8.90025 5.37004L8.5495 8.87748C8.52126 9.15992 8.2836 9.375 7.99975 9.375C7.71591 9.375 7.47825 9.15992 7.45 8.87748L7.09926 5.37004Z" fill="#938500"/>
                        <path d="M7.99975 12.375C8.55204 12.375 8.99975 11.9273 8.99975 11.375C8.99975 10.8227 8.55204 10.375 7.99975 10.375C7.44747 10.375 6.99975 10.8227 6.99975 11.375C6.99975 11.9273 7.44747 12.375 7.99975 12.375Z" fill="#938500"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.66642 14.375C0.9115 14.375 0.428811 13.5705 0.784067 12.9044L7.1174 1.02941C7.49387 0.323529 8.50564 0.323529 8.88211 1.02941L15.2154 12.9044C15.5707 13.5705 15.088 14.375 14.3331 14.375H1.66642ZM1.66642 13.375L7.99975 1.5L14.3331 13.375H1.66642Z" fill="#938500"/>
                        </svg>`;
        this.state = {
            widthBreakpoint: null,
            widgetHeight: null,
            isFullScreen: false,
            dataActionDataSet: null
        };
        this.dataActionListContainer = document.createElement('div');
        this.dataActionListContainer.className = 'data-action-list-wrapper';
        this.loadReactiveUtils();
    }
    getWidgetSyle() {
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      .map-loading-bar {
        z-index: 8;
      }

      .map-warning-bar {
        z-index: 8;
        position: absolute;
        bottom: 4px;
        left: 4px;
        right: 4px;
        height: 35px;
        background: #fffdeb;
        border: 1px solid #fff592;
        display: flex;
        align-items: center;
        justify-content: flex-start;

        .warning-icon {
          width: 14px;
          margin: 0 12px 0 12px;
        }
      }

      .map-fix-layout {
        position: absolute !important;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        z-index: 7;
        pointer-events: none;
      }

      .hide-map-tools-layout .map-tool-layout{
        display: none;
      }

      .esri-view-root > .esri-ui {
        z-index: unset;
      }

      .esri-ui-manual-container .esri-swipe {
        z-index: 0;
      }

      .esri-ui .esri-popup {
        z-index: 9;
      }

      .data-action-list-wrapper {
        margin: 3px;
      }
    `;
    }
    getStyle() {
        const theme = this.props.theme;
        return (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.css) `
      position: relative;

      .map-is-live-mode {
        .exbmap-ui {
          pointer-events: auto !important;
        }

        .is-widget {
          pointer-events: auto !important;
        }
      }

      .widget-map-usemask {
        pointer-events: auto !important;
      }

      .map-is-design-mode {
        .exbmap-ui,
        .exbmap-ui-tool {
          pointer-events: none !important;
        }

        .is-widget {
          pointer-events: auto !important;
        }
      }

      .widget-map{
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
        z-index: -1;
        .overview-container{
          position: absolute;
          top: 12px;
          right: 12px;
          width: 300px;
          height: 200px;
          border: 1px solid black;
          z-index: 1;
        }

        .extent-container{
          background-color: rgba(0, 0, 0, 0.5);
          position: absolute;
          z-index: 2;
        }

        .extent-btn-container{
          button{
            outline: none;
          }
          .previous-extent-btn{
            color: #111;
          }
          .next-extent-btn{
            color: #222;
          }
        }
      }

      .mapswitch-container {
        position: absolute;
        z-index: 7;
        width: 32px;
        height: 32px;
        bottom: 10px;
        left: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3)
      }

      .mapswitch-icon {
        fill: black;
        left: 8px;
        top: 8px;
        position: absolute;
        display: block;
      }

      .widget-map-background {
        background-color: ${theme.colors.white};
        position: absolute;
        z-index: 1;
      }

      .widget-map-crashed {
        background-color: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rgba(theme.colors.white, 0.85)};
        position: absolute;
        z-index: 1;
        top: 0;

        .widget-map-crashed-label-padding {
          padding-left: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
          padding-right: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(24)};
        }

        .widget-map-crashed-label {
          font-size: ${jimu_core__WEBPACK_IMPORTED_MODULE_0__.polished.rem(13)};
          color: ${theme.colors.black};
          font-weight: bold;
          text-align: center;
        }
      }

      @keyframes appear {
        0%{opacity:0}
        25%{opacity:.25}
        50%{opacity:.5;}
        75%{opacity:.75}
        100%{opacity:1;}
      }

      @keyframes disappear {
        0%{opacity:1}
        25%{opacity:.75}
        50%{opacity:.5;}
        75%{opacity:.25}
        100%{opacity:0;}
      }

      .multisourcemap-item-appear {
        animation: appear 300ms;
        -webkit-animation: appear 300ms;
        -moz-animation: appear 300ms;
        animation-fill-mode: forwards;
        -webkit-animation-fill-mode: forwards;
        -moz-animation-fill-mode: forwards;
        animation-timing-function: ease-in;
        -webkit-animation-timing-function: ease-in;
        -moz-animation-timing-function: ease-in;
      }

      .multisourcemap-item-disappear {
        animation: disappear 300ms;
        -webkit-animation: disappear 300ms;
        -moz-animation: disappear 300ms;
        animation-fill-mode: forwards;
        -webkit-animation-fill-mode: forwards;
        -moz-animation-fill-mode: forwards;
        animation-timing-function: ease-in;
        -webkit-animation-timing-function: ease-in;
        -moz-animation-timing-function: ease-in;
      }

      .multisourcemap-item-appear-noanimate {
        opacity: 1;
      }

      .multisourcemap-item-disappear-noanimate {
        opacity: 0;
      }
      `;
    }
    componentDidMount() {
        if (!this.state.startLoadModules) {
            if (window.jimuConfig.isInBuilder || !this.props.config.canPlaceHolder) {
                this.startRenderMap();
            }
        }
    }
    componentDidUpdate(prevProps, prevState) {
        var _a, _b, _c;
        // check if props.state changed or not
        const preWidgetState = prevProps.state;
        const currWidgetState = this.props.state;
        if (preWidgetState !== currWidgetState) {
            const jimuMapViews = this.getJimuMapViews();
            jimuMapViews.forEach((jimuMapView) => {
                jimuMapView.setMapWidgetState(currWidgetState);
            });
        }
        // check if props.config.showPopupUponSelection changed or not
        const preShowPopupUponSelection = !!((_a = prevProps === null || prevProps === void 0 ? void 0 : prevProps.config) === null || _a === void 0 ? void 0 : _a.showPopupUponSelection);
        const curShowPopupUponSelection = !!((_c = (_b = this.props) === null || _b === void 0 ? void 0 : _b.config) === null || _c === void 0 ? void 0 : _c.showPopupUponSelection);
        if (preShowPopupUponSelection !== curShowPopupUponSelection) {
            const jimuMapViews = this.getJimuMapViews();
            jimuMapViews.forEach((jimuMapView) => {
                this.setShowPopupUponSelectionForJimuMapView(jimuMapView);
            });
        }
        // check if props.enableDataAction changed or not
        const preEnableDataAction = prevProps === null || prevProps === void 0 ? void 0 : prevProps.enableDataAction;
        const currEnableDataAction = this.props.enableDataAction;
        if (preEnableDataAction !== currEnableDataAction) {
            console.log('enableDataAction changed');
            this.handleDataActionWhenPopupSelectedFeatureChange(this.activeJimuMapView);
        }
    }
    componentWillUnmount() {
        const widgets = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState().appConfig.widgets;
        document.removeEventListener('webkitfullscreenchange', this.fullScreenHanlder);
        document.removeEventListener('fullscreenchange', this.fullScreenHanlder);
        if (!widgets[this.props.id]) {
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.MutableStoreManager.getInstance().updateStateValue(this.props.id, 'restoreData', null);
        }
    }
    getJimuMapViews() {
        let jimuMapViews = [];
        const jimuMapViewGroup = jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.MapViewManager.getInstance().getJimuMapViewGroup(this.props.id);
        if (jimuMapViewGroup) {
            jimuMapViews = jimuMapViewGroup.getAllJimuMapViews();
        }
        return jimuMapViews;
    }
    setShowPopupUponSelectionForJimuMapView(jimuMapView) {
        if (jimuMapView) {
            jimuMapView.setShowPopupUponSelection(!!this.props.config.showPopupUponSelection);
        }
    }
    getCurrentPopupSelectedFeature() {
        var _a, _b, _c;
        return (_c = (_b = (_a = this.activeJimuMapView) === null || _a === void 0 ? void 0 : _a.view) === null || _b === void 0 ? void 0 : _b.popup) === null || _c === void 0 ? void 0 : _c.selectedFeature;
    }
    loadReactiveUtils() {
        return __awaiter(this, void 0, void 0, function* () {
            [this.reactiveUtils] = (yield (0,jimu_arcgis__WEBPACK_IMPORTED_MODULE_4__.loadArcGISJSAPIModules)(['esri/core/reactiveUtils']));
            this.watchPopupSelectedFeatureChange();
        });
    }
    watchPopupSelectedFeatureChange() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.watchSelectedFeatureHandle) {
                this.watchSelectedFeatureHandle.remove();
                this.watchSelectedFeatureHandle = null;
            }
            const activeJimuMapView = this.activeJimuMapView;
            if (!activeJimuMapView || !this.reactiveUtils) {
                return;
            }
            if (this.getCurrentPopupSelectedFeature()) {
                this.handleDataActionWhenPopupSelectedFeatureChange(activeJimuMapView);
            }
            this.watchSelectedFeatureHandle = this.reactiveUtils.watch(() => { var _a, _b; return (_b = (_a = activeJimuMapView === null || activeJimuMapView === void 0 ? void 0 : activeJimuMapView.view) === null || _a === void 0 ? void 0 : _a.popup) === null || _b === void 0 ? void 0 : _b.selectedFeature; }, () => __awaiter(this, void 0, void 0, function* () {
                this.handleDataActionWhenPopupSelectedFeatureChange(activeJimuMapView);
            }));
        });
    }
    handleDataActionWhenPopupSelectedFeatureChange(activeJimuMapView) {
        var _a;
        return __awaiter(this, void 0, void 0, function* () {
            const popup = (_a = activeJimuMapView === null || activeJimuMapView === void 0 ? void 0 : activeJimuMapView.view) === null || _a === void 0 ? void 0 : _a.popup;
            const originalSelectedFeature = popup === null || popup === void 0 ? void 0 : popup.selectedFeature;
            // firstly, we need to remove dataActionListContainer from popup domNode,
            // when state.dataActionDataSet is ready, we can add dataActionListContainer to popup domNode
            if (this.dataActionListContainer.parentNode) {
                this.dataActionListContainer.parentNode.removeChild(this.dataActionListContainer);
            }
            this.releasePopupDomNodeObserver();
            yield this.updateDataActionDataSet(null);
            const isDataActionEnabled = this.isDataActionEnabled();
            if (isDataActionEnabled && originalSelectedFeature) {
                const dataActionDataSet = yield this.getDataActionDataSet(activeJimuMapView, originalSelectedFeature);
                // getDataActionDataSet may take a long time, so we need to check should we go on or not
                if (this.getCurrentPopupSelectedFeature() !== originalSelectedFeature) {
                    return;
                }
                yield this.updateDataActionDataSet(dataActionDataSet);
                if (this.getCurrentPopupSelectedFeature() !== originalSelectedFeature) {
                    return;
                }
                this.watchPopupDomNodeChange(popup);
            }
        });
    }
    updateDataActionDataSet(dataActionDataSet) {
        return new Promise((resolve) => {
            this.setState({
                dataActionDataSet
            }, () => {
                resolve();
            });
        });
    }
    releasePopupDomNodeObserver() {
        if (this.popupDomNodeObserver) {
            this.popupDomNodeObserver.disconnect();
            this.popupDomNodeObserver = null;
        }
    }
    watchPopupDomNodeChange(popup) {
        this.releasePopupDomNodeObserver();
        const popupDomNode = (popup.domNode || popup.container);
        this.tryAppendDataActionListDomNodeToPopup(popupDomNode);
        const config = {
            childList: true,
            subtree: true
        };
        const callback = (mutationsList) => {
            for (const mutation of mutationsList) {
                if (mutation.type === 'childList') {
                    this.tryAppendDataActionListDomNodeToPopup(popupDomNode);
                }
            }
        };
        const observer = new MutationObserver(callback);
        observer.observe(popupDomNode, config);
        this.popupDomNodeObserver = observer;
    }
    tryAppendDataActionListDomNodeToPopup(popupDomNode) {
        const selector = 'calcite-action-bar[slot="action-bar"]';
        const popupActionsContainer = popupDomNode.querySelector(selector);
        if (popupActionsContainer && !popupActionsContainer.contains(this.dataActionListContainer)) {
            // this.dataActionListContainer is not in popup
            if (this.state.dataActionDataSet) {
                // DataActionList domNode is ready, we can add it to popup domNode now
                if (this.dataActionListContainer.parentNode) {
                    this.dataActionListContainer.parentNode.removeChild(this.dataActionListContainer);
                }
                // append this.dataActionListContainer into popupActionsContainer as the first child
                if (popupActionsContainer.firstChild) {
                    popupActionsContainer.insertBefore(this.dataActionListContainer, popupActionsContainer.firstChild);
                }
                else {
                    popupActionsContainer.appendChild(this.dataActionListContainer);
                }
            }
        }
    }
    getDataActionDataSet(jimuMapView, selectedFeature) {
        return __awaiter(this, void 0, void 0, function* () {
            let jimuLayerView = null;
            // If the selectedFeature is from JimuLayerView selection, we can get the jimuLayerViewId.
            // See JimuFeatureLayerView.getSelectedFeatures() for more details.
            const jimuLayerViewId = selectedFeature.jimuLayerViewId;
            if (jimuLayerViewId) {
                jimuLayerView = jimuMapView.jimuLayerViews[jimuLayerViewId];
            }
            // If jimuLayerView is still null, means the selectedFeature comes from clicking map, we can try to find the jimuLayerView by layer.
            if (!jimuLayerView) {
                const allJimuLayerViews = Object.values(jimuMapView.jimuLayerViews);
                if (selectedFeature.layer) {
                    jimuLayerView = allJimuLayerViews.find(item => item.layer === selectedFeature.layer);
                }
                if (!jimuLayerView) {
                    // If the selected feature commes from esri.layers.support.Sublayer, then the selectedFeature.layer is null and selectedFeature.sourceLayer is not null.
                    const sourceLayer = selectedFeature.sourceLayer;
                    if (sourceLayer) {
                        jimuLayerView = allJimuLayerViews.find(item => item.layer === sourceLayer);
                    }
                }
            }
            if (!jimuLayerView) {
                return null;
            }
            let layerDataSource = jimuLayerView.getLayerDataSource();
            if (!layerDataSource) {
                layerDataSource = yield jimuLayerView.createLayerDataSource();
            }
            if (layerDataSource) {
                const sourceLabel = layerDataSource.getLabel() || '';
                const stringKey = 'mapCurrentRecord';
                const dataSetName = this.props.intl.formatMessage({ id: stringKey, defaultMessage: _translations_default__WEBPACK_IMPORTED_MODULE_8__["default"][stringKey] }, { layerName: sourceLabel });
                const record = layerDataSource.buildRecord(selectedFeature);
                const dataSet = {
                    dataSource: layerDataSource,
                    name: dataSetName,
                    type: 'current',
                    records: [record]
                };
                return dataSet;
            }
            return null;
        });
    }
    isDataActionEnabled() {
        // By default, this.props.enableDataAction is undefined, which means enabled.
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-boolean-literal-compare
        return this.props.enableDataAction !== false;
    }
    renderDataActionList() {
        const isDataActionEnabled = this.isDataActionEnabled();
        if (isDataActionEnabled && this.state.dataActionDataSet) {
            // render the DataActionList into this.dataActionListContainer, so we can append it to popup domNode
            return jimu_core__WEBPACK_IMPORTED_MODULE_0__.ReactDOM.createPortal((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_7__.DataActionList, { widgetId: this.props.id, dataSets: [this.state.dataActionDataSet], disableDataSourceLevelActions: true, listStyle: jimu_ui__WEBPACK_IMPORTED_MODULE_7__.DataActionListStyle.Dropdown, hideGroupTitle: true }), this.dataActionListContainer);
        }
        return null;
    }
    render() {
        const dataActionList = this.renderDataActionList();
        return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'jimu-widget arcgis-map', css: this.getWidgetSyle() },
            this.isLoadingDisplayed() && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_7__.Loading, { className: 'map-loading-bar', type: jimu_ui__WEBPACK_IMPORTED_MODULE_7__.LoadingType.Bar }),
            this.isWarningDisplayed() && (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: 'map-warning-bar' },
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_ui__WEBPACK_IMPORTED_MODULE_7__.Icon, { className: 'warning-icon', icon: this.warningIcon, size: 26, currentColor: false }),
                (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", null, this.props.intl.formatMessage({ id: 'failToAddTheDataOnMap', defaultMessage: 'Fail to add the data.' }))),
            dataActionList,
            (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.PageVisibilityContext.Consumer, null, (isPageVisible) => {
                return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.ViewportVisibilityContext.Consumer, null, (isVisibleInViewPort) => {
                    return ((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.jsx)(jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_5__.ViewVisibilityContext.Consumer, null, (viewVisibilityContextProps) => {
                        // isPageVisible:
                        // App can have page1, page2, isPageVisible is used to judge whether the current page is visible.
                        // isVisibleInViewPort:
                        // When scrolling the scroll page, the widget may be scrolled out of the current viewport,
                        // isVisibleInViewPort is used to determine whether the current widget is in the viewport of the browser.
                        // isPrintPreview
                        // isPrintPreview is used to determine whether it is currently in browser printing mode.
                        // isVisibleInView:
                        // The widget is ultimately placed in a view in a layout. It is possible that we have a section with multiple views in it, similar to tabs.
                        // isVisibleInView is used to determine whether the widget is in the currently visible view.
                        const isVisibleInView = viewVisibilityContextProps.isInView ? viewVisibilityContextProps.isInCurrentView : true;
                        // isMapInVisibleArea:
                        // isMapInVisibleArea is used to finally determine whether the dom of the map is visible to the user.
                        // Here we use (isVisibleInViewPort || this.props.isPrintPreview), not only isVisibleInViewPort, consider the following case.
                        // Case:
                        // We create a scroll page with map. We scroll the page and the map is not visible for user.
                        // User wants to print the scroll page, including the map (even the map is not visible).
                        // Then the user enables print view mode by a button. Now, isVisibleInViewPort is false and this.props.isPrintPreview is true.
                        // We need to make sure the map widget is visible (let isMapInVisibleArea be true) when in print view mode, otherwise the print result will lose map.
                        // So we use (isVisibleInViewPort || this.props.isPrintPreview), instead of this.props.isPrintPreview.
                        const isMapInVisibleArea = isPageVisible && (isVisibleInViewPort || this.props.isPrintPreview) && isVisibleInView;
                        return this.getInnerContent(isMapInVisibleArea);
                    }));
                }));
            })));
    }
}
Widget.versionManager = _version_manager__WEBPACK_IMPORTED_MODULE_6__.versionManager;
Widget.mapExtraStateProps = (state, props) => {
    var _a;
    let autoControlWidgetId = '';
    const mapWidgetId = props.id;
    if (state.mapWidgetsInfo && mapWidgetId) {
        autoControlWidgetId = ((_a = state.mapWidgetsInfo[mapWidgetId]) === null || _a === void 0 ? void 0 : _a.autoControlWidgetId) || '';
    }
    const appMode = state && state.appRuntimeInfo && state.appRuntimeInfo.appMode;
    const isRunAppMode = appMode === jimu_core__WEBPACK_IMPORTED_MODULE_0__.AppMode.Run;
    let runtimeUrlHashParams = null;
    if (isRunAppMode && state.urlHashObject) {
        runtimeUrlHashParams = state.urlHashObject[mapWidgetId];
    }
    return {
        appMode: appMode,
        isPrintPreview: state.appRuntimeInfo.isPrintPreview,
        queryObject: state.queryObject,
        autoControlWidgetId,
        isRunAppMode,
        runtimeUrlHashParams
    };
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Widget);
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9kaXN0L3J1bnRpbWUvd2lkZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7Ozs7OztBQ0dBLElBQVksZ0JBS1g7QUFMRCxXQUFZLGdCQUFnQjtJQUMxQixpQ0FBYTtJQUNiLCtCQUFXO0lBQ1gscUNBQWlCO0lBQ2pCLGlDQUFhO0FBQ2YsQ0FBQyxFQUxXLGdCQUFnQixLQUFoQixnQkFBZ0IsUUFLM0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUjRDO0FBRVA7QUFDTztBQUMwRDtBQTZCeEYsTUFBTSxVQUFXLFNBQVEsNENBQUssQ0FBQyxhQUEyQjtJQUN2RSxZQUFhLEtBQUs7UUFDaEIsS0FBSyxDQUFDLEtBQUssQ0FBQztRQUVaLElBQUksQ0FBQyxLQUFLLEdBQUc7WUFDWCxjQUFjLEVBQUUsSUFBSTtTQUNyQjtJQUNILENBQUM7SUFFRCxpQkFBaUI7UUFDZixvREFBVyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRTtZQUN2RixJQUFJLENBQUMsUUFB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LElBQUk7SUFFakQsSUFBSSxZQUFZLElBQUksS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3hDLG9CQUFvQixHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDO0lBQ3pELENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxFQUFFLE9BQU87UUFDaEIsY0FBYyxFQUFFLEtBQUssQ0FBQyxjQUFjLENBQUMsY0FBYztRQUNuRCxXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVc7UUFDOUIsbUJBQW1CO1FBQ25CLFlBQVk7UUFDWixvQkFBb0I7S0FDckI7QUFDSCxDQUFDO2lFQXRSa0IsTUFBTTtBQTAxQm5CLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvYmFzZW1hcC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvY2xvc2UtMTIuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL2V4Y2hhbmdlLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy9leGl0LWZ1bGwtc2NyZWVuLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy9mdWxsLXNjcmVlbi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvbGF5ZXJsaXN0LnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy9tZWFzdXJlLWFyZWEuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL21lYXN1cmUtZGlzdGFuY2Uuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL21lYXN1cmUuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3NlYXJjaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LWNpcmNsZS5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LWNsZWFyLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtbGFzc28uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1saW5lLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtcG9pbnQuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1yZWN0YW5nbGUuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC16b29tdG8uc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9maWxsZWQvZGF0YS9wbGFjZWhvbGRlci1tYXAuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1mYXQtbGVmdC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWZhdC1yaWdodC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvc3ZnL291dGxpbmVkL2VkaXRvci90cmFzaC5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtdWkvbGliL2ljb25zL2Fycm93LWRvd24taGVhZGVyLnN2ZyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vamltdS11aS9saWIvaWNvbnMvbW9yZS0xNi5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtdWkvbGliL2ljb25zL3dpZGdldHMuc3ZnIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvZGVmYXVsdC1tYXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9tYXAtdGh1bWIudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvY29tcG9uZW50cy9tYXBiYXNlLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvbXVsdGlzb3VyY2VtYXAtY29udGV4dC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2NvbXBvbmVudHMvbXVsdGlzb3VyY2VtYXAudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvbGF5b3V0L2Jhc2UvYmFzZS10b29sLXNoZWxsLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2xheW91dC9iYXNlL2Jhc2UtdG9vbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvYmFzZS9ncm91cC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvYmFzZS9wYW5lbC1zaGVsbC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvYmFzZS9zY3JvbGwtY29udGFpbmVyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2xheW91dC9iYXNlL3VpLWNvbXBvbmVudC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2xheW91dC9tYXAtZml4ZWQtbGF5b3V0LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL2xheW91dC9tb2JpbGUtbGF5b3V0LWpzb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvcGMtbGF5b3V0LWpzb24udHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS9sYXlvdXQvdG9vbC1tb2R1bGVzLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvYXR0cmlidXRpb24udHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvYmFzZW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9jbGVhci1hY3Rpb24tZGF0YS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9jb21wYXNzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL2V4dGVudC1uYXZpZ2F0ZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9mdWxsc2NyZWVuLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL2hvbWUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvbGF5ZXJzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL2xvY2F0ZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9tYXBzd2l0Y2gudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvbWVhc3VyZS50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9uYXZpZ2F0aW9uLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL3NjYWxlYmFyLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL3NlYXJjaC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9zZWxlY3QvaW5kZXgudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvc2VsZWN0L3NlbGVjdC1tb2JpbGUudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdG9vbHMvc2VsZWN0L3NlbGVjdC1wYy50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy9zZWxlY3Qvc2VsZWN0LXByb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL3NlbGVjdHN0YXRlL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3Rvb2xzL3NlbGVjdHN0YXRlL3NlbGVjdGVkLW51bWJlci50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvcnVudGltZS90b29scy96b29tLnRzeCIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3RyYW5zbGF0aW9ucy9kZWZhdWx0LnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9leHRlbnNpb25zL3dpZGdldHMvYXJjZ2lzL2FyY2dpcy1tYXAvc3JjL3J1bnRpbWUvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2V4dGVuc2lvbnMvd2lkZ2V0cy9hcmNnaXMvYXJjZ2lzLW1hcC9zcmMvdmVyc2lvbi1tYW5hZ2VyLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL2ZpbGxlZC9kYXRhL3BsYWNlaG9sZGVyLW1hcC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctZmF0LWxlZnQudHN4Iiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWljb25zL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWZhdC1yaWdodC50c3giLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWFyY2dpc1wiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS1jb3JlXCIiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtdWlcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9qaW11LWNvcmUvbGliL3NldC1wdWJsaWMtcGF0aC50cyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vZXh0ZW5zaW9ucy93aWRnZXRzL2FyY2dpcy9hcmNnaXMtbWFwL3NyYy9ydW50aW1lL3dpZGdldC50c3giXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwiTS4xIDYuOWg2LjhWLjFILjF6bTYtLjhIMy45ODVjLjA3Ny0uNDAzLjI1LS43OC41MDYtMS4xMDJhNC41NzQgNC41NzQgMCAwIDAgMS42MDkuODA1em0wLTEuMTI4YTMuNzU4IDMuNzU4IDAgMCAxLTEuMDA2LS41MjNjLjMxLS4yMDMuNjUtLjM1OCAxLjAwNi0uNDU5ek02LjEuOXYyLjI2NmE0LjIyOSA0LjIyOSAwIDAgMC0xLjYxMy43MyA2LjAzOCA2LjAzOCAwIDAgMS0xLjEtMS43NjdsLjAwMi0uMDA0LS4wMDQtLjAwMUE4LjE2IDguMTYgMCAwIDEgMi45OS45ek0uOS45aDEuMjY2YTguNyA4LjcgMCAwIDAgLjM1OSAxLjI0OUExLjkzIDEuOTMgMCAwIDEgLjkgMy4xODh6bTAgMy4wOWEyLjgyOCAyLjgyOCAwIDAgMCAyLjAwNi0uOTY2Yy4yNjIuNTE5LjU5NCAxIC45ODcgMS40MjhBMy4zNjcgMy4zNjcgMCAwIDAgMy4xNyA2LjFILjl6TTkuMS4xdjYuOGg2LjhWLjF6bS44LjhoNC4wNjNhLjM3My4zNzMgMCAwIDEtLjA0NS4yLjU5NC41OTQgMCAwIDEtLjQzOC4xNzYgMS42MzcgMS42MzcgMCAwIDAtMS4xNzUuNDkuOTEuOTEgMCAwIDAtLjIwMy43MDhjLS4wMDEuMDA3LS4xMTQuNzM2LS42MDcuNzQyYS43NC43NCAwIDAgMC0uNzE5LjM4NC44MjguODI4IDAgMCAwLS4wMjYuNkg5Ljl6bTUuMiA1LjJIOS45VjVoMi4yOTZsLS40NzQtLjYzOWExLjU2MiAxLjU2MiAwIDAgMS0uMTkyLS4zNDZjMS4wNDEtLjAzIDEuMzctMS4xODggMS4zNjUtMS41ODdhLjE5LjE5IDAgMCAxIC4wMjgtLjE1NGMuMDMxLS4wMzcuMTY2LS4xNjIuNjI0LS4yLjQxOSAwIC44MS0uMjA1IDEuMDQ5LS41NDlhMS4xMyAxLjEzIDAgMCAwIC4xNi0uNjI1aC4zNDR6bS0xNSA5LjhoNi44VjkuMUguMXptLjgtNmg1LjJ2LjQ2bC0yIDEuOTczdi44NjdsLTMuMi0uMDg5em0wIDQuMDEgNCAuMTEydi0xLjM1NWwxLjItMS4xODJWMTUuMUguOXptOC4yIDEuOTloNi44VjkuMUg5LjF6bTYtLjhoLTEuNzkybC0xLjI3LTEuNTcyIDEuNDY4LTEuNDY4IDEuNTk0IDEuNjA1em0wLTUuMnYyLjYyOEwxMi40OSA5Ljl6bS01LjIgMGgxLjQ2bDEuNTgxIDEuNTkyLTEuOTc4IDEuOTggMS4zMTYgMS42MjhIOS45elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTQgMTRcXFwiPjxnIGZpbGw9XFxcIm5vbmVcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZD1cXFwibTcuNzQ1IDcgNC4xIDQuMWEuNTI3LjUyNyAwIDAgMS0uNzQ1Ljc0Nkw3IDcuNzQ2bC00LjEgNC4xYS41MjcuNTI3IDAgMCAxLS43NDYtLjc0Nmw0LjEtNC4xLTQuMS00LjFhLjUyNy41MjcgMCAwIDEgLjc0Ni0uNzQ2bDQuMSA0LjEgNC4xLTQuMWEuNTI3LjUyNyAwIDAgMSAuNzQ2Ljc0NnpcXFwiPjwvcGF0aD48cGF0aCBkPVxcXCJNMSAxaDEydjEySDF6XFxcIj48L3BhdGg+PC9nPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMzkgMzJcXFwiPjxwYXRoIGQ9XFxcIk0zOC43ODQgOS43Nzh2Mi45NjJIMy4yMzZWOS43NzhoLjA3NEwxMy4wODYuMDAybDIuMTExIDIuMTExLTcuNzAyIDcuNjY1ek0zLjIzNiAyMS42MjhoMzEuMzI3bC03LjcwMiA3LjcwMiAyLjExMSAyLjExMSA5Ljc3Ni05LjgxM2guMDM3di0yLjk2MkgzLjIzN3YyLjk2MnpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiIGQ9XFxcIk01IDExdjVINHYtNC4wMDFMMCAxMnYtMXptMTEgMHYxbC00LS4wMDFWMTZoLTF2LTV6TTUgMHY1SDBWNGw0IC4wMDFWMHptNyAwdjQuMDAxTDE2IDR2MWgtNVYwelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwiTTEgMTF2NC4wMDFMNSAxNXYxSDB2LTV6bTE1IDB2NWgtNXYtMWw0IC4wMDFWMTF6TTUgMHYxTDEgLjk5OVY1SDBWMHptMTEgMHY1aC0xVi45OTlMMTEgMVYwelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwibTE0LjM3NiAxMC41NzMgMS42NDcuOTI3LTggNC41LTgtNC41IDEuNjQ4LS45MjcgMS4wMi41NzQtLjYyOC4zNTMgNS45NiAzLjM1MyA1Ljk2LTMuMzUzLS42MjctLjM1M3ptLS45OTktMi40MTQuNjA2LjM0MS01Ljk2IDMuMzUzTDIuMDYzIDguNWwuNjA3LS4zNDEtMS4wMi0uNTc0TC4wMjMgOC41bDggNC41IDgtNC41LTEuNjI2LS45MTV6TTguMDIzIDEuMDIzbC04IDQuNSA4IDQuNSA4LTQuNXptLTUuOTYgNC41IDUuOTYtMy4zNTIgNS45NiAzLjM1Mi01Ljk2IDMuMzUzelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTUgMTZcXFwiPjxnIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCI+PHBhdGggZD1cXFwiTTQgOGgxdjNINHpNMiA5aDF2Mkgyem02LTFoMXYzSDh6bTQgMGgxdjNoLTF6XFxcIj48L3BhdGg+PHBhdGggZD1cXFwiTTE1IDEyVjZoLTJWNWgxVjJoLTN2MUw0IDEuMDVWMEgxdjNoMXYzSDB2NmgydjFIMXYzaDN2LTFoN3YxaDN2LTNoLTF2LTF6bS0zLTloMXYxaC0xem0tOC0uOTJMMTEgNHYxaDF2MUgzVjNoMXpNMiAxaDF2MUgyem0xIDE0SDJ2LTFoMXptOC0xSDR2LTFIM3YtMWg5djFoLTF6bTIgMWgtMXYtMWgxek0xIDExVjdoMTN2NHpcXFwiPjwvcGF0aD48cGF0aCBkPVxcXCJNNiA5aDF2Mkg2em00IDBoMXYyaC0xelxcXCI+PC9wYXRoPjwvZz48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE1IDEwXFxcIj48cGF0aCBmaWxsPVxcXCIjMDAwXFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiIGQ9XFxcIk0wIDEwaDE1VjRIMHptMS01aDEzdjRoLTFWNmgtMXYzaC0xVjdoLTF2Mkg5VjZIOHYzSDdWN0g2djJINVY2SDR2M0gzVjdIMnYySDF6bTExLTV2MUgzVjBIMHYzaDNWMmg5djFoM1Ywek0yIDJIMVYxaDF6bTEyIDBoLTFWMWgxelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwiTTAgOXY2aDE2Vjl6bTE1IDNoLTF2MmgtMXYtM2gtMXYzaC0xdi0yaC0xdjJIOXYtM0g4djNIN3YtMkg2djJINXYtM0g0djNIM3YtMkgydjJIMXYtNGgxNHptLjE4LTcuNS0yLjg1IDIuODUtLjcxLS43TDEzLjIzIDVIOVY0aDQuMzJsLTEuNy0xLjY5LjcxLS43ek0yLjY4IDRIN3YxSDIuNzdsMS42MSAxLjY1LS43MS43TC44MiA0LjVsMi44NS0yLjg1LjcxLjd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJub256ZXJvXFxcIiBkPVxcXCJNNyAxYTYgNiAwIDEgMCAwIDEyQTYgNiAwIDAgMCA3IDFtMCAxM2E3IDcgMCAxIDEgNS42MjEtMi44MjhsLS4yMjIuMjg0IDMuNDA1IDMuNDA0YS42NjguNjY4IDAgMCAxLS45NDQuOTQ0TDExLjQ1NiAxMi40QTYuOTc0IDYuOTc0IDAgMCAxIDcgMTRcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48ZyBmaWxsPVxcXCIjMzYzNjM2XFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiPjxwYXRoIGQ9XFxcIm0uMjUgMyA4LjY0MiA0Ljk2OS0zLjQyMi43MzggMi43MjMgNS40NS0yLjg4NiAxLjY2Ny0yLjcyNC01LjQ1LTIuMzUxIDIuNTk1em0uOTk2IDEuNzI2LS4wMSA1LjY0NCAxLjUyNy0xLjY4NCAyLjkwOSA1Ljc3MSAxLjE1NS0uNjY3LTIuOTEtNS43NyAyLjIyMi0uNDh6XFxcIj48L3BhdGg+PHBhdGggZD1cXFwiTTEwLjMxOCAwQzEzLjQ1NiAwIDE2IDIuNDYyIDE2IDUuNVMxMy40NTYgMTEgMTAuMzE4IDExYTUuNzk2IDUuNzk2IDAgMCAxLTMuMDIzLS44NDJsLS4yMi0uMTQyLjU0LS43NTJjLjc4OC41MyAxLjcyMi44MiAyLjcwMy44MiAyLjYxNSAwIDQuNzM1LTIuMDUzIDQuNzM1LTQuNTg0IDAtMi41MzEtMi4xMi00LjU4My00LjczNS00LjU4My0xLjkxNiAwLTMuNjE3IDEuMTEyLTQuMzU0IDIuNzc5bC0uMDc4LjE4N0w1IDMuNTZDNS44MjcgMS40MzUgNy45MzMgMCAxMC4zMTggMFxcXCI+PC9wYXRoPjwvZz48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48cGF0aCBmaWxsPVxcXCIjMzYzNjM2XFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiIGQ9XFxcIk0xNiAwdjE2SDBWMHpNNy4wNzcgMUgxdjE0aDEwLjU2MUw3LjA3OCA3LjYxNnpNMTUgNi4zOTEgOS41NiA5Ljc3OSAxMi43MyAxNUgxNXpNMTUgMUg4LjA3N3Y2LjMzNWwuOTY1IDEuNTg5TDE1IDUuMjEzelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTcgMTZcXFwiPjxnIGZpbGw9XFxcIiMzNjM2MzZcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCI+PHBhdGggZD1cXFwibS43NSAzIDguNjQyIDQuOTY5LTMuNDIyLjczOCAyLjcyMyA1LjQ1LTIuODg2IDEuNjY3LTIuNzI0LTUuNDUtMi4zNTEgMi41OTV6bS45OTYgMS43MjYtLjAxIDUuNjQ0IDEuNTI3LTEuNjg0IDIuOTA5IDUuNzcxIDEuMTU1LS42NjctMi45MS01Ljc3IDIuMjIyLS40OHpcXFwiPjwvcGF0aD48cGF0aCBkPVxcXCJNOC43MjEgMGMxLjgyIDAgMi44NjUgMS41NTYgMi44NjUgNC4zNSAwIC40NjIuMTIuNjYuMzg1Ljc3NC4yMTkuMDkzLjQ3My4xMjYuOTkuMTMxaC41NTFsLjM5Ny4wMDljMS4yNTEuMDUgMS44MDcuMzM2IDIuMDQgMS4zMzMuNDEgMS43Ni0xLjYyIDMuMTE0LTUuOTA0IDQuMzEzbC0uMzI2LjA5LS4yNDUtLjk5OS42NC0uMThjMy41MTYtMS4wMiA1LjA4OC0yLjA4OSA0Ljg4LTIuOTc5LS4wOTQtLjQwNy0uMzgyLS41MzUtMS4zMDQtLjU1M2wtLjc4Ny0uMDAyYy0uNjItLjAwOC0uOTQzLS4wNTUtMS4zLS4yMDctLjY0OC0uMjc2LS45OTgtLjg1OS0uOTk4LTEuNzMgMC0yLjI4Ni0uNjk0LTMuMzE4LTEuODg0LTMuMzE4LS43MzEgMC0xLjY4LjU1LTIuODE1IDEuNjg1bC0uMjE1LjIyTDUgMi4yMDNDNi4zOTguNzQ4IDcuNjI2IDAgOC43MjEgMFxcXCI+PC9wYXRoPjwvZz48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48ZyBmaWxsPVxcXCIjMzYzNjM2XFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiPjxwYXRoIGQ9XFxcIm0uMjUgMyA4LjY0MiA0Ljk2OS0zLjQyMi43MzggMi43MjMgNS40NS0yLjg4NiAxLjY2Ny0yLjcyNC01LjQ1LTIuMzUxIDIuNTk1em0uOTk2IDEuNzI2LS4wMSA1LjY0NCAxLjUyNy0xLjY4NCAyLjkwOSA1Ljc3MSAxLjE1NS0uNjY3LTIuOTEtNS43NyAyLjIyMi0uNDh6TTkuNzIgMS4xMWwuNTg4LS44MDggNS4wODIgMy43LTQuNTc3IDIuNjU2TDE0LjYxIDkuNDlsLS41OTguODAxTDkgNi41NTVsNC41Ni0yLjY0OXpcXFwiPjwvcGF0aD48L2c+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzM2MzYzNlxcXCIgZmlsbC1ydWxlPVxcXCJub256ZXJvXFxcIiBkPVxcXCJtLjI1IDMgOC42NDIgNC45NjktMy40MjIuNzM4IDIuNzIzIDUuNDUtMi44ODYgMS42NjctMi43MjQtNS40NS0yLjM1MSAyLjU5NXptLjk5NiAxLjcyNi0uMDEgNS42NDQgMS41MjctMS42ODQgMi45MDkgNS43NzEgMS4xNTUtLjY2Ny0yLjkxLTUuNzcgMi4yMjItLjQ4ek0xMiA2YTIgMiAwIDEgMCAwLTQgMiAyIDAgMCAwIDAgNFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMzNjM2MzZcXFwiIGZpbGwtcnVsZT1cXFwibm9uemVyb1xcXCIgZD1cXFwibS4yNSAzIDguNjQyIDQuOTY5LTMuNDIyLjczOCAyLjcyMyA1LjQ1LTIuODg2IDEuNjY3LTIuNzI0LTUuNDUtMi4zNTEgMi41OTV6bS45OTYgMS43MjYtLjAxIDUuNjQ0IDEuNTI3LTEuNjg0IDIuOTA5IDUuNzcxIDEuMTU1LS42NjctMi45MS01Ljc3IDIuMjIyLS40OHpNMTYgMHYxMUg4LjV2LTFIMTVWMUg2djIuNUg1VjB6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzM2MzYzNlxcXCIgZmlsbC1ydWxlPVxcXCJub256ZXJvXFxcIiBkPVxcXCJNNy42ODIgNi4zMThhNC41IDQuNSAwIDAgMSAuMzM1IDUuOTlsMi44NDcgMi44NDktLjcwNy43MDctMi44NDgtMi44NDhhNC41IDQuNSAwIDEgMSAuMzczLTYuNjk4bS01LjY1Ny43MDdhMy41IDMuNSAwIDEgMCA0Ljk1IDQuOTUgMy41IDMuNSAwIDAgMC00Ljk1LTQuOTVNMTYgMHYxMUg5LjV2LTFoMy4wOTlMMTAgNS4xNTNWMUg2djIuNUg1VjB6bS0xIDUuOTU0TDEyLjYzNyA3LjgzIDEzLjgwMSAxMEgxNXpNMTUgMWgtMy45ODF2My44MTNsMS4wNTUgMS45NjdMMTUgNC40NTd6XFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzA1MDUwNVxcXCIgZD1cXFwibTEyLjY4NyA5LjA3NC4wNzMtLjEzM2EuMTQ3LjE0NyAwIDAgMCAuMDE3LS4wNzhsLS4wMTItLjE0MmMtLjAwMi0uMDMzLS4wNDItLjA1MS0uMDY4LS4wMjhsLS4yMDUuMTc1YS4wNS4wNSAwIDAgMS0uMDE5LjAxbC0uMDkyLjAxN2EuMDQyLjA0MiAwIDAgMC0uMDMzLjA1MWwuMDE5LjA3N2EuMTM1LjEzNSAwIDAgMCAuMDkzLjA5N2wuMDcuMDJhLjEzNC4xMzQgMCAwIDAgLjE1Ny0uMDY2TTEzLjggOS4zODlhLjEzLjEzIDAgMCAwIC4wNTgtLjAxNGwuMTQxLS4wNjljLjAwMiAwIC4wMDIgMCAuMDAzLjAwMmwuMTA0LjEzYy4wMDUuMDA2LjAxMy4wMS4wMjMuMDFoLjA2OWEuMDI4LjAyOCAwIDAgMCAuMDIzLS4wNDZsLS4xMDgtLjE0MS0uMDQ3LS4wNC0uMzgyLS4xOTEtLjA5Mi4wMzZoLS4wN3YtLjAwMWwtLjAyNi0uMDg0YS4wMjcuMDI3IDAgMCAwLS4wMjUtLjAxOWgtLjA5M2EuMDI3LjAyNyAwIDAgMC0uMDI3LjAyOHYuMDgyaC4wNnYuMDI0YzAgLjAzLjAyMy4wNTUuMDUyLjA2bC4xMzYuMDE2aC4wMDFsLjA3NC4wOTNjLjAyMy4wMjguMDE5LjA5Ny0uMDA2LjEyNXYuMDAxaC4xMzF6TTEzLjg3OCA2Ljc3NWwtLjA0OC4wNDNhLjI5NC4yOTQgMCAwIDAtLjA5NC4xODcuMjk5LjI5OSAwIDAgMS0uMDgyLjE3OC40OTYuNDk2IDAgMCAxLS4yNDYuMTM2bC0uMDE4LjAwNC0uMDc2LjA2MnMtLjAyMi4xMSAwIC4xMzVjLjAwOS4wMTIuMDQ5LjAxLjA2MSAwIC4wMTYtLjAxMi4wMTctLjA4LjAxNy0uMDhsLjI0Mi0uMDg3cy4wNi4wOC4wOS4wODNjLjAxMi4wMDIuMDQyLS4wMTMuMDUtLjAyNS4wMzItLjA0NS4wNjgtLjIwOC4wNjgtLjIwOGEuNTQ2LjU0NiAwIDAgMCAuMDI0LS4xMTNsLjAxMy0uMTQzLjEwOC0uMDA3LjA0My0uMDg3LS4xMTItLjAxMXpNOS40MjcgMTAuMTJhLjE0MS4xNDEgMCAwIDAgLjI0NSAwdi0uMzM0YS4xMjIuMTIyIDAgMCAwLS4xODctLjEwNS4xMjUuMTI1IDAgMCAwLS4wNTguMTA1ek02LjY5OCA0LjMxNWwuMTQ0LS4wODQuMDAyLS4wMDZhLjA2NS4wNjUgMCAwIDAtLjAyNi0uMDg1LjA2My4wNjMgMCAwIDAtLjAzMS0uMDA4aC0uMzI4bC0uMDM1LS4wMzhhLjIxNi4yMTYgMCAwIDAtLjE1Ny0uMDc0TDUuNzc4IDRsLS4wNDguMDA5YTIuMzYyIDIuMzYyIDAgMCAxLS4wNDguMDA5bC0uMjg5LjEyMmEuMjA5LjIwOSAwIDAgMS0uMDc2LjAxOGwtLjQ2NC4wMjNhLjIzMi4yMzIgMCAwIDAtLjA5OS4wMjhsLS4yNi4xNDhhLjAzLjAzIDAgMCAwLS4wMTUuMDI0LjAzLjAzIDAgMCAwIC4wMTIuMDI2Yy4wMi4wMTUuMDE0LjA0Ny0uMDEuMDUzbC0uMjAzLjA1MWEuMDMuMDMgMCAwIDAtLjAxOS4wNDRsLjA2OC4xMTJhLjAzLjAzIDAgMCAwIC4wMi4wMTRsLjM2NC4wNjNjLjA1Ni4wMS4xMDYuMDQuMTQuMDg2bC4yNTEuMzMzLjA3NC4xMDJhLjA5NC4wOTQgMCAwIDEtLjAwNy4xMThsLS4wNTYuMDZhLjA5My4wOTMgMCAwIDAtLjAxNS4xMDVsLjE4My4zN2EuMTM0LjEzNCAwIDAgMCAuMDgxLjA2OC4yMjMuMjIzIDAgMCAwIC4yNzQtLjE0MmwuMDQ4LS4xMzdhLjA5Ny4wOTcgMCAwIDEgLjA0LS4wNWwuMjA0LS4xNzVhLjI0LjI0IDAgMCAxIC4wODUtLjA0NmwuMzItLjA4OGEuMjIuMjIgMCAwIDAgLjE0OC0uMTMzbC4xNTEtLjM3OGEuMjI3LjIyNyAwIDAgMC0uMDAxLS4xNzJsLS4wMy0uMDdhLjIyNy4yMjcgMCAwIDEgLjA5Ny0uMjhNNC4wMyA0LjY0M2wuMDYxLS4xMWEuMjIxLjIyMSAwIDAgMSAuMDg4LS4wODdsLjUwNC0uMjgyLS4wNTctLjA2Ni0uNTcyLS4wMzVhLjIwMy4yMDMgMCAwIDAtLjA1LjAwM2wtLjU1Ny4wOWEuMjMyLjIzMiAwIDAgMC0uMTM3LjM3N2wuMTI1LjE0OGMuMDQzLjA1MS4xMDcuMDguMTcyLjA4aC4yMjRhLjIyNi4yMjYgMCAwIDAgLjE5OS0uMTE4TTQuNjY2IDUuNjcybC4wNTItLjA2MWMuMDEzLS4wMTYuMDEtLjA0LS4wMDctLjA1MWwtLjE2Mi0uMTE2LS41NjktLjQyNWEuMTM3LjEzNyAwIDAgMC0uMDgxLS4wMjdoLS4yMjRhLjEzMS4xMzEgMCAwIDAtLjA5NS4wNGwtLjExOC4xMTVhLjAzNC4wMzQgMCAwIDAtLjAwMy4wNDdsLjA2Ny4wODVjLjAwNi4wMS4wMTguMDE1LjAzLjAxNGwuMDY0LS4wMDZhLjAzNS4wMzUgMCAwIDEgLjAzOC4wMzNsLjAwMi4wMzhjMCAuMDA1IDAgLjAxLS4wMDIuMDE2bC0uMDMuMDczYS4wMzYuMDM2IDAgMCAwIC4wMDYuMDM2bC4wNy4wODRhLjAzMi4wMzIgMCAwIDAgLjAyOC4wMTJsLjA2OC0uMDAzYS4wMzUuMDM1IDAgMCAwIC4wMzQtLjAzNXYtLjE0N2MwLS4wMTkuMDE0LS4wMzQuMDMyLS4wMzVsLjA5NC0uMDA3Yy4wMDggMCAuMDE4LjAwMi4wMjQuMDA3bC4xNzQuMTMzYy4wMTMuMDExLjAxNy4wMjkuMDEuMDQ0bC0uMDU3LjExNmEuMDMzLjAzMyAwIDAgMS0uMDMuMDE4bC0uMDU0LjAwNGEuMDM2LjAzNiAwIDAgMC0uMDMyLjAyNy4wMzYuMDM2IDAgMCAwIC4wMzIuMDQ0bC4xMTcuMDA5Yy4wMjQuMDAxLjA0OC4wMS4wNjkuMDI0bC4yMDYuMTQ2Yy4wMTQuMDEuMDMuMDA4LjA0My0uMDAzbC4wNjUtLjA1NWEuMDMuMDMgMCAwIDAgLjAxMS0uMDE4bC4wMjEtLjA4M2EuMDM1LjAzNSAwIDAgMC0uMDA0LS4wMjlsLS4wNy0uMTEuMDIyLS4wMDRhLjAzNy4wMzcgMCAwIDEgLjAyNC4wMDRsLjA5MS4wNTRhLjAzNS4wMzUgMCAwIDAgLjA0NC0uMDA4TTIuMDggNS4xMzdoLjA3bC4xMDQuMTQ2Yy4wMTQuMDE4LjAzLjAzMy4wNS4wNDRsLjEzNi4wNjhjLjAxOC4wMS4wNC4wMTUuMDYxLjAxNWguNDIyVjUuMjdsLS4xNTYtLjA1Ni0uMTgtLjA5N0EuMTQuMTQgMCAwIDEgMi41MiA1LjFsLS4yODgtLjE2NmEuMTMuMTMgMCAwIDAtLjA2Ny0uMDE4aC0uMTczYS4xMzYuMTM2IDAgMCAwLS4xMy4wOTVsLS4wMTQuMDQ3YS4xNC4xNCAwIDAgMCAuMDMzLjE0bC4wNjEuMDYyaC4xMzh6TTIuNjc5IDUuMDIybC4xMS0uMDU4YS4xMzkuMTM5IDAgMCAxIC4wNjMtLjAxNWguMDZjLjA1MiAwIC4xLjAzLjEyMy4wNzhsLjA0NC4wOTJ2LjA5NGgtLjJ2LS4xMmwtLjA4NC0uMDQzLS4xLjAwM3pNMy4wNjEgNC45NWwuMS4xNjQuMDguMDQ3aC4xMTVsLjExNi0uMTI0LS4wODgtLjExNi0uMjI1LjAyOHpNMi40MTQgNC42OThsLjE1OC4wNTdhLjEyLjEyIDAgMCAxIC4wMy4wMTVsLjEwOS4wNzNjLjAxOC4wMTIuMDM4LjAyLjA2LjAyMWwuMi4wMi0uMDI0LS4xMjQtLjIzOC0uMTMyYS4xNC4xNCAwIDAgMC0uMDY1LS4wMTdoLS4xMjJ6TTcuNDYgNS43MTJsLjA1OC4wOTJhLjAyNS4wMjUgMCAwIDEtLjAwMS4wMjhsLS4wNDQuMDZjLS4wMDQuMDA4LS4wMDcuMDE2LS4wMDQuMDIybC4wMTcuMDYxYS4wMi4wMiAwIDAgMCAuMDA4LjAxMmwuMDkyLjA3MmMuMDYzLjA0OC4wNy4xNDEuMDE3LjJsLS4wMDEuMDAyYS4xMzguMTM4IDAgMCAxLS4xMDEuMDQ2aC0uMTFhLjAyNS4wMjUgMCAwIDEtLjAyNC0uMDMxbC4wMjgtLjExYS4wMjMuMDIzIDAgMCAxIC4wMTQtLjAxN2wuMDQ5LS4wMjRjLjAxLS4wMDQuMDE1LS4wMTUuMDEzLS4wMjZsLS4wMDItLjAzYS4wMjYuMDI2IDAgMCAwLS4wMi0uMDIxbC0uMDcxLS4wMTVhLjAyNC4wMjQgMCAwIDAtLjAyNy4wMTRsLS4wMTYuMDM1di4wMDJsLS4wMDEuMDAyLS4wMzUuMTE4Yy0uMDAzLjAxMS0uMDEzLjAxOC0uMDI0LjAxOGwtLjExLS4wMDNhLjAyNC4wMjQgMCAwIDEtLjAxOC0uMDA3LjAyNC4wMjQgMCAwIDEtLjAwNy0uMDE3di0uMTI3YzAtLjAxMy4wMTEtLjAyNC4wMjQtLjAyNGwuMDU4LS4wMDJjLjAwOCAwIC4wMTQtLjAwNC4wMi0uMDFsLjA1My0uMDc5QS4wMjcuMDI3IDAgMCAwIDcuMyA1Ljk0VjUuODJjMC0uMDA4LjAwNC0uMDE1LjAxLS4wMTlsLjExNS0uMDk0YS4wMjQuMDI0IDAgMCAxIC4wMzcuMDA1XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzA1MDUwNVxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTUuMDczIDUuMUgxNC43YS4wNDIuMDQyIDAgMCAxLS4wNC0uMDNsLS4zNTgtLjA2OWEuMTYxLjE2MSAwIDAgMS0uMDg4LS4wMjdsLS4wODEtLjA1NWEuMTYuMTYgMCAwIDAtLjA4OC0uMDI3cy0uODMyLS40My0xLjkyMi0uMzg4Yy0uNDEuMDE2LS43Ny4yMjItLjc3LjIyMmEuMDMzLjAzMyAwIDAgMC0uMDIuMDI2bC0uMDA0LjAzNGEuMDMzLjAzMyAwIDAgMS0uMDMzLjAyOGwtLjE2NC0uMDA0YS4wMzMuMDMzIDAgMCAwLS4wMzQuMDMybC0uNDU5LjAxNmMtLjA0IDAtLjA3Ny4wMi0uMS4wNTNsLS4wNDEuMDZjLS4wMy4wNDUtLjQ0MS4wNi0uNDQxLjA2YS4wNi4wNiAwIDAgMS0uMDM2LS4wNTV2LS4wNDljMC0uMDE3LjAwNi0uMDMyLjAyLS4wNDRsLjIxOC0uMmEuMTYyLjE2MiAwIDAgMSAuMDg3LS4wNGwuMTM2LS4wMThhLjA2LjA2IDAgMCAwIC4wNC0uMDI0bC4wMTYtLjAyNGEuMDYuMDYgMCAwIDAtLjAyOC0uMDlsLS4wMS0uMDA1YS4wNi4wNiAwIDAgMC0uMDQ3LjAwNGwtLjEwNC4wNjFhLjA1Ny4wNTcgMCAwIDEtLjAzLjAwOGgtLjEwMWEuMTU5LjE1OSAwIDAgMC0uMTE0LjA0OWwtLjI0NC4yNTJhLjE2NS4xNjUgMCAwIDAtLjA0Mi4wOGwtLjAyMy4xMS4wMTYuMDQ3LS4wOTYuMTM1LS4wODcuMDg3aC0uMDgxdi0uMDg3SDkuNDVsLS4wMjguMTFhLjE2MS4xNjEgMCAwIDEtLjA5OC4xMWwtLjA4MS4wMzJhLjE1Ny4xNTcgMCAwIDEtLjE1Ni0uMDI2bC0uMTA2LS4wODYuMjg0LjAxNS4wMzItLjA2MlM5IDUuMTggOC44MjggNS4wODRjLS4xNC0uMDgtLjMyNC0uMDEzLS4zODguMDE2YS4xNDcuMTQ3IDAgMCAwLS4wNDIuMDI3bC0uNjIuNTY1YS4xNjIuMTYyIDAgMCAwLS4wMDYuMjMxbC4wNTguMDYxLjA4My0uMDY5YS4wNTcuMDU3IDAgMCAxIC4wNzYuMDAzbC4xNTUuMTQ2aC4wNGwuMTQ2LS4xNzZhLjA1Ny4wNTcgMCAwIDAgLjAwMi0uMDcybC0uMDE5LS4wMjZhLjA2LjA2IDAgMCAxLS4wMDQtLjA2NmwuMjA0LS4zMzRhLjA0Mi4wNDIgMCAwIDEgLjA1Mi0uMDE3bC4wMzYuMDE4Yy4wMjIuMDEuMDMuMDM1LjAxOS4wNTdsLS4xNC4yNjhhLjEzNC4xMzQgMCAwIDAtLjAxLjEwNGwuMDIzLjA3MWEuMTguMTggMCAwIDEtLjAzLjE0NmwtLjA4Ny4xMmEuMTYxLjE2MSAwIDAgMS0uMTM0LjA2NGwtLjI1NC0uMDFhLjA0Ni4wNDYgMCAwIDEtLjAzMS0uMDEzLjA0Ny4wNDcgMCAwIDEtLjAxMy0uMDMydi0uMDQyYS4wNDUuMDQ1IDAgMCAwLS4wNDYtLjA0Ni4wNDYuMDQ2IDAgMCAwLS4wNDUuMDQybC0uMDA3LjA3NGEuMDQ2LjA0NiAwIDAgMS0uMDQ1LjA0MmgtLjAyNGEuMDQyLjA0MiAwIDAgMC0uMDMuMDEybC0uNDE0LjM4Ni4wNi4wODh2LjA5M2EuMDU3LjA1NyAwIDAgMS0uMDU2LjA1NmgtLjEzMmMtLjA3MSAwLS4xMjcuMDYtLjEyMy4xMzJsLjAwMS4wMThhLjEyNC4xMjQgMCAwIDAgLjExOS4xMTZsLjE0MS4wMDRhLjE2LjE2IDAgMCAwIC4xMzUtLjA2OGwuMTAxLS4xNDRhLjE1OC4xNTggMCAwIDEgLjEzLS4wNjdoLjA5N2MuMDMyIDAgLjA2NC4wMS4wOS4wMjhsLjE1Ny4xMWMuMDMuMDIyLjAzMy4wNjguMDA0LjA5MmwtLjA4OC4wNzdhLjE1Ni4xNTYgMCAwIDEtLjEwNC4wNGgtLjU1YS4xNTguMTU4IDAgMCAwLS4xMjYuMDY0bC0uNDI1LjU3M2EuMTY4LjE2OCAwIDAgMC0uMDMyLjA5NnYuMzhjMCAuMDM1LjAxMS4wNjkuMDMyLjA5N2wuMTQ4LjE5OGMuMDEzLjAxNi4wMi4wMzYuMDI3LjA1NS4wMS4wMzMuMDM2LjA4LjEuMDhoLjY4NnMuMTcyLjAwNS4xNzIuMTJjMCAuMDQtLjAwMS4wOC0uMDAzLjExNmEuMTYyLjE2MiAwIDAgMCAuMDgzLjE0OGMuMDQ4LjAyOC4wOTkuMDc3LjA5OS4xNTV2LjIxYS4yMDMuMjAzIDAgMCAxLS4wMDcuMDQ5Ljc3Mi43NzIgMCAwIDEtLjA3OS4xNzhjLS4wMzYuMDU0LjAxNS4xMzUuMDUyLjE4MmEuMTcuMTcgMCAwIDEgLjAzNS4xMDJ2LjIxcy4wMTYuMDc2LjA4OC4xMDlhLjU4My41ODMgMCAwIDEgLjA5Ny4wNXYuMDg0YzAgLjA5LjA3MS4xNi4xNi4xNmguMjA3cy4wOTQuMDA4LjE1NS0uMDg3bC4yOC0uNDM3cy4wNC0uMDQzIDAtLjEyYy0uMDQtLjA3Ni0uMDIxLS4xNDUtLjAyMS0uMTQ1bC4xOS0uMTFzLjA5LS4wMTYuMDktLjE0MXYtLjEzNmEuMTE1LjExNSAwIDAgMC0uMDE4LS4wNjJsLS4wMzMtLjA1N2EuMTYyLjE2MiAwIDAgMSAuMDIxLS4xOTFsLjM5NS0uNDI0cy4xMDQtLjE1Ni4xMDQtLjIzNUg5LjQ5YS4xNi4xNiAwIDAgMS0uMTM2LS4wNzdsLS4zNDYtLjU3NmEuMDg3LjA4NyAwIDAgMSAuMDMzLS4xMjEuMDg0LjA4NCAwIDAgMSAuMTEyLjAzbC4zMzUuNTUyLS4wMDEuMDVjMCAuMDE2LjAxMi4wMjguMDI4LjAyOC4wODMgMCAuMzI3LS4wMS40NjMtLjEzYS41OTYuNTk2IDAgMCAwIC4xNDMtLjE4MS4xNi4xNiAwIDAgMC0uMDM4LS4xOWwtLjA4NS0uMDc2LS4xMS4wMjUtLjE5Ny0uMTk5YS4wNjMuMDYzIDAgMCAxIC4wMTYtLjEuMDYuMDYgMCAwIDEgLjA2NS4wMDdsLjMwNy4yMzhzLjA2My4wNTYuMTI3LjA1NmguMThjLjA1NiAwIC4xMDguMDMuMTM2LjA3OGwuNDAyLjY4M3MuMDYuMDU2LjA5NC4wNTRjLjAzNS0uMDAzLjA4Mi0uMTUuMDgyLS4xNSAwLS4xMzYuMDY1LS4yNjYuMTc2LS4zNDRsLjEzOC0uMDk4YS4xNTguMTU4IDAgMCAxIC4yMDIuMDE1bC4wODUuMDgzdi4wOWMwIC4wMTQuMDEyLjAyNy4wMjguMDI3aC4wMzhsLjAzNi0uMDM2aC4wNDJ2LjM1OWMwIC4wNC4wMTUuMDguMDQzLjEwOWwuMjY3LjI4OHYtLjEwM2EuMTU5LjE1OSAwIDAgMC0uMDM1LS4xbC0uMTI1LS4xNThhLjE1OS4xNTkgMCAwIDEtLjAzNS0uMXYtLjEwOWMwLS4wMTcuMDIxLS4wMjYuMDMzLS4wMTNsLjE2Mi4xNjcuMDA0LjEwNWMuMDAxLjAyLjAyNS4wMy4wMzguMDE1bC4yMjktLjI1cy4wNjYtLjA4MyAwLS4xNTJhNS40MDUgNS40MDUgMCAwIDAtLjE1OC0uMTU0LjA1LjA1IDAgMCAxLS4wMTYtLjAzOS4wNS4wNSAwIDAgMSAuMDE5LS4wMzhsLjA0NC0uMDM3LjExLjAwMnMtLjAyMy4wNTItLjA1OC4xMTJjMCAwIC4wMTcuMDk2LjEyMy0uMDgzLjAwOC0uMDA3LjAzNi0uMDAzLjA2Ny4wMDIuMDQuMDA2LjA4NC4wMTQuMS0uMDAyLjA2LS4wNjQuMzA5LS40MDcuMzA5LS40MDdzLjAzMi0uMTI2LS4wNDMtLjE5MmMtLjA3Ni0uMDY2LS4wNDMtLjE0Ny0uMDQzLS4xNDdsLjA5NC0uMDgydi0uMDU4aC0uMjQ0cy4wMi0uMTMuMTk0LS4xMzlsLjAzMS0uMDAxYy4wMTEgMCAuMDIxIDAgLjAzLS4wMDJhLjEzMi4xMzIgMCAwIDEgLjEyNy4wODNjLjAwNi4wMTYuMDEuMDM0LjAxLjA1MnYuMjQzbC4wMzYuMDA0cy4wNjguMDA3LjA5My0uMDg0YzAgMCAuMDQ2LS4wMTMuMDQ2LS4wNjh2LS4wNjZsLS4wNjYtLjA4LjEwNy0uMTM4YS4xMjIuMTIyIDAgMCAxIC4wNzUtLjA0NWwuMDU0LS4wMTFhLjEyNS4xMjUgMCAwIDAgLjA4LS4wNTNsLjI0Ny0uMzczYS4xNjUuMTY1IDAgMCAwIC4wMjctLjA5di0uMTAyYS4wNS4wNSAwIDAgMC0uMDUtLjA1aC0uMTQ0cy0uMDYtLjA3LjAyMi0uMTJjLjA1Ny0uMDM1LjE2OS0uMTI4LjIzMi0uMThhLjE1NS4xNTUgMCAwIDEgLjEwMS0uMDM4aC4yOWEuMTYuMTYgMCAwIDAgLjA5My0uMDNsLjE5LS4xMzdhLjA0LjA0IDAgMCAxIC4wMjUtLjAwOGMuMDgyIDAgLjEyNS4xLjA3LjE2MmwtLjE5OC4yMTRhLjE1OC4xNTggMCAwIDAtLjA0My4xMDZsLS4wMDMuMTczYzAgLjAzMi4wMjYuMDYuMDU5LjA2aC4wNDhsLjI1OS0uMjY4YS4xMjUuMTI1IDAgMCAwIC4wMzMtLjA2NmwuMDEtLjA1NmEuMTYuMTYgMCAwIDEgLjE1NS0uMTM0aC4xMTRhLjE1NC4xNTQgMCAwIDAgLjEwNC0uMDM5bC4xNTktLjE0YS4wNDMuMDQzIDAgMCAxIC4wMjgtLjAxaC4wODJhLjA0Mi4wNDIgMCAwIDAgLjA0My0uMDQ0di0uMDhjMC0uMDEzLjAwNS0uMDI0LjAxMy0uMDMybC4wNjItLjA1OGEuMTU2LjE1NiAwIDAgMSAuMTgxLS4wMjRsLjEwNC4wNTVhLjA2MS4wNjEgMCAwIDAgLjA3Ni0uMDE2bC4wNTEtLjA2NWEuMDYyLjA2MiAwIDAgMCAuMDEyLS4wNTIuMDYyLjA2MiAwIDAgMC0uMDMzLS4wNDJsLS41MDMtLjI1YTUuNDI3IDUuNDI3IDAgMCAwLS4zOS0uMDE0TTguMTQxIDcuMDI0bC4wOS0uMDc4emwtLjEzMy0uMTYzYS4wNTMuMDUzIDAgMCAxLS4wMS0uMDE5LjA1My4wNTMgMCAwIDAgLjAxLjAxOHptLjc1NS40OTNoLS4wODFhLjEzLjEzIDAgMCAxLS4wMzItLjAwNCA5LjEyNyA5LjEyNyAwIDAgMS0uNjEtLjE4Ni4wNjIuMDYyIDAgMCAxLS4wMzUtLjA0NS4wNjMuMDYzIDAgMCAxIC4wMTUtLjA1NWwuMTEtLjExN2EuMDk0LjA5NCAwIDAgMSAuMTMuMDA1bC4xLjEwNy4wODctLjAxNi0uMDI0LS4wNjRzLS4wMS0uMDMtLjAyMS0uMDU2Yy0uMDExLS4wMjcuMDQ4LS4wNjEuMDQ4LS4wNjFzLjA2LS4wMDYuMDYuMDg4YzAgLjA5My4wOTcuMTYzLjA5Ny4xNjNoLjMzMmMuMDIxIDAgLjAzNS4wMjMuMDI0LjA0bC0uMDU5LjExM2EuMTYuMTYgMCAwIDEtLjE0MS4wODhtLjQxNy0uNTAzSDkuMmwtLjA4My0uMDY1YS4wNTcuMDU3IDAgMCAwLS4wMzItLjAxaC0uMTA4YS4wNjcuMDY3IDAgMCAwLS4wNDQuMDE3bC0uMDc4LjA3LS4wNzguMDEyYS4wNTMuMDUzIDAgMCAxLS4wNTYtLjAyNi4wNTUuMDU1IDAgMCAxLS4wMDYtLjAybC0uMDExLS4wODdhLjA5LjA5IDAgMCAxIC4wMjEtLjA2OWwuMTI4LS4xNDUuMDU4LS4wMDUtLjAwMy4wMjZhLjA1MS4wNTEgMCAwIDAgLjA1LjA1OGguMDI5YS4wNjkuMDY5IDAgMCAwIC4wNjQtLjA0MmwuMDI2LS4wNTguMTIuMDIuMDEuMDg3YS4wNzcuMDc3IDAgMCAwIC4wMjYuMDQ4bC4xMzMuMTEydi4wMjVjMCAuMDMtLjAyMy4wNTItLjA1My4wNTJtLjU3NC4wOTN2LjA5OWgtLjIwNWwtLjAxOC0uMDk5YS4wNS4wNSAwIDAgMSAuMDA4LS4wMzlsLjAxMS0uMDE1YS4wNTIuMDUyIDAgMCAwLS4wMDgtLjA2OWwtLjA5Ni0uMDg5di0uMTYzbC4xNC0uMDZoLjA3MmMuMDI4IDAgLjA1Mi4wMTkuMDYuMDQ2bC4wMDEuMDA0Yy4wMDYuMDIgMCAuMDQtLjAxMy4wNTZhLjA2MS4wNjEgMCAwIDAtLjAxNS4wMzFsLS4wMTMuMDg1LjExMy4xMDUtLjA4LjA1NHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjxwYXRoIGZpbGw9XFxcIiMwNTA1MDVcXFwiIGQ9XFxcIk0xMi45NDUgNy44Yy0uMDA2LS4wMTUtLjAxLS4wMjItLjAxNy0uMDIxLS4wMDcgMC0uMDE4LjAwOS0uMDM2LjAyNWEuMTEuMTEgMCAwIDAtLjAzOS4wOGMwIC4wMi4wMDMuMDQuMDEyLjA2Mi4wMDcuMDE4LjAyLjAzMi4wMjguMDMyLjAyNSAwIC4wNjYtLjE0LjA1Mi0uMTc4TTEyLjg5NCA4LjEwOGEuMTE2LjExNiAwIDAgMSAuMDI0LjAwNWwuMDE0LjAwNGMuMDE4LjAwNi4wMjcuMDA5LjAzMy4wMTUuMDA1LjAwNS4wMDguMDE0LjAxMy4wM2wuMDA0LjAxNGMuMDA4LjAyNy4wMDIuMDUzLS4wMTguMDctLjA0Ni4wMzctLjAzOC4wNTcuMDMuMDcyLjA0Ny4wMS4wNjEuMDI0LjA2MS4wNjIgMCAuMDQ2LS4wMDMuMDQ2LS4wNTUuMDE5LS4wMy0uMDE2LS4wNi0uMDIzLS4wNjUtLjAxNi0uMDA3LjAwNyAwIC4wMTYuMDE0LjAyMS4wNTUuMDIuMDg2LjA3MS4wNzQuMTItLjAxNC4wNTcuMDE0LjA2Ni4wNTkuMDIuMDQ4LS4wNDkuMDg5LjAyMy4wNzguMTM2LS4wMDQuMDM4LS4wMzguMDU1LS4wOS4wNDNhLjA0Ny4wNDcgMCAwIDEtLjAyMi0uMDEyLjA0LjA0IDAgMCAxLS4wMTMtLjAyN2MwLS4wMjQtLjAxMy0uMDI5LS4wNTEtLjAyLS4wMzguMDEtLjA1LjAwNi0uMDUtLjAxOGEuMDUuMDUgMCAwIDEgLjAzLS4wNDRjLjAxMy0uMDA1LjAyLS4wMDkuMDItLjAxNyAwLS4wMDgtLjAwNy0uMDE5LS4wMi0uMDM4YS4xNzQuMTc0IDAgMCAxLS4wMy0uMDhjMC0uMDItLjAwOC0uMDM3LS4wMTktLjAzNy0uMDI3IDAtLjA4OC0uMTkzLS4wNjMtLjIwMS4wMDQtLjAwMi4wMDktLjAwOC4wMTItLjAxNmEuMTQ4LjE0OCAwIDAgMCAuMDA5LS4wNTNjMC0uMDQuMDAzLS4wNTQuMDIxLS4wNTJNMTIuOCA4LjU2N2MuMDQ3LS4wNDQuMDcyLS4xMTYuMDQtLjExNi0uMDE0IDAtLjA4Mi4wNzktLjExLjEyOS0uMDMuMDUyLjAwOS4wNDUuMDctLjAxM00xMi45MTIgOC42OThhLjAyLjAyIDAgMCAxIC4wMjEuMDJjMCAuMDExLS4wMDMuMDItLjAwOC4wMiAwIDAtLjAwNSAwLS4wMDctLjAwM2EuMDY0LjA2NCAwIDAgMS0uMDE1LS4wMTdjLS4wMDctLjAxMS0uMDAzLS4wMi4wMS0uMDJNMTMuMjU0IDguOTEzYy0uMDEzLS4wMy0uMDMtLjA0NS0uMDQ0LS4wNDMtLjAxNC4wMDEtLjAyNS4wMTgtLjAzLjA1YS4wNTguMDU4IDAgMCAxLS4wMS4wMjZjLjAxMy4wNTIuMDUyLjA2LjA2NC4wNjNoLjAwNGEuMjU1LjI1NSAwIDAgMSAuMDI1LS4wMjkuNzUxLjc1MSAwIDAgMCAuMDE0LS4wMTV6TTEzLjA4MiA4Ljg5NGMuMDI2LS4wMDQuMDM1LjAxNS4wMTEuMDQzYS4wNDQuMDQ0IDAgMCAwLS4wMDguMDE1bC0uMDU3LjAxYS42Mi42MiAwIDAgMS0uMDM2LjAwNWMtLjAzOC4wMDYtLjA3Ny4wMTEtLjEuMDM3IDAgLjAwNC4wMDQuMDA3LjAxLjAwOS4wMDcuMDAyLjAxOS4wMDIuMDMyLS4wMDFsLjAwNi0uMDAzLjAwNS0uMDAzLjAyLS4wMDIuMDY0LjAwOC0uMDA0LjAwNmgtLjAwMmwtLjAwNS4wMDQtLjAxMy4wMDhjLS4wMy4wMjYtLjA0NC4wNTQtLjAzNC4wNjcuMDA4LjAxMi4wMTUuMDQuMDE1LjA2Mi0uMDAyLjA1My0uMDY2LjA2Ny0uMDc5LjAxNy0uMDA2LS4wMjMtLjAxLS4wMTYtLjAxMi4wMjEtLjAwMS4wNDQtLjAxMS4wNTctLjAzOC4wNTEtLjAyLS4wMDQtLjAzNS0uMDI1LS4wMzUtLjA0N2EuMTQyLjE0MiAwIDAgMC0uMDE2LS4wNjVjLS4wMDgtLjAxMy0uMDA2LS4wNDguMDA2LS4wNzguMDA3LS4wMTkuMDA5LS4wMjguMDEtLjAzNmwuMDAyLS4wMDYuMDEyLS4wMzIuMDE4LS4wNS0uMDAzLjAwMWMuMDI4LS4wMjYuMDU2LS4wMzIuMS0uMDIybC4wMzIuMDA0YS4xNS4xNSAwIDAgMCAuMDY4LS4wMTJjLjAxLS4wMDUuMDItLjAxLjAzMS0uMDExTTEzLjM2IDkuMTM2YzAtLjAyNy0uMDM0LS4wNDItLjA5Mi0uMDQyYS40NDUuNDQ1IDAgMCAwLS4wNjQuMDA2Yy0uMDguMDEyLS4xMDMuMDI3LS4wOC4wNTEuMDIuMDIuMjM2LjAwNy4yMzYtLjAxNU01Ljg2NiA5LjM2MmwtLjM1LS4xODVhLjIyMi4yMjIgMCAwIDAtLjEwMi0uMDI2aC0uMTAxYS4wMzguMDM4IDAgMCAxLS4wMzctLjAzMy4yMi4yMiAwIDAgMC0uMjE4LS4yMDFoLS4wMzJhLjIxNy4yMTcgMCAwIDEtLjE3My0uMDg4bC0uMDQ4LS4wNjVhLjIxNi4yMTYgMCAwIDAtLjE1NS0uMDg2bC0uMjYyLS4wMjNhLjAyOC4wMjggMCAwIDEtLjAxNy0uMDA3bC0uMDQzLS4wM2MtLjAxMi0uMDA3LS4wMjYtLjAwOS0uMDM4IDBsLS4xODcuMTA2YS4yMTYuMjE2IDAgMCAxLS4xMDguMDI4aC0uMTkyYS4wMzcuMDM3IDAgMCAxLS4wMTctLjAwNC4xNDYuMTQ2IDAgMCAxLS4wNzEtLjEzM3YtLjExMmEuMDM4LjAzOCAwIDAgMC0uMDIzLS4wMzUuMDM3LjAzNyAwIDAgMC0uMDE0LS4wMDNoLS4xMjJhLjAzNy4wMzcgMCAwIDEtLjAzMi0uMDE5LjAzOC4wMzggMCAwIDEgMC0uMDM4bC4wNTctLjFhLjA0NC4wNDQgMCAwIDAgLjAwNi0uMDJWOC4yYzAtLjAxLS4wMDQtLjAyLS4wMTEtLjAyN2EuMDM3LjAzNyAwIDAgMC0uMDI3LS4wMTFoLS4wNjZhLjAzNy4wMzcgMCAwIDAtLjAzLjAxN2wtLjAzOC4wNmEuMjE3LjIxNyAwIDAgMS0uMTg0LjFoLS4wNTRzLS4wODYtLjAxNS0uMDg2LS4xMDh2LS4zMzlhLjA5Ny4wOTcgMCAwIDEgLjA0NS0uMDY3Yy4wMzItLjAyLjEwNy0uMDYxLjE0NC0uMDgxYS4wMzguMDM4IDAgMCAxIC4wNDMuMDA1bC4wNy4wNjZjLjAwNy4wMDcuMDE1LjAxLjAyNC4wMWguMDE1Yy4wMjIgMCAuMDUxIDAgLjA1Ny0uMDAzLjAwNC0uMDAyLjAwNC0uMDA3LjAwMy0uMDE0IDAtLjAxNyAwLS4wNDYuMDQ1LS4wNi4wNjYtLjAxOS4xMDkuMDQuMTA5LjA0bC4xNjUuMTk5YS4wMzcuMDM3IDAgMCAwIC4wNS4wMDZsLjAyMy0uMDE2YS4wMzguMDM4IDAgMCAwIC4wMTItLjA1bC0uMDAyLS4wMDVhLjIyMy4yMjMgMCAwIDEgLjA0OC0uMjhsLjEzNy0uMTE4cy4wMTYtLjAxLjAyNC0uMDcxYy4wMDUtLjAzNy4wMTUtLjA5LjAyMS0uMTI4bC4wMjEtLjAzNi4wMi0uMDM2LjI5Ny0uMjUyYS4wMzYuMDM2IDAgMCAxIC4wNTUuMDA4Yy4wMTQuMDIyLjAzOC4wNDYuMDY5LjA0NWEuNzY3Ljc2NyAwIDAgMCAuMjA4LS4wOTMuMDM2LjAzNiAwIDAgMCAuMDE5LS4wMzN2LS4wNDdsLS4xNDMuMDNhLjAzOC4wMzggMCAwIDEtLjA0NC0uMDMxbC0uMDE2LS4wOTVhLjAzOC4wMzggMCAwIDAtLjAzNi0uMDNsLS4xNDMuMDE1LjAxOC0uMDQzYS4wNDMuMDQzIDAgMCAxIC4wMzQtLjAyN2wuMzUyLS4wMzcuMDU2LS4wMjMuMDU2LS4wMjMuMDcxLS4wNTZhLjAzOC4wMzggMCAwIDAgLjAwNC0uMDU1bC0uMzk2LS40MWEuMDM5LjAzOSAwIDAgMC0uMDQzLS4wMDhsLS4xMTguMDU3YS4wNC4wNCAwIDAgMS0uMDM4LS4wMDNMNC4xIDUuOTFhLjAzNi4wMzYgMCAwIDAtLjA1LjAwOGwtLjA1MS4wN2EuMDMzLjAzMyAwIDAgMC0uMDA3LjAybC0uMDEuMTc0YzAgLjAxMS4wMDMuMDIuMDExLjAyOWwuMDQ4LjA1YS4wMzguMDM4IDAgMCAxLS4wMDUuMDU2bC0uMDcuMDUxYS4wMzcuMDM3IDAgMCAxLS4wMzQuMDA2bC0uMTYuMDI3YS4yMi4yMiAwIDAgMC0uMTMzLS4xM2wtLjA4LS4wMjhhLjIyMi4yMjIgMCAwIDEtLjA5OC0uMzVsLjE1Ni0uMTlhLjA0Mi4wNDIgMCAwIDAgLjAwNy0uMDM4bC0uMDQ0LS4xMTUtLjAwOC0uMDEyLS4xNzYtLjE5YS4xMjIuMTIyIDAgMCAwLS4yMS4wNjVsLS4wMDEuMDFhLjEyMy4xMjMgMCAwIDEtLjEyLjEwNEgyLjU0bC0uMDUtLjAxYTIuNjUyIDIuNjUyIDAgMCAxLS4wNC0uMDA5bC0uMzU4LS4xNjJhMi4wMDMgMi4wMDMgMCAwIDAtLjA3NS0uMDE4bC0uMzMtLjAyMmEyLjE1OCAyLjE1OCAwIDAgMS0uMDkyLjAxNWwtLjE0OC4wNThhLjIxNy4yMTcgMCAwIDEtLjEyNC4wMUwuNTkxIDUuMjNhLjIxMi4yMTIgMCAwIDAtLjEzMi4wMTNsLS4zNDYuMTVhLjAzOC4wMzggMCAwIDAtLjAwOS4wNjNsLjA5LjA3N2MuMDI2LjAyMS4wMTEuMDY1LS4wMjIuMDY2bC0uMTM2LjAwM2MtLjAyIDAtLjAzNi4wMTctLjAzNi4wMzd2LjAyYzAgLjAyLjAxNi4wMzYuMDM2LjAzN2wuMTE3LjAwMWMuMDQuMDAyLjA1MS4wNTYuMDE1LjA3MmwtLjEwMS4wNDZhLjAzNy4wMzcgMCAwIDAtLjAyMi4wMzdsLjAxLjEwM2EuMjIuMjIgMCAwIDAgLjE4NC4xOThsLjA3Mi4wMTJjLjAzNC4wMDYuMDQyLjA1MS4wMTMuMDY5bC0uMDIzLjAxM2MtLjAyNC4wMTUtLjAyNC4wNSAwIC4wNjRsLjAxMi4wMDZhLjA0LjA0IDAgMCAwIC4wMzUuMDAzbC42MTgtLjI4MmEuMjE1LjIxNSAwIDAgMSAuMjM3LjA0bC41ODguNTQzYS4yMi4yMiAwIDAgMSAuMDcxLjE1MmwuMDIuNDE1YS4yMjIuMjIyIDAgMCAwIC4wNDguMTI4bC41NzkuNzI4Yy4wMS4wMTQuMDMuMDE4LjA0NS4wMWEuMDM4LjAzOCAwIDAgMCAuMDE0LS4wNTVzLjM2NS4zODMuNC4zOTlsLjI5Ni4xNDhhLjIyLjIyIDAgMCAwIC4wOTcuMDIzaC4xNDdjLjAxNSAwIC4wMjguMDA4LjAzMy4wMjFsLjA1LjEwOFY4LjdsLjAwMS4wMDEuMDAyLjAwM2MuMDE1LjAyNS4wODguMTQzLjE2NS4xNDguMDg3LjAwNS4yNDMgMCAuMjQzIDBzLjA1Ni0uMDAxLjA1Ni4wNnYuMDk1YS4wMzYuMDM2IDAgMCAxLS4wMTkuMDMyYy0uMDQ4LjAyNy0uMTcyLjEwNy0uMTcyLjE5N3YuMjEyYzAgLjAxLjAwMy4wMTcuMDA4LjAyNC4wMTYuMDE5LjA1LjA2LjA4LjA4NC4wMjcuMDIyLjA3Mi4wNzMuMDk4LjEwM2wuMDEzLjAxNGEuMDM4LjAzOCAwIDAgMSAuMDA4LjAyNHYuMTIyYS4wNC4wNCAwIDAgMSAuMDAxLjAwNmwuMDAxLjAwN2MuMDA3LjAxNi4wMjQuMDU3LjA1NS4wNzIuMDE5LjAwOS4wNjUuMDQ3LjEwOC4wODVhLjIyMi4yMjIgMCAwIDEgLjA3Ni4xODZsLS4wMjcuMzQ1LS4wMDMuMDJhLjQzLjQzIDAgMCAxLS4wMDMuMDJsLS4xMTkuNDVhMS43NSAxLjc1IDAgMCAwLS4wMDcuMDhsLjAxMi4xODVhLjIzMy4yMzMgMCAwIDEtLjAxLjA5NWwtLjA0NC4xMjZhLjIzNS4yMzUgMCAwIDAtLjAwNy4xMjVsLjA1Ni4yMzNhLjEyMy4xMjMgMCAwIDAgLjA0NC4wN2wuMDU3LjA0NWMuMDIyLjAxOC4wNTQuMDQyLjA3Ni4wMjYuMDc3LS4wNTQuMTItLjIxOC4xNTUtLjM1My4wMTUtLjA2LjAzLS4xMTUuMDQ0LS4xNS4wMS0uMDIzLjA2Ny0uMTA1LjEzNC0uMjAyLjExLS4xNTYuMjQ1LS4zNS4yNDQtLjM4OWwtLjAwMy0uMDljMC0uMDIyLjAxNi0uMDM4LjAzNy0uMDM4aC4xMTRjLjAxIDAgLjAyLS4wMDQuMDI2LS4wMTJsLjI2Ni0uMjk0YS4wMzYuMDM2IDAgMCAwIC4wMS0uMDI2di0uMTJjMC0uMDIxLjAxNy0uMDM3LjAzOC0uMDM3LjA0NS4wMDIuMTIuMDAyLjE0NS0uMDIuMDI3LS4wMjEuMDk3LS4xMDMuMTM4LS4xNWwuMDIxLS4wMjRhLjAzOS4wMzkgMCAwIDAgLjAxLS4wMjV2LS4xOWMwLS4wNTUuMDItLjEwOC4wNTctLjE1bC4xMzMtLjE0OGEuMTM3LjEzNyAwIDAgMC0uMDQzLS4yMTVNMTQuOTE2IDEwLjdsLS4wMDguMDAxYy0uMDA2LjAwNS4wMDUuMDM2LjAyNC4wNjcuMDMxLjA1MS4wMzMuMDYyLjAxNi4wODYtLjAxNy4wMjUtLjAxNi4wMy4wMDQuMDQ0LjAzNi4wMjMuMDI4LjAzNC0uMDIyLjAzLS4wMzgtLjAwNC0uMDQ5LjAwMi0uMDcuMDM5YS4yNy4yNyAwIDAgMS0uMDc4LjA3NGMtLjA3MS4wNDQtLjEwOC4xMDktLjA2LjEwOS4wMTMgMCAuMDE3LjAxLjAxMi4wMjYtLjAxLjAzMi0uMDA2LjAzMi4wNjUtLjAwMi4wNDEtLjAyLjA2LS4wMzguMDY2LS4wNjVhLjA2NS4wNjUgMCAwIDEgLjA0MS0uMDQ4Yy4wMTgtLjAwNi4wMzItLjAxNS4wMy0uMDE5LS4wMDctLjAxOC4wMzMtLjA4Mi4wNDgtLjA3Ny4wMi4wMDYuMDgtLjA2LjA3LS4wNzYtLjAwNS0uMDA2LjAwMS0uMDExLjAxMi0uMDExLjAyMiAwIC4wNDMtLjA0OC4wMy0uMDY3LS4wMDQtLjAwNi0uMDIzLS4wMDctLjA0My0uMDAzLS4wMjQuMDA1LS4wMzUuMDAyLS4wMzUtLjAxIDAtLjAyLS4wNzUtLjA4OS0uMTAyLS4wOTdNMTIuODg1IDkuMjc0bC0uNDg2LS4wNTdhLjExOS4xMTkgMCAwIDEtLjAzNS0uMDFsLS4xMTgtLjA0OGEuMTQ0LjE0NCAwIDAgMS0uMDQ4LS4wMzJsLS4zOS0uNDE0YS4wNS4wNSAwIDAgMC0uMDQyLS4wMTUuMDQ3LjA0NyAwIDAgMC0uMDI4LjA3OGwuNDEuNDY2YS4xNS4xNSAwIDAgMCAuMDYzLjA0bC4yMzIuMDdhLjEyOC4xMjggMCAwIDAgLjA0LjAwNWguMzk3ek0xMy44NSA5LjUzNWwtLjAyLjA1N2EuMjU1LjI1NSAwIDAgMS0uMjcuMTcuMDUuMDUgMCAwIDEtLjAzOC0uMDI3LjA1LjA1IDAgMCAxIC4wMDEtLjA0N2wuMS0uMTg2LS4yNi4wMWEuMjU0LjI1NCAwIDAgMC0uMS4wMjNsLS4wOTguMDQ2YS4yNDkuMjQ5IDAgMCAwLS4wNy4wNDlsLS4xOC4xNzhhLjI0LjI0IDAgMCAxLS4wNzUuMDUxbC0uMTIzLjA1NWEuMjU5LjI1OSAwIDAgMC0uMTUyLjIzNnYuMDJjMCAuMDM0LjAwNy4wNjguMDIuMWwuMDk2LjIyOGMuMDAzLjAwNS4wMDQuMDEuMDA1LjAxNWEuMTEuMTEgMCAwIDAgLjE0My4wNzdsLjI0NS0uMDg4YS4yNDguMjQ4IDAgMCAxIC4xMDgtLjAxM2wuMjk0LjAyN2MuMDguMDA2LjE1LjA1LjE5My4xMmwuMDIuMDNhLjI1NC4yNTQgMCAwIDAgLjIxOC4xMjJoLjExOGEuMjU1LjI1NSAwIDAgMCAuMTgyLS4wNzZsLjEzLS4xMzJhLjI2LjI2IDAgMCAwIC4wNzUtLjE4M3YtLjE3M2EuMjYuMjYgMCAwIDAtLjA4Mi0uMTlsLS4yNjgtLjI0OGEuMjQuMjQgMCAwIDEtLjA2LS4wODJsLS4wOC0uMTc1Yy0uMDE3LS4wMjctLjA2LS4wMjYtLjA3MS4wMDZNMTMuMzIyIDkuMjVjLjAxNy4wMDEuMDI5LjAxNC4wMjguMDM3IDAgLjAxNS0uMDI5LjA0My0uMDY0LjA2M2EuMzMyLjMzMiAwIDAgMS0uMDY4LjAzMmMtLjAxNi4wMDQtLjAxOS0uMDA1LS4wMTktLjAyNyAwLS4wMTcuMDA2LS4wMzEuMDE0LS4wMzEuMDA3IDAgLjAzLS4wMi4wNTEtLjA0My4wMi0uMDIyLjA0MS0uMDMyLjA1OC0uMDNNMTMuMDc5IDkuMjcyYy4xNiAwIC4xNDkuMDQtLjAxMy4wNDgtLjA5NS4wMDQtLjEyIDAtLjExNS0uMDIxLjAwNS0uMDE4LjA0NS0uMDI3LjEyOC0uMDI3TTYuMTE3IDUuNTJoLjA5bC4wNjcuMDQ2LjE4Mi0uMDQ3LjAzMy4wODF2LjExNWwtLjE3NS4wMjFhLjEzMy4xMzMgMCAwIDEtLjEtLjAyOGwtLjE1My0uMTIxek04LjEyIDQuNTUxaC0uMjNsLS4wNTYuMDQuMTk3LjI1aC4wOWwuMDgyLS4xNTIuMjAyLjEwMy4wMzItLjA0OC0uMjQtLjE2OWEuMTMyLjEzMiAwIDAgMC0uMDc2LS4wMjRNOC42MTEgNC4zNzJoLS4yOThsLS4wMjguMDQ2LjA4Ni4wNjRhLjEzLjEzIDAgMCAwIC4wOC4wMjdoLjE2bC4wNzYtLjA4ek0zLjA0MiA0LjM3OWwtLjE5Ny4wNzQtLjE5LjA0OC4yNzMuMTMuMjE2LS4wNy4wNzItLjAxMy0uMDU3LS4xMDl6TTMuNDE1IDQuNzhoLS4wODZ2LjA0M2wuMDQ2LjAxNy4wMS4wNDQuMDcxLjAxLjA0OC4wNTUuNDI0LS4wMTQuMDI0LS4wNS0uMDM3LS4wNTZoLS40NTZ6TTMuMDMgNC44ODRsLS4wMzMtLjA5Ni4wMzMtLjAxOC4xMjcuMDEuMDMuMDI5LS4wNy4wODJ6TTMuMjE2IDQuNzI1bC4wMTYtLjA1NC4wMzUtLjAyNC4wMzQuMDEzLjA1OC4wMjV2LjAyNGgtLjAzbC0uMDQ2LjAzOHpcXFwiPjwvcGF0aD48cGF0aCBmaWxsPVxcXCIjMDUwNTA1XFxcIiBkPVxcXCJtMy44NDQgOC4wOTUtLjA4My4wMzdjLS4wMS4wMDUtLjAxLjAyMSAwIC4wMjRsLjA4OC4wMzcuMTAzLS4wMTcuMTY3LjExNWguMTE5cy4wODEtLjAxLjA4MS0uMDMyLS4wODEtLjAzMy0uMDgxLS4wMzNsLS4xNzItLjEzek00LjQgOC4yNzJzLS4wNzQuMDQ1LS4wNjUuMDY2Yy4wMTYuMDM4LjE2IDAgLjE2IDBzLjA1Mi0uMDQ4LjA0My0uMDY2Yy0uMDE4LS4wMzEtLjEzOCAwLS4xMzggME0xNC4xNjIgMTAuOTNoLS4yOGwuMDc0LjE2NGguMDY2elxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTS40IDggOCAxLjkyVjUuNWg3djVIOHYzLjU4ek03IDkuNWg3di0zSDdWNEwyIDhsNSA0elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHZpZXdCb3g9XFxcIjAgMCAxNiAxNlxcXCI+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJtMTYgOC03LjYgNi4wOFYxMC41aC03di01aDdWMS45MnpNOS40IDYuNWgtN3YzaDdWMTJsNS00LTUtNHpcXFwiIGNsaXAtcnVsZT1cXFwiZXZlbm9kZFxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiBmaWxsPVxcXCJub25lXFxcIiB2aWV3Qm94PVxcXCIwIDAgMTYgMTZcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk02IDYuNWEuNS41IDAgMCAxIDEgMHY2YS41LjUgMCAwIDEtMSAwek05LjUgNmEuNS41IDAgMCAwLS41LjV2NmEuNS41IDAgMCAwIDEgMHYtNmEuNS41IDAgMCAwLS41LS41XFxcIj48L3BhdGg+PHBhdGggZmlsbD1cXFwiIzAwMFxcXCIgZmlsbC1ydWxlPVxcXCJldmVub2RkXFxcIiBkPVxcXCJNMTEgMEg1YTEgMSAwIDAgMC0xIDF2MkguNWEuNS41IDAgMCAwIDAgMWgxLjZsLjgxIDExLjFhMSAxIDAgMCAwIC45OTUuOWg4LjE5YTEgMSAwIDAgMCAuOTk1LS45TDEzLjkgNGgxLjZhLjUuNSAwIDAgMCAwLTFIMTJWMWExIDEgMCAwIDAtMS0xbTAgM1YxSDV2MnptMS44OTUgMWgtOS43OWwuOCAxMWg4LjE5elxcXCIgY2xpcC1ydWxlPVxcXCJldmVub2RkXFxcIj48L3BhdGg+PC9zdmc+XCIiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA5IDVcXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGZpbGwtcnVsZT1cXFwiZXZlbm9kZFxcXCIgZD1cXFwiTTQuMTI4IDQuNTg3Ljc1MS44MzRBLjUuNSAwIDAgMSAxLjEyMyAwaDYuNzU0YS41LjUgMCAwIDEgLjM3Mi44MzRMNC44NzIgNC41ODdhLjUuNSAwIDAgMS0uNzQ0IDBcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDE2IDE2XFxcIj48ZyBmaWxsPVxcXCJub25lXFxcIiBmaWxsLXJ1bGU9XFxcIm5vbnplcm9cXFwiPjxwYXRoIGZpbGw9XFxcIiMwMDBcXFwiIGQ9XFxcIk0xMyA3LjVhMS41IDEuNSAwIDEgMSAzIDAgMS41IDEuNSAwIDAgMS0zIDBtLTYuNSAwYTEuNSAxLjUgMCAxIDEgMyAwIDEuNSAxLjUgMCAwIDEtMyAwTTAgNy41YTEuNSAxLjUgMCAxIDEgMyAwIDEuNSAxLjUgMCAwIDEtMyAwXFxcIj48L3BhdGg+PHBhdGggZD1cXFwiTTAgMGgxNnYxNkgwelxcXCI+PC9wYXRoPjwvZz48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDMyIDMyXFxcIj48cGF0aCBkPVxcXCJNMjAuODg5IDEuMzMzaDYuMjIyYTMuNTU2IDMuNTU2IDAgMCAxIDMuNTU2IDMuNTU2djYuMjIyYTMuNTU2IDMuNTU2IDAgMCAxLTMuNTU2IDMuNTU2aC02LjIyMmEzLjU1NiAzLjU1NiAwIDAgMS0zLjU1Ni0zLjU1NlY0Ljg4OWEzLjU1NiAzLjU1NiAwIDAgMSAzLjU1Ni0zLjU1Nk0yMCA0djhoOFY0ek00Ljg4OSAxNy4zMzNoNi4yMjJhMy41NTYgMy41NTYgMCAwIDEgMy41NTYgMy41NTZ2Ni4yMjJhMy41NTYgMy41NTYgMCAwIDEtMy41NTYgMy41NTZINC44ODlhMy41NTYgMy41NTYgMCAwIDEtMy41NTYtMy41NTZ2LTYuMjIyYTMuNTU2IDMuNTU2IDAgMCAxIDMuNTU2LTMuNTU2TTQgMjB2OGg4di04em0yMCA4YTQgNCAwIDEgMCAwLTggNCA0IDAgMCAwIDAgOG0wIDIuNjY3YTYuNjY3IDYuNjY3IDAgMSAxIDAtMTMuMzM0IDYuNjY3IDYuNjY3IDAgMCAxIDAgMTMuMzM0TTQuOTgxIDEyaDYuMDM3TDcuOTk5IDUuOTYzem00LjIxMi05LjYxNSA1LjE3NiAxMC4zNTJhMS4zMzQgMS4zMzQgMCAwIDEtMS4xOTIgMS45M0gyLjgyNWExLjMzMyAxLjMzMyAwIDAgMS0xLjE5Mi0xLjkyOUw2LjgwOSAyLjM4NmExLjMzMiAxLjMzMiAwIDAgMSAyLjM4NSAwelxcXCI+PC9wYXRoPjwvc3ZnPlwiIiwiaW1wb3J0IHsgdHlwZSBJbW11dGFibGVPYmplY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNSmltdU1hcENvbmZpZyB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuXG5leHBvcnQgZW51bSBTY2VuZVF1YWxpdHlNb2RlIHtcbiAgYXV0byA9ICdhdXRvJyxcbiAgbG93ID0gJ2xvdycsXG4gIG1lZGl1bSA9ICdtZWRpdW0nLFxuICBoaWdoID0gJ2hpZ2gnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnIGV4dGVuZHMgSU1KaW11TWFwQ29uZmlnIHtcbiAgaXNVc2VDdXN0b21NYXBTdGF0ZTogYm9vbGVhblxuICBzY2VuZVF1YWxpdHlNb2RlOiBTY2VuZVF1YWxpdHlNb2RlXG4gIC8vIHdlYm1hcC93ZWJzY2VuZSBkYXRhIHNvdXJjZSBpZHMgdGhhdCBlbmFibGVzIGNsaWVudCBxdWVyeVxuICBjbGllbnRRdWVyeURhdGFTb3VyY2VJZHM/OiBzdHJpbmdbXVxufVxuXG5leHBvcnQgdHlwZSBJTUNvbmZpZyA9IEltbXV0YWJsZU9iamVjdDxDb25maWc+XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENvbmZpZyB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIE1hcFdpZGdldFByb3BzIH0gZnJvbSAnLi4vd2lkZ2V0J1xuaW1wb3J0IHsgY2hlY2tJc0xpdmUgfSBmcm9tICcuLi91dGlscydcbmltcG9ydCBNdWx0aVNvdXJjZU1hcCBmcm9tICcuL211bHRpc291cmNlbWFwJ1xuaW1wb3J0IHsgdHlwZSBKaW11TWFwVmlld0dyb3VwLCBwb3J0YWxVdGlscywgdHlwZSBEZWZhdWx0TWFwSW5mbywgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBiYXNlV2lkZ2V0UHJvcHM6IE1hcFdpZGdldFByb3BzXG4gIHN0YXJ0TG9hZE1vZHVsZXM6IGJvb2xlYW5cbiAgZnVsbFNjcmVlbk1hcDogKCkgPT4gdm9pZFxuXG4gIGlzRGVmYXVsdE1hcD86IGJvb2xlYW5cbiAgb25WaWV3R3JvdXBDcmVhdGU6ICh2aWV3R3JvdXA6IEppbXVNYXBWaWV3R3JvdXApID0+IHZvaWRcbiAgb25KaW11TWFwVmlld0NyZWF0ZWQ6IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHZvaWRcbiAgb25BY3RpdmVKaW11TWFwVmlld0NoYW5nZTogKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4gdm9pZFxuXG4gIHdpZHRoQnJlYWtwb2ludDogc3RyaW5nXG4gIHdpZGdldEhlaWdodDogbnVtYmVyXG5cbiAgaXNGdWxsU2NyZWVuOiBib29sZWFuXG4gIGlzTWFwSW5WaXNpYmxlQXJlYTogYm9vbGVhblxuXG4gIHNldE11bHRpU291cmNlTWFwSW5zdGFuY2U6IChpbnN0YW5jZTogTXVsdGlTb3VyY2VNYXApID0+IHZvaWRcblxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxuXG4gIGF1dG9Db250cm9sV2lkZ2V0SWQ6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBkZWZhdWx0TWFwSW5mbzogRGVmYXVsdE1hcEluZm9cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVmYXVsdE1hcCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRlZmF1bHRNYXBJbmZvOiBudWxsXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHBvcnRhbFV0aWxzLmdldERlZmF1bHRXZWJNYXAodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMucG9ydGFsVXJsKS50aGVuKGRlZmF1bHRNYXBJbmZvID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBkZWZhdWx0TWFwSW5mbzogZGVmYXVsdE1hcEluZm9cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCc+XG4gICAgICAgIHshdGhpcy5zdGF0ZS5kZWZhdWx0TWFwSW5mbyAmJiA8ZGl2IGNsYXNzTmFtZT0nd2lkZ2V0LW1hcCB3LTEwMCBoLTEwMCB3aWRnZXQtbWFwLWJhY2tncm91bmQnPlxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6ICc1MCUnLCB0b3A6ICc1MCUnIH19IGNsYXNzTmFtZT0namltdS1zZWNvbmRhcnktbG9hZGluZycgLz5cbiAgICAgICAgPC9kaXY+fVxuICAgICAgICB7dGhpcy5zdGF0ZS5kZWZhdWx0TWFwSW5mbyAmJiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndy0xMDAgaC0xMDAnLCB7ICdtYXAtaXMtZGVzaWduLW1vZGUnOiAhY2hlY2tJc0xpdmUodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuYXBwTW9kZSkgfSl9PlxuICAgICAgICAgIHs8TXVsdGlTb3VyY2VNYXBcbiAgICAgICAgICAgIGtleT17MH0gZnVsbFNjcmVlbk1hcD17dGhpcy5wcm9wcy5mdWxsU2NyZWVuTWFwfVxuICAgICAgICAgICAgYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wc30gc3RhcnRMb2FkTW9kdWxlcz17dGhpcy5wcm9wcy5zdGFydExvYWRNb2R1bGVzfSBpc0RlZmF1bHRNYXBcbiAgICAgICAgICAgIHJlZj17dGhpcy5wcm9wcy5zZXRNdWx0aVNvdXJjZU1hcEluc3RhbmNlfVxuICAgICAgICAgICAgb25WaWV3R3JvdXBDcmVhdGU9e3RoaXMucHJvcHMub25WaWV3R3JvdXBDcmVhdGV9XG4gICAgICAgICAgICBvbkppbXVNYXBWaWV3Q3JlYXRlZD17dGhpcy5wcm9wcy5vbkppbXVNYXBWaWV3Q3JlYXRlZH1cbiAgICAgICAgICAgIG9uQWN0aXZlSmltdU1hcFZpZXdDaGFuZ2U9e3RoaXMucHJvcHMub25BY3RpdmVKaW11TWFwVmlld0NoYW5nZX1cbiAgICAgICAgICAgIHdpZGdldEhlaWdodD17dGhpcy5wcm9wcy53aWRnZXRIZWlnaHR9IHdpZHRoQnJlYWtwb2ludD17dGhpcy5wcm9wcy53aWR0aEJyZWFrcG9pbnR9XG4gICAgICAgICAgICBpc0Z1bGxTY3JlZW49e3RoaXMucHJvcHMuaXNGdWxsU2NyZWVufSBpc01hcEluVmlzaWJsZUFyZWE9e3RoaXMucHJvcHMuaXNNYXBJblZpc2libGVBcmVhfVxuICAgICAgICAgICAgZGVmYXVsdE1hcEluZm89e3RoaXMuc3RhdGUuZGVmYXVsdE1hcEluZm99XG4gICAgICAgICAgICBhdXRvQ29udHJvbFdpZGdldElkPXt0aGlzLnByb3BzLmF1dG9Db250cm9sV2lkZ2V0SWR9XG4gICAgICAgICAgPlxuICAgICAgICAgIDwvTXVsdGlTb3VyY2VNYXA+fVxuICAgICAgICA8L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBTZXNzaW9uTWFuYWdlciwgZXNyaSwgZ2V0QXBwU3RvcmUsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEltYWdlV2l0aFBhcmFtIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IFBsYWNlaG9sZGVyTWFwRmlsbGVkIH0gZnJvbSAnamltdS1pY29ucy9maWxsZWQvZGF0YS9wbGFjZWhvbGRlci1tYXAnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIG1hcEl0ZW1JZDogc3RyaW5nXG4gIHBvcnRVcmw6IHN0cmluZ1xuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5pbnRlcmZhY2UgU3RhdGVzIHtcbiAgbWFwVGh1bWJVcmw6IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBUaHVtYiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlcz4ge1xuICB1bm1vdW50ID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBtYXBUaHVtYlVybDogbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICB0aGlzLnVubW91bnQgPSBmYWxzZVxuICAgIHRoaXMuc2V0TWFwVGh1bWJVcmwodGhpcy5wcm9wcy5tYXBJdGVtSWQpXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZSkge1xuICAgIGlmIChwcmV2UHJvcHMubWFwSXRlbUlkICE9PSB0aGlzLnByb3BzLm1hcEl0ZW1JZCkge1xuICAgICAgdGhpcy5zZXRNYXBUaHVtYlVybCh0aGlzLnByb3BzLm1hcEl0ZW1JZClcbiAgICB9XG4gIH1cblxuICBzZXRNYXBUaHVtYlVybCA9IChtYXBJZDogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgaWYgKCFtYXBJZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1hcFRodW1iVXJsOiBudWxsIH0pXG4gICAgfVxuXG4gICAgLy8gaWYgbm8gcG9ydGFsVXJsIG9yIHNhbWUgdG8gY29uZmlnIHBvcnRhbHVybCwgdXNlIGFwcCBjb25maWcncyBwb3J0YWxVcmxcbiAgICBjb25zdCBwb3J0YWxVcmwgPSB0aGlzLnByb3BzPy5wb3J0VXJsIHx8IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5wb3J0YWxVcmxcbiAgICBjb25zdCBzZXNzaW9uID0gU2Vzc2lvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRTZXNzaW9uQnlVcmwocG9ydGFsVXJsKSB8fCBudWxsXG4gICAgZXNyaS5yZXN0UG9ydGFsLnNlYXJjaEl0ZW1zKHtcbiAgICAgIHE6IGBpZDoke21hcElkfWAsXG4gICAgICBhdXRoZW50aWNhdGlvbjogc2Vzc2lvbixcbiAgICAgIHBvcnRhbDogcG9ydGFsVXJsICsgJy9zaGFyaW5nL3Jlc3QnXG4gICAgfSkudGhlbihpdGVtcyA9PiB7XG4gICAgICBpZiAoIXRoaXMudW5tb3VudCkge1xuICAgICAgICBpZiAoaXRlbXMucmVzdWx0c1swXT8udGh1bWJuYWlsKSB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IFNlc3Npb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U2Vzc2lvbkJ5VXJsKHBvcnRhbFVybClcbiAgICAgICAgICBsZXQgdGVtcFRodW1iVXJsID0gbnVsbFxuICAgICAgICAgIGlmIChzZXNzaW9uICYmIHNlc3Npb24udG9rZW4pIHtcbiAgICAgICAgICAgIHRlbXBUaHVtYlVybCA9IGAke3BvcnRhbFVybH0vc2hhcmluZy9yZXN0L2NvbnRlbnQvaXRlbXMvJHtpdGVtcy5yZXN1bHRzWzBdLmlkfS9gICtcbiAgICAgICAgICAgIGBpbmZvLyR7aXRlbXMucmVzdWx0c1swXS50aHVtYm5haWx9P3Rva2VuPSR7c2Vzc2lvbi50b2tlbn1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBUaHVtYlVybCA9IGAke3BvcnRhbFVybH0vc2hhcmluZy9yZXN0L2NvbnRlbnQvaXRlbXMvJHtpdGVtcy5yZXN1bHRzWzBdLmlkfS9gICtcbiAgICAgICAgICAgIGBpbmZvLyR7aXRlbXMucmVzdWx0c1swXS50aHVtYm5haWx9YFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtYXBUaHVtYlVybDogdGVtcFRodW1iVXJsIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1hcFRodW1iVXJsOiBudWxsIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIHRoaXMudW5tb3VudCA9IHRydWVcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUubWFwVGh1bWJVcmwpIHtcbiAgICAgIHJldHVybiA8SW1hZ2VXaXRoUGFyYW0gaW1hZ2VQYXJhbT17eyB1cmw6IHRoaXMuc3RhdGUubWFwVGh1bWJVcmwgfX0gLz5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGFsZXR0ZSA9IHRoaXMucHJvcHMudGhlbWUuY29sb3JzLnBhbGV0dGVcbiAgICAgIHJldHVybiAoPGRpdiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IHBhbGV0dGUubGlnaHRbMjAwXSwgaGVpZ2h0OiAnMTAwJScgfX0gPlxuICAgICAgICAgIDxQbGFjZWhvbGRlck1hcEZpbGxlZCBjb2xvcj17cGFsZXR0ZS5saWdodFs2MDBdfSBzaXplPXsnMTAwJSd9IC8+XG4gICAgICAgIDwvZGl2PilcbiAgICB9XG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHtcbiAgUmVhY3QsIERhdGFTb3VyY2VNYW5hZ2VyLCBFeHRlbnRDaGFuZ2VNZXNzYWdlLCBEYXRhU291cmNlQ29tcG9uZW50LCBwb3J0YWxVcmxVdGlscywgdHlwZSBTcWxRdWVyeVBhcmFtcywgdHlwZSBEYXRhU291cmNlSnNvbixcbiAgZ2V0QXBwU3RvcmUsIE11dGFibGVTdG9yZU1hbmFnZXIsIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBkYXRhU291cmNlVXRpbHMsIHR5cGUgRmVhdHVyZUxheWVyRGF0YVNvdXJjZSwgdHlwZSBVc2VEYXRhU291cmNlLFxuICB0eXBlIEltbXV0YWJsZUFycmF5LCB0eXBlIEpTQVBJTGF5ZXJNaXhpbiwgY3NzLCBqc3gsIGxvZGFzaFxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIElNQ29uZmlnLCBTY2VuZVF1YWxpdHlNb2RlIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBNYXBEYXRhU291cmNlLCBEYXRhU291cmNlVHlwZXMsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIE1hcFZpZXdNYW5hZ2VyLCB0eXBlIEppbXVNYXBWaWV3LCB6b29tVG9VdGlscywgdHlwZSBEZWZhdWx0TWFwSW5mbyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgdHlwZSBJbml0aWFsTWFwU3RhdGUgfSBmcm9tICdqaW11LXVpL2FkdmFuY2VkL21hcCdcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcywgSWNvbiB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQge1xuICBjcmVhdGVOZXdGZWF0dXJlbGF5ZXIsIHVwZGF0ZUZlYXR1cmVsYXllciwgZ2V0TWFwQmFzZVJlc3RvcmVEYXRhLCByZXN0b3JlTWFwQmFzZSwgc2VsZWN0RmVhdHVyZSxcbiAgbWFwUGFudG8sIGZsYXNoRmVhdHVyZXNCeVF1ZXJ5LCBwcm9qZWN0R2VvbWV0cmllcywgZmlsdGVyRmVhdHVyZXNCeVF1ZXJ5LCBwcm9jZXNzWm9vbVRvRmVhdHVyZXMsXG4gIGdldExheWVyc0Zyb21EYXRhU291cmNlSWRzLCBnZXRKaW11TWFwVmlld0lkLCBpc05lZWRQcm9qZWN0Vmlld3BvaW50LCBwcm9qZWN0Vmlld3BvaW50LCBpc05lZWRQcm9qZWN0U3BhdGlhbFJlZmVyZW5jZSxcbiAgaXNUd29XaWRnZXRzTXV0dWFsbHlFeHRlbnRDaGFuZ2UsIGlzU2FtZWxpa2VWaWV3cG9pbnRzLCBnZXRWaWV3cG9pbnRJbnN0YW5jZUZyb21IaXN0b3J5LCB1cGRhdGVVcmxIYXNoUGFyYW1zRm9yQWN0aXZlSmltdU1hcFZpZXdcbn0gZnJvbSAnLi4vdXRpbHMnXG5pbXBvcnQgeyBNdWx0aVNvdXJjZU1hcENvbnRleHQgfSBmcm9tICcuL211bHRpc291cmNlbWFwLWNvbnRleHQnXG5pbXBvcnQgeyB0eXBlIE1hcFdpZGdldFByb3BzLCB0eXBlIEFjdGlvblJlbGF0ZWRQcm9wcyB9IGZyb20gJy4uL3dpZGdldCdcbmltcG9ydCB0eXBlIHsgQWN0aXZlVG9vbEluZm8gfSBmcm9tICcuLi9sYXlvdXQvbGF5b3V0J1xuXG5jb25zdCBFeGNoYW5nZSA9IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9leGNoYW5nZS5zdmcnKVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBpc01hcEluVmlzaWJsZUFyZWE6IGJvb2xlYW5cbiAgd2lkdGhCcmVha3BvaW50OiBzdHJpbmdcbiAgaXNEZWZhdWx0TWFwPzogYm9vbGVhblxuICBiYXNlV2lkZ2V0UHJvcHM6IE1hcFdpZGdldFByb3BzXG4gIHN0YXJ0TG9hZE1vZHVsZXM6IGJvb2xlYW5cbiAgZGF0YVNvdXJjZUlkOiBzdHJpbmdcbiAgZGVmYXVsdE1hcEluZm8/OiBEZWZhdWx0TWFwSW5mb1xuICBtdWx0aVNvdXJjZU1hcERvbTogSFRNTERpdkVsZW1lbnRcbiAgb25NdXRhYmxlU3RhdGVQcm9wc0NoYW5nZWQ/OiAoZGF0YVNvdXJjZUlkOiBzdHJpbmcsIHByb3BLZXk6IHN0cmluZywgdmFsdWU/OiBhbnkpID0+IHZvaWRcblxuICBvbkV4dGVudENoYW5nZWQ/OiAoZGF0YVNvdXJjZUlkOiBzdHJpbmcsIG1lc3NhZ2U6IEV4dGVudENoYW5nZU1lc3NhZ2UpID0+IHZvaWRcbiAgb25NYXBMb2FkZWQ/OiAoZGF0YVNvdXJjZUlkOiBzdHJpbmcsIG1hcExvYWRTdGF0dXM6IE1hcExvYWRTdGF0dXMpID0+IHZvaWRcbiAgb25KaW11TWFwVmlld0NyZWF0ZWQ6IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHZvaWRcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGVcbiAgLy8gb25TaG93T25NYXBEYXRhQ2hhbmdlZD86IChzaG93T25NYXBEYXRhc0tleTogc3RyaW5nW10pID0+IHZvaWRcbiAgb25BY3RpdmVUb29sSW5mb0NoYW5nZTogKGFjdGl2ZVRvb2xJbmZvOiBBY3RpdmVUb29sSW5mbykgPT4gdm9pZFxufVxuXG5jb25zdCBERUZBVUxUX0hJR0hMSUdIVF9DT0xPUiA9ICcjMDBGRkZGJ1xuY29uc3QgREVGQVVMVF9ISUdITElHSFRfSEFMT19DT0xPUiA9ICcjMDBGRkZGJ1xuXG5leHBvcnQgZW51bSBNYXBMb2FkU3RhdHVzIHtcbiAgTG9hZGluZyA9ICdMT0FESU5HJyxcbiAgTG9hZG9rID0gJ0xPQURPSycsXG4gIExvYWRFcnJvciA9ICdMT0FERVJST1InXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlnaExpZ2h0SGFuZGxlIHtcbiAgbGF5ZXJJZDogc3RyaW5nXG4gIGhhbmRsZTogX19lc3JpLkhhbmRsZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcbiAgZGF0YVNvdXJjZUlkOiBzdHJpbmdcbiAgaXNCYXNpY01vZHVsZXNMb2FkZWQ6IGJvb2xlYW4gLy8gdHJ1ZSBtZWFucyBjb21tb24gbW9kdWxlcyBsb2FkZWQsIG5vdCBtZWFucyBhbGwgbmVlZCBtb2R1bGVzIGxvYWRlZFxuICBtYXBMb2FkU3RhdHVzOiBNYXBMb2FkU3RhdHVzXG59XG5cbmV4cG9ydCB0eXBlIE1hcGJhc2VWaWV3ID0gKF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldykgJiB7XG4gIG1hcGJhc2U6IE1hcEJhc2VcbiAgZGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mb1xuICBpc0luQ2FjaGluZzogYm9vbGVhblxuICB2aWV3V2hlbkluaXRpYWxWaWV3cG9pbnQ6IF9fZXNyaS5WaWV3cG9pbnRcbiAgbGFzdFZpZXdwb2ludFVwZGF0ZVVybFBhcmFtczogX19lc3JpLlZpZXdwb2ludFxuICB2aWV3V2hlblRpbWVzdGFtcDogbnVtYmVyXG4gIC8vIHRydWUgbWVhbnMgdmlldy5pbnRlcmFjdGluZyBzZXQgdG8gdHJ1ZSBhdCBsZWFzdCBvbmUgdGltZVxuICB3YXRjaEludGVyYWN0aW5nSGFuZGxlOiBfX2VzcmkuV2F0Y2hIYW5kbGVcbiAgZXh0ZW50V2F0Y2hIYW5kbGU6IF9fZXNyaS5XYXRjaEhhbmRsZVxuICBmYXRhbEVycm9yV2F0Y2hIYW5kbGU6IF9fZXNyaS5XYXRjaEhhbmRsZVxuICBoaWdoTGlnaHRIYW5kbGVzOiB7IFtsYXllcklkOiBzdHJpbmddOiBfX2VzcmkuSGFuZGxlIH1cbiAgbWFwQmFzZVZpZXdFdmVudEhhbmRsZXM6IHsgW2V2ZW50TmFtZTogc3RyaW5nXTogX19lc3JpLkhhbmRsZSB9XG4gIHN0YXRpb25hcnlUaW1lcklkOiBOb2RlSlMuVGltZW91dFxuICAvLyBVc2UgZXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkcyB0byBhdm9pZCB0d28gbWFwIHdpZGdldCB0d28td2F5IGV4dGVudCBzeW5jXG4gIGV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHM6IHN0cmluZ1tdXG4gIGZpcnN0UHVibGlzaEV4dGVudENoYW5nZVRpbWU6IG51bWJlclxuICAvLyB2aWV3cG9pbnRIaXN0b3J5IHVzZWQgdG8gc3RvcmUgYWxsIHN0YXRpYyB2aWV3cG9pbnRzLCB1c2VkIGZvciBFeHRlbnROYXZpZ2F0aW9uXG4gIHZpZXdwb2ludEhpc3Rvcnk6IF9fZXNyaS5WaWV3cG9pbnRbXVxuICB2aWV3cG9pbnRJbmRleDogbnVtYmVyXG4gIHN0YXRpb25hcnlDYWxsYmFjaz86ICgpID0+IHZvaWRcbiAgbGFzdFpvb21Ub0V4dGVudFRpbWU6IG51bWJlclxuICAvKipcbiAgICogbWVzc2FnZSB3b3JrZmxvdzogcmVjZWl2ZSBtZXNzYWdlICh0aW1lMSkgLT4gbWF5YmUgYXN5bmMgLT4gdXBkYXRlIHZpZXcgKHRpbWUyKSwgdGltZTEgYW5kIHRpbWUyIG1heWJlIGRpZmZlcmVudFxuICAgKiByZWNlaXZlTWVzc2FnZVRpbWVPZkxhc3RWaWV3VXBkYXRlIGlzIHRpbWUxIG9mIGxhc3QgdXBkYXRlIHZpZXdcbiAgICovXG4gIHJlY2VpdmVNZXNzYWdlVGltZU9mTGFzdFZpZXdVcGRhdGU6IG51bWJlclxuICBpc01hcFRvb2xzSGlkZGVuOiBib29sZWFuXG4gIHB1Ymxpc2hFeHRlbnRDaGFuZ2VNZXNzYWdlOiAoc3RhdGlvbmFyeTogYm9vbGVhbiwgaW50ZXJhY2l2ZTogYm9vbGVhbikgPT4gdm9pZFxuICBoaWRlTWFwVG9vbHM6ICgpID0+IHZvaWRcbiAgc2hvd01hcFRvb2xzOiAoKSA9PiB2b2lkXG4gIGluaXRVcmxIYXNoVmlld3BvaW50PzogX19lc3JpLlZpZXdwb2ludFxufVxuXG4vKipcbiAqIENvbnNpZGVyIHRoaXMgY2FzZTpcbiAqIFdlIGFyZSBjcmVhdGluZyBtYXBWaWV3MSBmb3IgZGF0YVNvdXJjZTEsIHRoZSBjcmVhdGlvbiBwcm9jZXNzIGlzIGFzeW5jIGFuZCB3ZSBnZXQgdGhlIHByb21pc2UxLlxuICogRHVyaW5nIHRoZSBjcmVhdGlvbiBwcm9jZXNzLCB0aGUgcHJvcHMuZGF0YVNvdXJjZUlkIGNoYW5nZWQsIHRoZW4gcHJvbWlzZTEgaXMgcmVzb2x2ZWQuXG4gKiBXZSBzaG91bGQgbm90IGV4ZWN1dGUgdGhlIGNhbGxiYWNrIGxvZ2ljIG9mIHByb21pc2UxLnRoZW4oY2FsbGJhY2spIGJlY2F1c2UgdGhlIGxhdGVzdCBleHBlY3RlZCBtYXBWaWV3IGlzIG1hcFZpZXcyLCBub3QgbWFwVmlldzEuXG4gKiBTbyB3ZSBuZWVkIGEgd2F5IHRvIGlkZW50aWZ5IGlmIHdlIHNob3VsZCBleGVjdXRlIGNhbGxiYWNrIGluIGV2ZXJ5IHByb21pc2UudGhlbihjYWxsYmFjaykuIFdlIGNhbiB1c2UgTWFwYmFzZURhdGFTb3VyY2VJbmZvIHRvIHNvbHZlIGl0LlxuICpcbiAqIE1hcGJhc2VEYXRhU291cmNlSW5mbyBpcyB1c2VkIHRvIGNyZWF0ZSBtYXAgdmlldyBvciBzY2VuZSB2aWV3LiBFYWNoIE1hcGJhc2VEYXRhU291cmNlSW5mbyBoYXMgYSB1bmlxdWUgaWQsIHRoZSB1bmlxdWVJZCBpcyBjYWxjdWxhdGVkIGJ5IGRhdGEgc291cmNlIHR5cGUsIGRhdGEgc291cmNlSWQgYW5kIGl0ZW1JZC5cbiAqIFdoZW4gd2UgbmVlZCB0byBjcmVhdGUgbWFwVmlldzEsIHdlIG5lZWQgdG8gdXBkYXRlIHRoaXMuZXhwZWN0ZWREYXRhU291cmNlSW5mby4gdGhpcy5leHBlY3RlZERhdGFTb3VyY2VJbmZvIGFsd2F5cyBiaW5kIHRvIHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkLlxuICogV2UgcGFzcyB0aGlzLmV4cGVjdGVkRGF0YVNvdXJjZUluZm8gYXMgZm9ybWFsIHBhcmFtZXRlciB0byBtYXAgY3JlYXRpb24gcmVsYXRlZCBmdW5jdGlvbnMgd2hlbiB3ZSBjcmVhdGUgYSBtYXBWaWV3LlxuICogQW5kIGluIHRoZSBtYXAgY3JlYXRpb24gcHJvbWlzZS50aGVuKGNhbGxiYWNrKSwgd2UgY2hlY2sgdGhlIGRhdGFTb3VyY2VJbmZvLnVuaXF1ZUlkIGlzIGNoYW5nZWQgb3Igbm90LiBJZiBjaGFuZ2VkLCB3ZSBzdG9wIHRoZSBjYWxsYmFjayBsb2dpYy4gSWYgbm90IGNoYW5nZWQsIGdvIGhlYWQuXG4gKlxuICogQWxsIGRhdGEgc291cmNlIGNhc2VzOlxuICogMS4gdXNlIGRlZmF1bHQgd2VibWFwXG4gKiAyLiB1c2VyIHNlbGVjdCBhIHdlYm1hcCBkYXRhIHNvdXJjZVxuICogMy4gdXNlciBzZWxlY3QgYSB3ZWJzY2VuZSBkYXRhIHNvdXJjZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1hcGJhc2VEYXRhU291cmNlSW5mbyB7XG4gIC8vIHRydWUgZm9yIGRhdGEgc291cmNlIGNhc2UxLCBmYWxzZSBmb3IgZGF0YSBzb3VyY2UgY2FzZTIgYW5kIGNhc2UzXG4gIGlzRGVmYXVsdE1hcDogYm9vbGVhblxuXG4gIC8vIHRydWUgZm9yIGRhdGEgc291cmNlIGNhc2UxIGFuZCBjYXNlMiwgZmFsc2UgZm9yIGRhdGEgc291cmNlIGNhc2UzXG4gIGlzV2ViTWFwOiBib29sZWFuXG5cbiAgLy8gZm9ybWF0IGlzIDx3ZWJtYXAgb3Igd2Vic2NlbmU+LWRhdGFTb3VyY2VJZC1pdGVtSWRcbiAgLy8gZXhhbXBsZXM6XG4gIC8vIHVzZSBkZWZhdWx0IHdlYm1hcDogJ3dlYm1hcC1kZWZhdWx0J1xuICAvLyB1c2VyIHNlbGVjdCBhIHdlYm1hcCBkYXRhIHNvdXJjZTogJ3dlYm1hcC1kYXRhU291cmNlXzEtMmM4ZDlhNzcyYWEwNGU1OTg1YWMzMDMwZGJlY2IyMzInXG4gIC8vIHVzZXIgc2VsZWN0IGEgd2Vic2NlbmUgZGF0YSBzb3VyY2U6ICd3ZWJzY2VuZS1kYXRhU291cmNlXzEtMmM4ZDlhNzcyYWEwNGU1OTg1YWMzMDMwZGJlY2IyMzInXG4gIHVuaXF1ZUlkOiBzdHJpbmdcblxuICAvLyBudWxsIGZvciBkYXRhIHNvdXJjZSBjYXNlMSwgbm90IG51bGwgZm9yIGRhdGEgc291cmNlIGNhc2UyIGFuZCBjYXNlM1xuICBkYXRhU291cmNlSWQ6IHN0cmluZ1xuXG4gIGppbXVNYXBWaWV3SWQ6IHN0cmluZ1xuXG4gIGRhdGFTb3VyY2VKc29uOiBJbW11dGFibGVPYmplY3Q8RGF0YVNvdXJjZUpzb24+XG59XG5cbi8qKlxuICogbWFwYmFzZS5tYXBDcmVhdGluZ0luZm8gaXMgbm90IG51bGwgZHVyaW5nIHRoZSBhc3luYyBtYXAoTWFwVmlldy9KaW11TWFwVmlldykgY3JlYXRpb24gcGVyaW9kLlxuICogV2hlbiBtYXAgY3JlYXRlZCwgbWFwYmFzZS5tYXBDcmVhdGluZ0luZm8gaXMgc2V0IHRvIG51bGwuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWFwQ3JlYXRpbmdJbmZvIHtcbiAgZGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mb1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hcGJhc2VSZXN0b3JlRGF0YSB7XG4gIG1hcENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnRcbiAgc3RhdGU6IFN0YXRlXG5cbiAgR2VvbWV0cnk6IHR5cGVvZiBfX2VzcmkuR2VvbWV0cnlcbiAgSW5pdGlhbFZpZXdQcm9wZXJ0aWVzOiB0eXBlb2YgX19lc3JpLkluaXRpYWxWaWV3UHJvcGVydGllc1xuICBUaWxlTGF5ZXI6IHR5cGVvZiBfX2VzcmkuVGlsZUxheWVyXG4gIEJhc2VtYXA6IHR5cGVvZiBfX2VzcmkuQmFzZW1hcFxuICBNYXBWaWV3OiB0eXBlb2YgX19lc3JpLk1hcFZpZXdcbiAgU2NlbmVWaWV3OiB0eXBlb2YgX19lc3JpLlNjZW5lVmlld1xuICBFeHRlbnQ6IHR5cGVvZiBfX2VzcmkuZ2VvbWV0cnkuRXh0ZW50XG4gIFZpZXdwb2ludDogdHlwZW9mIF9fZXNyaS5WaWV3cG9pbnRcbiAgUG9ydGFsSXRlbTogdHlwZW9mIF9fZXNyaS5Qb3J0YWxJdGVtXG4gIFBvcnRhbDogdHlwZW9mIF9fZXNyaS5Qb3J0YWxcbiAgV2ViTWFwOiB0eXBlb2YgX19lc3JpLldlYk1hcFxuICBXZWJTY2VuZTogdHlwZW9mIF9fZXNyaS5XZWJTY2VuZVxuICBDb2xvcjogdHlwZW9mIF9fZXNyaS5Db2xvclxuXG4gIGV4cGVjdGVkRGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mb1xuICBtYXBDcmVhdGluZ0luZm86IE1hcENyZWF0aW5nSW5mb1xuICB2aWV3OiBNYXBiYXNlVmlld1xuICBsYXN0VXBkYXRlVmlld0NvbmZpZzogSU1Db25maWdcbiAgbWFwRHM6IE1hcERhdGFTb3VyY2VcblxuICBkc01hbmFnZXI6IERhdGFTb3VyY2VNYW5hZ2VyXG4gIGlzRmlyc3RSZWNlaXZlTWVzc2FnZTogYm9vbGVhblxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBCYXNlIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgbWFwQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudFxuICB3aWRnZXRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50XG5cbiAgR2VvbWV0cnk6IHR5cGVvZiBfX2VzcmkuR2VvbWV0cnlcbiAgSW5pdGlhbFZpZXdQcm9wZXJ0aWVzOiB0eXBlb2YgX19lc3JpLkluaXRpYWxWaWV3UHJvcGVydGllc1xuICBUaWxlTGF5ZXI6IHR5cGVvZiBfX2VzcmkuVGlsZUxheWVyXG4gIEJhc2VtYXA6IHR5cGVvZiBfX2VzcmkuQmFzZW1hcFxuICBNYXBWaWV3OiB0eXBlb2YgX19lc3JpLk1hcFZpZXdcbiAgU2NlbmVWaWV3OiB0eXBlb2YgX19lc3JpLlNjZW5lVmlld1xuICBFeHRlbnQ6IHR5cGVvZiBfX2VzcmkuZ2VvbWV0cnkuRXh0ZW50XG4gIFZpZXdwb2ludDogdHlwZW9mIF9fZXNyaS5WaWV3cG9pbnRcbiAgUG9ydGFsSXRlbTogdHlwZW9mIF9fZXNyaS5Qb3J0YWxJdGVtXG4gIFBvcnRhbDogdHlwZW9mIF9fZXNyaS5Qb3J0YWxcbiAgV2ViTWFwOiB0eXBlb2YgX19lc3JpLldlYk1hcFxuICBXZWJTY2VuZTogdHlwZW9mIF9fZXNyaS5XZWJTY2VuZVxuICBDb2xvcjogdHlwZW9mIF9fZXNyaS5Db2xvclxuXG4gIGV4cGVjdGVkRGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mb1xuICBtYXBDcmVhdGluZ0luZm86IE1hcENyZWF0aW5nSW5mbyAvLyBtYXBDcmVhdGluZ0luZm8gYW5kIHZpZXcgYXJlIG11dHVhbGx5LWV4Y2x1c2l2ZVxuICB2aWV3OiBNYXBiYXNlVmlld1xuICBsYXN0VXBkYXRlVmlld0NvbmZpZzogSU1Db25maWdcbiAgbWFwRHM6IE1hcERhdGFTb3VyY2VcblxuICBkc01hbmFnZXIgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gIGlzRmlyc3RSZWNlaXZlTWVzc2FnZSA9IHRydWVcblxuICBfX3VubW91bnQgPSBmYWxzZVxuICAvLyB0cnVlIG1lYW5zIG1hcGJhc2UudmlldyBpcyByZXN0b3JlZCBmcm9tIE11dGFibGVTdG9yZVxuICByZXN0b3JlZDogYm9vbGVhblxuXG4gIGNyZWF0ZUZhaWxlZERhdGFTb3VyY2VJZHM6IHsgW2RzSWQ6IHN0cmluZ106IGJvb2xlYW4gfVxuXG4gIC8vIGxhc3QgdXNlciBpbnRlcmFjdGl2ZSB2aWV3XG4gIHN0YXRpYyBsYXN0SW50ZXJhY2l2ZVZpZXc6IE1hcGJhc2VWaWV3XG5cbiAgLy8gUmVjb3JkIHRoZSBKaW11TWFwVmlldy9NYXBiYXNlIGluaXRlZCBjb3VudCBmb3IgdGhlIHNwZWNpZmljIGppbXVNYXBWaWV3SWQgKG1hcFdpZGdldElkICsgZGF0YVNvdXJjZUlkKSBhdCBydW50aW1lLCB0aGUga2V5IGlzIGppbXVNYXBWaWV3SWQsIHRoZSB2YWx1ZSBpcyB0aGUgSmltdU1hcFZpZXcvTWFwYmFzZSBpbml0ZWQgY291bnQuXG4gIC8vIFdlIHVzZSBydW50aW1lSW5pdGVkSmltdU1hcFZpZXdzIHRvIGlkZW50aWZ5IHdoZXRoZXIgdGhlIEppbXVNYXBWaWV3L01hcGJhc2UgaXMgaW5pdGlhbGl6ZWQgZm9yIHRoZSBmaXJzdCB0aW1lLFxuICAvLyBhbmQgcmVwbGFjZSBjb25maWcuaW5pdGlhbE1hcFN0YXRlIHdpdGggbWFwX3N0YXRlIGluIHRoZSB1cmwgaGFzaCBkdXJpbmcgdGhlIGZpcnN0IGluaXRpYWxpemF0aW9uLlxuICBzdGF0aWMgcnVudGltZUluaXRlZEppbXVNYXBWaWV3czogeyBbamltdU1hcFZpZXdJZDogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5kZWJvdW5jZVVwZGF0ZVVybEhhc2hQYXJhbXMgPSBsb2Rhc2guZGVib3VuY2UoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVVcmxIYXNoUGFyYW1zKClcbiAgICB9LCA1MDApXG5cbiAgICB0aGlzLnJlc3RvcmVkID0gZmFsc2VcbiAgICB0aGlzLmNyZWF0ZUZhaWxlZERhdGFTb3VyY2VJZHMgPSB7fVxuXG4gICAgdGhpcy51cGRhdGVFeHBlY3RlZERhdGFTb3VyY2VJbmZvKClcblxuICAgIGNvbnN0IHJlc3RvcmVEYXRhID0gdGhpcy5nZXRSZXN0b3JlRGF0YUZyb21NUygpXG5cbiAgICBpZiAocmVzdG9yZURhdGEgJiYgcmVzdG9yZURhdGEuZXhwZWN0ZWREYXRhU291cmNlSW5mby51bmlxdWVJZCA9PT0gdGhpcy5leHBlY3RlZERhdGFTb3VyY2VJbmZvLnVuaXF1ZUlkKSB7XG4gICAgICByZXN0b3JlTWFwQmFzZSh0aGlzLCByZXN0b3JlRGF0YSlcbiAgICAgIHRoaXMudXBkYXRlUmVzdG9yZURhdGFUb01TKG51bGwpXG4gICAgICB0aGlzLmJpbmRNYXBCYXNlVmlld0V2ZW50KHRoaXMudmlldylcblxuICAgICAgaWYgKHRoaXMudmlldykge1xuICAgICAgICB0aGlzLnZpZXcuaXNJbkNhY2hpbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLnZpZXcubWFwYmFzZSA9IHRoaXNcbiAgICAgICAgdGhpcy5yZXN0b3JlZCA9IHRydWVcbiAgICAgICAgdGhpcy50cnlGYXRhbEVycm9yUmVjb3ZlcnkodGhpcy52aWV3KVxuXG4gICAgICAgIGlmICh0aGlzLnZpZXcuaXNNYXBUb29sc0hpZGRlbikge1xuICAgICAgICAgIHRoaXMudmlldy5oaWRlTWFwVG9vbHMoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudmlldy5zaG93TWFwVG9vbHMoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogbnVsbCxcbiAgICAgICAgaXNCYXNpY01vZHVsZXNMb2FkZWQ6IGZhbHNlLFxuICAgICAgICBtYXBMb2FkU3RhdHVzOiBNYXBMb2FkU3RhdHVzLkxvYWRpbmdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIChuZXh0UHJvcHM6IFByb3BzLCBwcmV2U3RhdGU6IFN0YXRlKSB7XG4gICAgaWYgKG5leHRQcm9wcy5kYXRhU291cmNlSWQgIT09IHByZXZTdGF0ZS5kYXRhU291cmNlSWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFTb3VyY2VJZDogbmV4dFByb3BzLmRhdGFTb3VyY2VJZCxcbiAgICAgICAgbWFwTG9hZFN0YXR1czogTWFwTG9hZFN0YXR1cy5Mb2FkaW5nXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAuZXNyaS12aWV3IC5lc3JpLXZpZXctc3VyZmFjZTpmb2N1czo6YWZ0ZXIge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgbGV0IHVzZURhdGFTb3VyY2UgPSBudWxsXG5cbiAgICBpZiAodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXMpIHtcbiAgICAgIHVzZURhdGFTb3VyY2UgPSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcy5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFTb3VyY2VJZCA9PT0gdGhpcy5wcm9wcy5kYXRhU291cmNlSWQpXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCBtYXAtYmFzZScgc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0gY3NzPXt0aGlzLmdldFN0eWxlKCl9IHJlZj17cmVmID0+IHsgdGhpcy53aWRnZXRDb250YWluZXIgPSByZWYgfX0+XG4gICAgICAgIHsodGhpcy5zdGF0ZS5tYXBMb2FkU3RhdHVzID09PSBNYXBMb2FkU3RhdHVzLkxvYWRpbmcpICYmXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIHdpZGdldC1tYXAtYmFja2dyb3VuZCc+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAnNTAlJywgdG9wOiAnNTAlJyB9fSBjbGFzc05hbWU9J2ppbXUtc2Vjb25kYXJ5LWxvYWRpbmcnIC8+XG4gICAgICAgICAgPC9kaXY+fVxuICAgICAgICB7KHRoaXMuc3RhdGUubWFwTG9hZFN0YXR1cyA9PT0gTWFwTG9hZFN0YXR1cy5Mb2FkRXJyb3IpICYmXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIHdpZGdldC1tYXAtYmFja2dyb3VuZCc+XG4gICAgICAgICAgICB7dGhpcy5nZXRNYXBTd2l0Y2hGb3JFcnJvck1hcCgpfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcic+e3RoaXMuZm9ybWF0TWVzc2FnZSgnbWFwRmFpbHVyZScpfTwvZGl2PlxuICAgICAgICAgIDwvZGl2Pn1cbiAgICAgICAgeyF0aGlzLnByb3BzLmlzRGVmYXVsdE1hcCAmJiA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBkaXNwbGF5OiAnbm9uZScgfX0+PERhdGFTb3VyY2VDb21wb25lbnRcbiAgICAgICAgICB1c2VEYXRhU291cmNlPXt1c2VEYXRhU291cmNlfVxuICAgICAgICAgIG9uRGF0YVNvdXJjZUNyZWF0ZWQ9e3RoaXMub25EYXRhU291cmNlQ3JlYXRlZH0gb25DcmVhdGVEYXRhU291cmNlRmFpbGVkPXt0aGlzLm9uQ3JlYXRlRGF0YVNvdXJjZUZhaWxlZH1cbiAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+fVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuX191bm1vdW50ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLndpZGdldENvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3aWRnZXQtbWFwJykubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoIXRoaXMubWFwQ29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMubWFwQ29udGFpbmVyID0gZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgdGhpcy5tYXBDb250YWluZXIuY2xhc3NOYW1lID0gJ3ctMTAwIGgtMTAwIHdpZGdldC1tYXAgbWFwdmlldy1jb250YWluZXInXG4gICAgICB9XG5cbiAgICAgIHRoaXMud2lkZ2V0Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubWFwQ29udGFpbmVyKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLnN0YXJ0TG9hZE1vZHVsZXMpIHtcbiAgICAgIHRoaXMubG9hZENvbW1vbk1vZHVsZXMoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJlc3RvcmVkKSB7XG4gICAgICBjb25zdCBqaW11TWFwVmlldyA9IHRoaXMuZ2V0SmltdU1hcFZpZXdGb1ZpZXcodGhpcy52aWV3KVxuXG4gICAgICBpZiAoamltdU1hcFZpZXcgJiYgIWppbXVNYXBWaWV3LmlzQ2FjaGVkKCkpIHtcbiAgICAgICAgamltdU1hcFZpZXcub25SZXN0b3JlKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICAvLyB1cGRhdGUgdGhlIHRoaXMuZXhwZWN0ZWREYXRhU291cmNlSW5mbyBieSB0aGUgY3VycmVudCBwcm9wc1xuICAgIHRoaXMudXBkYXRlRXhwZWN0ZWREYXRhU291cmNlSW5mbygpXG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuaXNCYXNpY01vZHVsZXNMb2FkZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBjaGVjayBpc01hcEluVmlzaWJsZUFyZWEgYmVmb3JlIHRoaXMuY2hlY2tBbmRIYW5kbGVJZkRhdGFTb3VyY2VJZFByb3BDaGFuZ2UoKSA/XG4gICAgLy8gcHJvcHMuaXNNYXBJblZpc2libGVBcmVhIGNoYW5nZWRcbiAgICBpZiAodGhpcy52aWV3ICYmIHByZXZQcm9wcy5pc01hcEluVmlzaWJsZUFyZWEgIT09IHRoaXMucHJvcHMuaXNNYXBJblZpc2libGVBcmVhICYmICh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcyAmJiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcy5sZW5ndGggPT09IDIpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc01hcEluVmlzaWJsZUFyZWEpIHtcbiAgICAgICAgdGhpcy52aWV3LmlzSW5DYWNoaW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy50cnlGYXRhbEVycm9yUmVjb3ZlcnkodGhpcy52aWV3KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWV3LmlzSW5DYWNoaW5nID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBtYWlubHkgdXNlZCB0byBjaGVjayBhbmQgaGFuZGxlIGlmIGRhdGFTb3VyY2VJZCBwcm9wIGNoYW5nZVxuICAgIGxldCBuZWVkQ3JlYXRlTmV3VmlldyA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAvLyB0aGlzLnZpZXcgY3JlYXRlZCwgbm93IG5lZWQgdG8gY2hlY2sgaWYgdGhpcy52aWV3IG1hdGNoIHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkIG9yIG5vdFxuICAgICAgaWYgKHRoaXMuaXNWaWV3RXhwZWN0ZWQodGhpcy52aWV3KSkge1xuICAgICAgICAvLyBkYXRhIHNvdXJjZSBtYXRjaCB0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgZG8gbm90aGluZ1xuICAgICAgICBuZWVkQ3JlYXRlTmV3VmlldyA9IGZhbHNlXG4gICAgICAgIC8vIHRoaXMudmlldyBpcyB0aGUgZXhwZWN0ZWQgdmlld1xuICAgICAgICAvLyBXZSBjYWxsIHRoaXMudHJ5VXBkYXRlQ3VycmVudFZpZXdCeUNvbmZpZ1Byb3BzKCkgdG8gY29uc3VtZSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5jb25maWcgY2hhbmdlXG4gICAgICAgIHRoaXMudHJ5VXBkYXRlQ3VycmVudFZpZXdCeUNvbmZpZ1Byb3BzKGZhbHNlKVxuICAgICAgICAvLyBXZSBjYWxsIHRoaXMuY2hlY2tBbmRIYW5kbGVNdXRhYmxlU3RhdGVQcm9wcygpIHRvIGNvbnN1bWUgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMubXV0YWJsZVN0YXRlUHJvcHMgY2hhbmdlXG4gICAgICAgIHRoaXMuY2hlY2tBbmRIYW5kbGVNdXRhYmxlU3RhdGVQcm9wcygpXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGF0YSBzb3VyY2UgY2hhbmdlZCwgd2UgbmVlZCB0byBkZXN0cm95IHRoaXMudmlld1xuICAgICAgICBuZWVkQ3JlYXRlTmV3VmlldyA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhpcy52aWV3IG5vdCBjcmVhdGVkLCB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGFyZSBjcmVhdGluZyB0aGUgZXhwZWN0ZWQgdmlld1xuICAgICAgaWYgKHRoaXMuaXNDcmVhdGluZ0V4cGVjdGVkVmlldygpKSB7XG4gICAgICAgIC8vIFdlIGFyZSBjcmVhdGluZyB0aGUgZXhwZWN0ZWQgdmlldywgZG8gbm90aGluZ1xuICAgICAgICBuZWVkQ3JlYXRlTmV3VmlldyA9IGZhbHNlXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmVlZCB0byBjcmVhdGUgbmV3IHZpZXdcbiAgICAgICAgbmVlZENyZWF0ZU5ld1ZpZXcgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5lZWRDcmVhdGVOZXdWaWV3KSB7XG4gICAgICB0aGlzLmRlc3Ryb3lDdXJyZW50TWFwYmFzZVZpZXcoKVxuICAgICAgdGhpcy5jYWNoZUxvYWRNb2R1bGVzQW5kQ3JlYXRlTWFwYmFzZVZpZXcodGhpcy5leHBlY3RlZERhdGFTb3VyY2VJbmZvKVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICB0aGlzLl9fdW5tb3VudCA9IHRydWVcblxuICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgIHRoaXMudmlldy5tYXBiYXNlID0gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldHMgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnLndpZGdldHNcblxuICAgIGlmICh3aWRnZXRzW3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXSAmJiB3aWRnZXRzW3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXS51c2VEYXRhU291cmNlcyA9PT0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXMgJiZcbiAgICAgIHRoaXMuc3RhdGUubWFwTG9hZFN0YXR1cyAhPT0gTWFwTG9hZFN0YXR1cy5Mb2FkaW5nKSB7XG4gICAgICAvLyBKUyBBUEkgbGltaXRzIG9ubHkgMTYgY2FudmFzIHdpdGggV2ViR0wgY29udGV4dCBvbiBhIGh0bWwgcGFnZS4gQ2FjaGluZyB0aGUgbWFwIHdpZGdldCAodW5tb3VudCB0aGUgY2FudmFzIGZyb20gdGhlIGh0bWwgdHJlZSBidXQgZG9uJ3QgZGVzdHJveSB0aGUgdmlldykgaXMgYSB3b3Jrcm91bmQuXG4gICAgICAvLyBXZSBzY3JvbGwgdGhlIHBhZ2UgYW5kIHRoZSBtYXAgd2lkZ2V0IGlzIG5vdCBpbiB0aGUgdmlzaWJsZSBhcmVhLCB3ZSBuZWVkIHRvIGNhY2hlIGl0IHNvIHdlIGNhbiByZXN0b3JlIGl0IHF1aWNrbHkuXG4gICAgICAvLyBXZSBkb24ndCBkZXN0cm95IHRoZSBtYXAgdmlldyBoZXJlLCBqdXN0IGNhY2hlIGl0IHRvIG11dGFibGUgc3RvcmUuXG4gICAgICBjb25zdCByZXN0b3JlRGF0YSA9IGdldE1hcEJhc2VSZXN0b3JlRGF0YSh0aGlzKVxuXG4gICAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAgIHRoaXMudmlldy5pc0luQ2FjaGluZyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVSZXN0b3JlRGF0YVRvTVMocmVzdG9yZURhdGEpXG5cbiAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgY29uc3QgamltdU1hcFZpZXcgPSB0aGlzLmdldEppbXVNYXBWaWV3Rm9WaWV3KHRoaXMudmlldylcblxuICAgICAgICBpZiAoamltdU1hcFZpZXcpIHtcbiAgICAgICAgICBqaW11TWFwVmlldy5vbkNhY2hlKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBEZXN0cm95IHRoZSBtYXAgdmlld1xuICAgICAgdGhpcy5kZXN0cm95Q3VycmVudE1hcGJhc2VWaWV3KClcbiAgICAgIHRoaXMubWFwQ3JlYXRpbmdJbmZvID0gbnVsbFxuXG4gICAgICBpZiAodGhpcy52aWV3ICYmICF0aGlzLnZpZXcuZGVzdHJveWVkKSB7XG4gICAgICAgIHRoaXMudmlldy5jb250YWluZXIgPSBudWxsXG4gICAgICAgIHRoaXMudmlldyA9IG51bGxcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXBEcyA9IG51bGxcbiAgICB9XG4gIH1cblxuICBjcmVhdGVEYXRhU291cmNlSW5mbyAoZGF0YVNvdXJjZUlkOiBzdHJpbmcpOiBNYXBiYXNlRGF0YVNvdXJjZUluZm8ge1xuICAgIGxldCByZXN1bHQ6IE1hcGJhc2VEYXRhU291cmNlSW5mbyA9IG51bGxcblxuICAgIGNvbnN0IGRhdGFTb3VyY2VKc29uID0gdGhpcy5nZXREc0pzb25Gcm9tRHNJZChkYXRhU291cmNlSWQpXG5cbiAgICBpZiAoZGF0YVNvdXJjZUpzb24gJiYgZGF0YVNvdXJjZUpzb24uaWQpIHtcbiAgICAgIC8vIGRhdGEgc291cmNlIGNhc2UyIG9yIGRhdGEgc291cmNlIGNhc2UzXG4gICAgICBjb25zdCB0eXBlID0gZGF0YVNvdXJjZUpzb24udHlwZSB8fCAnJ1xuICAgICAgY29uc3QgaXRlbUlkID0gZGF0YVNvdXJjZUpzb24uaXRlbUlkIHx8ICcnXG4gICAgICBjb25zdCBkYXRhU291cmNlSWQgPSBkYXRhU291cmNlSnNvbi5pZFxuICAgICAgY29uc3QgamltdU1hcFZpZXdJZCA9IHRoaXMuZ2V0SmltdU1hcFZpZXdJZChkYXRhU291cmNlSWQpXG5cbiAgICAgIGlmICh0eXBlID09PSBEYXRhU291cmNlVHlwZXMuV2ViU2NlbmUpIHtcbiAgICAgICAgLy8gdXNlciBzZWxlY3QgYSB3ZWIgc2NlbmVcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIGlzRGVmYXVsdE1hcDogZmFsc2UsXG4gICAgICAgICAgaXNXZWJNYXA6IGZhbHNlLFxuICAgICAgICAgIHVuaXF1ZUlkOiBgd2Vic2NlbmUtJHtkYXRhU291cmNlSWR9LSR7aXRlbUlkfWAsXG4gICAgICAgICAgZGF0YVNvdXJjZUlkLFxuICAgICAgICAgIGppbXVNYXBWaWV3SWQsXG4gICAgICAgICAgZGF0YVNvdXJjZUpzb25cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlciBzZWxlY3QgYSB3ZWIgbWFwXG4gICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICBpc0RlZmF1bHRNYXA6IGZhbHNlLFxuICAgICAgICAgIGlzV2ViTWFwOiB0cnVlLFxuICAgICAgICAgIHVuaXF1ZUlkOiBgd2VibWFwLSR7ZGF0YVNvdXJjZUlkfS0ke2l0ZW1JZH1gLFxuICAgICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgICBqaW11TWFwVmlld0lkLFxuICAgICAgICAgIGRhdGFTb3VyY2VKc29uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZGF0YSBzb3VyY2UgY2FzZTE6IHVzZSBkZWZhdWx0IHdlYiBtYXBcbiAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZCA9ICcnXG4gICAgICAvLyBUT0RPOiBjb3VsZCB3ZSB1c2UgdGhpcy5nZXRKaW11TWFwVmlld0lkKCdkZWZhdWx0bWFwJykgaGVyZSA/XG4gICAgICBjb25zdCBqaW11TWFwVmlld0lkID0gdGhpcy5nZXRKaW11TWFwVmlld0lkKGRhdGFTb3VyY2VJZClcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgaXNEZWZhdWx0TWFwOiB0cnVlLFxuICAgICAgICBpc1dlYk1hcDogdHJ1ZSxcbiAgICAgICAgdW5pcXVlSWQ6ICd3ZWJtYXAtZGVmYXVsdCcsXG4gICAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgICAgamltdU1hcFZpZXdJZCxcbiAgICAgICAgZGF0YVNvdXJjZUpzb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBnZXRKaW11TWFwVmlld0lkIChkYXRhU291cmNlSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldEppbXVNYXBWaWV3SWQodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQsIGRhdGFTb3VyY2VJZClcbiAgfVxuXG4gIGdldERzSnNvbkZyb21Ec0lkIChkYXRhU291cmNlSWQ6IHN0cmluZyk6IEltbXV0YWJsZU9iamVjdDxEYXRhU291cmNlSnNvbj4ge1xuICAgIGxldCByZXN1bHQ6IEltbXV0YWJsZU9iamVjdDxEYXRhU291cmNlSnNvbj4gPSBudWxsXG5cbiAgICBpZiAoZGF0YVNvdXJjZUlkKSB7XG4gICAgICByZXN1bHQgPSBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkuYXBwQ29uZmlnLmRhdGFTb3VyY2VzW2RhdGFTb3VyY2VJZF1cbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0ge30gYXMgSW1tdXRhYmxlT2JqZWN0PERhdGFTb3VyY2VKc29uPlxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGdldEN1cnJlbnREYXRhU291cmNlSnNvbiAoKTogSW1tdXRhYmxlT2JqZWN0PERhdGFTb3VyY2VKc29uPiB7XG4gICAgLy8gd2hlbiBzZWxlY3QgYSB3ZWIgbWFwIG9yIHdlYiBzY2VuZSBpbiBidWlsZGVyLCB0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCBpcyBub3QgbnVsbCwgdGhlIHJlc3VsdCBpcyBsaWtlIHRoaXNcbiAgICAvLyB7XG4gICAgLy8gICBpZDogXCJkYXRhU291cmNlXzVcIixcbiAgICAvLyAgIHR5cGU6IFwiV0VCX01BUFwiLFxuICAgIC8vICAgc291cmNlTGFiZWw6IFwiQ2hpbmEgVmVyc2lvbiAxXzJcIixcbiAgICAvLyAgIGl0ZW1JZDogXCJhMmM1NDQ5YzRjNjI0NDQ3YmY0NWQ0ODQ3OGIyNTgzOFwiLFxuICAgIC8vICAgcG9ydGFsVXJsOiBcImh0dHBzOi8vZXNyaWRldmJlaWppbmcubWFwcy5hcmNnaXMuY29tXCIsXG4gICAgLy8gfVxuXG4gICAgLy8gd2hlbiB1c2UgdGhlIGRlZmF1bHQgd2ViIG1hcCBpbiBidWlsZGVyLCB0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCBpcyBudWxsLCB0aGUgcmVzdWx0IGlzIGVtcHR5IG9iamVjdCB7fVxuICAgIHJldHVybiB0aGlzLmdldERzSnNvbkZyb21Ec0lkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkKVxuICB9XG5cbiAgdXBkYXRlRXhwZWN0ZWREYXRhU291cmNlSW5mbyAoKSB7XG4gICAgdGhpcy5leHBlY3RlZERhdGFTb3VyY2VJbmZvID0gdGhpcy5jcmVhdGVEYXRhU291cmNlSW5mbyh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZClcbiAgfVxuXG4gIGlzQ3VycmVudFZpZXdFeHBlY3RlZCAoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNWaWV3RXhwZWN0ZWQodGhpcy52aWV3KVxuICB9XG5cbiAgaXNWaWV3RXhwZWN0ZWQgKHZpZXc6IE1hcGJhc2VWaWV3KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZpZXcgJiYgdmlldy5kYXRhU291cmNlSW5mby51bmlxdWVJZCA9PT0gdGhpcy5leHBlY3RlZERhdGFTb3VyY2VJbmZvLnVuaXF1ZUlkXG4gIH1cblxuICBpc0NyZWF0aW5nRXhwZWN0ZWRWaWV3ICgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tYXBDcmVhdGluZ0luZm8gJiYgdGhpcy5pc0RhdGFTb3VyY2VJbmZvRXhwZWN0ZWQodGhpcy5tYXBDcmVhdGluZ0luZm8uZGF0YVNvdXJjZUluZm8pXG4gIH1cblxuICBpc0RhdGFTb3VyY2VJbmZvRXhwZWN0ZWQgKGRhdGFTb3VyY2VJbmZvOiBNYXBiYXNlRGF0YVNvdXJjZUluZm8pOiBib29sZWFuIHtcbiAgICByZXR1cm4gZGF0YVNvdXJjZUluZm8gJiYgZGF0YVNvdXJjZUluZm8udW5pcXVlSWQgPT09IHRoaXMuZXhwZWN0ZWREYXRhU291cmNlSW5mby51bmlxdWVJZFxuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWUgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnIGNoYW5nZVxuICAgKiBAcGFyYW0gY2FsbGVkV2hlblZpZXdDcmVhdGUgdHJ1ZSBtZWFucyB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgd2hlbiB2aWV3IGp1c3QgY3JlYXRlZCwgZmFsc2UgbWVhbnMgdGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gY29uZmlnIHByb3BzIGNoYW5nZVxuICAgKi9cbiAgdHJ5VXBkYXRlQ3VycmVudFZpZXdCeUNvbmZpZ1Byb3BzIChjYWxsZWRXaGVuVmlld0NyZWF0ZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghdGhpcy52aWV3KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjb25maWc6IElNQ29uZmlnID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnXG4gICAgY29uc3QgcHJlQ29uZmlnOiBJTUNvbmZpZyA9IHRoaXMubGFzdFVwZGF0ZVZpZXdDb25maWdcbiAgICB0aGlzLmxhc3RVcGRhdGVWaWV3Q29uZmlnID0gY29uZmlnXG5cbiAgICAvLyB1cGRhdGUgcG9wdXAgb3B0aW9uc1xuICAgIGNvbnN0IGN1cnJQb3B1cEVuYWJsZWQgPSAhY29uZmlnLmRpc2FibGVQb3BVcFxuXG4gICAgaWYgKGNhbGxlZFdoZW5WaWV3Q3JlYXRlKSB7XG4gICAgICAvLyBjYWxsZWRXaGVuVmlld0NyZWF0ZSBpcyB0cnVlLCBtZWFucyB0cnlVcGRhdGVDdXJyZW50Vmlld0J5Q29uZmlnUHJvcHMgaXMgY2FsbGVkIHdoZW4gdmlldyBqdXN0IGNyZWF0ZWQsIHdlIGp1c3Qgc2V0IHZpZXcucG9wdXBFbmFibGVkIHRvICFjb25maWcuZGlzYWJsZVBvcFVwLlxuICAgICAgdGhpcy52aWV3LnBvcHVwRW5hYmxlZCA9IGN1cnJQb3B1cEVuYWJsZWRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2FsbGVkV2hlblZpZXdDcmVhdGUgaXMgZmFsc2UsIG1lYW5zIHRyeVVwZGF0ZUN1cnJlbnRWaWV3QnlDb25maWdQcm9wcyBpcyBjYWxsZWQgd2hlbiBjb25maWcgcHJvcHMgY2hhbmdlLCB3ZSBuZWVkIHRvIGhhbmRsZSBjb25maWcuZGlzYWJsZVBvcFVwIGNoYW5nZS5cblxuICAgICAgY29uc3QgcHJlUG9wdXBFbmFibGVkID0gIXByZUNvbmZpZz8uZGlzYWJsZVBvcFVwXG4gICAgICBjb25zdCBwb3B1cEVuYWJsZWQgPSAhY29uZmlnLmRpc2FibGVQb3BVcFxuXG4gICAgICAvLyBCb3RoIE1hcCB3aWRnZXQgJ2Rpc2FibGVQb3BVcCcgb3B0aW9uIGFuZCBKaW11TWFwVmlldy5lbmFibGVDbGlja09wZW5Qb3B1cCgpIGNhbiBjb250cm9sICd2aWV3LnBvcHVwRW5hYmxlZCcuXG4gICAgICAvLyBXZSBzaG91bGQgbm90IHVzZSBgdGhpcy52aWV3LnBvcHVwRW5hYmxlZCAhPT0gY3VyclBvcHVwRW5hYmxlZGAgaGVyZSBiZWNhdXNlIHdlIG9ubHkgd2FudCB0byBjaGVjayBpZiBNYXAgd2lkZ2V0ICdkaXNhYmxlUG9wVXAnIG9wdGlvbiBjaGFuZ2VkLFxuICAgICAgLy8gc28gd2Ugc2hvdWxkIHVzZSBgcHJlUG9wdXBFbmFibGVkICE9PSBjdXJyUG9wdXBFbmFibGVkYCBoZXJlLlxuICAgICAgaWYgKHByZVBvcHVwRW5hYmxlZCAhPT0gcG9wdXBFbmFibGVkKSB7XG4gICAgICAgIC8vIGNvbmZpZy5kaXNhYmxlUG9wVXAgcmVhbGx5IGNoYW5nZWRcbiAgICAgICAgdGhpcy52aWV3LnBvcHVwRW5hYmxlZCA9IHBvcHVwRW5hYmxlZFxuXG4gICAgICAgIGlmICghcG9wdXBFbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy52aWV3LmNsb3NlUG9wdXAoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKChjb25maWcuc2VsZWN0aW9uSGlnaGxpZ2h0Q29sb3IgIT09IHByZUNvbmZpZz8uc2VsZWN0aW9uSGlnaGxpZ2h0Q29sb3IpIHx8IChjb25maWcuc2VsZWN0aW9uSGlnaGxpZ2h0SGFsb0NvbG9yICE9PSBwcmVDb25maWc/LnNlbGVjdGlvbkhpZ2hsaWdodEhhbG9Db2xvcikpIHtcbiAgICAgIC8vIGhpZ2hsaWdodCBpbmZvIGNoYW5nZXNcbiAgICAgIGNvbnN0IGhpZ2hsaWdodENvbG9yID0gY29uZmlnLnNlbGVjdGlvbkhpZ2hsaWdodENvbG9yIHx8IERFRkFVTFRfSElHSExJR0hUX0NPTE9SXG4gICAgICBjb25zdCBoaWdobGlnaHRIYWxvQ29sb3IgPSBjb25maWcuc2VsZWN0aW9uSGlnaGxpZ2h0SGFsb0NvbG9yIHx8IERFRkFVTFRfSElHSExJR0hUX0hBTE9fQ09MT1JcbiAgICAgIGNvbnN0IGhpZ2hsaWdodE9wdGlvbnMgPSB7XG4gICAgICAgIC4uLnRoaXMudmlldy5oaWdobGlnaHRPcHRpb25zLFxuICAgICAgICBjb2xvcjogbmV3IHRoaXMuQ29sb3IoaGlnaGxpZ2h0Q29sb3IpLFxuICAgICAgICBoYWxvQ29sb3I6IG5ldyB0aGlzLkNvbG9yKGhpZ2hsaWdodEhhbG9Db2xvcilcbiAgICAgIH1cbiAgICAgIHRoaXMudmlldy5oaWdobGlnaHRPcHRpb25zID0gaGlnaGxpZ2h0T3B0aW9uc1xuICAgIH1cblxuICAgIGNvbnN0IGVuYWJsZVNjcm9sbCA9ICFjb25maWcuZGlzYWJsZVNjcm9sbFxuXG4gICAgLy8gdGhpcy52aWV3Lm5hdmlnYXRpb24gaXMgZW1wdHkgc29tZXRpbWVzLCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGl0IGhlcmUuXG4gICAgaWYgKHRoaXMudmlldy5uYXZpZ2F0aW9uKSB7XG4gICAgICBpZiAodGhpcy52aWV3Lm5hdmlnYXRpb24ubW91c2VXaGVlbFpvb21FbmFibGVkICE9PSBlbmFibGVTY3JvbGwpIHtcbiAgICAgICAgdGhpcy52aWV3Lm5hdmlnYXRpb24ubW91c2VXaGVlbFpvb21FbmFibGVkID0gZW5hYmxlU2Nyb2xsXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnZpZXcubmF2aWdhdGlvbi5icm93c2VyVG91Y2hQYW5FbmFibGVkICE9PSBlbmFibGVTY3JvbGwpIHtcbiAgICAgICAgdGhpcy52aWV3Lm5hdmlnYXRpb24uYnJvd3NlclRvdWNoUGFuRW5hYmxlZCA9IGVuYWJsZVNjcm9sbFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnZpZXcudWkpIHtcbiAgICAgIHRoaXMudmlldy51aS5jb21wb25lbnRzID0gW11cbiAgICB9XG5cbiAgICBjb25zdCBzY2VuZVF1YWxpdHlNb2RlID0gY29uZmlnLnNjZW5lUXVhbGl0eU1vZGVcblxuICAgIGlmICh0aGlzLmlzU2NlbmVWaWV3KHRoaXMudmlldykpIHtcbiAgICAgIGNvbnN0IHNjZW5lVmlldyA9IHRoaXMudmlldyBhcyBfX2VzcmkuU2NlbmVWaWV3XG5cbiAgICAgIGlmIChzY2VuZVF1YWxpdHlNb2RlICYmIHNjZW5lUXVhbGl0eU1vZGUgIT09IHNjZW5lVmlldy5xdWFsaXR5UHJvZmlsZSkge1xuICAgICAgICBzY2VuZVZpZXcucXVhbGl0eVByb2ZpbGUgPSBzY2VuZVF1YWxpdHlNb2RlIGFzICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5tdXRhYmxlU3RhdGVQcm9wcyBjaGFuZ2VcbiAgICovXG4gIGNoZWNrQW5kSGFuZGxlTXV0YWJsZVN0YXRlUHJvcHMgKCkge1xuICAgIGlmICh0aGlzLnZpZXcgJiYgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMubXV0YWJsZVN0YXRlUHJvcHMpIHtcbiAgICAgIGNvbnN0IGppbXVNYXBWaWV3SWQgPSB0aGlzLnZpZXcuZGF0YVNvdXJjZUluZm8uamltdU1hcFZpZXdJZFxuICAgICAgY29uc3QgamltdU1hcFZpZXcgPSBNYXBWaWV3TWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEppbXVNYXBWaWV3QnlJZChqaW11TWFwVmlld0lkKVxuXG4gICAgICBpZiAoamltdU1hcFZpZXcpIHtcbiAgICAgICAgamltdU1hcFZpZXcud2hlbkppbXVNYXBWaWV3TG9hZGVkKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGNoZWNrIHRoaXMudmlldyBpZiBudWxsIG9yIGRlc3Ryb3llZCBoZXJlLCB3ZSBkbyBpdCBpbiB0aGlzLmhhbmRsZUFjdGlvbigpXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUFjdGlvbih0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5tdXRhYmxlU3RhdGVQcm9wcywgdGhpcy52aWV3LCBqaW11TWFwVmlldylcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdFJlY2VpdmVNZXNzYWdlID0gZmFsc2VcbiAgICAgICAgICB9LCB0aGlzLmlzRmlyc3RSZWNlaXZlTWVzc2FnZSA/IDUwMCA6IDApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNNYXBWaWV3ICh2aWV3OiBNYXBiYXNlVmlldyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2aWV3ICYmIHZpZXcuZGVjbGFyZWRDbGFzcyA9PT0gJ2Vzcmkudmlld3MuTWFwVmlldydcbiAgfVxuXG4gIGlzU2NlbmVWaWV3ICh2aWV3OiBNYXBiYXNlVmlldyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2aWV3ICYmIHZpZXcuZGVjbGFyZWRDbGFzcyA9PT0gJ2Vzcmkudmlld3MuU2NlbmVWaWV3J1xuICB9XG5cbiAgZGlmZlByb3BzIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgYWRkZWRLZXlzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgcmVtb3ZlS2V5czogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHVwZGF0ZWRLZXlzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBjb25zdCBjdXJyS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucHJvcHMpXG4gICAgY29uc3QgcHJldktleXMgPSBPYmplY3Qua2V5cyhwcmV2UHJvcHMpXG5cbiAgICBjb25zdCBwcmV2S2V5c01hcDogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7fVxuICAgIHByZXZLZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIHByZXZLZXlzTWFwW2tleV0gPSB0cnVlXG4gICAgfSlcblxuICAgIGNvbnN0IGN1cnJLZXlzTWFwOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9XG4gICAgY3VycktleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY3VycktleXNNYXBba2V5XSA9IHRydWVcbiAgICB9KVxuXG4gICAgY3VycktleXMuZm9yRWFjaChjdXJyS2V5ID0+IHtcbiAgICAgIGlmIChwcmV2S2V5c01hcFtjdXJyS2V5XSkge1xuICAgICAgICBpZiAocHJldlByb3BzW2N1cnJLZXldICE9PSB0aGlzLnByb3BzW2N1cnJLZXldKSB7XG4gICAgICAgICAgdXBkYXRlZEtleXMucHVzaChjdXJyS2V5KVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRlZEtleXMucHVzaChjdXJyS2V5KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBwcmV2S2V5cy5mb3JFYWNoKHByZXZLZXkgPT4ge1xuICAgICAgaWYgKCFjdXJyS2V5c01hcFtwcmV2S2V5XSkge1xuICAgICAgICByZW1vdmVLZXlzLnB1c2gocHJldktleSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFkZGVkS2V5cyxcbiAgICAgIHJlbW92ZUtleXMsXG4gICAgICB1cGRhdGVkS2V5c1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRDb21tb25Nb2R1bGVzICgpIHtcbiAgICBjb25zdCBtb2R1bGVzID0gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAnZXNyaS9nZW9tZXRyeS9FeHRlbnQnLFxuICAgICAgJ2VzcmkvVmlld3BvaW50JyxcbiAgICAgICdlc3JpL3BvcnRhbC9Qb3J0YWwnLFxuICAgICAgJ2VzcmkvcG9ydGFsL1BvcnRhbEl0ZW0nLFxuICAgICAgJ2VzcmkvQ29sb3InXG4gICAgXSk7XG5cbiAgICBbXG4gICAgICB0aGlzLkV4dGVudCwgdGhpcy5WaWV3cG9pbnQsIHRoaXMuUG9ydGFsLCB0aGlzLlBvcnRhbEl0ZW0sIHRoaXMuQ29sb3JcbiAgICBdID0gbW9kdWxlc1xuXG4gICAgaWYgKHRoaXMuX191bm1vdW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzQmFzaWNNb2R1bGVzTG9hZGVkOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNhY2hlTG9hZE1vZHVsZXNBbmRDcmVhdGVNYXBiYXNlVmlldyAoZGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mbyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLl9fdW5tb3VudCB8fCB0aGlzLmlzQ3VycmVudFZpZXdFeHBlY3RlZCgpIHx8IHRoaXMuaXNDcmVhdGluZ0V4cGVjdGVkVmlldygpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1hcExvYWRTdGF0dXM6IE1hcExvYWRTdGF0dXMuTG9hZGluZ1xuICAgIH0pXG5cbiAgICBjb25zdCBtYXBDcmVhdGluZ0luZm86IE1hcENyZWF0aW5nSW5mbyA9IHtcbiAgICAgIGRhdGFTb3VyY2VJbmZvXG4gICAgfVxuXG4gICAgdGhpcy5tYXBDcmVhdGluZ0luZm8gPSBtYXBDcmVhdGluZ0luZm9cblxuICAgIHRyeSB7XG4gICAgICBpZiAoZGF0YVNvdXJjZUluZm8uaXNXZWJNYXApIHtcbiAgICAgICAgLy8gbG9hZCBtb2R1bGVzIHRvIGNyZWF0ZSBNYXBWaWV3XG4gICAgICAgIGlmICghdGhpcy5NYXBWaWV3KSB7XG4gICAgICAgICAgY29uc3QgbW9kdWxlcyA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAgICAgJ2VzcmkvZ2VvbWV0cnkvR2VvbWV0cnknLFxuICAgICAgICAgICAgJ2Vzcmkvd2VibWFwL0luaXRpYWxWaWV3UHJvcGVydGllcycsXG4gICAgICAgICAgICAnZXNyaS9CYXNlbWFwJyxcbiAgICAgICAgICAgICdlc3JpL2xheWVycy9UaWxlTGF5ZXInLFxuICAgICAgICAgICAgJ2Vzcmkvdmlld3MvTWFwVmlldycsXG4gICAgICAgICAgICAnZXNyaS9XZWJNYXAnXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBbXG4gICAgICAgICAgICB0aGlzLkdlb21ldHJ5LCB0aGlzLkluaXRpYWxWaWV3UHJvcGVydGllcywgdGhpcy5CYXNlbWFwLCB0aGlzLlRpbGVMYXllciwgdGhpcy5NYXBWaWV3LCB0aGlzLldlYk1hcFxuICAgICAgICAgIF0gPSBtb2R1bGVzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGxvYWQgbW9kdWxlcyBmb3IgY3JlYXRlIFNjZW5lVmlld1xuICAgICAgICBpZiAoIXRoaXMuU2NlbmVWaWV3KSB7XG4gICAgICAgICAgY29uc3QgbW9kdWxlcyA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAgICAgJ2Vzcmkvdmlld3MvU2NlbmVWaWV3JyxcbiAgICAgICAgICAgICdlc3JpL1dlYlNjZW5lJ1xuICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgW1xuICAgICAgICAgICAgdGhpcy5TY2VuZVZpZXcsIHRoaXMuV2ViU2NlbmVcbiAgICAgICAgICBdID0gbW9kdWxlc1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9fdW5tb3VudCB8fCB0aGlzLmlzQ3VycmVudFZpZXdFeHBlY3RlZCgpIHx8ICF0aGlzLmlzRGF0YVNvdXJjZUluZm9FeHBlY3RlZChtYXBDcmVhdGluZ0luZm8uZGF0YVNvdXJjZUluZm8pKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1hcGJhc2VWaWV3KG1hcENyZWF0aW5nSW5mbylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdjYWNoZUxvYWRNb2R1bGVzQW5kQ3JlYXRlTWFwYmFzZVZpZXcgZXJyb3InLCBlKVxuXG4gICAgICBpZiAodGhpcy5tYXBDcmVhdGluZ0luZm8gPT09IG1hcENyZWF0aW5nSW5mbykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBtYXBMb2FkU3RhdHVzOiBNYXBMb2FkU3RhdHVzLkxvYWRFcnJvclxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1hcENyZWF0aW5nSW5mbyA9PT0gbWFwQ3JlYXRpbmdJbmZvKSB7XG4gICAgICB0aGlzLm1hcENyZWF0aW5nSW5mbyA9IG51bGxcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVNYXBiYXNlVmlldyAobWFwQ3JlYXRpbmdJbmZvOiBNYXBDcmVhdGluZ0luZm8pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBkYXRhU291cmNlSW5mbyA9IG1hcENyZWF0aW5nSW5mby5kYXRhU291cmNlSW5mb1xuXG4gICAgaWYgKHRoaXMuX191bm1vdW50IHx8IHRoaXMuaXNDdXJyZW50Vmlld0V4cGVjdGVkKCkgfHwgIXRoaXMuaXNEYXRhU291cmNlSW5mb0V4cGVjdGVkKGRhdGFTb3VyY2VJbmZvKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gZ2V0IG1hcFZpZXdPcHRpb24gb3Igc2NlbmVWaWV3T3B0aW9uXG4gICAgbGV0IG1hcFZpZXdPcHRpb246IF9fZXNyaS5NYXBWaWV3UHJvcGVydGllcyA9IG51bGxcbiAgICBsZXQgc2NlbmVWaWV3T3B0aW9uOiBfX2VzcmkuU2NlbmVWaWV3UHJvcGVydGllcyA9IG51bGxcblxuICAgIGlmIChkYXRhU291cmNlSW5mby5pc1dlYk1hcCkge1xuICAgICAgLy8gZ2V0IG1hcCB2aWV3IG9wdGlvblxuICAgICAgbWFwVmlld09wdGlvbiA9IGF3YWl0IHRoaXMuZ2V0TWFwVmlld09wdGlvblRvQ3JlYXRlTWFwVmlldyhkYXRhU291cmNlSW5mbylcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZ2V0IHNjZW5lIHZpZXcgb3B0aW9uXG4gICAgICBzY2VuZVZpZXdPcHRpb24gPSBhd2FpdCB0aGlzLmdldFNjZW5lVmlld09wdGlvblRvQ3JlYXRlU2NlbmVWaWV3KGRhdGFTb3VyY2VJbmZvKVxuICAgIH1cblxuICAgIC8vIG5lZWQgdG8gY2hlY2sgdmlldyBhZ2FpbiB0byBhdm9pZCBuZXcgTWFwVmlldygpIHR3aWNlLCBiZWNhdXNlIHdlIHVzZSBhc3luYyBmdW5jdGlvbiB0byBnZXQgbWFwVmlld09wdGlvblxuICAgIGlmICh0aGlzLl9fdW5tb3VudCB8fCB0aGlzLmlzQ3VycmVudFZpZXdFeHBlY3RlZCgpIHx8ICF0aGlzLmlzRGF0YVNvdXJjZUluZm9FeHBlY3RlZChkYXRhU291cmNlSW5mbykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGxldCBpbml0VXJsSGFzaFZpZXdwb2ludDogX19lc3JpLlZpZXdwb2ludCA9IG51bGxcblxuICAgIGlmICh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pc1J1bkFwcE1vZGUpIHtcbiAgICAgIGNvbnN0IGhhc2hWaWV3cG9pbnQgPSB0aGlzLmdlbmVyYXRlVmlld3BvaW50QnlVcmxIYXNoUGFyYW1zKGRhdGFTb3VyY2VJbmZvLmlzV2ViTWFwKVxuXG4gICAgICBpZiAoaGFzaFZpZXdwb2ludCkge1xuICAgICAgICBpbml0VXJsSGFzaFZpZXdwb2ludCA9IGhhc2hWaWV3cG9pbnQuY2xvbmUoKVxuXG4gICAgICAgIGlmIChtYXBWaWV3T3B0aW9uKSB7XG4gICAgICAgICAgbWFwVmlld09wdGlvbi52aWV3cG9pbnQgPSBoYXNoVmlld3BvaW50XG4gICAgICAgICAgLy8gTm90ZSwgd2UgbXVzdCBzZXQgc25hcFRvWm9vbSB0byBmYWxzZSBpZiB3ZSBjYW4gZ2V0IGhhc2hWaWV3cG9pbnQsIG90aGVyd2lzZSB0aGUgZmluYWwgdmlldy5zY2FsZSBpcyBkaWZmZXJlbnQgd2l0aCBoYXNoVmlld3BvaW50LnNjYWxlLFxuICAgICAgICAgIC8vIGJlY2F1c2UgaGFzaFZpZXdwb2ludC5zY2FsZSBjb21lcyBmcm9tIGEgZmxvYXQtem9vbSBtYXAgYW5kIHZpZXcuc2NhbGUgY29tZXMgZnJvbSBhIGludC16b29tIG1hcC5cbiAgICAgICAgICBtYXBWaWV3T3B0aW9uLmNvbnN0cmFpbnRzLnNuYXBUb1pvb20gPSBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjZW5lVmlld09wdGlvbikge1xuICAgICAgICAgIHNjZW5lVmlld09wdGlvbi52aWV3cG9pbnQgPSBoYXNoVmlld3BvaW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdmlldzogTWFwYmFzZVZpZXcgPSBudWxsXG5cbiAgICAvLyBjcmVhdGUgbWFwIHZpZXcgb3Igc2NlbmUgdmlld1xuICAgIGlmIChkYXRhU291cmNlSW5mby5pc1dlYk1hcCkge1xuICAgICAgdmlldyA9IG5ldyB0aGlzLk1hcFZpZXcobWFwVmlld09wdGlvbikgYXMgTWFwYmFzZVZpZXdcbiAgICB9IGVsc2Uge1xuICAgICAgdmlldyA9IG5ldyB0aGlzLlNjZW5lVmlldyhzY2VuZVZpZXdPcHRpb24pIGFzIE1hcGJhc2VWaWV3XG4gICAgfVxuXG4gICAgdmlldy5pbml0VXJsSGFzaFZpZXdwb2ludCA9IGluaXRVcmxIYXNoVmlld3BvaW50XG5cbiAgICBjb25zdCBtYXAgPSB2aWV3Lm1hcCBhcyBfX2VzcmkuTWFwICYgeyB0aHVtYm5haWxVcmw6IHN0cmluZywgb3JpZ2luYWxCYXNlbWFwOiBfX2VzcmkuQmFzZW1hcCB9XG5cbiAgICAvLyBzZXQgdmlldy5tYXAub3JpZ2luYWxCYXNlbWFwXG4gICAgY29uc3Qgc2V0T3JpZ2luYWxCYXNlbWFwID0gKCkgPT4ge1xuICAgICAgaWYgKG1hcC5vcmlnaW5hbEJhc2VtYXApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsQmFzZW1hcCA9IG1hcC5iYXNlbWFwXG5cbiAgICAgIC8vIG9yaWdpbmFsQmFzZW1hcCBtYXliZSBudWxsLCB3ZSBuZWVkIHRvIGNoZWNrIG9yaWdpbmFsQmFzZW1hcCBpcyBudWxsIG9yIG5vdFxuICAgICAgaWYgKCFvcmlnaW5hbEJhc2VtYXApIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghb3JpZ2luYWxCYXNlbWFwLnRodW1ibmFpbFVybCkge1xuICAgICAgICBjb25zdCBtYXBUaHVtYm5haWxVcmwgPSBtYXAudGh1bWJuYWlsVXJsXG5cbiAgICAgICAgLy8gdXNlIG1hcC50aHVtYm5haWxVcmwgYXMgb3JpZ2luYWxCYXNlbWFwLnRodW1ibmFpbFVybCBpZiBvcmlnaW5hbEJhc2VtYXAudGh1bWJuYWlsVXJsIGlzIGVtcHR5XG4gICAgICAgIGlmIChtYXBUaHVtYm5haWxVcmwpIHtcbiAgICAgICAgICBvcmlnaW5hbEJhc2VtYXAudGh1bWJuYWlsVXJsID0gbWFwVGh1bWJuYWlsVXJsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWFwLm9yaWdpbmFsQmFzZW1hcCA9IG9yaWdpbmFsQmFzZW1hcFxuICAgIH1cblxuICAgIGlmIChtYXAuYmFzZW1hcCkge1xuICAgICAgc2V0T3JpZ2luYWxCYXNlbWFwKClcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHdhdGNoQmFzZW1hcEhhbmRsZTogX19lc3JpLkhhbmRsZSA9IG51bGxcblxuICAgICAgd2F0Y2hCYXNlbWFwSGFuZGxlID0gbWFwLndhdGNoKCdiYXNlbWFwJywgKCkgPT4ge1xuICAgICAgICAvLyBvbmx5IHdhdGNoIG9uY2VcbiAgICAgICAgaWYgKHdhdGNoQmFzZW1hcEhhbmRsZSkge1xuICAgICAgICAgIHdhdGNoQmFzZW1hcEhhbmRsZS5yZW1vdmUoKVxuICAgICAgICB9XG5cbiAgICAgICAgd2F0Y2hCYXNlbWFwSGFuZGxlID0gbnVsbFxuXG4gICAgICAgIGlmIChtYXAuYmFzZW1hcCkge1xuICAgICAgICAgIHNldE9yaWdpbmFsQmFzZW1hcCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdmlldy5tYXBiYXNlID0gdGhpc1xuICAgIHZpZXcuaGlnaExpZ2h0SGFuZGxlcyA9IHt9XG4gICAgdmlldy5tYXBCYXNlVmlld0V2ZW50SGFuZGxlcyA9IHt9XG4gICAgdmlldy5leHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzID0gW11cbiAgICB2aWV3LnB1Ymxpc2hFeHRlbnRDaGFuZ2VNZXNzYWdlID0gZnVuY3Rpb24gKHN0YXRpb25hcnk6IGJvb2xlYW4sIGludGVyYWNpdmU6IGJvb2xlYW4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh2aWV3ICYmICF2aWV3LmRlc3Ryb3llZCkge1xuICAgICAgICAgIGNvbnN0IG1hcGJhc2UgPSB2aWV3Lm1hcGJhc2VcblxuICAgICAgICAgIGlmIChtYXBiYXNlICYmICFtYXBiYXNlLl9fdW5tb3VudCAmJiBtYXBiYXNlLnByb3BzICYmIG1hcGJhc2UucHJvcHMub25FeHRlbnRDaGFuZ2VkKSB7XG4gICAgICAgICAgICBtYXBiYXNlLnB1Ymxpc2hFeHRlbnRDaGFuZ2VNZXNzYWdlKHZpZXcsIHN0YXRpb25hcnksIGludGVyYWNpdmUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ3ZpZXcgcHVibGlzaCBleHRlbnQgY2hhbmdlIG1lc3NhZ2UgZXJyb3InLCBlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHZpZXcuaGlkZU1hcFRvb2xzID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmlldy5pc01hcFRvb2xzSGlkZGVuID0gdHJ1ZVxuXG4gICAgICAgIGlmICh2aWV3ICYmICF2aWV3LmRlc3Ryb3llZCkge1xuICAgICAgICAgIGNvbnN0IG1hcGJhc2UgPSB2aWV3Lm1hcGJhc2VcblxuICAgICAgICAgIGlmIChtYXBiYXNlICYmICFtYXBiYXNlLl9fdW5tb3VudCAmJiBtYXBiYXNlLnByb3BzKSB7XG4gICAgICAgICAgICBpZiAobWFwYmFzZS5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIC8vIHNldCBubyBhY3RpdmUgdG9vbFxuICAgICAgICAgICAgICBtYXBiYXNlLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2UobnVsbClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbXVsdGlTb3VyY2VNYXBEb20gPSBtYXBiYXNlLnByb3BzLm11bHRpU291cmNlTWFwRG9tXG5cbiAgICAgICAgICAgIGlmIChtdWx0aVNvdXJjZU1hcERvbSkge1xuICAgICAgICAgICAgICBtdWx0aVNvdXJjZU1hcERvbS5jbGFzc0xpc3QuYWRkKCdoaWRlLW1hcC10b29scy1sYXlvdXQnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd2aWV3IGhpZGUgbWFwIHRvb2xzIGVycm9yJywgZSlcbiAgICAgIH1cbiAgICB9XG4gICAgdmlldy52aWV3cG9pbnRIaXN0b3J5ID0gW11cbiAgICB2aWV3LnZpZXdwb2ludEluZGV4ID0gLTFcblxuICAgIHZpZXcuc2hvd01hcFRvb2xzID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmlldy5pc01hcFRvb2xzSGlkZGVuID0gZmFsc2VcblxuICAgICAgICBpZiAodmlldyAmJiAhdmlldy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICBjb25zdCBtYXBiYXNlID0gdmlldy5tYXBiYXNlXG5cbiAgICAgICAgICBpZiAobWFwYmFzZSAmJiAhbWFwYmFzZS5fX3VubW91bnQgJiYgbWFwYmFzZS5wcm9wcykge1xuICAgICAgICAgICAgY29uc3QgbXVsdGlTb3VyY2VNYXBEb20gPSBtYXBiYXNlLnByb3BzLm11bHRpU291cmNlTWFwRG9tXG5cbiAgICAgICAgICAgIGlmIChtdWx0aVNvdXJjZU1hcERvbSkge1xuICAgICAgICAgICAgICBtdWx0aVNvdXJjZU1hcERvbS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlLW1hcC10b29scy1sYXlvdXQnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd2aWV3IHNob3cgbWFwIHRvb2xzIGVycm9yJywgZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodmlldy5wb3B1cCkge1xuICAgICAgdmlldy5wb3B1cC5zcGlubmVyRW5hYmxlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgdmlldy5kYXRhU291cmNlSW5mbyA9IGRhdGFTb3VyY2VJbmZvXG5cbiAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICB0aGlzLmRlc3Ryb3lDdXJyZW50TWFwYmFzZVZpZXcoKVxuICAgICAgdGhpcy52aWV3ID0gbnVsbFxuICAgIH1cblxuICAgIC8vIHVwZGF0ZSB0aGlzLnZpZXdcbiAgICB0aGlzLnZpZXcgPSB2aWV3XG4gICAgdGhpcy5tYXBDcmVhdGluZ0luZm8gPSBudWxsXG5cbiAgICBpZiAodGhpcy5pc1JlYWR5VG9DcmVhdGVKaW11TWFwVmlldygpKSB7XG4gICAgICB0aGlzLmNyZWF0ZUppbXVNYXBWaWV3KClcbiAgICB9XG5cbiAgICAvLyB0aGUgZm9sbG93aW5nIGNvZGUgYXJlIHNhbWUgZm9yIGJvdGggbWFwIHZpZXcgYW5kIHNjZW5lIHZpZXdcblxuICAgIHZpZXcud2hlbigoKSA9PiB7XG4gICAgICBpZiAodmlldy52aWV3cG9pbnQpIHtcbiAgICAgICAgdmlldy52aWV3V2hlbkluaXRpYWxWaWV3cG9pbnQgPSB2aWV3LnZpZXdwb2ludC5jbG9uZSgpXG4gICAgICAgIHZpZXcubGFzdFZpZXdwb2ludFVwZGF0ZVVybFBhcmFtcyA9IHZpZXcudmlld3BvaW50LmNsb25lKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXcudmlld1doZW5Jbml0aWFsVmlld3BvaW50ID0gbnVsbFxuICAgICAgICB2aWV3Lmxhc3RWaWV3cG9pbnRVcGRhdGVVcmxQYXJhbXMgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIHZpZXcudmlld1doZW5UaW1lc3RhbXAgPSBEYXRlLm5vdygpXG5cbiAgICAgIC8vIHZpZXcud2hlbigpIGlzIGFzeW5jLCB3ZSBuZWVkIHRvIGNoZWNrIHRoZSB2aWV3IGlzIGV4cGVjdGVkIG9yIG5vdFxuICAgICAgLy8gaWYgdGhlIHZpZXcgaXMgbm90IGV4cGVjdGVkIGFnYWluLCB3ZSBkb24ndCBleGVjdXRlIHRoZSBmb2xsb3dpbmcgbG9naWNcbiAgICAgIGNvbnN0IGlzVmlld09rID0gIXZpZXcuZGVzdHJveWVkICYmIHRoaXMudmlldyA9PT0gdmlldyAmJiB0aGlzLmlzVmlld0V4cGVjdGVkKHZpZXcpXG5cbiAgICAgIGlmICghaXNWaWV3T2spIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoIXZpZXcuZGVzdHJveWVkKSB7XG4gICAgICAgICAgLy8gbWFrZSBzdXJlIHB1Ymxpc2ggZXh0ZW50LWNoYW5nZSBtZXNzYWdlIGF0IGxlYXN0IG9uY2VcbiAgICAgICAgICB0aGlzLnB1Ymxpc2hFeHRlbnRDaGFuZ2VNZXNzYWdlKHZpZXcsIHRydWUpXG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApXG5cbiAgICAgIHZpZXcud2F0Y2hJbnRlcmFjdGluZ0hhbmRsZSA9IHZpZXcud2F0Y2goJ2ludGVyYWN0aW5nJywgKCkgPT4ge1xuICAgICAgICBpZiAodmlldy5pbnRlcmFjdGluZykge1xuICAgICAgICAgIE1hcEJhc2UubGFzdEludGVyYWNpdmVWaWV3ID0gdmlld1xuICAgICAgICAgIC8vIFdlIG11c3Qgc2V0IHZpZXcuZXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkcyB0byBlbXB0eSBhcnJheSwgYmVjdWFzZSBjdXJyZW50IHZpZXcgaXMgdGhlIGV4dGVudC1jaGFuZ2Ugc291cmNlci5cbiAgICAgICAgICB0aGlzLnNldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNGb3JWaWV3KHZpZXcsIFtdKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBNYXBWaWV3IGFsd2F5cyB0cmlnZ2VyIHR3aWNlIGV4dGVudCBjaGFuZ2UgZXZlbnQgYWZ0ZXIgdmlldyB3aGVuLCBhYm91dCAzbXMgLSA4MG1zIGFmdGVyIHZpZXcgd2hlbi5cbiAgICAgIC8vIFNjZW5lVmlldyBhbHdheXMgdHJpZ2dlciAyLTUgdGltZXMgZXh0ZW50IGNoYW5nZSBldmVudCBhZnRlciB2aWV3IHdoZW4sIGFib3V0IDMgLSA1MDAwIG1zLCBkZXBlbmRzIG9uIGRhdGEuXG4gICAgICB2aWV3LmV4dGVudFdhdGNoSGFuZGxlID0gdmlldy53YXRjaCgnZXh0ZW50JywgKGV4dGVudDogX19lc3JpLkV4dGVudCkgPT4ge1xuICAgICAgICBpZiAoIWV4dGVudCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wdWJsaXNoRXh0ZW50Q2hhbmdlTWVzc2FnZSh2aWV3LCBmYWxzZSlcblxuICAgICAgICBpZiAodmlldy5zdGF0aW9uYXJ5VGltZXJJZCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh2aWV3LnN0YXRpb25hcnlUaW1lcklkKVxuICAgICAgICAgIHZpZXcuc3RhdGlvbmFyeVRpbWVySWQgPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBkb24ndCB1c2Ugdmlldy53YXRjaCgnc3RhdGlvbmFyeScsIGNiKSB0byBjaGVjayBpZiB2aWV3IGlzIHN0YXRpYyBvciBub3QsIGJlY2F1c2UgdGhlIGJlaGF2aW9yIG9mIHZpZXcuc3RhdGlvbmFyeSBpcyBzdHJhbmdlLlxuICAgICAgICAvLyBJbnN0ZWFkLCB3ZSB1c2UgYSB0aW1lb3V0IHRvIGNoZWNrIGlmIHZpZXcgaXMgc3RhdGljIG9yIG5vdC5cbiAgICAgICAgdmlldy5zdGF0aW9uYXJ5VGltZXJJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHZpZXcuc3RhdGlvbmFyeVRpbWVySWQgPSBudWxsXG4gICAgICAgICAgLy8gdmlldyBpcyBzdGF0aWMgbm93XG5cbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIHB1Ymxpc2ggZXh0ZW50LWNoYW5nZSBtZXNzYWdlIGFnYWluIHdoZW4gdmlldyBpcyBzdGF0aWMuXG4gICAgICAgICAgdGhpcy5wdWJsaXNoRXh0ZW50Q2hhbmdlTWVzc2FnZSh2aWV3LCB0cnVlKVxuXG4gICAgICAgICAgLy8gTm90ZSwgbWFrZSBzdXJlIHdlIGNhbGwgc2V0RXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkc0ZvclZpZXcoKSBhZnRlciBwdWJsaXNoIGV4dGVudC1jaGFuZ2UgbWVzc2FnZS5cbiAgICAgICAgICB0aGlzLnNldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNGb3JWaWV3KHZpZXcsIFtdKVxuXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlldyA9PT0gTWFwQmFzZS5sYXN0SW50ZXJhY2l2ZVZpZXcgJiYgIXZpZXcuaW50ZXJhY3RpbmcpIHtcbiAgICAgICAgICAgICAgTWFwQmFzZS5sYXN0SW50ZXJhY2l2ZVZpZXcgPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMTAwMClcbiAgICAgICAgfSwgMjAwKVxuICAgICAgfSlcblxuICAgICAgaWYgKCF2aWV3LmZhdGFsRXJyb3JXYXRjaEhhbmRsZSkge1xuICAgICAgICB2aWV3LmZhdGFsRXJyb3JXYXRjaEhhbmRsZSA9IHZpZXcud2F0Y2goJ2ZhdGFsRXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHVzZSB0aGlzLnByb3BzLmlzTWFwSW5WaXNpYmxlQXJlYSB0byBjaGVjayBpcyBtYXAgdmlzaWJsZSBvciBub3QsIGJlY2F1c2UgbWFwYmFzZSBtYXliZSB1bm1vdW50ZWQgYW5kIHRoaXMucHJvcHMuaXNNYXBJblZpc2libGVBcmVhIGlzIHN0aWxsIHRydWUuXG4gICAgICAgICAgICAvLyBJdCBpcyBtb3JlIHNhZmUgdG9cbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlY292ZXJ5ID0gIXZpZXcuaXNJbkNhY2hpbmcgJiYgdmlldy5jb250YWluZXIgJiYgdmlldy5jb250YWluZXIuY2xpZW50V2lkdGggPiAwICYmIHZpZXcuY29udGFpbmVyLmNsaWVudEhlaWdodCA+IDBcbiAgICAgICAgICAgIGNvbnN0IHdpZGdldElkID0gdGhpcy5wcm9wcz8uYmFzZVdpZGdldFByb3BzPy5pZCB8fCAnJ1xuXG4gICAgICAgICAgICBpZiAoc2hvdWxkUmVjb3ZlcnkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHt3aWRnZXRJZH0gRmF0YWwgRXJyb3IhIFZpZXcgaGFzIGxvc3QgaXRzIFdlYkdMIGNvbnRleHQuIEF0dGVtcHRpbmcgdG8gcmVjb3ZlciBpdCBiZWNhdXNlIHRoZSB2aWV3IGlzIHZpc2libGUuYClcbiAgICAgICAgICAgICAgdGhpcy50cnlGYXRhbEVycm9yUmVjb3ZlcnkodmlldylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7d2lkZ2V0SWR9IEZhdGFsIEVycm9yISBWaWV3IGhhcyBsb3N0IGl0cyBXZWJHTCBjb250ZXh0LiBEb24ndCByZWNvdmVyIGl0IGJlY2F1c2UgdGhlIHZpZXcgaXMgbm90IHZpc2libGUuYClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIGFmdGVyIHZpZXcgaXMgbG9hZGVkLCBzZW5kIGV4dGVudCBjaGFuZ2UgbWVzc2FnZVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1hcExvYWRTdGF0dXM6IE1hcExvYWRTdGF0dXMuTG9hZG9rIH0sICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk1hcExvYWRlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgTWFwTG9hZFN0YXR1cy5Mb2Fkb2spXG4gICAgICB9KVxuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBhbiBleHRlbnQgaXMgcGFzc2VkIGZyb20gZXh0ZW50TWVzc2FnZSBiZWZvcmUsIGRvbid0IGluaXQgZXh0ZW50IGhlcmUgYXMgdGhpcyB3aWxsIHB1Ymxpc2hcbiAgICAgIC8vIGV4dGVudE1lc3NhZ2UgYW5kIGNoYW5nZSBvdGhlciBtYXBXaWRnZXQncyBleHRlbnQuXG4gICAgICBpZiAoIXRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzPy5tdXRhYmxlU3RhdGVQcm9wcz8uem9vbVRvRmVhdHVyZUFjdGlvblZhbHVlPy52YWx1ZSkge1xuICAgICAgICAvLyBJbiAyMDIzLlIwMiwgaXQgYWx3YXlzIGNhbGxzIHRoaXMuZ29Ib21lKGZhbHNlKSBoZXJlLiBXZSBrZWVwIGl0IGZvciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAvLyBJbiB0aGUgbmV4dCByZWxlYXNlLCBpZiB3ZSBjYW4gZ2V0IHZpZXdwb2ludCBmcm9tIHVybCBoYXNoLCB3ZSB3aWxsIHVzZSBpdCBhcyBtYXAgaW5pdGlhbCB2aWV3cG9pbnQuXG4gICAgICAgIC8vIEZvciB0aGlzIGNhc2UgKHZpZXcuaW5pdFVybEhhc2hWaWV3cG9pbnQgbm90IGVtcHR5KSwgd2UgZG9uJ3QgY2FsbCB0aGlzLmdvSG9tZShmYWxzZSksIGJlY2F1c2UgZ29Ib21lIHdpbGwgbGV0IHRoZSBtYXAgZ290byBjb25maWcuaW5pdGlhbE1hcFN0YXRlLlxuICAgICAgICBpZiAoIXZpZXcuaW5pdFVybEhhc2hWaWV3cG9pbnQpIHtcbiAgICAgICAgICB0aGlzLmdvSG9tZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc01hcFZpZXcodmlldykpIHtcbiAgICAgICAgLy8gc25hcFRvWm9vbTogdHJ1ZSBtZWFucyBpbnRlZ2VyIHpvb20sIGZhbHNlIG1lYW5zIGZsb2F0IHpvb21cbiAgICAgICAgLy8gV2UgbmVlZCB0byBzZXQgdGhlIGluaXRpYWwgdmFsdWUgdG8gdHJ1ZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBhbmQga2VlcCB0aGUgc2FtZSBiZWhhdmlvciB3aXRoIE1hcFZpZXdlclxuICAgICAgICAvLyBBZnRlciBtYXAgaW5pdGVkLCB3ZSB3aWxsIHNldCBzbmFwVG9ab29tIHRvIGZhbHNlIHRvIGdldCB0aGUgYmVzdCBzeW5jaHJvbml6YXRpb24gYmV0d2VlbiB0d28gbWFwIHdpZGdldHNcblxuICAgICAgICAvLyBXZSB1c2Ugc2V0VGltZW91dCBoZXJlIHRvIG1ha2Ugc3VyZSB0aGUgYWJvdmUgdGhpcy5nb0hvbWUoZmFsc2UpIGlzIGRvbmUuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICh2aWV3IGFzIF9fZXNyaS5NYXBWaWV3KS5jb25zdHJhaW50cy5zbmFwVG9ab29tID0gZmFsc2VcbiAgICAgICAgfSwgMClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5iaW5kTWFwQmFzZVZpZXdFdmVudCh2aWV3KVxuXG4gICAgdGhpcy50cnlVcGRhdGVDdXJyZW50Vmlld0J5Q29uZmlnUHJvcHModHJ1ZSlcbiAgICB0aGlzLmNoZWNrQW5kSGFuZGxlTXV0YWJsZVN0YXRlUHJvcHMoKVxuICB9XG5cbiAgcHVibGlzaEV4dGVudENoYW5nZU1lc3NhZ2UgKHZpZXc6IE1hcGJhc2VWaWV3LCBzdGF0aW9uYXJ5OiBib29sZWFuLCBpbnRlcmFjaXZlPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghdmlldykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgbm93VGltZSA9IERhdGUubm93KClcblxuICAgIGlmICghdmlldy5maXJzdFB1Ymxpc2hFeHRlbnRDaGFuZ2VUaW1lKSB7XG4gICAgICB2aWV3LmZpcnN0UHVibGlzaEV4dGVudENoYW5nZVRpbWUgPSBub3dUaW1lXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW50ID0gdmlldy5leHRlbnQuY2xvbmUoKVxuICAgIGNvbnN0IHZpZXdwb2ludCA9IHZpZXcudmlld3BvaW50LmNsb25lKClcbiAgICBjb25zdCBleHRlbnRNZXNzYWdlID0gbmV3IEV4dGVudENoYW5nZU1lc3NhZ2UodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQsIGV4dGVudCwgdmlld3BvaW50LCBzdGF0aW9uYXJ5KVxuICAgIGV4dGVudE1lc3NhZ2UucHVibGlzaFRpbWUgPSBub3dUaW1lXG4gICAgZXh0ZW50TWVzc2FnZS5pbnRlcmFjaXZlID0gaW50ZXJhY2l2ZSB8fCB2aWV3LmludGVyYWN0aW5nXG4gICAgY29uc3QgZXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkc09mVmlldyA9IHRoaXMuZ2V0RXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkc09mVmlldyh2aWV3KVxuXG4gICAgZXh0ZW50TWVzc2FnZS5zZXRSZWxhdGVkV2lkZ2V0SWRzKGV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNPZlZpZXcpXG4gICAgZXh0ZW50TWVzc2FnZS5hZGRSZWxhdGVkV2lkZ2V0SWQodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQpXG4gICAgdGhpcy5wcm9wcy5vbkV4dGVudENoYW5nZWQodGhpcy5wcm9wcy5kYXRhU291cmNlSWQsIGV4dGVudE1lc3NhZ2UpXG5cbiAgICBpZiAoc3RhdGlvbmFyeSkge1xuICAgICAgLy8gaGFuZGxlIHZpZXdwb2ludEhpc3RvcnlcbiAgICAgIGNvbnN0IGN1cnJlbnRWaWV3cG9pbnQgPSB2aWV3LnZpZXdwb2ludC5jbG9uZSgpXG5cbiAgICAgIGlmICh2aWV3LnZpZXdwb2ludEhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBpbmRleGVzOiBudW1iZXJbXSA9IFt2aWV3LnZpZXdwb2ludEluZGV4LCB2aWV3LnZpZXdwb2ludEluZGV4IC0gMSwgdmlldy52aWV3cG9pbnRJbmRleCArIDFdXG4gICAgICAgIGxldCBpc1NhbWVsaWtlVmlld3BvaW50OiBib29sZWFuID0gZmFsc2VcbiAgICAgICAgY29uc3QgbGFzdFZpZXdwb2ludEluZGV4ID0gdmlldy52aWV3cG9pbnRIaXN0b3J5Lmxlbmd0aCAtIDFcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB2aWV3cG9pbnRJbmRleCA9IGluZGV4ZXNbaV1cblxuICAgICAgICAgIGlmICh2aWV3cG9pbnRJbmRleCA+PSAwICYmIHZpZXdwb2ludEluZGV4IDw9IGxhc3RWaWV3cG9pbnRJbmRleCkge1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvaW50ID0gZ2V0Vmlld3BvaW50SW5zdGFuY2VGcm9tSGlzdG9yeSh2aWV3LCB2aWV3cG9pbnRJbmRleClcblxuICAgICAgICAgICAgaWYgKHZpZXdwb2ludCAmJiBpc1NhbWVsaWtlVmlld3BvaW50cyh2aWV3LCBjdXJyZW50Vmlld3BvaW50LCB2aWV3cG9pbnQpKSB7XG4gICAgICAgICAgICAgIGlzU2FtZWxpa2VWaWV3cG9pbnQgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc1NhbWVsaWtlVmlld3BvaW50KSB7XG4gICAgICAgICAgLy8gY3VycmVudCB2aWV3cG9pbnRIaXN0b3J5OiB2aWV3LnZpZXdwb2ludEluZGV4IHBvaW50IHRvIENcbiAgICAgICAgICAvLyBBIC0+IEIgLT4gW0NdIC0+IEQgLT4gRVxuXG4gICAgICAgICAgLy8gdGVtcCB2aWV3cG9pbnRIaXN0b3J5XG4gICAgICAgICAgLy8gQSAtPiBCIC0+IFtDXVxuICAgICAgICAgIHZpZXcudmlld3BvaW50SGlzdG9yeS5zcGxpY2Uodmlldy52aWV3cG9pbnRJbmRleCArIDEpXG5cbiAgICAgICAgICAvLyBuZXcgdmlld3BvaW50SGlzdG9yeVxuICAgICAgICAgIC8vIEEgLT4gQiAtPiBDIC0+IFtGXVxuICAgICAgICAgIHZpZXcudmlld3BvaW50SGlzdG9yeS5wdXNoKGN1cnJlbnRWaWV3cG9pbnQpXG4gICAgICAgICAgdmlldy52aWV3cG9pbnRJbmRleCArPSAxXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZpcnN0IHZpZXdwb2ludFxuICAgICAgICB2aWV3LnZpZXdwb2ludEhpc3RvcnkucHVzaChjdXJyZW50Vmlld3BvaW50KVxuICAgICAgICB2aWV3LnZpZXdwb2ludEluZGV4ID0gMFxuICAgICAgfVxuXG4gICAgICBpZiAodmlldy5zdGF0aW9uYXJ5Q2FsbGJhY2spIHtcbiAgICAgICAgdmlldy5zdGF0aW9uYXJ5Q2FsbGJhY2soKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGVib3VuY2VVcGRhdGVVcmxIYXNoUGFyYW1zKClcbiAgfVxuXG4gIGRlYm91bmNlVXBkYXRlVXJsSGFzaFBhcmFtcyA9ICgpID0+IHt9XG5cbiAgdXBkYXRlVXJsSGFzaFBhcmFtcyAoKSB7XG4gICAgaWYgKHRoaXMudmlldykge1xuICAgICAgY29uc3QgamltdU1hcFZpZXcgPSB0aGlzLmdldEppbXVNYXBWaWV3Rm9WaWV3KHRoaXMudmlldylcblxuICAgICAgaWYgKGppbXVNYXBWaWV3ICYmIGppbXVNYXBWaWV3LmlzQWN0aXZlKSB7XG4gICAgICAgIC8vIE1hcFZpZXcgYWx3YXlzIHRyaWdnZXIgdHdpY2UgZXh0ZW50IGNoYW5nZSBldmVudCBhZnRlciB2aWV3IHdoZW4sIGFib3V0IDNtcyAtIDgwbXMgYWZ0ZXIgdmlldyB3aGVuLlxuICAgICAgICAvLyBTY2VuZVZpZXcgYWx3YXlzIHRyaWdnZXIgMi01IHRpbWVzIGV4dGVudCBjaGFuZ2UgZXZlbnQgYWZ0ZXIgdmlldyB3aGVuLCBhYm91dCAzIC0gNTAwMCBtcywgZGVwZW5kcyBvbiBkYXRhLlxuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBtYXAgdXJsIHBhcmFtZXRlcnMgZHVyaW5nIG1hcCBpbml0aWFsaXppbmcsIHNvIG5lZWQgdG8gY2hlY2sgdmlld3BvaW50IHJlYWxseSBjaGFuZ2VkIG9yIG5vdC5cbiAgICAgICAgY29uc3QgaXNWaWV3cG9pbnRDaGFuZ2UgPSAhaXNTYW1lbGlrZVZpZXdwb2ludHModGhpcy52aWV3LCB0aGlzLnZpZXcudmlld3BvaW50LCB0aGlzLnZpZXcubGFzdFZpZXdwb2ludFVwZGF0ZVVybFBhcmFtcylcblxuICAgICAgICBpZiAoaXNWaWV3cG9pbnRDaGFuZ2UpIHtcbiAgICAgICAgICAvLyB2aWV3cG9pbnQgcmVhbGx5IGNoYW5nZWRcbiAgICAgICAgICB1cGRhdGVVcmxIYXNoUGFyYW1zRm9yQWN0aXZlSmltdU1hcFZpZXcoamltdU1hcFZpZXcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZVZpZXdQb2ludEZyb21Jbml0aWFsTWFwU3RhdGUgKGluaXRpYWxNYXBTdGF0ZTogSW1tdXRhYmxlT2JqZWN0PEluaXRpYWxNYXBTdGF0ZT4pOiBfX2VzcmkuVmlld3BvaW50IHtcbiAgICAvLyBGb3IgMmQsIGluaXRpYWxNYXBTdGF0ZS5leHRlbnQgYW5kIGluaXRpYWxNYXBTdGF0ZS52aWV3UG9pbnQgaGF2ZSBzb21lIGRpZmZlcmVuY2UuXG4gICAgLy8gVGhlIGxvZ2ljIGhhcyBydW4gbG9uZyB0aW1lLCBmb3Igbm93IHdlIGRvbid0IGNoYW5nZSBpdHMgbG9naWMgZm9yIGNvbXBhdGliaWxpdHkuXG4gICAgaWYgKGluaXRpYWxNYXBTdGF0ZS52aWV3VHlwZSA9PT0gJzJkJykge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLlZpZXdwb2ludChcbiAgICAgICAge1xuICAgICAgICAgIHRhcmdldEdlb21ldHJ5OiB0aGlzLkV4dGVudC5mcm9tSlNPTihpbml0aWFsTWFwU3RhdGUuZXh0ZW50KSxcbiAgICAgICAgICByb3RhdGlvbjogaW5pdGlhbE1hcFN0YXRlLnJvdGF0aW9uXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuVmlld3BvaW50LmZyb21KU09OKGluaXRpYWxNYXBTdGF0ZS52aWV3UG9pbnQpXG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVWaWV3cG9pbnRCeVVybEhhc2hQYXJhbXMgKGlzMmQpIHtcbiAgICBsZXQgcmVzdWx0Vmlld3BvaW50OiBfX2VzcmkuVmlld3BvaW50ID0gbnVsbFxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGlzUnVuQXBwTW9kZSA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlzUnVuQXBwTW9kZVxuICAgICAgY29uc3QgcnVudGltZVVybEhhc2hQYXJhbXMgPSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5ydW50aW1lVXJsSGFzaFBhcmFtc1xuXG4gICAgICAvLyBpZiAoaXNSdW5BcHBNb2RlICYmIHJ1bnRpbWVVcmxIYXNoUGFyYW1zICYmIHJ1bnRpbWVVcmxIYXNoUGFyYW1zLm1hcF9zdGF0ZSkge1xuICAgICAgLy8gICBjb25zdCBtYXBTdGF0ZUpzb24gPSBKU09OLnBhcnNlKHJ1bnRpbWVVcmxIYXNoUGFyYW1zLm1hcF9zdGF0ZSlcbiAgICAgIC8vICAgY29uc3Qgdmlld3BvaW50SnNvbiA9IG1hcFN0YXRlSnNvbi52aWV3cG9pbnRcbiAgICAgIC8vICAgY29uc3QgZXh0ZW50SnNvbiA9IG1hcFN0YXRlSnNvbi5leHRlbnRcblxuICAgICAgLy8gICBpZiAodmlld3BvaW50SnNvbiAmJiBleHRlbnRKc29uKSB7XG4gICAgICAvLyAgICAgY29uc3Qgdmlld3BvaW50ID0gdGhpcy5WaWV3cG9pbnQuZnJvbUpTT04odmlld3BvaW50SnNvbilcbiAgICAgIC8vICAgICBjb25zdCBleHRlbnQgPSB0aGlzLkV4dGVudC5mcm9tSlNPTihleHRlbnRKc29uKVxuXG4gICAgICAvLyAgICAgaWYgKHZpZXdwb2ludCAmJiBleHRlbnQpIHtcbiAgICAgIC8vICAgICAgIGNvbnN0IHZpZXdUeXBlID0gaXMyZCA/ICcyZCcgOiAnM2QnXG4gICAgICAvLyAgICAgICBjb25zdCByb3RhdGlvbiA9IHZpZXdwb2ludC5yb3RhdGlvbiA/PyAwXG4gICAgICAvLyAgICAgICBjb25zdCBpbml0aWFsTWFwU3RhdGU6IEltbXV0YWJsZU9iamVjdDxJbml0aWFsTWFwU3RhdGU+ID0gSW1tdXRhYmxlKHtcbiAgICAgIC8vICAgICAgICAgdmlld1BvaW50OiB2aWV3cG9pbnRKc29uLFxuICAgICAgLy8gICAgICAgICB2aWV3VHlwZSxcbiAgICAgIC8vICAgICAgICAgZXh0ZW50OiBleHRlbnRKc29uLFxuICAgICAgLy8gICAgICAgICByb3RhdGlvblxuICAgICAgLy8gICAgICAgfSlcblxuICAgICAgLy8gICAgICAgcmVzdWx0Vmlld3BvaW50ID0gdGhpcy5nZW5lcmF0ZVZpZXdQb2ludEZyb21Jbml0aWFsTWFwU3RhdGUoaW5pdGlhbE1hcFN0YXRlKVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuXG4gICAgICBpZiAoaXNSdW5BcHBNb2RlICYmIHJ1bnRpbWVVcmxIYXNoUGFyYW1zICYmIHJ1bnRpbWVVcmxIYXNoUGFyYW1zLm1hcF9zdGF0ZSkge1xuICAgICAgICBjb25zdCBtYXBTdGF0ZUpzb24gPSBKU09OLnBhcnNlKHJ1bnRpbWVVcmxIYXNoUGFyYW1zLm1hcF9zdGF0ZSlcbiAgICAgICAgY29uc3Qgdmlld3BvaW50SnNvbiA9IG1hcFN0YXRlSnNvbi52aWV3cG9pbnRcblxuICAgICAgICBpZiAodmlld3BvaW50SnNvbikge1xuICAgICAgICAgIHJlc3VsdFZpZXdwb2ludCA9IHRoaXMuVmlld3BvaW50LmZyb21KU09OKHZpZXdwb2ludEpzb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdwYXJzZSBtYXBfc3RhdGUgZnJvbSB1cmwgaGFzaCBwYXJhbXMgZXJyb3InLCBlKVxuICAgICAgcmVzdWx0Vmlld3BvaW50ID0gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRWaWV3cG9pbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBjcmVhdGUgd2ViIG1hcCBvciB3ZWIgc2NlbmUgYnkgZGF0YSBzb3VyY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY29uc2lkZXIgZGVmYXVsdCB3ZWIgbWFwIGNhc2UuXG4gICAqIEBwYXJhbSBkYXRhU291cmNlSW5mb1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlV2ViTWFwT3JXZWJTY2VuZUJ5RGF0YVNvdXJjZSAoZGF0YVNvdXJjZUluZm86IE1hcGJhc2VEYXRhU291cmNlSW5mbyk6IFByb21pc2U8X19lc3JpLldlYk1hcCB8IF9fZXNyaS5XZWJTY2VuZT4ge1xuICAgIGxldCB3ZWJNYXBPcldlYlNjZW5lOiBfX2VzcmkuV2ViTWFwIHwgX19lc3JpLldlYlNjZW5lID0gbnVsbFxuICAgIGNvbnN0IE1hcENsYXNzOiB0eXBlb2YgX19lc3JpLldlYk1hcCB8IHR5cGVvZiBfX2VzcmkuV2ViU2NlbmUgPSBkYXRhU291cmNlSW5mby5pc1dlYk1hcCA/IHRoaXMuV2ViTWFwIDogdGhpcy5XZWJTY2VuZVxuXG4gICAgY29uc3QgZGF0YVNvdXJjZUpzb24gPSBkYXRhU291cmNlSW5mby5kYXRhU291cmNlSnNvblxuXG4gICAgaWYgKGRhdGFTb3VyY2VKc29uLnBvcnRhbFVybCkge1xuICAgICAgLy8gY3JlYXRlIHdlYiBtYXAgb3Igd2ViIHNjZW5lIGZvciBwb3J0YWxcbiAgICAgIGNvbnN0IHBvcnRhbCA9IG5ldyB0aGlzLlBvcnRhbCh7XG4gICAgICAgIHVybDogcG9ydGFsVXJsVXRpbHMuZ2V0UGxhdGZvcm1VcmxCeU9yZ1VybChkYXRhU291cmNlSnNvbi5wb3J0YWxVcmwpXG4gICAgICB9KVxuXG4gICAgICB3ZWJNYXBPcldlYlNjZW5lID0gbmV3IE1hcENsYXNzKHtcbiAgICAgICAgcG9ydGFsSXRlbTogbmV3IHRoaXMuUG9ydGFsSXRlbSh7XG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VKc29uLml0ZW1JZCxcbiAgICAgICAgICBwb3J0YWw6IHBvcnRhbFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY3JlYXRlIHdlYiBtYXAgb3Igd2ViIHNjZW5lIGZvciBhcmNnaXMgb25saW5lXG4gICAgICB3ZWJNYXBPcldlYlNjZW5lID0gbmV3IE1hcENsYXNzKHtcbiAgICAgICAgcG9ydGFsSXRlbTogbmV3IHRoaXMuUG9ydGFsSXRlbSh7XG4gICAgICAgICAgaWQ6IGRhdGFTb3VyY2VKc29uLml0ZW1JZFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZGF0YVNvdXJjZVV0aWxzLmdldFdoZXRoZXJVc2VQcm94eSgpKSB7XG4gICAgICBhd2FpdCB3ZWJNYXBPcldlYlNjZW5lLmxvYWQoKVxuICAgICAgYXdhaXQgd2ViTWFwT3JXZWJTY2VuZS53aGVuKClcblxuICAgICAgLy8gc2V0IHByb3h5IHVybCBmb3IgbGF5ZXJzIGFuZCB0YWJsZXNcbiAgICAgIGNvbnN0IGFsbExheWVycyA9IHdlYk1hcE9yV2ViU2NlbmUuYWxsTGF5ZXJzLnRvQXJyYXkoKVxuICAgICAgY29uc3QgdGFibGVzID0gd2ViTWFwT3JXZWJTY2VuZS50YWJsZXMgPyB3ZWJNYXBPcldlYlNjZW5lLnRhYmxlcy50b0FycmF5KCkgOiBbXVxuICAgICAgY29uc3QgbGF5ZXJzQW5kVGFibGVzID0gYWxsTGF5ZXJzLmNvbmNhdCh0YWJsZXMpIGFzIEFycmF5PF9fZXNyaS5MYXllciAmIHsgdXJsOiBzdHJpbmcsIHBvcnRhbEl0ZW0/OiBfX2VzcmkuUG9ydGFsSXRlbSB9PlxuICAgICAgbGF5ZXJzQW5kVGFibGVzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICBjb25zdCBzb3VyY2VVcmwgPSBkYXRhU291cmNlVXRpbHMuZ2V0VXJsQnlMYXllcihsYXllcilcblxuICAgICAgICBpZiAoIXNvdXJjZVVybCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJveHlVcmw6IHN0cmluZyA9IGRhdGFTb3VyY2VVdGlscy5nZXREYXRhU291cmNlUHJveHlVcmwoc291cmNlVXJsKVxuXG4gICAgICAgIGlmIChwcm94eVVybCkge1xuICAgICAgICAgIGxheWVyLnVybCA9IHByb3h5VXJsXG5cbiAgICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGNvZGUgaXMgdGhlIHdvcmthcm91bmQgdG8gZml4IEpTIEFQSSA0LjI4IGlzc3VlLiBOZWVkIHRvIGJlIHJlcGxhY2VkIHdpdGggcmVxdWVzdCBpbnRlcmNlcHRvciBpbiBuZXh0IHJlbGVhc2UuXG4gICAgICAgICAgY29uc3QgcG9ydGFsSXRlbSA9IGxheWVyLnBvcnRhbEl0ZW1cblxuICAgICAgICAgIGlmIChwb3J0YWxJdGVtICYmIHBvcnRhbEl0ZW0ud2hlbikge1xuICAgICAgICAgICAgcG9ydGFsSXRlbS53aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgLy8gQWZ0ZXIgZXhlY3V0ZSAnbGF5ZXIudXJsID0gcHJveHlVcmwnLCBsYXllci51cmwgbWF5YmUgc3RpbGwgZGlmZmVyZW50IHdpdGggcHJveHlVcmwsIGUuZy4gcHJveHlVcmwgaXMgJ3h4eC9mZWF0dXJlc2VydmVyLzAnLCBidXQgdGhlIGZpbmFsIGxheWVyLnVybCBpcyAneHh4L2ZlYXR1cmVzZXJ2ZXInLlxuICAgICAgICAgICAgICAvLyBzbyB3ZSB1c2UgbGF5ZXIudXJsIGhlcmUsIG5vdCBwcm94eVVybC5cbiAgICAgICAgICAgICAgcG9ydGFsSXRlbS51cmwgPSBsYXllci51cmxcblxuICAgICAgICAgICAgICBpZiAocG9ydGFsSXRlbS5zb3VyY2VKU09OKSB7XG4gICAgICAgICAgICAgICAgcG9ydGFsSXRlbS5zb3VyY2VKU09OLnVybCA9IGxheWVyLnVybFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gd2ViTWFwT3JXZWJTY2VuZVxuICB9XG5cbiAgZ2V0SW5pdFZpZXdQb2ludEZvckRlZmF1bHRXZWJNYXAgPSAoKTogX19lc3JpLlZpZXdwb2ludCA9PiB7XG4gICAgY29uc3QgZGVmYXVsdEV4dGVudCA9IHRoaXMucHJvcHMuZGVmYXVsdE1hcEluZm8gJiYgdGhpcy5wcm9wcy5kZWZhdWx0TWFwSW5mby5kZWZhdWx0RXh0ZW50XG4gICAgbGV0IHRlbXBWaWV3UG9pbnQgPSBudWxsXG4gICAgaWYgKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5pbml0aWFsTWFwU3RhdGUgJiYgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLmluaXRpYWxNYXBTdGF0ZS52aWV3UG9pbnQpIHtcbiAgICAgIHRlbXBWaWV3UG9pbnQgPSB0aGlzLmdlbmVyYXRlVmlld1BvaW50RnJvbUluaXRpYWxNYXBTdGF0ZSh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5jb25maWcuaW5pdGlhbE1hcFN0YXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0ZW1wVmlld1BvaW50ID0gbmV3IHRoaXMuVmlld3BvaW50KFxuICAgICAgICB7XG4gICAgICAgICAgdGFyZ2V0R2VvbWV0cnk6IG5ldyB0aGlzLkV4dGVudCh7XG4gICAgICAgICAgICB4bWluOiBkZWZhdWx0RXh0ZW50ICYmIGRlZmF1bHRFeHRlbnQueG1pbixcbiAgICAgICAgICAgIHltaW46IGRlZmF1bHRFeHRlbnQgJiYgZGVmYXVsdEV4dGVudC55bWluLFxuICAgICAgICAgICAgeG1heDogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnhtYXgsXG4gICAgICAgICAgICB5bWF4OiBkZWZhdWx0RXh0ZW50ICYmIGRlZmF1bHRFeHRlbnQueW1heCxcbiAgICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHsgd2tpZDogZGVmYXVsdEV4dGVudC5zcGF0aWFsUmVmZXJlbmNlLndraWQgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRlbXBWaWV3UG9pbnRcbiAgfVxuXG4gIGdldERlZmF1bHRXZWJNYXAgKCkge1xuICAgIGNvbnN0IGRlZmF1bHRFeHRlbnQgPSB0aGlzLnByb3BzLmRlZmF1bHRNYXBJbmZvICYmIHRoaXMucHJvcHMuZGVmYXVsdE1hcEluZm8uZGVmYXVsdEV4dGVudFxuXG4gICAgY29uc3QgdGVtcFZpZXdQb2ludCA9IG5ldyB0aGlzLlZpZXdwb2ludChcbiAgICAgIHtcbiAgICAgICAgdGFyZ2V0R2VvbWV0cnk6IG5ldyB0aGlzLkV4dGVudCh7XG4gICAgICAgICAgeG1pbjogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnhtaW4sXG4gICAgICAgICAgeW1pbjogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnltaW4sXG4gICAgICAgICAgeG1heDogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnhtYXgsXG4gICAgICAgICAgeW1heDogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnltYXgsXG4gICAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogeyB3a2lkOiBkZWZhdWx0RXh0ZW50LnNwYXRpYWxSZWZlcmVuY2Uud2tpZCB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgZGVmYXVsdFdlYm1hcCA9IG5ldyB0aGlzLldlYk1hcCh7XG4gICAgICBwb3J0YWxJdGVtOiB7XG4gICAgICAgIGlkOiB0aGlzLnByb3BzLmRlZmF1bHRNYXBJbmZvLmRlZmF1bHRNYXBJZCxcbiAgICAgICAgcG9ydGFsOiB7XG4gICAgICAgICAgdXJsOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5wb3J0YWxVcmxcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluaXRpYWxWaWV3UHJvcGVydGllczogbmV3IHRoaXMuSW5pdGlhbFZpZXdQcm9wZXJ0aWVzKHtcbiAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogZGVmYXVsdEV4dGVudCAmJiBkZWZhdWx0RXh0ZW50LnNwYXRpYWxSZWZlcmVuY2UsXG4gICAgICAgIHZpZXdwb2ludDogdGVtcFZpZXdQb2ludFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIGRlZmF1bHRXZWJtYXBcbiAgfVxuXG4gIGFzeW5jIGdldE1hcFZpZXdPcHRpb25Ub0NyZWF0ZU1hcFZpZXcgKGRhdGFTb3VyY2VJbmZvOiBNYXBiYXNlRGF0YVNvdXJjZUluZm8pOiBQcm9taXNlPF9fZXNyaS5NYXBWaWV3UHJvcGVydGllcz4ge1xuICAgIGxldCBtYXBWaWV3T3B0aW9uOiBfX2VzcmkuTWFwVmlld1Byb3BlcnRpZXNcblxuICAgIGNvbnN0IGluaXRpYWxNYXBTdGF0ZSA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5pbml0aWFsTWFwU3RhdGVcblxuICAgIGlmICh0aGlzLnByb3BzLmlzRGVmYXVsdE1hcCkge1xuICAgICAgY29uc3QgZGVmYXVsdE1hcCA9IHRoaXMuZ2V0RGVmYXVsdFdlYk1hcCgpXG4gICAgICBtYXBWaWV3T3B0aW9uID0ge1xuICAgICAgICBtYXA6IGRlZmF1bHRNYXAsXG4gICAgICAgIGNvbnRhaW5lcjogdGhpcy5tYXBDb250YWluZXIsXG4gICAgICAgIHZpZXdwb2ludDogdGhpcy5nZXRJbml0Vmlld1BvaW50Rm9yRGVmYXVsdFdlYk1hcCgpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHdlYk1hcCA9IGF3YWl0IHRoaXMuY3JlYXRlV2ViTWFwT3JXZWJTY2VuZUJ5RGF0YVNvdXJjZShkYXRhU291cmNlSW5mbylcblxuICAgICAgaWYgKGluaXRpYWxNYXBTdGF0ZSkge1xuICAgICAgICBtYXBWaWV3T3B0aW9uID0ge1xuICAgICAgICAgIG1hcDogd2ViTWFwLFxuICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5tYXBDb250YWluZXIsXG4gICAgICAgICAgdmlld3BvaW50OiBpbml0aWFsTWFwU3RhdGUgJiYgdGhpcy5nZW5lcmF0ZVZpZXdQb2ludEZyb21Jbml0aWFsTWFwU3RhdGUoaW5pdGlhbE1hcFN0YXRlKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXBWaWV3T3B0aW9uID0ge1xuICAgICAgICAgIG1hcDogd2ViTWFwLFxuICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5tYXBDb250YWluZXJcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5zZWxlY3Rpb25IaWdobGlnaHRDb2xvciB8fCBERUZBVUxUX0hJR0hMSUdIVF9DT0xPUlxuICAgICAgY29uc3QgaGlnaGxpZ2h0SGFsb0NvbG9yID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLnNlbGVjdGlvbkhpZ2hsaWdodEhhbG9Db2xvciB8fCBERUZBVUxUX0hJR0hMSUdIVF9IQUxPX0NPTE9SXG4gICAgICBtYXBWaWV3T3B0aW9uLmhpZ2hsaWdodE9wdGlvbnMgPSB7XG4gICAgICAgIGNvbG9yOiBuZXcgdGhpcy5Db2xvcihoaWdobGlnaHRDb2xvciksXG4gICAgICAgIGhhbG9Db2xvcjogbmV3IHRoaXMuQ29sb3IoaGlnaGxpZ2h0SGFsb0NvbG9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIG1hcFZpZXdPcHRpb24ucG9wdXAgPSB7XG4gICAgICBkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6IHRydWVcbiAgICB9XG5cbiAgICBtYXBWaWV3T3B0aW9uLmNvbnN0cmFpbnRzID0ge1xuICAgICAgLy8gc25hcFRvWm9vbTogdHJ1ZSBtZWFucyBpbnRlZ2VyIHpvb20sIGZhbHNlIG1lYW5zIGZsb2F0IHpvb21cbiAgICAgIC8vIFdlIG5lZWQgdG8gc2V0IHRoZSBpbml0aWFsIHZhbHVlIHRvIHRydWUgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgYW5kIGtlZXAgdGhlIHNhbWUgYmVoYXZpb3Igd2l0aCBNYXBWaWV3ZXJcbiAgICAgIC8vIEFmdGVyIG1hcCBpbml0ZWQsIHdlIHdpbGwgc2V0IHNuYXBUb1pvb20gdG8gZmFsc2UgdG8gZ2V0IHRoZSBiZXN0IHN5bmNocm9uaXphdGlvbiBiZXR3ZWVuIHR3byBtYXAgd2lkZ2V0c1xuICAgICAgc25hcFRvWm9vbTogdHJ1ZVxuICAgIH1cblxuICAgIC8vIFNldCB0aW1lWm9uZSB0byAnc3lzdGVtJyBmb3IgY29tcGF0aWJpbGl0eS5cbiAgICBtYXBWaWV3T3B0aW9uLnRpbWVab25lID0gJ3N5c3RlbSdcblxuICAgIGlmICghd2luZG93LmppbXVDb25maWcuaXNJbkJ1aWxkZXIpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5xdWVyeU9iamVjdFt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZF0pIHtcbiAgICAgICAgY29uc3QgZXh0ZW50U3RyID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMucXVlcnlPYmplY3RbdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWRdLnN1YnN0cignZXh0ZW50PScubGVuZ3RoKVxuICAgICAgICBsZXQgZXh0ZW50XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBleHRlbnQgPSBuZXcgdGhpcy5FeHRlbnQoSlNPTi5wYXJzZShleHRlbnRTdHIpKVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdCYWQgZXh0ZW50IFVSTCBwYXJhbWV0ZXIuJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleHRlbnQpIHtcbiAgICAgICAgICBtYXBWaWV3T3B0aW9uLmV4dGVudCA9IGV4dGVudFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcFZpZXdPcHRpb25cbiAgfVxuXG4gIGFzeW5jIGdldFNjZW5lVmlld09wdGlvblRvQ3JlYXRlU2NlbmVWaWV3IChkYXRhU291cmNlSW5mbzogTWFwYmFzZURhdGFTb3VyY2VJbmZvKTogUHJvbWlzZTxfX2VzcmkuU2NlbmVWaWV3UHJvcGVydGllcz4ge1xuICAgIGNvbnN0IHdlYlNjZW5lID0gYXdhaXQgdGhpcy5jcmVhdGVXZWJNYXBPcldlYlNjZW5lQnlEYXRhU291cmNlKGRhdGFTb3VyY2VJbmZvKVxuXG4gICAgY29uc3QgbWFwVmlld09wdGlvbjogX19lc3JpLlNjZW5lVmlld1Byb3BlcnRpZXMgPSB7XG4gICAgICBtYXA6IHdlYlNjZW5lLFxuICAgICAgY29udGFpbmVyOiB0aGlzLm1hcENvbnRhaW5lcixcbiAgICAgIHBvcHVwOiB7XG4gICAgICAgIGRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDogdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHdpZGdldENvbmZpZyA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZ1xuICAgIGNvbnN0IGluaXRpYWxNYXBTdGF0ZSA9IHdpZGdldENvbmZpZy5pbml0aWFsTWFwU3RhdGVcblxuICAgIGlmIChpbml0aWFsTWFwU3RhdGUpIHtcbiAgICAgIG1hcFZpZXdPcHRpb24udmlld3BvaW50ID0gaW5pdGlhbE1hcFN0YXRlICYmIHRoaXMuZ2VuZXJhdGVWaWV3UG9pbnRGcm9tSW5pdGlhbE1hcFN0YXRlKGluaXRpYWxNYXBTdGF0ZSlcbiAgICB9XG5cbiAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IHdpZGdldENvbmZpZy5zZWxlY3Rpb25IaWdobGlnaHRDb2xvciB8fCBERUZBVUxUX0hJR0hMSUdIVF9DT0xPUlxuICAgIGNvbnN0IGhpZ2hsaWdodEhhbG9Db2xvciA9IHdpZGdldENvbmZpZy5zZWxlY3Rpb25IaWdobGlnaHRIYWxvQ29sb3IgfHwgREVGQVVMVF9ISUdITElHSFRfSEFMT19DT0xPUlxuICAgIG1hcFZpZXdPcHRpb24uaGlnaGxpZ2h0T3B0aW9ucyA9IHtcbiAgICAgIGNvbG9yOiBuZXcgdGhpcy5Db2xvcihoaWdobGlnaHRDb2xvciksXG4gICAgICBoYWxvQ29sb3I6IG5ldyB0aGlzLkNvbG9yKGhpZ2hsaWdodEhhbG9Db2xvcilcbiAgICB9XG5cbiAgICBjb25zdCBzY2VuZVF1YWxpdHlNb2RlID0gd2lkZ2V0Q29uZmlnLnNjZW5lUXVhbGl0eU1vZGVcblxuICAgIGlmIChzY2VuZVF1YWxpdHlNb2RlICYmIHNjZW5lUXVhbGl0eU1vZGUgIT09IFNjZW5lUXVhbGl0eU1vZGUuYXV0bykge1xuICAgICAgbWFwVmlld09wdGlvbi5xdWFsaXR5UHJvZmlsZSA9IHNjZW5lUXVhbGl0eU1vZGVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXNlICdsb3cnIGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgIG1hcFZpZXdPcHRpb24ucXVhbGl0eVByb2ZpbGUgPSBTY2VuZVF1YWxpdHlNb2RlLmxvd1xuICAgIH1cblxuICAgIHJldHVybiBtYXBWaWV3T3B0aW9uXG4gIH1cblxuICBiaW5kTWFwQmFzZVZpZXdFdmVudCAodmlldzogTWFwYmFzZVZpZXcpIHtcbiAgICBpZiAodmlldykge1xuICAgICAgdGhpcy5yZWxlYXNlTWFwYmFzZVZpZXdFdmVudEhhbmRsZXModmlldylcblxuICAgICAgdmlldy5tYXBCYXNlVmlld0V2ZW50SGFuZGxlcy5jbGljayA9IHZpZXcub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnJlbGVhc2VIaWdoTGlnaHRIYW5kbGVzKHZpZXcpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGlzUmVhZHlUb0NyZWF0ZUppbXVNYXBWaWV3ICgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc0RlZmF1bHRNYXApIHtcbiAgICAgICAgLy8gRG9uJ3QgbmVlZCBkYXRhIHNvdXJjZSBpZiB1c2UgZGVmYXVsdCBtYXAuXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBEcyAmJiB0aGlzLm1hcERzLmlkID09PSB0aGlzLnByb3BzLmRhdGFTb3VyY2VJZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0SmltdU1hcFZpZXdGb1ZpZXcgKHZpZXc6IE1hcGJhc2VWaWV3KTogSmltdU1hcFZpZXcge1xuICAgIGNvbnN0IGppbXVNYXBWaWV3SWQgPSB2aWV3Py5kYXRhU291cmNlSW5mbz8uamltdU1hcFZpZXdJZFxuXG4gICAgaWYgKGppbXVNYXBWaWV3SWQpIHtcbiAgICAgIGNvbnN0IGppbXVNYXBWaWV3ID0gTWFwVmlld01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRKaW11TWFwVmlld0J5SWQoamltdU1hcFZpZXdJZClcblxuICAgICAgcmV0dXJuIGppbXVNYXBWaWV3XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNyZWF0ZUppbXVNYXBWaWV3ICgpIHtcbiAgICBpZiAoIXRoaXMuaXNSZWFkeVRvQ3JlYXRlSmltdU1hcFZpZXcoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgdmlldyA9IHRoaXMudmlld1xuXG4gICAgLy8gSWYgZGF0YVNvdXJjZUlkIGlzIG51bGwsIG1ha2Ugc3VyZSBpdCBjb252ZXJ0cyB0byBlbXB0eSBzdHJpbmcuXG4gICAgY29uc3QgZGF0YVNvdXJjZUlkID0gdGhpcy5wcm9wcy5kYXRhU291cmNlSWQgfHwgJydcblxuICAgIGNvbnN0IHVzZVVybEhhc2hMYXllcnNWaXNpYmlsaXR5ID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaXNSdW5BcHBNb2RlXG5cbiAgICBNYXBWaWV3TWFuYWdlci5nZXRJbnN0YW5jZSgpLmNyZWF0ZUppbXVNYXBWaWV3KHtcbiAgICAgIG1hcFdpZGdldElkOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCxcbiAgICAgIGRhdGFTb3VyY2VJZCxcbiAgICAgIHZpZXcsXG4gICAgICBpc0VuYWJsZVBvcHVwOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5jb25maWcgJiYgIXRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5kaXNhYmxlUG9wVXAsXG4gICAgICBtYXBWaWV3TWFuYWdlcjogTWFwVmlld01hbmFnZXIuZ2V0SW5zdGFuY2UoKSxcbiAgICAgIHVzZVVybEhhc2hMYXllcnNWaXNpYmlsaXR5XG4gICAgfSlcblxuICAgIHZpZXcud2hlbigoKSA9PiB7XG4gICAgICBjb25zdCBqaW11TWFwVmlld0lkID0gdmlldy5kYXRhU291cmNlSW5mby5qaW11TWFwVmlld0lkXG4gICAgICBjb25zdCBqaW11TWFwVmlldyA9IE1hcFZpZXdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0SmltdU1hcFZpZXdCeUlkKGppbXVNYXBWaWV3SWQpXG5cbiAgICAgIGlmIChqaW11TWFwVmlldykge1xuICAgICAgICBpZiAoamltdU1hcFZpZXcudmlldykge1xuICAgICAgICAgIGppbXVNYXBWaWV3LndoZW5KaW11TWFwVmlld0xvYWRlZCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFqaW11TWFwVmlldy52aWV3KSB7XG4gICAgICAgICAgICAgIE1hcFZpZXdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZGVzdHJveUppbXVNYXBWaWV3KGppbXVNYXBWaWV3SWQpXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZpZXdFeHBlY3RlZCh2aWV3KSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkppbXVNYXBWaWV3Q3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMub25KaW11TWFwVmlld0NyZWF0ZWQoamltdU1hcFZpZXcpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE1hcFZpZXdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZGVzdHJveUppbXVNYXBWaWV3KGppbXVNYXBWaWV3SWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZGVzdHJveUN1cnJlbnRNYXBiYXNlVmlldyAoKSB7XG4gICAgaWYgKHRoaXMudmlldykge1xuICAgICAgdGhpcy5kZXN0cm95TWFwYmFzZVZpZXcodGhpcy52aWV3KVxuICAgIH1cblxuICAgIC8vIE5vdGUsIGRvbid0IHNldCB0aGlzLm1hcERzIHRvIG51bGwgaGVyZS5cbiAgICAvLyBDb25zaWRlciB0aGlzIGNhc2U6XG4gICAgLy8gV2UgY3JlYXRlIGEgbmV3IE1hcGJhc2UgaW5zdGFuY2UsIG9uRGF0YVNvdXJjZUNyZWF0ZWQgY2FsbGJhY2sgaXMgcXVpY2tseSwgdGhlbiB3ZSBnZXQgdGhpcy5tYXBEcy5cbiAgICAvLyBUaGVuIGNvbXBvbmVudERpZE1vdW50IGlzIGludm9rZWQgZm9yIHNvbWUgcmVhc29uIChlLmcuIHRoaXMuaXNCYXNpY01vZHVsZXNMb2FkZWQgY2hhbmdlZCBmcm9tIGZhbHNlIHRvIHRydWUpLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QgdG8gZGVzdHJveSB0aGlzLnZpZXcuXG4gICAgLy8gU28sIGlmIHdlIHNldCB0aGlzLm1hcERzIHRvIG51bGwsIHdlIHdpbGwgbmV2ZXIgZ2V0IHRoaXMubWFwRHMsXG4gICAgLy8gYW5kIHRoaXMuaXNSZWFkeVRvQ3JlYXRlSmltdU1hcFZpZXcoKSBhbHdheXMgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIGNhbid0IGNyZWF0ZSBqaW11IG1hcCB2aWV3LlxuICAgIHRoaXMudmlldyA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lNYXBiYXNlVmlldyAodmlldzogTWFwYmFzZVZpZXcpIHtcbiAgICBpZiAodmlldykge1xuICAgICAgLy8gcmVsZWFzZSBoYW5kbGVzXG4gICAgICBpZiAodmlldy53YXRjaEludGVyYWN0aW5nSGFuZGxlKSB7XG4gICAgICAgIHZpZXcud2F0Y2hJbnRlcmFjdGluZ0hhbmRsZS5yZW1vdmUoKVxuICAgICAgICB2aWV3LndhdGNoSW50ZXJhY3RpbmdIYW5kbGUgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIGlmICh2aWV3LmV4dGVudFdhdGNoSGFuZGxlKSB7XG4gICAgICAgIHZpZXcuZXh0ZW50V2F0Y2hIYW5kbGUucmVtb3ZlKClcbiAgICAgICAgdmlldy5leHRlbnRXYXRjaEhhbmRsZSA9IG51bGxcbiAgICAgIH1cblxuICAgICAgaWYgKHZpZXcuZmF0YWxFcnJvcldhdGNoSGFuZGxlKSB7XG4gICAgICAgIHZpZXcuZmF0YWxFcnJvcldhdGNoSGFuZGxlLnJlbW92ZSgpXG4gICAgICAgIHZpZXcuZmF0YWxFcnJvcldhdGNoSGFuZGxlID0gbnVsbFxuICAgICAgfVxuXG4gICAgICBpZiAodmlldy5zdGF0aW9uYXJ5VGltZXJJZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodmlldy5zdGF0aW9uYXJ5VGltZXJJZClcbiAgICAgICAgdmlldy5zdGF0aW9uYXJ5VGltZXJJZCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZWxlYXNlSGlnaExpZ2h0SGFuZGxlcyh2aWV3KVxuXG4gICAgICB0aGlzLnJlbGVhc2VNYXBiYXNlVmlld0V2ZW50SGFuZGxlcyh2aWV3KVxuICAgIH1cblxuICAgIGNvbnN0IGppbXVNYXBWaWV3SWQgPSB2aWV3LmRhdGFTb3VyY2VJbmZvLmppbXVNYXBWaWV3SWRcblxuICAgIGlmIChqaW11TWFwVmlld0lkKSB7XG4gICAgICBNYXBWaWV3TWFuYWdlci5nZXRJbnN0YW5jZSgpLmRlc3Ryb3lKaW11TWFwVmlldyhqaW11TWFwVmlld0lkKVxuICAgIH1cblxuICAgIGlmICghdmlldy5kZXN0cm95ZWQpIHtcbiAgICAgIHZpZXcuZGVzdHJveSgpXG4gICAgfVxuICB9XG5cbiAgcmVsZWFzZUhpZ2hMaWdodEhhbmRsZXMgKHZpZXc6IE1hcGJhc2VWaWV3KSB7XG4gICAgaWYgKHZpZXcuaGlnaExpZ2h0SGFuZGxlcykge1xuICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZpZXcuaGlnaExpZ2h0SGFuZGxlcylcblxuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICB2aWV3LmhpZ2hMaWdodEhhbmRsZXNba2V5XS5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHZpZXcuaGlnaExpZ2h0SGFuZGxlcyA9IHt9XG4gIH1cblxuICByZWxlYXNlTWFwYmFzZVZpZXdFdmVudEhhbmRsZXMgKHZpZXc6IE1hcGJhc2VWaWV3KSB7XG4gICAgaWYgKHZpZXcubWFwQmFzZVZpZXdFdmVudEhhbmRsZXMpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2aWV3Lm1hcEJhc2VWaWV3RXZlbnRIYW5kbGVzKVxuXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIHZpZXcubWFwQmFzZVZpZXdFdmVudEhhbmRsZXNba2V5XS5yZW1vdmUoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHZpZXcubWFwQmFzZVZpZXdFdmVudEhhbmRsZXMgPSB7fVxuICB9XG5cbiAgLyoqXG4gICAqIG9uRGF0YVNvdXJjZUNyZWF0ZWQgYW5kIG9uQ3JlYXRlRGF0YVNvdXJjZUZhaWxlZCB3aWxsIG5vdCBpbnZva2VkIHdoZW4gdGhpcy5wcm9wcy5pc1dlYk1hcCBpcyB0cnVlXG4gICAqIEBwYXJhbSBkYXRhU291cmNlXG4gICAqL1xuICBvbkRhdGFTb3VyY2VDcmVhdGVkID0gKGRhdGFTb3VyY2U6IE1hcERhdGFTb3VyY2UpOiB2b2lkID0+IHtcbiAgICBpZiAoZGF0YVNvdXJjZS5pZCA9PT0gdGhpcy5wcm9wcy5kYXRhU291cmNlSWQpIHtcbiAgICAgIGNvbnN0IGlzRHNDcmVhdGVGYWlsZWRCZWZvcmUgPSB0aGlzLmNyZWF0ZUZhaWxlZERhdGFTb3VyY2VJZHNbdGhpcy5wcm9wcy5kYXRhU291cmNlSWRdXG4gICAgICBkZWxldGUgdGhpcy5jcmVhdGVGYWlsZWREYXRhU291cmNlSWRzW3RoaXMucHJvcHMuZGF0YVNvdXJjZUlkXVxuICAgICAgdGhpcy5tYXBEcyA9IGRhdGFTb3VyY2VcblxuICAgICAgaWYgKHRoaXMuaXNSZWFkeVRvQ3JlYXRlSmltdU1hcFZpZXcoKSkge1xuICAgICAgICB0aGlzLmNyZWF0ZUppbXVNYXBWaWV3KClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChpc0RzQ3JlYXRlRmFpbGVkQmVmb3JlICYmICF0aGlzLnZpZXcgJiYgIXRoaXMubWFwQ3JlYXRpbmdJbmZvICYmIHRoaXMuZXhwZWN0ZWREYXRhU291cmNlSW5mbyAmJiB0aGlzLmV4cGVjdGVkRGF0YVNvdXJjZUluZm8uZGF0YVNvdXJjZUlkID09PSBkYXRhU291cmNlLmlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGByZWNyZWF0ZSBtYXAgYmVjYXVzZSBkYXRhIHNvdXJjZSAke3RoaXMucHJvcHMuZGF0YVNvdXJjZUlkfSBpcyByZWNyZWF0ZWRgKVxuICAgICAgICB0aGlzLmNhY2hlTG9hZE1vZHVsZXNBbmRDcmVhdGVNYXBiYXNlVmlldyh0aGlzLmV4cGVjdGVkRGF0YVNvdXJjZUluZm8pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25DcmVhdGVEYXRhU291cmNlRmFpbGVkID0gKGVycik6IHZvaWQgPT4ge1xuICAgIGNvbnNvbGUud2Fybignb25DcmVhdGVEYXRhU291cmNlRmFpbGVkJywgZXJyKVxuICAgIHRoaXMubWFwRHMgPSBudWxsXG4gICAgY29uc3QgZHNJZCA9IHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkXG4gICAgdGhpcy5jcmVhdGVGYWlsZWREYXRhU291cmNlSWRzW2RzSWRdID0gdHJ1ZVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBtYXBMb2FkU3RhdHVzOiBNYXBMb2FkU3RhdHVzLkxvYWRFcnJvclxuICAgIH0sICgpID0+IHtcbiAgICAgIHRoaXMucHJvcHMub25NYXBMb2FkZWQoZHNJZCwgTWFwTG9hZFN0YXR1cy5Mb2FkRXJyb3IpXG4gICAgfSlcbiAgfVxuXG4gIGdldFJlc3RvcmVEYXRhRnJvbU1TICgpOiBNYXBiYXNlUmVzdG9yZURhdGEge1xuICAgIGNvbnN0IGJhc2ljS2V5ID0gdGhpcy5nZXRSZXN0b3JlRGF0YUtleSgpXG4gICAgY29uc3QgcmVzdG9yZURhdGEgPSBNdXRhYmxlU3RvcmVNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3RhdGVWYWx1ZShbdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQsICdyZXN0b3JlRGF0YScsIGJhc2ljS2V5XSkgYXMgTWFwYmFzZVJlc3RvcmVEYXRhXG4gICAgcmV0dXJuIHJlc3RvcmVEYXRhXG4gIH1cblxuICB1cGRhdGVSZXN0b3JlRGF0YVRvTVMgKHJlc3RvcmVEYXRhOiBNYXBiYXNlUmVzdG9yZURhdGEpIHtcbiAgICBjb25zdCBiYXNpY0tleSA9IHRoaXMuZ2V0UmVzdG9yZURhdGFLZXkoKVxuICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLCBgcmVzdG9yZURhdGEuJHtiYXNpY0tleX1gLCByZXN0b3JlRGF0YSlcbiAgfVxuXG4gIGdldFJlc3RvcmVEYXRhS2V5ICgpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWR9LXJlc3RvcmVEYXRhLSR7dGhpcy5wcm9wcy5kYXRhU291cmNlSWR9YFxuICB9XG5cbiAgLy8gVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzeW5jIHZpZXdwb2ludCBiZXR3ZWVuIHR3byBtYXBiYXNlIG9mIHNhbWUgbWFwIHdpZGdldC5cbiAgc2V0Vmlld1BvaW50ID0gKHZpZXdQb2ludDogX19lc3JpLlZpZXdwb2ludCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLnZpZXcgJiYgdmlld1BvaW50KSB7XG4gICAgICB0aGlzLnZpZXcudmlld3BvaW50ID0gdmlld1BvaW50LmNsb25lKClcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHN5bmMgdmlld3BvaW50IGJldHdlZW4gdHdvIG1hcGJhc2Ugb2Ygc2FtZSBtYXAgd2lkZ2V0LlxuICBnZXRWaWV3UG9pbnQgPSAoKTogX19lc3JpLlZpZXdwb2ludCA9PiB7XG4gICAgcmV0dXJuIHRoaXMudmlldyAmJiB0aGlzLnZpZXcudmlld3BvaW50ID8gdGhpcy52aWV3LnZpZXdwb2ludC5jbG9uZSgpIDogbnVsbFxuICB9XG5cbiAgZ2V0TWFwTG9hZFN0YXR1cyA9ICgpOiBNYXBMb2FkU3RhdHVzID0+IHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5tYXBMb2FkU3RhdHVzXG4gIH1cblxuICBnZXRWaWV3VHlwZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiB0aGlzLmdldERzSnNvbkZyb21Ec0lkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkKS50eXBlXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdXNlciBjbGlja3MgdGhlIG1hcCB0aHVibmFpbCBpbiBtYXAgc2V0dGluZyBwYWdlIGFuZCBjaGFuZ2UgdGhlIGNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlELlxuICAgKiBAcGFyYW0gdXNlQW1pbmF0aW9uXG4gICAqL1xuICBhc3luYyBnb0hvbWUgKHVzZUFtaW5hdGlvbj86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuZ2V0RHNKc29uRnJvbURzSWQodGhpcy5wcm9wcy5kYXRhU291cmNlSWQpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB3aWRnZXRzID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZy53aWRnZXRzXG5cbiAgICBpZiAodGhpcy52aWV3ICYmIHdpZGdldHNbdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWRdKSB7XG4gICAgICBjb25zdCBpbml0Vmlld1BvaW50ID0gdGhpcy5nZXRNYXBCYXNlSW5pdFZpZXdQb2ludCgpXG5cbiAgICAgIGlmIChpbml0Vmlld1BvaW50KSB7XG4gICAgICAgIC8vIFRPRE86IG1heWJlIG5lZWQgdG8gc2V0IHZpZXcuY29uc3RyYWludHMuc25hcFRvWm9vbSB0byB0cnVlIGJlZm9yZSBjYWxsIHZpZXcuZ29UbygpIGFuZCByZXNldCBpdCB0byBmYWxzZSBhZnRlciB2aWV3LmdvVG8oKSBpcyBkb25lLlxuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmdvVG8oaW5pdFZpZXdQb2ludCwge1xuICAgICAgICAgIGFuaW1hdGU6IHVzZUFtaW5hdGlvblxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldE1hcEJhc2VJbml0Vmlld1BvaW50ICgpOiBfX2VzcmkuVmlld3BvaW50IHtcbiAgICBpZiAodGhpcy5wcm9wcy5pc0RlZmF1bHRNYXApIHtcbiAgICAgIHJldHVybiB0aGlzLmdldEluaXRWaWV3UG9pbnRGb3JEZWZhdWx0V2ViTWFwKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaW5pdGlhbE1hcFN0YXRlID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLmluaXRpYWxNYXBTdGF0ZVxuXG4gICAgICBpZiAoaW5pdGlhbE1hcFN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlVmlld1BvaW50RnJvbUluaXRpYWxNYXBTdGF0ZShpbml0aWFsTWFwU3RhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAgICAgY29uc3QgbWFwID0gdGhpcy52aWV3Lm1hcCBhcyBfX2VzcmkuV2ViTWFwIHwgX19lc3JpLldlYlNjZW5lXG4gICAgICAgICAgcmV0dXJuIG1hcD8uaW5pdGlhbFZpZXdQcm9wZXJ0aWVzPy52aWV3cG9pbnQ/LmNsb25lKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvcm1hdE1lc3NhZ2UgKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IGlkLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzW2lkXSB9KVxuICB9XG5cbiAgaGFuZGxlRGlzYWJsZVdoZWVsICgpIHtcbiAgICB0aGlzLndpZGdldENvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndpZGdldENvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nXG4gICAgfSwgNTApXG4gIH1cblxuICBnZXRNYXBTd2l0Y2hGb3JFcnJvck1hcCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNdWx0aVNvdXJjZU1hcENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsoeyBpc1Nob3dNYXBTd2l0Y2hCdG4sIGRhdGFTb3VyY2VJZHMsIGFjdGl2ZURhdGFTb3VyY2VJZCwgc3dpdGNoTWFwIH0pID0+IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9J21hcHN3aXRjaC1jb250YWluZXInIHN0eWxlPXt7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IGlzU2hvd01hcFN3aXRjaEJ0biA/ICdibG9jaycgOiAnbm9uZScsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogdGhpcy5wcm9wcy53aWR0aEJyZWFrcG9pbnQgPT09ICd4c21hbGwnID8gMTAgOiAwXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgb25DbGljaz17KGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzd2l0Y2hNYXAoKSB9fSBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIGVzcmktd2lkZ2V0LS1idXR0b24nPlxuICAgICAgICAgICAgICA8SWNvbiBpY29uPXtFeGNoYW5nZX0gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J21hcHN3aXRjaC1pY29uJyAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L011bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cblxuICBxdWVyeUV4dGVudEZyb21TaW5nbGVMYXllclF1ZXJ5UGFyYW1zID0gKGRhdGFTb3VyY2VJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZGF0YVNvdXJjZSA9IHRoaXMuZHNNYW5hZ2VyLmdldERhdGFTb3VyY2UoZGF0YVNvdXJjZUlkKSBhcyBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgY29uc3QgcXVlcnlQYXJhbXM6IFNxbFF1ZXJ5UGFyYW1zID0gZGF0YVNvdXJjZS5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKVxuICAgIGxldCBsYXllck9iamVjdFByb21pc2VcblxuICAgIGlmIChkYXRhU291cmNlPy5sYXllcikge1xuICAgICAgbGF5ZXJPYmplY3RQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGRhdGFTb3VyY2UubGF5ZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVyT2JqZWN0UHJvbWlzZSA9IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpLnRoZW4oKGxheWVyT2JqZWN0KSA9PiBQcm9taXNlLnJlc29sdmUobGF5ZXJPYmplY3QpKVxuICAgIH1cblxuICAgIHJldHVybiBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9RdWVyeScsXG4gICAgICAnZXNyaS9HcmFwaGljJyxcbiAgICAgICdlc3JpL2dlb21ldHJ5L1BvaW50J1xuICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICBjb25zdCBbUXVlcnksIEdyYXBoaWMsIFBvaW50XSA9IG1vZHVsZXNcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFF1ZXJ5KClcbiAgICAgIHF1ZXJ5LndoZXJlID0gcXVlcnlQYXJhbXM/LndoZXJlXG5cbiAgICAgIHJldHVybiBsYXllck9iamVjdFByb21pc2UudGhlbihsYXllck9iamVjdCA9PiB7XG4gICAgICAgIHJldHVybiBsYXllck9iamVjdC5xdWVyeUV4dGVudChxdWVyeSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgIGNvbnN0IGV4dGVudENlbnRlciA9IHJlc3VsdD8uZXh0ZW50Py5jZW50ZXJcbiAgICAgICAgICBjb25zdCBleHRlbnQgPSByZXN1bHQ/LmV4dGVudFxuICAgICAgICAgIGxldCBzaW5nbGVQb2ludEdyYXBoaWNcbiAgICAgICAgICBpZiAocmVzdWx0Py5jb3VudCA9PT0gMSAmJiAobGF5ZXJPYmplY3QuZ2VvbWV0cnlUeXBlID09PSAncG9pbnQnKSAmJiBleHRlbnRDZW50ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHtcbiAgICAgICAgICAgICAgeDogZXh0ZW50Q2VudGVyLngsXG4gICAgICAgICAgICAgIHk6IGV4dGVudENlbnRlci55LFxuICAgICAgICAgICAgICBzcGF0aWFsUmVmZXJlbmNlOiBleHRlbnQuc3BhdGlhbFJlZmVyZW5jZVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgc2luZ2xlUG9pbnRHcmFwaGljID0gbmV3IEdyYXBoaWMoeyBnZW9tZXRyeTogcG9pbnQgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICAgICAgc2luZ2xlUG9pbnRHcmFwaGljOiBzaW5nbGVQb2ludEdyYXBoaWMsXG4gICAgICAgICAgICBjb3VudDogcmVzdWx0Py5jb3VudCxcbiAgICAgICAgICAgIGxheWVyOiBsYXllck9iamVjdFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHF1ZXJ5RXh0ZW50RnJvbVF1ZXJ5UGFyYW1zID0gKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIGRhdGFTb3VyY2VJZHM6IHN0cmluZ1tdLCB1c2VEYXRhU291cmNlczogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT4pID0+IHtcbiAgICAvL2NvbnN0IGRhdGFTb3VyY2UgPSB0aGlzLmRzTWFuYWdlci5nZXREYXRhU291cmNlKGRhdGFTb3VyY2VJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgIC8vY29uc3QgcXVlcnlQYXJhbXM6IFNxbFF1ZXJ5UGFyYW1zID0gZGF0YVNvdXJjZS5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKVxuICAgIGNvbnN0IHVzZURlZmF1bHRFeHRlbnRPZkN1cnJlbnRWaWV3ID0gIXVzZURhdGFTb3VyY2VzLnNvbWUodXNlRGF0YVNvdXJjZSA9PiB7XG4gICAgICBjb25zdCBkYXRhU291cmNlID0gdGhpcy5kc01hbmFnZXIuZ2V0RGF0YVNvdXJjZSh1c2VEYXRhU291cmNlLmRhdGFTb3VyY2VJZCkgYXMgRmVhdHVyZUxheWVyRGF0YVNvdXJjZVxuICAgICAgY29uc3QgcXVlcnlQYXJhbXM6IFNxbFF1ZXJ5UGFyYW1zID0gZGF0YVNvdXJjZS5nZXRSdW50aW1lUXVlcnlQYXJhbXMoKVxuICAgICAgLy8gdXNlIGRlZmF1bHQgZXh0ZW50IGlmIGFsbCBtZXJnZWQgU1FMcyBvbiBkYXRhIHNvdXJjZSBpcyByZW12b3ZlZC5cbiAgICAgIGNvbnN0IGhhc1F1ZXJ5V2hlcmUgPSBxdWVyeVBhcmFtcz8ud2hlcmUgJiYgcXVlcnlQYXJhbXMud2hlcmUgIT09ICcxPTEnXG5cbiAgICAgIGlmIChoYXNRdWVyeVdoZXJlKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKHVzZURlZmF1bHRFeHRlbnRPZkN1cnJlbnRWaWV3KSB7XG4gICAgICBjb25zdCBpbml0Vmlld1BvaW50ID0gdGhpcy5nZXRNYXBCYXNlSW5pdFZpZXdQb2ludCgpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgdmlld3BvaW50OiBpbml0Vmlld1BvaW50LFxuICAgICAgICB1c2VEZWZhdWx0RXh0ZW50T2ZDdXJyZW50VmlldzogdHJ1ZSxcbiAgICAgICAgc2luZ2xlUG9pbnRHcmFwaGljOiBudWxsLFxuICAgICAgICBjb3VudDogMixcbiAgICAgICAgbGF5ZXI6IG51bGxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW50UmVzdWx0UHJvbWlzZXMgPSBbXVxuICAgIGRhdGFTb3VyY2VJZHMuZm9yRWFjaChkYXRhU291cmNlSWQgPT4ge1xuICAgICAgZXh0ZW50UmVzdWx0UHJvbWlzZXMucHVzaCh0aGlzLnF1ZXJ5RXh0ZW50RnJvbVNpbmdsZUxheWVyUXVlcnlQYXJhbXMoZGF0YVNvdXJjZUlkKSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGV4dGVudFJlc3VsdFByb21pc2VzKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgbGV0IGZ1bGxFeHRlbnQgPSBudWxsXG4gICAgICBsZXQgY291bnQgPSAwXG4gICAgICBpZiAocmVzdWx0cz8ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiByZXN1bHRzWzBdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgICAgICBpZiAocmVzdWx0LmV4dGVudCkge1xuICAgICAgICAgICAgZnVsbEV4dGVudCA9IGZ1bGxFeHRlbnQgPyBmdWxsRXh0ZW50LnVuaW9uKHJlc3VsdC5leHRlbnQpIDogcmVzdWx0LmV4dGVudFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb3VudCA9IGNvdW50ICsgcmVzdWx0LmNvdW50XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXh0ZW50OiBmdWxsRXh0ZW50LFxuICAgICAgICAgIHNpbmdsZVBvaW50R3JhcGhpYzogbnVsbCxcbiAgICAgICAgICBjb3VudDogY291bnQsXG4gICAgICAgICAgbGF5ZXI6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogaGFuZGxlIG1lc3NhZ2UvYWN0aW9uLlxuICAgKi9cbiAgaGFuZGxlQWN0aW9uIChtdXRhYmxlU3RhdGVQcm9wczogQWN0aW9uUmVsYXRlZFByb3BzLCBtYXBCYXNlVmlldzogTWFwYmFzZVZpZXcsIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykge1xuICAgIGlmICghbWFwQmFzZVZpZXcgfHwgbWFwQmFzZVZpZXcuZGVzdHJveWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBjb25zdW1lIG11dGFibGVTdGF0ZVByb3BzLnpvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZVxuICAgIHRoaXMuaGFuZGxlQWN0aW9uRm9yWm9vbVRvRmVhdHVyZUFjdGlvblZhbHVlKG11dGFibGVTdGF0ZVByb3BzLCBtYXBCYXNlVmlldylcblxuICAgIC8vIGNvbnN1bWUgbXV0YWJsZVN0YXRlUHJvcHMucGFuVG9BY3Rpb25WYWx1ZVxuICAgIHRoaXMuaGFuZGxlQWN0aW9uRm9yUGFuVG9BY3Rpb25WYWx1ZShtdXRhYmxlU3RhdGVQcm9wcywgbWFwQmFzZVZpZXcpXG5cbiAgICAvLyBjb25zdW1lIG11dGFibGVTdGF0ZVByb3BzLm5ld0ZlYXR1cmVTZXRBY3Rpb25WYWx1ZVxuICAgIHRoaXMuaGFuZGxlQWN0aW9uRm9yTmV3RmVhdHVyZVNldEFjdGlvblZhbHVlKG11dGFibGVTdGF0ZVByb3BzLCBtYXBCYXNlVmlldylcblxuICAgIC8vIGNvbnN1bWUgbXV0YWJsZVN0YXRlUHJvcHMuY2hhbmdlZEZlYXR1cmVTZXRBY3Rpb25WYWx1ZVxuICAgIHRoaXMuaGFuZGxlQWN0aW9uRm9yQ2hhbmdlZEZlYXR1cmVTZXRBY3Rpb25WYWx1ZShtdXRhYmxlU3RhdGVQcm9wcywgbWFwQmFzZVZpZXcpXG5cbiAgICAvLyBjb25zdW1lIG11dGFibGVTdGF0ZVByb3BzLnNlbGVjdEZlYXR1cmVBY3Rpb25WYWx1ZVxuICAgIHRoaXMuaGFuZGxlQWN0aW9uRm9yU2VsZWN0RmVhdHVyZUFjdGlvblZhbHVlKG11dGFibGVTdGF0ZVByb3BzLCBtYXBCYXNlVmlldylcblxuICAgIC8vIGNvbnN1bWUgZmxhc2hBY3Rpb25WYWx1ZSBhbmQgZmlsdGVyQWN0aW9uVmFsdWVcbiAgICB0aGlzLmhhbmRsZUFjdGlvbkZvckZsYXNoQWN0aW9uVmFsdWVBbmRGaWx0ZXJBY3Rpb25WYWx1ZShtdXRhYmxlU3RhdGVQcm9wcywgbWFwQmFzZVZpZXcpXG5cbiAgICAvLyBoYW5kbGUgc2hvdyBkYXRhIG9uIG1hcCBhY3Rpb25cbiAgICB0aGlzLmhhbmRsZUFjdGlvbkZvclNob3dPbk1hcERhdGFzKG11dGFibGVTdGF0ZVByb3BzLCBqaW11TWFwVmlldylcblxuICAgIC8vIGhhbmRsZSBhZGQgZGF0YSB0byBtYXAgYWN0aW9uXG4gICAgdGhpcy5oYW5kbGVBY3Rpb25Gb3JBZGRUb01hcERhdGFzKG11dGFibGVTdGF0ZVByb3BzLCBqaW11TWFwVmlldylcbiAgfVxuXG4gIGdldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNPZlZpZXcgKHZpZXc6IE1hcGJhc2VWaWV3KTogc3RyaW5nW10ge1xuICAgIGxldCByZXN1bHQ6IHN0cmluZ1tdID0gW11cblxuICAgIGlmICh2aWV3KSB7XG4gICAgICBjb25zdCByZWxhdGVkV2lkZ2V0SWRzID0gdmlldy5leHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzIHx8IFtdXG4gICAgICAvLyBXZSBuZWVkIHRvIGNsb25lIHRoZSByZWxhdGVkV2lkZ2V0SWRzLlxuICAgICAgcmVzdWx0ID0gcmVsYXRlZFdpZGdldElkcy5zbGljZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc2V0RXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkc0ZvclZpZXcgKHZpZXc6IE1hcGJhc2VWaWV3LCBfcmVsYXRlZFdpZGdldElkczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBpZiAodmlldykge1xuICAgICAgY29uc3QgcmVsYXRlZFdpZGdldElkcyA9IF9yZWxhdGVkV2lkZ2V0SWRzIHx8IFtdXG4gICAgICAvLyBXZSBuZWVkIHRvIGNsb25lIHRoZSByZWxhdGVkV2lkZ2V0SWRzLlxuICAgICAgdmlldy5leHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzID0gcmVsYXRlZFdpZGdldElkcy5zbGljZSgpXG4gICAgfVxuICB9XG5cbiAgdHJ5RmF0YWxFcnJvclJlY292ZXJ5ICh2aWV3OiBNYXBiYXNlVmlldykge1xuICAgIGlmICh2aWV3KSB7XG4gICAgICB2aWV3LnRyeUZhdGFsRXJyb3JSZWNvdmVyeSgpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQWN0aW9uRm9yWm9vbVRvRmVhdHVyZUFjdGlvblZhbHVlIChtdXRhYmxlU3RhdGVQcm9wczogQWN0aW9uUmVsYXRlZFByb3BzLCBtYXBCYXNlVmlldzogTWFwYmFzZVZpZXcpOiB2b2lkIHtcbiAgICBpZiAoIW11dGFibGVTdGF0ZVByb3BzLnpvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZU1lc3NhZ2VUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgY29uc3Qgem9vbVRvRmVhdHVyZUFjdGlvblZhbHVlID0gbXV0YWJsZVN0YXRlUHJvcHMuem9vbVRvRmVhdHVyZUFjdGlvblZhbHVlXG5cbiAgICBjb25zdCByZWxhdGVkV2lkZ2V0SWRzOiBzdHJpbmdbXSA9IG11dGFibGVTdGF0ZVByb3BzLnpvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZS5yZWxhdGVkV2lkZ2V0cyB8fCBbXVxuXG4gICAgaWYgKHJlbGF0ZWRXaWRnZXRJZHMgJiYgcmVsYXRlZFdpZGdldElkcy5pbmNsdWRlcyh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCkpIHtcbiAgICAgIC8vIGF2b2lkIGVuZGxlc3MgbG9vcFxuICAgICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ3pvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZScsIG51bGwpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlID0gem9vbVRvRmVhdHVyZUFjdGlvblZhbHVlLnZhbHVlXG5cbiAgICAgIGlmICh6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS50eXBlID09PSAnem9vbS10by1leHRlbnQnKSB7XG4gICAgICAgIC8vIFpvb21Ub0V4dGVudEludGVybmFsVmFsdWVcblxuICAgICAgICBjb25zdCBub3dUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgICAgIG1hcEJhc2VWaWV3Lmxhc3Rab29tVG9FeHRlbnRUaW1lID0gbm93VGltZVxuXG4gICAgICAgIC8vIG1hcCB3aWRnZXQxIGV4dGVudCBjaGFnbmVzIGFuZCBtYXAgd2lkZ2V0MiBuZWVkcyB0byBzeW5jIHRoZSBleHRlbnQgYnkgbWVzc2FnZSBhY3Rpb24uXG4gICAgICAgIC8vIEZpbmFsbHksIGl0IGNhbGxzIHZpZXcuZ29UbyhleHRlbnQpXG5cbiAgICAgICAgLy8gQ29uc2lkZXIgdGhpcyBjYXNlOlxuICAgICAgICAvLyBPbiBhcHAgbG9hZDpcbiAgICAgICAgLy8gMS4gQm90aCBtYXAgd2lkZ2V0MSBhbmQgbWFwIHdpZGdldDIgc2V0IHpvb20tdG8gYWN0aW9uIGZvciBlYWNoIG90aGVyLlxuICAgICAgICAvLyAyLiBUaGUgaW5pdGlhbCBleHRlbnQgb2YgbWFwIHdpZGdldDEgaXMgZXh0ZW50MSBhbmQgdGhlIGluaXRpYWwgZXh0ZW50IG9mIG1hcCB3aWRnZXQyIGlzIGV4dGVudDIuXG4gICAgICAgIC8vIDMuIG1hcCB3aWRnZXQxIGZpcnN0IHB1Ymxpc2ggZXh0ZW50LWNoYW5nZSBtZXNzYWdlIGFmdGVyIHRoZSB2aWV3IGlzIHJlYWR5LlxuICAgICAgICAvLyA0LiBUaGVuIG1hcCB3aWRnZXQyIHB1Ymxpc2ggZXh0ZW50LWNoYW5nZSBtZXNzYWdlLlxuICAgICAgICAvLyA1LiBUaGVuIG1hcCB3aWRnZXQyIHJlY2VpdmUgbWVzc2FnZSBmcm9tIG1hcCB3aWRnZXQxIGFuZCBjYWxsIGhhbmRsZUFjdGlvbi5cbiAgICAgICAgLy8gNi4gVGhlbiBtYXAgd2lkZ2V0MSByZWNlaXZlIG1lc3NhZ2UgZnJvbSBtYXAgd2lkZ2V0MiBhbmQgY2FsbCBoYW5kbGVBY3Rpb24uXG4gICAgICAgIC8vIEF0IGxhc3QsIHRoZSBleHRlbnQgb2YgbWFwIHdpZGdldDEgaXMgZXh0ZW50MiBhbmQgdGhlIGV4dGVudCBvZiBtYXAgd2lkZ2V0MiBpcyBleHRlbnQxLiBUaGlzIGlzIG5vdCB0aGUgZXhwZWN0ZWQgcmVzdWx0LlxuICAgICAgICAvLyBUbyBhdm9pZCB0aGUgYWJvdmUgY2FzZSwgd2UgbmVlZCB0byBzdG9wIHRoZSBzdGVwNiBiZWNhdXNlIG1hcCB3aWRnZXQxIGZpcnN0IHB1Ymxpc2ggbWVzc2FnZS5cbiAgICAgICAgbGV0IGlzQWJvdmVDYXNlID0gZmFsc2VcblxuICAgICAgICBpZiAobWFwQmFzZVZpZXcuZmlyc3RQdWJsaXNoRXh0ZW50Q2hhbmdlVGltZSkge1xuICAgICAgICAgIGlmICgobm93VGltZSAtIG1hcEJhc2VWaWV3LmZpcnN0UHVibGlzaEV4dGVudENoYW5nZVRpbWUpIDw9IDIwMDApIHtcbiAgICAgICAgICAgIGlmIChtYXBCYXNlVmlldy5maXJzdFB1Ymxpc2hFeHRlbnRDaGFuZ2VUaW1lIDw9IHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnB1Ymxpc2hUaW1lKSB7XG4gICAgICAgICAgICAgIGlmICghem9vbVRvRmVhdHVyZUludGVybmFsVmFsdWUuaW50ZXJhY2l2ZSkge1xuICAgICAgICAgICAgICAgIC8vICMxNDM5MSwgaWYgZXh0ZW50TWVzc2FnZS5pbnRlcmFjaXZlIGlzIHRydWUsIG1lYW5zIHRoZSBleHRlbnQgY29tZXMgZnJvbSBhIGludGVyYWN0aXZpbmcgbWFwIGFuZCBuZWVkcyB0byBzeW5jIHZpZXdwb2ludCB3aXRoIHRoZSBpbnRlcmFjdGl2aW5nIG1hcFxuICAgICAgICAgICAgICAgIGlmIChpc1R3b1dpZGdldHNNdXR1YWxseUV4dGVudENoYW5nZSh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCwgem9vbVRvRmVhdHVyZUludGVybmFsVmFsdWUucHVibGlzaFdpZGdldElkKSkge1xuICAgICAgICAgICAgICAgICAgaXNBYm92ZUNhc2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbWFwQmFzZVZpZXcgaXMgdGhlIGxhc3QgaW50ZXJhY3RpdmUgdmlldywgaXQgbWVhbnMgbWFwQmFzZVZpZXcgaXMgdGhlIGV4dGVudC1jaGFuZ2Ugc291cmNlLCB3ZSBzaG91bGQgaWdub3JlIHRoZSB6b29tLXRvLWV4dGVudCBtZXNzYWdlLlxuICAgICAgICBpZiAoIWlzQWJvdmVDYXNlICYmIG1hcEJhc2VWaWV3ICE9PSBNYXBCYXNlLmxhc3RJbnRlcmFjaXZlVmlldykge1xuICAgICAgICAgIGNvbnN0IHZpZXdwb2ludCA9IHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnZpZXdwb2ludFxuICAgICAgICAgIGNvbnN0IGV4dGVudCA9IHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLmV4dGVudFxuICAgICAgICAgIGNvbnN0IHN0YXRpb25hcnkgPSB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS5zdGF0aW9uYXJ5XG5cbiAgICAgICAgICB0aGlzLnNldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNGb3JWaWV3KG1hcEJhc2VWaWV3LCByZWxhdGVkV2lkZ2V0SWRzKVxuXG4gICAgICAgICAgY29uc3Qgdmlld1NSID0gbWFwQmFzZVZpZXcuc3BhdGlhbFJlZmVyZW5jZVxuXG4gICAgICAgICAgLy8gdmlld3BvaW50IGhhcyBoaWdoIHByaW9yaXR5IHRoYW4gZXhlbnQsIGJlY2F1c2UgaXQgY29udGFpbnMgbW9yZSBpbmZvcm1hdGlvblxuICAgICAgICAgIGlmICh2aWV3cG9pbnQpIHtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB2aWV3IGJ5IHZpZXdwb2ludFxuICAgICAgICAgICAgaWYgKGlzTmVlZFByb2plY3RWaWV3cG9pbnQodmlld3BvaW50LCB2aWV3U1IpKSB7XG4gICAgICAgICAgICAgIGlmIChzdGF0aW9uYXJ5KSB7XG4gICAgICAgICAgICAgICAgLy8gb25seSBwcm9qZWN0IHRoZSB2aWV3cG9pbnQgd2hlbiBtYXAgaXMgc3RhdGljXG4gICAgICAgICAgICAgICAgcHJvamVjdFZpZXdwb2ludCh2aWV3cG9pbnQsIHZpZXdTUikudGhlbigocHJvamVjdGVkVmlld3BvaW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAvLyBDb25zaWRlciB0aGlzIGNhc2UoIzE2NDIzKTpcbiAgICAgICAgICAgICAgICAgIC8vIDEuIGhhbmRsZUFjdGlvbkZvclpvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZSByZWNlaXZlIG1lc3NhZ2UgYXQgdGltZTEsIHRoZSBtZXNzYWdlIHZpZXdwb2ludCBpcyB2aWV3cG9pbnQxXG4gICAgICAgICAgICAgICAgICAvLyAyLiB0aGUgdmlld3BvaW50IG5lZWRzIHRvIGJlIHByb2plY3QsIHRoZW4gc2VuZCBodHRwIHJlcXVlc3QgdG8gcHJvamVjdCB0aGUgdmlld3BvaW50MSwgdGhpcyBhc3luYyBzdGVwIG1heWJlIHRha2UgbG9uZyB0aW1lXG4gICAgICAgICAgICAgICAgICAvLyAzLiB0aGVuIEppbXVNYXBWaWV3IG5lZWRzIHRvIHVwZGF0ZSB2aWV3cG9pbnQgdG8gdmlld3BvaW50MiBieSB1cmwgZGF0YV9pZCAoc3luYyBzdGVwKSBpbiBKaW11TWFwVmlldy5tb3ZlRmVhdHVyZVRvQ2VudGVyKCkgYXQgdGltZTJcbiAgICAgICAgICAgICAgICAgIC8vIDQuIHRoZW4gdGhlIGFzeW5jIHN0ZXAyIGlzIGRvbmUgYXQgdGltZTMsIGFuZCB1ZHBhdGUgdmlld3BvaW50IGJ5IHRoZSBwcm9qZWN0ZWQgdmlld3BvaW50MSwgZmluYWxseSB0aGUgdmlld3BvaW50IGlzIHRoZSBwcm9qZWN0ZWQgdmlld3BvaW50MVxuICAgICAgICAgICAgICAgICAgLy8gVGhlIHN0ZXA0IGlzIHdyb25nLCBiZWNhdXNlIHZpZXdwb2ludDIgb2Ygc3RlcDMgaXMgdGhlIG5ldyBvbmUsIGFuZCB0aGUgcHJvamVjdGVkIHZpZXdwb2ludDEgaXMgc3RhbGUuXG4gICAgICAgICAgICAgICAgICAvLyBUbyBhdm9pZCB0aGlzIGNhc2UsIHdlIHNob3VsZCBjaGVjayBwcm9qZWN0ZWRWaWV3cG9pbnQgaXMgZnJlc2ggb3Igc3RhbGUuXG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUHJvamVjdGVkVmlld3BvaW50U3RhbGUgPSBtYXBCYXNlVmlldy5yZWNlaXZlTWVzc2FnZVRpbWVPZkxhc3RWaWV3VXBkYXRlICYmIG1hcEJhc2VWaWV3LnJlY2VpdmVNZXNzYWdlVGltZU9mTGFzdFZpZXdVcGRhdGUgPiByZWNlaXZlTWVzc2FnZVRpbWVcblxuICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2plY3RlZFZpZXdwb2ludFN0YWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcEJhc2VWaWV3LnZpZXdwb2ludCA9IHByb2plY3RlZFZpZXdwb2ludFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG1hcEJhc2VWaWV3LnZpZXdwb2ludCA9IHZpZXdwb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBuZWVkIHRvIHJlbW92ZSB0aGUgZm9sbG93aW5nIGV4dGVudCBsb2dpY1xuICAgICAgICAgICAgLy8gdXBkYXRlIHZpZXcgYnkgZXh0ZW50XG4gICAgICAgICAgICBpZiAoaXNOZWVkUHJvamVjdFNwYXRpYWxSZWZlcmVuY2UoZXh0ZW50LnNwYXRpYWxSZWZlcmVuY2UsIHZpZXdTUikpIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXRpb25hcnkpIHtcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHByb2plY3QgdGhlIGV4dGVudCB3aGVuIG1hcCBpcyBzdGF0aWNcbiAgICAgICAgICAgICAgICBwcm9qZWN0R2VvbWV0cmllcyhbZXh0ZW50XSwgdmlld1NSKS50aGVuKChwcm9qZWN0ZWRHZW9tZXRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRFeHRlbnQgPSBwcm9qZWN0ZWRHZW9tZXRyaWVzWzBdXG4gICAgICAgICAgICAgICAgICBtYXBCYXNlVmlldy5nb1RvKHByb2plY3RlZEV4dGVudClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtYXBCYXNlVmlldy5nb1RvKGV4dGVudCwgeyBhbmltYXRlOiBmYWxzZSB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS50eXBlID09PSAnem9vbS10by1xdWVyeS1wYXJhbXMnKSB7XG4gICAgICAgIC8vIFpvb21Ub1F1ZXJ5UGFyYW1zSW50ZXJuYWxWYWx1ZVxuXG4gICAgICAgIHRoaXMucXVlcnlFeHRlbnRGcm9tUXVlcnlQYXJhbXMobWFwQmFzZVZpZXcsIHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLmRhdGFTb3VyY2VJZHMsIHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnVzZURhdGFTb3VyY2VzKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICBsZXQgdGFyZ2V0XG4gICAgICAgICAgaWYgKHJlc3VsdC5jb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuY291bnQgPT09IDEgJiYgcmVzdWx0Py5zaW5nbGVQb2ludEdyYXBoaWMpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHtcbiAgICAgICAgICAgICAgZ3JhcGhpY3M6IFtyZXN1bHQ/LnNpbmdsZVBvaW50R3JhcGhpY10sXG4gICAgICAgICAgICAgIGxheWVyOiByZXN1bHQ/LmxheWVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHJlc3VsdD8uZXh0ZW50XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5zZXRFeHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzRm9yVmlldyhtYXBCYXNlVmlldywgcmVsYXRlZFdpZGdldElkcylcblxuICAgICAgICAgIC8vIEJlY2F1c2Ugb2YgJ3pvb21Ub1V0aWxzJyBkb2VzIG5vdCBzdXBwb3J0ICd2aWV3cG9pbnQnLCB0ZW1wb3JhcnkgY29kZSBmb3IgdXNpbmcgZGVmYXVsdCB2aWV3cG9pbnQgb2Ygc2NlbmVWaWV3LlxuICAgICAgICAgIGlmIChyZXN1bHQudXNlRGVmYXVsdEV4dGVudE9mQ3VycmVudFZpZXcpIHtcbiAgICAgICAgICAgIG1hcEJhc2VWaWV3LmdvVG8ocmVzdWx0LnZpZXdwb2ludClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgem9vbVRvVXRpbHMuem9vbVRvKG1hcEJhc2VWaWV3LCB0YXJnZXQsIHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnpvb21Ub09wdGlvbilcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnR5cGUgPT09ICd6b29tLXRvLWFycmF5LWdyYXBoaWNzJykge1xuICAgICAgICAvLyBab29tVG9BcnJheUdyYXBoaWNzSW50ZXJuYWxWYWx1ZVxuXG4gICAgICAgIHRoaXMuc2V0RXh0ZW50Q2hhbmdlUmVsYXRlZFdpZGdldElkc0ZvclZpZXcobWFwQmFzZVZpZXcsIHJlbGF0ZWRXaWRnZXRJZHMpXG5cbiAgICAgICAgem9vbVRvVXRpbHMuem9vbVRvKG1hcEJhc2VWaWV3LCB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS5hcnJheUZlYXR1cmVzLCB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS56b29tVG9PcHRpb24pXG4gICAgICB9IGVsc2UgaWYgKHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnR5cGUgPT09ICd6b29tLXRvLWxheWVycycpIHtcbiAgICAgICAgLy8gWm9vbVRvTGF5ZXJzSW50ZXJuYWxWYWx1ZVxuXG4gICAgICAgIGNvbnN0IGRhdGFTb3VyY2VJZHMgPSB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS5kYXRhU291cmNlSWRzXG4gICAgICAgIGdldExheWVyc0Zyb21EYXRhU291cmNlSWRzKGRhdGFTb3VyY2VJZHMpLnRoZW4obGF5ZXJzID0+IHtcbiAgICAgICAgICB0aGlzLnNldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNGb3JWaWV3KG1hcEJhc2VWaWV3LCByZWxhdGVkV2lkZ2V0SWRzKVxuICAgICAgICAgIHpvb21Ub1V0aWxzLnpvb21UbyhtYXBCYXNlVmlldywgbGF5ZXJzLCB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS56b29tVG9PcHRpb24pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB6b29tLXRvLWdyYXBoaWNzXG4gICAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSB0aGlzLmRzTWFuYWdlci5nZXREYXRhU291cmNlKHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLmRhdGFTb3VyY2VJZCkgYXMgdW5rbm93biBhcyBKU0FQSUxheWVyTWl4aW4gJiBGZWF0dXJlTGF5ZXJEYXRhU291cmNlXG4gICAgICAgIGxldCBsYXllclByb21pc2VcblxuICAgICAgICBpZiAoZGF0YVNvdXJjZT8ubGF5ZXIpIHtcbiAgICAgICAgICBsYXllclByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZGF0YVNvdXJjZS5sYXllcilcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhU291cmNlPy5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKSB7XG4gICAgICAgICAgbGF5ZXJQcm9taXNlID0gZGF0YVNvdXJjZS5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXllclByb21pc2UgPSBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgICAgICAgfVxuXG4gICAgICAgIGxheWVyUHJvbWlzZS50aGVuKGxheWVyID0+IHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbEdyYXBoaWNzID0gem9vbVRvRmVhdHVyZUludGVybmFsVmFsdWUuZmVhdHVyZXMgfHwgW11cblxuICAgICAgICAgIHByb2Nlc3Nab29tVG9GZWF0dXJlcyhtYXBCYXNlVmlldywgbGF5ZXIsIG9yaWdpbmFsR3JhcGhpY3MpLnRoZW4oaGFuZGxlZEdyYXBoaWNzID0+IHtcbiAgICAgICAgICAgIGxldCB6b29tVG9UYXJnZXQgPSBudWxsXG5cbiAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICB6b29tVG9UYXJnZXQgPSB7XG4gICAgICAgICAgICAgICAgbGF5ZXIsXG4gICAgICAgICAgICAgICAgZ3JhcGhpY3M6IGhhbmRsZWRHcmFwaGljc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB6b29tVG9UYXJnZXQgPSBoYW5kbGVkR3JhcGhpY3NcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS56b29tVG9PcHRpb24pIHtcbiAgICAgICAgICAgICAgem9vbVRvRmVhdHVyZUludGVybmFsVmFsdWUuem9vbVRvT3B0aW9uID0ge31cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRFeHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzRm9yVmlldyhtYXBCYXNlVmlldywgcmVsYXRlZFdpZGdldElkcylcbiAgICAgICAgICAgIHpvb21Ub0ZlYXR1cmVJbnRlcm5hbFZhbHVlLnpvb21Ub09wdGlvbi5xdWVyeVBhcmFtcyA9IChkYXRhU291cmNlPy5nZXRDdXJyZW50UXVlcnlQYXJhbXMgJiYgZGF0YVNvdXJjZS5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKSkgfHwgJydcbiAgICAgICAgICAgIHpvb21Ub1V0aWxzLnpvb21UbyhtYXBCYXNlVmlldywgem9vbVRvVGFyZ2V0LCB6b29tVG9GZWF0dXJlSW50ZXJuYWxWYWx1ZS56b29tVG9PcHRpb24pXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ3pvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZScsIG51bGwpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQWN0aW9uRm9yUGFuVG9BY3Rpb25WYWx1ZSAobXV0YWJsZVN0YXRlUHJvcHM6IEFjdGlvblJlbGF0ZWRQcm9wcywgbWFwQmFzZVZpZXc6IE1hcGJhc2VWaWV3KTogdm9pZCB7XG4gICAgaWYgKCFtdXRhYmxlU3RhdGVQcm9wcy5wYW5Ub0FjdGlvblZhbHVlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCByZWxhdGVkV2lkZ2V0SWRzOiBzdHJpbmdbXSA9IG11dGFibGVTdGF0ZVByb3BzLnBhblRvQWN0aW9uVmFsdWUucmVsYXRlZFdpZGdldHMgfHwgW11cbiAgICBjb25zdCBwYW5Ub1R5cGUgPSBtdXRhYmxlU3RhdGVQcm9wcy5wYW5Ub0FjdGlvblZhbHVlLnZhbHVlPy50eXBlXG5cbiAgICBpZiAocmVsYXRlZFdpZGdldElkcyAmJiByZWxhdGVkV2lkZ2V0SWRzLmluY2x1ZGVzKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkKSkge1xuICAgICAgLy8gYXZvaWQgZW5kbGVzcyBsb29wXG4gICAgICB0aGlzLnByb3BzLm9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkLCAncGFuVG9BY3Rpb25WYWx1ZScsIG51bGwpXG4gICAgfSBlbHNlIGlmIChwYW5Ub1R5cGUgPT09ICdwYW4tdG8tcXVlcnktcGFyYW1zJykge1xuICAgICAgY29uc3QgcGFuVG9WYWx1ZSA9IG11dGFibGVTdGF0ZVByb3BzLnBhblRvQWN0aW9uVmFsdWUudmFsdWVcbiAgICAgIHRoaXMucXVlcnlFeHRlbnRGcm9tUXVlcnlQYXJhbXMobWFwQmFzZVZpZXcsIHBhblRvVmFsdWUuZGF0YVNvdXJjZUlkcywgcGFuVG9WYWx1ZS51c2VEYXRhU291cmNlcykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIEJlY2F1c2Ugb2YgJ3BhblRvR2VvbWV0cnknIG1ldGhvZCBkb2VzIG5vdCBzdXBwb3J0ICd2aWV3cG9pbnQnLCB0ZW1wb3JhcnkgY29kZSBmb3IgdXNpbmcgZGVmYXVsdCB2aWV3cG9pbnQgb2Ygc2NlbmVWaWV3LlxuICAgICAgICBpZiAocmVzdWx0LnVzZURlZmF1bHRFeHRlbnRPZkN1cnJlbnRWaWV3KSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0R2VvbWV0cnkgPSByZXN1bHQ/LnZpZXdwb2ludD8uY2FtZXJhPy5wb3NpdGlvbiB8fCByZXN1bHQ/LnZpZXdwb2ludD8udGFyZ2V0R2VvbWV0cnlcbiAgICAgICAgICB0aGlzLnBhblRvR2VvbWV0cnkoW3RhcmdldEdlb21ldHJ5XSwgbWFwQmFzZVZpZXcsIHJlbGF0ZWRXaWRnZXRJZHMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wYW5Ub0dlb21ldHJ5KFtyZXN1bHQ/LmV4dGVudF0sIG1hcEJhc2VWaWV3LCByZWxhdGVkV2lkZ2V0SWRzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAocGFuVG9UeXBlID09PSAncGFuLXRvLWxheWVyJykge1xuICAgICAgY29uc3QgcGFuVG9WYWx1ZSA9IG11dGFibGVTdGF0ZVByb3BzLnBhblRvQWN0aW9uVmFsdWUudmFsdWVcbiAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSB0aGlzLmRzTWFuYWdlci5nZXREYXRhU291cmNlKHBhblRvVmFsdWUuZGF0YVNvdXJjZUlkKSBhcyB1bmtub3duIGFzIEpTQVBJTGF5ZXJNaXhpbiAmIEZlYXR1cmVMYXllckRhdGFTb3VyY2VcbiAgICAgIGxldCBsYXllclByb21pc2VcblxuICAgICAgaWYgKGRhdGFTb3VyY2U/LmxheWVyKSB7XG4gICAgICAgIGxheWVyUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShkYXRhU291cmNlLmxheWVyKVxuICAgICAgfSBlbHNlIGlmIChkYXRhU291cmNlPy5jcmVhdGVKU0FQSUxheWVyQnlEYXRhU291cmNlKSB7XG4gICAgICAgIGxheWVyUHJvbWlzZSA9IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYXllclByb21pc2UgPSBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgICAgIH1cblxuICAgICAgbGF5ZXJQcm9taXNlLnRoZW4obGF5ZXIgPT4ge1xuICAgICAgICBsZXQgcXVlcnlQYXJhbXMgPSBudWxsXG5cbiAgICAgICAgaWYgKGRhdGFTb3VyY2UpIHtcbiAgICAgICAgICBpZiAoZGF0YVNvdXJjZS5nZXRDdXJyZW50UXVlcnlQYXJhbXMpIHtcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gZGF0YVNvdXJjZS5nZXRDdXJyZW50UXVlcnlQYXJhbXMoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHpvb21Ub1V0aWxzLmxheWVyRXh0ZW50KG1hcEJhc2VWaWV3LCBsYXllciwgcXVlcnlQYXJhbXMpLnRoZW4obGF5ZXJFeHRlbnQgPT4ge1xuICAgICAgICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgICAgICAgdGhpcy5wYW5Ub0dlb21ldHJ5KFtsYXllckV4dGVudF0sIG1hcEJhc2VWaWV3LCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAocGFuVG9UeXBlID09PSAncGFuLXRvLWxheWVycycpIHtcbiAgICAgIGNvbnN0IHBhblRvVmFsdWUgPSBtdXRhYmxlU3RhdGVQcm9wcy5wYW5Ub0FjdGlvblZhbHVlLnZhbHVlXG4gICAgICBjb25zdCBkYXRhU291cmNlSWRzID0gcGFuVG9WYWx1ZS5kYXRhU291cmNlSWRzXG4gICAgICBnZXRMYXllcnNGcm9tRGF0YVNvdXJjZUlkcyhkYXRhU291cmNlSWRzKS50aGVuKGxheWVycyA9PiB7XG4gICAgICAgIGNvbnN0IGV4dGVudFByb21pc2VzID0gW11cbiAgICAgICAgbGF5ZXJzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgZXh0ZW50UHJvbWlzZXMucHVzaCh6b29tVG9VdGlscy5sYXllckV4dGVudChtYXBCYXNlVmlldywgbGF5ZXIpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBsZXQgZnVsbEV4dGVudCA9IG51bGxcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGV4dGVudFByb21pc2VzKS50aGVuKGV4dGVudHMgPT4ge1xuICAgICAgICAgIGV4dGVudHMuZm9yRWFjaChleHRlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgICBmdWxsRXh0ZW50ID0gZnVsbEV4dGVudCA/IGZ1bGxFeHRlbnQudW5pb24oZXh0ZW50KSA6IGV4dGVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKGZ1bGxFeHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGFuVG9HZW9tZXRyeShbZnVsbEV4dGVudF0sIG1hcEJhc2VWaWV3LCBbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAocGFuVG9UeXBlID09PSAncGFuLXRvLWdlb21ldHJpZXMnKSB7XG4gICAgICBjb25zdCBwYW5Ub1ZhbHVlID0gbXV0YWJsZVN0YXRlUHJvcHMucGFuVG9BY3Rpb25WYWx1ZS52YWx1ZVxuICAgICAgdGhpcy5wYW5Ub0dlb21ldHJ5KHBhblRvVmFsdWUuZ2VvbWV0cmllcywgbWFwQmFzZVZpZXcsIHJlbGF0ZWRXaWRnZXRJZHMpXG4gICAgfSBlbHNlIGlmIChwYW5Ub1R5cGUgPT09ICdwYW4tdG8tZXh0ZW50Jykge1xuICAgICAgLy8gbWFwIHdpZGdldDEgZXh0ZW50IGNoYW5nZXMgYW5kIG1hcCB3aWRnZXQyIG5lZWRzIHRvIHN5bmMgdGhlIGV4dGVudCBieSBtZXNzYWdlIGFjdGlvbi5cbiAgICAgIC8vIEZpbmFsbHksIGl0IGNhbGxzIHZpZXcuZ29UbyhleHRlbnQuY2VudGVyKS5cblxuICAgICAgLy8gQ29uc2lkZXIgdGhpcyBjYXNlOlxuICAgICAgLy8gMS4gQm90aCBtYXAgd2lkZ2V0MSBhbmQgbWFwIHdpZGdldDIgc2V0IHBhbi10byBhY3Rpb24gZm9yIGVhY2ggb3RoZXIuXG4gICAgICAvLyAyLiBUaGUgaW5pdGlhbCBleHRlbnQgb2YgbWFwIHdpZGdldDEgaXMgZXh0ZW50MSBhbmQgdGhlIGluaXRpYWwgZXh0ZW50IG9mIG1hcCB3aWRnZXQyIGlzIGV4dGVudDIuXG4gICAgICAvLyAzLiBtYXAgd2lkZ2V0MSBmaXJzdCBwdWJsaXNoIGV4dGVudC1jaGFuZ2UgbWVzc2FnZSBhZnRlciB0aGUgdmlldyBpcyByZWFkeS5cbiAgICAgIC8vIDQuIFRoZW4gbWFwIHdpZGdldDIgcHVibGlzaCBleHRlbnQtY2hhbmdlIG1lc3NhZ2UuXG4gICAgICAvLyA1LiBUaGVuIG1hcCB3aWRnZXQyIHJlY2VpdmUgbWVzc2FnZSBmcm9tIG1hcCB3aWRnZXQxIGFuZCBjYWxsIGhhbmRsZUFjdGlvbi5cbiAgICAgIC8vIDYuIFRoZW4gbWFwIHdpZGdldDEgcmVjZWl2ZSBtZXNzYWdlIGZyb20gbWFwIHdpZGdldDIgYW5kIGNhbGwgaGFuZGxlQWN0aW9uLlxuICAgICAgLy8gQXQgbGFzdCwgdGhlIGV4dGVudCBvZiBtYXAgd2lkZ2V0MSBpcyBleHRlbnQyIGFuZCB0aGUgZXh0ZW50IG9mIG1hcCB3aWRnZXQyIGlzIGV4dGVudDEuIFRoaXMgaXMgbm90IHRoZSBleHBlY3RlZCByZXN1bHQuXG4gICAgICAvLyBUbyBhdm9pZCB0aGUgYWJvdmUgY2FzZSwgd2UgbmVlZCB0byBzdG9wIHRoZSBzdGVwNiBiZWNhdXNlIG1hcCB3aWRnZXQxIGZpcnN0IHB1Ymxpc2ggbWVzc2FnZS5cbiAgICAgIGxldCBpc0Fib3ZlQ2FzZSA9IGZhbHNlXG4gICAgICBjb25zdCBub3dUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgICBpZiAobWFwQmFzZVZpZXcuZmlyc3RQdWJsaXNoRXh0ZW50Q2hhbmdlVGltZSkge1xuICAgICAgICBpZiAoKG5vd1RpbWUgLSBtYXBCYXNlVmlldy5maXJzdFB1Ymxpc2hFeHRlbnRDaGFuZ2VUaW1lKSA8PSAyMDAwKSB7XG4gICAgICAgICAgaWYgKG1hcEJhc2VWaWV3LmZpcnN0UHVibGlzaEV4dGVudENoYW5nZVRpbWUgPD0gbXV0YWJsZVN0YXRlUHJvcHMucGFuVG9BY3Rpb25WYWx1ZS52YWx1ZS5wdWJsaXNoVGltZSkge1xuICAgICAgICAgICAgaWYgKGlzVHdvV2lkZ2V0c011dHVhbGx5RXh0ZW50Q2hhbmdlKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLCBtdXRhYmxlU3RhdGVQcm9wcy5wYW5Ub0FjdGlvblZhbHVlLnZhbHVlLnB1Ymxpc2hXaWRnZXRJZCkpIHtcbiAgICAgICAgICAgICAgaXNBYm92ZUNhc2UgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnNpZGVyIHRoaXMgY2FzZTpcbiAgICAgIC8vIDEuIFdlIGhhdmUgNCBtYXAgd2lkZ2V0cy4gSGVyZSBhcmUgdGhlIGFjdGlvbnMuXG4gICAgICAvLyAyLiBXaWRnZXQxIC0+IHpvb20gdG8gLT4gV2lkZ2V0MiAtPiB6b29tIHRvIC0+IFdpZGdldDRcbiAgICAgIC8vIDMuIFdpZGdldDEgLT4gem9vbSB0byAtPiBXaWRnZXQzIC0+IHBhbiB0byAtPiBXaWRnZXQ0XG4gICAgICAvLyA0LiBXZSBtb3ZlIHRoZSBtYXAgb2Ygd2lkZ2V0MSwgZmluYWxseSB3aWRnZXQ0IHdpbGwgcmVjZWl2ZSB6b29tVG8gYW5kIHBhblRvIGFjdGlvbnMgc2VyaWFsbHksIGxpa2Ugem9vbVRvLCBwYW5Ubywgem9vbVRvLCBwYW5UbywgLi4uXG4gICAgICAvLyA1LiBTdGVwNCB3aWxsIHJlc3VsdCBpbiB3aWRnZXQ0J3MgbWFwIHZpZXcganVtcGluZy5cbiAgICAgIC8vIDYuIFRvIGF2b2lkIHRoaXMgY2FzZSwgd2UgbmVlZCB0byBzdG9wIGV4ZWN1dGluZyBwYW5UbyBhY3Rpb24gaWYgem9vbVRvIGFjdGlvbiBpcyBleGVjdXRlZCByZWNlbnRseS5cbiAgICAgIGxldCBpc1Bhblpvb21Db25mbGljdENhc2UgPSBmYWxzZVxuXG4gICAgICBpZiAobWFwQmFzZVZpZXcubGFzdFpvb21Ub0V4dGVudFRpbWUpIHtcbiAgICAgICAgLy8gQnkgdGVzdCwgdGhlIGJpZ2dlc3QgZGVsdGEgdGltZSBpcyBhYm91dCAyMDBtcyBpbiBtb3N0IGNhc2VzLCBidXQgaXQgaXMgc2FmZSB0byB1c2UgYSBiaWdnZXIgb25lLlxuICAgICAgICBpZiAoKG5vd1RpbWUgLSBtYXBCYXNlVmlldy5sYXN0Wm9vbVRvRXh0ZW50VGltZSkgPD0gNTAwKSB7XG4gICAgICAgICAgaXNQYW5ab29tQ29uZmxpY3RDYXNlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG1hcEJhc2VWaWV3IGlzIHRoZSBsYXN0IGludGVyYWN0aXZlIHZpZXcsIGl0IG1lYW5zIG1hcEJhc2VWaWV3IGlzIHRoZSBleHRlbnQtY2hhbmdlIHNvdXJjZSwgd2Ugc2hvdWxkIGlnbm9yZSB0aGUgcGFuLXRvLWV4dGVudCBtZXNzYWdlLlxuICAgICAgaWYgKCFpc0Fib3ZlQ2FzZSAmJiAhaXNQYW5ab29tQ29uZmxpY3RDYXNlICYmIG1hcEJhc2VWaWV3ICE9PSBNYXBCYXNlLmxhc3RJbnRlcmFjaXZlVmlldykge1xuICAgICAgICB0aGlzLnNldEV4dGVudENoYW5nZVJlbGF0ZWRXaWRnZXRJZHNGb3JWaWV3KG1hcEJhc2VWaWV3LCByZWxhdGVkV2lkZ2V0SWRzKVxuICAgICAgICBjb25zdCBwYW5Ub1ZhbHVlID0gbXV0YWJsZVN0YXRlUHJvcHMucGFuVG9BY3Rpb25WYWx1ZS52YWx1ZVxuICAgICAgICBjb25zdCBleHRlbnQgPSBwYW5Ub1ZhbHVlLmdlb21ldHJpZXNbMF1cbiAgICAgICAgY29uc3QgZXh0ZW50Q2VudGVyID0gZXh0ZW50LmNlbnRlclxuICAgICAgICBjb25zdCBzdGF0aW9uYXJ5ID0gcGFuVG9WYWx1ZS5zdGF0aW9uYXJ5XG4gICAgICAgIGNvbnN0IHZpZXdTUiA9IG1hcEJhc2VWaWV3LnNwYXRpYWxSZWZlcmVuY2VcblxuICAgICAgICBpZiAoaXNOZWVkUHJvamVjdFNwYXRpYWxSZWZlcmVuY2UoZXh0ZW50Q2VudGVyLnNwYXRpYWxSZWZlcmVuY2UsIHZpZXdTUikpIHtcbiAgICAgICAgICBpZiAoc3RhdGlvbmFyeSkge1xuICAgICAgICAgICAgLy8gb25seSBwcm9qZWN0IHRoZSBleHRlbnQgd2hlbiBtYXAgaXMgc3RhdGljXG4gICAgICAgICAgICBwcm9qZWN0R2VvbWV0cmllcyhbZXh0ZW50Q2VudGVyXSwgdmlld1NSKS50aGVuKChwcm9qZWN0ZWRHZW9tZXRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb2plY3RlZENlbnRlciA9IHByb2plY3RlZEdlb21ldHJpZXNbMF1cbiAgICAgICAgICAgICAgbWFwQmFzZVZpZXcuZ29Ubyhwcm9qZWN0ZWRDZW50ZXIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBtYXBCYXNlVmlldy5nb1RvKGV4dGVudENlbnRlciwgeyBhbmltYXRlOiBmYWxzZSB9KVxuICAgICAgICAgIG1hcEJhc2VWaWV3LmNlbnRlciA9IGV4dGVudENlbnRlclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ3BhblRvQWN0aW9uVmFsdWUnLCBudWxsKVxuICB9XG5cbiAgcGFuVG9HZW9tZXRyeSAob3JpZ2luYWxHZW9tZXRyaWVzOiBfX2VzcmkuR2VvbWV0cnlbXSwgbWFwQmFzZVZpZXc6IE1hcGJhc2VWaWV3LCByZWxhdGVkV2lkZ2V0SWRzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIHByb2plY3RHZW9tZXRyaWVzKG9yaWdpbmFsR2VvbWV0cmllcywgbWFwQmFzZVZpZXcuc3BhdGlhbFJlZmVyZW5jZSkudGhlbigocHJvamVjdGVkR2VvbWV0cmllcykgPT4ge1xuICAgICAgdGhpcy5zZXRFeHRlbnRDaGFuZ2VSZWxhdGVkV2lkZ2V0SWRzRm9yVmlldyhtYXBCYXNlVmlldywgcmVsYXRlZFdpZGdldElkcylcbiAgICAgIG1hcFBhbnRvKG1hcEJhc2VWaWV3LCBwcm9qZWN0ZWRHZW9tZXRyaWVzKVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVBY3Rpb25Gb3JOZXdGZWF0dXJlU2V0QWN0aW9uVmFsdWUgKG11dGFibGVTdGF0ZVByb3BzOiBBY3Rpb25SZWxhdGVkUHJvcHMsIG1hcEJhc2VWaWV3OiBNYXBiYXNlVmlldyk6IHZvaWQge1xuICAgIGlmIChtdXRhYmxlU3RhdGVQcm9wcy5uZXdGZWF0dXJlU2V0QWN0aW9uVmFsdWUgJiYgIW11dGFibGVTdGF0ZVByb3BzLm5ld0ZlYXR1cmVTZXRBY3Rpb25WYWx1ZS5wcm9taXNlKSB7XG4gICAgICBjb25zdCBjcmVhdGVOZXdGZWF0dXJlbGF5ZXJQcm9taXNlID0gY3JlYXRlTmV3RmVhdHVyZWxheWVyKG1hcEJhc2VWaWV3LCBtdXRhYmxlU3RhdGVQcm9wcy5uZXdGZWF0dXJlU2V0QWN0aW9uVmFsdWUudmFsdWUpXG4gICAgICBpZiAoY3JlYXRlTmV3RmVhdHVyZWxheWVyUHJvbWlzZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkLCAnbmV3RmVhdHVyZVNldEFjdGlvblZhbHVlLnByb21pc2UnLCBjcmVhdGVOZXdGZWF0dXJlbGF5ZXJQcm9taXNlKVxuXG4gICAgICAgIGNyZWF0ZU5ld0ZlYXR1cmVsYXllclByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ25ld0ZlYXR1cmVTZXRBY3Rpb25WYWx1ZScsIG51bGwpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkLCAnbmV3RmVhdHVyZVNldEFjdGlvblZhbHVlJywgbnVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVBY3Rpb25Gb3JDaGFuZ2VkRmVhdHVyZVNldEFjdGlvblZhbHVlIChtdXRhYmxlU3RhdGVQcm9wczogQWN0aW9uUmVsYXRlZFByb3BzLCBtYXBCYXNlVmlldzogTWFwYmFzZVZpZXcpOiB2b2lkIHtcbiAgICBpZiAobXV0YWJsZVN0YXRlUHJvcHMuY2hhbmdlZEZlYXR1cmVTZXRBY3Rpb25WYWx1ZSkge1xuICAgICAgdXBkYXRlRmVhdHVyZWxheWVyKG1hcEJhc2VWaWV3LCBtdXRhYmxlU3RhdGVQcm9wcy5jaGFuZ2VkRmVhdHVyZVNldEFjdGlvblZhbHVlKVxuICAgICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ2NoYW5nZWRGZWF0dXJlU2V0QWN0aW9uVmFsdWUnLCBudWxsKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUFjdGlvbkZvclNlbGVjdEZlYXR1cmVBY3Rpb25WYWx1ZSAobXV0YWJsZVN0YXRlUHJvcHM6IEFjdGlvblJlbGF0ZWRQcm9wcywgbWFwQmFzZVZpZXc6IE1hcGJhc2VWaWV3KTogdm9pZCB7XG4gICAgaWYgKG11dGFibGVTdGF0ZVByb3BzLnNlbGVjdEZlYXR1cmVBY3Rpb25WYWx1ZSkge1xuICAgICAgbWFwQmFzZVZpZXcuY2xvc2VQb3B1cCgpXG5cbiAgICAgIHRoaXMucmVsZWFzZUhpZ2hMaWdodEhhbmRsZXMobWFwQmFzZVZpZXcpXG5cbiAgICAgIGNvbnN0IHNlbGVjdEZlYXR1cmVIYW5kbGUgPSBzZWxlY3RGZWF0dXJlKG1hcEJhc2VWaWV3LCBtdXRhYmxlU3RhdGVQcm9wcy5zZWxlY3RGZWF0dXJlQWN0aW9uVmFsdWUpXG4gICAgICBpZiAoc2VsZWN0RmVhdHVyZUhhbmRsZSkge1xuICAgICAgICBtYXBCYXNlVmlldy5oaWdoTGlnaHRIYW5kbGVzW3NlbGVjdEZlYXR1cmVIYW5kbGUubGF5ZXJJZF0gPSBzZWxlY3RGZWF0dXJlSGFuZGxlLmhhbmRsZVxuICAgICAgfVxuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCh0aGlzLnByb3BzLmRhdGFTb3VyY2VJZCwgJ3NlbGVjdEZlYXR1cmVBY3Rpb25WYWx1ZScsIG51bGwpXG4gICAgICB9LCA1MDApXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQWN0aW9uRm9yRmxhc2hBY3Rpb25WYWx1ZUFuZEZpbHRlckFjdGlvblZhbHVlIChtdXRhYmxlU3RhdGVQcm9wczogQWN0aW9uUmVsYXRlZFByb3BzLCBtYXBCYXNlVmlldzogTWFwYmFzZVZpZXcpOiB2b2lkIHtcbiAgICBjb25zdCBtdXRhYmxlU3RhdGVQcm9wc0tleXMgPSBPYmplY3Qua2V5cyhtdXRhYmxlU3RhdGVQcm9wcylcbiAgICAvLyBXSFk6IHdoeSB1c2UgYXJyYXkuc29tZSgpIGhlcmUgPyB0aGUgY2FsbGJhY2sgYWx3YXlzIHJldHVybiBmYWxzZVxuICAgIG11dGFibGVTdGF0ZVByb3BzS2V5cy5zb21lKGFjdGlvbktleSA9PiB7XG4gICAgICBjb25zdCBqaW11TWFwVmlld0lkID0gbWFwQmFzZVZpZXcuZGF0YVNvdXJjZUluZm8uamltdU1hcFZpZXdJZFxuICAgICAgY29uc3QgdGVtcEppbXVNYXBWaWV3ID0gTWFwVmlld01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRKaW11TWFwVmlld0J5SWQoamltdU1hcFZpZXdJZClcblxuICAgICAgLy8gaGFuZGxlIGZsYXNoIGFjdGlvblxuICAgICAgaWYgKGFjdGlvbktleS5pbmRleE9mKCdmbGFzaEFjdGlvblZhbHVlLScpID09PSAwICYmIG11dGFibGVTdGF0ZVByb3BzW2FjdGlvbktleV0pIHtcbiAgICAgICAgbXV0YWJsZVN0YXRlUHJvcHNbYWN0aW9uS2V5XS5xdWVyeVNRTCAmJiBmbGFzaEZlYXR1cmVzQnlRdWVyeSh0ZW1wSmltdU1hcFZpZXcsIG11dGFibGVTdGF0ZVByb3BzW2FjdGlvbktleV0ubGF5ZXJEYXRhU291cmNlSWQsIG11dGFibGVTdGF0ZVByb3BzW2FjdGlvbktleV0ucXVlcnlTUUwpXG4gICAgICAgIHRoaXMucHJvcHMub25NdXRhYmxlU3RhdGVQcm9wc0NoYW5nZWQodGhpcy5wcm9wcy5kYXRhU291cmNlSWQsIGFjdGlvbktleSwgbnVsbClcbiAgICAgIH1cblxuICAgICAgLy8gaGFuZGxlIGZpbHRlciBhY3Rpb25cbiAgICAgIGlmIChhY3Rpb25LZXkuaW5kZXhPZignZmlsdGVyQWN0aW9uVmFsdWUtJykgPT09IDAgJiYgbXV0YWJsZVN0YXRlUHJvcHNbYWN0aW9uS2V5XSkge1xuICAgICAgICBtdXRhYmxlU3RhdGVQcm9wc1thY3Rpb25LZXldLnF1ZXJ5U1FMPy5sZW5ndGggPj0gMCAmJiBmaWx0ZXJGZWF0dXJlc0J5UXVlcnkodGVtcEppbXVNYXBWaWV3LCBtdXRhYmxlU3RhdGVQcm9wc1thY3Rpb25LZXldLmxheWVyRGF0YVNvdXJjZUlkLCBtdXRhYmxlU3RhdGVQcm9wc1thY3Rpb25LZXldLnF1ZXJ5U1FMKVxuICAgICAgICB0aGlzLnByb3BzLm9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkKHRoaXMucHJvcHMuZGF0YVNvdXJjZUlkLCBhY3Rpb25LZXksIG51bGwpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVBY3Rpb25Gb3JTaG93T25NYXBEYXRhcyAobXV0YWJsZVN0YXRlUHJvcHM6IEFjdGlvblJlbGF0ZWRQcm9wcywgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KTogdm9pZCB7XG4gICAgaWYgKG11dGFibGVTdGF0ZVByb3BzLnNob3dPbk1hcERhdGFzKSB7XG4gICAgICBqaW11TWFwVmlldy5kcmF3RGF0YU9uTWFwKG11dGFibGVTdGF0ZVByb3BzLnNob3dPbk1hcERhdGFzKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUFjdGlvbkZvckFkZFRvTWFwRGF0YXMgKG11dGFibGVTdGF0ZVByb3BzOiBBY3Rpb25SZWxhdGVkUHJvcHMsIGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyk6IHZvaWQge1xuICAgIGlmIChtdXRhYmxlU3RhdGVQcm9wcy5hZGRUb01hcERhdGFzKSB7XG4gICAgICBqaW11TWFwVmlldy5hZGRPclJlbW92ZURhdGFPbk1hcChtdXRhYmxlU3RhdGVQcm9wcy5hZGRUb01hcERhdGFzKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcblxuaW50ZXJmYWNlIE11bHRpU291cmNlTWFwQ29udGV4dFR5cGUge1xuICBtYXBXaWRnZXRJZDogc3RyaW5nXG4gIG1hcFdpZGdldEhlaWdodDogbnVtYmVyXG4gIGlzU2hvd01hcFN3aXRjaEJ0bjogYm9vbGVhblxuICBpc0Z1bGxTY3JlZW46IGJvb2xlYW5cbiAgZGF0YVNvdXJjZUlkczogc3RyaW5nW11cbiAgYWN0aXZlRGF0YVNvdXJjZUlkOiBzdHJpbmdcbiAgc3dpdGNoTWFwOiAoKSA9PiB2b2lkXG4gIGZ1bGxTY3JlZW5NYXA6ICgpID0+IHZvaWRcbiAgaW5pdGlhbE1hcFN0YXRlOiBhbnlcbiAgbW9iaWxlUGFuZWxDb250YWluZXI6IEhUTUxEaXZFbGVtZW50XG4gIG9uTW9iaWxlUGFuZWxDb250ZW50Q2hhbmdlOiAoTW9iaWxlUGFuZWxDb250ZW50OiBKU1guRWxlbWVudCkgPT4gdm9pZFxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5leHBvcnQgY29uc3QgTXVsdGlTb3VyY2VNYXBDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxNdWx0aVNvdXJjZU1hcENvbnRleHRUeXBlPih7XG4gIG1hcFdpZGdldElkOiBudWxsLFxuICBtYXBXaWRnZXRIZWlnaHQ6IG51bGwsXG4gIGlzU2hvd01hcFN3aXRjaEJ0bjogZmFsc2UsXG4gIGlzRnVsbFNjcmVlbjogZmFsc2UsXG4gIGRhdGFTb3VyY2VJZHM6IFtdLFxuICBhY3RpdmVEYXRhU291cmNlSWQ6IG51bGwsXG4gIHN3aXRjaE1hcDogKCkgPT4ge30sXG4gIGZ1bGxTY3JlZW5NYXA6ICgpID0+IHt9LFxuICBpbml0aWFsTWFwU3RhdGU6IG51bGwsXG4gIG1vYmlsZVBhbmVsQ29udGFpbmVyOiBudWxsLFxuICBvbk1vYmlsZVBhbmVsQ29udGVudENoYW5nZTogKE1vYmlsZVBhbmVsQ29udGVudDogSlNYLkVsZW1lbnQpID0+IHt9LFxuICB0aGVtZTogbnVsbFxufSlcbiIsImltcG9ydCB7XG4gIFJlYWN0LCBjbGFzc05hbWVzLCBNZXNzYWdlTWFuYWdlciwgdHlwZSBJbW11dGFibGVBcnJheSwgSW1tdXRhYmxlLCBvYnNlcnZlU3RvcmUsIFJlYWN0UmVzaXplRGV0ZWN0b3IsXG4gIGdldEFwcFN0b3JlLCBhcHBBY3Rpb25zLCBNdXRhYmxlU3RvcmVNYW5hZ2VyLCB0eXBlIEV4dGVudENoYW5nZU1lc3NhZ2UsIHR5cGUgVXNlRGF0YVNvdXJjZVxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgTWFwQmFzZSwgeyBNYXBMb2FkU3RhdHVzIH0gZnJvbSAnLi9tYXBiYXNlJ1xuaW1wb3J0IHsgTXVsdGlTb3VyY2VNYXBDb250ZXh0IH0gZnJvbSAnLi9tdWx0aXNvdXJjZW1hcC1jb250ZXh0J1xuaW1wb3J0IHsgdHlwZSBNYXBXaWRnZXRQcm9wcyB9IGZyb20gJy4uL3dpZGdldCdcbmltcG9ydCB7IE1hcFZpZXdNYW5hZ2VyLCB0eXBlIEppbXVNYXBWaWV3LCB0eXBlIEppbXVNYXBWaWV3R3JvdXAsIEppbXVNYXBWaWV3Q29tcG9uZW50LCB0eXBlIERlZmF1bHRNYXBJbmZvIH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgTWFwRml4ZWRMYXlvdXQgZnJvbSAnLi4vbGF5b3V0L21hcC1maXhlZC1sYXlvdXQnXG5pbXBvcnQgTWFwVG9vbExheW91dCwgeyB0eXBlIEFjdGl2ZVRvb2xJbmZvIH0gZnJvbSAnLi4vbGF5b3V0L2xheW91dCdcbmltcG9ydCBwY0xheW91dEpzb25zIGZyb20gJy4uL2xheW91dC9wYy1sYXlvdXQtanNvbidcbmltcG9ydCBtb2JpbGVMYXlvdXRKc29ucyBmcm9tICcuLi9sYXlvdXQvbW9iaWxlLWxheW91dC1qc29uJ1xuaW1wb3J0IHsgZ2V0SmltdU1hcFZpZXdJZCwgdXBkYXRlVXJsSGFzaFBhcmFtc0ZvckFjdGl2ZUppbXVNYXBWaWV3IH0gZnJvbSAnLi4vdXRpbHMnXG5pbXBvcnQgeyB0eXBlIExheW91dEpzb24gfSBmcm9tICcuLi9sYXlvdXQvY29uZmlnJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBiYXNlV2lkZ2V0UHJvcHM6IE1hcFdpZGdldFByb3BzXG4gIHN0YXJ0TG9hZE1vZHVsZXM6IGJvb2xlYW5cbiAgZnVsbFNjcmVlbk1hcDogKCkgPT4gdm9pZFxuXG4gIGlzRGVmYXVsdE1hcD86IGJvb2xlYW5cbiAgb25WaWV3R3JvdXBDcmVhdGU6ICh2aWV3R3JvdXA6IEppbXVNYXBWaWV3R3JvdXApID0+IHZvaWRcbiAgb25KaW11TWFwVmlld0NyZWF0ZWQ6IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpID0+IHZvaWRcbiAgb25BY3RpdmVKaW11TWFwVmlld0NoYW5nZTogKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4gdm9pZFxuXG4gIHdpZHRoQnJlYWtwb2ludDogc3RyaW5nXG4gIHdpZGdldEhlaWdodDogbnVtYmVyXG5cbiAgaXNGdWxsU2NyZWVuOiBib29sZWFuXG4gIGlzTWFwSW5WaXNpYmxlQXJlYTogYm9vbGVhblxuICBkZWZhdWx0TWFwSW5mbz86IERlZmF1bHRNYXBJbmZvXG5cbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGVcblxuICBhdXRvQ29udHJvbFdpZGdldElkOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE1hcENvbnRhaW5lclN0eWxlIHtcbiAgb3BhY2l0eTogbnVtYmVyXG4gIHpJbmRleDogbnVtYmVyIHwgc3RyaW5nXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGN1cnJlbnRNYXBJbmRleD86IDAgfCAxXG4gIG11bHRpTWFwU3R5bGU/OiBNYXBDb250YWluZXJTdHlsZVtdXG4gIC8vIHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFsd2F5cyBiaW5kcyB0byBmaXJzdE1hcERzSWQgYW5kIHJlZnMuc2Vjb25kTWFwSW5zdGFuY2UgYWx3YXlzIGJpbmRzIHRvIHNlY29uZE1hcERzSWRcbiAgLy8gZmlyc3RNYXBEc0lkIGFuZCBzZWNvbmRNYXBEc0lkIGFyZSBkZWNpZGVkIG9uY2UgaW4gY29tcG9uZW50RGlkTW91bnQoKSwgZmlyc3RNYXBEc0lkIGlzIGluaXRpYWxpemVkIGFzIGluaXRpYWxNYXBEYXRhU291cmNlSUQsXG4gIC8vIGFuZCBzZWNvbmRNYXBEc0lkIGlzIGluaXRpYWxpemVkIG5vdCB0aGUgaW5pdGlhbE1hcERhdGFTb3VyY2VJRC5cbiAgLy8gQ2FsbGluZyBzd2l0Y2hNYXAoKSBtZXRob2Qgd2lsbCBub3QgY2hhbmdlIGZpcnN0TWFwRHNJZCBhbmQgc2Vjb25kTWFwRHNJZC5cbiAgZmlyc3RNYXBEc0lkPzogc3RyaW5nXG4gIHNlY29uZE1hcERzSWQ/OiBzdHJpbmdcbiAgLy8gSWYgdXNlQW5pbWF0aW9uIGlzIHRydWUsIG1lYW5zIHdlIGVuYWJsZSBzd2l0Y2hpbmcgb3BhY2l0eSBhbmltYXRpb24gd2hlbiBjYWxsIHN3aXRjaE1hcCgpIG1ldGhvZFxuICAvLyBieSBhZGRpbmcgY2xhc3NOYW1lcyBtdWx0aXNvdXJjZW1hcC1pdGVtLWFwcGVhciBhbmQgbXVsdGlzb3VyY2VtYXAtaXRlbS1kaXNhcHBlYXIuXG4gIHVzZUFuaW1hdGlvbjogYm9vbGVhblxuXG4gIHVzZURhdGFTb3VyY2VzPzogSW1tdXRhYmxlQXJyYXk8VXNlRGF0YVNvdXJjZT5cbiAgY3VycmVudEppbXVNYXBWaWV3SWQ/OiBzdHJpbmdcbiAgbW9iaWxlUGFuZWxDb250ZW50OiBKU1guRWxlbWVudFxuICBtb2JpbGVQYW5lbENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnRcbiAgYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvXG4gIC8vIHNob3dPbk1hcERhdGFzS2V5OiBzdHJpbmdbXVxufVxuXG5jb25zdCBWaXNpYmxlU3R5bGVzID0ge1xuICBmaXJzdE1hcFZpc2libGU6IFt7XG4gICAgekluZGV4OiAndW5zZXQnLFxuICAgIG9wYWNpdHk6IDFcbiAgfSwge1xuICAgIHpJbmRleDogLTEsXG4gICAgb3BhY2l0eTogMFxuICB9XSxcbiAgc2Vjb25kTWFwVmlzaWJsZTogW3tcbiAgICB6SW5kZXg6IC0xLFxuICAgIG9wYWNpdHk6IDBcbiAgfSwge1xuICAgIHpJbmRleDogJ3Vuc2V0JyxcbiAgICBvcGFjaXR5OiAxXG4gIH1dXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE11bHRpU291cmNlTWFwIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgaXNSZUluaXRpbmc6IGJvb2xlYW5cbiAgbXV0YWJsZVN0YXRlUHJvcHNNYXA6IHsgW3Byb3BLZXk6IHN0cmluZ106IHN0cmluZ1tdIH0gPSB7fVxuICB1c2VNYXBXaWRnZXRJZHM6IEltbXV0YWJsZUFycmF5PHN0cmluZz5cbiAgX191bm1vdW50ID0gZmFsc2VcbiAgZG9tUmVmOiBSZWFjdC5SZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQ+XG4gIC8vIFJlY29yZCB0aGUgTXVsdGlTb3VyY2VNYXAgaW5pdGVkIGNvdW50IGZvciB0aGUgc3BlY2lmaWMgbWFwV2lkZ2V0SWQgYXQgcnVudGltZSwgdGhlIGtleSBpcyBtYXAgd2lkZ2V0IGlkLCB0aGUgdmFsdWUgaXMgdGhlIE11bHRpU291cmNlTWFwIGluaXRlZCBjb3VudC5cbiAgLy8gV2UgdXNlIHJ1bnRpbWVJbml0ZWRNYXBXaWRnZXRzIHRvIGlkZW50aWZ5IHdoZXRoZXIgdGhlIE11bHRpU291cmNlTWFwIGlzIGluaXRpYWxpemVkIGZvciB0aGUgZmlyc3QgdGltZSxcbiAgLy8gYW5kIHJlcGxhY2UgY29uZmlnLmluaXRpYWxNYXBEYXRhU291cmNlSUQgd2l0aCBhY3RpdmVEYXRhU291cmNlSWQgaW4gdGhlIHVybCBoYXNoIGR1cmluZyB0aGUgZmlyc3QgaW5pdGlhbGl6YXRpb24uXG4gIHN0YXRpYyBydW50aW1lSW5pdGVkTWFwV2lkZ2V0czogeyBbbWFwV2lkZ2V0SWQ6IHN0cmluZ106IG51bWJlciB9ID0ge31cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuZG9tUmVmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxEaXZFbGVtZW50PigpXG5cbiAgICBjb25zdCBtYXBXaWRnZXRJZCA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXG5cbiAgICBpZiAodHlwZW9mIE11bHRpU291cmNlTWFwLnJ1bnRpbWVJbml0ZWRNYXBXaWRnZXRzW21hcFdpZGdldElkXSA9PT0gJ251bWJlcicpIHtcbiAgICAgIC8vIE11bHRpU291cmNlTWFwIGlzIGluaXRlZCBtdWx0aXBsZSB0aW1lcyBmb3IgbWFwV2lkZ2V0SWRcbiAgICAgIE11bHRpU291cmNlTWFwLnJ1bnRpbWVJbml0ZWRNYXBXaWRnZXRzW21hcFdpZGdldElkXSArPSAxXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE11bHRpU291cmNlTWFwIGlzIGluaXRlZCBmaXJzdGx5IGZvciBtYXBXaWRnZXRJZFxuICAgICAgTXVsdGlTb3VyY2VNYXAucnVudGltZUluaXRlZE1hcFdpZGdldHNbbWFwV2lkZ2V0SWRdID0gMVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3RvcmVEYXRhID0gTXV0YWJsZVN0b3JlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN0YXRlVmFsdWUoW3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLCAncmVzdG9yZURhdGEnLFxuICAgICAgYCR7dGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWR9LXJlc3RvcmVEYXRhLW11bHRpbWFwYF0pXG4gICAgaWYgKHJlc3RvcmVEYXRhKSB7XG4gICAgICBjb25zdCBtb2JpbGVQYW5lbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBtb2JpbGVQYW5lbENvbnRhaW5lci5pZCA9IGAke3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkfS1ib3R0b20tcGFuZWxgXG4gICAgICBtb2JpbGVQYW5lbENvbnRhaW5lci5jbGFzc05hbWUgPSAndy0xMDAgaC0xMDAnXG4gICAgICByZXN0b3JlRGF0YS5tb2JpbGVQYW5lbENvbnRhaW5lciA9IG1vYmlsZVBhbmVsQ29udGFpbmVyXG5cbiAgICAgIHRoaXMucmVJbml0V2lkZ2V0SW5zdGFuY2UocmVzdG9yZURhdGEpXG5cbiAgICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLFxuICAgICAgICBgcmVzdG9yZURhdGEuJHt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZH0tcmVzdG9yZURhdGEtbXVsdGltYXBgLCBudWxsKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtb2JpbGVQYW5lbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICBtb2JpbGVQYW5lbENvbnRhaW5lci5pZCA9IGAke3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkfS1ib3R0b20tcGFuZWxgXG4gICAgICBtb2JpbGVQYW5lbENvbnRhaW5lci5jbGFzc05hbWUgPSAndy0xMDAgaC0xMDAnXG5cbiAgICAgIC8vIFRoZSB3b3JrZmxvdyB0byBzaG93IHRvcCBtYXAgYW5kIGJvdHRvbSBtYXA6XG4gICAgICAvLyAxLiB0aGlzLnN0YXRlLm11bHRpTWFwU3R5bGUgaXMgc2V0IHRvIFZpc2libGVTdHlsZXMuZmlyc3RNYXBWaXNpYmxlLCB0aGlzIGxlYWRzIHRvIGdldEN1cnJlbnRWaXNpYmxlRHNJZCgpIHJldHVybmluZyB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZC5cbiAgICAgIC8vIDIuIEluIGNvbXBvbmVudERpZE1vdW50LCB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCBpcyBzZXQgdG8gaW5pdGlhbE1hcERhdGFTb3VyY2VJRC5cbiAgICAgIC8vIDMuIFdoZW4gSmltdU1hcFZpZXcgY3JlYXRlZCwgaGFuZGxlSmltdU1hcFZpZXdDcmVhdGVkIGlzIGNhbGxlZCwgdGhlbiBoYW5kbGVKaW11TWFwVmlld0NyZWF0ZWQgY2FsbHMgY29uZmlybUppbXVNYXBWaWV3SXNBY3RpdmUuXG4gICAgICAvLyA0LiBJbiBjb25maXJtSmltdU1hcFZpZXdJc0FjdGl2ZSwgaXQgY2FsbHMgdGhpcy5nZXRDdXJyZW50VmlzaWJsZURzSWQoKSBhcyBjdXJyZW50RGF0YVNvdXJjZUlkLCBjdXJyZW50RGF0YVNvdXJjZUlkIGlzIHRoaXMuc3RhdGUuZmlyc3RNYXBEc0lkIGR1ZSB0byBzdGVwMS5cbiAgICAgIC8vICAgIEFuZCBiZWNhdXNlIG9mIHN0ZXAyLCB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCBpcyBpbml0aWFsTWFwRGF0YVNvdXJjZUlELCBzbyB0aGUgY3VycmVudERhdGFTb3VyY2VJZCBpcyBpbml0aWFsTWFwRGF0YVNvdXJjZUlELlxuICAgICAgLy8gICAgVGhlbiBjYWxsIEppbXVNYXBWaWV3LnNldElzQWN0aXZlKGlzQWN0aXZlKSwgaXNBY3RpdmUgaXMgdHJ1ZSBpZiBqaW11TWFwVmlldy5kYXRhU291cmNlSWQgZXF1YWxzIGN1cnJlbnREYXRhU291cmNlSWQsIG90aGVyd2lzZSBpc0FjdGl2ZSBpcyBmYWxzZS5cblxuICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgLy8gc2hvdyB1c2VEYXRhU291cmNlc1swXSBvbiB0aGUgdG9wIGJ5IGRlZmF1bHRcbiAgICAgICAgY3VycmVudE1hcEluZGV4OiAwLFxuICAgICAgICBtdWx0aU1hcFN0eWxlOiBWaXNpYmxlU3R5bGVzLmZpcnN0TWFwVmlzaWJsZSxcbiAgICAgICAgZmlyc3RNYXBEc0lkOiBudWxsLFxuICAgICAgICBzZWNvbmRNYXBEc0lkOiBudWxsLFxuICAgICAgICB1c2VBbmltYXRpb246IGZhbHNlLFxuICAgICAgICB1c2VEYXRhU291cmNlczogbnVsbCxcbiAgICAgICAgLy8gTm90ZSwgdGhlIGluaXRpYWwgY3VycmVudEppbXVNYXBWaWV3SWQgaXMgZW1wdHksIGl0IGlzIG5vdCBlbXB0eSBhZnRlciBjYWxsZWQgdGhpcy5jb25maXJtSmltdU1hcFZpZXdJc0FjdGl2ZSgpIG1ldGhvZC5cbiAgICAgICAgY3VycmVudEppbXVNYXBWaWV3SWQ6IG51bGwsXG4gICAgICAgIG1vYmlsZVBhbmVsQ29udGVudDogbnVsbCxcbiAgICAgICAgbW9iaWxlUGFuZWxDb250YWluZXI6IG1vYmlsZVBhbmVsQ29udGFpbmVyLFxuICAgICAgICBhY3RpdmVUb29sSW5mbzogbnVsbFxuICAgICAgICAvLyBzaG93T25NYXBEYXRhc0tleTogbnVsbFxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubXV0YWJsZVN0YXRlUHJvcHNNYXAgPSB7fVxuICAgIHRoaXMudXNlTWFwV2lkZ2V0SWRzID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQgPyBJbW11dGFibGUoW3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXSkgOiBJbW11dGFibGUoW10pXG5cbiAgICBvYnNlcnZlU3RvcmUodGhpcy5vblBhZ2VDaGFuZ2UsIFsnYXBwUnVudGltZUluZm8nLCAnY3VycmVudFBhZ2VJZCddKVxuICB9XG5cbiAgb25QYWdlQ2hhbmdlID0gKHByZVBhZ2VJZCwgY3VycmVudFBhZ2VJZCkgPT4ge1xuICAgIC8vIGNsb3NlIGFjdGl2ZSB0b29sXG4gICAgaWYgKHByZVBhZ2VJZCAmJiBjdXJyZW50UGFnZUlkICYmIHByZVBhZ2VJZCAhPT0gY3VycmVudFBhZ2VJZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFjdGl2ZVRvb2xJbmZvOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG9uUmVzaXplID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAvLyBjbG9zZSBhY3RpdmUgdG9vbFxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYWN0aXZlVG9vbEluZm86IG51bGxcbiAgICB9KVxuICB9XG5cbiAgcmVJbml0V2lkZ2V0SW5zdGFuY2UgPSAocmVzdG9yZURhdGEpID0+IHtcbiAgICB0aGlzLnN0YXRlID0gcmVzdG9yZURhdGEgYXMgU3RhdGVcbiAgICB0aGlzLmlzUmVJbml0aW5nID0gdHJ1ZVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmIChnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkubWFwV2lkZ2V0c0luZm8pIHtcbiAgICAgIGlmICghZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLm1hcFdpZGdldHNJbmZvW3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXSkge1xuICAgICAgICBnZXRBcHBTdG9yZSgpLmRpc3BhdGNoKGFwcEFjdGlvbnMuTWFwV2lkZ2V0SW5mb0FkZGVkKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLCBJbW11dGFibGUoeyBtYXBXaWRnZXRJZDogdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQgfSkpKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX191bm1vdW50ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmlzUmVJbml0aW5nKSB7XG4gICAgICAvLyB0aGlzLmlzUmVJbml0aW5nIGlzIHRydWUgbWVhbnMgTXVsdGlTb3VyY2VNYXAgaXMgcmVzdG9yZWQuXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB1c2VEYXRhU291cmNlcyA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLnVzZURhdGFTb3VyY2VzXG5cbiAgICBpZiAodXNlRGF0YVNvdXJjZXMpIHtcbiAgICAgIC8vIGluaXRpYWxNYXBEYXRhU291cmNlSUQgbWF5YmUgY29uZmlnLmluaXRpYWxNYXBEYXRhU291cmNlSUQgb3IgdXJsIGhhc2ggcGFyYW0gYWN0aXZlX2RhdGFzb3VyY2VfaWRcbiAgICAgIGxldCBpbml0aWFsTWFwRGF0YVNvdXJjZUlEID0gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLmluaXRpYWxNYXBEYXRhU291cmNlSURcblxuICAgICAgLy8gSWYgdXJsIGhhc2ggcGFyYW0gYWN0aXZlX2RhdGFzb3VyY2VfaWQgaXMgc2V0IGFuZCB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIE11bHRpU291cmNlTWFwIGluaXRlZCxcbiAgICAgIC8vIHRoZW4gd2UgdXNlIGFjdGl2ZV9kYXRhc291cmNlX2lkIG92ZXJyaWRlIGNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlELlxuICAgICAgaWYgKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlzUnVuQXBwTW9kZSkge1xuICAgICAgICBjb25zdCBtYXBXaWRnZXRJZCA9IHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkXG4gICAgICAgIGNvbnN0IGZpcnN0VGltZUluaXRlZCA9IE11bHRpU291cmNlTWFwLnJ1bnRpbWVJbml0ZWRNYXBXaWRnZXRzW21hcFdpZGdldElkXSA9PT0gMVxuXG4gICAgICAgIGlmIChmaXJzdFRpbWVJbml0ZWQpIHtcbiAgICAgICAgICAvLyBNdWx0aVNvdXJjZU1hcCBpcyBpbml0ZWQgZmlyc3RseSBmb3IgbWFwV2lkZ2V0SWQuXG4gICAgICAgICAgY29uc3QgcnVudGltZVVybEhhc2hQYXJhbXMgPSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5ydW50aW1lVXJsSGFzaFBhcmFtc1xuXG4gICAgICAgICAgaWYgKHJ1bnRpbWVVcmxIYXNoUGFyYW1zICYmIHJ1bnRpbWVVcmxIYXNoUGFyYW1zLmFjdGl2ZV9kYXRhc291cmNlX2lkKSB7XG4gICAgICAgICAgICBjb25zdCBhbGxEYXRhU291cmNlSWRzID0gdXNlRGF0YVNvdXJjZXMubWFwKGl0ZW0gPT4gaXRlbS5kYXRhU291cmNlSWQpXG5cbiAgICAgICAgICAgIGlmIChhbGxEYXRhU291cmNlSWRzLmluY2x1ZGVzKHJ1bnRpbWVVcmxIYXNoUGFyYW1zLmFjdGl2ZV9kYXRhc291cmNlX2lkKSkge1xuICAgICAgICAgICAgICBpbml0aWFsTWFwRGF0YVNvdXJjZUlEID0gcnVudGltZVVybEhhc2hQYXJhbXMuYWN0aXZlX2RhdGFzb3VyY2VfaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdGhlIGZvbGxvd2luZyBjb2RlIG1ha2Ugc3VyZSBmaXJzdE1hcERzSWQgcG9pbnRzIHRvIHRoZSBhYm92ZSBpbml0aWFsTWFwRGF0YVNvdXJjZUlEXG5cbiAgICAgIGlmICghaW5pdGlhbE1hcERhdGFTb3VyY2VJRCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBmaXJzdE1hcERzSWQ6IHVzZURhdGFTb3VyY2VzWzBdICYmIHVzZURhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZCxcbiAgICAgICAgICBzZWNvbmRNYXBEc0lkOiB1c2VEYXRhU291cmNlc1sxXSAmJiB1c2VEYXRhU291cmNlc1sxXS5kYXRhU291cmNlSWRcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpbml0aWFsTWFwRGF0YVNvdXJjZUlEID09PSAodXNlRGF0YVNvdXJjZXNbMF0gJiYgdXNlRGF0YVNvdXJjZXNbMF0uZGF0YVNvdXJjZUlkKSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlyc3RNYXBEc0lkOiB1c2VEYXRhU291cmNlc1swXSAmJiB1c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWQsXG4gICAgICAgICAgICBzZWNvbmRNYXBEc0lkOiB1c2VEYXRhU291cmNlc1sxXSAmJiB1c2VEYXRhU291cmNlc1sxXS5kYXRhU291cmNlSWRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKGluaXRpYWxNYXBEYXRhU291cmNlSUQgPT09ICh1c2VEYXRhU291cmNlc1sxXSAmJiB1c2VEYXRhU291cmNlc1sxXS5kYXRhU291cmNlSWQpKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmaXJzdE1hcERzSWQ6IHVzZURhdGFTb3VyY2VzWzFdICYmIHVzZURhdGFTb3VyY2VzWzFdLmRhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIHNlY29uZE1hcERzSWQ6IHVzZURhdGFTb3VyY2VzWzBdICYmIHVzZURhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmaXJzdE1hcERzSWQ6IHVzZURhdGFTb3VyY2VzWzBdICYmIHVzZURhdGFTb3VyY2VzWzBdLmRhdGFTb3VyY2VJZCxcbiAgICAgICAgICAgIHNlY29uZE1hcERzSWQ6IHVzZURhdGFTb3VyY2VzWzFdICYmIHVzZURhdGFTb3VyY2VzWzFdLmRhdGFTb3VyY2VJZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgdGhpcy5fX3VubW91bnQgPSB0cnVlXG4gICAgY29uc3Qgd2lkZ2V0cyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWcud2lkZ2V0c1xuXG4gICAgaWYgKHdpZGdldHNbdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWRdICYmIHdpZGdldHNbdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWRdLnVzZURhdGFTb3VyY2VzID09PSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcykge1xuICAgICAgY29uc3QgcmVzdG9yZURhdGEgPSB7XG4gICAgICAgIGN1cnJlbnRNYXBJbmRleDogdGhpcy5zdGF0ZS5jdXJyZW50TWFwSW5kZXgsXG4gICAgICAgIG11bHRpTWFwU3R5bGU6IHRoaXMuc3RhdGUubXVsdGlNYXBTdHlsZSxcbiAgICAgICAgZmlyc3RNYXBEc0lkOiB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCxcbiAgICAgICAgc2Vjb25kTWFwRHNJZDogdGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkLFxuICAgICAgICB1c2VBbmltYXRpb246IHRoaXMuc3RhdGUudXNlQW5pbWF0aW9uLFxuICAgICAgICBjdXJyZW50SmltdU1hcFZpZXdJZDogdGhpcy5zdGF0ZS5jdXJyZW50SmltdU1hcFZpZXdJZFxuICAgICAgfVxuICAgICAgTXV0YWJsZVN0b3JlTWFuYWdlci5nZXRJbnN0YW5jZSgpLnVwZGF0ZVN0YXRlVmFsdWUodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQsXG4gICAgICAgIGByZXN0b3JlRGF0YS4ke3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkfS1yZXN0b3JlRGF0YS1tdWx0aW1hcGAsIHJlc3RvcmVEYXRhKVxuICAgIH1cblxuICAgIGlmICghd2lkZ2V0c1t0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZF0pIHtcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYXBwQWN0aW9ucy5NYXBXaWRnZXRJbmZvUmVtb3ZlZCh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCkpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldENoYW5nZWRTdGF0ZSA9IChmaXJzdE1hcERzSWQsIHNlY29uZE1hcERzSWQsIHVzZURhdGFTb3VyY2VzKTogU3RhdGUgPT4ge1xuICAgIGNvbnN0IGNoYW5nZWRTdGF0ZSA9IHt9IGFzIFN0YXRlXG5cbiAgICBpZiAodXNlRGF0YVNvdXJjZXMgJiYgdXNlRGF0YVNvdXJjZXNbMF0pIHtcbiAgICAgIGNvbnN0IG5ld0RhdGFTb3VyY2VBcnIgPSBbXVxuICAgICAgY29uc3QgcmVwZWF0RGF0YVNvdXJjZUFyciA9IFtdXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZURhdGFTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmaXJzdE1hcERzSWQgIT09IHVzZURhdGFTb3VyY2VzW2ldLmRhdGFTb3VyY2VJZCkge1xuICAgICAgICAgIG5ld0RhdGFTb3VyY2VBcnIucHVzaCh1c2VEYXRhU291cmNlc1tpXS5kYXRhU291cmNlSWQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVwZWF0RGF0YVNvdXJjZUFyci5wdXNoKHVzZURhdGFTb3VyY2VzW2ldLmRhdGFTb3VyY2VJZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlcGVhdERhdGFTb3VyY2VBcnIubGVuZ3RoID4gMCkge1xuICAgICAgICBjaGFuZ2VkU3RhdGUuZmlyc3RNYXBEc0lkID0gZmlyc3RNYXBEc0lkXG4gICAgICAgIGNoYW5nZWRTdGF0ZS5zZWNvbmRNYXBEc0lkID0gbmV3RGF0YVNvdXJjZUFyclswXVxuICAgICAgfSBlbHNlIGlmIChyZXBlYXREYXRhU291cmNlQXJyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAobmV3RGF0YVNvdXJjZUFyci5pbmNsdWRlcyhzZWNvbmRNYXBEc0lkKSkge1xuICAgICAgICAgIG5ld0RhdGFTb3VyY2VBcnIuc3BsaWNlKG5ld0RhdGFTb3VyY2VBcnIuaW5kZXhPZihzZWNvbmRNYXBEc0lkKSwgMSlcbiAgICAgICAgICBjaGFuZ2VkU3RhdGUuZmlyc3RNYXBEc0lkID0gbmV3RGF0YVNvdXJjZUFyclswXVxuICAgICAgICAgIGNoYW5nZWRTdGF0ZS5zZWNvbmRNYXBEc0lkID0gc2Vjb25kTWFwRHNJZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoYW5nZWRTdGF0ZS5maXJzdE1hcERzSWQgPSBuZXdEYXRhU291cmNlQXJyWzBdXG4gICAgICAgICAgY2hhbmdlZFN0YXRlLnNlY29uZE1hcERzSWQgPSBuZXdEYXRhU291cmNlQXJyWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2hhbmdlZFN0YXRlLmZpcnN0TWFwRHNJZCA9IG51bGxcbiAgICAgIGNoYW5nZWRTdGF0ZS5zZWNvbmRNYXBEc0lkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChjaGFuZ2VkU3RhdGUuZmlyc3RNYXBEc0lkICE9PSBmaXJzdE1hcERzSWQpIHtcbiAgICAgIGlmIChjaGFuZ2VkU3RhdGUuZmlyc3RNYXBEc0lkKSB7XG4gICAgICAgIGNoYW5nZWRTdGF0ZS5tdWx0aU1hcFN0eWxlID0gVmlzaWJsZVN0eWxlcy5maXJzdE1hcFZpc2libGVcbiAgICAgICAgY2hhbmdlZFN0YXRlLmN1cnJlbnRNYXBJbmRleCA9IDBcbiAgICAgIH0gZWxzZSBpZiAoY2hhbmdlZFN0YXRlLnNlY29uZE1hcERzSWQpIHtcbiAgICAgICAgY2hhbmdlZFN0YXRlLm11bHRpTWFwU3R5bGUgPSBWaXNpYmxlU3R5bGVzLnNlY29uZE1hcFZpc2libGVcbiAgICAgICAgY2hhbmdlZFN0YXRlLmN1cnJlbnRNYXBJbmRleCA9IDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWRTdGF0ZS5tdWx0aU1hcFN0eWxlID0gVmlzaWJsZVN0eWxlcy5maXJzdE1hcFZpc2libGVcbiAgICAgICAgY2hhbmdlZFN0YXRlLmN1cnJlbnRNYXBJbmRleCA9IDBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFjaGFuZ2VkU3RhdGUuc2Vjb25kTWFwRHNJZCkge1xuICAgICAgICBjaGFuZ2VkU3RhdGUubXVsdGlNYXBTdHlsZSA9IFZpc2libGVTdHlsZXMuZmlyc3RNYXBWaXNpYmxlXG4gICAgICAgIGNoYW5nZWRTdGF0ZS5jdXJyZW50TWFwSW5kZXggPSAwXG4gICAgICB9IGVsc2UgaWYgKGNoYW5nZWRTdGF0ZS5zZWNvbmRNYXBEc0lkICE9PSBzZWNvbmRNYXBEc0lkKSB7XG4gICAgICAgIGNoYW5nZWRTdGF0ZS5tdWx0aU1hcFN0eWxlID0gVmlzaWJsZVN0eWxlcy5zZWNvbmRNYXBWaXNpYmxlXG4gICAgICAgIGNoYW5nZWRTdGF0ZS5jdXJyZW50TWFwSW5kZXggPSAxXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFuZ2VkU3RhdGVcbiAgfVxuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgKG5ld1Byb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSkge1xuICAgIGlmIChuZXdQcm9wcy5iYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXMgIT09IHByZXZTdGF0ZS51c2VEYXRhU291cmNlcykge1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSBNdWx0aVNvdXJjZU1hcC5nZXRDaGFuZ2VkU3RhdGUocHJldlN0YXRlLmZpcnN0TWFwRHNJZCwgcHJldlN0YXRlLnNlY29uZE1hcERzSWQsIG5ld1Byb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcylcbiAgICAgIHJldHVybiBuZXdTdGF0ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KSB7XG4gICAgaWYgKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLnN0YXRlUHJvcHMgJiYgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuc3RhdGVQcm9wcy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEKSB7XG4gICAgICAvLyBtYXBXaWRnZXQucHJvcHMuc3RhdGVQcm9wcy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEIGlzIGEgdGVtcG9yYXJ5IHZhcmlhYmxlIHRvIGxldCBtYXAgc2V0dGluZyBhbmQgbWFwIHJ1bnRpbWUgY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyLlxuICAgICAgLy8gSWYgd2UgY2hhbmdlIHRoZSBpbml0aWFsTWFwRGF0YVNvdXJjZUlEIGJ5IGNsaWNraW5nIGRzIHRodW1ibmFpbCBpbiBtYXAgc2V0dGluZyxcbiAgICAgIC8vIHRoZW4gbWFwIHNldHRpbmcgd2lsbCBjYWxsIGJ1aWxkZXJBcHBTeW5jLnB1Ymxpc2hDaGFuZ2VXaWRnZXRTdGF0ZVByb3BUb0FwcCgpIHRvIHVwZGF0ZSBtYXBXaWRnZXQucHJvcHMuc3RhdGVQcm9wcy5pbml0aWFsTWFwRGF0YVNvdXJjZUlELlxuICAgICAgLy8gT25jZSB3ZSBjaGVjayBtYXBXaWRnZXQucHJvcHMuc3RhdGVQcm9wcy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEIGlzIG5vdCBlbXB0eSBpbiBNdWx0aVNvdXJjZU1hcCwgbWVhbnMgd2UgY2hhbmdlZCB0aGUgaW5pdGlhbE1hcERhdGFTb3VyY2VJRCxcbiAgICAgIC8vIHRoZW4gd2UgbWFrZSBzdXJlIHRoZSBpbml0aWFsTWFwYmFzZSBnbyB0byB0aGUgaW5pdGlhbCBleHRlbnQuXG4gICAgICAvLyBBdCBsYXN0LCB3ZSB3aWxsIHJlc2V0IG1hcFdpZGdldC5wcm9wcy5zdGF0ZVByb3BzLmluaXRpYWxNYXBEYXRhU291cmNlSUQgdG8gZW1wdHkuXG5cbiAgICAgIGNvbnN0IGluaXRpYWxNYXBEYXRhU291cmNlSUQgPSB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5zdGF0ZVByb3BzLmluaXRpYWxNYXBEYXRhU291cmNlSURcblxuICAgICAgaWYgKHRoaXMuc3RhdGUuZmlyc3RNYXBEc0lkID09PSBpbml0aWFsTWFwRGF0YVNvdXJjZUlEKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0TWFwSW5zdGFuY2UgPSB0aGlzLnJlZnMuZmlyc3RNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG5cbiAgICAgICAgaWYgKGZpcnN0TWFwSW5zdGFuY2UpIHtcbiAgICAgICAgICBmaXJzdE1hcEluc3RhbmNlLmdvSG9tZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkID09PSBpbml0aWFsTWFwRGF0YVNvdXJjZUlEKSB7XG4gICAgICAgIGNvbnN0IHNlY29uZE1hcEluc3RhbmNlID0gdGhpcy5yZWZzLnNlY29uZE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcblxuICAgICAgICBpZiAoc2Vjb25kTWFwSW5zdGFuY2UpIHtcbiAgICAgICAgICBzZWNvbmRNYXBJbnN0YW5jZS5nb0hvbWUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuZGlzcGF0Y2goYXBwQWN0aW9ucy53aWRnZXRTdGF0ZVByb3BDaGFuZ2UodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuaWQsICdpbml0aWFsTWFwRGF0YVNvdXJjZUlEJywgbnVsbCkpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNSZUluaXRpbmcpIHtcbiAgICAgIHRoaXMuaXNSZUluaXRpbmcgPSBmYWxzZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEICE9PSBwcmV2UHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEKSB7XG4gICAgICAvLyBVc2VyIGNsaWNrcyB0aGUgbWFwIHRodWJuYWlsIGluIG1hcCBzZXR0aW5nIHBhZ2UgYW5kIGNoYW5nZSB0aGUgY29uZmlnLmluaXRpYWxNYXBEYXRhU291cmNlSUQuXG4gICAgICB0aGlzLmNoYW5nZUluaXRpYWxNYXBEYXRhU291cmNlSUQodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLmluaXRpYWxNYXBEYXRhU291cmNlSUQsIHRoaXMuY29uZmlybUppbXVNYXBWaWV3SXNBY3RpdmUpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLnVzZURhdGFTb3VyY2VzICE9PSBwcmV2UHJvcHMuYmFzZVdpZGdldFByb3BzLnVzZURhdGFTb3VyY2VzKSB7XG4gICAgICB0aGlzLmNvbmZpcm1KaW11TWFwVmlld0lzQWN0aXZlKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gdXNlciBjbGlja3MgdGhlIG1hcCB0aHVibmFpbCBpbiBtYXAgc2V0dGluZyBwYWdlIGFuZCBjaGFuZ2UgdGhlIGNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlELlxuICAgKiBAcGFyYW0gZGF0YVNvdXJjZUlkXG4gICAqIEBwYXJhbSBjYWxsQmFja1xuICAgKi9cbiAgY2hhbmdlSW5pdGlhbE1hcERhdGFTb3VyY2VJRCA9IChkYXRhU291cmNlSWQ6IHN0cmluZywgY2FsbEJhY2s/OiBhbnkpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXMgJiYgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZmlyc3RNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICAgIGNvbnN0IHNlY29uZE1hcEluc3RhbmNlID0gdGhpcy5yZWZzLnNlY29uZE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcblxuICAgICAgaWYgKCFmaXJzdE1hcEluc3RhbmNlIHx8ICFzZWNvbmRNYXBJbnN0YW5jZSkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgYm90aCBmaXJzdE1hcEluc3RhbmNlIGFuZCBzZWNvbmRNYXBJbnN0YW5jZSBleGlzdCwgb3RoZXJ3aXNlIHdlIGRvbid0IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZC5cbiAgICAgICAgaWYgKGNhbGxCYWNrKSB7XG4gICAgICAgICAgY2FsbEJhY2soKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuc3RhdGUuY3VycmVudE1hcEluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlY29uZE1hcERzSWQgJiYgdGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkID09PSBkYXRhU291cmNlSWQpIHtcbiAgICAgICAgICB0aGlzLnN0YXJ0Q2hhbmdlSW5pdGlhbE1hcEFuaW1hdGlvbihjYWxsQmFjaylcbiAgICAgICAgICBzZWNvbmRNYXBJbnN0YW5jZS5nb0hvbWUoZmFsc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyc3RNYXBJbnN0YW5jZS5nb0hvbWUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCAmJiB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCA9PT0gZGF0YVNvdXJjZUlkKSB7XG4gICAgICAgICAgdGhpcy5zdGFydENoYW5nZUluaXRpYWxNYXBBbmltYXRpb24oY2FsbEJhY2spXG4gICAgICAgICAgZmlyc3RNYXBJbnN0YW5jZS5nb0hvbWUoZmFsc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2Vjb25kTWFwSW5zdGFuY2UuZ29Ib21lKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhcnRDaGFuZ2VJbml0aWFsTWFwQW5pbWF0aW9uID0gKGNhbGxCYWNrPzogYW55KSA9PiB7XG4gICAgY29uc3QgZmlyc3RNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICBjb25zdCBzZWNvbmRNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5zZWNvbmRNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG5cbiAgICBpZiAoIWZpcnN0TWFwSW5zdGFuY2UgfHwgIXNlY29uZE1hcEluc3RhbmNlKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgYm90aCBmaXJzdE1hcEluc3RhbmNlIGFuZCBzZWNvbmRNYXBJbnN0YW5jZSBleGlzdCwgb3RoZXJ3aXNlIHdlIGRvbid0IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZC5cbiAgICAgIGlmIChjYWxsQmFjaykge1xuICAgICAgICBjYWxsQmFjaygpXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wU3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXRlKSBhcyBTdGF0ZVxuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRNYXBJbmRleCkge1xuICAgICAgLy8gY3VycmVudE1hcEluZGV4OiAwIC0+IDFcbiAgICAgIC8vIGZpcnN0IG1hcCB2aXNpYmxlIC0+IHNlY29uZCBtYXAgdmlzaWJsZVxuICAgICAgdGVtcFN0YXRlLmN1cnJlbnRNYXBJbmRleCA9IDFcbiAgICAgIHRlbXBTdGF0ZS5tdWx0aU1hcFN0eWxlID0gVmlzaWJsZVN0eWxlcy5zZWNvbmRNYXBWaXNpYmxlXG5cbiAgICAgIGNvbnN0IHZpZXdQb2ludCA9IGZpcnN0TWFwSW5zdGFuY2UuZ2V0Vmlld1BvaW50KClcblxuICAgICAgaWYgKHZpZXdQb2ludCkge1xuICAgICAgICBzZWNvbmRNYXBJbnN0YW5jZS5zZXRWaWV3UG9pbnQodmlld1BvaW50KVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHRlbXBTdGF0ZSwgKCkgPT4geyBjYWxsQmFjayAmJiBjYWxsQmFjaygpIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGN1cnJlbnRNYXBJbmRleDogMSAtPiAwXG4gICAgICAvLyBzZWNvbmQgbWFwIHZpc2libGUgLT4gZmlyc3QgbWFwIHZpc2libGVcbiAgICAgIHRlbXBTdGF0ZS5jdXJyZW50TWFwSW5kZXggPSAwXG4gICAgICB0ZW1wU3RhdGUubXVsdGlNYXBTdHlsZSA9IFZpc2libGVTdHlsZXMuZmlyc3RNYXBWaXNpYmxlXG5cbiAgICAgIGNvbnN0IHZpZXdQb2ludCA9IHNlY29uZE1hcEluc3RhbmNlLmdldFZpZXdQb2ludCgpXG5cbiAgICAgIGlmICh2aWV3UG9pbnQpIHtcbiAgICAgICAgZmlyc3RNYXBJbnN0YW5jZS5zZXRWaWV3UG9pbnQodmlld1BvaW50KVxuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHRlbXBTdGF0ZSwgKCkgPT4geyBjYWxsQmFjayAmJiBjYWxsQmFjaygpIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHVzZXIgY2xpY2tzIHRoZSBzd2l0Y2ggdG9vbCBhdCB0aGUgbGVmdCBib3R0b20gb2YgbWFwIHdpZGdldC5cbiAgICovXG4gIHN3aXRjaE1hcCA9IGFzeW5jIChpZ25vcmVTd2l0Y2hBbmltYXRpb24gPSBmYWxzZSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgaWYgKCF0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcyB8fCB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcy5sZW5ndGggPCAyKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICBjb25zdCBzZWNvbmRNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5zZWNvbmRNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG5cbiAgICBpZiAoIWZpcnN0TWFwSW5zdGFuY2UgfHwgIXNlY29uZE1hcEluc3RhbmNlKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgYm90aCBmaXJzdE1hcEluc3RhbmNlIGFuZCBzZWNvbmRNYXBJbnN0YW5jZSBleGlzdCwgb3RoZXJ3aXNlIHdlIGRvbid0IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZC5cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBTdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUpIGFzIFN0YXRlXG4gICAgLy8gQnkgZGVmYXVsdCwgd2UgZW5hYmxlIHN3aXRjaGluZyBvcGFjaXR5IGFuaW1hdGlvbi5cbiAgICB0ZW1wU3RhdGUudXNlQW5pbWF0aW9uID0gIWlnbm9yZVN3aXRjaEFuaW1hdGlvblxuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRNYXBJbmRleCkge1xuICAgICAgLy8gY3VycmVudE1hcEluZGV4OiAwIC0+IDFcbiAgICAgIC8vIGZpcnN0IG1hcCB2aXNpYmxlIC0+IHNlY29uZCBtYXAgdmlzaWJsZVxuICAgICAgdGVtcFN0YXRlLmN1cnJlbnRNYXBJbmRleCA9IDFcbiAgICAgIHRlbXBTdGF0ZS5tdWx0aU1hcFN0eWxlID0gVmlzaWJsZVN0eWxlcy5zZWNvbmRNYXBWaXNpYmxlXG5cbiAgICAgIGNvbnN0IHZpZXdQb2ludCA9IGZpcnN0TWFwSW5zdGFuY2UuZ2V0Vmlld1BvaW50KClcblxuICAgICAgaWYgKHZpZXdQb2ludCkge1xuICAgICAgICBzZWNvbmRNYXBJbnN0YW5jZS5zZXRWaWV3UG9pbnQodmlld1BvaW50KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjdXJyZW50TWFwSW5kZXg6IDEgLT4gMFxuICAgICAgLy8gc2Vjb25kIG1hcCB2aXNpYmxlIC0+IGZpcnN0IG1hcCB2aXNpYmxlXG4gICAgICB0ZW1wU3RhdGUuY3VycmVudE1hcEluZGV4ID0gMFxuICAgICAgdGVtcFN0YXRlLm11bHRpTWFwU3R5bGUgPSBWaXNpYmxlU3R5bGVzLmZpcnN0TWFwVmlzaWJsZVxuXG4gICAgICBjb25zdCB2aWV3UG9pbnQgPSBzZWNvbmRNYXBJbnN0YW5jZS5nZXRWaWV3UG9pbnQoKVxuXG4gICAgICBpZiAodmlld1BvaW50KSB7XG4gICAgICAgIGZpcnN0TWFwSW5zdGFuY2Uuc2V0Vmlld1BvaW50KHZpZXdQb2ludClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh0ZW1wU3RhdGUsICgpID0+IHtcbiAgICAgICAgdGhpcy5jb25maXJtSmltdU1hcFZpZXdJc0FjdGl2ZSgpXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB1c2VBbmltYXRpb246IGZhbHNlXG4gICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sIDUwMClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZU11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZCA9IChkYXRhU291cmNlSWQ6IHN0cmluZywgcHJvcEtleTogc3RyaW5nLCB2YWx1ZT86IGFueSkgPT4ge1xuICAgIGlmICghdGhpcy5tdXRhYmxlU3RhdGVQcm9wc01hcFtwcm9wS2V5XSkge1xuICAgICAgdGhpcy5tdXRhYmxlU3RhdGVQcm9wc01hcFtwcm9wS2V5XSA9IFtkYXRhU291cmNlSWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghdGhpcy5tdXRhYmxlU3RhdGVQcm9wc01hcFtwcm9wS2V5XS5pbmNsdWRlcyhkYXRhU291cmNlSWQpKSB7XG4gICAgICAgIHRoaXMubXV0YWJsZVN0YXRlUHJvcHNNYXBbcHJvcEtleV0ucHVzaChkYXRhU291cmNlSWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbXVsdGlNYXBEc0lkcyA9IFtdXG4gICAgY29uc3QgZmlyc3RNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICBjb25zdCBzZWNvbmRNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5zZWNvbmRNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG5cbiAgICBpZiAoZmlyc3RNYXBJbnN0YW5jZSAmJiBmaXJzdE1hcEluc3RhbmNlLmdldFZpZXdUeXBlKCkpIHtcbiAgICAgIG11bHRpTWFwRHNJZHMucHVzaCh0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZClcbiAgICB9XG5cbiAgICBpZiAoc2Vjb25kTWFwSW5zdGFuY2UgJiYgc2Vjb25kTWFwSW5zdGFuY2UuZ2V0Vmlld1R5cGUoKSkge1xuICAgICAgbXVsdGlNYXBEc0lkcy5wdXNoKHRoaXMuc3RhdGUuc2Vjb25kTWFwRHNJZClcbiAgICB9XG5cbiAgICBsZXQgaXNBbGxNYXRjaGVkID0gdHJ1ZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXVsdGlNYXBEc0lkcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLm11dGFibGVTdGF0ZVByb3BzTWFwW3Byb3BLZXldLmluY2x1ZGVzKG11bHRpTWFwRHNJZHNbaV0pKSB7XG4gICAgICAgIGlzQWxsTWF0Y2hlZCA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQWxsTWF0Y2hlZCkge1xuICAgICAgZGVsZXRlIHRoaXMubXV0YWJsZVN0YXRlUHJvcHNNYXBbcHJvcEtleV1cbiAgICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkLCBwcm9wS2V5LCB2YWx1ZSlcbiAgICB9XG4gIH1cblxuICAvLyBjYWxsYmFjayBvZiB2aWV3LmV4dGVudCBjaGFuZ2VcbiAgb25NYXBiYXNlRXh0ZW50Q2hhbmdlZCA9IChkYXRhU291cmNlSWQ6IHN0cmluZywgbWVzc2FnZTogRXh0ZW50Q2hhbmdlTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRWaXNpYmxlRHNJZCA9IHRoaXMuZ2V0Q3VycmVudFZpc2libGVEc0lkKClcblxuICAgIGlmIChjdXJyZW50VmlzaWJsZURzSWQgPT09IGRhdGFTb3VyY2VJZCkge1xuICAgICAgY29uc3QgY2xvbmVkVmlld3BvaW50ID0gbWVzc2FnZS52aWV3cG9pbnQuY2xvbmUoKVxuICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShtZXNzYWdlKVxuXG4gICAgICAvLyBzeW5jIHZpZXdwb2ludCBvZiBoaWRkZW4gbWFwYmFzZVxuICAgICAgbGV0IGhpZGRlbk1hcEJhc2U6IE1hcEJhc2UgPSBudWxsXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCAmJiB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCAhPT0gZGF0YVNvdXJjZUlkKSB7XG4gICAgICAgIGhpZGRlbk1hcEJhc2UgPSB0aGlzLnJlZnMuZmlyc3RNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuc2Vjb25kTWFwRHNJZCAmJiB0aGlzLnN0YXRlLnNlY29uZE1hcERzSWQgIT09IGRhdGFTb3VyY2VJZCkge1xuICAgICAgICBoaWRkZW5NYXBCYXNlID0gdGhpcy5yZWZzLnNlY29uZE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICAgIH1cblxuICAgICAgaWYgKGhpZGRlbk1hcEJhc2UpIHtcbiAgICAgICAgaGlkZGVuTWFwQmFzZS5zZXRWaWV3UG9pbnQoY2xvbmVkVmlld3BvaW50KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1hcExvYWRlZCA9IChkYXRhU291cmNlSWQ6IHN0cmluZywgbWFwTG9hZFN0YXR1czogTWFwTG9hZFN0YXR1cykgPT4ge1xuICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICB9XG5cbiAgaGFuZGxlSmltdU1hcFZpZXdDcmVhdGVkID0gKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldykgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLm9uSmltdU1hcFZpZXdDcmVhdGVkKSB7XG4gICAgICB0aGlzLnByb3BzLm9uSmltdU1hcFZpZXdDcmVhdGVkKGppbXVNYXBWaWV3KVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9fdW5tb3VudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5jb25maXJtSmltdU1hcFZpZXdJc0FjdGl2ZSgpXG4gIH1cblxuICBwcml2YXRlIGdldEppbXVNYXBWaWV3QnlEYXRhU291cmNlSWQgKGRzSWQ6IHN0cmluZyk6IEppbXVNYXBWaWV3IHtcbiAgICBjb25zdCBqaW11TWFwVmlld0lkID0gZ2V0SmltdU1hcFZpZXdJZCh0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCwgZHNJZClcbiAgICBjb25zdCBqaW11TWFwVmlldyA9IE1hcFZpZXdNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0SmltdU1hcFZpZXdCeUlkKGppbXVNYXBWaWV3SWQpXG4gICAgcmV0dXJuIGppbXVNYXBWaWV3XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoaXMuc3RhdGUuY3VycmVudEppbXVNYXBWaWV3SWQgYnkgdGhpcy5zdGF0ZS5tdWx0aU1hcFN0eWxlIGFuZCB1cGRhdGUgSmltdU1hcFZpZXcuaXNBY3RpdmUgYnkgY2FsbGluZyBqaW11TWFwVmlldy5zZXRJc0FjdGl2ZShpc0FjdGl2ZSkuXG4gICAqL1xuICBjb25maXJtSmltdU1hcFZpZXdJc0FjdGl2ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5pc0RlZmF1bHRNYXApIHtcbiAgICAgIGNvbnN0IGppbXVNYXBWaWV3ID0gdGhpcy5nZXRKaW11TWFwVmlld0J5RGF0YVNvdXJjZUlkKG51bGwpXG4gICAgICBpZiAoamltdU1hcFZpZXcpIHtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVKaW11TWFwVmlldyhqaW11TWFwVmlldywgdHJ1ZSlcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFsbERhdGFzb3VyY2VJZHMgPSBbXVxuICAgIHRoaXMuc3RhdGUuZmlyc3RNYXBEc0lkICYmIGFsbERhdGFzb3VyY2VJZHMucHVzaCh0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZClcbiAgICB0aGlzLnN0YXRlLnNlY29uZE1hcERzSWQgJiYgYWxsRGF0YXNvdXJjZUlkcy5wdXNoKHRoaXMuc3RhdGUuc2Vjb25kTWFwRHNJZClcbiAgICBjb25zdCBjdXJyZW50RGF0YVNvdXJjZUlkID0gdGhpcy5nZXRDdXJyZW50VmlzaWJsZURzSWQoKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxEYXRhc291cmNlSWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBqaW11TWFwVmlldyA9IHRoaXMuZ2V0SmltdU1hcFZpZXdCeURhdGFTb3VyY2VJZChhbGxEYXRhc291cmNlSWRzW2ldKVxuICAgICAgaWYgKGppbXVNYXBWaWV3KSB7XG4gICAgICAgIGlmIChhbGxEYXRhc291cmNlSWRzW2ldID09PSBjdXJyZW50RGF0YVNvdXJjZUlkKSB7XG4gICAgICAgICAgdGhpcy5zZXRBY3RpdmVKaW11TWFwVmlldyhqaW11TWFwVmlldywgdHJ1ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldEFjdGl2ZUppbXVNYXBWaWV3KGppbXVNYXBWaWV3LCBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUppbXVNYXBWaWV3IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcsIGlzQWN0aXZlOiBib29sZWFuKSB7XG4gICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAvLyBqaW11TWFwVmlldyBpcyBhY3RpdmVcbiAgICAgIGppbXVNYXBWaWV3LnNldElzQWN0aXZlKGlzQWN0aXZlKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGN1cnJlbnRKaW11TWFwVmlld0lkOiBqaW11TWFwVmlldy5pZFxuICAgICAgfSlcblxuICAgICAgaWYgKHRoaXMucHJvcHMub25BY3RpdmVKaW11TWFwVmlld0NoYW5nZSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uQWN0aXZlSmltdU1hcFZpZXdDaGFuZ2UoamltdU1hcFZpZXcpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhc2VXaWRnZXRQcm9wcyA9IHRoaXMucHJvcHM/LmJhc2VXaWRnZXRQcm9wc1xuXG4gICAgICBpZiAoYmFzZVdpZGdldFByb3BzKSB7XG4gICAgICAgIC8vIElmIGN1cnJlbnQgdXJsIGFjdGl2ZV9kYXRhc291cmNlX2lkIGlzIGVtcHR5LCB3ZSBzaG91bGQgdHJlYXQgaXQgYXMgaW5pdGlhbE1hcERhdGFTb3VyY2VJRC5cbiAgICAgICAgbGV0IHVybEFjdGl2ZURzSWQgPSBiYXNlV2lkZ2V0UHJvcHMucnVudGltZVVybEhhc2hQYXJhbXM/LmFjdGl2ZV9kYXRhc291cmNlX2lkIHx8IGJhc2VXaWRnZXRQcm9wcy5jb25maWcuaW5pdGlhbE1hcERhdGFTb3VyY2VJRFxuXG4gICAgICAgIC8vIGluaXRpYWxNYXBEYXRhU291cmNlSUQgb25seSBleGlzdHMgd2hlbiB1c2VEYXRhU291cmNlcy5sZW5ndGggPT09IDIsIHNvIGluaXRpYWxNYXBEYXRhU291cmNlSUQgbWF5YmUgbnVsbC5cbiAgICAgICAgaWYgKCF1cmxBY3RpdmVEc0lkKSB7XG4gICAgICAgICAgLy8gbWVhbnMgcnVudGltZVVybEhhc2hQYXJhbXMuYWN0aXZlX2RhdGFzb3VyY2VfaWQgYW5kIGNvbmZpZy5pbml0aWFsTWFwRGF0YVNvdXJjZUlEIGFyZSBudWxsXG4gICAgICAgICAgY29uc3QgdXNlRGF0YVNvdXJjZXMgPSBiYXNlV2lkZ2V0UHJvcHMudXNlRGF0YVNvdXJjZXNcblxuICAgICAgICAgIGlmICh1c2VEYXRhU291cmNlcyAmJiB1c2VEYXRhU291cmNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHVybEFjdGl2ZURzSWQgPSB1c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXVybEFjdGl2ZURzSWQpIHtcbiAgICAgICAgICB1cmxBY3RpdmVEc0lkID0gJydcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld0FjdGl2ZURzSWQgPSBqaW11TWFwVmlldy5kYXRhU291cmNlSWQgfHwgJydcblxuICAgICAgICBpZiAobmV3QWN0aXZlRHNJZCAhPT0gdXJsQWN0aXZlRHNJZCkge1xuICAgICAgICAgIHVwZGF0ZVVybEhhc2hQYXJhbXNGb3JBY3RpdmVKaW11TWFwVmlldyhqaW11TWFwVmlldylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBqaW11TWFwVmlldyBpcyBub3QgYWN0aXZlXG4gICAgICBqaW11TWFwVmlldy5zZXRJc0FjdGl2ZShpc0FjdGl2ZSlcbiAgICB9XG4gIH1cblxuICBpc1Nob3dNYXBTd2l0Y2hCdG4gPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgY29uc3QgZmlyc3RNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5maXJzdE1hcEluc3RhbmNlIGFzIE1hcEJhc2VcbiAgICBjb25zdCBzZWNvbmRNYXBJbnN0YW5jZSA9IHRoaXMucmVmcy5zZWNvbmRNYXBJbnN0YW5jZSBhcyBNYXBCYXNlXG4gICAgaWYgKGZpcnN0TWFwSW5zdGFuY2UgJiYgc2Vjb25kTWFwSW5zdGFuY2UpIHtcbiAgICAgIGlmIChmaXJzdE1hcEluc3RhbmNlLmdldE1hcExvYWRTdGF0dXMoKSAhPT0gTWFwTG9hZFN0YXR1cy5Mb2FkaW5nICYmIHNlY29uZE1hcEluc3RhbmNlLmdldE1hcExvYWRTdGF0dXMoKSAhPT0gTWFwTG9hZFN0YXR1cy5Mb2FkaW5nKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGdldEN1cnJlbnRWaXNpYmxlRHNJZCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5tdWx0aU1hcFN0eWxlWzBdLm9wYWNpdHkgPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlVmlld0dyb3VwQ3JlYXRlID0gKHZpZXdHcm91cDogSmltdU1hcFZpZXdHcm91cCkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLm9uVmlld0dyb3VwQ3JlYXRlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uVmlld0dyb3VwQ3JlYXRlKHZpZXdHcm91cClcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb2JpbGVQYW5lbENvbnRlbnRDaGFuZ2UgPSAobW9iaWxlUGFuZWxDb250ZW50OiBKU1guRWxlbWVudCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgbW9iaWxlUGFuZWxDb250ZW50OiBtb2JpbGVQYW5lbENvbnRlbnRcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlQWN0aXZlVG9vbEluZm9DaGFuZ2UgPSAoYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhY3RpdmVUb29sSW5mbzogYWN0aXZlVG9vbEluZm9cbiAgICB9KVxuICB9XG5cbiAgLy8gaGFuZGxlU2hvd09uTWFwRGF0YUNoYW5nZSA9IChzaG93T25NYXBEYXRhc0tleTogc3RyaW5nW10pID0+IHtcbiAgLy8gIHRoaXMuc2V0U3RhdGUoe1xuICAvLyAgICBzaG93T25NYXBEYXRhc0tleTogc2hvd09uTWFwRGF0YXNLZXlcbiAgLy8gIH0pXG4gIC8vIH1cblxuICBnZXRMYXlvdXRDb25maWcgKCk6IExheW91dEpzb24ge1xuICAgIGlmICh0aGlzLnByb3BzLndpZHRoQnJlYWtwb2ludCA9PT0gJ3hzbWFsbCcpIHtcbiAgICAgIHJldHVybiBtb2JpbGVMYXlvdXRKc29uc1swXVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLmxheW91dEluZGV4ID8gcGNMYXlvdXRKc29uc1t0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5jb25maWcubGF5b3V0SW5kZXhdIDogcGNMYXlvdXRKc29uc1swXVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgbXV0aVNvdXJjZU1hcERvbSA9IHRoaXMuZG9tUmVmLmN1cnJlbnRcblxuICAgIHJldHVybiAoXG4gICAgICA8TXVsdGlTb3VyY2VNYXBDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7XG4gICAgICAgIG1hcFdpZGdldElkOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5pZCxcbiAgICAgICAgbWFwV2lkZ2V0SGVpZ2h0OiB0aGlzLnByb3BzLndpZGdldEhlaWdodCxcbiAgICAgICAgaXNTaG93TWFwU3dpdGNoQnRuOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcyAmJiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy51c2VEYXRhU291cmNlcy5sZW5ndGggPiAxICYmIHRoaXMuaXNTaG93TWFwU3dpdGNoQnRuKCksXG4gICAgICAgIGRhdGFTb3VyY2VJZHM6IFt0aGlzLnN0YXRlLmZpcnN0TWFwRHNJZCwgdGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkXSxcbiAgICAgICAgYWN0aXZlRGF0YVNvdXJjZUlkOiB0aGlzLmdldEN1cnJlbnRWaXNpYmxlRHNJZCgpLFxuICAgICAgICBzd2l0Y2hNYXA6IHRoaXMuc3dpdGNoTWFwLFxuICAgICAgICBmdWxsU2NyZWVuTWFwOiB0aGlzLnByb3BzLmZ1bGxTY3JlZW5NYXAsXG4gICAgICAgIGlzRnVsbFNjcmVlbjogdGhpcy5wcm9wcy5pc0Z1bGxTY3JlZW4sXG4gICAgICAgIG1vYmlsZVBhbmVsQ29udGFpbmVyOiB0aGlzLnN0YXRlLm1vYmlsZVBhbmVsQ29udGFpbmVyLFxuICAgICAgICBvbk1vYmlsZVBhbmVsQ29udGVudENoYW5nZTogdGhpcy5oYW5kbGVNb2JpbGVQYW5lbENvbnRlbnRDaGFuZ2UsXG4gICAgICAgIGluaXRpYWxNYXBTdGF0ZTogdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnICYmIHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy5pbml0aWFsTWFwU3RhdGUsXG4gICAgICAgIHRoZW1lOiB0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy50aGVtZVxuICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdiByZWY9e3RoaXMuZG9tUmVmfSBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIG11bHRpLXNvdXJjZS1tYXAnPlxuICAgICAgICAgIHshdGhpcy5wcm9wcy5pc0RlZmF1bHRNYXAgJiYgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwIG11bHRpLW1hcC1jb250YWluZXInIHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3ctMTAwIGgtMTAwIG1hcDEnLCB7XG4gICAgICAgICAgICAgICAgJ211bHRpc291cmNlbWFwLWl0ZW0tYXBwZWFyJzogdGhpcy5zdGF0ZS51c2VBbmltYXRpb24gJiYgdGhpcy5zdGF0ZS5tdWx0aU1hcFN0eWxlWzBdLm9wYWNpdHksXG4gICAgICAgICAgICAgICAgJ211bHRpc291cmNlbWFwLWl0ZW0tZGlzYXBwZWFyJzogdGhpcy5zdGF0ZS51c2VBbmltYXRpb24gJiYgISh0aGlzLnN0YXRlLm11bHRpTWFwU3R5bGVbMF0ub3BhY2l0eSksXG4gICAgICAgICAgICAgICAgJ211bHRpc291cmNlbWFwLWl0ZW0tYXBwZWFyLW5vYW5pbWF0ZSc6IHRoaXMuc3RhdGUubXVsdGlNYXBTdHlsZVswXS5vcGFjaXR5LFxuICAgICAgICAgICAgICAgICdtdWx0aXNvdXJjZW1hcC1pdGVtLWRpc2FwcGVhci1ub2FuaW1hdGUnOiAhKHRoaXMuc3RhdGUubXVsdGlNYXBTdHlsZVswXS5vcGFjaXR5KVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIHpJbmRleDogdGhpcy5zdGF0ZS5tdWx0aU1hcFN0eWxlWzBdLnpJbmRleCB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5maXJzdE1hcERzSWQgJiYgdGhpcy5wcm9wcy5pc01hcEluVmlzaWJsZUFyZWEgJiYgPE1hcEJhc2VcbiAgICAgICAgICAgICAgICByZWY9J2ZpcnN0TWFwSW5zdGFuY2UnXG4gICAgICAgICAgICAgICAgYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wc30gb25NYXBMb2FkZWQ9e3RoaXMuaGFuZGxlTWFwTG9hZGVkfVxuICAgICAgICAgICAgICAgIG9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkPXt0aGlzLmhhbmRsZU11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZH1cbiAgICAgICAgICAgICAgICBvbkV4dGVudENoYW5nZWQ9e3RoaXMub25NYXBiYXNlRXh0ZW50Q2hhbmdlZH1cbiAgICAgICAgICAgICAgICBvbkppbXVNYXBWaWV3Q3JlYXRlZD17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NyZWF0ZWR9XG4gICAgICAgICAgICAgICAgb25BY3RpdmVUb29sSW5mb0NoYW5nZT17dGhpcy5oYW5kbGVBY3RpdmVUb29sSW5mb0NoYW5nZX1cbiAgICAgICAgICAgICAgICAvLyBvblNob3dPbk1hcERhdGFDaGFuZ2VkPXt0aGlzLmhhbmRsZVNob3dPbk1hcERhdGFDaGFuZ2V9XG4gICAgICAgICAgICAgICAgc3RhcnRMb2FkTW9kdWxlcz17dGhpcy5wcm9wcy5zdGFydExvYWRNb2R1bGVzfVxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJZD17dGhpcy5zdGF0ZS5maXJzdE1hcERzSWR9XG4gICAgICAgICAgICAgICAgd2lkdGhCcmVha3BvaW50PXt0aGlzLnByb3BzLndpZHRoQnJlYWtwb2ludH1cbiAgICAgICAgICAgICAgICBpc01hcEluVmlzaWJsZUFyZWE9e3RoaXMucHJvcHMuaXNNYXBJblZpc2libGVBcmVhfVxuICAgICAgICAgICAgICAgIG11bHRpU291cmNlTWFwRG9tPXttdXRpU291cmNlTWFwRG9tfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDwvTWFwQmFzZT59XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd3LTEwMCBoLTEwMCBtYXAyJywge1xuICAgICAgICAgICAgICAgICdtdWx0aXNvdXJjZW1hcC1pdGVtLWFwcGVhcic6IHRoaXMuc3RhdGUudXNlQW5pbWF0aW9uICYmIHRoaXMuc3RhdGUubXVsdGlNYXBTdHlsZVsxXS5vcGFjaXR5LFxuICAgICAgICAgICAgICAgICdtdWx0aXNvdXJjZW1hcC1pdGVtLWRpc2FwcGVhcic6IHRoaXMuc3RhdGUudXNlQW5pbWF0aW9uICYmICEodGhpcy5zdGF0ZS5tdWx0aU1hcFN0eWxlWzFdLm9wYWNpdHkpLFxuICAgICAgICAgICAgICAgICdtdWx0aXNvdXJjZW1hcC1pdGVtLWFwcGVhci1ub2FuaW1hdGUnOiB0aGlzLnN0YXRlLm11bHRpTWFwU3R5bGVbMV0ub3BhY2l0eSxcbiAgICAgICAgICAgICAgICAnbXVsdGlzb3VyY2VtYXAtaXRlbS1kaXNhcHBlYXItbm9hbmltYXRlJzogISh0aGlzLnN0YXRlLm11bHRpTWFwU3R5bGVbMV0ub3BhY2l0eSlcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB6SW5kZXg6IHRoaXMuc3RhdGUubXVsdGlNYXBTdHlsZVsxXS56SW5kZXggfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2Vjb25kTWFwRHNJZCAmJiB0aGlzLnByb3BzLmlzTWFwSW5WaXNpYmxlQXJlYSAmJiA8TWFwQmFzZVxuICAgICAgICAgICAgICAgIHJlZj0nc2Vjb25kTWFwSW5zdGFuY2UnXG4gICAgICAgICAgICAgICAgYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wc30gb25NYXBMb2FkZWQ9e3RoaXMuaGFuZGxlTWFwTG9hZGVkfVxuICAgICAgICAgICAgICAgIG9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkPXt0aGlzLmhhbmRsZU11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZH1cbiAgICAgICAgICAgICAgICBvbkV4dGVudENoYW5nZWQ9e3RoaXMub25NYXBiYXNlRXh0ZW50Q2hhbmdlZH1cbiAgICAgICAgICAgICAgICBvbkppbXVNYXBWaWV3Q3JlYXRlZD17dGhpcy5oYW5kbGVKaW11TWFwVmlld0NyZWF0ZWR9XG4gICAgICAgICAgICAgICAgb25BY3RpdmVUb29sSW5mb0NoYW5nZT17dGhpcy5oYW5kbGVBY3RpdmVUb29sSW5mb0NoYW5nZX1cbiAgICAgICAgICAgICAgICAvLyBvblNob3dPbk1hcERhdGFDaGFuZ2VkPXt0aGlzLmhhbmRsZVNob3dPbk1hcERhdGFDaGFuZ2V9XG4gICAgICAgICAgICAgICAgc3RhcnRMb2FkTW9kdWxlcz17dGhpcy5wcm9wcy5zdGFydExvYWRNb2R1bGVzfVxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2VJZD17dGhpcy5zdGF0ZS5zZWNvbmRNYXBEc0lkfVxuICAgICAgICAgICAgICAgIHdpZHRoQnJlYWtwb2ludD17dGhpcy5wcm9wcy53aWR0aEJyZWFrcG9pbnR9XG4gICAgICAgICAgICAgICAgaXNNYXBJblZpc2libGVBcmVhPXt0aGlzLnByb3BzLmlzTWFwSW5WaXNpYmxlQXJlYX1cbiAgICAgICAgICAgICAgICBtdWx0aVNvdXJjZU1hcERvbT17bXV0aVNvdXJjZU1hcERvbX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8L01hcEJhc2U+fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+fVxuXG4gICAgICAgICAge3RoaXMucHJvcHMuaXNEZWZhdWx0TWFwICYmIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCBkZWZhdWx0LW1hcC1jb250YWluZXInIHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3ctMTAwIGgtMTAwIG11bHRpc291cmNlbWFwLWl0ZW0tYXBwZWFyLW5vYW5pbWF0ZSBkZWZhdWx0LW1hcC1tYXBiYXNlLWNvbnRhaW5lcicpfVxuICAgICAgICAgICAgICBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgekluZGV4OiAndW5zZXQnIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy5pc01hcEluVmlzaWJsZUFyZWEgJiYgPE1hcEJhc2VcbiAgICAgICAgICAgICAgICByZWY9J2ZpcnN0TWFwSW5zdGFuY2UnIGlzRGVmYXVsdE1hcD17dGhpcy5wcm9wcy5pc0RlZmF1bHRNYXB9XG4gICAgICAgICAgICAgICAgYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wc30gb25NYXBMb2FkZWQ9e3RoaXMuaGFuZGxlTWFwTG9hZGVkfVxuICAgICAgICAgICAgICAgIG9uTXV0YWJsZVN0YXRlUHJvcHNDaGFuZ2VkPXt0aGlzLmhhbmRsZU11dGFibGVTdGF0ZVByb3BzQ2hhbmdlZH0gZGF0YVNvdXJjZUlkPXtudWxsfVxuICAgICAgICAgICAgICAgIG9uRXh0ZW50Q2hhbmdlZD17dGhpcy5vbk1hcGJhc2VFeHRlbnRDaGFuZ2VkfVxuICAgICAgICAgICAgICAgIG9uSmltdU1hcFZpZXdDcmVhdGVkPXt0aGlzLmhhbmRsZUppbXVNYXBWaWV3Q3JlYXRlZH1cbiAgICAgICAgICAgICAgICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlPXt0aGlzLmhhbmRsZUFjdGl2ZVRvb2xJbmZvQ2hhbmdlfVxuICAgICAgICAgICAgICAgIC8vIG9uU2hvd09uTWFwRGF0YUNoYW5nZWQ9e3RoaXMuaGFuZGxlU2hvd09uTWFwRGF0YUNoYW5nZX1cbiAgICAgICAgICAgICAgICBzdGFydExvYWRNb2R1bGVzPXt0aGlzLnByb3BzLnN0YXJ0TG9hZE1vZHVsZXN9XG4gICAgICAgICAgICAgICAgd2lkdGhCcmVha3BvaW50PXt0aGlzLnByb3BzLndpZHRoQnJlYWtwb2ludH1cbiAgICAgICAgICAgICAgICBpc01hcEluVmlzaWJsZUFyZWE9e3RoaXMucHJvcHMuaXNNYXBJblZpc2libGVBcmVhfVxuICAgICAgICAgICAgICAgIGRlZmF1bHRNYXBJbmZvPXt0aGlzLnByb3BzLmRlZmF1bHRNYXBJbmZvfVxuICAgICAgICAgICAgICAgIG11bHRpU291cmNlTWFwRG9tPXttdXRpU291cmNlTWFwRG9tfVxuICAgICAgICAgICAgICAvPiB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj59XG5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5jdXJyZW50SmltdU1hcFZpZXdJZCAmJiA8TWFwRml4ZWRMYXlvdXRcbiAgICAgICAgICAgIGppbXVNYXBWaWV3PXtNYXBWaWV3TWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEppbXVNYXBWaWV3QnlJZCh0aGlzLnN0YXRlLmN1cnJlbnRKaW11TWFwVmlld0lkKX1cbiAgICAgICAgICAgIGFwcE1vZGU9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmFwcE1vZGV9IGxheW91dHM9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmxheW91dHN9XG4gICAgICAgICAgICBMYXlvdXRFbnRyeT17dGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzICYmIHRoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmJ1aWxkZXJTdXBwb3J0TW9kdWxlcy5MYXlvdXRFbnRyeX1cbiAgICAgICAgICAgIHdpZGdldE1hbmlmZXN0TmFtZT17dGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMubWFuaWZlc3QubmFtZX1cbiAgICAgICAgICA+XG4gICAgICAgICAgPC9NYXBGaXhlZExheW91dD59XG5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5jdXJyZW50SmltdU1hcFZpZXdJZCAmJiBNYXBWaWV3TWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldEppbXVNYXBWaWV3QnlJZCh0aGlzLnN0YXRlLmN1cnJlbnRKaW11TWFwVmlld0lkKSAmJlxuICAgICAgICAgICAgPE1hcFRvb2xMYXlvdXRcbiAgICAgICAgICAgICAgbWFwV2lkZ2V0SWQ9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmlkfSBpc01vYmlsZT17dGhpcy5wcm9wcy53aWR0aEJyZWFrcG9pbnQgPT09ICd4c21hbGwnfVxuICAgICAgICAgICAgICBqaW11TWFwVmlldz17TWFwVmlld01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRKaW11TWFwVmlld0J5SWQodGhpcy5zdGF0ZS5jdXJyZW50SmltdU1hcFZpZXdJZCl9XG4gICAgICAgICAgICAgIGFwcE1vZGU9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmFwcE1vZGV9IGxheW91dHM9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmxheW91dHN9IGludGw9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmludGx9XG4gICAgICAgICAgICAgIExheW91dEVudHJ5PXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5idWlsZGVyU3VwcG9ydE1vZHVsZXMgJiYgdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuYnVpbGRlclN1cHBvcnRNb2R1bGVzLkxheW91dEVudHJ5fVxuICAgICAgICAgICAgICBsYXlvdXRDb25maWc9e3RoaXMuZ2V0TGF5b3V0Q29uZmlnKCl9IHRvb2xDb25maWc9e3RoaXMucHJvcHMuYmFzZVdpZGdldFByb3BzLmNvbmZpZy50b29sQ29uZmlnID8gdGhpcy5wcm9wcy5iYXNlV2lkZ2V0UHJvcHMuY29uZmlnLnRvb2xDb25maWcgOiB7fX1cbiAgICAgICAgICAgICAgYWN0aXZlVG9vbEluZm89e3RoaXMuc3RhdGUuYWN0aXZlVG9vbEluZm99IG9uQWN0aXZlVG9vbEluZm9DaGFuZ2U9e3RoaXMuaGFuZGxlQWN0aXZlVG9vbEluZm9DaGFuZ2V9IHRoZW1lPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy50aGVtZX1cbiAgICAgICAgICAgICAgd2lkZ2V0TWFuaWZlc3ROYW1lPXt0aGlzLnByb3BzLmJhc2VXaWRnZXRQcm9wcy5tYW5pZmVzdC5uYW1lfSB3aWRnZXRIZWlnaHQ9e3RoaXMucHJvcHMud2lkdGhCcmVha3BvaW50ID09PSAneHNtYWxsJyA/IG51bGwgOiB0aGlzLnByb3BzLndpZGdldEhlaWdodH1cbiAgICAgICAgICAgICAgYXV0b0NvbnRyb2xXaWRnZXRJZD17dGhpcy5wcm9wcy5hdXRvQ29udHJvbFdpZGdldElkfVxuICAgICAgICAgICAgLz59XG5cbiAgICAgICAgICA8SmltdU1hcFZpZXdDb21wb25lbnQgdXNlTWFwV2lkZ2V0SWQ9e3RoaXMudXNlTWFwV2lkZ2V0SWRzPy5bMF19IG9uVmlld0dyb3VwQ3JlYXRlPXt0aGlzLmhhbmRsZVZpZXdHcm91cENyZWF0ZX0gLz5cbiAgICAgICAgICA8UmVhY3RSZXNpemVEZXRlY3RvciBoYW5kbGVIZWlnaHQgaGFuZGxlV2lkdGggb25SZXNpemU9e3RoaXMub25SZXNpemV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9NdWx0aVNvdXJjZU1hcENvbnRleHQuUHJvdmlkZXI+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCwgY2xhc3NOYW1lcywgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBVSUNvbXBvbmVudCwgdHlwZSBVSUNvbXBvbmVudFByb3BzIH0gZnJvbSAnLi91aS1jb21wb25lbnQnXG5pbXBvcnQgeyB0eXBlIFRvb2xDb25maWcgfSBmcm9tICcuLi8uLi8uLi9jb25maWcnXG5pbXBvcnQgeyB0eXBlIEFjdGl2ZVRvb2xJbmZvIH0gZnJvbSAnLi9iYXNlLXRvb2wnXG5pbXBvcnQgeyB0eXBlIExheW91dEpzb24sIHR5cGUgVG9vbEpzb24gfSBmcm9tICcuLi9jb25maWcnXG5pbXBvcnQgVG9vbE1vZHVsZXMgZnJvbSAnLi4vdG9vbC1tb2R1bGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xTaGVsbFByb3BzIGV4dGVuZHMgVUlDb21wb25lbnRQcm9wcyB7XG4gIG1hcFdpZGdldElkOiBzdHJpbmdcbiAgbGF5b3V0Q29uZmlnOiBMYXlvdXRKc29uXG4gIHRvb2xDb25maWc6IFRvb2xDb25maWdcbiAgdG9vbE5hbWU6IHN0cmluZ1xuICBpc01vYmlsZT86IGJvb2xlYW5cbiAgaXNIaWRkZW4/OiBib29sZWFuXG4gIGludGw/OiBJbnRsU2hhcGVcbiAgaXNMYXN0RWxlbWVudD86IGJvb2xlYW5cblxuICBjbGFzc05hbWU/OiBzdHJpbmdcbiAgYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvXG4gIG9uQWN0aXZlVG9vbEluZm9DaGFuZ2U6IChhY3RpdmVUb29sSW5mbzogQWN0aXZlVG9vbEluZm8pID0+IHZvaWRcbiAgYXV0b0NvbnRyb2xXaWRnZXRJZDogc3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VUb29sU2hlbGwgZXh0ZW5kcyBVSUNvbXBvbmVudDxUb29sU2hlbGxQcm9wcywgdW5rbm93bj4ge1xuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IFRvb2xDbGFzcyA9IFRvb2xNb2R1bGVzW3RoaXMucHJvcHMudG9vbE5hbWVdXG5cbiAgICBsZXQgaXNBdmFpbGFibGUgPSB0cnVlXG5cbiAgICBpZiAoVG9vbENsYXNzKSB7XG4gICAgICBpZiAoVG9vbENsYXNzLmlzQXZhaWxhYmxlKSB7XG4gICAgICAgIGlzQXZhaWxhYmxlID0gVG9vbENsYXNzLmlzQXZhaWxhYmxlKHRoaXMucHJvcHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc0F2YWlsYWJsZSA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXNBdmFpbGFibGUgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChpc0F2YWlsYWJsZSkge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gYGV4Ym1hcC11aSBleGJtYXAtdWktdG9vbC1zaGVsbCBkaXZpdGVtIGV4Ym1hcC11aS10b29sLXNoZWxsLSR7dGhpcy5wcm9wcy50b29sTmFtZX1gXG4gICAgICBjb25zdCBzdHlsZU9iaiA9IHRoaXMucHJvcHMubGF5b3V0Q29uZmlnLmVsZW1lbnRzW3RoaXMucHJvcHMudG9vbE5hbWVdLnN0eWxlIHx8IHt9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXModGhpcy5wcm9wcy5jbGFzc05hbWUsIGNsYXNzTmFtZSwgKHRoaXMucHJvcHMubGF5b3V0Q29uZmlnLmVsZW1lbnRzW3RoaXMucHJvcHMudG9vbE5hbWVdIGFzIFRvb2xKc29uKS5jbGFzc05hbWUsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICdleGJtYXAtdWktaGlkZGVuLWVsZW1lbnQnOiB0aGlzLnByb3BzLmlzSGlkZGVuLFxuICAgICAgICAgICAgICAncm91bmRlZC1waWxsJzogWydDb21wYXNzJ10uaW5jbHVkZXModGhpcy5wcm9wcy50b29sTmFtZSlcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgIHN0eWxlPXtzdHlsZU9ian1cbiAgICAgICAgPlxuICAgICAgICAgIDxUb29sQ2xhc3NcbiAgICAgICAgICAgIG1hcFdpZGdldElkPXt0aGlzLnByb3BzLm1hcFdpZGdldElkfVxuICAgICAgICAgICAgcmVmPSdiYXNlVG9vbEluc3RhbmNlJyB0b29sSnNvbj17dGhpcy5wcm9wcy5sYXlvdXRDb25maWcuZWxlbWVudHNbdGhpcy5wcm9wcy50b29sTmFtZV19IHRvb2xOYW1lPXt0aGlzLnByb3BzLnRvb2xOYW1lfSBpc01vYmlsZT17dGhpcy5wcm9wcy5pc01vYmlsZX1cbiAgICAgICAgICAgIGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fSBhY3RpdmVUb29sSW5mbz17dGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mb30gb25BY3RpdmVUb29sSW5mb0NoYW5nZT17dGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlfVxuICAgICAgICAgICAgaW50bD17dGhpcy5wcm9wcy5pbnRsfSB0aGVtZT17dGhpcy5wcm9wcy50aGVtZX0gYXV0b0NvbnRyb2xXaWRnZXRJZD17dGhpcy5wcm9wcy5hdXRvQ29udHJvbFdpZGdldElkfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc01vYmlsZSkge1xuICAgICAgICByZXR1cm4gPHNwYW4gLz5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBjc3MsIGpzeCwgcG9saXNoZWQsIGNsYXNzTmFtZXMsIFJlYWN0RE9NLCBFcnJvckJvdW5kYXJ5LCBSZWFjdFJlc2l6ZURldGVjdG9yLCB0eXBlIEludGxTaGFwZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24sIFBvcHBlciwgTW9iaWxlUGFuZWxNYW5hZ2VyLCB0eXBlIE1vZGlmaWVycyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBVSUNvbXBvbmVudCwgdHlwZSBVSUNvbXBvbmVudFByb3BzIH0gZnJvbSAnLi91aS1jb21wb25lbnQnXG5pbXBvcnQgeyB0eXBlIFRvb2xKc29uIH0gZnJvbSAnLi4vY29uZmlnJ1xuaW1wb3J0IFNjcm9sbENvbnRhaW5lciBmcm9tICcuL3Njcm9sbC1jb250YWluZXInXG5pbXBvcnQgUGFuZWxTaGVsbCBmcm9tICcuL3BhbmVsLXNoZWxsJ1xuaW1wb3J0IHsgTXVsdGlTb3VyY2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9tdWx0aXNvdXJjZW1hcC1jb250ZXh0J1xuaW1wb3J0IHsgdHlwZSBUb29sU2hlbGxQcm9wcyB9IGZyb20gJy4vYmFzZS10b29sLXNoZWxsJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2ZVRvb2xJbmZvIHtcbiAgYWN0aXZlVG9vbE5hbWU6IHN0cmluZ1xuICBhY3RpdmVUb29sVGl0bGU6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VUb29sUHJvcHMgZXh0ZW5kcyBVSUNvbXBvbmVudFByb3BzIHtcbiAgbWFwV2lkZ2V0SWQ6IHN0cmluZ1xuICB0b29sSnNvbjogVG9vbEpzb25cbiAgdG9vbE5hbWU6IHN0cmluZ1xuICBpc01vYmlsZT86IGJvb2xlYW5cbiAgaW50bD86IEludGxTaGFwZVxuXG4gIGFjdGl2ZVRvb2xJbmZvOiBBY3RpdmVUb29sSW5mb1xuICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlOiAoYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvKSA9PiB2b2lkXG4gIGF1dG9Db250cm9sV2lkZ2V0SWQ6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEljb25UeXBlIHtcbiAgaWNvbjogUmVhY3QuQ29tcG9uZW50Q2xhc3M8UmVhY3QuU1ZHQXR0cmlidXRlczxTVkdFbGVtZW50Pj5cbiAgb25JY29uQ2xpY2s/OiAoZXZ0PzogUmVhY3QuTW91c2VFdmVudDxhbnk+KSA9PiB2b2lkXG59XG5cbmNvbnN0IGRlZmF1bHRJY29uID0gcmVxdWlyZSgnamltdS11aS9saWIvaWNvbnMvd2lkZ2V0cy5zdmcnKVxuY29uc3QgY2xvc2VJY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL2Nsb3NlLTEyLnN2ZycpXG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlVG9vbDxQIGV4dGVuZHMgQmFzZVRvb2xQcm9wcywgUz4gZXh0ZW5kcyBVSUNvbXBvbmVudDxQLCBTPiB7XG4gIGljb25Db250YWluZXI6IEhUTUxFbGVtZW50XG4gIHRvb2xOYW1lOiBzdHJpbmcgPSBudWxsXG4gIGlzQ29udGFpbmVkVG9Nb2JpbGVQYW5lbCA9IGZhbHNlXG4gIC8vIHRoaXMgcGFyYW0gaXMgdXNlZCB0byB1cGRhdGUgcG9wIHBvc2l0aW9uIHdoZW4gcGMgY29udGVudCBoYXMgY2hhbmdlZFxuICBnZW5lcmF0aW9uPzogbnVtYmVyID0gMFxuICBtb2RpZmllcnM6IE1vZGlmaWVyc1xuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgY29uc3QgbWFwQ29udGFpbmVyID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldyAmJiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXcgJiYgdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LmNvbnRhaW5lclxuICAgIGlmIChNb2JpbGVQYW5lbE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5jaGVja0RvbUlzQ29udGFpbmVkKG1hcENvbnRhaW5lcikpIHtcbiAgICAgIHRoaXMuaXNDb250YWluZWRUb01vYmlsZVBhbmVsID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLm1vZGlmaWVycyA9IFt7XG4gICAgICBuYW1lOiAnZmxpcCcsXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIHBhZGRpbmc6IDBcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgYm91bmRhcnk6IG1hcENvbnRhaW5lclxuICAgICAgfVxuICAgIH1dXG5cbiAgICB0aGlzLl9vbktleURvd24gPSB0aGlzLl9vbktleURvd24uYmluZCh0aGlzKVxuICAgIHRoaXMub25Qb3BwZXJUb2dnbGUgPSB0aGlzLm9uUG9wcGVyVG9nZ2xlLmJpbmQodGhpcylcbiAgfVxuXG4gIHByaXZhdGUgX2Nzc1N0eWxlICgpIHtcbiAgICBjb25zdCBleHRlbmRDc3NTdHlsZSA9IHRoaXMuZ2V0RXh0ZW5kQ3NzU3R5bGUoKVxuXG4gICAgcmV0dXJuIGNzc2BcbiAgICAgIC5leGJtYXAtYmFzZXRvb2wtbG9hZGVyIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGFuaW1hdGlvbjogZXNyaS1mYWRlLWluIDUwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgfVxuXG4gICAgICAuZXhibWFwLWJhc2V0b29sLWxvYWRlcjpiZWZvcmUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDExMCwxMTAsMTEwLDAuMyk7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5leGJtYXAtYmFzZXRvb2wtbG9hZGVyOmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzZlNmU2ZTtcbiAgICAgICAgd2lkdGg6IDIwJTtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgYW5pbWF0aW9uOiBsb29waW5nLXByb2dyZXNzcy1iYXItYW5pIDE1MDBtcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSA1MDBtcyBlYXNlLWluLW91dDtcbiAgICAgIH1cblxuICAgICAgJHtleHRlbmRDc3NTdHlsZX1cblxuICAgICAgLyogcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLDAsMCwwLjMpO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAuZXhibWFwLXVpLXRvb2wtaWNvbiB7XG4gICAgICAgIGZpbGw6IGJsYWNrO1xuICAgICAgICBsZWZ0OiA4cHg7XG4gICAgICAgIHRvcDogOHB4O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuXG4gICAgICAuZXhibWFwLXVpLWV4cGFuZC1jb250ZW50IHtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAyNTBtcyBlYXNlLWluLW91dCwgbWFyZ2luIDI1MG1zIGVhc2UtaW4tb3V0O1xuICAgICAgICBtaW4taGVpZ2h0OiAxMHB4O1xuICAgICAgICBtaW4td2lkdGg6IDEwcHg7XG4gICAgICAgIHBhZGRpbmctdG9wOiAke3BvbGlzaGVkLnJlbSgxMCl9O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogJHtwb2xpc2hlZC5yZW0oMTApfTtcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAke3BvbGlzaGVkLnJlbSgyMCl9O1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAke3BvbGlzaGVkLnJlbSgyMCl9O1xuXG4gICAgICAgIC5leGJtYXAtdWktZXhwYW5kLWNvbnRlbnQtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAke3BvbGlzaGVkLnJlbSgxMCl9O1xuICAgICAgICB9XG5cbiAgICAgICAgLnBhbmVsLXRpdGxlIHtcbiAgICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDE2KX07XG4gICAgICAgICAgY29sb3I6ICMwMDAwMDA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1wbGFjZW1lbnQtYm90dG9tIHtcbiAgICAgICAgcGFkZGluZy10b3A6IDAuMjVyZW0gIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1wbGFjZW1lbnQtbGVmdCB7XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IDAuMjVyZW0gIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1wbGFjZW1lbnQtcmlnaHQge1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDAuMjVyZW0gIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1wbGFjZW1lbnQtdG9wIHtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDAuMjVyZW0gIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmV4Ym1hcC1iYXNldG9vbC1sb2FkZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYW5pbWF0aW9uOiBlc3JpLWZhZGUtaW4gNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5leGJtYXAtYmFzZXRvb2wtbG9hZGVyOmJlZm9yZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEwLDExMCwxMTAsMC4zKTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSA1MDBtcyBlYXNlLWluLW91dDtcbiAgICAgIH1cblxuICAgICAgLmV4Ym1hcC1iYXNldG9vbC1sb2FkZXI6YWZ0ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNmU2ZTZlO1xuICAgICAgICB3aWR0aDogMjAlO1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICBhbmltYXRpb246IGxvb3BpbmctcHJvZ3Jlc3NzLWJhci1hbmkgMTUwMG1zIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDUwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgfSAqL1xuICAgIGBcbiAgfVxuXG4gIGFic3RyYWN0IGdldFRpdGxlICgpOiBzdHJpbmdcblxuICBhYnN0cmFjdCBnZXRJY29uICgpOiBJY29uVHlwZVxuXG4gIGFic3RyYWN0IGdldEV4cGFuZFBhbmVsICgpOiBKU1guRWxlbWVudFxuXG4gIGdldEV4dGVuZENzc1N0eWxlICgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGZvY3VzRGVmYXVsdEVsZW1lbnQgKCkge31cblxuICBvblNob3dQYW5lbCAoKSB7fVxuXG4gIG9uQ2xvc2VQYW5lbCAoKSB7fVxuXG4gIGRlc3Ryb3kgKCkge31cblxuICBzdGF0aWMgZ2V0SXNOZWVkU2V0dGluZyAoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRydW4gdHJ1ZSBpZiB0aGUgdG9vbCBzaG91bGQgYmUgcmVuZGVyZWQgb24gdGhlIG1hcCwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cbiAgICogZS5nLiBTY2FsZUJhciBvbmx5IHN1cHBvcnRzIG1hcCB2aWV3LCBzbyBTY2FsZUJhclRvb2wuaXNBdmFpbGFibGUoKSB3aWxsIHJldHVybiBmYWxzZSBpZiB0aGUgbWFwIGlzIHNjZW5lIHZpZXcuXG4gICAqL1xuICBzdGF0aWMgaXNBdmFpbGFibGUgKHRvb2xTaGVsbFByb3BzOiBUb29sU2hlbGxQcm9wcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBwcml2YXRlIG9uUG9wcGVyVG9nZ2xlIChlOiBhbnkpIHtcbiAgICBpZiAoZSkge1xuICAgICAgaWYgKGUudHlwZSA9PT0gJ2tleWRvd24nICYmIGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICB0aGlzLl9vbkljb25DbGljaygpXG4gICAgICAgIHRoaXMuaWNvbkNvbnRhaW5lci5mb2N1cygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25LZXlEb3duIChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PGFueT4pIHtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8/LmFjdGl2ZVRvb2xOYW1lICE9PSB0aGlzLnRvb2xOYW1lKSB7XG4gICAgICAgIHRoaXMuX29uSWNvbkNsaWNrKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZm9jdXNEZWZhdWx0RWxlbWVudCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25JY29uQ2xpY2sgKGU/OiBSZWFjdC5Nb3VzZUV2ZW50PGFueT4pIHtcbiAgICBjb25zdCBvbkljb25DbGljayA9IHRoaXMuZ2V0SWNvbigpICYmIHRoaXMuZ2V0SWNvbigpLm9uSWNvbkNsaWNrXG4gICAgaWYgKG9uSWNvbkNsaWNrKSB7XG4gICAgICBvbkljb25DbGljayhlKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5nZXRFeHBhbmRQYW5lbCgpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8uYWN0aXZlVG9vbE5hbWUgPT09IHRoaXMudG9vbE5hbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKG51bGwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2Uoe1xuICAgICAgICAgIGFjdGl2ZVRvb2xOYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgIGFjdGl2ZVRvb2xUaXRsZTogdGhpcy5nZXRUaXRsZSgpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMub25TaG93UGFuZWwoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2Uoe1xuICAgICAgICBhY3RpdmVUb29sTmFtZTogdGhpcy50b29sTmFtZSxcbiAgICAgICAgYWN0aXZlVG9vbFRpdGxlOiB0aGlzLmdldFRpdGxlKClcbiAgICAgIH0pXG4gICAgICB0aGlzLm9uU2hvd1BhbmVsKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlYWRvbmx5IF9nZXRDb250ZW50ID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLnRvb2xKc29uLmlzT25seUV4cGFuZGVkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNzcz17dGhpcy5fY3NzU3R5bGUoKX0gY2xhc3NOYW1lPSdleGJtYXAtdWkgZXhibWFwLXVpLXRvb2wtcGFuZWwnPlxuICAgICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgICAge3RoaXMuZ2V0RXhwYW5kUGFuZWwoKX1cbiAgICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc01vYmlsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyTW9iaWxlVG9vbCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyUENUb29sKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbml0SWNvbkNvbnRhaW5lciAocmVmOiBIVE1MRWxlbWVudCkge1xuICAgIGlmIChyZWYgJiYgIXRoaXMuaWNvbkNvbnRhaW5lcikge1xuICAgICAgdGhpcy5pY29uQ29udGFpbmVyID0gcmVmXG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlYWRvbmx5IG9uUmVzaXplID0gKHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICBpZiAoIXdpZHRoIHx8ICFoZWlnaHQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IGhlaWdodFxuICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUENUb29sICgpIHtcbiAgICBsZXQgdG9vbEljb24gPSB0aGlzLmdldEljb24oKVxuICAgIGlmICghdG9vbEljb24pIHtcbiAgICAgIHRvb2xJY29uID0ge1xuICAgICAgICBpY29uOiBkZWZhdWx0SWNvbixcbiAgICAgICAgb25JY29uQ2xpY2s6ICgpID0+IHt9XG4gICAgICB9IGFzIEljb25UeXBlXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kUGFuZWwgPSB0aGlzLmdldEV4cGFuZFBhbmVsKClcbiAgICBjb25zdCBhY3RpdmVUb29sTmFtZSA9IHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8gJiYgdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mby5hY3RpdmVUb29sTmFtZVxuICAgIHRoaXMuZ2VuZXJhdGlvbiA9IHRoaXMuZ2VuZXJhdGlvbiArIDFcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhibWFwLXVpIGV4Ym1hcC11aS10b29sJyBjc3M9e3RoaXMuX2Nzc1N0eWxlKCl9IHN0eWxlPXt7IHdpZHRoOiAnMzJweCcsIGhlaWdodDogJzMycHgnIH19PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9e3t9fSByZWY9e3JlZiA9PiB7IHRoaXMuX2luaXRJY29uQ29udGFpbmVyKHJlZikgfX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdleGJtYXAtdWktdG9vbCBlc3JpLXdpZGdldC0tYnV0dG9uJywge1xuICAgICAgICAgICAgJ2V4Ym1hcC11aS10b29sLWljb24tc2VsZWN0ZWQnOiB0aGlzLnRvb2xOYW1lID09PSBhY3RpdmVUb29sTmFtZSAmJiBleHBhbmRQYW5lbFxuICAgICAgICAgIH0pfVxuICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLnRvb2xKc29uLmlzU2hvd0ljb25UaXRsZSA/IHRoaXMuZ2V0VGl0bGUoKSA6ICcnfSBvbkNsaWNrPXtlID0+IHsgdGhpcy5fb25JY29uQ2xpY2soZSkgfX0gYXJpYS1leHBhbmRlZD17dGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbz8uYWN0aXZlVG9vbE5hbWUgPT09IHRoaXMudG9vbE5hbWV9IHJvbGU9J2J1dHRvbicgdGFiSW5kZXg9ezB9IG9uS2V5RG93bj17dGhpcy5fb25LZXlEb3dufVxuICAgICAgICA+XG4gICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J2V4Ym1hcC11aS10b29sLWljb24nIGljb249e3Rvb2xJY29uLmljb259IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7dGhpcy5pY29uQ29udGFpbmVyICYmICh0aGlzLnRvb2xOYW1lID09PSBhY3RpdmVUb29sTmFtZSAmJiBleHBhbmRQYW5lbCkgJiYgPFBhbmVsU2hlbGwgb25EZXN0cm95ZWQ9eygpID0+IHsgdGhpcy5vbkNsb3NlUGFuZWwoKSB9fT5cbiAgICAgICAgICA8UG9wcGVyXG4gICAgICAgICAgICBjbGFzc05hbWU9J2V4Ym1hcC11aS1wb3BwZXInIHJlZmVyZW5jZT17dGhpcy5pY29uQ29udGFpbmVyfSBvcGVuPXshISh0aGlzLnRvb2xOYW1lID09PSBhY3RpdmVUb29sTmFtZSAmJiBleHBhbmRQYW5lbCl9IHBsYWNlbWVudD17dGhpcy5wcm9wcy50b29sSnNvbi5wYW5lbFBsYWNlbWVudH1cbiAgICAgICAgICAgIG1vZGlmaWVycz17dGhpcy5tb2RpZmllcnN9IHZlcnNpb249e3RoaXMuZ2VuZXJhdGlvbn0gb2Zmc2V0PXtbMCwgNF19IHRvZ2dsZT17dGhpcy5vblBvcHBlclRvZ2dsZX0gZm9yY2VMYXRlc3RGb2N1c0VsZW1lbnRzPXt0cnVlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxNdWx0aVNvdXJjZU1hcENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICAgIHsoeyBtYXBXaWRnZXRIZWlnaHQgfSkgPT4gKDxkaXYgY3NzPXt0aGlzLl9jc3NTdHlsZSgpfSBjbGFzc05hbWU9e3RoaXMuZ2V0RXhwYW5kUGFuZWxQbGFjZW1lbnRDbGFzc05hbWUoKX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Ym1hcC11aS1leHBhbmQtY29udGVudCc+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAganVzdGlmeS1jb250ZW50LWJldHdlZW4gZC1mbGV4IGV4Ym1hcC11aS1leHBhbmQtY29udGVudC1oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtdGl0bGUgdGV4dC10cnVuY2F0ZScgc3R5bGU9e3sgbWF4V2lkdGg6ICcyMTBweCcgfX0gdGl0bGU9e3RoaXMuZ2V0VGl0bGUoKX0+XG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMuZ2V0VGl0bGUoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgb25DbGljaz17KCkgPT4geyB0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2UobnVsbCkgfX0gc3R5bGU9e3sgY3Vyc29yOiAncG9pbnRlcicgfX0gdGFiSW5kZXg9ezB9IHJvbGU9XCJidXR0b25cIiBhcmlhLWxhYmVsPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnY2xvc2UnLCBkZWZhdWx0TWVzc2FnZTogJ2Nsb3NlJyB9KX0+XG4gICAgICAgICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezIwfSBoZWlnaHQ9ezIwfSBpY29uPXtjbG9zZUljb259Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1heEhlaWdodDogYCR7bWFwV2lkZ2V0SGVpZ2h0IC0gNTV9cHhgLCBvdmVyZmxvd1k6IHRoaXMudG9vbE5hbWUgIT09ICdTZWFyY2gnID8gJ2F1dG8nIDogJ2luaGVyaXQnIH19PlxuICAgICAgICAgICAgICAgICAgICAgIHtleHBhbmRQYW5lbH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxSZWFjdFJlc2l6ZURldGVjdG9yIGhhbmRsZUhlaWdodCBvblJlc2l6ZT17dGhpcy5vblJlc2l6ZX0gLz5cbiAgICAgICAgICAgICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+KX1cbiAgICAgICAgICAgIDwvTXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICAgIDwvUG9wcGVyPlxuICAgICAgICA8L1BhbmVsU2hlbGw+fVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgaGFuZGxlVG9nZ2xlTW9iaWxlUGFuZWwgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKG51bGwpXG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJNb2JpbGVUb29sICgpIHtcbiAgICBsZXQgdG9vbEljb24gPSB0aGlzLmdldEljb24oKVxuICAgIGlmICghdG9vbEljb24pIHtcbiAgICAgIHRvb2xJY29uID0ge1xuICAgICAgICBpY29uOiBkZWZhdWx0SWNvbixcbiAgICAgICAgb25JY29uQ2xpY2s6ICgpID0+IHt9XG4gICAgICB9IGFzIEljb25UeXBlXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kUGFuZWwgPSB0aGlzLmdldEV4cGFuZFBhbmVsKClcbiAgICBjb25zdCBhY3RpdmVUb29sTmFtZSA9IHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8gJiYgdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mby5hY3RpdmVUb29sTmFtZVxuICAgIHJldHVybiAoXG4gICAgICA8TXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICB7KHsgbW9iaWxlUGFuZWxDb250YWluZXIgfSkgPT4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGJtYXAtdWkgZXhibWFwLXVpLXRvb2wnIGNzcz17dGhpcy5fY3NzU3R5bGUoKX0+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPXt7fX0gcmVmPXtyZWYgPT4geyB0aGlzLmljb25Db250YWluZXIgPSByZWYgfX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdleGJtYXAtdWktdG9vbCBlc3JpLXdpZGdldC0tYnV0dG9uJywge1xuICAgICAgICAgICAgICAgICdleGJtYXAtdWktdG9vbC1pY29uLXNlbGVjdGVkJzogdGhpcy50b29sTmFtZSA9PT0gYWN0aXZlVG9vbE5hbWUgJiYgZXhwYW5kUGFuZWxcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIHJvbGU9J2J1dHRvbicgdGFiSW5kZXg9ezB9IG9uS2V5RG93bj17dGhpcy5fb25LZXlEb3dufVxuICAgICAgICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50b29sSnNvbi5pc1Nob3dJY29uVGl0bGUgPyB0aGlzLmdldFRpdGxlKCkgOiAnJ30gb25DbGljaz17ZSA9PiB7IHRoaXMuX29uSWNvbkNsaWNrKGUpIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gY2xhc3NOYW1lPSdleGJtYXAtdWktdG9vbC1pY29uJyBpY29uPXt0b29sSWNvbi5pY29ufSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7dGhpcy50b29sTmFtZSA9PT0gYWN0aXZlVG9vbE5hbWUgJiYgZXhwYW5kUGFuZWwgJiZcbiAgICAgICAgICAgIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbCg8UGFuZWxTaGVsbCBvbkRlc3Ryb3llZD17KCkgPT4geyB0aGlzLm9uQ2xvc2VQYW5lbCgpIH19PjxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCBkLWZsZXggZmxleC1jb2x1bW4nIGNzcz17dGhpcy5fY3NzU3R5bGUoKX0+XG4gICAgICAgICAgICAgIDxTY3JvbGxDb250YWluZXIgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCc+XG4gICAgICAgICAgICAgICAgPEVycm9yQm91bmRhcnk+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5nZXRFeHBhbmRQYW5lbCgpfVxuICAgICAgICAgICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgICAgICAgICAgPC9TY3JvbGxDb250YWluZXI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvUGFuZWxTaGVsbD4sIG1vYmlsZVBhbmVsQ29udGFpbmVyKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvTXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RXhwYW5kUGFuZWxQbGFjZW1lbnRDbGFzc05hbWUgKCkge1xuICAgIGlmICghdGhpcy5wcm9wcy50b29sSnNvbi5wYW5lbFBsYWNlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBleHBhbmQtcGxhY2VtZW50LSR7dGhpcy5wcm9wcy50b29sSnNvbi5wYW5lbFBsYWNlbWVudC5zcGxpdCgnLScpWzBdfWBcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXRDb250ZW50KClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBjc3MsIGpzeCwgY2xhc3NOYW1lcywgUmVhY3RSZXNpemVEZXRlY3RvciwgdHlwZSBJbnRsU2hhcGUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBVSUNvbXBvbmVudCwgdHlwZSBVSUNvbXBvbmVudFByb3BzIH0gZnJvbSAnLi91aS1jb21wb25lbnQnXG5pbXBvcnQgeyB0eXBlIFRvb2xDb25maWcgfSBmcm9tICcuLi8uLi8uLi9jb25maWcnXG5pbXBvcnQgeyB0eXBlIExheW91dEpzb24sIHR5cGUgR3JvdXBKc29uLCB0eXBlIEhpZGRlbkVsZW1lbnROYW1lcywgdHlwZSBUb29sSnNvbiB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBCYXNlVG9vbFNoZWxsIGZyb20gJy4vYmFzZS10b29sLXNoZWxsJ1xuaW1wb3J0IHsgdHlwZSBBY3RpdmVUb29sSW5mbyB9IGZyb20gJy4vYmFzZS10b29sJ1xuaW1wb3J0IFRvb2xNb2R1bGVzIGZyb20gJy4uL3Rvb2wtbW9kdWxlcydcbmltcG9ydCB7IE1vYmlsZVBhbmVsIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IE11bHRpU291cmNlTWFwQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbXVsdGlzb3VyY2VtYXAtY29udGV4dCdcblxuaW50ZXJmYWNlIEdyb3VwUHJvcHMgZXh0ZW5kcyBVSUNvbXBvbmVudFByb3BzIHtcbiAgbWFwV2lkZ2V0SWQ6IHN0cmluZ1xuICBsYXlvdXRDb25maWc6IExheW91dEpzb25cbiAgdG9vbENvbmZpZzogVG9vbENvbmZpZ1xuICBncm91cE5hbWU6IHN0cmluZ1xuICBjbGFzc05hbWU6IHN0cmluZ1xuICBzdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllc1xuICBpc01vYmlsZT86IGJvb2xlYW5cbiAgaXNNYWluR3JvdXA/OiBib29sZWFuXG4gIC8vIGNoZWNrUmVzcG9uc2l2ZSgpIHdpbGwgY2hlY2sgaGVpZ2h0IGFuZCB1c2UgcHJvcHMub25TZXRIaWRkZW5FbGVtZW50TmFtZXMoKSB0byBzZXQgZWxlbWVudCBuYW1lcyB0aGF0IG5lZWQgdG8gaGlkZVxuICBoaWRkZW5FbGVtZW50TmFtZXM/OiBIaWRkZW5FbGVtZW50TmFtZXNcbiAgLy8gdHJ1ZSBtZWFucyB3ZSBzaG91bGQgaGlkZSB0aGUgR3JvdXAgZGl2IHdpdGggY2xhc3MgLmV4Ym1hcC11aS1oaWRkZW4tZWxlbWVudCBiZWNhdXNlIGNoZWNrUmVzcG9uc2l2ZSgpIG1ldGhvZCB0aGluayB0aGUgaGVpZ2h0IGlzIHNtYWxsLlxuICBpc0hpZGRlbj86IGJvb2xlYW5cbiAgaXNUaHVtYk1hcD86IGJvb2xlYW5cbiAgaW50bD86IEludGxTaGFwZVxuICBpc1JUTDogYm9vbGVhblxuXG4gIGFjdGl2ZVRvb2xJbmZvOiBBY3RpdmVUb29sSW5mb1xuICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlOiAoYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvKSA9PiB2b2lkXG4gIG9uU2V0SGlkZGVuRWxlbWVudE5hbWVzPzogKGhpZGRlbkVsZW1lbnROYW1lczogSGlkZGVuRWxlbWVudE5hbWVzKSA9PiB2b2lkXG4gIGF1dG9Db250cm9sV2lkZ2V0SWQ6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgR3JvdXBTdGF0ZXMge1xuICBib3R0b21QYW5lbEhlaWdodD86IG51bWJlclxuICB3aWRnZXRXaWR0aD86IG51bWJlclxuICB3aWRnZXRIZWlnaHQ/OiBudW1iZXJcbiAgaXNUaHVtYk1hcD86IGJvb2xlYW5cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JvdXAgZXh0ZW5kcyBVSUNvbXBvbmVudDxHcm91cFByb3BzLCBHcm91cFN0YXRlcz4ge1xuICBnZXRTdHlsZSAoKSB7XG4gICAgY29uc3QgZ3JvdXBKc29uID0gdGhpcy5wcm9wcy5sYXlvdXRDb25maWcuZWxlbWVudHNbdGhpcy5wcm9wcy5ncm91cE5hbWVdIGFzIEdyb3VwSnNvblxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IGdyb3VwSnNvbi5kaXJlY3Rpb25cbiAgICBjb25zdCBpc1JUTCA9IHRoaXMucHJvcHMuaXNSVExcbiAgICBjb25zdCBpc1ZlcnRpY2FsID0gZGlyZWN0aW9uID09PSAndmVydGljYWwnXG5cbiAgICBsZXQgZmxleEZsb3cgPSAnJ1xuXG4gICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgIGZsZXhGbG93ID0gJ2NvbHVtbidcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzUlRMKSB7XG4gICAgICAgIGZsZXhGbG93ID0gJ3Jvdy1yZXZlcnNlJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmxleEZsb3cgPSAncm93J1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBhbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnXG5cbiAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgaWYgKGdyb3VwSnNvbi5pc1ZlcnRpY2FsUnJsQWxpZ25JdGVtc1N0YXJ0KSB7XG4gICAgICAgIGlmIChpc1JUTCkge1xuICAgICAgICAgIGFsaWduSXRlbXMgPSAnZmxleC1lbmQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxpZ25JdGVtcyA9ICdmbGV4LXN0YXJ0J1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChncm91cEpzb24uaXNWZXJ0aWNhbFJybEFsaWduSXRlbXNFbmQpIHtcbiAgICAgICAgaWYgKGlzUlRMKSB7XG4gICAgICAgICAgYWxpZ25JdGVtcyA9ICdmbGV4LXN0YXJ0J1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsaWduSXRlbXMgPSAnZmxleC1lbmQnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3NzYFxuXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1mbG93OiAke2ZsZXhGbG93fTtcbiAgICAgIGFsaWduLWl0ZW1zOiAke2FsaWduSXRlbXN9O1xuXG4gICAgICAuZXhibWFwLXVpLWdyb3VwLWV4cGFuZC1pY29uIHtcbiAgICAgICAgZmlsbDogYmxhY2s7XG4gICAgICAgIGxlZnQ6IDhweDtcbiAgICAgICAgdG9wOiA4cHg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIC5leHBhbmQtbW9iaWxlLXBhbmVsIHtcbiAgICAgICAgYm94LXNoYWRvdzogcmdiYSgwLCAwLCAwLCAwLjMpIDBweCAwcHggMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4IDEwcHggMHB4IDBweDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1tb2JpbGUtcGFuZWwtdHJhbnNpdGlvbiB7XG4gICAgICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjNzO1xuICAgICAgfVxuXG4gICAgICAuZXhwYW5kLW1vYmlsZS1wYW5lbC10b3VjaC1jb250YWluZXIge1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMzFweDtcbiAgICAgIH1cblxuICAgICAgLmV4cGFuZC1tb2JpbGUtcGFuZWwtYmFyIHtcbiAgICAgICAgd2lkdGg6IDM2cHg7XG4gICAgICAgIGhlaWdodDogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDM0MzQzO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICB9XG4gICAgICBgXG4gIH1cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBib3R0b21QYW5lbEhlaWdodDogMCxcbiAgICAgIGlzVGh1bWJNYXA6ICEhdGhpcy5wcm9wcy5pc01vYmlsZVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpOiB2b2lkIHtcbiAgICB0aGlzLmNoZWNrUmVzcG9uc2l2ZSgpXG4gIH1cblxuICBjaGVja0lzSGlkZGVuRWxlbWVudCA9IChlbGVtZW50TmFtZSkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmhpZGRlbkVsZW1lbnROYW1lcykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGlkZGVuRWxlbWVudE5hbWVzLmluY2x1ZGVzKGVsZW1lbnROYW1lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHNvbWUgdG9vbHMgaWYgd2lkZ2V0IGhlZ2l0aCBpcyB0b28gc21hbGwuXG4gICAqIFRoaXMgbWV0aG9kIG9ubHkgaGlkZSBjaGlsZCBlbGVtZW50IG5hbWVzIGlmIGN1cnJlbnQgZ3JvdXAgaXMgbWFpbiBncm91cCBhbmQgaW4gbW9iaWxlIHNpemUuXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBjaGVja1Jlc3BvbnNpdmUgPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLnByb3BzLm9uU2V0SGlkZGVuRWxlbWVudE5hbWVzKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHJvcHMuaXNNYWluR3JvdXAgfHwgIXRoaXMucHJvcHMuaXNNb2JpbGUpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZXRIaWRkZW5FbGVtZW50TmFtZXMoW10pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBtb2JpbGVSZXNwb25zaXZlU3RyYXRlZ3kgPSB0aGlzLnByb3BzLmxheW91dENvbmZpZy5tb2JpbGVSZXNwb25zaXZlU3RyYXRlZ3lcbiAgICBjb25zdCBhYm92ZUhlaWdodCA9IHRoaXMuc3RhdGUud2lkZ2V0SGVpZ2h0XG5cbiAgICAvLyBzZWUgaXNzdWUgIzI4NjIgZm9yIG1vcmUgZGV0YWlsc1xuICAgIGxldCBoaWRkZW5FbGVtZW50TmFtZXM6IHN0cmluZ1tdID0gW11cblxuICAgIGlmIChhYm92ZUhlaWdodCA+PSA0NjUpIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IFtdXG4gICAgfSBlbHNlIGlmIChhYm92ZUhlaWdodCA+PSA0MDAgJiYgYWJvdmVIZWlnaHQgPCA0NjUpIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneT8uc3RhZ2UxIHx8IFtdXG4gICAgfSBlbHNlIGlmIChhYm92ZUhlaWdodCA+PSAzMjAgJiYgYWJvdmVIZWlnaHQgPCA0MDApIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneT8uc3RhZ2UyIHx8IFtdXG4gICAgfSBlbHNlIGlmIChhYm92ZUhlaWdodCA+PSAyNTAgJiYgYWJvdmVIZWlnaHQgPCAzMjApIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneT8uc3RhZ2UzIHx8IFtdXG4gICAgfSBlbHNlIGlmIChhYm92ZUhlaWdodCA+PSAxNjAgJiYgYWJvdmVIZWlnaHQgPCAyNTApIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneT8uc3RhZ2U0IHx8IFtdXG4gICAgfSBlbHNlIGlmIChhYm92ZUhlaWdodCA+PSA1NCAmJiBhYm92ZUhlaWdodCA8IDE2MCkge1xuICAgICAgaGlkZGVuRWxlbWVudE5hbWVzID0gbW9iaWxlUmVzcG9uc2l2ZVN0cmF0ZWd5Py5zdGFnZTUgfHwgW11cbiAgICB9IGVsc2UgaWYgKGFib3ZlSGVpZ2h0IDwgNTQpIHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lcyA9IG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneT8uc3RhZ2U2IHx8IFtdXG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5vblNldEhpZGRlbkVsZW1lbnROYW1lcyhoaWRkZW5FbGVtZW50TmFtZXMpXG4gIH1cblxuICBvblJlc2l6ZSA9ICh3aWR0aCwgaGVpZ2h0KSA9PiB7XG4gICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHdpZGdldFdpZHRoOiB3aWR0aCxcbiAgICAgIHdpZGdldEhlaWdodDogaGVpZ2h0XG4gICAgICAvLyBpc1RodW1iTWFwOiBmYWxzZVxuICAgIH0sICgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tSZXNwb25zaXZlKClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuTnVsbE5vZGUgPSAoa2V5PykgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLmlzTW9iaWxlKSB7XG4gICAgICByZXR1cm4gPHNwYW4ga2V5PXtrZXl9IC8+XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgY2hlY2tJc0xhc3RFbGVtZW50ID0gKHBhcmVudEdyb3VwSnNvbjogR3JvdXBKc29uLCB0b29sSnNvbjogVG9vbEpzb24pID0+IHtcbiAgICBjb25zdCB0b29sTmFtZSA9IHRvb2xKc29uLnRvb2xOYW1lXG4gICAgY29uc3QgbGF5b3V0SnNvbiA9IHRoaXMucHJvcHMubGF5b3V0Q29uZmlnXG4gICAgY29uc3QgY2hpbGRyZW4gPSBsYXlvdXRKc29uLmxheW91dFtwYXJlbnRHcm91cEpzb24uZ3JvdXBOYW1lXS5jaGlsZHJlblxuICAgIGNvbnN0IGluZGV4ID0gY2hpbGRyZW4uaW5kZXhPZih0b29sTmFtZSlcbiAgICBpZiAoaW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGluZGV4IDwgY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgbGV0IGlzTGFzdEVsZW1lbnQ6IGJvb2xlYW4gPSB0cnVlXG4gICAgICBmb3IgKGxldCBpID0gKGluZGV4ICsgMSk7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBlbGVtZW50TmFtZSA9IGNoaWxkcmVuW2ldXG4gICAgICAgIGlmIChsYXlvdXRKc29uLmVsZW1lbnRzW2NoaWxkcmVuW2ldXS50eXBlID09PSAnR1JPVVAnKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmICgoIVRvb2xNb2R1bGVzW2VsZW1lbnROYW1lXS5nZXRJc05lZWRTZXR0aW5nKCkgfHwgKHRoaXMucHJvcHMudG9vbENvbmZpZyAmJiB0aGlzLnByb3BzLnRvb2xDb25maWdbYGNhbiR7ZWxlbWVudE5hbWV9YF0pIHx8XG4gICAgICAgICAgKGxheW91dEpzb24ubG9ja1Rvb2xOYW1lcyAmJiBsYXlvdXRKc29uLmxvY2tUb29sTmFtZXMuaW5jbHVkZXMoZWxlbWVudE5hbWUpKSkpIHtcbiAgICAgICAgICBpc0xhc3RFbGVtZW50ID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBpc0xhc3RFbGVtZW50XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlVG9nZ2xlTW9iaWxlUGFuZWwgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKG51bGwpXG4gIH1cblxuICBoYW5kbGVQYW5lbEhlaWdodENoYW5nZSA9IChwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBib3R0b21QYW5lbEhlaWdodDogcGFuZWxIZWlnaHQgfSwgKCkgPT4ge1xuICAgICAgdGhpcy5jaGVja1Jlc3BvbnNpdmUoKVxuICAgIH0pXG4gIH1cblxuICBnZXRNb2JpbGVQYW5lbEluQ29udGV4dCA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPE11bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyh7IG1vYmlsZVBhbmVsQ29udGFpbmVyLCBtYXBXaWRnZXRJZCB9KSA9PiAoXG4gICAgICAgICAgPE1vYmlsZVBhbmVsXG4gICAgICAgICAgICBtYXBXaWRnZXRJZD17bWFwV2lkZ2V0SWR9IHRpdGxlPXt0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvICYmIHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8uYWN0aXZlVG9vbFRpdGxlfVxuICAgICAgICAgICAgb3Blbj17ISF0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvfSBvbkNsb3NlPXsoKSA9PiB7IHRoaXMuaGFuZGxlVG9nZ2xlTW9iaWxlUGFuZWwoKSB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCcgcmVmPXsoY29udGFpbmVyKSA9PiB7IGlmIChtb2JpbGVQYW5lbENvbnRhaW5lciAmJiBjb250YWluZXIpIHsgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vYmlsZVBhbmVsQ29udGFpbmVyKSB9IH19IC8+XG4gICAgICAgICAgPC9Nb2JpbGVQYW5lbD5cbiAgICAgICAgKX1cbiAgICAgIDwvTXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxuXG4gIGdldEdyb3VwQ29udGVudCA9IChsYXlvdXRKc29uOiBMYXlvdXRKc29uKSA9PiB7XG4gICAgaWYgKCFsYXlvdXRKc29uKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXR1cm5OdWxsTm9kZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gbGF5b3V0SnNvbi5sYXlvdXRbdGhpcy5wcm9wcy5ncm91cE5hbWVdICYmIGxheW91dEpzb24ubGF5b3V0W3RoaXMucHJvcHMuZ3JvdXBOYW1lXS5jaGlsZHJlblxuICAgICAgaWYgKHRoaXMuY2hlY2tJc1Nob3dHcm91cChsYXlvdXRKc29uLCBjaGlsZHJlbikpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBDbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgICAgICAgIGBleGJtYXAtdWkgZXhibWFwLXVpLWdyb3VwIGV4Ym1hcC11aS1ncm91cC0ke3RoaXMucHJvcHMuZ3JvdXBOYW1lfWAsXG4gICAgICAgICAgdGhpcy5wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgeyAnZXhibWFwLXVpLWhpZGRlbi1lbGVtZW50JzogdGhpcy5wcm9wcy5pc0hpZGRlbiB9XG4gICAgICAgIClcblxuICAgICAgICBjb25zdCBzdHlsZU9iaiA9IHRoaXMucHJvcHMubGF5b3V0Q29uZmlnLmVsZW1lbnRzW3RoaXMucHJvcHMuZ3JvdXBOYW1lXS5zdHlsZSB8fCB7fVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgaWQ9eyh0aGlzLnByb3BzLmlzTWFpbkdyb3VwID8gdGhpcy5wcm9wcy5tYXBXaWRnZXRJZCA6IHVuZGVmaW5lZCl9XG4gICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPXtncm91cENsYXNzTmFtZX0gc3R5bGU9e3N0eWxlT2JqfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbi5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFsYXlvdXRKc29uLmVsZW1lbnRzW2tleV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXR1cm5OdWxsTm9kZShpbmRleClcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChsYXlvdXRKc29uLmVsZW1lbnRzW2tleV0udHlwZSA9PT0gJ0dST1VQJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICA8R3JvdXBcbiAgICAgICAgICAgICAgICAgICAgbWFwV2lkZ2V0SWQ9e3RoaXMucHJvcHMubWFwV2lkZ2V0SWR9IGlzSGlkZGVuPXt0aGlzLmNoZWNrSXNIaWRkZW5FbGVtZW50KGtleSl9IGNsYXNzTmFtZT17KGxheW91dEpzb24uZWxlbWVudHNba2V5XSBhcyBHcm91cEpzb24pLmNsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2xheW91dEpzb24uZWxlbWVudHNba2V5XS5zdHlsZX1cbiAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH0gbGF5b3V0Q29uZmlnPXtsYXlvdXRKc29ufSB0b29sQ29uZmlnPXt0aGlzLnByb3BzLnRvb2xDb25maWd9IGlzTW9iaWxlPXt0aGlzLnByb3BzLmlzTW9iaWxlfSBpbnRsPXt0aGlzLnByb3BzLmludGx9XG4gICAgICAgICAgICAgICAgICAgIGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fSBncm91cE5hbWU9e2tleX0gYWN0aXZlVG9vbEluZm89e3RoaXMucHJvcHMuYWN0aXZlVG9vbEluZm99XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkVsZW1lbnROYW1lcz17dGhpcy5wcm9wcy5oaWRkZW5FbGVtZW50TmFtZXN9XG4gICAgICAgICAgICAgICAgICAgIG9uQWN0aXZlVG9vbEluZm9DaGFuZ2U9e3RoaXMucHJvcHMub25BY3RpdmVUb29sSW5mb0NoYW5nZX0gdGhlbWU9e3RoaXMucHJvcHMudGhlbWV9XG4gICAgICAgICAgICAgICAgICAgIGlzVGh1bWJNYXA9e3RoaXMucHJvcHMuaXNNYWluR3JvdXAgPyB0aGlzLnN0YXRlLmlzVGh1bWJNYXAgOiB0aGlzLnByb3BzLmlzVGh1bWJNYXB9XG4gICAgICAgICAgICAgICAgICAgIGF1dG9Db250cm9sV2lkZ2V0SWQ9e3RoaXMucHJvcHMuYXV0b0NvbnRyb2xXaWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgaXNSVEw9e3RoaXMucHJvcHMuaXNSVEx9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXlvdXRKc29uLmVsZW1lbnRzW2tleV0udHlwZSA9PT0gJ1RPT0wnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSAobGF5b3V0SnNvbi5lbGVtZW50c1trZXldIGFzIFRvb2xKc29uKS50b29sTmFtZVxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdUeXBlID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldz8udmlldz8udHlwZVxuXG4gICAgICAgICAgICAgICAgLy8gTmF2aWdhdGlvbiBpcyBub3QgYXZhaWxhYmxlIGZvciAyRCBNYXBWaWV3LlxuICAgICAgICAgICAgICAgIGlmICgodG9vbE5hbWUgPT09ICdOYXZpZ2F0aW9uJyAmJiB2aWV3VHlwZSA9PT0gJzJkJykgfHwgKHRvb2xOYW1lID09PSAnU2NhbGVCYXInICYmIHZpZXdUeXBlID09PSAnM2QnKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuTnVsbE5vZGUoaW5kZXgpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFUb29sTW9kdWxlc1trZXldLmdldElzTmVlZFNldHRpbmcoKSB8fCAodGhpcy5wcm9wcy50b29sQ29uZmlnICYmIHRoaXMucHJvcHMudG9vbENvbmZpZ1tgY2FuJHtrZXl9YF0pIHx8IChsYXlvdXRKc29uLmxvY2tUb29sTmFtZXMgJiYgbGF5b3V0SnNvbi5sb2NrVG9vbE5hbWVzLmluY2x1ZGVzKGtleSkpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8QmFzZVRvb2xTaGVsbFxuICAgICAgICAgICAgICAgICAgICAgIG1hcFdpZGdldElkPXt0aGlzLnByb3BzLm1hcFdpZGdldElkfVxuICAgICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuPXt0aGlzLmNoZWNrSXNIaWRkZW5FbGVtZW50KGtleSl9IGtleT17aW5kZXh9IGxheW91dENvbmZpZz17bGF5b3V0SnNvbn1cbiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUb29sSW5mbz17dGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mb30gdG9vbENvbmZpZz17dGhpcy5wcm9wcy50b29sQ29uZmlnfVxuICAgICAgICAgICAgICAgICAgICAgIGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fSB0b29sTmFtZT17a2V5fSB0aGVtZT17dGhpcy5wcm9wcy50aGVtZX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlPXt0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2V9IGludGw9e3RoaXMucHJvcHMuaW50bH1cbiAgICAgICAgICAgICAgICAgICAgICBpc01vYmlsZT17dGhpcy5wcm9wcy5pc01vYmlsZX0gaXNMYXN0RWxlbWVudD17dGhpcy5jaGVja0lzTGFzdEVsZW1lbnQobGF5b3V0SnNvbi5lbGVtZW50c1t0aGlzLnByb3BzLmdyb3VwTmFtZV0gYXMgR3JvdXBKc29uLCBsYXlvdXRKc29uLmVsZW1lbnRzW2tleV0gYXMgVG9vbEpzb24pfVxuICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db250cm9sV2lkZ2V0SWQ9e3RoaXMucHJvcHMuYXV0b0NvbnRyb2xXaWRnZXRJZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuTnVsbE5vZGUoaW5kZXgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldHVybk51bGxOb2RlKGluZGV4KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTWFpbkdyb3VwICYmIHRoaXMucHJvcHMuaXNNb2JpbGUgJiYgPFJlYWN0UmVzaXplRGV0ZWN0b3IgaGFuZGxlV2lkdGggaGFuZGxlSGVpZ2h0IG9uUmVzaXplPXt0aGlzLm9uUmVzaXplfSAvPn1cbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTWFpbkdyb3VwICYmIHRoaXMucHJvcHMuaXNNb2JpbGUgJiYgdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbyAmJiB0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvLmFjdGl2ZVRvb2xOYW1lICE9PSAnU2VsZWN0JyAmJiB0aGlzLmdldE1vYmlsZVBhbmVsSW5Db250ZXh0KCl9XG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5pc01haW5Hcm91cCAmJiA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT0nZXhibWFwLXVpIHctMTAwJ1xuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgdG91Y2hBY3Rpb246ICdub25lJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiB0aGlzLnByb3BzLmlzTW9iaWxlICYmICEodGhpcy5zdGF0ZS5pc1RodW1iTWFwIHx8IHRoaXMucHJvcHMuaXNUaHVtYk1hcCkgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3RoaXMucHJvcHMubWFwV2lkZ2V0SWR9LWJvdHRvbS1wYW5lbCBleGJtYXAtdWkgdy0xMDAgZXhwYW5kLW1vYmlsZS1wYW5lbGB9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgb3ZlcmZsb3c6ICdoaWRkZW4nLCBwb2ludGVyRXZlbnRzOiAnYXV0bycsIHBvc2l0aW9uOiAncmVsYXRpdmUnLCB0b3VjaEFjdGlvbjogJ25vbmUnIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAgaC0xMDAnPlxuICAgICAgICAgICAgICAgICAgPFJlYWN0UmVzaXplRGV0ZWN0b3IgaGFuZGxlSGVpZ2h0IG9uUmVzaXplPXt0aGlzLmhhbmRsZVBhbmVsSGVpZ2h0Q2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2Pn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0dXJuTnVsbE5vZGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNoZWNrSXNTaG93R3JvdXAgPSAobGF5b3V0SnNvbjogTGF5b3V0SnNvbiwgY2hpbGRyZW46IHN0cmluZ1tdKSA9PiB7XG4gICAgaWYgKCFjaGlsZHJlbiB8fCBjaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0b29sTmFtZXMgPSBbXVxuICAgICAgdGhpcy5maW5kQWxsVG9vbE5hbWVzKGxheW91dEpzb24sIGNoaWxkcmVuLCB0b29sTmFtZXMpXG4gICAgICBsZXQgaXNTaG93R3JvdXAgPSBmYWxzZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b29sTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudG9vbENvbmZpZ1tgY2FuJHt0b29sTmFtZXNbaV19YF0gfHwgIVRvb2xNb2R1bGVzW3Rvb2xOYW1lc1tpXV0uZ2V0SXNOZWVkU2V0dGluZygpIHx8XG4gICAgICAgICAgKGxheW91dEpzb24ubG9ja1Rvb2xOYW1lcyAmJiBsYXlvdXRKc29uLmxvY2tUb29sTmFtZXMuaW5jbHVkZXModG9vbE5hbWVzW2ldKSkpIHtcbiAgICAgICAgICBpc1Nob3dHcm91cCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNTaG93R3JvdXBcbiAgICB9XG4gIH1cblxuICBmaW5kQWxsVG9vbE5hbWVzID0gKGxheW91dEpzb246IExheW91dEpzb24sIGNoaWxkcmVuOiBzdHJpbmdbXSwgdG9vbE5hbWVzOiBzdHJpbmdbXSkgPT4ge1xuICAgIGlmICghY2hpbGRyZW4gfHwgY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGROYW1lID0gY2hpbGRyZW5baV1cbiAgICAgIGNvbnN0IGVsZW1lbnRJbmZvID0gbGF5b3V0SnNvbi5lbGVtZW50c1tjaGlsZE5hbWVdXG5cbiAgICAgIGlmIChlbGVtZW50SW5mby50eXBlID09PSAnR1JPVVAnKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IGVsZW1lbnRJbmZvLmdyb3VwTmFtZVxuICAgICAgICB0aGlzLmZpbmRBbGxUb29sTmFtZXMobGF5b3V0SnNvbiwgbGF5b3V0SnNvbi5sYXlvdXRbZ3JvdXBOYW1lXSAmJiBsYXlvdXRKc29uLmxheW91dFtncm91cE5hbWVdLmNoaWxkcmVuLCB0b29sTmFtZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b29sTmFtZXMucHVzaChjaGlsZHJlbltpXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmlzTWFpbkdyb3VwICYmIHRoaXMucHJvcHMuaXNNb2JpbGUgJiYgdGhpcy5wcm9wcy50b29sQ29uZmlnICYmIHRoaXMucHJvcHMudG9vbENvbmZpZy5jYW5TZWxlY3QpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgcG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogMCwgbGVmdDogMCwgYm90dG9tOiAwLCByaWdodDogMCB9fT5cbiAgICAgICAgICA8ZGl2IGlkPXtgJHt0aGlzLnByb3BzLm1hcFdpZGdldElkfS13aXRoLXNlbGVjdC1jb250YWluZXJgfSBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiAwLCBsZWZ0OiAwLCBib3R0b206IDAsIHJpZ2h0OiAwIH19PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJyBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cbiAgICAgICAgICAgICAge3RoaXMuZ2V0R3JvdXBDb250ZW50KHRoaXMucHJvcHMubGF5b3V0Q29uZmlnKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0R3JvdXBDb250ZW50KHRoaXMucHJvcHMubGF5b3V0Q29uZmlnKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIG9uRGVzdHJveWVkPzogKCkgPT4gdm9pZFxuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYW5lbFNoZWxsIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgdW5rbm93bj4ge1xuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25EZXN0cm95ZWQpIHtcbiAgICAgIHRoaXMucHJvcHMub25EZXN0cm95ZWQoKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgPC8+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGNzcywganN4LCBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcblxuaW50ZXJmYWNlIFNjcm9sbENvbnRhaW5lclByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nXG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllc1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY3JvbGxDb250YWluZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFNjcm9sbENvbnRhaW5lclByb3BzLCB1bmtub3duPiB7XG4gIG1vdmVZID0gMFxuICBzdGFydFkgPSAwXG4gIGlzUmVnaXN0ZWQgPSBmYWxzZVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgIGBcbiAgfVxuXG4gIHJlZ2lzdGVyVG91Y2hFdmVudCA9IChyZWY6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgaWYgKHJlZiAmJiAhdGhpcy5pc1JlZ2lzdGVkKSB7XG4gICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLm1vdmVZID0gMFxuICAgICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF1cbiAgICAgICAgdGhpcy5zdGFydFkgPSB0b3VjaC5jbGllbnRZXG4gICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pXG5cbiAgICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdG91Y2ggPSBldmVudC50b3VjaGVzWzBdXG4gICAgICAgIHRoaXMubW92ZVkgPSAodG91Y2guY2xpZW50WSAtIHRoaXMuc3RhcnRZKSAqIC0xXG4gICAgICAgIHRoaXMuc3RhcnRZID0gdG91Y2guY2xpZW50WVxuXG4gICAgICAgIHJlZi5zY3JvbGxUb3AgPSByZWYuc2Nyb2xsVG9wICsgdGhpcy5tb3ZlWVxuICAgICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KVxuXG4gICAgICByZWYuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5tb3ZlWSA9IDBcbiAgICAgICAgdGhpcy5zdGFydFkgPSAwXG4gICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pXG5cbiAgICAgIHRoaXMuaXNSZWdpc3RlZCA9IHRydWVcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNzcz17dGhpcy5nZXRTdHlsZSgpfSBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3NOYW1lfSBzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cbiAgICAgICAgcmVmPXtyZWYgPT4ge1xuICAgICAgICAgIHRoaXMucmVnaXN0ZXJUb3VjaEV2ZW50KHJlZilcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0LCB0eXBlIElNVGhlbWVWYXJpYWJsZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVUlDb21wb25lbnRQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVUlDb21wb25lbnQ8UCBleHRlbmRzIFVJQ29tcG9uZW50UHJvcHMsIFM+IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQLCBTPiB7XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBjc3MsIGpzeCwgQXBwTW9kZSwgdHlwZSBTaXplTW9kZUxheW91dEpzb24sIHR5cGUgSW50bFNoYXBlLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIGdldEFwcFN0b3JlIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBUb29sQ29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnJ1xuaW1wb3J0IHsgdHlwZSBMYXlvdXRKc29uLCB0eXBlIEdyb3VwSnNvbiwgdHlwZSBMYXlvdXRJdGVtSnNvbiwgdHlwZSBIaWRkZW5FbGVtZW50TmFtZXMgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCBHcm91cCBmcm9tICcuL2Jhc2UvZ3JvdXAnXG5pbXBvcnQgdHlwZSB7IEFjdGl2ZVRvb2xJbmZvIH0gZnJvbSAnLi9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcblxuaW50ZXJmYWNlIExheW91dFByb3BzIHtcbiAgbWFwV2lkZ2V0SWQ6IHN0cmluZ1xuICBsYXlvdXRDb25maWc6IExheW91dEpzb25cbiAgdG9vbENvbmZpZzogVG9vbENvbmZpZ1xuXG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICBpc01vYmlsZTogYm9vbGVhblxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuXG4gIGFwcE1vZGU6IEFwcE1vZGVcbiAgbGF5b3V0czogeyBbbmFtZTogc3RyaW5nXTogU2l6ZU1vZGVMYXlvdXRKc29uIH1cbiAgTGF5b3V0RW50cnk/OiBhbnlcbiAgd2lkZ2V0TWFuaWZlc3ROYW1lOiBzdHJpbmdcblxuICB3aWRnZXRIZWlnaHQ/OiBudW1iZXJcbiAgaW50bD86IEludGxTaGFwZVxuXG4gIGFjdGl2ZVRvb2xJbmZvOiBBY3RpdmVUb29sSW5mb1xuICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlOiAoYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvKSA9PiB2b2lkXG4gIGF1dG9Db250cm9sV2lkZ2V0SWQ6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgTGF5b3V0U3RhdGUge1xuICB0b29sc0NvbnRlbnRJbk1vYmlsZUV4cGFuZFBhbmVsPzogSlNYLkVsZW1lbnRcbiAgaGlkZGVuRWxlbWVudE5hbWVzOiBIaWRkZW5FbGVtZW50TmFtZXNcbn1cblxuZXhwb3J0IHR5cGUgeyBBY3RpdmVUb29sSW5mbyB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hcFRvb2xMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzLCBMYXlvdXRTdGF0ZT4ge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB0b29sc0NvbnRlbnRJbk1vYmlsZUV4cGFuZFBhbmVsOiBudWxsLFxuICAgICAgaGlkZGVuRWxlbWVudE5hbWVzOiBbXVxuICAgIH1cbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgei1pbmRleDogODtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gICAgICAuZXhwYW5kLXBhbmVsLXRyYW5zaXRpb24ge1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MsIHJpZ2h0IDAuM3M7XG4gICAgICB9XG5cbiAgICAgIC5zY2FsZS1hdHRyaWJ1dGlvbi14eS1ncm91cCB7XG4gICAgICAgID4gZGl2OmZpcnN0LW9mLXR5cGU6bnRoLWxhc3Qtb2YtdHlwZSgxKSB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmV4Ym1hcC11aS1oaWRkZW4tZWxlbWVudCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmV4Ym1hcC11aS1wYy1leHBhbmQtbWF4aGVpZ2h0IHtcbiAgICAgICAgbWF4LWhlaWdodDogJHt0aGlzLmdldE1heEhlaWdodEZvclBjRXhwYW5kKHRoaXMucHJvcHMud2lkZ2V0SGVpZ2h0KX1weDtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG9cbiAgICAgIH1cbiAgICAgIGBcbiAgfVxuXG4gIGdldE1heEhlaWdodEZvclBjRXhwYW5kID0gKHdpZGdldEhlaWdodDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICBpZiAoIXdpZGdldEhlaWdodCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHdpZGdldEhlaWdodCA8IDY1KSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZXN1bHRIZWlnaHQgPSB3aWRnZXRIZWlnaHQgLSA2NVxuICAgICAgICBpZiAocmVzdWx0SGVpZ2h0IDwgMzAwKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdEhlaWdodFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAzMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRTZXRIaWRkZW5FbGVtZW50TmFtZXMgPSAoZWxlbWVudE5hbWVzOiBIaWRkZW5FbGVtZW50TmFtZXMpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGhpZGRlbkVsZW1lbnROYW1lczogZWxlbWVudE5hbWVzXG4gICAgfSlcbiAgfVxuXG4gIGdldExheW91dENvbnRlbnQgKGxheW91dEpzb246IExheW91dEpzb24pIHtcbiAgICBpZiAoIWxheW91dEpzb24gfHwgIXRoaXMucHJvcHMudG9vbENvbmZpZykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Ym1hcC11aSBlc3JpLXVpLWlubmVyLWNvbnRhaW5lciBtYXAtdG9vbC1sYXlvdXQnIGNzcz17dGhpcy5nZXRTdHlsZSgpfT5cbiAgICAgICAgICB7T2JqZWN0LmtleXMobGF5b3V0SnNvbi5sYXlvdXQpLm1hcCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudEl0ZW0gPSBsYXlvdXRKc29uLmVsZW1lbnRzW2tleV0gYXMgR3JvdXBKc29uXG4gICAgICAgICAgICBjb25zdCBsYXlvdXRJdGVtOiBMYXlvdXRJdGVtSnNvbiA9IGxheW91dEpzb24ubGF5b3V0W2tleV1cblxuICAgICAgICAgICAgaWYgKCFlbGVtZW50SXRlbSB8fCBlbGVtZW50SXRlbS50eXBlICE9PSAnR1JPVVAnIHx8ICFsYXlvdXRJdGVtLmlzTWFpbkdyb3VwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlzUlRMID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbnRleHQuaXNSVExcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPEdyb3VwXG4gICAgICAgICAgICAgICAgbWFwV2lkZ2V0SWQ9e3RoaXMucHJvcHMubWFwV2lkZ2V0SWR9IGNsYXNzTmFtZT17ZWxlbWVudEl0ZW0uY2xhc3NOYW1lfSBzdHlsZT17ZWxlbWVudEl0ZW0uc3R5bGV9XG4gICAgICAgICAgICAgICAgaXNNb2JpbGU9e3RoaXMucHJvcHMuaXNNb2JpbGV9IGlzTWFpbkdyb3VwXG4gICAgICAgICAgICAgICAga2V5PXtpbmRleH0gbGF5b3V0Q29uZmlnPXtsYXlvdXRKc29ufSB0b29sQ29uZmlnPXt0aGlzLnByb3BzLnRvb2xDb25maWd9IGFjdGl2ZVRvb2xJbmZvPXt0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvfVxuICAgICAgICAgICAgICAgIGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fSBncm91cE5hbWU9e2tleX0gb25BY3RpdmVUb29sSW5mb0NoYW5nZT17dGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGhpZGRlbkVsZW1lbnROYW1lcz17bGF5b3V0SnNvbi5tb2JpbGVSZXNwb25zaXZlU3RyYXRlZ3kgJiYgdGhpcy5zdGF0ZS5oaWRkZW5FbGVtZW50TmFtZXN9IGludGw9e3RoaXMucHJvcHMuaW50bH1cbiAgICAgICAgICAgICAgICBvblNldEhpZGRlbkVsZW1lbnROYW1lcz17dGhpcy5oYW5kU2V0SGlkZGVuRWxlbWVudE5hbWVzfSB0aGVtZT17dGhpcy5wcm9wcy50aGVtZX1cbiAgICAgICAgICAgICAgICBhdXRvQ29udHJvbFdpZGdldElkPXt0aGlzLnByb3BzLmF1dG9Db250cm9sV2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgaXNSVEw9e2lzUlRMfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogTGF5b3V0UHJvcHMpIHtcbiAgICBpZiAocHJldlByb3BzLmFwcE1vZGUgIT09IHRoaXMucHJvcHMuYXBwTW9kZSAmJiB0aGlzLnByb3BzLmFwcE1vZGUgPT09IEFwcE1vZGUuRGVzaWduKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2UobnVsbClcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmdldExheW91dENvbnRlbnQodGhpcy5wcm9wcy5sYXlvdXRDb25maWcpXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3QsIGpzeCwgdHlwZSBBcHBNb2RlLCB0eXBlIFNpemVNb2RlTGF5b3V0SnNvbiwgSW1tdXRhYmxlLCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgTGF5b3V0RW50cnkgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyBjaGVja0lzTGl2ZSB9IGZyb20gJy4uL3V0aWxzJ1xuXG5pbnRlcmZhY2UgTGF5b3V0UHJvcHMge1xuICBqaW11TWFwVmlldz86IEppbXVNYXBWaWV3XG5cbiAgYXBwTW9kZTogQXBwTW9kZVxuICBsYXlvdXRzOiB7IFtuYW1lOiBzdHJpbmddOiBTaXplTW9kZUxheW91dEpzb24gfVxuICBMYXlvdXRFbnRyeT86IGFueVxuICB3aWRnZXRNYW5pZmVzdE5hbWU6IHN0cmluZ1xuICBjaGlsZHJlbj86IFJlYWN0LlJlYWN0Tm9kZVxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmludGVyZmFjZSBMYXlvdXRTdGF0ZSB7fVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMYXlvdXQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PExheW91dFByb3BzLCBMYXlvdXRTdGF0ZT4ge1xuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7fVxuICB9XG5cbiAgZ2V0TWFwRml4ZWRMYXlvdXQgPSAoKSA9PiB7XG4gICAgLy8gIzExOTcsICMyOTYwXG4gICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyKSB7XG4gICAgICBjb25zdCBMYXlvdXRFbnRyeSA9IHRoaXMucHJvcHMuTGF5b3V0RW50cnlcbiAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMucHJvcHMubGF5b3V0cyAmJiB0aGlzLnByb3BzLmxheW91dHMuTWFwRml4ZWRMYXlvdXRcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxMYXlvdXRFbnRyeVxuICAgICAgICAgIGxheW91dHM9e2xheW91dCB8fCBudWxsfSBpc0luV2lkZ2V0IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndy0xMDAgaC0xMDAgbWFwLWZpeC1sYXlvdXQnLFxuICAgICAgICAgICAgeyAnd2lkZ2V0LW1hcC11c2VtYXNrJzogIWNoZWNrSXNMaXZlKHRoaXMucHJvcHMuYXBwTW9kZSksICdtYXAtaXMtbGl2ZS1tb2RlJzogY2hlY2tJc0xpdmUodGhpcy5wcm9wcy5hcHBNb2RlKSB9KX1cbiAgICAgICAgLz5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5wcm9wcy5sYXlvdXRzICYmIHRoaXMucHJvcHMubGF5b3V0cy5NYXBGaXhlZExheW91dFxuICAgICAgcmV0dXJuIDxMYXlvdXRFbnRyeSBsYXlvdXRzPXtsYXlvdXQgPyBJbW11dGFibGUobGF5b3V0KSA6IG51bGx9IGNsYXNzTmFtZT0ndy0xMDAgaC0xMDAgbWFwLWlzLWxpdmUtbW9kZSBtYXAtZml4LWxheW91dCcgLz5cbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmdldE1hcEZpeGVkTGF5b3V0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgdHlwZSBMYXlvdXRKc29uIH0gZnJvbSAnLi9jb25maWcnXG5cbmNvbnN0IG1vYmlsZUxheW91dEpzb246IExheW91dEpzb24gPSB7XG4gIGVsZW1lbnRzOiB7XG4gICAgbWFpbkdyb3VwOiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnbWFpbkdyb3VwJyxcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIGNsYXNzTmFtZTogJ2QtZmxleCBmbGV4LWNvbHVtbicsXG4gICAgICBzdHlsZToge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMHB4JyxcbiAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgIGJvdHRvbTogJzBweCcsXG4gICAgICAgIHJpZ2h0OiAnMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgdG9wR3JvdXA6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICd0b3BHcm91cCcsXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgIGNsYXNzTmFtZTogJ2QtZmxleCB3LTEwMCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4nLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcGFkZGluZzogJzEwcHggMTBweCAwIDEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBtaWRHcm91cDoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ21pZEdyb3VwJyxcbiAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgY2xhc3NOYW1lOiAnZmxleC1ncm93LTEgZC1mbGV4IHctMTAwIGp1c3RpZnktY29udGVudC1iZXR3ZWVuJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICB9XG4gICAgfSxcbiAgICBib3R0b21Hcm91cDoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ2JvdHRvbUdyb3VwJyxcbiAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgY2xhc3NOYW1lOiAnZC1mbGV4IHctMTAwIGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbidcbiAgICB9LFxuICAgICdtaWRHcm91cC1sZWZ0LXRvcCc6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdtaWRHcm91cC1sZWZ0LXRvcCcsXG4gICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICBzdHlsZToge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgIHRvcDogJzBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgICdtaWRHcm91cC1sZWZ0LWJvdHRvbSc6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdtaWRHcm91cC1sZWZ0LWJvdHRvbScsXG4gICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsXG4gICAgICBjbGFzc05hbWU6ICdkLWZsZXggZmxleC1jb2x1bW4nLFxuICAgICAgaXNWZXJ0aWNhbFJybEFsaWduSXRlbXNTdGFydDogdHJ1ZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICBsZWZ0OiAnMHB4JyxcbiAgICAgICAgYm90dG9tOiAnMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgJ21pZEdyb3VwLXJpZ2h0LWNvbnRlbnQtdG9wJzoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ21pZEdyb3VwLXJpZ2h0LWNvbnRlbnQtdG9wJyxcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6ICcwcHgnLFxuICAgICAgICByaWdodDogJzEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICAnbWlkR3JvdXAtcmlnaHQtY29udGVudC1ib3R0b20nOiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnbWlkR3JvdXAtcmlnaHQtY29udGVudC1ib3R0b20nLFxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGJvdHRvbTogJzEwcHgnLFxuICAgICAgICByaWdodDogJzEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBTZWFyY2g6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnU2VhcmNoJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIGNsYXNzTmFtZTogJ2ZsZXgtZ3Jvdy0xJ1xuICAgIH0sXG4gICAgRnVsbFNjcmVlbjoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdGdWxsU2NyZWVuJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiBmYWxzZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogdHJ1ZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpbkxlZnQ6ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgTG9jYXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0xvY2F0ZScsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2UsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgQ2xlYXJBY3Rpb25EYXRhOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0NsZWFyQWN0aW9uRGF0YScsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2VcbiAgICB9LFxuICAgIENvbXBhc3M6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnQ29tcGFzcycsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2UsXG4gICAgICBjbGFzc05hbWU6ICdtYi0wJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpbkxlZnQ6ICcxMHB4JyxcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIE1hcFN3aXRjaDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdNYXBTd2l0Y2gnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5MZWZ0OiAnMTBweCcsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBab29tOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1pvb20nLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlXG4gICAgfSxcbiAgICBIb21lOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0hvbWUnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIEV4dGVudE5hdmlnYXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0V4dGVudE5hdmlnYXRlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiB0cnVlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luTGVmdDogJzEwcHgnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgTGF5ZXJzOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0xheWVycycsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIEJhc2VNYXA6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnQmFzZU1hcCcsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIFNlbGVjdDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdTZWxlY3QnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIFNlbGVjdFN0YXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NlbGVjdFN0YXRlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgIH1cbiAgICB9LFxuICAgIE1lYXN1cmU6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnTWVhc3VyZScsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIFNjYWxlQmFyOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NjYWxlQmFyJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgbGF5b3V0OiB7XG4gICAgbWFpbkdyb3VwOiB7XG4gICAgICBpc01haW5Hcm91cDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBbJ3RvcEdyb3VwJywgJ21pZEdyb3VwJywgJ2JvdHRvbUdyb3VwJ11cbiAgICB9LFxuICAgIHRvcEdyb3VwOiB7XG4gICAgICBjaGlsZHJlbjogWydTZWFyY2gnLCAnRnVsbFNjcmVlbiddXG4gICAgfSxcbiAgICBtaWRHcm91cDoge1xuICAgICAgY2hpbGRyZW46IFsnbWlkR3JvdXAtbGVmdC10b3AnLCAnbWlkR3JvdXAtbGVmdC1ib3R0b20nLCAnbWlkR3JvdXAtcmlnaHQtY29udGVudC10b3AnLCAnbWlkR3JvdXAtcmlnaHQtY29udGVudC1ib3R0b20nXVxuICAgIH0sXG4gICAgJ21pZEdyb3VwLWxlZnQtdG9wJzoge1xuICAgICAgY2hpbGRyZW46IFsnQ29tcGFzcyddXG4gICAgfSxcbiAgICAnbWlkR3JvdXAtbGVmdC1ib3R0b20nOiB7XG4gICAgICBjaGlsZHJlbjogWydFeHRlbnROYXZpZ2F0ZScsICdNYXBTd2l0Y2gnLCAnU2NhbGVCYXInXVxuICAgIH0sXG4gICAgJ21pZEdyb3VwLXJpZ2h0LWNvbnRlbnQtdG9wJzoge1xuICAgICAgY2hpbGRyZW46IFsnTGF5ZXJzJywgJ0Jhc2VNYXAnLCAnTWVhc3VyZScsICdTZWxlY3QnXVxuICAgIH0sXG4gICAgJ21pZEdyb3VwLXJpZ2h0LWNvbnRlbnQtYm90dG9tJzoge1xuICAgICAgY2hpbGRyZW46IFsnWm9vbScsICdIb21lJywgJ0xvY2F0ZScsICdDbGVhckFjdGlvbkRhdGEnXVxuICAgIH0sXG4gICAgYm90dG9tR3JvdXA6IHtcbiAgICAgIGNoaWxkcmVuOiBbJ1NlbGVjdFN0YXRlJ11cbiAgICB9XG4gIH0sXG4gIG1vYmlsZVJlc3BvbnNpdmVTdHJhdGVneToge1xuICAgIC8vIGhlaWdodDogNDAwLTQ2NVxuICAgIHN0YWdlMTogWydNZWFzdXJlJywgJ0xvY2F0ZSddLFxuXG4gICAgLy8gaGVpZ2h0OiAzMjAtNDAwXG4gICAgc3RhZ2UyOiBbJ01lYXN1cmUnLCAnU2VsZWN0JywgJ0xvY2F0ZScsICdib3R0b21Hcm91cCddLFxuXG4gICAgLy8gaGVpZ2h0OiAyNTAtMzIwXG4gICAgc3RhZ2UzOiBbJ0V4dGVudE5hdmlnYXRlJywgJ21pZEdyb3VwLXJpZ2h0LWNvbnRlbnQtdG9wJywgJ0xvY2F0ZScsICdib3R0b21Hcm91cCddLFxuXG4gICAgLy8gaGVpZ2h0OiAxNjAtMjUwXG4gICAgc3RhZ2U0OiBbJ01hcFN3aXRjaCcsICdtaWRHcm91cC1yaWdodC1jb250ZW50LXRvcCcsICdIb21lJywgJ0xvY2F0ZScsICdDbGVhckFjdGlvbkRhdGEnLCAnYm90dG9tR3JvdXAnXSxcblxuICAgIC8vIGhlaWdodDogNTQtMTYwXG4gICAgc3RhZ2U1OiBbJ21pZEdyb3VwJywgJ2JvdHRvbUdyb3VwJ10sXG5cbiAgICAvLyBoZWlnaHQ6IDAtNTRcbiAgICBzdGFnZTY6IFsndG9wR3JvdXAnLCAnbWlkR3JvdXAnLCAnYm90dG9tR3JvdXAnXVxuICB9LFxuICBsb2NrVG9vbE5hbWVzOiBbXVxufVxuXG5jb25zdCBtb2JpbGVMYXlvdXRKc29uczogTGF5b3V0SnNvbltdID0gW21vYmlsZUxheW91dEpzb25dXG5cbmV4cG9ydCBkZWZhdWx0IG1vYmlsZUxheW91dEpzb25zXG4iLCJpbXBvcnQgeyB0eXBlIExheW91dEpzb24gfSBmcm9tICcuL2NvbmZpZydcblxuY29uc3QgbGF5b3V0SnNvbjE6IExheW91dEpzb24gPSB7XG4gIGVsZW1lbnRzOiB7XG4gICAgbGVmdFRvcENvbnRhaW5lcjoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ2xlZnRUb3BDb250YWluZXInLFxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICBzdHlsZToge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMTVweCcsXG4gICAgICAgIGxlZnQ6ICcxNXB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgbmF2aWdhdG9yOiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnbmF2aWdhdG9yJyxcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblJpZ2h0OiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIGludGVyYWN0OiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnaW50ZXJhY3QnLFxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgaXNSZXNwb25zaXZlOiB0cnVlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzE1cHgnLFxuICAgICAgICByaWdodDogJzE1cHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBib3R0b206IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdib3R0b20nLFxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgY2xhc3NOYW1lOiAndy0xMDAnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGJvdHRvbTogJzBweCcsXG4gICAgICAgIGxlZnQ6ICcwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICAnYm90dG9tLWxpbmUxJzoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ2JvdHRvbS1saW5lMScsXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgIGNsYXNzTmFtZTogJ2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4gdy0xMDAgc2NhbGUtYXR0cmlidXRpb24teHktZ3JvdXAnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMHB4JyxcbiAgICAgICAgbWFyZ2luVG9wOiAnMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2JvdHRvbS1saW5lMic6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdib3R0b20tbGluZTInLFxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICBjbGFzc05hbWU6ICdkLWZsZXggYWxpZ24taXRlbXMtZW5kIGp1c3RpZnktY29udGVudC1iZXR3ZWVuIHctMTAwJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBhZGRpbmdMZWZ0OiAnMTVweCcsXG4gICAgICAgIHBhZGRpbmdSaWdodDogJzE1cHgnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgJ1NlbGVjdFN0YXRlLUZ1bGxTY3JlZW4tQ29udGFpbmVyJzoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ1NlbGVjdFN0YXRlLUZ1bGxTY3JlZW4tQ29udGFpbmVyJyxcbiAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgIGlzVmVydGljYWxScmxBbGlnbkl0ZW1zRW5kOiB0cnVlXG4gICAgfSxcbiAgICBhdHRyaWJ1dGlvbkdyb3VwOiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnYXR0cmlidXRpb25Hcm91cCcsXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1heFdpZHRoOiAnNjAlJ1xuICAgICAgfVxuICAgIH0sXG4gICAgWm9vbToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdab29tJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBIb21lOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0hvbWUnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIENvbXBhc3M6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnQ29tcGFzcycsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2VcbiAgICB9LFxuICAgIE5hdmlnYXRpb246IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnTmF2aWdhdGlvbicsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2UsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgTG9jYXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0xvY2F0ZScsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2UsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgTGF5ZXJzOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0xheWVycycsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIEJhc2VNYXA6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnQmFzZU1hcCcsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIFNlbGVjdDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdTZWxlY3QnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIFNlbGVjdFN0YXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NlbGVjdFN0YXRlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblRvcDogJzEwcHgnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDFweCAycHggMCByZ2JhKDAsMCwwLDApJ1xuICAgICAgfVxuICAgIH0sXG4gICAgRXh0ZW50TmF2aWdhdGU6IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnRXh0ZW50TmF2aWdhdGUnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgTWVhc3VyZToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdNZWFzdXJlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiBmYWxzZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogdHJ1ZSxcbiAgICAgIHBhbmVsUGxhY2VtZW50OiAnbGVmdC1zdGFydCdcbiAgICB9LFxuICAgIE1hcFN3aXRjaDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdNYXBTd2l0Y2gnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIEZ1bGxTY3JlZW46IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnRnVsbFNjcmVlbicsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIENsZWFyQWN0aW9uRGF0YToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdDbGVhckFjdGlvbkRhdGEnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlXG4gICAgfSxcbiAgICBTY2FsZUJhcjoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdTY2FsZUJhcicsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2VcbiAgICB9LFxuICAgIEF0dHJpYnV0aW9uOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0F0dHJpYnV0aW9uJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIGNsYXNzTmFtZTogJ3ctMTAwJ1xuICAgIH0sXG4gICAgU2VhcmNoOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NlYXJjaCcsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2xlZnQtc3RhcnQnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMTBweCdcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGxheW91dDoge1xuICAgIGxlZnRUb3BDb250YWluZXI6IHtcbiAgICAgIGlzTWFpbkdyb3VwOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IFsnbmF2aWdhdG9yJywgJ1NlbGVjdCddXG4gICAgfSxcbiAgICBuYXZpZ2F0b3I6IHtcbiAgICAgIGNoaWxkcmVuOiBbJ1pvb20nLCAnSG9tZScsICdOYXZpZ2F0aW9uJywgJ0V4dGVudE5hdmlnYXRlJywgJ0xvY2F0ZScsICdDb21wYXNzJ11cbiAgICB9LFxuICAgIGludGVyYWN0OiB7XG4gICAgICBpc01haW5Hcm91cDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBbJ1NlYXJjaCcsICdMYXllcnMnLCAnQmFzZU1hcCcsICdNZWFzdXJlJ11cbiAgICB9LFxuICAgICdib3R0b20tbGluZTEnOiB7XG4gICAgICBjaGlsZHJlbjogWydTY2FsZUJhcicsICdhdHRyaWJ1dGlvbkdyb3VwJ11cbiAgICB9LFxuICAgICdib3R0b20tbGluZTInOiB7XG4gICAgICBjaGlsZHJlbjogWydNYXBTd2l0Y2gnLCAnU2VsZWN0U3RhdGUtRnVsbFNjcmVlbi1Db250YWluZXInXVxuICAgIH0sXG4gICAgJ1NlbGVjdFN0YXRlLUZ1bGxTY3JlZW4tQ29udGFpbmVyJzoge1xuICAgICAgY2hpbGRyZW46IFsnRnVsbFNjcmVlbicsICdDbGVhckFjdGlvbkRhdGEnLCAnU2VsZWN0U3RhdGUnXVxuICAgIH0sXG4gICAgYm90dG9tOiB7XG4gICAgICBpc01haW5Hcm91cDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBbJ2JvdHRvbS1saW5lMicsICdib3R0b20tbGluZTEnXVxuICAgIH0sXG4gICAgYXR0cmlidXRpb25Hcm91cDoge1xuICAgICAgY2hpbGRyZW46IFsnQXR0cmlidXRpb24nXVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBsYXlvdXRKc29uMjogTGF5b3V0SnNvbiA9IHtcbiAgZWxlbWVudHM6IHtcbiAgICBuYXZpZ2F0b3I6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICduYXZpZ2F0b3InLFxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgaXNWZXJ0aWNhbFJybEFsaWduSXRlbXNFbmQ6IHRydWVcbiAgICB9LFxuICAgIGludGVyYWN0OiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnaW50ZXJhY3QnLFxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICBpc1Jlc3BvbnNpdmU6IHRydWUsXG4gICAgICBzdHlsZToge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMTVweCcsXG4gICAgICAgIGxlZnQ6ICcxNXB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgZnVsbFNjcmVlbkdyb3VwOiB7XG4gICAgICB0eXBlOiAnR1JPVVAnLFxuICAgICAgZ3JvdXBOYW1lOiAnZnVsbFNjcmVlbkdyb3VwJyxcbiAgICAgIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIHRvcDogJzE1cHgnLFxuICAgICAgICByaWdodDogJzE1cHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBib3R0b206IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdib3R0b20nLFxuICAgICAgZGlyZWN0aW9uOiAndmVydGljYWwnLFxuICAgICAgY2xhc3NOYW1lOiAndy0xMDAnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgIGJvdHRvbTogJzBweCcsXG4gICAgICAgIGxlZnQ6ICcwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICAnYm90dG9tLWxpbmUxJzoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ2JvdHRvbS1saW5lMScsXG4gICAgICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgICAgIGNsYXNzTmFtZTogJ2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWJldHdlZW4gdy0xMDAgc2NhbGUtYXR0cmlidXRpb24teHktZ3JvdXAnLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMHB4JyxcbiAgICAgICAgbWFyZ2luVG9wOiAnMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2JvdHRvbS1saW5lMic6IHtcbiAgICAgIHR5cGU6ICdHUk9VUCcsXG4gICAgICBncm91cE5hbWU6ICdib3R0b20tbGluZTInLFxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICBjbGFzc05hbWU6ICdkLWZsZXggYWxpZ24taXRlbXMtZW5kIGp1c3RpZnktY29udGVudC1iZXR3ZWVuIHctMTAwJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHBhZGRpbmdMZWZ0OiAnMTVweCcsXG4gICAgICAgIHBhZGRpbmdSaWdodDogJzE1cHgnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgYXR0cmlidXRpb25Hcm91cDoge1xuICAgICAgdHlwZTogJ0dST1VQJyxcbiAgICAgIGdyb3VwTmFtZTogJ2F0dHJpYnV0aW9uR3JvdXAnLFxuICAgICAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXhXaWR0aDogJzYwJSdcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWU6ICdhdHRpYnV0ZS1ncm91cCdcbiAgICB9LFxuICAgIFpvb206IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnWm9vbScsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2UsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5Ub3A6ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgSG9tZToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdIb21lJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblRvcDogJzEwcHgnXG4gICAgICB9XG4gICAgfSxcbiAgICBDb21wYXNzOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0NvbXBhc3MnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlXG4gICAgfSxcbiAgICBOYXZpZ2F0aW9uOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ05hdmlnYXRpb24nLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIExvY2F0ZToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdMb2NhdGUnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIEV4dGVudE5hdmlnYXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0V4dGVudE5hdmlnYXRlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiB0cnVlLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luVG9wOiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIExheWVyczoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdMYXllcnMnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiB0cnVlLFxuICAgICAgcGFuZWxQbGFjZW1lbnQ6ICdib3R0b20nLFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgbWFyZ2luUmlnaHQ6ICcxMHB4J1xuICAgICAgfVxuICAgIH0sXG4gICAgQmFzZU1hcDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdCYXNlTWFwJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiBmYWxzZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogdHJ1ZSxcbiAgICAgIHBhbmVsUGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblJpZ2h0OiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIFNlbGVjdDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdTZWxlY3QnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIFNlbGVjdFN0YXRlOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NlbGVjdFN0YXRlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblRvcDogJzEwcHgnLFxuICAgICAgICBib3hTaGFkb3c6ICcwIDFweCAycHggMCByZ2JhKDAsMCwwLDApJ1xuICAgICAgfVxuICAgIH0sXG4gICAgTWVhc3VyZToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdNZWFzdXJlJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiBmYWxzZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogdHJ1ZSxcbiAgICAgIHBhbmVsUGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIG1hcmdpblJpZ2h0OiAnMTBweCdcbiAgICAgIH1cbiAgICB9LFxuICAgIE1hcFN3aXRjaDoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdNYXBTd2l0Y2gnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIEZ1bGxTY3JlZW46IHtcbiAgICAgIHR5cGU6ICdUT09MJyxcbiAgICAgIHRvb2xOYW1lOiAnRnVsbFNjcmVlbicsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWVcbiAgICB9LFxuICAgIENsZWFyQWN0aW9uRGF0YToge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdDbGVhckFjdGlvbkRhdGEnLFxuICAgICAgaXNPbmx5RXhwYW5kZWQ6IHRydWUsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IGZhbHNlXG4gICAgfSxcbiAgICBTY2FsZUJhcjoge1xuICAgICAgdHlwZTogJ1RPT0wnLFxuICAgICAgdG9vbE5hbWU6ICdTY2FsZUJhcicsXG4gICAgICBpc09ubHlFeHBhbmRlZDogdHJ1ZSxcbiAgICAgIGlzU2hvd0ljb25UaXRsZTogZmFsc2VcbiAgICB9LFxuICAgIEF0dHJpYnV0aW9uOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ0F0dHJpYnV0aW9uJyxcbiAgICAgIGlzT25seUV4cGFuZGVkOiB0cnVlLFxuICAgICAgaXNTaG93SWNvblRpdGxlOiBmYWxzZSxcbiAgICAgIGNsYXNzTmFtZTogJ3ctMTAwJ1xuICAgIH0sXG4gICAgU2VhcmNoOiB7XG4gICAgICB0eXBlOiAnVE9PTCcsXG4gICAgICB0b29sTmFtZTogJ1NlYXJjaCcsXG4gICAgICBpc09ubHlFeHBhbmRlZDogZmFsc2UsXG4gICAgICBpc1Nob3dJY29uVGl0bGU6IHRydWUsXG4gICAgICBwYW5lbFBsYWNlbWVudDogJ2JvdHRvbScsXG4gICAgICBzdHlsZToge1xuICAgICAgICBtYXJnaW5SaWdodDogJzEwcHgnXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBsYXlvdXQ6IHtcbiAgICBuYXZpZ2F0b3I6IHtcbiAgICAgIGNoaWxkcmVuOiBbJ0NvbXBhc3MnLCAnTG9jYXRlJywgJ0V4dGVudE5hdmlnYXRlJywgJ05hdmlnYXRpb24nLCAnWm9vbScsICdIb21lJywgJ1NlbGVjdFN0YXRlJ11cbiAgICB9LFxuICAgIGludGVyYWN0OiB7XG4gICAgICBpc01haW5Hcm91cDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBbJ1NlYXJjaCcsICdMYXllcnMnLCAnQmFzZU1hcCcsICdNZWFzdXJlJywgJ1NlbGVjdCddXG4gICAgfSxcbiAgICBmdWxsU2NyZWVuR3JvdXA6IHtcbiAgICAgIGlzTWFpbkdyb3VwOiB0cnVlLFxuICAgICAgY2hpbGRyZW46IFsnRnVsbFNjcmVlbicsICdDbGVhckFjdGlvbkRhdGEnXVxuICAgIH0sXG4gICAgJ2JvdHRvbS1saW5lMSc6IHtcbiAgICAgIGNoaWxkcmVuOiBbJ1NjYWxlQmFyJywgJ2F0dHJpYnV0aW9uR3JvdXAnXVxuICAgIH0sXG4gICAgJ2JvdHRvbS1saW5lMic6IHtcbiAgICAgIGNoaWxkcmVuOiBbJ01hcFN3aXRjaCcsICduYXZpZ2F0b3InXVxuICAgIH0sXG4gICAgYm90dG9tOiB7XG4gICAgICBpc01haW5Hcm91cDogdHJ1ZSxcbiAgICAgIGNoaWxkcmVuOiBbJ2JvdHRvbS1saW5lMicsICdib3R0b20tbGluZTEnXVxuICAgIH0sXG4gICAgYXR0cmlidXRpb25Hcm91cDoge1xuICAgICAgY2hpbGRyZW46IFsnQXR0cmlidXRpb24nXVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBsYXlvdXRKc29uczogTGF5b3V0SnNvbltdID0gW2xheW91dEpzb24xLCBsYXlvdXRKc29uMl1cblxuZXhwb3J0IGRlZmF1bHQgbGF5b3V0SnNvbnNcbiIsImltcG9ydCBab29tIGZyb20gJy4uL3Rvb2xzL3pvb20nXG5pbXBvcnQgSG9tZSBmcm9tICcuLi90b29scy9ob21lJ1xuaW1wb3J0IENvbXBhc3MgZnJvbSAnLi4vdG9vbHMvY29tcGFzcydcbmltcG9ydCBMb2NhdGUgZnJvbSAnLi4vdG9vbHMvbG9jYXRlJ1xuaW1wb3J0IENsZWFyQWN0aW9uRGF0YSBmcm9tICcuLi90b29scy9jbGVhci1hY3Rpb24tZGF0YSdcbmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gJy4uL3Rvb2xzL25hdmlnYXRpb24nXG5pbXBvcnQgU2VhcmNoIGZyb20gJy4uL3Rvb2xzL3NlYXJjaCdcbmltcG9ydCBMYXllcnMgZnJvbSAnLi4vdG9vbHMvbGF5ZXJzJ1xuaW1wb3J0IEJhc2VNYXAgZnJvbSAnLi4vdG9vbHMvYmFzZW1hcCdcbmltcG9ydCBNYXBTd2l0Y2ggZnJvbSAnLi4vdG9vbHMvbWFwc3dpdGNoJ1xuaW1wb3J0IEZ1bGxTY3JlZW4gZnJvbSAnLi4vdG9vbHMvZnVsbHNjcmVlbidcbmltcG9ydCBTY2FsZUJhciBmcm9tICcuLi90b29scy9zY2FsZWJhcidcbmltcG9ydCBBdHRyaWJ1dGlvbiBmcm9tICcuLi90b29scy9hdHRyaWJ1dGlvbidcbmltcG9ydCBNZWFzdXJlIGZyb20gJy4uL3Rvb2xzL21lYXN1cmUnXG5pbXBvcnQgU2VsZWN0IGZyb20gJy4uL3Rvb2xzL3NlbGVjdCdcbmltcG9ydCBTZWxlY3RTdGF0ZSBmcm9tICcuLi90b29scy9zZWxlY3RzdGF0ZSdcbmltcG9ydCBFeHRlbnROYXZpZ2F0ZSBmcm9tICcuLi90b29scy9leHRlbnQtbmF2aWdhdGUnXG5cbmNvbnN0IFRvb2xNb2R1bGVzOiB7IFtNb2R1bGVOYW1lOiBzdHJpbmddOiBhbnkgfSA9IHtcbiAgWm9vbTogWm9vbSxcbiAgSG9tZTogSG9tZSxcbiAgTmF2aWdhdGlvbjogTmF2aWdhdGlvbixcbiAgTG9jYXRlOiBMb2NhdGUsXG4gIENsZWFyQWN0aW9uRGF0YTogQ2xlYXJBY3Rpb25EYXRhLFxuICBDb21wYXNzOiBDb21wYXNzLFxuICBTZWFyY2g6IFNlYXJjaCxcbiAgTGF5ZXJzOiBMYXllcnMsXG4gIEJhc2VNYXA6IEJhc2VNYXAsXG4gIE1lYXN1cmU6IE1lYXN1cmUsXG4gIE1hcFN3aXRjaDogTWFwU3dpdGNoLFxuICBGdWxsU2NyZWVuOiBGdWxsU2NyZWVuLFxuICBTY2FsZUJhcjogU2NhbGVCYXIsXG4gIEF0dHJpYnV0aW9uOiBBdHRyaWJ1dGlvbixcbiAgU2VsZWN0OiBTZWxlY3QsXG4gIFNlbGVjdFN0YXRlOiBTZWxlY3RTdGF0ZSxcbiAgRXh0ZW50TmF2aWdhdGU6IEV4dGVudE5hdmlnYXRlXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xNb2R1bGVzXG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF0dHJpYnV0aW9uIGV4dGVuZHMgQmFzZVRvb2w8QmFzZVRvb2xQcm9wcywgdW5rbm93bj4ge1xuICB0b29sTmFtZSA9ICdBdHRyaWJ1dGlvbidcblxuICBzdGF0aWMgZ2V0SXNOZWVkU2V0dGluZyAoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXRUaXRsZSAoKSB7XG4gICAgcmV0dXJuICdBdHRyaWJ1dGlvbidcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gPEF0dHJpYnV0aW9uSW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IC8+XG4gIH1cbn1cblxuaW50ZXJmYWNlIEF0dHJpYnV0aW9uSW5uZXJQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xufVxuXG5pbnRlcmZhY2UgQXR0cmlidXRpb25Jbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG59XG5cbmNsYXNzIEF0dHJpYnV0aW9uSW5uZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEF0dHJpYnV0aW9uSW5uZXJQcm9wcywgQXR0cmlidXRpb25Jbm5lclN0YXRlPiB7XG4gIEF0dHJpYnV0aW9uOiB0eXBlb2YgX19lc3JpLkF0dHJpYnV0aW9uID0gbnVsbFxuICBBdHRyaWJ1dGlvbkJ0bjogX19lc3JpLkF0dHJpYnV0aW9uXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnRcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhcGlMb2FkZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5hcGlMb2FkZWQpIHtcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL3dpZGdldHMvQXR0cmlidXRpb24nXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW3RoaXMuQXR0cmlidXRpb25dID0gbW9kdWxlc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhcGlMb2FkZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IEF0dHJpYnV0aW9uSW5uZXJQcm9wcykge1xuICAgIGlmICh0aGlzLnN0YXRlLmFwaUxvYWRlZCAmJiB0aGlzLmNvbnRhaW5lcikge1xuICAgICAgaWYgKHByZXZQcm9wcy5qaW11TWFwVmlldyAmJiB0aGlzLnByb3BzLmppbXVNYXBWaWV3ICYmIChwcmV2UHJvcHMuamltdU1hcFZpZXcuaWQgIT09IHRoaXMucHJvcHMuamltdU1hcFZpZXcuaWQpKSB7XG4gICAgICAgIGlmICh0aGlzLkF0dHJpYnV0aW9uQnRuICYmICF0aGlzLkF0dHJpYnV0aW9uQnRuLmRlc3Ryb3kpIHtcbiAgICAgICAgICB0aGlzLkF0dHJpYnV0aW9uQnRuLnZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXdcbiAgICAgICAgICB0aGlzLkF0dHJpYnV0aW9uQnRuLnJlbmRlck5vdygpXG5cbiAgICAgICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmFkZEppbXVNYXBUb29sKHtcbiAgICAgICAgICAgIG5hbWU6ICdBdHRyaWJ1dGlvbicsXG4gICAgICAgICAgICBpbnN0YW5jZTogdGhpcy5BdHRyaWJ1dGlvbkJ0blxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQXR0cmlidXRpb25CdG4gPSBuZXcgdGhpcy5BdHRyaWJ1dGlvbih7XG4gICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXdcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdBdHRyaWJ1dGlvbicpXG4gICAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuYWRkSmltdU1hcFRvb2woe1xuICAgICAgICAgIG5hbWU6ICdBdHRyaWJ1dGlvbicsXG4gICAgICAgICAgaW5zdGFuY2U6IHRoaXMuQXR0cmlidXRpb25CdG5cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMuQXR0cmlidXRpb25CdG4pIHtcbiAgICAgIHRoaXMuQXR0cmlidXRpb25CdG4uZGVzdHJveSgpXG4gICAgICB0aGlzLkF0dHJpYnV0aW9uQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnQXR0cmlidXRpb24nKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdhdHRyaWJ1dGlvbi1tYXAtdG9vbCcgc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0gcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fSAvPlxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgYmFzZW1hcFV0aWxzIH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VNYXAgZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ0Jhc2VNYXAnXG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnQmFzZU1hcExhYmVsJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5CYXNlTWFwTGFiZWwgfSlcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogcmVxdWlyZSgnLi4vYXNzZXRzL2ljb25zL2Jhc2VtYXAuc3ZnJylcbiAgICB9XG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIHJldHVybiA8QmFzZU1hcElubmVyIGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fSBpc01vYmlsZT17dGhpcy5wcm9wcy5pc01vYmlsZX0gLz5cbiAgfVxufVxuXG5pbnRlcmZhY2UgQmFzZU1hcElubmVyUHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgaXNNb2JpbGU6IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIEJhc2VNYXBJbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG4gIHNvdXJjZUxvYWRlZDogYm9vbGVhblxufVxuXG5jbGFzcyBCYXNlTWFwSW5uZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PEJhc2VNYXBJbm5lclByb3BzLCBCYXNlTWFwSW5uZXJTdGF0ZT4ge1xuICBCYXNlbWFwR2FsbGVyeTogdHlwZW9mIF9fZXNyaS5CYXNlbWFwR2FsbGVyeVxuICBMb2NhbEJhc2VtYXBzU291cmNlOiB0eXBlb2YgX19lc3JpLkxvY2FsQmFzZW1hcHNTb3VyY2VcbiAgYmFzZW1hcEdhbGxlcnk6IF9fZXNyaS5CYXNlbWFwR2FsbGVyeVxuICBvcmdCYXNlbWFwczogX19lc3JpLkJhc2VtYXBbXVxuICBjb250YWluZXI6IEhUTUxFbGVtZW50XG4gIF9fdW5tb3VudCA9IGZhbHNlXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYXBpTG9hZGVkOiBmYWxzZSxcbiAgICAgIHNvdXJjZUxvYWRlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmFwaUxvYWRlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2Vzcmkvd2lkZ2V0cy9CYXNlbWFwR2FsbGVyeScsICdlc3JpL3dpZGdldHMvQmFzZW1hcEdhbGxlcnkvc3VwcG9ydC9Mb2NhbEJhc2VtYXBzU291cmNlJ10pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9fdW5tb3VudCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgW3RoaXMuQmFzZW1hcEdhbGxlcnksIHRoaXMuTG9jYWxCYXNlbWFwc1NvdXJjZV0gPSBtb2R1bGVzXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGFwaUxvYWRlZDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuc291cmNlTG9hZGVkKSB7XG4gICAgICBiYXNlbWFwVXRpbHMuZ2V0T3JnQmFzZW1hcHMoKS50aGVuKChiYXNlbWFwczogX19lc3JpLkJhc2VtYXBbXSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fX3VubW91bnQpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub3JnQmFzZW1hcHMgPSBiYXNlbWFwc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzb3VyY2VMb2FkZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYGxvYWQgYmFzZW1hcCBnYWxsZXJ5IHNvdXJjZSBlcnJvcjogJHtlcnJ9YClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IEJhc2VNYXBJbm5lclByb3BzKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuc3RhdGUuc291cmNlTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5iYXNlbWFwR2FsbGVyeSkge1xuICAgICAgICAvLyBiYXNlbWFwR2FsbGVyeSBhbHJlYWR5IGNyZWF0ZWRcbiAgICAgICAgY29uc3QgaXNWaWV3Q2hhbmdlZCA9IHByZXZQcm9wcy5qaW11TWFwVmlldyAmJiB0aGlzLnByb3BzLmppbXVNYXBWaWV3ICYmIChwcmV2UHJvcHMuamltdU1hcFZpZXcuaWQgIT09IHRoaXMucHJvcHMuamltdU1hcFZpZXcuaWQpXG5cbiAgICAgICAgaWYgKGlzVmlld0NoYW5nZWQpIHtcbiAgICAgICAgICAvLyB2aWV3IGNoYW5nZWRcbiAgICAgICAgICB0aGlzLmJhc2VtYXBHYWxsZXJ5LnZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXdcbiAgICAgICAgICB0aGlzLmJhc2VtYXBHYWxsZXJ5LnNvdXJjZSA9IHRoaXMuZ2V0RmluYWxCYXNlbWFwR2FsbGVyeVNvdXJjZSh0aGlzLm9yZ0Jhc2VtYXBzKVxuICAgICAgICAgIHRoaXMuYmFzZW1hcEdhbGxlcnkucmVuZGVyTm93KClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYmFzZW1hcEdhbGxlcnkgbm90IGNyZWF0ZWRcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5nZXRGaW5hbEJhc2VtYXBHYWxsZXJ5U291cmNlKHRoaXMub3JnQmFzZW1hcHMpXG4gICAgICAgIHRoaXMuYmFzZW1hcEdhbGxlcnkgPSBuZXcgdGhpcy5CYXNlbWFwR2FsbGVyeSh7XG4gICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXcsXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnQsIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGluY2x1ZGVDdXJyZW50QmFzZW1hcDogdHJ1ZVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ0Jhc2VNYXAnKVxuICAgICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmFkZEppbXVNYXBUb29sKHtcbiAgICAgICAgICBuYW1lOiAnQmFzZU1hcCcsXG4gICAgICAgICAgaW5zdGFuY2U6IHRoaXMuYmFzZW1hcEdhbGxlcnlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRGaW5hbEJhc2VtYXBHYWxsZXJ5U291cmNlIChvcmdCYXNlbWFwczogX19lc3JpLkJhc2VtYXBbXSk6IF9fZXNyaS5Mb2NhbEJhc2VtYXBzU291cmNlIHtcbiAgICBjb25zdCBmaW5hbEJhc2VtYXBzID0gb3JnQmFzZW1hcHMuc2xpY2UoKVxuXG4gICAgY29uc3Qgc291cmNlID0gbmV3IHRoaXMuTG9jYWxCYXNlbWFwc1NvdXJjZSh7XG4gICAgICBiYXNlbWFwczogZmluYWxCYXNlbWFwc1xuICAgIH0pXG5cbiAgICByZXR1cm4gc291cmNlXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgdGhpcy5fX3VubW91bnQgPSB0cnVlXG5cbiAgICBpZiAodGhpcy5iYXNlbWFwR2FsbGVyeSkge1xuICAgICAgdGhpcy5iYXNlbWFwR2FsbGVyeS5kZXN0cm95KClcbiAgICAgIHRoaXMuYmFzZW1hcEdhbGxlcnkgPSBudWxsXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdCYXNlTWFwJylcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIGlmICh0aGlzLnByb3BzLmlzTW9iaWxlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYmFzZW1hcC1tYXAtdG9vbCcgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fSBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBtaW5IZWlnaHQ6ICczMnB4JywgbWF4V2lkdGg6ICdub25lJywgbWF4SGVpZ2h0OiAnbm9uZScsIG92ZXJmbG93WTogJ2F1dG8nLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cbiAgICAgICAgICB7IXRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIDxkaXYgY2xhc3NOYW1lPSdleGJtYXAtYmFzZXRvb2wtbG9hZGVyJyAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9e3JlZiA9PiB7IHRoaXMuY29udGFpbmVyID0gcmVmIH19IHN0eWxlPXt7IHdpZHRoOiAnMjUwcHgnLCBtaW5IZWlnaHQ6ICczMnB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScgfX1cbiAgICAgICAgICBjbGFzc05hbWU9J2V4Ym1hcC11aS1wYy1leHBhbmQtbWF4aGVpZ2h0IGJhc2VtYXAtbWFwLXRvb2wnXG4gICAgICAgID5cbiAgICAgICAgICB7IXRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIDxkaXYgY2xhc3NOYW1lPSdleGJtYXAtYmFzZXRvb2wtbG9hZGVyJyAvPn1cbiAgICAgICAgPC9kaXY+XG4gICAgICApXG4gICAgfVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGNzcywganN4LCBNdXRhYmxlU3RvcmVNYW5hZ2VyLCBnZXRBcHBTdG9yZSwgdHlwZSBJbW11dGFibGVPYmplY3QsIHR5cGUgSmltdU1hcFZpZXdJbmZvIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTaG93T25NYXBEYXRhcywgdHlwZSBBZGRUb01hcERhdGFzLCB0eXBlIE1hcE11dGFibGVTdGF0ZSwgQWN0aW9uVHlwZSwgRGF0YUNoYW5nZVR5cGUgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IEljb24sIERyb3Bkb3duLCBEcm9wZG93bk1lbnUsIERyb3Bkb3duQnV0dG9uLCBEcm9wZG93bkl0ZW0sIGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBCYXNlVG9vbCwgdHlwZSBCYXNlVG9vbFByb3BzLCB0eXBlIEljb25UeXBlIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IHsgTXVsdGlTb3VyY2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9tdWx0aXNvdXJjZW1hcC1jb250ZXh0J1xuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBpc09wZW46IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIExpc3RJdGVtIHtcbiAgbGF5ZXJJZDogc3RyaW5nXG4gIHRpdGxlOiBzdHJpbmdcbiAgaXNBY3Rpb246IGJvb2xlYW4gLy8gdHJ1ZSBtZWFucyB0aGlzIGl0ZW0gY29tZXMgZnJvbSBTaG93T25NYXAvQWRkVG9NYXAgYWN0aW9ucywgZmFsc2UgbWVhbnMgaXQgY29tZXMgZnJvbSBKaW11TGF5ZXJWaWV3XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsZWFyQWN0aW9uRGF0YSBleHRlbmRzIEJhc2VUb29sPEJhc2VUb29sUHJvcHMsIFN0YXRlPiB7XG4gIHRvb2xOYW1lID0gJ0NsZWFyQWN0aW9uRGF0YSdcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0geyBpc09wZW46IGZhbHNlIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRJc05lZWRTZXR0aW5nICgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLmppbXUtZHJvcGRvd24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAuaWNvbi1idG4ge1xuICAgICAgICAgIHBhZGRpbmc6IDdweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnY2xlYXJSZXN1bHRzJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5jbGVhclJlc3VsdHMgfSlcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogcmVxdWlyZSgnamltdS1pY29ucy9zdmcvb3V0bGluZWQvZWRpdG9yL3RyYXNoLnN2ZycpLFxuICAgICAgb25JY29uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5vbkljb25DbGljaygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0TGlzdEl0ZW1zIChtYXBXaWRnZXRJZDogc3RyaW5nKTogTGlzdEl0ZW1bXSB7XG4gICAgY29uc3QgbWFwTXV0YWJsZVN0YXRlOiBNYXBNdXRhYmxlU3RhdGUgPSBNdXRhYmxlU3RvcmVNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0U3RhdGVWYWx1ZShbbWFwV2lkZ2V0SWRdKSB8fCB7fVxuICAgIGNvbnN0IGxpc3RJdGVtczEgPSB0aGlzLmdldExpc3RJdGVtc0J5QWRkT3JTaG93T25NYXBEYXRhcyhtYXBXaWRnZXRJZCwgbWFwTXV0YWJsZVN0YXRlKVxuICAgIGNvbnN0IGxheWVySWRzMSA9IGxpc3RJdGVtczEubWFwKGxpc3RJdGVtID0+IGxpc3RJdGVtLmxheWVySWQpXG4gICAgbGV0IGxpc3RJdGVtczIgPSB0aGlzLmdldExpc3RJdGVtc0J5UmVtb3ZlYWJsZUxheWVySWRzSW5mbyhtYXBNdXRhYmxlU3RhdGUpXG4gICAgLy8gb25lIGxheWVySWQgbWF5YmUgYm90aCBpbiBzaG93T25NYXBEYXRhcy9hZGRUb01hcERhdGFzIGFuZCByZW1vdmVhYmxlTGF5ZXJJZHNJbmZvLCBzbyBuZWVkIHRvIHJlbW92ZSByZXBlYXQgaXRlbXNcbiAgICBsaXN0SXRlbXMyID0gbGlzdEl0ZW1zMi5maWx0ZXIobGlzdEl0ZW0gPT4gIWxheWVySWRzMS5pbmNsdWRlcyhsaXN0SXRlbS5sYXllcklkKSlcbiAgICBjb25zdCByZXN1bHQgPSBsaXN0SXRlbXMxLmNvbmNhdChsaXN0SXRlbXMyKVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBPbmx5IHNob3cgbGF5ZXJzIHRoYXQgY3JhdGVkIGJ5IGRhdGEgYWN0aW9ucy4gVGhlIGxheWVycyBtYXliZSBjcmF0ZWQgYnkgc2hvd09uTWFwIGRhdGEgYWN0aW9uIG9yIGFkZFRvTWFwIGRhdGEgYWN0aW9uLlxuICAgKiBAcGFyYW0gbWFwV2lkZ2V0SWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGdldExpc3RJdGVtc0J5QWRkT3JTaG93T25NYXBEYXRhcyAobWFwV2lkZ2V0SWQ6IHN0cmluZywgbWFwTXV0YWJsZVN0YXRlOiBNYXBNdXRhYmxlU3RhdGUpOiBMaXN0SXRlbVtdIHtcbiAgICBjb25zdCBzaG93T25NYXBEYXRhczogU2hvd09uTWFwRGF0YXMgPSBtYXBNdXRhYmxlU3RhdGU/LnNob3dPbk1hcERhdGFzIHx8IHt9XG4gICAgY29uc3QgYWRkVG9NYXBEYXRhczogQWRkVG9NYXBEYXRhcyA9IG1hcE11dGFibGVTdGF0ZT8uYWRkVG9NYXBEYXRhcyB8fCB7fVxuXG4gICAgY29uc3Qgc2hvd09uTWFwRGF0YUluZm9zID0gT2JqZWN0LmVudHJpZXMoc2hvd09uTWFwRGF0YXMpLm1hcChlbnRyeSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZW50cnlbMF0sXG4gICAgICAgIHRpdGxlOiBlbnRyeVsxXS50aXRsZSxcbiAgICAgICAgamltdU1hcFZpZXdJZDogZW50cnlbMV0uamltdU1hcFZpZXdJZCxcbiAgICAgICAgbWFwV2lkZ2V0SWQ6IGVudHJ5WzFdLm1hcFdpZGdldElkLFxuICAgICAgICBuZWVkVG9SZW1vdmU6IHRydWUsXG4gICAgICAgIHR5cGU6IGVudHJ5WzFdLnR5cGVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgYWRkVG9NYXBEYXRhSW5mb3MgPSBPYmplY3QuZW50cmllcyhhZGRUb01hcERhdGFzKS5tYXAoZW50cnkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGVudHJ5WzBdLFxuICAgICAgICB0aXRsZTogZW50cnlbMV0udGl0bGUsXG4gICAgICAgIGppbXVNYXBWaWV3SWQ6IGVudHJ5WzFdLmppbXVNYXBWaWV3SWQsXG4gICAgICAgIG1hcFdpZGdldElkOiBlbnRyeVsxXS5tYXBXaWRnZXRJZCxcbiAgICAgICAgbmVlZFRvUmVtb3ZlOiBlbnRyeVsxXS5kYXRhQ2hhbmdlVHlwZSA9PT0gRGF0YUNoYW5nZVR5cGUuQ3JlYXRlZCxcbiAgICAgICAgdHlwZTogZW50cnlbMV0udHlwZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhQWN0aW9uSW5mb3MgPSBzaG93T25NYXBEYXRhSW5mb3MuY29uY2F0KGFkZFRvTWFwRGF0YUluZm9zKS5maWx0ZXIoZGF0YUluZm8gPT4ge1xuICAgICAgLy8gVGhlcmUgaXMgbm8gamltdU1hcFZpZXdJZCB3aGlsZSBnZW5lcmF0aW5nIHRoZSBhY3Rpb24gZGF0YSBpZiB0aGUgbWFwIHdpZGdldCBoYXNuJ3QgYmVlbiBsb2FkZWQgaW4gdGhlIGFub3RoZXIgcGFnZS92aWV3LFxuICAgICAgLy8gdXNlIGEgZGVmYXVsdCBqaW11TWFwVmlld0lkIHRvIHNob3cgZGF0YS5cbiAgICAgIGxldCBqaW11TWFwVmlld0lkID0gZGF0YUluZm8uamltdU1hcFZpZXdJZFxuICAgICAgaWYgKCFqaW11TWFwVmlld0lkICYmIGRhdGFJbmZvLm1hcFdpZGdldElkID09PSBtYXBXaWRnZXRJZCkge1xuICAgICAgICBjb25zdCBqaW11TWFwVmlld3NJbmZvOiBJbW11dGFibGVPYmplY3Q8eyBbamltdU1hcFZpZXdJZDogc3RyaW5nXTogSmltdU1hcFZpZXdJbmZvIH0+ID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmppbXVNYXBWaWV3c0luZm9cbiAgICAgICAgamltdU1hcFZpZXdJZCA9IE9iamVjdC5rZXlzKGppbXVNYXBWaWV3c0luZm8gfHwge30pLmZpbmQodmlld0lkID0+IGppbXVNYXBWaWV3c0luZm9bdmlld0lkXS5tYXBXaWRnZXRJZCA9PT0gbWFwV2lkZ2V0SWQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoamltdU1hcFZpZXdJZCA9PT0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy5pZCAmJiBkYXRhSW5mby50eXBlID09PSBBY3Rpb25UeXBlLkRhdGFBY3Rpb24gJiYgZGF0YUluZm8ubmVlZFRvUmVtb3ZlKVxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhQWN0aW9uTGlzdEl0ZW1zOiBMaXN0SXRlbVtdID0gZGF0YUFjdGlvbkluZm9zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgbGlzdEl0ZW06IExpc3RJdGVtID0ge1xuICAgICAgICBsYXllcklkOiBpdGVtLmlkLFxuICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgICAgaXNBY3Rpb246IHRydWVcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxpc3RJdGVtXG4gICAgfSlcblxuICAgIHJldHVybiBkYXRhQWN0aW9uTGlzdEl0ZW1zXG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3QgaXRlbXMgYnkgSmltdUxheWVyVmlldy5yZW1vdmVhYmxlQnlNYXBUb29sLlxuICAgKiBAcGFyYW0gbXV0YWJsZVN0YXRlXG4gICAqL1xuICBnZXRMaXN0SXRlbXNCeVJlbW92ZWFibGVMYXllcklkc0luZm8gKG11dGFibGVTdGF0ZTogTWFwTXV0YWJsZVN0YXRlKTogTGlzdEl0ZW1bXSB7XG4gICAgY29uc3QgbGlzdEl0ZW1zOiBMaXN0SXRlbVtdID0gW11cbiAgICBjb25zdCByZW1vdmVhYmxlTGF5ZXJJZHNJbmZvID0gbXV0YWJsZVN0YXRlPy5yZW1vdmVhYmxlTGF5ZXJJZHNJbmZvIHx8IHt9XG4gICAgY29uc3QgamltdU1hcFZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3XG5cbiAgICBpZiAoamltdU1hcFZpZXcpIHtcbiAgICAgIGNvbnN0IG1hcCA9IGppbXVNYXBWaWV3LnZpZXc/Lm1hcFxuXG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWFibGVMYXllcklkcyA9IHJlbW92ZWFibGVMYXllcklkc0luZm9bamltdU1hcFZpZXcuaWRdIHx8IFtdXG5cbiAgICAgICAgcmVtb3ZlYWJsZUxheWVySWRzLmZvckVhY2gobGF5ZXJJZCA9PiB7XG4gICAgICAgICAgY29uc3QgbGF5ZXIgPSBtYXAuZmluZExheWVyQnlJZChsYXllcklkKVxuXG4gICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGxheWVyLnRpdGxlIHx8IGxheWVySWRcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtOiBMaXN0SXRlbSA9IHtcbiAgICAgICAgICAgICAgbGF5ZXJJZCxcbiAgICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICAgIGlzQWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaXN0SXRlbXMucHVzaChsaXN0SXRlbSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RJdGVtc1xuICB9XG5cbiAgb25JY29uQ2xpY2sgPSAoKSA9PiB7fVxuXG4gIG9uRHJvcERvd25Ub2dnbGUgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlbjogIXRoaXMuc3RhdGUuaXNPcGVuIH0pXG4gIH1cblxuICBjcmVhdGVEcm9wZG93bkl0ZW0gKGxpc3RJdGVtOiBMaXN0SXRlbSwgbWFwV2lkZ2V0SWQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGtleSA9IGAke2xpc3RJdGVtLmxheWVySWR9LWluZGV4LSR7aW5kZXh9YFxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxEcm9wZG93bkl0ZW1cbiAgICAgICAga2V5PXtrZXl9XG4gICAgICAgIGhlYWRlcj17ZmFsc2V9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHsgdGhpcy5vbkl0ZW1DbGljayhsaXN0SXRlbSwgbWFwV2lkZ2V0SWQpIH19XG4gICAgICA+XG4gICAgICAgIHtsaXN0SXRlbS50aXRsZX1cbiAgICAgIDwvRHJvcGRvd25JdGVtPlxuICAgIClcbiAgfVxuXG4gIG9uSXRlbUNsaWNrID0gKGxpc3RJdGVtOiBMaXN0SXRlbSwgbWFwV2lkZ2V0SWQ6IHN0cmluZykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46IGZhbHNlIH0pXG5cbiAgICBjb25zdCBsYXllcklkID0gbGlzdEl0ZW0ubGF5ZXJJZFxuXG4gICAgY29uc3QgbXV0YWJsZVN0YXRlID0gTXV0YWJsZVN0b3JlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldFN0YXRlVmFsdWUoW21hcFdpZGdldElkXSkgfHwge31cblxuICAgIGlmIChsaXN0SXRlbS5pc0FjdGlvbikge1xuICAgICAgLy8gdGhpcyBpdGVtIGNvbWVzIGZyb20gU2hvd09uTWFwL0FkZFRvTWFwIGFjdGlvbnMsIHJlbW92ZSBpdCBieSBtdXRhYmxlU3RvcmVNYW5hZ2VyLnVwZGF0ZVN0YXRlVmFsdWUoKS5cbiAgICAgIGNvbnN0IGFjdGlvbkRhdGFJZCA9IGxheWVySWRcbiAgICAgIGNvbnN0IHNob3dPbk1hcERhdGFzID0gbXV0YWJsZVN0YXRlLnNob3dPbk1hcERhdGFzXG4gICAgICBjb25zdCBhZGRUb01hcERhdGFzID0gbXV0YWJsZVN0YXRlLmFkZFRvTWFwRGF0YXNcblxuICAgICAgaWYgKHNob3dPbk1hcERhdGFzKSB7XG4gICAgICAgIGRlbGV0ZSBzaG93T25NYXBEYXRhc1thY3Rpb25EYXRhSWRdXG4gICAgICAgIE11dGFibGVTdG9yZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS51cGRhdGVTdGF0ZVZhbHVlKG1hcFdpZGdldElkLCAnc2hvd09uTWFwRGF0YXMnLCBzaG93T25NYXBEYXRhcylcbiAgICAgIH1cblxuICAgICAgaWYgKGFkZFRvTWFwRGF0YXMgJiYgYWRkVG9NYXBEYXRhc1thY3Rpb25EYXRhSWRdPy5kYXRhQ2hhbmdlVHlwZSA9PT0gRGF0YUNoYW5nZVR5cGUuQ3JlYXRlZCkge1xuICAgICAgICBNdXRhYmxlU3RvcmVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlU3RhdGVWYWx1ZShtYXBXaWRnZXRJZCwgYGFkZFRvTWFwRGF0YXMuJHthY3Rpb25EYXRhSWR9LmRhdGFDaGFuZ2VUeXBlYCwgRGF0YUNoYW5nZVR5cGUuUmVtb3ZlKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIGl0ZW0gY29tZXMgZnJvbSBKaW11TGF5ZXJWaWV3LnJlbW92ZWFibGVCeU1hcFRvb2xcblxuICAgICAgLy8ganVzdCByZW1vdmUgdGhlIGxheWVyIGZyb20gbWFwLCBkb24ndCBuZWVkIHRvIHVwZGF0ZSByZW1vdmVhYmxlTGF5ZXJJZHNJbmZvIChvbmx5IHVwZGF0ZSByZW1vdmVhYmxlTGF5ZXJJZHNJbmZvIHdoZW4gY2FsbGluZyBKaW11TGF5ZXJWaWV3LnNldFJlbW92ZWFibGVCeU1hcFRvb2woKSlcbiAgICAgIGNvbnN0IG1hcCA9IHRoaXMucHJvcHMuamltdU1hcFZpZXc/LnZpZXc/Lm1hcFxuXG4gICAgICBpZiAobWFwKSB7XG4gICAgICAgIGNvbnN0IGxheWVyID0gbWFwLmZpbmRMYXllckJ5SWQobGF5ZXJJZClcblxuICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICBtYXAucmVtb3ZlKGxheWVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgPE11bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyh7IG1hcFdpZGdldElkIH0pID0+IChcbiAgICAgICAgICB0aGlzLmdldENvbnRlbnQobWFwV2lkZ2V0SWQpXG4gICAgICAgICl9XG4gICAgICA8L011bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cblxuICBnZXRDb250ZW50ID0gKG1hcFdpZGdldElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaXN0SXRlbXMgPSB0aGlzLmdldExpc3RJdGVtcyhtYXBXaWRnZXRJZClcbiAgICBjb25zdCBkcm9wZG93bkl0ZW1zID0gbGlzdEl0ZW1zLm1hcCgobGlzdEl0ZW0sIGluZGV4KSA9PiB0aGlzLmNyZWF0ZURyb3Bkb3duSXRlbShsaXN0SXRlbSwgbWFwV2lkZ2V0SWQsIGluZGV4KSlcblxuICAgIGlmIChkcm9wZG93bkl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY3NzPXt0aGlzLmdldFN0eWxlKCl9IHRpdGxlPXt0aGlzLmdldFRpdGxlKCl9PlxuICAgICAgICAgIDxEcm9wZG93blxuICAgICAgICAgICAgZGlyZWN0aW9uPSdkb3duJ1xuICAgICAgICAgICAgc2l6ZT0nc20nXG4gICAgICAgICAgICB0b2dnbGU9e3RoaXMub25Ecm9wRG93blRvZ2dsZX1cbiAgICAgICAgICAgIGlzT3Blbj17dGhpcy5zdGF0ZS5pc09wZW59XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPERyb3Bkb3duQnV0dG9uIGljb24gYXJyb3c9e2ZhbHNlfSBzaXplPSdzbScgdHlwZT0nZGVmYXVsdCc+XG4gICAgICAgICAgICAgIDxJY29uIHNpemU9ezE2fSBjbGFzc05hbWU9J2V4Ym1hcC11aS10b29sLWljb24nIGljb249e3RoaXMuZ2V0SWNvbigpLmljb259IC8+XG4gICAgICAgICAgICA8L0Ryb3Bkb3duQnV0dG9uPlxuICAgICAgICAgICAgPERyb3Bkb3duTWVudT5cbiAgICAgICAgICAgICAge2Ryb3Bkb3duSXRlbXN9XG4gICAgICAgICAgICA8L0Ryb3Bkb3duTWVudT5cbiAgICAgICAgICA8L0Ryb3Bkb3duPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wYXNzIGV4dGVuZHMgQmFzZVRvb2w8QmFzZVRvb2xQcm9wcywgdW5rbm93bj4ge1xuICB0b29sTmFtZSA9ICdDb21wYXNzJ1xuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ0NvbXBhc3NMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuQ29tcGFzc0xhYmVsIH0pXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEV4cGFuZFBhbmVsICgpOiBKU1guRWxlbWVudCB7XG4gICAgcmV0dXJuIDxDb21wYXNzSW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IC8+XG4gIH1cbn1cblxuaW50ZXJmYWNlIENvbXBhc3NJbm5lclByb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG59XG5cbmludGVyZmFjZSBDb21wYXNzSW5uZXJTdGF0ZSB7XG4gIGFwaUxvYWRlZDogYm9vbGVhblxufVxuXG5jbGFzcyBDb21wYXNzSW5uZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PENvbXBhc3NJbm5lclByb3BzLCBDb21wYXNzSW5uZXJTdGF0ZT4ge1xuICBDb21wYXNzOiB0eXBlb2YgX19lc3JpLkNvbXBhc3MgPSBudWxsXG4gIENvbXBhc3NCdG46IF9fZXNyaS5Db21wYXNzXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnRcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhcGlMb2FkZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5hcGlMb2FkZWQpIHtcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL3dpZGdldHMvQ29tcGFzcyddKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbdGhpcy5Db21wYXNzXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5Db21wYXNzQnRuKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gICAgICB9XG5cbiAgICAgIHRoaXMuQ29tcGFzc0J0biA9IG5ldyB0aGlzLkNvbXBhc3Moe1xuICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXdcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ0NvbXBhc3MnKVxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5hZGRKaW11TWFwVG9vbCh7XG4gICAgICAgIG5hbWU6ICdDb21wYXNzJyxcbiAgICAgICAgaW5zdGFuY2U6IHRoaXMuQ29tcGFzc0J0blxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMuQ29tcGFzc0J0bikge1xuICAgICAgdGhpcy5Db21wYXNzQnRuLmRlc3Ryb3koKVxuICAgICAgdGhpcy5Db21wYXNzQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnQ29tcGFzcycpXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J2NvbXBhc3MtbWFwLXRvb2wnIHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0gLz5cbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlVG9vbCwgdHlwZSBCYXNlVG9vbFByb3BzLCB0eXBlIEljb25UeXBlIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IHR5cGUgeyBNYXBiYXNlVmlldyB9IGZyb20gJy4uL2NvbXBvbmVudHMvbWFwYmFzZSdcbmltcG9ydCB7IGdldFZpZXdwb2ludEluc3RhbmNlRnJvbUhpc3RvcnkgfSBmcm9tICcuLi91dGlscydcbmltcG9ydCB7IEFycm93RmF0TGVmdE91dGxpbmVkIH0gZnJvbSAnamltdS1pY29ucy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1mYXQtbGVmdCdcbmltcG9ydCB7IEFycm93RmF0UmlnaHRPdXRsaW5lZCB9IGZyb20gJ2ppbXUtaWNvbnMvb3V0bGluZWQvZGlyZWN0aW9uYWwvYXJyb3ctZmF0LXJpZ2h0J1xuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXh0ZW50TmF2aWdhdGUgZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ0V4dGVudE5hdmlnYXRlJ1xuXG4gIHZpZXc6IE1hcGJhc2VWaWV3XG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiAnRXh0ZW50TmF2aWdhdGUnXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGljb246IG51bGxcbiAgICB9XG4gIH1cblxuICBnZXRFeHRlbmRDc3NTdHlsZSAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIC5leHRlbnQtbmF2aWdhdGUtYnRuIHtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBsaW5lLWhlaWdodDogMzJweDtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAuZXh0ZW50LW5hdmlnYXRlLWJ0bi5leHRlbnQtbmF2aWdhdGUtYnRuLWRpc2FibGVkIHtcbiAgICAgICAgY29sb3I6IGdyZXk7XG4gICAgICB9XG5cbiAgICAgIC5leHRlbnQtbmF2aWdhdGUtcHJldi1idG4ge1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYztcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIGNvbnN0IGlzUHJldkJ0bkRpc2FibGVkID0gIXRoaXMuaXNQcmV2QnRuRW5hYmxlZCgpXG4gICAgY29uc3QgaXNOZXh0QnRuRGlzYWJsZWQgPSAhdGhpcy5pc05leHRCdG5FbmFibGVkKClcblxuICAgIGNvbnN0IHByZXZCdG5DbGFzc05hbWUgPSBjbGFzc05hbWVzKCdlc3JpLXdpZGdldC0tYnV0dG9uIGV4dGVudC1uYXZpZ2F0ZS1idG4gZXh0ZW50LW5hdmlnYXRlLXByZXYtYnRuJywgeyAnZXh0ZW50LW5hdmlnYXRlLWJ0bi1kaXNhYmxlZCc6IGlzUHJldkJ0bkRpc2FibGVkIH0pXG4gICAgY29uc3QgbmV4dEJ0bkNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ2Vzcmktd2lkZ2V0LS1idXR0b24gZXh0ZW50LW5hdmlnYXRlLWJ0biBleHRlbnQtbmF2aWdhdGUtbmV4dC1idG4nLCB7ICdleHRlbnQtbmF2aWdhdGUtYnRuLWRpc2FibGVkJzogaXNOZXh0QnRuRGlzYWJsZWQgfSlcbiAgICBjb25zdCBwcmV2RXh0ZW50VGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ3ByZXZFeHRlbnQnKVxuICAgIGNvbnN0IG5leHRFeHRlbnRUaXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnbmV4dEV4dGVudCcpXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3ByZXZCdG5DbGFzc05hbWV9IHRpdGxlPXtwcmV2RXh0ZW50VGl0bGV9IG9uQ2xpY2s9e3RoaXMub25DbGlja1ByZXZCdG59PlxuICAgICAgICAgIDxBcnJvd0ZhdExlZnRPdXRsaW5lZCAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e25leHRCdG5DbGFzc05hbWV9IHRpdGxlPXtuZXh0RXh0ZW50VGl0bGV9IG9uQ2xpY2s9e3RoaXMub25DbGlja05leHRCdG59PlxuICAgICAgICAgIDxBcnJvd0ZhdFJpZ2h0T3V0bGluZWQgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlIChzdHJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IHN0cklkLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzW3N0cklkXSB9KVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCk6IHZvaWQge1xuICAgIHRoaXMuYmluZFZpZXcoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcbiAgICB0aGlzLmJpbmRWaWV3KClcbiAgfVxuXG4gIGJpbmRWaWV3ICgpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldz8udmlldyBhcyBNYXBiYXNlVmlld1xuXG4gICAgaWYgKHRoaXMudmlldyAhPT0gdmlldykge1xuICAgICAgLy8gYWN0aXZlIHZpZXcgY2hhbmdlc1xuICAgICAgaWYgKHRoaXMudmlldykge1xuICAgICAgICB0aGlzLnZpZXcuc3RhdGlvbmFyeUNhbGxiYWNrID0gbnVsbFxuICAgICAgfVxuXG4gICAgICB0aGlzLnZpZXcgPSB2aWV3XG5cbiAgICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgICAgdGhpcy52aWV3LnN0YXRpb25hcnlDYWxsYmFjayA9IHRoaXMub25WaWV3U3RhdGlvbmFyeVxuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUJ5Q3VycmVudFZpZXcoKVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJ5Q3VycmVudFZpZXcgKCk6IHZvaWQge1xuICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICB9XG5cbiAgb25WaWV3U3RhdGlvbmFyeSA9ICgpID0+IHtcbiAgICAvLyB2aWV3IHN0YXRpYywgdmlldy52aWV3cG9pbnRIaXN0b3J5IG1heWJlIGNoYW5nZWRcbiAgICB0aGlzLnVwZGF0ZUJ5Q3VycmVudFZpZXcoKVxuICB9XG5cbiAgaXNQcmV2QnRuRW5hYmxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldyAmJiB0aGlzLnZpZXcudmlld3BvaW50SGlzdG9yeS5sZW5ndGggPj0gMiAmJiB0aGlzLnZpZXcudmlld3BvaW50SW5kZXggPj0gMVxuICB9XG5cbiAgaXNOZXh0QnRuRW5hYmxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldyAmJiB0aGlzLnZpZXcudmlld3BvaW50SGlzdG9yeS5sZW5ndGggPj0gMiAmJiB0aGlzLnZpZXcudmlld3BvaW50SW5kZXggPCAodGhpcy52aWV3LnZpZXdwb2ludEhpc3RvcnkubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIG9uQ2xpY2tQcmV2QnRuID0gKCkgPT4ge1xuICAgIGlmICghdGhpcy5pc1ByZXZCdG5FbmFibGVkKCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMudmlldy52aWV3cG9pbnRJbmRleC0tXG4gICAgY29uc3Qgdmlld3BvaW50ID0gZ2V0Vmlld3BvaW50SW5zdGFuY2VGcm9tSGlzdG9yeSh0aGlzLnZpZXcsIHRoaXMudmlldy52aWV3cG9pbnRJbmRleClcblxuICAgIGlmICh2aWV3cG9pbnQpIHtcbiAgICAgIHRoaXMudmlldy5nb1RvKHZpZXdwb2ludClcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUJ5Q3VycmVudFZpZXcoKVxuICB9XG5cbiAgb25DbGlja05leHRCdG4gPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLmlzTmV4dEJ0bkVuYWJsZWQoKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy52aWV3LnZpZXdwb2ludEluZGV4KytcbiAgICBjb25zdCB2aWV3cG9pbnQgPSBnZXRWaWV3cG9pbnRJbnN0YW5jZUZyb21IaXN0b3J5KHRoaXMudmlldywgdGhpcy52aWV3LnZpZXdwb2ludEluZGV4KVxuXG4gICAgaWYgKHZpZXdwb2ludCkge1xuICAgICAgdGhpcy52aWV3LmdvVG8odmlld3BvaW50KVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQnlDdXJyZW50VmlldygpXG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZVRvb2wsIHR5cGUgQmFzZVRvb2xQcm9wcywgdHlwZSBJY29uVHlwZSB9IGZyb20gJy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IE11bHRpU291cmNlTWFwQ29udGV4dCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbXVsdGlzb3VyY2VtYXAtY29udGV4dCdcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZ1bGxzY3JlZW4gZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ0Z1bGxzY3JlZW4nXG4gIGlzRnVsbFNjcmVlbiA9IGZhbHNlXG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnRnVsbFNjcmVlbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5GdWxsU2NyZWVuTGFiZWwgfSlcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogdGhpcy5pc0Z1bGxTY3JlZW4gPyByZXF1aXJlKCcuLi9hc3NldHMvaWNvbnMvZXhpdC1mdWxsLXNjcmVlbi5zdmcnKSA6IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9mdWxsLXNjcmVlbi5zdmcnKSxcbiAgICAgIG9uSWNvbkNsaWNrOiAoZXZ0PzogUmVhY3QuTW91c2VFdmVudDxhbnk+KSA9PiB7XG4gICAgICAgIHRoaXMuZnVsbFNjcmVlbk1hcCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVsbFNjcmVlbk1hcCA9ICgpID0+IHt9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0Q29udGVudCA9IChmdWxsU2NyZWVuTWFwLCBpc0Z1bGxTY3JlZW4pID0+IHtcbiAgICB0aGlzLmZ1bGxTY3JlZW5NYXAgPSBmdWxsU2NyZWVuTWFwXG4gICAgdGhpcy5pc0Z1bGxTY3JlZW4gPSBpc0Z1bGxTY3JlZW5cbiAgICByZXR1cm4gc3VwZXIucmVuZGVyKClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNdWx0aVNvdXJjZU1hcENvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgIHsoeyBmdWxsU2NyZWVuTWFwLCBpc0Z1bGxTY3JlZW4gfSkgPT4gKFxuICAgICAgICAgIHRoaXMuZ2V0Q29udGVudChmdWxsU2NyZWVuTWFwLCBpc0Z1bGxTY3JlZW4pXG4gICAgICAgICl9XG4gICAgICA8L011bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZVRvb2wsIHR5cGUgQmFzZVRvb2xQcm9wcywgdHlwZSBJY29uVHlwZSB9IGZyb20gJy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB0eXBlIEluaXRpYWxNYXBTdGF0ZSB9IGZyb20gJ2ppbXUtdWkvYWR2YW5jZWQvbWFwJ1xuaW1wb3J0IHsgTXVsdGlTb3VyY2VNYXBDb250ZXh0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9tdWx0aXNvdXJjZW1hcC1jb250ZXh0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIGV4dGVuZHMgQmFzZVRvb2w8QmFzZVRvb2xQcm9wcywgdW5rbm93bj4ge1xuICB0b29sTmFtZSA9ICdIb21lJ1xuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ0hvbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuSG9tZUxhYmVsIH0pXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEhvbWVDb250ZW50ID0gKGluaXRpYWxNYXBTdGF0ZTogSW5pdGlhbE1hcFN0YXRlKSA9PiB7XG4gICAgcmV0dXJuIDxIb21lSW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IGluaXRpYWxNYXBTdGF0ZT17aW5pdGlhbE1hcFN0YXRlfSAvPlxuICB9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICAvLyByZXR1cm4gPEhvbWVJbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30+PC9Ib21lSW5uZXI+O1xuICAgIHJldHVybiAoXG4gICAgICA8TXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICB7KHsgaW5pdGlhbE1hcFN0YXRlIH0pID0+IChcbiAgICAgICAgICB0aGlzLmdldEhvbWVDb250ZW50KGluaXRpYWxNYXBTdGF0ZSlcbiAgICAgICAgKX1cbiAgICAgIDwvTXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgIClcbiAgfVxufVxuXG5pbnRlcmZhY2UgSG9tZUlubmVyUHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgaW5pdGlhbE1hcFN0YXRlOiBJbml0aWFsTWFwU3RhdGVcbn1cblxuaW50ZXJmYWNlIEhvbWVJbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG59XG5cbmNsYXNzIEhvbWVJbm5lciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SG9tZUlubmVyUHJvcHMsIEhvbWVJbm5lclN0YXRlPiB7XG4gIEhvbWU6IHR5cGVvZiBfX2VzcmkuSG9tZSA9IG51bGxcbiAgRXh0ZW50OiB0eXBlb2YgX19lc3JpLmdlb21ldHJ5LkV4dGVudFxuICBWaWV3cG9pbnQ6IHR5cGVvZiBfX2VzcmkuVmlld3BvaW50XG5cbiAgaG9tZUJ0bjogX19lc3JpLkhvbWVcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFwaUxvYWRlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmFwaUxvYWRlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2Vzcmkvd2lkZ2V0cy9Ib21lJyxcbiAgICAgICAgJ2VzcmkvZ2VvbWV0cnkvRXh0ZW50JyxcbiAgICAgICAgJ2VzcmkvVmlld3BvaW50J10pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFt0aGlzLkhvbWUsIHRoaXMuRXh0ZW50LCB0aGlzLlZpZXdwb2ludF0gPSBtb2R1bGVzXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGFwaUxvYWRlZDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogSG9tZUlubmVyUHJvcHMpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuYXBpTG9hZGVkIHx8ICF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgY3VyclZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3Py52aWV3IHx8IG51bGxcbiAgICAvLyBjaGVjayBpbml0aWFsTWFwU3RhdGUgY2hhbmdlIG9yIG5vdFxuICAgIC8vIHNvbWV0aW1lcyBwcmV2UHJvcHMuaW5pdGlhbE1hcFN0YXRlIGlzIHVuZGVmaW5lZCBhbmQgcHJvcHMuaW5pdGlhbE1hcFN0YXRlIGlzIG51bGwsIHNvIHdlIG5lZWQgdG8gY29udmVydCB1bmRlZmluZWQgdG8gbnVsbFxuICAgIGNvbnN0IHByZUluaXRpYWxNYXBTdGF0ZSA9IHByZXZQcm9wcz8uaW5pdGlhbE1hcFN0YXRlIHx8IG51bGxcbiAgICBjb25zdCBjdXJySW5pdGlhbE1hcFN0YXRlID0gdGhpcy5wcm9wcy5pbml0aWFsTWFwU3RhdGUgfHwgbnVsbFxuICAgIGNvbnN0IGlzSW5pdGlhbE1hcFN0YXRlQ2hhbmdlZCA9IHByZUluaXRpYWxNYXBTdGF0ZSAhPT0gY3VyckluaXRpYWxNYXBTdGF0ZVxuXG4gICAgLy8gZGVzdHJveSBjdXJyZW50IHZpZXcgd2hlbiB2aWV3IGNoYW5nZWQgb3IgaW5pdGlhbE1hcFN0YXRlIGNoYW5nZWRcbiAgICBpZiAodGhpcy5ob21lQnRuICYmICh0aGlzLmhvbWVCdG4udmlldyAhPT0gY3VyclZpZXcgfHwgaXNJbml0aWFsTWFwU3RhdGVDaGFuZ2VkKSkge1xuICAgICAgdGhpcy5kZXN0cm95SG9tZUJ0bigpXG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIG5ldyBob21lIGJ0biBpZiB0aGlzLmhvbWVCdG4gaXMgZW1wdHkgYW5kIGN1cnJWaWV3IGlzIG5vdCBlbXB0eVxuICAgIGlmICghdGhpcy5ob21lQnRuICYmIGN1cnJWaWV3KSB7XG4gICAgICBsZXQgaW5pdFZpZXdwb2ludCA9IHRoaXMucHJvcHMuaW5pdGlhbE1hcFN0YXRlXG4gICAgICAgID8gdGhpcy5nZW5lcmF0ZVZpZXdQb2ludEZyb21Jbml0aWFsTWFwU3RhdGUodGhpcy5wcm9wcy5pbml0aWFsTWFwU3RhdGUpXG4gICAgICAgIDogKHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlldy5tYXAgYXMgX19lc3JpLldlYk1hcCB8IF9fZXNyaS5XZWJTY2VuZSkuaW5pdGlhbFZpZXdQcm9wZXJ0aWVzLnZpZXdwb2ludFxuXG4gICAgICBpZiAoaW5pdFZpZXdwb2ludCkge1xuICAgICAgICBpbml0Vmlld3BvaW50ID0gaW5pdFZpZXdwb2ludC5jbG9uZSgpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhvbWVCdG5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoaG9tZUJ0bkNvbnRhaW5lcilcblxuICAgICAgdGhpcy5ob21lQnRuID0gbmV3IHRoaXMuSG9tZSh7XG4gICAgICAgIGNvbnRhaW5lcjogaG9tZUJ0bkNvbnRhaW5lcixcbiAgICAgICAgdmlldzogdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LFxuICAgICAgICB2aWV3cG9pbnQ6IGluaXRWaWV3cG9pbnQsXG4gICAgICAgIGdvVG9PdmVycmlkZTogdGhpcy5ob21lQnRuR29Ub092ZXJyaWRlXG4gICAgICB9KVxuXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdIb21lJylcbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuYWRkSmltdU1hcFRvb2woe1xuICAgICAgICBuYW1lOiAnSG9tZScsXG4gICAgICAgIGluc3RhbmNlOiB0aGlzLmhvbWVCdG5cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGlzSW5pdGlhbE1hcFN0YXRlQ2hhbmdlZCkge1xuICAgICAgLy8gaW5pdGlhbE1hcFN0YXRlIGNoYW5nZVxuXG4gICAgICBpZiAoY3VyclZpZXcgJiYgdGhpcy5ob21lQnRuKSB7XG4gICAgICAgIC8vIGNvbnN0IGNsb25lVmlld3BvaW50ID0gdGhpcy5ob21lQnRuLnZpZXdwb2ludC5jbG9uZSgpXG4gICAgICAgIC8vIHNldCBjdXJyVmlldy52aWV3cG9pbnQgdG8gY2xvbmVWaWV3cG9pbnQgZGlyZWN0bHkgbm90IHdvcmsgd2l0aCBlcnJvciAnaW52YWxpZCBzY2FsZSB2YWx1ZSBvZiAwJyBpZiB0aGUgaW5pdCBob21lQnRhbi52aWV3cG9pbnQuc2NhbGUgaXMgMCwgc28gdXNlIHZpZXcuZ29UbygpIGluc3RlYWRcbiAgICAgICAgLy8gY3VyclZpZXcudmlld3BvaW50ID0gY2xvbmVWaWV3cG9pbnRcbiAgICAgICAgLy8gY3VyclZpZXcuZ29UbyhjbG9uZVZpZXdwb2ludCwge1xuICAgICAgICAvLyAgIGFuaW1hdGU6IGZhbHNlXG4gICAgICAgIC8vIH0pXG4gICAgICAgIHRoaXMuaG9tZUJ0bi5nbygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVWaWV3UG9pbnRGcm9tSW5pdGlhbE1hcFN0YXRlID0gKGluaXRpYWxNYXBTdGF0ZTogSW5pdGlhbE1hcFN0YXRlKTogX19lc3JpLlZpZXdwb2ludCA9PiB7XG4gICAgaWYgKGluaXRpYWxNYXBTdGF0ZS52aWV3VHlwZSA9PT0gJzJkJykge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLlZpZXdwb2ludChcbiAgICAgICAge1xuICAgICAgICAgIHRhcmdldEdlb21ldHJ5OiB0aGlzLkV4dGVudC5mcm9tSlNPTihpbml0aWFsTWFwU3RhdGUuZXh0ZW50KSxcbiAgICAgICAgICByb3RhdGlvbjogaW5pdGlhbE1hcFN0YXRlLnJvdGF0aW9uXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuVmlld3BvaW50LmZyb21KU09OKGluaXRpYWxNYXBTdGF0ZS52aWV3UG9pbnQpXG4gICAgfVxuICB9XG5cbiAgaG9tZUJ0bkdvVG9PdmVycmlkZSA9IGFzeW5jICh2aWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIGdvVG9QYXJhbXM6IF9fZXNyaS5Hb1RvVGFyZ2V0MkQgJiBfX2VzcmkuR29Ub09wdGlvbnMyRCkgPT4ge1xuICAgIGNvbnN0IGlzMkRWaWV3ID0gdmlldy50eXBlID09PSAnMmQnXG5cbiAgICAvLyBzbmFwVG9ab29tOiB0cnVlIG1lYW5zIGludGVnZXIgem9vbSwgZmFsc2UgbWVhbnMgZmxvYXQgem9vbVxuICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIGdvVG8gdGhlIGludGVnZXIgem9vbSB3aGVuIGNsaWNrIGhvbWUgYnRuLlxuICAgIGxldCBuZWVkVG9SZXN0b3JlU25hcFRvWm9vbVRvRmFsc2UgPSBmYWxzZVxuICAgIGlmIChpczJEVmlldyAmJiB2aWV3LmNvbnN0cmFpbnRzICYmICF2aWV3LmNvbnN0cmFpbnRzLnNuYXBUb1pvb20pIHtcbiAgICAgIHZpZXcuY29uc3RyYWludHMuc25hcFRvWm9vbSA9IHRydWVcbiAgICAgIG5lZWRUb1Jlc3RvcmVTbmFwVG9ab29tVG9GYWxzZSA9IHRydWVcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdmlldy5nb1RvKGdvVG9QYXJhbXMudGFyZ2V0LCBnb1RvUGFyYW1zLm9wdGlvbnMpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignaG9tZSBidG4gZ290byBlcnJvcicsIGUpXG4gICAgfVxuXG4gICAgLy8gV2hlbiBnb1RvIGlzIGRvbmUsIHdlIG5lZWQgdG8gcmVzZXQgdG8gZmxvYXQgem9vbSB0byBnZXQgdGhlIGJlc3Qgc3luY2hyb25pemF0aW9uIGJldHdlZW4gdHdvIG1hcCB3aWRnZXRzLlxuICAgIGlmIChpczJEVmlldyAmJiB2aWV3LmNvbnN0cmFpbnRzICYmIG5lZWRUb1Jlc3RvcmVTbmFwVG9ab29tVG9GYWxzZSkge1xuICAgICAgdmlldy5jb25zdHJhaW50cy5zbmFwVG9ab29tID0gZmFsc2VcbiAgICB9XG4gIH1cblxuICBkZXN0cm95SG9tZUJ0biAoKSB7XG4gICAgaWYgKHRoaXMuaG9tZUJ0bikge1xuICAgICAgLy8gdGhpcy5ob21lQnRuLmRlc3Ryb3koKSB3aWxsIHJlbW92ZSB0aGlzLmhvbWVCdG4uY29udGFpbmVyIGZyb20gZG9tIHRyZWUgYW5kIGxldCB0aGlzLmhvbWVCdG4uY29udGFpbmVyLnBhcmVudE5vZGUgYmUgbnVsbFxuICAgICAgdGhpcy5ob21lQnRuLmRlc3Ryb3koKVxuICAgICAgdGhpcy5ob21lQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnSG9tZScpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICB0aGlzLmRlc3Ryb3lIb21lQnRuKClcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdob21lLW1hcC10b29sJyByZWY9e3JlZiA9PiB7IGlmICghdGhpcy5jb250YWluZXIpIHsgdGhpcy5jb250YWluZXIgPSByZWYgfSB9fSAvPlxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgY2xhc3NOYW1lcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMsIE5hdiwgTmF2SXRlbSwgTmF2TGluayB9IGZyb20gJ2ppbXUtdWknXG5cbmludGVyZmFjZSBTdGF0ZXMge1xuICBhY3RpdmVUYWJJbmRleDogbnVtYmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExheWVycyBleHRlbmRzIEJhc2VUb29sPEJhc2VUb29sUHJvcHMsIFN0YXRlcz4ge1xuICB0b29sTmFtZSA9ICdMYXllcnMnXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFjdGl2ZVRhYkluZGV4OiAwXG4gICAgfVxuICB9XG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnTGF5ZXJzTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLkxheWVyc0xhYmVsIH0pXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGljb246IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9sYXllcmxpc3Quc3ZnJylcbiAgICB9XG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIHN0eWxlPXt7IHdpZHRoOiB0aGlzLnByb3BzLmlzTW9iaWxlID8gJzEwMCUnIDogJzI1MHB4JywgbWluSGVpZ2h0OiAnMzJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7ICdleGJtYXAtdWktcGMtZXhwYW5kLW1heGhlaWdodCc6ICF0aGlzLnByb3BzLmlzTW9iaWxlIH0pfVxuICAgICAgPlxuICAgICAgICA8TmF2IHRhYnM+XG4gICAgICAgICAgPE5hdkl0ZW0+XG4gICAgICAgICAgICA8TmF2TGluayBhY3RpdmU9e3RoaXMuc3RhdGUuYWN0aXZlVGFiSW5kZXggPT09IDB9IG9uQ2xpY2s9eygpID0+IHsgdGhpcy5oYW5kbGVUYWJJbmRleENoYW5nZSgwKSB9fSBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgMCkgfX0+XG4gICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnTGF5ZXJzTGFiZWxMYXllcicsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuTGF5ZXJzTGFiZWxMYXllciB9KX1cbiAgICAgICAgICAgIDwvTmF2TGluaz5cbiAgICAgICAgICA8L05hdkl0ZW0+XG4gICAgICAgICAgPE5hdkl0ZW0+XG4gICAgICAgICAgICA8TmF2TGluayBhY3RpdmU9e3RoaXMuc3RhdGUuYWN0aXZlVGFiSW5kZXggPT09IDF9IG9uQ2xpY2s9eygpID0+IHsgdGhpcy5oYW5kbGVUYWJJbmRleENoYW5nZSgxKSB9fSBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgMSkgfX0+XG4gICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnTGF5ZXJzTGFiZWxMZWdlbmQnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLkxheWVyc0xhYmVsTGVnZW5kIH0pfVxuICAgICAgICAgICAgPC9OYXZMaW5rPlxuICAgICAgICAgIDwvTmF2SXRlbT5cbiAgICAgICAgPC9OYXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtdC0xJyAvPlxuICAgICAgICB7dGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gMCAmJiA8TGF5ZXJMaXN0SW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IC8+fVxuICAgICAgICB7dGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gMSAmJiA8TGVnZW5kSW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IC8+fVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgaGFuZGxlVGFiSW5kZXhDaGFuZ2UgPSAoYWN0aXZlVGFiSW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgYWN0aXZlVGFiSW5kZXg6IGFjdGl2ZVRhYkluZGV4XG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxhbnk+LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgIHRoaXMuaGFuZGxlVGFiSW5kZXhDaGFuZ2UoaW5kZXgpXG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBJbm5lclByb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG59XG5cbmludGVyZmFjZSBJbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG59XG5cbmNsYXNzIExheWVyTGlzdElubmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJbm5lclByb3BzLCBJbm5lclN0YXRlPiB7XG4gIExheWVyTGlzdDogdHlwZW9mIF9fZXNyaS5MYXllckxpc3QgPSBudWxsXG4gIExheWVyTGlzdEJ0bjogX19lc3JpLkxheWVyTGlzdFxuICBjb250YWluZXI6IEhUTUxFbGVtZW50XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYXBpTG9hZGVkOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuYXBpTG9hZGVkKSB7XG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS93aWRnZXRzL0xheWVyTGlzdCddKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbdGhpcy5MYXllckxpc3RdID0gbW9kdWxlc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhcGlMb2FkZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IElubmVyUHJvcHMpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hcGlMb2FkZWQgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGlmIChwcmV2UHJvcHMuamltdU1hcFZpZXcgJiYgdGhpcy5wcm9wcy5qaW11TWFwVmlldyAmJiAocHJldlByb3BzLmppbXVNYXBWaWV3LmlkICE9PSB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmlkKSkge1xuICAgICAgICBpZiAodGhpcy5MYXllckxpc3RCdG4pIHtcbiAgICAgICAgICB0aGlzLkxheWVyTGlzdEJ0bi52aWV3ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3XG4gICAgICAgICAgdGhpcy5MYXllckxpc3RCdG4ucmVuZGVyTm93KClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5MYXllckxpc3RCdG4gPSBuZXcgdGhpcy5MYXllckxpc3Qoe1xuICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgdmlldzogdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnTGF5ZXJMaXN0JylcbiAgICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5hZGRKaW11TWFwVG9vbCh7XG4gICAgICAgICAgbmFtZTogJ0xheWVyTGlzdCcsXG4gICAgICAgICAgaW5zdGFuY2U6IHRoaXMuTGF5ZXJMaXN0QnRuXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIGlmICh0aGlzLkxheWVyTGlzdEJ0bikge1xuICAgICAgdGhpcy5MYXllckxpc3RCdG4gPSBudWxsXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdMYXllckxpc3QnKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsYXllcnMtbWFwLXRvb2wnIHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJywgbWluSGVpZ2h0OiAnMzJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICB7IXRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIDxkaXYgY2xhc3NOYW1lPSdleGJtYXAtYmFzZXRvb2wtbG9hZGVyJyAvPn1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5jbGFzcyBMZWdlbmRJbm5lciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SW5uZXJQcm9wcywgSW5uZXJTdGF0ZT4ge1xuICBMZWdlbmQ6IHR5cGVvZiBfX2VzcmkuTGVnZW5kID0gbnVsbFxuICBMZWdlbmRCdG46IF9fZXNyaS5MZWdlbmRcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFwaUxvYWRlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmFwaUxvYWRlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2Vzcmkvd2lkZ2V0cy9MZWdlbmQnXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW3RoaXMuTGVnZW5kXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzOiBJbm5lclByb3BzKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAocHJldlByb3BzLmppbXVNYXBWaWV3ICYmIHRoaXMucHJvcHMuamltdU1hcFZpZXcgJiYgKHByZXZQcm9wcy5qaW11TWFwVmlldy5pZCAhPT0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy5pZCkpIHtcbiAgICAgICAgaWYgKHRoaXMuTGVnZW5kQnRuKSB7XG4gICAgICAgICAgdGhpcy5MZWdlbmRCdG4udmlldyA9IHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlld1xuICAgICAgICAgIHRoaXMuTGVnZW5kQnRuLnJlbmRlck5vdygpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuTGVnZW5kQnRuID0gbmV3IHRoaXMuTGVnZW5kKHtcbiAgICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgIHZpZXc6IHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlld1xuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ0xlZ2VuZCcpXG4gICAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuYWRkSmltdU1hcFRvb2woe1xuICAgICAgICAgIG5hbWU6ICdMZWdlbmQnLFxuICAgICAgICAgIGluc3RhbmNlOiB0aGlzLkxlZ2VuZEJ0blxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICBpZiAodGhpcy5MZWdlbmRCdG4pIHtcbiAgICAgIHRoaXMuTGVnZW5kQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnTGVnZW5kJylcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJywgbWluSGVpZ2h0OiAnMzJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICB7IXRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIDxkaXYgY2xhc3NOYW1lPSdleGJtYXAtYmFzZXRvb2wtbG9hZGVyJyAvPn1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVhY3QgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlVG9vbCwgdHlwZSBCYXNlVG9vbFByb3BzLCB0eXBlIEljb25UeXBlIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcywgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhdGUgZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ0xvY2F0ZSdcblxuICBnZXRUaXRsZSAoKSB7XG4gICAgcmV0dXJuICdMb2NhdGUnXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEV4cGFuZFBhbmVsICgpOiBKU1guRWxlbWVudCB7XG4gICAgcmV0dXJuIDxMb2NhdGVJbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30gLz5cbiAgfVxufVxuXG5pbnRlcmZhY2UgTG9jYXRlSW5uZXJQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xufVxuXG5pbnRlcmZhY2UgTG9jYXRlSW5uZXJTdGF0ZSB7XG4gIGFwaUxvYWRlZDogYm9vbGVhblxufVxuXG5jbGFzcyBMb2NhdGVJbm5lciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TG9jYXRlSW5uZXJQcm9wcywgTG9jYXRlSW5uZXJTdGF0ZT4ge1xuICBMb2NhdGU6IHR5cGVvZiBfX2VzcmkuTG9jYXRlID0gbnVsbFxuICBMb2NhdGVCdG46IF9fZXNyaS5Mb2NhdGVcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFwaUxvYWRlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmFwaUxvYWRlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2Vzcmkvd2lkZ2V0cy9Mb2NhdGUnXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW3RoaXMuTG9jYXRlXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5Mb2NhdGVCdG4pIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJydcbiAgICAgIH1cblxuICAgICAgdGhpcy5Mb2NhdGVCdG4gPSBuZXcgdGhpcy5Mb2NhdGUoe1xuICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXdcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ0xvY2F0ZScpXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmFkZEppbXVNYXBUb29sKHtcbiAgICAgICAgbmFtZTogJ0xvY2F0ZScsXG4gICAgICAgIGluc3RhbmNlOiB0aGlzLkxvY2F0ZUJ0blxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMuTG9jYXRlQnRuKSB7XG4gICAgICB0aGlzLkxvY2F0ZUJ0bi5kZXN0cm95KClcbiAgICAgIHRoaXMuTG9jYXRlQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnTG9jYXRlJylcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nZXNyaS13aWRnZXQtLWJ1dHRvbiBsb2NhdGUtbWFwLXRvb2wnIHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0gLz5cbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBjc3MsIGpzeCwgcG9saXNoZWQsIGdldEFwcFN0b3JlLCBjbGFzc05hbWVzLCBhcHBBY3Rpb25zIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgSWNvbiwgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBNdWx0aVNvdXJjZU1hcENvbnRleHQgfSBmcm9tICcuLi9jb21wb25lbnRzL211bHRpc291cmNlbWFwLWNvbnRleHQnXG5pbXBvcnQgTWFwVGh1bWIgZnJvbSAnLi4vY29tcG9uZW50cy9tYXAtdGh1bWInXG5pbXBvcnQgeyB0eXBlIFRvb2xTaGVsbFByb3BzIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sLXNoZWxsJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBTd2l0Y2ggZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ01hcFN3aXRjaCdcblxuICBzdGF0aWMgZ2V0SXNOZWVkU2V0dGluZyAoKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgaXNBdmFpbGFibGUgKHRvb2xTaGVsbFByb3BzOiBUb29sU2hlbGxQcm9wcyk6IGJvb2xlYW4ge1xuICAgIGlmICh0b29sU2hlbGxQcm9wcy5pc01vYmlsZSkge1xuICAgICAgY29uc3Qgd2lkZ2V0SWQgPSB0b29sU2hlbGxQcm9wcy5tYXBXaWRnZXRJZFxuXG4gICAgICBpZiAod2lkZ2V0SWQpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0SW5mbyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWcud2lkZ2V0c1t3aWRnZXRJZF1cblxuICAgICAgICBpZiAod2lkZ2V0SW5mbykge1xuICAgICAgICAgIHJldHVybiB3aWRnZXRJbmZvLnVzZURhdGFTb3VyY2VzICYmIHdpZGdldEluZm8udXNlRGF0YVNvdXJjZXMubGVuZ3RoID49IDJcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvLyBBbHdheXMgcmV0dXJuIHRydWUgZm9yIHBjIGxheW91dCBiZWNhdXNlIGZhbHNlIHdpbGwgbGV0IFNlbGVjdFN0YXRlLUZ1bGxTY3JlZW4tQ29udGFpbmVyIGluIHdyb2luZyBwb3NpdGlvbi5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICB3aWR0aDogJHtwb2xpc2hlZC5yZW0oNjgpfTtcbiAgICAgIGhlaWdodDogJHtwb2xpc2hlZC5yZW0oNTIpfTtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxuICAgICAgLm1hcHRodW1iLWl0ZW0ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAke3BvbGlzaGVkLnJlbSg2NCl9O1xuICAgICAgICBoZWlnaHQ6ICR7cG9saXNoZWQucmVtKDQ4KX07XG4gICAgICAgIHRyYW5zaXRpb246IGJvdHRvbSAwLjVzLCBsZWZ0IDAuNXMsIHRvcCAwLjVzLCByaWdodCAwLjVzLCB6LWluZGV4IDAuNXM7XG4gICAgICB9XG5cbiAgICAgIC5mcm9udCB7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIH1cblxuICAgICAgLmJhY2sge1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gJ01hcFN3aXRjaCdcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWNvbjogcmVxdWlyZSgnLi4vYXNzZXRzL2ljb25zL2V4Y2hhbmdlLnN2ZycpLFxuICAgICAgb25JY29uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5zd2l0Y2hNYXAoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaE1hcCA9ICgpID0+IHt9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICBpZiAodGhpcy5wcm9wcy50b29sSnNvbi5pc09ubHlFeHBhbmRlZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE11bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgICB7KHsgaXNTaG93TWFwU3dpdGNoQnRuLCBkYXRhU291cmNlSWRzLCBhY3RpdmVEYXRhU291cmNlSWQsIHN3aXRjaE1hcCwgbWFwV2lkZ2V0SWQsIHRoZW1lIH0pID0+IChcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudChpc1Nob3dNYXBTd2l0Y2hCdG4sIGRhdGFTb3VyY2VJZHMsIGFjdGl2ZURhdGFTb3VyY2VJZCwgc3dpdGNoTWFwLCBtYXBXaWRnZXRJZCwgdGhlbWUpXG4gICAgICAgICAgKX1cbiAgICAgICAgPC9NdWx0aVNvdXJjZU1hcENvbnRleHQuQ29uc3VtZXI+XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlS2V5RG93biA9IChlOiBSZWFjdC5LZXlib2FyZEV2ZW50PGFueT4sIG9uQ2xpY2spID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgZT8ucHJldmVudERlZmF1bHQoKVxuICAgICAgb25DbGljaygpXG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGVudCA9IChpc1Nob3dNYXBTd2l0Y2hCdG46IGJvb2xlYW4sIGRhdGFTb3VyY2VJZHM6IHN0cmluZ1tdLCBhY3RpdmVEYXRhU291cmNlSWQ6IHN0cmluZywgc3dpdGNoTWFwLCBtYXBXaWRnZXRJZCwgdGhlbWUpID0+IHtcbiAgICBjb25zdCBvbkNsaWNrID0gKCkgPT4ge1xuICAgICAgZ2V0QXBwU3RvcmUoKS5kaXNwYXRjaChhcHBBY3Rpb25zLnJlcXVlc3RBdXRvQ29udHJvbE1hcFdpZGdldChtYXBXaWRnZXRJZCwgbWFwV2lkZ2V0SWQpKVxuICAgICAgc3dpdGNoTWFwKClcbiAgICB9XG4gICAgaWYgKGlzU2hvd01hcFN3aXRjaEJ0bikge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaXNNb2JpbGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhibWFwLXVpLXRvb2wgZXNyaS13aWRnZXQtLWJ1dHRvbicgb25DbGljaz17b25DbGlja30gcm9sZT0nYnV0dG9uJyB0YWJJbmRleD17MH0gb25LZXlEb3duPXtlID0+IHsgdGhpcy5oYW5kbGVLZXlEb3duKGUsIG9uQ2xpY2spIH19IGFyaWEtbGFiZWw9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTd2l0Y2hNYXAnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlN3aXRjaE1hcCB9KX0+XG4gICAgICAgICAgICA8SWNvbiB3aWR0aD17MTZ9IGhlaWdodD17MTZ9IGNsYXNzTmFtZT0nZXhibWFwLXVpLXRvb2wtaWNvbicgaWNvbj17dGhpcy5nZXRJY29uKCkuaWNvbn0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZHNKc29ucyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWcuZGF0YVNvdXJjZXNcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtYXBzd2l0Y2gtbWFwLXRvb2wnIGNzcz17dGhpcy5nZXRTdHlsZSgpfSBvbkNsaWNrPXtvbkNsaWNrfSByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfSBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgb25DbGljaykgfX0gYXJpYS1sYWJlbD17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1N3aXRjaE1hcCcsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuU3dpdGNoTWFwIH0pfT5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgdGl0bGU9e2RzSnNvbnNbZGF0YVNvdXJjZUlkc1swXV0gPyBkc0pzb25zW2RhdGFTb3VyY2VJZHNbMF1dLmxhYmVsIDogbnVsbH0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdtYXB0aHVtYi1pdGVtJywgeyBmcm9udDogZGF0YVNvdXJjZUlkc1swXSAhPT0gYWN0aXZlRGF0YVNvdXJjZUlkIH0sXG4gICAgICAgICAgICAgICAgeyBiYWNrOiBkYXRhU291cmNlSWRzWzBdID09PSBhY3RpdmVEYXRhU291cmNlSWQgfSl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxNYXBUaHVtYlxuICAgICAgICAgICAgICAgIG1hcEl0ZW1JZD17ZHNKc29uc1tkYXRhU291cmNlSWRzWzBdXSA/IGRzSnNvbnNbZGF0YVNvdXJjZUlkc1swXV0uaXRlbUlkIDogbnVsbH1cbiAgICAgICAgICAgICAgICBwb3J0VXJsPXtkc0pzb25zW2RhdGFTb3VyY2VJZHNbMF1dID8gZHNKc29uc1tkYXRhU291cmNlSWRzWzBdXS5wb3J0YWxVcmwgOiBudWxsfVxuICAgICAgICAgICAgICAgIHRoZW1lPXt0aGVtZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICB0aXRsZT17ZHNKc29uc1tkYXRhU291cmNlSWRzWzFdXSA/IGRzSnNvbnNbZGF0YVNvdXJjZUlkc1sxXV0ubGFiZWwgOiBudWxsfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ21hcHRodW1iLWl0ZW0nLCB7IGZyb250OiBkYXRhU291cmNlSWRzWzFdICE9PSBhY3RpdmVEYXRhU291cmNlSWQgfSxcbiAgICAgICAgICAgICAgICB7IGJhY2s6IGRhdGFTb3VyY2VJZHNbMV0gPT09IGFjdGl2ZURhdGFTb3VyY2VJZCB9KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPE1hcFRodW1iXG4gICAgICAgICAgICAgICAgbWFwSXRlbUlkPXtkc0pzb25zW2RhdGFTb3VyY2VJZHNbMV1dID8gZHNKc29uc1tkYXRhU291cmNlSWRzWzFdXS5pdGVtSWQgOiBudWxsfVxuICAgICAgICAgICAgICAgIHBvcnRVcmw9e2RzSnNvbnNbZGF0YVNvdXJjZUlkc1sxXV0gPyBkc0pzb25zW2RhdGFTb3VyY2VJZHNbMV1dLnBvcnRhbFVybCA6IG51bGx9XG4gICAgICAgICAgICAgICAgdGhlbWU9e3RoZW1lfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBnZXRJY29uQ29udGVudCA9IChpc1Nob3dNYXBTd2l0Y2hCdG46IGJvb2xlYW4sIGRhdGFTb3VyY2VJZHM6IHN0cmluZ1tdLCBhY3RpdmVEYXRhU291cmNlSWQ6IHN0cmluZywgc3dpdGNoTWFwKSA9PiB7XG4gICAgaWYgKGlzU2hvd01hcFN3aXRjaEJ0bikge1xuICAgICAgdGhpcy5zd2l0Y2hNYXAgPSBzd2l0Y2hNYXBcbiAgICAgIHJldHVybiBzdXBlci5yZW5kZXIoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudG9vbEpzb24uaXNPbmx5RXhwYW5kZWQpIHtcbiAgICAgIHJldHVybiBzdXBlci5yZW5kZXIoKVxuICAgICAgLy8gSW4gZmFjdCwgaXQgbmV2ZXIgZ29lcyBoZXJlLlxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8TXVsdGlTb3VyY2VNYXBDb250ZXh0LkNvbnN1bWVyPlxuICAgICAgICAgIHsoeyBpc1Nob3dNYXBTd2l0Y2hCdG4sIGRhdGFTb3VyY2VJZHMsIGFjdGl2ZURhdGFTb3VyY2VJZCwgc3dpdGNoTWFwIH0pID0+IChcbiAgICAgICAgICAgIHRoaXMuZ2V0SWNvbkNvbnRlbnQoaXNTaG93TWFwU3dpdGNoQnRuLCBkYXRhU291cmNlSWRzLCBhY3RpdmVEYXRhU291cmNlSWQsIHN3aXRjaE1hcClcbiAgICAgICAgICApfVxuICAgICAgICA8L011bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICAgIClcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzLCBnZXRBcHBTdG9yZSwgYXBwQWN0aW9ucyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24sIE5hdiwgTmF2SXRlbSwgTmF2TGluaywgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbnR5cGUgTWVhc3VyZVR5cGUgPSBfX2VzcmkuTWVhc3VyZW1lbnRcblxuaW50ZXJmYWNlIFN0YXRlcyB7XG4gIGFjdGl2ZVRhYkluZGV4OiBudW1iZXJcbiAgbWVhc3VyZUluc3RhbmNlOiBNZWFzdXJlVHlwZVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWFzdXJlIGV4dGVuZHMgQmFzZVRvb2w8QmFzZVRvb2xQcm9wcywgU3RhdGVzPiB7XG4gIGFjdGl2ZVRhYlJlZjogSFRNTEVsZW1lbnRcbiAgdG9vbE5hbWUgPSAnTWVhc3VyZSdcbiAgbWVhc3VyZU1vZHVsZXMyRCA9IFt7XG4gICAgbmFtZTogJ0xpbmUnLFxuICAgIHRpdGxlOiAnTGluZScsXG4gICAgYWN0aXZlVG9vbDogJ2Rpc3RhbmNlJyxcbiAgICBzcmM6IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9tZWFzdXJlLWRpc3RhbmNlLnN2ZycpXG4gIH0sIHtcbiAgICBuYW1lOiAnUG9seWdvbicsXG4gICAgdGl0bGU6ICdQb2x5Z29uJyxcbiAgICBhY3RpdmVUb29sOiAnYXJlYScsXG4gICAgc3JjOiByZXF1aXJlKCcuLi9hc3NldHMvaWNvbnMvbWVhc3VyZS1hcmVhLnN2ZycpXG4gIH1dXG5cbiAgbWVhc3VyZU1vZHVsZXMzRCA9IFt7XG4gICAgbmFtZTogJ0xpbmUnLFxuICAgIHRpdGxlOiAnTGluZScsXG4gICAgYWN0aXZlVG9vbDogJ2RpcmVjdC1saW5lJyxcbiAgICBzcmM6IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9tZWFzdXJlLWRpc3RhbmNlLnN2ZycpXG4gIH0sIHtcbiAgICBuYW1lOiAnUG9seWdvbicsXG4gICAgdGl0bGU6ICdQb2x5Z29uJyxcbiAgICBhY3RpdmVUb29sOiAnYXJlYScsXG4gICAgc3JjOiByZXF1aXJlKCcuLi9hc3NldHMvaWNvbnMvbWVhc3VyZS1hcmVhLnN2ZycpXG4gIH1dXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYWN0aXZlVGFiSW5kZXg6IDAsXG4gICAgICBtZWFzdXJlSW5zdGFuY2U6IG51bGxcbiAgICB9XG4gIH1cblxuICBnZXRUaXRsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdNZWFzdXJlTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLk1lYXN1cmVMYWJlbCB9KVxuICB9XG5cbiAgZ2V0SWNvbiAoKTogSWNvblR5cGUge1xuICAgIHJldHVybiB7XG4gICAgICBpY29uOiByZXF1aXJlKCcuLi9hc3NldHMvaWNvbnMvbWVhc3VyZS5zdmcnKVxuICAgIH1cbiAgfVxuXG4gIGZvY3VzRGVmYXVsdEVsZW1lbnQgKCkge1xuICAgIHRoaXMuYWN0aXZlVGFiUmVmPy5mb2N1cygpXG4gIH1cblxuICBkZXN0cm95ID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLm1lYXN1cmVJbnN0YW5jZSAmJiAhKHRoaXMuc3RhdGUubWVhc3VyZUluc3RhbmNlIGFzIGFueSkuZGVzdHJveWVkKSB7XG4gICAgICAodGhpcy5zdGF0ZS5tZWFzdXJlSW5zdGFuY2UgYXMgYW55KS5kZXN0cm95KClcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBtZWFzdXJlSW5zdGFuY2U6IG51bGwsXG4gICAgICAgIGFjdGl2ZVRhYkluZGV4OiAwXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1lYXN1cmNlSW5zdGFuY2VDcmVhdGVkID0gKG1lYXN1cmVJbnN0YW5jZTogTWVhc3VyZVR5cGUpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG1lYXN1cmVJbnN0YW5jZTogbWVhc3VyZUluc3RhbmNlXG4gICAgfSlcbiAgfVxuXG4gIG9uVGFiQ2xpY2sgPSAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZVRhYkluZGV4ID09PSBpbmRleCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuc3RhdGUubWVhc3VyZUluc3RhbmNlLmNsZWFyKClcbiAgICB0aGlzLnNldFN0YXRlKHsgYWN0aXZlVGFiSW5kZXg6IGluZGV4IH0pXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlLm1lYXN1cmVJbnN0YW5jZS5hY3RpdmVUb29sID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LnR5cGUgPT09ICcyZCcgPyAnZGlzdGFuY2UnIDogJ2RpcmVjdC1saW5lJ1xuICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgIHRoaXMuc3RhdGUubWVhc3VyZUluc3RhbmNlLmFjdGl2ZVRvb2wgPSAnYXJlYSdcbiAgICB9XG4gIH1cblxuICBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8YW55PiwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyB8fCBlLmtleSA9PT0gJyAnKSB7XG4gICAgICB0aGlzLm9uVGFiQ2xpY2soaW5kZXgpXG4gICAgfVxuICB9XG5cbiAgb25SZXF1ZXN0Q2xvc2VQYW5lbCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mby5hY3RpdmVUb29sTmFtZSA9PT0gdGhpcy50b29sTmFtZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKG51bGwpXG4gICAgfVxuICB9XG5cbiAgb25DbG9zZVBhbmVsID0gKCkgPT4ge1xuICAgIHRoaXMuZGVzdHJveSgpXG4gIH1cblxuICBvblNob3dQYW5lbCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5tZWFzdXJlSW5zdGFuY2UpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmFjdGl2ZVRhYkluZGV4ID09PSAwKSB7XG4gICAgICAgIHRoaXMuc3RhdGUubWVhc3VyZUluc3RhbmNlLmFjdGl2ZVRvb2wgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXcudHlwZSA9PT0gJzJkJyA/ICdkaXN0YW5jZScgOiAnZGlyZWN0LWxpbmUnXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuYWN0aXZlVGFiSW5kZXggPT09IDEpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5tZWFzdXJlSW5zdGFuY2UuYWN0aXZlVG9vbCA9ICdhcmVhJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldE5hdlRhYiA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LnR5cGUgPT09ICcyZCcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxOYXYgdGFicz57XG4gICAgICAgICAgdGhpcy5tZWFzdXJlTW9kdWxlczJELm1hcCgobW9kdWxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFiVGl0bGUgPSBpbmRleCA9PT0gMCA/ICdkcmF3TW9kZUxpbmUnIDogJ2RyYXdNb2RlUG9seWdvbidcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxOYXZJdGVtIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIDxOYXZMaW5rIGFjdGl2ZT17dGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gaW5kZXh9IHJlZj17cmVmID0+IHsgdGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gaW5kZXggJiYgKHRoaXMuYWN0aXZlVGFiUmVmID0gcmVmKSB9fSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMub25UYWJDbGljayhpbmRleCkgfX1cbiAgICAgICAgICAgICAgICBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgaW5kZXgpIH19XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogYCR7dGFiVGl0bGV9YCwgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlc1t0YWJUaXRsZV0gfSl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J20tMCcgaWNvbj17bW9kdWxlLnNyY30gLz5cbiAgICAgICAgICAgICAgICA8L05hdkxpbms+XG4gICAgICAgICAgICAgIDwvTmF2SXRlbT5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIDwvTmF2PlxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LnR5cGUgPT09ICczZCcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxOYXYgdGFicz57XG4gICAgICAgICAgdGhpcy5tZWFzdXJlTW9kdWxlczNELm1hcCgobW9kdWxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFiVGl0bGUgPSBpbmRleCA9PT0gMCA/ICdkcmF3TW9kZUxpbmUnIDogJ2RyYXdNb2RlUG9seWdvbidcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxOYXZJdGVtIGtleT17aW5kZXh9PlxuICAgICAgICAgICAgICAgIDxOYXZMaW5rIGFjdGl2ZT17dGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gaW5kZXh9IHJlZj17cmVmID0+IHsgdGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleCA9PT0gaW5kZXggJiYgKHRoaXMuYWN0aXZlVGFiUmVmID0gcmVmKSB9fSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMub25UYWJDbGljayhpbmRleCkgfX1cbiAgICAgICAgICAgICAgICBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgaW5kZXgpIH19XG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogYCR7dGFiVGl0bGV9YCwgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlc1t0YWJUaXRsZV0gfSl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J20tMCcgaWNvbj17bW9kdWxlLnNyY30gLz5cbiAgICAgICAgICAgICAgICA8L05hdkxpbms+XG4gICAgICAgICAgICAgIDwvTmF2SXRlbT5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIDwvTmF2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldE1lYXN1cmVNb2R1bGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlldy50eXBlID09PSAnMmQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5tZWFzdXJlTW9kdWxlczJEW3RoaXMuc3RhdGUuYWN0aXZlVGFiSW5kZXhdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm1lYXN1cmVNb2R1bGVzM0RbdGhpcy5zdGF0ZS5hY3RpdmVUYWJJbmRleF1cbiAgICB9XG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIHN0eWxlPXt7IHdpZHRoOiB0aGlzLnByb3BzLmlzTW9iaWxlID8gJzEwMCUnIDogJzI1MHB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScgfX1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgJ2V4Ym1hcC11aS1wYy1leHBhbmQtbWF4aGVpZ2h0JzogIXRoaXMucHJvcHMuaXNNb2JpbGUgfSl9XG4gICAgICA+XG4gICAgICAgIHt0aGlzLmdldE5hdlRhYigpfVxuICAgICAgICA8TWVhc3VyZUlubmVyXG4gICAgICAgICAgbWFwV2lkZ2V0SWQ9e3RoaXMucHJvcHMubWFwV2lkZ2V0SWR9XG4gICAgICAgICAgYWN0aXZlVGFiSW5kZXg9e3RoaXMuc3RhdGUuYWN0aXZlVGFiSW5kZXh9IGppbXVNYXBWaWV3PXt0aGlzLnByb3BzLmppbXVNYXBWaWV3fVxuICAgICAgICAgIG1lYXN1cmVNb2R1bGU9e3RoaXMuZ2V0TWVhc3VyZU1vZHVsZSgpfVxuICAgICAgICAgIG1lYXN1cmVJbnN0YW5jZT17dGhpcy5zdGF0ZS5tZWFzdXJlSW5zdGFuY2V9XG4gICAgICAgICAgb25NZWFzdXJjZUluc3RhbmNlQ3JlYXRlZD17dGhpcy5oYW5kbGVNZWFzdXJjZUluc3RhbmNlQ3JlYXRlZH1cbiAgICAgICAgICBhdXRvQ29udHJvbFdpZGdldElkPXt0aGlzLnByb3BzLmF1dG9Db250cm9sV2lkZ2V0SWR9XG4gICAgICAgICAgb25SZXF1ZXN0Q2xvc2VQYW5lbD17dGhpcy5vblJlcXVlc3RDbG9zZVBhbmVsfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmludGVyZmFjZSBNZWFzdXJlSW5uZXJQcm9wcyB7XG4gIG1hcFdpZGdldElkOiBzdHJpbmdcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG4gIG1lYXN1cmVNb2R1bGU6IHsgbmFtZTogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBhY3RpdmVUb29sOiBzdHJpbmcgfVxuICBtZWFzdXJlSW5zdGFuY2U6IE1lYXN1cmVUeXBlXG4gIGFjdGl2ZVRhYkluZGV4OiBudW1iZXJcbiAgb25NZWFzdXJjZUluc3RhbmNlQ3JlYXRlZDogKGluc3RhbmNlOiBNZWFzdXJlVHlwZSkgPT4gdm9pZFxuICBhdXRvQ29udHJvbFdpZGdldElkOiBzdHJpbmdcbiAgb25SZXF1ZXN0Q2xvc2VQYW5lbDogKCkgPT4gdm9pZFxufVxuXG5pbnRlcmZhY2UgTWVhc3VyZUlubmVyU3RhdGUge1xuICBhcGlMb2FkZWQ6IGJvb2xlYW5cbn1cblxuY2xhc3MgTWVhc3VyZUlubmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxNZWFzdXJlSW5uZXJQcm9wcywgTWVhc3VyZUlubmVyU3RhdGU+IHtcbiAgTWVhc3VyZUNsYXNzOiB0eXBlb2YgX19lc3JpLkRpc3RhbmNlTWVhc3VyZW1lbnQyRCB8IHR5cGVvZiBfX2VzcmkuQXJlYU1lYXN1cmVtZW50MkQgfCB0eXBlb2YgX19lc3JpLkRpcmVjdExpbmVNZWFzdXJlbWVudDNEIHwgdHlwZW9mIF9fZXNyaS5BcmVhTWVhc3VyZW1lbnQzRFxuICBNZWFzdXJlSW5zdGFuY2U6IE1lYXN1cmVUeXBlID0gbnVsbFxuXG4gIHBhcmVudENvbnRhaW5lcjogSFRNTEVsZW1lbnRcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuICB0b29sTmFtZTogc3RyaW5nID0gJ21lYXN1cmVtZW50J1xuICBpZDogc3RyaW5nXG4gIGN1cnJlbnRKaW11TWFwVmlldzogSmltdU1hcFZpZXdcbiAgb3JpZ2luYWxDbGlja0hpZ2hsaWdodEVuYWJsZWQ6IGJvb2xlYW5cblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuaWQgPSBgJHt0aGlzLnByb3BzLm1hcFdpZGdldElkfS1tZWFzdXJlLXRvb2xgXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYXBpTG9hZGVkOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuYXBpTG9hZGVkKSB7XG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS93aWRnZXRzL01lYXN1cmVtZW50J10pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFt0aGlzLk1lYXN1cmVDbGFzc10gPSBtb2R1bGVzXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGFwaUxvYWRlZDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogTWVhc3VyZUlubmVyUHJvcHMpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hcGlMb2FkZWQgJiYgdGhpcy5wYXJlbnRDb250YWluZXIgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5tZWFzdXJlSW5zdGFuY2UpIHtcbiAgICAgICAgLy8gY3JhdGUgbWVhc3VyZSBpc250YW5jZSBoZXJlXG4gICAgICAgIGNvbnN0IHRlbXBJbnN0YW5jZTogYW55ID0gbmV3IHRoaXMuTWVhc3VyZUNsYXNzKHtcbiAgICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgIHZpZXc6IHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlld1xuICAgICAgICB9KVxuICAgICAgICB0ZW1wSW5zdGFuY2UuYWN0aXZlVG9vbCA9IHRoaXMucHJvcHMubWVhc3VyZU1vZHVsZS5hY3RpdmVUb29sXG5cbiAgICAgICAgdGhpcy5zZXRDdXJyZW50SmltdU1hcFZpZXcodGhpcy5wcm9wcy5qaW11TWFwVmlldylcbiAgICAgICAgdGhpcy5jdXJyZW50SmltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2wodGhpcy50b29sTmFtZSlcbiAgICAgICAgdGhpcy5jdXJyZW50SmltdU1hcFZpZXcuYWRkSmltdU1hcFRvb2woe1xuICAgICAgICAgIG5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgICAgaW5zdGFuY2U6IHRlbXBJbnN0YW5jZVxuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMucHJvcHMub25NZWFzdXJjZUluc3RhbmNlQ3JlYXRlZCh0ZW1wSW5zdGFuY2UpXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGFwcEFjdGlvbnMucmVxdWVzdEF1dG9Db250cm9sTWFwV2lkZ2V0KHRoaXMucHJvcHMubWFwV2lkZ2V0SWQsIHRoaXMuaWQpXG4gICAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYWN0aW9uKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3SmltdU1hcFZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMubWVhc3VyZUluc3RhbmNlLnZpZXcgIT09IG5ld0ppbXVNYXBWaWV3LnZpZXcpIHtcbiAgICAgICAgICAvLyBtYXAgdmlldyBjaGFuZ2VkIGJ5IHN3aXRjaFxuICAgICAgICAgIHRoaXMucmVzdG9yZUNsaWNrSGlnaGxpZ2h0RW5hYmxlZEZvckN1cnJlbnRKaW11TWFwVmlldygpXG4gICAgICAgICAgdGhpcy5zZXRDdXJyZW50SmltdU1hcFZpZXcobmV3SmltdU1hcFZpZXcpXG5cbiAgICAgICAgICB0aGlzLnByb3BzLm1lYXN1cmVJbnN0YW5jZS5jbGVhcigpXG4gICAgICAgICAgdGhpcy5wcm9wcy5tZWFzdXJlSW5zdGFuY2UudmlldyA9IG5ld0ppbXVNYXBWaWV3LnZpZXdcblxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICB0aGlzLnByb3BzLm1lYXN1cmVJbnN0YW5jZS5hY3RpdmVUb29sID0gdGhpcy5wcm9wcy5tZWFzdXJlTW9kdWxlLmFjdGl2ZVRvb2xcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmNoZWNrQ29udGFpbmVyKClcbiAgICB9XG5cbiAgICAvLyBjaGVjayBpZiBhdXRvQ29udHJvbFdpZGdldElkIGNoYW5nZWRcbiAgICBjb25zdCBwcmV2QXV0b0NvbnRyb2xXaWRnZXRJZCA9IHByZXZQcm9wcz8uYXV0b0NvbnRyb2xXaWRnZXRJZCB8fCAnJ1xuICAgIGlmIChwcmV2QXV0b0NvbnRyb2xXaWRnZXRJZCA9PT0gdGhpcy5pZCAmJiB0aGlzLnByb3BzLmF1dG9Db250cm9sV2lkZ2V0SWQgIT09IHRoaXMuaWQpIHtcbiAgICAgIC8vIG1lYXN1cmUgaXMgZnJvbSBhY3RpdmUgdG8gaW5hY3RpdmUsIGRlc3Ryb3kgTWVhc3VyZUlubmVyXG4gICAgICB0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlUGFuZWwoKVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3RvcmVDbGlja0hpZ2hsaWdodEVuYWJsZWRGb3JDdXJyZW50SmltdU1hcFZpZXcoKVxuXG4gICAgaWYgKHRoaXMucHJvcHMuYXV0b0NvbnRyb2xXaWRnZXRJZCA9PT0gdGhpcy5pZCkge1xuICAgICAgY29uc3QgYWN0aW9uID0gYXBwQWN0aW9ucy5yZWxlYXNlQXV0b0NvbnRyb2xNYXBXaWRnZXQodGhpcy5wcm9wcy5tYXBXaWRnZXRJZClcbiAgICAgIGdldEFwcFN0b3JlKCkuZGlzcGF0Y2goYWN0aW9uKVxuICAgIH1cbiAgfVxuXG4gIHNldEN1cnJlbnRKaW11TWFwVmlldyAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50SmltdU1hcFZpZXcgPSBqaW11TWFwVmlld1xuICAgIHRoaXMub3JpZ2luYWxDbGlja0hpZ2hsaWdodEVuYWJsZWQgPSBqaW11TWFwVmlldy5pc0NsaWNrSGlnaGxpZ2h0RW5hYmxlZCgpXG4gICAgLy8gZGlzYWJsZSBjbGljayBoaWdobGlnaHQgdG8gYXZvaWQgY29uZmxpY3Qgd2l0aCBjbGlja2luZy1zZWxlY3RcbiAgICB0aGlzLmN1cnJlbnRKaW11TWFwVmlldy5kaXNhYmxlQ2xpY2tIaWdobGlnaHQoKVxuICB9XG5cbiAgcmVzdG9yZUNsaWNrSGlnaGxpZ2h0RW5hYmxlZEZvckN1cnJlbnRKaW11TWFwVmlldyAoKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudEppbXVNYXBWaWV3KSB7XG4gICAgICBpZiAodGhpcy5vcmlnaW5hbENsaWNrSGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRKaW11TWFwVmlldy5lbmFibGVDbGlja0hpZ2hsaWdodCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmN1cnJlbnRKaW11TWFwVmlldy5kaXNhYmxlQ2xpY2tIaWdobGlnaHQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNoZWNrQ29udGFpbmVyID0gKCkgPT4ge1xuICAgIGlmICgodGhpcy5jb250YWluZXIgYXMgYW55KS5zdHlsZS5vcGFjaXR5ID09PSAnMCcgfHwgKHRoaXMuY29udGFpbmVyIGFzIGFueSkuc3R5bGUub3BhY2l0eSA9PT0gMCkge1xuICAgICAgKHRoaXMuY29udGFpbmVyIGFzIGFueSkuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAodGhpcy5jb250YWluZXIgYXMgYW55KS5zdHlsZS5oZWlnaHQgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIHJlbG9hZCAoKSB7XG4gICAgaWYgKHRoaXMuY29udGFpbmVyLmNoaWxkTm9kZXMgJiYgdGhpcy5jb250YWluZXIuY2hpbGROb2Rlc1swXSkge1xuICAgICAgKHRoaXMuY29udGFpbmVyIGFzIGFueSkuc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICAodGhpcy5jb250YWluZXIgYXMgYW55KS5zdHlsZS5oZWlnaHQgPSAnMzVweCdcbiAgICB9XG5cbiAgICAvL3RoaXMuc2V0U3RhdGUoe1xuICAgIC8vICBhcGlMb2FkZWQ6IGZhbHNlXG4gICAgLy99LCAoKSA9PiB7XG4gICAgLy8gIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL3dpZGdldHMvTWVhc3VyZW1lbnQnXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAvLyAgICBbdGhpcy5NZWFzdXJlQ2xhc3NdID0gbW9kdWxlc1xuICAgIC8vICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgIC8vICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgLy8gICAgfSlcbiAgICAvLyAgfSlcbiAgICAvL30pXG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAnIHN0eWxlPXt7IHdpZHRoOiAnMjUwcHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgbWluSGVpZ2h0OiAnMzJweCcgfX0gcmVmPXtyZWYgPT4geyB0aGlzLnBhcmVudENvbnRhaW5lciA9IHJlZiB9fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lYXN1cmUtY29udGFpbmVyIG1lYXN1cmUtbWFwLXRvb2wnIHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0gLz5cbiAgICAgICAgeyF0aGlzLnN0YXRlLmFwaUxvYWRlZCAmJiA8ZGl2IGNsYXNzTmFtZT0nZXhibWFwLWJhc2V0b29sLWxvYWRlcicgLz59XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZVRvb2wsIHR5cGUgQmFzZVRvb2xQcm9wcywgdHlwZSBJY29uVHlwZSB9IGZyb20gJy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IHR5cGUgVG9vbFNoZWxsUHJvcHMgfSBmcm9tICcuLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wtc2hlbGwnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdmlnYXRpb24gZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ05hdmlnYXRpb24nXG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiAnTmF2aWdhdGlvbidcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gPE5hdmlnYXRpb25Jbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30gLz5cbiAgfVxuXG4gIC8qKlxuICAgKiBOYXZpZ2F0aW9uIG9ubHkgc3VwcG9ydHMgc2NlbmUgdmlldywgc28gU2NhbGVCYXJUb29sLmlzQXZhaWxhYmxlKCkgd2lsbCByZXR1cm4gZmFsc2UgaWYgdGhlIG1hcCBpcyBtYXAgdmlldy5cbiAgICovXG4gIHN0YXRpYyBpc0F2YWlsYWJsZSAodG9vbFNoZWxsUHJvcHM6IFRvb2xTaGVsbFByb3BzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRvb2xTaGVsbFByb3BzLmppbXVNYXBWaWV3Py52aWV3Py50eXBlID09PSAnM2QnXG4gIH1cbn1cblxuaW50ZXJmYWNlIE5hdmlnYXRpb25Jbm5lclByb3BzIHtcbiAgamltdU1hcFZpZXc6IEppbXVNYXBWaWV3XG59XG5cbmludGVyZmFjZSBOYXZpZ2F0aW9uSW5uZXJTdGF0ZSB7XG4gIGFwaUxvYWRlZDogYm9vbGVhblxufVxuXG5jbGFzcyBOYXZpZ2F0aW9uSW5uZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PE5hdmlnYXRpb25Jbm5lclByb3BzLCBOYXZpZ2F0aW9uSW5uZXJTdGF0ZT4ge1xuICBOYXZpZ2F0aW9uOiB0eXBlb2YgX19lc3JpLk5hdmlnYXRpb25Ub2dnbGUgPSBudWxsXG4gIE5hdmlnYXRpb25CdG46IF9fZXNyaS5OYXZpZ2F0aW9uVG9nZ2xlXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnRcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhcGlMb2FkZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5hcGlMb2FkZWQpIHtcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL3dpZGdldHMvTmF2aWdhdGlvblRvZ2dsZSddKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbdGhpcy5OYXZpZ2F0aW9uXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5OYXZpZ2F0aW9uQnRuKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gICAgICB9XG5cbiAgICAgIHRoaXMuTmF2aWdhdGlvbkJ0biA9IG5ldyB0aGlzLk5hdmlnYXRpb24oe1xuICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICB2aWV3OiB0aGlzLnByb3BzLmppbXVNYXBWaWV3LnZpZXcgYXMgX19lc3JpLlNjZW5lVmlld1xuICAgICAgfSlcblxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnTmF2aWdhdGlvbicpXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmFkZEppbXVNYXBUb29sKHtcbiAgICAgICAgbmFtZTogJ05hdmlnYXRpb24nLFxuICAgICAgICBpbnN0YW5jZTogdGhpcy5OYXZpZ2F0aW9uQnRuXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICBpZiAodGhpcy5OYXZpZ2F0aW9uQnRuKSB7XG4gICAgICB0aGlzLk5hdmlnYXRpb25CdG4uZGVzdHJveSgpXG4gICAgICB0aGlzLk5hdmlnYXRpb25CdG4gPSBudWxsXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdOYXZpZ2F0aW9uJylcbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nbmF2aWdhdGlvbi1tYXAtdG9vbCcgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fSAvPlxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgZ2V0QXBwU3RvcmUgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlVG9vbCwgdHlwZSBCYXNlVG9vbFByb3BzLCB0eXBlIEljb25UeXBlIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcywgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgdHlwZSBUb29sU2hlbGxQcm9wcyB9IGZyb20gJy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbC1zaGVsbCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NhbGVCYXIgZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ1NjYWxlQmFyJ1xuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gJ1NjYWxlQmFyJ1xuICB9XG5cbiAgZ2V0SWNvbiAoKTogSWNvblR5cGUge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIHJldHVybiA8U2NhbGVCYXJJbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30gLz5cbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FsZUJhciBvbmx5IHN1cHBvcnRzIG1hcCB2aWV3LCBzbyBTY2FsZUJhclRvb2wuaXNBdmFpbGFibGUoKSB3aWxsIHJldHVybiBmYWxzZSBpZiB0aGUgbWFwIGlzIHNjZW5lIHZpZXcuXG4gICAqL1xuICBzdGF0aWMgaXNBdmFpbGFibGUgKHRvb2xTaGVsbFByb3BzOiBUb29sU2hlbGxQcm9wcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0b29sU2hlbGxQcm9wcy5qaW11TWFwVmlldz8udmlldz8udHlwZSA9PT0gJzJkJ1xuICB9XG59XG5cbmludGVyZmFjZSBTY2FsZUJhcklubmVyUHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbn1cblxuaW50ZXJmYWNlIFNjYWxlQmFySW5uZXJTdGF0ZSB7XG4gIGFwaUxvYWRlZDogYm9vbGVhblxufVxuXG5jbGFzcyBTY2FsZUJhcklubmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxTY2FsZUJhcklubmVyUHJvcHMsIFNjYWxlQmFySW5uZXJTdGF0ZT4ge1xuICBTY2FsZUJhcjogdHlwZW9mIF9fZXNyaS5TY2FsZUJhciA9IG51bGxcbiAgU2NhbGVCYXJCdG46IF9fZXNyaS5TY2FsZUJhclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgYXBpTG9hZGVkOiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuYXBpTG9hZGVkKSB7XG4gICAgICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFsnZXNyaS93aWRnZXRzL1NjYWxlQmFyJ10pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFt0aGlzLlNjYWxlQmFyXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5TY2FsZUJhckJ0bikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xuICAgICAgfVxuXG4gICAgICBsZXQgcmF3VW5pdCA9ICcnXG5cbiAgICAgIGNvbnN0IGFwcFN0YXRlID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpXG5cbiAgICAgIGlmIChhcHBTdGF0ZSkge1xuICAgICAgICBpZiAoYXBwU3RhdGUudXNlciAmJiBhcHBTdGF0ZS51c2VyLnVuaXRzKSB7XG4gICAgICAgICAgcmF3VW5pdCA9IGFwcFN0YXRlLnVzZXIudW5pdHNcbiAgICAgICAgfSBlbHNlIGlmIChhcHBTdGF0ZS5wb3J0YWxTZWxmICYmIGFwcFN0YXRlLnBvcnRhbFNlbGYudW5pdHMpIHtcbiAgICAgICAgICByYXdVbml0ID0gYXBwU3RhdGUucG9ydGFsU2VsZi51bml0c1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBzY2FsZUJhclVuaXQ6ICdtZXRyaWMnIHwgJ2ltcGVyaWFsJyB8ICdkdWFsJyA9IG51bGxcblxuICAgICAgLy8gbWV0cmljID0+IG1ldHJpY1xuICAgICAgLy8gZW5nbGlzaCA9PiBpbXBlcmlhbFxuICAgICAgLy8gJycgPT4gZHVhbFxuICAgICAgaWYgKHJhd1VuaXQgPT09ICdtZXRyaWMnKSB7XG4gICAgICAgIHNjYWxlQmFyVW5pdCA9ICdtZXRyaWMnXG4gICAgICB9IGVsc2UgaWYgKHJhd1VuaXQgPT09ICdlbmdsaXNoJykge1xuICAgICAgICBzY2FsZUJhclVuaXQgPSAnaW1wZXJpYWwnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2FsZUJhclVuaXQgPSAnZHVhbCdcbiAgICAgIH1cblxuICAgICAgdGhpcy5TY2FsZUJhckJ0biA9IG5ldyB0aGlzLlNjYWxlQmFyKHtcbiAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgdmlldzogdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3IGFzIF9fZXNyaS5NYXBWaWV3LFxuICAgICAgICB1bml0OiBzY2FsZUJhclVuaXRcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ1NjYWxlQmFyJylcbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuYWRkSmltdU1hcFRvb2woe1xuICAgICAgICBuYW1lOiAnU2NhbGVCYXInLFxuICAgICAgICBpbnN0YW5jZTogdGhpcy5TY2FsZUJhckJ0blxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCAoKSB7XG4gICAgaWYgKHRoaXMuU2NhbGVCYXJCdG4pIHtcbiAgICAgIHRoaXMuU2NhbGVCYXJCdG4uZGVzdHJveSgpXG4gICAgICB0aGlzLlNjYWxlQmFyQnRuID0gbnVsbFxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnU2NhbGVCYXInKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPSdzY2FsZWJhci1tYXAtdG9vbCcgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fSAvPlxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IFJlYWN0LCBjc3MsIGpzeCwgZ2V0QXBwU3RvcmUsIE1lc3NhZ2VNYW5hZ2VyLCBMb2NhdGlvbkNoYW5nZU1lc3NhZ2UgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyBCYXNlVG9vbCwgdHlwZSBCYXNlVG9vbFByb3BzLCB0eXBlIEljb25UeXBlIH0gZnJvbSAnLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IHsgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcywgdHlwZSBKaW11TWFwVmlldyB9IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgZGVmYXVsdE1lc3NhZ2VzIH0gZnJvbSAnamltdS11aSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoIGV4dGVuZHMgQmFzZVRvb2w8QmFzZVRvb2xQcm9wcywgdW5rbm93bj4ge1xuICB0b29sTmFtZSA9ICdTZWFyY2gnXG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VhcmNoTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlYXJjaExhYmVsIH0pXG4gIH1cblxuICBnZXRJY29uICgpOiBJY29uVHlwZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGljb246IHJlcXVpcmUoJy4uL2Fzc2V0cy9pY29ucy9zZWFyY2guc3ZnJylcbiAgICB9XG4gIH1cblxuICBnZXRFeHBhbmRQYW5lbCAoKTogSlNYLkVsZW1lbnQge1xuICAgIGlmICh0aGlzLnByb3BzLmlzTW9iaWxlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7IG1pbkhlaWdodDogJzMycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgd2lkdGg6ICcxMDAlJyB9fT5cbiAgICAgICAgICA8U2VhcmNoSW5uZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IG1hcFdpZGdldElkPXt0aGlzLnByb3BzLm1hcFdpZGdldElkfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17eyBtaW5XaWR0aDogJzI1MHB4JywgbWluSGVpZ2h0OiAnMzJweCcsIHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxuICAgICAgICAgIDxTZWFyY2hJbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30gbWFwV2lkZ2V0SWQ9e3RoaXMucHJvcHMubWFwV2lkZ2V0SWR9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgU2VhcmNoSW5uZXJQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuICBtYXBXaWRnZXRJZDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBTZWFyY2hJbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG59XG5cbmNsYXNzIFNlYXJjaElubmVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxTZWFyY2hJbm5lclByb3BzLCBTZWFyY2hJbm5lclN0YXRlPiB7XG4gIFNlYXJjaDogdHlwZW9mIF9fZXNyaS53aWRnZXRzU2VhcmNoID0gbnVsbFxuICBQb3J0YWw6IHR5cGVvZiBfX2VzcmkuUG9ydGFsID0gbnVsbFxuICBTZWFyY2hCdG46IF9fZXNyaS53aWRnZXRzU2VhcmNoXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnRcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhcGlMb2FkZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAvKiBib3JkZXI6IHNvbGlkIDFweCByZ2JhKDExMCwxMTAsMTEwLDAuMyk7ICovXG4gICAgYFxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5hcGlMb2FkZWQpIHtcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL3dpZGdldHMvU2VhcmNoJywgJ2VzcmkvcG9ydGFsL1BvcnRhbCddKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgICAgICBbdGhpcy5TZWFyY2gsIHRoaXMuUG9ydGFsXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgYXBpTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuYXBpTG9hZGVkICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICBpZiAodGhpcy5TZWFyY2hCdG4pIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUGFyZW50ID0gdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudFxuICAgICAgICB0aGlzLlNlYXJjaEJ0bi5kZXN0cm95KClcbiAgICAgICAgdGhpcy5TZWFyY2hCdG4gPSBudWxsXG5cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50ICYmIGNvbnRhaW5lclBhcmVudCkge1xuICAgICAgICAgIGNvbnRhaW5lclBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcilcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gICAgICB9XG5cbiAgICAgIHRoaXMuU2VhcmNoQnRuID0gbmV3IHRoaXMuU2VhcmNoKHtcbiAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgdmlldzogdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LFxuICAgICAgICBwb3J0YWw6IG5ldyB0aGlzLlBvcnRhbCh7XG4gICAgICAgICAgdXJsOiBnZXRBcHBTdG9yZSgpLmdldFN0YXRlKCkucG9ydGFsVXJsXG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdTZWFyY2gnKVxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5hZGRKaW11TWFwVG9vbCh7XG4gICAgICAgIG5hbWU6ICdTZWFyY2gnLFxuICAgICAgICBpbnN0YW5jZTogdGhpcy5TZWFyY2hCdG5cbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuU2VhcmNoQnRuLm9uKCdzZWxlY3QtcmVzdWx0JywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghZXZlbnQucmVzdWx0LmZlYXR1cmUubGF5ZXIpIHtcbiAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGV2ZW50LnJlc3VsdC5mZWF0dXJlLmdlb21ldHJ5LnRvSlNPTigpXG4gICAgICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgTG9jYXRpb25DaGFuZ2VNZXNzYWdlKHRoaXMucHJvcHMubWFwV2lkZ2V0SWQsIGdlb21ldHJ5KSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGV2ZW50LnJlc3VsdC5mZWF0dXJlLmdlb21ldHJ5XG4gICAgICAgICAgaWYgKGdlb21ldHJ5LnR5cGUgPT09ICdwb2ludCcpIHtcbiAgICAgICAgICAgIE1lc3NhZ2VNYW5hZ2VyLmdldEluc3RhbmNlKCkucHVibGlzaE1lc3NhZ2UobmV3IExvY2F0aW9uQ2hhbmdlTWVzc2FnZSh0aGlzLnByb3BzLm1hcFdpZGdldElkLCBnZW9tZXRyeS50b0pTT04oKSkpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gZ2VvbWV0cnkuZXh0ZW50LmNlbnRlclxuICAgICAgICAgICAgTWVzc2FnZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5wdWJsaXNoTWVzc2FnZShuZXcgTG9jYXRpb25DaGFuZ2VNZXNzYWdlKHRoaXMucHJvcHMubWFwV2lkZ2V0SWQsIHBvaW50LnRvSlNPTigpKSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIGlmICh0aGlzLlNlYXJjaEJ0bikge1xuICAgICAgdGhpcy5TZWFyY2hCdG4uZGVzdHJveSgpXG4gICAgICB0aGlzLlNlYXJjaEJ0biA9IG51bGxcbiAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuZGVsZXRlSmltdU1hcFRvb2woJ1NlYXJjaCcpXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPSd3LTEwMCBzZWFyY2gtbWFwLXRvb2wnIHJlZj17cmVmID0+IHsgdGhpcy5jb250YWluZXIgPSByZWYgfX0+XG4gICAgICAgIHshdGhpcy5zdGF0ZS5hcGlMb2FkZWQgJiYgPGRpdiBjbGFzc05hbWU9J2V4Ym1hcC1iYXNldG9vbC1sb2FkZXInIC8+fVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEJhc2VUb29sLCB0eXBlIEJhc2VUb29sUHJvcHMsIHR5cGUgSWNvblR5cGUgfSBmcm9tICcuLi8uLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgU2VsZWN0UENUb29sIH0gZnJvbSAnLi9zZWxlY3QtcGMnXG5pbXBvcnQgeyBTZWxlY3RNb2JpbGVUb29sIH0gZnJvbSAnLi9zZWxlY3QtbW9iaWxlJ1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmludGVyZmFjZSBTZWxlY3RTdGF0ZSB7fVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3QgZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCBTZWxlY3RTdGF0ZT4ge1xuICB0b29sTmFtZSA9ICdTZWxlY3QnXG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdExhYmVsJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3RMYWJlbCB9KVxuICB9XG5cbiAgZ2V0SWNvbiAoKTogSWNvblR5cGUge1xuICAgIHJldHVybiB7XG4gICAgICBpY29uOiByZXF1aXJlKCcuLi8uLi9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LXJlY3RhbmdsZS5zdmcnKVxuICAgIH1cbiAgfVxuXG4gIGdldEV4cGFuZFBhbmVsICgpOiBKU1guRWxlbWVudCB7XG4gICAgaWYgKHRoaXMucHJvcHMuaXNNb2JpbGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTZWxlY3RNb2JpbGVUb29sXG4gICAgICAgICAgaXNBY3RpdmU9e3RoaXMudG9vbE5hbWUgPT09ICh0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvICYmIHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8uYWN0aXZlVG9vbE5hbWUpfVxuICAgICAgICAgIGFjdGl2ZVRvb2xJbmZvPXt0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvfSB0b29sTmFtZT17dGhpcy50b29sTmFtZX1cbiAgICAgICAgICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlPXt0aGlzLnByb3BzLm9uQWN0aXZlVG9vbEluZm9DaGFuZ2V9IF9vbkljb25DbGljaz17KCkgPT4geyAodGhpcyBhcyBhbnkpLl9vbkljb25DbGljaygpIH19XG4gICAgICAgICAgdGhlbWU9e3RoaXMucHJvcHMudGhlbWV9IGludGw9e3RoaXMucHJvcHMuaW50bH0gamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9XG4gICAgICAgIC8+XG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxTZWxlY3RQQ1Rvb2xcbiAgICAgICAgICB0aGVtZT17dGhpcy5wcm9wcy50aGVtZX0gaW50bD17dGhpcy5wcm9wcy5pbnRsfSBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld31cbiAgICAgICAgICBhY3RpdmVUb29sSW5mbz17dGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mb30gdG9vbE5hbWU9e3RoaXMudG9vbE5hbWV9XG4gICAgICAgICAgb25BY3RpdmVUb29sSW5mb0NoYW5nZT17dGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlfVxuICAgICAgICAvPlxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBjc3MsIGpzeCwgY2xhc3NOYW1lcywgUmVhY3QsIHBvbGlzaGVkLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIHR5cGUgSW50bFNoYXBlLCBEYXRhU291cmNlU2VsZWN0aW9uTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24sIE1vYmlsZVBhbmVsLCBkZWZhdWx0TWVzc2FnZXMsIFJhZGlvIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IHR5cGUgQWN0aXZlVG9vbEluZm8gfSBmcm9tICcuLi8uLi9sYXlvdXQvYmFzZS9iYXNlLXRvb2wnXG5pbXBvcnQgeyBNdWx0aVNvdXJjZU1hcENvbnRleHQgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL211bHRpc291cmNlbWFwLWNvbnRleHQnXG5pbXBvcnQgU2VsZWN0UHJvZ3Jlc3MgZnJvbSAnLi9zZWxlY3QtcHJvZ3Jlc3MnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHRoZW1lPzogSU1UaGVtZVZhcmlhYmxlc1xuICBpbnRsPzogSW50bFNoYXBlXG5cbiAgaXNBY3RpdmU6IGJvb2xlYW5cbiAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlld1xuICBhY3RpdmVUb29sSW5mbzogQWN0aXZlVG9vbEluZm9cbiAgdG9vbE5hbWU6IHN0cmluZ1xuICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlPzogKGFjdGl2ZVRvb2xJbmZvOiBBY3RpdmVUb29sSW5mbykgPT4gdm9pZFxuICBfb25JY29uQ2xpY2s/OiAoZTogYW55KSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBTdGF0ZXMge1xuICBza2V0Y2hJbml0aWFsZWQ6IGJvb2xlYW5cbiAgc2VsZWN0UHJvZ3Jlc3M6IG51bWJlclxuICBpc1Nob3dTZWxlY3RTZXR0aW5nOiBib29sZWFuXG5cbiAgY3VycmVudFNlbGVjdFR5cGU6ICdQb2ludCcgfCAnUmVjdGFuZ2xlJyB8ICdMYXNzbycgfCAnQ2lyY2xlJyB8ICdMaW5lJ1xuICBzcGF0aWFsUmVsYXRpb25zaGlwOiAnaW50ZXJzZWN0cycgfCAnY29udGFpbnMnXG59XG5cbmludGVyZmFjZSBTa2V0Y2hDcmVhdGVPcHRpb25zIHtcbiAgW3Rvb2w6IHN0cmluZ106IF9fZXNyaS5Ta2V0Y2hWaWV3TW9kZWxDcmVhdGVDcmVhdGVPcHRpb25zXG59XG5cbmludGVyZmFjZSBMYXN0S2V5RXZlbnRJbmZvIHtcbiAgZXZlbnREYXRlOiBEYXRlXG4gIGlzS2V5RG93bjogYm9vbGVhbiAvLyB0cnVlIG1lYW5zIGtleWRvd24sIGZhbHNlIG1lYW5zIGtleXVwXG59XG5cbmNvbnN0IGRlZmF1bHRQb2ludFN5bWJvbCA9IHtcbiAgc3R5bGU6ICdlc3JpU01TQ2lyY2xlJyxcbiAgY29sb3I6IFswLCAwLCAxMjgsIDEyOF0sXG4gIG5hbWU6ICdDaXJjbGUnLFxuICBvdXRsaW5lOiB7XG4gICAgY29sb3I6IFswLCAwLCAxMjgsIDI1NV0sXG4gICAgd2lkdGg6IDFcbiAgfSxcbiAgdHlwZTogJ2VzcmlTTVMnLFxuICBzaXplOiAxOFxufVxuXG5jb25zdCBkZWZhdWx0UG9seWxpbmVTeW1ib2wgPSB7XG4gIHRhZ3M6IFsnc29saWQnXSxcbiAgdGl0bGU6ICdCbHVlIFRoaW4nLFxuICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gIGNvbG9yOiBbNzksIDEyOSwgMTg5LCAyNTVdLFxuICB3aWR0aDogMyxcbiAgbmFtZTogJ0JsdWUgMScsXG4gIHR5cGU6ICdlc3JpU0xTJ1xufVxuXG5jb25zdCBkZWZhdWx0UG9seWdvblN5bWJvbCA9IHtcbiAgc3R5bGU6ICdlc3JpU0ZTU29saWQnLFxuICBjb2xvcjogWzc5LCAxMjksIDE4OSwgNzddLFxuICB0eXBlOiAnZXNyaVNGUycsXG4gIG91dGxpbmU6IHtcbiAgICBzdHlsZTogJ2VzcmlTTFNTb2xpZCcsXG4gICAgY29sb3I6IFs1NCwgOTMsIDE0MSwgMjU1XSxcbiAgICB3aWR0aDogMS41LFxuICAgIHR5cGU6ICdlc3JpU0xTJ1xuICB9XG59XG5cbmNvbnN0IFNlbGVjdFJlY3RhbmdsZUljb24gPSByZXF1aXJlKCcuLi8uLi9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LXJlY3RhbmdsZS5zdmcnKVxuY29uc3QgU2VsZWN0TGFzc29JY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1sYXNzby5zdmcnKVxuY29uc3QgU2VsZWN0Q2lyY2xlSWNvbiA9IHJlcXVpcmUoJy4uLy4uL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtY2lyY2xlLnN2ZycpXG5jb25zdCBTZWxlY3RMaW5lSWNvbiA9IHJlcXVpcmUoJy4uLy4uL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtbGluZS5zdmcnKVxuY29uc3QgU2VsZWN0UG9pbnRJY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1wb2ludC5zdmcnKVxuY29uc3QgU2VsZWN0TW9yZUljb24gPSByZXF1aXJlKCdqaW11LXVpL2xpYi9pY29ucy9tb3JlLTE2LnN2ZycpXG5cbmV4cG9ydCBjbGFzcyBTZWxlY3RNb2JpbGVUb29sIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgU3RhdGVzPiB7XG4gIFNrZXRjaFZpZXdNb2RlbDogdHlwZW9mIF9fZXNyaS5Ta2V0Y2hWaWV3TW9kZWxcbiAgR3JhcGhpY3NMYXllcjogdHlwZW9mIF9fZXNyaS5HcmFwaGljc0xheWVyXG4gIFF1ZXJ5OiB0eXBlb2YgX19lc3JpLlF1ZXJ5XG4gIGpzb25VdGlsczogdHlwZW9mIF9fZXNyaS5qc29uVXRpbHMgPSBudWxsXG4gIGdlb21ldHJ5RW5naW5lOiB0eXBlb2YgX19lc3JpLmdlb21ldHJ5RW5naW5lXG4gIHNrZXRjaFZpZXdNb2RlbDogX19lc3JpLlNrZXRjaFZpZXdNb2RlbFxuICBjdXJyZW50QWN0aXZlVG9vbDogc3RyaW5nID0gJ3JlY3RhbmdsZSdcbiAgc2tldENoQ3JlYXRlT3B0aW9uczogU2tldGNoQ3JlYXRlT3B0aW9uc1xuICB2aWV3S2V5RG93bkhhbmRsZTogX19lc3JpLkhhbmRsZVxuICB2aWV3S2V5VXBIYW5kbGU6IF9fZXNyaS5IYW5kbGVcbiAgbGFzdFNoaWZ0S2V5RXZlbnRJbmZvOiBMYXN0S2V5RXZlbnRJbmZvXG4gIGxhc3RDdHJsS2V5RXZlbnRJbmZvOiBMYXN0S2V5RXZlbnRJbmZvXG4gIGlzTWFjOiBib29sZWFuXG4gIGFjdGl2ZUppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuaXNNYWMgPSB3aW5kb3cuamltdVVBPy5vcz8ubmFtZSA9PT0gJ21hY09TJ1xuXG4gICAgdGhpcy5za2V0Q2hDcmVhdGVPcHRpb25zID0ge1xuICAgICAgcG9seWdvbjoge1xuICAgICAgICBtb2RlOiAnaHlicmlkJ1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjdXJyZW50U2VsZWN0VHlwZTogJ1JlY3RhbmdsZScsXG4gICAgICBza2V0Y2hJbml0aWFsZWQ6IGZhbHNlLFxuICAgICAgc3BhdGlhbFJlbGF0aW9uc2hpcDogJ2ludGVyc2VjdHMnLFxuICAgICAgc2VsZWN0UHJvZ3Jlc3M6IDAsXG4gICAgICBpc1Nob3dTZWxlY3RTZXR0aW5nOiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuYmluZFNoaWZ0Q3RybEtleXNFdmVudExpc3RlbmVycygpXG4gIH1cblxuICBnZXRDU1NTdHlsZSAoKSB7XG4gICAgY29uc3QgdGhlbWUgPSB0aGlzLnByb3BzLnRoZW1lXG5cbiAgICByZXR1cm4gY3NzYFxuICAgICAgLnNlbGVjdC10b29sLWJ0bi1ob3ZlcjogaG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLnBhbGV0dGUucHJpbWFyeVs1MDBdLCAwLjEpfTs7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAke3BvbGlzaGVkLnJlbSgxMyl9O1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUtbW9iaWxlLWNvbnRhaW5lci1zaGVsbCB7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUtbW9iaWxlLWNvbnRhaW5lci1zaGVsbDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICBoZWlnaHQ6IDAgIWltcG9ydGFudDtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUtbW9iaWxlLWNvbnRhaW5lciB7XG4gICAgICAgIHdpZHRoOiA0MDBweDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUge1xuICAgICAgICB3aWR0aDogNjRweDtcbiAgICAgICAgaGVpZ2h0OiA2NHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzQwMF19O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC10eXBlLWNob29zZWQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wcmltYXJ5fTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LXRvb2wtdHlwZS1jaG9vc2VkOmFmdGVyIHtcbiAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgYm9yZGVyLXRvcDogOHB4IHNvbGlkICR7dGhlbWUuY29sb3JzLnByaW1hcnl9O1xuICAgICAgICBib3JkZXItbGVmdDogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC10eXBlLXRleHQge1xuICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDEyKX07XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC1sb2FkZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYW5pbWF0aW9uOiBlc3JpLWZhZGUtaW4gNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC1sb2FkZXI6YmVmb3JlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMTAsMTEwLDExMCwwLjMpO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDUwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LXRvb2wtbG9hZGVyOmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeX07XG4gICAgICAgIHdpZHRoOiA0MCU7XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgICAgIGFuaW1hdGlvbjogbG9vcGluZy1wcm9ncmVzc3MtYmFyLWFuaSAxNTAwbXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICBgXG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnNrZXRjaEluaXRpYWxlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAgICdlc3JpL3dpZGdldHMvU2tldGNoL1NrZXRjaFZpZXdNb2RlbCcsXG4gICAgICAgICdlc3JpL2xheWVycy9HcmFwaGljc0xheWVyJyxcbiAgICAgICAgJ2VzcmkvcmVzdC9zdXBwb3J0L1F1ZXJ5JyxcbiAgICAgICAgJ2Vzcmkvc3ltYm9scy9zdXBwb3J0L2pzb25VdGlscycsXG4gICAgICAgICdlc3JpL2dlb21ldHJ5L2dlb21ldHJ5RW5naW5lJ1xuICAgICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgICAgW3RoaXMuU2tldGNoVmlld01vZGVsLCB0aGlzLkdyYXBoaWNzTGF5ZXIsIHRoaXMuUXVlcnksIHRoaXMuanNvblV0aWxzLCB0aGlzLmdlb21ldHJ5RW5naW5lXSA9IG1vZHVsZXNcbiAgICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy52aWV3LndoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuaW5pdGlhbFNrZXRjaFRvb2woKVxuXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBza2V0Y2hJbml0aWFsZWQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogU3RhdGVzKSB7XG4gICAgY29uc3QgcHJldkFjdGl2ZVRvb2xOYW1lID0gcHJldlByb3BzLmFjdGl2ZVRvb2xJbmZvICYmIHByZXZQcm9wcy5hY3RpdmVUb29sSW5mby5hY3RpdmVUb29sTmFtZVxuICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVUb29sTmFtZSA9IHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8gJiYgdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mby5hY3RpdmVUb29sTmFtZVxuXG4gICAgaWYgKHByZXZBY3RpdmVUb29sTmFtZSAhPT0gY3VycmVudEFjdGl2ZVRvb2xOYW1lICYmIGN1cnJlbnRBY3RpdmVUb29sTmFtZSAhPT0gdGhpcy5wcm9wcy50b29sTmFtZSAmJiBjdXJyZW50QWN0aXZlVG9vbE5hbWUpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc1Nob3dTZWxlY3RTZXR0aW5nOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAocHJldlN0YXRlLnNrZXRjaEluaXRpYWxlZCAhPT0gdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQgJiYgdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbFNrZXRjaFRvb2woKVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5pc0FjdGl2ZSAmJiB0aGlzLmN1cnJlbnRBY3RpdmVUb29sKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCh0aGlzLmN1cnJlbnRBY3RpdmVUb29sKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHByZXZQcm9wcy5qaW11TWFwVmlldyAmJiB0aGlzLnByb3BzLmppbXVNYXBWaWV3ICYmIChwcmV2UHJvcHMuamltdU1hcFZpZXcuaWQgIT09IHRoaXMucHJvcHMuamltdU1hcFZpZXcuaWQpICYmIHRoaXMuc3RhdGUuc2tldGNoSW5pdGlhbGVkKSB7XG4gICAgICAvLyBhY3RpdmUgSmltdU1hcFZpZXcgY2hhbmdlZFxuICAgICAgLy8gbmVlZCB0byBkZXN0cm95IGN1cnJlbnQgdGhpcy5za2V0Y2hWaWV3TW9kZWwgYW5kIHJlY3JlYXRlIGl0LCBkb250J3QgY2hhbmdlIHRoaXMuc2tldGNoVmlld01vZGVsLnZpZXcsIGJlY2F1c2Ugd2UgbmVlZCB0byBiaW5kIHZpZXcga2V5ZG93bi9rZXl1cCBldmVudHMgYmVmb3JlIGluaXQgc2tldGNoVmlld01vZGVsXG4gICAgICB0aGlzLmRlc3Ryb3lTa2V0Y2hWaWV3TW9kZWxBbmRSZWxlYXNlSGFuZGxlcygpXG4gICAgICB0aGlzLmluaXRpYWxTa2V0Y2hUb29sKClcblxuICAgICAgaWYgKHRoaXMucHJvcHMuaXNBY3RpdmUgJiYgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCkge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwodGhpcy5jdXJyZW50QWN0aXZlVG9vbClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHByZXZQcm9wcy5pc0FjdGl2ZSAhPT0gdGhpcy5wcm9wcy5pc0FjdGl2ZSkge1xuICAgICAgdGhpcy5pbml0aWFsU2tldGNoVG9vbCgpXG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCh0aGlzLmN1cnJlbnRBY3RpdmVUb29sKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZXN0cm95U2tldGNoVmlld01vZGVsQW5kUmVsZWFzZUhhbmRsZXMoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICB0aGlzLmRlc3Ryb3lTa2V0Y2hWaWV3TW9kZWxBbmRSZWxlYXNlSGFuZGxlcygpXG4gICAgdGhpcy5yZWxlYXNlU2hpZnRDdHJsS2V5c0V2ZW50TGlzdGVuZXJzKClcbiAgfVxuXG4gIGRlc3Ryb3lTa2V0Y2hWaWV3TW9kZWxBbmRSZWxlYXNlSGFuZGxlcyAoKSB7XG4gICAgdGhpcy5yZWxlYXNlVmlld0hhbmRsZXMoKVxuXG4gICAgaWYgKHRoaXMuc2tldGNoVmlld01vZGVsKSB7XG4gICAgICB0aGlzLnNrZXRjaFZpZXdNb2RlbC5kZXN0cm95KClcbiAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsID0gbnVsbFxuICAgIH1cblxuICAgIHRoaXMuYWN0aXZlSmltdU1hcFZpZXcgPSBudWxsXG4gIH1cblxuICByZWxlYXNlVmlld0hhbmRsZXMgKCkge1xuICAgIGlmICh0aGlzLmFjdGl2ZUppbXVNYXBWaWV3KSB7XG4gICAgICB0aGlzLmFjdGl2ZUppbXVNYXBWaWV3LnJlbW92ZVNlbGVjdEJ5UXVlcnlQcm9ncmVzc0NoYW5nZUxpc3RlbmVyKHRoaXMub25KaW11TWFwVmlld1NlbGVjdFByb2dyZXNzQ2hhbmdlKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnZpZXdLZXlEb3duSGFuZGxlKSB7XG4gICAgICB0aGlzLnZpZXdLZXlEb3duSGFuZGxlLnJlbW92ZSgpXG4gICAgICB0aGlzLnZpZXdLZXlEb3duSGFuZGxlID0gbnVsbFxuICAgIH1cblxuICAgIGlmICh0aGlzLnZpZXdLZXlVcEhhbmRsZSkge1xuICAgICAgdGhpcy52aWV3S2V5VXBIYW5kbGUucmVtb3ZlKClcbiAgICAgIHRoaXMudmlld0tleVVwSGFuZGxlID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIG9uSmltdU1hcFZpZXdTZWxlY3RQcm9ncmVzc0NoYW5nZSA9IChwcm9ncmVzcykgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0UHJvZ3Jlc3M6IHByb2dyZXNzXG4gICAgfSlcbiAgfVxuXG4gIHVzZVNoaWZ0S2V5ICh0b2xlYXJuYWNlTXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnVzZUtleSh0aGlzLmxhc3RTaGlmdEtleUV2ZW50SW5mbywgdG9sZWFybmFjZU1zKVxuICB9XG5cbiAgdXNlQ3RybEtleSAodG9sZWFybmFjZU1zOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy51c2VLZXkodGhpcy5sYXN0Q3RybEtleUV2ZW50SW5mbywgdG9sZWFybmFjZU1zKVxuICB9XG5cbiAgdXNlS2V5IChsYXN0S2V5RXZlbnRJbmZvOiBMYXN0S2V5RXZlbnRJbmZvLCB0b2xlYXJuYWNlTXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmIChsYXN0S2V5RXZlbnRJbmZvKSB7XG4gICAgICBpZiAobGFzdEtleUV2ZW50SW5mby5pc0tleURvd24pIHtcbiAgICAgICAgLy8ga2V5IGlzIHN0aWxsIGRvd24gYW5kIG5vdCB1cCwgcmV0dXJuIHRydWVcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGtleSBpcyB1cCwgd2UgdXNlIHRvbGVhcm5hY2VNcyB0byBkZXRlcmluZSB0aGUgcmV0dXJuIHZhbHVlXG4gICAgICAgIGNvbnN0IGRlbHRhVGltZSA9IERhdGUubm93KCkgLSBsYXN0S2V5RXZlbnRJbmZvLmV2ZW50RGF0ZS5nZXRUaW1lKClcblxuICAgICAgICBpZiAoZGVsdGFUaW1lIDw9IHRvbGVhcm5hY2VNcykge1xuICAgICAgICAgIC8vIGtleXVwIHRpbWUgaXMgbm90IHRvbyBsb25nIGZyb20gbm93XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBrZXl1cCB0aW1lIGlzIHRvbyBsb25nIGZyb20gbm93c1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGtleSBuZXZlciBkb3duLCByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGJpbmRTaGlmdEN0cmxLZXlzRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93biwgdHJ1ZSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcCwgdHJ1ZSlcbiAgfVxuXG4gIHJlbGVhc2VTaGlmdEN0cmxLZXlzRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93biwgdHJ1ZSlcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMub25LZXlVcCwgdHJ1ZSlcbiAgfVxuXG4gIG9uS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdTaGlmdCcpIHtcbiAgICAgIHRoaXMubGFzdFNoaWZ0S2V5RXZlbnRJbmZvID0ge1xuICAgICAgICBldmVudERhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGlzS2V5RG93bjogdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHRoaXMuaXNNYWMgJiYgZXZlbnQua2V5ID09PSAnTWV0YScpIHx8ICghdGhpcy5pc01hYyAmJiBldmVudC5rZXkgPT09ICdDb250cm9sJykpIHtcbiAgICAgIHRoaXMubGFzdEN0cmxLZXlFdmVudEluZm8gPSB7XG4gICAgICAgIGV2ZW50RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgaXNLZXlEb3duOiB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25LZXlVcCA9IChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdTaGlmdCcpIHtcbiAgICAgIHRoaXMubGFzdFNoaWZ0S2V5RXZlbnRJbmZvID0ge1xuICAgICAgICBldmVudERhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGlzS2V5RG93bjogZmFsc2VcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCh0aGlzLmlzTWFjICYmIGV2ZW50LmtleSA9PT0gJ01ldGEnKSB8fCAoIXRoaXMuaXNNYWMgJiYgZXZlbnQua2V5ID09PSAnQ29udHJvbCcpKSB7XG4gICAgICB0aGlzLmxhc3RDdHJsS2V5RXZlbnRJbmZvID0ge1xuICAgICAgICBldmVudERhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgIGlzS2V5RG93bjogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpbml0aWFsU2tldGNoVG9vbCAoKSB7XG4gICAgaWYgKCF0aGlzLlNrZXRjaFZpZXdNb2RlbCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNrZXRjaFZpZXdNb2RlbCkge1xuICAgICAgdGhpcy5yZWxlYXNlVmlld0hhbmRsZXMoKVxuXG4gICAgICBjb25zdCBqaW11TWFwVmlldyA9IHRoaXMucHJvcHMuamltdU1hcFZpZXdcbiAgICAgIHRoaXMuYWN0aXZlSmltdU1hcFZpZXcgPSBqaW11TWFwVmlld1xuICAgICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldy5hZGRTZWxlY3RCeVF1ZXJ5UHJvZ3Jlc3NDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uSmltdU1hcFZpZXdTZWxlY3RQcm9ncmVzc0NoYW5nZSlcblxuICAgICAgY29uc3QgdmlldyA9IGppbXVNYXBWaWV3LnZpZXdcblxuICAgICAgdGhpcy52aWV3S2V5RG93bkhhbmRsZSA9IHZpZXcub24oJ2tleS1kb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdTaGlmdCcpIHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICB0aGlzLnZpZXdLZXlEb3duSGFuZGxlID0gdmlldy5vbigna2V5LXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5rZXkgPT09ICdTaGlmdCcpIHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICB0aGlzLnNrZXRjaFZpZXdNb2RlbCA9IG5ldyB0aGlzLlNrZXRjaFZpZXdNb2RlbCh7XG4gICAgICAgIHZpZXc6IHZpZXcsXG4gICAgICAgIGxheWVyOiBuZXcgdGhpcy5HcmFwaGljc0xheWVyKCksXG4gICAgICAgIHBvaW50U3ltYm9sOiB0aGlzLmpzb25VdGlscy5mcm9tSlNPTihkZWZhdWx0UG9pbnRTeW1ib2wpIGFzIGFueSxcbiAgICAgICAgcG9seWxpbmVTeW1ib2w6IHRoaXMuanNvblV0aWxzLmZyb21KU09OKGRlZmF1bHRQb2x5bGluZVN5bWJvbCkgYXMgYW55LFxuICAgICAgICBwb2x5Z29uU3ltYm9sOiB0aGlzLmpzb25VdGlscy5mcm9tSlNPTihkZWZhdWx0UG9seWdvblN5bWJvbCkgYXMgYW55XG4gICAgICB9KVxuXG4gICAgICB0aGlzLnNrZXRjaFZpZXdNb2RlbC5vbignY3JlYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5zdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgIC8vIGtlZXAgY29udGludW91cyBkcmF3aW5nIGZvciBTa2V0Y2hWaWV3TW9kZWxcbiAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwodGhpcy5jdXJyZW50QWN0aXZlVG9vbClcblxuICAgICAgICAgIGNvbnN0IGppbXVNYXBWaWV3ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlld1xuICAgICAgICAgIGppbXVNYXBWaWV3LnZpZXcuY2xvc2VQb3B1cCgpXG5cbiAgICAgICAgICBjb25zdCBncmFwaGljID0gZXZlbnQuZ3JhcGhpY1xuXG4gICAgICAgICAgLy8gZ3JhcGhpYy5nZW9tZXRyeSBpcyBudWxsIHdoZW4gZG91YmxlIGNsaWNrIG1hcFxuICAgICAgICAgIGlmICghZ3JhcGhpYy5nZW9tZXRyeSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NrZXRjaCBncmFwaGljLmdlb21ldHJ5IGlzIG51bGwnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXNlS2V5VG9sZXJhbmNlTXMgPSA1MDBcbiAgICAgICAgICBjb25zdCBpc1NoaWZ0S2V5ID0gdGhpcy51c2VTaGlmdEtleSh1c2VLZXlUb2xlcmFuY2VNcylcbiAgICAgICAgICBjb25zdCBpc0N0cmxLZXkgPSB0aGlzLnVzZUN0cmxLZXkodXNlS2V5VG9sZXJhbmNlTXMpXG5cbiAgICAgICAgICBsZXQgc2VsZWN0aW9uTW9kZSA9IERhdGFTb3VyY2VTZWxlY3Rpb25Nb2RlLk5ld1xuXG4gICAgICAgICAgaWYgKGlzU2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGlmIChpc0N0cmxLZXkpIHtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uTW9kZSA9IERhdGFTb3VyY2VTZWxlY3Rpb25Nb2RlLlNlbGVjdEZyb21DdXJyZW50XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gRGF0YVNvdXJjZVNlbGVjdGlvbk1vZGUuQWRkVG9DdXJyZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc0N0cmxLZXkpIHtcbiAgICAgICAgICAgICAgc2VsZWN0aW9uTW9kZSA9IERhdGFTb3VyY2VTZWxlY3Rpb25Nb2RlLlJlbW92ZUZyb21DdXJyZW50XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gRGF0YVNvdXJjZVNlbGVjdGlvbk1vZGUuTmV3XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgamltdU1hcFZpZXcuc2VsZWN0RmVhdHVyZXNCeUdyYXBoaWMoZ3JhcGhpYywgdGhpcy5zdGF0ZS5zcGF0aWFsUmVsYXRpb25zaGlwLCBzZWxlY3Rpb25Nb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwgKGFjdGl2ZVRvb2w6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnNrZXRjaFZpZXdNb2RlbCkge1xuICAgICAgY29uc3QgY3JlYXRlT3B0aW9ucyA9IHRoaXMuc2tldENoQ3JlYXRlT3B0aW9uc1thY3RpdmVUb29sXVxuXG4gICAgICBpZiAoY3JlYXRlT3B0aW9ucykge1xuICAgICAgICB0aGlzLnNrZXRjaFZpZXdNb2RlbC5jcmVhdGUoYWN0aXZlVG9vbCBhcyBhbnksIGNyZWF0ZU9wdGlvbnMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNrZXRjaFZpZXdNb2RlbC5jcmVhdGUoYWN0aXZlVG9vbCBhcyBhbnkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0Q3VycmVudFNlbGVjdFR5cGUgPSAoY3VycmVudFNlbGVjdFR5cGU6IGFueSkgPT4ge1xuICAgIHRoaXMuaW5pdGlhbFNrZXRjaFRvb2woKVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudFNlbGVjdFR5cGUgPT09ICdQb2ludCcpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCgncG9pbnQnKVxuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCA9ICdwb2ludCdcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudFNlbGVjdFR5cGUgPT09ICdSZWN0YW5nbGUnKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5pc0FjdGl2ZSkge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwoJ3JlY3RhbmdsZScpXG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnRBY3RpdmVUb29sID0gJ3JlY3RhbmdsZSdcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudFNlbGVjdFR5cGUgPT09ICdMYXNzbycpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCgncG9seWdvbicpXG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnRBY3RpdmVUb29sID0gJ3BvbHlnb24nXG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSAnQ2lyY2xlJykge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaXNBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUb29sRm9yU2tldGNoVmlld01vZGVsKCdjaXJjbGUnKVxuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCA9ICdjaXJjbGUnXG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGluZScpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCgncG9seWxpbmUnKVxuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCA9ICdwb2x5bGluZSdcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGN1cnJlbnRTZWxlY3RUeXBlOiBjdXJyZW50U2VsZWN0VHlwZVxuICAgIH0sICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbyB8fCAodGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbyAmJiB0aGlzLnByb3BzLmFjdGl2ZVRvb2xJbmZvLmFjdGl2ZVRvb2xOYW1lICE9PSB0aGlzLnByb3BzLnRvb2xOYW1lKSkge1xuICAgICAgICB0aGlzLnByb3BzLl9vbkljb25DbGljayhudWxsKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0b2dnbGVJc1NlbGVjdEFjdGl2ZSA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLl9vbkljb25DbGljayhudWxsKVxuICB9XG5cbiAgb25DbGlja0xvYWRpbmdQcm9ncmVzcyA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5hY3RpdmVKaW11TWFwVmlldykge1xuICAgICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldy5jYW5jZWxTZWxlY3RCeVF1ZXJ5KClcbiAgICB9XG4gIH1cblxuICBoYW5kbGVJc1Nob3dTZWxlY3RTZXR0aW5nID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaXNTaG93U2VsZWN0U2V0dGluZzogIXRoaXMuc3RhdGUuaXNTaG93U2VsZWN0U2V0dGluZ1xuICAgIH0pXG4gIH1cblxuICBnZXRTZWxlY3RJY29uVGl0bGUgKCkge1xuICAgIGxldCB0b3BUaXRsZTogc3RyaW5nID0gJydcblxuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnUG9pbnQnKSB7XG4gICAgICB0b3BUaXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnU2VsZWN0aW9uQnlQb2ludCcpXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnUmVjdGFuZ2xlJykge1xuICAgICAgdG9wVGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1NlbGVjdGlvbkJ5UmVjdGFuZ2xlJylcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdMYXNzbycpIHtcbiAgICAgIHRvcFRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdTZWxlY3Rpb25CeUxhc3NvJylcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdDaXJjbGUnKSB7XG4gICAgICB0b3BUaXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnU2VsZWN0aW9uQnlDaXJjbGUnKVxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ0xpbmUnKSB7XG4gICAgICB0b3BUaXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnU2VsZWN0aW9uQnlMaW5lJylcbiAgICB9IGVsc2Uge1xuICAgICAgdG9wVGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1NlbGVjdExhYmVsJylcbiAgICB9XG5cbiAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ25ld1NlbGVjdGlvbicpXG4gICAgY29uc3QgYWRkVG9DdXJyZW50U2VsZWN0aW9uID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdhZGRUb0N1cnJlbnRTZWxlY3Rpb24nKVxuICAgIGNvbnN0IHJlbW92ZUZyb21DdXJyZW50U2VsZWN0aW9uID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdyZW1vdmVGcm9tQ3VycmVudFNlbGVjdGlvbicpXG4gICAgY29uc3Qgc2VsZWN0RnJvbUN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ3NlbGVjdEZyb21DdXJyZW50U2VsZWN0aW9uJylcbiAgICBjb25zdCBkcmF3U2hhcGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2RyYXdTaGFwZScpXG4gICAgY29uc3QgZHJhdyA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnZHJhdycpXG4gICAgY29uc3QgY3RybEtleSA9IHRoaXMuaXNNYWMgPyAnQ21kJyA6ICdDdHJsJ1xuXG4gICAgY29uc3QgbmV3U2VsZWN0aW9uVGlwID0gYOKImSAke25ld1NlbGVjdGlvbn0gKCR7ZHJhd1NoYXBlfSlgXG4gICAgY29uc3QgYWRkVG9DdXJyZW50U2VsZWN0aW9uVGlwID0gYOKImSAke2FkZFRvQ3VycmVudFNlbGVjdGlvbn0gKFNoaWZ0ICsgJHtkcmF3fSlgXG4gICAgY29uc3QgcmVtb3ZlRnJvbUN1cnJlbnRTZWxlY3Rpb25UaXAgPSBg4oiZICR7cmVtb3ZlRnJvbUN1cnJlbnRTZWxlY3Rpb259ICgke2N0cmxLZXl9ICsgJHtkcmF3fSlgXG4gICAgY29uc3Qgc2VsZWN0RnJvbUN1cnJlbnRTZWxlY3Rpb25UaXAgPSBg4oiZICR7c2VsZWN0RnJvbUN1cnJlbnRTZWxlY3Rpb259IChTaGlmdCArICR7Y3RybEtleX0gKyAke2RyYXd9KWBcblxuICAgIGNvbnN0IGZpbmFsVGl0bGUgPVxuICAgIGAke3RvcFRpdGxlfVxuJHtuZXdTZWxlY3Rpb25UaXB9XG4ke2FkZFRvQ3VycmVudFNlbGVjdGlvblRpcH1cbiR7cmVtb3ZlRnJvbUN1cnJlbnRTZWxlY3Rpb25UaXB9XG4ke3NlbGVjdEZyb21DdXJyZW50U2VsZWN0aW9uVGlwfVxuICAgIGBcblxuICAgIHJldHVybiBmaW5hbFRpdGxlXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlIChzdHJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6IHN0cklkLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzW3N0cklkXSB9KVxuICB9XG5cbiAgZ2V0U2VsZWN0VG9vbEljb24gPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdQb2ludCcpIHtcbiAgICAgIHJldHVybiBTZWxlY3RQb2ludEljb25cbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdSZWN0YW5nbGUnKSB7XG4gICAgICByZXR1cm4gU2VsZWN0UmVjdGFuZ2xlSWNvblxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ0xhc3NvJykge1xuICAgICAgcmV0dXJuIFNlbGVjdExhc3NvSWNvblxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ0NpcmNsZScpIHtcbiAgICAgIHJldHVybiBTZWxlY3RDaXJjbGVJY29uXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGluZScpIHtcbiAgICAgIHJldHVybiBTZWxlY3RMaW5lSWNvblxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gU2VsZWN0UmVjdGFuZ2xlSWNvblxuICAgIH1cbiAgfVxuXG4gIGdldE1vYmlsZVBhbmVsRm9yU2VsZWN0U2V0dGluZyA9ICgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPE11bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgeyh7IG1hcFdpZGdldElkIH0pID0+IChcbiAgICAgICAgICA8TW9iaWxlUGFuZWxcbiAgICAgICAgICAgIG1hcFdpZGdldElkPXtgJHttYXBXaWRnZXRJZH0td2l0aC1zZWxlY3QtY29udGFpbmVyYH0gdGl0bGU9JydcbiAgICAgICAgICAgIG9wZW49e3RoaXMuc3RhdGUuaXNTaG93U2VsZWN0U2V0dGluZ30gb25DbG9zZT17KCkgPT4geyB0aGlzLmhhbmRsZUlzU2hvd1NlbGVjdFNldHRpbmcoKSB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3LTEwMCc+XG4gICAgICAgICAgICAgIHt0aGlzLmdldE1vYmlsZVBhbmVsU2V0dGluZ0NvbnRlbnQoKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvTW9iaWxlUGFuZWw+XG4gICAgICAgICl9XG4gICAgICA8L011bHRpU291cmNlTWFwQ29udGV4dC5Db25zdW1lcj5cbiAgICApXG4gIH1cblxuICBnZXRNb2JpbGVQYW5lbFNldHRpbmdDb250ZW50ID0gKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNzcz17dGhpcy5nZXRDU1NTdHlsZSgpfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRlbnQtdGl0bGUgbXQtMSBtYi0yJz5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvblRvb2wnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2wgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndy0xMDAgc2VsZWN0LXRvb2wtdHlwZS1tb2JpbGUtY29udGFpbmVyLXNoZWxsJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VsZWN0LXRvb2wtdHlwZS1tb2JpbGUtY29udGFpbmVyIGQtZmxleCc+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnc2VsZWN0LXRvb2wtdHlwZSBtci00IGQtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciBzZWxlY3QtdG9vbC1idG4taG92ZXInLCB7XG4gICAgICAgICAgICAgICAgJ3NlbGVjdC10b29sLXR5cGUtY2hvb3NlZCc6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdSZWN0YW5nbGUnXG4gICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ1JlY3RhbmdsZScpIH19XG4gICAgICAgICAgICAgIG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlU2VsZWN0VHlwZUtleURvd24oZSwgJ1JlY3RhbmdsZScpIH19XG4gICAgICAgICAgICAgIHJvbGU9J2J1dHRvbicgdGFiSW5kZXg9ezB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0UmVjdGFuZ2xlSWNvbn0gLz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VsZWN0LXRvb2wtdHlwZS10ZXh0IG10LTEgdy0xMDAgdGV4dC10cnVuY2F0ZSBwbC0xIHByLTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXInXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sUmVjdGFuZ2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sUmVjdGFuZ2xlIH0pfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sUmVjdGFuZ2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sUmVjdGFuZ2xlIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3NlbGVjdC10b29sLXR5cGUgbXItNCBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgc2VsZWN0LXRvb2wtYnRuLWhvdmVyJywge1xuICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGFzc28nXG4gICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ0xhc3NvJykgfX1cbiAgICAgICAgICAgICAgb25LZXlEb3duPXtlID0+IHsgdGhpcy5oYW5kbGVTZWxlY3RUeXBlS2V5RG93bihlLCAnTGFzc28nKSB9fVxuICAgICAgICAgICAgICByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbiB3aWR0aD17MTZ9IGhlaWdodD17MTZ9IGljb249e1NlbGVjdExhc3NvSWNvbn0gLz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VsZWN0LXRvb2wtdHlwZS10ZXh0IG10LTEgdy0xMDAgdGV4dC10cnVuY2F0ZSBwbC0xIHByLTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXInXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sTGFzc28nLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xMYXNzbyB9KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbExhc3NvJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sTGFzc28gfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnc2VsZWN0LXRvb2wtdHlwZSBtci00IGQtZmxleCBmbGV4LWNvbHVtbiBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlciBzZWxlY3QtdG9vbC1idG4taG92ZXInLCB7XG4gICAgICAgICAgICAgICAgJ3NlbGVjdC10b29sLXR5cGUtY2hvb3NlZCc6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdDaXJjbGUnXG4gICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ0NpcmNsZScpIH19XG4gICAgICAgICAgICAgIG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlU2VsZWN0VHlwZUtleURvd24oZSwgJ0NpcmNsZScpIH19XG4gICAgICAgICAgICAgIHJvbGU9J2J1dHRvbicgdGFiSW5kZXg9ezB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0Q2lyY2xlSWNvbn0gLz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VsZWN0LXRvb2wtdHlwZS10ZXh0IG10LTEgdy0xMDAgdGV4dC10cnVuY2F0ZSBwbC0xIHByLTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXInXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sQ2lyY2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sQ2lyY2xlIH0pfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sQ2lyY2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sQ2lyY2xlIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3NlbGVjdC10b29sLXR5cGUgbXItNCBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgc2VsZWN0LXRvb2wtYnRuLWhvdmVyJywge1xuICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGluZSdcbiAgICAgICAgICAgICAgfSl9IG9uQ2xpY2s9eygpID0+IHsgdGhpcy5zZXRDdXJyZW50U2VsZWN0VHlwZSgnTGluZScpIH19XG4gICAgICAgICAgICAgIG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlU2VsZWN0VHlwZUtleURvd24oZSwgJ0xpbmUnKSB9fVxuICAgICAgICAgICAgICByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbiB3aWR0aD17MTZ9IGhlaWdodD17MTZ9IGljb249e1NlbGVjdExpbmVJY29ufSAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC10eXBlLXRleHQgbXQtMSB3LTEwMCB0ZXh0LXRydW5jYXRlIHBsLTEgcHItMSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlcidcbiAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvblRvb2xMaW5lJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sTGluZSB9KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbExpbmUnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xMaW5lIH0pfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3NlbGVjdC10b29sLXR5cGUgbXItNCBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgc2VsZWN0LXRvb2wtYnRuLWhvdmVyJywge1xuICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnUG9pbnQnXG4gICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ1BvaW50JykgfX1cbiAgICAgICAgICAgICAgb25LZXlEb3duPXtlID0+IHsgdGhpcy5oYW5kbGVTZWxlY3RUeXBlS2V5RG93bihlLCAnUG9pbnQnKSB9fVxuICAgICAgICAgICAgICByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbiB3aWR0aD17MTZ9IGhlaWdodD17MTZ9IGljb249e1NlbGVjdFBvaW50SWNvbn0gLz5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VsZWN0LXRvb2wtdHlwZS10ZXh0IG10LTEgdy0xMDAgdGV4dC10cnVuY2F0ZSBwbC0xIHByLTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXInXG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sUG9pbnQnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xQb2ludCB9KX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbFBvaW50JywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sUG9pbnQgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGVudC10aXRsZSBtdC0xIG1iLTInPlxuICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uTW9kZScsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuU2VsZWN0aW9uTW9kZSB9KX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIgbXQtMic+XG4gICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiAncG9pbnRlcicgfX0gY2hlY2tlZD17dGhpcy5zdGF0ZS5zcGF0aWFsUmVsYXRpb25zaGlwID09PSAnaW50ZXJzZWN0cyd9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzcGF0aWFsUmVsYXRpb25zaGlwOiAnaW50ZXJzZWN0cycgfSkgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdtLTAgbWwtMiBjb250ZW50LXRpdGxlJyBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzcGF0aWFsUmVsYXRpb25zaGlwOiAnaW50ZXJzZWN0cycgfSkgfX0+XG4gICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uV2l0aGluJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25XaXRoaW4gfSl9XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG10LTInPlxuICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgIHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19IGNoZWNrZWQ9e3RoaXMuc3RhdGUuc3BhdGlhbFJlbGF0aW9uc2hpcCA9PT0gJ2NvbnRhaW5zJ31cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHsgdGhpcy5zZXRTdGF0ZSh7IHNwYXRpYWxSZWxhdGlvbnNoaXA6ICdjb250YWlucycgfSkgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdtLTAgbWwtMiBjb250ZW50LXRpdGxlJyBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzcGF0aWFsUmVsYXRpb25zaGlwOiAnY29udGFpbnMnIH0pIH19PlxuICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvbkNvbnRhaW4nLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvbkNvbnRhaW4gfSl9XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxuXG4gIGhhbmRsZVNlbGVjdFR5cGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8YW55Piwgc2VsZWN0VHlwZTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcbiAgICAgIHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoc2VsZWN0VHlwZSlcbiAgICB9XG4gIH1cblxuICBoYW5kbGVLZXlEb3duID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8YW55PiwgYWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgaWYgKGFjdGlvbiA9PT0gJ3RvZ2dsZUlzU2VsZWN0QWN0aXZlJykge1xuICAgICAgICB0aGlzLnRvZ2dsZUlzU2VsZWN0QWN0aXZlKClcbiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnc2hvd1NlbGVjdFNldHRpbmcnKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlSXNTaG93U2VsZWN0U2V0dGluZygpXG4gICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ29uQ2xpY2tMb2FkaW5nUHJvZ3Jlc3MnKSB7XG4gICAgICAgIHRoaXMub25DbGlja0xvYWRpbmdQcm9ncmVzcygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBzZWxlY3RJY29uVGl0bGUgPSB0aGlzLmdldFNlbGVjdEljb25UaXRsZSgpXG4gICAgY29uc3QgbW9yZUljb25UaXRsZSA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdtb3JlJywgZGVmYXVsdE1lc3NhZ2U6ICdNb3JlJyB9KVxuICAgIGNvbnN0IGlzU2VsZWN0aW5nID0gdGhpcy5zdGF0ZS5zZWxlY3RQcm9ncmVzcyA+IDAgJiYgdGhpcy5zdGF0ZS5zZWxlY3RQcm9ncmVzcyA8IDFcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNzcz17dGhpcy5nZXRDU1NTdHlsZSgpfT5cbiAgICAgICAge3RoaXMuc3RhdGUuc2tldGNoSW5pdGlhbGVkICYmICFpc1NlbGVjdGluZyAmJiA8ZGl2XG4gICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVJc1NlbGVjdEFjdGl2ZX0gc3R5bGU9e3t9fSB0aXRsZT17c2VsZWN0SWNvblRpdGxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2V4Ym1hcC11aS10b29sIGJvcmRlci0wIGVzcmktd2lkZ2V0LS1idXR0b24nLCB7XG4gICAgICAgICAgICAnZXhibWFwLXVpLXRvb2wtaWNvbi1zZWxlY3RlZCc6IHRoaXMucHJvcHMuaXNBY3RpdmVcbiAgICAgICAgICB9KX1cbiAgICAgICAgICBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgJ3RvZ2dsZUlzU2VsZWN0QWN0aXZlJykgfX1cbiAgICAgICAgICByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICA+XG4gICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J2V4Ym1hcC11aS10b29sLWljb24nIGljb249e3RoaXMuZ2V0U2VsZWN0VG9vbEljb24oKX0gLz5cbiAgICAgICAgPC9kaXY+fVxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQgJiYgaXNTZWxlY3RpbmcgJiYgPFNlbGVjdFByb2dyZXNzIHByb2dyZXNzPXt0aGlzLnN0YXRlLnNlbGVjdFByb2dyZXNzfSBpbnRsPXt0aGlzLnByb3BzLmludGx9IHRoZW1lPXt0aGlzLnByb3BzLnRoZW1lfSBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tMb2FkaW5nUHJvZ3Jlc3N9IC8+XG4gICAgICAgIH1cbiAgICAgICAgeyF0aGlzLnN0YXRlLnNrZXRjaEluaXRpYWxlZCAmJiA8ZGl2IHN0eWxlPXt7fX0gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdleGJtYXAtdWktdG9vbCBib3JkZXItMCBlc3JpLXdpZGdldC0tYnV0dG9uJyl9PlxuICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gY2xhc3NOYW1lPSdleGJtYXAtdWktdG9vbC1pY29uJyBpY29uPXt0aGlzLmdldFNlbGVjdFRvb2xJY29uKCl9IC8+XG4gICAgICAgIDwvZGl2Pn1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvcmRlciBib3JkZXItdG9wLTAgdy0xMDAnIHN0eWxlPXt7IGhlaWdodDogJzFweCcgfX0gLz5cbiAgICAgICAge3RoaXMuc3RhdGUuc2tldGNoSW5pdGlhbGVkICYmIDxkaXYgb25DbGljaz17dGhpcy5oYW5kbGVJc1Nob3dTZWxlY3RTZXR0aW5nfSB0aXRsZT17bW9yZUljb25UaXRsZX0gc3R5bGU9e3t9fSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2V4Ym1hcC11aS10b29sIGJvcmRlci0wIGVzcmktd2lkZ2V0LS1idXR0b24nKX1cbiAgICAgICAgICBvbktleURvd249e2UgPT4geyB0aGlzLmhhbmRsZUtleURvd24oZSwgJ3Nob3dTZWxlY3RTZXR0aW5nJykgfX1cbiAgICAgICAgICByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICA+XG4gICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J2V4Ym1hcC11aS10b29sLWljb24nIGljb249e1NlbGVjdE1vcmVJY29ufSAvPlxuICAgICAgICA8L2Rpdj59XG4gICAgICAgIHshdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQgJiYgPGRpdiBzdHlsZT17e319IHRpdGxlPXttb3JlSWNvblRpdGxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2V4Ym1hcC11aS10b29sIGJvcmRlci0wIGVzcmktd2lkZ2V0LS1idXR0b24nKX0+XG4gICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBjbGFzc05hbWU9J2V4Ym1hcC11aS10b29sLWljb24nIGljb249e1NlbGVjdE1vcmVJY29ufSAvPlxuICAgICAgICA8L2Rpdj59XG4gICAgICAgIHt0aGlzLnN0YXRlLmlzU2hvd1NlbGVjdFNldHRpbmcgJiYgdGhpcy5nZXRNb2JpbGVQYW5lbEZvclNlbGVjdFNldHRpbmcoKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuIiwiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBjc3MsIGpzeCwgY2xhc3NOYW1lcywgUmVhY3QsIHBvbGlzaGVkLCB0eXBlIElNVGhlbWVWYXJpYWJsZXMsIHR5cGUgRmVhdHVyZUxheWVyUXVlcnlQYXJhbXMsIHR5cGUgSW50bFNoYXBlLCBEYXRhU291cmNlU2VsZWN0aW9uTW9kZSB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IEljb24sIFBvcHBlciwgZGVmYXVsdE1lc3NhZ2VzLCBSYWRpbyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5pbXBvcnQgeyB0eXBlIEFjdGl2ZVRvb2xJbmZvIH0gZnJvbSAnLi4vLi4vbGF5b3V0L2Jhc2UvYmFzZS10b29sJ1xuaW1wb3J0IFNlbGVjdFByb2dyZXNzIGZyb20gJy4vc2VsZWN0LXByb2dyZXNzJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBpbnRsOiBJbnRsU2hhcGVcbiAgamltdU1hcFZpZXc/OiBKaW11TWFwVmlld1xuICBhY3RpdmVUb29sSW5mbzogQWN0aXZlVG9vbEluZm9cbiAgdG9vbE5hbWU6IHN0cmluZ1xuICBvbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlOiAoYWN0aXZlVG9vbEluZm86IEFjdGl2ZVRvb2xJbmZvKSA9PiB2b2lkXG59XG5cbmludGVyZmFjZSBTdGF0ZXMge1xuICBza2V0Y2hJbml0aWFsZWQ6IGJvb2xlYW5cbiAgaXNTaG93U2VsZWN0VHlwZVBvcHVwOiBib29sZWFuXG4gIHNlbGVjdFByb2dyZXNzOiBudW1iZXJcblxuICBjdXJyZW50U2VsZWN0VHlwZTogJ1BvaW50JyB8ICdSZWN0YW5nbGUnIHwgJ0xhc3NvJyB8ICdDaXJjbGUnIHwgJ0xpbmUnXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIHNwYXRpYWxSZWxhdGlvbnNoaXA6ICdpbnRlcnNlY3RzJyB8ICdjb250YWlucydcbiAgcmVzdWx0R3JhcGhpY3M6IF9fZXNyaS5HcmFwaGljW11cbn1cblxuY29uc3QgZGVmYXVsdFBvaW50U3ltYm9sID0ge1xuICBzdHlsZTogJ2VzcmlTTVNDaXJjbGUnLFxuICBjb2xvcjogWzAsIDAsIDEyOCwgMTI4XSxcbiAgbmFtZTogJ0NpcmNsZScsXG4gIG91dGxpbmU6IHtcbiAgICBjb2xvcjogWzAsIDAsIDEyOCwgMjU1XSxcbiAgICB3aWR0aDogMVxuICB9LFxuICB0eXBlOiAnZXNyaVNNUycsXG4gIHNpemU6IDE4XG59XG5cbmNvbnN0IGRlZmF1bHRQb2x5bGluZVN5bWJvbCA9IHtcbiAgdGFnczogWydzb2xpZCddLFxuICB0aXRsZTogJ0JsdWUgVGhpbicsXG4gIHN0eWxlOiAnZXNyaVNMU1NvbGlkJyxcbiAgY29sb3I6IFs3OSwgMTI5LCAxODksIDI1NV0sXG4gIHdpZHRoOiAzLFxuICBuYW1lOiAnQmx1ZSAxJyxcbiAgdHlwZTogJ2VzcmlTTFMnXG59XG5cbmNvbnN0IGRlZmF1bHRQb2x5Z29uU3ltYm9sID0ge1xuICBzdHlsZTogJ2VzcmlTRlNTb2xpZCcsXG4gIGNvbG9yOiBbNzksIDEyOSwgMTg5LCA3N10sXG4gIHR5cGU6ICdlc3JpU0ZTJyxcbiAgb3V0bGluZToge1xuICAgIHN0eWxlOiAnZXNyaVNMU1NvbGlkJyxcbiAgICBjb2xvcjogWzU0LCA5MywgMTQxLCAyNTVdLFxuICAgIHdpZHRoOiAxLjUsXG4gICAgdHlwZTogJ2VzcmlTTFMnXG4gIH1cbn1cblxuY29uc3QgSWNvbkFycm93RG93biA9IHJlcXVpcmUoJ2ppbXUtdWkvbGliL2ljb25zL2Fycm93LWRvd24taGVhZGVyLnN2ZycpXG5cbmNvbnN0IFNlbGVjdFJlY3RhbmdsZUljb24gPSByZXF1aXJlKCcuLi8uLi9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LXJlY3RhbmdsZS5zdmcnKVxuY29uc3QgU2VsZWN0TGFzc29JY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1sYXNzby5zdmcnKVxuY29uc3QgU2VsZWN0Q2lyY2xlSWNvbiA9IHJlcXVpcmUoJy4uLy4uL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtY2lyY2xlLnN2ZycpXG5jb25zdCBTZWxlY3RMaW5lSWNvbiA9IHJlcXVpcmUoJy4uLy4uL2Fzc2V0cy9pY29ucy9zZWxlY3QtdG9vbC9zZWxlY3QtbGluZS5zdmcnKVxuY29uc3QgU2VsZWN0UG9pbnRJY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1wb2ludC5zdmcnKVxuY29uc3QgU2VsZWN0Q2xlYXJJY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1jbGVhci5zdmcnKVxuXG5pbnRlcmZhY2UgU2tldGNoQ3JlYXRlT3B0aW9ucyB7XG4gIFt0b29sOiBzdHJpbmddOiBfX2VzcmkuU2tldGNoVmlld01vZGVsQ3JlYXRlQ3JlYXRlT3B0aW9uc1xufVxuXG5pbnRlcmZhY2UgTGFzdEtleUV2ZW50SW5mbyB7XG4gIGV2ZW50RGF0ZTogRGF0ZVxuICBpc0tleURvd246IGJvb2xlYW4gLy8gdHJ1ZSBtZWFucyBrZXlkb3duLCBmYWxzZSBtZWFucyBrZXl1cFxufVxuXG5leHBvcnQgY2xhc3MgU2VsZWN0UENUb29sIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcywgU3RhdGVzPiB7XG4gIGJ0bkNvbnRhaW5lcjogSFRNTEVsZW1lbnRcbiAgYnRuU2VsZWN0VHlwZUNvbnRhaW5lcjogSFRNTEVsZW1lbnRcbiAgc2VsZWN0UmVzdWx0Q29udGFpbmVyOiBIVE1MRWxlbWVudFxuICBTa2V0Y2hWaWV3TW9kZWw6IHR5cGVvZiBfX2VzcmkuU2tldGNoVmlld01vZGVsXG4gIEdyYXBoaWNzTGF5ZXI6IHR5cGVvZiBfX2VzcmkuR3JhcGhpY3NMYXllclxuICBRdWVyeTogdHlwZW9mIF9fZXNyaS5RdWVyeVxuICBza2V0Y2hWaWV3TW9kZWw6IF9fZXNyaS5Ta2V0Y2hWaWV3TW9kZWxcbiAgY3VycmVudEFjdGl2ZVRvb2w6IHN0cmluZyA9ICdyZWN0YW5nbGUnXG4gIHF1ZXJ5OiBGZWF0dXJlTGF5ZXJRdWVyeVBhcmFtc1xuICBqc29uVXRpbHM6IHR5cGVvZiBfX2VzcmkuanNvblV0aWxzID0gbnVsbFxuICBnZW9tZXRyeUVuZ2luZTogdHlwZW9mIF9fZXNyaS5nZW9tZXRyeUVuZ2luZVxuICByZXN1bHRHcmFwaGljczogX19lc3JpLkdyYXBoaWNbXSA9IFtdXG4gIHNrZXRDaENyZWF0ZU9wdGlvbnM6IFNrZXRjaENyZWF0ZU9wdGlvbnNcbiAgdmlld0tleURvd25IYW5kbGU6IF9fZXNyaS5IYW5kbGVcbiAgdmlld0tleVVwSGFuZGxlOiBfX2VzcmkuSGFuZGxlXG4gIGxhc3RTaGlmdEtleUV2ZW50SW5mbzogTGFzdEtleUV2ZW50SW5mb1xuICBsYXN0Q3RybEtleUV2ZW50SW5mbzogTGFzdEtleUV2ZW50SW5mb1xuICBpc01hYzogYm9vbGVhblxuICBhY3RpdmVKaW11TWFwVmlldzogSmltdU1hcFZpZXdcblxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLmlzTWFjID0gd2luZG93LmppbXVVQT8ub3M/Lm5hbWUgPT09ICdtYWNPUydcblxuICAgIHRoaXMuc2tldENoQ3JlYXRlT3B0aW9ucyA9IHtcbiAgICAgIHBvbHlnb246IHtcbiAgICAgICAgbW9kZTogJ2h5YnJpZCdcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNTaG93U2VsZWN0VHlwZVBvcHVwOiBmYWxzZSxcbiAgICAgIGN1cnJlbnRTZWxlY3RUeXBlOiAnUmVjdGFuZ2xlJyxcbiAgICAgIHNrZXRjaEluaXRpYWxlZDogZmFsc2UsXG4gICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICBzcGF0aWFsUmVsYXRpb25zaGlwOiAnaW50ZXJzZWN0cycsXG4gICAgICByZXN1bHRHcmFwaGljczogW10sXG4gICAgICBzZWxlY3RQcm9ncmVzczogMFxuICAgIH1cblxuICAgIHRoaXMuYmluZFNoaWZ0Q3RybEtleXNFdmVudExpc3RlbmVycygpXG4gIH1cblxuICBnZXRDU1NTdHlsZSAoKSB7XG4gICAgY29uc3QgdGhlbWUgPSB0aGlzLnByb3BzLnRoZW1lXG4gICAgY29uc3QgY29udGFpbmVyYmcgPSB0aGVtZS5hcmNnaXMuY29tcG9uZW50cy5idXR0b24udmFyaWFudHMuZGVmYXVsdC5kZWZhdWx0LmJnXG4gICAgY29uc3QgY29udGFpbmVyQm9yZGVyID0gdGhlbWUuYXJjZ2lzLmNvbXBvbmVudHMuYnV0dG9uLnZhcmlhbnRzLmRlZmF1bHQuZGVmYXVsdC5ib3JkZXJcbiAgICByZXR1cm4gY3NzYFxuICAgICAgLnNlbGVjdC10b29sLWNvbnRhaW5lciB7XG4gICAgICAgICR7Y29udGFpbmVyYmcgJiYgYGJhY2tncm91bmQtY29sb3I6ICR7Y29udGFpbmVyYmd9O2B9XG4gICAgICAgICR7Y29udGFpbmVyQm9yZGVyICYmIGBib3JkZXI6ICR7Y29udGFpbmVyQm9yZGVyLmNvbG9yfSAke2NvbnRhaW5lckJvcmRlci53aWR0aH0gc29saWQ7YH1cbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLWJ0biB7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LWJnIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucGFsZXR0ZS5saWdodFsxMDBdfTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDEzKX07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LXRvb2wtdHlwZS1tb2JpbGUtY29udGFpbmVyLXNoZWxsIHtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUtbW9iaWxlLWNvbnRhaW5lci1zaGVsbDo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICBoZWlnaHQ6IDAgIWltcG9ydGFudDtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUtbW9iaWxlLWNvbnRhaW5lciB7XG4gICAgICAgIHdpZHRoOiA0MDBweDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC10b29sLXR5cGUge1xuICAgICAgICB3aWR0aDogNjRweDtcbiAgICAgICAgaGVpZ2h0OiA2NHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wYWxldHRlLmxpZ2h0WzQwMF19O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC10eXBlLWNob29zZWQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5wcmltYXJ5fTtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LXRvb2wtdHlwZS1jaG9vc2VkOmFmdGVyIHtcbiAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgYm9yZGVyLXRvcDogOHB4IHNvbGlkICR7dGhlbWUuY29sb3JzLnByaW1hcnl9O1xuICAgICAgICBib3JkZXItbGVmdDogOHB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC10eXBlLXRleHQge1xuICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDEyKX07XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC1sb2FkZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgYW5pbWF0aW9uOiBlc3JpLWZhZGUtaW4gNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtdG9vbC1sb2FkZXI6YmVmb3JlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMTAsMTEwLDExMCwwLjMpO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgei1pbmRleDogMDtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBoZWlnaHQ6IDJweDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDUwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LXRvb2wtbG9hZGVyOmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeX07XG4gICAgICAgIHdpZHRoOiAyMCU7XG4gICAgICAgIHotaW5kZXg6IDA7XG4gICAgICAgIGFuaW1hdGlvbjogbG9vcGluZy1wcm9ncmVzc3MtYmFyLWFuaSAxNTAwbXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgNTAwbXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQpIHtcbiAgICAgIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICAgICAnZXNyaS93aWRnZXRzL1NrZXRjaC9Ta2V0Y2hWaWV3TW9kZWwnLFxuICAgICAgICAnZXNyaS9sYXllcnMvR3JhcGhpY3NMYXllcicsXG4gICAgICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9RdWVyeScsXG4gICAgICAgICdlc3JpL3N5bWJvbHMvc3VwcG9ydC9qc29uVXRpbHMnLFxuICAgICAgICAnZXNyaS9nZW9tZXRyeS9nZW9tZXRyeUVuZ2luZSdcbiAgICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFt0aGlzLlNrZXRjaFZpZXdNb2RlbCwgdGhpcy5HcmFwaGljc0xheWVyLCB0aGlzLlF1ZXJ5LCB0aGlzLmpzb25VdGlscywgdGhpcy5nZW9tZXRyeUVuZ2luZV0gPSBtb2R1bGVzXG4gICAgICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlldy53aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmluaXRpYWxTa2V0Y2hUb29sKClcblxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2tldGNoSW5pdGlhbGVkOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFByb3BzLCBwcmV2U3RhdGU6IFN0YXRlcykge1xuICAgIGlmIChwcmV2U3RhdGUuc2tldGNoSW5pdGlhbGVkICE9PSB0aGlzLnN0YXRlLnNrZXRjaEluaXRpYWxlZCAmJiB0aGlzLnN0YXRlLnNrZXRjaEluaXRpYWxlZCkge1xuICAgICAgdGhpcy5pbml0aWFsU2tldGNoVG9vbCgpXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmlzQWN0aXZlICYmIHRoaXMuY3VycmVudEFjdGl2ZVRvb2wpIHtcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUb29sRm9yU2tldGNoVmlld01vZGVsKHRoaXMuY3VycmVudEFjdGl2ZVRvb2wpXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAocHJldlByb3BzLmppbXVNYXBWaWV3ICYmIHRoaXMucHJvcHMuamltdU1hcFZpZXcgJiYgKHByZXZQcm9wcy5qaW11TWFwVmlldy5pZCAhPT0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy5pZCkgJiYgdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQpIHtcbiAgICAgIC8vIGFjdGl2ZSBKaW11TWFwVmlldyBjaGFuZ2VkXG4gICAgICAvLyBuZWVkIHRvIGRlc3Ryb3kgY3VycmVudCB0aGlzLnNrZXRjaFZpZXdNb2RlbCBhbmQgcmVjcmVhdGUgaXQsIGRvbnQndCBjaGFuZ2UgdGhpcy5za2V0Y2hWaWV3TW9kZWwudmlldywgYmVjYXVzZSB3ZSBuZWVkIHRvIGJpbmQgdmlldyBrZXlkb3duL2tleXVwIGV2ZW50cyBiZWZvcmUgaW5pdCBza2V0Y2hWaWV3TW9kZWxcbiAgICAgIHRoaXMuZGVzdHJveVNrZXRjaFZpZXdNb2RlbEFuZFJlbGVhc2VIYW5kbGVzKClcbiAgICAgIHRoaXMuaW5pdGlhbFNrZXRjaFRvb2woKVxuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5pc0FjdGl2ZSAmJiB0aGlzLmN1cnJlbnRBY3RpdmVUb29sKSB7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCh0aGlzLmN1cnJlbnRBY3RpdmVUb29sKVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHByZXZTdGF0ZS5pc0FjdGl2ZSAhPT0gdGhpcy5zdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgLy8gYWN0aXZlIGNoYW5nZVxuICAgICAgdGhpcy5pbml0aWFsU2tldGNoVG9vbCgpXG4gICAgICBpZiAodGhpcy5zdGF0ZS5pc0FjdGl2ZSkge1xuICAgICAgICAvLyBjaGFuZ2UgZnJvbSBpbmFjdGl2ZSB0byBhY3RpdmVcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUb29sRm9yU2tldGNoVmlld01vZGVsKHRoaXMuY3VycmVudEFjdGl2ZVRvb2wpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjaGFuZ2UgZnJvbSBhY3RpdmUgdG8gaW5hY3RpdmVcbiAgICAgICAgdGhpcy5kZXN0cm95U2tldGNoVmlld01vZGVsQW5kUmVsZWFzZUhhbmRsZXMoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudHJ5VXBkYXRlQWN0aXZlVG9vbEluZm9XaGVuUHJvcHNDaGFuZ2UocHJldlByb3BzKVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCkge1xuICAgIHRoaXMuZGVzdHJveVNrZXRjaFZpZXdNb2RlbEFuZFJlbGVhc2VIYW5kbGVzKClcbiAgICB0aGlzLnJlbGVhc2VTaGlmdEN0cmxLZXlzRXZlbnRMaXN0ZW5lcnMoKVxuICB9XG5cbiAgdG9nZ2xlSXNTZWxlY3RBY3RpdmUgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc0FjdGl2ZTogIXRoaXMuc3RhdGUuaXNBY3RpdmVcbiAgICB9LCAoKSA9PiB7XG4gICAgICB0aGlzLnRyeVVwZGF0ZUFjdGl2ZVRvb2xJbmZvV2hlblN0YXRlQ2hhbmdlKClcbiAgICB9KVxuICB9XG5cbiAgb25DbGlja0xvYWRpbmdQcm9ncmVzcyA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5hY3RpdmVKaW11TWFwVmlldykge1xuICAgICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldy5jYW5jZWxTZWxlY3RCeVF1ZXJ5KClcbiAgICB9XG4gIH1cblxuICBnZXRTZWxlY3RUb29sSWNvbiA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ1BvaW50Jykge1xuICAgICAgcmV0dXJuIFNlbGVjdFBvaW50SWNvblxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ1JlY3RhbmdsZScpIHtcbiAgICAgIHJldHVybiBTZWxlY3RSZWN0YW5nbGVJY29uXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGFzc28nKSB7XG4gICAgICByZXR1cm4gU2VsZWN0TGFzc29JY29uXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnQ2lyY2xlJykge1xuICAgICAgcmV0dXJuIFNlbGVjdENpcmNsZUljb25cbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdMaW5lJykge1xuICAgICAgcmV0dXJuIFNlbGVjdExpbmVJY29uXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBTZWxlY3RSZWN0YW5nbGVJY29uXG4gICAgfVxuICB9XG5cbiAgZ2V0U2VsZWN0SWNvblRpdGxlICgpIHtcbiAgICBsZXQgdG9wVGl0bGU6IHN0cmluZyA9ICcnXG5cbiAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ1BvaW50Jykge1xuICAgICAgdG9wVGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1NlbGVjdGlvbkJ5UG9pbnQnKVxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50U2VsZWN0VHlwZSA9PT0gJ1JlY3RhbmdsZScpIHtcbiAgICAgIHRvcFRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdTZWxlY3Rpb25CeVJlY3RhbmdsZScpXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGFzc28nKSB7XG4gICAgICB0b3BUaXRsZSA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnU2VsZWN0aW9uQnlMYXNzbycpXG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnQ2lyY2xlJykge1xuICAgICAgdG9wVGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1NlbGVjdGlvbkJ5Q2lyY2xlJylcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdMaW5lJykge1xuICAgICAgdG9wVGl0bGUgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ1NlbGVjdGlvbkJ5TGluZScpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRvcFRpdGxlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdTZWxlY3RMYWJlbCcpXG4gICAgfVxuXG4gICAgY29uc3QgbmV3U2VsZWN0aW9uID0gdGhpcy5mb3JtYXRNZXNzYWdlKCduZXdTZWxlY3Rpb24nKVxuICAgIGNvbnN0IGFkZFRvQ3VycmVudFNlbGVjdGlvbiA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnYWRkVG9DdXJyZW50U2VsZWN0aW9uJylcbiAgICBjb25zdCByZW1vdmVGcm9tQ3VycmVudFNlbGVjdGlvbiA9IHRoaXMuZm9ybWF0TWVzc2FnZSgncmVtb3ZlRnJvbUN1cnJlbnRTZWxlY3Rpb24nKVxuICAgIGNvbnN0IHNlbGVjdEZyb21DdXJyZW50U2VsZWN0aW9uID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdzZWxlY3RGcm9tQ3VycmVudFNlbGVjdGlvbicpXG4gICAgY29uc3QgZHJhd1NoYXBlID0gdGhpcy5mb3JtYXRNZXNzYWdlKCdkcmF3U2hhcGUnKVxuICAgIGNvbnN0IGRyYXcgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoJ2RyYXcnKVxuICAgIGNvbnN0IGN0cmxLZXkgPSB0aGlzLmlzTWFjID8gJ0NtZCcgOiAnQ3RybCdcblxuICAgIGNvbnN0IG5ld1NlbGVjdGlvblRpcCA9IGDiiJkgJHtuZXdTZWxlY3Rpb259ICgke2RyYXdTaGFwZX0pYFxuICAgIGNvbnN0IGFkZFRvQ3VycmVudFNlbGVjdGlvblRpcCA9IGDiiJkgJHthZGRUb0N1cnJlbnRTZWxlY3Rpb259IChTaGlmdCArICR7ZHJhd30pYFxuICAgIGNvbnN0IHJlbW92ZUZyb21DdXJyZW50U2VsZWN0aW9uVGlwID0gYOKImSAke3JlbW92ZUZyb21DdXJyZW50U2VsZWN0aW9ufSAoJHtjdHJsS2V5fSArICR7ZHJhd30pYFxuICAgIGNvbnN0IHNlbGVjdEZyb21DdXJyZW50U2VsZWN0aW9uVGlwID0gYOKImSAke3NlbGVjdEZyb21DdXJyZW50U2VsZWN0aW9ufSAoU2hpZnQgKyAke2N0cmxLZXl9ICsgJHtkcmF3fSlgXG5cbiAgICBjb25zdCBmaW5hbFRpdGxlID1cbiAgICBgJHt0b3BUaXRsZX1cbiR7bmV3U2VsZWN0aW9uVGlwfVxuJHthZGRUb0N1cnJlbnRTZWxlY3Rpb25UaXB9XG4ke3JlbW92ZUZyb21DdXJyZW50U2VsZWN0aW9uVGlwfVxuJHtzZWxlY3RGcm9tQ3VycmVudFNlbGVjdGlvblRpcH1cbiAgICBgXG5cbiAgICByZXR1cm4gZmluYWxUaXRsZVxuICB9XG5cbiAgZm9ybWF0TWVzc2FnZSAoc3RySWQ6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzdHJJZCwgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlc1tzdHJJZF0gfSlcbiAgfVxuXG4gIHRvZ2dsZVNlbGVjdFR5cGVQb3B1cCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGlzU2hvd1NlbGVjdFR5cGVQb3B1cDogIXRoaXMuc3RhdGUuaXNTaG93U2VsZWN0VHlwZVBvcHVwXG4gICAgfSwgKCkgPT4ge1xuICAgICAgdGhpcy50cnlVcGRhdGVBY3RpdmVUb29sSW5mb1doZW5TdGF0ZUNoYW5nZSgpXG4gICAgfSlcbiAgfVxuXG4gIHRyeVVwZGF0ZUFjdGl2ZVRvb2xJbmZvV2hlblN0YXRlQ2hhbmdlICgpIHtcbiAgICBjb25zdCBwcmV2U2VsZWN0SXNBY3RpdmVUb29sID0gdGhpcy5wcm9wcy5hY3RpdmVUb29sSW5mbz8uYWN0aXZlVG9vbE5hbWUgPT09IHRoaXMucHJvcHMudG9vbE5hbWVcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0SXNBY3RpdmVUb29sID0gISEodGhpcy5zdGF0ZS5pc0FjdGl2ZSB8fCB0aGlzLnN0YXRlLmlzU2hvd1NlbGVjdFR5cGVQb3B1cClcblxuICAgIGlmICghcHJldlNlbGVjdElzQWN0aXZlVG9vbCAmJiBjdXJyZW50U2VsZWN0SXNBY3RpdmVUb29sKSB7XG4gICAgICAvLyBzZWxlY3QgY2hhbmdlcyB0byBhY3RpdmUgdG9vbFxuICAgICAgdGhpcy5wcm9wcy5vbkFjdGl2ZVRvb2xJbmZvQ2hhbmdlKHtcbiAgICAgICAgYWN0aXZlVG9vbE5hbWU6IHRoaXMucHJvcHMudG9vbE5hbWUsXG4gICAgICAgIGFjdGl2ZVRvb2xUaXRsZTogdGhpcy5wcm9wcy50b29sTmFtZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHByZXZTZWxlY3RJc0FjdGl2ZVRvb2wgJiYgIWN1cnJlbnRTZWxlY3RJc0FjdGl2ZVRvb2wpIHtcbiAgICAgIC8vIHNlbGVjdCBjaGFuZ2VzIHRvIGluYWN0aXZlIHRvb2xcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIGlzU2hvd1NlbGVjdFR5cGVQb3B1cDogZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMucHJvcHMub25BY3RpdmVUb29sSW5mb0NoYW5nZShudWxsKVxuICAgIH1cbiAgfVxuXG4gIHRyeVVwZGF0ZUFjdGl2ZVRvb2xJbmZvV2hlblByb3BzQ2hhbmdlIChwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3QgcHJlQWN0aXZlVG9vbE5hbWUgPSBwcmV2UHJvcHM/LmFjdGl2ZVRvb2xJbmZvPy5hY3RpdmVUb29sTmFtZSB8fCAnJ1xuICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVUb29sTmFtZSA9IHRoaXMucHJvcHMuYWN0aXZlVG9vbEluZm8/LmFjdGl2ZVRvb2xOYW1lIHx8ICcnXG5cbiAgICBpZiAocHJlQWN0aXZlVG9vbE5hbWUgIT09IGN1cnJlbnRBY3RpdmVUb29sTmFtZSkge1xuICAgICAgLy8gcHJvcHMuYWN0aXZlVG9vbEluZm8uYWN0aXZlVG9vbE5hbWUgY2hhbmdlc1xuICAgICAgY29uc3QgdG9vbE5hbWUgPSB0aGlzLnByb3BzLnRvb2xOYW1lXG4gICAgICBjb25zdCBwcmV2U2VsZWN0SXNBY3RpdmVUb29sID0gcHJlQWN0aXZlVG9vbE5hbWUgPT09IHRvb2xOYW1lXG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0SXNBY3RpdmVUb29sID0gY3VycmVudEFjdGl2ZVRvb2xOYW1lID09PSB0b29sTmFtZVxuXG4gICAgICBpZiAocHJldlNlbGVjdElzQWN0aXZlVG9vbCAmJiAhY3VycmVudFNlbGVjdElzQWN0aXZlVG9vbCkge1xuICAgICAgICAvLyBzZWxlY3QgY2hhbmdlcyB0byBpbmFjdGl2ZSB0b29sXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICBpc1Nob3dTZWxlY3RUeXBlUG9wdXA6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0Q3VycmVudFNlbGVjdFR5cGUgPSAoY3VycmVudFNlbGVjdFR5cGU6IGFueSkgPT4ge1xuICAgIHRoaXMuaW5pdGlhbFNrZXRjaFRvb2woKVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSAnUG9pbnQnKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwoJ3BvaW50JylcbiAgICAgIHRoaXMuY3VycmVudEFjdGl2ZVRvb2wgPSAncG9pbnQnXG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSAnUmVjdGFuZ2xlJykge1xuICAgICAgdGhpcy5zZXRBY3RpdmVUb29sRm9yU2tldGNoVmlld01vZGVsKCdyZWN0YW5nbGUnKVxuICAgICAgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCA9ICdyZWN0YW5nbGUnXG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGFzc28nKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwoJ3BvbHlnb24nKVxuICAgICAgdGhpcy5jdXJyZW50QWN0aXZlVG9vbCA9ICdwb2x5Z29uJ1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50U2VsZWN0VHlwZSA9PT0gJ0NpcmNsZScpIHtcbiAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCgnY2lyY2xlJylcbiAgICAgIHRoaXMuY3VycmVudEFjdGl2ZVRvb2wgPSAnY2lyY2xlJ1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50U2VsZWN0VHlwZSA9PT0gJ0xpbmUnKSB7XG4gICAgICB0aGlzLnNldEFjdGl2ZVRvb2xGb3JTa2V0Y2hWaWV3TW9kZWwoJ3BvbHlsaW5lJylcbiAgICAgIHRoaXMuY3VycmVudEFjdGl2ZVRvb2wgPSAncG9seWxpbmUnXG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjdXJyZW50U2VsZWN0VHlwZTogY3VycmVudFNlbGVjdFR5cGUsXG4gICAgICBpc1Nob3dTZWxlY3RUeXBlUG9wdXA6IGZhbHNlLFxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgZGVzdHJveVNrZXRjaFZpZXdNb2RlbEFuZFJlbGVhc2VIYW5kbGVzICgpIHtcbiAgICB0aGlzLnJlbGVhc2VWaWV3SGFuZGxlcygpXG5cbiAgICBpZiAodGhpcy5za2V0Y2hWaWV3TW9kZWwpIHtcbiAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsLmRlc3Ryb3koKVxuICAgICAgdGhpcy5za2V0Y2hWaWV3TW9kZWwgPSBudWxsXG4gICAgfVxuXG4gICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldyA9IG51bGxcbiAgfVxuXG4gIHJlbGVhc2VWaWV3SGFuZGxlcyAoKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlSmltdU1hcFZpZXcpIHtcbiAgICAgIHRoaXMuYWN0aXZlSmltdU1hcFZpZXcucmVtb3ZlU2VsZWN0QnlRdWVyeVByb2dyZXNzQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkppbXVNYXBWaWV3U2VsZWN0UHJvZ3Jlc3NDaGFuZ2UpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlld0tleURvd25IYW5kbGUpIHtcbiAgICAgIHRoaXMudmlld0tleURvd25IYW5kbGUucmVtb3ZlKClcbiAgICAgIHRoaXMudmlld0tleURvd25IYW5kbGUgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudmlld0tleVVwSGFuZGxlKSB7XG4gICAgICB0aGlzLnZpZXdLZXlVcEhhbmRsZS5yZW1vdmUoKVxuICAgICAgdGhpcy52aWV3S2V5VXBIYW5kbGUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgb25KaW11TWFwVmlld1NlbGVjdFByb2dyZXNzQ2hhbmdlID0gKHByb2dyZXNzKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzZWxlY3RQcm9ncmVzczogcHJvZ3Jlc3NcbiAgICB9KVxuICB9XG5cbiAgdXNlU2hpZnRLZXkgKHRvbGVhcm5hY2VNczogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudXNlS2V5KHRoaXMubGFzdFNoaWZ0S2V5RXZlbnRJbmZvLCB0b2xlYXJuYWNlTXMpXG4gIH1cblxuICB1c2VDdHJsS2V5ICh0b2xlYXJuYWNlTXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnVzZUtleSh0aGlzLmxhc3RDdHJsS2V5RXZlbnRJbmZvLCB0b2xlYXJuYWNlTXMpXG4gIH1cblxuICB1c2VLZXkgKGxhc3RLZXlFdmVudEluZm86IExhc3RLZXlFdmVudEluZm8sIHRvbGVhcm5hY2VNczogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKGxhc3RLZXlFdmVudEluZm8pIHtcbiAgICAgIGlmIChsYXN0S2V5RXZlbnRJbmZvLmlzS2V5RG93bikge1xuICAgICAgICAvLyBrZXkgaXMgc3RpbGwgZG93biBhbmQgbm90IHVwLCByZXR1cm4gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8ga2V5IGlzIHVwLCB3ZSB1c2UgdG9sZWFybmFjZU1zIHRvIGRldGVyaW5lIHRoZSByZXR1cm4gdmFsdWVcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gRGF0ZS5ub3coKSAtIGxhc3RLZXlFdmVudEluZm8uZXZlbnREYXRlLmdldFRpbWUoKVxuXG4gICAgICAgIGlmIChkZWx0YVRpbWUgPD0gdG9sZWFybmFjZU1zKSB7XG4gICAgICAgICAgLy8ga2V5dXAgdGltZSBpcyBub3QgdG9vIGxvbmcgZnJvbSBub3dcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGtleXVwIHRpbWUgaXMgdG9vIGxvbmcgZnJvbSBub3dzXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8ga2V5IG5ldmVyIGRvd24sIHJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYmluZFNoaWZ0Q3RybEtleXNFdmVudExpc3RlbmVycyAoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLCB0cnVlKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLCB0cnVlKVxuICB9XG5cbiAgcmVsZWFzZVNoaWZ0Q3RybEtleXNFdmVudExpc3RlbmVycyAoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duLCB0cnVlKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwLCB0cnVlKVxuICB9XG5cbiAgb25LZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ1NoaWZ0Jykge1xuICAgICAgdGhpcy5sYXN0U2hpZnRLZXlFdmVudEluZm8gPSB7XG4gICAgICAgIGV2ZW50RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgaXNLZXlEb3duOiB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgodGhpcy5pc01hYyAmJiBldmVudC5rZXkgPT09ICdNZXRhJykgfHwgKCF0aGlzLmlzTWFjICYmIGV2ZW50LmtleSA9PT0gJ0NvbnRyb2wnKSkge1xuICAgICAgdGhpcy5sYXN0Q3RybEtleUV2ZW50SW5mbyA9IHtcbiAgICAgICAgZXZlbnREYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpc0tleURvd246IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbktleVVwID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ1NoaWZ0Jykge1xuICAgICAgdGhpcy5sYXN0U2hpZnRLZXlFdmVudEluZm8gPSB7XG4gICAgICAgIGV2ZW50RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgaXNLZXlEb3duOiBmYWxzZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHRoaXMuaXNNYWMgJiYgZXZlbnQua2V5ID09PSAnTWV0YScpIHx8ICghdGhpcy5pc01hYyAmJiBldmVudC5rZXkgPT09ICdDb250cm9sJykpIHtcbiAgICAgIHRoaXMubGFzdEN0cmxLZXlFdmVudEluZm8gPSB7XG4gICAgICAgIGV2ZW50RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgaXNLZXlEb3duOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluaXRpYWxTa2V0Y2hUb29sICgpIHtcbiAgICBpZiAoIXRoaXMuU2tldGNoVmlld01vZGVsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2tldGNoVmlld01vZGVsKSB7XG4gICAgICB0aGlzLnJlbGVhc2VWaWV3SGFuZGxlcygpXG5cbiAgICAgIGNvbnN0IGppbXVNYXBWaWV3ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlld1xuICAgICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldyA9IGppbXVNYXBWaWV3XG4gICAgICB0aGlzLmFjdGl2ZUppbXVNYXBWaWV3LmFkZFNlbGVjdEJ5UXVlcnlQcm9ncmVzc0NoYW5nZUxpc3RlbmVyKHRoaXMub25KaW11TWFwVmlld1NlbGVjdFByb2dyZXNzQ2hhbmdlKVxuXG4gICAgICBjb25zdCB2aWV3ID0gamltdU1hcFZpZXcudmlld1xuXG4gICAgICB0aGlzLnZpZXdLZXlEb3duSGFuZGxlID0gdmlldy5vbigna2V5LWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ1NoaWZ0Jykge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHRoaXMudmlld0tleURvd25IYW5kbGUgPSB2aWV3Lm9uKCdrZXktdXAnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ1NoaWZ0Jykge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsID0gbmV3IHRoaXMuU2tldGNoVmlld01vZGVsKHtcbiAgICAgICAgdmlldzogdmlldyxcbiAgICAgICAgbGF5ZXI6IG5ldyB0aGlzLkdyYXBoaWNzTGF5ZXIoKSxcbiAgICAgICAgcG9pbnRTeW1ib2w6IHRoaXMuanNvblV0aWxzLmZyb21KU09OKGRlZmF1bHRQb2ludFN5bWJvbCkgYXMgYW55LFxuICAgICAgICBwb2x5bGluZVN5bWJvbDogdGhpcy5qc29uVXRpbHMuZnJvbUpTT04oZGVmYXVsdFBvbHlsaW5lU3ltYm9sKSBhcyBhbnksXG4gICAgICAgIHBvbHlnb25TeW1ib2w6IHRoaXMuanNvblV0aWxzLmZyb21KU09OKGRlZmF1bHRQb2x5Z29uU3ltYm9sKSBhcyBhbnlcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsLm9uKCdjcmVhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgICAgLy8ga2VlcCBjb250aW51b3VzIGRyYXdpbmcgZm9yIFNrZXRjaFZpZXdNb2RlbFxuICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCh0aGlzLmN1cnJlbnRBY3RpdmVUb29sKVxuXG4gICAgICAgICAgY29uc3QgamltdU1hcFZpZXcgPSB0aGlzLnByb3BzLmppbXVNYXBWaWV3XG4gICAgICAgICAgamltdU1hcFZpZXcudmlldy5jbG9zZVBvcHVwKClcblxuICAgICAgICAgIGNvbnN0IGdyYXBoaWMgPSBldmVudC5ncmFwaGljXG5cbiAgICAgICAgICAvLyBncmFwaGljLmdlb21ldHJ5IGlzIG51bGwgd2hlbiBkb3VibGUgY2xpY2sgbWFwXG4gICAgICAgICAgaWYgKCFncmFwaGljLmdlb21ldHJ5KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2tldGNoIGdyYXBoaWMuZ2VvbWV0cnkgaXMgbnVsbCcpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB1c2VLZXlUb2xlcmFuY2VNcyA9IDUwMFxuICAgICAgICAgIGNvbnN0IGlzU2hpZnRLZXkgPSB0aGlzLnVzZVNoaWZ0S2V5KHVzZUtleVRvbGVyYW5jZU1zKVxuICAgICAgICAgIGNvbnN0IGlzQ3RybEtleSA9IHRoaXMudXNlQ3RybEtleSh1c2VLZXlUb2xlcmFuY2VNcylcblxuICAgICAgICAgIGxldCBzZWxlY3Rpb25Nb2RlID0gRGF0YVNvdXJjZVNlbGVjdGlvbk1vZGUuTmV3XG5cbiAgICAgICAgICBpZiAoaXNTaGlmdEtleSkge1xuICAgICAgICAgICAgaWYgKGlzQ3RybEtleSkge1xuICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gRGF0YVNvdXJjZVNlbGVjdGlvbk1vZGUuU2VsZWN0RnJvbUN1cnJlbnRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGVjdGlvbk1vZGUgPSBEYXRhU291cmNlU2VsZWN0aW9uTW9kZS5BZGRUb0N1cnJlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzQ3RybEtleSkge1xuICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlID0gRGF0YVNvdXJjZVNlbGVjdGlvbk1vZGUuUmVtb3ZlRnJvbUN1cnJlbnRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNlbGVjdGlvbk1vZGUgPSBEYXRhU291cmNlU2VsZWN0aW9uTW9kZS5OZXdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBqaW11TWFwVmlldy5zZWxlY3RGZWF0dXJlc0J5R3JhcGhpYyhncmFwaGljLCB0aGlzLnN0YXRlLnNwYXRpYWxSZWxhdGlvbnNoaXAsIHNlbGVjdGlvbk1vZGUpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgc2V0QWN0aXZlVG9vbEZvclNrZXRjaFZpZXdNb2RlbCAoYWN0aXZlVG9vbDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuc2tldGNoVmlld01vZGVsKSB7XG4gICAgICBjb25zdCBjcmVhdGVPcHRpb25zID0gdGhpcy5za2V0Q2hDcmVhdGVPcHRpb25zW2FjdGl2ZVRvb2xdXG5cbiAgICAgIGlmIChjcmVhdGVPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsLmNyZWF0ZShhY3RpdmVUb29sIGFzIGFueSwgY3JlYXRlT3B0aW9ucylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2tldGNoVmlld01vZGVsLmNyZWF0ZShhY3RpdmVUb29sIGFzIGFueSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbGVhclNlbGVjdCA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmNsZWFyU2VsZWN0ZWRGZWF0dXJlcygpXG4gIH1cblxuICBvblBvcHBlclRvZ2dsZSA9IChlOiBhbnkpID0+IHtcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdFR5cGVQb3B1cCgpXG5cbiAgICBpZiAoZSkge1xuICAgICAgaWYgKGUudHlwZSA9PT0gJ2tleWRvd24nICYmIGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICB0aGlzLmJ0blNlbGVjdFR5cGVDb250YWluZXIuZm9jdXMoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUtleURvd24gPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudDxhbnk+LCBzZWxlY3RUeXBlOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xuICAgICAgdGhpcy5zZXRDdXJyZW50U2VsZWN0VHlwZShzZWxlY3RUeXBlKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qgc2VsZWN0SWNvblRpdGxlID0gdGhpcy5nZXRTZWxlY3RJY29uVGl0bGUoKVxuICAgIGNvbnN0IGNsZWFyU2VsZWN0aW9uVGl0bGUgPSB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnY2xlYXJTZWxlY3Rpb24nLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLmNsZWFyU2VsZWN0aW9uIH0pXG4gICAgY29uc3QgaXNTZWxlY3RpbmcgPSB0aGlzLnN0YXRlLnNlbGVjdFByb2dyZXNzID4gMCAmJiB0aGlzLnN0YXRlLnNlbGVjdFByb2dyZXNzIDwgMVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY3NzPXt0aGlzLmdldENTU1N0eWxlKCl9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHNlbGVjdC10b29sLWNvbnRhaW5lcicgcmVmPXtyZWYgPT4geyB0aGlzLmJ0bkNvbnRhaW5lciA9IHJlZiB9fT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4Jz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXgnIHRpdGxlPXtzZWxlY3RJY29uVGl0bGV9PlxuICAgICAgICAgICAgICB7IWlzU2VsZWN0aW5nICYmIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUlzU2VsZWN0QWN0aXZlfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZXNyaS13aWRnZXQtLWJ1dHRvbiAgYm9yZGVyLTAgc2VsZWN0LXRvb2wtYnRuIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LWNlbnRlcicsXG4gICAgICAgICAgICAgICAgICB7IGFjdGl2ZTogdGhpcy5zdGF0ZS5pc0FjdGl2ZSB9KX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuc2tldGNoSW5pdGlhbGVkfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBpY29uPXt0aGlzLmdldFNlbGVjdFRvb2xJY29uKCl9IC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPn1cbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlzU2VsZWN0aW5nICYmIDxTZWxlY3RQcm9ncmVzcyBwcm9ncmVzcz17dGhpcy5zdGF0ZS5zZWxlY3RQcm9ncmVzc30gaW50bD17dGhpcy5wcm9wcy5pbnRsfSB0aGVtZT17dGhpcy5wcm9wcy50aGVtZX0gb25DbGljaz17dGhpcy5vbkNsaWNrTG9hZGluZ1Byb2dyZXNzfSAvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNlbGVjdFR5cGVQb3B1cH0gc3R5bGU9e3sgd2lkdGg6IDE4IH19XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdlc3JpLXdpZGdldC0tYnV0dG9uIGJvcmRlci0wIHBsLTEgcHItMSBzZWxlY3QtdG9vbC1idG4gZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgIHsgYWN0aXZlOiB0aGlzLnN0YXRlLmlzU2hvd1NlbGVjdFR5cGVQb3B1cCB9KX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuc2tldGNoSW5pdGlhbGVkfVxuICAgICAgICAgICAgICAgIHJlZj17cmVmID0+IHsgdGhpcy5idG5TZWxlY3RUeXBlQ29udGFpbmVyID0gcmVmIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SWNvbiB3aWR0aD17OH0gaGVpZ2h0PXs4fSBpY29uPXtJY29uQXJyb3dEb3dufSAvPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0aXRsZT17Y2xlYXJTZWxlY3Rpb25UaXRsZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC1idG4gZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHNlbGVjdC10b29sLWJ0bi1ob3ZlciBlc3JpLXdpZGdldC0tYnV0dG9uIGJvcmRlci0wJ1xuICAgICAgICAgICAgICByZWY9e3JlZiA9PiB7IHRoaXMuc2VsZWN0UmVzdWx0Q29udGFpbmVyID0gcmVmIH19IG9uQ2xpY2s9e3RoaXMuY2xlYXJTZWxlY3R9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0Q2xlYXJJY29ufSAvPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8UG9wcGVyIGNzcz17dGhpcy5nZXRDU1NTdHlsZSgpfSByZWZlcmVuY2U9e3RoaXMuYnRuQ29udGFpbmVyfSBvcGVuPXt0aGlzLnN0YXRlLmlzU2hvd1NlbGVjdFR5cGVQb3B1cH0gcGxhY2VtZW50PSdib3R0b20tc3RhcnQnIHRvZ2dsZT17dGhpcy5vblBvcHBlclRvZ2dsZX0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwLTQgY29udGVudC1iZycgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyB9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGVudC10aXRsZSc+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvblRvb2wnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2wgfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J210LTIgbWItMic+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IG1iLTInPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzZWxlY3QtdG9vbC10eXBlIG1yLTIgZC1mbGV4IGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHNlbGVjdC10b29sLWJ0bi1ob3ZlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnUmVjdGFuZ2xlJ1xuICAgICAgICAgICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ1JlY3RhbmdsZScpIH19IG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlS2V5RG93bihlLCAnUmVjdGFuZ2xlJykgfX0gcm9sZT0nYnV0dG9uJyB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0UmVjdGFuZ2xlSWNvbn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NlbGVjdC10b29sLXR5cGUtdGV4dCBtdC0xIHctMTAwIHRleHQtdHJ1bmNhdGUgcGwtMSBwci0xIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sUmVjdGFuZ2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sUmVjdGFuZ2xlIH0pfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbFJlY3RhbmdsZScsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuU2VsZWN0aW9uVG9vbFJlY3RhbmdsZSB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3NlbGVjdC10b29sLXR5cGUgbXItMiBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgc2VsZWN0LXRvb2wtYnRuLWhvdmVyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdC10b29sLXR5cGUtY2hvb3NlZCc6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdMYXNzbydcbiAgICAgICAgICAgICAgICAgICAgICB9KX0gb25DbGljaz17KCkgPT4geyB0aGlzLnNldEN1cnJlbnRTZWxlY3RUeXBlKCdMYXNzbycpIH19IG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlS2V5RG93bihlLCAnTGFzc28nKSB9fSByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBpY29uPXtTZWxlY3RMYXNzb0ljb259IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC10eXBlLXRleHQgbXQtMSB3LTEwMCB0ZXh0LXRydW5jYXRlIHBsLTEgcHItMSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbExhc3NvJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sTGFzc28gfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sTGFzc28nLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xMYXNzbyB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3NlbGVjdC10b29sLXR5cGUgZC1mbGV4IGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHNlbGVjdC10b29sLWJ0bi1ob3ZlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnQ2lyY2xlJ1xuICAgICAgICAgICAgICAgICAgICAgIH0pfSBvbkNsaWNrPXsoKSA9PiB7IHRoaXMuc2V0Q3VycmVudFNlbGVjdFR5cGUoJ0NpcmNsZScpIH19IG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlS2V5RG93bihlLCAnQ2lyY2xlJykgfX0gcm9sZT0nYnV0dG9uJyB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0Q2lyY2xlSWNvbn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NlbGVjdC10b29sLXR5cGUtdGV4dCBtdC0xIHctMTAwIHRleHQtdHJ1bmNhdGUgcGwtMSBwci0xIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sQ2lyY2xlJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sQ2lyY2xlIH0pfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbENpcmNsZScsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuU2VsZWN0aW9uVG9vbENpcmNsZSB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXgnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzZWxlY3QtdG9vbC10eXBlIG1yLTIgZC1mbGV4IGZsZXgtY29sdW1uIGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHNlbGVjdC10b29sLWJ0bi1ob3ZlcicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzZWxlY3QtdG9vbC10eXBlLWNob29zZWQnOiB0aGlzLnN0YXRlLmN1cnJlbnRTZWxlY3RUeXBlID09PSAnTGluZSdcbiAgICAgICAgICAgICAgICAgICAgICB9KX0gb25DbGljaz17KCkgPT4geyB0aGlzLnNldEN1cnJlbnRTZWxlY3RUeXBlKCdMaW5lJykgfX0gb25LZXlEb3duPXtlID0+IHsgdGhpcy5oYW5kbGVLZXlEb3duKGUsICdMaW5lJykgfX0gcm9sZT0nYnV0dG9uJyB0YWJJbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0TGluZUljb259IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC10eXBlLXRleHQgbXQtMSB3LTEwMCB0ZXh0LXRydW5jYXRlIHBsLTEgcHItMSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbExpbmUnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xMaW5lIH0pfVxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbExpbmUnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xMaW5lIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnc2VsZWN0LXRvb2wtdHlwZSBkLWZsZXggZmxleC1jb2x1bW4gYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgc2VsZWN0LXRvb2wtYnRuLWhvdmVyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3NlbGVjdC10b29sLXR5cGUtY2hvb3NlZCc6IHRoaXMuc3RhdGUuY3VycmVudFNlbGVjdFR5cGUgPT09ICdQb2ludCdcbiAgICAgICAgICAgICAgICAgICAgICB9KX0gb25DbGljaz17KCkgPT4geyB0aGlzLnNldEN1cnJlbnRTZWxlY3RUeXBlKCdQb2ludCcpIH19IG9uS2V5RG93bj17ZSA9PiB7IHRoaXMuaGFuZGxlS2V5RG93bihlLCAnUG9pbnQnKSB9fSByb2xlPSdidXR0b24nIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE2fSBoZWlnaHQ9ezE2fSBpY29uPXtTZWxlY3RQb2ludEljb259IC8+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC10eXBlLXRleHQgbXQtMSB3LTEwMCB0ZXh0LXRydW5jYXRlIHBsLTEgcHItMSBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnU2VsZWN0aW9uVG9vbFBvaW50JywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Ub29sUG9pbnQgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Ub29sUG9pbnQnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblRvb2xQb2ludCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGVudC10aXRsZSc+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvbk1vZGUnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvbk1vZGUgfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIG10LTInPlxuICAgICAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBjdXJzb3I6ICdwb2ludGVyJyB9fSBjaGVja2VkPXt0aGlzLnN0YXRlLnNwYXRpYWxSZWxhdGlvbnNoaXAgPT09ICdpbnRlcnNlY3RzJ31cbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4geyB0aGlzLnNldFN0YXRlKHsgc3BhdGlhbFJlbGF0aW9uc2hpcDogJ2ludGVyc2VjdHMnIH0pIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J20tMCBtbC0yIGNvbnRlbnQtdGl0bGUnIHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19IG9uQ2xpY2s9eygpID0+IHsgdGhpcy5zZXRTdGF0ZSh7IHNwYXRpYWxSZWxhdGlvbnNoaXA6ICdpbnRlcnNlY3RzJyB9KSB9fT5cbiAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvbldpdGhpbicsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuU2VsZWN0aW9uV2l0aGluIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBtdC0yJz5cbiAgICAgICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgY3Vyc29yOiAncG9pbnRlcicgfX0gY2hlY2tlZD17dGhpcy5zdGF0ZS5zcGF0aWFsUmVsYXRpb25zaGlwID09PSAnY29udGFpbnMnfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB7IHRoaXMuc2V0U3RhdGUoeyBzcGF0aWFsUmVsYXRpb25zaGlwOiAnY29udGFpbnMnIH0pIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J20tMCBtbC0yIGNvbnRlbnQtdGl0bGUnIHN0eWxlPXt7IGN1cnNvcjogJ3BvaW50ZXInIH19IG9uQ2xpY2s9eygpID0+IHsgdGhpcy5zZXRTdGF0ZSh7IHNwYXRpYWxSZWxhdGlvbnNoaXA6ICdjb250YWlucycgfSkgfX0+XG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25Db250YWluJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25Db250YWluIH0pfVxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Qb3BwZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgeyghdGhpcy5zdGF0ZS5za2V0Y2hJbml0aWFsZWQpICYmIDxkaXYgY2xhc3NOYW1lPSdzZWxlY3QtdG9vbC1sb2FkZXInIC8+fVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGNzcywganN4LCBSZWFjdCwgdHlwZSBJbnRsU2hhcGUsIHR5cGUgSU1UaGVtZVZhcmlhYmxlcyB9IGZyb20gJ2ppbXUtY29yZSdcbmltcG9ydCB7IFByb2dyZXNzLCBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBwcm9ncmVzczogbnVtYmVyXG4gIGludGw6IEludGxTaGFwZVxuICB0aGVtZTogSU1UaGVtZVZhcmlhYmxlc1xuICBvbkNsaWNrOiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcz4ge1xuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBnZXRTdHlsZSAoKSB7XG4gICAgY29uc3QgcHJvZ3Jlc3NDb2xvciA9IHRoaXMucHJvcHMudGhlbWUuZGFya1RoZW1lID8gJ2JsYWNrJyA6ICd3aGl0ZSdcblxuICAgIHJldHVybiBjc3NgXG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgICAgIC5zZWxlY3QtY2lyY2xlLXByb2dyZXNzIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OiA2cHg7XG4gICAgICAgIHRvcDogNnB4O1xuXG4gICAgICAgIC5wcm9ncmVzcy1jaXJjbGUtYmcge1xuICAgICAgICAgIHN0cm9rZTogJHtwcm9ncmVzc0NvbG9yfTtcbiAgICAgICAgICBvcGFjaXR5OiAwLjM7XG4gICAgICAgIH1cblxuICAgICAgICAucHJvZ3Jlc3MtY2lyY2xlLXByb2dyZXNzIHtcbiAgICAgICAgICBzdHJva2U6ICR7cHJvZ3Jlc3NDb2xvcn07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLXN0b3Age1xuICAgICAgICB3aWR0aDogNnB4O1xuICAgICAgICBoZWlnaHQ6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogJHtwcm9ncmVzc0NvbG9yfTtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLW1hc2sge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG4gICAgYFxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCBwcm9ncmVzcyA9IHRoaXMucHJvcHMucHJvZ3Jlc3MgKiAxMDBcbiAgICBjb25zdCBwcm9ncmVzc0ludCA9IHBhcnNlRmxvYXQocHJvZ3Jlc3MudG9GaXhlZCgyKSlcbiAgICBjb25zdCBkZWZhdWx0U3RyID0gZGVmYXVsdE1lc3NhZ2VzLnNlbGVjdGluZ0ZlYXR1cmVzVGlwXG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLnByb3BzLmludGw/LmZvcm1hdE1lc3NhZ2UoeyBpZDogJ3NlbGVjdGluZ0ZlYXR1cmVzVGlwJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRTdHIgfSkgfHwgZGVmYXVsdFN0clxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxidXR0b24gY3NzPXt0aGlzLmdldFN0eWxlKCl9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja31cbiAgICAgICAgY2xhc3NOYW1lPSdlc3JpLXdpZGdldC0tYnV0dG9uICBib3JkZXItMCBzZWxlY3QtdG9vbC1idG4gZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFjdGl2ZSBzZWxlY3QtcHJvZ3Jlc3MnXG4gICAgICA+XG4gICAgICAgIDxQcm9ncmVzcyBjbGFzc05hbWU9J3NlbGVjdC1jaXJjbGUtcHJvZ3Jlc3MnIGNvbG9yPSdsaWdodCcgdHlwZT0nY2lyY3VsYXInIHZhbHVlPXtwcm9ncmVzc0ludH0gY2lyY2xlU2l6ZT17MjB9IC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcm9ncmVzcy1zdG9wJz48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Byb2dyZXNzLW1hc2snIHRpdGxlPXt0aXRsZX0+PC9kaXY+XG4gICAgICA8L2J1dHRvbj5cbiAgICApXG4gIH1cbn1cbiIsIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgY3NzLCBqc3gsIFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQnV0dG9uLCBJY29uLCBkZWZhdWx0TWVzc2FnZXMgfSBmcm9tICdqaW11LXVpJ1xuaW1wb3J0IHsgQmFzZVRvb2wsIHR5cGUgQmFzZVRvb2xQcm9wcywgdHlwZSBJY29uVHlwZSB9IGZyb20gJy4uLy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IFNlbGVjdGVkTnVtYmVyIH0gZnJvbSAnLi9zZWxlY3RlZC1udW1iZXInXG5cbmNvbnN0IFNlbGVjdFpvb210b0ljb24gPSByZXF1aXJlKCcuLi8uLi9hc3NldHMvaWNvbnMvc2VsZWN0LXRvb2wvc2VsZWN0LXpvb210by5zdmcnKVxuY29uc3QgU2VsZWN0Q2xlYXJJY29uID0gcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL3NlbGVjdC10b29sL3NlbGVjdC1jbGVhci5zdmcnKVxuXG5pbnRlcmZhY2UgU3RhdGVzIHtcbiAgc2VsZWN0ZWRHcmFwaGljQ291bnQ6IG51bWJlclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RTdGF0ZSBleHRlbmRzIEJhc2VUb29sPEJhc2VUb29sUHJvcHMsIFN0YXRlcz4ge1xuICB0b29sTmFtZSA9ICdTZWxlY3RTdGF0ZSdcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzZWxlY3RlZEdyYXBoaWNDb3VudDogMFxuICAgIH1cbiAgfVxuXG4gIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gY3NzYFxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLnByb3BzLnRoZW1lLmFyY2dpcy5jb21wb25lbnRzLmJ1dHRvbi52YXJpYW50cy5kZWZhdWx0LmRlZmF1bHQuYmd9O1xuXG4gICAgICAuZGl2aWRlLWxpbmUge1xuICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAke3RoaXMucHJvcHMudGhlbWUuY29sb3JzLnBhbGV0dGUuZGFya1s0MDBdfTtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgfVxuICAgIGBcbiAgfVxuXG4gIGdldFRpdGxlICgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgaGFuZGxlU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQgPSAoc2VsZWN0ZWRHcmFwaGljQ291bnQ6IG51bWJlcikgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0ZWRHcmFwaGljQ291bnRcbiAgICB9KVxuICB9XG5cbiAgem9vbVRvU2VsZWN0ZWRGZWF0dXJlcyA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldz8udmlld1xuXG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IGdyYXBoaWNzID0gYXdhaXQgdGhpcy5nZXRTZWxlY3RlZEdyYXBoaWNzKClcblxuICAgICAgaWYgKGdyYXBoaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmlldy5nb1RvKGdyYXBoaWNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFNlbGVjdGVkR3JhcGhpY3MgKCkge1xuICAgIGxldCBzZWxlY3RlZEdyYXBoaWNzID0gW11cblxuICAgIGlmICh0aGlzLnByb3BzLmppbXVNYXBWaWV3KSB7XG4gICAgICBzZWxlY3RlZEdyYXBoaWNzID0gYXdhaXQgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5nZXRTZWxlY3RlZEZlYXR1cmVzKClcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZWN0ZWRHcmFwaGljc1xuICB9XG5cbiAgY2xlYXJTZWxlY3RlZEZlYXR1cmVzID0gKCkgPT4ge1xuICAgIHRoaXMucHJvcHMuamltdU1hcFZpZXcuY2xlYXJTZWxlY3RlZEZlYXR1cmVzKClcbiAgfVxuXG4gIGdldEV4cGFuZFBhbmVsICgpOiBKU1guRWxlbWVudCB7XG4gICAgY29uc3Qgc2VsZWN0ZWRGZWF0dXJlc1RpcCA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdTZWxlY3Rpb25TZWxlY3RlZEZlYXR1cmVzJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5TZWxlY3Rpb25TZWxlY3RlZEZlYXR1cmVzIH0pXG4gICAgY29uc3QgY2xlYXJTZWxlY3Rpb25UaXRsZSA9IHRoaXMucHJvcHMuaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICdjbGVhclNlbGVjdGlvbicsIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXMuY2xlYXJTZWxlY3Rpb24gfSlcbiAgICBjb25zdCB6b29tVG9TZWxlY3RlZEZlYXR1cmVzVGlwID0gdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ1NlbGVjdGlvblpvb21Ub1NlbGVjdGVkRmVhdHVyZXMnLCBkZWZhdWx0TWVzc2FnZTogZGVmYXVsdE1lc3NhZ2VzLlNlbGVjdGlvblpvb21Ub1NlbGVjdGVkRmVhdHVyZXMgfSlcblxuICAgIGlmICh0aGlzLnByb3BzLmlzTW9iaWxlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNzcz17dGhpcy5nZXRTdHlsZSgpfSBjbGFzc05hbWU9J3ctMTAwIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXInIHN0eWxlPXt7IGhlaWdodDogJzQwcHgnIH19PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtbC0yJz5cbiAgICAgICAgICAgIHtgJHtzZWxlY3RlZEZlYXR1cmVzVGlwfTogJHt0aGlzLnN0YXRlLnNlbGVjdGVkR3JhcGhpY0NvdW50fWB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2QtZmxleCc+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHRpdGxlPXt6b29tVG9TZWxlY3RlZEZlYXR1cmVzVGlwfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9J2gtMTAwIGJvcmRlciBib3JkZXItdG9wLTAgYm9yZGVyLWJvdHRvbS0wIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlcicgc3R5bGU9e3sgd2lkdGg6ICc0MHB4JywgY3Vyc29yOiAncG9pbnRlcicgfX1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy56b29tVG9TZWxlY3RlZEZlYXR1cmVzfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8SWNvbiB3aWR0aD17MTh9IGhlaWdodD17MTh9IGljb249e1NlbGVjdFpvb210b0ljb259IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPSdoLTEwMCBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXInIHN0eWxlPXt7IHdpZHRoOiAnNDBweCcsIGN1cnNvcjogJ3BvaW50ZXInIH19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xlYXJTZWxlY3RlZEZlYXR1cmVzfVxuICAgICAgICAgICAgICB0aXRsZT17Y2xlYXJTZWxlY3Rpb25UaXRsZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEljb24gd2lkdGg9ezE4fSBoZWlnaHQ9ezE4fSBpY29uPXtTZWxlY3RDbGVhckljb259IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8U2VsZWN0ZWROdW1iZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IG9uU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQ9e3RoaXMuaGFuZGxlU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWR9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLnpvb21Ub1NlbGVjdGVkRmVhdHVyZXN9IHRpdGxlPXt6b29tVG9TZWxlY3RlZEZlYXR1cmVzVGlwfT5cbiAgICAgICAgICAgIDxJY29uIHdpZHRoPXsxNn0gaGVpZ2h0PXsxNn0gaWNvbj17U2VsZWN0Wm9vbXRvSWNvbn0gY2xhc3NOYW1lPSdtci0yJyAvPlxuICAgICAgICAgICAge2Ake3NlbGVjdGVkRmVhdHVyZXNUaXB9OiAke3RoaXMuc3RhdGUuc2VsZWN0ZWRHcmFwaGljQ291bnR9YH1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8U2VsZWN0ZWROdW1iZXIgamltdU1hcFZpZXc9e3RoaXMucHJvcHMuamltdU1hcFZpZXd9IG9uU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQ9e3RoaXMuaGFuZGxlU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWR9IC8+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICApXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBSZWFjdCwgUmVhY3RSZWR1eCwgdHlwZSBJbW11dGFibGVPYmplY3QsIHR5cGUgSmltdU1hcFZpZXdJbmZvLCB0eXBlIElNU3RhdGUsIHR5cGUgRGF0YVNvdXJjZUluZm8gfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEppbXVNYXBWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGppbXVNYXBWaWV3OiBKaW11TWFwVmlld1xuXG4gIG9uU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQ/OiAoc2VsZWN0ZWRHcmFwaGljQ291bnQ6IG51bWJlcikgPT4gdm9pZFxufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbmludGVyZmFjZSBTdGF0ZXN7fVxuXG5jbGFzcyBfU2VsZWN0ZWROdW1iZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFByb3BzICYgRXh0cmFQcm9wcywgU3RhdGVzPiB7XG4gIGN1cnJlbnRKaW11TWFwVmlldzogSmltdU1hcFZpZXdcblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50SmltdU1hcFZpZXcodGhpcy5wcm9wcy5qaW11TWFwVmlldylcbiAgICB0aGlzLmNvbXB1dGVyU2VsZWN0ZWRHcmFwaGljQ291bnQoKVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlIChwcmV2UHJvcHM6IFJlYWRvbmx5PFByb3BzICYgRXh0cmFQcm9wcz4pOiB2b2lkIHtcbiAgICBjb25zdCBwcmVKaW11TWFwVmlldyA9IHByZXZQcm9wcz8uamltdU1hcFZpZXcgfHwgbnVsbFxuICAgIGNvbnN0IGN1cnJKaW11TWFwVmlldyA9IHRoaXMucHJvcHMuamltdU1hcFZpZXcgfHwgbnVsbFxuXG4gICAgaWYgKHByZUppbXVNYXBWaWV3ICE9PSBjdXJySmltdU1hcFZpZXcpIHtcbiAgICAgIC8vIHN3aXRjaCBtYXBcbiAgICAgIHRoaXMuc2V0Q3VycmVudEppbXVNYXBWaWV3KGN1cnJKaW11TWFwVmlldylcbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVyU2VsZWN0ZWRHcmFwaGljQ291bnQoKVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQgKCk6IHZvaWQge1xuICAgIHRoaXMuc2V0Q3VycmVudEppbXVNYXBWaWV3KG51bGwpXG4gIH1cblxuICBzZXRDdXJyZW50SmltdU1hcFZpZXcgKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRKaW11TWFwVmlldykge1xuICAgICAgdGhpcy5jdXJyZW50SmltdU1hcFZpZXcucmVtb3ZlSmltdUxheWVyVmlld1NlbGVjdGVkRmVhdHVyZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uSmltdUxheWVyVmlld1NlbGVjdGVkRmVhdHVyZXNDaGFuZ2UpXG4gICAgfVxuXG4gICAgdGhpcy5jdXJyZW50SmltdU1hcFZpZXcgPSBqaW11TWFwVmlld1xuXG4gICAgaWYgKHRoaXMuY3VycmVudEppbXVNYXBWaWV3KSB7XG4gICAgICB0aGlzLmN1cnJlbnRKaW11TWFwVmlldy5hZGRKaW11TGF5ZXJWaWV3U2VsZWN0ZWRGZWF0dXJlc0NoYW5nZUxpc3RlbmVyKHRoaXMub25KaW11TGF5ZXJWaWV3U2VsZWN0ZWRGZWF0dXJlc0NoYW5nZSlcbiAgICB9XG4gIH1cblxuICBvbkppbXVMYXllclZpZXdTZWxlY3RlZEZlYXR1cmVzQ2hhbmdlID0gKCkgPT4ge1xuICAgIC8vIFR5cGljYWxseSwgdGhpcyBjYWxsYmFjayBtZXRob2QgaXMgY2FsbGVkIHdoZW4gd2UgaGlnaGxpZ2h0IGEgZmVhdHVyZSBieSBwb3B1cCBjbGljaywgYnV0IHRoZSBkYXRhIHNvdXJjZSBpcyBub3QgdXNlZCBhbmQgbm90IGNyZWF0ZWQuXG4gICAgdGhpcy5jb21wdXRlclNlbGVjdGVkR3JhcGhpY0NvdW50KClcbiAgfVxuXG4gIGNvbXB1dGVyU2VsZWN0ZWRHcmFwaGljQ291bnQgKCkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkR3JhcGhpY0NvdW50ID0gdGhpcy5wcm9wcy5qaW11TWFwVmlldy5nZXRTZWxlY3RlZEZlYXR1cmVDb3VudCgpXG4gICAgICB0aGlzLnByb3BzLm9uU2VsZWN0ZWRHcmFwaGljc0NoYW5nZWQoc2VsZWN0ZWRHcmFwaGljQ291bnQpXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IChzdGF0ZTogSU1TdGF0ZSwgb3duUHJvcHM6IFByb3BzKTogRXh0cmFQcm9wcyA9PiB7XG4gIGlmIChzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlcikge1xuICAgIGNvbnN0IGRhdGFTb3VyY2VzSW5mbyA9IHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyICYmIHN0YXRlLmFwcFN0YXRlSW5CdWlsZGVyLmRhdGFTb3VyY2VzSW5mb1xuICAgIGNvbnN0IGppbXVNYXBWaWV3c0luZm8gPSBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlciAmJiBzdGF0ZS5hcHBTdGF0ZUluQnVpbGRlci5qaW11TWFwVmlld3NJbmZvXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFTb3VyY2VzSW5mbzogZGF0YVNvdXJjZXNJbmZvLFxuICAgICAgdmlld0luZm9zOiBqaW11TWFwVmlld3NJbmZvXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGRhdGFTb3VyY2VzSW5mbyA9IHN0YXRlICYmIHN0YXRlLmRhdGFTb3VyY2VzSW5mb1xuICAgIGNvbnN0IGppbXVNYXBWaWV3c0luZm8gPSBzdGF0ZSAmJiBzdGF0ZS5qaW11TWFwVmlld3NJbmZvXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFTb3VyY2VzSW5mbzogZGF0YVNvdXJjZXNJbmZvLFxuICAgICAgdmlld0luZm9zOiBqaW11TWFwVmlld3NJbmZvXG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBFeHRyYVByb3BzIHtcbiAgZGF0YVNvdXJjZXNJbmZvPzogSW1tdXRhYmxlT2JqZWN0PHsgW2RzSWQ6IHN0cmluZ106IERhdGFTb3VyY2VJbmZvIH0+XG4gIHZpZXdJbmZvcz86IEltbXV0YWJsZU9iamVjdDx7IFtqaW11TWFwVmlld0lkOiBzdHJpbmddOiBKaW11TWFwVmlld0luZm8gfT5cbn1cblxuZXhwb3J0IGNvbnN0IFNlbGVjdGVkTnVtYmVyID0gUmVhY3RSZWR1eC5jb25uZWN0PEV4dHJhUHJvcHMsIHVua25vd24sIFByb3BzPihtYXBTdGF0ZVRvUHJvcHMpKF9TZWxlY3RlZE51bWJlcilcbiIsImltcG9ydCB7IFJlYWN0IH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgQmFzZVRvb2wsIHR5cGUgQmFzZVRvb2xQcm9wcywgdHlwZSBJY29uVHlwZSB9IGZyb20gJy4uL2xheW91dC9iYXNlL2Jhc2UtdG9vbCdcbmltcG9ydCB7IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIHR5cGUgSmltdU1hcFZpZXcgfSBmcm9tICdqaW11LWFyY2dpcydcbmltcG9ydCB7IGRlZmF1bHRNZXNzYWdlcyB9IGZyb20gJ2ppbXUtdWknXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFpvb20gZXh0ZW5kcyBCYXNlVG9vbDxCYXNlVG9vbFByb3BzLCB1bmtub3duPiB7XG4gIHRvb2xOYW1lID0gJ1pvb20nXG5cbiAgZ2V0VGl0bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAnWm9vbUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6IGRlZmF1bHRNZXNzYWdlcy5ab29tTGFiZWwgfSlcbiAgfVxuXG4gIGdldEljb24gKCk6IEljb25UeXBlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0RXhwYW5kUGFuZWwgKCk6IEpTWC5FbGVtZW50IHtcbiAgICByZXR1cm4gPFpvb21Jbm5lciBqaW11TWFwVmlldz17dGhpcy5wcm9wcy5qaW11TWFwVmlld30gLz5cbiAgfVxufVxuXG5pbnRlcmZhY2UgWm9vbUlubmVyUHJvcHMge1xuICBqaW11TWFwVmlldzogSmltdU1hcFZpZXdcbn1cblxuaW50ZXJmYWNlIFpvb21Jbm5lclN0YXRlIHtcbiAgYXBpTG9hZGVkOiBib29sZWFuXG59XG5cbmNsYXNzIFpvb21Jbm5lciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8Wm9vbUlubmVyUHJvcHMsIFpvb21Jbm5lclN0YXRlPiB7XG4gIFpvb206IHR5cGVvZiBfX2VzcmkuWm9vbSA9IG51bGxcbiAgWm9vbUJ0bjogX19lc3JpLlpvb21cbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuXG4gIGNvbnN0cnVjdG9yIChwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFwaUxvYWRlZDogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmFwaUxvYWRlZCkge1xuICAgICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbJ2Vzcmkvd2lkZ2V0cy9ab29tJ10pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICAgIFt0aGlzLlpvb21dID0gbW9kdWxlc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhcGlMb2FkZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5hcGlMb2FkZWQgJiYgdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGlmICh0aGlzLlpvb21CdG4pIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJydcbiAgICAgIH1cblxuICAgICAgdGhpcy5ab29tQnRuID0gbmV3IHRoaXMuWm9vbSh7XG4gICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXIsXG4gICAgICAgIHZpZXc6IHRoaXMucHJvcHMuamltdU1hcFZpZXcudmlld1xuICAgICAgfSlcblxuICAgICAgdGhpcy5wcm9wcy5qaW11TWFwVmlldy5kZWxldGVKaW11TWFwVG9vbCgnWm9vbScpXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmFkZEppbXVNYXBUb29sKHtcbiAgICAgICAgbmFtZTogJ1pvb20nLFxuICAgICAgICBpbnN0YW5jZTogdGhpcy5ab29tQnRuXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICBpZiAodGhpcy5ab29tQnRuKSB7XG4gICAgICB0aGlzLlpvb21CdG4uZGVzdHJveSgpXG4gICAgICB0aGlzLlpvb21CdG4gPSBudWxsXG4gICAgICB0aGlzLnByb3BzLmppbXVNYXBWaWV3LmRlbGV0ZUppbXVNYXBUb29sKCdab29tJylcbiAgICAgIC8qKlxuICAgICAgICogVE9ET1xuICAgICAgICogV2hlbiB0aGUgbWFwIHdpZGdldCBoYXMgdHdvIG1hcHMsIHRoZSBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIgaXMgY2FsbGVkIG9ubHkgZm9yIHRoZSBjdXJyZW50IGFjdGl2ZSB2aWV3LFxuICAgICAgICogc28gdGhlIGFub3RoZXIgdmlldydzIG1hcFRvb2wgaXMgbm90IGNsZWFyZWQuXG4gICAgICAgKi9cbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nem9vbS1tYXAtdG9vbCcgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fSAvPlxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIF93aWRnZXRMYWJlbDogJ01hcCcsXG4gIF9hY3Rpb25fZGlzcGxheUZlYXR1cmVTZXRfbGFiZWw6ICdEaXNwbGF5IGZlYXR1cmUgc2V0JyxcbiAgX2FjdGlvbl9wYW5Ub19sYWJlbDogJ1BhbiB0bycsXG4gIF9hY3Rpb25fem9vbVRvRmVhdHVyZV9sYWJlbDogJ1pvb20gdG8nLFxuICBfYWN0aW9uX3NlbGVjdEZlYXR1cmVfbGFiZWw6ICdTZWxlY3QgZmVhdHVyZScsXG4gIF9hY3Rpb25fZmxhc2hfbGFiZWw6ICdGbGFzaCcsXG4gIF9hY3Rpb25fZmlsdGVyX2xhYmVsOiAnRmlsdGVyJyxcbiAgX2FjdGlvbl9zaG93T25NYXBfbGFiZWw6ICdTaG93IG9uIG1hcCcsXG4gIF9hY3Rpb25fYWRkVG9NYXBfbGFiZWw6ICdBZGQgdG8gbWFwJyxcbiAgc2hvd09uTWFwRGF0YTogJ1Nob3cgb24gbWFwIGRhdGEnLFxuICBhZGRlZERhdGE6ICdhZGRlZCBkYXRhJyxcbiAgZmFpbFRvQWRkVGhlRGF0YU9uTWFwOiAnRmFpbCB0byBhZGQgdGhlIGRhdGEuJyxcbiAgYWRkVG9NYXBEYXRhOiAnQWRkIHRvIG1hcCBkYXRhJyxcbiAgbWFwQ3VycmVudFJlY29yZDogJ3tsYXllck5hbWV9IG1hcCBjdXJyZW50IHJlY29yZCcsXG4gIF91cmxfcGFyYW1zX21hcF9zdGF0ZV9sYWJlbDogJ1ZpZXdwb2ludCcsXG4gIF91cmxfcGFyYW1zX2xheWVyX2NlbnRlcl9sYWJlbDogJ0NlbnRlcicsXG4gIF91cmxfcGFyYW1zX2xheWVyX3NjYWxlX2xhYmVsOiAnU2NhbGUnLFxuICBfdXJsX3BhcmFtc19sYXllcl9yb3RhdGlvbl9sYWJlbDogJ1JvdGF0aW9uJyxcbiAgX3VybF9wYXJhbXNfbGF5ZXJfdmlzaWJpbGl0eV9sYWJlbDogJ0xheWVyIHZpc2liaWxpdHknXG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cbmltcG9ydCB7XG4gIEFwcE1vZGUsIGRhdGFTb3VyY2VVdGlscywgRGF0YVNvdXJjZU1hbmFnZXIsIHR5cGUgSlNBUElMYXllck1peGluLCBnZW9tZXRyeVV0aWxzLFxuICBnZXRBcHBTdG9yZSwgdHlwZSBNZXNzYWdlc0pzb24sIHR5cGUgSW1tdXRhYmxlT2JqZWN0LCBNZXNzYWdlVHlwZSwgVXJsTWFuYWdlclxufSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIEhpZ2hMaWdodEhhbmRsZSwgdHlwZSBNYXBiYXNlUmVzdG9yZURhdGEsIHR5cGUgTWFwYmFzZVZpZXcgfSBmcm9tICcuL2NvbXBvbmVudHMvbWFwYmFzZSdcbmltcG9ydCB0eXBlIE1hcEJhc2UgZnJvbSAnLi9jb21wb25lbnRzL21hcGJhc2UnXG5pbXBvcnQgeyB0eXBlIElGZWF0dXJlIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtdHlwZXMnXG5pbXBvcnQgeyBsb2FkQXJjR0lTSlNBUElNb2R1bGVzLCB0eXBlIEppbXVNYXBWaWV3LCBMYXllclR5cGVzLCB0eXBlIEppbXVGZWF0dXJlTGF5ZXJWaWV3LCB0eXBlIEppbXVTY2VuZUxheWVyVmlldywgdHlwZSBKaW11TGF5ZXJWaWV3IH0gZnJvbSAnamltdS1hcmNnaXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOZXdGZWF0dXJlbGF5ZXIgKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIG5ld0ZlYXR1cmVTZXRWYWx1ZT86IHsgW2xheWVySUQ6IHN0cmluZ106IF9fZXNyaS5GZWF0dXJlU2V0IH0pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBuZXdMYXllclByb21pc2VzID0gW11cbiAgbmV3RmVhdHVyZVNldFZhbHVlICYmIE9iamVjdC5rZXlzKG5ld0ZlYXR1cmVTZXRWYWx1ZSkuZm9yRWFjaChsYXllcklkID0+IHtcbiAgICBjb25zdCBsYXllciA9IG1hcEJhc2VWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZClcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIGNvbnNvbGUud2FybigndGhlIGZlYXR1cmUgbGF5ZXIgaXMgYWxyZWFkeSBjcmVhdGVkJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBuZXdMYXllclByb21pc2VzLnB1c2goYWRkRmVhdHVyZVNldFRvTWFwKG1hcEJhc2VWaWV3LCBuZXdGZWF0dXJlU2V0VmFsdWVbbGF5ZXJJZF0sIGxheWVySWQpKVxuICB9KVxuXG4gIGlmIChuZXdMYXllclByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKG5ld0xheWVyUHJvbWlzZXMpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUZlYXR1cmVsYXllciAobWFwQmFzZVZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldywgY2hhbmdlZEZlYXR1cmVTZXRWYWx1ZT86IHsgW2xheWVySUQ6IHN0cmluZ106IF9fZXNyaS5GZWF0dXJlU2V0IH0pOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCB1cGRhdGVQcm9taXNlcyA9IFtdXG4gIGNoYW5nZWRGZWF0dXJlU2V0VmFsdWUgJiYgT2JqZWN0LmtleXMoY2hhbmdlZEZlYXR1cmVTZXRWYWx1ZSkuZm9yRWFjaChsYXllcklkID0+IHtcbiAgICBjb25zdCBsYXllciA9IG1hcEJhc2VWaWV3Lm1hcC5sYXllcnMuZmluZChsYXllciA9PiBsYXllci5pZCA9PT0gbGF5ZXJJZClcbiAgICBpZiAobGF5ZXIpIHtcbiAgICAgIG1hcEJhc2VWaWV3Lm1hcC5yZW1vdmUobGF5ZXIpXG4gICAgICB1cGRhdGVQcm9taXNlcy5wdXNoKGFkZEZlYXR1cmVTZXRUb01hcChtYXBCYXNlVmlldywgY2hhbmdlZEZlYXR1cmVTZXRWYWx1ZVtsYXllcklkXSwgbGF5ZXJJZCkpXG4gICAgfVxuICB9KVxuXG4gIGlmICh1cGRhdGVQcm9taXNlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh1cGRhdGVQcm9taXNlcylcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRGZWF0dXJlU2V0VG9NYXAgKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIGZlYXR1cmVTZXQ6IF9fZXNyaS5GZWF0dXJlU2V0LCBsYXllcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHJldHVybiBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAgICdlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXInXG4gICAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICAgIGlmIChmZWF0dXJlU2V0LmZlYXR1cmVzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbGV0IEZlYXR1cmVTZXQ6IHR5cGVvZiAgX19lc3JpLkZlYXR1cmVTZXQ7XG4gICAgICAgIGxldCBGZWF0dXJlTGF5ZXI6IHR5cGVvZiBfX2VzcmkuRmVhdHVyZUxheWVyO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgW0ZlYXR1cmVMYXllcl0gPSBtb2R1bGVzO1xuXG4gICAgICAgIGNvbnN0IGxheWVyRnJvbUZlYXR1cmVTZXQgPSBmZWF0dXJlU2V0LmZlYXR1cmVzWzBdLmxheWVyIGFzIGFueVxuICAgICAgICBjb25zdCBmaWVsZHNJbkZlYXR1cmVsYXllciA9IFtdXG4gICAgICAgIGNvbnN0IGZpZWxkTWFwID0ge31cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxheWVyRnJvbUZlYXR1cmVTZXQuZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZmllbGRzSXRlbSA9IGdldFJlYXNvbmFibGVGaWVsZChsYXllckZyb21GZWF0dXJlU2V0LmZpZWxkc1tpXSlcbiAgICAgICAgICBmaWVsZE1hcFtsYXllckZyb21GZWF0dXJlU2V0LmZpZWxkc1tpXS5uYW1lXSA9IGZpZWxkc0l0ZW0ubmFtZVxuICAgICAgICAgIGZpZWxkc0luRmVhdHVyZWxheWVyLnB1c2goZmllbGRzSXRlbSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZWxkc0luUG9wdXBUZW1wbGF0ZSA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGZlYXR1cmVTZXQuZmVhdHVyZXNbMF0uYXR0cmlidXRlcykge1xuICAgICAgICAgIGlmIChmaWVsZE1hcFtrZXldKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHNJdGVtID0ge1xuICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTWFwW2tleV0sXG4gICAgICAgICAgICAgIGxhYmVsOiBrZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkc0luUG9wdXBUZW1wbGF0ZS5wdXNoKGZpZWxkc0l0ZW0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc291cmNlRmVhdHVyZXMgPSBbXVxuICAgICAgICBmZWF0dXJlU2V0LmZlYXR1cmVzLmZvckVhY2goKGZlYXR1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgdGVtcEZlYXR1cmUgPSBmZWF0dXJlXG4gICAgICAgICAgaWYgKHRlbXBGZWF0dXJlLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRlbXBGZWF0dXJlLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgdGVtcEZlYXR1cmUuYXR0cmlidXRlc1tmaWVsZE1hcFtrZXldXSA9IHRlbXBGZWF0dXJlLmF0dHJpYnV0ZXNba2V5XVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0ZW1wRmVhdHVyZS5hdHRyaWJ1dGVzLmV4YmZpZCA9IGluZGV4XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBGZWF0dXJlLmF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAgIGV4YmZpZDogaW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc291cmNlRmVhdHVyZXMucHVzaCh0ZW1wRmVhdHVyZSlcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBsYXllciA9IG5ldyBGZWF0dXJlTGF5ZXIoe1xuICAgICAgICAgIGlkOiBsYXllcklkLFxuICAgICAgICAgIHRpdGxlOiBsYXllckZyb21GZWF0dXJlU2V0LnRpdGxlLFxuICAgICAgICAgIHNvdXJjZTogc291cmNlRmVhdHVyZXMsXG4gICAgICAgICAgZmllbGRzOiBmaWVsZHNJbkZlYXR1cmVsYXllcixcbiAgICAgICAgICBvdXRGaWVsZHM6IFsnKiddLFxuICAgICAgICAgIG9iamVjdElkRmllbGQ6ICdleGJmaWQnLFxuICAgICAgICAgIHJlbmRlcmVyOiBsYXllckZyb21GZWF0dXJlU2V0LnJlbmRlcmVyLFxuICAgICAgICAgIHBvcHVwRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICBwb3B1cFRlbXBsYXRlOiB7XG4gICAgICAgICAgICB0aXRsZTogJ2luZm9ybWF0aW9uJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7XG4gICAgICAgICAgICAgIHR5cGU6ICdmaWVsZHMnLFxuICAgICAgICAgICAgICBmaWVsZEluZm9zOiBmaWVsZHNJblBvcHVwVGVtcGxhdGVcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIG1hcEJhc2VWaWV3Lm1hcC5hZGQobGF5ZXIpXG5cbiAgICAgICAgbGF5ZXIub24oJ2xheWVydmlldy1jcmVhdGUnLCBldmVudCA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGdldFJlYXNvbmFibGVGaWVsZCAoZmllbGQ6IF9fZXNyaS5GaWVsZCk6IF9fZXNyaS5GaWVsZCB7XG4gIC8vIHRoZSBmdW5jdGlvbiBpcyBzdXBwb3J0ZWQgdG8gbm9ybWFsaXplIHRoZSBmaWVsZC5uYW1lXG4gIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkLm5hbWVcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBmaWVsZE5hbWUucmVwbGFjZSgvXFwuL2csICdfJykucmVwbGFjZSgvXFwoL2csICdfJykucmVwbGFjZSgvXFwpL2csICdfJyksXG4gICAgYWxpYXM6IGZpZWxkLmFsaWFzLFxuICAgIHR5cGU6IGZpZWxkLnR5cGVcbiAgfSBhcyBhbnlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEZlYXR1cmUgKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIHRhcmdldDogX19lc3JpLkdyYXBoaWMgfCBfX2VzcmkuR3JhcGhpY1tdIHwgSUZlYXR1cmUgfCBJRmVhdHVyZVtdLCBsYXllcklkPzogc3RyaW5nKTogSGlnaExpZ2h0SGFuZGxlIHtcbiAgLy8gSW4gdGhpcyBmdW5jdGlvbiwgd2UgYXNzdW1lIHRoYXQgZmVhdHVyZXMgY29tZSBmcm9tIHRoZSBzYW1lIGxheWVyXG4gIGxldCBmZWF0dXJlTGF5ZXJJZCA9IGxheWVySWRcbiAgbGV0IGZlYXR1cmVMYXllclZpZXcgPSBudWxsXG4gIGxldCB0ZW1wRmVhdHVyZSA9IG51bGxcblxuICAvLyBpZiBsYXllcklkIGRvZXNuJ3QgZXhpc3QsIHdlIGdldCBsYXllcklkIGJ5IGZlYXR1cmVcbiAgaWYgKCFmZWF0dXJlTGF5ZXJJZCkge1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgdGVtcEZlYXR1cmUgPSB0YXJnZXRbMF0gYXMgX19lc3JpLkdyYXBoaWNcbiAgICB9IGVsc2Uge1xuICAgICAgdGVtcEZlYXR1cmUgPSB0YXJnZXQgYXMgX19lc3JpLkdyYXBoaWNcbiAgICB9XG5cbiAgICBpZiAodGVtcEZlYXR1cmUpIHtcbiAgICAgIGZlYXR1cmVMYXllcklkID0gdGVtcEZlYXR1cmUubGF5ZXIgJiYgdGVtcEZlYXR1cmUubGF5ZXIuaWRcbiAgICB9XG4gIH1cblxuICBpZiAoZmVhdHVyZUxheWVySWQpIHtcbiAgICBjb25zdCBsYXllclZpZXdzID0gbWFwQmFzZVZpZXcuYWxsTGF5ZXJWaWV3c1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJWaWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxheWVyVmlld3MuZ2V0SXRlbUF0KGkpLmxheWVyLmlkID09PSBmZWF0dXJlTGF5ZXJJZCkge1xuICAgICAgICBmZWF0dXJlTGF5ZXJWaWV3ID0gbGF5ZXJWaWV3cy5nZXRJdGVtQXQoaSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZmVhdHVyZUxheWVyVmlldykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGF5ZXJJZDogZmVhdHVyZUxheWVySWQsXG4gICAgICAgIGhhbmRsZTogZmVhdHVyZUxheWVyVmlldy5oaWdobGlnaHQodGFyZ2V0KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ29Ub1RhcmdldEltbWVkaWF0ZWx5ICh2aWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIF90YXJnZXQ6IF9fZXNyaS5HZW9tZXRyeSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB2aWV3U1IgPSB2aWV3LnNwYXRpYWxSZWZlcmVuY2VcbiAgY29uc3QgZ2VvbWV0cmllcyA9IGF3YWl0IHByb2plY3RHZW9tZXRyaWVzKFtfdGFyZ2V0XSwgdmlld1NSKVxuXG4gIGlmIChnZW9tZXRyaWVzICYmIGdlb21ldHJpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGdlb21ldHJpZXNbMF1cbiAgICB2aWV3LmdvVG8odGFyZ2V0LCB7IGFuaW1hdGU6IGZhbHNlIH0pXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdvVG9WaWV3cG9pbnRJbW1lZGlhdGVseSAodmlldzogX19lc3JpLk1hcFZpZXcgfCBfX2VzcmkuU2NlbmVWaWV3LCBfdmlld3BvaW50OiBfX2VzcmkuVmlld3BvaW50KTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHZpZXdTUiA9IHZpZXcuc3BhdGlhbFJlZmVyZW5jZVxuICBjb25zdCB2aWV3cG9pbnQgPSBhd2FpdCBwcm9qZWN0Vmlld3BvaW50KF92aWV3cG9pbnQsIHZpZXdTUilcbiAgLy8gdmlldy5nb1RvKHZpZXdwb2ludCwgeyBhbmltYXRlOiBmYWxzZSB9KVxuICB2aWV3LnZpZXdwb2ludCA9IHZpZXdwb2ludFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOZWVkUHJvamVjdFZpZXdwb2ludCAodmlld3BvaW50OiBfX2VzcmkuVmlld3BvaW50LCB2aWV3U1I6IF9fZXNyaS5TcGF0aWFsUmVmZXJlbmNlKTogYm9vbGVhbiB7XG4gIGNvbnN0IHNyMSA9IHZpZXdwb2ludC50YXJnZXRHZW9tZXRyeT8uc3BhdGlhbFJlZmVyZW5jZVxuXG4gIGlmIChzcjEgJiYgaXNOZWVkUHJvamVjdFNwYXRpYWxSZWZlcmVuY2Uoc3IxLCB2aWV3U1IpKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0IHNyMiA9IHZpZXdwb2ludC5jYW1lcmE/LnBvc2l0aW9uPy5zcGF0aWFsUmVmZXJlbmNlXG5cbiAgaWYgKHNyMiAmJiBpc05lZWRQcm9qZWN0U3BhdGlhbFJlZmVyZW5jZShzcjIsIHZpZXdTUikpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05lZWRQcm9qZWN0U3BhdGlhbFJlZmVyZW5jZSAoc3IxOiBfX2VzcmkuU3BhdGlhbFJlZmVyZW5jZSwgc3IyOiBfX2VzcmkuU3BhdGlhbFJlZmVyZW5jZSk6IGJvb2xlYW4ge1xuICBjb25zdCBpc1NhbWUgPSBzcjEud2tpZCA9PT0gc3IyLndraWQgfHwgc3IxLmVxdWFscyhzcjIpXG4gIC8vICBJbiBKUyBBUEkgNC54LCB0aGUgdmlldyBjYW4gaGFuZGxlIFdlYk1lcmNhdG9yIGFuZCBXR1M4NCBzcGF0aWFsUmVmZXJlbmNlIGF1dG9cbiAgY29uc3QgaXNMaWtlID0gKHNyMS5pc1dlYk1lcmNhdG9yIHx8IHNyMS5pc1dHUzg0KSAmJiAoc3IyLmlzV2ViTWVyY2F0b3IgfHwgc3IyLmlzV0dTODQpXG4gIHJldHVybiAhaXNTYW1lICYmICFpc0xpa2Vcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2plY3RWaWV3cG9pbnQgKF92aWV3cG9pbnQ6IF9fZXNyaS5WaWV3cG9pbnQsIHZpZXdTUjogX19lc3JpLlNwYXRpYWxSZWZlcmVuY2UpOiBQcm9taXNlPF9fZXNyaS5WaWV3cG9pbnQ+IHtcbiAgY29uc3Qgdmlld3BvaW50ID0gX3ZpZXdwb2ludC5jbG9uZSgpXG4gIGNvbnN0IHRhcmdldEdlb21ldHJ5ID0gdmlld3BvaW50LnRhcmdldEdlb21ldHJ5XG4gIGNvbnN0IGNhbWVyYVBvc2l0b24gPSB2aWV3cG9pbnQuY2FtZXJhPy5wb3NpdGlvblxuXG4gIGNvbnN0IHRvUHJvamVjdEdlb21ldHJpZXM6IF9fZXNyaS5HZW9tZXRyeVtdID0gW11cbiAgbGV0IGlzUHJvamVjdFRhcmdldEdlb21ldHJ5OiBib29sZWFuID0gZmFsc2VcbiAgbGV0IGlzUHJvamVjdENhbWVyYVBvc2l0aW9uOiBib29sZWFuID0gZmFsc2VcblxuICBpZiAodGFyZ2V0R2VvbWV0cnkgJiYgaXNOZWVkUHJvamVjdFNwYXRpYWxSZWZlcmVuY2UodGFyZ2V0R2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZSwgdmlld1NSKSkge1xuICAgIGlzUHJvamVjdFRhcmdldEdlb21ldHJ5ID0gdHJ1ZVxuICAgIHRvUHJvamVjdEdlb21ldHJpZXMucHVzaCh0YXJnZXRHZW9tZXRyeSlcbiAgfVxuXG4gIGlmIChjYW1lcmFQb3NpdG9uICYmIGlzTmVlZFByb2plY3RTcGF0aWFsUmVmZXJlbmNlKGNhbWVyYVBvc2l0b24uc3BhdGlhbFJlZmVyZW5jZSwgdmlld1NSKSkge1xuICAgIGlzUHJvamVjdENhbWVyYVBvc2l0aW9uID0gdHJ1ZVxuICAgIHRvUHJvamVjdEdlb21ldHJpZXMucHVzaChjYW1lcmFQb3NpdG9uKVxuICB9XG5cbiAgaWYgKHRvUHJvamVjdEdlb21ldHJpZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHByb2plY3RlZEdlb21ldHJpZXMgPSBhd2FpdCBwcm9qZWN0R2VvbWV0cmllcyh0b1Byb2plY3RHZW9tZXRyaWVzLCB2aWV3U1IpXG5cbiAgICBpZiAoaXNQcm9qZWN0VGFyZ2V0R2VvbWV0cnkpIHtcbiAgICAgIHZpZXdwb2ludC50YXJnZXRHZW9tZXRyeSA9IHByb2plY3RlZEdlb21ldHJpZXNbMF1cbiAgICB9XG5cbiAgICBpZiAoaXNQcm9qZWN0Q2FtZXJhUG9zaXRpb24pIHtcbiAgICAgIHZpZXdwb2ludC5jYW1lcmEucG9zaXRpb24gPSBwcm9qZWN0ZWRHZW9tZXRyaWVzW3Byb2plY3RlZEdlb21ldHJpZXMubGVuZ3RoIC0gMV0gYXMgX19lc3JpLlBvaW50XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZpZXdwb2ludFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFwUGFudG8gKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIHRhcmdldDogX19lc3JpLkdlb21ldHJ5IHwgX19lc3JpLkdlb21ldHJ5W10gfFxuX19lc3JpLkdyYXBoaWMgfCBfX2VzcmkuR3JhcGhpY1tdIHwgX19lc3JpLkV4dGVudCk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IHBhblRvVGFyZ2V0ID0gdGFyZ2V0IGFzIGFueVxuICBjb25zdCB0ZW1wQmFzZU1hcFZpZXcgPSBtYXBCYXNlVmlldyBhcyBhbnlcbiAgaWYgKHBhblRvVGFyZ2V0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBpZiAocGFuVG9UYXJnZXQubGVuZ3RoID09PSAwKSB7IGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyByZXR1cm4gfVxuXG4gICAgaWYgKHBhblRvVGFyZ2V0WzBdLmdlb21ldHJ5KSB7XG4gICAgICBjb25zdCBnZW9tZXRyeUFycjogX19lc3JpLkdlb21ldHJ5W10gPSBbXVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYW5Ub1RhcmdldC5sZW5ndGg7IGkrKykge1xuICAgICAgICBnZW9tZXRyeUFyci5wdXNoKHBhblRvVGFyZ2V0W2ldLmdlb21ldHJ5KVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBnZXRHZW9tZXRyaWVzRXh0ZW50KGdlb21ldHJ5QXJyKS50aGVuKChleHRlbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGdvVG8odGVtcEJhc2VNYXBWaWV3LCBleHRlbnQuY2VudGVyKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldEdlb21ldHJpZXNFeHRlbnQocGFuVG9UYXJnZXQpLnRoZW4oKGV4dGVudCkgPT4ge1xuICAgICAgICByZXR1cm4gZ29Ubyh0ZW1wQmFzZU1hcFZpZXcsIGV4dGVudC5jZW50ZXIpXG4gICAgICB9KVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocGFuVG9UYXJnZXQuZ2VvbWV0cnkpIHtcbiAgICAgIGNvbnN0IGdldG1ldHJ5ID0gcGFuVG9UYXJnZXQuZ2VvbWV0cnkgYXMgX19lc3JpLkdlb21ldHJ5XG4gICAgICByZXR1cm4gZ29Ubyh0ZW1wQmFzZU1hcFZpZXcsIGdldENlbnRlclBvaW50KGdldG1ldHJ5KSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdvVG8odGVtcEJhc2VNYXBWaWV3LCBnZXRDZW50ZXJQb2ludChwYW5Ub1RhcmdldCkpXG4gICAgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdvVG8gKHZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldywgdGFyZ2V0OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBkZWxheSBiZWZvcmUgdXBkYXRpbmcgb2YgdmlldyB0dXJucyB0cnVlLCA0MDBtcyBpcyBhIHRlbXBvcmFyeSBzb2x1dGlvbi5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vLy8gdGhlcmUgaXMgYSBjb25mbGljdCBmb3IgcGFuaW5nIHdoZW4gdGhlIGxheWVyIHZpZXcgaXMgdXBkYXRpbmcsIHN1Y2ggYXMgJ3BhbiB0bycgYW5kICdmaWx0ZXInLlxuICAgICAgLy8vLyB0aGlzIGlzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uLCBpdCBjYW4gcmVkdWNlIHRoZSBmcmVxdWVuY3kgb2YgdGhlIHByb2JsZW0gcmF0aGVyIHRoYW4gc29sdmUgaXQgY29tcGxldGVseS5cbiAgICAgIC8vaWYgKHZpZXcudXBkYXRpbmcpIHtcbiAgICAgIC8vICBjb25zdCBoYW5kbGVyID0gdmlldy53YXRjaCgndXBkYXRpbmcnLCB2YWx1ZSA9PiB7XG4gICAgICAvLyAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyAgICAgIHZpZXcuZ29Ubyh0YXJnZXQpLnRoZW4oKCkgPT4gcmVzb2x2ZSgpKS5jYXRjaCgoKSA9PiByZWplY3QoKSlcbiAgICAgIC8vICAgICAgaGFuZGxlci5yZW1vdmUoKVxuICAgICAgLy8gICAgfVxuICAgICAgLy8gIH0pXG4gICAgICAvL30gZWxzZSB7XG4gICAgICAvLyAgdmlldy5nb1RvKHRhcmdldCkudGhlbigoKSA9PiByZXNvbHZlKCkpLmNhdGNoKCgpID0+IHJlamVjdCgpKVxuICAgICAgLy99XG4gICAgICB2aWV3LmdvVG8odGFyZ2V0KS50aGVuKCgpID0+IHsgcmVzb2x2ZSgpIH0pLmNhdGNoKCgpID0+IHsgcmVqZWN0KCkgfSlcbiAgICB9LCA0MDApXG4gIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEdlb21ldHJpZXNFeHRlbnQgKGdlb21ldHJpZXM6IF9fZXNyaS5HZW9tZXRyeVtdKTogUHJvbWlzZTxfX2VzcmkuRXh0ZW50PiB7XG4gIHJldHVybiBhd2FpdCBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAnZXNyaS9nZW9tZXRyeS9FeHRlbnQnXG4gIF0pLnRoZW4oYXN5bmMgbW9kdWxlcyA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgbGV0IEV4dGVudDogdHlwZW9mIF9fZXNyaS5FeHRlbnQ7XG4gICAgW0V4dGVudF0gPSBtb2R1bGVzXG5cbiAgICBpZiAoIWdlb21ldHJpZXMgfHwgIWdlb21ldHJpZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKG51bGwpXG4gICAgfVxuXG4gICAgbGV0IGZ1bGxFeHRlbnQ6IF9fZXNyaS5FeHRlbnQgPSBudWxsXG4gICAgbGV0IGluZGV4XG4gICAgY29uc3QgbnVtR2VvbWV0cmllcyA9IGdlb21ldHJpZXMubGVuZ3RoXG5cbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBudW1HZW9tZXRyaWVzOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBnZW9tZXRyeSA9IGdlb21ldHJpZXNbaW5kZXhdXG4gICAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGxldCBleHRlbnQgPSBnZW9tZXRyeS5leHRlbnRcblxuICAgICAgaWYgKCFleHRlbnQgJiYgZ2VvbWV0cnkudHlwZSA9PT0gJ3BvaW50Jykge1xuICAgICAgICBjb25zdCBwb2ludEdlb21ldHJ5ID0gZ2VvbWV0cnkgYXMgYW55XG5cbiAgICAgICAgaWYgKHBvaW50R2VvbWV0cnkueCAmJiBwb2ludEdlb21ldHJ5LnkpIHtcbiAgICAgICAgICBleHRlbnQgPSBuZXcgRXh0ZW50KHtcbiAgICAgICAgICAgIHhtYXg6IHBvaW50R2VvbWV0cnkueCxcbiAgICAgICAgICAgIHhtaW46IHBvaW50R2VvbWV0cnkueCxcbiAgICAgICAgICAgIHltYXg6IHBvaW50R2VvbWV0cnkueSxcbiAgICAgICAgICAgIHltaW46IHBvaW50R2VvbWV0cnkueSxcbiAgICAgICAgICAgIHptYXg6IHBvaW50R2VvbWV0cnkueixcbiAgICAgICAgICAgIHptaW46IHBvaW50R2VvbWV0cnkueixcbiAgICAgICAgICAgIHNwYXRpYWxSZWZlcmVuY2U6IHBvaW50R2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKGZ1bGxFeHRlbnQpIHtcbiAgICAgICAgZnVsbEV4dGVudCA9IGZ1bGxFeHRlbnQudW5pb24oZXh0ZW50KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsbEV4dGVudCA9IGV4dGVudFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmdWxsRXh0ZW50LndpZHRoIDwgMCAmJiBmdWxsRXh0ZW50LmhlaWdodCA8IDApIHtcbiAgICAgIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGZ1bGxFeHRlbnQpXG4gIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWx0ZXJGZWF0dXJlc0J5UXVlcnkgKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldywgYWN0aW9uTGF5ZXJEYXRhU291cmNlSWQ6IHN0cmluZywgcXVlcnlTUUw6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIWFjdGlvbkxheWVyRGF0YVNvdXJjZUlkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBkYXRhU291cmNlID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGFjdGlvbkxheWVyRGF0YVNvdXJjZUlkKVxuXG4gIGlmICghZGF0YVNvdXJjZSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgbGV0IGppbXVMYXllclZpZXc6IEppbXVMYXllclZpZXcgPSBudWxsXG5cbiAgdHJ5IHtcbiAgICBqaW11TGF5ZXJWaWV3ID0gYXdhaXQgamltdU1hcFZpZXcud2hlbkppbXVMYXllclZpZXdMb2FkZWRCeURhdGFTb3VyY2UoZGF0YVNvdXJjZSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgamltdUxheWVyVmlldyA9IG51bGxcbiAgICBjb25zb2xlLmVycm9yKCdjYW5cXCd0IGdldCBqaW11TGF5ZXJWaWV3IGJ5IGRhdGFTb3VyY2UnLCBkYXRhU291cmNlLCBlcnIpXG4gIH1cblxuICBpZiAoamltdUxheWVyVmlldyAmJiBqaW11TGF5ZXJWaWV3LmxheWVyICYmIChqaW11TGF5ZXJWaWV3LnR5cGUgPT09IExheWVyVHlwZXMuRmVhdHVyZUxheWVyIHx8IGppbXVMYXllclZpZXcudHlwZSA9PT0gTGF5ZXJUeXBlcy5TY2VuZUxheWVyKSkge1xuICAgIChqaW11TGF5ZXJWaWV3IGFzIEppbXVGZWF0dXJlTGF5ZXJWaWV3IHwgSmltdVNjZW5lTGF5ZXJWaWV3KS5zZXREZWZpbml0aW9uRXhwcmVzc2lvbihxdWVyeVNRTClcbiAgfVxufVxuXG5mdW5jdGlvbiBxdWVyeUZlYXR1cmVzIChsYXllck9iamVjdCwgcXVlcnlTUUwpIHtcbiAgcmV0dXJuIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoW1xuICAgICdlc3JpL3Jlc3Qvc3VwcG9ydC9RdWVyeSdcbiAgXSkudGhlbihtb2R1bGVzID0+IHtcbiAgICBsZXQgUXVlcnk6IHR5cGVvZiBfX2VzcmkuUXVlcnk7XG4gICAgW1F1ZXJ5XSA9IG1vZHVsZXNcbiAgICBjb25zdCBxdWVyeSA9IG5ldyBRdWVyeSgpXG4gICAgcXVlcnkud2hlcmUgPSBxdWVyeVNRTFxuICAgIHF1ZXJ5Lm91dEZpZWxkcyA9IFsnKiddXG4gICAgcXVlcnkucmV0dXJuR2VvbWV0cnkgPSB0cnVlXG4gICAgcmV0dXJuIGxheWVyT2JqZWN0LnF1ZXJ5RmVhdHVyZXMocXVlcnkpLnRoZW4oZmVhdHVyZVNldCA9PiB7XG4gICAgICByZXR1cm4gZmVhdHVyZVNldFxuICAgIH0pXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGZsYXNoT25GZWF0dXJlTGF5ZXIgKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldywgcXVlcnlTUUw6IHN0cmluZywgdGVtcEppbXVMYXllclZpZXc6IEppbXVGZWF0dXJlTGF5ZXJWaWV3KSB7XG4gIGlmICgodGVtcEppbXVMYXllclZpZXcpLnZpZXcpIHtcbiAgICBsZXQgZmVhdHVyZUxheWVyVmlldzogX19lc3JpLkZlYXR1cmVMYXllclZpZXcgPSAodGVtcEppbXVMYXllclZpZXcpLnZpZXdcbiAgICBpZiAoZmVhdHVyZUxheWVyVmlldykge1xuICAgICAgcXVlcnlGZWF0dXJlcyhmZWF0dXJlTGF5ZXJWaWV3LmxheWVyLCBxdWVyeVNRTCkudGhlbihmZWF0dXJlU2V0ID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmVTZXQgJiYgZmVhdHVyZVNldC5mZWF0dXJlcyAmJiBmZWF0dXJlU2V0LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBzeW1ib2wgPSBnZXRGbGFzaFN5bWJvbChmZWF0dXJlTGF5ZXJWaWV3LmxheWVyLmdlb21ldHJ5VHlwZSlcbiAgICAgICAgICBzdGFydEZsYXNoKGppbXVNYXBWaWV3LnZpZXcsIGZlYXR1cmVTZXQuZmVhdHVyZXMsIHN5bWJvbClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAnZXNyaS9sYXllcnMvRmVhdHVyZUxheWVyJ1xuICAgIF0pLnRoZW4obW9kdWxlcyA9PiB7XG4gICAgICBsZXQgRmVhdHVyZUxheWVyOiB0eXBlb2YgX19lc3JpLkZlYXR1cmVMYXllcjtcbiAgICAgIFtGZWF0dXJlTGF5ZXJdID0gbW9kdWxlc1xuXG4gICAgICBsZXQgdGVtcEZlYXR1cmVMYXllciA9IG5ldyBGZWF0dXJlTGF5ZXIoe1xuICAgICAgICB1cmw6IGRhdGFTb3VyY2VVdGlscy5nZXRVcmxCeUxheWVyKCh0ZW1wSmltdUxheWVyVmlldyBhcyBKaW11RmVhdHVyZUxheWVyVmlldyB8IEppbXVTY2VuZUxheWVyVmlldykubGF5ZXIpXG4gICAgICB9KVxuICAgICAgdGVtcEZlYXR1cmVMYXllci5sb2FkKCkudGhlbigoKSA9PiB7XG4gICAgICAgIHF1ZXJ5RmVhdHVyZXModGVtcEZlYXR1cmVMYXllciwgcXVlcnlTUUwpLnRoZW4oZmVhdHVyZVNldCA9PiB7XG4gICAgICAgICAgaWYgKGZlYXR1cmVTZXQgJiYgZmVhdHVyZVNldC5mZWF0dXJlcyAmJiBmZWF0dXJlU2V0LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IGdldEZsYXNoU3ltYm9sKGZlYXR1cmVTZXQuZmVhdHVyZXNbMF0uZ2VvbWV0cnkudHlwZSlcbiAgICAgICAgICAgIHN0YXJ0Rmxhc2goamltdU1hcFZpZXcudmlldywgZmVhdHVyZVNldC5mZWF0dXJlcywgc3ltYm9sKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxufVxuXG5sZXQgc2NlbmVIaWdodGxpZ2h0SGFuZGxlID0gbnVsbFxuZnVuY3Rpb24gZmxhc2hPblNjZW5lTGF5ZXIgKGppbXVNYXBWaWV3OiBKaW11TWFwVmlldywgcXVlcnlTUUw6IHN0cmluZywgdGVtcEppbXVMYXllclZpZXc6IEppbXVTY2VuZUxheWVyVmlldykge1xuICBpZiAoKHRlbXBKaW11TGF5ZXJWaWV3KS52aWV3KSB7XG4gICAgbGV0IHNjZW5lTGF5ZXJWaWV3OiBfX2VzcmkuU2NlbmVMYXllclZpZXcgPSAodGVtcEppbXVMYXllclZpZXcpLnZpZXdcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgcXVlcnlGZWF0dXJlcyhzY2VuZUxheWVyVmlldz8ubGF5ZXI/LmFzc29jaWF0ZWRMYXllciwgcXVlcnlTUUwpLnRoZW4oZmVhdHVyZVNldCA9PiB7XG4gICAgICBpZiAoZmVhdHVyZVNldCAmJiBmZWF0dXJlU2V0LmZlYXR1cmVzICYmIGZlYXR1cmVTZXQuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBvYmplY3RJZEZpZWxkID0gc2NlbmVMYXllclZpZXcubGF5ZXIub2JqZWN0SWRGaWVsZFxuICAgICAgICBjb25zdCBvYmplY3RJZHMgPSBmZWF0dXJlU2V0LmZlYXR1cmVzLm1hcChmZWF0dXJlID0+IGZlYXR1cmUuYXR0cmlidXRlc1tvYmplY3RJZEZpZWxkXSlcblxuICAgICAgICBsZXQgaSA9IDBcbiAgICAgICAgY29uc3QgbWF4Rmxhc2hDb3VudCA9IDZcbiAgICAgICAgbGV0IGhpZ2hsaWdodENvbG9yID0gWzI1NSwgMjU1LCAwLCAwLjhdXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSGlnaGxpZ2h0T3B0aW9ucyA9IGppbXVNYXBWaWV3LnZpZXcuaGlnaGxpZ2h0T3B0aW9uc1xuXG4gICAgICAgIGNvbnN0IGZsYXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChpIDwgbWF4Rmxhc2hDb3VudCkge1xuICAgICAgICAgICAgaSsrXG4gICAgICAgICAgICBpZiAoaGlnaGxpZ2h0Q29sb3IpIHtcbiAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3IgPSBudWxsXG4gICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgICAgamltdU1hcFZpZXcudmlldy5oaWdobGlnaHRPcHRpb25zID0geyBjb2xvcjogWzAsIDAsIDAsIDBdIH1cbiAgICAgICAgICAgICAgc2NlbmVIaWdodGxpZ2h0SGFuZGxlICYmIHNjZW5lSGlnaHRsaWdodEhhbmRsZS5yZW1vdmUoKVxuICAgICAgICAgICAgICBzY2VuZUhpZ2h0bGlnaHRIYW5kbGUgPSBzY2VuZUxheWVyVmlldy5oaWdobGlnaHQob2JqZWN0SWRzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3IgPSBbMjU1LCAyNTUsIDAsIDAuOF1cbiAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICBqaW11TWFwVmlldy52aWV3LmhpZ2hsaWdodE9wdGlvbnMgPSB7IGNvbG9yOiBoaWdobGlnaHRDb2xvciB9XG4gICAgICAgICAgICAgIHNjZW5lSGlnaHRsaWdodEhhbmRsZSAmJiBzY2VuZUhpZ2h0bGlnaHRIYW5kbGUucmVtb3ZlKClcbiAgICAgICAgICAgICAgc2NlbmVIaWdodGxpZ2h0SGFuZGxlID0gc2NlbmVMYXllclZpZXcuaGlnaGxpZ2h0KG9iamVjdElkcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmxhc2gsIDUwMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgamltdU1hcFZpZXcudmlldy5oaWdobGlnaHRPcHRpb25zID0gb3JpZ2luYWxIaWdobGlnaHRPcHRpb25zXG4gICAgICAgICAgICBzY2VuZUhpZ2h0bGlnaHRIYW5kbGUgJiYgc2NlbmVIaWdodGxpZ2h0SGFuZGxlLnJlbW92ZSgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZmxhc2gsIDUwMClcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmbGFzaEZlYXR1cmVzQnlRdWVyeSAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3LCBsYXllckRhdGFTb3VyY2VJZDogc3RyaW5nLCBxdWVyeVNRTDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghbGF5ZXJEYXRhU291cmNlSWQpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGRhdGFTb3VyY2UgPSBEYXRhU291cmNlTWFuYWdlci5nZXRJbnN0YW5jZSgpLmdldERhdGFTb3VyY2UobGF5ZXJEYXRhU291cmNlSWQpXG5cbiAgaWYgKCFkYXRhU291cmNlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgamltdUxheWVyVmlldzogSmltdUxheWVyVmlldyA9IG51bGxcblxuICB0cnkge1xuICAgIGppbXVMYXllclZpZXcgPSBhd2FpdCBqaW11TWFwVmlldy53aGVuSmltdUxheWVyVmlld0xvYWRlZEJ5RGF0YVNvdXJjZShkYXRhU291cmNlKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBqaW11TGF5ZXJWaWV3ID0gbnVsbFxuICAgIGNvbnNvbGUuZXJyb3IoJ2NhblxcJ3QgZ2V0IGppbXVMYXllclZpZXcgYnkgZGF0YVNvdXJjZScsIGRhdGFTb3VyY2UsIGVycilcbiAgfVxuXG4gIGlmIChqaW11TGF5ZXJWaWV3ICYmIGppbXVMYXllclZpZXcubGF5ZXIpIHtcbiAgICBpZiAoamltdUxheWVyVmlldy50eXBlID09PSBMYXllclR5cGVzLkZlYXR1cmVMYXllcikge1xuICAgICAgZmxhc2hPbkZlYXR1cmVMYXllcihqaW11TWFwVmlldywgcXVlcnlTUUwsIGppbXVMYXllclZpZXcgYXMgSmltdUZlYXR1cmVMYXllclZpZXcpXG4gICAgfSBlbHNlIGlmIChqaW11TGF5ZXJWaWV3LnR5cGUgPT09IExheWVyVHlwZXMuU2NlbmVMYXllcikge1xuICAgICAgZmxhc2hPblNjZW5lTGF5ZXIoamltdU1hcFZpZXcsIHF1ZXJ5U1FMLCBqaW11TGF5ZXJWaWV3IGFzIEppbXVTY2VuZUxheWVyVmlldylcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RhcnRGbGFzaCAobWFwQmFzZVZpZXc6IF9fZXNyaS5NYXBWaWV3IHwgX19lc3JpLlNjZW5lVmlldywgZmVhdHVyZXM6IF9fZXNyaS5HcmFwaGljW10sIHN5bWJvbCkge1xuICBsb2FkQXJjR0lTSlNBUElNb2R1bGVzKFtcbiAgICAnZXNyaS9HcmFwaGljJ1xuICBdKS50aGVuKG1vZHVsZXMgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGxldCBHcmFwaGljOiB0eXBlb2YgX19lc3JpLkdyYXBoaWM7XG4gICAgW0dyYXBoaWNdID0gbW9kdWxlc1xuXG4gICAgY29uc3QgZmxhc2hGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlczogX19lc3JpLkdyYXBoaWNbXSwgbWF4Rmxhc2hDb3VudDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBncmFwaGljcyA9IFtdXG4gICAgICBsZXQgZmxhc2hDb3VudCA9IDBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdGVtcEdyYXBoaWMgPSBuZXcgR3JhcGhpYyh7XG4gICAgICAgICAgZ2VvbWV0cnk6IGZlYXR1cmVzW2ldLmdlb21ldHJ5LFxuICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IGZlYXR1cmVzW2ldLmF0dHJpYnV0ZXNcbiAgICAgICAgfSlcbiAgICAgICAgZ3JhcGhpY3MucHVzaCh0ZW1wR3JhcGhpYylcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2luZ2xlRmxhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hcEJhc2VWaWV3LmdyYXBoaWNzLmFkZE1hbnkoZ3JhcGhpY3MpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG1hcEJhc2VWaWV3LmdyYXBoaWNzLnJlbW92ZU1hbnkoZ3JhcGhpY3MpXG4gICAgICAgICAgZmxhc2hDb3VudCA9IGZsYXNoQ291bnQgKyAxXG4gICAgICAgICAgaWYgKGZsYXNoQ291bnQgPCBtYXhGbGFzaENvdW50KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgc2luZ2xlRmxhc2goKVxuICAgICAgICAgICAgfSwgNTAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKVxuICAgICAgfVxuXG4gICAgICBzaW5nbGVGbGFzaCgpXG4gICAgfVxuXG4gICAgZmxhc2hGZWF0dXJlcyhmZWF0dXJlcywgMylcbiAgfSlcbn1cblxuZnVuY3Rpb24gZ2V0Rmxhc2hTeW1ib2wgKGdlb21ldHJ5VHlwZTogc3RyaW5nKSB7XG4gIGlmIChbJ3BvaW50JywgJ211bHRpcG9pbnQnXS5pbmNsdWRlcyhnZW9tZXRyeVR5cGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdzaW1wbGUtbWFya2VyJyxcbiAgICAgIHN0eWxlOiAnY2lyY2xlJyxcbiAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDAsIDAuOF0sXG4gICAgICBzaXplOiAnMTZweCcsXG4gICAgICBvdXRsaW5lOiB7XG4gICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDAsIDAuOF0sXG4gICAgICAgIHdpZHRoOiAzXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKFsncG9seWxpbmUnXS5pbmNsdWRlcyhnZW9tZXRyeVR5cGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdzaW1wbGUtbGluZScsXG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAwLCAwLjhdLFxuICAgICAgd2lkdGg6IDMsXG4gICAgICBzdHlsZTogJ3NvbGlkJ1xuICAgIH1cbiAgfSBlbHNlIGlmIChbJ3BvbHlnb24nLCAnZXh0ZW50J10uaW5jbHVkZXMoZ2VvbWV0cnlUeXBlKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnc2ltcGxlLWZpbGwnLCAvLyBhdXRvY2FzdHMgYXMgbmV3IFNpbXBsZUZpbGxTeW1ib2woKVxuICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMCwgMC41XSxcbiAgICAgIHN0eWxlOiAnc29saWQnLFxuICAgICAgb3V0bGluZTogeyAvLyBhdXRvY2FzdHMgYXMgbmV3IFNpbXBsZUxpbmVTeW1ib2woKVxuICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAwLCAwLjhdLFxuICAgICAgICB3aWR0aDogM1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChbJ21lc2gnXS5pbmNsdWRlcyhnZW9tZXRyeVR5cGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdtZXNoLTNkJywgLy8gYXV0b2Nhc3RzIGFzIG5ldyBNZXNoU3ltYm9sM0QoKVxuICAgICAgc3ltYm9sTGF5ZXJzOiBbe1xuICAgICAgICB0eXBlOiAnZmlsbCcsIC8vIGF1dG9jYXN0cyBhcyBuZXcgRmlsbFN5bWJvbDNETGF5ZXIoKVxuICAgICAgICBtYXRlcmlhbDogeyBjb2xvcjogWzI1NSwgMjU1LCAwLCAwLjhdIH1cbiAgICAgIH1dXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q2VudGVyUG9pbnQgKGdlb21ldHJ5OiBfX2VzcmkuR2VvbWV0cnkpOiBfX2VzcmkuUG9pbnQge1xuICAvLyBwb2ludCB8IG11bHRpcG9pbnQgfCBwb2x5bGluZSB8IHBvbHlnb24gfCBleHRlbnQgfCBtZXNoXG4gIHN3aXRjaCAoZ2VvbWV0cnkudHlwZSkge1xuICAgIGNhc2UgJ3BvaW50JzpcbiAgICAgIHJldHVybiBnZW9tZXRyeSBhcyBfX2VzcmkuUG9pbnRcbiAgICBjYXNlICdleHRlbnQnOlxuICAgICAgcmV0dXJuIChnZW9tZXRyeSBhcyBfX2VzcmkuRXh0ZW50KS5jZW50ZXJcbiAgICBjYXNlICdwb2x5Z29uJzpcbiAgICAgIHJldHVybiAoZ2VvbWV0cnkgYXMgX19lc3JpLlBvbHlnb24pLmNlbnRyb2lkXG4gICAgY2FzZSAncG9seWxpbmUnOlxuICAgICAgcmV0dXJuIChnZW9tZXRyeSBhcyBfX2VzcmkuUG9seWxpbmUpLmV4dGVudC5jZW50ZXJcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGdlb21ldHJ5ICYmIGdlb21ldHJ5LmV4dGVudCA/IGdlb21ldHJ5LmV4dGVudC5jZW50ZXIgOiB1bmRlZmluZWRcbiAgICAvLyB0b2RvXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lRmVhdHVyZSAoZmVhdHVyZTogSUZlYXR1cmUgfCBfX2VzcmkuR3JhcGhpYywgR3JhcGhpYzogdHlwZW9mIF9fZXNyaS5HcmFwaGljKTogX19lc3JpLkdyYXBoaWMge1xuICBsZXQgdGVtcEZlYXR1cmUgPSBudWxsXG4gIGlmICgoZmVhdHVyZSBhcyBhbnkpLmNsb25lKSB7XG4gICAgdGVtcEZlYXR1cmUgPSAoZmVhdHVyZSBhcyBhbnkpLmNsb25lKClcbiAgfSBlbHNlIHtcbiAgICB0ZW1wRmVhdHVyZSA9IEdyYXBoaWMuZnJvbUpTT04oT2JqZWN0LmFzc2lnbih7fSwgZmVhdHVyZSkpXG4gICAgdGVtcEZlYXR1cmUuYXR0cmlidXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIGZlYXR1cmUuYXR0cmlidXRlcylcbiAgfVxuICByZXR1cm4gdGVtcEZlYXR1cmVcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2plY3RHZW9tZXRyaWVzIChnZW9tZXRyaWVzOiBfX2VzcmkuR2VvbWV0cnlbXSwgc3BhdGlhbFJlZmVyZW5jZTogX19lc3JpLlNwYXRpYWxSZWZlcmVuY2UpOiBQcm9taXNlPF9fZXNyaS5HZW9tZXRyeVtdPiB7XG4gIGlmICghZ2VvbWV0cmllcyB8fCBnZW9tZXRyaWVzLmxlbmd0aCA9PT0gMCB8fCAhZ2VvbWV0cmllc1swXSB8fFxuICAgIHNwYXRpYWxSZWZlcmVuY2Uud2tpZCA9PT0gZ2VvbWV0cmllc1swXS5zcGF0aWFsUmVmZXJlbmNlLndraWQgfHwgKHNwYXRpYWxSZWZlcmVuY2UuZXF1YWxzKGdlb21ldHJpZXNbMF0uc3BhdGlhbFJlZmVyZW5jZSkpKSB7XG4gICAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShnZW9tZXRyaWVzKVxuICB9IGVsc2UgaWYgKHNwYXRpYWxSZWZlcmVuY2UuaXNXZWJNZXJjYXRvciAmJiBnZW9tZXRyaWVzWzBdLnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCkge1xuICAgIC8vIEluIGpzIGFwaSA0LngsIHRoZSB2aWV3IGNhbiBoYW5kbGUgV2ViTWVyY2F0b3IgYW5kIFdHUzg0IHNwYXRpYWxSZWZlcmVuY2UgYXV0b1xuICAgIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUoZ2VvbWV0cmllcylcbiAgfSBlbHNlIGlmIChzcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQgJiYgZ2VvbWV0cmllc1swXS5zcGF0aWFsUmVmZXJlbmNlLmlzV2ViTWVyY2F0b3IpIHtcbiAgICAvLyBJbiBqcyBhcGkgNC54LCB0aGUgdmlldyBjYW4gaGFuZGxlIFdlYk1lcmNhdG9yIGFuZCBXR1M4NCBzcGF0aWFsUmVmZXJlbmNlIGF1dG9cbiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGdlb21ldHJpZXMpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGF3YWl0IGdlb21ldHJ5VXRpbHMucHJvamVjdFRvU3BhdGlhbFJlZmVyZW5jZShnZW9tZXRyaWVzLCBzcGF0aWFsUmVmZXJlbmNlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzWm9vbVRvRmVhdHVyZXMgKG1hcEJhc2VWaWV3OiBfX2VzcmkuTWFwVmlldyB8IF9fZXNyaS5TY2VuZVZpZXcsIGxheWVyOiBhbnksIGZlYXR1cmVzOiBfX2VzcmkuR3JhcGhpY1tdKTogUHJvbWlzZTxfX2VzcmkuR3JhcGhpY1tdPiB7XG4gIGlmIChtYXBCYXNlVmlldyAmJiBtYXBCYXNlVmlldy50eXBlID09PSAnM2QnICYmIGxheWVyICYmIGxheWVyLnF1ZXJ5RmVhdHVyZXMgJiYgZmVhdHVyZXMpIHtcbiAgICByZXR1cm4gYXdhaXQgbG9hZEFyY0dJU0pTQVBJTW9kdWxlcyhbXG4gICAgICAnZXNyaS9yZXN0L3N1cHBvcnQvUXVlcnknXG4gICAgXSkudGhlbigobW9kdWxlcykgPT4ge1xuICAgICAgY29uc3QgW1F1ZXJ5XSA9IG1vZHVsZXNcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFF1ZXJ5KClcbiAgICAgIHF1ZXJ5LnJldHVybkdlb21ldHJ5ID0gdHJ1ZVxuICAgICAgcXVlcnkub3V0RmllbGRzID0gWycqJ11cbiAgICAgIHF1ZXJ5Lm9iamVjdElkcyA9IGZlYXR1cmVzLm1hcChmZWF0dXJlID0+IGZlYXR1cmUuYXR0cmlidXRlc1tsYXllci5vYmplY3RJZEZpZWxkXSlcbiAgICAgIHJldHVybiBsYXllci5xdWVyeUZlYXR1cmVzKHF1ZXJ5KS50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuZmVhdHVyZXMgJiYgcmVzdWx0LmZlYXR1cmVzLmxlbmd0aCA9PT0gZmVhdHVyZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShyZXN1bHQuZmVhdHVyZXMpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UucmVzb2x2ZShmZWF0dXJlcylcbiAgICAgICAgfVxuICAgICAgfSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGZlYXR1cmVzKVxuICAgICAgfSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBhd2FpdCBQcm9taXNlLnJlc29sdmUoZmVhdHVyZXMpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSXNMaXZlIChhcHBNb2RlOiBBcHBNb2RlKTogYm9vbGVhbiB7XG4gIGlmICh3aW5kb3cuamltdUNvbmZpZy5pc0luQnVpbGRlcikge1xuICAgIGlmIChhcHBNb2RlID09PSBBcHBNb2RlLkRlc2lnbikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExheWVyc0Zyb21EYXRhU291cmNlSWRzIChkYXRhU291cmNlSWRzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55PiB7XG4gIGNvbnN0IGxheWVyUHJvbWlzZXMgPSBbXVxuICBkYXRhU291cmNlSWRzLmZvckVhY2goZGF0YVNvdXJjZUlkID0+IHtcbiAgICBjb25zdCBkYXRhU291cmNlID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXREYXRhU291cmNlKGRhdGFTb3VyY2VJZCkgYXMgdW5rbm93biBhcyBKU0FQSUxheWVyTWl4aW5cbiAgICBsZXQgbGF5ZXJQcm9taXNlXG4gICAgaWYgKGRhdGFTb3VyY2U/LmxheWVyKSB7XG4gICAgICBsYXllclByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZGF0YVNvdXJjZS5sYXllcilcbiAgICB9IGVsc2UgaWYgKGRhdGFTb3VyY2U/LmNyZWF0ZUpTQVBJTGF5ZXJCeURhdGFTb3VyY2UpIHtcbiAgICAgIGxheWVyUHJvbWlzZSA9IGRhdGFTb3VyY2UuY3JlYXRlSlNBUElMYXllckJ5RGF0YVNvdXJjZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVyUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShudWxsKVxuICAgIH1cbiAgICBsYXllclByb21pc2VzLnB1c2gobGF5ZXJQcm9taXNlKVxuICB9KVxuICByZXR1cm4gUHJvbWlzZS5hbGwobGF5ZXJQcm9taXNlcylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEppbXVNYXBWaWV3SWQgKHdpZGdldElkOiBzdHJpbmcsIGRhdGFTb3VyY2VJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gSWYgZGF0YVNvdXJjZUlkIGlzIG51bGwsIG1ha2Ugc3VyZSBpdCBjb252ZXJ0cyB0byBlbXB0eSBzdHJpbmcuXG4gIGNvbnN0IGRzSWQgPSBkYXRhU291cmNlSWQgfHwgJydcbiAgcmV0dXJuIGAke3dpZGdldElkfS0ke2RzSWR9YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFwQmFzZVJlc3RvcmVEYXRhIChtYXBJbnN0YW5jZTogTWFwQmFzZSk6IE1hcGJhc2VSZXN0b3JlRGF0YSB7XG4gIGNvbnN0IHtcbiAgICBtYXBDb250YWluZXIsXG4gICAgc3RhdGUsXG4gICAgR2VvbWV0cnksXG4gICAgSW5pdGlhbFZpZXdQcm9wZXJ0aWVzLFxuICAgIFRpbGVMYXllcixcbiAgICBCYXNlbWFwLFxuICAgIE1hcFZpZXcsXG4gICAgU2NlbmVWaWV3LFxuICAgIEV4dGVudCxcbiAgICBWaWV3cG9pbnQsXG4gICAgUG9ydGFsSXRlbSxcbiAgICBQb3J0YWwsXG4gICAgV2ViTWFwLFxuICAgIFdlYlNjZW5lLFxuICAgIENvbG9yLFxuICAgIGV4cGVjdGVkRGF0YVNvdXJjZUluZm8sXG4gICAgbWFwQ3JlYXRpbmdJbmZvLFxuICAgIHZpZXcsXG4gICAgbGFzdFVwZGF0ZVZpZXdDb25maWcsXG4gICAgbWFwRHMsXG4gICAgZHNNYW5hZ2VyLFxuICAgIGlzRmlyc3RSZWNlaXZlTWVzc2FnZVxuICB9ID0gbWFwSW5zdGFuY2VcblxuICByZXR1cm4ge1xuICAgIG1hcENvbnRhaW5lcixcbiAgICBzdGF0ZSxcblxuICAgIEdlb21ldHJ5LFxuICAgIEluaXRpYWxWaWV3UHJvcGVydGllcyxcbiAgICBUaWxlTGF5ZXIsXG4gICAgQmFzZW1hcCxcbiAgICBNYXBWaWV3LFxuICAgIFNjZW5lVmlldyxcbiAgICBFeHRlbnQsXG4gICAgVmlld3BvaW50LFxuICAgIFBvcnRhbEl0ZW0sXG4gICAgUG9ydGFsLFxuICAgIFdlYk1hcCxcbiAgICBXZWJTY2VuZSxcbiAgICBDb2xvcixcblxuICAgIGV4cGVjdGVkRGF0YVNvdXJjZUluZm8sXG4gICAgbWFwQ3JlYXRpbmdJbmZvLFxuICAgIHZpZXcsXG4gICAgbGFzdFVwZGF0ZVZpZXdDb25maWcsXG4gICAgbWFwRHMsXG5cbiAgICBkc01hbmFnZXIsXG4gICAgaXNGaXJzdFJlY2VpdmVNZXNzYWdlXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVNYXBCYXNlIChtYXBJbnN0YW5jZTogTWFwQmFzZSwgcmVzdG9yZURhdGE6IE1hcGJhc2VSZXN0b3JlRGF0YSk6IHZvaWQge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocmVzdG9yZURhdGEpXG5cbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgIG1hcEluc3RhbmNlW2tleV0gPSByZXN0b3JlRGF0YVtrZXldXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVHdvV2lkZ2V0c011dHVhbGx5RXh0ZW50Q2hhbmdlICh3aWRnZXRJZDE6IHN0cmluZywgd2lkZ2V0SWQyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKHdpZGdldElkMSAmJiB3aWRnZXRJZDIpIHtcbiAgICBjb25zdCBtZXNzYWdlQ29uZmlncyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWcubWVzc2FnZUNvbmZpZ3NcblxuICAgIGlmIChtZXNzYWdlQ29uZmlncykge1xuICAgICAgY29uc3QgYWN0aW9uTmFtZXM6IHN0cmluZ1tdID0gWydwYW5UbycsICd6b29tVG9GZWF0dXJlJ11cbiAgICAgIGNvbnN0IG1lc3NhZ2VUeXBlID0gTWVzc2FnZVR5cGUuRXh0ZW50Q2hhbmdlXG5cbiAgICAgIGlmIChpc1dpZGdldFNlbmRBY3Rpb25zVG9Bbm90aGVyKHdpZGdldElkMSwgd2lkZ2V0SWQyLCBtZXNzYWdlQ29uZmlncywgbWVzc2FnZVR5cGUsIGFjdGlvbk5hbWVzKSAmJlxuICAgICAgICAgaXNXaWRnZXRTZW5kQWN0aW9uc1RvQW5vdGhlcih3aWRnZXRJZDIsIHdpZGdldElkMSwgbWVzc2FnZUNvbmZpZ3MsIG1lc3NhZ2VUeXBlLCBhY3Rpb25OYW1lcykpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2lkZ2V0U2VuZFpvb21Ub0FjdGlvblRvQW5vdGhlciAoc2VuZE1lc3NhZ2VXaWRnZXRJZDogc3RyaW5nLCBhY3Rpb25XaWRnZXRJZDogc3RyaW5nLCBtZXNzYWdlVHlwZTogTWVzc2FnZVR5cGUpOiBib29sZWFuIHtcbiAgaWYgKHNlbmRNZXNzYWdlV2lkZ2V0SWQgJiYgYWN0aW9uV2lkZ2V0SWQpIHtcbiAgICBjb25zdCBtZXNzYWdlQ29uZmlncyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKS5hcHBDb25maWcubWVzc2FnZUNvbmZpZ3NcblxuICAgIGlmIChtZXNzYWdlQ29uZmlncykge1xuICAgICAgY29uc3QgYWN0aW9uTmFtZXM6IHN0cmluZ1tdID0gWyd6b29tVG9GZWF0dXJlJ11cblxuICAgICAgcmV0dXJuIGlzV2lkZ2V0U2VuZEFjdGlvbnNUb0Fub3RoZXIoc2VuZE1lc3NhZ2VXaWRnZXRJZCwgYWN0aW9uV2lkZ2V0SWQsIG1lc3NhZ2VDb25maWdzLCBtZXNzYWdlVHlwZSwgYWN0aW9uTmFtZXMpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGlzV2lkZ2V0U2VuZEFjdGlvbnNUb0Fub3RoZXIgKFxuICBzZW5kTWVzc2FnZVdpZGdldElkOiBzdHJpbmcsXG4gIGFjdGlvbldpZGdldElkOiBzdHJpbmcsXG4gIG1lc3NhZ2VDb25maWdzOiBJbW11dGFibGVPYmplY3Q8TWVzc2FnZXNKc29uPixcbiAgbWVzc2FnZVR5cGU6IE1lc3NhZ2VUeXBlLFxuICBhY3Rpb25OYW1lczogc3RyaW5nW11cbik6IGJvb2xlYW4ge1xuICBpZiAobWVzc2FnZUNvbmZpZ3MpIHtcbiAgICBjb25zdCBtZXNzYWdlSnNvbkFycmF5ID0gT2JqZWN0LnZhbHVlcyhtZXNzYWdlQ29uZmlncylcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzc2FnZUpzb25BcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWVzc2FnZUpzb24gPSBtZXNzYWdlSnNvbkFycmF5W2ldXG5cbiAgICAgIGlmIChtZXNzYWdlSnNvbi53aWRnZXRJZCA9PT0gc2VuZE1lc3NhZ2VXaWRnZXRJZCAmJiBtZXNzYWdlSnNvbi5tZXNzYWdlVHlwZSA9PT0gbWVzc2FnZVR5cGUpIHtcbiAgICAgICAgY29uc3QgYWN0aW9ucyA9IG1lc3NhZ2VKc29uLmFjdGlvbnNcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFjdGlvbnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBjb25zdCBhY3Rpb24gPSBhY3Rpb25zW2pdXG5cbiAgICAgICAgICBpZiAoYWN0aW9uLndpZGdldElkID09PSBhY3Rpb25XaWRnZXRJZCkge1xuICAgICAgICAgICAgaWYgKGFjdGlvbk5hbWVzLmluY2x1ZGVzKGFjdGlvbi5hY3Rpb25OYW1lKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lbGlrZVZpZXdwb2ludHMgKHZpZXc6IE1hcGJhc2VWaWV3LCB2cDE6IF9fZXNyaS5WaWV3cG9pbnQsIHZwMjogX19lc3JpLlZpZXdwb2ludCk6IGJvb2xlYW4ge1xuICBpZiAoIXZwMSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKCF2cDIpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIFdlIG5lZWQgdG8gY2hlY2sgYm90aCB0YXJnZXRHZW9tZXRyeSBhbmQgY2FtZXJhLlxuICBpZiAodnAxLnRhcmdldEdlb21ldHJ5ICYmIHZwMS50YXJnZXRHZW9tZXRyeS5kZWNsYXJlZENsYXNzID09PSAnZXNyaS5nZW9tZXRyeS5Qb2ludCcgJiYgdnAyLnRhcmdldEdlb21ldHJ5ICYmIHZwMi50YXJnZXRHZW9tZXRyeS5kZWNsYXJlZENsYXNzID09PSAnZXNyaS5nZW9tZXRyeS5Qb2ludCcpIHtcbiAgICBjb25zdCBzY3JlZW5Qb2ludDEgPSB2aWV3LnRvU2NyZWVuKHZwMS50YXJnZXRHZW9tZXRyeSBhcyBfX2VzcmkuUG9pbnQpXG4gICAgY29uc3Qgc2NyZWVuUG9pbnQyID0gdmlldy50b1NjcmVlbih2cDIudGFyZ2V0R2VvbWV0cnkgYXMgX19lc3JpLlBvaW50KVxuICAgIGNvbnN0IGRlbHRhWCA9IHNjcmVlblBvaW50MS54IC0gc2NyZWVuUG9pbnQyLnhcbiAgICBjb25zdCBkZWx0YVkgPSBzY3JlZW5Qb2ludDEueSAtIHNjcmVlblBvaW50Mi55XG4gICAgY29uc3QgZGlzdCA9IE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpXG5cbiAgICBpZiAoZGlzdCA+PSA1KSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb25zdCBjYW1lcmExID0gdnAxLmNhbWVyYVxuICBjb25zdCBjYW1lcmEyID0gdnAyLmNhbWVyYVxuXG4gIGlmIChjYW1lcmExICYmIGNhbWVyYTIpIHtcbiAgICAvLyBjb21wYXJlIHZpZXdwb2ludCBmb3IgU2NlbmVWaWV3XG4gICAgY29uc3QgaGVhZGluZzEgPSBwYXJzZUZsb2F0KGNhbWVyYTEuaGVhZGluZy50b0ZpeGVkKDIpKVxuICAgIGNvbnN0IGhlYWRpbmcyID0gcGFyc2VGbG9hdChjYW1lcmEyLmhlYWRpbmcudG9GaXhlZCgyKSlcblxuICAgIGlmIChoZWFkaW5nMSAhPT0gaGVhZGluZzIpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IHRpbHQxID0gcGFyc2VGbG9hdChjYW1lcmExLnRpbHQudG9GaXhlZCgyKSlcbiAgICBjb25zdCB0aWx0MiA9IHBhcnNlRmxvYXQoY2FtZXJhMi50aWx0LnRvRml4ZWQoMikpXG5cbiAgICBpZiAodGlsdDEgIT09IHRpbHQyKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBwb3NpdGlvbkRpc3QgPSBjYW1lcmExLnBvc2l0aW9uLmRpc3RhbmNlKGNhbWVyYTIucG9zaXRpb24pXG5cbiAgICBpZiAocG9zaXRpb25EaXN0ID49IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBjb21wYXJlIHZpZXdwb2ludCBmb3IgTWFwVmlld1xuICAgIGNvbnN0IHJvdGF0aW9uMSA9IHBhcnNlRmxvYXQodnAxLnJvdGF0aW9uLnRvRml4ZWQoMikpXG4gICAgY29uc3Qgcm90YXRpb24yID0gcGFyc2VGbG9hdCh2cDIucm90YXRpb24udG9GaXhlZCgyKSlcblxuICAgIGlmIChyb3RhdGlvbjEgIT09IHJvdGF0aW9uMikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgZGVsdGFTY2FsZSA9IHZwMS5zY2FsZSAtIHZwMi5zY2FsZVxuXG4gICAgaWYgKE1hdGguYWJzKGRlbHRhU2NhbGUpID49IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWV3cG9pbnRJbnN0YW5jZUZyb21IaXN0b3J5ICh2aWV3OiBNYXBiYXNlVmlldywgdmlld3BvaW50SW5kZXg6IG51bWJlcik6IF9fZXNyaS5WaWV3cG9pbnQge1xuICBpZiAodmlldy52aWV3cG9pbnRIaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBsYXN0SW5kZXggPSB2aWV3LnZpZXdwb2ludEhpc3RvcnkubGVuZ3RoIC0gMVxuXG4gICAgaWYgKHZpZXdwb2ludEluZGV4ID49IDAgJiYgdmlld3BvaW50SW5kZXggPD0gbGFzdEluZGV4KSB7XG4gICAgICBjb25zdCB2aWV3cG9pbnQgPSB2aWV3LnZpZXdwb2ludEhpc3Rvcnlbdmlld3BvaW50SW5kZXhdXG4gICAgICByZXR1cm4gdmlld3BvaW50LmNsb25lKClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hcFVybEhhc2hQYXJhbXMge1xuICBhY3RpdmVfZGF0YXNvdXJjZV9pZD86IHN0cmluZ1xuICBtYXBfc3RhdGU/OiBzdHJpbmdcbiAgbGF5ZXJfdmlzaWJpbGl0eT86IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVXJsSGFzaFBhcmFtc0ZvckFjdGl2ZUppbXVNYXBWaWV3IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcpIHtcbiAgaWYgKGppbXVNYXBWaWV3ICYmIGppbXVNYXBWaWV3LmlzQWN0aXZlICYmIGppbXVNYXBWaWV3LnZpZXcgJiYgIWppbXVNYXBWaWV3LnZpZXcuZGVzdHJveWVkKSB7XG4gICAgY29uc3QgdmlldyA9IGppbXVNYXBWaWV3LnZpZXcgYXMgTWFwYmFzZVZpZXdcbiAgICBjb25zdCB1cmxNYW5hZ2VyID0gVXJsTWFuYWdlci5nZXRJbnN0YW5jZSgpXG4gICAgY29uc3Qgdmlld3BvaW50SnNvbiA9IHZpZXcudmlld3BvaW50ID8gdmlldy52aWV3cG9pbnQudG9KU09OKCkgOiBudWxsXG4gICAgY29uc3QgZXh0ZW50SnNvbiA9IHZpZXcuZXh0ZW50ID8gdmlldy5leHRlbnQudG9KU09OKCkgOiBudWxsXG5cbiAgICBsZXQgbWFwU3RhdGVTdHIgPSBudWxsXG5cbiAgICBpZiAodmlld3BvaW50SnNvbiAmJiBleHRlbnRKc29uKSB7XG4gICAgICBjb25zdCBtYXBTdGF0ZSA9IHtcbiAgICAgICAgdmlld3BvaW50OiB2aWV3cG9pbnRKc29uLFxuICAgICAgICBleHRlbnQ6IGV4dGVudEpzb25cbiAgICAgIH1cblxuICAgICAgbWFwU3RhdGVTdHIgPSBKU09OLnN0cmluZ2lmeShtYXBTdGF0ZSlcbiAgICB9XG5cbiAgICB2aWV3Lmxhc3RWaWV3cG9pbnRVcGRhdGVVcmxQYXJhbXMgPSB2aWV3LnZpZXdwb2ludCA/IHZpZXcudmlld3BvaW50LmNsb25lKCkgOiBudWxsXG5cbiAgICBjb25zdCBhY3RpdmVEYXRhc291cmNlSWQgPSBqaW11TWFwVmlldy5kYXRhU291cmNlSWQgfHwgbnVsbFxuXG4gICAgY29uc3QgbWFwVXJsSGFzaFBhcmFtczogTWFwVXJsSGFzaFBhcmFtcyA9IHtcbiAgICAgIGFjdGl2ZV9kYXRhc291cmNlX2lkOiBhY3RpdmVEYXRhc291cmNlSWQsXG4gICAgICAvLyBpZiBtYXBfc3RhdGUgaXMgbnVsbCwgVXJsTWFuYWdlciB3aWxsIHJlbW92ZSBpdCBmcm9tIHVybFxuICAgICAgbWFwX3N0YXRlOiBtYXBTdGF0ZVN0clxuICAgIH1cblxuICAgIHVybE1hbmFnZXIuc2V0V2lkZ2V0VXJsUGFyYW1zKGppbXVNYXBWaWV3Lm1hcFdpZGdldElkLCBtYXBVcmxIYXNoUGFyYW1zKVxuICB9XG59XG4iLCJpbXBvcnQgeyBCYXNlVmVyc2lvbk1hbmFnZXIsIEltbXV0YWJsZSB9IGZyb20gJ2ppbXUtY29yZSdcblxuY2xhc3MgVmVyc2lvbk1hbmFnZXIgZXh0ZW5kcyBCYXNlVmVyc2lvbk1hbmFnZXIge1xuICB2ZXJzaW9ucyA9IFt7XG4gICAgdmVyc2lvbjogJzEuMTAuMCcsXG4gICAgZGVzY3JpcHRpb246ICcxLjEwLjAnLFxuICAgIHVwZ3JhZGVyOiAob2xkQ29uZmlnKSA9PiB7XG4gICAgICBsZXQgbmV3Q29uZmlnXG4gICAgICBpZiAob2xkQ29uZmlnLnRvb2xDb25pZmcpIHtcbiAgICAgICAgLy8gZml4IHR5cG8gZm9yICd0b29sQ29uaWZnJ1xuICAgICAgICBuZXdDb25maWcgPSBJbW11dGFibGUud2l0aG91dChvbGRDb25maWcsICd0b29sQ29uaWZnJylcbiAgICAgICAgbmV3Q29uZmlnID0gbmV3Q29uZmlnLnNldCgndG9vbENvbmZpZycsIG9sZENvbmZpZy50b29sQ29uaWZnKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld0NvbmZpZ1xuICAgIH1cbiAgfV1cbn1cblxuZXhwb3J0IGNvbnN0IHZlcnNpb25NYW5hZ2VyID0gbmV3IFZlcnNpb25NYW5hZ2VyKClcbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9maWxsZWQvZGF0YS9wbGFjZWhvbGRlci1tYXAuc3ZnJ1xuXG5leHBvcnQgY29uc3QgUGxhY2Vob2xkZXJNYXBGaWxsZWQgPSAocHJvcHM6IFNWR0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IFNWRyA9IHdpbmRvdy5TVkdcbiAgY29uc3QgeyBjbGFzc05hbWUsIC4uLm90aGVycyB9ID0gcHJvcHNcblxuICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcygnamltdS1pY29uIGppbXUtaWNvbi1jb21wb25lbnQnLCBjbGFzc05hbWUpXG4gIGlmICghU1ZHKSByZXR1cm4gPHN2ZyBjbGFzc05hbWU9e2NsYXNzZXN9IHsuLi5vdGhlcnMgYXMgYW55fSAvPlxuICByZXR1cm4gPFNWRyBjbGFzc05hbWU9e2NsYXNzZXN9IHNyYz17c3JjfSB7Li4ub3RoZXJzfSAvPlxufVxuIiwiaW1wb3J0IHsgUmVhY3QsIGNsYXNzTmFtZXMgfSBmcm9tICdqaW11LWNvcmUnXG5pbXBvcnQgeyB0eXBlIFNWR0NvbXBvbmVudFByb3BzIH0gZnJvbSAnamltdS11aSdcbmltcG9ydCBzcmMgZnJvbSAnLi4vLi4vc3ZnL291dGxpbmVkL2RpcmVjdGlvbmFsL2Fycm93LWZhdC1sZWZ0LnN2ZydcblxuZXhwb3J0IGNvbnN0IEFycm93RmF0TGVmdE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsImltcG9ydCB7IFJlYWN0LCBjbGFzc05hbWVzIH0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBTVkdDb21wb25lbnRQcm9wcyB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgc3JjIGZyb20gJy4uLy4uL3N2Zy9vdXRsaW5lZC9kaXJlY3Rpb25hbC9hcnJvdy1mYXQtcmlnaHQuc3ZnJ1xuXG5leHBvcnQgY29uc3QgQXJyb3dGYXRSaWdodE91dGxpbmVkID0gKHByb3BzOiBTVkdDb21wb25lbnRQcm9wcykgPT4ge1xuICBjb25zdCBTVkcgPSB3aW5kb3cuU1ZHXG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlcnMgfSA9IHByb3BzXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNsYXNzTmFtZXMoJ2ppbXUtaWNvbiBqaW11LWljb24tY29tcG9uZW50JywgY2xhc3NOYW1lKVxuICBpZiAoIVNWRykgcmV0dXJuIDxzdmcgY2xhc3NOYW1lPXtjbGFzc2VzfSB7Li4ub3RoZXJzIGFzIGFueX0gLz5cbiAgcmV0dXJuIDxTVkcgY2xhc3NOYW1lPXtjbGFzc2VzfSBzcmM9e3NyY30gey4uLm90aGVyc30gLz5cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2FyY2dpc19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV9sYXlvdXRzX2xheW91dF9ydW50aW1lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2ppbXVfdWlfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKipcbiAqIFdlYnBhY2sgd2lsbCByZXBsYWNlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHdpdGggX193ZWJwYWNrX3JlcXVpcmVfXy5wIHRvIHNldCB0aGUgcHVibGljIHBhdGggZHluYW1pY2FsbHkuXG4gKiBUaGUgcmVhc29uIHdoeSB3ZSBjYW4ndCBzZXQgdGhlIHB1YmxpY1BhdGggaW4gd2VicGFjayBjb25maWcgaXM6IHdlIGNoYW5nZSB0aGUgcHVibGljUGF0aCB3aGVuIGRvd25sb2FkLlxuICogKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gQHRzLWlnbm9yZVxuX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB3aW5kb3cuamltdUNvbmZpZy5iYXNlVXJsXG4iLCIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7XG4gIFJlYWN0LCBSZWFjdERPTSwgY3NzLCBqc3gsIGdldEFwcFN0b3JlLCB0eXBlIEFsbFdpZGdldFByb3BzLCBTZXNzaW9uTWFuYWdlciwgdHlwZSBEYXRhUmVjb3JkU2V0LFxuICB1dGlscywgQXBwTW9kZSwgdHlwZSBJTVN0YXRlLCBjbGFzc05hbWVzLCBwb2xpc2hlZCwgUmVhY3RSZXNpemVEZXRlY3RvciwgTXV0YWJsZVN0b3JlTWFuYWdlciwgdHlwZSBJTVVybFBhcmFtZXRlcnNcbn0gZnJvbSAnamltdS1jb3JlJ1xuaW1wb3J0IHsgdHlwZSBJTUNvbmZpZyB9IGZyb20gJy4uL2NvbmZpZydcbmltcG9ydCBNdWx0aVNvdXJjZU1hcCBmcm9tICcuL2NvbXBvbmVudHMvbXVsdGlzb3VyY2VtYXAnXG5pbXBvcnQgRGVmYXVsdE1hcCBmcm9tICcuL2NvbXBvbmVudHMvZGVmYXVsdC1tYXAnXG5pbXBvcnQgeyB0eXBlIElGZWF0dXJlIH0gZnJvbSAnQGVzcmkvYXJjZ2lzLXJlc3QtdHlwZXMnXG5pbXBvcnQgeyBjaGVja0lzTGl2ZSwgdHlwZSBNYXBVcmxIYXNoUGFyYW1zIH0gZnJvbSAnLi91dGlscydcbmltcG9ydCB7XG4gIHR5cGUgSmltdU1hcFZpZXdHcm91cCwgdHlwZSBTaG93T25NYXBEYXRhcywgdHlwZSBBZGRUb01hcERhdGFzLCB0eXBlIEppbXVNYXBWaWV3LCB0eXBlIEppbXVMYXllclZpZXcsXG4gIERhdGFDaGFuZ2VTdGF0dXMsIGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMsIE1hcFZpZXdNYW5hZ2VyXG59IGZyb20gJ2ppbXUtYXJjZ2lzJ1xuaW1wb3J0IHsgVmlld3BvcnRWaXNpYmlsaXR5Q29udGV4dCwgUGFnZVZpc2liaWxpdHlDb250ZXh0LCBWaWV3VmlzaWJpbGl0eUNvbnRleHQgfSBmcm9tICdqaW11LWxheW91dHMvbGF5b3V0LXJ1bnRpbWUnXG5pbXBvcnQgeyB2ZXJzaW9uTWFuYWdlciB9IGZyb20gJy4uL3ZlcnNpb24tbWFuYWdlcidcbmltcG9ydCB7IExvYWRpbmcsIExvYWRpbmdUeXBlLCBJY29uLCBEYXRhQWN0aW9uTGlzdCwgRGF0YUFjdGlvbkxpc3RTdHlsZSB9IGZyb20gJ2ppbXUtdWknXG5pbXBvcnQgeyB0eXBlIFpvb21Ub0ZlYXR1cmVBY3Rpb25WYWx1ZSB9IGZyb20gJy4uL21lc3NhZ2UtYWN0aW9ucy96b29tLXRvLWZlYXR1cmUtYWN0aW9uJ1xuaW1wb3J0IHsgdHlwZSBQYW5Ub0FjdGlvblZhbHVlIH0gZnJvbSAnLi4vbWVzc2FnZS1hY3Rpb25zL3Bhbi10by1hY3Rpb24nXG5pbXBvcnQgZGVmYXVsdE1lc3NhZ2VzIGZyb20gJy4vdHJhbnNsYXRpb25zL2RlZmF1bHQnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uUmVsYXRlZFByb3BzIHtcbiAgem9vbVRvRmVhdHVyZUFjdGlvblZhbHVlPzogWm9vbVRvRmVhdHVyZUFjdGlvblZhbHVlXG4gIHBhblRvQWN0aW9uVmFsdWU/OiBQYW5Ub0FjdGlvblZhbHVlXG4gIG5ld0ZlYXR1cmVTZXRBY3Rpb25WYWx1ZT86IHtcbiAgICB2YWx1ZTogeyBbbGF5ZXJJRDogc3RyaW5nXTogX19lc3JpLkZlYXR1cmVTZXQgfVxuICAgIHByb21pc2U/OiBQcm9taXNlPGFueT5cbiAgfVxuICBjaGFuZ2VkRmVhdHVyZVNldEFjdGlvblZhbHVlPzogeyBbbGF5ZXJJRDogc3RyaW5nXTogX19lc3JpLkZlYXR1cmVTZXQgfVxuICBzZWxlY3RGZWF0dXJlQWN0aW9uVmFsdWU/OiBJRmVhdHVyZVtdIHwgX19lc3JpLkdyYXBoaWNbXVxuICBmbGFzaEFjdGlvblZhbHVlPzoge1xuICAgIGxheWVyRGF0YVNvdXJjZUlkOiBzdHJpbmdcbiAgICBxdWVyeVNRTDogc3RyaW5nXG4gIH1cbiAgZmlsdGVyQWN0aW9uVmFsdWU/OiB7XG4gICAgbGF5ZXJEYXRhU291cmNlSWQ6IHN0cmluZ1xuICAgIHF1ZXJ5U1FMOiBzdHJpbmdcbiAgfVxuICBzaG93T25NYXBEYXRhcz86IFNob3dPbk1hcERhdGFzXG4gIGFkZFRvTWFwRGF0YXM/OiBBZGRUb01hcERhdGFzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFwV2lkZ2V0UHJvcHMgZXh0ZW5kcyBBbGxXaWRnZXRQcm9wczxJTUNvbmZpZz4ge1xuICBtdXRhYmxlU3RhdGVQcm9wczogQWN0aW9uUmVsYXRlZFByb3BzXG4gIGFwcE1vZGU6IEFwcE1vZGVcbiAgaXNQcmludFByZXZpZXc6IGJvb2xlYW5cbiAgcXVlcnlPYmplY3Q6IElNVXJsUGFyYW1ldGVyc1xuICBhdXRvQ29udHJvbFdpZGdldElkOiBzdHJpbmdcbiAgaXNSdW5BcHBNb2RlOiBib29sZWFuXG4gIHJ1bnRpbWVVcmxIYXNoUGFyYW1zOiBNYXBVcmxIYXNoUGFyYW1zXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIHN0YXJ0TG9hZE1vZHVsZXM6IGJvb2xlYW5cbiAgd2lkdGhCcmVha3BvaW50OiBzdHJpbmdcbiAgd2lkZ2V0SGVpZ2h0OiBudW1iZXJcbiAgaXNGdWxsU2NyZWVuOiBib29sZWFuXG4gIGRhdGFBY3Rpb25EYXRhU2V0OiBEYXRhUmVjb3JkU2V0XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8TWFwV2lkZ2V0UHJvcHMsIFN0YXRlPiB7XG4gIHBhcmVudENvbnRhaW5lcjogSFRNTEVsZW1lbnRcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudFxuICBjb250YWluZXJDbGllbnRSZWN0OiBDbGllbnRSZWN0IHwgRE9NUmVjdFxuICBtdWx0aVNvdXJjZU1hcEluc3RhbmNlOiBNdWx0aVNvdXJjZU1hcCA9IG51bGxcbiAgYWN0aXZlSmltdU1hcFZpZXc6IEppbXVNYXBWaWV3ID0gbnVsbFxuICB3YXRjaFNlbGVjdGVkRmVhdHVyZUhhbmRsZTogX19lc3JpLldhdGNoSGFuZGxlID0gbnVsbFxuICBkYXRhQWN0aW9uTGlzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBudWxsXG4gIHJlYWN0aXZlVXRpbHM6IHR5cGVvZiBfX2VzcmkucmVhY3RpdmVVdGlscyA9IG51bGxcbiAgcG9wdXBEb21Ob2RlT2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgPSBudWxsXG4gIHJlYWRvbmx5IHdhcm5pbmdJY29uOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLndhcm5pbmdJY29uID0gYDxzdmcgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE1XCIgdmlld0JveD1cIjAgMCAxNiAxNVwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD1cIk03LjA5OTI2IDUuMzcwMDRDNy4wNDU5OCA0LjgzNzI5IDcuNDY0MzQgNC4zNzUgNy45OTk3NSA0LjM3NUM4LjUzNTE2IDQuMzc1IDguOTUzNTMgNC44MzcyOCA4LjkwMDI1IDUuMzcwMDRMOC41NDk1IDguODc3NDhDOC41MjEyNiA5LjE1OTkyIDguMjgzNiA5LjM3NSA3Ljk5OTc1IDkuMzc1QzcuNzE1OTEgOS4zNzUgNy40NzgyNSA5LjE1OTkyIDcuNDUgOC44Nzc0OEw3LjA5OTI2IDUuMzcwMDRaXCIgZmlsbD1cIiM5Mzg1MDBcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTcuOTk5NzUgMTIuMzc1QzguNTUyMDQgMTIuMzc1IDguOTk5NzUgMTEuOTI3MyA4Ljk5OTc1IDExLjM3NUM4Ljk5OTc1IDEwLjgyMjcgOC41NTIwNCAxMC4zNzUgNy45OTk3NSAxMC4zNzVDNy40NDc0NyAxMC4zNzUgNi45OTk3NSAxMC44MjI3IDYuOTk5NzUgMTEuMzc1QzYuOTk5NzUgMTEuOTI3MyA3LjQ0NzQ3IDEyLjM3NSA3Ljk5OTc1IDEyLjM3NVpcIiBmaWxsPVwiIzkzODUwMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgZD1cIk0xLjY2NjQyIDE0LjM3NUMwLjkxMTUgMTQuMzc1IDAuNDI4ODExIDEzLjU3MDUgMC43ODQwNjcgMTIuOTA0NEw3LjExNzQgMS4wMjk0MUM3LjQ5Mzg3IDAuMzIzNTI5IDguNTA1NjQgMC4zMjM1MjkgOC44ODIxMSAxLjAyOTQxTDE1LjIxNTQgMTIuOTA0NEMxNS41NzA3IDEzLjU3MDUgMTUuMDg4IDE0LjM3NSAxNC4zMzMxIDE0LjM3NUgxLjY2NjQyWk0xLjY2NjQyIDEzLjM3NUw3Ljk5OTc1IDEuNUwxNC4zMzMxIDEzLjM3NUgxLjY2NjQyWlwiIGZpbGw9XCIjOTM4NTAwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+YFxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB3aWR0aEJyZWFrcG9pbnQ6IG51bGwsXG4gICAgICB3aWRnZXRIZWlnaHQ6IG51bGwsXG4gICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxuICAgICAgZGF0YUFjdGlvbkRhdGFTZXQ6IG51bGxcbiAgICB9IGFzIFN0YXRlXG5cbiAgICB0aGlzLmRhdGFBY3Rpb25MaXN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aGlzLmRhdGFBY3Rpb25MaXN0Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdkYXRhLWFjdGlvbi1saXN0LXdyYXBwZXInXG5cbiAgICB0aGlzLmxvYWRSZWFjdGl2ZVV0aWxzKClcbiAgfVxuXG4gIGdldFdpZGdldFN5bGUgKCkge1xuICAgIHJldHVybiBjc3NgXG4gICAgICAubWFwLWxvYWRpbmctYmFyIHtcbiAgICAgICAgei1pbmRleDogODtcbiAgICAgIH1cblxuICAgICAgLm1hcC13YXJuaW5nLWJhciB7XG4gICAgICAgIHotaW5kZXg6IDg7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgYm90dG9tOiA0cHg7XG4gICAgICAgIGxlZnQ6IDRweDtcbiAgICAgICAgcmlnaHQ6IDRweDtcbiAgICAgICAgaGVpZ2h0OiAzNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZGViO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmZmNTkyO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cbiAgICAgICAgLndhcm5pbmctaWNvbiB7XG4gICAgICAgICAgd2lkdGg6IDE0cHg7XG4gICAgICAgICAgbWFyZ2luOiAwIDEycHggMCAxMnB4O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5tYXAtZml4LWxheW91dCB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHotaW5kZXg6IDc7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuXG4gICAgICAuaGlkZS1tYXAtdG9vbHMtbGF5b3V0IC5tYXAtdG9vbC1sYXlvdXR7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC5lc3JpLXZpZXctcm9vdCA+IC5lc3JpLXVpIHtcbiAgICAgICAgei1pbmRleDogdW5zZXQ7XG4gICAgICB9XG5cbiAgICAgIC5lc3JpLXVpLW1hbnVhbC1jb250YWluZXIgLmVzcmktc3dpcGUge1xuICAgICAgICB6LWluZGV4OiAwO1xuICAgICAgfVxuXG4gICAgICAuZXNyaS11aSAuZXNyaS1wb3B1cCB7XG4gICAgICAgIHotaW5kZXg6IDk7XG4gICAgICB9XG5cbiAgICAgIC5kYXRhLWFjdGlvbi1saXN0LXdyYXBwZXIge1xuICAgICAgICBtYXJnaW46IDNweDtcbiAgICAgIH1cbiAgICBgXG4gIH1cblxuICBnZXRTdHlsZSAoKSB7XG4gICAgY29uc3QgdGhlbWUgPSB0aGlzLnByb3BzLnRoZW1lXG5cbiAgICByZXR1cm4gY3NzYFxuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gICAgICAubWFwLWlzLWxpdmUtbW9kZSB7XG4gICAgICAgIC5leGJtYXAtdWkge1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAuaXMtd2lkZ2V0IHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC53aWRnZXQtbWFwLXVzZW1hc2sge1xuICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0byAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAubWFwLWlzLWRlc2lnbi1tb2RlIHtcbiAgICAgICAgLmV4Ym1hcC11aSxcbiAgICAgICAgLmV4Ym1hcC11aS10b29sIHtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLmlzLXdpZGdldCB7XG4gICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAud2lkZ2V0LW1hcHtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB6LWluZGV4OiAtMTtcbiAgICAgICAgLm92ZXJ2aWV3LWNvbnRhaW5lcntcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgdG9wOiAxMnB4O1xuICAgICAgICAgIHJpZ2h0OiAxMnB4O1xuICAgICAgICAgIHdpZHRoOiAzMDBweDtcbiAgICAgICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIH1cblxuICAgICAgICAuZXh0ZW50LWNvbnRhaW5lcntcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHotaW5kZXg6IDI7XG4gICAgICAgIH1cblxuICAgICAgICAuZXh0ZW50LWJ0bi1jb250YWluZXJ7XG4gICAgICAgICAgYnV0dG9ue1xuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLnByZXZpb3VzLWV4dGVudC1idG57XG4gICAgICAgICAgICBjb2xvcjogIzExMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLm5leHQtZXh0ZW50LWJ0bntcbiAgICAgICAgICAgIGNvbG9yOiAjMjIyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAubWFwc3dpdGNoLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgei1pbmRleDogNztcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgYm90dG9tOiAxMHB4O1xuICAgICAgICBsZWZ0OiAxMHB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjMpXG4gICAgICB9XG5cbiAgICAgIC5tYXBzd2l0Y2gtaWNvbiB7XG4gICAgICAgIGZpbGw6IGJsYWNrO1xuICAgICAgICBsZWZ0OiA4cHg7XG4gICAgICAgIHRvcDogOHB4O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfVxuXG4gICAgICAud2lkZ2V0LW1hcC1iYWNrZ3JvdW5kIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMud2hpdGV9O1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC53aWRnZXQtbWFwLWNyYXNoZWQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3BvbGlzaGVkLnJnYmEodGhlbWUuY29sb3JzLndoaXRlLCAwLjg1KX07XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgdG9wOiAwO1xuXG4gICAgICAgIC53aWRnZXQtbWFwLWNyYXNoZWQtbGFiZWwtcGFkZGluZyB7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAke3BvbGlzaGVkLnJlbSgyNCl9O1xuICAgICAgICAgIHBhZGRpbmctcmlnaHQ6ICR7cG9saXNoZWQucmVtKDI0KX07XG4gICAgICAgIH1cblxuICAgICAgICAud2lkZ2V0LW1hcC1jcmFzaGVkLWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6ICR7cG9saXNoZWQucmVtKDEzKX07XG4gICAgICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLmJsYWNrfTtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBhcHBlYXIge1xuICAgICAgICAwJXtvcGFjaXR5OjB9XG4gICAgICAgIDI1JXtvcGFjaXR5Oi4yNX1cbiAgICAgICAgNTAle29wYWNpdHk6LjU7fVxuICAgICAgICA3NSV7b3BhY2l0eTouNzV9XG4gICAgICAgIDEwMCV7b3BhY2l0eToxO31cbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBkaXNhcHBlYXIge1xuICAgICAgICAwJXtvcGFjaXR5OjF9XG4gICAgICAgIDI1JXtvcGFjaXR5Oi43NX1cbiAgICAgICAgNTAle29wYWNpdHk6LjU7fVxuICAgICAgICA3NSV7b3BhY2l0eTouMjV9XG4gICAgICAgIDEwMCV7b3BhY2l0eTowO31cbiAgICAgIH1cblxuICAgICAgLm11bHRpc291cmNlbWFwLWl0ZW0tYXBwZWFyIHtcbiAgICAgICAgYW5pbWF0aW9uOiBhcHBlYXIgMzAwbXM7XG4gICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBhcHBlYXIgMzAwbXM7XG4gICAgICAgIC1tb3otYW5pbWF0aW9uOiBhcHBlYXIgMzAwbXM7XG4gICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICAtbW96LWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluO1xuICAgICAgICAtd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2UtaW47XG4gICAgICAgIC1tb3otYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbjtcbiAgICAgIH1cblxuICAgICAgLm11bHRpc291cmNlbWFwLWl0ZW0tZGlzYXBwZWFyIHtcbiAgICAgICAgYW5pbWF0aW9uOiBkaXNhcHBlYXIgMzAwbXM7XG4gICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBkaXNhcHBlYXIgMzAwbXM7XG4gICAgICAgIC1tb3otYW5pbWF0aW9uOiBkaXNhcHBlYXIgMzAwbXM7XG4gICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICAtbW96LWFuaW1hdGlvbi1maWxsLW1vZGU6IGZvcndhcmRzO1xuICAgICAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluO1xuICAgICAgICAtd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2UtaW47XG4gICAgICAgIC1tb3otYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbjtcbiAgICAgIH1cblxuICAgICAgLm11bHRpc291cmNlbWFwLWl0ZW0tYXBwZWFyLW5vYW5pbWF0ZSB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICB9XG5cbiAgICAgIC5tdWx0aXNvdXJjZW1hcC1pdGVtLWRpc2FwcGVhci1ub2FuaW1hdGUge1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgfVxuICAgICAgYFxuICB9XG5cbiAgc3RhdGljIHZlcnNpb25NYW5hZ2VyID0gdmVyc2lvbk1hbmFnZXJcblxuICBzdGF0aWMgbWFwRXh0cmFTdGF0ZVByb3BzID0gKHN0YXRlOiBJTVN0YXRlLCBwcm9wczogQWxsV2lkZ2V0UHJvcHM8SU1Db25maWc+KSA9PiB7XG4gICAgbGV0IGF1dG9Db250cm9sV2lkZ2V0SWQgPSAnJ1xuXG4gICAgY29uc3QgbWFwV2lkZ2V0SWQgPSBwcm9wcy5pZFxuXG4gICAgaWYgKHN0YXRlLm1hcFdpZGdldHNJbmZvICYmIG1hcFdpZGdldElkKSB7XG4gICAgICBhdXRvQ29udHJvbFdpZGdldElkID0gc3RhdGUubWFwV2lkZ2V0c0luZm9bbWFwV2lkZ2V0SWRdPy5hdXRvQ29udHJvbFdpZGdldElkIHx8ICcnXG4gICAgfVxuXG4gICAgY29uc3QgYXBwTW9kZSA9IHN0YXRlICYmIHN0YXRlLmFwcFJ1bnRpbWVJbmZvICYmIHN0YXRlLmFwcFJ1bnRpbWVJbmZvLmFwcE1vZGVcbiAgICBjb25zdCBpc1J1bkFwcE1vZGUgPSBhcHBNb2RlID09PSBBcHBNb2RlLlJ1blxuXG4gICAgbGV0IHJ1bnRpbWVVcmxIYXNoUGFyYW1zOiBNYXBVcmxIYXNoUGFyYW1zID0gbnVsbFxuXG4gICAgaWYgKGlzUnVuQXBwTW9kZSAmJiBzdGF0ZS51cmxIYXNoT2JqZWN0KSB7XG4gICAgICBydW50aW1lVXJsSGFzaFBhcmFtcyA9IHN0YXRlLnVybEhhc2hPYmplY3RbbWFwV2lkZ2V0SWRdXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFwcE1vZGU6IGFwcE1vZGUsXG4gICAgICBpc1ByaW50UHJldmlldzogc3RhdGUuYXBwUnVudGltZUluZm8uaXNQcmludFByZXZpZXcsXG4gICAgICBxdWVyeU9iamVjdDogc3RhdGUucXVlcnlPYmplY3QsXG4gICAgICBhdXRvQ29udHJvbFdpZGdldElkLFxuICAgICAgaXNSdW5BcHBNb2RlLFxuICAgICAgcnVudGltZVVybEhhc2hQYXJhbXNcbiAgICB9XG4gIH1cblxuICBzdGFydFJlbmRlck1hcCA9ICgpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBzdGFydExvYWRNb2R1bGVzOiB0cnVlXG4gICAgICB9KVxuICAgIH0sIDEwMClcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ICgpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuc3RhcnRMb2FkTW9kdWxlcykge1xuICAgICAgaWYgKHdpbmRvdy5qaW11Q29uZmlnLmlzSW5CdWlsZGVyIHx8ICF0aGlzLnByb3BzLmNvbmZpZy5jYW5QbGFjZUhvbGRlcikge1xuICAgICAgICB0aGlzLnN0YXJ0UmVuZGVyTWFwKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUgKHByZXZQcm9wczogTWFwV2lkZ2V0UHJvcHMsIHByZXZTdGF0ZTogU3RhdGUpIHtcbiAgICAvLyBjaGVjayBpZiBwcm9wcy5zdGF0ZSBjaGFuZ2VkIG9yIG5vdFxuICAgIGNvbnN0IHByZVdpZGdldFN0YXRlID0gcHJldlByb3BzLnN0YXRlXG4gICAgY29uc3QgY3VycldpZGdldFN0YXRlID0gdGhpcy5wcm9wcy5zdGF0ZVxuICAgIGlmIChwcmVXaWRnZXRTdGF0ZSAhPT0gY3VycldpZGdldFN0YXRlKSB7XG4gICAgICBjb25zdCBqaW11TWFwVmlld3MgPSB0aGlzLmdldEppbXVNYXBWaWV3cygpXG4gICAgICBqaW11TWFwVmlld3MuZm9yRWFjaCgoamltdU1hcFZpZXcpID0+IHtcbiAgICAgICAgamltdU1hcFZpZXcuc2V0TWFwV2lkZ2V0U3RhdGUoY3VycldpZGdldFN0YXRlKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBjaGVjayBpZiBwcm9wcy5jb25maWcuc2hvd1BvcHVwVXBvblNlbGVjdGlvbiBjaGFuZ2VkIG9yIG5vdFxuICAgIGNvbnN0IHByZVNob3dQb3B1cFVwb25TZWxlY3Rpb24gPSAhIShwcmV2UHJvcHM/LmNvbmZpZz8uc2hvd1BvcHVwVXBvblNlbGVjdGlvbilcbiAgICBjb25zdCBjdXJTaG93UG9wdXBVcG9uU2VsZWN0aW9uID0gISEodGhpcy5wcm9wcz8uY29uZmlnPy5zaG93UG9wdXBVcG9uU2VsZWN0aW9uKVxuXG4gICAgaWYgKHByZVNob3dQb3B1cFVwb25TZWxlY3Rpb24gIT09IGN1clNob3dQb3B1cFVwb25TZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGppbXVNYXBWaWV3cyA9IHRoaXMuZ2V0SmltdU1hcFZpZXdzKClcbiAgICAgIGppbXVNYXBWaWV3cy5mb3JFYWNoKChqaW11TWFwVmlldykgPT4ge1xuICAgICAgICB0aGlzLnNldFNob3dQb3B1cFVwb25TZWxlY3Rpb25Gb3JKaW11TWFwVmlldyhqaW11TWFwVmlldylcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgcHJvcHMuZW5hYmxlRGF0YUFjdGlvbiBjaGFuZ2VkIG9yIG5vdFxuICAgIGNvbnN0IHByZUVuYWJsZURhdGFBY3Rpb24gPSBwcmV2UHJvcHM/LmVuYWJsZURhdGFBY3Rpb25cbiAgICBjb25zdCBjdXJyRW5hYmxlRGF0YUFjdGlvbiA9IHRoaXMucHJvcHMuZW5hYmxlRGF0YUFjdGlvblxuXG4gICAgaWYgKHByZUVuYWJsZURhdGFBY3Rpb24gIT09IGN1cnJFbmFibGVEYXRhQWN0aW9uKSB7XG4gICAgICBjb25zb2xlLmxvZygnZW5hYmxlRGF0YUFjdGlvbiBjaGFuZ2VkJylcbiAgICAgIHRoaXMuaGFuZGxlRGF0YUFjdGlvbldoZW5Qb3B1cFNlbGVjdGVkRmVhdHVyZUNoYW5nZSh0aGlzLmFjdGl2ZUppbXVNYXBWaWV3KVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICBjb25zdCB3aWRnZXRzID0gZ2V0QXBwU3RvcmUoKS5nZXRTdGF0ZSgpLmFwcENvbmZpZy53aWRnZXRzXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIHRoaXMuZnVsbFNjcmVlbkhhbmxkZXIpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIHRoaXMuZnVsbFNjcmVlbkhhbmxkZXIpXG4gICAgaWYgKCF3aWRnZXRzW3RoaXMucHJvcHMuaWRdKSB7XG4gICAgICBNdXRhYmxlU3RvcmVNYW5hZ2VyLmdldEluc3RhbmNlKCkudXBkYXRlU3RhdGVWYWx1ZSh0aGlzLnByb3BzLmlkLCAncmVzdG9yZURhdGEnLCBudWxsKVxuICAgIH1cbiAgfVxuXG4gIGdldEppbXVNYXBWaWV3cyAoKTogSmltdU1hcFZpZXdbXSB7XG4gICAgbGV0IGppbXVNYXBWaWV3czogSmltdU1hcFZpZXdbXSA9IFtdXG5cbiAgICBjb25zdCBqaW11TWFwVmlld0dyb3VwID0gTWFwVmlld01hbmFnZXIuZ2V0SW5zdGFuY2UoKS5nZXRKaW11TWFwVmlld0dyb3VwKHRoaXMucHJvcHMuaWQpXG5cbiAgICBpZiAoamltdU1hcFZpZXdHcm91cCkge1xuICAgICAgamltdU1hcFZpZXdzID0gamltdU1hcFZpZXdHcm91cC5nZXRBbGxKaW11TWFwVmlld3MoKVxuICAgIH1cblxuICAgIHJldHVybiBqaW11TWFwVmlld3NcbiAgfVxuXG4gIGdldFBsYWNlSG9sZGVySW1hZ2UgPSAoKSA9PiB7XG4gICAgbGV0IHBsYWNlSG9sZGVySW1hZ2UgPSB0aGlzLnByb3BzLmNvbmZpZy5wbGFjZWhvbGRlckltYWdlXG4gICAgY29uc3Qgc2Vzc2lvbiA9IFNlc3Npb25NYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0TWFpblNlc3Npb24oKVxuICAgIGlmIChwbGFjZUhvbGRlckltYWdlKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgIGNvbnN0IGlzUG9ydGFsVGh1bWJFeHAgPSBuZXcgUmVnRXhwKCdeKC4pKy9zaGFyaW5nL3Jlc3QvY29udGVudC9pdGVtcy8oLikrL2luZm8vKC4pKycpXG5cbiAgICAgIGlmIChpc1BvcnRhbFRodW1iRXhwLnRlc3QocGxhY2VIb2xkZXJJbWFnZSkpIHtcbiAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICBwbGFjZUhvbGRlckltYWdlID0gcGxhY2VIb2xkZXJJbWFnZSArIGA/dG9rZW49JHtzZXNzaW9uLnRva2VufWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1hc3NpZ25cbiAgICAgICAgICBwbGFjZUhvbGRlckltYWdlID0gcGxhY2VIb2xkZXJJbWFnZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBsYWNlSG9sZGVySW1hZ2VcbiAgfVxuXG4gIGZ1bGxTY3JlZW5IYW5sZGVyID0gKGV2ZW50KSA9PiB7XG4gICAgaWYgKCEoZG9jdW1lbnQgYXMgYW55KS5mdWxsc2NyZWVuRWxlbWVudCAmJiAhKGRvY3VtZW50IGFzIGFueSkud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGZ1bGxTY3JlZW5NYXAgPSAoKSA9PiB7XG4gICAgaWYgKHV0aWxzLmlzVG91Y2hEZXZpY2UoKSkge1xuICAgIC8vIGlzIHRvdWNoIGRldmljZVxuICAgICAgaWYgKHRoaXMuY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuY29udGFpbmVyQ2xpZW50UmVjdC5oZWlnaHR9cHhgXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLndpZHRoID0gYCR7dGhpcy5jb250YWluZXJDbGllbnRSZWN0LndpZHRofXB4YFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLmNvbnRhaW5lckNsaWVudFJlY3QudG9wfXB4YFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gYCR7dGhpcy5jb250YWluZXJDbGllbnRSZWN0LmxlZnR9cHhgXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9IG51bGxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJ1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJ1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnbm9uZSdcbiAgICAgICAgICB0aGlzLnBhcmVudENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcilcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzRnVsbFNjcmVlbjogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9LCAxMDApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjbGllbnRSZWN0ID0gdGhpcy5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgdGhpcy5jb250YWluZXJDbGllbnRSZWN0ID0gY2xpZW50UmVjdFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtjbGllbnRSZWN0LmhlaWdodH1weGBcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGggPSBgJHtjbGllbnRSZWN0LndpZHRofXB4YFxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCdcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudG9wID0gYCR7Y2xpZW50UmVjdC50b3B9cHhgXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtjbGllbnRSZWN0LmxlZnR9cHhgXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxJ1xuXG4gICAgICAgIGRvY3VtZW50ICYmIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICd0b3AgMC4zcywgYm90dG9tIDAuM3MsIGxlZnQgMC4zcywgcmlnaHQgMC4zcywgaGVpZ2h0IDAuM3MsIHdpZHRoIDAuM3MnXG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudG9wID0gJzBweCdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzBweCdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICcwcHgnXG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuYm90dG9tID0gJzBweCdcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBudWxsXG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGggPSBudWxsXG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNmZmYnXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0Z1bGxTY3JlZW46IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9LCAxMDApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmNvbnRhaW5lciBhcyBhbnlcblxuICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsIHRoaXMuZnVsbFNjcmVlbkhhbmxkZXIpXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgdGhpcy5mdWxsU2NyZWVuSGFubGRlcilcblxuICAgICAgaWYgKChkb2N1bWVudCBhcyBhbnkpLmZ1bGxzY3JlZW5FbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgIChkb2N1bWVudCBhcyBhbnkpLmV4aXRGdWxsc2NyZWVuKClcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNGdWxsU2NyZWVuOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKChkb2N1bWVudCBhcyBhbnkpLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgIChkb2N1bWVudCBhcyBhbnkpLndlYmtpdENhbmNlbEZ1bGxTY3JlZW4oKVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXF1ZXN0TWV0aG9kID0gZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbiB8fCBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4gfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsU2NyZWVuXG4gICAgICBpZiAocmVxdWVzdE1ldGhvZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc0Z1bGxTY3JlZW46IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgcmVxdWVzdE1ldGhvZC5jYWxsKGVsZW1lbnQpXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiAod2luZG93IGFzIGFueSkuQWN0aXZlWE9iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgd3NjcmlwdCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdXU2NyaXB0LlNoZWxsJylcbiAgICAgICAgaWYgKHdzY3JpcHQgIT09IG51bGwpIHtcbiAgICAgICAgICB3c2NyaXB0LlNlbmRLZXlzKCd7RjExfScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVWaWV3R3JvdXBDcmVhdGUgPSAodmlld0dyb3VwOiBKaW11TWFwVmlld0dyb3VwKSA9PiB7XG4gICAgaWYgKHZpZXdHcm91cCkge1xuICAgICAgdmlld0dyb3VwLnNldE1hcFdpZGdldEluc3RhbmNlKHRoaXMpXG4gICAgfVxuICB9XG5cbiAgb25KaW11TWFwVmlld0NyZWF0ZWQgPSAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XG4gICAgamltdU1hcFZpZXcuc2V0TWFwV2lkZ2V0U3RhdGUodGhpcy5wcm9wcy5zdGF0ZSlcbiAgICB0aGlzLnNldFNob3dQb3B1cFVwb25TZWxlY3Rpb25Gb3JKaW11TWFwVmlldyhqaW11TWFwVmlldylcbiAgfVxuXG4gIG9uQWN0aXZlSmltdU1hcFZpZXdDaGFuZ2UgPSAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSA9PiB7XG4gICAgdGhpcy5hY3RpdmVKaW11TWFwVmlldyA9IGppbXVNYXBWaWV3XG4gICAgdGhpcy53YXRjaFBvcHVwU2VsZWN0ZWRGZWF0dXJlQ2hhbmdlKClcbiAgfVxuXG4gIHNldFNob3dQb3B1cFVwb25TZWxlY3Rpb25Gb3JKaW11TWFwVmlldyAoamltdU1hcFZpZXc6IEppbXVNYXBWaWV3KSB7XG4gICAgaWYgKGppbXVNYXBWaWV3KSB7XG4gICAgICBqaW11TWFwVmlldy5zZXRTaG93UG9wdXBVcG9uU2VsZWN0aW9uKCEhdGhpcy5wcm9wcy5jb25maWcuc2hvd1BvcHVwVXBvblNlbGVjdGlvbilcbiAgICB9XG4gIH1cblxuICBzd2l0Y2hNYXAgPSBhc3luYyAoaWdub3JlU3dpdGNoQW5pbWF0aW9uID0gZmFsc2UpOiBQcm9taXNlPGFueT4gPT4ge1xuICAgIGlmICh0aGlzLm11bHRpU291cmNlTWFwSW5zdGFuY2UpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLm11bHRpU291cmNlTWFwSW5zdGFuY2Uuc3dpdGNoTWFwKGlnbm9yZVN3aXRjaEFuaW1hdGlvbilcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKClcbiAgICB9XG4gIH1cblxuICBzZXRNdWx0aVNvdXJjZU1hcEluc3RhbmNlID0gKGluc3RhbmNlOiBNdWx0aVNvdXJjZU1hcCkgPT4ge1xuICAgIHRoaXMubXVsdGlTb3VyY2VNYXBJbnN0YW5jZSA9IGluc3RhbmNlXG4gIH1cblxuICBvblJlc2l6ZSA9ICh3aWR0aCwgaGVpZ2h0KSA9PiB7XG4gICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAod2lkdGggPD0gNTQ1ICYmIHdpZHRoID4gMCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHdpZHRoQnJlYWtwb2ludDogJ3hzbWFsbCcsXG4gICAgICAgIHdpZGdldEhlaWdodDogaGVpZ2h0XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgd2lkdGhCcmVha3BvaW50OiAnb3RoZXInLFxuICAgICAgICB3aWRnZXRIZWlnaHQ6IGhlaWdodFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBpc0xvYWRpbmdEaXNwbGF5ZWQgPSAoKSA9PiB7XG4gICAgY29uc3QgYWRkVG9NYXBEYXRhcyA9IHRoaXMucHJvcHMubXV0YWJsZVN0YXRlUHJvcHM/LmFkZFRvTWFwRGF0YXMgfHwge31cbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhZGRUb01hcERhdGFzKS5zb21lKHZhbHVlID0+IHZhbHVlPy5kYXRhQ2hhbmdlU3RhdHVzID09PSBEYXRhQ2hhbmdlU3RhdHVzLlBlbmRpbmcpXG4gIH1cblxuICBpc1dhcm5pbmdEaXNwbGF5ZWQgPSAoKSA9PiB7XG4gICAgY29uc3QgYWRkVG9NYXBEYXRhcyA9IHRoaXMucHJvcHMubXV0YWJsZVN0YXRlUHJvcHM/LmFkZFRvTWFwRGF0YXMgfHwge31cbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhZGRUb01hcERhdGFzKS5zb21lKHZhbHVlID0+IHZhbHVlPy5kYXRhQ2hhbmdlU3RhdHVzID09PSBEYXRhQ2hhbmdlU3RhdHVzLlJlamVjdGVkKVxuICB9XG5cbiAgZ2V0SW5uZXJDb250ZW50ID0gKGlzTWFwSW5WaXNpYmxlQXJlYTogYm9vbGVhbikgPT4ge1xuICAgIGlmICghdGhpcy5zdGF0ZS5zdGFydExvYWRNb2R1bGVzKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNzcz17dGhpcy5nZXRTdHlsZSgpfSBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd2lkZ2V0LW1hcCB3LTEwMCBoLTEwMCc+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAnNTAlJywgdG9wOiAnNTAlJyB9fSBjbGFzc05hbWU9J2ppbXUtc2Vjb25kYXJ5LWxvYWRpbmcnIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoISh0aGlzLnByb3BzLnVzZURhdGFTb3VyY2VzICYmIHRoaXMucHJvcHMudXNlRGF0YVNvdXJjZXNbMF0gJiYgdGhpcy5wcm9wcy51c2VEYXRhU291cmNlc1swXS5kYXRhU291cmNlSWQpKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJyByZWY9e3JlZiA9PiB7IHRoaXMucGFyZW50Q29udGFpbmVyID0gcmVmIH19PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCdcbiAgICAgICAgICAgICAgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndy0xMDAgaC0xMDAnLCB7ICdtYXAtaXMtZGVzaWduLW1vZGUnOiAhY2hlY2tJc0xpdmUodGhpcy5wcm9wcy5hcHBNb2RlKSB9KX0+XG4gICAgICAgICAgICAgICAgPERlZmF1bHRNYXBcbiAgICAgICAgICAgICAgICAgIGZ1bGxTY3JlZW5NYXA9e3RoaXMuZnVsbFNjcmVlbk1hcH0gYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzfSBzdGFydExvYWRNb2R1bGVzPXt0aGlzLnN0YXRlLnN0YXJ0TG9hZE1vZHVsZXN9XG4gICAgICAgICAgICAgICAgICBpc0RlZmF1bHRNYXAgc2V0TXVsdGlTb3VyY2VNYXBJbnN0YW5jZT17dGhpcy5zZXRNdWx0aVNvdXJjZU1hcEluc3RhbmNlfVxuICAgICAgICAgICAgICAgICAgb25WaWV3R3JvdXBDcmVhdGU9e3RoaXMuaGFuZGxlVmlld0dyb3VwQ3JlYXRlfVxuICAgICAgICAgICAgICAgICAgb25KaW11TWFwVmlld0NyZWF0ZWQ9e3RoaXMub25KaW11TWFwVmlld0NyZWF0ZWR9XG4gICAgICAgICAgICAgICAgICBvbkFjdGl2ZUppbXVNYXBWaWV3Q2hhbmdlPXt0aGlzLm9uQWN0aXZlSmltdU1hcFZpZXdDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICB3aWRnZXRIZWlnaHQ9e3RoaXMuc3RhdGUud2lkZ2V0SGVpZ2h0fSB3aWR0aEJyZWFrcG9pbnQ9e3RoaXMuc3RhdGUud2lkdGhCcmVha3BvaW50fSBpc0Z1bGxTY3JlZW49e3RoaXMuc3RhdGUuaXNGdWxsU2NyZWVufSBpc01hcEluVmlzaWJsZUFyZWE9e2lzTWFwSW5WaXNpYmxlQXJlYX1cbiAgICAgICAgICAgICAgICAgIGF1dG9Db250cm9sV2lkZ2V0SWQ9e3RoaXMucHJvcHMuYXV0b0NvbnRyb2xXaWRnZXRJZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPC9EZWZhdWx0TWFwPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPFJlYWN0UmVzaXplRGV0ZWN0b3IgaGFuZGxlV2lkdGggaGFuZGxlSGVpZ2h0IG9uUmVzaXplPXt0aGlzLm9uUmVzaXplfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ctMTAwIGgtMTAwJyByZWY9e3JlZiA9PiB7IHRoaXMucGFyZW50Q29udGFpbmVyID0gcmVmIH19PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjc3M9e3RoaXMuZ2V0U3R5bGUoKX0gY2xhc3NOYW1lPSd3LTEwMCBoLTEwMCdcbiAgICAgICAgICAgICAgcmVmPXtyZWYgPT4geyB0aGlzLmNvbnRhaW5lciA9IHJlZiB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndy0xMDAgaC0xMDAnLCB7ICdtYXAtaXMtZGVzaWduLW1vZGUnOiAhY2hlY2tJc0xpdmUodGhpcy5wcm9wcy5hcHBNb2RlKSB9KX0+XG4gICAgICAgICAgICAgICAge3RoaXMucHJvcHMudXNlRGF0YVNvdXJjZXMubGVuZ3RoID49IDEgJiZcbiAgICAgICAgICAgICAgICAgIDxNdWx0aVNvdXJjZU1hcFxuICAgICAgICAgICAgICAgICAgICBrZXk9ezF9IGZ1bGxTY3JlZW5NYXA9e3RoaXMuZnVsbFNjcmVlbk1hcH0gYmFzZVdpZGdldFByb3BzPXt0aGlzLnByb3BzfSBzdGFydExvYWRNb2R1bGVzPXt0aGlzLnN0YXRlLnN0YXJ0TG9hZE1vZHVsZXN9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5zZXRNdWx0aVNvdXJjZU1hcEluc3RhbmNlfVxuICAgICAgICAgICAgICAgICAgICBvblZpZXdHcm91cENyZWF0ZT17dGhpcy5oYW5kbGVWaWV3R3JvdXBDcmVhdGV9XG4gICAgICAgICAgICAgICAgICAgIG9uSmltdU1hcFZpZXdDcmVhdGVkPXt0aGlzLm9uSmltdU1hcFZpZXdDcmVhdGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkFjdGl2ZUppbXVNYXBWaWV3Q2hhbmdlPXt0aGlzLm9uQWN0aXZlSmltdU1hcFZpZXdDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIHdpZGdldEhlaWdodD17dGhpcy5zdGF0ZS53aWRnZXRIZWlnaHR9IHdpZHRoQnJlYWtwb2ludD17dGhpcy5zdGF0ZS53aWR0aEJyZWFrcG9pbnR9XG4gICAgICAgICAgICAgICAgICAgIGlzRnVsbFNjcmVlbj17dGhpcy5zdGF0ZS5pc0Z1bGxTY3JlZW59IGlzTWFwSW5WaXNpYmxlQXJlYT17aXNNYXBJblZpc2libGVBcmVhfVxuICAgICAgICAgICAgICAgICAgICBhdXRvQ29udHJvbFdpZGdldElkPXt0aGlzLnByb3BzLmF1dG9Db250cm9sV2lkZ2V0SWR9XG4gICAgICAgICAgICAgICAgICAvPn1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxSZWFjdFJlc2l6ZURldGVjdG9yIGhhbmRsZVdpZHRoIGhhbmRsZUhlaWdodCBvblJlc2l6ZT17dGhpcy5vblJlc2l6ZX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q3VycmVudFBvcHVwU2VsZWN0ZWRGZWF0dXJlICgpOiBfX2VzcmkuR3JhcGhpYyB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlSmltdU1hcFZpZXc/LnZpZXc/LnBvcHVwPy5zZWxlY3RlZEZlYXR1cmVcbiAgfVxuXG4gIGFzeW5jIGxvYWRSZWFjdGl2ZVV0aWxzICgpIHtcbiAgICBbdGhpcy5yZWFjdGl2ZVV0aWxzXSA9IGF3YWl0IGxvYWRBcmNHSVNKU0FQSU1vZHVsZXMoWydlc3JpL2NvcmUvcmVhY3RpdmVVdGlscyddKSBhcyBbdHlwZW9mIF9fZXNyaS5yZWFjdGl2ZVV0aWxzXVxuICAgIHRoaXMud2F0Y2hQb3B1cFNlbGVjdGVkRmVhdHVyZUNoYW5nZSgpXG4gIH1cblxuICBhc3luYyB3YXRjaFBvcHVwU2VsZWN0ZWRGZWF0dXJlQ2hhbmdlICgpIHtcbiAgICBpZiAodGhpcy53YXRjaFNlbGVjdGVkRmVhdHVyZUhhbmRsZSkge1xuICAgICAgdGhpcy53YXRjaFNlbGVjdGVkRmVhdHVyZUhhbmRsZS5yZW1vdmUoKVxuICAgICAgdGhpcy53YXRjaFNlbGVjdGVkRmVhdHVyZUhhbmRsZSA9IG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVKaW11TWFwVmlldyA9IHRoaXMuYWN0aXZlSmltdU1hcFZpZXdcblxuICAgIGlmICghYWN0aXZlSmltdU1hcFZpZXcgfHwgIXRoaXMucmVhY3RpdmVVdGlscykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ2V0Q3VycmVudFBvcHVwU2VsZWN0ZWRGZWF0dXJlKCkpIHtcbiAgICAgIHRoaXMuaGFuZGxlRGF0YUFjdGlvbldoZW5Qb3B1cFNlbGVjdGVkRmVhdHVyZUNoYW5nZShhY3RpdmVKaW11TWFwVmlldylcbiAgICB9XG5cbiAgICB0aGlzLndhdGNoU2VsZWN0ZWRGZWF0dXJlSGFuZGxlID0gdGhpcy5yZWFjdGl2ZVV0aWxzLndhdGNoKCgpID0+IGFjdGl2ZUppbXVNYXBWaWV3Py52aWV3Py5wb3B1cD8uc2VsZWN0ZWRGZWF0dXJlLCBhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZURhdGFBY3Rpb25XaGVuUG9wdXBTZWxlY3RlZEZlYXR1cmVDaGFuZ2UoYWN0aXZlSmltdU1hcFZpZXcpXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZURhdGFBY3Rpb25XaGVuUG9wdXBTZWxlY3RlZEZlYXR1cmVDaGFuZ2UgKGFjdGl2ZUppbXVNYXBWaWV3OiBKaW11TWFwVmlldykge1xuICAgIGNvbnN0IHBvcHVwID0gYWN0aXZlSmltdU1hcFZpZXc/LnZpZXc/LnBvcHVwXG4gICAgY29uc3Qgb3JpZ2luYWxTZWxlY3RlZEZlYXR1cmUgPSBwb3B1cD8uc2VsZWN0ZWRGZWF0dXJlXG5cbiAgICAvLyBmaXJzdGx5LCB3ZSBuZWVkIHRvIHJlbW92ZSBkYXRhQWN0aW9uTGlzdENvbnRhaW5lciBmcm9tIHBvcHVwIGRvbU5vZGUsXG4gICAgLy8gd2hlbiBzdGF0ZS5kYXRhQWN0aW9uRGF0YVNldCBpcyByZWFkeSwgd2UgY2FuIGFkZCBkYXRhQWN0aW9uTGlzdENvbnRhaW5lciB0byBwb3B1cCBkb21Ob2RlXG4gICAgaWYgKHRoaXMuZGF0YUFjdGlvbkxpc3RDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGF0YUFjdGlvbkxpc3RDb250YWluZXIpXG4gICAgfVxuXG4gICAgdGhpcy5yZWxlYXNlUG9wdXBEb21Ob2RlT2JzZXJ2ZXIoKVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVEYXRhQWN0aW9uRGF0YVNldChudWxsKVxuXG4gICAgY29uc3QgaXNEYXRhQWN0aW9uRW5hYmxlZCA9IHRoaXMuaXNEYXRhQWN0aW9uRW5hYmxlZCgpXG5cbiAgICBpZiAoaXNEYXRhQWN0aW9uRW5hYmxlZCAmJiBvcmlnaW5hbFNlbGVjdGVkRmVhdHVyZSkge1xuICAgICAgY29uc3QgZGF0YUFjdGlvbkRhdGFTZXQgPSBhd2FpdCB0aGlzLmdldERhdGFBY3Rpb25EYXRhU2V0KGFjdGl2ZUppbXVNYXBWaWV3LCBvcmlnaW5hbFNlbGVjdGVkRmVhdHVyZSlcblxuICAgICAgLy8gZ2V0RGF0YUFjdGlvbkRhdGFTZXQgbWF5IHRha2UgYSBsb25nIHRpbWUsIHNvIHdlIG5lZWQgdG8gY2hlY2sgc2hvdWxkIHdlIGdvIG9uIG9yIG5vdFxuICAgICAgaWYgKHRoaXMuZ2V0Q3VycmVudFBvcHVwU2VsZWN0ZWRGZWF0dXJlKCkgIT09IG9yaWdpbmFsU2VsZWN0ZWRGZWF0dXJlKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZURhdGFBY3Rpb25EYXRhU2V0KGRhdGFBY3Rpb25EYXRhU2V0KVxuXG4gICAgICBpZiAodGhpcy5nZXRDdXJyZW50UG9wdXBTZWxlY3RlZEZlYXR1cmUoKSAhPT0gb3JpZ2luYWxTZWxlY3RlZEZlYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHRoaXMud2F0Y2hQb3B1cERvbU5vZGVDaGFuZ2UocG9wdXApXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRGF0YUFjdGlvbkRhdGFTZXQgKGRhdGFBY3Rpb25EYXRhU2V0OiBEYXRhUmVjb3JkU2V0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZGF0YUFjdGlvbkRhdGFTZXRcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgcmVzb2x2ZSgpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICByZWxlYXNlUG9wdXBEb21Ob2RlT2JzZXJ2ZXIgKCkge1xuICAgIGlmICh0aGlzLnBvcHVwRG9tTm9kZU9ic2VydmVyKSB7XG4gICAgICB0aGlzLnBvcHVwRG9tTm9kZU9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgdGhpcy5wb3B1cERvbU5vZGVPYnNlcnZlciA9IG51bGxcbiAgICB9XG4gIH1cblxuICB3YXRjaFBvcHVwRG9tTm9kZUNoYW5nZSAocG9wdXA6IF9fZXNyaS5Qb3B1cCkge1xuICAgIHRoaXMucmVsZWFzZVBvcHVwRG9tTm9kZU9ic2VydmVyKClcblxuICAgIGNvbnN0IHBvcHVwRG9tTm9kZSA9ICgocG9wdXAgYXMgYW55KS5kb21Ob2RlIHx8IChwb3B1cCBhcyBhbnkpLmNvbnRhaW5lcikgYXMgSFRNTEVsZW1lbnRcblxuICAgIHRoaXMudHJ5QXBwZW5kRGF0YUFjdGlvbkxpc3REb21Ob2RlVG9Qb3B1cChwb3B1cERvbU5vZGUpXG5cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgY2FsbGJhY2sgPSAobXV0YXRpb25zTGlzdCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XG4gICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xuICAgICAgICAgIHRoaXMudHJ5QXBwZW5kRGF0YUFjdGlvbkxpc3REb21Ob2RlVG9Qb3B1cChwb3B1cERvbU5vZGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKVxuICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBEb21Ob2RlLCBjb25maWcpXG4gICAgdGhpcy5wb3B1cERvbU5vZGVPYnNlcnZlciA9IG9ic2VydmVyXG4gIH1cblxuICB0cnlBcHBlbmREYXRhQWN0aW9uTGlzdERvbU5vZGVUb1BvcHVwIChwb3B1cERvbU5vZGU6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSAnY2FsY2l0ZS1hY3Rpb24tYmFyW3Nsb3Q9XCJhY3Rpb24tYmFyXCJdJ1xuICAgIGNvbnN0IHBvcHVwQWN0aW9uc0NvbnRhaW5lciA9IHBvcHVwRG9tTm9kZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuXG4gICAgaWYgKHBvcHVwQWN0aW9uc0NvbnRhaW5lciAmJiAhcG9wdXBBY3Rpb25zQ29udGFpbmVyLmNvbnRhaW5zKHRoaXMuZGF0YUFjdGlvbkxpc3RDb250YWluZXIpKSB7XG4gICAgICAvLyB0aGlzLmRhdGFBY3Rpb25MaXN0Q29udGFpbmVyIGlzIG5vdCBpbiBwb3B1cFxuICAgICAgaWYgKHRoaXMuc3RhdGUuZGF0YUFjdGlvbkRhdGFTZXQpIHtcbiAgICAgICAgLy8gRGF0YUFjdGlvbkxpc3QgZG9tTm9kZSBpcyByZWFkeSwgd2UgY2FuIGFkZCBpdCB0byBwb3B1cCBkb21Ob2RlIG5vd1xuICAgICAgICBpZiAodGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgdGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZGF0YUFjdGlvbkxpc3RDb250YWluZXIpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBhcHBlbmQgdGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lciBpbnRvIHBvcHVwQWN0aW9uc0NvbnRhaW5lciBhcyB0aGUgZmlyc3QgY2hpbGRcbiAgICAgICAgaWYgKHBvcHVwQWN0aW9uc0NvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgcG9wdXBBY3Rpb25zQ29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmRhdGFBY3Rpb25MaXN0Q29udGFpbmVyLCBwb3B1cEFjdGlvbnNDb250YWluZXIuZmlyc3RDaGlsZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb3B1cEFjdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lcilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldERhdGFBY3Rpb25EYXRhU2V0IChqaW11TWFwVmlldzogSmltdU1hcFZpZXcsIHNlbGVjdGVkRmVhdHVyZTogX19lc3JpLkdyYXBoaWMpIHtcbiAgICBsZXQgamltdUxheWVyVmlldzogSmltdUxheWVyVmlldyA9IG51bGxcblxuICAgIC8vIElmIHRoZSBzZWxlY3RlZEZlYXR1cmUgaXMgZnJvbSBKaW11TGF5ZXJWaWV3IHNlbGVjdGlvbiwgd2UgY2FuIGdldCB0aGUgamltdUxheWVyVmlld0lkLlxuICAgIC8vIFNlZSBKaW11RmVhdHVyZUxheWVyVmlldy5nZXRTZWxlY3RlZEZlYXR1cmVzKCkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICBjb25zdCBqaW11TGF5ZXJWaWV3SWQgPSAoc2VsZWN0ZWRGZWF0dXJlIGFzIGFueSkuamltdUxheWVyVmlld0lkXG5cbiAgICBpZiAoamltdUxheWVyVmlld0lkKSB7XG4gICAgICBqaW11TGF5ZXJWaWV3ID0gamltdU1hcFZpZXcuamltdUxheWVyVmlld3NbamltdUxheWVyVmlld0lkXVxuICAgIH1cblxuICAgIC8vIElmIGppbXVMYXllclZpZXcgaXMgc3RpbGwgbnVsbCwgbWVhbnMgdGhlIHNlbGVjdGVkRmVhdHVyZSBjb21lcyBmcm9tIGNsaWNraW5nIG1hcCwgd2UgY2FuIHRyeSB0byBmaW5kIHRoZSBqaW11TGF5ZXJWaWV3IGJ5IGxheWVyLlxuICAgIGlmICghamltdUxheWVyVmlldykge1xuICAgICAgY29uc3QgYWxsSmltdUxheWVyVmlld3MgPSBPYmplY3QudmFsdWVzKGppbXVNYXBWaWV3LmppbXVMYXllclZpZXdzKVxuXG4gICAgICBpZiAoc2VsZWN0ZWRGZWF0dXJlLmxheWVyKSB7XG4gICAgICAgIGppbXVMYXllclZpZXcgPSBhbGxKaW11TGF5ZXJWaWV3cy5maW5kKGl0ZW0gPT4gaXRlbS5sYXllciA9PT0gc2VsZWN0ZWRGZWF0dXJlLmxheWVyKVxuICAgICAgfVxuXG4gICAgICBpZiAoIWppbXVMYXllclZpZXcpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNlbGVjdGVkIGZlYXR1cmUgY29tbWVzIGZyb20gZXNyaS5sYXllcnMuc3VwcG9ydC5TdWJsYXllciwgdGhlbiB0aGUgc2VsZWN0ZWRGZWF0dXJlLmxheWVyIGlzIG51bGwgYW5kIHNlbGVjdGVkRmVhdHVyZS5zb3VyY2VMYXllciBpcyBub3QgbnVsbC5cbiAgICAgICAgY29uc3Qgc291cmNlTGF5ZXIgPSAoc2VsZWN0ZWRGZWF0dXJlIGFzIGFueSkuc291cmNlTGF5ZXJcblxuICAgICAgICBpZiAoc291cmNlTGF5ZXIpIHtcbiAgICAgICAgICBqaW11TGF5ZXJWaWV3ID0gYWxsSmltdUxheWVyVmlld3MuZmluZChpdGVtID0+IGl0ZW0ubGF5ZXIgPT09IHNvdXJjZUxheWVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFqaW11TGF5ZXJWaWV3KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGxldCBsYXllckRhdGFTb3VyY2UgPSBqaW11TGF5ZXJWaWV3LmdldExheWVyRGF0YVNvdXJjZSgpXG5cbiAgICBpZiAoIWxheWVyRGF0YVNvdXJjZSkge1xuICAgICAgbGF5ZXJEYXRhU291cmNlID0gYXdhaXQgamltdUxheWVyVmlldy5jcmVhdGVMYXllckRhdGFTb3VyY2UoKVxuICAgIH1cblxuICAgIGlmIChsYXllckRhdGFTb3VyY2UpIHtcbiAgICAgIGNvbnN0IHNvdXJjZUxhYmVsID0gbGF5ZXJEYXRhU291cmNlLmdldExhYmVsKCkgfHwgJydcbiAgICAgIGNvbnN0IHN0cmluZ0tleSA9ICdtYXBDdXJyZW50UmVjb3JkJ1xuICAgICAgY29uc3QgZGF0YVNldE5hbWUgPSB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiBzdHJpbmdLZXksIGRlZmF1bHRNZXNzYWdlOiBkZWZhdWx0TWVzc2FnZXNbc3RyaW5nS2V5XSB9LCB7IGxheWVyTmFtZTogc291cmNlTGFiZWwgfSlcbiAgICAgIGNvbnN0IHJlY29yZCA9IGxheWVyRGF0YVNvdXJjZS5idWlsZFJlY29yZChzZWxlY3RlZEZlYXR1cmUpXG4gICAgICBjb25zdCBkYXRhU2V0OiBEYXRhUmVjb3JkU2V0ID0ge1xuICAgICAgICBkYXRhU291cmNlOiBsYXllckRhdGFTb3VyY2UsXG4gICAgICAgIG5hbWU6IGRhdGFTZXROYW1lLFxuICAgICAgICB0eXBlOiAnY3VycmVudCcsXG4gICAgICAgIHJlY29yZHM6IFtyZWNvcmRdXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhU2V0XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGlzRGF0YUFjdGlvbkVuYWJsZWQgKCkge1xuICAgIC8vIEJ5IGRlZmF1bHQsIHRoaXMucHJvcHMuZW5hYmxlRGF0YUFjdGlvbiBpcyB1bmRlZmluZWQsIHdoaWNoIG1lYW5zIGVuYWJsZWQuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1ib29sZWFuLWxpdGVyYWwtY29tcGFyZVxuICAgIHJldHVybiB0aGlzLnByb3BzLmVuYWJsZURhdGFBY3Rpb24gIT09IGZhbHNlXG4gIH1cblxuICByZW5kZXJEYXRhQWN0aW9uTGlzdCAoKSB7XG4gICAgY29uc3QgaXNEYXRhQWN0aW9uRW5hYmxlZCA9IHRoaXMuaXNEYXRhQWN0aW9uRW5hYmxlZCgpXG5cbiAgICBpZiAoaXNEYXRhQWN0aW9uRW5hYmxlZCAmJiB0aGlzLnN0YXRlLmRhdGFBY3Rpb25EYXRhU2V0KSB7XG4gICAgICAvLyByZW5kZXIgdGhlIERhdGFBY3Rpb25MaXN0IGludG8gdGhpcy5kYXRhQWN0aW9uTGlzdENvbnRhaW5lciwgc28gd2UgY2FuIGFwcGVuZCBpdCB0byBwb3B1cCBkb21Ob2RlXG4gICAgICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKFxuICAgICAgICA8RGF0YUFjdGlvbkxpc3Qgd2lkZ2V0SWQ9e3RoaXMucHJvcHMuaWR9IGRhdGFTZXRzPXtbdGhpcy5zdGF0ZS5kYXRhQWN0aW9uRGF0YVNldF19XG4gICAgICAgICAgZGlzYWJsZURhdGFTb3VyY2VMZXZlbEFjdGlvbnM9e3RydWV9IGxpc3RTdHlsZT17RGF0YUFjdGlvbkxpc3RTdHlsZS5Ecm9wZG93bn0gaGlkZUdyb3VwVGl0bGU9e3RydWV9XG4gICAgICAgIC8+LFxuICAgICAgICB0aGlzLmRhdGFBY3Rpb25MaXN0Q29udGFpbmVyXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgZGF0YUFjdGlvbkxpc3QgPSB0aGlzLnJlbmRlckRhdGFBY3Rpb25MaXN0KClcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0namltdS13aWRnZXQgYXJjZ2lzLW1hcCcgY3NzPXt0aGlzLmdldFdpZGdldFN5bGUoKX0+XG4gICAgICAgIHt0aGlzLmlzTG9hZGluZ0Rpc3BsYXllZCgpICYmIDxMb2FkaW5nIGNsYXNzTmFtZT0nbWFwLWxvYWRpbmctYmFyJyB0eXBlPXtMb2FkaW5nVHlwZS5CYXJ9Lz59XG4gICAgICAgIHt0aGlzLmlzV2FybmluZ0Rpc3BsYXllZCgpICYmIDxkaXYgY2xhc3NOYW1lPSdtYXAtd2FybmluZy1iYXInPlxuICAgICAgICAgIDxJY29uIGNsYXNzTmFtZT0nd2FybmluZy1pY29uJyBpY29uPXt0aGlzLndhcm5pbmdJY29ufSBzaXplPXsyNn0gY3VycmVudENvbG9yPXtmYWxzZX0gLz5cbiAgICAgICAgICA8c3Bhbj57dGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoeyBpZDogJ2ZhaWxUb0FkZFRoZURhdGFPbk1hcCcsIGRlZmF1bHRNZXNzYWdlOiAnRmFpbCB0byBhZGQgdGhlIGRhdGEuJyB9KX08L3NwYW4+XG4gICAgICAgIDwvZGl2Pn1cbiAgICAgICAgeyBkYXRhQWN0aW9uTGlzdCB9XG4gICAgICAgIDxQYWdlVmlzaWJpbGl0eUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgeyhpc1BhZ2VWaXNpYmxlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8Vmlld3BvcnRWaXNpYmlsaXR5Q29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgICAgICAgICB7KGlzVmlzaWJsZUluVmlld1BvcnQpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxWaWV3VmlzaWJpbGl0eUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICAgICAgICAgICAgeyh2aWV3VmlzaWJpbGl0eUNvbnRleHRQcm9wcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXNQYWdlVmlzaWJsZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcCBjYW4gaGF2ZSBwYWdlMSwgcGFnZTIsIGlzUGFnZVZpc2libGUgaXMgdXNlZCB0byBqdWRnZSB3aGV0aGVyIHRoZSBjdXJyZW50IHBhZ2UgaXMgdmlzaWJsZS5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXNWaXNpYmxlSW5WaWV3UG9ydDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gc2Nyb2xsaW5nIHRoZSBzY3JvbGwgcGFnZSwgdGhlIHdpZGdldCBtYXkgYmUgc2Nyb2xsZWQgb3V0IG9mIHRoZSBjdXJyZW50IHZpZXdwb3J0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXNWaXNpYmxlSW5WaWV3UG9ydCBpcyB1c2VkIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBjdXJyZW50IHdpZGdldCBpcyBpbiB0aGUgdmlld3BvcnQgb2YgdGhlIGJyb3dzZXIuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzUHJpbnRQcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpc1ByaW50UHJldmlldyBpcyB1c2VkIHRvIGRldGVybWluZSB3aGV0aGVyIGl0IGlzIGN1cnJlbnRseSBpbiBicm93c2VyIHByaW50aW5nIG1vZGUuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzVmlzaWJsZUluVmlldzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSB3aWRnZXQgaXMgdWx0aW1hdGVseSBwbGFjZWQgaW4gYSB2aWV3IGluIGEgbGF5b3V0LiBJdCBpcyBwb3NzaWJsZSB0aGF0IHdlIGhhdmUgYSBzZWN0aW9uIHdpdGggbXVsdGlwbGUgdmlld3MgaW4gaXQsIHNpbWlsYXIgdG8gdGFicy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzVmlzaWJsZUluVmlldyBpcyB1c2VkIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB3aWRnZXQgaXMgaW4gdGhlIGN1cnJlbnRseSB2aXNpYmxlIHZpZXcuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZUluVmlldyA9IHZpZXdWaXNpYmlsaXR5Q29udGV4dFByb3BzLmlzSW5WaWV3ID8gdmlld1Zpc2liaWxpdHlDb250ZXh0UHJvcHMuaXNJbkN1cnJlbnRWaWV3IDogdHJ1ZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpc01hcEluVmlzaWJsZUFyZWE6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpc01hcEluVmlzaWJsZUFyZWEgaXMgdXNlZCB0byBmaW5hbGx5IGRldGVybWluZSB3aGV0aGVyIHRoZSBkb20gb2YgdGhlIG1hcCBpcyB2aXNpYmxlIHRvIHRoZSB1c2VyLlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIHVzZSAoaXNWaXNpYmxlSW5WaWV3UG9ydCB8fCB0aGlzLnByb3BzLmlzUHJpbnRQcmV2aWV3KSwgbm90IG9ubHkgaXNWaXNpYmxlSW5WaWV3UG9ydCwgY29uc2lkZXIgdGhlIGZvbGxvd2luZyBjYXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FzZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIHNjcm9sbCBwYWdlIHdpdGggbWFwLiBXZSBzY3JvbGwgdGhlIHBhZ2UgYW5kIHRoZSBtYXAgaXMgbm90IHZpc2libGUgZm9yIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHdhbnRzIHRvIHByaW50IHRoZSBzY3JvbGwgcGFnZSwgaW5jbHVkaW5nIHRoZSBtYXAgKGV2ZW4gdGhlIG1hcCBpcyBub3QgdmlzaWJsZSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVuIHRoZSB1c2VyIGVuYWJsZXMgcHJpbnQgdmlldyBtb2RlIGJ5IGEgYnV0dG9uLiBOb3csIGlzVmlzaWJsZUluVmlld1BvcnQgaXMgZmFsc2UgYW5kIHRoaXMucHJvcHMuaXNQcmludFByZXZpZXcgaXMgdHJ1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBtYXAgd2lkZ2V0IGlzIHZpc2libGUgKGxldCBpc01hcEluVmlzaWJsZUFyZWEgYmUgdHJ1ZSkgd2hlbiBpbiBwcmludCB2aWV3IG1vZGUsIG90aGVyd2lzZSB0aGUgcHJpbnQgcmVzdWx0IHdpbGwgbG9zZSBtYXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTbyB3ZSB1c2UgKGlzVmlzaWJsZUluVmlld1BvcnQgfHwgdGhpcy5wcm9wcy5pc1ByaW50UHJldmlldyksIGluc3RlYWQgb2YgdGhpcy5wcm9wcy5pc1ByaW50UHJldmlldy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTWFwSW5WaXNpYmxlQXJlYSA9IGlzUGFnZVZpc2libGUgJiYgKGlzVmlzaWJsZUluVmlld1BvcnQgfHwgdGhpcy5wcm9wcy5pc1ByaW50UHJldmlldykgJiYgaXNWaXNpYmxlSW5WaWV3XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldElubmVyQ29udGVudChpc01hcEluVmlzaWJsZUFyZWEpXG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPC9WaWV3VmlzaWJpbGl0eUNvbnRleHQuQ29uc3VtZXI+XG5cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA8L1ZpZXdwb3J0VmlzaWJpbGl0eUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfX1cbiAgICAgICAgPC9QYWdlVmlzaWJpbGl0eUNvbnRleHQuQ29uc3VtZXI+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuIGV4cG9ydCBmdW5jdGlvbiBfX3NldF93ZWJwYWNrX3B1YmxpY19wYXRoX18odXJsKSB7IF9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gdXJsIH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=