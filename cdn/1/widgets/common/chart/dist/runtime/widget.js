System.register(["jimu-core","jimu-ui/advanced/chart","jimu-theme","jimu-ui","jimu-arcgis"],(function(e,t){var l={},i={},r={},a={},o={};return{setters:[function(e){l.BaseVersionManager=e.BaseVersionManager,l.CONSTANTS=e.CONSTANTS,l.DataRecordsSelectionChangeMessage=e.DataRecordsSelectionChangeMessage,l.DataSourceComponent=e.DataSourceComponent,l.DataSourceManager=e.DataSourceManager,l.DataSourceStatus=e.DataSourceStatus,l.EsriFieldType=e.EsriFieldType,l.Immutable=e.Immutable,l.JimuFieldType=e.JimuFieldType,l.MessageManager=e.MessageManager,l.React=e.React,l.ReactRedux=e.ReactRedux,l.StatisticType=e.StatisticType,l.appConfigUtils=e.appConfigUtils,l.classNames=e.classNames,l.css=e.css,l.dataSourceUtils=e.dataSourceUtils,l.defaultMessages=e.defaultMessages,l.getAppStore=e.getAppStore,l.hooks=e.hooks,l.jsx=e.jsx,l.loadArcGISJSAPIModule=e.loadArcGISJSAPIModule,l.lodash=e.lodash,l.useIntl=e.useIntl},function(e){i.ActionModes=e.ActionModes,i.BarChart=e.BarChart,i.Histogram=e.Histogram,i.LimitBehavior=e.LimitBehavior,i.LineChart=e.LineChart,i.PieChart=e.PieChart,i.RESTFontDecoration=e.RESTFontDecoration,i.RESTFontStyle=e.RESTFontStyle,i.RESTFontWeight=e.RESTFontWeight,i.RESTHorizontalAlignment=e.RESTHorizontalAlignment,i.RESTSimpleFillSymbolStyle=e.RESTSimpleFillSymbolStyle,i.RESTSimpleLineSymbolStyle=e.RESTSimpleLineSymbolStyle,i.RESTSimpleMarkerSymbolStyle=e.RESTSimpleMarkerSymbolStyle,i.RESTSymbolType=e.RESTSymbolType,i.ScatterPlot=e.ScatterPlot,i.SelectionSource=e.SelectionSource,i.WebChartColoringPatterns=e.WebChartColoringPatterns,i.WebChartDataTransformations=e.WebChartDataTransformations,i.WebChartNullPolicyTypes=e.WebChartNullPolicyTypes,i.WebChartSortOrderKinds=e.WebChartSortOrderKinds,i.WebChartStackedKinds=e.WebChartStackedKinds,i.WebChartTimeAggregationTypes=e.WebChartTimeAggregationTypes,i.WebChartTimeIntervalUnits=e.WebChartTimeIntervalUnits,i.WebChartTypes=e.WebChartTypes,i.getSeriesType=e.getSeriesType,i.getSplitByField=e.getSplitByField,i.getSplitByValue=e.getSplitByValue,i.processInlineHistogramRawData=e.processInlineHistogramRawData},function(e){r.styled=e.styled,r.utils=e.utils},function(e){a.Alert=e.Alert,a.Button=e.Button,a.DataActionList=e.DataActionList,a.DataActionListStyle=e.DataActionListStyle,a.Loading=e.Loading,a.Tooltip=e.Tooltip,a.WidgetPlaceholder=e.WidgetPlaceholder,a.defaultMessages=e.defaultMessages},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent}],execute:function(){e((()=>{var e={27691:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m147.167 236-51.083-28.5L45 249.5v44.327l50.736-46.4 50.993 28.948 50.248-51.169 51.871 37.843 50.53-64.932L351 233.016V179l-50.583-28.5-51.083 62-52.085-59zM45 342.974v-42.366l51.43-47.035 51.175 29.052 49.915-50.83 52.3 38.156 50.635-65.068L351 239.055v42.443l-51.842-19.97-50.382 59.265-51.552-29.694-50.52 30.263-51.11-10.005zm0 5.899v5.627h306v-67.643l-50.325-19.385-50.783 59.735-52.618-30.306-49.644 29.737-51.057-9.995z" clip-rule="evenodd"></path></svg>'},63155:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M326 58v12H45V58zM258.473 73v12H45V73zM204.015 88v12H45V88zM159 119v12H45v-12zM131.605 134v12H45v-12zM109.512 149v12H45v-12zM195 180v12H45v-12zM158.953 195v12H45v-12zM129.884 210v12H45v-12zM245 241v12H45v-12zM196.938 256v12H45v-12zM158.178 271v12H45v-12zM174 302v12H45v-12zM143 317v12H45v-12zM118 332v12H45v-12zM24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 354.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},46986:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM72 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM58 77h12v281H58zM73 144.527h12V358H73zM88 198.984h12V358H88zM119 244h12v114h-12zM134 271.395h12V358h-12zM149 293.488h12V358h-12zM180 208h12v150h-12zM195 244.046h12v113.953h-12zM210 273.116h12V358h-12zM241 158h12v200h-12zM256 206.062h12V358h-12zM271 244.822h12V358h-12zM302 229h12v129h-12zM317 260h12v98h-12zM332 285h12v73h-12z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},40021:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="M200 353.81c40.414 0 77.188-15.587 104.637-41.077l-45.849-45.848c-15.683 13.796-36.258 22.163-58.788 22.163-49.18 0-89.048-39.868-89.048-89.048 0-46.451 35.567-84.595 80.953-88.685V46.4C110.721 50.61 46.191 117.769 46.191 200c0 84.947 68.862 153.81 153.809 153.81m153.6-145.715c-1.842 35.533-15.744 67.876-37.69 93.014l-45.977-45.977c10.401-13.176 17.159-29.361 18.752-47.037zm.209-7.956.001-.139-.001-.139zm-.209-8.234C349.53 113.402 286.598 50.471 208.095 46.4v64.915c42.72 3.85 76.74 37.87 80.59 80.59zm-80.743 7.944c-.081-40.168-32.669-72.706-72.857-72.706-40.238 0-72.857 32.619-72.857 72.857s32.619 72.857 72.857 72.857c40.188 0 72.776-32.538 72.857-72.706zM200 370c93.888 0 170-76.112 170-170S293.888 30 200 30 30 106.112 30 200s76.112 170 170 170" clip-rule="evenodd"></path></svg>'},80948:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><g fill="#000" clip-path="url(#a)"><path d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill-rule="evenodd" d="M376 354.001V355h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4V50h-4v-1h4V27h.998v327.001z" clip-rule="evenodd"></path><path d="M197 88h28v14.518c-1.189-1.824-2.373-3.297-3.596-4.47C217.929 94.719 214.353 94 210.5 94c-4.416 0-8.372.968-12.177 4.463-.445.409-.886.85-1.323 1.326z"></path><path d="M217.252 102.38c2.15 2.06 4.569 5.915 7.748 13.241V355h-28V110.243c1.978-3.525 3.724-5.839 5.382-7.362 2.422-2.224 4.783-2.881 8.118-2.881 2.897 0 4.758.469 6.752 2.38M139 185h23.469c-2.319 6.846-4.803 14.204-7.472 22.11l-2.339 6.93c-4.225 12.512-8.819 23.915-13.658 34.3zM158.342 215.96c-5.845 17.31-12.397 32.564-19.342 45.985V355h28V190.329a31167.84 31167.84 0 0 0-6.479 19.176l-.001.003zM254 200.519c-4.784-14.9-8.89-27.635-12.463-38.519H226v193h28zM247.852 162A4704.53 4704.53 0 0 1 254 180.929V162zM255 229h8.497c4.771 12.412 11.402 26.515 19.503 40.651V355h-28zM269.937 229c3.476 8.784 7.878 18.388 13.063 28.208V229zM284 279h4.576a284.47 284.47 0 0 0 11.937 17.746A237.642 237.642 0 0 0 312 311.29V355h-28zM305.359 293.208a241.991 241.991 0 0 0 6.641 8.683V279h-16.335a274.824 274.824 0 0 0 9.694 14.208M138 309h-28v46h28zM109 338H81v17h28zM196 214h-28v141h28zM313 343h28v12h-28z"></path><path d="m158.214 208.523.006-.018c16.331-48.374 25.668-76.032 32.719-91.675 3.685-8.177 6.718-13.003 9.752-15.79 2.998-2.753 6.024-3.54 9.809-3.54 3.295 0 5.871.573 8.482 3.076 2.655 2.544 5.374 7.109 8.809 15.211 6.821 16.084 16.359 45.825 33.898 100.515l.001.002.348 1.084c6.953 21.681 22.476 53.045 42.705 80.432 20.215 27.367 45.212 50.876 71.148 56.668l.218-.976c-25.564-5.708-50.375-28.957-70.561-56.286-20.171-27.307-35.641-58.575-42.558-80.143l-.385-1.2c-17.507-54.588-27.055-84.36-33.893-100.486-3.441-8.115-6.224-12.846-9.038-15.543-2.858-2.74-5.719-3.354-9.174-3.354-3.965 0-7.257.838-10.485 3.804-3.192 2.932-6.293 7.918-9.988 16.116-7.071 15.688-16.422 43.386-32.726 91.684l-2.275 6.736c-31.261 92.582-87.728 130.231-110.202 138.692l.352.936c22.77-8.573 79.446-46.458 110.798-139.308z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M24 27h352v349H24z"></path></clipPath></defs></svg>'},52760:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m299.88 232.358 50.866 28.707-.492.87-50.134-28.293-51.107 62.129-51.938-58.93-49.898 82.331-51.046-28.526-50.736 65.161-.79-.614 51.264-65.839 50.954 28.474 50.102-82.669 52.062 59.07z" clip-rule="evenodd"></path><circle cx="96" cy="290" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="318" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="236" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="295" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="234" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m196.827 194.391 52.206 21.083 50.998-13.5 50.653 20.061-.368.93-50.347-19.94-51.002 13.501-51.794-20.917-50.083 68.113-50.937-41.948-50.712 94.961-.882-.471 51.288-96.038 51.063 42.052z" clip-rule="evenodd"></path><circle cx="96" cy="221" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="262" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="195" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="216" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="202" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.81 117.892-50.581 40.065-51.304 13.58-51.791-30.875-50.044 68.06-50.983-41.986-50.693 75.044-.828-.56 51.308-75.955 51.016 42.013 49.956-67.94 52.209 31.125 50.696-13.42 50.419-39.935z" clip-rule="evenodd"></path><circle cx="96" cy="166" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="207" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="140" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="171" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="157" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},29174:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="m191.995 203.185 120.501 124.388C282.524 353.981 243.18 370 200.095 370 106.154 370 30 293.846 30 199.905 30 108.68 101.815 34.228 191.995 30zM370 208.005c-1.961 41.827-19.029 79.703-45.87 108.295L219.219 208.005zM208.194 30C295.69 34.102 365.898 104.31 370 191.806H208.194z" clip-rule="evenodd"></path></svg>'},90541:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#525252" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zM24 75v8h16v-8zm0 61v8h16v-8zm0 68v-8h16v8zm0 54v8h16v-8zm0 69v-8h16v8zm9 49v-8h24v8zm52-8v8h24v-8zm50 0v8h24v-8zm50 0v8h24v-8zm52 8v-8h24v8zm52-8v8h24v-8zm52 8v-8h24v8zm6-287a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-48 14a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-31 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-113 44a8 8 0 1 0 0-16 8 8 0 0 0 0 16m30 25a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-58 40a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-30 42a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38 4a8 8 0 1 1-16 0 8 8 0 0 1 16 0m45-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m41-36a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-13-58a8 8 0 1 0 0-16 8 8 0 0 0 0 16m61 1a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m40-16a8 8 0 1 1-16 0 8 8 0 0 1 16 0" clip-rule="evenodd"></path></svg>'},62859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m118.545 220.032-2.213-1.235a34 34 0 0 0-38.159 3.428L45 249.5v30.214c3.984-4.618 8.656-9.198 13.805-12.99 10.634-7.83 23.84-12.646 37.238-6.496 29.564 13.57 53.981 5.763 68.251-7.556 7.503-7.003 18.521-16.771 31.068-22.333 12.659-5.611 27.171-7.046 41.113 3.142 12.934 9.452 27.929 18.766 42.113 23.392 14.211 4.636 26.946 4.382 36.213-4.207 10.919-10.12 24.971-18.293 36.199-23.742V179l-25.766-14.517c-14.358-8.09-32.45-4.718-42.93 8.001l-9.791 11.883c-12.163 14.762-34.644 15.145-47.303.806-13.874-15.716-39.007-13.477-49.885 4.443l-11.151 18.367c-9.492 15.637-29.654 20.961-45.629 12.049M45 330.81v-43.161c4.46-5.852 10.235-12.086 16.77-16.899 9.974-7.344 21.185-11.028 32.187-5.978 31.436 14.43 58.019 6.236 73.749-8.444 7.497-6.997 17.979-16.229 29.682-21.418 11.591-5.138 24.079-6.203 36.137 2.608 13.066 9.549 28.571 19.235 43.512 24.109 14.914 4.864 29.929 5.118 41.162-5.294 9.791-9.074 22.321-16.579 32.801-21.834v58.189c-20.957 1.026-60.451 6.532-94.59 23.062-11.627 5.63-20.788 7.612-28.256 7.407-7.43-.204-13.377-2.577-18.596-5.998-5.075-3.326-9.417-7.604-13.815-11.936l-.544-.536c-4.499-4.429-9.142-8.934-14.494-11.877-2.913-1.603-5.764-2.165-8.579-1.826-2.765.333-5.3 1.511-7.66 3.058-2.354 1.542-4.663 3.539-6.965 5.644-.841.769-1.675 1.547-2.515 2.33l-.002.002c-1.514 1.412-3.05 2.845-4.697 4.292-5.061 4.447-10.666 8.565-17.579 10.7-6.854 2.116-15.212 2.347-25.886-1.371-18.507-6.446-34.021-3.557-45.85 2.755C54.5 321.849 49.149 326.317 45 330.81m0 7.804V354.5h306v-56.807c-20.516 1.032-59.158 6.456-92.41 22.557-12.123 5.87-22.087 8.138-30.573 7.905-8.522-.233-15.357-2.984-21.2-6.814-5.502-3.606-10.165-8.202-14.477-12.452l-.181-.178-.468-.461c-4.578-4.508-8.748-8.503-13.396-11.059-2.087-1.148-3.893-1.445-5.571-1.243-1.73.208-3.527.971-5.518 2.276-1.997 1.309-4.059 3.074-6.33 5.151-.768.702-1.568 1.448-2.394 2.218l-.002.002c-1.554 1.449-3.198 2.982-4.892 4.47-5.251 4.615-11.49 9.278-19.405 11.722-7.974 2.462-17.429 2.606-29.005-1.426-17.093-5.954-31.162-3.26-41.85 2.445-8.095 4.319-14.281 10.386-18.328 15.808" clip-rule="evenodd"></path></svg>'},27118:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M326.792 248.694c-15.426-8.706-34.876-5.079-46.128 8.6l-8.137 9.892c-12.332 14.991-35.153 15.38-47.987.817-13.619-15.452-38.319-13.253-48.994 4.361l-12.091 19.95c-9.081 14.984-28.398 20.085-43.693 11.538-13.593-7.597-30.696-4.133-40.262 8.154l-34.105 43.801-.79-.614 34.105-43.802c9.87-12.676 27.516-16.249 41.54-8.412 14.825 8.284 33.548 3.34 42.35-11.183l12.09-19.95c11.026-18.191 36.535-20.462 50.6-4.504 12.427 14.1 34.524 13.724 46.464-.791l8.137-9.892c11.561-14.055 31.544-17.78 47.392-8.836l23.463 13.242-.492.87z" clip-rule="evenodd"></path><circle cx="96" cy="300" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="306" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="258" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="278" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="245" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="M229.969 208.854c-19.296-7.793-41.421-1.516-53.749 15.251l-10.663 14.501c-10.031 13.642-29.46 16.062-42.532 5.298-13.896-11.444-34.79-7.303-43.27 8.577l-34.314 64.254-.882-.471 34.314-64.254c8.778-16.437 30.404-20.724 44.788-8.878 12.628 10.4 31.4 8.061 41.091-5.119l10.662-14.501c12.599-17.134 35.209-23.55 54.93-15.586l3.243 1.31a50.046 50.046 0 0 0 31.549 1.975l12.467-3.3a70.5 70.5 0 0 1 43.999 2.606l29.082 11.518-.368.93-29.082-11.518a69.507 69.507 0 0 0-43.376-2.569l-12.466 3.3a51.046 51.046 0 0 1-32.179-2.015z" clip-rule="evenodd"></path><circle cx="96" cy="239" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="250" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="208" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="213" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="206" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.868 117.838-23.757 25.893a79.497 79.497 0 0 1-51.631 25.448l-11.951 1.048a45.49 45.49 0 0 1-27.275-6.244l-6.002-3.578c-18.785-11.198-43.003-6.299-55.959 11.32l-7.713 10.49c-10.587 14.398-31.092 16.952-44.887 5.591-13.721-11.299-34.19-8.333-44.14 6.396L45.414 241.78l-.828-.56 32.139-47.578c10.28-15.218 31.427-18.282 45.603-6.608 13.353 10.996 33.2 8.524 43.446-5.411l7.714-10.49c13.26-18.035 38.049-23.049 57.276-11.586l6.002 3.578a44.507 44.507 0 0 0 26.676 6.106l11.95-1.048a78.502 78.502 0 0 0 50.982-25.128l23.758-25.893z" clip-rule="evenodd"></path><circle cx="96" cy="181" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="194" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="155" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="167" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="162" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},49856:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132.5 67v20h-87V67zM195.5 67v20h-61V67zM243.5 67v20h-46V67zM188.5 130v20h-143v-20zM259.5 130v20h-69v-20zM325.5 130v20h-64v-20zM158.5 191v20h-113v-20zM234.5 191v20h-74v-20zM282.5 191v20h-46v-20zM114.5 253v20h-69v-20zM158.5 253v20h-42v-20zM197.5 253v20h-37v-20zM100.5 315v20h-55v-20zM163.5 315v20h-61v-20zM228.5 315v20h-63v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},11888:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 160h20v46H70zM130 215h20v143h-20zM130 144h20v69h-20zM130 78h20v64h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 121h20v46h-20zM252 289h20v69h-20zM252 245h20v42h-20zM252 206h20v37h-20zM313 303h20v55h-20zM313 240h20v61h-20zM313 175h20v63h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},90007:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132 64v20H45V64zM195 64v20h-61V64zM350 64v20H197V64zM188 124v20H45v-20zM286 124v20h-96v-20zM350 124v20h-62v-20zM158 184v20H45v-20zM234 184v20h-74v-20zM350 184v20H236v-20zM114 246v20H45v-20zM272 246v20H116v-20zM350 246v20h-76v-20zM100 307v20H45v-20zM184 307v20h-82v-20zM350 307v20H186v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},83466:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 72h20v134H70zM130 215h20v143h-20zM130 117h20v96h-20zM130 72h20v43h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 72h20v95h-20zM252 289h20v69h-20zM252 131h20v156h-20zM252 72h20v57h-20zM313 303h20v55h-20zM313 219h20v82h-20zM313 72h20v145h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},43036:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m11.366 7.841-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66z"></path><path fill="#000" fill-rule="evenodd" d="M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 0 1 0 1H14l-.929 11.077a1 1 0 0 1-.997.923H3.926a1 1 0 0 1-.997-.923L2 4H.5a.5.5 0 0 1 0-1zM3.003 4h9.994l-.923 11H3.926zM10.5 1v2h-5V1c0-.04 5-.04 5 0" clip-rule="evenodd"></path></svg>'},84441:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707zM7 6h3v1H7v3H6V7H3V6h3V3h1z" clip-rule="evenodd"></path></svg>'},48682:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 11V0H5v3.5h1V1h9v9H8.5v1zM.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.91 5.771 1.154-.667-2.91-5.77 2.222-.48z" clip-rule="evenodd"></path></svg>'},26826:e=>{"use strict";e.exports=o},48891:e=>{"use strict";e.exports=l},34796:e=>{"use strict";e.exports=r},30726:e=>{"use strict";e.exports=a},22444:e=>{"use strict";e.exports=i}},t={};function n(l){var i=t[l];if(void 0!==i)return i.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var s={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(s),n.d(s,{__set_webpack_public_path__:()=>at,default:()=>rt});var e,t,l=n(48891),i=n(22444);(t=e||(e={})).ByGroup="BYGROUP",t.ByField="BYFIELD";const r="name",a="value",o="count",c="__other-slice__",v="__other-split-value__",u={behaviorAfterLimit:i.LimitBehavior.Reject,maxBarChartSeriesCount:100,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxLineChartSeriesCount:100,maxLineUniqueSeriesCountTotal:1e4,maxLineTwoSeriesCountPerSeries:1e3,maxLineTwoSeriesCountTotal:2e3,maxLineThreePlusSeriesCountPerSeries:100,maxLineThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxPieChartSliceCountTotal:300};var d=n(34796),h=n(30726);const p="var(--dark)",m="var(--light-900)",S="var(--primary)",g="var(--dark-600)",y=["#5E8FD0","#77B484","#DF6B35","#DBCF4E","#41546D","#8257C2","#D6558B"],f=e=>"mean"===e?"#A6CEE3":"median"===e?"#33A02C":"standardDeviation"===e?"#B2DF8A":"comparisonDistribution"===e?"#E31A1C":void 0,b=(e,t=0)=>{var l;const i=null!==(l=null==e?void 0:e.length)&&void 0!==l?l:0;if(!(i<0))return(t%=i)<0&&(t=0),e[t]},M=(e,t=0,l)=>{let i=b(e,t);return i===l&&(i=b(e,t+1)),i},z=(e=0)=>b(y,e),A={family:"Avenir Next",size:14,style:i.RESTFontStyle.Normal,weight:i.RESTFontWeight.Normal,decoration:i.RESTFontDecoration.None},w={type:i.RESTSymbolType.TS,color:p,font:A,horizontalAlignment:i.RESTHorizontalAlignment.Center},T={type:i.RESTSymbolType.SLS,style:i.RESTSimpleLineSymbolStyle.Solid,color:m,width:1},C={type:i.RESTSymbolType.SFS,style:i.RESTSimpleFillSymbolStyle.Solid,color:S,outline:T},R={type:i.RESTSymbolType.SMS,style:i.RESTSimpleMarkerSymbolStyle.Circle,color:S,size:10,outline:T},x=(e=14)=>Object.assign(Object.assign({},A),{size:e}),F=(e="",t=14,l=p)=>Object.assign(Object.assign({},w),{text:e,color:l,font:x(t)}),D=(e=1,t=m,l=i.RESTSimpleLineSymbolStyle.Solid)=>Object.assign(Object.assign({},T),{width:e,color:t,style:l}),I=(e="var(--dark)",t=1,l=m)=>Object.assign(Object.assign({},C),{color:e,outline:D(t,l)}),E=(e=S,t=0,l=10)=>Object.assign(Object.assign({},R),{color:e,size:l,outline:D(t)});function O(e){return{type:i.WebChartTypes.Overlay,visible:!1,created:!1,symbol:D(1,e)}}function L(e=y[2],t=3){return{type:i.WebChartTypes.Overlays,trendLine:{type:i.WebChartTypes.Overlay,created:!0,visible:!0,symbol:{type:"esriSLS",color:e,width:t}}}}const B=(e="",t=!0,l,r=p)=>({type:i.WebChartTypes.Text,visible:t,content:F(e,l,r)}),j=e=>{if(null==e||""===e)return;const t="string"==typeof e?e:(0,i.getSeriesType)(e);return t===i.WebChartTypes.BarSeries||t===i.WebChartTypes.LineSeries},N={},V=(e,t)=>{var i;if(null!=N[e])return N[e];const r=l.DataSourceManager.getInstance().getDataSource(t),a=null==r?void 0:r.getSchema(),o=null===(i=null==a?void 0:a.fields)||void 0===i?void 0:i[e];return N[e]=o,o},k=e=>{var t,l,r;const a=null==e?void 0:e.series,o=null!==(t=(0,i.getSeriesType)(a))&&void 0!==t?t:"barSeries",n=null==a?void 0:a[0];let s,c;if(!n)return[];if("barSeries"===o){const t=n.stackedType,i=null!==(l=null==e?void 0:e.rotated)&&void 0!==l&&l?"bar":"column",r="sideBySide"===t?"":t;s=i,c=r?`${r}-${i}`:i}else if("lineSeries"===o){const e=W(a)?"area":"line";let t="";_(a)&&(t="smooth"),s=e,c=t?`${t}-${e}`:e}else"pieSeries"===o?(s="pie",c=(null!==(r=null==n?void 0:n.innerRadius)&&void 0!==r?r:0)>0?"donut":"pie"):"scatterSeries"===o?(s="scatter",c="scatter"):"histogramSeries"===o&&(s="histogram",c="histogram");return[s,c]},P=t=>null!=(null==t?void 0:t.groupByFieldsForStatistics)?e.ByGroup:null!=(null==t?void 0:t.outStatistics)?e.ByField:void 0,_=e=>(null==e?void 0:e[0]).lineSmoothed,W=e=>(null==e?void 0:e[0]).showArea,H=e=>{if(!e||!e.includes(" "))return[];const t=e.lastIndexOf(" ");return t!==e.indexOf(" ")?[e.substring(0,t),e.substring(t+1)]:e.split(" ")},U=/\(|\)|\[|\]|\%/gm,q=(e,t)=>"no_aggregation"!==t?`${d.utils.uppercaseFirstLetter(t)} of ${e}`:e,$={sum:"sumOfField",avg:"meanOfField",min:"minOfField",max:"maxOfField",count:"count",percentile_cont:"medianOfField"},G=(e,t,l)=>{let i=((e,t)=>((null==e?void 0:e.match(U))&&(e=e.replace(U,"__")),"no_aggregation"!==t?`${t}_of_${e}`:e))(e,t);return i=`${i}_of_${l}`,i},J={timeIntervalSize:1,timeIntervalUnits:i.WebChartTimeIntervalUnits.Months,timeAggregationType:i.WebChartTimeAggregationTypes.Start,trimIncompleteTimeInterval:!1,nullPolicy:i.WebChartNullPolicyTypes.Interpolate},K=(e,t,r)=>{const{propSeries:a,name:o,categoryField:n,numberField:s,timeIntervalUnits:v,splitByField:u,splitByFieldType:d,splitByValue:h}=e;let p=((e,t,r=0,a)=>{var o;let n=e.find((e=>e.id===t));if(!n){const t=null!==(o=e[r])&&void 0!==o?o:e[0],{type:i,dataLabels:a,dataTooltipVisible:s}=t,{stackedType:c}=t,{lineSmoothed:v,showArea:u,markerVisible:d,markerSymbol:h}=t,{innerRadius:p,startAngle:m,endAngle:S}=t;n=(0,l.Immutable)({type:i,dataLabels:a,dataTooltipVisible:s,stackedType:c,lineSmoothed:v,showArea:u,markerVisible:d,markerSymbol:h,innerRadius:p,startAngle:m,endAngle:S})}return((e,t=0,l)=>{var r,a;if(!e)return null;const{type:o="lineSeries",dataLabels:n,dataTooltipVisible:s}=e;let v=null;if("barSeries"===o){const{fillSymbol:a,stackedType:o=i.WebChartStackedKinds.Side}=e;if(v=function(e=0,t){var l;const r=(null==t?void 0:t.color)?null==t?void 0:t.color:M(null!==(l=null==t?void 0:t.colors)&&void 0!==l?l:y,e,null==t?void 0:t.preSerieColor);return{type:i.WebChartTypes.BarSeries,id:"",name:"",x:"",y:"",colorType:i.WebChartColoringPatterns.Single,stackedType:i.WebChartStackedKinds.Side,fillSymbol:I(r,0),dataLabels:B("",!1,10,g),rotated:!1}}(t,l),v.stackedType=o,a)if(!(null==l?void 0:l.color)&&(null==l?void 0:l.preSerieColor)){const e=M(null!==(r=null==l?void 0:l.colors)&&void 0!==r?r:y,t,l.preSerieColor);v.fillSymbol=a.set("color",e)}else v.fillSymbol=a}else if("lineSeries"===o){const{stackedType:r=i.WebChartStackedKinds.Side,lineSmoothed:o=!1,showArea:n=!1,markerVisible:s=!1,lineSymbol:c,markerSymbol:u}=e;if(v=function(e=0,t){var l;const r=(null==t?void 0:t.color)?null==t?void 0:t.color:M(null!==(l=null==t?void 0:t.colors)&&void 0!==l?l:y,e,null==t?void 0:t.preSerieColor);return{type:i.WebChartTypes.LineSeries,id:"",name:"",x:"",y:"",colorType:i.WebChartColoringPatterns.Single,stackedType:i.WebChartStackedKinds.Side,lineSymbol:D(2,r),dataLabels:B("",!1,10,g),rotated:!1}}(t,l),v.stackedType=r,v.lineSmoothed=o,v.showArea=n,v.markerVisible=s,c)if(!(null==l?void 0:l.color)&&(null==l?void 0:l.preSerieColor)){const e=M(null!==(a=null==l?void 0:l.colors)&&void 0!==a?a:y,t,l.preSerieColor);v.lineSymbol=c.set("color",e)}else v.lineSymbol=c;u&&(v.markerSymbol=u)}else if("pieSeries"===o){const{innerRadius:t=0,startAngle:l=0,endAngle:r=360}=e;v=function(){const e=z(0);return{type:i.WebChartTypes.PieSeries,colorType:i.WebChartColoringPatterns.Single,id:"",name:"",x:"",y:"",innerRadius:0,startAngle:0,endAngle:360,displayNumericValueOnDataLabel:!0,displayPercentageOnDataLabel:!1,displayNumericValueOnTooltip:!0,displayPercentageOnTooltip:!0,dataLabelsOffset:0,sliceGrouping:{sliceId:c,percentageThreshold:0,label:"Other"},numericValueFormat:{type:i.WebChartTypes.NumberAxisFormat,intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:3}},percentValueFormat:{type:i.WebChartTypes.NumberAxisFormat,intlOptions:{style:"percent",notation:"standard",minimumFractionDigits:0,maximumFractionDigits:3}},fillSymbol:I(e,1,"var(--light-100)"),dataLabels:B("",!1,10,g)}}(),v.innerRadius=t,v.startAngle=l,v.endAngle=r}else if("scatterSeries"===o){const{markerSymbol:t,overlays:l}=e;v=function(){const e=z(0);return{type:i.WebChartTypes.ScatterSeries,colorType:i.WebChartColoringPatterns.Single,id:"",name:"",x:"",y:"",markerSymbol:E(e,0,20),overlays:L()}}(),t&&(v.markerSymbol=t),l&&(v.overlays=l)}else if("histogramSeries"===o){const{fillSymbol:t,binCount:l,overlays:r}=e;v=function(){const e=z(0);return{type:i.WebChartTypes.HistogramSeries,colorType:i.WebChartColoringPatterns.Single,id:"",name:"",x:"",binCount:15,overlays:{type:i.WebChartTypes.Overlays,mean:O(f("mean")),median:O(f("median")),standardDeviation:O(f("standardDeviation")),comparisonDistribution:O(f("comparisonDistribution"))},dataTransformationType:i.WebChartDataTransformations.None,fillSymbol:I(e,1,"var(--light-100)"),dataLabels:B("",!1,10,g),rotated:!1}}(),v.binCount=l,r&&(v.overlays=r),t&&(v.fillSymbol=t)}return n&&(v.dataLabels=n),null!=s&&(v.dataTooltipVisible=s),v})(n,r,a)})(a,h,t,r);const m=`${h}`,S=s;p.id=m,p.x=n,p.y=S,p.name=o||m,v&&(p=Object.assign(Object.assign(Object.assign({},p),J),{timeIntervalUnits:v}));const b={where:`${u}=${d===l.JimuFieldType.String?`'${h}'`:h}`};return p.query=b,p},Y=(e,t,i,r)=>{const a=e,o=e;i=null!=i?i:e;let n=l.EsriFieldType.String,s=null;t===l.JimuFieldType.Number&&(s={digitSeparator:!0,places:3},n=l.EsriFieldType.Double);const c={jimuName:a,type:t,esriType:n,name:o,alias:i,format:s};return r&&(c.originFields=r),c},Q=(e,t,l)=>{let i=V(e,t);return l=l||e,i=i.set("jimuName",l).set("name",l),i=i.set("originFields",[e]),i},Z=e=>{const t=e.getIdField(),l=e.getDataSourceJson().schema.fields[t];return null==l?void 0:l.asMutable({deep:!0})};class X extends l.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.6.0",description:"Rename `multipleBarType` to `stackedType`",upgrader:e=>{var t;if(!e)return e;let l=null===(t=e.webChart)||void 0===t?void 0:t.series;return(null==l?void 0:l.length)?(l=l.map((e=>(e=e.set("stackedType",e.multipleBarType)).without("multipleBarType"))),e.setIn(["webChart","series"],l)):e}},{version:"1.7.0",description:"Use the `numericField` as the `id` of serie, build the `query` in the `series` as a data source",upgrader:e=>{var t;if(!e)return e;let i=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==i?void 0:i.length))return e;i=(e=>null==e?void 0:e.map((e=>{var t,i,r,a,o;if(null===(i=null===(t=e.query)||void 0===t?void 0:t.groupByFieldsForStatistics)||void 0===i?void 0:i.length){const t=null===(o=null===(a=null===(r=e.query)||void 0===r?void 0:r.outStatistics)||void 0===a?void 0:a[0])||void 0===o?void 0:o.onStatisticField,i=e.id;return t&&t!==i&&(e=l.Immutable.set(e,"id",t)),e}return e})))(i);const r=(e=>{var t,l;if(!(null==e?void 0:e.length))return null;let i=e[0].query;return(null===(t=i.outStatistics)||void 0===t?void 0:t.length)?((null===(l=null==i?void 0:i.groupByFieldsForStatistics)||void 0===l?void 0:l.length)&&(i=((e,t)=>(t.slice(1).forEach((t=>{var l,i,r;const a=(null!==(l=e.outStatistics)&&void 0!==l?l:[]).concat(null!==(r=null===(i=t.query)||void 0===i?void 0:i.outStatistics)&&void 0!==r?r:[]);e=e.set("outStatistics",a)})),e))(i,e)),i):null})(i);i=i.map((e=>l.Immutable.without(e,"query")));const a={query:r};return e.setIn(["webChart","series"],i).setIn(["webChart","dataSource"],a)}},{version:"1.8.0",description:"",upgrader:e=>e},{version:"1.9.0",description:"",upgrader:e=>e},{version:"1.10.0",description:"Upgrade `config.colorMatch` to `series[0].slices` for pie chart.",upgrader:t=>{let o=(e=>{var t;if(!e)return e;let r=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==r?void 0:r.length))return e;if("pieSeries"!==(0,i.getSeriesType)(r))return e;if("colorMatch"!==r[0].colorType)return e;let a=e.webChart.dataSource;const o=null==a?void 0:a.colorMatch;if(!o)return e;const n=o.colorMatches,s=r[0].fillSymbol,c=Object.entries(n).map((([e,t])=>{var l,i,r;const a=e,o=t._fillColor;return{sliceId:a,fillSymbol:I(o,null!==(i=null===(l=s.outline)||void 0===l?void 0:l.width)&&void 0!==i?i:0,null===(r=s.outline)||void 0===r?void 0:r.color)}}));return r=l.Immutable.setIn(r,["0","slices"],c),a=a.without("colorMatch"),e.setIn(["webChart","series"],r).setIn(["webChart","dataSource"],a)})(t);return o=(t=>{var l,o,n,s,c,v,u;if(!t)return t;let d=null===(o=null===(l=t.webChart)||void 0===l?void 0:l.dataSource)||void 0===o?void 0:o.query,h=null===(n=t.webChart)||void 0===n?void 0:n.series;const p=(0,i.getSeriesType)(h);if("pieSeries"!==p&&!j(p))return t;if(P(d)!==e.ByField)return t;const m=null!==(v=null===(c=null===(s=null==d?void 0:d.outStatistics)||void 0===s?void 0:s[0])||void 0===c?void 0:c.statisticType)&&void 0!==v?v:"sum";h=h.map((e=>{let t=e.x,l=e.y,i=e.y;if("FieldName"===t&&(t=r,e=e.set("x",t)),"FieldValue"===l&&(l=a,e=e.set("y",l)),"FieldValue"===i&&(i=a,e=e.set("id",i)),"Sum of value"===e.name){const t=`${o=m,"string"==typeof o?o.charAt(0).toUpperCase()+o.slice(1):null} of value`;e=e.set("name",t)}var o;return e}));const S=null===(u=d.orderByFields)||void 0===u?void 0:u[0];return(null==S?void 0:S.includes("FieldName"))?d=d.set("orderByFields",[S.replace("FieldName",r)]):(null==S?void 0:S.includes("FieldValue"))&&(d=d.set("orderByFields",[S.replace("FieldValue",a)])),t.setIn(["webChart","series"],h).setIn(["webChart","dataSource","query"],d)})(o),o}},{version:"1.11.0",description:"",upgrader:e=>e},{version:"1.12.0",description:"Upgrade web-chart version and upgrade the numeric type in the slice id of the pie chart to a string type, feature layer data source only supports the latter.",upgrader:e=>{var t;if(!e||!e.webChart)return e;let l=e.setIn(["webChart","version"],"6.2.1");const r=(e=>{var t,l;let r=e;if(null===(t=null==e?void 0:e.series)||void 0===t?void 0:t.length){const t=(0,i.getSeriesType)(e.series);if((t===i.WebChartTypes.BarSeries||t===i.WebChartTypes.LineSeries)&&void 0===e.rotated){const t=null!==(l=e.series[0].rotated)&&void 0!==l&&l;r=r.set("rotated",t);const i=r.series.map((e=>(void 0!==e.rotated&&(e=e.without("rotated")),e)));r=r.set("series",i)}}return r})(l.webChart);l=l.set("webChart",r);const a=null===(t=l.webChart)||void 0===t?void 0:t.series;if(!(null==a?void 0:a.length))return l;if("pieSeries"!==(0,i.getSeriesType)(a))return l;let o=a[0],n=o.sliceGrouping;n=n.set("sliceId",c).set("label",n.groupName),n=n.without("groupName"),o=o.set("sliceGrouping",n);const s=o.slices;if(null==s?void 0:s.length){const e=s.map((e=>("number"==typeof e.sliceId&&(e=e.set("sliceId",e.sliceId+"")),e)));o=o.set("slices",e)}return"colorMatch"===o.colorType&&(o=o.set("colorType","singleColor")),l=l.setIn(["webChart","series","0"],o),l}},{version:"1.13.0",description:"Upgrade series dataTooltipVisible to true, sortLabelsBy to originalValue, support max-length for the label of pie legend",upgrader:e=>{var t;if(!e)return e;let l=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==l?void 0:l.length))return e;l=l.map((e=>e.set("dataTooltipVisible",!0)));let r=e.setIn(["webChart","series"],l).setIn(["webChart","sortLabelsBy"],"originalValue");if("pieSeries"===(0,i.getSeriesType)(l)&&r.webChart.legend){let e=r.webChart.legend;e=e.set("labelMaxWidth",200),r=r.setIn(["webChart","legend"],e)}return r}}]}}const ee=new X,te={chart:null,filter:null,dataSource:null,outputDataSource:null,recordsStatus:"none",queryVersion:0},le=(e,t)=>{switch(t.type){case"SET_CHART":return Object.assign(Object.assign({},e),{chart:t.value});case"SET_FILTER":return Object.assign(Object.assign({},e),{filter:t.value});case"SET_DATA_SOURCE":return Object.assign(Object.assign({},e),{dataSource:t.value});case"SET_OUTPUT_DATA_SOURCE":return Object.assign(Object.assign({},e),{outputDataSource:t.value});case"SET_RECORDS":return Object.assign(Object.assign({},e),{records:t.value});case"SET_RECORDS_STATUS":return Object.assign(Object.assign({},e),{recordsStatus:t.value});case"SET_QUERY_VERSION":return Object.assign(Object.assign({},e),{queryVersion:t.value});default:return e}},ie=l.React.createContext(void 0),re=l.React.createContext(void 0),ae=e=>{const{defaultState:t,children:i}=e,[r,a]=l.React.useReducer(le,t||te);return l.React.createElement(ie.Provider,{value:r},l.React.createElement(re.Provider,{value:a},i))},oe=()=>l.React.useContext(ie),ne=()=>l.React.useContext(re),se=e=>{const{widgetId:t,useDataSource:i,onQueryRequired:r}=e,{queryVersion:a,dataSource:o,filter:n}=oe(),s=l.hooks.useLatest(o),c=ne();return l.React.useEffect((()=>{var e;s.current&&s.current.updateQueryParams({where:null!==(e=null==n?void 0:n.sql)&&void 0!==e?e:"1=1",sqlExpression:null!=n?n:null},t)}),[n]),l.React.createElement(l.DataSourceComponent,{widgetId:t,useDataSource:i,onDataSourceCreated:e=>{c({type:"SET_DATA_SOURCE",value:e})},onQueryRequired:()=>{c({type:"SET_QUERY_VERSION",value:a+1}),null==r||r()}})};const ce=(e,t,l)=>{var o,n,s,c;const v=null==e?void 0:e[0];if(!v||!(null===(o=null==t?void 0:t.outStatistics)||void 0===o?void 0:o.length))return;const u=t.orderByFields,d=t.outStatistics,h=null===(s=null===(n=null==d?void 0:d.map((e=>e.onStatisticField)))||void 0===n?void 0:n.filter((e=>!!e)))||void 0===s?void 0:s.asMutable(),p=r,m=a,S=null!==(c=null==h?void 0:h.map((e=>{var t,i;const r=v.getFieldValue(e),a={[p]:e,[m]:null!=r?r:0},o=null!==(i=null===(t=V(e,l.id))||void 0===t?void 0:t.alias)&&void 0!==i?i:e;return o!==e&&(a[p]=o,a[p+"_original"]=e),a})))&&void 0!==c?c:[];return function(e,t,l=!1){null!=e&&null!=t&&e.sort(((e,r)=>{let a=0;for(let o=0;o<t.length;o+=1){const[n,s]=H(t[o]),c=s===i.WebChartSortOrderKinds.Descending&&!l,v=e[n],u=r[n];if("string"==typeof v&&"string"==typeof u)a=v.localeCompare(u,void 0,{numeric:!0}),c&&(a*=-1);else if(null==v)a=c?-1:1;else if(null==u)a=c?1:-1;else{if(v>u){a=c?-1:1;break}if(v<u){a=c?1:-1;break}}}return a}))}(S,u),null==S?void 0:S.map(((e,t)=>{const i={attributes:e};return l.buildRecord(i)}))},ve=e=>{if(!(e=>{if(!e)return!1;const t=e.getInfo();return t&&Object.keys(t).length>0})(e))return!1;const t=e.getStatus();return t&&t!==l.DataSourceStatus.NotReady},ue=(e,t)=>{return l=void 0,r=void 0,o=function*(){const l=((e,t)=>{const l=[e];var r;return{where:`${e} IS NOT NULL`,orderByFields:null!=(r=e)&&""!==`${r}`.trim()?[`${e} ${i.WebChartSortOrderKinds.Ascending}`]:[],outFields:l,returnDistinctValues:!0,returnGeometry:!1,pageSize:101}})(t);return(yield e.query(l)).records.map((e=>e.getFieldValue(t))).filter((e=>void 0!==e))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{s(o.next(e))}catch(e){t(e)}}function n(e){try{s(o.throw(e))}catch(e){t(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof a?l:new a((function(e){e(l)}))).then(i,n)}s((o=o.apply(l,r||[])).next())}));var l,r,a,o},de=(0,l.Immutable)({}),he=(e=de)=>{const{groupByFieldsForStatistics:t,outFields:i,outStatistics:r,where:a}=e;return l.React.useMemo((()=>{let e=(0,l.Immutable)({});return a&&(e=e.set("where",a)),t&&(e=e.set("groupByFieldsForStatistics",t)),i&&(e=e.set("outFields",i)),r&&(e=e.set("outStatistics",r)),Object.keys(e).length>0?e:null}),[t,i,r,a])},pe=e=>{var t;const{widgetId:n,dataSourceId:s,webChart:c}=e,{dataSource:v,outputDataSource:u,records:d}=oe(),h=he(null===(t=null==c?void 0:c.dataSource)||void 0===t?void 0:t.query),p=l.hooks.useLatest(null==c?void 0:c.series);l.hooks.useUpdateEffect((()=>{var e,t;if(v&&u&&h&&!h.where){const n=u.id,s=v.id,c=(0,i.getSeriesType)(p.current),d=((e,t,i,n)=>{const s=Z(e);let c=null;return"histogramSeries"===n?c=((e,t)=>{const i=((e,t)=>{var i;let r=(0,l.Immutable)({});const a=null===(i=null==e?void 0:e.outFields)||void 0===i?void 0:i[0];return a&&[{name:"minValue",alias:"Min value"},{name:"maxValue",alias:"Max value"},{name:o,alias:"Count"}].forEach((({name:e,alias:i})=>{var n,s;const c=e,v=[a],u=l.JimuFieldType.Number,d=e===o?l.EsriFieldType.Integer:l.EsriFieldType.Double,h=V(a,t),p=null===(s=null===(n=null==h?void 0:h.format)||void 0===n?void 0:n.digitSeparator)||void 0===s||s,m=e===o?0:3,S={jimuName:c,type:u,esriType:d,name:e,alias:i,originFields:v,format:Object.assign(Object.assign({},null==h?void 0:h.format),{digitSeparator:p,places:m})};r=r.set(e,S)})),r})(e,t);return{fields:i.asMutable({deep:!0})}})(i,t):j(n)||"pieSeries"===n?c=((e,t)=>{const i=((e,t)=>{var i,o;const n=null==e?void 0:e.groupByFieldsForStatistics,s=null==e?void 0:e.outFields,c=null==e?void 0:e.outStatistics;let v=(0,l.Immutable)({});if(n&&s)n.concat(s).forEach((e=>{if(e){const l=Q(e,t);v=v.set(e,l)}}));else if(n&&c){const e=n[0];if(e){const l=Q(e,t);v=v.set(e,l)}c.forEach((e=>{var i,r,a;const o=e.onStatisticField;if(o){const n=e.statisticType,s=e.outStatisticFieldName,c=null!==(r=null===(i=V(o,t))||void 0===i?void 0:i.alias)&&void 0!==r?r:o,u=q(c,n);let d=Q(o,t,s);d=d.set("alias",u);let h=d.format;n===l.StatisticType.Count?(h=h||(0,l.Immutable)({}),h=h.set("places",0)):n===l.StatisticType.Avg&&void 0===(null===(a=d.format)||void 0===a?void 0:a.places)&&(h=h||(0,l.Immutable)({}),h=h.set("places",3)),h&&(d=d.set("format",h)),v=v.set(s,d)}}))}else if(!n&&c){const e=null===(o=(i=c.map((e=>e.onStatisticField))).asMutable)||void 0===o?void 0:o.call(i,{deep:!0}),t=r,n=a,s=Y(t,l.JimuFieldType.String,"Name",e),u=Y(n,l.JimuFieldType.Number,"Value",e);v=v.set(t,s),v=v.set(n,u)}return v})(e,t);return{fields:i.asMutable({deep:!0})}})(i,t):"scatterSeries"===n&&(c=((e,t)=>{const i=((e,t)=>{let i=(0,l.Immutable)({});const r=null==e?void 0:e.outFields;return r&&r.forEach((e=>{const l=Q(e,t);i=i.set(e,l)})),i})(e,t);return{fields:i.asMutable({deep:!0})}})(i,t)),c={idField:s.jimuName,fields:Object.assign({[s.jimuName]:s},c.fields)},c})(u,s,h,c);let m=null===(t=null===(e=(0,l.getAppStore)().getState())||void 0===e?void 0:e.appConfig.dataSources)||void 0===t?void 0:t[n];if(!m)return console.error(`The output data source of ${n} does not exist`),null;m=m.set("schema",d),l.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(u,m)}}),[v,u,h]);const m=ne();l.React.useEffect((()=>{(e=>{if(!e)return!1;const t=e.getInfo();return t&&Object.keys(t).length>0})(u)&&d&&(u.setSourceRecords(d),u.setStatus(l.DataSourceStatus.Unloaded),u.setCountStatus(l.DataSourceStatus.Unloaded))}),[u,d]);const S=l.React.useMemo((()=>{if(s)return(0,l.Immutable)({dataSourceId:s,mainDataSourceId:s})}),[s]);return l.React.createElement(l.DataSourceComponent,{widgetId:n,useDataSource:S,onDataSourceCreated:e=>{(e=>{var t,i,r;const a=l.DataSourceManager.getInstance().getDataSource(null===(r=null===(i=null===(t=null==e?void 0:e.getDataSourceJson())||void 0===t?void 0:t.originDataSources)||void 0===i?void 0:i[0])||void 0===r?void 0:r.dataSourceId);e&&a?e.setLayerDefinition(l.dataSourceUtils.getLayerDefinitionIntersection(a.getLayerDefinition(),e)):console.error("Failed to sync origin data source info to chart output data source.")})(e),m({type:"SET_OUTPUT_DATA_SOURCE",value:e})}})},me=(e,t,i,a,o)=>{const{dataSource:n,outputDataSource:s}=oe(),c=ne(),v=(e=>{var t;return null===(t=null==e?void 0:e.groupByFieldsForStatistics)||void 0===t?void 0:t[0]})(t),u=l.React.useMemo((()=>((e,t)=>{var l;return((e,t)=>{var l,i,r,a,o,n;return j(e)||"pieSeries"===e?t.outFields?!(!(null===(l=null==t?void 0:t.outFields)||void 0===l?void 0:l[0])||!(null===(i=null==t?void 0:t.groupByFieldsForStatistics)||void 0===i?void 0:i[0])):!!(null===(a=null===(r=null==t?void 0:t.outStatistics)||void 0===r?void 0:r[0])||void 0===a?void 0:a.onStatisticField):"scatterSeries"===e?!!(null===(o=null==t?void 0:t.outFields)||void 0===o?void 0:o[1]):"histogramSeries"===e?!!(null===(n=null==t?void 0:t.outFields)||void 0===n?void 0:n[0]):void 0})(e,t)?(null===(l=t.outStatistics)||void 0===l?void 0:l.length)&&!t.groupByFieldsForStatistics?t.without("orderByFields"):t:null})(e,t)),[t,e]);l.React.useEffect((()=>{ve(n)&&s&&null!=u&&(c({type:"SET_RECORDS_STATUS",value:"loading"}),n.query(u).then((e=>{var l;let i=e.records;return o&&(i=null!==(l=o(i,t,n))&&void 0!==l?l:[]),i=((e,t,l)=>{var i;const a=t.getIdField(),o=l||r,n=null==e?void 0:e.filter((e=>{var t;return null!=(null===(t=null==e?void 0:e.getData())||void 0===t?void 0:t[o])}));return null===(i=null==n?void 0:n.map(((e,l)=>{var i;if(t&&e.dataSource!==t){const r=e.getData(),n=o===a&&null!==(i=r[a])&&void 0!==i?i:l,s={attributes:Object.assign(Object.assign({},r),{[a]:n})};return t.buildRecord(s)}return e})))||void 0===i?void 0:i.filter((e=>!!e))})(i,s,v),i.length>a?(c({type:"SET_RECORDS",value:void 0}),void c({type:"SET_RECORDS_STATUS",value:"exceed"})):0===i.length?(c({type:"SET_RECORDS_STATUS",value:"empty"}),void c({type:"SET_RECORDS",value:i})):(c({type:"SET_RECORDS_STATUS",value:"loaded"}),void c({type:"SET_RECORDS",value:i}))}),(e=>{console.error(e),c({type:"SET_RECORDS",value:void 0}),c({type:"SET_RECORDS_STATUS",value:"error"})})))}),[n,s,u,i])},Se=t=>{var r;const{widgetId:a,webChart:o,outputDataSourceId:n,useDataSource:s,chartLimits:c=u}=t,v=(0,i.getSeriesType)(null==o?void 0:o.series),d=null===(r=null==o?void 0:o.dataSource)||void 0===r?void 0:r.query,h=((e,t)=>{let l=1e3;const r=null==e?void 0:e.length;if(!r)return l;const a=(0,i.getSeriesType)(e);return j(a)?1===r?l=t.maxBarUniqueSeriesCountTotal:2===r?l=t.maxBarTwoSeriesCountPerSeries:r>2&&(l=t.maxBarThreePlusSeriesCountPerSeries):"pieSeries"===a&&(l=t.maxPieChartSliceCountTotal),l})(null==o?void 0:o.series,c),{queryVersion:p}=oe(),m=P(d),S=l.React.useMemo((()=>m!==e.ByField||!j(v)&&"pieSeries"!==v?null:ce),[m,v]);return me(v,d,p,h,S),l.React.createElement(l.React.Fragment,null,l.React.createElement(se,{widgetId:a,useDataSource:s}),l.React.createElement(pe,{webChart:o,widgetId:a,dataSourceId:n,originalDataSourceId:null==s?void 0:s.dataSourceId}))},ge=e=>{var t,r,a,o;const{widgetId:n,useDataSource:s,outputDataSourceId:c,webChart:u,onSplitValuesChange:d,onSchemaChange:h}=e,{queryVersion:p,dataSource:m,outputDataSource:S}=oe(),[g,y]=l.React.useState(),f=null==s?void 0:s.dataSourceId,b=(0,i.getSplitByField)(null===(r=null===(t=null==u?void 0:u.dataSource)||void 0===t?void 0:t.query)||void 0===r?void 0:r.where,!0),M=null===(a=null==u?void 0:u.series)||void 0===a?void 0:a.length,z=l.hooks.useLatest(null==u?void 0:u.series),A=l.hooks.useLatest(b),w=l.hooks.useLatest(d),T=l.hooks.useLatest(h),C=he(null===(o=null==u?void 0:u.dataSource)||void 0===o?void 0:o.query);return l.React.useEffect((()=>{b&&ve(m)&&ue(m,b).then((e=>{y({[b]:e})}))}),[m,b,p,w]),l.hooks.useUpdateEffect((()=>{var e,t;if(m&&S&&(null==g?void 0:g[A.current])){const r=m.id,a=S.id,o=((e,t,r,a,o)=>{const n=Z(e),s=((e,t,r,a)=>{var o,n,s,c;let v=(0,l.Immutable)({});const u=null==e?void 0:e.groupByFieldsForStatistics;u.forEach((e=>{if(e){const l=Q(e,t);v=v.set(e,l)}}));const d=null==e?void 0:e.outFields,h=null==e?void 0:e.outStatistics,p=(0,i.getSplitByField)(null==e?void 0:e.where,!0),m=(e=>(null==e?void 0:e.length)?e.map((e=>{const t=e.query.where;return(0,i.getSplitByValue)({where:t,normalize:!0})})):(0,l.Immutable)([]))(r).asMutable({deep:!0}),S=Array.from(new Set(m.concat(null!=a?a:[])));let g="",y="no_aggregation";u&&d?g=d[0]:u&&h&&(g=null===(o=h[0])||void 0===o?void 0:o.onStatisticField,y=null===(n=h[0])||void 0===n?void 0:n.statisticType);const f=null!==(c=null===(s=V(g,t))||void 0===s?void 0:s.alias)&&void 0!==c?c:g;return S.forEach((e=>{var i;const r=G(f,y,e),a=((e,t,l)=>{let i=q(e,t);return i=`${i} of ${l}`,i})(g,y,e);if(g){let e=Q(g,t,r);e=e.set("alias",a),e=e.set("originFields",e.originFields.concat(p));let o=e.format;y===l.StatisticType.Count?(o=o||(0,l.Immutable)({}),o=o.set("places",0)):y===l.StatisticType.Avg&&void 0===(null===(i=e.format)||void 0===i?void 0:i.places)&&(o=o||(0,l.Immutable)({}),o=o.set("places",3)),o&&(e=e.set("format",o)),v=v.set(r,e)}})),v})(r,t,a.filter((e=>e.id!==v)),o);return{idField:n.jimuName,fields:Object.assign({[n.jimuName]:n},s.asMutable({deep:!0}))}})(S,r,C,z.current,g[A.current]);let n=null===(t=null===(e=(0,l.getAppStore)().getState())||void 0===e?void 0:e.appConfig.dataSources)||void 0===t?void 0:t[a];if(!n)return console.error(`The output data source of ${r} does not exist`),null;n=n.set("schema",o),l.DataSourceManager.getInstance().updateDataSourceByDataSourceJson(S,n),w.current(g),T.current(o)}}),[m,S,g,C,M]),l.React.createElement(l.React.Fragment,null,l.React.createElement(se,{widgetId:n,useDataSource:s}),l.React.createElement(pe,{webChart:u,widgetId:n,dataSourceId:c,originalDataSourceId:f}))};var ye=n(84441),fe=n.n(ye);const be=e=>{const t=window.SVG,{className:i}=e,r=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(l[i[r]]=e[i[r]])}return l}(e,["className"]),a=(0,l.classNames)("jimu-icon jimu-icon-component",i);return t?l.React.createElement(t,Object.assign({className:a,src:fe()},r)):l.React.createElement("svg",Object.assign({className:a},r))};var Me=n(48682),ze=n.n(Me);const Ae=e=>{const t=window.SVG,{className:i}=e,r=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(l[i[r]]=e[i[r]])}return l}(e,["className"]),a=(0,l.classNames)("jimu-icon jimu-icon-component",i);return t?l.React.createElement(t,Object.assign({className:a,src:ze()},r)):l.React.createElement("svg",Object.assign({className:a},r))},we=e=>{const t=l.hooks.useTranslation(h.defaultMessages),[r,a]=l.React.useState("selection"),{type:o="barSeries",className:n,onChange:s}=e;return l.React.createElement("div",{className:(0,l.classNames)("range-cursor-mode",n)},l.React.createElement(h.Tooltip,{title:t("SelectLabel")},l.React.createElement(h.Button,{size:"sm",className:"mr-1",icon:!0,type:"tertiary","aria-label":t("SelectLabel"),onClick:()=>{"pieSeries"!==o&&(s("selection"),a("selection"))},active:"selection"===r},l.React.createElement(Ae,null))),(e=>{if(null==e||""===e)return!1;const t="string"==typeof e?e:(0,i.getSeriesType)(e);return t===i.WebChartTypes.BarSeries||t===i.WebChartTypes.LineSeries||t===i.WebChartTypes.ScatterSeries||t===i.WebChartTypes.HistogramSeries})(o)&&l.React.createElement(h.Tooltip,{title:t("ZoomLabel")},l.React.createElement(h.Button,{size:"sm",icon:!0,type:"tertiary","aria-label":t("ZoomLabel"),onClick:()=>{s("zoom"),a("zoom")},active:"zoom"===r},l.React.createElement(be,null))))};var Te=n(43036),Ce=n.n(Te);const Re=e=>{const t=window.SVG,{className:i}=e,r=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(l[i[r]]=e[i[r]])}return l}(e,["className"]),a=(0,l.classNames)("jimu-icon jimu-icon-component",i);return t?l.React.createElement(t,Object.assign({className:a,src:Ce()},r)):l.React.createElement("svg",Object.assign({className:a},r))},xe=e=>{const t=l.hooks.useTranslation(h.defaultMessages),{type:i,className:r,onModeChange:a,onClearSelection:o}=e;return l.React.createElement("div",{className:(0,l.classNames)("selection-zoom d-flex",r)},l.React.createElement(we,{type:i,className:"mr-1",onChange:a}),l.React.createElement(h.Tooltip,{title:t("clearSelection")},l.React.createElement(h.Button,{size:"sm",icon:!0,"aria-label":t("clearSelection"),type:"tertiary",onClick:o},l.React.createElement(Re,null))))},Fe=l.css`
  .tool-dividing-line {
    height: 16px;
    width: 1px;
    background-color: var(--light-400);
  }
`,De=e=>{var t,r,a;const{type:o="barSeries",className:n,widgetId:s,tools:c,enableDataAction:v}=e,u=l.hooks.useTranslation(h.defaultMessages),d=u("outputStatistics",{name:null!==(a=null===(r=null===(t=(0,l.getAppStore)().getState().appConfig.widgets)||void 0===t?void 0:t[s])||void 0===r?void 0:r.label)&&void 0!==a?a:"Chart"}),{outputDataSource:p,chart:m}=oe(),S=null==c?void 0:c.cursorEnable,g=l.ReactRedux.useSelector((e=>{var t;return null===(t=null==e?void 0:e.dataSourcesInfo[null==p?void 0:p.id])||void 0===t?void 0:t.selectedIds})),y=l.React.useMemo((()=>p?[{name:d,type:"selected",dataSource:p,records:null==p?void 0:p.getSelectedRecords()}]:[]),[d,p,g]);return l.React.useEffect((()=>{S?null==m||m.setActionMode(i.ActionModes.MultiSelectionWithCtrlKey):null==m||m.setActionMode(i.ActionModes.None)}),[S,m]),(0,l.jsx)("div",{css:Fe,className:(0,l.classNames)("chart-tool-bar w-100 d-flex align-items-center justify-content-end px-2 pt-2",n),role:"group","aria-label":u("tools")},S&&(0,l.jsx)(xe,{type:o,className:"mr-1",onModeChange:e=>{"selection"===e?null==m||m.setActionMode(i.ActionModes.MultiSelectionWithCtrlKey):"zoom"===e&&(null==m||m.setActionMode(i.ActionModes.Zoom))},onClearSelection:()=>{null==m||m.clearSelection()}}),v&&(0,l.jsx)(l.React.Fragment,null,(0,l.jsx)("span",{className:"tool-dividing-line mx-1"}),(0,l.jsx)(h.DataActionList,{widgetId:s,buttonType:"tertiary",listStyle:h.DataActionListStyle.Dropdown,dataSets:y})))},Ie=(e,t,l)=>{var i;const r=[],a=null===(i=null==t?void 0:t.groupByFieldsForStatistics)||void 0===i?void 0:i[0];return null==e||e.forEach((e=>{const t=e.getData();let i=Object.assign({},t);a&&null==i[a]||(i=Ee(i,e,a,l),r.push(i))})),r},Ee=(e,t,l,i)=>{const r=t.getFieldValue(l),a=t.getFormattedFieldValue(l,i);return a!==r&&(e[l]=a,e[l+"_original"]=r),e},Oe=(t,l,r,a,o)=>{var n,s,c,v;let u=null,d=null,h=!0;if(j(t))u=null!==(n=((t,l,i)=>{let r=[];const a=P(l);return a===e.ByGroup?r=Ie(t,l,i):a===e.ByField&&(r=null==t?void 0:t.map((e=>e.getData()))),r})(l,r,o))&&void 0!==n?n:[],d={dataItems:u};else if("pieSeries"===t)u=null!==(s=((t,l,i)=>{let r=[];const a=P(l);return a===e.ByGroup?r=Ie(t,l,i):a===e.ByField&&(r=null==t?void 0:t.map((e=>e.getData()))),r})(l,r,o))&&void 0!==s?s:[],d={dataItems:u};else if("scatterSeries"===t)u=null!==(c=((e,t)=>{var l;const i=[],r=null===(l=null==t?void 0:t.outFields)||void 0===l?void 0:l[0];return null==e||e.forEach((e=>{const t=e.getData(),l=Object.assign({},t);r&&null==l[r]||i.push(l)})),i})(l,r))&&void 0!==c?c:[],d={dataItems:u},h=!1;else if("histogramSeries"===t){const e=((e,t)=>{const{statistic:l,bins:r}=((e,t)=>{const l=null==e?void 0:e.map((e=>e.getData())),r=(0,i.processInlineHistogramRawData)(l,t[0]);let a=null,o=[];if(r.valid){const e=r.data;o=e.bins;const{mean:t,stddev:l,median:i,min:n,max:s}=e;a={mean:t,stddev:l,median:i,min:n,max:s}}return{statistic:a,bins:o}})(e,t);if(null==r?void 0:r.length)return Object.assign(Object.assign({},l),{bins:r})})(l,a);u=null!==(v=null==e?void 0:e.bins)&&void 0!==v?v:[],d=e}return[{inputData:d,processed:h},u]},Le={_widgetLabel:"Chart",bar1SeriesLimitation:"Bar or column charts with one series are limited to 10,000 bars in total. Please filter or re-aggregate your data and try again.",bar2SeriesLimitation:"Bar or column charts with two series are limited to 2,000 bars, or 1,000 bars per series. Please filter or re-aggregate your data and try again.",bar3SeriesLimitation:"Bar or column charts with three or more series are limited to 2,000 bars, or 100 bars per series. Please filter or re-aggregate your data and try again.",lineLimitation:"Line or area charts are limited to 10,000 value markers in total and maximum of 100 series. Please filter or re-aggregate your data and try again.",pieLimitation:"Cannot render, too many categories. Pie chart is limited to 300 categories as the maximum.",dataEmptyTip:"No data found."},Be=e=>((e,t)=>((e,t)=>{var l,i,r,a,o,n,s,c,v;return j(e)||"pieSeries"===e?t.outFields?!(!(null===(l=null==t?void 0:t.outFields)||void 0===l?void 0:l[0])||!(null===(i=null==t?void 0:t.groupByFieldsForStatistics)||void 0===i?void 0:i[0])):(null==t?void 0:t.groupByFieldsForStatistics)?!!(null===(r=null==t?void 0:t.groupByFieldsForStatistics)||void 0===r?void 0:r[0])&&!!(null===(o=null===(a=null==t?void 0:t.outStatistics)||void 0===a?void 0:a[0])||void 0===o?void 0:o.onStatisticField):!!(null===(s=null===(n=null==t?void 0:t.outStatistics)||void 0===n?void 0:n[0])||void 0===s?void 0:s.onStatisticField):"scatterSeries"===e?!!(null===(c=null==t?void 0:t.outFields)||void 0===c?void 0:c[1]):"histogramSeries"===e?!!(null===(v=null==t?void 0:t.outFields)||void 0===v?void 0:v[0]):void 0})(e,null==t?void 0:t.query))((0,i.getSeriesType)(null==e?void 0:e.series),null==e?void 0:e.dataSource),je=(e,t,i,r,a,o)=>{const[n,s]=l.React.useState("tooltip"),[c,v]=l.React.useState(""),u=l.ReactRedux.useSelector((e=>{var t,l;return null===(l=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==i?void 0:i.dataSourceId])||void 0===l?void 0:l.status})),d=l.ReactRedux.useSelector((e=>{var t,l;return null===(l=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==i?void 0:i.dataSourceId])||void 0===l?void 0:l.instanceStatus})),p=l.hooks.useTranslation(l.defaultMessages,h.defaultMessages,Le);return l.React.useEffect((()=>{if(s("exceed"===r?"basic":"tooltip"),u===l.DataSourceStatus.NotReady&&d===l.DataSourceStatus.Created){const e=l.DataSourceManager.getInstance().getDataSource(i.dataSourceId),t=((e,t)=>{if(!e||!t)return null;const i=((e,t)=>{const i=null==t?void 0:t.getLabel(),r=(e=>{var t,i,r;const a=l.appConfigUtils.getWidgetIdByOutputDataSource(e);return null===(r=null===(i=null===(t=(0,l.getAppStore)().getState())||void 0===t?void 0:t.appConfig.widgets)||void 0===i?void 0:i[a])||void 0===r?void 0:r.label})(e);return{dataSourceLabel:i,widgetLabel:r}})(e,t);return["outputDataIsNotGenerated",{outputDsLabel:i.dataSourceLabel,sourceWidgetName:i.widgetLabel}]})(i,e);if(t){const e=p(...t);v(e)}}else if(t){const t=((e,t,l,i)=>{let r="";return i?r="dataEmptyTip":"exceed"===l?j(e)?"lineSeries"===e?r="lineLimitation":1===t?r="bar1SeriesLimitation":2===t?r="bar2SeriesLimitation":t>2&&(r="bar3SeriesLimitation"):"pieSeries"===e&&(r="pieLimitation"):"empty"===l?r="dataEmptyTip":"error"===l&&(r="widgetLoadError"),r})(e,a,r,o);if(t){const e=p(t);v(e)}}else v("")}),[u,d,e,t,r,o]),[n,c]},Ne={bar:n(63155),column:n(46986),"stacked-bar":n(49856),"stacked100-bar":n(90007),"stacked-column":n(11888),"stacked100-column":n(83466),line:n(52760),"smooth-line":n(27118),area:n(27691),"smooth-area":n(62859),pie:n(29174),donut:n(40021),scatter:n(90541),histogram:n(80948)},Ve=l.css`
  display: flex;
  justify-content: center;
  position: absolute;
  z-index: 1;
  .jimu-widget-placeholder {
    position: absolute;
    left: 0px;
    top: 0px;
  }
  .alert-tooltip-button{
    position: absolute;
    right: 10px;
    bottom: 10px;
  }
  .alert-panel {
    position: absolute;
    max-width: calc(100% - 20px);
    width: auto !important;
    bottom: 10px;
  }
`,ke=e=>{const{templateType:t,showMessage:i,message:r,messageType:a="tooltip",className:o}=e,n=l.React.useMemo((()=>Ne[t]),[t]);return(0,l.jsx)("div",{className:(0,l.classNames)("placeholder-container w-100 h-100",o),css:Ve},(0,l.jsx)(h.WidgetPlaceholder,{iconSize:"large",icon:n}),i&&(0,l.jsx)(h.Alert,{form:a,withIcon:!0,size:"small",type:"warning",text:r}))},Pe=d.styled.div((e=>`\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background-color: ${e.background} !important;\n      .chart-toolbar {\n        height: ${e.showTools?"38px":"0px"};\n      }\n      .chart-container {\n        height: ${e.showTools?"calc(100% - 38px)":"100%"} !important;\n        > .web-chart {\n          height: 100%;\n          width: 100%;\n        }\n      }\n      .arcgis-charts-modal-content, .arcgis-charts-ampopup-content, .arcgis-charts-modal-curtain, .arcgis-charts-ampopup-curtain {\n        z-index: auto;\n      }\n    `)),_e=e=>{const{className:t,showPlaceholder:i,showLoading:r,background:a,tools:o,templateType:n,messageType:s,message:c,children:v}=e;return l.React.createElement(Pe,{showTools:!!o,background:a,className:(0,l.classNames)("chart-root",t)},i&&l.React.createElement(ke,{templateType:n,message:c,messageType:s,showMessage:!!c}),!i&&l.React.createElement(l.React.Fragment,null,l.React.createElement("div",{className:"chart-toolbar"},o),l.React.createElement("div",{className:"chart-container"},v,r&&l.React.createElement(h.Loading,{type:"DONUT"}))))};const We=l.React.forwardRef(((e,t)=>{var r;const{version:a,noDataOptions:o,tooltipFormatter:n,dataLabelFormatter:s,enableResponsiveFeatures:c=!1,autoDisposeChart:v=!1,queueChartCreation:u=!0,useAnimatedCharts:d=!1,hideLicenceWatermark:h=!0,ignoreSmoothRenderingLimit:p=!1,legendValueLabelFormatter:m,setTimeBinningInfoWhenNotProvided:S,returnSelectionIndexes:g=!0,returnSelectionOIDs:y=!1,chartWillRender:f}=e,b=function(e,t){var l={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(l[i[r]]=e[i[r]])}return l}(e,["version","noDataOptions","tooltipFormatter","dataLabelFormatter","enableResponsiveFeatures","autoDisposeChart","queueChartCreation","useAnimatedCharts","hideLicenceWatermark","ignoreSmoothRenderingLimit","legendValueLabelFormatter","setTimeBinningInfoWhenNotProvided","returnSelectionIndexes","returnSelectionOIDs","chartWillRender"]),M=l.React.useRef(null),z=l.hooks.useForkRef(t,M),A=(0,i.getSeriesType)(null===(r=e.webMapWebChart)||void 0===r?void 0:r.series),w={autoDisposeChart:v,enableResponsiveFeatures:c,queueChartCreation:u,useAnimatedCharts:d,hideLicenceWatermark:h,returnSelectionIndexes:g,returnSelectionOIDs:y};return l.hooks.useUpdateEffect((()=>{M.current&&M.current.refresh()}),[a]),l.React.createElement(l.React.Fragment,null,"barSeries"===A&&l.React.createElement(i.BarChart,Object.assign({ref:z},b,{dataLabelFormatter:s,tooltipFormatter:n,noDataOptions:o},w)),"lineSeries"===A&&l.React.createElement(i.LineChart,Object.assign({ref:z},b,{dataLabelFormatter:s,tooltipFormatter:n,ignoreSmoothRenderingLimit:p,setTimeBinningInfoWhenNotProvided:S,noDataOptions:o},w)),"pieSeries"===A&&l.React.createElement(i.PieChart,Object.assign({ref:z},b,{dataLabelFormatter:s,tooltipFormatter:n,legendValueLabelFormatter:m,noDataOptions:o,chartWillRender:f},w)),"scatterSeries"===A&&l.React.createElement(i.ScatterPlot,Object.assign({ref:z},b,{dataLabelFormatter:s,tooltipFormatter:n,ignoreSmoothRenderingLimit:p,noDataOptions:o},w)),"histogramSeries"===A&&l.React.createElement(i.Histogram,Object.assign({ref:z},b,{dataLabelFormatter:s,tooltipFormatter:n},w)))})),He=(e,t)=>{const l=e.y,i=t.outStatistics.filter((e=>e.outStatisticFieldName===l)),{groupByFieldsForStatistics:r,orderByFields:a,pageSize:o}=t,n={groupByFieldsForStatistics:r,outStatistics:i,orderByFields:a,num:o};return e.set("query",n)},Ue=(e,t)=>{const{orderByFields:l,pageSize:i}=t,r={orderByFields:l,num:i};return e.set("query",r)},qe=(e,t)=>{var l;const r=e.query.where,a=(0,i.getSplitByValue)({where:r,normalize:!0});if(null===(l=t.outFields)||void 0===l?void 0:l.length){const{orderByFields:l,pageSize:i}=t,a={where:r,orderByFields:l,num:i};return e.set("query",a)}{const l=t.outStatistics[0].onStatisticField,i=t.outStatistics[0].statisticType,o=G(l,i,a),n=[Object.assign(Object.assign({},t.outStatistics[0]),{outStatisticFieldName:o})],{groupByFieldsForStatistics:s,orderByFields:c,pageSize:v}=t,u={where:r,groupByFieldsForStatistics:s,outStatistics:n,orderByFields:c,num:v};return e.set("query",u).set("y",o)}},$e=(e,t,r)=>{const a=l.React.useRef(),o=l.hooks.useEventCallback((o=>{var n,s;const c=null==t?void 0:t.getSourceRecords();if(!(null==c?void 0:c.length))return;const v=o.detail.selectionSource;if(v!==i.SelectionSource.SelectionByClick&&v!==i.SelectionSource.SelectionByRange&&v!==i.SelectionSource.ClearSelection)return;const u=null===(n=r[0].query)||void 0===n?void 0:n.where,d=(0,i.getSplitByField)(u),h=((e,t)=>t?e.map((e=>{const l=Object.assign({},e);return delete l[t],l})):e)(null!==(s=o.detail.selectionItems)&&void 0!==s?s:[],d),p=((e,t)=>e.filter((e=>{const l=e.getData();return t.some((e=>{return t=l,i=e,Object.keys(i).every((e=>t[e]===i[e]));var t,i}))})))(c,h),m=p.map((e=>e.getId()));a.current=m,l.MessageManager.getInstance().publishMessage(new l.DataRecordsSelectionChangeMessage(e,p)),t.selectRecordsByIds(m)})),n=l.ReactRedux.useSelector((e=>{var l,i;return null===(i=null===(l=e.dataSourcesInfo)||void 0===l?void 0:l[null==t?void 0:t.id])||void 0===i?void 0:i.selectedIds})),[s,c]=l.React.useState(),v=l.hooks.useEventCallback((e=>{const l=null==t?void 0:t.getSourceRecords();if(!(null==l?void 0:l.length))return;const i=((e,t)=>e.map((e=>{const l=t.find((t=>t.getId()===e));let i=null;return l&&(i=l.getData(),i=Object.assign({},i)),i})).filter((e=>!!e)))(null!=e?e:[],l);return i}));return l.React.useEffect((()=>{if(!n)return;const e=n.asMutable();if(l.lodash.isDeepEqual(e,a.current))return;a.current=e;const t=v(e);c(t)}),[n]),[l.React.useMemo((()=>({selectionItems:s})),[s]),o]};const Ge={displayMessageWhenNoData:!1},Je=[0,0,0,0],Ke=function(t){var a,o;const{className:n,widgetId:s,webChart:c,chartLimits:v,onInitDragHandler:u}=t,{outputDataSource:d,records:p,recordsStatus:m}=oe(),S=ne(),g=l.React.useRef(null),y=s+"-"+(null!==(a=null==c?void 0:c.id)&&void 0!==a?a:"chart"),f=(0,l.useIntl)(),b=l.hooks.useTranslation(Le,h.defaultMessages),M=l.React.useRef(null);let z=l.React.useMemo((()=>c.set("version","7.3.1").without("dataSource").set("id",y).set("background",Je)),[y,c]);const A=(0,i.getSeriesType)(c.series),w=null===(o=null==c?void 0:c.dataSource)||void 0===o?void 0:o.query,T=null==c?void 0:c.series,[C,R]=l.React.useMemo((()=>Oe(A,p,w,T,f)),[A,p,w,T,f]);let x=l.React.useMemo((()=>((t,l)=>{let r=null;const a=(0,i.getSeriesType)(t);if(l.where)r=qe;else if(j(a)||"pieSeries"===a){const t=null==l?void 0:l.outFields;(null==t?void 0:t.length)?r=Ue:P(l)===e.ByGroup&&(r=He)}return r?null==t?void 0:t.map((e=>r(e,l))):t})(T,w)),[T,w]);x=l.React.useMemo((()=>((t,l,a)=>{var o,n,s;if("pieSeries"!==(0,i.getSeriesType)(t))return t;const c=null===(o=null==t?void 0:t[0])||void 0===o?void 0:o.slices;if(!c)return t;const v=P(l)===e.ByField?r:null===(n=null==l?void 0:l.groupByFieldsForStatistics)||void 0===n?void 0:n[0],u=v+"_original",d=null===(s=null==c?void 0:c.map((e=>{const t=e.sliceId,l=null==a?void 0:a.find((e=>{const l=e[u]||e[v];return null!=l&&(t===l||t===l+"")}));return l?e.set("sliceId",l[v]):null})))||void 0===s?void 0:s.filter((e=>!!e));return t.map((e=>e.set("slices",d)))})(x,w,R)),[R,w,x]),x=l.React.useMemo((()=>((t,l,r)=>{var a,o;const n=(0,i.getSeriesType)(t),s=null===(o=null===(a=null==l?void 0:l.outStatistics)||void 0===a?void 0:a[0])||void 0===o?void 0:o.statisticType;let c=t;return P(l)===e.ByField?c:s?((j(n)||"pieSeries"===n)&&(c=t.map((e=>{const t=e.name,l=((e,t,l)=>l($[e],{field:t}))(s,t,r);return e.set("name",l)}))),c):c})(x,w,b)),[x,w,b]),z=l.React.useMemo((()=>z.set("series",x)),[z,x]);const F=l.React.useMemo((()=>"loaded"!==m?M.current:(M.current=z,z)),[m,z]),D=l.React.useCallback((e=>{g.current=e,S({type:"SET_CHART",value:e})}),[S]),[I,E]=$e(s,d,T),O=l.React.useCallback((e=>{return t=this,l=void 0,r=function*(){var t,l;const{chartConfig:i,slices:r}=e;let a=null===(l=null===(t=null==i?void 0:i.series)||void 0===t?void 0:t[0])||void 0===l?void 0:l.slices,o=i;return(null==a?void 0:a.length)&&(a=a.map((e=>{var t;const l=e.sliceId,i=null===(t=null==r?void 0:r.find((e=>e.originalLabel===l)))||void 0===t?void 0:t.sliceId;return i?Object.assign(Object.assign({},e),{sliceId:i}):e})),o=Object.assign(Object.assign({},i),{series:[Object.assign(Object.assign({},i.series[0]),{slices:a})]})),o},new((i=void 0)||(i=Promise))((function(e,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function n(e){try{s(r.throw(e))}catch(e){a(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof i?l:new i((function(e){e(l)}))).then(o,n)}s((r=r.apply(t,l||[])).next())}));var t,l,i,r}),[]);return l.hooks.useEffectOnce((()=>{null==u||u(null,null,(()=>{g.current&&g.current.refresh()}))})),l.React.createElement(l.React.Fragment,null,F&&l.React.createElement(We,{ref:D,className:n,webMapWebChart:F,inlineData:C,chartWillRender:O,noDataOptions:Ge,hideLoaderAnimation:!0,chartLimits:v,selectionData:I,arcgisChartsSelectionComplete:E}))},Ye=e=>{var t,r,a;const{widgetId:o,tools:n,enableDataAction:s=!0,webChart:c,chartLimits:v,useDataSource:u,defaultTemplateType:d,onInitDragHandler:h}=e,{recordsStatus:p,records:m}=oe(),S=(0,i.getSeriesType)(null==c?void 0:c.series),g=(null==n?void 0:n.cursorEnable)||!!(null==n?void 0:n.filter)||s,{valid:y,render:f}=((e,t,i)=>{const r=l.ReactRedux.useSelector((t=>{var l,i;return null===(i=null===(l=t.dataSourcesInfo)||void 0===l?void 0:l[e])||void 0===i?void 0:i.status})),a=l.React.useMemo((()=>Be(t)),[t]);return{valid:a,render:r&&r!==l.DataSourceStatus.NotReady&&a&&!!(null==i?void 0:i.length)}})(null==u?void 0:u.dataSourceId,c,m),b=(null===(t=k(c))||void 0===t?void 0:t[1])||d||"column",[M,z]=je(S,y,u,p,null!==(a=null===(r=null==c?void 0:c.series)||void 0===r?void 0:r.length)&&void 0!==a?a:0),A=g?l.React.createElement(De,{type:S,tools:n,widgetId:o,enableDataAction:s}):null;return l.React.createElement(_e,{templateType:b,messageType:M,message:z,showLoading:"loading"===p,background:null==c?void 0:c.background,className:"web-inlie-data-chart",showPlaceholder:!f,tools:A},l.React.createElement(Ke,{className:"web-chart",widgetId:o,webChart:c,chartLimits:v,onInitDragHandler:h}))};var Qe=n(26826);const Ze=JSON.parse('{"E":{"version":"7.3.1","id":"widget_8-column","type":"chart","sortLabelsBy":"originalValue","rotated":false,"series":[{"type":"barSeries","id":"FID","name":"FID","x":"Year","y":"count_of_FID","colorType":"singleColor","stackedType":"sideBySide","fillSymbol":{"type":"esriSFS","style":"esriSFSSolid","color":[94,143,208,255],"outline":{"type":"esriSLS","style":"esriSLSSolid","color":[130,130,130,255],"width":0}},"dataLabels":{"type":"chartText","visible":false,"content":{"type":"esriTS","color":[54,54,54,255],"font":{"family":"Avenir Next","size":10,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","verticalAlignment":"top"}},"rotated":false,"dataTooltipVisible":true,"query":{"groupByFieldsForStatistics":["Year"],"outStatistics":[{"statisticType":"count","onStatisticField":"FID","outStatisticFieldName":"count_of_FID"}],"orderByFields":["Year ASC"]}}],"axes":[{"type":"chartAxis","visible":true,"isLogarithmic":false,"title":{"type":"chartText","visible":false,"content":{"type":"esriTS","color":[24,24,24,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","verticalAlignment":"middle"}},"labels":{"type":"chartText","visible":true,"content":{"type":"esriTS","color":[68,68,68,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","verticalAlignment":"middle"}},"valueFormat":{"type":"category","characterLimit":11},"lineSymbol":{"type":"esriSLS","style":"esriSLSSolid","color":[139,139,139,255],"width":1},"grid":{"type":"esriSLS","style":"esriSLSDash","color":[213,213,213,255],"width":0}},{"type":"chartAxis","visible":true,"isLogarithmic":false,"title":{"type":"chartText","visible":false,"content":{"type":"esriTS","color":[24,24,24,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","verticalAlignment":"middle"}},"labels":{"type":"chartText","visible":true,"content":{"type":"esriTS","color":[68,68,68,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","verticalAlignment":"middle"}},"valueFormat":{"type":"number","intlOptions":{"style":"decimal","useGrouping":true,"minimumFractionDigits":0,"maximumFractionDigits":0}},"lineSymbol":{"type":"esriSLS","style":"esriSLSSolid","color":[139,139,139,255],"width":1},"grid":{"type":"esriSLS","style":"esriSLSDash","color":[213,213,213,255],"width":0}}],"background":[0,0,0,0],"title":{"type":"chartText","visible":true,"content":{"type":"esriTS","color":[0,0,0,255],"font":{"family":"Avenir Next","size":24,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","text":""}},"footer":{"type":"chartText","visible":true,"content":{"type":"esriTS","color":[24,24,24,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","text":""}},"legend":{"type":"chartLegend","visible":false,"title":{"type":"chartText","visible":true,"content":{"type":"esriTS","color":[24,24,24,255],"font":{"family":"Avenir Next","size":20,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","text":""}},"body":{"type":"esriTS","color":[24,24,24,255],"font":{"family":"Avenir Next","size":14,"style":"normal","weight":"normal","decoration":"none"},"horizontalAlignment":"center","text":""},"position":"right"}}}');const Xe=function(e){var t;const{webChart:i}=e,r=l.React.useRef(),a=null===(t=null==i?void 0:i.dataSource)||void 0===t?void 0:t.mapid;return l.React.createElement(l.React.Fragment,null,l.React.createElement(Qe.JimuMapViewComponent,{useMapWidgetId:a,onActiveViewChange:e=>{return t=this,i=void 0,o=function*(){const t=e.view;yield t.when(),yield new Promise((e=>{setTimeout((()=>{e(null)}),100)}));const i=t.map.layers.toArray()[0],a=yield(0,l.loadArcGISJSAPIModule)("esri/core/reactiveUtils"),o=yield t.whenLayerView(i);yield a.whenOnce((()=>!o.updating)),r.current.config=Ze.E,r.current.layer=o,r.current.view=t},new((a=void 0)||(a=Promise))((function(e,l){function r(e){try{s(o.next(e))}catch(e){l(e)}}function n(e){try{s(o.throw(e))}catch(e){l(e)}}function s(t){var l;t.done?e(t.value):(l=t.value,l instanceof a?l:new a((function(e){e(l)}))).then(r,n)}s((o=o.apply(t,i||[])).next())}));var t,i,a,o}}),l.React.createElement("arcgis-charts-bar-chart",{ref:r}))},et=e=>{var t,r,a;const{widgetId:o,tools:n,enableDataAction:s=!0,webChart:c,chartLimits:v,useDataSource:u,defaultTemplateType:d,onInitDragHandler:h}=e,{recordsStatus:p,dataSource:m}=oe(),S=(e=>{const t=l.ReactRedux.useSelector((t=>{var l,i;return null===(i=null===(l=t.dataSourcesInfo)||void 0===l?void 0:l[null==e?void 0:e.id])||void 0===i?void 0:i.sourceVersion})),i=(null==e?void 0:e.isDataView)&&(null==e?void 0:e.dataViewId)===l.CONSTANTS.SELECTION_DATA_VIEW_ID,r=l.React.useMemo((()=>i&&!e.getRecords().length),[i,e,t]);return!(null==e?void 0:e.useNoSelectionView())&&r})(m),g=(0,i.getSeriesType)(null==c?void 0:c.series),y=(null==n?void 0:n.cursorEnable)||!!(null==n?void 0:n.filter)||s,{valid:f,render:b}=((e,t)=>{const i=l.ReactRedux.useSelector((t=>{var l,i;return null===(i=null===(l=t.dataSourcesInfo)||void 0===l?void 0:l[e])||void 0===i?void 0:i.status})),r=l.React.useMemo((()=>Be(t)),[t]);return{valid:r,render:i&&i!==l.DataSourceStatus.NotReady&&r}})(null==u?void 0:u.dataSourceId,c),M=!b||S,z=(null===(t=k(c))||void 0===t?void 0:t[1])||d||"column",[A,w]=je(g,f,u,p,null!==(a=null===(r=null==c?void 0:c.series)||void 0===r?void 0:r.length)&&void 0!==a?a:0,S),T=y?l.React.createElement(De,{type:g,tools:n,widgetId:o,enableDataAction:s}):null;return l.React.createElement(_e,{templateType:z,messageType:A,message:w,showLoading:"loading"===p,background:null==c?void 0:c.background,className:"web-feature-layer-chart",showPlaceholder:M,tools:T},l.React.createElement(Xe,{className:"web-chart",widgetId:o,webChart:c,chartLimits:v,useDataSource:u,onInitDragHandler:h}))},tt=e=>{var t,r,a;const{widgetId:o,tools:n,enableDataAction:s=!0,webChart:c,chartLimits:u,useDataSource:d,outputDataSourceId:h,defaultTemplateType:p,onInitDragHandler:m}=e,{chart:S}=oe(),g=null==d?void 0:d.dataSourceId,y=(0,i.getSplitByField)(null===(r=null===(t=null==c?void 0:c.dataSource)||void 0===t?void 0:t.query)||void 0===r?void 0:r.where,!0),f=null===(a=null==c?void 0:c.dataSource)||void 0===a?void 0:a.query,[b,M]=l.React.useState(),z=l.hooks.useLatest(y),A=l.React.useMemo((()=>{if(z.current&&(null==b?void 0:b[z.current])){const e=((e,t)=>{const l=V(e,t);return null==l?void 0:l.type})(z.current,g),t=((e,t,r,a)=>{const o=e.find((e=>e.id===v));let n=((e,t,r,a,o=!1,n)=>{var s;const c=((e,t)=>{var l,r,a,o;const n=null!==(r=null===(l=null==t?void 0:t.groupByFieldsForStatistics)||void 0===l?void 0:l[0])&&void 0!==r?r:"",s=null==t?void 0:t.outStatistics,c=null==t?void 0:t.outFields,v=null==t?void 0:t.where,u=(0,i.getSplitByField)(v,!0),d=null!==(a=(e=>{var t,l,i;return(null===(t=null==e?void 0:e.outFields)||void 0===t?void 0:t.length)?"no_aggregation":null===(i=null===(l=null==e?void 0:e.outStatistics)||void 0===l?void 0:l[0])||void 0===i?void 0:i.statisticType})(t))&&void 0!==a?a:"count",h=null==e?void 0:e.timeIntervalUnits;return{splitByField:u,categoryField:n,numericFields:c||(null===(o=null==s?void 0:s.map((e=>e.onStatisticField)))||void 0===o?void 0:o.filter((e=>!!e))),statisticType:d,timeIntervalUnits:h}})(e[0],t),{splitByField:v,categoryField:u,numericFields:d,timeIntervalUnits:h}=c,p=d[0];let m=null!==(s=null==n?void 0:n.preSerieColor)&&void 0!==s?s:"";const S=a.map(((t,a)=>{var s,c,d;let S=e.find((e=>(0,i.getSplitByValue)({where:e.query.where,normalize:!1})===(r===l.JimuFieldType.String?`'${t}'`:`${t}`)));return S||(S=K({propSeries:e,categoryField:u,numberField:p,timeIntervalUnits:h,splitByField:v,splitByFieldType:r,splitByValue:t},a,Object.assign(Object.assign({},n),{preSerieColor:m})),S.deletable=o,m=null!==(c=null===(s=S.fillSymbol)||void 0===s?void 0:s.color)&&void 0!==c?c:null===(d=S.lineSymbol)||void 0===d?void 0:d.color,n.symbol&&("barSeries"===S.type?S.fillSymbol=n.symbol:"lineSeries"===S.type&&(S.lineSymbol=n.symbol))),S}));return(0,l.Immutable)(S)})(e,t,r,a,!1,{symbol:"barSeries"===o.type?o.fillSymbol:o.lineSymbol});return n=n.map((e=>(e.deletable&&(e=e.without("deletable")),e))),n})(c.series,f,e,b[z.current]);return(0,l.Immutable)(t)}return null==c?void 0:c.series}),[g,z,b,null==c?void 0:c.series,f]),w=l.React.useMemo((()=>null==c?void 0:c.set("series",A)),[c,A]);return l.React.createElement(l.React.Fragment,null,l.React.createElement(ge,{widgetId:o,webChart:c,outputDataSourceId:h,useDataSource:d,onSplitValuesChange:M,onSchemaChange:()=>{null==S||S.refresh(!1,!1)}}),l.React.createElement(et,{widgetId:o,tools:n,webChart:w,chartLimits:u,useDataSource:d,enableDataAction:s,onInitDragHandler:m,defaultTemplateType:p}))},lt=t=>{const{outputDataSourceId:r,useDataSource:a,tools:o,webChart:n,widgetId:s,defaultTemplateType:c,enableDataAction:v,onInitDragHandler:d}=t,{dataSource:h}=oe(),p=((t,l)=>{var r,a;const o=(0,i.getSeriesType)(null==t?void 0:t.series);if(!j(o)&&"pieSeries"!==o)return!1;if(P(null===(r=null==t?void 0:t.dataSource)||void 0===r?void 0:r.query)===e.ByField)return!0;const n=((e,t,l)=>{var i,r;if(!l)return!1;if("count"===(null===(r=null===(i=null==e?void 0:e.outStatistics)||void 0===i?void 0:i[0])||void 0===r?void 0:r.statisticType))return!1;const a=null==t?void 0:t.map((e=>e.id));if(!(null==a?void 0:a.length))return!1;const o=l.getIdField();return a.includes(o)})(null===(a=null==t?void 0:t.dataSource)||void 0===a?void 0:a.query,null==t?void 0:t.series,l);return n})(n,h);return l.React.createElement(l.React.Fragment,null,p&&l.React.createElement(l.React.Fragment,null,l.React.createElement(Se,{widgetId:s,webChart:n,outputDataSourceId:r,useDataSource:a,chartLimits:u}),l.React.createElement(Ye,{widgetId:s,tools:o,webChart:n,chartLimits:u,useDataSource:a,enableDataAction:v,onInitDragHandler:d,defaultTemplateType:c})),!p&&l.React.createElement(tt,{widgetId:s,tools:o,webChart:n,chartLimits:u,useDataSource:a,outputDataSourceId:r,enableDataAction:v,onInitDragHandler:d,defaultTemplateType:c}))},it=e=>{const{outputDataSources:t,useDataSources:i,config:r,id:a,enableDataAction:o,onInitDragHandler:n}=e,s=null==r?void 0:r.webChart,c=null==r?void 0:r.tools,v=null==r?void 0:r._templateType;return l.React.createElement("div",{className:"jimu-widget widget-chart"},l.React.createElement(ae,null,l.React.createElement(lt,{widgetId:a,tools:c,webChart:s,useDataSource:null==i?void 0:i[0],enableDataAction:o,onInitDragHandler:n,defaultTemplateType:v,outputDataSourceId:null==t?void 0:t[0]})))};it.versionManager=ee;const rt=it;function at(e){n.p=e}})(),s})())}}}));