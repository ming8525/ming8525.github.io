define(["require","exports","./interfaces-f9fc01bd","esri/request","esri/rest/support/FeatureSet","esri/layers/support/Field","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/renderers/support/jsonUtils","esri/portal/Portal","esri/core/promiseUtils","esri/rest/support/Query","esri/rest/support/StatisticDefinition","esri/TimeExtent","esri/symbols/support/symbolUtils","esri/Graphic","esri/layers/support/FeatureFilter","esri/smartMapping/statistics/histogram","esri/Map","esri/views/MapView","esri/smartMapping/statistics/summaryStatistics","esri/core/Collection","esri/core/reactiveUtils"],(function(require,exports,interfaces,esriRequest,FeatureSet,Field,FeatureLayer,geometryJsonUtils,rendererJsonUtils,Portal,promiseUtils,Query,StatisticDefinition,TimeExtent,symbolUtils,Graphic,FeatureFilter,histogram,Map$3$1,MapView,summaryStatistics,Collection,reactiveUtils){"use strict";function _interopDefaultLegacy(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach((function(k){if(k!=="default"){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}})}}))}n["default"]=e;return Object.freeze(n)}var esriRequest__default=_interopDefaultLegacy(esriRequest);var FeatureSet__default=_interopDefaultLegacy(FeatureSet);var Field__default=_interopDefaultLegacy(Field);var FeatureLayer__default=_interopDefaultLegacy(FeatureLayer);var geometryJsonUtils__namespace=_interopNamespace(geometryJsonUtils);var rendererJsonUtils__namespace=_interopNamespace(rendererJsonUtils);var Portal__default=_interopDefaultLegacy(Portal);var promiseUtils__namespace=_interopNamespace(promiseUtils);var Query__default=_interopDefaultLegacy(Query);var StatisticDefinition__default=_interopDefaultLegacy(StatisticDefinition);var TimeExtent__default=_interopDefaultLegacy(TimeExtent);var Graphic__default=_interopDefaultLegacy(Graphic);var FeatureFilter__default=_interopDefaultLegacy(FeatureFilter);var histogram__default=_interopDefaultLegacy(histogram);var Map$3$1__default=_interopDefaultLegacy(Map$3$1);var MapView__default=_interopDefaultLegacy(MapView);var summaryStatistics__default=_interopDefaultLegacy(summaryStatistics);var Collection__default=_interopDefaultLegacy(Collection);var reactiveUtils__namespace=_interopNamespace(reactiveUtils);
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See LICENSE.md for details.
   * v1.0.0-beta.703
   */const WebChartTypes$4={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const WebChartColoringPatterns$2={Single:"singleColor",Match:"colorMatch"};const WebChartDataSourceTypes$3={Inline:"inline",Layer:"layer"};const WebChartVersionStatus$1={Same:"same",Newer:"newer",Older:"older",Unrecognized:"unrecognized"};var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}var Percent=function(){function Percent(percent){this._value=percent}Object.defineProperty(Percent.prototype,"value",{get:function(){return this._value/100},enumerable:true,configurable:true});Object.defineProperty(Percent.prototype,"percent",{get:function(){return this._value},enumerable:true,configurable:true});Percent.prototype.toString=function(){return""+this._value+"%"};return Percent}();function percent(value){return new Percent(value)}function isPercent(value){return value instanceof Percent}function isNaN$1(value){return Number(value)!==value}function getType(value){return{}.toString.call(value)}function castString(value){if(typeof value==="string"){return value}else if(typeof value==="number"){return""+value}else{throw new Error("Expected a string or number but got "+getType(value))}}function toBoolean(value){return value?true:false}function toNumber$1(value){if(hasValue(value)&&!isNumber$1(value)){var converted=Number(value);if(isNaN$1(converted)&&isString$1(value)&&value!=""){return toNumber$1(value.replace(/[^0-9.\-]+/g,""))}return converted}return value}function toText(value){if(hasValue(value)&&!isString$1(value)){if(isNumber$1(value)){return castString(value)}else if(isObject$4(value)){return value.toString()}}return value}function toNumberOrPercent(value){if(!hasValue(value)||isNumber$1(value)||isPercent(value)){return value}if(isString$1(value)&&value.indexOf("%")!=-1){return percent(toNumber$1(value))}return toNumber$1(value)}function hasValue(a){return a!=null}function getValue$4(a){if(hasValue(a)){return a}else{throw new Error("Value doesn't exist")}}function getValueDefault(a,defaultValue){if(hasValue(a)){return a}else{return defaultValue}}function isDate$1(value){return getType(value)==="[object Date]"}function isString$1(value){return typeof value==="string"}function isNumber$1(value){return typeof value==="number"&&Number(value)==value}function isObject$4(value){return typeof value==="object"&&value!=null}function isArray$6(value){return Array.isArray(value)}var PI=Math.PI;var HALFPI=PI/2;var RADIANS=PI/180;var DEGREES=180/PI;function toNumberRange(value,min,max){if(hasValue(value)){value=toNumber$1(value);return fitToRange(value,min,max)}return value}function round$1(value,precision,floor){if(!isNumber$1(precision)||precision<=0){var rounded=Math.round(value);if(floor){if(rounded-value==.5){rounded--}}return rounded}else{var d=Math.pow(10,precision);return Math.round(value*d)/d}}function ceil(value,precision){if(!isNumber$1(precision)||precision<=0){return Math.ceil(value)}else{var d=Math.pow(10,precision);return Math.ceil(value*d)/d}}function fitToRange(value,minValue,maxValue){if(isNumber$1(minValue)){if(isNumber$1(maxValue)&&maxValue<minValue){var temp=maxValue;maxValue=minValue;minValue=temp}if(value<minValue){value=minValue}}if(isNumber$1(maxValue)){if(value>maxValue){value=maxValue}}return value}function sin(value){return round$1(Math.sin(RADIANS*value),10)}function tan(value){return round$1(Math.tan(RADIANS*value),10)}function cos(value){return round$1(Math.cos(RADIANS*value),10)}function max$2(left,right){if(isNumber$1(left)){if(isNumber$1(right)){if(right>left){return right}else{return left}}else{return left}}else if(isNumber$1(right)){return right}else{return null}}function min$2(left,right){if(isNumber$1(left)){if(isNumber$1(right)){if(right<left){return right}else{return left}}else{return left}}else if(isNumber$1(right)){return right}else{return null}}function closest(values,referenceValue){return values.reduce((function(prev,curr){return Math.abs(curr-referenceValue)<Math.abs(prev-referenceValue)?curr:prev}))}function intersect(range1,range2){var start1=getValue$4(range1.start);var start2=getValue$4(range2.start);var end1=getValue$4(range1.end);var end2=getValue$4(range2.end);return Math.max(start1,start2)<=Math.min(end1,end2)}function invertRange(range){var start=getValue$4(range.start);var end=getValue$4(range.end);return{start:1-end,end:1-start}}function intersection(range1,range2){var start1=getValue$4(range1.start);var start2=getValue$4(range2.start);var end1=getValue$4(range1.end);var end2=getValue$4(range2.end);var startMax=Math.max(start1,start2);var endMin=Math.min(end1,end2);if(endMin<startMax){return undefined}else{return{start:startMax,end:endMin}}}function getDistance(point1,point2){if(!point1){return 0}if(!point2){point2={x:0,y:0}}return Math.sqrt(Math.pow(Math.abs(point1.x-point2.x),2)+Math.pow(Math.abs(point1.y-point2.y),2))}function getHorizontalDistance(point1,point2){if(!point1){return 0}if(!point2){point2={x:0,y:0}}return Math.abs(point1.x-point2.x)}function getVerticalDistance(point1,point2){if(!point1){return 0}if(!point2){point2={x:0,y:0}}return Math.abs(point1.y-point2.y)}function getCubicCurveDistance(point1,point2,controlPointA,controlPointB,stepCount){if(!point1){return 0}if(!point2){point2={x:0,y:0}}var distance=0;var prevPoint=point1;if(stepCount>0){for(var s=0;s<=stepCount;s++){var point=getPointOnCubicCurve(point1,point2,controlPointA,controlPointB,s/stepCount);distance+=getDistance(prevPoint,point);prevPoint=point}}return distance}function getScale(point1,startPoint1,point2,startPoint2){var initialDistance=getDistance(startPoint1,startPoint2);var currentDistance=getDistance(point1,point2);return Math.abs(currentDistance/initialDistance)}function getMidPoint(point1,point2,position){if(!isNumber$1(position)){position=.5}return{x:point1.x+(point2.x-point1.x)*position,y:point1.y+(point2.y-point1.y)*position}}function getAngle(point1,point2){if(!point2){point2={x:point1.x*2,y:point1.y*2}}var diffX=point2.x-point1.x;var diffY=point2.y-point1.y;var angle=Math.atan2(diffY,diffX)*DEGREES;if(angle<0){angle+=360}return normalizeAngle(angle)}function getBBox(points){if(points){var length_1=points.length;if(length_1!==0){var left=void 0;var right=void 0;var top_1;var bottom=void 0;for(var i=0;i<length_1;i++){var point=points[i];if(!isNumber$1(right)||point.x>right){right=point.x}if(!isNumber$1(left)||point.x<left){left=point.x}if(!isNumber$1(top_1)||point.y<top_1){top_1=point.y}if(!isNumber$1(bottom)||point.y>bottom){bottom=point.y}}return{x:left,y:top_1,width:right-left,height:bottom-top_1}}}return{x:0,y:0,width:0,height:0}}function getCommonRectangle(rectangles){var length=rectangles.length;if(length!==0){var minX=void 0;var minY=void 0;var maxX=void 0;var maxY=void 0;for(var i=0;i<length;i++){var rectangle=rectangles[i];minX=min$2(rectangle.x,minX);minY=min$2(rectangle.y,minY);maxX=max$2(rectangle.x+rectangle.width,maxX);maxY=max$2(rectangle.y+rectangle.height,maxY)}return{x:minX,y:minY,width:maxX-minX,height:maxY-minY}}}function getPointOnQuadraticCurve(pointA,pointB,controlPoint,position){var x=(1-position)*(1-position)*pointA.x+2*(1-position)*position*controlPoint.x+position*position*pointB.x;var y=(1-position)*(1-position)*pointA.y+2*(1-position)*position*controlPoint.y+position*position*pointB.y;return{x,y}}function getPointOnCubicCurve(pointA,pointB,controlPointA,controlPointB,position){var point={x:0,y:0};var mt1=1-position;var mt2=mt1*mt1;var mt3=mt2*mt1;point.x=pointA.x*mt3+controlPointA.x*3*mt2*position+controlPointB.x*3*mt1*position*position+pointB.x*position*position*position;point.y=pointA.y*mt3+controlPointA.y*3*mt2*position+controlPointB.y*3*mt1*position*position+pointB.y*position*position*position;return point}function getCubicControlPointA(p0,p1,p2,p3,tensionX,tensionY){tensionX=adjustTension(tensionX);tensionY=adjustTension(tensionY);return{x:(-p0.x+p1.x/tensionX+p2.x)*tensionX,y:(-p0.y+p1.y/tensionY+p2.y)*tensionY}}function getCubicControlPointB(p0,p1,p2,p3,tensionX,tensionY){tensionX=adjustTension(tensionX);tensionY=adjustTension(tensionY);return{x:(p1.x+p2.x/tensionX-p3.x)*tensionX,y:(p1.y+p2.y/tensionY-p3.y)*tensionY}}function adjustTension(tension){return 1-tension+1e-5}function normalizeAngle(value){if(value==360){return 360}return value%360}function fitAngleToRange(value,startAngle,endAngle){if(startAngle>endAngle){var temp=startAngle;startAngle=endAngle;endAngle=temp}value=normalizeAngle(value);var count=(startAngle-normalizeAngle(startAngle))/360;if(value<startAngle){value+=360*(count+1)}var maxEnd=startAngle+(endAngle-startAngle)/2+180;var maxStart=startAngle+(endAngle-startAngle)/2-180;if(value>endAngle){if(value-360>startAngle){value-=360}else{if(value<maxEnd){value=endAngle}else{value=startAngle}}}if(value<startAngle){if(value>maxStart){value=startAngle}else{value=endAngle}}return value}function getArcRect(startAngle,endAngle,radius){var minX=Number.MAX_VALUE;var minY=Number.MAX_VALUE;var maxX=-Number.MAX_VALUE;var maxY=-Number.MAX_VALUE;var bpoints=[];if(!isNumber$1(radius)){radius=1}bpoints.push(getArcPoint(radius,startAngle));bpoints.push(getArcPoint(radius,endAngle));var fromAngle=Math.min(Math.floor(startAngle/90)*90,Math.floor(endAngle/90)*90);var toAngle=Math.max(Math.ceil(startAngle/90)*90,Math.ceil(endAngle/90)*90);for(var angle=fromAngle;angle<=toAngle;angle+=90){if(angle>=startAngle&&angle<=endAngle){bpoints.push(getArcPoint(radius,angle))}}for(var i=0;i<bpoints.length;i++){var pt=bpoints[i];if(pt.x<minX){minX=pt.x}if(pt.y<minY){minY=pt.y}if(pt.x>maxX){maxX=pt.x}if(pt.y>maxY){maxY=pt.y}}return{x:minX,y:minY,width:maxX-minX,height:maxY-minY}}function getArcPoint(radius,arc){return{x:radius*cos(arc),y:radius*sin(arc)}}function isInRectangle(point,rectangle){if(point.x>=rectangle.x&&point.x<=rectangle.x+rectangle.width&&point.y>=rectangle.y&&point.y<=rectangle.y+rectangle.height){return true}return false}function indexOf(array,value){var length=array.length;for(var i=0;i<length;++i){if(array[i]===value){return i}}return-1}function any(array,test){var length=array.length;for(var i=0;i<length;++i){if(test(array[i])){return true}}return false}function map$1(array,fn){var length=array.length;var output=new Array(length);for(var i=0;i<length;++i){output[i]=fn(array[i],i)}return output}function each$2(array,fn){var length=array.length;for(var i=0;i<length;++i){fn(array[i],i)}}function eachReverse(array,fn){var i=array.length;while(i--){fn(array[i],i)}}function eachContinue$2(array,fn){var length=array.length;for(var i=0;i<length;++i){if(!fn(array[i],i)){break}}}function shiftLeft(array,index){var length=array.length;for(var i=index;i<length;++i){array[i-index]=array[i]}array.length=length-index}function pushAll(array,input){var length=input.length;for(var i=0;i<length;++i){array.push(input[i])}}function remove(array,element){var found=false;var index=array.indexOf(element);if(index!==-1){found=true;array.splice(index,1);var length_1=array.length;while(index<length_1){if(array[index]===element){array.splice(index,1);--length_1}else{++index}}}return found}function move(array,element,toIndex){var index=indexOf(array,element);if(index!==-1){removeIndex(array,index)}if(toIndex==null){array.push(element)}else{insertIndex(array,toIndex,element)}}function add$1(array,element,index){if(!isNumber$1(index)){array.push(element)}else if(index===0){array.unshift(element)}else{array.splice(index,0,element)}}function replace(array,element,index){var ind=array.indexOf(element);if(ind!==-1){array.splice(ind,1)}if(!isNumber$1(index)){array.push(element)}else{array.splice(index,0,element)}}function toArray$1(input){if(Array.isArray(input)){return input}else{return[input]}}function copy$4(array){var length=array.length;var output=new Array(length);for(var i=0;i<length;++i){output[i]=array[i]}return output}function insertIndex(array,index,value){array.splice(index,0,value)}function removeIndex(array,index){array.splice(index,1)}function getSortedIndex(array,ordering,value){var start=0;var end=array.length;var found=false;while(start<end){var pivot=start+end>>1;var order=ordering(value,array[pivot]);if(order<0){end=pivot}else if(order===0){found=true;start=pivot+1}else{start=pivot+1}}return{found,index:found?start-1:start}}function findIndex(array,matches){var length=array.length;for(var i=0;i<length;++i){if(matches(array[i],i)){return i}}return-1}function keepIf(array,keep){var length=array.length;var i=0;while(i<length){if(keep(array[i])){++i}else{array.splice(i,1);--length}}}var Disposer=function(){function Disposer(dispose){this._disposed=false;this._dispose=dispose}Disposer.prototype.isDisposed=function(){return this._disposed};Disposer.prototype.dispose=function(){if(!this._disposed){this._disposed=true;this._dispose()}};return Disposer}();var MultiDisposer=function(_super){__extends(MultiDisposer,_super);function MultiDisposer(disposers){return _super.call(this,(function(){each$2(disposers,(function(x){x.dispose()}))}))||this}return MultiDisposer}(Disposer);var MutableValueDisposer=function(_super){__extends(MutableValueDisposer,_super);function MutableValueDisposer(){var _this=_super.call(this,(function(){if(hasValue(_this._disposer)){_this._disposer.dispose();_this._disposer=undefined}}))||this;return _this}MutableValueDisposer.prototype.get=function(){return this._value};MutableValueDisposer.prototype.set=function(value,disposer){if(hasValue(this._disposer)){this._disposer.dispose()}this._disposer=disposer;this._value=value};MutableValueDisposer.prototype.reset=function(){this.set(undefined,undefined)};return MutableValueDisposer}(Disposer);var CounterDisposer=function(_super){__extends(CounterDisposer,_super);function CounterDisposer(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._counter=0;return _this}CounterDisposer.prototype.increment=function(){var _this=this;++this._counter;return new Disposer((function(){--_this._counter;if(_this._counter===0){_this.dispose()}}))};return CounterDisposer}(Disposer);var pendingFrame=false;var nextQueue=[];var readQueue=[];var writeQueue=[];var idleQueue=[];var fps=1e3/60;var raf=typeof requestAnimationFrame==="function"?function(fn){requestAnimationFrame(fn)}:function(fn){setTimeout(fn,fps)};function frameLoop(){var now=Date.now();var length=nextQueue.length;for(var i=0;i<length;++i){nextQueue[i](now)}shiftLeft(nextQueue,length);for(var i=0;i<readQueue.length;++i){readQueue[i](now)}readQueue.length=0;for(var i=0;i<writeQueue.length;++i){writeQueue[i](now)}writeQueue.length=0;if(nextQueue.length===0&&readQueue.length===0){pendingFrame=false}else{raf(frameLoop)}}function pendFrame(){if(!pendingFrame){pendingFrame=true;raf(frameLoop)}}function readFrame(fn){readQueue.push(fn);pendFrame()}function writeFrame(fn){writeQueue.push(fn);pendFrame()}function whenIdle(fn){idleQueue.push(fn)}function triggerIdle(){var now=Date.now();var length=idleQueue.length;for(var i=0;i<length;++i){idleQueue.shift()(now)}}var EventDispatcher=function(){function EventDispatcher(){this._listeners=[];this._killed=[];this._disabled={};this._iterating=0;this._enabled=true;this._disposed=false}EventDispatcher.prototype.isDisposed=function(){return this._disposed};EventDispatcher.prototype.dispose=function(){if(!this._disposed){this._disposed=true;var a=this._listeners;this._iterating=1;this._listeners=null;this._disabled=null;try{each$2(a,(function(x){x.disposer.dispose()}))}finally{this._killed=null;this._iterating=null}}};EventDispatcher.prototype.hasListeners=function(){return this._listeners.length!==0};EventDispatcher.prototype.hasListenersByType=function(type){return any(this._listeners,(function(x){return(x.type===null||x.type===type)&&!x.killed}))};EventDispatcher.prototype.enable=function(){this._enabled=true};EventDispatcher.prototype.disable=function(){this._enabled=false};EventDispatcher.prototype.enableType=function(type){delete this._disabled[type]};EventDispatcher.prototype.disableType=function(type,amount){if(amount===void 0){amount=Infinity}this._disabled[type]=amount};EventDispatcher.prototype._removeListener=function(listener){if(this._iterating===0){var index=this._listeners.indexOf(listener);if(index===-1){throw new Error("Invalid state: could not remove listener")}this._listeners.splice(index,1)}else{this._killed.push(listener)}};EventDispatcher.prototype._removeExistingListener=function(once,type,callback,context){if(this._disposed){throw new Error("EventDispatcher is disposed")}this._eachListener((function(info){if(info.once===once&&info.type===type&&(callback==null||info.callback===callback)&&info.context===context){info.disposer.dispose()}}))};EventDispatcher.prototype.isEnabled=function(type){if(this._disposed){throw new Error("EventDispatcher is disposed")}return this._enabled&&this._listeners.length>0&&this.hasListenersByType(type)&&this._disabled[type]==null};EventDispatcher.prototype.has=function(type,callback,context){var index=findIndex(this._listeners,(function(info){return info.once!==true&&info.type===type&&(callback==null||info.callback===callback)&&info.context===context}));return index!==-1};EventDispatcher.prototype._shouldDispatch=function(type){if(this._disposed){throw new Error("EventDispatcher is disposed")}var count=this._disabled[type];if(!isNumber$1(count)){return this._enabled}else{if(count<=1){delete this._disabled[type]}else{--this._disabled[type]}return false}};EventDispatcher.prototype._eachListener=function(fn){var _this=this;++this._iterating;try{each$2(this._listeners,fn)}finally{--this._iterating;if(this._iterating===0&&this._killed.length!==0){each$2(this._killed,(function(killed){_this._removeListener(killed)}));this._killed.length=0}}};EventDispatcher.prototype.dispatchImmediately=function(type,event){if(this._shouldDispatch(type)){this._eachListener((function(listener){if(!listener.killed&&(listener.type===null||listener.type===type)){listener.dispatch(type,event)}}))}};EventDispatcher.prototype.dispatch=function(type,event){if(this._shouldDispatch(type)){this._eachListener((function(listener){if(!listener.killed&&(listener.type===null||listener.type===type)){whenIdle((function(){if(!listener.killed){listener.dispatch(type,event)}}))}}))}};EventDispatcher.prototype._on=function(once,type,callback,context,shouldClone,dispatch){var _this=this;if(this._disposed){throw new Error("EventDispatcher is disposed")}this._removeExistingListener(once,type,callback,context);var info={type,callback,context,shouldClone,dispatch,killed:false,once,disposer:new Disposer((function(){info.killed=true;_this._removeListener(info)}))};this._listeners.push(info);return info};EventDispatcher.prototype.onAll=function(callback,context,shouldClone){if(shouldClone===void 0){shouldClone=true}return this._on(false,null,callback,context,shouldClone,(function(type,event){return callback.call(context,type,event)})).disposer};EventDispatcher.prototype.on=function(type,callback,context,shouldClone){if(shouldClone===void 0){shouldClone=true}return this._on(false,type,callback,context,shouldClone,(function(type,event){return callback.call(context,event)})).disposer};EventDispatcher.prototype.once=function(type,callback,context,shouldClone){if(shouldClone===void 0){shouldClone=true}var x=this._on(true,type,callback,context,shouldClone,(function(type,event){x.disposer.dispose();callback.call(context,event)}));return x.disposer};EventDispatcher.prototype.off=function(type,callback,context){this._removeExistingListener(false,type,callback,context)};EventDispatcher.prototype.copyFrom=function(source){var _this=this;if(this._disposed){throw new Error("EventDispatcher is disposed")}if(source===this){throw new Error("Cannot copyFrom the same TargetedEventDispatcher")}each$2(source._listeners,(function(x){if(!x.killed&&x.shouldClone){if(x.type===null){_this.onAll(x.callback,x.context)}else if(x.once){_this.once(x.type,x.callback,x.context)}else{_this.on(x.type,x.callback,x.context)}}}))};return EventDispatcher}();var TargetedEventDispatcher=function(_super){__extends(TargetedEventDispatcher,_super);function TargetedEventDispatcher(target){var _this=_super.call(this)||this;_this.target=target;return _this}TargetedEventDispatcher.prototype.copyFrom=function(source){var _this=this;if(this._disposed){throw new Error("EventDispatcher is disposed")}if(source===this){throw new Error("Cannot copyFrom the same TargetedEventDispatcher")}each$2(source._listeners,(function(x){if(x.context===source.target){return}if(!x.killed&&x.shouldClone){if(x.type===null){_this.onAll(x.callback,x.context)}else if(x.once){_this.once(x.type,x.callback,x.context)}else{_this.on(x.type,x.callback,x.context)}}}))};return TargetedEventDispatcher}(EventDispatcher);function entries(object){return function(push){for(var key in object){if(hasKey(object,key)){if(!push([key,object[key]])){break}}}}}function keys$4(object){var output=[];for(var key in object){if(hasKey(object,key)){output.push(key)}}return output}function keysOrdered(object,order){return keys$4(object).sort(order)}function hasKey(object,key){return{}.hasOwnProperty.call(object,key)}function eachContinue$1(object,fn){for(var key in object){if(hasKey(object,key)){if(!fn(key,object[key])){break}}}}function each$1(object,fn){eachContinue$1(object,(function(key,value){fn(key,value);return true}))}function eachOrdered(object,fn,ord){each$2(keysOrdered(object,ord),(function(key){fn(key,object[key])}))}function merge(object1,object2){return Object.assign({},object1,object2)}function clone$2(object){return JSON.parse(JSON.stringify(object))}function copyProperties$1(source,target,keys){each$2(keys,(function(key){if(hasValue(source[key])){target[key]=source[key]}}))}function forceCopyProperties(source,target,keys){each$2(keys,(function(key){target[key]=source[key]}))}function copyAllProperties(from,to){copyProperties$1(from,to,keys$4(from))}function fromArray(array){return function(push){var length=array.length;for(var i=0;i<length;++i){if(!push(array[i])){break}}}}function length(iter){var sum=0;iter((function(_){++sum;return true}));return sum}function toArray(iter){var output=[];iter((function(value){output.push(value);return true}));return output}function eachContinue(iter,fn){iter(fn)}function each(iter,fn){iter((function(value){fn(value);return true}))}function sort(iter,fn){return fromArray(toArray(iter).sort(fn))}function map(iter,fn){return function(push){return iter((function(value){return push(fn(value))}))}}function concat(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return function(push){var go=true;var push2=function(value){return go=push(value)};var length=args.length;for(var i=0;i<length;++i){args[i](push2);if(!go){break}}}}function flatten(iter){return function(push){var go=true;var push2=function(value){return go=push(value)};iter((function(value){value(push2);return go}))}}function indexed(iter){return function(push){var index=0;iter((function(value){return push([index++,value])}))}}function find(iter,matches){var output;iter((function(value){if(matches(value)){output=value;return false}else{return true}}));return output}function contains$3(iter,matches){var output=false;iter((function(value){if(matches(value)){output=true;return false}else{return true}}));return output}var ListIterator=function(){function ListIterator(list,create){this.createNewItems=false;this.list=list;this._create=create;this.reset()}ListIterator.prototype.reset=function(){this._listCopy=toArray(this.list.iterator())};ListIterator.prototype.clear=function(){this._listCopy.length=0};ListIterator.prototype.getFirst=function(){return this.returnItem(0)};ListIterator.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)};ListIterator.prototype.find=function(fn){var index=findIndex(this._listCopy,fn);if(index!==-1){var item=this._listCopy[index];remove(this._listCopy,item);return item}else{return this.getLast()}};ListIterator.prototype.removeItem=function(item){return remove(this._listCopy,item)};ListIterator.prototype.returnItem=function(index){if(index>=0&&index<this._listCopy.length){var item=this._listCopy[index];remove(this._listCopy,item);return item}else if(this.createNewItems){return this._create()}};ListIterator.prototype.iterator=function(){return fromArray(this._listCopy)};return ListIterator}();function order$1(a,b){if(a===b){return 0}else if(a<b){return-1}else{return 1}}function repeat(string,amount){return new Array(amount+1).join(string)}function random(chars){var res="";var choice="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<chars;i++){res+=choice.charAt(Math.floor(Math.random()*choice.length))}return res}var DictionaryDisposer=function(_super){__extends(DictionaryDisposer,_super);function DictionaryDisposer(dict){var _this=this;var disposer=dict.events.on("removed",(function(x){x.oldValue.dispose()}),undefined,false);_this=_super.call(this,(function(){disposer.dispose();each(dict.iterator(),(function(a){var v=a[1];v.dispose()}))}))||this;return _this}return DictionaryDisposer}(Disposer);var Dictionary=function(){function Dictionary(){this.events=new EventDispatcher;this._dictionary={}}Dictionary.prototype.hasKey=function(key){return hasKey(this._dictionary,key)};Dictionary.prototype.getKey=function(key){return this._dictionary[key]};Dictionary.prototype.insertKey=function(key,value){if(hasKey(this._dictionary,key)){throw new Error("Key "+key+" already exists in dictionary")}else{this._dictionary[key]=value;if(this.events.isEnabled("insertKey")){this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key,newValue:value})}}};Dictionary.prototype.setKey=function(key,value){if(hasKey(this._dictionary,key)){var oldValue=this._dictionary[key];if(oldValue!==value){this._dictionary[key]=value;if(this.events.isEnabled("setKey")){this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key,oldValue,newValue:value})}if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue})}}}else{this._dictionary[key]=value;if(this.events.isEnabled("insertKey")){this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key,newValue:value})}}};Dictionary.prototype.updateKey=function(key,fn){if(hasKey(this._dictionary,key)){var oldValue=this._dictionary[key];var newValue=fn(oldValue);if(oldValue!==newValue){this._dictionary[key]=newValue;if(this.events.isEnabled("setKey")){this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key,oldValue,newValue})}if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue})}}}else{throw new Error("Key "+key+" doesn't exist in dictionary")}};Dictionary.prototype.removeKey=function(key){if(hasKey(this._dictionary,key)){var oldValue=this._dictionary[key];delete this._dictionary[key];if(this.events.isEnabled("removeKey")){this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key,oldValue})}if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue})}}};Dictionary.prototype.insertKeyIfEmpty=function(key,ifEmpty){if(!this.hasKey(key)){this.insertKey(key,ifEmpty())}return this.getKey(key)};Dictionary.prototype.clear=function(){var _this=this;if(this.events.isEnabled("removed")){each$1(this._dictionary,(function(key,value){_this.events.dispatchImmediately("removed",{type:"removed",target:_this,oldValue:value})}))}this._dictionary={};if(this.events.isEnabled("cleared")){this.events.dispatchImmediately("cleared",{type:"cleared",target:this})}};Dictionary.prototype.copyFrom=function(source){var _this=this;each(source.iterator(),(function(a){_this.setKey(a[0],a[1])}))};Dictionary.prototype.iterator=function(){return entries(this._dictionary)};Dictionary.prototype[Symbol.iterator]=function(){var _a,_b,_i,key;return __generator(this,(function(_c){switch(_c.label){case 0:_a=[];for(_b in this._dictionary)_a.push(_b);_i=0;_c.label=1;case 1:if(!(_i<_a.length))return[3,4];key=_a[_i];if(!hasKey(this._dictionary,key))return[3,3];return[4,[key,this._dictionary[key]]];case 2:_c.sent();_c.label=3;case 3:_i++;return[3,1];case 4:return[2]}}))};Dictionary.prototype.each=function(f){each(this.iterator(),(function(_a){var _b=__read(_a,2),key=_b[0],value=_b[1];return f(key,value)}))};Dictionary.prototype.sortedIterator=function(){return sort(this.iterator(),(function(x,y){return order$1(x[0],y[0])}))};return Dictionary}();var DictionaryTemplate=function(_super){__extends(DictionaryTemplate,_super);function DictionaryTemplate(t){var _this=_super.call(this)||this;_this.template=t;return _this}Object.defineProperty(DictionaryTemplate.prototype,"template",{get:function(){return this._template},set:function(v){v.isTemplate=true;this._template=v},enumerable:true,configurable:true});DictionaryTemplate.prototype.copyFrom=function(source){var _this=this;each(source.iterator(),(function(a){_this.setKey(a[0],a[1].clone())}))};DictionaryTemplate.prototype.create=function(key){var _this=this;return this.insertKeyIfEmpty(key,(function(){return _this.template.clone()}))};return DictionaryTemplate}(Dictionary);var Cache$3=function(){function Cache(){this._storage=new Dictionary;this.ttl=1e3}Cache.prototype.set=function(owner,key,value,ttl){var ownerStorage=this._storage.insertKeyIfEmpty(owner,(function(){return new Dictionary}));var item={touched:(new Date).getTime(),ttl:isNumber$1(ttl)?ttl:this.ttl,value};ownerStorage.setKey(key,item)};Cache.prototype.get=function(owner,key,value){if(value===void 0){value=undefined}if(this._storage.hasKey(owner)){var ownerStorage=this._storage.getKey(owner);if(ownerStorage.hasKey(key)){var cacheItem=ownerStorage.getKey(key);if(cacheItem.ttl&&cacheItem.touched+cacheItem.ttl<(new Date).getTime()){cacheItem.expired=true}if(cacheItem.expired){ownerStorage.removeKey(key);return value}return cacheItem.value}else{return value}}else{return value}};Cache.prototype.clear=function(owner){if(owner){this._storage.removeKey(owner)}else{this._storage.clear()}};return Cache}();var cache$2=new Cache$3;var Registry=function(){function Registry(){var _this=this;this.events=new EventDispatcher;this.themes=[];this.loadedThemes={};this._uidCount=0;this.registeredClasses={};this._placeholders={};this.invalidSprites={};this.invalidDatas={};this.invalidRawDatas=[];this.invalidDataItems=[];this.invalidDataRange=[];this.invalidPositions={};this.invalidLayouts={};this.baseSprites=[];this.baseSpritesByUid={};this.queue=[];this.deferred=[];this.uid=this.getUniqueId();this.invalidSprites.noBase=[];this.invalidDatas.noBase=[];this.invalidLayouts.noBase=[];this.invalidPositions.noBase=[];if(typeof addEventListener!=="undefined"){addEventListener("beforeprint",(function(){each$2(_this.baseSprites,(function(sprite){var svg=sprite.paper.svg;svg.setAttribute("viewBox","0 0 "+svg.clientWidth+" "+svg.clientHeight)}))}));addEventListener("afterprint",(function(){each$2(_this.baseSprites,(function(sprite){var svg=sprite.paper.svg;svg.removeAttribute("viewBox")}))}))}}Registry.prototype.getUniqueId=function(){var uid=this._uidCount;this._uidCount+=1;return"id-"+uid};Object.defineProperty(Registry.prototype,"map",{get:function(){if(!this._map){this._map=new Dictionary}return this._map},enumerable:true,configurable:true});Registry.prototype.setCache=function(key,value,ttl){cache$2.set(this.uid,key,value,ttl)};Registry.prototype.getCache=function(key,value){if(value===void 0){value=undefined}return cache$2.get(this.uid,key,value)};Registry.prototype.dispatch=function(eventType,data){if(this.events.isEnabled(eventType)){if(data){data.type=eventType;data.target=data.target||this;this.events.dispatch(eventType,{type:eventType,target:this})}else{this.events.dispatch(eventType,{type:eventType,target:this})}}};Registry.prototype.dispatchImmediately=function(eventType,data){if(this.events.isEnabled(eventType)){if(data){data.type=eventType;data.target=data.target||this;this.events.dispatchImmediately(eventType,data)}else{this.events.dispatchImmediately(eventType,{type:eventType,target:this})}}};Registry.prototype.getPlaceholder=function(key){if(hasValue(this._placeholders[key])){return this._placeholders[key]}this._placeholders[key]="__amcharts_"+key+"_"+random(8)+"__";return this._placeholders[key]};Registry.prototype.addToInvalidComponents=function(component){if(component.baseId){move(this.invalidDatas[component.baseId],component)}else{move(this.invalidDatas["noBase"],component)}};Registry.prototype.removeFromInvalidComponents=function(component){if(component.baseId){remove(this.invalidDatas[component.baseId],component)}remove(this.invalidDatas["noBase"],component)};Registry.prototype.addToInvalidSprites=function(sprite){if(sprite.baseId){add$1(this.invalidSprites[sprite.baseId],sprite)}else{add$1(this.invalidSprites["noBase"],sprite)}};Registry.prototype.removeFromInvalidSprites=function(sprite){if(sprite.baseId){remove(this.invalidSprites[sprite.baseId],sprite)}remove(this.invalidSprites["noBase"],sprite)};Registry.prototype.addToInvalidPositions=function(sprite){if(sprite.baseId){add$1(this.invalidPositions[sprite.baseId],sprite)}else{add$1(this.invalidPositions["noBase"],sprite)}};Registry.prototype.removeFromInvalidPositions=function(sprite){if(sprite.baseId){remove(this.invalidPositions[sprite.baseId],sprite)}remove(this.invalidPositions["noBase"],sprite)};Registry.prototype.addToInvalidLayouts=function(sprite){if(sprite.baseId){add$1(this.invalidLayouts[sprite.baseId],sprite)}else{add$1(this.invalidLayouts["noBase"],sprite)}};Registry.prototype.removeFromInvalidLayouts=function(sprite){if(sprite.baseId){remove(this.invalidLayouts[sprite.baseId],sprite)}remove(this.invalidLayouts["noBase"],sprite)};return Registry}();var registry=new Registry;function is(object,name){var x=registry.registeredClasses[name];return x!=null&&object instanceof x}var IndexedIterable=function(){function IndexedIterable(array,start,end){this._array=array;this._start=start;this._end=end}IndexedIterable.prototype.iterator=function(){var _this=this;return function(push){if(_this._start!==_this._end){if(_this._start<_this._end){for(var i=_this._start;i<_this._end;++i){if(!push(_this._array[i])){break}}}else{for(var i=_this._start-1;i>=_this._end;--i){if(!push(_this._array[i])){break}}}}}};IndexedIterable.prototype.backwards=function(){return new IndexedIterable(this._array,this._end,this._start)};IndexedIterable.prototype.range=function(start,end){if(start<=end){if(this._start===this._end){return this}else if(this._start<this._end){var diff=end-start;start=Math.max(this._start+start,this._start);end=Math.min(start+diff,this._end);return new IndexedIterable(this._array,start,end)}else{var diff=end-start;start=Math.max(this._start-start,this._end);end=Math.max(start-diff,this._end);return new IndexedIterable(this._array,start,end)}}else{throw new Error("Start index must be lower than end index")}};return IndexedIterable}();(function(_super){__extends(ListGrouper,_super);function ListGrouper(list,getKey,sort){var _this=_super.call(this,[list.events.on("inserted",(function(x){var value=x.newValue;var key=_this._getKey(value);var index=0;eachContinue(list.iterator(),(function(x){if(x===value){return false}else if(_this._getKey(x)===key){++index}return true}));_this._insert(value,key,index)}),undefined,false),list.events.on("removed",(function(x){_this._remove(x.oldValue)}),undefined,false)])||this;_this._keys=[];_this._groups={};_this._getKey=getKey;_this._sort=sort;each(list.iterator(),(function(x){_this._insert(x,getKey(x))}));return _this}ListGrouper.prototype._insert=function(x,key,index){if(this._groups[key]==null){this._groups[key]=[];var _a=getSortedIndex(this._keys,this._sort,key),found=_a.found,index_1=_a.index;if(found){throw new Error("Key already exists: "+key)}else{insertIndex(this._keys,index_1,key)}}if(index==null){this._groups[key].push(x)}else{insertIndex(this._groups[key],index,x)}};ListGrouper.prototype._remove=function(x){var key=this._getKey(x);var values=this._groups[key];if(values!=null){remove(values,x);if(values.length===0){delete this._groups[key];var _a=getSortedIndex(this._keys,this._sort,key),found=_a.found,index=_a.index;if(found){removeIndex(this._keys,index)}else{throw new Error("Key doesn't exist: "+key)}}}};ListGrouper.prototype.iterator=function(){var _this=this;return flatten(map(fromArray(this._keys),(function(key){return fromArray(_this._groups[key])})))};return ListGrouper})(MultiDisposer);var ListDisposer=function(_super){__extends(ListDisposer,_super);function ListDisposer(list,disposeOnRemove){if(disposeOnRemove===void 0){disposeOnRemove=true}var _this=this;if(disposeOnRemove){var disposer_1=list.events.on("removed",(function(x){x.oldValue.dispose()}),undefined,false);_this=_super.call(this,(function(){disposer_1.dispose();each(list.iterator(),(function(x){x.dispose()}))}))||this}else{_this=_super.call(this,(function(){each(list.iterator(),(function(x){x.dispose()}))}))||this}return _this}return ListDisposer}(Disposer);function checkBounds(index,len){if(!(index>=0&&index<len)){throw new Error("Index out of bounds: "+index)}}var List=function(){function List(initial){if(initial===void 0){initial=[]}this.events=new EventDispatcher;this._values=initial}Object.defineProperty(List.prototype,"values",{get:function(){return this._values},enumerable:true,configurable:true});List.prototype.contains=function(value){return this._values.indexOf(value)!==-1};List.prototype.removeValue=function(value){var i=0;var length=this._values.length;while(i<length){if(this._values[i]===value){this.removeIndex(i);--length}else{++i}}};List.prototype.indexOf=function(value){return indexOf(this._values,value)};Object.defineProperty(List.prototype,"length",{get:function(){return this._values.length},enumerable:true,configurable:true});List.prototype.hasIndex=function(index){return index>=0&&index<this._values.length};List.prototype.getIndex=function(index){return this._values[index]};List.prototype.setIndex=function(index,value){checkBounds(index,this._values.length);var oldValue=this._values[index];if(oldValue!==value){this._values[index]=value;if(this.events.isEnabled("setIndex")){this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index,oldValue,newValue:value})}if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue})}if(this.events.isEnabled("inserted")){this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:value})}}return oldValue};List.prototype.insertIndex=function(index,value){checkBounds(index,this._values.length+1);insertIndex(this._values,index,value);if(this.events.isEnabled("insertIndex")){this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index,newValue:value})}if(this.events.isEnabled("inserted")){this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:value})}};List.prototype._sortQuicksort=function(low,high,order){if(low<high){var p=this._sortPartition(low,high,order);this._sortQuicksort(low,p,order);this._sortQuicksort(p+1,high,order)}};List.prototype._sortPartition=function(low,high,order){var values=this._values;var pivot=values[low];var i=low-1;var j=high+1;for(;;){do{++i}while(order(values[i],pivot)<0);do{--j}while(order(values[j],pivot)>0);if(i>=j){return j}else{this.swap(i,j)}}};List.prototype.sort=function(order){this._sortQuicksort(0,this._values.length-1,order)};List.prototype.swap=function(a,b){var len=this._values.length;checkBounds(a,len);checkBounds(b,len);if(a!==b){var value_a=this._values[a];var value_b=this._values[b];this._values[a]=value_b;if(this.events.isEnabled("setIndex")){this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:a,oldValue:value_a,newValue:value_b})}this._values[b]=value_a;if(this.events.isEnabled("setIndex")){this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:b,oldValue:value_b,newValue:value_a})}}};List.prototype.removeIndex=function(index){checkBounds(index,this._values.length);var oldValue=this._values[index];removeIndex(this._values,index);if(this.events.isEnabled("removeIndex")){this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index,oldValue})}if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue})}return oldValue};List.prototype.moveValue=function(value,toIndex){var index=this.indexOf(value);if(index!==-1){var oldValue=this._values[index];removeIndex(this._values,index);if(this.events.isEnabled("removeIndex")){this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index,oldValue})}}if(toIndex==null){toIndex=this._values.length;this._values.push(value)}else{insertIndex(this._values,toIndex,value)}if(this.events.isEnabled("insertIndex")){this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:toIndex,newValue:value})}if(index===-1){if(this.events.isEnabled("inserted")){this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:value})}}};List.prototype.push=function(value){var index=this._values.push(value)-1;if(this.events.isEnabled("insertIndex")){this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index,newValue:value})}if(this.events.isEnabled("inserted")){this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:value})}return value};List.prototype.unshift=function(value){this.insertIndex(0,value)};List.prototype.pushAll=function(values){var _this=this;each$2(values,(function(value){_this.push(value)}))};List.prototype.copyFrom=function(source){this.pushAll(source._values)};List.prototype.pop=function(){var index=this._values.length-1;return index<0?undefined:this.removeIndex(this._values.length-1)};List.prototype.shift=function(){return this._values.length?this.removeIndex(0):undefined};List.prototype.setAll=function(newArray){var _this=this;var oldArray=copy$4(this._values);this._values.length=0;each$2(newArray,(function(value){_this._values.push(value)}));if(this.events.isEnabled("setAll")){this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray,newArray:this._values})}if(this.events.isEnabled("removed")){each$2(oldArray,(function(x){_this.events.dispatchImmediately("removed",{type:"removed",target:_this,oldValue:x})}))}if(this.events.isEnabled("inserted")){each$2(this._values,(function(x){_this.events.dispatchImmediately("inserted",{type:"inserted",target:_this,newValue:x})}))}};List.prototype.clear=function(){this.setAll([])};List.prototype.iterator=function(){return fromArray(this._values)};List.prototype[Symbol.iterator]=function(){var length,i;return __generator(this,(function(_a){switch(_a.label){case 0:length=this._values.length;i=0;_a.label=1;case 1:if(!(i<length))return[3,4];return[4,this._values[i]];case 2:_a.sent();_a.label=3;case 3:++i;return[3,1];case 4:return[2]}}))};List.prototype.each=function(f){each$2(this._values,f)};List.prototype.range=function(start,end){if(start<=end){var diff=end-start;start=Math.max(start,0);end=Math.min(start+diff,this._values.length);return new IndexedIterable(this._values,start,end)}else{throw new Error("Start index must be lower than end index")}};List.prototype.backwards=function(){return new IndexedIterable(this._values,this._values.length,0)};return List}();var ListTemplate=function(_super){__extends(ListTemplate,_super);function ListTemplate(t){var _this=_super.call(this)||this;_this.template=t;return _this}Object.defineProperty(ListTemplate.prototype,"template",{get:function(){return this._template},set:function(v){v.isTemplate=true;this._template=v},enumerable:true,configurable:true});ListTemplate.prototype.copyFrom=function(source){var _this=this;each(source.iterator(),(function(value){_this.push(value.clone())}))};ListTemplate.prototype.create=function(make){var clone=make!=null?new make:this.template.clone();this.push(clone);return clone};ListTemplate.prototype.clone=function(){var out=new ListTemplate(this.template);var values=this.values;var length=values.length;for(var i=0;i<length;++i){out.push(values[i].clone())}return out};return ListTemplate}(List);var OrderedList=function(){function OrderedList(initial){this._values=[];this.events=new EventDispatcher;if(initial!=null){this.setAll(initial)}}Object.defineProperty(OrderedList.prototype,"values",{get:function(){return this._values},enumerable:true,configurable:true});OrderedList.prototype._insert=function(value){this._values.push(value);return this._values.length-1};Object.defineProperty(OrderedList.prototype,"length",{get:function(){return this._values.length},enumerable:true,configurable:true});OrderedList.prototype.indexOf=function(value){return indexOf(this._values,value)};OrderedList.prototype.contains=function(value){return this.indexOf(value)!==-1};OrderedList.prototype.getIndex=function(index){return this._values[index]};Object.defineProperty(OrderedList.prototype,"first",{get:function(){return this._values[0]},enumerable:true,configurable:true});Object.defineProperty(OrderedList.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:true,configurable:true});OrderedList.prototype.insert=function(value){var index=this._insert(value);if(this.events.isEnabled("inserted")){this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index,newValue:value})}};OrderedList.prototype.remove=function(value){var index=this.indexOf(value);if(index!==-1){var oldValue=this._values[index];removeIndex(this._values,index);if(this.events.isEnabled("removed")){this.events.dispatchImmediately("removed",{type:"removed",target:this,index,oldValue})}}};OrderedList.prototype.setAll=function(newArray){var _this=this;eachReverse(this._values,(function(x,i){_this._values.pop();if(_this.events.isEnabled("removed")){_this.events.dispatchImmediately("removed",{type:"removed",target:_this,index:i,oldValue:x})}}));each$2(newArray,(function(value){_this.insert(value)}))};OrderedList.prototype.clear=function(){this.setAll([])};OrderedList.prototype.slice=function(start,end){var out=new OrderedList;out._values=this._values.slice(start,end);return out};OrderedList.prototype.findClosestIndex=function(value,fn,direction){if(direction===void 0){direction="any"}var closestIndex=-1;var closestValue;var closestDifference;var i=0;eachContinue(this.iterator(),(function(element){var item=fn(element);if(direction==="any"){if(item===value){closestIndex=i;return false}var difference=Math.abs(value-item);if(!hasValue(closestDifference)||closestDifference>difference){closestIndex=i;closestValue=item;closestDifference=difference}}else if(direction==="left"&&item<value){if(!hasValue(closestValue)||closestValue<item){closestIndex=i;closestValue=item}}else if(direction==="right"&&item>=value){if(!hasValue(closestValue)||closestValue>=item){closestIndex=i;closestValue=item}}++i;return true}));if(closestIndex===-1){if(direction==="left"){closestIndex=0}else if(direction==="right"){closestIndex=this.length-1}}return closestIndex};OrderedList.prototype.iterator=function(){return fromArray(this._values)};OrderedList.prototype[Symbol.iterator]=function(){var length,i;return __generator(this,(function(_a){switch(_a.label){case 0:length=this._values.length;i=0;_a.label=1;case 1:if(!(i<length))return[3,4];return[4,this._values[i]];case 2:_a.sent();_a.label=3;case 3:++i;return[3,1];case 4:return[2]}}))};OrderedList.prototype.each=function(f){each$2(this._values,f)};return OrderedList}();var SortedList=function(_super){__extends(SortedList,_super);function SortedList(sort){var _this=_super.call(this)||this;_this._ordering=sort;return _this}SortedList.prototype._insert=function(value){var index=getSortedIndex(this._values,this._ordering,value).index;insertIndex(this._values,index,value);return index};SortedList.prototype.indexOf=function(value){var _a=getSortedIndex(this._values,this._ordering,value),found=_a.found,index=_a.index;if(found){return index}else{return-1}};SortedList.prototype.update=function(value){var index=indexOf(this._values,value);if(index!==-1){var last=this._values.length-1;if(!((index===0||this._ordering(this._values[index-1],value)<0)&&(index===last||this._ordering(value,this._values[index+1])<0))){removeIndex(this._values,index);this._insert(value)}}};return SortedList}(OrderedList);var OrderedListTemplate=function(_super){__extends(OrderedListTemplate,_super);function OrderedListTemplate(t){var _this=_super.call(this)||this;_this.template=t;return _this}Object.defineProperty(OrderedListTemplate.prototype,"template",{get:function(){return this._template},set:function(v){v.isTemplate=true;this._template=v},enumerable:true,configurable:true});OrderedListTemplate.prototype.copyFrom=function(source){var _this=this;each(source.iterator(),(function(value){_this.insert(value.clone())}))};OrderedListTemplate.prototype.slice=function(start,end){var out=new OrderedListTemplate(this.template);out._values=this._values.slice(start,end);return out};OrderedListTemplate.prototype.create=function(make){var clone=make!=null?new make:this.template.clone();this.insert(clone);return clone};return OrderedListTemplate}(OrderedList);var SortedListTemplate=function(_super){__extends(SortedListTemplate,_super);function SortedListTemplate(t,sort){var _this=_super.call(this,sort)||this;_this.template=t;return _this}Object.defineProperty(SortedListTemplate.prototype,"template",{get:function(){return this._template},set:function(v){v.isTemplate=true;this._template=v},enumerable:true,configurable:true});SortedListTemplate.prototype.copyFrom=function(source){var _this=this;each(source.iterator(),(function(value){_this.insert(value.clone())}))};SortedListTemplate.prototype.create=function(make){var clone=make!=null?new make:this.template.clone();this.insert(clone);return clone};return SortedListTemplate}(SortedList);function order(a,b){if(a===b){return 0}else if(a<b){return-1}else{return 1}}function reverse(a){switch(a){case 0:return 0;case-1:return 1;case 1:return-1}}function or(a,b){if(a===0){return b}else{return a}}var GlobalAdapter=function(){function GlobalAdapter(){this._callbackId=0;this._callbacks=new SortedList((function(left,right){return or(order(left.priority,right.priority),order(left.id,right.id))}))}GlobalAdapter.prototype.addAll=function(type,key,callback,priority,scope){if(priority===void 0){priority=0}this._callbacks.insert({id:++this._callbackId,key,callback,priority,scope,type})};GlobalAdapter.prototype.isEnabled=function(type,key){return any(this._callbacks.values,(function(x){return x.key===key&&type instanceof x.type}))};GlobalAdapter.prototype.applyAll=function(type,key,value){var callbacks=this._callbacks.values;var length=callbacks.length;if(length==0){return value}for(var i=0;i<length;++i){var item=callbacks[i];if(item.key===key&&type instanceof item.type){value=item.callback.call(item.scope,value,type,key)}}return value};return GlobalAdapter}();var globalAdapter=new GlobalAdapter;var Adapter=function(){function Adapter(c){this._callbackId=0;this._callbacks=new SortedList((function(left,right){return or(order(left.priority,right.priority),order(left.id,right.id))}));this._disabled={};this.object=c;this.events=this._callbacks.events}Adapter.prototype.add=function(key,callback,priority,scope){if(priority===void 0){priority=0}this._callbacks.insert({id:++this._callbackId,key,callback,priority,scope})};Adapter.prototype.has=function(key,callback,priority,scope){if(priority===void 0){priority=0}return contains$3(this._callbacks.iterator(),(function(item){return item.key===key&&item.callback===callback&&item.priority===priority&&item.scope===scope}))};Adapter.prototype.remove=function(key,priority){var _this=this;each$2(toArray(this._callbacks.iterator()),(function(item){if(item.key===key&&(!isNumber$1(priority)||priority===item.priority)){_this._callbacks.remove(item)}}))};Adapter.prototype.enableKey=function(key){delete this._disabled[key]};Adapter.prototype.disableKey=function(key,amount){if(amount===void 0){amount=Infinity}this._disabled[key]=amount};Adapter.prototype._hasListenersByType=function(key){return any(this._callbacks.values,(function(x){return x.key===key}))};Adapter.prototype.isEnabled=function(key){return this._disabled[key]==null&&(this._hasListenersByType(key)||globalAdapter.isEnabled(this.object,key))};Adapter.prototype._shouldDispatch=function(key){var count=this._disabled[key];if(!isNumber$1(count)){return true}else{if(count<=1){delete this._disabled[key]}else{--this._disabled[key]}return false}};Adapter.prototype.apply=function(key,value){if(this._shouldDispatch(key)){var callbacks=this._callbacks.values;var length_1=callbacks.length;if(length_1>0){for(var i=0;i<length_1;++i){var item=callbacks[i];if(item.key===key){value=item.callback.call(item.scope,value,this.object,key)}}}value=globalAdapter.applyAll(this.object,key,value);return value}else{return value}};Adapter.prototype.keys=function(){return toArray(map(this._callbacks.iterator(),(function(x){return x.key})))};Adapter.prototype.copyFrom=function(source){var _this=this;each(source._callbacks.iterator(),(function(x){_this.add(x.key,x.callback,x.priority,x.scope)}));each$1(source._disabled,(function(key,val){_this._disabled[key]=val}))};Adapter.prototype.clear=function(){this._callbacks.clear()};return Adapter}();var namedColors={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function rgb(color,alpha){var rgb;if(namedColors[color]){rgb=namedColors[color]}else if(color.charAt(0)==="#"){rgb=hexToRgb(color)}else if(color.match(/^rgba?\(/)){rgb=rgbaToRgb(color)}if(!rgb){rgb={r:0,g:0,b:0,a:1}}if(hasValue(alpha)){rgb.a=alpha}return rgb}function hexToRgb(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,(function(m,r,g,b){return r+r+g+g+b+b}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:hexToRgbWithAlpha(hex)}function hexToRgbWithAlpha(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,(function(m,r,g,b,a){return r+r+g+g+b+b+a+a}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16),a:parseInt(result[4],16)/256}:undefined}function rgbaToRgb(color){color=color.replace(/[ ]/g,"");var matches=color.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(matches){matches.push("1")}else{matches=color.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i);if(!matches){return}}return{r:parseInt(matches[1]),g:parseInt(matches[2]),b:parseInt(matches[3]),a:parseFloat(matches[4])}}function rgbToHex(rgb){return"#"+pad2(rgb.r.toString(16))+pad2(rgb.g.toString(16))+pad2(rgb.b.toString(16))}function rgbToRGBA(rgb){if(hasValue(rgb.a)&&rgb.a!==1){return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")"}else{return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")"}}function pad2(c){return c.length==1?"0"+c:""+c}function interpolate(rgb1,rgb2,percent){percent=fitToRange(percent,0,1);if(rgb1){if(rgb2){return{r:rgb1.r+Math.round((rgb2.r-rgb1.r)*percent),g:rgb1.g+Math.round((rgb2.g-rgb1.g)*percent),b:rgb1.b+Math.round((rgb2.b-rgb1.b)*percent),a:(rgb1.a||1)+Math.round(((rgb2.a||1)-(rgb1.a||1))*percent)}}else{return rgb1}}else if(rgb2){return rgb2}else{return rgb1}}function lighten(rgb,percent){if(rgb){return{r:Math.max(0,Math.min(255,rgb.r+getLightnessStep(rgb.r,percent))),g:Math.max(0,Math.min(255,rgb.g+getLightnessStep(rgb.g,percent))),b:Math.max(0,Math.min(255,rgb.b+getLightnessStep(rgb.b,percent))),a:rgb.a}}else{return rgb}}function getLightnessStep(value,percent){var base=percent>0?255-value:value;return Math.round(base*percent)}function brighten(rgb,percent){if(rgb){var base=Math.min(Math.max(rgb.r,rgb.g,rgb.b),230);var step=getLightnessStep(base,percent);return{r:Math.max(0,Math.min(255,Math.round(rgb.r+step))),g:Math.max(0,Math.min(255,Math.round(rgb.g+step))),b:Math.max(0,Math.min(255,Math.round(rgb.b+step))),a:rgb.a}}else{return rgb}}function saturate(rgb,saturation){if(rgb==null||saturation==1){return rgb}var hsl=rgbToHsl(rgb);hsl.s=saturation;return hslToRgb(hsl)}function hslToRgb(color){var r,g,b;var h=color.h;var s=color.s;var l=color.l;if(s==0){r=g=b=l}else{var hue2rgb=function hue2rgb(p,q,t){if(t<0){t+=1}if(t>1){t-=1}if(t<1/6){return p+(q-p)*6*t}if(t<1/2){return q}if(t<2/3){return p+(q-p)*(2/3-t)*6}return p};var q=l<.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3)}return{r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)}}function rgbToHsl(color){var r=color.r/255;var g=color.g/255;var b=color.b/255;var max=Math.max(r,g,b);var min=Math.min(r,g,b);var h=0;var s=0;var l=(max+min)/2;if(max===min){h=s=0}else{var d=max-min;s=l>.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h,s,l}}function isLight(color){return(color.r*299+color.g*587+color.b*114)/1e3>=128}var Color=function(){function Color(color){this._value=color}Object.defineProperty(Color.prototype,"rgb",{get:function(){return this._value},enumerable:true,configurable:true});Object.defineProperty(Color.prototype,"hex",{get:function(){return this._value?rgbToHex(this._value):"none"},enumerable:true,configurable:true});Object.defineProperty(Color.prototype,"rgba",{get:function(){return this._value?rgbToRGBA(this._value):"none"},enumerable:true,configurable:true});Object.defineProperty(Color.prototype,"alpha",{get:function(){if(this._value!=null&&this._value.a!=null){return this._value.a}else{return 1}},set:function(value){if(this._value){this._value.a=value}},enumerable:true,configurable:true});Object.defineProperty(Color.prototype,"lightColor",{get:function(){if(!this._lightColor){this._lightColor=new Color({r:255,g:255,b:255})}return this._lightColor},set:function(color){this._lightColor=color},enumerable:true,configurable:true});Object.defineProperty(Color.prototype,"darkColor",{get:function(){if(!this._darkColor){this._darkColor=new Color({r:0,g:0,b:0})}return this._darkColor},set:function(color){this._darkColor=color},enumerable:true,configurable:true});Color.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex};Color.prototype.lighten=function(percent){return new Color(lighten(this.rgb,percent))};Color.prototype.brighten=function(percent){return new Color(brighten(this.rgb,percent))};Color.prototype.saturate=function(saturation){return new Color(saturate(this.rgb,saturation))};Object.defineProperty(Color.prototype,"alternative",{get:function(){if(this.rgb!=null){return isLight(this.rgb)?this.darkColor:this.lightColor}else{throw new Error("Color does not exist")}},enumerable:true,configurable:true});return Color}();function color(value,alpha){if(!hasValue(value)){return new Color(undefined)}if(typeof value=="string"){var cacheId="_color_"+value+"_"+(alpha||"1");var cached=registry.getCache(cacheId);if(cached){return new Color({r:cached.r,g:cached.g,b:cached.b,a:cached.a})}var rgb$1=rgb(value,alpha);registry.setCache(cacheId,rgb$1);return new Color(rgb$1)}if(value instanceof Color){if(hasValue(alpha)){value.alpha=alpha}return value}return new Color(value)}function isColor(value){return value instanceof Color}function castColor(value){return color(value)}function toColor(value){if(hasValue(value)&&!isColor(value)){return castColor(value)}return value}var BaseObject=function(){function BaseObject(){this._disposed=false;this._disposers=[];this.className="BaseObject"}BaseObject.prototype.debug=function(){};Object.defineProperty(BaseObject.prototype,"uid",{get:function(){if(!this._uid){this._uid=registry.getUniqueId();registry.map.setKey(this._uid,this)}return this._uid},enumerable:true,configurable:true});Object.defineProperty(BaseObject.prototype,"id",{get:function(){return this._id},set:function(value){this._id=value},enumerable:true,configurable:true});Object.defineProperty(BaseObject.prototype,"map",{get:function(){if(!this._map){this._map=new Dictionary}return this._map},enumerable:true,configurable:true});Object.defineProperty(BaseObject.prototype,"delayedMap",{get:function(){if(!this._delayedMap){this._delayedMap=new Dictionary}return this._delayedMap},enumerable:true,configurable:true});BaseObject.prototype.addDelayedMap=function(property,id){var map=this.delayedMap;if(!map.hasKey(id)){map.setKey(id,[])}var list=map.getKey(id);list.push({property,target:this})};BaseObject.prototype.processDelayedMap=function(){var _this=this;this.delayedMap.each((function(id,list){if(_this.map.hasKey(id)){var target_1=_this.map.getKey(id);each$2(list,(function(item){item.target[item.property]=target_1}));_this.delayedMap.removeKey(id)}}))};BaseObject.prototype.applyTheme=function(){var _this=this;if(registry){var themes=this.getCurrentThemes();if(themes){each$2(themes,(function(theme,index){theme(_this)}))}}};Object.defineProperty(BaseObject.prototype,"themes",{get:function(){return this._themes},set:function(value){this._themes=value},enumerable:true,configurable:true});BaseObject.prototype.getCurrentThemes=function(){return this.themes||registry.themes};BaseObject.prototype.isDisposed=function(){return this._disposed};BaseObject.prototype.dispose=function(){if(!this._disposed){this._disposed=true;var a=this._disposers;this._disposers=null;while(a.length!==0){var disposer=a.shift();disposer.dispose()}this.clearCache();if(this.clonedFrom){this.clonedFrom.clones.removeValue(this)}var uid=this._uid;if(uid!=null){registry.map.removeKey(uid)}}};BaseObject.prototype.addDisposer=function(target){this._disposers.push(target)};BaseObject.prototype.removeDispose=function(target){if(!this._disposed){var index=indexOf(this._disposers,target);if(index>-1){this._disposers.splice(index,1)}}target.dispose()};BaseObject.prototype.clone=function(cloneId){if(!cloneId){cloneId="clone-"+registry.getUniqueId()}var newObject=new this.constructor;newObject.cloneId=cloneId;newObject.copyFrom(this);return newObject};Object.defineProperty(BaseObject.prototype,"clones",{get:function(){if(!this._clones){this._clones=new List}return this._clones},enumerable:true,configurable:true});BaseObject.prototype.copyFrom=function(object){object.clones.push(this);this.clonedFrom=object};Object.defineProperty(BaseObject.prototype,"className",{get:function(){return this._className},set:function(value){this._className=value},enumerable:true,configurable:true});BaseObject.prototype.setCache=function(key,value,ttl){cache$2.set(this.uid,key,value,ttl)};BaseObject.prototype.getCache=function(key,value){if(value===void 0){value=undefined}return cache$2.get(this.uid,key,value)};BaseObject.prototype.clearCache=function(){cache$2.clear(this.uid)};BaseObject.prototype.setTimeout=function(fn,delay){var _this=this;var id=setTimeout((function(){_this.removeDispose(disposer);fn()}),delay);var disposer=new Disposer((function(){clearTimeout(id)}));this._disposers.push(disposer);return disposer};BaseObject.prototype.setInterval=function(fn,delay){var _this=this;var id=setInterval((function(){_this.removeDispose(disposer);fn()}),delay);var disposer=new Disposer((function(){clearTimeout(id)}));this._disposers.push(disposer);return disposer};Object.defineProperty(BaseObject.prototype,"config",{set:function(config){try{this.processConfig(config)}catch(e){this.raiseCriticalError(e)}},enumerable:true,configurable:true});BaseObject.prototype.processConfig=function(config){var _this=this;if(!config){return}var target=this;eachOrdered(config,(function(configKey,value){var configValue=value;if(configKey=="callback"&&typeof value=="function"){value.call(target)}if(_this.hasProperty(configKey)){var item_1;if(isObject$4(configValue)&&hasValue(configValue["type"])&&(!isObject$4(target[configKey])||!hasValue(target[configKey].className)||configValue["forceCreate"]||target[configKey].className!=configValue["type"])&&!_this.asIs(configKey)){item_1=_this.createClassInstance(configValue["type"]);if(item_1){target[configKey]=item_1}else{item_1=target[configKey]}}else{item_1=target[configKey]}if(item_1 instanceof Adapter){_this.processAdapters(item_1,configValue)}else if(item_1 instanceof EventDispatcher){_this.processEvents(item_1,configValue)}else if(configKey=="locale"&&isString$1(configValue)){if(window["am4lang_"+configValue]){target[configKey]=window["am4lang_"+configValue]}}else if(configKey=="parent"&&isString$1(configValue)){var parent_1=_this.map.getKey(configValue);if(parent_1){target[configKey]=parent_1}else{_this.addDelayedMap("parent",configValue)}}else if(_this.asIs(configKey)){target[configKey]=configValue}else if(_this.asFunction(configKey)&&isString$1(configValue)){if(hasValue(registry.registeredClasses[configValue])){target[configKey]=registry.registeredClasses[configValue]}else{throw Error("Invalid easing function: "+configValue)}}else if(configValue instanceof BaseObject){target[configKey]=configValue}else if(item_1 instanceof BaseObject){item_1.config=configValue}else if(item_1 instanceof ListTemplate||item_1 instanceof OrderedListTemplate||item_1 instanceof SortedListTemplate){if(isArray$6(configValue)){if(item_1 instanceof ListTemplate){_this.processListTemplate(configValue,item_1)}else{_this.processOrderedTemplate(configValue,item_1)}}else if(isObject$4(configValue)){if(configValue instanceof BaseObject){item_1.template=configValue}else{var templateValue=void 0;if(hasValue(configValue.template)){templateValue=configValue.template}else{templateValue=configValue}if(item_1.template instanceof BaseObject){item_1.template.config=templateValue}else{each$1(templateValue,(function(entryKey,entryValue){var listItem=item_1.template[entryKey];if(listItem instanceof Adapter){_this.processAdapters(listItem,entryValue)}else if(listItem instanceof EventDispatcher){_this.processEvents(listItem,entryValue)}else if(listItem instanceof DictionaryTemplate){_this.processDictionaryTemplate(listItem,entryValue)}else if(item_1.template[entryKey]instanceof BaseObject){item_1.template[entryKey].config=entryValue}else if(isObject$4(entryValue)&&hasValue(entryValue["type"])){listItem=_this.createClassInstance(entryValue["type"]);if(listItem){if(listItem instanceof BaseObject){listItem.config=entryValue}item_1.template[entryKey]=listItem}else{item_1.template[entryKey]=entryValue}}else if(listItem instanceof List){_this.processList(entryValue,listItem)}else{item_1.template[entryKey]=_this.maybeColorOrPercent(entryValue)}}))}if(hasValue(configValue.values)){if(item_1 instanceof ListTemplate){_this.processListTemplate(configValue.values,item_1)}else{_this.processOrderedTemplate(configValue.values,item_1)}}}}else;}else if(item_1 instanceof List){if(configKey=="children"){_this.processList(configValue,item_1,_this)}else{_this.processList(configValue,item_1)}}else if(item_1 instanceof DictionaryTemplate){_this.processDictionaryTemplate(item_1,configValue)}else if(item_1 instanceof Dictionary){_this.processDictionary(item_1,configValue)}else if(item_1 instanceof Color||item_1 instanceof Percent){target[configKey]=_this.maybeColorOrPercent(configValue)}else if(isObject$4(item_1)&&isObject$4(configValue)){copyAllProperties(configValue,item_1)}else{configValue=_this.maybeColorOrPercent(configValue);target[configKey]=configValue}}else if(!_this.isReserved(configKey)){target[configKey]=configValue}}),this.configOrder);if(this.processingErrors.length){var errors=this.processingErrors.join("\n");this._processingErrors=[];throw Error(errors)}};BaseObject.prototype.maybeColorOrPercent=function(value){if(isString$1(value)){if(value.match(/^[\-]?[0-9.]+\%$/)){return percent(toNumber$1(value))}else if(value.match(/^\#[0-9abcdef]{3,}$/i)){return color(value)}}return value};BaseObject.prototype.processAdapters=function(item,config){var _this=this;if(isArray$6(config)){each$2(config,(function(entry,index){item.add(entry.key,entry.callback,entry.priority||0,_this)}))}else if(isObject$4(config)){each$1(config,(function(key,entry){if(!item.has(key,entry)){item.add(key,entry)}}))}};BaseObject.prototype.processEvents=function(item,config){var _this=this;if(isArray$6(config)){each$2(config,(function(entry,index){item.on(entry.type,entry.callback,_this)}))}else if(isObject$4(config)){each$1(config,(function(key,entry){if(!item.has(key,entry)){item.on(key,entry)}}))}};BaseObject.prototype.processDictionaryTemplate=function(item,config){if(isObject$4(config)){each$1(config,(function(entryKey,entryValue){var listItem;if(entryKey=="template"){listItem=item.template}else if(item.hasKey(entryKey)){listItem=item.getKey(entryKey)}else{listItem=item.create(entryKey)}if(listItem instanceof BaseObject){listItem.config=entryValue}else if(isObject$4(listItem)&&isObject$4(entryValue)){copyAllProperties(entryValue,listItem)}else{listItem.setKey(entryKey,entryValue)}}))}};BaseObject.prototype.processDictionary=function(item,config){if(isObject$4(config)){each$1(config,(function(entryKey,entryValue){item.setKey(entryKey,entryValue)}))}};BaseObject.prototype.processListTemplate=function(configValue,item){var _this=this;each$2(configValue,(function(entry,index){var type=_this.getConfigEntryType(entry);var listItem;if(item.hasIndex(index)&&!entry["forceCreate"]){listItem=item.getIndex(index)}else if(entry instanceof BaseObject){item.push(entry);return}else if(type){listItem=item.create(type)}else{listItem=item.create()}if(entry===listItem);else{if(isObject$4(entry)){if(listItem instanceof BaseObject){listItem.config=entry}else if(isObject$4(listItem)&&isObject$4(entry)){copyAllProperties(entry,listItem)}else{item.setIndex(item.indexOf(listItem),entry)}}}}));while(configValue.length>item.length){item.pop()}};BaseObject.prototype.processOrderedTemplate=function(configValue,item){var _this=this;each$2(configValue,(function(entry,index){var type=_this.getConfigEntryType(entry);var listItem;if(type){listItem=item.create(type)}else{listItem=item.create()}if(isObject$4(entry)){if(listItem instanceof BaseObject){listItem.config=entry}else if(isObject$4(listItem)&&isObject$4(entry)){copyAllProperties(entry,listItem)}else{item.insert(entry)}}}))};BaseObject.prototype.processList=function(configValue,item,parent){var _this=this;if(!isArray$6(configValue)){configValue=[configValue]}var itemCount=item.length;var extraCount=0;each$2(configValue,(function(entry,index){if(isObject$4(entry)){var listItem=void 0;if(index<itemCount&&!entry["forceCreate"]){listItem=item.getIndex(index)}else if(entry instanceof BaseObject){item.push(entry);return}else{extraCount++;listItem=_this.createEntryInstance(entry);if(parent){listItem.parent=parent}else{item.push(listItem)}}if(listItem instanceof BaseObject){listItem.config=entry}else if(isObject$4(listItem)&&isObject$4(entry)){copyAllProperties(entry,listItem)}}else{if(item.hasIndex(index)){item.setIndex(index,entry)}else{item.push(entry)}}}));while(!parent&&configValue.length+extraCount<item.length){item.pop()}};BaseObject.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="language"){return-1}else if(b=="language"){return 1}else{return 0}};BaseObject.prototype.asIs=function(field){return indexOf(["locale"],field)!=-1};BaseObject.prototype.asFunction=function(field){return false};BaseObject.prototype.createClassInstance=function(className){if(hasValue(registry.registeredClasses[className])){return new registry.registeredClasses[className]}else{throw Error('Invalid type: "'+className+'".')}};BaseObject.prototype.createEntryInstance=function(config){var res;if(hasValue(config["type"])){res=this.createClassInstance(config["type"])}if(!res){return config}return res};BaseObject.prototype.getConfigEntryType=function(config){if(hasValue(config["type"])){if(hasValue(registry.registeredClasses[config["type"]])){return registry.registeredClasses[config["type"]]}else{throw Error('Invalid type: "'+config["type"]+'".')}}return};BaseObject.prototype.hasProperty=function(prop){return prop in this?true:false};BaseObject.prototype.isReserved=function(key){return["type","forceCreate"].indexOf(key)!==-1};Object.defineProperty(BaseObject.prototype,"processingErrors",{get:function(){if(!this._processingErrors){this._processingErrors=[]}return this._processingErrors},enumerable:true,configurable:true});return BaseObject}();var BaseObjectEvents=function(_super){__extends(BaseObjectEvents,_super);function BaseObjectEvents(){var _this=_super.call(this)||this;_this.className="BaseObjectEvents";return _this}Object.defineProperty(BaseObjectEvents.prototype,"events",{get:function(){if(!this._eventDispatcher){this._eventDispatcher=new EventDispatcher;this._disposers.push(this._eventDispatcher)}return this._eventDispatcher},enumerable:true,configurable:true});BaseObjectEvents.prototype.dispatch=function(eventType,data){if(this._eventDispatcher){if(this.events.isEnabled(eventType)){if(data){data.type=eventType;data.target=data.target||this;this.events.dispatch(eventType,{type:eventType,target:this})}else{this.events.dispatch(eventType,{type:eventType,target:this})}}}};BaseObjectEvents.prototype.dispatchImmediately=function(eventType,data){if(this._eventDispatcher){if(this.events.isEnabled(eventType)){if(data){data.type=eventType;data.target=data.target||this;this.events.dispatchImmediately(eventType,data)}else{this.events.dispatchImmediately(eventType,{type:eventType,target:this})}}}};BaseObjectEvents.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(source._eventDispatcher){this.events.copyFrom(source._eventDispatcher)}};return BaseObjectEvents}(BaseObject);function isSafari(){return/apple/i.test(navigator.vendor)}function isInternetExplorer(){return/MSIE |Trident\//.test(navigator.userAgent)}var STRING="string";var NUMBER="number";var DATE$2="date";var DURATION="duration";var PLACEHOLDER="____";var PLACEHOLDER2="____";function copyProperties(source,target){each$1(source,(function(key,value){if(hasValue(value)){target[key]=value}}));return target}function stripHash(url){return/^[^#]*/.exec(url)[0]}function getBaseURI(){var url="#";if(isSafari()){var baseURI=document.baseURI;if(baseURI){baseURI=stripHash(baseURI);var loc=stripHash(location.href);if(baseURI!==loc){url=loc+url}}}return url}function copy$3(source,target){each$1(source,(function(key,value){target[key]=value}));return target}function isNotEmpty(value){return hasValue(value)&&value.toString()!==""}function relativeToValue(percent,full){if(isNumber$1(percent)){return percent}else if(percent!=null&&isNumber$1(percent.value)&&isNumber$1(full)){return full*percent.value}else{return 0}}function relativeRadiusToValue(percent,full,subtractIfNegative){var value;if(isNumber$1(percent)){value=percent;if(value<0){if(subtractIfNegative){value=full+value}else{value=full-value}}}else if(percent!=null&&isNumber$1(percent.value)){value=full*percent.value}return value}function getPixelRatio(){var ratio=window.devicePixelRatio||1;return ratio}function capitalize(str){var arr=str.split("");arr[0]=arr[0].toUpperCase();return arr.join("")}function stringify(value){return JSON.stringify(value)}function escapeForRgex(value){return value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function splitTextByCharCount(text,maxChars,fullWords,rtl,fullWordFallback){if(text.length<=maxChars){return[text]}var res=[];if(fullWords){var currentIndex=-1;var tmpText=text.replace(/([,;:!?\\\/]+|[\s])/g,PLACEHOLDER+"$1"+PLACEHOLDER);var words=tmpText.split(PLACEHOLDER);for(var i=1;i<words.length;i++){var word=words[i];if((word=="."||word==",")&&words[i-1].match(/[\w]+$/)){words[i-1]+=word;words[i]=""}}for(var i=0;i<words.length;i++){var word=words[i];var wordLength=word.length;if(wordLength===0){continue}if(wordLength>maxChars&&(fullWords!==true||fullWordFallback!=false)){if(rtl){word=reverseString(word)}var parts=word.match(new RegExp(".{1,"+maxChars+"}","g"));if(parts){if(rtl){for(var x=0;x<parts.length;x++){parts[x]=reverseString(parts[x])}}res=res.concat(parts)}}else{if(currentIndex===-1){res.push("");currentIndex=0}if(res[currentIndex].length+wordLength+1>maxChars&&res[currentIndex]!==""){res.push("");currentIndex++}res[currentIndex]+=word}currentIndex=res.length-1}}else{var parts=text.match(new RegExp(".{1,"+maxChars+"}","g"));if(parts){if(rtl){for(var x=0;x<parts.length;x++){parts[x]=reverseString(parts[x])}}res=parts}}if(res.length==1&&fullWords&&fullWordFallback&&res[0].length>maxChars){res=[]}return res}function truncateWithEllipsis(text,maxChars,ellipsis,fullWords,rtl){if(text.length<=maxChars){return text}maxChars-=ellipsis.length;if(maxChars<1){maxChars=1}var lines=splitTextByCharCount(text,maxChars,fullWords,rtl);return(lines[0]||"")+ellipsis}function trim(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function rtrim(str){return str.replace(/[\s\uFEFF\xA0]+$/g,"")}function ltrim(str){return str.replace(/^[\s\uFEFF\xA0]+/g,"")}function reverseString(str){return str.split("").reverse().join("")}function padString(value,len,char){if(len===void 0){len=0}if(char===void 0){char="0"}if(typeof value!=="string"){value=value.toString()}return len>value.length?Array(len-value.length+1).join(char)+value:value}function getFormat(format){if(typeof format==="undefined"){return STRING}format=format.toLowerCase().replace(/^\[[^\]]*\]/,"");format=format.replace(/\[[^\]]+\]/,"");format=format.trim();var hints=format.match(/\/(date|number|duration)$/);if(hints){return hints[1]}if(format===NUMBER){return NUMBER}if(format===DATE$2){return DATE$2}if(format===DURATION){return DURATION}if(format.match(/[#0]/)){return NUMBER}if(format.match(/[ymwdhnsqaxkzgtei]/)){return DATE$2}return STRING}function cleanFormat(format){return format.replace(/\/(date|number|duration)$/i,"")}function stripTags(text){return text?text.replace(/<[^>]*>/g,""):text}function plainText(text){return text?stripTags((""+text).replace(/[\n\r]+/g,". ")):text}function numberToString(value){if(isNaN$1(value)){return"NaN"}if(value===Infinity){return"Infinity"}if(value===-Infinity){return"-Infinity"}if(value===0&&1/value===-Infinity){return"-0"}var negative=value<0;value=Math.abs(value);var parsed=getValue$4(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+value));var digits=parsed[1];var decimals=parsed[2]||"";var res;if(parsed[3]==null){res=decimals===""?digits:digits+"."+decimals}else{var exponent=+parsed[3];if(value<1){var zeros=exponent-1;res="0."+repeat("0",zeros)+digits+decimals}else{var zeros=exponent-decimals.length;if(zeros===0){res=digits+decimals}else if(zeros<0){res=digits+decimals.slice(0,zeros)+"."+decimals.slice(zeros)}else{res=digits+decimals+repeat("0",zeros)}}}return negative?"-"+res:res}function anyToDate(value){if(isDate$1(value)){var date=new Date(value);date.setMilliseconds(value.getMilliseconds());return date}else if(isNumber$1(value)){return new Date(value)}else{var num=Number(value);if(!isNumber$1(num)){return new Date(value)}else{return new Date(num)}}}function anyToNumber(value){if(isDate$1(value)){return value.getTime()}else if(isNumber$1(value)){return value}else if(isString$1(value)){var num=Number(value);if(!isNumber$1(num)){return undefined}else{return num}}}function getYearDay(date,utc){var start=new Date(date.getFullYear(),0,0);var diff=date.getTime()-start.getTime()+(start.getTimezoneOffset()-date.getTimezoneOffset())*60*1e3;var oneDay=1e3*60*60*24;return Math.floor(diff/oneDay)}function getWeek(date,_utc){var d=new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate()));var day=d.getUTCDay()||7;d.setUTCDate(d.getUTCDate()+4-day);var firstDay=new Date(Date.UTC(d.getUTCFullYear(),0,1));return Math.ceil(((d.getTime()-firstDay.getTime())/864e5+1)/7)}function getMonthWeek(date,utc){var firstWeek=getWeek(new Date(date.getFullYear(),date.getMonth(),1));var currentWeek=getWeek(date);if(currentWeek==1){currentWeek=53}return currentWeek-firstWeek+1}function getDayFromWeek(week,year,weekday,utc){if(weekday===void 0){weekday=1}if(utc===void 0){utc=false}var date=new Date(year,0,4,0,0,0,0);if(utc){date.setUTCFullYear(year)}var day=week*7+weekday-((date.getDay()||7)+3);return day}function get12Hours(hours,base){if(hours>12){hours-=12}else if(hours===0){hours=12}return hasValue(base)?hours+(base-1):hours}function getTimeZone(date,long,savings,utc){if(long===void 0){long=false}if(savings===void 0){savings=false}if(utc===void 0){utc=false}if(utc){return long?"Coordinated Universal Time":"UTC"}var wotz=date.toLocaleString("UTC");var wtz=date.toLocaleString("UTC",{timeZoneName:long?"long":"short"}).substr(wotz.length);if(savings===false){wtz=wtz.replace(/ (standard|daylight|summer|winter) /i," ")}return wtz}function fitNumber(value,min,max){if(value>max){return max}else if(value<min){return min}return value}function fitNumberRelative(value,min,max){var gap=max-min;if(value>max){value=min+(value-gap*Math.floor(value/gap))}else if(value<min){value=min+(value-gap*Math.floor(value/gap))}return value}function svgPointToSprite(point,sprite){var x=point.x;var y=point.y;var sprites=[];if(sprite){while(hasValue(sprite.parent)){sprites.push(sprite);sprite=sprite.parent}sprites.reverse();for(var i=0;i<sprites.length;i++){var sprite_1=sprites[i];var angle=sprite_1.rotation;var relativeX=x-sprite_1.pixelX-sprite_1.ex;var relativeY=y-sprite_1.pixelY-sprite_1.ey;if(sprite_1.dx){x-=sprite_1.dx}if(sprite_1.dy){y-=sprite_1.dy}var scale=sprite_1.scale;if(sprite_1.group){scale=sprite_1.group.scale}x=(cos(-angle)*relativeX-sin(-angle)*relativeY)/scale-sprite_1.pixelPaddingLeft;y=(cos(-angle)*relativeY+sin(-angle)*relativeX)/scale-sprite_1.pixelPaddingTop}}return{x,y}}function spritePointToSvg(point,sprite){var x=point.x;var y=point.y;if(sprite){while(hasValue(sprite.parent)){var angle=sprite.rotation;x+=sprite.pixelPaddingLeft+sprite.ex;y+=sprite.pixelPaddingTop+sprite.ey;var scale=sprite.scale;if(sprite.group){scale=sprite.group.scale}var relativeX=sprite.pixelX+(x*cos(angle)-y*sin(angle))*scale;var relativeY=sprite.pixelY+(x*sin(angle)+y*cos(angle))*scale;if(sprite.dx){relativeX+=sprite.dx}if(sprite.dy){relativeY+=sprite.dy}x=relativeX;y=relativeY;sprite=sprite.parent}}return{x,y}}function spritePointToSprite(point,sprite,toSprite){return svgPointToSprite(spritePointToSvg(point,sprite),toSprite)}function spriteRectToSvg(rect,sprite){var p1=spritePointToSvg(rect,sprite);var p2=spritePointToSvg({x:rect.x+rect.width,y:rect.y+rect.height},sprite);return{x:p1.x,y:p1.y,width:p2.x-p1.x,height:p2.y-p1.y}}function documentPointToSvg(point,svgContainer,cssScale){try{var bbox=svgContainer.getBoundingClientRect();if(!isNumber$1(cssScale)){cssScale=1}return{x:(point.x-bbox.left)/cssScale,y:(point.y-bbox.top)/cssScale}}catch(e){return point}}function svgPointToDocument(point,svgContainer){try{var bbox=svgContainer.getBoundingClientRect();return{x:point.x+bbox.left,y:point.y+bbox.top}}catch(e){return point}}function documentPointToSprite(point,sprite){if(sprite&&sprite.htmlContainer){var svgPoint=documentPointToSvg(point,getValue$4(sprite.htmlContainer),sprite.svgContainer.cssScale);return svgPointToSprite(svgPoint,sprite)}else{return point}}function spritePointToDocument(point,sprite){if(sprite&&sprite.htmlContainer){var svgPoint=spritePointToSvg(point,sprite);return svgPointToDocument(svgPoint,getValue$4(sprite.htmlContainer))}else{return point}}function width(element){var cs=getComputedStyle(element);var paddingX=parseFloat(cs.paddingLeft)+parseFloat(cs.paddingRight);var borderX=parseFloat(cs.borderLeftWidth)+parseFloat(cs.borderRightWidth);return element.clientWidth-paddingX-borderX}function height(element){var cs=getComputedStyle(element);var paddingY=parseFloat(cs.paddingTop)+parseFloat(cs.paddingBottom);var borderY=parseFloat(cs.borderTopWidth)+parseFloat(cs.borderBottomWidth);return element.clientHeight-paddingY-borderY}function decimalPlaces(number){var match=(""+number).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0}return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0))}var urlRegexp=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function parseUrl(url){var match=urlRegexp.exec(url);return{protocol:match&&match[1]||"",separator:match&&match[2]||"",authority:match&&match[3]||"",domain:match&&match[4]||"",port:match&&match[5]||"",path:match&&match[6]||"",query:match&&match[7]||"",hash:match&&match[8]||""}}function serializeUrl(url){return url.protocol+url.separator+url.authority+url.domain+url.port+url.path+url.query+url.hash}function isRelativeUrl(url){return url.protocol===""&&url.separator===""&&url.authority===""&&url.domain===""&&url.port===""}function joinUrl(left,right){var parsedLeft=parseUrl(left);var parsedRight=parseUrl(right);if(isRelativeUrl(parsedLeft)){throw new Error("Left URL is not absolute")}if(isRelativeUrl(parsedRight)){if(parsedRight.path!==""){if(parsedRight.path[0]==="/"){parsedLeft.path=parsedRight.path}else{var leftPath=parsedLeft.path.split(/\//);var rightPath=parsedRight.path.split(/\//);if(leftPath.length===0){if(rightPath.length!==0){leftPath.push("")}}else if(leftPath.length>1){leftPath.pop()}pushAll(leftPath,rightPath);parsedLeft.path=leftPath.join("/");if(parsedLeft.path!==""&&parsedLeft.path[0]!=="/"){throw new Error("URL path must start with /")}}}parsedLeft.query=parsedRight.query;parsedLeft.hash=parsedRight.hash;return serializeUrl(parsedLeft)}else{return serializeUrl(parsedRight)}}function isIE(){return!!window.MSInputMethodContext&&!!document.documentMode}function linear(t){return+t}registry.registeredClasses["ease.linear"]=linear;function quadIn(t){return t*t}registry.registeredClasses["ease.quadIn"]=quadIn;function quadOut(t){return t*(2-t)}registry.registeredClasses["ease.quadOut"]=quadOut;function quadInOut(t){t*=2;return(t<=1?t*t:--t*(2-t)+1)/2}registry.registeredClasses["ease.quadInOut"]=quadInOut;function polyIn(t,e){return Math.pow(t,e)}registry.registeredClasses["ease.polyIn"]=polyIn;function polyOut(t,e){return 1-Math.pow(1-t,e)}registry.registeredClasses["ease.polyOut"]=polyOut;function polyInOut(t,e){t*=2;return(t<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}registry.registeredClasses["ease.polyInOut"]=polyInOut;function polyIn3(t){return polyIn(t,3)}registry.registeredClasses["ease.polyIn3"]=polyIn3;function polyOut3(t){return polyOut(t,3)}registry.registeredClasses["ease.polyOut3"]=polyOut3;function polyInOut3(t){return polyInOut(t,3)}registry.registeredClasses["ease.polyInOut3"]=polyInOut3;function expIn(t){return Math.pow(2,10*t-10)}registry.registeredClasses["ease.expIn"]=expIn;function expOut(t){return 1-Math.pow(2,-10*t)}registry.registeredClasses["ease.expOut"]=expOut;function expInOut(t){t*=2;return(t<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}registry.registeredClasses["ease.expInOut"]=expInOut;function sinIn(t){return 1-Math.cos(t*HALFPI)}registry.registeredClasses["ease.sinIn"]=sinIn;function sinOut(t){return Math.sin(t*HALFPI)}registry.registeredClasses["ease.sinOut"]=sinOut;function sinInOut(t){return(1-Math.cos(PI*t))/2}registry.registeredClasses["ease.sinInOut"]=sinInOut;function cubicIn(t){return t*t*t}registry.registeredClasses["ease.cubicIn"]=cubicIn;function cubicOut(t){return--t*t*t+1}registry.registeredClasses["ease.cubicOut"]=cubicOut;function cubicInOut(t){t*=2;return(t<=1?t*t*t:(t-=2)*t*t+2)/2}registry.registeredClasses["ease.cubicInOut"]=cubicInOut;function circleIn(t){return 1-Math.sqrt(1-t*t)}registry.registeredClasses["ease.circleIn"]=circleIn;function circleOut(t){return Math.sqrt(1- --t*t)}registry.registeredClasses["ease.circleOut"]=circleOut;function circleInOut(t){t*=2;return(t<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}registry.registeredClasses["ease.circleInOut"]=circleInOut;var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(t){return 1-bounceOut(1-t)}registry.registeredClasses["ease.bounceIn"]=bounceIn;function bounceOut(t){t=+t;return t<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9}registry.registeredClasses["ease.bounceOut"]=bounceOut;function bounceInOut(t){t*=2;return(t<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2}registry.registeredClasses["ease.bounceInOut"]=bounceInOut;var tau=2*Math.PI;var amplitude=1;var period=.3/tau;var s$1=Math.asin(1/amplitude)*period;function elasticIn(t){return amplitude*Math.pow(2,10*--t)*Math.sin((s$1-t)/period)}registry.registeredClasses["ease.elasticIn"]=elasticIn;function elasticOut(t){return 1-amplitude*Math.pow(2,-10*(t=+t))*Math.sin((t+s$1)/period)}registry.registeredClasses["ease.elasticOut"]=elasticOut;function elasticInOut(t){t=t*2-1;return(t<0?amplitude*Math.pow(2,10*t)*Math.sin((s$1-t)/period):2-amplitude*Math.pow(2,-10*t)*Math.sin((s$1+t)/period))/2}registry.registeredClasses["ease.elasticInOut"]=elasticInOut;var SpriteState=function(_super){__extends(SpriteState,_super);function SpriteState(){var _this=_super.call(this)||this;_this.transitionDuration=0;_this.transitionEasing=cubicOut;_this.properties={};_this.propertyFields={};_this.filters=new List;_this.isTemplate=false;_this.className="SpriteState";_this._disposers.push(new ListDisposer(_this.filters));_this.applyTheme();return _this}Object.defineProperty(SpriteState.prototype,"adapter",{get:function(){var _this=this;if(!this._adapterO){this._adapterO=new Adapter(this);this._adapterO.events.on("inserted",(function(ev){_this[ev.newValue.key]=_this[ev.newValue.key]}),undefined,false);this._adapterO.events.on("removed",(function(ev){_this[ev.newValue.key]=_this[ev.newValue.key]}),undefined,false)}return this._adapterO},enumerable:true,configurable:true});SpriteState.prototype.getPropertyValue=function(propertyName){var propValue=this.properties[propertyName];var sprite=this.sprite;if(sprite){var fieldName=this.propertyFields[propertyName];if(hasValue(fieldName)){if(sprite.dataItem){propValue=sprite.dataItem.dataContext[fieldName]}if(propValue==undefined){propValue="__unset"}}if(!hasValue(propValue)){var spriteValue=sprite.getPropertyValue(propertyName);if(this._adapterO){propValue=this._adapterO.apply(propertyName,spriteValue)}else{propValue=spriteValue}if(propValue==spriteValue){propValue=undefined}}else{if(this._adapterO){propValue=this._adapterO.apply(propertyName,propValue)}}}return propValue};SpriteState.prototype.copyFrom=function(source){if(source&&source!=this){this.transitionDuration=source.transitionDuration;this.transitionEasing=source.transitionEasing;copyProperties(source.properties,this.properties);copyProperties(source.propertyFields,this.propertyFields);this.filters.copyFrom(source.filters);if(source._adapterO){this.adapter.copyFrom(source._adapterO)}}};Object.defineProperty(SpriteState.prototype,"allValues",{get:function(){var _this=this;var res={};each$1(this.properties,(function(prop,value){res[prop]=_this.getPropertyValue(prop)}));if(this._adapterO){var keys=this._adapterO.keys();each$1(keys,(function(_x,prop){var value=_this.getPropertyValue(prop);res[prop]=value}))}var propertyFields=this.propertyFields;each$1(propertyFields,(function(prop){var value=_this.getPropertyValue(prop);res[prop]=value}));return res},enumerable:true,configurable:true});SpriteState.prototype.reset=function(){this.properties={};this.filters.clear()};SpriteState.prototype.processConfig=function(config){if(hasValue(config)&&hasValue(config["properties"])){each$1(config["properties"],(function(key,value){if(isString$1(value)){if(value.match(/^[0-9.\-]+\%$/)){config["properties"][key]=percent(toNumber$1(value))}else if(value.match(/^\#[0-9abcdef]{3,}$/i)){config["properties"][key]=toColor(value)}}}))}_super.prototype.processConfig.call(this,config)};SpriteState.prototype.asFunction=function(field){return field=="transitionEasing"||_super.prototype.asIs.call(this,field)};return SpriteState}(BaseObject);registry.registeredClasses["SpriteState"]=SpriteState;var SpriteEventDispatcher=function(_super){__extends(SpriteEventDispatcher,_super);function SpriteEventDispatcher(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._interactionEvents=new Dictionary;return _this}SpriteEventDispatcher.prototype._dispatchSpriteEvent=function(ev){if(this.target.disabled||this.target.isTemplate){return}if(this.target.events.isEnabled(ev.type)){var imev=merge(ev,{target:this.target});this.target.events.dispatchImmediately(imev.type,imev)}};SpriteEventDispatcher.prototype._dispatchSpritePointEvent=function(ev){if(this.target.disabled||this.target.isTemplate){return}if(this.target.events.isEnabled(ev.type)){var imev=merge(ev,{target:this.target,spritePoint:ev.point?documentPointToSprite(ev.point,this.target):undefined,svgPoint:this.target.getSvgPoint(ev.point)});this.target.events.dispatchImmediately(imev.type,imev)}};SpriteEventDispatcher.prototype._addInteractionObjectEvent=function(type,callback,context,shouldClone){var _this=this;var key=shouldClone+"-"+type;var counter=this._interactionEvents.insertKeyIfEmpty(key,(function(){var disposer=_this.target.interactions.events.on(type,callback,context,shouldClone);return new CounterDisposer((function(){_this._interactionEvents.removeKey(key);disposer.dispose()}))}));return counter.increment()};SpriteEventDispatcher.prototype._on=function(once,type,callback,context,shouldClone,dispatch){var info=_super.prototype._on.call(this,once,type,callback,context,shouldClone,dispatch);var disposers=[info.disposer];switch(type){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":disposers.push(this._addInteractionObjectEvent(type,this._dispatchSpritePointEvent,this,shouldClone));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":disposers.push(this._addInteractionObjectEvent(type,this._dispatchSpriteEvent,this,shouldClone));break}switch(type){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=true;break;case"toggled":this.target.togglable=true;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=true;break;case"track":this.target.trackable=true;break;case"resize":this.target.resizable=true;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=true;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=true;break;case"over":this.target.hoverable=true;case"out":this.target.hoverable=true;break;case"focus":case"blur":this.target.focusable=true;break}info.disposer=new MultiDisposer(disposers);return info};return SpriteEventDispatcher}(TargetedEventDispatcher);var SVGDefaults=function(){function SVGDefaults(){}SVGDefaults.opacity=1;SVGDefaults.strokeOpacity=1;SVGDefaults.strokeWidth=1;SVGDefaults.fillOpacity=1;SVGDefaults.fill=color("#000000");SVGDefaults.stroke=color("#000000");SVGDefaults.focusable=undefined;SVGDefaults.tabindex=0;return SVGDefaults}();var options={verbose:true,commercialLicense:false,classNamePrefix:"amcharts-",autoSetClassName:false,minPolylineStep:.5,onlyShowOnViewport:false,queue:false,autoDispose:false,licenses:[],suppressErrors:false,suppressWarnings:false,animationsEnabled:true,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};function getProgressNumber(progress,from,to){return from+(to-from)*progress}function getProgressPercent(progress,from,to){return new Percent(getProgressNumber(progress,from.percent,to.percent))}function getProgressColor(progress,from,to){var color=new Color(interpolate(from.rgb,to.rgb,progress));if(from.alpha!=to.alpha){color.alpha=from.alpha+(to.alpha-from.alpha)*progress}return color}function getHybridProperty(property,type){return type+property.charAt(0).toUpperCase()+property.substr(1)}var AnimationDisposer=function(){function AnimationDisposer(array){this._disposer=new Disposer((function(){while(array.length!==0){array[0].dispose()}}))}AnimationDisposer.prototype.isDisposed=function(){return this._disposer.isDisposed()};AnimationDisposer.prototype.dispose=function(){this._disposer.dispose()};return AnimationDisposer}();var Animation=function(_super){__extends(Animation,_super);function Animation(object,animationOptions,duration,easing){var _this=_super.call(this)||this;_this.duration=0;_this.easing=linear;_this.progress=0;_this._loop=0;_this._pause=false;_this._delayTimeout=null;_this._time=0;_this._isFinished=false;_this.className="Animation";_this.object=object;_this.animationOptions=toArray$1(animationOptions);_this.duration=duration;if(easing){_this.easing=easing}_this.applyTheme();return _this}Animation.prototype.debug=function(){};Animation.prototype.dispose=function(){_super.prototype.dispose.call(this);this.pause()};Animation.prototype.delay=function(delay){var _this=this;if(delay>0){this.pause();move(this.object.animations,this);var id_1=setTimeout((function(){_this._delayTimeout=null;_this.start()}),delay);this._delayTimeout=new Disposer((function(){clearTimeout(id_1)}))}return this};Animation.prototype._start=function(){this._isFinished=false;if(this._delayTimeout){this.removeDispose(this._delayTimeout);this._delayTimeout=null}this.stopSameAnimations();this._pause=false;move(system.animations,this);move(this.object.animations,this);system.requestFrame()};Animation.prototype.start=function(){this._start();this._startTime=Date.now();this._time=0;this.staticOptions=[];for(var i=this.animationOptions.length-1;i>=0;i--){var options_1=this.animationOptions[i];if(!hasValue(options_1.from)){if(options_1.childObject){options_1.from=options_1.childObject[options_1.property]}else{options_1.from=this.object[options_1.property];if(!hasValue(options_1.from)){options_1.from=SVGDefaults[options_1.property]}}}if(options_1.from==options_1.to){remove(this.animationOptions,options_1)}else if(!hasValue(options_1.from)||!(options_1.from instanceof Percent)&&options_1.to instanceof Percent||options_1.from instanceof Percent&&!(options_1.to instanceof Percent)){this.staticOptions.push(options_1);remove(this.animationOptions,options_1)}else{if(isNumber$1(options_1.to)){options_1.updateMethod=getProgressNumber;if(options_1.from instanceof Percent){var convertedFrom=this.object[getHybridProperty(options_1.property,"pixel")];if(!isNaN(convertedFrom)){options_1.from=convertedFrom}else{this.staticOptions.push(options_1);remove(this.animationOptions,options_1)}}else if(isNaN(options_1.from)){this.staticOptions.push(options_1);remove(this.animationOptions,options_1)}}else{if(options_1.to instanceof Color){if(options_1.from){options_1.updateMethod=getProgressColor}else{this.staticOptions.push(options_1);remove(this.animationOptions,options_1)}}else if(options_1.to instanceof Percent){options_1.updateMethod=getProgressPercent;if(!isNaN(options_1.from)){var convertedFrom=this.object[getHybridProperty(options_1.property,"relative")];if(!isNaN(convertedFrom)){options_1.from=percent(convertedFrom*100)}}}else{this.staticOptions.push(options_1);remove(this.animationOptions,options_1)}}}}this.applyStaticOptions();if(this.events.isEnabled("animationstarted")){var event_1={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",event_1)}this.update();if(this.duration===0){this.end()}return this};Animation.prototype.loop=function(count){if(!isNumber$1(count)){count=Infinity}this._loop=count;return this};Animation.prototype.pause=function(){this._pause=true;if(this._delayTimeout){this.removeDispose(this._delayTimeout);this._delayTimeout=null}remove(system.animations,this);remove(this.object.animations,this);return this};Animation.prototype.resume=function(){this._start();this._startTime=Date.now()-this._time;return this};Animation.prototype.end=function(){if(this._loop==0){this.pause()}this.setProgress(1);this.applyStaticOptions();if(this.events.isEnabled("animationended")){var event_2={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",event_2)}if(this._loop>0){this._loop--;this.start()}else{this.stop();this._isFinished=true}return this};Animation.prototype.kill=function(){this.pause();this._isFinished=true};Animation.prototype.isFinished=function(){return this._isFinished};Animation.prototype.applyStaticOptions=function(){var _this=this;each$2(this.staticOptions,(function(options){if(options.childObject){options.childObject[options.property]=_this.progress==1?options.to:options.from}else{_this.object[options.property]=_this.progress==1?options.to:options.from}}))};Animation.prototype.stop=function(skipEvent){this.pause();if(!skipEvent){if(this.events.isEnabled("animationstopped")){var event_3={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",event_3)}}return this};Animation.prototype.setProgress=function(progress){var _this=this;this._time=this.duration*progress;each$2(this.animationOptions,(function(options){if(options.updateMethod&&hasValue(options.from)){var value=options.updateMethod(progress,options.from,options.to);if(options.childObject){options.childObject[options.property]=value}else{_this.object[options.property]=value}}}));this.progress=progress;if(this.events.isEnabled("animationprogress")){var event_4={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",event_4)}system.requestFrame()};Animation.prototype.update=function(){if(!this._pause){var progress=void 0;this._time=fitToRange(Date.now()-this._startTime,0,this.duration);var timeProgress=this._time/this.duration;progress=this.easing(timeProgress);if(this.duration==0||!isNumber$1(progress)||timeProgress>=1){progress=1}this.setProgress(progress);if(round$1(this._time/this.duration,6)==1){this.end()}}return this};Object.defineProperty(Animation.prototype,"delayed",{get:function(){return this._delayTimeout?true:false},enumerable:true,configurable:true});Animation.prototype.stopSameAnimations=function(){var _this=this;each$2(copy$4(this.object.animations),(function(animation){if(animation!==_this&&!animation.delayed){var killed_1=[];each$2(_this.animationOptions,(function(newOptions){each$2(animation.animationOptions,(function(oldOptions){if(newOptions.property==oldOptions.property&&newOptions.childObject==oldOptions.childObject){killed_1.push(oldOptions);if(animation.animationOptions.length==0){animation.kill()}}}))}));each$2(killed_1,(function(oldOptions){remove(animation.animationOptions,oldOptions)}))}}))};Animation.prototype.asFunction=function(field){return field=="easing"||_super.prototype.asIs.call(this,field)};return Animation}(BaseObjectEvents);var SVGNS="http://www.w3.org/2000/svg";var XMLNS="http://www.w3.org/2000/xmlns/";var XLINK="http://www.w3.org/1999/xlink";function addEventListener$1(dom,type,listener,options){dom.addEventListener(type,listener,options||false);return new Disposer((function(){dom.removeEventListener(type,listener,options||false)}))}function getElement(el){if(isString$1(el)){var e=document.getElementById(el);if(e==null){e=document.getElementsByClassName(el)[0]}if(e instanceof HTMLElement){return e}}else if(el instanceof HTMLElement){return el}}function addClass(element,className){if(!element){return}if(element.classList){var classes=className.split(" ");each$2(classes,(function(name){element.classList.add(name)}))}else{var currentClassName=element.getAttribute("class");if(currentClassName){element.setAttribute("class",currentClassName.split(" ").filter((function(item){return item!==className})).join(" ")+" "+className)}else{element.setAttribute("class",className)}}}function removeClass(element,className){if(!element){return}if(element.classList){element.classList.remove(className)}else{var currentClassName=element.getAttribute("class");if(currentClassName){element.setAttribute("class",currentClassName.split(" ").filter((function(item){return item!==className})).join(" "))}}}function setStyle(element,property,value){element.style[property]=value}function getComputedStyle$1(element,property){if(element.currentStyle){return element.currentStyle[property]}return document.defaultView.getComputedStyle(element,null).getPropertyValue(property)}function blur(){if(document.activeElement&&document.activeElement!=document.body){if(document.activeElement.blur){document.activeElement.blur()}else{var input=document.createElement("button");input.style.position="fixed";input.style.top="0px";input.style.left="-10000px";document.body.appendChild(input);input.focus();input.blur();document.body.removeChild(input)}}}function contains$2(a,b){var cursor=b;while(true){if(a===cursor){return true}else if(cursor.parentNode==null){if(cursor.host==null){return false}else{cursor=cursor.host}}else{cursor=cursor.parentNode}}}function getShadowRoot(a){var cursor=a;while(true){if(cursor.parentNode==null){if(cursor.host!=null){return cursor}else{return null}}else{cursor=cursor.parentNode}}}function getRoot(a){var owner=a.ownerDocument;var cursor=a;while(true){if(cursor.parentNode==null){if(cursor===owner||cursor.host!=null){return cursor}else{return null}}else{cursor=cursor.parentNode}}}function eventTarget(event){if(typeof event.composedPath==="function"){return event.composedPath()[0]}else{return event.target}}function fixPixelPerfect(el){readFrame((function(){try{var rect=el.getBoundingClientRect();var left_1=rect.left-Math.round(rect.left);var top_1=rect.top-Math.round(rect.top);if(left_1!==0){writeFrame((function(){el.style.left=left_1+"px"}))}if(top_1!==0){writeFrame((function(){el.style.top=top_1+"px"}))}}catch(e){}}))}var rootStylesheet;function getStylesheet(element){if(element==null){if(!hasValue(rootStylesheet)){var e=document.createElement("style");e.type="text/css";document.head.appendChild(e);rootStylesheet=e.sheet}return rootStylesheet}else{var e=document.createElement("style");e.type="text/css";element.appendChild(e);return e.sheet}}function appendStylesheet(root,selector){var index=root.cssRules.length;root.insertRule(selector+"{}",index);return root.cssRules[index]}var StyleRule=function(_super){__extends(StyleRule,_super);function StyleRule(element,selector,styles){var _this=this;var root=getStylesheet(element);_this=_super.call(this,(function(){var index=indexOf(root.cssRules,_this._rule);if(index===-1){throw new Error("Could not dispose StyleRule")}else{root.deleteRule(index)}}))||this;_this._rule=appendStylesheet(root,selector);each$1(styles,(function(key,value){_this.setStyle(key,value)}));return _this}Object.defineProperty(StyleRule.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(selector){this._rule.selectorText=selector},enumerable:true,configurable:true});StyleRule.prototype._setVendorPrefixName=function(name,value){var style=this._rule.style;style.setProperty("-webkit-"+name,value,"");style.setProperty("-moz-"+name,value,"");style.setProperty("-ms-"+name,value,"");style.setProperty("-o-"+name,value,"");style.setProperty(name,value,"")};StyleRule.prototype.setStyle=function(name,value){if(name==="transition"){this._setVendorPrefixName(name,value)}else{this._rule.style.setProperty(name,value,"")}};return StyleRule}(Disposer);var styleId=0;(function(_super){__extends(StyleClass,_super);function StyleClass(element,styles,name){var _this=this;var className=!hasValue(name)?"__style_"+ ++styleId+"__":name;_this=_super.call(this,element,"."+className,styles)||this;_this._className=className;return _this}Object.defineProperty(StyleClass.prototype,"className",{get:function(){return this._className},set:function(name){this._className=name;this.selector="."+name},enumerable:true,configurable:true});StyleClass.prototype.toString=function(){return this._className};return StyleClass})(StyleRule);function ready(f){if(document.readyState!=="loading"){f()}else{var listener_1=function(){if(document.readyState!=="loading"){document.removeEventListener("readystatechange",listener_1);f()}};document.addEventListener("readystatechange",listener_1)}}function findFont(element){var font=getComputedStyle$1(element,"font-family");if(!font){var parent_1=element.parentElement||element.parentNode;if(parent_1){return findFont(parent_1)}else{return undefined}}else{return font}}function findFontSize(element){var font=getComputedStyle$1(element,"font-size");if(!font){var parent_2=element.parentElement||element.parentNode;if(parent_2){return findFontSize(parent_2)}else{return undefined}}else{return font}}var AMElement=function(){function AMElement(element){this._isDisposed=false;this._x=0;this._y=0;this._rotationY=0;this._rotationX=0;this._rotation=0;this._scale=1;if(typeof element==="string"){this.node=document.createElementNS(SVGNS,element)}else{this.node=element}}AMElement.prototype.removeNode=function(){if(this.node){if(this.node.parentNode){this.node.parentNode.removeChild(this.node)}}};Object.defineProperty(AMElement.prototype,"transformString",{get:function(){if(this.node){return this._transformString}},enumerable:true,configurable:true});AMElement.prototype.transform=function(){var transfromString="translate("+this._x+","+this._y+")";if(this._scale!=1){transfromString+=(transfromString?" ":"")+"scale("+this._scale+")"}if(this._rotation!=0){var rotateString="rotate("+this._rotation+")";if(this._rotationX&&this._rotationY){rotateString="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"}transfromString+=(transfromString?" ":"")+rotateString}this._transformString=transfromString;this.node.setAttribute("transform",transfromString)};AMElement.prototype.getBBox=function(){var bbox={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode){try{var svgbbox=this.node.getBBox();bbox.x=svgbbox.x;bbox.y=svgbbox.y;bbox.width=svgbbox.width;bbox.height=svgbbox.height}catch(err){}}return bbox};AMElement.prototype.moveTo=function(point){if(point){var x=point.x;var y=point.y;if(this._x!=x||this._y!=y){this._x=x;this._y=y;this.transform()}}};Object.defineProperty(AMElement.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(value){this.node.innerHTML=value},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(value){this.node.textContent=value},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"x",{get:function(){return this._x},set:function(value){if(this._x!=value){this._x=value;this.transform()}},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"y",{get:function(){return this._y},set:function(value){if(this._y!=value){this._y=value;this.transform()}},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"rotation",{get:function(){return this._rotation},set:function(angle){if(this._rotation!=angle){this._rotation=angle;this.transform()}},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"rotationX",{get:function(){return this._rotationX},set:function(x){if(this._rotationX!=x){this._rotationX=x;this.transform()}},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"rotationY",{get:function(){return this._rotationY},set:function(y){if(this._rotationY!=y){this._rotationY=y;this.transform()}},enumerable:true,configurable:true});Object.defineProperty(AMElement.prototype,"scale",{get:function(){return this._scale},set:function(value){if(this._scale!=value){this._scale=value;this.transform()}},enumerable:true,configurable:true});AMElement.prototype.removeAttr=function(attribute){this.node.removeAttribute(attribute)};AMElement.prototype.attr=function(attributes){var _this=this;each$1(attributes,(function(attributeName,attributeValue){if(!hasValue(attributeValue)){_this.node.removeAttribute(attributeName)}else{_this.node.setAttribute(attributeName,attributeValue)}}));return this};AMElement.prototype.getAttr=function(attribute){return this.node.getAttribute(attribute)};AMElement.prototype.attrNS=function(ns,attribute,value){this.node.setAttributeNS(ns,attribute,value);return this};AMElement.prototype.getAttrNS=function(ns,attribute){return this.node.getAttributeNS(ns,attribute)};AMElement.prototype.removeStyle=function(attribute){this.node.style[attribute]=null;delete this.node.style[attribute]};AMElement.prototype.getStyle=function(attribute){return this.node.style[attribute]};AMElement.prototype.addStyle=function(attributes){var _this=this;each$1(attributes,(function(attributeName,attributeValue){if(!hasValue(attributeValue)){_this.removeStyle(attributeName)}else{_this.node.style[attributeName]=attributeValue}}));return this};AMElement.prototype.addClass=function(name){addClass(this.node,name)};AMElement.prototype.removeClass=function(name){removeClass(this.node,name)};AMElement.prototype.setClass=function(name){this.node.setAttribute("class",name)};AMElement.prototype.removeChildNodes=function(){while(this.node.childNodes.length>0){this.node.removeChild(this.node.firstChild)}};AMElement.prototype.isDisposed=function(){return this._isDisposed};AMElement.prototype.dispose=function(){this.removeNode()};return AMElement}();var Group=function(_super){__extends(Group,_super);function Group(elementName){return _super.call(this,elementName)||this}Group.prototype.add=function(element){if(element){this.node.appendChild(element.node)}};Group.prototype.addToBack=function(element){if(element){var first=this.node.childNodes[0];if(first){if(first!=element.node){this.node.insertBefore(element.node,first)}}else{this.node.appendChild(element.node)}}};Group.prototype.removeElement=function(element){if(element){try{if(element.node&&element.node.parentNode==this.node){this.node.removeChild(element.node)}}catch(err){}}};Group.prototype.hasChild=function(element){for(var i=0;i<this.node.childNodes.length;i++){if(this.node.childNodes[i]==element.node){return true}}return false};Object.defineProperty(Group.prototype,"content",{get:function(){return this.node.innerHTML},set:function(value){this.node.innerHTML=value},enumerable:true,configurable:true});Group.prototype.removeChildren=function(){if(this.node.childNodes){while(this.node.childNodes.length>0){var childNode=this.node.firstChild;if(childNode&&childNode.parentNode){childNode.parentNode.removeChild(childNode)}}}};Group.prototype.removeChildrenByTag=function(tag){if(this.node.childNodes){var remove=this.node.getElementsByTagName(tag);for(var i=0;i<remove.length;i++){this.node.removeChild(remove[i])}}};return Group}(AMElement);var InterfaceColorSet=function(_super){__extends(InterfaceColorSet,_super);function InterfaceColorSet(){var _this=_super.call(this)||this;_this._purposes={stroke:color("#e5e5e5"),fill:color("#f3f3f3"),primaryButton:color("#6794dc"),primaryButtonHover:color("#6771dc"),primaryButtonDown:color("#68dc75"),primaryButtonActive:color("#68dc75"),primaryButtonText:color("#FFFFFF"),primaryButtonStroke:color("#FFFFFF"),secondaryButton:color("#d9d9d9"),secondaryButtonHover:color("#d9d9d9").brighten(-.25),secondaryButtonDown:color("#d9d9d9").brighten(-.35),secondaryButtonActive:color("#d9d9d9").brighten(.35),secondaryButtonText:color("#000000"),secondaryButtonStroke:color("#FFFFFF"),grid:color("#000000"),background:color("#ffffff"),alternativeBackground:color("#000000"),text:color("#000000"),alternativeText:color("#FFFFFF"),disabledBackground:color("#999999"),positive:color("#67dc75"),negative:color("#dc6788")};_this.className="InterfaceColorSet";_this.applyTheme();return _this}InterfaceColorSet.prototype.debug=function(){};InterfaceColorSet.prototype.getFor=function(purpose){return this._purposes[purpose]};InterfaceColorSet.prototype.setFor=function(purpose,color){this._purposes[purpose]=color};return InterfaceColorSet}(BaseObject);registry.registeredClasses["InterfaceColorSet"]=InterfaceColorSet;var rules$4=new Dictionary;function popupCSS(element,prefix){if(!prefix){prefix="ampopup"}var cs=new InterfaceColorSet;var fg=cs.getFor("text");var bg=cs.getFor("background");bg.alpha=.8;var abg=cs.getFor("alternativeBackground");abg.alpha=.05;var counter=rules$4.insertKeyIfEmpty(prefix,(function(){var disposer=new MultiDisposer([new StyleRule(element,"."+prefix,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new StyleRule(element,"."+prefix+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":bg.hex,opacity:"0.5"}),new StyleRule(element,"."+prefix+"-header",{display:"block",width:"100%","min-height":"1.8em",background:abg.rgba}),new StyleRule(element,"."+prefix+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new StyleRule(element,"."+prefix+"-content",{background:bg.hex,"background-color":bg.rgba,color:fg.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new StyleRule(element,"."+prefix+"-inside",{padding:"1em"}),new StyleRule(element,"."+prefix+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new CounterDisposer((function(){rules$4.removeKey(prefix);disposer.dispose()}))}));return counter.increment()}var InteractionObjectEventDispatcher=function(_super){__extends(InteractionObjectEventDispatcher,_super);function InteractionObjectEventDispatcher(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._domEvents={};return _this}InteractionObjectEventDispatcher.prototype._addDOMEvent=function(type,key,listener,context){var _this=this;if(!this._domEvents[type]){var callback_1=function(e){listener.call(context,key,e)};this.target.element.addEventListener(type,callback_1,false);this._domEvents[type]=new CounterDisposer((function(){delete _this._domEvents[type];_this.target.element.removeEventListener(type,callback_1,false)}))}return this._domEvents[type].increment()};InteractionObjectEventDispatcher.prototype._dispatchKeyboardEvent=function(key,ev){if(this.target.events.isEnabled(key)){this.target.events.dispatchImmediately(key,{type:key,target:this.target,event:ev})}};InteractionObjectEventDispatcher.prototype._on=function(once,type,callback,context,shouldClone,dispatch){var info=_super.prototype._on.call(this,once,type,callback,context,shouldClone,dispatch);var disposers=[info.disposer];switch(type){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=true;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=true;break;case"track":this.target.trackable=true;break;case"resize":this.target.resizable=true;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=true;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=true;break;case"over":case"out":this.target.hoverable=true;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=true;break;case"keydown":disposers.push(this._addDOMEvent(type,type,this._dispatchKeyboardEvent,this));break;case"keyup":disposers.push(this._addDOMEvent(type,type,this._dispatchKeyboardEvent,this));break;case"keypress":disposers.push(this._addDOMEvent(type,type,this._dispatchKeyboardEvent,this));break;case"input":disposers.push(this._addDOMEvent(type,type,this._dispatchKeyboardEvent,this));break}info.disposer=new MultiDisposer(disposers);return info};return InteractionObjectEventDispatcher}(TargetedEventDispatcher);var InteractionObject=function(_super){__extends(InteractionObject,_super);function InteractionObject(element){var _this=_super.call(this)||this;_this._eventDispatcher=new InteractionObjectEventDispatcher(_this);_this.eventDisposers=new Dictionary;_this.replacedStyles=new Dictionary;_this._clickable=false;_this._contextMenuDisabled=false;_this._hoverable=false;_this._trackable=false;_this._draggable=false;_this._swipeable=false;_this._resizable=false;_this._wheelable=false;_this._inert=false;_this._isHover=false;_this.isRealHover=false;_this._isHoverByTouch=false;_this._isDown=false;_this._isFocused=false;_this._isTouchProtected=false;_this._inertiaOptions=new Dictionary;_this.inertias=new Dictionary;_this._hitOptions={};_this._hoverOptions={};_this._swipeOptions={};_this._keyboardOptions={};_this._mouseOptions={};_this._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]};_this._disposers.push(_this._eventDispatcher);_this._element=element;_this.className="InteractionObject";_this._disposers.push(new DictionaryDisposer(_this.inertias));_this._disposers.push(new DictionaryDisposer(_this.eventDisposers));_this.applyTheme();return _this}Object.defineProperty(InteractionObject.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"isHover",{get:function(){return this._isHover},set:function(value){if(this.isHover!=value){this._isHover=value;if(value){getInteraction().overObjects.moveValue(this)}else{this.isRealHover=false;getInteraction().overObjects.removeValue(this)}}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(value){if(this.isHoverByTouch!=value){this._isHoverByTouch=value}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"overPointers",{get:function(){if(!this._overPointers){this._overPointers=new List}return this._overPointers},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"isDown",{get:function(){return this._isDown},set:function(value){if(this.isDown!=value){this._isDown=value;if(value){getInteraction().downObjects.moveValue(this)}else{getInteraction().downObjects.removeValue(this)}}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"downPointers",{get:function(){if(!this._downPointers){this._downPointers=new List}return this._downPointers},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"isFocused",{get:function(){return this._isFocused},set:function(value){if(this.isFocused!=value){this._isFocused=value;if(value){getInteraction().focusedObject=this}else{getInteraction().focusedObject=undefined}}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(value){if(this._isTouchProtected!=value){this._isTouchProtected=value;if(value){getInteraction().unprepElement(this)}else if(this.draggable||this.swipeable||this.trackable||this.resizable){getInteraction().prepElement(this)}}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"clickable",{get:function(){return this._clickable},set:function(value){if(this._clickable!==value){this._clickable=value;getInteraction().processClickable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(value){if(this._contextMenuDisabled!==value){this._contextMenuDisabled=value;getInteraction().processContextMenu(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"hoverable",{get:function(){return this._hoverable},set:function(value){if(this._hoverable!==value){this._hoverable=value;getInteraction().processHoverable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"trackable",{get:function(){return this._trackable},set:function(value){if(this._trackable!==value){this._trackable=value;getInteraction().processTrackable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"draggable",{get:function(){return this._draggable},set:function(value){if(this._draggable!==value){this._draggable=value;getInteraction().processDraggable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"swipeable",{get:function(){return this._swipeable},set:function(value){if(this._swipeable!==value){this._swipeable=value;getInteraction().processSwipeable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"resizable",{get:function(){return this._resizable},set:function(value){if(this._resizable!==value){this._resizable=value;getInteraction().processResizable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"wheelable",{get:function(){return this._wheelable},set:function(value){if(this._wheelable!==value){this._wheelable=value;getInteraction().processWheelable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"inert",{get:function(){return this._inert},set:function(value){if(this._inert!==value){this._inert=value}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"focusable",{get:function(){return this._focusable},set:function(value){if(this._focusable!==value){this._focusable=value;if(this._focusable&&this.tabindex==-1){this._tabindex=1}getInteraction().processFocusable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"tabindex",{get:function(){return getValueDefault(this._tabindex,-1)},set:function(value){if(this._tabindex!==value){this._tabindex=value;if(value>-1){this.focusable=true}getInteraction().processFocusable(this)}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"element",{get:function(){return this._element},set:function(element){this._element=element},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(value){this._originalPosition=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"originalScale",{get:function(){return getValueDefault(this._originalScale,1)},set:function(value){if(this._originalScale!==value){this._originalScale=value}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"originalAngle",{get:function(){return getValueDefault(this._originalAngle,0)},set:function(value){if(this._originalAngle!==value){this._originalAngle=value}},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"inertiaOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions)}else{return this._inertiaOptions}},set:function(value){this._inertiaOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"hitOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("hitOptions",this._hitOptions)}else{return this._hitOptions}},set:function(value){this._hitOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"hoverOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("hoverOptions",this._hoverOptions)}else{return this._hoverOptions}},set:function(value){this._hoverOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"swipeOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("swipeOptions",this._swipeOptions)}else{return this._swipeOptions}},set:function(value){this._swipeOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"keyboardOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions)}else{return this._keyboardOptions}},set:function(value){this._keyboardOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"mouseOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("mouseOptions",this._mouseOptions)}else{return this._mouseOptions}},set:function(value){this._mouseOptions=value},enumerable:true,configurable:true});Object.defineProperty(InteractionObject.prototype,"cursorOptions",{get:function(){if(this.sprite&&this.sprite._adapterO){return this.sprite._adapterO.apply("cursorOptions",this._cursorOptions)}else{return this._cursorOptions}},set:function(value){this._cursorOptions=value},enumerable:true,configurable:true});InteractionObject.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.inertiaOptions=source.inertiaOptions;this.hitOptions=source.hitOptions;this.hoverOptions=source.hoverOptions;this.swipeOptions=source.swipeOptions;this.keyboardOptions=source.keyboardOptions;this.cursorOptions=source.cursorOptions;this.contextMenuDisabled=source.contextMenuDisabled;getInteraction().applyCursorOverStyle(this)};InteractionObject.prototype.setEventDisposer=function(key,value,f){var disposer=this.eventDisposers.getKey(key);if(value){if(disposer==null){this.eventDisposers.setKey(key,f())}}else{if(disposer!=null){disposer.dispose();this.eventDisposers.removeKey(key)}}};InteractionObject.prototype.dispose=function(){_super.prototype.dispose.call(this);var interaction=getInteraction();interaction.overObjects.removeValue(this);interaction.downObjects.removeValue(this);interaction.trackedObjects.removeValue(this);interaction.transformedObjects.removeValue(this);if(this.isHover&&this.wheelable){interaction.unlockWheel()}if(interaction.focusedObject===this){interaction.focusedObject=undefined}};return InteractionObject}(BaseObjectEvents);var InteractionKeyboardObject=function(){function InteractionKeyboardObject(io,ev){this._disposed=false;this.directionX=0;this.directionY=0;this.interaction=io;this.keyboardEvent=ev;this._startedOn=(new Date).getTime();getInteraction().processDragStart(io);system.animations.push(this);this.update()}InteractionKeyboardObject.prototype.update=function(){var io=this.interaction;var speed=getInteraction().getKeyboardOption(io,"speed"),accelleration=getInteraction().getKeyboardOption(io,"accelleration"),accellerationDelay=getInteraction().getKeyboardOption(io,"accellerationDelay"),shift={x:0,y:0};if(this.keyboardEvent.shiftKey){speed*=.5;accelleration=1}else if(this.keyboardEvent.ctrlKey){speed*=2}var ms=(new Date).getTime()-this._startedOn;var accelleratedMs=ms-accellerationDelay;if(accelleration>0&&accelleratedMs>0){var accellerationFactor=ms/accellerationDelay;ms=accellerationDelay;shift.x+=this.directionX*(speed*accelleration*accellerationFactor*accelleratedMs);shift.y+=this.directionY*(speed*accelleration*accellerationFactor*accelleratedMs)}shift.x+=this.directionX*(speed*ms);shift.y+=this.directionY*(speed*ms);getInteraction().handleTransformMove(io,shift,{x:0,y:0},this.keyboardEvent,true,false)};InteractionKeyboardObject.prototype.isDisposed=function(){return this._disposed};InteractionKeyboardObject.prototype.dispose=function(){if(!this._disposed){getInteraction().processDragStop(this.interaction);remove(system.animations,this)}};return InteractionKeyboardObject}();var Inertia=function(_super){__extends(Inertia,_super);function Inertia(interaction,type,point,startPoint){var _this=_super.call(this)||this;_this.animations=[];_this.className="Inertia";_this.interaction=interaction;_this.type=type;_this.point=point;_this.startPoint=startPoint;_this._disposers.push(new AnimationDisposer(_this.animations));return _this}Object.defineProperty(Inertia.prototype,"x",{get:function(){return this.point.x},set:function(value){if(isNumber$1(value)){this.point.x=value;this.handleMove()}},enumerable:true,configurable:true});Object.defineProperty(Inertia.prototype,"y",{get:function(){return this.point.y},set:function(value){if(isNumber$1(value)){this.point.y=value;this.handleMove()}},enumerable:true,configurable:true});Inertia.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var imev={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:false};this.interaction.events.dispatchImmediately("drag",imev)}};Inertia.prototype.done=function(){this.interaction.inertias.removeKey(this.type);if(this.type==="move"){getInteraction().processDragStop(this.interaction)}this.dispose()};return Inertia}(BaseObject);var Keyboard=function(){function Keyboard(){}Keyboard.prototype.getEventKey=function(ev){var code=ev.keyCode||ev.which,key;switch(code){case 38:key="up";break;case 40:key="down";break;case 37:key="left";break;case 39:key="right";break;case 13:key="enter";break;case 27:key="esc";break;case 36:key="home";break;case 35:key="end";break;case 9:key="tab";break;case 17:key="ctrl";break;case 18:key="alt";break;case 16:key="shift";break;case 32:key="space";break;case 36:key="home";break;case 35:key="end";break;case 33:key="pgup";break;case 34:key="pgdn";break;case 45:key="ins";break;case 46:key="del";break;case 107:key="plus";break;case 109:key="minus";break;default:key="other";break}return key};Keyboard.prototype.isKey=function(ev,key){var eventKey=this.getEventKey(ev);if(isString$1(key)){key=[key]}return key.indexOf(eventKey)!==-1};Keyboard.prototype.shiftKey=function(ev){return ev.shiftKey};Keyboard.prototype.ctrlKey=function(ev){return ev.ctrlKey};Keyboard.prototype.altKey=function(ev){return ev.altKey};Keyboard.prototype.metaKey=function(ev){return ev.metaKey};return Keyboard}();var keyboard=new Keyboard;var timeUnitDurations={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function getNextUnit(unit){switch(unit){case"year":return;case"month":return"year";case"week":return"month";case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function getDuration(unit,count){if(!hasValue(count)){count=1}return timeUnitDurations[unit]*count}function now$3(){return new Date}function getTime(){return now$3().getTime()}function copy$2(date){return new Date(date.getTime())}function checkChange(dateOne,dateTwo,unit,utc){dateOne=new Date(dateOne.getTime());dateTwo=new Date(dateTwo.getTime());var timeZoneOffset1=0;var timeZoneOffset2=0;if(!utc&&unit!="millisecond"){timeZoneOffset1=dateOne.getTimezoneOffset();dateOne.setUTCMinutes(dateOne.getUTCMinutes()-timeZoneOffset1);timeZoneOffset2=dateTwo.getTimezoneOffset();dateTwo.setUTCMinutes(dateTwo.getUTCMinutes()-timeZoneOffset2)}var changed=false;switch(unit){case"year":if(dateOne.getUTCFullYear()!=dateTwo.getUTCFullYear()){changed=true}break;case"month":if(dateOne.getUTCFullYear()!=dateTwo.getUTCFullYear()){changed=true}else if(dateOne.getUTCMonth()!=dateTwo.getUTCMonth()){changed=true}break;case"day":if(dateOne.getUTCMonth()!=dateTwo.getUTCMonth()){changed=true}else if(dateOne.getUTCDate()!=dateTwo.getUTCDate()){changed=true}break;case"hour":if(dateOne.getUTCHours()!=dateTwo.getUTCHours()){changed=true}break;case"minute":if(dateOne.getUTCMinutes()!=dateTwo.getUTCMinutes()){changed=true}break;case"second":if(dateOne.getUTCSeconds()!=dateTwo.getUTCSeconds()){changed=true}break;case"millisecond":if(dateOne.getTime()!=dateTwo.getTime()){changed=true}break}if(changed){return true}var nextUnit=getNextUnit(unit);if(nextUnit){dateOne.setUTCMinutes(dateOne.getUTCMinutes()+timeZoneOffset1);dateTwo.setUTCMinutes(dateTwo.getUTCMinutes()+timeZoneOffset2);return checkChange(dateOne,dateTwo,nextUnit,utc)}else{return false}}function add(date,unit,count,utc){var timeZoneOffset=0;if(!utc&&unit!="millisecond"){timeZoneOffset=date.getTimezoneOffset();date.setUTCMinutes(date.getUTCMinutes()-timeZoneOffset)}switch(unit){case"day":var day=date.getUTCDate();date.setUTCDate(day+count);break;case"second":var seconds=date.getUTCSeconds();date.setUTCSeconds(seconds+count);break;case"millisecond":var milliseconds=date.getUTCMilliseconds();date.setUTCMilliseconds(milliseconds+count);break;case"hour":var hours=date.getUTCHours();date.setUTCHours(hours+count);break;case"minute":var minutes=date.getUTCMinutes();date.setUTCMinutes(minutes+count);break;case"year":var year=date.getUTCFullYear();date.setUTCFullYear(year+count);break;case"month":var month=date.getUTCMonth();date.setUTCMonth(month+count);break;case"week":var wday=date.getUTCDate();date.setUTCDate(wday+count*7);break}if(!utc&&unit!="millisecond"){date.setUTCMinutes(date.getUTCMinutes()+timeZoneOffset);if(unit=="day"||unit=="week"||unit=="month"||unit=="year"){var newTimeZoneOffset=date.getTimezoneOffset();if(newTimeZoneOffset!=timeZoneOffset){var diff=newTimeZoneOffset-timeZoneOffset;date.setUTCMinutes(date.getUTCMinutes()+diff);if(date.getTimezoneOffset()!=newTimeZoneOffset){date.setUTCMinutes(date.getUTCMinutes()-diff)}}}}return date}function round(date,unit,count,firstDateOfWeek,utc,firstDate,roundMinutes,timezone){if(roundMinutes===void 0){roundMinutes=0}if(!isNumber$1(count)){count=1}var timeZoneOffset=0;if(timezone&&["day","month","week","year"].indexOf(unit)!=-1){date=setTimezone(date,timezone)}if(!utc&&unit!="millisecond"){timeZoneOffset=date.getTimezoneOffset();date.setUTCMinutes(date.getUTCMinutes()-timeZoneOffset)}switch(unit){case"day":var day=date.getUTCDate();if(count>1){if(firstDate){firstDate=round(firstDate,"day",1);var difference=date.getTime()-firstDate.getTime();var unitCount=Math.floor(difference/getDuration("day")/count);var duration=getDuration("day",unitCount*count);date.setTime(firstDate.getTime()+duration-timeZoneOffset*getDuration("minute"))}}else{date.setUTCDate(day)}date.setUTCHours(0,0,0,0);break;case"second":var seconds=date.getUTCSeconds();if(count>1){seconds=Math.floor(seconds/count)*count}date.setUTCSeconds(seconds,0);break;case"millisecond":if(count==1){return date}var milliseconds=date.getUTCMilliseconds();milliseconds=Math.floor(milliseconds/count)*count;date.setUTCMilliseconds(milliseconds);break;case"hour":var hours=date.getUTCHours();if(count>1){hours=Math.floor(hours/count)*count}date.setUTCHours(hours,roundMinutes,0,0);break;case"minute":var minutes=date.getUTCMinutes();milliseconds=date.getUTCMilliseconds();if(count>1){minutes=Math.floor(minutes/count)*count}date.setUTCMinutes(minutes,0,0);break;case"month":var month=date.getUTCMonth();if(count>1){month=Math.floor(month/count)*count}date.setUTCMonth(month,1);date.setUTCHours(0,roundMinutes,0,0);break;case"year":var year=date.getUTCFullYear();if(count>1){year=Math.floor(year/count)*count}date.setUTCFullYear(year,0,1);date.setUTCHours(0,roundMinutes,0,0);break;case"week":var wday=date.getUTCDate();var weekDay=date.getUTCDay();if(!isNumber$1(firstDateOfWeek)){firstDateOfWeek=1}if(weekDay>=firstDateOfWeek){wday=wday-weekDay+firstDateOfWeek}else{wday=wday-(7+weekDay)+firstDateOfWeek}date.setUTCDate(wday);date.setUTCHours(0,roundMinutes,0,0);break}if(!utc&&unit!="millisecond"){date.setUTCMinutes(date.getUTCMinutes()+timeZoneOffset);if(unit=="day"||unit=="week"||unit=="month"||unit=="year"){var newTimeZoneOffset=date.getTimezoneOffset();if(newTimeZoneOffset!=timeZoneOffset){var diff=newTimeZoneOffset-timeZoneOffset;date.setUTCMinutes(date.getUTCMinutes()+diff)}}}return date}function setTimezone(date,timezone){var d=new Date(date.toLocaleString("en-US",{timeZone:timezone}));return d}function getTimezoneMinutes(timezone){var d=new Date;d.setHours(0,0,0,0);var d2=setTimezone(d,timezone);return d2.getMinutes()}var Interaction=function(_super){__extends(Interaction,_super);function Interaction(){var _this=_super.call(this)||this;_this._globalEventsAdded=false;_this._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"};_this._usePointerEventsOnly=false;_this._useTouchEventsOnly=false;_this._addHoverEvents=true;_this._passiveSupported=false;_this._delayedEvents={out:[]};_this.overObjects=new List;_this.downObjects=new List;_this.trackedObjects=new List;_this.transformedObjects=new List;_this.pointers=new Dictionary;_this.inertiaOptions=new Dictionary;_this.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:true};_this.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3};_this.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30};_this.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3};_this.mouseOptions={sensitivity:1};_this.className="Interaction";_this.body=_this.getInteraction(document.body);_this._disposers.push(_this.body);if(window.hasOwnProperty("PointerEvent")){_this._pointerEvents.pointerdown="pointerdown";_this._pointerEvents.pointerup="pointerup";_this._pointerEvents.pointermove="pointermove";_this._pointerEvents.pointercancel="pointercancel";_this._pointerEvents.pointerover="pointerover";_this._pointerEvents.pointerout="pointerout"}else if(window.hasOwnProperty("MSPointerEvent")){_this._pointerEvents.pointerdown="MSPointerDown";_this._pointerEvents.pointerup="MSPointerUp";_this._pointerEvents.pointermove="MSPointerMove";_this._pointerEvents.pointercancel="MSPointerUp";_this._pointerEvents.pointerover="MSPointerOver";_this._pointerEvents.pointerout="MSPointerOut"}else if(typeof matchMedia!=="undefined"&&matchMedia("(pointer:fine)").matches){if("ontouchstart"in window){_this._addHoverEvents=false;_this._useTouchEventsOnly=true}}else if(window.navigator.userAgent.match(/MSIE /)){_this._usePointerEventsOnly=true}else if(_this.fullFF()){_this._usePointerEventsOnly=true}else{_this._useTouchEventsOnly=true}if("onwheel"in document.createElement("div")){_this._pointerEvents.wheel="wheel"}else if(hasValue(document.onmousewheel)){_this._pointerEvents.wheel="mousewheel"}_this.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:polyOut3});_this.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:polyOut3});_this._passiveSupported=Interaction.passiveSupported;_this.applyTheme();return _this}Interaction.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)};Interaction.prototype.debug=function(){};Interaction.prototype.addGlobalEvents=function(){var _this=this;if(!this._globalEventsAdded){if(!this._useTouchEventsOnly){this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerdown,(function(ev){_this.handleGlobalPointerDown(ev)})));this._disposers.push(addEventListener$1(document,this._pointerEvents.pointermove,(function(ev){_this.handleGlobalPointerMove(ev)})));this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerup,(function(ev){_this.handleGlobalPointerUp(ev)})));this._disposers.push(addEventListener$1(document,this._pointerEvents.pointercancel,(function(ev){_this.handleGlobalPointerUp(ev,true)})));this._disposers.push(addEventListener$1(document,"mouseenter",(function(ev){if(!hasValue(ev.relatedTarget)&&(ev.buttons==0||ev.which==0)){_this.handleDocumentLeave(ev)}})))}if(!this._usePointerEventsOnly){this._disposers.push(addEventListener$1(document,"touchstart",(function(ev){_this.handleGlobalTouchStart(ev)})));this._disposers.push(addEventListener$1(document,"touchmove",(function(ev){_this.handleGlobalTouchMove(ev)})));this._disposers.push(addEventListener$1(document,"touchend",(function(ev){_this.handleGlobalTouchEnd(ev)})))}this._disposers.push(addEventListener$1(document,"keydown",(function(ev){_this.handleGlobalKeyDown(ev)})));this._disposers.push(addEventListener$1(document,"keyup",(function(ev){_this.handleGlobalKeyUp(ev)})));this._globalEventsAdded=true}};Interaction.prototype.processClickable=function(io){this.processTouchable(io)};Interaction.prototype.processContextMenu=function(io){if(io.contextMenuDisabled){if(!io.eventDisposers.hasKey("contextMenuDisabled")){io.eventDisposers.setKey("contextMenuDisabled",addEventListener$1(io.element,"contextmenu",(function(e){e.preventDefault()})))}}else{if(io.eventDisposers.hasKey("contextMenuDisabled")){io.eventDisposers.getKey("contextMenuDisabled").dispose()}}};Interaction.prototype.processHoverable=function(io){var _this=this;if(io.hoverable||io.trackable){this.addGlobalEvents();this.applyCursorOverStyle(io);if(!io.eventDisposers.hasKey("hoverable")&&this._addHoverEvents){io.eventDisposers.setKey("hoverable",new MultiDisposer([addEventListener$1(io.element,this._pointerEvents.pointerout,(function(e){return _this.handlePointerOut(io,e)})),addEventListener$1(io.element,this._pointerEvents.pointerover,(function(e){return _this.handlePointerOver(io,e)}))]))}}else{var disposer=io.eventDisposers.getKey("hoverable");if(disposer!=null){disposer.dispose();io.eventDisposers.removeKey("hoverable")}}this.processTouchable(io)};Interaction.prototype.processMovable=function(io){if(io.draggable||io.swipeable||io.trackable||io.resizable){if(!this.isGlobalElement(io)&&!io.isTouchProtected){this.prepElement(io)}this.applyCursorOverStyle(io)}this.processTouchable(io)};Interaction.prototype.processTrackable=function(io){this.processHoverable(io);this.processMovable(io);if(io.trackable){this.trackedObjects.moveValue(io)}else{this.trackedObjects.removeValue(io)}};Interaction.prototype.processDraggable=function(io){this.processMovable(io)};Interaction.prototype.processSwipeable=function(io){this.processMovable(io)};Interaction.prototype.processResizable=function(io){this.processMovable(io)};Interaction.prototype.processWheelable=function(io){var _this=this;if(io.wheelable){if(!io.eventDisposers.hasKey("wheelable")){io.eventDisposers.setKey("wheelable",new MultiDisposer([addEventListener$1(io.element,this._pointerEvents.wheel,(function(e){return _this.handleMouseWheel(io,e)}),this._passiveSupported?{passive:false}:false),io.events.on("out",(function(e){if(io.wheelable){_this.unlockWheel()}})),io.events.on("over",(function(e){if(io.wheelable){_this.lockWheel()}}))]))}}else{var disposer=io.eventDisposers.getKey("wheelable");if(disposer!=null){disposer.dispose();io.eventDisposers.removeKey("wheelable")}}};Interaction.prototype.processFocusable=function(io){var _this=this;if(io.focusable===true&&io.tabindex>-1&&!this._useTouchEventsOnly){if(!io.eventDisposers.hasKey("focusable")){io.eventDisposers.setKey("focusable",new MultiDisposer([addEventListener$1(io.element,"focus",(function(e){return _this.handleFocus(io,e)})),addEventListener$1(io.element,"blur",(function(e){return _this.handleBlur(io,e)})),addEventListener$1(io.element,this._pointerEvents.pointerdown,(function(e){return _this.handleFocusBlur(io,e)})),addEventListener$1(io.element,"touchstart",(function(e){return _this.handleFocusBlur(io,e)}),this._passiveSupported?{passive:false}:false)]))}}else{var disposer=io.eventDisposers.getKey("focusable");if(disposer!=null){disposer.dispose();io.eventDisposers.removeKey("focusable")}}};Interaction.prototype.processTouchable=function(io){var _this=this;if(io.clickable||io.hoverable||io.trackable||io.draggable||io.swipeable||io.resizable){this.addGlobalEvents();if(!io.eventDisposers.hasKey("touchable")){if(!this._useTouchEventsOnly&&!this._usePointerEventsOnly){io.eventDisposers.setKey("touchable",new MultiDisposer([addEventListener$1(io.element,this._pointerEvents.pointerdown,(function(e){return _this.handlePointerDown(io,e)})),addEventListener$1(io.element,"touchstart",(function(e){return _this.handleTouchDown(io,e)}),this._passiveSupported?{passive:false}:false)]))}else if(!this._useTouchEventsOnly){io.eventDisposers.setKey("touchable",addEventListener$1(io.element,this._pointerEvents.pointerdown,(function(e){return _this.handlePointerDown(io,e)})))}else if(!this._usePointerEventsOnly){io.eventDisposers.setKey("touchable",addEventListener$1(io.element,"touchstart",(function(e){return _this.handleTouchDown(io,e)}),this._passiveSupported?{passive:false}:false))}}}else{var disposer=io.eventDisposers.getKey("touchable");if(disposer!=null){disposer.dispose();io.eventDisposers.removeKey("touchable")}}};Interaction.prototype.handleFocus=function(io,ev){if(!io.focusable){ev.preventDefault();return}io.isFocused=true;if(io.events.isEnabled("focus")&&!system.isPaused){var imev={type:"focus",target:io,event:ev};io.events.dispatchImmediately("focus",imev)}};Interaction.prototype.handleFocusBlur=function(io,ev){if(io.focusable!==false&&this.getHitOption(io,"noFocus")){io.events.once("focus",(function(){io.events.disableType("blur");blur();if(io.sprite){io.sprite.handleBlur()}io.events.enableType("blur")}))}};Interaction.prototype.handleBlur=function(io,ev){if(!io.focusable){ev.preventDefault();return}io.isFocused=false;if(io.events.isEnabled("blur")&&!system.isPaused){var imev={type:"blur",target:io,event:ev};io.events.dispatchImmediately("blur",imev)}};Interaction.prototype.handleGlobalKeyDown=function(ev){if(this.focusedObject){if(keyboard.isKey(ev,"esc")){blur()}else if(this.focusedObject.draggable&&keyboard.isKey(ev,["up","down","left","right"])){ev.preventDefault();var io=this.focusedObject;var disposerKey="interactionKeyboardObject";if(io.eventDisposers.hasKey(disposerKey)){return}var ko=new InteractionKeyboardObject(io,ev);io.eventDisposers.setKey(disposerKey,ko);switch(keyboard.getEventKey(ev)){case"up":ko.directionY=-1;break;case"down":ko.directionY=1;break;case"left":ko.directionX=-1;break;case"right":ko.directionX=1;break}}}};Interaction.prototype.handleGlobalKeyUp=function(ev){var disposerKey="interactionKeyboardObject";if(this.focusedObject){var disposer=this.focusedObject.eventDisposers.getKey(disposerKey);if(disposer!=null){ev.preventDefault();disposer.dispose();this.focusedObject.eventDisposers.removeKey(disposerKey)}var sprite=this.focusedObject.sprite;if(keyboard.isKey(ev,"enter")&&sprite){if(sprite.events.isEnabled("hit")||sprite.events.isEnabled("toggled")){this.focusedObject.dispatchImmediately("hit")}else if(sprite.showTooltipOn=="hit"){this.focusedObject.dispatchImmediately("up")}}}};Interaction.prototype.handleGlobalPointerMove=function(ev){var pointer=this.getPointer(ev);pointer.point=this.getPointerPoint(ev);if(this.events.isEnabled("track")&&!system.isPaused){var imev={type:"track",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("track",imev)}this.addBreadCrumb(pointer,pointer.point);this.handleGlobalMove(pointer,ev)};Interaction.prototype.handleGlobalPointerDown=function(ev){this.processDelayed();var pointer=this.getPointer(ev);if(this.events.isEnabled("down")&&!system.isPaused){var imev={type:"down",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("down",imev)}};Interaction.prototype.preventTouchAction=function(ev){if(!ev.defaultPrevented){ev.preventDefault()}};Interaction.prototype.handleGlobalPointerUp=function(ev,cancelled){if(cancelled===void 0){cancelled=false}var pointer=this.getPointer(ev);if(this.events.isEnabled("up")&&!system.isPaused){var imev={type:"up",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("up",imev)}this.handleGlobalUp(pointer,ev,cancelled)};Interaction.prototype.handleGlobalTouchMove=function(ev){for(var i=0;i<ev.changedTouches.length;i++){var pointer=this.getPointer(ev.changedTouches[i]);pointer.point=this.getPointerPoint(ev.changedTouches[i]);if(this.events.isEnabled("track")&&!system.isPaused){var imev={type:"track",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("track",imev)}this.addBreadCrumb(pointer,pointer.point);this.handleGlobalMove(pointer,ev)}};Interaction.prototype.handleGlobalTouchStart=function(ev){this.processDelayed();for(var i=0;i<ev.changedTouches.length;i++){var pointer=this.getPointer(ev.changedTouches[i]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!system.isPaused){var imev={type:"down",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("down",imev)}}};Interaction.prototype.handleGlobalTouchEnd=function(ev){for(var i=0;i<ev.changedTouches.length;i++){var pointer=this.getPointer(ev.changedTouches[i]);if(this.events.isEnabled("up")&&!system.isPaused){var imev={type:"up",target:this,event:ev,pointer,touch:pointer.touch};this.events.dispatchImmediately("up",imev)}this.handleGlobalUp(pointer,ev)}};Interaction.prototype.handlePointerDown=function(io,ev){var pointer=this.getPointer(ev);if(!pointer.touch&&ev.which!=1&&ev.which!=3){return}pointer.button=ev.which;this.resetPointer(pointer,ev);this.handleDown(io,pointer,ev)};Interaction.prototype.handlePointerOver=function(io,ev){var pointer=this.getPointer(ev);this.handleOver(io,pointer,ev)};Interaction.prototype.handlePointerOut=function(io,ev){var pointer=this.getPointer(ev);this.handleOut(io,pointer,ev)};Interaction.prototype.handleMouseWheel=function(io,ev){var pointer=this.getPointer(ev);pointer.point=this.getPointerPoint(ev);var deltaX=0,deltaY=0;var mod=1;if(ev.deltaMode==1){mod=50}mod*=this.getMouseOption(io,"sensitivity");if(ev instanceof WheelEvent){deltaX=Math.round(-1*ev.wheelDeltaX||ev.deltaX*mod);deltaY=Math.round(-1*ev.wheelDeltaY||ev.deltaY*mod)}else{throw new Error("Invalid event type")}this.handleWheel(io,pointer,deltaX,deltaY,ev)};Interaction.prototype.handleTouchDown=function(io,ev){for(var i=0;i<ev.changedTouches.length;i++){var pointer=this.getPointer(ev.changedTouches[i]);this.maybePreventDefault(io,ev,pointer);this.resetPointer(pointer,ev.changedTouches[i]);this.handleDown(io,pointer,ev)}};Interaction.prototype.handleHit=function(io,pointer,ev){var now=getTime();if(io.lastHit&&io.lastHit>=now-this.getHitOption(io,"doubleHitTime")){if(now-io.lastHit<100){return}io.lastHit=undefined;io.lastHitPointer=undefined;if(io.events.isEnabled("doublehit")&&!system.isPaused){var imev={type:"doublehit",target:io,point:pointer.point,event:ev,touch:pointer.touch};io.events.dispatchImmediately("doublehit",imev)}}else{io.lastHit=now;io.lastHitPointer=pointer;if(pointer.button===3){if(io.events.isEnabled("rightclick")&&!system.isPaused){var imev={type:"rightclick",target:io,event:ev};io.events.dispatchImmediately("rightclick",imev)}}else{if(io.events.isEnabled("hit")&&!system.isPaused){var imev={type:"hit",target:io,event:ev,point:pointer.point,touch:pointer.touch};io.events.dispatchImmediately("hit",imev)}}}};Interaction.prototype.handleOver=function(io,pointer,ev,soft){if(!io.hoverable){return}var hoversPaused=false;if(this.shouldCancelHovers(pointer)&&this.areTransformed()&&this.moved(pointer,this.getHitOption(io,"hitTolerance"))){hoversPaused=true;this.cancelAllHovers(ev)}this.processDelayed();io.overPointers.moveValue(pointer);if(!io.isRealHover){if(!hoversPaused){io.isHover=true;io.isRealHover=true;this.overObjects.moveValue(io)}this.handleTrack(this.body,pointer,ev,true);if(io.events.isEnabled("over")&&!system.isPaused&&!hoversPaused){var imev={type:"over",target:io,event:ev,pointer,touch:pointer.touch};io.events.dispatchImmediately("over",imev)}}};Interaction.prototype.handleOut=function(io,pointer,ev,soft,force){var _this=this;if(soft===void 0){soft=false}if(force===void 0){force=false}if(!io.hoverable){return}io.overPointers.removeValue(pointer);if(io.isHover&&(!io.hasDelayedOut||force)){if(soft&&io.overPointers.length){return}if(pointer&&pointer.touch&&!force&&!this.old(pointer)){var behavior=this.getHoverOption(io,"touchOutBehavior");if(behavior=="leave"){this._delayedEvents.out.push({type:"out",io,pointer,event:ev,keepUntil:getTime()+500});io.hasDelayedOut=true;return}else if(behavior=="delay"&&this.getHoverOption(io,"touchOutDelay")){this._delayedEvents.out.push({type:"out",io,pointer,event:ev,keepUntil:getTime()+500,timeout:this.setTimeout((function(){_this.handleOut(io,pointer,ev,true)}),this.getHoverOption(io,"touchOutDelay"))});return}else;}io.isHover=false;this.overObjects.removeValue(io);if(!io.isDisposed()&&io.events.isEnabled("out")&&!system.isPaused){var imev={type:"out",target:io,event:ev,pointer,touch:pointer.touch};io.events.dispatchImmediately("out",imev)}io.overPointers.clear();io.hasDelayedOut=false}};Interaction.prototype.processDelayed=function(){var delayedEvent;while(true){delayedEvent=this._delayedEvents.out.pop();if(!delayedEvent){break}if(delayedEvent.timeout){delayedEvent.timeout.dispose()}this.handleOut(delayedEvent.io,delayedEvent.pointer,delayedEvent.event,false,true)}};Interaction.prototype.handleDown=function(io,pointer,ev){this.maybePreventDefault(io,ev,pointer);if(io.inert){this.stopInertia(io)}this.handleOver(io,pointer,ev,true);io.downPointers.moveValue(pointer);this.applyCursorDownStyle(io,pointer);if(!io.isDown){if(io.focusable!==false&&this.getHitOption(io,"noFocus")&&this.focusedObject){blur()}io.isDown=true;this.downObjects.moveValue(io);if(io.draggable){this.processDragStart(io,pointer,ev)}if(io.resizable){this.processResizeStart(io,pointer,ev)}}if(io.events.isEnabled("down")&&!system.isPaused){var imev={type:"down",target:io,event:ev,pointer,touch:pointer.touch};io.events.dispatchImmediately("down",imev)}};Interaction.prototype.handleGlobalUp=function(pointer,ev,cancelled){var _this=this;if(cancelled===void 0){cancelled=false}var sorted=this.downObjects.values.slice();sorted.sort((function(x,y){if(x&&y){var pos=x.element.compareDocumentPosition(y.element);if(pos&Node.DOCUMENT_POSITION_CONTAINED_BY){return 1}else if(pos&Node.DOCUMENT_POSITION_CONTAINS){return-1}else{return 0}}else{return 0}}));each$2(sorted,(function(io){if(io&&io.downPointers.contains(pointer)){_this.handleUp(io,pointer,ev,cancelled)}}))};Interaction.prototype.handleDocumentLeave=function(ev){var _this=this;each(this.downObjects.backwards().iterator(),(function(io){io.downPointers.each((function(pointer){_this.handleUp(io,pointer,ev)}))}))};Interaction.prototype.handleUp=function(io,pointer,ev,cancelled){if(cancelled===void 0){cancelled=false}this.restoreCursorDownStyle(io,pointer);io.downPointers.removeValue(pointer);if(pointer.touch||this._useTouchEventsOnly){this.handleOut(io,pointer,ev,true)}if(io.isDown){if(io.downPointers.length==0){io.isDown=false;this.downObjects.removeValue(io)}if(io.events.isEnabled("up")&&!system.isPaused){var imev={type:"up",target:io,event:ev,pointer,touch:pointer.touch};io.events.dispatchImmediately("up",imev)}if(!cancelled){if(io.swipeable&&this.swiped(io,pointer)){this.handleSwipe(io,pointer,ev)}else{if(io.clickable&&!this.moved(pointer,this.getHitOption(io,"hitTolerance"))){this.handleHit(io,pointer,ev)}if(io.inert&&this.moved(pointer,this.getHitOption(io,"hitTolerance"))){this.handleInertia(io,pointer)}else if(io.draggable){this.processDragStop(io,pointer,ev)}if(io.resizable){this.processResizeStop(io,pointer,ev)}}}}};Interaction.prototype.maybePreventDefault=function(io,ev,pointer){if(hasValue(ev)&&(io.draggable||io.swipeable||io.trackable||io.resizable)&&!this.isGlobalElement(io)&&ev.cancelable!==false&&(!io.isTouchProtected||!pointer||!pointer.touch)){ev.preventDefault()}};Interaction.prototype.cancelAllHovers=function(ev){var _this=this;each(this.overObjects.backwards().iterator(),(function(io){if(io){var pointer=io.overPointers.getIndex(0);_this.handleOut(io,pointer,ev,true,true)}}))};Interaction.prototype.shouldCancelHovers=function(pointer){return options.disableHoverOnTransform=="touch"};Interaction.prototype.handleGlobalMove=function(pointer,ev){var _this=this;if(!pointer.touch){var target_1=eventTarget(pointer.lastEvent);each(this.overObjects.backwards().iterator(),(function(io){if(io&&io.overPointers.contains(pointer)&&io.hoverable){var reset=false;if(io.element&&pointer.lastEvent){if(!contains$2(io.element,target_1)){reset=true}}else{reset=true}if(reset){_this.handleOut(io,pointer,ev,true)}}}))}each(this.transformedObjects.backwards().iterator(),(function(io){if(io.downPointers.contains(pointer)&&!(io.swipeable&&_this.swiping(io,pointer))&&(io.draggable||io.resizable)){_this.handleTransform(io,ev)}}));each(this.trackedObjects.backwards().iterator(),(function(io){if(!io.overPointers.contains(pointer)){_this.handleTrack(io,pointer,ev)}}))};Interaction.prototype.handleTrack=function(io,pointer,ev,skipCheck){if(skipCheck===void 0){skipCheck=false}if(!skipCheck&&!this.moved(pointer,0)){return}if(io.events.isEnabled("track")&&!system.isPaused){var imev={type:"track",target:io,event:ev,point:pointer.point,pointer,touch:pointer.touch};io.events.dispatchImmediately("track",imev)}};Interaction.prototype.handleSwipe=function(io,pointer,ev){if(io.events.isEnabled("swipe")&&!system.isPaused){var imev={type:"swipe",target:io,event:ev,touch:pointer.touch};io.events.dispatchImmediately("swipe",imev)}if(pointer.startPoint.x<pointer.point.x){if(io.events.isEnabled("swiperight")&&!system.isPaused){var imev={type:"swiperight",target:io,event:ev,touch:pointer.touch};io.events.dispatchImmediately("swiperight",imev)}}else{if(io.events.isEnabled("swipeleft")&&!system.isPaused){var imev={type:"swipeleft",target:io,event:ev,touch:pointer.touch};io.events.dispatchImmediately("swipeleft",imev)}}};Interaction.prototype.handleWheel=function(io,pointer,deltaX,deltaY,ev){var shift={x:deltaX,y:deltaY};if(io.events.isEnabled("wheel")&&!system.isPaused){io.events.dispatchImmediately("wheel",{type:"wheel",target:io,event:ev,point:pointer.point,shift})}if(deltaX<0){if(io.events.isEnabled("wheelleft")&&!system.isPaused){io.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:io,event:ev,point:pointer.point,shift})}}else if(deltaX>0){if(io.events.isEnabled("swiperight")&&!system.isPaused){io.events.dispatchImmediately("wheelright",{type:"wheelright",target:io,event:ev,point:pointer.point,shift})}}else if(deltaY<0){if(io.events.isEnabled("wheelup")&&!system.isPaused){io.events.dispatchImmediately("wheelup",{type:"wheelup",target:io,event:ev,point:pointer.point,shift})}}else if(deltaY>0){if(io.events.isEnabled("wheeldown")&&!system.isPaused){io.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:io,event:ev,point:pointer.point,shift})}}};Interaction.prototype.handleInertia=function(io,pointer){if(io.draggable&&io.downPointers.length===0){this.handleMoveInertia(io,pointer)}if(io.resizable&&io.downPointers.length>1){this.handleResizeInertia(io,pointer)}};Interaction.prototype.handleMoveInertia=function(io,pointer){var interaction=io;var type="move";var point={x:pointer.point.x,y:pointer.point.y};var startPoint={x:pointer.startPoint.x,y:pointer.startPoint.y};var inertia=new Inertia(interaction,type,point,startPoint);var ref=this.getTrailPoint(pointer,getTime()-this.getInertiaOption(io,"move","time"));if(typeof ref==="undefined"){this.processDragStop(io,pointer,pointer.lastUpEvent);return}var factor=this.getInertiaOption(io,"move","factor");var animationOptions=[{to:pointer.point.x+(pointer.point.x-ref.point.x)*factor,property:"x"},{to:pointer.point.y+(pointer.point.y-ref.point.y)*factor,property:"y"}];var animation=new Animation(inertia,animationOptions,this.getInertiaOption(io,"move","duration"),this.getInertiaOption(io,"move","easing")).start();this._disposers.push(animation.events.on("animationended",(function(ev){inertia.done()})));io.inertias.setKey("move",inertia)};Interaction.prototype.handleResizeInertia=function(io,pointer){};Interaction.prototype.handleTransform=function(io,ev){var pointer1=io.downPointers.getIndex(0);var point1=null;var startPoint1=null;if(pointer1){point1=pointer1.point;startPoint1=pointer1.startPoint}var pointer2;var point2;var startPoint2;point2={x:io.originalPosition.x,y:io.originalPosition.y};startPoint2=point2;var singlePoint=true;for(var i=1;i<io.downPointers.length;i++){var nextPointer=io.downPointers.getIndex(i);if(startPoint1.x!=nextPointer.startPoint.x&&startPoint1.y!=nextPointer.startPoint.y){singlePoint=false;pointer2=nextPointer;point2=pointer2.point;startPoint2=pointer2.startPoint;break}}var pointer1Moved=pointer1&&this.moved(pointer1,0);if(io.draggable&&pointer1&&pointer1.dragStartEvents&&pointer1.dragStartEvents.length&&pointer1Moved){if(io.events.isEnabled("dragstart")&&!system.isPaused){io.events.dispatchImmediately("dragstart",pointer1.dragStartEvents.shift())}}if(singlePoint&&io.draggable){this.handleTransformMove(io,point1,startPoint1,ev,pointer1Moved,pointer1.touch);if(this.shouldCancelHovers(pointer1)&&this.moved(pointer1,this.getHitOption(io,"hitTolerance"))){this.cancelAllHovers(ev)}}else{var pointer2Moved=pointer2&&this.moved(pointer2,0);if(this.shouldCancelHovers(pointer1)&&this.moved(pointer1,this.getHitOption(io,"hitTolerance"))||this.shouldCancelHovers(pointer2)&&this.moved(pointer2,this.getHitOption(io,"hitTolerance"))){this.cancelAllHovers(ev)}if(io.draggable&&io.resizable){this.handleTransformMove(io,point1,startPoint1,ev,pointer1Moved&&pointer2Moved,pointer1.touch);this.handleTransformResize(io,point1,startPoint1,point2,startPoint2,ev,pointer1Moved&&pointer2Moved,pointer1.touch)}else{if(io.draggable){this.handleTransformMove(io,point1,startPoint1,ev,pointer1Moved,pointer1.touch)}if(io.resizable&&(!singlePoint||ev.ctrlKey)){this.handleTransformResize(io,point1,startPoint1,point2,startPoint2,ev,pointer1Moved&&pointer2Moved,pointer1.touch)}}}};Interaction.prototype.handleTransformMove=function(io,point,startPoint,ev,pointerMoved,touch){if(pointerMoved){if(io.events.isEnabled("drag")&&!system.isPaused&&(!io.isTouchProtected||!touch)){var imev={type:"drag",target:io,event:ev,shift:{x:point.x-startPoint.x,y:point.y-startPoint.y},startPoint,point,touch};io.events.dispatchImmediately("drag",imev)}}};Interaction.prototype.handleTransformResize=function(io,point1,startPoint1,point2,startPoint2,ev,pointerMoved,touch){if(io.events.isEnabled("resize")&&!system.isPaused&&(!io.isTouchProtected||!touch)){var imev={type:"resize",target:io,event:ev,scale:getScale(point1,startPoint1,point2,startPoint2),startPoint1,point1,startPoint2,point2,touch};io.events.dispatchImmediately("resize",imev)}};Interaction.prototype.processDragStart=function(io,pointer,ev){this.transformedObjects.moveValue(io);if(this.shouldCancelHovers(pointer)){this.cancelAllHovers(ev)}var imev={type:"dragstart",target:io,event:ev,touch:pointer?pointer.touch:false};if(pointer){pointer.dragTarget=io}if(pointer&&pointer.dragStartEvents){pointer.dragStartEvents.push(imev)}else{if(!system.isPaused){io.dispatchImmediately("dragstart",imev)}}};Interaction.prototype.processDragStop=function(io,pointer,ev){if(!pointer){pointer=this.getDragPointer(io)}if(pointer){pointer.dragTarget=undefined}this.transformedObjects.removeValue(io);if(!pointer||this.moved(pointer,0)){if(io.events.isEnabled("dragstop")&&!system.isPaused){var imev={type:"dragstop",target:io,touch:pointer?pointer.touch:false};io.events.dispatchImmediately("dragstop",imev)}}};Interaction.prototype.processResizeStart=function(io,pointer,ev){this.transformedObjects.moveValue(io)};Interaction.prototype.processResizeStop=function(io,pointer,ev){this.transformedObjects.removeValue(io)};Interaction.prototype.dragStart=function(io,pointer){if(!pointer){pointer=this.getDragPointer(io)}if(pointer){this.handleDown(io,pointer,pointer.lastDownEvent)}};Interaction.prototype.dragStop=function(io,pointer,cancelled){if(!pointer){pointer=this.getDragPointer(io)}if(pointer&&!cancelled){this.handleGlobalUp(pointer,pointer.lastUpEvent,cancelled)}};Interaction.prototype.getDragPointer=function(io){if(io){return io.downPointers.getIndex(0)}else if(this.transformedObjects.length){return this.getDragPointer(this.transformedObjects.getIndex(0))}else{return undefined}};Interaction.prototype.getPointerId=function(ev){var id="";if(hasValue(ev.identifier)){id=""+ev.identifier}else if(hasValue(ev.pointerId)){id=""+ev.pointerId}else{id="m"}return id.replace("-","")};Interaction.prototype.getPointerPoint=function(ev){return{x:ev.clientX,y:ev.clientY}};Interaction.prototype.getPointer=function(ev){var id=this.getPointerId(ev);var point=this.getPointerPoint(ev);var pointer;if(this.pointers.hasKey(id)){pointer=this.pointers.getKey(id);pointer.touch=this.isPointerTouch(ev)}else{pointer={id,touch:this.isPointerTouch(ev),startPoint:point,startTime:getTime(),point,track:[],swipeCanceled:false,dragStartEvents:[]};this.addBreadCrumb(pointer,point);this.pointers.setKey(id,pointer)}pointer.lastEvent=ev;this.lastPointer=pointer;return pointer};Interaction.prototype.isPointerTouch=function(ev){if(typeof Touch!=="undefined"&&ev instanceof Touch){return true}else if(typeof PointerEvent!=="undefined"&&ev instanceof PointerEvent&&hasValue(ev.pointerType)){switch(ev.pointerType){case"touch":case"pen":case 2:return true;case"mouse":case 4:return false;default:return!(ev instanceof MouseEvent)}}else if(hasValue(ev.type)){if(ev.type.match(/^mouse/)){return false}}return true};Interaction.prototype.resetPointer=function(pointer,ev){var point=this.getPointerPoint(ev);pointer.startTime=getTime();pointer.startPoint={x:point.x,y:point.y};pointer.point={x:point.x,y:point.y};pointer.track=[];pointer.swipeCanceled=false};Interaction.prototype.addBreadCrumb=function(pointer,point){pointer.track.push({timestamp:getTime(),point})};Interaction.prototype.lockDocument=function(){this.prepElement(this.body)};Interaction.prototype.unlockDocument=function(){if(this.transformedObjects.length==0){this.restoreAllStyles(this.body)}};Interaction.prototype.lockElement=function(io){this.prepElement(io)};Interaction.prototype.unlockElement=function(io){this.restoreAllStyles(io)};Interaction.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,this._passiveSupported?{passive:false}:false)};Interaction.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)};Interaction.prototype.isLocalElement=function(pointer,svg,id){var cached=this.getCache("local_pointer_"+pointer.id);if(hasValue(cached)){return cached}var doc=getRoot(svg)||document;if(doc.elementFromPoint){var target=doc.elementFromPoint(pointer.point.x,pointer.point.y);var local=target&&contains$2(svg,target);this.setCache("local_pointer_"+pointer.id+"_"+id,local,100);return local}return false};Interaction.prototype.wheelLockEvent=function(ev){ev.preventDefault();return false};Interaction.prototype.prepElement=function(io){var el=io.element;if(el){var props=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"];for(var i=0;i<props.length;i++){if(props[i]in el.style){this.setTemporaryStyle(io,props[i],"none")}}this.setTemporaryStyle(io,"tapHighlightColor","rgba(0, 0, 0, 0)")}};Interaction.prototype.unprepElement=function(io){var el=io.element;if(el){var props=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"];for(var i=0;i<props.length;i++){if(props[i]in el.style){this.restoreStyle(io,props[i])}}this.restoreStyle(io,"tapHighlightColor")}};Interaction.prototype.getHitOption=function(io,option){var res=io.hitOptions[option];if(typeof res==="undefined"){res=this.hitOptions[option]}return res};Interaction.prototype.getHoverOption=function(io,option){var res=io.hoverOptions[option];if(typeof res==="undefined"){res=this.hoverOptions[option]}return res};Interaction.prototype.getSwipeOption=function(io,option){var res=io.swipeOptions[option];if(typeof res==="undefined"){res=this.swipeOptions[option]}return res};Interaction.prototype.getKeyboardOption=function(io,option){var res=io.keyboardOptions[option];if(typeof res==="undefined"){res=this.keyboardOptions[option]}return res};Interaction.prototype.getMouseOption=function(io,option){var res=io.mouseOptions[option];if(typeof res==="undefined"){res=this.mouseOptions[option]}return res};Interaction.prototype.getInertiaOption=function(io,type,option){var options=io.inertiaOptions.getKey(type);var res;if(options&&hasValue(options[option])){res=options[option]}else{res=this.inertiaOptions.getKey(type)[option]}return res};Interaction.prototype.stopInertia=function(io){var x;var inertias=["move","resize"];for(var i=0;i<inertias.length;i++){x=inertias[i];if(io.inertias.hasKey(x)){var inertia=io.inertias.getKey(x);if(inertia){inertia.dispose();continue}}}};Interaction.prototype.swiping=function(io,pointer){var now=getTime();if(pointer.swipeCanceled||!io.swipeable){return false}else if(Math.abs(pointer.startPoint.y-pointer.point.y)<this.getSwipeOption(io,"verticalThreshold")&&pointer.startTime>now-this.getSwipeOption(io,"time")){return true}else{return false}};Interaction.prototype.swiped=function(io,pointer){var now=getTime();if(pointer.swipeCanceled){return false}else if(Math.abs(pointer.startPoint.x-pointer.point.x)>this.getSwipeOption(io,"horizontalThreshold")&&Math.abs(pointer.startPoint.y-pointer.point.y)<this.getSwipeOption(io,"verticalThreshold")&&pointer.startTime>now-this.getSwipeOption(io,"time")){return true}else{return false}};Interaction.prototype.applyCursorOverStyle=function(io){var options=io.cursorOptions;if(!hasValue(options.overStyle)){return}for(var i=0;i<options.overStyle.length;i++){setStyle(io.element,options.overStyle[i].property,options.overStyle[i].value)}};Interaction.prototype.applyCursorDownStyle=function(io,pointer){if(pointer&&pointer.touch){return}var downStyle=io.cursorOptions.downStyle;if(io.downPointers.contains(pointer)&&hasValue(downStyle)){for(var i=0;i<downStyle.length;i++){this.setTemporaryStyle(this.body,downStyle[i].property,downStyle[i].value);this.setTemporaryStyle(io,downStyle[i].property,downStyle[i].value)}}};Interaction.prototype.restoreCursorDownStyle=function(io,pointer){if(pointer&&pointer.touch){return}var downStyle=io.cursorOptions.downStyle;if(io.downPointers.contains(pointer)&&hasValue(downStyle)){for(var i=0;i<downStyle.length;i++){this.restoreStyle(this.body,downStyle[i].property);this.restoreStyle(io,downStyle[i].property)}}};Interaction.prototype.setGlobalStyle=function(style){var body=getInteraction().body;var styles=isArray$6(style)?style:[style];for(var i=0;i<styles.length;i++){this.setTemporaryStyle(body,styles[i].property,styles[i].value)}};Interaction.prototype.restoreGlobalStyle=function(style){var body=getInteraction().body;var styles=isArray$6(style)?style:[style];for(var i=0;i<styles.length;i++){this.restoreStyle(body,styles[i].property)}};Interaction.prototype.isGlobalElement=function(io){return document.body===io.element};Interaction.prototype.moved=function(pointer,tolerance,minTime){var shift=this.getShift(pointer);return Math.abs(shift.x)>tolerance||Math.abs(shift.y)>tolerance};Interaction.prototype.old=function(pointer,minTime){if(minTime===void 0){minTime=300}return getTime()-pointer.startTime>minTime};Interaction.prototype.getShift=function(pointer){return{x:pointer.startPoint.x-pointer.point.x,y:pointer.startPoint.y-pointer.point.y}};Interaction.prototype.getTrailPoint=function(pointer,timestamp){var res;for(var i=0;i<pointer.track.length;i++){if(pointer.track[i].timestamp>=timestamp){res=pointer.track[i];break}}return res};Interaction.prototype.pointerExists=function(list,pointer){var exists=false;list.each((function(item){if(item==pointer){return}exists=item.point.x==pointer.point.x&&item.point.y==pointer.point.y}));return exists};Interaction.prototype.getInteraction=function(element){return new InteractionObject(element)};Interaction.prototype.setTemporaryStyle=function(io,property,value){var el=io.element;if(hasValue(el.style[property])&&!io.replacedStyles.hasKey(property)){io.replacedStyles.setKey(property,el.style[property])}setStyle(el,property,value)};Interaction.prototype.restoreStyle=function(io,property){if(io.replacedStyles.hasKey(property)){io.element.style[property]=io.replacedStyles.getKey(property);io.replacedStyles.removeKey(property)}else{delete io.element.style[property]}};Interaction.prototype.restoreAllStyles=function(io){each(io.replacedStyles.iterator(),(function(a){var key=a[0];var value=a[1];io.element.style[key]=value;io.replacedStyles.removeKey(key)}))};Interaction.prototype.dispose=function(){if(!this.isDisposed()){_super.prototype.dispose.call(this);this.restoreAllStyles(this.body);this.unlockWheel()}};Interaction.prototype.log=function(text,ev,io){{if(ev.changedTouches){for(var i=0;i<ev.changedTouches.length;i++){this.logTouch(text,ev.type,ev.changedTouches[i])}return}var type="";if(ev.pointerType){switch(ev.pointerType){case 2:type="touch";break;case 4:type="mouse";break;default:type=ev.pointerType;break}}else if(typeof TouchEvent!="undefined"&&ev instanceof TouchEvent){type="touch"}else if(ev.type.match(/^mouse/)){type="mouse"}else{type="???"}var id="";if(hasValue(ev.identifier)){id=ev.identifier}else if(hasValue(ev.pointerId)){id=ev.pointerId}else{id="???"}if(io){console.log(text+" ("+io.uid+")  "+ev.type+"  "+type+"  "+id)}else{console.log(text+"  "+ev.type+"  "+type+"  "+id)}}};Interaction.prototype.areTransformed=function(except){var count=this.transformedObjects.length;if(except){var ex=isArray$6(except)?except:[except];for(var i=0;i<ex.length;i++){if(this.transformedObjects.contains(ex[i])){count--}}}return count>0};Interaction.prototype.logTouch=function(text,type,ev){console.log(text+"  "+type+"  "+"touch"+"  "+ev.identifier)};Object.defineProperty(Interaction,"passiveSupported",{get:function(){var _this=this;if(this._passiveSupported==null){try{var options_1=Object.defineProperty({},"passive",{get:function(){_this._passiveSupported=true}});window.addEventListener("test",options_1,options_1);window.removeEventListener("test",options_1,options_1)}catch(err){this._passiveSupported=false}}return this._passiveSupported},enumerable:true,configurable:true});return Interaction}(BaseObjectEvents);var interaction=null;function getInteraction(){if(interaction==null){interaction=new Interaction}return interaction}var Popup=function(_super){__extends(Popup,_super);function Popup(){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this._elements={};_this._IOs={};_this._content="";_this._title="";_this._classPrefix="ampopup";_this._defaultStyles=true;_this._showCurtain=false;_this._draggable=true;_this._align="center";_this._dynamicResize=true;_this._verticalAlign="middle";_this._shift={x:0,y:0};_this._tempShift={x:0,y:0};_this._readerTitle="";_this._closable=true;_this._cssLoaded=false;_this._fitTo="window";_this.isTemplate=false;_this._sized=false;_this.className="Popup";return _this}Popup.prototype.open=function(){if(this.container){if(this._elements.wrapper){this.container.appendChild(this._elements.wrapper)}if(this._elements.curtain){this.container.appendChild(this._elements.curtain);this.showCurtain=this.showCurtain}this.positionElement();this.dispatchImmediately("opened")}};Popup.prototype.close=function(){if(this._elements.wrapper){if(this._elements.wrapper.parentElement){this._elements.wrapper.parentElement.removeChild(this._elements.wrapper)}}if(this._elements.curtain){if(this._elements.curtain.parentElement){this._elements.curtain.parentElement.removeChild(this._elements.curtain)}}this.dispatchImmediately("closed");this.releasePointers()};Popup.prototype.dispose=function(){this.close();_super.prototype.dispose.call(this)};Popup.prototype.positionElement=function(forceResize){var _this=this;if(forceResize===void 0){forceResize=true}if(!this._elements.wrapper){return}setTimeout((function(){if(!_this._elements.wrapper){return}if(forceResize||!_this._sized){_this._elements.wrapper.style.opacity="0.01";_this._elements.wrapper.style.left="0";_this._elements.wrapper.style.top="0";_this._elements.wrapper.style.margin="0 0 0 0";_this._elements.wrapper.style.width="";_this._elements.wrapper.style.height="";var bbox=_this._elements.wrapper.getBoundingClientRect();_this._elements.wrapper.style.width=bbox.width+"px";_this._elements.wrapper.style.height=bbox.height+"px";_this._sized=true}if(_this.dynamicResize){var images=_this._elements.wrapper.getElementsByTagName("img");for(var i=0;i<images.length;i++){var image=images[i];if(!image.complete){image.addEventListener("load",(function(){_this.positionElement(true)}));break}}}setTimeout((function(){if(!_this._elements.wrapper){return}var bbox;if((forceResize||!_this._sized)&&_this._bbox){bbox=_this._bbox}else{bbox=_this._elements.wrapper.getBoundingClientRect();_this._elements.wrapper.style.opacity=""}switch(_this.align){case"left":_this._elements.wrapper.style.left="0";_this._elements.wrapper.style.right="auto";_this._elements.wrapper.style.marginLeft=_this.toStyle(_this._shift.x+_this._tempShift.x);break;case"center":_this._elements.wrapper.style.left="50%";_this._elements.wrapper.style.right="auto";_this._elements.wrapper.style.marginLeft=_this.toStyle(Math.round(-bbox.width/2)+(_this._shift.x+_this._tempShift.x));break;case"right":_this._elements.wrapper.style.left="auto";_this._elements.wrapper.style.right="0";_this._elements.wrapper.style.marginLeft=_this.toStyle(_this._shift.x+_this._tempShift.x);break;default:_this._elements.wrapper.style.left=_this.toStyle(_this.left)||"auto";_this._elements.wrapper.style.right=_this.toStyle(_this.right)||"auto";_this._elements.wrapper.style.marginLeft=_this.toStyle(_this._shift.x+_this._tempShift.x);break}switch(_this.verticalAlign){case"top":_this._elements.wrapper.style.top="0";_this._elements.wrapper.style.bottom="auto";_this._elements.wrapper.style.marginTop=_this.toStyle(_this._shift.y+_this._tempShift.y);break;case"middle":_this._elements.wrapper.style.top="50%";_this._elements.wrapper.style.bottom="auto";_this._elements.wrapper.style.marginTop=_this.toStyle(Math.round(-bbox.height/2)+(_this._shift.y+_this._tempShift.y));break;case"bottom":_this._elements.wrapper.style.top="auto";_this._elements.wrapper.style.bottom="0";_this._elements.wrapper.style.marginTop=_this.toStyle(_this._shift.y+_this._tempShift.y);break;default:_this._elements.wrapper.style.top=_this.toStyle(_this.top)||"auto";_this._elements.wrapper.style.bottom=_this.toStyle(_this.bottom)||"auto";_this._elements.wrapper.style.marginTop=_this.toStyle(_this._shift.y+_this._tempShift.y);break}}),1)}),1)};Popup.prototype.setupDragging=function(){var _this=this;if(this.draggable){if(!this._IOs.header.events.has("drag")){this._IOs.header.events.on("drag",(function(ev){_this._tempShift.x=ev.shift.x;_this._tempShift.y=ev.shift.y;_this.positionElement(false)}))}if(!this._IOs.header.events.has("dragstop")){this._IOs.header.events.on("dragstop",(function(ev){_this._shift.x+=_this._tempShift.x;_this._shift.y+=_this._tempShift.y;_this._tempShift.x=0;_this._tempShift.y=0;_this.positionElement(false)}))}}else{if(this._IOs.header){getInteraction().unprepElement(this._IOs.header);if(this._IOs.header.events.has("drag")){this._IOs.header.events.off("drag")}if(this._IOs.header.events.has("dragstop")){this._IOs.header.events.off("dragstop")}}}};Popup.prototype.toStyle=function(value){if(!hasValue(value)){return null}else if(isNumber$1(value)){return""+value+"px"}else{return value.toString()}};Object.defineProperty(Popup.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(value){this._classPrefix=value},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(value){if(this._content!=value){this._content=value;if(!this._elements.content){this.createContentElement()}this._elements.content.innerHTML=value;this.positionElement()}},enumerable:true,configurable:true});Popup.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})};Popup.prototype.createContentElement=function(){if(this._elements.wrapper){return}var classNames=this.getClassNames();var wrapper=document.createElement("div");wrapper.className=classNames.contentClass;wrapper.style.opacity="0.01";var close=document.createElement("a");close.className=classNames.closeClass;var header=document.createElement("div");header.className=classNames.headerClass;var title=document.createElement("div");title.innerHTML=this.title;title.className=classNames.titleClass;if(!this.title){title.style.display="none"}var content=document.createElement("div");content.className=classNames.insideClass;content.innerHTML=this.content;this._IOs.wrapper=getInteraction().getInteraction(wrapper);this._IOs.header=getInteraction().getInteraction(header);this._disposers.push(this._IOs.wrapper);this._IOs.wrapper.events.on("over",this.disablePointers,this);this._IOs.wrapper.events.on("out",this.releasePointers,this);this._IOs.close=getInteraction().getInteraction(close);this._disposers.push(this._IOs.close);close.style.visibility="hidden";wrapper.setAttribute("role","dialog");header.appendChild(close);header.appendChild(title);wrapper.appendChild(header);wrapper.appendChild(content);this.container.appendChild(wrapper);this._elements.wrapper=wrapper;this._elements.header=header;this._elements.content=content;this._elements.title=title;this._elements.close=close;if(this.defaultStyles){this.loadDefaultCSS()}this.createCurtainElement();this.applyEvents();this.applyReaderSettings();this.setupDragging()};Object.defineProperty(Popup.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(value){if(this._title!=value){this._title=value;if(!this._elements.content){this.createContentElement()}this._elements.title.innerHTML=value;this.positionElement();this.applyReaderSettings()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",this._readerTitle!=""?this._readerTitle:this.title)},set:function(value){if(this._readerTitle!=value){this._readerTitle=value;this.applyReaderSettings()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(value){if(value!==this._closable){this._closable=value;this.applyEvents()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(value){if(value!=this._fitTo){this._fitTo=value;this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(value){if(this._defaultStyles!=value){this._defaultStyles=value}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(value){if(this._showCurtain!=value){this._showCurtain=value;if(this._elements.curtain){this._elements.curtain.style.display=value?"block":"none"}}},enumerable:true,configurable:true});Popup.prototype.createCurtainElement=function(){var classNames=this.getClassNames();var curtain=document.createElement("div");curtain.className=classNames.curtainClass;this.container.appendChild(curtain);this._IOs.curtain=getInteraction().getInteraction(curtain);this._disposers.push(this._IOs.curtain);this._IOs.curtain.events.on("over",this.disablePointers,this);this._IOs.curtain.events.on("out",this.releasePointers,this);curtain.style.display=this.showCurtain?"block":"none";this._elements.curtain=curtain};Object.defineProperty(Popup.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(value){if(this._draggable!=value){this._draggable=value;this.setupDragging()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(value){if(this._dynamicResize!=value){this._dynamicResize=value;this.positionElement(true)}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(value){if(this._align!=value){this._align=value;this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(value){if(this._verticalAlign!=value){this._verticalAlign=value;this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(value){if(this.left!=value){this._left=value;this._align="none";this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(value){if(this.right!=value){this._right=value;this._align="none";this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(value){if(this.top!=value){this._top=value;this._verticalAlign="none";this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(value){if(this.bottom!=value){this._bottom=value;this._verticalAlign="none";this.positionElement()}},enumerable:true,configurable:true});Object.defineProperty(Popup.prototype,"elements",{get:function(){return this._elements},enumerable:true,configurable:true});Popup.prototype.loadDefaultCSS=function(){if(!this._cssLoaded){this._disposers.push(popupCSS(getShadowRoot(this.container),this.classPrefix));each$1(this._elements,(function(key,el){el.style.display=""}));this._cssLoaded=true}};Popup.prototype.applyEvents=function(){var _this=this;if(this._IOs.close){if(this.closable){this._IOs.close.element.style.visibility="visible";var disposers=[getInteraction().body.events.on("keyup",(function(ev){if(keyboard.isKey(ev.event,"esc")&&_this.closable){_this.close()}})),this._IOs.close.events.on("hit",(function(ev){_this.close()}))];disposers.push(this._IOs.curtain.events.on("hit",(function(ev){if(_this.showCurtain&&_this.closable){_this.close()}})));this._disposers.push(new MultiDisposer(disposers))}else{this._IOs.close.element.style.visibility="hidden"}}};Popup.prototype.disablePointers=function(){if(this.sprite){this._spriteInteractionsEnabled=this.sprite.interactionsEnabled;this.sprite.interactionsEnabled=false}};Popup.prototype.releasePointers=function(){if(hasValue(this._spriteInteractionsEnabled)){this.sprite.interactionsEnabled=this._spriteInteractionsEnabled;this._spriteInteractionsEnabled=undefined}};Popup.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)};Popup.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.container=source.container;this.sprite=source.sprite;this.classPrefix=source.classPrefixRaw;this.content=source.content;this.title=source.title;this.readerTitle=source.readerTitle;this.defaultStyles=source.defaultStyles;this.showCurtain=source.showCurtain;this.align=source.align;this.verticalAlign=source.verticalAlign;this.left=source.left;this.right=source.right;this.top=source.top;this.bottom=source.bottom;this.adapter.copyFrom(source.adapter)};return Popup}(BaseObjectEvents);var Modal=function(_super){__extends(Modal,_super);function Modal(){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this.className="Modal";_this.showCurtain=true;_this.draggable=false;return _this}return Modal}(Popup);function log(){var messages=[];for(var _i=0;_i<arguments.length;_i++){messages[_i]=arguments[_i]}{if(console){console.log.apply(console,__spread(messages))}}}function warn(){var messages=[];for(var _i=0;_i<arguments.length;_i++){messages[_i]=arguments[_i]}{if(console){console.warn.apply(console,__spread(messages))}}}var Native=function(){function Native(){var _this=this;this._targets=[];this._observer=new ResizeObserver((function(entries){each$2(entries,(function(entry){each$2(_this._targets,(function(x){if(x.target===entry.target){x.callback()}}))}))}))}Native.prototype.addTarget=function(target,callback){this._observer.observe(target,{box:"content-box"});this._targets.push({target,callback})};Native.prototype.removeTarget=function(target){this._observer.unobserve(target);keepIf(this._targets,(function(x){return x.target!==target}))};return Native}();var Raf=function(){function Raf(){this._targets=[]}Raf.prototype.addTarget=function(target,callback){var _this=this;if(this._targets.length===0){var lastTime_1=null;var loop_1=function(){var currentTime=Date.now();if(lastTime_1===null||currentTime>lastTime_1+Raf.delay){lastTime_1=currentTime;each$2(_this._targets,(function(x){var newSize=x.target.getBoundingClientRect();if(newSize.width!==x.size.width||newSize.height!==x.size.height){x.size=newSize;x.callback()}}))}_this._timer=requestAnimationFrame(loop_1)};this._timer=requestAnimationFrame(loop_1)}var size=target.getBoundingClientRect();this._targets.push({target,callback,size})};Raf.prototype.removeTarget=function(target){keepIf(this._targets,(function(x){return x.target!==target}));if(this._targets.length===0){cancelAnimationFrame(this._timer)}};Raf.delay=200;return Raf}();var observer=null;function makeSensor(){if(observer===null){if(typeof ResizeObserver!=="undefined"){observer=new Native}else{observer=new Raf}}return observer}var ResizeSensor=function(){function ResizeSensor(element,callback){this._disposed=false;this._sensor=makeSensor();this._element=element;this._sensor.addTarget(element,callback)}ResizeSensor.prototype.isDisposed=function(){return this._disposed};ResizeSensor.prototype.dispose=function(){if(!this._disposed){this._disposed=true;this._sensor.removeTarget(this._element)}};Object.defineProperty(ResizeSensor.prototype,"sensor",{get:function(){return this._sensor},enumerable:true,configurable:true});ResizeSensor.prototype.reset=function(){warn("resizeSensor.reset() is no longer needed and can be removed")};return ResizeSensor}();var svgContainers=[];var SVGContainer=function(){function SVGContainer(htmlElement,ghost){var _this=this;this._disposed=false;this.autoResize=true;this.nonExportableSprites=[];this._disposers=[];this.cssScale=1;this._printing=false;this.htmlElement=htmlElement;if(!ghost){this._printing=false;this.initSensor();this._disposers.push(addEventListener$1(window,"beforeprint",(function(){_this._printing=true})));this._disposers.push(addEventListener$1(window,"afterprint",(function(){_this._printing=false})))}svgContainers.push(this);var svgContainer=document.createElement("div");var style=svgContainer.style;style.width="100%";style.height="100%";style.position="relative";htmlElement.appendChild(svgContainer);this.SVGContainer=svgContainer}SVGContainer.prototype.initSensor=function(){var _this=this;if(this.resizeSensor){this.resizeSensor.dispose()}var callback=function(){if(_this.autoResize&&!_this._printing){_this.measure()}};this.resizeSensor=new ResizeSensor(this.htmlElement,callback);this._disposers.push(this.resizeSensor)};SVGContainer.prototype.measure=function(){var width$1=width(this.htmlElement);var height$1=height(this.htmlElement);var container=this.container;if(container){if(this.width!=width$1||this.height!=height$1){this.width=width$1;this.height=height$1;if(width$1>0){container.maxWidth=width$1}if(height$1>0){container.maxHeight=height$1}fixPixelPerfect(this.SVGContainer)}if(!container.maxWidth){container.maxWidth=0}if(!container.maxHeight){container.maxHeight=0}this.cssScale=1;this.checkTransform(this.htmlElement)}};Object.defineProperty(SVGContainer.prototype,"container",{get:function(){return this._container},set:function(container){this._container=container;this.measure()},enumerable:true,configurable:true});SVGContainer.prototype.isDisposed=function(){return this._disposed};SVGContainer.prototype.dispose=function(){if(!this._disposed){remove(svgContainers,this)}each$2(this._disposers,(function(item){item.dispose()}))};Object.defineProperty(SVGContainer.prototype,"hideOverflow",{set:function(value){if(value){this.SVGContainer.style.overflow="hidden"}else{this.SVGContainer.style.overflow=""}},enumerable:true,configurable:true});Object.defineProperty(SVGContainer.prototype,"modal",{get:function(){if(!hasValue(this._modal)){this._modal=new Modal;this._modal.container=this.SVGContainer;this._disposers.push(this._modal)}return this._modal},enumerable:true,configurable:true});SVGContainer.prototype.openModal=function(text,title){this.closeModal();var modal=this.modal;modal.content=text;modal.readerTitle=title||"";modal.title=title||"";modal.open();return modal};SVGContainer.prototype.closeModal=function(){if(this._modal){this.modal.close()}};Object.defineProperty(SVGContainer.prototype,"popups",{get:function(){if(!hasValue(this._popups)){var popupTemplate=new Popup;popupTemplate.container=this.SVGContainer;this._popups=new ListTemplate(popupTemplate);this._disposers.push(new ListDisposer(this._popups));this._disposers.push(this._popups.template)}return this._popups},enumerable:true,configurable:true});SVGContainer.prototype.openPopup=function(text,title){var popup=this.popups.create();popup.content=text;if(hasValue(title)){popup.title=title}popup.open();return popup};SVGContainer.prototype.closeAllPopups=function(){this.popups.each((function(popup){popup.close()}))};Object.defineProperty(SVGContainer.prototype,"readerAlertElement",{get:function(){if(!hasValue(this._readerAlertElement)){var div=document.createElement("div");div.setAttribute("role","alert");div.style.zIndex="-100000";div.style.opacity="0";div.style.position="absolute";div.style.top="0";this.SVGContainer.appendChild(div);this._readerAlertElement=div}return this._readerAlertElement},enumerable:true,configurable:true});SVGContainer.prototype.readerAlert=function(text){this.readerAlertElement.innerHTML=text};SVGContainer.prototype.checkTransform=function(div){if(window.getComputedStyle){if(div&&div.style){var style=window.getComputedStyle(div,null);if(style){var matrix=style.getPropertyValue("-webkit-transform")||style.getPropertyValue("-moz-transform")||style.getPropertyValue("-ms-transform")||style.getPropertyValue("-o-transform")||style.getPropertyValue("transform");if(matrix&&matrix!=="none"){var values=matrix.split("(")[1].split(")")[0].split(",");var a=Number(values[0]);var b=Number(values[1]);var scale=Math.sqrt(a*a+b*b);if(!isNaN(scale)){this.cssScale*=scale}}}}if(div.parentNode&&div.parentNode instanceof HTMLElement){this.checkTransform(div.parentNode)}}};return SVGContainer}();var Paper=function(){function Paper(container,id){this.container=container;this.id=id;var svg=document.createElementNS(SVGNS,"svg");svg.setAttribute("version","1.1");svg.setAttributeNS(XMLNS,"xmlns",SVGNS);svg.setAttributeNS(XMLNS,"xmlns:xlink",XLINK);svg.setAttribute("role","group");this.container.appendChild(svg);this.defs=document.createElementNS(SVGNS,"defs");svg.appendChild(this.defs);svg.style.width="100%";svg.style.height="100%";svg.style.overflow="visible";this.svg=svg}Paper.prototype.add=function(elementName){return new AMElement(elementName)};Paper.prototype.addGroup=function(groupName){return new Group(groupName)};Paper.prototype.append=function(element){if(element){this.svg.appendChild(element.node)}};Paper.prototype.appendDef=function(element){if(element){this.defs.appendChild(element.node)}};Paper.prototype.foreignObject=function(){var element=new AMElement("foreignObject");return element};Paper.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")};return Paper}();var ghostPaper=null;function getGhostPaper(){if(ghostPaper===null){var ghostDiv=document.createElement("div");ghostDiv.hidden=true;ghostDiv.style.width="1px";ghostDiv.style.height="1px";ghostDiv.style.position="absolute";ghostDiv.style.zIndex="-1000000";document.body.appendChild(ghostDiv);var ghostSvgContainer=new SVGContainer(ghostDiv,true);ghostPaper=new Paper(ghostSvgContainer.SVGContainer,"ghost")}return ghostPaper}var Pattern=function(_super){__extends(Pattern,_super);function Pattern(){var _this=_super.call(this)||this;_this._elements=new List;_this.properties={};_this.className="Pattern";_this.width=10;_this.height=10;_this.x=0;_this.y=0;_this.patternUnits="userSpaceOnUse";var interfaceColors=new InterfaceColorSet;_this.backgroundFill=interfaceColors.getFor("background");_this.backgroundOpacity=0;_this.fillOpacity=1;_this.fill=interfaceColors.getFor("alternativeBackground");_this.stroke=interfaceColors.getFor("alternativeBackground");_this.strokeOpacity=1;_this.strokeWidth=1;_this.shapeRendering="crispEdges";_this.rotation=0;_this.element=_this.paper.addGroup("pattern");_this.id="pattern-"+registry.getUniqueId();_this.element.attr({id:_this.id});_this._disposers.push(_this.element);_this._disposers.push(new ListDisposer(_this._elements));_this.patternUnits=_this.patternUnits;_this.width=_this.width;_this.height=_this.height;_this.applyTheme();return _this}Pattern.prototype.draw=function(){var _this=this;var patternElement=this.element;if(patternElement){patternElement.removeChildNodes();var background=this.paper.add("rect");background.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0});patternElement.add(background);patternElement.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray});each(this._elements.iterator(),(function(element){element.rotation=_this.rotation;element.rotationX=_this.properties["rotationX"];element.rotationY=_this.properties["rotationY"];_this.element.add(element)}))}};Pattern.prototype.animate=function(animationOptions,duration,easing){return new Animation(this,animationOptions,duration,easing).start()};Pattern.prototype.addElement=function(element){this._elements.push(element);this._disposers.push(element)};Pattern.prototype.removeElement=function(element){this._elements.removeValue(element);this.removeDispose(element)};Object.defineProperty(Pattern.prototype,"elements",{get:function(){return this._elements},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"fillOpacity",{get:function(){return this.properties["fillOpacity"]},set:function(value){this.properties["fillOpacity"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"fill",{get:function(){return this.properties["fill"]},set:function(value){this.properties["fill"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"backgroundFill",{get:function(){return this.properties["backgroundFill"]},set:function(value){this.properties["backgroundFill"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"backgroundOpacity",{get:function(){return this.properties["backgroundOpacity"]},set:function(value){this.properties["backgroundOpacity"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"stroke",{get:function(){return this.properties["stroke"]},set:function(value){this.properties["stroke"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"strokeOpacity",{get:function(){return this.properties["strokeOpacity"]},set:function(value){this.properties["strokeOpacity"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"strokeWidth",{get:function(){return this.properties["strokeWidth"]},set:function(value){this.properties["strokeWidth"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"shapeRendering",{get:function(){return this.properties["shapeRendering"]},set:function(value){this.properties["shapeRendering"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"rotation",{get:function(){return this.properties["rotation"]},set:function(value){this.properties["rotation"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"patternUnits",{get:function(){return this.properties["patternUnits"]},set:function(value){this.properties["patternUnits"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"width",{get:function(){return this.properties["width"]},set:function(value){this.properties["width"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"height",{get:function(){return this.properties["height"]},set:function(value){this.properties["height"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"x",{get:function(){return this.properties["x"]},set:function(value){this.properties["x"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"y",{get:function(){return this.properties["y"]},set:function(value){this.properties["y"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"paper",{get:function(){if(this._paper){return this._paper}return getGhostPaper()},set:function(paper){if(this._paper!=paper){this._paper=paper;this.draw();paper.appendDef(this.element)}},enumerable:true,configurable:true});Pattern.prototype.copyFrom=function(source){var _this=this;_super.prototype.copyFrom.call(this,source);each$1(source.properties,(function(key,value){_this[key]=value}))};Object.defineProperty(Pattern.prototype,"animations",{get:function(){if(!this._animations){this._animations=[];this._disposers.push(new AnimationDisposer(this._animations))}return this._animations},enumerable:true,configurable:true});Object.defineProperty(Pattern.prototype,"strokeDasharray",{get:function(){return this.properties["strokeDashArray"]},set:function(value){this.properties["strokeDashArray"]=value;this.draw()},enumerable:true,configurable:true});Pattern.prototype.processConfig=function(config){if(config){if(hasValue(config.elements)&&isArray$6(config.elements)){for(var i=0,len=config.elements.length;i<len;i++){var element=config.elements[i];if(hasValue(element["type"])){var sprite=this.createEntryInstance(element);if(sprite instanceof BaseObject){sprite.config=element}this.addElement(hasValue(element["typeProperty"])?sprite[element["typeProperty"]]:sprite.element)}}}}_super.prototype.processConfig.call(this,config)};return Pattern}(BaseObject);registry.registeredClasses["Pattern"]=Pattern;var LinearGradient=function(_super){__extends(LinearGradient,_super);function LinearGradient(){var _this=_super.call(this)||this;_this._stops=new List;_this._rotation=0;_this.className="LinearGradient";_this._stops.events.on("setIndex",_this.validate,_this);_this._stops.events.on("inserted",_this.validate,_this);_this.element=_this.paper.addGroup("linearGradient");_this.id="gradient-"+registry.getUniqueId();_this.element.attr({id:_this.id});_this._disposers.push(_this.element);_this.applyTheme();return _this}LinearGradient.prototype.validate=function(){var _this=this;var rotation=(this._rotation+90)*RADIANS;var x1=Math.round(50+Math.sin(rotation+Math.PI)*50)+"%";var y1=Math.round(50+Math.cos(rotation)*50)+"%";var x2=Math.round(50+Math.sin(rotation)*50)+"%";var y2=Math.round(50+Math.cos(rotation+Math.PI)*50)+"%";var gradientElement=this.element;gradientElement.removeChildNodes();gradientElement.attr({x1,x2,y1,y2});each(indexed(this._stops.iterator()),(function(a){var i=a[0];var stop=a[1];var offset=stop.offset;if(!isNumber$1(offset)){offset=i/(_this._stops.length-1)}var gradientStop=_this.paper.add("stop");if(hasValue(stop.color)){gradientStop.attr({"stop-color":stop.color.toString()})}if(isNumber$1(stop.opacity)){gradientStop.attr({"stop-opacity":stop.opacity})}if(isNumber$1(offset)){gradientStop.attr({offset})}gradientElement.add(gradientStop)}))};LinearGradient.prototype.clear=function(){this._stops.clear()};LinearGradient.prototype.addColor=function(color,opacity,offset){this._stops.push({color,opacity,offset})};Object.defineProperty(LinearGradient.prototype,"stops",{get:function(){return this._stops},enumerable:true,configurable:true});Object.defineProperty(LinearGradient.prototype,"paper",{get:function(){if(this._paper){return this._paper}return getGhostPaper()},set:function(paper){if(this._paper!=paper){this._paper=paper;this.validate();paper.appendDef(this.element)}},enumerable:true,configurable:true});Object.defineProperty(LinearGradient.prototype,"rotation",{get:function(){return this._rotation},set:function(value){this._rotation=value;this.validate()},enumerable:true,configurable:true});LinearGradient.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.stops.copyFrom(source.stops);this._rotation=source.rotation};Object.defineProperty(LinearGradient.prototype,"gradientUnits",{set:function(value){this.element.attr({gradientUnits:value})},enumerable:true,configurable:true});return LinearGradient}(BaseObject);registry.registeredClasses["LinearGradient"]=LinearGradient;var RadialGradient=function(_super){__extends(RadialGradient,_super);function RadialGradient(){var _this=_super.call(this)||this;_this._stops=new List;_this.element=_this.paper.addGroup("radialGradient");_this.id="gradient-"+registry.getUniqueId();_this.element.attr({id:_this.id});_this._disposers.push(_this.element);_this.applyTheme();return _this}RadialGradient.prototype.draw=function(){var _this=this;var gradientElement=this.element;if(isNumber$1(this.cx)){var value=this.cx;if(value instanceof Percent){value=value.percent+"%"}gradientElement.attr({cx:value})}if(isNumber$1(this.cy)){var value=this.cy;if(value instanceof Percent){value=value.percent+"%"}gradientElement.attr({cy:value})}if(this.fx){var value=this.fx;if(value instanceof Percent){value=value.percent+"%"}gradientElement.attr({fx:value})}if(this.fy){var value=this.fy;if(value instanceof Percent){value=value.percent+"%"}gradientElement.attr({fy:value})}gradientElement.removeChildNodes();each(indexed(this._stops.iterator()),(function(a){var i=a[0];var stop=a[1];var offset=stop.offset;if(!isNumber$1(offset)){offset=i/(_this._stops.length-1)}var gradientStop=_this.paper.add("stop");if(hasValue(stop.color)){gradientStop.attr({"stop-color":stop.color.toString()})}if(isNumber$1(stop.opacity)){gradientStop.attr({"stop-opacity":stop.opacity})}if(isNumber$1(offset)){gradientStop.attr({offset})}gradientElement.add(gradientStop)}))};RadialGradient.prototype.addColor=function(color,opacity,offset){this._stops.push({color,opacity,offset});this.draw()};Object.defineProperty(RadialGradient.prototype,"paper",{get:function(){if(this._paper){return this._paper}return getGhostPaper()},set:function(paper){if(this._paper!=paper){this._paper=paper;this.draw();paper.appendDef(this.element)}},enumerable:true,configurable:true});Object.defineProperty(RadialGradient.prototype,"cx",{get:function(){return this._cx},set:function(value){this._cx=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(RadialGradient.prototype,"cy",{get:function(){return this._cy},set:function(value){this._cy=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(RadialGradient.prototype,"fx",{get:function(){return this._fx},set:function(value){this._fx=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(RadialGradient.prototype,"fy",{get:function(){return this._fy},set:function(value){this._fy=value;this.draw()},enumerable:true,configurable:true});RadialGradient.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.stops.copyFrom(source.stops);this.cx=source.cx;this.cy=source.cy;this.fx=source.fx;this.fy=source.fy};Object.defineProperty(RadialGradient.prototype,"stops",{get:function(){return this._stops},enumerable:true,configurable:true});RadialGradient.prototype.clear=function(){this._stops.clear()};return RadialGradient}(BaseObject);registry.registeredClasses["RadialGradient"]=RadialGradient;var MouseCursorStyle=function(){function MouseCursorStyle(){}MouseCursorStyle.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}];MouseCursorStyle.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}];MouseCursorStyle.pointer=[{property:"cursor",value:"pointer"}];MouseCursorStyle.default=[{property:"cursor",value:"default"}];MouseCursorStyle.horizontalResize=[{property:"cursor",value:"ew-resize"}];MouseCursorStyle.verticalResize=[{property:"cursor",value:"ns-resize"}];MouseCursorStyle.notAllowed=[{property:"cursor",value:"not-allowed"}];MouseCursorStyle.text=[{property:"cursor",value:"text"}];return MouseCursorStyle}();var en={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(day){var res="th";if(day<11||day>13){switch(day%10){case 1:res="st";break;case 2:res="nd";break;case 3:res="rd";break}}return res},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};var Language=function(_super){__extends(Language,_super);function Language(){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this._locale=en;_this._defaultLocale=en;_this.className="Language";if(hasValue(options.defaultLocale)){_this.locale=options.defaultLocale}_this.applyTheme();return _this}Language.prototype.getLocale=function(locale){if(locale==null){locale=this._locale}return this.adapter.apply("locale",{locale}).locale};Language.prototype.translate=function(prompt,locale){var rest=[];for(var _i=2;_i<arguments.length;_i++){rest[_i-2]=arguments[_i]}locale=this.getLocale(locale);var translation=prompt;var translations=this.getTranslations(locale);var value=translations[prompt];if(value===null){translation=""}else if(hasValue(value)){if(value){translation=value}}else if(locale!==this._defaultLocale){return this.translate.apply(this,__spread([prompt,this._defaultLocale],rest))}if(rest.length){for(var len=rest.length,i=0;i<len;++i){translation=translation.split("%"+(i+1)).join(rest[i])}}return this.adapter.apply("translate",{translation,locale}).translation};Language.prototype.translateAny=function(prompt,locale){var rest=[];for(var _i=2;_i<arguments.length;_i++){rest[_i-2]=arguments[_i]}return this.translate.apply(this,__spread([prompt,locale],rest))};Language.prototype.setTranslationAny=function(prompt,translation,locale){var localeTarget=locale||this.locale;localeTarget[prompt]=translation};Language.prototype.translateEmpty=function(prompt,locale){var rest=[];for(var _i=2;_i<arguments.length;_i++){rest[_i-2]=arguments[_i]}var translation=this.translate.apply(this,__spread([prompt,locale],rest));return translation==prompt?"":translation};Language.prototype.translateFunc=function(prompt,locale){locale=this.getLocale(locale);var translations=this.getTranslations(locale);var value=translations[prompt];if(value!=null){return value}if(locale!==this._defaultLocale){return this.translateFunc(prompt,this._defaultLocale)}return function(){return""}};Language.prototype.translateAll=function(list,locale){var _this=this;if(!this.isDefault()){return map$1(list,(function(x){return _this.translate(x,locale)}))}else{return list}};Language.prototype.isDefault=function(){return this._defaultLocale===this._locale};Object.defineProperty(Language.prototype,"locale",{get:function(){return this._locale},set:function(value){if(this._locale!=value){this._locale=value;if(this.events.isEnabled("localechanged")){var event_1={type:"localechanged",locale:value,target:this};this.events.dispatchImmediately("localechanged",event_1)}}},enumerable:true,configurable:true});Language.prototype.getTranslations=function(locale){return this.adapter.apply("translations",{translations:locale,locale}).translations};return Language}(BaseObjectEvents);var TextFormatter=function(_super){__extends(TextFormatter,_super);function TextFormatter(){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this.className="TextFormatter";_this.applyTheme();return _this}TextFormatter.prototype.debug=function(){};TextFormatter.prototype.format=function(text,output){if(!hasValue(output)){output="svg"}var formatted="";text=this.escape(text);var styles=text.match(/\[([^\]]*?)\]/gm);if(!styles){return this.wrap(text,"",output)}var texts=text.split(/\[[^\[\]]*\]/);for(var i=0,len=texts.length;i<len;i++){var t=texts[i];if(t===""){continue}t=this.adapter.apply("chunk",t);var s="";if(i>0){s=styles[i-1].replace("[","").replace("]","")}formatted+=this.wrap(t,s,output)}formatted=this.unescape(formatted);return this.cleanUp(formatted)};TextFormatter.prototype.escape=function(text){return text.replace(/\[\[/g,registry.getPlaceholder("1")).replace(/([^\/\]]{1})\]\]/g,"$1"+registry.getPlaceholder("2")).replace(/\]\]/g,registry.getPlaceholder("2")).replace(/\{\{/g,registry.getPlaceholder("3")).replace(/\}\}/g,registry.getPlaceholder("4")).replace(/\'\'/g,registry.getPlaceholder("5"))};TextFormatter.prototype.unescape=function(text){return text.replace(new RegExp(registry.getPlaceholder("1"),"g"),"[[").replace(new RegExp(registry.getPlaceholder("2"),"g"),"]]").replace(new RegExp(registry.getPlaceholder("3"),"g"),"{{").replace(new RegExp(registry.getPlaceholder("4"),"g"),"}}").replace(new RegExp(registry.getPlaceholder("5"),"g"),"''")};TextFormatter.prototype.cleanUp=function(text){return text.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")};TextFormatter.prototype.wrap=function(text,style,output){if(style===""||style==="/"){style=""}switch(output){case"html":return this.wrapHtml(text,this.translateStyleShortcuts(style));default:return this.wrapSvg(text,this.translateStyleShortcuts(style))}};TextFormatter.prototype.wrapSvg=function(text,style){if(style===""){return"<tspan>"+text+"</tspan>"}else{return"<tspan style='"+style+"'>"+text+"</tspan>"}};TextFormatter.prototype.getSvgElement=function(text,style){var element=new AMElement("tspan");element.textContent=text;if(style){element.node.setAttribute("style",style)}return element};TextFormatter.prototype.wrapHtml=function(text,style){if(style===""){return"<span>"+text+"</span>"}else{return"<span style='"+this.styleSvgToHtml(style)+"'>"+text+"</span>"}};TextFormatter.prototype.getHtmlElement=function(text,style){var element=document.createElement("span");element.innerHTML=text;if(style){element.setAttribute("style",style)}return element};TextFormatter.prototype.styleSvgToHtml=function(style){style=style.replace(/fill:/,"color:");return style};TextFormatter.prototype.translateStyleShortcuts=function(style){if(style==""||style=="[ ]"){return""}var cached=registry.getCache("translateStyleShortcuts_"+style);if(cached){return cached}var q=style.match(/('[^']*')|("[^"]*")/gi);if(q){for(var i=0;i<q.length;i++){style=style.replace(q[i],q[i].replace(/['"]*/g,"").replace(/[ ]+/g,"+"))}}var b=style.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!b){return style}for(var i=0;i<b.length;i++){if(b[i].match(/^bold$/i)){b[i]="font-weight:"+b[i]}else if(b[i]=="/"){b[i]=""}else if(!b[i].match(/:/)){b[i]="fill:"+b[i]}else{b[i]=b[i].replace(/\+/g," ")}}var res=b.join(";");registry.setCache("translateStyleShortcuts_"+style,res);return res};TextFormatter.prototype.chunk=function(text,quotedBlocks,noFormatting){if(quotedBlocks===void 0){quotedBlocks=false}if(noFormatting===void 0){noFormatting=false}var res=[];text=this.escape(text);var chunks=quotedBlocks?text.split("'"):[text];for(var i=0;i<chunks.length;i++){var chunk=chunks[i];if(chunk===""){continue}if(i%2===0){chunk=chunk.replace(/\]\[/g,"]"+PLACEHOLDER+"[");chunk=chunk.replace(/\[\]/g,"[ ]");var chunks2=chunk.split(/[\[\]]+/);for(var i2=0;i2<chunks2.length;i2++){var chunk2=this.cleanUp(this.unescape(chunks2[i2]));if(chunk2===PLACEHOLDER){continue}if(chunk2===""){continue}if(i2%2===0){res.push({type:"value",text:this.adapter.apply("chunk",chunk2)})}else{res.push({type:noFormatting?"value":"format",text:"["+chunk2+"]"})}}}else{var chunks2=chunk.split(/[\[\]]+/);for(var i2=0;i2<chunks2.length;i2++){var chunk2=this.cleanUp(this.unescape(chunks2[i2]));if(chunk2===""){continue}if(i2%2===0){res.push({type:"text",text:chunk2})}else if(this.isImage(chunk2)){res.push({type:"image",text:"["+chunk2+"]"})}else{res.push({type:"format",text:"["+chunk2+"]"})}}}}return res};TextFormatter.prototype.isImage=function(text){return text.match(/img[ ]?:/)?true:false};return TextFormatter}(BaseObject);var formatter;function getTextFormatter(){if(formatter==null){formatter=new TextFormatter}return formatter}registry.registeredClasses["TextFormatter"]=TextFormatter;var NumberFormatter=function(_super){__extends(NumberFormatter,_super);function NumberFormatter(){var _this=_super.call(this)||this;_this._negativeBase=0;_this._numberFormat="#,###.#####";_this._outputFormat="svg";_this._smallNumberThreshold=1;_this._forceLTR=false;_this.className="NumberFormatter";_this.applyTheme();return _this}NumberFormatter.prototype.dispose=function(){_super.prototype.dispose.call(this);if(this.language){this.language.dispose()}};Object.defineProperty(NumberFormatter.prototype,"language",{get:function(){if(!this._language){if(this.sprite){this._language=this.sprite.language}else{this._language=new Language}}return this._language},set:function(value){this._language=value},enumerable:true,configurable:true});NumberFormatter.prototype.format=function(value,format,precision){if(typeof format==="undefined"||isString$1(format)&&format.toLowerCase()==="number"){format=this._numberFormat}var formatted;var source=Number(value);if(isObject$4(format)){try{if(this.intlLocales){return new Intl.NumberFormat(this.intlLocales,format).format(source)}else{return new Intl.NumberFormat(undefined,format).format(source)}}catch(e){return"Invalid"}}else{format=cleanFormat(format);var info=this.parseFormat(format,this.language);var details=void 0;if(source>this._negativeBase){details=info.positive}else if(source<this._negativeBase){details=info.negative}else{details=info.zero}if(hasValue(precision)&&!details.mod){details=clone$2(details);details.decimals.active=source==0?0:precision}formatted=details.template.split(PLACEHOLDER).join(this.applyFormat(source,details))}if(this.forceLTR){formatted=""+formatted}return formatted};NumberFormatter.prototype.parseFormat=function(format,language){var _this=this;var cached=this.getCache(format);if(hasValue(cached)){return cached}var info={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:language.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:language.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:false},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:language.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:language.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:false},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:language.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:language.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:false}};format=format.replace("||",PLACEHOLDER2);var parts=format.split("|");info.positive.source=parts[0];if(typeof parts[2]==="undefined"){info.zero=info.positive}else{info.zero.source=parts[2]}if(typeof parts[1]==="undefined"){info.negative=info.positive}else{info.negative.source=parts[1]}each$1(info,(function(part,item){if(item.parsed){return}if(typeof _this.getCache(item.source)!=="undefined"){info[part]=_this.getCache(item.source);return}var partFormat=item.source;if(partFormat.toLowerCase()==="number"){partFormat=isString$1(_this._numberFormat)?_this._numberFormat:"#,###.#####"}var chunks=getTextFormatter().chunk(partFormat,true);for(var i=0;i<chunks.length;i++){var chunk=chunks[i];chunk.text=chunk.text.replace(PLACEHOLDER2,"|");if(chunk.type==="value"){var matches=chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/);if(matches){if(matches===null||matches[0]===""){item.template+=chunk.text}else{var mods=matches[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/);if(mods){item.mod=mods[0].toLowerCase();item.modSpacing=matches[0].match(/[ ]{1}[abespABESP%!]{1}$/)?true:false}var a=matches[0].split(".");if(a[0]==="");else{item.thousands.active=(a[0].match(/0/g)||[]).length;item.thousands.passive=(a[0].match(/\#/g)||[]).length+item.thousands.active;var b=a[0].split(",");if(b.length===1);else{item.thousands.interval=getValue$4(b.pop()).length;if(item.thousands.interval===0){item.thousands.interval=-1}}}if(typeof a[1]==="undefined");else{item.decimals.active=(a[1].match(/0/g)||[]).length;item.decimals.passive=(a[1].match(/\#/g)||[]).length+item.decimals.active}item.template+=chunk.text.split(matches[0]).join(PLACEHOLDER)}}}else{item.template+=chunk.text}}_this.setCache(item.source,item);item.parsed=true}));this.setCache(format,info);return info};NumberFormatter.prototype.applyFormat=function(value,details){var negative=value<0;value=Math.abs(value);var prefix="",suffix="";var mods=details.mod?details.mod.split(""):[];if(mods.indexOf("b")!==-1){var a_1=this.applyPrefix(value,this.bytePrefixes,mods.indexOf("!")!==-1);value=a_1[0];prefix=a_1[1];suffix=a_1[2];if(details.modSpacing){suffix=" "+suffix}}else if(mods.indexOf("a")!==-1){var a_2=this.applyPrefix(value,value<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,mods.indexOf("!")!==-1);value=a_2[0];prefix=a_2[1];suffix=a_2[2];if(details.modSpacing){suffix=" "+suffix}}else if(mods.indexOf("p")!==-1){var ol=Math.min(value.toString().length+2,21);value=parseFloat(value.toPrecision(ol));prefix=this.language.translate("_percentPrefix")||"";suffix=this.language.translate("_percentSuffix")||"";if(prefix==""&&suffix==""){suffix="%"}}else if(mods.indexOf("%")!==-1){var ol=min$2(value.toString().length+2,21);value*=100;value=parseFloat(value.toPrecision(ol));suffix="%"}else if(mods.indexOf("")!==-1){var ol=min$2(value.toString().length+3,21);value*=1e3;value=parseFloat(value.toPrecision(ol));suffix=""}if(mods.indexOf("e")!==-1){var exp=void 0;if(details.decimals.passive>=0){exp=value.toExponential(details.decimals.passive).split("e")}else{exp=value.toExponential().split("e")}value=Number(exp[0]);suffix="e"+exp[1];if(details.modSpacing){suffix=" "+suffix}}else if(details.decimals.passive===0){value=Math.round(value)}else if(details.decimals.passive>0){var d=Math.pow(10,details.decimals.passive);value=Math.round(value*d)/d}var res="";var a=numberToString(value).split(".");var ints=a[0];if(ints.length<details.thousands.active){ints=Array(details.thousands.active-ints.length+1).join("0")+ints}if(details.thousands.interval>0){var ip=[];var intsr=ints.split("").reverse().join("");for(var i=0,len=ints.length;i<=len;i+=details.thousands.interval){var c=intsr.substr(i,details.thousands.interval).split("").reverse().join("");if(c!==""){ip.unshift(c)}}ints=ip.join(details.thousands.separator)}res+=ints;if(a.length===1){a.push("")}var decs=a[1];if(decs.length<details.decimals.active){decs+=Array(details.decimals.active-decs.length+1).join("0")}if(decs!==""){res+=details.decimals.separator+decs}if(res===""){res="0"}if(value!==0&&negative&&mods.indexOf("s")===-1){res="-"+res}if(prefix){res=prefix+res}if(suffix){res+=suffix}return res};NumberFormatter.prototype.applyPrefix=function(value,prefixes,force){if(force===void 0){force=false}var newvalue=value;var prefix="";var suffix="";var applied=false;var k=1;for(var i=0,len=prefixes.length;i<len;i++){if(prefixes[i].number<=value){if(prefixes[i].number===0){newvalue=0}else{newvalue=value/prefixes[i].number;k=prefixes[i].number}prefix=prefixes[i].prefix;suffix=prefixes[i].suffix;applied=true}}if(!applied&&force&&prefixes.length&&value!=0){newvalue=value/prefixes[0].number;prefix=prefixes[0].prefix;suffix=prefixes[0].suffix;applied=true}if(applied){newvalue=parseFloat(newvalue.toPrecision(min$2(k.toString().length+Math.floor(newvalue).toString().replace(/[^0-9]*/g,"").length,21)))}return[newvalue,prefix,suffix]};NumberFormatter.prototype.invalidateSprite=function(){if(this.sprite){this.sprite.invalidate()}};Object.defineProperty(NumberFormatter.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(format){this._numberFormat=format},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(value){this._intlLocales=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(value){this._negativeBase=value},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"bigNumberPrefixes",{get:function(){if(!hasValue(this._bigNumberPrefixes)){this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]}return this._bigNumberPrefixes},set:function(prefixes){this._bigNumberPrefixes=prefixes},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"smallNumberPrefixes",{get:function(){if(!hasValue(this._smallNumberPrefixes)){this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]}return this._smallNumberPrefixes},set:function(prefixes){this._smallNumberPrefixes=prefixes},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(value){this._smallNumberThreshold=value},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"bytePrefixes",{get:function(){if(!hasValue(this._bytePrefixes)){this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]}return this._bytePrefixes},set:function(prefixes){this._bytePrefixes=prefixes},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(outputFormat){this._outputFormat=outputFormat.toLowerCase();this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(NumberFormatter.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(value){this._forceLTR=value;this.invalidateSprite()},enumerable:true,configurable:true});NumberFormatter.prototype.escape=function(text){return text.replace("||",PLACEHOLDER2)};NumberFormatter.prototype.unescape=function(text){return text.replace(PLACEHOLDER2,"|")};return NumberFormatter}(BaseObject);registry.registeredClasses["NumberFormatter"]=NumberFormatter;var DateFormatter=function(_super){__extends(DateFormatter,_super);function DateFormatter(){var _this=_super.call(this)||this;_this._dateFormat="yyyy-MM-dd";_this._inputDateFormat="yyyy-MM-dd";_this._utc=false;_this.timezoneMinutes=0;_this._firstDayOfWeek=1;_this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];_this.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];_this.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];_this.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];_this._outputFormat="svg";_this.capitalize=true;_this.className="DateFormatter";_this.applyTheme();return _this}Object.defineProperty(DateFormatter.prototype,"language",{get:function(){return this._language},set:function(value){this._language=value;this.dateFormat=this._language.translate("_date")},enumerable:true,configurable:true});DateFormatter.prototype.format=function(source,format,applyTimezone){if(!this.language){if(this.sprite){this.language=this.sprite.language}else{this.language=new Language}}if(typeof format==="undefined"||format===""){format=this._dateFormat}var formatted;var date;if(isString$1(source)){date=this.parse(source)}else{date=anyToDate(source)}if(isObject$4(format)){try{if(this.intlLocales){return new Intl.DateTimeFormat(this.intlLocales,format).format(date)}else{return new Intl.DateTimeFormat(undefined,format).format(date)}}catch(e){return"Invalid"}}else{format=cleanFormat(format);var info=this.parseFormat(format);if(hasValue(this.timezoneOffset)){date.setMinutes(date.getMinutes()+date.getTimezoneOffset()-this.timezoneOffset)}else if(hasValue(this.timezone)&&applyTimezone!==false){date=setTimezone(date,this.timezone)}if(!isNumber$1(date.getTime())){return this.language.translate("Invalid date")}formatted=this.applyFormat(date,info,this.language);if(this.capitalize){formatted=formatted.replace(/^.{1}/,formatted.substr(0,1).toUpperCase())}}return formatted};DateFormatter.prototype.parseFormat=function(format){var cached=this.getCache(format);if(hasValue(cached)){return cached}var info={template:"",parts:[]};var chunks=getTextFormatter().chunk(format,true);for(var i=0;i<chunks.length;i++){var chunk=chunks[i];if(chunk.type==="value"){if(chunk.text.match(/^date$/i)&&isString$1(this._dateFormat)){chunk.text=this._dateFormat}var matches=chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(matches){for(var x=0;x<matches.length;x++){info.parts.push(matches[x]);chunk.text=chunk.text.replace(matches[x],PLACEHOLDER)}}}info.template+=chunk.text}this.setCache(format,info);return info};DateFormatter.prototype.applyFormat=function(date,info,language){var res=info.template;var fullYear,month,weekday,day,hours,minutes,seconds,milliseconds,offset=date.getTimezoneOffset(),timestamp=date.getTime();if(this.utc){fullYear=date.getUTCFullYear();month=date.getUTCMonth();weekday=date.getUTCDay();day=date.getUTCDate();hours=date.getUTCHours();minutes=date.getUTCMinutes();seconds=date.getUTCSeconds();milliseconds=date.getUTCMilliseconds()}else{fullYear=date.getFullYear();month=date.getMonth();weekday=date.getDay();day=date.getDate();hours=date.getHours();minutes=date.getMinutes();seconds=date.getSeconds();milliseconds=date.getMilliseconds()}for(var i=0,len=info.parts.length;i<len;i++){var value="";switch(info.parts[i]){case"G":value=language.translate(fullYear<0?"_era_bc":"_era_ad");break;case"yyyy":value=Math.abs(fullYear).toString();if(fullYear<0){value+=language.translate("_era_bc")}break;case"yyy":case"yy":case"y":value=Math.abs(fullYear).toString().substr(-info.parts[i].length);if(fullYear<0){value+=language.translate("_era_bc")}break;case"YYYY":case"YYY":case"YY":case"Y":var week=getWeek(date);var year=fullYear;if(week==1&&weekday>4){year--}if(info.parts[i]=="YYYY"){value=Math.abs(year).toString()}else{value=Math.abs(year).toString().substr(-info.parts[i].length)}if(year<0){value+=language.translate("_era_bc")}break;case"u":break;case"q":value=""+Math.ceil((date.getMonth()+1)/3);break;case"MMMMM":value=language.translate(this.months[month]).substr(0,1);break;case"MMMM":value=language.translate(this.months[month]);break;case"MMM":value=language.translate(this.monthsShort[month]);break;case"MM":value=padString(month+1,2,"0");break;case"M":value=(month+1).toString();break;case"ww":value=padString(getWeek(date),2,"0");break;case"w":value=getWeek(date).toString();break;case"W":value=getMonthWeek(date).toString();break;case"dd":value=padString(day,2,"0");break;case"d":value=day.toString();break;case"DD":case"DDD":value=padString(getYearDay(date).toString(),info.parts[i].length,"0");break;case"D":value=getYearDay(date).toString();break;case"F":break;case"g":break;case"t":value=language.translateFunc("_dateOrd").call(this,day);break;case"E":value=(weekday||7).toString();break;case"EE":value=padString((weekday||7).toString(),2,"0");break;case"EEE":case"eee":value=language.translate(this.weekdaysShort[weekday]);break;case"EEEE":case"eeee":value=language.translate(this.weekdays[weekday]);break;case"EEEEE":case"eeeee":value=language.translate(this.weekdays[weekday]).substr(0,1);break;case"e":case"ee":value=(weekday-this.firstDayOfWeek+1).toString();if(info.parts[i]=="ee"){value=padString(value,2,"0")}break;case"a":if(hours>=12){value=language.translate("PM")}else{value=language.translate("AM")}break;case"aa":if(hours>=12){value=language.translate("P.M.")}else{value=language.translate("A.M.")}break;case"aaa":if(hours>=12){value=language.translate("P")}else{value=language.translate("A")}break;case"h":value=get12Hours(hours).toString();break;case"hh":value=padString(get12Hours(hours),2,"0");break;case"H":value=hours.toString();break;case"HH":value=padString(hours,2,"0");break;case"K":value=get12Hours(hours,0).toString();break;case"KK":value=padString(get12Hours(hours,0),2,"0");break;case"k":value=(hours+1).toString();break;case"kk":value=padString(hours+1,2,"0");break;case"m":value=minutes.toString();break;case"mm":value=padString(minutes,2,"0");break;case"s":value=seconds.toString();break;case"ss":value=padString(seconds,2,"0");break;case"S":case"SS":case"SSS":value=Math.round(milliseconds/1e3*Math.pow(10,info.parts[i].length)).toString();break;case"x":value=timestamp.toString();break;case"n":case"nn":case"nnn":value=padString(milliseconds,info.parts[i].length,"0");break;case"z":value=getTimeZone(date,false,false,this.utc);break;case"zz":value=getTimeZone(date,true,false,this.utc);break;case"zzz":value=getTimeZone(date,false,true,this.utc);break;case"zzzz":value=getTimeZone(date,true,true,this.utc);break;case"Z":case"ZZ":var tz=Math.abs(offset)/60;var tzh=Math.floor(tz);var tzm=tz*60-tzh*60;if(this.utc){tzh=0;tzm=0}if(info.parts[i]=="Z"){value="GMT";value+=offset>0?"-":"+";value+=padString(tzh,2)+":"+padString(tzm,2)}else{value=offset>0?"-":"+";value+=padString(tzh,2)+padString(tzm,2)}break;case"i":value=date.toISOString();break;case"I":value=date.toUTCString();break}res=res.replace(PLACEHOLDER,value)}return res};DateFormatter.prototype.parse=function(source,format){if(!hasValue(format)){format=this.inputDateFormat}if(source instanceof Date){return source}if(typeof source==="number"){return new Date(source)}if(typeof source!=="string"){source=source.toString()}if(!this.language){if(this.sprite){this.language=this.sprite.language}else{this.language=new Language}}var res;var reg="";format=cleanFormat(format);format=format.substr(0,source.length);var info=this.parseFormat(format);var parsedIndexes={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1};var resValues={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc};var indexAdjust=0,index=0;for(var i=0;i<info.parts.length;i++){index=i+indexAdjust+1;switch(info.parts[i]){case"yyyy":case"YYYY":reg+="([0-9]{4})";parsedIndexes.year=index;break;case"yyy":case"YYY":reg+="([0-9]{3})";parsedIndexes.year3=index;break;case"yy":case"YY":reg+="([0-9]{2})";parsedIndexes.year2=index;break;case"y":case"Y":reg+="([0-9]{1})";parsedIndexes.year1=index;break;case"MMMM":reg+="("+this.getStringList(this.months).join("|")+")";parsedIndexes.monthLong=index;break;case"MMM":reg+="("+this.getStringList(this.monthsShort).join("|")+")";parsedIndexes.monthShort=index;break;case"MM":case"M":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.month=index;break;case"ww":case"w":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.week=index;break;case"dd":case"d":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.day=index;break;case"DDD":case"DD":case"D":reg+="([0-9]{3}|[0-9]{2}|[0-9]{1})";parsedIndexes.yearDay=index;break;case"dddd":reg+="("+this.getStringList(this.weekdays).join("|")+")";parsedIndexes.weekdayLong=index;break;case"ddd":reg+="("+this.getStringList(this.weekdaysShort).join("|")+")";parsedIndexes.weekdayShort=index;break;case"aaa":case"aa":case"a":reg+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")";parsedIndexes.am=index;break;case"hh":case"h":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.hour12Base1=index;break;case"HH":case"H":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.hourBase0=index;break;case"KK":case"K":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.hour12Base0=index;break;case"kk":case"k":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.hourBase1=index;break;case"mm":case"m":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.minute=index;break;case"ss":case"s":reg+="([0-9]{2}|[0-9]{1})";parsedIndexes.second=index;break;case"SSS":case"SS":case"S":reg+="([0-9]{3}|[0-9]{2}|[0-9]{1})";parsedIndexes.millisecond=index;parsedIndexes.millisecondDigits=info.parts[i].length;break;case"nnn":case"nn":case"n":reg+="([0-9]{3}|[0-9]{2}|[0-9]{1})";parsedIndexes.millisecond=index;break;case"x":reg+="([0-9]{1,})";parsedIndexes.timestamp=index;break;case"Z":reg+="GMT([-+]+[0-9]{2}:[0-9]{2})";parsedIndexes.zone=index;break;case"ZZ":reg+="([\\-+]+[0-9]{2}[0-9]{2})";parsedIndexes.zone=index;break;case"i":reg+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)";parsedIndexes.iso=index;indexAdjust+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":indexAdjust--;break}reg+="[^0-9]*"}var regex=new RegExp(reg);var matches=source.match(regex);if(matches){if(parsedIndexes.year>-1){resValues.year=parseInt(matches[parsedIndexes.year])}if(parsedIndexes.year3>-1){var val=parseInt(matches[parsedIndexes.year3]);val+=1e3;resValues.year=val}if(parsedIndexes.year2>-1){var val=parseInt(matches[parsedIndexes.year2]);if(val>50){val+=1e3}else{val+=2e3}resValues.year=val}if(parsedIndexes.year1>-1){var val=parseInt(matches[parsedIndexes.year1]);val=Math.floor((new Date).getFullYear()/10)*10+val;resValues.year=val}if(parsedIndexes.monthLong>-1){resValues.month=this.resolveMonth(matches[parsedIndexes.monthLong])}if(parsedIndexes.monthShort>-1){resValues.month=this.resolveShortMonth(matches[parsedIndexes.monthShort])}if(parsedIndexes.month>-1){resValues.month=parseInt(matches[parsedIndexes.month])-1}if(parsedIndexes.week>-1&&parsedIndexes.day===-1){resValues.month=0;resValues.day=getDayFromWeek(parseInt(matches[parsedIndexes.week]),resValues.year,1,this.utc)}if(parsedIndexes.day>-1){resValues.day=parseInt(matches[parsedIndexes.day])}if(parsedIndexes.yearDay>-1){resValues.month=0;resValues.day=parseInt(matches[parsedIndexes.yearDay])}if(parsedIndexes.hourBase0>-1){resValues.hour=parseInt(matches[parsedIndexes.hourBase0])}if(parsedIndexes.hourBase1>-1){resValues.hour=parseInt(matches[parsedIndexes.hourBase1])-1}if(parsedIndexes.hour12Base0>-1){var val=parseInt(matches[parsedIndexes.hour12Base0]);if(val==11){val=0}if(parsedIndexes.am>-1&&!this.isAm(matches[parsedIndexes.am])){val+=12}resValues.hour=val}if(parsedIndexes.hour12Base1>-1){var val=parseInt(matches[parsedIndexes.hour12Base1]);if(val==12){val=0}if(parsedIndexes.am>-1&&!this.isAm(matches[parsedIndexes.am])){val+=12}resValues.hour=val}if(parsedIndexes.minute>-1){resValues.minute=parseInt(matches[parsedIndexes.minute])}if(parsedIndexes.second>-1){resValues.second=parseInt(matches[parsedIndexes.second])}if(parsedIndexes.millisecond>-1){var val=parseInt(matches[parsedIndexes.millisecond]);if(parsedIndexes.millisecondDigits==2){val*=10}else if(parsedIndexes.millisecondDigits==1){val*=100}resValues.millisecond=val}if(parsedIndexes.timestamp>-1){resValues.timestamp=parseInt(matches[parsedIndexes.timestamp]);var ts=new Date(resValues.timestamp);resValues.year=ts.getUTCFullYear();resValues.month=ts.getUTCMonth();resValues.day=ts.getUTCDate();resValues.hour=ts.getUTCHours();resValues.minute=ts.getUTCMinutes();resValues.second=ts.getUTCSeconds();resValues.millisecond=ts.getUTCMilliseconds()}if(parsedIndexes.zone>-1){resValues.offset=this.resolveTimezoneOffset(new Date(resValues.year,resValues.month,resValues.day),matches[parsedIndexes.zone])}if(parsedIndexes.iso>-1){resValues.year=toNumber$1(matches[parsedIndexes.iso+0]);resValues.month=toNumber$1(matches[parsedIndexes.iso+1])-1;resValues.day=toNumber$1(matches[parsedIndexes.iso+2]);resValues.hour=toNumber$1(matches[parsedIndexes.iso+3]);resValues.minute=toNumber$1(matches[parsedIndexes.iso+4]);resValues.second=toNumber$1(matches[parsedIndexes.iso+5]);resValues.millisecond=toNumber$1(matches[parsedIndexes.iso+6]);if(matches[parsedIndexes.iso+7]=="Z"||matches[parsedIndexes.iso+7]=="z"){resValues.utc=true}else if(matches[parsedIndexes.iso+7]!=""){resValues.offset=this.resolveTimezoneOffset(new Date(resValues.year,resValues.month,resValues.day),matches[parsedIndexes.iso+7])}}if(resValues.utc){res=new Date(Date.UTC(resValues.year,resValues.month,resValues.day,resValues.hour,resValues.minute,resValues.second,resValues.millisecond))}else{res=new Date(resValues.year,resValues.month,resValues.day,resValues.hour,resValues.minute+resValues.offset,resValues.second,resValues.millisecond)}}else{res=new Date(source)}return res};DateFormatter.prototype.resolveTimezoneOffset=function(date,zone){var value=zone.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);if(value){var match=getValue$4(zone.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/));var dir=match[1];var hour=match[2];var minute=match[3];var offset=parseInt(hour)*60+parseInt(minute);if(dir=="+"){offset*=-1}var originalOffset=(date||new Date).getTimezoneOffset();var diff=offset-originalOffset;return diff}return 0};DateFormatter.prototype.resolveMonth=function(value){var month=this.months.indexOf(value);if(month>-1){return month}if(this.language&&!this.language.isDefault()){month=this.language.translateAll(this.months).indexOf(value);if(month>-1){return month}}return 0};DateFormatter.prototype.resolveShortMonth=function(value){var month=this.monthsShort.indexOf(value);if(month>-1){return month}month=this.months.indexOf(value);if(month>-1){return month}if(this.language&&!this.language.isDefault()){month=this.language.translateAll(this.monthsShort).indexOf(value);if(month>-1){return month}}return 0};DateFormatter.prototype.isAm=function(value){var list=this.getStringList(["AM","A.M.","A"]);return list.indexOf(value.toUpperCase())>-1};DateFormatter.prototype.invalidateSprite=function(){if(this.sprite){this.sprite.invalidate()}};DateFormatter.prototype.getStringList=function(list){var res=[];for(var i=0;i<list.length;i++){if(this.language){res.push(escapeForRgex(this.language.translate(list[i])))}else{res.push(escapeForRgex(list[i]))}}return res};Object.defineProperty(DateFormatter.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(value){this._dateFormat=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(value){this._inputDateFormat=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(value){this._intlLocales=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"utc",{get:function(){return this._utc},set:function(value){this._utc=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(value){if(this._timezoneOffset!=value){this._timezoneOffset=value;this.invalidateSprite()}},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"timezone",{get:function(){return this._timezone},set:function(value){if(this._timezone!=value){this._timezone=value;this.timezoneMinutes=getTimezoneMinutes(value);this.invalidateSprite()}},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(value){this._firstDayOfWeek=value;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DateFormatter.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(value){this._outputFormat=value.toLowerCase();this.invalidateSprite()},enumerable:true,configurable:true});return DateFormatter}(BaseObject);registry.registeredClasses["DateFormatter"]=DateFormatter;var DurationFormatter=function(_super){__extends(DurationFormatter,_super);function DurationFormatter(){var _this=_super.call(this)||this;_this._negativeBase=0;_this._baseUnit="second";_this._outputFormat="svg";_this._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};_this._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"};_this.className="DurationFormatter";_this.applyTheme();return _this}DurationFormatter.prototype.format=function(value,format,base){if(!this.language){if(this.sprite){this.language=this.sprite.language}else{this.language=new Language}}var baseUnit=base||this._baseUnit;if(typeof format==="undefined"||format===""){if(hasValue(this.durationFormat)){format=this.durationFormat}else{format=this.getFormat(toNumber$1(value),null,baseUnit)}}format=cleanFormat(format);var info=this.parseFormat(format,baseUnit);var source=Number(value);var details;if(source>this._negativeBase){details=info.positive}else if(source<this._negativeBase){details=info.negative}else{details=info.zero}var formatted=this.applyFormat(source,details);if(details.color!==""){if(this._outputFormat==="svg"){formatted="<tspan fill='"+details.color+"'>"+formatted+"</tspan>"}else if(this._outputFormat==="html"){formatted="<span style='color: "+details.color+";'>"+formatted+"</span>"}}return formatted};DurationFormatter.prototype.parseFormat=function(format,base){var _this=this;var cached=this.getCache(format);if(hasValue(cached)){return cached}var baseUnit=base||this._baseUnit;var info={positive:{color:"",template:"",parts:[],source:"",baseUnit,parsed:false,absolute:false},negative:{color:"",template:"",parts:[],source:"",baseUnit,parsed:false,absolute:false},zero:{color:"",template:"",parts:[],source:"",baseUnit,parsed:false,absolute:false}};format=format.replace("||",PLACEHOLDER2);var parts=format.split("|");info.positive.source=parts[0];if(typeof parts[2]==="undefined"){info.zero=info.positive}else{info.zero.source=parts[2]}if(typeof parts[1]==="undefined"){info.negative=info.positive}else{info.negative.source=parts[1]}each$1(info,(function(part,item){if(item.parsed){return}if(typeof _this.getCache(item.source)!=="undefined"){info[part]=_this.getCache(item.source);return}var partFormat=item.source;var dirs=[];dirs=item.source.match(/^\[([^\]]*)\]/);if(dirs&&dirs.length&&dirs[0]!==""){partFormat=item.source.substr(dirs[0].length);item.color=dirs[1]}var chunks=getTextFormatter().chunk(partFormat,true);for(var i=0;i<chunks.length;i++){var chunk=chunks[i];chunk.text=chunk.text.replace(PLACEHOLDER2,"|");if(chunk.type==="value"){if(chunk.text.match(/[yYMdDwhHKkmsSn]+a/)){item.absolute=true;chunk.text=chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1")}var matches=chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(matches){for(var x=0;x<matches.length;x++){if(!hasValue(matches[x])){matches[x]=_this._unitAliases[matches[x]]}item.parts.push(matches[x]);chunk.text=chunk.text.replace(matches[x],PLACEHOLDER)}}}item.template+=chunk.text}_this.setCache(item.source,item);item.parsed=true}));this.setCache(format,info);return info};DurationFormatter.prototype.applyFormat=function(value,details){var negative=!details.absolute&&value<this._negativeBase;value=Math.abs(value);var tstamp=this.toTimeStamp(value,details.baseUnit);var res=details.template;for(var i=0,len=details.parts.length;i<len;i++){var part=details.parts[i];var unit=this.toTimeUnit(part.substr(0,1));var digits=part.length;var ints=Math.floor(tstamp/this._unitValues[unit]);res=res.replace(PLACEHOLDER,padString(ints,digits,"0"));tstamp-=ints*this._unitValues[unit]}if(negative){res="-"+res}return res};DurationFormatter.prototype.toTimeStamp=function(value,baseUnit){return value*this._unitValues[baseUnit]};DurationFormatter.prototype.toTimeUnit=function(code){switch(code){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}};DurationFormatter.prototype.invalidateSprite=function(){if(this.sprite){this.sprite.invalidate()}};Object.defineProperty(DurationFormatter.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(baseUnit){this._baseUnit=baseUnit;this.invalidateSprite()},enumerable:true,configurable:true});Object.defineProperty(DurationFormatter.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(outputFormat){this._outputFormat=outputFormat.toLowerCase();this.invalidateSprite()},enumerable:true,configurable:true});DurationFormatter.prototype.getFormat=function(value,maxValue,baseUnit){if(hasValue(this.durationFormat)){return this.durationFormat}if(!baseUnit){baseUnit=this.baseUnit}if(hasValue(maxValue)&&value!=maxValue){value=Math.abs(value);maxValue=Math.abs(maxValue);var maxUnit=this.getValueUnit(max$2(value,maxValue),baseUnit);return this.durationFormats[baseUnit][maxUnit]}else{var unit=this.getValueUnit(value,baseUnit);return this.durationFormats[baseUnit][unit]}};DurationFormatter.prototype.getValueUnit=function(value,baseUnit){if(!baseUnit){baseUnit=this.baseUnit}var currentUnit;var ms=this.getMilliseconds(value,baseUnit);eachContinue$1(this._unitValues,(function(key,val){if(key==baseUnit||currentUnit){var num=ms/val;if(num<=1){if(!currentUnit){currentUnit=key}return false}currentUnit=key}return true}));return currentUnit};DurationFormatter.prototype.getMilliseconds=function(value,baseUnit){if(!baseUnit){baseUnit=this.baseUnit}return value*this._unitValues[baseUnit]};Object.defineProperty(DurationFormatter.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(value){if(this._durationFormat!=value){this._durationFormat=value;this.invalidateSprite()}},enumerable:true,configurable:true});Object.defineProperty(DurationFormatter.prototype,"durationFormats",{get:function(){if(!this._durationFormats){this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}}return this._durationFormats},set:function(value){this._durationFormats=value;this.invalidateSprite()},enumerable:true,configurable:true});return DurationFormatter}(BaseObject);registry.registeredClasses["DurationFormatter"]=DurationFormatter;var rules$3=new Dictionary;function exportCSS(element,prefix){var newPrefix=prefix?prefix:"amexport";var colorSet=new InterfaceColorSet;var counter=rules$3.insertKeyIfEmpty(newPrefix,(function(){var disposer=new MultiDisposer([new StyleRule(element,"."+newPrefix+"-menu *",{"box-sizing":"border-box"}),new StyleRule(element,"."+newPrefix+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new StyleRule(element,"."+newPrefix+"-menu-level-0."+newPrefix+"-left",{right:"auto",left:"5px"}),new StyleRule(element,"."+newPrefix+"-menu-level-0."+newPrefix+"-right",{right:"5px",left:"auto"}),new StyleRule(element,"."+newPrefix+"-menu-level-0."+newPrefix+"-top",{top:"5px",bottom:"auto"}),new StyleRule(element,"."+newPrefix+"-menu-level-0."+newPrefix+"-bottom",{top:"auto",bottom:"5px"}),new StyleRule(element,"."+newPrefix+"-item."+newPrefix+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new StyleRule(element,"div:hover > div > ."+newPrefix+"-menu ."+newPrefix+"-item."+newPrefix+"-item-level-0, ."+newPrefix+"-item."+newPrefix+"-item-level-0.active",{opacity:"0.9"}),new StyleRule(element,"."+newPrefix+"-item."+newPrefix+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new StyleRule(element,"."+newPrefix+"-item."+newPrefix+"-item-level-0:before",{display:"block"}),new StyleRule(element,"."+newPrefix+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":colorSet.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:colorSet.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new StyleRule(element,"."+newPrefix+"-left ."+newPrefix+"-item",{margin:"1px 0 0 1px"}),new StyleRule(element,"."+newPrefix+"-item:hover, ."+newPrefix+"-item.active",{background:colorSet.getFor("secondaryButtonHover").hex,color:colorSet.getFor("secondaryButtonText").hex}),new StyleRule(element,"."+newPrefix+"-item > ."+newPrefix+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new StyleRule(element,"."+newPrefix+"-left ."+newPrefix+"-item > ."+newPrefix+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new StyleRule(element,"."+newPrefix+"-right ."+newPrefix+"-item > ."+newPrefix+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new StyleRule(element,"."+newPrefix+"-top ."+newPrefix+"-item > ."+newPrefix+"-menu",{top:"-1px",bottom:"auto"}),new StyleRule(element,"."+newPrefix+"-bottom ."+newPrefix+"-item > ."+newPrefix+"-menu",{top:"auto",bottom:"0"}),new StyleRule(element,"."+newPrefix+"-item > ."+newPrefix+"-menu",{display:"none"}),new StyleRule(element,"."+newPrefix+"-item:hover > ."+newPrefix+"-menu, ."+newPrefix+"-item.active > ."+newPrefix+"-menu",{display:"block"}),new StyleRule(element,"."+newPrefix+"-item:hover > ."+newPrefix+"-menu > ."+newPrefix+"-item, ."+newPrefix+"-item.active > ."+newPrefix+"-menu > ."+newPrefix+"-item",{opacity:"1"}),new StyleRule(element,"."+newPrefix+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new StyleRule(element,"."+newPrefix+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new StyleRule(element,"."+newPrefix+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new StyleRule(element,"."+newPrefix+"-item-level-0 > ."+newPrefix+"-icon",{padding:"0.1em 0.2em"}),new StyleRule(element,"."+newPrefix+"-clickable",{cursor:"pointer"})]);return new CounterDisposer((function(){rules$3.removeKey(newPrefix);disposer.dispose()}))}));return counter.increment()}var Validatable=function(_super){__extends(Validatable,_super);function Validatable(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._validateDisposer=null;return _this}Validatable.prototype.invalidate=function(){if(this._validateDisposer===null){this._validateDisposer=registry.events.on("exitframe",this.validate,this)}};Validatable.prototype.validate=function(){if(this._validateDisposer!==null){this._validateDisposer.dispose();this._validateDisposer=null}};Validatable.prototype.dispose=function(){if(this._validateDisposer!==null){this._validateDisposer.dispose();this._validateDisposer=null}_super.prototype.dispose.call(this)};return Validatable}(BaseObjectEvents);var ExportMenu=function(_super){__extends(ExportMenu,_super);function ExportMenu(){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this.closeDelay=1e3;_this.closeOnClick=true;_this._language=new MutableValueDisposer;_this._menuTag="ul";_this._itemTag="li";_this._labelTag="a";_this._iconTag="img";_this._classPrefix="amexport";_this._defaultStyles=true;_this._align="right";_this._verticalAlign="top";_this._tabindex=0;_this._ignoreNextClose=false;_this._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}];_this.className="ExportMenu";_this._disposers.push(_this._language);_this.invalidate();_this.applyTheme();return _this}ExportMenu.prototype.validate=function(){this.draw();_super.prototype.validate.call(this)};ExportMenu.prototype.draw=function(){var _this=this;if(!this._element){this._element=this.createMenuElement(0)}else{this._element.innerHTML="";this._element.className=this.getMenuItemClass(0)}if(this.defaultStyles){this._element.style.display="none"}getValue$4(this._container).appendChild(this._element);var items=this.adapter.apply("items",{items:this._items}).items;for(var len=items.length,i=0;i<len;i++){this.drawBranch(this._element,items[i],0)}this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement;this._disposers.push(getInteraction().body.events.on("down",(function(ev){if(!ev.pointer.touch){_this._ignoreNextClose=false}_this.close()})));this._disposers.push(getInteraction().body.events.on("keydown",(function(ev){var key=keyboard.getEventKey(ev.event);switch(key){case"esc":_this.close();break;case"up":case"down":case"left":case"right":if(_this._currentSelection){ev.event.preventDefault()}_this.moveSelection(key);break}})));if(this.defaultStyles){this.loadDefaultCSS()}};ExportMenu.prototype.drawBranch=function(container,branch,level){var _this=this;branch=this.adapter.apply("branch",{branch,level}).branch;if(branch.unsupported===true){return}if(!branch.ascendants){branch.ascendants=new List}var type=branch.type;var element=this.createItemElement(level,type);var label;if(branch.icon){label=this.createIconElement(level,type);label.src=branch.icon;if(branch.label||branch.title){label.title=branch.title||branch.label}}else if(branch.svg){label=this.createSvgElement(level,type,branch.svg);if(branch.label||branch.title){label.title=branch.title||branch.label}}else{label=this.createLabelElement(level,type);label.innerHTML=branch.label?this.language.translate(branch.label):"";if(branch.title){label.title=branch.title}}var readerLabel=this.getReaderLabel(branch,label.innerHTML);label.setAttribute("aria-label",readerLabel);element.appendChild(label);branch.interactions=getInteraction().getInteraction(element);branch.element=element;if(this.typeClickable(type)){branch.interactions.events.on("hit",(function(ev){if(_this.events.isEnabled("hit")&&!_this.isDisposed()){var event_1={type:"hit",event:ev.event,target:_this,branch};_this.events.dispatchImmediately("hit",event_1)}}));branch.interactions.events.on("keyup",(function(ev){if(keyboard.isKey(ev.event,"enter")){if(_this.events.isEnabled("enter")){var event_2={type:"enter",event:ev.event,target:_this,branch};_this.events.dispatchImmediately("enter",event_2)}}}))}{var submenu_1=this.getSubMenu(branch);if(submenu_1!=null){branch.interactions.events.on("keyup",(function(ev){if(keyboard.isKey(ev.event,"enter")){_this.selectBranch(submenu_1[0]);_this.setFocus(submenu_1[0])}}));branch.interactions.events.on("hit",(function(ev){_this.selectBranch(branch)}))}}branch.interactions.events.on("over",(function(ev){if(ev.pointer.touch){_this._ignoreNextClose=true}_this.selectBranch(branch);if(_this.events.isEnabled("over")){var event_3={type:"over",event:ev.event,target:_this,branch};_this.events.dispatchImmediately("over",event_3)}}));branch.interactions.events.on("out",(function(ev){if(_this.isDisposed()){return}if(!ev.pointer.touch){_this.delayUnselectBranch(branch)}if(_this.events.isEnabled("out")){var event_4={type:"out",event:ev.event,target:_this,branch};_this.events.dispatchImmediately("out",event_4)}}));branch.interactions.events.on("focus",(function(ev){_this.selectBranch(branch)}));branch.interactions.events.on("blur",(function(ev){_this.delayUnselectBranch(branch)}));var local_level=level+1;if(branch.menu){var submenu=this.createMenuElement(local_level);branch.submenuElement=submenu;for(var len=branch.menu.length,i=0;i<len;i++){var ascendants=new List;branch.menu[i].ascendants=ascendants;if(branch.ascendants.length){ascendants.copyFrom(branch.ascendants)}ascendants.push(branch);this.drawBranch(submenu,branch.menu[i],local_level)}if(submenu.innerHTML==""){return}element.appendChild(submenu)}if(branch.hidden){this.hideBranch(branch)}if(branch.id){element.setAttribute("id",branch.id)}if(branch.color){element.style.backgroundColor=branch.color.hex}container.appendChild(element)};ExportMenu.prototype.createMenuElement=function(level){var element=document.createElement(this.menuTag);element.className=this.getMenuItemClass(level);if(level===0){element.setAttribute("role","menubar")}else{element.setAttribute("role","menu")}return element};ExportMenu.prototype.getMenuItemClass=function(level){var className=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+level;if(level===0){className+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign}return this.adapter.apply("menuClass",{className,level}).className};ExportMenu.prototype.createItemElement=function(level,type){var element=document.createElement(this.itemTag);var className=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+level+" "+this.classPrefix+"-item-"+(type||"blank");element.className=this.adapter.apply("itemClass",{className,level,type}).className;element.setAttribute("role","menuitem");element.setAttribute("tabindex",this.tabindex.toString());return element};ExportMenu.prototype.createLabelElement=function(level,type){var element=document.createElement(this.labelTag);var className=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+level+" "+this.classPrefix+"-item-"+(type||"blank");if(this.typeClickable(type)){className+=" "+this.classPrefix+"-clickable"}element.className=this.adapter.apply("labelClass",{className,level,type}).className;return element};ExportMenu.prototype.createIconElement=function(level,type){var element=document.createElement(this.iconTag);var className=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+level+" "+this.classPrefix+"-item-"+(type||"blank");if(this.typeClickable(type)){className+=" "+this.classPrefix+"-clickable"}element.className=this.adapter.apply("labelClass",{className,level,type}).className;element.setAttribute("tabindex",this.tabindex.toString());element.setAttribute("role","menuitem");return element};ExportMenu.prototype.createSvgElement=function(level,type,svg){var parser=new DOMParser;var element=parser.parseFromString(svg,"image/svg+xml").documentElement;var className=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+level+" "+this.classPrefix+"-item-"+(type||"blank");if(this.typeClickable(type)){className+=" "+this.classPrefix+"-clickable"}element.setAttribute("class",this.adapter.apply("labelClass",{className,level,type}).className);element.setAttribute("tabindex",this.tabindex.toString());element.setAttribute("role","menuitem");return element};ExportMenu.prototype.dispose=function(){if(!this._disposed){_super.prototype.dispose.call(this);if(this._element&&this._element.parentNode){this._element.parentNode.removeChild(this._element)}}};ExportMenu.prototype.typeClickable=function(type){return hasValue(type)};ExportMenu.prototype.hasSubMenu=function(branch){return branch.menu&&branch.menu.length?true:false};ExportMenu.prototype.getSubMenu=function(branch){if(branch.menu&&branch.menu.length){return branch.menu}};ExportMenu.prototype.getReaderLabel=function(branch,label){label=stripTags(label);if(branch.ascendants.length==0){label=label=="..."?this.language.translate("Export"):label;label+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"}else if(this.hasSubMenu(branch)){label+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]"}else if(branch.type=="print"){label=this.language.translate("Click, tap or press ENTER to print.")}else if(this.typeClickable(branch.type)){label=this.language.translate("Click, tap or press ENTER to export as %1.",undefined,label)}return this.adapter.apply("rederLabel",{label,branch}).label};Object.defineProperty(ExportMenu.prototype,"container",{get:function(){return this._container},set:function(container){this._container=container;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"items",{get:function(){return this._items},set:function(items){this._items=items;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"tag",{set:function(tag){this._menuTag=tag;this._itemTag=tag=="ul"?"li":"div";this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(value){this._align=value;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(value){this._verticalAlign=value;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(value){this._classPrefix=value;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(value){if(this._defaultStyles!=value){this._defaultStyles=value;if(value){this.loadDefaultCSS()}}this.invalidate()},enumerable:true,configurable:true});ExportMenu.prototype.loadDefaultCSS=function(){this._disposers.push(exportCSS(getShadowRoot(this.container),this.classPrefix));if(this._element){this._element.style.display=""}};Object.defineProperty(ExportMenu.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(value){this._tabindex=value;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(ExportMenu.prototype,"language",{get:function(){var _this=this;var language=this._language.get();if(language==null){language=new Language;this._language.set(language,language.events.on("localechanged",(function(ev){_this.invalidate()})))}return language},set:function(value){var _this=this;this._language.set(value,value.events.on("localechanged",(function(ev){_this.invalidate()})));this.invalidate()},enumerable:true,configurable:true});ExportMenu.prototype.close=function(){var _this=this;if(this.isDisposed()){return}if(this._ignoreNextClose){this._ignoreNextClose=false;return}if(this.closeOnClick){this._element.style.pointerEvents="none";setTimeout((function(){_this._element.style.pointerEvents="auto"}),100)}if(this._currentSelection){this.setBlur(this._currentSelection);this._currentSelection=undefined}if(this._element){var items=this._element.getElementsByClassName("active");for(var len=items.length,i=len-1;i>=0;i--){if(items[i]){removeClass(items[i],"active")}}}this.events.dispatchImmediately("closed",{type:"closed",target:this})};ExportMenu.prototype.selectBranch=function(branch){var _this=this;if(this.isDisposed()){return}if(branch.closeTimeout){this.removeDispose(branch.closeTimeout);branch.closeTimeout=undefined}addClass(branch.element,"active");if(branch.submenuElement){branch.submenuElement.setAttribute("aria-expanded","true")}if(this._currentSelection&&this._currentSelection!==branch&&this._currentSelection.ascendants){each(concat(fromArray([this._currentSelection]),this._currentSelection.ascendants.iterator()),(function(ascendant){if(!branch.ascendants.contains(ascendant)&&branch!==ascendant){_this.unselectBranch(ascendant,true)}}))}each(branch.ascendants.iterator(),(function(ascendant){if(ascendant.closeTimeout){_this.removeDispose(ascendant.closeTimeout);ascendant.closeTimeout=undefined}addClass(ascendant.element,"active")}));this._currentSelection=branch;if(this.events.isEnabled("branchselected")){var event_5={type:"branchselected",target:this,branch};this.events.dispatchImmediately("branchselected",event_5)}};ExportMenu.prototype.unselectBranch=function(branch,simple){if(this.isDisposed()){return}removeClass(branch.element,"active");if(branch.submenuElement){branch.submenuElement.removeAttribute("aria-expanded")}if(this._currentSelection==branch){this._currentSelection=undefined}if(this.events.isEnabled("branchunselected")){var event_6={type:"branchunselected",target:this,branch};this.events.dispatchImmediately("branchunselected",event_6)}};ExportMenu.prototype.delayUnselectBranch=function(branch,simple){var _this=this;if(this.isDisposed()){return}if(branch.closeTimeout){this.removeDispose(branch.closeTimeout);branch.closeTimeout=undefined}branch.closeTimeout=this.setTimeout((function(){_this.unselectBranch(branch,simple)}),this.closeDelay);if(simple!==true&&branch.ascendants){each(branch.ascendants.iterator(),(function(ascendant){_this.delayUnselectBranch(ascendant,true)}))}};ExportMenu.prototype.moveSelection=function(key){if(this.isDisposed()){return}if(!this._currentSelection){return}var newSelection;if(key=="up"){newSelection=this.getPrevSibling(this._currentSelection)}else if(key=="down"){newSelection=this.getNextSibling(this._currentSelection)}else if(key=="left"&&this.align=="right"||key=="right"&&this.align=="left"){var menu=this.getSubMenu(this._currentSelection);if(menu!=null){newSelection=menu[0]}}else if(key=="right"&&this.align=="right"||key=="left"&&this.align=="left"){newSelection=this.getParentItem(this._currentSelection)}if(newSelection&&newSelection!==this._currentSelection){this.selectBranch(newSelection);this.setFocus(newSelection);this._currentSelection=newSelection}};ExportMenu.prototype.getSiblings=function(branch){var parent=this.getParentItem(branch);if(parent&&parent.menu){return parent.menu}else{return[]}};ExportMenu.prototype.getParentItem=function(branch){if(branch.ascendants&&branch.ascendants.length){return branch.ascendants.getIndex(branch.ascendants.length-1)}else{return undefined}};ExportMenu.prototype.getNextSibling=function(branch){var siblings=this.getSiblings(branch);if(siblings.length>1){var next=siblings.indexOf(branch)+1;next=siblings.length==next?0:next;return siblings[next].unsupported?this.getNextSibling(siblings[next]):siblings[next]}else{return branch}};ExportMenu.prototype.getPrevSibling=function(branch){var siblings=this.getSiblings(branch);if(siblings.length>1){var prev=siblings.indexOf(branch)-1;prev=prev==-1?siblings.length-1:prev;return siblings[prev].unsupported?this.getPrevSibling(siblings[prev]):siblings[prev]}else{return branch}};ExportMenu.prototype.setFocus=function(branch){if(branch.interactions){try{branch.interactions.element.focus()}catch(e){}}};ExportMenu.prototype.setBlur=function(branch){if(branch.interactions){try{branch.interactions.element.blur()}catch(e){}}};ExportMenu.prototype.hideBranch=function(branch){branch.element.style.display="none"};ExportMenu.prototype.showBranch=function(branch){branch.element.style.display=""};Object.defineProperty(ExportMenu.prototype,"element",{get:function(){return this._element},enumerable:true,configurable:true});return ExportMenu}(Validatable);function load(url,target,options){return new Promise((function(success,error){var isBlob=hasValue(options)&&options.responseType=="blob";var xhr=new XMLHttpRequest;xhr.onload=function(){if(xhr.status===200){var response=void 0;var blob_1;if(isBlob){blob_1=xhr.response;readBlob(blob_1).then((function(response){var output={xhr,error:false,response,blob:blob_1,type:xhr.getResponseHeader("Content-Type"),target};success(output)}));return}else{response=xhr.responseText||xhr.response}var output={xhr,error:false,response,blob:blob_1,type:xhr.getResponseHeader("Content-Type"),target};success(output)}else{error({xhr,error:true,type:xhr.getResponseHeader("Content-Type"),target})}};xhr.onerror=function(){error({xhr,error:true,type:xhr.getResponseHeader("Content-Type"),target})};xhr.open("GET",url,true);if(options&&options.withCredentials){xhr.withCredentials=true}if(hasValue(options)){if(hasValue(options.requestHeaders)){for(var i=0;i<options.requestHeaders.length;i++){var header=options.requestHeaders[i];xhr.setRequestHeader(header.key,header.value)}}if(hasValue(options.responseType)){xhr.responseType=options.responseType}}xhr.send()}))}function readBlob(blob){return new Promise((function(success,error){var reader=new FileReader;reader.onload=function(event){success(reader.result)};reader.onerror=function(e){error(e)};reader.readAsText(blob)}))}var pdfmakePromise;function _pdfmake(){return __awaiter(this,void 0,void 0,(function(){var a,pdfmake,vfs_fonts,global;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,Promise.all([new Promise((function(resolve,reject){require(["./pdfmake-da4e6b96-d5b808a3"],resolve,reject)})).then((function(n){return n.p})),new Promise((function(resolve,reject){require(["./vfs_fonts-60faa403-da32af88"],resolve,reject)}))])];case 1:a=_a.sent();pdfmake=a[0];vfs_fonts=a[1];global=window;global.pdfMake=global.pdfMake||{};global.pdfMake.vfs=vfs_fonts.default;pdfmake.vfs=vfs_fonts.default;return[2,pdfmake]}}))}))}var fontFamilySrcRegexp=/src: ([^;]+);/;function supportsBlobUri(){return window.navigator.msSaveOrOpenBlob!=null}function blobToDataUri(blob){return new Promise((function(resolve,reject){var f=new FileReader;f.onload=function(e){resolve(f.result)};f.onerror=function(e){reject(e)};f.readAsDataURL(blob)}))}function getCssRules(s){return __awaiter(this,void 0,void 0,(function(){var sheet;return __generator(this,(function(_a){switch(_a.label){case 0:sheet=s.sheet;_a.label=1;case 1:_a.trys.push([1,2,,4]);return[2,sheet.cssRules];case 2:_a.sent();return[4,new Promise((function(success,error){s.addEventListener("load",(function(){success(sheet.cssRules)}),true);s.addEventListener("error",(function(e){error(e)}),true);setTimeout((function(){error(new Error("Timeout while waiting for <style> to load"))}),1e4)}))];case 3:return[2,_a.sent()];case 4:return[2]}}))}))}function loadStylesheet(doc,url,f){return __awaiter(this,void 0,void 0,(function(){var response,e_2,s,rules;return __generator(this,(function(_a){switch(_a.label){case 0:_a.trys.push([0,2,,3]);return[4,load(url)];case 1:response=_a.sent();return[3,3];case 2:e_2=_a.sent();console.error("Failed to load stylesheet",url,e_2);return[2];case 3:s=doc.createElement("style");s.textContent=response.response;doc.head.appendChild(s);_a.label=4;case 4:_a.trys.push([4,,7,8]);return[4,getCssRules(s)];case 5:rules=_a.sent();return[4,eachStylesheet(doc,url,rules,f)];case 6:_a.sent();return[3,8];case 7:doc.head.removeChild(s);return[7];case 8:return[2]}}))}))}function eachStylesheet(doc,topUrl,rules,f){return __awaiter(this,void 0,void 0,(function(){var promises,length,i,rule,url;return __generator(this,(function(_a){switch(_a.label){case 0:promises=[];length=rules.length;for(i=0;i<length;i++){rule=rules[i];if(rule.type===CSSRule.IMPORT_RULE){url=rule.href;if(url){url=joinUrl(topUrl,url);promises.push(loadStylesheet(doc,url,f))}}else{f(topUrl,rule)}}if(!promises.length)return[3,2];return[4,Promise.all(promises)];case 1:_a.sent();_a.label=2;case 2:return[2]}}))}))}function eachStylesheets(f){return __awaiter(this,void 0,void 0,(function(){var iframe,doc_1;return __generator(this,(function(_a){switch(_a.label){case 0:iframe=document.createElement("iframe");iframe.src="about:blank";iframe.setAttribute("title","");document.head.appendChild(iframe);_a.label=1;case 1:_a.trys.push([1,,3,4]);doc_1=iframe.contentDocument;return[4,Promise.all(map$1(document.styleSheets,(function(sheet){var url=sheet.href;if(url==null){return eachStylesheet(doc_1,location.href,sheet.cssRules,f)}else{url=joinUrl(location.href,url);return loadStylesheet(doc_1,url,f)}})))];case 2:_a.sent();return[3,4];case 3:document.head.removeChild(iframe);return[7];case 4:return[2]}}))}))}var Export=function(_super){__extends(Export,_super);function Export(container){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this._formatOptions=new Dictionary;_this._extraSprites=[];_this._validateSprites=[];_this.dataFieldsOrder=[];_this._dynamicDataFields=true;_this._removedObjects=new List;_this._hiddenObjects=[];_this._objectsAlreadyHidden=false;_this._filePrefix="amCharts";_this.useWebFonts=true;_this.useRetina=true;_this.useSimplifiedExport=true;_this.timeoutDelay=2e3;_this._exportRunning=false;_this._prevHasData=false;_this._container=container;_this.className="Export";_this._formatOptions.setKey("png",{});_this._formatOptions.setKey("jpg",{quality:.8});_this._formatOptions.setKey("gif",{});_this._formatOptions.setKey("svg",{});_this._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:true,addColumnNames:true});_this._formatOptions.setKey("json",{indent:2,useLocale:true});_this._formatOptions.setKey("csv",{addColumnNames:true,emptyAs:"",addBOM:true});_this._formatOptions.setKey("xlsx",{addColumnNames:true,useLocale:true,emptyAs:""});_this._formatOptions.setKey("html",{addColumnNames:true,emptyAs:""});_this._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:true,addColumnNames:true,emptyAs:""});_this._formatOptions.setKey("print",{delay:500,printMethod:"iframe"});_this.adapter.add("options",(function(arg){var formatOptions=_this._formatOptions.getKey(arg.type);if(arg.options){arg.options=merge(formatOptions,arg.options)}else{arg.options=formatOptions}return arg}));_this.applyTheme();_this.dispatchImmediately("inited");return _this}Object.defineProperty(Export.prototype,"menu",{get:function(){return this._menu},set:function(menu){var _this=this;if(this._menu){this.removeDispose(this._menu)}this._menu=menu;this._menu.container=this.container;this._menu.language=this._language;this._menu.adapter.add("branch",(function(arg){arg.branch.unsupported=!_this.typeSupported(arg.branch.type);return arg}));this._menu.events.on("hit",(function(ev){_this.export(ev.branch.type,ev.branch.options);_this.menu.close()}));this._menu.events.on("enter",(function(ev){_this.export(ev.branch.type,ev.branch.options);_this.menu.close()}));this._menu.events.on("over",(function(ev){_this._disablePointers()}));this._menu.events.on("out",(function(ev){setTimeout((function(){_this._releasePointers()}),10)}));this.dispatchImmediately("menucreated");this._menu.adapter.add("classPrefix",(function(obj){obj.classPrefix=options.classNamePrefix+obj.classPrefix;return obj}));this._disposers.push(this._menu)},enumerable:true,configurable:true});Export.prototype.typeSupported=function(type){var supported=true;var options=this.getFormatOptions(type);if(hasValue(options)&&options.disabled){supported=false}else if(type==="pdf");else if(type==="xlsx"){supported=this._hasData()?true:false}else if(type=="print"&&!window.print){supported=false}else if(["json","csv","html","pdfdata"].indexOf(type)!==-1&&!this._hasData()){supported=false}return this.adapter.apply("supported",{supported,type}).supported};Export.prototype._hasData=function(){return this.data&&this.data.length};Export.prototype._getFunction=function(type){switch(type){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}};Export.prototype.export=function(type,options){return __awaiter(this,void 0,void 0,(function(){var event_1,func,data,event_2,event_3;var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:if(type=="custom"){this.handleCustom(options);return[2,true]}this._exportRunning=true;if(this.events.isEnabled("exportstarted")){event_1={type:"exportstarted",target:this,format:type,options};this.events.dispatchImmediately("exportstarted",event_1)}this.showPreloader();if(this.timeoutDelay){this.hideTimeout();this._timeoutTimeout=this.setTimeout((function(){if(_this.events.isEnabled("exporttimedout")){var event_4={type:"exporttimedout",target:_this,format:type,options};_this.events.dispatchImmediately("exporttimedout",event_4)}_this.showTimeout()}),this.timeoutDelay)}this.hideNonExportableSprites();func=this._getFunction(type);options=this.adapter.apply("options",{options,type}).options;func=this.adapter.apply("exportFunction",{func,type,options}).func;return[4,func.call(this,type,options)];case 1:data=_a.sent();this._exportRunning=false;this._releasePointers();this.restoreNonExportableSprites();if(data){if(this.events.isEnabled("exportfinished")){event_2={type:"exportfinished",target:this,format:type,options};this.events.dispatchImmediately("exportfinished",event_2)}this.hidePreloader();this.hideTimeout();if(this.menu){this.menu.close()}if(type==="print"){return[2,this.print(data,options,this.adapter.apply("title",{title:this.title,options}).title)]}else{if(type=="pdfdata"){return[2,this.download(data,this.filePrefix+".pdf")]}return[2,this.download(data,this.filePrefix+"."+type,options&&options.addBOM)]}}else{if(this.events.isEnabled("error")){event_3={type:"error",target:this,format:type,options};this.events.dispatchImmediately("error",event_3)}return[2,false]}}}))}))};Export.prototype.unsupported=function(type,options){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,""]}))}))};Export.prototype.handleCustom=function(options){if(hasValue(options)&&hasValue(options.callback)){options.callback.call(options.callbackTarget||this,options)}};Export.prototype.getPrint=function(type,options){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){return[2,this.getImage("png",options)]}))}))};Export.prototype.getFontFamilies=function(){return __awaiter(this,void 0,void 0,(function(){var DOMURL,blobs,promises,a;var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:DOMURL=this.getDOMURL();blobs=[];promises=[];return[4,eachStylesheets((function(topUrl,rule){if(rule.type===CSSRule.FONT_FACE_RULE){var cssText_1=rule.cssText;var src=fontFamilySrcRegexp.exec(cssText_1);if(src!==null){var urls=src[1].split(/ *, */).map((function(url){return __awaiter(_this,void 0,void 0,(function(){var a,after,fullUrl,response,url_1,e_3;return __generator(this,(function(_a){switch(_a.label){case 0:a=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(url);if(!(a===null))return[3,1];return[2,url];case 1:after=a[2];fullUrl=joinUrl(topUrl,a[1]);if(this.webFontFilter&&!fullUrl.match(this.webFontFilter)){return[2,null]}_a.label=2;case 2:_a.trys.push([2,7,,8]);return[4,load(fullUrl,undefined,{responseType:"blob"})];case 3:response=_a.sent();if(!supportsBlobUri())return[3,4];url_1=DOMURL.createObjectURL(response.blob);blobs.push(url_1);return[3,6];case 4:return[4,blobToDataUri(response.blob)];case 5:url_1=_a.sent();_a.label=6;case 6:return[2,'url("'+url_1+'")'+after];case 7:e_3=_a.sent();console.error("Failed to load font",fullUrl,e_3);return[2,null];case 8:return[2]}}))}))}));promises.push(Promise.all(urls).then((function(a){a=a.filter((function(x){return x!=null}));if(a.length===0){return""}else{return cssText_1.replace(fontFamilySrcRegexp,"src: "+a.join(", ")+";")}})))}}}))];case 1:_a.sent();return[4,Promise.all(promises)];case 2:a=_a.sent();return[2,{blobs,cssText:a.filter((function(x){return!!x})).join("\n")}]}}))}))};Export.prototype.getImage=function(type,options,includeExtras){return __awaiter(this,void 0,void 0,(function(){var prehidden,canvas,newCanvas,uri,e_4,data,data;return __generator(this,(function(_a){switch(_a.label){case 0:prehidden=this._objectsAlreadyHidden;if(!prehidden){this.hideNonExportableSprites()}if(!hasValue(options)){options=this.getFormatOptions(type)}return[4,this.awaitValidSprites()];case 1:_a.sent();return[4,this.simplifiedImageExport()];case 2:if(!_a.sent())return[3,10];canvas=void 0;_a.label=3;case 3:_a.trys.push([3,7,,9]);return[4,this.getCanvas(options)];case 4:canvas=_a.sent();if(!(includeExtras!==false))return[3,6];return[4,this.addExtras(canvas,options)];case 5:newCanvas=_a.sent();this.disposeCanvas(canvas);canvas=newCanvas;_a.label=6;case 6:uri=canvas.toDataURL(this.getContentType(type),options.quality);this.disposeCanvas(canvas);if(!prehidden){this.restoreNonExportableSprites()}return[2,uri];case 7:e_4=_a.sent();console.error(e_4.message+"\n"+e_4.stack);warn("Simple export failed, falling back to advanced export");if(canvas){this.disposeCanvas(canvas)}return[4,this.getImageAdvanced(type,options,includeExtras)];case 8:data=_a.sent();if(!prehidden){this.restoreNonExportableSprites()}return[2,data];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(type,options,includeExtras)];case 11:data=_a.sent();if(!prehidden){this.restoreNonExportableSprites()}return[2,data];case 12:return[2]}}))}))};Export.prototype.addExtras=function(canvas,options,advanced){return __awaiter(this,void 0,void 0,(function(){var middleLeft_1,middleTop_1,middleWidth_1,middleHeight_1,extraRight_1,extraBottom_1,extras,newCanvas,ctx_1,background,left_1,top_1,right_1,bottom_1;var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:if(!this.extraSprites.length)return[3,2];middleLeft_1=0;middleTop_1=0;middleWidth_1=canvas.width;middleHeight_1=canvas.height;extraRight_1=0;extraBottom_1=0;return[4,Promise.all(map$1(this.extraSprites,(function(extraSprite){return __awaiter(_this,void 0,void 0,(function(){var extra,extraCanvas,extraWidth,extraHeight;return __generator(this,(function(_a){switch(_a.label){case 0:if(extraSprite instanceof Sprite){extra={sprite:extraSprite,position:"bottom"}}else{extra=extraSprite}extra.position=extra.position||"bottom";extra.marginTop=extra.marginTop||0;extra.marginRight=extra.marginRight||0;extra.marginBottom=extra.marginBottom||0;extra.marginLeft=extra.marginLeft||0;if(!advanced)return[3,2];return[4,extra.sprite.exporting.getCanvasAdvanced(options)];case 1:extraCanvas=_a.sent();return[3,4];case 2:return[4,extra.sprite.exporting.getCanvas(options)];case 3:extraCanvas=_a.sent();_a.label=4;case 4:extraWidth=extraCanvas.width+extra.marginLeft+extra.marginRight;extraHeight=extraCanvas.height+extra.marginTop+extra.marginBottom;if(extra.position=="top"){middleWidth_1=extra.crop?middleHeight_1:max$2(middleWidth_1,extraWidth);middleTop_1+=extraHeight}else if(extra.position=="right"){middleHeight_1=extra.crop?middleHeight_1:max$2(middleHeight_1,extraHeight);extraRight_1+=extraWidth}else if(extra.position=="left"){middleHeight_1=extra.crop?middleHeight_1:max$2(middleHeight_1,extraHeight);middleLeft_1+=extraWidth}else if(extra.position==="bottom"){middleWidth_1=extra.crop?middleHeight_1:max$2(middleWidth_1,extraWidth);extraBottom_1+=extraHeight}return[2,{canvas:extraCanvas,position:extra.position,left:extra.marginLeft,top:extra.marginTop,width:extraWidth,height:extraHeight}]}}))}))})))];case 1:extras=_a.sent();newCanvas=this.getDisposableCanvas();newCanvas.width=middleLeft_1+middleWidth_1+extraRight_1;newCanvas.height=middleTop_1+middleHeight_1+extraBottom_1;ctx_1=newCanvas.getContext("2d");background=this.backgroundColor||this.findBackgroundColor(this.sprite.dom);if(background){ctx_1.fillStyle=background.toString();ctx_1.fillRect(0,0,newCanvas.width,newCanvas.height)}left_1=middleLeft_1;top_1=middleTop_1;right_1=left_1+middleWidth_1;bottom_1=top_1+middleHeight_1;each$2(extras,(function(extra){if(extra.position=="top"){top_1-=extra.height;ctx_1.drawImage(extra.canvas,middleLeft_1+extra.left,top_1+extra.top)}else if(extra.position=="right"){ctx_1.drawImage(extra.canvas,right_1+extra.left,middleTop_1+extra.top);right_1+=extra.width}else if(extra.position=="left"){left_1-=extra.width;ctx_1.drawImage(extra.canvas,left_1+extra.left,middleTop_1+extra.top)}else if(extra.position==="bottom"){ctx_1.drawImage(extra.canvas,middleLeft_1+extra.left,bottom_1+extra.top);bottom_1+=extra.height}_this.disposeCanvas(extra.canvas)}));ctx_1.drawImage(canvas,middleLeft_1,middleTop_1);return[2,newCanvas];case 2:return[2,canvas]}}))}))};Export.prototype.getCanvas=function(options){return __awaiter(this,void 0,void 0,(function(){var background,DOMURL,url,blobs,canvas,width,height,font,fontSize,scale,pixelRatio,ctx,promises,a,data,svg,img;return __generator(this,(function(_a){switch(_a.label){case 0:if(!hasValue(options)){options={}}background=this.backgroundColor||this.findBackgroundColor(this.sprite.dom);DOMURL=this.getDOMURL();url=null;blobs=null;_a.label=1;case 1:_a.trys.push([1,,4,5]);width=this.sprite.pixelWidth;height=this.sprite.pixelHeight;font=findFont(this.sprite.dom);fontSize=findFontSize(this.sprite.dom);scale=options.scale||1;pixelRatio=this.getPixelRatio(options);scale=this.getAdjustedScale(width*pixelRatio,height*pixelRatio,scale,options);canvas=this.getDisposableCanvas();canvas.style.width=width*scale+"px";canvas.style.height=height*scale+"px";canvas.width=width*scale;canvas.height=height*scale;ctx=canvas.getContext("2d");if(background){ctx.fillStyle=background.toString();ctx.fillRect(0,0,width*scale,height*scale)}promises=[];if(this.useWebFonts){promises.push(this.getFontFamilies().then((function(fonts){blobs=fonts.blobs;return fonts.cssText})))}promises.push(this.imagesToDataURI(this.sprite.dom,options));promises.push(this.prepForeignObjects(this.sprite.dom,options));return[4,Promise.all(promises)];case 2:a=_a.sent();data=this.normalizeSVG("<style>"+a[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),options,width,height,scale,font,fontSize);svg=new Blob([data],{type:"image/svg+xml"});url=DOMURL.createObjectURL(svg);return[4,this.loadNewImage(url,width*scale*pixelRatio,height*scale*pixelRatio,"anonymous")];case 3:img=_a.sent();ctx.drawImage(img,0,0);return[3,5];case 4:if(url!==null){DOMURL.revokeObjectURL(url)}if(blobs!==null){each$2(blobs,(function(url){DOMURL.revokeObjectURL(url)}))}this.restoreRemovedObjects();return[7];case 5:return[2,canvas]}}))}))};Export.prototype.getCanvasAdvanced=function(options){return __awaiter(this,void 0,void 0,(function(){var background,canvg,width,height,font,fontSize,scale,pixelRatio,data,canvas,config;return __generator(this,(function(_a){switch(_a.label){case 0:if(!hasValue(options)){options={}}return[4,this.imagesToDataURI(this.sprite.dom,options)];case 1:_a.sent();background=this.backgroundColor||this.findBackgroundColor(this.sprite.dom);return[4,this.canvg];case 2:canvg=_a.sent();width=this.sprite.pixelWidth;height=this.sprite.pixelHeight;font=findFont(this.sprite.dom);fontSize=findFontSize(this.sprite.dom);scale=options.scale||1;pixelRatio=this.getPixelRatio(options);scale=this.getAdjustedScale(width*pixelRatio,height*pixelRatio,scale,options);data=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),options,width,height,scale,font,fontSize,background);canvas=this.getDisposableCanvas();canvas.style.width=width*pixelRatio*scale+"px";canvas.style.height=height*pixelRatio*scale+"px";canvas.width=width*pixelRatio*scale;canvas.height=height*pixelRatio*scale;config={useCORS:true};if(pixelRatio!=1){config.ignoreDimensions=true;config.scaleWidth=width*pixelRatio*scale;config.scaleHeight=height*pixelRatio*scale}return[4,canvg.fromString(canvas.getContext("2d"),data,config).render()];case 3:_a.sent();return[2,canvas]}}))}))};Export.prototype.getImageAdvanced=function(type,options,includeExtras){return __awaiter(this,void 0,void 0,(function(){var prehidden,canvas,uri;return __generator(this,(function(_a){switch(_a.label){case 0:prehidden=this._objectsAlreadyHidden;if(!prehidden){this.hideNonExportableSprites()}if(!hasValue(options)){options=this.getFormatOptions(type)}return[4,this.getCanvasAdvanced(options)];case 1:canvas=_a.sent();if(!(includeExtras!==false))return[3,3];return[4,this.addExtras(canvas,options,true)];case 2:canvas=_a.sent();_a.label=3;case 3:uri=canvas.toDataURL(this.getContentType(type),options.quality);this.disposeCanvas(canvas);if(!prehidden){this.restoreNonExportableSprites()}return[2,uri]}}))}))};Export.prototype.getDisposableCanvas=function(){var canvas=document.createElement("canvas");canvas.style.position="fixed";canvas.style.top="-10000px";document.body.appendChild(canvas);return canvas};Export.prototype.disposeCanvas=function(canvas){if(document.body.contains(canvas)){document.body.removeChild(canvas)}};Export.prototype.getPixelRatio=function(options){return this.useRetina?getPixelRatio():1};Export.prototype.getAdjustedScale=function(width,height,scale,options){if(!options){return scale}var adjWidth=width*scale;var adjHeight=width*scale;var widthScale;var heightScale;if(options.maxWidth&&adjWidth>options.maxWidth){widthScale=options.maxWidth/width}if(options.maxHeight&&adjHeight>options.maxHeight){heightScale=options.maxHeight/height}if(widthScale||heightScale){return min$2(widthScale,heightScale)}if(options.minWidth&&adjWidth<options.minWidth){widthScale=options.minWidth/width}if(options.minHeight&&adjHeight<options.minHeight){heightScale=options.minHeight/height}if(widthScale||heightScale){return max$2(widthScale,heightScale)}return scale};Export.prototype.imagesToDataURI=function(el,options){return __awaiter(this,void 0,void 0,(function(){var images,promises,count,i,image,href;return __generator(this,(function(_a){switch(_a.label){case 0:images=el.querySelectorAll("image");if(!images.length)return[3,2];promises=[];for(count=images.length,i=0;i<count;i++){image=images[i];href=image.getAttributeNS(Export.XLINK,"href");if(!href){continue}if(href.indexOf("data:image")!==-1);else{if(href.indexOf(".svg")!==-1){promises.push(this.svgToDataURI(image,options))}else{promises.push(this.imageToDataURI(image,options))}}}return[4,Promise.all(promises)];case 1:_a.sent();return[2];case 2:return[2]}}))}))};Export.prototype.prepForeignObjects=function(el,options){return __awaiter(this,void 0,void 0,(function(){var objects,count,i;return __generator(this,(function(_a){objects=el.querySelectorAll("foreignObject");if(objects.length){for(count=objects.length,i=0;i<count;i++){this.temporarilyRemoveObject(objects[i])}}return[2]}))}))};Export.prototype.imageToDataURI=function(el,options){return __awaiter(this,void 0,void 0,(function(){var img,canvas,uri;return __generator(this,(function(_a){switch(_a.label){case 0:_a.trys.push([0,2,,3]);return[4,this.loadNewImage(el.getAttributeNS(Export.XLINK,"href"),null,null,"anonymous")];case 1:img=_a.sent();canvas=document.createElement("canvas");canvas.width=img.width;canvas.height=img.height;canvas.getContext("2d").drawImage(img,0,0);try{uri=canvas.toDataURL();el.setAttribute("href",uri);return[2,uri]}catch(e){if(options.keepTainted!==false){this.temporarilyRemoveObject(el)}return[2,undefined]}return[3,3];case 2:_a.sent();if(!options||options.keepTainted!==false){this.temporarilyRemoveObject(el)}return[2,undefined];case 3:return[2]}}))}))};Export.prototype.svgToDataURI=function(el,options){return __awaiter(this,void 0,void 0,(function(){var href,data,charset,uri;return __generator(this,(function(_a){switch(_a.label){case 0:href=el.getAttributeNS(Export.XLINK,"href");_a.label=1;case 1:_a.trys.push([1,3,,4]);return[4,load(href)];case 2:data=_a.sent();charset=this.adapter.apply("charset",{charset:"base64",type:"svg",options}).charset;uri=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+charset+","+btoa(data.response),options}).data;el.setAttributeNS(Export.XLINK,"href",uri);return[2,uri];case 3:_a.sent();if(!options||options.keepTainted!==false){this.temporarilyRemoveObject(el)}return[2,undefined];case 4:return[2]}}))}))};Export.prototype.temporarilyRemoveObject=function(el,placeholder){var parent=el.parentElement||el.parentNode;if(!placeholder){placeholder=this.sprite.paper.add("g").node}parent.insertBefore(placeholder,el);parent.removeChild(el);this._removedObjects.push({element:el,placeholder})};Export.prototype.restoreRemovedObjects=function(){var obj;while(true){obj=this._removedObjects.pop();if(!obj){break}var parent_1=obj.placeholder.parentElement||obj.placeholder.parentNode;parent_1.insertBefore(obj.element,obj.placeholder)}};Export.prototype.simplifiedImageExport=function(){return __awaiter(this,void 0,void 0,(function(){var cache,canvas,ctx,DOMURL,svg,url,img;return __generator(this,(function(_a){switch(_a.label){case 0:if(this.useSimplifiedExport===false){return[2,false]}cache=registry.getCache("simplifiedImageExport");if(cache===false||cache===true){return[2,cache]}_a.label=1;case 1:_a.trys.push([1,6,,7]);canvas=document.createElement("canvas");canvas.width=1;canvas.height=1;ctx=canvas.getContext("2d");DOMURL=this.getDOMURL();svg=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"});url=DOMURL.createObjectURL(svg);img=void 0;_a.label=2;case 2:_a.trys.push([2,4,,5]);return[4,this.loadNewImage(url,1,1)];case 3:img=_a.sent();return[3,5];case 4:_a.sent();return[2,false];case 5:ctx.drawImage(img,0,0);DOMURL.revokeObjectURL(url);try{registry.setCache("simplifiedImageExport",true);return[2,true]}catch(e){registry.setCache("simplifiedImageExport",false);return[2,false]}return[3,7];case 6:_a.sent();registry.setCache("simplifiedImageExport",false);return[2,false];case 7:return[2]}}))}))};Export.prototype.loadNewImage=function(url,width,height,crossOrigin){return new Promise((function(success,error){var image;if(width&&height){image=new Image(width,height)}else{image=new Image}if(crossOrigin){image.setAttribute("crossOrigin",crossOrigin)}image.onload=function(){success(image)};function onerror(){if(crossOrigin){var currentHref=image.src;image.onerror=function(){error(new Error('Loading image "'+url+'" failed'))};image.removeAttribute("crossorigin");image.src="";image.src=currentHref}else{error(new Error('Loading image "'+url+'" failed'))}}image.onabort=onerror;image.onerror=onerror;image.src=url}))};Export.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self};Export.prototype.getSVG=function(type,options,encodeURI){if(encodeURI===void 0){encodeURI=true}return __awaiter(this,void 0,void 0,(function(){var prehidden,width,height,font,fontSize,scale,pixelRatio,svg,charset,uri;return __generator(this,(function(_a){switch(_a.label){case 0:prehidden=this._objectsAlreadyHidden;if(!prehidden){this.hideNonExportableSprites()}if(!hasValue(options)){options=this.getFormatOptions("svg")}return[4,this.awaitValidSprites()];case 1:_a.sent();width=this.sprite.pixelWidth;height=this.sprite.pixelHeight;font=findFont(this.sprite.dom);fontSize=findFontSize(this.sprite.dom);scale=options.scale||1;pixelRatio=this.getPixelRatio(options);scale=this.getAdjustedScale(width*pixelRatio,height*pixelRatio,scale,options);svg=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),options,width,height,scale,font,fontSize);charset=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options}).charset;uri=this.adapter.apply("getSVG",{data:encodeURI?"data:"+this.getContentType(type)+";"+charset+","+encodeURIComponent(svg):svg,options}).data;if(!prehidden){this.restoreNonExportableSprites()}return[2,uri]}}))}))};Export.prototype.normalizeSVG=function(svg,options,width,height,scale,font,fontSize,background){var dimParams="";if(width){dimParams+='width="'+Math.round(width*(scale||1))+'px" '}if(height){dimParams+='height="'+Math.round(height*(scale||1))+'px" '}var styleParams="";if(font){styleParams+="font-family: "+font.replace(/"/g,"")+";"}if(fontSize){styleParams+="font-size: "+fontSize+";"}if(scale){dimParams+='viewBox="0 0 '+width+" "+height+'" '}var fos=[];var ms=svg.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(ms){for(var i=0;i<ms.length;i++){svg=svg.replace(ms[i],PLACEHOLDER);fos.push(ms[i])}}if(!svg.match(/<svg/)){svg='<?xml version="1.0" encoding="utf-8"?><svg '+dimParams+' style="'+styleParams+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+svg+"</svg>"}else{if(dimParams!==""){svg=svg.replace(/(<svg[^>]*)width="[^"]*"/,"$1");svg=svg.replace(/(<svg[^>]*)height="[^"]*"/,"$1");svg=svg.replace(/(<svg)/,"$1"+dimParams)}}if(background){svg=svg.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+background.rgba+'"/>')}if(isInternetExplorer()){svg=svg.replace(/<feColorMatrix [^\/>]*\/>/gi,"")}var reg=new RegExp("url\\("+escapeForRgex(getBaseURI()),"g");svg=svg.replace(reg,"url(#");svg=svg.replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)");if(fos.length){for(var i=0;i<fos.length;i++){svg=svg.replace(PLACEHOLDER,fos[i])}}svg=this.adapter.apply("normalizeSVG",{data:svg,options}).data;return svg};Export.prototype.serializeElement=function(element){return(new XMLSerializer).serializeToString(element)};Export.prototype.getPDF=function(type,options){return __awaiter(this,void 0,void 0,(function(){function addFont(font){var paths={};paths.normal=font.normal.path;vfs[font.normal.path]=font.normal.bytes;if(font.bold){paths.bold=font.bold.path;vfs[font.bold.path]=font.bold.bytes}else{paths.bold=font.normal.path}if(font.italics){paths.italics=font.italics.path;vfs[font.italics.path]=font.italics.bytes}else{paths.italics=font.normal.path}if(font.bolditalics){paths.bolditalics=font.bolditalics.path;vfs[font.bolditalics.path]=font.bolditalics.bytes}else{paths.bolditalics=font.normal.path}fonts[font.name]=paths}var image,pdfmake,defaultMargins,doc,title,extraMargin,_a,_b,_c,fonts,vfs;return __generator(this,(function(_d){switch(_d.label){case 0:return[4,this.getImage(options.imageFormat||"png",options)];case 1:image=_d.sent();return[4,this.pdfmake];case 2:pdfmake=_d.sent();defaultMargins=[30,30,30,30];doc={pageSize:options.pageSize||"A4",pageOrientation:options.pageOrientation||"portrait",pageMargins:options.pageMargins||defaultMargins,defaultStyle:{font:options.font?options.font.name:undefined},content:[]};title=this.adapter.apply("title",{title:this.title,options}).title;extraMargin=0;if(title){doc.content.push({text:title,fontSize:options.fontSize||14,bold:true,margin:[0,0,0,15]});extraMargin+=50}if(options.addURL){doc.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:options.fontSize,margin:[0,0,0,15]});extraMargin+=50}if(type!="pdfdata"){doc.content.push({image,alignment:options.align||"left",fit:this.getPageSizeFit(doc.pageSize,doc.pageMargins,extraMargin)})}if(!(type=="pdfdata"||options.addData))return[3,4];_b=(_a=doc.content).push;_c={};return[4,this.getPDFData("pdf",options)];case 3:_b.apply(_a,[(_c.table=_d.sent(),_c.fontSize=options.fontSize||14,_c)]);_d.label=4;case 4:doc=this.adapter.apply("pdfmakeDocument",{doc,options}).doc;fonts=null;vfs=null;if(options.font){fonts={};vfs={};addFont(options.font);if(options.extraFonts){each$2(options.extraFonts,addFont)}}return[4,new Promise((function(success,error){pdfmake.createPdf(doc,null,fonts,vfs).getDataUrl((function(uri){success(uri)}))}))];case 5:return[2,_d.sent()]}}))}))};Export.prototype.getPDFData=function(type,options){return __awaiter(this,void 0,void 0,(function(){var content,dataFields,data,dataFieldsOrder_1,len,i;var _this=this;return __generator(this,(function(_a){content={body:[]};dataFields=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields;data=this.data;if(options.pivot){dataFieldsOrder_1=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,val){var dataRow=[];if(options.addColumnNames){dataRow.push(val)}for(var len=data.length,i=0;i<len;i++){var dataValue=data[i][key];dataRow.push(_this.convertToSpecialFormat(key,dataValue,options,true))}content.body.push(_this.getPDFDataRow(dataRow,options,undefined,true))}),(function(a,b){var ai=dataFieldsOrder_1.indexOf(a);var bi=dataFieldsOrder_1.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}))}else{if(options.addColumnNames){content.body.push(this.getPDFDataRow(dataFields,options,undefined,true));content.headerRows=1}for(len=data.length,i=0;i<len;i++){content.body.push(this.getPDFDataRow(data[i],options,dataFields))}}return[2,this.adapter.apply("pdfmakeTable",{table:content,options}).table]}))}))};Export.prototype.getPDFDataRow=function(row,options,dataFields,asIs){var _this=this;if(asIs===void 0){asIs=false}var items=[];if(!dataFields){dataFields=row}var dataFieldsOrder=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,name){var value=_this.convertEmptyValue(key,row[key],options);var item=asIs?value:_this.convertToSpecialFormat(key,value,options);item=""+item;items.push(item)}),(function(a,b){var ai=dataFieldsOrder.indexOf(a);var bi=dataFieldsOrder.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}));return items};Export.prototype.getPageSizeFit=function(pageSize,margins,extraMargin){if(extraMargin===void 0){extraMargin=0}var newMargins=[0,0,0,0];if(typeof margins=="number"){newMargins=[margins,margins,margins,margins]}else if(margins.length==2){newMargins=[margins[0],margins[1],margins[0],margins[1]]}else if(margins.length==4){newMargins=margins}var sizes={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]};var fitSize=sizes[pageSize];fitSize[0]-=newMargins[0]+newMargins[2];fitSize[1]-=newMargins[1]+newMargins[3]+extraMargin;return fitSize};Export.prototype.getExcel=function(type,options){return __awaiter(this,void 0,void 0,(function(){var XLSX,wbOptions,sheetName,wb,data,dataFields,dataFieldsOrder_2,len,i,uri;var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:if(!hasValue(options)){options=this.getFormatOptions("xlsx")}return[4,this.xlsx];case 1:XLSX=_a.sent();wbOptions=this.adapter.apply("xlsxWorkbookOptions",{xlsx:XLSX,options:{bookType:"xlsx",bookSST:false,type:"base64"}}).options;sheetName=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:XLSX,name:this.title||this.language.translate("Data")}).name);wb={SheetNames:[sheetName],Sheets:{}};data=[];dataFields=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields;if(options.pivot){dataFieldsOrder_2=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,val){var dataRow=[];if(options.addColumnNames){dataRow.push(val)}for(var len=_this.data.length,i=0;i<len;i++){var dataValue=_this.data[i][key];dataRow.push(_this.convertToSpecialFormat(key,dataValue,options,true))}data.push(_this.getExcelRow(dataRow,options,undefined,true))}),(function(a,b){var ai=dataFieldsOrder_2.indexOf(a);var bi=dataFieldsOrder_2.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}))}else{if(options.addColumnNames){data.push(this.getExcelRow(dataFields,options,undefined,true))}for(len=this.data.length,i=0;i<len;i++){data.push(this.getExcelRow(this.data[i],options,dataFields))}}wb.Sheets[sheetName]=XLSX.utils.aoa_to_sheet(data);wb=this.adapter.apply("xlsxWorkbook",{xlsx:XLSX,workbook:wb,options}).workbook;uri=this.adapter.apply("getExcel",{data:"data:"+this.getContentType(type)+";base64,"+XLSX.write(wb,wbOptions),options}).data;return[2,uri]}}))}))};Export.prototype.normalizeExcelSheetName=function(name){name=name.replace(/([:\\\/?*\[\]]+)/g," ");return truncateWithEllipsis(name,31,"...",true)};Export.prototype.getExcelRow=function(row,options,dataFields,asIs){var _this=this;if(asIs===void 0){asIs=false}var items=[];if(!dataFields){dataFields=row}var dataFieldsOrder=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,name){var value=_this.convertEmptyValue(key,row[key],options);var item=asIs?value:_this.convertToSpecialFormat(key,value,options,true);items.push(item)}),(function(a,b){var ai=dataFieldsOrder.indexOf(a);var bi=dataFieldsOrder.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}));return items};Export.prototype.getCSV=function(type,options,encodeURI){if(encodeURI===void 0){encodeURI=true}return __awaiter(this,void 0,void 0,(function(){var csv,dataFields,br,data,dataFieldsOrder_3,len,i,row,charset,uri;var _this=this;return __generator(this,(function(_a){if(!hasValue(options)){options=this.getFormatOptions("csv")}csv="";dataFields=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields;br="";data=this.data;if(options.pivot){dataFieldsOrder_3=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,val){var dataRow=[];if(options.addColumnNames){dataRow.push(val)}for(var len=data.length,i=0;i<len;i++){var dataValue=data[i][key];dataRow.push(_this.convertToSpecialFormat(key,dataValue,options,true))}csv+=br+_this.getCSVRow(dataRow,options,undefined,true);br="\n"}),(function(a,b){var ai=dataFieldsOrder_3.indexOf(a);var bi=dataFieldsOrder_3.indexOf(b);if(ai>bi){return-1}else if(ai<bi){return 1}return 0}))}else{for(len=data.length,i=0;i<len;i++){row=this.getCSVRow(data[i],options,dataFields);if(options.reverse){csv=row+br+csv}else{csv+=br+row}br="\n"}if(options.addColumnNames){csv=this.getCSVRow(dataFields,options,undefined,true)+br+csv}}charset=this.adapter.apply("charset",{charset:"charset=utf-8",type,options}).charset;uri=this.adapter.apply("getCSV",{data:encodeURI?"data:"+this.getContentType(type)+";"+charset+","+encodeURIComponent(csv):csv,options}).data;return[2,uri]}))}))};Export.prototype.getCSVRow=function(row,options,dataFields,asIs){var _this=this;if(asIs===void 0){asIs=false}var separator=options.separator||",";var items=[];if(!dataFields){dataFields=row}var dataFieldsOrder=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;eachOrdered(dataFields,(function(key,name){var value=_this.convertEmptyValue(key,row[key],options);var item=asIs?value:_this.convertToSpecialFormat(key,value,options);item=""+item;item=item.replace(/"/g,'""');if(options.forceQuotes||item.search(new RegExp('"|\n|'+separator,"g"))>=0){item='"'+item+'"'}items.push(item)}),(function(a,b){var ai=dataFieldsOrder.indexOf(a);var bi=dataFieldsOrder.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}));return items.join(separator)};Export.prototype.getHTML=function(type,options,encodeURI){if(encodeURI===void 0){encodeURI=true}return __awaiter(this,void 0,void 0,(function(){var html,dataFields,data,dataFieldsOrder_4,len,i,charset,uri;var _this=this;return __generator(this,(function(_a){if(!hasValue(options)){options=this.getFormatOptions("html")}html="<table>";if(options.tableClass){html='<table class="'+options.tableClass+'">'}dataFields=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields;data=this.data;if(options.pivot){dataFieldsOrder_4=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder;html+="\n<tbody>";eachOrdered(dataFields,(function(key,val){var dataRow=[];if(options.addColumnNames){dataRow.push(val)}for(var len=data.length,i=0;i<len;i++){var dataValue=data[i][key];dataRow.push(_this.convertToSpecialFormat(key,dataValue,options,true))}html+="\n"+_this.getHTMLRow(dataRow,options,undefined,true)}),(function(a,b){var ai=dataFieldsOrder_4.indexOf(a);var bi=dataFieldsOrder_4.indexOf(b);if(ai>bi){return-1}else if(ai<bi){return 1}return 0}));html+="\n</tbody>"}else{if(options.addColumnNames){html+="\n<thead>\n"+this.getHTMLRow(dataFields,options,undefined,true,true)+"\n</thead>"}html+="\n<tbody>";for(len=data.length,i=0;i<len;i++){html+="\n"+this.getHTMLRow(data[i],options,dataFields)}html+="\n</tbody>"}html+="\n</table>";charset=this.adapter.apply("charset",{charset:"charset=utf-8",type,options}).charset;uri=this.adapter.apply("getHTML",{data:encodeURI?"data:"+this.getContentType(type)+";"+charset+","+encodeURIComponent(html):html,options}).data;return[2,uri]}))}))};Export.prototype.getHTMLRow=function(row,options,dataFields,asIs,headerRow){var _this=this;if(asIs===void 0){asIs=false}if(headerRow===void 0){headerRow=false}var html="\t<tr>";if(options.rowClass){html='\t<tr class="'+options.rowClass+'">'}if(!dataFields){dataFields=row}var dataFieldsOrder=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder;var tag=headerRow?"th":"td";var first=true;eachOrdered(dataFields,(function(key,name){var value=_this.convertEmptyValue(key,row[key],options);var item=asIs?value:_this.convertToSpecialFormat(key,value,options);item=""+item;item=item.replace(/[\u00A0-\u9999<>\&]/gim,(function(i){return"&#"+i.charCodeAt(0)+";"}));var useTag=tag;if(options.pivot&&first){useTag="th"}if(options.cellClass){html+="\n\t\t<"+useTag+' class="'+options.cellClass+'">'+item+"</"+useTag+">"}else{html+="\n\t\t<"+useTag+">"+item+"</"+useTag+">"}first=false}),(function(a,b){var ai=dataFieldsOrder.indexOf(a);var bi=dataFieldsOrder.indexOf(b);if(ai>bi){return 1}else if(ai<bi){return-1}return 0}));html+="\n\t</tr>";return html};Export.prototype.getJSON=function(type,options,encodeURI){if(encodeURI===void 0){encodeURI=true}return __awaiter(this,void 0,void 0,(function(){var data,dataFields,sourceData,_loop_1,len,i,json,charset,uri;var _this=this;return __generator(this,(function(_a){if(!hasValue(options)){options=this.getFormatOptions("json")}dataFields=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields;if(!this._dynamicDataFields){data=[];sourceData=this.data;_loop_1=function(len,i){var value=sourceData[i];if(typeof value=="object"){var newValue_1={};each$1(value,(function(field,item){if(hasValue(dataFields[field])){newValue_1[dataFields[field]]=_this.convertToSpecialFormat(field,item,options)}}));data.push(newValue_1)}};for(len=sourceData.length,i=0;i<len;i++){_loop_1(len,i)}}else{data=this.data}json=JSON.stringify(data,(function(key,value){if(typeof value=="object"){each$1(value,(function(field,item){value[field]=_this.convertToSpecialFormat(field,item,options)}))}return value}),options.indent);charset=this.adapter.apply("charset",{charset:"charset=utf-8",type,options}).charset;uri=this.adapter.apply("getJSON",{data:encodeURI?"data:"+this.getContentType(type)+";"+charset+","+encodeURIComponent(json):json,options}).data;return[2,uri]}))}))};Export.prototype.convertToSpecialFormat=function(field,value,options,keepOriginal){if(typeof value=="number"){if(this.isDateField(field)){value=new Date(value)}else if(this.isDurationField(field)){return this.durationFormatter.format(value,this.durationFormat)}else if(this.isNumberField(field)&&this.numberFormat){return this.numberFormatter.format(value,this.numberFormat)}}if(value instanceof Date){if(options.useTimestamps){value=value.getTime()}else if(options.useLocale){if(!keepOriginal){value=value.toLocaleString()}}else{value=this.dateFormatter.format(value,this.dateFormat)}}else if(isString$1(value)&&this.isDateField(field)&&this.dateFormat){value=this.dateFormatter.format(this.dateFormatter.parse(value),this.dateFormat)}return value};Export.prototype.convertEmptyValue=function(field,value,options){return hasValue(value)?value:options.emptyAs};Export.prototype.download=function(uri,fileName,addBOM){if(addBOM===void 0){addBOM=false}return __awaiter(this,void 0,void 0,(function(){var parts,contentType,decoded,blob_1,chars,i,charCode,blob,link_1,parts,contentType,decoded,blob_2,url_2,chars,i,charCode,blob,url_3,link,parts,contentType,iframe,idoc;return __generator(this,(function(_a){if(this.msBlobDownloadSupport()){parts=uri.split(";");contentType=parts.shift().replace(/data:/,"");uri=decodeURIComponent(parts.join(";").replace(/^[^,]*,/,""));if(["image/svg+xml","application/json","text/csv"].indexOf(contentType)==-1){try{decoded=atob(uri);uri=decoded}catch(e){return[2,false]}}else{blob_1=new Blob([uri],{type:contentType});window.navigator.msSaveBlob(blob_1,fileName);return[2,true]}chars=new Array(uri.length);for(i=0;i<uri.length;++i){charCode=uri.charCodeAt(i);chars[i]=charCode}blob=new Blob([new Uint8Array(chars)],{type:contentType});window.navigator.msSaveBlob(blob,fileName)}else if(this.blobDownloadSupport()){link_1=document.createElement("a");link_1.download=fileName;document.body.appendChild(link_1);parts=uri.split(";");contentType=parts.shift().replace(/data:/,"");uri=decodeURIComponent(parts.join(";").replace(/^[^,]*,/,""));if(["image/svg+xml","application/json","text/csv","text/html"].indexOf(contentType)==-1){try{decoded=atob(uri);uri=decoded}catch(e){return[2,false]}}else{if(addBOM){uri="\ufeff"+uri}blob_2=new Blob([uri],{type:contentType});url_2=window.URL.createObjectURL(blob_2);link_1.href=url_2;link_1.download=fileName;link_1.click();setTimeout((function(){document.body.removeChild(link_1);window.URL.revokeObjectURL(url_2)}),100);return[2,true]}chars=new Array(uri.length);for(i=0;i<uri.length;++i){charCode=uri.charCodeAt(i);chars[i]=charCode}if(addBOM){chars=[239,187,191].concat(chars)}blob=new Blob([new Uint8Array(chars)],{type:contentType});url_3=window.URL.createObjectURL(blob);link_1.href=url_3;link_1.download=fileName;document.body.appendChild(link_1);link_1.click();document.body.removeChild(link_1);setTimeout((function(){window.URL.revokeObjectURL(url_3)}),100)}else if(this.linkDownloadSupport()){link=document.createElement("a");link.download=fileName;link.href=uri;document.body.appendChild(link);link.click();document.body.removeChild(link)}else if(this.legacyIE()){parts=uri.match(/^data:(.*);[ ]*([^,]*),(.*)$/);if(parts.length===4){if(parts[2]=="base64"){if(parts[1].match(/^image\//)){this.showModal('<img src="'+uri+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" />'+"<p>"+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+"</p>"+'<p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete"))}}else{contentType=void 0;if(fileName.match(/\.svg$/)){contentType="image/svg+xml"}else{contentType="text/plain";fileName+=".txt"}iframe=document.createElement("iframe");iframe.width="1px";iframe.height="1px";iframe.style.display="none";document.body.appendChild(iframe);idoc=iframe.contentDocument;idoc.open(contentType,"replace");idoc.write(decodeURIComponent(parts[3]));idoc.close();idoc.execCommand("SaveAs",true,fileName);document.body.removeChild(iframe)}}}else{window.location.href=uri}return[2,true]}))}))};Export.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()};Export.prototype.linkDownloadSupport=function(){var cache=registry.getCache("linkDownloadSupport");if(cache===false||cache===true){return cache}var a=document.createElement("a");var res=typeof a.download!=="undefined";registry.setCache("linkDownloadSupport",res);return res};Export.prototype.blobDownloadSupport=function(){return hasValue(window.Blob)};Export.prototype.msBlobDownloadSupport=function(){return hasValue(window.navigator.msSaveOrOpenBlob)};Export.prototype.legacyIE=function(){var div=document.createElement("div");div.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e";return div.getElementsByTagName("i").length==1};Export.prototype.print=function(data,options,title){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){if(options.printMethod=="css"){return[2,this.printViaCSS(data,options,title)]}else{return[2,this.printViaIframe(data,options,title)]}}))}))};Export.prototype.printViaCSS=function(data,options,title){return __awaiter(this,void 0,void 0,(function(){var scroll,rule,originalTitle,img,isIOS;return __generator(this,(function(_a){scroll=document.documentElement.scrollTop||document.body.scrollTop;rule=new StyleRule(getShadowRoot(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"});if(title&&document&&document.title){originalTitle=document.title;document.title=title}img=new Image;img.src=data;img.style.maxWidth="100%";img.style.display="block";img.style.position="relative";img.style.visibility="visible";img.style.opacity="1";img.style.clipPath="none";document.body.appendChild(img);this.setTimeout((function(){window.print()}),50);isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(isIOS&&options.delay<1e3){options.delay=1e3}else if(options.delay<100){options.delay=100}this.setTimeout((function(){document.body.removeChild(img);rule.dispose();if(originalTitle){document.title=document.title}document.documentElement.scrollTop=document.body.scrollTop=scroll}),options.delay||500);return[2,true]}))}))};Export.prototype.printViaIframe=function(data,options,title){return __awaiter(this,void 0,void 0,(function(){var iframe,img,isIOS;return __generator(this,(function(_a){iframe=document.createElement("iframe");iframe.style.visibility="hidden";document.body.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.close();img=new Image;img.src=data;img.style.maxWidth="100%";img.style.height="auto";if(title){iframe.contentWindow.document.title=title}iframe.contentWindow.document.body.appendChild(img);iframe.load=function(){iframe.contentWindow.document.body.appendChild(img)};this.setTimeout((function(){try{if(!iframe.contentWindow.document.execCommand("print",false,null)){iframe.contentWindow.print()}}catch(e){iframe.contentWindow.print()}}),options.delay||50);isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(isIOS&&options.delay<1e3){options.delay=1e3}else if(options.delay<100){options.delay=100}this.setTimeout((function(){document.body.removeChild(iframe)}),options.delay+50||100);return[2,true]}))}))};Export.prototype.findBackgroundColor=function(element){var opacity=1,currentColor=getComputedStyle$1(element,"background-color");if(currentColor.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||currentColor=="transparent"){opacity=0}if(opacity==0){var parent_2=element.parentElement;if(parent_2){return this.findBackgroundColor(parent_2)}else{return color("#fff")}}else{return color(currentColor,opacity)}};Object.defineProperty(Export.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(value){this._container=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(value){this._sprite=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(value){this._extraSprites=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(value){this._validateSprites=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(value){this._data=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"dataFields",{get:function(){if(!this._dataFields){this.generateDataFields()}return this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(value){this._dataFields=value;this._dynamicDataFields=false},enumerable:true,configurable:true});Export.prototype.handleDataUpdated=function(){if(this._dynamicDataFields){this._dataFields=undefined}var hasData=this.data.length>0;if(this._prevHasData!=hasData){this._prevHasData=hasData;if(this.menu){this.menu.invalidate()}}};Object.defineProperty(Export.prototype,"dateFormatter",{get:function(){if(!this._dateFormatter){this._dateFormatter=new DateFormatter;this._dateFormatter.language=this.language}return this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(value){this._dateFormatter=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(value){this._dateFormat=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"dateFields",{get:function(){if(!this._dateFields){this._dateFields=new List}return this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(value){this._dateFields=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"numberFormatter",{get:function(){if(!this._numberFormatter){this._numberFormatter=new NumberFormatter;this._numberFormatter.language=this.language}return this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(value){this._numberFormatter=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(value){this._numberFormat=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"numberFields",{get:function(){if(!this._numberFields){this._numberFields=new List}return this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(value){this._numberFields=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"durationFormatter",{get:function(){if(!this._durationFormatter){this._durationFormatter=new DurationFormatter;this._durationFormatter.language=this.language}return this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(value){this._durationFormatter=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(value){this._durationFormat=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"durationFields",{get:function(){if(!this._durationFields){this._durationFields=new List}return this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(value){this._durationFields=value},enumerable:true,configurable:true});Export.prototype.generateDataFields=function(){var _this=this;this._dataFields={};if(this.data.length){each$2(this.data,(function(row){each$1(row,(function(key,value){if(!hasValue(_this._dataFields[key])){_this._dataFields[key]=_this.adapter.apply("dataFieldName",{name:key,field:key}).name}}))}))}};Export.prototype.isDateField=function(field){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(field),field}).isDateField};Export.prototype.isNumberField=function(field){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(field),field}).isNumberField};Export.prototype.isDurationField=function(field){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(field),field}).isDurationField};Export.prototype.getContentType=function(type){var contentType="";switch(type){case"png":case"gif":contentType="image/"+type;break;case"jpg":contentType="image/jpeg";break;case"svg":contentType="image/svg+xml";break;case"csv":contentType="text/csv";break;case"json":contentType="application/json";break;case"html":contentType="text/html";break;case"pdf":case"pdfdata":contentType="application/pdf";break;case"xlsx":contentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break}return this.adapter.apply("contentType",{contentType,type}).contentType};Object.defineProperty(Export.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(value){this._filePrefix=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(value){this._backgroundColor=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(value){this._title=value},enumerable:true,configurable:true});Export.prototype.showPreloader=function(){var preloader=this.preloader;if(preloader){preloader.progress=.5;preloader.label.text="..."}};Export.prototype.hidePreloader=function(){var preloader=this.preloader;if(preloader){preloader.progress=1}};Object.defineProperty(Export.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:undefined},enumerable:true,configurable:true});Export.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)};Export.prototype.hideTimeout=function(){if(this._timeoutTimeout){this.removeDispose(this._timeoutTimeout);this._timeoutTimeout=null}this.hideModal()};Object.defineProperty(Export.prototype,"language",{get:function(){if(!this._language){this._language=new Language}return this._language},set:function(value){this._language=value},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"modal",{get:function(){if(!this._modal){this._modal=new Modal;this._modal.adapter.add("classPrefix",(function(value){value=options.classNamePrefix+value;return value}))}return this._modal},enumerable:true,configurable:true});Export.prototype.showModal=function(text,title){this.hideModal();this.hidePreloader();var modal=this.modal;modal.container=this.sprite.svgContainer.SVGContainer;modal.content=text;modal.readerTitle=title;modal.open()};Export.prototype.hideModal=function(){if(this._modal){this.modal.close()}};Export.prototype._canvg=function(){return __awaiter(this,void 0,void 0,(function(){var canvg;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,new Promise((function(resolve,reject){require(["./index-04cf206c-3f880367"],resolve,reject)}))];case 1:canvg=_a.sent();if(canvg.default!=null){return[2,canvg.default]}else{return[2,canvg]}}}))}))};Object.defineProperty(Export.prototype,"canvg",{get:function(){return this._canvg()},enumerable:true,configurable:true});Object.defineProperty(Export.prototype,"pdfmake",{get:function(){if(pdfmakePromise==null){pdfmakePromise=_pdfmake()}return pdfmakePromise},enumerable:true,configurable:true});Export.prototype._xlsx=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(_a){switch(_a.label){case 0:return[4,new Promise((function(resolve,reject){require(["./xlsx.core.min-070537b0-93141c1d"],resolve,reject)})).then((function(n){return n.x}))];case 1:return[2,_a.sent()]}}))}))};Object.defineProperty(Export.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:true,configurable:true});Export.prototype.setFormatOptions=function(type,options){this._formatOptions.setKey(type,options)};Export.prototype.getFormatOptions=function(type){return this._formatOptions.getKey(type)};Object.defineProperty(Export.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:true,configurable:true});Export.prototype._disablePointers=function(){if(!hasValue(this._spriteInteractionsEnabled)){this._spriteInteractionsEnabled=this.sprite.interactionsEnabled}this.sprite.interactionsEnabled=false};Export.prototype._releasePointers=function(){if(hasValue(this._spriteInteractionsEnabled)&&!this._exportRunning){this.sprite.interactionsEnabled=this._spriteInteractionsEnabled}};Export.prototype.hideNonExportableSprites=function(){var _this=this;if(this._objectsAlreadyHidden){return}var svgContainer=this.sprite.svgContainer;if(svgContainer){each$2(svgContainer.nonExportableSprites,(function(item){if(!item.isHidden&&!item.isHiding&&item.visible){_this._hiddenObjects.push(item)}item.hide(0)}))}this._objectsAlreadyHidden=true};Export.prototype.restoreNonExportableSprites=function(){if(!this._objectsAlreadyHidden){return}each$2(this._hiddenObjects,(function(item){item.show(0)}));this._hiddenObjects=[];this._objectsAlreadyHidden=false};Export.prototype.awaitValidSprites=function(){return __awaiter(this,void 0,void 0,(function(){var promises;return __generator(this,(function(_a){switch(_a.label){case 0:promises=[];if(this.validateSprites.length){each$2(this.validateSprites,(function(sprite,index){if(sprite.invalid){promises.push(new Promise((function(resolve,reject){sprite.events.once("validated",(function(ev){resolve()}))})))}}))}if(!promises.length)return[3,2];return[4,Promise.all(promises)];case 1:_a.sent();_a.label=2;case 2:return[2]}}))}))};Export.prototype.processConfig=function(config){registry.registeredClasses["ExportMenu"]=ExportMenu;if(config){if(hasValue(config.menu)&&!hasValue(config.menu.type)){config.menu.type="ExportMenu"}if(hasValue(config.dataFields)&&isObject$4(config.dataFields)){this.dataFields=config.dataFields;delete config.dataFields}}_super.prototype.processConfig.call(this,config)};Export.XLINK="http://www.w3.org/1999/xlink";return Export}(Validatable);var visualProperties=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"];var Sprite=function(_super){__extends(Sprite,_super);function Sprite(){var _this=_super.call(this)||this;_this.properties={};_this._eventDispatcher=new SpriteEventDispatcher(_this);_this._bindings={};_this._isTemplate=false;_this._isPath=false;_this._inited=false;_this._ready=false;_this.isHiding=false;_this._isHidden=false;_this.isShowing=false;_this.isStandaloneInstance=false;_this._isActive=false;_this._mask=new MutableValueDisposer;_this._positionPrecision=3;_this._language=new MutableValueDisposer;_this._exporting=new MutableValueDisposer;_this._exportable=true;_this._bbox={x:0,y:0,width:0,height:0};_this.invalid=false;_this.positionInvalid=false;_this.propertyFields={};_this.applyOnClones=false;_this._measuredWidthSelf=0;_this._measuredHeightSelf=0;_this.maxLeft=0;_this.maxRight=0;_this.maxTop=0;_this.maxBottom=0;_this.maxLeftSelf=0;_this.maxRightSelf=0;_this.maxTopSelf=0;_this.maxBottomSelf=0;_this._isDragged=false;_this._isResized=false;_this._disabled=false;_this._internalDisabled=false;_this._updateDisabled=false;_this._internalDefaultsApplied=false;_this.rollOutDelay=0;_this.isBaseSprite=false;_this.shouldClone=true;_this.appeared=false;_this.ex=0;_this.ey=0;_this.dragWhileResize=false;_this.measureFailed=false;_this.preventShow=false;_this.cloneTooltip=true;_this.className="Sprite";_this._disposers.push(_this._eventDispatcher);_this.group=_this.paper.addGroup("g");_this.setPropertyValue("scale",1);_this.setPropertyValue("rotation",0);_this.setPropertyValue("align","none");_this.setPropertyValue("valign","none");_this.setPropertyValue("pixelPerfect",false);_this.setPropertyValue("visible",true);_this.setPropertyValue("tooltipPosition","fixed");_this.setPropertyValue("verticalCenter","none");_this.setPropertyValue("horizontalCenter","none");_this.setPropertyValue("tooltipX",percent(50));_this.setPropertyValue("tooltipX",percent(50));_this.setPropertyValue("marginTop",0);_this.setPropertyValue("marginBottom",0);_this.setPropertyValue("marginLeft",0);_this.setPropertyValue("marginRight",0);_this.setPropertyValue("dx",0);_this.setPropertyValue("dy",0);_this.setPropertyValue("paddingTop",0);_this.setPropertyValue("paddingBottom",0);_this.setPropertyValue("paddingRight",0);_this.setPropertyValue("paddingLeft",0);_this.setPropertyValue("togglable",false);_this.setPropertyValue("hidden",false);_this.setPropertyValue("urlTarget","_self");_this.setPropertyValue("alwaysShowTooltip",false);_this.setPropertyValue("showTooltipOn","hover");_this._prevMeasuredWidth=0;_this._prevMeasuredHeight=0;_this._measuredWidth=0;_this._measuredHeight=0;_this._isMeasured=true;_this.invalidate();_this.applyTheme();_this._disposers.push(_this.events);_this._disposers.push(_this.group);_this._disposers.push(_this._mask);_this._disposers.push(_this._language);_this._disposers.push(_this._exporting);_this._disposers.push(new Disposer((function(){each$1(_this._bindings,(function(key,value){value.dispose()}))})));_this.setPropertyValue("interactionsEnabled",true);return _this}Object.defineProperty(Sprite.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"adapter",{get:function(){if(!this._adapterO){this._adapterO=new Adapter(this)}return this._adapterO},enumerable:true,configurable:true});Sprite.prototype.applyTheme=function(){_super.prototype.applyTheme.call(this)};Sprite.prototype.getCurrentThemes=function(){var themes=this._themes;if(themes){return themes}else{var parent_1=this._parent;if(parent_1){return parent_1.getCurrentThemes()}else{return registry.themes}}};Sprite.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=true};Sprite.prototype.invalidate=function(){if(this.disabled||this._isTemplate||this.__disabled){return}if(!this.invalid){this.invalid=true;registry.addToInvalidSprites(this);system.requestFrame()}};Sprite.prototype.validate=function(){this.dispatchImmediately("beforevalidated");if(!this._internalDefaultsApplied){this.applyInternalDefaults()}this.beforeDraw();this.draw();this.invalid=false;registry.removeFromInvalidSprites(this);this.afterDraw()};Sprite.prototype.invalidatePosition=function(){if(this.disabled||this._isTemplate){return}if(!this.positionInvalid){this.positionInvalid=true;registry.addToInvalidPositions(this);system.requestFrame()}};Sprite.prototype.validatePosition=function(){var pixelX=this.pixelX;var pixelY=this.pixelY;var dx=this.dx;var dy=this.dy;var x=pixelX+dx;var y=pixelY+dy;if(this._updateDisabled){if(this._internalDisabled){this.group.attr({display:"none"})}else{if(!this.disabled){this.removeSVGAttribute("display")}}this._updateDisabled=false}var sizeChanged=this.measure();var prevGroupTransform=this.group.transformString;this.group.moveTo({x,y});this.group.rotation=this.rotation;if(this.nonScaling){this.group.scale=this.scale/this.globalScale}else{this.group.scale=this.scale}if(prevGroupTransform!=this.group.transformString||sizeChanged){if(prevGroupTransform==null){this.dispatch("transformed")}else{this.dispatchImmediately("transformed")}this.dispatch("positionchanged");if(this.showTooltipOn=="hit"||this.showTooltipOn=="always"){this.updateTooltipPosition()}}if(pixelX+dx==x&&pixelY+dy==y){registry.removeFromInvalidPositions(this);this.positionInvalid=false}var maskRectangle=this._maskRectangle;if(maskRectangle){this._clipElement.moveTo({x:maskRectangle.x-pixelX,y:maskRectangle.y-pixelY})}};Sprite.prototype.beforeDraw=function(){};Sprite.prototype.draw=function(){};Sprite.prototype.afterDraw=function(){var e_1,_a;if(this.isMeasured||this.horizontalCenter!=="none"||this.verticalCenter!=="none"){this.measureElement()}if(!this._inited){if(this._adapterO){try{for(var _b=__values(this._adapterO.keys()),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;switch(key){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[key]=this[key];break}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}}this.applyFilters();this.visible=this.visible;this.interactionsEnabled=this.getPropertyValue("interactionsEnabled");this._inited=true;if(!this.showOnInit){this.appeared=true}if(this.hidden){this.hide(0)}this.applyMask();this.dispatch("validated");this.dispatch("inited");this.dispatchReady()}else{this.dispatch("validated")}if(this.showTooltipOn=="always"){if(this.visible&&!this.disabled&&!this.__disabled){this.showTooltip()}else{this.hideTooltip(0)}}};Sprite.prototype.dispatchReady=function(){if(!this.isReady()){this._ready=true;this.dispatch("ready")}};Sprite.prototype.reinit=function(){this._inited=false;this.setState(this.defaultState);this.invalidate()};Sprite.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged");if(this.nonScalingStroke){this.strokeWidth=this.strokeWidth}if(this.nonScaling){this.validatePosition()}this.updateFilterScale()};Sprite.prototype.updateFilterScale=function(){var _this=this;each(this.filters.iterator(),(function(filter){filter.scale=_this.globalScale}))};Sprite.prototype.removeFromInvalids=function(){registry.removeFromInvalidSprites(this);registry.removeFromInvalidPositions(this)};Sprite.prototype.copyFrom=function(source){var _this=this;_super.prototype.copyFrom.call(this,source);this.isMeasured=source.isMeasured;this.states.copyFrom(source.states);if(source.filters.length>0){source.filters.each((function(filter){_this.filters.push(filter.clone())}))}if(source._adapterO){this.adapter.copyFrom(source._adapterO)}if(source["_interaction"]){this.interactions.copyFrom(source.interactions)}if(source["_plugins"]){this.plugins.copyFrom(source.plugins)}this.configField=source.configField;this.applyOnClones=source.applyOnClones;this.disabled=source.disabled;this.virtualParent=source.virtualParent;this.exportable=source.exportable;if(source._tooltip){if(this._tooltip){this._tooltip.copyFrom(source.tooltip)}else{if(source.cloneTooltip){this.tooltip=source.tooltip.clone()}else{this._tooltip=source.tooltip}}}this._showSystemTooltip=source.showSystemTooltip;copyProperties(source.propertyFields,this.propertyFields);copyProperties(source.properties,this);if(source.fillModifier){this.fillModifier=source.fillModifier.clone()}if(source.strokeModifier){this.strokeModifier=source.strokeModifier.clone()}if(source.focusFilter){this.focusFilter=source.focusFilter.clone()}};Sprite.prototype.dispose=function(){if(!this.isDisposed()){if(this.showTooltipOn=="always"&&this.tooltip){this.tooltip.hide()}this.dispatchImmediately("beforedisposed");if(this.isBaseSprite){if(this.htmlContainer){while(this.htmlContainer.childNodes.length>0){this.htmlContainer.removeChild(this.htmlContainer.firstChild)}}this.isBaseSprite=false}_super.prototype.dispose.call(this);if(this._adapterO){this._adapterO.clear()}if(this.applyOnClones){if(this._clones){for(var i=this._clones.length-1;i>=0;i--){var clone=this._clones.getIndex(i);clone.dispose()}}}if(this._svgContainer){this._svgContainer.dispose()}if(this._interactionDisposer){this._interactionDisposer.dispose();this._interactionDisposer=undefined}if(this._urlDisposer){this._urlDisposer.dispose()}this.removeFromInvalids();if(this.element){this.element.dispose()}if(this.group){this.group.dispose()}if(this._numberFormatter){this._numberFormatter.dispose()}if(this._focusFilter){this._focusFilter.dispose()}var stroke=this.stroke;if(stroke&&!(stroke instanceof Color)&&stroke.dispose){if(this.clonedFrom&&this.clonedFrom.stroke==stroke);else{stroke.dispose()}}var fill=this.fill;if(fill&&!(fill instanceof Color)&&fill.dispose){if(this.clonedFrom&&this.clonedFrom.fill==fill);else{fill.dispose()}}if(hasValue(this.id)){this.map.removeKey(this.id)}this.parent=undefined;if(this._filters){while(this._filters.length>0){var filter=this._filters.getIndex(0);filter.dispose();this._filters.removeValue(filter)}}this._alwaysShowDisposers=undefined}};Object.defineProperty(Sprite.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(value){value=toBoolean(value);if(this._isTemplate!=value){this._isTemplate=value;if(this instanceof Container){each(this.children.iterator(),(function(child){child.isTemplate=value}))}if(value){this.parent=this._parent;this.removeFromInvalids()}else{this.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"showSystemTooltip",{get:function(){if(!hasValue(this._showSystemTooltip)){if(this.virtualParent){return this.virtualParent.showSystemTooltip}else if(this._parent){return this._parent.showSystemTooltip}else{return false}}return this._showSystemTooltip},set:function(value){value=toBoolean(value);if(this._showSystemTooltip!=value){this._showSystemTooltip=value;this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"topParent",{get:function(){if(this._topParent){return this._topParent}else{if(this._parent){return this._parent.topParent}}},set:function(value){this._topParent=value},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"parent",{get:function(){return this._parent},set:function(parent){if(this._isTemplate){return}var oldParent=this._parent;if(oldParent!=parent){if(oldParent){oldParent.children.removeValue(this)}this._parent=parent;if(parent){this.topParent=parent.topParent;if(parent.isTemplate){this.isTemplate=true}this.baseId=parent.baseId;parent.children.push(this);if(this._tooltip&&!this._tooltipContainer){this._tooltip.parent=parent.tooltipContainer}if(!this._dataItem){this.dataItem=parent.dataItem}this.handleAlwaysShowTooltip();if(this.dataItem){this.applyAccessibility()}this.dispatchImmediately("parentset")}else{this.topParent=undefined}}},enumerable:true,configurable:true});Sprite.prototype.handleAlwaysShow=function(){this.showTooltip()};Sprite.prototype.handleAlwaysShowTooltip=function(){var sprite=this;var oldDisposers=this._alwaysShowDisposers;if(oldDisposers){each$2(oldDisposers,(function(oldDisposer){oldDisposer.dispose()}))}this._alwaysShowDisposers=[];if(this.showTooltipOn=="always"){while(sprite!=undefined){var disposer=sprite.events.on("visibilitychanged",this.handleAlwaysShow,this,false);this.addDisposer(disposer);this._alwaysShowDisposers.push(disposer);sprite=sprite.parent}}};Object.defineProperty(Sprite.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(value){this._virtualParent=value;if(this.dataItem){this.applyAccessibility()}},enumerable:true,configurable:true});Sprite.prototype.appendDefs=function(){if(this.filterElement){this.paper.appendDef(this.filterElement)}var fill=this.fill;if(fill&&fill.element){this.paper.appendDef(fill.element)}var stroke=this.stroke;if(stroke&&stroke.element){this.paper.appendDef(stroke.element)}if(this.fillModifier&&this.fill instanceof Color){var fill_1=this.fillModifier.modify(this.fill);if(fill_1&&fill_1.element){this.paper.appendDef(fill_1.element)}}if(this.strokeModifier&&this.stroke instanceof Color){var stroke_1=this.strokeModifier.modify(this.stroke);if(stroke_1&&stroke_1.element){this.paper.appendDef(stroke_1.element)}}if(this._clipPath){this.paper.appendDef(this._clipPath)}if(this._exportable===false){this.exportable=false}};Object.defineProperty(Sprite.prototype,"map",{get:function(){var top=this.topParent;if(top){return top.map}else if(!this._map){this._map=new Dictionary}return this._map},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"delayedMap",{get:function(){var top=this.topParent;if(top){return top.delayedMap}else if(!this._delayedMap){this._delayedMap=new Dictionary}return this._delayedMap},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"id",{get:function(){return this._id},set:function(value){if(this._id!=value){this._id=value;if(this.map.hasKey(value)){throw Error("Duplicate id ("+value+") used on multiple objects.")}else{this.map.setKey(value,this)}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"dom",{get:function(){return this.group.node},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"paper",{get:function(){if(this._paper){return this._paper}else{var parent_2=this._parent;if(parent_2){return parent_2.paper}}return getGhostPaper()},set:function(paper){this.setPaper(paper)},enumerable:true,configurable:true});Sprite.prototype.setPaper=function(paper){var oldPaper=this._paper;if(oldPaper!=paper){this._paper=paper;this.appendDefs();return true}return false};Object.defineProperty(Sprite.prototype,"htmlContainer",{get:function(){if(this._htmlContainer){return this._htmlContainer}else{var parent_3=this._parent;if(parent_3){return parent_3.htmlContainer}}},set:function(htmlContainer){this._htmlContainer=htmlContainer},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"titleElement",{get:function(){if(!this._titleElement){this._titleElement=this.paper.add("title");this.group.add(this._titleElement)}return this._titleElement},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"descriptionElement",{get:function(){if(!this._descriptionElement){this._descriptionElement=this.paper.add("desc");this.group.add(this._descriptionElement)}return this._descriptionElement},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"filters",{get:function(){if(!this._filters){this._filters=new List;this._disposers.push(this._filters.events.onAll(this.applyFilters,this));this._disposers.push(new ListDisposer(this._filters))}return this._filters},enumerable:true,configurable:true});Sprite.prototype.setSVGAttributes=function(){this.fill=this.fill;this.opacity=this.opacity;this.fillOpacity=this.fillOpacity;this.stroke=this.stroke;this.strokeOpacity=this.strokeOpacity;this.shapeRendering=this.shapeRendering;this.strokeDasharray=this.strokeDasharray;this.strokeDashoffset=this.strokeDashoffset;this.strokeLinecap=this.strokeLinecap;this.strokeLinejoin=this.strokeLinejoin;this.focusable=this.focusable;this.tabindex=this.tabindex;this.role=this.role};Sprite.prototype.setSVGAttribute=function(attribute){this.group.attr(attribute)};Sprite.prototype.removeSVGAttribute=function(attribute){this.group.removeAttr(attribute)};Sprite.prototype.setClassName=function(){var className=this.className;var classNamePrefix=options.classNamePrefix;if(this.element){this.element.addClass(classNamePrefix+className)}this.group.addClass(classNamePrefix+className+"-group");if(hasValue(this.id)){this.group.addClass(classNamePrefix+this.id)}if(this.userClassName){this.group.addClass(this.userClassName)}};Sprite.prototype.uidAttr=function(){this.setSVGAttribute({id:this.uid});return this.uid};Sprite.prototype.updateClipPath=function(){var element=this._clipElement;if(element){element.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})}};Sprite.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath");this.paper.appendDef(this._clipPath);this._disposers.push(this._clipPath);var id=registry.getUniqueId();this._clipPath.attr({id});this.group.attr({"clip-path":'url("'+getBaseURI()+id+'")'})}};Sprite.prototype.applyMask=function(){var mask=this.mask;if(this._clipPath&&mask){if(mask instanceof Container){this._clipElement.attr({width:max$2(0,mask.pixelWidth),height:max$2(0,mask.pixelHeight)});var point=spritePointToSprite({x:mask.pixelX,y:mask.pixelY},mask.parent,this);this._clipPath.x=point.x;this._clipPath.y=point.y}else{if(mask.element&&mask.element!=this._clipElement){this._clipElement=mask.element;this._clipPath.add(this._clipElement)}this._clipPath.scale=mask.scale;this._clipPath.x=mask.pixelX;this._clipPath.y=mask.pixelY;this._clipPath.rotation=mask.rotation}}};Sprite.prototype.applyFilters=function(){var _this=this;if(this._filters&&this._filters.length>0){var width_1=100;var height_1=100;if(!this.filterElement){this.filterElement=this.paper.addGroup("filter");this._disposers.push(this.filterElement)}else{this.filterElement.removeChildNodes()}this.paper.appendDef(this.filterElement);var id="filter-"+this.uid;this.filterElement.attr({id});each(this.filters.iterator(),(function(filter){filter.sprite=_this;filter.paper=_this.paper;_this.filterElement.attr({filterUnits:filter.filterUnits});filter.appendPrimitives(_this.filterElement);if(filter.width>width_1){width_1=filter.width}if(filter.height>height_1){height_1=filter.height}filter.scale=_this.globalScale}));var w=width_1+"%";var h=height_1+"%";this.filterElement.attr({width:w,height:h,x:-(width_1-100)/2+"%",y:-(height_1-100)/2+"%"});this.group.attr({filter:'url("'+getBaseURI()+id+'")'})}else if(this.filterElement){this.group.removeAttr("filter");this.filterElement.removeChildNodes()}};Sprite.prototype.removeClipPath=function(){if(this._clipPath){this.removeDispose(this._clipPath);this._clipPath=undefined}};Sprite.prototype.setElement=function(element){this.element=element;this.setSVGAttributes();this.applyAccessibility()};Object.defineProperty(Sprite.prototype,"element",{get:function(){return this._element},set:function(element){this.removeElement();this._element=element;this.group.add(element);if(element.node instanceof SVGPathElement){this._isPath=true}if(!this.invalid){this.validate()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"svgContainer",{get:function(){if(this._svgContainer){return this._svgContainer}else if(this._parent){return this._parent.svgContainer}},set:function(svgContainer){this._svgContainer=svgContainer},enumerable:true,configurable:true});Sprite.prototype.measureElement=function(){if(this.element){if(this.definedBBox){this._bbox=this.definedBBox}else{var svgBBox=this.element.getBBox();this._bbox={x:svgBBox.x,y:svgBBox.y,width:svgBBox.width,height:svgBBox.height}}}};Sprite.prototype.updateCenter=function(){if(this.element){var prevElementTransform=this.element.transformString;var bbox=this.bbox;var ex=0;var ey=0;var elementX=bbox.x;var elementY=bbox.y;var elementWidth=bbox.width;var elementHeigth=bbox.height;var pixelPaddingLeft=this.pixelPaddingLeft;var pixelPaddingRight=this.pixelPaddingRight;var pixelPaddingTop=this.pixelPaddingTop;var pixelPaddingBottom=this.pixelPaddingBottom;var measuredWidth=max$2(elementWidth+pixelPaddingLeft+pixelPaddingRight,this.pixelWidth);var measuredHeight=max$2(elementHeigth+pixelPaddingTop+pixelPaddingBottom,this.pixelHeight);var left=bbox.x;var right=bbox.x+measuredWidth;var top_1=bbox.y;var bottom=bbox.y+measuredHeight;var horizontalCenter=this.horizontalCenter;var verticalCenter=this.verticalCenter;switch(horizontalCenter){case"none":ex=elementX+pixelPaddingLeft;break;case"left":ex=pixelPaddingLeft;break;case"middle":ex=pixelPaddingLeft-(elementWidth+pixelPaddingRight+pixelPaddingLeft)/2;break;case"right":ex=-pixelPaddingRight-elementWidth;break}switch(verticalCenter){case"none":ey=elementY+pixelPaddingTop;break;case"top":ey=pixelPaddingTop;break;case"middle":ey=pixelPaddingTop-(elementHeigth+pixelPaddingBottom+pixelPaddingTop)/2;break;case"bottom":ey=-pixelPaddingBottom-elementHeigth;break}this._measuredHeight=measuredHeight;this._measuredWidth=measuredWidth;var x=round$1(ex-elementX,this._positionPrecision,true);var y=round$1(ey-elementY,this._positionPrecision,true);this.ex=x-pixelPaddingLeft;this.ey=y-pixelPaddingTop;this.maxLeft=left+x-pixelPaddingLeft;this.maxRight=right+x-pixelPaddingLeft;this.maxTop=top_1+y-pixelPaddingTop;this.maxBottom=bottom+y-pixelPaddingTop;if(this.pixelPerfect&&options.pixelPerfectPrecision==0){x-=.5;y-=.5}this.element.moveTo({x,y});if(prevElementTransform!=this.element.transformString){this.dispatchImmediately("transformed")}}};Sprite.prototype.measure=function(){this.updateCenter();var measuredWidth=this._measuredWidth;var measuredHeight=this._measuredHeight;var left=this.maxLeft;var right=this.maxRight;var top=this.maxTop;var bottom=this.maxBottom;this._measuredWidthSelf=measuredWidth;this._measuredHeightSelf=measuredHeight;var positionPrecision=this._positionPrecision;this.maxLeftSelf=this.maxLeft;this.maxRightSelf=this.maxRight;this.maxTopSelf=this.maxTop;this.maxBottomSelf=this.maxBottom;if(this.rotation!==0||this.scale!==1||this.nonScaling){if(this.nonScalingStroke){this.strokeWidth=this.strokeWidth}var svg=this.paper.svg;var matrix=svg.createSVGMatrix();var rotation=this.rotation;var scale=this.scale;if(this.nonScaling){scale=this.scale/this.globalScale}matrix.a=cos(rotation)*scale;matrix.c=-sin(rotation)*scale;matrix.e=0;matrix.b=sin(rotation)*scale;matrix.d=cos(rotation)*scale;matrix.f=0;var p1=svg.createSVGPoint();p1.x=left;p1.y=top;var p2=svg.createSVGPoint();p2.x=right;p2.y=top;var p3=svg.createSVGPoint();p3.x=right;p3.y=bottom;var p4=svg.createSVGPoint();p4.x=left;p4.y=bottom;var pt1=p1.matrixTransform(matrix);var pt2=p2.matrixTransform(matrix);var pt3=p3.matrixTransform(matrix);var pt4=p4.matrixTransform(matrix);left=Math.min(pt1.x,pt2.x,pt3.x,pt4.x);right=Math.max(pt1.x,pt2.x,pt3.x,pt4.x);top=Math.min(pt1.y,pt2.y,pt3.y,pt4.y);bottom=Math.max(pt1.y,pt2.y,pt3.y,pt4.y);measuredWidth=right-left;measuredHeight=bottom-top;this.maxLeft=round$1(left,positionPrecision,true);this.maxRight=round$1(right,positionPrecision,true);this.maxTop=round$1(top,positionPrecision,true);this.maxBottom=round$1(bottom,positionPrecision,true)}this._measuredWidth=round$1(measuredWidth,positionPrecision,true);this._measuredHeight=round$1(measuredHeight,positionPrecision,true);if(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight){this._prevMeasuredHeight=this._measuredHeight;this._prevMeasuredWidth=this._measuredWidth;this.dispatch("sizechanged");if((this.isHover||this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.tooltip&&this.tooltip.visible&&(hasValue(this.tooltipText)||hasValue(this.tooltipHTML))){this.updateTooltipPosition()}return true}return false};Sprite.prototype.insertBefore=function(sprite){var parent=this._parent;if(parent){var index=parent.children.indexOf(sprite);if(index!==-1){parent.children.moveValue(this,index);parent.sortChildren()}}return this};Sprite.prototype.insertAfter=function(sprite){var parent=this._parent;if(parent){var index=parent.children.indexOf(sprite);if(index!==-1){parent.children.moveValue(this,index+1);parent.sortChildren()}}return this};Sprite.prototype.removeElement=function(){if(this._element){this.removeDispose(this._element);this._element=undefined}};Sprite.prototype.getRelativeX=function(value){if(value instanceof Percent){return value.value}else if(this._parent){return value/this._parent.innerWidth}return 0};Sprite.prototype.getRelativeY=function(value){if(value instanceof Percent){return value.value}else if(this._parent){return value/this._parent.innerHeight}return 0};Sprite.prototype.getPixelX=function(value){var pixel=0;if(isNumber$1(value)){pixel=value}else if(value instanceof Percent){var relative=value.value;if(this._parent){pixel=round$1(this._parent.innerWidth*relative,this._positionPrecision,true)}}return pixel};Sprite.prototype.getPixelY=function(value){var pixel=0;if(isNumber$1(value)){pixel=value}else if(value instanceof Percent){var relative=value.value;if(this._parent){pixel=round$1(this._parent.innerHeight*relative,this._positionPrecision,true)}}return pixel};Sprite.prototype.moveTo=function(point,rotation,scale,isDragged){if(this.isDragged&&!isDragged){return}if(point){if(isNumber$1(point.x)){this.setPropertyValue("x",round$1(point.x,this._positionPrecision,true))}if(isNumber$1(point.y)){this.setPropertyValue("y",round$1(point.y,this._positionPrecision,true))}}if(isNumber$1(rotation)){this.rotation=rotation}if(isNumber$1(scale)){this.scale=scale}this.invalidatePosition()};Object.defineProperty(Sprite.prototype,"mask",{get:function(){if(!this._adapterO){return this._mask.get()}else{return this._adapterO.apply("mask",this._mask.get())}},set:function(mask){var _this=this;if(this._mask.get()!==mask){if(mask){this.createClipPath();if(!(mask instanceof Container)){mask.isMeasured=false;if(mask.element){this._clipElement=mask.element}}else{this._clipElement=this.paper.add("rect")}if(this._clipElement){this._clipPath.add(this._clipElement)}this._mask.set(mask,new MultiDisposer([mask.events.on("maxsizechanged",(function(){if(_this.inited){_this.applyMask()}}),undefined,false),mask.events.on("validated",this.applyMask,this,false),mask.events.on("positionchanged",this.applyMask,this,false)]));this.applyMask()}else{this._mask.reset();this.group.removeAttr("clip-path");this.removeClipPath()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(rect){if(rect){this.createClipPath();if(!this._clipElement){this._clipElement=this.paper.add("rect");this._clipPath.add(this._clipElement)}this._clipElement.attr({width:rect.width,height:rect.height})}else{this.removeClipPath();this._clipElement=undefined}this._maskRectangle=rect},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(value){value=toBoolean(value);if(!value){this._measuredWidth=0;this._measuredHeight=0}if(this._isMeasured!=value){this._isMeasured=value;this.invalidatePosition()}},enumerable:true,configurable:true});Sprite.prototype.hitTest=function(sprite){if(this.invalid){this.validate()}if(sprite.invalid){sprite.validate()}var ax1=this.pixelX+this.maxLeft;var ay1=this.pixelY+this.maxTop;var ax2=ax1+this.maxRight;var ay2=ay1+this.maxBottom;var bx1=sprite.pixelX+sprite.maxLeft;var by1=sprite.pixelY+sprite.maxTop;var bx2=bx1+sprite.maxRight;var by2=by1+sprite.maxBottom;return!(bx1>ax2||bx2<ax1||by1>ay2||by2<ay1)};Object.defineProperty(Sprite.prototype,"inited",{get:function(){return this._inited},enumerable:true,configurable:true});Sprite.prototype.isReady=function(){return this._ready};Object.defineProperty(Sprite.prototype,"states",{get:function(){if(!this._states){var state=new SpriteState;this._states=new DictionaryTemplate(state);this._disposers.push(this._states.events.on("insertKey",this.processState,this,false));this._disposers.push(this._states.events.on("setKey",this.processState,this,false));this._disposers.push(new DictionaryDisposer(this._states));this._disposers.push(state)}return this._states},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var hiddenState=this.states.create("hidden");hiddenState.properties.opacity=0;hiddenState.properties.visible=false}return this.states.getKey("hidden")},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"defaultState",{get:function(){if(!this.states.getKey("default")){var defaultState=this.states.create("default");defaultState.properties.opacity=1}return this.states.getKey("default")},enumerable:true,configurable:true});Sprite.prototype.processState=function(event){var state=event.newValue;state.sprite=this;state.name=event.key;if(this.states.hasKey("hover")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText))){this.hoverable=true}if(this.states.hasKey("down")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText))){this.clickable=true}if(this.states.hasKey("focus")){this.focusable=true}if(this.applyOnClones){var clones=this.clones.values;var length_1=clones.length;for(var i=0;i<length_1;++i){var clone=clones[i];if(!clone.isDisposed()){clone.states.setKey(state.name,state)}}}};Object.defineProperty(Sprite.prototype,"animations",{get:function(){if(!this._animations){this._animations=[];this._disposers.push(new AnimationDisposer(this._animations))}return this._animations},enumerable:true,configurable:true});Sprite.prototype.getSvgPoint=function(point){try{var bbox=this.htmlContainer.getBoundingClientRect();return{x:point.x-bbox.left,y:point.y-bbox.top}}catch(e){return point}};Sprite.prototype.animate=function(animationOptions,duration,easing){return new Animation(this,animationOptions,duration,easing).start()};Sprite.prototype.setState=function(value,transitionDuration,easing){var state;if(value instanceof SpriteState){this.states.setKey(value.name,value);state=value}else{state=this.states.getKey(value);if(!state){return}}if(state.name=="hover"){if(this.isHidden){return}this.isHover=true}if(state.name=="hidden"){this.isHiding=true}else{if(!this.visible){this.setVisibility(state.properties.visible||this.defaultState.properties.visible)}}if(state.name=="active"){this.isActive=true}if(!isNumber$1(transitionDuration)){transitionDuration=state.transitionDuration}if(!hasValue(easing)){easing=state.transitionEasing}return this.transitTo(state,transitionDuration,easing)};Sprite.prototype.applyCurrentState=function(duration){var animation=this.setState(this.defaultState,duration);if(this.isHover){animation=this.setState("hover",duration)}if(this.isDown&&this.interactions.downPointers.length){animation=this.setState("down",duration)}this.isFocused=this.isFocused;if(this.isActive){animation=this.setState("active",duration);if(this.isHover&&this.states.hasKey("hoverActive")){animation=this.setState("hoverActive",duration)}}return animation};Sprite.prototype.transitTo=function(state,duration,easing){var _this=this;var options=[],propValues=state.allValues,transition;each$1(propValues,(function(propertyName,finalValue){var currentValue=_this[propertyName];if(finalValue!=currentValue&&_this.defaultState.properties[propertyName]==undefined){_this.defaultState.properties[propertyName]=currentValue}if(finalValue!="__unset"){var option={from:currentValue,to:finalValue,property:propertyName};options.push(option)}}));if(options.length>0){transition=this.animate(options,duration,easing);if(transition&&!transition.isFinished()){this._disposers.push(transition.events.on("animationended",(function(){_this.dispatchImmediately("transitionended")})))}else{this.dispatchImmediately("transitionended")}}if(state.filters.length>0){var newFilters_1=[];each(state.filters.iterator(),(function(stateFilter){var newFilter=stateFilter.clone();newFilters_1.push(newFilter);var animationOptions=[];each(_this.filters.iterator(),(function(currentFilter){if(currentFilter.className==newFilter.className){if(!contains$3(_this.defaultState.filters.iterator(),(function(x){return x.className===newFilter.className}))){_this.defaultState.filters.push(currentFilter)}each$1(newFilter.properties,(function(propertyName,newValue){var currentValue=currentFilter.properties[propertyName];if(currentValue!=newValue){animationOptions.push({property:propertyName,from:currentValue,to:newValue})}}))}}));newFilter.animate(animationOptions,duration,easing)}));this.filters.clear();this.filters.pushAll(newFilters_1)}return transition};Sprite.prototype.isInTransition=function(){return this.animations.length>0};Object.defineProperty(Sprite.prototype,"isHover",{get:function(){if(this.isInteractive()){return this.interactions.isHover}return false},set:function(value){value=toBoolean(value);if(value!==this.isHover){if(this.isInteractive()){this.interactions.isHover=value;if(value){this.handleOver()}else{this.interactions.isRealHover=false;this.handleOut()}}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isResized",{get:function(){return this._isResized},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isDown",{get:function(){if(this.isInteractive()){return this.interactions.isDown}return false},set:function(value){value=toBoolean(value);if(this.isInteractive()&&this.isDown!=value){this.interactions.isDown=value;if(value){this.handleDown()}else{this.handleUp()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isFocused",{get:function(){if(this.isInteractive()){return this.interactions.isFocused}return false},set:function(value){value=toBoolean(value);if(this.focusable&&this.isFocused!=value){if(this.isInteractive()){this.interactions.isFocused=value;if(value===true){this.handleFocus()}else{this.handleBlur()}}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"isActive",{get:function(){return this._isActive},set:function(value){this.setActive(value)},enumerable:true,configurable:true});Sprite.prototype.setActive=function(value){value=toBoolean(value);if(this._isActive!==value){this._isActive=value;if(value&&this.states.hasKey("active")){this.setState("active");if(this.isHover&&this.states.hasKey("hoverActive")){this.setState("hoverActive")}}else{this.applyCurrentState()}this.dispatchImmediately("toggled")}};Object.defineProperty(Sprite.prototype,"disabled",{get:function(){var current=this.getPropertyValue("disabled");if(hasValue(current)){return current}else{if(this.virtualParent){return this.virtualParent.disabled}if(this._parent){return this._parent.disabled}}return false},set:function(value){this.setDisabled(value)},enumerable:true,configurable:true});Sprite.prototype.setDisabled=function(value){value=toBoolean(value);var current=this.getPropertyValue("disabled");if(current!=value){this.setPropertyValue("disabled",value,true);if(value){this.parent=this._parent;this.removeFromInvalids();this.group.attr({display:"none"});this.dispatch("disabled")}else{if(this._parent){var group=this._parent.element;if(!group.hasChild(this.group)){group.add(this.group)}}if(this instanceof Container){this.deepInvalidate();if(this._background){this._background.invalidate()}}else{this.invalidate()}if(!this.__disabled){this.removeSVGAttribute("display")}this.dispatch("enabled")}this.dispatch("transformed");system.requestFrame();return true}return false};Object.defineProperty(Sprite.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(value){if(this._internalDisabled!=value){this._internalDisabled=value;this._updateDisabled=true;this.invalidatePosition();if(!value){this.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"numberFormatter",{get:function(){if(this._numberFormatter){return this._numberFormatter}else if(this.virtualParent){return this.virtualParent.numberFormatter}else if(this._parent){return this._parent.numberFormatter}this._numberFormatter=new NumberFormatter;this._numberFormatter.language=this.language;return this.numberFormatter},set:function(value){this._numberFormatter=value;this._numberFormatter.language=this.language},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"dateFormatter",{get:function(){if(this._dateFormatter){return this._dateFormatter}else if(this.virtualParent){return this.virtualParent.dateFormatter}else if(this._parent){return this._parent.dateFormatter}this._dateFormatter=new DateFormatter;this._dateFormatter.language=this.language;return this.dateFormatter},set:function(value){this._dateFormatter=value;this._dateFormatter.language=this.language},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"durationFormatter",{get:function(){if(this._durationFormatter){return this._durationFormatter}else if(this.virtualParent){return this.virtualParent.durationFormatter}else if(this._parent){return this._parent.durationFormatter}this._durationFormatter=new DurationFormatter;this._durationFormatter.language=this.language;return this.durationFormatter},set:function(value){this._durationFormatter=value;this._durationFormatter.language=this.language},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"language",{get:function(){var language=this._language.get();if(language){return language}else if(this.virtualParent){return this.virtualParent.language}else if(this._parent){return this._parent.language}language=new Language;this.language=language;return language},set:function(value){var _this=this;if(this._language.get()!==value){this._language.set(value,value.events.on("localechanged",(function(ev){if(_this._numberFormatter){_this._numberFormatter.language=_this.language}if(_this._dateFormatter){_this._dateFormatter.language=_this.language}if(_this._durationFormatter){_this._durationFormatter.language=_this.language}if(_this._exporting.get()){var exporting=_this._exporting.get();exporting.numberFormatter.language=_this.language;exporting.dateFormatter.language=_this.language;exporting.durationFormatter.language=_this.language;exporting.language=_this.language}if(_this instanceof Container){_this.deepInvalidate()}})))}},enumerable:true,configurable:true});Sprite.prototype.populateString=function(string,dataItem){if(hasValue(string)){string=castString(string);string=getTextFormatter().escape(string);var tags=string.match(/\{([^}]+)\}/g);var i=void 0;if(tags){for(i=0;i<tags.length;i++){var tag=tags[i].replace(/\{([^}]+)\}/,"$1");var value=this.getTagValue(tag,"",dataItem);if(!hasValue(value)){value=""}string=string.split(tags[i]).join(value)}}string=getTextFormatter().unescape(string)}else{string=""}if(!this._adapterO){return string}else{return this._adapterO.apply("populateString",string)}};Sprite.prototype.getTagValue=function(tagName,format,dataItem){var value;if(!hasValue(dataItem)){dataItem=this.dataItem}var parts=[];var reg=/([^.]+)\(([^)]*)\)|([^.]+)/g;var matches;while(true){matches=reg.exec(tagName);if(matches===null){break}if(matches[3]){parts.push({prop:matches[3]})}else{var params=[];if(trim(matches[2])!=""){var reg2=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;var matches2=void 0;while(true){matches2=reg2.exec(matches[2]);if(matches2===null){break}params.push(matches2[1]||matches2[2]||matches2[3])}}parts.push({method:matches[1],params})}}if(dataItem){value=this.getTagValueFromObject(parts,dataItem.values);if(!hasValue(value)||isObject$4(value)){value=this.getTagValueFromObject(parts,dataItem)}var dataContext=dataItem.dataContext;if(!hasValue(value)&&dataContext){value=this.getTagValueFromObject(parts,dataItem.dataContext);if(!hasValue(value)){value=this.getTagValueFromObject([{prop:tagName}],dataContext)}if(!hasValue(value)&&dataContext.dataContext){value=this.getTagValueFromObject(parts,dataContext.dataContext)}}if(!hasValue(value)&&dataItem.component&&dataItem.component.dataItem!==dataItem){value=dataItem.component.getTagValue(tagName,format)}}if(!hasValue(value)){value=this.getTagValueFromObject(parts,this.populateStringFrom||this)}if(!hasValue(value)&&this._parent){value=this._parent.getTagValue(tagName,format)}return value};Sprite.prototype.getTagValueFromObject=function(parts,object,format){var current=object;var formatApplied=false;for(var i=0,len=parts.length;i<len;i++){var part=parts[i];if(part.prop){current=current[part.prop];if(!hasValue(current)){return}}else{switch(part.method){case"formatNumber":var numberValue=anyToNumber(current);if(hasValue(numberValue)){current=this.numberFormatter.format(numberValue,format||part.params[0]||undefined);formatApplied=true}break;case"formatDate":var dateValue=void 0;if(isString$1(current)){dateValue=this.dateFormatter.parse(current)}else{dateValue=anyToDate(current)}if(!isDate$1(dateValue)||isNaN$1(dateValue.getTime())){return}if(hasValue(dateValue)){current=this.dateFormatter.format(dateValue,format||part.params[0]||undefined);formatApplied=true}break;case"formatDuration":var durationValue=anyToNumber(current);if(hasValue(durationValue)){current=this.durationFormatter.format(durationValue,format||part.params[0]||undefined,part.params[1]||undefined);formatApplied=true}break;case"urlEncode":case"encodeURIComponent":current=encodeURIComponent(current);break;default:if(current[part.method]){current[part.method].apply(this,part.params)}break}}}if(!formatApplied){var formatParts=[{method:"",params:format}];if(!hasValue(format)){if(isNumber$1(current)){formatParts[0].method="formatNumber";formatParts[0].params=""}else if(isDate$1(current)){formatParts[0].method="formatDate";formatParts[0].params=""}}else{var formatterType=getFormat(format);if(formatterType===NUMBER){formatParts[0].method="formatNumber"}else if(formatterType===DATE$2){formatParts[0].method="formatDate"}else if(formatterType===DURATION){formatParts[0].method="formatDuration"}}if(formatParts[0].method){current=this.getTagValueFromObject(formatParts,current)}}return current};Object.defineProperty(Sprite.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent){return this.virtualParent.dataItem}if(this._parent){return this._parent.dataItem}}return this._dataItem},set:function(dataItem){this.setDataItem(dataItem)},enumerable:true,configurable:true});Sprite.prototype.setDataItem=function(dataItem){var _this=this;if(this._dataItem!=dataItem){this._dataItem=dataItem;if(dataItem){if(this.configField){var dataContext_1=dataItem.dataContext;if(dataContext_1){this.config=dataContext_1[this.configField];if(!this.config&&dataContext_1.dataContext){this.config=dataContext_1.dataContext[this.configField]}}}var dataContext_2=dataItem.dataContext;if(dataContext_2){var dataContext2_1=dataContext_2.dataContext;each$1(this.propertyFields,(function(propertyName,fieldValue){if(hasValue(dataContext_2[fieldValue])){var anyThis=_this;anyThis[propertyName]=dataContext_2[fieldValue]}else{if(dataContext2_1){var value=dataContext2_1[fieldValue];if(hasValue(value)){var anyThis=_this;anyThis[propertyName]=value}}}}))}}this.invalidate()}};Sprite.prototype.getPropertyValue=function(propertyName){var propValue=this.properties[propertyName];if(!this._isTemplate){if(this._adapterO){propValue=this._adapterO.apply(propertyName,propValue)}propValue=globalAdapter.applyAll(this,propertyName,propValue)}return propValue};Sprite.prototype.setColorProperty=function(property,value,invalidate){var currentValue=this.properties[property];if(value instanceof Color&&currentValue instanceof Color&&value.toString()==currentValue.toString()){return false}else{return this.setPropertyValue(property,value,invalidate)}};Sprite.prototype.setPercentProperty=function(property,value,invalidate,transform,precision,floor){value=toNumberOrPercent(value);if(isNumber$1(value)){if(isNumber$1(precision)){value=round$1(value,precision,floor)}return this.setPropertyValue(property,value,invalidate,transform)}else{var currentValue=this.properties[property];if(value instanceof Percent&&currentValue instanceof Percent&&value.value==currentValue.value){return false}else{return this.setPropertyValue(property,value,invalidate,transform)}}};Sprite.prototype.setPropertyValue=function(property,value,invalidate,transform){if(this.properties[property]!==value&&!this.isDisposed()){this.properties[property]=value;if(this.events.isEnabled("propertychanged")){var event_1={type:"propertychanged",target:this,property};this.events.dispatchImmediately("propertychanged",event_1)}if(invalidate){this.invalidate()}if(transform){this.invalidatePosition()}if(this.applyOnClones){var clones=this.clones.values;var length_2=clones.length;for(var i=0;i<length_2;++i){var clone=clones[i];if(!clone.isDisposed()){clone[property]=value}}}return true}return false};Sprite.prototype.bind=function(property,source,bindToProperty,modifier){var _this=this;if(bindToProperty===void 0){bindToProperty=property}if(hasValue(this._bindings[property])){this._bindings[property].dispose()}this[property]=source[bindToProperty];this._bindings[property]=source.events.on("propertychanged",(function(event){if(event.property===bindToProperty){var value=source[bindToProperty];if(modifier){value=modifier(value)}_this[property]=value}}))};Sprite.prototype.observe=function(property,listener,context,shouldClone){var _this=this;return new MultiDisposer(map$1(toArray$1(property),(function(prop){return _this.events.on("propertychanged",(function(e){if(e.property===prop){listener.call(context,e)}}),context,shouldClone)})))};Sprite.prototype.applyAccessibility=function(){var title=this.readerTitle,description=this.readerDescription,role=this.role,hidden=this.readerHidden,checked=this.readerChecked,controls=this.readerControls,live=this.readerLive,orientation=this.readerOrientation,valueNow=this.readerValueNow,valueText=this.readerValueText;var labelledByIds=[];var describedByIds=[];var labelledBy=this.readerLabelledBy;if(labelledBy){labelledByIds.push(labelledBy)}var describedBy=this.readerDescribedBy;if(describedBy){describedByIds.push(describedBy)}if(title){if(labelledByIds.length||this.showSystemTooltip){var titleElement=this.titleElement;var titleId=this.uid+"-title";if(titleElement.node.textContent!=title){titleElement.node.textContent=title;titleElement.attr({id:titleId})}labelledByIds.push(titleId)}else{if(this._titleElement){this.group.removeElement(this._titleElement);this._titleElement=undefined}this.setSVGAttribute({"aria-label":title})}}else{this.removeSVGAttribute("aria-label");if(this._titleElement){this.group.removeElement(this._titleElement);this._titleElement=undefined}}if(description){var descriptionElement=this.descriptionElement;var descriptionId=this.uid+"-description";if(descriptionElement.node.textContent!=description){descriptionElement.node.textContent=description;descriptionElement.attr({id:descriptionId})}describedByIds.push(descriptionId)}else if(this._descriptionElement){this.group.removeElement(this._descriptionElement);this._descriptionElement=undefined}if(labelledByIds.length){this.setSVGAttribute({"aria-labelledby":labelledByIds.join(" ")})}else{this.removeSVGAttribute("aria-labelledby")}if(describedByIds.length){this.setSVGAttribute({"aria-describedby":describedByIds.join(" ")})}else{this.removeSVGAttribute("aria-describedby")}if(role){this.setSVGAttribute({role})}else{this.removeSVGAttribute("role")}if(hidden){this.setSVGAttribute({"aria-hidden":"true"})}else{this.removeSVGAttribute("aria-hidden")}if(checked){this.setSVGAttribute({"aria-checked":"true"})}else if(checked===false){this.setSVGAttribute({"aria-checked":"false"})}else{this.removeSVGAttribute("aria-checked")}if(controls){this.setSVGAttribute({"aria-controls":controls})}else{this.removeSVGAttribute("aria-controls")}if(live){this.setSVGAttribute({"aria-live":live})}else{this.removeSVGAttribute("aria-live")}if(orientation){this.setSVGAttribute({"aria-orientation":orientation})}else{this.removeSVGAttribute("aria-orientation")}if(valueNow){this.setSVGAttribute({"aria-valuenow":valueNow})}else{this.removeSVGAttribute("aria-valuenow")}if(valueText){this.setSVGAttribute({"aria-valuetext":valueText})}else{this.removeSVGAttribute("aria-valuetext")}};Object.defineProperty(Sprite.prototype,"readerTitle",{get:function(){var title=this.getPropertyValue("readerTitle");if(hasValue(title)&&this.dataItem){return this.populateString(title)}return title},set:function(value){value=toText(value);if(this.setPropertyValue("readerTitle",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerDescription",{get:function(){var description=this.getPropertyValue("readerDescription");if(hasValue(description)&&this.dataItem){return this.populateString(description)}return this.getPropertyValue("readerDescription")},set:function(value){value=toText(value);if(this.setPropertyValue("readerDescription",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(value){value=toText(value);if(this.setPropertyValue("role",value)){this.applyAccessibility();if(value=="slider"){this.setSVGAttribute({"aria-valuemin":"0"});this.setSVGAttribute({"aria-valuemax":"100"})}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("readerHidden",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("readerChecked",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(value){value=toText(value);if(this.setPropertyValue("readerControls",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(value){value=toText(value);if(this.setPropertyValue("readerLive",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(value){value=toText(value);if(this.setPropertyValue("readerLabelledBy",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(value){value=toText(value);if(this.setPropertyValue("readerDescribedBy",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(value){value=toText(value);if(this.setPropertyValue("readerOrientation",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(value){value=toText(value);if(this.setPropertyValue("readerValueNow",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(value){value=toText(value);if(this.setPropertyValue("readerValueText",value)){this.applyAccessibility()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent){return this.virtualParent.keyboardOptions}if(this._parent){return this._parent.keyboardOptions}}return this.interactions.keyboardOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent){return this.virtualParent.mouseOptions}if(this._parent){return this._parent.mouseOptions}}return this.interactions.mouseOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"interactions",{get:function(){if(!this._interaction){var interaction=getInteraction().getInteraction(this.dom);this._interaction=interaction;this._interaction.clickable=this.clickable;this._interaction.hoverable=this.hoverable;this._interaction.trackable=this.trackable;this._interaction.draggable=this.draggable;this._interaction.swipeable=this.swipeable;this._interaction.resizable=this.resizable;this._interaction.wheelable=this.wheelable;this._interaction.contextMenuDisabled=this.contextMenuDisabled;this._interaction.inert=this.inert;this._interaction.sprite=this;this._disposers.push(this._interaction)}return this._interaction},enumerable:true,configurable:true});Sprite.prototype.isInteractive=function(){if(this._interaction){return true}else{return false}};Object.defineProperty(Sprite.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("focusable",value)){if(!value&&!this.isInteractive());else{this.interactions.focusable=value;if(value){this.setSVGAttribute({focusable:value});if(!hasValue(this._tabindex)){this.tabindex=0}}else{this.removeSVGAttribute("focusable");this.tabindex=undefined}this.interactions.setEventDisposer("sprite-focusable",value,(function(){return new MultiDisposer([_this.events.on("blur",_this.handleBlur,_this,false),_this.events.on("focus",_this.handleFocus,_this,false)])}))}}},enumerable:true,configurable:true});Sprite.prototype.handleFocus=function(ev){if(this.focusable){if(this.topParent){this.topParent.hasFocused=true;this.topParent.focusedElement=this}if(this.focusFilter){this.filters.push(this.focusFilter)}if(this.hoverOnFocus){this.isHover=true;this.handleOver()}}};Sprite.prototype.handleBlur=function(ev){if(this.focusable){if(this.topParent){this.topParent.hasFocused=false;this.topParent.focusedElement=undefined}if(this.focusFilter){this.filters.removeValue(this.focusFilter)}if(this.hoverOnFocus){this.isHover=false;this.handleOut()}}};Object.defineProperty(Sprite.prototype,"focusFilter",{get:function(){var focusFilter=this._focusFilter;if(focusFilter){return focusFilter}if(this.virtualParent){return this.virtualParent.focusFilter}else if(this._parent){return this._parent.focusFilter}},set:function(value){this._focusFilter=value},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(value){if(value!==this.hoverOnFocus){this.setPropertyValue("hoverOnFocus",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tabindex",{get:function(){var index=this._tabindex;if(index!=null){return index}else if(this.virtualParent){return this.virtualParent.tabindex}else if(this._parent){return this._parent.tabindex}},set:function(value){value=toNumber$1(value);if(this.setPropertyValue("tabindex",value)&&isNumber$1(value)){this.interactions.tabindex=value;this.setSVGAttribute({tabindex:value});this._tabindex=value;this.focusable=true}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"inertiaOptions",{get:function(){if(!this.interactions.inertiaOptions){if(this._parent){return this._parent.inertiaOptions}}return this.interactions.inertiaOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("draggable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.draggable=value;this.interactions.setEventDisposer("sprite-draggable",value,(function(){return new MultiDisposer([_this.events.on("down",_this.handleDown,_this,false),_this.events.on("dragstart",_this.handleDragStart,_this,false),_this.events.on("drag",_this.handleDragMove,_this,false),_this.events.on("dragstop",_this.handleDragStop,_this,false)])}))}}},enumerable:true,configurable:true});Sprite.prototype.handleDragStart=function(ev){if(!this.interactions.isTouchProtected||!ev.touch){this.interactions.originalPosition={x:this.pixelX,y:this.pixelY};this._isDragged=true;this.hideTooltip(0)}};Sprite.prototype.dragStart=function(pointer){this._isDragged=true;getInteraction().dragStart(this.interactions,pointer)};Sprite.prototype.handleDragStop=function(ev){if(!this.interactions.isTouchProtected||!ev.touch){this._isDragged=false;this.showTooltip();this.interactions.originalPosition=undefined}};Sprite.prototype.dragStop=function(pointer,cancelled){this._isDragged=false;getInteraction().dragStop(this.interactions,pointer,cancelled)};Sprite.prototype.handleDragMove=function(ev){if(!this.interactions.isTouchProtected||!ev.touch){var point=this.interactions.originalPosition;if(point&&this._isDragged){var globalScale=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:point.x+ev.shift.x/globalScale,y:point.y+ev.shift.y/globalScale},undefined,undefined,true)}this.dispatchImmediately("dragged",ev)}};Object.defineProperty(Sprite.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("inert",value)){if(!value&&!this.isInteractive());else{this.interactions.inert=value}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent){return this.virtualParent.hoverOptions}if(this._parent){return this._parent.hoverOptions}}return this.interactions.hoverOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("hoverable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.hoverable=value;this.interactions.setEventDisposer("sprite-hoverable",value,(function(){return new MultiDisposer([_this.events.on("over",_this.handleOver,_this,false),_this.events.on("out",_this.handleOut,_this,false)])}))}}},enumerable:true,configurable:true});Sprite.prototype.handleOver=function(ev){if(this._outTimeout){this._outTimeout.dispose()}if(this.isHover){if(this.states.hasKey("hover")){if(!this.isHidden){this.applyCurrentState()}}var point=void 0;if(ev&&ev.pointer){point=documentPointToSvg(ev.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)}if(this.showTooltipOn=="hover"){this.showTooltip(point)}}else{if(this.showTooltipOn=="hover"){this.hideTooltip()}if(!this.isHidden&&this.states.hasKey("hover")){this.applyCurrentState()}}};Sprite.prototype.handleOut=function(ev){var _this=this;if(this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover){this._outTimeout=this.setTimeout((function(){if(!_this.tooltip.isHover){if(_this.tooltip.targetSprite==_this){_this.hideTooltip()}_this._outTimeout=_this.setTimeout(_this.handleOutReal.bind(_this),_this.rollOutDelay)}}),10);return}if(this.showTooltipOn=="hover"){this.hideTooltip()}this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay)};Sprite.prototype.handleOutReal=function(){if(!this.isHidden&&!this.isHiding&&this.states.hasKey("hover")){this.applyCurrentState()}};Object.defineProperty(Sprite.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent){return this.virtualParent.hitOptions}if(this._parent){return this._parent.hitOptions}}return this.interactions.hitOptions},enumerable:true,configurable:true});Sprite.prototype.handleDown=function(ev){if(this.interactions.downPointers.length===1){this.interactions.originalPosition={x:this.pixelX,y:this.pixelY};this.interactions.originalAngle=this.rotation;this.interactions.originalScale=this.scale;if(this.states.hasKey("down")){this.setState("down")}}};Sprite.prototype.handleUp=function(ev){var _this=this;this._isResized=false;if(this.states.hasKey("down")){this.applyCurrentState()}if(this.showTooltipOn=="hit"){this.updateTooltipPosition(ev.pointer?ev.pointer.point:undefined);this._disposers.push(registry.events.once("exitframe",(function(){_this.showTooltip()})));this._disposers.push(getInteraction().body.events.once("down",(function(ev){_this.hideTooltip()})))}};Object.defineProperty(Sprite.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("clickable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.clickable=value;this.interactions.setEventDisposer("sprite-clickable",value,(function(){return new MultiDisposer([_this.events.on("down",_this.handleDown,_this,false),_this.events.on("up",_this.handleUp,_this,false)])}))}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("togglable",value)){if(!value&&!this.isInteractive());else{this.interactions.setEventDisposer("sprite-togglable",value,(function(){return _this.events.on("hit",_this.handleToggle,_this,false)}))}}},enumerable:true,configurable:true});Sprite.prototype.handleToggle=function(ev){this.isActive=!this.isActive};Object.defineProperty(Sprite.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("contextMenuDisabled",value)){this.interactions.contextMenuDisabled=value}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(value){if(this.setPropertyValue("url",value)){if(this._urlDisposer){this._urlDisposer.dispose()}if(isNotEmpty(value)){this._urlDisposer=this.events.on("hit",this.urlHandler,this,false);this.clickable=true;this.cursorOverStyle=MouseCursorStyle.pointer}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"baseId",{get:function(){if(!this._baseId&&this._parent){this.baseId=this._parent.baseId}return this._baseId},set:function(value){this.setBaseId(value)},enumerable:true,configurable:true});Sprite.prototype.setBaseId=function(value){if(value!=this._baseId){if(this.invalid){this.invalid=false;registry.removeFromInvalidSprites(this);this.invalidate()}this._baseId=value}};Object.defineProperty(Sprite.prototype,"baseSprite",{get:function(){if(this.isBaseSprite){return this}else if(this._parent){return this._parent.baseSprite}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(value){this.setPropertyValue("urlTarget",value)},enumerable:true,configurable:true});Sprite.prototype.urlHandler=function(ev){if(isNotEmpty(this.url)){var url=this.populateString(this.url);if(this.urlTarget==="_self"){window.location.href=url}else{window.open(url,this.urlTarget)}}};Object.defineProperty(Sprite.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent){return this.virtualParent.swipeOptions}if(this._parent){return this._parent.swipeOptions}}return this.interactions.swipeOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("swipeable",value)){this.applyCursorStyle();if(!value&&!this.isInteractive());else{this.interactions.swipeable=value}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("trackable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.trackable=value}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(value){if(this.setPropertyValue("wheelable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.wheelable=value}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(value){var _this=this;value=toBoolean(value);if(this.setPropertyValue("resizable",value)){if(!value&&!this.isInteractive());else{this.applyCursorStyle();this.interactions.resizable=value;this.interactions.setEventDisposer("sprite-resizable",value,(function(){return new MultiDisposer([_this.events.on("down",_this.handleDown,_this,false),_this.events.on("resize",_this.handleResize,_this,false)])}))}}},enumerable:true,configurable:true});Sprite.prototype.handleResize=function(ev){if(!this.interactions.isTouchProtected||!ev.touch){this._isResized=true;this.scale=this.interactions.originalScale*ev.scale;this.validatePosition();if(this.draggable||this.dragWhileResize){this._isDragged=false;var svgPoint1=documentPointToSvg(ev.point1,this.htmlContainer,this.svgContainer.cssScale);var svgPoint2=documentPointToSvg(ev.point2,this.htmlContainer,this.svgContainer.cssScale);var svgMidPoint=getMidPoint(svgPoint1,svgPoint2);var parentPoint1=documentPointToSprite(ev.startPoint1,this._parent);var parentPoint2=documentPointToSprite(ev.startPoint2,this._parent);var originalPosition=this.interactions.originalPosition;var originalScale=this.interactions.originalScale;if(originalPosition){var spritePoint1={x:(parentPoint1.x-originalPosition.x)/originalScale,y:(parentPoint1.y-originalPosition.y)/originalScale};var spritePoint2={x:(parentPoint2.x-originalPosition.x)/originalScale,y:(parentPoint2.y-originalPosition.y)/originalScale};var spriteMidPoint=getMidPoint(spritePoint1,spritePoint2);var parentPoint=svgPointToSprite(svgMidPoint,this._parent);this.moveTo({x:parentPoint.x-spriteMidPoint.x*this.scale,y:parentPoint.y-spriteMidPoint.y*this.scale},undefined,undefined,true)}}}};Object.defineProperty(Sprite.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent){return this.virtualParent.cursorOptions}if(this._parent){return this._parent.cursorOptions}}return this.interactions.cursorOptions},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"cursorOverStyle",{set:function(style){if(!this.cursorOptions.overStyle){this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}}this.cursorOptions.overStyle=style;getInteraction().applyCursorOverStyle(this.interactions)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"cursorDownStyle",{set:function(style){this.cursorOptions.downStyle=style},enumerable:true,configurable:true});Sprite.prototype.applyCursorStyle=function(){};Object.defineProperty(Sprite.prototype,"interactionsEnabled",{get:function(){var value=this.getPropertyValue("interactionsEnabled");if(value===false){return false}if(this.virtualParent){return this.virtualParent.interactionsEnabled}if(this._parent){return this._parent.interactionsEnabled}return true},set:function(value){value=toBoolean(value);if(this.setPropertyValue("interactionsEnabled",value)){var pointerEvents=null;if(!value){pointerEvents="none"}else{this.group.node.style.pointerEvents=""}this.group.node.style.pointerEvents=pointerEvents}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"exporting",{get:function(){return this.getExporting()},set:function(exp){this._exporting.set(exp,exp)},enumerable:true,configurable:true});Sprite.prototype.getExporting=function(){var _export=this._exporting.get();if(_export){return _export}else{if(this.isStandaloneInstance||!this._parent){_export=new Export(this.svgContainer.SVGContainer);_export.sprite=this;_export.language=this.language;_export.numberFormatter=this.numberFormatter;_export.dateFormatter=this.dateFormatter;_export.durationFormatter=this.durationFormatter;this._exporting.set(_export,_export)}else{return this._parent.exporting}}return _export};Object.defineProperty(Sprite.prototype,"exportable",{get:function(){return this._exportable},set:function(value){var svgContainer=this.svgContainer;this._exportable=value;if(svgContainer){if(value){remove(svgContainer.nonExportableSprites,this)}else if(indexOf(svgContainer.nonExportableSprites,this)==-1){svgContainer.nonExportableSprites.push(this)}}},enumerable:true,configurable:true});Sprite.prototype.modalPrefix=function(value){value=options.classNamePrefix+value;return value};Object.defineProperty(Sprite.prototype,"modal",{get:function(){var svgContainer=this.svgContainer;if(svgContainer){var modal=svgContainer.modal;if(!modal.adapter.has("classPrefix",this.modalPrefix)){modal.adapter.add("classPrefix",this.modalPrefix)}return modal}},enumerable:true,configurable:true});Sprite.prototype.openModal=function(text,title){var svgContainer=this.svgContainer;if(svgContainer){return svgContainer.openModal(text,title)}};Sprite.prototype.closeModal=function(){var svgContainer=this.svgContainer;if(svgContainer){svgContainer.closeModal()}};Object.defineProperty(Sprite.prototype,"popups",{get:function(){var svgContainer=this.svgContainer;if(svgContainer){var popups=svgContainer.popups;popups.template.sprite=this;if(!popups.template.adapter.has("classPrefix",this.modalPrefix)){popups.template.adapter.add("classPrefix",this.modalPrefix)}return popups}},enumerable:true,configurable:true});Sprite.prototype.openPopup=function(text,title){var svgContainer=this.svgContainer;if(svgContainer){return svgContainer.openPopup(text,title)}};Sprite.prototype.closeAllPopups=function(){var svgContainer=this.svgContainer;if(svgContainer){svgContainer.closeAllPopups()}};Object.defineProperty(Sprite.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(value){if(!this.isDragged){this.setPercentProperty("x",value,false,true,this._positionPrecision,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelX",{get:function(){var value=fitToRange(this.getPixelX(this.x),this.minX,this.maxX);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelX",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeX",{get:function(){if(!this._adapterO){return this.getRelativeX(this.x)}else{return this._adapterO.apply("relativeX",this.getRelativeX(this.x))}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("minX",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("maxX",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(value){if(!this.isDragged){this.setPercentProperty("y",value,false,true,this._positionPrecision,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelY",{get:function(){var value=fitToRange(this.getPixelY(this.y),this.minY,this.maxY);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelY",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeY",{get:function(){if(!this._adapterO){return this.getRelativeX(this.y)}else{return this._adapterO.apply("relativeY",this.getRelativeX(this.y))}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("minY",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("maxY",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("dx",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(value){if(isNumber$1(value)){value=round$1(value,this._positionPrecision,true);this.setPropertyValue("dy",value,false,true)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(value){value=toNumber$1(value);if(!isNumber$1(value)){value=0}this.setPropertyValue("rotation",value,false,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(value){value=toText(value);if(this.setPropertyValue("align",value)){if(this._parent){this._parent.invalidateLayout()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(value){value=toText(value);if(this.setPropertyValue("valign",value)){if(this._parent){this._parent.invalidateLayout()}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(value){value=toText(value);if(this.setPropertyValue("horizontalCenter",value)){this.updateCenter()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(value){value=toText(value);if(this.setPropertyValue("verticalCenter",value)){this.updateCenter()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"maxWidth",{get:function(){var maxWidth=this.getPropertyValue("maxWidth");if(!isNumber$1(maxWidth)){if(this._parent){var parentWidth=this._parent.maxWidth;if(this._parent.layout!="absolute"&&this.align!="none"&&this.align!=undefined){parentWidth=parentWidth-this.pixelMarginLeft-this.pixelMarginRight}return parentWidth}}return maxWidth},set:function(value){this.setMaxWidth(value)},enumerable:true,configurable:true});Sprite.prototype.setMaxWidth=function(value){var prevWidth=this.maxWidth;var prevHeight=this.maxHeight;if(this.setPropertyValue("maxWidth",value)){if(isNumber$1(this.relativeWidth)){this.invalidate()}var event_2={type:"maxsizechanged",target:this,previousWidth:prevWidth,previousHeight:prevHeight};this.dispatchImmediately("maxsizechanged",event_2)}};Object.defineProperty(Sprite.prototype,"maxHeight",{get:function(){var maxHeight=this.getPropertyValue("maxHeight");if(!isNumber$1(maxHeight)){if(this._parent){var parentHeight=this._parent.maxHeight;if(this._parent.layout!="absolute"&&this.valign!="none"&&this.valign!=undefined){parentHeight=parentHeight-this.pixelMarginTop-this.pixelMarginBottom}return parentHeight}}return maxHeight},set:function(value){this.setMaxHeight(value)},enumerable:true,configurable:true});Sprite.prototype.setMaxHeight=function(value){var prevWidth=this.maxWidth;var prevHeight=this.maxHeight;if(this.setPropertyValue("maxHeight",value)){if(isNumber$1(this.relativeHeight)){this.invalidate()}var event_3={type:"maxsizechanged",target:this,previousWidth:prevWidth,previousHeight:prevHeight};this.dispatchImmediately("maxsizechanged",event_3)}};Object.defineProperty(Sprite.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(value){this.setPropertyValue("minWidth",value,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(value){this.setPropertyValue("minHeight",value,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(value){var changed=this.setPercentProperty("width",value,true,false,this._positionPrecision,true);if(changed){this.percentWidth=undefined;this.relativeWidth=undefined;if(value instanceof Percent){this.percentWidth=value.percent;if(isNumber$1(this._pixelWidth)){this.maxWidth=undefined}this._pixelWidth=undefined}else{this._pixelWidth=Number(value);this.maxWidth=this._pixelWidth}this.invalidatePosition()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(value){var changed=this.setPercentProperty("height",value,true,false,this._positionPrecision,true);if(changed){this.percentHeight=undefined;this._relativeHeight=undefined;if(value instanceof Percent){this.percentHeight=value.percent;if(isNumber$1(this._pixelHeight)){this.maxHeight=undefined}this._pixelHeight=undefined}else{this._pixelHeight=Number(value);this.maxHeight=this._pixelHeight}this.invalidatePosition()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelWidth",{get:function(){var width;if(isNumber$1(this.percentWidth)){width=this.maxWidth}else if(isNumber$1(this._pixelWidth)){width=this._pixelWidth}else{width=0}var minWidth=this.minWidth;if(minWidth!=null&&width<minWidth){width=minWidth}var value=round$1(width,this._positionPrecision,true);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelWidth",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelHeight",{get:function(){var height;if(isNumber$1(this.percentHeight)){height=this.maxHeight}else if(isNumber$1(this._pixelHeight)){height=this._pixelHeight}else{height=0}var minHeight=this.minHeight;if(minHeight!=null&&height<minHeight){height=minHeight}var value=round$1(height,this._positionPrecision,true);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelHeight",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeWidth",{get:function(){var relativeWidth=this._relativeWidth;if(isNumber$1(relativeWidth)){if(!this._adapterO){return relativeWidth}else{return this._adapterO.apply("relativeWidth",relativeWidth)}}},set:function(value){if(this._relativeWidth!=value){this._relativeWidth=value}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeHeight",{get:function(){var relativeHeight=this._relativeHeight;if(isNumber$1(relativeHeight)){if(!this._adapterO){return relativeHeight}else{return this._adapterO.apply("relativeHeight",relativeHeight)}}},set:function(value){if(this._relativeHeight!=value){this._relativeHeight=value}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"measuredWidth",{get:function(){if(this.disabled||this.__disabled){return 0}if(!this._adapterO){return this._measuredWidth}else{return this._adapterO.apply("measuredWidth",this._measuredWidth)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"measuredHeight",{get:function(){if(this.disabled||this.__disabled){return 0}if(!this._adapterO){return this._measuredHeight}else{return this._adapterO.apply("measuredHeight",this._measuredHeight)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"outerWidth",{get:function(){var value=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;if(!this._adapterO){return value}else{return this._adapterO.apply("outerWidth",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"outerHeight",{get:function(){var value=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;if(!this._adapterO){return value}else{return this._adapterO.apply("outerHeight",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"innerWidth",{get:function(){var value=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);if(!this._adapterO){return value}else{return this._adapterO.apply("innerWidth",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"innerHeight",{get:function(){var value=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);if(!this._adapterO){return value}else{return this._adapterO.apply("innerHeight",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"globalScale",{get:function(){var scale=this.scale;if(this._parent){scale=scale*this._parent.globalScale}if(!this._adapterO){return scale}else{return this._adapterO.apply("globalScale",scale)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(value){value=toNumber$1(value);if(value<0){value=0}if(value!=this.getPropertyValue("scale")){this.setPropertyValue("scale",value,false,true);this.handleGlobalScale()}},enumerable:true,configurable:true});Sprite.prototype.margin=function(top,right,bottom,left){this.marginTop=top;this.marginRight=right;this.marginBottom=bottom;this.marginLeft=left;return this};Object.defineProperty(Sprite.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(value){this.setPercentProperty("marginLeft",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(value){this.setPercentProperty("marginRight",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(value){this.setPercentProperty("marginTop",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(value){this.setPercentProperty("marginBottom",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelMarginRight",{get:function(){var value=this.getPixelX(this.marginRight);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelMarginRight",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeMarginRight",{get:function(){var value=this.getRelativeX(this.marginRight);if(!this._adapterO){return value}else{return this._adapterO.apply("relativeMarginRight",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelMarginLeft",{get:function(){var value=this.getPixelX(this.marginLeft);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelMarginLeft",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeMarginLeft",{get:function(){var value=this.getRelativeX(this.marginLeft);if(!this._adapterO){return value}else{return this._adapterO.apply("relativeMarginLeft",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelMarginTop",{get:function(){var value=this.getPixelY(this.marginTop);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelMarginTop",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeMarginTop",{get:function(){var value=this.getRelativeY(this.marginTop);if(!this._adapterO){return value}else{return this._adapterO.apply("relativeMarginTop",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelMarginBottom",{get:function(){var value=this.getPixelY(this.marginBottom);if(!this._adapterO){return value}else{return this._adapterO.apply("pixelMarginBottom",value)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativeMarginBottom",{get:function(){var value=this.getRelativeY(this.marginBottom);if(!this._adapterO){return value}else{return this._adapterO.apply("relativeMarginBottom",value)}},enumerable:true,configurable:true});Sprite.prototype.padding=function(top,right,bottom,left){this.paddingTop=top;this.paddingRight=right;this.paddingBottom=bottom;this.paddingLeft=left;return this};Object.defineProperty(Sprite.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(value){this.setPercentProperty("paddingLeft",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(value){this.setPercentProperty("paddingRight",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(value){this.setPercentProperty("paddingTop",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(value){this.setPercentProperty("paddingBottom",value,true,true,this._positionPrecision,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(value){this.setPath(value)},enumerable:true,configurable:true});Sprite.prototype.setPath=function(value){if(this.setPropertyValue("path",value)){if(this._adapterO){value=this._adapterO.apply("path",value)}if(!this._isPath){if(!this.element||this.element.node&&!(this.element.node instanceof SVGPathElement)){this.element=this.paper.add("path")}this._isPath=true}if(hasValue(value)){this.element.attr({d:value})}else{this.element.removeAttr("d")}this.invalidatePosition();if(!this.inited){this.events.once("inited",this.validatePosition,this,false)}return true}return false};Object.defineProperty(Sprite.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(value){if(this.setPropertyValue("fillModifier",value)){this.setFill(this.fill)}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(value){this.setPropertyValue("strokeModifier",value,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(value){value=toNumberRange(value,0,1);if(this.setPropertyValue("fillOpacity",value)){this.setSVGAttribute({"fill-opacity":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(value){this.setFill(value)},enumerable:true,configurable:true});Sprite.prototype.setFill=function(value){if(!isObject$4(value)||"r"in value){value=toColor(value)}if(this.setColorProperty("fill",value)||this.fillModifier){if(value instanceof Color){if(this.fillModifier){value=this.fillModifier.modify(value)}}this.realFill=value;if(value instanceof Color){this.setSVGAttribute({fill:value.toString()})}else if(!hasValue(value)){this.removeSVGAttribute("fill")}else if(value instanceof Pattern||value instanceof LinearGradient||value instanceof RadialGradient){var fill=value;fill.paper=this.paper;this.setSVGAttribute({fill:'url("'+getBaseURI()+fill.id+'")'})}}};Object.defineProperty(Sprite.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(value){value=toNumberRange(value,0,1);if(this.setPropertyValue("opacity",value)){this.setSVGAttribute({opacity:value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(value){this.setStroke(value)},enumerable:true,configurable:true});Sprite.prototype.setStroke=function(value){if(!isObject$4(value)||"r"in value){value=toColor(value)}if(this.setColorProperty("stroke",value)||this.strokeModifier){if(value instanceof Color){if(this.strokeModifier){value=this.strokeModifier.modify(value)}}this.realStroke=value;if(value instanceof Color){if(value.hex=="none"){this.removeSVGAttribute("stroke")}else{this.setSVGAttribute({stroke:value.toString()})}}else if(!hasValue(value)){this.removeSVGAttribute("stroke")}else if(value instanceof Pattern||value instanceof LinearGradient||value instanceof RadialGradient){var stroke=value;stroke.paper=this.paper;this.setSVGAttribute({stroke:'url("'+getBaseURI()+stroke.id+'")'})}}};Object.defineProperty(Sprite.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(value){value=toNumberRange(value,0,1);if(this.setPropertyValue("strokeOpacity",value)){this.setSVGAttribute({"stroke-opacity":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(value){value=toBoolean(value);if(this.setPropertyValue("nonScalingStroke",value)){this.strokeWidth=this.strokeWidth}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(value){value=toBoolean(value);this.setPropertyValue("nonScaling",value,false,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(value){value=toNumber$1(value);this.setPropertyValue("strokeWidth",value,true);if(this.nonScalingStroke){if(!isNumber$1(value)){value=1}value=value/this.globalScale}this.setSVGAttribute({"stroke-width":value})},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(value){value=toText(value);if(this.setPropertyValue("strokeDasharray",value)){this.setSVGAttribute({"stroke-dasharray":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(value){value=toNumber$1(value);if(this.setPropertyValue("strokeDashoffset",value)){this.setSVGAttribute({"stroke-dashoffset":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(value){if(this.setPropertyValue("strokeLinecap",value)){this.setSVGAttribute({"stroke-linecap":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(value){if(this.setPropertyValue("strokeLinejoin",value)){this.setSVGAttribute({"stroke-linejoin":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(value){value=toText(value);if(this.setPropertyValue("shapeRendering",value)){this.setSVGAttribute({"shape-rendering":value})}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(value){value=toBoolean(value);if(value){this._positionPrecision=options.pixelPerfectPrecision}else{this._positionPrecision=3}this.setPropertyValue("pixelPerfect",value,true)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"rtl",{get:function(){if(hasValue(this._rtl)){return this._rtl}else if(this._topParent){return this._topParent.rtl}return false},set:function(value){value=toBoolean(value);if(this.isBaseSprite){this.topParent.rtl=value}this._rtl=value},enumerable:true,configurable:true});Sprite.prototype.show=function(duration){return this.showReal(duration)};Sprite.prototype.showReal=function(duration){var _this=this;if(this.preventShow){return}var transition;var properties=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||properties.opacity!=null&&this.opacity<properties.opacity&&!this.isShowing)&&!this.isDisposed()){if(this.invalid){this.validate()}if(this.positionInvalid){this.validatePosition()}if(!isNumber$1(duration)){duration=this.defaultState.transitionDuration}if(this._hideAnimation){this._hideAnimation.kill();this._hideAnimation=undefined}if(this._showHideDisposer){this.removeDispose(this._showHideDisposer)}this._isHidden=false;this.isHiding=false;this.isShowing=true;transition=this.applyCurrentState(duration);if(transition&&!transition.isFinished()){this._showHideDisposer=transition.events.on("animationended",(function(){_this.isShowing=false}));this._disposers.push(this._showHideDisposer)}else{this.isShowing=false}var visible=this.defaultState.properties.visible;if(!hasValue(visible)){visible=true}this.visible=visible;this.readerHidden=false;this.dispatchImmediately("shown")}return transition};Sprite.prototype.hide=function(duration){return this.hideReal(duration)};Sprite.prototype.hideReal=function(duration){var _this=this;var transition;if(!this.isHiding&&this.visible&&!this.isDisposed()){if(this.tooltip&&this.tooltip.currentSprite==this){this.hideTooltip(0)}if(this._hideAnimation){this._hideAnimation.kill();this._hideAnimation=undefined}this.isShowing=false;if(this._showHideDisposer){this.removeDispose(this._showHideDisposer)}var hiddenState_1=this.hiddenState;if(hiddenState_1){transition=this.setState(hiddenState_1,duration,undefined);if(transition&&!transition.isFinished()){this._hideAnimation=transition;this._showHideDisposer=transition.events.on("animationended",(function(){_this.isHiding=false;_this._isHidden=true;if(hiddenState_1.properties.visible==false){_this.visible=false}}),this);this._disposers.push(this._showHideDisposer);this._disposers.push(transition)}else{this.isHiding=false;this._isHidden=true}}else{this.visible=false;this.isHiding=false;this._isHidden=true}this.readerHidden=true;this.dispatchImmediately("hidden");this.invalidate()}if(!isNumber$1(duration)){duration=this.hiddenState.transitionDuration}return transition};Object.defineProperty(Sprite.prototype,"visible",{get:function(){return this.getVisibility()},set:function(value){value=toBoolean(value);this.setVisibility(value)},enumerable:true,configurable:true});Sprite.prototype.getVisibility=function(){var value=this.getPropertyValue("visible");if(!hasValue(value)){value=true}return value};Sprite.prototype.setVisibility=function(value){if(this.setPropertyValue("visible",value)){if(value){this.group.removeAttr("visibility")}else{this.group.attr({visibility:"hidden"})}if(this.events.isEnabled("visibilitychanged")){var event_4={type:"visibilitychanged",target:this,visible:value};this.events.dispatchImmediately("visibilitychanged",event_4)}}};Object.defineProperty(Sprite.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(value){value=toNumber$1(value);if(this.setPropertyValue("zIndex",value)){this.dispatch("zIndexChanged")}},enumerable:true,configurable:true});Sprite.prototype.toFront=function(){var parent=this._parent;if(parent&&parent.children.indexOf(this)!=parent.children.length-1){parent.children.moveValue(this,parent.children.length-1);this.dispatch("zIndexChanged")}};Sprite.prototype.toBack=function(){var parent=this._parent;if(parent&&parent.children.indexOf(this)!=0){parent.children.moveValue(this,0);this.dispatch("zIndexChanged")}};Object.defineProperty(Sprite.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(value){if(this.setPropertyValue("userClassName",value)){if(!value&&this.userClassName){this.group.removeClass(this.userClassName)}this.setClassName()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltip",{get:function(){if(this._tooltip){return this._tooltip}else if(this.virtualParent){return this.virtualParent.tooltip}else if(this._parent){return this._parent.tooltip}},set:function(tooltip){if(this._tooltip){this.removeDispose(this._tooltip)}this._tooltip=tooltip;if(tooltip){tooltip.parent=this.tooltipContainer}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipDataItem",{get:function(){var tooltipDataItem=this._tooltipDataItem;if(tooltipDataItem){return tooltipDataItem}else{return this.dataItem}},set:function(value){this._tooltipDataItem=value},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(sprite){this._tooltipColorSource=sprite},enumerable:true,configurable:true});Sprite.prototype.showTooltip=function(point){if(this.showTooltipOn=="always"&&!this._tooltip&&this.tooltip){this._tooltip=this.tooltip.clone()}if(!point&&this.tooltipPosition=="pointer"&&this.isHover){point=documentPointToSvg(getInteraction().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)}var sprite=this;while(sprite!=undefined){if(!sprite.visible||sprite.disabled||sprite.__disabled){if(this._tooltip&&this._tooltip.visible){this._tooltip.hide(0)}return}sprite=sprite.parent}if(hasValue(this.tooltipText)||hasValue(this.tooltipHTML)){var tooltip=this.tooltip;var tooltipDataItem=this.tooltipDataItem;if(tooltip){tooltip.targetSprite=this;var colorSource_1=this;var tooltipColorSource_1=this.tooltipColorSource;if((tooltip.getStrokeFromObject||tooltip.getFillFromObject)&&tooltipColorSource_1){if(tooltipColorSource_1.isTemplate){if(tooltipDataItem){eachContinue$2(tooltipDataItem.sprites,(function(sprite){if(sprite.clonedFrom==tooltipColorSource_1){colorSource_1=sprite;return false}return true}))}}else{colorSource_1=tooltipColorSource_1}}if(tooltip.getStrokeFromObject){var stroke=this.stroke;var source=colorSource_1;while(source.parent!=undefined){stroke=source.stroke;if(stroke==undefined){source=source.parent}if(stroke!=undefined){break}}if(stroke instanceof Color){tooltip.background.animate({property:"stroke",to:stroke},tooltip.animationDuration)}else{tooltip.background.stroke=stroke}}tooltip.dataItem=tooltipDataItem;tooltip.label.populateStringFrom=this;if(tooltip.getFillFromObject){var fill=this.fill;var source=colorSource_1;while(source.parent!=undefined){fill=source.fill;if(fill==undefined||fill instanceof Color&&fill.rgb==undefined){source=source.parent}else if(fill!=undefined){break}}if(fill==undefined){fill=color("#000000")}if(fill instanceof Color){if(!tooltip.visible){tooltip.background.fill=fill}else{tooltip.background.animate({property:"fill",to:fill},tooltip.animationDuration)}}else{tooltip.background.fill=fill}if(tooltip.autoTextColor&&fill instanceof Color){tooltip.label.fill=fill.alternative}}var text="";if(this.tooltipHTML){tooltip.html=this.tooltipHTML;text=this.tooltipHTML}if(this.tooltipText){tooltip.text=this.tooltipText;text=this.tooltipText}if(this.updateTooltipPosition(point)){tooltip.readerDescribedBy=this.uidAttr();if(tooltip.label.invalid){tooltip.label.validate()}if(text!=undefined&&text!=""&&tooltip.label.currentText!=""){if(tooltip&&!tooltip.parent){tooltip.parent=this.tooltipContainer}var duration=tooltip.defaultState.transitionDuration;if(duration<=0){duration=1}tooltip.show(duration);tooltip.currentSprite=this;return true}else{this.hideTooltip(0)}}else{this.hideTooltip(0)}}}return false};Sprite.prototype.updateTooltipPosition=function(point){var _this=this;if(this.tooltipPosition=="pointer"){if(this._interactionDisposer){this._interactionDisposer.dispose()}this._interactionDisposer=getInteraction().body.events.on("track",(function(ev){return _this.pointTooltipTo(documentPointToSvg(ev.point,_this.svgContainer.SVGContainer,_this.svgContainer.cssScale),true)}));if(point){return this.pointTooltipTo(point,true)}}else{var globalPoint=spritePointToSvg({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(globalPoint)}};Sprite.prototype.pointTooltipTo=function(point,instantly){var tooltip=this.tooltip;if(tooltip&&this.topParent){if(tooltip.showInViewport){tooltip.pointTo(point,instantly);return true}if(isInRectangle(point,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight})){tooltip.pointTo(point,instantly);return true}}return false};Sprite.prototype.hideTooltip=function(duration){if(this.showTooltipOn=="always"){return}var tooltip=this.tooltip;if(tooltip){if(tooltip.targetSprite==this){tooltip.targetSprite=undefined}tooltip.hide(duration);if(this._interactionDisposer){this._interactionDisposer.dispose();this._interactionDisposer=undefined}}};Object.defineProperty(Sprite.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(value){value=toText(value);this.hoverable=true;if(this.setPropertyValue("tooltipHTML",value)){if(this.tooltip){if(this.tooltip.visible){this.showTooltip()}}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(value){value=toText(value);if(value){this.hoverable=true}if(this.setPropertyValue("tooltipText",value)){if(this.tooltip){if(this.tooltip.visible){this.showTooltip()}}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipContainer",{get:function(){if(this._tooltipContainer){return this._tooltipContainer}else if(this._parent){return this._parent.tooltipContainer}},set:function(value){this._tooltipContainer=value},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(value){if(this.setPercentProperty("tooltipX",value)&&this.tooltip){this.tooltip.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"alwaysShowTooltip",{get:function(){return this.getPropertyValue("showTooltipOn")=="always"},set:function(value){value=toBoolean(value);if(value){this.showTooltipOn="always"}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(value){if(this.setPropertyValue("showTooltipOn",value)){if(value=="hit"){this.clickable=true}if(this.tooltip){if(value=="always"){this.showTooltip()}else{this.handleAlwaysShowTooltip()}}}},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(value){this.setPropertyValue("tooltipPosition",value)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(value){if(this.setPercentProperty("tooltipY",value)&&this.tooltip){this.tooltip.invalidate()}},enumerable:true,configurable:true});Sprite.prototype.getTooltipX=function(){var x=this.getPropertyValue("tooltipX");if(!hasValue(x)){x=percent(50)}var value;if(isNumber$1(x)){value=x}if(x instanceof Percent){value=this.maxLeftSelf+this._measuredWidthSelf*x.value-this.pixelPaddingLeft-this.ex}if(!isNumber$1(value)){value=0}return value};Sprite.prototype.getTooltipY=function(){var y=this.getPropertyValue("tooltipY");if(!hasValue(y)){y=percent(50)}var value;if(isNumber$1(y)){value=y}if(y instanceof Percent){value=this.maxTopSelf+this._measuredHeightSelf*y.value-this.pixelPaddingTop-this.ey}if(!isNumber$1(value)){value=0}return value};Sprite.prototype.raiseCriticalError=function(e,closable){if(this.svgContainer){if(!this._adapterO){this.modal.content=e.message}else{this.modal.content=this._adapterO.apply("criticalError",e).message}if(!closable){this.disabled=true}else{this.modal.closable=true}{this.modal.open()}}{console.log(e)}};Sprite.prototype.processConfig=function(config){if(config){if(hasValue(config.tooltipColorSource)&&isString$1(config.tooltipColorSource)&&this.map.hasKey(config.tooltipColorSource)){config.tooltipColorSource=this.map.getKey(config.tooltipColorSource)}if(hasValue(config.cursorOverStyle)&&isString$1(config.cursorOverStyle)){config.cursorOverStyle=this.getCursorStyle(config.cursorOverStyle)}if(hasValue(config.cursorDowntyle)&&isString$1(config.cursorDowntyle)){config.cursorDowntyle=this.getCursorStyle(config.cursorDowntyle)}if(hasValue(config.cursorOptions)){if(hasValue(config.cursorOptions.overStyle)&&isString$1(config.cursorOptions.overStyle)){config.cursorOptions.overStyle=this.getCursorStyle(config.cursorOptions.overStyle)}if(hasValue(config.cursorOptions.downStyle)&&isString$1(config.cursorOptions.downStyle)){config.cursorOptions.downStyle=this.getCursorStyle(config.cursorOptions.downStyle)}}}_super.prototype.processConfig.call(this,config);this.processDelayedMap()};Sprite.prototype.getCursorStyle=function(style){switch(style){case"grab":return MouseCursorStyle.grab;case"grabbing":return MouseCursorStyle.grabbing;case"pointer":return MouseCursorStyle.pointer;case"horizontalResize":return MouseCursorStyle.horizontalResize;case"verticalResize":return MouseCursorStyle.verticalResize;default:return MouseCursorStyle.default}};Sprite.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="tooltipColorSource"){return 1}else if(b=="tooltipColorSource"){return-1}else{return _super.prototype.configOrder.call(this,a,b)}};Object.defineProperty(Sprite.prototype,"isHidden",{get:function(){if(this._isHidden){return this._isHidden}else if(this._parent){return this._parent.isHidden}return false},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(value){value=toBoolean(value);this.setShowOnInit(value)},enumerable:true,configurable:true});Sprite.prototype.setShowOnInit=function(value){if(this.setPropertyValue("showOnInit",value)){if(!this.isTemplate){if(value&&!this.inited&&!this.hidden){this._showOnInitDisposer=new MultiDisposer([registry.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,false),this.events.on("inited",this.appear,this,false)]);this._disposers.push(this._showOnInitDisposer)}else{if(this._showOnInitDisposer){this._showOnInitDisposer.dispose()}}}}};Sprite.prototype.hideInitially=function(){if(!this.isDisposed()){this.appeared=false;if(!this.inited){this.hide(0)}}};Sprite.prototype.appear=function(){var _this=this;this.appeared=false;if(!this.hidden&&!this.isHidden){this.hide(0)}if(!this.hidden){var animation=this.show();if(animation&&!animation.isFinished()){this.addDisposer(animation.events.on("animationended",(function(){_this.appeared=true;_this.dispatch("appeared")})))}else{this.appeared=true;this.dispatch("appeared")}}else{this.appeared=true;this.dispatch("appeared")}};Object.defineProperty(Sprite.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(value){value=toBoolean(value);this.setPropertyValue("hidden",value)},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}return this._bbox},enumerable:true,configurable:true});Object.defineProperty(Sprite.prototype,"plugins",{get:function(){var _this=this;if(!this._plugins){this._plugins=new List;this._disposers.push(this._plugins.events.on("inserted",(function(ev){ev.newValue.target=_this;ev.newValue.init()})));this._disposers.push(new ListDisposer(this._plugins))}return this._plugins},enumerable:true,configurable:true});Sprite.prototype._systemUpdate=function(skippedSprites){this.validate()};Sprite.prototype._systemCheckIfValidate=function(){return true};Sprite.prototype._systemValidatePositions=function(){this.validatePosition()};Sprite.prototype._systemValidateLayouts=function(){};return Sprite}(BaseObjectEvents);registry.registeredClasses["Sprite"]=Sprite;var Rectangle=function(_super){__extends(Rectangle,_super);function Rectangle(){var _this=_super.call(this)||this;_this.className="Rectangle";_this.element=_this.paper.add("rect");_this.applyTheme();return _this}Rectangle.prototype.draw=function(){_super.prototype.draw.call(this);var precision=this._positionPrecision;if(this.pixelPerfect){precision=0}var w=round$1(this.innerWidth,precision);var h=round$1(this.innerHeight,precision);this.element.attr({width:w,height:h})};Rectangle.prototype.measureElement=function(){};Object.defineProperty(Rectangle.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}if(this.isMeasured){return{x:0,y:0,width:this.innerWidth,height:this.innerHeight}}else{return{x:0,y:0,width:0,height:0}}},enumerable:true,configurable:true});return Rectangle}(Sprite);registry.registeredClasses["Rectangle"]=Rectangle;var Container=function(_super){__extends(Container,_super);function Container(){var _this=_super.call(this)||this;_this._childrenByLayout=[];_this._childrenDisposers=new Dictionary;_this.hasFocused=false;_this.setStateOnSprites=[];_this.layoutInvalid=false;_this._absoluteWidth=0;_this._absoluteHeight=0;_this._shouldBeReady=[];_this._tapToActivate=false;_this.tapTimeout=3e3;_this.className="Container";_this._element=_this.paper.addGroup("g");_this.group.add(_this.element);_this.setPropertyValue("pixelPerfect",false);_this.setPropertyValue("layout","absolute");_this.setPropertyValue("fixedWidthGrid",false);_this.setPropertyValue("verticalCenter","none");_this.setPropertyValue("horizontalCenter","none");_this._positionPrecision=4;_this._disposers.push(new DictionaryDisposer(_this._childrenDisposers));_this.children.events.on("inserted",_this.handleChildAdded,_this);_this.children.events.on("removed",_this.handleChildRemoved,_this);_this.applyTheme();return _this}Container.prototype.handleChildAdded=function(event){this.processChild(event.newValue)};Container.prototype.processChild=function(child){try{this._childrenDisposers.insertKey(child.uid,new MultiDisposer([child.events.on("transformed",this.handleChildTransform,this),child.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(err){}if(this.element){var group=this.element;group.add(child.group)}child.parent=this;child.paper=this.paper;this.dispatchImmediately("childadded",{type:"childadded",newValue:child});this.invalidate()};Container.prototype.sortAndAdd=function(){this.sortChildren();this.addChildren()};Container.prototype.handleChildRemoved=function(event){var child=event.oldValue;this._childrenDisposers.removeKey(child.uid);if(this.element){var group=this.element;group.removeElement(child.group)}if(child.isMeasured){this.invalidateLayout()}this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:child})};Container.prototype.handleChildTransform=function(event){var child=event.target;if(child.isMeasured){this.invalidateLayout()}};Container.prototype.invalidateLayout=function(){if(this.layoutInvalid||this.disabled||this.isTemplate||this.layout=="none"||this.__disabled){return}this.layoutInvalid=true;registry.addToInvalidLayouts(this);system.requestFrame()};Container.prototype.invalidate=function(){_super.prototype.invalidate.call(this);this.invalidateLayout()};Container.prototype.deepInvalidate=function(){_super.prototype.invalidate.call(this);each$2(this._childrenByLayout,(function(child){if(child instanceof Container){child.deepInvalidate()}else{child.invalidate()}}));this.invalidateLayout()};Object.defineProperty(Container.prototype,"children",{get:function(){if(!this._children){this._children=new List}return this._children},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(value){if(this.setPropertyValue("minWidth",value)){this.invalidateLayout()}},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(value){if(this.setPropertyValue("minHeight",value)){this.invalidateLayout()}},enumerable:true,configurable:true});Container.prototype.removeElement=function(){};Container.prototype.sortChildren=function(){var _this=this;this._childrenByLayout=[];if(this.layout=="none"||this.layout=="absolute"||!this.layout){this._childrenByLayout=this.children.values}else{var fixed_1=[];var relative_1=[];each(this.children.iterator(),(function(child){if(_this.layout=="horizontal"||_this.layout=="grid"){if(!isNumber$1(child.percentWidth)){fixed_1.push(child)}else{relative_1.push(child)}}else if(_this.layout=="vertical"){if(!isNumber$1(child.percentHeight)){fixed_1.push(child)}else{relative_1.push(child)}}else{fixed_1.push(child)}}));this._childrenByLayout=fixed_1.concat(relative_1)}this.calculateRelativeSize()};Container.prototype.calculateRelativeSize=function(){var _this=this;var totalRelativeWidth=0;var totalRelativeHeight=0;each$2(this._childrenByLayout,(function(child){if(child.isMeasured){if(isNumber$1(child.percentWidth)){totalRelativeWidth+=child.percentWidth}if(isNumber$1(child.percentHeight)){totalRelativeHeight+=child.percentHeight}}}));each$2(this._childrenByLayout,(function(child){if(child.isMeasured){if(_this.layout=="horizontal"){if(isNumber$1(child.percentWidth)){child.relativeWidth=child.percentWidth/totalRelativeWidth}if(isNumber$1(child.percentHeight)){child.relativeHeight=child.percentHeight/100}}if(_this.layout=="vertical"){if(isNumber$1(child.percentHeight)){child.relativeHeight=child.percentHeight/totalRelativeHeight}if(isNumber$1(child.percentWidth)){child.relativeWidth=child.percentWidth/100}}if(_this.layout=="grid"){if(isNumber$1(child.percentHeight)){child.relativeHeight=child.percentHeight/100}if(isNumber$1(child.percentWidth)){child.relativeWidth=child.percentWidth/100}}}if(_this.layout=="absolute"||!child.isMeasured){if(isNumber$1(child.percentWidth)){child.relativeWidth=child.percentWidth/100}if(isNumber$1(child.percentHeight)){child.relativeHeight=child.percentHeight/100}}}))};Container.prototype.addChildren=function(){if(this.element){var zindexed=copy$4(this.children.values);var sortArray=zindexed.map((function(data,idx){return{idx,data}}));sortArray.sort((function(a,b){var ai=a.data.zIndex||0;var bi=b.data.zIndex||0;if(ai<bi){return-1}if(ai>bi){return 1}return a.idx-b.idx}));zindexed=sortArray.map((function(val){return val.data}));var group_1=this.element;var isCorrect=true;if(group_1.node&&group_1.node.childNodes){for(var i=0,len=group_1.node.childNodes.length;i<len;i++){if(group_1.node.childNodes[i]!=zindexed[i].group.node){isCorrect=false;break}}}if(!isCorrect){each$2(zindexed,(function(child){if(child.group){group_1.add(child.group)}}));if(this._background){this.group.addToBack(this._background.group)}this.invalidateLayout()}}};Container.prototype.createChild=function(classType){var sprite=new classType;sprite.parent=this;return sprite};Container.prototype.removeChildren=function(){while(this.children.length>0){var child=this.children.getIndex(0);child.parent=undefined;this.children.removeValue(child)}};Container.prototype.disposeChildren=function(){while(this.children.length>0){var child=this.children.getIndex(0);child.dispose();this.children.removeValue(child)}};Object.defineProperty(Container.prototype,"background",{get:function(){if(!this._background){this._background=this.createBackground();this.processBackground()}return this._background},set:function(background){if(this._background&&this.background!=background){this.removeDispose(this._background)}if(background){this._background=background;this._disposers.push(background);this.processBackground()}},enumerable:true,configurable:true});Container.prototype.handleGlobalScale=function(){_super.prototype.handleGlobalScale.call(this);this.children.each((function(child){child.handleGlobalScale()}))};Container.prototype.createBackground=function(){return new Rectangle};Container.prototype.processBackground=function(){var background=this._background;if(background){background.isMeasured=false;this._background.fill=(new InterfaceColorSet).getFor("background");background.parent=this;background.isMeasured=false;this.children.removeValue(background);this._disposers.push(background);this.group.addToBack(this._background.group)}};Container.prototype.validateLayout=function(){var _this=this;registry.removeFromInvalidLayouts(this);this.layoutInvalid=false;this._availableWidth=this.innerWidth;this._availableHeight=this.innerHeight;var measuredWidth=0;var measuredHeight=0;var allValid=true;if(this.children){this.sortChildren();each$2(this._childrenByLayout,(function(child){var maxWidth;var maxHeight;if(isNumber$1(child.relativeWidth)){maxWidth=round$1(_this._availableWidth*child.relativeWidth,2);if(_this.layout=="horizontal"){maxWidth-=child.pixelMarginRight+child.pixelMarginLeft}}else{if(_this.layout=="horizontal"){if(child.invalid){child.validate()}}}if(isNumber$1(child.relativeHeight)){maxHeight=round$1(_this._availableHeight*child.relativeHeight,2);if(_this.layout=="vertical"){maxHeight-=child.pixelMarginTop+child.pixelMarginBottom}}else{if(_this.layout=="vertical"){if(child.invalid){child.validate()}}}if(child.invalid==false){if(isNumber$1(child.relativeWidth)){child.maxWidth=maxWidth}if(isNumber$1(child.relativeHeight)){child.maxHeight=maxHeight}if(child.isMeasured){if(_this.layout=="horizontal"){if(!isNumber$1(child.percentWidth)){if(child.measuredWidth>0){_this._availableWidth-=child.measuredWidth+child.pixelMarginLeft+child.pixelMarginRight}}}if(_this.layout=="vertical"){if(!isNumber$1(child.percentHeight)){if(child.measuredHeight>0){_this._availableHeight-=child.measuredHeight+child.pixelMarginTop+child.pixelMarginBottom}}}var childMeasuredWidth=child.measuredWidth;var childMeasuredHeight=child.measuredHeight;if(child.align!="none"){childMeasuredWidth+=child.pixelMarginLeft+child.pixelMarginRight}if(child.valign!="none"){childMeasuredHeight+=child.pixelMarginTop+child.pixelMarginBottom}measuredWidth=Math.max(measuredWidth,childMeasuredWidth);measuredHeight=Math.max(measuredHeight,childMeasuredHeight)}}else{if(child.isMeasured){if(isNumber$1(child.relativeWidth)){if(child.maxWidth!=maxWidth){child.maxWidth=maxWidth;allValid=false}}if(isNumber$1(child.relativeHeight)){if(child.maxHeight!=maxHeight){child.maxHeight=maxHeight;allValid=false}}}}}))}this._absoluteWidth=measuredWidth;this._absoluteHeight=measuredHeight;if(allValid){this.arrange()}};Container.prototype.arrange=function(){var _this=this;var children=this.children;var measuredWidth=0;var measuredHeight=0;var innerWidth=max$2(this.innerWidth,this._absoluteWidth);var innerHeight=max$2(this.innerHeight,this._absoluteHeight);var left;var right;var top;var bottom;var paddingLeft=this.pixelPaddingLeft;var paddingRight=this.pixelPaddingRight;var paddingTop=this.pixelPaddingTop;var paddingBottom=this.pixelPaddingBottom;var nextX=0;var nextY=0;var row=0;var column=0;var columnWidth=[];var rowHeight=[];var maxCellWidth;var minCellWidth;var columnCount;var maxWidth=this.maxWidth;var maxHeight=this.maxHeight;var minWidth=this.minWidth;var minHeight=this.minHeight;var childrenCopy=copy$4(children.values);if(this.reverseOrder){childrenCopy.reverse()}if(this.layout=="grid"){minCellWidth=maxWidth;maxCellWidth=1;for(var i=0,len=childrenCopy.length;i<len;i++){var child=childrenCopy[i];if(child.isMeasured&&!child.disabled&&!child.__disabled){var childMeasuredWidth=child.measuredWidth;if(childMeasuredWidth<minCellWidth){minCellWidth=childMeasuredWidth}if(childMeasuredWidth>maxCellWidth){maxCellWidth=childMeasuredWidth}}}minCellWidth=fitToRange(minCellWidth,1,maxWidth);maxCellWidth=fitToRange(maxCellWidth,1,maxWidth);if(this.fixedWidthGrid){columnCount=maxWidth/maxCellWidth}else{columnCount=maxWidth/minCellWidth}columnCount=max$2(1,Math.floor(columnCount));columnCount=min$2(this.maxColumns,columnCount);columnWidth=this.getColumnWidth(childrenCopy,columnCount,maxCellWidth)}var contentLeft;var contentRight;var contentTop;var contentBottom;for(var i=0,len=childrenCopy.length;i<len;i++){var child=childrenCopy[i];if(child.isMeasured&&!child.disabled&&!child.__disabled){var x=undefined;var y=undefined;var childMarginLeft=child.pixelMarginLeft;var childMarginRight=child.pixelMarginRight;var childMarginTop=child.pixelMarginTop;var childMarginBottom=child.pixelMarginBottom;var childWidth=child.measuredWidth;var childHeight=child.measuredHeight;var childLeft=void 0;var childRight=void 0;var childTop=void 0;var childBottom=void 0;switch(this.layout){case"none":break;case"absolute":switch(child.align){case"left":x=childMarginLeft-child.maxLeft;break;case"center":x=(innerWidth-childWidth)/2-child.maxLeft;break;case"right":x=innerWidth-childMarginRight-child.maxRight;break;default:if(!(child.x instanceof Percent)){x=child.pixelX}break}switch(child.valign){case"top":y=childMarginTop-child.maxTop;break;case"middle":y=(innerHeight-childHeight)/2-child.maxTop;break;case"bottom":y=innerHeight-childMarginBottom-child.maxBottom;break;default:if(!(child.y instanceof Percent)){y=child.pixelY}break}break;case"vertical":switch(child.align){case"left":x=childMarginLeft-child.maxLeft;break;case"center":x=(innerWidth-childWidth)/2-child.maxLeft;break;case"right":x=innerWidth-childMarginRight-child.maxRight;break;default:x=child.pixelX;break}y=nextY+childMarginTop-child.maxTop;nextY=y+child.maxBottom+childMarginBottom;break;case"horizontal":switch(child.valign){case"top":y=childMarginTop-child.maxTop;break;case"middle":y=(innerHeight-childHeight)/2-child.maxTop;break;case"bottom":y=innerHeight-childMarginBottom-child.maxBottom;break;default:y=child.pixelY;break}x=nextX+childMarginLeft-child.maxLeft;nextX=x+child.maxRight+childMarginRight;break;case"grid":x=nextX+childMarginLeft-child.maxLeft;switch(child.valign){case"top":y=nextY+childMarginTop-child.maxTop;break;case"middle":y=nextY+(innerHeight-childHeight)/2-child.maxTop;break;case"bottom":y=nextY+innerHeight-childMarginBottom-child.maxBottom;break;default:y=nextY-child.maxTop;break}nextX+=columnWidth[column];rowHeight[row]=max$2(rowHeight[row],childHeight);column++;var nextColumnWidth=columnWidth[column];if(!isNumber$1(nextColumnWidth)){nextColumnWidth=maxCellWidth}if(nextX>min$2(this.innerWidth,maxWidth)-nextColumnWidth+1&&column<columnCount){columnCount=column;nextX=0;nextY=0;row=0;column=0;columnWidth=this.getColumnWidth(childrenCopy,columnCount,maxCellWidth);rowHeight=[];i=-1;continue}if(column>=columnCount){column=0;nextY+=rowHeight[row];row++;nextX=0}break}if(this.layout!=="none"){child.moveTo({x,y});childLeft=x+child.maxLeft-childMarginLeft;childRight=x+child.maxRight+childMarginRight;childTop=y+child.maxTop-childMarginTop;childBottom=y+child.maxBottom+childMarginBottom;if(childRight>right||!isNumber$1(right)){right=childRight}if(childLeft<left||!isNumber$1(left)){left=childLeft}if(childTop<top||!isNumber$1(top)){top=childTop}if(childBottom>bottom||!isNumber$1(bottom)){bottom=childBottom}if(childRight>contentRight||!isNumber$1(contentRight)){contentRight=childRight}if(childLeft<contentLeft||!isNumber$1(contentLeft)){contentLeft=childLeft}if(childTop<contentTop||!isNumber$1(contentTop)){contentTop=childTop}if(childBottom>contentBottom||!isNumber$1(contentBottom)){contentBottom=contentBottom}}}else{child.validatePosition()}}if(this.layout=="none"){var noneBBox=this.bbox;left=noneBBox.x;right=noneBBox.x+noneBBox.width;top=noneBBox.y;bottom=noneBBox.y+noneBBox.height}if(!isNumber$1(left)){left=0;contentLeft=0}if(!isNumber$1(right)){right=this._availableWidth;contentRight=right}if(!isNumber$1(top)){top=0;contentTop=0}if(!isNumber$1(bottom)){bottom=this._availableHeight;contentBottom=bottom}if(!isNumber$1(contentTop)){contentTop=0}if(!isNumber$1(contentBottom)){contentBottom=contentTop}if(!isNumber$1(contentLeft)){contentLeft=0}if(!isNumber$1(contentRight)){contentRight=contentLeft}measuredWidth=right-left;measuredHeight=bottom-top;if(isNumber$1(this.relativeWidth)){measuredWidth=maxWidth-paddingLeft-paddingRight;left=0;right=measuredWidth}if(isNumber$1(this.relativeHeight)){measuredHeight=maxHeight-paddingTop-paddingBottom;top=0;bottom=measuredHeight}if(isNumber$1(this._pixelWidth)){left=0;measuredWidth=this._pixelWidth-paddingLeft-paddingRight}if(isNumber$1(minWidth)&&measuredWidth<minWidth){left=0;measuredWidth=this.minWidth-paddingLeft-paddingRight}if(isNumber$1(this._pixelHeight)){top=0;measuredHeight=this._pixelHeight-paddingTop-paddingBottom}if(isNumber$1(minHeight)&&measuredHeight<minHeight){top=0;measuredHeight=minHeight-paddingTop-paddingBottom}var measuredContentWidth=contentRight-contentLeft;var measuredContentHeight=contentBottom-contentTop;if(this.layout!="none"&&(this.contentAlign||this.contentValign)&&children.length>0){var dx_1;var dy_1;var mwa=measuredWidth;var mha=measuredHeight;if(mwa<measuredContentWidth){mwa=measuredContentWidth}if(mha<measuredContentHeight){mha=measuredContentHeight}if(this.contentAlign=="center"){dx_1=(mwa-measuredContentWidth)/2}if(this.contentAlign=="right"){dx_1=mwa-measuredContentWidth}if(this.contentValign=="middle"){dy_1=(mha-measuredContentHeight)/2}if(this.contentValign=="bottom"){dy_1=mha-measuredContentHeight}if(isNumber$1(dx_1)){each(children.iterator(),(function(child){var childLeft=child.maxLeft;var ddx=dx_1;if(_this.layout=="horizontal"){child.x=child.pixelX+ddx}if(_this.layout=="grid"){child.x=child.pixelX+ddx}if(_this.layout=="vertical"){ddx+=child.pixelMarginLeft;if(child.align=="none"){child.x=ddx-childLeft}}if(_this.layout=="absolute"){ddx+=child.pixelMarginLeft;if(child.align=="none"){child.x=ddx-childLeft}}}))}if(isNumber$1(dy_1)){each(children.iterator(),(function(child){var childTop=child.maxTop;var ddy=dy_1;if(_this.layout=="horizontal"){ddy+=child.pixelMarginTop;if(child.valign=="none"){child.y=ddy-childTop}}if(_this.layout=="grid"){ddy+=child.pixelMarginTop;child.y=ddy-childTop}if(_this.layout=="vertical"){child.y=child.pixelY+ddy}if(_this.layout=="absolute"){ddy+=child.pixelMarginTop;if(child.valign=="none"){child.y=ddy-childTop}}}))}}var oldBBox=this.bbox;measuredWidth=max$2(measuredWidth,minWidth);measuredHeight=max$2(measuredHeight,minHeight);this.contentWidth=measuredWidth;this.contentHeight=measuredHeight;measuredWidth=min$2(measuredWidth,maxWidth);measuredHeight=min$2(measuredHeight,maxHeight);this._bbox={x:left,y:top,width:measuredWidth,height:measuredHeight};var prevLeft=this.maxLeft;var prevTop=this.maxTop;var prevBotttom=this.maxBottom;var prevRight=this.maxRight;this.measure();if(prevLeft!=this.maxLeft||prevRight!=this.maxRight||prevTop!=this.maxTop||prevBotttom!=this.maxBottom){if(this.events.isEnabled("transformed")){var event_1={type:"transformed",target:this};if(oldBBox){event_1.dummyData=oldBBox.width+" "+measuredWidth+"  "+oldBBox.height+" "+measuredHeight}this.events.dispatchImmediately("transformed",event_1)}}this.dispatchImmediately("layoutvalidated")};Container.prototype.updateCenter=function(){_super.prototype.updateCenter.call(this);this.updateBackground()};Container.prototype.updateBackground=function(){var background=this._background;if(background){background.x=this.maxLeft;background.y=this.maxTop;background.width=this.maxRight-this.maxLeft;background.height=this.maxBottom-this.maxTop}};Container.prototype.getColumnWidth=function(children,columnCount,maxCellWidth){var _this=this;var columnWidth=[];var column=0;each$2(children,(function(child){if(child.isMeasured&&!child.disabled&&!child.__disabled){if(_this.fixedWidthGrid){columnWidth[column]=maxCellWidth}else{columnWidth[column]=max$2(columnWidth[column],child.measuredWidth+child.pixelMarginRight+child.pixelMarginLeft)}column++;if(column==columnCount){column=0}}}));return columnWidth};Object.defineProperty(Container.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(value){if(this.setPropertyValue("layout",value)){this.invalidateLayout()}},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(value){this.setPropertyValue("contentValign",value,true)},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(value){this.setPropertyValue("contentAlign",value,true)},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(value){this.setPropertyValue("fixedWidthGrid",value,true)},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(value){this.setPropertyValue("maxColumns",value,true)},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(value){this.setPropertyValue("reverseOrder",value,true)},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(value){this.setPropertyValue("setStateOnChildren",value,true)},enumerable:true,configurable:true});Container.prototype.fitsToBounds=function(point){var x=point.x;var y=point.y;var deviation=.5;if(x>=-deviation&&x<=this.pixelWidth+deviation&&y>=-deviation&&y<=this.pixelHeight+deviation){return true}else{return false}};Container.prototype.copyFrom=function(source){var _this=this;_super.prototype.copyFrom.call(this,source);this.layout=source.layout;this.setStateOnChildren=source.setStateOnChildren;if(source._background){this.background=source._background.clone();this.background.copyFrom(source._background)}each(source.children.iterator(),(function(child){if(child.shouldClone){var clonedChild=child.clone();clonedChild.parent=_this}}))};Object.defineProperty(Container.prototype,"preloader",{get:function(){var preloader=this._preloader;if(preloader){return preloader}else if(this.parent){return this.parent.preloader}},set:function(preloader){if(this._preloader){this.removeDispose(this._preloader)}this._preloader=preloader;if(preloader){preloader.parent=this.tooltipContainer;this._disposers.push(preloader)}},enumerable:true,configurable:true});Container.prototype.setPaper=function(paper){var _this=this;var changed=_super.prototype.setPaper.call(this,paper);if(changed){if(this._background){this._background.paper=paper;this._background.topParent=this.topParent}this.children.each((function(child){child.setPaper(paper);child.topParent=_this.topParent}))}return changed};Container.prototype.removeFromInvalids=function(){_super.prototype.removeFromInvalids.call(this);registry.removeFromInvalidLayouts(this)};Container.prototype.setDataItem=function(dataItem){if(this._dataItem!=dataItem){each(this.children.iterator(),(function(child){child.dataItem=dataItem}));if(this._background){this._background.dataItem=dataItem}}_super.prototype.setDataItem.call(this,dataItem)};Container.prototype.measureElement=function(){if(this.disabled||this.isTemplate||this.layout=="none"||this.__disabled);else{this.validateLayout()}};Object.defineProperty(Container.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(value){if(this.setPropertyValue("fontFamily",value,true)){this.setSVGAttribute({"font-family":value});this.invalidateLabels()}},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(value){if(this.setPropertyValue("fontSize",value,true)){this.setSVGAttribute({"font-size":value});this.invalidateLabels()}},enumerable:true,configurable:true});Container.prototype.invalidateLabels=function(){this.children.each((function(child){if(child["hardInvalidate"]){child["hardInvalidate"]();child.events.once("validated",child.handleValidate,child,false)}else if(child instanceof Container){child.invalidateLabels()}}))};Object.defineProperty(Container.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(value){this.setPropertyValue("fontWeight",value);this.setSVGAttribute({"font-weight":value})},enumerable:true,configurable:true});Object.defineProperty(Container.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(value){this.setPropertyValue("textDecoration",value);this.setSVGAttribute({"text-decoration":value})},enumerable:true,configurable:true});Container.prototype.dispose=function(){if(this._background){this._background.dispose()}this._shouldBeReady=[];this.disposeChildren();_super.prototype.dispose.call(this)};Container.prototype.setState=function(value,transitionDuration,easing){var stateName=value;if(value instanceof SpriteState){stateName=value.name}if(this.setStateOnChildren){each(this.children.iterator(),(function(child){child.setState(stateName,transitionDuration,easing);if(stateName!="active"){child.isActive=false}}))}if(this._background){this._background.setState(stateName)}if(this.setStateOnSprites.length){each$2(this.setStateOnSprites,(function(item){item.setState(stateName,transitionDuration,easing)}))}return _super.prototype.setState.call(this,value,transitionDuration,easing)};Container.prototype.setActive=function(value){_super.prototype.setActive.call(this,value);if(this._background){this._background.isActive=value}};Container.prototype.dispatchReady=function(){var _this=this;if(!this.isReady()&&!this.isDisposed()){var allReady_1=true;eachContinue(this.children.iterator(),(function(sprite){if(!sprite.__disabled&&!sprite.disabled&&!sprite.isReady()){allReady_1=false;return false}else{return true}}));eachContinue$2(this._shouldBeReady,(function(sprite){if(!sprite.__disabled&&!sprite.disabled&&!sprite.isReady()){allReady_1=false;return false}else{return true}}));if(allReady_1){_super.prototype.dispatchReady.call(this)}else{registry.events.once("exitframe",(function(){_this.dispatchReady();system.requestFrame()}),undefined,false)}}};Container.prototype._systemUpdate=function(skippedSprites){this.children.each((function(child){if(child.invalid){if(!child._systemCheckIfValidate()){skippedSprites.push(child)}else if(child.dataItem&&child.dataItem.component&&child.dataItem.component.dataInvalid){skippedSprites.push(child)}else{child.validate()}}}));_super.prototype._systemUpdate.call(this,skippedSprites)};Container.prototype._systemValidatePositions=function(){this.children.each((function(sprite){if(sprite.positionInvalid){sprite.validatePosition()}}));_super.prototype._systemValidatePositions.call(this)};Container.prototype._systemValidateLayouts=function(){if(this.layoutInvalid&&!this.isDisposed()){this.validateLayout()}};Object.defineProperty(Container.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(value){if(this._tapToActivate!=value){this.setTapToActivate(value)}},enumerable:true,configurable:true});Container.prototype.setTapToActivate=function(value){var _this=this;this._tapToActivate=value;this.interactions.isTouchProtected=value;if(value){this.interactions.setEventDisposer("container-tapToActivate",value,(function(){return new MultiDisposer([_this.events.on("hit",_this.handleTapToActivate,_this,false),_this.events.on("down",_this.initTapTimeout,_this,false),_this.events.on("track",_this.initTapTimeout,_this,false),getInteraction().body.events.on("down",(function(ev){if(!getInteraction().isLocalElement(ev.pointer,_this.paper.svg,_this.uid)){_this.handleTapToActivateDeactivation()}}),_this,false)])}))}getInteraction()};Container.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=false;this.initTapTimeout()};Container.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=true};Container.prototype.initTapTimeout=function(){var _this=this;if(this._tapToActivateTimeout){this._tapToActivateTimeout.dispose()}if(this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout){this._tapToActivateTimeout=this.setTimeout((function(){_this.handleTapToActivateDeactivation()}),this.tapTimeout)}};Container.prototype.moveHtmlContainer=function(htmlElement){var newContainer=getElement(htmlElement);if(newContainer){this.htmlContainer=newContainer;var svgDiv=this.svgContainer;svgDiv.htmlElement=newContainer;svgDiv.htmlElement.appendChild(svgDiv.SVGContainer);svgDiv.initSensor();svgDiv.measure()}else if(isString$1(htmlElement)&&htmlElement!=""){system.log("html container '"+htmlElement+"' not found")}};Container.prototype.hasLicense=function(){if(options.commercialLicense){return true}for(var i=0;i<options.licenses.length;i++){if(options.licenses[i].match(/^CH.{5,}/i)){return true}}return false};return Container}(Sprite);registry.registeredClasses["Container"]=Container;var System=function(){function System(){this._isPaused=false;this.animations=[];this.uid=registry.getUniqueId();this.dummyCounter=0;this._frameRequested=false;this.updateStepDuration=45;this.time=Date.now()}System.prototype.reportTime=function(msg,reset){if(reset){this.time=Date.now()}};System.prototype.update=function(){var _this=this;if(this._isPaused){return}this._frameRequested=false;var time=Date.now();registry.dispatchImmediately("enterframe");var skippedComponents=[];for(var key in registry.invalidDatas){if(hasKey(registry.invalidDatas,key)){var invalidData=registry.invalidDatas[key];while(invalidData.length>0){var component=invalidData[0];var dataProvider=component.dataProvider;if(!component.isDisposed()){if(dataProvider&&dataProvider.dataInvalid){try{dataProvider.validateData();if(dataProvider.dataValidationProgress<1){break}}catch(e){remove(invalidData,dataProvider);dataProvider.raiseCriticalError(e)}}else{try{component.validateData();if(component.dataValidationProgress<1){break}}catch(e){remove(invalidData,component);component.raiseCriticalError(e)}}}else{remove(invalidData,component)}}if(Date.now()-time>this.updateStepDuration){break}}}while(registry.invalidRawDatas.length>0){var component=registry.invalidRawDatas[0];if(!component.isDisposed()){try{component.validateRawData()}catch(e){remove(registry.invalidRawDatas,component);component.raiseCriticalError(e)}}else{remove(registry.invalidRawDatas,component)}}while(registry.invalidDataItems.length>0){var component=registry.invalidDataItems[0];var dataProvider=component.dataProvider;if(component.isDisposed()||component.dataInvalid||dataProvider&&dataProvider.dataInvalid);else{try{component.validateDataItems()}catch(e){remove(registry.invalidDataItems,component);component.raiseCriticalError(e)}}remove(registry.invalidDataItems,component)}while(registry.invalidDataRange.length>0){var component=registry.invalidDataRange[0];var dataProvider=component.dataProvider;if(component.isDisposed()||component.dataInvalid||dataProvider&&dataProvider.dataInvalid);else{try{component.validateDataRange();if(!component.skipRangeEvent){component.dispatchImmediately("datarangechanged")}component.skipRangeEvent=false}catch(e){remove(registry.invalidDataRange,component);component.raiseCriticalError(e)}}remove(registry.invalidDataRange,component)}var skippedSprites=[];each$1(registry.invalidLayouts,(function(key){_this.validateLayouts(key)}));each$1(registry.invalidPositions,(function(key){_this.validatePositions(key)}));var hasSkipped=false;time=Date.now();each$1(registry.invalidSprites,(function(key,invalidSprites){var count=0;while(invalidSprites.length>0){_this.validateLayouts(key);_this.validatePositions(key);count++;if(count==5){if(Date.now()-time>_this.updateStepDuration){break}count=0}var sprite=invalidSprites[invalidSprites.length-1];if(sprite&&!sprite.isDisposed()){if(!sprite._systemCheckIfValidate()){skippedSprites.push(sprite)}else{if(!_this.checkIfValidate2(sprite)){skippedSprites.push(sprite)}else{try{sprite._systemUpdate(skippedSprites)}catch(e){sprite.invalid=false;remove(invalidSprites,sprite);sprite.raiseCriticalError(e)}}}sprite.invalid=false}remove(invalidSprites,sprite)}registry.invalidSprites[key]=registry.invalidSprites[key].concat(skippedSprites)}));each$1(registry.invalidSprites,(function(key,value){if(value.length>0){hasSkipped=true}}));each$1(registry.invalidDatas,(function(key,value){if(value.length>0){hasSkipped=true}}));each$2(copy$4(this.animations),(function(x){x.update()}));each$1(registry.invalidLayouts,(function(key){_this.validateLayouts(key)}));each$1(registry.invalidPositions,(function(key){_this.validatePositions(key)}));triggerIdle();each$1(registry.invalidLayouts,(function(key){_this.validateLayouts(key)}));each$1(registry.invalidPositions,(function(key){_this.validatePositions(key)}));registry.dispatchImmediately("exitframe");if(hasSkipped||this.animations.length>0||skippedComponents.length>0){this.requestFrame()}if(this.updateStepDuration<200){var all0_1=true;each$1(registry.invalidDatas,(function(key,value){if(value.length>0){all0_1=false}}));each$1(registry.invalidSprites,(function(key,value){if(value.length>0){all0_1=false}}));if(all0_1){this.updateStepDuration=200}}};System.prototype.checkIfValidate2=function(sprite){if(sprite.dataItem&&sprite.dataItem.component&&sprite.dataItem.component.dataInvalid&&!sprite.dataItem.component.isTemplate){return false}else{return true}};System.prototype.requestFrame=function(){var _this=this;if(!this._frameRequested){raf((function(){_this.update()}));this._frameRequested=true}};System.prototype.softInvalidate=function(container){var _this=this;container.children.each((function(child){if(child instanceof Container){_this.softInvalidate(child)}if(child.measureFailed){if(is(child,"Label")){child.hardInvalidate()}else{child.invalidate()}child.measureFailed=false}}))};System.prototype.validatePositions=function(id){var invalidPositions=registry.invalidPositions[id];while(invalidPositions.length>0){var sprite=invalidPositions[invalidPositions.length-1];if(!sprite.isDisposed()){try{sprite._systemValidatePositions()}catch(e){sprite.positionInvalid=false;remove(invalidPositions,sprite);sprite.raiseCriticalError(e)}}else{remove(invalidPositions,sprite)}}};System.prototype.validateLayouts=function(id){var invalidLayouts=registry.invalidLayouts[id];while(invalidLayouts.length>0){var container=invalidLayouts[invalidLayouts.length-1];if(!container.isDisposed()){try{container.children.each((function(sprite){sprite._systemValidateLayouts()}));container.validateLayout()}catch(e){container.layoutInvalid=false;remove(invalidLayouts,container);container.raiseCriticalError(e)}}else{remove(invalidLayouts,container)}}};System.prototype.log=function(value){log(value)};Object.defineProperty(System.prototype,"isPaused",{get:function(){return this._isPaused},set:function(value){this._isPaused=value;if(!value){this._frameRequested=false;this.requestFrame()}},enumerable:true,configurable:true});System.VERSION="4.10.33";return System}();var system=new System;var DataParser=function(){function DataParser(){}DataParser.prototype.parse=function(data){return[]};Object.defineProperty(DataParser.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:true,configurable:true});DataParser.prototype.maybeToNumber=function(field,value){if(this.options.numberFields.indexOf(field)!==-1){return anyToNumber(value)}return value};Object.defineProperty(DataParser.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:true,configurable:true});DataParser.prototype.maybeToDate=function(field,value){if(this.options.dateFields.indexOf(field)!==-1){return this.options.dateFormatter.parse(value,this.dateFormat)}return value};DataParser.prototype.maybeToEmpty=function(value){if((!hasValue(value)||value=="")&&hasValue(this.options.emptyAs)){return this.options.emptyAs}return value};Object.defineProperty(DataParser.prototype,"dateFormatter",{get:function(){if(!this.options.dateFormatter){this.options.dateFormatter=new DateFormatter;if(this.options.dateFormat){this.options.dateFormat=this.options.dateFormat}}return this.options.dateFormatter},enumerable:true,configurable:true});Object.defineProperty(DataParser.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:true,configurable:true});return DataParser}();var separators=[",",";","\t"];var CSVParser=function(_super){__extends(CSVParser,_super);function CSVParser(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.contentType="text/csv";_this.options={delimiter:"",reverse:false,skipRows:0,skipEmpty:true,useColumnNames:false};return _this}CSVParser.isCSV=function(data){return CSVParser.getDelimiterFromData(data)?true:false};CSVParser.getDelimiterFromData=function(data){var lines=data.split("\n");var len=lines.length;var separator;each$2(separators,(function(sep){var columns=0,lineColums=0;for(var i=0;i<len;++i){columns=lines[i].split(sep).length;if(columns>1){if(lineColums===0){lineColums=columns}else if(columns!=lineColums){lineColums=0;break}}else{lineColums=0;break}}if(lineColums){separator=sep}}));return separator};CSVParser.prototype.parse=function(csv){if(!this.options.delimiter){this.options.delimiter=CSVParser.getDelimiterFromData(csv)}var data=this.CSVToArray(csv,this.options.delimiter);var empty=hasValue(this.options.emptyAs);var numbers=this.parsableNumbers;var dates=this.parsableDates;var res=[],cols=[],col,i;for(i=0;i<this.options.skipRows;i++){data.shift()}if(this.options.useColumnNames){cols=data.shift();for(var x=0;x<cols.length;x++){col=hasValue(cols[x])?cols[x].replace(/^\s+|\s+$/gm,""):"";if(""===col){col="col"+x}cols[x]=col}}var row;while(true){row=this.options.reverse?data.pop():data.shift();if(!row){break}if(this.options.skipEmpty&&row.length===1&&row[0]===""){continue}var dataPoint={};for(i=0;i<row.length;i++){col=undefined===cols[i]?"col"+i:cols[i];dataPoint[col]=row[i]===""?this.options.emptyAs:row[i];if(empty){dataPoint[col]=this.maybeToEmpty(dataPoint[col])}if(numbers){dataPoint[col]=this.maybeToNumber(col,dataPoint[col])}if(dates){dataPoint[col]=this.maybeToDate(col,dataPoint[col])}}res.push(dataPoint)}return res};CSVParser.prototype.CSVToArray=function(data,delimiter){delimiter=delimiter||",";var objPattern=new RegExp("(\\"+delimiter+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+delimiter+"\\r\\n]*))","gi");var arrData=[[]];var arrMatches=null;while(true){arrMatches=objPattern.exec(data);if(!arrMatches){break}var strMatchedDelimiter=arrMatches[1];if(strMatchedDelimiter.length&&strMatchedDelimiter!==delimiter){arrData.push([])}var strMatchedValue=void 0;if(arrMatches[2]){strMatchedValue=arrMatches[2].replace(new RegExp('""',"g"),'"')}else{strMatchedValue=arrMatches[3]}arrData[arrData.length-1].push(strMatchedValue)}return arrData};return CSVParser}(DataParser);var JSONParser=function(_super){__extends(JSONParser,_super);function JSONParser(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.contentType="application/json";_this.options={};return _this}JSONParser.isJSON=function(data){try{JSON.parse(data);return true}catch(e){return false}};JSONParser.prototype.parse=function(data){var _this=this;var res;try{if(hasValue(JSON)){res=JSON.parse(data)}}catch(e){return undefined}var empty=hasValue(this.options.emptyAs);var numbers=this.parsableNumbers;var dates=this.parsableDates;if(Array.isArray(res)&&(numbers||dates||empty)){var _loop_1=function(i,len){var row=res[i];each$1(row,(function(key,value){if(empty){row[key]=_this.maybeToEmpty(row[key])}if(numbers){row[key]=_this.maybeToNumber(key,row[key])}if(dates){row[key]=_this.maybeToDate(key,row[key])}}))};for(var i=0,len=res.length;i<len;i++){_loop_1(i,len)}}return res};return JSONParser}(DataParser);var DataLoader=function(){function DataLoader(){this.adapter=new Adapter(this)}DataLoader.prototype.load=function(source){var sources=Array.isArray(source)?source:[source];var promises=map$1(sources,(function(x){x.dispatchImmediately("started");x.dispatchImmediately("loadstarted");return load(x.url,x,x.requestOptions)}));Promise.all(promises).then((function(res){each$2(res,(function(result){var source=result.target;source.dispatchImmediately("loadended");if(result.error){if(source.events.isEnabled("error")){source.events.dispatchImmediately("error",{type:"error",code:result.xhr.status,message:source.language.translate("Unable to load file: %1",null,source.url),target:source})}}else{source.processData(result.response,result.type)}source.dispatchImmediately("ended")}))})).catch((function(res){if(res.target){res.target.dispatchImmediately("loadended");if(res.target.events.isEnabled("error")){res.target.events.dispatchImmediately("error",{type:"error",code:res.xhr.status,message:res.target.language.translate("Unable to load file: %1",null,res.target.url),target:res.target})}res.target.dispatchImmediately("ended")}}))};DataLoader.prototype.getParserByType=function(contentType){var parser=this.adapter.apply("getParserByType",{parser:null,type:contentType}).parser;if(parser){return parser}if(contentType=="csv"||contentType=="text/csv"||contentType=="application/vnd.ms-excel"){return new CSVParser}if(contentType=="json"||contentType=="application/json"){return new JSONParser}return};DataLoader.prototype.getParserByData=function(data,contentType){var parser=this.adapter.apply("getParserByData",{parser:null,data,type:contentType}).parser;if(!parser){parser=this.getParserByType(contentType);if(parser){return parser}else if(JSONParser.isJSON(data)){return this.getParserByType("json")}else if(CSVParser.isCSV(data)){return this.getParserByType("csv")}}return parser};return DataLoader}();var dataLoader=new DataLoader;var DataSource=function(_super){__extends(DataSource,_super);function DataSource(url,parser){var _this=_super.call(this)||this;_this.adapter=new Adapter(_this);_this._requestOptions={};_this._incremental=false;_this._incrementalParams={};_this._keepCount=false;_this._updateCurrentData=false;_this.showPreloader=true;_this.className="DataSource";if(url){_this.url=url}if(parser){if(typeof parser=="string"){_this.parser=dataLoader.getParserByType(parser)}else{_this.parser=parser}}return _this}DataSource.prototype.processData=function(data,contentType){this.dispatchImmediately("parsestarted");if(!this.parser){this.parser=dataLoader.getParserByData(data,contentType);if(!this.parser){if(this.events.isEnabled("parseerror")){var event_1={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",event_1)}this.dispatchImmediately("parseended");return}}this.parser.options=this.adapter.apply("parserOptions",this.parser.options);this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]);this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]);if(this.parser.options.dateFields&&!this.parser.options.dateFormatter){this.parser.options.dateFormatter=this.dateFormatter}this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",data)));if(!hasValue(this.data)&&this.events.isEnabled("parseerror")){var event_2={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",event_2)}this.dispatchImmediately("parseended");if(hasValue(this.data)){this.dispatchImmediately("done",{data:this.data})}this.lastLoad=new Date};Object.defineProperty(DataSource.prototype,"url",{get:function(){var url=this.disableCache?this.timestampUrl(this._url):this._url;if(this.incremental&&this.component.data.length){url=this.addUrlParams(url,this.incrementalParams)}return this.adapter.apply("url",url)},set:function(value){this._url=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(value){this._requestOptions=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"parser",{get:function(){if(!this._parser){this._parser=new JSONParser}return this.adapter.apply("parser",this._parser)},set:function(value){this._parser=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(value){var _this=this;if(this._reloadFrequency!=value){this._reloadFrequency=value;if(value){if(!hasValue(this._reloadDisposer)){this._reloadDisposer=this.events.on("ended",(function(ev){_this._reloadTimeout=setTimeout((function(){_this.load()}),_this.reloadFrequency)}))}}else if(hasValue(this._reloadDisposer)){this._reloadDisposer.dispose();this._reloadDisposer=undefined}}},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(value){this._incremental=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(value){this._incrementalParams=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(value){this._keepCount=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(value){this._updateCurrentData=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"language",{get:function(){if(this._language){return this._language}else if(this.component){this._language=this.component.language;return this._language}this.language=new Language;return this.language},set:function(value){this._language=value},enumerable:true,configurable:true});Object.defineProperty(DataSource.prototype,"dateFormatter",{get:function(){if(this._dateFormatter){return this._dateFormatter}else if(this.component){this._dateFormatter=this.component.dateFormatter;return this._dateFormatter}this.dateFormatter=new DateFormatter;return this.dateFormatter},set:function(value){this._dateFormatter=value},enumerable:true,configurable:true});DataSource.prototype.timestampUrl=function(url){var tstamp=(new Date).getTime().toString();var params={};params[tstamp]="";return this.addUrlParams(url,params)};DataSource.prototype.dispose=function(){_super.prototype.dispose.call(this);if(this._reloadTimeout){clearTimeout(this._reloadTimeout)}if(hasValue(this._reloadDisposer)){this._reloadDisposer.dispose();this._reloadDisposer=undefined}};DataSource.prototype.load=function(){if(this.url){if(this._reloadTimeout){clearTimeout(this._reloadTimeout)}dataLoader.load(this)}};DataSource.prototype.addUrlParams=function(url,params){var join=url.match(/\?/)?"&":"?";var add=[];each$1(params,(function(key,value){if(value!=""){add.push(key+"="+encodeURIComponent(value))}else{add.push(key)}}));if(add.length){return url+join+add.join("&")}return url};DataSource.prototype.processConfig=function(config){registry.registeredClasses["json"]=JSONParser;registry.registeredClasses["JSONParser"]=JSONParser;registry.registeredClasses["csv"]=CSVParser;registry.registeredClasses["CSVParser"]=CSVParser;_super.prototype.processConfig.call(this,config)};return DataSource}(BaseObjectEvents);var Responsive=function(_super){__extends(Responsive,_super);function Responsive(){var _this=_super.call(this)||this;_this._rules=new List;_this._appliedRules={};_this._appliedTargets=[];_this._useDefault=true;_this.adapter=new Adapter(_this);_this._enabled=false;_this._responsiveDisposers=[];_this._noStates=[];_this.className="Responsive";_this.rules.events.on("inserted",(function(){_this.checkRules()}),true);_this.rules.events.on("removed",(function(){_this.checkRules()}),true);_this._disposers.push(_this.rules.events);_this.applyTheme();return _this}Object.defineProperty(Responsive.prototype,"component",{get:function(){return this._component},set:function(value){var _this=this;if(value==this._component){return}this.disposeResponsiveHandlers();this._component=value;this._responsiveDisposers.push(getValue$4(this.component).events.on("sizechanged",(function(){_this.checkRules()}),this));this._responsiveDisposers.push(getValue$4(this.component).events.once("datavalidated",(function(){if(_this._component.isReady()){_this.checkRules(true)}}),this));this.enabled=true},enumerable:true,configurable:true});Object.defineProperty(Responsive.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(value){if(this._enabled!=value){this._enabled=value;this.applyRules()}},enumerable:true,configurable:true});Object.defineProperty(Responsive.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(value){if(this._useDefault!=value){this._useDefault=value;this.applyRules()}},enumerable:true,configurable:true});Object.defineProperty(Responsive.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(value){this._rules=value;this._enabled=true;this.applyRules()},enumerable:true,configurable:true});Object.defineProperty(Responsive.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",defaultRules)},enumerable:true,configurable:true});Object.defineProperty(Responsive.prototype,"allRules",{get:function(){var rules=new List;if(this.useDefault){rules.copyFrom(this.defaultRules)}rules.copyFrom(this.rules);return this.adapter.apply("allRules",rules)},enumerable:true,configurable:true});Responsive.prototype.isApplied=function(ruleId){var rule=this._appliedRules[ruleId];return hasValue(rule)?rule:false};Responsive.prototype.checkRules=function(force){var _this=this;if(force===void 0){force=false}var rules=this.allRules;if(!rules||rules.length==0){return}var rulesChanged=false;var component=getValue$4(this.component);if(component.pixelWidth==0||component.pixelHeight==0){return}each(rules.iterator(),(function(rule){if(!rule.id){rule.id=registry.getUniqueId()}var apply=rule.relevant(component);if(apply&&!_this.isApplied(rule.id)||!apply&&_this.isApplied(rule.id)){rulesChanged=true}_this._appliedRules[rule.id]=apply}));if(force){rulesChanged=true}if(rulesChanged){if(!this.component.isReady()){component.hidden=true;component.events.once("ready",(function(ev){ev.target.show(0);_this._applyRules()}));return}this.dispatchImmediately("ruleschanged");this._applyRules()}};Responsive.prototype._applyRules=function(){var _this=this;if(this._timeout){this._timeout.dispose()}this._timeout=this.setTimeout((function(){_this.applyRules()}),10)};Responsive.prototype.applyRules=function(target){var _this=this;var newTarget=hasValue(target)?target:getValue$4(this.component);var defaultStateApplied=false;if(this.enabled){var isApplied_1=false;each(this.allRules.iterator(),(function(rule){var state=_this.getState(rule,newTarget);if(state){if(!defaultStateApplied){if(indexOf(_this._appliedTargets,newTarget.uid)!==-1){newTarget.setState(_this.getDefaultState(newTarget),0)}defaultStateApplied=true}if(_this.isApplied(getValue$4(rule.id))){state.transitionDuration=0;_this.setTargetState(newTarget,state);_this.dispatchImmediately("ruleapplied",{rule});isApplied_1=true}}}));if(isApplied_1){replace(this._appliedTargets,newTarget.uid)}else{remove(this._appliedTargets,newTarget.uid)}}if(newTarget.children){each(newTarget.children.iterator(),(function(child){_this.applyRules(child)}))}};Responsive.prototype.getState=function(rule,target){var stateId="responsive-"+rule.id;var tmpId=target.uid+"_"+stateId;if(indexOf(this._noStates,tmpId)!==-1){return}else if(!target.states.hasKey(stateId)){var state=rule.state(target,stateId);if(!state){this._noStates.push(tmpId)}return state}else{return target.states.getKey(stateId)}};Responsive.prototype.getDefaultState=function(target){if(target.states.hasKey("responsive-default")){return target.states.getKey("responsive-default")}return target.states.create("responsive-default")};Responsive.prototype.setTargetState=function(target,state){var _this=this;var defaultState=this.getDefaultState(target);each$1(state.properties,(function(key,val){if(!hasValue(defaultState.properties[key])){defaultState.properties[key]=_this.getValue(target,key)}}));target.setState(state)};Responsive.prototype.getValue=function(target,property){var value=target.getPropertyValue(property);if(!hasValue(value)&&hasValue(target[property])){value=target[property]}return value};Responsive.prototype.dispose=function(){this.disposeResponsiveHandlers();_super.prototype.dispose.call(this)};Responsive.prototype.disposeResponsiveHandlers=function(){var disposer=this._responsiveDisposers.pop();while(disposer){disposer.dispose();disposer=this._responsiveDisposers.pop()}};return Responsive}(BaseObjectEvents);var defaultRules=new List;defaultRules.events.on("inserted",(function(ev){ev.newValue.id=registry.getUniqueId()}));var ResponsiveBreakpoints=function(){function ResponsiveBreakpoints(){}ResponsiveBreakpoints.widthXXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXS};ResponsiveBreakpoints.widthXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XS};ResponsiveBreakpoints.widthS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.S};ResponsiveBreakpoints.widthM=function(container){return container.pixelWidth<=ResponsiveBreakpoints.M};ResponsiveBreakpoints.widthL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.L};ResponsiveBreakpoints.widthXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XL};ResponsiveBreakpoints.widthXXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXL};ResponsiveBreakpoints.heightXXS=function(container){return container.pixelHeight<=ResponsiveBreakpoints.XXS};ResponsiveBreakpoints.heightXS=function(container){return container.pixelHeight<=ResponsiveBreakpoints.XS};ResponsiveBreakpoints.heightS=function(container){return container.pixelHeight<=ResponsiveBreakpoints.S};ResponsiveBreakpoints.heightM=function(container){return container.pixelHeight<=ResponsiveBreakpoints.M};ResponsiveBreakpoints.heightL=function(container){return container.pixelHeight<=ResponsiveBreakpoints.L};ResponsiveBreakpoints.heightXL=function(container){return container.pixelHeight<=ResponsiveBreakpoints.XL};ResponsiveBreakpoints.heightXXL=function(container){return container.pixelHeight<=ResponsiveBreakpoints.XXL};ResponsiveBreakpoints.isXXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXS&&container.pixelHeight<=ResponsiveBreakpoints.XXS};ResponsiveBreakpoints.isXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XS&&container.pixelHeight<=ResponsiveBreakpoints.XS};ResponsiveBreakpoints.isS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.S&&container.pixelHeight<=ResponsiveBreakpoints.S};ResponsiveBreakpoints.isM=function(container){return container.pixelWidth<=ResponsiveBreakpoints.M&&container.pixelHeight<=ResponsiveBreakpoints.M};ResponsiveBreakpoints.isL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.L&&container.pixelHeight<=ResponsiveBreakpoints.L};ResponsiveBreakpoints.isXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XL&&container.pixelHeight<=ResponsiveBreakpoints.XL};ResponsiveBreakpoints.isXXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXL&&container.pixelHeight<=ResponsiveBreakpoints.XXL};ResponsiveBreakpoints.maybeXXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXS||container.pixelHeight<=ResponsiveBreakpoints.XXS};ResponsiveBreakpoints.maybeXS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XS||container.pixelHeight<=ResponsiveBreakpoints.XS};ResponsiveBreakpoints.maybeS=function(container){return container.pixelWidth<=ResponsiveBreakpoints.S||container.pixelHeight<=ResponsiveBreakpoints.S};ResponsiveBreakpoints.maybeM=function(container){return container.pixelWidth<=ResponsiveBreakpoints.M||container.pixelHeight<=ResponsiveBreakpoints.M};ResponsiveBreakpoints.maybeL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.L||container.pixelHeight<=ResponsiveBreakpoints.L};ResponsiveBreakpoints.maybeXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XL||container.pixelHeight<=ResponsiveBreakpoints.XL};ResponsiveBreakpoints.maybeXXL=function(container){return container.pixelWidth<=ResponsiveBreakpoints.XXL||container.pixelHeight<=ResponsiveBreakpoints.XXL};ResponsiveBreakpoints.XXS=100;ResponsiveBreakpoints.XS=200;ResponsiveBreakpoints.S=300;ResponsiveBreakpoints.M=400;ResponsiveBreakpoints.L=600;ResponsiveBreakpoints.XL=800;ResponsiveBreakpoints.XXL=1e3;return ResponsiveBreakpoints}();var DataItem=function(_super){__extends(DataItem,_super);function DataItem(){var _this=_super.call(this)||this;_this._disabled=false;_this.hasProperties=false;_this.values={};_this.categories={};_this.dates={};_this.locations={};_this.workingLocations={};_this.properties={};_this.sprites=[];_this.isTemplate=false;_this._index=null;_this._visible=true;_this._hidden=false;_this._ignoreMinMax=false;_this.hasChildren={};_this.isHiding=false;_this._valueAnimations={};_this._locationAnimations={};_this.className="DataItem";_this.applyTheme();return _this}Object.defineProperty(DataItem.prototype,"adapter",{get:function(){if(!this._adapterO){this._adapterO=new Adapter(this)}return this._adapterO},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"index",{get:function(){if(this.component){if(this._index!=null){return this._index}else{return-1}}else{return-1}},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"animations",{get:function(){if(!this._animations){this._animations=[];this._disposers.push(new AnimationDisposer(this._animations))}return this._animations},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"visible",{get:function(){if(this._hidden){return false}return this._visible},set:function(value){if(value){this.hidden=false}if(this._visible!=value){this.setVisibility(value)}},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"hidden",{get:function(){return this._hidden},set:function(value){if(this._hidden!=value){this._hidden=value;if(value){this.setVisibility(false)}else{this.setVisibility(true,true)}}},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"__disabled",{get:function(){return this._disabled},set:function(value){this._disabled=value;each$2(this.sprites,(function(sprite){sprite.__disabled=value}))},enumerable:true,configurable:true});DataItem.prototype.setVisibility=function(value,noChangeValues){each$2(this.sprites,(function(sprite){if(value){sprite.visible=sprite.defaultState.properties.visible}else{if(sprite.hiddenState){sprite.visible=sprite.hiddenState.properties.visible}else{sprite.visible=false}}}));this._visible=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("visibilitychanged")){var event_1={type:"visibilitychanged",target:this,visible:value};this.events.dispatchImmediately("visibilitychanged",event_1)}}};DataItem.prototype.show=function(duration,delay,fields){var _this=this;if(!this.hidden){this.setVisibility(true,true);this.isHiding=false;if(this._hideDisposer){this.removeDispose(this._hideDisposer)}var animation_1;if(fields){each$2(fields,(function(field){animation_1=_this.setWorkingValue(field,_this.values[field].value,duration,delay)}))}each$2(this.sprites,(function(sprite){var animation=sprite.show(duration);if(animation!=null&&!animation.isFinished()){_this._disposers.push(animation);if(delay!=null&&delay>0){animation.delay(delay)}}}));return animation_1}};DataItem.prototype.dispose=function(){_super.prototype.dispose.call(this);each$2(this.sprites,(function(sprite){sprite.dispose()}));this.sprites=[]};DataItem.prototype.hide=function(duration,delay,toValue,fields){var _this=this;this.isHiding=true;each$2(this.sprites,(function(sprite){var animation=sprite.hide(duration);if(animation!=null&&!animation.isFinished()){_this._disposers.push(animation);if(delay!=null&&delay>0){animation.delay(delay)}}}));if(isNumber$1(toValue)&&fields){var animation_2;each$2(fields,(function(field){var anim=_this.setWorkingValue(field,toValue,duration,delay);if(anim){animation_2=anim}}));if(animation_2&&!animation_2.isFinished()){this._hideDisposer=animation_2.events.on("animationended",(function(){_this.setVisibility(false,true);_this.isHiding=false}));this._disposers.push(this._hideDisposer);return animation_2}else{this.isHiding=false;this.setVisibility(false,true)}}else{this.isHiding=false;this.setVisibility(false)}};DataItem.prototype.getDuration=function(duration){if(!isNumber$1(duration)){var component=this.component;if(component){duration=component.interpolationDuration}}if(duration!=null){if(!this._adapterO){return duration}else{return this._adapterO.apply("duration",duration)}}};DataItem.prototype.getValue=function(name,calculated){if(name&&this.component){if(!calculated){calculated=this.component.dataFields[name+"Show"];if(!calculated){calculated="value"}}var value=this.values[name][calculated];if(this._adapterO&&this._adapterO.isEnabled("value")){return this._adapterO.apply("value",{value,field:name}).value}else{return value}}};DataItem.prototype.getWorkingValue=function(name){if(name&&this.component){var realName=this.component.dataFields[name+"Show"];if(!realName){realName="workingValue"}if(this._adapterO){return this._adapterO.apply("workingValue",{workingValue:this.values[name][realName],field:name}).workingValue}else{return this.values[name][realName]}}};DataItem.prototype.getActualWorkingValue=function(name){return this.values[name].workingValue};DataItem.prototype.setValue=function(name,value,duration,delay){var currentValue=this.values[name].value;var newDuration=this.getDuration(duration);value=toNumber$1(value);if(currentValue!==value){this.values[name].value=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("valuechanged")){var event_2={type:"valuechanged",target:this,property:name};this.events.dispatchImmediately("valuechanged",event_2)}}if(this.component){this.component.handleDataItemValueChange(this,name)}}this.setWorkingValue(name,value,newDuration,delay)};DataItem.prototype.setCalculatedValue=function(name,value,calculated){var currentValue=this.values[name][calculated];if(currentValue!==value&&isNumber$1(value)){this.values[name][calculated]=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("calculatedvaluechanged")){var event_3={type:"calculatedvaluechanged",target:this,property:name};this.events.dispatchImmediately("calculatedvaluechanged",event_3)}}if(this.component){this.component.handleDataItemCalculatedValueChange(this,name)}}};DataItem.prototype.setWorkingValue=function(name,value,duration,delay){if(isNumber$1(this.values[name].value)){var newDuration=this.getDuration(duration);var workingValue=this.values[name].workingValue;if(newDuration!=null&&newDuration>0&&isNumber$1(workingValue)&&this.component){if(workingValue!=value){var animation=this.animate({childObject:this.values[name],property:"workingValue",from:workingValue,to:value,dummyData:name},newDuration,this.component.interpolationEasing);if(delay!=null){animation.delay(delay)}animation.events.on("animationstarted",this.handleInterpolationProgress,this);animation.events.on("animationprogress",this.handleInterpolationProgress,this);animation.events.on("animationended",this.handleInterpolationProgress,this);this._valueAnimations[name]=animation;return animation}else{var valueAnimation=this._valueAnimations[name];if(valueAnimation){valueAnimation.stop()}this.values[name].workingValue=value}}else{var valueAnimation=this._valueAnimations[name];if(valueAnimation){valueAnimation.stop()}this.values[name].workingValue=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("workingvaluechanged")){var event_4={type:"workingvaluechanged",target:this,property:name};this.events.dispatchImmediately("workingvaluechanged",event_4)}}if(this.component){this.component.handleDataItemWorkingValueChange(this,name)}}}};DataItem.prototype.setLocation=function(name,value,duration,delay){var currentLocation=this.locations[name];if(currentLocation!==value){this.locations[name]=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("locationchanged")){var event_5={type:"locationchanged",target:this,property:name};this.events.dispatchImmediately("locationchanged",event_5)}}if(this.component){this.component.handleDataItemValueChange(this,name)}this.setWorkingLocation(name,value,duration,delay)}};DataItem.prototype.setWorkingLocation=function(name,value,duration,delay){var newDuration=this.getDuration(duration);var workingLocation=this.workingLocations[name];if(newDuration!=null&&newDuration>0&&isNumber$1(workingLocation)&&this.component){if(workingLocation!=value){var animation=this.animate({childObject:this.workingLocations,property:name,from:workingLocation,to:value,dummyData:name},newDuration,this.component.interpolationEasing);if(delay!=null){animation.delay(delay)}animation.events.on("animationstarted",this.handleInterpolationProgress,this);animation.events.on("animationprogress",this.handleInterpolationProgress,this);animation.events.on("animationended",this.handleInterpolationProgress,this);this._locationAnimations[name]=animation;return animation}else{var locationAnimation=this._locationAnimations[name];if(locationAnimation){locationAnimation.stop()}this.workingLocations[name]=value}}else{var locationAnimation=this._locationAnimations[name];if(locationAnimation){locationAnimation.stop()}this.workingLocations[name]=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("workinglocationchanged")){var event_6={type:"workinglocationchanged",target:this,property:name};this.events.dispatchImmediately("workinglocationchanged",event_6)}}if(this.component){this.component.handleDataItemWorkingLocationChange(this,name)}}};DataItem.prototype.setDate=function(name,date,duration){if(!isDate$1(date)&&this.component){date=this.component.dateFormatter.parse(date)}var currentDate=this.dates[name];if(currentDate!==date){this.dates[name]=date;this.setValue(name,date.getTime(),duration)}};DataItem.prototype.getDate=function(name){if(this._adapterO){return this._adapterO.apply("date",{date:this.dates[name],field:name}).date}else{return this.dates[name]}};DataItem.prototype.setProperty=function(name,value){if(this.properties[name]!==value){this.hasProperties=true;this.properties[name]=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("propertychanged")){var event_7={type:"propertychanged",target:this,property:name,value};this.events.dispatchImmediately("propertychanged",event_7)}}if(this.component){this.component.handleDataItemPropertyChange(this,name)}}};DataItem.prototype.setCategory=function(name,value){if(!isString$1(value)){value=castString(value)}if(this.categories[name]!==value){this.categories[name]=value}};DataItem.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(source.dataContext){this.dataContext=copy$3(source.dataContext,{})}copyProperties(source.locations,this.locations);if(source._adapterO){this.adapter.copyFrom(source._adapterO)}this.component=source.component};Object.defineProperty(DataItem.prototype,"opacity",{set:function(value){each$2(this.sprites,(function(sprite){sprite.opacity=value}))},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(value){this._ignoreMinMax=value;if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("propertychanged")){var event_8={type:"propertychanged",target:this,property:"ignoreMinMax",value};this.events.dispatchImmediately("propertychanged",event_8)}}if(this.component){this.component.handleDataItemPropertyChange(this,"ignoreMinMax")}},enumerable:true,configurable:true});DataItem.prototype.animate=function(animationOptions,duration,easing){return new Animation(this,animationOptions,duration,easing).start()};DataItem.prototype.handleInterpolationProgress=function(event){var animation=event.target;var animationOptions=animation.animationOptions[0];if(animationOptions){if(this._eventDispatcher&&!this.__disabled){if(this.events.isEnabled("workingvaluechanged")){var event_9={type:"workingvaluechanged",target:this,property:animationOptions.dummyData};this.events.dispatchImmediately("workingvaluechanged",event_9)}}if(this.component){this.component.handleDataItemWorkingValueChange(this,animationOptions.dummyData)}}};DataItem.prototype.hasValue=function(fields){for(var i=0,len=fields.length;i<len;i++){var values=this.values[fields[i]];if(!values||!hasValue(values.value)){return false}}return true};Object.defineProperty(DataItem.prototype,"depth",{get:function(){if(!this.parent){return 0}else{return this.parent.depth+1}},enumerable:true,configurable:true});Object.defineProperty(DataItem.prototype,"dataContext",{get:function(){return this._dataContext},set:function(value){this._dataContext=value},enumerable:true,configurable:true});DataItem.prototype.addSprite=function(sprite){if(sprite.dataItem&&sprite.dataItem!=this){remove(sprite.dataItem.sprites,sprite)}if(!this.visible){sprite.hide(0)}if(this.isHiding){sprite.hide()}this.sprites.push(sprite);sprite.dataItem=this};return DataItem}(BaseObjectEvents);var Component=function(_super){__extends(Component,_super);function Component(){var _this=_super.call(this)||this;_this.dataFields={};_this._dataSources={};_this._parseDataFrom=0;_this._dataDisposers=[];_this._currentDataSetId="";_this._start=0;_this._end=1;_this.skipRangeEvent=false;_this.rangeChangeDuration=0;_this.rangeChangeEasing=cubicOut;_this.parsingStepDuration=50;_this.dataInvalid=false;_this.rawDataInvalid=false;_this.dataRangeInvalid=false;_this.dataItemsInvalid=false;_this.interpolationDuration=0;_this.interpolationEasing=cubicOut;_this.sequencedInterpolation=true;_this.sequencedInterpolationDelay=0;_this.dataValidationProgress=0;_this._addAllDataItems=true;_this._usesData=true;_this.className="Component";_this.minZoomCount=1;_this.maxZoomCount=0;_this._dataItems=new OrderedListTemplate(_this.createDataItem());_this._dataItems.events.on("inserted",_this.handleDataItemAdded,_this,false);_this._dataItems.events.on("removed",_this.handleDataItemRemoved,_this,false);_this._disposers.push(new ListDisposer(_this._dataItems));_this._disposers.push(_this._dataItems.template);_this.invalidateData();_this.dataUsers.events.on("inserted",_this.handleDataUserAdded,_this,false);_this._disposers.push(new MultiDisposer(_this._dataDisposers));_this._start=0;_this._end=1;_this.maxZoomDeclination=1;_this.applyTheme();return _this}Component.prototype.createDataItem=function(){return new DataItem};Component.prototype.handleDataUserAdded=function(event){var dataUser=event.newValue;dataUser.dataProvider=this};Component.prototype.handleDataItemValueChange=function(dataItem,name){if(!this.dataItemsInvalid){this.invalidateDataItems()}};Component.prototype.handleDataItemWorkingValueChange=function(dataItem,name){};Component.prototype.handleDataItemWorkingLocationChange=function(dataItem,name){};Component.prototype.handleDataItemCalculatedValueChange=function(dataItem,name){};Component.prototype.handleDataItemPropertyChange=function(dataItem,name){};Component.prototype.processDataItem=function(dataItem,dataContext){var _this=this;if(dataItem){if(!dataContext){dataContext={}}dataItem.dataContext=dataContext;var hasSomeValues_1=false;each$1(this.dataFields,(function(key,fieldValue){var fieldName=key;var value=dataContext[fieldValue];if(_this._adapterO){if(_this._adapterO.isEnabled("dataContextValue")){value=_this._adapterO.apply("dataContextValue",{field:fieldName,value,dataItem}).value}}if(hasValue(value)){hasSomeValues_1=true;if(dataItem.hasChildren[fieldName]){var template=_this.createDataItem();template.copyFrom(_this.mainDataSet.template);var children=new OrderedListTemplate(template);children.events.on("inserted",_this.handleDataItemAdded,_this,false);children.events.on("removed",_this.handleDataItemRemoved,_this,false);_this._dataDisposers.push(new ListDisposer(children));var count=value.length;for(var i=0;i<count;i++){var rawDataItem=value[i];var childDataItem=children.create();childDataItem.parent=dataItem;_this.processDataItem(childDataItem,rawDataItem)}var anyDataItem=dataItem;anyDataItem[fieldName]=children}else{dataItem[fieldName]=value}}}));each$1(this.propertyFields,(function(key,fieldValue){var f=key;var value=dataContext[fieldValue];if(hasValue(value)){hasSomeValues_1=true;dataItem.setProperty(f,value)}}));if(!this._addAllDataItems&&!hasSomeValues_1){this.mainDataSet.remove(dataItem)}}};Component.prototype.updateDataItem=function(dataItem){var _this=this;if(dataItem){var dataContext_1=dataItem.dataContext;each$1(this.dataFields,(function(key,fieldValue){var fieldName=key;var value=dataContext_1[fieldValue];if(_this._adapterO){value=_this._adapterO.apply("dataContextValue",{field:fieldName,value,dataItem}).value}if(hasValue(value)){if(dataItem.hasChildren[fieldName]){var anyDataItem=dataItem;var children=anyDataItem[fieldName];children.each((function(child){_this.updateDataItem(child)}))}else{dataItem[fieldName]=value}}}));each$1(this.propertyFields,(function(key,fieldValue){var f=key;var value=dataContext_1[fieldValue];if(hasValue(value)){dataItem.setProperty(f,value)}}))}};Component.prototype.validateDataElements=function(){var count=this.endIndex;for(var i=this.startIndex;i<count;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem){this.validateDataElement(dataItem)}}};Component.prototype.validate=function(){this.validateDataElements();_super.prototype.validate.call(this)};Component.prototype.validateDataElement=function(dataItem){};Component.prototype.addData=function(rawDataItem,removeCount,skipRaw){var _this=this;if(!this.dataInvalid&&this.inited){this._parseDataFrom=this.data.length}if(!skipRaw){if(rawDataItem instanceof Array){each$2(rawDataItem,(function(dataItem){_this.data.push(dataItem)}))}else{this.data.push(rawDataItem)}}if(this.inited){this.removeData(removeCount,skipRaw)}else{if(isNumber$1(removeCount)){while(removeCount>0){this.data.shift();removeCount--}}}this.invalidateData()};Component.prototype.removeData=function(count,skipRaw){if(isNumber$1(count)&&count>0){while(count>0){var dataItem=this.mainDataSet.getIndex(0);if(dataItem){this.mainDataSet.remove(dataItem)}this.dataUsers.each((function(dataUser){if(!dataUser.data||dataUser.data.length==0){var dataItem_1=dataUser.mainDataSet.getIndex(0);if(dataItem_1){dataUser.mainDataSet.remove(dataItem_1)}}}));if(!skipRaw){this.data.shift()}if(this._parseDataFrom>0){this._parseDataFrom--}count--}this.invalidateDataItems()}};Component.prototype.invalidateData=function(){if(this.disabled||this.isTemplate){return}registry.addToInvalidComponents(this);system.requestFrame();this.dataInvalid=true;each(this.dataUsers.iterator(),(function(x){x.invalidateDataItems()}))};Component.prototype.invalidateDataUsers=function(){each(this.dataUsers.iterator(),(function(x){x.invalidate()}))};Component.prototype.invalidateDataItems=function(){if(this.disabled||this.isTemplate){return}move(registry.invalidDataItems,this);system.requestFrame();this.dataItemsInvalid=true;each(this.dataUsers.iterator(),(function(x){x.invalidateDataItems()}))};Component.prototype.invalidateDataRange=function(){if(this.disabled||this.isTemplate){return}this.dataRangeInvalid=true;move(registry.invalidDataRange,this);system.requestFrame()};Component.prototype.validateDataRange=function(){remove(registry.invalidDataRange,this);this.dataRangeInvalid=false;if(this.startIndex!=this._prevStartIndex||this.endIndex!=this._prevEndIndex){this.rangeChangeUpdate();this.appendDataItems();this.invalidate();this.dispatchImmediately("datarangechanged")}};Component.prototype.sliceData=function(){this._workingStartIndex=this.startIndex;this._workingEndIndex=this.endIndex};Component.prototype.rangeChangeUpdate=function(){this.sliceData();this._prevStartIndex=this.startIndex;this._prevEndIndex=this.endIndex};Component.prototype.appendDataItems=function(){var count=this.endIndex;for(var i=this.startIndex;i<count;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem){dataItem.__disabled=false}}for(var i=0;i<this.startIndex;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem){dataItem.__disabled=true}}for(var i=this.endIndex;i<this.dataItems.length;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem){dataItem.__disabled=true}}};Component.prototype.invalidateRawData=function(){if(this.disabled||this.isTemplate){return}move(registry.invalidRawDatas,this);system.requestFrame();this.rawDataInvalid=true;each(this.dataUsers.iterator(),(function(x){x.invalidateRawData()}))};Component.prototype.validateRawData=function(){var _this=this;remove(registry.invalidRawDatas,this);each(this.mainDataSet.iterator(),(function(dataItem){if(dataItem){_this.updateDataItem(dataItem)}}))};Component.prototype.dispose=function(){var _this=this;this.mainDataSet.template.clones.clear();each$1(this._dataSources,(function(key,source){_this.removeDispose(source)}));this.disposeData();_super.prototype.dispose.call(this)};Component.prototype.disposeData=function(){this.mainDataSet.template.clones.clear();each$2(this._dataDisposers,(function(x){x.dispose()}));each(this.dataUsers.iterator(),(function(dataUser){dataUser.disposeData()}));this._dataDisposers.length=0;this._startIndex=undefined;this._endIndex=undefined;this.mainDataSet.clear();this.mainDataSet.template.clones.clear();if(this._dataSets){this._dataSets.clear()}};Component.prototype.getDataItem=function(dataContext){return this.mainDataSet.create()};Component.prototype.validateData=function(){this.dispatchImmediately("beforedatavalidated");this.dataInvalid=false;registry.removeFromInvalidComponents(this);if(this.__disabled){return}this.dataValidationProgress=0;this._prevStartIndex=undefined;this._prevEndIndex=undefined;this._startIndex=undefined;this._endIndex=undefined;if(this.dataFields.data&&this.dataItem){var dataContext=this.dataItem.dataContext;this._data=dataContext[this.dataFields.data]}if(this._parseDataFrom===0&&this.data.length>0){this.disposeData()}if(this.data.length>0){var preloader=this.preloader;each(this.dataUsers.iterator(),(function(dataUser){dataUser._startIndex=undefined;dataUser._endIndex=undefined}));var counter=0;var startTime=Date.now();var i=this._parseDataFrom;var n=this.data.length;var _loop_1=function(){var rawDataItem=this_1.data[i];if(this_1._usesData){var dataItem=this_1.getDataItem(rawDataItem);this_1.processDataItem(dataItem,rawDataItem)}this_1.dataUsers.each((function(dataUser){if(dataUser.data.length==0){var dataUserDataItem=dataUser.getDataItem(rawDataItem);dataUser.processDataItem(dataUserDataItem,rawDataItem)}}));counter++;if(counter==100){counter=0;var elapsed=Date.now()-startTime;if(elapsed>this_1.parsingStepDuration){if(i<this_1.data.length-10){this_1._parseDataFrom=i+1;if(preloader){if(i/this_1.data.length>.5&&!preloader.visible);else{preloader.progress=i/this_1.data.length}}this_1.dataValidationProgress=i/this_1.data.length;i=this_1.data.length;this_1.invalidateData();return{value:void 0}}}}};var this_1=this;for(i;i<n;i++){var state_1=_loop_1();if(typeof state_1==="object")return state_1.value}if(preloader){preloader.progress=1}this.dataUsers.each((function(dataUser){if(dataUser.hidden||dataUser.appeared&&!dataUser.visible&&dataUser.stacked){dataUser.hide(0)}}))}this.dataValidationProgress=1;this._parseDataFrom=0;this.invalidateDataItems();if(!this._internalDefaultsApplied){this.applyInternalDefaults()}this.dispatch("datavalidated")};Component.prototype.validateDataItems=function(){remove(registry.invalidDataItems,this);this.dataItemsInvalid=false;this.invalidateDataRange();this.invalidate();this.dispatch("dataitemsvalidated")};Object.defineProperty(Component.prototype,"data",{get:function(){if(!this._data){this._data=[]}if(!this._adapterO){return this._data}else{return this._adapterO.apply("data",this._data)}},set:function(value){this.setData(value)},enumerable:true,configurable:true});Component.prototype.setData=function(value){if(!this.isDisposed()){this._parseDataFrom=0;this.disposeData();this._data=value;if(value&&value.length>0){this.invalidateData()}else{this.dispatchImmediately("beforedatavalidated");this.dispatch("datavalidated")}}};Component.prototype.getDataSource=function(property){var _this=this;if(!hasValue(this._dataSources[property])){this._dataSources[property]=new DataSource;this._dataSources[property].component=this;this.setDataSourceEvents(this._dataSources[property],property);this._dataSources[property].adapter.add("dateFields",(function(val){return _this.dataSourceDateFields(val)}));this._dataSources[property].adapter.add("numberFields",(function(val){return _this.dataSourceNumberFields(val)}));this.events.on("inited",(function(){_this.loadData(property)}),this,false)}return this._dataSources[property]};Object.defineProperty(Component.prototype,"dataSource",{get:function(){if(!this._dataSources["data"]){this.getDataSource("data")}return this._dataSources["data"]},set:function(value){var _this=this;if(this._dataSources["data"]){this.removeDispose(this._dataSources["data"])}this._dataSources["data"]=value;this._dataSources["data"].component=this;this.events.on("inited",(function(){_this.loadData("data")}),this,false);this.setDataSourceEvents(value,"data")},enumerable:true,configurable:true});Component.prototype.loadData=function(property){this._dataSources[property].load()};Component.prototype.dataSourceDateFields=function(value){return value};Component.prototype.dataSourceNumberFields=function(value){return value};Component.prototype.populateDataSourceFields=function(list,dataFields,targetList){each$2(targetList,(function(value){if(dataFields[value]&&indexOf(list,dataFields[value])===-1){list.push(dataFields[value])}}));return list};Component.prototype.setDataSourceEvents=function(ds,property){var _this=this;ds.events.on("started",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=0}}),undefined,false);ds.events.on("loadstarted",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=.25}}),undefined,false);ds.events.on("loadended",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=.5}}),undefined,false);ds.events.on("parseended",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=.75}}),undefined,false);ds.events.on("ended",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=1}}),undefined,false);ds.events.on("error",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=1}_this.openModal(ev.message)}),undefined,false);if(property){ds.events.on("done",(function(ev){var preloader=_this.preloader;if(preloader){preloader.progress=1}if(property=="data"&&!isArray$6(ev.data)){ev.data=[ev.data]}if(ds.incremental&&property=="data"&&_this.data.length){_this.addData(ev.data,ds.keepCount?ev.data.length:0)}else if(ds.updateCurrentData&&property=="data"&&_this.data.length){each$2(_this.data,(function(item,index){if(hasValue(ev.data[index])){each$1(item,(function(key,val){if(hasValue(ev.data[index][key])){item[key]=ev.data[index][key]}}))}}));_this.invalidateRawData()}else{_this[property]=ev.data}}))}};Object.defineProperty(Component.prototype,"responsive",{get:function(){if(!this._responsive){this._responsive=new Responsive;this._responsive.component=this}return this._responsive},set:function(value){this._responsive=value;this._responsive.component=this},enumerable:true,configurable:true});Component.prototype.zoom=function(range,skipRangeEvent,instantly,declination){var _this=this;if(skipRangeEvent===void 0){skipRangeEvent=false}if(instantly===void 0){instantly=false}var start=range.start;var end=range.end;var priority=range.priority;if(range.start==range.end){range.start=range.start-.5/this.maxZoomFactor;range.end=range.end+.5/this.maxZoomFactor}if(priority=="end"&&end==1&&start!=0){if(start<this.start){priority="start"}}if(priority=="start"&&start==0){if(end>this.end){priority="end"}}if(!isNumber$1(declination)){declination=this.maxZoomDeclination}if(!isNumber$1(start)||!isNumber$1(end)){return{start:this.start,end:this.end}}if(this._finalStart!=start||this._finalEnd!=end){var maxZoomFactor=this.maxZoomFactor/this.minZoomCount;var minZoomFactor=this.maxZoomFactor/this.maxZoomCount;if(priority=="start"){if(this.maxZoomCount>0){if(1/(end-start)<minZoomFactor){end=start+1/minZoomFactor}}if(1/(end-start)>maxZoomFactor){end=start+1/maxZoomFactor}if(end>1&&end-start<1/maxZoomFactor){start=end-1/maxZoomFactor}}else{if(this.maxZoomCount>0){if(1/(end-start)<minZoomFactor){start=end-1/minZoomFactor}}if(1/(end-start)>maxZoomFactor){if(start<=0){end=start+1/maxZoomFactor}else{start=end-1/maxZoomFactor}}if(start<0&&end-start<1/maxZoomFactor){end=start+1/maxZoomFactor}}if(start<-declination){start=-declination}if(1/(end-start)>maxZoomFactor){end=start+1/maxZoomFactor}if(end>1+declination){end=1+declination}if(1/(end-start)>maxZoomFactor){start=end-1/maxZoomFactor}this._finalEnd=end;this._finalStart=start;this.skipRangeEvent=skipRangeEvent;this.dispatchImmediately("rangechangestarted");if(this.rangeChangeDuration>0&&!instantly){var rangeChangeAnimation=this.rangeChangeAnimation;if(rangeChangeAnimation&&rangeChangeAnimation.progress<1){var options=rangeChangeAnimation.animationOptions;if(options.length>1){if(options[0].to==start&&options[1].to==end){return{start,end}}else{if(!rangeChangeAnimation.isDisposed()){rangeChangeAnimation.stop()}}}}if(this.rangeChangeAnimation){this.rangeChangeAnimation.kill()}rangeChangeAnimation=this.animate([{property:"start",to:start},{property:"end",to:end}],this.rangeChangeDuration,this.rangeChangeEasing);this.rangeChangeAnimation=rangeChangeAnimation;if(rangeChangeAnimation&&!rangeChangeAnimation.isFinished()){rangeChangeAnimation.events.on("animationended",(function(){_this.dispatchImmediately("rangechangeended")}))}else{this.dispatchImmediately("rangechangeended")}}else{this.start=start;this.end=end;this.dispatch("rangechangeended")}}return{start,end}};Component.prototype.zoomToIndexes=function(startIndex,endIndex,skipRangeEvent,instantly){if(!isNumber$1(startIndex)||!isNumber$1(endIndex)){return}var start=startIndex/this.dataItems.length;var end=endIndex/this.dataItems.length;this.zoom({start,end},skipRangeEvent,instantly)};Object.defineProperty(Component.prototype,"zoomFactor",{get:function(){return fitToRange(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(value){if(this.setPropertyValue("maxZoomFactor",value)){if(value==1){this.maxZoomDeclination=0}this.invalidateDataRange()}},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(value){if(this.setPropertyValue("maxZoomDeclination",value)){this.invalidateDataRange()}},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"startIndex",{get:function(){if(!isNumber$1(this._startIndex)){this._startIndex=0}return this._startIndex},set:function(value){this._startIndex=fitToRange(Math.round(value),0,this.dataItems.length);this.start=this.indexToPosition(this._startIndex)},enumerable:true,configurable:true});Component.prototype.indexToPosition=function(index){return index/this.dataItems.length};Object.defineProperty(Component.prototype,"endIndex",{get:function(){var count=this.dataItems.length;if(!isNumber$1(this._endIndex)||this._endIndex>count){this._endIndex=count}return this._endIndex},set:function(value){this._endIndex=fitToRange(Math.round(value),0,this.dataItems.length);this.end=this.indexToPosition(this._endIndex)},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"start",{get:function(){if(!this._adapterO){return this._start}else{return this._adapterO.apply("start",this._start)}},set:function(value){if(this._start!=value){this._start=value;var startIndex=Math.max(0,Math.floor(this.dataItems.length*value)||0);this._startIndex=Math.min(startIndex,this.dataItems.length);this.invalidateDataRange();this.invalidate();this.dispatchImmediately("startchanged");this.dispatch("startendchanged")}},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"end",{get:function(){if(!this._adapterO){return this._end}else{return this._adapterO.apply("end",this._end)}},set:function(value){if(this._end!=value){this._end=value;this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*value)||0);this.invalidateDataRange();this.invalidate();this.dispatchImmediately("endchanged");this.dispatch("startendchanged")}},enumerable:true,configurable:true});Component.prototype.removeFromInvalids=function(){_super.prototype.removeFromInvalids.call(this);registry.removeFromInvalidComponents(this);remove(registry.invalidDataItems,this);remove(registry.invalidDataRange,this);remove(registry.invalidRawDatas,this)};Object.defineProperty(Component.prototype,"dataItems",{get:function(){if(this._currentDataSetId!=""){var dataItems=this.dataSets.getKey(this._currentDataSetId);if(dataItems){return dataItems}}return this._dataItems},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"dataSets",{get:function(){if(!this._dataSets){this._dataSets=new Dictionary}return this._dataSets},enumerable:true,configurable:true});Component.prototype.setDataSet=function(id){if(this._currentDataSetId!=id){var dataSet=this.dataSets.getKey(id);if(!dataSet){if(this._currentDataSetId!=""){this.dataItems.each((function(dataItem){dataItem.__disabled=true}));this._currentDataSetId="";this.invalidateDataRange();this._prevStartIndex=undefined;this.dataItems.each((function(dataItem){dataItem.__disabled=false}));return true}}else{this.dataItems.each((function(dataItem){dataItem.__disabled=true}));this._currentDataSetId=id;this.invalidateDataRange();this._prevStartIndex=undefined;this.dataItems.each((function(dataItem){dataItem.__disabled=false}));return true}}return false};Object.defineProperty(Component.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:true,configurable:true});Component.prototype._updateDataItemIndexes=function(startIndex){var dataItems=this.mainDataSet.values;var length=dataItems.length;for(var i=startIndex;i<length;++i){dataItems[i]._index=i}};Component.prototype.handleDataItemAdded=function(event){event.newValue.component=this;this._updateDataItemIndexes(event.index);if(!this.dataItemsInvalid){this.invalidateDataItems()}};Component.prototype.handleDataItemRemoved=function(event){this._updateDataItemIndexes(event.index);if(!this.dataItemsInvalid){this.invalidateDataItems()}};Component.prototype.bindDataField=function(field,value){this.dataFields[field]=value;this.invalidateDataRange()};Component.prototype.invalidateProcessedData=function(){this.resetProcessedRange();this.invalidateDataRange()};Component.prototype.resetProcessedRange=function(){this._prevEndIndex=null;this._prevStartIndex=null};Object.defineProperty(Component.prototype,"dataUsers",{get:function(){var _this=this;if(!this._dataUsers){this._dataUsers=new List;this._disposers.push(new Disposer((function(){each(_this._dataUsers.iterator(),(function(x){x.dispose()}))})))}return this._dataUsers},enumerable:true,configurable:true});Component.prototype.clone=function(){var component=_super.prototype.clone.call(this);component.dataFields=copyProperties(this.dataFields,{});return component};Component.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.data=source.data;this.sequencedInterpolation=source.sequencedInterpolation;this.sequencedInterpolationDelay=source.sequencedInterpolationDelay;this.interpolationDuration=source.interpolationDuration;this.interpolationEasing=source.interpolationEasing};Component.prototype.reinit=function(){this._inited=false;this.deepInvalidate()};Component.prototype.getExporting=function(){var _export=_super.prototype.getExporting.call(this);if(!_export.adapter.has("data",this._exportData,-1,this)){_export.adapter.add("data",this._exportData,-1,this);this.events.on("datavalidated",(function(ev){_export.handleDataUpdated()}))}return _export};Component.prototype._exportData=function(arg){arg.data=this.data;return arg};Component.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(changed){this.invalidateData()}return changed};Component.prototype.setShowOnInit=function(value){if(value!=this.getPropertyValue("showOnInit")){if(value&&!this.inited&&!this.hidden){this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,false);this._disposers.push(this._showOnInitDisposer2)}else{if(this._showOnInitDisposer2){this.removeDispose(this._showOnInitDisposer2)}}}_super.prototype.setShowOnInit.call(this,value)};Component.prototype.setBaseId=function(value){if(value!=this._baseId){if(this.dataInvalid){this.dataInvalid=false;registry.removeFromInvalidComponents(this);this._baseId=value;this.invalidateData()}}_super.prototype.setBaseId.call(this,value)};Object.defineProperty(Component.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(value){this.setPropertyValue("minZoomCount",value)},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(value){this.setPropertyValue("maxZoomCount",value)},enumerable:true,configurable:true});Component.prototype._systemCheckIfValidate=function(){if(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid){return false}else{return true}};Component.prototype.asFunction=function(field){return field=="interpolationEasing"||field=="rangeChangeEasing"||_super.prototype.asIs.call(this,field)};return Component}(Container);registry.registeredClasses["Component"]=Component;var Label=function(_super){__extends(Label,_super);function Label(){var _this=_super.call(this)||this;_this.isOversized=false;_this.className="Label";_this.fill=(new InterfaceColorSet).getFor("text");_this.wrap=false;_this.truncate=false;_this.fullWords=true;_this.ellipsis="";_this.textAlign="start";_this.textValign="top";_this.layout="absolute";_this.baseLineRatio=-.27;_this._positionPrecision=1;_this.events.on("maxsizechanged",(function(){if(_this.inited){_this.handleMaxSize()}}),_this,false);_this.events.once("validated",_this.handleValidate,_this,false);_this.applyTheme();return _this}Label.prototype.afterDraw=function(){_super.prototype.afterDraw.call(this);this.validatePosition()};Label.prototype.setPaper=function(paper){var changed=_super.prototype.setPaper.call(this,paper);if(changed){this.hardInvalidate()}return changed};Label.prototype.handleValidate=function(){if((this.currentText||this.text)&&(this.bbox.width==0||this.bbox.height==0)){registry.events.once("exitframe",this.hardInvalidate,this)}};Label.prototype.handleMaxSize=function(){if(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized){this.invalidate()}};Label.prototype.arrange=function(){};Label.prototype.updateCurrentText=function(){var output,text;if(isNotEmpty(this.html)&&this.paper.supportsForeignObject()){output="html";text=this.html}else{output="svg";text=this.text}if(isObject$4(text)){text=text.toString()}if(hasValue(text)&&text!==""){text=this.populateString(text,this.dataItem)}if(output=="html"){if(this._adapterO){text=this._adapterO.apply("htmlOutput",text)}}else{if(this._adapterO){text=this._adapterO.apply("textOutput",text)}}var changed=text!=this.currentText||output!=this._currentFormat;this.currentText=text;this._currentFormat=output;return changed};Label.prototype.hardInvalidate=function(){this._prevStatus="";this.invalidate()};Label.prototype.getLineBBox=function(lineInfo){var element=lineInfo&&lineInfo.element;var node=element&&element.node;if(node&&node.parentNode){lineInfo.bbox=element.getBBox()}};Label.prototype.draw=function(){_super.prototype.draw.call(this);var oldW=this.bbox.width;var oldH=this.bbox.height;var topParent=this.topParent;if(topParent){if(!topParent.maxWidth||!topParent.maxHeight){topParent.events.once("maxsizechanged",this.hardInvalidate,this,false);return}}var maxWidth=max$2(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0);var maxHeight=max$2(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0);var status=maxHeight+","+maxWidth+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(!this.updateCurrentText()&&this.inited&&this._prevStatus==status){return}this._measuredWidth=0;this._measuredHeight=0;this.isOversized=false;var output=this._currentFormat;var text=this.currentText;if(!hasValue(text)||text==""){this.element.attr({display:"none"});return}var lines=text.split("\n");this._prevStatus=status;this.textAlign=this.textAlign;var display=this.group.getAttr("display");if(display=="none"){this.group.removeAttr("display")}if(this.textPathElement){this.textPathElement.removeChildren()}if(output==="svg"){this.element.removeAttr("display");var group=this.element;this.resetBBox();var currentHeight=0;var currentFormat="";for(var i=0;i<lines.length;i++){var line=lines[i];if(line==""){var tempElement=this.getSVGLineElement("",0);tempElement.add(this.getSvgElement(".",getTextFormatter().translateStyleShortcuts(currentFormat)));group.add(tempElement);var offset=Math.ceil(tempElement.getBBox().height);if(offset>0){currentHeight+=offset}group.removeElement(tempElement);var lineInfo_1=this.getLineInfo(i);if(lineInfo_1){lineInfo_1.text="";lineInfo_1.element.textContent=""}continue}var chunks=getTextFormatter().chunk(line,null,this.ignoreFormatting);var currentLineHeight=0;var firstChunk=true;var skipTextChunks=false;var lineInfo=this.getLineInfo(i);if(lineInfo){lineInfo.text="";lineInfo.element.textContent=""}else{lineInfo={text:"",element:this.getSVGLineElement("",0),complex:false};group.add(lineInfo.element)}lineInfo.element.removeAttr("display");lineInfo.element.removeChildren();if(this.textPathElement){lineInfo.element.add(this.textPathElement)}for(var x=0;x<chunks.length;x++){if(x){lineInfo.complex=true}var chunk=chunks[x];if(chunk.type==="format"){currentFormat=chunk.text}else{if(skipTextChunks){continue}lineInfo.text=chunk.text;lineInfo.style=getTextFormatter().translateStyleShortcuts(currentFormat);if(this.textPathElement){this.getSvgElement(lineInfo.text,lineInfo.style,this.textPathElement)}else{this.getSvgElement(lineInfo.text,lineInfo.style,lineInfo.element)}this.getLineBBox(lineInfo);lineInfo.bbox.width=Math.ceil(lineInfo.bbox.width);if(currentLineHeight<lineInfo.bbox.height){currentLineHeight=lineInfo.bbox.height}if((this.wrap||this.truncate)&&lineInfo.bbox.width>maxWidth){this.isOversized=true;var lineText=lineInfo.element.textContent;var avgCharWidth=lineInfo.bbox.width/lineText.length;var excessChars=min$2(Math.ceil((lineInfo.bbox.width-maxWidth)/avgCharWidth),lineText.length);if(this.truncate){var addEllipsis=false;var node_1=lineInfo.element.node;if(node_1&&node_1.childNodes){for(var e=lineInfo.element.node.childNodes.length-1;e>=0;e--){var node_2=lineInfo.element.node.childNodes[e];if(addEllipsis&&lineInfo.bbox.width<=maxWidth){node_2.textContent+=" "+this.ellipsis;lineInfo.bbox=lineInfo.element.getBBox();lineInfo.bbox.width=Math.floor(lineInfo.bbox.width);if(lineInfo.bbox.width<=maxWidth){break}}addEllipsis=false;var elementText=node_2.textContent;lineText=lineInfo.element.textContent;excessChars=min$2(Math.ceil((lineInfo.bbox.width-maxWidth)/avgCharWidth),lineText.length);while(lineInfo.bbox.width>maxWidth&&excessChars<=lineText.length&&excessChars>0){var maxChars=max$2(lineText.length-excessChars-this.ellipsis.length,1);if(maxChars<=1){excessChars=0;if(e>0){addEllipsis=true;lineInfo.element.node.removeChild(node_2)}}elementText=truncateWithEllipsis(elementText,maxChars,this.ellipsis,this.fullWords,this.rtl);if(elementText.length>maxChars&&this.fullWords){elementText=truncateWithEllipsis(elementText,maxChars,this.ellipsis,false,this.rtl)}node_2.textContent=elementText;lineInfo.bbox=lineInfo.element.getBBox();lineInfo.bbox.width=Math.floor(lineInfo.bbox.width);excessChars=Math.ceil(excessChars*1.1)}skipTextChunks=true}}}else{var node_3=lineInfo.element.node;if(node_3){var lastNode=lineInfo.element.node.lastChild;var splitLines=void 0;while(lineInfo.bbox.width>maxWidth&&excessChars<=lineText.length&&excessChars>0){var maxChars=max$2(chunk.text.length-excessChars,1);if(firstChunk){splitLines=splitTextByCharCount(chunk.text,maxChars,true,this.rtl)}else{splitLines=splitTextByCharCount(chunk.text,maxChars,true,this.rtl,false);if(splitLines[0].length>maxChars||maxChars===1){lineInfo.element.node.removeChild(lastNode);excessChars=0}}if(excessChars>0){var lineText_1=splitLines.shift();if(firstChunk){lineText_1=trim(lineText_1)}lastNode.textContent=getTextFormatter().cleanUp(lineText_1)}lineInfo.bbox=lineInfo.element.getBBox();lineInfo.bbox.width=Math.floor(lineInfo.bbox.width);excessChars++}if(splitLines.length>0){var restOfLine="";if(hasValue(splitLines)){if(this.rtl){restOfLine+=splitLines.join("")+currentFormat}else{restOfLine+=currentFormat+splitLines.join("").replace(/([\[\]]{1})/g,"$1$1")}}for(var c=x+1;c<chunks.length;c++){if(chunks[c].type=="value"){restOfLine+=chunks[c].text.replace(/([\[\]]{1})/g,"$1$1")}else{restOfLine+=chunks[c].text}}lines.splice(i+1,0,restOfLine)}skipTextChunks=true}}}if(this.bbox.width<lineInfo.bbox.width){this.bbox.width=lineInfo.bbox.width}this.bbox.height=currentHeight+currentLineHeight;if(!this.textPathElement){lineInfo.element.attr({x:"0",y:currentHeight+currentLineHeight,dy:round$1(this.baseLineRatio*currentLineHeight,3).toString()})}else{lineInfo.element.attr({dy:-this.paddingBottom.toString()})}firstChunk=false}}var node=lineInfo.element.node;if(node){var lastNode=node.lastChild;if(lastNode){lastNode.textContent=this.rtl?ltrim(lastNode.textContent):rtrim(lastNode.textContent)}}currentHeight+=currentLineHeight;this.addLineInfo(lineInfo,i)}this.maybeHideOversized();this.measureFailed=false;if(this.bbox.width==0||this.bbox.height==0){this.measureFailed=true}this._measuredWidth=round$1(max$2(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight));this._measuredHeight=round$1(max$2(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom));this.alignSVGText();this.bbox.width=this._measuredWidth;this.bbox.height=this._measuredHeight;if(oldH!=this._measuredHeight||oldW!=this._measuredWidth){this.dispatch("transformed")}this.hideUnused(lines.length)}else{this.element.removeAttr("display");this.resetBBox();var group=this.element;group.removeChildren();this.setCache("lineInfo",[],0);var fo=this.paper.foreignObject();group.add(fo);if(this.maxWidth){fo.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight})}if(this.maxHeight){fo.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom})}var lineElement=this.getHTMLLineElement(text);fo.node.appendChild(lineElement);lineElement.style.display="inline-block";var clientWidth=lineElement.clientWidth;var clientHeight=lineElement.clientHeight;lineElement.style.display="block";this._bbox={x:0,y:0,width:clientWidth,height:clientHeight};fo.attr({width:clientWidth+1,height:clientHeight});this.maybeHideOversized();this._measuredWidth=max$2(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight);this._measuredHeight=max$2(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);this.bbox.width=this._measuredWidth;this.bbox.height=this._measuredHeight;if(this.truncate){lineElement.style.overflow="hidden"}if(clientWidth>maxWidth||clientHeight>maxHeight){this.isOversized=true}}this.setStyles();this.updateCenter();this.updateBackground();if(display=="none"){this.group.attr({display:"none"})}if(this.pathElement){this.paper.appendDef(this.pathElement)}};Label.prototype.maybeHideOversized=function(){if(this.hideOversized){if(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height){this.element.attr({display:"none"});this.isOversized=true}else{this.element.removeAttr("display");this.isOversized=false}}};Label.prototype.alignSVGText=function(){var group=this.element;var children=group.node.children||group.node.childNodes;if(!children||children&&children.length==0){return}var width=this._measuredWidth;var height=this._measuredHeight;if(this.rtl){group.attr({direction:"rtl"})}else{group.removeAttr("direction")}for(var i=children.length-1;i>=0;i--){var node=children[i];node.setAttribute("text-anchor",this.textAlign);if(this.textPathElement){node.removeAttribute("x");node.removeAttribute("y")}else{switch(this.textAlign){case"middle":node.setAttribute("x",(width/2).toString()+"px");break;case"end":if(this.rtl);else{node.setAttribute("x",width.toString())}break;default:if(this.rtl){node.setAttribute("x",width.toString())}else{node.removeAttribute("text-anchor")}break}var y=toNumber$1(node.getAttribute("y"));switch(this.textValign){case"middle":node.setAttribute("y",((y||0)+(height-this.bbox.height)/2).toString());break;case"bottom":node.setAttribute("y",((y||0)+height-this.bbox.height).toString());break;default:node.setAttribute("y",(y||0).toString());break}}}};Label.prototype.getSVGLineElement=function(text,y){var element=this.paper.addGroup("text");element.textContent=text;element.attr({x:"0"});if(hasValue(y)){element.attr({y:y.toString()})}if(this.truncate||this.wrap){element.attr({overflow:"hidden"})}return element};Object.defineProperty(Label.prototype,"rtl",{get:function(){if(hasValue(this._rtl)){return this._rtl}else if(this._topParent){return this._topParent.rtl}return false},set:function(value){value=toBoolean(value);this._rtl=value;if(this.element){this.alignSVGText()}},enumerable:true,configurable:true});Label.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}};Label.prototype.getHTMLLineElement=function(text){var div=document.createElement("div");div.innerHTML=text;switch(this.textAlign){case"middle":div.style.textAlign="center";break;case"end":div.style.textAlign="right";break}if(this.wrap){div.style.wordWrap="break-word"}else{div.style.whiteSpace="nowrap"}if(this.rtl){div.style.direction="rtl"}if(hasValue(this.fill)){div.style.color=this.fill.toString()}return div};Label.prototype.setStyles=function(){var group=this.element;if(!this.selectable||this.draggable||this.resizable||this.swipeable){group.addStyle({webkitUserSelect:"none",msUserSelect:"none"})}else if(this.selectable){group.removeStyle("webkitUserSelect");group.removeStyle("msUserSelect")}};Label.prototype.hideUnused=function(index){this.initLineCache();var lines=this.getCache("lineInfo");if(lines.length>=index){for(var i=index;i<lines.length;i++){var line=lines[i];if(line&&line.element){line.element.attr({display:"none"})}}}};Object.defineProperty(Label.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(value){this.setPropertyValue("text",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(value){if(this.setPropertyValue("path",value,true)){if(this.pathElement){this.pathElement.dispose()}if(this.textPathElement){this.textPathElement.dispose()}this.pathElement=this.paper.add("path");this.pathElement.attr({d:value});this.pathElement.attr({id:"text-path-"+this.uid});this._disposers.push(this.pathElement);this.textPathElement=this.paper.addGroup("textPath");this.textPathElement.attrNS(XLINK,"xlink:href","#text-path-"+this.uid);this.textPathElement.attr({path:value});this._disposers.push(this.textPathElement);this.hardInvalidate()}},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(value){this.setPropertyValue("locationOnPath",value);if(this.textPathElement){this.textPathElement.attr({startOffset:value*100+"%"})}},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(value){this.setPropertyValue("baseLineRatio",value)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(value){this.resetBBox();this.setPropertyValue("wrap",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(value){this.resetBBox();this.setPropertyValue("truncate",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(value){this.setPropertyValue("fullWords",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(value){this.setPropertyValue("ellipsis",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(value){this.setPropertyValue("selectable",value,true);this.setStyles()},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(value){this.setPropertyValue("textAlign",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(value){this.setPropertyValue("textValign",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(value){this.setPropertyValue("html",value,true);if(!hasValue(value)){var group=this.element;group.removeChildrenByTag("foreignObject")}},enumerable:true,configurable:true});Label.prototype.setFill=function(value){_super.prototype.setFill.call(this,value);if(this.html){var group=this.element;var divs=group.node.getElementsByTagName("div");for(var i=0;i<divs.length;i++){var div=divs[i];if(hasValue(this.fill)){div.style.color=this.fill.toString()}}}};Object.defineProperty(Label.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(value){this.setPropertyValue("hideOversized",value,true)},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(value){this.setPropertyValue("ignoreFormatting",value,true)},enumerable:true,configurable:true});Label.prototype.measureElement=function(){};Label.prototype.getLineInfo=function(index){this.initLineCache();var lines=this.getCache("lineInfo");return lines.length>index?lines[index]:undefined};Label.prototype.addLineInfo=function(line,index){this.initLineCache();this.getCache("lineInfo")[index]=line};Label.prototype.initLineCache=function(){if(!hasValue(this.getCache("lineInfo"))){this.setCache("lineInfo",[],0)}};Label.prototype.setDataItem=function(dataItem){if(this._sourceDataItemEvents){this._sourceDataItemEvents.dispose()}if(dataItem){this._sourceDataItemEvents=new MultiDisposer([dataItem.events.on("valuechanged",this.invalidate,this,false),dataItem.events.on("workingvaluechanged",this.invalidate,this,false),dataItem.events.on("calculatedvaluechanged",this.invalidate,this,false),dataItem.events.on("propertychanged",this.invalidate,this,false)])}_super.prototype.setDataItem.call(this,dataItem)};Object.defineProperty(Label.prototype,"availableWidth",{get:function(){return hasValue(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:true,configurable:true});Object.defineProperty(Label.prototype,"availableHeight",{get:function(){return hasValue(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:true,configurable:true});Label.prototype.getSvgElement=function(text,style,parent){var element=this.paper.add("tspan");element.textContent=text;if(style){{element.node.setAttribute("style",style)}}if(parent){parent.add(element)}return element};Label.prototype.deepInvalidate=function(){_super.prototype.deepInvalidate.call(this);this.hardInvalidate()};Object.defineProperty(Label.prototype,"readerTitle",{get:function(){var title=this.getPropertyValue("readerTitle");if(!title){title=this.populateString(plainText(isNotEmpty(this.html)?this.html:this.text))}else if(this.dataItem){title=this.populateString(title)}return title},set:function(value){value=toText(value);if(this.setPropertyValue("readerTitle",value)){this.applyAccessibility()}},enumerable:true,configurable:true});return Label}(Container);registry.registeredClasses["Label"]=Label;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(target,stateId){if(target instanceof Label&&target.parent&&target.parent.isBaseSprite){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var RoundedRectangle=function(_super){__extends(RoundedRectangle,_super);function RoundedRectangle(){var _this=_super.call(this)||this;_this.className="RoundedRectangle";_this.element=_this.paper.add("path");_this.cornerRadius(3,3,3,3);_this.applyTheme();return _this}RoundedRectangle.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.innerWidth;var h=this.innerHeight;if(isNumber$1(w)&&isNumber$1(h)){var minSide=min$2(w,h)/2;var cornerRadiusTopLeft=relativeToValue(this.cornerRadiusTopLeft,minSide);var cornerRadiusTopRight=relativeToValue(this.cornerRadiusTopRight,minSide);var cornerRadiusBottomRight=relativeToValue(this.cornerRadiusBottomRight,minSide);var cornerRadiusBottomLeft=relativeToValue(this.cornerRadiusBottomLeft,minSide);var maxcr=min$2(Math.abs(w/2),Math.abs(h/2));var crtl=fitToRange(cornerRadiusTopLeft,0,maxcr);var crtr=fitToRange(cornerRadiusTopRight,0,maxcr);var crbr=fitToRange(cornerRadiusBottomRight,0,maxcr);var crbl=fitToRange(cornerRadiusBottomLeft,0,maxcr);var lineT="M"+crtl+",0 L"+(w-crtr)+",0";var lineB=" L"+crbl+","+h;var lineL=" L0,"+crtl;var lineR=" L"+w+","+(h-crbr);var arcTR=" a"+crtr+","+crtr+" 0 0 1 "+crtr+","+crtr;var arcBR=" a"+crbr+","+crbr+" 0 0 1 -"+crbr+","+crbr;var arcBL=" a"+crbl+","+crbl+" 0 0 1 -"+crbl+",-"+crbl;var arcTL=" a"+crtl+","+crtl+" 0 0 1 "+crtl+",-"+crtl;var path=lineT+arcTR+lineR+arcBR+lineB+arcBL+lineL+arcTL+" Z";this.path=path}};RoundedRectangle.prototype.cornerRadius=function(tl,tr,bl,br){this.cornerRadiusTopLeft=tl;this.cornerRadiusTopRight=tr;this.cornerRadiusBottomLeft=bl;this.cornerRadiusBottomRight=br};Object.defineProperty(RoundedRectangle.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(value){this.setPercentProperty("cornerRadiusTopLeft",value,true)},enumerable:true,configurable:true});Object.defineProperty(RoundedRectangle.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(value){this.setPercentProperty("cornerRadiusTopRight",value,true)},enumerable:true,configurable:true});Object.defineProperty(RoundedRectangle.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(value){this.setPercentProperty("cornerRadiusBottomRight",value,true)},enumerable:true,configurable:true});Object.defineProperty(RoundedRectangle.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(value){this.setPercentProperty("cornerRadiusBottomLeft",value,true)},enumerable:true,configurable:true});RoundedRectangle.prototype.measureElement=function(){};Object.defineProperty(RoundedRectangle.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}if(this.isMeasured){return{x:0,y:0,width:this.innerWidth,height:this.innerHeight}}else{return{x:0,y:0,width:0,height:0}}},enumerable:true,configurable:true});return RoundedRectangle}(Sprite);registry.registeredClasses["RoundedRectangle"]=RoundedRectangle;var Button=function(_super){__extends(Button,_super);function Button(){var _this=_super.call(this)||this;_this.className="Button";_this.tooltipY=0;_this.iconPosition="left";_this.layout="horizontal";_this.contentAlign="center";_this.contentValign="middle";_this.padding(8,16,8,16);_this.setStateOnChildren=true;var interfaceColors=new InterfaceColorSet;var background=_this.background;background.fill=interfaceColors.getFor("secondaryButton");background.stroke=interfaceColors.getFor("secondaryButtonStroke");background.fillOpacity=1;background.strokeOpacity=1;background.cornerRadius(3,3,3,3);_this.label=new Label;_this.label.fill=interfaceColors.getFor("secondaryButtonText");_this.label.shouldClone=false;var hoverState=background.states.create("hover");hoverState.properties.fillOpacity=1;hoverState.properties.fill=interfaceColors.getFor("secondaryButtonHover");var downState=background.states.create("down");downState.transitionDuration=100;downState.properties.fill=interfaceColors.getFor("secondaryButtonDown");downState.properties.fillOpacity=1;_this.role="button";_this.focusable=true;_this.applyTheme();return _this}Object.defineProperty(Button.prototype,"icon",{get:function(){return this._icon},set:function(icon){var currentIcon=this._icon;if(currentIcon){currentIcon.parent=undefined}if(icon){this._icon=icon;icon.parent=this;icon.interactionsEnabled=false;icon.shouldClone=false;this.iconPosition=this.iconPosition;this._disposers.push(icon)}},enumerable:true,configurable:true});Object.defineProperty(Button.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(position){this.setPropertyValue("iconPosition",position);if(this.icon){if(position=="left"){this.icon.toBack()}else{this.icon.toFront()}}},enumerable:true,configurable:true});Object.defineProperty(Button.prototype,"label",{get:function(){return this._label},set:function(label){if(this._label){this.removeDispose(this._label)}this._label=label;if(label){label.parent=this;label.interactionsEnabled=false;this._disposers.push(this._label)}},enumerable:true,configurable:true});Button.prototype.createBackground=function(){return new RoundedRectangle};Button.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(source.label){this.label.copyFrom(source.label)}if(source.icon){this.icon=source.icon.clone()}};return Button}(Container);registry.registeredClasses["Button"]=Button;var Circle=function(_super){__extends(Circle,_super);function Circle(){var _this=_super.call(this)||this;_this.className="Circle";_this.element=_this.paper.add("circle");_this.setPercentProperty("radius",percent(100));_this.setPropertyValue("horizontalCenter","middle");_this.setPropertyValue("verticalCenter","middle");_this.applyTheme();return _this}Circle.prototype.draw=function(){_super.prototype.draw.call(this);this.element.attr({r:this.pixelRadius})};Object.defineProperty(Circle.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Circle.prototype,"pixelRadius",{get:function(){return relativeToValue(this.radius,min$2(this.innerWidth/2,this.innerHeight/2))},enumerable:true,configurable:true});Circle.prototype.measureElement=function(){var pixelRadius=this.pixelRadius;this._bbox={x:-pixelRadius,y:-pixelRadius,width:pixelRadius*2,height:pixelRadius*2}};return Circle}(Sprite);registry.registeredClasses["Circle"]=Circle;var Ellipse=function(_super){__extends(Ellipse,_super);function Ellipse(){var _this=_super.call(this)||this;_this.className="Ellipse";_this.element=_this.paper.add("ellipse");_this.applyTheme();return _this}Ellipse.prototype.draw=function(){_super.prototype.draw.call(this);this.element.attr({rx:this.radius});this.element.attr({ry:this.radiusY})};Object.defineProperty(Ellipse.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(value){this.height=value*2;this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(Ellipse.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(value){this.width=value*2;this.invalidate()},enumerable:true,configurable:true});return Ellipse}(Circle);registry.registeredClasses["Ellipse"]=Ellipse;var Image$1=function(_super){__extends(Image,_super);function Image(){var _this=_super.call(this)||this;_this.className="Image";_this.element=_this.paper.add("image");_this.applyTheme();_this.width=50;_this.height=50;return _this}Image.prototype.draw=function(){_super.prototype.draw.call(this);if(this.href){var width=this.innerWidth;var height=this.innerHeight;if(isNumber$1(this.widthRatio)){width=height*this.widthRatio;this.width=width}if(isNumber$1(this.heightRatio)){height=width*this.heightRatio;this.height=height}this.element.attr({width,height});this.element.attrNS(XLINK,"xlink:href",this.href)}};Object.defineProperty(Image.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(value){this.setPropertyValue("href",value,true)},enumerable:true,configurable:true});Object.defineProperty(Image.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(value){this.setPropertyValue("widthRatio",value,true)},enumerable:true,configurable:true});Object.defineProperty(Image.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(value){this.setPropertyValue("heightRatio",value,true)},enumerable:true,configurable:true});Object.defineProperty(Image.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:true,configurable:true});return Image}(Sprite);registry.registeredClasses["Image"]=Image$1;var Line=function(_super){__extends(Line,_super);function Line(){var _this=_super.call(this)||this;_this.className="Line";_this.element=_this.paper.add("line");_this.fill=color();_this.x1=0;_this.y1=0;_this.applyTheme();return _this}Line.prototype.draw=function(){_super.prototype.draw.call(this);if(this.x1==this.x2||this.y1==this.y2){this.pixelPerfect=true}else{this.pixelPerfect=false}this.x1=this.x1;this.x2=this.x2;this.y1=this.y1;this.y2=this.y2};Object.defineProperty(Line.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(value){if(!isNumber$1(value)){value=0}var delta=0;if(this.pixelPerfect&&this.stroke instanceof LinearGradient){delta=1e-5}this.setPropertyValue("x1",value,true);this.element.attr({x1:value+delta})},enumerable:true,configurable:true});Object.defineProperty(Line.prototype,"x2",{get:function(){var value=this.getPropertyValue("x2");if(!isNumber$1(value)){value=this.pixelWidth}return value},set:function(value){if(!isNumber$1(value)){value=0}this.setPropertyValue("x2",value,true);this.element.attr({x2:value})},enumerable:true,configurable:true});Object.defineProperty(Line.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(value){if(!isNumber$1(value)){value=0}var delta=0;if(this.pixelPerfect&&this.stroke instanceof LinearGradient){delta=1e-5}this.setPropertyValue("y1",value,true);this.element.attr({y1:value+delta})},enumerable:true,configurable:true});Object.defineProperty(Line.prototype,"y2",{get:function(){var value=this.getPropertyValue("y2");if(!isNumber$1(value)){value=this.pixelHeight}return value},set:function(value){if(!isNumber$1(value)){value=0}this.setPropertyValue("y2",value,true);this.element.attr({y2:value})},enumerable:true,configurable:true});Line.prototype.positionToPoint=function(position){var point1={x:this.x1,y:this.y1};var point2={x:this.x2,y:this.y2};var point=getMidPoint(point1,point2,position);var angle=getAngle(point1,point2);return{x:point.x,y:point.y,angle}};return Line}(Sprite);registry.registeredClasses["Line"]=Line;var PointedShape=function(_super){__extends(PointedShape,_super);function PointedShape(){var _this=_super.call(this)||this;_this.className="PointedShape";_this.pointerBaseWidth=15;_this.pointerLength=10;_this.pointerY=0;_this.pointerX=0;_this.applyTheme();return _this}PointedShape.prototype.draw=function(){_super.prototype.draw.call(this);if(!isNumber$1(this.pointerX)){this.pointerX=this.pixelWidth/2}if(!isNumber$1(this.pointerY)){this.pointerY=this.pixelHeight+10}};Object.defineProperty(PointedShape.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(value){this.setPropertyValue("pointerBaseWidth",value,true)},enumerable:true,configurable:true});Object.defineProperty(PointedShape.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(value){this.setPropertyValue("pointerLength",value,true)},enumerable:true,configurable:true});Object.defineProperty(PointedShape.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(value){this.setPropertyValue("pointerX",value,true)},enumerable:true,configurable:true});Object.defineProperty(PointedShape.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(value){this.setPropertyValue("pointerY",value,true)},enumerable:true,configurable:true});return PointedShape}(Sprite);var PointedRectangle=function(_super){__extends(PointedRectangle,_super);function PointedRectangle(){var _this=_super.call(this)||this;_this.className="PointedRectangle";_this.element=_this.paper.add("path");_this.cornerRadius=6;_this.applyTheme();return _this}PointedRectangle.prototype.draw=function(){_super.prototype.draw.call(this);var cr=this.cornerRadius;var w=this.innerWidth;var h=this.innerHeight;if(w>0&&h>0){var x=this.pointerX;var y=this.pointerY;var bwh=this.pointerBaseWidth/2;var maxcr=min$2(w/2,h/2);var crtl=fitToRange(cr,0,maxcr);var crtr=fitToRange(cr,0,maxcr);var crbr=fitToRange(cr,0,maxcr);var crbl=fitToRange(cr,0,maxcr);var xtl=0;var ytl=0;var xtr=w;var ytr=0;var xbr=w;var ybr=h;var xbl=0;var ybl=h;var lineT=void 0;var lineR=void 0;var lineB=void 0;var lineL=void 0;var d1=(x-xtl)*(ybr-ytl)-(y-ytl)*(xbr-xtl);var d2=(x-xbl)*(ytr-ybl)-(y-ybl)*(xtr-xbl);if(d1>0&&d2>0){var stemX=fitToRange(x,crtl+bwh,w-bwh-crtr);y=fitToRange(y,-Infinity,0);lineT="M"+crtl+",0 L"+(stemX-bwh)+",0 L"+x+","+y+" L"+(stemX+bwh)+",0 L"+(w-crtr)+",0"}else{lineT="M"+crtl+",0 L"+(w-crtr)+",0"}if(d1<0&&d2<0){var stemX=fitToRange(x,crbl+bwh,w-bwh-crbr);y=fitToRange(y,h,Infinity);lineB=" L"+(w-crbr)+","+h+" L"+(stemX+bwh)+","+h+" L"+x+","+y+" L"+(stemX-bwh)+","+h+" L"+crbl+","+h}else{lineB=" L"+crbl+","+h}if(d1<0&&d2>0){var stemY=fitToRange(y,crtl+bwh,h-crbl-bwh);x=fitToRange(x,-Infinity,0);lineL=" L0,"+(h-crbl)+" L0,"+(stemY+bwh)+" L"+x+","+y+" L0,"+(stemY-bwh)+" L0,"+crtl}else{lineL=" L0,"+crtl}if(d1>0&&d2<0){var stemY=fitToRange(y,crtr+bwh,h-bwh-crbr);x=fitToRange(x,w,Infinity);lineR=" L"+w+","+crtr+" L"+w+","+(stemY-bwh)+" L"+x+","+y+" L"+w+","+(stemY+bwh)+" L"+w+","+(h-crbr)}else{lineR=" L"+w+","+(h-crbr)}var arcTR=" a"+crtr+","+crtr+" 0 0 1 "+crtr+","+crtr;var arcBR=" a"+crbr+","+crbr+" 0 0 1 -"+crbr+","+crbr;var arcBL=" a"+crbl+","+crbl+" 0 0 1 -"+crbl+",-"+crbl;var arcTL=" a"+crtl+","+crtl+" 0 0 1 "+crtl+",-"+crtl;this.path=lineT+arcTR+lineR+arcBR+lineB+arcBL+lineL+arcTL}};Object.defineProperty(PointedRectangle.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(value){this.setPropertyValue("cornerRadius",value,true)},enumerable:true,configurable:true});return PointedRectangle}(PointedShape);function polyline(points){var path=lineTo(points[0]);var prevPoint={x:0,y:0};var minStep=options.minPolylineStep;if(!isNumber$1(minStep)){minStep=.5}for(var i=0,len=points.length;i<len;i++){var point=points[i];if(getDistance(point,prevPoint)>minStep){path+=lineTo(point);prevPoint=point}}return path}function moveTo(point){return" M"+round$1(point.x,4)+","+round$1(point.y,4)+" "}function lineTo(point){return" L"+round$1(point.x,4)+","+round$1(point.y,4)+" "}function quadraticCurveTo(point,controlPoint){return" Q"+round$1(controlPoint.x,4)+","+round$1(controlPoint.y,4)+" "+round$1(point.x,4)+","+round$1(point.y,4)}function cubicCurveTo(point,controlPointA,controlPointB){return" C"+round$1(controlPointA.x,4)+","+round$1(controlPointA.y,4)+" "+round$1(controlPointB.x,4)+","+round$1(controlPointB.y,4)+" "+round$1(point.x,4)+","+round$1(point.y,4)}function closePath(){return" Z"}function arcTo(startAngle,arc,radius,radiusY){if(arc==0){return""}if(!isNumber$1(radiusY)){radiusY=radius}var path="";var c=",";var segments=Math.ceil(Math.abs(arc)/180);var l=1;if(arc<0){l=0}var pax=0;var pay=0;var cx=-cos(startAngle)*radius;var cy=-sin(startAngle)*radiusY;if(arc<.5&&radius>3e3){var endAngle=startAngle+arc;var ax=round$1(cos(endAngle)*radius,4);var ay=round$1(sin(endAngle)*radiusY,4);return lineTo({x:ax,y:ay})}for(var i=0;i<segments;i++){var endAngle=startAngle+arc/segments*(i+1);var ax=round$1(cos(endAngle)*radius+cx-pax,4);var ay=round$1(sin(endAngle)*radiusY+cy-pay,4);path+=" a"+radius+c+radiusY+c+0+c+0+c+l+c+ax+c+ay;pax=ax;pay=ay}return path}function arc(startAngle,arc,radius,innerRadius,radiusY,cornerRadius,innerCornerRadius){if(arc==0){return""}if(!isNumber$1(innerRadius)){innerRadius=0}if(radius==0&&innerRadius<=0){return""}if(radius<innerRadius){var temp=radius;radius=innerRadius;innerRadius=temp;if(isNumber$1(radiusY)){radiusY=radiusY/innerRadius*radius}}arc=min$2(arc,360);if(arc==360){cornerRadius=0;innerCornerRadius=0}var endAngle=startAngle+arc;var crSin=sin(min$2(arc,45)/2);radiusY=isNumber$1(radiusY)?radiusY:radius;cornerRadius=cornerRadius||0;innerCornerRadius=isNumber$1(innerCornerRadius)?innerCornerRadius:cornerRadius;var innerRadiusY=radiusY/radius*innerRadius;var cornerRadiusY=radiusY/radius*cornerRadius;var innerCornerRadiusY=radiusY/radius*innerCornerRadius;cornerRadius=fitToRange(cornerRadius,0,(radius-innerRadius)/2);cornerRadiusY=fitToRange(cornerRadiusY,0,(radiusY-innerRadiusY)/2);innerCornerRadius=fitToRange(innerCornerRadius,0,(radius-innerRadius)/2);innerCornerRadiusY=fitToRange(innerCornerRadiusY,0,(radiusY-innerRadiusY)/2);cornerRadius=round$1(fitToRange(cornerRadius,0,radius*crSin),4);cornerRadiusY=round$1(fitToRange(cornerRadiusY,0,radiusY*crSin),4);innerCornerRadius=round$1(fitToRange(innerCornerRadius,0,innerRadius*crSin),4);innerCornerRadiusY=round$1(fitToRange(innerCornerRadiusY,0,innerRadiusY*crSin),4);var crAngle=Math.asin(cornerRadius/radius/2)*DEGREES*2;var crAngleY=Math.asin(cornerRadiusY/radiusY/2)*DEGREES*2;if(innerRadius<innerCornerRadius){innerRadius=innerCornerRadius}if(innerRadiusY<innerCornerRadiusY){innerRadiusY=innerCornerRadiusY}var crInnerAngle=Math.asin(innerCornerRadius/innerRadius/2)*DEGREES*2;var crInnerAngleY=Math.asin(innerCornerRadiusY/innerRadiusY/2)*DEGREES*2;if(!isNumber$1(crInnerAngle)){crInnerAngle=0}if(!isNumber$1(crInnerAngleY)){crInnerAngleY=0}var middleAngle=startAngle+arc/2;var mPoint={x:round$1(cos(middleAngle)*innerRadius,4),y:sin(middleAngle)*innerRadiusY};var a0={x:cos(startAngle)*(innerRadius+innerCornerRadius),y:sin(startAngle)*(innerRadiusY+innerCornerRadiusY)};var b0={x:cos(startAngle)*(radius-cornerRadius),y:sin(startAngle)*(radiusY-cornerRadiusY)};var c0={x:cos(endAngle)*(radius-cornerRadius),y:sin(endAngle)*(radiusY-cornerRadiusY)};var d0={x:cos(endAngle)*(innerRadius+innerCornerRadius),y:sin(endAngle)*(innerRadiusY+innerCornerRadiusY)};var b1={x:cos(startAngle+crAngle)*radius,y:sin(startAngle+crAngleY)*radiusY};var d1={x:cos(endAngle-crInnerAngle)*innerRadius,y:sin(endAngle-crInnerAngleY)*innerRadiusY};innerCornerRadius+=innerCornerRadius*sin(crInnerAngle/2);innerCornerRadiusY+=innerCornerRadiusY*sin(crInnerAngleY/2);if(crInnerAngle>(endAngle-startAngle)/2){d1=mPoint}var path="";if(arc==360){path=moveTo(b0)}else{path=moveTo(a0);path+=lineTo(b0);path+=arcToPoint(b1,cornerRadius,cornerRadiusY,true)}path+=arcTo(startAngle+crAngle,arc-2*crAngle,radius,radiusY);if(isNumber$1(innerRadius)&&innerRadius!=0){if(arc==360&&cornerRadius==0){path+=moveTo(d0)}else{path+=arcToPoint(c0,cornerRadius,cornerRadiusY,true);path+=lineTo(d0);path+=arcToPoint(d1,innerCornerRadius,innerCornerRadiusY,true)}path+=arcTo(endAngle-crInnerAngle,-(arc-2*crInnerAngle),innerRadius,innerRadiusY);if(arc<360||cornerRadius>0){path+=arcToPoint(a0,innerCornerRadius,innerCornerRadiusY,true)}path+=lineTo(a0)}else{path+=arcToPoint(c0,cornerRadius,cornerRadiusY,true);if(arc<360){path+=lineTo(a0)}}return path}function arcToPoint(point,radius,radiusY,sweepFlag,largeArcFlag,xAxisRotation){if(radius==0){return""}xAxisRotation=xAxisRotation||0;largeArcFlag=Boolean(largeArcFlag);sweepFlag=Boolean(sweepFlag);var c=",";var sweepFlagValue=+sweepFlag;var largeArcFlagValue=+largeArcFlag;return" A"+radius+c+radiusY+c+xAxisRotation+c+largeArcFlagValue+c+sweepFlagValue+c+round$1(point.x,4)+c+round$1(point.y,4)}function rectangle(width,height,x,y){if(!isNumber$1(x)){x=0}if(!isNumber$1(y)){y=0}return moveTo({x,y})+lineTo({x:x+width,y})+lineTo({x:x+width,y:y+height})+lineTo({x,y:y+height})+closePath()}function rectToPath(rect,ccw){var c=",";var L=" L";if(ccw){return"M"+rect.x+c+rect.y+L+rect.x+c+(rect.y+rect.height)+L+(rect.x+rect.width)+c+(rect.y+rect.height)+L+(rect.x+rect.width)+c+rect.y+L+rect.x+c+rect.y}else{return"M"+rect.x+c+rect.y+L+(rect.x+rect.width)+c+rect.y+L+(rect.x+rect.width)+c+(rect.y+rect.height)+L+rect.x+c+(rect.y+rect.height)+L+rect.x+c+rect.y}}var Polyline=function(_super){__extends(Polyline,_super);function Polyline(){var _this=_super.call(this)||this;_this._distance=0;_this.className="Polyline";_this.element=_this.paper.add("path");_this.shapeRendering="auto";_this.fill=color();_this.strokeOpacity=1;_this.applyTheme();return _this}Polyline.prototype.makePath=function(){this._distance=0;var segments=this.segments;if(segments&&segments.length>0){var path="";for(var i=0,len=segments.length;i<len;i++){var points=segments[i];if(points.length>0){path+=moveTo(points[0]);for(var p=1;p<points.length;p++){var point=points[p];path+=lineTo(point);this._distance+=getDistance(points[p-1],point)}}}this.path=path}this._realSegments=segments};Object.defineProperty(Polyline.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(segments){this.setPropertyValue("segments",segments);this.makePath()},enumerable:true,configurable:true});Object.defineProperty(Polyline.prototype,"distance",{get:function(){return this._distance},enumerable:true,configurable:true});Polyline.prototype.positionToPoint=function(position){var deltaAngle=0;if(position<0){position=Math.abs(position);deltaAngle=180}var segments=this._realSegments;if(segments){var totalDistance=this.distance;var currentDistance=0;var distanceAB=void 0;var positionA=0;var positionB=0;var pointA=void 0;var pointB=void 0;for(var s=0;s<segments.length;s++){var points=segments[s];if(points.length>1){for(var p=1;p<points.length;p++){pointA=points[p-1];pointB=points[p];positionA=currentDistance/totalDistance;distanceAB=getDistance(pointA,pointB);currentDistance+=distanceAB;positionB=currentDistance/totalDistance;if(positionA<=position&&positionB>position){s=segments.length;break}}}else if(points.length==1){pointA=points[0];pointB=points[0];positionA=0;positionB=1}}if(pointA&&pointB){var positionAB=(position-positionA)/(positionB-positionA);var midPoint=getMidPoint(pointA,pointB,positionAB);return{x:midPoint.x,y:midPoint.y,angle:deltaAngle+getAngle(pointA,pointB)}}}return{x:0,y:0,angle:0}};Object.defineProperty(Polyline.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:true,configurable:true});return Polyline}(Sprite);registry.registeredClasses["Polyline"]=Polyline;var Polyarc=function(_super){__extends(Polyarc,_super);function Polyarc(){var _this=_super.call(this)||this;_this.className="Polyarc";_this.controlPointDistance=.5;_this.controlPointPosition=.5;_this.applyTheme();return _this}Polyarc.prototype.makePath=function(){this._distance=0;var segments=this.segments;if(segments&&segments.length>0){var path="";this._realSegments=[];for(var i=0,len=segments.length;i<len;i++){var points=segments[i];var realPoints=[];this._realSegments.push(realPoints);if(points.length>0){path+=moveTo(points[0]);for(var p=1;p<points.length;p++){var pointA=points[p-1];var pointB=points[p];var distanceAB=getDistance(pointB,pointA);var cpDistance=distanceAB*this.controlPointDistance;var controlPointPosition=this.controlPointPosition;var angle=-getAngle(pointA,pointB);var cpx=pointA.x+(pointB.x-pointA.x)*controlPointPosition*.5-cpDistance*sin(angle);var cpy=pointA.y+(pointB.y-pointA.y)*controlPointPosition*.5-cpDistance*cos(angle);var controlPoint1={x:cpx,y:cpy};var cpx2=pointA.x+(pointB.x-pointA.x)*controlPointPosition*1.5-cpDistance*sin(angle);var cpy2=pointA.y+(pointB.y-pointA.y)*controlPointPosition*1.5-cpDistance*cos(angle);var controlPoint2={x:cpx2,y:cpy2};path+=cubicCurveTo(pointB,controlPoint1,controlPoint2);var stepCount=Math.ceil(distanceAB);var prevPoint=pointA;if(stepCount>0){for(var i_1=0;i_1<=stepCount;i_1++){var point=getPointOnCubicCurve(pointA,pointB,controlPoint1,controlPoint2,i_1/stepCount);realPoints.push(point);this._distance+=getDistance(prevPoint,point);prevPoint=point}}else{realPoints.push(pointA)}}}}this.path=path}};Object.defineProperty(Polyarc.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(value){this.setPropertyValue("controlPointPosition",value);this.makePath()},enumerable:true,configurable:true});Object.defineProperty(Polyarc.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(value){this.setPropertyValue("controlPointDistance",value);this.makePath()},enumerable:true,configurable:true});return Polyarc}(Polyline);registry.registeredClasses["Polyarc"]=Polyarc;var Morpher=function(_super){__extends(Morpher,_super);function Morpher(morphable){var _this=_super.call(this)||this;_this._bboxes=[];_this.morphDuration=800;_this.morphEasing=cubicOut;_this.morphToSingle=true;_this.scaleRatio=1;_this.className="Morpher";_this.morphable=morphable;_this.applyTheme();return _this}Morpher.prototype.morphToPolygon=function(toPoints,duration,easing){var points=this.morphable.currentPoints;if(points&&toPoints){this.sortPoints(points);this.sortPoints(toPoints);this._morphFromPointsReal=[];this._morphToPointsReal=[];if(!hasValue(duration)){duration=this.morphDuration}if(!hasValue(easing)){easing=this.morphEasing}this._morphFromPointsReal=this.normalizePoints(toPoints,points);this._morphToPointsReal=this.normalizePoints(points,toPoints);this.morphable.currentPoints=this._morphFromPointsReal;var animation=new Animation(this,{property:"morphProgress",from:0,to:1},duration,easing);this._disposers.push(animation);animation.start();return animation}};Morpher.prototype.normalizePoints=function(pointsA,pointsB){for(var i=0,len=pointsA.length;i<len;i++){var surfaceA=pointsA[i][0];var holeA=pointsA[i][1];var bboxA=getValue$4(getBBox(surfaceA));var middleX=bboxA.x+bboxA.width;var middleY=bboxA.y+bboxA.height;if(!pointsB[i]){pointsB[i]=[]}if(surfaceA&&!pointsB[i][0]){pointsB[i][0]=[{x:middleX,y:middleY},{x:middleX,y:middleY}]}if(pointsB[i][0]){pointsB[i][0]=this.addPoints(pointsB[i][0],surfaceA.length);var distance=Infinity;var splitAt=0;for(var a=0;a<pointsB[i][0].length;a++){var newDistance=getDistance(pointsB[i][0][a],surfaceA[0]);if(newDistance<distance){splitAt=a;distance=newDistance}}var partA=pointsB[i][0].slice(0,splitAt);var partB=pointsB[i][0].slice(splitAt);pointsB[i][0]=partB.concat(partA)}if(holeA){if(!pointsB[i][1]){pointsB[i][1]=[{x:middleX,y:middleY},{x:middleX,y:middleY}]}pointsB[i][1]=this.addPoints(pointsB[i][1],holeA.length)}}return pointsB};Morpher.prototype.sortPoints=function(points){points.sort((function(a,b){var bbox1=getValue$4(getBBox(a[0]));var bbox2=getValue$4(getBBox(b[0]));if(bbox1.width*bbox1.height>bbox2.width*bbox2.height){return-1}else{return 1}}));var bboxes=[];for(var i=0,len=points.length;i<len;i++){var surface=points[i][0];if(surface){bboxes.push(getValue$4(getBBox(surface)))}}return getCommonRectangle(bboxes)};Morpher.prototype.morphToCircle=function(radius,duration,easing){var points=this.morphable.points;var commonBBox=this.sortPoints(points);this._morphFromPointsReal=[];this._morphToPointsReal=[];if(!hasValue(duration)){duration=this.morphDuration}if(!hasValue(easing)){easing=this.morphEasing}for(var i=0,len=points.length;i<len;i++){var surface=points[i][0];var hole=points[i][1];this._morphFromPointsReal[i]=[];this._morphToPointsReal[i]=[];if(surface){var toPoints=surface;var fromPoints=surface;var bbox=getValue$4(getBBox(fromPoints));if(this.morphToSingle){bbox=getValue$4(commonBBox)}var middleX=bbox.x+bbox.width/2;var middleY=bbox.y+bbox.height/2;var realRadius=radius;if(!isNumber$1(realRadius)){realRadius=Math.min(bbox.width/2,bbox.height/2)}toPoints=[];var startAngle=getAngle({x:middleX,y:middleY},surface[0]);var count=100;if(surface.length>count){count=surface.length}fromPoints=this.addPoints(surface,count);count=fromPoints.length;var angle=360/(count-1);for(var a=0;a<count;a++){var realAngle=angle*a+startAngle;var pointOnCircle={x:middleX+realRadius*cos(realAngle),y:middleY+realRadius*sin(realAngle)};toPoints[a]=pointOnCircle}if(hole&&hole.length>0){for(var i_1=0,hlen=hole.length;i_1<hlen;i_1++){toPoints.push({x:middleX,y:middleY})}}this._morphFromPointsReal[i][0]=fromPoints;this._morphToPointsReal[i][0]=toPoints}}this.morphable.currentPoints=this._morphFromPointsReal;var animation=new Animation(this,{property:"morphProgress",from:0,to:1},duration,easing);this._disposers.push(animation);animation.start();return animation};Morpher.prototype.addPoints=function(points,mustHaveCount){var addToSegmentCount=Math.round(mustHaveCount/points.length);var newPoints=[];for(var i=0,len=points.length;i<len;i++){var point0=points[i];var point1=void 0;if(i==points.length-1){point1=points[0]}else{point1=points[i+1]}newPoints.push(point0);for(var p=1;p<addToSegmentCount;p++){var percent=p/addToSegmentCount;var extraPoint={x:point0.x+(point1.x-point0.x)*percent,y:point0.y+(point1.y-point0.y)*percent};newPoints.push(extraPoint)}if(newPoints.length+points.length-i==mustHaveCount){addToSegmentCount=0}}if(newPoints.length<mustHaveCount&&points.length>0){var lastPoint=points[points.length-1];for(var p=newPoints.length;p<mustHaveCount;p++){newPoints.push({x:lastPoint.x,y:lastPoint.y})}}return newPoints};Morpher.prototype.morphToRectangle=function(width,height,duration,easing){var points=this.morphable.points;this.sortPoints(points);this._morphFromPointsReal=[];this._morphToPointsReal=[];if(!hasValue(duration)){duration=this.morphDuration}if(!hasValue(easing)){easing=this.morphEasing}for(var i=0,len=points.length;i<len;i++){var surface=points[i][0];var hole=points[i][1];this._morphFromPointsReal[i]=[];this._morphToPointsReal[i]=[];if(surface){var toPoints=surface;var fromPoints=surface;var bbox=this._bboxes[i];var x=bbox.x;var y=bbox.y;var realWidth=width;var realHeight=height;if(!isNumber$1(realWidth)){realWidth=bbox.width}if(!isNumber$1(realHeight)){realHeight=bbox.height}toPoints=[{x,y},{x:x+realWidth,y},{x:x+realWidth,y:y+realHeight},{x,y:y+realHeight}];toPoints=this.addPoints(toPoints,surface.length);if(surface.length<4){for(var i_2=surface.length;i_2<4;i_2++){toPoints.push({x:surface[i_2].x,y:surface[i_2].y})}}if(hole&&hole.length>0){var middleX=bbox.x+bbox.width/2;var middleY=bbox.y+bbox.height/2;for(var i_3=0,hlen=hole.length;i_3<hlen;i_3++){toPoints.push({x:middleX,y:middleY})}}this._morphFromPointsReal[i][0]=fromPoints;this._morphToPointsReal[i][0]=toPoints}}this.morphable.currentPoints=this._morphFromPointsReal;var animation=new Animation(this,{property:"morphProgress",from:0,to:1},duration,easing);this._disposers.push(animation);animation.start();return animation};Object.defineProperty(Morpher.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(value){this._morphProgress=value;var currentPoints=[];if(value!=null){var fromPoints=this._morphFromPointsReal;var toPoints=this._morphToPointsReal;if(fromPoints!=null&&toPoints!=null){for(var i=0,len=fromPoints.length;i<len;i++){var currentArea=[];currentPoints.push(currentArea);var surfaceFrom=fromPoints[i][0];var holeFrom=fromPoints[i][1];var surfaceTo=toPoints[i][0];var holeTo=toPoints[i][1];if(surfaceFrom&&surfaceFrom.length>0&&surfaceTo&&surfaceTo.length>0){var currentSurface=[];for(var i_4=0,slen=surfaceFrom.length;i_4<slen;i_4++){var point0=surfaceFrom[i_4];var point1=surfaceTo[i_4];var currentPoint={x:point0.x+(point1.x*this.scaleRatio-point0.x)*value,y:point0.y+(point1.y*this.scaleRatio-point0.y)*value};currentSurface.push(currentPoint)}currentArea[0]=currentSurface}if(holeFrom&&holeFrom.length>0&&holeTo&&holeTo.length>0){var currentHole=[];for(var i_5=0,hlen=holeFrom.length;i_5<hlen;i_5++){var point0=holeFrom[i_5];var point1=holeTo[i_5];var currentPoint={x:point0.x+(point1.x*this.scaleRatio-point0.x)*value,y:point0.y+(point1.y*this.scaleRatio-point0.y)*value};currentHole.push(currentPoint)}currentArea[1]=currentHole}}}}this.morphable.currentPoints=currentPoints},enumerable:true,configurable:true});Morpher.prototype.morphBack=function(duration,easing){this._morphToPointsReal=this._morphFromPointsReal;this._morphFromPointsReal=this.morphable.currentPoints;if(!hasValue(duration)){duration=this.morphDuration}if(!hasValue(easing)){easing=this.morphEasing}var animation=new Animation(this,{property:"morphProgress",from:0,to:1},duration,easing);this._disposers.push(animation);animation.start();return animation};Object.defineProperty(Morpher.prototype,"animations",{get:function(){if(!this._animations){this._animations=[];this._disposers.push(new AnimationDisposer(this._animations))}return this._animations},enumerable:true,configurable:true});return Morpher}(BaseObject);var Polygon=function(_super){__extends(Polygon,_super);function Polygon(){var _this=_super.call(this)||this;_this.className="Polygon";_this.element=_this.paper.add("path");_this.shapeRendering="auto";_this._currentPoints=[];_this.applyTheme();return _this}Object.defineProperty(Polygon.prototype,"points",{get:function(){var points=this.getPropertyValue("points");var path=this.path;if(path&&(!points||points.length==0)){var valueStr=path.slice(1,path.length-1);var segments=valueStr.split("ZM");for(var s=0;s<segments.length;s++){var segment=segments[s];if(segment.length>0){var areaHole=segment.split("M");var areaArr=areaHole[0];var holeArr=areaHole[1];if(areaArr&&areaArr.length>0){var pointsArr=areaArr.split("L");if(pointsArr.length>0){var area=[];var areaAndHole=[area];points.push(areaAndHole);for(var p=0;p<pointsArr.length;p++){var coords=pointsArr[p].split(",");area.push({x:+coords[0],y:+coords[1]})}if(holeArr&&holeArr.length>0){var pointsArr_1=holeArr.split("L");if(pointsArr_1.length>0){var hole=[];areaAndHole.push(hole);for(var p=pointsArr_1.length-1;p>=0;p--){var coords=pointsArr_1[p].split(",");hole.push({x:+coords[0],y:+coords[1]})}}}}}}}this.setPropertyValue("points",points);this._currentPoints=points}return points},set:function(points){this.setPropertyValue("points",points,true);this._currentPoints=points},enumerable:true,configurable:true});Object.defineProperty(Polygon.prototype,"currentPoints",{get:function(){if((!this._currentPoints||this._currentPoints.length==0)&&this.path){this._currentPoints=this.points}return this._currentPoints},set:function(points){if(this._currentPoints!=points){this._currentPoints=points;this.draw()}},enumerable:true,configurable:true});Polygon.prototype.draw=function(){var path="";var points=this._currentPoints;var left;var right;var top;var bottom;if(points.length>0){for(var i=0,len=points.length;i<len;i++){var surface=points[i][0];var hole=points[i][1];if(surface&&surface.length>0){var point=surface[0];path+=moveTo(point);for(var s=0;s<surface.length;s++){point=surface[s];path+=lineTo(point);if(!isNumber$1(right)||right<point.x){right=point.x}if(!isNumber$1(left)||left>point.x){left=point.x}if(!isNumber$1(top)||top>point.y){top=point.y}if(!isNumber$1(bottom)||bottom<point.y){bottom=point.y}}}if(hole&&hole.length>0){var point=hole[0];path+=moveTo(point);for(var h=0,hlen=hole.length;h<hlen;h++){point=hole[h];path+=lineTo(point)}}}if(path){path+=closePath()}this.bbox.x=left;this.bbox.y=top;this.bbox.width=right-left;this.bbox.height=bottom-top;_super.prototype.setPath.call(this,path)}};Polygon.prototype.setPath=function(value){if(_super.prototype.setPath.call(this,value)){this.points=[];this._bbox=this.group.getBBox();return true}return false};Polygon.prototype.measureElement=function(){};Object.defineProperty(Polygon.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:true,configurable:true});Object.defineProperty(Polygon.prototype,"morpher",{get:function(){if(!this._morpher){this._morpher=new Morpher(this);this._disposers.push(this._morpher)}return this._morpher},enumerable:true,configurable:true});return Polygon}(Sprite);registry.registeredClasses["Polygon"]=Polygon;var Polyspline=function(_super){__extends(Polyspline,_super);function Polyspline(){var _this=_super.call(this)||this;_this.className="Polyspline";_this.tensionX=.5;_this.tensionY=.5;_this.applyTheme();return _this}Polyspline.prototype.makePath=function(){this._distance=0;var segments=this.segments;var tensionX=this.tensionX;var tensionY=this.tensionY;this.allPoints=[];if(segments&&segments.length>0){var path="";this._realSegments=[];for(var i=0,len=segments.length;i<len;i++){var points=segments[i];var realPoints=[];this._realSegments.push(realPoints);if(points.length>0){var first=points[0];var last=points[points.length-1];var closed_1=false;if(round$1(first.x,3)==round$1(last.x)&&round$1(first.y)==round$1(last.y)){closed_1=true}path+=moveTo(points[0]);for(var p=0;p<points.length-1;p++){var p0=points[p-1];var p1=points[p];var p2=points[p+1];var p3=points[p+2];if(p===0){p0=points[p]}else if(p==points.length-2){p3=points[p+1]}if(!p3){p3=p2}if(p===0){if(closed_1){p0=points[points.length-2]}else{p0=points[i]}}else if(p==points.length-2){if(closed_1){p3=points[1]}else{p3=points[p+1]}}var controlPointA=getCubicControlPointA(p0,p1,p2,p3,tensionX,tensionY);var controlPointB=getCubicControlPointB(p0,p1,p2,p3,tensionX,tensionY);path+=cubicCurveTo(p2,controlPointA,controlPointB);var stepCount=Math.ceil(getCubicCurveDistance(p1,p2,controlPointA,controlPointB,20))*1.2;var prevPoint=p1;if(stepCount>0){for(var s=0;s<=stepCount;s++){var point=getPointOnCubicCurve(p1,p2,controlPointA,controlPointB,s/stepCount);if(point.x==prevPoint.x&&point.y==prevPoint.y){continue}realPoints.push(point);var angle=round$1(getAngle(prevPoint,point),5);this._distance+=getDistance(prevPoint,point);this.allPoints[Math.floor(this._distance)]={x:point.x,y:point.y,angle};prevPoint=point}}else{realPoints.push(p0)}}}var allPoints=this.allPoints;if(allPoints.length>1){for(var i_1=0;i_1<allPoints.length;i_1++){if(!allPoints[i_1]){if(i_1>1){allPoints[i_1]=allPoints[i_1-1]}else{for(var k=1;k<allPoints.length;k++){if(allPoints[k]){allPoints[i_1]=allPoints[k];break}}}}}}}this.path=path}};Polyspline.prototype.getClosestPointIndex=function(point){var points=this.allPoints;var index;var closest=Infinity;if(points.length>1){for(var p=1;p<points.length;p++){var distance=getDistance(point,points[p]);if(distance<closest){index=p;closest=distance}}}return index};Object.defineProperty(Polyspline.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(value){this.setPropertyValue("tensionX",value);this.makePath()},enumerable:true,configurable:true});Object.defineProperty(Polyspline.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(value){this.setPropertyValue("tensionY",value,true);this.makePath()},enumerable:true,configurable:true});Polyspline.prototype.positionToPoint=function(position,extend){var deltaAngle=0;var allPoints=this.allPoints;var len=allPoints.length;if(!isNumber$1(position)){position=0}if(len>1){if(extend&&len>3){if(position<0){if(position<-.01){position=-.01}var f0=allPoints[0];var f1=allPoints[1];var x=f0.x-(f0.x-f1.x)*len*position;var y=f0.y-(f0.y-f1.y)*len*position;return{x,y,angle:getAngle(f0,f1)}}else if(position>1){if(position>1.01){position=1.01}var f0=allPoints[allPoints.length-2];var f1=allPoints[allPoints.length-3];var x=f0.x+(f0.x-f1.x)*len*(position-1);var y=f0.y+(f0.y-f1.y)*len*(position-1);return{x,y,angle:getAngle(f0,{x,y})}}else if(position==1){var point_1=allPoints[allPoints.length-1];return{x:point_1.x,y:point_1.y,angle:point_1.angle}}}else{if(position<0){position=Math.abs(position);deltaAngle=180}if(position>=1){position=.9999999999999}}var point=allPoints[Math.floor(position*len)];return{x:point.x,y:point.y,angle:point.angle+deltaAngle}}else if(len==1){var point=allPoints[0];return{x:point.x,y:point.y,angle:point.angle}}else{return{x:0,y:0,angle:0}}};return Polyspline}(Polyline);registry.registeredClasses["Polyspline"]=Polyspline;var Slice=function(_super){__extends(Slice,_super);function Slice(){var _this=_super.call(this)||this;_this.className="Slice";_this.setPropertyValue("cornerRadius",0);_this.setPropertyValue("startAngle",0);_this.setPercentProperty("innerRadius",0);_this.setPercentProperty("radius",0);_this.setPropertyValue("arc",0);_this.setPropertyValue("shiftRadius",0);_this.strokeOpacity=1;_this.setPropertyValue("layout","none");_this.slice=_this.createChild(Sprite);_this.slice.isMeasured=false;_this._disposers.push(_this.slice);_this.applyTheme();return _this}Slice.prototype.draw=function(){_super.prototype.draw.call(this);var radiusY=this.radiusY;if(this.radius>0&&radiusY==0){radiusY=.01}this.slice.path=arc(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,radiusY,this.cornerRadius,this.innerCornerRadius);this.slice.invalidate();this.shiftRadius=this.shiftRadius;if(this.realFill instanceof RadialGradient){this.updateGradient(this.realFill)}if(this.realStroke instanceof RadialGradient){this.updateGradient(this.realStroke)}};Slice.prototype.updateGradient=function(gradient){gradient.element.attr({gradientUnits:"userSpaceOnUse"});gradient.element.attr({r:this.radius});gradient.cx=0;gradient.cy=0;gradient.element.attr({radius:this.radius})};Object.defineProperty(Slice.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}if(this.isMeasured){var innerRect=getArcRect(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius);var outerRect=getArcRect(this.startAngle,this.startAngle+this.arc,this.radius);return getCommonRectangle([innerRect,outerRect])}else{return{x:0,y:0,width:0,height:0}}},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){this.setPropertyValue("startAngle",normalizeAngle(value),true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(value){if(!isNumber$1(value)){value=0}this.setPropertyValue("arc",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"radius",{get:function(){var radius=this.getPropertyValue("radius");if(!isNumber$1(radius)){radius=0}return radius},set:function(value){this.setPropertyValue("radius",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"radiusY",{get:function(){var value=this.getPropertyValue("radiusY");if(!isNumber$1(value)){value=this.radius}return value},set:function(value){this.setPropertyValue("radiusY",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,this.radius)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(value){this.setPropertyValue("cornerRadius",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(value){this.setPropertyValue("innerCornerRadius",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(value){this.setPropertyValue("shiftRadius",value);value=this.getPropertyValue("shiftRadius");this.dx=value*this.radius*this.ix;this.dy=value*this.radiusY*this.iy},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"ix",{get:function(){return cos(this.middleAngle)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"iy",{get:function(){return sin(this.middleAngle)},enumerable:true,configurable:true});Object.defineProperty(Slice.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:true,configurable:true});Slice.prototype.getTooltipX=function(){var value=this.getPropertyValue("tooltipX");if(isNumber$1(value)){return value}var p=.5;if(value instanceof Percent){p=value.value}var innerRadius=relativeToValue(this.innerRadius,this.radius);return this.ix*(innerRadius+(this.radius-innerRadius)*p)};Slice.prototype.getTooltipY=function(){var value=this.getPropertyValue("tooltipY");if(isNumber$1(value)){return value}var p=.5;if(value instanceof Percent){p=value.value}var innerRadius=relativeToValue(this.innerRadius,this.radius);return this.iy*(innerRadius+(this.radius-innerRadius)*p)+this.slice.dy};return Slice}(Container);registry.registeredClasses["Slice"]=Slice;var Preloader=function(_super){__extends(Preloader,_super);function Preloader(){var _this=_super.call(this)||this;_this.className="Preloader";_this.width=percent(100);_this.height=percent(100);var interfaceColors=new InterfaceColorSet;var sliceContainer=_this.createChild(Container);sliceContainer.shouldClone=false;var backgroundSlice=sliceContainer.createChild(Slice);backgroundSlice.shouldClone=false;backgroundSlice.radius=53;backgroundSlice.arc=360;backgroundSlice.fill=interfaceColors.getFor("fill");backgroundSlice.fillOpacity=.8;backgroundSlice.innerRadius=42;backgroundSlice.isMeasured=false;_this.backgroundSlice=backgroundSlice;var progressSlice=sliceContainer.createChild(Slice);progressSlice.shouldClone=false;progressSlice.radius=50;progressSlice.innerRadius=45;progressSlice.fill=interfaceColors.getFor("alternativeBackground");progressSlice.fillOpacity=.2;progressSlice.isMeasured=false;_this.progressSlice=progressSlice;var label=sliceContainer.createChild(Label);label.shouldClone=false;label.horizontalCenter="middle";label.verticalCenter="middle";label.isMeasured=false;label.fill=interfaceColors.getFor("text");label.align="center";label.valign="middle";label.textAlign="middle";label.fillOpacity=.4;_this.label=label;_this.background.opacity=1;_this.background.fill=interfaceColors.getFor("background");_this.contentAlign="center";_this.contentValign="middle";_this.delay=300;var hiddenState=_this.states.create("hidden");hiddenState.properties.opacity=0;_this.visible=false;_this.hide(0);_this.__disabled=true;_this._disposers.push(_this.backgroundSlice);_this._disposers.push(_this.progressSlice);_this._disposers.push(_this.label);_this._disposers.push(sliceContainer);return _this}Object.defineProperty(Preloader.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(value){var _this=this;this.__disabled=false;this.validateLayout();this.setPropertyValue("progress",value);this.progressSlice.arc=360*value;if(this.label){this.label.text=Math.round(value*100)+"%"}if(value>=1){if(this._started){this._started=undefined}registry.events.once("enterframe",(function(){var animation=_this.hide();if(animation&&!animation.isFinished()){animation.events.once("animationended",(function(){_this.__disabled=true}))}else{_this.__disabled=true}}));this.interactionsEnabled=false;this.setPropertyValue("progress",0)}else if(value>0){if(this.delay){if(!this._started){this._started=(new Date).getTime()}else if(this._started+this.delay<=(new Date).getTime()){this.__disabled=false;this.show();this.interactionsEnabled=true}}else{this.__disabled=false;this.show();this.interactionsEnabled=true}}},enumerable:true,configurable:true});Object.defineProperty(Preloader.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(value){this.setPropertyValue("delay",value)},enumerable:true,configurable:true});return Preloader}(Container);registry.registeredClasses["Preloader"]=Preloader;var ResizeButton=function(_super){__extends(ResizeButton,_super);function ResizeButton(){var _this=_super.call(this)||this;_this.className="ResizeButton";_this.orientation="horizontal";_this.layout="absolute";_this.horizontalCenter="middle";_this.verticalCenter="middle";_this.draggable=true;_this.padding(8,8,8,8);_this.background.cornerRadius(20,20,20,20);var icon=new Sprite;icon.element=_this.paper.add("path");var path=moveTo({x:-2,y:-6});path+=lineTo({x:-2,y:6});path+=moveTo({x:2,y:-6});path+=lineTo({x:2,y:6});icon.path=path;icon.pixelPerfect=true;icon.padding(0,4,0,4);icon.stroke=(new InterfaceColorSet).getFor("alternativeText");icon.strokeOpacity=.7;_this.icon=icon;_this.label.dispose();_this.label=undefined;_this.applyTheme();return _this}Object.defineProperty(ResizeButton.prototype,"orientation",{set:function(value){var icon=this.icon;if(icon){if(value=="horizontal"){icon.rotation=0}else{icon.rotation=-90}}},enumerable:true,configurable:true});return ResizeButton}(Button);registry.registeredClasses["ResizeButton"]=ResizeButton;var CloseButton=function(_super){__extends(CloseButton,_super);function CloseButton(){var _this=_super.call(this)||this;_this.className="CloseButton";_this.padding(8,8,8,8);_this.showSystemTooltip=true;_this.width=30;_this.height=30;var interfaceColors=new InterfaceColorSet;_this.cursorOverStyle=MouseCursorStyle.pointer;var background=_this.background;background.cornerRadius(20,20,20,20);var bgc=interfaceColors.getFor("background");background.fill=bgc;background.stroke=interfaceColors.getFor("primaryButton");background.strokeOpacity=1;background.strokeWidth=1;var downColor=interfaceColors.getFor("primaryButtonActive");var bhs=background.states.getKey("hover");bhs.properties.strokeWidth=3;bhs.properties.fill=bgc;var bds=background.states.getKey("down");bds.properties.stroke=downColor;bds.properties.fill=bgc;var icon=new Sprite;icon.element=_this.paper.add("path");icon.stroke=background.stroke;_this.icon=icon;_this.applyTheme();return _this}CloseButton.prototype.validate=function(){_super.prototype.validate.call(this);var w=this.pixelWidth/3;var h=this.pixelHeight/3;var path=moveTo({x:-w/2,y:-h/2});path+=lineTo({x:w/2,y:h/2});path+=moveTo({x:w/2,y:-h/2});path+=lineTo({x:-w/2,y:h/2});this.icon.path=path;this.invalidateLayout()};CloseButton.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Close")}};return CloseButton}(Button);registry.registeredClasses["CloseButton"]=CloseButton;var SwitchButton=function(_super){__extends(SwitchButton,_super);function SwitchButton(){var _this=_super.call(this)||this;_this.className="SwitchButton";_this.tooltipY=0;_this.layout="horizontal";_this.contentAlign="center";_this.contentValign="middle";_this.padding(8,16,8,16);_this.setStateOnChildren=true;_this.states.create("active");var interfaceColors=new InterfaceColorSet;var leftLabel=new Label;leftLabel.fillOpacity=.3;var llas=leftLabel.states.create("active");llas.properties.fillOpacity=1;leftLabel.isActive=true;_this.leftLabel=leftLabel;var button=new Button;var circle=new Circle;button.contentValign="none";button.padding(0,0,0,0);circle.radius=10;button.icon=circle;button.icon.valign="middle";button.label=undefined;var p100=percent(100);button.background.cornerRadius(p100,p100,p100,p100);button.width=circle.radius*3.5;button.height=circle.radius*2.1;button.marginLeft=8;button.marginRight=8;button.togglable=true;circle.dx=-circle.radius*.7;circle.fill=interfaceColors.getFor("primaryButton");var hs=circle.states.create("hover");hs.properties.fill=interfaceColors.getFor("primaryButtonHover");var as=circle.states.create("active");as.properties.fill=interfaceColors.getFor("primaryButtonActive");as.properties.dx=circle.radius*.7;_this.switchButton=button;_this.events.on("toggled",(function(){_this.leftLabel.isActive=!_this.isActive;_this.rightLabel.isActive=_this.isActive}));var rightLabel=new Label;rightLabel.fillOpacity=.3;var rlas=rightLabel.states.create("active");rlas.properties.fillOpacity=1;_this.rightLabel=rightLabel;_this.role="button";_this.focusable=true;rightLabel.valign="middle";leftLabel.valign="middle";button.valign="middle";_this.applyTheme();return _this}Object.defineProperty(SwitchButton.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(label){if(this._leftLabel){this.removeDispose(this._leftLabel)}this._leftLabel=label;if(label){label.parent=this;label.interactionsEnabled=false;label.shouldClone=false;this._disposers.push(this._leftLabel)}},enumerable:true,configurable:true});Object.defineProperty(SwitchButton.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(label){if(this._rightLabel){this.removeDispose(this._rightLabel)}this._rightLabel=label;if(label){label.parent=this;label.interactionsEnabled=false;label.shouldClone=false;this._disposers.push(this._rightLabel)}},enumerable:true,configurable:true});Object.defineProperty(SwitchButton.prototype,"switch",{get:function(){return this._switchButton},enumerable:true,configurable:true});Object.defineProperty(SwitchButton.prototype,"switchButton",{get:function(){return this._switchButton},set:function(button){if(this._switchButton){this.removeDispose(this._switchButton)}this._switchButton=button;if(button){button.parent=this;button.shouldClone=false;this._disposers.push(this._switchButton)}},enumerable:true,configurable:true});SwitchButton.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(source.leftLabel){this.leftLabel.copyFrom(source.leftLabel)}if(source.rightLabel){this.rightLabel.copyFrom(source.rightLabel)}if(source.switchButton){this.switchButton.copyFrom(source.switchButton)}};return SwitchButton}(Container);registry.registeredClasses["SwitchButton"]=SwitchButton;var Scrollbar=function(_super){__extends(Scrollbar,_super);function Scrollbar(){var _this=_super.call(this)||this;_this._previousStart=0;_this._previousEnd=1;_this._prevStart=0;_this._prevEnd=1;_this._isBusy=false;_this._skipRangeEvents=false;_this.updateWhileMoving=true;_this.className="Scrollbar";_this.minHeight=12;_this.minWidth=12;_this.animationDuration=0;_this.animationEasing=cubicOut;_this.margin(10,10,10,10);var interfaceColors=new InterfaceColorSet;var background=_this.background;background.cornerRadius(10,10,10,10);background.fill=interfaceColors.getFor("fill");background.fillOpacity=.5;_this.showSystemTooltip=true;_this.startGrip=new ResizeButton;_this.endGrip=new ResizeButton;_this.events.on("transformed",(function(){_this.updateThumb()}),_this,false);_this.start=0;_this.end=1;_this.role="scrollbar";_this.thumb.role="slider";_this.thumb.readerLive="polite";_this.startGrip.role="slider";_this.endGrip.role="slider";_this.events.once("inited",(function(){_this._previousStart=undefined;_this.dispatchRangeChange()}),undefined,false);_this.hideGrips=false;_this.orientation="horizontal";_this.setSVGAttribute({"aria-valuemin":"0"});_this.setSVGAttribute({"aria-valuemax":"100"});_this.applyTheme();return _this}Scrollbar.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(this.orientation==="horizontal"){if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")}if(!hasValue(this.thumb.readerDescription)){this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")}if(!hasValue(this.startGrip.readerDescription)){this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")}if(!hasValue(this.endGrip.readerDescription)){this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")}this.readerOrientation="horizontal"}else{if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")}if(!hasValue(this.thumb.readerDescription)){this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")}if(!hasValue(this.startGrip.readerDescription)){this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")}if(!hasValue(this.endGrip.readerDescription)){this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")}this.readerOrientation="vertical"}this.readerControls=this.baseSprite.uidAttr()};Scrollbar.prototype.validateLayout=function(){this.updateSize();_super.prototype.validateLayout.call(this);this.updateExtremes()};Scrollbar.prototype.processBackground=function(){_super.prototype.processBackground.call(this);var background=this.background;background.clickable=true;background.events.on("hit",this.handleBgHit,this,undefined)};Scrollbar.prototype.handleBgHit=function(event){this.makeBusy();var point=event.spritePoint;point=spritePointToSprite(point,this.background,this);var thumb=this.thumb;if(this.orientation=="horizontal"){var thumbX=point.x-thumb.pixelWidth/2;thumbX=fitToRange(thumbX,0,this.innerWidth-thumb.pixelWidth);this._thumbAnimation=thumb.animate({property:"x",to:thumbX},this.animationDuration,this.animationEasing)}else{var thumbY=point.y-thumb.pixelHeight/2;thumbY=fitToRange(thumbY,0,this.innerHeight-thumb.pixelHeight);this._thumbAnimation=thumb.animate({property:"y",to:thumbY},this.animationDuration,this.animationEasing)}if(this.animationDuration>0){this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,false)}else{this._thumb.validate();this.makeUnbusy()}};Scrollbar.prototype.makeBusy=function(){this._isBusy=true;this._skipRangeEvents=false;if(this._unbusyTimeout){this.removeDispose(this._unbusyTimeout)}this._unbusyTimeout=undefined;this.stopAnimations()};Scrollbar.prototype.stopAnimations=function(){if(this._thumbAnimation){this._thumbAnimation.stop(true)}if(this._zoomAnimation){this._zoomAnimation.stop(true)}};Scrollbar.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),this.animationDuration*1.1)};Scrollbar.prototype.makeUnbusyReal=function(){this._usingGrip=undefined;this._isBusy=false;if(!this.updateWhileMoving){this.dispatchRangeChange()}};Scrollbar.prototype.dispatchRangeChange=function(){if(this._previousEnd!=this.end||this._previousStart!=this.start){this._previousStart=this.start;this._previousEnd=this.end;this.dispatch("rangechanged")}};Scrollbar.prototype.updateThumb=function(dispatchEvents){if(dispatchEvents===void 0){dispatchEvents=true}if(!this.parent){return}var thumb=this.thumb;var start=this.start;var end=this.end;var startGrip=this.startGrip;var endGrip=this.endGrip;if(this.orientation=="horizontal"){var innerWidth_1=this.innerWidth;thumb.width=innerWidth_1*(end-start);thumb.maxX=innerWidth_1-thumb.pixelWidth;thumb.x=start*innerWidth_1;startGrip.moveTo({x:thumb.pixelX,y:0},undefined,undefined,true);endGrip.moveTo({x:thumb.pixelX+thumb.pixelWidth,y:0},undefined,undefined,true);startGrip.readerTitle=this.language.translate("From %1",undefined,this.adapter.apply("positionValue",{value:Math.round(start*100)+"%",position:start}).value);startGrip.readerValueNow=""+Math.round(start*100);startGrip.readerValueText=startGrip.readerTitle;endGrip.readerTitle=this.language.translate("To %1",undefined,this.adapter.apply("positionValue",{value:Math.round(end*100)+"%",position:end}).value);endGrip.readerValueNow=""+Math.round(end*100);endGrip.readerValueText=endGrip.readerTitle}else{var innerHeight_1=this.innerHeight;thumb.height=innerHeight_1*(end-start);thumb.maxY=innerHeight_1-thumb.pixelHeight;thumb.y=(1-end)*innerHeight_1;startGrip.moveTo({x:0,y:thumb.pixelY+thumb.pixelHeight},undefined,undefined,true);endGrip.moveTo({x:0,y:thumb.pixelY},undefined,undefined,true);startGrip.readerTitle=this.language.translate("To %1",undefined,this.adapter.apply("positionValue",{value:Math.round((1-start)*100)+"%",position:1-start}).value);startGrip.readerValueNow=""+Math.round(start*100);startGrip.readerValueText=startGrip.readerTitle;endGrip.readerTitle=this.language.translate("From %1",undefined,this.adapter.apply("positionValue",{value:Math.round((1-end)*100)+"%",position:1-end}).value);endGrip.readerValueNow=""+Math.round(end*100);endGrip.readerValueText=endGrip.readerTitle}thumb.readerTitle=this.language.translate("From %1 to %2",undefined,this.adapter.apply("positionValue",{value:Math.round(start*100)+"%",position:start}).value,this.adapter.apply("positionValue",{value:Math.round(end*100)+"%",position:end}).value);thumb.readerValueNow=""+Math.round(start*100);thumb.readerValueText=thumb.readerTitle;this.readerValueNow=""+Math.round(start*100);this.readerValueText=thumb.readerTitle;if(!this._skipRangeEvents&&this.updateWhileMoving&&dispatchEvents){this.dispatchRangeChange()}};Scrollbar.prototype.updateExtremes=function(){var orientation=this.orientation;var minX=0;var minY=0;var maxX=0;var maxY=0;if(orientation=="horizontal"){maxX=this.innerWidth;minY=maxY=this.innerHeight/2}else{maxY=this.innerHeight;minX=maxX=this.innerWidth/2}var startGrip=this.startGrip;startGrip.minX=minX;startGrip.maxX=maxX;startGrip.minY=minY;startGrip.maxY=maxY;var endGrip=this.endGrip;endGrip.minX=minX;endGrip.maxX=maxX;endGrip.minY=minY;endGrip.maxY=maxY;var thumb=this.thumb;thumb.minX=minX;thumb.maxX=maxX;thumb.minY=minY;thumb.maxY=maxY};Scrollbar.prototype.updateSize=function(){var orientation=this.orientation;var startGrip=this.startGrip;if(startGrip){startGrip.orientation=orientation}if(this.endGrip){this.endGrip.orientation=orientation}var thumb=this.thumb;if(thumb){if(orientation=="horizontal"){if(!isNumber$1(this._pixelWidth)){if(!(this.width instanceof Percent)){this.width=percent(100)}}if(hasValue(this.percentHeight)){this.height=this.minHeight}thumb.height=this.innerHeight;thumb.verticalCenter="middle";thumb.horizontalCenter="left"}else{if(!isNumber$1(this._pixelHeight)){if(!(this.height instanceof Percent)){this.height=percent(100)}}if(hasValue(this.percentWidth)){this.width=this.minWidth}thumb.width=this.innerWidth;thumb.verticalCenter="top";thumb.horizontalCenter="middle"}}};Object.defineProperty(Scrollbar.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(position){if(!this._isBusy){this.__start=position}},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"__start",{get:function(){return this._start},set:function(position){this._start=this.getPosition(position);this.updateThumb()},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(position){if(!this._isBusy){this.__end=position}},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"__end",{get:function(){return this._end},set:function(position){this._end=this.getPosition(position);this.updateThumb()},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:true,configurable:true});Scrollbar.prototype.skipRangeEvents=function(){if(!this._isBusy){this._skipRangeEvents=true}};Scrollbar.prototype.fixRange=function(range){if(range.start!=round$1(this._start,2)||range.end!=round$1(this._end,2)){this._start=range.start;this._end=range.end;this._skipRangeEvents=true;this.updateThumb();this._skipRangeEvents=false;this.thumb.validate();this.thumb.background.validate()}};Scrollbar.prototype.getPosition=function(position){return fitToRange(round$1(position,4),0,1)};Object.defineProperty(Scrollbar.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){if(this.setPropertyValue("orientation",value)){if(value==="horizontal"){this.startGrip.cursorOverStyle=MouseCursorStyle.horizontalResize;this.endGrip.cursorOverStyle=MouseCursorStyle.horizontalResize}else{this.startGrip.cursorOverStyle=MouseCursorStyle.verticalResize;this.endGrip.cursorOverStyle=MouseCursorStyle.verticalResize}this.updateByOrientation();this.invalidate()}},enumerable:true,configurable:true});Scrollbar.prototype.updateByOrientation=function(){};Object.defineProperty(Scrollbar.prototype,"startGrip",{get:function(){return this._startGrip},set:function(button){if(this._startGrip){this.removeDispose(this._startGrip)}this._startGrip=button;this.processGrip(button)},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"endGrip",{get:function(){return this._endGrip},set:function(button){if(this._endGrip){this.removeDispose(this._endGrip)}this._endGrip=button;this.processGrip(button)},enumerable:true,configurable:true});Scrollbar.prototype.processGrip=function(button){button.parent=this;button.isMeasured=false;button.focusable=true;button.shouldClone=false;button.zIndex=100;button.events.on("drag",this.handleGripDrag,this,false);button.events.on("dragstop",this.makeUnbusy,this,false);button.events.on("down",this.makeBusy,this,false);button.events.on("up",this.makeUnbusy,this,false);this._disposers.push(button)};Scrollbar.prototype.handleGripDrag=function(event){this.makeBusy();if(event.target===this._startGrip){this._usingGrip="start"}else{this._usingGrip="end"}if(this.orientation=="horizontal"){this._start=this.startGrip.pixelX/this.innerWidth;this._end=this.endGrip.pixelX/this.innerWidth}else{this._start=1-this.startGrip.pixelY/this.innerHeight;this._end=1-this.endGrip.pixelY/this.innerHeight}this.updateThumb()};Object.defineProperty(Scrollbar.prototype,"thumb",{get:function(){if(!this._thumb){var thumb=new Button;thumb.background.cornerRadius(10,10,10,10);thumb.padding(0,0,0,0);this.thumb=thumb}return this._thumb},set:function(thumb){var _this=this;if(thumb){if(this._thumb){this.removeDispose(this._thumb)}this._thumb=thumb;thumb.parent=this;thumb.isMeasured=false;thumb.inert=true;thumb.draggable=true;thumb.clickable=true;thumb.hoverable=true;thumb.focusable=true;thumb.shouldClone=false;thumb.zIndex=0;thumb.cursorOverStyle=MouseCursorStyle.grab;thumb.cursorDownStyle=MouseCursorStyle.grabbing;thumb.events.on("dragstart",this.makeBusy,this,false);thumb.events.on("dragstop",this.makeUnbusy,this,false);thumb.events.on("positionchanged",this.handleThumbPosition,this,false);thumb.events.on("sizechanged",this.handleThumbPosition,this,false);thumb.events.on("doublehit",this.handleDoubleClick,this,false);this._disposers.push(getInteraction().body.events.on("keyup",(function(ev){if(keyboard.isKey(ev.event,["space","enter"])&&_this.thumb.isFocused){ev.event.preventDefault();_this.handleDoubleClick()}})));this._disposers.push(this._thumb)}},enumerable:true,configurable:true});Scrollbar.prototype.handleDoubleClick=function(){this.makeBusy();var newStart=0;var newEnd=1;if(this.start!=0||this.end!=1){this._prevStart=this.start;this._prevEnd=this.end}else{newStart=this._prevStart;newEnd=this._prevEnd}var zoomAnimation=this.animate([{property:"__start",to:newStart},{property:"__end",to:newEnd}],this.animationDuration,this.animationEasing);if(zoomAnimation&&!zoomAnimation.isFinished()){zoomAnimation.events.on("animationended",this.makeUnbusy,this,false);this._zoomAnimation=zoomAnimation}else{this.makeUnbusy()}};Scrollbar.prototype.handleThumbPosition=function(){var thumb=this.thumb;if(this.orientation=="horizontal"){var innerWidth_2=this.innerWidth;var w=thumb.innerWidth;var x=thumb.pixelX;this._start=x/innerWidth_2;this._end=(x+w)/innerWidth_2;this.updateThumb()}else{var innerHeight_2=this.innerHeight;var h=thumb.innerHeight;var y=thumb.pixelY;if(y+h>innerHeight_2){y=innerHeight_2-h;thumb.y=y}this._start=1-(y+h)/innerHeight_2;this._end=1-y/innerHeight_2;this.updateThumb()}};Scrollbar.prototype.createBackground=function(){return new RoundedRectangle};Object.defineProperty(Scrollbar.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(value){var _this=this;this._hideGrips=value;if(this._overDisposer){this.removeDispose(this._overDisposer)}if(this._outDisposer){this.removeDispose(this._outDisposer)}if(value){this._overDisposer=this.events.on("over",(function(){_this.startGrip.show();_this.endGrip.show()}),undefined,false);this._outDisposer=this.events.on("out",(function(){_this.startGrip.hide();_this.endGrip.hide()}),undefined,false);this.startGrip.hide();this.endGrip.hide()}else{this.startGrip.show();this.endGrip.show()}},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(value){this.setPropertyValue("animationDuration",value)},enumerable:true,configurable:true});Object.defineProperty(Scrollbar.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(value){this.setPropertyValue("animationEasing",value)},enumerable:true,configurable:true});Scrollbar.prototype.asFunction=function(field){return field=="animationEasing"||_super.prototype.asIs.call(this,field)};return Scrollbar}(Container);registry.registeredClasses["Scrollbar"]=Scrollbar;var Slider=function(_super){__extends(Slider,_super);function Slider(){var _this=_super.call(this)||this;_this.className="Slider";_this.thumb.opacity=0;_this.thumb.interactionsEnabled=false;_this.endGrip.opacity=0;_this.endGrip.interactionsEnabled=false;_this.startGrip.events.on("drag",(function(){_this.endGrip.x=_this.startGrip.x;_this.endGrip.y=_this.startGrip.y}));_this.applyTheme();return _this}Object.defineProperty(Slider.prototype,"__end",{get:function(){return this._start},set:function(value){},enumerable:true,configurable:true});Object.defineProperty(Slider.prototype,"end",{get:function(){return this._start},set:function(position){},enumerable:true,configurable:true});Object.defineProperty(Slider.prototype,"start",{get:function(){return this._start},set:function(position){if(!this._isBusy){this.__start=position}},enumerable:true,configurable:true});return Slider}(Scrollbar);registry.registeredClasses["Slider"]=Slider;var TextLink=function(_super){__extends(TextLink,_super);function TextLink(){var _this=_super.call(this)||this;_this.className="TextLink";_this.selectable=true;var interfaceColors=new InterfaceColorSet;_this.fill=interfaceColors.getFor("primaryButton").brighten(.3);var hoverState=_this.states.create("hover");hoverState.properties.fill=interfaceColors.getFor("primaryButtonHover").brighten(.3);var downState=_this.states.create("down");downState.properties.fill=interfaceColors.getFor("primaryButtonDown").brighten(.3);_this.cursorOverStyle=MouseCursorStyle.pointer;_this.applyTheme();return _this}return TextLink}(Label);registry.registeredClasses["TextLink"]=TextLink;var Filter=function(_super){__extends(Filter,_super);function Filter(){var _this=_super.call(this)||this;_this.properties={};_this.isTemplate=false;_this._scale=1;_this._nonScaling=true;_this.className="Filter";_this.filterPrimitives=new List;_this.properties.filterUnits="objectBoundingBox";_this.filterPrimitives.events.on("inserted",(function(ev){_this._disposers.push(ev.newValue)}));_this.width=120;_this.height=120;_this.applyTheme();return _this}Filter.prototype.appendPrimitives=function(filterElement){each(this.filterPrimitives.iterator(),(function(filterPrimitive){filterElement.add(filterPrimitive)}))};Filter.prototype.animate=function(animationOptions,duration,easing){var animation=new Animation(this,animationOptions,duration,easing).start();return animation};Object.defineProperty(Filter.prototype,"width",{get:function(){return this.properties["width"]},set:function(value){this.properties["width"]=value},enumerable:true,configurable:true});Object.defineProperty(Filter.prototype,"height",{get:function(){return this.properties["height"]},set:function(value){this.properties["height"]=value},enumerable:true,configurable:true});Filter.prototype.copyFrom=function(filter){var _this=this;_super.prototype.copyFrom.call(this,filter);each$1(filter.properties,(function(key,value){_this[key]=value}))};Object.defineProperty(Filter.prototype,"paper",{get:function(){if(this._paper){return this._paper}return getGhostPaper()},set:function(paper){if(this._paper!=paper){this._paper=paper}},enumerable:true,configurable:true});Object.defineProperty(Filter.prototype,"animations",{get:function(){if(!this._animations){this._animations=[];this._disposers.push(new AnimationDisposer(this._animations))}return this._animations},enumerable:true,configurable:true});Object.defineProperty(Filter.prototype,"scale",{get:function(){return this._scale},set:function(value){this._scale=value;this.updateScale()},enumerable:true,configurable:true});Filter.prototype.updateScale=function(){};Object.defineProperty(Filter.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(value){this.properties.filterUnits=value},enumerable:true,configurable:true});Object.defineProperty(Filter.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(value){this._nonScaling=value;if(!value){this._scale=1}this.updateScale()},enumerable:true,configurable:true});Object.defineProperty(Filter.prototype,"sprite",{set:function(value){this.setSprite(value)},enumerable:true,configurable:true});Filter.prototype.setSprite=function(value){if(this._sprite&&this._sprite!=value){this._sprite.filters.removeValue(this)}this._sprite=value};return Filter}(BaseObject);var DropShadowFilter=function(_super){__extends(DropShadowFilter,_super);function DropShadowFilter(){var _this=_super.call(this)||this;_this.className="DropShadowFilter";_this.color=color("#000");_this.feGaussianBlur=_this.paper.add("feGaussianBlur");_this.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"});_this.filterPrimitives.push(_this.feGaussianBlur);_this.feOffset=_this.paper.add("feOffset");_this.feOffset.attr({result:"offsetBlur"});_this.filterPrimitives.push(_this.feOffset);_this.feFlood=_this.paper.add("feFlood");_this.feFlood.attr({"flood-color":_this.color});_this.filterPrimitives.push(_this.feFlood);_this.feComposite=_this.paper.add("feComposite");_this.feComposite.attr({in2:"offsetBlur",operator:"in"});_this.filterPrimitives.push(_this.feComposite);_this.feMerge=_this.paper.addGroup("feMerge");_this.feMerge.add(_this.paper.add("feMergeNode"));_this.feMerge.add(_this.paper.add("feMergeNode").attr({in:"SourceGraphic"}));_this.filterPrimitives.push(_this.feMerge);_this.width=200;_this.height=200;_this.blur=1.5;_this.dx=3;_this.dy=3;_this.opacity=.5;_this.applyTheme();return _this}Object.defineProperty(DropShadowFilter.prototype,"color",{get:function(){return this.properties.color},set:function(value){this.properties.color=value;if(this.feFlood){this.feFlood.attr({"flood-color":value})}},enumerable:true,configurable:true});Object.defineProperty(DropShadowFilter.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(value){this.properties.opacity=value;this.feFlood.attr({"flood-opacity":value})},enumerable:true,configurable:true});Object.defineProperty(DropShadowFilter.prototype,"dx",{get:function(){return this.properties.dx},set:function(value){this.properties.dx=value;this.feOffset.attr({dx:value/this.scale})},enumerable:true,configurable:true});Object.defineProperty(DropShadowFilter.prototype,"dy",{get:function(){return this.properties.dy},set:function(value){this.properties.dy=value;this.feOffset.attr({dy:value/this.scale})},enumerable:true,configurable:true});Object.defineProperty(DropShadowFilter.prototype,"blur",{get:function(){return this.properties.blur},set:function(value){this.properties.blur=value;this.feGaussianBlur.attr({stdDeviation:value/this.scale})},enumerable:true,configurable:true});DropShadowFilter.prototype.updateScale=function(){this.dx=this.dx;this.dy=this.dy;this.blur=this.blur};return DropShadowFilter}(Filter);registry.registeredClasses["DropShadowFilter"]=DropShadowFilter;var Tooltip=function(_super){__extends(Tooltip,_super);function Tooltip(){var _this=_super.call(this)||this;_this._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4};_this._pointTo={x:0,y:0};_this.fitPointerToBounds=false;_this._verticalOrientation="up";_this.fixDoc=true;_this.className="Tooltip";_this.isMeasured=false;_this.getFillFromObject=true;_this.margin(5,5,5,5);_this.defaultState.transitionDuration=1;_this.hiddenState.transitionDuration=1;var background=_this.background;background.interactionsEnabled=false;background.fillOpacity=.9;background.strokeWidth=1;background.strokeOpacity=1;background.stroke=color("#ffffff");background.cornerRadius=3;background.pointerLength=6;background.pointerBaseWidth=10;var dropShadow=new DropShadowFilter;dropShadow.dy=1;dropShadow.dx=1;dropShadow.opacity=.5;background.filters.push(dropShadow);_this.autoTextColor=true;var label=_this.createChild(Label);label.shouldClone=false;_this.label=label;label.padding(7,12,4,12);label.interactionsEnabled=false;label.horizontalCenter="middle";label.fill=color("#ffffff");_this._disposers.push(label);_this.label.events.on("sizechanged",_this.drawBackground,_this);_this.label.zIndex=1;_this.pointerOrientation="vertical";_this.animationDuration=0;_this.animationEasing=cubicOut;_this.setPropertyValue("showInViewport",false);_this.role="tooltip";_this.visible=false;_this.opacity=0;_this.x=0;_this.y=0;_this.events.on("visibilitychanged",_this.handleVisibility,_this);_this.applyTheme();return _this}Tooltip.prototype.handleVisibility=function(){if(this.visible){this.label.invalidate()}};Object.defineProperty(Tooltip.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(value){this.setPropertyValue("getStrokeFromObject",value,true)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(value){this.setPropertyValue("autoTextColor",value,true)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(value){var _this=this;if(this.setPropertyValue("keepTargetHover",value,true)){if(value){this.hoverable=true;this.background.interactionsEnabled=true;this._disposers.push(this.events.on("over",(function(ev){if(_this.targetSprite&&_this.targetSprite.hoverable){_this.targetSprite.isHover=true}})));this._disposers.push(this.events.on("out",(function(ev){if(_this.targetSprite&&_this.targetSprite.hoverable){_this.targetSprite.isHover=false}})))}}},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(value){this.setPropertyValue("showInViewport",value)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(value){this.setPropertyValue("getFillFromObject",value,true)},enumerable:true,configurable:true});Tooltip.prototype.createBackground=function(){return new PointedRectangle};Object.defineProperty(Tooltip.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(value){this.setPropertyValue("pointerOrientation",value,true)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(value){this.setPropertyValue("animationDuration",value)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(value){this.setPropertyValue("animationEasing",value)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"html",{get:function(){return this.label.html},set:function(value){if(this.label.html!=value){this.label.html=value;this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"text",{get:function(){return this.label.text},set:function(value){if(this.label.text!=value){this.label.text=value;this.invalidate()}},enumerable:true,configurable:true});Tooltip.prototype.draw=function(){_super.prototype.draw.call(this);var label=this.label;if(label.invalid){label.validate()}var x=this._pointTo.x;var y=this._pointTo.y;var boundingRect=this._boundingRect;var textW=label.measuredWidth;var textH=label.measuredHeight;var pointerLength=this.background.pointerLength;var textX;var textY;if(this.ignoreBounds){boundingRect=undefined}if(boundingRect&&this.fixDoc&&textW>boundingRect.width){spritePointToDocument({x:boundingRect.x,y:boundingRect.y},this.parent);var p1=spritePointToDocument({x:boundingRect.x+boundingRect.width,y:boundingRect.y+boundingRect.height},this.parent);var documentWidth=document.body.offsetWidth;if(p1.x>documentWidth/2){boundingRect.x=boundingRect.width-textW}else{boundingRect.width=boundingRect.x+textW}}var pointerOrientation=this.pointerOrientation;if(pointerOrientation=="horizontal"||pointerOrientation=="left"||pointerOrientation=="right"){textY=-textH/2;if(pointerOrientation=="horizontal"){if(boundingRect&&x>boundingRect.x+boundingRect.width/2){textX=-textW/2-pointerLength}else{textX=textW/2+pointerLength}}else if(pointerOrientation=="left"){textX=textW/2+pointerLength}else{textX=-textW/2-pointerLength}}else{if(boundingRect){textX=fitToRange(0,boundingRect.x-x+textW/2,boundingRect.x-x+boundingRect.width-textW/2)}if(pointerOrientation=="vertical"){if(boundingRect&&y>boundingRect.y+textH+pointerLength){textY=-textH-pointerLength;this._verticalOrientation="up"}else{textY=pointerLength;this._verticalOrientation="down"}}else if(pointerOrientation=="down"){textY=-textH-pointerLength;this._verticalOrientation="up"}else{textY=pointerLength;this._verticalOrientation="down"}}if(boundingRect){textY=fitToRange(textY,boundingRect.y-y,boundingRect.y+boundingRect.height-textH-y)}label.x=textX;label.y=textY;this.drawBackground()};Tooltip.prototype.updateBackground=function(){this.group.addToBack(this.background.group)};Tooltip.prototype.drawBackground=function(){var label=this.label;var background=this.background;var textWidth=label.measuredWidth;var textHeight=label.measuredHeight;var boundingRect=this._boundingRect;var bgWidth=textWidth;var bgX=label.pixelX-textWidth/2;var bgHeight=textHeight;var bgY=label.pixelY;var x=this._pointTo.x;var y=this._pointTo.y;var boundX1=boundingRect.x-x;var boundX2=boundX1+boundingRect.width;var boundY1=boundingRect.y-y;var boundY2=boundY1+boundingRect.height;background.x=bgX;background.y=bgY;background.width=bgWidth;background.height=bgHeight;if(this.fitPointerToBounds){background.pointerX=fitToRange(-background.x,boundX1-background.x,boundX2-background.x);background.pointerY=fitToRange(-background.y,boundY1-background.y,boundY2-background.y)}else{background.pointerX=-background.x;background.pointerY=-background.y}background.validate()};Tooltip.prototype.delayedPointTo=function(point,instantly){var _this=this;if(this._pointToDisposer){this._pointToDisposer.dispose()}this._pointToDisposer=registry.events.once("exitframe",(function(){_this.pointTo(point,instantly)}));this.addDisposer(this._pointToDisposer)};Tooltip.prototype.pointTo=function(point,instantly){if(this._pointTo.x!=point.x||this._pointTo.y!=point.y){this._pointTo=point;this.invalidate();if(!this.visible||instantly){this.moveTo(this._pointTo);if(this._animation){this._animation.kill()}}else{if(this.pixelX==0&&this.pixelY==0){this.moveTo(this._pointTo)}else{if(this._animation){this._animation.kill()}this._animation=new Animation(this,[{property:"x",to:point.x,from:this.pixelX},{property:"y",to:point.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()}}}};Tooltip.prototype.setBounds=function(rectangle){var oldRect=this._boundingRect;if(oldRect.x!=rectangle.x||oldRect.y!=rectangle.y||oldRect.width!=rectangle.width||oldRect.height!=rectangle.height){this._boundingRect=rectangle;this.invalidate()}};Object.defineProperty(Tooltip.prototype,"boundingContainer",{set:function(container){this._boundingContainer=container;container.events.on("sizechanged",this.updateBounds,this);container.events.on("positionchanged",this.updateBounds,this)},enumerable:true,configurable:true});Tooltip.prototype.updateBounds=function(){var boundingContainer=this._boundingContainer;var rect=spriteRectToSvg({x:boundingContainer.pixelX,y:boundingContainer.pixelY,width:boundingContainer.maxWidth,height:boundingContainer.maxHeight},boundingContainer);this.setBounds(rect)};Object.defineProperty(Tooltip.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(value){this.setPropertyValue("ignoreBounds",value)},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:true,configurable:true});Object.defineProperty(Tooltip.prototype,"tooltip",{get:function(){return undefined},enumerable:true,configurable:true});Tooltip.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.label.copyFrom(source.label);if(source._boundingRect){this._boundingRect=source._boundingRect}};Tooltip.prototype.asFunction=function(field){return field=="animationEasing"||_super.prototype.asIs.call(this,field)};return Tooltip}(Container);registry.registeredClasses["Tooltip"]=Tooltip;var Trapezoid=function(_super){__extends(Trapezoid,_super);function Trapezoid(){var _this=_super.call(this)||this;_this.className="Trapezoid";_this.element=_this.paper.add("path");_this.topSide=percent(100);_this.bottomSide=percent(100);_this.leftSide=percent(100);_this.rightSide=percent(100);_this.isMeasured=false;_this.applyTheme();return _this}Trapezoid.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.pixelWidth;var h=this.pixelHeight;var ts=relativeToValue(this.topSide,w);var bs=relativeToValue(this.bottomSide,w);var ls=relativeToValue(this.leftSide,h);var rs=relativeToValue(this.rightSide,h);var x0=(w-ts)/2;var y0=(h-ls)/2;var x1=w-(w-ts)/2;var y1=(h-rs)/2;var x2=w-(w-bs)/2;var y2=h-(h-rs)/2;var x3=(w-bs)/2;var y3=h-(h-ls)/2;var mt="";var mr="";var mb="";var ml="";if(hasValue(this.horizontalNeck)){var hn=this.horizontalNeck.value;mt=lineTo({x:w*hn,y:Math.max(y0,y1)});mb=lineTo({x:w*hn,y:Math.min(y2,y3)})}if(hasValue(this.verticalNeck)){var vn=this.verticalNeck.value;mr=lineTo({x:Math.min(x1,x2),y:h*vn});ml=lineTo({x:Math.max(x0,x3),y:h*vn})}var path=moveTo({x:x0,y:y0})+mt+lineTo({x:x1,y:y1})+mr+lineTo({x:x2,y:y2})+mb+lineTo({x:x3,y:y3})+ml;this.path=path};Object.defineProperty(Trapezoid.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(value){this.setPercentProperty("topSide",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Trapezoid.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(value){this.setPercentProperty("bottomSide",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Trapezoid.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(value){this.setPercentProperty("leftSide",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Trapezoid.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(value){this.setPercentProperty("rightSide",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(Trapezoid.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(value){this.setPropertyValue("horizontalNeck",value,true)},enumerable:true,configurable:true});Object.defineProperty(Trapezoid.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(value){this.setPropertyValue("verticalNeck",value,true)},enumerable:true,configurable:true});return Trapezoid}(Sprite);registry.registeredClasses["Trapezoid"]=Trapezoid;var Triangle=function(_super){__extends(Triangle,_super);function Triangle(){var _this=_super.call(this)||this;_this.className="Triangle";_this.element=_this.paper.add("path");_this.direction="top";_this.applyTheme();return _this}Triangle.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.pixelWidth;var h=this.pixelHeight;var path;switch(this.direction){case"right":path=moveTo({x:0,y:0})+lineTo({x:w,y:h/2})+lineTo({x:0,y:h})+closePath();break;case"left":path=moveTo({x:w,y:0})+lineTo({x:0,y:h/2})+lineTo({x:w,y:h})+closePath();break;case"bottom":path=moveTo({x:0,y:0})+lineTo({x:w,y:0})+lineTo({x:w/2,y:h})+closePath();break;case"top":path=moveTo({x:w/2,y:0})+lineTo({x:w,y:h})+lineTo({x:0,y:h})+closePath();break}this.path=path};Object.defineProperty(Triangle.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(value){this.setPropertyValue("direction",value,true)},enumerable:true,configurable:true});return Triangle}(Sprite);registry.registeredClasses["Triangle"]=Triangle;var Tension=function(){function Tension(tensionX,tensionY){this._tensionX=tensionX;this._tensionY=tensionY}Tension.prototype.smooth=function(points){for(var i=points.length-1;i>0;i--){var p0=points[i];var p1=points[i-1];if(Math.abs(p0.x-p1.x)<.1&&Math.abs(p0.y-p1.y)<.1){points.splice(i-1,1)}}var tensionX=this._tensionX;var tensionY=this._tensionY;if(points.length<3||tensionX>=1&&tensionY>=1){return polyline(points)}var first=points[0];var last=points[points.length-1];var closed=false;if(round$1(first.x,3)==round$1(last.x)&&round$1(first.y)==round$1(last.y)){closed=true}var path="";for(var i=0,len=points.length-1;i<len;i++){var p0=points[i-1];var p1=points[i];var p2=points[i+1];var p3=points[i+2];if(i===0){if(closed){p0=points[points.length-2]}else{p0=points[i]}}else if(i==points.length-2){if(closed){p3=points[1]}else{p3=points[i+1]}}var controlPointA=getCubicControlPointA(p0,p1,p2,p3,tensionX,tensionY);var controlPointB=getCubicControlPointB(p0,p1,p2,p3,tensionX,tensionY);path+=cubicCurveTo(p2,controlPointA,controlPointB)}return path};return Tension}();function wavedLine(point1,point2,waveLength,waveHeight,tension,adjustWaveLength){var x1=point1.x;var y1=point1.y;var x2=point2.x;var y2=point2.y;var distance=getDistance(point1,point2);if(adjustWaveLength){waveLength=distance/Math.round(distance/waveLength)}var d=registry.getCache(stringify(["wavedLine",point1.x,point2.x,point1.y,point2.y,waveLength,waveHeight]));if(!d){if(distance>0){var angle=Math.atan2(y2-y1,x2-x1);var cos=Math.cos(angle);var sin=Math.sin(angle);var waveLengthX=waveLength*cos;var waveLengthY=waveLength*sin;if(waveLength<=1||waveHeight<=1){d=lineTo(point2)}else{var halfWaveCount=Math.round(2*distance/waveLength);var points=[];var sign_1=1;if(x2<x1){sign_1*=-1}if(y2<y1){sign_1*=-1}for(var i=0;i<=halfWaveCount;i++){sign_1*=-1;var x=x1+i*waveLengthX/2+sign_1*waveHeight/2*sin;var y=y1+i*waveLengthY/2-sign_1*waveHeight/2*cos;points.push({x,y})}d=new Tension(tension,tension).smooth(points)}}else{d=""}registry.setCache(stringify(["wavedLine",point1.x,point2.x,point1.y,point2.y,waveLength,waveHeight]),d)}return d}var Monotone=function(){function Monotone(reversed,info){this._reversed=reversed;this._closed=info.closed}Monotone.prototype._curve=function(x0,x1,y0,y1,t0,t1){var dx=(x1-x0)/3;if(this._reversed){return cubicCurveTo({x:y1,y:x1},{x:y0+dx*t0,y:x0+dx},{x:y1-dx*t1,y:x1-dx})}else{return cubicCurveTo({x:x1,y:y1},{x:x0+dx,y:y0+dx*t0},{x:x1-dx,y:y1-dx*t1})}};Monotone.prototype.smooth=function(points){var _this=this;var x0=NaN;var x1=NaN;var y0=NaN;var y1=NaN;var t0=NaN;var point=0;var output="";each$2(points,(function(_a){var x=_a.x,y=_a.y;if(_this._reversed){var temp=x;x=y;y=temp}var t1=NaN;if(!(x===x1&&y===y1)){switch(point){case 0:point=1;if(_this._reversed){output+=lineTo({x:y,y:x})}else{output+=lineTo({x,y})}break;case 1:point=2;break;case 2:point=3;output+=_this._curve(x0,x1,y0,y1,slope2(x0,x1,y0,y1,t1=slope3(x0,x1,y0,y1,x,y)),t1);break;default:output+=_this._curve(x0,x1,y0,y1,t0,t1=slope3(x0,x1,y0,y1,x,y));break}x0=x1;x1=x;y0=y1;y1=y;t0=t1}}));switch(point){case 2:if(this._reversed){output+=lineTo({x:y1,y:x1})}else{output+=lineTo({x:x1,y:y1})}break;case 3:output+=this._curve(x0,x1,y0,y1,t0,slope2(x0,x1,y0,y1,t0));break}if(this._closed){output+=closePath()}return output};return Monotone}();function sign(x){return x<0?-1:1}function slope2(x0,x1,y0,y1,t){var h=x1-x0;return h?(3*(y1-y0)/h-t)/2:t}function slope3(x0,x1,y0,y1,x2,y2){var h0=x1-x0;var h1=x2-x1;var s0=(y1-y0)/(h0||h1<0&&-0);var s1=(y2-y1)/(h1||h0<0&&-0);var p=(s0*h1+s1*h0)/(h0+h1);return(sign(s0)+sign(s1))*Math.min(Math.abs(s0),Math.abs(s1),.5*Math.abs(p))||0}var MonotoneX=function(_super){__extends(MonotoneX,_super);function MonotoneX(info){return _super.call(this,false,info)||this}return MonotoneX}(Monotone);var MonotoneY=function(_super){__extends(MonotoneY,_super);function MonotoneY(info){return _super.call(this,true,info)||this}return MonotoneY}(Monotone);var WavedCircle=function(_super){__extends(WavedCircle,_super);function WavedCircle(){var _this=_super.call(this)||this;_this.className="WavedCircle";_this.element=_this.paper.add("path");_this.waveLength=16;_this.waveHeight=4;_this.fill=undefined;_this.fillOpacity=0;_this.tension=.8;_this.applyTheme();return _this}WavedCircle.prototype.draw=function(){var path="";var radius=this.pixelRadius;if(radius>0){var points=this.getPoints(radius);path=moveTo(points[0])+new Tension(this.tension,this.tension).smooth(points)}var innerRadius=this.pixelInnerRadius;if(innerRadius>0){var points=this.getPoints(innerRadius);points.reverse();path+=moveTo(points[0])+new Tension(this.tension,this.tension).smooth(points)}this.path=path};WavedCircle.prototype.getPoints=function(radius){var circleLength=radius*Math.PI*2;var halfWaveHeight=this.waveHeight/2;var waveLength=circleLength/Math.round(circleLength/this.waveLength);var halfWaveLength=waveLength/2;var points=[];var count=circleLength/waveLength;for(var i=0;i<=count;i++){var angle1=i*waveLength/circleLength*360;var angle2=(i*waveLength+halfWaveLength)/circleLength*360;points.push({x:(radius-halfWaveHeight)*cos(angle1),y:(radius-halfWaveHeight)*sin(angle1)});points.push({x:(radius+halfWaveHeight)*cos(angle2),y:(radius+halfWaveHeight)*sin(angle2)})}points.pop();return points};Object.defineProperty(WavedCircle.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedCircle.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,min$2(this.innerWidth/2,this.innerHeight/2))},enumerable:true,configurable:true});Object.defineProperty(WavedCircle.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(value){this.setPropertyValue("waveLength",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedCircle.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(value){this.setPropertyValue("waveHeight",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedCircle.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(value){this.setPropertyValue("tension",value);this.invalidate()},enumerable:true,configurable:true});return WavedCircle}(Circle);registry.registeredClasses["WavedCircle"]=WavedCircle;var WavedLine=function(_super){__extends(WavedLine,_super);function WavedLine(){var _this=_super.call(this)||this;_this.className="WavedLine";_this.element=_this.paper.add("path");_this.waveLength=16;_this.waveHeight=4;_this.tension=.8;_this.pixelPerfect=false;_this.fill=color();_this.applyTheme();return _this}WavedLine.prototype.draw=function(){var p1={x:this.x1,y:this.y1};var p2={x:this.x2,y:this.y2};this.path=moveTo(p1)+wavedLine(p1,p2,this.waveLength,this.waveHeight,this.tension,true)};Object.defineProperty(WavedLine.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(value){this.setPropertyValue("waveLength",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedLine.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(value){this.setPropertyValue("waveHeight",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedLine.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(value){this.setPropertyValue("tension",value);this.invalidate()},enumerable:true,configurable:true});return WavedLine}(Line);var WavedRectangle=function(_super){__extends(WavedRectangle,_super);function WavedRectangle(){var _this=_super.call(this)||this;_this.className="WavedRectangle";_this.element=_this.paper.add("path");_this.waveLength=16;_this.waveHeight=4;_this.tension=.8;_this.setPropertyValue("wavedLeft",true);_this.setPropertyValue("wavedRight",true);_this.setPropertyValue("wavedTop",true);_this.setPropertyValue("wavedBottom",true);_this.applyTheme();return _this}WavedRectangle.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.pixelWidth;var h=this.pixelHeight;if(w>0&&h>0){var p1={x:0,y:0};var p2={x:w,y:0};var p3={x:w,y:h};var p4={x:0,y:h};var waveLengthH=Math.min(w,this.waveLength);var waveHeightH=Math.min(h,this.waveHeight);var waveLengthV=Math.min(h,this.waveLength);var waveHeightV=Math.min(w,this.waveHeight);var td="";var rd="";var bd="";var ld="";if(this.wavedTop){td=wavedLine(p1,p2,waveLengthH,waveHeightH,this.tension,true)}if(this.wavedRight){rd=wavedLine(p2,p3,waveLengthV,waveHeightV,this.tension,true)}if(this.wavedBottom){bd=wavedLine(p3,p4,waveLengthH,waveHeightH,this.tension,true)}if(this.wavedLeft){ld=wavedLine(p4,p1,waveLengthV,waveHeightV,this.tension,true)}this.path=moveTo(p1)+td+lineTo(p2)+rd+lineTo(p3)+bd+lineTo(p4)+ld+"z"}};Object.defineProperty(WavedRectangle.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(value){this.setPropertyValue("waveLength",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedRectangle.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(value){this.setPropertyValue("waveHeight",value);this.invalidate()},enumerable:true,configurable:true});WavedRectangle.prototype.setWavedSides=function(top,right,bottom,left){this.wavedTop=top;this.wavedRight=right;this.wavedBottom=bottom;this.wavedLeft=left};Object.defineProperty(WavedRectangle.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(value){this.setPropertyValue("tension",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(WavedRectangle.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(value){this.setPropertyValue("wavedRight",value,true)},enumerable:true,configurable:true});Object.defineProperty(WavedRectangle.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(value){this.setPropertyValue("wavedLeft",value,true)},enumerable:true,configurable:true});Object.defineProperty(WavedRectangle.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(value){this.setPropertyValue("wavedTop",value,true)},enumerable:true,configurable:true});Object.defineProperty(WavedRectangle.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(value){this.setPropertyValue("wavedBottom",value,true)},enumerable:true,configurable:true});return WavedRectangle}(Rectangle);var ZoomOutButton=function(_super){__extends(ZoomOutButton,_super);function ZoomOutButton(){var _this=_super.call(this)||this;_this.className="ZoomOutButton";_this.padding(9,9,9,9);_this.showSystemTooltip=true;var interfaceColors=new InterfaceColorSet;var background=_this.background;background.cornerRadius(20,20,20,20);background.fill=interfaceColors.getFor("primaryButton");background.stroke=interfaceColors.getFor("primaryButtonStroke");background.strokeOpacity=0;background.states.getKey("hover").properties.fill=interfaceColors.getFor("primaryButtonHover");background.states.getKey("down").properties.fill=interfaceColors.getFor("primaryButtonActive");var icon=new Sprite;icon.element=_this.paper.add("path");var path=moveTo({x:0,y:0});path+=lineTo({x:11,y:0});icon.path=path;icon.pixelPerfect=true;icon.padding(8,3,8,3);icon.stroke=interfaceColors.getFor("primaryButtonText");_this.icon=icon;_this.applyTheme();return _this}ZoomOutButton.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Zoom Out")}};return ZoomOutButton}(Button);registry.registeredClasses["ZoomOutButton"]=ZoomOutButton;var PlayButton=function(_super){__extends(PlayButton,_super);function PlayButton(){var _this=_super.call(this)||this;_this.className="PlayButton";_this.padding(12,12,12,12);_this.showSystemTooltip=true;var interfaceColors=new InterfaceColorSet;var background=_this.background;background.cornerRadius(25,25,25,25);background.fill=interfaceColors.getFor("primaryButton");background.stroke=interfaceColors.getFor("primaryButtonStroke");background.strokeOpacity=0;background.states.getKey("hover").properties.fill=interfaceColors.getFor("primaryButtonHover");background.states.getKey("down").properties.fill=interfaceColors.getFor("primaryButtonActive");var playIcon=new Triangle;playIcon.direction="right";playIcon.width=9;playIcon.height=11;playIcon.marginLeft=1;playIcon.marginRight=1;playIcon.horizontalCenter="middle";playIcon.verticalCenter="middle";playIcon.stroke=interfaceColors.getFor("primaryButtonText");playIcon.fill=playIcon.stroke;_this.icon=playIcon;var stopIcon=new RoundedRectangle;stopIcon.width=11;stopIcon.height=11;stopIcon.horizontalCenter="middle";stopIcon.verticalCenter="middle";stopIcon.cornerRadius(0,0,0,0);stopIcon.stroke=interfaceColors.getFor("primaryButtonText");stopIcon.fill=playIcon.stroke;_this.togglable=true;var activeState=_this.states.create("active");activeState.transitionDuration=0;activeState.properties.icon=stopIcon;_this.defaultState.transitionDuration=0;_this.applyTheme();return _this}PlayButton.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Play")}};return PlayButton}(Button);registry.registeredClasses["PlayButton"]=PlayButton;var ColorModifier=function(_super){__extends(ColorModifier,_super);function ColorModifier(){var _this=_super.call(this)||this;_this.className="ColorModifier";_this.applyTheme();return _this}ColorModifier.prototype.modify=function(value){return value};return ColorModifier}(BaseObject);registry.registeredClasses["ColorModifier"]=ColorModifier;var GradientModifier=function(_super){__extends(GradientModifier,_super);function GradientModifier(){var _this=_super.call(this)||this;_this.lightnesses=[];_this.brightnesses=[];_this.opacities=[];_this.offsets=[];_this.className="GradientModifier";_this.applyTheme();return _this}Object.defineProperty(GradientModifier.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(value){this._lightnesses=value;this._brightnesses=[]},enumerable:true,configurable:true});Object.defineProperty(GradientModifier.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(value){this._brightnesses=value;this._lightnesses=[]},enumerable:true,configurable:true});Object.defineProperty(GradientModifier.prototype,"opacities",{get:function(){return this._opacities},set:function(value){this._opacities=value},enumerable:true,configurable:true});Object.defineProperty(GradientModifier.prototype,"offsets",{get:function(){return this._offsets},set:function(value){this._offsets=value},enumerable:true,configurable:true});GradientModifier.prototype.modify=function(value){this.gradient.clear();var count=0;if(this.opacities){count=max$2(count,this.opacities.length)}if(this.lightnesses){count=max$2(count,this.lightnesses.length)}if(this.brightnesses){count=max$2(count,this.brightnesses.length)}var opacity=1,lightness,brightness;for(var i=0;i<count;i++){var color=value;if(this.opacities&&isNumber$1(this.opacities[i])){opacity=this.opacities[i]}if(this.lightnesses&&isNumber$1(this.lightnesses[i])){lightness=this.lightnesses[i];brightness=undefined}if(this.brightnesses&&isNumber$1(this.brightnesses[i])){brightness=this.brightnesses[i];lightness=undefined}if(isNumber$1(brightness)){color=value.brighten(this.brightnesses[i])}else if(isNumber$1(lightness)){color=value.lighten(this.lightnesses[i])}var offset=this.offsets[i];this.gradient.addColor(color,opacity,offset)}return this.gradient};GradientModifier.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this._offsets=source.offsets;this._brightnesses=source.brightnesses;this._lightnesses=source.lightnesses;this._opacities=source.opacities};return GradientModifier}(ColorModifier);registry.registeredClasses["GradientModifier"]=GradientModifier;var LinearGradientModifier=function(_super){__extends(LinearGradientModifier,_super);function LinearGradientModifier(){var _this=_super.call(this)||this;_this.className="LinearGradientModifier";_this.gradient=new LinearGradient;_this.applyTheme();return _this}LinearGradientModifier.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.gradient=source.gradient.clone()};return LinearGradientModifier}(GradientModifier);registry.registeredClasses["LinearGradientModifier"]=LinearGradientModifier;var Cone=function(_super){__extends(Cone,_super);function Cone(){var _this=_super.call(this)||this;_this.className="Cone";_this.angle=30;_this.radius=percent(100);_this.topRadius=percent(100);_this.top=_this.createChild(Ellipse);_this.top.shouldClone=false;_this.bottom=_this.createChild(Ellipse);_this.bottom.shouldClone=false;_this.body=_this.createChild(Sprite);_this.body.shouldClone=false;_this.body.setElement(_this.paper.add("path"));_this.layout="none";_this.bodyFillModifier=new LinearGradientModifier;_this.bodyFillModifier.lightnesses=[0,-.25,0];_this.body.fillModifier=_this.bodyFillModifier;_this.applyTheme();return _this}Cone.prototype.draw=function(){_super.prototype.draw.call(this);copyProperties$1(this,this.top,visualProperties);copyProperties$1(this,this.bottom,visualProperties);copyProperties$1(this,this.body,visualProperties);var w=this.innerWidth;var h=this.innerHeight;var bottom=this.bottom;var top=this.top;var angle=this.angle;var radiusBase;var dx;var dy;if(this.orientation=="horizontal"){radiusBase=h/2;bottom.y=h/2;top.y=h/2;top.x=w;dx=(90-angle)/90;dy=0;this.bodyFillModifier.gradient.rotation=90}else{dx=0;dy=(90-angle)/90;radiusBase=w/2;bottom.y=h;bottom.x=w/2;top.x=w/2;this.bodyFillModifier.gradient.rotation=0}var radius=this.radius.value*radiusBase;var topRadius=this.topRadius.value*radiusBase;bottom.radius=radius-radius*dx;bottom.radiusY=radius-radius*dy;top.radius=topRadius-topRadius*dx;top.radiusY=topRadius-topRadius*dy;var path;if(this.orientation=="horizontal"){path=moveTo({x:0,y:h/2-bottom.radiusY})+arcTo(-90,-180,bottom.radius,bottom.radiusY)+lineTo({x:w,y:h/2+top.radiusY})+arcTo(90,180,top.radius,top.radiusY)+closePath()}else{path=moveTo({x:w/2-top.radius,y:0})+arcTo(180,-180,top.radius,top.radiusY)+lineTo({x:w/2+bottom.radius,y:h})+arcTo(0,180,bottom.radius,bottom.radiusY)+closePath()}this.body.path=path};Object.defineProperty(Cone.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){this.setPropertyValue("angle",value,true)},enumerable:true,configurable:true});Object.defineProperty(Cone.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPropertyValue("radius",value,true)},enumerable:true,configurable:true});Object.defineProperty(Cone.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(value){this.setPropertyValue("topRadius",value,true)},enumerable:true,configurable:true});Object.defineProperty(Cone.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){this.setPropertyValue("orientation",value,true)},enumerable:true,configurable:true});return Cone}(Container);var LightenFilter=function(_super){__extends(LightenFilter,_super);function LightenFilter(){var _this=_super.call(this)||this;_this.className="LightenFilter";_this.feColorMatrix=_this.paper.add("feColorMatrix");_this.feColorMatrix.attr({type:"matrix"});_this.filterPrimitives.push(_this.feColorMatrix);_this.lightness=0;_this.applyTheme();return _this}Object.defineProperty(LightenFilter.prototype,"lightness",{get:function(){return this.properties["lightness"]},set:function(value){this.properties["lightness"]=value;var v=value+1;this.feColorMatrix.attr({values:v+" 0 0 0 0 0 "+v+" 0 0 0 0 0 "+v+" 0 0 0 0 0 1 0"})},enumerable:true,configurable:true});return LightenFilter}(Filter);registry.registeredClasses["LightenFilter"]=LightenFilter;var Rectangle3D=function(_super){__extends(Rectangle3D,_super);function Rectangle3D(){var _this=_super.call(this)||this;_this.angle=30;_this.depth=30;_this.className="Rectangle3D";_this.layout="none";var sideBack=_this.createChild(Sprite);sideBack.shouldClone=false;sideBack.setElement(_this.paper.add("path"));sideBack.isMeasured=false;_this.sideBack=sideBack;_this._disposers.push(_this.sideBack);var sideBottom=_this.createChild(Sprite);sideBottom.shouldClone=false;sideBottom.setElement(_this.paper.add("path"));sideBottom.isMeasured=false;_this.sideBottom=sideBottom;_this._disposers.push(_this.sideBottom);var sideLeft=_this.createChild(Sprite);sideLeft.shouldClone=false;sideLeft.setElement(_this.paper.add("path"));sideLeft.isMeasured=false;_this.sideLeft=sideLeft;_this._disposers.push(_this.sideLeft);var sideRight=_this.createChild(Sprite);sideRight.shouldClone=false;sideRight.setElement(_this.paper.add("path"));sideRight.isMeasured=false;_this.sideRight=sideRight;_this._disposers.push(_this.sideRight);var sideTop=_this.createChild(Sprite);sideTop.shouldClone=false;sideTop.setElement(_this.paper.add("path"));sideTop.isMeasured=false;_this.sideTop=sideTop;_this._disposers.push(_this.sideTop);var sideFront=_this.createChild(Sprite);sideFront.shouldClone=false;sideFront.setElement(_this.paper.add("path"));sideFront.isMeasured=false;_this.sideFront=sideFront;_this._disposers.push(_this.sideFront);_this.applyTheme();return _this}Rectangle3D.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.innerWidth;var h=this.innerHeight;var depth=this.depth;var angle=this.angle;var sin$1=sin(angle);var cos$1=cos(angle);var a={x:0,y:0};var b={x:w,y:0};var c={x:w,y:h};var d={x:0,y:h};var ah={x:depth*cos$1,y:-depth*sin$1};var bh={x:depth*cos$1+w,y:-depth*sin$1};var ch={x:depth*cos$1+w,y:-depth*sin$1+h};var dh={x:depth*cos$1,y:-depth*sin$1+h};this.sideFront.path=moveTo(a)+lineTo(b)+lineTo(c)+lineTo(d)+closePath();this.sideBack.path=moveTo(ah)+lineTo(bh)+lineTo(ch)+lineTo(dh)+closePath();this.sideLeft.path=moveTo(a)+lineTo(ah)+lineTo(dh)+lineTo(d)+closePath();this.sideRight.path=moveTo(b)+lineTo(bh)+lineTo(ch)+lineTo(c)+closePath();this.sideBottom.path=moveTo(d)+lineTo(dh)+lineTo(ch)+lineTo(c)+closePath();this.sideTop.path=moveTo(a)+lineTo(ah)+lineTo(bh)+lineTo(b)+closePath()};Object.defineProperty(Rectangle3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(value){this.setPropertyValue("depth",value,true)},enumerable:true,configurable:true});Object.defineProperty(Rectangle3D.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){this.setPropertyValue("angle",value,true)},enumerable:true,configurable:true});Rectangle3D.prototype.setFill=function(value){_super.prototype.setFill.call(this,value);if(!isObject$4(value)||"r"in value){value=toColor(value)}var colorStr;if(value instanceof Color){colorStr=value.hex}else if(value instanceof LinearGradient||value instanceof RadialGradient){colorStr=value.stops.getIndex(0).color.hex}else{var filter=new LightenFilter;filter.lightness=-.2;this.sideBack.filters.push(filter);var filter2=filter.clone();filter2.lightness=-.4;this.sideLeft.filters.push(filter2);var filter3=filter.clone();filter3.lightness=-.2;this.sideRight.filters.push(filter3);var filter4=filter.clone();filter4.lightness=-.1;this.sideTop.filters.push(filter4);var filter5=filter.clone();filter5.lightness=-.5;this.sideBottom.filters.push(filter5)}if(colorStr){this.sideBack.fill=color(colorStr).lighten(-.2);this.sideLeft.fill=color(colorStr).lighten(-.4);this.sideRight.fill=color(colorStr).lighten(-.2);this.sideTop.fill=color(colorStr).lighten(-.1);this.sideBottom.fill=color(colorStr).lighten(-.5)}};Rectangle3D.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.sideBack.copyFrom(source.sideBack);this.sideLeft.copyFrom(source.sideLeft);this.sideRight.copyFrom(source.sideRight);this.sideTop.copyFrom(source.sideTop);this.sideBottom.copyFrom(source.sideBottom)};return Rectangle3D}(Container);var Slice3D=function(_super){__extends(Slice3D,_super);function Slice3D(){var _this=_super.call(this)||this;_this.className="Slice3D";_this.layout="none";var edge=_this.createChild(Sprite);_this.edge=edge;edge.shouldClone=false;edge.isMeasured=false;edge.toBack();_this.angle=30;_this.depth=20;var sideA=_this.createChild(Sprite);_this.sideA=sideA;sideA.shouldClone=false;sideA.isMeasured=false;var sideB=_this.createChild(Sprite);_this.sideB=sideB;sideB.shouldClone=false;sideB.isMeasured=false;_this.applyTheme();return _this}Slice3D.prototype.setFill=function(value){_super.prototype.setFill.call(this,value);var colorStr;if(value instanceof Color){colorStr=value.hex}else if(value instanceof LinearGradient||value instanceof RadialGradient){colorStr=value.stops.getIndex(0).color.hex}else{var filter=new LightenFilter;filter.lightness=-.25;this.edge.filters.push(filter);this.sideA.filters.push(filter.clone());this.sideB.filters.push(filter.clone())}if(colorStr){var edgeFill=color(colorStr).lighten(-.25);this.edge.fill=edgeFill;this.sideA.fill=edgeFill;this.sideB.fill=edgeFill;this.edge.stroke=edgeFill;this.sideA.stroke=edgeFill;this.sideB.stroke=edgeFill}};Slice3D.prototype.draw=function(){this.cornerRadius=0;this.innerCornerRadius=0;_super.prototype.draw.call(this);if(this.arc!==0&&this.radius>0&&this.depth>0){this.sideB.show(0);this.sideA.show(0);this.edge.show(0);var startAngle=this.startAngle;var arc=this.arc;var innerRadius=this.pixelInnerRadius||0;var radiusY=this.radiusY||0;var radius=this.radius;var endAngle=startAngle+arc;var innerRadiusY=radiusY/radius*innerRadius;var a0={x:cos(startAngle)*innerRadius,y:sin(startAngle)*innerRadiusY};var b0={x:cos(startAngle)*radius,y:sin(startAngle)*radiusY};var c0={x:cos(endAngle)*radius,y:sin(endAngle)*radiusY};var d0={x:cos(endAngle)*innerRadius,y:sin(endAngle)*innerRadiusY};var h=this.depth;var ah={x:a0.x,y:a0.y-h};var bh={x:b0.x,y:b0.y-h};var ch={x:c0.x,y:c0.y-h};var dh={x:d0.x,y:d0.y-h};var edgePath="";var count=Math.ceil(arc/5);var step=arc/count;var mangle=startAngle;var prevPoint=bh;for(var i=0;i<count;i++){mangle+=step;if(mangle>0&&mangle<180){edgePath+=moveTo(prevPoint);var pp={x:cos(mangle)*radius,y:sin(mangle)*radiusY-h};edgePath+=lineTo({x:prevPoint.x,y:prevPoint.y+h});edgePath+=arcToPoint({x:pp.x,y:pp.y+h},radius,radiusY,true);edgePath+=lineTo(pp);edgePath+=arcToPoint(prevPoint,radius,radiusY);edgePath+="z";prevPoint=pp}else{edgePath+=moveTo(prevPoint);var pp={x:cos(mangle)*radius,y:sin(mangle)*radiusY-h};edgePath+=arcToPoint(pp,radius,radiusY,true);edgePath+=lineTo({x:pp.x,y:pp.y+h});edgePath+=arcToPoint({x:prevPoint.x,y:prevPoint.y+h},radius,radiusY);edgePath+=lineTo(prevPoint);edgePath+="z";prevPoint=pp}}prevPoint=ah;mangle=startAngle;for(var i=0;i<count;i++){mangle+=step;if(mangle>0&&mangle<180){edgePath+=moveTo(prevPoint);var pp={x:cos(mangle)*innerRadius,y:sin(mangle)*innerRadiusY-h};edgePath+=lineTo({x:prevPoint.x,y:prevPoint.y+h});edgePath+=arcToPoint({x:pp.x,y:pp.y+h},innerRadius,innerRadiusY,true);edgePath+=lineTo(pp);edgePath+=arcToPoint(prevPoint,innerRadius,innerRadiusY);edgePath+="z";prevPoint=pp}else{edgePath+=moveTo(prevPoint);var pp={x:cos(mangle)*innerRadius,y:sin(mangle)*innerRadiusY-h};edgePath+=arcToPoint(pp,innerRadius,innerRadiusY,true);edgePath+=lineTo({x:pp.x,y:pp.y+h});edgePath+=arcToPoint({x:prevPoint.x,y:prevPoint.y+h},innerRadius,innerRadiusY);edgePath+=lineTo(prevPoint);edgePath+="z";prevPoint=pp}}this.edge.path=edgePath;this.sideA.path=moveTo(a0)+lineTo(b0)+lineTo(bh)+lineTo(ah)+closePath();this.sideB.path=moveTo(c0)+lineTo(d0)+lineTo(dh)+lineTo(ch)+closePath();if(this.startAngle<90){this.sideA.toBack()}else{this.sideA.toFront()}if(this.startAngle+this.arc>90){this.sideB.toBack()}else{this.sideB.toFront()}this.slice.dy=-h}else{this.sideA.hide(0);this.sideB.hide(0);this.edge.hide(0)}};Object.defineProperty(Slice3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(depth){this.setPropertyValue("depth",depth,true)},enumerable:true,configurable:true});Object.defineProperty(Slice3D.prototype,"angle",{get:function(){var angle=this.getPropertyValue("angle");if(!isNumber$1(angle)){angle=0}return angle},set:function(value){this.setPropertyValue("angle",value,true)},enumerable:true,configurable:true});Object.defineProperty(Slice3D.prototype,"radiusY",{get:function(){var radiusY=this.getPropertyValue("radiusY");if(!isNumber$1(radiusY)){radiusY=this.radius-this.radius*this.angle/90}return radiusY},set:function(value){this.setPropertyValue("radiusY",value,true)},enumerable:true,configurable:true});Slice3D.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.edge.copyFrom(source.edge);this.sideA.copyFrom(source.sideA);this.sideB.copyFrom(source.sideB)};return Slice3D}(Slice);var RadialGradientModifier=function(_super){__extends(RadialGradientModifier,_super);function RadialGradientModifier(){var _this=_super.call(this)||this;_this.className="RadialGradientModifier";_this.gradient=new RadialGradient;_this.applyTheme();return _this}RadialGradientModifier.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.gradient=source.gradient.clone()};return RadialGradientModifier}(GradientModifier);registry.registeredClasses["RadialGradientModifier"]=RadialGradientModifier;var LinePattern=function(_super){__extends(LinePattern,_super);function LinePattern(){var _this=_super.call(this)||this;_this.properties["gap"]=0;_this._line=_this.paper.add("path");_this.addElement(_this._line);return _this}LinePattern.prototype.draw=function(){_super.prototype.draw.call(this);if(Math.round(this.rotation/90)!=this.rotation/90){this.properties["shapeRendering"]="auto"}if(this._line){var w=this.width;var h=this.height;var path="";if(!this.gap){if(Math.round(this.rotation/90)!=this.rotation/90){path=moveTo({x:-w,y:h/2})+lineTo({x:w*2,y:h/2});this.properties["rotationX"]=this.width/2;this.properties["rotationY"]=this.height/2}else{path=moveTo({x:0,y:0})+lineTo({x:w,y:0})}}else{var step=this.gap+this.strokeWidth;var count=this.height/step;for(var i=-count/2;i<count*1.5;i++){if(Math.round(this.rotation/90)!=this.rotation/90){path+=moveTo({x:-w,y:(i+.5)*step})+lineTo({x:w*2,y:(i+.5)*step});this.properties["rotationX"]=this.width/2;this.properties["rotationY"]=this.height/2}else{path+=moveTo({x:-w,y:i*step})+lineTo({x:w*2,y:i*step})}}}this._line.attr({d:path})}};Object.defineProperty(LinePattern.prototype,"gap",{get:function(){return this.properties["gap"]},set:function(value){this.properties["gap"]=value;this.draw()},enumerable:true,configurable:true});return LinePattern}(Pattern);registry.registeredClasses["LinePattern"]=LinePattern;var CirclePattern=function(_super){__extends(CirclePattern,_super);function CirclePattern(){var _this=_super.call(this)||this;_this.properties["radius"]=2;_this._circle=_this.paper.add("circle");_this.addElement(_this._circle);_this.shapeRendering="auto";return _this}CirclePattern.prototype.draw=function(){_super.prototype.draw.call(this);if(this._circle){this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})}};Object.defineProperty(CirclePattern.prototype,"radius",{get:function(){return this.properties["radius"]},set:function(value){this.properties["radius"]=value;this.draw()},enumerable:true,configurable:true});return CirclePattern}(Pattern);registry.registeredClasses["CirclePattern"]=CirclePattern;var RectPattern=function(_super){__extends(RectPattern,_super);function RectPattern(){var _this=_super.call(this)||this;_this.rectHeight=1;_this.rectWidth=1;_this._rect=_this.paper.add("rect");_this.addElement(_this._rect);return _this}RectPattern.prototype.draw=function(){_super.prototype.draw.call(this);this.properties["rotationX"]=this.width/2;this.properties["rotationY"]=this.height/2;if(this._rect){this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})}};Object.defineProperty(RectPattern.prototype,"rectWidth",{get:function(){return this.properties["rectWidth"]},set:function(value){this.properties["rectWidth"]=value;this.draw()},enumerable:true,configurable:true});Object.defineProperty(RectPattern.prototype,"rectHeight",{get:function(){return this.properties["rectHeight"]},set:function(value){this.properties["rectHeight"]=value;this.draw()},enumerable:true,configurable:true});return RectPattern}(Pattern);registry.registeredClasses["RectPattern"]=RectPattern;var ColorizeFilter=function(_super){__extends(ColorizeFilter,_super);function ColorizeFilter(){var _this=_super.call(this)||this;_this.className="ColorizeFilter";_this.feColorMatrix=_this.paper.add("feColorMatrix");_this.feColorMatrix.attr({type:"matrix"});_this.filterPrimitives.push(_this.feColorMatrix);_this.intensity=1;_this.applyTheme();return _this}ColorizeFilter.prototype.applyFilter=function(){var i=this.intensity;var ii=1-i;var r;var g;var b;var color=this.color;if(color&&color.rgb){r=color.rgb.r/255*i;g=color.rgb.g/255*i;b=color.rgb.b/255*i}else{r=0;g=0;b=0}this.feColorMatrix.attr({values:ii+" 0 0 0 "+r+" 0 "+ii+" 0 0 "+g+" 0 0 "+ii+" 0 "+b+" 0 0 0 1 0"})};Object.defineProperty(ColorizeFilter.prototype,"color",{get:function(){return this.properties["color"]},set:function(value){this.properties["color"]=value;this.applyFilter()},enumerable:true,configurable:true});Object.defineProperty(ColorizeFilter.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(value){this.properties.intensity=value;this.applyFilter()},enumerable:true,configurable:true});return ColorizeFilter}(Filter);registry.registeredClasses["ColorizeFilter"]=ColorizeFilter;var DesaturateFilter=function(_super){__extends(DesaturateFilter,_super);function DesaturateFilter(){var _this=_super.call(this)||this;_this.className="DesaturateFilter";_this.feColorMatrix=_this.paper.add("feColorMatrix");_this.feColorMatrix.attr({type:"saturate"});_this.filterPrimitives.push(_this.feColorMatrix);_this.width=120;_this.height=120;_this.saturation=0;_this.applyTheme();return _this}Object.defineProperty(DesaturateFilter.prototype,"saturation",{get:function(){return this.properties["saturation"]},set:function(value){this.properties["saturation"]=value;this.feColorMatrix.attr({values:value.toString()})},enumerable:true,configurable:true});return DesaturateFilter}(Filter);registry.registeredClasses["DesaturateFilter"]=DesaturateFilter;var BlurFilter=function(_super){__extends(BlurFilter,_super);function BlurFilter(){var _this=_super.call(this)||this;_this.className="BlurFilter";_this.feGaussianBlur=_this.paper.add("feGaussianBlur");_this.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"});_this.filterPrimitives.push(_this.feGaussianBlur);_this.width=200;_this.height=200;_this.blur=1.5;_this.applyTheme();return _this}Object.defineProperty(BlurFilter.prototype,"blur",{get:function(){return this.properties.blur},set:function(value){this.properties.blur=value;this.feGaussianBlur.attr({stdDeviation:value/this.scale})},enumerable:true,configurable:true});return BlurFilter}(Filter);registry.registeredClasses["BlurFilter"]=BlurFilter;var FocusFilter=function(_super){__extends(FocusFilter,_super);function FocusFilter(){var _this=_super.call(this)||this;_this.className="FocusFilter";_this.feFlood=_this.paper.add("feFlood");_this.feFlood.attr({"flood-color":(new InterfaceColorSet).getFor("primaryButtonHover"),result:"base"});_this.filterPrimitives.push(_this.feFlood);_this.feMorphology=_this.paper.add("feMorphology");_this.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"});_this.filterPrimitives.push(_this.feMorphology);_this.feColorMatrix=_this.paper.add("feColorMatrix");_this.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"});_this.filterPrimitives.push(_this.feColorMatrix);_this.feComposite=_this.paper.add("feComposite");_this.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"});_this.filterPrimitives.push(_this.feComposite);_this.feBlend=_this.paper.add("feBlend");_this.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"});_this.filterPrimitives.push(_this.feBlend);_this.width=130;_this.height=130;_this.applyTheme();return _this}Object.defineProperty(FocusFilter.prototype,"stroke",{get:function(){return this.properties["stroke"]},set:function(value){this.properties["stroke"]=value;this.feFlood.attr({"flood-color":value})},enumerable:true,configurable:true});Object.defineProperty(FocusFilter.prototype,"strokeWidth",{get:function(){return this.properties["strokeWidth"]},set:function(value){this.properties["strokeWidth"]=value;this.feMorphology.attr({radius:value})},enumerable:true,configurable:true});Object.defineProperty(FocusFilter.prototype,"opacity",{get:function(){return this.properties["opacity"]},set:function(value){this.properties["opacity"]=value;this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+value+" 0"})},enumerable:true,configurable:true});FocusFilter.prototype.setSprite=function(value){if(this._sprite&&this._sprite!=value){this._sprite.group.removeStyle("outline")}value.group.addStyle({outline:"none"});_super.prototype.setSprite.call(this,value)};return FocusFilter}(Filter);var ColorSet=function(_super){__extends(ColorSet,_super);function ColorSet(){var _this=_super.call(this)||this;_this._list=[];_this._currentStep=0;_this._startIndex=0;_this._currentPass=0;_this.baseColor=new Color({r:103,g:183,b:220});_this.stepOptions={};_this.passOptions={brighten:-.2};_this.step=1;_this.minColors=20;_this.minLightness=.2;_this.maxLightness=.9;_this.shuffle=false;_this.wrap=true;_this.reuse=false;_this.saturation=1;_this.className="ColorSet";_this.applyTheme();return _this}Object.defineProperty(ColorSet.prototype,"list",{get:function(){if(!this._list){this.generate(this.minColors)}return this._list},set:function(value){this._list=value;this.reset()},enumerable:true,configurable:true});ColorSet.prototype.getReusableColor=function(index){if(this._list.length==0){this.generate(1);return this.list[0]}else{var tmpstep=index-Math.floor(index/this._list.length)*this.list.length;return this.list[tmpstep]}};ColorSet.prototype.next=function(){var color;if(this.list.length<=this._currentStep){if(this.reuse){color=this.getReusableColor(this._currentStep)}else{this.generate(max$2(this.minColors,this._currentStep+1));color=this.list[this._currentStep]}}else{color=this.list[this._currentStep]}this._currentStep+=this.step;return color.saturate(this.saturation)};ColorSet.prototype.getIndex=function(i){var color;if(this.list.length<=i){if(this.reuse){color=this.getReusableColor(i)}else{this.generate(this.minColors);color=this.getIndex(i)}}else{color=this.list[i]}return color.saturate(this.saturation)};ColorSet.prototype.reset=function(){this._currentStep=this._startIndex};Object.defineProperty(ColorSet.prototype,"currentStep",{get:function(){return this._currentStep},set:function(value){this._currentStep=value},enumerable:true,configurable:true});Object.defineProperty(ColorSet.prototype,"startIndex",{get:function(){return this._startIndex},set:function(value){this._startIndex=value;this.reset()},enumerable:true,configurable:true});ColorSet.prototype.generate=function(count){var curColor=this.currentColor;var hsl=rgbToHsl(getValue$4(curColor.rgb));var hueStep=hasValue(this.stepOptions.hue)?this.stepOptions.hue:1/count;var mods={brighten:0,lighten:0,hue:hsl.h,lightness:hsl.l,saturation:hsl.s};var hues=[];var startIndex=this.list.length==0?0:1;if(this.reuse){for(var i=startIndex;i<=count;i++){hues.push(rgbToHsl(getValue$4(this._list[i].rgb)).h)}}else{for(var i=startIndex;i<=count;i++){var h=hsl.h+hueStep*i;if(this.wrap&&h>1){h-=1}hues.push(h)}}if(this.shuffle){hues.sort((function(a,b){return Math.random()-.5}))}for(var i=0;i<count;i++){if(this.reuse){hsl=rgbToHsl(getValue$4(this._list[i].rgb))}else{hsl.h=hues.shift()}this.applyStepOptions(hsl,mods,i,this._currentPass);var c=color(hslToRgb(hsl));var brighten=(this.stepOptions.brighten||0)*i+(this.passOptions.brighten||0)*this._currentPass;if(brighten!=0){if(this.wrap){brighten=fitNumberRelative(brighten,this.minLightness,this.maxLightness)}else{brighten=fitNumber(brighten,this.minLightness,this.maxLightness)}c=c.brighten(brighten)}var lighten=(this.stepOptions.lighten||0)*i+(this.passOptions.lighten||0)*this._currentPass;if(lighten!=0){if(this.wrap){lighten=fitNumberRelative(lighten,this.minLightness,this.maxLightness)}else{lighten=fitNumber(lighten,this.minLightness,this.maxLightness)}c=c.lighten(lighten)}this._list.push(c)}this._currentPass++};Object.defineProperty(ColorSet.prototype,"currentColor",{get:function(){if(this._list.length==0){return this.baseColor.saturate(this.saturation)}else{return this._list[this._list.length-1].saturate(this.saturation)}},enumerable:true,configurable:true});ColorSet.prototype.applyStepOptions=function(hsl,base,step,pass){hsl.l=base.lightness+(this.stepOptions.lightness||0)*step+(this.passOptions.lightness||0)*pass;if(this.wrap){if(hsl.l>1){hsl.l=hsl.l-Math.floor(hsl.l)}else if(hsl.l<0){hsl.l=-(hsl.l-Math.floor(hsl.l))}hsl.l=fitNumberRelative(hsl.l,this.minLightness,this.maxLightness)}else{if(hsl.l>1){hsl.l=1}else if(hsl.l<0){hsl.l=0}hsl.l=fitNumber(hsl.l,this.minLightness,this.maxLightness)}};ColorSet.prototype.processConfig=function(config){if(config){if(hasValue(config.list)&&isArray$6(config.list)){for(var i=0,len=config.list.length;i<len;i++){if(!(config.list[i]instanceof Color)){config.list[i]=color(config.list[i])}}}if(hasValue(config.baseColor)&&!(config.baseColor instanceof Color)){config.baseColor=color(config.baseColor)}}_super.prototype.processConfig.call(this,config)};return ColorSet}(BaseObject);registry.registeredClasses["ColorSet"]=ColorSet;var PatternSet=function(_super){__extends(PatternSet,_super);function PatternSet(){var _this=_super.call(this)||this;_this._list=[];_this._currentStep=0;_this._startIndex=0;_this._currentPass=0;_this.baseColor=new Color({r:103,g:183,b:220});_this.className="PatternSet";var interfaceColors=new InterfaceColorSet;_this.list=[_this.getLinePattern(1e3,45,1,6),_this.getRectPattern(10,0,4),_this.getLinePattern(1e3,-45,1,6),_this.getCirclePattern(11,2,true),_this.getLinePattern(6,90,1),_this.getRectPattern(12,45,6,true),_this.getLinePattern(6,0,1),_this.getRectPattern(7,0,4),_this.getLinePattern(1e3,45,2,3,"4,2"),_this.getCirclePattern(9,3,false),_this.getLinePattern(1e3,-45,2,3,"4,2"),_this.getRectPattern(10,45,Math.sqrt(50)),_this.getLinePattern(1e3,-45,2,1),_this.getRectPattern(10,0,9),_this.getLinePattern(1e3,45,2,1),_this.getLinePattern(1e3,0,3,1),_this.getRectPattern(10,45,10),_this.getLinePattern(1e3,90,3,1)];_this.baseColor=interfaceColors.getFor("stroke");_this.applyTheme();return _this}PatternSet.prototype.getLinePattern=function(size,rotation,thickness,gap,strokeDashArray){var pattern=new LinePattern;pattern.width=size;pattern.height=size;pattern.stroke=this.baseColor;pattern.gap=gap;pattern.strokeDasharray=strokeDashArray;pattern.strokeWidth=thickness;pattern.rotation=rotation;return pattern};PatternSet.prototype.getRectPattern=function(size,rotation,thickness,outline){var pattern=new RectPattern;pattern.width=size;pattern.height=size;pattern.rectWidth=thickness;pattern.rectHeight=thickness;if(outline){pattern.stroke=this.baseColor;pattern.strokeWidth=1;pattern.fillOpacity=0}else{pattern.fill=this.baseColor;pattern.strokeWidth=0}if(rotation!=0){pattern.shapeRendering="auto"}pattern.rotation=rotation;return pattern};PatternSet.prototype.getCirclePattern=function(size,radius,outline){var pattern=new CirclePattern;pattern.width=size;pattern.height=size;pattern.shapeRendering="auto";pattern.radius=radius;if(outline){pattern.stroke=this.baseColor;pattern.strokeWidth=1;pattern.fillOpacity=0}else{pattern.fill=this.baseColor;pattern.strokeWidth=0}return pattern};Object.defineProperty(PatternSet.prototype,"list",{get:function(){return this._list},set:function(value){this._list=value;this.reset()},enumerable:true,configurable:true});PatternSet.prototype.next=function(){var pattern=this.getIndex(this.currentStep);this._currentStep++;return pattern};PatternSet.prototype.getIndex=function(i){var pattern;while(this.list.length<=i){this.generatePatterns()}pattern=this.list[i];return pattern.clone()};PatternSet.prototype.generatePatterns=function(){var count=this.list.length/(this._currentPass+1);this._currentPass++;for(var i=0;i<count;i++){this.list.push(this.list[i].clone())}};PatternSet.prototype.reset=function(){this._currentStep=this._startIndex};Object.defineProperty(PatternSet.prototype,"currentStep",{get:function(){return this._currentStep},set:function(value){this._currentStep=value},enumerable:true,configurable:true});Object.defineProperty(PatternSet.prototype,"startIndex",{get:function(){return this._startIndex},set:function(value){this._startIndex=value;this.reset()},enumerable:true,configurable:true});PatternSet.prototype.processConfig=function(config){_super.prototype.processConfig.call(this,config)};return PatternSet}(BaseObject);registry.registeredClasses["PatternSet"]=PatternSet;var AmChartsLogo=function(_super){__extends(AmChartsLogo,_super);function AmChartsLogo(){var _this=_super.call(this)||this;_this.className="AmChartsLogo";_this.valign="bottom";var d=.3;_this.opacity=.3;_this.defaultState.properties.opacity=.4;_this.url="https://www.amcharts.com/";_this.urlTarget="_blank";_this.showSystemTooltip=true;_this.readerTitle="Chart created using amCharts library";_this.width=220*d;_this.height=70*d;_this.background.opacity=0;var aColor=color("#474758");if((new InterfaceColorSet).getFor("background").alternative.hex=="#ffffff"){aColor=color("#ffffff")}var aGradient=new LinearGradient;aGradient.addColor(aColor);aGradient.addColor(aColor,1,.75);aGradient.addColor(color("#3cabff"),1,.755);aGradient.rotation=-10;var aStroke=aGradient;var m=_this.createChild(Polyspline);m.shouldClone=false;m.isMeasured=false;m.segments=[[{x:50*d,y:50*d},{x:90*d,y:50*d},{x:120*d,y:20*d},{x:135*d,y:35*d},{x:150*d,y:20*d},{x:180*d,y:50*d},{x:200*d,y:50*d}]];m.strokeWidth=6*d;m.tensionX=.8;m.tensionY=1;m.stroke=color("#3cabff");var a=_this.createChild(Polyspline);a.shouldClone=false;a.isMeasured=false;a.segments=[[{x:20*d,y:50*d},{x:50*d,y:50*d},{x:90*d,y:12*d},{x:133*d,y:50*d},{x:170*d,y:50*d},{x:200*d,y:50*d}]];a.strokeWidth=6*d;a.tensionX=.75;a.tensionY=1;a.stroke=aStroke;_this._disposers.push(a);var desaturateFilter=new DesaturateFilter;_this.filters.push(desaturateFilter);var desaturateFilterHover=new DesaturateFilter;desaturateFilterHover.saturation=1;var hoverState=_this.states.create("hover");hoverState.properties.opacity=1;hoverState.filters.push(desaturateFilterHover);_this.applyTheme();return _this}return AmChartsLogo}(Container);function createChild(htmlElement,classType){var htmlContainer=getElement(htmlElement);var tmpContainer=false;if(!htmlContainer){htmlContainer=document.createElement("div");htmlContainer.style.width="200px";htmlContainer.style.height="200px";htmlContainer.style.top="0";htmlContainer.style.left="0";htmlContainer.style.visibility="hidden";htmlContainer.style.position="absolute";document.body.appendChild(htmlContainer);tmpContainer=true}if(htmlContainer){htmlContainer.innerHTML="";var svgDiv_1=new SVGContainer(htmlContainer);var paper=new Paper(svgDiv_1.SVGContainer,"svg-"+(svgContainers.length-1));var container_1=new Container;container_1.htmlContainer=htmlContainer;container_1.svgContainer=svgDiv_1;container_1.width=percent(100);container_1.height=percent(100);container_1.background.fillOpacity=0;container_1.paper=paper;paper.append(container_1.group);if(tmpContainer){ready((function(){container_1.moveHtmlContainer(htmlElement)}))}container_1.relativeWidth=1;container_1.relativeHeight=1;svgDiv_1.container=container_1;var sprite_1=container_1.createChild(classType);sprite_1.topParent=container_1;var uid=sprite_1.uid;registry.invalidSprites[uid]=[];registry.invalidDatas[uid]=[];registry.invalidPositions[uid]=[];registry.invalidLayouts[uid]=[];container_1.baseId=uid;sprite_1.isBaseSprite=true;sprite_1.focusFilter=new FocusFilter;registry.baseSprites.push(sprite_1);registry.baseSpritesByUid[uid]=sprite_1;sprite_1.maskRectangle={x:0,y:0,width:Math.max(svgDiv_1.width||0,0),height:Math.max(svgDiv_1.height||0,0)};container_1.events.on("maxsizechanged",(function(event){if(event.previousWidth==0||event.previousHeight==0){container_1.deepInvalidate()}if(sprite_1.maskRectangle){sprite_1.maskRectangle={x:0,y:0,width:Math.max(svgDiv_1.width||0,0),height:Math.max(svgDiv_1.height||0,0)}}}));var loopTimer_1=null;var loop_1=function(){if(!sprite_1.isDisposed()){if(getRoot(sprite_1.dom)==null){if(options.autoDispose){container_1.htmlContainer=undefined;svgDiv_1.htmlElement=undefined;sprite_1.dispose()}else{warn("Chart was not disposed",sprite_1.uid)}loopTimer_1=null}else{loopTimer_1=window.setTimeout(loop_1,1e3)}}else{loopTimer_1=null}};loop_1();sprite_1.addDisposer(new Disposer((function(){if(loopTimer_1!==null){clearTimeout(loopTimer_1)}remove(registry.baseSprites,sprite_1);registry.baseSpritesByUid[sprite_1.uid]=undefined})));sprite_1.addDisposer(container_1);var tooltipContainer_1=container_1.createChild(Container);tooltipContainer_1.topParent=container_1;tooltipContainer_1.width=percent(100);tooltipContainer_1.height=percent(100);tooltipContainer_1.isMeasured=false;container_1.tooltipContainer=tooltipContainer_1;sprite_1.tooltip=new Tooltip;sprite_1.tooltip.hide(0);sprite_1.tooltip.setBounds({x:0,y:0,width:tooltipContainer_1.maxWidth,height:tooltipContainer_1.maxHeight});tooltipContainer_1.events.on("maxsizechanged",(function(){getValue$4(sprite_1.tooltip).setBounds({x:0,y:0,width:tooltipContainer_1.maxWidth,height:tooltipContainer_1.maxHeight})}),undefined,false);var preloader_1=new Preloader;preloader_1.events.on("inited",(function(){preloader_1.__disabled=true}),undefined,false);container_1.preloader=preloader_1;if(sprite_1 instanceof Container&&!sprite_1.hasLicense()){var logo_1=tooltipContainer_1.createChild(AmChartsLogo);tooltipContainer_1.events.on("maxsizechanged",(function(ev){if(tooltipContainer_1.maxWidth<=100||tooltipContainer_1.maxHeight<=50){logo_1.hide()}else if(logo_1.isHidden||logo_1.isHiding){logo_1.show()}}),undefined,false);sprite_1.logo=logo_1;logo_1.align="left";logo_1.valign="bottom"}container_1.isStandaloneInstance=true;if(options.queue){addToQueue(sprite_1)}return sprite_1}else{system.log("html container not found");throw new Error("html container not found")}}function addToQueue(sprite){if(registry.queue.indexOf(sprite)==-1){sprite.__disabled=true;sprite.tooltipContainer.__disabled=true;sprite.events.disableType("appeared");if(registry.queue.length==0){registry.events.once("exitframe",(function(){queueHandler(sprite)}));system.requestFrame()}sprite.addDisposer(new Disposer((function(){removeFromQueue(sprite)})));registry.queue.push(sprite)}}function removeFromQueue(sprite){var index=registry.queue.indexOf(sprite);if(index>=0){registry.queue.splice(registry.queue.indexOf(sprite),1);var nextSprite=registry.queue[index];if(nextSprite){queueHandler(nextSprite)}}}function queueHandler(sprite){if(sprite&&sprite.tooltipContainer){sprite.__disabled=false;sprite.tooltipContainer.__disabled=false;sprite.events.enableType("appeared");sprite.dispatch("removedfromqueue");if(sprite.showOnInit){sprite.events.on("appeared",(function(){removeFromQueue(sprite)}))}if(sprite.vpDisposer){sprite.vpDisposer.dispose()}if(sprite instanceof Container){sprite.invalidateLabels()}if(sprite.tooltipContainer){sprite.tooltipContainer.invalidateLayout()}if(sprite instanceof Component){sprite.invalidateData();sprite.reinit();sprite.events.once("datavalidated",(function(){if(sprite.showOnInit){sprite.appear()}else{removeFromQueue(sprite)}}))}else{sprite.reinit();sprite.events.once("inited",(function(){removeFromQueue(sprite)}));if(sprite.showOnInit){sprite.appear()}}}}function create(htmlElement,classType){var classError;if(isString$1(classType)){if(hasValue(registry.registeredClasses[classType])){classType=registry.registeredClasses[classType]}else{classType=registry.registeredClasses["Container"];classError=new Error("Class ["+classType+"] is not loaded.")}}var chart=createChild(htmlElement,classType);if(classError){chart.raiseCriticalError(classError)}return chart}function useTheme(value){if(registry.themes.indexOf(value)===-1){registry.themes.push(value)}}function unuseTheme(value){remove(registry.themes,value)}const WebChartCurrentVersion="7.4.1";const RESTFieldType$3={Blob:"esriFieldTypeBlob",Date:"esriFieldTypeDate",Double:"esriFieldTypeDouble",Geometry:"esriFieldTypeGeometry",GlobalID:"esriFieldTypeGlobalID",GUID:"esriFieldTypeGUID",Integer:"esriFieldTypeInteger",OID:"esriFieldTypeOID",Raster:"esriFieldTypeRaster",Single:"esriFieldTypeSingle",SmallInteger:"esriFieldTypeSmallInteger",String:"esriFieldTypeString",XML:"esriFieldTypeXML"};const RESTStatisticType$3={Count:"count",Sum:"sum",Minimum:"min",Maximum:"max",Average:"avg",StandardDeviation:"stddev",Variance:"var",ContinuousPercentile:"percentile_cont",DiscretePercentile:"percentile_disc",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate",NoAggregation:"no_aggregation"};const RESTSimpleLineSymbolStyle$2={Dash:"esriSLSDash",DashDot:"esriSLSDashDot",DashDotDot:"esriSLSDashDotDot",Dot:"esriSLSDot",Null:"esriSLSNull",Solid:"esriSLSSolid"};const RESTSimpleMarkerSymbolStyle$1={Circle:"esriSMSCircle",Cross:"esriSMSCross",Diamond:"esriSMSDiamond",Square:"esriSMSSquare",X:"esriSMSX",Triangle:"esriSMSTriangle"};const RESTSimpleFillSymbolStyle$1={BackwardDiagonal:"esriSFSBackwardDiagonal",Cross:"esriSFSCross",DiagonalCross:"esriSFSDiagonalCross",ForwardDiagonal:"esriSFSForwardDiagonal",Horizontal:"esriSFSHorizontal",Null:"esriSFSNull",Solid:"esriSFSSolid",Vertical:"esriSFSVertical"};const RESTSymbolType$2={SLS:"esriSLS",SMS:"esriSMS",SFS:"esriSFS",PMS:"esriPMS",PFS:"esriPFS",TS:"esriTS"};const RESTRendererType$3={UniqueValue:"unique-value",Simple:"simple",ClassBreaks:"class-breaks",Heatmap:"heatmap",DotDensity:"dot-density",Dictionary:"dictionary",PieChart:"pie-chart"};const WebChartTypes$3={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const WebChartStackedKinds$3={Side:"sideBySide",Stacked:"stacked",Stacked100:"stacked100"};const WebChartSortOrderKinds$3={Ascending:"ASC",Descending:"DESC"};const WebChartDataSourceTypes$2={Inline:"inline",Layer:"layer"};const StatisticsDefaults$3={statisticType:RESTStatisticType$3.Count,sortingOrder:WebChartSortOrderKinds$3.Ascending};const WebChartVersionStatus={Same:"same",Newer:"newer",Older:"older",Unrecognized:"unrecognized"};const GaugeChartSubTypes$1={FeatureGauge:"featureGauge",StatisticGauge:"statisticGauge"};const SizePolicyScaleTypes$1={Linear:"linear",Logarithmic:"logarithmic"};const defaultPieFromFieldsName$2="arcgis_charts_pie_from_fields_name";const defaultPieFromFieldsValue$2="arcgis_charts_pie_from_fields_value";const OverlayTerms$1={Mean:"Mean",Median:"Median",StdDev:"Standard Deviation",Normal:"Normal Distribution",Trendline:"Trendline"};function extent$1(values,valueof){let min;let max;if(valueof===undefined){for(const value of values){if(value!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}return[min,max]}var freeGlobal$5=typeof global=="object"&&global&&global.Object===Object&&global;var freeGlobal$1$2=freeGlobal$5;var freeSelf$3=typeof self=="object"&&self&&self.Object===Object&&self;var root$5=freeGlobal$1$2||freeSelf$3||Function("return this")();var root$1$2=root$5;var Symbol$1$2=root$1$2.Symbol;var Symbol$2$2=Symbol$1$2;var objectProto$h$1=Object.prototype;var hasOwnProperty$e$1=objectProto$h$1.hasOwnProperty;var nativeObjectToString$1$2=objectProto$h$1.toString;var symToStringTag$1$2=Symbol$2$2?Symbol$2$2.toStringTag:undefined;function getRawTag$3(value){var isOwn=hasOwnProperty$e$1.call(value,symToStringTag$1$2),tag=value[symToStringTag$1$2];try{value[symToStringTag$1$2]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString$1$2.call(value);if(unmasked){if(isOwn){value[symToStringTag$1$2]=tag}else{delete value[symToStringTag$1$2]}}return result}var objectProto$g$1=Object.prototype;var nativeObjectToString$5=objectProto$g$1.toString;function objectToString$1$1(value){return nativeObjectToString$5.call(value)}var nullTag$3="[object Null]",undefinedTag$3="[object Undefined]";var symToStringTag$5=Symbol$2$2?Symbol$2$2.toStringTag:undefined;function baseGetTag$3(value){if(value==null){return value===undefined?undefinedTag$3:nullTag$3}return symToStringTag$5&&symToStringTag$5 in Object(value)?getRawTag$3(value):objectToString$1$1(value)}function isObjectLike$1$1(value){return value!=null&&typeof value=="object"}var symbolTag$2$2="[object Symbol]";function isSymbol$3(value){return typeof value=="symbol"||isObjectLike$1$1(value)&&baseGetTag$3(value)==symbolTag$2$2}function arrayMap$2(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray$5=Array.isArray;var isArray$1$2=isArray$5;var INFINITY$3=1/0;var symbolProto$1$2=Symbol$2$2?Symbol$2$2.prototype:undefined,symbolToString$2=symbolProto$1$2?symbolProto$1$2.toString:undefined;function baseToString$2(value){if(typeof value=="string"){return value}if(isArray$1$2(value)){return arrayMap$2(value,baseToString$2)+""}if(isSymbol$3(value)){return symbolToString$2?symbolToString$2.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY$3?"-0":result}function isObject$3(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function identity$3(value){return value}var asyncTag$3="[object AsyncFunction]",funcTag$2$2="[object Function]",genTag$1$2="[object GeneratorFunction]",proxyTag$3="[object Proxy]";function isFunction$3(value){if(!isObject$3(value)){return false}var tag=baseGetTag$3(value);return tag==funcTag$2$2||tag==genTag$1$2||tag==asyncTag$3||tag==proxyTag$3}var coreJsData$5=root$1$2["__core-js_shared__"];var coreJsData$1$2=coreJsData$5;var maskSrcKey$3=function(){var uid=/[^.]+$/.exec(coreJsData$1$2&&coreJsData$1$2.keys&&coreJsData$1$2.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked$3(func){return!!maskSrcKey$3&&maskSrcKey$3 in func}var funcProto$3$1=Function.prototype;var funcToString$3$1=funcProto$3$1.toString;function toSource$3(func){if(func!=null){try{return funcToString$3$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar$3=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor$3=/^\[object .+?Constructor\]$/;var funcProto$2$1=Function.prototype,objectProto$f$2=Object.prototype;var funcToString$2$1=funcProto$2$1.toString;var hasOwnProperty$d$2=objectProto$f$2.hasOwnProperty;var reIsNative$3=RegExp("^"+funcToString$2$1.call(hasOwnProperty$d$2).replace(reRegExpChar$3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$3(value){if(!isObject$3(value)||isMasked$3(value)){return false}var pattern=isFunction$3(value)?reIsNative$3:reIsHostCtor$3;return pattern.test(toSource$3(value))}function getValue$3(object,key){return object==null?undefined:object[key]}function getNative$3(object,key){var value=getValue$3(object,key);return baseIsNative$3(value)?value:undefined}var WeakMap$5=getNative$3(root$1$2,"WeakMap");var WeakMap$1$2=WeakMap$5;var objectCreate$2=Object.create;var baseCreate$4=function(){function object(){}return function(proto){if(!isObject$3(proto)){return{}}if(objectCreate$2){return objectCreate$2(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();var baseCreate$1$1=baseCreate$4;function apply$2(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function copyArray$2(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}var HOT_COUNT$2=800,HOT_SPAN$2=16;var nativeNow$2=Date.now;function shortOut$2(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow$2(),remaining=HOT_SPAN$2-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT$2){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function constant$3(value){return function(){return value}}var defineProperty$5=function(){try{var func=getNative$3(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var defineProperty$1$2=defineProperty$5;var baseSetToString$3=!defineProperty$1$2?identity$3:function(func,string){return defineProperty$1$2(func,"toString",{configurable:true,enumerable:false,value:constant$3(string),writable:true})};var baseSetToString$1$2=baseSetToString$3;var setToString$3=shortOut$2(baseSetToString$1$2);var setToString$1$2=setToString$3;function arrayEach$2(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER$1$2=9007199254740991;var reIsUint$3=/^(?:0|[1-9]\d*)$/;function isIndex$3(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER$1$2:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint$3.test(value))&&(value>-1&&value%1==0&&value<length)}function baseAssignValue$3(object,key,value){if(key=="__proto__"&&defineProperty$1$2){defineProperty$1$2(object,key,{configurable:true,enumerable:true,value,writable:true})}else{object[key]=value}}function eq$3(value,other){return value===other||value!==value&&other!==other}var objectProto$e$2=Object.prototype;var hasOwnProperty$c$2=objectProto$e$2.hasOwnProperty;function assignValue$3(object,key,value){var objValue=object[key];if(!(hasOwnProperty$c$2.call(object,key)&&eq$3(objValue,value))||value===undefined&&!(key in object)){baseAssignValue$3(object,key,value)}}function copyObject$3(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue$3(object,key,newValue)}else{assignValue$3(object,key,newValue)}}return object}var nativeMax$3=Math.max;function overRest$2(func,start,transform){start=nativeMax$3(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax$3(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply$2(func,this,otherArgs)}}function baseRest$2(func,start){return setToString$1$2(overRest$2(func,start,identity$3),func+"")}var MAX_SAFE_INTEGER$5=9007199254740991;function isLength$3(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$5}function isArrayLike$3(value){return value!=null&&isLength$3(value.length)&&!isFunction$3(value)}function isIterateeCall$2(value,index,object){if(!isObject$3(object)){return false}var type=typeof index;if(type=="number"?isArrayLike$3(object)&&isIndex$3(index,object.length):type=="string"&&index in object){return eq$3(object[index],value)}return false}function createAssigner$1(assigner){return baseRest$2((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall$2(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object}))}var objectProto$d$2=Object.prototype;function isPrototype$3(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$d$2;return value===proto}function baseTimes$3(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag$2$2="[object Arguments]";function baseIsArguments$3(value){return isObjectLike$1$1(value)&&baseGetTag$3(value)==argsTag$2$2}var objectProto$c$2=Object.prototype;var hasOwnProperty$b$2=objectProto$c$2.hasOwnProperty;var propertyIsEnumerable$1$2=objectProto$c$2.propertyIsEnumerable;var isArguments$5=baseIsArguments$3(function(){return arguments}())?baseIsArguments$3:function(value){return isObjectLike$1$1(value)&&hasOwnProperty$b$2.call(value,"callee")&&!propertyIsEnumerable$1$2.call(value,"callee")};var isArguments$1$2=isArguments$5;function stubFalse$3(){return false}var freeExports$2$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$2$2=freeExports$2$2&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$2$2=freeModule$2$2&&freeModule$2$2.exports===freeExports$2$2;var Buffer$1$2=moduleExports$2$2?root$1$2.Buffer:undefined;var nativeIsBuffer$3=Buffer$1$2?Buffer$1$2.isBuffer:undefined;var isBuffer$5=nativeIsBuffer$3||stubFalse$3;var isBuffer$1$2=isBuffer$5;var argsTag$1$2="[object Arguments]",arrayTag$1$2="[object Array]",boolTag$2$2="[object Boolean]",dateTag$2$2="[object Date]",errorTag$2$2="[object Error]",funcTag$1$2="[object Function]",mapTag$5$2="[object Map]",numberTag$2$2="[object Number]",objectTag$4$1="[object Object]",regexpTag$2$2="[object RegExp]",setTag$5$2="[object Set]",stringTag$2$2="[object String]",weakMapTag$2$2="[object WeakMap]";var arrayBufferTag$2$2="[object ArrayBuffer]",dataViewTag$3$2="[object DataView]",float32Tag$2$2="[object Float32Array]",float64Tag$2$2="[object Float64Array]",int8Tag$2$2="[object Int8Array]",int16Tag$2$2="[object Int16Array]",int32Tag$2$2="[object Int32Array]",uint8Tag$2$2="[object Uint8Array]",uint8ClampedTag$2$2="[object Uint8ClampedArray]",uint16Tag$2$2="[object Uint16Array]",uint32Tag$2$2="[object Uint32Array]";var typedArrayTags$3={};typedArrayTags$3[float32Tag$2$2]=typedArrayTags$3[float64Tag$2$2]=typedArrayTags$3[int8Tag$2$2]=typedArrayTags$3[int16Tag$2$2]=typedArrayTags$3[int32Tag$2$2]=typedArrayTags$3[uint8Tag$2$2]=typedArrayTags$3[uint8ClampedTag$2$2]=typedArrayTags$3[uint16Tag$2$2]=typedArrayTags$3[uint32Tag$2$2]=true;typedArrayTags$3[argsTag$1$2]=typedArrayTags$3[arrayTag$1$2]=typedArrayTags$3[arrayBufferTag$2$2]=typedArrayTags$3[boolTag$2$2]=typedArrayTags$3[dataViewTag$3$2]=typedArrayTags$3[dateTag$2$2]=typedArrayTags$3[errorTag$2$2]=typedArrayTags$3[funcTag$1$2]=typedArrayTags$3[mapTag$5$2]=typedArrayTags$3[numberTag$2$2]=typedArrayTags$3[objectTag$4$1]=typedArrayTags$3[regexpTag$2$2]=typedArrayTags$3[setTag$5$2]=typedArrayTags$3[stringTag$2$2]=typedArrayTags$3[weakMapTag$2$2]=false;function baseIsTypedArray$3(value){return isObjectLike$1$1(value)&&isLength$3(value.length)&&!!typedArrayTags$3[baseGetTag$3(value)]}function baseUnary$3(func){return function(value){return func(value)}}var freeExports$1$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1$2=freeExports$1$2&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1$2=freeModule$1$2&&freeModule$1$2.exports===freeExports$1$2;var freeProcess$3=moduleExports$1$2&&freeGlobal$1$2.process;var nodeUtil$5=function(){try{var types=freeModule$1$2&&freeModule$1$2.require&&freeModule$1$2.require("util").types;if(types){return types}return freeProcess$3&&freeProcess$3.binding&&freeProcess$3.binding("util")}catch(e){}}();var nodeUtil$1$2=nodeUtil$5;var nodeIsTypedArray$3=nodeUtil$1$2&&nodeUtil$1$2.isTypedArray;var isTypedArray$5=nodeIsTypedArray$3?baseUnary$3(nodeIsTypedArray$3):baseIsTypedArray$3;var isTypedArray$1$2=isTypedArray$5;var objectProto$b$2=Object.prototype;var hasOwnProperty$a$2=objectProto$b$2.hasOwnProperty;function arrayLikeKeys$3(value,inherited){var isArr=isArray$1$2(value),isArg=!isArr&&isArguments$1$2(value),isBuff=!isArr&&!isArg&&isBuffer$1$2(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray$1$2(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes$3(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$a$2.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex$3(key,length)))){result.push(key)}}return result}function overArg$1$1(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys$5=overArg$1$1(Object.keys,Object);var nativeKeys$1$2=nativeKeys$5;var objectProto$a$2=Object.prototype;var hasOwnProperty$9$2=objectProto$a$2.hasOwnProperty;function baseKeys$3(object){if(!isPrototype$3(object)){return nativeKeys$1$2(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$9$2.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys$3(object){return isArrayLike$3(object)?arrayLikeKeys$3(object):baseKeys$3(object)}function nativeKeysIn$3(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}var objectProto$9$2=Object.prototype;var hasOwnProperty$8$2=objectProto$9$2.hasOwnProperty;function baseKeysIn$3(object){if(!isObject$3(object)){return nativeKeysIn$3(object)}var isProto=isPrototype$3(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty$8$2.call(object,key)))){result.push(key)}}return result}function keysIn$3(object){return isArrayLike$3(object)?arrayLikeKeys$3(object,true):baseKeysIn$3(object)}var assignInWith$1=createAssigner$1((function(object,source,srcIndex,customizer){copyObject$3(source,keysIn$3(source),object,customizer)}));var extendWith$1=assignInWith$1;var nativeCreate$4=getNative$3(Object,"create");var nativeCreate$1$1=nativeCreate$4;function hashClear$2(){this.__data__=nativeCreate$1$1?nativeCreate$1$1(null):{};this.size=0}function hashDelete$2(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED$1$1="__lodash_hash_undefined__";var objectProto$8$1=Object.prototype;var hasOwnProperty$7$1=objectProto$8$1.hasOwnProperty;function hashGet$2(key){var data=this.__data__;if(nativeCreate$1$1){var result=data[key];return result===HASH_UNDEFINED$1$1?undefined:result}return hasOwnProperty$7$1.call(data,key)?data[key]:undefined}var objectProto$7$1=Object.prototype;var hasOwnProperty$6$1=objectProto$7$1.hasOwnProperty;function hashHas$2(key){var data=this.__data__;return nativeCreate$1$1?data[key]!==undefined:hasOwnProperty$6$1.call(data,key)}var HASH_UNDEFINED$6="__lodash_hash_undefined__";function hashSet$2(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate$1$1&&value===undefined?HASH_UNDEFINED$6:value;return this}function Hash$2(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash$2.prototype.clear=hashClear$2;Hash$2.prototype["delete"]=hashDelete$2;Hash$2.prototype.get=hashGet$2;Hash$2.prototype.has=hashHas$2;Hash$2.prototype.set=hashSet$2;function listCacheClear$2(){this.__data__=[];this.size=0}function assocIndexOf$2(array,key){var length=array.length;while(length--){if(eq$3(array[length][0],key)){return length}}return-1}var arrayProto$2=Array.prototype;var splice$2=arrayProto$2.splice;function listCacheDelete$2(key){var data=this.__data__,index=assocIndexOf$2(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice$2.call(data,index,1)}--this.size;return true}function listCacheGet$2(key){var data=this.__data__,index=assocIndexOf$2(data,key);return index<0?undefined:data[index][1]}function listCacheHas$2(key){return assocIndexOf$2(this.__data__,key)>-1}function listCacheSet$2(key,value){var data=this.__data__,index=assocIndexOf$2(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache$2(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache$2.prototype.clear=listCacheClear$2;ListCache$2.prototype["delete"]=listCacheDelete$2;ListCache$2.prototype.get=listCacheGet$2;ListCache$2.prototype.has=listCacheHas$2;ListCache$2.prototype.set=listCacheSet$2;var Map$1$2=getNative$3(root$1$2,"Map");var Map$2$2=Map$1$2;function mapCacheClear$2(){this.size=0;this.__data__={hash:new Hash$2,map:new(Map$2$2||ListCache$2),string:new Hash$2}}function isKeyable$2(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData$2(map,key){var data=map.__data__;return isKeyable$2(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete$2(key){var result=getMapData$2(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet$2(key){return getMapData$2(this,key).get(key)}function mapCacheHas$2(key){return getMapData$2(this,key).has(key)}function mapCacheSet$2(key,value){var data=getMapData$2(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache$2(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache$2.prototype.clear=mapCacheClear$2;MapCache$2.prototype["delete"]=mapCacheDelete$2;MapCache$2.prototype.get=mapCacheGet$2;MapCache$2.prototype.has=mapCacheHas$2;MapCache$2.prototype.set=mapCacheSet$2;function toString$2(value){return value==null?"":baseToString$2(value)}function arrayPush$2(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}var getPrototype$1$2=overArg$1$1(Object.getPrototypeOf,Object);var getPrototype$2$1=getPrototype$1$2;var objectTag$3$2="[object Object]";var funcProto$1$2=Function.prototype,objectProto$6$2=Object.prototype;var funcToString$1$2=funcProto$1$2.toString;var hasOwnProperty$5$2=objectProto$6$2.hasOwnProperty;var objectCtorString$1$1=funcToString$1$2.call(Object);function isPlainObject$1$1(value){if(!isObjectLike$1$1(value)||baseGetTag$3(value)!=objectTag$3$2){return false}var proto=getPrototype$2$1(value);if(proto===null){return true}var Ctor=hasOwnProperty$5$2.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString$1$2.call(Ctor)==objectCtorString$1$1}var domExcTag$1="[object DOMException]",errorTag$1$2="[object Error]";function isError$1(value){if(!isObjectLike$1$1(value)){return false}var tag=baseGetTag$3(value);return tag==errorTag$1$2||tag==domExcTag$1||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject$1$1(value)}var attempt$2=baseRest$2((function(func,args){try{return apply$2(func,undefined,args)}catch(e){return isError$1(e)?e:new Error(e)}}));var attempt$1$1=attempt$2;function basePropertyOf$1(object){return function(key){return object==null?undefined:object[key]}}function stackClear$2(){this.__data__=new ListCache$2;this.size=0}function stackDelete$2(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet$2(key){return this.__data__.get(key)}function stackHas$2(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE$2=200;function stackSet$2(key,value){var data=this.__data__;if(data instanceof ListCache$2){var pairs=data.__data__;if(!Map$2$2||pairs.length<LARGE_ARRAY_SIZE$2-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache$2(pairs)}data.set(key,value);this.size=data.size;return this}function Stack$2(entries){var data=this.__data__=new ListCache$2(entries);this.size=data.size}Stack$2.prototype.clear=stackClear$2;Stack$2.prototype["delete"]=stackDelete$2;Stack$2.prototype.get=stackGet$2;Stack$2.prototype.has=stackHas$2;Stack$2.prototype.set=stackSet$2;function baseAssign$2(object,source){return object&&copyObject$3(source,keys$3(source),object)}function baseAssignIn$2(object,source){return object&&copyObject$3(source,keysIn$3(source),object)}var freeExports$7=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$7=freeExports$7&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$7=freeModule$7&&freeModule$7.exports===freeExports$7;var Buffer$6=moduleExports$7?root$1$2.Buffer:undefined,allocUnsafe$2=Buffer$6?Buffer$6.allocUnsafe:undefined;function cloneBuffer$2(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe$2?allocUnsafe$2(length):new buffer.constructor(length);buffer.copy(result);return result}function arrayFilter$2(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray$2(){return[]}var objectProto$5$1=Object.prototype;var propertyIsEnumerable$4=objectProto$5$1.propertyIsEnumerable;var nativeGetSymbols$1$1=Object.getOwnPropertySymbols;var getSymbols$4=!nativeGetSymbols$1$1?stubArray$2:function(object){if(object==null){return[]}object=Object(object);return arrayFilter$2(nativeGetSymbols$1$1(object),(function(symbol){return propertyIsEnumerable$4.call(object,symbol)}))};var getSymbols$1$1=getSymbols$4;function copySymbols$2(source,object){return copyObject$3(source,getSymbols$1$1(source),object)}var nativeGetSymbols$4=Object.getOwnPropertySymbols;var getSymbolsIn$4=!nativeGetSymbols$4?stubArray$2:function(object){var result=[];while(object){arrayPush$2(result,getSymbols$1$1(object));object=getPrototype$2$1(object)}return result};var getSymbolsIn$1$1=getSymbolsIn$4;function copySymbolsIn$2(source,object){return copyObject$3(source,getSymbolsIn$1$1(source),object)}function baseGetAllKeys$2(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray$1$2(object)?result:arrayPush$2(result,symbolsFunc(object))}function getAllKeys$2(object){return baseGetAllKeys$2(object,keys$3,getSymbols$1$1)}function getAllKeysIn$2(object){return baseGetAllKeys$2(object,keysIn$3,getSymbolsIn$1$1)}var DataView$5=getNative$3(root$1$2,"DataView");var DataView$1$2=DataView$5;var Promise$1$2=getNative$3(root$1$2,"Promise");var Promise$2$2=Promise$1$2;var Set$1$2=getNative$3(root$1$2,"Set");var Set$2$2=Set$1$2;var mapTag$4$2="[object Map]",objectTag$2$2="[object Object]",promiseTag$3="[object Promise]",setTag$4$2="[object Set]",weakMapTag$1$2="[object WeakMap]";var dataViewTag$2$2="[object DataView]";var dataViewCtorString$3=toSource$3(DataView$1$2),mapCtorString$3=toSource$3(Map$2$2),promiseCtorString$3=toSource$3(Promise$2$2),setCtorString$3=toSource$3(Set$2$2),weakMapCtorString$3=toSource$3(WeakMap$1$2);var getTag$5=baseGetTag$3;if(DataView$1$2&&getTag$5(new DataView$1$2(new ArrayBuffer(1)))!=dataViewTag$2$2||Map$2$2&&getTag$5(new Map$2$2)!=mapTag$4$2||Promise$2$2&&getTag$5(Promise$2$2.resolve())!=promiseTag$3||Set$2$2&&getTag$5(new Set$2$2)!=setTag$4$2||WeakMap$1$2&&getTag$5(new WeakMap$1$2)!=weakMapTag$1$2){getTag$5=function(value){var result=baseGetTag$3(value),Ctor=result==objectTag$2$2?value.constructor:undefined,ctorString=Ctor?toSource$3(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString$3:return dataViewTag$2$2;case mapCtorString$3:return mapTag$4$2;case promiseCtorString$3:return promiseTag$3;case setCtorString$3:return setTag$4$2;case weakMapCtorString$3:return weakMapTag$1$2}}return result}}var getTag$1$1=getTag$5;var objectProto$4$1=Object.prototype;var hasOwnProperty$4$1=objectProto$4$1.hasOwnProperty;function initCloneArray$2(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty$4$1.call(array,"index")){result.index=array.index;result.input=array.input}return result}var Uint8Array$4=root$1$2.Uint8Array;var Uint8Array$1$2=Uint8Array$4;function cloneArrayBuffer$2(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array$1$2(result).set(new Uint8Array$1$2(arrayBuffer));return result}function cloneDataView$2(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer$2(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}var reFlags$2=/\w*$/;function cloneRegExp$2(regexp){var result=new regexp.constructor(regexp.source,reFlags$2.exec(regexp));result.lastIndex=regexp.lastIndex;return result}var symbolProto$6=Symbol$2$2?Symbol$2$2.prototype:undefined,symbolValueOf$4=symbolProto$6?symbolProto$6.valueOf:undefined;function cloneSymbol$2(symbol){return symbolValueOf$4?Object(symbolValueOf$4.call(symbol)):{}}function cloneTypedArray$2(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer$2(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var boolTag$1$1="[object Boolean]",dateTag$1$1="[object Date]",mapTag$3$1="[object Map]",numberTag$1$1="[object Number]",regexpTag$1$1="[object RegExp]",setTag$3$1="[object Set]",stringTag$1$1="[object String]",symbolTag$1$1="[object Symbol]";var arrayBufferTag$1$1="[object ArrayBuffer]",dataViewTag$1$1="[object DataView]",float32Tag$1$1="[object Float32Array]",float64Tag$1$1="[object Float64Array]",int8Tag$1$1="[object Int8Array]",int16Tag$1$1="[object Int16Array]",int32Tag$1$1="[object Int32Array]",uint8Tag$1$1="[object Uint8Array]",uint8ClampedTag$1$1="[object Uint8ClampedArray]",uint16Tag$1$1="[object Uint16Array]",uint32Tag$1$1="[object Uint32Array]";function initCloneByTag$2(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$1$1:return cloneArrayBuffer$2(object);case boolTag$1$1:case dateTag$1$1:return new Ctor(+object);case dataViewTag$1$1:return cloneDataView$2(object,isDeep);case float32Tag$1$1:case float64Tag$1$1:case int8Tag$1$1:case int16Tag$1$1:case int32Tag$1$1:case uint8Tag$1$1:case uint8ClampedTag$1$1:case uint16Tag$1$1:case uint32Tag$1$1:return cloneTypedArray$2(object,isDeep);case mapTag$3$1:return new Ctor;case numberTag$1$1:case stringTag$1$1:return new Ctor(object);case regexpTag$1$1:return cloneRegExp$2(object);case setTag$3$1:return new Ctor;case symbolTag$1$1:return cloneSymbol$2(object)}}function initCloneObject$2(object){return typeof object.constructor=="function"&&!isPrototype$3(object)?baseCreate$1$1(getPrototype$2$1(object)):{}}var mapTag$2$1="[object Map]";function baseIsMap$2(value){return isObjectLike$1$1(value)&&getTag$1$1(value)==mapTag$2$1}var nodeIsMap$2=nodeUtil$1$2&&nodeUtil$1$2.isMap;var isMap$4=nodeIsMap$2?baseUnary$3(nodeIsMap$2):baseIsMap$2;var isMap$1$1=isMap$4;var setTag$2$1="[object Set]";function baseIsSet$2(value){return isObjectLike$1$1(value)&&getTag$1$1(value)==setTag$2$1}var nodeIsSet$2=nodeUtil$1$2&&nodeUtil$1$2.isSet;var isSet$4=nodeIsSet$2?baseUnary$3(nodeIsSet$2):baseIsSet$2;var isSet$1$1=isSet$4;var CLONE_DEEP_FLAG$1$1=1,CLONE_FLAT_FLAG$2=2,CLONE_SYMBOLS_FLAG$1$1=4;var argsTag$8="[object Arguments]",arrayTag$6="[object Array]",boolTag$8="[object Boolean]",dateTag$8="[object Date]",errorTag$6="[object Error]",funcTag$6="[object Function]",genTag$4="[object GeneratorFunction]",mapTag$1$1="[object Map]",numberTag$8="[object Number]",objectTag$1$1="[object Object]",regexpTag$8="[object RegExp]",setTag$1$1="[object Set]",stringTag$8="[object String]",symbolTag$8="[object Symbol]",weakMapTag$6="[object WeakMap]";var arrayBufferTag$8="[object ArrayBuffer]",dataViewTag$a="[object DataView]",float32Tag$6="[object Float32Array]",float64Tag$6="[object Float64Array]",int8Tag$6="[object Int8Array]",int16Tag$6="[object Int16Array]",int32Tag$6="[object Int32Array]",uint8Tag$6="[object Uint8Array]",uint8ClampedTag$6="[object Uint8ClampedArray]",uint16Tag$6="[object Uint16Array]",uint32Tag$6="[object Uint32Array]";var cloneableTags$2={};cloneableTags$2[argsTag$8]=cloneableTags$2[arrayTag$6]=cloneableTags$2[arrayBufferTag$8]=cloneableTags$2[dataViewTag$a]=cloneableTags$2[boolTag$8]=cloneableTags$2[dateTag$8]=cloneableTags$2[float32Tag$6]=cloneableTags$2[float64Tag$6]=cloneableTags$2[int8Tag$6]=cloneableTags$2[int16Tag$6]=cloneableTags$2[int32Tag$6]=cloneableTags$2[mapTag$1$1]=cloneableTags$2[numberTag$8]=cloneableTags$2[objectTag$1$1]=cloneableTags$2[regexpTag$8]=cloneableTags$2[setTag$1$1]=cloneableTags$2[stringTag$8]=cloneableTags$2[symbolTag$8]=cloneableTags$2[uint8Tag$6]=cloneableTags$2[uint8ClampedTag$6]=cloneableTags$2[uint16Tag$6]=cloneableTags$2[uint32Tag$6]=true;cloneableTags$2[errorTag$6]=cloneableTags$2[funcTag$6]=cloneableTags$2[weakMapTag$6]=false;function baseClone$2(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$1$1,isFlat=bitmask&CLONE_FLAT_FLAG$2,isFull=bitmask&CLONE_SYMBOLS_FLAG$1$1;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject$3(value)){return value}var isArr=isArray$1$2(value);if(isArr){result=initCloneArray$2(value);if(!isDeep){return copyArray$2(value,result)}}else{var tag=getTag$1$1(value),isFunc=tag==funcTag$6||tag==genTag$4;if(isBuffer$1$2(value)){return cloneBuffer$2(value,isDeep)}if(tag==objectTag$1$1||tag==argsTag$8||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject$2(value);if(!isDeep){return isFlat?copySymbolsIn$2(value,baseAssignIn$2(result,value)):copySymbols$2(value,baseAssign$2(result,value))}}else{if(!cloneableTags$2[tag]){return object?value:{}}result=initCloneByTag$2(value,tag,isDeep)}}stack||(stack=new Stack$2);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet$1$1(value)){value.forEach((function(subValue){result.add(baseClone$2(subValue,bitmask,customizer,subValue,value,stack))}))}else if(isMap$1$1(value)){value.forEach((function(subValue,key){result.set(key,baseClone$2(subValue,bitmask,customizer,key,value,stack))}))}var keysFunc=isFull?isFlat?getAllKeysIn$2:getAllKeys$2:isFlat?keysIn$3:keys$3;var props=isArr?undefined:keysFunc(value);arrayEach$2(props||value,(function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue$3(result,key,baseClone$2(subValue,bitmask,customizer,key,value,stack))}));return result}var CLONE_DEEP_FLAG$4=1,CLONE_SYMBOLS_FLAG$4=4;function cloneDeep$2(value){return baseClone$2(value,CLONE_DEEP_FLAG$4|CLONE_SYMBOLS_FLAG$4)}var htmlEscapes$1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var escapeHtmlChar$2=basePropertyOf$1(htmlEscapes$1);var escapeHtmlChar$1$1=escapeHtmlChar$2;var reUnescapedHtml$1=/[&<>"']/g,reHasUnescapedHtml$1=RegExp(reUnescapedHtml$1.source);function escape$1(string){string=toString$2(string);return string&&reHasUnescapedHtml$1.test(string)?string.replace(reUnescapedHtml$1,escapeHtmlChar$1$1):string}function baseValues$1(object,props){return arrayMap$2(props,(function(key){return object[key]}))}var mapTag$e="[object Map]",setTag$e="[object Set]";var objectProto$3$1=Object.prototype;var hasOwnProperty$3$1=objectProto$3$1.hasOwnProperty;function isEmpty$2(value){if(value==null){return true}if(isArrayLike$3(value)&&(isArray$1$2(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer$1$2(value)||isTypedArray$1$2(value)||isArguments$1$2(value))){return!value.length}var tag=getTag$1$1(value);if(tag==mapTag$e||tag==setTag$e){return!value.size}if(isPrototype$3(value)){return!baseKeys$3(value).length}for(var key in value){if(hasOwnProperty$3$1.call(value,key)){return false}}return true}var objectProto$2$2=Object.prototype;var hasOwnProperty$2$2=objectProto$2$2.hasOwnProperty;function customDefaultsAssignIn$1(objValue,srcValue,key,object){if(objValue===undefined||eq$3(objValue,objectProto$2$2[key])&&!hasOwnProperty$2$2.call(object,key)){return srcValue}return objValue}var stringEscapes$1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar$1(chr){return"\\"+stringEscapes$1[chr]}var reInterpolate$2=/<%=([\s\S]+?)%>/g;var reInterpolate$1$1=reInterpolate$2;var reEscape$2=/<%-([\s\S]+?)%>/g;var reEscape$1$1=reEscape$2;var reEvaluate$2=/<%([\s\S]+?)%>/g;var reEvaluate$1$1=reEvaluate$2;var templateSettings$2={escape:reEscape$1$1,evaluate:reEvaluate$1$1,interpolate:reInterpolate$1$1,variable:"",imports:{_:{escape:escape$1}}};var templateSettings$1$1=templateSettings$2;var INVALID_TEMPL_VAR_ERROR_TEXT$1="Invalid `variable` option passed into `_.template`";var reEmptyStringLeading$1=/\b__p \+= '';/g,reEmptyStringMiddle$1=/\b(__p \+=) '' \+/g,reEmptyStringTrailing$1=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reForbiddenIdentifierChars$1=/[()=,{}\[\]\/\s]/;var reEsTemplate$1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reNoMatch$1=/($^)/;var reUnescapedString$1=/['\n\r\u2028\u2029\\]/g;var objectProto$1$2=Object.prototype;var hasOwnProperty$1$2=objectProto$1$2.hasOwnProperty;function template$1(string,options,guard){var settings=templateSettings$1$1.imports._.templateSettings||templateSettings$1$1;if(guard&&isIterateeCall$2(string,options,guard)){options=undefined}string=toString$2(string);options=extendWith$1({},options,settings,customDefaultsAssignIn$1);var imports=extendWith$1({},options.imports,settings.imports,customDefaultsAssignIn$1),importsKeys=keys$3(imports),importsValues=baseValues$1(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch$1,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch$1).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate$1$1?reEsTemplate$1:reNoMatch$1).source+"|"+(options.evaluate||reNoMatch$1).source+"|$","g");var sourceURL=hasOwnProperty$1$2.call(options,"sourceURL")?"//# sourceURL="+(options.sourceURL+"").replace(/\s/g," ")+"\n":"";string.replace(reDelimiters,(function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString$1,escapeStringChar$1);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match}));source+="';\n";var variable=hasOwnProperty$1$2.call(options,"variable")&&options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}else if(reForbiddenIdentifierChars$1.test(variable)){throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT$1)}source=(isEvaluating?source.replace(reEmptyStringLeading$1,""):source).replace(reEmptyStringMiddle$1,"$1").replace(reEmptyStringTrailing$1,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt$1$1((function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)}));result.source=source;if(isError$1(result)){throw result}return result}const LimitBehavior$1={Reject:"reject",RenderUpToTheLimit:"renderUpToTheLimit"};const SupportedLocales$1={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"};const SupportedLocalesForFormats$1=[...Object.values(SupportedLocales$1),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","de-AT","it-CH","it-IT"];const RTLLocales$1=[SupportedLocales$1.Arabic,SupportedLocales$1.Hebrew];function formatMessage$1(statement,parameters){const templateFn=template$1(statement);return templateFn(parameters)}function extractLanguageTag$1(locale){const localeCodeRegex=/^([a-z]{2})-([A-Z]{2})$/;const match=locale?.match(localeCodeRegex);let output=SupportedLocales$1.English;if(match!==null&&match!==undefined&&match?.length>1){output=match[1]}else if(locale?.length===2&&locale.toLowerCase()===locale){output=locale}return output}function sanitizeLocaleCapitalization$1(locale){let localeSanitized=locale;if(locale!==undefined&&locale.indexOf("-")!==-1){const[lang,region]=locale.split("-");localeSanitized=`${lang}-${region.toUpperCase()}`}return localeSanitized}function convertToSupportedLocale$1(locale,supportedLocalesList){let output=SupportedLocales$1.English;const localeSanitized=sanitizeLocaleCapitalization$1(locale);if(localeSanitized!==undefined){if(supportedLocalesList.includes(localeSanitized)===true){output=localeSanitized}else{const languageTag=extractLanguageTag$1(localeSanitized);if(supportedLocalesList.includes(languageTag)===true){output=languageTag}}}return output}function getClosestElement$1(selector,base){function closestFrom(el){let element;if(el===undefined||el===document||el===window)element=null;else{const found=el.closest(selector);element=found||closestFrom(el.getRootNode().host)}return element}return closestFrom(base)}function getLocaleInfo$1(element=document.documentElement){const closestElement=getClosestElement$1("[lang]",element);const locale=closestElement?.lang??window.navigator.language;const supportedLocales=Object.values(SupportedLocales$1);const supportedLocalesForFormats=Object.values(SupportedLocalesForFormats$1);const convertedLocale=convertToSupportedLocale$1(locale,supportedLocales);let formatLocale=convertToSupportedLocale$1(locale,supportedLocalesForFormats);formatLocale=formatLocale==="ar"?"ar-u-nu-latn":formatLocale;return{locale:convertedLocale,rtl:RTLLocales$1.includes(convertedLocale),formatLocale}}function localeParseFloat(localizedString,locale){const[,thousandsSeparator,,,,decimalSeparator]=1111.1.toLocaleString(locale);const compatibleString=localizedString.replace(thousandsSeparator,"").replace(decimalSeparator,".");return parseFloat(compatibleString)}async function fetchCommonStrings$1(locale=getLocaleInfo$1().locale){let strings=await new Promise((function(resolve,reject){require(["./common.t9n.en-e7fe034a-f73a7485-bd9877fb"],resolve,reject)}));switch(locale){case SupportedLocales$1.Arabic:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ar-ea8bf1cd-d724491d-7f2ea190"],resolve,reject)}));break;case SupportedLocales$1.Bosnian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.bs-50e7e1b8-a76081a6-a888d57d"],resolve,reject)}));break;case SupportedLocales$1.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.bg-eabe9ac8-9067eeb6-340c0660"],resolve,reject)}));break;case SupportedLocales$1.Catalan:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ca-950af14a-ae7bc97a-45b09cd6"],resolve,reject)}));break;case SupportedLocales$1.Czech:strings=await new Promise((function(resolve,reject){require(["./common.t9n.cs-231444b2-b1776c63-76052103"],resolve,reject)}));break;case SupportedLocales$1.Danish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.da-e2b7a069-cc01bf89-5313f157"],resolve,reject)}));break;case SupportedLocales$1.German:strings=await new Promise((function(resolve,reject){require(["./common.t9n.de-e959fa59-bbde0676-f43e463a"],resolve,reject)}));break;case SupportedLocales$1.Greek:strings=await new Promise((function(resolve,reject){require(["./common.t9n.el-ef4e2756-be33a890-b86d1f58"],resolve,reject)}));break;case SupportedLocales$1.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./common.t9n.en-US-15386f6a-2569e698-d4464e42"],resolve,reject)}));break;case SupportedLocales$1.Spanish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.es-5d66e04a-82fe0ba6-b0640c6a"],resolve,reject)}));break;case SupportedLocales$1.Estonian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.et-5307e3b0-a960d47a-a03c5576"],resolve,reject)}));break;case SupportedLocales$1.Finnish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.fi-e96a6d07-faa704db-75861b5d"],resolve,reject)}));break;case SupportedLocales$1.French:strings=await new Promise((function(resolve,reject){require(["./common.t9n.fr-2169090f-dea2dd43-65a3a301"],resolve,reject)}));break;case SupportedLocales$1.Hebrew:strings=await new Promise((function(resolve,reject){require(["./common.t9n.he-cb95d457-9679d8b4-7029df7a"],resolve,reject)}));break;case SupportedLocales$1.Croatian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.hr-2b6f0b55-68f18173-bd2e0740"],resolve,reject)}));break;case SupportedLocales$1.Hungarian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.hu-567d14c5-6977d0cd-ea446d7b"],resolve,reject)}));break;case SupportedLocales$1.Indonesian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.id-a35b5064-bb4859cf-482a0c70"],resolve,reject)}));break;case SupportedLocales$1.Italian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.it-5cbd4f97-db976cf5-387ecc34"],resolve,reject)}));break;case SupportedLocales$1.Japanese:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ja-5d878680-e9538cc0-7a666c5b"],resolve,reject)}));break;case SupportedLocales$1.Korean:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ko-4bf4db65-dfc441f7-7104c6e3"],resolve,reject)}));break;case SupportedLocales$1.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.lt-28524590-fc448457-c1c13f5e"],resolve,reject)}));break;case SupportedLocales$1.Latvian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.lv-e60cde8b-a35b0258-a84cd39b"],resolve,reject)}));break;case SupportedLocales$1.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./common.t9n.nb-60820ee3-d8833679-706d518b"],resolve,reject)}));break;case SupportedLocales$1.Dutch:strings=await new Promise((function(resolve,reject){require(["./common.t9n.nl-16aee349-588b330a-18735631"],resolve,reject)}));break;case SupportedLocales$1.Polish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pl-24852f94-19b83f5e-7c13fc34"],resolve,reject)}));break;case SupportedLocales$1.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pt-BR-dc48fb7c-151cd14f-7c8743e6"],resolve,reject)}));break;case SupportedLocales$1.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pt-PT-3f95d45d-365dfdf3-82faf5dd"],resolve,reject)}));break;case SupportedLocales$1.Romanian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ro-13a84c8b-87789128-2f96627e"],resolve,reject)}));break;case SupportedLocales$1.Russian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ru-0b3c635b-ce61c6d5-3cd891db"],resolve,reject)}));break;case SupportedLocales$1.Serbian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sr-820f2169-7645057d-5bac8586"],resolve,reject)}));break;case SupportedLocales$1.Slovak:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sk-44981224-458388c1-b58a2eb9"],resolve,reject)}));break;case SupportedLocales$1.Slovenian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sl-3afc2cc7-a987a492-5b1fce61"],resolve,reject)}));break;case SupportedLocales$1.Swedish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sv-0b5803de-ee384f5a-11282e31"],resolve,reject)}));break;case SupportedLocales$1.Thai:strings=await new Promise((function(resolve,reject){require(["./common.t9n.th-ed1b9dd7-29c79f2d-b2d66606"],resolve,reject)}));break;case SupportedLocales$1.Turkish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.tr-a3475d59-49f8d8d7-28a05e13"],resolve,reject)}));break;case SupportedLocales$1.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.uk-211f7452-2d4c4490-4a1f152e"],resolve,reject)}));break;case SupportedLocales$1.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./common.t9n.vi-78520802-b3354ca6-77154c72"],resolve,reject)}));break;case SupportedLocales$1.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-CN-3ab5c56d-5b29d329-dfe02205"],resolve,reject)}));break;case SupportedLocales$1.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-HK-39b73a76-11bd43d9-c6780887"],resolve,reject)}));break;case SupportedLocales$1.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-TW-5f82b717-7acd2f1d-50bd020d"],resolve,reject)}));break}return strings}const queryDefaults$1={maxRecordCountFactor:5,maxParallelRequests:4,maxRecords:2e3,orderByJSAPIDelimiter:" ",outStatistics:{statisticType:StatisticsDefaults$3.statisticType,onStatisticField:"OBJECTID",outStatisticFieldName:"arcgis_charts_outStatisticFieldName_default_key"},uniqueIdsName:"arcgisChartsUniqueIds"};const fullOpacity=1;const reducedOpacity$1=.7;const defaultPieTickColor=[156,156,156,255];const pieChartSpecialSlicesId$1={defaultGroupOfSlicesId:"arcgis_charts_group_of_slices",sliceIdPrefix:"arcgis-charts-slice-id",undefinedSliceId:"arcgis-charts-slice-id-undefined",nullSliceId:"arcgis-charts-slice-id-null",emptySliceId:"arcgis-charts-slice-id-empty"};const defaultBoxPlotCategory$1="arcgis_charts_box_plot_category";const ramp$1=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]];const overlayRamp$1=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function getOneRampColor$1(props){const{colorIndex,opacity,histogramOverlays}=props;const index=Math.max(0,colorIndex??0);const rampToUse=[...histogramOverlays===true?overlayRamp$1:ramp$1];const[r,g,b,a]=rampToUse[index%rampToUse.length];const alpha=opacity!==undefined?opacity*255:a;return[r,g,b,alpha]}function getDefaultColor(opacity){return[0,0,0,(opacity??reducedOpacity$1)*255]}function generateRandomRestColor(opacityPercentage=1){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256),opacityPercentage*255]}function getDefaultLineSymbol(props){const useRandomColor=props?.useRandomColor??false;const useRampColor=props?.useRampColor;const width=props?.width??1;const isHistogramOverlay=props?.isHistogramOverlay;let color=props?.color??getDefaultColor(1);if(useRandomColor===true)color=generateRandomRestColor();else if(useRampColor!==undefined){if(isHistogramOverlay===true){color=getOneRampColor$1({colorIndex:useRampColor.colorIndex,histogramOverlays:isHistogramOverlay})}else color=getOneRampColor$1({colorIndex:useRampColor.colorIndex})}if(props?.opacity!==undefined)color[3]=props.opacity;return{type:RESTSymbolType$2.SLS,style:RESTSimpleLineSymbolStyle$2.Solid,color,width}}function getDefaultNumberFormat(){return{type:WebChartTypes$3.NumberAxisFormat,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3}}}function getDefaultStatNumberFormat(){return{type:WebChartTypes$3.NumberAxisFormat,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}}}function getDefaultPercentNumberFormat(){return{type:WebChartTypes$3.NumberAxisFormat,intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}}}function getDefaultBoxPlotElementSymbol(seriesIndex,useRandomColor=false){return{type:RESTSymbolType$2.SFS,style:RESTSimpleFillSymbolStyle$1.Solid,color:useRandomColor===true?generateRandomRestColor(reducedOpacity$1):getOneRampColor$1({colorIndex:seriesIndex??0,opacity:reducedOpacity$1}),outline:{type:RESTSymbolType$2.SLS,color:useRandomColor===true?generateRandomRestColor(reducedOpacity$1):getOneRampColor$1({colorIndex:seriesIndex??0,opacity:reducedOpacity$1})}}}function getDefaultLineChartMarkerSymbol(useRandomColor=false){return{type:RESTSymbolType$2.SMS,style:RESTSimpleMarkerSymbolStyle$1.Circle,color:useRandomColor===true?generateRandomRestColor(reducedOpacity$1):getOneRampColor$1({colorIndex:0,opacity:reducedOpacity$1}),size:4}}function getDefaultScatterPlotSizePolicy(){return{type:WebChartTypes$3.SizePolicy,field:"",scaleType:SizePolicyScaleTypes$1.Linear,minSize:5,maxSize:30}}function getDefaultChartRotation$1(){return false}const defaultLimits$1={behaviorAfterLimit:LimitBehavior$1.Reject,maxBarChartSeriesCount:100,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxLineChartSeriesCount:100,maxLineUniqueSeriesCountTotal:1e4,maxLineTwoSeriesCountPerSeries:5e3,maxLineTwoSeriesCountTotal:1e4,maxLineThreePlusSeriesCountPerSeries:1e3,maxLineThreePlusSeriesCountTotal:1e4,maxPieChartSliceCountTotal:300,maxGaugeByFeaturesLimit:50,maxBoxPlotSeriesCount:100,maxBoxUniqueSeriesCountTotal:1e4,maxBoxTwoSeriesCountPerSeries:1e3,maxBoxTwoSeriesCountTotal:2e3,maxBoxThreePlusSeriesCountPerSeries:100,maxBoxThreePlusSeriesCountTotal:2e3,maxBoxPlotOutlierLimit:1e4};function getChartLimits$1(customizedLimits){const chartLimits={...defaultLimits$1};if(customizedLimits!==undefined){Object.keys(defaultLimits$1).forEach((propertyName=>{if(propertyName==="behaviorAfterLimit")chartLimits[propertyName]=customizedLimits[propertyName]??defaultLimits$1[propertyName];else chartLimits[propertyName]=customizedLimits[propertyName]??defaultLimits$1[propertyName]}))}return chartLimits}function getDefaultStackedType$1(){return WebChartStackedKinds$3.Side}const boxPlotOutliersSuffix$1="_arcgis_charts_outliers";const boxPlotZScoreSuffix$1="_arcgis_charts_z_score";var commonjsGlobal$2=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var src$1={exports:{}};function memoize$2(fn,options){var cache=options&&options.cache?options.cache:cacheDefault$1;var serializer=options&&options.serializer?options.serializer:serializerDefault$1;var strategy=options&&options.strategy?options.strategy:strategyDefault$1;return strategy(fn,{cache,serializer})}function isPrimitive$1(value){return value==null||typeof value==="number"||typeof value==="boolean"}function monadic$1(fn,cache,serializer,arg){var cacheKey=isPrimitive$1(arg)?arg:serializer(arg);var computedValue=cache.get(cacheKey);if(typeof computedValue==="undefined"){computedValue=fn.call(this,arg);cache.set(cacheKey,computedValue)}return computedValue}function variadic$1(fn,cache,serializer){var args=Array.prototype.slice.call(arguments,3);var cacheKey=serializer(args);var computedValue=cache.get(cacheKey);if(typeof computedValue==="undefined"){computedValue=fn.apply(this,args);cache.set(cacheKey,computedValue)}return computedValue}function assemble$1(fn,context,strategy,cache,serialize){return strategy.bind(context,fn,cache,serialize)}function strategyDefault$1(fn,options){var strategy=fn.length===1?monadic$1:variadic$1;return assemble$1(fn,this,strategy,options.cache.create(),options.serializer)}function strategyVariadic$1(fn,options){var strategy=variadic$1;return assemble$1(fn,this,strategy,options.cache.create(),options.serializer)}function strategyMonadic$1(fn,options){var strategy=monadic$1;return assemble$1(fn,this,strategy,options.cache.create(),options.serializer)}function serializerDefault$1(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache$1(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache$1.prototype.has=function(key){return key in this.cache};ObjectWithoutPrototypeCache$1.prototype.get=function(key){return this.cache[key]};ObjectWithoutPrototypeCache$1.prototype.set=function(key,value){this.cache[key]=value};var cacheDefault$1={create:function create(){return new ObjectWithoutPrototypeCache$1}};src$1.exports=memoize$2;src$1.exports.strategies={variadic:strategyVariadic$1,monadic:strategyMonadic$1};var memoize$1$2=src$1.exports;var objectTag$9="[object Object]";function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}function overArg$3(func,transform){return function(arg){return func(transform(arg))}}var funcProto$7=Function.prototype,objectProto$y=Object.prototype;var funcToString$7=funcProto$7.toString;var hasOwnProperty$s=objectProto$y.hasOwnProperty;var objectCtorString=funcToString$7.call(Object);var objectToString$3=objectProto$y.toString;var getPrototype$5=overArg$3(Object.getPrototypeOf,Object);function isObjectLike$3(value){return!!value&&typeof value=="object"}function isPlainObject(value){if(!isObjectLike$3(value)||objectToString$3.call(value)!=objectTag$9||isHostObject(value)){return false}var proto=getPrototype$5(value);if(proto===null){return true}var Ctor=hasOwnProperty$s.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString$7.call(Ctor)==objectCtorString}var lodash_isplainobject=isPlainObject;var lib$1$1={exports:{}};var _default$1$1={};var lib$2={exports:{}};var _default$2={};function getDefaultWhiteList$1$1(){var whiteList={};whiteList["align-content"]=false;whiteList["align-items"]=false;whiteList["align-self"]=false;whiteList["alignment-adjust"]=false;whiteList["alignment-baseline"]=false;whiteList["all"]=false;whiteList["anchor-point"]=false;whiteList["animation"]=false;whiteList["animation-delay"]=false;whiteList["animation-direction"]=false;whiteList["animation-duration"]=false;whiteList["animation-fill-mode"]=false;whiteList["animation-iteration-count"]=false;whiteList["animation-name"]=false;whiteList["animation-play-state"]=false;whiteList["animation-timing-function"]=false;whiteList["azimuth"]=false;whiteList["backface-visibility"]=false;whiteList["background"]=true;whiteList["background-attachment"]=true;whiteList["background-clip"]=true;whiteList["background-color"]=true;whiteList["background-image"]=true;whiteList["background-origin"]=true;whiteList["background-position"]=true;whiteList["background-repeat"]=true;whiteList["background-size"]=true;whiteList["baseline-shift"]=false;whiteList["binding"]=false;whiteList["bleed"]=false;whiteList["bookmark-label"]=false;whiteList["bookmark-level"]=false;whiteList["bookmark-state"]=false;whiteList["border"]=true;whiteList["border-bottom"]=true;whiteList["border-bottom-color"]=true;whiteList["border-bottom-left-radius"]=true;whiteList["border-bottom-right-radius"]=true;whiteList["border-bottom-style"]=true;whiteList["border-bottom-width"]=true;whiteList["border-collapse"]=true;whiteList["border-color"]=true;whiteList["border-image"]=true;whiteList["border-image-outset"]=true;whiteList["border-image-repeat"]=true;whiteList["border-image-slice"]=true;whiteList["border-image-source"]=true;whiteList["border-image-width"]=true;whiteList["border-left"]=true;whiteList["border-left-color"]=true;whiteList["border-left-style"]=true;whiteList["border-left-width"]=true;whiteList["border-radius"]=true;whiteList["border-right"]=true;whiteList["border-right-color"]=true;whiteList["border-right-style"]=true;whiteList["border-right-width"]=true;whiteList["border-spacing"]=true;whiteList["border-style"]=true;whiteList["border-top"]=true;whiteList["border-top-color"]=true;whiteList["border-top-left-radius"]=true;whiteList["border-top-right-radius"]=true;whiteList["border-top-style"]=true;whiteList["border-top-width"]=true;whiteList["border-width"]=true;whiteList["bottom"]=false;whiteList["box-decoration-break"]=true;whiteList["box-shadow"]=true;whiteList["box-sizing"]=true;whiteList["box-snap"]=true;whiteList["box-suppress"]=true;whiteList["break-after"]=true;whiteList["break-before"]=true;whiteList["break-inside"]=true;whiteList["caption-side"]=false;whiteList["chains"]=false;whiteList["clear"]=true;whiteList["clip"]=false;whiteList["clip-path"]=false;whiteList["clip-rule"]=false;whiteList["color"]=true;whiteList["color-interpolation-filters"]=true;whiteList["column-count"]=false;whiteList["column-fill"]=false;whiteList["column-gap"]=false;whiteList["column-rule"]=false;whiteList["column-rule-color"]=false;whiteList["column-rule-style"]=false;whiteList["column-rule-width"]=false;whiteList["column-span"]=false;whiteList["column-width"]=false;whiteList["columns"]=false;whiteList["contain"]=false;whiteList["content"]=false;whiteList["counter-increment"]=false;whiteList["counter-reset"]=false;whiteList["counter-set"]=false;whiteList["crop"]=false;whiteList["cue"]=false;whiteList["cue-after"]=false;whiteList["cue-before"]=false;whiteList["cursor"]=false;whiteList["direction"]=false;whiteList["display"]=true;whiteList["display-inside"]=true;whiteList["display-list"]=true;whiteList["display-outside"]=true;whiteList["dominant-baseline"]=false;whiteList["elevation"]=false;whiteList["empty-cells"]=false;whiteList["filter"]=false;whiteList["flex"]=false;whiteList["flex-basis"]=false;whiteList["flex-direction"]=false;whiteList["flex-flow"]=false;whiteList["flex-grow"]=false;whiteList["flex-shrink"]=false;whiteList["flex-wrap"]=false;whiteList["float"]=false;whiteList["float-offset"]=false;whiteList["flood-color"]=false;whiteList["flood-opacity"]=false;whiteList["flow-from"]=false;whiteList["flow-into"]=false;whiteList["font"]=true;whiteList["font-family"]=true;whiteList["font-feature-settings"]=true;whiteList["font-kerning"]=true;whiteList["font-language-override"]=true;whiteList["font-size"]=true;whiteList["font-size-adjust"]=true;whiteList["font-stretch"]=true;whiteList["font-style"]=true;whiteList["font-synthesis"]=true;whiteList["font-variant"]=true;whiteList["font-variant-alternates"]=true;whiteList["font-variant-caps"]=true;whiteList["font-variant-east-asian"]=true;whiteList["font-variant-ligatures"]=true;whiteList["font-variant-numeric"]=true;whiteList["font-variant-position"]=true;whiteList["font-weight"]=true;whiteList["grid"]=false;whiteList["grid-area"]=false;whiteList["grid-auto-columns"]=false;whiteList["grid-auto-flow"]=false;whiteList["grid-auto-rows"]=false;whiteList["grid-column"]=false;whiteList["grid-column-end"]=false;whiteList["grid-column-start"]=false;whiteList["grid-row"]=false;whiteList["grid-row-end"]=false;whiteList["grid-row-start"]=false;whiteList["grid-template"]=false;whiteList["grid-template-areas"]=false;whiteList["grid-template-columns"]=false;whiteList["grid-template-rows"]=false;whiteList["hanging-punctuation"]=false;whiteList["height"]=true;whiteList["hyphens"]=false;whiteList["icon"]=false;whiteList["image-orientation"]=false;whiteList["image-resolution"]=false;whiteList["ime-mode"]=false;whiteList["initial-letters"]=false;whiteList["inline-box-align"]=false;whiteList["justify-content"]=false;whiteList["justify-items"]=false;whiteList["justify-self"]=false;whiteList["left"]=false;whiteList["letter-spacing"]=true;whiteList["lighting-color"]=true;whiteList["line-box-contain"]=false;whiteList["line-break"]=false;whiteList["line-grid"]=false;whiteList["line-height"]=false;whiteList["line-snap"]=false;whiteList["line-stacking"]=false;whiteList["line-stacking-ruby"]=false;whiteList["line-stacking-shift"]=false;whiteList["line-stacking-strategy"]=false;whiteList["list-style"]=true;whiteList["list-style-image"]=true;whiteList["list-style-position"]=true;whiteList["list-style-type"]=true;whiteList["margin"]=true;whiteList["margin-bottom"]=true;whiteList["margin-left"]=true;whiteList["margin-right"]=true;whiteList["margin-top"]=true;whiteList["marker-offset"]=false;whiteList["marker-side"]=false;whiteList["marks"]=false;whiteList["mask"]=false;whiteList["mask-box"]=false;whiteList["mask-box-outset"]=false;whiteList["mask-box-repeat"]=false;whiteList["mask-box-slice"]=false;whiteList["mask-box-source"]=false;whiteList["mask-box-width"]=false;whiteList["mask-clip"]=false;whiteList["mask-image"]=false;whiteList["mask-origin"]=false;whiteList["mask-position"]=false;whiteList["mask-repeat"]=false;whiteList["mask-size"]=false;whiteList["mask-source-type"]=false;whiteList["mask-type"]=false;whiteList["max-height"]=true;whiteList["max-lines"]=false;whiteList["max-width"]=true;whiteList["min-height"]=true;whiteList["min-width"]=true;whiteList["move-to"]=false;whiteList["nav-down"]=false;whiteList["nav-index"]=false;whiteList["nav-left"]=false;whiteList["nav-right"]=false;whiteList["nav-up"]=false;whiteList["object-fit"]=false;whiteList["object-position"]=false;whiteList["opacity"]=false;whiteList["order"]=false;whiteList["orphans"]=false;whiteList["outline"]=false;whiteList["outline-color"]=false;whiteList["outline-offset"]=false;whiteList["outline-style"]=false;whiteList["outline-width"]=false;whiteList["overflow"]=false;whiteList["overflow-wrap"]=false;whiteList["overflow-x"]=false;whiteList["overflow-y"]=false;whiteList["padding"]=true;whiteList["padding-bottom"]=true;whiteList["padding-left"]=true;whiteList["padding-right"]=true;whiteList["padding-top"]=true;whiteList["page"]=false;whiteList["page-break-after"]=false;whiteList["page-break-before"]=false;whiteList["page-break-inside"]=false;whiteList["page-policy"]=false;whiteList["pause"]=false;whiteList["pause-after"]=false;whiteList["pause-before"]=false;whiteList["perspective"]=false;whiteList["perspective-origin"]=false;whiteList["pitch"]=false;whiteList["pitch-range"]=false;whiteList["play-during"]=false;whiteList["position"]=false;whiteList["presentation-level"]=false;whiteList["quotes"]=false;whiteList["region-fragment"]=false;whiteList["resize"]=false;whiteList["rest"]=false;whiteList["rest-after"]=false;whiteList["rest-before"]=false;whiteList["richness"]=false;whiteList["right"]=false;whiteList["rotation"]=false;whiteList["rotation-point"]=false;whiteList["ruby-align"]=false;whiteList["ruby-merge"]=false;whiteList["ruby-position"]=false;whiteList["shape-image-threshold"]=false;whiteList["shape-outside"]=false;whiteList["shape-margin"]=false;whiteList["size"]=false;whiteList["speak"]=false;whiteList["speak-as"]=false;whiteList["speak-header"]=false;whiteList["speak-numeral"]=false;whiteList["speak-punctuation"]=false;whiteList["speech-rate"]=false;whiteList["stress"]=false;whiteList["string-set"]=false;whiteList["tab-size"]=false;whiteList["table-layout"]=false;whiteList["text-align"]=true;whiteList["text-align-last"]=true;whiteList["text-combine-upright"]=true;whiteList["text-decoration"]=true;whiteList["text-decoration-color"]=true;whiteList["text-decoration-line"]=true;whiteList["text-decoration-skip"]=true;whiteList["text-decoration-style"]=true;whiteList["text-emphasis"]=true;whiteList["text-emphasis-color"]=true;whiteList["text-emphasis-position"]=true;whiteList["text-emphasis-style"]=true;whiteList["text-height"]=true;whiteList["text-indent"]=true;whiteList["text-justify"]=true;whiteList["text-orientation"]=true;whiteList["text-overflow"]=true;whiteList["text-shadow"]=true;whiteList["text-space-collapse"]=true;whiteList["text-transform"]=true;whiteList["text-underline-position"]=true;whiteList["text-wrap"]=true;whiteList["top"]=false;whiteList["transform"]=false;whiteList["transform-origin"]=false;whiteList["transform-style"]=false;whiteList["transition"]=false;whiteList["transition-delay"]=false;whiteList["transition-duration"]=false;whiteList["transition-property"]=false;whiteList["transition-timing-function"]=false;whiteList["unicode-bidi"]=false;whiteList["vertical-align"]=false;whiteList["visibility"]=false;whiteList["voice-balance"]=false;whiteList["voice-duration"]=false;whiteList["voice-family"]=false;whiteList["voice-pitch"]=false;whiteList["voice-range"]=false;whiteList["voice-rate"]=false;whiteList["voice-stress"]=false;whiteList["voice-volume"]=false;whiteList["volume"]=false;whiteList["white-space"]=false;whiteList["widows"]=false;whiteList["width"]=true;whiteList["will-change"]=false;whiteList["word-break"]=true;whiteList["word-spacing"]=true;whiteList["word-wrap"]=true;whiteList["wrap-flow"]=false;whiteList["wrap-through"]=false;whiteList["writing-mode"]=false;whiteList["z-index"]=false;return whiteList}function onAttr$1(name,value,options){}function onIgnoreAttr$1(name,value,options){}var REGEXP_URL_JAVASCRIPT$1=/javascript\s*\:/gim;function safeAttrValue$1$1(name,value){if(REGEXP_URL_JAVASCRIPT$1.test(value))return"";return value}_default$2.whiteList=getDefaultWhiteList$1$1();_default$2.getDefaultWhiteList=getDefaultWhiteList$1$1;_default$2.onAttr=onAttr$1;_default$2.onIgnoreAttr=onIgnoreAttr$1;_default$2.safeAttrValue=safeAttrValue$1$1;var util$1$1$1={indexOf:function(arr,item){var i,j;if(Array.prototype.indexOf){return arr.indexOf(item)}for(i=0,j=arr.length;i<j;i++){if(arr[i]===item){return i}}return-1},forEach:function(arr,fn,scope){var i,j;if(Array.prototype.forEach){return arr.forEach(fn,scope)}for(i=0,j=arr.length;i<j;i++){fn.call(scope,arr[i],i,arr)}},trim:function(str){if(String.prototype.trim){return str.trim()}return str.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(str){if(String.prototype.trimRight){return str.trimRight()}return str.replace(/(\s*$)/g,"")}};var _$3$1=util$1$1$1;function parseStyle$1$1(css,onAttr){css=_$3$1.trimRight(css);if(css[css.length-1]!==";")css+=";";var cssLength=css.length;var isParenthesisOpen=false;var lastPos=0;var i=0;var retCSS="";function addNewAttr(){if(!isParenthesisOpen){var source=_$3$1.trim(css.slice(lastPos,i));var j=source.indexOf(":");if(j!==-1){var name=_$3$1.trim(source.slice(0,j));var value=_$3$1.trim(source.slice(j+1));if(name){var ret=onAttr(lastPos,retCSS.length,name,value,source);if(ret)retCSS+=ret+"; "}}}lastPos=i+1}for(;i<cssLength;i++){var c=css[i];if(c==="/"&&css[i+1]==="*"){var j=css.indexOf("*/",i+2);if(j===-1)break;i=j+1;lastPos=i+1;isParenthesisOpen=false}else if(c==="("){isParenthesisOpen=true}else if(c===")"){isParenthesisOpen=false}else if(c===";"){if(isParenthesisOpen);else{addNewAttr()}}else if(c==="\n"){addNewAttr()}}return _$3$1.trim(retCSS)}var parser$2$1=parseStyle$1$1;var DEFAULT$1$1=_default$2;var parseStyle$2=parser$2$1;function isNull$1$1(obj){return obj===undefined||obj===null}function shallowCopyObject$1$1(obj){var ret={};for(var i in obj){ret[i]=obj[i]}return ret}function FilterCSS$2$1(options){options=shallowCopyObject$1$1(options||{});options.whiteList=options.whiteList||DEFAULT$1$1.whiteList;options.onAttr=options.onAttr||DEFAULT$1$1.onAttr;options.onIgnoreAttr=options.onIgnoreAttr||DEFAULT$1$1.onIgnoreAttr;options.safeAttrValue=options.safeAttrValue||DEFAULT$1$1.safeAttrValue;this.options=options}FilterCSS$2$1.prototype.process=function(css){css=css||"";css=css.toString();if(!css)return"";var me=this;var options=me.options;var whiteList=options.whiteList;var onAttr=options.onAttr;var onIgnoreAttr=options.onIgnoreAttr;var safeAttrValue=options.safeAttrValue;var retCSS=parseStyle$2(css,(function(sourcePosition,position,name,value,source){var check=whiteList[name];var isWhite=false;if(check===true)isWhite=check;else if(typeof check==="function")isWhite=check(value);else if(check instanceof RegExp)isWhite=check.test(value);if(isWhite!==true)isWhite=false;value=safeAttrValue(name,value);if(!value)return;var opts={position,sourcePosition,source,isWhite};if(isWhite){var ret=onAttr(name,value,opts);if(isNull$1$1(ret)){return name+":"+value}else{return ret}}else{var ret=onIgnoreAttr(name,value,opts);if(!isNull$1$1(ret)){return ret}}}));return retCSS};var css$1=FilterCSS$2$1;(function(module,exports){var DEFAULT=_default$2;var FilterCSS=css$1;function filterCSS(html,options){var xss=new FilterCSS(options);return xss.process(html)}exports=module.exports=filterCSS;exports.FilterCSS=FilterCSS;for(var i in DEFAULT)exports[i]=DEFAULT[i]})(lib$2,lib$2.exports);var util$6$1={indexOf:function(arr,item){var i,j;if(Array.prototype.indexOf){return arr.indexOf(item)}for(i=0,j=arr.length;i<j;i++){if(arr[i]===item){return i}}return-1},forEach:function(arr,fn,scope){var i,j;if(Array.prototype.forEach){return arr.forEach(fn,scope)}for(i=0,j=arr.length;i<j;i++){fn.call(scope,arr[i],i,arr)}},trim:function(str){if(String.prototype.trim){return str.trim()}return str.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(str){var reg=/\s|\n|\t/;var match=reg.exec(str);return match?match.index:-1}};var FilterCSS$1$1=lib$2.exports.FilterCSS;var getDefaultCSSWhiteList$1=lib$2.exports.getDefaultWhiteList;var _$2$1=util$6$1;function getDefaultWhiteList$2(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var defaultCSSFilter$1=new FilterCSS$1$1;function onTag$1(tag,html,options){}function onIgnoreTag$1(tag,html,options){}function onTagAttr$1(tag,name,value){}function onIgnoreTagAttr$1(tag,name,value){}function escapeHtml$1(html){return html.replace(REGEXP_LT$1,"&lt;").replace(REGEXP_GT$1,"&gt;")}function safeAttrValue$2(tag,name,value,cssFilter){value=friendlyAttrValue$1(value);if(name==="href"||name==="src"){value=_$2$1.trim(value);if(value==="#")return"#";if(!(value.substr(0,7)==="http://"||value.substr(0,8)==="https://"||value.substr(0,7)==="mailto:"||value.substr(0,4)==="tel:"||value.substr(0,11)==="data:image/"||value.substr(0,6)==="ftp://"||value.substr(0,2)==="./"||value.substr(0,3)==="../"||value[0]==="#"||value[0]==="/")){return""}}else if(name==="background"){REGEXP_DEFAULT_ON_TAG_ATTR_4$1.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_4$1.test(value)){return""}}else if(name==="style"){REGEXP_DEFAULT_ON_TAG_ATTR_7$1.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_7$1.test(value)){return""}REGEXP_DEFAULT_ON_TAG_ATTR_8$1.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_8$1.test(value)){REGEXP_DEFAULT_ON_TAG_ATTR_4$1.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_4$1.test(value)){return""}}if(cssFilter!==false){cssFilter=cssFilter||defaultCSSFilter$1;value=cssFilter.process(value)}}value=escapeAttrValue$1(value);return value}var REGEXP_LT$1=/</g;var REGEXP_GT$1=/>/g;var REGEXP_QUOTE$1=/"/g;var REGEXP_QUOTE_2$1=/&quot;/g;var REGEXP_ATTR_VALUE_1$1=/&#([a-zA-Z0-9]*);?/gim;var REGEXP_ATTR_VALUE_COLON$1=/&colon;?/gim;var REGEXP_ATTR_VALUE_NEWLINE$1=/&newline;?/gim;var REGEXP_DEFAULT_ON_TAG_ATTR_4$1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;var REGEXP_DEFAULT_ON_TAG_ATTR_7$1=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;var REGEXP_DEFAULT_ON_TAG_ATTR_8$1=/u\s*r\s*l\s*\(.*/gi;function escapeQuote$1(str){return str.replace(REGEXP_QUOTE$1,"&quot;")}function unescapeQuote$1(str){return str.replace(REGEXP_QUOTE_2$1,'"')}function escapeHtmlEntities$1(str){return str.replace(REGEXP_ATTR_VALUE_1$1,(function replaceUnicode(str,code){return code[0]==="x"||code[0]==="X"?String.fromCharCode(parseInt(code.substr(1),16)):String.fromCharCode(parseInt(code,10))}))}function escapeDangerHtml5Entities$1(str){return str.replace(REGEXP_ATTR_VALUE_COLON$1,":").replace(REGEXP_ATTR_VALUE_NEWLINE$1," ")}function clearNonPrintableCharacter$1(str){var str2="";for(var i=0,len=str.length;i<len;i++){str2+=str.charCodeAt(i)<32?" ":str.charAt(i)}return _$2$1.trim(str2)}function friendlyAttrValue$1(str){str=unescapeQuote$1(str);str=escapeHtmlEntities$1(str);str=escapeDangerHtml5Entities$1(str);str=clearNonPrintableCharacter$1(str);return str}function escapeAttrValue$1(str){str=escapeQuote$1(str);str=escapeHtml$1(str);return str}function onIgnoreTagStripAll$1(){return""}function StripTagBody$1(tags,next){if(typeof next!=="function"){next=function(){}}var isRemoveAllTag=!Array.isArray(tags);function isRemoveTag(tag){if(isRemoveAllTag)return true;return _$2$1.indexOf(tags,tag)!==-1}var removeList=[];var posStart=false;return{onIgnoreTag:function(tag,html,options){if(isRemoveTag(tag)){if(options.isClosing){var ret="[/removed]";var end=options.position+ret.length;removeList.push([posStart!==false?posStart:options.position,end]);posStart=false;return ret}else{if(!posStart){posStart=options.position}return"[removed]"}}else{return next(tag,html,options)}},remove:function(html){var rethtml="";var lastPos=0;_$2$1.forEach(removeList,(function(pos){rethtml+=html.slice(lastPos,pos[0]);lastPos=pos[1]}));rethtml+=html.slice(lastPos);return rethtml}}}function stripCommentTag$1(html){var retHtml="";var lastPos=0;while(lastPos<html.length){var i=html.indexOf("\x3c!--",lastPos);if(i===-1){retHtml+=html.slice(lastPos);break}retHtml+=html.slice(lastPos,i);var j=html.indexOf("--\x3e",i);if(j===-1){break}lastPos=j+3}return retHtml}function stripBlankChar$1(html){var chars=html.split("");chars=chars.filter((function(char){var c=char.charCodeAt(0);if(c===127)return false;if(c<=31){if(c===10||c===13)return true;return false}return true}));return chars.join("")}_default$1$1.whiteList=getDefaultWhiteList$2();_default$1$1.getDefaultWhiteList=getDefaultWhiteList$2;_default$1$1.onTag=onTag$1;_default$1$1.onIgnoreTag=onIgnoreTag$1;_default$1$1.onTagAttr=onTagAttr$1;_default$1$1.onIgnoreTagAttr=onIgnoreTagAttr$1;_default$1$1.safeAttrValue=safeAttrValue$2;_default$1$1.escapeHtml=escapeHtml$1;_default$1$1.escapeQuote=escapeQuote$1;_default$1$1.unescapeQuote=unescapeQuote$1;_default$1$1.escapeHtmlEntities=escapeHtmlEntities$1;_default$1$1.escapeDangerHtml5Entities=escapeDangerHtml5Entities$1;_default$1$1.clearNonPrintableCharacter=clearNonPrintableCharacter$1;_default$1$1.friendlyAttrValue=friendlyAttrValue$1;_default$1$1.escapeAttrValue=escapeAttrValue$1;_default$1$1.onIgnoreTagStripAll=onIgnoreTagStripAll$1;_default$1$1.StripTagBody=StripTagBody$1;_default$1$1.stripCommentTag=stripCommentTag$1;_default$1$1.stripBlankChar=stripBlankChar$1;_default$1$1.cssFilter=defaultCSSFilter$1;_default$1$1.getDefaultCSSWhiteList=getDefaultCSSWhiteList$1;var parser$1$1={};var _$1$1=util$6$1;function getTagName$1(html){var i=_$1$1.spaceIndex(html);if(i===-1){var tagName=html.slice(1,-1)}else{var tagName=html.slice(1,i+1)}tagName=_$1$1.trim(tagName).toLowerCase();if(tagName.slice(0,1)==="/")tagName=tagName.slice(1);if(tagName.slice(-1)==="/")tagName=tagName.slice(0,-1);return tagName}function isClosing$1(html){return html.slice(0,2)==="</"}function parseTag$1$1(html,onTag,escapeHtml){var rethtml="";var lastPos=0;var tagStart=false;var quoteStart=false;var currentPos=0;var len=html.length;var currentTagName="";var currentHtml="";chariterator:for(currentPos=0;currentPos<len;currentPos++){var c=html.charAt(currentPos);if(tagStart===false){if(c==="<"){tagStart=currentPos;continue}}else{if(quoteStart===false){if(c==="<"){rethtml+=escapeHtml(html.slice(lastPos,currentPos));tagStart=currentPos;lastPos=currentPos;continue}if(c===">"){rethtml+=escapeHtml(html.slice(lastPos,tagStart));currentHtml=html.slice(tagStart,currentPos+1);currentTagName=getTagName$1(currentHtml);rethtml+=onTag(tagStart,rethtml.length,currentTagName,currentHtml,isClosing$1(currentHtml));lastPos=currentPos+1;tagStart=false;continue}if(c==='"'||c==="'"){var i=1;var ic=html.charAt(currentPos-i);while(ic.trim()===""||ic==="="){if(ic==="="){quoteStart=c;continue chariterator}ic=html.charAt(currentPos-++i)}}}else{if(c===quoteStart){quoteStart=false;continue}}}}if(lastPos<html.length){rethtml+=escapeHtml(html.substr(lastPos))}return rethtml}var REGEXP_ILLEGAL_ATTR_NAME$1=/[^a-zA-Z0-9_:\.\-]/gim;function parseAttr$1$1(html,onAttr){var lastPos=0;var retAttrs=[];var tmpName=false;var len=html.length;function addAttr(name,value){name=_$1$1.trim(name);name=name.replace(REGEXP_ILLEGAL_ATTR_NAME$1,"").toLowerCase();if(name.length<1)return;var ret=onAttr(name,value||"");if(ret)retAttrs.push(ret)}for(var i=0;i<len;i++){var c=html.charAt(i);var v,j;if(tmpName===false&&c==="="){tmpName=html.slice(lastPos,i);lastPos=i+1;continue}if(tmpName!==false){if(i===lastPos&&(c==='"'||c==="'")&&html.charAt(i-1)==="="){j=html.indexOf(c,i+1);if(j===-1){break}else{v=_$1$1.trim(html.slice(lastPos+1,j));addAttr(tmpName,v);tmpName=false;i=j;lastPos=i+1;continue}}}if(/\s|\n|\t/.test(c)){html=html.replace(/\s|\n|\t/g," ");if(tmpName===false){j=findNextEqual$1(html,i);if(j===-1){v=_$1$1.trim(html.slice(lastPos,i));addAttr(v);tmpName=false;lastPos=i+1;continue}else{i=j-1;continue}}else{j=findBeforeEqual$1(html,i-1);if(j===-1){v=_$1$1.trim(html.slice(lastPos,i));v=stripQuoteWrap$1(v);addAttr(tmpName,v);tmpName=false;lastPos=i+1;continue}else{continue}}}}if(lastPos<html.length){if(tmpName===false){addAttr(html.slice(lastPos))}else{addAttr(tmpName,stripQuoteWrap$1(_$1$1.trim(html.slice(lastPos))))}}return _$1$1.trim(retAttrs.join(" "))}function findNextEqual$1(str,i){for(;i<str.length;i++){var c=str[i];if(c===" ")continue;if(c==="=")return i;return-1}}function findBeforeEqual$1(str,i){for(;i>0;i--){var c=str[i];if(c===" ")continue;if(c==="=")return i;return-1}}function isQuoteWrapString$1(text){if(text[0]==='"'&&text[text.length-1]==='"'||text[0]==="'"&&text[text.length-1]==="'"){return true}else{return false}}function stripQuoteWrap$1(text){if(isQuoteWrapString$1(text)){return text.substr(1,text.length-2)}else{return text}}parser$1$1.parseTag=parseTag$1$1;parser$1$1.parseAttr=parseAttr$1$1;var FilterCSS$3=lib$2.exports.FilterCSS;var DEFAULT$2=_default$1$1;var parser$3=parser$1$1;var parseTag$2=parser$3.parseTag;var parseAttr$2=parser$3.parseAttr;var _$4=util$6$1;function isNull$2(obj){return obj===undefined||obj===null}function getAttrs$1(html){var i=_$4.spaceIndex(html);if(i===-1){return{html:"",closing:html[html.length-2]==="/"}}html=_$4.trim(html.slice(i+1,-1));var isClosing=html[html.length-1]==="/";if(isClosing)html=_$4.trim(html.slice(0,-1));return{html,closing:isClosing}}function shallowCopyObject$2(obj){var ret={};for(var i in obj){ret[i]=obj[i]}return ret}function FilterXSS$1(options){options=shallowCopyObject$2(options||{});if(options.stripIgnoreTag){if(options.onIgnoreTag){console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time')}options.onIgnoreTag=DEFAULT$2.onIgnoreTagStripAll}options.whiteList=options.whiteList||options.allowList||DEFAULT$2.whiteList;options.onTag=options.onTag||DEFAULT$2.onTag;options.onTagAttr=options.onTagAttr||DEFAULT$2.onTagAttr;options.onIgnoreTag=options.onIgnoreTag||DEFAULT$2.onIgnoreTag;options.onIgnoreTagAttr=options.onIgnoreTagAttr||DEFAULT$2.onIgnoreTagAttr;options.safeAttrValue=options.safeAttrValue||DEFAULT$2.safeAttrValue;options.escapeHtml=options.escapeHtml||DEFAULT$2.escapeHtml;this.options=options;if(options.css===false){this.cssFilter=false}else{options.css=options.css||{};this.cssFilter=new FilterCSS$3(options.css)}}FilterXSS$1.prototype.process=function(html){html=html||"";html=html.toString();if(!html)return"";var me=this;var options=me.options;var whiteList=options.whiteList;var onTag=options.onTag;var onIgnoreTag=options.onIgnoreTag;var onTagAttr=options.onTagAttr;var onIgnoreTagAttr=options.onIgnoreTagAttr;var safeAttrValue=options.safeAttrValue;var escapeHtml=options.escapeHtml;var cssFilter=me.cssFilter;if(options.stripBlankChar){html=DEFAULT$2.stripBlankChar(html)}if(!options.allowCommentTag){html=DEFAULT$2.stripCommentTag(html)}var stripIgnoreTagBody=false;if(options.stripIgnoreTagBody){var stripIgnoreTagBody=DEFAULT$2.StripTagBody(options.stripIgnoreTagBody,onIgnoreTag);onIgnoreTag=stripIgnoreTagBody.onIgnoreTag}var retHtml=parseTag$2(html,(function(sourcePosition,position,tag,html,isClosing){var info={sourcePosition,position,isClosing,isWhite:whiteList.hasOwnProperty(tag)};var ret=onTag(tag,html,info);if(!isNull$2(ret))return ret;if(info.isWhite){if(info.isClosing){return"</"+tag+">"}var attrs=getAttrs$1(html);var whiteAttrList=whiteList[tag];var attrsHtml=parseAttr$2(attrs.html,(function(name,value){var isWhiteAttr=_$4.indexOf(whiteAttrList,name)!==-1;var ret=onTagAttr(tag,name,value,isWhiteAttr);if(!isNull$2(ret))return ret;if(isWhiteAttr){value=safeAttrValue(tag,name,value,cssFilter);if(value){return name+'="'+value+'"'}else{return name}}else{var ret=onIgnoreTagAttr(tag,name,value,isWhiteAttr);if(!isNull$2(ret))return ret;return}}));var html="<"+tag;if(attrsHtml)html+=" "+attrsHtml;if(attrs.closing)html+=" /";html+=">";return html}else{var ret=onIgnoreTag(tag,html,info);if(!isNull$2(ret))return ret;return escapeHtml(html)}}),escapeHtml);if(stripIgnoreTagBody){retHtml=stripIgnoreTagBody.remove(retHtml)}return retHtml};var xss$1=FilterXSS$1;(function(module,exports){var DEFAULT=_default$1$1;var parser=parser$1$1;var FilterXSS=xss$1;function filterXSS(html,options){var xss=new FilterXSS(options);return xss.process(html)}exports=module.exports=filterXSS;exports.filterXSS=filterXSS;exports.FilterXSS=FilterXSS;for(var i in DEFAULT)exports[i]=DEFAULT[i];for(var i in parser)exports[i]=parser[i];function isWorkerEnv(){return typeof self!=="undefined"&&typeof DedicatedWorkerGlobalScope!=="undefined"&&self instanceof DedicatedWorkerGlobalScope}if(isWorkerEnv()){self.filterXSS=module.exports}})(lib$1$1,lib$1$1.exports);var Sanitizer=function(){function Sanitizer(filterOptions,extendDefaults){var _this=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]};this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"];this.arcgisFilterOptions={allowCommentTag:true,safeAttrValue:function(tag,name,value,cssFilter){if(tag==="a"&&name==="href"||(tag==="img"||tag==="source")&&name==="src"){return _this.sanitizeUrl(value)}return lib$1$1.exports.safeAttrValue(tag,name,value,cssFilter)}};var xssFilterOptions;if(filterOptions&&!extendDefaults){xssFilterOptions=filterOptions}else if(filterOptions&&extendDefaults){xssFilterOptions=Object.create(this.arcgisFilterOptions);Object.keys(filterOptions).forEach((function(key){if(key==="whiteList"){xssFilterOptions.whiteList=_this._extendObjectOfArrays([_this.arcgisWhiteList,filterOptions.whiteList||{}])}else{xssFilterOptions[key]=filterOptions[key]}}))}else{xssFilterOptions=Object.create(this.arcgisFilterOptions);xssFilterOptions.whiteList=this.arcgisWhiteList}this.xssFilterOptions=xssFilterOptions;this._xssFilter=new lib$1$1.exports.FilterXSS(xssFilterOptions)}Sanitizer.prototype.sanitize=function(value,options){if(options===void 0){options={}}switch(typeof value){case"number":if(isNaN(value)||!isFinite(value)){return null}return value;case"boolean":return value;case"string":return this._xssFilter.process(value);case"object":return this._iterateOverObject(value,options);default:if(options.allowUndefined&&typeof value==="undefined"){return}return null}};Sanitizer.prototype.sanitizeUrl=function(value,options){var _a=(options!==null&&options!==void 0?options:{}).isProtocolRequired,isProtocolRequired=_a===void 0?true:_a;var protocol=this._trim(value.substring(0,value.indexOf(":")));var isRootUrl=value==="/";var isUrlFragment=/^#/.test(value);var isValidProtocol=protocol&&this.allowedProtocols.indexOf(protocol.toLowerCase())>-1;if(isRootUrl||isUrlFragment||isValidProtocol){return lib$1$1.exports.escapeAttrValue(value)}if(!protocol&&!isProtocolRequired){return lib$1$1.exports.escapeAttrValue("https://".concat(value))}return""};Sanitizer.prototype.sanitizeHTMLAttribute=function(tag,attribute,value,cssFilter){if(typeof this.xssFilterOptions.safeAttrValue==="function"){return this.xssFilterOptions.safeAttrValue(tag,attribute,value,cssFilter)}return lib$1$1.exports.safeAttrValue(tag,attribute,value,cssFilter)};Sanitizer.prototype.validate=function(value,options){if(options===void 0){options={}}var sanitized=this.sanitize(value,options);return{isValid:value===sanitized,sanitized}};Sanitizer.prototype._extendObjectOfArrays=function(objects){var finalObj={};objects.forEach((function(obj){Object.keys(obj).forEach((function(key){if(Array.isArray(obj[key])&&Array.isArray(finalObj[key])){finalObj[key]=finalObj[key].concat(obj[key])}else{finalObj[key]=obj[key]}}))}));return finalObj};Sanitizer.prototype._iterateOverObject=function(obj,options){var _this=this;if(options===void 0){options={}}try{var hasChanged_1=false;var changedObj=void 0;if(Array.isArray(obj)){changedObj=obj.reduce((function(prev,value){var validation=_this.validate(value,options);if(validation.isValid){return prev.concat([value])}else{hasChanged_1=true;return prev.concat([validation.sanitized])}}),[])}else if(!lodash_isplainobject(obj)){if(options.allowUndefined&&typeof obj==="undefined"){return}return null}else{var keys=Object.keys(obj);changedObj=keys.reduce((function(prev,key){var value=obj[key];var validation=_this.validate(value,options);if(validation.isValid){prev[key]=value}else{hasChanged_1=true;prev[key]=validation.sanitized}return prev}),{})}if(hasChanged_1){return changedObj}return obj}catch(err){return null}};Sanitizer.prototype._trim=function(val){return String.prototype.trim?val.trim():val.replace(/(^\s*)|(\s*$)/g,"")};return Sanitizer}();function isChartRotated$2(chartConfig){let isRotated=getDefaultChartRotation$1();if(chartConfig!==undefined){const chartType=getSeriesType$1(chartConfig.series);if(chartType===WebChartTypes$3.BarSeries||chartType===WebChartTypes$3.LineSeries||chartType===WebChartTypes$3.ComboLineAndBarSeries||chartType===WebChartTypes$3.BoxPlotSeries){isRotated=(chartConfig.rotated??chartConfig.series[0].rotated??getDefaultChartRotation$1())===true}}return isRotated}function isComboLineAndBarSeries$1(chartSeries){let isCombo;if(chartSeries.length!==0){const firstSeriesType=chartSeries[0].type;if(chartSeries.every((series=>series.type===firstSeriesType))===true){isCombo=false}if(chartSeries.some((series=>series.type!==WebChartTypes$3.LineSeries&&series.type!==WebChartTypes$3.BarSeries))===false&&isCombo===undefined){isCombo=true}}return isCombo}function getSeriesType$1(chartSeries,seriesIndex){let seriesType;if(chartSeries!==undefined&&chartSeries.length>0){if(seriesIndex!==undefined&&seriesIndex<chartSeries.length){seriesType=chartSeries[seriesIndex].type}else{const isCombo=isComboLineAndBarSeries$1(chartSeries);if(isCombo===false){seriesType=chartSeries[0].type}else if(isCombo===true){seriesType=WebChartTypes$3.ComboLineAndBarSeries}}}return seriesType}function getSeriesTypes(chartSeries){return chartSeries?.map((series=>series.type))??[]}function getSeriesStackedType$1(series){let stackedType;if(series.type===WebChartTypes$3.BarSeries||series.type===WebChartTypes$3.LineSeries){stackedType=series.stackedType??getDefaultStackedType$1()}return stackedType}function escapeString$1(string){let escapedString=string;escapedString=escapedString.replace(/'/g,"''");escapedString=escapedString.replace(/[/\\"|[\]\\]/g,"\\$&");return escapedString}function containsNonLatinCharacter$1(value){let hasNonLatinChars=false;if(typeof value!=="number"){const chars=[...value];hasNonLatinChars=chars.some((char=>char.charCodeAt(0)>255))}return hasNonLatinChars}function escapeSQLString$1(string){let escapedString=string;let additionalQuotes="";if(string.charAt(0)==="'"&&string.charAt(string.length-1)==="'"){escapedString=string.slice(1,-1);additionalQuotes="'"}escapedString=escapedString.replace(/'/g,"''");let prefix="";if(containsNonLatinCharacter$1(escapedString)===true)prefix="N";return`${prefix}${additionalQuotes}${escapedString}${additionalQuotes}`}function normalizeString$1(props){const{value,keepSurroundingQuotes,escape}=props;let normalizedValue=value.trim();let additionalQuotes="";if(normalizedValue.charAt(0)==="'"&&normalizedValue.charAt(normalizedValue.length-1)==="'"){normalizedValue=normalizedValue.slice(1,-1);if(keepSurroundingQuotes===true)additionalQuotes="'"}if(escape!==false)normalizedValue=escapeString$1(normalizedValue);normalizedValue=`${additionalQuotes}${normalizedValue}${additionalQuotes}`;return normalizedValue}function isNumberOfElementsUnderLimit$1(props){const{count,seriesCount,seriesType,chartLimits}=props;const{behaviorAfterLimit}=chartLimits??{};let limitNotExceeded=true;if(behaviorAfterLimit!==LimitBehavior$1.RenderUpToTheLimit){const{maxBarChartSeriesCount,maxBarUniqueSeriesCountTotal,maxBarTwoSeriesCountPerSeries,maxBarTwoSeriesCountTotal,maxBarThreePlusSeriesCountPerSeries,maxBarThreePlusSeriesCountTotal,maxLineChartSeriesCount,maxLineUniqueSeriesCountTotal,maxLineTwoSeriesCountPerSeries,maxLineTwoSeriesCountTotal,maxLineThreePlusSeriesCountPerSeries,maxLineThreePlusSeriesCountTotal,maxPieChartSliceCountTotal,maxGaugeByFeaturesLimit,maxBoxPlotSeriesCount,maxBoxUniqueSeriesCountTotal,maxBoxTwoSeriesCountTotal,maxBoxTwoSeriesCountPerSeries,maxBoxThreePlusSeriesCountTotal,maxBoxThreePlusSeriesCountPerSeries}=getChartLimits$1(chartLimits);switch(seriesType){case WebChartTypes$3.BarSeries:case WebChartTypes$3.ComboLineAndBarSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxBarChartSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxBarUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxBarTwoSeriesCountTotal&&categoryCount<=maxBarTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxBarThreePlusSeriesCountTotal&&categoryCount<=maxBarThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$3.LineSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxLineChartSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxLineUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxLineTwoSeriesCountTotal&&categoryCount<=maxLineTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxLineThreePlusSeriesCountTotal&&categoryCount<=maxLineThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$3.PieSeries:limitNotExceeded=count<=maxPieChartSliceCountTotal;break;case WebChartTypes$3.BoxPlotSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxBoxPlotSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxBoxUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxBoxTwoSeriesCountTotal&&categoryCount<=maxBoxTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxBoxThreePlusSeriesCountTotal&&categoryCount<=maxBoxThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$3.GaugeSeries:limitNotExceeded=count<=maxGaugeByFeaturesLimit;break}}return limitNotExceeded}function getFieldAlias(fields=[],fieldName){const fieldAlias=fields.find((field=>field.name===fieldName))?.alias;return fieldAlias!==""?fieldAlias??fieldName:fieldName}function canShowLegend(chartSeries){let canShow=false;const seriesType=getSeriesType$1(chartSeries);switch(seriesType){case WebChartTypes$3.PieSeries:canShow=true;break;case WebChartTypes$3.BarSeries:case WebChartTypes$3.LineSeries:case WebChartTypes$3.ComboLineAndBarSeries:case WebChartTypes$3.BoxPlotSeries:canShow=chartSeries.length>1;break;case WebChartTypes$3.HistogramSeries:case WebChartTypes$3.ScatterSeries:{const overlayBasedSeries=chartSeries[0];canShow=Object.values(overlayBasedSeries.overlays).some((overlay=>overlay.created===true));break}}return canShow}function isEmptyStringField$1(value){return value===undefined||value===null||`${value}`.trim()===""}function getOverlayColorIndex(overlayType){let overlayIndex;switch(overlayType){case OverlayTerms$1.Mean:overlayIndex=1;break;case OverlayTerms$1.Median:overlayIndex=2;break;case OverlayTerms$1.StdDev:overlayIndex=3;break;case OverlayTerms$1.Normal:default:overlayIndex=0;break}return overlayIndex}function sanitizeHTMLOutput(inputToSanitize){const sanitizer=new Sanitizer;return sanitizer.sanitize(inputToSanitize)}const ChartSubType$1={NonSpecific:"nonSpecific",BarAndLineNoAggregation:"barAndLineNoAggregation",BarAndLineMonoField:"barAndLineMonoField",BarAndLineMultiFields:"barAndLineMultiFields",BarAndLineFromFields:"barAndLineFromFields",BarAndLineSplitBy:"barAndLineSplitBy",BarAndLineSplitByNoAggregation:"barAndLineSplitByNoAggregation",PieNoAggregation:"pieNoAggregation",PieFromCategory:"pieFromCategory",PieFromFields:"pieFromFields",BoxPlotMonoField:"boxPlotMonoField",BoxPlotMultiFields:"boxPlotMultiFields",BoxPlotMonoFieldAndCategory:"boxPlotMonoFieldAndCategory",BoxPlotMultiFieldsAndCategory:"boxPlotMultiFieldsAndCategory",BoxPlotMonoFieldAndSplitBy:"boxPlotMonoFieldAndSplitBy",BoxPlotMultiFieldsAndSplitBy:"boxPlotMultiFieldsAndSplitBy",BoxPlotMonoFieldAndCategoryAndSplitBy:"boxPlotMonoFieldAndCategoryAndSplitBy"};const SelectionSource={SelectionByClick:"SelectionByClick",SelectionByRange:"SelectionByRange",ProgrammaticSelection:"ProgrammaticSelection",ClearSelection:"ClearSelection"};function isSFS(symbol){return symbol.type===RESTSymbolType$2.SFS}const rotationSupportedChartTypes=[WebChartTypes$3.BarSeries,WebChartTypes$3.LineSeries,WebChartTypes$3.ComboLineAndBarSeries,WebChartTypes$3.BoxPlotSeries];function isRotationSupported(config){const seriesType=getSeriesType$1(config?.series);return seriesType!==undefined?rotationSupportedChartTypes.includes(seriesType):false}function isSLS(symbol){return symbol.type===RESTSymbolType$2.SLS}function isSMS(symbol){return symbol.type===RESTSymbolType$2.SMS}function hasDataSource(config){return config!==undefined&&"dataSource"in config&&config.dataSource!==undefined}function getRendererInfo$1(layerRenderer){let rendererType;let rendererField;let rendererNormalizationField;if(layerRenderer!==undefined){rendererType=layerRenderer.type;if(rendererType===RESTRendererType$3.UniqueValue||rendererType===RESTRendererType$3.ClassBreaks){rendererField=layerRenderer.field;if(rendererType===RESTRendererType$3.ClassBreaks)rendererNormalizationField=layerRenderer.normalizationField}}return{rendererType,rendererField,rendererNormalizationField}}const getFeatureLayer=memoize$1$2((featureLayer=>{const featureCollection=featureLayer.featureCollection;let featureSet;let layerDefinition;if(featureCollection!==undefined&&featureCollection.layers?.[0]!==undefined){const firstLayer=featureCollection.layers[0];featureSet=firstLayer.featureSet;layerDefinition=firstLayer.layerDefinition}else{layerDefinition=featureLayer.layerDefinition}const inputArgument={};if(featureSet!==undefined){inputArgument.source=FeatureSet__default["default"].fromJSON(featureSet).features;if(layerDefinition?.fields!==undefined){inputArgument.fields=layerDefinition.fields.map((field=>Field__default["default"].fromJSON(field)))}if(layerDefinition?.objectIdField!==undefined)inputArgument.objectIdField=layerDefinition.objectIdField;if(layerDefinition?.geometryType!==undefined){const geometry=geometryJsonUtils__namespace.fromJSON({geometryType:layerDefinition.geometryType});if(geometry?.type!==undefined&&geometry?.type!=="extent")inputArgument.geometryType=geometry.type}if(layerDefinition?.spatialReference!==undefined)inputArgument.spatialReference=layerDefinition.spatialReference}else{inputArgument.id=featureLayer.id;if(layerDefinition?.id!==undefined)inputArgument.layerId=layerDefinition.id;if(featureLayer.url!==undefined)inputArgument.url=featureLayer.url;if(featureLayer.itemId!==undefined&&layerDefinition?.id!==undefined){inputArgument.portalItem={id:featureLayer.itemId}}}if(layerDefinition!==undefined){const drawingInfo=layerDefinition.drawingInfo;if(drawingInfo?.renderer!==undefined){inputArgument.renderer=rendererJsonUtils__namespace.fromJSON(drawingInfo.renderer)}}const layer=new FeatureLayer__default["default"](inputArgument);return layer}));async function getQueryObject(props){const{layer,view,chartConfig}=props;let queryObject;if(layer!==undefined){const theLayer=getLayerFromQueryObject$1(layer);if(view!==undefined&&theLayer.isTable===false){theLayer.outFields=["*"];const featureLayerView=await view.whenLayerView(theLayer);queryObject=featureLayerView}else{queryObject=layer}}else if(chartConfig?.dataSource?.type===WebChartDataSourceTypes$2.Layer&&chartConfig.dataSource.layer!==undefined){queryObject=getFeatureLayer(chartConfig.dataSource.layer)}return queryObject}function isFeatureLayerView$1(queryObject){return queryObject!==undefined&&"layer"in queryObject}function isFeatureLayer$1(queryObject){return queryObject instanceof FeatureLayer__default["default"]||isFeatureLayerView$1(queryObject)===false}function getLayerFromQueryObject$1(queryObject){const isFL=isFeatureLayer$1(queryObject);return isFL===true?queryObject:queryObject.layer}async function fetchLayerFieldsInfo$1(queryObject,usePopupTemplateFieldsInfo){const layer=getLayerFromQueryObject$1(queryObject);let fieldsInfo=[];if(layer!==undefined){await layer.load();const usePopupTemplateAliases=usePopupTemplateFieldsInfo===true&&layer?.popupTemplate?.fieldInfos!==undefined;fieldsInfo=layer.fields.map((field=>{const iField=field.toJSON();if(usePopupTemplateAliases===true){const popupFieldAlias=layer.popupTemplate.fieldInfos.find((popupField=>popupField.fieldName.toLowerCase()===field.name.toLowerCase()))?.label;if(popupFieldAlias!==undefined&&popupFieldAlias!==field.name)iField.alias=popupFieldAlias}return iField}))}return fieldsInfo}function getFieldFromName$1(fieldName,fields=[]){return fields.find((field=>field.name===fieldName))}function getObjectIdField$1(layerFieldsInfo){const oidField=layerFieldsInfo.find((field=>field.type===RESTFieldType$3.OID));return oidField?.name??""}function isNumericField$1(field){const validNumericFields=[RESTFieldType$3.Single,RESTFieldType$3.Double,RESTFieldType$3.SmallInteger,RESTFieldType$3.Integer];return validNumericFields.includes(field.type)}function getSplitByField$1(where,normalize){let field="";if(where!==undefined&&where.includes("=")===true){field=normalize!==false?normalizeString$1({value:where.split("=")[0]}):where.split("=")[0].trim()}return field}function getSplitByValue$1(props){const{where,normalize,keepSurroundingQuotes,escape}=props;let value="";if(where!==undefined&&where.includes("=")===true){value=where.split("=")[1].trim();if(normalize===false)value=escapeSQLString$1(value);else value=normalizeString$1({value,keepSurroundingQuotes,escape})}return value}function isAbsoluteTruthWhereClause$1(where){let alwaysTrue=false;if(where===undefined||where===""){alwaysTrue=true}else if(where.includes("=")===true){const fieldName=getSplitByField$1(where,false);const value=getSplitByValue$1({where,normalize:false});alwaysTrue=fieldName===value}return alwaysTrue}function getPieChartChartSubType$1(series){let chartSubType=ChartSubType$1.PieFromCategory;if(series[0].query?.outStatistics===undefined){chartSubType=ChartSubType$1.PieNoAggregation}else if(series[0].query?.groupByFieldsForStatistics===undefined){chartSubType=ChartSubType$1.PieFromFields}return chartSubType}function getBarLineChartSubType$1(series){let chartSubType=ChartSubType$1.BarAndLineMonoField;const whereClause=series[0].query?.where;if(series[0].query?.groupByFieldsForStatistics===undefined&&(series[0].query?.outStatistics??[]).length>0){chartSubType=ChartSubType$1.BarAndLineFromFields}else if(whereClause===undefined&&series[0].query?.outStatistics===undefined){chartSubType=ChartSubType$1.BarAndLineNoAggregation}else if(isAbsoluteTruthWhereClause$1(whereClause)===false){chartSubType=series[0].query?.outStatistics===undefined?ChartSubType$1.BarAndLineSplitByNoAggregation:ChartSubType$1.BarAndLineSplitBy}else if(series.length>1){chartSubType=ChartSubType$1.BarAndLineMultiFields}return chartSubType}function getBoxPlotChartSubType$1(series){let chartSubType=ChartSubType$1.BoxPlotMonoField;const monoSeries=series.length===1;const firstSeries=series[0];const{y,query}=firstSeries;const whereClause=query?.where;if(firstSeries.x!==defaultBoxPlotCategory$1){if(monoSeries===true){chartSubType=ChartSubType$1.BoxPlotMonoFieldAndCategory}else if(isAbsoluteTruthWhereClause$1(whereClause)===false){chartSubType=ChartSubType$1.BoxPlotMonoFieldAndCategoryAndSplitBy}else{chartSubType=ChartSubType$1.BoxPlotMultiFieldsAndCategory}}else{if(typeof y==="object"&&y.length>1){if(isAbsoluteTruthWhereClause$1(whereClause)===false){chartSubType=ChartSubType$1.BoxPlotMultiFieldsAndSplitBy}else if(monoSeries===true){chartSubType=ChartSubType$1.BoxPlotMultiFields}}else if(monoSeries===true){chartSubType=ChartSubType$1.BoxPlotMonoField}else if(isAbsoluteTruthWhereClause$1(whereClause)===false){chartSubType=ChartSubType$1.BoxPlotMonoFieldAndSplitBy}}return chartSubType}function getChartSubType$1(series){let chartSubType=ChartSubType$1.NonSpecific;if(series?.[0]!==undefined){const seriesType=getSeriesType$1(series);switch(seriesType){case WebChartTypes$3.PieSeries:chartSubType=getPieChartChartSubType$1(series);break;case WebChartTypes$3.BarSeries:case WebChartTypes$3.LineSeries:case WebChartTypes$3.ComboLineAndBarSeries:chartSubType=getBarLineChartSubType$1(series);break;case WebChartTypes$3.BoxPlotSeries:chartSubType=getBoxPlotChartSubType$1(series);break}}return chartSubType}function getSubtypeName$1(props){const{subtypeInfo,fieldName,fieldValueToMatch}=props;let subtypeName;if(subtypeInfo?.typeIdField===fieldName){subtypeName=subtypeInfo.types?.find((ft=>`${ft.id}`===`${fieldValueToMatch}`))?.name}return subtypeName}function getFeatureTypes$1(layer){const{types}=layer;const featureTypes=[];if(types?.[0]!==undefined){for(const{id,name,domains}of types){const domainArray=Object.entries(domains??{});const codedValueDomains=domainArray?.filter((([_,domain])=>domain.type==="coded-value"));const myCodedValuesDomains=codedValueDomains?.map((([fieldName,codedValueDomain])=>{const codedValues=codedValueDomain.codedValues.map((({code,name})=>({name,code})));return{fieldName,name:codedValueDomain.name,codedValues}}));featureTypes.push({id,name,domains:myCodedValuesDomains})}}return featureTypes.length===0?undefined:featureTypes}function getLayerSubtypeInfo$1(queryObject){let subtypeInfo;if(queryObject!==undefined){const layer=getLayerFromQueryObject$1(queryObject);if(isEmptyStringField$1(layer?.typeIdField)===false){const types=getFeatureTypes$1(layer);if(types!==undefined){subtypeInfo={typeIdField:layer.typeIdField,types}}}}return subtypeInfo}function getFieldDescription$1(props){const{fieldName,fieldValueToMatch,subtypeInfo,fieldList}=props;let fieldDescription;if(isEmptyStringField$1(fieldValueToMatch)===false&&isEmptyStringField$1(fieldName)===false){fieldDescription=getSubtypeName$1({subtypeInfo,fieldName,fieldValueToMatch});if(fieldDescription===undefined){const field=getFieldFromName$1(fieldName,fieldList);if(subtypeInfo?.types!==undefined){for(const type of subtypeInfo?.types){const codedValueDomains=type.domains?.filter((domain=>domain.fieldName===field?.name))??[];for(const codedValueDomain of codedValueDomains){fieldDescription=codedValueDomain?.codedValues?.find((cv=>`${cv.code}`===`${fieldValueToMatch}`))?.name;if(fieldDescription!==undefined)break}if(fieldDescription!==undefined)break}}if(fieldDescription===undefined){if(field?.domain!==undefined&&field.domain.type==="codedValue"){fieldDescription=field.domain.codedValues?.find((cv=>`${cv.code}`===`${fieldValueToMatch}`))?.name}}}}return fieldDescription}function isSeriesUsingTimeBinning$1(props){const{seriesConfig,xAxisValueFormatType,setTimeBinningInfoWhenNotProvided}=props;let decision=false;if(getSeriesType$1([seriesConfig])===WebChartTypes$3.LineSeries&&seriesConfig.binTemporalData!==false&&xAxisValueFormatType===WebChartTypes$3.DateAxisFormat){const chartSubType=getChartSubType$1([seriesConfig]);if(chartSubType!==ChartSubType$1.BarAndLineNoAggregation&&chartSubType!==ChartSubType$1.BarAndLineSplitByNoAggregation){const{timeIntervalUnits,timeIntervalSize}=seriesConfig;decision=setTimeBinningInfoWhenNotProvided===true||timeIntervalSize!==undefined&&timeIntervalSize>0&&timeIntervalUnits!==undefined}}return decision}async function findMatchingLayerFieldName(queryObject,fieldToMatch){const layerFieldList=await fetchLayerFieldsInfo$1(queryObject);const match=layerFieldList.find((field=>fieldToMatch.toUpperCase()===field.name.toUpperCase()));const matchingField=match?.name??fieldToMatch;return matchingField}const BoxPlotYFieldKeys$1={Min:"min",FirstQuartile:"first_quartile",Median:"median",ThirdQuartile:"third_quartile",Max:"max",IQR:"iqr",Average:"avg",StandardDeviation:"stddev",Outlier:"outlier"};function getBoxPlotStatisticFieldNames$1(y){const emptyY=y===undefined||y==="";return{[BoxPlotYFieldKeys$1.Average]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.Average}`,[BoxPlotYFieldKeys$1.Min]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.Min}`,[BoxPlotYFieldKeys$1.Max]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.Max}`,[BoxPlotYFieldKeys$1.FirstQuartile]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.FirstQuartile}`,[BoxPlotYFieldKeys$1.Median]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.Median}`,[BoxPlotYFieldKeys$1.ThirdQuartile]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.ThirdQuartile}`,[BoxPlotYFieldKeys$1.IQR]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.IQR}`,[BoxPlotYFieldKeys$1.Outlier]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.Outlier}`,[BoxPlotYFieldKeys$1.StandardDeviation]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys$1.StandardDeviation}`}}function isPieChartFromFields$1(seriesConfig){let isPieFromFields=false;const chartSubType=getChartSubType$1(seriesConfig);isPieFromFields=chartSubType===ChartSubType$1.PieFromFields;return isPieFromFields}function isGaugeByFeature$1(config){return config.subType===GaugeChartSubTypes$1.FeatureGauge}function extractChartDataFromFetchedData$1(props){const{seriesType,fetchedData}=props;let chartData;if(fetchedData!==undefined){switch(seriesType){case WebChartTypes$3.HistogramSeries:chartData=fetchedData.bins;break;case WebChartTypes$3.BarSeries:case WebChartTypes$3.LineSeries:case WebChartTypes$3.ComboLineAndBarSeries:case WebChartTypes$3.ScatterSeries:case WebChartTypes$3.PieSeries:case WebChartTypes$3.GaugeSeries:case WebChartTypes$3.BoxPlotSeries:chartData=fetchedData.dataItems;break}}return chartData}function isMultiFieldsBoxPlot$1(chartSubType){return chartSubType===ChartSubType$1.BoxPlotMultiFields||chartSubType===ChartSubType$1.BoxPlotMultiFieldsAndCategory||chartSubType===ChartSubType$1.BoxPlotMultiFieldsAndSplitBy}function getBoxPlotYValue$1(props){const{key,y,chartSubType,splitBy,splitByValue,showOutliers,standardizeValues}=props;let normalizedSplitByValue=splitByValue;const yFieldNames=getBoxPlotStatisticFieldNames$1(y);let propName=yFieldNames[key];if(showOutliers===true&&(key===BoxPlotYFieldKeys$1.Min||key===BoxPlotYFieldKeys$1.Max))propName=`${propName}${boxPlotOutliersSuffix$1}`;if(standardizeValues===true&&(isMultiFieldsBoxPlot$1(chartSubType)===true||key===BoxPlotYFieldKeys$1.Outlier)){propName=`${propName}${boxPlotZScoreSuffix$1}`}if(splitByValue===undefined||`${splitByValue}`.trim()===""){normalizedSplitByValue=getSplitByValue$1({where:splitBy,normalize:true,escape:false})}if(normalizedSplitByValue!==undefined&&`${normalizedSplitByValue}`.trim()!=="")propName=`${normalizedSplitByValue}${propName!==""?`_${propName}`:""}`;return propName}function doesBoxPlotItemHaveValidQuartiles(props){const{dataItem,y,splitBy}=props;const firstQuartileY=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.FirstQuartile,y,splitBy});const thirdQuartileY=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.ThirdQuartile});return Number.isFinite(dataItem[firstQuartileY])===true||Number.isFinite(dataItem[thirdQuartileY])===true}function isBoxPlotDataItemValid(props){const{configSeries,boxPlotDataItem,yList}=props;const chartSubType=getChartSubType$1(configSeries);let isValidData=false;switch(chartSubType){case ChartSubType$1.BoxPlotMonoField:case ChartSubType$1.BoxPlotMultiFields:case ChartSubType$1.BoxPlotMonoFieldAndCategory:isValidData=doesBoxPlotItemHaveValidQuartiles({dataItem:boxPlotDataItem});break;case ChartSubType$1.BoxPlotMultiFieldsAndCategory:isValidData=yList.some((y=>doesBoxPlotItemHaveValidQuartiles({dataItem:boxPlotDataItem,y})));break;case ChartSubType$1.BoxPlotMonoFieldAndSplitBy:case ChartSubType$1.BoxPlotMultiFieldsAndSplitBy:case ChartSubType$1.BoxPlotMonoFieldAndCategoryAndSplitBy:isValidData=configSeries.some((boxPlotSeries=>doesBoxPlotItemHaveValidQuartiles({dataItem:boxPlotDataItem,splitBy:boxPlotSeries.query?.where})));break;default:isValidData=false;break}return isValidData}function getAllSeriesIDs$1(seriesConfig){return seriesConfig.map((currentSeries=>`${currentSeries.id}`)).filter((id=>id!=="undefined"))}function getYList$1(seriesConfig,visibleSeriesId){let yList=[];const seriesIds=visibleSeriesId??getAllSeriesIDs$1(seriesConfig);const chartSubType=getChartSubType$1(seriesConfig);yList=seriesConfig.filter((currentSeries=>seriesIds.includes(currentSeries.id))).map((currentSeries=>{let y="y"in currentSeries?currentSeries.y:undefined;if(y!==undefined&&chartSubType===ChartSubType$1.BarAndLineSplitByNoAggregation){y=`${y}_${getSplitByValue$1({where:currentSeries.query?.where})}`}return y})).filter((value=>value!==undefined));return Array.from(new Set(yList.flat()))}function validateBarNLineChartDataItem(props){const{dataItem,x,y}=props;return dataItem[x]!==undefined&&dataItem[x]!==null&&(typeof dataItem[x]!=="number"||Number.isFinite(dataItem[x])===true)&&Number.isFinite(dataItem[y])===true}function isEmptyDataset(config,dataSet){let empty=true;if(config!==undefined){const seriesType=getSeriesType$1(config.series);if(dataSet===undefined||dataSet.length===0){empty=true}else{const yList=getYList$1(config.series);empty=dataSet.some((dataItem=>{let validData=false;switch(seriesType){case WebChartTypes$3.HistogramSeries:{const bin=dataItem;validData=Number.isFinite(bin.minValue)===true&&Number.isFinite(bin.maxValue)===true}break;case WebChartTypes$3.ScatterSeries:{const marker=dataItem;const{x,y}=config.series[0];validData=Number.isFinite(marker[x])===true&&Number.isFinite(marker[y])}break;case WebChartTypes$3.ComboLineAndBarSeries:case WebChartTypes$3.LineSeries:case WebChartTypes$3.BarSeries:{const barLineChartDataItem=dataItem;const{x}=config.series[0];validData=yList.some((y=>validateBarNLineChartDataItem({dataItem:barLineChartDataItem,x,y})));break}case WebChartTypes$3.BoxPlotSeries:{const configSeries=config.series;validData=isBoxPlotDataItemValid({configSeries,boxPlotDataItem:dataItem,yList});break}case WebChartTypes$3.PieSeries:{const pieChartDataItem=dataItem;let{x,y}=config.series[0];if(isPieChartFromFields$1(config.series)===true){x=defaultPieFromFieldsName$2;y=defaultPieFromFieldsValue$2}const yValue=pieChartDataItem[y];validData=pieChartDataItem[x]!==undefined&&pieChartDataItem[x]!==null&&yValue!==undefined&&yValue!==null&&Number.isFinite(Number(pieChartDataItem[y]))}break;case WebChartTypes$3.GaugeSeries:{const{x}=config.series[0];const gaugeDataItem=dataItem;validData=Number.isFinite(gaugeDataItem[x])===true}break}return validData}))===false}}return empty}function getYListPerSeriesType(seriesConfig,visibleSeriesId){const yListPerSeriesType=new Map;const visibleSeriesIds=visibleSeriesId??getAllSeriesIDs$1(seriesConfig);seriesConfig.forEach((currentSeries=>{if(visibleSeriesIds.includes(currentSeries.id)&&"y"in currentSeries){const currentYList=yListPerSeriesType.get(currentSeries.type)??[];currentYList.push(currentSeries.y);yListPerSeriesType.set(currentSeries.type,currentYList)}}));return yListPerSeriesType}function getDataMinMaxFromStackedSeries(props){const{seriesConfig,visibleSeriesId,filteredData}=props;const yListPerSeriesType=getYListPerSeriesType(seriesConfig,visibleSeriesId);const stackNegativeValuesToBaseline=seriesConfig.find((currentSeries=>currentSeries.type===WebChartTypes$3.LineSeries))?.stackNegativeValuesToBaseline??true;let stackedMaxY=Number.MIN_SAFE_INTEGER;let stackedMinY=Number.MAX_SAFE_INTEGER;filteredData.forEach(((dataItem,itemIndex)=>{yListPerSeriesType.forEach((yList=>{if(stackNegativeValuesToBaseline===false){let currentSum=0;for(let iY=0;iY<yList.length;iY+=1){const currentYValue=dataItem[yList[iY]];currentSum+=currentYValue;stackedMaxY=Math.max(stackedMaxY,currentSum);stackedMinY=Math.min(stackedMinY,currentSum)}}else{let sumPerPositiveCategoryOnly=[];let sumPerNegativeCategoryOnly=[];for(let iY=0;iY<yList.length;iY+=1){const currentYValue=dataItem[yList[iY]];if(currentYValue<0){sumPerNegativeCategoryOnly[itemIndex]=(sumPerNegativeCategoryOnly[itemIndex]??0)+currentYValue}else{sumPerPositiveCategoryOnly[itemIndex]=(sumPerPositiveCategoryOnly[itemIndex]??0)+currentYValue}}sumPerPositiveCategoryOnly=sumPerPositiveCategoryOnly.filter((value=>Number.isFinite(value))).sort(((a,b)=>a-b));sumPerNegativeCategoryOnly=sumPerNegativeCategoryOnly.filter((value=>Number.isFinite(value))).sort(((a,b)=>a-b));stackedMaxY=Math.max(stackedMaxY,sumPerPositiveCategoryOnly.length>0?sumPerPositiveCategoryOnly[sumPerPositiveCategoryOnly.length-1]:sumPerNegativeCategoryOnly[sumPerNegativeCategoryOnly.length-1]);stackedMinY=Math.min(stackedMinY,sumPerNegativeCategoryOnly.length>0?sumPerNegativeCategoryOnly[0]:sumPerPositiveCategoryOnly[0])}}))}));return{stackedMinY,stackedMaxY}}function findSpecificBoxPlotDataMinMax(props){const{dataItem,...boxPlotYValueProps}=props;const minFieldName=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.Min,...boxPlotYValueProps});const maxFieldName=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.Max,...boxPlotYValueProps});const min=dataItem[minFieldName];const max=dataItem[maxFieldName];return{min,max}}function getDataMinMaxFromVisibleSeries(props){let minY=NaN;let maxY=NaN;let minX;let maxX;const{chartConfig,chartData,visibleSeriesId}=props;const{series:seriesConfig}=chartConfig;if(seriesConfig?.length>0){const stackedType=getSeriesStackedType$1(seriesConfig[0])??getDefaultStackedType$1();const{x}=seriesConfig[0];const filteredData=chartData.filter((dataItem=>dataItem[x]!==null));[minX,maxX]=extent$1(filteredData,(dataItem=>dataItem[x]));const isDateAxis=chartConfig.axes?.[1]?.valueFormat.type===WebChartTypes$3.DateAxisFormat;if(isDateAxis===true&&minX!==undefined&&maxX!==undefined){[minX,maxX]=[new Date(minX).valueOf(),new Date(maxX).valueOf()]}const seriesType=getSeriesType$1(chartConfig.series);if(seriesType===WebChartTypes$3.BoxPlotSeries){minY=Number.MAX_SAFE_INTEGER;maxY=Number.MIN_SAFE_INTEGER;const yList=getYList$1(seriesConfig,visibleSeriesId);const chartSubType=getChartSubType$1(seriesConfig);const{standardizeValues}=chartConfig;const splitByValues=chartConfig.series.map((s=>s.visible!==false?getSplitByValue$1({where:s.query?.where}):""));if(splitByValues.length===0)splitByValues.push(" ");for(let iData=0;iData<filteredData.length;iData+=1){for(let iY=0;iY<yList.length;iY+=1){const y=chartSubType===ChartSubType$1.BoxPlotMultiFieldsAndCategory?yList[iY]:undefined;for(let iSplitBy=0;iSplitBy<splitByValues.length;iSplitBy+=1){const{min,max}=findSpecificBoxPlotDataMinMax({y,splitByValue:splitByValues[iSplitBy],chartSubType,showOutliers:false,standardizeValues,dataItem:filteredData[iData]});if(min!==undefined&&min!==null&&min<minY)minY=min;if(max!==undefined&&max!==null&&max>maxY)maxY=max}}}}else{switch(stackedType){case WebChartStackedKinds$3.Stacked100:{minY=NaN;maxY=NaN;break}case WebChartStackedKinds$3.Stacked:{const{stackedMinY,stackedMaxY}=getDataMinMaxFromStackedSeries({seriesConfig,filteredData,visibleSeriesId});minY=stackedMinY;maxY=stackedMaxY;break}case WebChartStackedKinds$3.Side:default:{minY=Number.MAX_SAFE_INTEGER;maxY=Number.MIN_SAFE_INTEGER;const yList=getYList$1(seriesConfig,visibleSeriesId);for(let iY=0;iY<yList.length;iY+=1){const currentY=yList[iY];const[currentSeriesMin,currentSeriesMax]=extent$1(filteredData,(dataItem=>dataItem[currentY]));if(currentSeriesMin!==undefined&&currentSeriesMin<minY)minY=currentSeriesMin;if(currentSeriesMax!==undefined&&currentSeriesMax>maxY)maxY=currentSeriesMax}break}}}}return{minY,maxY,minX,maxX}}function combineFilters$1(filterList,operand){let combinedFilter;const curedFilterList=Array.from(new Set(filterList)).filter((filter=>filter!==undefined&&filter!==null&&filter!==""&&isAbsoluteTruthWhereClause$1(filter)===false));curedFilterList.sort(((a,b)=>b.length-a.length));if(curedFilterList.length===1){[combinedFilter]=curedFilterList}else{curedFilterList?.forEach((filter=>{if(filter!==undefined){if(isEmptyStringField$1(combinedFilter)===true){combinedFilter=`(${filter})`}else if(combinedFilter?.includes(filter)===false){combinedFilter=`${combinedFilter} ${operand??"AND"} (${filter})`}}}))}return combinedFilter??"1=1"}const abortControllerMap$1=new Map;const ErrorKeywords$1={Default:"defaultError",LayerLoadFailure:"layerLoadFailure",QueryFeaturesError:"queryFeaturesError",ChartDisposed:"ChartDisposeError"};class ArcgisChartsError$1 extends Error{constructor(name,message,details){super(message);this.name=name;this.details=details}}async function fetchErrorsStrings$2(locale=getLocaleInfo$1().locale){let strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-44becc38-57ab316f-8de57a93"],resolve,reject)}));switch(locale){case SupportedLocales$1.Arabic:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ar-2b96ede6-673d563c-2ce1d4ae"],resolve,reject)}));break;case SupportedLocales$1.Bosnian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bs-305b31d2-e61ad1ac-ba859b3a"],resolve,reject)}));break;case SupportedLocales$1.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bg-ac50423e-ef287a30-d31b215d"],resolve,reject)}));break;case SupportedLocales$1.Catalan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ca-3829fc1f-d76f85cb-8be7e4a4"],resolve,reject)}));break;case SupportedLocales$1.Czech:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.cs-7e6217f6-7c23d9f8-027efe54"],resolve,reject)}));break;case SupportedLocales$1.Danish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.da-07d76eac-158a3b03-1cfc91b5"],resolve,reject)}));break;case SupportedLocales$1.German:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.de-338220c8-bae3cdd7-9baeb6a3"],resolve,reject)}));break;case SupportedLocales$1.Greek:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.el-b098b285-a90447d2-2fac5a91"],resolve,reject)}));break;case SupportedLocales$1.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-US-69d530ef-1fe9af16-239059a2"],resolve,reject)}));break;case SupportedLocales$1.Spanish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.es-3a67083c-03dfdb5a-a625f143"],resolve,reject)}));break;case SupportedLocales$1.Estonian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.et-17111f61-d499d7c7-8744b84d"],resolve,reject)}));break;case SupportedLocales$1.Finnish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fi-60041cbd-9a340cd9-1bc7efc2"],resolve,reject)}));break;case SupportedLocales$1.French:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fr-97a31571-ca0b6f99-d6de5f9b"],resolve,reject)}));break;case SupportedLocales$1.Hebrew:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.he-1f425b0c-06dbbf2e-71b99908"],resolve,reject)}));break;case SupportedLocales$1.Croatian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hr-60f3cd18-121af6e6-3e4069ba"],resolve,reject)}));break;case SupportedLocales$1.Hungarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hu-b8494d32-86f9e733-defba734"],resolve,reject)}));break;case SupportedLocales$1.Indonesian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.id-3f98f9f0-8275973b-4c806a38"],resolve,reject)}));break;case SupportedLocales$1.Italian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.it-0e05067b-2fdfd3dc-abb68a20"],resolve,reject)}));break;case SupportedLocales$1.Japanese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ja-98f55623-61d5b068-f0e8f8d7"],resolve,reject)}));break;case SupportedLocales$1.Korean:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ko-4608ea2b-6a6e2fdd-171ef630"],resolve,reject)}));break;case SupportedLocales$1.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lt-0e773f3b-dac69201-d288cf26"],resolve,reject)}));break;case SupportedLocales$1.Latvian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lv-57e77a14-6688cf3e-6dfdba82"],resolve,reject)}));break;case SupportedLocales$1.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nb-b9535cce-ed7bc0d1-629c6f98"],resolve,reject)}));break;case SupportedLocales$1.Dutch:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nl-40956447-fe47199f-112d3a2d"],resolve,reject)}));break;case SupportedLocales$1.Polish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pl-ff93c2fd-ebde2b94-973b4795"],resolve,reject)}));break;case SupportedLocales$1.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-BR-ca013f25-3f4d11fd-22ac6985"],resolve,reject)}));break;case SupportedLocales$1.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-PT-7f5151ee-171e5e7f-7e8abbf3"],resolve,reject)}));break;case SupportedLocales$1.Romanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ro-0b30ed4b-9c2fcaf5-d1868877"],resolve,reject)}));break;case SupportedLocales$1.Russian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ru-2e392b6d-1081714b-e1cb1899"],resolve,reject)}));break;case SupportedLocales$1.Serbian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sr-7a177b5d-2d4f7077-6b3798a9"],resolve,reject)}));break;case SupportedLocales$1.Slovak:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sk-16cb43ea-4e172e26-64511a3c"],resolve,reject)}));break;case SupportedLocales$1.Slovenian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sl-61344164-3bbdf3a2-751079f0"],resolve,reject)}));break;case SupportedLocales$1.Swedish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sv-47fce179-3aa13803-0597116a"],resolve,reject)}));break;case SupportedLocales$1.Thai:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.th-a83666df-02c41747-123963df"],resolve,reject)}));break;case SupportedLocales$1.Turkish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.tr-77c9e866-19edc788-e4b265ac"],resolve,reject)}));break;case SupportedLocales$1.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.uk-a4c7b6d0-88e5f088-74a70f55"],resolve,reject)}));break;case SupportedLocales$1.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.vi-31be663f-ca9fb5bb-11b4f151"],resolve,reject)}));break;case SupportedLocales$1.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-CN-659fe2bd-7a7f197e-97b5477d"],resolve,reject)}));break;case SupportedLocales$1.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-HK-862c2f74-635a904f-c2a3c194"],resolve,reject)}));break;case SupportedLocales$1.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-TW-12d88496-a53fbda3-ed73a1d7"],resolve,reject)}));break}return strings}function abortPendingQueries$1(key){if(key!==undefined){const chartAbortController=abortControllerMap$1.get(key);if(chartAbortController!==undefined)chartAbortController.abort();abortControllerMap$1.set(key,new AbortController)}}const ConfigWarningKeywords={NonNumericAggregation:"nonNumericAggregation",DuplicateSeriesID:"duplicateSeriesId"};const ConfigErrorKeywords$1={Required:"required",MinLength:"minLength",MinItems:"minItems",MaxItems:"maxItems",Pattern:"pattern",AdditionalProperties:"additionalProperties",Enum:"enum",AnyOf:"anyOf"};const DataWarningKeywords$1={BadData:"badData",EmptyDataSet:"emptyDataSet",HistogramEmptyField:"histogramEmptyField",BarElementExceedsLimit:"barElementExceedsLimit",LineChartExceedsLimit:"lineChartExceedsLimit",BoxPlotExceedsLimit:"boxPlotExceedsLimit",BoxPlotOutliersExceedsLimit:"boxPlotOutliersExceedsLimit",PieChartExceedsLimit:"pieChartExceedsLimit",GaugeExceedsLimit:"gaugeExceedsLimit",PieChartMixOfNegativePositiveSlices:"PieChartMixOfNegativePositiveSlices",NegativeValueInSqrtCalculation:"negativeValueInSqrtCalculation",NegativeValueInLogCalculation:"negativeValueInLogCalculation"};const chartConfigVersions=["1.0.0","1.0.1","2.0.0","3.0.0","3.1.0","3.2.0","3.3.0","3.4.0","3.5.0","3.6.0","3.7.0","3.8.0","3.9.0","3.9.1","3.9.2","3.10.0","3.11.0","4.0.0","4.0.1","5.0.0","6.0.0","6.1.0","6.2.0","6.2.1","6.3.0","6.4.0","7.0.0","7.1.0","7.1.1","7.2.0","7.2.1","7.3.1","7.4.0","7.4.1"];const firstWebMapVersion="1.0.0";const unrecognizedVersion="unrecognized.version";const WebChartJSONSchemas$1={$schema:"http://json-schema.org/draft-07/schema#",definitions:{RESTFieldType:{enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"RESTFieldType"},RESTStatisticType:{enum:["avg","centroid-aggregate","convex-hull-aggregate","count","envelope-aggregate","max","min","no_aggregation","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"RESTStatisticType"},RESTSimpleLineSymbolStyle:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"RESTSimpleLineSymbolStyle"},RESTSimpleMarkerSymbolStyle:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"RESTSimpleMarkerSymbolStyle"},RESTSimpleFillSymbolStyle:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"RESTSimpleFillSymbolStyle"},RESTHorizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"RESTHorizontalAlignment"},RESTVerticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"RESTVerticalAlignment"},RESTSymbolType:{enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string",title:"RESTSymbolType"},RESTFontStyle:{enum:["italic","normal","oblique"],type:"string",title:"RESTFontStyle"},RESTFontWeight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"RESTFontWeight"},RESTFontDecoration:{enum:["line-through","none","underline"],type:"string",title:"RESTFontDecoration"},RESTRendererType:{enum:["class-breaks","dictionary","dot-density","heatmap","pie-chart","simple","unique-value"],type:"string",title:"RESTRendererType"},RESTUnits:{enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"RESTUnits"},WebChartTypes:{enum:["barSeries","boxPlotSeries","buffer","category","chart","chartAxis","chartGuide","chartLegend","chartOverlay","chartOverlays","chartText","comboLineAndBarSeries","cursorCrosshair","date","gaugeAxisTick","gaugeNeedle","gaugeSeries","histogramSeries","lineSeries","number","pieSeries","pieTick","probabilityPlotSeries","profileGraphSeries","scatterSeries","sizeScale"],type:"string",title:"WebChartTypes"},WebChartDataTransformations:{title:"WebChartDataTransformations",enum:["logarithmic","none","squareRoot"],type:"string"},WebChartColoringPatterns:{title:"WebChartColoringPatterns",enum:["colorMatch","singleColor"],type:"string"},WebChartLegendPositions:{title:"WebChartLegendPositions",enum:["bottom","left","right","top"],type:"string"},WebChartStackedKinds:{enum:["sideBySide","stacked","stacked100"],type:"string",title:"WebChartStackedKinds"},WebChartProbabilityPlotKinds:{title:"WebChartProbabilityPlotKinds",enum:["normalQQPlot","qqPlot"],type:"string"},WebChartSortOrderKinds:{enum:["ASC","DESC"],type:"string",title:"WebChartSortOrderKinds"},WebChartDataSourceTypes:{enum:["inline","layer"],type:"string",title:"WebChartDataSourceTypes"},WebChartLineSmoothedKinds:{enum:["bezier","monotoneX","monotoneY"],type:"string",title:"WebChartLineSmoothedKinds"},WebChartTimeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"WebChartTimeIntervalUnits"},WebChartNullPolicyTypes:{enum:["interpolate","null","zero"],type:"string",title:"WebChartNullPolicyTypes"},WebChartTimeAggregationTypes:{enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"WebChartTimeAggregationTypes"},WebChartLabelBehavior:{enum:["none","rotate","stagger","wrap"],type:"string",title:"WebChartLabelBehavior"},WebChartVersionStatus:{enum:["newer","older","same","unrecognized"],type:"string",title:"WebChartVersionStatus"},WebChartAxisTypes:{enum:["category","date","value"],type:"string",title:"WebChartAxisTypes"},GaugeChartSubTypes:{enum:["featureGauge","statisticGauge"],type:"string",title:"GaugeChartSubTypes"},SizePolicyScaleTypes:{enum:["linear","logarithmic"],type:"string",title:"SizePolicyScaleTypes"},LabelValueTypes:{enum:["modifiedValue","originalValue"],type:"string",title:"LabelValueTypes"},RGBObject:{description:"JSON representation of the color object",title:"RGBObject",type:"object",properties:{r:{type:"number",title:"r"},g:{type:"number",title:"g"},b:{type:"number",title:"b"},a:{default:1,type:"number",title:"a"}},required:["b","g","r"]},IRendererSymbol:{title:"IRendererSymbol",allOf:[{$ref:"#/definitions/ISymbol"},{type:"object",properties:{color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"}},required:["color"]}]},RGBArray:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3,title:"RGBArray"},WebChartConfigFields:{description:"Is an object which dictate which data-item field should be used for defining a property of the rendered element (line, point, bars, etc). Used in inline data source mode only.",title:"WebChartConfigFields",type:"object",properties:{fillColor:{type:"string",title:"fillColor"},fillOpacity:{type:"string",title:"fillOpacity"},fillStyle:{type:"string",title:"fillStyle"},lineColor:{type:"string",title:"lineColor"},lineOpacity:{type:"string",title:"lineOpacity"},lineWidth:{type:"string",title:"lineWidth"},lineStyle:{type:"string",title:"lineStyle"},markerSize:{type:"string",title:"markerSize"},outlineColor:{type:"string",title:"outlineColor"},outlineOpacity:{type:"string",title:"outlineOpacity"},outlineWidth:{type:"string",title:"outlineWidth"},outlineStyle:{type:"string",title:"outlineStyle"},displayLabel:{type:"string",title:"displayLabel"}}},WebChartDataItemColor:{anyOf:[{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string"}],title:"WebChartDataItemColor"},WebChartDataItemValue:{title:"WebChartDataItemValue",anyOf:[{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/IRendererSymbol"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string",format:"date-time"},{$ref:"#/definitions/IExtent"},{type:"array",items:{type:"number"}},{type:"array",items:{type:"string"}},{type:"array",items:{$ref:"#/definitions/WebChartDataItem"}},{type:["null","string","number","boolean"]}]},WebChartDataItem:{description:"JSON representation of a typical data item",title:"WebChartDataItem",type:"object",additionalProperties:{$ref:"#/definitions/WebChartDataItemValue"}},WebChartBoxPlotDataItem:{description:"JSON representation of the processed data for a Box Plot",title:"WebChartBoxPlotDataItem",type:"object",properties:{outliers:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"outliers"},dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"}},required:["dataItems"]},WebChartScatterPlotDataItem:{description:"JSON representation of the processed data for a Scatter plot",title:"WebChartScatterPlotDataItem",type:"object",properties:{r2:{type:"number",title:"r2"},trendLinePoints:{type:"array",items:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartDataItem"}],minItems:2,maxItems:2,title:"trendLinePoints"},dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"}},required:["dataItems"]},TimeIntervalInfo:{title:"TimeIntervalInfo",type:"object",properties:{timeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{type:"number",title:"timeIntervalSize"}}},WebChartGenericDataItem:{description:"JSON representation of the generic data structure for bar, line bar-line, gauge and pie chart",title:"WebChartGenericDataItem",type:"object",properties:{dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"},timeIntervalInfo:{description:"Time interval information, only for line charts",$ref:"#/definitions/TimeIntervalInfo",title:"timeIntervalInfo"}},required:["dataItems"]},WebChartBin:{description:"JSON representation of a Histogram bin",title:"WebChartBin",type:"object",properties:{count:{type:"number",title:"count"},minValue:{description:"Min value in the bin",type:"number",title:"minValue"},maxValue:{description:"Max value in the bin",type:"number",title:"maxValue"},symbol:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"symbol"}},required:["count","maxValue","minValue"]},WebChartHistogramDataItem:{description:"JSON representation of the processed data for a Histogram",title:"WebChartHistogramDataItem",type:"object",properties:{mean:{type:"number",title:"mean"},median:{type:"number",title:"median"},stddev:{type:"number",title:"stddev"},max:{type:"number",title:"max"},min:{type:"number",title:"min"},sum:{description:"Sum of the values of all the points",type:"number",title:"sum"},count:{description:"Number of all the points/features in un-binned data (including only non-null entries)",type:"number",title:"count"},nulls:{description:"Number of null entries in the pool of points",type:"number",title:"nulls"},bins:{type:"array",items:{$ref:"#/definitions/WebChartBin"},title:"bins"}},required:["bins","max","mean","median","min","stddev"]},WebChartDataTypes:{title:"WebChartDataTypes",anyOf:[{$ref:"#/definitions/WebChartBoxPlotDataItem"},{$ref:"#/definitions/WebChartScatterPlotDataItem"},{$ref:"#/definitions/WebChartGenericDataItem"},{$ref:"#/definitions/WebChartHistogramDataItem"}]},WebChartInlineDataSource:{description:"JSON representation of the inline data source",title:"WebChartInlineDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source. It is **inline** for inline data (arrays of POJOs).",type:"string",enum:["inline"],title:"type"},processed:{description:"Indicates whether the data is already processed and be used right away. If it is `false`, then the data needs to go through some transformation before being assigned to chart/series.",type:"boolean",title:"processed"},configFields:{description:"An object that is used to pass custom configuration like selecting the fill color based on a dataSource field.",$ref:"#/definitions/WebChartConfigFields",title:"configFields"},data:{$ref:"#/definitions/WebChartDataTypes",description:"Structure containing all the data for the chart.",title:"data"}},required:["data","processed","type"]},WebChartLayerDataSource:{description:"JSON representation of the feature layer data source",title:"WebChartLayerDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source.",type:"string",enum:["layer"],title:"type"},layer:{$ref:"#/definitions/IFeatureLayer",description:"Carries the properties necessary to build a JSAPI Feature Layer in order to fetch the chart data.",title:"layer"}},required:["layer","type"]},WebChartDataSources:{title:"WebChartDataSources",anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartLayerDataSource"}]},ValueConversion:{description:"Stores information regarding a numeric conversion",title:"ValueConversion",type:"object",properties:{factor:{description:"A numeric value multiplying the value to convert",type:"number",title:"factor"},offset:{description:"A numeric offset to apply to the value to convert",type:"number",title:"offset"}}},WebChartTextSymbol:{description:"Represents a text symbol.",title:"WebChartTextSymbol",allOf:[{$ref:'#/definitions/Omit<ITextSymbol,"xoffset"|"yoffset">'},{type:"object",properties:{xoffset:{description:'Horizontal offset. Can be a number for a fixed value in pixels, or a string as "25%" for a value\nrelative to the label\'s container width.',type:["string","number"],title:"xoffset"},yoffset:{description:'Horizontal offset. Can be a number for a fixed value in pixels, or a string as "25%" for a value\nrelative to the label\'s container height.',type:["string","number"],title:"yoffset"}}}]},WebChartText:{description:"Stores info on how some text is rendered on the chart and whether it is visible or not.",title:"WebChartText",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartText object. For ChartText object, it is "chartText".',type:"string",enum:["chartText"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},content:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains the styling info and text content. Details on **esriTS** are [here](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm).",title:"content"}},required:["content","type"]},WebChartCursorCrosshair:{description:"JSON representation of the cursor's crosshair for a chart.",title:"WebChartCursorCrosshair",type:"object",properties:{type:{description:"Represents a unique string identifier for the chart cursor's crosshair.",type:"string",enum:["cursorCrosshair"],title:"type"},style:{description:"Contains styling info on how the chart cursor's crosshair should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"style"},verticalLineVisible:{description:"Indicates whether the vertical crosshair line should be displayed",default:false,type:"boolean",title:"verticalLineVisible"},horizontalLineVisible:{description:"Indicates whether the horizontal crosshair line should be displayed",default:false,type:"boolean",title:"horizontalLineVisible"}},required:["type"]},WebChartLegend:{description:"JSON representation of the Chart's legend box",title:"WebChartLegend",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:false,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartPieChartLegend:{description:"Specific legend for the Pie chart",title:"WebChartPieChartLegend",type:"object",properties:{displayNumericValue:{description:"Indicates whether the numeric value associated to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:false,type:"boolean",title:"displayNumericValue"},displayPercentage:{description:"Indicates whether the percentage to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:false,type:"boolean",title:"displayPercentage"},labelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"labelMaxWidth"},valueLabelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"valueLabelMaxWidth"},type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:false,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartOverlay:{description:"JSON representation of the chart's overlays like trendline scatter plot, and median in histogram",title:"WebChartOverlay",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartOverlay object. For ChartOverlay object, it is "chartOverlay".',type:"string",enum:["chartOverlay"],title:"type"},created:{description:"Determines whether the overlay is created under the hood. It may or may not be visible.",default:false,type:"boolean",title:"created"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},symbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the overlay should be rendered",title:"symbol"}},required:["symbol","type"]},NumberFormatOptions:{description:"Defines how the numerical(value) axis data should be formatted.",title:"NumberFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "number". It can help us to differentiate numerical (value) axis from other types of axes viz., date-time axis and category axis.',type:"string",enum:["number"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.NumberFormatOptions",description:"Represents the JS native [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat), which is based on [CLDR](http://cldr.unicode.org/translation/numbers-currency/number-patterns) specifications.",title:"intlOptions"}},required:["intlOptions","type"]},WebChartDateTimeUnitFormatOptions:{description:'Interface used by the axis `valueFormat` property to describe how to format specific date and time units when displayed on the axis.\nFor instance:\n"year": { year: "numeric" }\n"month": { month: "numeric" }\n"day": { day: "2-digit" }\n"hour": { day: "numeric" }\n"minute": { minute: "numeric" }\n"second": { second: "numeric" }\nReference: https://tc39.es/ecma402/#sec-datetimeformat-abstracts',title:"WebChartDateTimeUnitFormatOptions",type:"object",properties:{year:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"year"},month:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"month"},day:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"day"},hour:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"hour"},minute:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"minute"},second:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"second"}}},CategoryFormatOptions:{description:"Defines how the category axis data (Categories) should be formatted.",title:"CategoryFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the CategoryFormatOptions object. For CategoryFormatOptions object, it is "category". It can help us to differentiate category axis from other types of axes, viz., date-time axis and numeric (value) axis.',type:"string",enum:["category"],title:"type"},characterLimit:{description:"Represents a positive integer which represents the limit on the number of characters to be displayed for all the category strings. The truncated string are appended with `...`. If property is not present or `null`, no truncation is done.",minimum:1,multipleOf:1,type:["null","number"],title:"characterLimit"}},required:["type"]},WebChartGuide:{description:"JSON representation of the chart's guide object. Can be used to represent both line and fill guides.",title:"WebChartGuide",type:"object",properties:{type:{description:'Represents a unique string identifier for the Guide object. For Guide class, it is "chartGuide".',type:"string",enum:["chartGuide"],title:"type"},start:{description:"Determines the value where the guide should begin.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"start"},end:{description:"Determines the value where the guide should end. If it is not specified, we get a line guide, otherwise we get a fill/rectangular guide.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"end"},style:{description:"Determines how the guide should be rendered. Line guide requires [esriSLS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format, and fill guide requires [esriSFS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format.",anyOf:[{$ref:"#/definitions/ISimpleLineSymbol"},{$ref:"#/definitions/ISimpleFillSymbol"}],title:"style"},name:{description:"A unique string identifier which is used to refer to a particular guide. It is displayed in the Chart Authoring UI to differentiate between different guides.",type:"string",title:"name"},label:{description:"Represents a text symbol.",$ref:"#/definitions/WebChartTextSymbol",title:"label"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},above:{description:"Determines whether the guide should be rendered on top of (overlapping) the series or under the series.",default:false,type:"boolean",title:"above"}},required:["name","start","style","type"]},WebChartAxis:{description:"JSON representation of the chart's axis object",title:"WebChartAxis",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:false,type:"boolean",title:"isLogarithmic"},title:{description:"Contains styling info on how the title of the axis should be rendered",$ref:"#/definitions/WebChartText",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:false,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:false,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:false,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:false,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:false,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","type","valueFormat"]},WebChartGaugeAxisTick:{description:"JSON representation of the gauge axis ticks.",title:"WebChartGaugeAxisTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeAxisTick object. For WebChartGaugeAxisTick object, it is "gaugeAxisTick".',type:"string",enum:["gaugeAxisTick"],title:"type"},visible:{description:"Determines the visibility of the axis ticks.",default:true,type:"boolean",title:"visible"}},required:["type"]},WebChartNeedle:{title:"WebChartNeedle",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartNeedle object. For WebChartNeedle object, it is "gaugeNeedle".',type:"string",enum:["gaugeNeedle"],title:"type"},visible:{description:"Hides or shows the needle.",default:true,type:"boolean",title:"visible"},symbol:{description:"Contains styling info on how the needle should be rendered",$ref:"#/definitions/ISimpleFillSymbol",title:"symbol"},startWidth:{description:"Represents the needle's thickness at the bottom (chart's center), in px",minimum:1,default:10,type:["null","number"],title:"startWidth"},endWidth:{description:"Represents the needle's thickness at the top, in px",minimum:1,default:1,type:["null","number"],title:"endWidth"},innerRadius:{description:"Represents the size of the hole in the middle of the chart. Can be visualized when guides are displayed.",minimum:0,maximum:100,default:25,type:["null","number"],title:"innerRadius"},displayPin:{description:"Hides or shows the needle's pin (centroid circle)",default:false,type:"boolean",title:"displayPin"}},required:["type"]},WebChartGaugeAxis:{description:"JSON representation of the gauge chart's axis object. Inherits from the WebChartAxis properties.",title:"WebChartGaugeAxis",type:"object",properties:{innerLabel:{description:"Specifies how the axis' inner label needs to be displayed",$ref:"#/definitions/WebChartText",title:"innerLabel"},needle:{description:"Specifies how the axis' needle needs to be displayed",$ref:"#/definitions/WebChartNeedle",title:"needle"},ticks:{description:"Specifies how the axis' ticks need to be displayed",$ref:"#/definitions/WebChartGaugeAxisTick",title:"ticks"},labelsIncrement:{description:"If a label has a value being a multiple of that property, it will be displayed. Otherwise it will be hidden.\n\nIf the property is `undefined` or 0, the chart will be displayed with 6 axis labels distributed evenly along\nthe axis min and max.\n\nIf the property has a value that results in more than a set limit of axis labels (25 as defined in `ChartDefaults.gauge.maximumNumberOfLabelIntervals`)\nthis property value will be ignored and the chart will be displayed with only axis min/max with 4 ticks in between.",default:"undefined",type:"number",title:"labelsIncrement"},onlyShowFirstAndLastLabels:{description:"Specifies if only the first and last labels need to be displayed. If set to `true` all the other labels\nwill be hidden.\nTheir visibility still depends on the axis labels visibility (WebChartAxis.labels.visible).",default:false,type:"boolean",title:"onlyShowFirstAndLastLabels"},minimumValueConversion:{description:"Defines how to convert the axis minimum",$ref:"#/definitions/ValueConversion",title:"minimumValueConversion"},maximumValueConversion:{description:"Defines how to convert the axis maximum",$ref:"#/definitions/ValueConversion",title:"maximumValueConversion"},minimumFromField:{description:"Specifies the field name of which numeric value is to be mapped to the axis minimum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `minimum` value\nfrom the axis config, if provided, or the default value of 0, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"minimumFromField"},maximumFromField:{description:"Specifies the field name of which value is to be mapped to the axis maximum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `maximum` value\nfrom the axis config, if provided, or the default value of 100, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"maximumFromField"},type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:false,type:"boolean",title:"isLogarithmic"},title:{description:"Contains styling info on how the title of the axis should be rendered",$ref:"#/definitions/WebChartText",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:false,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:false,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:false,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:false,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:false,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","type","valueFormat"]},IStatisticDefinitionExtended:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"],title:"IStatisticDefinitionExtended"},WebChartQuery:{description:"Chart query object inspired by [JSAPI Query](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html) class.",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IExtent"},{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"}],title:"geometry"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},start:{description:"The zero-based index indicating where to begin retrieving features.",type:"number",title:"start"},num:{description:"The number of features to retrieve.",type:"number",title:"num"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:false,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:false,type:"boolean",title:"fetchNullValues"}},title:"WebChartQuery"},WebChartSeriesQuery:{description:"Subset of the WebChartQuery, use the series level",title:"WebChartSeriesQuery",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:false,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:false,type:"boolean",title:"fetchNullValues"}}},WebChartDataFilters:{description:"JSON representation of filters applied to the data",title:"WebChartDataFilters",type:"object",properties:{gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IExtent"},{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"}],title:"geometry"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"}}},WebChartSeries:{description:"JSON representation of the chart's series object. All other series extends this interface.",type:"object",properties:{type:{type:"string",title:"type"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"],title:"WebChartSeries"},WebChartBarChartSeries:{description:"[Bar chart](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/bar-chart.htm) shows the categorical distribution of String/DateTime data.",title:"WebChartBarChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the BarChartSeries object. For BarSeries object, it is "barSeries".',type:"string",enum:["barSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},stackedType:{description:'Specifies how the bars/columns should be placed when multiple bar series are rendered in the same chart, say when "split by" operation is executed on any field or when multiple attributes/fields corresponding to the same set of classes are to be visualized.',enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:false,type:"boolean",title:"rotated"},binTemporalData:{description:"If set to `false` the `timeIntervalSize` and `timeIntervalUnits` properties can be used to set the date axis base interval.\nSetting the property to `true` won't have any effect as bar chart doesn't support yet the time binning feature.",default:"undefined",type:"boolean",title:"binTemporalData"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.\nUsed to set the date axis base interval.\nThis property is available at the series level for consistency with `WebChartLineChartSeries` which supports the time binning (not yet implemented on bar).",enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"This property must be used in conjunction with `timeIntervalUnits` to set the date axis base interval.\nThis property is available at the series level for consistency with `WebChartLineChartSeries` which supports the time binning (not yet implemented on bar).",minimum:1,type:"number",title:"timeIntervalSize"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","type","x","y"]},HistogramOverlays:{description:"Object containing Histogram overlays",title:"HistogramOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramOverlays object. For HistogramOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},mean:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the mean overlay for histogram.",title:"mean"},median:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the median overlay for histogram.",title:"median"},standardDeviation:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the standard deviation overlay for histogram.",title:"standardDeviation"},comparisonDistribution:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the comparison distribution overlay for histogram.",title:"comparisonDistribution"}},required:["comparisonDistribution","mean","median","standardDeviation","type"]},WebChartHistogramSeries:{description:"[Histogram](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/histogram.htm) shows the numerical(frequency) distribution of a numerical field.",title:"WebChartHistogramSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramSeries object. For BarSeries object, it is "histogramSeries".',type:"string",enum:["histogramSeries"],title:"type"},binCount:{description:"Bin count must be a positive integer.",minimum:1,multipleOf:1,default:32,type:["null","number"],title:"binCount"},overlays:{$ref:"#/definitions/HistogramOverlays",description:"Specifies the chart overlays. Histogram supports 4 overlays: **mean**, **median**, **standardDeviation** and **comparisonDistribution**.",title:"overlays"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",description:"Specifies how the data should be transformed (e.g. square root, log, etc.) before binning.",title:"dataTransformationType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:false,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","fillSymbol","id","name","overlays","type","x"]},ScatterPlotOverlays:{description:"Object containing Scatter Plot overlays",title:"ScatterPlotOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterPlotOverlays object. For ScatterPlotOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},trendLine:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the trendline overlay for scatter plot.",title:"trendLine"}},required:["trendLine","type"]},SizePolicy:{title:"SizePolicy",type:"object",properties:{type:{description:'Represents a unique string identifier for the sizePolicy object. For sizePolicy object, it is "sizeScale".',type:"string",enum:["sizeScale"],title:"type"},scaleType:{description:"The type of scale to apply to the markers (linear or logarithmic)",default:"SizePolicyScaleTypes.Linear",enum:["linear","logarithmic"],type:"string",title:"scaleType"},field:{description:"The field which determines the markers size",type:"string",title:"field"},minSize:{description:"The minimum marker size",default:5,multipleOf:1,type:"number",title:"minSize"},maxSize:{description:"The maximum marker size",default:30,multipleOf:1,type:"number",title:"maxSize"}},required:["field","type"]},WebChartScatterPlotSeries:{description:"[Scatter plot](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/scatter-plot.htm) shows the relationship between two numerical fields.",title:"WebChartScatterPlotSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterSeries object. For ScatterSeries object, it is "scatterSeries".',type:"string",enum:["scatterSeries"],title:"type"},y:{description:"Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",description:'Specifies how each data point in the scatter plot should be rendered. The type is `"esriSMS"` and it is adopted from the [REST API Types](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm#GUID-C8D40B32-5F4B-45EB-8048-6D5A8763E13B).',title:"markerSymbol"},overlays:{$ref:"#/definitions/ScatterPlotOverlays",description:"Specifies all the chart overlays. The scatter plot implements only 1 overlay, **trendLine**.",title:"overlays"},sizePolicy:{description:"Specifies rules to use the scatter plot as bubble plot, by changing dynamically the markers size according to a specific field value",$ref:"#/definitions/SizePolicy",title:"sizePolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","markerSymbol","name","overlays","type","x","y"]},WebChartPieChartTick:{description:"JSON representation of the pie ticks.",title:"WebChartPieChartTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartPieChartTick object. For PieTick object, it is "pieTick".',type:"string",enum:["pieTick"],title:"type"},visible:{description:"Determines the visibility of the tick.\nAssigning the `true` value will only be considered when the data labels are visible (`series.dataLabels.visible`) and\nwhen the data label associated to the tick is outside of the chart (`series.dataLabelsOffset` > 0).",type:"boolean",title:"visible"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the pie chart ticks should be rendered",title:"lineSymbol"}},required:["lineSymbol","type"]},WebChartPieChartSlice:{description:"JSON representation of the pie slices",title:"WebChartPieChartSlice",type:"object",properties:{sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["sliceId"]},WebChartPieChartGroupSlice:{description:"JSON representation of the pie grouped slice",title:"WebChartPieChartGroupSlice",type:"object",properties:{percentageThreshold:{description:"Slices that have a percent value equal or lesser to this threshold are grouped into a unique slice",type:"number",title:"percentageThreshold"},dataLabels:{description:"Specifies how the grouped slice data labels should be rendered.\nIf the property is not set the `series.dataLabels` will be used instead.",$ref:"#/definitions/WebChartText",title:"dataLabels"},sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["percentageThreshold","sliceId"]},WebChartPieChartSeries:{description:"JSON representation of the Pie Chart series",title:"WebChartPieChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the PieSeries object. For PieSeries object, it is "pieSeries".',type:"string",enum:["pieSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",minimum:0,maximum:100,default:50,type:["null","number"],title:"innerRadius"},startAngle:{default:-90,type:["null","number"],title:"startAngle"},endAngle:{default:270,type:["null","number"],title:"endAngle"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the slices should be rendered",title:"fillSymbol"},displayNumericValueOnDataLabel:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`.\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:true,type:"boolean",title:"displayNumericValueOnDataLabel"},displayPercentageOnDataLabel:{description:"Indicates whether the percentage associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:false,type:"boolean",title:"displayPercentageOnDataLabel"},displayNumericValueOnTooltip:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:true,type:"boolean",title:"displayNumericValueOnTooltip"},displayPercentageOnTooltip:{description:"Indicates whether the percentage associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:true,type:"boolean",title:"displayPercentageOnTooltip"},numericValueFormat:{description:"Specifies how the numerical values should be formatted (applied to label, tooltip and legend).\nCan be overridden for the tooltips by series.dataTooltipValueFormat.",$ref:"#/definitions/NumberFormatOptions",title:"numericValueFormat"},percentValueFormat:{description:"Specifies how the percent values should be formatted (applied to label, tooltip and legend)\nCan be overridden for the tooltips by series.dataTooltipPercentFormat.",$ref:"#/definitions/NumberFormatOptions",title:"percentValueFormat"},valuePrefix:{description:"Adds a prefix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valuePrefix"},valueSuffix:{description:"Adds a suffix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valueSuffix"},percentagePrefix:{description:"Adds a prefix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentagePrefix"},percentageSuffix:{description:"Adds a suffix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentageSuffix"},dataLabelsCharacterLimit:{description:'If set, the category on the data label is truncated to display only `characterLimit` characters, and an ellipsis ("...")\nis added to the end of the label.\nThis does not affect the value and percentage part of the labels.\nDoes not apply to tooltips and legend labels.',default:"undefined",minimum:1,multipleOf:1,type:["null","number"],title:"dataLabelsCharacterLimit"},ticks:{description:"Specifies how to render the ticks shown on each slide.\nTicks will be displayed with default values if not provided.",$ref:"#/definitions/WebChartPieChartTick",title:"ticks"},dataLabelsOffset:{description:"Determines in pixel how far the data labels should be placed from their slice.\nIf a negative value is provided the label will be placed inside of the chart.",default:10,type:"number",title:"dataLabelsOffset"},alignDataLabels:{description:"Aligns labels into columns to make them more readable and avoid them to overlap each other.",default:false,type:"boolean",title:"alignDataLabels"},optimizeDataLabelsOverlapping:{description:"Optimizes the data labels rendering to avoid them to be cut off on the edges or to overlap the legend by wrapping them and adding padding to the chart.",default:false,type:"boolean",title:"optimizeDataLabelsOverlapping"},sliceGrouping:{description:"Specifies if and how the slices under a given percentage threshold are grouped into a unique slice",$ref:"#/definitions/WebChartPieChartGroupSlice",title:"sliceGrouping"},slices:{description:"An array of WebChartPieChartSlice representing the ids, labels and styles of the pie slices.\n\nWhen this property is not defined, or when a pie slice does not have a matching slice in this array,\nthe series' fillSymbol will be used. If the series' fillSymbol does not contain color information, colors from the\ncolor ramps will be utilized.",type:"array",items:{$ref:"#/definitions/WebChartPieChartSlice"},title:"slices"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the pie slices.\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object, and\nfor order based on category or field value (not for order by y value).",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","type","x","y"]},WebChartGaugeSeries:{description:"JSON representation of the `Gauge` series",title:"WebChartGaugeSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeSeries object. For GaugeSeries object, it is "gaugeSeries".',type:"string",enum:["gaugeSeries"],title:"type"},valueConversion:{description:"Defines the conversion to apply to the gauge value",$ref:"#/definitions/ValueConversion",title:"valueConversion"},featureIndex:{description:"Specifies the index of the feature to be rendered.\nThis property will be ignored for a statistic gauge (indicated via `WebGaugeChart.subType` property).\nFor feature-based gauge, if this property is not present, the first feature will be used (featureIndex = 0)",type:"number",title:"featureIndex"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"]},WebChartLineChartSeries:{description:"JSON representation of the Line Chart series",title:"WebChartLineChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the LineSeries object. For LineSeries object, it is "lineSeries".',type:"string",enum:["lineSeries"],title:"type"},y:{type:"string",title:"y"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the line/line segments should be rendered",title:"lineSymbol"},lineSmoothed:{description:"Specifies whether line segments should be smoothed.",default:false,type:"boolean",title:"lineSmoothed"},showArea:{description:"Indicates whether line series show area.",default:false,type:"boolean",title:"showArea"},markerVisible:{description:"Indicates whether to show or hide the markers/bullets of the line series.",default:true,type:"boolean",title:"markerVisible"},markerSymbol:{description:"Contains styling info on how the marker should be rendered",$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},areaColor:{description:"Specifies the color of the filled area for line chart.\nareaColor will be applied only if showArea is true, and is defaulted to the line color if not provided.",type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"areaColor"},rotated:{description:"Specifies whether the series should be rotated.",default:false,type:"boolean",title:"rotated"},stackedType:{description:'Specifies how the lines should be placed when multiple line series are rendered in the same chart, say when "split by" operation is executed on any field or\nwhen multiple attributes/fields corresponding to the same set of classes are to be visualized.',default:"sideBySide",enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},stackNegativeValuesToBaseline:{description:"Specifies how negative values are treated in stacked series.\nIf true, negative values will be stacked on the base line.\nIf false, negative values will be stacked in relation to their previous values in the stack.",default:true,type:"boolean",title:"stackNegativeValuesToBaseline"},binTemporalData:{description:"Whether to use the time properties to bin the temporal data.\nIf set to `false` the `timeIntervalSize` and `timeIntervalUnits` properties can be used to set the date axis base interval.",default:": true",type:"boolean",title:"binTemporalData"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.",enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"The span of time that will be binned or aggregated together. This property must be used in conjunction with `timeIntervalUnits`.",minimum:0,type:"number",title:"timeIntervalSize"},timeAggregationType:{description:"The time interval alignment type. Valid options include `equalIntervalsFromStartTime` and `equalIntervalsFromEndTime`.",default:"equalIntervalsFromStartTime",enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"timeAggregationType"},trimIncompleteTimeInterval:{description:"Determines whether incomplete time intervals at the start or end of the data span (depending on the `timeAggregationType`) will be removed from the chart.\nIncomplete intervals on a chart can cause misleading results in which the period in question is under- or overreported due to a different amount of time in the interval.\nSetting `true` indicates to trim these incomplete intervals. Setting `false` does not trim incomplete intervals.",default:true,type:"boolean",title:"trimIncompleteTimeInterval"},nullPolicy:{description:"How summarized bins returning a null value are displayed. Supported options are `null`, `zero`, and `interpolate`.",default:"null",enum:["interpolate","null","zero"],type:"string",title:"nullPolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","lineSymbol","name","type","x","y"]},WebChartBoxPlotSeries:{description:"JSON representation of the Box plot series",title:"WebChartBoxPlotSeries",type:"object",properties:{type:{type:"string",enum:["boxPlotSeries"],title:"type"},y:{description:"Specifies the numeric field(s) used by the box plot series.",anyOf:[{type:"array",items:{type:"string"}},{type:"string"}],title:"y"},rotated:{description:"Whether to rotate the chart",type:"boolean",title:"rotated"},fillSymbol:{description:"Contains styling info on how the box and whiskers should be rendered. The whiskers use the fillSymbol.outline.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x","y"]},WebChartProbabilityPlotSeries:{description:"JSON representation of the Probability plot series",title:"WebChartProbabilityPlotSeries",type:"object",properties:{type:{type:"string",enum:["probabilityPlotSeries"],title:"type"},y:{type:"string",title:"y"},probabilityPlotType:{$ref:"#/definitions/WebChartProbabilityPlotKinds",title:"probabilityPlotType"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",title:"dataTransformationType"},showReferenceLine:{type:"boolean",title:"showReferenceLine"},standardizeValues:{type:"boolean",title:"standardizeValues"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},referenceLineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"referenceLineSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","id","markerSymbol","name","probabilityPlotType","referenceLineSymbol","showReferenceLine","standardizeValues","type","x","y"]},WebChartProfileGraphSeries:{description:"JSON representation of the Profile graph series",title:"WebChartProfileGraphSeries",type:"object",properties:{type:{type:"string",enum:["profileGraphSeries"],title:"type"},y:{type:"string",title:"y"},horizontalUnits:{type:"string",title:"horizontalUnits"},verticalUnits:{type:"string",title:"verticalUnits"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"lineSymbol"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","horizontalUnits","id","lineSymbol","markerSymbol","name","type","verticalUnits","x","y"]},WebChartSeriesType:{description:"Type containing all the series types available",title:"WebChartSeriesType",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},WebMapWebChart:{description:"Gives a JSON representation of the Chart object without the dataSource Object. Used in the Webmap Viewer workflows.",type:"object",properties:{version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["series","type","version"],title:"WebMapWebChart"},WebMapWebGaugeChart:{description:"JSON representation of Gauge",type:"object",properties:{innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["axes","series","type","version"],title:"WebMapWebGaugeChart"},WebMapWebBoxPlot:{description:"JSON representation of Gauge",type:"object",properties:{showOutliers:{description:"Whether to show the outliers on the chart",type:"boolean",title:"showOutliers"},standardizeValues:{description:"Whether to standardize the values by calculating the series z-score",type:"boolean",title:"standardizeValues"},series:{description:"The box plot series",type:"array",items:{$ref:"#/definitions/WebChartBoxPlotSeries"},title:"series"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["series","type","version"],title:"WebMapWebBoxPlot"},WebChart:{description:"Gives a JSON representation of the Chart object. Used by ArcGIS Charts packages.",type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["dataSource","series","type","version"],title:"WebChart"},WebGaugeChart:{type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["axes","dataSource","series","type","version"],title:"WebGaugeChart"},WebBoxPlot:{type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the datasource. Can be Feature layer or vanilla POJOs.",title:"dataSource"},showOutliers:{description:"Whether to show the outliers on the chart",type:"boolean",title:"showOutliers"},standardizeValues:{description:"Whether to standardize the values by calculating the series z-score",type:"boolean",title:"standardizeValues"},series:{description:"The box plot series",type:"array",items:{$ref:"#/definitions/WebChartBoxPlotSeries"},title:"series"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["dataSource","series","type","version"],title:"WebBoxPlot"},OverlayTerms:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"OverlayTerms"},CalculatedMinMaxBoundsPayload:{type:"object",properties:{isXAxis:{type:"boolean",title:"isXAxis"},minimum:{type:["null","number"],title:"minimum"},maximum:{type:["null","number"],title:"maximum"}},required:["isXAxis"],title:"CalculatedMinMaxBoundsPayload"},ChartDeletePayload:{type:"object",properties:{chartId:{type:"string",title:"chartId"}},required:["chartId"],title:"ChartDeletePayload"},LegendItemVisibility:{type:"object",properties:{visible:{type:"boolean",title:"visible"},seriesId:{type:"string",title:"seriesId"},overlayType:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"overlayType"},sliceId:{type:"string",title:"sliceId"},sliceData:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"sliceData"}},required:["visible"],title:"LegendItemVisibility"},ISymbol:{title:"ISymbol",type:"object",properties:{type:{$ref:"#/definitions/SymbolType",title:"type"},style:{type:"string",title:"style"}},required:["type"]},SymbolType:{title:"SymbolType",enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string"},ISimpleLineSymbol:{title:"ISimpleLineSymbol",type:"object",properties:{type:{type:"string",enum:["esriSLS"],title:"type"},style:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},width:{type:"number",title:"width"}},required:["type"]},IExtent:{description:'Extents are used to define rectangles and bounding boxes.\n\n`IExtent` can also be imported from the following packages:\n\n```js\nimport { IExtent } from "@esri/arcgis-rest-geocoding";\nimport { IExtent } from "@esri/arcgis-rest-service-admin";\nimport { IExtent } from "@esri/arcgis-rest-feature-layer";\n```',title:"IExtent",type:"object",properties:{xmin:{type:"number",title:"xmin"},ymin:{type:"number",title:"ymin"},zmin:{type:"number",title:"zmin"},xmax:{type:"number",title:"xmax"},ymax:{type:"number",title:"ymax"},zmax:{type:"number",title:"zmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISpatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',title:"ISpatialReference",type:"object",properties:{wkid:{type:"number",title:"wkid"},latestWkid:{type:"number",title:"latestWkid"},vcsWkid:{type:"number",title:"vcsWkid"},latestVcsWkid:{type:"number",title:"latestVcsWkid"},wkt:{type:"string",title:"wkt"},latestWkt:{type:"string",title:"latestWkt"}}},IFeatureLayer:{description:"Feature layers can be created by referencing a layer from either a map service or a feature service or by specifying a feature collection object.\nUse a map service if you just want to retrieve geometries and attributes from the server and symbolize them yourself. Use a feature service if\nyou want to take advantage of symbols from the service's source map document. Also, use a feature service if you plan on doing editing with the\nfeature layer. Feature layers honor any feature templates configured in the source map document. Feature collection objects are used to create\na feature layer based on the supplied definition.",title:"IFeatureLayer",type:"object",properties:{capabilities:{description:"A comma-separated string listing which editing operations are allowed on an editable feature service.",type:"string",title:"capabilities"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},disablePopup:{description:"Indicates whether to allow a client to ignore popups defined by the service item.",enum:[true],type:"boolean",title:"disablePopup"},featureCollection:{description:"A featureCollection object defining a layer of features whose geometry and attributes are either stored directly within the web map or with an item. Feature Collections can be created from CSVs, shapefiles, GPX, or map notes.",title:"featureCollection"},featureCollectionType:{description:"Indicates the type of features in the feature collection. If featureCollectionType is missing, it means the feature collection is a regular single-layer or multi-layer feature collection.",enum:["markup","notes","route"],type:"string",title:"featureCollectionType"},layerDefinition:{description:"A layerDefinition object defining the attribute schema and drawing information for the layer.",$ref:"#/definitions/ILayerDefinition",title:"layerDefinition"},layerType:{description:"String indicating the layer type.",type:"string",enum:["ArcGISFeatureLayer"],title:"layerType"},mode:{description:"0 is snapshot mode. 1 is on-demand mode. 2 is selection-only mode. Used with ArcGIS feature services and individual layers in ArcGIS map services.",enum:[0,1,2],type:"number",title:"mode"},popupInfo:{description:"A popupInfo object defining the content of popup windows when you click or query a feature.",$ref:"#/definitions/IPopupInfo",title:"popupInfo"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled.",type:"number",title:"refreshInterval"},showLabels:{description:"Labels will display if this property is set to true and the layer also has a labelingInfo property associated with it. This property can get stored in the web map config and in the item/data.",enum:[true],type:"boolean",title:"showLabels"},visibleLayers:{description:"An array of sublayer ids that should appear visible. Used with feature layers that are based on feature collections.",type:"array",items:{type:"number"},title:"visibleLayers"},id:{description:"A unique identifying string for the layer.",title:"id"},name:{description:"Layer name",type:"string",title:"name"},itemId:{description:"Optional string containing the item ID of the service if it's registered on ArcGIS Online or your organization's portal.",type:"string",title:"itemId"},maxScale:{description:"Integer property used to determine the maximum scale at which the layer is displayed.",type:"number",title:"maxScale"},minScale:{description:"Integer property used to determine the minimum scale at which the layer is displayed.",type:"number",title:"minScale"},opacity:{description:"The degree of transparency applied to the layer on the client side, where 0 is full transparency and 1 is no transparency.",type:"number",title:"opacity"},showLegend:{description:"Boolean property indicating whether to display in the legend.",type:"boolean",title:"showLegend"},title:{description:"A user-friendly string title for the layer that can be used in a table of contents.",type:"string",title:"title"},type:{description:"Deprecated, use layerType instead.",type:"string",title:"type"},visibility:{description:"Boolean property determining whether the layer is initially visible in the web map.",type:"boolean",title:"visibility"},url:{description:"The URL to the layer. Not applicable to all layer types.",type:"string",title:"url"},timeAnimation:{description:"This property is applicable to layers that support time. If 'true', timeAnimation is enabled.",type:"boolean",title:"timeAnimation"}},required:["id","layerType"]},IDefinitionEditor:{description:"The definitionEditor stores interactive filters at the same level as layerDefinition.",title:"IDefinitionEditor",type:"object",properties:{inputs:{description:"An array of input objects.",type:"array",items:{$ref:"#/definitions/IDefinitionInput"},title:"inputs"},parameterizedExpression:{description:"A string value representing the where clause for the interactive filter.",type:"string",title:"parameterizedExpression"}}},IDefinitionInput:{title:"IDefinitionInput",type:"object",properties:{hint:{description:"A string value representing a hint for the input.",type:"string",title:"hint"},parameters:{description:"An array of parameter objects.",type:"array",items:{$ref:"#/definitions/IDefinitionParameter"},title:"parameters"},prompt:{description:"A string value representing the prompt for the input.",type:"string",title:"prompt"}}},IDefinitionParameter:{title:"IDefinitionParameter",type:"object",properties:{defaultValue:{description:"The default value that is automatically given if nothing is provided.",type:["string","number"],title:"defaultValue"},fieldName:{description:"A string value representing the name of the field to query.",type:"string",title:"fieldName"},parameterId:{description:"Number given to uniquely identify the specified parameter.",title:"parameterId"},type:{description:"The field type for the specified field parameter.",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"type"},utcValue:{description:"An integer value representing exact UNIX time used when defaultValue is a date string.",type:"number",title:"utcValue"}}},ILayerDefinition:{description:'`ILayerDefinition` can also be imported from the following packages:\n\n```js\nimport { ILayerDefinition } from "@esri/arcgis-rest-service-admin";\nimport { ILayerDefinition } from "@esri/arcgis-rest-feature-layer";\n```',title:"ILayerDefinition",type:"object",properties:{allowGeometryUpdates:{description:"Boolean value indicating whether the geometry of the features in the layer can be edited.",type:"boolean",title:"allowGeometryUpdates"},capabilities:{description:"A comma separated list of supported capabilities, e.g. Query,Editing.",type:"string",title:"capabilities"},copyrightText:{description:"String value for the copyright text information for the layer.",type:"string",title:"copyrightText"},currentVersion:{description:"Numeric value indicating the server version of the layer.",type:"number",title:"currentVersion"},defaultVisibility:{description:"Boolean value indicating whether the layer's visibility is turned on.",type:"boolean",title:"defaultVisibility"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},definitionExpression:{description:"SQL-based definition expression string that narrows the data to be displayed in the layer.",type:"string",title:"definitionExpression"},description:{description:"String value of the layer as defined in the map service.",type:"string",title:"description"},displayField:{description:"A string value that summarizes the feature.",type:"string",title:"displayField"},drawingInfo:{description:"Contains drawing, labeling, and transparency information.",title:"drawingInfo"},extent:{description:"An object defining the rectangular area.",anyOf:[{$ref:"#/definitions/IExtent"},{type:"null"}],title:"extent"},editingInfo:{description:"An object defining the editing info (last edit date).",$ref:"#/definitions/IEditingInfo",title:"editingInfo"},featureReduction:{description:"Feature reductions declutter the screen by hiding features that would otherwise intersect with other features on screen.",title:"featureReduction"},fields:{description:"An array of field objects containing information about the attribute fields for the feature collection or layer.",type:"array",items:{$ref:"#/definitions/IField"},title:"fields"},geometryType:{description:"A string defining the type of geometry. Possible geometry types are: esriGeometryPoint, esriGeometryMultipoint, esriGeometryPolyline, esriGeometryPolygon, and esriGeometryEnvelope.",enum:["esriGeometryEnvelope","esriGeometryMultipoint","esriGeometryPoint","esriGeometryPolygon","esriGeometryPolyline"],type:"string",title:"geometryType"},globalIdField:{description:"The unique identifier for a feature or table row within a geodatabase.",type:"string",title:"globalIdField"},hasAttachments:{description:"Indicates whether attachments should be loaded for the layer.",type:"boolean",title:"hasAttachments"},hasStaticData:{description:"Boolean value indicating whether data changes. True if it does not.",type:"boolean",title:"hasStaticData"},htmlPopupType:{description:"String value indicating the HTML popup type.",enum:["esriServerHTMLPopupTypeAsHTMLText","esriServerHTMLPopupTypeAsURL","esriServerHTMLPopupTypeNone"],type:"string",title:"htmlPopupType"},id:{description:"The identifier assigned to the layer.",type:"number",title:"id"},isDataVersioned:{description:"Boolean value indicating whether the data is versioned.",type:"boolean",title:"isDataVersioned"},maxRecordCount:{description:"Numeric value indicating tbe maximum number of records that will be returned at once for a query.",type:"number",title:"maxRecordCount"},maxScale:{description:"Represents the maximum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"maxScale"},minScale:{description:"Represents the minimum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"minScale"},name:{description:"Contains a unique name for the layer that can be displayed in a legend.",type:"string",title:"name"},objectIdField:{description:"Indicates the name of the object ID field in the dataset.",type:"string",title:"objectIdField"},overrideSymbols:{description:"Dictates whether a client can support having an end user modify symbols on individual features.",type:"boolean",title:"overrideSymbols"},rangeInfos:{description:"Indicates range information",title:"rangeInfos"},source:{description:"An object indicating the layerDefinition's layer source.",title:"source"},spatialReference:{description:"An object containing the WKID or WKT identifying the spatial reference of the layer's geometry.",$ref:"#/definitions/ISpatialReference",title:"spatialReference"},supportedQueryFormats:{description:"String value indicating the output formats that are supported in a query.",type:"string",title:"supportedQueryFormats"},supportsAdvancedQueries:{description:"Boolean value indicating whether the layer supports orderByFields in a query operation.",type:"boolean",title:"supportsAdvancedQueries"},supportsAttachmentsByUploadId:{description:"Boolean value indicating whether the layer supports uploading attachments with the Uploads operation. This can then be used in the Add Attachment and Update Attachment operations.",type:"boolean",title:"supportsAttachmentsByUploadId"},supportsCalculate:{description:"Boolean value indicating whether the layer supports the Calculate REST operation when updating features.",type:"boolean",title:"supportsCalculate"},supportsRollbackOnFailureParameter:{description:"Boolean value indicating whether the layer supports rolling back edits made on a feature layer if some of the edits fail.",type:"boolean",title:"supportsRollbackOnFailureParameter"},supportsStatistics:{description:"Boolean value indicating whether feature layer query operations support statistical functions.",type:"boolean",title:"supportsStatistics"},supportsValidateSql:{description:"Boolean value indicating whether the validateSQL operation is supported across a feature service layer.",type:"boolean",title:"supportsValidateSql"},templates:{description:"A property of the layer definition when there are no types defined; otherwise, templates are defined as properties of the types.",type:"array",items:{$ref:"#/definitions/ITemplate"},title:"templates"},timeInfo:{description:"The time info metadata of the layer. May be set for feature layers inside a feature collection item.",title:"timeInfo"},type:{description:"Indicates whether the layerDefinition applies to a Feature Layer or a Table.",enum:["Feature Layer","Table"],type:"string",title:"type"},typeIdField:{description:"Contains the name of the field holding the type ID for the features.",type:"string",title:"typeIdField"},types:{description:"Contains information about an attribute field.",title:"types"},visibilityField:{description:"String value indicating the attribute field that is used to control the visibility of a feature.\nIf applicable, when rendering a feature the client should use this field to control visibility.\nThe field's values are 0 = do not display, 1 = display.",type:"string",title:"visibilityField"},relationships:{type:"array",items:{},title:"relationships"},editFieldsInfo:{type:"object",properties:{creationDateField:{type:"string",title:"creationDateField"},creatorField:{type:"string",title:"creatorField"},editDateField:{type:"string",title:"editDateField"},editorField:{type:"string",title:"editorField"}},title:"editFieldsInfo"},parentLayerId:{type:"number",title:"parentLayerId"},ownershipBasedAccessControlForFeatures:{type:"boolean",title:"ownershipBasedAccessControlForFeatures"},syncCanReturnChanges:{type:"boolean",title:"syncCanReturnChanges"},archivingInfo:{type:"object",properties:{supportsQueryWithHistoricMoment:{type:"boolean",title:"supportsQueryWithHistoricMoment"},startArchivingMoment:{type:"number",title:"startArchivingMoment"}},title:"archivingInfo"},supportsValidateSQL:{type:"boolean",title:"supportsValidateSQL"},advancedQueryCapabilities:{type:"object",properties:{supportsPagination:{type:"boolean",title:"supportsPagination"},supportsTrueCurve:{type:"boolean",title:"supportsTrueCurve"},supportsQueryWithDistance:{type:"boolean",title:"supportsQueryWithDistance"},supportsReturningQueryExtent:{type:"boolean",title:"supportsReturningQueryExtent"},supportsStatistics:{type:"boolean",title:"supportsStatistics"},supportsOrderBy:{type:"boolean",title:"supportsOrderBy"},supportsDistinct:{type:"boolean",title:"supportsDistinct"},supportsSqlExpression:{type:"boolean",title:"supportsSqlExpression"},supportsPercentileStatistics:{type:"boolean",title:"supportsPercentileStatistics"}},title:"advancedQueryCapabilities"},allowTrueCurvesUpdates:{type:"boolean",title:"allowTrueCurvesUpdates"},onlyAllowTrueCurveUpdatesByTrueCurveClients:{type:"boolean",title:"onlyAllowTrueCurveUpdatesByTrueCurveClients"},supportsApplyEditsWithGlobalIds:{type:"boolean",title:"supportsApplyEditsWithGlobalIds"},subtypeField:{type:"string",title:"subtypeField"},indexes:{type:"array",items:{},title:"indexes"},dateFieldsTimeReference:{type:"object",properties:{timeZone:{type:"string",title:"timeZone"},respectsDaylightSaving:{type:"boolean",title:"respectsDaylightSaving"}},title:"dateFieldsTimeReference"},useStandardizedQueries:{type:"boolean",title:"useStandardizedQueries"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"}}},IEditingInfo:{title:"IEditingInfo",type:"object",properties:{lastEditDate:{description:"date of last edit to the layer",type:"number",title:"lastEditDate"}}},IField:{description:'Contains information about an attribute field.\n\n`IField` can also be imported from the following packages:\n\n```js\nimport { IField } from "@esri/arcgis-rest-feature-layer";\n```',title:"IField",type:"object",properties:{name:{description:"A string defining the field name.",type:"string",title:"name"},type:{$ref:"#/definitions/FieldType",description:"A string defining the field type.",title:"type"},alias:{description:"A string defining the field alias.",type:"string",title:"alias"},domain:{description:"Information for a field with a domain",type:"object",properties:{type:{$ref:"#/definitions/DomainType",description:"A string defining the domain type.",title:"type"},name:{description:"A string defining the field name.",type:"string",title:"name"},range:{description:"A 2 element array defining the range of possible values.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"range"},codedValues:{description:"An array of CodedValues for domains of type codedValue.",type:"array",items:{description:"CodedValue type",type:"object",properties:{name:{description:"User-friendly name for what the code means.",type:"string",title:"name"},code:{description:"The value stored in the feature attribute.",type:["string","number"],title:"code"}},required:["code","name"]},title:"codedValues"},description:{description:"Description of the domain",type:"string",title:"description"},mergePolicy:{description:"Merge policy",type:"string",title:"mergePolicy"},splitPolicy:{description:"Split Policy",type:"string",title:"splitPolicy"}},required:["type"],title:"domain"},editable:{description:"A Boolean defining whether this field is editable.",type:"boolean",title:"editable"},exactMatch:{description:"A Boolean defining whether or not the field is an exact match.",type:"boolean",title:"exactMatch"},length:{description:"A number defining how many characters are allowed in a string. field.",type:"number",title:"length"},nullable:{description:"A Boolean defining whether this field can have a null value.",type:"boolean",title:"nullable"},defaultValue:{description:"The value written in for new records by default.",title:"defaultValue"}},required:["name","type"]},FieldType:{description:"Field type.",title:"FieldType",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string"},DomainType:{description:"Domain types",title:"DomainType",enum:["codedValue","inherited","range"],type:"string"},ITemplate:{description:"Templates describe features that can be created in a layer. They are generally used with feature collections and editable web-based CSV layers.\nTemplates are not used with ArcGIS feature services as these already have templates defined in the service. They are also defined as properties\nof the layer definition when there are no defined types. Otherwise, templates are defined as properties of the types.",title:"ITemplate",type:"object",properties:{description:{description:"A string value containing a detailed description of the template.",title:"description"},drawingTool:{description:"An optional string that can define a client-side drawing tool to be used with this feature. For example, map notes used by the Online Map Viewer use this to represent the viewer's different drawing tools.",enum:["esriFeatureEditToolAutoCompletePolygon","esriFeatureEditToolCircle","esriFeatureEditToolDownArrow","esriFeatureEditToolEllipse","esriFeatureEditToolFreehand","esriFeatureEditToolLeftArrow","esriFeatureEditToolLine","esriFeatureEditToolNone","esriFeatureEditToolPoint","esriFeatureEditToolPolygon","esriFeatureEditToolRectangle","esriFeatureEditToolRightArrow","esriFeatureEditToolText","esriFeatureEditToolTriangle","esriFeatureEditToolUpArrow"],type:"string",title:"drawingTool"},name:{description:"A string containing a user-friendly name for the template.",type:"string",title:"name"},prototype:{description:"A feature object representing a prototypical feature for the template.",$ref:"#/definitions/IFeature",title:"prototype"}}},IFeature:{description:'a spatial entity and its corresponding properties\n\n`IFeature` can also be imported from the following packages:\n\n```js\nimport { IFeature } from "@esri/arcgis-rest-feature-layer";\nimport { IFeature } from "@esri/arcgis-rest-routing";\n```',title:"IFeature",type:"object",properties:{geometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/IGeometry",title:"geometry"},attributes:{type:"object",additionalProperties:{},title:"attributes"},symbol:{$ref:"#/definitions/ISymbol",title:"symbol"}},required:["attributes"]},IGeometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',title:"IGeometry",type:"object",properties:{spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}}},IPopupInfo:{description:"Defines the look and feel of popup windows when a user clicks or queries a feature.",title:"IPopupInfo",type:"object",properties:{description:{description:"A string that appears in the body of the popup window as a description. It is also possible to specify the description as HTML-formatted content.",type:["null","string"],title:"description"},expressionInfos:{description:"List of Arcade expressions added to the pop-up.",type:"array",items:{$ref:"#/definitions/IPopupExpressionInfo"},title:"expressionInfos"},fieldInfos:{description:"Array of fieldInfo information properties. This information is provided by the service layer definition. When the description uses name/value pairs, the order of the array is how the fields display in the editable Map Viewer popup and the resulting popup. It is also possible to specify HTML-formatted content.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},layerOptions:{description:"Additional options that can be defined for the popup layer.",type:"object",properties:{showNoDataRecords:{description:"Indicates whether or not the NoData records should be displayed.",type:"boolean",title:"showNoDataRecords"}},required:["showNoDataRecords"],title:"layerOptions"},mediaInfos:{description:"Array of various mediaInfo to display. Can be of type image, piechart, barchart, columnchart, or linechart. The order given is the order in which is displays.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},popupElements:{description:"An array of popupElement objects that represent an ordered list of popup elements.",type:"array",items:{$ref:"#/definitions/IPopupElement"},title:"popupElements"},relatedRecordsInfo:{description:"Indicates whether to enable related records if they exist on a layer.",$ref:"#/definitions/IRelatedRecordsInfo",title:"relatedRecordsInfo"},showAttachments:{description:"Indicates whether attachments will be loaded for feature layers that have attachments.",type:"boolean",title:"showAttachments"},title:{description:"A string that appears at the top of the popup window as a title.",type:"string",title:"title"}}},IPopupExpressionInfo:{description:"Arcade expression added to the pop-up.",title:"IPopupExpressionInfo",type:"object",properties:{expression:{description:"The Arcade expression.",type:"string",title:"expression"},name:{description:"Unique identifier for the expression.",type:"string",title:"name"},returnType:{description:"Return type of the Arcade expression, can be number or string. Defaults to string value. Number values are assumed to be double. This can be determined by the authoring client by executing the expression using a sample feature(s), although it can be corrected by the user. Knowing the returnType allows the authoring client to present fields in relevant contexts. For example, numeric fields in numeric contexts such as charts.",enum:["number","string"],type:"string",title:"returnType"},title:{description:"Title of the expression.",type:"string",title:"title"}}},IFieldInfo:{description:"Defines how a field in the dataset participates (or does not participate) in a popup window.",title:"IFieldInfo",type:"object",properties:{fieldName:{description:"A string containing the field name as defined by the service. Anywhere that a fieldname is referenced as {field-name} in popupInfo, an Arcade expression can also be referenced as{expression/}`.",title:"fieldName"},format:{description:"A format object used with numerical or date fields to provide more detail about how the value should be displayed in a web map popup window.",$ref:"#/definitions/IFieldFormat",title:"format"},isEditable:{description:"A Boolean determining whether users can edit this field. Not applicable to Arcade expressions.",type:"boolean",title:"isEditable"},label:{description:"A string containing the field alias. This can be overridden by the web map author. Not applicable to Arcade expressions as title is used instead.",type:"string",title:"label"},stringFieldOption:{description:"A string determining what type of input box editors see when editing the field. Applies only to string fields. Not applicable to Arcade expressions.",enum:["richtext","textarea","textbox"],type:"string",title:"stringFieldOption"},tooltip:{description:"A string providing an editing hint for editors of the field. Not applicable to Arcade expressions.",type:"string",title:"tooltip"},visible:{description:"A Boolean determining whether the field is visible in the popup window.",type:"boolean",title:"visible"}}},IFieldFormat:{description:"The format object can be used with numerical or date fields to provide more detail about how values should be displayed in popup windows.",title:"IFieldFormat",type:"object",properties:{dateFormat:{description:"A string used with date fields to specify how the date should appear in popup windows.",enum:["dayShortMonthYear","longDate","longMonthDayYear","longMonthYear","shortDate","shortDateLE","shortDateLELongTime","shortDateLELongTime24","shortDateLEShortTime","shortDateLEShortTime24","shortDateLongTime","shortDateLongTime24","shortDateShortTime","shortDateShortTime24","shortMonthYear","year"],type:"string",title:"dateFormat"},digitSeparator:{description:"A Boolean used with numerical fields. A value of true allows the number to have a digit (or thousands) separator when the value appears in popup windows.\nDepending on the locale, this separator is a decimal point or a comma. A value of false means that no separator will be used.",type:"boolean",title:"digitSeparator"},places:{description:"An integer used with numerical fields to specify the number of supported decimal places that should appear in popup windows. Any places beyond this value are rounded.",type:"number",title:"places"}}},IMediaInfo:{description:"Defines an image or a chart to be displayed in a popup window.",title:"IMediaInfo",type:"object",properties:{caption:{description:"A string caption describing the media.",title:"caption"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled. If the property does not exist, it's equivalent to having a value of 0. Only applicable when type is set to image.",title:"refreshInterval"},title:{description:"A string title for the media.",type:["null","string"],title:"title"},type:{description:"A string defining the type of media.",enum:["barchart","columnchart","image","linechart","piechart"],type:"string",title:"type"},value:{description:"A value object containing information about how the image should be retrieved or how the chart should be constructed.",anyOf:[{$ref:"#/definitions/IMediaInfoValue"},{type:"null"}],title:"value"}}},IMediaInfoValue:{description:"The value object contains information for popup windows about how images should be retrieved or charts constructed.",title:"IMediaInfoValue",type:"object",properties:{fields:{description:"Used with charts. An array of strings, with each string containing the name of a field to display in the chart.",type:"array",items:{type:"string"},title:"fields"},linkURL:{description:"Used with images. A string containing a URL to be launched in a browser when a user clicks the image.",type:"string",title:"linkURL"},normalizeField:{description:"Used with charts. An optional string containing the name of a field. The values of all fields in the chart will be normalized (divided) by the value of this field.",type:"string",title:"normalizeField"},sourceURL:{description:"Used with images. A string containing the URL to the image.",type:"string",title:"sourceURL"},tooltipField:{description:"String value indicating the tooltip for a chart specified from another field. This field is needed when related records are not sued. It is used for showing tooltips from another field in the same layer or related layer/table.",type:"string",title:"tooltipField"}}},IPopupElement:{description:"Popup elements allow users to author popups, using multiple elements such as tabular views, string description, media (charts and images), and attachments of the attributes\nand control the order in which they appear. Specifically, popupElements do the following:\n1) provide the ability to explicitly add a field/ value table in addition to a description,\n2) allow adding multiple description elements, and\n3) allow a user to author and consume elements of a popup in the order of their choosing.",title:"IPopupElement",type:"object",properties:{displayType:{description:"This property applies to elements of type attachments. A string value indicating how to display the attachment.\nPossible values are, preview, and list. If list is specified, attachments show as links.",enum:["list","preview"],type:"string",title:"displayType"},fieldInfos:{description:"This property applies to elements of type fields. It is an array of popupInfo.fieldInfo objects representing a field/value pair displayed as a table within the popupElement.\nIf the fieldInfos property is not provided, the popupElement will display whatever is specified directly in the popupInfo.fieldInfos property.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},mediaInfos:{description:"This property applies to elements of type media. An array of popupInfo.mediaInfo objects representing an image or chart for display.\nIf no mediaInfos property is provided, the popupElement will display whatever is specified in the popupInfo.mediaInfo property.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},text:{description:"This property applies to elements of type text. This is string value indicating the text to be displayed within the popupElement.\nIf no text property is provided, the popupElement will display whatever is specified in the popupInfo.description property.",type:"string",title:"text"},type:{description:"String value indicating which elements to use.",enum:["attachments","fields","media","text"],type:"string",title:"type"}}},IRelatedRecordsInfo:{description:"The sort in the popupInfo for the parent feature. This impacts the sorting order for the returned child records.",title:"IRelatedRecordsInfo",type:"object",properties:{orderByFields:{description:"Array of orderByFields objects indicating the field display order for the related records and whether they should be sorted in ascending 'asc' or descending 'desc' order.",type:"array",items:{$ref:"#/definitions/IOrderByField"},title:"orderByFields"},showRelatedRecords:{description:"Required boolean value indicating whether to display related records. If true, client should let the user navigate to the related records. Defaults to true if the layer participates in a relationship AND the related layer/table has already been added to the map (either as an operationalLayer or as a table).",type:"boolean",title:"showRelatedRecords"}},required:["showRelatedRecords"]},IOrderByField:{description:"Object indicating the field display order for the related records and whether they should be sorted in ascending or descending order.",title:"IOrderByField",type:"object",properties:{field:{description:"The attribute value of the field selected that will drive the sorting of related records.",type:"string",title:"field"},order:{description:"Set the ascending or descending sort order of the returned related records.",enum:["asc","desc"],type:"string",title:"order"}}},'Omit<ITextSymbol,"xoffset"|"yoffset">':{title:'Omit<ITextSymbol,"xoffset"|"yoffset">',type:"object",properties:{type:{type:"string",enum:["esriTS"],title:"type"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},backgroundColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"backgroundColor"},borderLineSize:{type:"number",title:"borderLineSize"},borderLineColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"borderLineColor"},haloSize:{type:"number",title:"haloSize"},haloColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"haloColor"},verticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"verticalAlignment"},horizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"horizontalAlignment"},rightToLeft:{type:"boolean",title:"rightToLeft"},kerning:{type:"boolean",title:"kerning"},font:{$ref:"#/definitions/IFont",title:"font"},text:{type:"string",title:"text"},angle:{type:"number",title:"angle"},style:{type:"string",title:"style"}},required:["type"]},IFont:{title:"IFont",type:"object",properties:{family:{type:"string",title:"family"},size:{type:"number",title:"size"},style:{enum:["italic","normal","oblique"],type:"string",title:"style"},weight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"weight"},decoration:{enum:["line-through","none","underline"],type:"string",title:"decoration"}}},"Intl.NumberFormatOptions":{title:"Intl.NumberFormatOptions",type:"object",properties:{localeMatcher:{type:"string",title:"localeMatcher"},style:{type:"string",title:"style"},currency:{type:"string",title:"currency"},currencySign:{type:"string",title:"currencySign"},useGrouping:{type:"boolean",title:"useGrouping"},minimumIntegerDigits:{type:"number",title:"minimumIntegerDigits"},minimumFractionDigits:{type:"number",title:"minimumFractionDigits"},maximumFractionDigits:{type:"number",title:"maximumFractionDigits"},minimumSignificantDigits:{type:"number",title:"minimumSignificantDigits"},maximumSignificantDigits:{type:"number",title:"maximumSignificantDigits"},compactDisplay:{enum:["long","short"],type:"string",title:"compactDisplay"},notation:{enum:["compact","engineering","scientific","standard"],type:"string",title:"notation"},signDisplay:{enum:["always","auto","exceptZero","never"],type:"string",title:"signDisplay"},unit:{type:"string",title:"unit"},unitDisplay:{enum:["long","narrow","short"],type:"string",title:"unitDisplay"},currencyDisplay:{type:"string",title:"currencyDisplay"}}},"Intl.DateTimeFormatOptions":{title:"Intl.DateTimeFormatOptions",type:"object",properties:{localeMatcher:{enum:["best fit","lookup"],type:"string",title:"localeMatcher"},weekday:{enum:["long","narrow","short"],type:"string",title:"weekday"},era:{enum:["long","narrow","short"],type:"string",title:"era"},year:{enum:["2-digit","numeric"],type:"string",title:"year"},month:{enum:["2-digit","long","narrow","numeric","short"],type:"string",title:"month"},day:{enum:["2-digit","numeric"],type:"string",title:"day"},hour:{enum:["2-digit","numeric"],type:"string",title:"hour"},minute:{enum:["2-digit","numeric"],type:"string",title:"minute"},second:{enum:["2-digit","numeric"],type:"string",title:"second"},timeZoneName:{enum:["long","longGeneric","longOffset","short","shortGeneric","shortOffset"],type:"string",title:"timeZoneName"},formatMatcher:{enum:["basic","best fit"],type:"string",title:"formatMatcher"},hour12:{type:"boolean",title:"hour12"},timeZone:{type:"string",title:"timeZone"},calendar:{type:"string",title:"calendar"},dayPeriod:{enum:["long","narrow","short"],type:"string",title:"dayPeriod"},numberingSystem:{type:"string",title:"numberingSystem"},dateStyle:{enum:["full","long","medium","short"],type:"string",title:"dateStyle"},timeStyle:{enum:["full","long","medium","short"],type:"string",title:"timeStyle"},hourCycle:{enum:["h11","h12","h23","h24"],type:"string",title:"hourCycle"}}},ISimpleFillSymbol:{title:"ISimpleFillSymbol",type:"object",properties:{type:{type:"string",enum:["esriSFS"],title:"type"},style:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"}},required:["type"]},DateTimeFormatOptions:{description:"Defines how the DateTime axis data should be formatted.",title:"DateTimeFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "date". It can help us to differentiate date-time axis from other types of axes viz., numeric (value) axis and category axis.',type:"string",enum:["date"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.DateTimeFormatOptions",description:"Represent the JS native [Intl.DateTimeFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormatt), which is based on [CLDR](http://cldr.unicode.org/translation/date-time-1/date-time-patterns) specifications.",title:"intlOptions"},formatPerDateTimeUnit:{description:"Represents how to format specific date and time units when displayed on the axis, independently from the `intlOptions`.",$ref:"#/definitions/WebChartDateTimeUnitFormatOptions",title:"formatPerDateTimeUnit"}},required:["intlOptions","type"]},IPoint:{description:'A simple point geometry, with spatial reference defined.\n\n`IPoint` can also be imported from the following packages:\n\n```js\nimport { IPoint } from "@esri/arcgis-rest-routing";\nimport { IPoint } from "@esri/arcgis-rest-geocoding";\n```',title:"IPoint",type:"object",properties:{x:{type:"number",title:"x"},y:{type:"number",title:"y"},z:{type:"number",title:"z"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["x","y"]},IPolyline:{title:"IPolyline",type:"object",properties:{paths:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"paths"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["paths"]},Position:{title:"Position",anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4}]},IPolygon:{title:"IPolygon",type:"object",properties:{rings:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"rings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["rings"]},IPolygonWithCurves:{title:"IPolygonWithCurves",type:"object",properties:{curveRings:{type:"array",items:{type:"array",items:{anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/IArc"},{$ref:"#/definitions/IBezierCurve"},{$ref:"#/definitions/ICircularArc"},{$ref:"#/definitions/IOldCircularArc"}]}},title:"curveRings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["curveRings"]},IArc:{description:"an arc can be represented as a JSON curve object",title:"IArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:7,maxItems:7,title:"a"}},required:["a"]},IBezierCurve:{description:"a bezier curve can be represented as a JSON curve object",title:"IBezierCurve",type:"object",properties:{b:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:3,maxItems:3,title:"b"}},required:["b"]},ICircularArc:{description:"a circular arc can be represented as a JSON curve object",title:"ICircularArc",type:"object",properties:{c:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:2,maxItems:2,title:"c"}},required:["c"]},IOldCircularArc:{title:"IOldCircularArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"a"}},required:["a"]},IEnvelope:{description:"An envelope is a rectangle defined by a range of values for each coordinate and attribute.",title:"IEnvelope",type:"object",properties:{xmin:{type:"number",title:"xmin"},xmax:{type:"number",title:"xmax"},ymin:{type:"number",title:"ymin"},ymax:{type:"number",title:"ymax"},zmin:{type:"number",title:"zmin"},zmax:{type:"number",title:"zmax"},mmin:{type:"number",title:"mmin"},mmax:{type:"number",title:"mmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISimpleMarkerSymbol:{title:"ISimpleMarkerSymbol",type:"object",properties:{type:{type:"string",enum:["esriSMS"],title:"type"},style:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},size:{type:"number",title:"size"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"}},required:["type"]}},$ref:"#/definitions/WebChart"};var uri_all$1={exports:{}};(function(module,exports){(function(global,factory){factory(exports)})(commonjsGlobal$2,(function(exports){function merge(){for(var _len=arguments.length,sets=Array(_len),_key=0;_key<_len;_key++){sets[_key]=arguments[_key]}if(sets.length>1){sets[0]=sets[0].slice(0,-1);var xl=sets.length-1;for(var x=1;x<xl;++x){sets[x]=sets[x].slice(1,-1)}sets[xl]=sets[xl].slice(1);return sets.join("")}else{return sets[0]}}function subexp(str){return"(?:"+str+")"}function typeOf(o){return o===undefined?"undefined":o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(str){return str.toUpperCase()}function toArray(obj){return obj!==undefined&&obj!==null?obj instanceof Array?obj:typeof obj.length!=="number"||obj.split||obj.setInterval||obj.call?[obj]:Array.prototype.slice.call(obj):[]}function assign(target,source){var obj=target;if(source){for(var key in source){obj[key]=source[key]}}return obj}function buildExps(isIRI){var ALPHA$$="[A-Za-z]",DIGIT$$="[0-9]",HEXDIG$$=merge(DIGIT$$,"[A-Fa-f]"),PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$)),GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=merge(GEN_DELIMS$$,SUB_DELIMS$$),UCSCHAR$$=isIRI?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",IPRIVATE$$=isIRI?"[\\uE000-\\uF8FF]":"[]",UNRESERVED$$=merge(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]",UCSCHAR$$);subexp(ALPHA$$+merge(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*");subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*");var DEC_OCTET_RELAXED$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("0?[1-9]"+DIGIT$$)+"|0?0?"+DIGIT$$),IPV4ADDRESS$=subexp(DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$),H16$=subexp(HEXDIG$$+"{1,4}"),LS32$=subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),IPV6ADDRESS1$=subexp(subexp(H16$+"\\:")+"{6}"+LS32$),IPV6ADDRESS2$=subexp("\\:\\:"+subexp(H16$+"\\:")+"{5}"+LS32$),IPV6ADDRESS3$=subexp(subexp(H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{4}"+LS32$),IPV6ADDRESS4$=subexp(subexp(subexp(H16$+"\\:")+"{0,1}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{3}"+LS32$),IPV6ADDRESS5$=subexp(subexp(subexp(H16$+"\\:")+"{0,2}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{2}"+LS32$),IPV6ADDRESS6$=subexp(subexp(subexp(H16$+"\\:")+"{0,3}"+H16$)+"?\\:\\:"+H16$+"\\:"+LS32$),IPV6ADDRESS7$=subexp(subexp(subexp(H16$+"\\:")+"{0,4}"+H16$)+"?\\:\\:"+LS32$),IPV6ADDRESS8$=subexp(subexp(subexp(H16$+"\\:")+"{0,5}"+H16$)+"?\\:\\:"+H16$),IPV6ADDRESS9$=subexp(subexp(subexp(H16$+"\\:")+"{0,6}"+H16$)+"?\\:\\:"),IPV6ADDRESS$=subexp([IPV6ADDRESS1$,IPV6ADDRESS2$,IPV6ADDRESS3$,IPV6ADDRESS4$,IPV6ADDRESS5$,IPV6ADDRESS6$,IPV6ADDRESS7$,IPV6ADDRESS8$,IPV6ADDRESS9$].join("|")),ZONEID$=subexp(subexp(UNRESERVED$$+"|"+PCT_ENCODED$)+"+");subexp("[vV]"+HEXDIG$$+"+\\."+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+");subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$))+"*");var PCHAR$=subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]"));subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+");subexp(subexp(PCHAR$+"|"+merge("[\\/\\?]",IPRIVATE$$))+"*");return{NOT_SCHEME:new RegExp(merge("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]",IPRIVATE$$),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED:new RegExp(UNRESERVED$$,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),PCT_ENCODED:new RegExp(PCT_ENCODED$,"g"),IPV4ADDRESS:new RegExp("^("+IPV4ADDRESS$+")$"),IPV6ADDRESS:new RegExp("^\\[?("+IPV6ADDRESS$+")"+subexp(subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+"("+ZONEID$+")")+"?\\]?$")}}var URI_PROTOCOL=buildExps(false);var IRI_PROTOCOL=buildExps(true);var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter="-";var regexPunycode=/^xn--/;var regexNonASCII=/[^\0-\x7E]/;var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g;var errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"};var baseMinusTMin=base-tMin;var floor=Math.floor;var stringFromCharCode=String.fromCharCode;function error$1(type){throw new RangeError(errors[type])}function map(array,fn){var result=[];var length=array.length;while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){var extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}var ucs2encode=function ucs2encode(array){return String.fromCodePoint.apply(String,toConsumableArray(array))};var basicToDigit=function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base};var digitToBasic=function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)};var adapt=function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))};var decode=function decode(input){var output=[];var inputLength=input.length;var i=0;var n=initialN;var bias=initialBias;var basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(var j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error$1("not-basic")}output.push(input.charCodeAt(j))}for(var index=basic>0?basic+1:0;index<inputLength;){var oldi=i;for(var w=1,k=base;;k+=base){if(index>=inputLength){error$1("invalid-input")}var digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error$1("overflow")}i+=digit*w;var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}var baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error$1("overflow")}w*=baseMinusT}var out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error$1("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return String.fromCodePoint.apply(String,output)};var encode=function encode(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _currentValue2=_step.value;if(_currentValue2<128){output.push(stringFromCharCode(_currentValue2))}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){var m=maxInt;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=input[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var currentValue=_step2.value;if(currentValue>=n&&currentValue<m){m=currentValue}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error$1("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=input[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _currentValue=_step3.value;if(_currentValue<n&&++delta>maxInt){error$1("overflow")}if(_currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}++delta;++n}return output.join("")};var toUnicode=function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))};var toASCII=function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))};var punycode={version:"2.1.0",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode};var SCHEMES={};function pctEncChar(chr){var c=chr.charCodeAt(0);var e=void 0;if(c<16)e="%0"+c.toString(16).toUpperCase();else if(c<128)e="%"+c.toString(16).toUpperCase();else if(c<2048)e="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();else e="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();return e}function pctDecChars(str){var newStr="";var i=0;var il=str.length;while(i<il){var c=parseInt(str.substr(i+1,2),16);if(c<128){newStr+=String.fromCharCode(c);i+=3}else if(c>=194&&c<224){if(il-i>=6){var c2=parseInt(str.substr(i+4,2),16);newStr+=String.fromCharCode((c&31)<<6|c2&63)}else{newStr+=str.substr(i,6)}i+=6}else if(c>=224){if(il-i>=9){var _c=parseInt(str.substr(i+4,2),16);var c3=parseInt(str.substr(i+7,2),16);newStr+=String.fromCharCode((c&15)<<12|(_c&63)<<6|c3&63)}else{newStr+=str.substr(i,9)}i+=9}else{newStr+=str.substr(i,3);i+=3}}return newStr}function _normalizeComponentEncoding(components,protocol){function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(protocol.UNRESERVED)?str:decStr}if(components.scheme)components.scheme=String(components.scheme).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME,"");if(components.userinfo!==undefined)components.userinfo=String(components.userinfo).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_USERINFO,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.host!==undefined)components.host=String(components.host).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.path!==undefined)components.path=String(components.path).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(components.scheme?protocol.NOT_PATH:protocol.NOT_PATH_NOSCHEME,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.query!==undefined)components.query=String(components.query).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_QUERY,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.fragment!==undefined)components.fragment=String(components.fragment).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_FRAGMENT,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);return components}function _stripLeadingZeros(str){return str.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(host,protocol){var matches=host.match(protocol.IPV4ADDRESS)||[];var _matches=slicedToArray(matches,2),address=_matches[1];if(address){return address.split(".").map(_stripLeadingZeros).join(".")}else{return host}}function _normalizeIPv6(host,protocol){var matches=host.match(protocol.IPV6ADDRESS)||[];var _matches2=slicedToArray(matches,3),address=_matches2[1],zone=_matches2[2];if(address){var _address$toLowerCase$=address.toLowerCase().split("::").reverse(),_address$toLowerCase$2=slicedToArray(_address$toLowerCase$,2),last=_address$toLowerCase$2[0],first=_address$toLowerCase$2[1];var firstFields=first?first.split(":").map(_stripLeadingZeros):[];var lastFields=last.split(":").map(_stripLeadingZeros);var isLastFieldIPv4Address=protocol.IPV4ADDRESS.test(lastFields[lastFields.length-1]);var fieldCount=isLastFieldIPv4Address?7:8;var lastFieldsStart=lastFields.length-fieldCount;var fields=Array(fieldCount);for(var x=0;x<fieldCount;++x){fields[x]=firstFields[x]||lastFields[lastFieldsStart+x]||""}if(isLastFieldIPv4Address){fields[fieldCount-1]=_normalizeIPv4(fields[fieldCount-1],protocol)}var allZeroFields=fields.reduce((function(acc,field,index){if(!field||field==="0"){var lastLongest=acc[acc.length-1];if(lastLongest&&lastLongest.index+lastLongest.length===index){lastLongest.length++}else{acc.push({index,length:1})}}return acc}),[]);var longestZeroFields=allZeroFields.sort((function(a,b){return b.length-a.length}))[0];var newHost=void 0;if(longestZeroFields&&longestZeroFields.length>1){var newFirst=fields.slice(0,longestZeroFields.index);var newLast=fields.slice(longestZeroFields.index+longestZeroFields.length);newHost=newFirst.join(":")+"::"+newLast.join(":")}else{newHost=fields.join(":")}if(zone){newHost+="%"+zone}return newHost}else{return host}}var URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var NO_MATCH_IS_UNDEFINED="".match(/(){0}/)[1]===undefined;function parse(uriString){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var components={};var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;if(options.reference==="suffix")uriString=(options.scheme?options.scheme+":":"")+"//"+uriString;var matches=uriString.match(URI_PARSE);if(matches){if(NO_MATCH_IS_UNDEFINED){components.scheme=matches[1];components.userinfo=matches[3];components.host=matches[4];components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=matches[7];components.fragment=matches[8];if(isNaN(components.port)){components.port=matches[5]}}else{components.scheme=matches[1]||undefined;components.userinfo=uriString.indexOf("@")!==-1?matches[3]:undefined;components.host=uriString.indexOf("//")!==-1?matches[4]:undefined;components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=uriString.indexOf("?")!==-1?matches[7]:undefined;components.fragment=uriString.indexOf("#")!==-1?matches[8]:undefined;if(isNaN(components.port)){components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:undefined}}if(components.host){components.host=_normalizeIPv6(_normalizeIPv4(components.host,protocol),protocol)}if(components.scheme===undefined&&components.userinfo===undefined&&components.host===undefined&&components.port===undefined&&!components.path&&components.query===undefined){components.reference="same-document"}else if(components.scheme===undefined){components.reference="relative"}else if(components.fragment===undefined){components.reference="absolute"}else{components.reference="uri"}if(options.reference&&options.reference!=="suffix"&&options.reference!==components.reference){components.error=components.error||"URI is not a "+options.reference+" reference."}var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(!options.unicodeSupport&&(!schemeHandler||!schemeHandler.unicodeSupport)){if(components.host&&(options.domainHost||schemeHandler&&schemeHandler.domainHost)){try{components.host=punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){components.error=components.error||"Host's domain name can not be converted to ASCII via punycode: "+e}}_normalizeComponentEncoding(components,URI_PROTOCOL)}else{_normalizeComponentEncoding(components,protocol)}if(schemeHandler&&schemeHandler.parse){schemeHandler.parse(components,options)}}else{components.error=components.error||"URI can not be parsed."}return components}function _recomposeAuthority(components,options){var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];if(components.userinfo!==undefined){uriTokens.push(components.userinfo);uriTokens.push("@")}if(components.host!==undefined){uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host),protocol),protocol).replace(protocol.IPV6ADDRESS,(function(_,$1,$2){return"["+$1+($2?"%25"+$2:"")+"]"})))}if(typeof components.port==="number"||typeof components.port==="string"){uriTokens.push(":");uriTokens.push(String(components.port))}return uriTokens.length?uriTokens.join(""):undefined}var RDS1=/^\.\.?\//;var RDS2=/^\/\.(\/|$)/;var RDS3=/^\/\.\.(\/|$)/;var RDS5=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(input){var output=[];while(input.length){if(input.match(RDS1)){input=input.replace(RDS1,"")}else if(input.match(RDS2)){input=input.replace(RDS2,"/")}else if(input.match(RDS3)){input=input.replace(RDS3,"/");output.pop()}else if(input==="."||input===".."){input=""}else{var im=input.match(RDS5);if(im){var s=im[0];input=input.slice(s.length);output.push(s)}else{throw new Error("Unexpected dot segment condition")}}}return output.join("")}function serialize(components){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var protocol=options.iri?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(schemeHandler&&schemeHandler.serialize)schemeHandler.serialize(components,options);if(components.host){if(protocol.IPV6ADDRESS.test(components.host));else if(options.domainHost||schemeHandler&&schemeHandler.domainHost){try{components.host=!options.iri?punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase()):punycode.toUnicode(components.host)}catch(e){components.error=components.error||"Host's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e}}}_normalizeComponentEncoding(components,protocol);if(options.reference!=="suffix"&&components.scheme){uriTokens.push(components.scheme);uriTokens.push(":")}var authority=_recomposeAuthority(components,options);if(authority!==undefined){if(options.reference!=="suffix"){uriTokens.push("//")}uriTokens.push(authority);if(components.path&&components.path.charAt(0)!=="/"){uriTokens.push("/")}}if(components.path!==undefined){var s=components.path;if(!options.absolutePath&&(!schemeHandler||!schemeHandler.absolutePath)){s=removeDotSegments(s)}if(authority===undefined){s=s.replace(/^\/\//,"/%2F")}uriTokens.push(s)}if(components.query!==undefined){uriTokens.push("?");uriTokens.push(components.query)}if(components.fragment!==undefined){uriTokens.push("#");uriTokens.push(components.fragment)}return uriTokens.join("")}function resolveComponents(base,relative){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var skipNormalization=arguments[3];var target={};if(!skipNormalization){base=parse(serialize(base,options),options);relative=parse(serialize(relative,options),options)}options=options||{};if(!options.tolerant&&relative.scheme){target.scheme=relative.scheme;target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query}else{if(relative.userinfo!==undefined||relative.host!==undefined||relative.port!==undefined){target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query}else{if(!relative.path){target.path=base.path;if(relative.query!==undefined){target.query=relative.query}else{target.query=base.query}}else{if(relative.path.charAt(0)==="/"){target.path=removeDotSegments(relative.path)}else{if((base.userinfo!==undefined||base.host!==undefined||base.port!==undefined)&&!base.path){target.path="/"+relative.path}else if(!base.path){target.path=relative.path}else{target.path=base.path.slice(0,base.path.lastIndexOf("/")+1)+relative.path}target.path=removeDotSegments(target.path)}target.query=relative.query}target.userinfo=base.userinfo;target.host=base.host;target.port=base.port}target.scheme=base.scheme}target.fragment=relative.fragment;return target}function resolve(baseURI,relativeURI,options){var schemelessOptions=assign({scheme:"null"},options);return serialize(resolveComponents(parse(baseURI,schemelessOptions),parse(relativeURI,schemelessOptions),schemelessOptions,true),schemelessOptions)}function normalize(uri,options){if(typeof uri==="string"){uri=serialize(parse(uri,options),options)}else if(typeOf(uri)==="object"){uri=parse(serialize(uri,options),options)}return uri}function equal(uriA,uriB,options){if(typeof uriA==="string"){uriA=serialize(parse(uriA,options),options)}else if(typeOf(uriA)==="object"){uriA=serialize(uriA,options)}if(typeof uriB==="string"){uriB=serialize(parse(uriB,options),options)}else if(typeOf(uriB)==="object"){uriB=serialize(uriB,options)}return uriA===uriB}function escapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.ESCAPE:IRI_PROTOCOL.ESCAPE,pctEncChar)}function unescapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.PCT_ENCODED:IRI_PROTOCOL.PCT_ENCODED,pctDecChars)}var handler={scheme:"http",domainHost:true,parse:function parse(components,options){if(!components.host){components.error=components.error||"HTTP URIs must have a host."}return components},serialize:function serialize(components,options){var secure=String(components.scheme).toLowerCase()==="https";if(components.port===(secure?443:80)||components.port===""){components.port=undefined}if(!components.path){components.path="/"}return components}};var handler$1={scheme:"https",domainHost:handler.domainHost,parse:handler.parse,serialize:handler.serialize};function isSecure(wsComponents){return typeof wsComponents.secure==="boolean"?wsComponents.secure:String(wsComponents.scheme).toLowerCase()==="wss"}var handler$2={scheme:"ws",domainHost:true,parse:function parse(components,options){var wsComponents=components;wsComponents.secure=isSecure(wsComponents);wsComponents.resourceName=(wsComponents.path||"/")+(wsComponents.query?"?"+wsComponents.query:"");wsComponents.path=undefined;wsComponents.query=undefined;return wsComponents},serialize:function serialize(wsComponents,options){if(wsComponents.port===(isSecure(wsComponents)?443:80)||wsComponents.port===""){wsComponents.port=undefined}if(typeof wsComponents.secure==="boolean"){wsComponents.scheme=wsComponents.secure?"wss":"ws";wsComponents.secure=undefined}if(wsComponents.resourceName){var _wsComponents$resourc=wsComponents.resourceName.split("?"),_wsComponents$resourc2=slicedToArray(_wsComponents$resourc,2),path=_wsComponents$resourc2[0],query=_wsComponents$resourc2[1];wsComponents.path=path&&path!=="/"?path:undefined;wsComponents.query=query;wsComponents.resourceName=undefined}wsComponents.fragment=undefined;return wsComponents}};var handler$3={scheme:"wss",domainHost:handler$2.domainHost,parse:handler$2.parse,serialize:handler$2.serialize};var O={};var UNRESERVED$$="[A-Za-z0-9\\-\\.\\_\\~"+"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF"+"]";var HEXDIG$$="[0-9A-Fa-f]";var PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$));var ATEXT$$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var QTEXT$$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var VCHAR$$=merge(QTEXT$$,'[\\"\\\\]');var SOME_DELIMS$$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var UNRESERVED=new RegExp(UNRESERVED$$,"g");var PCT_ENCODED=new RegExp(PCT_ENCODED$,"g");var NOT_LOCAL_PART=new RegExp(merge("[^]",ATEXT$$,"[\\.]",'[\\"]',VCHAR$$),"g");var NOT_HFNAME=new RegExp(merge("[^]",UNRESERVED$$,SOME_DELIMS$$),"g");var NOT_HFVALUE=NOT_HFNAME;function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(UNRESERVED)?str:decStr}var handler$4={scheme:"mailto",parse:function parse$$1(components,options){var mailtoComponents=components;var to=mailtoComponents.to=mailtoComponents.path?mailtoComponents.path.split(","):[];mailtoComponents.path=undefined;if(mailtoComponents.query){var unknownHeaders=false;var headers={};var hfields=mailtoComponents.query.split("&");for(var x=0,xl=hfields.length;x<xl;++x){var hfield=hfields[x].split("=");switch(hfield[0]){case"to":var toAddrs=hfield[1].split(",");for(var _x=0,_xl=toAddrs.length;_x<_xl;++_x){to.push(toAddrs[_x])}break;case"subject":mailtoComponents.subject=unescapeComponent(hfield[1],options);break;case"body":mailtoComponents.body=unescapeComponent(hfield[1],options);break;default:unknownHeaders=true;headers[unescapeComponent(hfield[0],options)]=unescapeComponent(hfield[1],options);break}}if(unknownHeaders)mailtoComponents.headers=headers}mailtoComponents.query=undefined;for(var _x2=0,_xl2=to.length;_x2<_xl2;++_x2){var addr=to[_x2].split("@");addr[0]=unescapeComponent(addr[0]);if(!options.unicodeSupport){try{addr[1]=punycode.toASCII(unescapeComponent(addr[1],options).toLowerCase())}catch(e){mailtoComponents.error=mailtoComponents.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}}else{addr[1]=unescapeComponent(addr[1],options).toLowerCase()}to[_x2]=addr.join("@")}return mailtoComponents},serialize:function serialize$$1(mailtoComponents,options){var components=mailtoComponents;var to=toArray(mailtoComponents.to);if(to){for(var x=0,xl=to.length;x<xl;++x){var toAddr=String(to[x]);var atIdx=toAddr.lastIndexOf("@");var localPart=toAddr.slice(0,atIdx).replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_LOCAL_PART,pctEncChar);var domain=toAddr.slice(atIdx+1);try{domain=!options.iri?punycode.toASCII(unescapeComponent(domain,options).toLowerCase()):punycode.toUnicode(domain)}catch(e){components.error=components.error||"Email address's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e}to[x]=localPart+"@"+domain}components.path=to.join(",")}var headers=mailtoComponents.headers=mailtoComponents.headers||{};if(mailtoComponents.subject)headers["subject"]=mailtoComponents.subject;if(mailtoComponents.body)headers["body"]=mailtoComponents.body;var fields=[];for(var name in headers){if(headers[name]!==O[name]){fields.push(name.replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFNAME,pctEncChar)+"="+headers[name].replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFVALUE,pctEncChar))}}if(fields.length){components.query=fields.join("&")}return components}};var URN_PARSE=/^([^\:]+)\:(.*)/;var handler$5={scheme:"urn",parse:function parse$$1(components,options){var matches=components.path&&components.path.match(URN_PARSE);var urnComponents=components;if(matches){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=matches[1].toLowerCase();var nss=matches[2];var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];urnComponents.nid=nid;urnComponents.nss=nss;urnComponents.path=undefined;if(schemeHandler){urnComponents=schemeHandler.parse(urnComponents,options)}}else{urnComponents.error=urnComponents.error||"URN can not be parsed."}return urnComponents},serialize:function serialize$$1(urnComponents,options){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=urnComponents.nid;var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];if(schemeHandler){urnComponents=schemeHandler.serialize(urnComponents,options)}var uriComponents=urnComponents;var nss=urnComponents.nss;uriComponents.path=(nid||options.nid)+":"+nss;return uriComponents}};var UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;var handler$6={scheme:"urn:uuid",parse:function parse(urnComponents,options){var uuidComponents=urnComponents;uuidComponents.uuid=uuidComponents.nss;uuidComponents.nss=undefined;if(!options.tolerant&&(!uuidComponents.uuid||!uuidComponents.uuid.match(UUID))){uuidComponents.error=uuidComponents.error||"UUID is not valid."}return uuidComponents},serialize:function serialize(uuidComponents,options){var urnComponents=uuidComponents;urnComponents.nss=(uuidComponents.uuid||"").toLowerCase();return urnComponents}};SCHEMES[handler.scheme]=handler;SCHEMES[handler$1.scheme]=handler$1;SCHEMES[handler$2.scheme]=handler$2;SCHEMES[handler$3.scheme]=handler$3;SCHEMES[handler$4.scheme]=handler$4;SCHEMES[handler$5.scheme]=handler$5;SCHEMES[handler$6.scheme]=handler$6;exports.SCHEMES=SCHEMES;exports.pctEncChar=pctEncChar;exports.pctDecChars=pctDecChars;exports.parse=parse;exports.removeDotSegments=removeDotSegments;exports.serialize=serialize;exports.resolveComponents=resolveComponents;exports.resolve=resolve;exports.normalize=normalize;exports.equal=equal;exports.escapeComponent=escapeComponent;exports.unescapeComponent=unescapeComponent;Object.defineProperty(exports,"__esModule",{value:true})}))})(uri_all$1,uri_all$1.exports);var fastDeepEqual$1=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return false;var length,i,keys;if(Array.isArray(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=Object.keys(a);length=keys.length;if(length!==Object.keys(b).length)return false;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return false}return true}return a!==a&&b!==b};var ucs2length$1$1=function ucs2length(str){var length=0,len=str.length,pos=0,value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=55296&&value<=56319&&pos<len){value=str.charCodeAt(pos);if((value&64512)==56320)pos++}}return length};var util$5$1={copy:copy$1,checkDataType:checkDataType$1,checkDataTypes:checkDataTypes$1,coerceToTypes:coerceToTypes$1,toHash:toHash$1$1,getProperty:getProperty$1,escapeQuotes:escapeQuotes$1,equal:fastDeepEqual$1,ucs2length:ucs2length$1$1,varOccurences:varOccurences$1,varReplace:varReplace$1,schemaHasRules:schemaHasRules$1,schemaHasRulesExcept:schemaHasRulesExcept$1,schemaUnknownRules:schemaUnknownRules$1,toQuotedString:toQuotedString$1,getPathExpr:getPathExpr$1,getPath:getPath$1,getData:getData$2,unescapeFragment:unescapeFragment$1,unescapeJsonPointer:unescapeJsonPointer$1,escapeFragment:escapeFragment$1,escapeJsonPointer:escapeJsonPointer$1};function copy$1(o,to){to=to||{};for(var key in o)to[key]=o[key];return to}function checkDataType$1(dataType,data,strictNumbers,negate){var EQUAL=negate?" !== ":" === ",AND=negate?" || ":" && ",OK=negate?"!":"",NOT=negate?"":"!";switch(dataType){case"null":return data+EQUAL+"null";case"array":return OK+"Array.isArray("+data+")";case"object":return"("+OK+data+AND+"typeof "+data+EQUAL+'"object"'+AND+NOT+"Array.isArray("+data+"))";case"integer":return"(typeof "+data+EQUAL+'"number"'+AND+NOT+"("+data+" % 1)"+AND+data+EQUAL+data+(strictNumbers?AND+OK+"isFinite("+data+")":"")+")";case"number":return"(typeof "+data+EQUAL+'"'+dataType+'"'+(strictNumbers?AND+OK+"isFinite("+data+")":"")+")";default:return"typeof "+data+EQUAL+'"'+dataType+'"'}}function checkDataTypes$1(dataTypes,data,strictNumbers){switch(dataTypes.length){case 1:return checkDataType$1(dataTypes[0],data,strictNumbers,true);default:var code="";var types=toHash$1$1(dataTypes);if(types.array&&types.object){code=types.null?"(":"(!"+data+" || ";code+="typeof "+data+' !== "object")';delete types.null;delete types.array;delete types.object}if(types.number)delete types.integer;for(var t in types)code+=(code?" && ":"")+checkDataType$1(t,data,strictNumbers,true);return code}}var COERCE_TO_TYPES$1=toHash$1$1(["string","number","integer","boolean","null"]);function coerceToTypes$1(optionCoerceTypes,dataTypes){if(Array.isArray(dataTypes)){var types=[];for(var i=0;i<dataTypes.length;i++){var t=dataTypes[i];if(COERCE_TO_TYPES$1[t])types[types.length]=t;else if(optionCoerceTypes==="array"&&t==="array")types[types.length]=t}if(types.length)return types}else if(COERCE_TO_TYPES$1[dataTypes]){return[dataTypes]}else if(optionCoerceTypes==="array"&&dataTypes==="array"){return["array"]}}function toHash$1$1(arr){var hash={};for(var i=0;i<arr.length;i++)hash[arr[i]]=true;return hash}var IDENTIFIER$1$1=/^[a-z$_][a-z$_0-9]*$/i;var SINGLE_QUOTE$1=/'|\\/g;function getProperty$1(key){return typeof key=="number"?"["+key+"]":IDENTIFIER$1$1.test(key)?"."+key:"['"+escapeQuotes$1(key)+"']"}function escapeQuotes$1(str){return str.replace(SINGLE_QUOTE$1,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function varOccurences$1(str,dataVar){dataVar+="[^0-9]";var matches=str.match(new RegExp(dataVar,"g"));return matches?matches.length:0}function varReplace$1(str,dataVar,expr){dataVar+="([^0-9])";expr=expr.replace(/\$/g,"$$$$");return str.replace(new RegExp(dataVar,"g"),expr+"$1")}function schemaHasRules$1(schema,rules){if(typeof schema=="boolean")return!schema;for(var key in schema)if(rules[key])return true}function schemaHasRulesExcept$1(schema,rules,exceptKeyword){if(typeof schema=="boolean")return!schema&&exceptKeyword!="not";for(var key in schema)if(key!=exceptKeyword&&rules[key])return true}function schemaUnknownRules$1(schema,rules){if(typeof schema=="boolean")return;for(var key in schema)if(!rules[key])return key}function toQuotedString$1(str){return"'"+escapeQuotes$1(str)+"'"}function getPathExpr$1(currentPath,expr,jsonPointers,isNumber){var path=jsonPointers?"'/' + "+expr+(isNumber?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):isNumber?"'[' + "+expr+" + ']'":"'[\\'' + "+expr+" + '\\']'";return joinPaths$1(currentPath,path)}function getPath$1(currentPath,prop,jsonPointers){var path=jsonPointers?toQuotedString$1("/"+escapeJsonPointer$1(prop)):toQuotedString$1(getProperty$1(prop));return joinPaths$1(currentPath,path)}var JSON_POINTER$1$1=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER$1$1=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData$2($data,lvl,paths){var up,jsonPointer,data,matches;if($data==="")return"rootData";if($data[0]=="/"){if(!JSON_POINTER$1$1.test($data))throw new Error("Invalid JSON-pointer: "+$data);jsonPointer=$data;data="rootData"}else{matches=$data.match(RELATIVE_JSON_POINTER$1$1);if(!matches)throw new Error("Invalid JSON-pointer: "+$data);up=+matches[1];jsonPointer=matches[2];if(jsonPointer=="#"){if(up>=lvl)throw new Error("Cannot access property/index "+up+" levels up, current level is "+lvl);return paths[lvl-up]}if(up>lvl)throw new Error("Cannot access data "+up+" levels up, current level is "+lvl);data="data"+(lvl-up||"");if(!jsonPointer)return data}var expr=data;var segments=jsonPointer.split("/");for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment){data+=getProperty$1(unescapeJsonPointer$1(segment));expr+=" && "+data}}return expr}function joinPaths$1(a,b){if(a=='""')return b;return(a+" + "+b).replace(/([^\\])' \+ '/g,"$1")}function unescapeFragment$1(str){return unescapeJsonPointer$1(decodeURIComponent(str))}function escapeFragment$1(str){return encodeURIComponent(escapeJsonPointer$1(str))}function escapeJsonPointer$1(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer$1(str){return str.replace(/~1/g,"/").replace(/~0/g,"~")}var util$4$1=util$5$1;var schema_obj$1=SchemaObject$2$1;function SchemaObject$2$1(obj){util$4$1.copy(obj,this)}var jsonSchemaTraverse$1={exports:{}};var traverse$1$1=jsonSchemaTraverse$1.exports=function(schema,opts,cb){if(typeof opts=="function"){cb=opts;opts={}}cb=opts.cb||cb;var pre=typeof cb=="function"?cb:cb.pre||function(){};var post=cb.post||function(){};_traverse$1(opts,pre,post,schema,"",schema)};traverse$1$1.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true};traverse$1$1.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse$1$1.propsKeywords={definitions:true,properties:true,patternProperties:true,dependencies:true};traverse$1$1.skipKeywords={default:true,enum:true,const:true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse$1(opts,pre,post,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&typeof schema=="object"&&!Array.isArray(schema)){pre(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if(Array.isArray(sch)){if(key in traverse$1$1.arrayKeywords){for(var i=0;i<sch.length;i++)_traverse$1(opts,pre,post,sch[i],jsonPtr+"/"+key+"/"+i,rootSchema,jsonPtr,key,schema,i)}}else if(key in traverse$1$1.propsKeywords){if(sch&&typeof sch=="object"){for(var prop in sch)_traverse$1(opts,pre,post,sch[prop],jsonPtr+"/"+key+"/"+escapeJsonPtr$1(prop),rootSchema,jsonPtr,key,schema,prop)}}else if(key in traverse$1$1.keywords||opts.allKeys&&!(key in traverse$1$1.skipKeywords)){_traverse$1(opts,pre,post,sch,jsonPtr+"/"+key,rootSchema,jsonPtr,key,schema)}}post(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex)}}function escapeJsonPtr$1(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}var URI$1$1=uri_all$1.exports,equal$1$1=fastDeepEqual$1,util$3$1=util$5$1,SchemaObject$1$1=schema_obj$1,traverse$2=jsonSchemaTraverse$1.exports;var resolve_1$1=resolve$3$1;resolve$3$1.normalizeId=normalizeId$1;resolve$3$1.fullPath=getFullPath$1;resolve$3$1.url=resolveUrl$1;resolve$3$1.ids=resolveIds$1;resolve$3$1.inlineRef=inlineRef$1;resolve$3$1.schema=resolveSchema$1;function resolve$3$1(compile,root,ref){var refVal=this._refs[ref];if(typeof refVal=="string"){if(this._refs[refVal])refVal=this._refs[refVal];else return resolve$3$1.call(this,compile,root,refVal)}refVal=refVal||this._schemas[ref];if(refVal instanceof SchemaObject$1$1){return inlineRef$1(refVal.schema,this._opts.inlineRefs)?refVal.schema:refVal.validate||this._compile(refVal)}var res=resolveSchema$1.call(this,root,ref);var schema,v,baseId;if(res){schema=res.schema;root=res.root;baseId=res.baseId}if(schema instanceof SchemaObject$1$1){v=schema.validate||compile.call(this,schema.schema,root,undefined,baseId)}else if(schema!==undefined){v=inlineRef$1(schema,this._opts.inlineRefs)?schema:compile.call(this,schema,root,undefined,baseId)}return v}function resolveSchema$1(root,ref){var p=URI$1$1.parse(ref),refPath=_getFullPath$1(p),baseId=getFullPath$1(this._getId(root.schema));if(Object.keys(root.schema).length===0||refPath!==baseId){var id=normalizeId$1(refPath);var refVal=this._refs[id];if(typeof refVal=="string"){return resolveRecursive$1.call(this,root,refVal,p)}else if(refVal instanceof SchemaObject$1$1){if(!refVal.validate)this._compile(refVal);root=refVal}else{refVal=this._schemas[id];if(refVal instanceof SchemaObject$1$1){if(!refVal.validate)this._compile(refVal);if(id==normalizeId$1(ref))return{schema:refVal,root,baseId};root=refVal}else{return}}if(!root.schema)return;baseId=getFullPath$1(this._getId(root.schema))}return getJsonPointer$1.call(this,p,baseId,root.schema,root)}function resolveRecursive$1(root,ref,parsedRef){var res=resolveSchema$1.call(this,root,ref);if(res){var schema=res.schema;var baseId=res.baseId;root=res.root;var id=this._getId(schema);if(id)baseId=resolveUrl$1(baseId,id);return getJsonPointer$1.call(this,parsedRef,baseId,schema,root)}}var PREVENT_SCOPE_CHANGE$1=util$3$1.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer$1(parsedRef,baseId,schema,root){parsedRef.fragment=parsedRef.fragment||"";if(parsedRef.fragment.slice(0,1)!="/")return;var parts=parsedRef.fragment.split("/");for(var i=1;i<parts.length;i++){var part=parts[i];if(part){part=util$3$1.unescapeFragment(part);schema=schema[part];if(schema===undefined)break;var id;if(!PREVENT_SCOPE_CHANGE$1[part]){id=this._getId(schema);if(id)baseId=resolveUrl$1(baseId,id);if(schema.$ref){var $ref=resolveUrl$1(baseId,schema.$ref);var res=resolveSchema$1.call(this,root,$ref);if(res){schema=res.schema;root=res.root;baseId=res.baseId}}}}}if(schema!==undefined&&schema!==root.schema)return{schema,root,baseId}}var SIMPLE_INLINED$1=util$3$1.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef$1(schema,limit){if(limit===false)return false;if(limit===undefined||limit===true)return checkNoRef$1(schema);else if(limit)return countKeys$1(schema)<=limit}function checkNoRef$1(schema){var item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object"&&!checkNoRef$1(item))return false}}else{for(var key in schema){if(key=="$ref")return false;item=schema[key];if(typeof item=="object"&&!checkNoRef$1(item))return false}}return true}function countKeys$1(schema){var count=0,item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object")count+=countKeys$1(item);if(count==Infinity)return Infinity}}else{for(var key in schema){if(key=="$ref")return Infinity;if(SIMPLE_INLINED$1[key]){count++}else{item=schema[key];if(typeof item=="object")count+=countKeys$1(item)+1;if(count==Infinity)return Infinity}}}return count}function getFullPath$1(id,normalize){if(normalize!==false)id=normalizeId$1(id);var p=URI$1$1.parse(id);return _getFullPath$1(p)}function _getFullPath$1(p){return URI$1$1.serialize(p).split("#")[0]+"#"}var TRAILING_SLASH_HASH$1=/#\/?$/;function normalizeId$1(id){return id?id.replace(TRAILING_SLASH_HASH$1,""):""}function resolveUrl$1(baseId,id){id=normalizeId$1(id);return URI$1$1.resolve(baseId,id)}function resolveIds$1(schema){var schemaId=normalizeId$1(this._getId(schema));var baseIds={"":schemaId};var fullPaths={"":getFullPath$1(schemaId,false)};var localRefs={};var self=this;traverse$2(schema,{allKeys:true},(function(sch,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(jsonPtr==="")return;var id=self._getId(sch);var baseId=baseIds[parentJsonPtr];var fullPath=fullPaths[parentJsonPtr]+"/"+parentKeyword;if(keyIndex!==undefined)fullPath+="/"+(typeof keyIndex=="number"?keyIndex:util$3$1.escapeFragment(keyIndex));if(typeof id=="string"){id=baseId=normalizeId$1(baseId?URI$1$1.resolve(baseId,id):id);var refVal=self._refs[id];if(typeof refVal=="string")refVal=self._refs[refVal];if(refVal&&refVal.schema){if(!equal$1$1(sch,refVal.schema))throw new Error('id "'+id+'" resolves to more than one schema')}else if(id!=normalizeId$1(fullPath)){if(id[0]=="#"){if(localRefs[id]&&!equal$1$1(sch,localRefs[id]))throw new Error('id "'+id+'" resolves to more than one schema');localRefs[id]=sch}else{self._refs[id]=fullPath}}}baseIds[jsonPtr]=baseId;fullPaths[jsonPtr]=fullPath}));return localRefs}var resolve$2$1=resolve_1$1;var error_classes$1={Validation:errorSubclass$1(ValidationError$1$1),MissingRef:errorSubclass$1(MissingRefError$1$1)};function ValidationError$1$1(errors){this.message="validation failed";this.errors=errors;this.ajv=this.validation=true}MissingRefError$1$1.message=function(baseId,ref){return"can't resolve reference "+ref+" from id "+baseId};function MissingRefError$1$1(baseId,ref,message){this.message=message||MissingRefError$1$1.message(baseId,ref);this.missingRef=resolve$2$1.url(baseId,ref);this.missingSchema=resolve$2$1.normalizeId(resolve$2$1.fullPath(this.missingRef))}function errorSubclass$1(Subclass){Subclass.prototype=Object.create(Error.prototype);Subclass.prototype.constructor=Subclass;return Subclass}var fastJsonStableStringify$1=function(data,opts){if(!opts)opts={};if(typeof opts==="function")opts={cmp:opts};var cycles=typeof opts.cycles==="boolean"?opts.cycles:false;var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp);var seen=[];return function stringify(node){if(node&&node.toJSON&&typeof node.toJSON==="function"){node=node.toJSON()}if(node===undefined)return;if(typeof node=="number")return isFinite(node)?""+node:"null";if(typeof node!=="object")return JSON.stringify(node);var i,out;if(Array.isArray(node)){out="[";for(i=0;i<node.length;i++){if(i)out+=",";out+=stringify(node[i])||"null"}return out+"]"}if(node===null)return"null";if(seen.indexOf(node)!==-1){if(cycles)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var seenIndex=seen.push(node)-1;var keys=Object.keys(node).sort(cmp&&cmp(node));out="";for(i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node[key]);if(!value)continue;if(out)out+=",";out+=JSON.stringify(key)+":"+value}seen.splice(seenIndex,1);return"{"+out+"}"}(data)};var validate$1$1=function generate_validate(it,$keyword,$ruleType){var out="";var $async=it.schema.$async===true,$refKeywords=it.util.schemaHasRulesExcept(it.schema,it.RULES.all,"$ref"),$id=it.self._getId(it.schema);if(it.opts.strictKeywords){var $unknownKwd=it.util.schemaUnknownRules(it.schema,it.RULES.keywords);if($unknownKwd){var $keywordsMsg="unknown keyword: "+$unknownKwd;if(it.opts.strictKeywords==="log")it.logger.warn($keywordsMsg);else throw new Error($keywordsMsg)}}if(it.isTop){out+=" var validate = ";if($async){it.async=true;out+="async "}out+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ";if($id&&(it.opts.sourceCode||it.opts.processCode)){out+=" "+("/*# sourceURL="+$id+" */")+" "}}if(typeof it.schema=="boolean"||!($refKeywords||it.schema.$ref)){var $keyword="false schema";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;if(it.schema===false){if(it.isTop){$breakOnError=true}else{out+=" var "+$valid+" = false; "}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"false schema")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'boolean schema is false' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{if(it.isTop){if($async){out+=" return data; "}else{out+=" validate.errors = null; return true; "}}else{out+=" var "+$valid+" = true; "}}if(it.isTop){out+=" }; return validate; "}return out}if(it.isTop){var $top=it.isTop,$lvl=it.level=0,$dataLvl=it.dataLevel=0,$data="data";it.rootId=it.resolve.fullPath(it.self._getId(it.root.schema));it.baseId=it.baseId||it.rootId;delete it.isTop;it.dataPathArr=[""];if(it.schema.default!==undefined&&it.opts.useDefaults&&it.opts.strictDefaults){var $defaultMsg="default is ignored in the schema root";if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}out+=" var vErrors = null; ";out+=" var errors = 0;     ";out+=" if (rootData === undefined) rootData = data; "}else{var $lvl=it.level,$dataLvl=it.dataLevel,$data="data"+($dataLvl||"");if($id)it.baseId=it.resolve.url(it.baseId,$id);if($async&&!it.async)throw new Error("async schema in sync schema");out+=" var errs_"+$lvl+" = errors;"}var $valid="valid"+$lvl,$breakOnError=!it.opts.allErrors,$closingBraces1="",$closingBraces2="";var $errorKeyword;var $typeSchema=it.schema.type,$typeIsArray=Array.isArray($typeSchema);if($typeSchema&&it.opts.nullable&&it.schema.nullable===true){if($typeIsArray){if($typeSchema.indexOf("null")==-1)$typeSchema=$typeSchema.concat("null")}else if($typeSchema!="null"){$typeSchema=[$typeSchema,"null"];$typeIsArray=true}}if($typeIsArray&&$typeSchema.length==1){$typeSchema=$typeSchema[0];$typeIsArray=false}if(it.schema.$ref&&$refKeywords){if(it.opts.extendRefs=="fail"){throw new Error('$ref: validation keywords used in schema at path "'+it.errSchemaPath+'" (see option extendRefs)')}else if(it.opts.extendRefs!==true){$refKeywords=false;it.logger.warn('$ref: keywords ignored in schema at path "'+it.errSchemaPath+'"')}}if(it.schema.$comment&&it.opts.$comment){out+=" "+it.RULES.all.$comment.code(it,"$comment")}if($typeSchema){if(it.opts.coerceTypes){var $coerceToTypes=it.util.coerceToTypes(it.opts.coerceTypes,$typeSchema)}var $rulesGroup=it.RULES.types[$typeSchema];if($coerceToTypes||$typeIsArray||$rulesGroup===true||$rulesGroup&&!$shouldUseGroup($rulesGroup)){var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type",$method=$typeIsArray?"checkDataTypes":"checkDataType";out+=" if ("+it.util[$method]($typeSchema,$data,it.opts.strictNumbers,true)+") { ";if($coerceToTypes){var $dataType="dataType"+$lvl,$coerced="coerced"+$lvl;out+=" var "+$dataType+" = typeof "+$data+"; var "+$coerced+" = undefined; ";if(it.opts.coerceTypes=="array"){out+=" if ("+$dataType+" == 'object' && Array.isArray("+$data+") && "+$data+".length == 1) { "+$data+" = "+$data+"[0]; "+$dataType+" = typeof "+$data+"; if ("+it.util.checkDataType(it.schema.type,$data,it.opts.strictNumbers)+") "+$coerced+" = "+$data+"; } "}out+=" if ("+$coerced+" !== undefined) ; ";var arr1=$coerceToTypes;if(arr1){var $type,$i=-1,l1=arr1.length-1;while($i<l1){$type=arr1[$i+=1];if($type=="string"){out+=" else if ("+$dataType+" == 'number' || "+$dataType+" == 'boolean') "+$coerced+" = '' + "+$data+"; else if ("+$data+" === null) "+$coerced+" = ''; "}else if($type=="number"||$type=="integer"){out+=" else if ("+$dataType+" == 'boolean' || "+$data+" === null || ("+$dataType+" == 'string' && "+$data+" && "+$data+" == +"+$data+" ";if($type=="integer"){out+=" && !("+$data+" % 1)"}out+=")) "+$coerced+" = +"+$data+"; "}else if($type=="boolean"){out+=" else if ("+$data+" === 'false' || "+$data+" === 0 || "+$data+" === null) "+$coerced+" = false; else if ("+$data+" === 'true' || "+$data+" === 1) "+$coerced+" = true; "}else if($type=="null"){out+=" else if ("+$data+" === '' || "+$data+" === 0 || "+$data+" === false) "+$coerced+" = null; "}else if(it.opts.coerceTypes=="array"&&$type=="array"){out+=" else if ("+$dataType+" == 'string' || "+$dataType+" == 'number' || "+$dataType+" == 'boolean' || "+$data+" == null) "+$coerced+" = ["+$data+"]; "}}}out+=" else {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } if ("+$coerced+" !== undefined) {  ";var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" "+$data+" = "+$coerced+"; ";if(!$dataLvl){out+="if ("+$parentData+" !== undefined)"}out+=" "+$parentData+"["+$parentDataProperty+"] = "+$coerced+"; } "}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}out+=" } "}}if(it.schema.$ref&&!$refKeywords){out+=" "+it.RULES.all.$ref.code(it,"$ref")+" ";if($breakOnError){out+=" } if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}else{var arr2=it.RULES;if(arr2){var $rulesGroup,i2=-1,l2=arr2.length-1;while(i2<l2){$rulesGroup=arr2[i2+=1];if($shouldUseGroup($rulesGroup)){if($rulesGroup.type){out+=" if ("+it.util.checkDataType($rulesGroup.type,$data,it.opts.strictNumbers)+") { "}if(it.opts.useDefaults){if($rulesGroup.type=="object"&&it.schema.properties){var $schema=it.schema.properties,$schemaKeys=Object.keys($schema);var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if($sch.default!==undefined){var $passData=$data+it.util.getProperty($propertyKey);if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg="default is ignored for: "+$passData;if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}}else{out+=" if ("+$passData+" === undefined ";if(it.opts.useDefaults=="empty"){out+=" || "+$passData+" === null || "+$passData+" === '' "}out+=" ) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}}else if($rulesGroup.type=="array"&&Array.isArray(it.schema.items)){var arr4=it.schema.items;if(arr4){var $sch,$i=-1,l4=arr4.length-1;while($i<l4){$sch=arr4[$i+=1];if($sch.default!==undefined){var $passData=$data+"["+$i+"]";if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg="default is ignored for: "+$passData;if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}}else{out+=" if ("+$passData+" === undefined ";if(it.opts.useDefaults=="empty"){out+=" || "+$passData+" === null || "+$passData+" === '' "}out+=" ) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}}}var arr5=$rulesGroup.rules;if(arr5){var $rule,i5=-1,l5=arr5.length-1;while(i5<l5){$rule=arr5[i5+=1];if($shouldUseRule($rule)){var $code=$rule.code(it,$rule.keyword,$rulesGroup.type);if($code){out+=" "+$code+" ";if($breakOnError){$closingBraces1+="}"}}}}}if($breakOnError){out+=" "+$closingBraces1+" ";$closingBraces1=""}if($rulesGroup.type){out+=" } ";if($typeSchema&&$typeSchema===$rulesGroup.type&&!$coerceToTypes){out+=" else { ";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } "}}if($breakOnError){out+=" if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}}}}if($breakOnError){out+=" "+$closingBraces2+" "}if($top){if($async){out+=" if (errors === 0) return data;           ";out+=" else throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; ";out+=" return errors === 0;       "}out+=" }; return validate;"}else{out+=" var "+$valid+" = errors === errs_"+$lvl+";"}function $shouldUseGroup($rulesGroup){var rules=$rulesGroup.rules;for(var i=0;i<rules.length;i++)if($shouldUseRule(rules[i]))return true}function $shouldUseRule($rule){return it.schema[$rule.keyword]!==undefined||$rule.implements&&$ruleImplementsSomeKeyword($rule)}function $ruleImplementsSomeKeyword($rule){var impl=$rule.implements;for(var i=0;i<impl.length;i++)if(it.schema[impl[i]]!==undefined)return true}return out};var resolve$1$1=resolve_1$1,util$2$1=util$5$1,errorClasses$1$1=error_classes$1,stableStringify$1$1=fastJsonStableStringify$1;var validateGenerator$1=validate$1$1;var ucs2length$2=util$2$1.ucs2length;var equal$2=fastDeepEqual$1;var ValidationError$2=errorClasses$1$1.Validation;var compile_1$1=compile$1$1;function compile$1$1(schema,root,localRefs,baseId){var self=this,opts=this._opts,refVal=[undefined],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema,refVal,refs};var c=checkCompiling$1.call(this,schema,root,baseId);var compilation=this._compilations[c.index];if(c.compiling)return compilation.callValidate=callValidate;var formats=this._formats;var RULES=this.RULES;try{var v=localCompile(schema,root,localRefs,baseId);compilation.validate=v;var cv=compilation.callValidate;if(cv){cv.schema=v.schema;cv.errors=null;cv.refs=v.refs;cv.refVal=v.refVal;cv.root=v.root;cv.$async=v.$async;if(opts.sourceCode)cv.source=v.source}return v}finally{endCompiling$1.call(this,schema,root,baseId)}function callValidate(){var validate=compilation.validate;var result=validate.apply(this,arguments);callValidate.errors=validate.errors;return result}function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile$1$1.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===true;var sourceCode=validateGenerator$1({isTop:true,schema:_schema,isRoot,baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:errorClasses$1$1.MissingRef,RULES,validate:validateGenerator$1,util:util$2$1,resolve:resolve$1$1,resolveRef,usePattern,useDefault,useCustomRule,opts,formats,logger:self.logger,self});sourceCode=vars$1(refVal,refValCode$1)+vars$1(patterns,patternCode$1)+vars$1(defaults,defaultCode$1)+vars$1(customRules,customRuleCode$1$1)+sourceCode;if(opts.processCode)sourceCode=opts.processCode(sourceCode,_schema);var validate;try{var makeValidate=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",sourceCode);validate=makeValidate(self,RULES,formats,root,refVal,defaults,customRules,equal$2,ucs2length$2,ValidationError$2);refVal[0]=validate}catch(e){self.logger.error("Error compiling schema, function code:",sourceCode);throw e}validate.schema=_schema;validate.errors=null;validate.refs=refs;validate.refVal=refVal;validate.root=isRoot?validate:_root;if($async)validate.$async=true;if(opts.sourceCode===true){validate.source={code:sourceCode,patterns,defaults}}return validate}function resolveRef(baseId,ref,isRoot){ref=resolve$1$1.url(baseId,ref);var refIndex=refs[ref];var _refVal,refCode;if(refIndex!==undefined){_refVal=refVal[refIndex];refCode="refVal["+refIndex+"]";return resolvedRef(_refVal,refCode)}if(!isRoot&&root.refs){var rootRefId=root.refs[ref];if(rootRefId!==undefined){_refVal=root.refVal[rootRefId];refCode=addLocalRef(ref,_refVal);return resolvedRef(_refVal,refCode)}}refCode=addLocalRef(ref);var v=resolve$1$1.call(self,localCompile,root,ref);if(v===undefined){var localSchema=localRefs&&localRefs[ref];if(localSchema){v=resolve$1$1.inlineRef(localSchema,opts.inlineRefs)?localSchema:compile$1$1.call(self,localSchema,root,localRefs,baseId)}}if(v===undefined){removeLocalRef(ref)}else{replaceLocalRef(ref,v);return resolvedRef(v,refCode)}}function addLocalRef(ref,v){var refId=refVal.length;refVal[refId]=v;refs[ref]=refId;return"refVal"+refId}function removeLocalRef(ref){delete refs[ref]}function replaceLocalRef(ref,v){var refId=refs[ref];refVal[refId]=v}function resolvedRef(refVal,code){return typeof refVal=="object"||typeof refVal=="boolean"?{code,schema:refVal,inline:true}:{code,$async:refVal&&!!refVal.$async}}function usePattern(regexStr){var index=patternsHash[regexStr];if(index===undefined){index=patternsHash[regexStr]=patterns.length;patterns[index]=regexStr}return"pattern"+index}function useDefault(value){switch(typeof value){case"boolean":case"number":return""+value;case"string":return util$2$1.toQuotedString(value);case"object":if(value===null)return"null";var valueStr=stableStringify$1$1(value);var index=defaultsHash[valueStr];if(index===undefined){index=defaultsHash[valueStr]=defaults.length;defaults[index]=value}return"default"+index}}function useCustomRule(rule,schema,parentSchema,it){if(self._opts.validateSchema!==false){var deps=rule.definition.dependencies;if(deps&&!deps.every((function(keyword){return Object.prototype.hasOwnProperty.call(parentSchema,keyword)})))throw new Error("parent schema must have all required keywords: "+deps.join(","));var validateSchema=rule.definition.validateSchema;if(validateSchema){var valid=validateSchema(schema);if(!valid){var message="keyword schema is invalid: "+self.errorsText(validateSchema.errors);if(self._opts.validateSchema=="log")self.logger.error(message);else throw new Error(message)}}}var compile=rule.definition.compile,inline=rule.definition.inline,macro=rule.definition.macro;var validate;if(compile){validate=compile.call(self,schema,parentSchema,it)}else if(macro){validate=macro.call(self,schema,parentSchema,it);if(opts.validateSchema!==false)self.validateSchema(validate,true)}else if(inline){validate=inline.call(self,it,rule.keyword,schema,parentSchema)}else{validate=rule.definition.validate;if(!validate)return}if(validate===undefined)throw new Error('custom keyword "'+rule.keyword+'"failed to compile');var index=customRules.length;customRules[index]=validate;return{code:"customRule"+index,validate}}}function checkCompiling$1(schema,root,baseId){var index=compIndex$1.call(this,schema,root,baseId);if(index>=0)return{index,compiling:true};index=this._compilations.length;this._compilations[index]={schema,root,baseId};return{index,compiling:false}}function endCompiling$1(schema,root,baseId){var i=compIndex$1.call(this,schema,root,baseId);if(i>=0)this._compilations.splice(i,1)}function compIndex$1(schema,root,baseId){for(var i=0;i<this._compilations.length;i++){var c=this._compilations[i];if(c.schema==schema&&c.root==root&&c.baseId==baseId)return i}return-1}function patternCode$1(i,patterns){return"var pattern"+i+" = new RegExp("+util$2$1.toQuotedString(patterns[i])+");"}function defaultCode$1(i){return"var default"+i+" = defaults["+i+"];"}function refValCode$1(i,refVal){return refVal[i]===undefined?"":"var refVal"+i+" = refVal["+i+"];"}function customRuleCode$1$1(i){return"var customRule"+i+" = customRules["+i+"];"}function vars$1(arr,statement){if(!arr.length)return"";var code="";for(var i=0;i<arr.length;i++)code+=statement(i,arr);return code}var cache$1={exports:{}};var Cache$1$1=cache$1.exports=function Cache(){this._cache={}};Cache$1$1.prototype.put=function Cache_put(key,value){this._cache[key]=value};Cache$1$1.prototype.get=function Cache_get(key){return this._cache[key]};Cache$1$1.prototype.del=function Cache_del(key){delete this._cache[key]};Cache$1$1.prototype.clear=function Cache_clear(){this._cache={}};var util$1$2=util$5$1;var DATE$1=/^(\d\d\d\d)-(\d\d)-(\d\d)$/;var DAYS$1=[0,31,28,31,30,31,30,31,31,30,31,30,31];var TIME$1=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;var HOSTNAME$1=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i;var URI$2=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URIREF$1=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URITEMPLATE$1=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;var URL$1=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;var UUID$1=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;var JSON_POINTER$2=/^(?:\/(?:[^~/]|~0|~1)*)*$/;var JSON_POINTER_URI_FRAGMENT$1=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;var RELATIVE_JSON_POINTER$2=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;var formats_1$1=formats$1$1;function formats$1$1(mode){mode=mode=="full"?"full":"fast";return util$1$2.copy(formats$1$1[mode])}formats$1$1.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":URITEMPLATE$1,url:URL$1,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME$1,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex$1,uuid:UUID$1,"json-pointer":JSON_POINTER$2,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT$1,"relative-json-pointer":RELATIVE_JSON_POINTER$2};formats$1$1.full={date:date$1,time:time$1,"date-time":date_time$1,uri:uri$1,"uri-reference":URIREF$1,"uri-template":URITEMPLATE$1,url:URL$1,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:HOSTNAME$1,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex$1,uuid:UUID$1,"json-pointer":JSON_POINTER$2,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT$1,"relative-json-pointer":RELATIVE_JSON_POINTER$2};function isLeapYear$2(year){return year%4===0&&(year%100!==0||year%400===0)}function date$1(str){var matches=str.match(DATE$1);if(!matches)return false;var year=+matches[1];var month=+matches[2];var day=+matches[3];return month>=1&&month<=12&&day>=1&&day<=(month==2&&isLeapYear$2(year)?29:DAYS$1[month])}function time$1(str,full){var matches=str.match(TIME$1);if(!matches)return false;var hour=matches[1];var minute=matches[2];var second=matches[3];var timeZone=matches[5];return(hour<=23&&minute<=59&&second<=59||hour==23&&minute==59&&second==60)&&(!full||timeZone)}var DATE_TIME_SEPARATOR$1=/t|\s/i;function date_time$1(str){var dateTime=str.split(DATE_TIME_SEPARATOR$1);return dateTime.length==2&&date$1(dateTime[0])&&time$1(dateTime[1],true)}var NOT_URI_FRAGMENT$1=/\/|:/;function uri$1(str){return NOT_URI_FRAGMENT$1.test(str)&&URI$2.test(str)}var Z_ANCHOR$1=/[^\\]\\Z/;function regex$1(str){if(Z_ANCHOR$1.test(str))return false;try{return true}catch(e){return false}}var ref$1=function generate_ref(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $async,$refCode;if($schema=="#"||$schema=="#/"){if(it.isRoot){$async=it.async;$refCode="validate"}else{$async=it.root.schema.$async===true;$refCode="root.refVal[0]"}}else{var $refVal=it.resolveRef(it.baseId,$schema,it.isRoot);if($refVal===undefined){var $message=it.MissingRefError.message(it.baseId,$schema);if(it.opts.missingRefs=="fail"){it.logger.error($message);var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"$ref"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { ref: '"+it.util.escapeQuotes($schema)+"' } ";if(it.opts.messages!==false){out+=" , message: 'can\\'t resolve reference "+it.util.escapeQuotes($schema)+"' "}if(it.opts.verbose){out+=" , schema: "+it.util.toQuotedString($schema)+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}if($breakOnError){out+=" if (false) { "}}else if(it.opts.missingRefs=="ignore"){it.logger.warn($message);if($breakOnError){out+=" if (true) { "}}else{throw new it.MissingRefError(it.baseId,$schema,$message)}}else if($refVal.inline){var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;$it.schema=$refVal.schema;$it.schemaPath="";$it.errSchemaPath=$schema;var $code=it.validate($it).replace(/validate\.schema/g,$refVal.code);out+=" "+$code+" ";if($breakOnError){out+=" if ("+$nextValid+") { "}}else{$async=$refVal.$async===true||it.async&&$refVal.$async!==false;$refCode=$refVal.code}}if($refCode){var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.opts.passContext){out+=" "+$refCode+".call(this, "}else{out+=" "+$refCode+"( "}out+=" "+$data+", (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+", rootData)  ";var __callValidate=out;out=$$outStack.pop();if($async){if(!it.async)throw new Error("async schema referenced by sync schema");if($breakOnError){out+=" var "+$valid+"; "}out+=" try { await "+__callValidate+"; ";if($breakOnError){out+=" "+$valid+" = true; "}out+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ";if($breakOnError){out+=" "+$valid+" = false; "}out+=" } ";if($breakOnError){out+=" if ("+$valid+") { "}}else{out+=" if (!"+__callValidate+") { if (vErrors === null) vErrors = "+$refCode+".errors; else vErrors = vErrors.concat("+$refCode+".errors); errors = vErrors.length; } ";if($breakOnError){out+=" else { "}}}return out};var allOf$1=function generate_allOf(it,$keyword,$ruleType){var out=" ";var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $currentBaseId=$it.baseId,$allSchemasEmpty=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$allSchemasEmpty=false;$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($breakOnError){if($allSchemasEmpty){out+=" if (true) { "}else{out+=" "+$closingBraces.slice(0,-1)+" "}}return out};var anyOf$1=function generate_anyOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $noEmptySchema=$schema.every((function($sch){return it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)}));if($noEmptySchema){var $currentBaseId=$it.baseId;out+=" var "+$errs+" = errors; var "+$valid+" = false;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$valid+" || "+$nextValid+"; if (!"+$valid+") { ";$closingBraces+="}"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"anyOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should match some schema in anyOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}}else{if($breakOnError){out+=" if (true) { "}}return out};var comment$1=function generate_comment(it,$keyword,$ruleType){var out=" ";var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $comment=it.util.toQuotedString($schema);if(it.opts.$comment===true){out+=" console.log("+$comment+");"}else if(typeof it.opts.$comment=="function"){out+=" self._opts.$comment("+$comment+", "+it.util.toQuotedString($errSchemaPath)+", validate.root.schema);"}return out};var _const$1=function generate_const(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}if(!$isData){out+=" var schema"+$lvl+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+" = equal("+$data+", schema"+$lvl+"); if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"const"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { allowedValue: schema"+$lvl+" } ";if(it.opts.messages!==false){out+=" , message: 'should be equal to constant' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out};var contains$1=function generate_contains(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId,$nonEmptySchema=it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all);out+="var "+$errs+" = errors;var "+$valid+";";if($nonEmptySchema){var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$nextValid+" = false; for (var "+$idx+" = 0; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if ("+$nextValid+") break; }  ";it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$nextValid+") {"}else{out+=" if ("+$data+".length == 0) {"}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"contains"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should contain a valid item' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { ";if($nonEmptySchema){out+="  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } "}if(it.opts.allErrors){out+=" } "}return out};var dependencies$1=function generate_dependencies(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $schemaDeps={},$propertyDeps={},$ownProperties=it.opts.ownProperties;for($property in $schema){if($property=="__proto__")continue;var $sch=$schema[$property];var $deps=Array.isArray($sch)?$propertyDeps:$schemaDeps;$deps[$property]=$sch}out+="var "+$errs+" = errors;";var $currentErrorPath=it.errorPath;out+="var missing"+$lvl+";";for(var $property in $propertyDeps){$deps=$propertyDeps[$property];if($deps.length){out+=" if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}if($breakOnError){out+=" && ( ";var arr1=$deps;if(arr1){var $propertyKey,$i=-1,l1=arr1.length-1;while($i<l1){$propertyKey=arr1[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=")) {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{out+=" ) { ";var arr2=$deps;if(arr2){var $propertyKey,i2=-1,l2=arr2.length-1;while(i2<l2){$propertyKey=arr2[i2+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}out+=" }   ";if($breakOnError){$closingBraces+="}";out+=" else { "}}}it.errorPath=$currentErrorPath;var $currentBaseId=$it.baseId;for(var $property in $schemaDeps){var $sch=$schemaDeps[$property];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}out+=") { ";$it.schema=$sch;$it.schemaPath=$schemaPath+it.util.getProperty($property);$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($property);out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}if($breakOnError){out+="   "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var _enum$1=function generate_enum(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}var $i="i"+$lvl,$vSchema="schema"+$lvl;if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+";";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=""+$valid+" = false;for (var "+$i+"=0; "+$i+"<"+$vSchema+".length; "+$i+"++) if (equal("+$data+", "+$vSchema+"["+$i+"])) { "+$valid+" = true; break; }";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"enum"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { allowedValues: schema"+$lvl+" } ";if(it.opts.messages!==false){out+=" , message: 'should be equal to one of the allowed values' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out};var format$2=function generate_format(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");if(it.opts.format===false){if($breakOnError){out+=" if (true) { "}return out}var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $unknownFormats=it.opts.unknownFormats,$allowUnknown=Array.isArray($unknownFormats);if($isData){var $format="format"+$lvl,$isObject="isObject"+$lvl,$formatType="formatType"+$lvl;out+=" var "+$format+" = formats["+$schemaValue+"]; var "+$isObject+" = typeof "+$format+" == 'object' && !("+$format+" instanceof RegExp) && "+$format+".validate; var "+$formatType+" = "+$isObject+" && "+$format+".type || 'string'; if ("+$isObject+") { ";if(it.async){out+=" var async"+$lvl+" = "+$format+".async; "}out+=" "+$format+" = "+$format+".validate; } if (  ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" (";if($unknownFormats!="ignore"){out+=" ("+$schemaValue+" && !"+$format+" ";if($allowUnknown){out+=" && self._opts.unknownFormats.indexOf("+$schemaValue+") == -1 "}out+=") || "}out+=" ("+$format+" && "+$formatType+" == '"+$ruleType+"' && !(typeof "+$format+" == 'function' ? ";if(it.async){out+=" (async"+$lvl+" ? await "+$format+"("+$data+") : "+$format+"("+$data+")) "}else{out+=" "+$format+"("+$data+") "}out+=" : "+$format+".test("+$data+"))))) {"}else{var $format=it.formats[$schema];if(!$format){if($unknownFormats=="ignore"){it.logger.warn('unknown format "'+$schema+'" ignored in schema at path "'+it.errSchemaPath+'"');if($breakOnError){out+=" if (true) { "}return out}else if($allowUnknown&&$unknownFormats.indexOf($schema)>=0){if($breakOnError){out+=" if (true) { "}return out}else{throw new Error('unknown format "'+$schema+'" is used in schema at path "'+it.errSchemaPath+'"')}}var $isObject=typeof $format=="object"&&!($format instanceof RegExp)&&$format.validate;var $formatType=$isObject&&$format.type||"string";if($isObject){var $async=$format.async===true;$format=$format.validate}if($formatType!=$ruleType){if($breakOnError){out+=" if (true) { "}return out}if($async){if(!it.async)throw new Error("async format in sync schema");var $formatRef="formats"+it.util.getProperty($schema)+".validate";out+=" if (!(await "+$formatRef+"("+$data+"))) { "}else{out+=" if (! ";var $formatRef="formats"+it.util.getProperty($schema);if($isObject)$formatRef+=".validate";if(typeof $format=="function"){out+=" "+$formatRef+"("+$data+") "}else{out+=" "+$formatRef+".test("+$data+") "}out+=") { "}}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"format"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { format:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match format \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out};var _if$1=function generate_if(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;var $thenSch=it.schema["then"],$elseSch=it.schema["else"],$thenPresent=$thenSch!==undefined&&(it.opts.strictKeywords?typeof $thenSch=="object"&&Object.keys($thenSch).length>0||$thenSch===false:it.util.schemaHasRules($thenSch,it.RULES.all)),$elsePresent=$elseSch!==undefined&&(it.opts.strictKeywords?typeof $elseSch=="object"&&Object.keys($elseSch).length>0||$elseSch===false:it.util.schemaHasRules($elseSch,it.RULES.all)),$currentBaseId=$it.baseId;if($thenPresent||$elsePresent){var $ifClause;$it.createErrors=false;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$errs+" = errors; var "+$valid+" = true;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;$it.createErrors=true;out+="  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; }  ";it.compositeRule=$it.compositeRule=$wasComposite;if($thenPresent){out+=" if ("+$nextValid+") {  ";$it.schema=it.schema["then"];$it.schemaPath=it.schemaPath+".then";$it.errSchemaPath=it.errSchemaPath+"/then";out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$nextValid+"; ";if($thenPresent&&$elsePresent){$ifClause="ifClause"+$lvl;out+=" var "+$ifClause+" = 'then'; "}else{$ifClause="'then'"}out+=" } ";if($elsePresent){out+=" else { "}}else{out+=" if (!"+$nextValid+") { "}if($elsePresent){$it.schema=it.schema["else"];$it.schemaPath=it.schemaPath+".else";$it.errSchemaPath=it.errSchemaPath+"/else";out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$nextValid+"; ";if($thenPresent&&$elsePresent){$ifClause="ifClause"+$lvl;out+=" var "+$ifClause+" = 'else'; "}else{$ifClause="'else'"}out+=" } "}out+=" if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"if"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { failingKeyword: "+$ifClause+" } ";if(it.opts.messages!==false){out+=" , message: 'should match \"' + "+$ifClause+" + '\" schema' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+=" }   ";if($breakOnError){out+=" else { "}}else{if($breakOnError){out+=" if (true) { "}}return out};var items$1=function generate_items(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId;out+="var "+$errs+" = errors;var "+$valid+";";if(Array.isArray($schema)){var $additionalItems=it.schema.additionalItems;if($additionalItems===false){out+=" "+$valid+" = "+$data+".length <= "+$schema.length+"; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalItems";out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schema.length+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have more than "+$schema.length+" items' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";$errSchemaPath=$currErrSchemaPath;if($breakOnError){$closingBraces+="}";out+=" else { "}}var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ("+$data+".length > "+$i+") { ";var $passData=$data+"["+$i+"]";$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;$it.errorPath=it.util.getPathExpr(it.errorPath,$i,it.opts.jsonPointers,true);$it.dataPathArr[$dataNxt]=$i;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if(typeof $additionalItems=="object"&&(it.opts.strictKeywords?typeof $additionalItems=="object"&&Object.keys($additionalItems).length>0||$additionalItems===false:it.util.schemaHasRules($additionalItems,it.RULES.all))){$it.schema=$additionalItems;$it.schemaPath=it.schemaPath+".additionalItems";$it.errSchemaPath=it.errSchemaPath+"/additionalItems";out+=" "+$nextValid+" = true; if ("+$data+".length > "+$schema.length+") {  for (var "+$idx+" = "+$schema.length+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}else if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+="  for (var "+$idx+" = "+0+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var _limit$1=function generate__limit(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $isMax=$keyword=="maximum",$exclusiveKeyword=$isMax?"exclusiveMaximum":"exclusiveMinimum",$schemaExcl=it.schema[$exclusiveKeyword],$isDataExcl=it.opts.$data&&$schemaExcl&&$schemaExcl.$data,$op=$isMax?"<":">",$notOp=$isMax?">":"<",$errorKeyword=undefined;if(!($isData||typeof $schema=="number"||$schema===undefined)){throw new Error($keyword+" must be number")}if(!($isDataExcl||$schemaExcl===undefined||typeof $schemaExcl=="number"||typeof $schemaExcl=="boolean")){throw new Error($exclusiveKeyword+" must be number or boolean")}if($isDataExcl){var $schemaValueExcl=it.util.getData($schemaExcl.$data,$dataLvl,it.dataPathArr),$exclusive="exclusive"+$lvl,$exclType="exclType"+$lvl,$exclIsNumber="exclIsNumber"+$lvl,$opExpr="op"+$lvl,$opStr="' + "+$opExpr+" + '";out+=" var schemaExcl"+$lvl+" = "+$schemaValueExcl+"; ";$schemaValueExcl="schemaExcl"+$lvl;out+=" var "+$exclusive+"; var "+$exclType+" = typeof "+$schemaValueExcl+"; if ("+$exclType+" != 'boolean' && "+$exclType+" != 'undefined' && "+$exclType+" != 'number') { ";var $errorKeyword=$exclusiveKeyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: '"+$exclusiveKeyword+" should be boolean' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$exclType+" == 'number' ? ( ("+$exclusive+" = "+$schemaValue+" === undefined || "+$schemaValueExcl+" "+$op+"= "+$schemaValue+") ? "+$data+" "+$notOp+"= "+$schemaValueExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) : ( ("+$exclusive+" = "+$schemaValueExcl+" === true) ? "+$data+" "+$notOp+"= "+$schemaValue+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { var op"+$lvl+" = "+$exclusive+" ? '"+$op+"' : '"+$op+"='; ";if($schema===undefined){$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$schemaValue=$schemaValueExcl;$isData=$isDataExcl}}else{var $exclIsNumber=typeof $schemaExcl=="number",$opStr=$op;if($exclIsNumber&&$isData){var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" ( "+$schemaValue+" === undefined || "+$schemaExcl+" "+$op+"= "+$schemaValue+" ? "+$data+" "+$notOp+"= "+$schemaExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { "}else{if($exclIsNumber&&$schema===undefined){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$schemaValue=$schemaExcl;$notOp+="="}else{if($exclIsNumber)$schemaValue=Math[$isMax?"min":"max"]($schemaExcl,$schema);if($schemaExcl===($exclIsNumber?$schemaValue:true)){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$notOp+="="}else{$exclusive=false;$opStr+="="}}var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+" "+$notOp+" "+$schemaValue+" || "+$data+" !== "+$data+") { "}}$errorKeyword=$errorKeyword||$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { comparison: "+$opExpr+", limit: "+$schemaValue+", exclusive: "+$exclusive+" } ";if(it.opts.messages!==false){out+=" , message: 'should be "+$opStr+" ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out};var _limitItems$1=function generate__limitItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxItems"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+".length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitItems")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxItems"){out+="more"}else{out+="fewer"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" items' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var _limitLength$1=function generate__limitLength(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxLength"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}if(it.opts.unicode===false){out+=" "+$data+".length "}else{out+=" ucs2length("+$data+") "}out+=" "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitLength")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT be ";if($keyword=="maxLength"){out+="longer"}else{out+="shorter"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" characters' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var _limitProperties$1=function generate__limitProperties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxProperties"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" Object.keys("+$data+").length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitProperties")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxProperties"){out+="more"}else{out+="fewer"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" properties' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var multipleOf$1=function generate_multipleOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}out+="var division"+$lvl+";if (";if($isData){out+=" "+$schemaValue+" !== undefined && ( typeof "+$schemaValue+" != 'number' || "}out+=" (division"+$lvl+" = "+$data+" / "+$schemaValue+", ";if(it.opts.multipleOfPrecision){out+=" Math.abs(Math.round(division"+$lvl+") - division"+$lvl+") > 1e-"+it.opts.multipleOfPrecision+" "}else{out+=" division"+$lvl+" !== parseInt(division"+$lvl+") "}out+=" ) ";if($isData){out+="  )  "}out+=" ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"multipleOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { multipleOf: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should be multiple of ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var not$1=function generate_not(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.createErrors=false;var $allErrorsOption;if($it.opts.allErrors){$allErrorsOption=$it.opts.allErrors;$it.opts.allErrors=false}out+=" "+it.validate($it)+" ";$it.createErrors=true;if($allErrorsOption)$it.opts.allErrors=$allErrorsOption;it.compositeRule=$it.compositeRule=$wasComposite;out+=" if ("+$nextValid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}}else{out+="  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if($breakOnError){out+=" if (false) { "}}return out};var oneOf$2=function generate_oneOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $currentBaseId=$it.baseId,$prevValid="prevValid"+$lvl,$passingSchemas="passingSchemas"+$lvl;out+="var "+$errs+" = errors , "+$prevValid+" = false , "+$valid+" = false , "+$passingSchemas+" = null; ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId}else{out+=" var "+$nextValid+" = true; "}if($i){out+=" if ("+$nextValid+" && "+$prevValid+") { "+$valid+" = false; "+$passingSchemas+" = ["+$passingSchemas+", "+$i+"]; } else { ";$closingBraces+="}"}out+=" if ("+$nextValid+") { "+$valid+" = "+$prevValid+" = true; "+$passingSchemas+" = "+$i+"; }"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=""+$closingBraces+"if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"oneOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { passingSchemas: "+$passingSchemas+" } ";if(it.opts.messages!==false){out+=" , message: 'should match exactly one schema in oneOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+="} else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; }";if(it.opts.allErrors){out+=" } "}return out};var pattern$1=function generate_pattern(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $regexp=$isData?"(new RegExp("+$schemaValue+"))":it.usePattern($schema);out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" !"+$regexp+".test("+$data+") ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"pattern"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { pattern:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match pattern \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var properties$2$1=function generate_properties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $key="key"+$lvl,$idx="idx"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl;var $schemaKeys=Object.keys($schema||{}).filter(notProto),$pProperties=it.schema.patternProperties||{},$pPropertyKeys=Object.keys($pProperties).filter(notProto),$aProperties=it.schema.additionalProperties,$someProperties=$schemaKeys.length||$pPropertyKeys.length,$noAdditional=$aProperties===false,$additionalIsSchema=typeof $aProperties=="object"&&Object.keys($aProperties).length,$removeAdditional=it.opts.removeAdditional,$checkAdditional=$noAdditional||$additionalIsSchema||$removeAdditional,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;var $required=it.schema.required;if($required&&!(it.opts.$data&&$required.$data)&&$required.length<it.opts.loopRequired){var $requiredHash=it.util.toHash($required)}function notProto(p){return p!=="__proto__"}out+="var "+$errs+" = errors;var "+$nextValid+" = true;";if($ownProperties){out+=" var "+$dataProperties+" = undefined;"}if($checkAdditional){if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}if($someProperties){out+=" var isAdditional"+$lvl+" = !(false ";if($schemaKeys.length){if($schemaKeys.length>8){out+=" || validate.schema"+$schemaPath+".hasOwnProperty("+$key+") "}else{var arr1=$schemaKeys;if(arr1){var $propertyKey,i1=-1,l1=arr1.length-1;while(i1<l1){$propertyKey=arr1[i1+=1];out+=" || "+$key+" == "+it.util.toQuotedString($propertyKey)+" "}}}}if($pPropertyKeys.length){var arr2=$pPropertyKeys;if(arr2){var $pProperty,$i=-1,l2=arr2.length-1;while($i<l2){$pProperty=arr2[$i+=1];out+=" || "+it.usePattern($pProperty)+".test("+$key+") "}}}out+=" ); if (isAdditional"+$lvl+") { "}if($removeAdditional=="all"){out+=" delete "+$data+"["+$key+"]; "}else{var $currentErrorPath=it.errorPath;var $additionalProperty="' + "+$key+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers)}if($noAdditional){if($removeAdditional){out+=" delete "+$data+"["+$key+"]; "}else{out+=" "+$nextValid+" = false; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalProperties";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalProperties"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { additionalProperty: '"+$additionalProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is an invalid additional property"}else{out+="should NOT have additional properties"}out+="' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=" break; "}}}else if($additionalIsSchema){if($removeAdditional=="failing"){out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if (!"+$nextValid+") { errors = "+$errs+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$data+"["+$key+"]; }  ";it.compositeRule=$it.compositeRule=$wasComposite}else{$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}}}it.errorPath=$currentErrorPath}if($someProperties){out+=" } "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}var $useDefaults=it.opts.useDefaults&&!it.compositeRule;if($schemaKeys.length){var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){var $prop=it.util.getProperty($propertyKey),$passData=$data+$prop,$hasDefault=$useDefaults&&$sch.default!==undefined;$it.schema=$sch;$it.schemaPath=$schemaPath+$prop;$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($propertyKey);$it.errorPath=it.util.getPath(it.errorPath,$propertyKey,it.opts.jsonPointers);$it.dataPathArr[$dataNxt]=it.util.toQuotedString($propertyKey);var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){$code=it.util.varReplace($code,$nextData,$passData);var $useData=$passData}else{var $useData=$nextData;out+=" var "+$nextData+" = "+$passData+"; "}if($hasDefault){out+=" "+$code+" "}else{if($requiredHash&&$requiredHash[$propertyKey]){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = false; ";var $currentErrorPath=it.errorPath,$currErrSchemaPath=$errSchemaPath,$missingProperty=it.util.escapeQuotes($propertyKey);if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}$errSchemaPath=it.errSchemaPath+"/required";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;it.errorPath=$currentErrorPath;out+=" } else { "}else{if($breakOnError){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = true; } else { "}else{out+=" if ("+$useData+" !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=" ) { "}}out+=" "+$code+" } "}}if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($pPropertyKeys.length){var arr4=$pPropertyKeys;if(arr4){var $pProperty,i4=-1,l4=arr4.length-1;while(i4<l4){$pProperty=arr4[i4+=1];var $sch=$pProperties[$pProperty];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+".patternProperties"+it.util.getProperty($pProperty);$it.errSchemaPath=it.errSchemaPath+"/patternProperties/"+it.util.escapeFragment($pProperty);if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" if ("+it.usePattern($pProperty)+".test("+$key+")) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } ";if($breakOnError){out+=" else "+$nextValid+" = true; "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var propertyNames$1=function generate_propertyNames(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;out+="var "+$errs+" = errors;";if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;var $key="key"+$lvl,$idx="idx"+$lvl,$i="i"+$lvl,$invalidName="' + "+$key+" + '",$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;if($ownProperties){out+=" var "+$dataProperties+" = undefined; "}if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" var startErrs"+$lvl+" = errors; ";var $passData=$key;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}it.compositeRule=$it.compositeRule=$wasComposite;out+=" if (!"+$nextValid+") { for (var "+$i+"=startErrs"+$lvl+"; "+$i+"<errors; "+$i+"++) { vErrors["+$i+"].propertyName = "+$key+"; }   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"propertyNames"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { propertyName: '"+$invalidName+"' } ";if(it.opts.messages!==false){out+=" , message: 'property name \\'"+$invalidName+"\\' is invalid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}if($breakOnError){out+=" break; "}out+=" } }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var required$1$1=function generate_required(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}var $vSchema="schema"+$lvl;if(!$isData){if($schema.length<it.opts.loopRequired&&it.schema.properties&&Object.keys(it.schema.properties).length){var $required=[];var arr1=$schema;if(arr1){var $property,i1=-1,l1=arr1.length-1;while(i1<l1){$property=arr1[i1+=1];var $propertySch=it.schema.properties[$property];if(!($propertySch&&(it.opts.strictKeywords?typeof $propertySch=="object"&&Object.keys($propertySch).length>0||$propertySch===false:it.util.schemaHasRules($propertySch,it.RULES.all)))){$required[$required.length]=$property}}}}else{var $required=$schema}}if($isData||$required.length){var $currentErrorPath=it.errorPath,$loopRequired=$isData||$required.length>=it.opts.loopRequired,$ownProperties=it.opts.ownProperties;if($breakOnError){out+=" var missing"+$lvl+"; ";if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}out+=" var "+$valid+" = true; ";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { "+$valid+" = "+$data+"["+$vSchema+"["+$i+"]] !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+="; if (!"+$valid+") break; } ";if($isData){out+="  }  "}out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}else{out+=" if ( ";var arr2=$required;if(arr2){var $propertyKey,$i=-1,l2=arr2.length-1;while($i<l2){$propertyKey=arr2[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=") {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}}else{if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}if($isData){out+=" if ("+$vSchema+" && !Array.isArray("+$vSchema+")) {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+$vSchema+" !== undefined) { "}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { if ("+$data+"["+$vSchema+"["+$i+"]] === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ";if($isData){out+="  }  "}}else{var arr3=$required;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}}it.errorPath=$currentErrorPath}else if($breakOnError){out+=" if (true) {"}return out};var uniqueItems$1=function generate_uniqueItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(($schema||$isData)&&it.opts.uniqueItems!==false){if($isData){out+=" var "+$valid+"; if ("+$schemaValue+" === false || "+$schemaValue+" === undefined) "+$valid+" = true; else if (typeof "+$schemaValue+" != 'boolean') "+$valid+" = false; else { "}out+=" var i = "+$data+".length , "+$valid+" = true , j; if (i > 1) { ";var $itemType=it.schema.items&&it.schema.items.type,$typeIsArray=Array.isArray($itemType);if(!$itemType||$itemType=="object"||$itemType=="array"||$typeIsArray&&($itemType.indexOf("object")>=0||$itemType.indexOf("array")>=0)){out+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+$data+"[i], "+$data+"[j])) { "+$valid+" = false; break outer; } } } "}else{out+=" var itemIndices = {}, item; for (;i--;) { var item = "+$data+"[i]; ";var $method="checkDataType"+($typeIsArray?"s":"");out+=" if ("+it.util[$method]($itemType,"item",it.opts.strictNumbers,true)+") continue; ";if($typeIsArray){out+=" if (typeof item == 'string') item = '\"' + item; "}out+=" if (typeof itemIndices[item] == 'number') { "+$valid+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}out+=" } ";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"uniqueItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { i: i, j: j } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}}else{if($breakOnError){out+=" if (true) { "}}return out};var dotjs$1={$ref:ref$1,allOf:allOf$1,anyOf:anyOf$1,$comment:comment$1,const:_const$1,contains:contains$1,dependencies:dependencies$1,enum:_enum$1,format:format$2,if:_if$1,items:items$1,maximum:_limit$1,minimum:_limit$1,maxItems:_limitItems$1,minItems:_limitItems$1,maxLength:_limitLength$1,minLength:_limitLength$1,maxProperties:_limitProperties$1,minProperties:_limitProperties$1,multipleOf:multipleOf$1,not:not$1,oneOf:oneOf$2,pattern:pattern$1,properties:properties$2$1,propertyNames:propertyNames$1,required:required$1$1,uniqueItems:uniqueItems$1,validate:validate$1$1};var ruleModules$1=dotjs$1,toHash$2=util$5$1.toHash;var rules$1$1=function rules(){var RULES=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}];var ALL=["type","$comment"];var KEYWORDS=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"];var TYPES=["number","integer","string","array","object","boolean","null"];RULES.all=toHash$2(ALL);RULES.types=toHash$2(TYPES);RULES.forEach((function(group){group.rules=group.rules.map((function(keyword){var implKeywords;if(typeof keyword=="object"){var key=Object.keys(keyword)[0];implKeywords=keyword[key];keyword=key;implKeywords.forEach((function(k){ALL.push(k);RULES.all[k]=true}))}ALL.push(keyword);var rule=RULES.all[keyword]={keyword,code:ruleModules$1[keyword],implements:implKeywords};return rule}));RULES.all.$comment={keyword:"$comment",code:ruleModules$1.$comment};if(group.type)RULES.types[group.type]=group}));RULES.keywords=toHash$2(ALL.concat(KEYWORDS));RULES.custom={};return RULES};var KEYWORDS$1=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];var data$1=function(metaSchema,keywordsJsonPointers){for(var i=0;i<keywordsJsonPointers.length;i++){metaSchema=JSON.parse(JSON.stringify(metaSchema));var segments=keywordsJsonPointers[i].split("/");var keywords=metaSchema;var j;for(j=1;j<segments.length;j++)keywords=keywords[segments[j]];for(j=0;j<KEYWORDS$1.length;j++){var key=KEYWORDS$1[j];var schema=keywords[key];if(schema){keywords[key]={anyOf:[schema,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}}return metaSchema};var MissingRefError$2=error_classes$1.MissingRef;var async$1=compileAsync$1;function compileAsync$1(schema,meta,callback){var self=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof meta=="function"){callback=meta;meta=undefined}var p=loadMetaSchemaOf(schema).then((function(){var schemaObj=self._addSchema(schema,undefined,meta);return schemaObj.validate||_compileAsync(schemaObj)}));if(callback){p.then((function(v){callback(null,v)}),callback)}return p;function loadMetaSchemaOf(sch){var $schema=sch.$schema;return $schema&&!self.getSchema($schema)?compileAsync$1.call(self,{$ref:$schema},true):Promise.resolve()}function _compileAsync(schemaObj){try{return self._compile(schemaObj)}catch(e){if(e instanceof MissingRefError$2)return loadMissingSchema(e);throw e}function loadMissingSchema(e){var ref=e.missingSchema;if(added(ref))throw new Error("Schema "+ref+" is loaded but "+e.missingRef+" cannot be resolved");var schemaPromise=self._loadingSchemas[ref];if(!schemaPromise){schemaPromise=self._loadingSchemas[ref]=self._opts.loadSchema(ref);schemaPromise.then(removePromise,removePromise)}return schemaPromise.then((function(sch){if(!added(ref)){return loadMetaSchemaOf(sch).then((function(){if(!added(ref))self.addSchema(sch,ref,undefined,meta)}))}})).then((function(){return _compileAsync(schemaObj)}));function removePromise(){delete self._loadingSchemas[ref]}function added(ref){return self._refs[ref]||self._schemas[ref]}}}}var custom$1=function generate_custom(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $rule=this,$definition="definition"+$lvl,$rDef=$rule.definition,$closingBraces="";var $compile,$inline,$macro,$ruleValidate,$validateCode;if($isData&&$rDef.$data){$validateCode="keywordValidate"+$lvl;var $validateSchema=$rDef.validateSchema;out+=" var "+$definition+" = RULES.custom['"+$keyword+"'].definition; var "+$validateCode+" = "+$definition+".validate;"}else{$ruleValidate=it.useCustomRule($rule,$schema,it.schema,it);if(!$ruleValidate)return;$schemaValue="validate.schema"+$schemaPath;$validateCode=$ruleValidate.code;$compile=$rDef.compile;$inline=$rDef.inline;$macro=$rDef.macro}var $ruleErrs=$validateCode+".errors",$i="i"+$lvl,$ruleErr="ruleErr"+$lvl,$asyncKeyword=$rDef.async;if($asyncKeyword&&!it.async)throw new Error("async keyword in sync schema");if(!($inline||$macro)){out+=""+$ruleErrs+" = null;"}out+="var "+$errs+" = errors;var "+$valid+";";if($isData&&$rDef.$data){$closingBraces+="}";out+=" if ("+$schemaValue+" === undefined) { "+$valid+" = true; } else { ";if($validateSchema){$closingBraces+="}";out+=" "+$valid+" = "+$definition+".validateSchema("+$schemaValue+"); if ("+$valid+") { "}}if($inline){if($rDef.statements){out+=" "+$ruleValidate.validate+" "}else{out+=" "+$valid+" = "+$ruleValidate.validate+"; "}}else if($macro){var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;$it.schema=$ruleValidate.validate;$it.schemaPath="";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it).replace(/validate\.schema/g,$validateCode);it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$code}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";out+="  "+$validateCode+".call( ";if(it.opts.passContext){out+="this"}else{out+="self"}if($compile||$rDef.schema===false){out+=" , "+$data+" "}else{out+=" , "+$schemaValue+" , "+$data+" , validate.schema"+it.schemaPath+" "}out+=" , (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+" , rootData )  ";var def_callRuleValidate=out;out=$$outStack.pop();if($rDef.errors===false){out+=" "+$valid+" = ";if($asyncKeyword){out+="await "}out+=""+def_callRuleValidate+"; "}else{if($asyncKeyword){$ruleErrs="customErrors"+$lvl;out+=" var "+$ruleErrs+" = null; try { "+$valid+" = await "+def_callRuleValidate+"; } catch (e) { "+$valid+" = false; if (e instanceof ValidationError) "+$ruleErrs+" = e.errors; else throw e; } "}else{out+=" "+$ruleErrs+" = null; "+$valid+" = "+def_callRuleValidate+"; "}}}if($rDef.modifying){out+=" if ("+$parentData+") "+$data+" = "+$parentData+"["+$parentDataProperty+"];"}out+=""+$closingBraces;if($rDef.valid){if($breakOnError){out+=" if (true) { "}}else{out+=" if ( ";if($rDef.valid===undefined){out+=" !";if($macro){out+=""+$nextValid}else{out+=""+$valid}}else{out+=" "+!$rDef.valid+" "}out+=") { ";$errorKeyword=$rule.keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}var def_customError=out;out=$$outStack.pop();if($inline){if($rDef.errors){if($rDef.errors!="full"){out+="  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } "}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if ("+$errs+" == errors) { "+def_customError+" } else {  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } "}}}else if($macro){out+="   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if (Array.isArray("+$ruleErrs+")) { if (vErrors === null) vErrors = "+$ruleErrs+"; else vErrors = vErrors.concat("+$ruleErrs+"); errors = vErrors.length;  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+";  "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'";  ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } else { "+def_customError+" } "}}out+=" } ";if($breakOnError){out+=" else { "}}return out};const $schema$1$1="http://json-schema.org/draft-07/schema#";const $id$1$1="http://json-schema.org/draft-07/schema#";const title$1="Core schema meta-schema";const definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:true,default:[]}};const type$1$1=["object","boolean"];const properties$1$1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:true,readOnly:{type:"boolean",default:false},examples:{type:"array",items:true},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:true},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:false},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:true,enum:{type:"array",items:true,minItems:1,uniqueItems:true},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:true}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var require$$13$1={$schema:$schema$1$1,$id:$id$1$1,title:title$1,definitions:definitions$1,type:type$1$1,properties:properties$1$1,default:true};var metaSchema$1=require$$13$1;var definition_schema$1={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:metaSchema$1.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:metaSchema$1.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}};var IDENTIFIER$2=/^[a-z_$][a-z0-9_$-]*$/i;var customRuleCode$2=custom$1;var definitionSchema$1=definition_schema$1;var keyword$1={add:addKeyword$1,get:getKeyword$1,remove:removeKeyword$1,validate:validateKeyword$1};function addKeyword$1(keyword,definition){var RULES=this.RULES;if(RULES.keywords[keyword])throw new Error("Keyword "+keyword+" is already defined");if(!IDENTIFIER$2.test(keyword))throw new Error("Keyword "+keyword+" is not a valid identifier");if(definition){this.validateKeyword(definition,true);var dataType=definition.type;if(Array.isArray(dataType)){for(var i=0;i<dataType.length;i++)_addRule(keyword,dataType[i],definition)}else{_addRule(keyword,dataType,definition)}var metaSchema=definition.metaSchema;if(metaSchema){if(definition.$data&&this._opts.$data){metaSchema={anyOf:[metaSchema,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}definition.validateSchema=this.compile(metaSchema,true)}}RULES.keywords[keyword]=RULES.all[keyword]=true;function _addRule(keyword,dataType,definition){var ruleGroup;for(var i=0;i<RULES.length;i++){var rg=RULES[i];if(rg.type==dataType){ruleGroup=rg;break}}if(!ruleGroup){ruleGroup={type:dataType,rules:[]};RULES.push(ruleGroup)}var rule={keyword,definition,custom:true,code:customRuleCode$2,implements:definition.implements};ruleGroup.rules.push(rule);RULES.custom[keyword]=rule}return this}function getKeyword$1(keyword){var rule=this.RULES.custom[keyword];return rule?rule.definition:this.RULES.keywords[keyword]||false}function removeKeyword$1(keyword){var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];delete RULES.custom[keyword];for(var i=0;i<RULES.length;i++){var rules=RULES[i].rules;for(var j=0;j<rules.length;j++){if(rules[j].keyword==keyword){rules.splice(j,1);break}}}return this}function validateKeyword$1(definition,throwError){validateKeyword$1.errors=null;var v=this._validateKeyword=this._validateKeyword||this.compile(definitionSchema$1,true);if(v(definition))return true;validateKeyword$1.errors=v.errors;if(throwError)throw new Error("custom keyword definition is invalid: "+this.errorsText(v.errors));else return false}const $schema$2="http://json-schema.org/draft-07/schema#";const $id$2="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#";const description$1="Meta-schema for $data reference (JSON Schema extension proposal)";const type$2="object";const required$2=["$data"];const properties$3={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}};const additionalProperties$1=false;var require$$12$1={$schema:$schema$2,$id:$id$2,description:description$1,type:type$2,required:required$2,properties:properties$3,additionalProperties:additionalProperties$1};var compileSchema$1=compile_1$1,resolve$4=resolve_1$1,Cache$2=cache$1.exports,SchemaObject$3=schema_obj$1,stableStringify$2=fastJsonStableStringify$1,formats$2=formats_1$1,rules$2=rules$1$1,$dataMetaSchema$1=data$1,util$7=util$5$1;var ajv$1=Ajv$1;Ajv$1.prototype.validate=validate$2;Ajv$1.prototype.compile=compile$2;Ajv$1.prototype.addSchema=addSchema$1;Ajv$1.prototype.addMetaSchema=addMetaSchema$1;Ajv$1.prototype.validateSchema=validateSchema$1;Ajv$1.prototype.getSchema=getSchema$1;Ajv$1.prototype.removeSchema=removeSchema$1;Ajv$1.prototype.addFormat=addFormat$1;Ajv$1.prototype.errorsText=errorsText$1;Ajv$1.prototype._addSchema=_addSchema$1;Ajv$1.prototype._compile=_compile$1;Ajv$1.prototype.compileAsync=async$1;var customKeyword$1=keyword$1;Ajv$1.prototype.addKeyword=customKeyword$1.add;Ajv$1.prototype.getKeyword=customKeyword$1.get;Ajv$1.prototype.removeKeyword=customKeyword$1.remove;Ajv$1.prototype.validateKeyword=customKeyword$1.validate;var errorClasses$2=error_classes$1;Ajv$1.ValidationError=errorClasses$2.Validation;Ajv$1.MissingRefError=errorClasses$2.MissingRef;Ajv$1.$dataMetaSchema=$dataMetaSchema$1;var META_SCHEMA_ID$1="http://json-schema.org/draft-07/schema";var META_IGNORE_OPTIONS$1=["removeAdditional","useDefaults","coerceTypes","strictDefaults"];var META_SUPPORT_DATA$1=["/properties"];function Ajv$1(opts){if(!(this instanceof Ajv$1))return new Ajv$1(opts);opts=this._opts=util$7.copy(opts)||{};setLogger$1(this);this._schemas={};this._refs={};this._fragments={};this._formats=formats$2(opts.format);this._cache=opts.cache||new Cache$2;this._loadingSchemas={};this._compilations=[];this.RULES=rules$2();this._getId=chooseGetId$1(opts);opts.loopRequired=opts.loopRequired||Infinity;if(opts.errorDataPath=="property")opts._errorDataPathProperty=true;if(opts.serialize===undefined)opts.serialize=stableStringify$2;this._metaOpts=getMetaSchemaOptions$1(this);if(opts.formats)addInitialFormats$1(this);if(opts.keywords)addInitialKeywords$1(this);addDefaultMetaSchema$1(this);if(typeof opts.meta=="object")this.addMetaSchema(opts.meta);if(opts.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});addInitialSchemas$1(this)}function validate$2(schemaKeyRef,data){var v;if(typeof schemaKeyRef=="string"){v=this.getSchema(schemaKeyRef);if(!v)throw new Error('no schema with key or ref "'+schemaKeyRef+'"')}else{var schemaObj=this._addSchema(schemaKeyRef);v=schemaObj.validate||this._compile(schemaObj)}var valid=v(data);if(v.$async!==true)this.errors=v.errors;return valid}function compile$2(schema,_meta){var schemaObj=this._addSchema(schema,undefined,_meta);return schemaObj.validate||this._compile(schemaObj)}function addSchema$1(schema,key,_skipValidation,_meta){if(Array.isArray(schema)){for(var i=0;i<schema.length;i++)this.addSchema(schema[i],undefined,_skipValidation,_meta);return this}var id=this._getId(schema);if(id!==undefined&&typeof id!="string")throw new Error("schema id must be string");key=resolve$4.normalizeId(key||id);checkUnique$1(this,key);this._schemas[key]=this._addSchema(schema,_skipValidation,_meta,true);return this}function addMetaSchema$1(schema,key,skipValidation){this.addSchema(schema,key,skipValidation,true);return this}function validateSchema$1(schema,throwOrLogError){var $schema=schema.$schema;if($schema!==undefined&&typeof $schema!="string")throw new Error("$schema must be a string");$schema=$schema||this._opts.defaultMeta||defaultMeta$1(this);if(!$schema){this.logger.warn("meta-schema not available");this.errors=null;return true}var valid=this.validate($schema,schema);if(!valid&&throwOrLogError){var message="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(message);else throw new Error(message)}return valid}function defaultMeta$1(self){var meta=self._opts.meta;self._opts.defaultMeta=typeof meta=="object"?self._getId(meta)||meta:self.getSchema(META_SCHEMA_ID$1)?META_SCHEMA_ID$1:undefined;return self._opts.defaultMeta}function getSchema$1(keyRef){var schemaObj=_getSchemaObj$1(this,keyRef);switch(typeof schemaObj){case"object":return schemaObj.validate||this._compile(schemaObj);case"string":return this.getSchema(schemaObj);case"undefined":return _getSchemaFragment$1(this,keyRef)}}function _getSchemaFragment$1(self,ref){var res=resolve$4.schema.call(self,{schema:{}},ref);if(res){var schema=res.schema,root=res.root,baseId=res.baseId;var v=compileSchema$1.call(self,schema,root,undefined,baseId);self._fragments[ref]=new SchemaObject$3({ref,fragment:true,schema,root,baseId,validate:v});return v}}function _getSchemaObj$1(self,keyRef){keyRef=resolve$4.normalizeId(keyRef);return self._schemas[keyRef]||self._refs[keyRef]||self._fragments[keyRef]}function removeSchema$1(schemaKeyRef){if(schemaKeyRef instanceof RegExp){_removeAllSchemas$1(this,this._schemas,schemaKeyRef);_removeAllSchemas$1(this,this._refs,schemaKeyRef);return this}switch(typeof schemaKeyRef){case"undefined":_removeAllSchemas$1(this,this._schemas);_removeAllSchemas$1(this,this._refs);this._cache.clear();return this;case"string":var schemaObj=_getSchemaObj$1(this,schemaKeyRef);if(schemaObj)this._cache.del(schemaObj.cacheKey);delete this._schemas[schemaKeyRef];delete this._refs[schemaKeyRef];return this;case"object":var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schemaKeyRef):schemaKeyRef;this._cache.del(cacheKey);var id=this._getId(schemaKeyRef);if(id){id=resolve$4.normalizeId(id);delete this._schemas[id];delete this._refs[id]}}return this}function _removeAllSchemas$1(self,schemas,regex){for(var keyRef in schemas){var schemaObj=schemas[keyRef];if(!schemaObj.meta&&(!regex||regex.test(keyRef))){self._cache.del(schemaObj.cacheKey);delete schemas[keyRef]}}}function _addSchema$1(schema,skipValidation,meta,shouldAddSchema){if(typeof schema!="object"&&typeof schema!="boolean")throw new Error("schema should be object or boolean");var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schema):schema;var cached=this._cache.get(cacheKey);if(cached)return cached;shouldAddSchema=shouldAddSchema||this._opts.addUsedSchema!==false;var id=resolve$4.normalizeId(this._getId(schema));if(id&&shouldAddSchema)checkUnique$1(this,id);var willValidate=this._opts.validateSchema!==false&&!skipValidation;var recursiveMeta;if(willValidate&&!(recursiveMeta=id&&id==resolve$4.normalizeId(schema.$schema)))this.validateSchema(schema,true);var localRefs=resolve$4.ids.call(this,schema);var schemaObj=new SchemaObject$3({id,schema,localRefs,cacheKey,meta});if(id[0]!="#"&&shouldAddSchema)this._refs[id]=schemaObj;this._cache.put(cacheKey,schemaObj);if(willValidate&&recursiveMeta)this.validateSchema(schema,true);return schemaObj}function _compile$1(schemaObj,root){if(schemaObj.compiling){schemaObj.validate=callValidate;callValidate.schema=schemaObj.schema;callValidate.errors=null;callValidate.root=root?root:callValidate;if(schemaObj.schema.$async===true)callValidate.$async=true;return callValidate}schemaObj.compiling=true;var currentOpts;if(schemaObj.meta){currentOpts=this._opts;this._opts=this._metaOpts}var v;try{v=compileSchema$1.call(this,schemaObj.schema,root,schemaObj.localRefs)}catch(e){delete schemaObj.validate;throw e}finally{schemaObj.compiling=false;if(schemaObj.meta)this._opts=currentOpts}schemaObj.validate=v;schemaObj.refs=v.refs;schemaObj.refVal=v.refVal;schemaObj.root=v.root;return v;function callValidate(){var _validate=schemaObj.validate;var result=_validate.apply(this,arguments);callValidate.errors=_validate.errors;return result}}function chooseGetId$1(opts){switch(opts.schemaId){case"auto":return _get$IdOrId$1;case"id":return _getId$1;default:return _get$Id$1}}function _getId$1(schema){if(schema.$id)this.logger.warn("schema $id ignored",schema.$id);return schema.id}function _get$Id$1(schema){if(schema.id)this.logger.warn("schema id ignored",schema.id);return schema.$id}function _get$IdOrId$1(schema){if(schema.$id&&schema.id&&schema.$id!=schema.id)throw new Error("schema $id is different from id");return schema.$id||schema.id}function errorsText$1(errors,options){errors=errors||this.errors;if(!errors)return"No errors";options=options||{};var separator=options.separator===undefined?", ":options.separator;var dataVar=options.dataVar===undefined?"data":options.dataVar;var text="";for(var i=0;i<errors.length;i++){var e=errors[i];if(e)text+=dataVar+e.dataPath+" "+e.message+separator}return text.slice(0,-separator.length)}function addFormat$1(name,format){if(typeof format=="string")format=new RegExp(format);this._formats[name]=format;return this}function addDefaultMetaSchema$1(self){var $dataSchema;if(self._opts.$data){$dataSchema=require$$12$1;self.addMetaSchema($dataSchema,$dataSchema.$id,true)}if(self._opts.meta===false)return;var metaSchema=require$$13$1;if(self._opts.$data)metaSchema=$dataMetaSchema$1(metaSchema,META_SUPPORT_DATA$1);self.addMetaSchema(metaSchema,META_SCHEMA_ID$1,true);self._refs["http://json-schema.org/schema"]=META_SCHEMA_ID$1}function addInitialSchemas$1(self){var optsSchemas=self._opts.schemas;if(!optsSchemas)return;if(Array.isArray(optsSchemas))self.addSchema(optsSchemas);else for(var key in optsSchemas)self.addSchema(optsSchemas[key],key)}function addInitialFormats$1(self){for(var name in self._opts.formats){var format=self._opts.formats[name];self.addFormat(name,format)}}function addInitialKeywords$1(self){for(var name in self._opts.keywords){var keyword=self._opts.keywords[name];self.addKeyword(name,keyword)}}function checkUnique$1(self,id){if(self._schemas[id]||self._refs[id])throw new Error('schema with key or id "'+id+'" already exists')}function getMetaSchemaOptions$1(self){var metaOpts=util$7.copy(self._opts);for(var i=0;i<META_IGNORE_OPTIONS$1.length;i++)delete metaOpts[META_IGNORE_OPTIONS$1[i]];return metaOpts}function setLogger$1(self){var logger=self._opts.logger;if(logger===false){self.logger={log:noop$1,warn:noop$1,error:noop$1}}else{if(logger===undefined)logger=console;if(!(typeof logger=="object"&&logger.log&&logger.warn&&logger.error))throw new Error("logger must implement log, warn and error methods");self.logger=logger}}function noop$1(){}async function matchFieldsList(fieldsList,queryObject){let fields=fieldsList;if(fields!==undefined){fields=await Promise.all(fields.map((async field=>findMatchingLayerFieldName(queryObject,field))))}return fields}function addDataSource(props){const{chartConfig,layer,inlineData}=props;let newDataSource;const theLayer=getLayerFromQueryObject$1(layer);if(theLayer!==undefined){newDataSource={type:WebChartDataSourceTypes$2.Layer,layer:{id:theLayer.id??0,layerType:"ArcGISFeatureLayer"}};if(theLayer.url!==null&&theLayer.url!==undefined)newDataSource.layer.url=theLayer.url}else if(inlineData!==undefined){const{inputData:data,processed,configFields}=inlineData??{};newDataSource={type:WebChartDataSourceTypes$2.Inline,data,processed,configFields}}return{...chartConfig,dataSource:newDataSource}}function compareVersions(versionA,versionB){let compareResult=0;if(versionA!==versionB){const partsNumberA=versionA.split(".");const partsNumberB=versionB.split(".");for(let i=0;i<partsNumberA.length;i+=1){const valueA=parseInt(partsNumberA[i],10);const valueB=parseInt(partsNumberB[i],10);if(valueA>valueB||Number.isNaN(valueB)){compareResult=1;break}if(valueA<valueB){compareResult=-1;break}}}return compareResult}function isValidChartVersionFormat(chartVersion){const regex=/^([1-9]\d*|0)(\.(([1-9]\d*)|0)){2}$/;return chartVersion!==undefined?regex.test(chartVersion):false}function getChartVersionInfo(configVersion){let versionStatus=WebChartVersionStatus.Same;let versions=[];const validVersionFormat=isValidChartVersionFormat(configVersion);if(validVersionFormat===true&&configVersion!==undefined){chartConfigVersions.sort(compareVersions);const compareResult=compareVersions(configVersion,chartConfigVersions[chartConfigVersions.length-1]);if(compareResult===1)versionStatus=WebChartVersionStatus.Newer;else if(compareResult===-1)versionStatus=WebChartVersionStatus.Older;if(versionStatus===WebChartVersionStatus.Newer||versionStatus===WebChartVersionStatus.Same){versions.push(configVersion)}else{for(let i=chartConfigVersions.length-2;i>=0;i-=1){if(compareVersions(configVersion,chartConfigVersions[i])>=0){versions=chartConfigVersions.slice(i,chartConfigVersions.length);break}}if(versions.length===0)versions.push(firstWebMapVersion)}}else{versionStatus=WebChartVersionStatus.Unrecognized;versions.push(unrecognizedVersion)}return{versionStatus,versions}}function extractSchemaNameFromRefPath$1(schemaRefPath){const schemaStartIndex=schemaRefPath.lastIndexOf("/");return schemaStartIndex!==-1?schemaRefPath.slice(schemaStartIndex+1):schemaRefPath}async function customizeValidationErrors$1(errors){const errorStrings=await fetchErrorsStrings$2();return errors.map((error=>{let customizedError=error;const dataPath=error.dataPath[0]==="."?error.dataPath.substring(1):error.dataPath;switch(error.keyword){case ConfigErrorKeywords$1.Required:customizedError={...error,message:formatMessage$1(errorStrings.requiredProperty,{dataPath,missingProperty:error.params.missingProperty})};break;case ConfigErrorKeywords$1.MinLength:customizedError={...error,message:formatMessage$1(errorStrings.minLength,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords$1.MinItems:customizedError={...error,message:formatMessage$1(errorStrings.minItems,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords$1.MaxItems:customizedError={...error,message:formatMessage$1(errorStrings.maxItems,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords$1.Pattern:if(error.params.pattern==="\\w+"){customizedError={...error,message:formatMessage$1(errorStrings.whiteSpacePattern,{dataPath}),params:{}}}break;case ConfigErrorKeywords$1.AdditionalProperties:customizedError={...error,message:formatMessage$1(errorStrings.additionalProperty,{dataPath,additionalProperty:error.params.additionalProperty})};break;case ConfigErrorKeywords$1.Enum:customizedError={...error,message:formatMessage$1(errorStrings.enumValues,{dataPath,allowedValues:error.params.allowedValues.join(", ")})};break;case ConfigErrorKeywords$1.AnyOf:{let params=[];if(error.schemaPath==="#/properties/legend/anyOf"){params=WebChartJSONSchemas$1.definitions.WebChart.properties.legend.anyOf.map((schemaRef=>extractSchemaNameFromRefPath$1(schemaRef.$ref)))}customizedError={...error,params,message:formatMessage$1(errorStrings.anyOfValues,{dataPath,schemaOptions:params.join(", ")})};break}}return customizedError}))}function createStartingSchema$1(schema,schemaKey){return{...schema,$ref:`#/definitions/${schemaKey}`}}async function findLayerLoadError(queryObject){let error;const errorStrings=await fetchErrorsStrings$2();const layer=getLayerFromQueryObject$1(queryObject);try{await layer.load()}catch(e){const url=layer?.url??"";const portalItemId=layer?.portalItem?.id??"";error={keyword:ErrorKeywords$1.LayerLoadFailure,message:formatMessage$1(errorStrings.layerLoadFailure,{url,portalItemId}),params:{url,portalItemId}}}return error}function generateValidatorFunction$1(){const validatorInstance=new ajv$1({allErrors:true});return async(input,seriesType)=>{let chartJSONSchema=WebChartJSONSchemas$1;if(seriesType===WebChartTypes$3.GaugeSeries){chartJSONSchema=createStartingSchema$1(WebChartJSONSchemas$1,"WebGaugeChart")}if(input?.dataSource===undefined){chartJSONSchema=createStartingSchema$1(WebChartJSONSchemas$1,"WebMapWebChart")}const validatorFunction=validatorInstance.compile(chartJSONSchema);validatorFunction(input);let errors=[];if(validatorFunction.errors!==null&&validatorFunction.errors!==undefined){errors=await customizeValidationErrors$1(validatorFunction.errors)}return errors}}const findSchemaErrors=generateValidatorFunction$1();async function findNumericAggregationWarnings(seriesArray,queryObject){const layerFields=await fetchLayerFieldsInfo$1(queryObject);const warnings=[];const errorStrings=await fetchErrorsStrings$2();for(let i=0;i<seriesArray.length;i+=1){const outStatistics=seriesArray[i].query?.outStatistics;if(outStatistics!==undefined){for(let j=0;j<outStatistics.length;j+=1){const statDefinition=outStatistics[j];const field=getFieldFromName$1(statDefinition.onStatisticField,layerFields);if(field!==undefined&&isNumericField$1(field)===false&&statDefinition.statisticType!==RESTStatisticType$3.Count){const dataPath=`series[${i}].query.outStatistics[${j}]`;warnings.push({keyword:ConfigWarningKeywords.NonNumericAggregation,message:formatMessage$1(errorStrings.nonNumericAggregation,{dataPath}),dataPath,params:{fieldName:statDefinition.onStatisticField,fieldType:field.type,aggregationRequested:statDefinition.statisticType}})}}}}return warnings}async function findDuplicateSeriesIDWarnings(chartConfig){const warnings=[];const errorStrings=await fetchErrorsStrings$2();if(chartConfig!==undefined&&chartConfig.series.length>1){const listIds=new Set;let previousCount=0;chartConfig.series.forEach(((series,seriesIndex)=>{listIds.add(series.id);if(listIds.size===previousCount){const dataPath=`series[${seriesIndex}].id`;warnings.push({keyword:ConfigWarningKeywords.DuplicateSeriesID,message:formatMessage$1(errorStrings.duplicateSeriesID,{dataPath,seriesID:series.id,seriesName:series.name}),dataPath,params:{seriesId:series.id,seriesName:series.name}})}else{previousCount+=1}}))}return warnings}async function findWarnings(input,queryObject){let warnings=[];if(queryObject!==undefined){const numericAggregationWarnings=await findNumericAggregationWarnings(input.series,queryObject);warnings=warnings.concat(numericAggregationWarnings)}warnings=warnings.concat(await findDuplicateSeriesIDWarnings(input));return warnings}async function findCustomErrors(queryObject){let errors=[];if(queryObject!==undefined){const layerLoadError=await findLayerLoadError(queryObject);if(layerLoadError!==undefined)errors=errors.concat(layerLoadError)}return errors}async function validateWebChart(props){const{input,seriesType,queryObject}=props;let status;if(getChartVersionInfo(input?.version).versionStatus===WebChartVersionStatus.Newer){status={valid:true,schemaErrors:[],customErrors:[],warnings:[]}}else{const schemaErrors=await findSchemaErrors(input,seriesType);let warnings=[];let customErrors=[];if(input!==undefined&&schemaErrors.length===0){customErrors=await findCustomErrors(queryObject);if(customErrors.length===0){warnings=await findWarnings(input,queryObject)}}status={valid:schemaErrors.length===0&&warnings.length===0&&customErrors.length===0,schemaErrors,customErrors,warnings}}return status}async function getDataWarningObject(props){const{invalidType,chartLimits,elementCount,seriesCount,queryObject,filterBySelection,locale=getLocaleInfo$1().locale,formatLocale=getLocaleInfo$1().formatLocale}=props;const errorStrings=await fetchErrorsStrings$2(locale);const commonStrings=await fetchCommonStrings$1(locale);let message=errorStrings.defaultInvalidChart;let params;const basicNumberFormatter=new Intl.NumberFormat(formatLocale);const limits=getChartLimits$1(chartLimits);switch(invalidType){case DataWarningKeywords$1.BarElementExceedsLimit:{let totalLimit=NaN;let seriesLimit=NaN;let errorMessage="";if(seriesCount!==undefined){if(seriesCount<=limits.maxBarChartSeriesCount){if(seriesCount===1){errorMessage=errorStrings.uniqueSeriesBarCountCannotExceedLimit;totalLimit=limits.maxBarUniqueSeriesCountTotal}else if(seriesCount===2){errorMessage=errorStrings.twoSeriesBarCountCannotExceedLimit;totalLimit=limits.maxBarTwoSeriesCountTotal;seriesLimit=limits.maxBarTwoSeriesCountPerSeries}else if(seriesCount>2){errorMessage=errorStrings.threePlusSeriesBarCountCannotExceedLimit;totalLimit=limits.maxBarThreePlusSeriesCountTotal;seriesLimit=limits.maxBarThreePlusSeriesCountPerSeries}}else{errorMessage=errorStrings.barSeriesCountCannotExceedLimit;seriesLimit=limits.maxBarChartSeriesCount}}const formattedTotalLimit=basicNumberFormatter.format(totalLimit);const formattedSeriesLimit=basicNumberFormatter.format(seriesLimit);const formattedElementCount=elementCount!==undefined?basicNumberFormatter.format(elementCount):"";message=formatMessage$1(errorMessage,{totalLimit:formattedTotalLimit,seriesLimit:formattedSeriesLimit,elementCount:formattedElementCount});params={actualCount:elementCount??NaN,totalLimit,seriesLimit};break}case DataWarningKeywords$1.LineChartExceedsLimit:{let totalLimit=NaN;let seriesLimit=NaN;let errorMessage="";if(seriesCount!==undefined){if(seriesCount<=limits.maxLineChartSeriesCount){if(seriesCount===1){errorMessage=errorStrings.uniqueSeriesLineCountCannotExceedLimit;totalLimit=limits.maxLineUniqueSeriesCountTotal}else if(seriesCount===2){errorMessage=errorStrings.twoSeriesLineCountCannotExceedLimit;totalLimit=limits.maxLineTwoSeriesCountTotal;seriesLimit=limits.maxLineTwoSeriesCountPerSeries}else if(seriesCount>2){errorMessage=errorStrings.threePlusSeriesLineCountCannotExceedLimit;totalLimit=limits.maxLineThreePlusSeriesCountTotal;seriesLimit=limits.maxLineThreePlusSeriesCountPerSeries}}else{errorMessage=errorStrings.lineSeriesCountCannotExceedLimit;seriesLimit=limits.maxLineChartSeriesCount}}const formattedTotalLimit=basicNumberFormatter.format(totalLimit);const formattedSeriesLimit=basicNumberFormatter.format(seriesLimit);const formattedElementCount=elementCount!==undefined?basicNumberFormatter.format(elementCount):"";message=formatMessage$1(errorMessage,{elementCount:formattedElementCount,seriesLimit:formattedSeriesLimit,totalLimit:formattedTotalLimit});params={actualCount:elementCount??NaN,totalLimit,seriesLimit}}break;case DataWarningKeywords$1.BoxPlotExceedsLimit:{let totalLimit=NaN;let seriesLimit=NaN;let errorMessage="";if(seriesCount!==undefined){if(seriesCount<=limits.maxBoxPlotSeriesCount){if(seriesCount===1){errorMessage=errorStrings.uniqueSeriesBoxCountCannotExceedLimit;totalLimit=limits.maxBoxUniqueSeriesCountTotal}else if(seriesCount===2){errorMessage=errorStrings.twoSeriesBoxCountCannotExceedLimit;totalLimit=limits.maxBoxTwoSeriesCountTotal;seriesLimit=limits.maxBoxTwoSeriesCountPerSeries}else if(seriesCount>2){errorMessage=errorStrings.threePlusBoxLineCountCannotExceedLimit;totalLimit=limits.maxBoxThreePlusSeriesCountTotal;seriesLimit=limits.maxBoxThreePlusSeriesCountPerSeries}}else{errorMessage=errorStrings.boxSeriesCountCannotExceedLimit;seriesLimit=limits.maxBoxPlotSeriesCount}}const formattedTotalLimit=basicNumberFormatter.format(totalLimit);const formattedSeriesLimit=basicNumberFormatter.format(seriesLimit);const formattedElementCount=elementCount!==undefined?basicNumberFormatter.format(elementCount):"";message=formatMessage$1(errorMessage,{elementCount:formattedElementCount,seriesLimit:formattedSeriesLimit,totalLimit:formattedTotalLimit});params={actualCount:elementCount??NaN,totalLimit,seriesLimit}}break;case DataWarningKeywords$1.BoxPlotOutliersExceedsLimit:{const errorMessage=errorStrings.boxSeriesOutlierCannotExceedLimit;const totalLimit=limits.maxBoxPlotOutlierLimit;const formattedTotalLimit=basicNumberFormatter.format(totalLimit);message=formatMessage$1(errorMessage,{totalLimit:formattedTotalLimit});params={actualCount:elementCount??NaN,totalLimit}}break;case DataWarningKeywords$1.PieChartExceedsLimit:{const errorMessage=errorStrings.pieChartSlicesCannotExceedLimit;const sliceLimit=limits.maxPieChartSliceCountTotal;const formattedSliceLimit=basicNumberFormatter.format(sliceLimit);const sliceCount=elementCount!==undefined?basicNumberFormatter.format(elementCount):"";message=formatMessage$1(errorMessage,{sliceCount,totalLimit:formattedSliceLimit});params={actualCount:elementCount??NaN,totalLimit:sliceLimit}}break;case DataWarningKeywords$1.GaugeExceedsLimit:{const errorMessage=errorStrings.gaugeCannotExceedLimit;const featureLimit=limits.maxGaugeByFeaturesLimit;const formattedFeatureLimit=basicNumberFormatter.format(featureLimit);const featureCount=elementCount!==undefined?basicNumberFormatter.format(elementCount):"";message=formatMessage$1(errorMessage,{featureCount,totalLimit:formattedFeatureLimit});params={actualCount:elementCount??NaN,totalLimit:featureLimit}}break;case DataWarningKeywords$1.PieChartMixOfNegativePositiveSlices:message=errorStrings.pieChartCannotHaveMixtureOfPositiveAndNegativeSlices;break;case DataWarningKeywords$1.NegativeValueInSqrtCalculation:message=errorStrings.negativeValueInDataForSqrtTransformation;break;case DataWarningKeywords$1.NegativeValueInLogCalculation:message=errorStrings.negativeValueInDataForLogTransformation;break;case DataWarningKeywords$1.HistogramEmptyField:message=errorStrings.histogramEmptyField;break;case DataWarningKeywords$1.EmptyDataSet:if(filterBySelection===true){message=commonStrings.noDataFBSMessage}else if(isFeatureLayerView$1(queryObject)===true){message=commonStrings.noDataFBEMessage}else{message=commonStrings.noDataMessage}break}const warningObject={keyword:invalidType??DataWarningKeywords$1.BadData,message,params};return warningObject}function adjustChartId(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&(configToUpdate.id===undefined||configToUpdate.id===""||configToUpdate.id===configToUpdate.title?.content?.text))updatedConfig.id=`Chart_${Date.now()}`;return updatedConfig}function adjustAxes(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.axes)===false){updatedConfig.axes=configToUpdate.axes?.map((axis=>{const newAxis=axis;delete newAxis.calculateAutomaticMaximum;delete newAxis.calculateAutomaticMinimum;if(newAxis.title?.content?.font?.style!==undefined){newAxis.title.content.font.style=newAxis.title.content.font.style.toLowerCase()}return newAxis}))}return updatedConfig}function adjustSeries(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false){updatedConfig.series=configToUpdate.series.map(((series,seriesIndex)=>{const newSeries=series;if(series.id===undefined){newSeries.id=`Series ${Date.now()}-${seriesIndex}`}const seriesType=getSeriesType$1(configToUpdate.series,seriesIndex);if((seriesType===WebChartTypes$3.BarSeries||seriesType===WebChartTypes$3.LineSeries)&&newSeries.query?.outStatistics?.[0]?.statisticType==="median"){newSeries.query.outStatistics[0].statisticType=RESTStatisticType$3.ContinuousPercentile}if(seriesType===WebChartTypes$3.BarSeries&&newSeries.multipleBarType!==undefined){newSeries.stackedType=newSeries.multipleBarType;delete newSeries.multipleBarType}if(seriesType===WebChartTypes$3.PieSeries&&newSeries.sliceGrouping!==undefined){newSeries.sliceGrouping.sliceId=pieChartSpecialSlicesId$1.defaultGroupOfSlicesId;if(newSeries.sliceGrouping.groupName!==undefined){newSeries.sliceGrouping={...newSeries.sliceGrouping,label:newSeries.sliceGrouping.groupName};delete newSeries.sliceGrouping.groupName}if(newSeries.sliceGrouping.groupSliceSymbol!==undefined){newSeries.sliceGrouping={...newSeries.sliceGrouping,fillSymbol:newSeries.sliceGrouping.groupSliceSymbol};delete newSeries.sliceGrouping.groupSliceSymbol}}if(seriesType===WebChartTypes$3.BoxPlotSeries&&isEmpty$2(newSeries.x?.trim())){newSeries.x=defaultBoxPlotCategory$1}return newSeries}))}return updatedConfig}async function matchChartFieldsToLayerFields(configToUpdate,layer){const updatedConfig={...configToUpdate};if(configToUpdate!==undefined&&(layer!==undefined||"dataSource"in configToUpdate&&configToUpdate.dataSource?.type===WebChartDataSourceTypes$2.Layer)&&configToUpdate.series?.length>0){const queryObject=layer??getFeatureLayer(configToUpdate.dataSource.layer);const chartSubType=getChartSubType$1(updatedConfig.series);const seriesType=getSeriesType$1(updatedConfig.series);const noMatchingFieldForXNeeded=seriesType===WebChartTypes$3.GaugeSeries&&isGaugeByFeature$1(configToUpdate)===false||seriesType===WebChartTypes$3.PieSeries&&isPieChartFromFields$1(configToUpdate.series)===true;const matchingFieldForYNeeded=seriesType===WebChartTypes$3.ScatterSeries||chartSubType===ChartSubType$1.BarAndLineNoAggregation||chartSubType===ChartSubType$1.PieNoAggregation;updatedConfig.series=await Promise.all(configToUpdate.series.map((async series=>{const newSeries={...series};if(noMatchingFieldForXNeeded===false){newSeries.x=await findMatchingLayerFieldName(queryObject,series.x)}if(newSeries.y!==undefined&&matchingFieldForYNeeded==true){const seriesY=series.y;const isYArray=Array.isArray(seriesY);if(isYArray===true){const yArray=await matchFieldsList(seriesY,queryObject);if(yArray!==undefined)newSeries.y=yArray}else{newSeries.y=await findMatchingLayerFieldName(queryObject,series.y)}}if(series.query!==undefined){let{where,groupByFieldsForStatistics,outStatistics,orderByFields}=series.query;groupByFieldsForStatistics=await matchFieldsList(groupByFieldsForStatistics,queryObject);if(orderByFields!==undefined){let fieldsList=[];const sortKeys=[];orderByFields.forEach((fieldSortKeyPair=>{if(fieldSortKeyPair!==""&&fieldSortKeyPair!==undefined){const fieldSortKeyArr=fieldSortKeyPair.split(" ");fieldsList.push(fieldSortKeyArr[0]);sortKeys.push(fieldSortKeyArr[1])}}));if(fieldsList.length>0){fieldsList=await matchFieldsList(fieldsList,queryObject);orderByFields=fieldsList.map(((item,index)=>`${item} ${sortKeys[index]}`))}}if(outStatistics!==undefined){outStatistics=await Promise.all(outStatistics.map((async outField=>{const newOutField={...outField};newOutField.onStatisticField=await findMatchingLayerFieldName(queryObject,outField.onStatisticField);return newOutField})))}if(where!==undefined&&chartSubType===ChartSubType$1.BarAndLineSplitBy){const splitByField=getSplitByField$1(series.query?.where);const whereArray=where.split("=");const whereField=await findMatchingLayerFieldName(queryObject,splitByField);where=`${whereField}=${whereArray[1].trim()}`}if(newSeries.query!==undefined){if(where!==undefined)newSeries.query.where=where;if(groupByFieldsForStatistics!==undefined)newSeries.query.groupByFieldsForStatistics=groupByFieldsForStatistics;if(outStatistics!==undefined)newSeries.query.outStatistics=outStatistics;if(orderByFields!==undefined)newSeries.query.orderByFields=orderByFields}}return newSeries})));if(seriesType===WebChartTypes$3.GaugeSeries&&configToUpdate?.axes?.[0]!==undefined){const{minimumFromField,maximumFromField}=configToUpdate.axes[0];if(minimumFromField!==undefined)configToUpdate.axes[0].minimumFromField=await findMatchingLayerFieldName(queryObject,minimumFromField);if(maximumFromField!==undefined)configToUpdate.axes[0].maximumFromField=await findMatchingLayerFieldName(queryObject,maximumFromField)}}return updatedConfig}function adjustPieFromFieldsDefaultNameAndValue(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false&&isPieChartFromFields$1(configToUpdate.series)===true){updatedConfig.series=configToUpdate.series.map((series=>{const newSeries=cloneDeep$2(series);if(series.query?.orderByFields?.[0]!==undefined&&series.query?.orderByFields?.[0].includes("arcgis_charts_pie_category_from_fields_name")===true){newSeries.query.orderByFields[0]=series.query.orderByFields[0].replace("arcgis_charts_pie_category_from_fields_name",defaultPieFromFieldsName$2)}return newSeries}))}return updatedConfig}function removeSpacingPropertyFromGauge(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false){const seriesType=getSeriesType$1(configToUpdate.series);if(seriesType===WebChartTypes$3.GaugeSeries&&configToUpdate.axes?.[0]!==undefined){const newAxis=configToUpdate.axes[0];if(newAxis.ticks?.hasOwnProperty("spacing")===true)delete newAxis.ticks.spacing;updatedConfig.axes[0]=newAxis}}return updatedConfig}function moveSeriesQueryExtent(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);const{extent}=updatedConfig.series[0]?.query??{};if(extent!==undefined){updatedConfig.dataFilters={...updatedConfig.dataFilters,geometry:extent};updatedConfig.series.forEach((series=>{delete series.query?.extent}))}return updatedConfig}function moveSeriesRotatedPropToChart(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false){if(isRotationSupported(configToUpdate)&&configToUpdate.rotated===undefined){updatedConfig.rotated=configToUpdate.series[0].rotated??getDefaultChartRotation$1()}updatedConfig.series.forEach((series=>{if(series.rotated!==undefined){delete series.rotated}}))}return updatedConfig}function renameDataSourceProperties(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);const oldDataSource=configToUpdate.dataSource;if(configToUpdate!==undefined&&"dataSource"in updatedConfig&&isEmpty$2(oldDataSource)===false){if(oldDataSource.type==="featureLayer")updatedConfig.dataSource.type="layer";if("featureLayer"in oldDataSource){updatedConfig.dataSource.layer=oldDataSource.featureLayer;delete updatedConfig.dataSource.featureLayer}}return updatedConfig}function copyDataSourceFilterToConfig(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if("dataSource"in configToUpdate){const oldDataSource=configToUpdate.dataSource;if(oldDataSource?.filter!==undefined&&oldDataSource.filter?.trim()!==""){const combinedFilter=combineFilters$1([oldDataSource.filter,updatedConfig.dataFilters?.where]);updatedConfig.dataFilters={...updatedConfig.dataFilters,where:combinedFilter};delete updatedConfig.dataSource.filter}}return updatedConfig}function moveBoxPlotSeriesPropsToChart(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false){const seriesType=getSeriesType$1(configToUpdate.series);if(seriesType===WebChartTypes$3.BoxPlotSeries){const firstSeries=updatedConfig.series[0];if(firstSeries.showOutliers!==undefined){if(configToUpdate.showOutliers===undefined){updatedConfig.showOutliers=firstSeries.showOutliers}delete firstSeries.showOutliers}if(firstSeries.standardizeValues!==undefined){if(configToUpdate.standardizeValues===undefined){updatedConfig.standardizeValues=firstSeries.standardizeValues}delete firstSeries.standardizeValues}}}return updatedConfig}function movePieSeriesSortLabelsPropToChart(configToUpdate){const updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined&&isEmpty$2(configToUpdate.series)===false){const seriesType=getSeriesType$1(configToUpdate.series);if(seriesType===WebChartTypes$3.PieSeries){const pieSeries=updatedConfig.series[0];if(pieSeries.sortLabelsBy!==undefined){if(configToUpdate.sortLabelsBy===undefined){updatedConfig.sortLabelsBy=pieSeries.sortLabelsBy}delete pieSeries.sortLabelsBy}}}return updatedConfig}async function convertTo_1_0_0(configToUpdate,layer){let updatedConfig=cloneDeep$2(configToUpdate);if(updatedConfig!==undefined){updatedConfig=adjustChartId(updatedConfig);updatedConfig=adjustAxes(updatedConfig);updatedConfig=adjustSeries(updatedConfig);updatedConfig=await matchChartFieldsToLayerFields(updatedConfig,layer);updatedConfig=moveBoxPlotSeriesPropsToChart(updatedConfig);if(updatedConfig.legend!==undefined&&Number.isFinite(updatedConfig.legend.maxHeight)===false){updatedConfig.legend.maxHeight=NaN}}return updatedConfig}function convertTo_1_0_1(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=adjustPieFromFieldsDefaultNameAndValue(updatedConfig)}return updatedConfig}function convertTo_2_0_0(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=removeSpacingPropertyFromGauge(updatedConfig)}return updatedConfig}function convertTo_3_5_0(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=moveSeriesQueryExtent(updatedConfig)}return updatedConfig}function convertTo_4_0_1(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=moveSeriesRotatedPropToChart(updatedConfig)}return updatedConfig}function convertTo_5_0_0(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=renameDataSourceProperties(updatedConfig)}return updatedConfig}function convertTo_7_0_0(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=copyDataSourceFilterToConfig(updatedConfig)}return updatedConfig}function convertTo_7_4_1(configToUpdate){let updatedConfig=cloneDeep$2(configToUpdate);if(configToUpdate!==undefined){updatedConfig=movePieSeriesSortLabelsPropToChart(updatedConfig)}return updatedConfig}async function applyConversions(props){const{versionsToConvert=[],configToUpdate,layer}=props;let updatedConfig=cloneDeep$2(configToUpdate);if(versionsToConvert.length>0&&configToUpdate!==undefined){updatedConfig=await convertTo_1_0_0(updatedConfig,layer);if(versionsToConvert.includes(firstWebMapVersion)||versionsToConvert.includes(unrecognizedVersion)){updatedConfig=convertTo_1_0_1(updatedConfig);updatedConfig=convertTo_2_0_0(updatedConfig);updatedConfig=convertTo_3_5_0(updatedConfig);updatedConfig=convertTo_4_0_1(updatedConfig);updatedConfig=convertTo_5_0_0(updatedConfig);updatedConfig=convertTo_7_0_0(updatedConfig);updatedConfig=convertTo_7_4_1(updatedConfig)}else{versionsToConvert.forEach((versionItem=>{switch(versionItem){case"1.0.1":updatedConfig=convertTo_2_0_0(updatedConfig);break;case"3.4.0":updatedConfig=convertTo_3_5_0(updatedConfig);break;case"4.0.0":updatedConfig=convertTo_4_0_1(updatedConfig);break;case"4.0.1":updatedConfig=convertTo_5_0_0(updatedConfig);break;case"6.4.0":updatedConfig=convertTo_7_0_0(updatedConfig);break;case"7.4.0":updatedConfig=convertTo_7_4_1(updatedConfig);break}}))}updatedConfig.version=WebChartCurrentVersion}return updatedConfig}async function convertChartSpec(config,layerOrLayerView){const configVersion=config?.version??firstWebMapVersion;let newConfig=config;const{versionStatus,versions}=getChartVersionInfo(configVersion);if(newConfig!==undefined&&(versionStatus===WebChartVersionStatus.Older||versionStatus===WebChartVersionStatus.Unrecognized)){const layer=getLayerFromQueryObject$1(layerOrLayerView);newConfig=await applyConversions({versionsToConvert:versions,configToUpdate:newConfig,layer})}return newConfig}const ActionModes$1={MonoSelection:"monoSelection",MultiSelection:"multiSelection",MultiSelectionWithCtrlKey:"multiSelectionWithCtrlKey",Zoom:"zoom",None:"none"};var Grip=function(_super){__extends(Grip,_super);function Grip(){var _this=_super.call(this)||this;_this.className="Grip";var cs=new InterfaceColorSet;_this.layout="absolute";_this.padding(10,10,10,10);_this.margin(3,3,3,3);_this.background.fillOpacity=.3;_this.background.cornerRadius(10,10,10,10);var icon=new Sprite;icon.element=_this.paper.add("path");var path=moveTo({x:-6,y:0});path+=lineTo({x:6,y:0});path+=moveTo({x:-8,y:-6});path+=lineTo({x:0,y:-12});path+=lineTo({x:8,y:-6});path+=moveTo({x:-8,y:6});path+=lineTo({x:0,y:12});path+=lineTo({x:8,y:6});icon.path=path;icon.strokeWidth=2;icon.fillOpacity=0;icon.pixelPerfect=true;icon.padding(0,4,0,4);icon.stroke=cs.getFor("text");icon.strokeOpacity=.7;icon.align="center";icon.valign="middle";_this.icon=icon;_this.label.dispose();_this.label=undefined;_this.position="right";_this.autoHideDelay=3e3;_this.events.on("shown",(function(ev){if(_this._autoHideTimeout){_this._autoHideTimeout.dispose()}if(_this.autoHideDelay){_this._autoHideTimeout=_this.setTimeout((function(){_this.hide()}),_this.autoHideDelay)}}));_this.events.on("down",(function(ev){if(_this._autoHideTimeout){_this._autoHideTimeout.dispose()}}));_this.events.on("out",(function(ev){if(_this.autoHideDelay){_this._autoHideTimeout=_this.setTimeout((function(){_this.hide()}),_this.autoHideDelay)}}));_this.applyTheme();return _this}Object.defineProperty(Grip.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(value){if(this.setPropertyValue("position",value)){switch(value){case"left":this.align="left";this.valign="middle";this.horizontalCenter="left";this.verticalCenter="middle";this.icon.rotation=0;this.width=undefined;this.height=percent(30);break;case"right":this.align="right";this.valign="middle";this.horizontalCenter="right";this.verticalCenter="middle";this.icon.rotation=0;this.width=undefined;this.height=percent(30);break;case"top":this.align="center";this.valign="top";this.horizontalCenter="middle";this.verticalCenter="top";this.icon.rotation=90;this.width=percent(30);this.height=undefined;break;case"bottom":this.align="center";this.valign="bottom";this.horizontalCenter="middle";this.verticalCenter="bottom";this.icon.rotation=90;this.width=percent(30);this.height=undefined;break;default:this.align="center";this.valign="middle";this.horizontalCenter="middle";this.verticalCenter="middle";this.icon.rotation=90;this.width=percent(30);this.height=undefined}}},enumerable:true,configurable:true});Object.defineProperty(Grip.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(value){this.setPropertyValue("autoHideDelay",value)},enumerable:true,configurable:true});return Grip}(Button);registry.registeredClasses["Grip"]=Grip;var ChartDataItem=function(_super){__extends(ChartDataItem,_super);function ChartDataItem(){var _this=_super.call(this)||this;_this.className="ChartDataItem";_this.applyTheme();return _this}return ChartDataItem}(DataItem);var Chart=function(_super){__extends(Chart,_super);function Chart(){var _this=_super.call(this)||this;_this._legend=new MutableValueDisposer;if(_this.constructor===Chart){throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.")}_this.className="Chart";var template=new Label;_this.titles=new ListTemplate(template);_this._disposers.push(new ListDisposer(_this.titles));_this._disposers.push(template);_this.width=percent(100);_this.height=percent(100);_this.layout="vertical";var chartAndLegendContainer=_this.createChild(Container);chartAndLegendContainer.shouldClone=false;chartAndLegendContainer.layout="vertical";chartAndLegendContainer.width=percent(100);chartAndLegendContainer.height=percent(100);_this.chartAndLegendContainer=chartAndLegendContainer;var chartContainer=chartAndLegendContainer.createChild(Container);chartContainer.shouldClone=false;chartContainer.width=percent(100);chartContainer.height=percent(100);_this.chartContainer=chartContainer;_this.showOnInit=true;_this._disposers.push(_this._legend);_this.titles.events.on("inserted",(function(label){_this.processTitle(label);_this.updateReaderTitleReferences()}),_this,false);_this.titles.events.on("removed",(function(label){_this.updateReaderTitleReferences()}),_this,false);_this.role="region";_this.defaultState.transitionDuration=1;_this.applyTheme();return _this}Chart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Chart")}};Chart.prototype.draw=function(){this.fixLayout();_super.prototype.draw.call(this)};Chart.prototype.fixLayout=function(){var legend=this.legend;if(legend){var chartAndLegendContainer=this.chartAndLegendContainer;var chartContainer=this.chartContainer;chartContainer.x=undefined;chartContainer.y=undefined;if(legend.position!="absolute"){legend.x=undefined;legend.y=undefined}switch(legend.position){case"left":chartAndLegendContainer.layout="horizontal";legend.toBack();break;case"right":chartAndLegendContainer.layout="horizontal";legend.toFront();break;case"top":chartAndLegendContainer.layout="vertical";legend.toBack();break;case"bottom":chartAndLegendContainer.layout="vertical";legend.toFront();break;case"absolute":legend.isMeasured=false;break}}};Chart.prototype.feedLegend=function(){};Chart.prototype.processTitle=function(event){var title=event.newValue;title.parent=this;title.toBack();title.shouldClone=false;title.align="center";title.uidAttr();return title};Chart.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var titleIds_1=[];each(this.titles.iterator(),(function(title){titleIds_1.push(title.uid)}));this.setSVGAttribute({"aria-labelledby":titleIds_1.join(" ")})}else{this.removeSVGAttribute("aria-labelledby")}};Object.defineProperty(Chart.prototype,"legend",{get:function(){return this._legend.get()},set:function(legend){this.setLegend(legend)},enumerable:true,configurable:true});Chart.prototype.setLegend=function(legend){var _this=this;if(this._legend.get()!==legend){if(legend){legend.parent=this.chartAndLegendContainer;this._legend.set(legend,legend.events.on("propertychanged",(function(event){if(event.property=="position"){_this.fixLayout()}}),undefined,false));legend.addDisposer(new Disposer((function(){_this.legend=undefined})))}else{this._legend.reset()}this.feedLegend()}};Chart.prototype.dispose=function(){if(this.legend){this.legend.dispose()}_super.prototype.dispose.call(this)};Chart.prototype.processConfig=function(config){if(config){if(hasValue(config.legend)&&!hasValue(config.legend.type)){config.legend.type="Legend"}}_super.prototype.processConfig.call(this,config)};Chart.prototype.copyFrom=function(source){this.titles.copyFrom(source.titles);this.chartContainer.copyFrom(source.chartContainer);if(source.legend){this.legend=source.legend.clone();this.legend.removeChildren()}_super.prototype.copyFrom.call(this,source)};Object.defineProperty(Chart.prototype,"dragGrip",{get:function(){var _this=this;if(!this._dragGrip){var grip_1=this.tooltipContainer.createChild(Grip);grip_1.align="right";grip_1.valign="middle";grip_1.hide(0);grip_1.events.on("down",(function(ev){if(ev.touch){_this.interactionsEnabled=false}}));grip_1.events.on("up",(function(ev){_this.interactionsEnabled=true}));this.events.on("down",(function(ev){if(ev.touch){grip_1.show()}}));this._dragGrip=grip_1}return this._dragGrip},set:function(value){this._dragGrip=value},enumerable:true,configurable:true});Object.defineProperty(Chart.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(value){this.parent.focusable=value},enumerable:true,configurable:true});return Chart}(Component);registry.registeredClasses["Chart"]=Chart;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(target,stateId){if(target instanceof Chart){var state=target.states.create(stateId);if(target.pixelPaddingLeft>10){state.properties.paddingLeft=10}if(target.pixelPaddingRight>10){state.properties.paddingRight=10}return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(target,stateId){if(target instanceof Chart){var state=target.states.create(stateId);if(target.pixelPaddingTop>10){state.properties.paddingTop=10}if(target.pixelPaddingBottom>10){state.properties.paddingBottom=10}return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXXS,state:function(target,stateId){if(target instanceof Chart){var state=target.states.create(stateId);state.properties.paddingLeft=0;state.properties.paddingRight=0;return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(target,stateId){if(target instanceof Chart){var state=target.states.create(stateId);state.properties.paddingTop=0;state.properties.paddingBottom=0;return state}return null}});var Bullet=function(_super){__extends(Bullet,_super);function Bullet(){var _this=_super.call(this)||this;_this.className="Bullet";_this.isMeasured=false;_this.tooltipX=0;_this.tooltipY=0;_this.layout="none";_this.applyOnClones=true;_this.copyToLegendMarker=true;_this.applyTheme();return _this}Object.defineProperty(Bullet.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(value){if(this.setPropertyValue("locationX",value)){var dataItem=this.dataItem;if(dataItem&&dataItem.component){dataItem.component.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(Bullet.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(value){if(this.setPropertyValue("locationY",value)){var dataItem=this.dataItem;if(dataItem&&dataItem.component){dataItem.component.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(Bullet.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(value){this.setPropertyValue("xField",value,true)},enumerable:true,configurable:true});Object.defineProperty(Bullet.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(value){this.setPropertyValue("yField",value,true)},enumerable:true,configurable:true});Object.defineProperty(Bullet.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(value){this.setPropertyValue("isDynamic",value,true)},enumerable:true,configurable:true});Object.defineProperty(Bullet.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(value){this.setPropertyValue("copyToLegendMarker",value)},enumerable:true,configurable:true});return Bullet}(Container);registry.registeredClasses["Bullet"]=Bullet;defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(target,stateId){if(target instanceof Bullet){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var LegendDataItem=function(_super){__extends(LegendDataItem,_super);function LegendDataItem(){var _this=_super.call(this)||this;_this.childrenCreated=false;_this.className="LegendDataItem";_this.applyTheme();return _this}Object.defineProperty(LegendDataItem.prototype,"label",{get:function(){var _this=this;if(!this._label){var label_1=this.component.labels.create();this._label=label_1;this.addSprite(label_1);this._disposers.push(label_1);label_1.parent=this.itemContainer;this._disposers.push(new Disposer((function(){if(hasValue(_this.component)){_this.component.labels.removeValue(label_1)}})))}return this._label},enumerable:true,configurable:true});Object.defineProperty(LegendDataItem.prototype,"color",{get:function(){return this.properties.color},set:function(value){this.setProperty("color",value)},enumerable:true,configurable:true});Object.defineProperty(LegendDataItem.prototype,"valueLabel",{get:function(){var _this=this;if(!this._valueLabel){var valueLabel_1=this.component.valueLabels.create();this._valueLabel=valueLabel_1;this.addSprite(valueLabel_1);this._disposers.push(valueLabel_1);valueLabel_1.parent=this.itemContainer;this._disposers.push(new Disposer((function(){if(hasValue(_this.component)){_this.component.valueLabels.removeValue(valueLabel_1)}})))}return this._valueLabel},enumerable:true,configurable:true});Object.defineProperty(LegendDataItem.prototype,"itemContainer",{get:function(){var _this=this;if(!this._itemContainer){var component_1=this.component;var itemContainer_1=component_1.itemContainers.create();itemContainer_1.parent=component_1;this._itemContainer=itemContainer_1;this.addSprite(itemContainer_1);this._disposers.push(itemContainer_1);if(itemContainer_1.togglable){itemContainer_1.events.on("toggled",(function(ev){component_1.toggleDataItem(ev.target.dataItem)}),undefined,false)}if(itemContainer_1.focusable){itemContainer_1.events.on("hit",(function(ev){component_1.focusedItem=undefined}),undefined,false);itemContainer_1.events.on("focus",(function(ev){component_1.focusedItem=ev.target.dataItem}),undefined,false);itemContainer_1.events.on("blur",(function(ev){component_1.focusedItem=undefined}),undefined,false)}this._disposers.push(new Disposer((function(){if(hasValue(_this.component)){_this.component.itemContainers.removeValue(itemContainer_1)}})));if(this.dataContext.uidAttr){itemContainer_1.readerControls=this.dataContext.uidAttr();itemContainer_1.readerLabelledBy=this.dataContext.uidAttr()}var sprite=this.dataContext;if((sprite instanceof DataItem||sprite instanceof Sprite)&&!sprite.isDisposed()){var visibilitychanged=function(ev){itemContainer_1.readerChecked=ev.visible;itemContainer_1.events.disableType("toggled");itemContainer_1.isActive=!ev.visible;itemContainer_1.events.enableType("toggled")};sprite.addDisposer(new Disposer((function(){if(_this.component){_this.component.dataItems.remove(_this)}})));if(sprite instanceof Sprite){itemContainer_1.addDisposer(sprite.events.on("visibilitychanged",visibilitychanged,undefined,false));itemContainer_1.addDisposer(sprite.events.on("hidden",(function(ev){itemContainer_1.readerChecked=false;itemContainer_1.events.disableType("toggled");itemContainer_1.isActive=true;itemContainer_1.events.enableType("toggled")}),undefined,false));itemContainer_1.addDisposer(sprite.events.on("shown",(function(ev){itemContainer_1.readerChecked=true;itemContainer_1.events.disableType("toggled");itemContainer_1.isActive=false;itemContainer_1.events.enableType("toggled")}),undefined,false))}else{itemContainer_1.addDisposer(sprite.events.on("visibilitychanged",visibilitychanged,undefined,false))}}}return this._itemContainer},enumerable:true,configurable:true});Object.defineProperty(LegendDataItem.prototype,"marker",{get:function(){var _this=this;if(!this._marker){var marker_1=this.component.markers.create();this._marker=marker_1;marker_1.parent=this.itemContainer;this.addSprite(marker_1);this._disposers.push(marker_1);this._disposers.push(new Disposer((function(){if(hasValue(_this.component)){_this.component.markers.removeValue(marker_1)}})))}return this._marker},enumerable:true,configurable:true});return LegendDataItem}(DataItem);var LegendSettings=function(){function LegendSettings(){this.createMarker=true}return LegendSettings}();var Legend=function(_super){__extends(Legend,_super);function Legend(){var _this=_super.call(this)||this;_this.className="Legend";_this.layout="grid";_this.setPropertyValue("useDefaultMarker",false);_this.setPropertyValue("scrollable",false);_this.setPropertyValue("contentAlign","center");var itemContainer=new Container;itemContainer.applyOnClones=true;itemContainer.padding(8,0,8,0);itemContainer.margin(0,10,0,10);itemContainer.layout="horizontal";itemContainer.clickable=true;itemContainer.focusable=true;itemContainer.role="switch";itemContainer.togglable=true;itemContainer.cursorOverStyle=MouseCursorStyle.pointer;itemContainer.background.fillOpacity=0;_this.itemContainers=new ListTemplate(itemContainer);_this._disposers.push(new ListDisposer(_this.itemContainers));_this._disposers.push(_this.itemContainers.template);_this._disposers.push(getInteraction().body.events.on("keyup",(function(ev){if(keyboard.isKey(ev.event,"enter")&&_this.focusedItem){var focusedItem=_this.focusedItem;var target=focusedItem.itemContainer;if(target.togglable){_this.toggleDataItem(focusedItem)}else if(target.clickable&&target.events.isEnabled("hit")){target.dispatchImmediately("hit",{event:ev});_this.focusedItem=focusedItem}}}),_this));var interfaceColors=new InterfaceColorSet;var marker=new Container;marker.width=23;marker.height=23;marker.interactionsEnabled=false;marker.applyOnClones=true;marker.setStateOnChildren=true;marker.background.fillOpacity=0;marker.background.strokeOpacity=0;marker.propertyFields.fill="fill";marker.valign="middle";var disabledColor=interfaceColors.getFor("disabledBackground");marker.events.on("childadded",(function(event){var child=event.newValue;var activeState=child.states.create("active");activeState.properties.stroke=disabledColor;activeState.properties.fill=disabledColor}));_this.markers=new ListTemplate(marker);_this._disposers.push(new ListDisposer(_this.markers));_this._disposers.push(_this.markers.template);var rectangle=marker.createChild(RoundedRectangle);rectangle.width=percent(100);rectangle.height=percent(100);rectangle.applyOnClones=true;rectangle.propertyFields.fill="fill";rectangle.strokeOpacity=0;var label=new Label;label.text="{name}";label.margin(0,5,0,5);label.valign="middle";label.applyOnClones=true;label.states.create("active").properties.fill=interfaceColors.getFor("disabledBackground");_this.labels=new ListTemplate(label);_this._disposers.push(new ListDisposer(_this.labels));_this._disposers.push(_this.labels.template);label.interactionsEnabled=false;label.truncate=true;label.fullWords=false;var valueLabel=new Label;valueLabel.margin(0,5,0,0);valueLabel.valign="middle";valueLabel.width=50;valueLabel.align="right";valueLabel.textAlign="end";valueLabel.applyOnClones=true;valueLabel.states.create("active").properties.fill=interfaceColors.getFor("disabledBackground");valueLabel.interactionsEnabled=false;_this.valueLabels=new ListTemplate(valueLabel);_this._disposers.push(new ListDisposer(_this.valueLabels));_this._disposers.push(_this.valueLabels.template);_this.position="bottom";itemContainer.states.create("active");itemContainer.setStateOnChildren=true;_this.role="group";_this.events.on("layoutvalidated",_this.handleScrollbar,_this,false);_this.applyTheme();return _this}Legend.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Legend")}};Legend.prototype.createDataItem=function(){return new LegendDataItem};Legend.prototype.validateDataElements=function(){if(this.scrollbar){this.scrollbar.start=0;this.scrollbar.end=1}_super.prototype.validateDataElements.call(this)};Legend.prototype.validateDataElement=function(dataItem){_super.prototype.validateDataElement.call(this,dataItem);var container=dataItem.itemContainer;var marker=dataItem.marker;var valueLabel=dataItem.valueLabel;container.readerChecked=dataItem.dataContext.visible;dataItem.dataContext.legendDataItem=dataItem;var tempMaxWidth=dataItem.label.maxWidth;if(!(dataItem.label.width instanceof Percent)){dataItem.label.width=undefined}if(tempMaxWidth>0){dataItem.label.maxWidth=tempMaxWidth}if(valueLabel.align=="right"){valueLabel.width=undefined}var legendSettings=dataItem.dataContext.legendSettings;var dataContext=dataItem.dataContext;if(dataContext.createLegendMarker&&(!this.useDefaultMarker||!(dataContext instanceof Sprite))){if(!dataItem.childrenCreated){dataContext.createLegendMarker(marker);dataItem.childrenCreated=true}}else{this.markers.template.propertyFields.fill=undefined}if(dataContext.updateLegendValue){dataContext.updateLegendValue()}if(dataContext.component&&dataContext.component.updateLegendValue){dataContext.component.updateLegendValue(dataContext)}if(valueLabel.invalid){valueLabel.validate()}if(valueLabel.text==""||valueLabel.text==undefined){valueLabel.__disabled=true}else{valueLabel.__disabled=false}if(legendSettings&&(legendSettings.itemValueText!=undefined||legendSettings.valueText!=undefined)){valueLabel.__disabled=false}var visible=dataItem.dataContext.visible;if(visible===undefined){visible=true}visible=toBoolean(visible);dataItem.dataContext.visible=visible;container.events.disableType("toggled");container.isActive=!visible;if(container.isActive){container.setState("active",0)}else{container.setState("default",0)}container.events.enableType("toggled")};Legend.prototype.afterDraw=function(){var _this=this;var maxWidth=this.getPropertyValue("maxWidth");var maxLabelWidth=0;this.labels.each((function(label){if(label.invalid){label.maxWidth=undefined;label.validate()}if(label.measuredWidth+label.pixelMarginLeft+label.pixelMarginRight>maxLabelWidth){maxLabelWidth=label.measuredWidth+label.pixelMarginLeft+label.pixelMarginRight}}));var maxValueLabelWidth=0;this.valueLabels.each((function(label){if(label.invalid){label.validate()}if(label.measuredWidth+label.pixelMarginLeft+label.pixelMarginRight>maxValueLabelWidth){maxValueLabelWidth=label.measuredWidth+label.pixelMarginLeft+label.pixelMarginRight}}));var maxMarkerWidth=0;this.markers.each((function(marker){if(marker.invalid){marker.validate()}if(marker.measuredWidth+marker.pixelMarginLeft+marker.pixelMarginRight>maxMarkerWidth){maxMarkerWidth=marker.measuredWidth+marker.pixelMarginLeft+marker.pixelMarginRight}}));var itemContainer=this.itemContainers.template;var margin=itemContainer.pixelMarginRight+itemContainer.pixelMarginLeft;var maxAdjustedLabelWidth;var trueMaxWidth=maxLabelWidth+maxValueLabelWidth+maxMarkerWidth;if(!isNumber$1(maxWidth)){maxAdjustedLabelWidth=maxLabelWidth}else{maxWidth=maxWidth-margin;if(maxWidth>trueMaxWidth){maxWidth=trueMaxWidth}maxAdjustedLabelWidth=maxWidth-maxMarkerWidth-maxValueLabelWidth}this.labels.each((function(label){if(_this.valueLabels.template.align=="right"||label.measuredWidth>maxAdjustedLabelWidth){if(!(label.width instanceof Percent)){label.width=Math.min(label.maxWidth,maxAdjustedLabelWidth-label.pixelMarginLeft-label.pixelMarginRight);label.maxWidth=label.width}}}));if(this.valueLabels.template.align=="right"){this.valueLabels.each((function(valueLabel){valueLabel.width=maxValueLabelWidth-valueLabel.pixelMarginRight-valueLabel.pixelMarginLeft}))}_super.prototype.afterDraw.call(this)};Legend.prototype.handleScrollbar=function(){var scrollbar=this.scrollbar;if(this.scrollable&&scrollbar){scrollbar.height=this.measuredHeight;scrollbar.x=this.measuredWidth-scrollbar.pixelWidth-scrollbar.pixelMarginLeft;if(this.contentHeight>this.measuredHeight){scrollbar.visible=true;scrollbar.thumb.height=scrollbar.height*this.measuredHeight/this.contentHeight;this.paddingRight=scrollbar.pixelWidth+scrollbar.pixelMarginLeft+ +scrollbar.pixelMarginRight}else{scrollbar.visible=false}scrollbar.handleThumbPosition();this.updateMasks()}};Object.defineProperty(Legend.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(value){if(this.setPropertyValue("position",value)){if(value=="left"||value=="right"){this.margin(10,5,10,10);this.valign="middle";this.contentAlign="none";this.valueLabels.template.align="right";if(!isNumber$1(this.maxColumns)){this.maxColumns=1}this.width=undefined;this.maxWidth=220}else{this.maxColumns=undefined;this.width=percent(100);this.valueLabels.template.align="left"}this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(Legend.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(value){this.setPropertyValue("useDefaultMarker",value,true)},enumerable:true,configurable:true});Object.defineProperty(Legend.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(value){if(this.setPropertyValue("scrollable",value,true)){if(value){var scrollbar=this.createChild(Scrollbar);this.scrollbar=scrollbar;scrollbar.isMeasured=false;scrollbar.orientation="vertical";scrollbar.endGrip.__disabled=true;scrollbar.startGrip.__disabled=true;scrollbar.visible=false;scrollbar.marginLeft=5;this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,false);this._disposers.push(this._mouseWheelDisposer);this._disposers.push(scrollbar.events.on("rangechanged",this.updateMasks,this,false))}else{if(this._mouseWheelDisposer){this._mouseWheelDisposer.dispose();if(this.scrollbar){this.scrollbar.dispose();this.scrollbar=undefined}}}}},enumerable:true,configurable:true});Legend.prototype.handleWheel=function(event){var shift=event.shift.y;var scrollbar=this.scrollbar;if(scrollbar){var ds=shift/1e3*this.measuredHeight/this.contentHeight;var delta=scrollbar.end-scrollbar.start;if(shift>0){scrollbar.start=max$2(0,scrollbar.start-ds);scrollbar.end=scrollbar.start+delta}else{scrollbar.end=min$2(1,scrollbar.end-ds);scrollbar.start=scrollbar.end-delta}}};Legend.prototype.updateMasks=function(){var _this=this;if(this.scrollbar){this.itemContainers.each((function(itemContainer){itemContainer.dy=-_this.scrollbar.thumb.pixelY*_this.contentHeight/_this.measuredHeight;itemContainer.maskRectangle={x:0,y:-itemContainer.dy,width:_this.measuredWidth,height:_this.measuredHeight}}))}};Legend.prototype.toggleDataItem=function(item){var dataContext=item.dataContext;if(!dataContext.visible||dataContext.isHiding||dataContext instanceof Sprite&&dataContext.isHidden){item.color=item.colorOrig;dataContext.appeared=true;item.itemContainer.isActive=false;if(dataContext.hidden===true){dataContext.hidden=false}if(dataContext.show){dataContext.show()}else{dataContext.visible=true}this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,item.label.readerTitle))}else{item.itemContainer.isActive=true;dataContext.appeared=true;if(dataContext.hide){dataContext.hide()}else{dataContext.visible=false}this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,item.label.readerTitle));item.color=(new InterfaceColorSet).getFor("disabledBackground")}};Object.defineProperty(Legend.prototype,"preloader",{get:function(){return},enumerable:true,configurable:true});Legend.prototype.handleDataItemPropertyChange=function(dataItem,name){dataItem.valueLabel.invalidate();dataItem.label.invalidate()};return Legend}(Component);registry.registeredClasses["Legend"]=Legend;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(target,stateId){if(target instanceof Legend&&(target.position=="left"||target.position=="right")){var state=target.states.create(stateId);state.properties.position="bottom";return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(target,stateId){if(target instanceof Legend&&(target.position=="top"||target.position=="bottom")){var state=target.states.create(stateId);state.properties.position="right";return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(target,stateId){if(target instanceof Legend){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var SeriesDataItem=function(_super){__extends(SeriesDataItem,_super);function SeriesDataItem(){var _this=_super.call(this)||this;_this.className="SeriesDataItem";_this.values.value={};_this.values.value={};_this.applyTheme();return _this}Object.defineProperty(SeriesDataItem.prototype,"bullets",{get:function(){if(!this._bullets){this._bullets=new Dictionary;this._disposers.push(new DictionaryDisposer(this._bullets))}return this._bullets},enumerable:true,configurable:true});SeriesDataItem.prototype.dispose=function(){this.bullets.clear();_super.prototype.dispose.call(this)};Object.defineProperty(SeriesDataItem.prototype,"value",{get:function(){return this.values.value.value},set:function(value){this.setValue("value",value)},enumerable:true,configurable:true});return SeriesDataItem}(DataItem);var Series=function(_super){__extends(Series,_super);function Series(){var _this=_super.call(this)||this;_this._ignoreMinMax=false;_this._showBullets=true;_this.legendSettings=new LegendSettings;_this._tmin=new Dictionary;_this._tmax=new Dictionary;_this._smin=new Dictionary;_this._smax=new Dictionary;_this.dataItemsByAxis=new Dictionary;_this.skipFocusThreshold=20;_this._itemReaderTextChanged=false;_this.calculatePercent=false;_this.usePercentHack=true;_this.autoDispose=true;_this.simplifiedProcessing=false;if(_this.constructor===Series){throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.")}_this.className="Series";_this.isMeasured=false;_this.layout="none";_this.shouldClone=false;_this.setPropertyValue("hidden",false);_this.axisRanges=new List;_this.axisRanges.events.on("inserted",_this.processAxisRange,_this,false);_this.minBulletDistance=0;_this.mainContainer=_this.createChild(Container);_this.mainContainer.shouldClone=false;_this.mainContainer.mask=_this.createChild(Sprite);_this._disposers.push(_this.mainContainer);var bulletsContainer=_this.mainContainer.createChild(Container);_this._shouldBeReady.push(bulletsContainer);bulletsContainer.shouldClone=false;bulletsContainer.layout="none";bulletsContainer.virtualParent=_this;_this._disposers.push(bulletsContainer);_this.bulletsContainer=bulletsContainer;_this.tooltip=new Tooltip;_this.tooltip.virtualParent=_this;_this._disposers.push(_this.tooltip);_this.hiddenState.transitionEasing=cubicIn;_this.dataItem=_this.createDataItem();_this._disposers.push(_this.dataItem);_this.dataItem.component=_this;_this.role="group";_this.applyTheme();return _this}Series.prototype.applyTheme=function(){_super.prototype.applyTheme.call(this)};Series.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Series")}};Series.prototype.createDataItem=function(){return new SeriesDataItem};Object.defineProperty(Series.prototype,"chart",{get:function(){return this._chart},set:function(value){this._chart=value},enumerable:true,configurable:true});Series.prototype.positionBullet=function(bullet){};Series.prototype.processBullet=function(event){var _this=this;var bullet=event.newValue;bullet.isTemplate=true;this.events.once("datavalidated",(function(ev){if(_this.itemsFocusable()){bullet.focusable=true}}));this.invalidate()};Series.prototype.removeBullet=function(event){var bullet=event.oldValue;this.dataItems.each((function(dataItem){var eachBullet=dataItem.bullets.getKey(bullet.uid);if(eachBullet){eachBullet.dispose()}}));this.invalidate()};Series.prototype.validateDataItems=function(){_super.prototype.validateDataItems.call(this);this.processValues(false)};Series.prototype.getFirstValue=function(key,startIndex){for(var i=startIndex;i>=0;i--){var dataItem=this.dataItems.getIndex(i);var value=dataItem.getActualWorkingValue(key);if(isNumber$1(value)){return value}}return null};Series.prototype.getAbsoluteFirstValue=function(key){for(var i=0;i<this.dataItems.length;i++){var dataItem=this.dataItems.getIndex(i);var value=dataItem.values[key].value;if(isNumber$1(value)){return value}}return null};Series.prototype.rangeChangeUpdate=function(){_super.prototype.rangeChangeUpdate.call(this);this.processValues(true)};Series.prototype.processValues=function(working){var _this=this;if(!this.simplifiedProcessing){var dataItems=this.dataItems;var count_1={};var sum_1={};var absoluteSum_1={};var low_1={};var high_1={};var open_1={};var close_1={};var previous_1={};var first_1={};var absoluteFirst_1={};var startIndex_1=max$2(0,this.startIndex);startIndex_1=min$2(startIndex_1,this.dataItems.length);var endIndex=min$2(this.endIndex,this.dataItems.length);if(!isNumber$1(startIndex_1)){startIndex_1=0}if(!isNumber$1(endIndex)){endIndex=this.dataItems.length}if(startIndex_1>0){var dataItem_1=dataItems.getIndex(startIndex_1-1);each$1(dataItem_1.values,(function(key,values){var value=dataItem_1.getActualWorkingValue(key);if(isNumber$1(value)){previous_1[key]=value}}))}var _loop_1=function(i){var dataItem_2=dataItems.getIndex(i);each$1(dataItem_2.values,(function(key,values){var value=dataItem_2.getActualWorkingValue(key);if(isNumber$1(value)){if(!isNumber$1(count_1[key])){count_1[key]=0}count_1[key]++;if(!isNumber$1(sum_1[key])){sum_1[key]=0}sum_1[key]+=value;if(!isNumber$1(absoluteSum_1[key])){absoluteSum_1[key]=0}absoluteSum_1[key]+=Math.abs(value);if(!isNumber$1(open_1[key])){open_1[key]=value}close_1[key]=value;if(!isNumber$1(low_1[key])){low_1[key]=value}else{if(low_1[key]>value){low_1[key]=value}}if(!isNumber$1(high_1[key])){high_1[key]=value}else{if(high_1[key]<value){high_1[key]=value}}if(!isNumber$1(first_1[key])){first_1[key]=_this.getFirstValue(key,startIndex_1)}if(!isNumber$1(absoluteFirst_1[key])){absoluteFirst_1[key]=_this.getAbsoluteFirstValue(key)}dataItem_2.setCalculatedValue(key,value-first_1[key],"change");dataItem_2.setCalculatedValue(key,(value-first_1[key])/first_1[key]*100,"changePercent");dataItem_2.setCalculatedValue(key,value-absoluteFirst_1[key],"startChange");dataItem_2.setCalculatedValue(key,(value-absoluteFirst_1[key])/absoluteFirst_1[key]*100,"startChangePercent");var prevValue=previous_1[key];if(!isNumber$1(prevValue)){prevValue=value}dataItem_2.setCalculatedValue(key,value-prevValue,"previousChange");dataItem_2.setCalculatedValue(key,(value-prevValue)/prevValue*100,"previousChangePercent");previous_1[key]=value}}))};for(var i=startIndex_1;i<endIndex;i++){_loop_1(i)}if(this.calculatePercent){var _loop_2=function(i){var dataItem_3=dataItems.getIndex(i);each$1(dataItem_3.values,(function(key){var ksum=absoluteSum_1[key];var value=dataItem_3.getActualWorkingValue(key);if(isNumber$1(value)){if(ksum>0){if(_this.usePercentHack){if(value==ksum){ksum=dataItem_3.values[key].value}}var percent=value/ksum*100;dataItem_3.setCalculatedValue(key,percent,"percent")}else{dataItem_3.setCalculatedValue(key,0,"percent")}}}))};for(var i=startIndex_1;i<endIndex;i++){_loop_2(i)}}if(startIndex_1>0){var zeroItem_1=dataItems.getIndex(startIndex_1-1);each$1(zeroItem_1.values,(function(key){var value=zeroItem_1.values[key].value;zeroItem_1.setCalculatedValue(key,value-open_1[key],"change");zeroItem_1.setCalculatedValue(key,(value-open_1[key])/open_1[key]*100,"changePercent")}))}var dataItem_4=this.dataItem;each$1(dataItem_4.values,(function(key){dataItem_4.setCalculatedValue(key,sum_1[key],"sum");dataItem_4.setCalculatedValue(key,absoluteSum_1[key],"absoluteSum");dataItem_4.setCalculatedValue(key,sum_1[key]/count_1[key],"average");dataItem_4.setCalculatedValue(key,open_1[key],"open");dataItem_4.setCalculatedValue(key,close_1[key],"close");dataItem_4.setCalculatedValue(key,low_1[key],"low");dataItem_4.setCalculatedValue(key,high_1[key],"high");dataItem_4.setCalculatedValue(key,count_1[key],"count")}))}};Series.prototype.validate=function(){if(isIE()){this.filters.clear()}each(this.axisRanges.iterator(),(function(axisRange){axisRange.validate()}));_super.prototype.validate.call(this);var bulletsContainer=this.bulletsContainer;bulletsContainer.fill=this.fill;bulletsContainer.stroke=this.stroke;bulletsContainer.x=this.pixelX;bulletsContainer.y=this.pixelY;if(this.bulletsContainer.children.length>0){if(this._showBullets){for(var i=0;i<this.startIndex;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem){dataItem.bullets.each((function(key,bullet){bullet.__disabled=true}))}}for(var i=this.dataItems.length-1;i>this.endIndex;i--){var dataItem=this.dataItems.getIndex(i);if(dataItem){dataItem.bullets.each((function(key,bullet){bullet.__disabled=true}))}}}else{this.bulletsContainer.children.each((function(bullet){bullet.__disabled=true}))}}this.updateTooltipBounds()};Series.prototype.updateTooltipBounds=function(){if(this.topParent){var x=0;var y=0;var w=this.topParent.maxWidth;var h=this.topParent.maxHeight;var rect={x,y,width:w,height:h};this.tooltip.setBounds(rect)}};Series.prototype.shouldCreateBullet=function(dataItem,bulletTemplate){return true};Series.prototype.validateDataElement=function(dataItem){var _this=this;_super.prototype.validateDataElement.call(this,dataItem);if(this._showBullets){if(!this.isHidden){this.bulletsContainer.visible=true}this.bullets.each((function(bulletTemplate){var bullet=dataItem.bullets.getKey(bulletTemplate.uid);if(_this.shouldCreateBullet(dataItem,bulletTemplate)){if(!bullet){var disabledField=bulletTemplate.propertyFields.disabled;var dataContext=dataItem.dataContext;if(disabledField&&dataContext&&dataContext[disabledField]===false){bulletTemplate.applyOnClones=false;bulletTemplate.disabled=false;bullet=bulletTemplate.clone();bulletTemplate.disabled=true;bulletTemplate.applyOnClones=true}else{bullet=bulletTemplate.clone()}bullet.shouldClone=false;dataItem.addSprite(bullet);if(!_this.visible||_this.isHiding){bullet.hide(0)}}var currentDataItem=bullet.dataItem;if(currentDataItem!=dataItem){if(currentDataItem){currentDataItem.bullets.setKey(bulletTemplate.uid,undefined)}var readerText_1=_this.itemReaderText;if(bullet instanceof Bullet){if(!readerText_1){readerText_1="{"+bullet.xField+"}: {"+bullet.yField+"}"}if(bullet.isDynamic){dataItem.events.on("workingvaluechanged",bullet.deepInvalidate,bullet,false);_this.dataItem.events.on("workingvaluechanged",bullet.deepInvalidate,bullet,false)}bullet.deepInvalidate()}if(bullet.focusable){bullet.events.on("focus",(function(ev){bullet.readerTitle=_this.populateString(readerText_1,bullet.dataItem)}),undefined,false);bullet.events.on("blur",(function(ev){bullet.readerTitle=""}),undefined,false)}if(bullet.hoverable){bullet.events.on("over",(function(ev){bullet.readerTitle=_this.populateString(readerText_1,bullet.dataItem)}),undefined,false);bullet.events.on("out",(function(ev){bullet.readerTitle=""}),undefined,false)}}bullet.parent=_this.bulletsContainer;dataItem.bullets.setKey(bulletTemplate.uid,bullet);bullet.maxWidth=dataItem.itemWidth;bullet.maxHeight=dataItem.itemHeight;bullet.__disabled=false;_this.positionBullet(bullet)}else{if(bullet){bullet.__disabled=true}}}))}else{this.bulletsContainer.visible=false}};Series.prototype.handleDataItemWorkingValueChange=function(dataItem,name){if(!this.dataRangeInvalid){this.invalidateProcessedData()}};Object.defineProperty(Series.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(value){this._ignoreMinMax=value;this.invalidateDataItems()},enumerable:true,configurable:true});Series.prototype.createMask=function(){};Series.prototype.processAxisRange=function(event){if(!this.rangesContainer){this.rangesContainer=this.createChild(Container);this.rangesContainer.shouldClone=false;this.rangesContainer.isMeasured=false}var axisRange=event.newValue;if(axisRange){axisRange.contents.parent=this.rangesContainer;axisRange.isRange=true;axisRange.events.on("valuechanged",this.invalidateDataItems,this,false)}};Series.prototype.getAxisField=function(axis){return};Series.prototype.showTooltipAtPosition=function(xPosition,yPosition){};Object.defineProperty(Series.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(value){this.setPropertyValue("minBulletDistance",value,true)},enumerable:true,configurable:true});Object.defineProperty(Series.prototype,"bullets",{get:function(){if(!this._bullets){this._bullets=new ListTemplate(new Bullet);this._bullets.template.virtualParent=this;this._bullets.events.on("inserted",this.processBullet,this,false);this._bullets.events.on("removed",this.removeBullet,this,false);this._disposers.push(new ListDisposer(this._bullets));this._disposers.push(this._bullets.template)}return this._bullets},enumerable:true,configurable:true});Series.prototype.createLegendMarker=function(marker){};Object.defineProperty(Series.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(value){if(this.setPropertyValue("hiddenInLegend",value)){if(this.chart){this.chart.feedLegend()}}},enumerable:true,configurable:true});Object.defineProperty(Series.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(value){this.setPropertyValue("name",value);var legendDataItem=this.legendDataItem;if(legendDataItem){legendDataItem.component.invalidate();legendDataItem.component.invalidateRawData()}this.readerTitle=value},enumerable:true,configurable:true});Object.defineProperty(Series.prototype,"itemReaderText",{get:function(){var readerText=this._itemReaderText;if(!readerText){if(this.tooltipText){readerText=plainText(this.tooltipText)}else if(this.tooltipHTML){readerText=plainText(this.tooltipHTML)}}if(!this._adapterO){return readerText}else{return this._adapterO.apply("itemReaderText",readerText)}},set:function(value){this._itemReaderText=value;this._itemReaderTextChanged=true},enumerable:true,configurable:true});Series.prototype.itemsFocusable=function(){return this.dataItems.length>=this.skipFocusThreshold?false:true};Object.defineProperty(Series.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(value){this._legendDataItem=value;this._legendDataItem.itemContainer.deepInvalidate()},enumerable:true,configurable:true});Series.prototype.updateLegendValue=function(dataItem,notRange){if(this.legendDataItem){var legendSettings=this.legendSettings;var legendDataItem=this.legendDataItem;var label=legendDataItem.label;var valueLabel=legendDataItem.valueLabel;if(dataItem&&!dataItem.isDisposed()||notRange){if(valueLabel){if(legendSettings.itemValueText){valueLabel.text=legendSettings.itemValueText}valueLabel.dataItem=dataItem}if(label){if(legendSettings.itemLabelText){label.text=legendSettings.itemLabelText}label.dataItem=dataItem}}else{if(label){if(legendSettings.labelText||legendSettings.itemLabelText!=undefined){label.text=legendSettings.labelText}label.dataItem=this.dataItem}if(valueLabel){if(legendSettings.valueText||legendSettings.itemValueText!=undefined){valueLabel.text=legendSettings.valueText}valueLabel.dataItem=this.dataItem}}}};Series.prototype.copyFrom=function(source){this.bullets.copyFrom(source.bullets);this.bulletsContainer.copyFrom(source.bulletsContainer);this.calculatePercent=source.calculatePercent;this.usePercentHack=source.usePercentHack;this.simplifiedProcessing=source.simplifiedProcessing;_super.prototype.copyFrom.call(this,source)};Series.prototype.raiseCriticalError=function(e){if(this._chart&&this._chart.modal){this._chart.modal.content=this._chart.adapter.apply("criticalError",e).message;this._chart.modal.closable=false;{this._chart.modal.open()}this._chart.disabled=true}{console.log(e)}};Series.prototype.applyFilters=function(){var _this=this;_super.prototype.applyFilters.call(this);this.bulletsContainer.filters.clear();each(this.filters.iterator(),(function(filter){_this.bulletsContainer.filters.push(filter.clone())}))};Object.defineProperty(Series.prototype,"heatRules",{get:function(){var _this=this;if(!this._heatRules){this._heatRules=new List;this._heatRules.events.on("inserted",(function(event){var heatRule=event.newValue;var target=heatRule.target;if(target){var dataField_1=heatRule.dataField;if(!hasValue(dataField_1)){dataField_1="value"}var seriesDataItem_1=_this.dataItem;var property_1=heatRule.property;var minValue=toNumber$1(heatRule.minValue);var maxValue=toNumber$1(heatRule.maxValue);if(!isNumber$1(minValue)&&!isNumber$1(maxValue)){_this.dataItem.events.on("calculatedvaluechanged",(function(event){if(event.property==dataField_1){each(_this.dataItems.iterator(),(function(dataItem){var foundSprite=false;each$2(dataItem.sprites,(function(sprite){if(sprite.clonedFrom==target){var anySprite=sprite;anySprite[property_1]=anySprite[property_1];foundSprite=true}}));if(!foundSprite){each$2(dataItem.sprites,(function(sprite){if(sprite instanceof Container){each(sprite.children.iterator(),(function(child){if(child.className==target.className){var anyChild=child;anyChild[property_1]=anyChild[property_1]}else if(child instanceof Container){child.deepInvalidate()}}))}}))}}))}}))}_this.dataItems.template.events.on("workingvaluechanged",(function(event){if(event.property==dataField_1){var dataItem=event.target;var foundSprite_1=false;each$2(dataItem.sprites,(function(sprite){if(sprite.clonedFrom==target){var anySprite=sprite;anySprite[property_1]=anySprite[property_1];foundSprite_1=true}}));if(!foundSprite_1){each$2(dataItem.sprites,(function(sprite){if(sprite instanceof Container){each(sprite.children.iterator(),(function(child){if(child.className==target.className){var anyChild=child;anyChild[property_1]=anyChild[property_1]}else if(child instanceof Container){child.deepInvalidate()}}))}}))}}}));target.adapter.add(property_1,(function(value,ruleTarget,property){var minValue=toNumber$1(heatRule.minValue);var maxValue=toNumber$1(heatRule.maxValue);var min=heatRule.min;var max=heatRule.max;if(ruleTarget instanceof Sprite){var anySprite=ruleTarget;var propertyField=anySprite.propertyFields[property];if(propertyField&&ruleTarget.dataItem){var dataContext=ruleTarget.dataItem.dataContext;if(dataContext&&hasValue(dataContext[propertyField])){return value}}}var dataItem=ruleTarget.dataItem;if(!isNumber$1(minValue)){minValue=seriesDataItem_1.values[dataField_1].low}if(!isNumber$1(maxValue)){maxValue=seriesDataItem_1.values[dataField_1].high}if(dataItem){var fieldValues=dataItem.values[dataField_1];if(fieldValues){var workingValue=dataItem.getActualWorkingValue(dataField_1);if(hasValue(min)&&hasValue(max)&&isNumber$1(minValue)&&isNumber$1(maxValue)&&isNumber$1(workingValue)){var percent=void 0;if(heatRule.logarithmic){percent=(Math.log(workingValue)*Math.LOG10E-Math.log(minValue)*Math.LOG10E)/(Math.log(maxValue)*Math.LOG10E-Math.log(minValue)*Math.LOG10E)}else{percent=(workingValue-minValue)/(maxValue-minValue)}if(isNumber$1(workingValue)&&(!isNumber$1(percent)||Math.abs(percent)==Infinity)){percent=.5}if(isNumber$1(min)){return min+(max-min)*percent}else if(min instanceof Color){return new Color(interpolate(min.rgb,max.rgb,percent))}}}}return value}))}}))}return this._heatRules},enumerable:true,configurable:true});Series.prototype.processConfig=function(config){var heatRules;if(config){if(hasValue(config.bullets)&&isArray$6(config.bullets)){for(var i=0,len=config.bullets.length;i<len;i++){var bullets=config.bullets[i];if(!hasValue(bullets.type)){bullets.type="Bullet"}}}if(hasValue(config.heatRules)&&isArray$6(config.heatRules)){heatRules=config.heatRules;delete config.heatRules}}_super.prototype.processConfig.call(this,config);if(heatRules){for(var i=0,len=heatRules.length;i<len;i++){var rule=heatRules[i];var target=this;if(hasValue(rule.target)&&isString$1(rule.target)){if(this.map.hasKey(rule.target)){target=this.map.getKey(rule.target)}else{var parts=rule.target.split(".");for(var x=0;x<parts.length;x++){if(target instanceof List){var listitem=target.getIndex(toNumber$1(parts[x]));if(!listitem){target=target[parts[x]]}else{target=listitem}}else{var maybeIndex=parts[x].match(/^(.*)\[([0-9]+)\]/);if(maybeIndex){if(target[maybeIndex[1]]instanceof List){target=target[maybeIndex[1]].getIndex(toNumber$1(maybeIndex[2]))}else{target=target[maybeIndex[1]][toNumber$1(maybeIndex[2])]}}else{target=target[parts[x]]}}}}}rule.target=target;if(hasValue(rule.min)){rule.min=this.maybeColorOrPercent(rule.min)}if(hasValue(rule.max)){rule.max=this.maybeColorOrPercent(rule.max)}}_super.prototype.processConfig.call(this,{heatRules})}};Series.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="heatRules"){return 1}else if(b=="heatRules"){return-1}else{return _super.prototype.configOrder.call(this,a,b)}};Series.prototype.setVisibility=function(value){_super.prototype.setVisibility.call(this,value);this.bulletsContainer.visible=value};return Series}(Component);registry.registeredClasses["Series"]=Series;registry.registeredClasses["SeriesDataItem"]=SeriesDataItem;var SerialChartDataItem=function(_super){__extends(SerialChartDataItem,_super);function SerialChartDataItem(){var _this=_super.call(this)||this;_this.className="SerialChartDataItem";_this.applyTheme();return _this}return SerialChartDataItem}(ChartDataItem);var SerialChart=function(_super){__extends(SerialChart,_super);function SerialChart(){var _this=_super.call(this)||this;_this.className="SerialChart";_this.colors=new ColorSet;_this._usesData=false;var seriesContainer=_this.chartContainer.createChild(Container);seriesContainer.shouldClone=false;seriesContainer.width=percent(100);seriesContainer.height=percent(100);seriesContainer.isMeasured=false;seriesContainer.layout="none";seriesContainer.zIndex=2;_this.seriesContainer=seriesContainer;var bulletsContainer=_this.chartContainer.createChild(Container);bulletsContainer.shouldClone=false;bulletsContainer.width=percent(100);bulletsContainer.height=percent(100);bulletsContainer.isMeasured=false;bulletsContainer.zIndex=3;bulletsContainer.layout="none";_this.bulletsContainer=bulletsContainer;_this.applyTheme();return _this}SerialChart.prototype.dispose=function(){_super.prototype.dispose.call(this);if(this.colors){this.colors.dispose()}if(this.patterns){this.patterns.dispose()}};SerialChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Serial chart")}};Object.defineProperty(SerialChart.prototype,"series",{get:function(){if(!this._series){this._series=new ListTemplate(this.createSeries());this._series.events.on("inserted",this.handleSeriesAdded,this,false);this._series.events.on("removed",this.handleSeriesRemoved,this,false);this._disposers.push(new ListDisposer(this._series,false));this._disposers.push(this._series.template)}return this._series},enumerable:true,configurable:true});SerialChart.prototype.handleSeriesRemoved=function(event){var series=event.oldValue;this.dataUsers.removeValue(series);this.dataUsers.each((function(dataUser){dataUser.invalidateDataItems()}));if(series.autoDispose){series.dispose()}else{series.parent=undefined;series.bulletsContainer.parent=undefined}var legend=this.legend;if(legend){var dataItems=this.legend.dataItems;for(var i=dataItems.length-1;i>=0;i--){var dataItem=dataItems.getIndex(i);if(dataItem&&dataItem.dataContext==series){legend.dataItems.remove(dataItem)}}for(var i=legend.data.length-1;i>=0;i--){var di=legend.data[i];if(di&&di==series){remove(legend.data,di)}}}};SerialChart.prototype.handleSeriesAdded=function(event){var _this=this;var series=event.newValue;if(series.isDisposed()){return}series.chart=this;series.parent=this.seriesContainer;series.bulletsContainer.parent=this.bulletsContainer;this._dataUsers.moveValue(series);series.addDisposer(new Disposer((function(){_this.dataUsers.removeValue(series)})));this.handleSeriesAdded2(series);this.handleLegendSeriesAdded(series)};SerialChart.prototype.handleLegendSeriesAdded=function(series){if(!series.hiddenInLegend){if(this.legend){this.legend.addData(series)}}};SerialChart.prototype.handleSeriesAdded2=function(series){var _this=this;if(!this.dataInvalid){this._disposers.push(registry.events.once("exitframe",(function(){if(!series.data||series.data.length==0){series.data=_this.data;if(series.showOnInit){series.reinit();series.setPropertyValue("showOnInit",false);series.showOnInit=true}if(!series.isDisposed()){series.events.once("datavalidated",(function(){if(series.data==_this.data){series._data=[]}}))}}})))}};SerialChart.prototype.feedLegend=function(){var legend=this.legend;if(legend){var legendData_1=[];each(this.series.iterator(),(function(series){if(!series.hiddenInLegend){legendData_1.push(series)}}));legend.dataFields.name="name";legend.data=legendData_1}};SerialChart.prototype.createSeries=function(){return new Series};Object.defineProperty(SerialChart.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(value){this.setPropertyValue("colors",value,true)},enumerable:true,configurable:true});Object.defineProperty(SerialChart.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(value){this.setPropertyValue("patterns",value,true)},enumerable:true,configurable:true});SerialChart.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.series.copyFrom(source.series)};SerialChart.prototype.appear=function(){_super.prototype.appear.call(this);this.series.each((function(series){if(series.showOnInit&&series.inited){series.appear()}}))};return SerialChart}(Chart);registry.registeredClasses["SerialChart"]=SerialChart;var AxisBreak=function(_super){__extends(AxisBreak,_super);function AxisBreak(){var _this=_super.call(this)||this;_this._axis=new MutableValueDisposer;_this.dataItems=new List;_this.className="AxisBreak";_this.breakSize=.01;_this.marginLeft=-5;_this.marginRight=-5;_this.marginTop=-5;_this.marginBottom=-5;var interfaceColors=new InterfaceColorSet;var fillShape=new WavedLine;fillShape.fill=interfaceColors.getFor("background");fillShape.stroke=color();fillShape.fillOpacity=.9;fillShape.zIndex=0;_this._fillShape=fillShape;var startLine=new WavedLine;startLine.fill=color();startLine.stroke=interfaceColors.getFor("grid");startLine.strokeOpacity=.3;startLine.zIndex=1;_this._startLine=startLine;var endLine=new WavedLine;endLine.fill=color();endLine.stroke=color("#000000");endLine.strokeOpacity=.3;endLine.zIndex=2;_this._endLine=endLine;_this._disposers.push(_this._axis);_this.applyTheme();return _this}AxisBreak.prototype.dispose=function(){_super.prototype.dispose.call(this);if(this._fillShape){this._fillShape.dispose()}if(this._startLine){this._startLine.dispose()}if(this._endLine){this._endLine.dispose()}};Object.defineProperty(AxisBreak.prototype,"startLine",{get:function(){return this._startLine},set:function(sprite){if(this._startLine){this._startLine.dispose()}this._startLine=sprite;this.addBreakSprite(sprite)},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"endLine",{get:function(){return this._endLine},set:function(sprite){if(this._endLine){this._endLine.dispose()}this._endLine=sprite;this.addBreakSprite(sprite)},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"fillShape",{get:function(){return this._fillShape},set:function(sprite){if(this._fillShape){this._fillShape.dispose()}this._fillShape=sprite;this.addBreakSprite(sprite)},enumerable:true,configurable:true});AxisBreak.prototype.addBreakSprite=function(sprite){sprite.parent=this;sprite.isMeasured=false;this._disposers.push(sprite)};Object.defineProperty(AxisBreak.prototype,"axis",{get:function(){return this._axis.get()},set:function(axis){if(this._axis.get()!==axis){this._axis.set(axis,axis.renderer.gridContainer.events.on("transformed",this.invalidate,this,false));axis.renderer.createBreakSprites(this);var breakTemplate=axis.axisBreaks.template;this.startLine.copyFrom(breakTemplate.startLine);this.endLine.copyFrom(breakTemplate.endLine);this.fillShape.copyFrom(breakTemplate.fillShape)}},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(value){if(this.setPropertyValue("breakSize",value)){if(this.axis){this.axis.invalidate();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"startPoint",{get:function(){var renderer=this.axis.renderer;if(renderer){return renderer.positionToPoint(this.startPosition)}},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"endPoint",{get:function(){var renderer=this.axis.renderer;if(renderer){return renderer.positionToPoint(this.endPosition)}},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"startPosition",{get:function(){return},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"endPosition",{get:function(){return},enumerable:true,configurable:true});AxisBreak.prototype.draw=function(){_super.prototype.draw.call(this);if(this.axis){var renderer=this.axis.renderer;renderer.updateBreakElement(this)}};Object.defineProperty(AxisBreak.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(value){if(this.setPropertyValue("startValue",value)){if(this.axis){this.axis.invalidate();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(AxisBreak.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(value){if(this.setPropertyValue("endValue",value)){if(this.axis){this.axis.invalidate();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});return AxisBreak}(Container);registry.registeredClasses["AxisBreak"]=AxisBreak;var AxisDataItem=function(_super){__extends(AxisDataItem,_super);function AxisDataItem(){var _this=_super.call(this)||this;_this.className="AxisDataItem";_this.applyTheme();return _this}Object.defineProperty(AxisDataItem.prototype,"grid",{get:function(){if(!this._grid){var component_1=this.component;if(component_1){var template=void 0;var grid_1;if(this.isRange){template=component_1.axisRanges.template.grid;if(template.disabled){return}else{grid_1=template.clone()}}else{template=component_1.renderer.grid.template;if(template.disabled){return}else{grid_1=component_1.renderer.grid.create();this._disposers.push(new Disposer((function(){component_1.renderer.grid.removeValue(grid_1)})))}}this.grid=grid_1;grid_1.shouldClone=false;this._disposers.push(grid_1);grid_1.axis=this.component}}return this._grid},set:function(grid){if(this._grid&&this._grid!=grid){remove(this.sprites,this._grid);this._grid.dataItem=undefined}if(grid){if(grid.dataItem&&grid.dataItem!=this){remove(grid.dataItem.sprites,grid);grid.dataItem.grid=undefined}this.addSprite(grid)}this._grid=grid},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"tick",{get:function(){if(!this._tick){var component_2=this.component;if(component_2){var template=void 0;var tick_1;if(this.isRange){template=component_2.axisRanges.template.tick;if(template.disabled){return}else{tick_1=template.clone()}}else{template=component_2.renderer.ticks.template;if(template.disabled){return}else{tick_1=component_2.renderer.ticks.create();this._disposers.push(new Disposer((function(){component_2.renderer.ticks.removeValue(tick_1)})))}}this.tick=tick_1;tick_1.axis=this.component;tick_1.shouldClone=false;this._disposers.push(tick_1)}}return this._tick},set:function(tick){if(this._tick&&this._tick!=tick){remove(this.sprites,this._tick);this._tick.dataItem=undefined}if(tick){if(tick.dataItem&&tick.dataItem!=this){remove(tick.dataItem.sprites,tick);tick.dataItem.tick=undefined}this.addSprite(tick)}this._tick=tick},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"label",{get:function(){if(!this._label){var component_3=this.component;if(component_3){var template=void 0;var label_1;if(this.isRange){template=component_3.axisRanges.template.label;if(template.disabled){return}else{label_1=template.clone()}}else{template=component_3.renderer.labels.template;if(template.disabled){return}else{label_1=component_3.renderer.labels.create();this._disposers.push(new Disposer((function(){component_3.renderer.labels.removeValue(label_1)})))}}this._disposers.push(label_1);this.label=label_1;label_1.shouldClone=false;label_1.axis=this.component;label_1.virtualParent=component_3}}return this._label},set:function(label){if(this._label&&this._label!=label){remove(this.sprites,this._label);this._label.dataItem=undefined}if(label){if(label.dataItem&&label.dataItem!=this){remove(label.dataItem.sprites,label);label.dataItem.label=undefined}this.addSprite(label)}this._label=label},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"axisFill",{get:function(){if(!this._axisFill){var component_4=this.component;if(component_4){var template=void 0;var axisFill_1;if(this.isRange){template=component_4.axisRanges.template.axisFill;if(!this.isTemplate&&template.disabled){return}else{axisFill_1=template.clone()}}else{template=component_4.renderer.axisFills.template;if(template.disabled){return}else{axisFill_1=component_4.renderer.axisFills.create();this._disposers.push(new Disposer((function(){component_4.renderer.axisFills.removeValue(axisFill_1)})))}}this.axisFill=axisFill_1;axisFill_1.shouldClone=false;this._disposers.push(axisFill_1)}}return this._axisFill},set:function(axisFill){if(this._axisFill&&this._axisFill!=axisFill){remove(this.sprites,this._axisFill);this._axisFill.dataItem=undefined}if(axisFill){if(axisFill.dataItem&&axisFill.dataItem!=this){remove(axisFill.dataItem.sprites,axisFill);axisFill.dataItem.axisFill=undefined}axisFill.axis=this.component;this.addSprite(axisFill)}this._axisFill=axisFill},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"text",{get:function(){return this._text},set:function(text){this._text=text;if(this._label){this._label.text=text}},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"mask",{get:function(){return this._mask},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"contents",{get:function(){if(!this._contents){var contents=new Container;this.addSprite(contents);contents.isMeasured=false;this._contents=contents;var component=this.component;if(component){var mask=component.renderer.createFill(this.component);mask.disabled=false;mask.axis=component;this.addSprite(mask);this._mask=mask;contents.mask=mask}}return this._contents},enumerable:true,configurable:true});Object.defineProperty(AxisDataItem.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(axisBreak){if(this._axisBreak){this._axisBreak.dataItems.removeValue(this)}if(axisBreak){axisBreak.dataItems.push(this)}this._axisBreak=axisBreak},enumerable:true,configurable:true});AxisDataItem.prototype.validate=function(){if(this.component){this.component.validateDataElement(this)}};AxisDataItem.prototype.appendChildren=function(){if(this.component){this.component.appendDataItem(this)}};AxisDataItem.prototype.hasProperty=function(prop){return prop=="component"?true:_super.prototype.hasProperty.call(this,prop)};AxisDataItem.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.text=source.text;if(source.bullet){this.bullet=source.bullet.clone()}this.minPosition=source.minPosition;this.maxPosition=source.maxPosition};AxisDataItem.prototype.setVisibility=function(value,noChangeValues){_super.prototype.setVisibility.call(this,value,noChangeValues);if(this._contents){this._contents.visible=value}};Object.defineProperty(AxisDataItem.prototype,"bullet",{get:function(){return this._bullet},set:function(value){if(this._bullet&&this._bullet!=value){remove(this.sprites,this._bullet);this._bullet.dataItem=undefined}this._bullet=value;if(value){this.addSprite(value)}},enumerable:true,configurable:true});return AxisDataItem}(DataItem);var AxisItemLocation;(function(AxisItemLocation){AxisItemLocation[AxisItemLocation["Start"]=0]="Start";AxisItemLocation[AxisItemLocation["Middle"]=.5]="Middle";AxisItemLocation[AxisItemLocation["End"]=1]="End"})(AxisItemLocation||(AxisItemLocation={}));var Axis=function(_super){__extends(Axis,_super);function Axis(){var _this=_super.call(this)||this;_this._gridCount=10;_this._series=new List;_this.autoDispose=true;_this._axisItemCount=0;if(_this.constructor===Axis){throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.")}_this.hideTooltipWhileZooming=true;_this.minWidth=1e-4;_this.minHeight=1e-4;_this.className="Axis";_this.shouldClone=false;_this.setPropertyValue("cursorTooltipEnabled",true);_this.toggleZoomOutButton=true;_this.zoomable=true;var interfaceColors=new InterfaceColorSet;_this.title=new Label;_this.title.shouldClone=false;_this._disposers.push(_this.title);_this.setPropertyValue("startLocation",0);_this.setPropertyValue("endLocation",1);_this._dataItemsIterator=new ListIterator(_this.dataItems,(function(){return _this.dataItems.create()}));_this._dataItemsIterator.createNewItems=true;var tooltip=new Tooltip;_this._disposers.push(tooltip);tooltip.label.padding(5,10,5,10);tooltip.background.pointerLength=5;tooltip.fitPointerToBounds=true;tooltip.background.filters.clear();tooltip.virtualParent=_this;var background=tooltip.background;background.cornerRadius=0;background.fill=interfaceColors.getFor("alternativeBackground");background.stroke=background.fill;background.strokeWidth=1;background.fillOpacity=1;tooltip.label.fill=interfaceColors.getFor("alternativeText");_this.tooltip=tooltip;_this.readerHidden=true;_this.events.on("rangechangestarted",(function(){_this.series.each((function(series){if(series.hideTooltipWhileZooming){series.tooltip.hide();series.tooltip.preventShow=true}}));if(_this.hideTooltipWhileZooming){_this.tooltip.hide();_this.tooltip.preventShow=true}}),undefined,false);_this.events.on("rangechangeended",(function(){_this.series.each((function(series){if(series.hideTooltipWhileZooming){series.tooltip.hide();series.tooltip.preventShow=false}}));if(_this.hideTooltipWhileZooming){_this.tooltip.hide();_this.tooltip.preventShow=false}}),undefined,false);_this.applyTheme();return _this}Axis.prototype.fillRule=function(dataItem,index){if(!isNumber$1(index)){index=dataItem.index}if(index/2==Math.round(index/2)){dataItem.axisFill.__disabled=true;dataItem.axisFill.opacity=0}else{dataItem.axisFill.opacity=1;dataItem.axisFill.__disabled=false}};Axis.prototype.createDataItem=function(){return new AxisDataItem};Axis.prototype.invalidateLayout=function(){_super.prototype.invalidateLayout.call(this);each(this.series.iterator(),(function(series){series.invalidateLayout()}))};Axis.prototype.invalidateSeries=function(){each(this.series.iterator(),(function(series){series.invalidate()}))};Axis.prototype.validateDataElements=function(){this._axisItemCount=0;if(this.ghostLabel){this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end);this.ghostLabel.validate()}};Axis.prototype.updateGridCount=function(){if(this.renderer){var gridCount=this.axisLength/this.renderer.minGridDistance;if(gridCount!=this._gridCount){this._gridCount=gridCount;this.clearCache()}}};Axis.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start);_super.prototype.validateLayout.call(this);this.updateGridCount();var renderer=this.renderer;if(renderer){renderer.updateAxisLine();renderer.updateTooltip();renderer.updateBaseGridElement()}if(this._prevLength!=this.axisLength){this.dispatchImmediately("lengthchanged");this._prevLength=this.axisLength}};Axis.prototype.initRenderer=function(){};Axis.prototype.appendDataItem=function(dataItem){var renderer=this.renderer;var tick=dataItem.tick;if(tick){if(tick.above){tick.parent=renderer.bulletsContainer}else{tick.parent=renderer.gridContainer}}if(dataItem.label){dataItem.label.parent=renderer}var axisFill=dataItem.axisFill;if(axisFill){if(axisFill.above){axisFill.parent=renderer.bulletsContainer}else{axisFill.parent=renderer.gridContainer}}var grid=dataItem.grid;if(grid){if(grid.above){grid.parent=renderer.bulletsContainer}else{grid.parent=renderer.gridContainer}}if(dataItem.bullet){dataItem.bullet.parent=renderer.bulletsContainer}};Axis.prototype.validate=function(){_super.prototype.validate.call(this);this.validateLayout();this.renderer.updateGridContainer()};Axis.prototype.validateAxisRanges=function(){var _this=this;each(this.axisRanges.iterator(),(function(axisRange){_this.appendDataItem(axisRange);_this.validateDataElement(axisRange);if(axisRange.grid){axisRange.grid.validate()}if(axisRange.tick){axisRange.tick.validate()}if(axisRange.axisFill){axisRange.axisFill.validate()}if(axisRange.label){axisRange.label.validate()}}))};Axis.prototype.validateBreaks=function(){if(this._axisBreaks){each(this._axisBreaks.iterator(),(function(axisBreak){axisBreak.invalidate()}))}};Axis.prototype.processBreak=function(event){var axisBreak=event.newValue;axisBreak.parent=this.renderer.breakContainer;axisBreak.axis=this};Axis.prototype.registerSeries=function(series){var _this=this;this.series.moveValue(series);return new MultiDisposer([new Disposer((function(){_this.series.removeValue(series)})),this.events.on("lengthchanged",series.invalidate,series,false),this.events.on("lengthchanged",series.createMask,series,false),this.events.on("startchanged",series.invalidate,series,false),this.events.on("endchanged",series.invalidate,series,false)])};Object.defineProperty(Axis.prototype,"renderer",{get:function(){return this._renderer},set:function(renderer){if(renderer!=this._renderer){this._renderer=renderer;renderer.chart=this.chart;renderer.axis=this;renderer.parent=this;this.title.parent=this;this.initRenderer();this._disposers.push(renderer.gridContainer.events.on("maxsizechanged",this.invalidate,this,false));var ghostLabel_1=this.renderer.labels.create();this._disposers.push(ghostLabel_1);ghostLabel_1.dataItem=this.dataItems.template.clone();ghostLabel_1.text="L";ghostLabel_1.parent=this.renderer;ghostLabel_1.shouldClone=false;ghostLabel_1.fillOpacity=0;ghostLabel_1.opacity=0;ghostLabel_1.strokeOpacity=0;ghostLabel_1.interactionsEnabled=false;ghostLabel_1.validate();this.ghostLabel=ghostLabel_1;this.events.on("beforedatavalidated",(function(){ghostLabel_1.text="L"}),undefined,false)}},enumerable:true,configurable:true});Axis.prototype.positionToAngle=function(position){return this.renderer.positionToAngle(position)};Axis.prototype.pointToPosition=function(point){return this.renderer.pointToPosition(point)};Axis.prototype.positionToCoordinate=function(position){return this.renderer.positionToCoordinate(position)};Axis.prototype.getAnyRangePath=function(start,end){return this.renderer.getPositionRangePath(start,end)};Axis.prototype.anyToPosition=function(value){return 0};Axis.prototype.anyToPoint=function(value){return{x:0,y:0,angle:0}};Axis.prototype.getPositionRangePath=function(startPosition,endPosition){if(this.renderer){return this.renderer.getPositionRangePath(startPosition,endPosition)}return""};Object.defineProperty(Axis.prototype,"axisLength",{get:function(){if(this.renderer){return this.renderer.axisLength}return 0},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(value){if(this.setPropertyValue("cursorTooltipEnabled",value)){if(value&&this.renderer){this.renderer.updateTooltip()}else if(this.tooltip){this.tooltip.hide(0)}}},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(value){this.setPropertyValue("toggleZoomOutButton",value)},enumerable:true,configurable:true});Axis.prototype.hideTooltip=function(duration){_super.prototype.hideTooltip.call(this,duration);this._tooltipPosition=undefined};Axis.prototype.showTooltipAtPosition=function(position,local){var tooltip=this._tooltip;if(!tooltip||this.dataItems.length<=0){this._tooltipPosition=undefined}else{if(!local){position=this.toAxisPosition(position)}if(!isNumber$1(position)||position<this.start||position>this.end){tooltip.hide(0);this._tooltipPosition=undefined;return}var renderer=this.renderer;if(!tooltip.parent){tooltip.parent=this.tooltipContainer}var tooltipLocation=renderer.tooltipLocation;var startPosition=this.getCellStartPosition(position);var endPosition=this.getCellEndPosition(position);if(this.tooltipPosition=="fixed"){position=startPosition+(endPosition-startPosition)*tooltipLocation}position=fitToRange(position,this.start,this.end);if(this._tooltipPosition!=position){this._tooltipPosition=position;var tooltipLocation2=renderer.tooltipLocation2;var startPoint=renderer.positionToPoint(startPosition,tooltipLocation2);var endPoint=renderer.positionToPoint(endPosition,tooltipLocation2);this.currentItemStartPoint=startPoint;this.currentItemEndPoint=endPoint;if(renderer.fullWidthTooltip){tooltip.width=endPoint.x-startPoint.x;tooltip.height=endPoint.y-startPoint.y}var point=renderer.positionToPoint(position,tooltipLocation2);var globalPoint=spritePointToSvg(point,this.renderer.line);tooltip.text=this.getTooltipText(position);if(tooltip.text){tooltip.delayedPointTo(globalPoint);tooltip.show()}}if(!this.cursorTooltipEnabled||this.tooltip.disabled){tooltip.hide(0)}}};Axis.prototype.toAxisPosition=function(position){position=this.renderer.toAxisPosition(position);if(position==undefined){return}position=position*(this.end-this.start);if(this.renderer.inversed){position=this.end-position}else{position=this.start+position}return position};Axis.prototype.toGlobalPosition=function(position){if(this.renderer.inversed){position=this.end-position}else{position=position-this.start}return position/(this.end-this.start)};Axis.prototype.getTooltipText=function(position){return};Axis.prototype.updateTooltip=function(pointerOrientation,boundingRectangle){var tooltip=this._tooltip;if(tooltip){tooltip.fixDoc=false;tooltip.pointerOrientation=pointerOrientation;tooltip.setBounds(spriteRectToSvg(boundingRectangle,this.renderer.line))}};Axis.prototype.roundPosition=function(position,location,axisLocation){return position};Axis.prototype.getCellStartPosition=function(position){return position};Axis.prototype.getCellEndPosition=function(position){return position};Object.defineProperty(Axis.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var dataItem=this.createDataItem();dataItem.isRange=true;dataItem.axisFill=this.renderer.axisFills.template.clone();dataItem.grid=this.renderer.grid.template.clone();dataItem.tick=this.renderer.ticks.template.clone();dataItem.label=this.renderer.labels.template.clone();dataItem.isTemplate=true;dataItem.component=this;dataItem.axisFill.disabled=false;dataItem.tick.disabled=false;dataItem.grid.disabled=false;dataItem.label.disabled=false;this._axisRanges=new ListTemplate(dataItem);this._axisRanges.events.on("inserted",this.processAxisRange,this,false);this._disposers.push(new ListDisposer(this._axisRanges));this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:true,configurable:true});Axis.prototype.processAxisRange=function(event){var axisRange=event.newValue;axisRange.component=this;axisRange.isRange=true};Object.defineProperty(Axis.prototype,"axisBreaks",{get:function(){if(!this._axisBreaks){this._axisBreaks=new SortedListTemplate(this.createAxisBreak(),(function(a,b){return order(a.adjustedStartValue,b.adjustedStartValue)}));this._axisBreaks.events.on("inserted",this.processBreak,this,false);this._disposers.push(new ListDisposer(this._axisBreaks));this._disposers.push(this._axisBreaks.template)}return this._axisBreaks},enumerable:true,configurable:true});Axis.prototype.createAxisBreak=function(){return new AxisBreak};Object.defineProperty(Axis.prototype,"series",{get:function(){if(!this._series){this._series=new List}return this._series},enumerable:true,configurable:true});Axis.prototype.processSeriesDataItems=function(){};Axis.prototype.processSeriesDataItem=function(dataItem,axisLetter){};Axis.prototype.postProcessSeriesDataItems=function(series){};Axis.prototype.postProcessSeriesDataItem=function(dataItem){};Axis.prototype.updateAxisBySeries=function(){};Axis.prototype.hideUnusedDataItems=function(){var _this=this;var dataItemsIterator=this._dataItemsIterator;dataItemsIterator.createNewItems=false;each(dataItemsIterator.iterator(),(function(dataItem){_this.validateDataElement(dataItem);dataItem.__disabled=true}));dataItemsIterator.clear();dataItemsIterator.createNewItems=true};Axis.prototype.getSeriesDataItem=function(series,position,findNearest){return};Axis.prototype.getAngle=function(dataItem,key,location,stackKey,range){return};Axis.prototype.getX=function(dataItem,key,location,stackKey,range){return};Axis.prototype.getPositionX=function(dataItem,key,location,stackKey,range){return};Axis.prototype.getY=function(dataItem,key,location,stackKey,range){return};Axis.prototype.getPositionY=function(dataItem,key,location,stackKey,range){return};Object.defineProperty(Axis.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:true,configurable:true});Axis.prototype.dataChangeUpdate=function(){};Axis.prototype.seriesDataChangeUpdate=function(series){};Axis.prototype.adjustDifference=function(min,max){var difference=max-min;if(isNumber$1(difference)){if(this._axisBreaks){eachContinue(this._axisBreaks.iterator(),(function(axisBreak){var startValue=axisBreak.adjustedStartValue;var endValue=axisBreak.adjustedEndValue;if(isNumber$1(startValue)&&isNumber$1(endValue)){if(startValue>max){return false}if(endValue>=min){if(isNumber$1(startValue)&&isNumber$1(endValue)){var breakSize=axisBreak.breakSize;var intersection$1=intersection({start:startValue,end:endValue},{start:min,end:max});if(intersection$1){difference-=(intersection$1.end-intersection$1.start)*(1-breakSize)}}}return true}}))}return difference}};Axis.prototype.isInBreak=function(value){if(this._axisBreaks){return find(this._axisBreaks.iterator(),(function(axisBreak){return value>=axisBreak.adjustedStartValue&&value<=axisBreak.adjustedEndValue}))}};Axis.prototype.fixAxisBreaks=function(){var _this=this;if(this._axisBreaks){var axisBreaks=this._axisBreaks;if(axisBreaks.length>0){each$2(toArray(axisBreaks.iterator()),(function(axisBreak){var startValue=min$2(axisBreak.startValue,axisBreak.endValue);var endValue=max$2(axisBreak.startValue,axisBreak.endValue);axisBreak.adjustedStartValue=startValue;axisBreak.adjustedEndValue=endValue;_this._axisBreaks.update(axisBreak)}));var firstAxisBreak=axisBreaks.first;var previousEndValue_1=Math.min(firstAxisBreak.startValue,firstAxisBreak.endValue);each(axisBreaks.iterator(),(function(axisBreak){var startValue=axisBreak.adjustedStartValue;var endValue=axisBreak.adjustedEndValue;if(startValue<previousEndValue_1){startValue=previousEndValue_1;if(endValue<previousEndValue_1){endValue=previousEndValue_1}}axisBreak.adjustedStartValue=startValue;axisBreak.adjustedEndValue=endValue}))}}};Object.defineProperty(Axis.prototype,"startIndex",{get:function(){return 0},set:function(value){},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(value){},enumerable:true,configurable:true});Axis.prototype.getPositionLabel=function(position){return Math.round(position*100)+"%x"};Object.defineProperty(Axis.prototype,"chart",{get:function(){return this._chart},set:function(value){this._chart=value},enumerable:true,configurable:true});Axis.prototype.createSeriesRange=function(series){var range=this.axisRanges.create();range.component=this;range.axisFill=this.renderer.axisFills.template.clone();range.axisFill.disabled=false;range.axisFill.fillOpacity=0;range.grid=this.renderer.grid.template.clone();range.grid.disabled=true;range.tick=this.renderer.ticks.template.clone();range.tick.disabled=true;range.label=this.renderer.labels.template.clone();range.label.disabled=true;range.addDisposer(new Disposer((function(){series.axisRanges.removeValue(range)})));series.axisRanges.push(range);return range};Axis.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.renderer){this.renderer.copyFrom(source.renderer)}else{if(source.renderer){this.renderer=source.renderer.clone();this._disposers.push(this.renderer)}}if(source.title){if(!this.title){this.title=source.title.clone();this.title.parent=this}else{this.title.copyFrom(source.title)}this._disposers.push(this.title)}};Axis.prototype.resetIterators=function(){this._dataItemsIterator.reset()};Axis.prototype.processConfig=function(config){if(config){if(hasValue(config.axisRanges)&&isArray$6(config.axisRanges)){for(var i=0,len=config.axisRanges.length;i<len;i++){var range=config.axisRanges[i];if(hasValue(range["series"])){if(isString$1(range["series"])){if(this.map.hasKey(range["series"])){config.axisRanges[i]=this.createSeriesRange(this.map.getKey(range["series"]));delete range["series"];config.axisRanges[i].config=range}}}}}}_super.prototype.processConfig.call(this,config)};Axis.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="title"){return 1}else if(b=="title"){return-1}else if(a=="component"){return-1}else if(b=="component"){return 1}else{return _super.prototype.configOrder.call(this,a,b)}};Object.defineProperty(Axis.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(value){this.setPropertyValue("startLocation",value,true)},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(value){this.setPropertyValue("endLocation",value,true)},enumerable:true,configurable:true});Axis.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.renderer){this.renderer.gridContainer.disabled=value}return changed};Object.defineProperty(Axis.prototype,"title",{get:function(){return this._title},set:function(value){if(this._title&&this._title!=value){this._title.dispose()}if(value){this._title=value;value.parent=this;value.shouldClone=false}},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(value){this.setPropertyValue("hideTooltipWhileZooming",value)},enumerable:true,configurable:true});Object.defineProperty(Axis.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(value){this.setPropertyValue("zoomable",value)},enumerable:true,configurable:true});return Axis}(Component);registry.registeredClasses["Axis"]=Axis;registry.registeredClasses["AxisDataItem"]=AxisDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(target,stateId){if(target instanceof Axis&&target.tooltip){var state=target.states.create(stateId);state.properties.cursorTooltipEnabled=false;return state}return null}});var AxisLine=function(_super){__extends(AxisLine,_super);function AxisLine(){var _this=_super.call(this)||this;_this.className="AxisLine";_this.element=_this.paper.add("path");var interfaceColors=new InterfaceColorSet;_this.stroke=interfaceColors.getFor("grid");_this.strokeOpacity=.15;_this.pixelPerfect=true;_this.fill=color();_this.applyTheme();_this.interactionsEnabled=false;return _this}return AxisLine}(Sprite);registry.registeredClasses["AxisLine"]=AxisLine;var AxisFill=function(_super){__extends(AxisFill,_super);function AxisFill(axis){var _this=_super.call(this)||this;_this.axis=axis;_this.element=_this.paper.add("path");_this.className="AxisFill";_this.isMeasured=false;_this.location=0;_this.above=false;var interfaceColors=new InterfaceColorSet;_this.fill=interfaceColors.getFor("alternativeBackground");_this.fillOpacity=0;_this.applyTheme();return _this}AxisFill.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.axis){this.axis.invalidateDataItems()}return changed};AxisFill.prototype.draw=function(){_super.prototype.draw.call(this);if(this.__disabled||this.disabled){return}if(this.axis&&isNumber$1(this.startPosition)&&isNumber$1(this.endPosition)){this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition);this.path=this.fillPath;if(this.isMeasured){this.measure()}}};Object.defineProperty(AxisFill.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(value){this.setPropertyValue("startPosition",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(AxisFill.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(value){this.setPropertyValue("endPosition",value);this.invalidate()},enumerable:true,configurable:true});Object.defineProperty(AxisFill.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(value){this.setPropertyValue("location",value,true)},enumerable:true,configurable:true});AxisFill.prototype.setPath=function(value){if(this.setPropertyValue("path",value)){this.element.attr({d:value});return true}return false};Object.defineProperty(AxisFill.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(value){this.setPropertyValue("above",value,true)},enumerable:true,configurable:true});return AxisFill}(Sprite);registry.registeredClasses["AxisFill"]=AxisFill;var Grid=function(_super){__extends(Grid,_super);function Grid(){var _this=_super.call(this)||this;_this.className="Grid";_this.element=_this.paper.add("path");_this.location=.5;_this.isMeasured=false;_this.above=false;var interfaceColors=new InterfaceColorSet;_this.stroke=interfaceColors.getFor("grid");_this.pixelPerfect=true;_this.strokeOpacity=.15;_this.fill=color();_this.applyTheme();return _this}Object.defineProperty(Grid.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(value){this.setPropertyValue("location",value,true)},enumerable:true,configurable:true});Object.defineProperty(Grid.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(value){this.setPropertyValue("above",value,true)},enumerable:true,configurable:true});Grid.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.axis){this.axis.invalidateDataItems()}return changed};return Grid}(Sprite);registry.registeredClasses["Grid"]=Grid;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(target,stateId){if(target instanceof Grid){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var AxisLabel=function(_super){__extends(AxisLabel,_super);function AxisLabel(){var _this=_super.call(this)||this;_this.className="AxisLabel";_this.isMeasured=false;_this.padding(10,10,10,10);_this.location=.5;_this.applyTheme();return _this}Object.defineProperty(AxisLabel.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(value){this.setPropertyValue("location",value,true)},enumerable:true,configurable:true});Object.defineProperty(AxisLabel.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(value){this.setPropertyValue("inside",value,true)},enumerable:true,configurable:true});AxisLabel.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.axis){this.axis.invalidateDataItems()}return changed};return AxisLabel}(Label);registry.registeredClasses["AxisLabel"]=AxisLabel;var Tick=function(_super){__extends(Tick,_super);function Tick(){var _this=_super.call(this)||this;_this.className="Tick";var interfaceColors=new InterfaceColorSet;_this.fillOpacity=0;_this.length=6;_this.strokeOpacity=.2;_this.stroke=interfaceColors.getFor("grid");_this.isMeasured=false;_this.nonScalingStroke=true;_this.applyTheme();return _this}Object.defineProperty(Tick.prototype,"length",{get:function(){if(this.disabled){return 0}return this.getPropertyValue("length")},set:function(value){this.setPropertyValue("length",value,true)},enumerable:true,configurable:true});return Tick}(Sprite);registry.registeredClasses["Tick"]=Tick;var AxisTick=function(_super){__extends(AxisTick,_super);function AxisTick(){var _this=_super.call(this)||this;_this.className="AxisTick";_this.element=_this.paper.add("path");_this.location=.5;_this.above=false;_this.isMeasured=false;_this.pixelPerfect=true;_this.strokeOpacity=0;_this.length=5;_this.applyTheme();return _this}Object.defineProperty(AxisTick.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(value){this.setPropertyValue("location",value,true)},enumerable:true,configurable:true});Object.defineProperty(AxisTick.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(value){this.setPropertyValue("inside",value,true)},enumerable:true,configurable:true});Object.defineProperty(AxisTick.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(value){this.setPropertyValue("above",value,true)},enumerable:true,configurable:true});AxisTick.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.axis){this.axis.invalidateDataItems()}return changed};return AxisTick}(Tick);registry.registeredClasses["AxisTick"]=AxisTick;var AxisRenderer=function(_super){__extends(AxisRenderer,_super);function AxisRenderer(){var _this=_super.call(this)||this;_this._chart=new MutableValueDisposer;_this.className="AxisRenderer";_this.minGridDistance=50;_this.inside=false;_this.inversed=false;_this.tooltipLocation=.5;_this.fullWidthTooltip=false;_this.cellStartLocation=0;_this.cellEndLocation=1;_this.minLabelPosition=0;_this.maxLabelPosition=1;_this.shouldClone=false;var gridContainer=_this.createChild(Container);gridContainer.shouldClone=false;gridContainer.layout="none";gridContainer.virtualParent=_this;gridContainer.width=percent(100);gridContainer.height=percent(100);_this.gridContainer=gridContainer;gridContainer.events.on("maxsizechanged",(function(){if(_this.inited){_this.invalidateAxisItems()}}),_this,false);var breakContainer=_this.createChild(Container);breakContainer.shouldClone=false;breakContainer.isMeasured=false;breakContainer.layout="none";breakContainer.width=percent(100);breakContainer.height=percent(100);_this.breakContainer=breakContainer;var bulletsContainer=_this.createChild(Container);bulletsContainer.shouldClone=false;bulletsContainer.isMeasured=false;bulletsContainer.layout="none";bulletsContainer.width=percent(100);bulletsContainer.height=percent(100);_this.bulletsContainer=bulletsContainer;_this.line=_this.createChild(AxisLine);_this.line.shouldClone=false;_this.line.strokeOpacity=0;var baseGrid=_this.createChild(Grid);baseGrid.shouldClone=false;_this.baseGrid=baseGrid;var disposers=_this._disposers;disposers.push(baseGrid);disposers.push(_this.line);disposers.push(gridContainer);disposers.push(breakContainer);disposers.push(bulletsContainer);disposers.push(_this._chart);_this.ticks.template.disabled=true;_this.axisFills.template.disabled=true;_this.axisFills.template.interactionsEnabled=false;_this.applyTheme();return _this}Object.defineProperty(AxisRenderer.prototype,"axis",{get:function(){return this._axis},set:function(axis){this.setAxis(axis)},enumerable:true,configurable:true});AxisRenderer.prototype.setAxis=function(axis){this._axis=axis;this.baseGrid.parent=axis;this.line.parent=axis;this.gridContainer.bind("opacity",axis)};AxisRenderer.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,false);this.events.on("positionchanged",this.updateTooltip,this,false);this.labels.template.inside=this.inside;this.ticks.template.inside=this.inside};AxisRenderer.prototype.updateTooltip=function(){};Object.defineProperty(AxisRenderer.prototype,"axisLength",{get:function(){return 0},enumerable:true,configurable:true});AxisRenderer.prototype.positionItem=function(item,point){if(item){item.moveTo(point)}};AxisRenderer.prototype.positionToPoint=function(position,position2){return{x:0,y:0}};AxisRenderer.prototype.positionToAngle=function(position){return 0};AxisRenderer.prototype.positionToCoordinate=function(position){var coordinate;var axis=this.axis;var axisFullLength=axis.axisFullLength;if(axis.renderer.inversed){coordinate=(axis.end-position)*axisFullLength}else{coordinate=(position-axis.start)*axisFullLength}return coordinate};AxisRenderer.prototype.updateGridContainer=function(){};AxisRenderer.prototype.getHeight=function(){var gridContainer=this.gridContainer;if(gridContainer.parent){return gridContainer.parent.pixelHeight}return this.gridContainer.pixelHeight||0};AxisRenderer.prototype.getWidth=function(){var gridContainer=this.gridContainer;if(gridContainer.parent){return gridContainer.parent.pixelWidth}return this.gridContainer.pixelWidth||0};AxisRenderer.prototype.coordinateToPosition=function(coordinate,coordinate2){var position;var axis=this.axis;var axisFullLength=axis.axisFullLength;if(axis.renderer.inversed){position=axis.end-coordinate/axisFullLength}else{position=coordinate/axisFullLength+axis.start}return round$1(position,5)};AxisRenderer.prototype.pointToPosition=function(point){return 0};AxisRenderer.prototype.getPositionRangePath=function(startPosition,endPosition){return""};AxisRenderer.prototype.invalidateAxisItems=function(){var axis=this.axis;if(axis){axis.invalidateDataItems()}};AxisRenderer.prototype.updateGridElement=function(grid,position,endPosition){};AxisRenderer.prototype.updateTickElement=function(tick,position,endPosition){};AxisRenderer.prototype.updateBullet=function(bullet,position,endPosition){};AxisRenderer.prototype.updateLabelElement=function(label,position,endPosition,location){};AxisRenderer.prototype.updateFillElement=function(fill,position,endPosition){fill.startPosition=position;fill.endPosition=endPosition};AxisRenderer.prototype.updateAxisLine=function(){};AxisRenderer.prototype.updateBaseGridElement=function(){};AxisRenderer.prototype.updateBreakElement=function(axisBreak){this.positionItem(axisBreak.startLine,axisBreak.startPoint);this.toggleVisibility(axisBreak.startLine,axisBreak.startPosition,0,1);this.positionItem(axisBreak.endLine,axisBreak.endPoint);this.toggleVisibility(axisBreak.endLine,axisBreak.endPosition,0,1)};Object.defineProperty(AxisRenderer.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(value){if(this.setPropertyValue("minGridDistance",value)){if(this.axis){this.axis.invalidateDataItems()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"chart",{get:function(){return this._chart.get()},set:function(value){this._chart.set(value,null)},enumerable:true,configurable:true});AxisRenderer.prototype.toggleVisibility=function(sprite,position,minPosition,maxPosition){var axis=this.axis;var dataItem=sprite.dataItem;if(dataItem&&dataItem instanceof AxisDataItem){if(isNumber$1(dataItem.minPosition)){minPosition=dataItem.minPosition}if(isNumber$1(dataItem.maxPosition)){maxPosition=dataItem.maxPosition}}var updatedStart=axis.start+(axis.end-axis.start)*(minPosition-1e-4);var updatedEnd=axis.start+(axis.end-axis.start)*(maxPosition+1e-4);if(!sprite.disabled){if(position<updatedStart||position>updatedEnd){sprite.__disabled=true}else{sprite.__disabled=false}}};AxisRenderer.prototype.createBreakSprites=function(axisBreak){};Object.defineProperty(AxisRenderer.prototype,"axisFills",{get:function(){if(!this._axisFills){var fill=this.createFill(this.axis);this._axisFills=new ListTemplate(fill);fill.applyOnClones=true;fill.events.on("enabled",this.invalidateAxisItems,this,false);this._disposers.push(new ListDisposer(this._axisFills));this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:true,configurable:true});AxisRenderer.prototype.createFill=function(axis){return new AxisFill(axis)};Object.defineProperty(AxisRenderer.prototype,"grid",{get:function(){if(!this._grid){var grid=this.createGrid();this._grid=new ListTemplate(grid);grid.applyOnClones=true;grid.events.on("enabled",this.invalidateAxisItems,this,false);this._disposers.push(new ListDisposer(this._grid));this._disposers.push(this._grid.template)}return this._grid},enumerable:true,configurable:true});AxisRenderer.prototype.createGrid=function(){return new Grid};Object.defineProperty(AxisRenderer.prototype,"ticks",{get:function(){if(!this._ticks){var tick=this.createTick();tick.applyOnClones=true;tick.isMeasured=false;tick.events.on("enabled",this.invalidateAxisItems,this,false);this._ticks=new ListTemplate(tick);this._disposers.push(new ListDisposer(this._ticks));this._disposers.push(this._ticks.template)}return this._ticks},enumerable:true,configurable:true});AxisRenderer.prototype.createTick=function(){return new AxisTick};Object.defineProperty(AxisRenderer.prototype,"labels",{get:function(){if(!this._labels){var label=this.createLabel();this._labels=new ListTemplate(label);label.applyOnClones=true;label.events.on("enabled",this.invalidateAxisItems,this,false);this._disposers.push(new ListDisposer(this._labels));this._disposers.push(this._labels.template)}return this._labels},enumerable:true,configurable:true});AxisRenderer.prototype.createLabel=function(){return new AxisLabel};Object.defineProperty(AxisRenderer.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(value){if(this.setPropertyValue("inside",value)){if(this.axis){this.axis.invalidate()}}if(value){this.width=0;this.height=0}else{this.width=undefined;this.height=undefined}},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(value){this.setPropertyValue("opposite",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(value){this.setPropertyValue("fullWidthTooltip",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(value){this.setPropertyValue("tooltipLocation",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(value){this.setPropertyValue("tooltipLocation2",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(value){if(this.setPropertyValue("cellStartLocation",value)){if(this.axis){this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(value){if(this.setPropertyValue("cellEndLocation",value)){if(this.axis){this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(value){this.setPropertyValue("inversed",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(value){this.setPropertyValue("minLabelPosition",value,true)},enumerable:true,configurable:true});Object.defineProperty(AxisRenderer.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(value){this.setPropertyValue("maxLabelPosition",value,true)},enumerable:true,configurable:true});AxisRenderer.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.grid.template.copyFrom(source.grid.template);this.ticks.template.copyFrom(source.ticks.template);this.labels.template.copyFrom(source.labels.template);this.axisFills.template.copyFrom(source.axisFills.template);this.line.copyFrom(source.line);this.baseGrid.copyFrom(source.baseGrid)};AxisRenderer.prototype.toAxisPosition=function(value){return value};AxisRenderer.prototype.setVisibility=function(value){_super.prototype.setVisibility.call(this,value);this.bulletsContainer.visible=value};return AxisRenderer}(Container);registry.registeredClasses["AxisRenderer"]=AxisRenderer;var AxisBullet=function(_super){__extends(AxisBullet,_super);function AxisBullet(){var _this=_super.call(this)||this;_this.className="AxisBullet";_this.location=.5;_this.isMeasured=false;_this.applyTheme();return _this}Object.defineProperty(AxisBullet.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(value){this.setPropertyValue("location",value,true)},enumerable:true,configurable:true});AxisBullet.prototype.setDisabled=function(value){var changed=_super.prototype.setDisabled.call(this,value);if(this.axis){this.axis.invalidateDataItems()}return changed};return AxisBullet}(Container);registry.registeredClasses["AxisBullet"]=AxisBullet;var AxisRendererY=function(_super){__extends(AxisRendererY,_super);function AxisRendererY(){var _this=_super.call(this)||this;_this.className="AxisRendererY";_this.minGridDistance=40;_this.opposite=false;_this.height=percent(100);_this.labels.template.verticalCenter="middle";_this.applyTheme();return _this}AxisRendererY.prototype.setAxis=function(axis){_super.prototype.setAxis.call(this,axis);axis.layout="horizontal"};AxisRendererY.prototype.updateGridContainer=function(){var axis=this.axis;if(axis){var gridContainer=this.gridContainer;gridContainer.y=axis.pixelY;gridContainer.height=axis.axisLength}};AxisRendererY.prototype.toAxisPosition=function(value){var axis=this.axis;if(axis){var inversedPosition=1-value;var relativePositionSprite=axis.relativePositionSprite;var y=axis.pixelY;if(relativePositionSprite){y=spritePointToSprite({x:0,y:this.pixelY},this.parent,relativePositionSprite).y}else{relativePositionSprite=axis.parent}if(relativePositionSprite){var relativeY=y/relativePositionSprite.innerHeight;var relativeHeight=axis.axisLength/relativePositionSprite.innerHeight;return 1-(inversedPosition-relativeY)/relativeHeight}}return value};AxisRendererY.prototype.processRenderer=function(){_super.prototype.processRenderer.call(this);var axis=this.axis;if(axis){var title=axis.title;title.valign="middle";if(!(axis.height instanceof Percent)){axis.height=percent(100)}if(this.opposite){title.rotation=90;this.line.toBack();title.toFront()}else{title.rotation=-90;title.toBack();this.line.toFront()}}};AxisRendererY.prototype.updateTooltip=function(){var axis=this.axis;if(axis){var bigNum=2e3;var bbx=0;var bby=0;var bbw=bigNum;var bbh=this.axisLength;if(this.opposite){if(this.inside){bbx=-bigNum;bbw=bigNum}}else{if(!this.inside){bbx=-bigNum;bbw=bigNum}}this.axis.updateTooltip("horizontal",{x:bbx,y:bby,width:bbw,height:bbh})}};Object.defineProperty(AxisRendererY.prototype,"axisLength",{get:function(){var axis=this.axis;return axis.measuredHeight-axis.pixelPaddingTop-axis.pixelPaddingBottom||0},enumerable:true,configurable:true});AxisRendererY.prototype.positionToPoint=function(position,position2){return{x:0,y:this.positionToCoordinate(position)}};AxisRendererY.prototype.pointToPosition=function(point){return this.coordinateToPosition(point.y,point.x)};AxisRendererY.prototype.coordinateToPosition=function(coordinate,coordinate2){var position;var axis=this.axis;var axisFullLength=axis.axisFullLength;if(axis.renderer.inversed){position=1-axis.start-coordinate/axisFullLength}else{position=coordinate/axisFullLength+(1-axis.end)}return round$1(position,5)};AxisRendererY.prototype.getPositionRangePath=function(startPosition,endPosition){var y1=fitToRange(this.positionToCoordinate(startPosition),0,this.axisLength);var y2=fitToRange(this.positionToCoordinate(endPosition),0,this.axisLength);var h=Math.abs(y2-y1);var w=this.getWidth();var y=Math.min(y1,y2);var x=0;return rectToPath({x,y,width:w,height:h},true)};AxisRendererY.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);grid.path=moveTo({x:0,y:0})+lineTo({x:this.getWidth(),y:0});this.positionItem(grid,point);this.toggleVisibility(grid,position,0,1)};AxisRendererY.prototype.updateTickElement=function(tick,position,endPosition){position=position+(endPosition-position)*tick.location;var point=this.positionToPoint(position);var tickLength=tick.length;point.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x;if(!this.opposite){tickLength*=tick.inside?1:-1}else{tickLength*=tick.inside?-1:1}tick.path=moveTo({x:0,y:0})+lineTo({x:tickLength,y:0});this.positionItem(tick,point);this.toggleVisibility(tick,position,0,1)};AxisRendererY.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.axisLength})};AxisRendererY.prototype.updateBaseGridElement=function(){_super.prototype.updateBaseGridElement.call(this);var axis=this.axis;var w=this.getWidth();var h=this.axisLength;var y=axis.basePoint.y;var baseGrid=this.baseGrid;if(y<-.2||y>h+.2){baseGrid.hide(0)}else{var x=spritePointToSprite({x:0,y:0},this.gridContainer,baseGrid.parent).x;baseGrid.path=moveTo({x:0,y:0})+lineTo({x:w,y:0});baseGrid.moveTo({x,y});baseGrid.show(0)}};AxisRendererY.prototype.updateLabelElement=function(label,position,endPosition,location){if(!hasValue(location)){location=label.location}position=position+(endPosition-position)*location;label.isMeasured=!label.inside;var point=this.positionToPoint(position);var horizontalCenter;var deltaX=0;var maxWidth=this.gridContainer.maxWidth;if(this.opposite){if(label.inside){horizontalCenter="right";if(label.align=="left"){deltaX=-maxWidth;horizontalCenter="left"}if(label.align=="center"){deltaX=-maxWidth/2;horizontalCenter="middle"}}else{horizontalCenter="left"}point.x=0+deltaX}else{if(label.inside){horizontalCenter="left";if(label.align=="right"){deltaX=maxWidth;horizontalCenter="right"}if(label.align=="center"){deltaX=maxWidth/2;horizontalCenter="middle"}}else{horizontalCenter="right"}point.x=this.measuredWidth+deltaX}if(label.rotation==0){label.horizontalCenter=horizontalCenter}this.positionItem(label,point);this.toggleVisibility(label,position,this.minLabelPosition,this.maxLabelPosition)};AxisRendererY.prototype.updateBreakElement=function(axisBreak){_super.prototype.updateBreakElement.call(this,axisBreak);var startLine=axisBreak.startLine;var endLine=axisBreak.endLine;var fillShape=axisBreak.fillShape;var startPoint=axisBreak.startPoint;var endPoint=axisBreak.endPoint;var x1=axisBreak.pixelMarginLeft;var x2=this.getWidth()-axisBreak.pixelMarginLeft-axisBreak.pixelMarginRight;startPoint.y=fitToRange(startPoint.y,-1,this.axisLength+1);endPoint.y=fitToRange(endPoint.y,-1,this.axisLength+1);if(startPoint.y==endPoint.y&&(startPoint.y<0||startPoint.y>this.axisLength)){axisBreak.fillShape.__disabled=true}else{axisBreak.fillShape.__disabled=false}var w=Math.abs(x2-x1);startLine.x=x1;startLine.height=0;startLine.width=w;endLine.x=x1;endLine.height=0;endLine.width=w;fillShape.width=w;fillShape.height=Math.abs(endPoint.y-startPoint.y);fillShape.x=x1;fillShape.y=endPoint.y};AxisRendererY.prototype.createBreakSprites=function(axisBreak){axisBreak.startLine=new WavedLine;axisBreak.endLine=new WavedLine;var wavedRectangle=new WavedRectangle;wavedRectangle.setWavedSides(true,false,true,false);axisBreak.fillShape=wavedRectangle};AxisRendererY.prototype.positionToCoordinate=function(position){var coordinate;var axis=this.axis;var axisFullLength=axis.axisFullLength;if(!axis.renderer.inversed){coordinate=(axis.end-position)*axisFullLength}else{coordinate=(position-axis.start)*axisFullLength}return coordinate};AxisRendererY.prototype.updateBullet=function(bullet,position,endPosition){var location=.5;if(bullet instanceof AxisBullet){location=bullet.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);point.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x;this.positionItem(bullet,point);this.toggleVisibility(bullet,position,0,1)};return AxisRendererY}(AxisRenderer);registry.registeredClasses["AxisRendererY"]=AxisRendererY;defaultRules.push({relevant:ResponsiveBreakpoints.widthS,state:function(target,stateId){if(target instanceof AxisRendererY){var state=target.states.create(stateId);state.properties.inside=true;state.properties.maxLabelPosition=.9;state.properties.minLabelPosition=.1;return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(target,stateId){if(target instanceof AxisRendererY){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var ValueAxisBreak=function(_super){__extends(ValueAxisBreak,_super);function ValueAxisBreak(){var _this=_super.call(this)||this;_this.className="ValueAxisBreak";_this.applyTheme();return _this}Object.defineProperty(ValueAxisBreak.prototype,"startPosition",{get:function(){if(this.axis){return this.axis.valueToPosition(this.adjustedStartValue)}},enumerable:true,configurable:true});Object.defineProperty(ValueAxisBreak.prototype,"endPosition",{get:function(){if(this.axis){return this.axis.valueToPosition(this.adjustedEndValue)}},enumerable:true,configurable:true});return ValueAxisBreak}(AxisBreak);registry.registeredClasses["ValueAxisBreak"]=ValueAxisBreak;var ValueAxisDataItem=function(_super){__extends(ValueAxisDataItem,_super);function ValueAxisDataItem(){var _this=_super.call(this)||this;_this.className="ValueAxisDataItem";_this.values.value={};_this.values.endValue={};_this.applyTheme();return _this}Object.defineProperty(ValueAxisDataItem.prototype,"value",{get:function(){return this.values["value"].value},set:function(value){this.setValue("value",value)},enumerable:true,configurable:true});Object.defineProperty(ValueAxisDataItem.prototype,"endValue",{get:function(){return this.values["endValue"].value},set:function(value){this.setValue("endValue",value)},enumerable:true,configurable:true});return ValueAxisDataItem}(AxisDataItem);var ValueAxis=function(_super){__extends(ValueAxis,_super);function ValueAxis(){var _this=_super.call(this)||this;_this._stepDecimalPlaces=0;_this._prevStepDecimalPlaces=0;_this._adjustLabelPrecision=true;_this._baseValue=0;_this._adjustedStart=0;_this._adjustedEnd=1;_this._extremesChanged=false;_this._deltaMinMax=1;_this._dsc=false;_this.calculateTotals=false;_this.className="ValueAxis";_this.axisFieldName="value";_this.setPropertyValue("maxZoomFactor",1e3);_this.setPropertyValue("extraMin",0);_this.setPropertyValue("extraMax",0);_this.setPropertyValue("strictMinMax",false);_this.setPropertyValue("maxPrecision",Number.MAX_VALUE);_this.setPropertyValue("adjustLabelPrecision",true);_this.setPropertyValue("extraTooltipPrecision",0);_this.keepSelection=false;_this.includeRangesInMinMax=false;_this.applyTheme();return _this}ValueAxis.prototype.fillRule=function(dataItem){var value=dataItem.value;var axis=dataItem.component;if(!dataItem.axisFill.disabled){if(round$1(value/axis.step/2,5)==Math.round(value/axis.step/2)){dataItem.axisFill.__disabled=true}else{dataItem.axisFill.__disabled=false}}};ValueAxis.prototype.createDataItem=function(){return new ValueAxisDataItem};ValueAxis.prototype.createAxisBreak=function(){return new ValueAxisBreak};ValueAxis.prototype.dataChangeUpdate=function(){this.clearCache();if(!this.keepSelection){if(this._start!=0||this._end!=1){this._start=0;this._end=1;this.dispatchImmediately("startendchanged")}}else{if(this._start!=0){this.dispatchImmediately("startchanged")}if(this._end!=1){this.dispatchImmediately("endchanged")}if(this._start!=0||this._end!=1){this.dispatchImmediately("startendchanged")}}this._maxZoomed=this._maxDefined;this._minZoomed=this._minDefined;this._maxAdjusted=this._maxDefined;this._minAdjusted=this._minDefined};ValueAxis.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var series=this.series.getIndex(0);var startIndex=series.startIndex;if(series.dataItems.length>0){if(startIndex>0){startIndex--}var endIndex=series.endIndex;if(endIndex<series.dataItems.length){endIndex++}var _loop_1=function(i){var total={};var sum={};this_1.series.each((function(series){if(!series.excludeFromTotal){var dataItem_1=series.dataItems.getIndex(i);if(dataItem_1){each$1(dataItem_1.values,(function(key){var value=dataItem_1.values[key].workingValue;if(isNumber$1(value)){if(!isNumber$1(total[key])){total[key]=Math.abs(value)}else{total[key]+=Math.abs(value)}if(!isNumber$1(sum[key])){sum[key]=value}else{sum[key]+=value}}}))}}}));this_1.series.each((function(series){if(!series.excludeFromTotal){var dataItem_2=series.dataItems.getIndex(i);if(dataItem_2){each$1(dataItem_2.values,(function(key){var value=dataItem_2.values[key].workingValue;if(isNumber$1(value)){dataItem_2.setCalculatedValue(key,total[key],"total");dataItem_2.setCalculatedValue(key,100*value/total[key],"totalPercent");dataItem_2.setCalculatedValue(key,sum[key],"sum")}}))}}}))};var this_1=this;for(var i=startIndex;i<endIndex;++i){_loop_1(i)}}}};ValueAxis.prototype.validate=function(){if(this.axisLength<=0){return}_super.prototype.validate.call(this);this.getMinMax();if(!isNumber$1(this._minAdjusted)){this.dataItems.each((function(dataItem){dataItem.value=null}))}this.fixAxisBreaks();this.calculateZoom();this.validateAxisElements();this.validateAxisRanges();this.validateBreaks();this.hideUnusedDataItems();this.renderer.invalidateLayout()};ValueAxis.prototype.calculateZoom=function(){if(isNumber$1(this.min)&&isNumber$1(this.max)){var min=this.positionToValue(this.start);var max=this.positionToValue(this.end);var differece=this.adjustDifference(min,max);var minMaxStep=this.adjustMinMax(min,max,differece,this._gridCount,true);var stepDecimalPlaces=decimalPlaces(minMaxStep.step);this._stepDecimalPlaces=stepDecimalPlaces;min=round$1(min,stepDecimalPlaces);max=round$1(max,stepDecimalPlaces);minMaxStep=this.adjustMinMax(min,max,differece,this._gridCount,true);var step=minMaxStep.step;if(this.syncWithAxis){var calculated=this.getCache(min+"-"+max);if(isNumber$1(calculated)){step=calculated}}else{min=minMaxStep.min;max=minMaxStep.max}if(this._minZoomed!=min||this._maxZoomed!=max||this._step!=step||this._dsc){this._dsc=false;this._minZoomed=min;this._maxZoomed=max;this._step=step;this.dispatchImmediately("selectionextremeschanged")}}};ValueAxis.prototype.fixSmallStep=function(step){if(1+step==1){step*=2;return this.fixSmallStep(step)}return step};ValueAxis.prototype.validateAxisElements=function(){var _this=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){var value_1=this.minZoomed-this._step*2;if(!this.logarithmic){value_1=Math.floor(value_1/this._step)*this._step}else{var differencePower=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;if(differencePower>1){value_1=Math.pow(10,Math.log(this.min)*Math.LOG10E)}else{value_1=Math.floor(this.minZoomed/this._step)*this._step;if(value_1==0){value_1=this.minZoomed}}}var maxZoomed=this._maxZoomed+this._step;this.resetIterators();var dataItemsIterator_1=this._dataItemsIterator;if(this._step==0){return}this._step=this.fixSmallStep(this._step);var i=0;var precisionChanged=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;this._prevStepDecimalPlaces=this._stepDecimalPlaces;while(value_1<=maxZoomed){var axisBreak=this.isInBreak(value_1);if(!axisBreak){var dataItem=dataItemsIterator_1.find((function(x){return x.value===value_1}));if(dataItem.__disabled){dataItem.__disabled=false}this.appendDataItem(dataItem);dataItem.axisBreak=undefined;if(dataItem.value!=value_1||precisionChanged){dataItem.value=value_1;dataItem.text=this.formatLabel(value_1);if(dataItem.label&&dataItem.label.invalid){dataItem.label.validate()}if(dataItem.value>=this.min&&dataItem.value<=this.max){if(dataItem.label){if(this.axisLetter=="Y"&&dataItem.label.measuredWidth>this.ghostLabel.measuredWidth||this.axisLetter=="X"&&dataItem.label.measuredHeight>this.ghostLabel.measuredHeight){this.ghostLabel.text=dataItem.label.currentText;this.ghostLabel.validate()}}}}this.validateDataElement(dataItem)}i++;var oldValue=value_1;if(!this.logarithmic){value_1+=this._step}else{var differencePower=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;if(differencePower>1){value_1=Math.pow(10,Math.log(this.min)*Math.LOG10E+i)}else{value_1+=this._step}}var stepPower=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(stepPower<1){var decCount=Math.round(Math.abs(Math.log(Math.abs(stepPower))*Math.LOG10E))+2;decCount=Math.min(13,decCount);value_1=round$1(value_1,decCount);if(oldValue==value_1){value_1=maxZoomed;break}}}var axisBreaks=this._axisBreaks;if(axisBreaks){var renderer_1=this.renderer;each(axisBreaks.iterator(),(function(axisBreak){if(axisBreak.breakSize>0){if(getDistance(axisBreak.startPoint,axisBreak.endPoint)>renderer_1.minGridDistance){var breakValue_1=axisBreak.adjustedMin;while(breakValue_1<=axisBreak.adjustedMax){if(breakValue_1>=axisBreak.adjustedStartValue&&breakValue_1<=axisBreak.adjustedEndValue){var dataItem=dataItemsIterator_1.find((function(x){return x.value===breakValue_1}));if(dataItem.__disabled){dataItem.__disabled=false}_this.appendDataItem(dataItem);dataItem.axisBreak=axisBreak;if(dataItem.value!=breakValue_1){dataItem.value=breakValue_1;dataItem.text=_this.formatLabel(breakValue_1);if(dataItem.label&&dataItem.label.invalid){dataItem.label.validate()}}_this.validateDataElement(dataItem)}breakValue_1+=axisBreak.adjustedStep}}}}))}}};ValueAxis.prototype.validateDataElement=function(dataItem){_super.prototype.validateDataElement.call(this,dataItem);dataItem.itemIndex=this._axisItemCount;this._axisItemCount++;var renderer=this.renderer;var value=dataItem.value;var endValue=dataItem.endValue;var position=this.valueToPosition(value);dataItem.position=position;var endPosition=position;var fillEndPosition=this.valueToPosition(value+this._step);if(isNumber$1(endValue)){endPosition=this.valueToPosition(endValue);fillEndPosition=endPosition}dataItem.point=renderer.positionToPoint(position);var tick=dataItem.tick;if(tick&&!tick.disabled){renderer.updateTickElement(tick,position,endPosition)}var grid=dataItem.grid;if(grid&&!grid.disabled){renderer.updateGridElement(grid,position,endPosition)}var label=dataItem.label;if(label&&!label.disabled){renderer.updateLabelElement(label,position,endPosition)}var fill=dataItem.axisFill;if(fill&&!fill.disabled){renderer.updateFillElement(fill,position,fillEndPosition);if(!dataItem.isRange){this.fillRule(dataItem)}}if(dataItem.bullet){renderer.updateBullet(dataItem.bullet,position,endPosition)}var mask=dataItem.mask;if(mask){renderer.updateFillElement(mask,position,fillEndPosition)}};ValueAxis.prototype.formatLabel=function(value){if(this.adjustLabelPrecision&&value!=0){return this.numberFormatter.format(value,undefined,this._stepDecimalPlaces)}else{return this.numberFormatter.format(value)}};Object.defineProperty(ValueAxis.prototype,"basePoint",{get:function(){var baseValue=this.baseValue;var position=this.valueToPosition(baseValue);var basePoint=this.renderer.positionToPoint(position);return basePoint},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"baseValue",{get:function(){var baseValue=this._baseValue;if(this.logarithmic){baseValue=this.min}if(!this._adapterO){return baseValue}else{return this._adapterO.apply("baseValue",baseValue)}},set:function(value){this._baseValue=value;this.invalidateLayout();this.invalidateSeries()},enumerable:true,configurable:true});ValueAxis.prototype.anyToPosition=function(value){return this.valueToPosition(value)};ValueAxis.prototype.valueToPoint=function(value){var position=this.valueToPosition(value);var point=this.renderer.positionToPoint(position);var angle=this.renderer.positionToAngle(position);return{x:point.x,y:point.y,angle}};ValueAxis.prototype.anyToPoint=function(value){return this.valueToPoint(value)};ValueAxis.prototype.valueToPosition=function(value){if(isNumber$1(value)){var min_1=this.min;var max_1=this.max;if(isNumber$1(min_1)&&isNumber$1(max_1)){var difference=this._difference;var axisBreaks=this._axisBreaks;if(axisBreaks&&axisBreaks.length>0){eachContinue(axisBreaks.iterator(),(function(axisBreak){var startValue=axisBreak.adjustedStartValue;var endValue=axisBreak.adjustedEndValue;if(isNumber$1(startValue)&&isNumber$1(endValue)){if(value<startValue){return false}if(intersect({start:startValue,end:endValue},{start:min_1,end:max_1})){startValue=Math.max(startValue,min_1);endValue=Math.min(endValue,max_1);var breakSize=axisBreak.breakSize;if(value>endValue){min_1+=(endValue-startValue)*(1-breakSize)}else if(value<startValue);else{value=startValue+(value-startValue)*breakSize}}}return true}))}var position=void 0;if(!this.logarithmic){position=(value-min_1)/difference}else{var treatZeroAs=this.treatZeroAs;if(isNumber$1(treatZeroAs)){if(value<=treatZeroAs){value=treatZeroAs}}position=(Math.log(value)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}return position}}return 0};ValueAxis.prototype.invalidateLabels=function(){_super.prototype.invalidateLabels.call(this);if(this.dataItems){this.dataItems.each((function(dataItem){dataItem.value=undefined}));this.invalidate()}};ValueAxis.prototype.positionToValue=function(position){var min=this.min;var max=this.max;if(isNumber$1(min)&&isNumber$1(max)){var difference_1=max-min;var value_2=null;var axisBreaks=this._axisBreaks;if(axisBreaks){if(axisBreaks.length>0){eachContinue(axisBreaks.iterator(),(function(axisBreak){var breakStartPosition=axisBreak.startPosition;var breakEndPosition=axisBreak.endPosition;var breakStartValue=axisBreak.adjustedStartValue;var breakEndValue=axisBreak.adjustedEndValue;if(isNumber$1(breakStartValue)&&isNumber$1(breakEndValue)){if(breakStartValue>max){return false}if(intersect({start:breakStartValue,end:breakEndValue},{start:min,end:max})){breakStartValue=max$2(breakStartValue,min);breakEndValue=min$2(breakEndValue,max);var breakSize=axisBreak.breakSize;difference_1-=(breakEndValue-breakStartValue)*(1-breakSize);if(position>breakEndPosition){min+=(breakEndValue-breakStartValue)*(1-breakSize)}else if(position<breakStartPosition);else{var breakPosition=(position-breakStartPosition)/(breakEndPosition-breakStartPosition);value_2=breakStartValue+breakPosition*(breakEndValue-breakStartValue);return false}}return true}}))}}if(!isNumber$1(value_2)){if(this.logarithmic){value_2=Math.pow(Math.E,(position*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E)}else{value_2=position*difference_1+min}}return value_2}};ValueAxis.prototype.xToValue=function(x){return this.positionToValue(this.pointToPosition({x,y:0}))};ValueAxis.prototype.yToValue=function(y){return this.positionToValue(this.pointToPosition({x:0,y}))};ValueAxis.prototype.pointToPosition=function(point){if(this.renderer instanceof AxisRendererY){return 1-this.renderer.pointToPosition(point)}else{return this.renderer.pointToPosition(point)}};ValueAxis.prototype.animateMinMax=function(min,max){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:min},{property:"_maxAdjusted",from:this._maxAdjusted,to:max}],this.rangeChangeDuration,this.rangeChangeEasing)};ValueAxis.prototype.getMinMax=function(){var _this=this;this.updateGridCount();var min=Number.POSITIVE_INFINITY;var max=Number.NEGATIVE_INFINITY;if(!isNumber$1(this._minDefined)||!isNumber$1(this._maxDefined)){this.series.each((function(series){if(!series.ignoreMinMax){var seriesMin=series.min(_this);if(isNumber$1(seriesMin)&&seriesMin<min){min=seriesMin}var seriesMax=series.max(_this);if(isNumber$1(seriesMax)&&seriesMax>max){max=seriesMax}}}));if(this.includeRangesInMinMax){this.axisRanges.each((function(range){if(!range.ignoreMinMax){var minValue=min$2(range.value,range.endValue);var maxValue=max$2(range.value,range.endValue);if(minValue<min||!isNumber$1(min)){min=minValue}if(maxValue>max||!isNumber$1(max)){max=maxValue}}}))}}if(this.logarithmic){var treatZeroAs=this.treatZeroAs;if(isNumber$1(treatZeroAs)){if(min<=0){min=treatZeroAs}}if(min<=0){this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),true)}}if(min==0&&max==0){max=.9;min=-.9}if(isNumber$1(this._minDefined)){min=this._minDefined}if(isNumber$1(this._maxDefined)){max=this._maxDefined}if(this._adapterO){min=this._adapterO.apply("min",min)}if(this._adapterO){max=this._adapterO.apply("max",max)}if(!isNumber$1(min)||!isNumber$1(max)){return}this._minReal=min;this._maxReal=max;if(min==Number.POSITIVE_INFINITY){min=undefined}if(max==Number.NEGATIVE_INFINITY){max=undefined}var dif=this.adjustDifference(min,max);min=this.fixMin(min);max=this.fixMax(max);if(max-min<=1/Math.pow(10,15)){if(max-min!=0){this._deltaMinMax=(max-min)/2}else{var exponent=Math.log(Math.abs(max))*Math.LOG10E;var power=Math.pow(10,Math.floor(exponent));power=power/10;this._deltaMinMax=power}min-=this._deltaMinMax;max+=this._deltaMinMax}min-=(max-min)*this.extraMin;max+=(max-min)*this.extraMax;var strict=this.strictMinMax;if(isNumber$1(this._maxDefined)){strict=true}var minMaxStep=this.adjustMinMax(min,max,dif,this._gridCount,strict);min=minMaxStep.min;max=minMaxStep.max;dif=max-min;minMaxStep=this.adjustMinMax(min,max,max-min,this._gridCount,true);min=minMaxStep.min;max=minMaxStep.max;if(this.strictMinMax){if(isNumber$1(this._minDefined)){min=this._minDefined}else{min=this._minReal}if(isNumber$1(this._maxDefined)){max=this._maxDefined}else{max=this._maxReal}if(max-min<=1e-8){min-=this._deltaMinMax;max+=this._deltaMinMax}min-=(max-min)*this.extraMin;max+=(max-min)*this.extraMax}if(this._adapterO){min=this._adapterO.apply("min",min)}if(this._adapterO){max=this._adapterO.apply("max",max)}this._step=minMaxStep.step;if(!isNumber$1(min)&&!isNumber$1(max)){this.start=0;this.end=1;this.renderer.labels.each((function(label){label.dataItem.text=""}))}if((this._minAdjusted!=min||this._maxAdjusted!=max)&&isNumber$1(min)&&isNumber$1(max)){var animation=this._minMaxAnimation;if(this._extremesChanged&&isNumber$1(this._minAdjusted)&&isNumber$1(this._maxAdjusted)&&this.inited){if(animation&&!animation.isFinished()&&this._finalMax==max&&this._finalMin==min){return}else{this._finalMin=min;this._finalMax=max;animation=this.animateMinMax(min,max);if(animation&&!animation.isFinished()){animation.events.on("animationprogress",this.validateDataItems,this);animation.events.on("animationended",(function(){_this.series.each((function(series){series.validate()}));_this.validateDataItems();_this.handleSelectionExtremesChange()}));this._minMaxAnimation=animation}else{this.series.each((function(series){series.invalidate()}))}this.validateDataItems();this.dispatchImmediately("extremeschanged");this.handleSelectionExtremesChange()}}else{if(animation&&!animation.isFinished()&&this._finalMax==max&&this._finalMin==min){return}else{this._minAdjusted=min;this._maxAdjusted=max;this._finalMin=min;this._finalMax=max;this.invalidateDataItems();this.dispatchImmediately("extremeschanged");this._saveMinMax(min,max)}}}this._extremesChanged=false;this._difference=this.adjustDifference(min,max)};ValueAxis.prototype.fixMin=function(value){return value};ValueAxis.prototype.fixMax=function(value){return value};ValueAxis.prototype.adjustMinMax=function(min,max,difference,gridCount,strictMode){if(gridCount<=1){gridCount=1}gridCount=Math.round(gridCount);var initialMin=min;var initialMax=max;if(difference===0){difference=Math.abs(max)}var exponent=Math.log(Math.abs(difference))*Math.LOG10E;var power=Math.pow(10,Math.floor(exponent));power=power/10;var extra=power;if(strictMode){extra=0}if(!this.logarithmic){if(strictMode){min=Math.floor(min/power)*power;max=Math.ceil(max/power)*power}else{min=Math.ceil(min/power)*power-extra;max=Math.floor(max/power)*power+extra}if(min<0&&initialMin>=0){min=0}if(max>0&&initialMax<=0){max=0}}else{if(min<=0){min=this.baseValue}if(min==Infinity){min=1}if(max==-Infinity){max=10}if(this.strictMinMax){if(this._minDefined>0){min=this._minDefined}else{min=min}if(this._maxDefined>0){max=max}}else{min=Math.pow(10,Math.floor(Math.log(Math.abs(min))*Math.LOG10E));max=Math.pow(10,Math.ceil(Math.log(Math.abs(max))*Math.LOG10E))}}exponent=Math.log(Math.abs(difference))*Math.LOG10E;power=Math.pow(10,Math.floor(exponent));power=power/10;var step=Math.ceil(difference/gridCount/power)*power;var stepPower=Math.pow(10,Math.floor(Math.log(Math.abs(step))*Math.LOG10E));var stepDivisor=Math.ceil(step/stepPower);if(stepDivisor>5){stepDivisor=10}else if(stepDivisor<=5&&stepDivisor>2){stepDivisor=5}step=Math.ceil(step/(stepPower*stepDivisor))*stepPower*stepDivisor;if(this.maxPrecision<Number.MAX_VALUE&&step!=ceil(step,this.maxPrecision)){step=ceil(step,this.maxPrecision)}var decCount=0;if(stepPower<1){decCount=Math.round(Math.abs(Math.log(Math.abs(stepPower))*Math.LOG10E))+1;step=round$1(step,decCount)}if(!this.logarithmic){var minCount=Math.floor(min/step);min=round$1(step*minCount,decCount);var maxCount=void 0;if(!strictMode){maxCount=Math.ceil(max/step)}else{maxCount=Math.floor(max/step)}if(maxCount==minCount){maxCount++}max=round$1(step*maxCount,decCount);if(max<initialMax){max=max+step}if(min>initialMin){min=min-step}}return{min,max,step}};Object.defineProperty(ValueAxis.prototype,"min",{get:function(){var min=this._minAdjusted;if(!isNumber$1(min)){min=this._minDefined}return min},set:function(value){if(this._minDefined!=value){this._minDefined=value;this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(value){if(this.setPropertyValue("extraMin",value)){this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(value){if(this.setPropertyValue("extraMax",value)){this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"step",{get:function(){return this._step},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"max",{get:function(){var max=this._maxAdjusted;if(!isNumber$1(max)){max=this._maxDefined}return max},set:function(value){if(this._maxDefined!=value){this._maxDefined=value;this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(value){if(this.setPropertyValue("adjustLabelPrecision",value)){this.invalidate()}},enumerable:true,configurable:true});ValueAxis.prototype.registerSeries=function(series){return new MultiDisposer([_super.prototype.registerSeries.call(this,series),series.events.on("extremeschanged",this.handleExtremesChange,this,false),series.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,false),this.events.on("extremeschanged",series.invalidate,series,false)])};ValueAxis.prototype.handleSelectionExtremesChange=function(){var _this=this;var selectionMin;var selectionMax;var allHidden=true;each(this.series.iterator(),(function(series){if(!series.ignoreMinMax&&!series.isHidden&&!series.outOfRange){if(series.visible&&!series.isHiding){allHidden=false}var seriesSelectionMin=series.selectionMin(_this);var seriesSelectionMax=series.selectionMax(_this);if(isNumber$1(seriesSelectionMin)){if(!isNumber$1(selectionMin)||seriesSelectionMin<selectionMin){selectionMin=seriesSelectionMin}}if(isNumber$1(seriesSelectionMax)){if(!isNumber$1(selectionMax)||seriesSelectionMax>selectionMax){selectionMax=seriesSelectionMax}}}}));if(this.includeRangesInMinMax){this.axisRanges.each((function(range){if(!range.ignoreMinMax){var minValue=min$2(range.value,range.endValue);var maxValue=max$2(range.value,range.endValue);if(minValue<selectionMin){selectionMin=minValue}if(maxValue>selectionMax){selectionMax=maxValue}}}))}if(isNumber$1(this._minDefined)){if(this.strictMinMax){selectionMin=this._minDefined}else{selectionMin=this.min}}else if(this.strictMinMax){selectionMin=this._minReal}if(isNumber$1(this._maxDefined)){if(this.strictMinMax){selectionMax=this._maxDefined}else{selectionMax=this.max}}else if(this.strictMinMax){selectionMax=this._maxReal}if(selectionMin==selectionMax){selectionMin-=this._deltaMinMax;selectionMax+=this._deltaMinMax;var minMaxStep2=this.adjustMinMax(selectionMin,selectionMax,0,this._gridCount,this.strictMinMax);selectionMin=minMaxStep2.min;selectionMax=minMaxStep2.max}var dif=this.adjustDifference(selectionMin,selectionMax);var minMaxStep=this.adjustMinMax(selectionMin,selectionMax,dif,this._gridCount);selectionMin=minMaxStep.min;selectionMax=minMaxStep.max;selectionMin-=(selectionMax-selectionMin)*this.extraMin;selectionMax+=(selectionMax-selectionMin)*this.extraMax;selectionMin=fitToRange(selectionMin,this.min,this.max);selectionMax=fitToRange(selectionMax,this.min,this.max);dif=this.adjustDifference(selectionMin,selectionMax);minMaxStep=this.adjustMinMax(selectionMin,selectionMax,dif,this._gridCount,true);selectionMin=minMaxStep.min;selectionMax=minMaxStep.max;if(this.strictMinMax){selectionMin=max$2(selectionMin,this._minDefined);selectionMax=min$2(selectionMax,this._maxDefined)}var step=minMaxStep.step;if(this.syncWithAxis){minMaxStep=this.syncAxes(selectionMin,selectionMax,step);selectionMin=minMaxStep.min;selectionMax=minMaxStep.max;this.invalidate()}step=minMaxStep.step;this._difference=this.adjustDifference(this.min,this.max);var start=this.valueToPosition(selectionMin);var end=this.valueToPosition(selectionMax);if(allHidden&&!this.syncWithAxis){start=0;end=1}var declination=0;if(this.syncWithAxis){declination=5;this.setCache(selectionMin+"-"+selectionMax,step)}else{if(this._step!=step||this._minZoomed!=selectionMin||this._maxZoomed!=selectionMax){this._dsc=true}this._step=step;this._minZoomed=selectionMin;this._maxZoomed=selectionMax}if(!this.keepSelection){this.zoom({start,end},false,false,declination)}};Object.defineProperty(ValueAxis.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(value){if(this.setPropertyValue("strictMinMax",value)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(value){if(this.setPropertyValue("logarithmic",value)){this.invalidate();this.series.each((function(series){series.invalidateDataItems()}))}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(value){this.setPropertyValue("keepSelection",value)},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(value){this.setPropertyValue("includeRangesInMinMax",value)},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(value){if(this.setPropertyValue("maxPrecision",value)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(value){if(this.setPropertyValue("extraTooltipPrecision",value)){this.invalidate()}},enumerable:true,configurable:true});ValueAxis.prototype.handleExtremesChange=function(){var _this=this;this._extremesChanged=true;this.getMinMax();if(this.ghostLabel){var mw_1=0;this.dataItems.each((function(dataItem){if(dataItem.label&&dataItem.label.pixelWidth>mw_1){_this.ghostLabel.text=dataItem.label.currentText}}))}};ValueAxis.prototype.getX=function(dataItem,key,location,stackKey,range){return this.renderer.positionToPoint(this.getPositionX(dataItem,key,location,stackKey,range)).x};ValueAxis.prototype.getPositionX=function(dataItem,key,location,stackKey,range){var value=dataItem.getWorkingValue(key);if(!hasValue(stackKey)){stackKey="valueX"}var stack=dataItem.getValue(stackKey,"stack");if(!isNumber$1(value)){value=this.baseValue;if(this.logarithmic){if(stack>0){value=0}}}var position=this.valueToPosition(value+stack);if(range){position=fitToRange(position,range.start,range.end)}return position};ValueAxis.prototype.getY=function(dataItem,key,location,stackKey,range){return this.renderer.positionToPoint(this.getPositionY(dataItem,key,location,stackKey,range)).y};ValueAxis.prototype.getPositionY=function(dataItem,key,location,stackKey,range){var value=dataItem.getWorkingValue(key);if(!hasValue(stackKey)){stackKey="valueY"}var stack=dataItem.getValue(stackKey,"stack");if(!isNumber$1(value)){value=this.baseValue;if(this.logarithmic){if(stack>0){value=0}}}var position=this.valueToPosition(value+stack);if(range){position=fitToRange(position,range.start,range.end)}return position};ValueAxis.prototype.getAngle=function(dataItem,key,location,stackKey,range){var value=dataItem.getWorkingValue(key);var stack=dataItem.getValue(stackKey,"stack");if(!isNumber$1(value)){value=this.baseValue}var position=this.valueToPosition(value+stack);if(range){position=fitToRange(position,range.start,range.end)}return this.positionToAngle(position)};ValueAxis.prototype.getAnyRangePath=function(start,end,location){var startPosition=this.valueToPosition(start);var endPosition=this.valueToPosition(end);return this.getPositionRangePath(startPosition,endPosition)};ValueAxis.prototype.getTooltipText=function(position){var value=round$1(this.positionToValue(position),this._stepDecimalPlaces+this.extraTooltipPrecision);var valueStr=this.tooltip.numberFormatter.format(value);if(!this._adapterO){return valueStr}else{return this._adapterO.apply("getTooltipText",valueStr)}};ValueAxis.prototype.zoomToValues=function(startValue,endValue,skipRangeEvent,instantly){var start=(startValue-this.min)/(this.max-this.min);var end=(endValue-this.min)/(this.max-this.min);this.zoom({start,end},skipRangeEvent,instantly)};Object.defineProperty(ValueAxis.prototype,"minZoomed",{get:function(){if(!this.syncWithAxis){return max$2(this.min,this._minZoomed)}else{return this._minZoomed}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"maxZoomed",{get:function(){if(!this.syncWithAxis){return min$2(this.max,this._maxZoomed)}else{return this._maxZoomed}},enumerable:true,configurable:true});ValueAxis.prototype.fixAxisBreaks=function(){var _this=this;_super.prototype.fixAxisBreaks.call(this);var axisBreaks=this._axisBreaks;if(axisBreaks&&axisBreaks.length>0){axisBreaks.each((function(axisBreak){var startValue=axisBreak.adjustedStartValue;var endValue=axisBreak.adjustedEndValue;var axisBreakDif=endValue-startValue;var axisBreakGridCount=Math.ceil(axisBreakDif*axisBreak.breakSize)*_this._gridCount/(_this.max-_this.min);var breakMinMaxStep=_this.adjustMinMax(startValue,endValue,axisBreakDif,axisBreakGridCount,true);axisBreak.adjustedStep=breakMinMaxStep.step;axisBreak.adjustedMin=breakMinMaxStep.min;axisBreak.adjustedMax=breakMinMaxStep.max}))}this._difference=this.adjustDifference(this.min,this.max)};ValueAxis.prototype.getPositionLabel=function(position){var value=this.positionToValue(position);return this.numberFormatter.format(value)};ValueAxis.prototype.showTooltipAt=function(value){this.showTooltipAtPosition(this.valueToPosition(value))};ValueAxis.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.min=source.min;this.max=source.max;this.calculateTotals=source.calculateTotals;this._baseValue=source.baseValue};Object.defineProperty(ValueAxis.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(axis){var _this=this;if(this.setPropertyValue("syncWithAxis",axis,true)){if(axis){this._disposers.push(axis.events.on("extremeschanged",this.handleSelectionExtremesChange,this,false));this._disposers.push(axis.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,false));this._disposers.push(axis.events.on("startendchanged",this.handleSelectionExtremesChange,this,false));this.events.on("shown",this.handleSelectionExtremesChange,this,false);this.events.on("maxsizechanged",(function(){_this.clearCache();_this._disposers.push(registry.events.once("exitframe",(function(){_this.handleSelectionExtremesChange()})))}),this,false)}}},enumerable:true,configurable:true});Object.defineProperty(ValueAxis.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(value){this.setPropertyValue("treatZeroAs",value,true)},enumerable:true,configurable:true});ValueAxis.prototype.syncAxes=function(min,max,step){var axis=this.syncWithAxis;if(axis){if(!isNumber$1(min)){min=this.min}if(!isNumber$1(max)){max=this.max}if(!isNumber$1(step)){step=this._step}var count=Math.round((axis.maxZoomed-axis.minZoomed)/axis.step);var currentCount=Math.round((max-min)/step);if(isNumber$1(count)&&isNumber$1(currentCount)){var synced=false;var c=0;var diff=(max-min)*.01;var omin=min;var omax=max;var ostep=step;while(synced!=true){synced=this.checkSync(omin,omax,ostep,count);c++;if(c>1e3){synced=true}if(!synced){if(c/3==Math.round(c/3)){omin=min-diff*c;if(min>=0&&omin<0){omin=0}}else{omax=max+diff*c;if(omax<=0&&omax>0){omax=0}}var minMaxStep=this.adjustMinMax(omin,omax,omax-omin,this._gridCount,true);omin=minMaxStep.min;omax=minMaxStep.max;ostep=minMaxStep.step}else{min=omin;max=omax;step=ostep}}}}return{min,max,step}};ValueAxis.prototype.checkSync=function(min,max,step,count){var currentCount=(max-min)/step;for(var i=1;i<count;i++){if(round$1(currentCount/i,1)==count||currentCount*i==count){return true}}return false};ValueAxis.prototype.processConfig=function(config){if(config){if(hasValue(config.syncWithAxis)&&isString$1(config.syncWithAxis)){if(this.map.hasKey(config.syncWithAxis)){config.syncWithAxis=this.map.getKey(config.syncWithAxis)}else{this.processingErrors.push('[ValueAxis] No axis with id "'+config.syncWithAxis+'" found for `syncWithAxis`');delete config.xAxis}}}_super.prototype.processConfig.call(this,config)};ValueAxis.prototype._saveMinMax=function(_min,_max){};return ValueAxis}(Axis);registry.registeredClasses["ValueAxis"]=ValueAxis;registry.registeredClasses["ValueAxisDataItem"]=ValueAxisDataItem;var DateAxisBreak=function(_super){__extends(DateAxisBreak,_super);function DateAxisBreak(){var _this=_super.call(this)||this;_this.className="DateAxisBreak";_this.applyTheme();return _this}Object.defineProperty(DateAxisBreak.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(value){if(this.setPropertyValue("startDate",value)){this.startValue=value.getTime();if(this.axis){this.axis.invalidate();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(DateAxisBreak.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(value){if(this.setPropertyValue("endDate",value)){this.endValue=value.getTime();if(this.axis){this.axis.invalidate();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});return DateAxisBreak}(ValueAxisBreak);registry.registeredClasses["DateAxisBreak"]=DateAxisBreak;var DateAxisDataItem=function(_super){__extends(DateAxisDataItem,_super);function DateAxisDataItem(){var _this=_super.call(this)||this;_this.className="DateAxisDataItem";_this.applyTheme();_this.values.date={};_this.values.endDate={};return _this}Object.defineProperty(DateAxisDataItem.prototype,"date",{get:function(){return this.dates["date"]},set:function(date){this.setDate("date",date);this.value=date.getTime()},enumerable:true,configurable:true});Object.defineProperty(DateAxisDataItem.prototype,"endDate",{get:function(){return this.dates["endDate"]},set:function(date){this.setDate("endDate",date);this.endValue=date.getTime()},enumerable:true,configurable:true});return DateAxisDataItem}(ValueAxisDataItem);var DateAxis=function(_super){__extends(DateAxis,_super);function DateAxis(){var _this=_super.call(this)||this;_this._gapBreaks=false;_this.gridIntervals=new List;_this.groupIntervals=new List;_this.dateFormats=new Dictionary;_this.periodChangeDateFormats=new Dictionary;_this._baseIntervalReal={timeUnit:"day",count:1};_this._prevSeriesTime={};_this._minDifference={};_this._firstWeekDay=1;_this.groupMin={};_this.groupMax={};_this._intervalMax={};_this._intervalMin={};_this.className="DateAxis";_this.setPropertyValue("markUnitChange",true);_this.snapTooltip=true;_this.tooltipPosition="pointer";_this.setPropertyValue("groupData",false);_this.groupCount=200;_this.events.on("parentset",_this.getDFFormatter,_this,false);_this.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]);_this.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]);_this.axisFieldName="date";_this.applyTheme();return _this}DateAxis.prototype.fillRule=function(dataItem){var value=dataItem.value;var axis=dataItem.component;var gridInterval=axis._gridInterval;var gridDuration=getDuration(gridInterval.timeUnit,gridInterval.count);if(Math.round((value-axis.min)/gridDuration)/2==Math.round(Math.round((value-axis.min)/gridDuration)/2)){dataItem.axisFill.__disabled=true}else{dataItem.axisFill.__disabled=false}};DateAxis.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!this.dateFormats.hasKey("millisecond")){this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond"))}if(!this.dateFormats.hasKey("second")){this.dateFormats.setKey("second",this.language.translate("_date_second"))}if(!this.dateFormats.hasKey("minute")){this.dateFormats.setKey("minute",this.language.translate("_date_minute"))}if(!this.dateFormats.hasKey("hour")){this.dateFormats.setKey("hour",this.language.translate("_date_hour"))}if(!this.dateFormats.hasKey("day")){this.dateFormats.setKey("day",this.language.translate("_date_day"))}if(!this.dateFormats.hasKey("week")){this.dateFormats.setKey("week",this.language.translate("_date_day"))}if(!this.dateFormats.hasKey("month")){this.dateFormats.setKey("month",this.language.translate("_date_month"))}if(!this.dateFormats.hasKey("year")){this.dateFormats.setKey("year",this.language.translate("_date_year"))}if(!this.periodChangeDateFormats.hasKey("millisecond")){this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond"))}if(!this.periodChangeDateFormats.hasKey("second")){this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second"))}if(!this.periodChangeDateFormats.hasKey("minute")){this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute"))}if(!this.periodChangeDateFormats.hasKey("hour")){this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day"))}if(!this.periodChangeDateFormats.hasKey("day")){this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day"))}if(!this.periodChangeDateFormats.hasKey("week")){this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day"))}if(!this.periodChangeDateFormats.hasKey("month")){this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))}};DateAxis.prototype.createDataItem=function(){return new DateAxisDataItem};DateAxis.prototype.createAxisBreak=function(){return new DateAxisBreak};DateAxis.prototype.validateDataItems=function(){var start=this.start;var end=this.end;var baseDuration=this.baseDuration;var periodCount=(this.max-this.min)/baseDuration;this._firstWeekDay=this.getFirstWeekDay();this.getDFFormatter();_super.prototype.validateDataItems.call(this);var mainBaseDuration=getDuration(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/mainBaseDuration);this._deltaMinMax=this.baseDuration/2;var newPeriodCount=(this.max-this.min)/baseDuration;start=start+(end-start)*(1-periodCount/newPeriodCount);this.zoom({start,end},false,true)};DateAxis.prototype.handleSelectionExtremesChange=function(){};DateAxis.prototype.getIntervalMax=function(interval){return this._intervalMax[interval.timeUnit+interval.count]};DateAxis.prototype.getIntervalMin=function(interval){return this._intervalMin[interval.timeUnit+interval.count]};DateAxis.prototype.calculateZoom=function(){var _this=this;_super.prototype.calculateZoom.call(this);var difference=this.adjustDifference(this._minZoomed,this._maxZoomed);var dataSetChanged=false;if(this.groupData&&hasValue(difference)){var mainBaseInterval=this.mainBaseInterval;var min=this.getIntervalMin(mainBaseInterval);var max=this.getIntervalMax(mainBaseInterval);var selectionMin=min+(max-min)*this.start;var selectionMax=min+(max-min)*this.end;var diff=this.adjustDifference(selectionMin,selectionMax);var modifiedDifference=diff+(this.startLocation+(1-this.endLocation))*this.baseDuration;var groupInterval=void 0;if(this.groupInterval){groupInterval=__assign({},this.groupInterval)}else{groupInterval=this.chooseInterval(0,modifiedDifference,this.groupCount,this.groupIntervals);if(getDuration(groupInterval.timeUnit,groupInterval.count)<getDuration(mainBaseInterval.timeUnit,mainBaseInterval.count)){groupInterval=__assign({},mainBaseInterval)}}this._groupInterval=groupInterval;var newId=groupInterval.timeUnit+groupInterval.count;if(this._currentDataSetId!=newId){this._currentDataSetId=newId;this.dispatch("groupperiodchanged")}this.series.each((function(series){if(series.baseAxis==_this){if(series.setDataSet(_this._currentDataSetId)){dataSetChanged=true}}}))}var gridInterval=this.chooseInterval(0,difference,this._gridCount);if(getDuration(gridInterval.timeUnit,gridInterval.count)<this.baseDuration){gridInterval=__assign({},this.baseInterval)}this._gridInterval=gridInterval;this._nextGridUnit=getNextUnit(gridInterval.timeUnit);this._intervalDuration=getDuration(gridInterval.timeUnit,gridInterval.count);this._gridDate=round(new Date(this.minZoomed-getDuration(gridInterval.timeUnit,gridInterval.count)),gridInterval.timeUnit,gridInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone);each(this.series.iterator(),(function(series){if(series.baseAxis==_this){var field_1=series.getAxisField(_this);var minZoomed=round(new Date(_this._minZoomed+_this.baseDuration*.05),_this.baseInterval.timeUnit,_this.baseInterval.count,_this._firstWeekDay,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone).getTime();var minZoomedStr=minZoomed.toString();var startDataItem=series.dataItemsByAxis.getKey(_this.uid).getKey(minZoomedStr+series.currentDataSetId);var startIndex=0;if(_this.start!=0){if(startDataItem){startDataItem=_this.findFirst(startDataItem,minZoomed,field_1);startIndex=startDataItem.index}else{startIndex=series.dataItems.findClosestIndex(_this._minZoomed,(function(x){return x[field_1]}),"left")}}var baseInterval=_this.baseInterval;var maxZoomed=add(round(new Date(_this._maxZoomed),baseInterval.timeUnit,baseInterval.count,_this._firstWeekDay,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone),baseInterval.timeUnit,baseInterval.count,_this._df.utc).getTime();var maxZoomedStr=maxZoomed.toString();var endDataItem=series.dataItemsByAxis.getKey(_this.uid).getKey(maxZoomedStr+series.currentDataSetId);var endIndex=series.dataItems.length;if(_this.end!=1){if(endDataItem){endIndex=endDataItem.index}else{maxZoomed-=1;endIndex=series.dataItems.findClosestIndex(maxZoomed,(function(x){return x[field_1]}),"right");endIndex++}}if(series.max(_this)<minZoomed){series.startIndex=series.dataItems.length;series.endIndex=series.dataItems.length;series.outOfRange=true}else if(series.min(_this)>maxZoomed){series.startIndex=0;series.endIndex=0;series.outOfRange=true}else{series.outOfRange=false;series.startIndex=startIndex;series.endIndex=endIndex}if(!dataSetChanged&&series.dataRangeInvalid){series.validateDataRange()}}}))};DateAxis.prototype.findFirst=function(dataItem,time,key){var index=dataItem.index;if(index>0){var series=dataItem.component;var previousDataItem=series.dataItems.getIndex(index-1);var previousDate=previousDataItem[key];if(!previousDate||previousDate.getTime()<time){return dataItem}else{return this.findFirst(previousDataItem,time,key)}}else{return dataItem}};DateAxis.prototype.validateData=function(){_super.prototype.validateData.call(this);if(!isNumber$1(this.baseInterval.count)){this.baseInterval.count=1}};Object.defineProperty(DateAxis.prototype,"minDifference",{get:function(){var _this=this;var minDifference=Number.MAX_VALUE;this.series.each((function(series){if(minDifference>_this._minDifference[series.uid]){minDifference=_this._minDifference[series.uid]}}));if(minDifference==Number.MAX_VALUE||minDifference==0){minDifference=getDuration("day")}return minDifference},enumerable:true,configurable:true});DateAxis.prototype.seriesDataChangeUpdate=function(series){this._minDifference[series.uid]=Number.MAX_VALUE};DateAxis.prototype.postProcessSeriesDataItems=function(series){var _this=this;this._firstWeekDay=this.getFirstWeekDay();if(series){this.seriesGroupUpdate(series)}else{this.series.each((function(series){_this.seriesGroupUpdate(series)}))}this.addEmptyUnitsBreaks()};DateAxis.prototype.seriesGroupUpdate=function(series){var _this=this;if(JSON.stringify(series._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)){series._baseInterval[this.uid]=this.mainBaseInterval;series.mainDataSet.each((function(dataItem){_this.postProcessSeriesDataItem(dataItem)}));if(this.groupData){this.groupSeriesData(series)}}};DateAxis.prototype.groupSeriesData=function(series){var _this=this;if(series.baseAxis==this&&series.dataItems.length>0&&!series.dataGrouped){series.bulletsContainer.removeChildren();var intervals_1=[];var mainBaseInterval=this.mainBaseInterval;var mainIntervalDuration_1=getDuration(mainBaseInterval.timeUnit,mainBaseInterval.count);this.groupIntervals.each((function(interval){var intervalDuration=getDuration(interval.timeUnit,interval.count);if(intervalDuration>mainIntervalDuration_1&&intervalDuration<_this.max-_this.min||_this.groupInterval){intervals_1.push(interval)}}));if(series._dataSets){series._dataSets.each((function(key,dataItems){dataItems.each((function(dataItem){dataItem.dispose()}));dataItems.clear()}));series._dataSets.clear()}series.dataGrouped=true;each$2(intervals_1,(function(interval){var key="date"+_this.axisLetter;var dataSetId=interval.timeUnit+interval.count;var dataSet=new OrderedListTemplate(series.mainDataSet.template.clone());series.dataSets.setKey(dataSetId,dataSet);var dataItems=series.mainDataSet;var previousTime=Number.NEGATIVE_INFINITY;var i=0;var newDataItem;var dataFields=[];each$1(series.dataFields,(function(dfkey,df){var dfk=dfkey;if(dfk!=key&&dfk.indexOf("Show")==-1){dataFields.push(dfk)}}));var roundedDate;dataItems.each((function(dataItem){var date=dataItem.getDate(key);if(date){var time=date.getTime();roundedDate=round(new Date(time),interval.timeUnit,interval.count,_this._df.firstDayOfWeek,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone);var currentTime=roundedDate.getTime();if(previousTime<currentTime){if(newDataItem&&series._adapterO){each$2(dataFields,(function(vkey){newDataItem.values[vkey].value=series._adapterO.apply("groupDataItem",{dataItem:newDataItem,interval,dataField:vkey,date:roundedDate,value:newDataItem.values[vkey].value}).value;newDataItem.values[vkey].workingValue=newDataItem.values[vkey].value}))}newDataItem=dataSet.create();newDataItem.dataContext={};newDataItem.setWorkingLocation("dateX",series.dataItems.template.locations.dateX,0);newDataItem.setWorkingLocation("openDateX",series.dataItems.template.locations.openDateX,0);newDataItem.setWorkingLocation("dateY",series.dataItems.template.locations.dateY,0);newDataItem.setWorkingLocation("openDateY",series.dataItems.template.locations.openDateY,0);newDataItem.component=series;newDataItem.setDate(key,roundedDate);newDataItem._index=i;i++;each$2(dataFields,(function(vkey){var dvalues=dataItem.values[vkey];if(dvalues){var value=dvalues.value;if(series._adapterO){value=series._adapterO.apply("groupValue",{dataItem,interval,dataField:vkey,date:roundedDate,value}).value}var values=newDataItem.values[vkey];if(isNumber$1(value)){values.value=value;values.workingValue=value;values.open=value;values.close=value;values.low=value;values.high=value;values.sum=value;values.average=value;values.count=1}else{values.count=0}}}));_this.postProcessSeriesDataItem(newDataItem,interval);each$1(series.propertyFields,(function(key,fieldValue){var f=key;var value=dataItem.properties[key];if(hasValue(value)){newDataItem.hasProperties=true;newDataItem.setProperty(f,value)}}));newDataItem.groupDataItems=[dataItem];previousTime=currentTime}else{if(newDataItem){each$2(dataFields,(function(vkey){var groupFieldName=series.groupFields[vkey];var dvalues=dataItem.values[vkey];if(dvalues){var value=dvalues.value;if(series._adapterO){value=series._adapterO.apply("groupValue",{dataItem,interval,dataField:vkey,date:roundedDate,value}).value}if(isNumber$1(value)){var values=newDataItem.values[vkey];if(!isNumber$1(values.open)){values.open=value}values.close=value;if(values.low>value||!isNumber$1(values.low)){values.low=value}if(values.high<value||!isNumber$1(values.high)){values.high=value}if(isNumber$1(values.sum)){values.sum+=value}else{values.sum=value}values.count++;values.average=values.sum/values.count;if(isNumber$1(values[groupFieldName])){values.value=values[groupFieldName];values.workingValue=values.value}}}}));copyProperties(dataItem.properties,newDataItem.properties);each$1(series.propertyFields,(function(key,fieldValue){var f=key;var value=dataItem.properties[key];if(hasValue(value)){newDataItem.hasProperties=true;newDataItem.setProperty(f,value)}}));newDataItem.groupDataItems.push(dataItem)}}}if(newDataItem){copyProperties(dataItem.dataContext,newDataItem.dataContext)}}));if(newDataItem&&series._adapterO){each$2(dataFields,(function(vkey){newDataItem.values[vkey].value=series._adapterO.apply("groupDataItem",{dataItem:newDataItem,interval,dataField:vkey,date:roundedDate,value:newDataItem.values[vkey].value}).value;newDataItem.values[vkey].workingValue=newDataItem.values[vkey].value}))}}));this.calculateZoom()}};DateAxis.prototype.getDFFormatter=function(){this._df=this.dateFormatter};DateAxis.prototype.postProcessSeriesDataItem=function(dataItem,interval){var _this=this;var intervalID="";if(interval){intervalID=interval.timeUnit+interval.count}else{interval=this.mainBaseInterval}var series=dataItem.component;var dataItemsByAxis=series.dataItemsByAxis.getKey(this.uid);each$1(dataItem.dates,(function(key){var date=dataItem.getDate(key);var time=date.getTime();var startDate=round(new Date(time),interval.timeUnit,interval.count,_this._firstWeekDay,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone);var startTime=startDate.getTime();var endDate=add(new Date(startTime),interval.timeUnit,interval.count,_this._df.utc);dataItem.setCalculatedValue(key,startTime,"open");dataItem.setCalculatedValue(key,endDate.getTime(),"close");dataItemsByAxis.setKey(startTime+intervalID,dataItem)}))};DateAxis.prototype.addEmptyUnitsBreaks=function(){var _this=this;if(this.skipEmptyPeriods&&isNumber$1(this.min)&&isNumber$1(this.max)){var timeUnit=this.baseInterval.timeUnit;var count=this.baseInterval.count;if(this._axisBreaks){this._axisBreaks.clear()}var date=round(new Date(this.min),timeUnit,count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);var axisBreak=void 0;var _loop_1=function(){add(date,timeUnit,count,this_1._df.utc);var startTime=date.getTime();var startTimeStr=startTime.toString();var hasData=contains$3(this_1.series.iterator(),(function(series){return!!series.dataItemsByAxis.getKey(_this.uid).getKey(startTimeStr+series.currentDataSetId)}));if(!hasData){if(!axisBreak){axisBreak=this_1.axisBreaks.create();axisBreak.startDate=new Date(startTime);this_1._gapBreaks=true}}else{if(axisBreak){axisBreak.endDate=new Date(startTime-1);axisBreak=undefined}}};var this_1=this;while(date.getTime()<this.max-this.baseDuration){_loop_1()}}};DateAxis.prototype.fixAxisBreaks=function(){var _this=this;_super.prototype.fixAxisBreaks.call(this);var axisBreaks=this._axisBreaks;if(axisBreaks){if(axisBreaks.length>0){axisBreaks.each((function(axisBreak){var breakGridCount=Math.ceil(_this._gridCount*(Math.min(_this.end,axisBreak.endPosition)-Math.max(_this.start,axisBreak.startPosition))/(_this.end-_this.start));axisBreak.gridInterval=_this.chooseInterval(0,axisBreak.adjustedEndValue-axisBreak.adjustedStartValue,breakGridCount);var gridDate=round(new Date(axisBreak.adjustedStartValue),axisBreak.gridInterval.timeUnit,axisBreak.gridInterval.count,_this._firstWeekDay,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone);if(gridDate.getTime()>axisBreak.startDate.getTime()){add(gridDate,axisBreak.gridInterval.timeUnit,axisBreak.gridInterval.count,_this._df.utc)}axisBreak.gridDate=gridDate}))}}};DateAxis.prototype.getFirstWeekDay=function(){if(this._df){return this._df.firstDayOfWeek}return 1};DateAxis.prototype.getGridDate=function(date,intervalCount){var timeUnit=this._gridInterval.timeUnit;var realIntervalCount=this._gridInterval.count;round(date,timeUnit,1,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);var prevTimestamp=date.getTime();var newDate=copy$2(date);var timestamp=add(newDate,timeUnit,intervalCount,this._df.utc).getTime();var axisBreak=this.isInBreak(timestamp);if(axisBreak&&axisBreak.endDate){newDate=new Date(axisBreak.endDate.getTime());round(newDate,timeUnit,realIntervalCount,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);if(newDate.getTime()<axisBreak.endDate.getTime()){add(newDate,timeUnit,realIntervalCount,this._df.utc)}timestamp=newDate.getTime()}var durationBreaksRemoved=this.adjustDifference(prevTimestamp,timestamp);var countBreaksRemoved=Math.round(durationBreaksRemoved/getDuration(timeUnit));if(countBreaksRemoved<realIntervalCount){return this.getGridDate(date,intervalCount+realIntervalCount)}return newDate};DateAxis.prototype.getBreaklessDate=function(axisBreak,timeUnit,count){var date=new Date(axisBreak.endValue);round(date,timeUnit,count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);add(date,timeUnit,count,this._df.utc);var timestamp=date.getTime();axisBreak=this.isInBreak(timestamp);if(axisBreak){return this.getBreaklessDate(axisBreak,timeUnit,count)}return date};DateAxis.prototype.validateAxisElements=function(){var _this=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){this.calculateZoom();var timestamp=this._gridDate.getTime();var timeUnit=this._gridInterval.timeUnit;var intervalCount=this._gridInterval.count;var prevGridDate=copy$2(this._gridDate);var dataItemsIterator_1=this._dataItemsIterator;this.resetIterators();var _loop_2=function(){var date=this_2.getGridDate(copy$2(prevGridDate),intervalCount);timestamp=date.getTime();var endDate=copy$2(date);endDate=add(endDate,timeUnit,intervalCount,this_2._df.utc);var format=this_2.dateFormats.getKey(timeUnit);if(this_2.markUnitChange&&prevGridDate){if(checkChange(date,prevGridDate,this_2._nextGridUnit,this_2._df.utc)){if(timeUnit!=="year"){format=this_2.periodChangeDateFormats.getKey(timeUnit)}}}var text=this_2._df.format(date,format);var dataItem=dataItemsIterator_1.find((function(x){return x.text===text}));if(dataItem.__disabled){dataItem.__disabled=false}this_2.appendDataItem(dataItem);dataItem.axisBreak=undefined;dataItem.date=date;dataItem.endDate=endDate;dataItem.text=text;this_2.validateDataElement(dataItem);prevGridDate=date};var this_2=this;while(timestamp<=this._maxZoomed){_loop_2()}var renderer_1=this.renderer;if(this._axisBreaks){each(this._axisBreaks.iterator(),(function(axisBreak){if(axisBreak.breakSize>0){var timeUnit_1=axisBreak.gridInterval.timeUnit;var intervalCount_1=axisBreak.gridInterval.count;if(getDistance(axisBreak.startPoint,axisBreak.endPoint)>renderer_1.minGridDistance*4){var timestamp_1=axisBreak.gridDate.getTime();var prevGridDate_1;var count=0;var _loop_3=function(){var date=copy$2(axisBreak.gridDate);timestamp_1=add(date,timeUnit_1,intervalCount_1*count,_this._df.utc).getTime();count++;if(timestamp_1>axisBreak.adjustedStartValue&&timestamp_1<axisBreak.adjustedEndValue){var endDate=copy$2(date);endDate=add(endDate,timeUnit_1,intervalCount_1,_this._df.utc);var format=_this.dateFormats.getKey(timeUnit_1);if(_this.markUnitChange&&prevGridDate_1){if(checkChange(date,prevGridDate_1,_this._nextGridUnit,_this._df.utc)){if(timeUnit_1!=="year"){format=_this.periodChangeDateFormats.getKey(timeUnit_1)}}}var text_1=_this._df.format(date,format);var dataItem=dataItemsIterator_1.find((function(x){return x.text===text_1}));if(dataItem.__disabled){dataItem.__disabled=false}_this.appendDataItem(dataItem);dataItem.axisBreak=axisBreak;axisBreak.dataItems.moveValue(dataItem);dataItem.date=date;dataItem.endDate=endDate;dataItem.text=text_1;prevGridDate_1=date;_this.validateDataElement(dataItem)}};while(timestamp_1<=axisBreak.adjustedMax){_loop_3()}}}}))}}};DateAxis.prototype.validateDataElement=function(dataItem){dataItem.itemIndex=this._axisItemCount;this._axisItemCount++;if(isNumber$1(this.max)&&isNumber$1(this.min)){var renderer=this.renderer;var timestamp=dataItem.value;var endTimestamp=dataItem.endValue;if(!isNumber$1(endTimestamp)){endTimestamp=timestamp}var position=this.valueToPosition(timestamp);var endPosition=this.valueToPosition(endTimestamp);var fillEndPosition=endPosition;if(!dataItem.isRange&&this._gridInterval.count>this.baseInterval.count){endPosition=position+(endPosition-position)/(this._gridInterval.count/this.baseInterval.count)}dataItem.position=position;var tick=dataItem.tick;if(tick&&!tick.disabled){renderer.updateTickElement(tick,position,endPosition)}var grid=dataItem.grid;if(grid&&!grid.disabled){renderer.updateGridElement(grid,position,endPosition)}var fill=dataItem.axisFill;if(fill&&!fill.disabled){renderer.updateFillElement(fill,position,fillEndPosition);if(!dataItem.isRange){this.fillRule(dataItem)}}var mask=dataItem.mask;if(mask){renderer.updateFillElement(mask,position,endPosition)}if(dataItem.bullet){renderer.updateBullet(dataItem.bullet,position,endPosition)}var label=dataItem.label;if(label&&!label.disabled){var location_1=label.location;if(location_1==0){if(this._gridInterval.count==1&&this._gridInterval.timeUnit!="week"&&!dataItem.isRange){location_1=.5}else{location_1=0}}renderer.updateLabelElement(label,position,endPosition,location_1)}}};Object.defineProperty(DateAxis.prototype,"baseDuration",{get:function(){return getDuration(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:true,configurable:true});DateAxis.prototype.adjustMinMax=function(min,max){return{min,max,step:this.baseDuration}};DateAxis.prototype.fixMin=function(value){var interval=this.baseInterval;var startTime=round(new Date(value),interval.timeUnit,interval.count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone).getTime();var endTime=add(new Date(startTime),interval.timeUnit,interval.count,this._df.utc).getTime();return startTime+(endTime-startTime)*this.startLocation};DateAxis.prototype.fixMax=function(value){var interval=this.baseInterval;var startTime=round(new Date(value),interval.timeUnit,interval.count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone).getTime();var endTime=add(new Date(startTime),interval.timeUnit,interval.count,this._df.utc).getTime();return startTime+(endTime-startTime)*this.endLocation};DateAxis.prototype.chooseInterval=function(index,duration,gridCount,intervals){if(!intervals){intervals=this.gridIntervals}var gridInterval=intervals.getIndex(index);var intervalDuration=getDuration(gridInterval.timeUnit,gridInterval.count);var lastIndex=intervals.length-1;if(index>=lastIndex){return __assign({},intervals.getIndex(lastIndex))}var count=Math.ceil(duration/intervalDuration);if(duration<intervalDuration&&index>0){return __assign({},intervals.getIndex(index-1))}if(count<=gridCount){return __assign({},intervals.getIndex(index))}else{if(index+1<intervals.length){return this.chooseInterval(index+1,duration,gridCount,intervals)}else{return __assign({},intervals.getIndex(index))}}};DateAxis.prototype.formatLabel=function(value){return this._df.format(value)};DateAxis.prototype.dateToPosition=function(date){return this.valueToPosition(date.getTime())};DateAxis.prototype.anyToPosition=function(date){if(date instanceof Date){return this.dateToPosition(date)}else{return this.valueToPosition(date)}};DateAxis.prototype.dateToPoint=function(date){var position=this.dateToPosition(date);var point=this.renderer.positionToPoint(position);var angle=this.renderer.positionToAngle(position);return{x:point.x,y:point.y,angle}};DateAxis.prototype.anyToPoint=function(date){if(date instanceof Date){return this.dateToPoint(date)}else{return this.valueToPoint(date)}};DateAxis.prototype.positionToDate=function(position){return new Date(this.positionToValue(position))};DateAxis.prototype.getPositionX=function(dataItem,key,location,stackKey,range){var value=this.getTimeByLocation(dataItem,key,location);if(!isNumber$1(value)){value=this.baseValue}var position=this.valueToPosition(value);if(range){position=fitToRange(position,range.start,range.end)}return position};DateAxis.prototype.getPositionY=function(dataItem,key,location,stackKey,range){var value=this.getTimeByLocation(dataItem,key,location);var stack=dataItem.getValue("valueX","stack");if(!isNumber$1(value)){value=this.baseValue}var position=this.valueToPosition(value+stack);if(range){position=fitToRange(position,range.start,range.end)}return position};DateAxis.prototype.getAngle=function(dataItem,key,location,stackKey,range){var value=this.getTimeByLocation(dataItem,key,location);var stack=dataItem.getValue(stackKey,"stack");if(!isNumber$1(value)){value=this.baseValue}var position=this.valueToPosition(value+stack);if(range){position=fitToRange(position,range.start,range.end)}return this.positionToAngle(position)};DateAxis.prototype.getTimeByLocation=function(dataItem,key,location){if(!hasValue(key)){return}if(!isNumber$1(location)){location=dataItem.workingLocations[key];if(!isNumber$1(location)){location=0}}var startTime=dataItem.values[key]["open"];var endTime=dataItem.values[key]["close"];var workingValue=dataItem.values[key].workingValue;var value=dataItem.values[key].value;var difference=value-workingValue;startTime-=difference;endTime-=difference;if(isNumber$1(startTime)&&isNumber$1(endTime)){return startTime+(endTime-startTime)*location}};DateAxis.prototype.processSeriesDataItem=function(dataItem,axisLetter){var series=dataItem.component;var time;var date=dataItem["date"+axisLetter];if(isNumber$1(this.timezoneOffset)){date.setTime(date.getTime()+(date.getTimezoneOffset()-this.timezoneOffset)*6e4);dataItem.setValue("date"+axisLetter,date.getTime(),0)}else if(hasValue(this.timezone)){date=setTimezone(date,this.timezone);dataItem.setValue("date"+axisLetter,date.getTime(),0);dataItem["date"+axisLetter]=date}if(date){time=date.getTime()}else{return}var openDate=dataItem["openDate"+axisLetter];var prevSeriesTime=this._prevSeriesTime[series.uid];var openTime;if(openDate){openTime=openDate.getTime()}if(isNumber$1(openTime)){var difference=Math.abs(time-openTime);if(this._minDifference[series.uid]>difference){this._minDifference[series.uid]=difference}}var differece=time-prevSeriesTime;if(differece>0){if(this._minDifference[series.uid]>differece){this._minDifference[series.uid]=differece}}this._prevSeriesTime[series.uid]=time;if(series._baseInterval[this.uid]){this.postProcessSeriesDataItem(dataItem)}};DateAxis.prototype.updateAxisBySeries=function(){_super.prototype.updateAxisBySeries.call(this);var baseInterval=this.chooseInterval(0,this.minDifference,1);if(this.minDifference>=getDuration("day",27)&&baseInterval.timeUnit=="week"){baseInterval.timeUnit="month";baseInterval.count=1}if(baseInterval.timeUnit=="month"){if(this.minDifference>=getDuration("day",29*2)&&baseInterval.count==1){baseInterval.count=2}if(this.minDifference>=getDuration("day",29*3)&&baseInterval.count==2){baseInterval.count=3}if(this.minDifference>=getDuration("day",29*6)&&baseInterval.count==5){baseInterval.count=6}}if(this.minDifference>=getDuration("hour",23)&&baseInterval.timeUnit=="hour"){baseInterval.timeUnit="day";baseInterval.count=1}if(this.minDifference>=getDuration("week",1)-getDuration("hour",1)&&baseInterval.timeUnit=="day"){baseInterval.timeUnit="week";baseInterval.count=1}if(this.minDifference>=getDuration("year",1)-getDuration("day",1.01)&&baseInterval.timeUnit=="month"){baseInterval.timeUnit="year";baseInterval.count=1}this._baseIntervalReal=baseInterval;this._mainBaseInterval=baseInterval};Object.defineProperty(DateAxis.prototype,"baseInterval",{get:function(){if(this._groupInterval){return this._groupInterval}else if(this._baseInterval){return this._baseInterval}else{return this._baseIntervalReal}},set:function(timeInterval){if(JSON.stringify(this._baseInterval)!=JSON.stringify(timeInterval)){this._baseInterval=timeInterval;this._mainBaseInterval=timeInterval;if(!isNumber$1(timeInterval.count)){timeInterval.count=1}this.invalidate();this.postProcessSeriesDataItems()}},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"mainBaseInterval",{get:function(){if(this._baseInterval){return this._baseInterval}else if(this._mainBaseInterval){return this._mainBaseInterval}else{return this._baseIntervalReal}},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(value){if(value){var breakTemplate=this.axisBreaks.template;breakTemplate.startLine.disabled=true;breakTemplate.endLine.disabled=true;breakTemplate.fillShape.disabled=true;breakTemplate.breakSize=0}else{if(this._gapBreaks){this.axisBreaks.clear();this._gapBreaks=false}}if(this.setPropertyValue("skipEmptyPeriods",value)){this.invalidate();this.postProcessSeriesDataItems();this.invalidateSeries()}},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(value){this.setPropertyValue("tooltipDateFormat",value)},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(value){if(this.setPropertyValue("markUnitChange",value)){this.invalidateData()}},enumerable:true,configurable:true});DateAxis.prototype.getTooltipText=function(position){var text;var date=this.positionToDate(position);date=round(date,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone);this.tooltipDate=date;if(hasValue(this.tooltipDateFormat)){text=this._df.format(date,this.tooltipDateFormat,["day","month","week","year"].indexOf(this.baseInterval.timeUnit)==-1)}else{var dateFormat=this.dateFormats.getKey(this.baseInterval.timeUnit);if(dateFormat){text=this._df.format(date,dateFormat)}else{text=this.getPositionLabel(position)}}if(!this._adapterO){return text}else{return this._adapterO.apply("getTooltipText",text)}};DateAxis.prototype.roundPosition=function(position,location,axisLocation){var baseInterval=this.baseInterval;var timeUnit=baseInterval.timeUnit;var count=baseInterval.count;var date=this.positionToDate(position);round(date,timeUnit,count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);if(location>0){add(date,timeUnit,location*count,this._df.utc)}if(axisLocation>0&&axisLocation<1){date.setTime(date.getTime()+this.baseDuration*axisLocation)}if(this.isInBreak(date.getTime())){while(date.getTime()<this.max){add(date,timeUnit,count,this._df.utc);if(!this.isInBreak(date.getTime())){break}}}return this.dateToPosition(date)};DateAxis.prototype.getCellStartPosition=function(position){return this.roundPosition(position,0)};DateAxis.prototype.getCellEndPosition=function(position){return this.roundPosition(position,1)};DateAxis.prototype.getSeriesDataItem=function(series,position,findNearest){var value=this.positionToValue(position);var location=.5;if(this.axisLetter=="Y"){location=series.dataItems.template.locations.dateY}else{location=series.dataItems.template.locations.dateX}var deltaValue=value-location*this.baseDuration;var date=round(new Date(value),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);var nextDate=round(new Date(value+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);if(nextDate.getTime()>date.getTime()){if(Math.abs(nextDate.getTime()-deltaValue)<Math.abs(deltaValue-date.getTime())){date=nextDate}}var dataItemsByAxis=series.dataItemsByAxis.getKey(this.uid);var dataItem=dataItemsByAxis.getKey(date.getTime()+series.currentDataSetId);if(!dataItem&&findNearest){var key_1;if(this.axisLetter=="Y"){key_1="dateY"}else{key_1="dateX"}dataItem=series.dataItems.getIndex(series.dataItems.findClosestIndex(date.getTime(),(function(x){if(x[key_1]){return x[key_1].getTime()}else{return-Infinity}}),"any"))}return dataItem};DateAxis.prototype.getPositionLabel=function(position){var date=this.positionToDate(position);return this._df.format(date,this.getCurrentLabelFormat())};DateAxis.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")};DateAxis.prototype.initRenderer=function(){_super.prototype.initRenderer.call(this);var renderer=this.renderer;if(renderer){renderer.ticks.template.location=0;renderer.grid.template.location=0;renderer.labels.template.location=0;renderer.baseGrid.disabled=true}};Object.defineProperty(DateAxis.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:true,configurable:true});DateAxis.prototype.animateMinMax=function(min,max){var _this=this;var animation=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:min},{property:"_maxAdjusted",from:this._maxAdjusted,to:max}],this.rangeChangeDuration,this.rangeChangeEasing);animation.events.on("animationprogress",(function(){_this.dispatch("extremeschanged")}));return animation};DateAxis.prototype.handleExtremesChange=function(){_super.prototype.handleExtremesChange.call(this);if(this.groupData){var id=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[id]=this._finalMin;this.groupMax[id]=this._finalMax}};DateAxis.prototype.zoomToDates=function(startDate,endDate,skipRangeEvent,instantly,adjust){startDate=this._df.parse(startDate);endDate=this._df.parse(endDate);this.zoomToValues(startDate.getTime(),endDate.getTime(),skipRangeEvent,instantly,adjust)};DateAxis.prototype.zoomToValues=function(startValue,endValue,skipRangeEvent,instantly,adjust){var _this=this;if(!this.groupData){var start=this.valueToPosition(startValue);var end=this.valueToPosition(endValue);this.zoom({start,end},skipRangeEvent,instantly)}else{var difference=this.adjustDifference(startValue,endValue);var isEnd=false;if(endValue==this.max){isEnd=true}var isStart=false;if(startValue==this.min){isStart=true}if(hasValue(difference)){var mainBaseInterval=this.mainBaseInterval;var groupInterval_1=this.chooseInterval(0,difference,this.groupCount,this.groupIntervals);if(groupInterval_1.timeUnit==mainBaseInterval.timeUnit&&groupInterval_1.count<mainBaseInterval.count||getDuration(groupInterval_1.timeUnit,1)<getDuration(mainBaseInterval.timeUnit,1)){groupInterval_1=__assign({},mainBaseInterval)}var id=groupInterval_1.timeUnit+groupInterval_1.count;var min_1=this.groupMin[id];var max_1=this.groupMax[id];if(!isNumber$1(min_1)||!isNumber$1(max_1)){min_1=Number.POSITIVE_INFINITY;max_1=Number.NEGATIVE_INFINITY;this.series.each((function(series){var seriesMin=series.min(_this);var seriesMax=series.max(_this);if(series._dataSets){var ds=series._dataSets.getKey(groupInterval_1.timeUnit+groupInterval_1.count);if(ds){var mindi=ds.getIndex(0);var maxdi=ds.getIndex(ds.length-1);if(mindi){if(series.xAxis==_this){seriesMin=mindi.dateX.getTime()}else if(series.yAxis==_this){seriesMin=mindi.dateY.getTime()}}if(maxdi){if(series.xAxis==_this){seriesMax=maxdi.dateX.getTime()}else if(series.yAxis==_this){seriesMax=maxdi.dateY.getTime()}}}}seriesMax=round(add(new Date(seriesMax),groupInterval_1.timeUnit,1,_this._df.utc),groupInterval_1.timeUnit,1,_this._df.firstDayOfWeek,_this._df.utc,undefined,_this._df.timezoneMinutes,_this._df.timezone).getTime();if(seriesMin<min_1){min_1=seriesMin}if(seriesMax>max_1){max_1=seriesMax}}));this.groupMin[id]=min_1;this.groupMax[id]=max_1}startValue=fitToRange(startValue,min_1,max_1);endValue=fitToRange(endValue,min_1,max_1);if(adjust){if(isEnd){startValue=endValue-difference;startValue=fitToRange(startValue,min_1,max_1)}if(isStart){endValue=startValue+difference;endValue=fitToRange(endValue,min_1,max_1)}}var start=(startValue-min_1)/(max_1-min_1);var end=(endValue-min_1)/(max_1-min_1);this.zoom({start,end},skipRangeEvent,instantly)}}};DateAxis.prototype.asIs=function(field){return field=="baseInterval"||_super.prototype.asIs.call(this,field)};DateAxis.prototype.copyFrom=function(source){var _this=this;_super.prototype.copyFrom.call(this,source);this.dateFormats=source.dateFormats;this.periodChangeDateFormats=source.periodChangeDateFormats;this.groupIntervals.clear();source.groupIntervals.each((function(interval){_this.groupIntervals.push(__assign({},interval))}));this.gridIntervals.clear();source.gridIntervals.each((function(interval){_this.gridIntervals.push(__assign({},interval))}));if(source._baseInterval){this.baseInterval=source._baseInterval}};DateAxis.prototype.showTooltipAtPosition=function(position,local){var _this=this;if(!local){position=this.toAxisPosition(position)}if(this.snapTooltip){var actualDate=this.positionToDate(position);var actualTime_1=actualDate.getTime();var closestDate_1;this.series.each((function(series){if(series.baseAxis==_this){var dataItem=_this.getSeriesDataItem(series,position,true);if(dataItem){var date=void 0;if(series.xAxis==_this){date=dataItem.dateX}if(series.yAxis==_this){date=dataItem.dateY}if(!closestDate_1){closestDate_1=date}else{if(Math.abs(closestDate_1.getTime()-actualTime_1)>Math.abs(date.getTime()-actualTime_1)){closestDate_1=date}}}}}));if(closestDate_1){var closestTime_1=closestDate_1.getTime();closestDate_1=round(new Date(closestTime_1),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,undefined,this._df.timezoneMinutes,this._df.timezone);closestTime_1=closestDate_1.getTime();var tooltipLocation=this.renderer.tooltipLocation;if(tooltipLocation==0){tooltipLocation=1e-4}closestDate_1=new Date(closestDate_1.getTime()+this.baseDuration*tooltipLocation);position=this.dateToPosition(closestDate_1);if(this.chart.cursor&&this.chart.cursor.snapToSeries);else{this.series.each((function(series){var dataItem=series.dataItemsByAxis.getKey(_this.uid).getKey(closestTime_1+series.currentDataSetId);var point=series.showTooltipAtDataItem(dataItem);if(point){_this.chart._seriesPoints.push({series,point})}else{if(series.tooltipText||series.tooltipHTML){series.hideTooltip()}}}))}}}_super.prototype.showTooltipAtPosition.call(this,position,true)};Object.defineProperty(DateAxis.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(value){this.setPropertyValue("snapTooltip",value)},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(value){var _this=this;if(this.setPropertyValue("groupData",value)){this.series.each((function(series){series.setDataSet("");if(value&&!series.dataGrouped&&series.inited){series._baseInterval[_this.uid]=_this.mainBaseInterval;_this.groupSeriesData(series)}}));this._currentDataSetId="";this._groupInterval=undefined;this.invalidate();this.invalidateSeries()}},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(value){if(this.setPropertyValue("groupInterval",value)){this.invalidate();this.invalidateSeries()}},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(value){this.setPropertyValue("groupCount",value)},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(value){this.setPropertyValue("timezoneOffset",value)},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(value){this.setPropertyValue("timezone",value)},enumerable:true,configurable:true});Object.defineProperty(DateAxis.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:true,configurable:true});DateAxis.prototype.makeGap=function(dataItem,previous){var series=dataItem.component;if(dataItem&&previous){if(!series.connect&&isNumber$1(series.autoGapCount)){if(series.baseAxis==this){var date=dataItem.dates["date"+this.axisLetter];var prevDate=previous.dates["date"+this.axisLetter];if(date&&prevDate){var time=date.getTime();var prevTime=prevDate.getTime();if(time-prevTime>series.autoGapCount*this.baseDuration){return true}}}}}return false};Object.defineProperty(DateAxis.prototype,"baseValue",{get:function(){return this.min},enumerable:true,configurable:true});DateAxis.prototype._saveMinMax=function(min,max){var groupInterval=this.groupInterval;if(!groupInterval){groupInterval=this._mainBaseInterval}var id=groupInterval.timeUnit+groupInterval.count;this._intervalMin[id]=min;this._intervalMax[id]=max};return DateAxis}(ValueAxis);registry.registeredClasses["DateAxis"]=DateAxis;registry.registeredClasses["DateAxisDataItem"]=DateAxisDataItem;var AxisRendererX=function(_super){__extends(AxisRendererX,_super);function AxisRendererX(){var _this=_super.call(this)||this;_this.className="AxisRendererX";_this.minGridDistance=120;_this.opposite=false;_this.rotation=0;_this.width=percent(100);_this.labels.template.horizontalCenter="middle";_this.applyTheme();return _this}AxisRendererX.prototype.setAxis=function(axis){_super.prototype.setAxis.call(this,axis);axis.layout="vertical"};AxisRendererX.prototype.updateGridContainer=function(){var axis=this.axis;if(axis){var gridContainer=this.gridContainer;gridContainer.x=axis.pixelX;gridContainer.width=axis.axisLength}};AxisRendererX.prototype.processRenderer=function(){_super.prototype.processRenderer.call(this);var axis=this.axis;if(axis){if(!(axis.width instanceof Percent)){axis.width=percent(100)}var title=axis.title;title.rotation=0;title.align="center";if(this.opposite){this.line.toFront();title.toBack()}else{title.toFront();this.toBack();this.line.toBack()}}};AxisRendererX.prototype.updateTooltip=function(){var axis=this.axis;if(axis){var bigNum=1e3;var bbx=this.line.pixelX;var bby=this.line.pixelY;var bbw=this.axisLength;var bbh=bigNum;if(this.opposite){if(!this.inside){bby=-bigNum;bbh=bigNum}}else{if(this.inside){bby=-bigNum;bbh=bigNum}}this.axis.updateTooltip("vertical",{x:bbx,y:bby,width:bbw,height:bbh})}};AxisRendererX.prototype.updateLabelElement=function(label,position,endPosition,location){if(!hasValue(location)){location=label.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);label.isMeasured=!label.inside;var deltaY=0;var verticalCenter;var maxHeight=this.gridContainer.maxHeight;if(this.opposite){if(label.inside){verticalCenter="top";if(label.valign=="bottom"){deltaY=maxHeight;verticalCenter="bottom"}if(label.valign=="middle"){deltaY=maxHeight/2;verticalCenter="middle"}}else{verticalCenter="bottom"}point.y=deltaY}else{if(label.inside){verticalCenter="bottom";if(label.valign=="top"){deltaY=-maxHeight;verticalCenter="top"}if(label.valign=="middle"){deltaY=-maxHeight/2;verticalCenter="middle"}}else{verticalCenter="top"}point.y+=deltaY}if(label.rotation==0){label.verticalCenter=verticalCenter}this.positionItem(label,point);this.toggleVisibility(label,position,this.minLabelPosition,this.maxLabelPosition)};Object.defineProperty(AxisRendererX.prototype,"axisLength",{get:function(){var axis=this.axis;return axis.measuredWidth-axis.pixelPaddingRight-axis.pixelPaddingLeft||0},enumerable:true,configurable:true});AxisRendererX.prototype.positionToPoint=function(position,position2){return{x:this.positionToCoordinate(position),y:0}};AxisRendererX.prototype.pointToPosition=function(point){return this.coordinateToPosition(point.x,point.y)};AxisRendererX.prototype.getPositionRangePath=function(startPosition,endPosition){var x1=fitToRange(this.positionToCoordinate(startPosition),0,this.axisLength);var x2=fitToRange(this.positionToCoordinate(endPosition),0,this.axisLength);var w=Math.abs(x2-x1);var h=this.getHeight();var x=Math.min(x1,x2);var y=0;return rectToPath({x,y,width:w,height:h},true)};AxisRendererX.prototype.updateBreakElement=function(axisBreak){_super.prototype.updateBreakElement.call(this,axisBreak);var startLine=axisBreak.startLine;var endLine=axisBreak.endLine;var fillShape=axisBreak.fillShape;var startPoint=axisBreak.startPoint;var endPoint=axisBreak.endPoint;var y1=axisBreak.pixelMarginLeft;var y2=this.getHeight()-axisBreak.pixelMarginTop-axisBreak.pixelMarginBottom;startPoint.x=fitToRange(startPoint.x,-1,this.axisLength+1);endPoint.x=fitToRange(endPoint.x,-1,this.axisLength+1);if(startPoint.x==endPoint.x&&(startPoint.x<0||startPoint.x>this.axisLength)){axisBreak.fillShape.__disabled=true}else{axisBreak.fillShape.__disabled=false}startLine.y=y1;startLine.width=0;startLine.height=y2;endLine.y=y1;endLine.width=0;endLine.height=y2;fillShape.height=y2;fillShape.width=Math.abs(endPoint.x-startPoint.x);fillShape.y=y1;fillShape.x=startPoint.x};AxisRendererX.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);grid.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.getHeight()});this.positionItem(grid,point);this.toggleVisibility(grid,position,0,1)};AxisRendererX.prototype.updateTickElement=function(tick,position,endPosition){position=position+(endPosition-position)*tick.location;var point=this.positionToPoint(position);var tickLength=tick.length;point.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y;if(this.opposite){tickLength*=tick.inside?1:-1}else{tickLength*=tick.inside?-1:1}tick.path=moveTo({x:0,y:0})+lineTo({x:0,y:tickLength});this.positionItem(tick,point);this.toggleVisibility(tick,position,0,1)};AxisRendererX.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:this.axisLength,y:0})};AxisRendererX.prototype.updateBaseGridElement=function(){_super.prototype.updateBaseGridElement.call(this);var axis=this.axis;var h=this.getHeight();var w=this.axisLength;var baseGrid=this.baseGrid;var x=axis.basePoint.x;if(x<-.2||x>w+.2){baseGrid.hide(0)}else{var y=spritePointToSprite({x:0,y:0},this.gridContainer,baseGrid.parent).y;baseGrid.path=moveTo({x:0,y:0})+lineTo({x:0,y:h});baseGrid.moveTo({x,y});baseGrid.show(0)}};AxisRendererX.prototype.createBreakSprites=function(axisBreak){axisBreak.startLine=new WavedLine;axisBreak.endLine=new WavedLine;var wavedRectangle=new WavedRectangle;wavedRectangle.setWavedSides(false,true,false,true);axisBreak.fillShape=wavedRectangle};AxisRendererX.prototype.toAxisPosition=function(value){var inversedPosition=value;var axis=this.axis;if(axis){var relativePositionSprite=axis.relativePositionSprite;var x=axis.pixelX;if(relativePositionSprite){x=spritePointToSprite({x:this.pixelX,y:0},this.parent,relativePositionSprite).x}else{relativePositionSprite=axis.parent}if(relativePositionSprite){var relativeX=x/relativePositionSprite.innerWidth;var relativeWidth=axis.axisLength/relativePositionSprite.innerWidth;return(inversedPosition-relativeX)/relativeWidth}}return value};AxisRendererX.prototype.updateBullet=function(bullet,position,endPosition){var location=.5;if(bullet instanceof AxisBullet){location=bullet.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);point.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y;this.positionItem(bullet,point);this.toggleVisibility(bullet,position,0,1)};return AxisRendererX}(AxisRenderer);registry.registeredClasses["AxisRendererX"]=AxisRendererX;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(target,stateId){if(target instanceof AxisRendererX){var state=target.states.create(stateId);state.properties.inside=true;state.properties.maxLabelPosition=.9;state.properties.minLabelPosition=.1;return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(target,stateId){if(target instanceof AxisRendererX){var state=target.states.create(stateId);state.properties.disabled=true;return state}return null}});var CategoryAxisBreak=function(_super){__extends(CategoryAxisBreak,_super);function CategoryAxisBreak(){var _this=_super.call(this)||this;_this.className="CategoryAxisBreak";_this.properties.startLocation=.5;_this.properties.endLocation=.5;_this.applyTheme();return _this}Object.defineProperty(CategoryAxisBreak.prototype,"startPosition",{get:function(){if(this.axis){return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"endPosition",{get:function(){if(this.axis){return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(value){if(this.setPropertyValue("startCategory",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(value){if(this.setPropertyValue("endCategory",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"startValue",{get:function(){var category=this.getPropertyValue("startCategory");if(category){return this.axis.categoryToIndex(category)}else{return this.getPropertyValue("startValue")}},set:function(value){if(this.setPropertyValue("startValue",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"endValue",{get:function(){var category=this.getPropertyValue("endCategory");if(category){return this.axis.categoryToIndex(category)}else{return this.getPropertyValue("endValue")}},set:function(value){if(this.setPropertyValue("endValue",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(value){if(this.setPropertyValue("startLocation",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisBreak.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(value){if(this.setPropertyValue("endLocation",value)){if(this.axis){this.axis.invalidateDataItems();this.axis.invalidateSeries()}}},enumerable:true,configurable:true});return CategoryAxisBreak}(AxisBreak);registry.registeredClasses["CategoryAxisBreak"]=CategoryAxisBreak;var CategoryAxisDataItem=function(_super){__extends(CategoryAxisDataItem,_super);function CategoryAxisDataItem(){var _this=_super.call(this)||this;_this.seriesDataItems={};_this.className="CategoryAxisDataItem";_this.text="{category}";_this.locations.category=0;_this.locations.endCategory=1;_this.deltaPosition=0;_this.applyTheme();return _this}Object.defineProperty(CategoryAxisDataItem.prototype,"category",{get:function(){if(this._adapterO){if(this._adapterO.isEnabled("category")){return this._adapterO.apply("category",this.properties.category)}}return this.properties.category},set:function(value){var oldCategory=this.properties.category;this.setProperty("category",value);if(hasValue(oldCategory)&&oldCategory!=value){if(this.component){this.component.validateDataElement(this)}}},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisDataItem.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(value){this.setProperty("endCategory",value)},enumerable:true,configurable:true});Object.defineProperty(CategoryAxisDataItem.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(value){if(value!=this.properties.deltaCoordinate){this.setProperty("deltaCoordinate",value);if(this.component){this.component.invalidateDataItems();this.component.invalidateSeries()}}},enumerable:true,configurable:true});return CategoryAxisDataItem}(AxisDataItem);var CategoryAxis=function(_super){__extends(CategoryAxis,_super);function CategoryAxis(){var _this=_super.call(this)||this;_this.dataItemsByCategory=new Dictionary;_this.className="CategoryAxis";_this.axisFieldName="category";_this._lastDataItem=_this.createDataItem();_this._lastDataItem.component=_this;_this._disposers.push(_this._lastDataItem);_this.applyTheme();var dataItemsByCategory=_this.dataItemsByCategory;_this.addDisposer(_this.mainDataSet.events.on("removed",(function(event){dataItemsByCategory.removeKey(event.oldValue.category)})));return _this}CategoryAxis.prototype.createDataItem=function(){return new CategoryAxisDataItem};CategoryAxis.prototype.createAxisBreak=function(){return new CategoryAxisBreak};CategoryAxis.prototype.processSeriesDataItem=function(dataItem,axisLetter){_super.prototype.processSeriesDataItem.call(this,dataItem,axisLetter);var category=dataItem["category"+this.axisLetter];if(hasValue(category)){var categoryAxisDataItem=this.dataItemsByCategory.getKey(category);if(categoryAxisDataItem){var seriesId=dataItem.component.uid;var seriesDataItems=categoryAxisDataItem.seriesDataItems[seriesId];if(!seriesDataItems){seriesDataItems=[];categoryAxisDataItem.seriesDataItems[seriesId]=seriesDataItems}seriesDataItems.push(dataItem)}}else{dataItem.component.dataItems.remove(dataItem)}};CategoryAxis.prototype.validateDataRange=function(){var _this=this;_super.prototype.validateDataRange.call(this);each(this._series.iterator(),(function(series){if(series.xAxis instanceof CategoryAxis&&series.yAxis instanceof CategoryAxis){series.invalidateDataRange()}else{var startIndex=_this.positionToIndex(_this.start);var endIndex=_this.positionToIndex(_this.end);if(endIndex>=_this.dataItems.length){endIndex--}var seriesId=series.uid;var minIndex=void 0;var maxIndex=void 0;for(var i=startIndex;i<=endIndex;i++){var axisDataItem=_this.dataItems.getIndex(i);if(axisDataItem){var seriesDataItems=axisDataItem.seriesDataItems[seriesId];if(seriesDataItems){for(var i_1=0;i_1<seriesDataItems.length;i_1++){var seriesDataItem=seriesDataItems[i_1];if(seriesDataItem){var index=seriesDataItem.index;if(!isNumber$1(minIndex)||index<minIndex){minIndex=index}if(!isNumber$1(maxIndex)||index>maxIndex){maxIndex=index}}}}}}if(isNumber$1(minIndex)){series.startIndex=minIndex}else{series.start=_this.start}if(isNumber$1(maxIndex)){series.endIndex=maxIndex+1}else{series.end=_this.end}if(_this._axisBreaks&&_this._axisBreaks.length>0){series.invalidateDataRange()}}}))};CategoryAxis.prototype.validate=function(){var _this=this;_super.prototype.validate.call(this);var dataCount=this.dataItems.length;var startIndex=fitToRange(Math.floor(this.start*dataCount-1),0,dataCount);var endIndex=fitToRange(Math.ceil(this.end*dataCount),0,dataCount);if(this.renderer.invalid){this.renderer.validate()}var maxCount=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER);var frequency=Math.min(this.dataItems.length,Math.ceil((endIndex-startIndex)/maxCount));this._startIndex=Math.floor(startIndex/frequency)*frequency;this._endIndex=Math.ceil(this.end*dataCount);this.fixAxisBreaks();if(this._startIndex==this._endIndex){this._endIndex++}this._frequency=frequency;if(this.axisLength<=0){return}this.maxZoomFactor=this.dataItems.length;if(this.dataItems.length<=0){this.maxZoomFactor=1}this.resetIterators();startIndex=max$2(0,this._startIndex-this._frequency);endIndex=min$2(this.dataItems.length,this._endIndex+this._frequency);var itemIndex=0;for(var i=0;i<startIndex;i++){var dataItem=this.dataItems.getIndex(i);dataItem.__disabled=true}for(var i=endIndex,len=this.dataItems.length;i<len;i++){var dataItem=this.dataItems.getIndex(i);dataItem.__disabled=true}for(var i=startIndex;i<endIndex;i++){if(i<this.dataItems.length){var dataItem=this.dataItems.getIndex(i);if(i/this._frequency==Math.round(i/this._frequency)){var axisBreak=this.isInBreak(i);if(!axisBreak){this.appendDataItem(dataItem);this.validateDataElement(dataItem,itemIndex)}itemIndex++}else{dataItem.__disabled=true}}}this.appendDataItem(this._lastDataItem);this.validateDataElement(this._lastDataItem,itemIndex+1,this.dataItems.length);if(this._axisBreaks){var axisBreaks=this._axisBreaks;axisBreaks.each((function(axisBreak){var adjustedStartValue=axisBreak.adjustedStartValue;var adjustedEndValue=axisBreak.adjustedEndValue;if(intersect({start:adjustedStartValue,end:adjustedEndValue},{start:_this._startIndex,end:_this._endIndex})){for(var b=adjustedStartValue;b<=adjustedEndValue;b++){var dataItem=_this.dataItems.getIndex(b);dataItem.__disabled=true}var frequency_1=fitToRange(Math.ceil(_this._frequency/axisBreak.breakSize),1,adjustedEndValue-adjustedStartValue);var itemIndex_1=0;if(axisBreak.breakSize>0){for(var b=adjustedStartValue;b<=adjustedEndValue;b=b+frequency_1){var dataItem=_this.dataItems.getIndex(b);dataItem.__disabled=false;_this.appendDataItem(dataItem);_this.validateDataElement(dataItem,itemIndex_1);itemIndex_1++}}}}))}this.validateBreaks();this.validateAxisRanges();this.ghostLabel.invalidate();this.renderer.invalidateLayout()};CategoryAxis.prototype.validateDataElement=function(dataItem,itemIndex,index){_super.prototype.validateDataElement.call(this,dataItem);dataItem.itemIndex=this._axisItemCount;this._axisItemCount++;var renderer=this.renderer;if(!isNumber$1(index)){index=this.categoryToIndex(dataItem.category)}var endIndex=this.categoryToIndex(dataItem.endCategory);if(!isNumber$1(endIndex)){endIndex=index}var position=this.indexToPosition(index,dataItem.locations.category);var endPosition=this.indexToPosition(endIndex,dataItem.locations.endCategory);dataItem.position=position;var fillEndIndex;var fillPosition;var fillEndPosition;if(dataItem.isRange){fillEndIndex=endIndex;fillPosition=this.indexToPosition(index,dataItem.locations.category);fillEndPosition=this.indexToPosition(fillEndIndex,dataItem.locations.endCategory)}dataItem.point=renderer.positionToPoint(position);var tick=dataItem.tick;if(tick&&!tick.disabled){renderer.updateTickElement(tick,position,endPosition)}var grid=dataItem.grid;if(grid&&!grid.disabled){renderer.updateGridElement(grid,position,endPosition)}var label=dataItem.label;if(label&&!label.disabled){if(!dataItem.isRange||label.text==undefined){dataItem.text=dataItem.text}renderer.updateLabelElement(label,position,endPosition);if(renderer instanceof AxisRendererY&&dataItem.label.measuredWidth>this.ghostLabel.measuredWidth||renderer instanceof AxisRendererX&&dataItem.label.measuredHeight>this.ghostLabel.measuredHeight){if(dataItem.label.html){this.ghostLabel.html=dataItem.label.currentText}else{this.ghostLabel.text=dataItem.label.currentText}}}var fill=dataItem.axisFill;if(fill&&!fill.disabled){if(!dataItem.isRange){fillEndIndex=index+this._frequency;fillPosition=this.indexToPosition(index,fill.location);fillEndPosition=this.indexToPosition(fillEndIndex,fill.location)}renderer.updateFillElement(fill,fillPosition,fillEndPosition);if(!dataItem.isRange){this.fillRule(dataItem,itemIndex)}}if(dataItem.bullet){renderer.updateBullet(dataItem.bullet,position,endPosition)}var mask=dataItem.mask;if(mask){renderer.updateFillElement(mask,fillPosition,fillEndPosition)}};CategoryAxis.prototype.disposeData=function(){this.dataItemsByCategory.clear();_super.prototype.disposeData.call(this)};CategoryAxis.prototype.processDataItem=function(dataItem,dataContext){if(dataItem){_super.prototype.processDataItem.call(this,dataItem,dataContext);if(hasValue(dataItem.category)){this.dataItemsByCategory.setKey(dataItem.category,dataItem)}}};CategoryAxis.prototype.getDataItem=function(dataContext){var category=dataContext[this.dataFields.category];if(hasValue(category)){var dataItem=this.dataItemsByCategory.getKey(category);if(dataItem){return dataItem}else{return this.dataItems.create()}}};CategoryAxis.prototype.indexToPosition=function(index,location){if(!isNumber$1(location)){location=.5}var startIndex=this.startIndex;var endIndex=this.endIndex;var difference=this.adjustDifference(startIndex,endIndex);var startLocation=this.startLocation;var endLocation=this.endLocation;difference-=startLocation;difference-=1-endLocation;if(this._axisBreaks){var axisBreaks=this._axisBreaks;eachContinue(axisBreaks.iterator(),(function(axisBreak){var breakStartIndex=axisBreak.adjustedStartValue;var breakEndIndex=axisBreak.adjustedEndValue;if(index<startIndex||!isNumber$1(breakStartIndex)||!isNumber$1(breakEndIndex)){return false}if(intersect({start:breakStartIndex,end:breakEndIndex},{start:startIndex,end:endIndex})){breakStartIndex=Math.max(startIndex,breakStartIndex);breakEndIndex=Math.min(endIndex,breakEndIndex);var breakSize=axisBreak.breakSize;if(index>breakEndIndex){startIndex+=(breakEndIndex-breakStartIndex)*(1-breakSize)}else if(index<breakStartIndex);else{index=breakStartIndex+(index-breakStartIndex)*breakSize}}return true}))}var deltaPosition=0;var dataItem=this.dataItems.getIndex(index);if(dataItem){deltaPosition=dataItem.deltaPosition}return round$1(deltaPosition+(index+location-startLocation-startIndex)/difference,5)};CategoryAxis.prototype.categoryToPosition=function(category,location){var index=this.categoryToIndex(category);return this.indexToPosition(index,location)};CategoryAxis.prototype.categoryToPoint=function(category,location){var position=this.categoryToPosition(category,location);var point=this.renderer.positionToPoint(position);var angle=this.renderer.positionToAngle(position);return{x:point.x,y:point.y,angle}};CategoryAxis.prototype.anyToPoint=function(category,location){return this.categoryToPoint(category,location)};CategoryAxis.prototype.anyToPosition=function(category,location){return this.categoryToPosition(category,location)};CategoryAxis.prototype.categoryToIndex=function(category){if(hasValue(category)){var dataItem=this.dataItemsByCategory.getKey(category);if(dataItem){return dataItem.index}}};CategoryAxis.prototype.zoomToCategories=function(startCategory,endCategory){this.zoomToIndexes(this.categoryToIndex(startCategory),this.categoryToIndex(endCategory)+1)};CategoryAxis.prototype.getAnyRangePath=function(start,end,startLocation,endLocation){var startPos=this.categoryToPosition(start,startLocation);var endPos=this.categoryToPosition(end,endLocation);return this.getPositionRangePath(startPos,endPos)};CategoryAxis.prototype.roundPosition=function(position,location){var index=this.positionToIndex(position);return this.indexToPosition(index,location)};CategoryAxis.prototype.getFirstSeriesDataItem=function(series,category){for(var i=0;i<series.dataItems.length;i++){var dataItem=series.dataItems.getIndex(i);if(series.xAxis==this){if(dataItem.categoryX==category){return dataItem}}if(series.yAxis==this){if(dataItem.categoryY==category){return dataItem}}}};CategoryAxis.prototype.getLastSeriesDataItem=function(series,category){for(var i=series.dataItems.length-1;i>=0;i--){var dataItem=series.dataItems.getIndex(i);if(series.xAxis==this){if(dataItem.categoryX==category){return dataItem}}if(series.yAxis==this){if(dataItem.categoryY==category){return dataItem}}}};CategoryAxis.prototype.getSeriesDataItemByCategory=function(category,series){var _this=this;var seriesDataItem;series.dataItems.each((function(dataItem){if(series.xAxis==_this){if(dataItem.categoryX==category){seriesDataItem=dataItem}}else if(series.yAxis==_this){if(dataItem.categoryY==category){seriesDataItem=dataItem}}}));return seriesDataItem};CategoryAxis.prototype.getSeriesDataItem=function(series,position,findNearest){var _this=this;if(isNumber$1(position)){var index_1=this.positionToIndex(position);if(index_1>=this.dataItems.length){index_1--}var dataItem=this.dataItems.getIndex(index_1);if(dataItem){var category_1=dataItem.category;var sdi_1;var seriesDataItem=series.dataItems.getIndex(index_1);if(seriesDataItem){if(series.xAxis==this){if(seriesDataItem.categoryX==category_1){return seriesDataItem}}if(series.yAxis==this){if(seriesDataItem.categoryY==category_1){return seriesDataItem}}}series.dataItems.each((function(dataItem){if(series.xAxis==_this){if(dataItem.categoryX==category_1){if(!sdi_1){sdi_1=dataItem}if(Math.abs(index_1-sdi_1.index)>Math.abs(index_1-dataItem.index)){sdi_1=dataItem}}}if(series.yAxis==_this){if(dataItem.categoryY==category_1){if(!sdi_1){sdi_1=dataItem}if(Math.abs(index_1-sdi_1.index)>Math.abs(index_1-dataItem.index)){sdi_1=dataItem}}}}));return sdi_1}}};CategoryAxis.prototype.getX=function(dataItem,key,location,stackKey,range){var position=this.getPositionX(dataItem,key,location,stackKey,range);if(isNaN$1(position)){return this.basePoint.x}else{return this.renderer.positionToPoint(position).x}};CategoryAxis.prototype.getPositionX=function(dataItem,key,location,stackKey,range){var position;if(hasValue(key)){position=this.categoryToPosition(dataItem.categories[key],location)}if(range){position=fitToRange(position,range.start,range.end)}return position};CategoryAxis.prototype.getY=function(dataItem,key,location,stackKey,range){var position=this.getPositionY(dataItem,key,location,stackKey,range);if(isNaN$1(position)){return this.basePoint.y}else{return this.renderer.positionToPoint(position).y}};CategoryAxis.prototype.getPositionY=function(dataItem,key,location,stackKey,range){var position;if(hasValue(key)){position=this.categoryToPosition(dataItem.categories[key],location)}if(range){position=fitToRange(position,range.start,range.end)}return position};CategoryAxis.prototype.getAngle=function(dataItem,key,location,stackKey,range){var position=this.categoryToPosition(dataItem.categories[key],location);if(range){position=fitToRange(position,range.start,range.end)}return this.positionToAngle(position)};CategoryAxis.prototype.getCellStartPosition=function(position){return this.roundPosition(position,0)};CategoryAxis.prototype.getCellEndPosition=function(position){return this.roundPosition(position,1)};CategoryAxis.prototype.getTooltipText=function(position){var dataItem=this.dataItems.getIndex(this.positionToIndex(position));if(dataItem){this.tooltipDataItem=dataItem;this.tooltip.dataItem=dataItem;if(this.tooltipText){return this.tooltipText}if(!this._adapterO){return dataItem.category}else{return this._adapterO.apply("getTooltipText",dataItem.category)}}};CategoryAxis.prototype.positionToIndex=function(position){position=round$1(position,10);if(position<0){position=0}if(position>1){position=1}var startIndex=this.startIndex;var endIndex=this.endIndex;var difference=endIndex-startIndex-this.startLocation-(1-this.endLocation);position+=1/difference*this.startLocation;var index=null;if(this._axisBreaks){var axisBreaks=this._axisBreaks;eachContinue(axisBreaks.iterator(),(function(axisBreak){var breakStartPosition=axisBreak.startPosition;var breakEndPosition=axisBreak.endPosition;var breakStartIndex=axisBreak.adjustedStartValue;var breakEndIndex=axisBreak.adjustedEndValue;breakStartIndex=max$2(breakStartIndex,startIndex);breakEndIndex=min$2(breakEndIndex,endIndex);var breakSize=axisBreak.breakSize;difference-=(breakEndIndex-breakStartIndex)*(1-breakSize);if(position>breakEndPosition){startIndex+=(breakEndIndex-breakStartIndex)*(1-breakSize)}else if(position<breakStartPosition);else{var breakPosition=(position-breakStartPosition)/(breakEndPosition-breakStartPosition);index=breakStartIndex+Math.round(breakPosition*(breakEndIndex-breakStartIndex));return false}return true}))}if(!isNumber$1(index)){index=Math.floor(position*difference+startIndex)}if(index>=this.dataItems.length){index=this.dataItems.length-1}return index};CategoryAxis.prototype.positionToCategory=function(position){return this.getPositionLabel(position)};CategoryAxis.prototype.getPositionLabel=function(position){var dataItem=this.dataItems.getIndex(this.positionToIndex(position));if(dataItem){return dataItem.category}};Object.defineProperty(CategoryAxis.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:true,configurable:true});CategoryAxis.prototype.initRenderer=function(){_super.prototype.initRenderer.call(this);var renderer=this.renderer;renderer.baseGrid.disabled=true};Object.defineProperty(CategoryAxis.prototype,"frequency",{get:function(){return this._frequency},enumerable:true,configurable:true});Object.defineProperty(CategoryAxis.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(value){this.setPropertyValue("sortBySeries",value,true)},enumerable:true,configurable:true});CategoryAxis.prototype.processConfig=function(config){if(config){if(hasValue(config.sortBySeries)&&isString$1(config.sortBySeries)){if(this.map.hasKey(config.sortBySeries)){config.sortBySeries=this.map.getKey(config.sortBySeries)}else{this.addDelayedMap("sortBySeries",config.sortBySeries);delete config.sortBySeries}}}_super.prototype.processConfig.call(this,config)};return CategoryAxis}(Axis);registry.registeredClasses["CategoryAxis"]=CategoryAxis;registry.registeredClasses["CategoryAxisDataItem"]=CategoryAxisDataItem;var XYSeriesDataItem=function(_super){__extends(XYSeriesDataItem,_super);function XYSeriesDataItem(){var _this=_super.call(this)||this;_this.className="XYSeriesDataItem";_this.values.customValue={};_this.values.valueX={stack:0};_this.values.valueY={stack:0};_this.values.openValueX={};_this.values.openValueY={};_this.values.dateX={};_this.values.dateY={};_this.values.openDateX={};_this.values.openDateY={};_this.setLocation("dateX",.5,0);_this.setLocation("dateY",.5,0);_this.setLocation("categoryX",.5,0);_this.setLocation("categoryY",.5,0);_this.applyTheme();return _this}Object.defineProperty(XYSeriesDataItem.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(value){this.setValue("valueX",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(value){this.setValue("customValue",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(value){this.setValue("valueY",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(date){this.setDate("dateX",date)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(date){this.setDate("dateY",date)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(category){this.setCategory("categoryX",category)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(category){this.setCategory("categoryY",category)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(value){this.setValue("openValueX",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(value){this.setValue("openValueY",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(date){this.setDate("openDateX",date)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(date){this.setDate("openDateY",date)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(category){this.setCategory("openCategoryX",category)},enumerable:true,configurable:true});Object.defineProperty(XYSeriesDataItem.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(category){this.setCategory("openCategoryY",category)},enumerable:true,configurable:true});XYSeriesDataItem.prototype.getMin=function(fields,working,stackValue){var _this=this;var min;if(!isNumber$1(stackValue)){stackValue=0}each$2(fields,(function(field){var value;if(working){value=_this.getWorkingValue(field)}else{value=_this.getValue(field)}value+=stackValue;if(value<min||!isNumber$1(min)){min=value}}));return min};XYSeriesDataItem.prototype.getMax=function(fields,working,stackValue){var _this=this;var max;if(!isNumber$1(stackValue)){stackValue=0}each$2(fields,(function(field){var value;if(working){value=_this.getWorkingValue(field)}else{value=_this.getValue(field)}value+=stackValue;if(value>max||!isNumber$1(max)){max=value}}));return max};return XYSeriesDataItem}(SeriesDataItem);var XYSeries=function(_super){__extends(XYSeries,_super);function XYSeries(){var _this=_super.call(this)||this;_this.groupFields={};_this._xAxis=new MutableValueDisposer;_this._yAxis=new MutableValueDisposer;_this._xValueFields=[];_this._yValueFields=[];_this._baseInterval={};_this.dataGrouped=false;_this.usesShowFields=false;_this._dataSetChanged=false;_this._maxxX=1e5;_this._maxxY=1e5;_this._propertiesChanged=false;_this.outOfRange=false;_this.className="XYSeries";_this.isMeasured=false;_this.groupFields.valueX="close";_this.groupFields.valueY="close";_this.groupFields.customValue="close";_this.groupFields.openValueX="open";_this.groupFields.openValueY="open";_this.cursorTooltipEnabled=true;_this.cursorHoverEnabled=true;_this.excludeFromTotal=false;_this.mainContainer.mask=new Sprite;_this.mainContainer.mask.setElement(_this.paper.add("path"));_this.stacked=false;_this.snapTooltip=false;_this._showBullets=false;_this.tooltip.pointerOrientation="horizontal";_this.properties.stackToNegative=true;_this.hideTooltipWhileZooming=true;_this.setPropertyValue("maskBullets",true);_this.tooltip.events.on("hidden",(function(){_this.returnBulletDefaultState()}),undefined,false);_this._disposers.push(_this._xAxis);_this._disposers.push(_this._yAxis);_this.observe(visualProperties,(function(){if(_this.inited){_this._propertiesChanged=true;if(_this.legendDataItem){_this.legendDataItem.childrenCreated=false}if(_this.chart&&_this.chart.legend){_this.chart.legend.invalidateDataItems()}_this.invalidate()}}),undefined,false);_this.applyTheme();return _this}XYSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("X/Y Series")}};XYSeries.prototype.createDataItem=function(){return new XYSeriesDataItem};XYSeries.prototype.resetExtremes=function(){this._tmin.clear();this._tmax.clear();this._smin.clear();this._smax.clear()};XYSeries.prototype.dataChangeUpdate=function(){this.dataGrouped=false;this._baseInterval={};this._currentDataSetId="";this.resetExtremes();if(this.xAxis){this.xAxis.seriesDataChangeUpdate(this)}if(this.yAxis){this.yAxis.seriesDataChangeUpdate(this)}};XYSeries.prototype.validateData=function(){this._baseInterval={};var dataFields=this.dataFields;if(dataFields.valueYShow||dataFields.openValueXShow||dataFields.openValueXShow||dataFields.openValueYShow){this.usesShowFields=true}else{this.usesShowFields=false}this.defineFields();if(this.data.length>0){this.dataChangeUpdate()}_super.prototype.validateData.call(this);this.updateItemReaderText();if(this.chart){if(!hasValue(this.dataFields[this._xField])||!hasValue(this.dataFields[this._yField])){throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.')}}if(this.inited&&this.isHidden){this.hide(0)}this.dataGrouped=false};XYSeries.prototype.processDataItem=function(dataItem,dataContext){try{_super.prototype.processDataItem.call(this,dataItem,dataContext);this.xAxis.processSeriesDataItem(dataItem,"X");this.yAxis.processSeriesDataItem(dataItem,"Y");this.setInitialWorkingValues(dataItem)}catch(e){if(this._chart){this._chart.raiseCriticalError(e)}}};XYSeries.prototype.updateDataItem=function(dataItem){_super.prototype.updateDataItem.call(this,dataItem);this.xAxis.processSeriesDataItem(dataItem,"X");this.yAxis.processSeriesDataItem(dataItem,"Y")};XYSeries.prototype.setInitialWorkingValues=function(dataItem){};XYSeries.prototype.disposeData=function(){_super.prototype.disposeData.call(this);var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis){var dataItemsX=this.dataItemsByAxis.getKey(xAxis.uid);if(dataItemsX){dataItemsX.clear()}if(xAxis instanceof CategoryAxis){this.clearCatAxis(xAxis)}}if(yAxis){var dataItemsY=this.dataItemsByAxis.getKey(yAxis.uid);if(dataItemsY){dataItemsY.clear()}if(yAxis instanceof CategoryAxis){this.clearCatAxis(yAxis)}}};XYSeries.prototype.clearCatAxis=function(axis){var uid=this.uid;axis.dataItems.each((function(dataItem){if(dataItem.seriesDataItems[uid]){dataItem.seriesDataItems[uid]=[]}}))};XYSeries.prototype.defineFields=function(){var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis&&yAxis){var xAxisFieldName=xAxis.axisFieldName;var xField=xAxisFieldName+"X";var xOpenField="open"+capitalize(xAxisFieldName)+"X";var yAxisFieldName=yAxis.axisFieldName;var yField=yAxisFieldName+"Y";var yOpenField="open"+capitalize(yAxisFieldName)+"Y";this._xField=xField;this._yField=yField;if(this.dataFields[xOpenField]){this._xOpenField=xOpenField}if(this.dataFields[yOpenField]){this._yOpenField=yOpenField}if(!this.dataFields[yOpenField]&&this.baseAxis==yAxis){this._yOpenField=yField}if(!this.dataFields[xOpenField]&&this.baseAxis==xAxis){this._xOpenField=xField}if(this.stacked&&this.baseAxis==xAxis){this._xOpenField=xField}if(this.stacked&&this.baseAxis==yAxis){this._yOpenField=yField}if(xAxis instanceof CategoryAxis&&yAxis instanceof CategoryAxis){if(!this._yOpenField){this._yOpenField=yField}}this._xValueFields=[];this._yValueFields=[];this.addValueField(xAxis,this._xValueFields,this._xField);this.addValueField(xAxis,this._xValueFields,this._xOpenField);this.addValueField(yAxis,this._yValueFields,this._yField);this.addValueField(yAxis,this._yValueFields,this._yOpenField)}};XYSeries.prototype.addValueField=function(axis,fields,field){if(axis instanceof ValueAxis){if(hasValue(this.dataFields[field])&&fields.indexOf(field)==-1){fields.push(field)}}};XYSeries.prototype.setCategoryAxisField=function(field,axis){if(!hasValue(this.dataFields[field])){this.dataFields[field]=axis.dataFields.category}};XYSeries.prototype.setDateAxisField=function(field,axis){if(!hasValue(this.dataFields[field])){this.dataFields[field]=axis.dataFields.date}};XYSeries.prototype.afterDraw=function(){_super.prototype.afterDraw.call(this);this.createMask()};XYSeries.prototype.createMask=function(){if(this.mainContainer.mask){var path_1=this.getMaskPath();each(this.axisRanges.iterator(),(function(range){if(range.axisFill.fillPath){range.axisFill.validate();path_1+=range.axisFill.fillPath}}));this.mainContainer.mask.path=path_1}};XYSeries.prototype.getMaskPath=function(){if(this.xAxis&&this.yAxis){return rectToPath({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength})}return""};XYSeries.prototype.getAxisField=function(axis){if(axis==this.xAxis){return this.xField}if(axis==this.yAxis){return this.yField}};XYSeries.prototype.validateDataItems=function(){var chart=this.chart;if(chart){this._maxxX=max$2(1e5,chart.plotContainer.maxWidth*2);this._maxxY=max$2(1e5,chart.plotContainer.maxHeight*2)}var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis&&yAxis){xAxis.updateAxisBySeries();yAxis.updateAxisBySeries()}_super.prototype.validateDataItems.call(this);if(xAxis&&yAxis){xAxis.postProcessSeriesDataItems(this);yAxis.postProcessSeriesDataItems(this)}};XYSeries.prototype.validateDataRange=function(){var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis&&yAxis){if(xAxis.dataRangeInvalid){xAxis.validateDataRange()}if(yAxis.dataRangeInvalid){yAxis.validateDataRange()}}_super.prototype.validateDataRange.call(this)};XYSeries.prototype.validate=function(){var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis&&yAxis){if(xAxis.invalid){xAxis.validate()}if(yAxis.invalid){yAxis.validate()}this.y=yAxis.pixelY;this.x=xAxis.pixelX;this._showBullets=true;var minBulletDistance=this.minBulletDistance;if(isNumber$1(minBulletDistance)){if(this.baseAxis.axisLength/(this.endIndex-this.startIndex)<minBulletDistance){this._showBullets=false}}}this.updateTooltip();if(xAxis instanceof DateAxis&&xAxis.groupData&&!this.dataGrouped||yAxis instanceof DateAxis&&yAxis.groupData&&!this.dataGrouped){return}_super.prototype.validate.call(this);var chart=this.chart;var maskBullets=this.maskBullets;if(chart&&maskBullets){if(chart.className=="XYChart"){if(chart.leftAxesContainer.layout=="vertical"||chart.rightAxesContainer.layout=="vertical"){if(this.yAxis){this.bulletsContainer.mask=this.yAxis.renderer.gridContainer}else{this.bulletsContainer.mask=undefined}}if(chart.topAxesContainer.layout=="horizontal"||chart.bottomAxesContainer.layout=="horizontal"){if(this.xAxis){this.bulletsContainer.mask=this.xAxis.renderer.gridContainer}else{this.bulletsContainer.mask=undefined}}}}};Object.defineProperty(XYSeries.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var axis=this.chart.xAxes.getIndex(0);if(!axis){throw Error("There are no X axes on chart.")}this.xAxis=axis}return this._xAxis.get()}},set:function(axis){this.setXAxis(axis)},enumerable:true,configurable:true});XYSeries.prototype.setXAxis=function(axis){var oldAxis=this._xAxis.get();if(oldAxis!=axis){if(oldAxis){this.dataItemsByAxis.removeKey(oldAxis.uid);this._xAxis.dispose();oldAxis.series.removeValue(this)}this._xAxis.set(axis,axis.registerSeries(this));this.dataItemsByAxis.setKey(axis.uid,new Dictionary);this.invalidateData()}};Object.defineProperty(XYSeries.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var axis=this.chart.yAxes.getIndex(0);if(!axis){throw Error("There are no Y axes on chart.")}this.yAxis=axis}return this._yAxis.get()}},set:function(axis){this.setYAxis(axis)},enumerable:true,configurable:true});XYSeries.prototype.setYAxis=function(axis){var oldAxis=this._yAxis.get();if(oldAxis!=axis){if(oldAxis){this.dataItemsByAxis.removeKey(oldAxis.uid);this._yAxis.dispose();oldAxis.series.removeValue(this)}this._yAxis.set(axis,axis.registerSeries(this));if(axis.chart instanceof XYChart){axis.chart.handleYAxisSet(this)}this.dataItemsByAxis.setKey(axis.uid,new Dictionary);this.invalidateData()}};Object.defineProperty(XYSeries.prototype,"baseAxis",{get:function(){var xAxis=this.xAxis;var yAxis=this.yAxis;if(!this._baseAxis&&xAxis&&yAxis){if(yAxis instanceof DateAxis){this._baseAxis=yAxis}if(xAxis instanceof DateAxis){this._baseAxis=xAxis}if(yAxis instanceof CategoryAxis){this._baseAxis=yAxis}if(xAxis instanceof CategoryAxis){this._baseAxis=xAxis}if(!this._baseAxis){this._baseAxis=xAxis}}return this._baseAxis},set:function(value){if(this._baseAxis!=value){this._baseAxis=value;this.invalidate()}},enumerable:true,configurable:true});XYSeries.prototype.addData=function(rawDataItem,removeCount,skipRaw){_super.prototype.addData.call(this,rawDataItem,removeCount,skipRaw);var scrollbarSeries=this.scrollbarSeries;if(scrollbarSeries){this.scrollbarSeries.addData(rawDataItem,removeCount,true);this.scrollbarSeries._parseDataFrom=this._parseDataFrom}};XYSeries.prototype.setData=function(value){_super.prototype.setData.call(this,value);if(this.scrollbarSeries){this.scrollbarSeries.setData(value)}};XYSeries.prototype.setDataSet=function(id){var changed=_super.prototype.setDataSet.call(this,id);if(changed){this._dataSetChanged=true;var dataItems=this.dataItems;this.resetExtremes();if(dataItems&&dataItems.length>0){var xAxis=this.xAxis;var yAxis=this.yAxis;this._prevStartIndex=undefined;this._prevEndIndex=undefined;this._startIndex=undefined;this._endIndex=undefined;if(!this.appeared){this.processValues(false)}if(xAxis instanceof DateAxis&&xAxis==this.baseAxis){this._tmin.setKey(xAxis.uid,dataItems.getIndex(0).dateX.getTime());this._tmax.setKey(xAxis.uid,dataItems.getIndex(dataItems.length-1).dateX.getTime());this.dispatch("extremeschanged")}if(yAxis instanceof DateAxis&&yAxis==this.baseAxis){this._tmin.setKey(yAxis.uid,dataItems.getIndex(0).dateY.getTime());this._tmax.setKey(yAxis.uid,dataItems.getIndex(dataItems.length-1).dateY.getTime());this.dispatch("extremeschanged")}}}return changed};XYSeries.prototype.processValues=function(working){_super.prototype.processValues.call(this,working);var xAxis=this.xAxis;var yAxis=this.yAxis;if(!xAxis||!yAxis){return}var dataItems=this.dataItems;var minX=Infinity;var maxX=-Infinity;var minY=Infinity;var maxY=-Infinity;var startIndex=this.startIndex;var endIndex=this.endIndex;var workingStartIndex=startIndex;var workingEndIndex=endIndex;if(!working){startIndex=0;endIndex=this.dataItems.length}for(var i=startIndex;i<endIndex;i++){var dataItem=dataItems.getIndex(i);this.getStackValue(dataItem,working);var stackX=dataItem.getValue("valueX","stack");var stackY=dataItem.getValue("valueY","stack");if(!working){stackX=dataItem.getValue("valueX","stackTrue");stackY=dataItem.getValue("valueY","stackTrue")}minX=min$2(dataItem.getMin(this._xValueFields,working,stackX),minX);minY=min$2(dataItem.getMin(this._yValueFields,working,stackY),minY);maxX=max$2(dataItem.getMax(this._xValueFields,working,stackX),maxX);maxY=max$2(dataItem.getMax(this._yValueFields,working,stackY),maxY);if(this.stacked){if(this.baseAxis==xAxis){if(stackY<minY){minY=stackY}if(stackY>maxY){maxY=stackY}}if(this.baseAxis==yAxis){if(stackX<minX){minX=stackX}if(stackX>maxX){maxX=stackX}}}}xAxis.processSeriesDataItems();yAxis.processSeriesDataItems();var xAxisId=xAxis.uid;var yAxisId=yAxis.uid;if(this.xAxis instanceof ValueAxis&&(minX==Infinity||maxX==-Infinity)){this._smin.setKey(xAxisId,undefined);this._smax.setKey(xAxisId,undefined);this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&(minY==Infinity||maxY==-Infinity)){this._smin.setKey(yAxisId,undefined);this._smax.setKey(yAxisId,undefined);this.dispatchImmediately("selectionextremeschanged");return}if(!working){if(this._tmin.getKey(xAxisId)!=minX||this._tmax.getKey(xAxisId)!=maxX||this._tmin.getKey(yAxisId)!=minY||this._tmax.getKey(yAxisId)!=maxY){this._tmin.setKey(xAxisId,minX);this._tmax.setKey(xAxisId,maxX);this._tmin.setKey(yAxisId,minY);this._tmax.setKey(yAxisId,maxY);var stackedSeries=this.stackedSeries;if(stackedSeries){if(stackedSeries.isDisposed()){this.stackedSeries=undefined}else{stackedSeries.processValues(false)}}this.dispatchImmediately("extremeschanged")}}if(startIndex!=workingStartIndex||endIndex!=workingEndIndex){minX=Infinity;maxX=-Infinity;minY=Infinity;maxY=-Infinity;for(var i=workingStartIndex;i<workingEndIndex;i++){var dataItem=dataItems.getIndex(i);this.getStackValue(dataItem,working);var stackX=dataItem.getValue("valueX","stack");var stackY=dataItem.getValue("valueY","stack");if(!working){stackX=dataItem.getValue("valueX","stackTrue");stackY=dataItem.getValue("valueY","stackTrue")}minX=min$2(dataItem.getMin(this._xValueFields,working,stackX),minX);minY=min$2(dataItem.getMin(this._yValueFields,working,stackY),minY);maxX=max$2(dataItem.getMax(this._xValueFields,working,stackX),maxX);maxY=max$2(dataItem.getMax(this._yValueFields,working,stackY),maxY);if(this.stacked){if(this.baseAxis==xAxis){if(stackY<minY){minY=stackY}if(stackY>maxY){maxY=stackY}}if(this.baseAxis==yAxis){if(stackX<minX){minX=stackX}if(stackX>maxX){maxX=stackX}}}}}if(this.xAxis instanceof ValueAxis&&(minX==Infinity||maxX==-Infinity)){this._smin.setKey(xAxisId,undefined);this._smax.setKey(xAxisId,undefined);this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&(minY==Infinity||maxY==-Infinity)){this._smin.setKey(yAxisId,undefined);this._smax.setKey(yAxisId,undefined);this.dispatchImmediately("selectionextremeschanged");return}if(this._smin.getKey(xAxisId)!=minX||this._smax.getKey(xAxisId)!=maxX||this._smin.getKey(yAxisId)!=minY||this._smax.getKey(yAxisId)!=maxY){this._smin.setKey(xAxisId,minX);this._smax.setKey(xAxisId,maxX);this._smin.setKey(yAxisId,minY);this._smax.setKey(yAxisId,maxY);if(this.appeared||this.start!=0||this.end!=1||this.dataItems!=this.mainDataSet){var changed=false;if(yAxis instanceof ValueAxis&&!(yAxis instanceof DateAxis)){var tmin=this._tmin.getKey(yAxisId);if(!isNumber$1(tmin)||(this.usesShowFields||this._dataSetChanged||xAxis instanceof DateAxis&&xAxis.groupData&&this.isShowing)&&minY<tmin||this.stackedSeries&&!this.isHidden&&!working){this._tmin.setKey(yAxisId,minY);changed=true}var tmax=this._tmax.getKey(yAxisId);if(!isNumber$1(tmax)||(this.usesShowFields||this._dataSetChanged||xAxis instanceof DateAxis&&xAxis.groupData&&this.isShowing)&&maxY>tmax||this.stackedSeries&&!this.isHidden&&!working){this._tmax.setKey(yAxisId,maxY);changed=true}}if(xAxis instanceof ValueAxis&&!(xAxis instanceof DateAxis)){var tmin=this._tmin.getKey(xAxisId);if(!isNumber$1(tmin)||(this.usesShowFields||this._dataSetChanged||yAxis instanceof DateAxis&&yAxis.groupData&&this.isShowing)&&minX<tmin||this.stackedSeries&&!this.isHidden&&!working){this._tmin.setKey(xAxisId,minX);changed=true}var tmax=this._tmax.getKey(xAxisId);if(!isNumber$1(tmax)||(this.usesShowFields||this._dataSetChanged||yAxis instanceof DateAxis&&yAxis.groupData&&this.isShowing)&&maxX>tmax||this.stackedSeries&&!this.isHidden&&!working){this._tmax.setKey(xAxisId,maxX);changed=true}}if(changed){this.dispatchImmediately("extremeschanged")}if(this.start==0&&this.end==1){this._dataSetChanged=false}this.dispatchImmediately("selectionextremeschanged")}}if(!working&&this.stacked){this.processValues(true)}};XYSeries.prototype.hideTooltip=function(duration){_super.prototype.hideTooltip.call(this,duration);this.returnBulletDefaultState();this._prevTooltipDataItem=undefined};XYSeries.prototype.showTooltipAtPosition=function(xPosition,yPosition){var dataItem;if(this.visible&&!this.isHiding&&!this.isShowing){var xAxis=this._xAxis.get();var yAxis=this._yAxis.get();if(xAxis==this.baseAxis){dataItem=xAxis.getSeriesDataItem(this,xAxis.toAxisPosition(xPosition),this.snapTooltip)}if(yAxis==this.baseAxis){dataItem=yAxis.getSeriesDataItem(this,yAxis.toAxisPosition(yPosition),this.snapTooltip)}var point=this.showTooltipAtDataItem(dataItem);if(point){return point}if(!this.tooltipText&&!this.tooltipHTML){return}}this.hideTooltip()};XYSeries.prototype.getAdjustedXLocation=function(dataItem,field,bulletLocationX){return dataItem.locations[field]};XYSeries.prototype.getAdjustedYLocation=function(dataItem,field,bulletLocationY){return dataItem.locations[field]};XYSeries.prototype.showTooltipAtDataItem=function(dataItem){var e_1,_a;var cursor=this.chart.cursor;if(cursor&&cursor.hideSeriesTooltipsOnSelection&&cursor.selection.visible&&cursor.downPoint){this.hideTooltip();return}this.returnBulletDefaultState(dataItem);if(dataItem&&dataItem.visible){this.updateLegendValue(dataItem);if(this.cursorTooltipEnabled){this.tooltipDataItem=dataItem;var tooltipXField=this.tooltipXField;var tooltipYField=this.tooltipYField;if(hasValue(dataItem[tooltipXField])&&hasValue(dataItem[tooltipYField])){var tooltipPoint=this.getPoint(dataItem,tooltipXField,tooltipYField,this.getAdjustedXLocation(dataItem,tooltipXField),this.getAdjustedYLocation(dataItem,tooltipYField));if(tooltipPoint){if(this.chart.className=="XYChart"&&(tooltipPoint.y<-1||tooltipPoint.y>this.yAxis.pixelHeight+1||tooltipPoint.x<-1||tooltipPoint.x>this.xAxis.pixelWidth+1));else{this.tooltipX=tooltipPoint.x;this.tooltipY=tooltipPoint.y;if(this._prevTooltipDataItem!=dataItem){this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem});this._prevTooltipDataItem=dataItem}if(this.cursorHoverEnabled){try{for(var _b=__values(dataItem.sprites),_c=_b.next();!_c.done;_c=_b.next()){var sprite=_c.value;if(!sprite.parent.visible||sprite.isHidden||sprite.__disabled||sprite.disabled||sprite.isHiding);else{if(!sprite.interactions.isRealHover){sprite.dispatchImmediately("over");sprite.interactions.isRealHover=true}sprite.isHover=true}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}}if(this.showTooltip()){return spritePointToSvg({x:tooltipPoint.x,y:tooltipPoint.y},this)}return}}}}}else{this.updateLegendValue(dataItem,true)}};XYSeries.prototype.returnBulletDefaultState=function(dataItem){var e_2,_a;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=dataItem){try{for(var _b=__values(this._prevTooltipDataItem.sprites),_c=_b.next();!_c.done;_c=_b.next()){var sprite=_c.value;if(!sprite.isDisposed()){var fireEvent=sprite.interactions.isRealHover;sprite.isHover=false;if(fireEvent){sprite.dispatchImmediately("out")}}else{this._prevTooltipDataItem=undefined}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}}};XYSeries.prototype.shouldCreateBullet=function(dataItem,bulletTemplate){var xField=bulletTemplate.xField;if(!hasValue(xField)){xField=this.xField}var yField=bulletTemplate.yField;if(!hasValue(yField)){yField=this.yField}if(this.xAxis instanceof ValueAxis&&!dataItem.hasValue([xField])||this.yAxis instanceof ValueAxis&&!dataItem.hasValue([yField])){return false}if(bulletTemplate.disabled){var disabledField=bulletTemplate.propertyFields.disabled;var dataContext=dataItem.dataContext;if(dataContext&&dataContext[disabledField]===false){return true}else{return false}}return true};XYSeries.prototype.updateTooltip=function(){if(!this.hideTooltipWhileZooming&&this.tooltip&&!this.tooltip.isHidden&&!this.isHiding&&!this.isHidden&&this.tooltipDataItem){this.showTooltipAtDataItem(this.tooltipDataItem)}};XYSeries.prototype.positionBullet=function(bullet){_super.prototype.positionBullet.call(this,bullet);var dataItem=bullet.dataItem;var xField=bullet.xField;if(!hasValue(xField)){xField=this.xField}var yField=bullet.yField;if(!hasValue(yField)){yField=this.yField}var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis instanceof ValueAxis&&!dataItem.hasValue([xField])||yAxis instanceof ValueAxis&&!dataItem.hasValue([yField])){bullet.visible=false}else{var bulletLocationX=this.getBulletLocationX(bullet,xField);var bulletLocationY=this.getBulletLocationY(bullet,yField);var point=this.getPoint(dataItem,xField,yField,bulletLocationX,bulletLocationY);if(point){var xOpenField=this.xOpenField;var yOpenField=this.yOpenField;var positionX=void 0;var positionY=void 0;if(xAxis instanceof DateAxis){if(!isNumber$1(bulletLocationX)){bulletLocationX=0}var openValue=void 0;var closeValue=dataItem.getWorkingValue(xField);if(!xOpenField){if(xAxis==this.baseAxis){openValue=xAxis.baseValue}}else{openValue=dataItem.getWorkingValue(xOpenField)}if(!isNumber$1(openValue)){openValue=closeValue}var stack=dataItem.getValue("valueX","stack");openValue+=stack;closeValue+=stack;if(openValue==closeValue){var baseInterval=xAxis.baseInterval;var dateFormatter=xAxis.dateFormatter;openValue=round(new Date(openValue),baseInterval.timeUnit,baseInterval.count,dateFormatter.firstDayOfWeek,dateFormatter.utc,undefined,dateFormatter.timezoneMinutes,dateFormatter.timezone).getTime();closeValue=add(new Date(openValue),baseInterval.timeUnit,baseInterval.count,dateFormatter.utc).getTime()}var middleValue=void 0;if(xAxis==this.baseAxis){middleValue=openValue+(closeValue-openValue)*bulletLocationX}else{middleValue=openValue+(closeValue-openValue)*(1-bulletLocationX)}positionX=xAxis.valueToPosition(middleValue)}else if(xAxis instanceof ValueAxis){if(!isNumber$1(bulletLocationX)){bulletLocationX=0}var openValue=void 0;var closeValue=dataItem.getWorkingValue(xField);if(!xOpenField){openValue=xAxis.baseValue}else{openValue=dataItem.getWorkingValue(xOpenField)}var stack=dataItem.getValue("valueX","stack");openValue+=stack;closeValue+=stack;var middleValue=openValue+(closeValue-openValue)*(1-bulletLocationX);positionX=xAxis.valueToPosition(middleValue)}else if(xAxis instanceof CategoryAxis){var rightLocation=this.getAdjustedXLocation(dataItem,xField,bullet.locationX);var leftLocation=this.getAdjustedXLocation(dataItem,xOpenField,bullet.locationX);positionX=xAxis.categoryToPosition(dataItem[xField],rightLocation);var openPositionX=void 0;if(xOpenField){openPositionX=xAxis.categoryToPosition(dataItem[xOpenField],leftLocation)}if(!isNumber$1(openPositionX)){openPositionX=1}positionX=openPositionX+(positionX-openPositionX)*bulletLocationX}if(yAxis instanceof DateAxis){if(!isNumber$1(bulletLocationY)){bulletLocationY=0}var openValue=void 0;var closeValue=dataItem.getWorkingValue(yField);if(!yOpenField){if(yAxis==this.baseAxis){openValue=yAxis.baseValue}}else{openValue=dataItem.getWorkingValue(yOpenField)}if(!isNumber$1(openValue)){openValue=closeValue}var stack=dataItem.getValue("valueY","stack");openValue+=stack;closeValue+=stack;if(openValue==closeValue){var baseInterval=yAxis.baseInterval;var dateFormatter=yAxis.dateFormatter;openValue=round(new Date(openValue),baseInterval.timeUnit,baseInterval.count,dateFormatter.firstDayOfWeek,dateFormatter.utc,undefined,dateFormatter.timezoneMinutes,dateFormatter.timezone).getTime();closeValue=add(new Date(openValue),baseInterval.timeUnit,baseInterval.count,dateFormatter.utc).getTime()}var middleValue=void 0;if(yAxis==this.baseAxis){middleValue=openValue+(closeValue-openValue)*bulletLocationY}else{middleValue=openValue+(closeValue-openValue)*(1-bulletLocationY)}positionY=yAxis.valueToPosition(middleValue)}else if(yAxis instanceof ValueAxis){if(!isNumber$1(bulletLocationY)){bulletLocationY=0}var openValue=void 0;var closeValue=dataItem.getWorkingValue(yField);if(!yOpenField){openValue=yAxis.baseValue}else{openValue=dataItem.getWorkingValue(yOpenField)}var stack=dataItem.getValue("valueY","stack");openValue+=stack;closeValue+=stack;var middleValue=openValue+(closeValue-openValue)*(1-bulletLocationY);positionY=yAxis.valueToPosition(middleValue)}else if(yAxis instanceof CategoryAxis){positionY=yAxis.categoryToPosition(dataItem[yField],bulletLocationY);var topLocation=this.getAdjustedYLocation(dataItem,yField,bullet.locationY);var bottomLocation=this.getAdjustedYLocation(dataItem,yOpenField,bullet.locationY);positionY=yAxis.categoryToPosition(dataItem[yField],topLocation);var openPositionY=void 0;if(yOpenField){openPositionY=yAxis.categoryToPosition(dataItem[yOpenField],bottomLocation)}if(!isNumber$1(openPositionY)){openPositionY=1}positionY=openPositionY+(positionY-openPositionY)*bulletLocationY}bullet.visible=true;this.positionBulletReal(bullet,positionX,positionY)}else{bullet.visible=false}}};XYSeries.prototype.positionBulletReal=function(bullet,positionX,positionY){bullet.x=this.xAxis.renderer.positionToPoint(positionX,positionY).x;bullet.y=this.yAxis.renderer.positionToPoint(positionY,positionX).y};XYSeries.prototype.getBulletLocationX=function(bullet,field){var bulletLocation=bullet.locationX;var dataItem=bullet.dataItem;if(!isNumber$1(bulletLocation)){bulletLocation=dataItem.workingLocations[field]}return bulletLocation};XYSeries.prototype.getBulletLocationY=function(bullet,field){var bulletLocation=bullet.locationY;var dataItem=bullet.dataItem;if(!isNumber$1(bulletLocation)){bulletLocation=dataItem.workingLocations[field]}return bulletLocation};XYSeries.prototype.updateStacking=function(){var _this=this;this.invalidateDataItems();if(this.chart){this.chart.series.each((function(series){if(series.baseAxis==_this.baseAxis){series.stackedSeries=undefined;series.invalidateDataItems();series.invalidateProcessedData()}}))}};Object.defineProperty(XYSeries.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(stacked){if(this.setPropertyValue("stacked",stacked,true)){this.updateStacking();var xAxis=this.xAxis;var yAxis=this.yAxis;if(!stacked){var field_1;if(xAxis!=this.baseAxis&&xAxis instanceof ValueAxis){field_1=this.xField}if(yAxis!=this.baseAxis&&yAxis instanceof ValueAxis){field_1=this.yField}if(field_1){this.dataItems.each((function(dataItem){dataItem.setCalculatedValue(field_1,0,"stack");dataItem.setCalculatedValue(field_1,0,"stackTrue")}))}}}},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(value){this.setPropertyValue("snapTooltip",value)},enumerable:true,configurable:true});XYSeries.prototype.show=function(duration){var _this=this;if(this.isHidden){if(this.appeared&&this.xAxis instanceof DateAxis&&this.xAxis.groupData){this._tmin.setKey(this.yAxis.uid,undefined);this._tmax.setKey(this.yAxis.uid,undefined)}if(this.appeared&&this.yAxis instanceof DateAxis&&this.yAxis.groupData){this._tmin.setKey(this.xAxis.uid,undefined);this._tmax.setKey(this.xAxis.uid,undefined)}}var fields;if(this.xAxis instanceof ValueAxis&&this.xAxis!=this.baseAxis){fields=this._xValueFields}if(this.yAxis instanceof ValueAxis&&this.yAxis!=this.baseAxis){fields=this._yValueFields}var startIndex=this.startIndex;var endIndex=this.endIndex;var delay=0;var interpolationDuration=this.defaultState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}var anim;each(indexed(this.dataItems.iterator()),(function(a){var i=a[0];var dataItem=a[1];var realDuration=interpolationDuration;if(i<_this.startIndex-10||i>_this.endIndex+10){realDuration=0;delay=0}if(_this.sequencedInterpolation&&realDuration>0){delay=_this.sequencedInterpolationDelay*i+interpolationDuration*(i-startIndex)/(endIndex-startIndex)}anim=dataItem.show(realDuration,delay,fields)}));this.dataSets.each((function(key,dataSet){if(dataSet!=_this.dataItems){dataSet.each((function(dataItem){dataItem.events.disable();dataItem.show(0,0,fields);dataItem.events.enable()}))}}));if(this.mainDataSet!=this.dataItems){this.mainDataSet.each((function(dataItem){dataItem.events.disable();dataItem.show(0,0,fields);dataItem.events.enable()}))}var animation=_super.prototype.show.call(this,duration);if(anim&&!anim.isFinished()){animation=anim}if(this.hidden){this.dispatchImmediately("selectionextremeschanged");this.hidden=false}return animation};XYSeries.prototype.hide=function(duration){var _this=this;var fields;var value;var xAxis=this.xAxis;if(xAxis instanceof ValueAxis&&xAxis!=this.baseAxis){fields=this._xValueFields;if(this.stacked||xAxis.minZoomed<xAxis.baseValue&&xAxis.maxZoomed>xAxis.baseValue||this.stackedSeries){value=xAxis.baseValue}else{value=xAxis.min}}var yAxis=this.yAxis;if(yAxis instanceof ValueAxis&&yAxis!=this.baseAxis){fields=this._yValueFields;if(this.stacked||yAxis.minZoomed<yAxis.baseValue&&yAxis.maxZoomed>yAxis.baseValue||this.stackedSeries){value=yAxis.baseValue}else{value=yAxis.min}}var startIndex=this.startIndex;var endIndex=this.endIndex;var interpolationDuration=this.hiddenState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}var delay=0;var anim;each(indexed(this.dataItems.iterator()),(function(a){var i=a[0];var dataItem=a[1];var realDuration=interpolationDuration;if(i<_this.startIndex-10||i>_this.endIndex+10){realDuration=0}if(realDuration==0){dataItem.hide(0,0,value,fields)}else{if(_this.sequencedInterpolation&&realDuration>0){delay=_this.sequencedInterpolationDelay*i+interpolationDuration*(i-startIndex)/(endIndex-startIndex)}anim=dataItem.hide(realDuration,delay,value,fields)}}));this.dataSets.each((function(key,dataSet){if(dataSet!=_this.dataItems){dataSet.each((function(dataItem){dataItem.events.disable();dataItem.hide(0,0,value,fields);dataItem.events.enable()}))}}));if(this.mainDataSet!=this.dataItems){this.mainDataSet.each((function(dataItem){dataItem.events.disable();dataItem.hide(0,0,value,fields);dataItem.events.enable()}))}var animation=_super.prototype.hide.call(this,interpolationDuration);if(animation&&!animation.isFinished()){animation.delay(delay)}if(anim&&!anim.isFinished()){animation=anim}if(this.appeared){this.dispatch("selectionextremeschanged")}this.validateDataElements();return animation};XYSeries.prototype.handleDataItemWorkingValueChange=function(dataItem,name){_super.prototype.handleDataItemWorkingValueChange.call(this,dataItem,name);var axisSeries=this.baseAxis.series;each(axisSeries.iterator(),(function(series){if(series.stacked||series.stackedSeries){series.invalidateProcessedData()}}))};XYSeries.prototype.getStackValue=function(dataItem,working){var _this=this;var xAxis=this.xAxis;var yAxis=this.yAxis;if(!this.stacked||!xAxis||!yAxis){return}else{var chart=this.chart;var index=chart.series.indexOf(this);var field_2;if(xAxis!=this.baseAxis&&xAxis instanceof ValueAxis){field_2=this.xField}if(yAxis!=this.baseAxis&&yAxis instanceof ValueAxis){field_2=this.yField}if(!field_2){return}dataItem.setCalculatedValue(field_2,0,"stack");dataItem.setCalculatedValue(field_2,0,"stackTrue");eachContinue(chart.series.range(0,index).backwards().iterator(),(function(prevSeries){if(prevSeries.xAxis==xAxis&&prevSeries.yAxis==yAxis&&prevSeries.className==_this.className){prevSeries.stackedSeries=_this;var prevDataItem=prevSeries.dataItems.getIndex(dataItem.index);if(prevDataItem&&prevDataItem.hasValue(_this._xValueFields)&&prevDataItem.hasValue(_this._yValueFields)){var value=dataItem.getValue(field_2);var prevValue=void 0;var prevStack=prevDataItem.getValue(field_2,"stackTrue");if(prevStack==null){prevStack=0}var prevRealValue=prevDataItem.getValue(field_2)+prevStack;prevValue=prevDataItem.getWorkingValue(field_2)+prevDataItem.getValue(field_2,"stack");if(_this.stackToNegative){if(value>=0&&prevRealValue>=0||value<0&&prevRealValue<0){dataItem.setCalculatedValue(field_2,prevValue,"stack");dataItem.setCalculatedValue(field_2,prevRealValue,"stackTrue");return false}else if(!prevSeries.stacked){return false}}else{dataItem.setCalculatedValue(field_2,prevValue,"stack");dataItem.setCalculatedValue(field_2,prevRealValue,"stackTrue");return false}}else if(!prevSeries.stacked){return false}}return true}))}};Object.defineProperty(XYSeries.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(value){this.setPropertyValue("stackToNegative",value,true)},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"xField",{get:function(){return this._xField},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"yField",{get:function(){return this._yField},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"tooltipXField",{get:function(){if(this._tooltipXField){return this._tooltipXField}return this._xField},set:function(value){this._tooltipXField=value},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"tooltipYField",{get:function(){if(this._tooltipYField){return this._tooltipYField}return this._yField},set:function(value){this._tooltipYField=value},enumerable:true,configurable:true});XYSeries.prototype.min=function(axis){return this._tmin.getKey(axis.uid)};XYSeries.prototype.max=function(axis){return this._tmax.getKey(axis.uid)};XYSeries.prototype.selectionMin=function(axis){var value=this._smin.getKey(axis.uid);return value};XYSeries.prototype.selectionMax=function(axis){var value=this._smax.getKey(axis.uid);return value};XYSeries.prototype.processConfig=function(config){if(config){if(hasValue(config.baseAxis)&&isString$1(config.baseAxis)){if(this.map.hasKey(config.baseAxis)){config.baseAxis=this.map.getKey(config.baseAxis)}else{this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+config.baseAxis+'" found for `baseAxis`.');delete config.baseAxis}}if(hasValue(config.xAxis)&&isString$1(config.xAxis)){if(this.map.hasKey(config.xAxis)){config.xAxis=this.map.getKey(config.xAxis)}else{this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+config.xAxis+'" found for `xAxis`.');delete config.xAxis}}if(hasValue(config.yAxis)&&isString$1(config.yAxis)){if(this.map.hasKey(config.yAxis)){config.yAxis=this.map.getKey(config.yAxis)}else{this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+config.yAxis+'" found for `yAxis`.');delete config.yAxis}}if(hasValue(config.axisRanges)&&isArray$6(config.axisRanges)){for(var i=0,len=config.axisRanges.length;i<len;i++){var range=config.axisRanges[i];if(!hasValue(range.type)){range.type="AxisDataItem"}if(hasValue(range.axis)&&isString$1(range.axis)&&this.map.hasKey(range.axis)){range.component=this.map.getKey(range.axis)}else if(hasValue(range.component)&&isString$1(range.component)&&this.map.hasKey(range.component)){range.component=this.map.getKey(range.component)}}}if(!hasValue(config.dataFields)||!isObject$4(config.dataFields)){this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}}_super.prototype.processConfig.call(this,config)};XYSeries.prototype.getPoint=function(dataItem,xKey,yKey,locationX,locationY,stackKeyX,stackKeyY){if(this.xAxis&&this.yAxis){var x=this.xAxis.getX(dataItem,xKey,locationX);var y=this.yAxis.getY(dataItem,yKey,locationY);x=fitToRange(x,-this._maxxX,this._maxxX);y=fitToRange(y,-this._maxxY,this._maxxY);return{x,y}}};XYSeries.prototype.updateItemReaderText=function(){if(this._itemReaderTextChanged){return}var text="";each$1(this.dataFields,(function(key,val){text+="{"+key+"} "}));this.itemReaderText=text;this._itemReaderTextChanged=false};Object.defineProperty(XYSeries.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(value){this.setPropertyValue("cursorTooltipEnabled",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(value){this.setPropertyValue("cursorHoverEnabled",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(value){this.setPropertyValue("excludeFromTotal",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(value){this.setPropertyValue("hideTooltipWhileZooming",value)},enumerable:true,configurable:true});Object.defineProperty(XYSeries.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(value){this.setPropertyValue("maskBullets",value);var chart=this.chart;if(chart){if(value){this.bulletsContainer.parent=chart.bulletsContainer}else{this.bulletsContainer.parent=chart.axisBulletsContainer}}},enumerable:true,configurable:true});XYSeries.prototype.copyFrom=function(source){this.groupFields=copyProperties(source.groupFields,{});_super.prototype.copyFrom.call(this,source)};XYSeries.prototype.dispose=function(){if(this.scrollbarSeries){this.scrollbarSeries.dispose()}_super.prototype.dispose.call(this)};return XYSeries}(Series);registry.registeredClasses["XYSeries"]=XYSeries;registry.registeredClasses["XYSeriesDataItem"]=XYSeriesDataItem;var XYChartScrollbar=function(_super){__extends(XYChartScrollbar,_super);function XYChartScrollbar(){var _this=_super.call(this)||this;_this._chart=new MutableValueDisposer;_this.className="XYChartScrollbar";var interfaceColors=new InterfaceColorSet;_this.padding(0,0,0,0);var scrollbarChart=_this.createChild(XYChart);scrollbarChart.shouldClone=false;scrollbarChart.margin(0,0,0,0);scrollbarChart.padding(0,0,0,0);scrollbarChart.interactionsEnabled=false;_this._scrollbarChart=scrollbarChart;if(!isIE()){var filter=new DesaturateFilter;filter.filterUnits="userSpaceOnUse";scrollbarChart.plotContainer.filters.push(filter)}_this._disposers.push(_this._scrollbarChart);_this.minHeight=60;_this.minWidth=60;var unselectedOverlay=_this.createChild(Sprite);unselectedOverlay.shouldClone=false;unselectedOverlay.setElement(_this.paper.add("path"));unselectedOverlay.fill=interfaceColors.getFor("background");unselectedOverlay.fillOpacity=.8;unselectedOverlay.interactionsEnabled=false;unselectedOverlay.isMeasured=false;unselectedOverlay.toBack();_this._unselectedOverlay=unselectedOverlay;_this._disposers.push(_this._unselectedOverlay);scrollbarChart.toBack();_this.background.cornerRadius(0,0,0,0);var thumbBackground=_this.thumb.background;thumbBackground.cornerRadius(0,0,0,0);thumbBackground.fillOpacity=0;thumbBackground.fill=interfaceColors.getFor("background");var hoverState=thumbBackground.states.getKey("hover");if(hoverState){hoverState.properties.fillOpacity=.2}var downState=thumbBackground.states.getKey("down");if(downState){downState.properties.fillOpacity=.4}_this._disposers.push(_this._chart);_this.applyTheme();return _this}Object.defineProperty(XYChartScrollbar.prototype,"series",{get:function(){if(!this._series){this._series=new List;this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,false));this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,false))}return this._series},enumerable:true,configurable:true});XYChartScrollbar.prototype.handleSeriesAdded=function(event){var _this=this;var sourceSeries=event.newValue;if(!sourceSeries.xAxis||!sourceSeries.yAxis){return}var scrollbarChart=this.scrollbarChart;scrollbarChart.zoomOutButton.disabled=true;this.chart=sourceSeries.chart;scrollbarChart.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat;scrollbarChart.language.locale=this.chart.language.locale;var addXAxis=true;var addYAxis=true;each(this.series.iterator(),(function(series){if(series!=sourceSeries){if(series.xAxis==sourceSeries.xAxis&&_this.scrollbarChart.xAxes.length>0){addXAxis=false}if(series.yAxis==sourceSeries.yAxis&&_this.scrollbarChart.yAxes.length>0){addYAxis=false}}}));sourceSeries.events.on("beforedisposed",(function(){_this.series.removeValue(sourceSeries)}));var interfaceColors=new InterfaceColorSet;var series=sourceSeries.clone();if(options.queue){this.addDisposer(this.chart.events.on("removedfromqueue",(function(){scrollbarChart.invalidateData()})))}if(isIE()){series.stroke=color("#aaaaaa");series.fill=series.stroke;series.propertyFields.fill=undefined;series.propertyFields.stroke=undefined}sourceSeries.scrollbarSeries=series;if(addXAxis){var xAxis=sourceSeries.xAxis.clone();scrollbarChart.xAxes.moveValue(xAxis);xAxis.title.disabled=true;xAxis.rangeChangeDuration=0;var renderer=xAxis.renderer;renderer.ticks.template.disabled=true;renderer.inside=true;renderer.labels.template.inside=true;renderer.line.strokeOpacity=0;renderer.minLabelPosition=.02;renderer.maxLabelPosition=.98;renderer.line.disabled=true;renderer.axisFills.template.disabled=true;renderer.baseGrid.disabled=true;renderer.grid.template.strokeOpacity=.05;renderer.minWidth=undefined;renderer.minHeight=undefined;renderer.padding(0,0,0,0);renderer.chart=scrollbarChart;renderer.margin(0,0,0,0);xAxis.width=percent(100);var labelsTemplate=renderer.labels.template;labelsTemplate.fillOpacity=.5;xAxis.maxZoomCount=undefined;xAxis.minZoomCount=undefined;if(xAxis instanceof DateAxis){var vAxis_1=xAxis;var sourceAxis=sourceSeries.xAxis;vAxis_1.groupCount=sourceAxis.groupCount*5;vAxis_1.min=undefined;vAxis_1.max=undefined;this._disposers.push(vAxis_1.clonedFrom.events.on("extremeschanged",(function(){if(isNumber$1(vAxis_1.clonedFrom.minDefined)){vAxis_1.min=vAxis_1.clonedFrom.minDefined}if(isNumber$1(vAxis_1.clonedFrom.maxDefined)){vAxis_1.max=vAxis_1.clonedFrom.maxDefined}}),undefined,false))}else if(xAxis instanceof ValueAxis){var vAxis_2=xAxis;vAxis_2.min=undefined;vAxis_2.max=undefined;if(!isNumber$1(vAxis_2.clonedFrom.minDefined)){vAxis_2.min=undefined}if(!isNumber$1(vAxis_2.clonedFrom.maxDefined)){vAxis_2.max=undefined}this._disposers.push(vAxis_2.clonedFrom.events.on("extremeschanged",(function(){if(isNumber$1(vAxis_2.clonedFrom.minDefined)){vAxis_2.min=vAxis_2.clonedFrom.min}if(isNumber$1(vAxis_2.clonedFrom.maxDefined)){vAxis_2.max=vAxis_2.clonedFrom.max}}),undefined,false))}series.xAxis=xAxis}else{this.scrollbarChart.xAxes.each((function(xAxis){if(xAxis.clonedFrom==sourceSeries.xAxis){series.xAxis=xAxis}}))}if(addYAxis){var yAxis=sourceSeries.yAxis.clone();scrollbarChart.yAxes.moveValue(yAxis);yAxis.title.disabled=true;yAxis.rangeChangeDuration=0;var renderer=yAxis.renderer;renderer.ticks.template.disabled=true;renderer.inside=true;renderer.labels.template.inside=true;renderer.line.strokeOpacity=0;renderer.minLabelPosition=.02;renderer.maxLabelPosition=.98;renderer.line.disabled=true;renderer.axisFills.template.disabled=true;renderer.grid.template.stroke=interfaceColors.getFor("background");renderer.baseGrid.disabled=true;renderer.grid.template.strokeOpacity=.05;renderer.minWidth=undefined;renderer.minHeight=undefined;renderer.chart=scrollbarChart;renderer.padding(0,0,0,0);renderer.margin(0,0,0,0);yAxis.height=percent(100);var labelsTemplate=renderer.labels.template;labelsTemplate.fillOpacity=.5;series.yAxis=yAxis;yAxis.maxZoomCount=undefined;yAxis.minZoomCount=undefined;if(yAxis instanceof DateAxis){var vAxis_3=yAxis;vAxis_3.min=undefined;vAxis_3.max=undefined;var sourceAxis=sourceSeries.yAxis;yAxis.groupCount=sourceAxis.groupCount*5;this._disposers.push(vAxis_3.clonedFrom.events.on("extremeschanged",(function(){if(isNumber$1(vAxis_3.clonedFrom.minDefined)){vAxis_3.min=vAxis_3.clonedFrom.minDefined}if(isNumber$1(vAxis_3.clonedFrom.maxDefined)){vAxis_3.max=vAxis_3.clonedFrom.maxDefined}})))}else if(yAxis instanceof ValueAxis){var vAxis_4=yAxis;vAxis_4.min=undefined;vAxis_4.max=undefined;if(!isNumber$1(vAxis_4.clonedFrom.minDefined)){vAxis_4.min=undefined}if(!isNumber$1(vAxis_4.clonedFrom.maxDefined)){vAxis_4.max=undefined}this._disposers.push(vAxis_4.clonedFrom.events.on("extremeschanged",(function(){if(isNumber$1(vAxis_4.clonedFrom.minDefined)){vAxis_4.min=vAxis_4.clonedFrom.minDefined}if(isNumber$1(vAxis_4.clonedFrom.maxDefined)){vAxis_4.max=vAxis_4.clonedFrom.maxDefined}})))}}else{this.scrollbarChart.yAxes.each((function(yAxis){if(yAxis.clonedFrom==sourceSeries.yAxis){series.yAxis=yAxis}}))}series.rangeChangeDuration=0;series.interpolationDuration=0;series.defaultState.transitionDuration=0;series.showOnInit=false;this._disposers.push(series.events.on("validated",this.zoomOutAxes,this,false));this._disposers.push(sourceSeries.events.on("datavalidated",(function(){if(series.data!=sourceSeries.data){series.data=sourceSeries.data}}),undefined,false));series.defaultState.properties.visible=true;scrollbarChart.series.push(series);this.updateByOrientation()};XYChartScrollbar.prototype.updateByOrientation=function(){var _this=this;if(this._scrollbarChart){each(this._scrollbarChart.xAxes.iterator(),(function(xAxis){var renderer=xAxis.renderer;if(_this.orientation=="vertical"){renderer.grid.template.disabled=true;renderer.labels.template.disabled=true;renderer.minGridDistance=10}else{renderer.grid.template.disabled=false;renderer.labels.template.disabled=false;renderer.minGridDistance=xAxis.clonedFrom.renderer.minGridDistance}}));each(this._scrollbarChart.yAxes.iterator(),(function(yAxis){var renderer=yAxis.renderer;if(_this.orientation=="horizontal"){renderer.grid.template.disabled=true;renderer.labels.template.disabled=true;renderer.minGridDistance=10}else{renderer.grid.template.disabled=false;renderer.labels.template.disabled=false;renderer.minGridDistance=yAxis.clonedFrom.renderer.minGridDistance}}))}};XYChartScrollbar.prototype.handleSeriesRemoved=function(event){var sourceSeries=event.oldValue;var scrollbarChart=this.scrollbarChart;scrollbarChart.series.each((function(series){if(series&&series.clonedFrom==sourceSeries){scrollbarChart.series.removeValue(series)}}));if(scrollbarChart.series.length==0){scrollbarChart.xAxes.clear();scrollbarChart.yAxes.clear()}try{sourceSeries.events.off("validated",this.zoomOutAxes,this)}catch(err){}};Object.defineProperty(XYChartScrollbar.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:true,configurable:true});Object.defineProperty(XYChartScrollbar.prototype,"chart",{get:function(){return this._chart.get()},set:function(chart){if(this._chart.get()!==chart){this._chart.set(chart,chart.events.on("datavalidated",this.handleDataChanged,this,false));this.handleDataChanged();this._scrollbarChart.dataProvider=chart}},enumerable:true,configurable:true});Object.defineProperty(XYChartScrollbar.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:true,configurable:true});XYChartScrollbar.prototype.handleDataChanged=function(){if(this.chart.data!=this.scrollbarChart.data){this.scrollbarChart.data=this.chart.data}else{this.scrollbarChart.invalidateRawData()}};XYChartScrollbar.prototype.zoomOutAxes=function(){var scrollbarChart=this.scrollbarChart;each(scrollbarChart.xAxes.iterator(),(function(x){x.zoom({start:0,end:1},true,true)}));each(scrollbarChart.yAxes.iterator(),(function(y){y.zoom({start:0,end:1},true,true)}))};XYChartScrollbar.prototype.updateThumb=function(dispatchEvents){if(dispatchEvents===void 0){dispatchEvents=true}_super.prototype.updateThumb.call(this,dispatchEvents);if(this._unselectedOverlay){var thumb=this.thumb;var x=thumb.pixelX||0;var y=thumb.pixelY||0;var w=thumb.pixelWidth||0;var h=thumb.pixelHeight||0;var path="";if(this.orientation=="horizontal"){path=rectToPath({x:-1,y:0,width:x,height:h});path+=rectToPath({x:x+w,y:0,width:(this.pixelWidth||0)-x-w,height:h})}else{path=rectToPath({x:0,y:0,width:w,height:y});path+=rectToPath({x:0,y:y+h,width:w,height:(this.pixelHeight||0)-y-h})}this._unselectedOverlay.path=path}};XYChartScrollbar.prototype.processConfig=function(config){if(config){if(hasValue(config.series)&&isArray$6(config.series)){for(var i=0,len=config.series.length;i<len;i++){var series=config.series[i];if(hasValue(series)&&isString$1(series)){if(this.map.hasKey(series)){config.series[i]=this.map.getKey(series)}else{throw Error("XYChartScrollbar error: Series with id `"+series+"` does not exist.")}}}}}_super.prototype.processConfig.call(this,config)};return XYChartScrollbar}(Scrollbar);registry.registeredClasses["XYChartScrollbar"]=XYChartScrollbar;var XYChartDataItem=function(_super){__extends(XYChartDataItem,_super);function XYChartDataItem(){var _this=_super.call(this)||this;_this.className="XYChartDataItem";_this.applyTheme();return _this}return XYChartDataItem}(SerialChartDataItem);var XYChart=function(_super){__extends(XYChart,_super);function XYChart(){var _this=_super.call(this)||this;_this._axisRendererX=AxisRendererX;_this._axisRendererY=AxisRendererY;_this._seriesPoints=[];_this.className="XYChart";_this.maskBullets=true;_this.arrangeTooltips=true;var chartContainer=_this.chartContainer;chartContainer.layout="vertical";_this.padding(15,15,15,15);var topAxesCont=chartContainer.createChild(Container);topAxesCont.shouldClone=false;topAxesCont.layout="vertical";topAxesCont.width=percent(100);topAxesCont.zIndex=1;_this.topAxesContainer=topAxesCont;var yAxesAndPlotCont=chartContainer.createChild(Container);yAxesAndPlotCont.shouldClone=false;yAxesAndPlotCont.layout="horizontal";yAxesAndPlotCont.width=percent(100);yAxesAndPlotCont.height=percent(100);yAxesAndPlotCont.zIndex=0;_this.yAxesAndPlotContainer=yAxesAndPlotCont;var bottomAxesCont=chartContainer.createChild(Container);bottomAxesCont.shouldClone=false;bottomAxesCont.width=percent(100);bottomAxesCont.layout="vertical";bottomAxesCont.zIndex=1;_this.bottomAxesContainer=bottomAxesCont;var leftAxesCont=yAxesAndPlotCont.createChild(Container);leftAxesCont.shouldClone=false;leftAxesCont.layout="horizontal";leftAxesCont.height=percent(100);leftAxesCont.contentAlign="right";leftAxesCont.events.on("transformed",_this.updateXAxesMargins,_this,false);leftAxesCont.zIndex=1;_this.leftAxesContainer=leftAxesCont;var plotCont=yAxesAndPlotCont.createChild(Container);plotCont.shouldClone=false;plotCont.height=percent(100);plotCont.width=percent(100);plotCont.background.fillOpacity=0;_this.plotContainer=plotCont;_this.mouseWheelBehavior="none";_this._cursorContainer=plotCont;var rightAxesCont=yAxesAndPlotCont.createChild(Container);rightAxesCont.shouldClone=false;rightAxesCont.layout="horizontal";rightAxesCont.height=percent(100);rightAxesCont.zIndex=1;rightAxesCont.events.on("transformed",_this.updateXAxesMargins,_this,false);_this.rightAxesContainer=rightAxesCont;_this.seriesContainer.parent=plotCont;_this.bulletsContainer.parent=plotCont;var zoomOutButton=plotCont.createChild(ZoomOutButton);zoomOutButton.shouldClone=false;zoomOutButton.align="right";zoomOutButton.valign="top";zoomOutButton.zIndex=Number.MAX_SAFE_INTEGER;zoomOutButton.marginTop=5;zoomOutButton.marginRight=5;zoomOutButton.hide(0);_this.zoomOutButton=zoomOutButton;var axisBulletsContainer=_this.plotContainer.createChild(Container);axisBulletsContainer.shouldClone=false;axisBulletsContainer.width=percent(100);axisBulletsContainer.height=percent(100);axisBulletsContainer.isMeasured=false;axisBulletsContainer.zIndex=4;axisBulletsContainer.layout="none";_this.axisBulletsContainer=axisBulletsContainer;_this._bulletMask=_this.plotContainer;_this.events.on("beforedatavalidated",(function(){_this.series.each((function(series){series.dataGrouped=false;series._baseInterval={}}))}),_this,false);_this.applyTheme();return _this}XYChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);this.zoomOutButton.exportable=false;if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("X/Y chart")}};XYChart.prototype.draw=function(){_super.prototype.draw.call(this);this.seriesContainer.toFront();this.bulletsContainer.toFront();if(this.maskBullets){this.bulletsContainer.mask=this._bulletMask}this.updateSeriesLegend()};XYChart.prototype.updatePlotElements=function(){each(this.series.iterator(),(function(series){series.invalidate()}))};XYChart.prototype.validateData=function(){if(this._parseDataFrom==0){each(this.xAxes.iterator(),(function(axis){axis.dataChangeUpdate()}));each(this.yAxes.iterator(),(function(axis){axis.dataChangeUpdate()}));each(this.series.iterator(),(function(series){series.dataChangeUpdate()}))}_super.prototype.validateData.call(this)};XYChart.prototype.updateXAxesMargins=function(){var leftAxesWidth=this.leftAxesContainer.measuredWidth;var rightAxesWidth=this.rightAxesContainer.measuredWidth;var bottomAxesCont=this.bottomAxesContainer;if(bottomAxesCont.paddingLeft!=leftAxesWidth||bottomAxesCont.paddingRight!=rightAxesWidth){bottomAxesCont.paddingLeft=leftAxesWidth;bottomAxesCont.paddingRight=rightAxesWidth}var topAxesCont=this.topAxesContainer;if(topAxesCont.paddingLeft!=leftAxesWidth||topAxesCont.paddingRight!=rightAxesWidth){topAxesCont.paddingLeft=leftAxesWidth;topAxesCont.paddingRight=rightAxesWidth}};XYChart.prototype.reinit=function(){_super.prototype.reinit.call(this);this.series.each((function(series){series.appeared=false}))};XYChart.prototype.handleXAxisChange=function(event){this.updateXAxis(event.target)};XYChart.prototype.handleYAxisChange=function(event){this.updateYAxis(event.target)};XYChart.prototype.processXAxis=function(event){var axis=event.newValue;axis.chart=this;if(!axis.renderer){axis.renderer=new this._axisRendererX;axis.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,false)}axis.axisLetter="X";axis.events.on("startendchanged",this.handleXAxisRangeChange,this,false);axis.dataProvider=this;this.updateXAxis(axis.renderer);this.processAxis(axis)};XYChart.prototype.processYAxis=function(event){var axis=event.newValue;axis.chart=this;if(!axis.renderer){axis.renderer=new this._axisRendererY;axis.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,false)}axis.axisLetter="Y";axis.events.on("startendchanged",this.handleYAxisRangeChange,this,false);axis.dataProvider=this;this.updateYAxis(axis.renderer);this.processAxis(axis)};XYChart.prototype.handleXAxisRangeChange=function(){var range=this.getCommonAxisRange(this.xAxes);if(this.scrollbarX){this.zoomAxes(this.xAxes,range,true)}this.toggleZoomOutButton();this.updateScrollbar(this.scrollbarX,range)};XYChart.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var show_1=false;eachContinue(this.xAxes.iterator(),(function(axis){if(axis.toggleZoomOutButton){if(axis.maxZoomCount>0){var minZoomFactor=axis.maxZoomFactor/axis.maxZoomCount;if(round$1(axis.end-axis.start,3)<1/minZoomFactor){show_1=true;return false}}else{if(round$1(axis.start,3)>0||round$1(axis.end,3)<1){show_1=true;return false}}}return true}));eachContinue(this.yAxes.iterator(),(function(axis){if(axis.toggleZoomOutButton){if(axis.maxZoomCount>0){var minZoomFactor=axis.maxZoomFactor/axis.maxZoomCount;if(round$1(axis.end-axis.start,3)<1/minZoomFactor){show_1=true;return false}}else{if(round$1(axis.start,3)>0||round$1(axis.end,3)<1){show_1=true;return false}}return true}}));if(!this.seriesAppeared){show_1=false}if(show_1){this.zoomOutButton.show()}else{this.zoomOutButton.hide()}}};XYChart.prototype.seriesAppeared=function(){var appeared=false;each(this.series.iterator(),(function(series){if(!series.appeared){appeared=false;return false}}));return appeared};XYChart.prototype.handleYAxisRangeChange=function(){var range=this.getCommonAxisRange(this.yAxes);if(this.scrollbarY){this.zoomAxes(this.yAxes,range,true)}this.toggleZoomOutButton();this.updateScrollbar(this.scrollbarY,range)};XYChart.prototype.updateScrollbar=function(scrollbar,range){if(scrollbar){scrollbar.skipRangeEvents();scrollbar.start=range.start;scrollbar.end=range.end}};XYChart.prototype.getCommonAxisRange=function(axes){var start;var end;axes.each((function(axis){if(!axis.zoomable||axis instanceof ValueAxis&&axis.syncWithAxis);else{var axisStart=axis.start;var axisEnd=axis.end;if(axis.renderer.inversed){axisStart=1-axis.end;axisEnd=1-axis.start}if(!isNumber$1(start)||axisStart<start){start=axisStart}if(!isNumber$1(end)||axisEnd>end){end=axisEnd}}}));return{start,end}};XYChart.prototype.updateXAxis=function(renderer){var axis=renderer.axis;if(renderer.opposite){axis.parent=this.topAxesContainer;axis.toFront()}else{axis.parent=this.bottomAxesContainer;axis.toBack()}if(axis.renderer){axis.renderer.processRenderer()}};XYChart.prototype.updateYAxis=function(renderer){var axis=renderer.axis;if(renderer.opposite){axis.parent=this.rightAxesContainer;axis.toBack()}else{axis.parent=this.leftAxesContainer;axis.toFront()}if(axis.renderer){axis.renderer.processRenderer()}};XYChart.prototype.processAxis=function(axis){var _this=this;if(axis instanceof CategoryAxis){this._dataUsers.moveValue(axis)}var renderer=axis.renderer;renderer.gridContainer.parent=this.plotContainer;renderer.gridContainer.toBack();renderer.breakContainer.parent=this.plotContainer;renderer.breakContainer.toFront();renderer.breakContainer.zIndex=10;axis.addDisposer(new Disposer((function(){_this.dataUsers.removeValue(axis)})));renderer.bulletsContainer.parent=this.axisBulletsContainer;this._disposers.push(axis.events.on("positionchanged",(function(){var point=spritePointToSprite({x:0,y:0},axis,_this.axisBulletsContainer);if(axis.renderer instanceof AxisRendererY){renderer.bulletsContainer.y=point.y}if(axis.renderer instanceof AxisRendererX){renderer.bulletsContainer.x=point.x}}),undefined,false));this.plotContainer.events.on("maxsizechanged",(function(){if(_this.inited){axis.invalidateDataItems();_this.updateSeriesMasks()}}),axis,false)};XYChart.prototype.updateSeriesMasks=function(){if(isIE()){this.series.each((function(series){var mask=series.mainContainer.mask;series.mainContainer.mask=undefined;series.mainContainer.mask=mask}))}};XYChart.prototype.handleSeriesRemoved=function(event){var series=event.oldValue;if(series){if(series.xAxis){series.xAxis.series.removeValue(series);series.xAxis.invalidateProcessedData()}if(series.yAxis){series.yAxis.series.removeValue(series);series.yAxis.invalidateProcessedData()}this.series.each((function(series){series.resetExtremes()}))}_super.prototype.handleSeriesRemoved.call(this,event)};Object.defineProperty(XYChart.prototype,"xAxes",{get:function(){if(!this._xAxes){this._xAxes=new List;this._xAxes.events.on("inserted",this.processXAxis,this,false);this._xAxes.events.on("removed",this.handleAxisRemoval,this,false);this._disposers.push(new ListDisposer(this._xAxes,false))}return this._xAxes},enumerable:true,configurable:true});XYChart.prototype.handleAxisRemoval=function(event){var axis=event.oldValue;this.dataUsers.removeValue(axis);if(axis.autoDispose){axis.dispose()}};Object.defineProperty(XYChart.prototype,"yAxes",{get:function(){if(!this._yAxes){this._yAxes=new List;this._yAxes.events.on("inserted",this.processYAxis,this,false);this._yAxes.events.on("removed",this.handleAxisRemoval,this,false);this._disposers.push(new ListDisposer(this._yAxes,false))}return this._yAxes},enumerable:true,configurable:true});XYChart.prototype.handleSeriesAdded=function(event){try{_super.prototype.handleSeriesAdded.call(this,event);var series=event.newValue;if(this.xAxes.length==0||this.yAxes.length==0){registry.removeFromInvalidComponents(series);series.dataInvalid=false}series.maskBullets=series.maskBullets;if(series.fill==undefined){if(this.patterns){if(!hasValue(series.stroke)){series.stroke=this.colors.next()}series.fill=this.patterns.next();if(hasValue(series.fillOpacity)){series.fill.backgroundOpacity=series.fillOpacity}if(series.stroke instanceof Color){series.fill.stroke=series.stroke;series.fill.fill=series.stroke}}else{series.fill=this.colors.next()}}if(!hasValue(series.stroke)){series.stroke=series.fill}}catch(e){this.raiseCriticalError(e)}};Object.defineProperty(XYChart.prototype,"cursor",{get:function(){return this._cursor},set:function(cursor){if(this._cursor!=cursor){if(this._cursor){this.removeDispose(this._cursor)}this._cursor=cursor;if(cursor){this._disposers.push(cursor);cursor.chart=this;cursor.shouldClone=false;cursor.parent=this._cursorContainer;cursor.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,false);cursor.events.on("zoomstarted",this.handleCursorZoomStart,this,false);cursor.events.on("zoomended",this.handleCursorZoomEnd,this,false);cursor.events.on("panstarted",this.handleCursorPanStart,this,false);cursor.events.on("panning",this.handleCursorPanning,this,false);cursor.events.on("panended",this.handleCursorPanEnd,this,false);cursor.events.on("behaviorcanceled",this.handleCursorCanceled,this,false);cursor.events.on("hidden",this.handleHideCursor,this,false);cursor.zIndex=Number.MAX_SAFE_INTEGER-1;if(this.tapToActivate){this.setTapToActivate(this.tapToActivate)}}}},enumerable:true,configurable:true});XYChart.prototype.handleCursorPositionChange=function(){var cursor=this.cursor;if(cursor.visible&&!cursor.isHiding){var xPosition_1=this.cursor.xPosition;var yPosition_1=this.cursor.yPosition;this.showSeriesTooltip({x:xPosition_1,y:yPosition_1});var exceptAxes_1=[];var snapToSeries=cursor.snapToSeries;if(snapToSeries&&!cursor.downPoint){if(snapToSeries instanceof XYSeries){snapToSeries=[snapToSeries]}var dataItems_1=[];each$2(snapToSeries,(function(snpSeries){if(!snpSeries.isHidden&&!snpSeries.isHiding){var xAxis=snpSeries.xAxis;var yAxis=snpSeries.yAxis;if(xAxis instanceof ValueAxis&&!(xAxis instanceof DateAxis)&&yAxis instanceof ValueAxis&&!(yAxis instanceof DateAxis)){snpSeries.dataItems.each((function(dataItem){dataItems_1.push(dataItem)}));move(exceptAxes_1,snpSeries.yAxis);move(exceptAxes_1,snpSeries.xAxis)}else{if(snpSeries.baseAxis==snpSeries.xAxis){move(exceptAxes_1,snpSeries.yAxis);dataItems_1.push(xAxis.getSeriesDataItem(snpSeries,xAxis.toAxisPosition(xPosition_1),true))}if(snpSeries.baseAxis==snpSeries.yAxis){move(exceptAxes_1,snpSeries.xAxis);dataItems_1.push(yAxis.getSeriesDataItem(snpSeries,yAxis.toAxisPosition(yPosition_1),true))}}}}));var closestDataItem_1=this.getClosest(dataItems_1,xPosition_1,yPosition_1);if(closestDataItem_1){this.series.each((function(series){var closestSeries=closestDataItem_1.component;if(series!=closestSeries){series.hideTooltip();if(series.xAxis!=closestSeries.xAxis){series.xAxis.hideTooltip();exceptAxes_1.push(series.xAxis)}if(series.yAxis!=closestSeries.yAxis){series.yAxis.hideTooltip();exceptAxes_1.push(series.yAxis)}}}));closestDataItem_1.component.showTooltipAtDataItem(closestDataItem_1);cursor.handleSnap(closestDataItem_1.component)}}this._seriesPoints=[];if(this._cursorXPosition!=xPosition_1){this.showAxisTooltip(this.xAxes,xPosition_1,exceptAxes_1)}if(this._cursorYPosition!=yPosition_1){this.showAxisTooltip(this.yAxes,yPosition_1,exceptAxes_1)}if(this.arrangeTooltips){this.sortSeriesTooltips(this._seriesPoints)}if(this.legend){this.legend.afterDraw()}}};XYChart.prototype.getClosest=function(dataItems,xPosition,yPosition){var minDistance=Infinity;var closestDataItem;eachContinue$2(dataItems,(function(dataItem){if(dataItem){var xAxis=dataItem.component.xAxis;var yAxis=dataItem.component.yAxis;var xPos=xAxis.positionToCoordinate(xAxis.toGlobalPosition(xAxis.toAxisPosition(xPosition)));var yPos=yAxis.positionToCoordinate(yAxis.toGlobalPosition(yAxis.toAxisPosition(yPosition)));var xField=dataItem.component.xField;var yField=dataItem.component.yField;if(xAxis instanceof ValueAxis&&!isNumber$1(dataItem.getValue(xField))){return true}if(yAxis instanceof ValueAxis&&!isNumber$1(dataItem.getValue(yField))){return true}var dxPosition=xAxis.positionToCoordinate(xAxis.toGlobalPosition(xAxis.getPositionX(dataItem,xField,dataItem.locations[xField],"valueX")));var dyPosition=yAxis.positionToCoordinate(yAxis.toGlobalPosition(yAxis.getPositionY(dataItem,yField,dataItem.locations[yField],"valueY")));var distance=Math.sqrt(Math.pow(xPos-dxPosition,2)+Math.pow(yPos-dyPosition,2));if(distance<minDistance){minDistance=distance;closestDataItem=dataItem}return true}}));return closestDataItem};XYChart.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes);this.hideObjectTooltip(this.yAxes);this.hideObjectTooltip(this.series);this._cursorXPosition=undefined;this._cursorYPosition=undefined;this.updateSeriesLegend()};XYChart.prototype.updateSeriesLegend=function(){each(this.series.iterator(),(function(series){series.updateLegendValue()}))};XYChart.prototype.hideObjectTooltip=function(sprites){each(sprites.iterator(),(function(sprite){if(sprite.cursorTooltipEnabled){sprite.hideTooltip(0)}}))};XYChart.prototype.showSeriesTooltip=function(position){var _this=this;if(!position){this.series.each((function(series){series.hideTooltip()}));return}var seriesPoints=[];this.series.each((function(series){if(series.xAxis instanceof DateAxis&&series.xAxis.snapTooltip||series.yAxis instanceof DateAxis&&series.yAxis.snapTooltip);else{var point=series.showTooltipAtPosition(position.x,position.y);if(point){series.tooltip.setBounds(spriteRectToSvg({x:0,y:0,width:_this.pixelWidth,height:_this.pixelHeight},_this));seriesPoints.push({series,point})}}}));if(this.arrangeTooltips){this.sortSeriesTooltips(seriesPoints)}};XYChart.prototype.sortSeriesTooltips=function(seriesPoints){if(seriesPoints.length>0){var cursor_1=this.cursor;if(cursor_1&&isNumber$1(cursor_1.maxTooltipDistance)){var cursorPoint_1=spritePointToSvg({x:cursor_1.point.x,y:cursor_1.point.y},cursor_1);var nearestSeries_1;var nearestPoint_1;var smallestDistance_1=Infinity;each$2(seriesPoints,(function(seriesPoint){var series=seriesPoint.series;var fixedPoint=seriesPoint.point;if(fixedPoint){var point={x:fixedPoint.x,y:fixedPoint.y};var distance=Math.abs(getDistance(point,cursorPoint_1));if(distance<smallestDistance_1){nearestPoint_1=point;smallestDistance_1=distance;nearestSeries_1=series}}}));var newSeriesPoints_1=[];if(nearestSeries_1){each$2(seriesPoints,(function(seriesPoint){if(Math.abs(getDistance(seriesPoint.point,nearestPoint_1))<=Math.abs(cursor_1.maxTooltipDistance)){newSeriesPoints_1.push({series:seriesPoint.series,point:seriesPoint.point})}else{var tooltipDataItem=seriesPoint.series.tooltipDataItem;if(tooltipDataItem){each$2(tooltipDataItem.sprites,(function(sprite){sprite.isHover=false;sprite.handleOutReal()}))}seriesPoint.series.hideTooltip(0)}}));if(cursor_1.maxTooltipDistance<0){if(newSeriesPoints_1.length>0){each$2(newSeriesPoints_1,(function(np){if(nearestSeries_1!=np.series){np.series.hideTooltip(0)}}))}newSeriesPoints_1=[{series:nearestSeries_1,point:nearestPoint_1}]}}seriesPoints=newSeriesPoints_1}var topLeft_1=spritePointToSvg({x:-.5,y:-.5},this.plotContainer);var bottomRight_1=spritePointToSvg({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer);var sum_1=0;var filteredSeriesPoints_1=[];each$2(seriesPoints,(function(seriesPoint){var point=seriesPoint.point;if(point&&isInRectangle(point,{x:topLeft_1.x,y:topLeft_1.y,width:bottomRight_1.x-topLeft_1.x,height:bottomRight_1.y-topLeft_1.y})){filteredSeriesPoints_1.push({point,series:seriesPoint.series});sum_1+=point.y}}));seriesPoints=filteredSeriesPoints_1;var firstSeries=this.series.getIndex(0);var inversed=false;if(firstSeries&&firstSeries.yAxis&&firstSeries.yAxis.renderer.inversed){inversed=true}if(inversed){seriesPoints.sort((function(a,b){return order(a.point.y,b.point.y)}))}else{seriesPoints.sort((function(a,b){return order(b.point.y,a.point.y)}));seriesPoints.reverse()}var averageY=sum_1/seriesPoints.length;var maxY=svgPointToDocument({x:0,y:0},this.svgContainer.SVGContainer).y;if(seriesPoints.length>0){var top_1=topLeft_1.y;var bottom=bottomRight_1.y;spritePointToDocument({x:0,y:top_1},this);var dropped=false;if(averageY>top_1+(bottom-top_1)/2){var nextHeight=bottom;for(var i=seriesPoints.length-1;i>=0;i--){var series=seriesPoints[i].series;var tooltip=series.tooltip;var pointY=seriesPoints[i].point.y;tooltip.setBounds({x:0,y:-maxY,width:this.pixelWidth,height:nextHeight+maxY});if(tooltip.invalid){tooltip.validate()}tooltip.toBack();nextHeight=spritePointToSvg({x:0,y:tooltip.label.pixelY-tooltip.pixelY+pointY-tooltip.pixelMarginTop},tooltip).y;if(nextHeight<-maxY){dropped=true;break}}}if(averageY<=top_1+(bottom-top_1)/2||dropped){var nextY=top_1;for(var i=0,len=seriesPoints.length;i<len;i++){var series=seriesPoints[i].series;var pointY=seriesPoints[i].point.y;var tooltip=series.tooltip;tooltip.setBounds({x:0,y:nextY,width:this.pixelWidth,height:bottom});if(tooltip.invalid){tooltip.validate()}tooltip.toBack();nextY=spritePointToSvg({x:0,y:tooltip.label.pixelY+tooltip.label.measuredHeight-tooltip.pixelY+pointY+tooltip.pixelMarginBottom},tooltip).y}}}}};XYChart.prototype.showAxisTooltip=function(axes,position,except){var _this=this;each(axes.iterator(),(function(axis){if(!except||except.indexOf(axis)==-1){if(_this.dataItems.length>0||axis.dataItems.length>0){axis.showTooltipAtPosition(position)}}}))};XYChart.prototype.getUpdatedRange=function(axis,range){if(!axis){return}var start;var end;var inversed=axis.renderer.inversed;if(inversed){invertRange(range);start=1-axis.end;end=1-axis.start}else{start=axis.start;end=axis.end}var difference=end-start;return{start:start+range.start*difference,end:start+range.end*difference}};XYChart.prototype.handleCursorZoomEnd=function(event){var cursor=this.cursor;var behavior=cursor.behavior;if(behavior=="zoomX"||behavior=="zoomXY"){var xRange=cursor.xRange;if(xRange&&this.xAxes.length>0){xRange=this.getUpdatedRange(this.xAxes.getIndex(0),xRange);xRange.priority="start";this.zoomAxes(this.xAxes,xRange)}}if(behavior=="zoomY"||behavior=="zoomXY"){var yRange=cursor.yRange;if(yRange&&this.yAxes.length>0){yRange=this.getUpdatedRange(this.yAxes.getIndex(0),yRange);yRange.priority="start";this.zoomAxes(this.yAxes,yRange)}}this.handleHideCursor()};XYChart.prototype.handleCursorPanStart=function(event){var xAxis=this.xAxes.getIndex(0);if(xAxis){this._panStartXRange={start:xAxis.start,end:xAxis.end};if(xAxis.renderer.inversed){this._panStartXRange=invertRange(this._panStartXRange)}}var yAxis=this.yAxes.getIndex(0);if(yAxis){this._panStartYRange={start:yAxis.start,end:yAxis.end};if(yAxis.renderer.inversed){this._panStartYRange=invertRange(this._panStartYRange)}}};XYChart.prototype.handleCursorPanEnd=function(event){var cursor=this.cursor;var behavior=cursor.behavior;if(this._panEndXRange&&(behavior=="panX"||behavior=="panXY")){var panEndRange=this._panEndXRange;var panStartRange=this._panStartXRange;var delta=0;if(panEndRange.start<0){delta=panEndRange.start}if(panStartRange.end>1){if(panEndRange.end>panStartRange.end){delta=panEndRange.end-panStartRange.end}}else if(panEndRange.end>1){delta=panEndRange.end-1}this.zoomAxes(this.xAxes,{start:panEndRange.start-delta,end:panEndRange.end-delta},false,cursor.snapOnPan);this._panEndXRange=undefined;this._panStartXRange=undefined}if(this._panEndYRange&&(behavior=="panY"||behavior=="panXY")){var panEndRange=this._panEndYRange;var delta=0;if(panEndRange.start<0){delta=panEndRange.start}if(panEndRange.end>1){delta=panEndRange.end-1}this.zoomAxes(this.yAxes,{start:panEndRange.start-delta,end:panEndRange.end-delta},false,cursor.snapOnPan);this._panEndYRange=undefined;this._panStartYRange=undefined}};XYChart.prototype.handleCursorCanceled=function(){this._panEndXRange=undefined;this._panStartXRange=undefined};XYChart.prototype.handleCursorPanning=function(event){var cursor=this.cursor;var behavior=cursor.behavior;var maxPanOut=cursor.maxPanOut;if(this._panStartXRange&&(behavior=="panX"||behavior=="panXY")){var panStartRange=this._panStartXRange;var range=cursor.xRange;var axisRange=this.getCommonAxisRange(this.xAxes);var difference=panStartRange.end-panStartRange.start;var delta=range.start*(axisRange.end-axisRange.start);var newStart=Math.max(-maxPanOut,delta+panStartRange.start);var newEnd=Math.min(delta+panStartRange.end,1+maxPanOut);if(newStart<=0){newEnd=newStart+difference}if(newEnd>=1){newStart=newEnd-difference}var newRange={start:newStart,end:newEnd};this._panEndXRange=newRange;this.zoomAxes(this.xAxes,newRange,false,false,cursor.maxPanOut)}if(this._panStartYRange&&(behavior=="panY"||behavior=="panXY")){var panStartRange=this._panStartYRange;var range=cursor.yRange;var axisRange=this.getCommonAxisRange(this.yAxes);var difference=panStartRange.end-panStartRange.start;var delta=range.start*(axisRange.end-axisRange.start);var newStart=Math.max(-maxPanOut,delta+panStartRange.start);var newEnd=Math.min(delta+panStartRange.end,1+maxPanOut);if(newStart<=0){newEnd=newStart+difference}if(newEnd>=1){newStart=newEnd-difference}var newRange={start:newStart,end:newEnd};this._panEndYRange=newRange;this.zoomAxes(this.yAxes,newRange,false,false,cursor.maxPanOut)}this.handleHideCursor()};XYChart.prototype.handleYAxisSet=function(series){};XYChart.prototype.handleCursorZoomStart=function(event){};Object.defineProperty(XYChart.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(scrollbar){var _this=this;if(this._scrollbarX){this.removeDispose(this._scrollbarX)}this._scrollbarX=scrollbar;if(scrollbar){this._disposers.push(scrollbar);scrollbar.parent=this.topAxesContainer;scrollbar.shouldClone=false;scrollbar.startGrip.exportable=false;scrollbar.endGrip.exportable=false;scrollbar.toBack();scrollbar.orientation="horizontal";scrollbar.events.on("rangechanged",this.handleXScrollbarChange,this,false);this.events.on("datavalidated",(function(){return scrollbar.updateThumb(false)}),this,false);scrollbar.adapter.add("positionValue",(function(arg){var xAxis=_this.xAxes.getIndex(0);if(xAxis){arg.value=xAxis.getPositionLabel(xAxis.renderer.inversed?1-arg.position:arg.position)}return arg}))}},enumerable:true,configurable:true});Object.defineProperty(XYChart.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(scrollbar){var _this=this;if(this._scrollbarY){this.removeDispose(this._scrollbarY)}this._scrollbarY=scrollbar;if(scrollbar){this._disposers.push(scrollbar);scrollbar.parent=this.rightAxesContainer;scrollbar.startGrip.exportable=false;scrollbar.shouldClone=false;scrollbar.endGrip.exportable=false;scrollbar.toFront();scrollbar.orientation="vertical";scrollbar.events.on("rangechanged",this.handleYScrollbarChange,this,false);this.events.on("datavalidated",(function(){return scrollbar.updateThumb(false)}),this,false);scrollbar.adapter.add("positionValue",(function(arg){var yAxis=_this.yAxes.getIndex(0);if(yAxis){arg.value=yAxis.getPositionLabel(arg.position)}return arg}))}},enumerable:true,configurable:true});XYChart.prototype.handleXScrollbarChange=function(event){if(this.inited){var scrollbar=event.target;var range=scrollbar.range;if(range.start==0){range.priority="start"}if(range.end==1){range.priority="end"}range=this.zoomAxes(this.xAxes,range);scrollbar.fixRange(range)}};XYChart.prototype.handleYScrollbarChange=function(event){if(this.inited){var scrollbar=event.target;var range=scrollbar.range;if(range.end==1){range.priority="end"}if(range.start==0){range.priority="start"}range=this.zoomAxes(this.yAxes,range);scrollbar.fixRange(range)}};XYChart.prototype.zoomAxes=function(axes,range,instantly,round,declination,stop){var realRange={start:0,end:1};this.showSeriesTooltip();var originalRange=range;if(!this.dataInvalid){each(axes.iterator(),(function(axis){var maxZoomFactor=axis.maxZoomFactor;if(isNumber$1(axis.minZoomCount)){maxZoomFactor=maxZoomFactor/axis.minZoomCount}if(stop&&1/(range.end-range.start)>=maxZoomFactor);else{if(axis.zoomable){if(axis.renderer.inversed){range=invertRange(originalRange)}else{range=originalRange}axis.hideTooltip(0);if(round){if(axis instanceof CategoryAxis){var cellWidth=axis.getCellEndPosition(0)-axis.getCellStartPosition(0);range.start=axis.roundPosition(range.start+cellWidth/2-axis.startLocation*cellWidth,axis.startLocation);range.end=axis.roundPosition(range.end-cellWidth/2+(1-axis.endLocation)*cellWidth,axis.endLocation)}else{var d=1e-4;range.start=axis.roundPosition(range.start+d,0,axis.startLocation);range.end=axis.roundPosition(range.end+d,0,axis.endLocation)}}var axisRange=axis.zoom(range,instantly,instantly,declination);if(axis.renderer.inversed){axisRange=invertRange(axisRange)}realRange=axisRange}}}))}return realRange};Object.defineProperty(XYChart.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(value){if(this.setPropertyValue("maskBullets",value,true)&&this.bulletsContainer){if(value){this.bulletsContainer.mask=this._bulletMask}else{this.bulletsContainer.mask=undefined}}},enumerable:true,configurable:true});Object.defineProperty(XYChart.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(value){this.setPropertyValue("arrangeTooltips",value,true)},enumerable:true,configurable:true});XYChart.prototype.handleWheel=function(event){var plotContainer=this.plotContainer;var svgPoint=documentPointToSvg(event.point,this.htmlContainer,this.svgContainer.cssScale);var plotPoint=svgPointToSprite(svgPoint,plotContainer);var shift=event.shift.y;this.handleWheelReal(shift,this.mouseWheelBehavior,plotPoint)};XYChart.prototype.handleHorizontalWheel=function(event){var plotContainer=this.plotContainer;var svgPoint=documentPointToSvg(event.point,this.htmlContainer,this.svgContainer.cssScale);var plotPoint=svgPointToSprite(svgPoint,plotContainer);this.handleWheelReal(event.shift.x,this.horizontalMouseWheelBehavior,plotPoint)};XYChart.prototype.handleWheelReal=function(shift,mouseWheelBehavior,plotPoint){if(shift!=0){var plotContainer=this.plotContainer;var rangeX=this.getCommonAxisRange(this.xAxes);var rangeY=this.getCommonAxisRange(this.yAxes);var shiftStep=.1;var maxPanOut=0;if(mouseWheelBehavior=="panX"||mouseWheelBehavior=="panXY"){var xAxis=this.xAxes.getIndex(0);var round=false;var singleItemStep=shiftStep;if(xAxis instanceof CategoryAxis){singleItemStep=.5/((rangeX.end-rangeX.start)*xAxis.dataItems.length);round=true}shiftStep=Math.max(.2,singleItemStep);var differenceX=rangeX.end-rangeX.start;var newStartX=Math.max(-maxPanOut,rangeX.start+shiftStep*shift/100*(rangeX.end-rangeX.start));var newEndX=Math.min(rangeX.end+shiftStep*shift/100*(rangeX.end-rangeX.start),1+maxPanOut);if(newStartX<=0){newEndX=newStartX+differenceX}if(newEndX>=1){newStartX=newEndX-differenceX}this.zoomAxes(this.xAxes,{start:newStartX,end:newEndX},undefined,round)}if(mouseWheelBehavior=="panY"||mouseWheelBehavior=="panXY"){var yAxis=this.yAxes.getIndex(0);var singleItemStep=shiftStep;var round=false;if(yAxis instanceof CategoryAxis){singleItemStep=.5/((rangeX.end-rangeX.start)*yAxis.dataItems.length);round=true}shiftStep=Math.max(.2,singleItemStep);shift*=-1;var differenceY=rangeY.end-rangeY.start;var newStartY=Math.max(-maxPanOut,rangeY.start+shiftStep*shift/100*(rangeY.end-rangeY.start));var newEndY=Math.min(rangeY.end+shiftStep*shift/100*(rangeY.end-rangeY.start),1+maxPanOut);if(newStartY<=0){newEndY=newStartY+differenceY}if(newEndY>=1){newStartY=newEndY-differenceY}this.zoomAxes(this.yAxes,{start:newStartY,end:newEndY},undefined,round)}if(mouseWheelBehavior=="zoomX"||mouseWheelBehavior=="zoomXY"){var locationX=plotPoint.x/plotContainer.maxWidth;var location2X=this.xAxes.getIndex(0).toAxisPosition(locationX);var newStartX=Math.max(-maxPanOut,rangeX.start-shiftStep*(rangeX.end-rangeX.start)*shift/100*locationX);newStartX=Math.min(newStartX,location2X);var newEndX=Math.min(rangeX.end+shiftStep*(rangeX.end-rangeX.start)*shift/100*(1-locationX),1+maxPanOut);newEndX=Math.max(newEndX,location2X);this.zoomAxes(this.xAxes,{start:newStartX,end:newEndX},undefined)}if(mouseWheelBehavior=="zoomY"||mouseWheelBehavior=="zoomXY"){var locationY=plotPoint.y/plotContainer.maxHeight;var location2Y=this.yAxes.getIndex(0).toAxisPosition(locationY);var newStartY=Math.max(-maxPanOut,rangeY.start-shiftStep*(rangeY.end-rangeY.start)*shift/100*(1-locationY));newStartY=Math.min(newStartY,location2Y);var newEndY=Math.min(rangeY.end+shiftStep*shift/100*locationY*(rangeY.end-rangeY.start),1+maxPanOut);newEndY=Math.max(newEndY,location2Y);this.zoomAxes(this.yAxes,{start:newStartY,end:newEndY},undefined)}}};Object.defineProperty(XYChart.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(value){if(this.setPropertyValue("mouseWheelBehavior",value)){if(value!="none"){this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,false);this._disposers.push(this._mouseWheelDisposer)}else{if(this._mouseWheelDisposer){this.plotContainer.wheelable=false;this.plotContainer.hoverable=false;this._mouseWheelDisposer.dispose()}}}},enumerable:true,configurable:true});Object.defineProperty(XYChart.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(value){if(this.setPropertyValue("horizontalMouseWheelBehavior",value)){if(value!="none"){this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,false);this._disposers.push(this._mouseWheelDisposer2)}else{if(this._mouseWheelDisposer2){this.plotContainer.wheelable=false;this.plotContainer.hoverable=false;this._mouseWheelDisposer2.dispose()}}}},enumerable:true,configurable:true});XYChart.prototype.dataSourceDateFields=function(fields){var _this=this;fields=_super.prototype.dataSourceDateFields.call(this,fields);each(this.series.iterator(),(function(series){fields=_this.populateDataSourceFields(fields,series.dataFields,["dateX","dateY","openDateX","openDateY"])}));return fields};XYChart.prototype.dataSourceNumberFields=function(fields){var _this=this;fields=_super.prototype.dataSourceDateFields.call(this,fields);each(this.series.iterator(),(function(series){fields=_this.populateDataSourceFields(fields,series.dataFields,["valueX","valueY","openValueX","openValueY"])}));return fields};XYChart.prototype.processConfig=function(config){if(config){var xAxes=[];var yAxes=[];if(hasValue(config.xAxes)&&isArray$6(config.xAxes)){for(var i=0,len=config.xAxes.length;i<len;i++){if(!config.xAxes[i].type){throw Error("[XYChart error] No type set for xAxes["+i+"].")}else if(hasValue(config.xAxes[i]["axisRanges"])){for(var x=0,len_1=config.xAxes[i]["axisRanges"].length;x<len_1;x++){var range=config.xAxes[i]["axisRanges"][x];if(hasValue(range.date)&&isString$1(range.date)){range.date=this.dateFormatter.parse(range.date)}if(hasValue(range.endDate)&&isString$1(range.endDate)){range.endDate=this.dateFormatter.parse(range.endDate)}}xAxes.push({axisRanges:config.xAxes[i]["axisRanges"],index:i});delete config.xAxes[i]["axisRanges"]}}}if(hasValue(config.yAxes)&&isArray$6(config.yAxes)){for(var i=0,len=config.yAxes.length;i<len;i++){if(!config.yAxes[i].type){throw Error("[XYChart error] No type set for yAxes["+i+"].")}else if(hasValue(config.yAxes[i]["axisRanges"])){for(var x=0,len_2=config.yAxes[i]["axisRanges"].length;x<len_2;x++){var range=config.yAxes[i]["axisRanges"][x];if(hasValue(range.date)&&isString$1(range.date)){range.date=this.dateFormatter.parse(range.date)}if(hasValue(range.endDate)&&isString$1(range.endDate)){range.endDate=this.dateFormatter.parse(range.endDate)}}yAxes.push({axisRanges:config.yAxes[i]["axisRanges"],index:i});delete config.yAxes[i]["axisRanges"]}}}if(hasValue(config.series)&&isArray$6(config.series)){for(var i=0,len=config.series.length;i<len;i++){config.series[i].type=config.series[i].type||"LineSeries"}}if(hasValue(config.cursor)&&!hasValue(config.cursor.type)){config.cursor.type="XYCursor"}if(hasValue(config.scrollbarX)&&!hasValue(config.scrollbarX.type)){config.scrollbarX.type="Scrollbar"}if(hasValue(config.scrollbarY)&&!hasValue(config.scrollbarY.type)){config.scrollbarY.type="Scrollbar"}_super.prototype.processConfig.call(this,config);if(yAxes.length){for(var i=0,len=yAxes.length;i<len;i++){this.yAxes.getIndex(yAxes[i].index).config={axisRanges:yAxes[i].axisRanges}}}if(xAxes.length){for(var i=0,len=xAxes.length;i<len;i++){this.xAxes.getIndex(xAxes[i].index).config={axisRanges:xAxes[i].axisRanges}}}}};XYChart.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="scrollbarX"){return 1}else if(b=="scrollbarX"){return-1}else if(a=="scrollbarY"){return 1}else if(b=="scrollbarY"){return-1}else if(a=="cursor"){return 1}else if(b=="cursor"){return-1}else if(a=="series"){return 1}else if(b=="series"){return-1}else{return _super.prototype.configOrder.call(this,a,b)}};XYChart.prototype.createSeries=function(){return new XYSeries};Object.defineProperty(XYChart.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(button){var _this=this;this._zoomOutButton=button;if(button){button.events.on("hit",(function(){_this.zoomAxes(_this.xAxes,{start:0,end:1});_this.zoomAxes(_this.yAxes,{start:0,end:1})}),undefined,false)}},enumerable:true,configurable:true});XYChart.prototype.copyFrom=function(source){var _this=this;source.xAxes.each((function(axis){var a=_this.xAxes.push(axis.clone());a.chart=_this;a.renderer.chart=_this}));source.yAxes.each((function(axis){var a=_this.yAxes.push(axis.clone());a.renderer.chart=_this;a.chart=_this}));_super.prototype.copyFrom.call(this,source);if(source.cursor){this.cursor=source.cursor.clone()}if(source.scrollbarX){this.scrollbarX=source.scrollbarX.clone()}if(source.scrollbarY){this.scrollbarY=source.scrollbarY.clone()}};XYChart.prototype.disposeData=function(){_super.prototype.disposeData.call(this);var scrollbarX=this.scrollbarX;if(scrollbarX&&scrollbarX instanceof XYChartScrollbar){scrollbarX.scrollbarChart.disposeData()}var scrollbarY=this.scrollbarY;if(scrollbarY&&scrollbarY instanceof XYChartScrollbar){scrollbarY.scrollbarChart.disposeData()}this.xAxes.each((function(axis){if(axis instanceof CategoryAxis){axis.disposeData()}}));this.yAxes.each((function(axis){if(axis instanceof CategoryAxis){axis.disposeData()}}))};XYChart.prototype.addData=function(rawDataItem,removeCount){if(this.scrollbarX instanceof XYChartScrollbar){this.addScrollbarData(this.scrollbarX,removeCount)}if(this.scrollbarY instanceof XYChartScrollbar){this.addScrollbarData(this.scrollbarY,removeCount)}_super.prototype.addData.call(this,rawDataItem,removeCount)};XYChart.prototype.addScrollbarData=function(scrollbar,removeCount){var chart=scrollbar.scrollbarChart;chart._parseDataFrom=chart.data.length;chart.invalidateData()};XYChart.prototype.removeScrollbarData=function(scrollbar,removeCount){var chart=scrollbar.scrollbarChart;if(isNumber$1(removeCount)){while(removeCount>0){var dataItem=this.dataItems.getIndex(0);if(dataItem){chart.dataItems.remove(dataItem)}chart.dataUsers.each((function(dataUser){var dataItem=dataUser.dataItems.getIndex(0);if(dataItem){dataUser.dataItems.remove(dataItem)}}));chart._parseDataFrom--;removeCount--}chart.invalidateData()}};XYChart.prototype.removeData=function(count){if(this.scrollbarX instanceof XYChartScrollbar){this.removeScrollbarData(this.scrollbarX,count)}if(this.scrollbarY instanceof XYChartScrollbar){this.removeScrollbarData(this.scrollbarY,count)}_super.prototype.removeData.call(this,count)};XYChart.prototype.setTapToActivate=function(value){_super.prototype.setTapToActivate.call(this,value);if(this.cursor){this.cursor.interactions.isTouchProtected=value;this.plotContainer.interactions.isTouchProtected=value}};XYChart.prototype.handleTapToActivate=function(){_super.prototype.handleTapToActivate.call(this);if(this.cursor){this.cursor.interactions.isTouchProtected=false;this.plotContainer.interactions.isTouchProtected=false}};XYChart.prototype.handleTapToActivateDeactivation=function(){_super.prototype.handleTapToActivateDeactivation.call(this);if(this.cursor){this.cursor.interactions.isTouchProtected=true;this.plotContainer.interactions.isTouchProtected=true}};return XYChart}(SerialChart);registry.registeredClasses["XYChart"]=XYChart;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(target,stateId){if(target instanceof XYChart&&target.scrollbarX){var state=target.states.create(stateId);var sbstate=target.scrollbarX.states.create(stateId);sbstate.properties.disabled=true;return state}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(target,stateId){if(target instanceof XYChart&&target.scrollbarY){var state=target.states.create(stateId);var sbstate=target.scrollbarY.states.create(stateId);sbstate.properties.disabled=true;return state}return null}});var LineSeriesSegment=function(_super){__extends(LineSeriesSegment,_super);function LineSeriesSegment(){var _this=_super.call(this)||this;_this.className="LineSeriesSegment";_this.isMeasured=false;_this.interactionsEnabled=false;_this.layout="none";var fillSprite=_this.createChild(Sprite);_this.fillSprite=fillSprite;fillSprite.shouldClone=false;fillSprite.setElement(_this.paper.add("path"));fillSprite.isMeasured=false;_this._disposers.push(fillSprite);var strokeSprite=_this.createChild(Sprite);_this.strokeSprite=strokeSprite;strokeSprite.shouldClone=false;strokeSprite.fill=color();strokeSprite.setElement(_this.paper.add("path"));strokeSprite.isMeasured=false;_this._disposers.push(strokeSprite);return _this}LineSeriesSegment.prototype.drawSegment=function(points,closePoints,smoothnessX,smoothnessY){if(!this.disabled){if(points.length>0&&closePoints.length>0&&isNumber$1(points[0].x)&&isNumber$1(points[0].y)){var path=moveTo({x:points[0].x-.2,y:points[0].y-.2})+moveTo(points[0]);var series=this.series;if(series.smoothing=="bezier"){path+=new Tension(smoothnessX,smoothnessY).smooth(points)}else if(series.smoothing=="monotoneX"){path+=new MonotoneX({closed:false}).smooth(points)}else if(series.smoothing=="monotoneY"){path+=new MonotoneY({closed:false}).smooth(points)}if(this.strokeOpacity==0||this.strokeSprite.strokeOpacity==0);else{this.strokeSprite.path=path}if(this.fillOpacity>0||this.fillSprite.fillOpacity>0){if(isNumber$1(closePoints[0].x)&&isNumber$1(closePoints[0].y)){path+=lineTo(closePoints[0]);if(series.smoothing=="bezier"){path+=new Tension(smoothnessX,smoothnessY).smooth(closePoints)}else if(series.smoothing=="monotoneX"){path+=new MonotoneX({closed:false}).smooth(closePoints)}else if(series.smoothing=="monotoneY"){path+=new MonotoneY({closed:false}).smooth(closePoints)}path+=lineTo(points[0]);path+=closePath();this.fillSprite.path=path}}}else{this.fillSprite.path="";this.strokeSprite.path=""}}};LineSeriesSegment.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);var lineElement=this.strokeSprite;copyProperties$1(source,lineElement.properties,visualProperties);lineElement.events.copyFrom(source.strokeSprite.events);lineElement.fillOpacity=0;var fillElement=this.fillSprite;copyProperties$1(source,fillElement.properties,visualProperties);fillElement.events.copyFrom(source.fillSprite.events);fillElement.strokeOpacity=0};return LineSeriesSegment}(Container);registry.registeredClasses["LineSeriesSegment"]=LineSeriesSegment;var DurationAxisDataItem=function(_super){__extends(DurationAxisDataItem,_super);function DurationAxisDataItem(){var _this=_super.call(this)||this;_this.className="DurationAxisDataItem";_this.applyTheme();return _this}return DurationAxisDataItem}(ValueAxisDataItem);var DurationAxis=function(_super){__extends(DurationAxis,_super);function DurationAxis(){var _this=_super.call(this)||this;_this._baseUnit="second";_this.className="DurationAxis";_this.setPropertyValue("maxZoomFactor",1e6);_this.applyTheme();return _this}DurationAxis.prototype.formatLabel=function(value,format){return this.durationFormatter.format(value,format||this.axisDurationFormat)};DurationAxis.prototype.adjustMinMax=function(min,max,difference,gridCount,strictMode){var e_1,_a;var minMaxStep;var timeUnit=this.baseUnit;this.setPropertyValue("maxPrecision",0);if(timeUnit=="millisecond"||timeUnit=="second"||timeUnit=="minute"||timeUnit=="hour"){if(gridCount<=1){gridCount=1}gridCount=Math.round(gridCount);var initialMin=min;var initialMax=max;if(difference===0){difference=Math.abs(max)}var step=difference/gridCount;var divisors=[60,30,20,15,10,2,1];var realDivisor=1;if(timeUnit=="hour"){divisors=[24,12,6,4,2,1]}try{for(var divisors_1=__values(divisors),divisors_1_1=divisors_1.next();!divisors_1_1.done;divisors_1_1=divisors_1.next()){var divisor=divisors_1_1.value;if(difference/divisor>gridCount){realDivisor=divisor;break}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(divisors_1_1&&!divisors_1_1.done&&(_a=divisors_1.return))_a.call(divisors_1)}finally{if(e_1)throw e_1.error}}var count=Math.ceil((max-min)/realDivisor/gridCount);var exponent=Math.log(Math.abs(count))*Math.LOG10E;var power=Math.pow(10,Math.floor(exponent))/10;var reducedCount=count/power;var closest$1=closest(divisors,reducedCount);count=closest$1*power;step=realDivisor*count;this.durationFormatter.getValueUnit(step,this.baseUnit);min=Math.floor(min/step)*step;max=Math.ceil(max/step)*step;if(strictMode){min-=step;if(min<0&&initialMin>=0){min=0}max+=step;if(max>0&&initialMax<=0){max=0}}minMaxStep={min,max,step}}else{minMaxStep=_super.prototype.adjustMinMax.call(this,min,max,difference,gridCount,strictMode)}this.axisDurationFormat=this.durationFormatter.getFormat(minMaxStep.step,minMaxStep.max,this.baseUnit);return minMaxStep};Object.defineProperty(DurationAxis.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(value){this._tooltipDurationFormat=value},enumerable:true,configurable:true});DurationAxis.prototype.getTooltipText=function(position){var value=round$1(this.positionToValue(position),this._stepDecimalPlaces);var valueStr=this.formatLabel(value,this.tooltipDurationFormat);if(!this._adapterO){return valueStr}else{return this._adapterO.apply("getTooltipText",valueStr)}};Object.defineProperty(DurationAxis.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(timeUnit){if(this._baseUnit!=timeUnit){this._baseUnit=timeUnit;this.durationFormatter.baseUnit=timeUnit;this.invalidate()}},enumerable:true,configurable:true});DurationAxis.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.baseUnit=source.baseUnit};return DurationAxis}(ValueAxis);registry.registeredClasses["DurationAxis"]=DurationAxis;registry.registeredClasses["DurationAxisDataItem"]=DurationAxisDataItem;var LineSeriesDataItem=function(_super){__extends(LineSeriesDataItem,_super);function LineSeriesDataItem(){var _this=_super.call(this)||this;_this.className="LineSeriesDataItem";return _this}return LineSeriesDataItem}(XYSeriesDataItem);var LineSeries=function(_super){__extends(LineSeries,_super);function LineSeries(){var _this=_super.call(this)||this;_this.minDistance=.5;_this.segments=new ListTemplate(_this.createSegment());_this.segments.template.applyOnClones=true;_this._disposers.push(new ListDisposer(_this.segments));_this._disposers.push(_this.segments.template);_this._segmentsIterator=new ListIterator(_this.segments,(function(){return _this.segments.create()}));_this._segmentsIterator.createNewItems=true;_this.className="LineSeries";_this.strokeOpacity=1;_this.fillOpacity=0;_this.connect=true;_this.tensionX=1;_this.tensionY=1;_this.autoGapCount=1.1;_this.smoothing="bezier";_this.segmentsContainer=_this.mainContainer.createChild(Container);_this.segmentsContainer.isMeasured=false;_this.bulletsContainer.toFront();_this.applyTheme();return _this}LineSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Line Series")}};LineSeries.prototype.createSegment=function(){return new LineSeriesSegment};LineSeries.prototype.createDataItem=function(){return new LineSeriesDataItem};LineSeries.prototype.setInitialWorkingValues=function(dataItem){var yAxis=this._yAxis.get();var xAxis=this._xAxis.get();if(this.appeared&&this.visible){var previousDataItem=this.dataItems.getIndex(dataItem.index-1);dataItem.component=this;if(this.baseAxis==xAxis){if(yAxis instanceof ValueAxis){var initialY=yAxis.minZoomed;if(previousDataItem){initialY=previousDataItem.values["valueY"].workingValue}dataItem.setWorkingValue("valueY",initialY,0);dataItem.setWorkingValue("valueY",dataItem.values.valueY.value);if(xAxis instanceof DateAxis){dataItem.setWorkingLocation("dateX",dataItem.locations.dateX-1,0);dataItem.setWorkingLocation("dateX",dataItem.locations.dateX)}else if(xAxis instanceof DurationAxis){if(previousDataItem){var value=dataItem.valueX;dataItem.setWorkingValue("valueX",previousDataItem.valueX,0);dataItem.setWorkingValue("valueX",value)}}}}if(this.baseAxis==yAxis){if(xAxis instanceof ValueAxis){var initialX=xAxis.minZoomed;if(previousDataItem){initialX=previousDataItem.values["valueX"].workingValue}dataItem.setWorkingValue("valueX",initialX,0);dataItem.setWorkingValue("valueX",dataItem.values.valueX.value);if(yAxis instanceof DateAxis){dataItem.setWorkingLocation("dateY",dataItem.locations.dateX-1,0);dataItem.setWorkingLocation("dateY",dataItem.locations.dateY)}else if(yAxis instanceof DurationAxis){if(previousDataItem){var value=dataItem.valueY;dataItem.setWorkingValue("valueY",previousDataItem.valueY,0);dataItem.setWorkingValue("valueY",value)}}}}}else{if(this.baseAxis==xAxis){if(yAxis instanceof ValueAxis){if(xAxis instanceof DateAxis){dataItem.setWorkingLocation("dateX",dataItem.locations.dateX)}if(xAxis instanceof CategoryAxis){dataItem.setWorkingLocation("categoryX",dataItem.locations.categoryX)}}}if(this.baseAxis==yAxis){if(xAxis instanceof ValueAxis){if(yAxis instanceof DateAxis){dataItem.setWorkingLocation("dateY",dataItem.locations.dateY)}if(yAxis instanceof CategoryAxis){dataItem.setWorkingLocation("categoryY",dataItem.locations.categoryY)}}}}};LineSeries.prototype.updateLegendValue=function(dataItem,notRange){_super.prototype.updateLegendValue.call(this,dataItem,notRange);if(dataItem&&dataItem.segment){this.tooltipColorSource=dataItem.segment}};LineSeries.prototype.validate=function(){var _this=this;_super.prototype.validate.call(this);if(this.xAxis&&this.yAxis){this._segmentsIterator.reset();this.openSegmentWrapper(this._adjustedStartIndex);each(this.axisRanges.iterator(),(function(range){_this.openSegmentWrapper(_this._adjustedStartIndex,range)}));each(this._segmentsIterator.iterator(),(function(segment){segment.__disabled=true}))}};LineSeries.prototype.sliceData=function(){var startIndex=this.startIndex;var endIndex=this.endIndex;for(var i=this.startIndex-1;i>=0;i--){var dataItem=this.dataItems.getIndex(i);if(dataItem&&dataItem.hasValue(this._xValueFields)&&dataItem.hasValue(this._yValueFields)){startIndex=i;break}}this._adjustedStartIndex=this.findAdjustedIndex(startIndex,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);for(var i=this.endIndex,len=this.dataItems.length;i<len;i++){var dataItem=this.dataItems.getIndex(i);if(dataItem&&dataItem.hasValue(this._xValueFields)&&dataItem.hasValue(this._yValueFields)){endIndex=i+1;break}}this._workingStartIndex=startIndex;this._workingEndIndex=endIndex};LineSeries.prototype.findAdjustedIndex=function(adjustedIndex,properties){var _this=this;var propertyFields=this.propertyFields;var startIndex=adjustedIndex;each$2(properties,(function(property){if(hasValue(propertyFields[property])){for(var i=startIndex;i>=0;i--){var dataItem=_this.dataItems.getIndex(i);if(dataItem){if(hasValue(dataItem.properties[property])){if(adjustedIndex>i){adjustedIndex=i}break}}}}}));return adjustedIndex};LineSeries.prototype.openSegmentWrapper=function(openIndex,axisRange){var params={index:openIndex,axisRange};do{params=this.openSegment(params.index,params.axisRange)}while(params)};LineSeries.prototype.getSegment=function(){var segment=this._segmentsIterator.getFirst();segment.series=this;if(segment.isDisposed()){this.segments.removeValue(segment);return this.getSegment()}return segment};LineSeries.prototype.openSegment=function(openIndex,axisRange){var addToClose=false;var points=[];openIndex=Math.min(openIndex,this.dataItems.length);var endIndex=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var closeIndex;var propertiesChanged=false;var segment=this.getSegment();segment.strokeDasharray=undefined;segment.__disabled=false;if(axisRange){segment.parent=axisRange.contents;copyProperties$1(axisRange.contents,segment,visualProperties)}else{copyProperties$1(this,segment,visualProperties);segment.filters.clear();segment.parent=this.segmentsContainer}this.group.node.removeAttribute("fill");var connect=this.connect;var valuesFound=false;for(var i=openIndex;i<endIndex;i++){var dataItem=this.dataItems.getIndex(i);dataItem.segment=segment;if(dataItem.hasProperties){if(i==openIndex){this.updateSegmentProperties(dataItem.properties,segment)}else{propertiesChanged=this.updateSegmentProperties(dataItem.properties,segment,true)}}if(dataItem.hasValue(this._xValueFields)&&dataItem.hasValue(this._yValueFields)){this.addPoints(points,dataItem,this.xField,this.yField);valuesFound=true}else{if(i==openIndex){continue}else{if(!connect&&valuesFound){closeIndex=i;break}}}closeIndex=i;if(this.baseAxis instanceof DateAxis){var next=this.dataItems.getIndex(i+1);if(next&&this.baseAxis.makeGap(next,dataItem)){addToClose=true;break}}if(propertiesChanged){break}}return this.closeSegment(segment,points,openIndex,closeIndex,axisRange,addToClose)};LineSeries.prototype.addPoints=function(points,dataItem,xField,yField,backwards){var point=this.getPoint(dataItem,xField,yField,dataItem.workingLocations[xField],dataItem.workingLocations[yField]);if(!backwards){dataItem.point=point}points.push(point)};LineSeries.prototype.closeSegment=function(segment,points,openIndex,closeIndex,axisRange,add){var closePoints=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked){for(var i=closeIndex;i>=openIndex;i--){var dataItem=this.dataItems.getIndex(i);if(dataItem.hasValue(this._xValueFields)&&dataItem.hasValue(this._yValueFields)){this.addPoints(closePoints,dataItem,this.xOpenField,this.yOpenField,true)}}}else{var baseAxis=this.baseAxis;var count=points.length;var xAxis=this.xAxis;var yAxis=this.yAxis;if(count>0){if(baseAxis==xAxis){closePoints.push({x:points[count-1].x,y:yAxis.basePoint.y});closePoints.push({x:points[0].x,y:yAxis.basePoint.y})}else{closePoints.push({x:xAxis.basePoint.x,y:points[count-1].y});closePoints.push({x:xAxis.basePoint.x,y:points[0].y})}}}this.drawSegment(segment,points,closePoints);if(add){closeIndex++}if(closeIndex<this._workingEndIndex-1){return{index:closeIndex,axisRange}}else{return null}};LineSeries.prototype.drawSegment=function(segment,points,closePoints){segment.drawSegment(points,closePoints,this.tensionX,this.tensionY)};LineSeries.prototype.updateSegmentProperties=function(itemProperties,segment,checkOnly){var changed=false;each$1(itemProperties,(function(propertyName,value){if(hasValue(value)){var currentValue=segment[propertyName];var currentValueStr=void 0;if(currentValue){if(currentValue.toString){currentValueStr=currentValue.toString()}else{currentValueStr=currentValue}}var valueStr=void 0;if(value){if(value.toString){valueStr=value.toString()}else{valueStr=value}}if(currentValue==value||currentValueStr!=undefined&&valueStr!=undefined&&currentValueStr==valueStr);else{if(!checkOnly){segment[propertyName]=value}changed=true}}}));return changed};Object.defineProperty(LineSeries.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(value){if(this.setPropertyValue("connect",value)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(LineSeries.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(value){this.setPropertyValue("tensionX",value,true)},enumerable:true,configurable:true});Object.defineProperty(LineSeries.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(value){this.setPropertyValue("tensionY",value,true)},enumerable:true,configurable:true});LineSeries.prototype.createLegendMarker=function(marker){var _this=this;var w=marker.pixelWidth;var h=marker.pixelHeight;marker.disposeChildren();var line=marker.createChild(Line);line.shouldClone=false;copyProperties$1(this,line,visualProperties);line.x2=w;line.y=h/2;line.y2=1e-5;line.visible=true;if(this.fillOpacity>0){var fill=marker.createChild(Rectangle);copyProperties$1(this,fill,visualProperties);fill.width=w;fill.height=h;fill.y=0;fill.strokeOpacity=0;fill.visible=true;line.y=0}var legendDataItem=marker.dataItem;legendDataItem.color=this.stroke;legendDataItem.colorOrig=this.fill;eachContinue(this.bullets.iterator(),(function(bullet){if(bullet instanceof Bullet&&!bullet.copyToLegendMarker){return false}var hasLabels=false;if(bullet instanceof Container){each(bullet.children.iterator(),(function(child){if(child instanceof Label){hasLabels=true;return true}}))}if(!hasLabels){var clone=bullet.clone();clone.parent=marker;clone.isMeasured=true;clone.tooltipText=undefined;clone.x=w/2;if(_this.fillOpacity>0){clone.y=0}else{clone.y=h/2}clone.visible=true;if(!hasValue(clone.fill)){clone.fill=_this.fill}if(!hasValue(clone.stroke)){clone.stroke=_this.stroke}return false}}))};LineSeries.prototype.disposeData=function(){_super.prototype.disposeData.call(this);this.segments.clear()};Object.defineProperty(LineSeries.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(value){this.setPropertyValue("autoGapCount",value,true)},enumerable:true,configurable:true});Object.defineProperty(LineSeries.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(value){this.setPropertyValue("smoothing",value,true)},enumerable:true,configurable:true});return LineSeries}(XYSeries);registry.registeredClasses["LineSeries"]=LineSeries;registry.registeredClasses["LineSeriesDataItem"]=LineSeriesDataItem;var RadarSeriesDataItem=function(_super){__extends(RadarSeriesDataItem,_super);function RadarSeriesDataItem(){var _this=_super.call(this)||this;_this.className="RadarSeriesDataItem";_this.setLocation("dateX",0,0);_this.setLocation("dateY",0,0);_this.setLocation("categoryX",0,0);_this.setLocation("categoryY",0,0);_this.applyTheme();return _this}return RadarSeriesDataItem}(LineSeriesDataItem);var RadarSeries=function(_super){__extends(RadarSeries,_super);function RadarSeries(){var _this=_super.call(this)||this;_this.className="RadarSeries";_this.connectEnds=true;_this.applyTheme();return _this}RadarSeries.prototype.validate=function(){if(this.chart.invalid){this.chart.validate()}_super.prototype.validate.call(this)};RadarSeries.prototype.createDataItem=function(){return new RadarSeriesDataItem};RadarSeries.prototype.getPoint=function(dataItem,xKey,yKey,locationX,locationY,stackKeyX,stackKeyY){if(!stackKeyX){stackKeyX="valueX"}if(!stackKeyY){stackKeyY="valueY"}var x=this.yAxis.getX(dataItem,yKey,locationY,stackKeyY);var y=this.yAxis.getY(dataItem,yKey,locationY,stackKeyY);var radius=getDistance({x,y});if(radius==0){radius=1e-5}var angle=this.xAxis.getAngle(dataItem,xKey,locationX,stackKeyX);var startAngle=this.chart.startAngle;var endAngle=this.chart.endAngle;if(angle<startAngle||angle>endAngle){return undefined}else{return{x:radius*cos(angle),y:radius*sin(angle)}}};RadarSeries.prototype.addPoints=function(points,dataItem,xField,yField,backwards){var point=this.getPoint(dataItem,xField,yField,dataItem.locations[xField],dataItem.locations[yField]);if(point){points.push(point)}};RadarSeries.prototype.getMaskPath=function(){var renderer=this.yAxis.renderer;return arc(renderer.startAngle,renderer.endAngle-renderer.startAngle,renderer.pixelRadius,renderer.pixelInnerRadius)};RadarSeries.prototype.drawSegment=function(segment,points,closePoints){var axis=this.yAxis;var renderer=axis.renderer;if(this.connectEnds&&Math.abs(renderer.endAngle-renderer.startAngle)==360){if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked){points.push(points[0]);if(closePoints.length>0){closePoints.unshift(closePoints[closePoints.length-1])}}}_super.prototype.drawSegment.call(this,segment,points,closePoints)};Object.defineProperty(RadarSeries.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(value){this.setPropertyValue("connectEnds",value,true)},enumerable:true,configurable:true});RadarSeries.prototype.positionBulletReal=function(bullet,positionX,positionY){var xAxis=this.xAxis;var yAxis=this.yAxis;if(positionX<xAxis.start||positionX>xAxis.end||positionY<yAxis.start||positionY>yAxis.end){bullet.visible=false}bullet.moveTo(this.xAxis.renderer.positionToPoint(positionX,positionY))};RadarSeries.prototype.setXAxis=function(axis){_super.prototype.setXAxis.call(this,axis);this.updateRendererRefs()};RadarSeries.prototype.setYAxis=function(axis){_super.prototype.setYAxis.call(this,axis);this.updateRendererRefs()};RadarSeries.prototype.updateRendererRefs=function(){var rendererX=this.xAxis.renderer;var rendererY=this.yAxis.renderer;rendererX.axisRendererY=rendererY};return RadarSeries}(LineSeries);registry.registeredClasses["RadarSeries"]=RadarSeries;registry.registeredClasses["RadarSeriesDataItem"]=RadarSeriesDataItem;var AxisFillCircular=function(_super){__extends(AxisFillCircular,_super);function AxisFillCircular(axis){var _this=_super.call(this,axis)||this;_this.className="AxisFillCircular";_this.element=_this.paper.add("path");_this.radius=percent(100);_this.applyTheme();return _this}AxisFillCircular.prototype.draw=function(){_super.prototype.draw.call(this);if(this.__disabled||this.disabled){return}if(this.axis){var renderer=this.axis.renderer;this.fillPath=renderer.getPositionRangePath(this.startPosition,this.endPosition,this.radius,hasValue(this.innerRadius)?this.innerRadius:renderer.innerRadius,this.cornerRadius);this.path=this.fillPath}};Object.defineProperty(AxisFillCircular.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(AxisFillCircular.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(AxisFillCircular.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(value){this.setPropertyValue("cornerRadius",value,true)},enumerable:true,configurable:true});return AxisFillCircular}(AxisFill);registry.registeredClasses["AxisFillCircular"]=AxisFillCircular;var GridCircular=function(_super){__extends(GridCircular,_super);function GridCircular(){var _this=_super.call(this)||this;_this.className="GridCircular";_this.pixelPerfect=false;_this.applyTheme();return _this}Object.defineProperty(GridCircular.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(GridCircular.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});return GridCircular}(Grid);registry.registeredClasses["GridCircular"]=GridCircular;var AxisLabelCircular=function(_super){__extends(AxisLabelCircular,_super);function AxisLabelCircular(){var _this=_super.call(this)||this;_this.fdx=0;_this.fdy=0;_this.className="AxisLabelCircular";_this.padding(0,0,0,0);_this.location=.5;_this.locationOnPath=.5;_this.radius=0;_this.isMeasured=false;_this.applyTheme();return _this}Object.defineProperty(AxisLabelCircular.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(value){this.setPropertyValue("relativeRotation",value,true);if(!hasValue(value)){this.rotation=undefined;var dataItem=this.dataItem;if(dataItem&&dataItem.component){dataItem.component.invalidateDataItems()}}},enumerable:true,configurable:true});Object.defineProperty(AxisLabelCircular.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(AxisLabelCircular.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(value){this.setPropertyValue("bent",value,true);this.setPropertyValue("wrap",false);this.setPropertyValue("horizontalCenter","none");this.setPropertyValue("verticalCenter","none");if(value){this.setPropertyValue("dx",0);this.setPropertyValue("dy",0);this.setPropertyValue("x",0);this.setPropertyValue("y",0);this.setPropertyValue("rotation",0);this.fdx=0;this.fdy=0;this.textAlign="middle"}else{if(this.textPathElement){this.textPathElement.dispose();this.textPathElement=undefined}}},enumerable:true,configurable:true});AxisLabelCircular.prototype.pixelRadius=function(axisRadius){var sign=1;if(this.inside){sign=-1}return relativeToValue(this.radius,axisRadius)*sign};AxisLabelCircular.prototype.pixelRadiusY=function(axisRadius,axisRadiusY){var sign=1;if(this.inside){sign=-1}var radius=this.radius;if(isNumber$1(radius)){radius*=axisRadiusY/axisRadius;return relativeToValue(radius,axisRadius)*sign}else{return relativeToValue(radius,axisRadiusY)*sign}};AxisLabelCircular.prototype.fixPosition=function(angle,axisRadius,axisRadiusY,dx,dy){if(!isNumber$1(axisRadiusY)){axisRadiusY=axisRadius}if(!isNumber$1(dx)){dx=0}if(!isNumber$1(dy)){dy=0}var point={x:axisRadius*cos(angle),y:axisRadiusY*sin(angle)};if(this.invalid){this.validate()}var isNegative=false;var realRadius=this.radius;if(realRadius instanceof Percent&&realRadius.value<0){isNegative=true}else if(realRadius<0){isNegative=true}var relativeRotation=this.relativeRotation;var labelRadius=this.pixelRadius(axisRadius);if(this.bent){var point_1={x:(axisRadius+labelRadius)*cos(angle+180),y:(axisRadiusY+labelRadius*axisRadiusY/axisRadius)*sin(angle+180)};this.path=moveTo(point_1)+arcTo(angle+180,360,axisRadius+labelRadius,axisRadiusY+labelRadius*axisRadiusY/axisRadius);if(this.textPathElement){this.textPathElement.attr({startOffset:this.locationOnPath*100+"%"})}return}if(isNumber$1(relativeRotation)){this.horizontalCenter="none";this.verticalCenter="none";angle=fitAngleToRange(angle,-180,180);var pixelWidth=this.bbox.width;var pixelHeight=this.bbox.height;var pixelPaddingBottom=this.pixelPaddingBottom;var pixelPaddingTop=this.pixelPaddingTop;var pixelPaddingLeft=this.pixelPaddingLeft;var pixelPaddingRight=this.pixelPaddingRight;if(angle>90||angle<-90){if(relativeRotation==-90){relativeRotation=90;pixelWidth=0}}else{if(relativeRotation==-90){pixelHeight=-pixelHeight}if(relativeRotation==90){relativeRotation=-90;pixelWidth=-pixelPaddingLeft-pixelPaddingRight;pixelHeight=-pixelHeight-pixelPaddingTop-pixelPaddingBottom}}this.rotation=relativeRotation+angle+90;var dH=sin(relativeRotation)/2;var dW=cos(relativeRotation)/2;var rotation=this.rotation;this.dx=pixelHeight*dH*sin(rotation)-pixelWidth*dW*cos(rotation);this.dy=-pixelHeight*dH*cos(rotation)-pixelWidth*dW*sin(rotation);if(!this.inside){labelRadius+=(pixelHeight+pixelPaddingBottom+pixelPaddingTop)*cos(relativeRotation)+(pixelWidth+pixelPaddingLeft+pixelPaddingRight)*sin(relativeRotation)}else{if(angle>90||angle<-90){labelRadius-=(pixelPaddingBottom+pixelPaddingTop)*cos(relativeRotation)+(pixelPaddingLeft+pixelPaddingRight)*sin(relativeRotation)}else{labelRadius+=(pixelPaddingBottom+this.bbox.height+pixelPaddingTop)*cos(relativeRotation)+(pixelPaddingLeft+pixelPaddingRight+this.bbox.width)*sin(relativeRotation)}}point.x+=cos(angle)*labelRadius;point.y+=sin(angle)*labelRadius*axisRadiusY/axisRadius}else{this.horizontalCenter="middle";this.verticalCenter="middle";if(isNegative){this.dx=0;this.dy=0;point.x=(axisRadius+labelRadius)*cos(angle);point.y=(axisRadiusY+labelRadius*axisRadiusY/axisRadius)*sin(angle)}else{this.dy=this._measuredHeight/2*sin(angle);this.dx=this._measuredWidth/2*cos(angle);point.x+=cos(angle)*labelRadius;point.y+=sin(angle)*labelRadius*axisRadiusY/axisRadius}}point.x+=dx;point.y+=dy;this.fdx=this.dx;this.fdy=this.dy;this.moveTo(point)};return AxisLabelCircular}(AxisLabel);registry.registeredClasses["AxisLabelCircular"]=AxisLabelCircular;var AxisRendererCircular=function(_super){__extends(AxisRendererCircular,_super);function AxisRendererCircular(){var _this=_super.call(this)||this;_this.pixelRadiusReal=0;_this.layout="none";_this.className="AxisRendererCircular";_this.isMeasured=false;_this.startAngle=-90;_this.endAngle=270;_this.useChartAngles=true;_this.radius=percent(100);_this.isMeasured=false;_this.grid.template.location=0;_this.labels.template.location=0;_this.labels.template.radius=15;_this.ticks.template.location=0;_this.ticks.template.pixelPerfect=false;_this.tooltipLocation=0;_this.line.strokeOpacity=0;_this.applyTheme();return _this}AxisRendererCircular.prototype.setAxis=function(axis){var _this=this;_super.prototype.setAxis.call(this,axis);axis.isMeasured=false;var tooltip=axis.tooltip;tooltip.adapter.add("dx",(function(x,target){var point=svgPointToSprite({x:target.pixelX,y:target.pixelY},_this);return _this.pixelRadius*Math.cos(Math.atan2(point.y,point.x))-point.x}));tooltip.adapter.add("dy",(function(y,target){var point=svgPointToSprite({x:target.pixelX,y:target.pixelY},_this);return _this.pixelRadius*Math.sin(Math.atan2(point.y,point.x))-point.y}))};AxisRendererCircular.prototype.validate=function(){if(this.chart&&this.chart.invalid){this.chart.validate()}_super.prototype.validate.call(this)};Object.defineProperty(AxisRendererCircular.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){if(this.setPercentProperty("radius",value,false,false,10,false)){if(this.axis){this.axis.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"innerRadius",{get:function(){var chart=this.chart;var innerRadius=this.getPropertyValue("innerRadius");if(chart){if(!hasValue(innerRadius)){innerRadius=chart.innerRadius;if(innerRadius instanceof Percent&&chart){innerRadius=percent(innerRadius.value*chart.innerRadiusModifyer*100)}}else{if(innerRadius instanceof Percent&&chart){var mr=chart.mr;var value=innerRadius.value;value=Math.max(mr*value,mr-Math.min(chart.plotContainer.innerHeight,chart.plotContainer.innerWidth))/mr;innerRadius=percent(value*100)}}return innerRadius}},set:function(value){if(this.setPercentProperty("innerRadius",value,false,false,10,false)){if(this.axis){this.axis.invalidate()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(value){this.setPropertyValue("useChartAngles",value)},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:true,configurable:true});AxisRendererCircular.prototype.positionToPoint=function(position,position2){if(!isNumber$1(position2)){position2=1}var coordinate=this.positionToCoordinate(position);var angle=this.startAngle+(this.endAngle-this.startAngle)*coordinate/this.axisLength;var radius=this.pixelRadius;var innerRadius=this.pixelInnerRadius;if(this.axisRendererY){var realRadius=fitToRange(this.axisRendererY.positionToCoordinate(position2),0,Infinity);if(realRadius==0){realRadius=1e-6}var point={x:realRadius*cos(angle),y:realRadius*sin(angle)};return point}return{x:cos(angle)*innerRadius+(radius-innerRadius)*cos(angle)*position2,y:sin(angle)*innerRadius+(radius-innerRadius)*sin(angle)*position2}};AxisRendererCircular.prototype.positionToAngle=function(position){var axis=this.axis;var arc=(this.endAngle-this.startAngle)/(axis.end-axis.start);var angle;if(axis.renderer.inversed){angle=this.startAngle+(axis.end-position)*arc}else{angle=this.startAngle+(position-axis.start)*arc}return round$1(angle,3)};AxisRendererCircular.prototype.angleToPosition=function(angle){var axis=this.axis;var arc=(this.endAngle-this.startAngle)/(axis.end-axis.start);var position;if(axis.renderer.inversed){position=axis.end-(angle-this.startAngle)/arc}else{position=(angle-this.startAngle)/arc+axis.start}return round$1(position,5)};AxisRendererCircular.prototype.updateAxisLine=function(){var radius=this.pixelRadius;var startAngle=this.startAngle;var endAngle=this.endAngle;var arc=min$2(360,endAngle-startAngle);this.line.path=moveTo({x:radius*cos(startAngle),y:radius*sin(startAngle)})+arcTo(startAngle,arc,radius,radius)};AxisRendererCircular.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);if(isNumber$1(point.x)&&isNumber$1(point.y)&&grid.element){var angle=DEGREES*Math.atan2(point.y,point.x);var radius=relativeRadiusToValue(hasValue(grid.radius)?grid.radius:percent(100),this.pixelRadius);var gridInnerRadius=relativeRadiusToValue(grid.innerRadius,this.pixelRadius);grid.zIndex=0;var innerRadius=relativeRadiusToValue(isNumber$1(gridInnerRadius)?gridInnerRadius:this.innerRadius,this.pixelRadiusReal,true);if(!isNumber$1(innerRadius)){innerRadius=0}grid.path=moveTo({x:innerRadius*cos(angle),y:innerRadius*sin(angle)})+lineTo({x:radius*cos(angle),y:radius*sin(angle)})}this.toggleVisibility(grid,position,0,1)};AxisRendererCircular.prototype.updateTickElement=function(tick,position,endPosition){position=position+(endPosition-position)*tick.location;var point=this.positionToPoint(position);if(tick.element){var radius=this.pixelRadius;var angle=DEGREES*Math.atan2(point.y,point.x);var tickLength=tick.length;if(tick.inside){tickLength=-tickLength}tick.zIndex=1;tick.path=moveTo({x:radius*cos(angle),y:radius*sin(angle)})+lineTo({x:(radius+tickLength)*cos(angle),y:(radius+tickLength)*sin(angle)})}this.toggleVisibility(tick,position,0,1)};AxisRendererCircular.prototype.updateBullet=function(bullet,position,endPosition){var location=.5;if(bullet instanceof AxisBullet){location=bullet.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);var radius=this.pixelRadius;var angle=DEGREES*Math.atan2(point.y,point.x);point={x:radius*cos(angle),y:radius*sin(angle)};this.positionItem(bullet,point);this.toggleVisibility(bullet,position,0,1)};AxisRendererCircular.prototype.updateLabelElement=function(label,position,endPosition,location){if(!hasValue(location)){location=label.location}position=position+(endPosition-position)*location;label.fixPosition(this.positionToAngle(position),this.pixelRadius);label.zIndex=2;this.toggleVisibility(label,position,this.minLabelPosition,this.maxLabelPosition)};AxisRendererCircular.prototype.fitsToBounds=function(point){return true};Object.defineProperty(AxisRendererCircular.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){if(this.setPropertyValue("startAngle",value)){this.invalidateAxisItems();if(this.axis){this.axis.invalidateSeries()}}},enumerable:true,configurable:true});Object.defineProperty(AxisRendererCircular.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){if(this.setPropertyValue("endAngle",value)){this.invalidateAxisItems();if(this.axis){this.axis.invalidateSeries()}}},enumerable:true,configurable:true});AxisRendererCircular.prototype.getPositionRangePath=function(startPosition,endPosition,radius,innerRadius,cornerRadius){var path="";if(isNumber$1(startPosition)&&isNumber$1(endPosition)){if(!hasValue(radius)){radius=this.radius}startPosition=max$2(startPosition,this.axis.start);endPosition=min$2(endPosition,this.axis.end);if(endPosition<startPosition){endPosition=startPosition}var pixelRadius=relativeRadiusToValue(radius,this.pixelRadius);var pixelInnerRadius=relativeRadiusToValue(innerRadius,this.pixelRadius,true);var startAngle=this.positionToAngle(startPosition);var endAngle=this.positionToAngle(endPosition);var arc$1=endAngle-startAngle;path=arc(startAngle,arc$1,pixelRadius,pixelInnerRadius,pixelRadius,cornerRadius)}return path};AxisRendererCircular.prototype.createGrid=function(){return new GridCircular};AxisRendererCircular.prototype.createFill=function(axis){return new AxisFillCircular(axis)};AxisRendererCircular.prototype.createLabel=function(){return new AxisLabelCircular};AxisRendererCircular.prototype.pointToPosition=function(point){var angle=fitAngleToRange(getAngle(point),this.startAngle,this.endAngle);return this.coordinateToPosition((angle-this.startAngle)/360*this.axisLength)};return AxisRendererCircular}(AxisRenderer);registry.registeredClasses["AxisRendererCircular"]=AxisRendererCircular;var AxisRendererRadial=function(_super){__extends(AxisRendererRadial,_super);function AxisRendererRadial(){var _this=_super.call(this)||this;_this._chart=new MutableValueDisposer;_this.pixelRadiusReal=0;_this.className="AxisRendererRadial";_this.isMeasured=false;_this.startAngle=-90;_this.endAngle=270;_this.minGridDistance=30;_this.gridType="circles";_this.axisAngle=-90;_this.isMeasured=false;_this.layout="none";_this.radius=percent(100);_this.line.strokeOpacity=0;_this.labels.template.horizontalCenter="middle";_this._disposers.push(_this._chart);_this.applyTheme();return _this}AxisRendererRadial.prototype.validate=function(){if(this.chart&&this.chart.invalid){this.chart.validate()}_super.prototype.validate.call(this)};Object.defineProperty(AxisRendererRadial.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,false,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"innerRadius",{get:function(){var chart=this.chart;var innerRadius=this.getPropertyValue("innerRadius");if(chart){if(!hasValue(innerRadius)){innerRadius=chart.innerRadius;if(innerRadius instanceof Percent&&chart){innerRadius=percent(innerRadius.value*chart.innerRadiusModifyer*100)}}else{if(innerRadius instanceof Percent&&chart){var mr=chart.mr;var value=innerRadius.value;value=Math.max(mr*value,mr-Math.min(chart.plotContainer.innerHeight,chart.plotContainer.innerWidth))/mr;innerRadius=percent(value*100)}}}return innerRadius},set:function(value){this.setPercentProperty("innerRadius",value,false,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:true,configurable:true});AxisRendererRadial.prototype.positionToPoint=function(position,position2){var radius=fitToRange(this.positionToCoordinate(position),0,Infinity);return{x:radius*cos(this.axisAngle),y:radius*sin(this.axisAngle)}};AxisRendererRadial.prototype.updateAxisLine=function(){this.line.path=moveTo({x:this.pixelInnerRadius*cos(this.axisAngle),y:this.pixelInnerRadius*sin(this.axisAngle)})+lineTo({x:this.pixelRadius*cos(this.axisAngle),y:this.pixelRadius*sin(this.axisAngle)});var title=this.axis.title;title.valign="none";title.horizontalCenter="middle";title.verticalCenter="bottom";title.y=-this.axisLength/2;var rotation=90;if(this.opposite){if(!this.inside){rotation=-90}}else{if(this.inside){rotation=-90}}title.rotation=rotation};AxisRendererRadial.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);var path;var radius=getDistance(point);var startAngle=this.startAngle;var endAngle=this.endAngle;var chart=this.chart;if(isNumber$1(radius)&&grid.element&&chart){var xAxis=chart.xAxes.getIndex(0);var count=0;var series=chart.series.getIndex(0);if(series){count=series.dataItems.length}if(this.gridType=="polygons"&&count>0&&series&&xAxis&&xAxis instanceof CategoryAxis){var gridLocation=xAxis.renderer.grid.template.location;var angle=xAxis.getAngle(series.dataItems.getIndex(0),"categoryX",gridLocation);path=moveTo({x:radius*cos(angle),y:radius*sin(angle)});for(var i=1;i<count;i++){angle=xAxis.getAngle(series.dataItems.getIndex(i),"categoryX",gridLocation);path+=lineTo({x:radius*cos(angle),y:radius*sin(angle)})}angle=xAxis.getAngle(series.dataItems.getIndex(count-1),"categoryX",xAxis.renderer.cellEndLocation);path+=lineTo({x:radius*cos(angle),y:radius*sin(angle)})}else{path=moveTo({x:radius*cos(startAngle),y:radius*sin(startAngle)})+arcTo(startAngle,endAngle-startAngle,radius,radius)}grid.path=path}this.toggleVisibility(grid,position,0,1)};AxisRendererRadial.prototype.updateLabelElement=function(label,position,endPosition,location){if(!hasValue(location)){location=label.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);this.positionItem(label,point);this.toggleVisibility(label,position,this.minLabelPosition,this.maxLabelPosition)};AxisRendererRadial.prototype.updateBaseGridElement=function(){};AxisRendererRadial.prototype.fitsToBounds=function(point){return true};Object.defineProperty(AxisRendererRadial.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){if(this.setPropertyValue("startAngle",value)){this.invalidateAxisItems()}},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){if(this.setPropertyValue("endAngle",value)){this.invalidateAxisItems()}},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(value){this.setPropertyValue("axisAngle",normalizeAngle(value));this.invalidateAxisItems()},enumerable:true,configurable:true});Object.defineProperty(AxisRendererRadial.prototype,"gridType",{get:function(){var axis=this.chart.xAxes.getIndex(0);if(axis instanceof CategoryAxis){return this.getPropertyValue("gridType")}else{return"circles"}},set:function(value){this.setPropertyValue("gridType",value,true)},enumerable:true,configurable:true});AxisRendererRadial.prototype.getPositionRangePath=function(startPosition,endPosition){var pixelInnerRadius=this.pixelInnerRadius;var pixelRadius=this.axisLength+pixelInnerRadius;var innerRadius=fitToRange(this.positionToCoordinate(startPosition),pixelInnerRadius,pixelRadius);var radius=fitToRange(this.positionToCoordinate(endPosition),pixelInnerRadius,pixelRadius);var startAngle=this.startAngle;var endAngle=this.endAngle;var arc$1=endAngle-startAngle;var path;var chart=this.chart;var xAxis=chart.xAxes.getIndex(0);var series=chart.series.getIndex(0);var count=0;if(series){count=series.dataItems.length}if(this.gridType=="polygons"&&count>0&&series&&xAxis&&xAxis instanceof CategoryAxis){var gridLocation=xAxis.renderer.grid.template.location;var angle=xAxis.getAngle(series.dataItems.getIndex(0),"categoryX",gridLocation);path=moveTo({x:radius*cos(angle),y:radius*sin(angle)});for(var i=1;i<count;i++){angle=xAxis.getAngle(series.dataItems.getIndex(i),"categoryX",gridLocation);path+=lineTo({x:radius*cos(angle),y:radius*sin(angle)})}angle=xAxis.getAngle(series.dataItems.getIndex(count-1),"categoryX",xAxis.renderer.cellEndLocation);path+=lineTo({x:radius*cos(angle),y:radius*sin(angle)});path+=moveTo({x:innerRadius*cos(angle),y:innerRadius*sin(angle)});for(var i=count-1;i>=0;i--){angle=xAxis.getAngle(series.dataItems.getIndex(i),"categoryX",gridLocation);path+=lineTo({x:innerRadius*cos(angle),y:innerRadius*sin(angle)})}}else{path=arc(startAngle,arc$1,radius,innerRadius)}return path};AxisRendererRadial.prototype.updateBreakElement=function(axisBreak){var startLine=axisBreak.startLine;var endLine=axisBreak.endLine;var fillShape=axisBreak.fillShape;var startPoint=axisBreak.startPoint;var endPoint=axisBreak.endPoint;startLine.radius=Math.abs(startPoint.y);endLine.radius=Math.abs(endPoint.y);fillShape.radius=Math.abs(endPoint.y);fillShape.innerRadius=Math.abs(startPoint.y)};AxisRendererRadial.prototype.createBreakSprites=function(axisBreak){axisBreak.startLine=new WavedCircle;axisBreak.endLine=new WavedCircle;axisBreak.fillShape=new WavedCircle};AxisRendererRadial.prototype.updateTooltip=function(){var axis=this.axis;if(axis){var bigNum=4e3;var bbx=-4e3;var bby=-4e3;var bbw=bigNum*2;var bbh=bigNum*2;var axisAngle=this.axisAngle;if(axisAngle<0){axisAngle+=360}var tooltipOrientation="vertical";if(axisAngle>45&&axisAngle<135||axisAngle>225&&axisAngle<315){tooltipOrientation="horizontal"}this.axis.updateTooltip(tooltipOrientation,{x:bbx,y:bby,width:bbw,height:bbh})}};AxisRendererRadial.prototype.updateTickElement=function(tick,position,endPosition){position=position+(endPosition-position)*tick.location;var point=this.positionToPoint(position);if(tick.element){var angle=normalizeAngle(this.axisAngle+90);if(angle/90!=Math.round(angle/90)){tick.pixelPerfect=false}else{tick.pixelPerfect=true}var tickLength=-tick.length;if(tick.inside){tickLength*=-1}tick.path=moveTo({x:0,y:0})+lineTo({x:tickLength*cos(angle),y:tickLength*sin(angle)})}this.positionItem(tick,point);this.toggleVisibility(tick,position,0,1)};AxisRendererRadial.prototype.updateBullet=function(bullet,position,endPosition){var location=.5;if(bullet instanceof AxisBullet){location=bullet.location}position=position+(endPosition-position)*location;var point=this.positionToPoint(position);this.positionItem(bullet,point);this.toggleVisibility(bullet,position,0,1)};AxisRendererRadial.prototype.positionToCoordinate=function(position){var coordinate;var axis=this.axis;var axisFullLength=axis.axisFullLength;var innerRadius=this.pixelInnerRadius;if(axis.renderer.inversed){coordinate=(axis.end-position)*axisFullLength+innerRadius}else{coordinate=(position-axis.start)*axisFullLength+innerRadius}return round$1(coordinate,1)};AxisRendererRadial.prototype.pointToPosition=function(point){var coordinate=getDistance(point)-this.pixelInnerRadius;return this.coordinateToPosition(coordinate)};Object.defineProperty(AxisRendererRadial.prototype,"chart",{get:function(){return this._chart.get()},set:function(value){this._chart.set(value,null)},enumerable:true,configurable:true});return AxisRendererRadial}(AxisRendererY);registry.registeredClasses["AxisRendererRadial"]=AxisRendererRadial;var RadarChartDataItem=function(_super){__extends(RadarChartDataItem,_super);function RadarChartDataItem(){var _this=_super.call(this)||this;_this.className="RadarChartDataItem";_this.applyTheme();return _this}return RadarChartDataItem}(XYChartDataItem);var RadarChart=function(_super){__extends(RadarChart,_super);function RadarChart(){var _this=_super.call(this)||this;_this._axisRendererX=AxisRendererCircular;_this._axisRendererY=AxisRendererRadial;_this.innerRadiusModifyer=1;_this.mr=1;_this.className="RadarChart";_this.startAngle=-90;_this.endAngle=270;_this.radius=percent(80);_this.innerRadius=0;var radarContainer=_this.plotContainer.createChild(Container);radarContainer.shouldClone=false;radarContainer.layout="absolute";radarContainer.align="center";radarContainer.valign="middle";_this.seriesContainer.parent=radarContainer;_this.radarContainer=radarContainer;_this.bulletsContainer.parent=radarContainer;_this.axisBulletsContainer=radarContainer;_this._cursorContainer=radarContainer;_this.chartContainer.events.on("maxsizechanged",_this.invalidate,_this,false);_this._bulletMask=radarContainer.createChild(Circle);_this._bulletMask.shouldClone=false;_this._bulletMask.element=_this.paper.add("path");_this._bulletMask.opacity=0;_this.applyTheme();return _this}RadarChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Radar chart")}};RadarChart.prototype.processAxis=function(axis){_super.prototype.processAxis.call(this,axis);var renderer=axis.renderer;renderer.gridContainer.parent=renderer;renderer.breakContainer.parent=renderer;axis.parent=this.radarContainer;renderer.toBack()};RadarChart.prototype.handleXAxisRangeChange=function(){_super.prototype.handleXAxisRangeChange.call(this);each(this.yAxes.iterator(),(function(axis){axis.invalidate()}))};RadarChart.prototype.handleYAxisRangeChange=function(){_super.prototype.handleYAxisRangeChange.call(this);each(this.xAxes.iterator(),(function(axis){axis.invalidate()}))};RadarChart.prototype.processConfig=function(config){if(config){if(hasValue(config.cursor)&&!hasValue(config.cursor.type)){config.cursor.type="RadarCursor"}if(hasValue(config.series)&&isArray$6(config.series)){for(var i=0,len=config.series.length;i<len;i++){config.series[i].type=config.series[i].type||"RadarSeries"}}}_super.prototype.processConfig.call(this,config)};RadarChart.prototype.beforeDraw=function(){_super.prototype.beforeDraw.call(this);var plotContainer=this.plotContainer;var rect=getArcRect(this.startAngle,this.endAngle,1);var innerRect={x:0,y:0,width:0,height:0};var wr=plotContainer.innerWidth/rect.width;var hr=plotContainer.innerHeight/rect.height;var innerRadius=this.innerRadius;if(innerRadius instanceof Percent){var value=innerRadius.value;var mr=Math.min(wr,hr);this.mr=mr;value=Math.max(mr*value,mr-Math.min(plotContainer.innerHeight,plotContainer.innerWidth))/mr;innerRect=getArcRect(this.startAngle,this.endAngle,value);this.innerRadiusModifyer=value/innerRadius.value;innerRadius=percent(value*100)}rect=getCommonRectangle([rect,innerRect]);var maxRadius=Math.min(plotContainer.innerWidth/rect.width,plotContainer.innerHeight/rect.height);var diameter=relativeRadiusToValue(this.radius,maxRadius)*2||0;var radius=diameter/2;var startAngle=this.startAngle;var endAngle=this.endAngle;this._pixelInnerRadius=relativeRadiusToValue(innerRadius,radius);this._bulletMask.path=arc(startAngle,endAngle-startAngle,radius,this._pixelInnerRadius);each(this.xAxes.iterator(),(function(axis){if(axis.renderer.useChartAngles){axis.renderer.startAngle=startAngle;axis.renderer.endAngle=endAngle}axis.width=diameter;axis.height=diameter;axis.renderer.pixelRadiusReal=radius}));each(this.yAxes.iterator(),(function(axis){axis.renderer.startAngle=startAngle;axis.renderer.endAngle=endAngle;axis.width=diameter;axis.height=diameter;axis.renderer.pixelRadiusReal=radius}));var cursor=this.cursor;if(cursor){cursor.width=diameter;cursor.height=diameter;cursor.startAngle=startAngle;cursor.endAngle=endAngle}this.radarContainer.definedBBox={x:radius*rect.x,y:radius*rect.y,width:radius*rect.width,height:radius*rect.height};this.radarContainer.validatePosition()};RadarChart.prototype.createSeries=function(){return new RadarSeries};Object.defineProperty(RadarChart.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){this.setPropertyValue("startAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(RadarChart.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){this.setPropertyValue("endAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(RadarChart.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(RadarChart.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:true,configurable:true});Object.defineProperty(RadarChart.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});RadarChart.prototype.updateXAxis=function(renderer){if(renderer){renderer.processRenderer()}};RadarChart.prototype.updateYAxis=function(renderer){if(renderer){renderer.processRenderer()}};return RadarChart}(XYChart);registry.registeredClasses["RadarChart"]=RadarChart;var ClockHand=function(_super){__extends(ClockHand,_super);function ClockHand(){var _this=_super.call(this)||this;_this._axis=new MutableValueDisposer;_this.className="ClockHand";var interfaceColors=new InterfaceColorSet;_this.fill=interfaceColors.getFor("alternativeBackground");_this.stroke=_this.fill;var pin=new Circle;pin.radius=5;_this.pin=pin;_this.isMeasured=false;_this.startWidth=5;_this.endWidth=1;_this.width=percent(100);_this.height=percent(100);_this.radius=percent(100);_this.innerRadius=percent(0);var hand=new Trapezoid;_this.hand=hand;_this._disposers.push(_this._axis);_this.applyTheme();return _this}ClockHand.prototype.validate=function(){_super.prototype.validate.call(this);var hand=this.hand;hand.width=this.pixelWidth;var h=Math.max(this.startWidth,this.endWidth);hand.height=h;hand.leftSide=percent(this.startWidth/h*100);hand.rightSide=percent(this.endWidth/h*100);if(this.axis){var renderer=this.axis.renderer;var x0=relativeRadiusToValue(this.innerRadius,renderer.pixelRadius);var x1=relativeRadiusToValue(this.radius,renderer.pixelRadius);hand.x=x0;hand.y=-h/2;hand.width=x1-x0}};Object.defineProperty(ClockHand.prototype,"pin",{get:function(){return this._pin},set:function(pin){if(this._pin){this.removeDispose(this._pin)}if(pin){this._pin=pin;pin.parent=this;this._disposers.push(pin)}},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"hand",{get:function(){return this._hand},set:function(hand){if(this._hand){this.removeDispose(this._hand)}if(hand){this._hand=hand;hand.parent=this;this._disposers.push(hand)}},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(value){this.setPropertyValue("startWidth",value,true)},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(value){this.setPropertyValue("endWidth",value,true)},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(value){this.setPropertyValue("rotationDirection",value)},enumerable:true,configurable:true});ClockHand.prototype.showValue=function(value,duration,easing){this._value=value;if(value!=undefined){if(!isNumber$1(duration)){duration=0}if(this.axis){var renderer=this.axis.renderer;var newAngle=renderer.positionToAngle(this.axis.anyToPosition(value));var currentAngle=this.rotation;if(this.rotationDirection=="clockWise"){if(newAngle<currentAngle){this.rotation=currentAngle-360}}if(this.rotationDirection=="counterClockWise"){if(newAngle>currentAngle){this.rotation=currentAngle+360}}this.animate({property:"rotation",to:newAngle},duration,easing)}}};Object.defineProperty(ClockHand.prototype,"currentPosition",{get:function(){if(this.axis){var renderer=this.axis.renderer;return renderer.angleToPosition(this.rotation)}},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"value",{get:function(){return this._value},set:function(value){this.showValue(value)},enumerable:true,configurable:true});Object.defineProperty(ClockHand.prototype,"axis",{get:function(){return this._axis.get()},set:function(axis){if(this.axis!=axis){this._axis.set(axis,new MultiDisposer([axis.events.on("datavalidated",this.updateValue,this,false),axis.events.on("datarangechanged",this.updateValue,this,false),axis.events.on("dataitemsvalidated",this.updateValue,this,false),axis.events.on("propertychanged",this.invalidate,this,false)]))}if(axis){var chart=axis.chart;if(chart){this.rotation=chart.startAngle}}this.parent=axis.renderer;this.zIndex=5},enumerable:true,configurable:true});ClockHand.prototype.updateValue=function(){this.value=this.value};ClockHand.prototype.processConfig=function(config){if(config){if(hasValue(config.axis)&&isString$1(config.axis)&&this.map.hasKey(config.axis)){config.axis=this.map.getKey(config.axis)}}_super.prototype.processConfig.call(this,config)};return ClockHand}(Container);registry.registeredClasses["ClockHand"]=ClockHand;(function(_super){__extends(GaugeChartDataItem,_super);function GaugeChartDataItem(){var _this=_super.call(this)||this;_this.className="GaugeChartDataItem";_this.applyTheme();return _this}return GaugeChartDataItem})(RadarChartDataItem);var GaugeChart=function(_super){__extends(GaugeChart,_super);function GaugeChart(){var _this=_super.call(this)||this;_this.className="GaugeChart";_this.startAngle=180;_this.endAngle=360;_this.hands=new ListTemplate(new ClockHand);_this.hands.events.on("inserted",_this.processHand,_this,false);_this._disposers.push(new ListDisposer(_this.hands));_this._disposers.push(_this.hands.template);_this.applyTheme();return _this}GaugeChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Gauge chart")}};GaugeChart.prototype.processHand=function(event){var hand=event.newValue;if(!hand.axis){hand.axis=this.xAxes.getIndex(0)}};GaugeChart.prototype.configOrder=function(a,b){if(a==b){return 0}else if(a=="hands"){return 1}else if(b=="hands"){return-1}else{return _super.prototype.configOrder.call(this,a,b)}};return GaugeChart}(RadarChart);registry.registeredClasses["GaugeChart"]=GaugeChart;var PercentSeriesDataItem=function(_super){__extends(PercentSeriesDataItem,_super);function PercentSeriesDataItem(){var _this=_super.call(this)||this;_this.className="PercentSeriesDataItem";_this.applyTheme();return _this}PercentSeriesDataItem.prototype.uidAttr=function(){return this.slice.uidAttr()};PercentSeriesDataItem.prototype.hide=function(duration,delay,toValue,fields){if(!fields){fields=["value"]}return _super.prototype.hide.call(this,duration,delay,0,fields)};PercentSeriesDataItem.prototype.setVisibility=function(value,noChangeValues){if(!noChangeValues){if(value){this.setWorkingValue("value",this.values["value"].value,0,0)}else{this.setWorkingValue("value",0,0,0)}}_super.prototype.setVisibility.call(this,value,noChangeValues)};PercentSeriesDataItem.prototype.show=function(duration,delay,fields){if(!fields){fields=["value"]}return _super.prototype.show.call(this,duration,delay,fields)};Object.defineProperty(PercentSeriesDataItem.prototype,"category",{get:function(){return this.properties.category},set:function(value){this.setProperty("category",value)},enumerable:true,configurable:true});PercentSeriesDataItem.prototype.createLegendMarker=function(marker){this.component.createLegendMarker(marker,this)};Object.defineProperty(PercentSeriesDataItem.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(value){this._legendDataItem=value;if(value.label){value.label.dataItem=this}if(value.valueLabel){value.valueLabel.dataItem=this}},enumerable:true,configurable:true});Object.defineProperty(PercentSeriesDataItem.prototype,"tick",{get:function(){var _this=this;if(!this._tick){var tick_1=this.component.ticks.create();this._tick=tick_1;this.addSprite(tick_1);this._disposers.push(tick_1);tick_1.parent=this.component.ticksContainer;this._disposers.push(new Disposer((function(){if(_this.component){_this.component.ticks.removeValue(tick_1)}})));tick_1.visible=this.visible}return this._tick},enumerable:true,configurable:true});Object.defineProperty(PercentSeriesDataItem.prototype,"label",{get:function(){var _this=this;if(!this._label){var label_1=this.component.labels.create();this.addSprite(label_1);this._label=label_1;this._disposers.push(label_1);label_1.parent=this.component.labelsContainer;this._disposers.push(new Disposer((function(){if(_this.component){_this.component.labels.removeValue(label_1)}})));label_1.visible=this.visible}return this._label},enumerable:true,configurable:true});Object.defineProperty(PercentSeriesDataItem.prototype,"slice",{get:function(){var _this=this;if(!this._slice){var component_1=this.component;var slice_1=component_1.slices.create();this.addSprite(slice_1);this._slice=slice_1;this._disposers.push(slice_1);slice_1.parent=component_1.slicesContainer;this._disposers.push(new Disposer((function(){component_1.slices.removeValue(slice_1)})));slice_1.visible=this.visible;if(component_1.itemsFocusable()){if(!hasValue(this.component.role)){this.component.role="menu"}if(!hasValue(slice_1.role)){slice_1.role="menuitem"}slice_1.focusable=true}else{if(!hasValue(this.component.role)){this.component.role="list"}if(!hasValue(slice_1.role)){slice_1.role="listitem"}slice_1.focusable=false}if(slice_1.focusable){slice_1.events.on("focus",(function(ev){slice_1.readerTitle=component_1.populateString(component_1.itemReaderText,_this)}),undefined,false);slice_1.events.on("blur",(function(ev){slice_1.readerTitle=""}),undefined,false)}if(slice_1.hoverable){slice_1.events.on("over",(function(ev){slice_1.readerTitle=component_1.populateString(component_1.itemReaderText,_this)}),undefined,false);slice_1.events.on("out",(function(ev){slice_1.readerTitle=""}),undefined,false)}}return this._slice},enumerable:true,configurable:true});Object.defineProperty(PercentSeriesDataItem.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(value){this.setProperty("hiddenInLegend",value)},enumerable:true,configurable:true});return PercentSeriesDataItem}(SeriesDataItem);var PercentSeries=function(_super){__extends(PercentSeries,_super);function PercentSeries(){var _this=_super.call(this)||this;_this.className="PercentSeries";_this._addAllDataItems=false;_this.colors=new ColorSet;_this.colors.step=1;_this.isMeasured=true;_this.calculatePercent=true;var slicesContainer=_this.createChild(Container);slicesContainer.shouldClone=false;slicesContainer.isMeasured=false;_this.slicesContainer=slicesContainer;var ticksContainer=_this.createChild(Container);ticksContainer.shouldClone=false;ticksContainer.isMeasured=false;ticksContainer.layout="none";_this.ticksContainer=ticksContainer;var labelsContainer=_this.createChild(Container);labelsContainer.shouldClone=false;labelsContainer.isMeasured=false;labelsContainer.layout="none";_this.labelsContainer=labelsContainer;_this.alignLabels=false;_this.bulletsContainer.toFront();_this.skipFocusThreshold=50;var defaultState=_this.defaultState;defaultState.transitionEasing=sinOut;_this.itemReaderText="{category}: {value.percent.formatNumber('#.#p')}";_this.applyTheme();return _this}PercentSeries.prototype.createSlice=function(){return new Sprite};PercentSeries.prototype.createTick=function(){return new Tick};PercentSeries.prototype.createLabel=function(){return new Label};Object.defineProperty(PercentSeries.prototype,"slices",{get:function(){if(!this._slices){var slice=this.createSlice();slice.applyOnClones=true;this._disposers.push(slice);this.initSlice(slice);this._slices=new ListTemplate(slice);this._disposers.push(new ListDisposer(this._slices))}return this._slices},enumerable:true,configurable:true});Object.defineProperty(PercentSeries.prototype,"ticks",{get:function(){if(!this._ticks){var tick=this.createTick();tick.applyOnClones=true;this._disposers.push(tick);this.initTick(tick);this._ticks=new ListTemplate(tick);this._disposers.push(new ListDisposer(this._ticks))}return this._ticks},enumerable:true,configurable:true});Object.defineProperty(PercentSeries.prototype,"labels",{get:function(){if(!this._labels){var label=this.createLabel();label.applyOnClones=true;this._disposers.push(label);this.initLabel(label);this._labels=new ListTemplate(label);this._disposers.push(new ListDisposer(this._labels))}return this._labels},enumerable:true,configurable:true});PercentSeries.prototype.createDataItem=function(){return new PercentSeriesDataItem};PercentSeries.prototype.initSlice=function(slice){};PercentSeries.prototype.initLabel=function(label){label.text="{category}: {value.percent.formatNumber('#.0p')}";label.isMeasured=false;label.padding(5,5,5,5)};PercentSeries.prototype.initTick=function(label){};PercentSeries.prototype.validateDataItems=function(){this.colors.reset();if(this.patterns){this.patterns.reset()}_super.prototype.validateDataItems.call(this)};PercentSeries.prototype.validateDataElement=function(dataItem){var slice=dataItem.slice;if(slice){if(slice.fill==undefined){if(this.patterns){if(!hasValue(slice.stroke)){slice.stroke=this.colors.next()}slice.fill=this.patterns.next();if(hasValue(slice.fillOpacity)){slice.fill.backgroundOpacity=slice.fillOpacity}if(slice.stroke instanceof Color){slice.fill.stroke=slice.stroke;slice.fill.fill=slice.stroke}}else{slice.fill=this.colors.next()}}else{this.colors.currentStep+=this.colors.step}if(slice.stroke==undefined){slice.stroke=slice.fill}}_super.prototype.validateDataElement.call(this,dataItem);if(slice){dataItem.bullets.each((function(key,bullet){if(bullet.fill==undefined){bullet.fill=slice.fill}if(bullet.stroke==undefined){bullet.stroke=slice.stroke}}))}this.updateLegendValue(dataItem)};PercentSeries.prototype.validateData=function(){_super.prototype.validateData.call(this);if(this.chart){this.chart.feedLegend()}};PercentSeries.prototype.arrangeLabels=function(dataItems){for(var i=0,len=dataItems.length;i<len;i++){var dataItem=dataItems[i];var label=dataItem.label;if(label){if(label.invalid){label.validate()}var lh=label.measuredHeight;if(!label.visible){lh=0}if(label.pixelY-lh/2<-this.maxHeight/2){label.y=-this.maxHeight/2+lh/2}var nextLabel=this.getNextLabel(i+1,dataItems);var bottom=label.pixelY+lh/2;if(nextLabel){if(nextLabel.invalid){nextLabel.validate()}var nextLabelHeight=nextLabel.measuredHeight;if(!nextLabel.visible){nextLabelHeight=0}var nextLabelY=nextLabel.pixelY;if(nextLabelY==null){nextLabelY=0}if(nextLabelY-nextLabelHeight/2<bottom){nextLabel.y=bottom+nextLabelHeight/2}}}}};PercentSeries.prototype.arrangeLabels2=function(dataItems){var previousTop=this.maxHeight/2;for(var i=dataItems.length-1;i>=0;i--){var dataItem=dataItems[i];var label=dataItem.label;if(label){if(label.invalid){label.validate()}var lh=label.measuredHeight;if(!label.visible){lh=0}if(label.pixelY+lh/2>previousTop){label.y=previousTop-lh/2;previousTop=label.y-lh/2}}}};PercentSeries.prototype.getNextLabel=function(index,dataItems){if(dataItems.length>=index){var nextDataItem=dataItems[index];if(nextDataItem){if(nextDataItem.label){if(nextDataItem.visible){return nextDataItem.label}else{return this.getNextLabel(index+1,dataItems)}}else{return this.getNextLabel(index+1,dataItems)}}}};Object.defineProperty(PercentSeries.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(value){this.setPropertyValue("colors",value,true)},enumerable:true,configurable:true});Object.defineProperty(PercentSeries.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(value){this.setPropertyValue("patterns",value,true)},enumerable:true,configurable:true});PercentSeries.prototype.createLegendMarker=function(marker,dataItem){each(marker.children.iterator(),(function(child){var slice=dataItem.slice;child.defaultState.properties.fill=slice.fill;child.defaultState.properties.stroke=slice.stroke;child.defaultState.properties.fillOpacity=slice.fillOpacity;child.defaultState.properties.strokeOpacity=slice.strokeOpacity;child.fill=slice.fill;child.stroke=slice.stroke;child.fillOpacity=slice.fillOpacity;child.strokeOpacity=slice.strokeOpacity;if(child.fill==undefined){child.__disabled=true}var legendDataItem=marker.dataItem;legendDataItem.color=slice.fill;legendDataItem.colorOrig=slice.fill;child.addDisposer(slice.events.on("propertychanged",(function(ev){if(ev.property=="fill"){child.__disabled=false;if(!child.isActive){child.fill=slice.fill}child.defaultState.properties.fill=slice.fill;legendDataItem.color=slice.fill;legendDataItem.colorOrig=slice.fill}if(ev.property=="stroke"){if(!child.isActive){child.stroke=slice.stroke}child.defaultState.properties.stroke=slice.stroke}if(ev.property=="strokeOpacity"){if(!child.isActive){child.strokeOpacity=slice.strokeOpacity}child.defaultState.properties.strokeOpacity=slice.strokeOpacity}}),undefined,false))}))};PercentSeries.prototype.handleSliceScale=function(event){var _this=this;var slice=event.target;var dataItem=slice.dataItem;if(dataItem&&dataItem.bullets){each(dataItem.bullets.iterator(),(function(a){var value=a[1];_this.positionBullet(value)}))}};PercentSeries.prototype.handleSliceMove=function(event){};PercentSeries.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.slices.template.copyFrom(source.slices.template);this.labels.template.copyFrom(source.labels.template);this.ticks.template.copyFrom(source.ticks.template);this.colors=source.colors.clone()};Object.defineProperty(PercentSeries.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(value){this.setAlignLabels(value)},enumerable:true,configurable:true});PercentSeries.prototype.setAlignLabels=function(value){this.setPropertyValue("alignLabels",value,true)};Object.defineProperty(PercentSeries.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(value){this.setPropertyValue("ignoreZeroValues",value,true)},enumerable:true,configurable:true});PercentSeries.prototype.updateLegendValue=function(dataItem){if(dataItem){var legendDataItem=dataItem.legendDataItem;var legendSettings=dataItem.legendSettings;if(legendDataItem&&legendSettings){if(legendSettings){if(legendSettings.labelText){legendDataItem.label.text=legendSettings.labelText}if(legendSettings.itemLabelText){legendDataItem.label.text=legendSettings.itemLabelText}if(legendSettings.valueText){legendDataItem.valueLabel.text=legendSettings.valueText}if(legendSettings.itemValueText){legendDataItem.valueLabel.text=legendSettings.itemValueText}}}}};return PercentSeries}(Series);registry.registeredClasses["PercentSeries"]=PercentSeries;registry.registeredClasses["PercentSeriesDataItem"]=PercentSeriesDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(target,stateId){if(target instanceof PercentSeries){var state=target.states.create(stateId);var labelState=target.labels.template.states.create(stateId);labelState.properties.disabled=true;var tickState=target.ticks.template.states.create(stateId);tickState.properties.disabled=true;return state}return null}});var PercentChartDataItem=function(_super){__extends(PercentChartDataItem,_super);function PercentChartDataItem(){var _this=_super.call(this)||this;_this.className="PercentChartDataItem";_this.applyTheme();return _this}return PercentChartDataItem}(SerialChartDataItem);var PercentChart=function(_super){__extends(PercentChart,_super);function PercentChart(){var _this=_super.call(this)||this;_this.className="PercentChart";_this.align="none";_this.valign="none";_this.chartContainer.minHeight=50;_this.chartContainer.minWidth=50;_this.applyTheme();return _this}PercentChart.prototype.validateData=function(){_super.prototype.validateData.call(this);this.feedLegend()};PercentChart.prototype.feedLegend=function(){var legend=this.legend;if(legend){var legendData_1=[];each(this.series.iterator(),(function(series){if(!series.hiddenInLegend){each(series.dataItems.iterator(),(function(dataItem){if(!dataItem.hiddenInLegend){legendData_1.push(dataItem);if(!dataItem.legendSettings){dataItem.legendSettings=series.legendSettings}}}))}}));legend.data=legendData_1;legend.dataFields.name="category"}};PercentChart.prototype.createSeries=function(){return new PercentSeries};PercentChart.prototype.setLegend=function(legend){_super.prototype.setLegend.call(this,legend);if(legend){legend.labels.template.text="{category}";legend.valueLabels.template.text="{value.percent.formatNumber('#.0p')}";legend.itemContainers.template.events.on("over",(function(event){var percentSeriesDataItem=event.target.dataItem.dataContext;if(percentSeriesDataItem.visible&&!percentSeriesDataItem.isHiding){var slice=percentSeriesDataItem.slice;slice.dispatchImmediately("over");slice.isHover=true;slice.interactions.isRealHover=true}}));legend.itemContainers.template.events.on("out",(function(event){var percentSeriesDataItem=event.target.dataItem.dataContext;var slice=percentSeriesDataItem.slice;slice.dispatchImmediately("out");slice.isHover=false}))}};return PercentChart}(SerialChart);registry.registeredClasses["PercentChart"]=PercentChart;registry.registeredClasses["PercentChartDataItem"]=PercentChartDataItem;var PieTick=function(_super){__extends(PieTick,_super);function PieTick(){var _this=_super.call(this)||this;_this._label=new MutableValueDisposer;_this._slice=new MutableValueDisposer;_this.className="PieTick";_this.element=_this.paper.add("polyline");_this._disposers.push(_this._label);_this._disposers.push(_this._slice);_this.applyTheme();return _this}PieTick.prototype.draw=function(){_super.prototype.draw.call(this);var slice=this.slice;var label=this.label;var series=slice.dataItem.component;if(slice&&slice.radius>0&&label&&label.text){var x0=slice.dx+slice.slice.dx+slice.pixelX+slice.ix*slice.radius*slice.scale;var y0=slice.dy+slice.slice.dy+slice.pixelY+slice.iy*slice.radiusY*slice.scale;var x1=void 0;var y1=void 0;var x2=void 0;var y2=void 0;if(series.alignLabels){x1=label.pixelX-this.length;y1=label.pixelY;x2=label.pixelX;y2=y1;if(label.horizontalCenter=="right"){x1+=2*this.length;x2=x1-this.length}}else{var r=label.pixelRadius(slice.radius);x1=x0+r*slice.ix;y1=y0+r*slice.iy;x2=x1;y2=y1}this.element.attr({points:[x0,y0,x1,y1,x2,y2]})}};Object.defineProperty(PieTick.prototype,"slice",{get:function(){return this._slice.get()},set:function(slice){this._slice.set(slice,new MultiDisposer([slice.events.on("transformed",this.invalidate,this),slice.events.on("validated",this.invalidate,this)]))},enumerable:true,configurable:true});Object.defineProperty(PieTick.prototype,"label",{get:function(){return this._label.get()},set:function(label){this._label.set(label,label.events.on("transformed",this.invalidate,this,false))},enumerable:true,configurable:true});return PieTick}(Tick);registry.registeredClasses["PieTick"]=PieTick;var PieSeriesDataItem=function(_super){__extends(PieSeriesDataItem,_super);function PieSeriesDataItem(){var _this=_super.call(this)||this;_this.className="PieSeriesDataItem";_this.values.radiusValue={};_this.applyTheme();return _this}Object.defineProperty(PieSeriesDataItem.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(value){this.setValue("radiusValue",value)},enumerable:true,configurable:true});PieSeriesDataItem.prototype.hide=function(duration,delay,toValue,fields){return _super.prototype.hide.call(this,duration,delay,0,["value","radiusValue"])};PieSeriesDataItem.prototype.show=function(duration,delay,fields){return _super.prototype.show.call(this,duration,delay,["value","radiusValue"])};return PieSeriesDataItem}(PercentSeriesDataItem);var PieSeries=function(_super){__extends(PieSeries,_super);function PieSeries(){var _this=_super.call(this)||this;_this.className="PieSeries";_this.alignLabels=true;_this.layout="none";_this.labels.template.radius=percent(5);_this.addDisposer(_this.labels.template.events.on("enabled",_this.invalidate,_this,false));_this.applyTheme();return _this}PieSeries.prototype.createSlice=function(){return new Slice};PieSeries.prototype.createTick=function(){return new PieTick};PieSeries.prototype.createLabel=function(){return new AxisLabelCircular};PieSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Pie Slice Series")}};PieSeries.prototype.createDataItem=function(){return new PieSeriesDataItem};PieSeries.prototype.initSlice=function(slice){slice.isMeasured=false;slice.defaultState.properties.scale=1;slice.observe("scale",this.handleSliceScale,this);slice.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this);slice.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var hoverState=slice.states.create("hover");hoverState.properties.scale=1.05;var defaultState=slice.defaultState;defaultState.properties.shiftRadius=0;slice.togglable=true;slice.events.on("toggled",(function(event){event.target.hideTooltip();if(event.target.interactions.lastHitPointer&&event.target.interactions.lastHitPointer.touch&&!event.target.isActive){event.target.isHover=false}}));var activeState=slice.states.create("active");activeState.properties.shiftRadius=.1};PieSeries.prototype.validate=function(){this._leftItems=[];this._rightItems=[];this._currentStartAngle=this.startAngle;this._arcRect=getArcRect(this.startAngle,this.endAngle);this._maxRadiusPercent=0;for(var i=this.startIndex;i<this.endIndex;i++){var dataItem=this.dataItems.getIndex(i);var radiusValuePercent=dataItem.values.radiusValue.percent;if(radiusValuePercent>this._maxRadiusPercent){this._maxRadiusPercent=radiusValuePercent}}_super.prototype.validate.call(this);if(this.alignLabels){if(this.startAngle>this.endAngle){this._rightItems.reverse()}else{this._leftItems.reverse()}this._rightItems.sort((function(a,b){var aAngle=(a.slice.middleAngle+360)%360;var bAngle=(b.slice.middleAngle+360)%360;if(aAngle>270){aAngle-=360}if(bAngle>270){bAngle-=360}if(aAngle<bAngle){return-1}else if(aAngle>bAngle){return 1}else{return 0}}));this._leftItems.sort((function(a,b){var aAngle=(a.slice.middleAngle+360)%360;var bAngle=(b.slice.middleAngle+360)%360;if(aAngle<bAngle){return 1}else if(aAngle>bAngle){return-1}else{return 0}}));this.arrangeLabels(this._rightItems);this.arrangeLabels2(this._rightItems);this.arrangeLabels(this._leftItems);this.arrangeLabels2(this._leftItems)}};PieSeries.prototype.validateDataElement=function(dataItem){if(this.pixelRadius>0){if(this.ignoreZeroValues&&(dataItem.value==0||dataItem.value==null)){dataItem.__disabled=true}else{dataItem.__disabled=false}var slice=dataItem.slice;slice.radius=this.pixelRadius;if(isNumber$1(dataItem.radiusValue)){slice.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*dataItem.values.radiusValue.percent/this._maxRadiusPercent}if(!(slice.innerRadius instanceof Percent)){slice.innerRadius=this.pixelInnerRadius}slice.startAngle=this._currentStartAngle;slice.arc=Math.abs(dataItem.values.value.percent)*(this.endAngle-this.startAngle)/100;if(!this.labels.template.disabled){var label=dataItem.label;var tick=dataItem.tick;tick.slice=slice;tick.label=label;var normalizedMiddleAngle=(slice.middleAngle+360)%360;var point=void 0;if(this.alignLabels){var labelRadius=label.pixelRadius(slice.radius);var x=tick.length+labelRadius;label.dx=0;label.dy=0;label.verticalCenter="middle";var arcRect=this._arcRect;if(normalizedMiddleAngle>270||normalizedMiddleAngle<=90){x+=(arcRect.width+arcRect.x)*this.pixelRadius;label.horizontalCenter="left";this._rightItems.push(dataItem)}else{x-=arcRect.x*this.pixelRadius;label.horizontalCenter="right";this._leftItems.push(dataItem);x*=-1}var distance=slice.radius+tick.length+labelRadius;point={x,y:slice.iy*distance};label.moveTo(point)}else{var depth=slice["depth"];if(!isNumber$1(depth)){depth=0}label.fixPosition(slice.middleAngle,slice.radius,slice.radiusY,0,-depth)}}this._currentStartAngle+=slice.arc;_super.prototype.validateDataElement.call(this,dataItem)}};Object.defineProperty(PieSeries.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){if(this.setPercentProperty("radius",value,true,false,10,false)){this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(PieSeries.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(value){if(this._pixelRadius!=value){this._pixelRadius=value;this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(PieSeries.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(value){if(this._pixelInnerRadius!=value){this._pixelInnerRadius=value;this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(PieSeries.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(PieSeries.prototype,"startAngle",{get:function(){var startAngle=this.getPropertyValue("startAngle");if(isNumber$1(startAngle)){return startAngle}else{return this._startAngleInternal}},set:function(value){this.setPropertyValue("startAngle",normalizeAngle(value),true)},enumerable:true,configurable:true});Object.defineProperty(PieSeries.prototype,"endAngle",{get:function(){var endAngle=this.getPropertyValue("endAngle");if(isNumber$1(endAngle)){return endAngle}else{return this._endAngleInternal}},set:function(value){this.setPropertyValue("endAngle",value,true)},enumerable:true,configurable:true});PieSeries.prototype.positionBullet=function(bullet){_super.prototype.positionBullet.call(this,bullet);var dataItem=bullet.dataItem;var slice=dataItem.slice;var locationX=bullet.locationX;if(!isNumber$1(locationX)){locationX=.5}var locationY=bullet.locationY;if(!isNumber$1(locationY)){locationY=1}var angle=slice.startAngle+slice.arc*locationX;bullet.x=locationY*slice.radius*cos(angle);bullet.y=locationY*slice.radiusY*sin(angle)};PieSeries.prototype.handleSliceMove=function(event){if(!this.alignLabels){var slice=event.target;var dataItem=slice.dataItem;if(dataItem){var label=dataItem.label;if(label){label.dx=label.fdx+slice.dx+slice.pixelX;label.dy=label.fdy+slice.dy+slice.pixelY}}}};Object.defineProperty(PieSeries.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}var chart=this.chart;if(chart){return getArcRect(chart.startAngle,chart.endAngle,this.pixelRadius)}return getArcRect(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:true,configurable:true});return PieSeries}(PercentSeries);registry.registeredClasses["PieSeries"]=PieSeries;registry.registeredClasses["PieSeriesDataItem"]=PieSeriesDataItem;var PieChartDataItem=function(_super){__extends(PieChartDataItem,_super);function PieChartDataItem(){var _this=_super.call(this)||this;_this.className="PieChartDataItem";_this.applyTheme();return _this}return PieChartDataItem}(PercentChartDataItem);var PieChart=function(_super){__extends(PieChart,_super);function PieChart(){var _this=_super.call(this)||this;_this.className="PieChart";_this.innerRadius=0;_this.radius=percent(80);_this.align="none";_this.valign="none";_this.startAngle=-90;_this.endAngle=270;var seriesContainer=_this.seriesContainer;seriesContainer.isMeasured=true;seriesContainer.valign="middle";seriesContainer.align="center";seriesContainer.layout="absolute";seriesContainer.width=undefined;seriesContainer.height=undefined;_this.chartContainer.minHeight=50;_this.chartContainer.minWidth=50;_this.chartContainer.events.on("maxsizechanged",_this.updateRadius,_this,false);_this.applyTheme();return _this}PieChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Pie chart")}};PieChart.prototype.validateLayout=function(){_super.prototype.validateLayout.call(this);this.updateRadius()};PieChart.prototype.handleSeriesAdded=function(event){_super.prototype.handleSeriesAdded.call(this,event);this._chartPixelRadius=undefined;this.updateSeriesAngles()};PieChart.prototype.updateSeriesAngles=function(){var _this=this;this.series.each((function(series){series._startAngleInternal=_this.startAngle;series._endAngleInternal=_this.endAngle}))};PieChart.prototype.updateRadius=function(){var chartCont=this.chartContainer;var rect=getArcRect(this.startAngle,this.endAngle,1);var innerRect={x:0,y:0,width:0,height:0};var innerRadius=this.innerRadius;if(innerRadius instanceof Percent){innerRect=getArcRect(this.startAngle,this.endAngle,innerRadius.value)}rect=getCommonRectangle([rect,innerRect]);var maxRadius=Math.min(chartCont.innerWidth/rect.width,chartCont.innerHeight/rect.height);if(!isNumber$1(maxRadius)){maxRadius=0}var chartRadius=relativeRadiusToValue(this.radius,maxRadius);var chartPixelInnerRadius=relativeRadiusToValue(this.innerRadius,maxRadius);var seriesRadius=(chartRadius-chartPixelInnerRadius)/this.series.length;if(chartRadius!=this._chartPixelRadius||chartPixelInnerRadius!=this._chartPixelInnerRadius){this._chartPixelRadius=chartRadius;this._chartPixelInnerRadius=chartPixelInnerRadius;each(indexed(this.series.iterator()),(function(a){var i=a[0];var series=a[1];var radius=chartPixelInnerRadius+relativeRadiusToValue(series.radius,chartRadius-chartPixelInnerRadius);var innerRadius=chartPixelInnerRadius+relativeRadiusToValue(series.innerRadius,chartRadius-chartPixelInnerRadius);if(!isNumber$1(radius)){radius=chartPixelInnerRadius+seriesRadius*(i+1)}if(!isNumber$1(innerRadius)){innerRadius=chartPixelInnerRadius+seriesRadius*i}series.pixelRadius=radius;series.pixelInnerRadius=innerRadius}));this.seriesContainer.definedBBox={x:chartRadius*rect.x,y:chartRadius*rect.y,width:chartRadius*rect.width,height:chartRadius*rect.height};this.seriesContainer.invalidateLayout();this.bulletsContainer.x=this.seriesContainer.x;this.bulletsContainer.y=this.seriesContainer.y}};Object.defineProperty(PieChart.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){if(this.setPercentProperty("radius",value,true,false,10,false)){this.invalidateLayout()}},enumerable:true,configurable:true});Object.defineProperty(PieChart.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});PieChart.prototype.createSeries=function(){return new PieSeries};Object.defineProperty(PieChart.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){if(this.setPropertyValue("startAngle",value)){this.updateRadius();this.updateSeriesAngles()}},enumerable:true,configurable:true});Object.defineProperty(PieChart.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){if(this.setPropertyValue("endAngle",value)){this.updateRadius();this.updateSeriesAngles()}},enumerable:true,configurable:true});return PieChart}(PercentChart);registry.registeredClasses["PieChart"]=PieChart;registry.registeredClasses["PieChartDataItem"]=PieChartDataItem;var PieSeries3DDataItem=function(_super){__extends(PieSeries3DDataItem,_super);function PieSeries3DDataItem(){var _this=_super.call(this)||this;_this.className="PieSeries3DDataItem";_this.values.depthValue={};_this.applyTheme();return _this}Object.defineProperty(PieSeries3DDataItem.prototype,"depthValue",{get:function(){return this.values["depthValue"].value},set:function(value){this.setValue("depthValue",value)},enumerable:true,configurable:true});return PieSeries3DDataItem}(PieSeriesDataItem);var PieSeries3D=function(_super){__extends(PieSeries3D,_super);function PieSeries3D(){var _this=_super.call(this)||this;_this.className="PieSeries3D";_this.applyTheme();return _this}PieSeries3D.prototype.createDataItem=function(){return new PieSeries3DDataItem};PieSeries3D.prototype.createSlice=function(){return new Slice3D};PieSeries3D.prototype.validateDataElement=function(dataItem){var slice=dataItem.slice;var depth=this.depth;if(!isNumber$1(depth)){depth=this.chart.depth}var depthPercent=dataItem.values.depthValue.percent;if(!isNumber$1(depthPercent)){depthPercent=100}slice.depth=depthPercent*depth/100;var angle=this.angle;if(!isNumber$1(angle)){angle=this.chart.angle}slice.angle=angle;_super.prototype.validateDataElement.call(this,dataItem)};PieSeries3D.prototype.validate=function(){_super.prototype.validate.call(this);for(var i=this._workingStartIndex;i<this._workingEndIndex;i++){var dataItem=this.dataItems.getIndex(i);var slice=dataItem.slice;var startAngle=slice.startAngle;if(startAngle>=-90&&startAngle<90){slice.toFront()}else if(startAngle>=90){slice.toBack()}}};Object.defineProperty(PieSeries3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(value){this.setPropertyValue("depth",value,true)},enumerable:true,configurable:true});Object.defineProperty(PieSeries3D.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){this.setPropertyValue("angle",value)},enumerable:true,configurable:true});PieSeries3D.prototype.positionBullet=function(bullet){_super.prototype.positionBullet.call(this,bullet);var dataItem=bullet.dataItem;var slice=dataItem.slice;bullet.y=bullet.pixelY-slice.depth};return PieSeries3D}(PieSeries);registry.registeredClasses["PieSeries3D"]=PieSeries3D;registry.registeredClasses["PieSeries3DDataItem"]=PieSeries3DDataItem;(function(_super){__extends(PieChart3DDataItem,_super);function PieChart3DDataItem(){var _this=_super.call(this)||this;_this.className="PieChart3DDataItem";_this.applyTheme();return _this}return PieChart3DDataItem})(PieChartDataItem);var PieChart3D=function(_super){__extends(PieChart3D,_super);function PieChart3D(){var _this=_super.call(this)||this;_this.className="PieChart3D";_this.depth=20;_this.angle=10;_this.applyTheme();return _this}Object.defineProperty(PieChart3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(value){if(this.setPropertyValue("depth",value)){this.invalidateDataUsers()}},enumerable:true,configurable:true});Object.defineProperty(PieChart3D.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){value=fitToRange(value,0,90);if(this.setPropertyValue("angle",value)){this.invalidateDataUsers()}},enumerable:true,configurable:true});PieChart3D.prototype.createSeries=function(){return new PieSeries3D};return PieChart3D}(PieChart);registry.registeredClasses["PieChart3D"]=PieChart3D;var SlicedChartDataItem=function(_super){__extends(SlicedChartDataItem,_super);function SlicedChartDataItem(){var _this=_super.call(this)||this;_this.className="SlicedChartDataItem";_this.applyTheme();return _this}return SlicedChartDataItem}(PercentChartDataItem);var SlicedChart=function(_super){__extends(SlicedChart,_super);function SlicedChart(){var _this=_super.call(this)||this;_this.className="SlicedChart";_this.seriesContainer.layout="horizontal";_this.padding(15,15,15,15);_this.applyTheme();return _this}SlicedChart.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Sliced chart")}};SlicedChart.prototype.validate=function(){_super.prototype.validate.call(this)};return SlicedChart}(PercentChart);registry.registeredClasses["SlicedChart"]=SlicedChart;registry.registeredClasses["SlicedChartDataItem"]=SlicedChartDataItem;var FlowDiagramNode=function(_super){__extends(FlowDiagramNode,_super);function FlowDiagramNode(){var _this=_super.call(this)||this;_this.legendSettings=new LegendSettings;_this.className="FlowDiagramNode";_this.isMeasured=false;new InterfaceColorSet;_this.draggable=true;_this.inert=true;_this.setStateOnChildren=true;_this.events.on("positionchanged",_this.invalidateLinks,_this,false);_this.events.on("sizechanged",_this.invalidateLinks,_this,false);return _this}FlowDiagramNode.prototype.handleHit=function(event){if(this.isHidden||this.isHiding){this.show()}else{this.hide()}};FlowDiagramNode.prototype.show=function(duration){var animation=_super.prototype.show.call(this,duration);this.outgoingDataItems.each((function(dataItem){if(!dataItem.toNode||dataItem.toNode&&!dataItem.toNode.isHidden){dataItem.setWorkingValue("value",dataItem.getValue("value"),duration);dataItem.link.show()}}));this.incomingDataItems.each((function(dataItem){if(!dataItem.fromNode||dataItem.fromNode&&!dataItem.fromNode.isHidden){dataItem.setWorkingValue("value",dataItem.getValue("value"),duration);dataItem.link.show()}}));return animation};FlowDiagramNode.prototype.hide=function(duration){var animation=_super.prototype.hide.call(this,duration);this.outgoingDataItems.each((function(dataItem){dataItem.setWorkingValue("value",0,duration);dataItem.link.hide()}));this.incomingDataItems.each((function(dataItem){dataItem.setWorkingValue("value",0,duration);dataItem.link.hide()}));return animation};FlowDiagramNode.prototype.validate=function(){if(!this.isDisposed()){_super.prototype.validate.call(this);this.invalidateLinks()}};FlowDiagramNode.prototype.invalidateLinks=function(){var _this=this;this.outgoingDataItems.each((function(dataItem){var link=dataItem.link;if(link.colorMode=="fromNode"){link.fill=link.dataItem.fromNode.color}if(link.colorMode=="gradient"){link.fill=link.gradient;link.stroke=link.gradient;var stop_1=link.gradient.stops.getIndex(0);if(stop_1){stop_1.color=_this.color;link.gradient.validate()}}}));this.incomingDataItems.each((function(dataItem){var link=dataItem.link;if(link.colorMode=="toNode"){link.fill=link.dataItem.toNode.color}if(link.colorMode=="gradient"){link.fill=link.gradient;link.stroke=link.gradient;var stop_2=link.gradient.stops.getIndex(1);if(stop_2){stop_2.color=_this.color;link.gradient.validate()}}}))};Object.defineProperty(FlowDiagramNode.prototype,"incomingDataItems",{get:function(){var _this=this;if(!this._incomingDataItems){var incomingDataItems=new List;incomingDataItems.events.on("inserted",(function(){if(_this.chart.sortBy=="name"){_this._incomingSorted=sort(_this._incomingDataItems.iterator(),(function(x,y){return order$1(x.fromName,y.fromName)}))}else if(_this.chart.sortBy=="value"){_this._incomingSorted=sort(_this._incomingDataItems.iterator(),(function(x,y){return reverse(order(x.value,y.value))}))}else{_this._incomingSorted=_this._incomingDataItems.iterator()}}),undefined,false);this._incomingDataItems=incomingDataItems}return this._incomingDataItems},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"outgoingDataItems",{get:function(){var _this=this;if(!this._outgoingDataItems){var outgoingDataItems=new List;outgoingDataItems.events.on("inserted",(function(){if(_this.chart.sortBy=="name"){_this._outgoingSorted=sort(_this._outgoingDataItems.iterator(),(function(x,y){return order$1(x.fromName,y.fromName)}))}else if(_this.chart.sortBy=="value"){_this._outgoingSorted=sort(_this._outgoingDataItems.iterator(),(function(x,y){return reverse(order(x.value,y.value))}))}else{_this._outgoingSorted=_this._outgoingDataItems.iterator()}}),undefined,false);this._outgoingDataItems=outgoingDataItems}return this._outgoingDataItems},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(value){this.setPropertyValue("name",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(value){this.setPropertyValue("total",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(value){this.setPropertyValue("totalIncoming",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(value){this.setPropertyValue("totalOutgoing",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramNode.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(value){this.setColorProperty("color",value);if(this._background){this._background.fill=value}this.fill=value},enumerable:true,configurable:true});FlowDiagramNode.prototype.createLegendMarker=function(marker){var w=marker.pixelWidth;var h=marker.pixelHeight;marker.removeChildren();var column=marker.createChild(RoundedRectangle);column.shouldClone=false;copyProperties$1(this,column,visualProperties);column.stroke=this.fill;column.copyFrom(this);column.padding(0,0,0,0);column.width=w;column.height=h;var legendDataItem=marker.dataItem;legendDataItem.color=column.fill;legendDataItem.colorOrig=column.fill};Object.defineProperty(FlowDiagramNode.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(value){this._legendDataItem=value;this._legendDataItem.itemContainer.deepInvalidate()},enumerable:true,configurable:true});return FlowDiagramNode}(Container);registry.registeredClasses["FlowDiagramNode"]=FlowDiagramNode;var FlowDiagramLink=function(_super){__extends(FlowDiagramLink,_super);function FlowDiagramLink(){var _this=_super.call(this)||this;_this.className="FlowDiagramLink";var interfaceColors=new InterfaceColorSet;_this.maskBullets=false;_this.colorMode="fromNode";_this.layout="none";_this.isMeasured=false;_this.startAngle=0;_this.endAngle=0;_this.strokeOpacity=0;_this.verticalCenter="none";_this.horizontalCenter="none";_this.tooltipText="{fromName}{toName}:{value.value}";_this.tooltipLocation=.5;_this.link=_this.createChild(Sprite);_this.link.shouldClone=false;_this.link.setElement(_this.paper.add("path"));_this.link.isMeasured=false;_this.fillOpacity=.2;_this.fill=interfaceColors.getFor("alternativeBackground");_this.applyTheme();return _this}FlowDiagramLink.prototype.positionBullets=function(){var _this=this;each(this.bullets.iterator(),(function(bullet){bullet.parent=_this.bulletsContainer;bullet.maxWidth=_this.maxWidth;bullet.maxHeight=_this.maxHeight;_this.positionBullet(bullet)}))};Object.defineProperty(FlowDiagramLink.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var bulletsContainer=this.createChild(Container);bulletsContainer.shouldClone=false;bulletsContainer.layout="none";this._bulletsContainer=bulletsContainer}return this._bulletsContainer},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramLink.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var bulletsMask=this.createChild(Sprite);bulletsMask.shouldClone=false;bulletsMask.setElement(this.paper.add("path"));bulletsMask.isMeasured=false;this._bulletsMask=bulletsMask}return this._bulletsMask},enumerable:true,configurable:true});FlowDiagramLink.prototype.positionBullet=function(bullet){var location=bullet.locationX;if(!isNumber$1(location)){location=bullet.locationY}if(!isNumber$1(location)){location=.5}var point=this.middleLine.positionToPoint(location);bullet.moveTo(point);var rotationField=bullet.propertyFields.rotation;var angle;if(bullet.dataItem){var dataContext=bullet.dataItem.dataContext;angle=dataContext[rotationField]}if(!isNumber$1(angle)){angle=point.angle}bullet.rotation=angle};Object.defineProperty(FlowDiagramLink.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){this.setPropertyValue("startAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramLink.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){this.setPropertyValue("endAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramLink.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(value){if(value=="gradient"){var color=this.fill;this.gradient.stops.clear();if(color instanceof Color){this.gradient.addColor(color);this.gradient.addColor(color)}this.fill=this.gradient;this.stroke=this.gradient}this.setPropertyValue("colorMode",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramLink.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(value){this.setPropertyValue("maskBullets",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramLink.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(value){this.setPropertyValue("tooltipLocation",value,true)},enumerable:true,configurable:true});FlowDiagramLink.prototype.setFill=function(value){_super.prototype.setFill.call(this,value);var gradient=this._gradient;if(gradient&&value instanceof Color){gradient.stops.clear();gradient.addColor(value);gradient.addColor(value)}};FlowDiagramLink.prototype.measureElement=function(){};Object.defineProperty(FlowDiagramLink.prototype,"bullets",{get:function(){var _this=this;if(!this._bullets){this._bullets=new ListTemplate(new Bullet);this._disposers.push(new ListDisposer(this._bullets));this._disposers.push(this._bullets.template);this._bullets.events.on("inserted",(function(event){event.newValue.events.on("propertychanged",(function(event){if(event.property=="locationX"||event.property=="locationY"){_this.positionBullet(event.target)}}),undefined,false)}),undefined,false)}return this._bullets},enumerable:true,configurable:true});FlowDiagramLink.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.bullets.copyFrom(source.bullets);var middleLine=this.middleLine;if(middleLine){if(middleLine instanceof Line&&source.middleLine instanceof Line){middleLine.copyFrom(source.middleLine)}if(middleLine instanceof Polyline&&source.middleLine instanceof Polyline){middleLine.copyFrom(source.middleLine)}}this.link.copyFrom(source.link)};FlowDiagramLink.prototype.getTooltipX=function(){if(this.middleLine){return this.middleLine.positionToPoint(this.tooltipLocation).x}};FlowDiagramLink.prototype.getTooltipY=function(){if(this.middleLine){return this.middleLine.positionToPoint(this.tooltipLocation).y}};Object.defineProperty(FlowDiagramLink.prototype,"gradient",{get:function(){if(!this._gradient){this._gradient=new LinearGradient}return this._gradient},enumerable:true,configurable:true});return FlowDiagramLink}(Container);registry.registeredClasses["FlowDiagramLink"]=FlowDiagramLink;var FlowDiagramDataItem=function(_super){__extends(FlowDiagramDataItem,_super);function FlowDiagramDataItem(){var _this=_super.call(this)||this;_this.className="FlowDiagramDataItem";_this.values.value={};_this.applyTheme();return _this}Object.defineProperty(FlowDiagramDataItem.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(value){this.setProperty("fromName",value)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramDataItem.prototype,"toName",{get:function(){return this.properties.toName},set:function(value){this.setProperty("toName",value)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramDataItem.prototype,"color",{get:function(){return this.properties.color},set:function(value){this.setProperty("color",toColor(value))},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramDataItem.prototype,"value",{get:function(){return this.values.value.value},set:function(value){this.setValue("value",value)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagramDataItem.prototype,"link",{get:function(){var _this=this;if(!this._link){var link_1=this.component.links.create();this._link=link_1;this.addSprite(link_1);this._disposers.push(new Disposer((function(){if(_this.component){_this.component.links.removeValue(link_1)}})))}return this._link},enumerable:true,configurable:true});return FlowDiagramDataItem}(ChartDataItem);var FlowDiagram=function(_super){__extends(FlowDiagram,_super);function FlowDiagram(){var _this=_super.call(this)||this;_this.colors=new ColorSet;_this.className="FlowDiagram";_this.nodePadding=20;_this.sortBy="none";_this.sequencedInterpolation=true;_this.colors.step=2;_this.minNodeSize=.02;var linksContainer=_this.chartContainer.createChild(Container);linksContainer.shouldClone=false;linksContainer.layout="none";linksContainer.isMeasured=false;_this.linksContainer=linksContainer;var nodesContainer=_this.chartContainer.createChild(Container);nodesContainer.shouldClone=false;nodesContainer.layout="none";nodesContainer.isMeasured=false;_this.nodesContainer=nodesContainer;_this.dataItem=_this.createDataItem();_this.dataItem.component=_this;_this.applyTheme();return _this}FlowDiagram.prototype.dispose=function(){_super.prototype.dispose.call(this);this.dataItem.dispose()};FlowDiagram.prototype.validateData=function(){var _this=this;if(this._parseDataFrom==0){this.nodes.clear()}this.sortNodes();this.colors.reset();_super.prototype.validateData.call(this);var sum=0;var count=0;var low;var high;each(this.dataItems.iterator(),(function(dataItem){var fromName=dataItem.fromName;if(fromName){var node=_this.nodes.getKey(fromName);if(!node){node=_this.nodes.create(fromName);node.name=fromName;node.chart=_this;node.dataItem=dataItem}dataItem.fromNode=node;dataItem.fromNode.outgoingDataItems.push(dataItem)}var toName=dataItem.toName;if(toName){var node=_this.nodes.getKey(toName);if(!node){node=_this.nodes.create(toName);node.name=toName;node.chart=_this;node.dataItem=dataItem}dataItem.toNode=node;dataItem.toNode.incomingDataItems.push(dataItem)}if(!dataItem.fromNode){var strokeModifier=new LinearGradientModifier;strokeModifier.opacities=[0,1];dataItem.link.strokeModifier=strokeModifier}if(!dataItem.toNode){var fillModifier=new LinearGradientModifier;fillModifier.opacities=[1,0];dataItem.link.strokeModifier=fillModifier}var value=dataItem.value;if(isNumber$1(value)){sum+=value;count++;if(low>value||!isNumber$1(low)){low=value}if(high<value||!isNumber$1(high)){high=value}}}));var key="value";this.dataItem.setCalculatedValue(key,high,"high");this.dataItem.setCalculatedValue(key,low,"low");this.dataItem.setCalculatedValue(key,sum,"sum");this.dataItem.setCalculatedValue(key,sum/count,"average");this.dataItem.setCalculatedValue(key,count,"count");each(this.nodes.iterator(),(function(strNode){var node=strNode[1];if(node.fill instanceof Color){node.color=node.fill}if(node.color==undefined){node.color=_this.colors.next()}if(node.dataItem.color!=undefined){node.color=node.dataItem.color}if(!node.dataItem.visible){node.hide(0)}_this.getNodeValue(node)}));this.sortNodes();this.feedLegend()};FlowDiagram.prototype.handleDataItemWorkingValueChange=function(dataItem,name){this.invalidate()};FlowDiagram.prototype.sortNodes=function(){if(this.sortBy=="name"){this._sorted=this.nodes.sortedIterator()}else if(this.sortBy=="value"){this._sorted=sort(this.nodes.iterator(),(function(x,y){return reverse(order(x[1].total,y[1].total))}))}else{this._sorted=this.nodes.iterator()}};FlowDiagram.prototype.getNodeValue=function(node){var incomingTotal=0;var outgoingTotal=0;each(node.incomingDataItems.iterator(),(function(dataItem){var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){incomingTotal+=value}}));each(node.outgoingDataItems.iterator(),(function(dataItem){var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){outgoingTotal+=value}}));node.total=incomingTotal+outgoingTotal;node.totalIncoming=incomingTotal;node.totalOutgoing=outgoingTotal};FlowDiagram.prototype.changeSorting=function(){this.sortNodes()};FlowDiagram.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Flow diagram")}};FlowDiagram.prototype.createDataItem=function(){return new FlowDiagramDataItem};Object.defineProperty(FlowDiagram.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(value){this.setPropertyValue("nodePadding",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagram.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(value){this.setPropertyValue("sortBy",value);this.changeSorting()},enumerable:true,configurable:true});Object.defineProperty(FlowDiagram.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(value){this.setPropertyValue("minNodeSize",value,true)},enumerable:true,configurable:true});Object.defineProperty(FlowDiagram.prototype,"nodes",{get:function(){if(!this._nodes){var template=this.createNode();template.events.on("hit",(function(event){event.target.handleHit(event)}));this._nodes=new DictionaryTemplate(template);this._disposers.push(new DictionaryDisposer(this._nodes))}return this._nodes},enumerable:true,configurable:true});FlowDiagram.prototype.createNode=function(){var node=new FlowDiagramNode;this._disposers.push(node);return node};Object.defineProperty(FlowDiagram.prototype,"links",{get:function(){if(!this._links){this._links=new ListTemplate(this.createLink());this._disposers.push(new ListDisposer(this._links))}return this._links},enumerable:true,configurable:true});FlowDiagram.prototype.createLink=function(){var link=new FlowDiagramLink;this._disposers.push(link);return link};FlowDiagram.prototype.feedLegend=function(){var legend=this.legend;if(legend){var legendData_1=[];this.nodes.each((function(key,node){legendData_1.push(node)}));legend.data=legendData_1;legend.dataFields.name="name"}};FlowDiagram.prototype.disposeData=function(){_super.prototype.disposeData.call(this);this.nodes.clear()};return FlowDiagram}(Chart);registry.registeredClasses["FlowDiagram"]=FlowDiagram;var LabelBullet=function(_super){__extends(LabelBullet,_super);function LabelBullet(){var _this=_super.call(this)||this;_this.className="LabelBullet";var label=_this.createChild(Label);label.shouldClone=false;label.verticalCenter="middle";label.horizontalCenter="middle";label.truncate=true;label.hideOversized=false;label.maxWidth=500;label.maxHeight=500;label.stroke=color();label.strokeOpacity=0;label.fill=(new InterfaceColorSet).getFor("text");_this.events.on("maxsizechanged",_this.handleMaxSize,_this,false);_this.label=label;_this.applyTheme();return _this}LabelBullet.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth;this.label.maxHeight=this.maxHeight};LabelBullet.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.label.copyFrom(source.label)};return LabelBullet}(Bullet);registry.registeredClasses["LabelBullet"]=LabelBullet;var SankeyNode=function(_super){__extends(SankeyNode,_super);function SankeyNode(){var _this=_super.call(this)||this;_this.nextInCoord=0;_this.nextOutCoord=0;_this.className="SankeyNode";_this.width=10;_this.height=10;var nameLabel=_this.createChild(LabelBullet);nameLabel.shouldClone=false;nameLabel.locationX=1;nameLabel.locationY=.5;nameLabel.label.text="{name}";nameLabel.width=150;nameLabel.height=150;nameLabel.label.horizontalCenter="left";nameLabel.label.padding(0,5,0,5);_this.nameLabel=nameLabel;var valueLabel=_this.createChild(LabelBullet);valueLabel.shouldClone=false;valueLabel.label.hideOversized=false;valueLabel.locationX=.5;valueLabel.locationY=.5;valueLabel.width=150;valueLabel.height=150;valueLabel.label.horizontalCenter="middle";_this.valueLabel=valueLabel;var hiddenState=_this.hiddenState;hiddenState.properties.fill=(new InterfaceColorSet).getFor("disabledBackground");hiddenState.properties.opacity=.5;hiddenState.properties.visible=true;_this.background.hiddenState.copyFrom(hiddenState);return _this}SankeyNode.prototype.invalidateLinks=function(){var _this=this;_super.prototype.invalidateLinks.call(this);this.nextInCoord=0;this.nextOutCoord=0;var chart=this.chart;if(chart){var orientation_1=chart.orientation;if(this._incomingSorted){each(this._incomingSorted,(function(dataItem){var link=dataItem.link;var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){link.parent=_this.chart.linksContainer;var x=void 0;var y=void 0;var angle=void 0;if(orientation_1=="horizontal"){x=_this.pixelX+_this.dx;y=_this.nextInCoord+_this.pixelY+_this.dy;angle=0}else{y=_this.pixelY+_this.dy;x=_this.nextInCoord+_this.pixelX+_this.dx;angle=90}link.endX=x;link.endY=y;link.startAngle=angle;link.endAngle=angle;link.gradient.rotation=angle;link.linkWidth=value*chart.valueHeight;if(!dataItem.fromNode){if(orientation_1=="horizontal"){link.maxWidth=200;link.startX=_this.pixelX+_this.dx-link.maxWidth;link.startY=link.endY}else{link.maxHeight=200;link.startX=link.endX;link.startY=_this.pixelY+_this.dy-link.maxHeight}link.fill=dataItem.toNode.color;var stop_1=link.gradient.stops.getIndex(0);if(stop_1){if(link.colorMode=="gradient"){stop_1.color=_this.color}stop_1.opacity=0;link.fill=link.gradient;link.stroke=link.gradient;link.gradient.validate()}}_this.nextInCoord+=link.linkWidth}}))}if(this._outgoingSorted){each(this._outgoingSorted,(function(dataItem){var link=dataItem.link;link.parent=_this.chart.linksContainer;var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){var x=void 0;var y=void 0;var angle=void 0;if(orientation_1=="horizontal"){angle=0;x=_this.pixelX+_this.pixelWidth+_this.dx-1;y=_this.nextOutCoord+_this.pixelY+_this.dy}else{angle=90;x=_this.nextOutCoord+_this.pixelX+_this.dx;y=_this.pixelY+_this.pixelHeight+_this.dy-1}link.startX=x;link.startY=y;link.startAngle=angle;link.endAngle=angle;link.gradient.rotation=angle;link.linkWidth=value*_this.chart.valueHeight;if(!dataItem.toNode){if(orientation_1=="horizontal"){link.maxWidth=200;link.endX=_this.pixelX+link.maxWidth+_this.dx;link.endY=link.startY}else{link.maxHeight=200;link.endX=link.startX;link.endY=_this.pixelY+link.maxHeight+_this.dy}link.opacity=_this.opacity;var stop_2=link.gradient.stops.getIndex(1);if(stop_2){if(link.colorMode=="gradient"){stop_2.color=_this.color}stop_2.opacity=0;link.fill=link.gradient;link.stroke=link.gradient;link.gradient.validate()}}_this.nextOutCoord+=link.linkWidth}}))}}this.positionBullet(this.nameLabel);this.positionBullet(this.valueLabel)};SankeyNode.prototype.positionBullet=function(bullet){if(bullet){bullet.x=this.measuredWidth*bullet.locationX;bullet.y=this.measuredHeight*bullet.locationY}};Object.defineProperty(SankeyNode.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(value){this.setPropertyValue("level",value,true)},enumerable:true,configurable:true});SankeyNode.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.nameLabel.copyFrom(source.nameLabel);this.valueLabel.copyFrom(source.valueLabel)};return SankeyNode}(FlowDiagramNode);registry.registeredClasses["SankeyNode"]=SankeyNode;var SankeyLink=function(_super){__extends(SankeyLink,_super);function SankeyLink(){var _this=_super.call(this)||this;_this.className="SankeyLink";new InterfaceColorSet;_this.tension=.8;_this.controlPointDistance=.2;_this.startAngle=0;_this.endAngle=0;_this.linkWidth=0;_this.startX=0;_this.endX=0;_this.startY=0;_this.endY=0;_this.middleLine=_this.createChild(Polyspline);_this.middleLine.shouldClone=false;_this.middleLine.strokeOpacity=0;_this.applyTheme();return _this}SankeyLink.prototype.makeBackwards=function(){if(this.states.getKey("backwards")!=undefined){this.setState("backwards")}};SankeyLink.prototype.validate=function(){var _a,_b,_c,_d;_super.prototype.validate.call(this);if(!this.isTemplate){var x0=this.startX;var y0=this.startY;var x1=this.endX;var y1=this.endY;if(this.states.getKey("backwards")){this.setState("default")}if(this.dataItem){var chart=this.dataItem.component;if(chart){if(chart.orientation=="horizontal"){if(x1<x0){_a=__read([x1,x0],2),x0=_a[0],x1=_a[1];_b=__read([y1,y0],2),y0=_b[0],y1=_b[1];this.makeBackwards()}}else{if(y1<y0){_c=__read([y1,y0],2),y0=_c[0],y1=_c[1];_d=__read([x1,x0],2),x0=_d[0],x1=_d[1];this.makeBackwards()}}}}if(!isNumber$1(x1)){x1=x0}if(!isNumber$1(y1)){y1=y0}var startAngle=this.startAngle;var endAngle=this.endAngle;var w=this.linkWidth;var path="";var xt0=x0;var yt0=y0;var xt1=x1;var yt1=y1;var xb0=x0+w*sin(startAngle);var xb1=x1+w*sin(endAngle);var yb0=y0+w*cos(startAngle);var yb1=y1+w*cos(endAngle);var xm0=x0+w/2*sin(startAngle);var xm1=x1+w/2*sin(endAngle);var ym0=y0+w/2*cos(startAngle);var ym1=y1+w/2*cos(endAngle);this.zIndex=this.zIndex||this.dataItem.index;var tensionX=this.tension+(1-this.tension)*sin(startAngle);var tensionY=this.tension+(1-this.tension)*cos(startAngle);this.middleLine.tensionX=tensionX;this.middleLine.tensionY=tensionY;if(isNumber$1(w)&&(isNumber$1(x0)&&isNumber$1(x1)&&isNumber$1(y0)&&isNumber$1(y1))){if(round$1(xt0,3)==round$1(xt1,3)){xt1+=.01}if(round$1(yt0,3)==round$1(yt1,3)){yt1+=.01}if(round$1(xb0,3)==round$1(xb1,3)){xb1+=.01}if(round$1(yb0,3)==round$1(yb1,3)){yb1+=.01}var minX=Math.min(xb0,xb1,xt0,xt1);var minY=Math.min(yb0,yb1,yt0,yt1);var maxX=Math.max(xb0,xb1,xt0,xt1);var maxY=Math.max(yb0,yb1,yt0,yt1);this._bbox={x:minX,y:minY,width:maxX-minX,height:maxY-minY};var cpd=this.controlPointDistance;var kxt0=xt0+(xt1-xt0)*cpd*cos(startAngle);var kyt0=yt0+(yt1-yt0)*cpd*sin(startAngle);var kxt1=xt1-(xt1-xt0)*cpd*cos(endAngle);var kyt1=yt1-(yt1-yt0)*cpd*sin(endAngle);var kxm0=xm0+(xm1-xm0)*cpd*cos(startAngle);var kym0=ym0+(ym1-ym0)*cpd*sin(startAngle);var kxm1=xm1-(xm1-xm0)*cpd*cos(endAngle);var kym1=ym1-(ym1-ym0)*cpd*sin(endAngle);var angle=getAngle({x:kxt0,y:kyt0},{x:kxt1,y:kyt1});var dx=(w/cos(angle)-w)/tan(angle)*cos(startAngle);var dy=(w/sin(angle)-w)*tan(angle)*sin(startAngle);var kxb0=-dx/2+xb0+(xb1-xb0)*cpd*cos(startAngle);var kyb0=-dy/2+yb0+(yb1-yb0)*cpd*sin(startAngle);var kxb1=-dx/2+xb1-(xb1-xb0)*cpd*cos(endAngle);var kyb1=-dy/2+yb1-(yb1-yb0)*cpd*sin(endAngle);if(ym1==ym0){ym1+=.01}this.middleLine.segments=[[{x:xm0,y:ym0},{x:kxm0,y:kym0},{x:kxm1,y:kym1},{x:xm1,y:ym1}]];kxt0+=dx/2;kyt0+=dy/2;kxt1+=dx/2;kyt1+=dy/2;path+=moveTo({x:xt0,y:yt0});path+=new Tension(tensionX,tensionY).smooth([{x:xt0,y:yt0},{x:kxt0,y:kyt0},{x:kxt1,y:kyt1},{x:xt1,y:yt1}]);path+=lineTo({x:xb1,y:yb1});path+=new Tension(tensionX,tensionY).smooth([{x:xb1,y:yb1},{x:kxb1,y:kyb1},{x:kxb0,y:kyb0},{x:xb0,y:yb0}]);path+=closePath()}this.link.path=path;if(this.maskBullets){this.bulletsMask.path=path;this.bulletsContainer.mask=this.bulletsMask}this.positionBullets()}};Object.defineProperty(SankeyLink.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(value){this.setPropertyValue("startX",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(value){this.setPropertyValue("endX",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(value){this.setPropertyValue("startY",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(value){this.setPropertyValue("endY",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(value){this.setPropertyValue("linkWidth",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(value){this.setPropertyValue("controlPointDistance",value,true)},enumerable:true,configurable:true});Object.defineProperty(SankeyLink.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(value){this.setPropertyValue("tension",value,true)},enumerable:true,configurable:true});return SankeyLink}(FlowDiagramLink);registry.registeredClasses["SankeyLink"]=SankeyLink;var SankeyDiagramDataItem=function(_super){__extends(SankeyDiagramDataItem,_super);function SankeyDiagramDataItem(){var _this=_super.call(this)||this;_this.className="SankeyDiagramDataItem";_this.applyTheme();return _this}return SankeyDiagramDataItem}(FlowDiagramDataItem);var SankeyDiagram=function(_super){__extends(SankeyDiagram,_super);function SankeyDiagram(){var _this=_super.call(this)||this;_this.className="SankeyDiagram";_this.orientation="horizontal";_this.nodeAlign="middle";_this.nodesContainer.width=percent(100);_this.nodesContainer.height=percent(100);_this.linksContainer.width=percent(100);_this.linksContainer.height=percent(100);_this.applyTheme();return _this}SankeyDiagram.prototype.validateData=function(){var _this=this;this._valueHeight=undefined;_super.prototype.validateData.call(this);this._levelCount=0;this.nodes.each((function(key,node){node.level=undefined}));this.nodes.each((function(key,node){node.level=_this.getNodeLevel(node,0);_this._levelCount=max$2(_this._levelCount,node.level)}))};SankeyDiagram.prototype.getNodeLevel=function(node,level){var _this=this;var levels=[level];each(node.incomingDataItems.iterator(),(function(link){if(link.fromNode){if(isNumber$1(link.fromNode.level)){levels.push(link.fromNode.level+1)}else{_this._counter=0;_this.checkLoop(link.fromNode);if(_this._counter<_this.dataItems.length){levels.push(_this.getNodeLevel(link.fromNode,level+1))}}}}));return Math.max.apply(Math,__spread(levels))};SankeyDiagram.prototype.checkLoop=function(node){var _this=this;this._counter++;if(this._counter>this.dataItems.length){return}each(node.incomingDataItems.iterator(),(function(link){_this.checkLoop(link.fromNode)}))};SankeyDiagram.prototype.calculateValueHeight=function(){var _this=this;this._levelSum={};this._levelNodesCount={};this.maxSum=0;var total=this.dataItem.values.value.sum;each(this._sorted,(function(strNode){var node=strNode[1];_this.getNodeValue(node)}));this.nodes.each((function(key,node){var level=node.level;var value=Math.max(node.totalIncoming,node.totalOutgoing);if(value/total<_this.minNodeSize){value=total*_this.minNodeSize}if(isNumber$1(_this._levelSum[level])){_this._levelSum[level]+=value}else{_this._levelSum[level]=value}if(isNumber$1(_this._levelNodesCount[level])){_this._levelNodesCount[level]++}else{_this._levelNodesCount[level]=1}}));var availableHeight;if(this.orientation=="horizontal"){availableHeight=this.chartContainer.maxHeight-1}else{availableHeight=this.chartContainer.maxWidth-1}var maxSumLevel;var minHeight;each$1(this._levelSum,(function(key,value){var realValue=value;var levelNodeCount=_this._levelNodesCount[key];var valueHeight=(availableHeight-(levelNodeCount-1)*_this.nodePadding)/realValue;if(valueHeight==Infinity){valueHeight=0}if(minHeight>valueHeight||!isNumber$1(minHeight)){minHeight=valueHeight;_this.maxSum=realValue;maxSumLevel=toNumber$1(key)}}));this._maxSumLevel=maxSumLevel;var maxSumLevelNodeCount=this._levelNodesCount[this._maxSumLevel];var valueHeight=(availableHeight-(maxSumLevelNodeCount-1)*this.nodePadding)/this.maxSum;if(valueHeight==Infinity){valueHeight=0}if(!isNumber$1(this.valueHeight)){this.valueHeight=valueHeight}else{var finalHeight=void 0;try{finalHeight=this._heightAnimation.animationOptions[0].to}catch(err){}if(finalHeight!=valueHeight){var duration=this.interpolationDuration;try{duration=this.nodes.template.states.getKey("active").transitionDuration}catch(err){}this._heightAnimation=new Animation(this,{property:"valueHeight",from:this.valueHeight,to:valueHeight},duration,this.interpolationEasing).start();this._disposers.push(this._heightAnimation)}}};SankeyDiagram.prototype.validate=function(){var _this=this;_super.prototype.validate.call(this);this.calculateValueHeight();var container=this.nodesContainer;var nextCoordinate={};var maxSumLevelNodeCount=this._levelNodesCount[this._maxSumLevel];var total=this.dataItem.values.value.sum;var availableHeight;if(this.orientation=="horizontal"){availableHeight=this.chartContainer.maxHeight-1}else{availableHeight=this.chartContainer.maxWidth-1}each(this._sorted,(function(strNode){var node=strNode[1];var level=node.level;var levelCoordinate=0;var nodeCount=_this._levelNodesCount[level];switch(_this.nodeAlign){case"bottom":levelCoordinate=(_this.maxSum-_this._levelSum[level])*_this.valueHeight-(nodeCount-maxSumLevelNodeCount)*_this.nodePadding;break;case"middle":levelCoordinate=(_this.maxSum-_this._levelSum[level])*_this.valueHeight/2-(nodeCount-maxSumLevelNodeCount)*_this.nodePadding/2;break}if(_this.maxSum==0){switch(_this.nodeAlign){case"bottom":levelCoordinate=availableHeight-nodeCount*(_this.minNodeSize*availableHeight+_this.nodePadding);break;case"middle":levelCoordinate=availableHeight/2-nodeCount/2*(_this.minNodeSize*availableHeight+_this.nodePadding);break}}node.parent=container;var delta;var x;var y;var value=Math.max(node.totalIncoming,node.totalOutgoing);if(value/total<_this.minNodeSize){value=total*_this.minNodeSize}if(_this.orientation=="horizontal"){delta=(_this.innerWidth-node.pixelWidth)/_this._levelCount;x=delta*node.level;y=nextCoordinate[level]||levelCoordinate;var h=value*_this.valueHeight;if(total==0&&h==0){h=_this.minNodeSize*availableHeight}node.height=h;node.minX=x;node.maxX=x;nextCoordinate[level]=y+h+_this.nodePadding}else{delta=(_this.innerHeight-node.pixelHeight)/_this._levelCount;x=nextCoordinate[level]||levelCoordinate;y=delta*node.level;var w=value*_this.valueHeight;if(total==0&&w==0){w=_this.minNodeSize*availableHeight}node.width=w;node.minY=y;node.maxY=y;nextCoordinate[level]=x+w+_this.nodePadding}node.x=x;node.y=y}))};SankeyDiagram.prototype.showReal=function(duration){var _this=this;if(this.preventShow){return}if(this.interpolationDuration>0){var container_1=this.nodesContainer;var i_1=0;each(this.links.iterator(),(function(link){link.hide(0)}));each(this._sorted,(function(strNode){var node=strNode[1];var property;if(_this.orientation=="horizontal"){node.dx=-(container_1.pixelWidth-node.pixelWidth)/Math.max(_this._levelCount,1);property="dx"}else{node.dy=-(container_1.pixelHeight-node.pixelHeight)/Math.max(_this._levelCount,1);property="dy"}var delay=0;var duration=_this.interpolationDuration;if(_this.sequencedInterpolation){delay=_this.sequencedInterpolationDelay*i_1+duration*i_1/length(_this.nodes.iterator())}node.opacity=0;node.invalidateLinks();node.animate([{property:"opacity",from:0,to:1},{property,to:0}],_this.interpolationDuration,_this.interpolationEasing).delay(delay);each(node.outgoingDataItems.iterator(),(function(dataItem){var animation=dataItem.link.show(_this.interpolationDuration);if(animation&&!animation.isFinished()){animation.delay(delay)}}));each(node.incomingDataItems.iterator(),(function(dataItem){if(!dataItem.fromNode){var animation=dataItem.link.show(_this.interpolationDuration);if(animation&&!animation.isFinished()){animation.delay(delay)}}}));i_1++}))}return _super.prototype.showReal.call(this)};SankeyDiagram.prototype.changeSorting=function(){var _this=this;this.sortNodes();var nextCoordinate={};each(this._sorted,(function(strNode){var node=strNode[1];var level=node.level;var levelCoordinate=(_this.maxSum-_this._levelSum[level])*_this.valueHeight/2;var property;var nodeHeight;if(_this.orientation=="horizontal"){property="y";nodeHeight=node.pixelHeight}else{property="x";nodeHeight=node.pixelWidth}node.animate({property,to:nextCoordinate[level]||levelCoordinate},_this.interpolationDuration,_this.interpolationEasing);nextCoordinate[level]=(nextCoordinate[level]||levelCoordinate)+nodeHeight+_this.nodePadding;node.invalidateLinks()}))};SankeyDiagram.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Sankey diagram")}};SankeyDiagram.prototype.createDataItem=function(){return new SankeyDiagramDataItem};Object.defineProperty(SankeyDiagram.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(value){this.setPropertyValue("nodeAlign",value);this.changeSorting()},enumerable:true,configurable:true});Object.defineProperty(SankeyDiagram.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){this.setPropertyValue("orientation",value,true);var nameLabel=this.nodes.template.nameLabel;if(value=="vertical"){this.nodes.template.width=undefined;nameLabel.label.horizontalCenter="middle";nameLabel.locationX=.5}else{this.nodes.template.height=undefined;nameLabel.label.horizontalCenter="left";nameLabel.locationX=1}},enumerable:true,configurable:true});SankeyDiagram.prototype.createNode=function(){var node=new SankeyNode;this._disposers.push(node);return node};SankeyDiagram.prototype.createLink=function(){var link=new SankeyLink;this._disposers.push(link);return link};Object.defineProperty(SankeyDiagram.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(value){if(value!=this._valueHeight){this._valueHeight=value;this.invalidate()}},enumerable:true,configurable:true});SankeyDiagram.prototype.disposeData=function(){_super.prototype.disposeData.call(this);this._sorted=this.nodes.iterator()};return SankeyDiagram}(FlowDiagram);registry.registeredClasses["SankeyDiagram"]=SankeyDiagram;var ChordNode=function(_super){__extends(ChordNode,_super);function ChordNode(){var _this=_super.call(this)||this;_this.className="ChordNode";var label=_this.createChild(AxisLabelCircular);label.location=.5;label.radius=5;label.text="{name}";label.zIndex=1;label.shouldClone=false;_this.label=label;_this.layout="none";_this.events.on("positionchanged",_this.updateRotation,_this,false);_this.isMeasured=false;_this.slice=_this.createChild(Slice);_this.slice.isMeasured=false;var hiddenState=_this.hiddenState;hiddenState.properties.fill=(new InterfaceColorSet).getFor("disabledBackground");hiddenState.properties.opacity=.5;hiddenState.properties.visible=true;_this.setStateOnChildren=false;_this.slice.hiddenState.properties.visible=true;_this.adapter.add("tooltipX",(function(tooltipX,target){return target.slice.ix*(target.slice.radius-(target.slice.radius-target.slice.pixelInnerRadius)/2)}));_this.adapter.add("tooltipY",(function(tooltipY,target){return target.slice.iy*(target.slice.radius-(target.slice.radius-target.slice.pixelInnerRadius)/2)}));return _this}ChordNode.prototype.invalidateLinks=function(){var _this=this;_super.prototype.invalidateLinks.call(this);var label=this.label;var slice=this.slice;var chart=this.chart;if(chart&&slice){var sum=this.total;var arc_1=slice.arc;var sliceStartAngle_1=slice.startAngle;this.children.each((function(child){if(child instanceof Bullet){var locationX=child.locationX;if(!isNumber$1(locationX)){locationX=.5}var locationY=child.locationY;if(!isNumber$1(locationY)){locationY=1}var childAngle=sliceStartAngle_1+arc_1*locationX;var childRadius=locationY*slice.radius;child.x=childRadius*cos(childAngle);child.y=childRadius*sin(childAngle)}}));var labelAngle=sliceStartAngle_1+arc_1*label.location;var startAngle=sliceStartAngle_1+(1-sum/this.adjustedTotal)*arc_1*.5;if(isNaN$1(startAngle)){startAngle=sliceStartAngle_1}label.fixPosition(labelAngle,slice.radius);this.nextAngle=startAngle;if(this._outgoingSorted){each(this._outgoingSorted,(function(dataItem){var link=dataItem.link;link.parent=_this.chart.linksContainer;var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){if(chart.nonRibbon){var percentWidth=link.percentWidth;if(!isNumber$1(percentWidth)){percentWidth=5}percentWidth=percentWidth/100;link.startAngle=sliceStartAngle_1+arc_1/2-arc_1/2*percentWidth;link.arc=arc_1*percentWidth}else{link.arc=value*chart.valueAngle;link.startAngle=_this.nextAngle;_this.nextAngle+=link.arc}if(!dataItem.toNode){link.endAngle=link.startAngle}link.radius=slice.pixelInnerRadius}}))}if(this._incomingSorted){each(this._incomingSorted,(function(dataItem){var link=dataItem.link;link.radius=slice.pixelInnerRadius;if(chart.nonRibbon){var percentWidth=link.percentWidth;if(!isNumber$1(percentWidth)){percentWidth=5}percentWidth=percentWidth/100;link.endAngle=sliceStartAngle_1+arc_1/2-arc_1/2*percentWidth;link.arc=arc_1*percentWidth}else{link.endAngle=_this.nextAngle;var value=dataItem.getWorkingValue("value");if(isNumber$1(value)){link.arc=value*chart.valueAngle;_this.nextAngle+=link.arc}}if(!dataItem.fromNode){link.startAngle=link.endAngle}}))}}};ChordNode.prototype.updateRotation=function(){var slice=this.slice;var mAngle=this.trueStartAngle+slice.arc/2;var radius=slice.radius;var tx=radius*cos(mAngle);var ty=radius*sin(mAngle);var angle=getAngle({x:tx+this.pixelX,y:ty+this.pixelY});slice.startAngle=this.trueStartAngle+(angle-mAngle);this.dx=-this.pixelX;this.dy=-this.pixelY};ChordNode.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.label.copyFrom(source.label);this.slice.copyFrom(source.slice)};return ChordNode}(FlowDiagramNode);registry.registeredClasses["ChordNode"]=ChordNode;var QuadraticCurve=function(_super){__extends(QuadraticCurve,_super);function QuadraticCurve(){var _this=_super.call(this)||this;_this.className="QuadraticCurve";_this.element=_this.paper.add("path");_this.pixelPerfect=false;_this.fill=color();_this.applyTheme();return _this}QuadraticCurve.prototype.draw=function(){if(isNumber$1(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var p1={x:this.x1,y:this.y1};var p2={x:this.x2,y:this.y2};var cp={x:this.cpx,y:this.cpy};var d=moveTo(p1)+quadraticCurveTo(p2,cp);this.path=d}};Object.defineProperty(QuadraticCurve.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(value){this.setPropertyValue("cpx",value,true)},enumerable:true,configurable:true});Object.defineProperty(QuadraticCurve.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(value){this.setPropertyValue("cpy",value,true)},enumerable:true,configurable:true});QuadraticCurve.prototype.positionToPoint=function(position){var p1={x:this.x1,y:this.y1};var cp={x:this.cpx,y:this.cpy};var p2={x:this.x2,y:this.y2};var point1=getPointOnQuadraticCurve(p1,p2,cp,position);var point2=getPointOnQuadraticCurve(p1,p2,cp,position+.001);return{x:point1.x,y:point1.y,angle:getAngle(point1,point2)}};return QuadraticCurve}(Line);var ChordLink=function(_super){__extends(ChordLink,_super);function ChordLink(){var _this=_super.call(this)||this;_this.className="ChordLink";_this.middleLine=_this.createChild(QuadraticCurve);_this.middleLine.shouldClone=false;_this.middleLine.strokeOpacity=0;_this.applyTheme();return _this}ChordLink.prototype.validate=function(){_super.prototype.validate.call(this);if(!this.isTemplate){var startAngle=this.startAngle;var endAngle=this.endAngle;var arc=this.arc;var radius=this.radius;var fromNode=this.dataItem.fromNode;var toNode=this.dataItem.toNode;var fromX=0;var fromY=0;if(fromNode){fromX=fromNode.pixelX+fromNode.dx;fromY=fromNode.pixelY+fromNode.dy}var toX=0;var toY=0;if(toNode){toX=toNode.pixelX+toNode.dx;toY=toNode.pixelY+toNode.dy}if(radius>0){var x1=radius*cos(startAngle)+fromX;var y1=radius*sin(startAngle)+fromY;var x2=radius*cos(endAngle)+toX;var y2=radius*sin(endAngle)+toY;var cp={x:0,y:0};var path=moveTo({x:x1,y:y1});path+=arcTo(startAngle,arc,radius);path+=quadraticCurveTo({x:x2,y:y2},cp);path+=arcTo(endAngle,arc,radius);path+=quadraticCurveTo({x:x1,y:y1},cp);if(arc>0){this.link.path=path}else{this.link.path=""}if(this.maskBullets){this.bulletsMask.path=path;this.bulletsContainer.mask=this.bulletsMask}var mAngle1=startAngle+arc/2;var mAngle2=endAngle+arc/2;var middleLine=this.middleLine;middleLine.x1=radius*cos(mAngle1)+fromX;middleLine.y1=radius*sin(mAngle1)+fromY;middleLine.x2=radius*cos(mAngle2)+toX;middleLine.y2=radius*sin(mAngle2)+toY;middleLine.cpx=0;middleLine.cpy=0;middleLine.stroke=this.fill;this.positionBullets()}}};Object.defineProperty(ChordLink.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPropertyValue("radius",value,true)},enumerable:true,configurable:true});Object.defineProperty(ChordLink.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(value){this.setPropertyValue("arc",value,true)},enumerable:true,configurable:true});return ChordLink}(FlowDiagramLink);registry.registeredClasses["ChordLink"]=ChordLink;var ChordDiagramDataItem=function(_super){__extends(ChordDiagramDataItem,_super);function ChordDiagramDataItem(){var _this=_super.call(this)||this;_this.className="ChordDiagramDataItem";_this.applyTheme();return _this}return ChordDiagramDataItem}(FlowDiagramDataItem);var ChordDiagram=function(_super){__extends(ChordDiagram,_super);function ChordDiagram(){var _this=_super.call(this)||this;_this.valueAngle=0;_this.className="ChordDiagram";_this.startAngle=-90;_this.endAngle=270;_this.radius=percent(80);_this.innerRadius=-15;_this.nodePadding=5;var chordContainer=_this.chartContainer.createChild(Container);chordContainer.align="center";chordContainer.valign="middle";chordContainer.shouldClone=false;chordContainer.layout="absolute";_this.chordContainer=chordContainer;_this.nodesContainer.parent=chordContainer;_this.linksContainer.parent=chordContainer;_this.chartContainer.events.on("maxsizechanged",_this.invalidate,_this,false);_this.applyTheme();return _this}ChordDiagram.prototype.validate=function(){var _this=this;var chartContainer=this.chartContainer;var endAngle=this.endAngle;var startAngle=this.startAngle+this.nodePadding/2;var rect=getArcRect(this.startAngle,this.endAngle,1);var innerRect={x:0,y:0,width:0,height:0};rect=getCommonRectangle([rect,innerRect]);var maxRadius=Math.min(chartContainer.innerWidth/rect.width,chartContainer.innerHeight/rect.height);if(!isNumber$1(maxRadius)){maxRadius=0}var radius=relativeRadiusToValue(this.radius,maxRadius);var pixelInnerRadius=relativeRadiusToValue(this.innerRadius,radius,true);var total=this.dataItem.values.value.sum;var count=0;var newTotal=0;each(this._sorted,(function(strNode){var node=strNode[1];_this.getNodeValue(node);count++;var value=node.total;if(node.total/total<_this.minNodeSize){value=total*_this.minNodeSize}newTotal+=value}));this.valueAngle=(endAngle-this.startAngle-this.nodePadding*count)/newTotal;each(this._sorted,(function(strNode){var node=strNode[1];var slice=node.slice;slice.radius=radius;slice.innerRadius=pixelInnerRadius;var value=node.total;if(node.total/total<_this.minNodeSize){value=total*_this.minNodeSize}node.adjustedTotal=value;var arc;if(_this.nonRibbon){arc=(endAngle-_this.startAngle)/count-_this.nodePadding}else{arc=_this.valueAngle*value}slice.arc=arc;slice.startAngle=startAngle;node.trueStartAngle=startAngle;node.parent=_this.nodesContainer;node.validate();startAngle+=arc+_this.nodePadding}));this.chordContainer.definedBBox={x:radius*rect.x,y:radius*rect.y,width:radius*rect.width,height:radius*rect.height};this.chordContainer.invalidateLayout();_super.prototype.validate.call(this)};ChordDiagram.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Chord diagram")}};ChordDiagram.prototype.createDataItem=function(){return new ChordDiagramDataItem};Object.defineProperty(ChordDiagram.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){this.setPropertyValue("startAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(ChordDiagram.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){this.setPropertyValue("endAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(ChordDiagram.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(ChordDiagram.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(ChordDiagram.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(value){this.setPropertyValue("nonRibbon",value,true);this.links.template.middleLine.strokeOpacity=1;this.links.template.link.fillOpacity=0},enumerable:true,configurable:true});ChordDiagram.prototype.createNode=function(){var node=new ChordNode;this._disposers.push(node);return node};ChordDiagram.prototype.createLink=function(){var link=new ChordLink;this._disposers.push(link);return link};return ChordDiagram}(FlowDiagram);registry.registeredClasses["ChordDiagram"]=ChordDiagram;var Column=function(_super){__extends(Column,_super);function Column(){var _this=_super.call(this)||this;_this.className="Column";_this.width=percent(80);_this.height=percent(80);_this.events.disableType("transformed");_this.applyOnClones=true;_this.strokeOpacity=1;_this.layout="none";_this.createAssets();_this.events.on("childadded",_this.handleKidAdded,_this,false);return _this}Column.prototype.handleKidAdded=function(){if(this.layout=="none"){this.layout="absolute"}};Column.prototype.createAssets=function(){this.column=this.createChild(RoundedRectangle);this.column.shouldClone=false;this.column.isMeasured=false;this.column.cornerRadius(0,0,0,0);this._disposers.push(this.column)};Column.prototype.validate=function(){_super.prototype.validate.call(this);var column=this.column;if(column){column.width=min$2(this.pixelWidth,this.maxWidth);column.height=min$2(this.pixelHeight,this.maxHeight);if(column.invalid){column.validate()}}};Column.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.column){this.column.copyFrom(source.column)}};Object.defineProperty(Column.prototype,"bbox",{get:function(){if(this.definedBBox){return this.definedBBox}if(this.column){return{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}}else{return{x:0,y:0,width:min$2(this.pixelWidth,this.maxWidth),height:min$2(this.pixelHeight,this.maxHeight)}}},enumerable:true,configurable:true});return Column}(Container);registry.registeredClasses["Column"]=Column;var ColumnSeriesDataItem=function(_super){__extends(ColumnSeriesDataItem,_super);function ColumnSeriesDataItem(){var _this=_super.call(this)||this;_this.className="ColumnSeriesDataItem";_this.locations["dateX"]=.5;_this.locations["dateY"]=.5;_this.locations["categoryX"]=.5;_this.locations["categoryY"]=.5;_this.applyTheme();return _this}Object.defineProperty(ColumnSeriesDataItem.prototype,"column",{get:function(){return this._column},set:function(column){this.setColumn(column)},enumerable:true,configurable:true});ColumnSeriesDataItem.prototype.setColumn=function(column){var _this=this;if(this._column&&column!=this._column){remove(this.sprites,this._column)}this._column=column;if(column){var prevDataItem=column.dataItem;if(prevDataItem&&prevDataItem!=this){prevDataItem.column=undefined}this.addSprite(column);this._disposers.push(new Disposer((function(){if(_this.component){_this.component.columns.removeValue(column)}})))}};Object.defineProperty(ColumnSeriesDataItem.prototype,"width",{get:function(){var width=this.properties.width;if(this._adapterO){width=this._adapterO.apply("width",width)}return width},set:function(value){if(this.properties.width!=value){this.properties.width=value;if(this.component){this.component.validateDataElement(this)}}},enumerable:true,configurable:true});Object.defineProperty(ColumnSeriesDataItem.prototype,"height",{get:function(){var height=this.properties.height;if(this._adapterO){height=this._adapterO.apply("height",height)}return height},set:function(value){if(this.properties.height!=value){this.properties.height=value;if(this.component){this.component.validateDataElement(this)}}},enumerable:true,configurable:true});Object.defineProperty(ColumnSeriesDataItem.prototype,"rangesColumns",{get:function(){if(!this._rangesColumns){this._rangesColumns=new Dictionary}return this._rangesColumns},enumerable:true,configurable:true});return ColumnSeriesDataItem}(XYSeriesDataItem);var ColumnSeries=function(_super){__extends(ColumnSeries,_super);function ColumnSeries(){var _this=_super.call(this)||this;_this._startLocation=0;_this._endLocation=1;_this.className="ColumnSeries";_this.width=percent(100);_this.height=percent(100);_this.strokeOpacity=0;_this.fillOpacity=1;_this.clustered=true;var columnsContainer=_this.mainContainer.createChild(Container);columnsContainer.shouldClone=false;columnsContainer.isMeasured=false;columnsContainer.layout="none";_this._columnsContainer=columnsContainer;_this.columns.template.pixelPerfect=false;_this.tooltipColorSource=_this.columns.template;_this.applyTheme();return _this}Object.defineProperty(ColumnSeries.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:true,configurable:true});ColumnSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Column Series")}};ColumnSeries.prototype.createDataItem=function(){return new ColumnSeriesDataItem};ColumnSeries.prototype.validate=function(){var _this=this;this.group.node.removeAttribute("fill");if(this.chart&&this.xAxis&&this.yAxis){var baseAxisSeries=this.chart.series;var clusterCount_1=0;var index_1=0;var sortedByAxis_1=[];each(baseAxisSeries.iterator(),(function(series){if(series instanceof ColumnSeries){if(_this.baseAxis==series.baseAxis){var index_2;if(_this.baseAxis==_this.xAxis){index_2=_this.chart.yAxes.indexOf(series.yAxis)}else{index_2=_this.chart.xAxes.indexOf(series.xAxis)}sortedByAxis_1.push({series,axis:index_2})}}}));sortedByAxis_1.sort((function(a,b){return a.axis-b.axis}));var prevAxisIndex_1;each$2(sortedByAxis_1,(function(sortedItem){var series=sortedItem.series;if(series instanceof ColumnSeries){if(!series.stacked&&series.clustered||prevAxisIndex_1!=sortedItem.axis&&series.clustered){clusterCount_1++}if(series==_this){index_1=clusterCount_1-1}}prevAxisIndex_1=sortedItem.axis}));if(!this.clustered){index_1=0;clusterCount_1=1}var renderer=this.baseAxis.renderer;var cellStartLocation=renderer.cellStartLocation;var cellEndLocation=renderer.cellEndLocation;this._startLocation=cellStartLocation+index_1/clusterCount_1*(cellEndLocation-cellStartLocation);this._endLocation=cellStartLocation+(index_1+1)/clusterCount_1*(cellEndLocation-cellStartLocation);var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis instanceof CategoryAxis&&yAxis instanceof ValueAxis){if(xAxis.sortBySeries==this){this.sortCategoryAxis(xAxis,"valueY")}}if(yAxis instanceof CategoryAxis&&xAxis instanceof ValueAxis){if(yAxis.sortBySeries==this){this.sortCategoryAxis(yAxis,"valueX")}}}_super.prototype.validate.call(this);for(var i=0;i<this.startIndex;i++){var dataItem=this.dataItems.getIndex(i);this.disableUnusedColumns(dataItem)}for(var i=this.dataItems.length-1;i>this.endIndex;i--){var dataItem=this.dataItems.getIndex(i);this.disableUnusedColumns(dataItem)}this._propertiesChanged=false};ColumnSeries.prototype.sortCategoryAxis=function(axis,key){var _this=this;this.dataItems.values.sort((function(x,y){return y.values[key].workingValue-x.values[key].workingValue}));var i=0;this.dataItems.each((function(dataItem){dataItem._index=i;i++}));axis.dataItems.each((function(dataItem){var axis=dataItem.component;var currentPosition=axis.categoryToPosition(dataItem.category)-dataItem.deltaPosition;var seriesDataItem=axis.getSeriesDataItemByCategory(dataItem.category,_this);if(seriesDataItem){var index=_this.dataItems.indexOf(seriesDataItem);dataItem._index=index;var deltaPosition=round$1((index+.5)/_this.dataItems.length-currentPosition,3);if(dataItem.deltaAnimation&&!dataItem.deltaAnimation.isDisposed()&&dataItem.deltaAnimation.animationOptions[0].to==deltaPosition);else if(deltaPosition!=round$1(dataItem.deltaPosition,3)){if(dataItem.deltaAnimation){dataItem.deltaAnimation.stop()}dataItem.deltaAnimation=dataItem.animate({property:"deltaPosition",from:-deltaPosition,to:0},axis.interpolationDuration,axis.interpolationEasing);_this._disposers.push(dataItem.deltaAnimation)}}}));axis.dataItems.values.sort((function(x,y){return x.index-y.index}))};ColumnSeries.prototype.validateDataElement=function(dataItem){if(this.chart&&this.xAxis&&this.yAxis){this.validateDataElementReal(dataItem);_super.prototype.validateDataElement.call(this,dataItem)}};ColumnSeries.prototype.getStartLocation=function(dataItem){var startLocation=this._startLocation;if(this.baseAxis==this.xAxis){startLocation+=dataItem.locations[this.xOpenField]-.5}else{startLocation+=dataItem.locations[this.yOpenField]-.5}return startLocation};ColumnSeries.prototype.getEndLocation=function(dataItem){var endLocation=this._endLocation;if(this.baseAxis==this.xAxis){endLocation+=dataItem.locations[this.xField]-.5}else{endLocation+=dataItem.locations[this.yField]-.5}return endLocation};ColumnSeries.prototype.validateDataElementReal=function(dataItem){var _this=this;var l;var r;var t;var b;var startLocation=this.getStartLocation(dataItem);var endLocation=this.getEndLocation(dataItem);var xField=this.xField;var xOpenField=this.xOpenField;var yField=this.yField;var yOpenField=this.yOpenField;var template=this.columns.template;var percentWidth=template.percentWidth;var percentHeight=template.percentHeight;var pixelWidth=template.pixelWidth;var pixelHeight=template.pixelHeight;var maxWidth=template.maxWidth;var maxHeight=template.maxHeight;var paddingLeft=template.pixelPaddingLeft;var paddingRight=template.pixelPaddingRight;var paddingTop=template.pixelPaddingTop;var paddingBottom=template.pixelPaddingBottom;var outOfBounds=false;var diw=dataItem.width;if(hasValue(diw)){if(isNumber$1(diw)){pixelWidth=diw}if(diw instanceof Percent){percentWidth=diw.value*100}}var dih=dataItem.height;if(hasValue(dih)){if(isNumber$1(dih)){pixelHeight=dih}if(dih instanceof Percent){percentHeight=dih.value*100}}if(this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis){if(!dataItem.hasValue(this._xValueFields)||!dataItem.hasValue(this._yValueFields)){return}startLocation=0;endLocation=1;if(!isNaN$1(percentWidth)){var offset=round$1((endLocation-startLocation)*(1-percentWidth/100)/2,5);startLocation+=offset;endLocation-=offset}l=this.xAxis.getX(dataItem,xOpenField,startLocation);r=this.xAxis.getX(dataItem,xField,endLocation);if(isNaN$1(percentWidth)){var offset=(r-l-pixelWidth)/2;l+=offset;r-=offset}if(!isNaN$1(maxWidth)&&maxWidth<Math.abs(r-l)){var offset=(r-l-maxWidth)/2;l+=offset;r-=offset}startLocation=0;endLocation=1;if(!isNaN$1(percentHeight)){var offset=round$1((1-percentHeight/100)/2,5);startLocation+=offset;endLocation-=offset}t=this.yAxis.getY(dataItem,yOpenField,startLocation);b=this.yAxis.getY(dataItem,yField,endLocation);if(isNaN$1(percentHeight)){var offset=(b-t-pixelHeight)/2;b+=offset;t-=offset}if(!isNaN$1(maxHeight)&&maxHeight<Math.abs(b-t)){var offset=(b-t-maxHeight)/2;b+=offset;t-=offset}r=this.fixHorizontalCoordinate(r);l=this.fixHorizontalCoordinate(l);t=this.fixVerticalCoordinate(t);b=this.fixVerticalCoordinate(b)}else if(this.baseAxis==this.xAxis){if(!dataItem.hasValue(this._yValueFields)){return}if(!isNaN$1(percentWidth)){var offset=round$1((endLocation-startLocation)*(1-percentWidth/100)/2,5);startLocation+=offset;endLocation-=offset}l=this.xAxis.getX(dataItem,xOpenField,startLocation);r=this.xAxis.getX(dataItem,xField,endLocation);if(isNaN$1(percentWidth)){var offset=(r-l-pixelWidth)/2;l+=offset;r-=offset}if(!isNaN$1(maxWidth)&&maxWidth<Math.abs(r-l)){var offset=(r-l-maxWidth)/2;l+=offset;r-=offset}var bottomLocation=dataItem.locations[yOpenField];var topLocation=dataItem.locations[yField];if(this.yAxis instanceof ValueAxis){if(this.dataFields[this.yField]!=this.dataFields[this.yOpenField]){bottomLocation=0;topLocation=0}}b=this.yAxis.getY(dataItem,yOpenField,bottomLocation);t=this.yAxis.getY(dataItem,yField,topLocation);var axisLenght=Math.ceil(this.yAxis.axisLength);if(t<0&&b<0||t>axisLenght&&b>axisLenght){outOfBounds=true}t=this.fixVerticalCoordinate(t);b=this.fixVerticalCoordinate(b);if(Math.abs(r-l)-paddingLeft-paddingRight==0){outOfBounds=true}}else{if(!dataItem.hasValue(this._xValueFields)){return}if(!isNaN$1(percentHeight)){var offset=round$1((endLocation-startLocation)*(1-percentHeight/100)/2,5);startLocation+=offset;endLocation-=offset}t=this.yAxis.getY(dataItem,yOpenField,startLocation);b=this.yAxis.getY(dataItem,yField,endLocation);if(isNaN$1(percentHeight)){var offset=(b-t-pixelHeight)/2;b-=offset;t+=offset}if(!isNaN$1(maxHeight)&&maxHeight<Math.abs(b-t)){var offset=(b-t-maxHeight)/2;b-=offset;t+=offset}var rightLocation=dataItem.locations[xField];var leftLocation=dataItem.locations[xOpenField];if(this.xAxis instanceof ValueAxis){if(this.dataFields[this.xField]!=this.dataFields[this.xOpenField]){rightLocation=0;leftLocation=0}}r=this.xAxis.getX(dataItem,xField,rightLocation);l=this.xAxis.getX(dataItem,xOpenField,leftLocation);var axisLenght=Math.ceil(this.xAxis.axisLength);if(r<0&&l<0||r>axisLenght&&l>axisLenght){outOfBounds=true}r=this.fixHorizontalCoordinate(r);l=this.fixHorizontalCoordinate(l);if(Math.abs(t-b)-paddingTop-paddingBottom==0){outOfBounds=true}}var w=Math.abs(r-l);var h=Math.abs(b-t);var x=Math.min(l,r);var y=Math.min(t,b);if(!outOfBounds){var column_1;if(!dataItem.column){column_1=this.columns.create();copyProperties$1(this,column_1,visualProperties);copyProperties$1(this.columns.template,column_1,visualProperties);dataItem.addSprite(column_1);dataItem.column=column_1;column_1.paper=this.paper;if(this.itemsFocusable()){if(!hasValue(this.role)){this.role="menu"}if(!hasValue(column_1.role)){column_1.role="menuitem"}column_1.focusable=true}else{if(!hasValue(this.role)){this.role="list"}if(!hasValue(column_1.role)){column_1.role="listitem"}column_1.focusable=false}if(column_1.focusable){column_1.events.on("focus",(function(ev){column_1.readerTitle=_this.populateString(_this.itemReaderText,dataItem)}),undefined,false);column_1.events.on("blur",(function(ev){column_1.readerTitle=""}),undefined,false)}if(column_1.hoverable){column_1.events.on("over",(function(ev){column_1.readerTitle=_this.populateString(_this.itemReaderText,dataItem)}),undefined,false);column_1.events.on("out",(function(ev){column_1.readerTitle=""}),undefined,false)}column_1.parent=this.columnsContainer;column_1.virtualParent=this}else{column_1=dataItem.column;if(this._propertiesChanged){copyProperties$1(this,column_1,visualProperties);copyProperties$1(this.columns.template,column_1,visualProperties);each$2(visualProperties,(function(property){column_1[property]=column_1[property]}))}}column_1.width=w;column_1.height=h;column_1.x=x;column_1.y=y;column_1.realX=l;column_1.realY=t;column_1.realWidth=r-l;column_1.realHeight=b-t;this.setColumnStates(column_1);if(column_1.invalid){column_1.validate()}column_1.__disabled=false;each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(!rangeColumn){rangeColumn=_this.columns.create();copyProperties$1(axisRange.contents,rangeColumn,visualProperties);dataItem.addSprite(rangeColumn);dataItem.rangesColumns.setKey(axisRange.uid,rangeColumn);rangeColumn.paper=_this.paper}rangeColumn.parent=axisRange.contents;rangeColumn.width=w;rangeColumn.height=h;rangeColumn.x=x;rangeColumn.y=y;_this.setColumnStates(rangeColumn);if(rangeColumn.invalid){rangeColumn.validate()}rangeColumn.__disabled=false}))}else{this.disableUnusedColumns(dataItem)}dataItem.itemWidth=w;dataItem.itemHeight=h};ColumnSeries.prototype.disableUnusedColumns=function(dataItem){if(dataItem){if(dataItem.column){dataItem.column.width=0;dataItem.column.height=0;dataItem.column.__disabled=true}each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(rangeColumn){rangeColumn.width=0;rangeColumn.height=0;rangeColumn.__disabled=true}}))}};ColumnSeries.prototype.setColumnStates=function(sprite){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var dataItem=sprite.dataItem;if(this.xAxis instanceof ValueAxis||this.yAxis instanceof ValueAxis){var open_1;var value=void 0;var change=void 0;if(this.baseAxis==this.yAxis){if(this.xOpenField&&this.xField&&this.xAxis instanceof ValueAxis){open_1=dataItem.getValue(this.xOpenField);value=dataItem.getValue(this.xField)}change=dataItem.getValue(this.xAxis.axisFieldName+"X","previousChange")}else{if(this.yOpenField&&this.yField&&this.yAxis instanceof ValueAxis){open_1=dataItem.getValue(this.yOpenField);value=dataItem.getValue(this.yField)}change=dataItem.getValue(this.yAxis.axisFieldName+"Y","previousChange")}if(value<open_1){dataItem.droppedFromOpen=true;sprite.defaultState.copyFrom(this._dropFromOpenState);sprite.setState(this._dropFromOpenState,0)}else{dataItem.droppedFromOpen=false;sprite.defaultState.copyFrom(this._riseFromOpenState);sprite.setState(this._riseFromOpenState,0)}if(change<0){dataItem.droppedFromPrevious=true;sprite.defaultState.copyFrom(this._dropFromPreviousState);sprite.setState(this._dropFromPreviousState,0)}else{dataItem.droppedFromPrevious=false;sprite.defaultState.copyFrom(this._riseFromPreviousState);sprite.setState(this._riseFromPreviousState,0)}}}};Object.defineProperty(ColumnSeries.prototype,"columns",{get:function(){if(!this._columns){this._columns=new ListTemplate(this.createColumnTemplate());this._disposers.push(new ListDisposer(this._columns));this._disposers.push(this._columns.template)}return this._columns},enumerable:true,configurable:true});ColumnSeries.prototype.createColumnTemplate=function(){return new Column};Object.defineProperty(ColumnSeries.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(value){this.setPropertyValue("clustered",value,true)},enumerable:true,configurable:true});Object.defineProperty(ColumnSeries.prototype,"dropFromOpenState",{get:function(){if(!this._dropFromOpenState){this._dropFromOpenState=this.states.create("dropFromOpenState")}return this._dropFromOpenState},set:function(value){this._dropFromOpenState=value},enumerable:true,configurable:true});Object.defineProperty(ColumnSeries.prototype,"dropFromPreviousState",{get:function(){if(!this._dropFromPreviousState){this._dropFromPreviousState=this.states.create("dropFromPreviousState")}return this._dropFromPreviousState},set:function(value){this._dropFromPreviousState=value},enumerable:true,configurable:true});Object.defineProperty(ColumnSeries.prototype,"riseFromOpenState",{get:function(){if(!this._riseFromOpenState){this._riseFromOpenState=this.states.create("riseFromOpenState")}return this._riseFromOpenState},set:function(value){this._riseFromOpenState=value},enumerable:true,configurable:true});Object.defineProperty(ColumnSeries.prototype,"riseFromPreviousState",{get:function(){if(!this._riseFromPreviousState){this._riseFromPreviousState=this.states.create("riseFromPreviousState")}return this._riseFromPreviousState},set:function(value){this._riseFromPreviousState=value},enumerable:true,configurable:true});ColumnSeries.prototype.updateLegendValue=function(dataItem,notRange){var _this=this;_super.prototype.updateLegendValue.call(this,dataItem,notRange);if(this.legendDataItem){var marker=this.legendDataItem.marker;var fromOpenState_1;var fromPreviousState_1;if(dataItem){if(dataItem.droppedFromOpen){fromOpenState_1=this._dropFromOpenState}else{fromOpenState_1=this._riseFromOpenState}if(dataItem.droppedFromPrevious){fromPreviousState_1=this._dropFromPreviousState}else{fromPreviousState_1=this._riseFromPreviousState}}each(marker.children.iterator(),(function(child){if(dataItem){child.setState(fromPreviousState_1);child.setState(fromOpenState_1)}else{child.setState(_this._riseFromPreviousState);child.setState(_this._riseFromOpenState)}}))}};ColumnSeries.prototype.createLegendMarker=function(marker){var w=marker.pixelWidth;var h=marker.pixelHeight;marker.removeChildren();var column=marker.createChild(RoundedRectangle);column.shouldClone=false;copyProperties$1(this,column,visualProperties);column.copyFrom(this.columns.template);column.padding(0,0,0,0);column.width=w;column.height=h;var legendDataItem=marker.dataItem;legendDataItem.color=this.fill;legendDataItem.colorOrig=this.fill};ColumnSeries.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.columns.template.copyFrom(source.columns.template)};ColumnSeries.prototype.getBulletLocationX=function(bullet,field){if(this.baseAxis==this.xAxis){var bulletLocationX=bullet.locationX;if(!isNumber$1(bulletLocationX)){bulletLocationX=.5}var endLocation=this.getEndLocation(bullet.dataItem);var startLocation=this.getStartLocation(bullet.dataItem);return endLocation-(endLocation-startLocation)*bulletLocationX}else{return _super.prototype.getBulletLocationX.call(this,bullet,field)}};ColumnSeries.prototype.getBulletLocationY=function(bullet,field){if(this.baseAxis==this.yAxis){var bulletLocationY=bullet.locationY;if(!isNumber$1(bulletLocationY)){bulletLocationY=.5}var endLocation=this.getEndLocation(bullet.dataItem);var startLocation=this.getStartLocation(bullet.dataItem);return endLocation-(endLocation-startLocation)*bulletLocationY}else{return _super.prototype.getBulletLocationY.call(this,bullet,field)}};ColumnSeries.prototype.getAdjustedXLocation=function(dataItem,field,bulletLocationX){if(!isNumber$1(bulletLocationX)){if(dataItem){bulletLocationX=dataItem.locations[field]}else{bulletLocationX=.5}}return this._endLocation-(this._endLocation-this._startLocation)*(1-bulletLocationX)};ColumnSeries.prototype.getAdjustedYLocation=function(dataItem,field,bulletLocationY){if(!isNumber$1(bulletLocationY)){if(dataItem){bulletLocationY=dataItem.locations[field]}else{bulletLocationY=.5}}return this._endLocation-(this._endLocation-this._startLocation)*bulletLocationY};ColumnSeries.prototype.fixVerticalCoordinate=function(coordinate){var paddingBottom=this.columns.template.pixelPaddingBottom;var paddingTop=this.columns.template.pixelPaddingTop;var minY=-paddingTop;var maxY=this.yAxis.axisLength+paddingBottom;return fitToRange(coordinate,minY,maxY)};ColumnSeries.prototype.fixHorizontalCoordinate=function(coordinate){var paddingLeft=this.columns.template.pixelPaddingLeft;var paddingRight=this.columns.template.pixelPaddingRight;var minX=-paddingLeft;var maxX=this.xAxis.axisLength+paddingRight;return fitToRange(coordinate,minX,maxX)};ColumnSeries.prototype.disposeData=function(){_super.prototype.disposeData.call(this);this.columns.clear()};return ColumnSeries}(XYSeries);registry.registeredClasses["ColumnSeries"]=ColumnSeries;registry.registeredClasses["ColumnSeriesDataItem"]=ColumnSeriesDataItem;var TreeMapSeriesDataItem=function(_super){__extends(TreeMapSeriesDataItem,_super);function TreeMapSeriesDataItem(){var _this=_super.call(this)||this;_this.className="TreeMapSeriesDataItem";_this.applyTheme();return _this}Object.defineProperty(TreeMapSeriesDataItem.prototype,"parentName",{get:function(){var treeMapDataItem=this.treeMapDataItem;if(treeMapDataItem&&treeMapDataItem.parent){return treeMapDataItem.parent.name}},enumerable:true,configurable:true});Object.defineProperty(TreeMapSeriesDataItem.prototype,"value",{get:function(){var treeMapDataItem=this.treeMapDataItem;if(treeMapDataItem){return treeMapDataItem.value}},enumerable:true,configurable:true});Object.defineProperty(TreeMapSeriesDataItem.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:true,configurable:true});TreeMapSeriesDataItem.prototype.hide=function(duration,delay,toValue,fields){var treeMapDataItem=this.treeMapDataItem;if(treeMapDataItem){treeMapDataItem.hide(duration)}return _super.prototype.hide.call(this,duration,delay,toValue,fields)};TreeMapSeriesDataItem.prototype.show=function(duration,delay,fields){var treeMapDataItem=this.treeMapDataItem;if(treeMapDataItem){treeMapDataItem.show(duration,delay,fields)}return _super.prototype.show.call(this,duration,delay,fields)};return TreeMapSeriesDataItem}(ColumnSeriesDataItem);var TreeMapSeries=function(_super){__extends(TreeMapSeries,_super);function TreeMapSeries(){var _this=_super.call(this)||this;_this.className="TreeMapSeries";_this.applyTheme();_this.fillOpacity=1;_this.strokeOpacity=1;_this.minBulletDistance=0;_this.columns.template.tooltipText="{parentName} {name}: {value}";_this.columns.template.configField="config";var interfaceColors=new InterfaceColorSet;_this.stroke=interfaceColors.getFor("background");_this.dataFields.openValueX="x0";_this.dataFields.valueX="x1";_this.dataFields.openValueY="y0";_this.dataFields.valueY="y1";_this.sequencedInterpolation=false;_this.showOnInit=false;_this.columns.template.pixelPerfect=false;return _this}TreeMapSeries.prototype.processDataItem=function(dataItem,dataContext){dataContext.seriesDataItem=dataItem;_super.prototype.processDataItem.call(this,dataItem,dataContext)};TreeMapSeries.prototype.createDataItem=function(){return new TreeMapSeriesDataItem};TreeMapSeries.prototype.show=function(duration){if(this.preventShow){return}var interpolationDuration=this.defaultState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}this.dataItems.each((function(dataItem){dataItem.show(duration)}));return _super.prototype.showReal.call(this,interpolationDuration)};TreeMapSeries.prototype.hide=function(duration){var interpolationDuration=this.defaultState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}var animation=_super.prototype.hideReal.call(this,interpolationDuration);this.dataItems.each((function(dataItem){dataItem.hide(duration)}));return animation};TreeMapSeries.prototype.processValues=function(){};TreeMapSeries.prototype.getStartLocation=function(dataItem){return 0};TreeMapSeries.prototype.getEndLocation=function(dataItem){return 1};TreeMapSeries.prototype.dataChangeUpdate=function(){};TreeMapSeries.prototype.processConfig=function(config){if(config){if(!hasValue(config.dataFields)||!isObject$4(config.dataFields)){config.dataFields={}}}_super.prototype.processConfig.call(this,config)};TreeMapSeries.prototype.createLegendMarker=function(marker){var w=marker.pixelWidth;var h=marker.pixelHeight;marker.removeChildren();var column=marker.createChild(RoundedRectangle);column.shouldClone=false;copyProperties$1(this,column,visualProperties);column.padding(0,0,0,0);column.width=w;column.height=h;var legendDataItem=marker.dataItem;legendDataItem.color=column.fill;legendDataItem.colorOrig=column.fill};TreeMapSeries.prototype.disableUnusedColumns=function(dataItem){_super.prototype.disableUnusedColumns.call(this,dataItem);if(dataItem.column){dataItem.column.__disabled=false}};return TreeMapSeries}(ColumnSeries);registry.registeredClasses["TreeMapSeries"]=TreeMapSeries;registry.registeredClasses["TreeMapSeriesDataItem"]=TreeMapSeriesDataItem;var TreeMapDataItem=function(_super){__extends(TreeMapDataItem,_super);function TreeMapDataItem(){var _this=_super.call(this)||this;_this.rows=[];_this.className="TreeMapDataItem";_this.values.value={workingValue:0};_this.values.x0={};_this.values.y0={};_this.values.x1={};_this.values.y1={};_this.hasChildren.children=true;_this.applyTheme();return _this}Object.defineProperty(TreeMapDataItem.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(value){this._legendDataItem=value;if(value.label){value.label.dataItem=this}if(value.valueLabel){value.valueLabel.dataItem=this}},enumerable:true,configurable:true});TreeMapDataItem.prototype.getDuration=function(){return 0};Object.defineProperty(TreeMapDataItem.prototype,"value",{get:function(){var value=0;if(!this.children||this.children.length==0){value=this.values["value"].workingValue}else{each(this.children.iterator(),(function(child){var childValue=child.value;if(isNumber$1(childValue)){value+=childValue}}))}return value},set:function(value){this.setValue("value",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"percent",{get:function(){if(this.parent){return this.value/this.parent.value*100}return 100},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"x0",{get:function(){return this.values.x0.value},set:function(value){this.setValue("x0",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"x1",{get:function(){return this.values.x1.value},set:function(value){this.setValue("x1",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"y0",{get:function(){return this.values.y0.value},set:function(value){this.setValue("y0",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"y1",{get:function(){return this.values.y1.value},set:function(value){this.setValue("y1",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"name",{get:function(){return this.properties.name},set:function(name){this.setProperty("name",name)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"children",{get:function(){return this.properties.children},set:function(children){this.setProperty("children",children)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"level",{get:function(){if(!this.parent){return 0}else{return this.parent.level+1}},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"color",{get:function(){var color=this.properties.color;if(color==undefined){if(this.parent){color=this.parent.color}}if(color==undefined){if(this.component){color=this.component.colors.getIndex(this.component.colors.step*this.index)}}return color},set:function(value){this.setProperty("color",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"fill",{get:function(){return this.color},enumerable:true,configurable:true});Object.defineProperty(TreeMapDataItem.prototype,"series",{get:function(){return this._series},set:function(series){if(series!=this._series){if(this._series){this.component.series.removeValue(this._series);this._series.dispose()}this._series=series;this._disposers.push(series)}},enumerable:true,configurable:true});TreeMapDataItem.prototype.hide=function(duration,delay,toValue,fields){this.setWorkingValue("value",0);if(this.children){this.children.each((function(child){child.hide(duration,delay,toValue,fields)}))}var seriesDataItem=this.seriesDataItem;if(seriesDataItem){seriesDataItem.bullets.each((function(key,value){value.hide();value.preventShow=true}))}return _super.prototype.hide.call(this,duration,delay,toValue,fields)};TreeMapDataItem.prototype.show=function(duration,delay,fields){this.setWorkingValue("value",this.values.value.value);if(this.children){this.children.each((function(child){child.show(duration,delay,fields)}))}var seriesDataItem=this.seriesDataItem;if(seriesDataItem){seriesDataItem.bullets.each((function(key,value){value.preventShow=false}))}return _super.prototype.show.call(this,duration,delay,fields)};return TreeMapDataItem}(XYChartDataItem);var TreeMap=function(_super){__extends(TreeMap,_super);function TreeMap(){var _this=_super.call(this)||this;_this.layoutAlgorithm=_this.squarify;_this.zoomable=true;_this.className="TreeMap";_this._usesData=true;_this.maxLevels=2;_this.currentLevel=0;_this.hideParentColumns=false;_this.colors=new ColorSet;_this.sorting="descending";var xAxis=_this.xAxes.push(new ValueAxis);xAxis.title.disabled=true;xAxis.strictMinMax=true;var xRenderer=xAxis.renderer;xRenderer.inside=true;xRenderer.labels.template.disabled=true;xRenderer.ticks.template.disabled=true;xRenderer.grid.template.disabled=true;xRenderer.axisFills.template.disabled=true;xRenderer.minGridDistance=100;xRenderer.line.disabled=true;xRenderer.baseGrid.disabled=true;var yAxis=_this.yAxes.push(new ValueAxis);yAxis.title.disabled=true;yAxis.strictMinMax=true;var yRenderer=yAxis.renderer;yRenderer.inside=true;yRenderer.labels.template.disabled=true;yRenderer.ticks.template.disabled=true;yRenderer.grid.template.disabled=true;yRenderer.axisFills.template.disabled=true;yRenderer.minGridDistance=100;yRenderer.line.disabled=true;yRenderer.baseGrid.disabled=true;yRenderer.inversed=true;_this.xAxis=xAxis;_this.yAxis=yAxis;var template=new TreeMapSeries;_this.seriesTemplates=new DictionaryTemplate(template);template.virtualParent=_this;_this._disposers.push(new DictionaryDisposer(_this.seriesTemplates));_this._disposers.push(template);_this.zoomOutButton.events.on("hit",(function(){_this.zoomToChartDataItem(_this._homeDataItem)}),undefined,false);_this.seriesTemplates.events.on("insertKey",(function(event){event.newValue.isTemplate=true}),undefined,false);_this.applyTheme();return _this}Object.defineProperty(TreeMap.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(navigationBar){var _this=this;if(this._navigationBar!=navigationBar){this._navigationBar=navigationBar;navigationBar.parent=this;navigationBar.toBack();navigationBar.links.template.events.on("hit",(function(event){var dataItem=event.target.dataItem.dataContext;if(!dataItem.isDisposed()){_this.zoomToChartDataItem(dataItem);_this.createTreeSeries(dataItem)}}),undefined,true);this._disposers.push(navigationBar)}},enumerable:true,configurable:true});TreeMap.prototype.validateData=function(){this.series.clear();this._tempSeries=[];_super.prototype.validateData.call(this);if(this._homeDataItem){this._homeDataItem.dispose()}var homeDataItem=this.dataItems.template.clone();this._homeDataItem=homeDataItem;each(this.dataItems.iterator(),(function(dataItem){dataItem.parent=homeDataItem}));homeDataItem.children=this.dataItems;homeDataItem.x0=0;homeDataItem.y0=0;homeDataItem.name=this._homeText;var maxX=1e3;var maxY=Math.round(maxX*this.pixelHeight/this.pixelWidth/10)*10||1e3;homeDataItem.x1=maxX;homeDataItem.y1=maxY;this.xAxis.min=0;this.xAxis.max=maxX;this.xAxis.getMinMax();this.yAxis.min=0;this.yAxis.max=maxY;this.yAxis.getMinMax();this.layoutItems(homeDataItem);this.createTreeSeries(homeDataItem);this.feedLegend()};TreeMap.prototype.layoutItems=function(parent,sorting){if(parent){var children=parent.children;if(!sorting){sorting=this.sorting}if(sorting=="ascending"){children.values.sort((function(a,b){return a.value-b.value}))}if(sorting=="descending"){children.values.sort((function(a,b){return b.value-a.value}))}this._updateDataItemIndexes(0);this.layoutAlgorithm(parent);for(var i=0,len=children.length;i<len;i++){var node=children.getIndex(i);if(node.children){this.layoutItems(node)}}}};TreeMap.prototype.createTreeSeries=function(dataItem){var _this=this;this._tempSeries=[];var navigationData=[dataItem];var parentDataItem=dataItem.parent;while(parentDataItem!=undefined){this.initSeries(parentDataItem);navigationData.push(parentDataItem);parentDataItem=parentDataItem.parent}navigationData.reverse();if(this.navigationBar){this.navigationBar.data=navigationData}this.createTreeSeriesReal(dataItem);each$2(this._tempSeries,(function(series){if(_this.series.indexOf(series)==-1){_this.series.push(series)}series.zIndex=series.level}))};TreeMap.prototype.createTreeSeriesReal=function(dataItem){if(dataItem.children){var level=dataItem.level;if(level<this.currentLevel+this.maxLevels){this.initSeries(dataItem);for(var i=0;i<dataItem.children.length;i++){var child=dataItem.children.getIndex(i);if(child.children){this.createTreeSeriesReal(child)}}}}};TreeMap.prototype.setData=function(value){this.currentLevel=0;this.currentlyZoomed=undefined;this.xAxis.start=0;this.xAxis.end=1;this.yAxis.start=0;this.yAxis.end=1;_super.prototype.setData.call(this,value)};TreeMap.prototype.seriesAppeared=function(){return true};TreeMap.prototype.initSeries=function(dataItem){var _this=this;if(!dataItem.series){var series=void 0;var template=this.seriesTemplates.getKey(dataItem.level.toString());if(template){series=template.clone()}else{series=this.series.create()}series.dataItem.dataContext=dataItem;series.name=dataItem.name;series.parentDataItem=dataItem;dataItem.series=series;var level=dataItem.level;series.level=level;var dataContext=dataItem.dataContext;if(dataContext){series.config=dataContext.config}this.dataUsers.removeValue(series);series.data=dataItem.children.values;series.fill=dataItem.color;series.columnsContainer.hide(0);series.bulletsContainer.hide(0);series.columns.template.adapter.add("fill",(function(fill,target){var dataItem=target.dataItem;if(dataItem){var treeMapDataItem=dataItem.treeMapDataItem;if(treeMapDataItem){target.fill=treeMapDataItem.color;target.adapter.remove("fill");return treeMapDataItem.color}}}));if(this.zoomable&&(dataItem.level>this.currentLevel||dataItem.children&&dataItem.children.length>0)){series.columns.template.cursorOverStyle=MouseCursorStyle.pointer;if(this.zoomable){series.columns.template.events.on("hit",(function(event){var seriesDataItem=event.target.dataItem;if(dataItem.level>_this.currentLevel){_this.zoomToChartDataItem(seriesDataItem.treeMapDataItem.parent)}else{_this.zoomToSeriesDataItem(seriesDataItem)}}),this,undefined)}}}this._tempSeries.push(dataItem.series)};TreeMap.prototype.toggleBullets=function(duration){var _this=this;each(this.series.iterator(),(function(series){if(_this._tempSeries.indexOf(series)==-1){series.columnsContainer.hide();series.bulletsContainer.hide(duration)}else{series.columnsContainer.show();series.bulletsContainer.show(duration);series.dataItems.each((function(dataItem){dataItem.bullets.each((function(key,bullet){bullet.show()}))}));if(series.level<_this.currentLevel){if(_this.hideParentColumns){series.columnsContainer.hide()}series.bulletsContainer.hide(duration)}else if(series.level==_this.currentLevel){if(_this.maxLevels>1){series.dataItems.each((function(dataItem){if(dataItem.treeMapDataItem.children){dataItem.bullets.each((function(key,bullet){bullet.hide()}))}}))}}}}))};TreeMap.prototype.zoomToSeriesDataItem=function(dataItem){this.zoomToChartDataItem(dataItem.treeMapDataItem)};TreeMap.prototype.zoomToChartDataItem=function(dataItem){var _this=this;if(!dataItem){dataItem=this._homeDataItem}var zoomOutButton=this.zoomOutButton;if(zoomOutButton){if(dataItem!=this._homeDataItem){zoomOutButton.show()}else{zoomOutButton.hide()}}if(dataItem&&dataItem.children){this.xAxis.zoomToValues(dataItem.x0,dataItem.x1);this.yAxis.zoomToValues(dataItem.y0,dataItem.y1);this.currentLevel=dataItem.level;this.currentlyZoomed=dataItem;this.createTreeSeries(dataItem);var rangeChangeAnimation=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;if(rangeChangeAnimation&&!rangeChangeAnimation.isDisposed()&&!rangeChangeAnimation.isFinished()){this._dataDisposers.push(rangeChangeAnimation);rangeChangeAnimation.events.once("animationended",(function(){_this.toggleBullets()}))}else{this.toggleBullets()}}};TreeMap.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("TreeMap chart")}};TreeMap.prototype.createDataItem=function(){return new TreeMapDataItem};Object.defineProperty(TreeMap.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(value){this.setPropertyValue("maxLevels",value,true)},enumerable:true,configurable:true});Object.defineProperty(TreeMap.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(value){this.setPropertyValue("currentLevel",value,true)},enumerable:true,configurable:true});Object.defineProperty(TreeMap.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(value){this.setPropertyValue("hideParentColumns",value)},enumerable:true,configurable:true});Object.defineProperty(TreeMap.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(value){this.setPropertyValue("sorting",value,true)},enumerable:true,configurable:true});TreeMap.prototype.createSeries=function(){return new TreeMapSeries};Object.defineProperty(TreeMap.prototype,"homeText",{get:function(){return this._homeText},set:function(value){this._homeText=value;if(this._homeDataItem){this._homeDataItem.name=this._homeText}},enumerable:true,configurable:true});TreeMap.prototype.processConfig=function(config){if(config){if(hasValue(config["layoutAlgorithm"])&&isString$1(config["layoutAlgorithm"])){switch(config["layoutAlgorithm"]){case"squarify":config["layoutAlgorithm"]=this.squarify;break;case"binaryTree":config["layoutAlgorithm"]=this.binaryTree;break;case"slice":config["layoutAlgorithm"]=this.slice;break;case"dice":config["layoutAlgorithm"]=this.dice;break;case"sliceDice":config["layoutAlgorithm"]=this.sliceDice;break;default:delete config["layoutAlgorithm"];break}}if(hasValue(config.navigationBar)&&!hasValue(config.navigationBar.type)){config.navigationBar.type="NavigationBar"}_super.prototype.processConfig.call(this,config)}};TreeMap.prototype.validateLayout=function(){_super.prototype.validateLayout.call(this);this.layoutItems(this.currentlyZoomed)};TreeMap.prototype.validateDataItems=function(){_super.prototype.validateDataItems.call(this);this.layoutItems(this._homeDataItem);each(this.series.iterator(),(function(series){series.validateRawData()}));this.zoomToChartDataItem(this._homeDataItem)};TreeMap.prototype.binaryTree=function(parent){var nodes=parent.children,i,n=nodes.length,sum,sums=new Array(n+1);for(sums[0]=sum=i=0;i<n;++i){sums[i+1]=sum+=nodes.getIndex(i).value}if(n>0){partition(0,n,parent.value,parent.x0,parent.y0,parent.x1,parent.y1)}function partition(i,j,value,x0,y0,x1,y1){if(i>=j-1){var node=nodes.getIndex(i);node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1;return}var valueOffset=sums[i],valueTarget=value/2+valueOffset,k=i+1,hi=j-1;while(k<hi){var mid=k+hi>>>1;if(sums[mid]<valueTarget){k=mid+1}else{hi=mid}}if(valueTarget-sums[k-1]<sums[k]-valueTarget&&i+1<k){--k}var valueLeft=sums[k]-valueOffset,valueRight=value-valueLeft;if(value==0){var node=nodes.getIndex(i);node.x0=x0;node.y0=y0;node.x1=x1;node.y1=y1;return}if(x1-x0>y1-y0){var xk=(x0*valueRight+x1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,xk,y1);partition(k,j,valueRight,xk,y0,x1,y1)}else{var yk=(y0*valueRight+y1*valueLeft)/value;partition(i,k,valueLeft,x0,y0,x1,yk);partition(k,j,valueRight,x0,yk,x1,y1)}}};TreeMap.prototype.slice=function(parent){var x0=parent.x0;var x1=parent.x1;var y0=parent.y0;var y1=parent.y1;var nodes=parent.children;var node;var i=-1;var n=nodes.length;var k=parent.value&&(y1-y0)/parent.value;while(++i<n){node=nodes.getIndex(i);node.x0=x0;node.x1=x1;node.y0=y0;y0+=node.value*k;node.y1=y0}};TreeMap.prototype.dice=function(parent){var x0=parent.x0;var x1=parent.x1;var y0=parent.y0;var y1=parent.y1;var nodes=parent.children,node,i=-1,n=nodes.length,k=parent.value&&(x1-x0)/parent.value;while(++i<n){node=nodes.getIndex(i);node.y0=y0;node.y1=y1;node.x0=x0;x0+=node.value*k;node.x1=x0}};TreeMap.prototype.sliceDice=function(parent){if(parent.level&1){this.slice(parent)}else{this.dice(parent)}};TreeMap.prototype.squarify=function(parent){var ratio=(1+Math.sqrt(5))/2;var x0=parent.x0;var x1=parent.x1;var y0=parent.y0;var y1=parent.y1;var nodes=parent.children;var nodeValue;var i0=0;var i1=0;var n=nodes.length;var dx;var dy;var value=parent.value;var sumValue;var minValue;var maxValue;var newRatio;var minRatio;var alpha;var beta;while(i0<n){dx=x1-x0;dy=y1-y0;do{sumValue=nodes.getIndex(i1++).value}while(!sumValue&&i1<n);minValue=maxValue=sumValue;alpha=Math.max(dy/dx,dx/dy)/(value*ratio);beta=sumValue*sumValue*alpha;minRatio=Math.max(maxValue/beta,beta/minValue);for(;i1<n;++i1){sumValue+=nodeValue=nodes.getIndex(i1).value;if(nodeValue<minValue){minValue=nodeValue}if(nodeValue>maxValue){maxValue=nodeValue}beta=sumValue*sumValue*alpha;newRatio=Math.max(maxValue/beta,beta/minValue);if(newRatio>minRatio){sumValue-=nodeValue;break}minRatio=newRatio}var row=this.dataItems.template.clone();row.value=sumValue;row.dice=dx<dy;row.children=nodes.slice(i0,i1);row.x0=x0;row.y0=y0;row.x1=x1;row.y1=y1;if(row.dice){row.y1=value?y0+=dy*sumValue/value:y1;this.dice(row)}else{row.x1=value?x0+=dx*sumValue/value:x1;this.slice(row)}value-=sumValue;i0=i1}};TreeMap.prototype.handleSeriesAdded2=function(){};TreeMap.prototype.handleDataItemValueChange=function(dataItem,name){if(name=="value"){this.invalidateDataItems()}};TreeMap.prototype.handleDataItemWorkingValueChange=function(dataItem,name){if(name=="value"){this.invalidateDataItems()}};TreeMap.prototype.getLegendLevel=function(dataItem){if(!dataItem){return}if(!dataItem.children){return}if(dataItem.children.length>1){return dataItem}else if(dataItem.children.length==1){var child=dataItem.children.getIndex(0);if(child.children){return this.getLegendLevel(child)}else{return dataItem}}else{return dataItem}};TreeMap.prototype.handleLegendSeriesAdded=function(series){};Object.defineProperty(TreeMap.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:true,configurable:true});TreeMap.prototype.feedLegend=function(){var legend=this.legend;if(legend){legend.dataFields.name="name";var legendParent=this.getLegendLevel(this._homeDataItem);if(legendParent){var legendData_1=[];legendParent.children.each((function(dataItem){legendData_1.push(dataItem)}));legend.data=legendData_1}}};TreeMap.prototype.disposeData=function(){_super.prototype.disposeData.call(this);this._homeDataItem=undefined;this.series.clear();if(this.navigationBar){this.navigationBar.disposeData()}this.xAxis.disposeData();this.yAxis.disposeData()};TreeMap.prototype.getExporting=function(){var _this=this;var exporting=_super.prototype.getExporting.call(this);exporting.adapter.add("formatDataFields",(function(info){if(info.format=="csv"||info.format=="xlsx"){if(hasValue(_this.dataFields.children)){delete info.dataFields[_this.dataFields.children]}}return info}));return exporting};return TreeMap}(XYChart);registry.registeredClasses["TreeMap"]=TreeMap;var AxisRendererX3D=function(_super){__extends(AxisRendererX3D,_super);function AxisRendererX3D(){var _this=_super.call(this)||this;_this._chart=new MutableValueDisposer;_this.className="AxisRendererX3D";_this._disposers.push(_this._chart);_this.applyTheme();return _this}AxisRendererX3D.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);if(grid.element){var dx=this.chart.dx3D||0;var dy=this.chart.dy3D||0;var h=this.getHeight();grid.path=moveTo({x:dx,y:dy})+lineTo({x:dx,y:h+dy})+lineTo({x:0,y:h})}this.positionItem(grid,point);this.toggleVisibility(grid,position,0,1)};AxisRendererX3D.prototype.updateBaseGridElement=function(){_super.prototype.updateBaseGridElement.call(this);var h=this.getHeight();var dx=this.chart.dx3D||0;var dy=this.chart.dy3D||0;this.baseGrid.path=moveTo({x:dx,y:dy})+lineTo({x:0,y:0})+lineTo({x:0,y:h})};Object.defineProperty(AxisRendererX3D.prototype,"chart",{get:function(){return this._chart.get()},set:function(chart){if(chart){this._chart.set(chart,chart.events.on("propertychanged",this.handle3DChanged,this,false))}},enumerable:true,configurable:true});AxisRendererX3D.prototype.handle3DChanged=function(event){if(event.property=="depth"||event.property=="angle"){this.invalidate()}};return AxisRendererX3D}(AxisRendererX);registry.registeredClasses["AxisRendererX3D"]=AxisRendererX3D;var AxisRendererY3D=function(_super){__extends(AxisRendererY3D,_super);function AxisRendererY3D(){var _this=_super.call(this)||this;_this._chart=new MutableValueDisposer;_this.className="AxisRendererY3D";_this._disposers.push(_this._chart);_this.applyTheme();return _this}AxisRendererY3D.prototype.updateGridElement=function(grid,position,endPosition){position=position+(endPosition-position)*grid.location;var point=this.positionToPoint(position);if(grid.element){var dx=this.chart.dx3D||0;var dy=this.chart.dy3D||0;var w=this.getWidth();grid.path=moveTo({x:0,y:0})+lineTo({x:dx,y:dy})+lineTo({x:w+dx,y:dy})}this.positionItem(grid,point);this.toggleVisibility(grid,position,0,1)};AxisRendererY3D.prototype.updateBaseGridElement=function(){_super.prototype.updateBaseGridElement.call(this);var dx=this.chart.dx3D||0;var dy=this.chart.dy3D||0;var w=this.getWidth();this.baseGrid.path=moveTo({x:0,y:0})+lineTo({x:w,y:0})+lineTo({x:w+dx,y:dy})};Object.defineProperty(AxisRendererY3D.prototype,"chart",{get:function(){return this._chart.get()},set:function(chart){if(chart){this._chart.set(chart,chart.events.on("propertychanged",this.handle3DChanged,this,false))}},enumerable:true,configurable:true});AxisRendererY3D.prototype.handle3DChanged=function(event){if(event.property=="depth"||event.property=="angle"){this.invalidate()}};return AxisRendererY3D}(AxisRendererY);var Column3D=function(_super){__extends(Column3D,_super);function Column3D(){var _this=_super.call(this)||this;_this.className="Column3D";return _this}Column3D.prototype.createAssets=function(){this.column3D=this.createChild(Rectangle3D);this.column3D.shouldClone=false;this.column3D.strokeOpacity=0;this.column=this.column3D};Column3D.prototype.validate=function(){_super.prototype.validate.call(this);if(this.column3D){this.column3D.width=this.pixelWidth;this.column3D.height=this.pixelHeight;if(this.column3D.invalid){this.column3D.validate()}}};Column3D.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.column3D){this.column3D.copyFrom(source.column3D)}};Column3D.prototype.setFill=function(value){_super.prototype.setFill.call(this,value);this.column.fill=value};return Column3D}(Column);registry.registeredClasses["Column3D"]=Column3D;var ColumnSeries3DDataItem=function(_super){__extends(ColumnSeries3DDataItem,_super);function ColumnSeries3DDataItem(){var _this=_super.call(this)||this;_this.className="ColumnSeries3DDataItem";_this.applyTheme();return _this}return ColumnSeries3DDataItem}(ColumnSeriesDataItem);var ColumnSeries3D=function(_super){__extends(ColumnSeries3D,_super);function ColumnSeries3D(){var _this=_super.call(this)||this;_this.className="ColumnSeries3D";_this.columns.template.column3D.applyOnClones=true;_this.columns.template.hiddenState.properties.visible=true;_this.applyTheme();return _this}Object.defineProperty(ColumnSeries3D.prototype,"columnsContainer",{get:function(){var chart=this.chart;if(chart&&chart.columnsContainer&&chart.leftAxesContainer.layout!="vertical"&&chart.rightAxesContainer.layout!="vertical"&&chart.bottomAxesContainer.layout!="horizontal"&&chart.topAxesContainer.layout!="horizontal"){return chart.columnsContainer}else{return this._columnsContainer}},enumerable:true,configurable:true});ColumnSeries3D.prototype.validateDataElementReal=function(dataItem){_super.prototype.validateDataElementReal.call(this,dataItem);if(dataItem.column){dataItem.column.dx=this.dx;dataItem.column.dy=this.dy;dataItem.column.visible=this.visible}};ColumnSeries3D.prototype.validateDataElements=function(){_super.prototype.validateDataElements.call(this);if(this.chart){this.chart.invalidateLayout()}};ColumnSeries3D.prototype.createColumnTemplate=function(){return new Column3D};Object.defineProperty(ColumnSeries3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(value){this.setPropertyValue("depth",value,true);var template=this.columns.template;template.column3D.depth=value},enumerable:true,configurable:true});Object.defineProperty(ColumnSeries3D.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){this.setPropertyValue("angle",value);var template=this.columns.template;template.column3D.angle=value},enumerable:true,configurable:true});return ColumnSeries3D}(ColumnSeries);registry.registeredClasses["ColumnSeries3D"]=ColumnSeries3D;registry.registeredClasses["ColumnSeries3DDataItem"]=ColumnSeries3DDataItem;(function(_super){__extends(XYChart3DDataItem,_super);function XYChart3DDataItem(){var _this=_super.call(this)||this;_this.className="XYChart3DDataItem";_this.applyTheme();return _this}return XYChart3DDataItem})(XYChartDataItem);var XYChart3D=function(_super){__extends(XYChart3D,_super);function XYChart3D(){var _this=_super.call(this)||this;_this._axisRendererX=AxisRendererX3D;_this._axisRendererY=AxisRendererY3D;_this.className="XYChart3D";_this.depth=30;_this.angle=30;var columnsContainer=_this.seriesContainer.createChild(Container);columnsContainer.shouldClone=false;columnsContainer.isMeasured=false;columnsContainer.layout="none";_this.columnsContainer=columnsContainer;_this.columnsContainer.mask=_this.createChild(Sprite);_this.applyTheme();return _this}XYChart3D.prototype.updateSeriesMasks=function(){_super.prototype.updateSeriesMasks.call(this);if(isIE()){var columnsContainer=this.columnsContainer;var mask=columnsContainer.mask;columnsContainer.mask=undefined;columnsContainer.mask=mask}};Object.defineProperty(XYChart3D.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(value){this.setPropertyValue("depth",value);this.fixLayout();this.invalidateDataUsers()},enumerable:true,configurable:true});Object.defineProperty(XYChart3D.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(value){this.setPropertyValue("angle",value);this.fixLayout();this.invalidateDataUsers()},enumerable:true,configurable:true});Object.defineProperty(XYChart3D.prototype,"dx3D",{get:function(){return cos(this.angle)*this.depth},enumerable:true,configurable:true});Object.defineProperty(XYChart3D.prototype,"dy3D",{get:function(){return-sin(this.angle)*this.depth},enumerable:true,configurable:true});XYChart3D.prototype.validateLayout=function(){_super.prototype.validateLayout.call(this);this.fixColumns()};XYChart3D.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D;this.chartContainer.paddingRight=this.dx3D;if(this.scrollbarX){this.scrollbarX.dy=this.dy3D;this.scrollbarX.dx=this.dx3D}if(this.scrollbarY){this.scrollbarY.dy=this.dy3D;this.scrollbarY.dx=this.dx3D}this.fixColumns();_super.prototype.fixLayout.call(this)};XYChart3D.prototype.fixColumns=function(){var _this=this;var count=1;var i=0;each(this.series.iterator(),(function(series){if(series instanceof ColumnSeries3D){if(!series.clustered&&i>0){count++}series.depthIndex=count-1;i++}}));var s=0;each(this.series.iterator(),(function(series){if(series instanceof ColumnSeries3D){series.depth=_this.depth/count;series.angle=_this.angle;if(series.columnsContainer==_this.columnsContainer){series.dx=_this.depth/count*cos(_this.angle)*series.depthIndex;series.dy=-_this.depth/count*sin(_this.angle)*series.depthIndex}var inversed_1=false;if(series.baseAxis==series.xAxis&&series.xAxis.renderer.inversed||series.baseAxis==series.yAxis&&series.yAxis.renderer.inversed){inversed_1=true}var i_1=1;series.dataItems.each((function(dataItem){var column=dataItem.column;if(column){if(inversed_1){column.zIndex=1e3*(1e3-i_1)+s-series.depthIndex*100}else{column.zIndex=1e3*i_1+s-series.depthIndex*100}}i_1++}));if(inversed_1){s--}else{s++}}}));this.maskColumns()};XYChart3D.prototype.processConfig=function(config){if(config){if(hasValue(config.series)&&isArray$6(config.series)){for(var i=0,len=config.series.length;i<len;i++){config.series[i].type=config.series[i].type||"ColumnSeries3D"}}}_super.prototype.processConfig.call(this,config)};XYChart3D.prototype.maskColumns=function(){var w=this.plotContainer.pixelWidth;var h=this.plotContainer.pixelHeight;var dx=this.dx3D;var dy=this.dy3D;var path=moveTo({x:0,y:0})+lineTo({x:dx,y:dy})+lineTo({x:w+dx,y:dy})+lineTo({x:w+dx,y:h+dy})+lineTo({x:w,y:h})+lineTo({x:w,y:h})+lineTo({x:0,y:h})+closePath();var columnsContainer=this.columnsContainer;if(columnsContainer&&columnsContainer.mask){columnsContainer.mask.path=path}};return XYChart3D}(XYChart);registry.registeredClasses["XYChart3D"]=XYChart3D;var HeatLegend=function(_super){__extends(HeatLegend,_super);function HeatLegend(){var _this=_super.call(this)||this;_this.className="HeatLegend";_this.markerContainer=_this.createChild(Container);_this.markerContainer.shouldClone=false;_this.markerCount=1;var marker=new RoundedRectangle;marker.minHeight=20;marker.minWidth=20;marker.interactionsEnabled=false;marker.fillOpacity=1;marker.cornerRadius(0,0,0,0);_this.markerContainer.minHeight=20;_this.markerContainer.minWidth=20;_this.orientation="horizontal";_this.markers=new ListTemplate(marker);_this._disposers.push(new ListDisposer(_this.markers));_this._disposers.push(_this.markers.template);_this.applyTheme();return _this}HeatLegend.prototype.getMinFromRules=function(property){var series=this.series;if(series){var minValue_1;eachContinue(series.heatRules.iterator(),(function(heatRule){if(heatRule.property==property){minValue_1=heatRule.min;return false}return true}));return minValue_1}};HeatLegend.prototype.getMaxFromRules=function(property){var series=this.series;if(series){var maxValue_1;each(series.heatRules.iterator(),(function(heatRule){if(heatRule.property==property){maxValue_1=heatRule.max;return false}return true}));return maxValue_1}};HeatLegend.prototype.validate=function(){_super.prototype.validate.call(this);this.valueAxis.renderer.inversed=this.reverseOrder;var series=this.series;var minColor=this.minColor;var maxColor=this.maxColor;if(!hasValue(minColor)){minColor=toColor(this.getMinFromRules("fill"))}if(!hasValue(maxColor)){maxColor=toColor(this.getMaxFromRules("fill"))}if(series){var seriesFill=series.fill;if(!hasValue(minColor)&&seriesFill instanceof Color){minColor=seriesFill}if(!hasValue(maxColor)&&seriesFill instanceof Color){maxColor=seriesFill}}if(!hasValue(maxColor)){maxColor=toColor(this.getMaxFromRules("fill"))}var minOpacity=toNumber$1(this.getMinFromRules("fillOpacity"));if(!isNumber$1(minOpacity)){minOpacity=1}var maxOpacity=toNumber$1(this.getMaxFromRules("fillOpacity"));if(!isNumber$1(maxOpacity)){maxOpacity=1}var minStrokeOpacity=toNumber$1(this.getMinFromRules("strokeOpacity"));if(!isNumber$1(minStrokeOpacity)){minStrokeOpacity=1}var maxStrokeOpacity=toNumber$1(this.getMaxFromRules("strokeOpacity"));if(!isNumber$1(maxStrokeOpacity)){maxStrokeOpacity=1}var minStroke=toColor(this.getMinFromRules("stroke"));var maxStroke=toColor(this.getMaxFromRules("stroke"));for(var i=0;i<this.markerCount;i++){var marker=this.markers.getIndex(i);if(!marker){marker=this.markers.create();marker.parent=this.markerContainer;marker.height=percent(100);marker.width=percent(100)}if(this.markerCount==1){var gradient=new LinearGradient;if(this.reverseOrder){gradient.addColor(maxColor,maxOpacity);gradient.addColor(minColor,minOpacity)}else{gradient.addColor(minColor,minOpacity);gradient.addColor(maxColor,maxOpacity)}if(this.orientation=="vertical"){gradient.rotation=-90}marker.fill=gradient;if(hasValue(minStroke)&&hasValue(maxStroke)){var strokeGradient=new LinearGradient;if(this.reverseOrder){strokeGradient.addColor(maxStroke,maxStrokeOpacity);strokeGradient.addColor(minStroke,minStrokeOpacity)}else{strokeGradient.addColor(minStroke,minStrokeOpacity);strokeGradient.addColor(maxStroke,maxStrokeOpacity)}if(this.orientation=="vertical"){strokeGradient.rotation=-90}marker.stroke=strokeGradient}}else{var c=i;if(this.reverseOrder){c=this.markerCount-i-1}var color=new Color(interpolate(minColor.rgb,maxColor.rgb,c/this.markerCount));marker.fill=color;var opacity=minOpacity+(maxOpacity-minOpacity)*c/this.markerCount;marker.fillOpacity=opacity;if(hasValue(minStroke)&&hasValue(maxStroke)){var color_1=new Color(interpolate(minStroke.rgb,maxStroke.rgb,c/this.markerCount));marker.stroke=color_1;var opacity_1=minStrokeOpacity+(maxStrokeOpacity-minStrokeOpacity)*c/this.markerCount;marker.strokeOpacity=opacity_1}}}var renderer=this.valueAxis.renderer;if(this.markerCount>1){if(this.orientation=="horizontal"){renderer.minGridDistance=this.measuredWidth/this.markerCount}else{renderer.minGridDistance=this.measuredHeight/this.markerCount}}this.valueAxis.invalidate();for(var i=this.markerCount,len=this.markers.length;i<len;i++){this.markers.getIndex(i).parent=undefined}};Object.defineProperty(HeatLegend.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(value){if(!(value instanceof Color)){value=toColor(value)}this.setColorProperty("minColor",value,true)},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(value){if(!(value instanceof Color)){value=toColor(value)}this.setColorProperty("maxColor",value,true)},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(value){this.setPropertyValue("markerCount",value,true)},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(value){this.setPropertyValue("minValue",value);this.valueAxis.min=value},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(value){this.setPropertyValue("maxValue",value);this.valueAxis.max=value},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){this.setPropertyValue("orientation",value,true);var markerContainer=this.markerContainer;var valueAxis=this.valueAxis;if(value=="horizontal"){if(!hasValue(this.width)){this.width=200}this.height=undefined;valueAxis.width=percent(100);valueAxis.height=undefined;valueAxis.tooltip.pointerOrientation="vertical";this.layout="vertical";markerContainer.width=percent(100);markerContainer.height=undefined;if(!(valueAxis.renderer instanceof AxisRendererX)){valueAxis.renderer=new AxisRendererX}}else{if(!hasValue(this.height)){this.height=200}this.width=undefined;this.layout="horizontal";markerContainer.width=undefined;markerContainer.height=percent(100);valueAxis.height=percent(100);valueAxis.width=undefined;valueAxis.tooltip.pointerOrientation="horizontal";if(!(valueAxis.renderer instanceof AxisRendererY)){valueAxis.renderer=new AxisRendererY}valueAxis.renderer.inside=true;valueAxis.renderer.labels.template.inside=true;this.markerContainer.reverseOrder=true}var renderer=valueAxis.renderer;renderer.grid.template.disabled=true;renderer.axisFills.template.disabled=true;renderer.baseGrid.disabled=true;renderer.labels.template.padding(2,3,2,3);renderer.minHeight=undefined;renderer.minWidth=undefined;this.markerContainer.layout=value},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"valueAxis",{get:function(){if(!this._valueAxis){this.valueAxis=this.createChild(ValueAxis);this.valueAxis.shouldClone=false}return this._valueAxis},set:function(valueAxis){this._valueAxis=valueAxis;valueAxis.parent=this;valueAxis.strictMinMax=true;this.orientation=this.orientation},enumerable:true,configurable:true});Object.defineProperty(HeatLegend.prototype,"series",{get:function(){return this._series},set:function(series){var _this=this;this._series=series;var dataField="value";try{var dataFieldDefined=series.heatRules.getIndex(0).dataField;if(dataFieldDefined){dataField=dataFieldDefined}}catch(err){}this.updateMinMax(series.dataItem.values[dataField].low,series.dataItem.values[dataField].high);series.dataItem.events.on("calculatedvaluechanged",(function(event){_this.updateMinMax(series.dataItem.values[dataField].low,series.dataItem.values[dataField].high)}),undefined,false);series.heatRules.events.on("inserted",this.invalidate,this,false);series.heatRules.events.on("removed",this.invalidate,this,false)},enumerable:true,configurable:true});HeatLegend.prototype.updateMinMax=function(min,max){var valueAxis=this.valueAxis;if(!isNumber$1(this.minValue)){valueAxis.min=min;valueAxis.invalidate()}if(!isNumber$1(this.maxValue)){valueAxis.max=max;valueAxis.invalidate()}};HeatLegend.prototype.processConfig=function(config){if(config){if(hasValue(config.series)&&isString$1(config.series)){if(isString$1(config.series)){if(this.map.hasKey(config.series)){config.series=this.map.getKey(config.series)}else{var seriesId_1=config.series;var disposer_1=this.map.events.on("insertKey",(function(ev){if(ev.key==seriesId_1){this.series=ev.newValue;disposer_1.dispose()}}),this);this._disposers.push(disposer_1);delete config.series}}}}_super.prototype.processConfig.call(this,config)};return HeatLegend}(Container);registry.registeredClasses["HeatLegend"]=HeatLegend;var Candlestick=function(_super){__extends(Candlestick,_super);function Candlestick(){var _this=_super.call(this)||this;_this.className="Candlestick";_this.layout="none";return _this}Candlestick.prototype.createAssets=function(){_super.prototype.createAssets.call(this);this.lowLine=this.createChild(Line);this.lowLine.shouldClone=false;this.highLine=this.createChild(Line);this.highLine.shouldClone=false};Candlestick.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.lowLine){this.lowLine.copyFrom(source.lowLine)}if(this.highLine){this.highLine.copyFrom(source.highLine)}};return Candlestick}(Column);registry.registeredClasses["Candlestick"]=Candlestick;var CandlestickSeriesDataItem=function(_super){__extends(CandlestickSeriesDataItem,_super);function CandlestickSeriesDataItem(){var _this=_super.call(this)||this;_this.values.lowValueX={};_this.values.lowValueY={};_this.values.highValueX={};_this.values.highValueY={};_this.className="CandlestickSeriesDataItem";_this.applyTheme();return _this}Object.defineProperty(CandlestickSeriesDataItem.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(value){this.setValue("lowValueX",value)},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeriesDataItem.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(value){this.setValue("lowValueY",value)},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeriesDataItem.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(value){this.setValue("highValueX",value)},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeriesDataItem.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(value){this.setValue("highValueY",value)},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeriesDataItem.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(value){this.setValue("valueX",value)},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeriesDataItem.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(value){this.setValue("valueY",value)},enumerable:true,configurable:true});return CandlestickSeriesDataItem}(ColumnSeriesDataItem);var CandlestickSeries=function(_super){__extends(CandlestickSeries,_super);function CandlestickSeries(){var _this=_super.call(this)||this;_this.className="CandlestickSeries";_this.groupFields.lowValueX="low";_this.groupFields.lowValueY="low";_this.groupFields.highValueX="high";_this.groupFields.highValueY="high";_this.strokeOpacity=1;var interfaceColors=new InterfaceColorSet;var positiveColor=interfaceColors.getFor("positive");var negativeColor=interfaceColors.getFor("negative");_this.dropFromOpenState.properties.fill=negativeColor;_this.dropFromOpenState.properties.stroke=negativeColor;_this.riseFromOpenState.properties.fill=positiveColor;_this.riseFromOpenState.properties.stroke=positiveColor;_this.applyTheme();return _this}CandlestickSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Candlestick Series")}};CandlestickSeries.prototype.createDataItem=function(){return new CandlestickSeriesDataItem};CandlestickSeries.prototype.validateDataElementReal=function(dataItem){_super.prototype.validateDataElementReal.call(this,dataItem);this.validateCandlestick(dataItem)};CandlestickSeries.prototype.validateCandlestick=function(dataItem){var column=dataItem.column;if(column){var lowLine_1=column.lowLine;var highLine_1=column.highLine;if(this.baseAxis==this.xAxis){var x=column.pixelWidth/2;lowLine_1.x=x;highLine_1.x=x;var open_1=dataItem.getWorkingValue(this.yOpenField);var close_1=dataItem.getWorkingValue(this.yField);var yOpen=this.yAxis.getY(dataItem,this.yOpenField);var yClose=this.yAxis.getY(dataItem,this.yField);var yLow=this.yAxis.getY(dataItem,this.yLowField);var yHigh=this.yAxis.getY(dataItem,this.yHighField);var pixelY=column.pixelY;lowLine_1.y1=yLow-pixelY;highLine_1.y1=yHigh-pixelY;if(open_1<close_1){lowLine_1.y2=yOpen-pixelY;highLine_1.y2=yClose-pixelY}else{lowLine_1.y2=yClose-pixelY;highLine_1.y2=yOpen-pixelY}}if(this.baseAxis==this.yAxis){var y=column.pixelHeight/2;lowLine_1.y=y;highLine_1.y=y;var open_2=dataItem.getWorkingValue(this.xOpenField);var close_2=dataItem.getWorkingValue(this.xField);var xOpen=this.xAxis.getX(dataItem,this.xOpenField);var xClose=this.xAxis.getX(dataItem,this.xField);var xLow=this.xAxis.getX(dataItem,this.xLowField);var xHigh=this.xAxis.getX(dataItem,this.xHighField);var pixelX=column.pixelX;lowLine_1.x1=xLow-pixelX;highLine_1.x1=xHigh-pixelX;if(open_2<close_2){lowLine_1.x2=xOpen-pixelX;highLine_1.x2=xClose-pixelX}else{lowLine_1.x2=xClose-pixelX;highLine_1.x2=xOpen-pixelX}}each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(rangeColumn){var rangeLowLine=rangeColumn.lowLine;rangeLowLine.x=lowLine_1.x;rangeLowLine.y=lowLine_1.y;rangeLowLine.x1=lowLine_1.x1;rangeLowLine.x2=lowLine_1.x2;rangeLowLine.y1=lowLine_1.y1;rangeLowLine.y2=lowLine_1.y2;var rangehighLine=rangeColumn.highLine;rangehighLine.x=highLine_1.x;rangehighLine.y=highLine_1.y;rangehighLine.x1=highLine_1.x1;rangehighLine.x2=highLine_1.x2;rangehighLine.y1=highLine_1.y1;rangehighLine.y2=highLine_1.y2}}))}};Object.defineProperty(CandlestickSeries.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeries.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeries.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:true,configurable:true});Object.defineProperty(CandlestickSeries.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:true,configurable:true});CandlestickSeries.prototype.defineFields=function(){_super.prototype.defineFields.call(this);var xAxis=this.xAxis;var yAxis=this.yAxis;if(xAxis&&yAxis){if(this.baseAxis==xAxis){var yAxisFieldName=capitalize(yAxis.axisFieldName);this._yLowField="low"+yAxisFieldName+"Y";this._yHighField="high"+yAxisFieldName+"Y"}if(this.baseAxis==yAxis){var xAxisFieldName=capitalize(xAxis.axisFieldName);this._xLowField="low"+xAxisFieldName+"X";this._xHighField="high"+xAxisFieldName+"X"}this.addValueField(xAxis,this._xValueFields,this._xLowField);this.addValueField(xAxis,this._xValueFields,this._xHighField);this.addValueField(yAxis,this._yValueFields,this._yLowField);this.addValueField(yAxis,this._yValueFields,this._yHighField)}};CandlestickSeries.prototype.createLegendMarker=function(marker){var w=marker.pixelWidth;var h=marker.pixelHeight;marker.removeChildren();var column=marker.createChild(Candlestick);column.shouldClone=false;column.copyFrom(this.columns.template);var cw;var ch;var highLine=column.lowLine;var lowLine=column.highLine;if(this.baseAxis==this.yAxis){cw=w/3;ch=h;highLine.y=h/2;lowLine.y=h/2;highLine.x2=w/3;lowLine.x2=w/3;lowLine.x=w/3*2;column.column.x=w/3}else{cw=w;ch=h/3;highLine.x=w/2;lowLine.x=w/2;highLine.y2=h/3;lowLine.y2=h/3;lowLine.y=h/3*2;column.column.y=h/3}column.width=cw;column.height=ch;copyProperties$1(this,marker,visualProperties);copyProperties$1(this.columns.template,column,visualProperties);column.stroke=this.riseFromOpenState.properties.stroke;column.fill=column.stroke;var legendDataItem=marker.dataItem;legendDataItem.color=column.fill;legendDataItem.colorOrig=column.fill};CandlestickSeries.prototype.createColumnTemplate=function(){return new Candlestick};return CandlestickSeries}(ColumnSeries);registry.registeredClasses["CandlestickSeries"]=CandlestickSeries;registry.registeredClasses["CandlestickSeriesDataItem"]=CandlestickSeriesDataItem;var OHLC=function(_super){__extends(OHLC,_super);function OHLC(){var _this=_super.call(this)||this;_this.className="OHLC";_this.layout="none";return _this}OHLC.prototype.createAssets=function(){this.openLine=this.createChild(Line);this.openLine.shouldClone=false;this.highLowLine=this.createChild(Line);this.highLowLine.shouldClone=false;this.closeLine=this.createChild(Line);this.closeLine.shouldClone=false};OHLC.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.openLine){this.openLine.copyFrom(source.openLine)}if(this.highLowLine){this.highLowLine.copyFrom(source.highLowLine)}if(this.closeLine){this.closeLine.copyFrom(source.closeLine)}};return OHLC}(Candlestick);registry.registeredClasses["OHLC"]=OHLC;var OHLCSeriesDataItem=function(_super){__extends(OHLCSeriesDataItem,_super);function OHLCSeriesDataItem(){var _this=_super.call(this)||this;_this.className="OHLCSeriesDataItem";_this.applyTheme();return _this}return OHLCSeriesDataItem}(CandlestickSeriesDataItem);var OHLCSeries=function(_super){__extends(OHLCSeries,_super);function OHLCSeries(){var _this=_super.call(this)||this;_this.className="OHLCSeries";_this.applyTheme();return _this}OHLCSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("OHLC Series")}};OHLCSeries.prototype.createDataItem=function(){return new OHLCSeriesDataItem};OHLCSeries.prototype.validateCandlestick=function(dataItem){var column=dataItem.column;if(column){var openLine_1=column.openLine;var highLowLine_1=column.highLowLine;var closeLine_1=column.closeLine;if(this.baseAxis==this.xAxis){var x=column.pixelWidth/2;highLowLine_1.x=x;dataItem.getWorkingValue(this.yOpenField);dataItem.getWorkingValue(this.yField);var yOpen=this.yAxis.getY(dataItem,this.yOpenField);var yClose=this.yAxis.getY(dataItem,this.yField);var yLow=this.yAxis.getY(dataItem,this.yLowField);var yHigh=this.yAxis.getY(dataItem,this.yHighField);var pixelY=column.pixelY;openLine_1.y1=yOpen-pixelY;openLine_1.y2=yOpen-pixelY;openLine_1.x1=0;openLine_1.x2=x;closeLine_1.y1=yClose-pixelY;closeLine_1.y2=yClose-pixelY;closeLine_1.x1=x;closeLine_1.x2=2*x;highLowLine_1.y1=yHigh-pixelY;highLowLine_1.y2=yLow-pixelY}if(this.baseAxis==this.yAxis){var y=column.pixelHeight/2;highLowLine_1.y=y;dataItem.getWorkingValue(this.xOpenField);dataItem.getWorkingValue(this.xField);var xOpen=this.xAxis.getX(dataItem,this.xOpenField);var xClose=this.xAxis.getX(dataItem,this.xField);var xLow=this.xAxis.getX(dataItem,this.xLowField);var xHigh=this.xAxis.getX(dataItem,this.xHighField);var pixelX=column.pixelX;openLine_1.x1=xOpen-pixelX;openLine_1.x2=xOpen-pixelX;openLine_1.y1=y;openLine_1.y2=2*y;closeLine_1.x1=xClose-pixelX;closeLine_1.x2=xClose-pixelX;closeLine_1.y1=0;closeLine_1.y2=y;highLowLine_1.x1=xHigh-pixelX;highLowLine_1.x2=xLow-pixelX}each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(rangeColumn){var rangeOpenLine=rangeColumn.openLine;rangeOpenLine.x=openLine_1.x;rangeOpenLine.y=openLine_1.y;rangeOpenLine.x1=openLine_1.x1;rangeOpenLine.x2=openLine_1.x2;rangeOpenLine.y1=openLine_1.y1;rangeOpenLine.y2=openLine_1.y2;var rangeCloseLine=rangeColumn.closeLine;rangeCloseLine.x=closeLine_1.x;rangeCloseLine.y=closeLine_1.y;rangeCloseLine.x1=closeLine_1.x1;rangeCloseLine.x2=closeLine_1.x2;rangeCloseLine.y1=closeLine_1.y1;rangeCloseLine.y2=closeLine_1.y2;var rangeHighLowLine=rangeColumn.highLowLine;rangeHighLowLine.x=highLowLine_1.x;rangeHighLowLine.y=highLowLine_1.y;rangeHighLowLine.x1=highLowLine_1.x1;rangeHighLowLine.x2=highLowLine_1.x2;rangeHighLowLine.y1=highLowLine_1.y1;rangeHighLowLine.y2=highLowLine_1.y2}}))}};OHLCSeries.prototype.createLegendMarker=function(marker){var w=marker.pixelWidth;var h=marker.pixelHeight;marker.removeChildren();var column=marker.createChild(OHLC);column.shouldClone=false;column.copyFrom(this.columns.template);var cw;var ch;var openLine=column.openLine;var closeLine=column.closeLine;var highLowLine=column.highLowLine;if(this.baseAxis==this.yAxis){cw=w/3;ch=h;highLowLine.y=h/2;highLowLine.x2=w;openLine.x=w/3*2;openLine.y2=h/2;closeLine.x=w/3;closeLine.y2=h;closeLine.y1=h/2}else{cw=w;ch=h/3;highLowLine.x=w/2;highLowLine.y2=h;openLine.y=h/3*2;openLine.x2=w/2;closeLine.y=h/3;closeLine.x2=w;closeLine.x1=w/2}column.width=cw;column.height=ch;copyProperties$1(this,marker,visualProperties);copyProperties$1(this.columns.template,column,visualProperties);column.stroke=this.riseFromOpenState.properties.stroke;var legendDataItem=marker.dataItem;legendDataItem.color=column.stroke;legendDataItem.colorOrig=column.stroke};OHLCSeries.prototype.createColumnTemplate=function(){return new OHLC};return OHLCSeries}(CandlestickSeries);registry.registeredClasses["OHLCSeries"]=OHLCSeries;registry.registeredClasses["OHLCSeriesDataItem"]=OHLCSeriesDataItem;var StepLineSeriesSegment=function(_super){__extends(StepLineSeriesSegment,_super);function StepLineSeriesSegment(){var _this=_super.call(this)||this;_this.className="StepLineSeriesSegment";return _this}StepLineSeriesSegment.prototype.drawSegment=function(points,closePoints,smoothnessX,smoothnessY,noRisers,vertical){if(points.length>0&&closePoints.length>0){if(noRisers){var path=moveTo(points[0]);if(points.length>0){for(var i=1;i<points.length;i++){var point=points[i];if(i/2==Math.round(i/2)){path+=moveTo(point)}else{path+=lineTo(point)}}}this.strokeSprite.path=path;if(this.fillOpacity>0||this.fillSprite.fillOpacity>0){path=moveTo(points[0])+polyline(points);path+=lineTo(closePoints[0])+polyline(closePoints);path+=lineTo(points[0]);path+=closePath();this.fillSprite.path=path}}else{var path=moveTo(points[0])+polyline(points);this.strokeSprite.path=path;if(this.fillOpacity>0||this.fillSprite.fillOpacity>0){path+=lineTo(closePoints[0])+polyline(closePoints);path+=lineTo(points[0]);path+=closePath();this.fillSprite.path=path}}}else{this.strokeSprite.path="";this.fillSprite.path=""}};return StepLineSeriesSegment}(LineSeriesSegment);registry.registeredClasses["StepLineSeriesSegment"]=StepLineSeriesSegment;var StepLineSeriesDataItem=function(_super){__extends(StepLineSeriesDataItem,_super);function StepLineSeriesDataItem(){var _this=_super.call(this)||this;_this.className="StepLineSeriesDataItem";_this.applyTheme();return _this}return StepLineSeriesDataItem}(LineSeriesDataItem);var StepLineSeries=function(_super){__extends(StepLineSeries,_super);function StepLineSeries(){var _this=_super.call(this)||this;_this.className="StepLineSeries";_this.applyTheme();_this.startLocation=0;_this.endLocation=1;return _this}StepLineSeries.prototype.createDataItem=function(){return new StepLineSeriesDataItem};StepLineSeries.prototype.addPoints=function(points,dataItem,xField,yField,backwards){var startLocationX;var endLocationX;var startLocationY;var endLocationY;if(this.baseAxis==this.xAxis){startLocationX=this.startLocation;endLocationX=this.endLocation;startLocationY=this.getAdjustedXLocation(dataItem,this.yOpenField);endLocationY=this.getAdjustedXLocation(dataItem,this.yField)}if(this.baseAxis==this.yAxis){startLocationY=this.startLocation;endLocationY=this.endLocation;startLocationX=this.getAdjustedXLocation(dataItem,this.xOpenField);endLocationX=this.getAdjustedXLocation(dataItem,this.xField)}var x0=this.xAxis.getX(dataItem,xField,startLocationX);var y0=this.yAxis.getY(dataItem,yField,startLocationY);var x1=this.xAxis.getX(dataItem,xField,endLocationX);var y1=this.yAxis.getY(dataItem,yField,endLocationY);x0=fitToRange(x0,-1e5,1e5);y0=fitToRange(y0,-1e5,1e5);x1=fitToRange(x1,-1e5,1e5);y1=fitToRange(y1,-1e5,1e5);if(!this.noRisers){if(points.length>1){var prevPoint=points[points.length-1];if(this.baseAxis==this.xAxis){if(backwards){points.push({x:prevPoint.x,y:y1})}else{points.push({x:x0,y:prevPoint.y})}}if(this.baseAxis==this.yAxis){if(backwards){points.push({x:x1,y:prevPoint.y})}else{points.push({x:prevPoint.x,y:y0})}}}}var point0={x:x0,y:y0};var point1={x:x1,y:y1};if(backwards){points.push(point1,point0)}else{points.push(point0,point1)}};StepLineSeries.prototype.drawSegment=function(segment,points,closePoints){var vertical=false;if(this.yAxis==this.baseAxis){vertical=true}segment.drawSegment(points,closePoints,this.tensionX,this.tensionY,this.noRisers,vertical)};StepLineSeries.prototype.createSegment=function(){return new StepLineSeriesSegment};Object.defineProperty(StepLineSeries.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(value){this.setPropertyValue("noRisers",value,true)},enumerable:true,configurable:true});Object.defineProperty(StepLineSeries.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(value){this.setPropertyValue("startLocation",value,true)},enumerable:true,configurable:true});Object.defineProperty(StepLineSeries.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(value){this.setPropertyValue("endLocation",value,true)},enumerable:true,configurable:true});return StepLineSeries}(LineSeries);registry.registeredClasses["StepLineSeries"]=StepLineSeries;registry.registeredClasses["StepLineSeriesDataItem"]=StepLineSeriesDataItem;var RadarColumn=function(_super){__extends(RadarColumn,_super);function RadarColumn(){var _this=_super.call(this)||this;_this.className="RadarColumn";return _this}RadarColumn.prototype.createAssets=function(){this.radarColumn=this.createChild(Slice);this.radarColumn.shouldClone=false;this.radarColumn.strokeOpacity=undefined;this.column=this.radarColumn};RadarColumn.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.radarColumn){this.radarColumn.copyFrom(source.radarColumn)}};RadarColumn.prototype.getTooltipX=function(){var value=this.getPropertyValue("tooltipX");if(!isNumber$1(value)){return this.radarColumn.getTooltipX()}return value};RadarColumn.prototype.getTooltipY=function(){var value=this.getPropertyValue("tooltipX");if(!isNumber$1(value)){return this.radarColumn.getTooltipY()}return value};return RadarColumn}(Column);registry.registeredClasses["RadarColumn"]=RadarColumn;var RadarColumnSeriesDataItem=function(_super){__extends(RadarColumnSeriesDataItem,_super);function RadarColumnSeriesDataItem(){var _this=_super.call(this)||this;_this.className="ColumnSeriesDataItem";_this.applyTheme();return _this}return RadarColumnSeriesDataItem}(ColumnSeriesDataItem);var RadarColumnSeries=function(_super){__extends(RadarColumnSeries,_super);function RadarColumnSeries(){var _this=_super.call(this)||this;_this.className="RadarColumnSeries";_this.applyTheme();return _this}RadarColumnSeries.prototype.createColumnTemplate=function(){return new RadarColumn};RadarColumnSeries.prototype.validate=function(){if(this.chart.invalid){this.chart.validate()}_super.prototype.validate.call(this)};RadarColumnSeries.prototype.disableUnusedColumns=function(dataItem){if(dataItem){if(dataItem.column){dataItem.column.__disabled=true}each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(rangeColumn){rangeColumn.__disabled=true}}))}};RadarColumnSeries.prototype.validateDataElementReal=function(dataItem){var _this=this;var startAngle=this.chart.startAngle;var endAngle=this.chart.endAngle;var yField=this.yField;var yOpenField=this.yOpenField;var xField=this.xField;var xOpenField=this.xOpenField;var lAngle;var rAngle;var tRadius;var bRadius;var startLocation=this.getStartLocation(dataItem);var endLocation=this.getEndLocation(dataItem);var cellAngle=(endAngle-startAngle)/(this.dataItems.length*(this.end-this.start));var radarColumn=dataItem.column;if(!radarColumn){radarColumn=this.columns.create();dataItem.column=radarColumn;copyProperties$1(this,radarColumn,visualProperties);copyProperties$1(this.columns.template,radarColumn,visualProperties);dataItem.addSprite(radarColumn);radarColumn.paper=this.paper;this.setColumnStates(radarColumn)}var width=radarColumn.width;var percentWidth=100;if(width instanceof Percent){percentWidth=width.percent}var offset=round$1((endLocation-startLocation)*(1-percentWidth/100)/2,5);startLocation+=offset;endLocation-=offset;if(this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis){tRadius=getDistance({x:this.yAxis.getX(dataItem,yField,0,"valueY"),y:this.yAxis.getY(dataItem,yField,0,"valueY")});bRadius=getDistance({x:this.yAxis.getX(dataItem,yOpenField,1,"valueY"),y:this.yAxis.getY(dataItem,yOpenField,1,"valueY")});lAngle=this.xAxis.getAngle(dataItem,xOpenField,0,"valueX");rAngle=this.xAxis.getAngle(dataItem,xField,1,"valueX");startAngle=startAngle+startLocation*cellAngle;endAngle=endAngle-(1-endLocation)*cellAngle}else if(this.baseAxis==this.xAxis){tRadius=getDistance({x:this.yAxis.getX(dataItem,yField,dataItem.locations[yField],"valueY"),y:this.yAxis.getY(dataItem,yField,dataItem.locations[yField],"valueY")});bRadius=getDistance({x:this.yAxis.getX(dataItem,yOpenField,dataItem.locations[yOpenField],"valueY"),y:this.yAxis.getY(dataItem,yOpenField,dataItem.locations[yOpenField],"valueY")});lAngle=this.xAxis.getAngle(dataItem,xOpenField,startLocation,"valueX");rAngle=this.xAxis.getAngle(dataItem,xField,endLocation,"valueX");startAngle=startAngle+startLocation*cellAngle;endAngle=endAngle-(1-endLocation)*cellAngle}else{tRadius=getDistance({x:this.yAxis.getX(dataItem,yField,startLocation,"valueY"),y:this.yAxis.getY(dataItem,yField,startLocation,"valueY")});bRadius=getDistance({x:this.yAxis.getX(dataItem,yOpenField,endLocation,"valueY"),y:this.yAxis.getY(dataItem,yOpenField,endLocation,"valueY")});if(isNumber$1(width)){var abs=Math.abs(tRadius-bRadius);if(abs>width){var d=(abs-width)/2;tRadius+=d;bRadius-=d}}lAngle=this.xAxis.getAngle(dataItem,xField,dataItem.locations[xField],"valueX");rAngle=this.xAxis.getAngle(dataItem,xOpenField,dataItem.locations[xOpenField],"valueX")}if(rAngle<lAngle){var temp=rAngle;rAngle=lAngle;lAngle=temp}lAngle=fitToRange(lAngle,startAngle,endAngle);rAngle=fitToRange(rAngle,startAngle,endAngle);var slice=radarColumn.radarColumn;slice.startAngle=lAngle;var arc=rAngle-lAngle;if(arc>0){slice.arc=arc;slice.radius=tRadius;slice.innerRadius=bRadius;radarColumn.__disabled=false;radarColumn.parent=this.columnsContainer;each(this.axisRanges.iterator(),(function(axisRange){var rangeColumn=dataItem.rangesColumns.getKey(axisRange.uid);if(!rangeColumn){rangeColumn=_this.columns.create();forceCopyProperties(_this.columns.template,rangeColumn,visualProperties);copyProperties$1(axisRange.contents,rangeColumn,visualProperties);if(rangeColumn.dataItem){remove(rangeColumn.dataItem.sprites,rangeColumn)}dataItem.addSprite(rangeColumn);rangeColumn.paper=_this.paper;_this.setColumnStates(rangeColumn);dataItem.rangesColumns.setKey(axisRange.uid,rangeColumn)}var slice=rangeColumn.radarColumn;slice.startAngle=lAngle;slice.arc=arc;slice.radius=tRadius;slice.innerRadius=bRadius;if(slice.invalid){slice.paper=_this.paper;slice.validate()}rangeColumn.__disabled=false;rangeColumn.parent=axisRange.contents}))}else{this.disableUnusedColumns(dataItem)}};RadarColumnSeries.prototype.getPoint=function(dataItem,xKey,yKey,locationX,locationY,stackKeyX,stackKeyY){if(!stackKeyX){stackKeyX="valueX"}if(!stackKeyY){stackKeyY="valueY"}var x=this.yAxis.getX(dataItem,yKey,locationY,stackKeyY);var y=this.yAxis.getY(dataItem,yKey,locationY,stackKeyY);var radius=getDistance({x,y});if(radius==0){radius=1e-5}var angle=this.xAxis.getAngle(dataItem,xKey,locationX,stackKeyX);return{x:radius*cos(angle),y:radius*sin(angle)}};RadarColumnSeries.prototype.getMaskPath=function(){var renderer=this.yAxis.renderer;return arc(renderer.startAngle,renderer.endAngle-renderer.startAngle,renderer.pixelRadius,renderer.pixelInnerRadius)};RadarColumnSeries.prototype.positionBulletReal=function(bullet,positionX,positionY){var xAxis=this.xAxis;var yAxis=this.yAxis;if(positionX<xAxis.start||positionX>xAxis.end||positionY<yAxis.start||positionY>yAxis.end){bullet.visible=false}bullet.moveTo(this.xAxis.renderer.positionToPoint(positionX,positionY))};RadarColumnSeries.prototype.setXAxis=function(axis){_super.prototype.setXAxis.call(this,axis);this.updateRendererRefs()};RadarColumnSeries.prototype.setYAxis=function(axis){_super.prototype.setYAxis.call(this,axis);this.updateRendererRefs()};RadarColumnSeries.prototype.updateRendererRefs=function(){var rendererX=this.xAxis.renderer;var rendererY=this.yAxis.renderer;rendererX.axisRendererY=rendererY};return RadarColumnSeries}(ColumnSeries);registry.registeredClasses["RadarColumnSeries"]=RadarColumnSeries;registry.registeredClasses["RadarColumnSeriesDataItem"]=RadarColumnSeriesDataItem;var FunnelSlice=function(_super){__extends(FunnelSlice,_super);function FunnelSlice(){var _this=_super.call(this)||this;_this.slice=_this.createChild(Sprite);_this.slice.shouldClone=false;_this.slice.setElement(_this.paper.add("path"));_this.slice.isMeasured=false;_this.orientation="vertical";_this.bottomWidth=percent(100);_this.topWidth=percent(100);_this.isMeasured=false;_this.width=10;_this.height=10;_this.expandDistance=0;_this.className="FunnelSlice";_this.applyTheme();return _this}FunnelSlice.prototype.draw=function(){_super.prototype.draw.call(this);var pt=this.pixelPaddingTop;var pb=this.pixelPaddingBottom;var pr=this.pixelPaddingRight;var pl=this.pixelPaddingLeft;var w=this.pixelWidth-pr-pl;var h=this.pixelHeight-pt-pb;var ed=this.expandDistance;var path="";if(this.orientation=="vertical"){var tw=relativeToValue(this.topWidth,w);var bw=relativeToValue(this.bottomWidth,w);var tl={x:(w-tw)/2+pl,y:pt};var tr={x:(w+tw)/2+pl,y:pt};var br={x:(w+bw)/2+pl,y:pt+h};var bl={x:(w-bw)/2+pl,y:pt+h};var cpr={x:tr.x+(br.x-tr.x)/2+ed*h,y:tr.y+.5*h};var cpl={x:tl.x+(bl.x-tl.x)/2-ed*h,y:tl.y+.5*h};var qp1=lineTo(br);var qp2=lineTo(tl);if(ed!=0){qp1=quadraticCurveTo(br,cpr);qp2=quadraticCurveTo(tl,cpl)}path=moveTo(tl)+lineTo(tr)+qp1+lineTo(bl)+qp2;this.tickPoint={x:tr.x+(br.x-tr.x)/2,y:tr.y+(br.y-tr.y)/2}}else{var tw=relativeToValue(this.topWidth,h);var bw=relativeToValue(this.bottomWidth,h);var tt={x:pl,y:(h-tw)/2+pt};var tb={x:pl,y:(h+tw)/2+pt};var bt={x:pl+w,y:(h-bw)/2+pt};var bb={x:pl+w,y:(h+bw)/2+pt};var cpr={y:tt.y+(bt.y-tt.y)/2-ed*w,x:tt.x+.5*w};var cpl={y:tb.y+(bb.y-tb.y)/2+ed*w,x:tb.x+.5*w};var qp1=lineTo(bt);var qp2=lineTo(tb);if(ed!=0){qp1=quadraticCurveTo(bt,cpr);qp2=quadraticCurveTo(tb,cpl)}path=moveTo(tb)+lineTo(tt)+qp1+lineTo(bb)+qp2;this.tickPoint={y:tb.y+(bb.y-tb.y)/2,x:tb.x+(bb.x-tb.x)/2}}this.slice.path=path;this.invalidateLayout()};FunnelSlice.prototype.getPoint=function(locationX,locationY){var pt=this.pixelPaddingTop;var pb=this.pixelPaddingBottom;var pr=this.pixelPaddingRight;var pl=this.pixelPaddingLeft;var w=this.pixelWidth-pr-pl;var h=this.pixelHeight-pt-pb;if(this.orientation=="vertical"){var tw=relativeToValue(this.topWidth,w);var bw=relativeToValue(this.bottomWidth,w);var tl={x:(w-tw)/2+pl,y:pt};var tr={x:(w+tw)/2+pl,y:pt};var br={x:(w+bw)/2+pl,y:pt+h};var bl={x:(w-bw)/2+pl,y:pt+h};var mlx=tl.x+(bl.x-tl.x)*locationY;var mrx=tr.x+(br.x-tr.x)*locationY;return{x:mlx+(mrx-mlx)*locationX,y:tr.y+(br.y-tr.y)*locationY}}else{var tw=relativeToValue(this.topWidth,h);var bw=relativeToValue(this.bottomWidth,h);var tt={x:pl,y:(h-tw)/2+pt};var tb={x:pl,y:(h+tw)/2+pt};var bt={x:pl+w,y:(h-bw)/2+pt};var bb={x:pl+w,y:(h+bw)/2+pt};var mty=tt.y+(bt.y-tt.y)*locationX;var mby=tb.y+(bb.y-tb.y)*locationX;return{y:mty+(mby-mty)*locationY,x:tt.x+(bt.x-tt.x)*locationX}}};Object.defineProperty(FunnelSlice.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(value){this.setPercentProperty("bottomWidth",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(FunnelSlice.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(value){this.setPercentProperty("topWidth",value,true,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(FunnelSlice.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){this.setPropertyValue("orientation",value,true)},enumerable:true,configurable:true});Object.defineProperty(FunnelSlice.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(value){this.setPropertyValue("expandDistance",value,true)},enumerable:true,configurable:true});FunnelSlice.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.slice){this.slice.copyFrom(source.slice)}};return FunnelSlice}(Container);registry.registeredClasses["FunnelSlice"]=FunnelSlice;var FunnelTick=function(_super){__extends(FunnelTick,_super);function FunnelTick(){var _this=_super.call(this)||this;_this._label=new MutableValueDisposer;_this._slice=new MutableValueDisposer;_this.className="FunnelTick";_this.element=_this.paper.add("path");_this._disposers.push(_this._label);_this._disposers.push(_this._slice);_this.setPropertyValue("locationX",0);_this.setPropertyValue("locationY",0);_this.applyTheme();return _this}FunnelTick.prototype.draw=function(){_super.prototype.draw.call(this);var slice=this.slice;var point=slice.getPoint(this.locationX,this.locationY);if(point){var label=this.label;var series=slice.dataItem.component;var p0=void 0;var p1=void 0;var p2=void 0;if(series.orientation=="vertical"){var x1=label.pixelX;var y1=label.pixelY;if(!series.labelsOpposite){x1+=label.maxRight}p0=spritePointToSprite(point,slice,this.parent);p2=spritePointToSprite({x:x1,y:y1},label.parent,this.parent);p1={x:label.parent.pixelX-this.length,y:p2.y};if(!series.labelsOpposite){p1.x=label.parent.measuredWidth+this.length}}else{var x1=label.pixelX;var y1=label.pixelY;if(!series.labelsOpposite){y1+=label.maxBottom}p0=spritePointToSprite(point,slice,this.parent);p2=spritePointToSprite({x:x1,y:y1},label.parent,this.parent);p1={x:p2.x,y:label.parent.pixelY-this.length};if(!series.labelsOpposite){p1.y=label.parent.measuredHeight+this.length}}this.path=moveTo(p0)+lineTo(p1)+lineTo(p2)}};Object.defineProperty(FunnelTick.prototype,"slice",{get:function(){return this._slice.get()},set:function(slice){this._slice.set(slice,new MultiDisposer([slice.events.on("transformed",this.invalidate,this,false),slice.events.on("validated",this.invalidate,this,false)]))},enumerable:true,configurable:true});Object.defineProperty(FunnelTick.prototype,"label",{get:function(){return this._label.get()},set:function(label){this._label.set(label,label.events.on("transformed",this.invalidate,this,false))},enumerable:true,configurable:true});Object.defineProperty(FunnelTick.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(value){this.setPropertyValue("locationX",value,false,true)},enumerable:true,configurable:true});Object.defineProperty(FunnelTick.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(value){this.setPropertyValue("locationY",value,false,true)},enumerable:true,configurable:true});return FunnelTick}(Tick);registry.registeredClasses["FunnelTick"]=FunnelTick;var FunnelSeriesDataItem=function(_super){__extends(FunnelSeriesDataItem,_super);function FunnelSeriesDataItem(){var _this=_super.call(this)||this;_this.className="FunnelSeriesDataItem";_this.events.on("visibilitychanged",(function(){if(_this.component){_this.component.invalidateDataItems()}}),_this,false);_this.applyTheme();return _this}Object.defineProperty(FunnelSeriesDataItem.prototype,"sliceLink",{get:function(){var _this=this;if(!this._sliceLink){var sliceLink_1=this.component.sliceLinks.create();this._sliceLink=sliceLink_1;this._disposers.push(sliceLink_1);sliceLink_1.parent=this.component.slicesContainer;this._disposers.push(new Disposer((function(){if(_this.component){_this.component.sliceLinks.removeValue(sliceLink_1)}})));this.addSprite(sliceLink_1);sliceLink_1.visible=this.visible}return this._sliceLink},enumerable:true,configurable:true});return FunnelSeriesDataItem}(PercentSeriesDataItem);var FunnelSeries=function(_super){__extends(FunnelSeries,_super);function FunnelSeries(){var _this=_super.call(this)||this;_this._nextY=0;_this.className="FunnelSeries";_this.orientation="vertical";_this.width=percent(100);_this.height=percent(100);_this.slicesContainer.width=percent(100);_this.slicesContainer.height=percent(100);_this._disposers.push(_this.slicesContainer.events.on("maxsizechanged",_this.invalidateDataItems,_this,false));_this.labelsOpposite=true;_this.labelsContainer.layout="absolute";_this.bottomRatio=0;_this.applyTheme();return _this}FunnelSeries.prototype.createSlice=function(){return new FunnelSlice};FunnelSeries.prototype.createTick=function(){return new FunnelTick};FunnelSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Funnel Series")}};FunnelSeries.prototype.createDataItem=function(){return new FunnelSeriesDataItem};FunnelSeries.prototype.initSlice=function(slice){slice.isMeasured=false;slice.defaultState.properties.scale=1;slice.observe("scale",this.handleSliceScale,this);slice.observe(["dx","dy","x","y"],this.handleSliceMove,this);slice.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var hoverState=slice.states.create("hover");hoverState.properties.expandDistance=.2};FunnelSeries.prototype.initLabel=function(label){_super.prototype.initLabel.call(this,label);label.verticalCenter="middle";label.horizontalCenter="middle";label.isMeasured=true;label.padding(5,5,5,5)};FunnelSeries.prototype.validate=function(){_super.prototype.validate.call(this);this._nextY=0};FunnelSeries.prototype.validateDataElements=function(){var _this=this;var slicesContainer=this.slicesContainer;var labelsContainer=this.labelsContainer;var labelTemplate=this.labels.template;if(this.alignLabels){labelTemplate.interactionsEnabled=true;slicesContainer.isMeasured=true;labelsContainer.isMeasured=true}else{labelTemplate.interactionsEnabled=false;slicesContainer.isMeasured=false;labelsContainer.isMeasured=false}var total=0;var count=0;this.dataItems.each((function(dItem){if(hasValue(dItem.value)){count++;if(dItem.value>0){total+=Math.abs(dItem.getWorkingValue("value")/dItem.value)}else{if(_this.ignoreZeroValues){count--}else{if(!dItem.visible||dItem.__disabled||dItem.isHiding){count--}else{total+=1}}}}}));this._total=1/count*total;this._count=count;_super.prototype.validateDataElements.call(this);this.arrangeLabels()};FunnelSeries.prototype.getNextValue=function(dataItem){var index=dataItem.index;var nextValue=dataItem.getWorkingValue("value");if(index<this.dataItems.length-1){var nextItem=this.dataItems.getIndex(index+1);nextValue=nextItem.getWorkingValue("value");if(!nextItem.visible||nextItem.isHiding||nextItem.__disabled||nextItem.value==0&&this.ignoreZeroValues){return this.getNextValue(nextItem)}}return nextValue};FunnelSeries.prototype.formDataElement=function(){};FunnelSeries.prototype.validateDataElement=function(dataItem){var _this=this;var slice=dataItem.slice;slice.orientation=this.orientation;var sliceLink=dataItem.sliceLink;sliceLink.orientation=this.orientation;var tick=dataItem.tick;var label=dataItem.label;tick.slice=slice;tick.label=label;if(hasValue(dataItem.value)){this.decorateSlice(dataItem);each$2(dataItem.sprites,(function(sprite){if(dataItem.value==0&&_this.ignoreZeroValues){sprite.__disabled=true}else{sprite.__disabled=false}}))}else{each$2(dataItem.sprites,(function(sprite){sprite.__disabled=true}))}if(dataItem.index==this.dataItems.length-1){sliceLink.disabled=true}_super.prototype.validateDataElement.call(this,dataItem);sliceLink.fill=slice.fill};FunnelSeries.prototype.decorateSlice=function(dataItem){var slice=dataItem.slice;var sliceLink=dataItem.sliceLink;var label=dataItem.label;var tick=dataItem.tick;var maxWidth=this.slicesContainer.innerWidth;var maxHeight=this.slicesContainer.innerHeight;var nextValue=this.getNextValue(dataItem);var workingValue=Math.abs(dataItem.getWorkingValue("value"));var bottomRatio=this.bottomRatio;var d=1;if(dataItem.value!=0){d=workingValue/Math.abs(dataItem.value)}else{if(dataItem.__disabled||dataItem.isHiding||!dataItem.visible){d=1e-6}}if(this.ignoreZeroValues&&dataItem.value==0){dataItem.__disabled=true;return}else{dataItem.__disabled=false}if(this._nextY==Infinity){this._nextY=0}if(this.orientation=="vertical"){var linkHeight=sliceLink.pixelHeight*d;maxHeight=maxHeight+linkHeight;slice.topWidth=workingValue/this.dataItem.values.value.high*maxWidth;slice.bottomWidth=(workingValue-(workingValue-nextValue)*bottomRatio)/this.dataItem.values.value.high*maxWidth;sliceLink.topWidth=slice.bottomWidth;sliceLink.bottomWidth=(workingValue-(workingValue-nextValue))/this.dataItem.values.value.high*maxWidth;slice.y=this._nextY;slice.height=Math.min(1e5,max$2(0,maxHeight/this._count*d/this._total-linkHeight));slice.x=maxWidth/2;if(!this.alignLabels){label.x=slice.x}else{label.x=undefined}label.y=slice.pixelY+slice.pixelHeight*tick.locationY;this._nextY+=slice.pixelHeight+linkHeight;sliceLink.y=this._nextY-linkHeight;sliceLink.x=slice.x}else{var linkWidth=sliceLink.pixelWidth*d;maxWidth=maxWidth+linkWidth;slice.topWidth=workingValue/this.dataItem.values.value.high*maxHeight;slice.bottomWidth=(workingValue-(workingValue-nextValue)*bottomRatio)/this.dataItem.values.value.high*maxHeight;sliceLink.topWidth=slice.bottomWidth;sliceLink.bottomWidth=(workingValue-(workingValue-nextValue))/this.dataItem.values.value.high*maxHeight;slice.x=this._nextY;slice.width=Math.min(1e5,maxWidth/this._count*d*1/this._total-linkWidth);slice.y=maxHeight/2;if(!this.alignLabels){label.y=slice.y}else{label.y=this.labelsContainer.measuredHeight}label.x=slice.pixelX+slice.pixelWidth*tick.locationX;this._nextY+=slice.pixelWidth+linkWidth;sliceLink.x=this._nextY-linkWidth;sliceLink.y=slice.y}};FunnelSeries.prototype.getLastLabel=function(index){if(index>0){var lastLabel=this.labels.getIndex(index);if(lastLabel.__disabled||!lastLabel.visible){return this.getLastLabel(index-1)}else{return lastLabel}}};FunnelSeries.prototype.arrangeLabels=function(){if(this.alignLabels){var count=this.labels.length;if(count>1){var lastLabel=this.getLastLabel(count-1);if(lastLabel){var lastY=lastLabel.pixelY;var lastX=lastLabel.pixelX;if(count>1){for(var i=count-2;i>=0;i--){var label=this.labels.getIndex(i);if(label.visible&&!label.__disabled){if(label.invalid){label.validate()}if(this.orientation=="vertical"){if(label.pixelY+label.measuredHeight>lastY){label.y=Math.min(1e6,lastY-label.measuredHeight)}}else{if(label.pixelX+label.measuredWidth>lastX){label.x=Math.min(1e6,lastX-label.measuredWidth)}}lastY=label.pixelY;lastX=label.pixelX}}lastY=0;lastX=0;for(var i=0;i<count;i++){var label=this.labels.getIndex(i);if(label.visible&&!label.__disabled){if(label.invalid){label.validate()}if(this.orientation=="vertical"){if(label.pixelY<lastY){label.y=Math.min(1e6,lastY)}}else{if(label.pixelX<lastX){label.x=Math.min(1e6,lastX)}}lastY+=label.measuredHeight;lastX+=label.measuredWidth}}}}}}};FunnelSeries.prototype.positionBullet=function(bullet){_super.prototype.positionBullet.call(this,bullet);var dataItem=bullet.dataItem;var slice=dataItem.slice;var locationX=bullet.locationX;if(!isNumber$1(locationX)){locationX=.5}var locationY=bullet.locationY;if(!isNumber$1(locationY)){locationY=1}bullet.x=slice.pixelX+slice.measuredWidth*locationX;bullet.y=slice.pixelY+slice.measuredHeight*locationY};Object.defineProperty(FunnelSeries.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){if(this.setPropertyValue("orientation",value)){this.labelsOpposite=this.labelsOpposite;this.invalidate();if(value=="vertical"){this.ticks.template.locationX=1;this.ticks.template.locationY=.5;this.labels.template.rotation=0;this.layout="horizontal"}else{this.ticks.template.locationX=.5;this.ticks.template.locationY=1;this.labels.template.rotation=-90;this.layout="vertical"}}},enumerable:true,configurable:true});Object.defineProperty(FunnelSeries.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(value){if(this.setPropertyValue("bottomRatio",value)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(FunnelSeries.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var sliceLink=new FunnelSlice;sliceLink.applyOnClones=true;sliceLink.fillOpacity=.5;sliceLink.expandDistance=-.3;sliceLink.hiddenState.properties.opacity=0;this._disposers.push(sliceLink);this._sliceLinks=new ListTemplate(sliceLink);this._disposers.push(new ListDisposer(this._sliceLinks))}return this._sliceLinks},enumerable:true,configurable:true});FunnelSeries.prototype.show=function(duration){var _this=this;var startIndex=this.startIndex;var endIndex=this.endIndex;var interpolationDuration=this.defaultState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}var delay=0;each(indexed(this.dataItems.iterator()),(function(a){var i=a[0];var dataItem=a[1];if(_this.sequencedInterpolation){delay=_this.sequencedInterpolationDelay*i+interpolationDuration*(i-startIndex)/(endIndex-startIndex)}dataItem.show(interpolationDuration,delay,["value"])}));var animation=_super.prototype.show.call(this,duration);return animation};FunnelSeries.prototype.hide=function(duration){var _this=this;var fields=["value"];var value=0;var startIndex=this.startIndex;var endIndex=this.endIndex;var delay=0;var interpolationDuration=this.hiddenState.transitionDuration;if(isNumber$1(duration)){interpolationDuration=duration}each(indexed(this.dataItems.iterator()),(function(a){var i=a[0];var dataItem=a[1];if(_this.sequencedInterpolation){delay=_this.sequencedInterpolationDelay*i+interpolationDuration*(i-startIndex)/(endIndex-startIndex)}dataItem.hide(interpolationDuration,delay,value,fields)}));var animation=_super.prototype.hide.call(this,duration);if(animation&&!animation.isFinished()){animation.delay(delay)}return animation};FunnelSeries.prototype.setAlignLabels=function(value){_super.prototype.setAlignLabels.call(this,value);this.ticks.template.disabled=!value;var labelsContainer=this.labelsContainer;if(labelsContainer){if(!value){labelsContainer.width=percent(100);labelsContainer.height=percent(100)}else{labelsContainer.height=undefined;labelsContainer.width=undefined;labelsContainer.margin(10,10,10,10)}}this.labelsOpposite=this.labelsOpposite};Object.defineProperty(FunnelSeries.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(value){this.setPropertyValue("labelsOpposite",value);var labelTemplate=this.labels.template;var labelAlign="none";var labelValign="none";if(!this.alignLabels){if(this.orientation=="vertical"){labelAlign="center"}else{labelValign="middle"}}else{if(value){this.labelsContainer.toFront();if(this.orientation=="vertical"){this.ticks.template.locationX=1;labelTemplate.horizontalCenter="left";labelAlign="right"}else{this.ticks.template.locationY=1;labelTemplate.horizontalCenter="right";labelValign="bottom"}}else{this.labelsContainer.toBack();if(this.orientation=="vertical"){this.ticks.template.locationX=0;labelAlign="left"}else{labelValign="top";this.ticks.template.locationY=0}}}labelTemplate.align=labelAlign;labelTemplate.valign=labelValign;this.validateLayout();this.ticks.each((function(tick){tick.invalidate()}));this.invalidateDataItems()},enumerable:true,configurable:true});return FunnelSeries}(PercentSeries);registry.registeredClasses["FunnelSeries"]=FunnelSeries;registry.registeredClasses["FunnelSeriesDataItem"]=FunnelSeriesDataItem;var PyramidSeriesDataItem=function(_super){__extends(PyramidSeriesDataItem,_super);function PyramidSeriesDataItem(){var _this=_super.call(this)||this;_this.className="PyramidSeriesDataItem";_this.applyTheme();return _this}return PyramidSeriesDataItem}(FunnelSeriesDataItem);var PyramidSeries=function(_super){__extends(PyramidSeries,_super);function PyramidSeries(){var _this=_super.call(this)||this;_this.className="PyramidSeries";_this.topWidth=percent(0);_this.bottomWidth=percent(100);_this.pyramidHeight=percent(100);_this.valueIs="area";_this.sliceLinks.template.width=0;_this.sliceLinks.template.height=0;_this.applyTheme();return _this}PyramidSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Pyramid Series")}};PyramidSeries.prototype.createDataItem=function(){return new PyramidSeriesDataItem};PyramidSeries.prototype.validate=function(){_super.prototype.validate.call(this);this._nextWidth=undefined};PyramidSeries.prototype.getNextValue=function(dataItem){var index=dataItem.index;var nextValue=dataItem.getWorkingValue("value");if(index<this.dataItems.length-1){var nextItem=this.dataItems.getIndex(index+1);nextValue=nextItem.getWorkingValue("value")}if(nextValue==0){nextValue=1e-6}return nextValue};PyramidSeries.prototype.validateDataElements=function(){var _this=this;var maxWidth=this.slicesContainer.innerWidth;var maxHeight=this.slicesContainer.innerHeight;this.dataItems.each((function(dataItem){if(dataItem.value>0){var relValue=dataItem.getWorkingValue("value")/dataItem.value;var sliceLink=dataItem.sliceLink;if(_this.orientation=="vertical"){maxHeight-=sliceLink.pixelHeight*relValue}else{maxWidth-=sliceLink.pixelWidth*relValue}}}));this._pyramidHeight=relativeToValue(this.pyramidHeight,maxHeight);this._pyramidWidth=relativeToValue(this.pyramidHeight,maxWidth);if(this.orientation=="vertical"){var y=(maxHeight-this._pyramidHeight)/2;this.slicesContainer.y=y;this.labelsContainer.y=y;this.ticksContainer.y=y}else{var x=(maxWidth-this._pyramidWidth)/2;this.slicesContainer.x=x;this.labelsContainer.x=x;this.ticksContainer.x=x}_super.prototype.validateDataElements.call(this)};PyramidSeries.prototype.decorateSlice=function(dataItem){var sum=this.dataItem.values.value.absoluteSum;if(sum==0){return}var slice=dataItem.slice;var sliceLink=dataItem.sliceLink;var label=dataItem.label;var tick=dataItem.tick;this.getNextValue(dataItem);var workingValue=Math.abs(dataItem.getWorkingValue("value"));var pyramidWidth=this._pyramidWidth;var pyramidHeight=this._pyramidHeight;var maxWidth=this.slicesContainer.innerWidth;var maxHeight=this.slicesContainer.innerHeight;var linkWidth=sliceLink.pixelWidth;var linkHeight=sliceLink.pixelHeight;if((dataItem.value==0||dataItem.value==null)&&this.ignoreZeroValues){dataItem.__disabled=true}else{dataItem.__disabled=false}if(this.orientation=="vertical"){var topWidth=relativeToValue(this.topWidth,maxWidth);if(!isNumber$1(this._nextWidth)){this._nextWidth=topWidth}var bottomWidth=relativeToValue(this.bottomWidth,maxWidth);var sliceTopWidth=this._nextWidth;var angle=Math.atan2(pyramidHeight,topWidth-bottomWidth);var c=Math.tan(Math.PI/2-angle);if(c==0){c=1e-8}var sliceHeight=void 0;var sliceBottomWidth=void 0;if(this.valueIs=="area"){var totalSquare=(topWidth+bottomWidth)/2*pyramidHeight;var square=totalSquare*workingValue/sum;var s=Math.abs(sliceTopWidth*sliceTopWidth-2*square*c);sliceHeight=(sliceTopWidth-Math.sqrt(s))/c;if(sliceHeight>0){sliceBottomWidth=(2*square-sliceHeight*sliceTopWidth)/sliceHeight}else{sliceBottomWidth=sliceTopWidth}}else{sliceHeight=pyramidHeight*workingValue/sum;sliceBottomWidth=sliceTopWidth-sliceHeight*c}slice.height=sliceHeight;slice.width=maxWidth;slice.bottomWidth=sliceBottomWidth;slice.topWidth=sliceTopWidth;sliceLink.topWidth=slice.bottomWidth;sliceLink.bottomWidth=slice.bottomWidth;slice.y=this._nextY;if(!this.alignLabels){label.x=maxWidth/2}else{label.x=0}label.y=slice.pixelY+slice.pixelHeight*tick.locationY+slice.dy;this._nextY+=slice.pixelHeight+linkHeight*workingValue/Math.max(Math.abs(dataItem.value),1e-8);sliceLink.y=this._nextY-linkHeight;sliceLink.x=maxWidth/2}else{var topWidth=relativeToValue(this.topWidth,maxHeight);if(!isNumber$1(this._nextWidth)){this._nextWidth=topWidth}var bottomWidth=relativeToValue(this.bottomWidth,maxHeight);var sliceTopWidth=this._nextWidth;var angle=Math.atan2(pyramidWidth,topWidth-bottomWidth);var c=Math.tan(Math.PI/2-angle);if(c==0){c=1e-8}var sliceWidth=void 0;var sliceBottomWidth=void 0;if(this.valueIs=="area"){var totalSquare=(topWidth+bottomWidth)/2*pyramidWidth;var square=totalSquare*workingValue/sum;sliceWidth=(sliceTopWidth-Math.sqrt(sliceTopWidth*sliceTopWidth-2*square*c))/c;sliceBottomWidth=(2*square-sliceWidth*sliceTopWidth)/sliceWidth}else{sliceWidth=pyramidWidth*workingValue/sum;sliceBottomWidth=sliceTopWidth-sliceWidth*c}slice.width=sliceWidth;slice.height=maxHeight;slice.bottomWidth=sliceBottomWidth;slice.topWidth=sliceTopWidth;sliceLink.topWidth=slice.bottomWidth;sliceLink.bottomWidth=slice.bottomWidth;slice.x=this._nextY;if(!this.alignLabels){label.y=maxHeight/2}else{label.y=this.labelsContainer.measuredHeight}label.x=slice.pixelX+slice.pixelWidth*tick.locationX+slice.dx;this._nextY+=slice.pixelWidth+linkWidth*workingValue/Math.max(Math.abs(dataItem.value),1e-8);sliceLink.x=this._nextY-linkWidth;sliceLink.y=maxHeight/2}this._nextWidth=slice.bottomWidth};Object.defineProperty(PyramidSeries.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(value){if(this.setPercentProperty("topWidth",value,false,false,10,false)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(PyramidSeries.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(value){if(this.setPercentProperty("pyramidHeight",value,false,false,10,false)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(PyramidSeries.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(value){if(this.setPercentProperty("bottomWidth",value,false,false,10,false)){this.invalidate()}},enumerable:true,configurable:true});Object.defineProperty(PyramidSeries.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(value){if(this.setPropertyValue("valueIs",value)){this.invalidate()}},enumerable:true,configurable:true});return PyramidSeries}(FunnelSeries);registry.registeredClasses["PyramidSeries"]=PyramidSeries;registry.registeredClasses["PyramidSeriesDataItem"]=PyramidSeriesDataItem;var PictorialStackedSeriesDataItem=function(_super){__extends(PictorialStackedSeriesDataItem,_super);function PictorialStackedSeriesDataItem(){var _this=_super.call(this)||this;_this.className="PictorialStackedSeriesDataItem";_this.applyTheme();return _this}return PictorialStackedSeriesDataItem}(PyramidSeriesDataItem);var PictorialStackedSeries=function(_super){__extends(PictorialStackedSeries,_super);function PictorialStackedSeries(){var _this=_super.call(this)||this;_this.className="PictorialStackedSeries";_this.topWidth=percent(100);_this.bottomWidth=percent(100);_this.valueIs="height";_this.applyTheme();_this.startLocation=0;_this.endLocation=1;_this.align="center";_this.valign="middle";_this._maskSprite=_this.slicesContainer.createChild(Sprite);_this._maskSprite.visible=false;_this._maskSprite.zIndex=100;_this._maskSprite.shouldClone=false;return _this}PictorialStackedSeries.prototype.validateDataElements=function(){var maxWidth=this.slicesContainer.maxWidth;var maxHeight=this.slicesContainer.maxHeight;var maskSprite=this._maskSprite;var pictureWidth=maskSprite.measuredWidth/maskSprite.scale;var pictureHeight=maskSprite.measuredHeight/maskSprite.scale;var scale=min$2(maxHeight/pictureHeight,maxWidth/pictureWidth);if(scale==Infinity){scale=1}scale=max$2(.001,scale);var startLocation=this.startLocation;var endLocation=this.endLocation;var newWidth=min$2(maxWidth,pictureWidth*scale);var newHeight=min$2(maxHeight,pictureHeight*scale);maskSprite.scale=scale;if(this.orientation=="vertical"){this.topWidth=newWidth+4;this.bottomWidth=newWidth+4;this.pyramidHeight=newHeight*(endLocation-startLocation);maskSprite.x=maxWidth/2;maskSprite.y=newHeight/2}else{this.topWidth=newHeight+4;this.bottomWidth=newHeight+4;this.pyramidHeight=newWidth*(endLocation-startLocation);maskSprite.valign="middle";maskSprite.x=newWidth/2;maskSprite.y=maxHeight/2}maskSprite.verticalCenter="middle";maskSprite.horizontalCenter="middle";_super.prototype.validateDataElements.call(this);var y;var x;if(this.orientation=="vertical"){if(this.valign=="bottom"){y=maxHeight-newHeight}if(this.valign=="middle"){y=(maxHeight-newHeight)/2}if(this.valign=="top"){y=0}if(this.align=="left"){x=-(maxWidth-newWidth)/2}if(this.align=="center"){x=0}if(this.align=="right"){x=(maxWidth-newWidth)/2}this.slices.template.dy=startLocation*newHeight;if(this.alignLabels){this.slicesContainer.dx=x}}else{if(this.valign=="bottom"){y=(maxHeight-newHeight)/2}if(this.valign=="middle"){y=0}if(this.valign=="top"){y=-(maxHeight-newHeight)/2}if(this.align=="left"){x=0}if(this.align=="center"){x=(maxWidth-newWidth)/2}if(this.align=="right"){x=maxWidth-newWidth}this.slices.template.dx=startLocation*newWidth;if(this.alignLabels){this.slicesContainer.dy=y}}this.slicesContainer.x=x;this.labelsContainer.x=x;this.ticksContainer.x=x;this.slicesContainer.y=y;this.labelsContainer.y=y;this.ticksContainer.y=y;if(newWidth>0&&newHeight>0){this.slicesContainer.mask=maskSprite}};PictorialStackedSeries.prototype.applyInternalDefaults=function(){_super.prototype.applyInternalDefaults.call(this);if(!hasValue(this.readerTitle)){this.readerTitle=this.language.translate("Pyramid Series")}};PictorialStackedSeries.prototype.createDataItem=function(){return new PictorialStackedSeriesDataItem};Object.defineProperty(PictorialStackedSeries.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:true,configurable:true});PictorialStackedSeries.prototype.initSlice=function(slice){_super.prototype.initSlice.call(this,slice);var hs=slice.states.getKey("hover");if(hs){hs.properties.expandDistance=0}};Object.defineProperty(PictorialStackedSeries.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(value){if(this.setPropertyValue("startLocation",value)){this.invalidateDataItems()}},enumerable:true,configurable:true});Object.defineProperty(PictorialStackedSeries.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(value){if(this.setPropertyValue("endLocation",value)){this.invalidateDataItems()}},enumerable:true,configurable:true});return PictorialStackedSeries}(PyramidSeries);registry.registeredClasses["PictorialStackedSeries"]=PictorialStackedSeries;registry.registeredClasses["PictorialStackedSeriesDataItem"]=PictorialStackedSeriesDataItem;var ConeColumn=function(_super){__extends(ConeColumn,_super);function ConeColumn(){var _this=_super.call(this)||this;_this.className="ConeColumn";return _this}ConeColumn.prototype.createAssets=function(){this.coneColumn=this.createChild(Cone);this.coneColumn.shouldClone=false;this.column=this.coneColumn};ConeColumn.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.coneColumn){this.coneColumn.copyFrom(source.coneColumn)}};return ConeColumn}(Column);registry.registeredClasses["ConeColumn"]=ConeColumn;var ConeSeriesDataItem=function(_super){__extends(ConeSeriesDataItem,_super);function ConeSeriesDataItem(){var _this=_super.call(this)||this;_this.className="ConeSeriesDataItem";_this.applyTheme();return _this}return ConeSeriesDataItem}(ColumnSeriesDataItem);var ConeSeries=function(_super){__extends(ConeSeries,_super);function ConeSeries(){var _this=_super.call(this)||this;_this.className="ConeSeries";_this.applyTheme();return _this}ConeSeries.prototype.createColumnTemplate=function(){return new ConeColumn};ConeSeries.prototype.getMaskPath=function(){var dx=0;var dy=0;var column=this.columns.getIndex(0);if(column){if(this.baseAxis==this.xAxis){dy=column.coneColumn.innerWidth/2+1}else{dx=column.coneColumn.innerHeight/2+1}return rectToPath({x:-dx,y:0,width:this.xAxis.axisLength+dx,height:this.yAxis.axisLength+dy})}};ConeSeries.prototype.validateDataElementReal=function(dataItem){_super.prototype.validateDataElementReal.call(this,dataItem);var column=dataItem.column;if(column){var coneColumn=dataItem.column.coneColumn;coneColumn.fill=dataItem.column.fill;if(this.baseAxis==this.yAxis){coneColumn.orientation="horizontal"}else{coneColumn.orientation="vertical"}}};return ConeSeries}(ColumnSeries);registry.registeredClasses["ConeSeries"]=ConeSeries;registry.registeredClasses["ConeSeriesDataItem"]=ConeSeriesDataItem;var CurvedColumn=function(_super){__extends(CurvedColumn,_super);function CurvedColumn(){var _this=_super.call(this)||this;_this.className="CurvedColumn";return _this}CurvedColumn.prototype.createAssets=function(){this.curvedColumn=this.createChild(Sprite);this.curvedColumn.shouldClone=false;this.setPropertyValue("tension",.7);this.width=percent(120);this.height=percent(120);this.column=this.curvedColumn};CurvedColumn.prototype.draw=function(){_super.prototype.draw.call(this);var w=this.realWidth;var h=this.realHeight;var x=this.realX-this.pixelX;var y=this.realY-this.pixelY;var points;var tensionX=1;var tensionY=1;if(this.orientation=="vertical"){tensionX=this.tension;points=[{x:0,y:h+y},{x:w/2,y},{x:w,y:h+y}]}else{tensionY=this.tension;h=Math.abs(h);points=[{x,y:h},{x:x+w,y:h/2},{x,y:0}]}var path=moveTo(points[0])+new Tension(tensionX,tensionY).smooth(points);this.column.path=path};CurvedColumn.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);if(this.curvedColumn){this.curvedColumn.copyFrom(source.curvedColumn)}};Object.defineProperty(CurvedColumn.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(value){this.setPropertyValue("tension",value,true)},enumerable:true,configurable:true});Object.defineProperty(CurvedColumn.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(value){this.setPropertyValue("orientation",value,true)},enumerable:true,configurable:true});return CurvedColumn}(Column);registry.registeredClasses["CurvedColumn"]=CurvedColumn;var CurvedColumnSeriesDataItem=function(_super){__extends(CurvedColumnSeriesDataItem,_super);function CurvedColumnSeriesDataItem(){var _this=_super.call(this)||this;_this.className="CurvedColumnSeriesDataItem";_this.applyTheme();return _this}return CurvedColumnSeriesDataItem}(ColumnSeriesDataItem);var CurvedColumnSeries=function(_super){__extends(CurvedColumnSeries,_super);function CurvedColumnSeries(){var _this=_super.call(this)||this;_this.className="CurvedColumnSeries";_this.applyTheme();return _this}CurvedColumnSeries.prototype.createColumnTemplate=function(){return new CurvedColumn};CurvedColumnSeries.prototype.validateDataElementReal=function(dataItem){_super.prototype.validateDataElementReal.call(this,dataItem);var column=dataItem.column;column=dataItem.column;if(column){var curvedColumn=dataItem.column.curvedColumn;curvedColumn.fill=dataItem.column.fill;if(this.baseAxis==this.yAxis){column.orientation="horizontal"}else{column.orientation="vertical"}}};return CurvedColumnSeries}(ColumnSeries);registry.registeredClasses["CurvedColumnSeries"]=CurvedColumnSeries;registry.registeredClasses["CurvedColumnSeriesDataItem"]=CurvedColumnSeriesDataItem;var CircleBullet=function(_super){__extends(CircleBullet,_super);function CircleBullet(){var _this=_super.call(this)||this;_this.className="CircleBullet";var circle=_this.createChild(Circle);circle.shouldClone=false;circle.radius=5;circle.isMeasured=false;_this.circle=circle;_this.applyTheme();return _this}CircleBullet.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.circle.copyFrom(source.circle)};return CircleBullet}(Bullet);registry.registeredClasses["CircleBullet"]=CircleBullet;var ErrorBullet=function(_super){__extends(ErrorBullet,_super);function ErrorBullet(){var _this=_super.call(this)||this;_this.className="ErrorBullet";_this.errorLine=_this.createChild(Sprite);_this.errorLine.shouldClone=false;_this.width=20;_this.height=20;_this.strokeOpacity=1;_this.isDynamic=true;return _this}ErrorBullet.prototype.validatePosition=function(){_super.prototype.validatePosition.call(this);var w=this.pixelWidth/2;var h=this.pixelHeight/2;this.errorLine.path=moveTo({x:-w,y:-h})+lineTo({x:w,y:-h})+moveTo({x:0,y:-h})+lineTo({x:0,y:h})+moveTo({x:-w,y:h})+lineTo({x:w,y:h})};ErrorBullet.prototype.copyFrom=function(source){_super.prototype.copyFrom.call(this,source);this.errorLine.copyFrom(source.errorLine)};return ErrorBullet}(Bullet);registry.registeredClasses["ErrorBullet"]=ErrorBullet;var NavigationBarDataItem=function(_super){__extends(NavigationBarDataItem,_super);function NavigationBarDataItem(){var _this=_super.call(this)||this;_this.className="NavigationBarDataItem";_this.applyTheme();return _this}Object.defineProperty(NavigationBarDataItem.prototype,"name",{get:function(){return this.properties["name"]},set:function(value){this.setProperty("name",value)},enumerable:true,configurable:true});return NavigationBarDataItem}(DataItem);var NavigationBar=function(_super){__extends(NavigationBar,_super);function NavigationBar(){var _this=_super.call(this)||this;_this.className="NavigationBar";var interfaceColors=new InterfaceColorSet;var textLink=new TextLink;textLink.valign="middle";textLink.paddingTop=8;textLink.paddingBottom=8;_this.paddingBottom=2;_this.links=new ListTemplate(textLink);_this._disposers.push(new ListDisposer(_this.links));_this._disposers.push(textLink);_this._linksIterator=new ListIterator(_this.links,(function(){return _this.links.create()}));_this._linksIterator.createNewItems=true;var triangle=new Triangle;triangle.direction="right";triangle.width=8;triangle.height=12;triangle.fill=interfaceColors.getFor("alternativeBackground");triangle.fillOpacity=.5;triangle.valign="middle";triangle.marginLeft=10;triangle.marginRight=10;_this.separators=new ListTemplate(triangle);_this._disposers.push(new ListDisposer(_this.separators));_this._disposers.push(triangle);var activeLink=new TextLink;_this.activeLink=activeLink;activeLink.copyFrom(textLink);activeLink.valign="middle";activeLink.fontWeight="bold";_this.width=percent(100);_this.layout="grid";_this.dataFields.name="name";_this.applyTheme();return _this}NavigationBar.prototype.validateDataElements=function(){this.removeChildren();this._linksIterator.reset();_super.prototype.validateDataElements.call(this)};NavigationBar.prototype.validateDataElement=function(dataItem){_super.prototype.validateDataElement.call(this,dataItem);var textLink;if(dataItem.index<this.dataItems.length-1){textLink=this._linksIterator.getLast();textLink.parent=this;var separator=this.separators.create();separator.parent=this;separator.valign="middle"}else{textLink=this.activeLink;textLink.events.copyFrom(this.links.template.events);textLink.hide(0);textLink.show();textLink.parent=this}textLink.dataItem=dataItem;textLink.text=dataItem.name;textLink.validate()};return NavigationBar}(Component);registry.registeredClasses["NavigationBar"]=NavigationBar;registry.registeredClasses["NavigationBarDataItem"]=NavigationBarDataItem;var Cursor=function(_super){__extends(Cursor,_super);function Cursor(){var _this=_super.call(this)||this;_this.point={x:0,y:0};_this._stick="none";_this.className="Cursor";_this.width=percent(100);_this.height=percent(100);_this.shouldClone=false;_this.hide(0);_this.trackable=true;_this.clickable=true;_this.isMeasured=false;var interaction=getInteraction();_this._disposers.push(interaction.body.events.on("down",_this.handleCursorDown,_this));_this._disposers.push(interaction.body.events.on("up",_this.handleCursorUp,_this));_this._disposers.push(interaction.body.events.on("track",_this.handleCursorMove,_this));_this.applyTheme();return _this}Cursor.prototype.handleCursorMove=function(event){if(!this.interactionsEnabled||this.interactions.isTouchProtected&&event.touch){return}if((this._generalBehavior!="zoom"&&this._generalBehavior!="pan"||!this.downPoint)&&!getInteraction().isLocalElement(event.pointer,this.paper.svg,this.uid)){if(!this.isHidden||!this.isHiding){this.hide()}return}var local=documentPointToSprite(event.pointer.point,this);if(this._stick=="hard"&&this._stickPoint){local=this._stickPoint}if(this._stick=="soft"&&this._stickPoint){if(!this.fitsToBounds(local)){local=this._stickPoint}}if(this._adapterO){this._adapterO.apply("cursorPoint",local)}this.triggerMove(local);return local};Cursor.prototype.hideReal=function(duration){if((this._stick=="hard"||this._stick=="soft")&&this._stickPoint){return}return _super.prototype.hideReal.call(this,duration)};Cursor.prototype.triggerMove=function(point,stick,force){point.x=round$1(point.x,1);point.y=round$1(point.y,1);if(stick){this._stick=stick}if(stick=="hard"||stick=="soft"){this._stickPoint=point}this.triggerMoveReal(point,force)};Cursor.prototype.triggerMoveReal=function(point,force){if(this.point.x!=point.x||this.point.y!=point.y||force){this.point=point;this.invalidatePosition();if(this.fitsToBounds(point)){this.show(0)}else{if(!this.downPoint){this.hide(0)}}if(this.visible){this.getPositions();this.dispatch("cursorpositionchanged")}}};Cursor.prototype.triggerDown=function(point){this.triggerDownReal(point)};Cursor.prototype.triggerDownReal=function(point){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted");getInteraction().setGlobalStyle(MouseCursorStyle.grabbing);break}};Cursor.prototype.triggerUp=function(point){this.triggerUpReal(point)};Cursor.prototype.triggerUpReal=function(point){system.requestFrame();this.updatePoint(this.upPoint);var interaction=getInteraction();if(getDistance(this._upPointOrig,this._downPointOrig)>interaction.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended");interaction.setGlobalStyle(MouseCursorStyle.default);break}this.downPoint=undefined;this.updateSelection()}};Cursor.prototype.updateSelection=function(){};Cursor.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth;this.yPosition=1-this.point.y/this.innerHeight};Cursor.prototype.handleCursorDown=function(event){if(!this.interactionsEnabled||this.interactions.isTouchProtected&&event.touch||!getInteraction().isLocalElement(event.pointer,this.paper.svg,this.uid)){return}blur();var local=documentPointToSprite(event.pointer.point,this);if(this._stick=="hard"&&this._stickPoint){local=this._stickPoint}if(this._adapterO){this._adapterO.apply("cursorPoint",local)}if(!this.fitsToBounds(local)){return}this._downPointOrig={x:local.x,y:local.y};if(event.event.cancelable&&this.shouldPreventGestures(event.touch)&&this.fitsToBounds(local)){event.event.preventDefault()}this.triggerMove(local);this.triggerDown(local)};Cursor.prototype.shouldPreventGestures=function(touch){return true};Cursor.prototype.updatePoint=function(point){};Cursor.prototype.handleCursorUp=function(event){if(!this.interactionsEnabled){return}if(!this.downPoint&&!getInteraction().isLocalElement(event.pointer,this.paper.svg,this.uid)){return}var local=documentPointToSprite(event.pointer.point,this);if(this._adapterO){this._adapterO.apply("cursorPoint",local)}if(!this.downPoint||!this.fitsToBounds(this.downPoint)){return}if(this._stick=="hard"&&this._stickPoint){local=this._stickPoint}this._upPointOrig={x:local.x,y:local.y};this.triggerMove(local);this.triggerUp(local)};Object.defineProperty(Cursor.prototype,"chart",{get:function(){return this._chart},set:function(value){this._chart=value;if(hasValue(this._chart.plotContainer)){getInteraction().lockElement(this._chart.plotContainer.interactions)}},enumerable:true,configurable:true});return Cursor}(Container);registry.registeredClasses["Cursor"]=Cursor;var XYCursor=function(_super){__extends(XYCursor,_super);function XYCursor(){var _this=_super.call(this)||this;_this._lineX=new MutableValueDisposer;_this._lineY=new MutableValueDisposer;_this._xAxis=new MutableValueDisposer;_this._yAxis=new MutableValueDisposer;_this._snapToDisposers=[];_this.className="XYCursor";_this.behavior="zoomX";_this.maxPanOut=.1;var interfaceColors=new InterfaceColorSet;_this.snapOnPan=true;var selection=_this.createChild(Sprite);selection.shouldClone=false;selection.fillOpacity=.2;selection.fill=interfaceColors.getFor("alternativeBackground");selection.isMeasured=false;selection.visible=false;selection.interactionsEnabled=false;_this.selection=selection;_this._disposers.push(_this.selection);var lineX=_this.createChild(Sprite);lineX.shouldClone=false;lineX.stroke=interfaceColors.getFor("grid");lineX.fill=color();lineX.strokeDasharray="3,3";lineX.isMeasured=false;lineX.strokeOpacity=.4;lineX.interactionsEnabled=false;lineX.y=0;_this.lineX=lineX;_this._disposers.push(_this.lineX);var lineY=_this.createChild(Sprite);lineY.shouldClone=false;lineY.stroke=interfaceColors.getFor("grid");lineY.fill=color();lineY.strokeDasharray="3,3";lineY.isMeasured=false;lineY.strokeOpacity=.4;lineY.interactionsEnabled=false;lineY.x=0;_this.lineY=lineY;_this._disposers.push(_this.lineY);_this.events.on("sizechanged",_this.updateSize,_this,false);_this._disposers.push(_this._lineX);_this._disposers.push(_this._lineY);_this._disposers.push(_this._xAxis);_this._disposers.push(_this._yAxis);_this.mask=_this;_this.hideSeriesTooltipsOnSelection=true;_this.applyTheme();return _this}XYCursor.prototype.updateSize=function(){if(this.lineX){this.lineX.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.innerHeight})}if(this.lineY){this.lineY.path=moveTo({x:0,y:0})+lineTo({x:this.innerWidth,y:0})}};XYCursor.prototype.updateSelection=function(){if(this._usesSelection){var downPoint=this.downPoint;var behavior=this.behavior;if(downPoint){var point=this.point;if(this.lineX){point.x=this.lineX.pixelX}if(this.lineY){point.y=this.lineY.pixelY}var selection=this.selection;var x=Math.min(point.x,downPoint.x);var y=Math.min(point.y,downPoint.y);var w=round$1(Math.abs(downPoint.x-point.x),this._positionPrecision);var h=round$1(Math.abs(downPoint.y-point.y),this._positionPrecision);switch(behavior){case"zoomX":y=0;h=this.pixelHeight;break;case"zoomY":x=0;w=this.pixelWidth;break;case"selectX":y=0;h=this.pixelHeight;break;case"selectY":x=0;w=this.pixelWidth;break}selection.x=x;selection.y=y;selection.path=rectangle(w,h);selection.validatePosition()}else{if(this._generalBehavior!="select"){this.selection.hide()}}}};XYCursor.prototype.fixPoint=function(point){point.x=Math.max(0,point.x);point.y=Math.max(0,point.y);point.x=Math.min(this.pixelWidth,point.x);point.y=Math.min(this.pixelHeight,point.y);return point};XYCursor.prototype.triggerMoveReal=function(point,force){_super.prototype.triggerMoveReal.call(this,point,force);var snapToSeries=this.snapToSeries;if(snapToSeries&&!this.downPoint){if(snapToSeries instanceof XYSeries){if(snapToSeries.isHidden){this.updateLinePositions(point)}}else{var allHidden_1=true;each$2(snapToSeries,(function(s){if(!s.isHidden){allHidden_1=false}}));if(allHidden_1){this.updateLinePositions(point)}}}else{this.updateLinePositions(point)}if(this.downPoint&&getDistance(this.downPoint,point)>3){if(this._generalBehavior=="pan"){this.getPanningRanges();this.dispatch("panning")}}};XYCursor.prototype.updateLinePositions=function(point){point=this.fixPoint(this.point);if(this.lineX&&this.lineX.visible&&!this.xAxis){this.lineX.x=point.x}if(this.lineY&&this.lineY.visible&&!this.yAxis){this.lineY.y=point.y}this.updateSelection()};XYCursor.prototype.triggerDownReal=function(point){if(this.visible&&!this.isHiding){if(this._generalBehavior=="select"){this.selection.parent=this.parent}if(this.fitsToBounds(point)){this.downPoint={x:point.x,y:point.y};this.updatePoint(point);this.point.x=this.downPoint.x;this.point.y=this.downPoint.y;var selection=this.selection;var selectionX=this.downPoint.x;var selectionY=this.downPoint.y;if(this._usesSelection){selection.x=selectionX;selection.y=selectionY;selection.path="";selection.show()}_super.prototype.triggerDownReal.call(this,point)}else{this.downPoint=undefined}}else{this.downPoint=undefined}};XYCursor.prototype.updatePoint=function(point){if(this.lineX){point.x=this.lineX.pixelX}if(this.lineY){point.y=this.lineY.pixelY}};XYCursor.prototype.triggerUpReal=function(point){if(this.hasMoved()){if(this.downPoint){this.upPoint=point;this.updatePoint(this.upPoint);if(this._generalBehavior!="pan"){this.getRanges()}if(this._generalBehavior!="select"){this.selection.hide()}_super.prototype.triggerUpReal.call(this,point)}}else{if(this._generalBehavior!="select"){this.selection.hide(0)}else{this.xRange=undefined;this.yRange=undefined;this.dispatchImmediately("selectended")}if(this._generalBehavior=="pan"){var interaction=getInteraction();interaction.setGlobalStyle(MouseCursorStyle.default)}this.dispatchImmediately("behaviorcanceled")}this.downPoint=undefined;this.dispatch("cursorpositionchanged")};XYCursor.prototype.hasMoved=function(){var distance;if(this.behavior=="zoomX"||this.behavior=="panX"){distance=getHorizontalDistance(this._upPointOrig,this._downPointOrig)}else if(this.behavior=="zoomY"||this.behavior=="panY"){distance=getVerticalDistance(this._upPointOrig,this._downPointOrig)}else{distance=getDistance(this._upPointOrig,this._downPointOrig)}return distance>getInteraction().getHitOption(this.interactions,"hitTolerance")};XYCursor.prototype.getPanningRanges=function(){var startX=round$1(this.downPoint.x/this.innerWidth,5);var startY=1-round$1(this.downPoint.y/this.innerHeight,5);var currentX=round$1(this.point.x/this.innerWidth,5);var currentY=1-round$1(this.point.y/this.innerHeight,5);var deltaX=startX-currentX;var deltaY=startY-currentY;this.xRange={start:deltaX,end:1+deltaX};this.yRange={start:deltaY,end:1+deltaY};if(this.behavior=="panX"){this.yRange.start=0;this.yRange.end=1}if(this.behavior=="panY"){this.xRange.start=0;this.xRange.end=1}};XYCursor.prototype.getRanges=function(){if(this.lineX){this.upPoint.x=this.lineX.pixelX}if(this.lineY){this.upPoint.y=this.lineY.pixelY}var startX=round$1(this.downPoint.x/this.innerWidth,5);var endX=round$1(this.upPoint.x/this.innerWidth,5);var startY=1-round$1(this.downPoint.y/this.innerHeight,5);var endY=1-round$1(this.upPoint.y/this.innerHeight,5);this.xRange={start:min$2(startX,endX),end:max$2(startX,endX)};this.yRange={start:min$2(startY,endY),end:max$2(startY,endY)}};Object.defineProperty(XYCursor.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(value){this.setPropertyValue("behavior",value,true);this._usesSelection=false;if(value.indexOf("zoom")!=-1){this._generalBehavior="zoom";this._usesSelection=true}if(value.indexOf("select")!=-1){this._generalBehavior="select";this._usesSelection=true}if(value.indexOf("pan")!=-1){this._generalBehavior="pan";this._usesSelection=false}},enumerable:true,configurable:true});XYCursor.prototype.shouldPreventGestures=function(touch){return(!this.interactions.isTouchProtected||!touch)&&this.behavior!="none"};Object.defineProperty(XYCursor.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(value){this.setPropertyValue("fullWidthLineX",value);if(!value){this.updateSize()}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(value){this.setPropertyValue("fullWidthLineY",value);if(!value){this.updateSize()}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(value){this.setPropertyValue("hideSeriesTooltipsOnSelection",value)},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(value){this.setPropertyValue("maxTooltipDistance",value)},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(value){this.setPropertyValue("maxPanOut",value)},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(axis){var _this=this;if(this._xAxis.get()!=axis){this._xAxis.set(axis,new MultiDisposer([axis.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,false),axis.events.on("rangechangestarted",(function(event){_this.hide(0);_this.preventShow=true}),undefined,false),axis.events.on("rangechangeended",(function(event){_this.preventShow=false;_this.hide(0);_this.dispatch("cursorpositionchanged")}),undefined,false)]))}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(axis){var _this=this;if(this._yAxis.get()!=axis){this._yAxis.set(axis,new MultiDisposer([axis.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,false),axis.events.on("rangechangestarted",(function(event){_this.hide(0);_this.__disabled=true}),undefined,false),axis.events.on("rangechangeended",(function(event){_this.__disabled=false;_this.hide(0);_this.dispatch("cursorpositionchanged")}),undefined,false)]))}},enumerable:true,configurable:true});XYCursor.prototype.handleXTooltipPosition=function(event){var tooltip=this.xAxis.tooltip;var point=svgPointToSprite({x:tooltip.pixelX,y:tooltip.pixelY},this);var x=point.x;point.y=1;if(this.lineX){this.lineX.x=x;if(!this.fitsToBounds(point)){this.hide()}}if(this.xAxis&&this.fullWidthLineX){var startPoint=this.xAxis.currentItemStartPoint;var endPoint=this.xAxis.currentItemEndPoint;if(startPoint&&endPoint){this.lineX.x=x;var width=endPoint.x-startPoint.x;this.lineX.path=rectangle(width,this.innerHeight,-width/2)}}};XYCursor.prototype.handleYTooltipPosition=function(event){var tooltip=this.yAxis.tooltip;var point=svgPointToSprite({x:tooltip.pixelX,y:tooltip.pixelY},this);var y=point.y;point.x=1;if(this.lineY){this.lineY.y=y;if(!this.fitsToBounds(point)){this.hide()}}if(this.yAxis&&this.fullWidthLineY){var startPoint=this.yAxis.currentItemStartPoint;var endPoint=this.yAxis.currentItemEndPoint;if(startPoint&&endPoint){this.lineY.y=y;var height=endPoint.y-startPoint.y;this.lineY.path=rectangle(this.innerWidth,height,0,-height/2)}}};Object.defineProperty(XYCursor.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(lineX){if(lineX){lineX.setElement(this.paper.add("path"));this._lineX.set(lineX,lineX.events.on("positionchanged",this.updateSelection,this,false));lineX.interactionsEnabled=false;lineX.parent=this}else{this._lineX.reset()}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(lineY){if(lineY){lineY.setElement(this.paper.add("path"));this._lineY.set(lineY,lineY.events.on("positionchanged",this.updateSelection,this,false));lineY.parent=this;lineY.interactionsEnabled=false}else{this._lineY.reset()}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"selection",{get:function(){return this._selection},set:function(selection){this._selection=selection;if(selection){selection.element=this.paper.add("path");selection.parent=this}},enumerable:true,configurable:true});XYCursor.prototype.processConfig=function(config){var _this=this;if(config){if(hasValue(config.xAxis)&&isString$1(config.xAxis)){if(this.map.hasKey(config.xAxis)){config.xAxis=this.map.getKey(config.xAxis)}else{this.processingErrors.push('[XYCursor] No axis with id "'+config.xAxis+'" found for `xAxis`');delete config.xAxis}}if(hasValue(config.yAxis)&&isString$1(config.yAxis)){if(this.map.hasKey(config.yAxis)){config.yAxis=this.map.getKey(config.yAxis)}else{this.processingErrors.push('[XYCursor] No axis with id "'+config.yAxis+'" found for `yAxis`');delete config.yAxis}}if(hasValue(config.snapToSeries)){var snapTo_1=isArray$6(config.snapToSeries)?config.snapToSeries:[config.snapToSeries];var snapError_1=false;each$2(snapTo_1,(function(snap,index){if(isString$1(snap)){if(_this.map.hasKey(snap)){snapTo_1[index]=_this.map.getKey(snap)}else{_this.processingErrors.push('[XYCursor] No series with id "'+snap+'" found for `series`');snapError_1=true}}}));if(snapError_1){delete config.snapToSeries}else{config.snapToSeries=snapTo_1}}}_super.prototype.processConfig.call(this,config)};Object.defineProperty(XYCursor.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(series){var _this=this;if(this.setPropertyValue("snapToSeries",series)){if(series instanceof XYSeries){series=[series]}if(this._snapToDisposers){each$2(this._snapToDisposers,(function(disposer){disposer.dispose()}))}this._snapToDisposers=[];if(series){each$2(series,(function(s){_this._snapToDisposers.push(s.events.on("tooltipshownat",(function(){_this.handleSnap(s)}),undefined,false))}))}}},enumerable:true,configurable:true});Object.defineProperty(XYCursor.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(value){this.setPropertyValue("snapOnPan",value)},enumerable:true,configurable:true});XYCursor.prototype.handleSnap=function(series){if(!this.downPoint){var x=series.getTooltipX()+series.xAxis.pixelX;var y=series.getTooltipY()+series.yAxis.pixelY;var xAxis=series.xAxis;var yAxis=series.yAxis;if(xAxis){if(xAxis.renderer.opposite){y-=this.pixelHeight}}this.point={x,y};this.getPositions();var xx=x;var yy=y;x-=this.pixelWidth;if(yAxis){if(yAxis.renderer.opposite){x+=this.pixelWidth}}var tooltip=series.tooltip;var duration=tooltip.animationDuration;var easing=tooltip.animationEasing;if(xAxis instanceof ValueAxis&&!(xAxis instanceof DateAxis)&&yAxis instanceof ValueAxis&&!(yAxis instanceof DateAxis)){series.yAxis.showTooltipAtPosition(this.yPosition);series.xAxis.showTooltipAtPosition(this.xPosition)}else{if(series.baseAxis==series.xAxis){series.yAxis.showTooltipAtPosition(this.yPosition)}if(series.baseAxis==series.yAxis){series.xAxis.showTooltipAtPosition(this.xPosition)}}this.lineY.x=x;this.lineX.y=y;if(!this.xAxis){this.lineX.animate([{property:"x",to:xx}],duration,easing)}if(!this.yAxis){this.lineY.animate([{property:"y",to:yy}],duration,easing)}}};XYCursor.prototype.dispose=function(){this.hide(0);_super.prototype.dispose.call(this)};return XYCursor}(Cursor);registry.registeredClasses["XYCursor"]=XYCursor;var RadarCursor=function(_super){__extends(RadarCursor,_super);function RadarCursor(){var _this=_super.call(this)||this;_this.className="RadarCursor";_this.radius=percent(100);_this.innerRadius=percent(0);_this.applyTheme();_this.mask=undefined;return _this}RadarCursor.prototype.fitsToBounds=function(point){var radius=getDistance(point);if(radius<this.truePixelRadius+1&&radius>this.pixelInnerRadius-1){return true}return false};Object.defineProperty(RadarCursor.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(value){this.setPropertyValue("startAngle",value,true)},enumerable:true,configurable:true});Object.defineProperty(RadarCursor.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(value){this.setPropertyValue("endAngle",value,true)},enumerable:true,configurable:true});RadarCursor.prototype.triggerMoveReal=function(point,force){if(!this.xAxis||this.xAxis&&(!this.xAxis.cursorTooltipEnabled||this.xAxis.tooltip.disabled)){this.updateLineX(this.point)}if(!this.yAxis||this.yAxis&&(!this.yAxis.cursorTooltipEnabled||this.yAxis.tooltip.disabled)){this.updateLineY(this.point)}this.updateSelection();_super.prototype.triggerMoveReal.call(this,point,force)};RadarCursor.prototype.updateLineX=function(point){var radius=this.pixelRadius;var startAngle=this.startAngle;var endAngle=this.endAngle;var innerRadius=this.pixelInnerRadius;if(radius>0&&isNumber$1(startAngle)&&isNumber$1(endAngle)&&isNumber$1(innerRadius)){var angle=fitAngleToRange(getAngle(point),startAngle,endAngle);var path=void 0;if(this.lineX&&this.lineX.visible){this.lineX.moveTo({x:0,y:0});if(this.xAxis&&this.fullWidthLineX){var startPoint=this.xAxis.currentItemStartPoint;var endPoint=this.xAxis.currentItemEndPoint;if(startPoint&&endPoint){var fillStartAngle=fitAngleToRange(getAngle(startPoint),startAngle,endAngle);var fillEndAngle=fitAngleToRange(getAngle(endPoint),startAngle,endAngle);var arc=fillEndAngle-fillStartAngle;if(startAngle<endAngle){if(arc<0){arc+=360}}else{if(arc>0){arc-=360}}angle-=arc/2;path=moveTo({x:innerRadius*cos(angle),y:innerRadius*sin(angle)})+lineTo({x:radius*cos(angle),y:radius*sin(angle)})+arcTo(angle,arc,radius)+lineTo({x:innerRadius*cos(angle+arc),y:innerRadius*sin(angle+arc)})+arcTo(angle+arc,-arc,innerRadius)}}if(!path){path=moveTo({x:innerRadius*cos(angle),y:innerRadius*sin(angle)})+lineTo({x:radius*cos(angle),y:radius*sin(angle)})}this.lineX.path=path}}};RadarCursor.prototype.updateLineY=function(point){if(this.lineY&&this.lineY.visible){var startAngle=this.startAngle;var endAngle=this.endAngle;var truePixelRadius=this.truePixelRadius;var radius=fitToRange(getDistance(point),0,this.truePixelRadius);if(isNumber$1(radius)&&isNumber$1(startAngle)){this.lineY.moveTo({x:0,y:0});var path=void 0;var arc=endAngle-startAngle;if(this.yAxis&&this.fullWidthLineY){var startPoint=this.yAxis.currentItemStartPoint;var endPoint=this.yAxis.currentItemEndPoint;if(startPoint&&endPoint){var innerRadius=fitToRange(getDistance(startPoint),0,truePixelRadius);radius=fitToRange(getDistance(endPoint),0,truePixelRadius);path=moveTo({x:radius*cos(startAngle),y:radius*sin(startAngle)})+arcTo(startAngle,arc,radius);path+=moveTo({x:innerRadius*cos(endAngle),y:innerRadius*sin(endAngle)})+arcTo(endAngle,-arc,innerRadius)}}if(!path){path=moveTo({x:radius*cos(startAngle),y:radius*sin(startAngle)})+arcTo(startAngle,endAngle-startAngle,radius)}this.lineY.path=path}}};RadarCursor.prototype.updateSelection=function(){if(this._usesSelection){var downPoint=this.downPoint;if(downPoint){var point=this.point;var radius=this.pixelRadius;var truePixelRadius=this.truePixelRadius;var innerRadius=this.pixelInnerRadius;var startAngle=Math.min(this.startAngle,this.endAngle);var endAngle=Math.max(this.startAngle,this.endAngle);var downAngle=fitAngleToRange(getAngle(downPoint),startAngle,endAngle);var angle=fitAngleToRange(getAngle(point),startAngle,endAngle);var downRadius=getDistance(downPoint);if(downRadius<truePixelRadius){var currentRadius=fitToRange(getDistance(point),0,truePixelRadius);this._prevAngle=angle;var path=moveTo({x:0,y:0});var downSin=sin(downAngle);var downCos=cos(downAngle);var sin$1=sin(angle);var cos$1=cos(angle);var behavior=this.behavior;if(behavior=="zoomX"||behavior=="selectX"){path+=lineTo({x:radius*downCos,y:radius*downSin})+arcTo(downAngle,angle-downAngle,radius)+lineTo({x:innerRadius*cos$1,y:innerRadius*sin$1})+arcTo(angle,downAngle-angle,innerRadius)}else if(behavior=="zoomY"||behavior=="selectY"){path=moveTo({x:currentRadius*cos(startAngle),y:currentRadius*sin(startAngle)})+arcTo(startAngle,endAngle-startAngle,currentRadius)+lineTo({x:downRadius*cos(endAngle),y:downRadius*sin(endAngle)})+arcTo(endAngle,startAngle-endAngle,downRadius)+closePath()}else if(behavior=="zoomXY"){path=moveTo({x:currentRadius*cos(downAngle),y:currentRadius*sin(downAngle)})+arcTo(downAngle,angle-downAngle,currentRadius)+lineTo({x:downRadius*cos(angle),y:downRadius*sin(angle)})+arcTo(angle,downAngle-angle,downRadius)+closePath()}this.selection.path=path}this.selection.moveTo({x:0,y:0})}}};RadarCursor.prototype.getPositions=function(){var chart=this.chart;if(chart){var innerRadius=this.pixelInnerRadius;var radius=this.truePixelRadius-innerRadius;var startAngle=this.startAngle;var endAngle=this.endAngle;var angle=fitAngleToRange(getAngle(this.point),startAngle,endAngle);var xPosition=(angle-startAngle)/(endAngle-startAngle);this.xPosition=xPosition;this.yPosition=fitToRange((getDistance(this.point)-innerRadius)/radius,0,1)}};RadarCursor.prototype.updatePoint=function(point){};RadarCursor.prototype.handleXTooltipPosition=function(event){if(this.xAxis.cursorTooltipEnabled){var tooltip=this.xAxis.tooltip;this.updateLineX(svgPointToSprite({x:tooltip.pixelX,y:tooltip.pixelY},this))}};RadarCursor.prototype.handleYTooltipPosition=function(event){if(this.yAxis.cursorTooltipEnabled){var tooltip=this.yAxis.tooltip;this.updateLineY(svgPointToSprite({x:tooltip.pixelX,y:tooltip.pixelY},this))}};RadarCursor.prototype.updateLinePositions=function(point){};RadarCursor.prototype.getRanges=function(){var downPoint=this.downPoint;if(downPoint){var upPoint=this.upPoint;var chart=this.chart;if(chart){var radius=this.pixelRadius;var startAngle=this.startAngle;var endAngle=this.endAngle;var downAngle=fitAngleToRange(getAngle(downPoint),this.startAngle,this.endAngle);var upAngle=fitAngleToRange(getAngle(upPoint),this.startAngle,this.endAngle);var downRadius=fitToRange(getDistance(downPoint),0,radius);var upRadius=fitToRange(getDistance(upPoint),0,radius);var startX=0;var endX=1;var startY=0;var endY=1;var behavior=this.behavior;if(behavior=="zoomX"||behavior=="selectX"||behavior=="zoomXY"||behavior=="selectXY"){var arc=endAngle-startAngle;startX=round$1((downAngle-startAngle)/arc,5);endX=round$1((upAngle-startAngle)/arc,5)}if(behavior=="zoomY"||behavior=="selectY"||behavior=="zoomXY"||behavior=="selectXY"){startY=round$1(downRadius/radius,5);endY=round$1(upRadius/radius,5)}this.xRange={start:Math.min(startX,endX),end:Math.max(startX,endX)};this.yRange={start:Math.min(startY,endY),end:Math.max(startY,endY)};if(this.behavior=="selectX"||this.behavior=="selectY"||this.behavior=="selectXY");else{this.selection.hide()}}}};RadarCursor.prototype.updateSize=function(){};Object.defineProperty(RadarCursor.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(value){this.setPercentProperty("radius",value,false,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(RadarCursor.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.truePixelRadius)},enumerable:true,configurable:true});Object.defineProperty(RadarCursor.prototype,"truePixelRadius",{get:function(){return relativeToValue(percent(100),min$2(this.innerWidth/2,this.innerHeight/2))},enumerable:true,configurable:true});Object.defineProperty(RadarCursor.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(value){this.setPercentProperty("innerRadius",value,false,false,10,false)},enumerable:true,configurable:true});Object.defineProperty(RadarCursor.prototype,"pixelInnerRadius",{get:function(){var innerRadius=this.innerRadius;if(innerRadius instanceof Percent){innerRadius=percent(100*innerRadius.value*this.chart.innerRadiusModifyer)}return relativeRadiusToValue(innerRadius,this.truePixelRadius)||0},enumerable:true,configurable:true});RadarCursor.prototype.fixPoint=function(point){return point};return RadarCursor}(XYCursor);registry.registeredClasses["RadarCursor"]=RadarCursor;var theme=function(object){if(is(object,"SpriteState")){object.transitionDuration=400}if(is(object,"Component")){object.rangeChangeDuration=500;object.interpolationDuration=500;object.sequencedInterpolation=false;if(is(object,"SankeyDiagram")){object.sequencedInterpolation=true}if(is(object,"FunnelSeries")){object.sequencedInterpolation=true}}if(is(object,"Chart")){object.defaultState.transitionDuration=2e3;object.hiddenState.transitionDuration=1e3}if(is(object,"Tooltip")){object.animationDuration=400;object.defaultState.transitionDuration=400;object.hiddenState.transitionDuration=400}if(is(object,"Scrollbar")){object.animationDuration=500}if(is(object,"Series")){object.defaultState.transitionDuration=1e3;object.hiddenState.transitionDuration=700;object.hiddenState.properties.opacity=1;object.showOnInit=true}if(is(object,"MapSeries")){object.hiddenState.properties.opacity=0}if(is(object,"PercentSeries")){object.hiddenState.properties.opacity=0}if(is(object,"FunnelSlice")){object.defaultState.transitionDuration=800;object.hiddenState.transitionDuration=1e3;object.hiddenState.properties.opacity=1}if(is(object,"Slice")){object.defaultState.transitionDuration=700;object.hiddenState.transitionDuration=1e3;object.hiddenState.properties.opacity=1}if(is(object,"Preloader")){object.hiddenState.transitionDuration=2e3}if(is(object,"Column")){object.defaultState.transitionDuration=700;object.hiddenState.transitionDuration=1e3;object.hiddenState.properties.opacity=1}if(is(object,"Column3D")){object.hiddenState.properties.opacity=0}};const RESTFieldType$2={Blob:"esriFieldTypeBlob",Date:"esriFieldTypeDate",Double:"esriFieldTypeDouble",Geometry:"esriFieldTypeGeometry",GlobalID:"esriFieldTypeGlobalID",GUID:"esriFieldTypeGUID",Integer:"esriFieldTypeInteger",OID:"esriFieldTypeOID",Raster:"esriFieldTypeRaster",Single:"esriFieldTypeSingle",SmallInteger:"esriFieldTypeSmallInteger",String:"esriFieldTypeString",XML:"esriFieldTypeXML"};const RESTStatisticType$2={Count:"count",Sum:"sum",Minimum:"min",Maximum:"max",Average:"avg",StandardDeviation:"stddev",Variance:"var",ContinuousPercentile:"percentile_cont",DiscretePercentile:"percentile_disc",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate",NoAggregation:"no_aggregation"};const RESTSimpleLineSymbolStyle$1={Dash:"esriSLSDash",DashDot:"esriSLSDashDot",DashDotDot:"esriSLSDashDotDot",Dot:"esriSLSDot",Null:"esriSLSNull",Solid:"esriSLSSolid"};const RESTSimpleMarkerSymbolStyle={Circle:"esriSMSCircle",Cross:"esriSMSCross",Diamond:"esriSMSDiamond",Square:"esriSMSSquare",X:"esriSMSX",Triangle:"esriSMSTriangle"};const RESTSimpleFillSymbolStyle={BackwardDiagonal:"esriSFSBackwardDiagonal",Cross:"esriSFSCross",DiagonalCross:"esriSFSDiagonalCross",ForwardDiagonal:"esriSFSForwardDiagonal",Horizontal:"esriSFSHorizontal",Null:"esriSFSNull",Solid:"esriSFSSolid",Vertical:"esriSFSVertical"};const RESTHorizontalAlignment$1={Left:"left",Right:"right",Center:"center",Justify:"justify"};const RESTVerticalAlignment$1={Baseline:"baseline",Top:"top",Middle:"middle",Bottom:"bottom"};const RESTSymbolType$1={SLS:"esriSLS",SMS:"esriSMS",SFS:"esriSFS",PMS:"esriPMS",PFS:"esriPFS",TS:"esriTS"};const RESTRendererType$2={UniqueValue:"unique-value",Simple:"simple",ClassBreaks:"class-breaks",Heatmap:"heatmap",DotDensity:"dot-density",Dictionary:"dictionary",PieChart:"pie-chart"};const WebChartTypes$2={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const WebChartColoringPatterns$1={Single:"singleColor",Match:"colorMatch"};const WebChartLegendPositions={Left:"left",Right:"right",Top:"top",Bottom:"bottom"};const WebChartStackedKinds$2={Side:"sideBySide",Stacked:"stacked",Stacked100:"stacked100"};const WebChartSortOrderKinds$2={Ascending:"ASC",Descending:"DESC"};const WebChartDataSourceTypes$1={Inline:"inline",Layer:"layer"};const StatisticsDefaults$2={statisticType:RESTStatisticType$2.Count,sortingOrder:WebChartSortOrderKinds$2.Ascending};const WebChartLineSmoothedKinds$1={Bezier:"bezier",MonotoneX:"monotoneX",MonotoneY:"monotoneY"};const WebChartTimeIntervalUnits$2={Seconds:"esriTimeUnitsSeconds",Minutes:"esriTimeUnitsMinutes",Hours:"esriTimeUnitsHours",Days:"esriTimeUnitsDays",Weeks:"esriTimeUnitsWeeks",Months:"esriTimeUnitsMonths",Years:"esriTimeUnitsYears"};const WebChartNullPolicyTypes$1={Null:"null",Zero:"zero",Interpolate:"interpolate"};const WebChartLabelBehavior={None:"none",Rotate:"rotate",Stagger:"stagger",Wrap:"wrap"};const WebChartAxisTypes={Value:"value",Date:"date",Category:"category"};const SizePolicyScaleTypes={Linear:"linear",Logarithmic:"logarithmic"};const defaultPieFromFieldsName$1="arcgis_charts_pie_from_fields_name";const defaultPieFromFieldsValue$1="arcgis_charts_pie_from_fields_value";var freeGlobal$3=typeof global=="object"&&global&&global.Object===Object&&global;var freeGlobal$4=freeGlobal$3;var freeSelf$2=typeof self=="object"&&self&&self.Object===Object&&self;var root$3=freeGlobal$4||freeSelf$2||Function("return this")();var root$4=root$3;var Symbol$3=root$4.Symbol;var Symbol$4=Symbol$3;var objectProto$x=Object.prototype;var hasOwnProperty$r=objectProto$x.hasOwnProperty;var nativeObjectToString$4=objectProto$x.toString;var symToStringTag$4=Symbol$4?Symbol$4.toStringTag:undefined;function getRawTag$2(value){var isOwn=hasOwnProperty$r.call(value,symToStringTag$4),tag=value[symToStringTag$4];try{value[symToStringTag$4]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString$4.call(value);if(unmasked){if(isOwn){value[symToStringTag$4]=tag}else{delete value[symToStringTag$4]}}return result}var objectProto$w=Object.prototype;var nativeObjectToString$3=objectProto$w.toString;function objectToString$2(value){return nativeObjectToString$3.call(value)}var nullTag$2="[object Null]",undefinedTag$2="[object Undefined]";var symToStringTag$3=Symbol$4?Symbol$4.toStringTag:undefined;function baseGetTag$2(value){if(value==null){return value===undefined?undefinedTag$2:nullTag$2}return symToStringTag$3&&symToStringTag$3 in Object(value)?getRawTag$2(value):objectToString$2(value)}function isObjectLike$2(value){return value!=null&&typeof value=="object"}var symbolTag$7="[object Symbol]";function isSymbol$2(value){return typeof value=="symbol"||isObjectLike$2(value)&&baseGetTag$2(value)==symbolTag$7}var isArray$3=Array.isArray;var isArray$4=isArray$3;var reWhitespace=/\s/;function trimmedEndIndex(string){var index=string.length;while(index--&&reWhitespace.test(string.charAt(index))){}return index}var reTrimStart=/^\s+/;function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}function isObject$2(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}var NAN=0/0;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value}if(isSymbol$2(value)){return NAN}if(isObject$2(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject$2(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var asyncTag$2="[object AsyncFunction]",funcTag$5="[object Function]",genTag$3="[object GeneratorFunction]",proxyTag$2="[object Proxy]";function isFunction$2(value){if(!isObject$2(value)){return false}var tag=baseGetTag$2(value);return tag==funcTag$5||tag==genTag$3||tag==asyncTag$2||tag==proxyTag$2}var coreJsData$3=root$4["__core-js_shared__"];var coreJsData$4=coreJsData$3;var maskSrcKey$2=function(){var uid=/[^.]+$/.exec(coreJsData$4&&coreJsData$4.keys&&coreJsData$4.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked$2(func){return!!maskSrcKey$2&&maskSrcKey$2 in func}var funcProto$6=Function.prototype;var funcToString$6=funcProto$6.toString;function toSource$2(func){if(func!=null){try{return funcToString$6.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar$2=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor$2=/^\[object .+?Constructor\]$/;var funcProto$5=Function.prototype,objectProto$v=Object.prototype;var funcToString$5=funcProto$5.toString;var hasOwnProperty$q=objectProto$v.hasOwnProperty;var reIsNative$2=RegExp("^"+funcToString$5.call(hasOwnProperty$q).replace(reRegExpChar$2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$2(value){if(!isObject$2(value)||isMasked$2(value)){return false}var pattern=isFunction$2(value)?reIsNative$2:reIsHostCtor$2;return pattern.test(toSource$2(value))}function getValue$2(object,key){return object==null?undefined:object[key]}function getNative$2(object,key){var value=getValue$2(object,key);return baseIsNative$2(value)?value:undefined}var WeakMap$3=getNative$2(root$4,"WeakMap");var WeakMap$4=WeakMap$3;var objectCreate$1=Object.create;var baseCreate$2=function(){function object(){}return function(proto){if(!isObject$2(proto)){return{}}if(objectCreate$1){return objectCreate$1(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();var baseCreate$3=baseCreate$2;function copyArray$1(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}var defineProperty$3=function(){try{var func=getNative$2(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var defineProperty$4=defineProperty$3;function arrayEach$1(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER$4=9007199254740991;var reIsUint$2=/^(?:0|[1-9]\d*)$/;function isIndex$2(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER$4:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint$2.test(value))&&(value>-1&&value%1==0&&value<length)}function baseAssignValue$2(object,key,value){if(key=="__proto__"&&defineProperty$4){defineProperty$4(object,key,{configurable:true,enumerable:true,value,writable:true})}else{object[key]=value}}function eq$2(value,other){return value===other||value!==value&&other!==other}var objectProto$u=Object.prototype;var hasOwnProperty$p=objectProto$u.hasOwnProperty;function assignValue$2(object,key,value){var objValue=object[key];if(!(hasOwnProperty$p.call(object,key)&&eq$2(objValue,value))||value===undefined&&!(key in object)){baseAssignValue$2(object,key,value)}}function copyObject$2(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue$2(object,key,newValue)}else{assignValue$2(object,key,newValue)}}return object}var MAX_SAFE_INTEGER$3=9007199254740991;function isLength$2(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$3}function isArrayLike$2(value){return value!=null&&isLength$2(value.length)&&!isFunction$2(value)}var objectProto$t=Object.prototype;function isPrototype$2(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$t;return value===proto}function baseTimes$2(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag$7="[object Arguments]";function baseIsArguments$2(value){return isObjectLike$2(value)&&baseGetTag$2(value)==argsTag$7}var objectProto$s=Object.prototype;var hasOwnProperty$o=objectProto$s.hasOwnProperty;var propertyIsEnumerable$3=objectProto$s.propertyIsEnumerable;var isArguments$3=baseIsArguments$2(function(){return arguments}())?baseIsArguments$2:function(value){return isObjectLike$2(value)&&hasOwnProperty$o.call(value,"callee")&&!propertyIsEnumerable$3.call(value,"callee")};var isArguments$4=isArguments$3;function stubFalse$2(){return false}var freeExports$6=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$6=freeExports$6&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$6=freeModule$6&&freeModule$6.exports===freeExports$6;var Buffer$5=moduleExports$6?root$4.Buffer:undefined;var nativeIsBuffer$2=Buffer$5?Buffer$5.isBuffer:undefined;var isBuffer$3=nativeIsBuffer$2||stubFalse$2;var isBuffer$4=isBuffer$3;var argsTag$6="[object Arguments]",arrayTag$5="[object Array]",boolTag$7="[object Boolean]",dateTag$7="[object Date]",errorTag$5="[object Error]",funcTag$4="[object Function]",mapTag$d="[object Map]",numberTag$7="[object Number]",objectTag$8="[object Object]",regexpTag$7="[object RegExp]",setTag$d="[object Set]",stringTag$7="[object String]",weakMapTag$5="[object WeakMap]";var arrayBufferTag$7="[object ArrayBuffer]",dataViewTag$9="[object DataView]",float32Tag$5="[object Float32Array]",float64Tag$5="[object Float64Array]",int8Tag$5="[object Int8Array]",int16Tag$5="[object Int16Array]",int32Tag$5="[object Int32Array]",uint8Tag$5="[object Uint8Array]",uint8ClampedTag$5="[object Uint8ClampedArray]",uint16Tag$5="[object Uint16Array]",uint32Tag$5="[object Uint32Array]";var typedArrayTags$2={};typedArrayTags$2[float32Tag$5]=typedArrayTags$2[float64Tag$5]=typedArrayTags$2[int8Tag$5]=typedArrayTags$2[int16Tag$5]=typedArrayTags$2[int32Tag$5]=typedArrayTags$2[uint8Tag$5]=typedArrayTags$2[uint8ClampedTag$5]=typedArrayTags$2[uint16Tag$5]=typedArrayTags$2[uint32Tag$5]=true;typedArrayTags$2[argsTag$6]=typedArrayTags$2[arrayTag$5]=typedArrayTags$2[arrayBufferTag$7]=typedArrayTags$2[boolTag$7]=typedArrayTags$2[dataViewTag$9]=typedArrayTags$2[dateTag$7]=typedArrayTags$2[errorTag$5]=typedArrayTags$2[funcTag$4]=typedArrayTags$2[mapTag$d]=typedArrayTags$2[numberTag$7]=typedArrayTags$2[objectTag$8]=typedArrayTags$2[regexpTag$7]=typedArrayTags$2[setTag$d]=typedArrayTags$2[stringTag$7]=typedArrayTags$2[weakMapTag$5]=false;function baseIsTypedArray$2(value){return isObjectLike$2(value)&&isLength$2(value.length)&&!!typedArrayTags$2[baseGetTag$2(value)]}function baseUnary$2(func){return function(value){return func(value)}}var freeExports$5=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$5=freeExports$5&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$5=freeModule$5&&freeModule$5.exports===freeExports$5;var freeProcess$2=moduleExports$5&&freeGlobal$4.process;var nodeUtil$3=function(){try{var types=freeModule$5&&freeModule$5.require&&freeModule$5.require("util").types;if(types){return types}return freeProcess$2&&freeProcess$2.binding&&freeProcess$2.binding("util")}catch(e){}}();var nodeUtil$4=nodeUtil$3;var nodeIsTypedArray$2=nodeUtil$4&&nodeUtil$4.isTypedArray;var isTypedArray$3=nodeIsTypedArray$2?baseUnary$2(nodeIsTypedArray$2):baseIsTypedArray$2;var isTypedArray$4=isTypedArray$3;var objectProto$r=Object.prototype;var hasOwnProperty$n=objectProto$r.hasOwnProperty;function arrayLikeKeys$2(value,inherited){var isArr=isArray$4(value),isArg=!isArr&&isArguments$4(value),isBuff=!isArr&&!isArg&&isBuffer$4(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray$4(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes$2(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$n.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex$2(key,length)))){result.push(key)}}return result}function overArg$2(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys$3=overArg$2(Object.keys,Object);var nativeKeys$4=nativeKeys$3;var objectProto$q=Object.prototype;var hasOwnProperty$m=objectProto$q.hasOwnProperty;function baseKeys$2(object){if(!isPrototype$2(object)){return nativeKeys$4(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$m.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys$2(object){return isArrayLike$2(object)?arrayLikeKeys$2(object):baseKeys$2(object)}function nativeKeysIn$2(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}var objectProto$p=Object.prototype;var hasOwnProperty$l=objectProto$p.hasOwnProperty;function baseKeysIn$2(object){if(!isObject$2(object)){return nativeKeysIn$2(object)}var isProto=isPrototype$2(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty$l.call(object,key)))){result.push(key)}}return result}function keysIn$2(object){return isArrayLike$2(object)?arrayLikeKeys$2(object,true):baseKeysIn$2(object)}var nativeCreate$2=getNative$2(Object,"create");var nativeCreate$3=nativeCreate$2;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{};this.size=0}function hashDelete$1(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED$5="__lodash_hash_undefined__";var objectProto$o=Object.prototype;var hasOwnProperty$k=objectProto$o.hasOwnProperty;function hashGet$1(key){var data=this.__data__;if(nativeCreate$3){var result=data[key];return result===HASH_UNDEFINED$5?undefined:result}return hasOwnProperty$k.call(data,key)?data[key]:undefined}var objectProto$n=Object.prototype;var hasOwnProperty$j=objectProto$n.hasOwnProperty;function hashHas$1(key){var data=this.__data__;return nativeCreate$3?data[key]!==undefined:hasOwnProperty$j.call(data,key)}var HASH_UNDEFINED$4="__lodash_hash_undefined__";function hashSet$1(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate$3&&value===undefined?HASH_UNDEFINED$4:value;return this}function Hash$1(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash$1.prototype.clear=hashClear$1;Hash$1.prototype["delete"]=hashDelete$1;Hash$1.prototype.get=hashGet$1;Hash$1.prototype.has=hashHas$1;Hash$1.prototype.set=hashSet$1;function listCacheClear$1(){this.__data__=[];this.size=0}function assocIndexOf$1(array,key){var length=array.length;while(length--){if(eq$2(array[length][0],key)){return length}}return-1}var arrayProto$1=Array.prototype;var splice$1=arrayProto$1.splice;function listCacheDelete$1(key){var data=this.__data__,index=assocIndexOf$1(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice$1.call(data,index,1)}--this.size;return true}function listCacheGet$1(key){var data=this.__data__,index=assocIndexOf$1(data,key);return index<0?undefined:data[index][1]}function listCacheHas$1(key){return assocIndexOf$1(this.__data__,key)>-1}function listCacheSet$1(key,value){var data=this.__data__,index=assocIndexOf$1(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache$1(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache$1.prototype.clear=listCacheClear$1;ListCache$1.prototype["delete"]=listCacheDelete$1;ListCache$1.prototype.get=listCacheGet$1;ListCache$1.prototype.has=listCacheHas$1;ListCache$1.prototype.set=listCacheSet$1;var Map$3=getNative$2(root$4,"Map");var Map$4=Map$3;function mapCacheClear$1(){this.size=0;this.__data__={hash:new Hash$1,map:new(Map$4||ListCache$1),string:new Hash$1}}function isKeyable$1(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData$1(map,key){var data=map.__data__;return isKeyable$1(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete$1(key){var result=getMapData$1(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet$1(key){return getMapData$1(this,key).get(key)}function mapCacheHas$1(key){return getMapData$1(this,key).has(key)}function mapCacheSet$1(key,value){var data=getMapData$1(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache$1(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache$1.prototype.clear=mapCacheClear$1;MapCache$1.prototype["delete"]=mapCacheDelete$1;MapCache$1.prototype.get=mapCacheGet$1;MapCache$1.prototype.has=mapCacheHas$1;MapCache$1.prototype.set=mapCacheSet$1;function arrayPush$1(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}var getPrototype$3=overArg$2(Object.getPrototypeOf,Object);var getPrototype$4=getPrototype$3;function stackClear$1(){this.__data__=new ListCache$1;this.size=0}function stackDelete$1(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet$1(key){return this.__data__.get(key)}function stackHas$1(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE$1=200;function stackSet$1(key,value){var data=this.__data__;if(data instanceof ListCache$1){var pairs=data.__data__;if(!Map$4||pairs.length<LARGE_ARRAY_SIZE$1-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache$1(pairs)}data.set(key,value);this.size=data.size;return this}function Stack$1(entries){var data=this.__data__=new ListCache$1(entries);this.size=data.size}Stack$1.prototype.clear=stackClear$1;Stack$1.prototype["delete"]=stackDelete$1;Stack$1.prototype.get=stackGet$1;Stack$1.prototype.has=stackHas$1;Stack$1.prototype.set=stackSet$1;function baseAssign$1(object,source){return object&&copyObject$2(source,keys$2(source),object)}function baseAssignIn$1(object,source){return object&&copyObject$2(source,keysIn$2(source),object)}var freeExports$4=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$4=freeExports$4&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$4=freeModule$4&&freeModule$4.exports===freeExports$4;var Buffer$4=moduleExports$4?root$4.Buffer:undefined,allocUnsafe$1=Buffer$4?Buffer$4.allocUnsafe:undefined;function cloneBuffer$1(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe$1?allocUnsafe$1(length):new buffer.constructor(length);buffer.copy(result);return result}function arrayFilter$1(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray$1(){return[]}var objectProto$m=Object.prototype;var propertyIsEnumerable$2=objectProto$m.propertyIsEnumerable;var nativeGetSymbols$3=Object.getOwnPropertySymbols;var getSymbols$2=!nativeGetSymbols$3?stubArray$1:function(object){if(object==null){return[]}object=Object(object);return arrayFilter$1(nativeGetSymbols$3(object),(function(symbol){return propertyIsEnumerable$2.call(object,symbol)}))};var getSymbols$3=getSymbols$2;function copySymbols$1(source,object){return copyObject$2(source,getSymbols$3(source),object)}var nativeGetSymbols$2=Object.getOwnPropertySymbols;var getSymbolsIn$2=!nativeGetSymbols$2?stubArray$1:function(object){var result=[];while(object){arrayPush$1(result,getSymbols$3(object));object=getPrototype$4(object)}return result};var getSymbolsIn$3=getSymbolsIn$2;function copySymbolsIn$1(source,object){return copyObject$2(source,getSymbolsIn$3(source),object)}function baseGetAllKeys$1(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray$4(object)?result:arrayPush$1(result,symbolsFunc(object))}function getAllKeys$1(object){return baseGetAllKeys$1(object,keys$2,getSymbols$3)}function getAllKeysIn$1(object){return baseGetAllKeys$1(object,keysIn$2,getSymbolsIn$3)}var DataView$3=getNative$2(root$4,"DataView");var DataView$4=DataView$3;var Promise$3=getNative$2(root$4,"Promise");var Promise$4=Promise$3;var Set$3=getNative$2(root$4,"Set");var Set$4=Set$3;var mapTag$c="[object Map]",objectTag$7="[object Object]",promiseTag$2="[object Promise]",setTag$c="[object Set]",weakMapTag$4="[object WeakMap]";var dataViewTag$8="[object DataView]";var dataViewCtorString$2=toSource$2(DataView$4),mapCtorString$2=toSource$2(Map$4),promiseCtorString$2=toSource$2(Promise$4),setCtorString$2=toSource$2(Set$4),weakMapCtorString$2=toSource$2(WeakMap$4);var getTag$3=baseGetTag$2;if(DataView$4&&getTag$3(new DataView$4(new ArrayBuffer(1)))!=dataViewTag$8||Map$4&&getTag$3(new Map$4)!=mapTag$c||Promise$4&&getTag$3(Promise$4.resolve())!=promiseTag$2||Set$4&&getTag$3(new Set$4)!=setTag$c||WeakMap$4&&getTag$3(new WeakMap$4)!=weakMapTag$4){getTag$3=function(value){var result=baseGetTag$2(value),Ctor=result==objectTag$7?value.constructor:undefined,ctorString=Ctor?toSource$2(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString$2:return dataViewTag$8;case mapCtorString$2:return mapTag$c;case promiseCtorString$2:return promiseTag$2;case setCtorString$2:return setTag$c;case weakMapCtorString$2:return weakMapTag$4}}return result}}var getTag$4=getTag$3;var objectProto$l=Object.prototype;var hasOwnProperty$i=objectProto$l.hasOwnProperty;function initCloneArray$1(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty$i.call(array,"index")){result.index=array.index;result.input=array.input}return result}var Uint8Array$2=root$4.Uint8Array;var Uint8Array$3=Uint8Array$2;function cloneArrayBuffer$1(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array$3(result).set(new Uint8Array$3(arrayBuffer));return result}function cloneDataView$1(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer$1(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}var reFlags$1=/\w*$/;function cloneRegExp$1(regexp){var result=new regexp.constructor(regexp.source,reFlags$1.exec(regexp));result.lastIndex=regexp.lastIndex;return result}var symbolProto$5=Symbol$4?Symbol$4.prototype:undefined,symbolValueOf$3=symbolProto$5?symbolProto$5.valueOf:undefined;function cloneSymbol$1(symbol){return symbolValueOf$3?Object(symbolValueOf$3.call(symbol)):{}}function cloneTypedArray$1(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer$1(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var boolTag$6="[object Boolean]",dateTag$6="[object Date]",mapTag$b="[object Map]",numberTag$6="[object Number]",regexpTag$6="[object RegExp]",setTag$b="[object Set]",stringTag$6="[object String]",symbolTag$6="[object Symbol]";var arrayBufferTag$6="[object ArrayBuffer]",dataViewTag$7="[object DataView]",float32Tag$4="[object Float32Array]",float64Tag$4="[object Float64Array]",int8Tag$4="[object Int8Array]",int16Tag$4="[object Int16Array]",int32Tag$4="[object Int32Array]",uint8Tag$4="[object Uint8Array]",uint8ClampedTag$4="[object Uint8ClampedArray]",uint16Tag$4="[object Uint16Array]",uint32Tag$4="[object Uint32Array]";function initCloneByTag$1(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$6:return cloneArrayBuffer$1(object);case boolTag$6:case dateTag$6:return new Ctor(+object);case dataViewTag$7:return cloneDataView$1(object,isDeep);case float32Tag$4:case float64Tag$4:case int8Tag$4:case int16Tag$4:case int32Tag$4:case uint8Tag$4:case uint8ClampedTag$4:case uint16Tag$4:case uint32Tag$4:return cloneTypedArray$1(object,isDeep);case mapTag$b:return new Ctor;case numberTag$6:case stringTag$6:return new Ctor(object);case regexpTag$6:return cloneRegExp$1(object);case setTag$b:return new Ctor;case symbolTag$6:return cloneSymbol$1(object)}}function initCloneObject$1(object){return typeof object.constructor=="function"&&!isPrototype$2(object)?baseCreate$3(getPrototype$4(object)):{}}var mapTag$a="[object Map]";function baseIsMap$1(value){return isObjectLike$2(value)&&getTag$4(value)==mapTag$a}var nodeIsMap$1=nodeUtil$4&&nodeUtil$4.isMap;var isMap$2=nodeIsMap$1?baseUnary$2(nodeIsMap$1):baseIsMap$1;var isMap$3=isMap$2;var setTag$a="[object Set]";function baseIsSet$1(value){return isObjectLike$2(value)&&getTag$4(value)==setTag$a}var nodeIsSet$1=nodeUtil$4&&nodeUtil$4.isSet;var isSet$2=nodeIsSet$1?baseUnary$2(nodeIsSet$1):baseIsSet$1;var isSet$3=isSet$2;var CLONE_DEEP_FLAG$3=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$3=4;var argsTag$5="[object Arguments]",arrayTag$4="[object Array]",boolTag$5="[object Boolean]",dateTag$5="[object Date]",errorTag$4="[object Error]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",mapTag$9="[object Map]",numberTag$5="[object Number]",objectTag$6="[object Object]",regexpTag$5="[object RegExp]",setTag$9="[object Set]",stringTag$5="[object String]",symbolTag$5="[object Symbol]",weakMapTag$3="[object WeakMap]";var arrayBufferTag$5="[object ArrayBuffer]",dataViewTag$6="[object DataView]",float32Tag$3="[object Float32Array]",float64Tag$3="[object Float64Array]",int8Tag$3="[object Int8Array]",int16Tag$3="[object Int16Array]",int32Tag$3="[object Int32Array]",uint8Tag$3="[object Uint8Array]",uint8ClampedTag$3="[object Uint8ClampedArray]",uint16Tag$3="[object Uint16Array]",uint32Tag$3="[object Uint32Array]";var cloneableTags$1={};cloneableTags$1[argsTag$5]=cloneableTags$1[arrayTag$4]=cloneableTags$1[arrayBufferTag$5]=cloneableTags$1[dataViewTag$6]=cloneableTags$1[boolTag$5]=cloneableTags$1[dateTag$5]=cloneableTags$1[float32Tag$3]=cloneableTags$1[float64Tag$3]=cloneableTags$1[int8Tag$3]=cloneableTags$1[int16Tag$3]=cloneableTags$1[int32Tag$3]=cloneableTags$1[mapTag$9]=cloneableTags$1[numberTag$5]=cloneableTags$1[objectTag$6]=cloneableTags$1[regexpTag$5]=cloneableTags$1[setTag$9]=cloneableTags$1[stringTag$5]=cloneableTags$1[symbolTag$5]=cloneableTags$1[uint8Tag$3]=cloneableTags$1[uint8ClampedTag$3]=cloneableTags$1[uint16Tag$3]=cloneableTags$1[uint32Tag$3]=true;cloneableTags$1[errorTag$4]=cloneableTags$1[funcTag$3]=cloneableTags$1[weakMapTag$3]=false;function baseClone$1(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$3,isFlat=bitmask&CLONE_FLAT_FLAG$1,isFull=bitmask&CLONE_SYMBOLS_FLAG$3;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject$2(value)){return value}var isArr=isArray$4(value);if(isArr){result=initCloneArray$1(value);if(!isDeep){return copyArray$1(value,result)}}else{var tag=getTag$4(value),isFunc=tag==funcTag$3||tag==genTag$2;if(isBuffer$4(value)){return cloneBuffer$1(value,isDeep)}if(tag==objectTag$6||tag==argsTag$5||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject$1(value);if(!isDeep){return isFlat?copySymbolsIn$1(value,baseAssignIn$1(result,value)):copySymbols$1(value,baseAssign$1(result,value))}}else{if(!cloneableTags$1[tag]){return object?value:{}}result=initCloneByTag$1(value,tag,isDeep)}}stack||(stack=new Stack$1);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet$3(value)){value.forEach((function(subValue){result.add(baseClone$1(subValue,bitmask,customizer,subValue,value,stack))}))}else if(isMap$3(value)){value.forEach((function(subValue,key){result.set(key,baseClone$1(subValue,bitmask,customizer,key,value,stack))}))}var keysFunc=isFull?isFlat?getAllKeysIn$1:getAllKeys$1:isFlat?keysIn$2:keys$2;var props=isArr?undefined:keysFunc(value);arrayEach$1(props||value,(function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue$2(result,key,baseClone$1(subValue,bitmask,customizer,key,value,stack))}));return result}var CLONE_DEEP_FLAG$2=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeep$1(value){return baseClone$1(value,CLONE_DEEP_FLAG$2|CLONE_SYMBOLS_FLAG$2)}var HASH_UNDEFINED$3="__lodash_hash_undefined__";function setCacheAdd$1(value){this.__data__.set(value,HASH_UNDEFINED$3);return this}function setCacheHas$1(value){return this.__data__.has(value)}function SetCache$1(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache$1;while(++index<length){this.add(values[index])}}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd$1;SetCache$1.prototype.has=setCacheHas$1;function arraySome$1(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas$1(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG$9=1,COMPARE_UNORDERED_FLAG$5=2;function equalArrays$1(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$9,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var arrStacked=stack.get(array);var othStacked=stack.get(other);if(arrStacked&&othStacked){return arrStacked==other&&othStacked==array}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG$5?new SetCache$1:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome$1(other,(function(othValue,othIndex){if(!cacheHas$1(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}}))){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function mapToArray$1(map){var index=-1,result=Array(map.size);map.forEach((function(value,key){result[++index]=[key,value]}));return result}function setToArray$1(set){var index=-1,result=Array(set.size);set.forEach((function(value){result[++index]=value}));return result}var COMPARE_PARTIAL_FLAG$8=1,COMPARE_UNORDERED_FLAG$4=2;var boolTag$4="[object Boolean]",dateTag$4="[object Date]",errorTag$3="[object Error]",mapTag$8="[object Map]",numberTag$4="[object Number]",regexpTag$4="[object RegExp]",setTag$8="[object Set]",stringTag$4="[object String]",symbolTag$4="[object Symbol]";var arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$5="[object DataView]";var symbolProto$4=Symbol$4?Symbol$4.prototype:undefined,symbolValueOf$2=symbolProto$4?symbolProto$4.valueOf:undefined;function equalByTag$1(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$5:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$4:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array$3(object),new Uint8Array$3(other))){return false}return true;case boolTag$4:case dateTag$4:case numberTag$4:return eq$2(+object,+other);case errorTag$3:return object.name==other.name&&object.message==other.message;case regexpTag$4:case stringTag$4:return object==other+"";case mapTag$8:var convert=mapToArray$1;case setTag$8:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$8;convert||(convert=setToArray$1);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$4;stack.set(object,other);var result=equalArrays$1(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag$4:if(symbolValueOf$2){return symbolValueOf$2.call(object)==symbolValueOf$2.call(other)}}return false}var COMPARE_PARTIAL_FLAG$7=1;var objectProto$k=Object.prototype;var hasOwnProperty$h=objectProto$k.hasOwnProperty;function equalObjects$1(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$7,objProps=getAllKeys$1(object),objLength=objProps.length,othProps=getAllKeys$1(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$h.call(other,key))){return false}}var objStacked=stack.get(object);var othStacked=stack.get(other);if(objStacked&&othStacked){return objStacked==other&&othStacked==object}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var COMPARE_PARTIAL_FLAG$6=1;var argsTag$4="[object Arguments]",arrayTag$3="[object Array]",objectTag$5="[object Object]";var objectProto$j=Object.prototype;var hasOwnProperty$g=objectProto$j.hasOwnProperty;function baseIsEqualDeep$1(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray$4(object),othIsArr=isArray$4(other),objTag=objIsArr?arrayTag$3:getTag$4(object),othTag=othIsArr?arrayTag$3:getTag$4(other);objTag=objTag==argsTag$4?objectTag$5:objTag;othTag=othTag==argsTag$4?objectTag$5:othTag;var objIsObj=objTag==objectTag$5,othIsObj=othTag==objectTag$5,isSameTag=objTag==othTag;if(isSameTag&&isBuffer$4(object)){if(!isBuffer$4(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack$1);return objIsArr||isTypedArray$4(object)?equalArrays$1(object,other,bitmask,customizer,equalFunc,stack):equalByTag$1(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$6)){var objIsWrapped=objIsObj&&hasOwnProperty$g.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty$g.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack$1);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack$1);return equalObjects$1(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual$1(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike$2(value)&&!isObjectLike$2(other)){return value!==value&&other!==other}return baseIsEqualDeep$1(value,other,bitmask,customizer,baseIsEqual$1,stack)}var now$1=function(){return root$4.Date.now()};var now$2=now$1;var FUNC_ERROR_TEXT$1="Expected a function";var nativeMax$2=Math.max,nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT$1)}wait=toNumber(wait)||0;if(isObject$2(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax$2(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now$2();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now$2())}function debounced(){var time=now$2(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var mapTag$7="[object Map]",setTag$7="[object Set]";var objectProto$i=Object.prototype;var hasOwnProperty$f=objectProto$i.hasOwnProperty;function isEmpty$1(value){if(value==null){return true}if(isArrayLike$2(value)&&(isArray$4(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer$4(value)||isTypedArray$4(value)||isArguments$4(value))){return!value.length}var tag=getTag$4(value);if(tag==mapTag$7||tag==setTag$7){return!value.size}if(isPrototype$2(value)){return!baseKeys$2(value).length}for(var key in value){if(hasOwnProperty$f.call(value,key)){return false}}return true}function isEqual$1(value,other){return baseIsEqual$1(value,other)}const RESTFieldType$1={Blob:"esriFieldTypeBlob",Date:"esriFieldTypeDate",Double:"esriFieldTypeDouble",Geometry:"esriFieldTypeGeometry",GlobalID:"esriFieldTypeGlobalID",GUID:"esriFieldTypeGUID",Integer:"esriFieldTypeInteger",OID:"esriFieldTypeOID",Raster:"esriFieldTypeRaster",Single:"esriFieldTypeSingle",SmallInteger:"esriFieldTypeSmallInteger",String:"esriFieldTypeString",XML:"esriFieldTypeXML"};const RESTStatisticType$1={Count:"count",Sum:"sum",Minimum:"min",Maximum:"max",Average:"avg",StandardDeviation:"stddev",Variance:"var",ContinuousPercentile:"percentile_cont",DiscretePercentile:"percentile_disc",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate",NoAggregation:"no_aggregation"};const RESTRendererType$1={UniqueValue:"unique-value",Simple:"simple",ClassBreaks:"class-breaks",Heatmap:"heatmap",DotDensity:"dot-density",Dictionary:"dictionary",PieChart:"pie-chart"};const RESTUnits={Feet:"feet",Miles:"miles",NauticalMiles:"nautical-miles",USNauticalMiles:"us-nautical-miles",Meters:"meters",Kilometers:"kilometers"};const WebChartTypes$1={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const WebChartDataTransformations$1={None:"none",Log:"logarithmic",Sqrt:"squareRoot"};const WebChartStackedKinds$1={Side:"sideBySide",Stacked:"stacked",Stacked100:"stacked100"};const WebChartSortOrderKinds$1={Ascending:"ASC",Descending:"DESC"};const StatisticsDefaults$1={statisticType:RESTStatisticType$1.Count,sortingOrder:WebChartSortOrderKinds$1.Ascending};const WebChartTimeIntervalUnits$1={Seconds:"esriTimeUnitsSeconds",Minutes:"esriTimeUnitsMinutes",Hours:"esriTimeUnitsHours",Days:"esriTimeUnitsDays",Weeks:"esriTimeUnitsWeeks",Months:"esriTimeUnitsMonths",Years:"esriTimeUnitsYears"};const GaugeChartSubTypes={FeatureGauge:"featureGauge",StatisticGauge:"statisticGauge"};function ascending$1(a,b){return a==null||b==null?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function descending(a,b){return a==null||b==null?NaN:b<a?-1:b>a?1:b>=a?0:NaN}function bisector(f){let compare1,compare2,delta;if(f.length!==2){compare1=ascending$1;compare2=(d,x)=>ascending$1(f(d),x);delta=(d,x)=>f(d)-x}else{compare1=f===ascending$1||f===descending?f:zero;compare2=f;delta=f}function left(a,x,lo=0,hi=a.length){if(lo<hi){if(compare1(x,x)!==0)return hi;do{const mid=lo+hi>>>1;if(compare2(a[mid],x)<0)lo=mid+1;else hi=mid}while(lo<hi)}return lo}function right(a,x,lo=0,hi=a.length){if(lo<hi){if(compare1(x,x)!==0)return hi;do{const mid=lo+hi>>>1;if(compare2(a[mid],x)<=0)lo=mid+1;else hi=mid}while(lo<hi)}return lo}function center(a,x,lo=0,hi=a.length){const i=left(a,x,lo,hi-1);return i>lo&&delta(a[i-1],x)>-delta(a[i],x)?i-1:i}return{left,center,right}}function zero(){return 0}function number(x){return x===null?NaN:+x}function*numbers$1(values,valueof){if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){yield value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){yield value}}}}const ascendingBisect=bisector(ascending$1);const bisectRight=ascendingBisect.right;bisector(number).center;var bisect=bisectRight;function count(values,valueof){let count=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){++count}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){++count}}}return count}function variance$1(values,valueof){let count=0;let delta;let mean=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}if(count>1)return sum/(count-1)}function deviation$1(values,valueof){const v=variance$1(values,valueof);return v?Math.sqrt(v):v}function extent(values,valueof){let min;let max;if(valueof===undefined){for(const value of values){if(value!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null){if(min===undefined){if(value>=value)min=max=value}else{if(min>value)min=value;if(max<value)max=value}}}}return[min,max]}function identity$1$1(x){return x}function compareDefined$1(compare=ascending$1){if(compare===ascending$1)return ascendingDefined$1;if(typeof compare!=="function")throw new TypeError("compare is not a function");return(a,b)=>{const x=compare(a,b);if(x||x===0)return x;return(compare(b,b)===0)-(compare(a,a)===0)}}function ascendingDefined$1(a,b){return(a==null||!(a>=a))-(b==null||!(b>=b))||(a<b?-1:a>b?1:0)}var array=Array.prototype;var slice=array.slice;function constant$1(x){return()=>x}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(start,stop,count){const step=(stop-start)/Math.max(0,count),power=Math.floor(Math.log10(step)),error=step/Math.pow(10,power),factor=error>=e10?10:error>=e5?5:error>=e2?2:1;let i1,i2,inc;if(power<0){inc=Math.pow(10,-power)/factor;i1=Math.round(start*inc);i2=Math.round(stop*inc);if(i1/inc<start)++i1;if(i2/inc>stop)--i2;inc=-inc}else{inc=Math.pow(10,power)*factor;i1=Math.round(start/inc);i2=Math.round(stop/inc);if(i1*inc<start)++i1;if(i2*inc>stop)--i2}if(i2<i1&&.5<=count&&count<2)return tickSpec(start,stop,count*2);return[i1,i2,inc]}function ticks(start,stop,count){stop=+stop,start=+start,count=+count;if(!(count>0))return[];if(start===stop)return[start];const reverse=stop<start,[i1,i2,inc]=reverse?tickSpec(stop,start,count):tickSpec(start,stop,count);if(!(i2>=i1))return[];const n=i2-i1+1,ticks=new Array(n);if(reverse){if(inc<0)for(let i=0;i<n;++i)ticks[i]=(i2-i)/-inc;else for(let i=0;i<n;++i)ticks[i]=(i2-i)*inc}else{if(inc<0)for(let i=0;i<n;++i)ticks[i]=(i1+i)/-inc;else for(let i=0;i<n;++i)ticks[i]=(i1+i)*inc}return ticks}function tickIncrement(start,stop,count){stop=+stop,start=+start,count=+count;return tickSpec(start,stop,count)[2]}function nice(start,stop,count){let prestep;while(true){const step=tickIncrement(start,stop,count);if(step===prestep||step===0||!isFinite(step)){return[start,stop]}else if(step>0){start=Math.floor(start/step)*step;stop=Math.ceil(stop/step)*step}else if(step<0){start=Math.ceil(start*step)/step;stop=Math.floor(stop*step)/step}prestep=step}}function thresholdSturges(values){return Math.max(1,Math.ceil(Math.log(count(values))/Math.LN2)+1)}function bin(){var value=identity$1$1,domain=extent,threshold=thresholdSturges;function histogram(data){if(!Array.isArray(data))data=Array.from(data);var i,n=data.length,x,step,values=new Array(n);for(i=0;i<n;++i){values[i]=value(data[i],i,data)}var xz=domain(values),x0=xz[0],x1=xz[1],tz=threshold(values,x0,x1);if(!Array.isArray(tz)){const max=x1,tn=+tz;if(domain===extent)[x0,x1]=nice(x0,x1,tn);tz=ticks(x0,x1,tn);if(tz[0]<=x0)step=tickIncrement(x0,x1,tn);if(tz[tz.length-1]>=x1){if(max>=x1&&domain===extent){const step=tickIncrement(x0,x1,tn);if(isFinite(step)){if(step>0){x1=(Math.floor(x1/step)+1)*step}else if(step<0){x1=(Math.ceil(x1*-step)+1)/-step}}}else{tz.pop()}}}var m=tz.length,a=0,b=m;while(tz[a]<=x0)++a;while(tz[b-1]>x1)--b;if(a||b<m)tz=tz.slice(a,b),m=b-a;var bins=new Array(m+1),bin;for(i=0;i<=m;++i){bin=bins[i]=[];bin.x0=i>0?tz[i-1]:x0;bin.x1=i<m?tz[i]:x1}if(isFinite(step)){if(step>0){for(i=0;i<n;++i){if((x=values[i])!=null&&x0<=x&&x<=x1){bins[Math.min(m,Math.floor((x-x0)/step))].push(data[i])}}}else if(step<0){for(i=0;i<n;++i){if((x=values[i])!=null&&x0<=x&&x<=x1){const j=Math.floor((x0-x)*step);bins[Math.min(m,j+(tz[j]<=x))].push(data[i])}}}}else{for(i=0;i<n;++i){if((x=values[i])!=null&&x0<=x&&x<=x1){bins[bisect(tz,x,0,m)].push(data[i])}}}return bins}histogram.value=function(_){return arguments.length?(value=typeof _==="function"?_:constant$1(_),histogram):value};histogram.domain=function(_){return arguments.length?(domain=typeof _==="function"?_:constant$1([_[0],_[1]]),histogram):domain};histogram.thresholds=function(_){return arguments.length?(threshold=typeof _==="function"?_:constant$1(Array.isArray(_)?slice.call(_):_),histogram):threshold};return histogram}function max$1(values,valueof){let max;if(valueof===undefined){for(const value of values){if(value!=null&&(max<value||max===undefined&&value>=value)){max=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(max<value||max===undefined&&value>=value)){max=value}}}return max}function min$1(values,valueof){let min;if(valueof===undefined){for(const value of values){if(value!=null&&(min>value||min===undefined&&value>=value)){min=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(min>value||min===undefined&&value>=value)){min=value}}}return min}function quickselect$1(array,k,left=0,right=Infinity,compare){k=Math.floor(k);left=Math.floor(Math.max(0,left));right=Math.floor(Math.min(array.length-1,right));if(!(left<=k&&k<=right))return array;compare=compare===undefined?ascendingDefined$1:compareDefined$1(compare);while(right>left){if(right-left>600){const n=right-left+1;const m=k-left+1;const z=Math.log(n);const s=.5*Math.exp(2*z/3);const sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);const newLeft=Math.max(left,Math.floor(k-m*s/n+sd));const newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselect$1(array,k,newLeft,newRight,compare)}const t=array[k];let i=left;let j=right;swap$1(array,left,k);if(compare(array[right],t)>0)swap$1(array,left,right);while(i<j){swap$1(array,i,j),++i,--j;while(compare(array[i],t)<0)++i;while(compare(array[j],t)>0)--j}if(compare(array[left],t)===0)swap$1(array,left,j);else++j,swap$1(array,j,right);if(j<=k)left=j+1;if(k<=j)right=j-1}return array}function swap$1(array,i,j){const t=array[i];array[i]=array[j];array[j]=t}function quantile$1(values,p,valueof){values=Float64Array.from(numbers$1(values,valueof));if(!(n=values.length)||isNaN(p=+p))return;if(p<=0||n<2)return min$1(values);if(p>=1)return max$1(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max$1(quickselect$1(values,i0).subarray(0,i0+1)),value1=min$1(values.subarray(i0+1));return value0+(value1-value0)*(i-i0)}function mean$1(values,valueof){let count=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){++count,sum+=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){++count,sum+=value}}}if(count)return sum/count}function median$1(values,valueof){return quantile$1(values,.5,valueof)}function range$1(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=new Array(n);while(++i<n){range[i]=start+i*step}return range}function sum$1(values,valueof){let sum=0;if(valueof===undefined){for(let value of values){if(value=+value){sum+=value}}}else{let index=-1;for(let value of values){if(value=+valueof(value,++index,values)){sum+=value}}}return sum}var freeGlobal$2=typeof global=="object"&&global&&global.Object===Object&&global;var freeGlobal$1$1=freeGlobal$2;var freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self;var root$2=freeGlobal$1$1||freeSelf$1||Function("return this")();var root$1$1=root$2;var Symbol$1$1=root$1$1.Symbol;var Symbol$2$1=Symbol$1$1;var objectProto$h=Object.prototype;var hasOwnProperty$e=objectProto$h.hasOwnProperty;var nativeObjectToString$1$1=objectProto$h.toString;var symToStringTag$1$1=Symbol$2$1?Symbol$2$1.toStringTag:undefined;function getRawTag$1(value){var isOwn=hasOwnProperty$e.call(value,symToStringTag$1$1),tag=value[symToStringTag$1$1];try{value[symToStringTag$1$1]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString$1$1.call(value);if(unmasked){if(isOwn){value[symToStringTag$1$1]=tag}else{delete value[symToStringTag$1$1]}}return result}var objectProto$g=Object.prototype;var nativeObjectToString$2=objectProto$g.toString;function objectToString$1(value){return nativeObjectToString$2.call(value)}var nullTag$1="[object Null]",undefinedTag$1="[object Undefined]";var symToStringTag$2=Symbol$2$1?Symbol$2$1.toStringTag:undefined;function baseGetTag$1(value){if(value==null){return value===undefined?undefinedTag$1:nullTag$1}return symToStringTag$2&&symToStringTag$2 in Object(value)?getRawTag$1(value):objectToString$1(value)}function isObjectLike$1(value){return value!=null&&typeof value=="object"}var symbolTag$2$1="[object Symbol]";function isSymbol$1(value){return typeof value=="symbol"||isObjectLike$1(value)&&baseGetTag$1(value)==symbolTag$2$1}function arrayMap$1(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray$2=Array.isArray;var isArray$1$1=isArray$2;var INFINITY$2=1/0;var symbolProto$1$1=Symbol$2$1?Symbol$2$1.prototype:undefined,symbolToString$1=symbolProto$1$1?symbolProto$1$1.toString:undefined;function baseToString$1(value){if(typeof value=="string"){return value}if(isArray$1$1(value)){return arrayMap$1(value,baseToString$1)+""}if(isSymbol$1(value)){return symbolToString$1?symbolToString$1.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY$2?"-0":result}function isObject$1(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function identity$2(value){return value}var asyncTag$1="[object AsyncFunction]",funcTag$2$1="[object Function]",genTag$1$1="[object GeneratorFunction]",proxyTag$1="[object Proxy]";function isFunction$1(value){if(!isObject$1(value)){return false}var tag=baseGetTag$1(value);return tag==funcTag$2$1||tag==genTag$1$1||tag==asyncTag$1||tag==proxyTag$1}var coreJsData$2=root$1$1["__core-js_shared__"];var coreJsData$1$1=coreJsData$2;var maskSrcKey$1=function(){var uid=/[^.]+$/.exec(coreJsData$1$1&&coreJsData$1$1.keys&&coreJsData$1$1.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked$1(func){return!!maskSrcKey$1&&maskSrcKey$1 in func}var funcProto$3=Function.prototype;var funcToString$3=funcProto$3.toString;function toSource$1(func){if(func!=null){try{return funcToString$3.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor$1=/^\[object .+?Constructor\]$/;var funcProto$2=Function.prototype,objectProto$f$1=Object.prototype;var funcToString$2=funcProto$2.toString;var hasOwnProperty$d$1=objectProto$f$1.hasOwnProperty;var reIsNative$1=RegExp("^"+funcToString$2.call(hasOwnProperty$d$1).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(value){if(!isObject$1(value)||isMasked$1(value)){return false}var pattern=isFunction$1(value)?reIsNative$1:reIsHostCtor$1;return pattern.test(toSource$1(value))}function getValue$1(object,key){return object==null?undefined:object[key]}function getNative$1(object,key){var value=getValue$1(object,key);return baseIsNative$1(value)?value:undefined}var WeakMap$2=getNative$1(root$1$1,"WeakMap");var WeakMap$1$1=WeakMap$2;function apply$1(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}var HOT_COUNT$1=800,HOT_SPAN$1=16;var nativeNow$1=Date.now;function shortOut$1(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow$1(),remaining=HOT_SPAN$1-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT$1){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function constant$2(value){return function(){return value}}var defineProperty$2=function(){try{var func=getNative$1(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var defineProperty$1$1=defineProperty$2;var baseSetToString$2=!defineProperty$1$1?identity$2:function(func,string){return defineProperty$1$1(func,"toString",{configurable:true,enumerable:false,value:constant$2(string),writable:true})};var baseSetToString$1$1=baseSetToString$2;var setToString$2=shortOut$1(baseSetToString$1$1);var setToString$1$1=setToString$2;var MAX_SAFE_INTEGER$1$1=9007199254740991;var reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$1(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER$1$1:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint$1.test(value))&&(value>-1&&value%1==0&&value<length)}function baseAssignValue$1(object,key,value){if(key=="__proto__"&&defineProperty$1$1){defineProperty$1$1(object,key,{configurable:true,enumerable:true,value,writable:true})}else{object[key]=value}}function eq$1(value,other){return value===other||value!==value&&other!==other}var objectProto$e$1=Object.prototype;var hasOwnProperty$c$1=objectProto$e$1.hasOwnProperty;function assignValue$1(object,key,value){var objValue=object[key];if(!(hasOwnProperty$c$1.call(object,key)&&eq$1(objValue,value))||value===undefined&&!(key in object)){baseAssignValue$1(object,key,value)}}function copyObject$1(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue$1(object,key,newValue)}else{assignValue$1(object,key,newValue)}}return object}var nativeMax$1=Math.max;function overRest$1(func,start,transform){start=nativeMax$1(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax$1(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply$1(func,this,otherArgs)}}function baseRest$1(func,start){return setToString$1$1(overRest$1(func,start,identity$2),func+"")}var MAX_SAFE_INTEGER$2=9007199254740991;function isLength$1(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$2}function isArrayLike$1(value){return value!=null&&isLength$1(value.length)&&!isFunction$1(value)}function isIterateeCall$1(value,index,object){if(!isObject$1(object)){return false}var type=typeof index;if(type=="number"?isArrayLike$1(object)&&isIndex$1(index,object.length):type=="string"&&index in object){return eq$1(object[index],value)}return false}function createAssigner(assigner){return baseRest$1((function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall$1(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object}))}var objectProto$d$1=Object.prototype;function isPrototype$1(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$d$1;return value===proto}function baseTimes$1(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag$2$1="[object Arguments]";function baseIsArguments$1(value){return isObjectLike$1(value)&&baseGetTag$1(value)==argsTag$2$1}var objectProto$c$1=Object.prototype;var hasOwnProperty$b$1=objectProto$c$1.hasOwnProperty;var propertyIsEnumerable$1$1=objectProto$c$1.propertyIsEnumerable;var isArguments$2=baseIsArguments$1(function(){return arguments}())?baseIsArguments$1:function(value){return isObjectLike$1(value)&&hasOwnProperty$b$1.call(value,"callee")&&!propertyIsEnumerable$1$1.call(value,"callee")};var isArguments$1$1=isArguments$2;function stubFalse$1(){return false}var freeExports$2$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$2$1=freeExports$2$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$2$1=freeModule$2$1&&freeModule$2$1.exports===freeExports$2$1;var Buffer$1$1=moduleExports$2$1?root$1$1.Buffer:undefined;var nativeIsBuffer$1=Buffer$1$1?Buffer$1$1.isBuffer:undefined;var isBuffer$2=nativeIsBuffer$1||stubFalse$1;var isBuffer$1$1=isBuffer$2;var argsTag$1$1="[object Arguments]",arrayTag$1$1="[object Array]",boolTag$2$1="[object Boolean]",dateTag$2$1="[object Date]",errorTag$2$1="[object Error]",funcTag$1$1="[object Function]",mapTag$5$1="[object Map]",numberTag$2$1="[object Number]",objectTag$4="[object Object]",regexpTag$2$1="[object RegExp]",setTag$5$1="[object Set]",stringTag$2$1="[object String]",weakMapTag$2$1="[object WeakMap]";var arrayBufferTag$2$1="[object ArrayBuffer]",dataViewTag$3$1="[object DataView]",float32Tag$2$1="[object Float32Array]",float64Tag$2$1="[object Float64Array]",int8Tag$2$1="[object Int8Array]",int16Tag$2$1="[object Int16Array]",int32Tag$2$1="[object Int32Array]",uint8Tag$2$1="[object Uint8Array]",uint8ClampedTag$2$1="[object Uint8ClampedArray]",uint16Tag$2$1="[object Uint16Array]",uint32Tag$2$1="[object Uint32Array]";var typedArrayTags$1={};typedArrayTags$1[float32Tag$2$1]=typedArrayTags$1[float64Tag$2$1]=typedArrayTags$1[int8Tag$2$1]=typedArrayTags$1[int16Tag$2$1]=typedArrayTags$1[int32Tag$2$1]=typedArrayTags$1[uint8Tag$2$1]=typedArrayTags$1[uint8ClampedTag$2$1]=typedArrayTags$1[uint16Tag$2$1]=typedArrayTags$1[uint32Tag$2$1]=true;typedArrayTags$1[argsTag$1$1]=typedArrayTags$1[arrayTag$1$1]=typedArrayTags$1[arrayBufferTag$2$1]=typedArrayTags$1[boolTag$2$1]=typedArrayTags$1[dataViewTag$3$1]=typedArrayTags$1[dateTag$2$1]=typedArrayTags$1[errorTag$2$1]=typedArrayTags$1[funcTag$1$1]=typedArrayTags$1[mapTag$5$1]=typedArrayTags$1[numberTag$2$1]=typedArrayTags$1[objectTag$4]=typedArrayTags$1[regexpTag$2$1]=typedArrayTags$1[setTag$5$1]=typedArrayTags$1[stringTag$2$1]=typedArrayTags$1[weakMapTag$2$1]=false;function baseIsTypedArray$1(value){return isObjectLike$1(value)&&isLength$1(value.length)&&!!typedArrayTags$1[baseGetTag$1(value)]}function baseUnary$1(func){return function(value){return func(value)}}var freeExports$1$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1$1=freeExports$1$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1$1=freeModule$1$1&&freeModule$1$1.exports===freeExports$1$1;var freeProcess$1=moduleExports$1$1&&freeGlobal$1$1.process;var nodeUtil$2=function(){try{var types=freeModule$1$1&&freeModule$1$1.require&&freeModule$1$1.require("util").types;if(types){return types}return freeProcess$1&&freeProcess$1.binding&&freeProcess$1.binding("util")}catch(e){}}();var nodeUtil$1$1=nodeUtil$2;var nodeIsTypedArray$1=nodeUtil$1$1&&nodeUtil$1$1.isTypedArray;var isTypedArray$2=nodeIsTypedArray$1?baseUnary$1(nodeIsTypedArray$1):baseIsTypedArray$1;var isTypedArray$1$1=isTypedArray$2;var objectProto$b$1=Object.prototype;var hasOwnProperty$a$1=objectProto$b$1.hasOwnProperty;function arrayLikeKeys$1(value,inherited){var isArr=isArray$1$1(value),isArg=!isArr&&isArguments$1$1(value),isBuff=!isArr&&!isArg&&isBuffer$1$1(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray$1$1(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes$1(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$a$1.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex$1(key,length)))){result.push(key)}}return result}function overArg$1(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys$2=overArg$1(Object.keys,Object);var nativeKeys$1$1=nativeKeys$2;var objectProto$a$1=Object.prototype;var hasOwnProperty$9$1=objectProto$a$1.hasOwnProperty;function baseKeys$1(object){if(!isPrototype$1(object)){return nativeKeys$1$1(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$9$1.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys$1(object){return isArrayLike$1(object)?arrayLikeKeys$1(object):baseKeys$1(object)}function nativeKeysIn$1(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}var objectProto$9$1=Object.prototype;var hasOwnProperty$8$1=objectProto$9$1.hasOwnProperty;function baseKeysIn$1(object){if(!isObject$1(object)){return nativeKeysIn$1(object)}var isProto=isPrototype$1(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty$8$1.call(object,key)))){result.push(key)}}return result}function keysIn$1(object){return isArrayLike$1(object)?arrayLikeKeys$1(object,true):baseKeysIn$1(object)}var assignInWith=createAssigner((function(object,source,srcIndex,customizer){copyObject$1(source,keysIn$1(source),object,customizer)}));var extendWith=assignInWith;getNative$1(Object,"create");var Map$1$1=getNative$1(root$1$1,"Map");var Map$2$1=Map$1$1;function toString$1(value){return value==null?"":baseToString$1(value)}var getPrototype$1$1=overArg$1(Object.getPrototypeOf,Object);var getPrototype$2=getPrototype$1$1;var objectTag$3$1="[object Object]";var funcProto$1$1=Function.prototype,objectProto$6$1=Object.prototype;var funcToString$1$1=funcProto$1$1.toString;var hasOwnProperty$5$1=objectProto$6$1.hasOwnProperty;var objectCtorString$1=funcToString$1$1.call(Object);function isPlainObject$1(value){if(!isObjectLike$1(value)||baseGetTag$1(value)!=objectTag$3$1){return false}var proto=getPrototype$2(value);if(proto===null){return true}var Ctor=hasOwnProperty$5$1.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString$1$1.call(Ctor)==objectCtorString$1}var domExcTag="[object DOMException]",errorTag$1$1="[object Error]";function isError(value){if(!isObjectLike$1(value)){return false}var tag=baseGetTag$1(value);return tag==errorTag$1$1||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject$1(value)}var attempt=baseRest$1((function(func,args){try{return apply$1(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}));var attempt$1=attempt;function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}var freeExports$3=typeof exports=="object"&&exports&&!exports.nodeType&&exports;freeExports$3&&typeof module=="object"&&module&&!module.nodeType&&module;var DataView$2=getNative$1(root$1$1,"DataView");var DataView$1$1=DataView$2;var Promise$1$1=getNative$1(root$1$1,"Promise");var Promise$2$1=Promise$1$1;var Set$1$1=getNative$1(root$1$1,"Set");var Set$2$1=Set$1$1;var mapTag$4$1="[object Map]",objectTag$2$1="[object Object]",promiseTag$1="[object Promise]",setTag$4$1="[object Set]",weakMapTag$1$1="[object WeakMap]";var dataViewTag$2$1="[object DataView]";var dataViewCtorString$1=toSource$1(DataView$1$1),mapCtorString$1=toSource$1(Map$2$1),promiseCtorString$1=toSource$1(Promise$2$1),setCtorString$1=toSource$1(Set$2$1),weakMapCtorString$1=toSource$1(WeakMap$1$1);var getTag$2=baseGetTag$1;if(DataView$1$1&&getTag$2(new DataView$1$1(new ArrayBuffer(1)))!=dataViewTag$2$1||Map$2$1&&getTag$2(new Map$2$1)!=mapTag$4$1||Promise$2$1&&getTag$2(Promise$2$1.resolve())!=promiseTag$1||Set$2$1&&getTag$2(new Set$2$1)!=setTag$4$1||WeakMap$1$1&&getTag$2(new WeakMap$1$1)!=weakMapTag$1$1){getTag$2=function(value){var result=baseGetTag$1(value),Ctor=result==objectTag$2$1?value.constructor:undefined,ctorString=Ctor?toSource$1(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString$1:return dataViewTag$2$1;case mapCtorString$1:return mapTag$4$1;case promiseCtorString$1:return promiseTag$1;case setCtorString$1:return setTag$4$1;case weakMapCtorString$1:return weakMapTag$1$1}}return result}}var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var escapeHtmlChar=basePropertyOf(htmlEscapes);var escapeHtmlChar$1=escapeHtmlChar;var reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape(string){string=toString$1(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar$1):string}function baseValues(object,props){return arrayMap$1(props,(function(key){return object[key]}))}var objectProto$2$1=Object.prototype;var hasOwnProperty$2$1=objectProto$2$1.hasOwnProperty;function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq$1(objValue,objectProto$2$1[key])&&!hasOwnProperty$2$1.call(object,key)){return srcValue}return objValue}var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(chr){return"\\"+stringEscapes[chr]}var reInterpolate=/<%=([\s\S]+?)%>/g;var reInterpolate$1=reInterpolate;var reEscape=/<%-([\s\S]+?)%>/g;var reEscape$1=reEscape;var reEvaluate=/<%([\s\S]+?)%>/g;var reEvaluate$1=reEvaluate;var templateSettings={escape:reEscape$1,evaluate:reEvaluate$1,interpolate:reInterpolate$1,variable:"",imports:{_:{escape}}};var templateSettings$1=templateSettings;var INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var objectProto$1$1=Object.prototype;var hasOwnProperty$1$1=objectProto$1$1.hasOwnProperty;function template(string,options,guard){var settings=templateSettings$1.imports._.templateSettings||templateSettings$1;if(guard&&isIterateeCall$1(string,options,guard)){options=undefined}string=toString$1(string);options=extendWith({},options,settings,customDefaultsAssignIn);var imports=extendWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys$1(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate$1?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL=hasOwnProperty$1$1.call(options,"sourceURL")?"//# sourceURL="+(options.sourceURL+"").replace(/\s/g," ")+"\n":"";string.replace(reDelimiters,(function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match}));source+="';\n";var variable=hasOwnProperty$1$1.call(options,"variable")&&options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}else if(reForbiddenIdentifierChars.test(variable)){throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt$1((function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)}));result.source=source;if(isError(result)){throw result}return result}const LimitBehavior={Reject:"reject",RenderUpToTheLimit:"renderUpToTheLimit"};const SupportedLocales={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"};const SupportedLocalesForFormats=[...Object.values(SupportedLocales),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","de-AT","it-CH","it-IT"];const RTLLocales=[SupportedLocales.Arabic,SupportedLocales.Hebrew];function formatMessage(statement,parameters){const templateFn=template(statement);return templateFn(parameters)}function extractLanguageTag(locale){const localeCodeRegex=/^([a-z]{2})-([A-Z]{2})$/;const match=locale?.match(localeCodeRegex);let output=SupportedLocales.English;if(match!==null&&match!==undefined&&match?.length>1){output=match[1]}else if(locale?.length===2&&locale.toLowerCase()===locale){output=locale}return output}function sanitizeLocaleCapitalization(locale){let localeSanitized=locale;if(locale!==undefined&&locale.indexOf("-")!==-1){const[lang,region]=locale.split("-");localeSanitized=`${lang}-${region.toUpperCase()}`}return localeSanitized}function convertToSupportedLocale(locale,supportedLocalesList){let output=SupportedLocales.English;const localeSanitized=sanitizeLocaleCapitalization(locale);if(localeSanitized!==undefined){if(supportedLocalesList.includes(localeSanitized)===true){output=localeSanitized}else{const languageTag=extractLanguageTag(localeSanitized);if(supportedLocalesList.includes(languageTag)===true){output=languageTag}}}return output}function getClosestElement(selector,base){function closestFrom(el){let element;if(el===undefined||el===document||el===window)element=null;else{const found=el.closest(selector);element=found||closestFrom(el.getRootNode().host)}return element}return closestFrom(base)}function getLocaleInfo(element=document.documentElement){const closestElement=getClosestElement("[lang]",element);const locale=closestElement?.lang??window.navigator.language;const supportedLocales=Object.values(SupportedLocales);const supportedLocalesForFormats=Object.values(SupportedLocalesForFormats);const convertedLocale=convertToSupportedLocale(locale,supportedLocales);let formatLocale=convertToSupportedLocale(locale,supportedLocalesForFormats);formatLocale=formatLocale==="ar"?"ar-u-nu-latn":formatLocale;return{locale:convertedLocale,rtl:RTLLocales.includes(convertedLocale),formatLocale}}const histogramBinCount=32;const featuresExtentField="arcgis_charts_features_extent";const queryDefaults={maxRecordCountFactor:5,maxParallelRequests:4,maxRecords:2e3,orderByJSAPIDelimiter:" ",outStatistics:{statisticType:StatisticsDefaults$1.statisticType,onStatisticField:"OBJECTID",outStatisticFieldName:"arcgis_charts_outStatisticFieldName_default_key"},uniqueIdsName:"arcgisChartsUniqueIds"};const reducedOpacity=.7;const pieChartSpecialSlicesId={defaultGroupOfSlicesId:"arcgis_charts_group_of_slices",sliceIdPrefix:"arcgis-charts-slice-id",undefinedSliceId:"arcgis-charts-slice-id-undefined",nullSliceId:"arcgis-charts-slice-id-null",emptySliceId:"arcgis-charts-slice-id-empty"};const defaultBoxPlotCategory="arcgis_charts_box_plot_category";const ramp=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]];const overlayRamp=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function getOneRampColor(props){const{colorIndex,opacity,histogramOverlays}=props;const index=Math.max(0,colorIndex??0);const rampToUse=[...histogramOverlays===true?overlayRamp:ramp];const[r,g,b,a]=rampToUse[index%rampToUse.length];const alpha=opacity!==undefined?opacity*255:a;return[r,g,b,alpha]}function getDefaultChartRotation(){return false}const defaultLimits={behaviorAfterLimit:LimitBehavior.Reject,maxBarChartSeriesCount:100,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxLineChartSeriesCount:100,maxLineUniqueSeriesCountTotal:1e4,maxLineTwoSeriesCountPerSeries:5e3,maxLineTwoSeriesCountTotal:1e4,maxLineThreePlusSeriesCountPerSeries:1e3,maxLineThreePlusSeriesCountTotal:1e4,maxPieChartSliceCountTotal:300,maxGaugeByFeaturesLimit:50,maxBoxPlotSeriesCount:100,maxBoxUniqueSeriesCountTotal:1e4,maxBoxTwoSeriesCountPerSeries:1e3,maxBoxTwoSeriesCountTotal:2e3,maxBoxThreePlusSeriesCountPerSeries:100,maxBoxThreePlusSeriesCountTotal:2e3,maxBoxPlotOutlierLimit:1e4};function getChartLimits(customizedLimits){const chartLimits={...defaultLimits};if(customizedLimits!==undefined){Object.keys(defaultLimits).forEach((propertyName=>{if(propertyName==="behaviorAfterLimit")chartLimits[propertyName]=customizedLimits[propertyName]??defaultLimits[propertyName];else chartLimits[propertyName]=customizedLimits[propertyName]??defaultLimits[propertyName]}))}return chartLimits}function getChartTechnicalLimits(){return{maxScatterCellsPerQuery:500,maxScatterCellsPerQueryForStandard:175,maxElementsPerSelectionQuery:25,maxOIDsPerSelectionQuery:2e3,maxOperandsPerWhereClause:200}}function getDefaultStackedType(){return WebChartStackedKinds$1.Side}const pieChartInnerRadius=0;const boxPlotOutliersSuffix="_arcgis_charts_outliers";const boxPlotZScoreSuffix="_arcgis_charts_z_score";var commonjsGlobal$1=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var src={exports:{}};function memoize$1(fn,options){var cache=options&&options.cache?options.cache:cacheDefault;var serializer=options&&options.serializer?options.serializer:serializerDefault;var strategy=options&&options.strategy?options.strategy:strategyDefault;return strategy(fn,{cache,serializer})}function isPrimitive(value){return value==null||typeof value==="number"||typeof value==="boolean"}function monadic(fn,cache,serializer,arg){var cacheKey=isPrimitive(arg)?arg:serializer(arg);var computedValue=cache.get(cacheKey);if(typeof computedValue==="undefined"){computedValue=fn.call(this,arg);cache.set(cacheKey,computedValue)}return computedValue}function variadic(fn,cache,serializer){var args=Array.prototype.slice.call(arguments,3);var cacheKey=serializer(args);var computedValue=cache.get(cacheKey);if(typeof computedValue==="undefined"){computedValue=fn.apply(this,args);cache.set(cacheKey,computedValue)}return computedValue}function assemble(fn,context,strategy,cache,serialize){return strategy.bind(context,fn,cache,serialize)}function strategyDefault(fn,options){var strategy=fn.length===1?monadic:variadic;return assemble(fn,this,strategy,options.cache.create(),options.serializer)}function strategyVariadic(fn,options){var strategy=variadic;return assemble(fn,this,strategy,options.cache.create(),options.serializer)}function strategyMonadic(fn,options){var strategy=monadic;return assemble(fn,this,strategy,options.cache.create(),options.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(key){return key in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(key){return this.cache[key]};ObjectWithoutPrototypeCache.prototype.set=function(key,value){this.cache[key]=value};var cacheDefault={create:function create(){return new ObjectWithoutPrototypeCache}};src.exports=memoize$1;src.exports.strategies={variadic:strategyVariadic,monadic:strategyMonadic};var memoize$1$1=src.exports;var funcProto$4=Function.prototype;var funcToString$4=funcProto$4.toString;funcToString$4.call(Object);var lib$1={exports:{}};var _default$1={};var lib={exports:{}};var _default={};function getDefaultWhiteList$1(){var whiteList={};whiteList["align-content"]=false;whiteList["align-items"]=false;whiteList["align-self"]=false;whiteList["alignment-adjust"]=false;whiteList["alignment-baseline"]=false;whiteList["all"]=false;whiteList["anchor-point"]=false;whiteList["animation"]=false;whiteList["animation-delay"]=false;whiteList["animation-direction"]=false;whiteList["animation-duration"]=false;whiteList["animation-fill-mode"]=false;whiteList["animation-iteration-count"]=false;whiteList["animation-name"]=false;whiteList["animation-play-state"]=false;whiteList["animation-timing-function"]=false;whiteList["azimuth"]=false;whiteList["backface-visibility"]=false;whiteList["background"]=true;whiteList["background-attachment"]=true;whiteList["background-clip"]=true;whiteList["background-color"]=true;whiteList["background-image"]=true;whiteList["background-origin"]=true;whiteList["background-position"]=true;whiteList["background-repeat"]=true;whiteList["background-size"]=true;whiteList["baseline-shift"]=false;whiteList["binding"]=false;whiteList["bleed"]=false;whiteList["bookmark-label"]=false;whiteList["bookmark-level"]=false;whiteList["bookmark-state"]=false;whiteList["border"]=true;whiteList["border-bottom"]=true;whiteList["border-bottom-color"]=true;whiteList["border-bottom-left-radius"]=true;whiteList["border-bottom-right-radius"]=true;whiteList["border-bottom-style"]=true;whiteList["border-bottom-width"]=true;whiteList["border-collapse"]=true;whiteList["border-color"]=true;whiteList["border-image"]=true;whiteList["border-image-outset"]=true;whiteList["border-image-repeat"]=true;whiteList["border-image-slice"]=true;whiteList["border-image-source"]=true;whiteList["border-image-width"]=true;whiteList["border-left"]=true;whiteList["border-left-color"]=true;whiteList["border-left-style"]=true;whiteList["border-left-width"]=true;whiteList["border-radius"]=true;whiteList["border-right"]=true;whiteList["border-right-color"]=true;whiteList["border-right-style"]=true;whiteList["border-right-width"]=true;whiteList["border-spacing"]=true;whiteList["border-style"]=true;whiteList["border-top"]=true;whiteList["border-top-color"]=true;whiteList["border-top-left-radius"]=true;whiteList["border-top-right-radius"]=true;whiteList["border-top-style"]=true;whiteList["border-top-width"]=true;whiteList["border-width"]=true;whiteList["bottom"]=false;whiteList["box-decoration-break"]=true;whiteList["box-shadow"]=true;whiteList["box-sizing"]=true;whiteList["box-snap"]=true;whiteList["box-suppress"]=true;whiteList["break-after"]=true;whiteList["break-before"]=true;whiteList["break-inside"]=true;whiteList["caption-side"]=false;whiteList["chains"]=false;whiteList["clear"]=true;whiteList["clip"]=false;whiteList["clip-path"]=false;whiteList["clip-rule"]=false;whiteList["color"]=true;whiteList["color-interpolation-filters"]=true;whiteList["column-count"]=false;whiteList["column-fill"]=false;whiteList["column-gap"]=false;whiteList["column-rule"]=false;whiteList["column-rule-color"]=false;whiteList["column-rule-style"]=false;whiteList["column-rule-width"]=false;whiteList["column-span"]=false;whiteList["column-width"]=false;whiteList["columns"]=false;whiteList["contain"]=false;whiteList["content"]=false;whiteList["counter-increment"]=false;whiteList["counter-reset"]=false;whiteList["counter-set"]=false;whiteList["crop"]=false;whiteList["cue"]=false;whiteList["cue-after"]=false;whiteList["cue-before"]=false;whiteList["cursor"]=false;whiteList["direction"]=false;whiteList["display"]=true;whiteList["display-inside"]=true;whiteList["display-list"]=true;whiteList["display-outside"]=true;whiteList["dominant-baseline"]=false;whiteList["elevation"]=false;whiteList["empty-cells"]=false;whiteList["filter"]=false;whiteList["flex"]=false;whiteList["flex-basis"]=false;whiteList["flex-direction"]=false;whiteList["flex-flow"]=false;whiteList["flex-grow"]=false;whiteList["flex-shrink"]=false;whiteList["flex-wrap"]=false;whiteList["float"]=false;whiteList["float-offset"]=false;whiteList["flood-color"]=false;whiteList["flood-opacity"]=false;whiteList["flow-from"]=false;whiteList["flow-into"]=false;whiteList["font"]=true;whiteList["font-family"]=true;whiteList["font-feature-settings"]=true;whiteList["font-kerning"]=true;whiteList["font-language-override"]=true;whiteList["font-size"]=true;whiteList["font-size-adjust"]=true;whiteList["font-stretch"]=true;whiteList["font-style"]=true;whiteList["font-synthesis"]=true;whiteList["font-variant"]=true;whiteList["font-variant-alternates"]=true;whiteList["font-variant-caps"]=true;whiteList["font-variant-east-asian"]=true;whiteList["font-variant-ligatures"]=true;whiteList["font-variant-numeric"]=true;whiteList["font-variant-position"]=true;whiteList["font-weight"]=true;whiteList["grid"]=false;whiteList["grid-area"]=false;whiteList["grid-auto-columns"]=false;whiteList["grid-auto-flow"]=false;whiteList["grid-auto-rows"]=false;whiteList["grid-column"]=false;whiteList["grid-column-end"]=false;whiteList["grid-column-start"]=false;whiteList["grid-row"]=false;whiteList["grid-row-end"]=false;whiteList["grid-row-start"]=false;whiteList["grid-template"]=false;whiteList["grid-template-areas"]=false;whiteList["grid-template-columns"]=false;whiteList["grid-template-rows"]=false;whiteList["hanging-punctuation"]=false;whiteList["height"]=true;whiteList["hyphens"]=false;whiteList["icon"]=false;whiteList["image-orientation"]=false;whiteList["image-resolution"]=false;whiteList["ime-mode"]=false;whiteList["initial-letters"]=false;whiteList["inline-box-align"]=false;whiteList["justify-content"]=false;whiteList["justify-items"]=false;whiteList["justify-self"]=false;whiteList["left"]=false;whiteList["letter-spacing"]=true;whiteList["lighting-color"]=true;whiteList["line-box-contain"]=false;whiteList["line-break"]=false;whiteList["line-grid"]=false;whiteList["line-height"]=false;whiteList["line-snap"]=false;whiteList["line-stacking"]=false;whiteList["line-stacking-ruby"]=false;whiteList["line-stacking-shift"]=false;whiteList["line-stacking-strategy"]=false;whiteList["list-style"]=true;whiteList["list-style-image"]=true;whiteList["list-style-position"]=true;whiteList["list-style-type"]=true;whiteList["margin"]=true;whiteList["margin-bottom"]=true;whiteList["margin-left"]=true;whiteList["margin-right"]=true;whiteList["margin-top"]=true;whiteList["marker-offset"]=false;whiteList["marker-side"]=false;whiteList["marks"]=false;whiteList["mask"]=false;whiteList["mask-box"]=false;whiteList["mask-box-outset"]=false;whiteList["mask-box-repeat"]=false;whiteList["mask-box-slice"]=false;whiteList["mask-box-source"]=false;whiteList["mask-box-width"]=false;whiteList["mask-clip"]=false;whiteList["mask-image"]=false;whiteList["mask-origin"]=false;whiteList["mask-position"]=false;whiteList["mask-repeat"]=false;whiteList["mask-size"]=false;whiteList["mask-source-type"]=false;whiteList["mask-type"]=false;whiteList["max-height"]=true;whiteList["max-lines"]=false;whiteList["max-width"]=true;whiteList["min-height"]=true;whiteList["min-width"]=true;whiteList["move-to"]=false;whiteList["nav-down"]=false;whiteList["nav-index"]=false;whiteList["nav-left"]=false;whiteList["nav-right"]=false;whiteList["nav-up"]=false;whiteList["object-fit"]=false;whiteList["object-position"]=false;whiteList["opacity"]=false;whiteList["order"]=false;whiteList["orphans"]=false;whiteList["outline"]=false;whiteList["outline-color"]=false;whiteList["outline-offset"]=false;whiteList["outline-style"]=false;whiteList["outline-width"]=false;whiteList["overflow"]=false;whiteList["overflow-wrap"]=false;whiteList["overflow-x"]=false;whiteList["overflow-y"]=false;whiteList["padding"]=true;whiteList["padding-bottom"]=true;whiteList["padding-left"]=true;whiteList["padding-right"]=true;whiteList["padding-top"]=true;whiteList["page"]=false;whiteList["page-break-after"]=false;whiteList["page-break-before"]=false;whiteList["page-break-inside"]=false;whiteList["page-policy"]=false;whiteList["pause"]=false;whiteList["pause-after"]=false;whiteList["pause-before"]=false;whiteList["perspective"]=false;whiteList["perspective-origin"]=false;whiteList["pitch"]=false;whiteList["pitch-range"]=false;whiteList["play-during"]=false;whiteList["position"]=false;whiteList["presentation-level"]=false;whiteList["quotes"]=false;whiteList["region-fragment"]=false;whiteList["resize"]=false;whiteList["rest"]=false;whiteList["rest-after"]=false;whiteList["rest-before"]=false;whiteList["richness"]=false;whiteList["right"]=false;whiteList["rotation"]=false;whiteList["rotation-point"]=false;whiteList["ruby-align"]=false;whiteList["ruby-merge"]=false;whiteList["ruby-position"]=false;whiteList["shape-image-threshold"]=false;whiteList["shape-outside"]=false;whiteList["shape-margin"]=false;whiteList["size"]=false;whiteList["speak"]=false;whiteList["speak-as"]=false;whiteList["speak-header"]=false;whiteList["speak-numeral"]=false;whiteList["speak-punctuation"]=false;whiteList["speech-rate"]=false;whiteList["stress"]=false;whiteList["string-set"]=false;whiteList["tab-size"]=false;whiteList["table-layout"]=false;whiteList["text-align"]=true;whiteList["text-align-last"]=true;whiteList["text-combine-upright"]=true;whiteList["text-decoration"]=true;whiteList["text-decoration-color"]=true;whiteList["text-decoration-line"]=true;whiteList["text-decoration-skip"]=true;whiteList["text-decoration-style"]=true;whiteList["text-emphasis"]=true;whiteList["text-emphasis-color"]=true;whiteList["text-emphasis-position"]=true;whiteList["text-emphasis-style"]=true;whiteList["text-height"]=true;whiteList["text-indent"]=true;whiteList["text-justify"]=true;whiteList["text-orientation"]=true;whiteList["text-overflow"]=true;whiteList["text-shadow"]=true;whiteList["text-space-collapse"]=true;whiteList["text-transform"]=true;whiteList["text-underline-position"]=true;whiteList["text-wrap"]=true;whiteList["top"]=false;whiteList["transform"]=false;whiteList["transform-origin"]=false;whiteList["transform-style"]=false;whiteList["transition"]=false;whiteList["transition-delay"]=false;whiteList["transition-duration"]=false;whiteList["transition-property"]=false;whiteList["transition-timing-function"]=false;whiteList["unicode-bidi"]=false;whiteList["vertical-align"]=false;whiteList["visibility"]=false;whiteList["voice-balance"]=false;whiteList["voice-duration"]=false;whiteList["voice-family"]=false;whiteList["voice-pitch"]=false;whiteList["voice-range"]=false;whiteList["voice-rate"]=false;whiteList["voice-stress"]=false;whiteList["voice-volume"]=false;whiteList["volume"]=false;whiteList["white-space"]=false;whiteList["widows"]=false;whiteList["width"]=true;whiteList["will-change"]=false;whiteList["word-break"]=true;whiteList["word-spacing"]=true;whiteList["word-wrap"]=true;whiteList["wrap-flow"]=false;whiteList["wrap-through"]=false;whiteList["writing-mode"]=false;whiteList["z-index"]=false;return whiteList}function onAttr(name,value,options){}function onIgnoreAttr(name,value,options){}var REGEXP_URL_JAVASCRIPT=/javascript\s*\:/gim;function safeAttrValue$1(name,value){if(REGEXP_URL_JAVASCRIPT.test(value))return"";return value}_default.whiteList=getDefaultWhiteList$1();_default.getDefaultWhiteList=getDefaultWhiteList$1;_default.onAttr=onAttr;_default.onIgnoreAttr=onIgnoreAttr;_default.safeAttrValue=safeAttrValue$1;var util$1$1={indexOf:function(arr,item){var i,j;if(Array.prototype.indexOf){return arr.indexOf(item)}for(i=0,j=arr.length;i<j;i++){if(arr[i]===item){return i}}return-1},forEach:function(arr,fn,scope){var i,j;if(Array.prototype.forEach){return arr.forEach(fn,scope)}for(i=0,j=arr.length;i<j;i++){fn.call(scope,arr[i],i,arr)}},trim:function(str){if(String.prototype.trim){return str.trim()}return str.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(str){if(String.prototype.trimRight){return str.trimRight()}return str.replace(/(\s*$)/g,"")}};var _$3=util$1$1;function parseStyle$1(css,onAttr){css=_$3.trimRight(css);if(css[css.length-1]!==";")css+=";";var cssLength=css.length;var isParenthesisOpen=false;var lastPos=0;var i=0;var retCSS="";function addNewAttr(){if(!isParenthesisOpen){var source=_$3.trim(css.slice(lastPos,i));var j=source.indexOf(":");if(j!==-1){var name=_$3.trim(source.slice(0,j));var value=_$3.trim(source.slice(j+1));if(name){var ret=onAttr(lastPos,retCSS.length,name,value,source);if(ret)retCSS+=ret+"; "}}}lastPos=i+1}for(;i<cssLength;i++){var c=css[i];if(c==="/"&&css[i+1]==="*"){var j=css.indexOf("*/",i+2);if(j===-1)break;i=j+1;lastPos=i+1;isParenthesisOpen=false}else if(c==="("){isParenthesisOpen=true}else if(c===")"){isParenthesisOpen=false}else if(c===";"){if(isParenthesisOpen);else{addNewAttr()}}else if(c==="\n"){addNewAttr()}}return _$3.trim(retCSS)}var parser$2=parseStyle$1;var DEFAULT$1=_default;var parseStyle=parser$2;function isNull$1(obj){return obj===undefined||obj===null}function shallowCopyObject$1(obj){var ret={};for(var i in obj){ret[i]=obj[i]}return ret}function FilterCSS$2(options){options=shallowCopyObject$1(options||{});options.whiteList=options.whiteList||DEFAULT$1.whiteList;options.onAttr=options.onAttr||DEFAULT$1.onAttr;options.onIgnoreAttr=options.onIgnoreAttr||DEFAULT$1.onIgnoreAttr;options.safeAttrValue=options.safeAttrValue||DEFAULT$1.safeAttrValue;this.options=options}FilterCSS$2.prototype.process=function(css){css=css||"";css=css.toString();if(!css)return"";var me=this;var options=me.options;var whiteList=options.whiteList;var onAttr=options.onAttr;var onIgnoreAttr=options.onIgnoreAttr;var safeAttrValue=options.safeAttrValue;var retCSS=parseStyle(css,(function(sourcePosition,position,name,value,source){var check=whiteList[name];var isWhite=false;if(check===true)isWhite=check;else if(typeof check==="function")isWhite=check(value);else if(check instanceof RegExp)isWhite=check.test(value);if(isWhite!==true)isWhite=false;value=safeAttrValue(name,value);if(!value)return;var opts={position,sourcePosition,source,isWhite};if(isWhite){var ret=onAttr(name,value,opts);if(isNull$1(ret)){return name+":"+value}else{return ret}}else{var ret=onIgnoreAttr(name,value,opts);if(!isNull$1(ret)){return ret}}}));return retCSS};var css=FilterCSS$2;(function(module,exports){var DEFAULT=_default;var FilterCSS=css;function filterCSS(html,options){var xss=new FilterCSS(options);return xss.process(html)}exports=module.exports=filterCSS;exports.FilterCSS=FilterCSS;for(var i in DEFAULT)exports[i]=DEFAULT[i]})(lib,lib.exports);var util$6={indexOf:function(arr,item){var i,j;if(Array.prototype.indexOf){return arr.indexOf(item)}for(i=0,j=arr.length;i<j;i++){if(arr[i]===item){return i}}return-1},forEach:function(arr,fn,scope){var i,j;if(Array.prototype.forEach){return arr.forEach(fn,scope)}for(i=0,j=arr.length;i<j;i++){fn.call(scope,arr[i],i,arr)}},trim:function(str){if(String.prototype.trim){return str.trim()}return str.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(str){var reg=/\s|\n|\t/;var match=reg.exec(str);return match?match.index:-1}};var FilterCSS$1=lib.exports.FilterCSS;var getDefaultCSSWhiteList=lib.exports.getDefaultWhiteList;var _$2=util$6;function getDefaultWhiteList(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var defaultCSSFilter=new FilterCSS$1;function onTag(tag,html,options){}function onIgnoreTag(tag,html,options){}function onTagAttr(tag,name,value){}function onIgnoreTagAttr(tag,name,value){}function escapeHtml(html){return html.replace(REGEXP_LT,"&lt;").replace(REGEXP_GT,"&gt;")}function safeAttrValue(tag,name,value,cssFilter){value=friendlyAttrValue(value);if(name==="href"||name==="src"){value=_$2.trim(value);if(value==="#")return"#";if(!(value.substr(0,7)==="http://"||value.substr(0,8)==="https://"||value.substr(0,7)==="mailto:"||value.substr(0,4)==="tel:"||value.substr(0,11)==="data:image/"||value.substr(0,6)==="ftp://"||value.substr(0,2)==="./"||value.substr(0,3)==="../"||value[0]==="#"||value[0]==="/")){return""}}else if(name==="background"){REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)){return""}}else if(name==="style"){REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)){return""}REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)){REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex=0;if(REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)){return""}}if(cssFilter!==false){cssFilter=cssFilter||defaultCSSFilter;value=cssFilter.process(value)}}value=escapeAttrValue(value);return value}var REGEXP_LT=/</g;var REGEXP_GT=/>/g;var REGEXP_QUOTE=/"/g;var REGEXP_QUOTE_2=/&quot;/g;var REGEXP_ATTR_VALUE_1=/&#([a-zA-Z0-9]*);?/gim;var REGEXP_ATTR_VALUE_COLON=/&colon;?/gim;var REGEXP_ATTR_VALUE_NEWLINE=/&newline;?/gim;var REGEXP_DEFAULT_ON_TAG_ATTR_4=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi;var REGEXP_DEFAULT_ON_TAG_ATTR_7=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;var REGEXP_DEFAULT_ON_TAG_ATTR_8=/u\s*r\s*l\s*\(.*/gi;function escapeQuote(str){return str.replace(REGEXP_QUOTE,"&quot;")}function unescapeQuote(str){return str.replace(REGEXP_QUOTE_2,'"')}function escapeHtmlEntities(str){return str.replace(REGEXP_ATTR_VALUE_1,(function replaceUnicode(str,code){return code[0]==="x"||code[0]==="X"?String.fromCharCode(parseInt(code.substr(1),16)):String.fromCharCode(parseInt(code,10))}))}function escapeDangerHtml5Entities(str){return str.replace(REGEXP_ATTR_VALUE_COLON,":").replace(REGEXP_ATTR_VALUE_NEWLINE," ")}function clearNonPrintableCharacter(str){var str2="";for(var i=0,len=str.length;i<len;i++){str2+=str.charCodeAt(i)<32?" ":str.charAt(i)}return _$2.trim(str2)}function friendlyAttrValue(str){str=unescapeQuote(str);str=escapeHtmlEntities(str);str=escapeDangerHtml5Entities(str);str=clearNonPrintableCharacter(str);return str}function escapeAttrValue(str){str=escapeQuote(str);str=escapeHtml(str);return str}function onIgnoreTagStripAll(){return""}function StripTagBody(tags,next){if(typeof next!=="function"){next=function(){}}var isRemoveAllTag=!Array.isArray(tags);function isRemoveTag(tag){if(isRemoveAllTag)return true;return _$2.indexOf(tags,tag)!==-1}var removeList=[];var posStart=false;return{onIgnoreTag:function(tag,html,options){if(isRemoveTag(tag)){if(options.isClosing){var ret="[/removed]";var end=options.position+ret.length;removeList.push([posStart!==false?posStart:options.position,end]);posStart=false;return ret}else{if(!posStart){posStart=options.position}return"[removed]"}}else{return next(tag,html,options)}},remove:function(html){var rethtml="";var lastPos=0;_$2.forEach(removeList,(function(pos){rethtml+=html.slice(lastPos,pos[0]);lastPos=pos[1]}));rethtml+=html.slice(lastPos);return rethtml}}}function stripCommentTag(html){var retHtml="";var lastPos=0;while(lastPos<html.length){var i=html.indexOf("\x3c!--",lastPos);if(i===-1){retHtml+=html.slice(lastPos);break}retHtml+=html.slice(lastPos,i);var j=html.indexOf("--\x3e",i);if(j===-1){break}lastPos=j+3}return retHtml}function stripBlankChar(html){var chars=html.split("");chars=chars.filter((function(char){var c=char.charCodeAt(0);if(c===127)return false;if(c<=31){if(c===10||c===13)return true;return false}return true}));return chars.join("")}_default$1.whiteList=getDefaultWhiteList();_default$1.getDefaultWhiteList=getDefaultWhiteList;_default$1.onTag=onTag;_default$1.onIgnoreTag=onIgnoreTag;_default$1.onTagAttr=onTagAttr;_default$1.onIgnoreTagAttr=onIgnoreTagAttr;_default$1.safeAttrValue=safeAttrValue;_default$1.escapeHtml=escapeHtml;_default$1.escapeQuote=escapeQuote;_default$1.unescapeQuote=unescapeQuote;_default$1.escapeHtmlEntities=escapeHtmlEntities;_default$1.escapeDangerHtml5Entities=escapeDangerHtml5Entities;_default$1.clearNonPrintableCharacter=clearNonPrintableCharacter;_default$1.friendlyAttrValue=friendlyAttrValue;_default$1.escapeAttrValue=escapeAttrValue;_default$1.onIgnoreTagStripAll=onIgnoreTagStripAll;_default$1.StripTagBody=StripTagBody;_default$1.stripCommentTag=stripCommentTag;_default$1.stripBlankChar=stripBlankChar;_default$1.cssFilter=defaultCSSFilter;_default$1.getDefaultCSSWhiteList=getDefaultCSSWhiteList;var parser$1={};var _$1=util$6;function getTagName(html){var i=_$1.spaceIndex(html);if(i===-1){var tagName=html.slice(1,-1)}else{var tagName=html.slice(1,i+1)}tagName=_$1.trim(tagName).toLowerCase();if(tagName.slice(0,1)==="/")tagName=tagName.slice(1);if(tagName.slice(-1)==="/")tagName=tagName.slice(0,-1);return tagName}function isClosing(html){return html.slice(0,2)==="</"}function parseTag$1(html,onTag,escapeHtml){var rethtml="";var lastPos=0;var tagStart=false;var quoteStart=false;var currentPos=0;var len=html.length;var currentTagName="";var currentHtml="";chariterator:for(currentPos=0;currentPos<len;currentPos++){var c=html.charAt(currentPos);if(tagStart===false){if(c==="<"){tagStart=currentPos;continue}}else{if(quoteStart===false){if(c==="<"){rethtml+=escapeHtml(html.slice(lastPos,currentPos));tagStart=currentPos;lastPos=currentPos;continue}if(c===">"){rethtml+=escapeHtml(html.slice(lastPos,tagStart));currentHtml=html.slice(tagStart,currentPos+1);currentTagName=getTagName(currentHtml);rethtml+=onTag(tagStart,rethtml.length,currentTagName,currentHtml,isClosing(currentHtml));lastPos=currentPos+1;tagStart=false;continue}if(c==='"'||c==="'"){var i=1;var ic=html.charAt(currentPos-i);while(ic.trim()===""||ic==="="){if(ic==="="){quoteStart=c;continue chariterator}ic=html.charAt(currentPos-++i)}}}else{if(c===quoteStart){quoteStart=false;continue}}}}if(lastPos<html.length){rethtml+=escapeHtml(html.substr(lastPos))}return rethtml}var REGEXP_ILLEGAL_ATTR_NAME=/[^a-zA-Z0-9_:\.\-]/gim;function parseAttr$1(html,onAttr){var lastPos=0;var retAttrs=[];var tmpName=false;var len=html.length;function addAttr(name,value){name=_$1.trim(name);name=name.replace(REGEXP_ILLEGAL_ATTR_NAME,"").toLowerCase();if(name.length<1)return;var ret=onAttr(name,value||"");if(ret)retAttrs.push(ret)}for(var i=0;i<len;i++){var c=html.charAt(i);var v,j;if(tmpName===false&&c==="="){tmpName=html.slice(lastPos,i);lastPos=i+1;continue}if(tmpName!==false){if(i===lastPos&&(c==='"'||c==="'")&&html.charAt(i-1)==="="){j=html.indexOf(c,i+1);if(j===-1){break}else{v=_$1.trim(html.slice(lastPos+1,j));addAttr(tmpName,v);tmpName=false;i=j;lastPos=i+1;continue}}}if(/\s|\n|\t/.test(c)){html=html.replace(/\s|\n|\t/g," ");if(tmpName===false){j=findNextEqual(html,i);if(j===-1){v=_$1.trim(html.slice(lastPos,i));addAttr(v);tmpName=false;lastPos=i+1;continue}else{i=j-1;continue}}else{j=findBeforeEqual(html,i-1);if(j===-1){v=_$1.trim(html.slice(lastPos,i));v=stripQuoteWrap(v);addAttr(tmpName,v);tmpName=false;lastPos=i+1;continue}else{continue}}}}if(lastPos<html.length){if(tmpName===false){addAttr(html.slice(lastPos))}else{addAttr(tmpName,stripQuoteWrap(_$1.trim(html.slice(lastPos))))}}return _$1.trim(retAttrs.join(" "))}function findNextEqual(str,i){for(;i<str.length;i++){var c=str[i];if(c===" ")continue;if(c==="=")return i;return-1}}function findBeforeEqual(str,i){for(;i>0;i--){var c=str[i];if(c===" ")continue;if(c==="=")return i;return-1}}function isQuoteWrapString(text){if(text[0]==='"'&&text[text.length-1]==='"'||text[0]==="'"&&text[text.length-1]==="'"){return true}else{return false}}function stripQuoteWrap(text){if(isQuoteWrapString(text)){return text.substr(1,text.length-2)}else{return text}}parser$1.parseTag=parseTag$1;parser$1.parseAttr=parseAttr$1;var FilterCSS=lib.exports.FilterCSS;var DEFAULT=_default$1;var parser=parser$1;var parseTag=parser.parseTag;var parseAttr=parser.parseAttr;var _=util$6;function isNull(obj){return obj===undefined||obj===null}function getAttrs(html){var i=_.spaceIndex(html);if(i===-1){return{html:"",closing:html[html.length-2]==="/"}}html=_.trim(html.slice(i+1,-1));var isClosing=html[html.length-1]==="/";if(isClosing)html=_.trim(html.slice(0,-1));return{html,closing:isClosing}}function shallowCopyObject(obj){var ret={};for(var i in obj){ret[i]=obj[i]}return ret}function FilterXSS(options){options=shallowCopyObject(options||{});if(options.stripIgnoreTag){if(options.onIgnoreTag){console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time')}options.onIgnoreTag=DEFAULT.onIgnoreTagStripAll}options.whiteList=options.whiteList||options.allowList||DEFAULT.whiteList;options.onTag=options.onTag||DEFAULT.onTag;options.onTagAttr=options.onTagAttr||DEFAULT.onTagAttr;options.onIgnoreTag=options.onIgnoreTag||DEFAULT.onIgnoreTag;options.onIgnoreTagAttr=options.onIgnoreTagAttr||DEFAULT.onIgnoreTagAttr;options.safeAttrValue=options.safeAttrValue||DEFAULT.safeAttrValue;options.escapeHtml=options.escapeHtml||DEFAULT.escapeHtml;this.options=options;if(options.css===false){this.cssFilter=false}else{options.css=options.css||{};this.cssFilter=new FilterCSS(options.css)}}FilterXSS.prototype.process=function(html){html=html||"";html=html.toString();if(!html)return"";var me=this;var options=me.options;var whiteList=options.whiteList;var onTag=options.onTag;var onIgnoreTag=options.onIgnoreTag;var onTagAttr=options.onTagAttr;var onIgnoreTagAttr=options.onIgnoreTagAttr;var safeAttrValue=options.safeAttrValue;var escapeHtml=options.escapeHtml;var cssFilter=me.cssFilter;if(options.stripBlankChar){html=DEFAULT.stripBlankChar(html)}if(!options.allowCommentTag){html=DEFAULT.stripCommentTag(html)}var stripIgnoreTagBody=false;if(options.stripIgnoreTagBody){var stripIgnoreTagBody=DEFAULT.StripTagBody(options.stripIgnoreTagBody,onIgnoreTag);onIgnoreTag=stripIgnoreTagBody.onIgnoreTag}var retHtml=parseTag(html,(function(sourcePosition,position,tag,html,isClosing){var info={sourcePosition,position,isClosing,isWhite:whiteList.hasOwnProperty(tag)};var ret=onTag(tag,html,info);if(!isNull(ret))return ret;if(info.isWhite){if(info.isClosing){return"</"+tag+">"}var attrs=getAttrs(html);var whiteAttrList=whiteList[tag];var attrsHtml=parseAttr(attrs.html,(function(name,value){var isWhiteAttr=_.indexOf(whiteAttrList,name)!==-1;var ret=onTagAttr(tag,name,value,isWhiteAttr);if(!isNull(ret))return ret;if(isWhiteAttr){value=safeAttrValue(tag,name,value,cssFilter);if(value){return name+'="'+value+'"'}else{return name}}else{var ret=onIgnoreTagAttr(tag,name,value,isWhiteAttr);if(!isNull(ret))return ret;return}}));var html="<"+tag;if(attrsHtml)html+=" "+attrsHtml;if(attrs.closing)html+=" /";html+=">";return html}else{var ret=onIgnoreTag(tag,html,info);if(!isNull(ret))return ret;return escapeHtml(html)}}),escapeHtml);if(stripIgnoreTagBody){retHtml=stripIgnoreTagBody.remove(retHtml)}return retHtml};var xss=FilterXSS;(function(module,exports){var DEFAULT=_default$1;var parser=parser$1;var FilterXSS=xss;function filterXSS(html,options){var xss=new FilterXSS(options);return xss.process(html)}exports=module.exports=filterXSS;exports.filterXSS=filterXSS;exports.FilterXSS=FilterXSS;for(var i in DEFAULT)exports[i]=DEFAULT[i];for(var i in parser)exports[i]=parser[i];function isWorkerEnv(){return typeof self!=="undefined"&&typeof DedicatedWorkerGlobalScope!=="undefined"&&self instanceof DedicatedWorkerGlobalScope}if(isWorkerEnv()){self.filterXSS=module.exports}})(lib$1,lib$1.exports);function isChartRotated$1(chartConfig){let isRotated=getDefaultChartRotation();if(chartConfig!==undefined){const chartType=getSeriesType(chartConfig.series);if(chartType===WebChartTypes$1.BarSeries||chartType===WebChartTypes$1.LineSeries||chartType===WebChartTypes$1.ComboLineAndBarSeries||chartType===WebChartTypes$1.BoxPlotSeries){isRotated=(chartConfig.rotated??chartConfig.series[0].rotated??getDefaultChartRotation())===true}}return isRotated}function isComboLineAndBarSeries(chartSeries){let isCombo;if(chartSeries.length!==0){const firstSeriesType=chartSeries[0].type;if(chartSeries.every((series=>series.type===firstSeriesType))===true){isCombo=false}if(chartSeries.some((series=>series.type!==WebChartTypes$1.LineSeries&&series.type!==WebChartTypes$1.BarSeries))===false&&isCombo===undefined){isCombo=true}}return isCombo}function getSeriesType(chartSeries,seriesIndex){let seriesType;if(chartSeries!==undefined&&chartSeries.length>0){if(seriesIndex!==undefined&&seriesIndex<chartSeries.length){seriesType=chartSeries[seriesIndex].type}else{const isCombo=isComboLineAndBarSeries(chartSeries);if(isCombo===false){seriesType=chartSeries[0].type}else if(isCombo===true){seriesType=WebChartTypes$1.ComboLineAndBarSeries}}}return seriesType}function getSeriesStackedType(series){let stackedType;if(series.type===WebChartTypes$1.BarSeries||series.type===WebChartTypes$1.LineSeries){stackedType=series.stackedType??getDefaultStackedType()}return stackedType}function escapeString(string){let escapedString=string;escapedString=escapedString.replace(/'/g,"''");escapedString=escapedString.replace(/[/\\"|[\]\\]/g,"\\$&");return escapedString}function containsNonLatinCharacter(value){let hasNonLatinChars=false;if(typeof value!=="number"){const chars=[...value];hasNonLatinChars=chars.some((char=>char.charCodeAt(0)>255))}return hasNonLatinChars}function escapeSQLString(string){let escapedString=string;let additionalQuotes="";if(string.charAt(0)==="'"&&string.charAt(string.length-1)==="'"){escapedString=string.slice(1,-1);additionalQuotes="'"}escapedString=escapedString.replace(/'/g,"''");let prefix="";if(containsNonLatinCharacter(escapedString)===true)prefix="N";return`${prefix}${additionalQuotes}${escapedString}${additionalQuotes}`}function normalizeString(props){const{value,keepSurroundingQuotes,escape}=props;let normalizedValue=value.trim();let additionalQuotes="";if(normalizedValue.charAt(0)==="'"&&normalizedValue.charAt(normalizedValue.length-1)==="'"){normalizedValue=normalizedValue.slice(1,-1);if(keepSurroundingQuotes===true)additionalQuotes="'"}if(escape!==false)normalizedValue=escapeString(normalizedValue);normalizedValue=`${additionalQuotes}${normalizedValue}${additionalQuotes}`;return normalizedValue}function isNumberOfElementsUnderLimit(props){const{count,seriesCount,seriesType,chartLimits}=props;const{behaviorAfterLimit}=chartLimits??{};let limitNotExceeded=true;if(behaviorAfterLimit!==LimitBehavior.RenderUpToTheLimit){const{maxBarChartSeriesCount,maxBarUniqueSeriesCountTotal,maxBarTwoSeriesCountPerSeries,maxBarTwoSeriesCountTotal,maxBarThreePlusSeriesCountPerSeries,maxBarThreePlusSeriesCountTotal,maxLineChartSeriesCount,maxLineUniqueSeriesCountTotal,maxLineTwoSeriesCountPerSeries,maxLineTwoSeriesCountTotal,maxLineThreePlusSeriesCountPerSeries,maxLineThreePlusSeriesCountTotal,maxPieChartSliceCountTotal,maxGaugeByFeaturesLimit,maxBoxPlotSeriesCount,maxBoxUniqueSeriesCountTotal,maxBoxTwoSeriesCountTotal,maxBoxTwoSeriesCountPerSeries,maxBoxThreePlusSeriesCountTotal,maxBoxThreePlusSeriesCountPerSeries}=getChartLimits(chartLimits);switch(seriesType){case WebChartTypes$1.BarSeries:case WebChartTypes$1.ComboLineAndBarSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxBarChartSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxBarUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxBarTwoSeriesCountTotal&&categoryCount<=maxBarTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxBarThreePlusSeriesCountTotal&&categoryCount<=maxBarThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$1.LineSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxLineChartSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxLineUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxLineTwoSeriesCountTotal&&categoryCount<=maxLineTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxLineThreePlusSeriesCountTotal&&categoryCount<=maxLineThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$1.PieSeries:limitNotExceeded=count<=maxPieChartSliceCountTotal;break;case WebChartTypes$1.BoxPlotSeries:{const categoryCount=count/seriesCount;if(seriesCount<=maxBoxPlotSeriesCount){if(seriesCount===0){limitNotExceeded=true}else if(seriesCount===1){limitNotExceeded=count<=maxBoxUniqueSeriesCountTotal}else if(seriesCount===2){limitNotExceeded=count<=maxBoxTwoSeriesCountTotal&&categoryCount<=maxBoxTwoSeriesCountPerSeries}else if(seriesCount>2){limitNotExceeded=count<=maxBoxThreePlusSeriesCountTotal&&categoryCount<=maxBoxThreePlusSeriesCountPerSeries}}else{limitNotExceeded=false}}break;case WebChartTypes$1.GaugeSeries:limitNotExceeded=count<=maxGaugeByFeaturesLimit;break}}return limitNotExceeded}function isEmptyStringField(value){return value===undefined||value===null||`${value}`.trim()===""}function isPropertyKeyInData(data,propertyList){const expr=propertyList.find((testedExpr=>testedExpr in data));const isInItem=expr!==undefined;return{isInItem,expr}}function isValidNumber(value){return value!==undefined&&value!==null&&Number.isNaN(value)===false&&Number.isFinite(value)===true}const ChartSubType={NonSpecific:"nonSpecific",BarAndLineNoAggregation:"barAndLineNoAggregation",BarAndLineMonoField:"barAndLineMonoField",BarAndLineMultiFields:"barAndLineMultiFields",BarAndLineFromFields:"barAndLineFromFields",BarAndLineSplitBy:"barAndLineSplitBy",BarAndLineSplitByNoAggregation:"barAndLineSplitByNoAggregation",PieNoAggregation:"pieNoAggregation",PieFromCategory:"pieFromCategory",PieFromFields:"pieFromFields",BoxPlotMonoField:"boxPlotMonoField",BoxPlotMultiFields:"boxPlotMultiFields",BoxPlotMonoFieldAndCategory:"boxPlotMonoFieldAndCategory",BoxPlotMultiFieldsAndCategory:"boxPlotMultiFieldsAndCategory",BoxPlotMonoFieldAndSplitBy:"boxPlotMonoFieldAndSplitBy",BoxPlotMultiFieldsAndSplitBy:"boxPlotMultiFieldsAndSplitBy",BoxPlotMonoFieldAndCategoryAndSplitBy:"boxPlotMonoFieldAndCategoryAndSplitBy"};function getRendererInfo(layerRenderer){let rendererType;let rendererField;let rendererNormalizationField;if(layerRenderer!==undefined){rendererType=layerRenderer.type;if(rendererType===RESTRendererType$1.UniqueValue||rendererType===RESTRendererType$1.ClassBreaks){rendererField=layerRenderer.field;if(rendererType===RESTRendererType$1.ClassBreaks)rendererNormalizationField=layerRenderer.normalizationField}}return{rendererType,rendererField,rendererNormalizationField}}memoize$1$1((featureLayer=>{const featureCollection=featureLayer.featureCollection;let featureSet;let layerDefinition;if(featureCollection!==undefined&&featureCollection.layers?.[0]!==undefined){const firstLayer=featureCollection.layers[0];featureSet=firstLayer.featureSet;layerDefinition=firstLayer.layerDefinition}else{layerDefinition=featureLayer.layerDefinition}const inputArgument={};if(featureSet!==undefined){inputArgument.source=FeatureSet__default["default"].fromJSON(featureSet).features;if(layerDefinition?.fields!==undefined){inputArgument.fields=layerDefinition.fields.map((field=>Field__default["default"].fromJSON(field)))}if(layerDefinition?.objectIdField!==undefined)inputArgument.objectIdField=layerDefinition.objectIdField;if(layerDefinition?.geometryType!==undefined){const geometry=geometryJsonUtils__namespace.fromJSON({geometryType:layerDefinition.geometryType});if(geometry?.type!==undefined&&geometry?.type!=="extent")inputArgument.geometryType=geometry.type}if(layerDefinition?.spatialReference!==undefined)inputArgument.spatialReference=layerDefinition.spatialReference}else{inputArgument.id=featureLayer.id;if(layerDefinition?.id!==undefined)inputArgument.layerId=layerDefinition.id;if(featureLayer.url!==undefined)inputArgument.url=featureLayer.url;if(featureLayer.itemId!==undefined&&layerDefinition?.id!==undefined){inputArgument.portalItem={id:featureLayer.itemId}}}if(layerDefinition!==undefined){const drawingInfo=layerDefinition.drawingInfo;if(drawingInfo?.renderer!==undefined){inputArgument.renderer=rendererJsonUtils__namespace.fromJSON(drawingInfo.renderer)}}const layer=new FeatureLayer__default["default"](inputArgument);return layer}));function isFeatureLayerView(queryObject){return queryObject!==undefined&&"layer"in queryObject}function isFeatureLayer(queryObject){return queryObject instanceof FeatureLayer__default["default"]||isFeatureLayerView(queryObject)===false}function getLayerFromQueryObject(queryObject){const isFL=isFeatureLayer(queryObject);return isFL===true?queryObject:queryObject.layer}async function fetchLayerFieldsInfo(queryObject,usePopupTemplateFieldsInfo){const layer=getLayerFromQueryObject(queryObject);let fieldsInfo=[];if(layer!==undefined){await layer.load();const usePopupTemplateAliases=usePopupTemplateFieldsInfo===true&&layer?.popupTemplate?.fieldInfos!==undefined;fieldsInfo=layer.fields.map((field=>{const iField=field.toJSON();if(usePopupTemplateAliases===true){const popupFieldAlias=layer.popupTemplate.fieldInfos.find((popupField=>popupField.fieldName.toLowerCase()===field.name.toLowerCase()))?.label;if(popupFieldAlias!==undefined&&popupFieldAlias!==field.name)iField.alias=popupFieldAlias}return iField}))}return fieldsInfo}function getFieldFromName(fieldName,fields=[]){return fields.find((field=>field.name===fieldName))}function getObjectIdField(layerFieldsInfo){const oidField=layerFieldsInfo.find((field=>field.type===RESTFieldType$1.OID));return oidField?.name??""}function isNumericField(field){const validNumericFields=[RESTFieldType$1.Single,RESTFieldType$1.Double,RESTFieldType$1.SmallInteger,RESTFieldType$1.Integer];return validNumericFields.includes(field.type)}function getLayerDateFields(fieldsInfo){return fieldsInfo.filter((fieldItem=>fieldItem.type===RESTFieldType$1.Date)).map((dateFieldItem=>dateFieldItem.name))}function getSplitByField(where,normalize){let field="";if(where!==undefined&&where.includes("=")===true){field=normalize!==false?normalizeString({value:where.split("=")[0]}):where.split("=")[0].trim()}return field}function getSplitByValue(props){const{where,normalize,keepSurroundingQuotes,escape}=props;let value="";if(where!==undefined&&where.includes("=")===true){value=where.split("=")[1].trim();if(normalize===false)value=escapeSQLString(value);else value=normalizeString({value,keepSurroundingQuotes,escape})}return value}function normalizeWhereClause(where,normalize){const normalizeReturnedValue=normalize===undefined?true:normalize;const splitByField=getSplitByField(where);const splitByValue=getSplitByValue({where,normalize:normalizeReturnedValue,keepSurroundingQuotes:true});let normalizedWhere=where;if(splitByField!==""&&splitByValue!=="")normalizedWhere=`${splitByField}=${splitByValue}`;return normalizedWhere}function isAbsoluteTruthWhereClause(where){let alwaysTrue=false;if(where===undefined||where===""){alwaysTrue=true}else if(where.includes("=")===true){const fieldName=getSplitByField(where,false);const value=getSplitByValue({where,normalize:false});alwaysTrue=fieldName===value}return alwaysTrue}function getPieChartChartSubType(series){let chartSubType=ChartSubType.PieFromCategory;if(series[0].query?.outStatistics===undefined){chartSubType=ChartSubType.PieNoAggregation}else if(series[0].query?.groupByFieldsForStatistics===undefined){chartSubType=ChartSubType.PieFromFields}return chartSubType}function getBarLineChartSubType(series){let chartSubType=ChartSubType.BarAndLineMonoField;const whereClause=series[0].query?.where;if(series[0].query?.groupByFieldsForStatistics===undefined&&(series[0].query?.outStatistics??[]).length>0){chartSubType=ChartSubType.BarAndLineFromFields}else if(whereClause===undefined&&series[0].query?.outStatistics===undefined){chartSubType=ChartSubType.BarAndLineNoAggregation}else if(isAbsoluteTruthWhereClause(whereClause)===false){chartSubType=series[0].query?.outStatistics===undefined?ChartSubType.BarAndLineSplitByNoAggregation:ChartSubType.BarAndLineSplitBy}else if(series.length>1){chartSubType=ChartSubType.BarAndLineMultiFields}return chartSubType}function getBoxPlotChartSubType(series){let chartSubType=ChartSubType.BoxPlotMonoField;const monoSeries=series.length===1;const firstSeries=series[0];const{y,query}=firstSeries;const whereClause=query?.where;if(firstSeries.x!==defaultBoxPlotCategory){if(monoSeries===true){chartSubType=ChartSubType.BoxPlotMonoFieldAndCategory}else if(isAbsoluteTruthWhereClause(whereClause)===false){chartSubType=ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy}else{chartSubType=ChartSubType.BoxPlotMultiFieldsAndCategory}}else{if(typeof y==="object"&&y.length>1){if(isAbsoluteTruthWhereClause(whereClause)===false){chartSubType=ChartSubType.BoxPlotMultiFieldsAndSplitBy}else if(monoSeries===true){chartSubType=ChartSubType.BoxPlotMultiFields}}else if(monoSeries===true){chartSubType=ChartSubType.BoxPlotMonoField}else if(isAbsoluteTruthWhereClause(whereClause)===false){chartSubType=ChartSubType.BoxPlotMonoFieldAndSplitBy}}return chartSubType}function getChartSubType(series){let chartSubType=ChartSubType.NonSpecific;if(series?.[0]!==undefined){const seriesType=getSeriesType(series);switch(seriesType){case WebChartTypes$1.PieSeries:chartSubType=getPieChartChartSubType(series);break;case WebChartTypes$1.BarSeries:case WebChartTypes$1.LineSeries:case WebChartTypes$1.ComboLineAndBarSeries:chartSubType=getBarLineChartSubType(series);break;case WebChartTypes$1.BoxPlotSeries:chartSubType=getBoxPlotChartSubType(series);break}}return chartSubType}function getSubtypeName(props){const{subtypeInfo,fieldName,fieldValueToMatch}=props;let subtypeName;if(subtypeInfo?.typeIdField===fieldName){subtypeName=subtypeInfo.types?.find((ft=>`${ft.id}`===`${fieldValueToMatch}`))?.name}return subtypeName}function getFeatureTypes(layer){const{types}=layer;const featureTypes=[];if(types?.[0]!==undefined){for(const{id,name,domains}of types){const domainArray=Object.entries(domains??{});const codedValueDomains=domainArray?.filter((([_,domain])=>domain.type==="coded-value"));const myCodedValuesDomains=codedValueDomains?.map((([fieldName,codedValueDomain])=>{const codedValues=codedValueDomain.codedValues.map((({code,name})=>({name,code})));return{fieldName,name:codedValueDomain.name,codedValues}}));featureTypes.push({id,name,domains:myCodedValuesDomains})}}return featureTypes.length===0?undefined:featureTypes}function getLayerSubtypeInfo(queryObject){let subtypeInfo;if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);if(isEmptyStringField(layer?.typeIdField)===false){const types=getFeatureTypes(layer);if(types!==undefined){subtypeInfo={typeIdField:layer.typeIdField,types}}}}return subtypeInfo}function getFieldDescription(props){const{fieldName,fieldValueToMatch,subtypeInfo,fieldList}=props;let fieldDescription;if(isEmptyStringField(fieldValueToMatch)===false&&isEmptyStringField(fieldName)===false){fieldDescription=getSubtypeName({subtypeInfo,fieldName,fieldValueToMatch});if(fieldDescription===undefined){const field=getFieldFromName(fieldName,fieldList);if(subtypeInfo?.types!==undefined){for(const type of subtypeInfo?.types){const codedValueDomains=type.domains?.filter((domain=>domain.fieldName===field?.name))??[];for(const codedValueDomain of codedValueDomains){fieldDescription=codedValueDomain?.codedValues?.find((cv=>`${cv.code}`===`${fieldValueToMatch}`))?.name;if(fieldDescription!==undefined)break}if(fieldDescription!==undefined)break}}if(fieldDescription===undefined){if(field?.domain!==undefined&&field.domain.type==="codedValue"){fieldDescription=field.domain.codedValues?.find((cv=>`${cv.code}`===`${fieldValueToMatch}`))?.name}}}}return fieldDescription}async function getRendererFieldNames(layer){const set=new Set;if(layer.isTable===false){await(layer?.renderer?.collectRequiredFields(set,layer?.fieldsIndex))}return[...set]}function getServerRestInfo(resUrl){const agsRest="/rest/services";let lcResUrl=resUrl.toLowerCase();const idx=lcResUrl.indexOf(agsRest);lcResUrl=idx>-1?resUrl.substring(0,idx):resUrl;return`${lcResUrl}/rest/info`}async function isStandardLayer(layer){let isStandard=true;const onlineDomain=".arcgis.com/";const isOnlineFS=layer.url.includes(onlineDomain)===true;if(isOnlineFS===true&&layer.sourceJSON.serviceItemId!==undefined){const restInfoUrl=getServerRestInfo(layer.url);try{const serverRestInfo=(await esriRequest__default["default"](restInfoUrl,{query:{f:"json"}})).data;if(serverRestInfo.owningTenant!==undefined&&serverRestInfo.owningSystemUrl!==undefined){const portalSelfUrl=`${serverRestInfo.owningSystemUrl}/sharing/rest/portals/${serverRestInfo.owningTenant}`;const portalSelf=(await esriRequest__default["default"](portalSelfUrl,{authMode:"auto",query:{f:"json"}})).data;const portal=new Portal__default["default"]({sourceJSON:portalSelf});await portal.load();isStandard=portal?.sourceJSON?.subscriptionInfo?.dataStoreLevel===undefined}}catch(e){}}return isStandard}function isSeriesUsingTimeBinning(props){const{seriesConfig,xAxisValueFormatType,setTimeBinningInfoWhenNotProvided}=props;let decision=false;if(getSeriesType([seriesConfig])===WebChartTypes$1.LineSeries&&seriesConfig.binTemporalData!==false&&xAxisValueFormatType===WebChartTypes$1.DateAxisFormat){const chartSubType=getChartSubType([seriesConfig]);if(chartSubType!==ChartSubType.BarAndLineNoAggregation&&chartSubType!==ChartSubType.BarAndLineSplitByNoAggregation){const{timeIntervalUnits,timeIntervalSize}=seriesConfig;decision=setTimeBinningInfoWhenNotProvided===true||timeIntervalSize!==undefined&&timeIntervalSize>0&&timeIntervalUnits!==undefined}}return decision}function doesLayerSupportQueryWithDistance(layer){return layer.capabilities?.query?.supportsDistance===true||layer.sourceJSON?.advancedQueryCapabilities?.supportsQueryWithDistance===true}function getLayerSpatialAggregationStatisticsCapabilities(layer){let compatibleWithEnvelopeAggregate=false;const supportedSpatialAggregationStatisticsJSON=layer.sourceJSON?.advancedQueryCapabilities?.supportedSpatialAggregationStatistics??[];const supportedSpatialAggregationStatistics=layer.capabilities?.query?.supportedSpatialStatisticAggregations;compatibleWithEnvelopeAggregate=supportedSpatialAggregationStatisticsJSON.includes("EnvelopeAggregate")||supportedSpatialAggregationStatistics?.envelope===true;return{compatibleWithEnvelopeAggregate}}const BoxPlotYFieldKeys={Min:"min",FirstQuartile:"first_quartile",Median:"median",ThirdQuartile:"third_quartile",Max:"max",IQR:"iqr",Average:"avg",StandardDeviation:"stddev",Outlier:"outlier"};function getBoxPlotStatisticFieldNames(y){const emptyY=y===undefined||y==="";return{[BoxPlotYFieldKeys.Average]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.Average}`,[BoxPlotYFieldKeys.Min]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.Min}`,[BoxPlotYFieldKeys.Max]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.Max}`,[BoxPlotYFieldKeys.FirstQuartile]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.FirstQuartile}`,[BoxPlotYFieldKeys.Median]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.Median}`,[BoxPlotYFieldKeys.ThirdQuartile]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.ThirdQuartile}`,[BoxPlotYFieldKeys.IQR]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.IQR}`,[BoxPlotYFieldKeys.Outlier]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.Outlier}`,[BoxPlotYFieldKeys.StandardDeviation]:`${emptyY===false?`${y}_`:""}${BoxPlotYFieldKeys.StandardDeviation}`}}function isPieChartFromFields(seriesConfig){let isPieFromFields=false;const chartSubType=getChartSubType(seriesConfig);isPieFromFields=chartSubType===ChartSubType.PieFromFields;return isPieFromFields}function isGaugeByFeature(config){return config.subType===GaugeChartSubTypes.FeatureGauge}function extractChartDataFromFetchedData(props){const{seriesType,fetchedData}=props;let chartData;if(fetchedData!==undefined){switch(seriesType){case WebChartTypes$1.HistogramSeries:chartData=fetchedData.bins;break;case WebChartTypes$1.BarSeries:case WebChartTypes$1.LineSeries:case WebChartTypes$1.ComboLineAndBarSeries:case WebChartTypes$1.ScatterSeries:case WebChartTypes$1.PieSeries:case WebChartTypes$1.GaugeSeries:case WebChartTypes$1.BoxPlotSeries:chartData=fetchedData.dataItems;break}}return chartData}function isMultiFieldsBoxPlot(chartSubType){return chartSubType===ChartSubType.BoxPlotMultiFields||chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy}function getBoxPlotYValue(props){const{key,y,chartSubType,splitBy,splitByValue,showOutliers,standardizeValues}=props;let normalizedSplitByValue=splitByValue;const yFieldNames=getBoxPlotStatisticFieldNames(y);let propName=yFieldNames[key];if(showOutliers===true&&(key===BoxPlotYFieldKeys.Min||key===BoxPlotYFieldKeys.Max))propName=`${propName}${boxPlotOutliersSuffix}`;if(standardizeValues===true&&(isMultiFieldsBoxPlot(chartSubType)===true||key===BoxPlotYFieldKeys.Outlier)){propName=`${propName}${boxPlotZScoreSuffix}`}if(splitByValue===undefined||`${splitByValue}`.trim()===""){normalizedSplitByValue=getSplitByValue({where:splitBy,normalize:true,escape:false})}if(normalizedSplitByValue!==undefined&&`${normalizedSplitByValue}`.trim()!=="")propName=`${normalizedSplitByValue}${propName!==""?`_${propName}`:""}`;return propName}function getAllSeriesIDs(seriesConfig){return seriesConfig.map((currentSeries=>`${currentSeries.id}`)).filter((id=>id!=="undefined"))}function getYList(seriesConfig,visibleSeriesId){let yList=[];const seriesIds=visibleSeriesId??getAllSeriesIDs(seriesConfig);const chartSubType=getChartSubType(seriesConfig);yList=seriesConfig.filter((currentSeries=>seriesIds.includes(currentSeries.id))).map((currentSeries=>{let y="y"in currentSeries?currentSeries.y:undefined;if(y!==undefined&&chartSubType===ChartSubType.BarAndLineSplitByNoAggregation){y=`${y}_${getSplitByValue({where:currentSeries.query?.where})}`}return y})).filter((value=>value!==undefined));return Array.from(new Set(yList.flat()))}function getMaxRecords(layer){let maxRecords=layer?.sourceJSON?.maxRecordCount??queryDefaults.maxRecords;if(layer?.sourceJSON?.advancedQueryCapabilities?.supportsMaxRecordCountFactor){maxRecords=layer?.sourceJSON?.maxRecordCount*queryDefaults.maxRecordCountFactor}return maxRecords}function combineFilters(filterList,operand){let combinedFilter;const curedFilterList=Array.from(new Set(filterList)).filter((filter=>filter!==undefined&&filter!==null&&filter!==""&&isAbsoluteTruthWhereClause(filter)===false));curedFilterList.sort(((a,b)=>b.length-a.length));if(curedFilterList.length===1){[combinedFilter]=curedFilterList}else{curedFilterList?.forEach((filter=>{if(filter!==undefined){if(isEmptyStringField(combinedFilter)===true){combinedFilter=`(${filter})`}else if(combinedFilter?.includes(filter)===false){combinedFilter=`${combinedFilter} ${operand??"AND"} (${filter})`}}}))}return combinedFilter??"1=1"}function getQueryTimeExtent$1(timeExtentConfig){let timeExtent;if(timeExtentConfig!==undefined){timeExtent=new TimeExtent__default["default"]({start:new Date(timeExtentConfig[0]),end:new Date(timeExtentConfig[1])})}return timeExtent}function getQueryGeometry$1(geometryConfig){let geometry;if(geometryConfig!==undefined){geometry=geometryJsonUtils__namespace.fromJSON(geometryConfig)}return geometry}function sanitizeOutFields(outFields){return outFields===undefined?undefined:Array.from(new Set(outFields))}function mapQuery(props){const{queryObject,queryConfig,outFields,maxRecordCountFactor,cacheHint}=props;const{where,groupByFieldsForStatistics,orderByFields,outStatistics,gdbVersion,geometry,distance,units,timeExtent,start,num,returnDistinctValues}=queryConfig??{};const query=new Query__default["default"];query.returnGeometry=false;const layer=getLayerFromQueryObject(queryObject);const filters=[where,layer.definitionExpression];query.where=combineFilters(filters);query.outFields=sanitizeOutFields(outFields)??["*"];query.groupByFieldsForStatistics=groupByFieldsForStatistics??query.groupByFieldsForStatistics;query.orderByFields=orderByFields??[];query.returnDistinctValues=returnDistinctValues??false;if(outStatistics!==undefined){const{compatibleWithEnvelopeAggregate}=getLayerSpatialAggregationStatisticsCapabilities(layer);query.outStatistics=outStatistics.filter((stat=>stat.statisticType!==RESTStatisticType$1.EnvelopeAggregate||compatibleWithEnvelopeAggregate===true)).map((statistics=>StatisticDefinition__default["default"].fromJSON(statistics)))}if(maxRecordCountFactor!==undefined){query.maxRecordCountFactor=maxRecordCountFactor}if(gdbVersion!==undefined&&gdbVersion!=="")query.gdbVersion=gdbVersion;else if(layer.gdbVersion!==undefined&&layer.gdbVersion!=="")query.gdbVersion=layer.gdbVersion;const queryGeometry=getQueryGeometry$1(geometry);if(queryGeometry!==undefined){query.geometry=queryGeometry;if(doesLayerSupportQueryWithDistance(layer)===true){if(distance!==undefined)query.distance=distance;if(units!==undefined)query.units=units}}const queryTimeExtent=getQueryTimeExtent$1(timeExtent);if(queryTimeExtent!==undefined)query.timeExtent=queryTimeExtent;else if(layer.timeExtent!==undefined)query.timeExtent=layer.timeExtent;query.cacheHint=cacheHint!==false;if(num!==undefined){query.num=num}if(start!==undefined){query.start=start;query.num=query.num??getMaxRecords(layer)}return query}function getMaxRecordCountFactor(layer){return layer?.sourceJSON?.advancedQueryCapabilities?.supportsMaxRecordCountFactor===true?queryDefaults.maxRecordCountFactor:undefined}const abortControllerMap=new Map;const ErrorKeywords={Default:"defaultError",LayerLoadFailure:"layerLoadFailure",QueryFeaturesError:"queryFeaturesError",ChartDisposed:"ChartDisposeError"};class ArcgisChartsError extends Error{constructor(name,message,details){super(message);this.name=name;this.details=details}}async function fetchErrorsStrings$1(locale=getLocaleInfo().locale){let strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-44becc38-57ab316f-5e707998-f53ad7e5"],resolve,reject)}));switch(locale){case SupportedLocales.Arabic:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ar-2b96ede6-673d563c-e60deb75-6a58b005"],resolve,reject)}));break;case SupportedLocales.Bosnian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bs-305b31d2-e61ad1ac-e68aaa2b-b9ad7af5"],resolve,reject)}));break;case SupportedLocales.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bg-ac50423e-ef287a30-7cd8139a-c469149c"],resolve,reject)}));break;case SupportedLocales.Catalan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ca-3829fc1f-d76f85cb-f5b71e11-f0b4e9e5"],resolve,reject)}));break;case SupportedLocales.Czech:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.cs-7e6217f6-7c23d9f8-0697d6d4-aeab0b5c"],resolve,reject)}));break;case SupportedLocales.Danish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.da-07d76eac-158a3b03-ce860c65-24cc33f8"],resolve,reject)}));break;case SupportedLocales.German:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.de-338220c8-bae3cdd7-ec8b3053-aa1e2323"],resolve,reject)}));break;case SupportedLocales.Greek:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.el-b098b285-a90447d2-7ae90d3f-a644d93e"],resolve,reject)}));break;case SupportedLocales.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-US-69d530ef-1fe9af16-bf47130a-29244b9f"],resolve,reject)}));break;case SupportedLocales.Spanish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.es-3a67083c-03dfdb5a-b88c3c14-8970049c"],resolve,reject)}));break;case SupportedLocales.Estonian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.et-17111f61-d499d7c7-e424ef49-b132130c"],resolve,reject)}));break;case SupportedLocales.Finnish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fi-60041cbd-9a340cd9-1d834a45-c6f3bfb4"],resolve,reject)}));break;case SupportedLocales.French:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fr-97a31571-ca0b6f99-ab724f08-5bcf5401"],resolve,reject)}));break;case SupportedLocales.Hebrew:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.he-1f425b0c-06dbbf2e-4a4a7dd1-60f35b1b"],resolve,reject)}));break;case SupportedLocales.Croatian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hr-60f3cd18-121af6e6-2beb6959-f8625e0b"],resolve,reject)}));break;case SupportedLocales.Hungarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hu-b8494d32-86f9e733-4017b30a-925141f2"],resolve,reject)}));break;case SupportedLocales.Indonesian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.id-3f98f9f0-8275973b-cdedddd3-661ad34f"],resolve,reject)}));break;case SupportedLocales.Italian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.it-0e05067b-2fdfd3dc-d90dd2ab-d287a3fb"],resolve,reject)}));break;case SupportedLocales.Japanese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ja-98f55623-61d5b068-377f0e98-cbb4f171"],resolve,reject)}));break;case SupportedLocales.Korean:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ko-4608ea2b-6a6e2fdd-acd1652d-52cda8a6"],resolve,reject)}));break;case SupportedLocales.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lt-0e773f3b-dac69201-76021ba9-63705d32"],resolve,reject)}));break;case SupportedLocales.Latvian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lv-57e77a14-6688cf3e-f325bab7-7aedea3b"],resolve,reject)}));break;case SupportedLocales.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nb-b9535cce-ed7bc0d1-681abcbb-a7fffea2"],resolve,reject)}));break;case SupportedLocales.Dutch:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nl-40956447-fe47199f-bb381704-98767457"],resolve,reject)}));break;case SupportedLocales.Polish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pl-ff93c2fd-ebde2b94-52f986a4-663fd14f"],resolve,reject)}));break;case SupportedLocales.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-BR-ca013f25-3f4d11fd-2b9f8659-d2963b69"],resolve,reject)}));break;case SupportedLocales.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-PT-7f5151ee-171e5e7f-1c97a640-8c60312e"],resolve,reject)}));break;case SupportedLocales.Romanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ro-0b30ed4b-9c2fcaf5-d7885e29-a041e009"],resolve,reject)}));break;case SupportedLocales.Russian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ru-2e392b6d-1081714b-17dd754f-c4d11802"],resolve,reject)}));break;case SupportedLocales.Serbian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sr-7a177b5d-2d4f7077-55595886-7eeb2233"],resolve,reject)}));break;case SupportedLocales.Slovak:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sk-16cb43ea-4e172e26-ac1e0b83-f5a22fd1"],resolve,reject)}));break;case SupportedLocales.Slovenian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sl-61344164-3bbdf3a2-33f6d668-5fcc2809"],resolve,reject)}));break;case SupportedLocales.Swedish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sv-47fce179-3aa13803-96daf8bb-1d372bf1"],resolve,reject)}));break;case SupportedLocales.Thai:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.th-a83666df-02c41747-09ac2829-23ee06d4"],resolve,reject)}));break;case SupportedLocales.Turkish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.tr-77c9e866-19edc788-03029bfd-47883063"],resolve,reject)}));break;case SupportedLocales.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.uk-a4c7b6d0-88e5f088-66b6508e-12e8ede5"],resolve,reject)}));break;case SupportedLocales.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.vi-31be663f-ca9fb5bb-295063f2-3666629e"],resolve,reject)}));break;case SupportedLocales.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-CN-659fe2bd-7a7f197e-c884cf48-07095a3c"],resolve,reject)}));break;case SupportedLocales.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-HK-862c2f74-635a904f-c5de4b81-8c6924bd"],resolve,reject)}));break;case SupportedLocales.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-TW-12d88496-a53fbda3-e1a15f1a-40e45416"],resolve,reject)}));break}return strings}function convertSpatialFilterUnits(units){let convertedUnit;switch(units){case RESTUnits.Feet:convertedUnit="esriSRUnit_Foot";break;case RESTUnits.Miles:convertedUnit="esriSRUnit_StatuteMile";break;case RESTUnits.NauticalMiles:convertedUnit="esriSRUnit_NauticalMile";break;case RESTUnits.USNauticalMiles:convertedUnit="esriSRUnit_USNauticalMile";break;case RESTUnits.Meters:convertedUnit="esriSRUnit_Meter";break;case RESTUnits.Kilometers:convertedUnit="esriSRUnit_Kilometer";break}return convertedUnit}async function queryAnalytic(props){const{queryObject,queryConfig,outputFormat,dataFormat,outAnalytics}=props;const{where:filter,geometry,distance,units}=queryConfig;let analyticData;const layer=getLayerFromQueryObject(queryObject);const where=combineFilters([filter,layer.definitionExpression]);const options={query:{where}};const geometryExtent=(await getQueryGeometry$1(geometry))?.extent?.toJSON();if(geometryExtent!==undefined){const convertedUnit=convertSpatialFilterUnits(units);const{xmin,ymin,xmax,ymax}=geometryExtent;options.query={...options.query,geometryType:"esriGeometryEnvelope",geometry:`${xmin},${ymin},${xmax},${ymax}`,distance,units:convertedUnit,inSR:geometry?.spatialReference?.wkid}}const queryURL=`${layer.url}/${layer.layerId}/queryAnalytic?f=${outputFormat}&dataFormat=${dataFormat}&outAnalytics=${outAnalytics}`;try{const results=await esriRequest__default["default"](queryURL,options);analyticData=results.data?.features?.[0]?.attributes}catch(e){const errorStrings=await fetchErrorsStrings$1();throw new ArcgisChartsError(ErrorKeywords.QueryFeaturesError,errorStrings.queryError,e)}return analyticData}async function queryFeatureCount(props){const{queryConfig,x,queryObject,chartSubType,isGaugeByFeature}=props;let categoryOrDateCount;if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);const fieldOID=layer.objectIdField;const{where:filter,gdbVersion,timeExtent,geometry,distance,units}=queryConfig;const queryTimeExtent=getQueryTimeExtent$1(timeExtent);const queryGeometry=getQueryGeometry$1(geometry);const where=combineFilters([filter,layer.definitionExpression]);const queryParams={returnDistinctValues:true,outFields:isGaugeByFeature===true||chartSubType===ChartSubType.PieNoAggregation||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation?[fieldOID]:[x],where,gdbVersion:gdbVersion??layer.gdbVersion,timeExtent:queryTimeExtent??layer.timeExtent,geometry:queryGeometry,cacheHint:true};if(queryParams.geometry!==undefined&&doesLayerSupportQueryWithDistance(layer)===true){if(distance!==undefined)queryParams.distance=distance;if(units!==undefined)queryParams.units=units}try{categoryOrDateCount=await queryObject.queryFeatureCount(queryParams)}catch(e){categoryOrDateCount=NaN}}return categoryOrDateCount}async function queryStatistics(props){const{queryObject,queryConfig,abortKey}=props;const{outStatistics}=queryConfig;const statsResult=new Map;if(queryObject!==undefined&&outStatistics!==undefined&&outStatistics.length>0){const modifiedOutStatistics=outStatistics.map((stat=>{const{statisticType,onStatisticField,outStatisticFieldName}=stat;return{statisticType,onStatisticField,outStatisticFieldName:outStatisticFieldName?.toUpperCase()}}));queryConfig.outStatistics=modifiedOutStatistics;delete queryConfig.num;delete queryConfig.orderByFields;const query=mapQuery({queryObject,queryConfig});let features;try{features=await queryObject.queryFeatures(query,{signal:abortKey!==undefined?abortControllerMap.get(abortKey)?.signal:undefined})}catch(e){if(promiseUtils__namespace.isAbortError(e)===false){const errorStrings=await fetchErrorsStrings$1();throw new ArcgisChartsError(ErrorKeywords.QueryFeaturesError,errorStrings.queryError,e)}}const queryResult=features?.features?.[0]?.attributes;if(queryResult!==undefined){outStatistics.forEach((stat=>{const{outStatisticFieldName}=stat;if(outStatisticFieldName!==undefined){const stat=queryResult[outStatisticFieldName.toLowerCase()]??queryResult[outStatisticFieldName.toUpperCase()]??queryResult[outStatisticFieldName];if(stat!==undefined)statsResult.set(outStatisticFieldName,stat)}}))}}return statsResult}async function queryFeatures(props){const{queryObject,queryConfig,outFields,returnUniqueIdsOnly,abortKey}=props;let graphics=[];if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);const maxRecordCountFactor=getMaxRecordCountFactor(layer);const query=mapQuery({queryObject,queryConfig,outFields,maxRecordCountFactor});try{if(returnUniqueIdsOnly===true){graphics=await queryObject.queryObjectIds(query)}else{const seriesData=await queryObject.queryFeatures(query,{signal:abortKey!==undefined?abortControllerMap.get(abortKey)?.signal:undefined});graphics=seriesData.features}}catch(e){if(promiseUtils__namespace.isAbortError(e)===false){const errorStrings=await fetchErrorsStrings$1();throw new ArcgisChartsError(ErrorKeywords.QueryFeaturesError,errorStrings.queryError,e)}}}return graphics}async function batchQueryRequests(queryProps){const pages=[];const{featureCount,maxRecords,queryConfig}=queryProps;let rawBatchData=[];let i=0;let start=queryConfig?.start??0;while(i<queryDefaults.maxParallelRequests&&start<featureCount){const pageProps={...queryProps};pageProps.queryConfig={...queryConfig,start,num:Math.min(maxRecords,featureCount-start)};pages.push(queryFeatures(pageProps));start+=maxRecords;i+=1}const pAll=await Promise.all(pages);rawBatchData=pAll.flat();return rawBatchData}async function queryAllFeatures(props){const{queryObject,queryConfig,outFields,returnUniqueIdsOnly,featureCount,noBatch,abortKey}=props;let rawData=[];if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);const fieldOID=layer.objectIdField;const numberOfFeatures=featureCount??(await queryStatistics({queryObject,queryConfig:{...queryConfig,outStatistics:[{statisticType:RESTStatisticType$1.Count,onStatisticField:fieldOID,outStatisticFieldName:RESTStatisticType$1.Count}]},abortKey})).get(RESTStatisticType$1.Count)??NaN;const maxRecords=getMaxRecords(layer);if(noBatch!==true&&numberOfFeatures>maxRecords&&layer.capabilities.query.supportsPagination===true){let batchStart=0;let i=0;const totalPages=Math.ceil(numberOfFeatures/maxRecords);const totalBatches=Math.ceil(totalPages/queryDefaults.maxParallelRequests);const batchResults=[];while(i<totalBatches){batchStart=i*queryDefaults.maxParallelRequests*maxRecords;const perBatchRawData=batchQueryRequests({queryConfig:{...queryConfig,start:batchStart},outFields,queryObject,maxRecords,featureCount:numberOfFeatures,returnUniqueIdsOnly,abortKey});batchResults.push(perBatchRawData);i+=1}const batchResultsData=await Promise.all(batchResults);rawData=batchResultsData.flat()}else if(Number.isNaN(numberOfFeatures)||numberOfFeatures>0){rawData=await queryFeatures({queryObject,queryConfig,outFields,returnUniqueIdsOnly,abortKey})}}return rawData}async function queryUniqueIDs(props){const{queryObject,queryConfig,uniqueFeature,abortKey}=props;const modifiedQueryConfig={...queryConfig,returnDistinctValues:true};const allFeatures=await queryAllFeatures({queryObject,abortKey,queryConfig:modifiedQueryConfig,returnUniqueIdsOnly:true,featureCount:uniqueFeature===true?1:undefined});return allFeatures}function abortPendingQueries(key){if(key!==undefined){const chartAbortController=abortControllerMap.get(key);if(chartAbortController!==undefined)chartAbortController.abort();abortControllerMap.set(key,new AbortController)}}const ConfigErrorKeywords={Required:"required",MinLength:"minLength",MinItems:"minItems",MaxItems:"maxItems",Pattern:"pattern",AdditionalProperties:"additionalProperties",Enum:"enum",AnyOf:"anyOf"};const DataWarningKeywords={BadData:"badData",EmptyDataSet:"emptyDataSet",HistogramEmptyField:"histogramEmptyField",BarElementExceedsLimit:"barElementExceedsLimit",LineChartExceedsLimit:"lineChartExceedsLimit",BoxPlotExceedsLimit:"boxPlotExceedsLimit",BoxPlotOutliersExceedsLimit:"boxPlotOutliersExceedsLimit",PieChartExceedsLimit:"pieChartExceedsLimit",GaugeExceedsLimit:"gaugeExceedsLimit",PieChartMixOfNegativePositiveSlices:"PieChartMixOfNegativePositiveSlices",NegativeValueInSqrtCalculation:"negativeValueInSqrtCalculation",NegativeValueInLogCalculation:"negativeValueInLogCalculation"};function isDataCompatibleWithTransformation(dataTransformationType,min){return dataTransformationType===WebChartDataTransformations$1.None||dataTransformationType===WebChartDataTransformations$1.Log&&min>0||dataTransformationType===WebChartDataTransformations$1.Sqrt&&min>=0}function createInvalidDataInfoForHistogram(dataTransformationType,dataCountIncompatible){const invalidDataInfo={valid:false};if(dataCountIncompatible===true)invalidDataInfo.invalidType=DataWarningKeywords.HistogramEmptyField;else if(dataTransformationType===WebChartDataTransformations$1.Log)invalidDataInfo.invalidType=DataWarningKeywords.NegativeValueInLogCalculation;else if(dataTransformationType===WebChartDataTransformations$1.Sqrt)invalidDataInfo.invalidType=DataWarningKeywords.NegativeValueInSqrtCalculation;return invalidDataInfo}function createBinMaker(binCount){return bin().thresholds(((_data,valmin,valmax)=>range$1(binCount).map((t=>valmin+t/binCount*(valmax-valmin)))))}function transformValue(value,transformation){let result=value;switch(transformation){case WebChartDataTransformations$1.Log:result=Math.log(value);break;case WebChartDataTransformations$1.Sqrt:result=Math.sqrt(value);break}return result}function applyTransformation(props){const{field,data,transformation}=props;let nonNullCount=0;let min=Number.MAX_SAFE_INTEGER;const transformedData=[...data];for(let idx=0;idx<transformedData.length;idx+=1){let value=transformedData[idx][field];if(typeof value==="number"){min=Math.min(min,value);value=transformValue(value,transformation);transformedData[idx][field]=value;nonNullCount+=1}}return{transformedData,nonNullCount,min}}function fetchInlineRawHistogramData(data,seriesConfig){const{x,dataTransformationType}=seriesConfig;const countIncludingNulls=data.length;const{transformedData:rawData,nonNullCount:countExcludingNulls,min}=applyTransformation({field:x,data,transformation:dataTransformationType});const dataCountIncompatible=countExcludingNulls<2;const dataCompatibleWithTransformation=isDataCompatibleWithTransformation(dataTransformationType,min);return{rawData,dataCompatibleWithTransformation,dataCountIncompatible,countExcludingNulls,countIncludingNulls}}function transformInlineHistogramData(seriesConfig,rawData){const{x,binCount}=seriesConfig;const transformResult={valid:true};if(rawData!==undefined){const numericData=rawData.map((data=>data[x]));let bins=[];bins=createBinMaker(binCount??histogramBinCount)(numericData).map((bin=>({count:bin.length,minValue:bin.x0??NaN,maxValue:bin.x1??NaN})));const mean$1$1=mean$1(numericData)??NaN;const stddev=deviation$1(numericData)??NaN;const median$1$1=median$1(numericData)??NaN;const min=bins[0].minValue;const max=bins[bins.length-1].maxValue;const sum$1$1=sum$1(numericData)??NaN;const count=sum$1(bins,(bin=>bin.count));transformResult.data={mean:mean$1$1,median:median$1$1,stddev,min,max,bins,count:rawData.length,nulls:rawData.length-count,sum:sum$1$1}}return transformResult}const timeUnitHelper=[{unit:WebChartTimeIntervalUnits$1.Seconds,threshold:6e4,unitMs:1e3,preferredIntervalSize:[1,2,3,5,6,10,12,15,20,30,60]},{unit:WebChartTimeIntervalUnits$1.Minutes,threshold:36e5,unitMs:1e3*60,preferredIntervalSize:[1,2,3,5,6,10,12,15,20,30,60]},{unit:WebChartTimeIntervalUnits$1.Hours,threshold:864e5,unitMs:1e3*60*60,preferredIntervalSize:[1,2,3,4,6,8,12,24]},{unit:WebChartTimeIntervalUnits$1.Days,threshold:6048e5,unitMs:1e3*60*60*24,preferredIntervalSize:[1,2,3,4,5,6,7]},{unit:WebChartTimeIntervalUnits$1.Weeks,threshold:24192e5,unitMs:1e3*60*60*24*7,preferredIntervalSize:[1,2,3,4]},{unit:WebChartTimeIntervalUnits$1.Months,threshold:290304e5,unitMs:1e3*60*60*24*7*4,preferredIntervalSize:[1,2,3,4,6,12]},{unit:WebChartTimeIntervalUnits$1.Years,threshold:Number.MAX_SAFE_INTEGER,unitMs:1e3*60*60*24*7*4*12,preferredIntervalSize:[1,2,4,5,10,25,50,100]}];const groupByWhenCaseForMedianTimeBinning=`\${ groupByFieldsForStatistics } WHEN \${ dateField }>='\${ startDate }' AND \${ dateField }\${ endDateOperand }'\${ endDate }' THEN '\${ y }|\${ binIndex}'`;const WebChartJSONSchemas={$schema:"http://json-schema.org/draft-07/schema#",definitions:{RESTFieldType:{enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"RESTFieldType"},RESTStatisticType:{enum:["avg","centroid-aggregate","convex-hull-aggregate","count","envelope-aggregate","max","min","no_aggregation","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"RESTStatisticType"},RESTSimpleLineSymbolStyle:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"RESTSimpleLineSymbolStyle"},RESTSimpleMarkerSymbolStyle:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"RESTSimpleMarkerSymbolStyle"},RESTSimpleFillSymbolStyle:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"RESTSimpleFillSymbolStyle"},RESTHorizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"RESTHorizontalAlignment"},RESTVerticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"RESTVerticalAlignment"},RESTSymbolType:{enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string",title:"RESTSymbolType"},RESTFontStyle:{enum:["italic","normal","oblique"],type:"string",title:"RESTFontStyle"},RESTFontWeight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"RESTFontWeight"},RESTFontDecoration:{enum:["line-through","none","underline"],type:"string",title:"RESTFontDecoration"},RESTRendererType:{enum:["class-breaks","dictionary","dot-density","heatmap","pie-chart","simple","unique-value"],type:"string",title:"RESTRendererType"},RESTUnits:{enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"RESTUnits"},WebChartTypes:{enum:["barSeries","boxPlotSeries","buffer","category","chart","chartAxis","chartGuide","chartLegend","chartOverlay","chartOverlays","chartText","comboLineAndBarSeries","cursorCrosshair","date","gaugeAxisTick","gaugeNeedle","gaugeSeries","histogramSeries","lineSeries","number","pieSeries","pieTick","probabilityPlotSeries","profileGraphSeries","scatterSeries","sizeScale"],type:"string",title:"WebChartTypes"},WebChartDataTransformations:{title:"WebChartDataTransformations",enum:["logarithmic","none","squareRoot"],type:"string"},WebChartColoringPatterns:{title:"WebChartColoringPatterns",enum:["colorMatch","singleColor"],type:"string"},WebChartLegendPositions:{title:"WebChartLegendPositions",enum:["bottom","left","right","top"],type:"string"},WebChartStackedKinds:{enum:["sideBySide","stacked","stacked100"],type:"string",title:"WebChartStackedKinds"},WebChartProbabilityPlotKinds:{title:"WebChartProbabilityPlotKinds",enum:["normalQQPlot","qqPlot"],type:"string"},WebChartSortOrderKinds:{enum:["ASC","DESC"],type:"string",title:"WebChartSortOrderKinds"},WebChartDataSourceTypes:{enum:["inline","layer"],type:"string",title:"WebChartDataSourceTypes"},WebChartLineSmoothedKinds:{enum:["bezier","monotoneX","monotoneY"],type:"string",title:"WebChartLineSmoothedKinds"},WebChartTimeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"WebChartTimeIntervalUnits"},WebChartNullPolicyTypes:{enum:["interpolate","null","zero"],type:"string",title:"WebChartNullPolicyTypes"},WebChartTimeAggregationTypes:{enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"WebChartTimeAggregationTypes"},WebChartLabelBehavior:{enum:["none","rotate","stagger","wrap"],type:"string",title:"WebChartLabelBehavior"},WebChartVersionStatus:{enum:["newer","older","same","unrecognized"],type:"string",title:"WebChartVersionStatus"},WebChartAxisTypes:{enum:["category","date","value"],type:"string",title:"WebChartAxisTypes"},GaugeChartSubTypes:{enum:["featureGauge","statisticGauge"],type:"string",title:"GaugeChartSubTypes"},SizePolicyScaleTypes:{enum:["linear","logarithmic"],type:"string",title:"SizePolicyScaleTypes"},LabelValueTypes:{enum:["modifiedValue","originalValue"],type:"string",title:"LabelValueTypes"},RGBObject:{description:"JSON representation of the color object",title:"RGBObject",type:"object",properties:{r:{type:"number",title:"r"},g:{type:"number",title:"g"},b:{type:"number",title:"b"},a:{default:1,type:"number",title:"a"}},required:["b","g","r"]},IRendererSymbol:{title:"IRendererSymbol",allOf:[{$ref:"#/definitions/ISymbol"},{type:"object",properties:{color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"}},required:["color"]}]},RGBArray:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3,title:"RGBArray"},WebChartConfigFields:{description:"Is an object which dictate which data-item field should be used for defining a property of the rendered element (line, point, bars, etc). Used in inline data source mode only.",title:"WebChartConfigFields",type:"object",properties:{fillColor:{type:"string",title:"fillColor"},fillOpacity:{type:"string",title:"fillOpacity"},fillStyle:{type:"string",title:"fillStyle"},lineColor:{type:"string",title:"lineColor"},lineOpacity:{type:"string",title:"lineOpacity"},lineWidth:{type:"string",title:"lineWidth"},lineStyle:{type:"string",title:"lineStyle"},markerSize:{type:"string",title:"markerSize"},outlineColor:{type:"string",title:"outlineColor"},outlineOpacity:{type:"string",title:"outlineOpacity"},outlineWidth:{type:"string",title:"outlineWidth"},outlineStyle:{type:"string",title:"outlineStyle"},displayLabel:{type:"string",title:"displayLabel"}}},WebChartDataItemColor:{anyOf:[{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string"}],title:"WebChartDataItemColor"},WebChartDataItemValue:{title:"WebChartDataItemValue",anyOf:[{$ref:"#/definitions/RGBObject"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/IRendererSymbol"},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"string",format:"date-time"},{$ref:"#/definitions/IExtent"},{type:"array",items:{type:"number"}},{type:"array",items:{type:"string"}},{type:"array",items:{$ref:"#/definitions/WebChartDataItem"}},{type:["null","string","number","boolean"]}]},WebChartDataItem:{description:"JSON representation of a typical data item",title:"WebChartDataItem",type:"object",additionalProperties:{$ref:"#/definitions/WebChartDataItemValue"}},WebChartBoxPlotDataItem:{description:"JSON representation of the processed data for a Box Plot",title:"WebChartBoxPlotDataItem",type:"object",properties:{outliers:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"outliers"},dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"}},required:["dataItems"]},WebChartScatterPlotDataItem:{description:"JSON representation of the processed data for a Scatter plot",title:"WebChartScatterPlotDataItem",type:"object",properties:{r2:{type:"number",title:"r2"},trendLinePoints:{type:"array",items:[{$ref:"#/definitions/WebChartDataItem"},{$ref:"#/definitions/WebChartDataItem"}],minItems:2,maxItems:2,title:"trendLinePoints"},dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"}},required:["dataItems"]},TimeIntervalInfo:{title:"TimeIntervalInfo",type:"object",properties:{timeIntervalUnits:{enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{type:"number",title:"timeIntervalSize"}}},WebChartGenericDataItem:{description:"JSON representation of the generic data structure for bar, line bar-line, gauge and pie chart",title:"WebChartGenericDataItem",type:"object",properties:{dataItems:{type:"array",items:{$ref:"#/definitions/WebChartDataItem"},title:"dataItems"},timeIntervalInfo:{description:"Time interval information, only for line charts",$ref:"#/definitions/TimeIntervalInfo",title:"timeIntervalInfo"}},required:["dataItems"]},WebChartBin:{description:"JSON representation of a Histogram bin",title:"WebChartBin",type:"object",properties:{count:{type:"number",title:"count"},minValue:{description:"Min value in the bin",type:"number",title:"minValue"},maxValue:{description:"Max value in the bin",type:"number",title:"maxValue"},symbol:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"symbol"}},required:["count","maxValue","minValue"]},WebChartHistogramDataItem:{description:"JSON representation of the processed data for a Histogram",title:"WebChartHistogramDataItem",type:"object",properties:{mean:{type:"number",title:"mean"},median:{type:"number",title:"median"},stddev:{type:"number",title:"stddev"},max:{type:"number",title:"max"},min:{type:"number",title:"min"},sum:{description:"Sum of the values of all the points",type:"number",title:"sum"},count:{description:"Number of all the points/features in un-binned data (including only non-null entries)",type:"number",title:"count"},nulls:{description:"Number of null entries in the pool of points",type:"number",title:"nulls"},bins:{type:"array",items:{$ref:"#/definitions/WebChartBin"},title:"bins"}},required:["bins","max","mean","median","min","stddev"]},WebChartDataTypes:{title:"WebChartDataTypes",anyOf:[{$ref:"#/definitions/WebChartBoxPlotDataItem"},{$ref:"#/definitions/WebChartScatterPlotDataItem"},{$ref:"#/definitions/WebChartGenericDataItem"},{$ref:"#/definitions/WebChartHistogramDataItem"}]},WebChartInlineDataSource:{description:"JSON representation of the inline data source",title:"WebChartInlineDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source. It is **inline** for inline data (arrays of POJOs).",type:"string",enum:["inline"],title:"type"},processed:{description:"Indicates whether the data is already processed and be used right away. If it is `false`, then the data needs to go through some transformation before being assigned to chart/series.",type:"boolean",title:"processed"},configFields:{description:"An object that is used to pass custom configuration like selecting the fill color based on a dataSource field.",$ref:"#/definitions/WebChartConfigFields",title:"configFields"},data:{$ref:"#/definitions/WebChartDataTypes",description:"Structure containing all the data for the chart.",title:"data"}},required:["data","processed","type"]},WebChartLayerDataSource:{description:"JSON representation of the feature layer data source",title:"WebChartLayerDataSource",type:"object",properties:{type:{description:"Represents a unique string identifier for the type of chart data source.",type:"string",enum:["layer"],title:"type"},layer:{$ref:"#/definitions/IFeatureLayer",description:"Carries the properties necessary to build a JSAPI Feature Layer in order to fetch the chart data.",title:"layer"}},required:["layer","type"]},WebChartDataSources:{title:"WebChartDataSources",anyOf:[{$ref:"#/definitions/WebChartInlineDataSource"},{$ref:"#/definitions/WebChartLayerDataSource"}]},ValueConversion:{description:"Stores information regarding a numeric conversion",title:"ValueConversion",type:"object",properties:{factor:{description:"A numeric value multiplying the value to convert",type:"number",title:"factor"},offset:{description:"A numeric offset to apply to the value to convert",type:"number",title:"offset"}}},WebChartTextSymbol:{description:"Represents a text symbol.",title:"WebChartTextSymbol",allOf:[{$ref:'#/definitions/Omit<ITextSymbol,"xoffset"|"yoffset">'},{type:"object",properties:{xoffset:{description:'Horizontal offset. Can be a number for a fixed value in pixels, or a string as "25%" for a value\nrelative to the label\'s container width.',type:["string","number"],title:"xoffset"},yoffset:{description:'Horizontal offset. Can be a number for a fixed value in pixels, or a string as "25%" for a value\nrelative to the label\'s container height.',type:["string","number"],title:"yoffset"}}}]},WebChartText:{description:"Stores info on how some text is rendered on the chart and whether it is visible or not.",title:"WebChartText",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartText object. For ChartText object, it is "chartText".',type:"string",enum:["chartText"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},content:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains the styling info and text content. Details on **esriTS** are [here](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm).",title:"content"}},required:["content","type"]},WebChartCursorCrosshair:{description:"JSON representation of the cursor's crosshair for a chart.",title:"WebChartCursorCrosshair",type:"object",properties:{type:{description:"Represents a unique string identifier for the chart cursor's crosshair.",type:"string",enum:["cursorCrosshair"],title:"type"},style:{description:"Contains styling info on how the chart cursor's crosshair should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"style"},verticalLineVisible:{description:"Indicates whether the vertical crosshair line should be displayed",default:false,type:"boolean",title:"verticalLineVisible"},horizontalLineVisible:{description:"Indicates whether the horizontal crosshair line should be displayed",default:false,type:"boolean",title:"horizontalLineVisible"}},required:["type"]},WebChartLegend:{description:"JSON representation of the Chart's legend box",title:"WebChartLegend",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:false,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartPieChartLegend:{description:"Specific legend for the Pie chart",title:"WebChartPieChartLegend",type:"object",properties:{displayNumericValue:{description:"Indicates whether the numeric value associated to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:false,type:"boolean",title:"displayNumericValue"},displayPercentage:{description:"Indicates whether the percentage to a slice is to be displayed in the legend.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`",default:false,type:"boolean",title:"displayPercentage"},labelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"labelMaxWidth"},valueLabelMaxWidth:{description:"Maximum width in pixels of the label displaying the slice name. If the label is larger than the maximum width, it will automatically wrap.",default:200,type:"number",title:"valueLabelMaxWidth"},type:{description:'Represents a unique string identifier for the ChartLegend object. For ChartLegend object, it is "chartLegend".',type:"string",enum:["chartLegend"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},title:{description:"Contains styling info on how the title of the legend box should be rendered",$ref:"#/definitions/WebChartText",title:"title"},body:{$ref:"#/definitions/WebChartTextSymbol",description:"Contains styling info on how legend body (excluding the **title**) should be rendered",title:"body"},position:{$ref:"#/definitions/WebChartLegendPositions",description:'Positions the legends at `"right"`, `"left"`, `"top"`, or `"bottom"` of the chart.',title:"position"},maxHeight:{default:50,type:["null","number"],title:"maxHeight"},roundMarkers:{description:"If set to true, the legend markers are displayed as circles. Otherwise they are rounded rectangles.",default:false,type:"boolean",title:"roundMarkers"}},required:["body","position","type"]},WebChartOverlay:{description:"JSON representation of the chart's overlays like trendline scatter plot, and median in histogram",title:"WebChartOverlay",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartOverlay object. For ChartOverlay object, it is "chartOverlay".',type:"string",enum:["chartOverlay"],title:"type"},created:{description:"Determines whether the overlay is created under the hood. It may or may not be visible.",default:false,type:"boolean",title:"created"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},symbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the overlay should be rendered",title:"symbol"}},required:["symbol","type"]},NumberFormatOptions:{description:"Defines how the numerical(value) axis data should be formatted.",title:"NumberFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "number". It can help us to differentiate numerical (value) axis from other types of axes viz., date-time axis and category axis.',type:"string",enum:["number"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.NumberFormatOptions",description:"Represents the JS native [Intl.NumberFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat), which is based on [CLDR](http://cldr.unicode.org/translation/numbers-currency/number-patterns) specifications.",title:"intlOptions"}},required:["intlOptions","type"]},WebChartDateTimeUnitFormatOptions:{description:'Interface used by the axis `valueFormat` property to describe how to format specific date and time units when displayed on the axis.\nFor instance:\n"year": { year: "numeric" }\n"month": { month: "numeric" }\n"day": { day: "2-digit" }\n"hour": { day: "numeric" }\n"minute": { minute: "numeric" }\n"second": { second: "numeric" }\nReference: https://tc39.es/ecma402/#sec-datetimeformat-abstracts',title:"WebChartDateTimeUnitFormatOptions",type:"object",properties:{year:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"year"},month:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"month"},day:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"day"},hour:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"hour"},minute:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"minute"},second:{$ref:"#/definitions/Intl.DateTimeFormatOptions",title:"second"}}},CategoryFormatOptions:{description:"Defines how the category axis data (Categories) should be formatted.",title:"CategoryFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the CategoryFormatOptions object. For CategoryFormatOptions object, it is "category". It can help us to differentiate category axis from other types of axes, viz., date-time axis and numeric (value) axis.',type:"string",enum:["category"],title:"type"},characterLimit:{description:"Represents a positive integer which represents the limit on the number of characters to be displayed for all the category strings. The truncated string are appended with `...`. If property is not present or `null`, no truncation is done.",minimum:1,multipleOf:1,type:["null","number"],title:"characterLimit"}},required:["type"]},WebChartGuide:{description:"JSON representation of the chart's guide object. Can be used to represent both line and fill guides.",title:"WebChartGuide",type:"object",properties:{type:{description:'Represents a unique string identifier for the Guide object. For Guide class, it is "chartGuide".',type:"string",enum:["chartGuide"],title:"type"},start:{description:"Determines the value where the guide should begin.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"start"},end:{description:"Determines the value where the guide should end. If it is not specified, we get a line guide, otherwise we get a fill/rectangular guide.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"end"},style:{description:"Determines how the guide should be rendered. Line guide requires [esriSLS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format, and fill guide requires [esriSFS](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm) format.",anyOf:[{$ref:"#/definitions/ISimpleLineSymbol"},{$ref:"#/definitions/ISimpleFillSymbol"}],title:"style"},name:{description:"A unique string identifier which is used to refer to a particular guide. It is displayed in the Chart Authoring UI to differentiate between different guides.",type:"string",title:"name"},label:{description:"Represents a text symbol.",$ref:"#/definitions/WebChartTextSymbol",title:"label"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},above:{description:"Determines whether the guide should be rendered on top of (overlapping) the series or under the series.",default:false,type:"boolean",title:"above"}},required:["name","start","style","type"]},WebChartAxis:{description:"JSON representation of the chart's axis object",title:"WebChartAxis",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:false,type:"boolean",title:"isLogarithmic"},title:{description:"Contains styling info on how the title of the axis should be rendered",$ref:"#/definitions/WebChartText",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:false,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:false,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:false,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:false,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:false,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","type","valueFormat"]},WebChartGaugeAxisTick:{description:"JSON representation of the gauge axis ticks.",title:"WebChartGaugeAxisTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeAxisTick object. For WebChartGaugeAxisTick object, it is "gaugeAxisTick".',type:"string",enum:["gaugeAxisTick"],title:"type"},visible:{description:"Determines the visibility of the axis ticks.",default:true,type:"boolean",title:"visible"}},required:["type"]},WebChartNeedle:{title:"WebChartNeedle",type:"object",properties:{type:{description:'Represents a unique string identifier for the ChartNeedle object. For WebChartNeedle object, it is "gaugeNeedle".',type:"string",enum:["gaugeNeedle"],title:"type"},visible:{description:"Hides or shows the needle.",default:true,type:"boolean",title:"visible"},symbol:{description:"Contains styling info on how the needle should be rendered",$ref:"#/definitions/ISimpleFillSymbol",title:"symbol"},startWidth:{description:"Represents the needle's thickness at the bottom (chart's center), in px",minimum:1,default:10,type:["null","number"],title:"startWidth"},endWidth:{description:"Represents the needle's thickness at the top, in px",minimum:1,default:1,type:["null","number"],title:"endWidth"},innerRadius:{description:"Represents the size of the hole in the middle of the chart. Can be visualized when guides are displayed.",minimum:0,maximum:100,default:25,type:["null","number"],title:"innerRadius"},displayPin:{description:"Hides or shows the needle's pin (centroid circle)",default:false,type:"boolean",title:"displayPin"}},required:["type"]},WebChartGaugeAxis:{description:"JSON representation of the gauge chart's axis object. Inherits from the WebChartAxis properties.",title:"WebChartGaugeAxis",type:"object",properties:{innerLabel:{description:"Specifies how the axis' inner label needs to be displayed",$ref:"#/definitions/WebChartText",title:"innerLabel"},needle:{description:"Specifies how the axis' needle needs to be displayed",$ref:"#/definitions/WebChartNeedle",title:"needle"},ticks:{description:"Specifies how the axis' ticks need to be displayed",$ref:"#/definitions/WebChartGaugeAxisTick",title:"ticks"},labelsIncrement:{description:"If a label has a value being a multiple of that property, it will be displayed. Otherwise it will be hidden.\n\nIf the property is `undefined` or 0, the chart will be displayed with 6 axis labels distributed evenly along\nthe axis min and max.\n\nIf the property has a value that results in more than a set limit of axis labels (25 as defined in `ChartDefaults.gauge.maximumNumberOfLabelIntervals`)\nthis property value will be ignored and the chart will be displayed with only axis min/max with 4 ticks in between.",default:"undefined",type:"number",title:"labelsIncrement"},onlyShowFirstAndLastLabels:{description:"Specifies if only the first and last labels need to be displayed. If set to `true` all the other labels\nwill be hidden.\nTheir visibility still depends on the axis labels visibility (WebChartAxis.labels.visible).",default:false,type:"boolean",title:"onlyShowFirstAndLastLabels"},minimumValueConversion:{description:"Defines how to convert the axis minimum",$ref:"#/definitions/ValueConversion",title:"minimumValueConversion"},maximumValueConversion:{description:"Defines how to convert the axis maximum",$ref:"#/definitions/ValueConversion",title:"maximumValueConversion"},minimumFromField:{description:"Specifies the field name of which numeric value is to be mapped to the axis minimum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `minimum` value\nfrom the axis config, if provided, or the default value of 0, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"minimumFromField"},maximumFromField:{description:"Specifies the field name of which value is to be mapped to the axis maximum value.\nWhen the field name is not provided or the field does not contain a numeric value, the `maximum` value\nfrom the axis config, if provided, or the default value of 100, in that order, will be used.\n\nThis property is only applicable to FeatureGauge.",type:"string",title:"maximumFromField"},type:{description:'Represents a unique string identifier for the WebChartAxis object. For ChartAxis object, it is "chartAxis".',type:"string",enum:["chartAxis"],title:"type"},visible:{description:"Determines the visibility of the content.",default:true,type:"boolean",title:"visible"},isLogarithmic:{description:"Specifies whether the axis has a logarithmic scale or not.",default:false,type:"boolean",title:"isLogarithmic"},title:{description:"Contains styling info on how the title of the axis should be rendered",$ref:"#/definitions/WebChartText",title:"title"},valueFormat:{description:"Specifies how numerical/categorical/date-time values should be formatted.",anyOf:[{$ref:"#/definitions/NumberFormatOptions"},{$ref:"#/definitions/DateTimeFormatOptions"},{$ref:"#/definitions/CategoryFormatOptions"}],title:"valueFormat"},minimum:{description:"The minimum value which the axis should represent, when it is not defined or null, then the minimum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"minimum"},maximum:{description:"The maximum value which the axis should represent, when it is not defined or null, then the maximum value for the corresponding axis is automatically calculated.",type:["null","number"],title:"maximum"},grid:{description:"Dictates how the grid lines associated with a particular axis should be rendered.",$ref:"#/definitions/ISimpleLineSymbol",title:"grid"},guides:{description:"Represent an array of guides that should be rendered onto the axis.",type:"array",items:{$ref:"#/definitions/WebChartGuide"},title:"guides"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the axis line should be rendered.",title:"lineSymbol"},labels:{$ref:"#/definitions/WebChartText",description:"Contains styling info on how the axis labels should be rendered.",title:"labels"},scrollbarVisible:{description:"Represents an option to add scrollbar to the axis of the chart",default:false,type:"boolean",title:"scrollbarVisible"},displayZeroLine:{description:"Represents an option to hide/un-hide the zero line on value axis",default:false,type:"boolean",title:"displayZeroLine"},integerOnlyValues:{description:"Represents an option to show `integer-only` values for a value axis",default:false,type:"boolean",title:"integerOnlyValues"},displayCursorTooltip:{description:"Specifies whether cursor tooltip should be displayed.",default:false,type:"boolean",title:"displayCursorTooltip"},buffer:{description:"Allows setting a buffer to a **value axis** to provide some space around the series.",default:false,type:"boolean",title:"buffer"}},required:["labels","lineSymbol","type","valueFormat"]},IStatisticDefinitionExtended:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"],title:"IStatisticDefinitionExtended"},WebChartQuery:{description:"Chart query object inspired by [JSAPI Query](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html) class.",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IExtent"},{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"}],title:"geometry"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},start:{description:"The zero-based index indicating where to begin retrieving features.",type:"number",title:"start"},num:{description:"The number of features to retrieve.",type:"number",title:"num"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:false,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:false,type:"boolean",title:"fetchNullValues"}},title:"WebChartQuery"},WebChartSeriesQuery:{description:"Subset of the WebChartQuery, use the series level",title:"WebChartSeriesQuery",type:"object",properties:{where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"},groupByFieldsForStatistics:{description:"An array of fields which determine how the base data is grouped. Only one **groupBy** Field is supported, but ArcGIS JSAPI [supports multiple groupBy fields](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#groupByFieldsForStatistics). While splitting by multiple group-by fields is possible, it is not being done because of the number of series it will give rise to (equal to the length of the Cartesian product set) possibly making the visualization hard to interpret.",maxItems:1,type:"array",items:{type:"string"},title:"groupByFieldsForStatistics"},outStatistics:{description:"Represents an array of statistics definitions which dictate how a particular field should be aggregated. Refer to [JSAPI Statistics Definition class](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-StatisticDefinition.html) for more info.",type:"array",items:{description:"Temporary type copying the `IStatisticDefinition` and adding the 'envelope-aggregate' aggregation type\nto the `statisticType` property.\nTODO: remove this type and use IStatisticDefinition once the rest-js typings are updated. See https://github.com/Esri/arcgis-rest-js/issues/1043",type:"object",properties:{statisticType:{description:"Statistical operation to perform (count, sum, min, max, avg, stddev, var, percentile_cont, percentile_disc, envelope-aggregate).",enum:["avg","count","envelope-aggregate","max","min","percentile_cont","percentile_disc","stddev","sum","var"],type:"string",title:"statisticType"},statisticParameters:{description:"Parameters to be used along with statisticType. Currently, only applicable for percentile_cont (continuous percentile) and percentile_disc (discrete percentile).",type:"object",properties:{value:{type:"number",title:"value"},orderBy:{enum:["asc","desc"],type:"string",title:"orderBy"}},required:["value"],title:"statisticParameters"},onStatisticField:{description:"Field on which to perform the statistical operation.",type:"string",title:"onStatisticField"},outStatisticFieldName:{description:"Field name for the returned statistic field. If outStatisticFieldName is empty or missing, the server will assign one. A valid field name can only contain alphanumeric characters and an underscore. If the outStatisticFieldName is a reserved keyword of the underlying DBMS, the operation can fail. Try specifying an alternative outStatisticFieldName.",type:"string",title:"outStatisticFieldName"}},required:["onStatisticField","statisticType"]},title:"outStatistics"},orderByFields:{description:"Represents the sorting order of the output result. More info present in [JSAPI docs](https://developers.arcgis.com/javascript/latest/api-reference/esri-tasks-support-Query.html#orderByFields). The format of any entry in this array is `field_name sorting_order`. When `sorting_order` is not defined, it is assumed to be ascending",examples:["STATE_NAME DESC","CITY_NAME ASC","CITY_NAME"],type:"array",items:{type:"string"},title:"orderByFields"},returnDistinctValues:{description:"If true then the query returns distinct values based on the field(s) specified in outFields. Available for count-based aggregations only.",default:false,type:"boolean",title:"returnDistinctValues"},fetchNullValues:{description:"Indicates whether to fetch null values for them to be counted or displayed as categories on the chart.",default:false,type:"boolean",title:"fetchNullValues"}}},WebChartDataFilters:{description:"JSON representation of filters applied to the data",title:"WebChartDataFilters",type:"object",properties:{gdbVersion:{description:"Specifies the geodatabase version to display for feature service queries.",type:"string",title:"gdbVersion"},geometry:{description:"The geometry to apply to the spatial filter. A buffer can be applied to it by setting the properties `distance` and `units`.",anyOf:[{$ref:"#/definitions/IExtent"},{$ref:"#/definitions/IPoint"},{$ref:"#/definitions/IPolyline"},{$ref:"#/definitions/IPolygon"},{$ref:"#/definitions/IPolygonWithCurves"},{$ref:"#/definitions/IEnvelope"}],title:"geometry"},timeExtent:{description:"A time extent ([timestamp, timestamp]) for a temporal query against time-aware layers.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"timeExtent"},distance:{description:"Specifies a search distance for the `geometry`. To be associated with the `units` property. For compatible layers only.",type:"number",title:"distance"},units:{description:"The unit for calculating the buffer distance when `distance` and `geometry` are provided.\nIf not specified, the unit is derived from the geometry spatial reference.",enum:["feet","kilometers","meters","miles","nautical-miles","us-nautical-miles"],type:"string",title:"units"},where:{description:"Acts as a filter on the base data for attribute-based filtering, expect for bar/line charts for which is is used to handle the split-by field values.",type:"string",title:"where"}}},WebChartSeries:{description:"JSON representation of the chart's series object. All other series extends this interface.",type:"object",properties:{type:{type:"string",title:"type"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"],title:"WebChartSeries"},WebChartBarChartSeries:{description:"[Bar chart](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/bar-chart.htm) shows the categorical distribution of String/DateTime data.",title:"WebChartBarChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the BarChartSeries object. For BarSeries object, it is "barSeries".',type:"string",enum:["barSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},stackedType:{description:'Specifies how the bars/columns should be placed when multiple bar series are rendered in the same chart, say when "split by" operation is executed on any field or when multiple attributes/fields corresponding to the same set of classes are to be visualized.',enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:false,type:"boolean",title:"rotated"},binTemporalData:{description:"If set to `false` the `timeIntervalSize` and `timeIntervalUnits` properties can be used to set the date axis base interval.\nSetting the property to `true` won't have any effect as bar chart doesn't support yet the time binning feature.",default:"undefined",type:"boolean",title:"binTemporalData"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.\nUsed to set the date axis base interval.\nThis property is available at the series level for consistency with `WebChartLineChartSeries` which supports the time binning (not yet implemented on bar).",enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"This property must be used in conjunction with `timeIntervalUnits` to set the date axis base interval.\nThis property is available at the series level for consistency with `WebChartLineChartSeries` which supports the time binning (not yet implemented on bar).",minimum:1,type:"number",title:"timeIntervalSize"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","type","x","y"]},HistogramOverlays:{description:"Object containing Histogram overlays",title:"HistogramOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramOverlays object. For HistogramOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},mean:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the mean overlay for histogram.",title:"mean"},median:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the median overlay for histogram.",title:"median"},standardDeviation:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the standard deviation overlay for histogram.",title:"standardDeviation"},comparisonDistribution:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the comparison distribution overlay for histogram.",title:"comparisonDistribution"}},required:["comparisonDistribution","mean","median","standardDeviation","type"]},WebChartHistogramSeries:{description:"[Histogram](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/histogram.htm) shows the numerical(frequency) distribution of a numerical field.",title:"WebChartHistogramSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the HistogramSeries object. For BarSeries object, it is "histogramSeries".',type:"string",enum:["histogramSeries"],title:"type"},binCount:{description:"Bin count must be a positive integer.",minimum:1,multipleOf:1,default:32,type:["null","number"],title:"binCount"},overlays:{$ref:"#/definitions/HistogramOverlays",description:"Specifies the chart overlays. Histogram supports 4 overlays: **mean**, **median**, **standardDeviation** and **comparisonDistribution**.",title:"overlays"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",description:"Specifies how the data should be transformed (e.g. square root, log, etc.) before binning.",title:"dataTransformationType"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the columns/bars should be rendered",title:"fillSymbol"},rotated:{description:"Specifies whether the bars/columns are rotated or not. When it is `true`, we get vertical columns. When it is `false`, we get horizontal ones.",default:false,type:"boolean",title:"rotated"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","fillSymbol","id","name","overlays","type","x"]},ScatterPlotOverlays:{description:"Object containing Scatter Plot overlays",title:"ScatterPlotOverlays",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterPlotOverlays object. For ScatterPlotOverlays object, it is "chartOverlays".',type:"string",enum:["chartOverlays"],title:"type"},trendLine:{$ref:"#/definitions/WebChartOverlay",description:"Specifies the trendline overlay for scatter plot.",title:"trendLine"}},required:["trendLine","type"]},SizePolicy:{title:"SizePolicy",type:"object",properties:{type:{description:'Represents a unique string identifier for the sizePolicy object. For sizePolicy object, it is "sizeScale".',type:"string",enum:["sizeScale"],title:"type"},scaleType:{description:"The type of scale to apply to the markers (linear or logarithmic)",default:"SizePolicyScaleTypes.Linear",enum:["linear","logarithmic"],type:"string",title:"scaleType"},field:{description:"The field which determines the markers size",type:"string",title:"field"},minSize:{description:"The minimum marker size",default:5,multipleOf:1,type:"number",title:"minSize"},maxSize:{description:"The maximum marker size",default:30,multipleOf:1,type:"number",title:"maxSize"}},required:["field","type"]},WebChartScatterPlotSeries:{description:"[Scatter plot](https://pro.arcgis.com/en/pro-app/help/analysis/geoprocessing/charts/scatter-plot.htm) shows the relationship between two numerical fields.",title:"WebChartScatterPlotSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the ScatterSeries object. For ScatterSeries object, it is "scatterSeries".',type:"string",enum:["scatterSeries"],title:"type"},y:{description:"Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",description:'Specifies how each data point in the scatter plot should be rendered. The type is `"esriSMS"` and it is adopted from the [REST API Types](https://developers.arcgis.com/documentation/common-data-types/symbol-objects.htm#GUID-C8D40B32-5F4B-45EB-8048-6D5A8763E13B).',title:"markerSymbol"},overlays:{$ref:"#/definitions/ScatterPlotOverlays",description:"Specifies all the chart overlays. The scatter plot implements only 1 overlay, **trendLine**.",title:"overlays"},sizePolicy:{description:"Specifies rules to use the scatter plot as bubble plot, by changing dynamically the markers size according to a specific field value",$ref:"#/definitions/SizePolicy",title:"sizePolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","markerSymbol","name","overlays","type","x","y"]},WebChartPieChartTick:{description:"JSON representation of the pie ticks.",title:"WebChartPieChartTick",type:"object",properties:{type:{description:'Represents a unique string identifier for the WebChartPieChartTick object. For PieTick object, it is "pieTick".',type:"string",enum:["pieTick"],title:"type"},visible:{description:"Determines the visibility of the tick.\nAssigning the `true` value will only be considered when the data labels are visible (`series.dataLabels.visible`) and\nwhen the data label associated to the tick is outside of the chart (`series.dataLabelsOffset` > 0).",type:"boolean",title:"visible"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the pie chart ticks should be rendered",title:"lineSymbol"}},required:["lineSymbol","type"]},WebChartPieChartSlice:{description:"JSON representation of the pie slices",title:"WebChartPieChartSlice",type:"object",properties:{sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["sliceId"]},WebChartPieChartGroupSlice:{description:"JSON representation of the pie grouped slice",title:"WebChartPieChartGroupSlice",type:"object",properties:{percentageThreshold:{description:"Slices that have a percent value equal or lesser to this threshold are grouped into a unique slice",type:"number",title:"percentageThreshold"},dataLabels:{description:"Specifies how the grouped slice data labels should be rendered.\nIf the property is not set the `series.dataLabels` will be used instead.",$ref:"#/definitions/WebChartText",title:"dataLabels"},sliceId:{description:"A unique string used identify the slice of a pie chart.",type:"string",title:"sliceId"},originalLabel:{description:"The slice's original label.",anyOf:[{type:"string",format:"date-time"},{type:["null","string","number"]}],title:"originalLabel"},label:{description:"Custom label for the slice.\nFor grouped slice, the default value is `Other`.\nFor regular slice, it will be either the category or field name.",type:"string",title:"label"},fillSymbol:{description:"Contains styling info on how the slice should be rendered. If not provided, the slice will\nbe styled with default values.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"}},required:["percentageThreshold","sliceId"]},WebChartPieChartSeries:{description:"JSON representation of the Pie Chart series",title:"WebChartPieChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the PieSeries object. For PieSeries object, it is "pieSeries".',type:"string",enum:["pieSeries"],title:"type"},y:{description:"Specifies which field represents the y-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"y"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",minimum:0,maximum:100,default:50,type:["null","number"],title:"innerRadius"},startAngle:{default:-90,type:["null","number"],title:"startAngle"},endAngle:{default:270,type:["null","number"],title:"endAngle"},fillSymbol:{$ref:"#/definitions/ISimpleFillSymbol",description:"Contains styling info on how the slices should be rendered",title:"fillSymbol"},displayNumericValueOnDataLabel:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`.\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:true,type:"boolean",title:"displayNumericValueOnDataLabel"},displayPercentageOnDataLabel:{description:"Indicates whether the percentage associated to a slice is to be displayed on its data label.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `dataLabelFormatter` is provided.",default:false,type:"boolean",title:"displayPercentageOnDataLabel"},displayNumericValueOnTooltip:{description:"Indicates whether the numeric value associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:true,type:"boolean",title:"displayNumericValueOnTooltip"},displayPercentageOnTooltip:{description:"Indicates whether the percentage associated to a slice is to be displayed on its tooltip.\nIf both displayNumericValue & displayPercentage are true on a same label, they will be displayed as `percentage (value)`\nThis property will be ignored if the chart options `tooltipFormatter` is provided.",default:true,type:"boolean",title:"displayPercentageOnTooltip"},numericValueFormat:{description:"Specifies how the numerical values should be formatted (applied to label, tooltip and legend).\nCan be overridden for the tooltips by series.dataTooltipValueFormat.",$ref:"#/definitions/NumberFormatOptions",title:"numericValueFormat"},percentValueFormat:{description:"Specifies how the percent values should be formatted (applied to label, tooltip and legend)\nCan be overridden for the tooltips by series.dataTooltipPercentFormat.",$ref:"#/definitions/NumberFormatOptions",title:"percentValueFormat"},valuePrefix:{description:"Adds a prefix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valuePrefix"},valueSuffix:{description:"Adds a suffix to all the values displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"valueSuffix"},percentagePrefix:{description:"Adds a prefix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentagePrefix"},percentageSuffix:{description:"Adds a suffix to all the percentages displayed on the pie chart: data labels, tooltips and legend",type:"string",title:"percentageSuffix"},dataLabelsCharacterLimit:{description:'If set, the category on the data label is truncated to display only `characterLimit` characters, and an ellipsis ("...")\nis added to the end of the label.\nThis does not affect the value and percentage part of the labels.\nDoes not apply to tooltips and legend labels.',default:"undefined",minimum:1,multipleOf:1,type:["null","number"],title:"dataLabelsCharacterLimit"},ticks:{description:"Specifies how to render the ticks shown on each slide.\nTicks will be displayed with default values if not provided.",$ref:"#/definitions/WebChartPieChartTick",title:"ticks"},dataLabelsOffset:{description:"Determines in pixel how far the data labels should be placed from their slice.\nIf a negative value is provided the label will be placed inside of the chart.",default:10,type:"number",title:"dataLabelsOffset"},alignDataLabels:{description:"Aligns labels into columns to make them more readable and avoid them to overlap each other.",default:false,type:"boolean",title:"alignDataLabels"},optimizeDataLabelsOverlapping:{description:"Optimizes the data labels rendering to avoid them to be cut off on the edges or to overlap the legend by wrapping them and adding padding to the chart.",default:false,type:"boolean",title:"optimizeDataLabelsOverlapping"},sliceGrouping:{description:"Specifies if and how the slices under a given percentage threshold are grouped into a unique slice",$ref:"#/definitions/WebChartPieChartGroupSlice",title:"sliceGrouping"},slices:{description:"An array of WebChartPieChartSlice representing the ids, labels and styles of the pie slices.\n\nWhen this property is not defined, or when a pie slice does not have a matching slice in this array,\nthe series' fillSymbol will be used. If the series' fillSymbol does not contain color information, colors from the\ncolor ramps will be utilized.",type:"array",items:{$ref:"#/definitions/WebChartPieChartSlice"},title:"slices"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the pie slices.\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object, and\nfor order based on category or field value (not for order by y value).",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","fillSymbol","id","name","type","x","y"]},WebChartGaugeSeries:{description:"JSON representation of the `Gauge` series",title:"WebChartGaugeSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the GaugeSeries object. For GaugeSeries object, it is "gaugeSeries".',type:"string",enum:["gaugeSeries"],title:"type"},valueConversion:{description:"Defines the conversion to apply to the gauge value",$ref:"#/definitions/ValueConversion",title:"valueConversion"},featureIndex:{description:"Specifies the index of the feature to be rendered.\nThis property will be ignored for a statistic gauge (indicated via `WebGaugeChart.subType` property).\nFor feature-based gauge, if this property is not present, the first feature will be used (featureIndex = 0)",type:"number",title:"featureIndex"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x"]},WebChartLineChartSeries:{description:"JSON representation of the Line Chart series",title:"WebChartLineChartSeries",type:"object",properties:{type:{description:'Represents a unique string identifier for the LineSeries object. For LineSeries object, it is "lineSeries".',type:"string",enum:["lineSeries"],title:"type"},y:{type:"string",title:"y"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",description:"Contains styling info on how the line/line segments should be rendered",title:"lineSymbol"},lineSmoothed:{description:"Specifies whether line segments should be smoothed.",default:false,type:"boolean",title:"lineSmoothed"},showArea:{description:"Indicates whether line series show area.",default:false,type:"boolean",title:"showArea"},markerVisible:{description:"Indicates whether to show or hide the markers/bullets of the line series.",default:true,type:"boolean",title:"markerVisible"},markerSymbol:{description:"Contains styling info on how the marker should be rendered",$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},areaColor:{description:"Specifies the color of the filled area for line chart.\nareaColor will be applied only if showArea is true, and is defaulted to the line color if not provided.",type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"areaColor"},rotated:{description:"Specifies whether the series should be rotated.",default:false,type:"boolean",title:"rotated"},stackedType:{description:'Specifies how the lines should be placed when multiple line series are rendered in the same chart, say when "split by" operation is executed on any field or\nwhen multiple attributes/fields corresponding to the same set of classes are to be visualized.',default:"sideBySide",enum:["sideBySide","stacked","stacked100"],type:"string",title:"stackedType"},stackNegativeValuesToBaseline:{description:"Specifies how negative values are treated in stacked series.\nIf true, negative values will be stacked on the base line.\nIf false, negative values will be stacked in relation to their previous values in the stack.",default:true,type:"boolean",title:"stackNegativeValuesToBaseline"},binTemporalData:{description:"Whether to use the time properties to bin the temporal data.\nIf set to `false` the `timeIntervalSize` and `timeIntervalUnits` properties can be used to set the date axis base interval.",default:": true",type:"boolean",title:"binTemporalData"},timeIntervalUnits:{description:"The time unit that corresponds to the `timeIntervalSize`. Valid options include seconds, minutes, hours, days, weeks, months, and years.",enum:["esriTimeUnitsDays","esriTimeUnitsHours","esriTimeUnitsMinutes","esriTimeUnitsMonths","esriTimeUnitsSeconds","esriTimeUnitsWeeks","esriTimeUnitsYears"],type:"string",title:"timeIntervalUnits"},timeIntervalSize:{description:"The span of time that will be binned or aggregated together. This property must be used in conjunction with `timeIntervalUnits`.",minimum:0,type:"number",title:"timeIntervalSize"},timeAggregationType:{description:"The time interval alignment type. Valid options include `equalIntervalsFromStartTime` and `equalIntervalsFromEndTime`.",default:"equalIntervalsFromStartTime",enum:["equalIntervalsFromEndTime","equalIntervalsFromStartTime"],type:"string",title:"timeAggregationType"},trimIncompleteTimeInterval:{description:"Determines whether incomplete time intervals at the start or end of the data span (depending on the `timeAggregationType`) will be removed from the chart.\nIncomplete intervals on a chart can cause misleading results in which the period in question is under- or overreported due to a different amount of time in the interval.\nSetting `true` indicates to trim these incomplete intervals. Setting `false` does not trim incomplete intervals.",default:true,type:"boolean",title:"trimIncompleteTimeInterval"},nullPolicy:{description:"How summarized bins returning a null value are displayed. Supported options are `null`, `zero`, and `interpolate`.",default:"null",enum:["interpolate","null","zero"],type:"string",title:"nullPolicy"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","lineSymbol","name","type","x","y"]},WebChartBoxPlotSeries:{description:"JSON representation of the Box plot series",title:"WebChartBoxPlotSeries",type:"object",properties:{type:{type:"string",enum:["boxPlotSeries"],title:"type"},y:{description:"Specifies the numeric field(s) used by the box plot series.",anyOf:[{type:"array",items:{type:"string"}},{type:"string"}],title:"y"},rotated:{description:"Whether to rotate the chart",type:"boolean",title:"rotated"},fillSymbol:{description:"Contains styling info on how the box and whiskers should be rendered. The whiskers use the fillSymbol.outline.",$ref:"#/definitions/ISimpleFillSymbol",title:"fillSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","id","name","type","x","y"]},WebChartProbabilityPlotSeries:{description:"JSON representation of the Probability plot series",title:"WebChartProbabilityPlotSeries",type:"object",properties:{type:{type:"string",enum:["probabilityPlotSeries"],title:"type"},y:{type:"string",title:"y"},probabilityPlotType:{$ref:"#/definitions/WebChartProbabilityPlotKinds",title:"probabilityPlotType"},dataTransformationType:{$ref:"#/definitions/WebChartDataTransformations",title:"dataTransformationType"},showReferenceLine:{type:"boolean",title:"showReferenceLine"},standardizeValues:{type:"boolean",title:"standardizeValues"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},referenceLineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"referenceLineSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","dataTransformationType","id","markerSymbol","name","probabilityPlotType","referenceLineSymbol","showReferenceLine","standardizeValues","type","x","y"]},WebChartProfileGraphSeries:{description:"JSON representation of the Profile graph series",title:"WebChartProfileGraphSeries",type:"object",properties:{type:{type:"string",enum:["profileGraphSeries"],title:"type"},y:{type:"string",title:"y"},horizontalUnits:{type:"string",title:"horizontalUnits"},verticalUnits:{type:"string",title:"verticalUnits"},lineSymbol:{$ref:"#/definitions/ISimpleLineSymbol",title:"lineSymbol"},markerSymbol:{$ref:"#/definitions/ISimpleMarkerSymbol",title:"markerSymbol"},id:{description:"A unique string used to differentiate the series on a chart.",type:"string",title:"id"},visible:{description:"Hides or shows the series. If the series is has **visible** set to `false`, the corresponding legend is grayed out in the legend box.",default:true,type:"boolean",title:"visible"},dataTooltipVisible:{description:"Hides or shows data tooltips.\nApplies to all charts but Gauge.",default:true,type:"boolean",title:"dataTooltipVisible"},dataTooltipReverseColor:{description:"Indicates whether to apply the hovered element's color to the background (false) or the outline (true).\nApplies to all charts but Gauge.",default:false,type:"boolean",title:"dataTooltipReverseColor"},dataTooltipValueFormat:{description:"Defines how to render numeric values in tooltips.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipValueFormat"},dataTooltipPercentFormat:{description:"Defines how to render percent values in tooltips.\nCurrently used for stacked 100% bar and line charts, as well as pie charts.",$ref:"#/definitions/NumberFormatOptions",title:"dataTooltipPercentFormat"},dataTooltipDateFormat:{description:"Defines how to render dates in tooltips.\nCurrently used for bar and line charts using a date x-axis with no time binning.",$ref:"#/definitions/DateTimeFormatOptions",title:"dataTooltipDateFormat"},name:{description:"Specifies the name of the series. It would be reflected in the chart [legends](#legend)",type:"string",title:"name"},query:{description:"Subset of the WebChartQuery, use the series level",$ref:"#/definitions/WebChartSeriesQuery",title:"query"},x:{description:"Specifies which field represents the x-coordinates of this series. Empty string or one with just white spaces is not allowed. At least 1 or more word characters (a-z, A-Z, _) are needed.",minLength:1,type:"string",title:"x"},colorType:{$ref:"#/definitions/WebChartColoringPatterns",description:"Specifies whether the layer's renderer should be used for coloring the points/lines/columns etc.",title:"colorType"},dataLabels:{description:"Specifies how the data labels should be rendered.",$ref:"#/definitions/WebChartText",title:"dataLabels"}},required:["colorType","horizontalUnits","id","lineSymbol","markerSymbol","name","type","verticalUnits","x","y"]},WebChartSeriesType:{description:"Type containing all the series types available",title:"WebChartSeriesType",anyOf:[{$ref:"#/definitions/WebChartBarChartSeries"},{$ref:"#/definitions/WebChartHistogramSeries"},{$ref:"#/definitions/WebChartScatterPlotSeries"},{$ref:"#/definitions/WebChartPieChartSeries"},{$ref:"#/definitions/WebChartGaugeSeries"},{$ref:"#/definitions/WebChartLineChartSeries"},{$ref:"#/definitions/WebChartBoxPlotSeries"},{$ref:"#/definitions/WebChartProbabilityPlotSeries"},{$ref:"#/definitions/WebChartProfileGraphSeries"}]},WebMapWebChart:{description:"Gives a JSON representation of the Chart object without the dataSource Object. Used in the Webmap Viewer workflows.",type:"object",properties:{version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["series","type","version"],title:"WebMapWebChart"},WebMapWebGaugeChart:{description:"JSON representation of Gauge",type:"object",properties:{innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["axes","series","type","version"],title:"WebMapWebGaugeChart"},WebMapWebBoxPlot:{description:"JSON representation of Gauge",type:"object",properties:{showOutliers:{description:"Whether to show the outliers on the chart",type:"boolean",title:"showOutliers"},standardizeValues:{description:"Whether to standardize the values by calculating the series z-score",type:"boolean",title:"standardizeValues"},series:{description:"The box plot series",type:"array",items:{$ref:"#/definitions/WebChartBoxPlotSeries"},title:"series"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["series","type","version"],title:"WebMapWebBoxPlot"},WebChart:{description:"Gives a JSON representation of the Chart object. Used by ArcGIS Charts packages.",type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["dataSource","series","type","version"],title:"WebChart"},WebGaugeChart:{type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the data source. Can be Layer or vanilla POJOs.",title:"dataSource"},innerRadius:{description:"Represents the size of the hole in middle of the chart. The number is used as a percentage rather than a fixed value.",default:50,type:["null","number"],title:"innerRadius"},startAngle:{description:"Represents where is the chart's starting point",default:-180,type:["null","number"],title:"startAngle"},endAngle:{description:"Represents where is the chart's ending point. To be related with startAngle. If endAngle-startAngle is 360 the chart will render as full circle.",default:180,type:["null","number"],title:"endAngle"},axes:{description:"Array of one WebChartGaugeAxis",type:"array",items:[{$ref:"#/definitions/WebChartGaugeAxis"}],minItems:1,maxItems:1,title:"axes"},subType:{description:"The type of Gauge, like FeatureGauge and StatisticGauge.\n\nWhen this property is not specified, it will be defaulted to `GaugeChartSubTypes.StatisticGauge`.",enum:["featureGauge","statisticGauge"],type:"string",title:"subType"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},series:{description:"Represents an array of various chart series to be plot inside the chart.\nEmpty array is not allowed.",minItems:1,type:"array",items:{$ref:"#/definitions/WebChartSeriesType"},title:"series"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["axes","dataSource","series","type","version"],title:"WebGaugeChart"},WebBoxPlot:{type:"object",properties:{dataSource:{$ref:"#/definitions/WebChartDataSources",description:"Property representing the datasource. Can be Feature layer or vanilla POJOs.",title:"dataSource"},showOutliers:{description:"Whether to show the outliers on the chart",type:"boolean",title:"showOutliers"},standardizeValues:{description:"Whether to standardize the values by calculating the series z-score",type:"boolean",title:"standardizeValues"},series:{description:"The box plot series",type:"array",items:{$ref:"#/definitions/WebChartBoxPlotSeries"},title:"series"},version:{description:"Version of the specification. Used to identify when a saved config was created.",type:"string",enum:["7.4.1"],title:"version"},type:{description:"Represents a unique string identifier for the Chart object. For Chart object, it is **chart**.",type:"string",enum:["chart"],title:"type"},id:{description:"Can be used to uniquely identify a chart. The consumer app can choose whether to use it or not.",type:"string",title:"id"},dataFilters:{description:"JSON representation of filters applied to the data",$ref:"#/definitions/WebChartDataFilters",title:"dataFilters"},title:{description:"Specifies heading/title of the chart.",$ref:"#/definitions/WebChartText",title:"title"},subTitle:{description:"Specifies sub-heading/subtitle of the chart.",$ref:"#/definitions/WebChartText",title:"subTitle"},footer:{description:"Specifies footer of the chart",$ref:"#/definitions/WebChartText",title:"footer"},background:{description:"Specifies the background color of the chart.",default:[255,255,255,255],type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"background"},theme:{description:"A unique string that specifies the styling theme currently applied to the chart. This property needs to finalized and not in active use currently.",type:"string",title:"theme"},cursorCrosshair:{description:"Specifies cursor's crosshair information for the chart. Only for XY charts.",$ref:"#/definitions/WebChartCursorCrosshair",title:"cursorCrosshair"},legend:{description:"Specifies the Legend information for the chart.",anyOf:[{$ref:"#/definitions/WebChartLegend"},{$ref:"#/definitions/WebChartPieChartLegend"}],title:"legend"},axes:{description:"Represents an array of **at least 1 or at most 2** Chart Axes accompanying the chart. The axes property is optional because Pie chart does not use any axis.",type:"array",items:[{$ref:"#/definitions/WebChartAxis"},{$ref:"#/definitions/WebChartAxis"}],minItems:1,maxItems:2,title:"axes"},horizontalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the horizontal axis can\'t display them all.\nThe available options are: "none", "rotate", "stagger" and "wrap".\nFor XY Chart only. Histogram can handle "none" and "rotate" only.\nThe default value for the horizontal axis is "rotate".',default:"rotate",enum:["none","rotate","stagger","wrap"],type:"string",title:"horizontalAxisLabelsBehavior"},verticalAxisLabelsBehavior:{description:'Represents the way the labels should behave when the vertical axis can\'t display them all. For XY Chart only.\nThe available options are: "none" and "wrap".\nThe default value for the vertical axis is "wrap".',default:"wrap",enum:["none","rotate","stagger","wrap"],type:"string",title:"verticalAxisLabelsBehavior"},rotated:{description:"Specifies whether or not the chart is rotated. Applied to Bar, Line, and Combo Bar and Line charts.",default:false,type:"boolean",title:"rotated"},sortLabelsBy:{description:"Specifies the label value type to be used for sorting the data items (for Bar, Line and Pie charts at the moment).\nIt is either LabelValueTypes.OriginalValue or LabelValueTypes.ModifiedValue.\n\nThis property will only be considered when there is an `orderByFields` defined in the series[0].query object.",default:"LabelValueTypes.ModifiedValue",enum:["modifiedValue","originalValue"],type:"string",title:"sortLabelsBy"},chartRenderer:{description:"Renderer to use to style the series when the chart uses the color match mode.\nConsidered before the layer's renderer.",title:"chartRenderer"}},required:["dataSource","series","type","version"],title:"WebBoxPlot"},OverlayTerms:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"OverlayTerms"},CalculatedMinMaxBoundsPayload:{type:"object",properties:{isXAxis:{type:"boolean",title:"isXAxis"},minimum:{type:["null","number"],title:"minimum"},maximum:{type:["null","number"],title:"maximum"}},required:["isXAxis"],title:"CalculatedMinMaxBoundsPayload"},ChartDeletePayload:{type:"object",properties:{chartId:{type:"string",title:"chartId"}},required:["chartId"],title:"ChartDeletePayload"},LegendItemVisibility:{type:"object",properties:{visible:{type:"boolean",title:"visible"},seriesId:{type:"string",title:"seriesId"},overlayType:{enum:["Mean","Median","Normal Distribution","Standard Deviation","Trendline"],type:"string",title:"overlayType"},sliceId:{type:"string",title:"sliceId"},sliceData:{description:"JSON representation of a typical data item",$ref:"#/definitions/WebChartDataItem",title:"sliceData"}},required:["visible"],title:"LegendItemVisibility"},ISymbol:{title:"ISymbol",type:"object",properties:{type:{$ref:"#/definitions/SymbolType",title:"type"},style:{type:"string",title:"style"}},required:["type"]},SymbolType:{title:"SymbolType",enum:["esriPFS","esriPMS","esriSFS","esriSLS","esriSMS","esriTS"],type:"string"},ISimpleLineSymbol:{title:"ISimpleLineSymbol",type:"object",properties:{type:{type:"string",enum:["esriSLS"],title:"type"},style:{enum:["esriSLSDash","esriSLSDashDot","esriSLSDashDotDot","esriSLSDot","esriSLSNull","esriSLSSolid"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},width:{type:"number",title:"width"}},required:["type"]},IExtent:{description:'Extents are used to define rectangles and bounding boxes.\n\n`IExtent` can also be imported from the following packages:\n\n```js\nimport { IExtent } from "@esri/arcgis-rest-geocoding";\nimport { IExtent } from "@esri/arcgis-rest-service-admin";\nimport { IExtent } from "@esri/arcgis-rest-feature-layer";\n```',title:"IExtent",type:"object",properties:{xmin:{type:"number",title:"xmin"},ymin:{type:"number",title:"ymin"},zmin:{type:"number",title:"zmin"},xmax:{type:"number",title:"xmax"},ymax:{type:"number",title:"ymax"},zmax:{type:"number",title:"zmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISpatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',title:"ISpatialReference",type:"object",properties:{wkid:{type:"number",title:"wkid"},latestWkid:{type:"number",title:"latestWkid"},vcsWkid:{type:"number",title:"vcsWkid"},latestVcsWkid:{type:"number",title:"latestVcsWkid"},wkt:{type:"string",title:"wkt"},latestWkt:{type:"string",title:"latestWkt"}}},IFeatureLayer:{description:"Feature layers can be created by referencing a layer from either a map service or a feature service or by specifying a feature collection object.\nUse a map service if you just want to retrieve geometries and attributes from the server and symbolize them yourself. Use a feature service if\nyou want to take advantage of symbols from the service's source map document. Also, use a feature service if you plan on doing editing with the\nfeature layer. Feature layers honor any feature templates configured in the source map document. Feature collection objects are used to create\na feature layer based on the supplied definition.",title:"IFeatureLayer",type:"object",properties:{capabilities:{description:"A comma-separated string listing which editing operations are allowed on an editable feature service.",type:"string",title:"capabilities"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},disablePopup:{description:"Indicates whether to allow a client to ignore popups defined by the service item.",enum:[true],type:"boolean",title:"disablePopup"},featureCollection:{description:"A featureCollection object defining a layer of features whose geometry and attributes are either stored directly within the web map or with an item. Feature Collections can be created from CSVs, shapefiles, GPX, or map notes.",title:"featureCollection"},featureCollectionType:{description:"Indicates the type of features in the feature collection. If featureCollectionType is missing, it means the feature collection is a regular single-layer or multi-layer feature collection.",enum:["markup","notes","route"],type:"string",title:"featureCollectionType"},layerDefinition:{description:"A layerDefinition object defining the attribute schema and drawing information for the layer.",$ref:"#/definitions/ILayerDefinition",title:"layerDefinition"},layerType:{description:"String indicating the layer type.",type:"string",enum:["ArcGISFeatureLayer"],title:"layerType"},mode:{description:"0 is snapshot mode. 1 is on-demand mode. 2 is selection-only mode. Used with ArcGIS feature services and individual layers in ArcGIS map services.",enum:[0,1,2],type:"number",title:"mode"},popupInfo:{description:"A popupInfo object defining the content of popup windows when you click or query a feature.",$ref:"#/definitions/IPopupInfo",title:"popupInfo"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled.",type:"number",title:"refreshInterval"},showLabels:{description:"Labels will display if this property is set to true and the layer also has a labelingInfo property associated with it. This property can get stored in the web map config and in the item/data.",enum:[true],type:"boolean",title:"showLabels"},visibleLayers:{description:"An array of sublayer ids that should appear visible. Used with feature layers that are based on feature collections.",type:"array",items:{type:"number"},title:"visibleLayers"},id:{description:"A unique identifying string for the layer.",title:"id"},name:{description:"Layer name",type:"string",title:"name"},itemId:{description:"Optional string containing the item ID of the service if it's registered on ArcGIS Online or your organization's portal.",type:"string",title:"itemId"},maxScale:{description:"Integer property used to determine the maximum scale at which the layer is displayed.",type:"number",title:"maxScale"},minScale:{description:"Integer property used to determine the minimum scale at which the layer is displayed.",type:"number",title:"minScale"},opacity:{description:"The degree of transparency applied to the layer on the client side, where 0 is full transparency and 1 is no transparency.",type:"number",title:"opacity"},showLegend:{description:"Boolean property indicating whether to display in the legend.",type:"boolean",title:"showLegend"},title:{description:"A user-friendly string title for the layer that can be used in a table of contents.",type:"string",title:"title"},type:{description:"Deprecated, use layerType instead.",type:"string",title:"type"},visibility:{description:"Boolean property determining whether the layer is initially visible in the web map.",type:"boolean",title:"visibility"},url:{description:"The URL to the layer. Not applicable to all layer types.",type:"string",title:"url"},timeAnimation:{description:"This property is applicable to layers that support time. If 'true', timeAnimation is enabled.",type:"boolean",title:"timeAnimation"}},required:["id","layerType"]},IDefinitionEditor:{description:"The definitionEditor stores interactive filters at the same level as layerDefinition.",title:"IDefinitionEditor",type:"object",properties:{inputs:{description:"An array of input objects.",type:"array",items:{$ref:"#/definitions/IDefinitionInput"},title:"inputs"},parameterizedExpression:{description:"A string value representing the where clause for the interactive filter.",type:"string",title:"parameterizedExpression"}}},IDefinitionInput:{title:"IDefinitionInput",type:"object",properties:{hint:{description:"A string value representing a hint for the input.",type:"string",title:"hint"},parameters:{description:"An array of parameter objects.",type:"array",items:{$ref:"#/definitions/IDefinitionParameter"},title:"parameters"},prompt:{description:"A string value representing the prompt for the input.",type:"string",title:"prompt"}}},IDefinitionParameter:{title:"IDefinitionParameter",type:"object",properties:{defaultValue:{description:"The default value that is automatically given if nothing is provided.",type:["string","number"],title:"defaultValue"},fieldName:{description:"A string value representing the name of the field to query.",type:"string",title:"fieldName"},parameterId:{description:"Number given to uniquely identify the specified parameter.",title:"parameterId"},type:{description:"The field type for the specified field parameter.",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string",title:"type"},utcValue:{description:"An integer value representing exact UNIX time used when defaultValue is a date string.",type:"number",title:"utcValue"}}},ILayerDefinition:{description:'`ILayerDefinition` can also be imported from the following packages:\n\n```js\nimport { ILayerDefinition } from "@esri/arcgis-rest-service-admin";\nimport { ILayerDefinition } from "@esri/arcgis-rest-feature-layer";\n```',title:"ILayerDefinition",type:"object",properties:{allowGeometryUpdates:{description:"Boolean value indicating whether the geometry of the features in the layer can be edited.",type:"boolean",title:"allowGeometryUpdates"},capabilities:{description:"A comma separated list of supported capabilities, e.g. Query,Editing.",type:"string",title:"capabilities"},copyrightText:{description:"String value for the copyright text information for the layer.",type:"string",title:"copyrightText"},currentVersion:{description:"Numeric value indicating the server version of the layer.",type:"number",title:"currentVersion"},defaultVisibility:{description:"Boolean value indicating whether the layer's visibility is turned on.",type:"boolean",title:"defaultVisibility"},definitionEditor:{description:"Stores interactive filters.",$ref:"#/definitions/IDefinitionEditor",title:"definitionEditor"},definitionExpression:{description:"SQL-based definition expression string that narrows the data to be displayed in the layer.",type:"string",title:"definitionExpression"},description:{description:"String value of the layer as defined in the map service.",type:"string",title:"description"},displayField:{description:"A string value that summarizes the feature.",type:"string",title:"displayField"},drawingInfo:{description:"Contains drawing, labeling, and transparency information.",title:"drawingInfo"},extent:{description:"An object defining the rectangular area.",anyOf:[{$ref:"#/definitions/IExtent"},{type:"null"}],title:"extent"},editingInfo:{description:"An object defining the editing info (last edit date).",$ref:"#/definitions/IEditingInfo",title:"editingInfo"},featureReduction:{description:"Feature reductions declutter the screen by hiding features that would otherwise intersect with other features on screen.",title:"featureReduction"},fields:{description:"An array of field objects containing information about the attribute fields for the feature collection or layer.",type:"array",items:{$ref:"#/definitions/IField"},title:"fields"},geometryType:{description:"A string defining the type of geometry. Possible geometry types are: esriGeometryPoint, esriGeometryMultipoint, esriGeometryPolyline, esriGeometryPolygon, and esriGeometryEnvelope.",enum:["esriGeometryEnvelope","esriGeometryMultipoint","esriGeometryPoint","esriGeometryPolygon","esriGeometryPolyline"],type:"string",title:"geometryType"},globalIdField:{description:"The unique identifier for a feature or table row within a geodatabase.",type:"string",title:"globalIdField"},hasAttachments:{description:"Indicates whether attachments should be loaded for the layer.",type:"boolean",title:"hasAttachments"},hasStaticData:{description:"Boolean value indicating whether data changes. True if it does not.",type:"boolean",title:"hasStaticData"},htmlPopupType:{description:"String value indicating the HTML popup type.",enum:["esriServerHTMLPopupTypeAsHTMLText","esriServerHTMLPopupTypeAsURL","esriServerHTMLPopupTypeNone"],type:"string",title:"htmlPopupType"},id:{description:"The identifier assigned to the layer.",type:"number",title:"id"},isDataVersioned:{description:"Boolean value indicating whether the data is versioned.",type:"boolean",title:"isDataVersioned"},maxRecordCount:{description:"Numeric value indicating tbe maximum number of records that will be returned at once for a query.",type:"number",title:"maxRecordCount"},maxScale:{description:"Represents the maximum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"maxScale"},minScale:{description:"Represents the minimum scale at which the layer definition will be applied. This does not apply to layers of type: ArcGISMapServiceLayer, ImageServiceVectorLayer or ImageServiceLayer.",type:"number",title:"minScale"},name:{description:"Contains a unique name for the layer that can be displayed in a legend.",type:"string",title:"name"},objectIdField:{description:"Indicates the name of the object ID field in the dataset.",type:"string",title:"objectIdField"},overrideSymbols:{description:"Dictates whether a client can support having an end user modify symbols on individual features.",type:"boolean",title:"overrideSymbols"},rangeInfos:{description:"Indicates range information",title:"rangeInfos"},source:{description:"An object indicating the layerDefinition's layer source.",title:"source"},spatialReference:{description:"An object containing the WKID or WKT identifying the spatial reference of the layer's geometry.",$ref:"#/definitions/ISpatialReference",title:"spatialReference"},supportedQueryFormats:{description:"String value indicating the output formats that are supported in a query.",type:"string",title:"supportedQueryFormats"},supportsAdvancedQueries:{description:"Boolean value indicating whether the layer supports orderByFields in a query operation.",type:"boolean",title:"supportsAdvancedQueries"},supportsAttachmentsByUploadId:{description:"Boolean value indicating whether the layer supports uploading attachments with the Uploads operation. This can then be used in the Add Attachment and Update Attachment operations.",type:"boolean",title:"supportsAttachmentsByUploadId"},supportsCalculate:{description:"Boolean value indicating whether the layer supports the Calculate REST operation when updating features.",type:"boolean",title:"supportsCalculate"},supportsRollbackOnFailureParameter:{description:"Boolean value indicating whether the layer supports rolling back edits made on a feature layer if some of the edits fail.",type:"boolean",title:"supportsRollbackOnFailureParameter"},supportsStatistics:{description:"Boolean value indicating whether feature layer query operations support statistical functions.",type:"boolean",title:"supportsStatistics"},supportsValidateSql:{description:"Boolean value indicating whether the validateSQL operation is supported across a feature service layer.",type:"boolean",title:"supportsValidateSql"},templates:{description:"A property of the layer definition when there are no types defined; otherwise, templates are defined as properties of the types.",type:"array",items:{$ref:"#/definitions/ITemplate"},title:"templates"},timeInfo:{description:"The time info metadata of the layer. May be set for feature layers inside a feature collection item.",title:"timeInfo"},type:{description:"Indicates whether the layerDefinition applies to a Feature Layer or a Table.",enum:["Feature Layer","Table"],type:"string",title:"type"},typeIdField:{description:"Contains the name of the field holding the type ID for the features.",type:"string",title:"typeIdField"},types:{description:"Contains information about an attribute field.",title:"types"},visibilityField:{description:"String value indicating the attribute field that is used to control the visibility of a feature.\nIf applicable, when rendering a feature the client should use this field to control visibility.\nThe field's values are 0 = do not display, 1 = display.",type:"string",title:"visibilityField"},relationships:{type:"array",items:{},title:"relationships"},editFieldsInfo:{type:"object",properties:{creationDateField:{type:"string",title:"creationDateField"},creatorField:{type:"string",title:"creatorField"},editDateField:{type:"string",title:"editDateField"},editorField:{type:"string",title:"editorField"}},title:"editFieldsInfo"},parentLayerId:{type:"number",title:"parentLayerId"},ownershipBasedAccessControlForFeatures:{type:"boolean",title:"ownershipBasedAccessControlForFeatures"},syncCanReturnChanges:{type:"boolean",title:"syncCanReturnChanges"},archivingInfo:{type:"object",properties:{supportsQueryWithHistoricMoment:{type:"boolean",title:"supportsQueryWithHistoricMoment"},startArchivingMoment:{type:"number",title:"startArchivingMoment"}},title:"archivingInfo"},supportsValidateSQL:{type:"boolean",title:"supportsValidateSQL"},advancedQueryCapabilities:{type:"object",properties:{supportsPagination:{type:"boolean",title:"supportsPagination"},supportsTrueCurve:{type:"boolean",title:"supportsTrueCurve"},supportsQueryWithDistance:{type:"boolean",title:"supportsQueryWithDistance"},supportsReturningQueryExtent:{type:"boolean",title:"supportsReturningQueryExtent"},supportsStatistics:{type:"boolean",title:"supportsStatistics"},supportsOrderBy:{type:"boolean",title:"supportsOrderBy"},supportsDistinct:{type:"boolean",title:"supportsDistinct"},supportsSqlExpression:{type:"boolean",title:"supportsSqlExpression"},supportsPercentileStatistics:{type:"boolean",title:"supportsPercentileStatistics"}},title:"advancedQueryCapabilities"},allowTrueCurvesUpdates:{type:"boolean",title:"allowTrueCurvesUpdates"},onlyAllowTrueCurveUpdatesByTrueCurveClients:{type:"boolean",title:"onlyAllowTrueCurveUpdatesByTrueCurveClients"},supportsApplyEditsWithGlobalIds:{type:"boolean",title:"supportsApplyEditsWithGlobalIds"},subtypeField:{type:"string",title:"subtypeField"},indexes:{type:"array",items:{},title:"indexes"},dateFieldsTimeReference:{type:"object",properties:{timeZone:{type:"string",title:"timeZone"},respectsDaylightSaving:{type:"boolean",title:"respectsDaylightSaving"}},title:"dateFieldsTimeReference"},useStandardizedQueries:{type:"boolean",title:"useStandardizedQueries"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"}}},IEditingInfo:{title:"IEditingInfo",type:"object",properties:{lastEditDate:{description:"date of last edit to the layer",type:"number",title:"lastEditDate"}}},IField:{description:'Contains information about an attribute field.\n\n`IField` can also be imported from the following packages:\n\n```js\nimport { IField } from "@esri/arcgis-rest-feature-layer";\n```',title:"IField",type:"object",properties:{name:{description:"A string defining the field name.",type:"string",title:"name"},type:{$ref:"#/definitions/FieldType",description:"A string defining the field type.",title:"type"},alias:{description:"A string defining the field alias.",type:"string",title:"alias"},domain:{description:"Information for a field with a domain",type:"object",properties:{type:{$ref:"#/definitions/DomainType",description:"A string defining the domain type.",title:"type"},name:{description:"A string defining the field name.",type:"string",title:"name"},range:{description:"A 2 element array defining the range of possible values.",type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2,title:"range"},codedValues:{description:"An array of CodedValues for domains of type codedValue.",type:"array",items:{description:"CodedValue type",type:"object",properties:{name:{description:"User-friendly name for what the code means.",type:"string",title:"name"},code:{description:"The value stored in the feature attribute.",type:["string","number"],title:"code"}},required:["code","name"]},title:"codedValues"},description:{description:"Description of the domain",type:"string",title:"description"},mergePolicy:{description:"Merge policy",type:"string",title:"mergePolicy"},splitPolicy:{description:"Split Policy",type:"string",title:"splitPolicy"}},required:["type"],title:"domain"},editable:{description:"A Boolean defining whether this field is editable.",type:"boolean",title:"editable"},exactMatch:{description:"A Boolean defining whether or not the field is an exact match.",type:"boolean",title:"exactMatch"},length:{description:"A number defining how many characters are allowed in a string. field.",type:"number",title:"length"},nullable:{description:"A Boolean defining whether this field can have a null value.",type:"boolean",title:"nullable"},defaultValue:{description:"The value written in for new records by default.",title:"defaultValue"}},required:["name","type"]},FieldType:{description:"Field type.",title:"FieldType",enum:["esriFieldTypeBlob","esriFieldTypeDate","esriFieldTypeDouble","esriFieldTypeGUID","esriFieldTypeGeometry","esriFieldTypeGlobalID","esriFieldTypeInteger","esriFieldTypeOID","esriFieldTypeRaster","esriFieldTypeSingle","esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeXML"],type:"string"},DomainType:{description:"Domain types",title:"DomainType",enum:["codedValue","inherited","range"],type:"string"},ITemplate:{description:"Templates describe features that can be created in a layer. They are generally used with feature collections and editable web-based CSV layers.\nTemplates are not used with ArcGIS feature services as these already have templates defined in the service. They are also defined as properties\nof the layer definition when there are no defined types. Otherwise, templates are defined as properties of the types.",title:"ITemplate",type:"object",properties:{description:{description:"A string value containing a detailed description of the template.",title:"description"},drawingTool:{description:"An optional string that can define a client-side drawing tool to be used with this feature. For example, map notes used by the Online Map Viewer use this to represent the viewer's different drawing tools.",enum:["esriFeatureEditToolAutoCompletePolygon","esriFeatureEditToolCircle","esriFeatureEditToolDownArrow","esriFeatureEditToolEllipse","esriFeatureEditToolFreehand","esriFeatureEditToolLeftArrow","esriFeatureEditToolLine","esriFeatureEditToolNone","esriFeatureEditToolPoint","esriFeatureEditToolPolygon","esriFeatureEditToolRectangle","esriFeatureEditToolRightArrow","esriFeatureEditToolText","esriFeatureEditToolTriangle","esriFeatureEditToolUpArrow"],type:"string",title:"drawingTool"},name:{description:"A string containing a user-friendly name for the template.",type:"string",title:"name"},prototype:{description:"A feature object representing a prototypical feature for the template.",$ref:"#/definitions/IFeature",title:"prototype"}}},IFeature:{description:'a spatial entity and its corresponding properties\n\n`IFeature` can also be imported from the following packages:\n\n```js\nimport { IFeature } from "@esri/arcgis-rest-feature-layer";\nimport { IFeature } from "@esri/arcgis-rest-routing";\n```',title:"IFeature",type:"object",properties:{geometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/IGeometry",title:"geometry"},attributes:{type:"object",additionalProperties:{},title:"attributes"},symbol:{$ref:"#/definitions/ISymbol",title:"symbol"}},required:["attributes"]},IGeometry:{description:'a building block for discrete geometries\n\n`IGeometry` can also be imported from the following packages:\n\n```js\nimport { IGeometry } from "@esri/arcgis-rest-feature-layer";\n```',title:"IGeometry",type:"object",properties:{spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}}},IPopupInfo:{description:"Defines the look and feel of popup windows when a user clicks or queries a feature.",title:"IPopupInfo",type:"object",properties:{description:{description:"A string that appears in the body of the popup window as a description. It is also possible to specify the description as HTML-formatted content.",type:["null","string"],title:"description"},expressionInfos:{description:"List of Arcade expressions added to the pop-up.",type:"array",items:{$ref:"#/definitions/IPopupExpressionInfo"},title:"expressionInfos"},fieldInfos:{description:"Array of fieldInfo information properties. This information is provided by the service layer definition. When the description uses name/value pairs, the order of the array is how the fields display in the editable Map Viewer popup and the resulting popup. It is also possible to specify HTML-formatted content.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},layerOptions:{description:"Additional options that can be defined for the popup layer.",type:"object",properties:{showNoDataRecords:{description:"Indicates whether or not the NoData records should be displayed.",type:"boolean",title:"showNoDataRecords"}},required:["showNoDataRecords"],title:"layerOptions"},mediaInfos:{description:"Array of various mediaInfo to display. Can be of type image, piechart, barchart, columnchart, or linechart. The order given is the order in which is displays.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},popupElements:{description:"An array of popupElement objects that represent an ordered list of popup elements.",type:"array",items:{$ref:"#/definitions/IPopupElement"},title:"popupElements"},relatedRecordsInfo:{description:"Indicates whether to enable related records if they exist on a layer.",$ref:"#/definitions/IRelatedRecordsInfo",title:"relatedRecordsInfo"},showAttachments:{description:"Indicates whether attachments will be loaded for feature layers that have attachments.",type:"boolean",title:"showAttachments"},title:{description:"A string that appears at the top of the popup window as a title.",type:"string",title:"title"}}},IPopupExpressionInfo:{description:"Arcade expression added to the pop-up.",title:"IPopupExpressionInfo",type:"object",properties:{expression:{description:"The Arcade expression.",type:"string",title:"expression"},name:{description:"Unique identifier for the expression.",type:"string",title:"name"},returnType:{description:"Return type of the Arcade expression, can be number or string. Defaults to string value. Number values are assumed to be double. This can be determined by the authoring client by executing the expression using a sample feature(s), although it can be corrected by the user. Knowing the returnType allows the authoring client to present fields in relevant contexts. For example, numeric fields in numeric contexts such as charts.",enum:["number","string"],type:"string",title:"returnType"},title:{description:"Title of the expression.",type:"string",title:"title"}}},IFieldInfo:{description:"Defines how a field in the dataset participates (or does not participate) in a popup window.",title:"IFieldInfo",type:"object",properties:{fieldName:{description:"A string containing the field name as defined by the service. Anywhere that a fieldname is referenced as {field-name} in popupInfo, an Arcade expression can also be referenced as{expression/}`.",title:"fieldName"},format:{description:"A format object used with numerical or date fields to provide more detail about how the value should be displayed in a web map popup window.",$ref:"#/definitions/IFieldFormat",title:"format"},isEditable:{description:"A Boolean determining whether users can edit this field. Not applicable to Arcade expressions.",type:"boolean",title:"isEditable"},label:{description:"A string containing the field alias. This can be overridden by the web map author. Not applicable to Arcade expressions as title is used instead.",type:"string",title:"label"},stringFieldOption:{description:"A string determining what type of input box editors see when editing the field. Applies only to string fields. Not applicable to Arcade expressions.",enum:["richtext","textarea","textbox"],type:"string",title:"stringFieldOption"},tooltip:{description:"A string providing an editing hint for editors of the field. Not applicable to Arcade expressions.",type:"string",title:"tooltip"},visible:{description:"A Boolean determining whether the field is visible in the popup window.",type:"boolean",title:"visible"}}},IFieldFormat:{description:"The format object can be used with numerical or date fields to provide more detail about how values should be displayed in popup windows.",title:"IFieldFormat",type:"object",properties:{dateFormat:{description:"A string used with date fields to specify how the date should appear in popup windows.",enum:["dayShortMonthYear","longDate","longMonthDayYear","longMonthYear","shortDate","shortDateLE","shortDateLELongTime","shortDateLELongTime24","shortDateLEShortTime","shortDateLEShortTime24","shortDateLongTime","shortDateLongTime24","shortDateShortTime","shortDateShortTime24","shortMonthYear","year"],type:"string",title:"dateFormat"},digitSeparator:{description:"A Boolean used with numerical fields. A value of true allows the number to have a digit (or thousands) separator when the value appears in popup windows.\nDepending on the locale, this separator is a decimal point or a comma. A value of false means that no separator will be used.",type:"boolean",title:"digitSeparator"},places:{description:"An integer used with numerical fields to specify the number of supported decimal places that should appear in popup windows. Any places beyond this value are rounded.",type:"number",title:"places"}}},IMediaInfo:{description:"Defines an image or a chart to be displayed in a popup window.",title:"IMediaInfo",type:"object",properties:{caption:{description:"A string caption describing the media.",title:"caption"},refreshInterval:{description:"Refresh interval of the layer in minutes. Non-zero value indicates automatic layer refresh at the specified interval. Value of 0 indicates auto refresh is not enabled. If the property does not exist, it's equivalent to having a value of 0. Only applicable when type is set to image.",title:"refreshInterval"},title:{description:"A string title for the media.",type:["null","string"],title:"title"},type:{description:"A string defining the type of media.",enum:["barchart","columnchart","image","linechart","piechart"],type:"string",title:"type"},value:{description:"A value object containing information about how the image should be retrieved or how the chart should be constructed.",anyOf:[{$ref:"#/definitions/IMediaInfoValue"},{type:"null"}],title:"value"}}},IMediaInfoValue:{description:"The value object contains information for popup windows about how images should be retrieved or charts constructed.",title:"IMediaInfoValue",type:"object",properties:{fields:{description:"Used with charts. An array of strings, with each string containing the name of a field to display in the chart.",type:"array",items:{type:"string"},title:"fields"},linkURL:{description:"Used with images. A string containing a URL to be launched in a browser when a user clicks the image.",type:"string",title:"linkURL"},normalizeField:{description:"Used with charts. An optional string containing the name of a field. The values of all fields in the chart will be normalized (divided) by the value of this field.",type:"string",title:"normalizeField"},sourceURL:{description:"Used with images. A string containing the URL to the image.",type:"string",title:"sourceURL"},tooltipField:{description:"String value indicating the tooltip for a chart specified from another field. This field is needed when related records are not sued. It is used for showing tooltips from another field in the same layer or related layer/table.",type:"string",title:"tooltipField"}}},IPopupElement:{description:"Popup elements allow users to author popups, using multiple elements such as tabular views, string description, media (charts and images), and attachments of the attributes\nand control the order in which they appear. Specifically, popupElements do the following:\n1) provide the ability to explicitly add a field/ value table in addition to a description,\n2) allow adding multiple description elements, and\n3) allow a user to author and consume elements of a popup in the order of their choosing.",title:"IPopupElement",type:"object",properties:{displayType:{description:"This property applies to elements of type attachments. A string value indicating how to display the attachment.\nPossible values are, preview, and list. If list is specified, attachments show as links.",enum:["list","preview"],type:"string",title:"displayType"},fieldInfos:{description:"This property applies to elements of type fields. It is an array of popupInfo.fieldInfo objects representing a field/value pair displayed as a table within the popupElement.\nIf the fieldInfos property is not provided, the popupElement will display whatever is specified directly in the popupInfo.fieldInfos property.",type:"array",items:{$ref:"#/definitions/IFieldInfo"},title:"fieldInfos"},mediaInfos:{description:"This property applies to elements of type media. An array of popupInfo.mediaInfo objects representing an image or chart for display.\nIf no mediaInfos property is provided, the popupElement will display whatever is specified in the popupInfo.mediaInfo property.",type:"array",items:{$ref:"#/definitions/IMediaInfo"},title:"mediaInfos"},text:{description:"This property applies to elements of type text. This is string value indicating the text to be displayed within the popupElement.\nIf no text property is provided, the popupElement will display whatever is specified in the popupInfo.description property.",type:"string",title:"text"},type:{description:"String value indicating which elements to use.",enum:["attachments","fields","media","text"],type:"string",title:"type"}}},IRelatedRecordsInfo:{description:"The sort in the popupInfo for the parent feature. This impacts the sorting order for the returned child records.",title:"IRelatedRecordsInfo",type:"object",properties:{orderByFields:{description:"Array of orderByFields objects indicating the field display order for the related records and whether they should be sorted in ascending 'asc' or descending 'desc' order.",type:"array",items:{$ref:"#/definitions/IOrderByField"},title:"orderByFields"},showRelatedRecords:{description:"Required boolean value indicating whether to display related records. If true, client should let the user navigate to the related records. Defaults to true if the layer participates in a relationship AND the related layer/table has already been added to the map (either as an operationalLayer or as a table).",type:"boolean",title:"showRelatedRecords"}},required:["showRelatedRecords"]},IOrderByField:{description:"Object indicating the field display order for the related records and whether they should be sorted in ascending or descending order.",title:"IOrderByField",type:"object",properties:{field:{description:"The attribute value of the field selected that will drive the sorting of related records.",type:"string",title:"field"},order:{description:"Set the ascending or descending sort order of the returned related records.",enum:["asc","desc"],type:"string",title:"order"}}},'Omit<ITextSymbol,"xoffset"|"yoffset">':{title:'Omit<ITextSymbol,"xoffset"|"yoffset">',type:"object",properties:{type:{type:"string",enum:["esriTS"],title:"type"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},backgroundColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"backgroundColor"},borderLineSize:{type:"number",title:"borderLineSize"},borderLineColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"borderLineColor"},haloSize:{type:"number",title:"haloSize"},haloColor:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"haloColor"},verticalAlignment:{enum:["baseline","bottom","middle","top"],type:"string",title:"verticalAlignment"},horizontalAlignment:{enum:["center","justify","left","right"],type:"string",title:"horizontalAlignment"},rightToLeft:{type:"boolean",title:"rightToLeft"},kerning:{type:"boolean",title:"kerning"},font:{$ref:"#/definitions/IFont",title:"font"},text:{type:"string",title:"text"},angle:{type:"number",title:"angle"},style:{type:"string",title:"style"}},required:["type"]},IFont:{title:"IFont",type:"object",properties:{family:{type:"string",title:"family"},size:{type:"number",title:"size"},style:{enum:["italic","normal","oblique"],type:"string",title:"style"},weight:{enum:["bold","bolder","lighter","normal"],type:"string",title:"weight"},decoration:{enum:["line-through","none","underline"],type:"string",title:"decoration"}}},"Intl.NumberFormatOptions":{title:"Intl.NumberFormatOptions",type:"object",properties:{localeMatcher:{type:"string",title:"localeMatcher"},style:{type:"string",title:"style"},currency:{type:"string",title:"currency"},currencySign:{type:"string",title:"currencySign"},useGrouping:{type:"boolean",title:"useGrouping"},minimumIntegerDigits:{type:"number",title:"minimumIntegerDigits"},minimumFractionDigits:{type:"number",title:"minimumFractionDigits"},maximumFractionDigits:{type:"number",title:"maximumFractionDigits"},minimumSignificantDigits:{type:"number",title:"minimumSignificantDigits"},maximumSignificantDigits:{type:"number",title:"maximumSignificantDigits"},compactDisplay:{enum:["long","short"],type:"string",title:"compactDisplay"},notation:{enum:["compact","engineering","scientific","standard"],type:"string",title:"notation"},signDisplay:{enum:["always","auto","exceptZero","never"],type:"string",title:"signDisplay"},unit:{type:"string",title:"unit"},unitDisplay:{enum:["long","narrow","short"],type:"string",title:"unitDisplay"},currencyDisplay:{type:"string",title:"currencyDisplay"}}},"Intl.DateTimeFormatOptions":{title:"Intl.DateTimeFormatOptions",type:"object",properties:{localeMatcher:{enum:["best fit","lookup"],type:"string",title:"localeMatcher"},weekday:{enum:["long","narrow","short"],type:"string",title:"weekday"},era:{enum:["long","narrow","short"],type:"string",title:"era"},year:{enum:["2-digit","numeric"],type:"string",title:"year"},month:{enum:["2-digit","long","narrow","numeric","short"],type:"string",title:"month"},day:{enum:["2-digit","numeric"],type:"string",title:"day"},hour:{enum:["2-digit","numeric"],type:"string",title:"hour"},minute:{enum:["2-digit","numeric"],type:"string",title:"minute"},second:{enum:["2-digit","numeric"],type:"string",title:"second"},timeZoneName:{enum:["long","longGeneric","longOffset","short","shortGeneric","shortOffset"],type:"string",title:"timeZoneName"},formatMatcher:{enum:["basic","best fit"],type:"string",title:"formatMatcher"},hour12:{type:"boolean",title:"hour12"},timeZone:{type:"string",title:"timeZone"},calendar:{type:"string",title:"calendar"},dayPeriod:{enum:["long","narrow","short"],type:"string",title:"dayPeriod"},numberingSystem:{type:"string",title:"numberingSystem"},dateStyle:{enum:["full","long","medium","short"],type:"string",title:"dateStyle"},timeStyle:{enum:["full","long","medium","short"],type:"string",title:"timeStyle"},hourCycle:{enum:["h11","h12","h23","h24"],type:"string",title:"hourCycle"}}},ISimpleFillSymbol:{title:"ISimpleFillSymbol",type:"object",properties:{type:{type:"string",enum:["esriSFS"],title:"type"},style:{enum:["esriSFSBackwardDiagonal","esriSFSCross","esriSFSDiagonalCross","esriSFSForwardDiagonal","esriSFSHorizontal","esriSFSNull","esriSFSSolid","esriSFSVertical"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"}},required:["type"]},DateTimeFormatOptions:{description:"Defines how the DateTime axis data should be formatted.",title:"DateTimeFormatOptions",type:"object",properties:{type:{description:'Represents a unique string identifier for the NumberFormatOptions object. For NumberFormatOptions object, it is "date". It can help us to differentiate date-time axis from other types of axes viz., numeric (value) axis and category axis.',type:"string",enum:["date"],title:"type"},intlOptions:{$ref:"#/definitions/Intl.DateTimeFormatOptions",description:"Represent the JS native [Intl.DateTimeFormatOptions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormatt), which is based on [CLDR](http://cldr.unicode.org/translation/date-time-1/date-time-patterns) specifications.",title:"intlOptions"},formatPerDateTimeUnit:{description:"Represents how to format specific date and time units when displayed on the axis, independently from the `intlOptions`.",$ref:"#/definitions/WebChartDateTimeUnitFormatOptions",title:"formatPerDateTimeUnit"}},required:["intlOptions","type"]},IPoint:{description:'A simple point geometry, with spatial reference defined.\n\n`IPoint` can also be imported from the following packages:\n\n```js\nimport { IPoint } from "@esri/arcgis-rest-routing";\nimport { IPoint } from "@esri/arcgis-rest-geocoding";\n```',title:"IPoint",type:"object",properties:{x:{type:"number",title:"x"},y:{type:"number",title:"y"},z:{type:"number",title:"z"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["x","y"]},IPolyline:{title:"IPolyline",type:"object",properties:{paths:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"paths"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["paths"]},Position:{title:"Position",anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4}]},IPolygon:{title:"IPolygon",type:"object",properties:{rings:{type:"array",items:{type:"array",items:{$ref:"#/definitions/Position"}},title:"rings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["rings"]},IPolygonWithCurves:{title:"IPolygonWithCurves",type:"object",properties:{curveRings:{type:"array",items:{type:"array",items:{anyOf:[{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"}],minItems:3,maxItems:3},{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4},{$ref:"#/definitions/IArc"},{$ref:"#/definitions/IBezierCurve"},{$ref:"#/definitions/ICircularArc"},{$ref:"#/definitions/IOldCircularArc"}]}},title:"curveRings"},hasZ:{type:"boolean",title:"hasZ"},hasM:{type:"boolean",title:"hasM"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["curveRings"]},IArc:{description:"an arc can be represented as a JSON curve object",title:"IArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:7,maxItems:7,title:"a"}},required:["a"]},IBezierCurve:{description:"a bezier curve can be represented as a JSON curve object",title:"IBezierCurve",type:"object",properties:{b:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:3,maxItems:3,title:"b"}},required:["b"]},ICircularArc:{description:"a circular arc can be represented as a JSON curve object",title:"ICircularArc",type:"object",properties:{c:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2}],minItems:2,maxItems:2,title:"c"}},required:["c"]},IOldCircularArc:{title:"IOldCircularArc",type:"object",properties:{a:{type:"array",items:[{$ref:"#/definitions/Position"},{type:"array",items:[{type:"number"},{type:"number"}],minItems:2,maxItems:2},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"a"}},required:["a"]},IEnvelope:{description:"An envelope is a rectangle defined by a range of values for each coordinate and attribute.",title:"IEnvelope",type:"object",properties:{xmin:{type:"number",title:"xmin"},xmax:{type:"number",title:"xmax"},ymin:{type:"number",title:"ymin"},ymax:{type:"number",title:"ymax"},zmin:{type:"number",title:"zmin"},zmax:{type:"number",title:"zmax"},mmin:{type:"number",title:"mmin"},mmax:{type:"number",title:"mmax"},spatialReference:{description:'Spatial reference systems define mathematical transformations and coordinate systems for displaying spatial information in 2D and 3D.\n\n`ISpatialReference` can also be imported from the following packages:\n\n```js\nimport { ISpatialReference } from "@esri/arcgis-rest-geocoding";\nimport { ISpatialReference } from "@esri/arcgis-rest-routing";\nimport { ISpatialReference } from "@esri/arcgis-rest-service-admin";\nimport { ISpatialReference } from "@esri/arcgis-rest-feature-layer";\n```',$ref:"#/definitions/ISpatialReference",title:"spatialReference"}},required:["xmax","xmin","ymax","ymin"]},ISimpleMarkerSymbol:{title:"ISimpleMarkerSymbol",type:"object",properties:{type:{type:"string",enum:["esriSMS"],title:"type"},style:{enum:["esriSMSCircle","esriSMSCross","esriSMSDiamond","esriSMSSquare","esriSMSTriangle","esriSMSX"],type:"string",title:"style"},color:{type:"array",items:[{type:"number"},{type:"number"},{type:"number"},{type:"number"}],minItems:4,maxItems:4,title:"color"},size:{type:"number",title:"size"},outline:{$ref:"#/definitions/ISimpleLineSymbol",title:"outline"},angle:{type:"number",title:"angle"},xoffset:{type:"number",title:"xoffset"},yoffset:{type:"number",title:"yoffset"}},required:["type"]}},$ref:"#/definitions/WebChart"};var uri_all={exports:{}};(function(module,exports){(function(global,factory){factory(exports)})(commonjsGlobal$1,(function(exports){function merge(){for(var _len=arguments.length,sets=Array(_len),_key=0;_key<_len;_key++){sets[_key]=arguments[_key]}if(sets.length>1){sets[0]=sets[0].slice(0,-1);var xl=sets.length-1;for(var x=1;x<xl;++x){sets[x]=sets[x].slice(1,-1)}sets[xl]=sets[xl].slice(1);return sets.join("")}else{return sets[0]}}function subexp(str){return"(?:"+str+")"}function typeOf(o){return o===undefined?"undefined":o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(str){return str.toUpperCase()}function toArray(obj){return obj!==undefined&&obj!==null?obj instanceof Array?obj:typeof obj.length!=="number"||obj.split||obj.setInterval||obj.call?[obj]:Array.prototype.slice.call(obj):[]}function assign(target,source){var obj=target;if(source){for(var key in source){obj[key]=source[key]}}return obj}function buildExps(isIRI){var ALPHA$$="[A-Za-z]",DIGIT$$="[0-9]",HEXDIG$$=merge(DIGIT$$,"[A-Fa-f]"),PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$)),GEN_DELIMS$$="[\\:\\/\\?\\#\\[\\]\\@]",SUB_DELIMS$$="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",RESERVED$$=merge(GEN_DELIMS$$,SUB_DELIMS$$),UCSCHAR$$=isIRI?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",IPRIVATE$$=isIRI?"[\\uE000-\\uF8FF]":"[]",UNRESERVED$$=merge(ALPHA$$,DIGIT$$,"[\\-\\.\\_\\~]",UCSCHAR$$);subexp(ALPHA$$+merge(ALPHA$$,DIGIT$$,"[\\+\\-\\.]")+"*");subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]"))+"*");var DEC_OCTET_RELAXED$=subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+DIGIT$$)+"|"+subexp("1"+DIGIT$$+DIGIT$$)+"|"+subexp("0?[1-9]"+DIGIT$$)+"|0?0?"+DIGIT$$),IPV4ADDRESS$=subexp(DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$+"\\."+DEC_OCTET_RELAXED$),H16$=subexp(HEXDIG$$+"{1,4}"),LS32$=subexp(subexp(H16$+"\\:"+H16$)+"|"+IPV4ADDRESS$),IPV6ADDRESS1$=subexp(subexp(H16$+"\\:")+"{6}"+LS32$),IPV6ADDRESS2$=subexp("\\:\\:"+subexp(H16$+"\\:")+"{5}"+LS32$),IPV6ADDRESS3$=subexp(subexp(H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{4}"+LS32$),IPV6ADDRESS4$=subexp(subexp(subexp(H16$+"\\:")+"{0,1}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{3}"+LS32$),IPV6ADDRESS5$=subexp(subexp(subexp(H16$+"\\:")+"{0,2}"+H16$)+"?\\:\\:"+subexp(H16$+"\\:")+"{2}"+LS32$),IPV6ADDRESS6$=subexp(subexp(subexp(H16$+"\\:")+"{0,3}"+H16$)+"?\\:\\:"+H16$+"\\:"+LS32$),IPV6ADDRESS7$=subexp(subexp(subexp(H16$+"\\:")+"{0,4}"+H16$)+"?\\:\\:"+LS32$),IPV6ADDRESS8$=subexp(subexp(subexp(H16$+"\\:")+"{0,5}"+H16$)+"?\\:\\:"+H16$),IPV6ADDRESS9$=subexp(subexp(subexp(H16$+"\\:")+"{0,6}"+H16$)+"?\\:\\:"),IPV6ADDRESS$=subexp([IPV6ADDRESS1$,IPV6ADDRESS2$,IPV6ADDRESS3$,IPV6ADDRESS4$,IPV6ADDRESS5$,IPV6ADDRESS6$,IPV6ADDRESS7$,IPV6ADDRESS8$,IPV6ADDRESS9$].join("|")),ZONEID$=subexp(subexp(UNRESERVED$$+"|"+PCT_ENCODED$)+"+");subexp("[vV]"+HEXDIG$$+"+\\."+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:]")+"+");subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$))+"*");var PCHAR$=subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@]"));subexp(subexp(PCT_ENCODED$+"|"+merge(UNRESERVED$$,SUB_DELIMS$$,"[\\@]"))+"+");subexp(subexp(PCHAR$+"|"+merge("[\\/\\?]",IPRIVATE$$))+"*");return{NOT_SCHEME:new RegExp(merge("[^]",ALPHA$$,DIGIT$$,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",UNRESERVED$$,SUB_DELIMS$$),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]",IPRIVATE$$),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",UNRESERVED$$,SUB_DELIMS$$,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",UNRESERVED$$,SUB_DELIMS$$),"g"),UNRESERVED:new RegExp(UNRESERVED$$,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",UNRESERVED$$,RESERVED$$),"g"),PCT_ENCODED:new RegExp(PCT_ENCODED$,"g"),IPV4ADDRESS:new RegExp("^("+IPV4ADDRESS$+")$"),IPV6ADDRESS:new RegExp("^\\[?("+IPV6ADDRESS$+")"+subexp(subexp("\\%25|\\%(?!"+HEXDIG$$+"{2})")+"("+ZONEID$+")")+"?\\]?$")}}var URI_PROTOCOL=buildExps(false);var IRI_PROTOCOL=buildExps(true);var slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter="-";var regexPunycode=/^xn--/;var regexNonASCII=/[^\0-\x7E]/;var regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g;var errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"};var baseMinusTMin=base-tMin;var floor=Math.floor;var stringFromCharCode=String.fromCharCode;function error$1(type){throw new RangeError(errors[type])}function map(array,fn){var result=[];var length=array.length;while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){var extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}var ucs2encode=function ucs2encode(array){return String.fromCodePoint.apply(String,toConsumableArray(array))};var basicToDigit=function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base};var digitToBasic=function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)};var adapt=function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))};var decode=function decode(input){var output=[];var inputLength=input.length;var i=0;var n=initialN;var bias=initialBias;var basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(var j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error$1("not-basic")}output.push(input.charCodeAt(j))}for(var index=basic>0?basic+1:0;index<inputLength;){var oldi=i;for(var w=1,k=base;;k+=base){if(index>=inputLength){error$1("invalid-input")}var digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error$1("overflow")}i+=digit*w;var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}var baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error$1("overflow")}w*=baseMinusT}var out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error$1("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return String.fromCodePoint.apply(String,output)};var encode=function encode(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=input[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _currentValue2=_step.value;if(_currentValue2<128){output.push(stringFromCharCode(_currentValue2))}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){var m=maxInt;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=input[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var currentValue=_step2.value;if(currentValue>=n&&currentValue<m){m=currentValue}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error$1("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=input[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _currentValue=_step3.value;if(_currentValue<n&&++delta>maxInt){error$1("overflow")}if(_currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}++delta;++n}return output.join("")};var toUnicode=function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))};var toASCII=function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))};var punycode={version:"2.1.0",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode};var SCHEMES={};function pctEncChar(chr){var c=chr.charCodeAt(0);var e=void 0;if(c<16)e="%0"+c.toString(16).toUpperCase();else if(c<128)e="%"+c.toString(16).toUpperCase();else if(c<2048)e="%"+(c>>6|192).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();else e="%"+(c>>12|224).toString(16).toUpperCase()+"%"+(c>>6&63|128).toString(16).toUpperCase()+"%"+(c&63|128).toString(16).toUpperCase();return e}function pctDecChars(str){var newStr="";var i=0;var il=str.length;while(i<il){var c=parseInt(str.substr(i+1,2),16);if(c<128){newStr+=String.fromCharCode(c);i+=3}else if(c>=194&&c<224){if(il-i>=6){var c2=parseInt(str.substr(i+4,2),16);newStr+=String.fromCharCode((c&31)<<6|c2&63)}else{newStr+=str.substr(i,6)}i+=6}else if(c>=224){if(il-i>=9){var _c=parseInt(str.substr(i+4,2),16);var c3=parseInt(str.substr(i+7,2),16);newStr+=String.fromCharCode((c&15)<<12|(_c&63)<<6|c3&63)}else{newStr+=str.substr(i,9)}i+=9}else{newStr+=str.substr(i,3);i+=3}}return newStr}function _normalizeComponentEncoding(components,protocol){function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(protocol.UNRESERVED)?str:decStr}if(components.scheme)components.scheme=String(components.scheme).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME,"");if(components.userinfo!==undefined)components.userinfo=String(components.userinfo).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_USERINFO,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.host!==undefined)components.host=String(components.host).replace(protocol.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.path!==undefined)components.path=String(components.path).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(components.scheme?protocol.NOT_PATH:protocol.NOT_PATH_NOSCHEME,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.query!==undefined)components.query=String(components.query).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_QUERY,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);if(components.fragment!==undefined)components.fragment=String(components.fragment).replace(protocol.PCT_ENCODED,decodeUnreserved).replace(protocol.NOT_FRAGMENT,pctEncChar).replace(protocol.PCT_ENCODED,toUpperCase);return components}function _stripLeadingZeros(str){return str.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(host,protocol){var matches=host.match(protocol.IPV4ADDRESS)||[];var _matches=slicedToArray(matches,2),address=_matches[1];if(address){return address.split(".").map(_stripLeadingZeros).join(".")}else{return host}}function _normalizeIPv6(host,protocol){var matches=host.match(protocol.IPV6ADDRESS)||[];var _matches2=slicedToArray(matches,3),address=_matches2[1],zone=_matches2[2];if(address){var _address$toLowerCase$=address.toLowerCase().split("::").reverse(),_address$toLowerCase$2=slicedToArray(_address$toLowerCase$,2),last=_address$toLowerCase$2[0],first=_address$toLowerCase$2[1];var firstFields=first?first.split(":").map(_stripLeadingZeros):[];var lastFields=last.split(":").map(_stripLeadingZeros);var isLastFieldIPv4Address=protocol.IPV4ADDRESS.test(lastFields[lastFields.length-1]);var fieldCount=isLastFieldIPv4Address?7:8;var lastFieldsStart=lastFields.length-fieldCount;var fields=Array(fieldCount);for(var x=0;x<fieldCount;++x){fields[x]=firstFields[x]||lastFields[lastFieldsStart+x]||""}if(isLastFieldIPv4Address){fields[fieldCount-1]=_normalizeIPv4(fields[fieldCount-1],protocol)}var allZeroFields=fields.reduce((function(acc,field,index){if(!field||field==="0"){var lastLongest=acc[acc.length-1];if(lastLongest&&lastLongest.index+lastLongest.length===index){lastLongest.length++}else{acc.push({index,length:1})}}return acc}),[]);var longestZeroFields=allZeroFields.sort((function(a,b){return b.length-a.length}))[0];var newHost=void 0;if(longestZeroFields&&longestZeroFields.length>1){var newFirst=fields.slice(0,longestZeroFields.index);var newLast=fields.slice(longestZeroFields.index+longestZeroFields.length);newHost=newFirst.join(":")+"::"+newLast.join(":")}else{newHost=fields.join(":")}if(zone){newHost+="%"+zone}return newHost}else{return host}}var URI_PARSE=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i;var NO_MATCH_IS_UNDEFINED="".match(/(){0}/)[1]===undefined;function parse(uriString){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var components={};var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;if(options.reference==="suffix")uriString=(options.scheme?options.scheme+":":"")+"//"+uriString;var matches=uriString.match(URI_PARSE);if(matches){if(NO_MATCH_IS_UNDEFINED){components.scheme=matches[1];components.userinfo=matches[3];components.host=matches[4];components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=matches[7];components.fragment=matches[8];if(isNaN(components.port)){components.port=matches[5]}}else{components.scheme=matches[1]||undefined;components.userinfo=uriString.indexOf("@")!==-1?matches[3]:undefined;components.host=uriString.indexOf("//")!==-1?matches[4]:undefined;components.port=parseInt(matches[5],10);components.path=matches[6]||"";components.query=uriString.indexOf("?")!==-1?matches[7]:undefined;components.fragment=uriString.indexOf("#")!==-1?matches[8]:undefined;if(isNaN(components.port)){components.port=uriString.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?matches[4]:undefined}}if(components.host){components.host=_normalizeIPv6(_normalizeIPv4(components.host,protocol),protocol)}if(components.scheme===undefined&&components.userinfo===undefined&&components.host===undefined&&components.port===undefined&&!components.path&&components.query===undefined){components.reference="same-document"}else if(components.scheme===undefined){components.reference="relative"}else if(components.fragment===undefined){components.reference="absolute"}else{components.reference="uri"}if(options.reference&&options.reference!=="suffix"&&options.reference!==components.reference){components.error=components.error||"URI is not a "+options.reference+" reference."}var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(!options.unicodeSupport&&(!schemeHandler||!schemeHandler.unicodeSupport)){if(components.host&&(options.domainHost||schemeHandler&&schemeHandler.domainHost)){try{components.host=punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){components.error=components.error||"Host's domain name can not be converted to ASCII via punycode: "+e}}_normalizeComponentEncoding(components,URI_PROTOCOL)}else{_normalizeComponentEncoding(components,protocol)}if(schemeHandler&&schemeHandler.parse){schemeHandler.parse(components,options)}}else{components.error=components.error||"URI can not be parsed."}return components}function _recomposeAuthority(components,options){var protocol=options.iri!==false?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];if(components.userinfo!==undefined){uriTokens.push(components.userinfo);uriTokens.push("@")}if(components.host!==undefined){uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host),protocol),protocol).replace(protocol.IPV6ADDRESS,(function(_,$1,$2){return"["+$1+($2?"%25"+$2:"")+"]"})))}if(typeof components.port==="number"||typeof components.port==="string"){uriTokens.push(":");uriTokens.push(String(components.port))}return uriTokens.length?uriTokens.join(""):undefined}var RDS1=/^\.\.?\//;var RDS2=/^\/\.(\/|$)/;var RDS3=/^\/\.\.(\/|$)/;var RDS5=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(input){var output=[];while(input.length){if(input.match(RDS1)){input=input.replace(RDS1,"")}else if(input.match(RDS2)){input=input.replace(RDS2,"/")}else if(input.match(RDS3)){input=input.replace(RDS3,"/");output.pop()}else if(input==="."||input===".."){input=""}else{var im=input.match(RDS5);if(im){var s=im[0];input=input.slice(s.length);output.push(s)}else{throw new Error("Unexpected dot segment condition")}}}return output.join("")}function serialize(components){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var protocol=options.iri?IRI_PROTOCOL:URI_PROTOCOL;var uriTokens=[];var schemeHandler=SCHEMES[(options.scheme||components.scheme||"").toLowerCase()];if(schemeHandler&&schemeHandler.serialize)schemeHandler.serialize(components,options);if(components.host){if(protocol.IPV6ADDRESS.test(components.host));else if(options.domainHost||schemeHandler&&schemeHandler.domainHost){try{components.host=!options.iri?punycode.toASCII(components.host.replace(protocol.PCT_ENCODED,pctDecChars).toLowerCase()):punycode.toUnicode(components.host)}catch(e){components.error=components.error||"Host's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e}}}_normalizeComponentEncoding(components,protocol);if(options.reference!=="suffix"&&components.scheme){uriTokens.push(components.scheme);uriTokens.push(":")}var authority=_recomposeAuthority(components,options);if(authority!==undefined){if(options.reference!=="suffix"){uriTokens.push("//")}uriTokens.push(authority);if(components.path&&components.path.charAt(0)!=="/"){uriTokens.push("/")}}if(components.path!==undefined){var s=components.path;if(!options.absolutePath&&(!schemeHandler||!schemeHandler.absolutePath)){s=removeDotSegments(s)}if(authority===undefined){s=s.replace(/^\/\//,"/%2F")}uriTokens.push(s)}if(components.query!==undefined){uriTokens.push("?");uriTokens.push(components.query)}if(components.fragment!==undefined){uriTokens.push("#");uriTokens.push(components.fragment)}return uriTokens.join("")}function resolveComponents(base,relative){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var skipNormalization=arguments[3];var target={};if(!skipNormalization){base=parse(serialize(base,options),options);relative=parse(serialize(relative,options),options)}options=options||{};if(!options.tolerant&&relative.scheme){target.scheme=relative.scheme;target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query}else{if(relative.userinfo!==undefined||relative.host!==undefined||relative.port!==undefined){target.userinfo=relative.userinfo;target.host=relative.host;target.port=relative.port;target.path=removeDotSegments(relative.path||"");target.query=relative.query}else{if(!relative.path){target.path=base.path;if(relative.query!==undefined){target.query=relative.query}else{target.query=base.query}}else{if(relative.path.charAt(0)==="/"){target.path=removeDotSegments(relative.path)}else{if((base.userinfo!==undefined||base.host!==undefined||base.port!==undefined)&&!base.path){target.path="/"+relative.path}else if(!base.path){target.path=relative.path}else{target.path=base.path.slice(0,base.path.lastIndexOf("/")+1)+relative.path}target.path=removeDotSegments(target.path)}target.query=relative.query}target.userinfo=base.userinfo;target.host=base.host;target.port=base.port}target.scheme=base.scheme}target.fragment=relative.fragment;return target}function resolve(baseURI,relativeURI,options){var schemelessOptions=assign({scheme:"null"},options);return serialize(resolveComponents(parse(baseURI,schemelessOptions),parse(relativeURI,schemelessOptions),schemelessOptions,true),schemelessOptions)}function normalize(uri,options){if(typeof uri==="string"){uri=serialize(parse(uri,options),options)}else if(typeOf(uri)==="object"){uri=parse(serialize(uri,options),options)}return uri}function equal(uriA,uriB,options){if(typeof uriA==="string"){uriA=serialize(parse(uriA,options),options)}else if(typeOf(uriA)==="object"){uriA=serialize(uriA,options)}if(typeof uriB==="string"){uriB=serialize(parse(uriB,options),options)}else if(typeOf(uriB)==="object"){uriB=serialize(uriB,options)}return uriA===uriB}function escapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.ESCAPE:IRI_PROTOCOL.ESCAPE,pctEncChar)}function unescapeComponent(str,options){return str&&str.toString().replace(!options||!options.iri?URI_PROTOCOL.PCT_ENCODED:IRI_PROTOCOL.PCT_ENCODED,pctDecChars)}var handler={scheme:"http",domainHost:true,parse:function parse(components,options){if(!components.host){components.error=components.error||"HTTP URIs must have a host."}return components},serialize:function serialize(components,options){var secure=String(components.scheme).toLowerCase()==="https";if(components.port===(secure?443:80)||components.port===""){components.port=undefined}if(!components.path){components.path="/"}return components}};var handler$1={scheme:"https",domainHost:handler.domainHost,parse:handler.parse,serialize:handler.serialize};function isSecure(wsComponents){return typeof wsComponents.secure==="boolean"?wsComponents.secure:String(wsComponents.scheme).toLowerCase()==="wss"}var handler$2={scheme:"ws",domainHost:true,parse:function parse(components,options){var wsComponents=components;wsComponents.secure=isSecure(wsComponents);wsComponents.resourceName=(wsComponents.path||"/")+(wsComponents.query?"?"+wsComponents.query:"");wsComponents.path=undefined;wsComponents.query=undefined;return wsComponents},serialize:function serialize(wsComponents,options){if(wsComponents.port===(isSecure(wsComponents)?443:80)||wsComponents.port===""){wsComponents.port=undefined}if(typeof wsComponents.secure==="boolean"){wsComponents.scheme=wsComponents.secure?"wss":"ws";wsComponents.secure=undefined}if(wsComponents.resourceName){var _wsComponents$resourc=wsComponents.resourceName.split("?"),_wsComponents$resourc2=slicedToArray(_wsComponents$resourc,2),path=_wsComponents$resourc2[0],query=_wsComponents$resourc2[1];wsComponents.path=path&&path!=="/"?path:undefined;wsComponents.query=query;wsComponents.resourceName=undefined}wsComponents.fragment=undefined;return wsComponents}};var handler$3={scheme:"wss",domainHost:handler$2.domainHost,parse:handler$2.parse,serialize:handler$2.serialize};var O={};var UNRESERVED$$="[A-Za-z0-9\\-\\.\\_\\~"+"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF"+"]";var HEXDIG$$="[0-9A-Fa-f]";var PCT_ENCODED$=subexp(subexp("%[EFef]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%[89A-Fa-f]"+HEXDIG$$+"%"+HEXDIG$$+HEXDIG$$)+"|"+subexp("%"+HEXDIG$$+HEXDIG$$));var ATEXT$$="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]";var QTEXT$$="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]";var VCHAR$$=merge(QTEXT$$,'[\\"\\\\]');var SOME_DELIMS$$="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]";var UNRESERVED=new RegExp(UNRESERVED$$,"g");var PCT_ENCODED=new RegExp(PCT_ENCODED$,"g");var NOT_LOCAL_PART=new RegExp(merge("[^]",ATEXT$$,"[\\.]",'[\\"]',VCHAR$$),"g");var NOT_HFNAME=new RegExp(merge("[^]",UNRESERVED$$,SOME_DELIMS$$),"g");var NOT_HFVALUE=NOT_HFNAME;function decodeUnreserved(str){var decStr=pctDecChars(str);return!decStr.match(UNRESERVED)?str:decStr}var handler$4={scheme:"mailto",parse:function parse$$1(components,options){var mailtoComponents=components;var to=mailtoComponents.to=mailtoComponents.path?mailtoComponents.path.split(","):[];mailtoComponents.path=undefined;if(mailtoComponents.query){var unknownHeaders=false;var headers={};var hfields=mailtoComponents.query.split("&");for(var x=0,xl=hfields.length;x<xl;++x){var hfield=hfields[x].split("=");switch(hfield[0]){case"to":var toAddrs=hfield[1].split(",");for(var _x=0,_xl=toAddrs.length;_x<_xl;++_x){to.push(toAddrs[_x])}break;case"subject":mailtoComponents.subject=unescapeComponent(hfield[1],options);break;case"body":mailtoComponents.body=unescapeComponent(hfield[1],options);break;default:unknownHeaders=true;headers[unescapeComponent(hfield[0],options)]=unescapeComponent(hfield[1],options);break}}if(unknownHeaders)mailtoComponents.headers=headers}mailtoComponents.query=undefined;for(var _x2=0,_xl2=to.length;_x2<_xl2;++_x2){var addr=to[_x2].split("@");addr[0]=unescapeComponent(addr[0]);if(!options.unicodeSupport){try{addr[1]=punycode.toASCII(unescapeComponent(addr[1],options).toLowerCase())}catch(e){mailtoComponents.error=mailtoComponents.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}}else{addr[1]=unescapeComponent(addr[1],options).toLowerCase()}to[_x2]=addr.join("@")}return mailtoComponents},serialize:function serialize$$1(mailtoComponents,options){var components=mailtoComponents;var to=toArray(mailtoComponents.to);if(to){for(var x=0,xl=to.length;x<xl;++x){var toAddr=String(to[x]);var atIdx=toAddr.lastIndexOf("@");var localPart=toAddr.slice(0,atIdx).replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_LOCAL_PART,pctEncChar);var domain=toAddr.slice(atIdx+1);try{domain=!options.iri?punycode.toASCII(unescapeComponent(domain,options).toLowerCase()):punycode.toUnicode(domain)}catch(e){components.error=components.error||"Email address's domain name can not be converted to "+(!options.iri?"ASCII":"Unicode")+" via punycode: "+e}to[x]=localPart+"@"+domain}components.path=to.join(",")}var headers=mailtoComponents.headers=mailtoComponents.headers||{};if(mailtoComponents.subject)headers["subject"]=mailtoComponents.subject;if(mailtoComponents.body)headers["body"]=mailtoComponents.body;var fields=[];for(var name in headers){if(headers[name]!==O[name]){fields.push(name.replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFNAME,pctEncChar)+"="+headers[name].replace(PCT_ENCODED,decodeUnreserved).replace(PCT_ENCODED,toUpperCase).replace(NOT_HFVALUE,pctEncChar))}}if(fields.length){components.query=fields.join("&")}return components}};var URN_PARSE=/^([^\:]+)\:(.*)/;var handler$5={scheme:"urn",parse:function parse$$1(components,options){var matches=components.path&&components.path.match(URN_PARSE);var urnComponents=components;if(matches){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=matches[1].toLowerCase();var nss=matches[2];var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];urnComponents.nid=nid;urnComponents.nss=nss;urnComponents.path=undefined;if(schemeHandler){urnComponents=schemeHandler.parse(urnComponents,options)}}else{urnComponents.error=urnComponents.error||"URN can not be parsed."}return urnComponents},serialize:function serialize$$1(urnComponents,options){var scheme=options.scheme||urnComponents.scheme||"urn";var nid=urnComponents.nid;var urnScheme=scheme+":"+(options.nid||nid);var schemeHandler=SCHEMES[urnScheme];if(schemeHandler){urnComponents=schemeHandler.serialize(urnComponents,options)}var uriComponents=urnComponents;var nss=urnComponents.nss;uriComponents.path=(nid||options.nid)+":"+nss;return uriComponents}};var UUID=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/;var handler$6={scheme:"urn:uuid",parse:function parse(urnComponents,options){var uuidComponents=urnComponents;uuidComponents.uuid=uuidComponents.nss;uuidComponents.nss=undefined;if(!options.tolerant&&(!uuidComponents.uuid||!uuidComponents.uuid.match(UUID))){uuidComponents.error=uuidComponents.error||"UUID is not valid."}return uuidComponents},serialize:function serialize(uuidComponents,options){var urnComponents=uuidComponents;urnComponents.nss=(uuidComponents.uuid||"").toLowerCase();return urnComponents}};SCHEMES[handler.scheme]=handler;SCHEMES[handler$1.scheme]=handler$1;SCHEMES[handler$2.scheme]=handler$2;SCHEMES[handler$3.scheme]=handler$3;SCHEMES[handler$4.scheme]=handler$4;SCHEMES[handler$5.scheme]=handler$5;SCHEMES[handler$6.scheme]=handler$6;exports.SCHEMES=SCHEMES;exports.pctEncChar=pctEncChar;exports.pctDecChars=pctDecChars;exports.parse=parse;exports.removeDotSegments=removeDotSegments;exports.serialize=serialize;exports.resolveComponents=resolveComponents;exports.resolve=resolve;exports.normalize=normalize;exports.equal=equal;exports.escapeComponent=escapeComponent;exports.unescapeComponent=unescapeComponent;Object.defineProperty(exports,"__esModule",{value:true})}))})(uri_all,uri_all.exports);var fastDeepEqual=function equal(a,b){if(a===b)return true;if(a&&b&&typeof a=="object"&&typeof b=="object"){if(a.constructor!==b.constructor)return false;var length,i,keys;if(Array.isArray(a)){length=a.length;if(length!=b.length)return false;for(i=length;i--!==0;)if(!equal(a[i],b[i]))return false;return true}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();keys=Object.keys(a);length=keys.length;if(length!==Object.keys(b).length)return false;for(i=length;i--!==0;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=length;i--!==0;){var key=keys[i];if(!equal(a[key],b[key]))return false}return true}return a!==a&&b!==b};var ucs2length$1=function ucs2length(str){var length=0,len=str.length,pos=0,value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=55296&&value<=56319&&pos<len){value=str.charCodeAt(pos);if((value&64512)==56320)pos++}}return length};var util$5={copy,checkDataType,checkDataTypes,coerceToTypes,toHash:toHash$1,getProperty,escapeQuotes,equal:fastDeepEqual,ucs2length:ucs2length$1,varOccurences,varReplace,schemaHasRules,schemaHasRulesExcept,schemaUnknownRules,toQuotedString,getPathExpr,getPath,getData:getData$1,unescapeFragment,unescapeJsonPointer,escapeFragment,escapeJsonPointer};function copy(o,to){to=to||{};for(var key in o)to[key]=o[key];return to}function checkDataType(dataType,data,strictNumbers,negate){var EQUAL=negate?" !== ":" === ",AND=negate?" || ":" && ",OK=negate?"!":"",NOT=negate?"":"!";switch(dataType){case"null":return data+EQUAL+"null";case"array":return OK+"Array.isArray("+data+")";case"object":return"("+OK+data+AND+"typeof "+data+EQUAL+'"object"'+AND+NOT+"Array.isArray("+data+"))";case"integer":return"(typeof "+data+EQUAL+'"number"'+AND+NOT+"("+data+" % 1)"+AND+data+EQUAL+data+(strictNumbers?AND+OK+"isFinite("+data+")":"")+")";case"number":return"(typeof "+data+EQUAL+'"'+dataType+'"'+(strictNumbers?AND+OK+"isFinite("+data+")":"")+")";default:return"typeof "+data+EQUAL+'"'+dataType+'"'}}function checkDataTypes(dataTypes,data,strictNumbers){switch(dataTypes.length){case 1:return checkDataType(dataTypes[0],data,strictNumbers,true);default:var code="";var types=toHash$1(dataTypes);if(types.array&&types.object){code=types.null?"(":"(!"+data+" || ";code+="typeof "+data+' !== "object")';delete types.null;delete types.array;delete types.object}if(types.number)delete types.integer;for(var t in types)code+=(code?" && ":"")+checkDataType(t,data,strictNumbers,true);return code}}var COERCE_TO_TYPES=toHash$1(["string","number","integer","boolean","null"]);function coerceToTypes(optionCoerceTypes,dataTypes){if(Array.isArray(dataTypes)){var types=[];for(var i=0;i<dataTypes.length;i++){var t=dataTypes[i];if(COERCE_TO_TYPES[t])types[types.length]=t;else if(optionCoerceTypes==="array"&&t==="array")types[types.length]=t}if(types.length)return types}else if(COERCE_TO_TYPES[dataTypes]){return[dataTypes]}else if(optionCoerceTypes==="array"&&dataTypes==="array"){return["array"]}}function toHash$1(arr){var hash={};for(var i=0;i<arr.length;i++)hash[arr[i]]=true;return hash}var IDENTIFIER$1=/^[a-z$_][a-z$_0-9]*$/i;var SINGLE_QUOTE=/'|\\/g;function getProperty(key){return typeof key=="number"?"["+key+"]":IDENTIFIER$1.test(key)?"."+key:"['"+escapeQuotes(key)+"']"}function escapeQuotes(str){return str.replace(SINGLE_QUOTE,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function varOccurences(str,dataVar){dataVar+="[^0-9]";var matches=str.match(new RegExp(dataVar,"g"));return matches?matches.length:0}function varReplace(str,dataVar,expr){dataVar+="([^0-9])";expr=expr.replace(/\$/g,"$$$$");return str.replace(new RegExp(dataVar,"g"),expr+"$1")}function schemaHasRules(schema,rules){if(typeof schema=="boolean")return!schema;for(var key in schema)if(rules[key])return true}function schemaHasRulesExcept(schema,rules,exceptKeyword){if(typeof schema=="boolean")return!schema&&exceptKeyword!="not";for(var key in schema)if(key!=exceptKeyword&&rules[key])return true}function schemaUnknownRules(schema,rules){if(typeof schema=="boolean")return;for(var key in schema)if(!rules[key])return key}function toQuotedString(str){return"'"+escapeQuotes(str)+"'"}function getPathExpr(currentPath,expr,jsonPointers,isNumber){var path=jsonPointers?"'/' + "+expr+(isNumber?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):isNumber?"'[' + "+expr+" + ']'":"'[\\'' + "+expr+" + '\\']'";return joinPaths(currentPath,path)}function getPath(currentPath,prop,jsonPointers){var path=jsonPointers?toQuotedString("/"+escapeJsonPointer(prop)):toQuotedString(getProperty(prop));return joinPaths(currentPath,path)}var JSON_POINTER$1=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER$1=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData$1($data,lvl,paths){var up,jsonPointer,data,matches;if($data==="")return"rootData";if($data[0]=="/"){if(!JSON_POINTER$1.test($data))throw new Error("Invalid JSON-pointer: "+$data);jsonPointer=$data;data="rootData"}else{matches=$data.match(RELATIVE_JSON_POINTER$1);if(!matches)throw new Error("Invalid JSON-pointer: "+$data);up=+matches[1];jsonPointer=matches[2];if(jsonPointer=="#"){if(up>=lvl)throw new Error("Cannot access property/index "+up+" levels up, current level is "+lvl);return paths[lvl-up]}if(up>lvl)throw new Error("Cannot access data "+up+" levels up, current level is "+lvl);data="data"+(lvl-up||"");if(!jsonPointer)return data}var expr=data;var segments=jsonPointer.split("/");for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment){data+=getProperty(unescapeJsonPointer(segment));expr+=" && "+data}}return expr}function joinPaths(a,b){if(a=='""')return b;return(a+" + "+b).replace(/([^\\])' \+ '/g,"$1")}function unescapeFragment(str){return unescapeJsonPointer(decodeURIComponent(str))}function escapeFragment(str){return encodeURIComponent(escapeJsonPointer(str))}function escapeJsonPointer(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(str){return str.replace(/~1/g,"/").replace(/~0/g,"~")}var util$4=util$5;var schema_obj=SchemaObject$2;function SchemaObject$2(obj){util$4.copy(obj,this)}var jsonSchemaTraverse={exports:{}};var traverse$1=jsonSchemaTraverse.exports=function(schema,opts,cb){if(typeof opts=="function"){cb=opts;opts={}}cb=opts.cb||cb;var pre=typeof cb=="function"?cb:cb.pre||function(){};var post=cb.post||function(){};_traverse(opts,pre,post,schema,"",schema)};traverse$1.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true};traverse$1.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse$1.propsKeywords={definitions:true,properties:true,patternProperties:true,dependencies:true};traverse$1.skipKeywords={default:true,enum:true,const:true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(opts,pre,post,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&typeof schema=="object"&&!Array.isArray(schema)){pre(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if(Array.isArray(sch)){if(key in traverse$1.arrayKeywords){for(var i=0;i<sch.length;i++)_traverse(opts,pre,post,sch[i],jsonPtr+"/"+key+"/"+i,rootSchema,jsonPtr,key,schema,i)}}else if(key in traverse$1.propsKeywords){if(sch&&typeof sch=="object"){for(var prop in sch)_traverse(opts,pre,post,sch[prop],jsonPtr+"/"+key+"/"+escapeJsonPtr(prop),rootSchema,jsonPtr,key,schema,prop)}}else if(key in traverse$1.keywords||opts.allKeys&&!(key in traverse$1.skipKeywords)){_traverse(opts,pre,post,sch,jsonPtr+"/"+key,rootSchema,jsonPtr,key,schema)}}post(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex)}}function escapeJsonPtr(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}var URI$1=uri_all.exports,equal$1=fastDeepEqual,util$3=util$5,SchemaObject$1=schema_obj,traverse=jsonSchemaTraverse.exports;var resolve_1=resolve$3;resolve$3.normalizeId=normalizeId;resolve$3.fullPath=getFullPath;resolve$3.url=resolveUrl;resolve$3.ids=resolveIds;resolve$3.inlineRef=inlineRef;resolve$3.schema=resolveSchema;function resolve$3(compile,root,ref){var refVal=this._refs[ref];if(typeof refVal=="string"){if(this._refs[refVal])refVal=this._refs[refVal];else return resolve$3.call(this,compile,root,refVal)}refVal=refVal||this._schemas[ref];if(refVal instanceof SchemaObject$1){return inlineRef(refVal.schema,this._opts.inlineRefs)?refVal.schema:refVal.validate||this._compile(refVal)}var res=resolveSchema.call(this,root,ref);var schema,v,baseId;if(res){schema=res.schema;root=res.root;baseId=res.baseId}if(schema instanceof SchemaObject$1){v=schema.validate||compile.call(this,schema.schema,root,undefined,baseId)}else if(schema!==undefined){v=inlineRef(schema,this._opts.inlineRefs)?schema:compile.call(this,schema,root,undefined,baseId)}return v}function resolveSchema(root,ref){var p=URI$1.parse(ref),refPath=_getFullPath(p),baseId=getFullPath(this._getId(root.schema));if(Object.keys(root.schema).length===0||refPath!==baseId){var id=normalizeId(refPath);var refVal=this._refs[id];if(typeof refVal=="string"){return resolveRecursive.call(this,root,refVal,p)}else if(refVal instanceof SchemaObject$1){if(!refVal.validate)this._compile(refVal);root=refVal}else{refVal=this._schemas[id];if(refVal instanceof SchemaObject$1){if(!refVal.validate)this._compile(refVal);if(id==normalizeId(ref))return{schema:refVal,root,baseId};root=refVal}else{return}}if(!root.schema)return;baseId=getFullPath(this._getId(root.schema))}return getJsonPointer.call(this,p,baseId,root.schema,root)}function resolveRecursive(root,ref,parsedRef){var res=resolveSchema.call(this,root,ref);if(res){var schema=res.schema;var baseId=res.baseId;root=res.root;var id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);return getJsonPointer.call(this,parsedRef,baseId,schema,root)}}var PREVENT_SCOPE_CHANGE=util$3.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(parsedRef,baseId,schema,root){parsedRef.fragment=parsedRef.fragment||"";if(parsedRef.fragment.slice(0,1)!="/")return;var parts=parsedRef.fragment.split("/");for(var i=1;i<parts.length;i++){var part=parts[i];if(part){part=util$3.unescapeFragment(part);schema=schema[part];if(schema===undefined)break;var id;if(!PREVENT_SCOPE_CHANGE[part]){id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);if(schema.$ref){var $ref=resolveUrl(baseId,schema.$ref);var res=resolveSchema.call(this,root,$ref);if(res){schema=res.schema;root=res.root;baseId=res.baseId}}}}}if(schema!==undefined&&schema!==root.schema)return{schema,root,baseId}}var SIMPLE_INLINED=util$3.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(schema,limit){if(limit===false)return false;if(limit===undefined||limit===true)return checkNoRef(schema);else if(limit)return countKeys(schema)<=limit}function checkNoRef(schema){var item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object"&&!checkNoRef(item))return false}}else{for(var key in schema){if(key=="$ref")return false;item=schema[key];if(typeof item=="object"&&!checkNoRef(item))return false}}return true}function countKeys(schema){var count=0,item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object")count+=countKeys(item);if(count==Infinity)return Infinity}}else{for(var key in schema){if(key=="$ref")return Infinity;if(SIMPLE_INLINED[key]){count++}else{item=schema[key];if(typeof item=="object")count+=countKeys(item)+1;if(count==Infinity)return Infinity}}}return count}function getFullPath(id,normalize){if(normalize!==false)id=normalizeId(id);var p=URI$1.parse(id);return _getFullPath(p)}function _getFullPath(p){return URI$1.serialize(p).split("#")[0]+"#"}var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(id){return id?id.replace(TRAILING_SLASH_HASH,""):""}function resolveUrl(baseId,id){id=normalizeId(id);return URI$1.resolve(baseId,id)}function resolveIds(schema){var schemaId=normalizeId(this._getId(schema));var baseIds={"":schemaId};var fullPaths={"":getFullPath(schemaId,false)};var localRefs={};var self=this;traverse(schema,{allKeys:true},(function(sch,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(jsonPtr==="")return;var id=self._getId(sch);var baseId=baseIds[parentJsonPtr];var fullPath=fullPaths[parentJsonPtr]+"/"+parentKeyword;if(keyIndex!==undefined)fullPath+="/"+(typeof keyIndex=="number"?keyIndex:util$3.escapeFragment(keyIndex));if(typeof id=="string"){id=baseId=normalizeId(baseId?URI$1.resolve(baseId,id):id);var refVal=self._refs[id];if(typeof refVal=="string")refVal=self._refs[refVal];if(refVal&&refVal.schema){if(!equal$1(sch,refVal.schema))throw new Error('id "'+id+'" resolves to more than one schema')}else if(id!=normalizeId(fullPath)){if(id[0]=="#"){if(localRefs[id]&&!equal$1(sch,localRefs[id]))throw new Error('id "'+id+'" resolves to more than one schema');localRefs[id]=sch}else{self._refs[id]=fullPath}}}baseIds[jsonPtr]=baseId;fullPaths[jsonPtr]=fullPath}));return localRefs}var resolve$2=resolve_1;var error_classes={Validation:errorSubclass(ValidationError$1),MissingRef:errorSubclass(MissingRefError$1)};function ValidationError$1(errors){this.message="validation failed";this.errors=errors;this.ajv=this.validation=true}MissingRefError$1.message=function(baseId,ref){return"can't resolve reference "+ref+" from id "+baseId};function MissingRefError$1(baseId,ref,message){this.message=message||MissingRefError$1.message(baseId,ref);this.missingRef=resolve$2.url(baseId,ref);this.missingSchema=resolve$2.normalizeId(resolve$2.fullPath(this.missingRef))}function errorSubclass(Subclass){Subclass.prototype=Object.create(Error.prototype);Subclass.prototype.constructor=Subclass;return Subclass}var fastJsonStableStringify=function(data,opts){if(!opts)opts={};if(typeof opts==="function")opts={cmp:opts};var cycles=typeof opts.cycles==="boolean"?opts.cycles:false;var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp);var seen=[];return function stringify(node){if(node&&node.toJSON&&typeof node.toJSON==="function"){node=node.toJSON()}if(node===undefined)return;if(typeof node=="number")return isFinite(node)?""+node:"null";if(typeof node!=="object")return JSON.stringify(node);var i,out;if(Array.isArray(node)){out="[";for(i=0;i<node.length;i++){if(i)out+=",";out+=stringify(node[i])||"null"}return out+"]"}if(node===null)return"null";if(seen.indexOf(node)!==-1){if(cycles)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var seenIndex=seen.push(node)-1;var keys=Object.keys(node).sort(cmp&&cmp(node));out="";for(i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node[key]);if(!value)continue;if(out)out+=",";out+=JSON.stringify(key)+":"+value}seen.splice(seenIndex,1);return"{"+out+"}"}(data)};var validate$1=function generate_validate(it,$keyword,$ruleType){var out="";var $async=it.schema.$async===true,$refKeywords=it.util.schemaHasRulesExcept(it.schema,it.RULES.all,"$ref"),$id=it.self._getId(it.schema);if(it.opts.strictKeywords){var $unknownKwd=it.util.schemaUnknownRules(it.schema,it.RULES.keywords);if($unknownKwd){var $keywordsMsg="unknown keyword: "+$unknownKwd;if(it.opts.strictKeywords==="log")it.logger.warn($keywordsMsg);else throw new Error($keywordsMsg)}}if(it.isTop){out+=" var validate = ";if($async){it.async=true;out+="async "}out+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ";if($id&&(it.opts.sourceCode||it.opts.processCode)){out+=" "+("/*# sourceURL="+$id+" */")+" "}}if(typeof it.schema=="boolean"||!($refKeywords||it.schema.$ref)){var $keyword="false schema";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;if(it.schema===false){if(it.isTop){$breakOnError=true}else{out+=" var "+$valid+" = false; "}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"false schema")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'boolean schema is false' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{if(it.isTop){if($async){out+=" return data; "}else{out+=" validate.errors = null; return true; "}}else{out+=" var "+$valid+" = true; "}}if(it.isTop){out+=" }; return validate; "}return out}if(it.isTop){var $top=it.isTop,$lvl=it.level=0,$dataLvl=it.dataLevel=0,$data="data";it.rootId=it.resolve.fullPath(it.self._getId(it.root.schema));it.baseId=it.baseId||it.rootId;delete it.isTop;it.dataPathArr=[""];if(it.schema.default!==undefined&&it.opts.useDefaults&&it.opts.strictDefaults){var $defaultMsg="default is ignored in the schema root";if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}out+=" var vErrors = null; ";out+=" var errors = 0;     ";out+=" if (rootData === undefined) rootData = data; "}else{var $lvl=it.level,$dataLvl=it.dataLevel,$data="data"+($dataLvl||"");if($id)it.baseId=it.resolve.url(it.baseId,$id);if($async&&!it.async)throw new Error("async schema in sync schema");out+=" var errs_"+$lvl+" = errors;"}var $valid="valid"+$lvl,$breakOnError=!it.opts.allErrors,$closingBraces1="",$closingBraces2="";var $errorKeyword;var $typeSchema=it.schema.type,$typeIsArray=Array.isArray($typeSchema);if($typeSchema&&it.opts.nullable&&it.schema.nullable===true){if($typeIsArray){if($typeSchema.indexOf("null")==-1)$typeSchema=$typeSchema.concat("null")}else if($typeSchema!="null"){$typeSchema=[$typeSchema,"null"];$typeIsArray=true}}if($typeIsArray&&$typeSchema.length==1){$typeSchema=$typeSchema[0];$typeIsArray=false}if(it.schema.$ref&&$refKeywords){if(it.opts.extendRefs=="fail"){throw new Error('$ref: validation keywords used in schema at path "'+it.errSchemaPath+'" (see option extendRefs)')}else if(it.opts.extendRefs!==true){$refKeywords=false;it.logger.warn('$ref: keywords ignored in schema at path "'+it.errSchemaPath+'"')}}if(it.schema.$comment&&it.opts.$comment){out+=" "+it.RULES.all.$comment.code(it,"$comment")}if($typeSchema){if(it.opts.coerceTypes){var $coerceToTypes=it.util.coerceToTypes(it.opts.coerceTypes,$typeSchema)}var $rulesGroup=it.RULES.types[$typeSchema];if($coerceToTypes||$typeIsArray||$rulesGroup===true||$rulesGroup&&!$shouldUseGroup($rulesGroup)){var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type",$method=$typeIsArray?"checkDataTypes":"checkDataType";out+=" if ("+it.util[$method]($typeSchema,$data,it.opts.strictNumbers,true)+") { ";if($coerceToTypes){var $dataType="dataType"+$lvl,$coerced="coerced"+$lvl;out+=" var "+$dataType+" = typeof "+$data+"; var "+$coerced+" = undefined; ";if(it.opts.coerceTypes=="array"){out+=" if ("+$dataType+" == 'object' && Array.isArray("+$data+") && "+$data+".length == 1) { "+$data+" = "+$data+"[0]; "+$dataType+" = typeof "+$data+"; if ("+it.util.checkDataType(it.schema.type,$data,it.opts.strictNumbers)+") "+$coerced+" = "+$data+"; } "}out+=" if ("+$coerced+" !== undefined) ; ";var arr1=$coerceToTypes;if(arr1){var $type,$i=-1,l1=arr1.length-1;while($i<l1){$type=arr1[$i+=1];if($type=="string"){out+=" else if ("+$dataType+" == 'number' || "+$dataType+" == 'boolean') "+$coerced+" = '' + "+$data+"; else if ("+$data+" === null) "+$coerced+" = ''; "}else if($type=="number"||$type=="integer"){out+=" else if ("+$dataType+" == 'boolean' || "+$data+" === null || ("+$dataType+" == 'string' && "+$data+" && "+$data+" == +"+$data+" ";if($type=="integer"){out+=" && !("+$data+" % 1)"}out+=")) "+$coerced+" = +"+$data+"; "}else if($type=="boolean"){out+=" else if ("+$data+" === 'false' || "+$data+" === 0 || "+$data+" === null) "+$coerced+" = false; else if ("+$data+" === 'true' || "+$data+" === 1) "+$coerced+" = true; "}else if($type=="null"){out+=" else if ("+$data+" === '' || "+$data+" === 0 || "+$data+" === false) "+$coerced+" = null; "}else if(it.opts.coerceTypes=="array"&&$type=="array"){out+=" else if ("+$dataType+" == 'string' || "+$dataType+" == 'number' || "+$dataType+" == 'boolean' || "+$data+" == null) "+$coerced+" = ["+$data+"]; "}}}out+=" else {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } if ("+$coerced+" !== undefined) {  ";var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" "+$data+" = "+$coerced+"; ";if(!$dataLvl){out+="if ("+$parentData+" !== undefined)"}out+=" "+$parentData+"["+$parentDataProperty+"] = "+$coerced+"; } "}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}out+=" } "}}if(it.schema.$ref&&!$refKeywords){out+=" "+it.RULES.all.$ref.code(it,"$ref")+" ";if($breakOnError){out+=" } if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}else{var arr2=it.RULES;if(arr2){var $rulesGroup,i2=-1,l2=arr2.length-1;while(i2<l2){$rulesGroup=arr2[i2+=1];if($shouldUseGroup($rulesGroup)){if($rulesGroup.type){out+=" if ("+it.util.checkDataType($rulesGroup.type,$data,it.opts.strictNumbers)+") { "}if(it.opts.useDefaults){if($rulesGroup.type=="object"&&it.schema.properties){var $schema=it.schema.properties,$schemaKeys=Object.keys($schema);var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if($sch.default!==undefined){var $passData=$data+it.util.getProperty($propertyKey);if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg="default is ignored for: "+$passData;if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}}else{out+=" if ("+$passData+" === undefined ";if(it.opts.useDefaults=="empty"){out+=" || "+$passData+" === null || "+$passData+" === '' "}out+=" ) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}}else if($rulesGroup.type=="array"&&Array.isArray(it.schema.items)){var arr4=it.schema.items;if(arr4){var $sch,$i=-1,l4=arr4.length-1;while($i<l4){$sch=arr4[$i+=1];if($sch.default!==undefined){var $passData=$data+"["+$i+"]";if(it.compositeRule){if(it.opts.strictDefaults){var $defaultMsg="default is ignored for: "+$passData;if(it.opts.strictDefaults==="log")it.logger.warn($defaultMsg);else throw new Error($defaultMsg)}}else{out+=" if ("+$passData+" === undefined ";if(it.opts.useDefaults=="empty"){out+=" || "+$passData+" === null || "+$passData+" === '' "}out+=" ) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}}}var arr5=$rulesGroup.rules;if(arr5){var $rule,i5=-1,l5=arr5.length-1;while(i5<l5){$rule=arr5[i5+=1];if($shouldUseRule($rule)){var $code=$rule.code(it,$rule.keyword,$rulesGroup.type);if($code){out+=" "+$code+" ";if($breakOnError){$closingBraces1+="}"}}}}}if($breakOnError){out+=" "+$closingBraces1+" ";$closingBraces1=""}if($rulesGroup.type){out+=" } ";if($typeSchema&&$typeSchema===$rulesGroup.type&&!$coerceToTypes){out+=" else { ";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } "}}if($breakOnError){out+=" if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}}}}if($breakOnError){out+=" "+$closingBraces2+" "}if($top){if($async){out+=" if (errors === 0) return data;           ";out+=" else throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; ";out+=" return errors === 0;       "}out+=" }; return validate;"}else{out+=" var "+$valid+" = errors === errs_"+$lvl+";"}function $shouldUseGroup($rulesGroup){var rules=$rulesGroup.rules;for(var i=0;i<rules.length;i++)if($shouldUseRule(rules[i]))return true}function $shouldUseRule($rule){return it.schema[$rule.keyword]!==undefined||$rule.implements&&$ruleImplementsSomeKeyword($rule)}function $ruleImplementsSomeKeyword($rule){var impl=$rule.implements;for(var i=0;i<impl.length;i++)if(it.schema[impl[i]]!==undefined)return true}return out};var resolve$1=resolve_1,util$2=util$5,errorClasses$1=error_classes,stableStringify$1=fastJsonStableStringify;var validateGenerator=validate$1;var ucs2length=util$2.ucs2length;var equal=fastDeepEqual;var ValidationError=errorClasses$1.Validation;var compile_1=compile$1;function compile$1(schema,root,localRefs,baseId){var self=this,opts=this._opts,refVal=[undefined],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema,refVal,refs};var c=checkCompiling.call(this,schema,root,baseId);var compilation=this._compilations[c.index];if(c.compiling)return compilation.callValidate=callValidate;var formats=this._formats;var RULES=this.RULES;try{var v=localCompile(schema,root,localRefs,baseId);compilation.validate=v;var cv=compilation.callValidate;if(cv){cv.schema=v.schema;cv.errors=null;cv.refs=v.refs;cv.refVal=v.refVal;cv.root=v.root;cv.$async=v.$async;if(opts.sourceCode)cv.source=v.source}return v}finally{endCompiling.call(this,schema,root,baseId)}function callValidate(){var validate=compilation.validate;var result=validate.apply(this,arguments);callValidate.errors=validate.errors;return result}function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile$1.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===true;var sourceCode=validateGenerator({isTop:true,schema:_schema,isRoot,baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:errorClasses$1.MissingRef,RULES,validate:validateGenerator,util:util$2,resolve:resolve$1,resolveRef,usePattern,useDefault,useCustomRule,opts,formats,logger:self.logger,self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode$1)+sourceCode;if(opts.processCode)sourceCode=opts.processCode(sourceCode,_schema);var validate;try{var makeValidate=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",sourceCode);validate=makeValidate(self,RULES,formats,root,refVal,defaults,customRules,equal,ucs2length,ValidationError);refVal[0]=validate}catch(e){self.logger.error("Error compiling schema, function code:",sourceCode);throw e}validate.schema=_schema;validate.errors=null;validate.refs=refs;validate.refVal=refVal;validate.root=isRoot?validate:_root;if($async)validate.$async=true;if(opts.sourceCode===true){validate.source={code:sourceCode,patterns,defaults}}return validate}function resolveRef(baseId,ref,isRoot){ref=resolve$1.url(baseId,ref);var refIndex=refs[ref];var _refVal,refCode;if(refIndex!==undefined){_refVal=refVal[refIndex];refCode="refVal["+refIndex+"]";return resolvedRef(_refVal,refCode)}if(!isRoot&&root.refs){var rootRefId=root.refs[ref];if(rootRefId!==undefined){_refVal=root.refVal[rootRefId];refCode=addLocalRef(ref,_refVal);return resolvedRef(_refVal,refCode)}}refCode=addLocalRef(ref);var v=resolve$1.call(self,localCompile,root,ref);if(v===undefined){var localSchema=localRefs&&localRefs[ref];if(localSchema){v=resolve$1.inlineRef(localSchema,opts.inlineRefs)?localSchema:compile$1.call(self,localSchema,root,localRefs,baseId)}}if(v===undefined){removeLocalRef(ref)}else{replaceLocalRef(ref,v);return resolvedRef(v,refCode)}}function addLocalRef(ref,v){var refId=refVal.length;refVal[refId]=v;refs[ref]=refId;return"refVal"+refId}function removeLocalRef(ref){delete refs[ref]}function replaceLocalRef(ref,v){var refId=refs[ref];refVal[refId]=v}function resolvedRef(refVal,code){return typeof refVal=="object"||typeof refVal=="boolean"?{code,schema:refVal,inline:true}:{code,$async:refVal&&!!refVal.$async}}function usePattern(regexStr){var index=patternsHash[regexStr];if(index===undefined){index=patternsHash[regexStr]=patterns.length;patterns[index]=regexStr}return"pattern"+index}function useDefault(value){switch(typeof value){case"boolean":case"number":return""+value;case"string":return util$2.toQuotedString(value);case"object":if(value===null)return"null";var valueStr=stableStringify$1(value);var index=defaultsHash[valueStr];if(index===undefined){index=defaultsHash[valueStr]=defaults.length;defaults[index]=value}return"default"+index}}function useCustomRule(rule,schema,parentSchema,it){if(self._opts.validateSchema!==false){var deps=rule.definition.dependencies;if(deps&&!deps.every((function(keyword){return Object.prototype.hasOwnProperty.call(parentSchema,keyword)})))throw new Error("parent schema must have all required keywords: "+deps.join(","));var validateSchema=rule.definition.validateSchema;if(validateSchema){var valid=validateSchema(schema);if(!valid){var message="keyword schema is invalid: "+self.errorsText(validateSchema.errors);if(self._opts.validateSchema=="log")self.logger.error(message);else throw new Error(message)}}}var compile=rule.definition.compile,inline=rule.definition.inline,macro=rule.definition.macro;var validate;if(compile){validate=compile.call(self,schema,parentSchema,it)}else if(macro){validate=macro.call(self,schema,parentSchema,it);if(opts.validateSchema!==false)self.validateSchema(validate,true)}else if(inline){validate=inline.call(self,it,rule.keyword,schema,parentSchema)}else{validate=rule.definition.validate;if(!validate)return}if(validate===undefined)throw new Error('custom keyword "'+rule.keyword+'"failed to compile');var index=customRules.length;customRules[index]=validate;return{code:"customRule"+index,validate}}}function checkCompiling(schema,root,baseId){var index=compIndex.call(this,schema,root,baseId);if(index>=0)return{index,compiling:true};index=this._compilations.length;this._compilations[index]={schema,root,baseId};return{index,compiling:false}}function endCompiling(schema,root,baseId){var i=compIndex.call(this,schema,root,baseId);if(i>=0)this._compilations.splice(i,1)}function compIndex(schema,root,baseId){for(var i=0;i<this._compilations.length;i++){var c=this._compilations[i];if(c.schema==schema&&c.root==root&&c.baseId==baseId)return i}return-1}function patternCode(i,patterns){return"var pattern"+i+" = new RegExp("+util$2.toQuotedString(patterns[i])+");"}function defaultCode(i){return"var default"+i+" = defaults["+i+"];"}function refValCode(i,refVal){return refVal[i]===undefined?"":"var refVal"+i+" = refVal["+i+"];"}function customRuleCode$1(i){return"var customRule"+i+" = customRules["+i+"];"}function vars(arr,statement){if(!arr.length)return"";var code="";for(var i=0;i<arr.length;i++)code+=statement(i,arr);return code}var cache={exports:{}};var Cache$1=cache.exports=function Cache(){this._cache={}};Cache$1.prototype.put=function Cache_put(key,value){this._cache[key]=value};Cache$1.prototype.get=function Cache_get(key){return this._cache[key]};Cache$1.prototype.del=function Cache_del(key){delete this._cache[key]};Cache$1.prototype.clear=function Cache_clear(){this._cache={}};var util$1=util$5;var DATE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/;var DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31];var TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;var HOSTNAME=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i;var URI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;var URL=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;var UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;var JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$/;var JSON_POINTER_URI_FRAGMENT=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;var RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;var formats_1=formats$1;function formats$1(mode){mode=mode=="full"?"full":"fast";return util$1.copy(formats$1[mode])}formats$1.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":URITEMPLATE,url:URL,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:UUID,"json-pointer":JSON_POINTER,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT,"relative-json-pointer":RELATIVE_JSON_POINTER};formats$1.full={date,time,"date-time":date_time,uri,"uri-reference":URIREF,"uri-template":URITEMPLATE,url:URL,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex,uuid:UUID,"json-pointer":JSON_POINTER,"json-pointer-uri-fragment":JSON_POINTER_URI_FRAGMENT,"relative-json-pointer":RELATIVE_JSON_POINTER};function isLeapYear$1(year){return year%4===0&&(year%100!==0||year%400===0)}function date(str){var matches=str.match(DATE);if(!matches)return false;var year=+matches[1];var month=+matches[2];var day=+matches[3];return month>=1&&month<=12&&day>=1&&day<=(month==2&&isLeapYear$1(year)?29:DAYS[month])}function time(str,full){var matches=str.match(TIME);if(!matches)return false;var hour=matches[1];var minute=matches[2];var second=matches[3];var timeZone=matches[5];return(hour<=23&&minute<=59&&second<=59||hour==23&&minute==59&&second==60)&&(!full||timeZone)}var DATE_TIME_SEPARATOR=/t|\s/i;function date_time(str){var dateTime=str.split(DATE_TIME_SEPARATOR);return dateTime.length==2&&date(dateTime[0])&&time(dateTime[1],true)}var NOT_URI_FRAGMENT=/\/|:/;function uri(str){return NOT_URI_FRAGMENT.test(str)&&URI.test(str)}var Z_ANCHOR=/[^\\]\\Z/;function regex(str){if(Z_ANCHOR.test(str))return false;try{return true}catch(e){return false}}var ref=function generate_ref(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $async,$refCode;if($schema=="#"||$schema=="#/"){if(it.isRoot){$async=it.async;$refCode="validate"}else{$async=it.root.schema.$async===true;$refCode="root.refVal[0]"}}else{var $refVal=it.resolveRef(it.baseId,$schema,it.isRoot);if($refVal===undefined){var $message=it.MissingRefError.message(it.baseId,$schema);if(it.opts.missingRefs=="fail"){it.logger.error($message);var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"$ref"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { ref: '"+it.util.escapeQuotes($schema)+"' } ";if(it.opts.messages!==false){out+=" , message: 'can\\'t resolve reference "+it.util.escapeQuotes($schema)+"' "}if(it.opts.verbose){out+=" , schema: "+it.util.toQuotedString($schema)+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}if($breakOnError){out+=" if (false) { "}}else if(it.opts.missingRefs=="ignore"){it.logger.warn($message);if($breakOnError){out+=" if (true) { "}}else{throw new it.MissingRefError(it.baseId,$schema,$message)}}else if($refVal.inline){var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;$it.schema=$refVal.schema;$it.schemaPath="";$it.errSchemaPath=$schema;var $code=it.validate($it).replace(/validate\.schema/g,$refVal.code);out+=" "+$code+" ";if($breakOnError){out+=" if ("+$nextValid+") { "}}else{$async=$refVal.$async===true||it.async&&$refVal.$async!==false;$refCode=$refVal.code}}if($refCode){var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.opts.passContext){out+=" "+$refCode+".call(this, "}else{out+=" "+$refCode+"( "}out+=" "+$data+", (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+", rootData)  ";var __callValidate=out;out=$$outStack.pop();if($async){if(!it.async)throw new Error("async schema referenced by sync schema");if($breakOnError){out+=" var "+$valid+"; "}out+=" try { await "+__callValidate+"; ";if($breakOnError){out+=" "+$valid+" = true; "}out+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ";if($breakOnError){out+=" "+$valid+" = false; "}out+=" } ";if($breakOnError){out+=" if ("+$valid+") { "}}else{out+=" if (!"+__callValidate+") { if (vErrors === null) vErrors = "+$refCode+".errors; else vErrors = vErrors.concat("+$refCode+".errors); errors = vErrors.length; } ";if($breakOnError){out+=" else { "}}}return out};var allOf=function generate_allOf(it,$keyword,$ruleType){var out=" ";var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $currentBaseId=$it.baseId,$allSchemasEmpty=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$allSchemasEmpty=false;$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($breakOnError){if($allSchemasEmpty){out+=" if (true) { "}else{out+=" "+$closingBraces.slice(0,-1)+" "}}return out};var anyOf=function generate_anyOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $noEmptySchema=$schema.every((function($sch){return it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)}));if($noEmptySchema){var $currentBaseId=$it.baseId;out+=" var "+$errs+" = errors; var "+$valid+" = false;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$valid+" || "+$nextValid+"; if (!"+$valid+") { ";$closingBraces+="}"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"anyOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should match some schema in anyOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}}else{if($breakOnError){out+=" if (true) { "}}return out};var comment=function generate_comment(it,$keyword,$ruleType){var out=" ";var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $comment=it.util.toQuotedString($schema);if(it.opts.$comment===true){out+=" console.log("+$comment+");"}else if(typeof it.opts.$comment=="function"){out+=" self._opts.$comment("+$comment+", "+it.util.toQuotedString($errSchemaPath)+", validate.root.schema);"}return out};var _const=function generate_const(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}if(!$isData){out+=" var schema"+$lvl+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+" = equal("+$data+", schema"+$lvl+"); if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"const"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { allowedValue: schema"+$lvl+" } ";if(it.opts.messages!==false){out+=" , message: 'should be equal to constant' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out};var contains=function generate_contains(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId,$nonEmptySchema=it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all);out+="var "+$errs+" = errors;var "+$valid+";";if($nonEmptySchema){var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$nextValid+" = false; for (var "+$idx+" = 0; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if ("+$nextValid+") break; }  ";it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$nextValid+") {"}else{out+=" if ("+$data+".length == 0) {"}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"contains"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should contain a valid item' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { ";if($nonEmptySchema){out+="  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } "}if(it.opts.allErrors){out+=" } "}return out};var dependencies=function generate_dependencies(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $schemaDeps={},$propertyDeps={},$ownProperties=it.opts.ownProperties;for($property in $schema){if($property=="__proto__")continue;var $sch=$schema[$property];var $deps=Array.isArray($sch)?$propertyDeps:$schemaDeps;$deps[$property]=$sch}out+="var "+$errs+" = errors;";var $currentErrorPath=it.errorPath;out+="var missing"+$lvl+";";for(var $property in $propertyDeps){$deps=$propertyDeps[$property];if($deps.length){out+=" if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}if($breakOnError){out+=" && ( ";var arr1=$deps;if(arr1){var $propertyKey,$i=-1,l1=arr1.length-1;while($i<l1){$propertyKey=arr1[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=")) {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{out+=" ) { ";var arr2=$deps;if(arr2){var $propertyKey,i2=-1,l2=arr2.length-1;while(i2<l2){$propertyKey=arr2[i2+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}out+=" }   ";if($breakOnError){$closingBraces+="}";out+=" else { "}}}it.errorPath=$currentErrorPath;var $currentBaseId=$it.baseId;for(var $property in $schemaDeps){var $sch=$schemaDeps[$property];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}out+=") { ";$it.schema=$sch;$it.schemaPath=$schemaPath+it.util.getProperty($property);$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($property);out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}if($breakOnError){out+="   "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var _enum=function generate_enum(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}var $i="i"+$lvl,$vSchema="schema"+$lvl;if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+";";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=""+$valid+" = false;for (var "+$i+"=0; "+$i+"<"+$vSchema+".length; "+$i+"++) if (equal("+$data+", "+$vSchema+"["+$i+"])) { "+$valid+" = true; break; }";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"enum"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { allowedValues: schema"+$lvl+" } ";if(it.opts.messages!==false){out+=" , message: 'should be equal to one of the allowed values' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out};var format$1=function generate_format(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");if(it.opts.format===false){if($breakOnError){out+=" if (true) { "}return out}var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $unknownFormats=it.opts.unknownFormats,$allowUnknown=Array.isArray($unknownFormats);if($isData){var $format="format"+$lvl,$isObject="isObject"+$lvl,$formatType="formatType"+$lvl;out+=" var "+$format+" = formats["+$schemaValue+"]; var "+$isObject+" = typeof "+$format+" == 'object' && !("+$format+" instanceof RegExp) && "+$format+".validate; var "+$formatType+" = "+$isObject+" && "+$format+".type || 'string'; if ("+$isObject+") { ";if(it.async){out+=" var async"+$lvl+" = "+$format+".async; "}out+=" "+$format+" = "+$format+".validate; } if (  ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" (";if($unknownFormats!="ignore"){out+=" ("+$schemaValue+" && !"+$format+" ";if($allowUnknown){out+=" && self._opts.unknownFormats.indexOf("+$schemaValue+") == -1 "}out+=") || "}out+=" ("+$format+" && "+$formatType+" == '"+$ruleType+"' && !(typeof "+$format+" == 'function' ? ";if(it.async){out+=" (async"+$lvl+" ? await "+$format+"("+$data+") : "+$format+"("+$data+")) "}else{out+=" "+$format+"("+$data+") "}out+=" : "+$format+".test("+$data+"))))) {"}else{var $format=it.formats[$schema];if(!$format){if($unknownFormats=="ignore"){it.logger.warn('unknown format "'+$schema+'" ignored in schema at path "'+it.errSchemaPath+'"');if($breakOnError){out+=" if (true) { "}return out}else if($allowUnknown&&$unknownFormats.indexOf($schema)>=0){if($breakOnError){out+=" if (true) { "}return out}else{throw new Error('unknown format "'+$schema+'" is used in schema at path "'+it.errSchemaPath+'"')}}var $isObject=typeof $format=="object"&&!($format instanceof RegExp)&&$format.validate;var $formatType=$isObject&&$format.type||"string";if($isObject){var $async=$format.async===true;$format=$format.validate}if($formatType!=$ruleType){if($breakOnError){out+=" if (true) { "}return out}if($async){if(!it.async)throw new Error("async format in sync schema");var $formatRef="formats"+it.util.getProperty($schema)+".validate";out+=" if (!(await "+$formatRef+"("+$data+"))) { "}else{out+=" if (! ";var $formatRef="formats"+it.util.getProperty($schema);if($isObject)$formatRef+=".validate";if(typeof $format=="function"){out+=" "+$formatRef+"("+$data+") "}else{out+=" "+$formatRef+".test("+$data+") "}out+=") { "}}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"format"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { format:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match format \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out};var _if=function generate_if(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;var $thenSch=it.schema["then"],$elseSch=it.schema["else"],$thenPresent=$thenSch!==undefined&&(it.opts.strictKeywords?typeof $thenSch=="object"&&Object.keys($thenSch).length>0||$thenSch===false:it.util.schemaHasRules($thenSch,it.RULES.all)),$elsePresent=$elseSch!==undefined&&(it.opts.strictKeywords?typeof $elseSch=="object"&&Object.keys($elseSch).length>0||$elseSch===false:it.util.schemaHasRules($elseSch,it.RULES.all)),$currentBaseId=$it.baseId;if($thenPresent||$elsePresent){var $ifClause;$it.createErrors=false;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$errs+" = errors; var "+$valid+" = true;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;$it.createErrors=true;out+="  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; }  ";it.compositeRule=$it.compositeRule=$wasComposite;if($thenPresent){out+=" if ("+$nextValid+") {  ";$it.schema=it.schema["then"];$it.schemaPath=it.schemaPath+".then";$it.errSchemaPath=it.errSchemaPath+"/then";out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$nextValid+"; ";if($thenPresent&&$elsePresent){$ifClause="ifClause"+$lvl;out+=" var "+$ifClause+" = 'then'; "}else{$ifClause="'then'"}out+=" } ";if($elsePresent){out+=" else { "}}else{out+=" if (!"+$nextValid+") { "}if($elsePresent){$it.schema=it.schema["else"];$it.schemaPath=it.schemaPath+".else";$it.errSchemaPath=it.errSchemaPath+"/else";out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$nextValid+"; ";if($thenPresent&&$elsePresent){$ifClause="ifClause"+$lvl;out+=" var "+$ifClause+" = 'else'; "}else{$ifClause="'else'"}out+=" } "}out+=" if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"if"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { failingKeyword: "+$ifClause+" } ";if(it.opts.messages!==false){out+=" , message: 'should match \"' + "+$ifClause+" + '\" schema' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+=" }   ";if($breakOnError){out+=" else { "}}else{if($breakOnError){out+=" if (true) { "}}return out};var items=function generate_items(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId;out+="var "+$errs+" = errors;var "+$valid+";";if(Array.isArray($schema)){var $additionalItems=it.schema.additionalItems;if($additionalItems===false){out+=" "+$valid+" = "+$data+".length <= "+$schema.length+"; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalItems";out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schema.length+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have more than "+$schema.length+" items' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";$errSchemaPath=$currErrSchemaPath;if($breakOnError){$closingBraces+="}";out+=" else { "}}var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ("+$data+".length > "+$i+") { ";var $passData=$data+"["+$i+"]";$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;$it.errorPath=it.util.getPathExpr(it.errorPath,$i,it.opts.jsonPointers,true);$it.dataPathArr[$dataNxt]=$i;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if(typeof $additionalItems=="object"&&(it.opts.strictKeywords?typeof $additionalItems=="object"&&Object.keys($additionalItems).length>0||$additionalItems===false:it.util.schemaHasRules($additionalItems,it.RULES.all))){$it.schema=$additionalItems;$it.schemaPath=it.schemaPath+".additionalItems";$it.errSchemaPath=it.errSchemaPath+"/additionalItems";out+=" "+$nextValid+" = true; if ("+$data+".length > "+$schema.length+") {  for (var "+$idx+" = "+$schema.length+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}else if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+="  for (var "+$idx+" = "+0+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var _limit=function generate__limit(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $isMax=$keyword=="maximum",$exclusiveKeyword=$isMax?"exclusiveMaximum":"exclusiveMinimum",$schemaExcl=it.schema[$exclusiveKeyword],$isDataExcl=it.opts.$data&&$schemaExcl&&$schemaExcl.$data,$op=$isMax?"<":">",$notOp=$isMax?">":"<",$errorKeyword=undefined;if(!($isData||typeof $schema=="number"||$schema===undefined)){throw new Error($keyword+" must be number")}if(!($isDataExcl||$schemaExcl===undefined||typeof $schemaExcl=="number"||typeof $schemaExcl=="boolean")){throw new Error($exclusiveKeyword+" must be number or boolean")}if($isDataExcl){var $schemaValueExcl=it.util.getData($schemaExcl.$data,$dataLvl,it.dataPathArr),$exclusive="exclusive"+$lvl,$exclType="exclType"+$lvl,$exclIsNumber="exclIsNumber"+$lvl,$opExpr="op"+$lvl,$opStr="' + "+$opExpr+" + '";out+=" var schemaExcl"+$lvl+" = "+$schemaValueExcl+"; ";$schemaValueExcl="schemaExcl"+$lvl;out+=" var "+$exclusive+"; var "+$exclType+" = typeof "+$schemaValueExcl+"; if ("+$exclType+" != 'boolean' && "+$exclType+" != 'undefined' && "+$exclType+" != 'number') { ";var $errorKeyword=$exclusiveKeyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: '"+$exclusiveKeyword+" should be boolean' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$exclType+" == 'number' ? ( ("+$exclusive+" = "+$schemaValue+" === undefined || "+$schemaValueExcl+" "+$op+"= "+$schemaValue+") ? "+$data+" "+$notOp+"= "+$schemaValueExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) : ( ("+$exclusive+" = "+$schemaValueExcl+" === true) ? "+$data+" "+$notOp+"= "+$schemaValue+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { var op"+$lvl+" = "+$exclusive+" ? '"+$op+"' : '"+$op+"='; ";if($schema===undefined){$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$schemaValue=$schemaValueExcl;$isData=$isDataExcl}}else{var $exclIsNumber=typeof $schemaExcl=="number",$opStr=$op;if($exclIsNumber&&$isData){var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" ( "+$schemaValue+" === undefined || "+$schemaExcl+" "+$op+"= "+$schemaValue+" ? "+$data+" "+$notOp+"= "+$schemaExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { "}else{if($exclIsNumber&&$schema===undefined){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$schemaValue=$schemaExcl;$notOp+="="}else{if($exclIsNumber)$schemaValue=Math[$isMax?"min":"max"]($schemaExcl,$schema);if($schemaExcl===($exclIsNumber?$schemaValue:true)){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$notOp+="="}else{$exclusive=false;$opStr+="="}}var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+" "+$notOp+" "+$schemaValue+" || "+$data+" !== "+$data+") { "}}$errorKeyword=$errorKeyword||$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { comparison: "+$opExpr+", limit: "+$schemaValue+", exclusive: "+$exclusive+" } ";if(it.opts.messages!==false){out+=" , message: 'should be "+$opStr+" ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out};var _limitItems=function generate__limitItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxItems"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+".length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitItems")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxItems"){out+="more"}else{out+="fewer"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" items' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var _limitLength=function generate__limitLength(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxLength"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}if(it.opts.unicode===false){out+=" "+$data+".length "}else{out+=" ucs2length("+$data+") "}out+=" "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitLength")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT be ";if($keyword=="maxLength"){out+="longer"}else{out+="shorter"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" characters' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var _limitProperties=function generate__limitProperties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}var $op=$keyword=="maxProperties"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" Object.keys("+$data+").length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitProperties")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxProperties"){out+="more"}else{out+="fewer"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" properties' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var multipleOf=function generate_multipleOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!($isData||typeof $schema=="number")){throw new Error($keyword+" must be number")}out+="var division"+$lvl+";if (";if($isData){out+=" "+$schemaValue+" !== undefined && ( typeof "+$schemaValue+" != 'number' || "}out+=" (division"+$lvl+" = "+$data+" / "+$schemaValue+", ";if(it.opts.multipleOfPrecision){out+=" Math.abs(Math.round(division"+$lvl+") - division"+$lvl+") > 1e-"+it.opts.multipleOfPrecision+" "}else{out+=" division"+$lvl+" !== parseInt(division"+$lvl+") "}out+=" ) ";if($isData){out+="  )  "}out+=" ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"multipleOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { multipleOf: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should be multiple of ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var not=function generate_not(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.createErrors=false;var $allErrorsOption;if($it.opts.allErrors){$allErrorsOption=$it.opts.allErrors;$it.opts.allErrors=false}out+=" "+it.validate($it)+" ";$it.createErrors=true;if($allErrorsOption)$it.opts.allErrors=$allErrorsOption;it.compositeRule=$it.compositeRule=$wasComposite;out+=" if ("+$nextValid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}}else{out+="  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if($breakOnError){out+=" if (false) { "}}return out};var oneOf$1=function generate_oneOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $currentBaseId=$it.baseId,$prevValid="prevValid"+$lvl,$passingSchemas="passingSchemas"+$lvl;out+="var "+$errs+" = errors , "+$prevValid+" = false , "+$valid+" = false , "+$passingSchemas+" = null; ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId}else{out+=" var "+$nextValid+" = true; "}if($i){out+=" if ("+$nextValid+" && "+$prevValid+") { "+$valid+" = false; "+$passingSchemas+" = ["+$passingSchemas+", "+$i+"]; } else { ";$closingBraces+="}"}out+=" if ("+$nextValid+") { "+$valid+" = "+$prevValid+" = true; "+$passingSchemas+" = "+$i+"; }"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=""+$closingBraces+"if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"oneOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { passingSchemas: "+$passingSchemas+" } ";if(it.opts.messages!==false){out+=" , message: 'should match exactly one schema in oneOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+="} else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; }";if(it.opts.allErrors){out+=" } "}return out};var pattern=function generate_pattern(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $regexp=$isData?"(new RegExp("+$schemaValue+"))":it.usePattern($schema);out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" !"+$regexp+".test("+$data+") ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"pattern"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { pattern:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match pattern \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out};var properties$2=function generate_properties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $key="key"+$lvl,$idx="idx"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl;var $schemaKeys=Object.keys($schema||{}).filter(notProto),$pProperties=it.schema.patternProperties||{},$pPropertyKeys=Object.keys($pProperties).filter(notProto),$aProperties=it.schema.additionalProperties,$someProperties=$schemaKeys.length||$pPropertyKeys.length,$noAdditional=$aProperties===false,$additionalIsSchema=typeof $aProperties=="object"&&Object.keys($aProperties).length,$removeAdditional=it.opts.removeAdditional,$checkAdditional=$noAdditional||$additionalIsSchema||$removeAdditional,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;var $required=it.schema.required;if($required&&!(it.opts.$data&&$required.$data)&&$required.length<it.opts.loopRequired){var $requiredHash=it.util.toHash($required)}function notProto(p){return p!=="__proto__"}out+="var "+$errs+" = errors;var "+$nextValid+" = true;";if($ownProperties){out+=" var "+$dataProperties+" = undefined;"}if($checkAdditional){if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}if($someProperties){out+=" var isAdditional"+$lvl+" = !(false ";if($schemaKeys.length){if($schemaKeys.length>8){out+=" || validate.schema"+$schemaPath+".hasOwnProperty("+$key+") "}else{var arr1=$schemaKeys;if(arr1){var $propertyKey,i1=-1,l1=arr1.length-1;while(i1<l1){$propertyKey=arr1[i1+=1];out+=" || "+$key+" == "+it.util.toQuotedString($propertyKey)+" "}}}}if($pPropertyKeys.length){var arr2=$pPropertyKeys;if(arr2){var $pProperty,$i=-1,l2=arr2.length-1;while($i<l2){$pProperty=arr2[$i+=1];out+=" || "+it.usePattern($pProperty)+".test("+$key+") "}}}out+=" ); if (isAdditional"+$lvl+") { "}if($removeAdditional=="all"){out+=" delete "+$data+"["+$key+"]; "}else{var $currentErrorPath=it.errorPath;var $additionalProperty="' + "+$key+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers)}if($noAdditional){if($removeAdditional){out+=" delete "+$data+"["+$key+"]; "}else{out+=" "+$nextValid+" = false; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalProperties";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalProperties"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { additionalProperty: '"+$additionalProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is an invalid additional property"}else{out+="should NOT have additional properties"}out+="' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=" break; "}}}else if($additionalIsSchema){if($removeAdditional=="failing"){out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if (!"+$nextValid+") { errors = "+$errs+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$data+"["+$key+"]; }  ";it.compositeRule=$it.compositeRule=$wasComposite}else{$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}}}it.errorPath=$currentErrorPath}if($someProperties){out+=" } "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}var $useDefaults=it.opts.useDefaults&&!it.compositeRule;if($schemaKeys.length){var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){var $prop=it.util.getProperty($propertyKey),$passData=$data+$prop,$hasDefault=$useDefaults&&$sch.default!==undefined;$it.schema=$sch;$it.schemaPath=$schemaPath+$prop;$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($propertyKey);$it.errorPath=it.util.getPath(it.errorPath,$propertyKey,it.opts.jsonPointers);$it.dataPathArr[$dataNxt]=it.util.toQuotedString($propertyKey);var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){$code=it.util.varReplace($code,$nextData,$passData);var $useData=$passData}else{var $useData=$nextData;out+=" var "+$nextData+" = "+$passData+"; "}if($hasDefault){out+=" "+$code+" "}else{if($requiredHash&&$requiredHash[$propertyKey]){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = false; ";var $currentErrorPath=it.errorPath,$currErrSchemaPath=$errSchemaPath,$missingProperty=it.util.escapeQuotes($propertyKey);if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}$errSchemaPath=it.errSchemaPath+"/required";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;it.errorPath=$currentErrorPath;out+=" } else { "}else{if($breakOnError){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = true; } else { "}else{out+=" if ("+$useData+" !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=" ) { "}}out+=" "+$code+" } "}}if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($pPropertyKeys.length){var arr4=$pPropertyKeys;if(arr4){var $pProperty,i4=-1,l4=arr4.length-1;while(i4<l4){$pProperty=arr4[i4+=1];var $sch=$pProperties[$pProperty];if(it.opts.strictKeywords?typeof $sch=="object"&&Object.keys($sch).length>0||$sch===false:it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+".patternProperties"+it.util.getProperty($pProperty);$it.errSchemaPath=it.errSchemaPath+"/patternProperties/"+it.util.escapeFragment($pProperty);if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" if ("+it.usePattern($pProperty)+".test("+$key+")) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } ";if($breakOnError){out+=" else "+$nextValid+" = true; "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var propertyNames=function generate_propertyNames(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;out+="var "+$errs+" = errors;";if(it.opts.strictKeywords?typeof $schema=="object"&&Object.keys($schema).length>0||$schema===false:it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;var $key="key"+$lvl,$idx="idx"+$lvl,$i="i"+$lvl,$invalidName="' + "+$key+" + '",$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;if($ownProperties){out+=" var "+$dataProperties+" = undefined; "}if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" var startErrs"+$lvl+" = errors; ";var $passData=$key;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}it.compositeRule=$it.compositeRule=$wasComposite;out+=" if (!"+$nextValid+") { for (var "+$i+"=startErrs"+$lvl+"; "+$i+"<errors; "+$i+"++) { vErrors["+$i+"].propertyName = "+$key+"; }   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"propertyNames"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { propertyName: '"+$invalidName+"' } ";if(it.opts.messages!==false){out+=" , message: 'property name \\'"+$invalidName+"\\' is invalid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}if($breakOnError){out+=" break; "}out+=" } }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}return out};var required$1=function generate_required(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; "}var $vSchema="schema"+$lvl;if(!$isData){if($schema.length<it.opts.loopRequired&&it.schema.properties&&Object.keys(it.schema.properties).length){var $required=[];var arr1=$schema;if(arr1){var $property,i1=-1,l1=arr1.length-1;while(i1<l1){$property=arr1[i1+=1];var $propertySch=it.schema.properties[$property];if(!($propertySch&&(it.opts.strictKeywords?typeof $propertySch=="object"&&Object.keys($propertySch).length>0||$propertySch===false:it.util.schemaHasRules($propertySch,it.RULES.all)))){$required[$required.length]=$property}}}}else{var $required=$schema}}if($isData||$required.length){var $currentErrorPath=it.errorPath,$loopRequired=$isData||$required.length>=it.opts.loopRequired,$ownProperties=it.opts.ownProperties;if($breakOnError){out+=" var missing"+$lvl+"; ";if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}out+=" var "+$valid+" = true; ";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { "+$valid+" = "+$data+"["+$vSchema+"["+$i+"]] !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+="; if (!"+$valid+") break; } ";if($isData){out+="  }  "}out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}else{out+=" if ( ";var arr2=$required;if(arr2){var $propertyKey,$i=-1,l2=arr2.length-1;while($i<l2){$propertyKey=arr2[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=") {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}}else{if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}if($isData){out+=" if ("+$vSchema+" && !Array.isArray("+$vSchema+")) {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+$vSchema+" !== undefined) { "}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { if ("+$data+"["+$vSchema+"["+$i+"]] === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ";if($isData){out+="  }  "}}else{var arr3=$required;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}}it.errorPath=$currentErrorPath}else if($breakOnError){out+=" if (true) {"}return out};var uniqueItems=function generate_uniqueItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(($schema||$isData)&&it.opts.uniqueItems!==false){if($isData){out+=" var "+$valid+"; if ("+$schemaValue+" === false || "+$schemaValue+" === undefined) "+$valid+" = true; else if (typeof "+$schemaValue+" != 'boolean') "+$valid+" = false; else { "}out+=" var i = "+$data+".length , "+$valid+" = true , j; if (i > 1) { ";var $itemType=it.schema.items&&it.schema.items.type,$typeIsArray=Array.isArray($itemType);if(!$itemType||$itemType=="object"||$itemType=="array"||$typeIsArray&&($itemType.indexOf("object")>=0||$itemType.indexOf("array")>=0)){out+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+$data+"[i], "+$data+"[j])) { "+$valid+" = false; break outer; } } } "}else{out+=" var itemIndices = {}, item; for (;i--;) { var item = "+$data+"[i]; ";var $method="checkDataType"+($typeIsArray?"s":"");out+=" if ("+it.util[$method]($itemType,"item",it.opts.strictNumbers,true)+") continue; ";if($typeIsArray){out+=" if (typeof item == 'string') item = '\"' + item; "}out+=" if (typeof itemIndices[item] == 'number') { "+$valid+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}out+=" } ";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"uniqueItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { i: i, j: j } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}}else{if($breakOnError){out+=" if (true) { "}}return out};var dotjs={$ref:ref,allOf,anyOf,$comment:comment,const:_const,contains,dependencies,enum:_enum,format:format$1,if:_if,items,maximum:_limit,minimum:_limit,maxItems:_limitItems,minItems:_limitItems,maxLength:_limitLength,minLength:_limitLength,maxProperties:_limitProperties,minProperties:_limitProperties,multipleOf,not,oneOf:oneOf$1,pattern,properties:properties$2,propertyNames,required:required$1,uniqueItems,validate:validate$1};var ruleModules=dotjs,toHash=util$5.toHash;var rules$1=function rules(){var RULES=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}];var ALL=["type","$comment"];var KEYWORDS=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"];var TYPES=["number","integer","string","array","object","boolean","null"];RULES.all=toHash(ALL);RULES.types=toHash(TYPES);RULES.forEach((function(group){group.rules=group.rules.map((function(keyword){var implKeywords;if(typeof keyword=="object"){var key=Object.keys(keyword)[0];implKeywords=keyword[key];keyword=key;implKeywords.forEach((function(k){ALL.push(k);RULES.all[k]=true}))}ALL.push(keyword);var rule=RULES.all[keyword]={keyword,code:ruleModules[keyword],implements:implKeywords};return rule}));RULES.all.$comment={keyword:"$comment",code:ruleModules.$comment};if(group.type)RULES.types[group.type]=group}));RULES.keywords=toHash(ALL.concat(KEYWORDS));RULES.custom={};return RULES};var KEYWORDS=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];var data=function(metaSchema,keywordsJsonPointers){for(var i=0;i<keywordsJsonPointers.length;i++){metaSchema=JSON.parse(JSON.stringify(metaSchema));var segments=keywordsJsonPointers[i].split("/");var keywords=metaSchema;var j;for(j=1;j<segments.length;j++)keywords=keywords[segments[j]];for(j=0;j<KEYWORDS.length;j++){var key=KEYWORDS[j];var schema=keywords[key];if(schema){keywords[key]={anyOf:[schema,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}}return metaSchema};var MissingRefError=error_classes.MissingRef;var async=compileAsync;function compileAsync(schema,meta,callback){var self=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof meta=="function"){callback=meta;meta=undefined}var p=loadMetaSchemaOf(schema).then((function(){var schemaObj=self._addSchema(schema,undefined,meta);return schemaObj.validate||_compileAsync(schemaObj)}));if(callback){p.then((function(v){callback(null,v)}),callback)}return p;function loadMetaSchemaOf(sch){var $schema=sch.$schema;return $schema&&!self.getSchema($schema)?compileAsync.call(self,{$ref:$schema},true):Promise.resolve()}function _compileAsync(schemaObj){try{return self._compile(schemaObj)}catch(e){if(e instanceof MissingRefError)return loadMissingSchema(e);throw e}function loadMissingSchema(e){var ref=e.missingSchema;if(added(ref))throw new Error("Schema "+ref+" is loaded but "+e.missingRef+" cannot be resolved");var schemaPromise=self._loadingSchemas[ref];if(!schemaPromise){schemaPromise=self._loadingSchemas[ref]=self._opts.loadSchema(ref);schemaPromise.then(removePromise,removePromise)}return schemaPromise.then((function(sch){if(!added(ref)){return loadMetaSchemaOf(sch).then((function(){if(!added(ref))self.addSchema(sch,ref,undefined,meta)}))}})).then((function(){return _compileAsync(schemaObj)}));function removePromise(){delete self._loadingSchemas[ref]}function added(ref){return self._refs[ref]||self._schemas[ref]}}}}var custom=function generate_custom(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $rule=this,$definition="definition"+$lvl,$rDef=$rule.definition,$closingBraces="";var $compile,$inline,$macro,$ruleValidate,$validateCode;if($isData&&$rDef.$data){$validateCode="keywordValidate"+$lvl;var $validateSchema=$rDef.validateSchema;out+=" var "+$definition+" = RULES.custom['"+$keyword+"'].definition; var "+$validateCode+" = "+$definition+".validate;"}else{$ruleValidate=it.useCustomRule($rule,$schema,it.schema,it);if(!$ruleValidate)return;$schemaValue="validate.schema"+$schemaPath;$validateCode=$ruleValidate.code;$compile=$rDef.compile;$inline=$rDef.inline;$macro=$rDef.macro}var $ruleErrs=$validateCode+".errors",$i="i"+$lvl,$ruleErr="ruleErr"+$lvl,$asyncKeyword=$rDef.async;if($asyncKeyword&&!it.async)throw new Error("async keyword in sync schema");if(!($inline||$macro)){out+=""+$ruleErrs+" = null;"}out+="var "+$errs+" = errors;var "+$valid+";";if($isData&&$rDef.$data){$closingBraces+="}";out+=" if ("+$schemaValue+" === undefined) { "+$valid+" = true; } else { ";if($validateSchema){$closingBraces+="}";out+=" "+$valid+" = "+$definition+".validateSchema("+$schemaValue+"); if ("+$valid+") { "}}if($inline){if($rDef.statements){out+=" "+$ruleValidate.validate+" "}else{out+=" "+$valid+" = "+$ruleValidate.validate+"; "}}else if($macro){var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;$it.schema=$ruleValidate.validate;$it.schemaPath="";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it).replace(/validate\.schema/g,$validateCode);it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$code}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";out+="  "+$validateCode+".call( ";if(it.opts.passContext){out+="this"}else{out+="self"}if($compile||$rDef.schema===false){out+=" , "+$data+" "}else{out+=" , "+$schemaValue+" , "+$data+" , validate.schema"+it.schemaPath+" "}out+=" , (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+" , rootData )  ";var def_callRuleValidate=out;out=$$outStack.pop();if($rDef.errors===false){out+=" "+$valid+" = ";if($asyncKeyword){out+="await "}out+=""+def_callRuleValidate+"; "}else{if($asyncKeyword){$ruleErrs="customErrors"+$lvl;out+=" var "+$ruleErrs+" = null; try { "+$valid+" = await "+def_callRuleValidate+"; } catch (e) { "+$valid+" = false; if (e instanceof ValidationError) "+$ruleErrs+" = e.errors; else throw e; } "}else{out+=" "+$ruleErrs+" = null; "+$valid+" = "+def_callRuleValidate+"; "}}}if($rDef.modifying){out+=" if ("+$parentData+") "+$data+" = "+$parentData+"["+$parentDataProperty+"];"}out+=""+$closingBraces;if($rDef.valid){if($breakOnError){out+=" if (true) { "}}else{out+=" if ( ";if($rDef.valid===undefined){out+=" !";if($macro){out+=""+$nextValid}else{out+=""+$valid}}else{out+=" "+!$rDef.valid+" "}out+=") { ";$errorKeyword=$rule.keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}var def_customError=out;out=$$outStack.pop();if($inline){if($rDef.errors){if($rDef.errors!="full"){out+="  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } "}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if ("+$errs+" == errors) { "+def_customError+" } else {  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } "}}}else if($macro){out+="   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if (Array.isArray("+$ruleErrs+")) { if (vErrors === null) vErrors = "+$ruleErrs+"; else vErrors = vErrors.concat("+$ruleErrs+"); errors = vErrors.length;  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+";  "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'";  ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } else { "+def_customError+" } "}}out+=" } ";if($breakOnError){out+=" else { "}}return out};const $schema$1="http://json-schema.org/draft-07/schema#";const $id$1="http://json-schema.org/draft-07/schema#";const title="Core schema meta-schema";const definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:true,default:[]}};const type$1=["object","boolean"];const properties$1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:true,readOnly:{type:"boolean",default:false},examples:{type:"array",items:true},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:true},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:false},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:true,enum:{type:"array",items:true,minItems:1,uniqueItems:true},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:true}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var require$$13={$schema:$schema$1,$id:$id$1,title,definitions,type:type$1,properties:properties$1,default:true};var metaSchema=require$$13;var definition_schema={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:metaSchema.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:metaSchema.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}};var IDENTIFIER=/^[a-z_$][a-z0-9_$-]*$/i;var customRuleCode=custom;var definitionSchema=definition_schema;var keyword={add:addKeyword,get:getKeyword,remove:removeKeyword,validate:validateKeyword};function addKeyword(keyword,definition){var RULES=this.RULES;if(RULES.keywords[keyword])throw new Error("Keyword "+keyword+" is already defined");if(!IDENTIFIER.test(keyword))throw new Error("Keyword "+keyword+" is not a valid identifier");if(definition){this.validateKeyword(definition,true);var dataType=definition.type;if(Array.isArray(dataType)){for(var i=0;i<dataType.length;i++)_addRule(keyword,dataType[i],definition)}else{_addRule(keyword,dataType,definition)}var metaSchema=definition.metaSchema;if(metaSchema){if(definition.$data&&this._opts.$data){metaSchema={anyOf:[metaSchema,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}definition.validateSchema=this.compile(metaSchema,true)}}RULES.keywords[keyword]=RULES.all[keyword]=true;function _addRule(keyword,dataType,definition){var ruleGroup;for(var i=0;i<RULES.length;i++){var rg=RULES[i];if(rg.type==dataType){ruleGroup=rg;break}}if(!ruleGroup){ruleGroup={type:dataType,rules:[]};RULES.push(ruleGroup)}var rule={keyword,definition,custom:true,code:customRuleCode,implements:definition.implements};ruleGroup.rules.push(rule);RULES.custom[keyword]=rule}return this}function getKeyword(keyword){var rule=this.RULES.custom[keyword];return rule?rule.definition:this.RULES.keywords[keyword]||false}function removeKeyword(keyword){var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];delete RULES.custom[keyword];for(var i=0;i<RULES.length;i++){var rules=RULES[i].rules;for(var j=0;j<rules.length;j++){if(rules[j].keyword==keyword){rules.splice(j,1);break}}}return this}function validateKeyword(definition,throwError){validateKeyword.errors=null;var v=this._validateKeyword=this._validateKeyword||this.compile(definitionSchema,true);if(v(definition))return true;validateKeyword.errors=v.errors;if(throwError)throw new Error("custom keyword definition is invalid: "+this.errorsText(v.errors));else return false}const $schema="http://json-schema.org/draft-07/schema#";const $id="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#";const description="Meta-schema for $data reference (JSON Schema extension proposal)";const type="object";const required=["$data"];const properties={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}};const additionalProperties=false;var require$$12={$schema,$id,description,type,required,properties,additionalProperties};var compileSchema=compile_1,resolve=resolve_1,Cache=cache.exports,SchemaObject=schema_obj,stableStringify=fastJsonStableStringify,formats=formats_1,rules=rules$1,$dataMetaSchema=data,util=util$5;var ajv=Ajv;Ajv.prototype.validate=validate;Ajv.prototype.compile=compile;Ajv.prototype.addSchema=addSchema;Ajv.prototype.addMetaSchema=addMetaSchema;Ajv.prototype.validateSchema=validateSchema;Ajv.prototype.getSchema=getSchema;Ajv.prototype.removeSchema=removeSchema;Ajv.prototype.addFormat=addFormat;Ajv.prototype.errorsText=errorsText;Ajv.prototype._addSchema=_addSchema;Ajv.prototype._compile=_compile;Ajv.prototype.compileAsync=async;var customKeyword=keyword;Ajv.prototype.addKeyword=customKeyword.add;Ajv.prototype.getKeyword=customKeyword.get;Ajv.prototype.removeKeyword=customKeyword.remove;Ajv.prototype.validateKeyword=customKeyword.validate;var errorClasses=error_classes;Ajv.ValidationError=errorClasses.Validation;Ajv.MissingRefError=errorClasses.MissingRef;Ajv.$dataMetaSchema=$dataMetaSchema;var META_SCHEMA_ID="http://json-schema.org/draft-07/schema";var META_IGNORE_OPTIONS=["removeAdditional","useDefaults","coerceTypes","strictDefaults"];var META_SUPPORT_DATA=["/properties"];function Ajv(opts){if(!(this instanceof Ajv))return new Ajv(opts);opts=this._opts=util.copy(opts)||{};setLogger(this);this._schemas={};this._refs={};this._fragments={};this._formats=formats(opts.format);this._cache=opts.cache||new Cache;this._loadingSchemas={};this._compilations=[];this.RULES=rules();this._getId=chooseGetId(opts);opts.loopRequired=opts.loopRequired||Infinity;if(opts.errorDataPath=="property")opts._errorDataPathProperty=true;if(opts.serialize===undefined)opts.serialize=stableStringify;this._metaOpts=getMetaSchemaOptions(this);if(opts.formats)addInitialFormats(this);if(opts.keywords)addInitialKeywords(this);addDefaultMetaSchema(this);if(typeof opts.meta=="object")this.addMetaSchema(opts.meta);if(opts.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});addInitialSchemas(this)}function validate(schemaKeyRef,data){var v;if(typeof schemaKeyRef=="string"){v=this.getSchema(schemaKeyRef);if(!v)throw new Error('no schema with key or ref "'+schemaKeyRef+'"')}else{var schemaObj=this._addSchema(schemaKeyRef);v=schemaObj.validate||this._compile(schemaObj)}var valid=v(data);if(v.$async!==true)this.errors=v.errors;return valid}function compile(schema,_meta){var schemaObj=this._addSchema(schema,undefined,_meta);return schemaObj.validate||this._compile(schemaObj)}function addSchema(schema,key,_skipValidation,_meta){if(Array.isArray(schema)){for(var i=0;i<schema.length;i++)this.addSchema(schema[i],undefined,_skipValidation,_meta);return this}var id=this._getId(schema);if(id!==undefined&&typeof id!="string")throw new Error("schema id must be string");key=resolve.normalizeId(key||id);checkUnique(this,key);this._schemas[key]=this._addSchema(schema,_skipValidation,_meta,true);return this}function addMetaSchema(schema,key,skipValidation){this.addSchema(schema,key,skipValidation,true);return this}function validateSchema(schema,throwOrLogError){var $schema=schema.$schema;if($schema!==undefined&&typeof $schema!="string")throw new Error("$schema must be a string");$schema=$schema||this._opts.defaultMeta||defaultMeta(this);if(!$schema){this.logger.warn("meta-schema not available");this.errors=null;return true}var valid=this.validate($schema,schema);if(!valid&&throwOrLogError){var message="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(message);else throw new Error(message)}return valid}function defaultMeta(self){var meta=self._opts.meta;self._opts.defaultMeta=typeof meta=="object"?self._getId(meta)||meta:self.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:undefined;return self._opts.defaultMeta}function getSchema(keyRef){var schemaObj=_getSchemaObj(this,keyRef);switch(typeof schemaObj){case"object":return schemaObj.validate||this._compile(schemaObj);case"string":return this.getSchema(schemaObj);case"undefined":return _getSchemaFragment(this,keyRef)}}function _getSchemaFragment(self,ref){var res=resolve.schema.call(self,{schema:{}},ref);if(res){var schema=res.schema,root=res.root,baseId=res.baseId;var v=compileSchema.call(self,schema,root,undefined,baseId);self._fragments[ref]=new SchemaObject({ref,fragment:true,schema,root,baseId,validate:v});return v}}function _getSchemaObj(self,keyRef){keyRef=resolve.normalizeId(keyRef);return self._schemas[keyRef]||self._refs[keyRef]||self._fragments[keyRef]}function removeSchema(schemaKeyRef){if(schemaKeyRef instanceof RegExp){_removeAllSchemas(this,this._schemas,schemaKeyRef);_removeAllSchemas(this,this._refs,schemaKeyRef);return this}switch(typeof schemaKeyRef){case"undefined":_removeAllSchemas(this,this._schemas);_removeAllSchemas(this,this._refs);this._cache.clear();return this;case"string":var schemaObj=_getSchemaObj(this,schemaKeyRef);if(schemaObj)this._cache.del(schemaObj.cacheKey);delete this._schemas[schemaKeyRef];delete this._refs[schemaKeyRef];return this;case"object":var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schemaKeyRef):schemaKeyRef;this._cache.del(cacheKey);var id=this._getId(schemaKeyRef);if(id){id=resolve.normalizeId(id);delete this._schemas[id];delete this._refs[id]}}return this}function _removeAllSchemas(self,schemas,regex){for(var keyRef in schemas){var schemaObj=schemas[keyRef];if(!schemaObj.meta&&(!regex||regex.test(keyRef))){self._cache.del(schemaObj.cacheKey);delete schemas[keyRef]}}}function _addSchema(schema,skipValidation,meta,shouldAddSchema){if(typeof schema!="object"&&typeof schema!="boolean")throw new Error("schema should be object or boolean");var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schema):schema;var cached=this._cache.get(cacheKey);if(cached)return cached;shouldAddSchema=shouldAddSchema||this._opts.addUsedSchema!==false;var id=resolve.normalizeId(this._getId(schema));if(id&&shouldAddSchema)checkUnique(this,id);var willValidate=this._opts.validateSchema!==false&&!skipValidation;var recursiveMeta;if(willValidate&&!(recursiveMeta=id&&id==resolve.normalizeId(schema.$schema)))this.validateSchema(schema,true);var localRefs=resolve.ids.call(this,schema);var schemaObj=new SchemaObject({id,schema,localRefs,cacheKey,meta});if(id[0]!="#"&&shouldAddSchema)this._refs[id]=schemaObj;this._cache.put(cacheKey,schemaObj);if(willValidate&&recursiveMeta)this.validateSchema(schema,true);return schemaObj}function _compile(schemaObj,root){if(schemaObj.compiling){schemaObj.validate=callValidate;callValidate.schema=schemaObj.schema;callValidate.errors=null;callValidate.root=root?root:callValidate;if(schemaObj.schema.$async===true)callValidate.$async=true;return callValidate}schemaObj.compiling=true;var currentOpts;if(schemaObj.meta){currentOpts=this._opts;this._opts=this._metaOpts}var v;try{v=compileSchema.call(this,schemaObj.schema,root,schemaObj.localRefs)}catch(e){delete schemaObj.validate;throw e}finally{schemaObj.compiling=false;if(schemaObj.meta)this._opts=currentOpts}schemaObj.validate=v;schemaObj.refs=v.refs;schemaObj.refVal=v.refVal;schemaObj.root=v.root;return v;function callValidate(){var _validate=schemaObj.validate;var result=_validate.apply(this,arguments);callValidate.errors=_validate.errors;return result}}function chooseGetId(opts){switch(opts.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}function _getId(schema){if(schema.$id)this.logger.warn("schema $id ignored",schema.$id);return schema.id}function _get$Id(schema){if(schema.id)this.logger.warn("schema id ignored",schema.id);return schema.$id}function _get$IdOrId(schema){if(schema.$id&&schema.id&&schema.$id!=schema.id)throw new Error("schema $id is different from id");return schema.$id||schema.id}function errorsText(errors,options){errors=errors||this.errors;if(!errors)return"No errors";options=options||{};var separator=options.separator===undefined?", ":options.separator;var dataVar=options.dataVar===undefined?"data":options.dataVar;var text="";for(var i=0;i<errors.length;i++){var e=errors[i];if(e)text+=dataVar+e.dataPath+" "+e.message+separator}return text.slice(0,-separator.length)}function addFormat(name,format){if(typeof format=="string")format=new RegExp(format);this._formats[name]=format;return this}function addDefaultMetaSchema(self){var $dataSchema;if(self._opts.$data){$dataSchema=require$$12;self.addMetaSchema($dataSchema,$dataSchema.$id,true)}if(self._opts.meta===false)return;var metaSchema=require$$13;if(self._opts.$data)metaSchema=$dataMetaSchema(metaSchema,META_SUPPORT_DATA);self.addMetaSchema(metaSchema,META_SCHEMA_ID,true);self._refs["http://json-schema.org/schema"]=META_SCHEMA_ID}function addInitialSchemas(self){var optsSchemas=self._opts.schemas;if(!optsSchemas)return;if(Array.isArray(optsSchemas))self.addSchema(optsSchemas);else for(var key in optsSchemas)self.addSchema(optsSchemas[key],key)}function addInitialFormats(self){for(var name in self._opts.formats){var format=self._opts.formats[name];self.addFormat(name,format)}}function addInitialKeywords(self){for(var name in self._opts.keywords){var keyword=self._opts.keywords[name];self.addKeyword(name,keyword)}}function checkUnique(self,id){if(self._schemas[id]||self._refs[id])throw new Error('schema with key or id "'+id+'" already exists')}function getMetaSchemaOptions(self){var metaOpts=util.copy(self._opts);for(var i=0;i<META_IGNORE_OPTIONS.length;i++)delete metaOpts[META_IGNORE_OPTIONS[i]];return metaOpts}function setLogger(self){var logger=self._opts.logger;if(logger===false){self.logger={log:noop$2,warn:noop$2,error:noop$2}}else{if(logger===undefined)logger=console;if(!(typeof logger=="object"&&logger.log&&logger.warn&&logger.error))throw new Error("logger must implement log, warn and error methods");self.logger=logger}}function noop$2(){}function extractSchemaNameFromRefPath(schemaRefPath){const schemaStartIndex=schemaRefPath.lastIndexOf("/");return schemaStartIndex!==-1?schemaRefPath.slice(schemaStartIndex+1):schemaRefPath}async function customizeValidationErrors(errors){const errorStrings=await fetchErrorsStrings$1();return errors.map((error=>{let customizedError=error;const dataPath=error.dataPath[0]==="."?error.dataPath.substring(1):error.dataPath;switch(error.keyword){case ConfigErrorKeywords.Required:customizedError={...error,message:formatMessage(errorStrings.requiredProperty,{dataPath,missingProperty:error.params.missingProperty})};break;case ConfigErrorKeywords.MinLength:customizedError={...error,message:formatMessage(errorStrings.minLength,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords.MinItems:customizedError={...error,message:formatMessage(errorStrings.minItems,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords.MaxItems:customizedError={...error,message:formatMessage(errorStrings.maxItems,{dataPath,limit:error.params.limit.toString()})};break;case ConfigErrorKeywords.Pattern:if(error.params.pattern==="\\w+"){customizedError={...error,message:formatMessage(errorStrings.whiteSpacePattern,{dataPath}),params:{}}}break;case ConfigErrorKeywords.AdditionalProperties:customizedError={...error,message:formatMessage(errorStrings.additionalProperty,{dataPath,additionalProperty:error.params.additionalProperty})};break;case ConfigErrorKeywords.Enum:customizedError={...error,message:formatMessage(errorStrings.enumValues,{dataPath,allowedValues:error.params.allowedValues.join(", ")})};break;case ConfigErrorKeywords.AnyOf:{let params=[];if(error.schemaPath==="#/properties/legend/anyOf"){params=WebChartJSONSchemas.definitions.WebChart.properties.legend.anyOf.map((schemaRef=>extractSchemaNameFromRefPath(schemaRef.$ref)))}customizedError={...error,params,message:formatMessage(errorStrings.anyOfValues,{dataPath,schemaOptions:params.join(", ")})};break}}return customizedError}))}function createStartingSchema(schema,schemaKey){return{...schema,$ref:`#/definitions/${schemaKey}`}}function generateValidatorFunction(){const validatorInstance=new ajv({allErrors:true});return async(input,seriesType)=>{let chartJSONSchema=WebChartJSONSchemas;if(seriesType===WebChartTypes$1.GaugeSeries){chartJSONSchema=createStartingSchema(WebChartJSONSchemas,"WebGaugeChart")}if(input?.dataSource===undefined){chartJSONSchema=createStartingSchema(WebChartJSONSchemas,"WebMapWebChart")}const validatorFunction=validatorInstance.compile(chartJSONSchema);validatorFunction(input);let errors=[];if(validatorFunction.errors!==null&&validatorFunction.errors!==undefined){errors=await customizeValidationErrors(validatorFunction.errors)}return errors}}generateValidatorFunction();const ActionModes={MonoSelection:"monoSelection",MultiSelection:"multiSelection",MultiSelectionWithCtrlKey:"multiSelectionWithCtrlKey",Zoom:"zoom",None:"none"};const CursorRange={MultiAxes:"multi-axes",XAxis:"x-axis",YAxis:"y-axis"};const RESTFieldType={Blob:"esriFieldTypeBlob",Date:"esriFieldTypeDate",Double:"esriFieldTypeDouble",Geometry:"esriFieldTypeGeometry",GlobalID:"esriFieldTypeGlobalID",GUID:"esriFieldTypeGUID",Integer:"esriFieldTypeInteger",OID:"esriFieldTypeOID",Raster:"esriFieldTypeRaster",Single:"esriFieldTypeSingle",SmallInteger:"esriFieldTypeSmallInteger",String:"esriFieldTypeString",XML:"esriFieldTypeXML"};const RESTStatisticType={Count:"count",Sum:"sum",Minimum:"min",Maximum:"max",Average:"avg",StandardDeviation:"stddev",Variance:"var",ContinuousPercentile:"percentile_cont",DiscretePercentile:"percentile_disc",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate",NoAggregation:"no_aggregation"};const RESTSimpleLineSymbolStyle={Dash:"esriSLSDash",DashDot:"esriSLSDashDot",DashDotDot:"esriSLSDashDotDot",Dot:"esriSLSDot",Null:"esriSLSNull",Solid:"esriSLSSolid"};const RESTHorizontalAlignment={Left:"left",Right:"right",Center:"center",Justify:"justify"};const RESTVerticalAlignment={Baseline:"baseline",Top:"top",Middle:"middle",Bottom:"bottom"};const RESTSymbolType={SLS:"esriSLS",SMS:"esriSMS",SFS:"esriSFS",PMS:"esriPMS",PFS:"esriPFS",TS:"esriTS"};const RESTRendererType={UniqueValue:"unique-value",Simple:"simple",ClassBreaks:"class-breaks",Heatmap:"heatmap",DotDensity:"dot-density",Dictionary:"dictionary",PieChart:"pie-chart"};const WebChartTypes={Chart:"chart",Text:"chartText",Overlay:"chartOverlay",Overlays:"chartOverlays",Legend:"chartLegend",CursorCrosshair:"cursorCrosshair",Axis:"chartAxis",GaugeAxisTick:"gaugeAxisTick",GaugeNeedle:"gaugeNeedle",CategoryAxisFormat:"category",NumberAxisFormat:"number",DateAxisFormat:"date",Guide:"chartGuide",ScatterSeries:"scatterSeries",PieSeries:"pieSeries",PieTick:"pieTick",GaugeSeries:"gaugeSeries",LineSeries:"lineSeries",BarSeries:"barSeries",HistogramSeries:"histogramSeries",BoxPlotSeries:"boxPlotSeries",ProbabilityPlotSeries:"probabilityPlotSeries",ProfileGraphSeries:"profileGraphSeries",ComboLineAndBarSeries:"comboLineAndBarSeries",Buffer:"buffer",SizePolicy:"sizeScale"};const WebChartDataTransformations={None:"none",Log:"logarithmic",Sqrt:"squareRoot"};const WebChartColoringPatterns={Single:"singleColor",Match:"colorMatch"};const WebChartStackedKinds={Side:"sideBySide",Stacked:"stacked",Stacked100:"stacked100"};const WebChartSortOrderKinds={Ascending:"ASC",Descending:"DESC"};const WebChartDataSourceTypes={Inline:"inline",Layer:"layer"};const StatisticsDefaults={statisticType:RESTStatisticType.Count,sortingOrder:WebChartSortOrderKinds.Ascending};const WebChartLineSmoothedKinds={Bezier:"bezier",MonotoneX:"monotoneX",MonotoneY:"monotoneY"};const WebChartTimeIntervalUnits={Seconds:"esriTimeUnitsSeconds",Minutes:"esriTimeUnitsMinutes",Hours:"esriTimeUnitsHours",Days:"esriTimeUnitsDays",Weeks:"esriTimeUnitsWeeks",Months:"esriTimeUnitsMonths",Years:"esriTimeUnitsYears"};const WebChartNullPolicyTypes={Null:"null",Zero:"zero",Interpolate:"interpolate"};const WebChartTimeAggregationTypes={Start:"equalIntervalsFromStartTime",End:"equalIntervalsFromEndTime"};const LabelValueTypes={OriginalValue:"originalValue",ModifiedValue:"modifiedValue"};const defaultPieFromFieldsName="arcgis_charts_pie_from_fields_name";const defaultPieFromFieldsValue="arcgis_charts_pie_from_fields_value";var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal$1||freeSelf||Function("return this")();var root$1=root;var Symbol$1=root$1.Symbol;var Symbol$2=Symbol$1;var objectProto$f=Object.prototype;var hasOwnProperty$d=objectProto$f.hasOwnProperty;var nativeObjectToString$1=objectProto$f.toString;var symToStringTag$1=Symbol$2?Symbol$2.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty$d.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString$1.call(value);if(unmasked){if(isOwn){value[symToStringTag$1]=tag}else{delete value[symToStringTag$1]}}return result}var objectProto$e=Object.prototype;var nativeObjectToString=objectProto$e.toString;function objectToString(value){return nativeObjectToString.call(value)}var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol$2?Symbol$2.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&typeof value=="object"}var symbolTag$3="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag$3}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray=Array.isArray;var isArray$1=isArray;var INFINITY$1=1/0;var symbolProto$2=Symbol$2?Symbol$2.prototype:undefined,symbolToString=symbolProto$2?symbolProto$2.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray$1(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY$1?"-0":result}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function identity$1(value){return value}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag$2||tag==genTag$1||tag==asyncTag||tag==proxyTag}var coreJsData=root$1["__core-js_shared__"];var coreJsData$1=coreJsData;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto$1=Function.prototype;var funcToString$1=funcProto$1.toString;function toSource(func){if(func!=null){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto$d=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty$c=objectProto$d.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var WeakMap=getNative(root$1,"WeakMap");var WeakMap$1=WeakMap;var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();var baseCreate$1=baseCreate;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function constant(value){return function(){return value}}var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var defineProperty$1=defineProperty;var baseSetToString=!defineProperty$1?identity$1:function(func,string){return defineProperty$1(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};var baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);var setToString$1=setToString;function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER$1=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER$1:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty$1){defineProperty$1(object,key,{configurable:true,enumerable:true,value,writable:true})}else{object[key]=value}}function eq(value,other){return value===other||value!==value&&other!==other}var objectProto$c=Object.prototype;var hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty$b.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function baseRest(func,start){return setToString$1(overRest(func,start,identity$1),func+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}var objectProto$b=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$b;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag$3="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag$3}var objectProto$a=Object.prototype;var hasOwnProperty$a=objectProto$a.hasOwnProperty;var propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$a.call(value,"callee")&&!propertyIsEnumerable$1.call(value,"callee")};var isArguments$1=isArguments;function stubFalse(){return false}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2;var Buffer$2=moduleExports$2?root$1.Buffer:undefined;var nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]";var arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=true;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal$1.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var isTypedArray$1=isTypedArray;var objectProto$9=Object.prototype;var hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray$1(value),isArg=!isArr&&isArguments$1(value),isBuff=!isArr&&!isArg&&isBuffer$1(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray$1(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$9.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype;var hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys$1(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$8.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}var objectProto$7=Object.prototype;var hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty$7.call(object,key)))){result.push(key)}}return result}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray$1(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var nativeCreate=getNative(Object,"create");var nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED$2="__lodash_hash_undefined__";var objectProto$6=Object.prototype;var hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate$1){var result=data[key];return result===HASH_UNDEFINED$2?undefined:result}return hasOwnProperty$6.call(data,key)?data[key]:undefined}var objectProto$5=Object.prototype;var hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate$1?data[key]!==undefined:hasOwnProperty$5.call(data,key)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate$1&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");var Map$2=Map$1;function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,(function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key}));var cache=result.cache;return result}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped((function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)}));return result}));var stringToPath$1=stringToPath;function toString(value){return value==null?"":baseToString(value)}function castPath(value,object){if(isArray$1(value)){return value}return isKey(value,object)?[value]:stringToPath$1(toString(value))}var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:undefined;function isFlattenable(value){return isArray$1(value)||isArguments$1(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var getPrototype=overArg(Object.getPrototypeOf,Object);var getPrototype$1=getPrototype;function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map$2||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer$1=moduleExports?root$1.Buffer:undefined,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$4=Object.prototype;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var nativeGetSymbols$1=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols$1?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols$1(object),(function(symbol){return propertyIsEnumerable.call(object,symbol)}))};var getSymbols$1=getSymbols;function copySymbols(source,object){return copyObject(source,getSymbols$1(source),object)}var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols$1(object));object=getPrototype$1(object)}return result};var getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn$1(source),object)}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray$1(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols$1)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn$1)}var DataView=getNative(root$1,"DataView");var DataView$1=DataView;var Promise$1=getNative(root$1,"Promise");var Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");var Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]";var dataViewTag$3="[object DataView]";var dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1);var getTag=baseGetTag;if(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag$2?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var objectProto$3=Object.prototype;var hasOwnProperty$4=objectProto$3.hasOwnProperty;function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty$4.call(array,"index")){result.index=array.index;result.input=array.input}return result}var Uint8Array$1=root$1.Uint8Array;var Uint8Array$1$1=Uint8Array$1;function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array$1$1(result).set(new Uint8Array$1$1(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}var symbolProto$1=Symbol$2?Symbol$2.prototype:undefined,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf$1?Object(symbolValueOf$1.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]";var arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag$2:return cloneArrayBuffer(object);case boolTag$2:case dateTag$2:return new Ctor(+object);case dataViewTag$2:return cloneDataView(object,isDeep);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(object,isDeep);case mapTag$4:return new Ctor;case numberTag$2:case stringTag$2:return new Ctor(object);case regexpTag$2:return cloneRegExp(object);case setTag$4:return new Ctor;case symbolTag$2:return cloneSymbol(object)}}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate$1(getPrototype$1(object)):{}}var mapTag$3="[object Map]";function baseIsMap(value){return isObjectLike(value)&&getTag$1(value)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap;var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;var isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(value){return isObjectLike(value)&&getTag$1(value)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet;var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;var isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4;var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG$1,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG$1;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray$1(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag$1(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer$1(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag$1||tag==argsTag$1||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet$1(value)){value.forEach((function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))}))}else if(isMap$1(value)){value.forEach((function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))}))}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,(function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}));return result}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$5,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var arrStacked=stack.get(array);var othStacked=stack.get(other);if(arrStacked&&othStacked){return arrStacked==other&&othStacked==array}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG$3?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,(function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}}))){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach((function(value,key){result[++index]=[key,value]}));return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach((function(value){result[++index]=value}));return result}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]";var symbolProto=Symbol$2?Symbol$2.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array$1$1(object),new Uint8Array$1$1(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag$1:var convert=mapToArray;case setTag$1:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$4;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$2;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}var COMPARE_PARTIAL_FLAG$3=1;var objectProto$2=Object.prototype;var hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$3,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$3.call(other,key))){return false}}var objStacked=stack.get(object);var othStacked=stack.get(other);if(objStacked&&othStacked){return objStacked==other&&othStacked==object}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var COMPARE_PARTIAL_FLAG$2=1;var argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]";var objectProto$1=Object.prototype;var hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray$1(object),othIsArr=isArray$1(other),objTag=objIsArr?arrayTag:getTag$1(object),othTag=othIsArr?arrayTag:getTag$1(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer$1(object)){if(!isBuffer$1(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray$1(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$2)){var objIsWrapped=objIsObj&&hasOwnProperty$2.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty$2.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray$1(object)||isArguments$1(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity$1}if(typeof value=="object"){return isArray$1(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();var baseFor$1=baseFor;function baseForOwn(object,iteratee){return object&&baseFor$1(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);var baseEach$1=baseEach;function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach$1(collection,(function(value,key,collection){result[++index]=iteratee(value,key,collection)}));return result}var mapTag="[object Map]",setTag="[object Set]";var objectProto=Object.prototype;var hasOwnProperty$1=objectProto.hasOwnProperty;function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray$1(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer$1(value)||isTypedArray$1(value)||isArguments$1(value))){return!value.length}var tag=getTag$1(value);if(tag==mapTag||tag==setTag){return!value.size}if(isPrototype(value)){return!baseKeys(value).length}for(var key in value){if(hasOwnProperty$1.call(value,key)){return false}}return true}function isEqual(value,other){return baseIsEqual(value,other)}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}function baseOrderBy(collection,iteratees,orders){if(iteratees.length){iteratees=arrayMap(iteratees,(function(iteratee){if(isArray$1(iteratee)){return function(value){return baseGet(value,iteratee.length===1?iteratee[0]:iteratee)}}return iteratee}))}else{iteratees=[identity$1]}var index=-1;iteratees=arrayMap(iteratees,baseUnary(baseIteratee));var result=baseMap(collection,(function(value,key,collection){var criteria=arrayMap(iteratees,(function(iteratee){return iteratee(value)}));return{criteria,index:++index,value}}));return baseSortBy(result,(function(object,other){return compareMultiple(object,other,orders)}))}var sortBy=baseRest((function(collection,iteratees){if(collection==null){return[]}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[]}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]]}return baseOrderBy(collection,baseFlatten(iteratees,1),[])}));var sortBy$1=sortBy;const InternalConfigFields={fillColor:"_esriFillColor",fillOpacity:"_esriFillOpacity",fillStyle:"_esriFillStyle",lineColor:"_esriLineColor",lineOpacity:"_esriLineOpacity",lineWidth:"_esriLineWidth",lineStyle:"_esriLineStyle",outlineColor:"_esriOutline",outlineWidth:"_esriOutlineWidth",outlineOpacity:"_esriOutlineOpacity",outlineStyle:"_esriOutlineStyle",markerSize:"_esriMarkerSize"};const ChartDefaults={aria:{defaultChartItemRole:"figure"},title:{marginBottom:8,wrap:true},subtitle:{marginBottom:10,wrap:true},rotated:false,legendProperties:{legendLabels:{marginLeft:5,marginRight:5,truncate:false,applyOnClones:true,wrap:true,maxWidth:200},valueLabels:{wrap:true,maxWidth:200},legendTitle:{wrap:true,maxWidth:220,marginLeft:10,marginRight:10,marginTop:10},legendMarkersSize:14,legendLabelReducedOpacity:.5,rectangleMarkerRadius:3,roundedMarkerRadius:12,legendPaddingRightWithScrollbarVisible:10,maxHeight:100,marginTop:2,marginBottom:2,marginLeft:0,marginRight:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},footer:{wrap:true,horizontalCenter:RESTHorizontalAlignment.Center,verticalCenter:RESTVerticalAlignment.Middle,align:RESTHorizontalAlignment.Center},axisLabel:{rotation:0,align:RESTHorizontalAlignment.Center,horizontalCenter:RESTHorizontalAlignment.Center,verticalCenter:RESTVerticalAlignment.Top,dy:5,paddingTop:5,paddingRight:5,paddingLeft:5,maxWidth:NaN},axisTickLength:5,rotatedAxisLabel:{rotation:-45,horizontalCenter:RESTHorizontalAlignment.Left,verticalCenter:RESTVerticalAlignment.Bottom,dy:6,paddingTop:5,paddingLeft:0,paddingRight:5},histogramAxisLabel:{rotation:0,horizontalCenter:RESTHorizontalAlignment.Center,verticalCenter:RESTVerticalAlignment.Middle,dy:0,dx:0,paddingLeft:3,paddingRight:3},xAxisTitleLabel:{align:RESTHorizontalAlignment.Center,valign:RESTVerticalAlignment.Middle,rotation:0,fontSize:10,wrap:true},yAxisTitleLabel:{align:RESTHorizontalAlignment.Center,valign:RESTVerticalAlignment.Middle,rotation:270,wrap:true},titleLabel:{align:RESTHorizontalAlignment.Center,wrap:true},horizontalSurfaceGuideLabels:{horizontalCenter:RESTHorizontalAlignment.Right,align:RESTHorizontalAlignment.Right,verticalCenter:RESTVerticalAlignment.Middle,wrap:true},horizontalLineGuideLabels:{horizontalCenter:RESTHorizontalAlignment.Right,align:RESTHorizontalAlignment.Right,verticalCenter:RESTVerticalAlignment.Top,wrap:true},verticalSurfaceGuideLabels:{horizontalCenter:RESTHorizontalAlignment.Center,verticalCenter:RESTVerticalAlignment.Top,valign:RESTVerticalAlignment.Top},verticalLineGuideLabels:{horizontalCenter:RESTHorizontalAlignment.Right,verticalCenter:RESTVerticalAlignment.Bottom,valign:RESTVerticalAlignment.Top,wrap:true,rotation:90},guideAbove:false,cursorCrosshair:{style:{type:RESTSymbolType.SLS,style:RESTSimpleLineSymbolStyle.Dash,color:[0,0,0,102],width:1},horizontalLineVisible:false,verticalLineVisible:false},gauge:{innerRadius:80,radius:95,startAngle:-180,endAngle:180,innerLabelToInnerChartRatio:.5,axisLabelToInnerChartRatio:.13,innerLabelAutoMinFontSize:14,innerLabelAutoMaxFontSize:100,axisLabelAutoMinFontSize:14,axisLabelAutoMaxFontSize:40,gaugeMinGridDistance:1,axisMinimum:0,axisMaximum:100,numberOfLabelIntervals:5,numberOfTicksBetweenTwoLabels:4,maximumNumberOfLabelIntervals:24,paddingTop:10,paddingBottom:10,paddingRight:0,paddingLeft:0},gaugeTicksLength:7,gaugeInnerLabel:{horizontalCenter:RESTHorizontalAlignment.Center,verticalCenter:RESTVerticalAlignment.Middle},gaugeNeedle:{startWidth:10,endWidth:1,innerRadius:25,displayPin:false},gaugeFirstLabelId:"arcgis_charts_gauge_first_label",gaugeLastLabelId:"arcgis_charts_gauge_last_label",headerContainer:{layout:"vertical",width:"100%",paddingBottom:5},footerContainer:{layout:"vertical",width:"100%",paddingTop:5,paddingBottom:15},paddingMinSize:0,marginMinSize:0,chartPaddingMinSize:7,chartPaddingRightWhenLegendNotOnRight:15,chartAndLegendContainer:{paddingTop:0},chartContainer:{paddingBottom:0,paddingTop:15},chartContainerPaddingTopWhenRotated:5,dataLabelInitialize:{strokeWidth:0,applyOnClones:true},dataLabel:{align:RESTHorizontalAlignment.Center,horizontalCenter:RESTHorizontalAlignment.Center,valign:RESTVerticalAlignment.Bottom,verticalCenter:RESTVerticalAlignment.Top,dy:-3},dataLabelRotated:{align:RESTHorizontalAlignment.Right,horizontalCenter:RESTHorizontalAlignment.Right,valign:RESTVerticalAlignment.Middle,verticalCenter:RESTVerticalAlignment.Middle,dx:2},dataLabelStackedRotated:{align:RESTHorizontalAlignment.Center,horizontalCenter:RESTHorizontalAlignment.Center,valign:RESTVerticalAlignment.Middle,verticalCenter:RESTVerticalAlignment.Middle},dataLabelStackedNonRotated:{align:RESTHorizontalAlignment.Center,horizontalCenter:RESTHorizontalAlignment.Center,valign:RESTVerticalAlignment.Middle,verticalCenter:RESTVerticalAlignment.Middle},dataLabelNegative:{paddingTop:5,paddingRight:5},scatterPlotSeries:{strokeOpacity:0,regressionPrecision:7,r2:NaN,trendLinePoints:[{},{}]},histogramSeries:{normalDistribNumberOfPoints:100},lineSeries:{strokeWidth:2,lineSmoothed:false,lineSmoothedKind:WebChartLineSmoothedKinds.Bezier,showArea:false,areaOpacity:.25,markerVisible:true,rotated:false,stackedType:WebChartStackedKinds.Side,stackNegativeValuesToBaseline:true,marker:{markerSize:4,markerStrokeWidth:2}},buffer:false,elementLimitForSmoothRendering:1e3,defaultStatParameterValue:.5,pieChart:{dataLabels:{maxWidth:100,wrap:false},dataLabelsOffset:10,chartRadius:80,chartOptimizedRadius:100,innerRadius:pieChartInnerRadius,min:-90,max:270,displayNumericValueOnLegend:false,displayNumericValueOnDataLabel:true,displayNumericValueOnTooltip:true,displayPercentageOnLegend:false,displayPercentageOnDataLabel:false,displayPercentageOnTooltip:true,sliceGrouping:{sliceId:pieChartSpecialSlicesId.defaultGroupOfSlicesId,percentageThreshold:0,fillSymbol:{type:RESTSymbolType.SFS,color:[210,210,210,255*reducedOpacity]}},paddingWithLabels:100,defaultPadding:0,alignDataLabels:false,ticksOpacity:1,minimumSize:20,technicalFieldSliceId:"arcgis_charts_slice_id",technicalFieldSlicePercent:"arcgis_charts_slice_percent",technicalFieldGroupedSlices:"arcgis_charts_grouped_slices"},pieSliceCustomLabelName:"customLabel",yAxisLabelMaxWidth:100,axisLabelPadding:1.5,categoryAxisLabelPadding:3,seriesSort:WebChartSortOrderKinds.Ascending,technicalSortingFieldBySum:"arcgis_charts_category_sum",technicalSortingFieldByPercent:"arcgis_charts_category_first_series_percent",color:[0,0,0,255],chartEllipsis:"...",backgroundColor:[255,255,255,255],xAxisMinGridDistance:120,yAxisMinGridDistance:40,staggerMinGridDistance:40,shortestMinGridDistance:20,lineWidth:1,loaderRotationSpeed:400,loaderIntervalTimeout:400,loaderBackground:[255,255,255,230],loaderLabelFontSize:20,selectionTheme:{selectedElementsTheme:{elementOutlineColor:[0,255,255,255],elementOutlineWidth:5}},columnTooltipPosition:"pointer",markerTooltipPosition:"fixed",patternLineProperties:{width:5,height:5,strokeWidth:1},patternRectProperties:{rectWidth:9,rectHeight:9,width:10,height:10,strokeWidth:.3,fillOpacity:0},originalCategoryValue:"arcgis_charts_original_category_value",originalDateValue:"arcgis_charts_original_date_value",typeOrDomainFieldName:"arcgis_charts_type_domain_field_name",typeOrDomainIdValue:"arcgis_charts_type_domain_id_value",dateBinningRange:"arcgis_charts_bin_range",dateBinModel:"arcgis_charts_bin_model",xAxisField:"arcgis_charts_axis_field",nullValue:"arcgis_charts_null",queryCalculatedExpr:["EXPR_1","Expr1","expr1","EXPR1"],queryMaxFloatPrecision:10,dateFormatUTC:{timeZone:"UTC",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:true},rendererOtherValue:"arcgisChartsrendererOtherValue",rendererSymbolField:"arcgis_charts_renderer_symbol",scatterPlotAggregationFields:{dataContextXMinField:"arcgis_charts_xmin",dataContextXMaxField:"arcgis_charts_xmax",dataContextYMinField:"arcgis_charts_ymin",dataContextYMaxField:"arcgis_charts_ymax",dataContextCountDistinctX:"distinctX",dataContextCountDistinctY:"distinctY",queryNumberOfFeatures:"numberOfFeatures",queryNumberOfAggregatedFeatures:"numberOfAggregatedFeatures"},dataTooltipVisible:true,dataTooltipStyle:{outline:{type:RESTSymbolType.SLS,color:[255,255,255,255],width:1}},dataTooltipStyleReversed:{color:[255,255,255,255],outline:{type:RESTSymbolType.SLS,width:3}},tooltipWidth:300,axisLabelOveredOpacity:.5,generalFontSize:10,actionMode:ActionModes.MultiSelectionWithCtrlKey,debounceTime:100,chartDefaultPaddingRight:0,htmlEmptyContent:"<p></p>",boxPlot:{boxPlotCategory:"arcgis_charts_box_plot_category",boxPlotOutliersSuffix:"_arcgis_charts_outliers",boxPlotOutliersVisibility:false,boxPlotStandardizeValuesVisibility:false,boxPlotOutliersSize:4,boxPlotLineWidth:2,boxPlotOutlierId:"is_arcgis_charts_outlier",boxPlotWhiskersColor:"#999999",boxPlotTooltipLabelWidth:250},binTemporalData:true,overlayId:{scatterPlotTrendLine:"arcgis_charts_scatter_plot_trendline"},options:{hideEmptySeriesInLegend:true}};function getComputedConfigFieldKeys(props){const{y,keys}=props;let suffix="";if(y!==undefined)suffix=`_${y}`;return{fillColor:`${keys?.fillColor??InternalConfigFields.fillColor}${suffix}`,fillOpacity:`${keys?.fillOpacity??InternalConfigFields.fillOpacity}${suffix}`,fillStyle:`${keys?.fillStyle??InternalConfigFields.fillStyle}${suffix}`,lineColor:`${keys?.lineColor??InternalConfigFields.lineColor}${suffix}`,lineOpacity:`${keys?.lineOpacity??InternalConfigFields.lineOpacity}${suffix}`,lineWidth:`${keys?.lineWidth??InternalConfigFields.lineWidth}${suffix}`,lineStyle:`${keys?.lineStyle??InternalConfigFields.lineStyle}${suffix}`,outlineColor:`${keys?.outlineColor??InternalConfigFields.outlineColor}${suffix}`,outlineWidth:`${keys?.outlineWidth??InternalConfigFields.outlineWidth}${suffix}`,outlineOpacity:`${keys?.outlineOpacity??InternalConfigFields.outlineOpacity}${suffix}`,outlineStyle:`${keys?.outlineStyle??InternalConfigFields.outlineStyle}${suffix}`,markerSize:`${keys?.markerSize??InternalConfigFields.markerSize}${suffix}`}}function isColorMatchAllowed(props){const{seriesConfig,renderer}=props;const seriesType=getSeriesType(seriesConfig);const chartSubType=getChartSubType(seriesConfig);const isTimeBinningSeries=isSeriesUsingTimeBinning({seriesConfig:seriesConfig[0]});const rendererType=renderer?.type;let allowed=false;switch(rendererType){case RESTRendererType.Simple:allowed=seriesType===WebChartTypes.HistogramSeries||seriesType===WebChartTypes.ScatterSeries||chartSubType===ChartSubType.BarAndLineMonoField||chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.BarAndLineNoAggregation&&seriesConfig.length===1&&isTimeBinningSeries===false;break;case RESTRendererType.UniqueValue:{const rendererField=renderer.field;const splitByField=getSplitByField(seriesConfig[0].query?.where);const{x}=seriesConfig[0];allowed=(chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation||chartSubType===ChartSubType.BarAndLineSplitBy)&&rendererField===splitByField||(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.PieFromCategory||chartSubType===ChartSubType.BarAndLineMonoField)&&rendererField===x||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.PieNoAggregation||seriesType===WebChartTypes.ScatterSeries}break;case RESTRendererType.PieChart:allowed=isPieChartFromFields(seriesConfig)===true||chartSubType===ChartSubType.BarAndLineFromFields||chartSubType===ChartSubType.BarAndLineMultiFields||chartSubType===ChartSubType.BarAndLineMonoField||chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory;break;case RESTRendererType.ClassBreaks:allowed=seriesType===WebChartTypes.ScatterSeries||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.PieNoAggregation;break;case RESTRendererType.Dictionary:case RESTRendererType.DotDensity:case RESTRendererType.Heatmap:allowed=false;break}return allowed}function updateDataItemWithRendererSymbol(props){const{symbolField,dataItem,useReducedOpacity,rendererSymbol}=props;const modifiedRendererSymbol={...rendererSymbol};if(modifiedRendererSymbol.color!==undefined&&useReducedOpacity===true){modifiedRendererSymbol.color[3]=reducedOpacity*255}dataItem[symbolField]=modifiedRendererSymbol}function computePieChartRendererColor(props){const{renderer,seriesConfig,dataItem,useReducedOpacity}=props;let rendererSymbol;const seriesType=getSeriesType(seriesConfig);const chartSubType=getChartSubType(seriesConfig);const pieFromFields=isPieChartFromFields(seriesConfig);renderer.attributes.forEach((attribute=>{const{color:rendererColor}=attribute;let{field}=attribute;if((seriesType===WebChartTypes.BarSeries||seriesType===WebChartTypes.LineSeries||seriesType===WebChartTypes.ComboLineAndBarSeries)&&chartSubType!==ChartSubType.BarAndLineFromFields){field=seriesConfig.find((s=>s.query?.outStatistics?.[0]?.onStatisticField===field))?.y??""}const pieChartCompatible=seriesType===WebChartTypes.PieSeries&&pieFromFields===true&&field===dataItem[defaultPieFromFieldsName];const barLineChartCompatible=seriesType!==WebChartTypes.PieSeries&&(chartSubType!==ChartSubType.BarAndLineFromFields||field===dataItem[ChartDefaults.originalCategoryValue]);if(pieChartCompatible===true||barLineChartCompatible===true){const rgbaColor=rendererColor.toRgba();rgbaColor[3]*=255;rendererSymbol={type:RESTSymbolType.SMS,color:rgbaColor};updateDataItemWithRendererSymbol({dataItem,symbolField:chartSubType===ChartSubType.BarAndLineFromFields||pieFromFields===true?ChartDefaults.rendererSymbolField:`${ChartDefaults.rendererSymbolField}_${field}`,rendererSymbol,useReducedOpacity})}}));return rendererSymbol}async function computeRendererSymbol(props){const{seriesConfig,dataItem,queryObject,chartRenderer}=props;let rendererSymbol;const layer=chartRenderer!==undefined?{...getLayerFromQueryObject(queryObject),renderer:rendererJsonUtils__namespace.fromJSON(chartRenderer)}:getLayerFromQueryObject(queryObject);const useReducedOpacity=chartRenderer===undefined;if(isColorMatchAllowed({seriesConfig,renderer:layer?.renderer})===true){if(layer?.renderer?.type===RESTRendererType.PieChart){rendererSymbol=computePieChartRendererColor({renderer:layer?.renderer,seriesConfig,dataItem,useReducedOpacity})}else{const colorFieldToAttributes=new Map;const chartSubType=getChartSubType(seriesConfig);if(chartSubType===ChartSubType.BarAndLineSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy){const splitByField=getSplitByField(seriesConfig[0].query?.where);seriesConfig.forEach((currentSeriesConfig=>{const splitByValue=getSplitByValue({where:currentSeriesConfig.query?.where,normalize:true,keepSurroundingQuotes:false,escape:false});if("y"in currentSeriesConfig){const suffix=chartSubType===ChartSubType.BarAndLineSplitBy?currentSeriesConfig.y:getSplitByValue({where:currentSeriesConfig.query?.where});colorFieldToAttributes.set(`${ChartDefaults.rendererSymbolField}_${suffix}`,{...dataItem,[splitByField]:splitByValue})}}))}else{colorFieldToAttributes.set(ChartDefaults.rendererSymbolField,{...dataItem,[seriesConfig[0].x]:dataItem?.[ChartDefaults.typeOrDomainIdValue]??dataItem?.[ChartDefaults.originalCategoryValue]})}try{const colorFieldToAttributesArray=Array.from(colorFieldToAttributes.entries());for(let i=0;i<colorFieldToAttributesArray.length;i+=1){const[symbolField,attributes]=colorFieldToAttributesArray[i];const mockGraphic=new Graphic__default["default"]({layer,attributes});rendererSymbol=(await symbolUtils.getDisplayedSymbol(mockGraphic)).toJSON();if(chartRenderer===undefined){delete rendererSymbol.style;delete rendererSymbol.outline}updateDataItemWithRendererSymbol({dataItem,symbolField,rendererSymbol,useReducedOpacity})}}catch(e){}}}return rendererSymbol}async function completeDataWithRendererSymbol(props){const{data,queryObject,chartConfig}=props;const computeRendererSymbolPromises=[];for(let i=0;i<data.length;i+=1){const dataItem=data[i];computeRendererSymbolPromises.push(computeRendererSymbol({seriesConfig:chartConfig.series,dataItem,queryObject,chartRenderer:chartConfig.chartRenderer}))}await Promise.all(computeRendererSymbolPromises);return data}function getBoxPlotRendererColorKey(props){const{seriesConfig,dataItem,chartSubType,rendererType}=props;const defaultColorKey=ChartDefaults.rendererSymbolField;let colorKey;let shouldBeUndefined=true;let suffix="";if(rendererType===RESTRendererType.UniqueValue){switch(chartSubType){case ChartSubType.BoxPlotMonoFieldAndCategory:shouldBeUndefined=false;break;case ChartSubType.BoxPlotMonoFieldAndSplitBy:case ChartSubType.BoxPlotMultiFieldsAndSplitBy:case ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy:suffix=getSplitByValue({where:seriesConfig.query?.where});shouldBeUndefined=false;break}}else if(rendererType===RESTRendererType.PieChart){switch(chartSubType){case ChartSubType.BoxPlotMultiFields:suffix=dataItem[ChartDefaults.boxPlot.boxPlotCategory];shouldBeUndefined=false;break;case ChartSubType.BoxPlotMonoField:case ChartSubType.BoxPlotMonoFieldAndCategory:case ChartSubType.BoxPlotMultiFieldsAndCategory:suffix=seriesConfig.y;shouldBeUndefined=false;break}}else if(rendererType===RESTRendererType.Simple){switch(chartSubType){case ChartSubType.BoxPlotMonoField:case ChartSubType.BoxPlotMultiFields:case ChartSubType.BoxPlotMonoFieldAndCategory:shouldBeUndefined=false;break}}if(shouldBeUndefined===false){colorKey=isEmpty(suffix)===false?`${defaultColorKey}_${suffix}`:defaultColorKey}return colorKey}function getRendererElementSymbol(props){const{dataItem,seriesConfig,chartSubType,rendererType,yField}=props;const seriesType=getSeriesType([seriesConfig]);const isColorMatch=seriesConfig.colorType===WebChartColoringPatterns.Match;let rendererSymbol;if(isColorMatch===true&&dataItem!==undefined){if(seriesType===WebChartTypes.BoxPlotSeries){const symbolKey=getBoxPlotRendererColorKey({seriesConfig,chartSubType,dataItem,rendererType:rendererType??{}});if(symbolKey!==undefined)rendererSymbol=dataItem[symbolKey]}else if(yField!==undefined&&(chartSubType===ChartSubType.BarAndLineSplitBy||chartSubType===ChartSubType.BarAndLineMultiFields)){rendererSymbol=dataItem?.[`${ChartDefaults.rendererSymbolField}_${yField}`]}else{rendererSymbol=dataItem?.[ChartDefaults.rendererSymbolField]}}return rendererSymbol}function hasTransformationTypeChanged(oldSeries,newSeries){return oldSeries[0].dataTransformationType!==newSeries[0].dataTransformationType}function hasBinCountChanged(oldSeries,newSeries){return oldSeries[0].binCount!==newSeries[0].binCount}function isSeriesTypeChangeAllowed(oldConfig,newConfig){let allowed=true;const oldChartType=getSeriesType(oldConfig?.series);const newChartType=getSeriesType(newConfig?.series);if(oldChartType!==newChartType){allowed=oldChartType===WebChartTypes.ComboLineAndBarSeries&&(newChartType===WebChartTypes.BarSeries||newChartType===WebChartTypes.LineSeries)||newChartType===WebChartTypes.ComboLineAndBarSeries&&(oldChartType===WebChartTypes.BarSeries||oldChartType===WebChartTypes.LineSeries)||oldChartType===WebChartTypes.BarSeries&&newChartType===WebChartTypes.LineSeries||oldChartType===WebChartTypes.LineSeries&&newChartType===WebChartTypes.BarSeries}return allowed}function isTimeIntervalInfoComplete(timeIntervalUnits,timeIntervalSize){return timeIntervalUnits!==undefined&&timeIntervalSize!==undefined&&timeIntervalSize>0}function isStylingIndividualBoxNeeded(chartSubType,rendererType){let stylingIndividualSprite=false;switch(rendererType){case RESTRendererType.UniqueValue:stylingIndividualSprite=chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory;break;case RESTRendererType.PieChart:stylingIndividualSprite=chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields;break}return stylingIndividualSprite}function isStylingIndividualColumnNeeded(props){const{chartConfig,chartData,chartSubType,renderer}=props;let stylingIndividualSprite=false;const rendererType=renderer?.type;if(isColorMatchAllowed({seriesConfig:chartConfig.series,renderer})===true&&(rendererType===RESTRendererType.UniqueValue&&(chartSubType===ChartSubType.BarAndLineMonoField||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation)||rendererType===RESTRendererType.PieChart&&(chartSubType===ChartSubType.BarAndLineFromFields||chartSubType===ChartSubType.BarAndLineMonoField))){const uniqueListOfColors=new Set(chartData.map((dataItem=>{const fillColorKey=Object.keys(dataItem).find((dataItemProp=>dataItemProp.includes(ChartDefaults.rendererSymbolField)))??"";return JSON.stringify(dataItem[fillColorKey]?.color)})).filter((color=>color!==undefined)));stylingIndividualSprite=uniqueListOfColors.size>1}return stylingIndividualSprite}function isStylingIndividualInlineChartSpriteNeeded(chartConfig){return chartConfig.series[0].colorType===WebChartColoringPatterns.Match&&chartConfig.dataSource.type===WebChartDataSourceTypes.Inline&&Object.keys(chartConfig.dataSource.configFields??{}).length>0}function isStylingIndividualSpriteNeeded(props){const{chartData,chartConfig,queryObject}=props;let stylingIndividualSprite=false;if(chartConfig!==undefined){if(chartConfig.dataSource.type===WebChartDataSourceTypes.Inline){stylingIndividualSprite=isStylingIndividualInlineChartSpriteNeeded(chartConfig)}else if(queryObject!==undefined){const{chartRenderer}=chartConfig;const layer=chartRenderer!==undefined?{...getLayerFromQueryObject(queryObject),renderer:rendererJsonUtils__namespace.fromJSON(chartRenderer)}:getLayerFromQueryObject(queryObject);const rendererType=layer?.renderer?.type;const chartSubType=getChartSubType(chartConfig.series);const chartType=getSeriesType(chartConfig.series);switch(chartType){case WebChartTypes.BoxPlotSeries:stylingIndividualSprite=isStylingIndividualBoxNeeded(chartSubType,rendererType);break;case WebChartTypes.BarSeries:stylingIndividualSprite=isStylingIndividualColumnNeeded({chartConfig,chartData,renderer:layer?.renderer,chartSubType});break}}}return stylingIndividualSprite}function getSeriesColorList(props){const{chartConfig,queryObject,chartData}=props;let colorList=[];const chartSubType=getChartSubType(chartConfig.series);const{colorType}=chartConfig.series[0];const layer=getLayerFromQueryObject(queryObject);const renderer=chartConfig.chartRenderer??layer?.renderer?.toJSON();const multipleColorsToApply=isStylingIndividualSpriteNeeded({chartConfig,chartData});if(multipleColorsToApply===false||colorType===WebChartColoringPatterns.Single){colorList=chartConfig.series.map(((currentSeries,seriesIndex)=>{const seriesType=getSeriesType([currentSeries]);const{y}=currentSeries;let seriesUniqueColor;if(seriesType===WebChartTypes.BarSeries||seriesType===WebChartTypes.LineSeries){switch(seriesType){case WebChartTypes.BarSeries:seriesUniqueColor=currentSeries.fillSymbol?.color;break;case WebChartTypes.LineSeries:seriesUniqueColor=currentSeries.lineSymbol?.color;break;default:return undefined}if(colorType===WebChartColoringPatterns.Match){seriesUniqueColor=getRendererElementSymbol({dataItem:chartData[0],seriesConfig:currentSeries,chartSubType,rendererType:renderer?.type,yField:y})?.color}else if(seriesUniqueColor===undefined){seriesUniqueColor=getOneRampColor({colorIndex:seriesIndex})}}return seriesUniqueColor})).filter((color=>color!==undefined))}return colorList}function isPieChartGroupOfSlicesUpdateNeeded(oldSeries,newSeries){return oldSeries[0]?.sliceGrouping?.percentageThreshold!==newSeries[0]?.sliceGrouping?.percentageThreshold}function getGroupedSlicesDataItem(props){const{groupOfSlicesDataContext,chartData}=props;const dataContext=groupOfSlicesDataContext??chartData?.find((dataItem=>dataItem[pieChartSpecialSlicesId.defaultGroupOfSlicesId]===true));const groupOfSlices=dataContext?.[ChartDefaults.pieChart.technicalFieldGroupedSlices];return groupOfSlices}function completeDataExceedLimitInfo(props){const{dataInfo,seriesType,subError}=props;dataInfo.valid=false;switch(seriesType){case WebChartTypes.BarSeries:dataInfo.invalidType=DataWarningKeywords.BarElementExceedsLimit;break;case WebChartTypes.LineSeries:dataInfo.invalidType=DataWarningKeywords.LineChartExceedsLimit;break;case WebChartTypes.PieSeries:dataInfo.invalidType=DataWarningKeywords.PieChartExceedsLimit;break;case WebChartTypes.GaugeSeries:dataInfo.invalidType=DataWarningKeywords.GaugeExceedsLimit;break;case WebChartTypes.BoxPlotSeries:if(subError?.outlierLimit===true){dataInfo.invalidType=DataWarningKeywords.BoxPlotOutliersExceedsLimit}else{dataInfo.invalidType=DataWarningKeywords.BoxPlotExceedsLimit}break}}function completeDataUnsupportedPieInfo(dataInfo,invalidType){dataInfo.valid=false;dataInfo.invalidType=invalidType}async function fetchErrorsStrings(locale=getLocaleInfo().locale){let strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-42cec424-bc7e1356-247074df"],resolve,reject)}));switch(locale){case SupportedLocales.Arabic:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ar-085faa5e-c91daa7f-f68fd017"],resolve,reject)}));break;case SupportedLocales.Bosnian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bs-093d8f6b-2d5a8217-5813d80a"],resolve,reject)}));break;case SupportedLocales.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.bg-a5cfffa9-ad142d27-4e207535"],resolve,reject)}));break;case SupportedLocales.Catalan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ca-ba444952-7d48ff3d-82a7c2fb"],resolve,reject)}));break;case SupportedLocales.Czech:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.cs-4def7ec5-300e06bc-c14d19aa"],resolve,reject)}));break;case SupportedLocales.Danish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.da-ac782f53-b3ab78f8-a0a54528"],resolve,reject)}));break;case SupportedLocales.German:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.de-21a09657-cff37c0a-acba69aa"],resolve,reject)}));break;case SupportedLocales.Greek:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.el-2beac6be-0bb1b366-3dddf5a5"],resolve,reject)}));break;case SupportedLocales.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.en-US-0477e621-5f80df5c-46dd2fc5"],resolve,reject)}));break;case SupportedLocales.Spanish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.es-3c464256-44080ad6-607da1d6"],resolve,reject)}));break;case SupportedLocales.Estonian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.et-2cabcfbc-c9ab362c-e7808c8a"],resolve,reject)}));break;case SupportedLocales.Finnish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fi-dd14fd3d-6d1cf426-f0879ab1"],resolve,reject)}));break;case SupportedLocales.French:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.fr-f5dae41a-5765c0d3-c1874da0"],resolve,reject)}));break;case SupportedLocales.Hebrew:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.he-f0cfdf8f-5e3213b9-0ecf30af"],resolve,reject)}));break;case SupportedLocales.Croatian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hr-fbf2bdbe-2e66409f-e2dc6389"],resolve,reject)}));break;case SupportedLocales.Hungarian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.hu-00721b08-73d25daf-1bd172d7"],resolve,reject)}));break;case SupportedLocales.Indonesian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.id-39132d2a-eb362d58-db4138a7"],resolve,reject)}));break;case SupportedLocales.Italian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.it-4fd7dabd-96d5c61b-00c3fe48"],resolve,reject)}));break;case SupportedLocales.Japanese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ja-fefd7811-b4e64d43-2945f250"],resolve,reject)}));break;case SupportedLocales.Korean:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ko-624faf1b-2e1f31f8-b9ea3d26"],resolve,reject)}));break;case SupportedLocales.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lt-6e3947a0-67b8a4ac-ef8440ca"],resolve,reject)}));break;case SupportedLocales.Latvian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.lv-ab53389c-2cfc10e8-611dabcc"],resolve,reject)}));break;case SupportedLocales.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nb-036db1bd-d142bad7-71083541"],resolve,reject)}));break;case SupportedLocales.Dutch:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.nl-9a655274-af98f539-610dfc91"],resolve,reject)}));break;case SupportedLocales.Polish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pl-b6eacd5b-03c445be-82a86b67"],resolve,reject)}));break;case SupportedLocales.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-BR-2900e96b-638ea66f-988a8b5d"],resolve,reject)}));break;case SupportedLocales.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.pt-PT-be5747a8-e0ea15e4-6de73bb0"],resolve,reject)}));break;case SupportedLocales.Romanian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ro-e8db4bb7-1befa763-abe3e87f"],resolve,reject)}));break;case SupportedLocales.Russian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.ru-6752f120-352ce732-3960cf9d"],resolve,reject)}));break;case SupportedLocales.Serbian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sr-cfd6d216-b6f119f7-9b9a1861"],resolve,reject)}));break;case SupportedLocales.Slovak:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sk-d0c8ce6a-66da50ef-51d710b2"],resolve,reject)}));break;case SupportedLocales.Slovenian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sl-7ed7f48b-8339dcc4-ddc6e952"],resolve,reject)}));break;case SupportedLocales.Swedish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.sv-c285c6d7-3a2e38cf-c5de9ad5"],resolve,reject)}));break;case SupportedLocales.Thai:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.th-e2751bf4-4f7063c6-046bbbb5"],resolve,reject)}));break;case SupportedLocales.Turkish:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.tr-3074523c-82f0924a-e5087844"],resolve,reject)}));break;case SupportedLocales.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.uk-3588895e-034858dc-dee8948b"],resolve,reject)}));break;case SupportedLocales.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.vi-17c3476d-093ea217-e0c3350b"],resolve,reject)}));break;case SupportedLocales.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-CN-a31af878-258e25e8-8ed83e87"],resolve,reject)}));break;case SupportedLocales.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-HK-043df505-a3cd5f46-aa53eec1"],resolve,reject)}));break;case SupportedLocales.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./errors.t9n.zh-TW-c8efe4ce-3631327e-1bbeffe8"],resolve,reject)}));break}return strings}async function throwError(errorKey,locale){const errorStrings=await fetchErrorsStrings(locale);const errorMessage=errorStrings.errors[errorKey];throw new ArcgisChartsError(errorStrings.modalHeaders.error,errorMessage??errorStrings.errors.simpleError)}function getXAxisValueFormat(chartConfig){return chartConfig.axes?.[0]?.valueFormat?.type}function mapValueFormat(valueFormat){return valueFormat.intlOptions}function isNumberValueFormat(valueFormat){return valueFormat?.type===WebChartTypes.NumberAxisFormat}function isPercentNumberValueFormat(valueFormat){return isNumberValueFormat(valueFormat)===true&&valueFormat.intlOptions?.style==="percent"}function isCategoryValueFormat(valueFormat){return valueFormat?.type===WebChartTypes.CategoryAxisFormat}function isDateValueFormat(valueFormat){return valueFormat?.type===WebChartTypes.DateAxisFormat}function hasAxisLabelsBehaviorChanged(props){const{oldConfig,newConfig,dataUpdateNeeded,rotationChanged}=props;const change=dataUpdateNeeded===true||rotationChanged===true?[true,true]:[oldConfig.horizontalAxisLabelsBehavior!==newConfig.horizontalAxisLabelsBehavior,oldConfig.verticalAxisLabelsBehavior!==newConfig.verticalAxisLabelsBehavior];return change}function hasValidLineChartAxesValueFormat(axesTypes){return isNumberValueFormat(axesTypes[1])}function hasValidBarChartAxesValueFormat(axesTypes){return isNumberValueFormat(axesTypes[1])}function hasValidBoxPlotAxesValueFormat(axesTypes){const isValid=(isCategoryValueFormat(axesTypes[0])||isDateValueFormat(axesTypes[0]))&&isNumberValueFormat(axesTypes[1]);return isValid}function hasValidComboLineAndBarChartAxesValueFormat(axesTypes){return(isCategoryValueFormat(axesTypes[0])||isDateValueFormat(axesTypes[0]))&&isNumberValueFormat(axesTypes[1])}function hasValidScatterPlotAxesValueFormat(axesTypes){return isNumberValueFormat(axesTypes[0])===true&&isNumberValueFormat(axesTypes[1])===true}function hasValidHistogramAxesValueFormat(axesTypes){return isNumberValueFormat(axesTypes[0])===true&&isNumberValueFormat(axesTypes[1])===true}function hasValidGaugeAxisValueFormat(axesTypes){return isNumberValueFormat(axesTypes[0])===true}async function validateAxesValueFormat(props){const{chartType,axesTypes,locale}=props;let validateFunction;let errorType;switch(chartType){case WebChartTypes.GaugeSeries:validateFunction=hasValidGaugeAxisValueFormat;errorType="invalidValueFormatForGauge";break;case WebChartTypes.ScatterSeries:validateFunction=hasValidScatterPlotAxesValueFormat;errorType="invalidValueFormatForScatterPlot";break;case WebChartTypes.HistogramSeries:validateFunction=hasValidHistogramAxesValueFormat;errorType="invalidValueFormatForHistogram";break;case WebChartTypes.LineSeries:validateFunction=hasValidLineChartAxesValueFormat;errorType="invalidValueFormatForLineChart";break;case WebChartTypes.BarSeries:validateFunction=hasValidBarChartAxesValueFormat;errorType="invalidValueFormatForBarChart";break;case WebChartTypes.ComboLineAndBarSeries:validateFunction=hasValidComboLineAndBarChartAxesValueFormat;errorType="invalidValueFormatForComboBarLineChart";break;case WebChartTypes.BoxPlotSeries:validateFunction=hasValidBoxPlotAxesValueFormat;errorType="invalidValueFormatForBoxPlot";break}if(validateFunction!==undefined&&errorType!==undefined){const valid=validateFunction(axesTypes);if(valid===false)await throwError(errorType,locale)}}const statistics={mean:"Mean",median:"Median",sum:"Sum",discretePercentitle:"Discrete percentile",minimum:"Minimum",maximum:"Maximum",firstQuartile:"First quartile",thirdQuartile:"Third quartile",iqr:"IQR",standardDeviation:"Standard deviation",variance:"Variance",count:"Count",aggregation:"${ statistics } of ${ fieldName }",percent:"Percent",noAggregation:"No aggregation"};const overlays={mean:"Mean",median:"Median",stdDev:"Standard Deviation",normal:"Normal Distribution",trendline:"Trendline"};const guideTooltipLabel="From ${ guideStart } to ${ guideEnd }";const pieChart={defaultSliceGroupingLabel:"Other"};const notAvailable="Not Available";const field="Field";var common_t9n_en={statistics,overlays,guideTooltipLabel,pieChart,notAvailable,field};var common_t9n_en$1=Object.freeze({__proto__:null,statistics,overlays,guideTooltipLabel,pieChart,notAvailable,field,default:common_t9n_en});async function fetchCommonStrings(locale=getLocaleInfo().locale){let strings=await Promise.resolve().then((function(){return common_t9n_en$1}));switch(locale){case SupportedLocales.Arabic:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ar-3e750b59-689d69a0-d7436849"],resolve,reject)}));break;case SupportedLocales.Bosnian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.bs-76ec2c65-31e60689-28d788f7"],resolve,reject)}));break;case SupportedLocales.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.bg-e31a89d8-41fdcd45-3d36f975"],resolve,reject)}));break;case SupportedLocales.Catalan:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ca-82d10a70-def9cfd5-1a69d803"],resolve,reject)}));break;case SupportedLocales.Czech:strings=await new Promise((function(resolve,reject){require(["./common.t9n.cs-bd7b23b5-d6fa012e-4cf4552d"],resolve,reject)}));break;case SupportedLocales.Danish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.da-3ef6e25e-997ef582-a41bc2ec"],resolve,reject)}));break;case SupportedLocales.German:strings=await new Promise((function(resolve,reject){require(["./common.t9n.de-8ef9b793-aeeaa12b-f0657e47"],resolve,reject)}));break;case SupportedLocales.Greek:strings=await new Promise((function(resolve,reject){require(["./common.t9n.el-853bd7b1-b753ccdb-8515629f"],resolve,reject)}));break;case SupportedLocales.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./common.t9n.en-US-0ade8131-73749720-c5c0842a"],resolve,reject)}));break;case SupportedLocales.Spanish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.es-6321f291-4326b305-a552c313"],resolve,reject)}));break;case SupportedLocales.Estonian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.et-a026c61c-c1094ba1-59f5f8e3"],resolve,reject)}));break;case SupportedLocales.Finnish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.fi-538108f9-b93c1f98-442d1c86"],resolve,reject)}));break;case SupportedLocales.French:strings=await new Promise((function(resolve,reject){require(["./common.t9n.fr-838be1e4-fa0eb3ba-1b15f5e1"],resolve,reject)}));break;case SupportedLocales.Hebrew:strings=await new Promise((function(resolve,reject){require(["./common.t9n.he-2c259947-4d0c821b-94aff4d1"],resolve,reject)}));break;case SupportedLocales.Croatian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.hr-09d49a18-8e7160f7-a4ffecc3"],resolve,reject)}));break;case SupportedLocales.Hungarian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.hu-734f246b-d7ae5a71-55c71dcc"],resolve,reject)}));break;case SupportedLocales.Indonesian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.id-5fb97f4d-1bad73f5-c32c4b56"],resolve,reject)}));break;case SupportedLocales.Italian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.it-937066b7-bebeeddc-7c0cd930"],resolve,reject)}));break;case SupportedLocales.Japanese:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ja-51a6108d-7f02480e-2ed69d86"],resolve,reject)}));break;case SupportedLocales.Korean:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ko-81c8a819-8aaa6ef3-bce949a2"],resolve,reject)}));break;case SupportedLocales.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.lt-c0686cc9-9f9f159c-ef96c1f1"],resolve,reject)}));break;case SupportedLocales.Latvian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.lv-8f0561b1-8e63ad66-0480e388"],resolve,reject)}));break;case SupportedLocales.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./common.t9n.nb-8bcb37d4-5af319a4-9dc9668b"],resolve,reject)}));break;case SupportedLocales.Dutch:strings=await new Promise((function(resolve,reject){require(["./common.t9n.nl-9c5c553a-ac850edf-549fd33a"],resolve,reject)}));break;case SupportedLocales.Polish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pl-c04162bc-956e8c35-9d521dc0"],resolve,reject)}));break;case SupportedLocales.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pt-BR-14fb5ca5-0d0da6db-e22b4e57"],resolve,reject)}));break;case SupportedLocales.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./common.t9n.pt-PT-1768228c-707d5c8d-6b827732"],resolve,reject)}));break;case SupportedLocales.Romanian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ro-775f584e-7ad765a7-18ec31c3"],resolve,reject)}));break;case SupportedLocales.Russian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.ru-8e7ac0c5-bc11ed06-45bfd32e"],resolve,reject)}));break;case SupportedLocales.Serbian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sr-5a348bfc-9040f848-8270dc65"],resolve,reject)}));break;case SupportedLocales.Slovak:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sk-204924cd-bf277d9e-15efad02"],resolve,reject)}));break;case SupportedLocales.Slovenian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sl-e04cb649-bbcfeb83-81311df5"],resolve,reject)}));break;case SupportedLocales.Swedish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.sv-f5a60b3d-b532b58b-41d58f16"],resolve,reject)}));break;case SupportedLocales.Thai:strings=await new Promise((function(resolve,reject){require(["./common.t9n.th-307feb3b-bba00a10-99ecd8cb"],resolve,reject)}));break;case SupportedLocales.Turkish:strings=await new Promise((function(resolve,reject){require(["./common.t9n.tr-739f9f3f-20ac1078-847ecf23"],resolve,reject)}));break;case SupportedLocales.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./common.t9n.uk-44d809b5-1144c6ae-b2acb5ce"],resolve,reject)}));break;case SupportedLocales.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./common.t9n.vi-a02c9780-32854457-ba5caf8f"],resolve,reject)}));break;case SupportedLocales.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-CN-a4c05adc-e7f6a06d-e69a4dc0"],resolve,reject)}));break;case SupportedLocales.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-HK-75d315ce-aa003a8f-8fcd6055"],resolve,reject)}));break;case SupportedLocales.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./common.t9n.zh-TW-1e9af781-21e847ad-6175f2b8"],resolve,reject)}));break}return strings}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(reason){super(`Invalid DateTime: ${reason.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(reason){super(`Invalid Interval: ${reason.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(reason){super(`Invalid Duration: ${reason.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(unit){super(`Invalid unit ${unit}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n="numeric",s="short",l="long";const DATE_SHORT={year:n,month:n,day:n};const DATE_MED={year:n,month:s,day:n};const DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s};const DATE_FULL={year:n,month:l,day:n};const DATE_HUGE={year:n,month:l,day:n,weekday:l};const TIME_SIMPLE={hour:n,minute:n};const TIME_WITH_SECONDS={hour:n,minute:n,second:n};const TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s};const TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l};const TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"};const TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"};const TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s};const TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l};const DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n};const DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n};const DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n};const DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n};const DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n};const DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s};const DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s};const DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l};const DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(ts,opts){throw new ZoneIsAbstractError}formatOffset(ts,format){throw new ZoneIsAbstractError}offset(ts){throw new ZoneIsAbstractError}equals(otherZone){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){if(singleton$1===null){singleton$1=new SystemZone}return singleton$1}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return false}offsetName(ts,{format,locale}){return parseZoneInfo(ts,format,locale)}formatOffset(ts,format){return formatOffset(this.offset(ts),format)}offset(ts){return-new Date(ts).getTimezoneOffset()}equals(otherZone){return otherZone.type==="system"}get isValid(){return true}}let dtfCache={};function makeDTF(zone){if(!dtfCache[zone]){dtfCache[zone]=new Intl.DateTimeFormat("en-US",{hour12:false,timeZone:zone,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})}return dtfCache[zone]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(dtf,date){const formatted=dtf.format(date).replace(/\u200E/g,""),parsed=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted),[,fMonth,fDay,fYear,fadOrBc,fHour,fMinute,fSecond]=parsed;return[fYear,fMonth,fDay,fadOrBc,fHour,fMinute,fSecond]}function partsOffset(dtf,date){const formatted=dtf.formatToParts(date);const filled=[];for(let i=0;i<formatted.length;i++){const{type,value}=formatted[i];const pos=typeToPos[type];if(type==="era"){filled[pos]=value}else if(!isUndefined(pos)){filled[pos]=parseInt(value,10)}}return filled}let ianaZoneCache={};class IANAZone extends Zone{static create(name){if(!ianaZoneCache[name]){ianaZoneCache[name]=new IANAZone(name)}return ianaZoneCache[name]}static resetCache(){ianaZoneCache={};dtfCache={}}static isValidSpecifier(s){return this.isValidZone(s)}static isValidZone(zone){if(!zone){return false}try{new Intl.DateTimeFormat("en-US",{timeZone:zone}).format();return true}catch(e){return false}}constructor(name){super();this.zoneName=name;this.valid=IANAZone.isValidZone(name)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return false}offsetName(ts,{format,locale}){return parseZoneInfo(ts,format,locale,this.name)}formatOffset(ts,format){return formatOffset(this.offset(ts),format)}offset(ts){const date=new Date(ts);if(isNaN(date))return NaN;const dtf=makeDTF(this.name);let[year,month,day,adOrBc,hour,minute,second]=dtf.formatToParts?partsOffset(dtf,date):hackyOffset(dtf,date);if(adOrBc==="BC"){year=-Math.abs(year)+1}const adjustedHour=hour===24?0:hour;const asUTC=objToLocalTS({year,month,day,hour:adjustedHour,minute,second,millisecond:0});let asTS=+date;const over=asTS%1e3;asTS-=over>=0?over:1e3+over;return(asUTC-asTS)/(60*1e3)}equals(otherZone){return otherZone.type==="iana"&&otherZone.name===this.name}get isValid(){return this.valid}}let intlLFCache={};function getCachedLF(locString,opts={}){const key=JSON.stringify([locString,opts]);let dtf=intlLFCache[key];if(!dtf){dtf=new Intl.ListFormat(locString,opts);intlLFCache[key]=dtf}return dtf}let intlDTCache={};function getCachedDTF(locString,opts={}){const key=JSON.stringify([locString,opts]);let dtf=intlDTCache[key];if(!dtf){dtf=new Intl.DateTimeFormat(locString,opts);intlDTCache[key]=dtf}return dtf}let intlNumCache={};function getCachedINF(locString,opts={}){const key=JSON.stringify([locString,opts]);let inf=intlNumCache[key];if(!inf){inf=new Intl.NumberFormat(locString,opts);intlNumCache[key]=inf}return inf}let intlRelCache={};function getCachedRTF(locString,opts={}){const{base,...cacheKeyOpts}=opts;const key=JSON.stringify([locString,cacheKeyOpts]);let inf=intlRelCache[key];if(!inf){inf=new Intl.RelativeTimeFormat(locString,opts);intlRelCache[key]=inf}return inf}let sysLocaleCache=null;function systemLocale(){if(sysLocaleCache){return sysLocaleCache}else{sysLocaleCache=(new Intl.DateTimeFormat).resolvedOptions().locale;return sysLocaleCache}}function parseLocaleString(localeStr){const xIndex=localeStr.indexOf("-x-");if(xIndex!==-1){localeStr=localeStr.substring(0,xIndex)}const uIndex=localeStr.indexOf("-u-");if(uIndex===-1){return[localeStr]}else{let options;let selectedStr;try{options=getCachedDTF(localeStr).resolvedOptions();selectedStr=localeStr}catch(e){const smaller=localeStr.substring(0,uIndex);options=getCachedDTF(smaller).resolvedOptions();selectedStr=smaller}const{numberingSystem,calendar}=options;return[selectedStr,numberingSystem,calendar]}}function intlConfigString(localeStr,numberingSystem,outputCalendar){if(outputCalendar||numberingSystem){if(!localeStr.includes("-u-")){localeStr+="-u"}if(outputCalendar){localeStr+=`-ca-${outputCalendar}`}if(numberingSystem){localeStr+=`-nu-${numberingSystem}`}return localeStr}else{return localeStr}}function mapMonths(f){const ms=[];for(let i=1;i<=12;i++){const dt=DateTime.utc(2016,i,1);ms.push(f(dt))}return ms}function mapWeekdays(f){const ms=[];for(let i=1;i<=7;i++){const dt=DateTime.utc(2016,11,13+i);ms.push(f(dt))}return ms}function listStuff(loc,length,defaultOK,englishFn,intlFn){const mode=loc.listingMode(defaultOK);if(mode==="error"){return null}else if(mode==="en"){return englishFn(length)}else{return intlFn(length)}}function supportsFastNumbers(loc){if(loc.numberingSystem&&loc.numberingSystem!=="latn"){return false}else{return loc.numberingSystem==="latn"||!loc.locale||loc.locale.startsWith("en")||new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem==="latn"}}class PolyNumberFormatter{constructor(intl,forceSimple,opts){this.padTo=opts.padTo||0;this.floor=opts.floor||false;const{padTo,floor,...otherOpts}=opts;if(!forceSimple||Object.keys(otherOpts).length>0){const intlOpts={useGrouping:false,...opts};if(opts.padTo>0)intlOpts.minimumIntegerDigits=opts.padTo;this.inf=getCachedINF(intl,intlOpts)}}format(i){if(this.inf){const fixed=this.floor?Math.floor(i):i;return this.inf.format(fixed)}else{const fixed=this.floor?Math.floor(i):roundTo(i,3);return padStart(fixed,this.padTo)}}}class PolyDateFormatter{constructor(dt,intl,opts){this.opts=opts;let z=undefined;if(dt.zone.isUniversal){const gmtOffset=-1*(dt.offset/60);const offsetZ=gmtOffset>=0?`Etc/GMT+${gmtOffset}`:`Etc/GMT${gmtOffset}`;if(dt.offset!==0&&IANAZone.create(offsetZ).valid){z=offsetZ;this.dt=dt}else{z="UTC";if(opts.timeZoneName){this.dt=dt}else{this.dt=dt.offset===0?dt:DateTime.fromMillis(dt.ts+dt.offset*60*1e3)}}}else if(dt.zone.type==="system"){this.dt=dt}else{this.dt=dt;z=dt.zone.name}const intlOpts={...this.opts};intlOpts.timeZone=intlOpts.timeZone||z;this.dtf=getCachedDTF(intl,intlOpts)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(intl,isEnglish,opts){this.opts={style:"long",...opts};if(!isEnglish&&hasRelative()){this.rtf=getCachedRTF(intl,opts)}}format(count,unit){if(this.rtf){return this.rtf.format(count,unit)}else{return formatRelativeTime(unit,count,this.opts.numeric,this.opts.style!=="long")}}formatToParts(count,unit){if(this.rtf){return this.rtf.formatToParts(count,unit)}else{return[]}}}class Locale{static fromOpts(opts){return Locale.create(opts.locale,opts.numberingSystem,opts.outputCalendar,opts.defaultToEN)}static create(locale,numberingSystem,outputCalendar,defaultToEN=false){const specifiedLocale=locale||Settings.defaultLocale;const localeR=specifiedLocale||(defaultToEN?"en-US":systemLocale());const numberingSystemR=numberingSystem||Settings.defaultNumberingSystem;const outputCalendarR=outputCalendar||Settings.defaultOutputCalendar;return new Locale(localeR,numberingSystemR,outputCalendarR,specifiedLocale)}static resetCache(){sysLocaleCache=null;intlDTCache={};intlNumCache={};intlRelCache={}}static fromObject({locale,numberingSystem,outputCalendar}={}){return Locale.create(locale,numberingSystem,outputCalendar)}constructor(locale,numbering,outputCalendar,specifiedLocale){const[parsedLocale,parsedNumberingSystem,parsedOutputCalendar]=parseLocaleString(locale);this.locale=parsedLocale;this.numberingSystem=numbering||parsedNumberingSystem||null;this.outputCalendar=outputCalendar||parsedOutputCalendar||null;this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar);this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=specifiedLocale;this.fastNumbersCached=null}get fastNumbers(){if(this.fastNumbersCached==null){this.fastNumbersCached=supportsFastNumbers(this)}return this.fastNumbersCached}listingMode(){const isActuallyEn=this.isEnglish();const hasNoWeirdness=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return isActuallyEn&&hasNoWeirdness?"en":"intl"}clone(alts){if(!alts||Object.getOwnPropertyNames(alts).length===0){return this}else{return Locale.create(alts.locale||this.specifiedLocale,alts.numberingSystem||this.numberingSystem,alts.outputCalendar||this.outputCalendar,alts.defaultToEN||false)}}redefaultToEN(alts={}){return this.clone({...alts,defaultToEN:true})}redefaultToSystem(alts={}){return this.clone({...alts,defaultToEN:false})}months(length,format=false,defaultOK=true){return listStuff(this,length,defaultOK,months,(()=>{const intl=format?{month:length,day:"numeric"}:{month:length},formatStr=format?"format":"standalone";if(!this.monthsCache[formatStr][length]){this.monthsCache[formatStr][length]=mapMonths((dt=>this.extract(dt,intl,"month")))}return this.monthsCache[formatStr][length]}))}weekdays(length,format=false,defaultOK=true){return listStuff(this,length,defaultOK,weekdays,(()=>{const intl=format?{weekday:length,year:"numeric",month:"long",day:"numeric"}:{weekday:length},formatStr=format?"format":"standalone";if(!this.weekdaysCache[formatStr][length]){this.weekdaysCache[formatStr][length]=mapWeekdays((dt=>this.extract(dt,intl,"weekday")))}return this.weekdaysCache[formatStr][length]}))}meridiems(defaultOK=true){return listStuff(this,undefined,defaultOK,(()=>meridiems),(()=>{if(!this.meridiemCache){const intl={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map((dt=>this.extract(dt,intl,"dayperiod")))}return this.meridiemCache}))}eras(length,defaultOK=true){return listStuff(this,length,defaultOK,eras,(()=>{const intl={era:length};if(!this.eraCache[length]){this.eraCache[length]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map((dt=>this.extract(dt,intl,"era")))}return this.eraCache[length]}))}extract(dt,intlOpts,field){const df=this.dtFormatter(dt,intlOpts),results=df.formatToParts(),matching=results.find((m=>m.type.toLowerCase()===field));return matching?matching.value:null}numberFormatter(opts={}){return new PolyNumberFormatter(this.intl,opts.forceSimple||this.fastNumbers,opts)}dtFormatter(dt,intlOpts={}){return new PolyDateFormatter(dt,this.intl,intlOpts)}relFormatter(opts={}){return new PolyRelFormatter(this.intl,this.isEnglish(),opts)}listFormatter(opts={}){return getCachedLF(this.intl,opts)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(other){return this.locale===other.locale&&this.numberingSystem===other.numberingSystem&&this.outputCalendar===other.outputCalendar}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){if(singleton===null){singleton=new FixedOffsetZone(0)}return singleton}static instance(offset){return offset===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(offset)}static parseSpecifier(s){if(s){const r=s.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r){return new FixedOffsetZone(signedOffset(r[1],r[2]))}}return null}constructor(offset){super();this.fixed=offset}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){if(this.fixed===0){return"Etc/UTC"}else{return`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}}offsetName(){return this.name}formatOffset(ts,format){return formatOffset(this.fixed,format)}get isUniversal(){return true}offset(){return this.fixed}equals(otherZone){return otherZone.type==="fixed"&&otherZone.fixed===this.fixed}get isValid(){return true}}class InvalidZone extends Zone{constructor(zoneName){super();this.zoneName=zoneName}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return false}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return false}get isValid(){return false}}function normalizeZone(input,defaultZone){if(isUndefined(input)||input===null){return defaultZone}else if(input instanceof Zone){return input}else if(isString(input)){const lowered=input.toLowerCase();if(lowered==="default")return defaultZone;else if(lowered==="local"||lowered==="system")return SystemZone.instance;else if(lowered==="utc"||lowered==="gmt")return FixedOffsetZone.utcInstance;else return FixedOffsetZone.parseSpecifier(lowered)||IANAZone.create(input)}else if(isNumber(input)){return FixedOffsetZone.instance(input)}else if(typeof input==="object"&&input.offset&&typeof input.offset==="number"){return input}else{return new InvalidZone(input)}}let now=()=>Date.now(),defaultZone="system",defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60,throwOnInvalid;class Settings{static get now(){return now}static set now(n){now=n}static set defaultZone(zone){defaultZone=zone}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale}static set defaultLocale(locale){defaultLocale=locale}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(numberingSystem){defaultNumberingSystem=numberingSystem}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(outputCalendar){defaultOutputCalendar=outputCalendar}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(cutoffYear){twoDigitCutoffYear=cutoffYear%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(t){throwOnInvalid=t}static resetCaches(){Locale.resetCache();IANAZone.resetCache()}}function isUndefined(o){return typeof o==="undefined"}function isNumber(o){return typeof o==="number"}function isInteger(o){return typeof o==="number"&&o%1===0}function isString(o){return typeof o==="string"}function isDate(o){return Object.prototype.toString.call(o)==="[object Date]"}function hasRelative(){try{return typeof Intl!=="undefined"&&!!Intl.RelativeTimeFormat}catch(e){return false}}function maybeArray(thing){return Array.isArray(thing)?thing:[thing]}function bestBy(arr,by,compare){if(arr.length===0){return undefined}return arr.reduce(((best,next)=>{const pair=[by(next),next];if(!best){return pair}else if(compare(best[0],pair[0])===best[0]){return best}else{return pair}}),null)[1]}function pick(obj,keys){return keys.reduce(((a,k)=>{a[k]=obj[k];return a}),{})}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function integerBetween(thing,bottom,top){return isInteger(thing)&&thing>=bottom&&thing<=top}function floorMod(x,n){return x-n*Math.floor(x/n)}function padStart(input,n=2){const isNeg=input<0;let padded;if(isNeg){padded="-"+(""+-input).padStart(n,"0")}else{padded=(""+input).padStart(n,"0")}return padded}function parseInteger(string){if(isUndefined(string)||string===null||string===""){return undefined}else{return parseInt(string,10)}}function parseFloating(string){if(isUndefined(string)||string===null||string===""){return undefined}else{return parseFloat(string)}}function parseMillis(fraction){if(isUndefined(fraction)||fraction===null||fraction===""){return undefined}else{const f=parseFloat("0."+fraction)*1e3;return Math.floor(f)}}function roundTo(number,digits,towardZero=false){const factor=10**digits,rounder=towardZero?Math.trunc:Math.round;return rounder(number*factor)/factor}function isLeapYear(year){return year%4===0&&(year%100!==0||year%400===0)}function daysInYear(year){return isLeapYear(year)?366:365}function daysInMonth(year,month){const modMonth=floorMod(month-1,12)+1,modYear=year+(month-modMonth)/12;if(modMonth===2){return isLeapYear(modYear)?29:28}else{return[31,null,31,30,31,30,31,31,30,31,30,31][modMonth-1]}}function objToLocalTS(obj){let d=Date.UTC(obj.year,obj.month-1,obj.day,obj.hour,obj.minute,obj.second,obj.millisecond);if(obj.year<100&&obj.year>=0){d=new Date(d);d.setUTCFullYear(d.getUTCFullYear()-1900)}return+d}function weeksInWeekYear(weekYear){const p1=(weekYear+Math.floor(weekYear/4)-Math.floor(weekYear/100)+Math.floor(weekYear/400))%7,last=weekYear-1,p2=(last+Math.floor(last/4)-Math.floor(last/100)+Math.floor(last/400))%7;return p1===4||p2===3?53:52}function untruncateYear(year){if(year>99){return year}else return year>Settings.twoDigitCutoffYear?1900+year:2e3+year}function parseZoneInfo(ts,offsetFormat,locale,timeZone=null){const date=new Date(ts),intlOpts={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};if(timeZone){intlOpts.timeZone=timeZone}const modified={timeZoneName:offsetFormat,...intlOpts};const parsed=new Intl.DateTimeFormat(locale,modified).formatToParts(date).find((m=>m.type.toLowerCase()==="timezonename"));return parsed?parsed.value:null}function signedOffset(offHourStr,offMinuteStr){let offHour=parseInt(offHourStr,10);if(Number.isNaN(offHour)){offHour=0}const offMin=parseInt(offMinuteStr,10)||0,offMinSigned=offHour<0||Object.is(offHour,-0)?-offMin:offMin;return offHour*60+offMinSigned}function asNumber(value){const numericValue=Number(value);if(typeof value==="boolean"||value===""||Number.isNaN(numericValue))throw new InvalidArgumentError(`Invalid unit value ${value}`);return numericValue}function normalizeObject(obj,normalizer){const normalized={};for(const u in obj){if(hasOwnProperty(obj,u)){const v=obj[u];if(v===undefined||v===null)continue;normalized[normalizer(u)]=asNumber(v)}}return normalized}function formatOffset(offset,format){const hours=Math.trunc(Math.abs(offset/60)),minutes=Math.trunc(Math.abs(offset%60)),sign=offset>=0?"+":"-";switch(format){case"short":return`${sign}${padStart(hours,2)}:${padStart(minutes,2)}`;case"narrow":return`${sign}${hours}${minutes>0?`:${minutes}`:""}`;case"techie":return`${sign}${padStart(hours,2)}${padStart(minutes,2)}`;default:throw new RangeError(`Value format ${format} is out of range for property format`)}}function timeObject(obj){return pick(obj,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"];const monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];const monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(length){switch(length){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];const weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(length){switch(length){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"];const erasLong=["Before Christ","Anno Domini"];const erasShort=["BC","AD"];const erasNarrow=["B","A"];function eras(length){switch(length){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(dt){return meridiems[dt.hour<12?0:1]}function weekdayForDateTime(dt,length){return weekdays(length)[dt.weekday-1]}function monthForDateTime(dt,length){return months(length)[dt.month-1]}function eraForDateTime(dt,length){return eras(length)[dt.year<0?0:1]}function formatRelativeTime(unit,count,numeric="always",narrow=false){const units={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};const lastable=["hours","minutes","seconds"].indexOf(unit)===-1;if(numeric==="auto"&&lastable){const isDay=unit==="days";switch(count){case 1:return isDay?"tomorrow":`next ${units[unit][0]}`;case-1:return isDay?"yesterday":`last ${units[unit][0]}`;case 0:return isDay?"today":`this ${units[unit][0]}`}}const isInPast=Object.is(count,-0)||count<0,fmtValue=Math.abs(count),singular=fmtValue===1,lilUnits=units[unit],fmtUnit=narrow?singular?lilUnits[1]:lilUnits[2]||lilUnits[1]:singular?units[unit][0]:unit;return isInPast?`${fmtValue} ${fmtUnit} ago`:`in ${fmtValue} ${fmtUnit}`}function stringifyTokens(splits,tokenToString){let s="";for(const token of splits){if(token.literal){s+=token.val}else{s+=tokenToString(token.val)}}return s}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(locale,opts={}){return new Formatter(locale,opts)}static parseFormat(fmt){let current=null,currentFull="",bracketed=false;const splits=[];for(let i=0;i<fmt.length;i++){const c=fmt.charAt(i);if(c==="'"){if(currentFull.length>0){splits.push({literal:bracketed,val:currentFull})}current=null;currentFull="";bracketed=!bracketed}else if(bracketed){currentFull+=c}else if(c===current){currentFull+=c}else{if(currentFull.length>0){splits.push({literal:false,val:currentFull})}currentFull=c;current=c}}if(currentFull.length>0){splits.push({literal:bracketed,val:currentFull})}return splits}static macroTokenToFormatOpts(token){return macroTokenToFormatOpts[token]}constructor(locale,formatOpts){this.opts=formatOpts;this.loc=locale;this.systemLoc=null}formatWithSystemDefault(dt,opts){if(this.systemLoc===null){this.systemLoc=this.loc.redefaultToSystem()}const df=this.systemLoc.dtFormatter(dt,{...this.opts,...opts});return df.format()}formatDateTime(dt,opts={}){const df=this.loc.dtFormatter(dt,{...this.opts,...opts});return df.format()}formatDateTimeParts(dt,opts={}){const df=this.loc.dtFormatter(dt,{...this.opts,...opts});return df.formatToParts()}formatInterval(interval,opts={}){const df=this.loc.dtFormatter(interval.start,{...this.opts,...opts});return df.dtf.formatRange(interval.start.toJSDate(),interval.end.toJSDate())}resolvedOptions(dt,opts={}){const df=this.loc.dtFormatter(dt,{...this.opts,...opts});return df.resolvedOptions()}num(n,p=0){if(this.opts.forceSimple){return padStart(n,p)}const opts={...this.opts};if(p>0){opts.padTo=p}return this.loc.numberFormatter(opts).format(n)}formatDateTimeFromString(dt,fmt){const knownEnglish=this.loc.listingMode()==="en",useDateTimeFormatter=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",string=(opts,extract)=>this.loc.extract(dt,opts,extract),formatOffset=opts=>{if(dt.isOffsetFixed&&dt.offset===0&&opts.allowZ){return"Z"}return dt.isValid?dt.zone.formatOffset(dt.ts,opts.format):""},meridiem=()=>knownEnglish?meridiemForDateTime(dt):string({hour:"numeric",hourCycle:"h12"},"dayperiod"),month=(length,standalone)=>knownEnglish?monthForDateTime(dt,length):string(standalone?{month:length}:{month:length,day:"numeric"},"month"),weekday=(length,standalone)=>knownEnglish?weekdayForDateTime(dt,length):string(standalone?{weekday:length}:{weekday:length,month:"long",day:"numeric"},"weekday"),maybeMacro=token=>{const formatOpts=Formatter.macroTokenToFormatOpts(token);if(formatOpts){return this.formatWithSystemDefault(dt,formatOpts)}else{return token}},era=length=>knownEnglish?eraForDateTime(dt,length):string({era:length},"era"),tokenToString=token=>{switch(token){case"S":return this.num(dt.millisecond);case"u":case"SSS":return this.num(dt.millisecond,3);case"s":return this.num(dt.second);case"ss":return this.num(dt.second,2);case"uu":return this.num(Math.floor(dt.millisecond/10),2);case"uuu":return this.num(Math.floor(dt.millisecond/100));case"m":return this.num(dt.minute);case"mm":return this.num(dt.minute,2);case"h":return this.num(dt.hour%12===0?12:dt.hour%12);case"hh":return this.num(dt.hour%12===0?12:dt.hour%12,2);case"H":return this.num(dt.hour);case"HH":return this.num(dt.hour,2);case"Z":return formatOffset({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return formatOffset({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return formatOffset({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return dt.zone.offsetName(dt.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return dt.zone.offsetName(dt.ts,{format:"long",locale:this.loc.locale});case"z":return dt.zoneName;case"a":return meridiem();case"d":return useDateTimeFormatter?string({day:"numeric"},"day"):this.num(dt.day);case"dd":return useDateTimeFormatter?string({day:"2-digit"},"day"):this.num(dt.day,2);case"c":return this.num(dt.weekday);case"ccc":return weekday("short",true);case"cccc":return weekday("long",true);case"ccccc":return weekday("narrow",true);case"E":return this.num(dt.weekday);case"EEE":return weekday("short",false);case"EEEE":return weekday("long",false);case"EEEEE":return weekday("narrow",false);case"L":return useDateTimeFormatter?string({month:"numeric",day:"numeric"},"month"):this.num(dt.month);case"LL":return useDateTimeFormatter?string({month:"2-digit",day:"numeric"},"month"):this.num(dt.month,2);case"LLL":return month("short",true);case"LLLL":return month("long",true);case"LLLLL":return month("narrow",true);case"M":return useDateTimeFormatter?string({month:"numeric"},"month"):this.num(dt.month);case"MM":return useDateTimeFormatter?string({month:"2-digit"},"month"):this.num(dt.month,2);case"MMM":return month("short",false);case"MMMM":return month("long",false);case"MMMMM":return month("narrow",false);case"y":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year);case"yy":return useDateTimeFormatter?string({year:"2-digit"},"year"):this.num(dt.year.toString().slice(-2),2);case"yyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year,4);case"yyyyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year,6);case"G":return era("short");case"GG":return era("long");case"GGGGG":return era("narrow");case"kk":return this.num(dt.weekYear.toString().slice(-2),2);case"kkkk":return this.num(dt.weekYear,4);case"W":return this.num(dt.weekNumber);case"WW":return this.num(dt.weekNumber,2);case"o":return this.num(dt.ordinal);case"ooo":return this.num(dt.ordinal,3);case"q":return this.num(dt.quarter);case"qq":return this.num(dt.quarter,2);case"X":return this.num(Math.floor(dt.ts/1e3));case"x":return this.num(dt.ts);default:return maybeMacro(token)}};return stringifyTokens(Formatter.parseFormat(fmt),tokenToString)}formatDurationFromString(dur,fmt){const tokenToField=token=>{switch(token[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},tokenToString=lildur=>token=>{const mapped=tokenToField(token);if(mapped){return this.num(lildur.get(mapped),token.length)}else{return token}},tokens=Formatter.parseFormat(fmt),realTokens=tokens.reduce(((found,{literal,val})=>literal?found:found.concat(val)),[]),collapsed=dur.shiftTo(...realTokens.map(tokenToField).filter((t=>t)));return stringifyTokens(tokens,tokenToString(collapsed))}}class Invalid{constructor(reason,explanation){this.reason=reason;this.explanation=explanation}toMessage(){if(this.explanation){return`${this.reason}: ${this.explanation}`}else{return this.reason}}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...regexes){const full=regexes.reduce(((f,r)=>f+r.source),"");return RegExp(`^${full}$`)}function combineExtractors(...extractors){return m=>extractors.reduce((([mergedVals,mergedZone,cursor],ex)=>{const[val,zone,next]=ex(m,cursor);return[{...mergedVals,...val},zone||mergedZone,next]}),[{},null,1]).slice(0,2)}function parse(s,...patterns){if(s==null){return[null,null]}for(const[regex,extractor]of patterns){const m=regex.exec(s);if(m){return extractor(m)}}return[null,null]}function simpleParse(...keys){return(match,cursor)=>{const ret={};let i;for(i=0;i<keys.length;i++){ret[keys[i]]=parseInteger(match[cursor+i])}return[ret,null,cursor+i]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;const isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;const isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;const isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);const isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`);const isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;const isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/;const isoOrdinalRegex=/(\d{4})-?(\d{3})/;const extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay");const extractISOOrdinalData=simpleParse("year","ordinal");const sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/;const sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`);const sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(match,pos,fallback){const m=match[pos];return isUndefined(m)?fallback:parseInteger(m)}function extractISOYmd(match,cursor){const item={year:int(match,cursor),month:int(match,cursor+1,1),day:int(match,cursor+2,1)};return[item,null,cursor+3]}function extractISOTime(match,cursor){const item={hours:int(match,cursor,0),minutes:int(match,cursor+1,0),seconds:int(match,cursor+2,0),milliseconds:parseMillis(match[cursor+3])};return[item,null,cursor+4]}function extractISOOffset(match,cursor){const local=!match[cursor]&&!match[cursor+1],fullOffset=signedOffset(match[cursor+1],match[cursor+2]),zone=local?null:FixedOffsetZone.instance(fullOffset);return[{},zone,cursor+3]}function extractIANAZone(match,cursor){const zone=match[cursor]?IANAZone.create(match[cursor]):null;return[{},zone,cursor+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`);const isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(match){const[s,yearStr,monthStr,weekStr,dayStr,hourStr,minuteStr,secondStr,millisecondsStr]=match;const hasNegativePrefix=s[0]==="-";const negativeSeconds=secondStr&&secondStr[0]==="-";const maybeNegate=(num,force=false)=>num!==undefined&&(force||num&&hasNegativePrefix)?-num:num;return[{years:maybeNegate(parseFloating(yearStr)),months:maybeNegate(parseFloating(monthStr)),weeks:maybeNegate(parseFloating(weekStr)),days:maybeNegate(parseFloating(dayStr)),hours:maybeNegate(parseFloating(hourStr)),minutes:maybeNegate(parseFloating(minuteStr)),seconds:maybeNegate(parseFloating(secondStr),secondStr==="-0"),milliseconds:maybeNegate(parseMillis(millisecondsStr),negativeSeconds)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){const result={year:yearStr.length===2?untruncateYear(parseInteger(yearStr)):parseInteger(yearStr),month:monthsShort.indexOf(monthStr)+1,day:parseInteger(dayStr),hour:parseInteger(hourStr),minute:parseInteger(minuteStr)};if(secondStr)result.second=parseInteger(secondStr);if(weekdayStr){result.weekday=weekdayStr.length>3?weekdaysLong.indexOf(weekdayStr)+1:weekdaysShort.indexOf(weekdayStr)+1}return result}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(match){const[,weekdayStr,dayStr,monthStr,yearStr,hourStr,minuteStr,secondStr,obsOffset,milOffset,offHourStr,offMinuteStr]=match,result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);let offset;if(obsOffset){offset=obsOffsets[obsOffset]}else if(milOffset){offset=0}else{offset=signedOffset(offHourStr,offMinuteStr)}return[result,new FixedOffsetZone(offset)]}function preprocessRFC2822(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(match){const[,weekdayStr,dayStr,monthStr,yearStr,hourStr,minuteStr,secondStr]=match,result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}function extractASCII(match){const[,weekdayStr,monthStr,dayStr,hourStr,minuteStr,secondStr,yearStr]=match,result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);return[result,FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex);const isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex);const isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex);const isoTimeCombinedRegex=combineRegexes(isoTimeRegex);const extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone);const extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone);const extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone);const extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(s){return parse(s,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(s){return parse(preprocessRFC2822(s),[rfc2822,extractRFC2822])}function parseHTTPDate(s){return parse(s,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(s){return parse(s,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(s){return parse(s,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex);const sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex);const extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(s){return parse(s,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration";const lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix};const orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];const reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(dur,alts,clear=false){const conf={values:clear?alts.values:{...dur.values,...alts.values||{}},loc:dur.loc.clone(alts.loc),conversionAccuracy:alts.conversionAccuracy||dur.conversionAccuracy,matrix:alts.matrix||dur.matrix};return new Duration(conf)}function antiTrunc(n){return n<0?Math.floor(n):Math.ceil(n)}function convert(matrix,fromMap,fromUnit,toMap,toUnit){const conv=matrix[toUnit][fromUnit],raw=fromMap[fromUnit]/conv,sameSign=Math.sign(raw)===Math.sign(toMap[toUnit]),added=!sameSign&&toMap[toUnit]!==0&&Math.abs(raw)<=1?antiTrunc(raw):Math.trunc(raw);toMap[toUnit]+=added;fromMap[fromUnit]-=added*conv}function normalizeValues(matrix,vals){reverseUnits.reduce(((previous,current)=>{if(!isUndefined(vals[current])){if(previous){convert(matrix,vals,previous,vals,current)}return current}else{return previous}}),null)}function removeZeroes(vals){const newVals={};for(const[key,value]of Object.entries(vals)){if(value!==0){newVals[key]=value}}return newVals}class Duration{constructor(config){const accurate=config.conversionAccuracy==="longterm"||false;let matrix=accurate?accurateMatrix:casualMatrix;if(config.matrix){matrix=config.matrix}this.values=config.values;this.loc=config.loc||Locale.create();this.conversionAccuracy=accurate?"longterm":"casual";this.invalid=config.invalid||null;this.matrix=matrix;this.isLuxonDuration=true}static fromMillis(count,opts){return Duration.fromObject({milliseconds:count},opts)}static fromObject(obj,opts={}){if(obj==null||typeof obj!=="object"){throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${obj===null?"null":typeof obj}`)}return new Duration({values:normalizeObject(obj,Duration.normalizeUnit),loc:Locale.fromObject(opts),conversionAccuracy:opts.conversionAccuracy,matrix:opts.matrix})}static fromDurationLike(durationLike){if(isNumber(durationLike)){return Duration.fromMillis(durationLike)}else if(Duration.isDuration(durationLike)){return durationLike}else if(typeof durationLike==="object"){return Duration.fromObject(durationLike)}else{throw new InvalidArgumentError(`Unknown duration argument ${durationLike} of type ${typeof durationLike}`)}}static fromISO(text,opts){const[parsed]=parseISODuration(text);if(parsed){return Duration.fromObject(parsed,opts)}else{return Duration.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}}static fromISOTime(text,opts){const[parsed]=parseISOTimeOnly(text);if(parsed){return Duration.fromObject(parsed,opts)}else{return Duration.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}}static invalid(reason,explanation=null){if(!reason){throw new InvalidArgumentError("need to specify a reason the Duration is invalid")}const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidDurationError(invalid)}else{return new Duration({invalid})}}static normalizeUnit(unit){const normalized={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[unit?unit.toLowerCase():unit];if(!normalized)throw new InvalidUnitError(unit);return normalized}static isDuration(o){return o&&o.isLuxonDuration||false}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(fmt,opts={}){const fmtOpts={...opts,floor:opts.round!==false&&opts.floor!==false};return this.isValid?Formatter.create(this.loc,fmtOpts).formatDurationFromString(this,fmt):INVALID$2}toHuman(opts={}){const l=orderedUnits$1.map((unit=>{const val=this.values[unit];if(isUndefined(val)){return null}return this.loc.numberFormatter({style:"unit",unitDisplay:"long",...opts,unit:unit.slice(0,-1)}).format(val)})).filter((n=>n));return this.loc.listFormatter({type:"conjunction",style:opts.listStyle||"narrow",...opts}).format(l)}toObject(){if(!this.isValid)return{};return{...this.values}}toISO(){if(!this.isValid)return null;let s="P";if(this.years!==0)s+=this.years+"Y";if(this.months!==0||this.quarters!==0)s+=this.months+this.quarters*3+"M";if(this.weeks!==0)s+=this.weeks+"W";if(this.days!==0)s+=this.days+"D";if(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)s+="T";if(this.hours!==0)s+=this.hours+"H";if(this.minutes!==0)s+=this.minutes+"M";if(this.seconds!==0||this.milliseconds!==0)s+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S";if(s==="P")s+="T0S";return s}toISOTime(opts={}){if(!this.isValid)return null;const millis=this.toMillis();if(millis<0||millis>=864e5)return null;opts={suppressMilliseconds:false,suppressSeconds:false,includePrefix:false,format:"extended",...opts};const value=this.shiftTo("hours","minutes","seconds","milliseconds");let fmt=opts.format==="basic"?"hhmm":"hh:mm";if(!opts.suppressSeconds||value.seconds!==0||value.milliseconds!==0){fmt+=opts.format==="basic"?"ss":":ss";if(!opts.suppressMilliseconds||value.milliseconds!==0){fmt+=".SSS"}}let str=value.toFormat(fmt);if(opts.includePrefix){str="T"+str}return str}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration),result={};for(const k of orderedUnits$1){if(hasOwnProperty(dur.values,k)||hasOwnProperty(this.values,k)){result[k]=dur.get(k)+this.get(k)}}return clone$1(this,{values:result},true)}minus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration);return this.plus(dur.negate())}mapUnits(fn){if(!this.isValid)return this;const result={};for(const k of Object.keys(this.values)){result[k]=asNumber(fn(this.values[k],k))}return clone$1(this,{values:result},true)}get(unit){return this[Duration.normalizeUnit(unit)]}set(values){if(!this.isValid)return this;const mixed={...this.values,...normalizeObject(values,Duration.normalizeUnit)};return clone$1(this,{values:mixed})}reconfigure({locale,numberingSystem,conversionAccuracy,matrix}={}){const loc=this.loc.clone({locale,numberingSystem});const opts={loc,matrix,conversionAccuracy};return clone$1(this,opts)}as(unit){return this.isValid?this.shiftTo(unit).get(unit):NaN}normalize(){if(!this.isValid)return this;const vals=this.toObject();normalizeValues(this.matrix,vals);return clone$1(this,{values:vals},true)}rescale(){if(!this.isValid)return this;const vals=removeZeroes(this.normalize().shiftToAll().toObject());return clone$1(this,{values:vals},true)}shiftTo(...units){if(!this.isValid)return this;if(units.length===0){return this}units=units.map((u=>Duration.normalizeUnit(u)));const built={},accumulated={},vals=this.toObject();let lastUnit;for(const k of orderedUnits$1){if(units.indexOf(k)>=0){lastUnit=k;let own=0;for(const ak in accumulated){own+=this.matrix[ak][k]*accumulated[ak];accumulated[ak]=0}if(isNumber(vals[k])){own+=vals[k]}const i=Math.trunc(own);built[k]=i;accumulated[k]=(own*1e3-i*1e3)/1e3;for(const down in vals){if(orderedUnits$1.indexOf(down)>orderedUnits$1.indexOf(k)){convert(this.matrix,vals,down,built,k)}}}else if(isNumber(vals[k])){accumulated[k]=vals[k]}}for(const key in accumulated){if(accumulated[key]!==0){built[lastUnit]+=key===lastUnit?accumulated[key]:accumulated[key]/this.matrix[lastUnit][key]}}return clone$1(this,{values:built},true).normalize()}shiftToAll(){if(!this.isValid)return this;return this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds")}negate(){if(!this.isValid)return this;const negated={};for(const k of Object.keys(this.values)){negated[k]=this.values[k]===0?0:-this.values[k]}return clone$1(this,{values:negated},true)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(other){if(!this.isValid||!other.isValid){return false}if(!this.loc.equals(other.loc)){return false}function eq(v1,v2){if(v1===undefined||v1===0)return v2===undefined||v2===0;return v1===v2}for(const u of orderedUnits$1){if(!eq(this.values[u],other.values[u])){return false}}return true}}const INVALID$1="Invalid Interval";function validateStartEnd(start,end){if(!start||!start.isValid){return Interval.invalid("missing or invalid start")}else if(!end||!end.isValid){return Interval.invalid("missing or invalid end")}else if(end<start){return Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`)}else{return null}}class Interval{constructor(config){this.s=config.start;this.e=config.end;this.invalid=config.invalid||null;this.isLuxonInterval=true}static invalid(reason,explanation=null){if(!reason){throw new InvalidArgumentError("need to specify a reason the Interval is invalid")}const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidIntervalError(invalid)}else{return new Interval({invalid})}}static fromDateTimes(start,end){const builtStart=friendlyDateTime(start),builtEnd=friendlyDateTime(end);const validateError=validateStartEnd(builtStart,builtEnd);if(validateError==null){return new Interval({start:builtStart,end:builtEnd})}else{return validateError}}static after(start,duration){const dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(start);return Interval.fromDateTimes(dt,dt.plus(dur))}static before(end,duration){const dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(end);return Interval.fromDateTimes(dt.minus(dur),dt)}static fromISO(text,opts){const[s,e]=(text||"").split("/",2);if(s&&e){let start,startIsValid;try{start=DateTime.fromISO(s,opts);startIsValid=start.isValid}catch(e){startIsValid=false}let end,endIsValid;try{end=DateTime.fromISO(e,opts);endIsValid=end.isValid}catch(e){endIsValid=false}if(startIsValid&&endIsValid){return Interval.fromDateTimes(start,end)}if(startIsValid){const dur=Duration.fromISO(e,opts);if(dur.isValid){return Interval.after(start,dur)}}else if(endIsValid){const dur=Duration.fromISO(s,opts);if(dur.isValid){return Interval.before(end,dur)}}}return Interval.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}static isInterval(o){return o&&o.isLuxonInterval||false}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(unit="milliseconds"){return this.isValid?this.toDuration(...[unit]).get(unit):NaN}count(unit="milliseconds"){if(!this.isValid)return NaN;const start=this.start.startOf(unit),end=this.end.startOf(unit);return Math.floor(end.diff(start,unit).get(unit))+1}hasSame(unit){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,unit):false}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(dateTime){if(!this.isValid)return false;return this.s>dateTime}isBefore(dateTime){if(!this.isValid)return false;return this.e<=dateTime}contains(dateTime){if(!this.isValid)return false;return this.s<=dateTime&&this.e>dateTime}set({start,end}={}){if(!this.isValid)return this;return Interval.fromDateTimes(start||this.s,end||this.e)}splitAt(...dateTimes){if(!this.isValid)return[];const sorted=dateTimes.map(friendlyDateTime).filter((d=>this.contains(d))).sort(),results=[];let{s}=this,i=0;while(s<this.e){const added=sorted[i]||this.e,next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next));s=next;i+=1}return results}splitBy(duration){const dur=Duration.fromDurationLike(duration);if(!this.isValid||!dur.isValid||dur.as("milliseconds")===0){return[]}let{s}=this,idx=1,next;const results=[];while(s<this.e){const added=this.start.plus(dur.mapUnits((x=>x*idx)));next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next));s=next;idx+=1}return results}divideEqually(numberOfParts){if(!this.isValid)return[];return this.splitBy(this.length()/numberOfParts).slice(0,numberOfParts)}overlaps(other){return this.e>other.s&&this.s<other.e}abutsStart(other){if(!this.isValid)return false;return+this.e===+other.s}abutsEnd(other){if(!this.isValid)return false;return+other.e===+this.s}engulfs(other){if(!this.isValid)return false;return this.s<=other.s&&this.e>=other.e}equals(other){if(!this.isValid||!other.isValid){return false}return this.s.equals(other.s)&&this.e.equals(other.e)}intersection(other){if(!this.isValid)return this;const s=this.s>other.s?this.s:other.s,e=this.e<other.e?this.e:other.e;if(s>=e){return null}else{return Interval.fromDateTimes(s,e)}}union(other){if(!this.isValid)return this;const s=this.s<other.s?this.s:other.s,e=this.e>other.e?this.e:other.e;return Interval.fromDateTimes(s,e)}static merge(intervals){const[found,final]=intervals.sort(((a,b)=>a.s-b.s)).reduce((([sofar,current],item)=>{if(!current){return[sofar,item]}else if(current.overlaps(item)||current.abutsStart(item)){return[sofar,current.union(item)]}else{return[sofar.concat([current]),item]}}),[[],null]);if(final){found.push(final)}return found}static xor(intervals){let start=null,currentCount=0;const results=[],ends=intervals.map((i=>[{time:i.s,type:"s"},{time:i.e,type:"e"}])),flattened=Array.prototype.concat(...ends),arr=flattened.sort(((a,b)=>a.time-b.time));for(const i of arr){currentCount+=i.type==="s"?1:-1;if(currentCount===1){start=i.time}else{if(start&&+start!==+i.time){results.push(Interval.fromDateTimes(start,i.time))}start=null}}return Interval.merge(results)}difference(...intervals){return Interval.xor([this].concat(intervals)).map((i=>this.intersection(i))).filter((i=>i&&!i.isEmpty()))}toString(){if(!this.isValid)return INVALID$1;return`[${this.s.toISO()}  ${this.e.toISO()})`}toLocaleString(formatOpts=DATE_SHORT,opts={}){return this.isValid?Formatter.create(this.s.loc.clone(opts),formatOpts).formatInterval(this):INVALID$1}toISO(opts){if(!this.isValid)return INVALID$1;return`${this.s.toISO(opts)}/${this.e.toISO(opts)}`}toISODate(){if(!this.isValid)return INVALID$1;return`${this.s.toISODate()}/${this.e.toISODate()}`}toISOTime(opts){if(!this.isValid)return INVALID$1;return`${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`}toFormat(dateFormat,{separator="  "}={}){if(!this.isValid)return INVALID$1;return`${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`}toDuration(unit,opts){if(!this.isValid){return Duration.invalid(this.invalidReason)}return this.e.diff(this.s,unit,opts)}mapEndpoints(mapFn){return Interval.fromDateTimes(mapFn(this.s),mapFn(this.e))}}class Info{static hasDST(zone=Settings.defaultZone){const proto=DateTime.now().setZone(zone).set({month:12});return!zone.isUniversal&&proto.offset!==proto.set({month:6}).offset}static isValidIANAZone(zone){return IANAZone.isValidZone(zone)}static normalizeZone(input){return normalizeZone(input,Settings.defaultZone)}static months(length="long",{locale=null,numberingSystem=null,locObj=null,outputCalendar="gregory"}={}){return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length)}static monthsFormat(length="long",{locale=null,numberingSystem=null,locObj=null,outputCalendar="gregory"}={}){return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length,true)}static weekdays(length="long",{locale=null,numberingSystem=null,locObj=null}={}){return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length)}static weekdaysFormat(length="long",{locale=null,numberingSystem=null,locObj=null}={}){return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length,true)}static meridiems({locale=null}={}){return Locale.create(locale).meridiems()}static eras(length="short",{locale=null}={}){return Locale.create(locale,null,"gregory").eras(length)}static features(){return{relative:hasRelative()}}}function dayDiff(earlier,later){const utcDayStart=dt=>dt.toUTC(0,{keepLocalTime:true}).startOf("day").valueOf(),ms=utcDayStart(later)-utcDayStart(earlier);return Math.floor(Duration.fromMillis(ms).as("days"))}function highOrderDiffs(cursor,later,units){const differs=[["years",(a,b)=>b.year-a.year],["quarters",(a,b)=>b.quarter-a.quarter+(b.year-a.year)*4],["months",(a,b)=>b.month-a.month+(b.year-a.year)*12],["weeks",(a,b)=>{const days=dayDiff(a,b);return(days-days%7)/7}],["days",dayDiff]];const results={};const earlier=cursor;let lowestOrder,highWater;for(const[unit,differ]of differs){if(units.indexOf(unit)>=0){lowestOrder=unit;results[unit]=differ(cursor,later);highWater=earlier.plus(results);if(highWater>later){results[unit]--;cursor=earlier.plus(results)}else{cursor=highWater}}}return[cursor,results,highWater,lowestOrder]}function diff(earlier,later,units,opts){let[cursor,results,highWater,lowestOrder]=highOrderDiffs(earlier,later,units);const remainingMillis=later-cursor;const lowerOrderUnits=units.filter((u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0));if(lowerOrderUnits.length===0){if(highWater<later){highWater=cursor.plus({[lowestOrder]:1})}if(highWater!==cursor){results[lowestOrder]=(results[lowestOrder]||0)+remainingMillis/(highWater-cursor)}}const duration=Duration.fromObject(results,opts);if(lowerOrderUnits.length>0){return Duration.fromMillis(remainingMillis,opts).shiftTo(...lowerOrderUnits).plus(duration)}else{return duration}}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"};const numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]};const hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(str){let value=parseInt(str,10);if(isNaN(value)){value="";for(let i=0;i<str.length;i++){const code=str.charCodeAt(i);if(str[i].search(numberingSystems.hanidec)!==-1){value+=hanidecChars.indexOf(str[i])}else{for(const key in numberingSystemsUTF16){const[min,max]=numberingSystemsUTF16[key];if(code>=min&&code<=max){value+=code-min}}}}return parseInt(value,10)}else{return value}}function digitRegex({numberingSystem},append=""){return new RegExp(`${numberingSystems[numberingSystem||"latn"]}${append}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(regex,post=(i=>i)){return{regex,deser:([s])=>post(parseDigits(s))}}const NBSP=String.fromCharCode(160);const spaceOrNBSP=`[ ${NBSP}]`;const spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(s){return s.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(s){return s.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(strings,startIndex){if(strings===null){return null}else{return{regex:RegExp(strings.map(fixListRegex).join("|")),deser:([s])=>strings.findIndex((i=>stripInsensitivities(s)===stripInsensitivities(i)))+startIndex}}}function offset(regex,groups){return{regex,deser:([,h,m])=>signedOffset(h,m),groups}}function simple(regex){return{regex,deser:([s])=>s}}function escapeToken(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(token,loc){const one=digitRegex(loc),two=digitRegex(loc,"{2}"),three=digitRegex(loc,"{3}"),four=digitRegex(loc,"{4}"),six=digitRegex(loc,"{6}"),oneOrTwo=digitRegex(loc,"{1,2}"),oneToThree=digitRegex(loc,"{1,3}"),oneToSix=digitRegex(loc,"{1,6}"),oneToNine=digitRegex(loc,"{1,9}"),twoToFour=digitRegex(loc,"{2,4}"),fourToSix=digitRegex(loc,"{4,6}"),literal=t=>({regex:RegExp(escapeToken(t.val)),deser:([s])=>s,literal:true}),unitate=t=>{if(token.literal){return literal(t)}switch(t.val){case"G":return oneOf(loc.eras("short",false),0);case"GG":return oneOf(loc.eras("long",false),0);case"y":return intUnit(oneToSix);case"yy":return intUnit(twoToFour,untruncateYear);case"yyyy":return intUnit(four);case"yyyyy":return intUnit(fourToSix);case"yyyyyy":return intUnit(six);case"M":return intUnit(oneOrTwo);case"MM":return intUnit(two);case"MMM":return oneOf(loc.months("short",true,false),1);case"MMMM":return oneOf(loc.months("long",true,false),1);case"L":return intUnit(oneOrTwo);case"LL":return intUnit(two);case"LLL":return oneOf(loc.months("short",false,false),1);case"LLLL":return oneOf(loc.months("long",false,false),1);case"d":return intUnit(oneOrTwo);case"dd":return intUnit(two);case"o":return intUnit(oneToThree);case"ooo":return intUnit(three);case"HH":return intUnit(two);case"H":return intUnit(oneOrTwo);case"hh":return intUnit(two);case"h":return intUnit(oneOrTwo);case"mm":return intUnit(two);case"m":return intUnit(oneOrTwo);case"q":return intUnit(oneOrTwo);case"qq":return intUnit(two);case"s":return intUnit(oneOrTwo);case"ss":return intUnit(two);case"S":return intUnit(oneToThree);case"SSS":return intUnit(three);case"u":return simple(oneToNine);case"uu":return simple(oneOrTwo);case"uuu":return intUnit(one);case"a":return oneOf(loc.meridiems(),0);case"kkkk":return intUnit(four);case"kk":return intUnit(twoToFour,untruncateYear);case"W":return intUnit(oneOrTwo);case"WW":return intUnit(two);case"E":case"c":return intUnit(one);case"EEE":return oneOf(loc.weekdays("short",false,false),1);case"EEEE":return oneOf(loc.weekdays("long",false,false),1);case"ccc":return oneOf(loc.weekdays("short",true,false),1);case"cccc":return oneOf(loc.weekdays("long",true,false),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);default:return literal(t)}};const unit=unitate(token)||{invalidReason:MISSING_FTP};unit.token=token;return unit}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function tokenForPart(part,formatOpts){const{type,value}=part;if(type==="literal"){return{literal:true,val:value}}const style=formatOpts[type];let val=partTypeStyleToTokenVal[type];if(typeof val==="object"){val=val[style]}if(val){return{literal:false,val}}return undefined}function buildRegex(units){const re=units.map((u=>u.regex)).reduce(((f,r)=>`${f}(${r.source})`),"");return[`^${re}$`,units]}function match(input,regex,handlers){const matches=input.match(regex);if(matches){const all={};let matchIndex=1;for(const i in handlers){if(hasOwnProperty(handlers,i)){const h=handlers[i],groups=h.groups?h.groups+1:1;if(!h.literal&&h.token){all[h.token.val[0]]=h.deser(matches.slice(matchIndex,matchIndex+groups))}matchIndex+=groups}}return[matches,all]}else{return[matches,{}]}}function dateTimeFromMatches(matches){const toField=token=>{switch(token){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let zone=null;let specificOffset;if(!isUndefined(matches.z)){zone=IANAZone.create(matches.z)}if(!isUndefined(matches.Z)){if(!zone){zone=new FixedOffsetZone(matches.Z)}specificOffset=matches.Z}if(!isUndefined(matches.q)){matches.M=(matches.q-1)*3+1}if(!isUndefined(matches.h)){if(matches.h<12&&matches.a===1){matches.h+=12}else if(matches.h===12&&matches.a===0){matches.h=0}}if(matches.G===0&&matches.y){matches.y=-matches.y}if(!isUndefined(matches.u)){matches.S=parseMillis(matches.u)}const vals=Object.keys(matches).reduce(((r,k)=>{const f=toField(k);if(f){r[f]=matches[k]}return r}),{});return[vals,zone,specificOffset]}let dummyDateTimeCache=null;function getDummyDateTime(){if(!dummyDateTimeCache){dummyDateTimeCache=DateTime.fromMillis(1555555555555)}return dummyDateTimeCache}function maybeExpandMacroToken(token,locale){if(token.literal){return token}const formatOpts=Formatter.macroTokenToFormatOpts(token.val);const tokens=formatOptsToTokens(formatOpts,locale);if(tokens==null||tokens.includes(undefined)){return token}return tokens}function expandMacroTokens(tokens,locale){return Array.prototype.concat(...tokens.map((t=>maybeExpandMacroToken(t,locale))))}function explainFromTokens(locale,input,format){const tokens=expandMacroTokens(Formatter.parseFormat(format),locale),units=tokens.map((t=>unitForToken(t,locale))),disqualifyingUnit=units.find((t=>t.invalidReason));if(disqualifyingUnit){return{input,tokens,invalidReason:disqualifyingUnit.invalidReason}}else{const[regexString,handlers]=buildRegex(units),regex=RegExp(regexString,"i"),[rawMatches,matches]=match(input,regex,handlers),[result,zone,specificOffset]=matches?dateTimeFromMatches(matches):[null,null,undefined];if(hasOwnProperty(matches,"a")&&hasOwnProperty(matches,"H")){throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format")}return{input,tokens,regex,rawMatches,matches,result,zone,specificOffset}}}function parseFromTokens(locale,input,format){const{result,zone,specificOffset,invalidReason}=explainFromTokens(locale,input,format);return[result,zone,specificOffset,invalidReason]}function formatOptsToTokens(formatOpts,locale){if(!formatOpts){return null}const formatter=Formatter.create(locale,formatOpts);const parts=formatter.formatDateTimeParts(getDummyDateTime());return parts.map((p=>tokenForPart(p,formatOpts)))}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(unit,value){return new Invalid("unit out of range",`you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`)}function dayOfWeek(year,month,day){const d=new Date(Date.UTC(year,month-1,day));if(year<100&&year>=0){d.setUTCFullYear(d.getUTCFullYear()-1900)}const js=d.getUTCDay();return js===0?7:js}function computeOrdinal(year,month,day){return day+(isLeapYear(year)?leapLadder:nonLeapLadder)[month-1]}function uncomputeOrdinal(year,ordinal){const table=isLeapYear(year)?leapLadder:nonLeapLadder,month0=table.findIndex((i=>i<ordinal)),day=ordinal-table[month0];return{month:month0+1,day}}function gregorianToWeek(gregObj){const{year,month,day}=gregObj,ordinal=computeOrdinal(year,month,day),weekday=dayOfWeek(year,month,day);let weekNumber=Math.floor((ordinal-weekday+10)/7),weekYear;if(weekNumber<1){weekYear=year-1;weekNumber=weeksInWeekYear(weekYear)}else if(weekNumber>weeksInWeekYear(year)){weekYear=year+1;weekNumber=1}else{weekYear=year}return{weekYear,weekNumber,weekday,...timeObject(gregObj)}}function weekToGregorian(weekData){const{weekYear,weekNumber,weekday}=weekData,weekdayOfJan4=dayOfWeek(weekYear,1,4),yearInDays=daysInYear(weekYear);let ordinal=weekNumber*7+weekday-weekdayOfJan4-3,year;if(ordinal<1){year=weekYear-1;ordinal+=daysInYear(year)}else if(ordinal>yearInDays){year=weekYear+1;ordinal-=daysInYear(weekYear)}else{year=weekYear}const{month,day}=uncomputeOrdinal(year,ordinal);return{year,month,day,...timeObject(weekData)}}function gregorianToOrdinal(gregData){const{year,month,day}=gregData;const ordinal=computeOrdinal(year,month,day);return{year,ordinal,...timeObject(gregData)}}function ordinalToGregorian(ordinalData){const{year,ordinal}=ordinalData;const{month,day}=uncomputeOrdinal(year,ordinal);return{year,month,day,...timeObject(ordinalData)}}function hasInvalidWeekData(obj){const validYear=isInteger(obj.weekYear),validWeek=integerBetween(obj.weekNumber,1,weeksInWeekYear(obj.weekYear)),validWeekday=integerBetween(obj.weekday,1,7);if(!validYear){return unitOutOfRange("weekYear",obj.weekYear)}else if(!validWeek){return unitOutOfRange("week",obj.week)}else if(!validWeekday){return unitOutOfRange("weekday",obj.weekday)}else return false}function hasInvalidOrdinalData(obj){const validYear=isInteger(obj.year),validOrdinal=integerBetween(obj.ordinal,1,daysInYear(obj.year));if(!validYear){return unitOutOfRange("year",obj.year)}else if(!validOrdinal){return unitOutOfRange("ordinal",obj.ordinal)}else return false}function hasInvalidGregorianData(obj){const validYear=isInteger(obj.year),validMonth=integerBetween(obj.month,1,12),validDay=integerBetween(obj.day,1,daysInMonth(obj.year,obj.month));if(!validYear){return unitOutOfRange("year",obj.year)}else if(!validMonth){return unitOutOfRange("month",obj.month)}else if(!validDay){return unitOutOfRange("day",obj.day)}else return false}function hasInvalidTimeData(obj){const{hour,minute,second,millisecond}=obj;const validHour=integerBetween(hour,0,23)||hour===24&&minute===0&&second===0&&millisecond===0,validMinute=integerBetween(minute,0,59),validSecond=integerBetween(second,0,59),validMillisecond=integerBetween(millisecond,0,999);if(!validHour){return unitOutOfRange("hour",hour)}else if(!validMinute){return unitOutOfRange("minute",minute)}else if(!validSecond){return unitOutOfRange("second",second)}else if(!validMillisecond){return unitOutOfRange("millisecond",millisecond)}else return false}const INVALID="Invalid DateTime";const MAX_DATE=864e13;function unsupportedZone(zone){return new Invalid("unsupported zone",`the zone "${zone.name}" is not supported`)}function possiblyCachedWeekData(dt){if(dt.weekData===null){dt.weekData=gregorianToWeek(dt.c)}return dt.weekData}function clone(inst,alts){const current={ts:inst.ts,zone:inst.zone,c:inst.c,o:inst.o,loc:inst.loc,invalid:inst.invalid};return new DateTime({...current,...alts,old:current})}function fixOffset(localTS,o,tz){let utcGuess=localTS-o*60*1e3;const o2=tz.offset(utcGuess);if(o===o2){return[utcGuess,o]}utcGuess-=(o2-o)*60*1e3;const o3=tz.offset(utcGuess);if(o2===o3){return[utcGuess,o2]}return[localTS-Math.min(o2,o3)*60*1e3,Math.max(o2,o3)]}function tsToObj(ts,offset){ts+=offset*60*1e3;const d=new Date(ts);return{year:d.getUTCFullYear(),month:d.getUTCMonth()+1,day:d.getUTCDate(),hour:d.getUTCHours(),minute:d.getUTCMinutes(),second:d.getUTCSeconds(),millisecond:d.getUTCMilliseconds()}}function objToTS(obj,offset,zone){return fixOffset(objToLocalTS(obj),offset,zone)}function adjustTime(inst,dur){const oPre=inst.o,year=inst.c.year+Math.trunc(dur.years),month=inst.c.month+Math.trunc(dur.months)+Math.trunc(dur.quarters)*3,c={...inst.c,year,month,day:Math.min(inst.c.day,daysInMonth(year,month))+Math.trunc(dur.days)+Math.trunc(dur.weeks)*7},millisToAdd=Duration.fromObject({years:dur.years-Math.trunc(dur.years),quarters:dur.quarters-Math.trunc(dur.quarters),months:dur.months-Math.trunc(dur.months),weeks:dur.weeks-Math.trunc(dur.weeks),days:dur.days-Math.trunc(dur.days),hours:dur.hours,minutes:dur.minutes,seconds:dur.seconds,milliseconds:dur.milliseconds}).as("milliseconds"),localTS=objToLocalTS(c);let[ts,o]=fixOffset(localTS,oPre,inst.zone);if(millisToAdd!==0){ts+=millisToAdd;o=inst.zone.offset(ts)}return{ts,o}}function parseDataToDateTime(parsed,parsedZone,opts,format,text,specificOffset){const{setZone,zone}=opts;if(parsed&&Object.keys(parsed).length!==0){const interpretationZone=parsedZone||zone,inst=DateTime.fromObject(parsed,{...opts,zone:interpretationZone,specificOffset});return setZone?inst:inst.setZone(zone)}else{return DateTime.invalid(new Invalid("unparsable",`the input "${text}" can't be parsed as ${format}`))}}function toTechFormat(dt,format,allowZ=true){return dt.isValid?Formatter.create(Locale.create("en-US"),{allowZ,forceSimple:true}).formatDateTimeFromString(dt,format):null}function toISODate(o,extended){const longFormat=o.c.year>9999||o.c.year<0;let c="";if(longFormat&&o.c.year>=0)c+="+";c+=padStart(o.c.year,longFormat?6:4);if(extended){c+="-";c+=padStart(o.c.month);c+="-";c+=padStart(o.c.day)}else{c+=padStart(o.c.month);c+=padStart(o.c.day)}return c}function toISOTime(o,extended,suppressSeconds,suppressMilliseconds,includeOffset,extendedZone){let c=padStart(o.c.hour);if(extended){c+=":";c+=padStart(o.c.minute);if(o.c.second!==0||!suppressSeconds){c+=":"}}else{c+=padStart(o.c.minute)}if(o.c.second!==0||!suppressSeconds){c+=padStart(o.c.second);if(o.c.millisecond!==0||!suppressMilliseconds){c+=".";c+=padStart(o.c.millisecond,3)}}if(includeOffset){if(o.isOffsetFixed&&o.offset===0&&!extendedZone){c+="Z"}else if(o.o<0){c+="-";c+=padStart(Math.trunc(-o.o/60));c+=":";c+=padStart(Math.trunc(-o.o%60))}else{c+="+";c+=padStart(Math.trunc(o.o/60));c+=":";c+=padStart(Math.trunc(o.o%60))}}if(extendedZone){c+="["+o.zone.ianaName+"]"}return c}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0};const orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(unit){const normalized={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[unit.toLowerCase()];if(!normalized)throw new InvalidUnitError(unit);return normalized}function quickDT(obj,opts){const zone=normalizeZone(opts.zone,Settings.defaultZone),loc=Locale.fromObject(opts),tsNow=Settings.now();let ts,o;if(!isUndefined(obj.year)){for(const u of orderedUnits){if(isUndefined(obj[u])){obj[u]=defaultUnitValues[u]}}const invalid=hasInvalidGregorianData(obj)||hasInvalidTimeData(obj);if(invalid){return DateTime.invalid(invalid)}const offsetProvis=zone.offset(tsNow);[ts,o]=objToTS(obj,offsetProvis,zone)}else{ts=tsNow}return new DateTime({ts,zone,loc,o})}function diffRelative(start,end,opts){const round=isUndefined(opts.round)?true:opts.round,format=(c,unit)=>{c=roundTo(c,round||opts.calendary?0:2,true);const formatter=end.loc.clone(opts).relFormatter(opts);return formatter.format(c,unit)},differ=unit=>{if(opts.calendary){if(!end.hasSame(start,unit)){return end.startOf(unit).diff(start.startOf(unit),unit).get(unit)}else return 0}else{return end.diff(start,unit).get(unit)}};if(opts.unit){return format(differ(opts.unit),opts.unit)}for(const unit of opts.units){const count=differ(unit);if(Math.abs(count)>=1){return format(count,unit)}}return format(start>end?-0:0,opts.units[opts.units.length-1])}function lastOpts(argList){let opts={},args;if(argList.length>0&&typeof argList[argList.length-1]==="object"){opts=argList[argList.length-1];args=Array.from(argList).slice(0,argList.length-1)}else{args=Array.from(argList)}return[opts,args]}class DateTime{constructor(config){const zone=config.zone||Settings.defaultZone;let invalid=config.invalid||(Number.isNaN(config.ts)?new Invalid("invalid input"):null)||(!zone.isValid?unsupportedZone(zone):null);this.ts=isUndefined(config.ts)?Settings.now():config.ts;let c=null,o=null;if(!invalid){const unchanged=config.old&&config.old.ts===this.ts&&config.old.zone.equals(zone);if(unchanged){[c,o]=[config.old.c,config.old.o]}else{const ot=zone.offset(this.ts);c=tsToObj(this.ts,ot);invalid=Number.isNaN(c.year)?new Invalid("invalid input"):null;c=invalid?null:c;o=invalid?null:ot}}this._zone=zone;this.loc=config.loc||Locale.create();this.invalid=invalid;this.weekData=null;this.c=c;this.o=o;this.isLuxonDateTime=true}static now(){return new DateTime({})}static local(){const[opts,args]=lastOpts(arguments),[year,month,day,hour,minute,second,millisecond]=args;return quickDT({year,month,day,hour,minute,second,millisecond},opts)}static utc(){const[opts,args]=lastOpts(arguments),[year,month,day,hour,minute,second,millisecond]=args;opts.zone=FixedOffsetZone.utcInstance;return quickDT({year,month,day,hour,minute,second,millisecond},opts)}static fromJSDate(date,options={}){const ts=isDate(date)?date.valueOf():NaN;if(Number.isNaN(ts)){return DateTime.invalid("invalid input")}const zoneToUse=normalizeZone(options.zone,Settings.defaultZone);if(!zoneToUse.isValid){return DateTime.invalid(unsupportedZone(zoneToUse))}return new DateTime({ts,zone:zoneToUse,loc:Locale.fromObject(options)})}static fromMillis(milliseconds,options={}){if(!isNumber(milliseconds)){throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`)}else if(milliseconds<-MAX_DATE||milliseconds>MAX_DATE){return DateTime.invalid("Timestamp out of range")}else{return new DateTime({ts:milliseconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})}}static fromSeconds(seconds,options={}){if(!isNumber(seconds)){throw new InvalidArgumentError("fromSeconds requires a numerical input")}else{return new DateTime({ts:seconds*1e3,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)})}}static fromObject(obj,opts={}){obj=obj||{};const zoneToUse=normalizeZone(opts.zone,Settings.defaultZone);if(!zoneToUse.isValid){return DateTime.invalid(unsupportedZone(zoneToUse))}const tsNow=Settings.now(),offsetProvis=!isUndefined(opts.specificOffset)?opts.specificOffset:zoneToUse.offset(tsNow),normalized=normalizeObject(obj,normalizeUnit),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber,loc=Locale.fromObject(opts);if((containsGregor||containsOrdinal)&&definiteWeekDef){throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(containsGregorMD&&containsOrdinal){throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day")}const useWeekData=definiteWeekDef||normalized.weekday&&!containsGregor;let units,defaultValues,objNow=tsToObj(tsNow,offsetProvis);if(useWeekData){units=orderedWeekUnits;defaultValues=defaultWeekUnitValues;objNow=gregorianToWeek(objNow)}else if(containsOrdinal){units=orderedOrdinalUnits;defaultValues=defaultOrdinalUnitValues;objNow=gregorianToOrdinal(objNow)}else{units=orderedUnits;defaultValues=defaultUnitValues}let foundFirst=false;for(const u of units){const v=normalized[u];if(!isUndefined(v)){foundFirst=true}else if(foundFirst){normalized[u]=defaultValues[u]}else{normalized[u]=objNow[u]}}const higherOrderInvalid=useWeekData?hasInvalidWeekData(normalized):containsOrdinal?hasInvalidOrdinalData(normalized):hasInvalidGregorianData(normalized),invalid=higherOrderInvalid||hasInvalidTimeData(normalized);if(invalid){return DateTime.invalid(invalid)}const gregorian=useWeekData?weekToGregorian(normalized):containsOrdinal?ordinalToGregorian(normalized):normalized,[tsFinal,offsetFinal]=objToTS(gregorian,offsetProvis,zoneToUse),inst=new DateTime({ts:tsFinal,zone:zoneToUse,o:offsetFinal,loc});if(normalized.weekday&&containsGregor&&obj.weekday!==inst.weekday){return DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`)}return inst}static fromISO(text,opts={}){const[vals,parsedZone]=parseISODate(text);return parseDataToDateTime(vals,parsedZone,opts,"ISO 8601",text)}static fromRFC2822(text,opts={}){const[vals,parsedZone]=parseRFC2822Date(text);return parseDataToDateTime(vals,parsedZone,opts,"RFC 2822",text)}static fromHTTP(text,opts={}){const[vals,parsedZone]=parseHTTPDate(text);return parseDataToDateTime(vals,parsedZone,opts,"HTTP",opts)}static fromFormat(text,fmt,opts={}){if(isUndefined(text)||isUndefined(fmt)){throw new InvalidArgumentError("fromFormat requires an input string and a format")}const{locale=null,numberingSystem=null}=opts,localeToUse=Locale.fromOpts({locale,numberingSystem,defaultToEN:true}),[vals,parsedZone,specificOffset,invalid]=parseFromTokens(localeToUse,text,fmt);if(invalid){return DateTime.invalid(invalid)}else{return parseDataToDateTime(vals,parsedZone,opts,`format ${fmt}`,text,specificOffset)}}static fromString(text,fmt,opts={}){return DateTime.fromFormat(text,fmt,opts)}static fromSQL(text,opts={}){const[vals,parsedZone]=parseSQL(text);return parseDataToDateTime(vals,parsedZone,opts,"SQL",text)}static invalid(reason,explanation=null){if(!reason){throw new InvalidArgumentError("need to specify a reason the DateTime is invalid")}const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid){throw new InvalidDateTimeError(invalid)}else{return new DateTime({invalid})}}static isDateTime(o){return o&&o.isLuxonDateTime||false}static parseFormatForOpts(formatOpts,localeOpts={}){const tokenList=formatOptsToTokens(formatOpts,Locale.fromObject(localeOpts));return!tokenList?null:tokenList.map((t=>t?t.val:null)).join("")}static expandFormat(fmt,localeOpts={}){const expanded=expandMacroTokens(Formatter.parseFormat(fmt),Locale.fromObject(localeOpts));return expanded.map((t=>t.val)).join("")}get(unit){return this[unit]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"short",locale:this.locale})}else{return null}}get offsetNameLong(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"long",locale:this.locale})}else{return null}}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){if(this.isOffsetFixed){return false}else{return this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}resolvedLocaleOptions(opts={}){const{locale,numberingSystem,calendar}=Formatter.create(this.loc.clone(opts),opts).resolvedOptions(this);return{locale,numberingSystem,outputCalendar:calendar}}toUTC(offset=0,opts={}){return this.setZone(FixedOffsetZone.instance(offset),opts)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(zone,{keepLocalTime=false,keepCalendarTime=false}={}){zone=normalizeZone(zone,Settings.defaultZone);if(zone.equals(this.zone)){return this}else if(!zone.isValid){return DateTime.invalid(unsupportedZone(zone))}else{let newTS=this.ts;if(keepLocalTime||keepCalendarTime){const offsetGuess=zone.offset(this.ts);const asObj=this.toObject();[newTS]=objToTS(asObj,offsetGuess,zone)}return clone(this,{ts:newTS,zone})}}reconfigure({locale,numberingSystem,outputCalendar}={}){const loc=this.loc.clone({locale,numberingSystem,outputCalendar});return clone(this,{loc})}setLocale(locale){return this.reconfigure({locale})}set(values){if(!this.isValid)return this;const normalized=normalizeObject(values,normalizeUnit),settingWeekStuff=!isUndefined(normalized.weekYear)||!isUndefined(normalized.weekNumber)||!isUndefined(normalized.weekday),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber;if((containsGregor||containsOrdinal)&&definiteWeekDef){throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(containsGregorMD&&containsOrdinal){throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day")}let mixed;if(settingWeekStuff){mixed=weekToGregorian({...gregorianToWeek(this.c),...normalized})}else if(!isUndefined(normalized.ordinal)){mixed=ordinalToGregorian({...gregorianToOrdinal(this.c),...normalized})}else{mixed={...this.toObject(),...normalized};if(isUndefined(normalized.day)){mixed.day=Math.min(daysInMonth(mixed.year,mixed.month),mixed.day)}}const[ts,o]=objToTS(mixed,this.o,this.zone);return clone(this,{ts,o})}plus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration);return clone(this,adjustTime(this,dur))}minus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration).negate();return clone(this,adjustTime(this,dur))}startOf(unit){if(!this.isValid)return this;const o={},normalizedUnit=Duration.normalizeUnit(unit);switch(normalizedUnit){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(normalizedUnit==="weeks"){o.weekday=1}if(normalizedUnit==="quarters"){const q=Math.ceil(this.month/3);o.month=(q-1)*3+1}return this.set(o)}endOf(unit){return this.isValid?this.plus({[unit]:1}).startOf(unit).minus(1):this}toFormat(fmt,opts={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this,fmt):INVALID}toLocaleString(formatOpts=DATE_SHORT,opts={}){return this.isValid?Formatter.create(this.loc.clone(opts),formatOpts).formatDateTime(this):INVALID}toLocaleParts(opts={}){return this.isValid?Formatter.create(this.loc.clone(opts),opts).formatDateTimeParts(this):[]}toISO({format="extended",suppressSeconds=false,suppressMilliseconds=false,includeOffset=true,extendedZone=false}={}){if(!this.isValid){return null}const ext=format==="extended";let c=toISODate(this,ext);c+="T";c+=toISOTime(this,ext,suppressSeconds,suppressMilliseconds,includeOffset,extendedZone);return c}toISODate({format="extended"}={}){if(!this.isValid){return null}return toISODate(this,format==="extended")}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds=false,suppressSeconds=false,includeOffset=true,includePrefix=false,extendedZone=false,format="extended"}={}){if(!this.isValid){return null}let c=includePrefix?"T":"";return c+toISOTime(this,format==="extended",suppressSeconds,suppressMilliseconds,includeOffset,extendedZone)}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",false)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){if(!this.isValid){return null}return toISODate(this,true)}toSQLTime({includeOffset=true,includeZone=false,includeOffsetSpace=true}={}){let fmt="HH:mm:ss.SSS";if(includeZone||includeOffset){if(includeOffsetSpace){fmt+=" "}if(includeZone){fmt+="z"}else if(includeOffset){fmt+="ZZ"}}return toTechFormat(this,fmt,true)}toSQL(opts={}){if(!this.isValid){return null}return`${this.toSQLDate()} ${this.toSQLTime(opts)}`}toString(){return this.isValid?this.toISO():INVALID}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(opts={}){if(!this.isValid)return{};const base={...this.c};if(opts.includeConfig){base.outputCalendar=this.outputCalendar;base.numberingSystem=this.loc.numberingSystem;base.locale=this.loc.locale}return base}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(otherDateTime,unit="milliseconds",opts={}){if(!this.isValid||!otherDateTime.isValid){return Duration.invalid("created by diffing an invalid DateTime")}const durOpts={locale:this.locale,numberingSystem:this.numberingSystem,...opts};const units=maybeArray(unit).map(Duration.normalizeUnit),otherIsLater=otherDateTime.valueOf()>this.valueOf(),earlier=otherIsLater?this:otherDateTime,later=otherIsLater?otherDateTime:this,diffed=diff(earlier,later,units,durOpts);return otherIsLater?diffed.negate():diffed}diffNow(unit="milliseconds",opts={}){return this.diff(DateTime.now(),unit,opts)}until(otherDateTime){return this.isValid?Interval.fromDateTimes(this,otherDateTime):this}hasSame(otherDateTime,unit){if(!this.isValid)return false;const inputMs=otherDateTime.valueOf();const adjustedToZone=this.setZone(otherDateTime.zone,{keepLocalTime:true});return adjustedToZone.startOf(unit)<=inputMs&&inputMs<=adjustedToZone.endOf(unit)}equals(other){return this.isValid&&other.isValid&&this.valueOf()===other.valueOf()&&this.zone.equals(other.zone)&&this.loc.equals(other.loc)}toRelative(options={}){if(!this.isValid)return null;const base=options.base||DateTime.fromObject({},{zone:this.zone}),padding=options.padding?this<base?-options.padding:options.padding:0;let units=["years","months","days","hours","minutes","seconds"];let unit=options.unit;if(Array.isArray(options.unit)){units=options.unit;unit=undefined}return diffRelative(base,this.plus(padding),{...options,numeric:"always",units,unit})}toRelativeCalendar(options={}){if(!this.isValid)return null;return diffRelative(options.base||DateTime.fromObject({},{zone:this.zone}),this,{...options,numeric:"auto",units:["years","months","days"],calendary:true})}static min(...dateTimes){if(!dateTimes.every(DateTime.isDateTime)){throw new InvalidArgumentError("min requires all arguments be DateTimes")}return bestBy(dateTimes,(i=>i.valueOf()),Math.min)}static max(...dateTimes){if(!dateTimes.every(DateTime.isDateTime)){throw new InvalidArgumentError("max requires all arguments be DateTimes")}return bestBy(dateTimes,(i=>i.valueOf()),Math.max)}static fromFormatExplain(text,fmt,options={}){const{locale=null,numberingSystem=null}=options,localeToUse=Locale.fromOpts({locale,numberingSystem,defaultToEN:true});return explainFromTokens(localeToUse,text,fmt)}static fromStringExplain(text,fmt,options={}){return DateTime.fromFormatExplain(text,fmt,options)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(dateTimeish){if(DateTime.isDateTime(dateTimeish)){return dateTimeish}else if(dateTimeish&&dateTimeish.valueOf&&isNumber(dateTimeish.valueOf())){return DateTime.fromJSDate(dateTimeish)}else if(dateTimeish&&typeof dateTimeish==="object"){return DateTime.fromObject(dateTimeish)}else{throw new InvalidArgumentError(`Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`)}}function getIntervalStatement(){const tzOffset=DateTime.now().offset/60;const interval=tzOffset!==0?`${tzOffset>0?"+":"-"}INTERVAL '${Math.abs(tzOffset)-1}:59:59' HOUR TO SECOND`:"";return interval}function getTimeBinGroupByFieldsForStatistics(dateFieldName,timeIntervalUnits){const interval=getIntervalStatement();const yearPart=`EXTRACT(YEAR FROM ${dateFieldName} ${interval})`;const monthPart=`EXTRACT(MONTH FROM ${dateFieldName} ${interval})`;const dayPart=`EXTRACT(DAY FROM ${dateFieldName} ${interval})`;const hourPart=`EXTRACT(HOUR FROM ${dateFieldName} ${interval})`;const minutePart=`EXTRACT(MINUTE FROM ${dateFieldName} ${interval})`;const secondPart=`EXTRACT(SECOND FROM ${dateFieldName} ${interval})`;let dateExpression=[];switch(timeIntervalUnits){case WebChartTimeIntervalUnits.Seconds:dateExpression=[yearPart,monthPart,dayPart,hourPart,minutePart,secondPart];break;case WebChartTimeIntervalUnits.Minutes:dateExpression=[yearPart,monthPart,dayPart,hourPart,minutePart];break;case WebChartTimeIntervalUnits.Hours:dateExpression=[yearPart,monthPart,dayPart,hourPart];break;case WebChartTimeIntervalUnits.Days:case WebChartTimeIntervalUnits.Weeks:case WebChartTimeIntervalUnits.Months:case WebChartTimeIntervalUnits.Years:dateExpression=[yearPart,monthPart,dayPart];break}return dateExpression}function getQueryTimeExtent(queryObject,defaultTimeExtent){let queryTimeExtent=defaultTimeExtent;if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);const layerTimeExtent=layer.timeExtent;if(layerTimeExtent!==undefined&&layerTimeExtent!==null){queryTimeExtent=[layerTimeExtent.start.valueOf(),layerTimeExtent.end.valueOf()]}}return queryTimeExtent}function getQueryGeometry(queryObject,defaultGeometry){let queryGeometry=defaultGeometry;if(isFeatureLayerView(queryObject)===true){const viewExtent=queryObject.view.extent;const{xmin,xmax,ymin,ymax,zmin,zmax,spatialReference}=viewExtent;queryGeometry={xmin,ymin,zmin,xmax,ymax,zmax,spatialReference}}return queryGeometry}function buildQueryConfig(props){const{queryObject,chartConfig,options}=props;const{runtimeDataFilters}=options??{};const{series:seriesConfig,dataFilters}=chartConfig;const{where:configFilter,gdbVersion:configGdbVersion,timeExtent:configTimeExtent,geometry:configGeometry,distance:configDistance,units:configUnits}=dataFilters??{};const{where:runtimeFilter,gdbVersion:runtimeGdbVersion,timeExtent:runtimeTimeExtent,geometry:runtimeGeometry,distance:runtimeDistance,units:runtimeUnits}=runtimeDataFilters??{};const firstSeriesConfig=seriesConfig[0];const{query:seriesQuery}=firstSeriesConfig;const{where:seriesQueryFilter}=seriesQuery??{};const chartSubType=getChartSubType(seriesConfig);const queryConfig={...seriesQuery};queryConfig.where=combineFilters([configFilter,runtimeFilter]);if(chartSubType!==ChartSubType.BarAndLineSplitBy&&chartSubType!==ChartSubType.BoxPlotMonoFieldAndSplitBy&&chartSubType!==ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy&&chartSubType!==ChartSubType.BoxPlotMultiFieldsAndSplitBy&&chartSubType!==ChartSubType.BarAndLineSplitByNoAggregation){queryConfig.where=combineFilters([queryConfig.where,seriesQueryFilter])}queryConfig.gdbVersion=runtimeGdbVersion??configGdbVersion;queryConfig.timeExtent=getQueryTimeExtent(queryObject,runtimeTimeExtent??configTimeExtent);queryConfig.geometry=getQueryGeometry(queryObject,runtimeGeometry??configGeometry);queryConfig.distance=runtimeDistance??configDistance;queryConfig.units=runtimeUnits??configUnits;if(seriesQuery?.outStatistics?.[0]?.statisticType===RESTStatisticType.Count){queryConfig.returnDistinctValues=seriesQuery?.returnDistinctValues??false}return queryConfig}function getStatFieldName(props){const{whereValue,outStatistics,y}=props;let statFieldName=queryDefaults.outStatistics.outStatisticFieldName;if(outStatistics?.outStatisticFieldName!==undefined)statFieldName=outStatistics.outStatisticFieldName;else if(outStatistics?.onStatisticField!==undefined&&outStatistics.statisticType!==undefined)statFieldName=`${outStatistics.statisticType}_${outStatistics.onStatisticField}_${whereValue}`;else if(y!==undefined){statFieldName=y}return statFieldName}function mapUniqueValueToStatField(seriesConfig){const mapToStatField=new Map;for(let iSeries=0;iSeries<seriesConfig.length;iSeries+=1){const currentSeries=cloneDeep(seriesConfig[iSeries]);const currentWhere=currentSeries.query?.where;if(currentWhere!==undefined){const whereValue=getSplitByValue({where:currentWhere});if(whereValue!==""){const statFieldName=getStatFieldName({whereValue,outStatistics:currentSeries.query?.outStatistics?.[0],y:currentSeries.y});seriesConfig[iSeries].y=statFieldName;mapToStatField.set(whereValue,statFieldName)}}}return mapToStatField}function modifyGroupByField(props){const{uniqueQuery,splitByField,x}=props;const fields=[...uniqueQuery.groupByFieldsForStatistics??[],x,splitByField].filter((field=>field!==undefined&&field.trim()!==""&&field!==defaultBoxPlotCategory));uniqueQuery.groupByFieldsForStatistics=Array.from(new Set(fields))}function isPercentileStatistics(outStatistics){return outStatistics.statisticType===RESTStatisticType.ContinuousPercentile||outStatistics.statisticType===RESTStatisticType.DiscretePercentile}function modifyOutStatistics(props){const{uniqueQuery,y,useGenericOutStatFieldName,queryObject,chartSubType,isTimeBinningSeries,returnFeaturesExtent}=props;const defaultOutStatistics=queryDefaults.outStatistics;if(uniqueQuery.outStatistics?.[0]!==undefined){if(chartSubType!==ChartSubType.PieFromFields&&chartSubType!==ChartSubType.BarAndLineFromFields){uniqueQuery.outStatistics[0].outStatisticFieldName=useGenericOutStatFieldName===true?defaultOutStatistics.outStatisticFieldName:y}const{outStatistics}=uniqueQuery;for(let i=0;i<outStatistics.length;i+=1){const outStatistic=uniqueQuery.outStatistics[i];if(outStatistic!==undefined&&isPercentileStatistics(outStatistic)===true){if(isTimeBinningSeries===true){outStatistics[i].statisticType=RESTStatisticType.Count;delete outStatistics[i].statisticParameters}else{outStatistics[i]={...outStatistics[i],statisticParameters:outStatistics[i].statisticParameters??{value:ChartDefaults.defaultStatParameterValue}}}}}}else if(queryObject!==undefined){const{objectIdField}=getLayerFromQueryObject(queryObject);uniqueQuery.outStatistics=[{statisticType:defaultOutStatistics.statisticType,onStatisticField:objectIdField,outStatisticFieldName:useGenericOutStatFieldName===true?defaultOutStatistics.outStatisticFieldName:y}]}if(returnFeaturesExtent===true){uniqueQuery.outStatistics?.push({statisticType:RESTStatisticType.EnvelopeAggregate,onStatisticField:"1"})}}function buildUniqueBoxPlotOutStatistics(props){const{chartConfig}=props;const outStatisticTemplate=[{statisticType:RESTStatisticType.Minimum,suffix:BoxPlotYFieldKeys.Min},{statisticType:RESTStatisticType.ContinuousPercentile,statisticParameters:{value:.25},suffix:BoxPlotYFieldKeys.FirstQuartile},{statisticType:RESTStatisticType.ContinuousPercentile,statisticParameters:{value:.5},suffix:BoxPlotYFieldKeys.Median},{statisticType:RESTStatisticType.ContinuousPercentile,statisticParameters:{value:.75},suffix:BoxPlotYFieldKeys.ThirdQuartile},{statisticType:RESTStatisticType.Maximum,suffix:BoxPlotYFieldKeys.Max},{statisticType:RESTStatisticType.Average,suffix:BoxPlotYFieldKeys.Average},{statisticType:RESTStatisticType.StandardDeviation,suffix:BoxPlotYFieldKeys.StandardDeviation}];const seriesList=chartConfig.series;const outStatisticFields=new Set;seriesList.forEach((series=>{const yList=[series.y].flat();yList.forEach((y=>outStatisticFields.add(y)))}));const addSuffix=Array.from(outStatisticFields).length>1;const outStatistics=[...outStatisticFields].flatMap((field=>outStatisticTemplate.map((outStatistic=>{const outStatisticFieldNamePrefix=addSuffix===true?`${field}_`:"";const result={onStatisticField:field,statisticType:outStatistic.statisticType,outStatisticFieldName:`${outStatisticFieldNamePrefix}${outStatistic.suffix}`};if(outStatistic.statisticType===RESTStatisticType.ContinuousPercentile){result.statisticParameters=outStatistic.statisticParameters}return result}))));return outStatistics}function mergeOutStatistics(uniqueQuery,seriesConfig){for(let iSeries=1;iSeries<seriesConfig.length;iSeries+=1){const seriesOutStatistics={...seriesConfig[iSeries].query?.outStatistics?.[0]};if(seriesOutStatistics!==undefined&&uniqueQuery.outStatistics!==undefined)uniqueQuery.outStatistics.push(seriesOutStatistics)}}function modifyQueryForTimeBinning(props){const{uniqueQuery,x,splitByField,timeIntervalUnits,chartSubType,objectIdField}=props;if(timeIntervalUnits!==undefined){const timeBinningGroupByField=getTimeBinGroupByFieldsForStatistics(x,timeIntervalUnits);uniqueQuery.orderByFields=timeBinningGroupByField;uniqueQuery.groupByFieldsForStatistics=timeBinningGroupByField;if(chartSubType===ChartSubType.BarAndLineSplitBy&&isEmptyStringField(splitByField)===false){uniqueQuery.groupByFieldsForStatistics.push(splitByField)}else if(chartSubType===ChartSubType.BarAndLineNoAggregation){uniqueQuery.groupByFieldsForStatistics.push(objectIdField);uniqueQuery.outStatistics=[{onStatisticField:objectIdField,outStatisticFieldName:`COUNT_${objectIdField}`,statisticType:RESTStatisticType.Count}]}}}function addFeatureLimitation(props){const{chartConfig,options,uniqueQuery}=props;if(options?.chartLimits?.behaviorAfterLimit===LimitBehavior.RenderUpToTheLimit){const numberMaxOfFeaturesToFetch=getMaximumNumberOfFeaturesToFetch(chartConfig,options?.chartLimits);if(numberMaxOfFeaturesToFetch!==undefined){if(isPieChartFromFields(chartConfig.series)===true){if(uniqueQuery.outStatistics?.[0]!==undefined){const geometryStatsFilter=(stat,inOrOut)=>stat.statisticType===RESTStatisticType.EnvelopeAggregate===inOrOut;const geometryStats=uniqueQuery.outStatistics.filter((stat=>geometryStatsFilter(stat,true)));const allStatsButGeometryStats=uniqueQuery.outStatistics.filter((stat=>geometryStatsFilter(stat,false)));allStatsButGeometryStats.splice(numberMaxOfFeaturesToFetch);uniqueQuery.outStatistics=[...allStatsButGeometryStats,...geometryStats]}}else{uniqueQuery.num=numberMaxOfFeaturesToFetch}}}}function buildUniqueQuery(props){const{chartConfig,queryConfig,options,queryObject,timeIntervalInfo}=props;const{setTimeBinningInfoWhenNotProvided,returnFeaturesExtent}=options??{};const seriesConfig=chartConfig.series;const chartSubType=getChartSubType(seriesConfig);let useGenericOutStatFieldName=false;const isTimeBinningSeries=isSeriesUsingTimeBinning({xAxisValueFormatType:getXAxisValueFormat(chartConfig),setTimeBinningInfoWhenNotProvided,seriesConfig:seriesConfig[0]})===true;let uniqueQuery={};let mapToStatField=new Map;const{query:firstSeriesQueryConfig,x,y}=seriesConfig[0];let modifyOutStatisticsNeeded=false;let removeOrderByFieldNeeded=false;let modifyGroupByFieldNeeded=false;let buildUniqueBoxPlotOutStatisticsNeeded=false;if(firstSeriesQueryConfig!==undefined){uniqueQuery=cloneDeep(firstSeriesQueryConfig);const splitByField=getSplitByField(firstSeriesQueryConfig.where);let where="";if(queryConfig.fetchNullValues!==true){if(x!==ChartDefaults.boxPlot.boxPlotCategory)where=`${x} IS NOT NULL`;if(splitByField.trim()!==""&&splitByField!==x&&isAbsoluteTruthWhereClause(firstSeriesQueryConfig.where)===false)where=combineFilters([where,`${splitByField} IS NOT NULL`])}switch(chartSubType){case ChartSubType.BarAndLineSplitBy:{mapToStatField=mapUniqueValueToStatField(seriesConfig);modifyGroupByFieldNeeded=true;useGenericOutStatFieldName=true;modifyOutStatisticsNeeded=true;break}case ChartSubType.BarAndLineMultiFields:mergeOutStatistics(uniqueQuery,seriesConfig);modifyOutStatisticsNeeded=true;break;case ChartSubType.PieFromFields:case ChartSubType.BarAndLineFromFields:where="";removeOrderByFieldNeeded=true;modifyOutStatisticsNeeded=true;break;case ChartSubType.BarAndLineMonoField:case ChartSubType.PieFromCategory:modifyOutStatisticsNeeded=true;break;case ChartSubType.BoxPlotMonoField:case ChartSubType.BoxPlotMultiFields:removeOrderByFieldNeeded=true;buildUniqueBoxPlotOutStatisticsNeeded=true;break;case ChartSubType.BoxPlotMonoFieldAndCategory:case ChartSubType.BoxPlotMultiFieldsAndCategory:case ChartSubType.BoxPlotMonoFieldAndSplitBy:case ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy:case ChartSubType.BoxPlotMultiFieldsAndSplitBy:{buildUniqueBoxPlotOutStatisticsNeeded=true;modifyGroupByFieldNeeded=true;break}}if(modifyOutStatisticsNeeded===true)modifyOutStatistics({uniqueQuery,y,useGenericOutStatFieldName,queryObject,chartSubType,isTimeBinningSeries,returnFeaturesExtent});if(modifyGroupByFieldNeeded===true)modifyGroupByField({uniqueQuery,splitByField,x});if(buildUniqueBoxPlotOutStatisticsNeeded===true)uniqueQuery.outStatistics=buildUniqueBoxPlotOutStatistics({chartConfig});if(removeOrderByFieldNeeded===true){delete uniqueQuery.orderByFields}else if(queryConfig.orderByFields!==undefined){uniqueQuery.orderByFields=queryConfig.orderByFields.filter((orderByField=>{const result=orderByField.split(" ");return isEmptyStringField(result[0])===false}))}if(isTimeBinningSeries===true){const layer=getLayerFromQueryObject(queryObject);const{objectIdField}=layer;modifyQueryForTimeBinning({uniqueQuery,x,splitByField:getSplitByField(firstSeriesQueryConfig.where),timeIntervalUnits:timeIntervalInfo?.timeIntervalUnits??seriesConfig[0].timeIntervalUnits,chartSubType,objectIdField})}uniqueQuery.where=where}addFeatureLimitation({chartConfig,options,uniqueQuery});const{gdbVersion,geometry,distance,units,timeExtent,where}=queryConfig;if(gdbVersion!==undefined)uniqueQuery.gdbVersion=gdbVersion;if(geometry!==undefined)uniqueQuery.geometry=geometry;if(distance!==undefined)uniqueQuery.distance=distance;if(units!==undefined)uniqueQuery.units=units;if(timeExtent!==undefined)uniqueQuery.timeExtent=timeExtent;if(where!==undefined)uniqueQuery.where=combineFilters([uniqueQuery.where,where]);return{uniqueQuery,mapToStatField}}function isQueryCalculatedExprInItem(dataItem){const{queryCalculatedExpr}=ChartDefaults;return isPropertyKeyInData(dataItem,queryCalculatedExpr)}function mergeExtents(extentList){let mergedExtent;if(extentList?.[0]!==undefined){mergedExtent=extentList.reduce(((extent,currentExtent)=>({...extent,xmin:Math.min(extent.xmin,currentExtent.xmin),xmax:Math.max(extent.xmax,currentExtent.xmax),ymin:Math.min(extent.ymin,currentExtent.ymin),ymax:Math.max(extent.ymax,currentExtent.ymax)})),extentList[0])}return mergedExtent}function getXAxisValueFromContext(props){const{value,dataContext,specificField,keepNullValues=false}=props;let newValue=value;const{originalCategoryValue,originalDateValue}=ChartDefaults;if(dataContext!==undefined){if(specificField!==undefined&&specificField in dataContext){newValue=dataContext[specificField]}else if(originalDateValue in dataContext){newValue=dataContext[originalDateValue]}else if(originalCategoryValue in dataContext){newValue=dataContext[originalCategoryValue]}else if(defaultPieFromFieldsName in dataContext){newValue=dataContext[defaultPieFromFieldsName]}if(keepNullValues===false&&newValue===null)newValue="null"}return newValue}function sortWebChartDataItems(props){const{arrayToSort,orderByFields,forceAscendingOrder,isNonAggregated,sortByXAxisField,seriesType}=props;if(arrayToSort!==undefined){arrayToSort.sort(((dataItemA,dataItemB)=>{let sortDecision=0;for(let idx=0;idx<orderByFields.length;idx+=1){const[field,sortOrder=ChartDefaults.seriesSort]=orderByFields[idx].split(" ");const descOrder=sortOrder.toLowerCase()===WebChartSortOrderKinds.Descending.toLowerCase()&&forceAscendingOrder!==true;let firstEntry=sortByXAxisField===true&&seriesType!==WebChartTypes.PieSeries?getXAxisValueFromContext({value:`${dataItemA[field]}`,dataContext:dataItemA}):dataItemA[field];let secondEntry=sortByXAxisField===true&&seriesType!==WebChartTypes.PieSeries?getXAxisValueFromContext({value:`${dataItemB[field]}`,dataContext:dataItemB}):dataItemB[field];if(isNonAggregated===true&&descOrder===true&&sortByXAxisField===true){firstEntry=Number.isNaN(parseFloat(`${firstEntry}`))===false?parseFloat(firstEntry):firstEntry;secondEntry=Number.isNaN(parseFloat(`${secondEntry}`))===false?parseFloat(secondEntry):secondEntry}if(sortByXAxisField===true&&(dataItemA[ChartDefaults.originalCategoryValue]===null||firstEntry===null)||dataItemA[pieChartSpecialSlicesId.defaultGroupOfSlicesId]===true)sortDecision=1;else if(sortByXAxisField===true&&(dataItemB[ChartDefaults.originalCategoryValue]===null||secondEntry===null)||dataItemB[pieChartSpecialSlicesId.defaultGroupOfSlicesId]===true)sortDecision=-1;else if(typeof firstEntry==="string"&&typeof secondEntry==="string"){sortDecision=firstEntry.localeCompare(secondEntry,undefined,{numeric:true});if(descOrder===true)sortDecision*=-1}else if(firstEntry===undefined){sortDecision=descOrder===false?1:-1}else if(secondEntry===undefined){sortDecision=descOrder===false?-1:1}else if(firstEntry!==null&&secondEntry!==null){if(firstEntry>secondEntry){sortDecision=descOrder===false?1:-1;break}else if(firstEntry<secondEntry){sortDecision=descOrder===false?-1:1;break}}}return sortDecision}))}}function revertPieFromFieldsProperties(modifiedData,seriesConfig){const revertedData=modifiedData;if(seriesConfig?.[0]!==undefined&&isPieChartFromFields(seriesConfig)===true){const{x,y}=seriesConfig[0];const isWebChartDataItemArray=isArray$1(modifiedData)===true;const dataItems=isWebChartDataItemArray===true?revertedData:revertedData.dataItems;dataItems.forEach((dataItem=>{if(defaultPieFromFieldsName in dataItem&&x!==defaultPieFromFieldsName){dataItem[x]=dataItem[x]!==undefined?dataItem[x]:dataItem[defaultPieFromFieldsName];delete dataItem[defaultPieFromFieldsName]}if(defaultPieFromFieldsValue in dataItem&&y!==defaultPieFromFieldsValue){dataItem[y]=dataItem[y]!==undefined?dataItem[y]:dataItem[defaultPieFromFieldsValue];delete dataItem[defaultPieFromFieldsValue]}return dataItem}))}return revertedData}function revertOriginalXValues(data,seriesConfig){const seriesType=getSeriesType(seriesConfig,0);let revertedData=data;const firstSeriesConfig=seriesConfig?.[0];if((seriesType===WebChartTypes.PieSeries||seriesType===WebChartTypes.BoxPlotSeries||seriesType===WebChartTypes.LineSeries||seriesType===WebChartTypes.BarSeries||seriesType===WebChartTypes.ComboLineAndBarSeries)&&firstSeriesConfig!==undefined){const isWebChartDataItemArray=isArray$1(data)===true;let dataItems=isWebChartDataItemArray===true?data:data.dataItems;if(data!==undefined){const{originalCategoryValue,originalDateValue,xAxisField}=ChartDefaults;const{x}=firstSeriesConfig;dataItems=dataItems.map((dataItem=>{let revertedX=dataItem[x];if(dataItem[originalDateValue]!==undefined)revertedX=dataItem[originalDateValue];else if(dataItem[originalCategoryValue]!==undefined)revertedX=dataItem[originalCategoryValue];const originalDataItem={...dataItem,[x]:revertedX};delete originalDataItem[originalDateValue];delete originalDataItem[originalCategoryValue];delete originalDataItem[xAxisField];return originalDataItem}));if(isWebChartDataItemArray===true){revertedData=dataItems}else{revertedData={dataItems};const{timeIntervalInfo}=data??{};if(isEmpty(timeIntervalInfo)===false){revertedData.timeIntervalInfo=timeIntervalInfo}const{outliers}=data??[];if(isEmpty(outliers)===false){revertedData.outliers=outliers}}}}return revertedData}function removeAdditionalStatisticsPerItem(dataItem){const originalDataItem={...dataItem};delete originalDataItem[ChartDefaults.technicalSortingFieldBySum];delete originalDataItem[ChartDefaults.technicalSortingFieldByPercent];delete originalDataItem[ChartDefaults.pieChart.technicalFieldSlicePercent];delete originalDataItem[ChartDefaults.pieChart.technicalFieldGroupedSlices];delete originalDataItem[queryDefaults.uniqueIdsName];const colorFields=Object.keys(originalDataItem).filter((key=>key.includes(ChartDefaults.rendererSymbolField)));colorFields.forEach((field=>delete originalDataItem[field]));const exprInItem=isQueryCalculatedExprInItem(originalDataItem);if(exprInItem.isInItem===true)delete originalDataItem[exprInItem.expr??""];return originalDataItem}function removeAdditionalStatistics(data,seriesConfig){let revertedData=data;const seriesType=getSeriesType(seriesConfig);let dataItems=extractChartDataFromFetchedData({fetchedData:revertedData,seriesType});if(dataItems!==undefined){switch(seriesType){case WebChartTypes.ComboLineAndBarSeries:case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:case WebChartTypes.PieSeries:{dataItems=dataItems.map(removeAdditionalStatisticsPerItem);revertedData={dataItems};const{timeIntervalInfo}=data??{};if(isEmpty(timeIntervalInfo)===false)revertedData.timeIntervalInfo=timeIntervalInfo}break;case WebChartTypes.ScatterSeries:revertedData={...revertedData,dataItems:dataItems.map(removeAdditionalStatisticsPerItem)};break}}return revertedData}function sanitizeData(props){const{data,seriesConfig}=props;let sanitizedData=cloneDeep(data);if(sanitizedData!==undefined){sanitizedData=revertOriginalXValues(sanitizedData,seriesConfig);sanitizedData=removeAdditionalStatistics(sanitizedData,seriesConfig);sanitizedData=revertPieFromFieldsProperties(sanitizedData,seriesConfig)}return sanitizedData}function isScatterPlotAggregated(props){const{statsMap,dataContext,chartLimits}=props;let aggregated=false;if(statsMap!==undefined){const{maxScatterPointsBeforeAggregation}=getChartLimits(chartLimits);const{queryNumberOfFeatures}=ChartDefaults.scatterPlotAggregationFields;aggregated=(statsMap.get(queryNumberOfFeatures)??NaN)>=maxScatterPointsBeforeAggregation}else if(dataContext!==undefined){aggregated=isQueryCalculatedExprInItem(dataContext).isInItem===true}return aggregated}function isBarOrLineChartAggregated(chartConfig){let aggregated=true;const seriesType=getSeriesType(chartConfig.series,0);if(seriesType===WebChartTypes.BarSeries||seriesType===WebChartTypes.LineSeries){const chartSubType=getChartSubType(chartConfig.series);aggregated=chartSubType!==ChartSubType.BarAndLineNoAggregation&&chartSubType!==ChartSubType.BarAndLineSplitByNoAggregation}return aggregated}function isPieChartAggregated(chartConfig){return getChartSubType(chartConfig.series)!==ChartSubType.PieNoAggregation}function isChartAggregated(props){const{dataContext,chartConfig,chartLimits}=props;let aggregated=true;if(chartConfig!==undefined){const seriesType=getSeriesType(chartConfig.series,0);switch(seriesType){case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:aggregated=isBarOrLineChartAggregated(chartConfig);break;case WebChartTypes.ScatterSeries:aggregated=isScatterPlotAggregated({dataContext,chartLimits});break;case WebChartTypes.PieSeries:aggregated=isPieChartAggregated(chartConfig);break}}return aggregated}function getTransformedQuery(xAxisField,type){let transformedField=xAxisField;switch(type){case WebChartDataTransformations.Log:transformedField=`log(${xAxisField})`;break;case WebChartDataTransformations.Sqrt:transformedField=`power(CAST(${xAxisField} AS FLOAT),0.5)`;break}return transformedField}function transformDateToQueryFormat(date){let dateForQuery=new Date(date).valueOf();if(Number.isNaN(dateForQuery)===false){dateForQuery=new Intl.DateTimeFormat("en-US",ChartDefaults.dateFormatUTC).format(date).replace(",","")}return dateForQuery}function convertMultipleNumericFieldsData(props){const{dataToConvert,x,y}=props;const convertedItems=[];const featuresExtent=dataToConvert[featuresExtentField];for(const key in dataToConvert){if(key!==""&&key!==featuresExtentField&&key in dataToConvert){const dataItem={[x]:key,[y]:dataToConvert[key],[ChartDefaults.xAxisField]:key,[ChartDefaults.originalCategoryValue]:key};if(featuresExtent!==undefined)dataItem[featuresExtentField]=featuresExtent;if(dataToConvert[`${ChartDefaults.rendererSymbolField}_${key}`]!==undefined)dataItem[ChartDefaults.rendererSymbolField]=dataToConvert[`${ChartDefaults.rendererSymbolField}_${key}`];convertedItems.push(dataItem)}}return convertedItems}function hasGaugeValueConversionChanged(oldConfig,newConfig){return JSON.stringify(oldConfig.series[0]?.valueConversion)!==JSON.stringify(newConfig.series[0]?.valueConversion)}function hasSlicesConfigChanged(props){const{oldConfig,newConfig}=props;let changed=false;const oldSeries=oldConfig.series[0];const newSeries=newConfig.series[0];const oldSeriesType=getSeriesType([oldSeries]);const newSeriesType=getSeriesType([newSeries]);if(oldSeriesType===WebChartTypes.PieSeries&&newSeriesType===WebChartTypes.PieSeries){const{slices:oldSlices,sliceGrouping:oldGroupOfSlices}=oldSeries;const{slices:newSlices,sliceGrouping:newGroupOfSlices}=newSeries;const oldSlicesFiltered=oldSlices?.map((slice=>({sliceId:slice.sliceId,label:slice.label})));const newSlicesFiltered=newSlices?.map((slice=>({sliceId:slice.sliceId,label:slice.label})));const oldGroupOfSlicesFiltered=oldGroupOfSlices?.label;const newGroupOfSlicesFiltered=newGroupOfSlices?.label;changed=JSON.stringify(oldSlicesFiltered)!==JSON.stringify(newSlicesFiltered)||JSON.stringify(oldGroupOfSlicesFiltered)!==JSON.stringify(newGroupOfSlicesFiltered)}return changed}function hasNumberOfSeriesChanged(oldSeries,newSeries){return newSeries.length!==oldSeries.length}function hasTimeBinningChanged(props){const{oldSeries,newConfig,oldTimeIntervalInfo,setTimeBinningInfoWhenNotProvided}=props;const newFirstSeries=newConfig.series?.[0];let timeBinningChanged=false;let timeIntervalUnitChanged=false;let newTimeBinningWillBeCalculated=false;if(isSeriesUsingTimeBinning({seriesConfig:newFirstSeries,xAxisValueFormatType:getXAxisValueFormat(newConfig),setTimeBinningInfoWhenNotProvided})===true){const oldFirstSeries=oldSeries[0];timeBinningChanged=oldTimeIntervalInfo?.timeIntervalSize!==newFirstSeries.timeIntervalSize||oldFirstSeries?.timeAggregationType!==newFirstSeries.timeAggregationType||oldFirstSeries?.trimIncompleteTimeInterval!==newFirstSeries.trimIncompleteTimeInterval||oldFirstSeries?.nullPolicy!==newFirstSeries.nullPolicy;timeIntervalUnitChanged=oldTimeIntervalInfo?.timeIntervalUnits!==newFirstSeries.timeIntervalUnits;newTimeBinningWillBeCalculated=setTimeBinningInfoWhenNotProvided===true&&newFirstSeries.timeIntervalSize===0}return{timeBinningChanged,timeIntervalUnitChanged,newTimeBinningWillBeCalculated}}function hasQuerySortChanged(oldSeries,newSeries){const oldOrderByFields=oldSeries[0]?.query?.orderByFields;const newOrderByFields=newSeries[0]?.query?.orderByFields;const sortChanged=JSON.stringify(oldOrderByFields)!==JSON.stringify(newOrderByFields);return sortChanged}function isSortLabelByValueTypeNeeded(oldConfig,newConfig){let sortChanged=newConfig.series?.[0].query?.orderByFields!==undefined;if(sortChanged===true){const oldSortLabelBy=oldConfig.sortLabelsBy??LabelValueTypes.ModifiedValue;const newSortLabelBy=newConfig.sortLabelsBy??LabelValueTypes.ModifiedValue;sortChanged=oldSortLabelBy===LabelValueTypes.OriginalValue&&oldSortLabelBy!==newSortLabelBy||newSortLabelBy===LabelValueTypes.OriginalValue&&newSortLabelBy!==oldSortLabelBy}return sortChanged}function hasQueryChanged(props){const{oldSeries,newSeries,behaviorAfterLimit}=props;let dataUpdateNeeded=false;const oldQueries=sortBy$1(oldSeries.map((series=>behaviorAfterLimit===LimitBehavior.RenderUpToTheLimit?series.query:{...series.query,orderByFields:undefined})),["where","outStatistics[0].outStatisticFieldName","outStatistics[0].onStatisticField"]);const newQueries=sortBy$1(newSeries.map((series=>behaviorAfterLimit===LimitBehavior.RenderUpToTheLimit?series.query:{...series.query,orderByFields:undefined})),["where","outStatistics[0].outStatisticFieldName","outStatistics[0].onStatisticField"]);dataUpdateNeeded=isEqual(oldQueries,newQueries)===false;return dataUpdateNeeded}function hasXOrYChanged(oldSeries,newSeries){let xOrYChanged=false;if(newSeries[0].x!==oldSeries[0].x){xOrYChanged=true}else{const seriesType=getSeriesType(oldSeries,0);if(seriesType!==WebChartTypes.HistogramSeries&&seriesType!==WebChartTypes.GaugeSeries){const oldYList=getYList(oldSeries);const newYList=getYList(newSeries);xOrYChanged=JSON.stringify(oldYList)!==JSON.stringify(newYList)}}return xOrYChanged}function hasFilterBySelectionChanged(filterBySelection,options){const filterBySelectionChanged=(filterBySelection??false)!==(options?.filterBySelection??false);return filterBySelectionChanged}function hasDataForFilterBySelectionChanged(props){const{currentSelectionDataItems,currentSelectionOIDs,currentSelectionIndexes,options,chartConfig}=props;let dataForFilterBySelectionChanged=false;if(options?.filterBySelection===true){if(chartConfig.dataSource?.type===WebChartDataSourceTypes.Inline){dataForFilterBySelectionChanged=isEqual(currentSelectionDataItems,options?.selectionData?.selectionItems)===false||isEqual(currentSelectionIndexes,options?.selectionData?.selectionIndexes)===false}else{dataForFilterBySelectionChanged=isEqual(currentSelectionOIDs,options?.selectionData?.selectionOIDs)===false}}return dataForFilterBySelectionChanged}function hasConfigFilterChanged(oldConfig,newConfig){return JSON.stringify(oldConfig.dataFilters)!==JSON.stringify(newConfig.dataFilters)}function hasBinTemporalDataChanged(oldConfig,newConfig){const chartType=getSeriesType(newConfig.series);return chartType===WebChartTypes.LineSeries&&(oldConfig.series[0].binTemporalData??ChartDefaults.binTemporalData)!==(newConfig.series[0].binTemporalData??ChartDefaults.binTemporalData)}function hasSplitByValueChanged(oldSeries,newSeries){return oldSeries?.length!==newSeries?.length||oldSeries?.some(((seriesConfig,index)=>{const oldSplitByValue=getSplitByValue({where:seriesConfig?.query?.where});const newSplitByValue=getSplitByValue({where:newSeries?.[index]?.query?.where});return oldSplitByValue!==newSplitByValue}))}function isDataUpdateNeeded(props){const{forceDataUpdate,oldConfig,newConfig,options,filterBySelection,timeIntervalInfo,currentSelectionDataItems,currentSelectionOIDs,currentSelectionIndexes}=props;const{series:newSeries}=newConfig;const{series:oldSeries}=oldConfig;const seriesType=getSeriesType(newSeries);let dataUpdateNeeded=false;let commonPropertyChanged=false;let specificPropertyChanged=false;const updateNeededDetails={common:{queryChanged:false,xOrYChanged:false,numberOfSeriesChanged:false,configFiltersChanged:false,filterBySelectionChanged:false,dataForFilterBySelectionChanged:false,binTemporalDataChanged:false},lineChart:{timeBinningChanged:false,timeIntervalUnitChanged:false,newTimeBinningWillBeCalculated:false},histogram:{dataPropsChanged:false},gauge:{valueConversionChanged:false},boxPlot:{splitByValueChanged:false}};updateNeededDetails.common.queryChanged=hasQueryChanged({oldSeries,newSeries,behaviorAfterLimit:options?.chartLimits?.behaviorAfterLimit});updateNeededDetails.common.configFiltersChanged=hasConfigFilterChanged(oldConfig,newConfig);updateNeededDetails.common.xOrYChanged=hasXOrYChanged(oldSeries,newSeries);updateNeededDetails.common.filterBySelectionChanged=hasFilterBySelectionChanged(filterBySelection,options);updateNeededDetails.common.dataForFilterBySelectionChanged=hasDataForFilterBySelectionChanged({currentSelectionDataItems,currentSelectionOIDs,currentSelectionIndexes,options,chartConfig:newConfig});updateNeededDetails.common.binTemporalDataChanged=hasBinTemporalDataChanged(oldConfig,newConfig);const{queryChanged,configFiltersChanged,xOrYChanged,filterBySelectionChanged,dataForFilterBySelectionChanged}=updateNeededDetails.common;commonPropertyChanged=queryChanged===true||configFiltersChanged===true||xOrYChanged===true||filterBySelectionChanged===true||dataForFilterBySelectionChanged===true;switch(seriesType){case WebChartTypes.HistogramSeries:updateNeededDetails.histogram.dataPropsChanged=hasBinCountChanged(oldSeries,newSeries)||hasTransformationTypeChanged(oldSeries,newSeries);break;case WebChartTypes.LineSeries:updateNeededDetails.lineChart=hasTimeBinningChanged({oldSeries,newConfig,oldTimeIntervalInfo:timeIntervalInfo,setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided});case WebChartTypes.BarSeries:case WebChartTypes.ComboLineAndBarSeries:updateNeededDetails.common.numberOfSeriesChanged=hasNumberOfSeriesChanged(oldSeries,newSeries);break;case WebChartTypes.BoxPlotSeries:updateNeededDetails.common.numberOfSeriesChanged=hasNumberOfSeriesChanged(oldSeries,newSeries);updateNeededDetails.boxPlot.splitByValueChanged=hasSplitByValueChanged(oldSeries,newSeries);break;case WebChartTypes.GaugeSeries:updateNeededDetails.gauge.valueConversionChanged=hasGaugeValueConversionChanged(oldConfig,newConfig);break}if(updateNeededDetails.gauge.valueConversionChanged===true||updateNeededDetails.histogram.dataPropsChanged===true||updateNeededDetails.lineChart.timeBinningChanged===true||updateNeededDetails.lineChart.timeIntervalUnitChanged===true||updateNeededDetails.lineChart.newTimeBinningWillBeCalculated===true||updateNeededDetails.common.numberOfSeriesChanged===true||updateNeededDetails.common.binTemporalDataChanged===true||updateNeededDetails.boxPlot.splitByValueChanged===true){specificPropertyChanged=true}dataUpdateNeeded=forceDataUpdate===true||commonPropertyChanged===true||specificPropertyChanged===true;return{dataUpdateNeeded,updateNeededDetails}}function isBinnedServerDataResetNeeded(dataUpdateNeededDetails){const resetNeeded=dataUpdateNeededDetails.lineChart.timeIntervalUnitChanged===true||dataUpdateNeededDetails.lineChart.newTimeBinningWillBeCalculated===true||dataUpdateNeededDetails.common.dataForFilterBySelectionChanged===true||dataUpdateNeededDetails.common.filterBySelectionChanged===true||dataUpdateNeededDetails.common.configFiltersChanged===true||dataUpdateNeededDetails.common.numberOfSeriesChanged===true||dataUpdateNeededDetails.common.queryChanged===true||dataUpdateNeededDetails.common.xOrYChanged===true;return resetNeeded}function checkForSupportedPieChart(data,fieldToCheckForValue){let isSupportedPie=true;if(data!==undefined&&data.length>1&&isEmptyStringField(fieldToCheckForValue)===false){let positiveDataValueCount=0;let negativeDataValueCount=0;let otherDataValue=0;data.forEach((item=>{const itemValue=item[fieldToCheckForValue];if(isValidNumber(itemValue)===false||itemValue===0)otherDataValue+=1;else if(itemValue>0)positiveDataValueCount+=1;else negativeDataValueCount+=1}));isSupportedPie=otherDataValue===data.length||positiveDataValueCount>=0&&negativeDataValueCount===0||positiveDataValueCount===0&&negativeDataValueCount>=0}return isSupportedPie}function getMultiSeriesLimit(props){const{countTotal,countPerSeries,numberOfSeries}=props;let limit;const values=[];if(Number.isFinite(countTotal)===true)values.push(countTotal);if(Number.isFinite(countPerSeries)===true)values.push(countPerSeries*numberOfSeries);if(values.length>0)limit=Math.min(...values);return limit}function getMaximumNumberOfFeaturesToFetch(chartConfig,chartLimits){let numberOfFeatures;const{maxBarChartSeriesCount,maxBarUniqueSeriesCountTotal,maxBarTwoSeriesCountPerSeries,maxBarTwoSeriesCountTotal,maxBarThreePlusSeriesCountPerSeries,maxBarThreePlusSeriesCountTotal,maxLineChartSeriesCount,maxLineUniqueSeriesCountTotal,maxLineTwoSeriesCountPerSeries,maxLineTwoSeriesCountTotal,maxLineThreePlusSeriesCountPerSeries,maxLineThreePlusSeriesCountTotal,maxPieChartSliceCountTotal,maxGaugeByFeaturesLimit}=getChartLimits(chartLimits);const seriesType=getSeriesType(chartConfig.series);const numberOfSeries=chartConfig.series.length===0?1:chartConfig.series.length;const chartSubType=getChartSubType(chartConfig.series);switch(seriesType){case WebChartTypes.ComboLineAndBarSeries:case WebChartTypes.BarSeries:if(numberOfSeries<=maxBarChartSeriesCount){if(numberOfSeries===1){numberOfFeatures=maxBarUniqueSeriesCountTotal}else if(numberOfSeries===2){numberOfFeatures=getMultiSeriesLimit({countTotal:maxBarTwoSeriesCountTotal,countPerSeries:maxBarTwoSeriesCountPerSeries,numberOfSeries})}else if(numberOfSeries>2){numberOfFeatures=getMultiSeriesLimit({countTotal:maxBarThreePlusSeriesCountTotal,countPerSeries:maxBarThreePlusSeriesCountPerSeries,numberOfSeries})}}break;case WebChartTypes.LineSeries:if(numberOfSeries<=maxLineChartSeriesCount){if(numberOfSeries===1){numberOfFeatures=maxLineUniqueSeriesCountTotal}else if(numberOfSeries===2){numberOfFeatures=getMultiSeriesLimit({countTotal:maxLineTwoSeriesCountTotal,countPerSeries:maxLineTwoSeriesCountPerSeries,numberOfSeries})}else if(numberOfSeries>2){numberOfFeatures=getMultiSeriesLimit({countTotal:maxLineThreePlusSeriesCountTotal,countPerSeries:maxLineThreePlusSeriesCountPerSeries,numberOfSeries})}}break;case WebChartTypes.PieSeries:numberOfFeatures=maxPieChartSliceCountTotal;break;case WebChartTypes.GaugeSeries:numberOfFeatures=maxGaugeByFeaturesLimit;break}if((chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.BarAndLineMultiFields)&&numberOfFeatures!==undefined){numberOfFeatures=Math.ceil(numberOfFeatures/numberOfSeries)}return numberOfFeatures}function applyValueConversion(value,valueConversion){let convertedValue=value;if(Number.isFinite(value)===true){const{factor,offset}=valueConversion??{};if(Number.isFinite(factor)===true){convertedValue*=factor}if(Number.isFinite(offset)===true){convertedValue+=offset}}return convertedValue}function isValidPercentValue(inputValue){let isValid=false;if(inputValue!==undefined){const sanitizedValue=inputValue.replace(" ","");const rtlRegex=/^%(0*100{1,1}\.?((?:\.)0*)?$)|(^%0*\d{0,2}\.?((?:\.)\d*)?)$/;const ltrRegex=/^(0*100{1,1}\.?((?:\.)0*)?%$)|(^0*\d{0,2}\.?((?:\.)\d*)?%)$/;isValid=rtlRegex.test(sanitizedValue)||ltrRegex.test(sanitizedValue)}return isValid}function extractPercentValue(inputValue){let value;if(isValidPercentValue(inputValue)===true){const rtlRegex=/%(\d{1,3}(.\d+)?)$/;const ltrRegex=/(\d{1,3}(.\d+)?)%$/;const sanitizedValue=inputValue.replace(" ","");const percent=rtlRegex.exec(sanitizedValue)?.[1]??ltrRegex.exec(sanitizedValue)?.[1];if(percent!==undefined)value=Number(percent)}return value}function ascending(a,b){return a==null||b==null?NaN:a<b?-1:a>b?1:a>=b?0:NaN}function*numbers(values,valueof){if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){yield value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){yield value}}}}function variance(values,valueof){let count=0;let delta;let mean=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){delta=value-mean;mean+=delta/++count;sum+=delta*(value-mean)}}}if(count>1)return sum/(count-1)}function deviation(values,valueof){const v=variance(values,valueof);return v?Math.sqrt(v):v}class InternMap extends Map{constructor(entries,key=keyof){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:key}});if(entries!=null)for(const[key,value]of entries)this.set(key,value)}get(key){return super.get(intern_get(this,key))}has(key){return super.has(intern_get(this,key))}set(key,value){return super.set(intern_set(this,key),value)}delete(key){return super.delete(intern_delete(this,key))}}function intern_get({_intern,_key},value){const key=_key(value);return _intern.has(key)?_intern.get(key):value}function intern_set({_intern,_key},value){const key=_key(value);if(_intern.has(key))return _intern.get(key);_intern.set(key,value);return value}function intern_delete({_intern,_key},value){const key=_key(value);if(_intern.has(key)){value=_intern.get(key);_intern.delete(key)}return value}function keyof(value){return value!==null&&typeof value==="object"?value.valueOf():value}function identity(x){return x}function group(values,...keys){return nest(values,identity,identity,keys)}function rollup(values,reduce,...keys){return nest(values,identity,reduce,keys)}function nest(values,map,reduce,keys){return function regroup(values,i){if(i>=keys.length)return reduce(values);const groups=new InternMap;const keyof=keys[i++];let index=-1;for(const value of values){const key=keyof(value,++index,values);const group=groups.get(key);if(group)group.push(value);else groups.set(key,[value])}for(const[key,values]of groups){groups.set(key,regroup(values,i))}return map(groups)}(values,0)}function compareDefined(compare=ascending){if(compare===ascending)return ascendingDefined;if(typeof compare!=="function")throw new TypeError("compare is not a function");return(a,b)=>{const x=compare(a,b);if(x||x===0)return x;return(compare(b,b)===0)-(compare(a,a)===0)}}function ascendingDefined(a,b){return(a==null||!(a>=a))-(b==null||!(b>=b))||(a<b?-1:a>b?1:0)}function max(values,valueof){let max;if(valueof===undefined){for(const value of values){if(value!=null&&(max<value||max===undefined&&value>=value)){max=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(max<value||max===undefined&&value>=value)){max=value}}}return max}function min(values,valueof){let min;if(valueof===undefined){for(const value of values){if(value!=null&&(min>value||min===undefined&&value>=value)){min=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(min>value||min===undefined&&value>=value)){min=value}}}return min}function quickselect(array,k,left=0,right=Infinity,compare){k=Math.floor(k);left=Math.floor(Math.max(0,left));right=Math.floor(Math.min(array.length-1,right));if(!(left<=k&&k<=right))return array;compare=compare===undefined?ascendingDefined:compareDefined(compare);while(right>left){if(right-left>600){const n=right-left+1;const m=k-left+1;const z=Math.log(n);const s=.5*Math.exp(2*z/3);const sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);const newLeft=Math.max(left,Math.floor(k-m*s/n+sd));const newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselect(array,k,newLeft,newRight,compare)}const t=array[k];let i=left;let j=right;swap(array,left,k);if(compare(array[right],t)>0)swap(array,left,right);while(i<j){swap(array,i,j),++i,--j;while(compare(array[i],t)<0)++i;while(compare(array[j],t)>0)--j}if(compare(array[left],t)===0)swap(array,left,j);else++j,swap(array,j,right);if(j<=k)left=j+1;if(k<=j)right=j-1}return array}function swap(array,i,j){const t=array[i];array[i]=array[j];array[j]=t}function quantile(values,p,valueof){values=Float64Array.from(numbers(values,valueof));if(!(n=values.length)||isNaN(p=+p))return;if(p<=0||n<2)return min(values);if(p>=1)return max(values);var n,i=(n-1)*p,i0=Math.floor(i),value0=max(quickselect(values,i0).subarray(0,i0+1)),value1=min(values.subarray(i0+1));return value0+(value1-value0)*(i-i0)}function mean(values,valueof){let count=0;let sum=0;if(valueof===undefined){for(let value of values){if(value!=null&&(value=+value)>=value){++count,sum+=value}}}else{let index=-1;for(let value of values){if((value=valueof(value,++index,values))!=null&&(value=+value)>=value){++count,sum+=value}}}if(count)return sum/count}function median(values,valueof){return quantile(values,.5,valueof)}function sum(values,valueof){let sum=0;if(valueof===undefined){for(let value of values){if(value=+value){sum+=value}}}else{let index=-1;for(let value of values){if(value=+valueof(value,++index,values)){sum+=value}}}return sum}function completeSeriesData(array1,array2,property){const target=new Map;for(let i=0;i<array1.length;i+=1){target.set(array1[i],{[property]:array1[i]})}for(let i=0;i<array2.length;i+=1){const key=array2[i][property];if(typeof key==="string"||typeof key==="number"){target.set(key,array2[i])}}const completedData=[...target.values()];return completedData}async function completeDataWithMissingCategories(props){const{seriesData,chartConfig,queryConfig,queryObject,categoryOrDateCount,behaviorAfterLimit,abortKey}=props;const{dataSource}=chartConfig;const{series:seriesConfig}=chartConfig;let completeData=seriesData;const chartSubType=getChartSubType(seriesConfig);const xAxisValueFormatType=getXAxisValueFormat(chartConfig);if(behaviorAfterLimit!==LimitBehavior.RenderUpToTheLimit&&dataSource.type===WebChartDataSourceTypes.Layer&&queryObject!==undefined&&categoryOrDateCount!==undefined&&categoryOrDateCount>seriesData.length&&chartSubType!==ChartSubType.BarAndLineFromFields&&chartSubType!==ChartSubType.BarAndLineNoAggregation&&chartSubType!==ChartSubType.PieNoAggregation&&xAxisValueFormatType===WebChartTypes.CategoryAxisFormat){const{x}=seriesConfig[0];const modifiedQueryConfig={...queryConfig,returnDistinctValues:true};delete modifiedQueryConfig.outStatistics;delete modifiedQueryConfig.orderByFields;delete modifiedQueryConfig.groupByFieldsForStatistics;const allFeatures=await queryAllFeatures({queryObject,queryConfig:modifiedQueryConfig,outFields:[x],featureCount:categoryOrDateCount,abortKey});const uniqueCategoriesArray=allFeatures.map((feature=>feature.attributes[x])).filter((value=>value!==null&&value!==undefined));if(uniqueCategoriesArray.length>seriesData.length)completeData=completeSeriesData(uniqueCategoriesArray,seriesData,x)}return completeData}function completeDataWithEmptySeries(seriesData,chartConfig){const completeData=seriesData;const{series:seriesConfig}=chartConfig;if(getXAxisValueFormat(chartConfig)===WebChartTypes.CategoryAxisFormat&&seriesConfig[0].query?.outStatistics?.[0].statisticType===RESTStatisticType.Count){const itemModel=seriesConfig.reduce(((accItemModel,series)=>{const statField=series.query?.outStatistics?.[0].outStatisticFieldName??series.y;accItemModel[statField]=0;return accItemModel}),{});for(let iData=0;iData<seriesData.length;iData+=1){seriesData[iData]={...itemModel,...seriesData[iData]}}}return completeData}const GroupByKeywords={groupByCaseBegin:"CASE",groupByOutKeyword:"OUT",groupByCaseEnd:"ELSE 'OUT' END"};function adjustElementCount(initialDayCount,timeIntervalUnits){let adjustedCount=initialDayCount;if(timeIntervalUnits===WebChartTimeIntervalUnits.Weeks)adjustedCount/=7;else if(timeIntervalUnits===WebChartTimeIntervalUnits.Months)adjustedCount/=30;else if(timeIntervalUnits===WebChartTimeIntervalUnits.Years)adjustedCount/=365;adjustedCount=Math.ceil(adjustedCount);return adjustedCount}function getNextOrPreviousDate(props){const{date,timeIntervalUnits,nextOrPrevious,timeIntervalSize}=props;if(timeIntervalSize!==undefined&&Number.isFinite(timeIntervalSize)===true){const factor=nextOrPrevious==="next"?timeIntervalSize:-timeIntervalSize;switch(timeIntervalUnits){case WebChartTimeIntervalUnits.Seconds:return DateTime.fromMillis(date).plus({seconds:factor}).valueOf();case WebChartTimeIntervalUnits.Minutes:return DateTime.fromMillis(date).plus({minutes:factor}).valueOf();case WebChartTimeIntervalUnits.Hours:return DateTime.fromMillis(date).plus({hours:factor}).valueOf();case WebChartTimeIntervalUnits.Weeks:case WebChartTimeIntervalUnits.Days:return DateTime.fromMillis(date).plus({days:factor}).valueOf();case WebChartTimeIntervalUnits.Months:return DateTime.fromMillis(date).plus({months:factor}).valueOf();case WebChartTimeIntervalUnits.Years:return DateTime.fromMillis(date).plus({years:factor}).valueOf()}}return date}function groupFromStart(props){const{binFirstOrLastIndex:binFirstIndex,data,x,timeIntervalInfo}=props;const{timeIntervalUnits,timeIntervalSize}=timeIntervalInfo;const size=timeIntervalUnits===WebChartTimeIntervalUnits.Weeks?(timeIntervalSize??1)*7:timeIntervalSize;const binStartDate=data[binFirstIndex][x];let binLastIndex=binFirstIndex;const nextBinFirstDate=getNextOrPreviousDate({date:binStartDate,timeIntervalUnits,timeIntervalSize:size,nextOrPrevious:"next"});let currentDate=data[binLastIndex][x];while(binLastIndex+1<data.length&&currentDate<nextBinFirstDate){binLastIndex+=1;currentDate=data[binLastIndex]?.[x]}const last=binLastIndex+1>=data.length;let sliceEndIndex=binLastIndex;if(last===true&&data[sliceEndIndex]!==undefined)sliceEndIndex+=1;const binEndDate=last===true?getNextOrPreviousDate({date:binStartDate,timeIntervalUnits,timeIntervalSize:size,nextOrPrevious:"next"}):data[binLastIndex][x]-1;return{binStartDate,binEndDate,last,nextBinFirstOrLastIndex:binLastIndex,sliceStartIndex:binFirstIndex,sliceEndIndex}}function groupFromEnd(props){const{binFirstOrLastIndex:binLastIndex,data,x,timeIntervalInfo}=props;const{timeIntervalUnits,timeIntervalSize}=timeIntervalInfo;const size=timeIntervalUnits===WebChartTimeIntervalUnits.Weeks?(timeIntervalSize??1)*7:timeIntervalSize;const binEndDate=data[binLastIndex][x];let binFirstIndex=binLastIndex;const nextBinLastDate=getNextOrPreviousDate({date:binEndDate,timeIntervalUnits,timeIntervalSize:size,nextOrPrevious:"previous"});let currentDate=data[binFirstIndex][x];while(binFirstIndex-1>=0&&currentDate>nextBinLastDate){binFirstIndex-=1;currentDate=data[binFirstIndex]?.[x]}const last=binFirstIndex-1<=0;let sliceEndIndex=binLastIndex;if(last===true&&data[sliceEndIndex]!==undefined)sliceEndIndex-=1;if(last===true)binFirstIndex=0;let binStartDate=last===true?getNextOrPreviousDate({date:binEndDate,timeIntervalUnits,timeIntervalSize:size,nextOrPrevious:"previous"}):data[binFirstIndex][x];binStartDate+=1e3;return{binStartDate,binEndDate,nextBinFirstOrLastIndex:binFirstIndex,sliceStartIndex:binFirstIndex,sliceEndIndex,last}}function getNewBinStat(props){const{binsToRegroup,statisticType,y,nullPolicy}=props;let stat;if(nullPolicy!==WebChartNullPolicyTypes.Interpolate)stat=nullPolicy===WebChartNullPolicyTypes.Zero?0:null;const sanitizedBins=binsToRegroup.filter((item=>Number.isFinite(item[y])));if(sanitizedBins.length>0){switch(statisticType){case RESTStatisticType.Count:case RESTStatisticType.Sum:stat=sum(sanitizedBins,(item=>item[y]));break;case RESTStatisticType.Minimum:stat=min(sanitizedBins,(item=>item[y]));break;case RESTStatisticType.Maximum:stat=max(sanitizedBins,(item=>item[y]));break;case RESTStatisticType.Average:stat=mean(sanitizedBins,(item=>item[y]));break}}return stat}function groupBinsByIntervalSize(props){const{data,seriesConfig,timeIntervalInfo,newDateMin,newDateMax,dateMinTimestamp,dateMaxTimestamp}=props;let groupedData=[];const{timeIntervalUnits}=timeIntervalInfo;const timeIntervalSize=timeIntervalInfo.timeIntervalSize??1;const{x,timeAggregationType,nullPolicy}=seriesConfig[0];if(timeIntervalSize>1||timeIntervalUnits===WebChartTimeIntervalUnits.Weeks||timeIntervalUnits===WebChartTimeIntervalUnits.Months||timeIntervalUnits===WebChartTimeIntervalUnits.Years){const{query}=seriesConfig[0];const yList=getYList(seriesConfig);const{statisticType}=query?.outStatistics?.[0]??StatisticsDefaults;let lastBin=false;let binFirstOrLastIndex=timeAggregationType===WebChartTimeAggregationTypes.End?data.length-1:0;const groupProps={binFirstOrLastIndex,data,x,timeIntervalInfo,newDateMin,newDateMax};while(lastBin===false){let newBin={};const{binStartDate,binEndDate,last,nextBinFirstOrLastIndex,sliceStartIndex,sliceEndIndex}=timeAggregationType===WebChartTimeAggregationTypes.End?groupFromEnd(groupProps):groupFromStart(groupProps);lastBin=last;newBin=timeAggregationType===WebChartTimeAggregationTypes.End?newBin=data[sliceEndIndex-1]:newBin=data[binFirstOrLastIndex];if(binEndDate>dateMaxTimestamp&&binStartDate<dateMaxTimestamp||binStartDate<dateMinTimestamp&&binEndDate>dateMinTimestamp||binStartDate>=dateMinTimestamp&&binEndDate<=dateMaxTimestamp){const binsToRegroup=data.slice(sliceStartIndex,sliceEndIndex).filter((bin=>ChartDefaults.dateBinModel in bin===false));yList.forEach((y=>{newBin[y]=getNewBinStat({binsToRegroup,statisticType,y,nullPolicy})}));const binsExtent=binsToRegroup.map((bin=>bin[featuresExtentField])).filter((iExtent=>iExtent!==undefined));const mergedExtent=mergeExtents(binsExtent);if(mergedExtent!==undefined)newBin[featuresExtentField]=mergedExtent;newBin[x]=binStartDate;newBin[ChartDefaults.xAxisField]=binStartDate;newBin[ChartDefaults.dateBinningRange]=[binStartDate,binEndDate];delete newBin[ChartDefaults.dateBinModel];groupedData.push(newBin)}else if(last===true&&timeAggregationType!==WebChartTimeAggregationTypes.End){groupedData[groupedData.length-1][ChartDefaults.dateBinningRange][1]=groupedData[groupedData.length-1][ChartDefaults.dateBinningRange][1]+1}binFirstOrLastIndex=nextBinFirstOrLastIndex;groupProps.binFirstOrLastIndex=nextBinFirstOrLastIndex}if(timeAggregationType===WebChartTimeAggregationTypes.End)groupedData=groupedData.reverse()}else if(timeIntervalSize===1){groupedData=data.map(((dataItem,itemIndex)=>{const binStartDate=dataItem[x];let binEndDate=data[itemIndex+1]?.[x];binEndDate=typeof binEndDate==="number"?binEndDate-1:getNextOrPreviousDate({date:binStartDate,timeIntervalUnits,timeIntervalSize,nextOrPrevious:"next"});return{...dataItem,[ChartDefaults.dateBinningRange]:[binStartDate,binEndDate]}}))}else{groupedData=data}return groupedData}function getNumberOfBinsWithinDataRange(props){const{dateMinTimestamp,dateMaxTimestamp,timeIntervalInfo}=props;const{timeIntervalSize,timeIntervalUnits}=timeIntervalInfo;let numberOfFinalBinsWithinDataRange=0;let numberOfSingleBinsWithinDataRange=0;if(timeIntervalSize!==undefined&&Number.isFinite(timeIntervalSize)===true&&Number.isFinite(dateMinTimestamp)===true&&Number.isFinite(dateMaxTimestamp)===true){let result=-1;const minDate=DateTime.fromMillis(dateMinTimestamp);const maxDate=DateTime.fromMillis(dateMaxTimestamp);switch(timeIntervalUnits){case WebChartTimeIntervalUnits.Seconds:result=maxDate.diff(minDate,"seconds").get("seconds");break;case WebChartTimeIntervalUnits.Minutes:result=maxDate.diff(minDate,"minutes").get("minutes");break;case WebChartTimeIntervalUnits.Hours:result=maxDate.diff(minDate,"hours").get("hours");break;case WebChartTimeIntervalUnits.Days:case WebChartTimeIntervalUnits.Months:case WebChartTimeIntervalUnits.Years:result=maxDate.diff(minDate,"days").get("days");break;case WebChartTimeIntervalUnits.Weeks:result=maxDate.diff(minDate,"weeks").get("weeks");break}if(Number.isFinite(result)===true){numberOfSingleBinsWithinDataRange=Math.ceil(result)+1;numberOfFinalBinsWithinDataRange=timeIntervalSize===1?numberOfSingleBinsWithinDataRange:Math.ceil(numberOfSingleBinsWithinDataRange/timeIntervalSize)}}return{numberOfFinalBinsWithinDataRange,numberOfSingleBinsWithinDataRange}}function getBinModel(seriesConfig){const{nullPolicy}=seriesConfig[0];const itemModel=seriesConfig.reduce(((accItemModel,series)=>{accItemModel[ChartDefaults.dateBinModel]=undefined;const statField=series.query?.outStatistics?.[0].outStatisticFieldName??series.y;if(nullPolicy!==WebChartNullPolicyTypes.Interpolate)accItemModel[statField]=nullPolicy===WebChartNullPolicyTypes.Zero?0:null;return accItemModel}),{});return itemModel}function addMissingEdgeBins(props){const{dateMaxTimestamp,numberOfFinalBinsWithinDataRange,numberOfSingleBinsWithinDataRange,data,seriesConfig,timeIntervalInfo}=props;const{timeIntervalSize,timeIntervalUnits}=timeIntervalInfo;const{timeAggregationType,x}=seriesConfig[0];let newDateMin=data[0][x];let newDateMax=dateMaxTimestamp;if(timeIntervalSize!==undefined&&Number.isFinite(timeIntervalSize)===true){const missingEdgeBins=numberOfSingleBinsWithinDataRange/numberOfFinalBinsWithinDataRange!==timeIntervalSize;if(missingEdgeBins===true){let numberOfMissingEdgeBins=Math.ceil(numberOfSingleBinsWithinDataRange/numberOfFinalBinsWithinDataRange)*numberOfFinalBinsWithinDataRange-numberOfSingleBinsWithinDataRange;if(timeIntervalUnits===WebChartTimeIntervalUnits.Weeks)numberOfMissingEdgeBins*=7;const binModel=getBinModel(seriesConfig);if(timeAggregationType===WebChartTimeAggregationTypes.End){let binDate=data[0][x];for(let i=0;i<numberOfMissingEdgeBins;i+=1){binDate=getNextOrPreviousDate({date:binDate,timeIntervalUnits,timeIntervalSize:1,nextOrPrevious:"previous"});data.push({...binModel,[x]:binDate,[ChartDefaults.xAxisField]:binDate})}if(numberOfMissingEdgeBins>0)newDateMin=data[data.length-1][x]}else{let binDate=data[data.length-1][x];for(let i=0;i<numberOfMissingEdgeBins;i+=1){binDate=getNextOrPreviousDate({date:binDate,timeIntervalUnits,timeIntervalSize:1,nextOrPrevious:"next"});data.push({...binModel,[x]:binDate,[ChartDefaults.xAxisField]:binDate})}newDateMax=data[data.length-1][x]}}}return{newDateMin,newDateMax}}function isBinSetComplete(props){const{numberOfSingleBinsWithinDataRange,dataLength,timeIntervalUnits}=props;const adjustedDataLength=adjustElementCount(dataLength,timeIntervalUnits);return adjustedDataLength>=numberOfSingleBinsWithinDataRange}async function getTimeBinningStatistics(props){const{queryObject,queryConfig,x}=props;const outStatisticFieldNameDateMin=`MIN_${x}`;const outStatisticFieldNameDateMax=`MAX_${x}`;const outStatisticFieldNameDateCount=`COUNT_${x}`;const modifiedQueryConfig={...queryConfig,outStatistics:[{statisticType:RESTStatisticType.Minimum,onStatisticField:x,outStatisticFieldName:outStatisticFieldNameDateMin},{statisticType:RESTStatisticType.Maximum,onStatisticField:x,outStatisticFieldName:outStatisticFieldNameDateMax},{statisticType:RESTStatisticType.Count,onStatisticField:x,outStatisticFieldName:outStatisticFieldNameDateCount}]};delete modifiedQueryConfig.groupByFieldsForStatistics;delete modifiedQueryConfig.orderByFields;const minMaxDates=await queryStatistics({queryObject,queryConfig:modifiedQueryConfig});const dateMinTimestamp=minMaxDates.get(outStatisticFieldNameDateMin);const dateMaxTimestamp=minMaxDates.get(outStatisticFieldNameDateMax);const numberOfFeatures=minMaxDates.get(outStatisticFieldNameDateCount);return{dateRange:{dateMinTimestamp,dateMaxTimestamp},numberOfFeatures}}function addMissingIntermediateBins(props){const{newDateMin,newDateMax,seriesConfig,data,numberOfSingleBinsWithinDataRange,initialNumberOfBins,timeIntervalInfo}=props;const{timeIntervalUnits}=timeIntervalInfo;const completeData=data;const binsAreMissing=isBinSetComplete({numberOfSingleBinsWithinDataRange,dataLength:initialNumberOfBins,timeIntervalUnits})===false;if(binsAreMissing===true){const{x,timeAggregationType}=seriesConfig[0];const binModel=getBinModel(seriesConfig);const startingDate=timeAggregationType===WebChartTimeAggregationTypes.End?newDateMax:newDateMin;let nextDate=startingDate;let index=timeAggregationType===WebChartTimeAggregationTypes.End?data.length-1:0;while(index<data.length&&(timeAggregationType===WebChartTimeAggregationTypes.End&&nextDate>newDateMin||timeAggregationType!==WebChartTimeAggregationTypes.End&&nextDate<newDateMax)){if(nextDate!==data[index][x]){completeData.push({...binModel,[x]:nextDate,[ChartDefaults.xAxisField]:nextDate})}else{index=timeAggregationType===WebChartTimeAggregationTypes.End?index-1:index+1}nextDate=getNextOrPreviousDate({date:nextDate,timeIntervalUnits:timeIntervalUnits===WebChartTimeIntervalUnits.Months||timeIntervalUnits===WebChartTimeIntervalUnits.Years?WebChartTimeIntervalUnits.Days:timeIntervalUnits,timeIntervalSize:1,nextOrPrevious:timeAggregationType===WebChartTimeAggregationTypes.End?"previous":"next"})}}return completeData}function trimBins(props){const{data,seriesConfig,dateMinTimestamp,dateMaxTimestamp}=props;const{timeAggregationType}=seriesConfig[0];const completeData=data;if(seriesConfig[0].trimIncompleteTimeInterval!==false){const newDateMin=data[0][ChartDefaults.dateBinningRange][0];const newDateMax=data[data.length-1][ChartDefaults.dateBinningRange][1];const edgeBinsIncomplete=timeAggregationType===WebChartTimeAggregationTypes.End?newDateMin<dateMinTimestamp:newDateMax>dateMaxTimestamp;if(edgeBinsIncomplete===true){if(timeAggregationType===WebChartTimeAggregationTypes.End){let currentBinRangeDateMin=newDateMin;while(currentBinRangeDateMin<dateMinTimestamp&&data.length>0){data.shift();if(data.length>0)currentBinRangeDateMin=data[0][ChartDefaults.dateBinningRange]?.[0]}}else{let currentBinRangeDateMax=newDateMax;while(currentBinRangeDateMax>dateMaxTimestamp&&data.length>0){data.pop();if(data.length>0)currentBinRangeDateMax=data[data.length-1][ChartDefaults.dateBinningRange]?.[1]}}}}return completeData}function addWhenCase$1(props){const{groupByFieldsForStatistics,dateField,queryStartDate,queryEndDate,y,binIndex,lastBin}=props;let newGroupByField=groupByFieldsForStatistics===""?GroupByKeywords.groupByCaseBegin:groupByFieldsForStatistics;newGroupByField=formatMessage(groupByWhenCaseForMedianTimeBinning,{groupByFieldsForStatistics:newGroupByField,dateField,startDate:`${queryStartDate}`,endDate:`${queryEndDate}`,y,binIndex:`${binIndex}`,endDateOperand:lastBin===true?"<=":"<"});return newGroupByField}function*queryMedianGenerator(props){const{queryObject,seriesConfig,queryConfig,completeData}=props;for(let iSeries=0;iSeries<seriesConfig.length;iSeries+=1){const currentSeriesConfig=seriesConfig[iSeries];const{query,x,y}=currentSeriesConfig;const statField=query?.outStatistics?.[0]?.onStatisticField??"";const dataOutStatistics=[{onStatisticField:statField,outStatisticFieldName:RESTStatisticType.ContinuousPercentile,statisticType:RESTStatisticType.ContinuousPercentile,statisticParameters:{value:.5}}];let groupByFieldsForStatistics=`${GroupByKeywords.groupByCaseBegin}`;for(let iData=0;iData<completeData.length;iData+=1){const dataItem=completeData[iData];const[startDate,endDate]=dataItem[ChartDefaults.dateBinningRange];const queryStartDate=transformDateToQueryFormat(startDate);const queryEndDate=transformDateToQueryFormat(endDate);groupByFieldsForStatistics=addWhenCase$1({groupByFieldsForStatistics,queryStartDate,queryEndDate,dateField:x,y,binIndex:iData,lastBin:iData===completeData.length-1})}groupByFieldsForStatistics=`${groupByFieldsForStatistics} ${GroupByKeywords.groupByCaseEnd}`;const medianQuery={...queryConfig,groupByFieldsForStatistics:[groupByFieldsForStatistics],outStatistics:dataOutStatistics,orderByFields:undefined};yield queryAllFeatures({queryObject,queryConfig:medianQuery,noBatch:true})}}async function calculateBinsMedianValues(props){const{queryObject,data,seriesConfig,queryConfig}=props;const completeData=data;const{statisticType}=seriesConfig[0].query?.outStatistics?.[0]??StatisticsDefaults;if(statisticType===RESTStatisticType.ContinuousPercentile&&completeData.length>0){const medianValuesGenerator=queryMedianGenerator({queryObject,completeData,seriesConfig,queryConfig});const allMedianValues=(await Promise.all(medianValuesGenerator)).flat();if(allMedianValues.length>0){const{isInItem,expr}=isQueryCalculatedExprInItem(allMedianValues[0].attributes);if(isInItem===true){allMedianValues.forEach((value=>{const binKey=value.attributes[`${expr}`];if(binKey!==undefined){const[y,binIndex]=binKey.split("|");if(binIndex!==undefined){const medianValue=value.attributes[RESTStatisticType.ContinuousPercentile];completeData[binIndex][`${y}`]=medianValue}}}))}}}return completeData}async function processTimeBinningData(props){const{queryObject,data,x,queryConfig,seriesConfig,dateRange,timeIntervalInfo}=props;const{dateMinTimestamp,dateMaxTimestamp}=dateRange;let completeData=data;const initialNumberOfBins=data.length;sortWebChartDataItems({arrayToSort:completeData,orderByFields:[x]});if(initialNumberOfBins>1){const{numberOfFinalBinsWithinDataRange,numberOfSingleBinsWithinDataRange}=getNumberOfBinsWithinDataRange({dateMinTimestamp,dateMaxTimestamp,timeIntervalInfo});const{newDateMin,newDateMax}=addMissingEdgeBins({dateMaxTimestamp,data:completeData,numberOfFinalBinsWithinDataRange,numberOfSingleBinsWithinDataRange,seriesConfig,timeIntervalInfo});completeData=addMissingIntermediateBins({newDateMin,newDateMax,seriesConfig,data:completeData,initialNumberOfBins,numberOfSingleBinsWithinDataRange,timeIntervalInfo});sortWebChartDataItems({arrayToSort:completeData,orderByFields:[x]});completeData=groupBinsByIntervalSize({data:completeData,seriesConfig,dateMinTimestamp,dateMaxTimestamp,newDateMin,newDateMax,timeIntervalInfo});completeData=trimBins({data:completeData,seriesConfig,dateMinTimestamp,dateMaxTimestamp});completeData=await calculateBinsMedianValues({queryObject,data:completeData,seriesConfig,queryConfig})}return completeData}function getTargetedNumberOfBins(numberOfFeatures){const targetedNumberOfBins=Math.floor(Math.min(Math.max(8,Math.sqrt(numberOfFeatures??8)),128)+.5);return targetedNumberOfBins}function getBestInterval(timeBinningStats){const{dateRange,numberOfFeatures}=timeBinningStats;const{dateMinTimestamp,dateMaxTimestamp}=dateRange;const targetedNumberOfBins=getTargetedNumberOfBins(numberOfFeatures);const timeDiff=(dateMaxTimestamp-dateMinTimestamp)/targetedNumberOfBins;const chosenIndex=timeUnitHelper.findIndex((item=>item.threshold>timeDiff));const chosenInterval=timeUnitHelper[chosenIndex];const{unitMs,preferredIntervalSize,unit:timeIntervalUnits}=chosenInterval;const howManyUnitsInDateRange=timeDiff/unitMs;const greaterValueIndex=preferredIntervalSize.findIndex((currentIndex=>currentIndex>=howManyUnitsInDateRange));const topUnit=preferredIntervalSize[greaterValueIndex];const previousUnit=greaterValueIndex===0?preferredIntervalSize[0]:preferredIntervalSize[greaterValueIndex-1];const timeIntervalSize=topUnit-howManyUnitsInDateRange<howManyUnitsInDateRange-previousUnit?topUnit:previousUnit;return{timeIntervalSize,timeIntervalUnits}}function needsToCalculateTimeIntervalInfo(props){const{series,isTimeBinningSeries,setTimeBinningInfoWhenNotProvided}=props;let timeIntervalCalculationNeeded=false;const seriesType=getSeriesType([series]);if(seriesType===WebChartTypes.LineSeries&&isTimeBinningSeries===true){const{timeIntervalUnits,timeIntervalSize}=series;const timeIntervalInfoIsComplete=isTimeIntervalInfoComplete(timeIntervalUnits,timeIntervalSize);timeIntervalCalculationNeeded=timeIntervalInfoIsComplete===false&&setTimeBinningInfoWhenNotProvided===true}return timeIntervalCalculationNeeded}function createDatefromAttributes(attributes){const dateParts=[];for(let i=1;i<=6;i+=1){const value=attributes[`EXPR_${i}`]??attributes[`Expr${i}`]??attributes[`expr${i}`]??attributes[`EXPR${i}`];if(value!==null){dateParts.push(value)}}return DateTime.local(Number(dateParts[0]??1969),Number(dateParts[1]??1),Number(dateParts[2]??1),Number(dateParts[3]??0),Number(dateParts[4]??0),Number(dateParts[5]??0)).valueOf()}function getMeanAndStandardDeviationPerFieldKey(y,statType){return`${statType}_${y}`}function calculateZScore(props){const{value,mean,stdDev}=props;return(value-mean)/stdDev}function addZScoreItemToDataItem(props){const{dataItem,chartSubType,y,splitByValue,meanPerField,stdDevPerField}=props;const standardizedItem=dataItem;let getBoxPlotYValueProps={chartSubType,y,splitByValue};const meanKey=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Average});const stdKey=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.StandardDeviation});const mean=meanPerField??Number(dataItem[meanKey]);const stdDev=stdDevPerField??Number(dataItem[stdKey]);Object.values(BoxPlotYFieldKeys).forEach((currentKey=>{const prop=getBoxPlotYValue({key:currentKey,y,chartSubType,splitByValue});let value=Number(dataItem[prop]);if(Number.isFinite(mean)===true&&Number.isFinite(stdDev)===true&&Number.isFinite(value)===true){getBoxPlotYValueProps={...getBoxPlotYValueProps,key:currentKey,showOutliers:false,standardizeValues:true};let statsKey=getBoxPlotYValue(getBoxPlotYValueProps);standardizedItem[statsKey]=calculateZScore({mean,stdDev,value});if(currentKey===BoxPlotYFieldKeys.Min||currentKey===BoxPlotYFieldKeys.Max){getBoxPlotYValueProps={...getBoxPlotYValueProps,key:currentKey,showOutliers:true,standardizeValues:true};statsKey=getBoxPlotYValue(getBoxPlotYValueProps);getBoxPlotYValueProps={...getBoxPlotYValueProps,standardizeValues:false,splitByValue};const propOutlier=getBoxPlotYValue(getBoxPlotYValueProps);value=Number(dataItem[propOutlier]);if(Number.isFinite(value)===true)standardizedItem[statsKey]=calculateZScore({mean,stdDev,value})}}}));return standardizedItem}function processDataForBoxPlotMultiFields(props){const{data,yList,calculateZScore=false}=props;const uniqueDataItem=data[0];const propertiesPerYValue=new Map;yList.forEach((y=>{let yDataItem={};Object.keys(uniqueDataItem).forEach((propName=>{if(propName.startsWith(y)){yDataItem[propName.replace(`${y}_`,"")]=uniqueDataItem[propName]}else if(propName.includes(ChartDefaults.rendererSymbolField)){yDataItem[propName]=uniqueDataItem[propName]}yDataItem[ChartDefaults.boxPlot.boxPlotCategory]=y;if(calculateZScore===true){yDataItem=addZScoreItemToDataItem({dataItem:yDataItem,chartSubType:ChartSubType.BoxPlotMultiFields})}}));propertiesPerYValue.set(y,yDataItem)}));const processedData=Array.from(propertiesPerYValue.values());return processedData}function processDataForMonoFieldAndSplitBy(props){const{data,splitByField,y}=props;const uniqueDataItem={[ChartDefaults.boxPlot.boxPlotCategory]:y};data.forEach((dataItem=>{const splitByValue=dataItem[splitByField];if(splitByValue!==undefined){Object.keys(dataItem).forEach((propName=>{if(propName===ChartDefaults.rendererSymbolField){uniqueDataItem[`${propName}_${splitByValue}`]=dataItem[propName]}else{uniqueDataItem[`${splitByValue}_${propName}`]=dataItem[propName]}}))}}));const processedData=[uniqueDataItem];return processedData}function processDataForBoxPlotMultiFieldsAndSplitBy(props){const{firstSeries,data,yList,calculateZScore=false,meanAndStdDevPerField}=props;const splitByField=getSplitByField(firstSeries.query?.where);const propertiesPerYValue=new Map;data.forEach((dataItem=>{const splitByValue=dataItem[splitByField];yList.forEach((y=>{let item={[ChartDefaults.boxPlot.boxPlotCategory]:y};Object.entries(dataItem).forEach((([key,value])=>{if(key.startsWith(`${y}_`)){item[`${splitByValue}_${key.replace(`${y}_`,"")}`]=value}else if(key.includes(ChartDefaults.rendererSymbolField)){item[`${key}_${splitByValue}`]=value}}));if(calculateZScore===true){item=addZScoreItemToDataItem({dataItem:item,chartSubType:ChartSubType.BoxPlotMultiFieldsAndSplitBy,splitByValue,meanPerField:meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.Average)],stdDevPerField:meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.StandardDeviation)]})}propertiesPerYValue.set(y,{...propertiesPerYValue.get(y)??{},...item})}))}));const processedData=Array.from(propertiesPerYValue.values());return processedData}function processDataForBoxPlotMultiFieldsAndCategory(props){const{data,yList,calculateZScore=false,meanAndStdDevPerField}=props;const processedData=data;if(calculateZScore===true){processedData.forEach((dataItem=>{yList.forEach((y=>{addZScoreItemToDataItem({dataItem,chartSubType:ChartSubType.BoxPlotMultiFieldsAndCategory,y,meanPerField:meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.Average)],stdDevPerField:meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.StandardDeviation)]})}))}))}return processedData}function processDataForBoxPlotMonoFieldAndCategoryAndSplitBy(chartConfig,data){const firstSeries=chartConfig.series[0];const{x}=firstSeries;const splitByField=getSplitByField(firstSeries.query?.where);const propertiesPerCategory=new Map;data.forEach((dataItem=>{const currentCategory=dataItem[x];const item={[x]:currentCategory};const splitByValue=dataItem[splitByField];Object.entries(dataItem).forEach((([key,value])=>{if(key.includes(ChartDefaults.rendererSymbolField)){item[`${ChartDefaults.rendererSymbolField}_${splitByValue}`]=value}else if(key!==splitByField&&key!==x){const newKey=key!==ChartDefaults.xAxisField&&key!==ChartDefaults.originalCategoryValue?`${splitByValue}_${key}`:key;item[newKey]=value}}));propertiesPerCategory.set(currentCategory,{...propertiesPerCategory.get(currentCategory)??{},...item})}));const processedData=Array.from(propertiesPerCategory.values());return processedData}function addMissingAlternativeData(chartConfig,data){const{series:seriesConfig}=chartConfig;const firstSeries=seriesConfig[0];const{y}=firstSeries;const chartSubType=getChartSubType(chartConfig.series);const getBoxPlotYValueProps={y:chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory?y:undefined,chartSubType};const splitByValues=chartConfig.series.map((s=>{let splitByValue=getSplitByValue({where:s.query?.where,normalize:false});if(splitByValue.startsWith("'")&&splitByValue.endsWith("'"))splitByValue=splitByValue.substring(1,splitByValue.length-1);return splitByValue}));if(splitByValues.length===0)splitByValues.push(" ");data.forEach((dataItem=>{splitByValues.forEach((splitByValue=>{getBoxPlotYValueProps.splitByValue=splitByValue;const minFieldWOutliers=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Min,showOutliers:true});const minField=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Min,showOutliers:false});const maxFieldWOutliers=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Max,showOutliers:true});const maxField=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Max,showOutliers:false});if(dataItem[maxFieldWOutliers]===undefined)dataItem[maxFieldWOutliers]=dataItem[maxField];if(dataItem[minFieldWOutliers]===undefined)dataItem[minFieldWOutliers]=dataItem[minField]}))}))}function getOutliersThresholds(dataItem,yFieldNames){let outlierMinThreshold;let outlierMaxThreshold;const iqr=dataItem[yFieldNames[BoxPlotYFieldKeys.IQR]];const firstQuartile=dataItem[yFieldNames[BoxPlotYFieldKeys.FirstQuartile]];const thirdQuartile=dataItem[yFieldNames[BoxPlotYFieldKeys.ThirdQuartile]];if(Number.isFinite(iqr)===true&&Number.isFinite(firstQuartile)===true&&Number.isFinite(thirdQuartile)===true){outlierMinThreshold=firstQuartile-iqr*1.5;outlierMaxThreshold=thirdQuartile+iqr*1.5}return{outlierMinThreshold,outlierMaxThreshold}}function buildBoxPlotFilter(props){const{yField,xField,xValue,splitByField,splitByValue,outlierMaxThreshold,outlierMinThreshold,target}=props;let xFilter;if(xField!==undefined&&xValue!==undefined){const value=typeof xValue==="number"?xValue:`'${escapeSQLString(xValue)}'`;xFilter=`${xField}=${value}`}let splitByFilter;if(splitByField!==undefined&&splitByValue!==undefined){const value=typeof splitByValue==="number"?splitByValue:`'${escapeSQLString(splitByValue)}'`;splitByFilter=`${splitByField}=${value}`}let thresholdFilter;if(target==="outliers"&&outlierMinThreshold!==outlierMaxThreshold){thresholdFilter=`(${yField}<${outlierMinThreshold} OR ${yField}>${outlierMaxThreshold})`}else if(target==="alternativeData"){if(outlierMinThreshold===outlierMaxThreshold)thresholdFilter=`(${yField}=${outlierMinThreshold})`;else thresholdFilter=`(${yField}>=${outlierMinThreshold} AND ${yField}<=${outlierMaxThreshold})`}const outlierFilter=[xFilter,splitByFilter,thresholdFilter].filter((f=>f!==undefined)).join(" AND ");return outlierFilter}function generateBoxPlotQueriesFilter(props){const{data,yField,x,chartSubType,splitByField}=props;const y=chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy?undefined:yField;const yFieldNames=getBoxPlotStatisticFieldNames(y);const outliersFilterBatches=[];const dataWithoutOutliersFilterBatches=[];const{maxOperandsPerWhereClause:batchSize}=getChartTechnicalLimits();let outliersFilters=[];let dataWithoutOutliersFilters=[];let batchIndex=1;data.forEach(((dataItem,dataIndex)=>{const{outlierMinThreshold,outlierMaxThreshold}=getOutliersThresholds(dataItem,yFieldNames);if(typeof outlierMinThreshold==="number"&&typeof outlierMaxThreshold==="number"){const filtersProps={yField,outlierMinThreshold,outlierMaxThreshold};if((chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy)&&x!==undefined&&x in dataItem){filtersProps.xField=x;filtersProps.xValue=dataItem[x]}if((chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy)&&splitByField!==undefined&&splitByField in dataItem){filtersProps.splitByField=splitByField;filtersProps.splitByValue=dataItem[splitByField]}outliersFilters.push(buildBoxPlotFilter({...filtersProps,target:"outliers"}));dataWithoutOutliersFilters.push(buildBoxPlotFilter({...filtersProps,target:"alternativeData"}));if(batchIndex%batchSize===0||dataIndex===data.length-1){outliersFilterBatches.push(combineFilters(outliersFilters,"OR"));dataWithoutOutliersFilterBatches.push(combineFilters(dataWithoutOutliersFilters,"OR"));outliersFilters=[];dataWithoutOutliersFilters=[]}}batchIndex+=1}));return{outliersFilterBatches,dataWithoutOutliersFilterBatches}}function getOutlierMeanAndStandardDeviation(props){const{data,outlierDataItem,chartSubType,x,y,meanAndStdDevPerField,splitByField}=props;let mean=meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.Average)];let stdDev=meanAndStdDevPerField?.[getMeanAndStandardDeviationPerFieldKey(y,RESTStatisticType.StandardDeviation)];if(mean===undefined&&stdDev===undefined){switch(chartSubType){case ChartSubType.BoxPlotMultiFields:{const boxPlotFields=getBoxPlotStatisticFieldNames(y);const dataItem=data[0];mean=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.Average]]);stdDev=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.StandardDeviation]]);break}case ChartSubType.BoxPlotMultiFieldsAndCategory:{const dataItem=data.find((item=>item[x]===outlierDataItem[x]));if(dataItem!==undefined){const boxPlotFields=getBoxPlotStatisticFieldNames(y);mean=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.Average]]);stdDev=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.StandardDeviation]])}break}case ChartSubType.BoxPlotMultiFieldsAndSplitBy:{const dataItem=data.find((item=>item[splitByField]===outlierDataItem[splitByField]));if(dataItem!==undefined){const boxPlotFields=getBoxPlotStatisticFieldNames(y);mean=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.Average]]);stdDev=Number(dataItem[boxPlotFields[BoxPlotYFieldKeys.StandardDeviation]])}break}}}return{mean,stdDev}}async function fetchBoxPlotOutliers(props){const{seriesConfig,data,uniqueQuery,queryObject,meanAndStdDevPerField,abortKey}=props;const chartSubType=getChartSubType(seriesConfig);const firstSeries=seriesConfig[0];const{x}=firstSeries;const splitByField=getSplitByField(firstSeries.query?.where);const layer=getLayerFromQueryObject(queryObject);const yList=getYList(seriesConfig);const outliersQueryPromises=[];for(let i=0;i<yList.length;i+=1){const y=yList[i];const{outliersFilterBatches}=generateBoxPlotQueriesFilter({data,yField:y,x,chartSubType,splitByField});for(let iBatch=0;iBatch<outliersFilterBatches.length;iBatch+=1){const outliersFilter=outliersFilterBatches[iBatch];if(outliersFilter!==""){const outliersQuery={...uniqueQuery,where:combineFilters([uniqueQuery.where,outliersFilter]),groupByFieldsForStatistics:undefined,outStatistics:undefined,orderByFields:undefined,num:undefined};const outliersOutFields=[];if(x!==ChartDefaults.boxPlot.boxPlotCategory)outliersOutFields.push(x);outliersOutFields.push(y);if(splitByField!=="")outliersOutFields.push(splitByField);outliersOutFields.push(layer.objectIdField);outliersQueryPromises.push(queryAllFeatures({queryObject,queryConfig:outliersQuery,featureCount:1,outFields:outliersOutFields,abortKey}))}}}const outliersQueryResults=await Promise.all(outliersQueryPromises);const outliers=new Map;for(let i=0;i<outliersQueryResults.length;i+=1){const nextResults=outliersQueryResults[i];const y=yList[i];nextResults.forEach((feature=>{const outlierDataItem={...feature.attributes};if(outlierDataItem[y]!==undefined){if(x===ChartDefaults.boxPlot.boxPlotCategory)outlierDataItem[ChartDefaults.boxPlot.boxPlotCategory]=y;let getBoxPlotPropNameProps={key:BoxPlotYFieldKeys.Outlier,chartSubType};switch(chartSubType){case ChartSubType.BoxPlotMonoFieldAndSplitBy:case ChartSubType.BoxPlotMultiFieldsAndSplitBy:case ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy:getBoxPlotPropNameProps={...getBoxPlotPropNameProps,splitByValue:outlierDataItem[splitByField]};break;case ChartSubType.BoxPlotMultiFieldsAndCategory:getBoxPlotPropNameProps={...getBoxPlotPropNameProps,y};break}const outlierKey=getBoxPlotYValue(getBoxPlotPropNameProps);const outlierValue=outlierDataItem[y];outlierDataItem[outlierKey]=outlierValue;const uniqueKey=`${outlierDataItem[x]}-${outlierDataItem[splitByField]}-${outlierValue}`;const existingOutlierWithSameValue=outliers.get(uniqueKey);outlierDataItem[queryDefaults.uniqueIdsName]=[...existingOutlierWithSameValue?.[queryDefaults.uniqueIdsName]??[],outlierDataItem[layer.objectIdField]];delete outlierDataItem[layer.objectIdField];if(isMultiFieldsBoxPlot(chartSubType)===true){const outlierWithZScoreKey=getBoxPlotYValue({...getBoxPlotPropNameProps,standardizeValues:true});const{mean,stdDev}=getOutlierMeanAndStandardDeviation({data,outlierDataItem,chartSubType,x,y,splitByField,meanAndStdDevPerField});if(mean!==undefined&&stdDev!==undefined){outlierDataItem[outlierWithZScoreKey]=calculateZScore({value:outlierValue,mean,stdDev})}}delete outlierDataItem[y];outlierDataItem[ChartDefaults.boxPlot.boxPlotOutlierId]=true;outliers.set(uniqueKey,outlierDataItem)}}))}return Array.from(outliers.values())}async function fetchBoxPlotAlternativeData(props){const{data,queryObject,uniqueQuery,elementCount,chartConfig,abortKey}=props;let boxPlotAlternativeData=[];const{series:seriesConfig}=chartConfig;const yList=getYList(seriesConfig);const chartSubType=getChartSubType(seriesConfig);const firstSeries=seriesConfig[0];const{x}=firstSeries;const splitByField=getSplitByField(firstSeries.query?.where);const alternativeDataPromises=[];for(let i=0;i<yList.length;i+=1){const y=yList[i];const{dataWithoutOutliersFilterBatches}=generateBoxPlotQueriesFilter({data,yField:y,x,chartSubType,splitByField});for(let iBatch=0;iBatch<dataWithoutOutliersFilterBatches.length;iBatch+=1){const dataWithoutOutliersFilter=dataWithoutOutliersFilterBatches[iBatch];const alternativeQuery={...uniqueQuery,where:combineFilters([uniqueQuery.where,dataWithoutOutliersFilter])};if(alternativeQuery.outStatistics!==undefined){alternativeQuery.outStatistics=alternativeQuery.outStatistics?.filter((outStatistic=>(outStatistic.statisticType===RESTStatisticType.Minimum||outStatistic.statisticType===RESTStatisticType.Maximum)&&outStatistic.onStatisticField===y)).map((outStatistic=>({...outStatistic,outStatisticFieldName:`${outStatistic.outStatisticFieldName}${ChartDefaults.boxPlot.boxPlotOutliersSuffix}`})))}alternativeDataPromises.push(processUniqueQueryResults({queryObject,uniqueQuery:alternativeQuery,chartConfig,elementCount,isTimeBinningSeries:false,abortKey}))}}const alternativeDataResults=await Promise.all(alternativeDataPromises);for(let i=0;i<alternativeDataResults.length;i+=1){boxPlotAlternativeData.push(...alternativeDataResults[i])}if(chartSubType!==ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy){const groupingField=splitByField!==undefined&&splitByField!==""?splitByField:x;boxPlotAlternativeData=groupDataByCategory({data:boxPlotAlternativeData,x:groupingField})}return boxPlotAlternativeData}async function fetchBoxMeanAndStdDevPerField(props){const{queryObject,uniqueQuery,chartConfig,abortKey}=props;let meanAndStdDevPerField;const{series:seriesConfig}=chartConfig;const chartSubType=getChartSubType(seriesConfig);if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy){const yList=getYList(seriesConfig);const queryConfig={...uniqueQuery};delete queryConfig.outStatistics;delete queryConfig.groupByFieldsForStatistics;delete queryConfig.orderByFields;const outStatistics=[];for(let i=0;i<yList.length;i+=1){const numericField=yList[i];outStatistics.push(...[{statisticType:RESTStatisticType.Average,onStatisticField:numericField,outStatisticFieldName:`${RESTStatisticType.Average}_${numericField}`},{statisticType:RESTStatisticType.StandardDeviation,onStatisticField:numericField,outStatisticFieldName:`${RESTStatisticType.StandardDeviation}_${numericField}`}])}queryConfig.outStatistics=outStatistics;const queryResult=await queryAllFeatures({queryObject,queryConfig,featureCount:1,abortKey});if(queryResult.length>0)meanAndStdDevPerField=queryResult[0].attributes}return meanAndStdDevPerField}function mergeBoxPlotAlternativeData(props){const{data,additionalData,chartConfig}=props;const firstSeries=chartConfig.series[0];const{x}=firstSeries;const splitByField=getSplitByField(firstSeries.query?.where);return data.map((dataItem=>{let mergedDataItem=dataItem;const alternativeDataItem=additionalData.find((additionalDataItem=>additionalDataItem[x]===dataItem[x]&&(splitByField===""?true:additionalDataItem[splitByField]===dataItem[splitByField])));if(alternativeDataItem!==undefined){mergedDataItem={...dataItem,...alternativeDataItem}}return mergedDataItem}))}function processDataForBoxPlot(props){const{chartConfig,data,calculateZScore=false,meanAndStdDevPerField}=props;const{series:seriesConfig}=chartConfig;const firstSeries=seriesConfig[0];const chartSubType=getChartSubType(chartConfig.series);const yList=getYList(seriesConfig);let processedData=data;if(data?.[0]!==undefined){switch(chartSubType){case ChartSubType.BoxPlotMonoField:processedData[0][ChartDefaults.boxPlot.boxPlotCategory]=yList[0];break;case ChartSubType.BoxPlotMultiFields:processedData=processDataForBoxPlotMultiFields({data,yList,calculateZScore});break;case ChartSubType.BoxPlotMonoFieldAndSplitBy:processedData=processDataForMonoFieldAndSplitBy({data,splitByField:getSplitByField(firstSeries.query?.where),y:yList[0]});break;case ChartSubType.BoxPlotMultiFieldsAndSplitBy:processedData=processDataForBoxPlotMultiFieldsAndSplitBy({firstSeries,data,yList,meanAndStdDevPerField,calculateZScore});break;case ChartSubType.BoxPlotMultiFieldsAndCategory:processedData=processDataForBoxPlotMultiFieldsAndCategory({data,yList,meanAndStdDevPerField,calculateZScore});break;case ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy:processedData=processDataForBoxPlotMonoFieldAndCategoryAndSplitBy(chartConfig,data);break}}addMissingAlternativeData(chartConfig,processedData);return processedData}async function completeBoxPlotResults(props){const{data,queryObject,uniqueQuery,chartConfig,elementCount,abortKey}=props;let boxPlotData=data;let boxPlotOutliers=[];if(boxPlotData!==undefined){const{series:seriesConfig}=chartConfig;const meanAndStdDevPerField=await fetchBoxMeanAndStdDevPerField({queryObject,uniqueQuery,chartConfig,abortKey});boxPlotOutliers=await fetchBoxPlotOutliers({queryObject,uniqueQuery,seriesConfig,data:boxPlotData,meanAndStdDevPerField,abortKey});const boxPlotAlternativeData=await fetchBoxPlotAlternativeData({queryObject,uniqueQuery,elementCount,data,chartConfig,abortKey});boxPlotData=mergeBoxPlotAlternativeData({data:boxPlotData,additionalData:boxPlotAlternativeData,chartConfig});boxPlotData=processDataForBoxPlot({chartConfig,data:boxPlotData,meanAndStdDevPerField,calculateZScore:true})}return{boxPlotData,boxPlotOutliers}}function getFeatureGeometryExtent(feature){const{extent}=feature.aggregateGeometries??feature.geometry??{};return extent?.toJSON()}function addStylingInfoFromPropertyFields(dataItem,propertyFields,propertyFieldKeys){Object.keys(propertyFields).forEach((prop=>{if(propertyFieldKeys[prop]!==undefined&&propertyFields[prop]!==undefined){dataItem[propertyFieldKeys[prop]]=dataItem[propertyFields[prop]]??propertyFields[prop]}}))}function summarizeData(props){const{data,statType,onStatisticField,seriesX,seriesY,propertyFields}=props;const accessor=d=>d[onStatisticField]??d[seriesY??""];return data.map((function apply(dataItem){let y;switch(statType){case RESTStatisticType.Count:{y=dataItem[1].length;break}case RESTStatisticType.Sum:{y=sum(dataItem[1],accessor);break}case RESTStatisticType.ContinuousPercentile:{y=median(dataItem[1],accessor);break}case RESTStatisticType.Minimum:{y=min(dataItem[1],accessor);break}case RESTStatisticType.Maximum:{y=max(dataItem[1],accessor);break}case RESTStatisticType.StandardDeviation:{y=deviation(dataItem[1],accessor);break}case RESTStatisticType.Average:{y=mean(dataItem[1],accessor);break}case RESTStatisticType.Variance:{y=variance(dataItem[1],accessor);break}}let summarizedItem;if(seriesY!==undefined){summarizedItem={[seriesX]:dataItem[0],[seriesY]:y};if(propertyFields!==undefined){const propertyFieldKeys=getComputedConfigFieldKeys({y:seriesY,keys:propertyFields});addStylingInfoFromPropertyFields(dataItem[1][0],propertyFields,propertyFieldKeys);summarizedItem={...summarizedItem,...dataItem[1][0]}}}else{summarizedItem={[seriesX]:y??0}}return summarizedItem}))}function calculateStatisticsForBoxPlot(props){const{boxPlotSeries,chartSubType,key,data}=props;const processedItem={};const firstQuartile=quantile(data,.25);const thirdQuartile=quantile(data,.75);const splitByValue=getSplitByValue({where:boxPlotSeries.query?.where});const getBoxPlotYValueProps={splitByValue,chartSubType,key:""};const propMax=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Max});processedItem[propMax]=max(data);const propMin=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Min});processedItem[propMin]=min(data);const propMaxOutliers=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Max,showOutliers:true});processedItem[propMaxOutliers]=processedItem[propMax];const propMinOutliers=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Min,showOutliers:true});processedItem[propMinOutliers]=processedItem[propMin];const propAverage=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Average});processedItem[propAverage]=mean(data);const propFirstQuartile=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.FirstQuartile});processedItem[propFirstQuartile]=firstQuartile;const propMedian=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.Median});processedItem[propMedian]=median(data);const propThirdQuartile=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.ThirdQuartile});processedItem[propThirdQuartile]=thirdQuartile;const isValid=Number.isFinite(firstQuartile)===true&&Number.isFinite(thirdQuartile)===true&&thirdQuartile>=firstQuartile;if(isValid===true){const propIQR=getBoxPlotYValue({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys.IQR});processedItem[propIQR]=thirdQuartile-firstQuartile}if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory||chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory){processedItem[boxPlotSeries.x]=key}else{processedItem[ChartDefaults.boxPlot.boxPlotCategory]=key}return processedItem}function groupRawDataForBoxPlot(props){const{data,chartSubType,x,yList}=props;const groupedItem={};if(chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields){yList.forEach((y=>{data.forEach((dataItem=>{if(groupedItem[y]===undefined){groupedItem[y]=[]}if(Object.prototype.hasOwnProperty.call(dataItem,y)===true){groupedItem[y].push(dataItem[y])}}))}))}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory&&x!==undefined){const category=x;data.forEach((dataItem=>{const categoryValue=dataItem[category];const y=yList[0];if(groupedItem[categoryValue]===undefined){groupedItem[categoryValue]=[]}if(Object.prototype.hasOwnProperty.call(dataItem,y)===true){groupedItem[categoryValue].push(dataItem[y])}}))}return groupedItem}function groupNestedRawDataForBoxPlot(props){const{data,chartSubType,x:category,yList}=props;const groupedItem={};if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory&&category!==undefined){const groupedData=group(data,(dataItem=>dataItem[category]));groupedData.forEach(((groupedDataArray,categoryValue)=>{groupedDataArray.forEach((groupedDataItem=>{yList.forEach((y=>{if(groupedItem[categoryValue]===undefined)groupedItem[categoryValue]={};if(groupedItem[categoryValue][y]===undefined){groupedItem[categoryValue][y]=[]}if(Object.prototype.hasOwnProperty.call(groupedDataItem,y)===true){groupedItem[categoryValue][y].push(groupedDataItem[y])}}))}))}))}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy&&category!==undefined){const groupedData=group(data,(dataItem=>dataItem[category]));const y=yList[0];groupedData.forEach(((groupedDataArray,categoryValue)=>{groupedDataArray.forEach((groupedDataItem=>{if(groupedItem[categoryValue]===undefined)groupedItem[categoryValue]={};if(groupedItem[categoryValue][y]===undefined){groupedItem[categoryValue][y]=[]}if(Object.prototype.hasOwnProperty.call(groupedDataItem,y)===true){groupedItem[categoryValue][y].push(groupedDataItem[y])}}))}))}return groupedItem}function summarizeSortedGroupedItemForBoxPlot(sortedGroupedItem,boxPlotSeries,chartSubType){const summarizedData=[];for(const groupByField in sortedGroupedItem){if(chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory){const processedItem=calculateStatisticsForBoxPlot({boxPlotSeries,chartSubType,key:groupByField,data:sortedGroupedItem[groupByField]});summarizedData.push(processedItem)}}return summarizedData}function summarizeNestedAndSortedGroupedItemForBoxPlot(props){const{groupedItem,yList,boxPlotSeries,chartSubType}=props;const summarizedData=[];if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory){for(const categoryValue in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,categoryValue)===true){const value=groupedItem[categoryValue];yList.forEach((y=>{if(value[y]!==undefined){const data=value[y];const processedDataItem=calculateStatisticsForBoxPlot({boxPlotSeries,chartSubType,key:categoryValue,data});summarizedData.push(processedDataItem)}}))}}}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy&&yList.length>0){const splitByValue=getSplitByValue({where:boxPlotSeries.query?.where});const splitByField=getSplitByField(boxPlotSeries.query?.where);const category=boxPlotSeries.x;const y=yList[0];for(const categoryValue in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,categoryValue)===true){const value=groupedItem[categoryValue];if(value[y]!==undefined){const data=value[y];const processedDataItem=calculateStatisticsForBoxPlot({boxPlotSeries,chartSubType,key:splitByValue,data});processedDataItem[category]=categoryValue;processedDataItem[splitByField]=splitByValue;summarizedData.push(processedDataItem)}}}}return summarizedData}function groupAndSummarizeRawDataForBoxPlot(props){const{data,series,seriesConfig}=props;const boxPlotSeries=series;const chartSubType=getChartSubType(seriesConfig);let summarizedData=[];let yList=[boxPlotSeries.y].flat();if(chartSubType===ChartSubType.BoxPlotMonoField||chartSubType===ChartSubType.BoxPlotMultiFields){const groupedItem=groupRawDataForBoxPlot({yList,data,chartSubType});const sortedGroupedItem={};for(const groupByField in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,groupByField)===true){sortedGroupedItem[groupByField]=groupedItem[groupByField].sort(((a,b)=>a-b))}}summarizedData=summarizeSortedGroupedItemForBoxPlot(sortedGroupedItem,boxPlotSeries,chartSubType)}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategory){const groupedItem=groupRawDataForBoxPlot({data,chartSubType,yList,x:boxPlotSeries.x});const sortedGroupedItem={};for(const groupByField in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,groupByField)===true){sortedGroupedItem[groupByField]=groupedItem[groupByField].sort(((a,b)=>a-b))}}summarizedData=summarizeSortedGroupedItemForBoxPlot(sortedGroupedItem,boxPlotSeries,chartSubType)}else if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory){const category=boxPlotSeries.x;yList=getYList(seriesConfig);const groupedItem=groupNestedRawDataForBoxPlot({data,chartSubType,x:category,yList});for(const categoryValue in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,categoryValue)===true){const value=groupedItem[categoryValue];yList.forEach((field=>{if(value[field]!==undefined){value[field].sort(((a,b)=>a-b))}}))}}summarizedData=summarizeNestedAndSortedGroupedItemForBoxPlot({groupedItem,yList,boxPlotSeries,chartSubType})}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy){const filteredData=data.map((dataItem=>dataItem[boxPlotSeries.y])).sort(((a,b)=>a-b));const webChartDataItem=calculateStatisticsForBoxPlot({boxPlotSeries,chartSubType,key:boxPlotSeries.y,data:filteredData});summarizedData.push(webChartDataItem)}else if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy){const processedData={};yList.forEach((field=>{const filteredData=data.map((dataItem=>dataItem[field]));const webChartDataItem=calculateStatisticsForBoxPlot({boxPlotSeries,chartSubType,key:field,data:filteredData});processedData[field]={...processedData[field],...webChartDataItem,[ChartDefaults.boxPlot.boxPlotCategory]:field}}));summarizedData.push(...Object.values(processedData))}else if(chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy){const category=boxPlotSeries.x;const y=boxPlotSeries.y;const groupedItem=groupNestedRawDataForBoxPlot({data,chartSubType,x:category,yList});for(const categoryValue in groupedItem){if(Object.prototype.hasOwnProperty.call(groupedItem,categoryValue)===true){const value=groupedItem[categoryValue];if(value[y]!==undefined){value[y].sort(((a,b)=>a-b))}}}summarizedData=summarizeNestedAndSortedGroupedItemForBoxPlot({groupedItem,yList,boxPlotSeries,chartSubType})}return summarizedData}function groupAndSummarize(props){const{query,data,statType,series,propertyFields,seriesConfig}=props;const seriesType=getSeriesType(seriesConfig);let summarizedData=[];if(seriesType===WebChartTypes.BoxPlotSeries){summarizedData=groupAndSummarizeRawDataForBoxPlot(props)}else{let onStatisticField=query.outStatistics?.[0]?.onStatisticField;if(onStatisticField===undefined)onStatisticField=series.type===WebChartTypes.GaugeSeries?series.x:series.y;const groupByField=query.groupByFieldsForStatistics?.[0]??series.x;const groupedData=group(data,(dataItem=>dataItem[groupByField]));const arrayToProcess=Array.from(groupedData);summarizedData=summarizeData({data:arrayToProcess,statType,onStatisticField,propertyFields,seriesX:series.x,seriesY:series.type===WebChartTypes.GaugeSeries?undefined:series.y})}return summarizedData}function mergeDataItems(input,splitByField){const output=input.reduce(((accumulator,dataItem)=>{if(splitByField!==undefined)delete dataItem[splitByField];return Object.assign(accumulator,dataItem)}),{});return output}function groupDataByCategory(props){const{data,x,splitByField}=props;let groupedProcessedData=data;if(data!==undefined&&data.length>0){const rolledUpData=rollup(data,(group=>mergeDataItems(group,splitByField)),(datum=>datum[x]));groupedProcessedData=[...rolledUpData.values()]}return groupedProcessedData}function filterBySplitByField(splitByField,splitByValue){return function filter(element){return element[splitByField]?.toString()===splitByValue}}function calculateSeriesPercent(data,seriesConfig){const processedData=data;const seriesType=getSeriesType(seriesConfig);if(seriesType!==WebChartTypes.PieSeries&&seriesType!==WebChartTypes.BoxPlotSeries){const yList=getYList(seriesConfig);const firstSeriesY=seriesConfig[0].y;data.forEach((dataItem=>{let statSum=0;yList.forEach((y=>{const stat=dataItem[y];if(Number.isFinite(stat)===true)statSum+=stat}));dataItem[ChartDefaults.technicalSortingFieldBySum]=statSum;if(Number.isFinite(statSum)===true&&statSum>0){const stat=dataItem[firstSeriesY];if(Number.isFinite(stat)===true){const seriesPercent=stat/statSum;dataItem[ChartDefaults.technicalSortingFieldByPercent]=seriesPercent}}}))}return processedData}function transformRawData(chartConfig){const dataSource=chartConfig.dataSource;const seriesConfig=chartConfig.series;const seriesType=getSeriesType(seriesConfig);const rawData=dataSource.data.dataItems;let splitByField="";const seriesData=[];for(let iSeries=0;iSeries<seriesConfig.length;iSeries+=1){const currentSeriesConfig=seriesConfig[iSeries];const{query}=currentSeriesConfig;if(query!==undefined){let filteredChartData=rawData;const queryWhere=query.where;if(isAbsoluteTruthWhereClause(queryWhere)===false){splitByField=getSplitByField(queryWhere);const splitByValue=getSplitByValue({where:queryWhere});filteredChartData=filteredChartData.filter(filterBySplitByField(splitByField,splitByValue))}const sortedData=filteredChartData;if(query.orderByFields!==undefined){sortWebChartDataItems({arrayToSort:sortedData,orderByFields:query.orderByFields,forceAscendingOrder:true,seriesType})}const statType=query.outStatistics?.[0]?.statisticType??StatisticsDefaults.statisticType;seriesData.push(groupAndSummarize({query,data:sortedData,statType,series:currentSeriesConfig,propertyFields:dataSource.configFields,seriesConfig}))}}let processedData=seriesData.flat();if(seriesType!==WebChartTypes.BoxPlotSeries){if(splitByField!==""){processedData=groupDataByCategory({data:processedData,x:seriesConfig[0].x,splitByField})}processedData=calculateSeriesPercent(processedData,seriesConfig)}const chartSubType=getChartSubType(seriesConfig);if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy){const groupedItem={};const reducedData=processedData.reduce(((accumulator,dataItem)=>{const category=dataItem[ChartDefaults.boxPlot.boxPlotCategory];accumulator[category]={...accumulator[category],...dataItem};return accumulator}),groupedItem);processedData=Object.values(reducedData)}return processedData}function calculateInterQuartileRange(seriesConfig,attributes){const processAttribute=attributes;const yList=getYList(seriesConfig);const uniqueNumericField=yList.length===1;yList.forEach((y=>{const yFieldNames=getBoxPlotStatisticFieldNames(uniqueNumericField===true?undefined:y);const firstQuartile=processAttribute[yFieldNames[BoxPlotYFieldKeys.FirstQuartile]];const thirdQuartile=processAttribute[yFieldNames[BoxPlotYFieldKeys.ThirdQuartile]];const isValid=Number.isFinite(firstQuartile)===true&&Number.isFinite(thirdQuartile)===true&&thirdQuartile>=firstQuartile;if(isValid===true){processAttribute[yFieldNames[BoxPlotYFieldKeys.IQR]]=thirdQuartile-firstQuartile}}));return processAttribute}function sanitizeQueryResults(attributes,propertyNames){if(attributes!==undefined&&propertyNames!==undefined){[propertyNames].flat().forEach((propertyName=>{if(attributes[propertyName]===undefined){attributes[propertyName]=attributes[propertyName.toUpperCase()]!==undefined?attributes[propertyName.toUpperCase()]:attributes[propertyName.toLowerCase()]}if(attributes[propertyName]!==undefined){if(propertyName!==propertyName.toUpperCase())delete attributes[propertyName.toUpperCase()];if(propertyName!==propertyName.toLowerCase())delete attributes[propertyName.toLowerCase()]}else delete attributes[propertyName]}))}}function swapStatFieldNamesToStatisticFields(dataItem,outStatistics){let modifiedDataItem={...dataItem};if(dataItem!==undefined&&outStatistics[0]!==undefined){modifiedDataItem=Object.keys(dataItem).reduce(((accumulator,prop)=>{const field=outStatistics.find((item=>item.outStatisticFieldName?.toLowerCase()===prop.toLowerCase()))?.onStatisticField;if(field!==undefined&&dataItem[prop]!==undefined&&field!==prop){accumulator[field]=dataItem[prop]}else{accumulator[prop]=dataItem[prop]}return accumulator}),{})}return modifiedDataItem}function renameYFieldForSplitByNoAggregation(props){const{dataItem,splitByField,y}=props;if(dataItem!==undefined&&isEmptyStringField(splitByField)!==true&&isEmptyStringField(y)!==true){const splitByValue=dataItem[splitByField];const dataFieldY=`${y}_${splitByValue}`;dataItem[dataFieldY]=dataItem[y];delete dataItem[y]}}function mapQueryResults(props){const{queryResponse,chartConfig,mapToStatField,splitByField,fieldOID,isDateField,isTimeBinningSeries,subtypeInfo,fieldList}=props;const{series:seriesConfig}=chartConfig;const chartSubType=getChartSubType(seriesConfig);const seriesType=getSeriesType(seriesConfig);const{x}=seriesConfig[0];const{y}=seriesConfig[0];const xAxisValueFormatType=getXAxisValueFormat(chartConfig);const outStatistics=seriesConfig[0].query?.outStatistics??[];const{originalCategoryValue,originalDateValue,typeOrDomainFieldName,typeOrDomainIdValue}=ChartDefaults;const allAttributes=[];for(let featureIndex=0;featureIndex<queryResponse.length;featureIndex+=1){const feature=queryResponse[featureIndex];let attributes={...feature.attributes};if(chartSubType===ChartSubType.PieFromFields||chartSubType===ChartSubType.BarAndLineFromFields){attributes=swapStatFieldNamesToStatisticFields(attributes,outStatistics)}else if(chartSubType===ChartSubType.BarAndLineSplitByNoAggregation){renameYFieldForSplitByNoAggregation({dataItem:attributes,splitByField,y})}if(y!==undefined&&chartSubType!==ChartSubType.PieFromFields&&seriesType!==WebChartTypes.BoxPlotSeries){sanitizeQueryResults(attributes,y)}const featureExtent=getFeatureGeometryExtent(feature);if(featureExtent!==undefined){attributes[featuresExtentField]=featureExtent}let xValue=attributes[x];if(xValue===null&&seriesConfig[0]?.query?.fetchNullValues===true&&chartSubType!==ChartSubType.PieFromFields){attributes[originalCategoryValue]=null;xValue=ChartDefaults.nullValue}if(isTimeBinningSeries===true){xValue=createDatefromAttributes(attributes)}const{outStatisticFieldName}=queryDefaults.outStatistics??{};if(chartSubType===ChartSubType.BarAndLineSplitBy&&outStatisticFieldName!==undefined){const splitByValue=normalizeString({value:attributes[splitByField]?.toString()??""});const statField=mapToStatField?.get(splitByValue);if(statField!==undefined){sanitizeQueryResults(attributes,outStatisticFieldName);attributes[statField]=attributes[outStatisticFieldName];delete attributes[outStatisticFieldName]}}else if(chartSubType===ChartSubType.PieNoAggregation||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation){if(isDateField===true){attributes[originalDateValue]=xValue}else if(xValue!==ChartDefaults.nullValue){attributes[originalCategoryValue]=xValue}if(xAxisValueFormatType===WebChartTypes.CategoryAxisFormat||xAxisValueFormatType===WebChartTypes.DateAxisFormat){attributes[ChartDefaults.xAxisField]=`${xValue}-${featureIndex}`}attributes[queryDefaults.uniqueIdsName]=attributes[fieldOID]}const fieldSubtypeOrDomainDescription=getFieldDescription({subtypeInfo,fieldList,fieldName:x,fieldValueToMatch:xValue});if(fieldSubtypeOrDomainDescription!==undefined&&fieldSubtypeOrDomainDescription!==xValue&&chartSubType!==ChartSubType.PieFromFields){attributes[originalCategoryValue]=fieldSubtypeOrDomainDescription;attributes[typeOrDomainFieldName]=x;attributes[typeOrDomainIdValue]=xValue}if(seriesType===WebChartTypes.BoxPlotSeries){attributes=calculateInterQuartileRange(seriesConfig,attributes)}if(seriesType===WebChartTypes.PieSeries&&typeof xValue==="number"){if(attributes[originalCategoryValue]===undefined)attributes[originalCategoryValue]=attributes[x];xValue=`${xValue}`}if(xValue!==undefined){if(attributes[originalCategoryValue]===undefined)attributes[originalCategoryValue]=attributes[x];attributes[x]=fieldSubtypeOrDomainDescription??xValue;if(attributes[x]===null)attributes[x]=ChartDefaults.nullValue;if(attributes[ChartDefaults.xAxisField]===undefined)attributes[ChartDefaults.xAxisField]=attributes[typeOrDomainIdValue]??attributes[x]}allAttributes.push(attributes)}return allAttributes}async function processUniqueQueryResults(props){const{queryObject,uniqueQuery,chartConfig,mapToStatField,abortKey,elementCount,isTimeBinningSeries}=props;const{series:seriesConfig}=chartConfig;const chartSubType=getChartSubType(seriesConfig);let processedData=[];const splitByField=chartSubType===ChartSubType.BarAndLineSplitBy||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation?getSplitByField(seriesConfig?.[0].query?.where):"";const queryResponse=await queryAllFeatures({queryObject,queryConfig:uniqueQuery,featureCount:elementCount,abortKey});const fieldList=await fetchLayerFieldsInfo(queryObject);const fieldOID=getObjectIdField(fieldList);const dateFields=getLayerDateFields(fieldList);const{x}=seriesConfig[0];const isDateField=dateFields.includes(x);const subtypeInfo=getLayerSubtypeInfo(queryObject);processedData=mapQueryResults({queryResponse,chartConfig,mapToStatField,splitByField,fieldOID,isDateField,isTimeBinningSeries,subtypeInfo,fieldList,queryObject});if(chartSubType!==ChartSubType.BarAndLineSplitByNoAggregation&&chartSubType!==ChartSubType.BarAndLineFromFields){if(splitByField!==""){processedData=groupDataByCategory({data:processedData,x,splitByField})}processedData=calculateSeriesPercent(processedData,seriesConfig)}return processedData}async function getTotalElementCount(props){const{chartConfig,queryObject,queryConfig,numberMaxOfFeaturesToFetch,behaviorAfterLimit,isGaugeByFeature}=props;const{series:seriesConfig}=chartConfig;const chartSubType=getChartSubType(seriesConfig);const{x}=seriesConfig[0];const numberOfSeries=seriesConfig.length;let categoryOrDateCount;let elementCount;if(chartSubType===ChartSubType.BoxPlotMonoFieldAndSplitBy||chartSubType===ChartSubType.BoxPlotMultiFieldsAndSplitBy||chartSubType===ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy){elementCount=numberOfSeries;categoryOrDateCount=elementCount}else if(chartSubType===ChartSubType.BoxPlotMonoField){elementCount=1;categoryOrDateCount=elementCount}else if(chartSubType===ChartSubType.BoxPlotMultiFields){elementCount=chartConfig.series[0].y.length;categoryOrDateCount=elementCount}else{const isPieFromFields=isPieChartFromFields(seriesConfig);if(isPieFromFields===true||chartSubType===ChartSubType.BarAndLineFromFields){elementCount=seriesConfig[0].query?.outStatistics?.filter((stat=>stat.statisticType!==RESTStatisticType.EnvelopeAggregate)).length??0;categoryOrDateCount=elementCount}else{categoryOrDateCount=await queryFeatureCount({queryObject,x,chartSubType,queryConfig,isGaugeByFeature})}if(categoryOrDateCount!==undefined)elementCount=categoryOrDateCount*numberOfSeries;if(behaviorAfterLimit===LimitBehavior.RenderUpToTheLimit&&elementCount!==undefined&&numberMaxOfFeaturesToFetch!==undefined&&numberMaxOfFeaturesToFetch<elementCount){elementCount=numberMaxOfFeaturesToFetch;categoryOrDateCount=Math.ceil(elementCount/numberOfSeries)}}return{categoryOrDateCount,elementCount}}function getModifiedOrderByFields(props){const{chartConfig,orderByFieldsConfig,useCodedValueDomain}=props;const firstSeries=chartConfig.series[0];const{x,y}=firstSeries;const seriesType=getSeriesType([firstSeries]);const chartSubType=getChartSubType(chartConfig.series);const stackedType=getSeriesStackedType(firstSeries);let sortingField;let sortOrder;let sort=orderByFieldsConfig?.[0];if(seriesType!==WebChartTypes.PieSeries&&chartSubType!==ChartSubType.BarAndLineFromFields)sort=sort??`${x}`;if(sort!==undefined&&isEmptyStringField(sort)===false){[sortingField,sortOrder]=sort.split(" ");sortOrder=sortOrder??WebChartSortOrderKinds.Ascending;if((sortingField===x||sortingField===defaultPieFromFieldsName)&&chartConfig.sortLabelsBy===LabelValueTypes.OriginalValue){sortingField=useCodedValueDomain===true?ChartDefaults.typeOrDomainIdValue:ChartDefaults.originalCategoryValue}else if(seriesType!==WebChartTypes.PieSeries&&sortingField!==x&&chartConfig.series?.length>1&&chartConfig.sortLabelsBy!==LabelValueTypes.OriginalValue){switch(stackedType){case WebChartStackedKinds.Stacked:sortingField=ChartDefaults.technicalSortingFieldBySum;break;case WebChartStackedKinds.Stacked100:sortingField=ChartDefaults.technicalSortingFieldByPercent;break;case WebChartStackedKinds.Side:if(y!==undefined)sortingField=y;break}}}return{sortOrder,sortingField}}function sortFetchedData(props){const{arrayToSort,chartConfig,orderByFieldsConfig}=props;const{series:seriesConfig,dataSource}=chartConfig;if((dataSource?.type===WebChartDataSourceTypes.Inline&&dataSource.processed===true)===false){const chartSubType=getChartSubType(seriesConfig);const seriesType=getSeriesType(seriesConfig);const xAxisValueFormatType=getXAxisValueFormat(chartConfig);const{x}=seriesConfig[0];const fieldHasCodedValueDomain=arrayToSort?.length>0&&arrayToSort.some((item=>item.hasOwnProperty(ChartDefaults.typeOrDomainIdValue)))===true;const{sortOrder,sortingField}=getModifiedOrderByFields({chartConfig,orderByFieldsConfig,useCodedValueDomain:fieldHasCodedValueDomain});const orderByFields=sortingField!==undefined?[`${sortingField} ${sortOrder}`]:[];const forceAscendingOrder=xAxisValueFormatType===WebChartTypes.DateAxisFormat&&sortingField===x;const sortProps={arrayToSort,orderByFields,isNonAggregated:chartSubType===ChartSubType.PieNoAggregation||chartSubType===ChartSubType.BarAndLineNoAggregation||chartSubType===ChartSubType.BarAndLineSplitByNoAggregation,sortByXAxisField:sortingField===x,forceAscendingOrder,seriesType};sortWebChartDataItems(sortProps)}}async function fetchFinishedGenericChartData(props){const{chartConfig,queryConfig,options,queryObject,abortKey}=props;const{chartLimits}=options??{};const{behaviorAfterLimit}=chartLimits??{};const fetchResult={valid:true};let data;let outliers=[];let outlierExceedLimit=false;const seriesConfig=chartConfig.series;const firstSeriesConfig=seriesConfig[0];const chartSubType=getChartSubType(chartConfig.series);if(firstSeriesConfig!==undefined&&queryObject!==undefined){const chartType=getSeriesType(seriesConfig,0);const{uniqueQuery,mapToStatField}=buildUniqueQuery({chartConfig,queryObject,queryConfig,options});let{categoryOrDateCount,elementCount}=await getTotalElementCount({chartConfig,queryObject,queryConfig,behaviorAfterLimit,numberMaxOfFeaturesToFetch:uniqueQuery.num});const countQueryFailed=Number.isFinite(elementCount)===false;let numberOfElementsUnderLimit=countQueryFailed===true||isNumberOfElementsUnderLimit({count:elementCount??0,seriesCount:seriesConfig.length,seriesType:chartType,chartLimits});if(numberOfElementsUnderLimit===true){data=await processUniqueQueryResults({queryObject,uniqueQuery,chartConfig,mapToStatField,elementCount,isTimeBinningSeries:false,abortKey});if(chartType===WebChartTypes.BoxPlotSeries){const{boxPlotData,boxPlotOutliers}=await completeBoxPlotResults({data,queryObject,uniqueQuery,chartConfig,elementCount,abortKey});if(chartLimits?.maxBoxPlotOutlierLimit!==undefined){numberOfElementsUnderLimit=outliers.length<=chartLimits?.maxBoxPlotOutlierLimit;outlierExceedLimit=numberOfElementsUnderLimit===false}fetchResult.data={dataItems:boxPlotData,outliers:boxPlotOutliers}}if(countQueryFailed===true){categoryOrDateCount=data.length;elementCount=categoryOrDateCount*seriesConfig.length;numberOfElementsUnderLimit=isNumberOfElementsUnderLimit({count:elementCount,seriesCount:seriesConfig.length,seriesType:chartType,chartLimits})}if(numberOfElementsUnderLimit===true){if(chartType===WebChartTypes.PieSeries){const isPieFromFields=isPieChartFromFields(seriesConfig);if(isPieFromFields===true){data=convertMultipleNumericFieldsData({dataToConvert:data[0],x:defaultPieFromFieldsName,y:defaultPieFromFieldsValue})}const isSupportedPie=checkForSupportedPieChart(data,isPieFromFields===true?defaultPieFromFieldsValue:firstSeriesConfig.y);if(isSupportedPie===true){fetchResult.data={dataItems:data}}else{completeDataUnsupportedPieInfo(fetchResult,DataWarningKeywords.PieChartMixOfNegativePositiveSlices)}}else if(chartType===WebChartTypes.BarSeries||chartType===WebChartTypes.LineSeries||chartType===WebChartTypes.ComboLineAndBarSeries){if(chartSubType===ChartSubType.BarAndLineFromFields){data=convertMultipleNumericFieldsData({dataToConvert:data[0],x:firstSeriesConfig.x,y:firstSeriesConfig.y})}else{data=await completeDataWithMissingCategories({queryObject,seriesData:data,chartConfig,queryConfig,categoryOrDateCount,behaviorAfterLimit,abortKey})}elementCount=data.length*seriesConfig.length;numberOfElementsUnderLimit=isNumberOfElementsUnderLimit({count:elementCount,seriesCount:seriesConfig.length,seriesType:chartType,chartLimits});if(numberOfElementsUnderLimit===true){data=completeDataWithEmptySeries(data,chartConfig);sortFetchedData({arrayToSort:data,orderByFieldsConfig:uniqueQuery.orderByFields,chartConfig});let timeIntervalInfo={};const{timeIntervalSize,timeIntervalUnits}=firstSeriesConfig;if(timeIntervalSize!==undefined&&timeIntervalUnits!==undefined){timeIntervalInfo={timeIntervalSize,timeIntervalUnits}}fetchResult.data={dataItems:data,timeIntervalInfo}}}}}if(numberOfElementsUnderLimit===false){completeDataExceedLimitInfo({dataInfo:fetchResult,seriesType:chartType,subError:{outlierLimit:outlierExceedLimit}})}fetchResult.count=elementCount}return fetchResult}async function fetchFinishedLineChartTimeBinningData(props){const{chartConfig,queryConfig,queryObject,abortKey,binnedServerData,options}=props;const{chartLimits}=options??{};const{behaviorAfterLimit}=chartLimits??{};const{chartRenderer}=chartConfig;const seriesConfig=chartConfig.series;const firstSeries=seriesConfig[0];const fetchResult={valid:true};let data;if(queryObject!==undefined){const{x,timeIntervalUnits,timeIntervalSize}=firstSeries;const calculateTimeIntervalInfoIsNeeded=needsToCalculateTimeIntervalInfo({series:firstSeries,isTimeBinningSeries:true,setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided});const timeBinningStats=binnedServerData?.timeBinningStats??await getTimeBinningStatistics({queryObject,queryConfig,x});const timeIntervalInfo=calculateTimeIntervalInfoIsNeeded===true?getBestInterval(timeBinningStats):{timeIntervalUnits,timeIntervalSize};const{uniqueQuery,mapToStatField}=buildUniqueQuery({chartConfig,queryConfig,queryObject,timeIntervalInfo,options});const{numberOfFinalBinsWithinDataRange:markerCountPerSeries}=getNumberOfBinsWithinDataRange({dateMinTimestamp:timeBinningStats.dateRange.dateMinTimestamp,dateMaxTimestamp:timeBinningStats.dateRange.dateMaxTimestamp,timeIntervalInfo});let totalMarkerCount=markerCountPerSeries*seriesConfig.length;totalMarkerCount=adjustElementCount(totalMarkerCount,timeIntervalInfo.timeIntervalUnits);const{elementCount}=await getTotalElementCount({chartConfig,queryObject,queryConfig,behaviorAfterLimit,numberMaxOfFeaturesToFetch:uniqueQuery.num});const numberOfElementsUnderLimit=isNumberOfElementsUnderLimit({count:totalMarkerCount??0,seriesCount:seriesConfig.length,seriesType:WebChartTypes.LineSeries,chartLimits});if(numberOfElementsUnderLimit===true){data=binnedServerData?.data??await processUniqueQueryResults({queryObject,uniqueQuery,chartConfig,mapToStatField,elementCount,abortKey,isTimeBinningSeries:true});fetchResult.binnedServerData={data:cloneDeep(data),timeBinningStats};data=await processTimeBinningData({queryObject,queryConfig,data,x,seriesConfig,dateRange:timeBinningStats.dateRange,timeIntervalInfo,chartRenderer});if(behaviorAfterLimit===LimitBehavior.RenderUpToTheLimit){const numberMaxOfFeaturesToFetch=getMaximumNumberOfFeaturesToFetch(chartConfig,options?.chartLimits);if(numberMaxOfFeaturesToFetch!==undefined)data.splice(numberMaxOfFeaturesToFetch)}}else{fetchResult.valid=false;fetchResult.invalidType=DataWarningKeywords.LineChartExceedsLimit}fetchResult.data={dataItems:data,timeIntervalInfo};fetchResult.count=totalMarkerCount}return fetchResult}async function fetchFinishedGenericChartSelectionData(props){const{chartConfig,queryConfig,queryObject,abortKey,options}=props;const{setTimeBinningInfoWhenNotProvided}=options??{};const fetchResult={valid:true};if(queryObject!==undefined){const seriesConfig=chartConfig.series;const isTimeBinningSeries=isSeriesUsingTimeBinning({seriesConfig:seriesConfig[0],xAxisValueFormatType:getXAxisValueFormat(chartConfig),setTimeBinningInfoWhenNotProvided});const{uniqueQuery,mapToStatField}=buildUniqueQuery({chartConfig,queryObject,queryConfig,setTimeBinningInfoWhenNotProvided,options});let data=await processUniqueQueryResults({queryObject,uniqueQuery,elementCount:1,chartConfig,mapToStatField,isTimeBinningSeries,abortKey});if(getSeriesType(chartConfig.series)===WebChartTypes.BoxPlotSeries){data=processDataForBoxPlot({chartConfig,data,calculateZScore:false})}fetchResult.data={dataItems:data}}return fetchResult}function transformRawGaugeData(chartConfig){const dataSource=chartConfig.dataSource;const{dataItems:data}=dataSource.data;const series=chartConfig.series[0];let processedData=[];const{query}=series;if(query!==undefined){const statType=query.outStatistics?.[0]?.statisticType??StatisticsDefaults.statisticType;processedData=groupAndSummarize({query,data,statType,series,propertyFields:dataSource.configFields})}return processedData}async function fetchGaugeData(props){const{queryObject,queryConfig,chartConfig,abortKey}=props;const seriesConfig=chartConfig.series[0];const{x,valueConversion}=seriesConfig;const gaugeByFeature=isGaugeByFeature(chartConfig);const allFeatures=await queryAllFeatures({queryObject,queryConfig,outFields:["*"],abortKey,featureCount:queryConfig.num??1});let rawData=[{[x]:null}];if(gaugeByFeature===true){rawData=allFeatures.map((graphic=>{sanitizeQueryResults(graphic.attributes,x);const value=applyValueConversion(graphic.attributes[x],valueConversion);return{...graphic.attributes,[x]:value}}))}else if(allFeatures.length>0){let value=allFeatures[0].attributes[x]??allFeatures[0].attributes[x.toUpperCase()]??allFeatures[0].attributes[x.toLowerCase()];value=applyValueConversion(value,valueConversion);rawData=[{[x]:value}]}return rawData}async function fetchFinishedGaugeData(props){const{queryObject,chartConfig,queryConfig,options,abortKey}=props;const{chartLimits}=options??{};const fetchResult={valid:true};if(chartConfig.dataSource?.type===WebChartDataSourceTypes.Inline){fetchResult.data={dataItems:transformRawGaugeData(chartConfig)}}else if(queryObject!==undefined){const{behaviorAfterLimit,maxGaugeByFeaturesLimit}=chartLimits??{};const gaugeByFeature=isGaugeByFeature(chartConfig);let numberOfElementsUnderLimit=true;let elementCount;if(gaugeByFeature===true){addFeatureLimitation({chartConfig,options,uniqueQuery:queryConfig});if(options?.chartLimits?.behaviorAfterLimit!==LimitBehavior.RenderUpToTheLimit){elementCount=(await getTotalElementCount({chartConfig,queryObject,queryConfig,behaviorAfterLimit,numberMaxOfFeaturesToFetch:maxGaugeByFeaturesLimit,isGaugeByFeature:gaugeByFeature})).elementCount;numberOfElementsUnderLimit=isNumberOfElementsUnderLimit({count:elementCount??0,seriesCount:chartConfig.series.length,seriesType:WebChartTypes.GaugeSeries,chartLimits})}}if(Number.isNaN(numberOfElementsUnderLimit)===true||numberOfElementsUnderLimit===true){const dataItems=await fetchGaugeData({queryObject,chartConfig,queryConfig,abortKey});fetchResult.data={dataItems};fetchResult.count=dataItems.length}else{fetchResult.count=elementCount;completeDataExceedLimitInfo({dataInfo:fetchResult,seriesType:WebChartTypes.GaugeSeries})}}return fetchResult}function processMin(min){let processedMin=min;const mins=min.toString().split(".");if(mins[1]!==undefined){const numberOfDecimals=mins[1].length;const toSubtract=10**-numberOfDecimals;processedMin=min-toSubtract}return processedMin}function getNormalizationType(transformation){let normalizationType="field";switch(transformation){case WebChartDataTransformations.Log:normalizationType="natural-log";break;case WebChartDataTransformations.Sqrt:normalizationType="square-root";break}return normalizationType}function createMapView(extent){const map=new Map$3$1__default["default"]({layers:[]});const view=new MapView__default["default"]({map,extent});return view}async function fetchDataStatistics$1(props){const{queryObject,fieldName,queryConfig,abortKey}=props;const fieldList=await fetchLayerFieldsInfo(queryObject);const objectIDField=getObjectIdField(fieldList);const totalCountStatFieldName=`${RESTStatisticType.Count}_${objectIDField}`;const featureCountStatFieldName=`${RESTStatisticType.Count}_${fieldName}`;const minValueStatFieldName=`${RESTStatisticType.Minimum}_${fieldName}`;const maxValueStatFieldName=`${RESTStatisticType.Maximum}_${fieldName}`;const modifiedQueryConfig={...queryConfig,outStatistics:[{statisticType:RESTStatisticType.Count,onStatisticField:objectIDField,outStatisticFieldName:totalCountStatFieldName},{statisticType:RESTStatisticType.Count,onStatisticField:fieldName,outStatisticFieldName:featureCountStatFieldName},{statisticType:RESTStatisticType.Minimum,onStatisticField:fieldName,outStatisticFieldName:minValueStatFieldName},{statisticType:RESTStatisticType.Maximum,onStatisticField:fieldName,outStatisticFieldName:maxValueStatFieldName}]};const stats=await queryStatistics({queryObject,queryConfig:modifiedQueryConfig,abortKey});const countIncludingNulls=stats.get(totalCountStatFieldName)??NaN;const countExcludingNulls=stats.get(featureCountStatFieldName)??NaN;const min=stats.get(minValueStatFieldName)??NaN;const max=stats.get(maxValueStatFieldName)??NaN;return{countExcludingNulls,countIncludingNulls,min,max}}async function fetchFeatureLayerRawHistogramData(props){const{queryConfig,chartConfig,queryObject,abortKey}=props;const seriesConfig=chartConfig.series[0];const{x,dataTransformationType}=seriesConfig;let rawData=[];const{countIncludingNulls,countExcludingNulls,min,max}=await fetchDataStatistics$1({queryObject,queryConfig,fieldName:x,abortKey});const dataCompatibleWithTransformation=isDataCompatibleWithTransformation(dataTransformationType,min);const dataCountIncompatible=countExcludingNulls<2||min===max;const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,`${x} is not null`]);return{rawData,dataCompatibleWithTransformation,dataCountIncompatible,countExcludingNulls,countIncludingNulls}}function sanitizeSummaryStatistics(input){const output={...input};output.avg=output.avg??NaN;output.count=output.count??NaN;output.max=output.max??NaN;output.min=output.min??NaN;output.stddev=output.stddev??NaN;output.sum=output.sum??NaN;output.variance=output.variance??NaN;output.median=output.median??NaN;return output}function getSummaryStatisticsParams(props){const{seriesConfig,rawData,layer,useFeaturesInView,view,queryConfig}=props;const{x,dataTransformationType}=seriesConfig;let summaryStatisticsParams={layer,view,field:x,sqlWhere:isAbsoluteTruthWhereClause(queryConfig.where)===true?undefined:queryConfig.where,useFeaturesInView};if(dataTransformationType!==WebChartDataTransformations.None){summaryStatisticsParams={...summaryStatisticsParams,normalizationType:getNormalizationType(dataTransformationType)}}return summaryStatisticsParams}function getHistogramParams(props){const{seriesConfig,rawData,layer,useFeaturesInView,view,minValue,maxValue,valueExpression,queryConfig}=props;const{x,binCount,dataTransformationType}=seriesConfig;let histogramParams={layer,view,field:x,minValue,maxValue,numBins:binCount??histogramBinCount,classificationMethod:"equal-interval",sqlWhere:isAbsoluteTruthWhereClause(queryConfig.where)===true?undefined:queryConfig.where,useFeaturesInView};if(dataTransformationType!==WebChartDataTransformations.None){histogramParams={...histogramParams,normalizationType:getNormalizationType(dataTransformationType)}}return histogramParams}function getNullsCount(dataLength,count){let nulls=NaN;if(dataLength!==undefined&&count!==undefined)nulls=dataLength-count;return nulls}async function transformLayerHistogramData(props){const{chartConfig,queryConfig,rawData,queryObject,countExcludingNulls,countIncludingNulls,options,locale}=props;const seriesConfig=chartConfig.series[0];const{dataTransformationType}=seriesConfig;let transformResult={valid:true};if(queryObject!==undefined){const layer=getLayerFromQueryObject(queryObject);const geometryExtent=getQueryGeometry$1(queryConfig?.geometry)?.extent?.toJSON();const hasExtent=geometryExtent!==undefined;const histogramView=options?.view??createMapView(geometryExtent);const summaryStatisticsParams=getSummaryStatisticsParams({seriesConfig,rawData,layer,view:histogramView,useFeaturesInView:hasExtent,queryConfig});const featureFilter=new FeatureFilter__default["default"]({geometry:histogramView.extent});if(histogramView.extent!==undefined&&doesLayerSupportQueryWithDistance(layer)===true){const{distance,units}=queryConfig;if(distance!==undefined)featureFilter.distance=distance;if(units!==undefined)featureFilter.units=units}summaryStatisticsParams.filter=featureFilter;let summaryStatisticsData;try{summaryStatisticsData=await summaryStatistics__default["default"](summaryStatisticsParams)}catch(e){const errorStrings=await fetchErrorsStrings(locale);throw new ArcgisChartsError(ErrorKeywords.QueryFeaturesError,errorStrings.errors.queryError,e)}summaryStatisticsData=sanitizeSummaryStatistics(summaryStatisticsData);const{avg,count,stddev,min,max,sum,median}=summaryStatisticsData;if(count===0){transformResult={...createInvalidDataInfoForHistogram(dataTransformationType)}}else{const histogramParams=getHistogramParams({seriesConfig,layer,view:histogramView,useFeaturesInView:hasExtent,rawData,minValue:processMin(min),maxValue:max,valueExpression:summaryStatisticsParams.valueExpression,queryConfig});histogramParams.filter=featureFilter;let histogramData;try{histogramData=await histogram__default["default"](histogramParams)}catch(e){const errorStrings=await fetchErrorsStrings(locale);throw new ArcgisChartsError(ErrorKeywords.QueryFeaturesError,errorStrings.errors.queryError,e)}const nulls=getNullsCount(countIncludingNulls,countExcludingNulls);transformResult.data={mean:avg,stddev,min,max,median,bins:histogramData?.bins,count:countExcludingNulls,nulls,sum}}}return transformResult}async function fetchFinishedHistogramData(props){const{chartConfig,queryConfig,queryObject,options,abortKey,locale}=props;const{dataSource,series}=chartConfig;const seriesConfig=series[0];const{rawData,dataCompatibleWithTransformation,dataCountIncompatible,countIncludingNulls,countExcludingNulls}=dataSource.type===WebChartDataSourceTypes.Inline?fetchInlineRawHistogramData(dataSource.data.dataItems,seriesConfig):await fetchFeatureLayerRawHistogramData({queryObject,chartConfig,queryConfig,abortKey});let transformedData={valid:true};if(dataCompatibleWithTransformation===false||dataCountIncompatible===true){transformedData=createInvalidDataInfoForHistogram(seriesConfig.dataTransformationType,dataCountIncompatible)}else{transformedData=dataSource.type===WebChartDataSourceTypes.Inline?transformInlineHistogramData(seriesConfig,rawData):await transformLayerHistogramData({chartConfig,rawData,queryObject,queryConfig,countIncludingNulls,countExcludingNulls,options,abortKey,locale})}return transformedData}async function fetchHistogramSelectionData(props){const{queryObject,queryConfig,chartConfig,x}=props;const{series:seriesConfig}=chartConfig;const{dataTransformationType}=seriesConfig[0];const modifiedQueryConfig={...queryConfig,orderByFields:[x]};const queryResults=await queryAllFeatures({queryObject,queryConfig:modifiedQueryConfig,outFields:[x]});const selectionData=queryResults.map((graphic=>({[x]:transformValue(graphic.attributes[x],dataTransformationType)})));return{valid:true,data:{dataItems:selectionData}}}var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var chance$1$1={exports:{}};(function(module,exports){(function(){var MAX_INT=9007199254740992;var MIN_INT=-MAX_INT;var NUMBERS="0123456789";var CHARS_LOWER="abcdefghijklmnopqrstuvwxyz";var CHARS_UPPER=CHARS_LOWER.toUpperCase();var HEX_POOL=NUMBERS+"abcdef";function UnsupportedError(message){this.name="UnsupportedError";this.message=message||"This feature is not supported on this platform"}UnsupportedError.prototype=new Error;UnsupportedError.prototype.constructor=UnsupportedError;var slice=Array.prototype.slice;function Chance(seed){if(!(this instanceof Chance)){if(!seed){seed=null}return seed===null?new Chance:new Chance(seed)}if(typeof seed==="function"){this.random=seed;return this}if(arguments.length){this.seed=0}for(var i=0;i<arguments.length;i++){var seedling=0;if(Object.prototype.toString.call(arguments[i])==="[object String]"){for(var j=0;j<arguments[i].length;j++){var hash=0;for(var k=0;k<arguments[i].length;k++){hash=arguments[i].charCodeAt(k)+(hash<<6)+(hash<<16)-hash}seedling+=hash}}else{seedling=arguments[i]}this.seed+=(arguments.length-i)*seedling}this.mt=this.mersenne_twister(this.seed);this.bimd5=this.blueimp_md5();this.random=function(){return this.mt.random(this.seed)};return this}Chance.prototype.VERSION="1.1.7";function initOptions(options,defaults){options=options||{};if(defaults){for(var i in defaults){if(typeof options[i]==="undefined"){options[i]=defaults[i]}}}return options}function range(size){return Array.apply(null,Array(size)).map((function(_,i){return i}))}function testRange(test,errorMessage){if(test){throw new RangeError(errorMessage)}}var base64=function(){throw new Error("No Base64 encoder available.")};(function determineBase64Encoder(){if(typeof btoa==="function"){base64=btoa}else if(typeof Buffer==="function"){base64=function(input){return new Buffer(input).toString("base64")}}})();Chance.prototype.bool=function(options){options=initOptions(options,{likelihood:50});testRange(options.likelihood<0||options.likelihood>100,"Chance: Likelihood accepts values from 0 to 100.");return this.random()*100<options.likelihood};Chance.prototype.falsy=function(options){options=initOptions(options,{pool:[false,null,0,NaN,""]});var pool=options.pool,index=this.integer({min:0,max:pool.length}),value=pool[index];return value};Chance.prototype.animal=function(options){options=initOptions(options);if(typeof options.type!=="undefined"){testRange(!this.get("animals")[options.type.toLowerCase()],"Please pick from desert, ocean, grassland, forest, zoo, pets, farm.");return this.pick(this.get("animals")[options.type.toLowerCase()])}var animalTypeArray=["desert","forest","ocean","zoo","farm","pet","grassland"];return this.pick(this.get("animals")[this.pick(animalTypeArray)])};Chance.prototype.character=function(options){options=initOptions(options);var symbols="!@#$%^&*()[]",letters,pool;if(options.casing==="lower"){letters=CHARS_LOWER}else if(options.casing==="upper"){letters=CHARS_UPPER}else{letters=CHARS_LOWER+CHARS_UPPER}if(options.pool){pool=options.pool}else{pool="";if(options.alpha){pool+=letters}if(options.numeric){pool+=NUMBERS}if(options.symbols){pool+=symbols}if(!pool){pool=letters+NUMBERS+symbols}}return pool.charAt(this.natural({max:pool.length-1}))};Chance.prototype.floating=function(options){options=initOptions(options,{fixed:4});testRange(options.fixed&&options.precision,"Chance: Cannot specify both fixed and precision.");var num;var fixed=Math.pow(10,options.fixed);var max=MAX_INT/fixed;var min=-max;testRange(options.min&&options.fixed&&options.min<min,"Chance: Min specified is out of range with fixed. Min should be, at least, "+min);testRange(options.max&&options.fixed&&options.max>max,"Chance: Max specified is out of range with fixed. Max should be, at most, "+max);options=initOptions(options,{min,max});num=this.integer({min:options.min*fixed,max:options.max*fixed});var num_fixed=(num/fixed).toFixed(options.fixed);return parseFloat(num_fixed)};Chance.prototype.integer=function(options){options=initOptions(options,{min:MIN_INT,max:MAX_INT});testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return Math.floor(this.random()*(options.max-options.min+1)+options.min)};Chance.prototype.natural=function(options){options=initOptions(options,{min:0,max:MAX_INT});if(typeof options.numerals==="number"){testRange(options.numerals<1,"Chance: Numerals cannot be less than one.");options.min=Math.pow(10,options.numerals-1);options.max=Math.pow(10,options.numerals)-1}testRange(options.min<0,"Chance: Min cannot be less than zero.");if(options.exclude){testRange(!Array.isArray(options.exclude),"Chance: exclude must be an array.");for(var exclusionIndex in options.exclude){testRange(!Number.isInteger(options.exclude[exclusionIndex]),"Chance: exclude must be numbers.")}var random=options.min+this.natural({max:options.max-options.min-options.exclude.length});var sortedExclusions=options.exclude.sort();for(var exclusionIndex in sortedExclusions){if(random<sortedExclusions[exclusionIndex]){break}random++}return random}return this.integer(options)};Chance.prototype.prime=function(options){options=initOptions(options,{min:0,max:1e4});testRange(options.min<0,"Chance: Min cannot be less than zero.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");var lastPrime=data.primes[data.primes.length-1];if(options.max>lastPrime){for(var i=lastPrime+2;i<=options.max;++i){if(this.is_prime(i)){data.primes.push(i)}}}var targetPrimes=data.primes.filter((function(prime){return prime>=options.min&&prime<=options.max}));return this.pick(targetPrimes)};Chance.prototype.is_prime=function(n){if(n%1||n<2){return false}if(n%2===0){return n===2}if(n%3===0){return n===3}var m=Math.sqrt(n);for(var i=5;i<=m;i+=6){if(n%i===0||n%(i+2)===0){return false}}return true};Chance.prototype.hex=function(options){options=initOptions(options,{min:0,max:MAX_INT,casing:"lower"});testRange(options.min<0,"Chance: Min cannot be less than zero.");var integer=this.natural({min:options.min,max:options.max});if(options.casing==="upper"){return integer.toString(16).toUpperCase()}return integer.toString(16)};Chance.prototype.letter=function(options){options=initOptions(options,{casing:"lower"});var pool="abcdefghijklmnopqrstuvwxyz";var letter=this.character({pool});if(options.casing==="upper"){letter=letter.toUpperCase()}return letter};Chance.prototype.string=function(options){options=initOptions(options,{min:5,max:20});if(!options.length){options.length=this.natural({min:options.min,max:options.max})}testRange(options.length<0,"Chance: Length cannot be less than zero.");var length=options.length,text=this.n(this.character,length,options);return text.join("")};function CopyToken(c){this.c=c}CopyToken.prototype={substitute:function(){return this.c}};function EscapeToken(c){this.c=c}EscapeToken.prototype={substitute:function(){if(!/[{}\\]/.test(this.c)){throw new Error('Invalid escape sequence: "\\'+this.c+'".')}return this.c}};function ReplaceToken(c){this.c=c}ReplaceToken.prototype={replacers:{"#":function(chance){return chance.character({pool:NUMBERS})},A:function(chance){return chance.character({pool:CHARS_UPPER})},a:function(chance){return chance.character({pool:CHARS_LOWER})}},substitute:function(chance){var replacer=this.replacers[this.c];if(!replacer){throw new Error('Invalid replacement character: "'+this.c+'".')}return replacer(chance)}};function parseTemplate(template){var tokens=[];var mode="identity";for(var i=0;i<template.length;i++){var c=template[i];switch(mode){case"escape":tokens.push(new EscapeToken(c));mode="identity";break;case"identity":if(c==="{"){mode="replace"}else if(c==="\\"){mode="escape"}else{tokens.push(new CopyToken(c))}break;case"replace":if(c==="}"){mode="identity"}else{tokens.push(new ReplaceToken(c))}break}}return tokens}Chance.prototype.template=function(template){if(!template){throw new Error("Template string is required")}var self=this;return parseTemplate(template).map((function(token){return token.substitute(self)})).join("")};Chance.prototype.buffer=function(options){if(typeof Buffer==="undefined"){throw new UnsupportedError("Sorry, the buffer() function is not supported on your platform")}options=initOptions(options,{length:this.natural({min:5,max:20})});testRange(options.length<0,"Chance: Length cannot be less than zero.");var length=options.length;var content=this.n(this.character,length,options);return Buffer.from(content)};Chance.prototype.capitalize=function(word){return word.charAt(0).toUpperCase()+word.substr(1)};Chance.prototype.mixin=function(obj){for(var func_name in obj){Chance.prototype[func_name]=obj[func_name]}return this};Chance.prototype.unique=function(fn,num,options){testRange(typeof fn!=="function","Chance: The first argument must be a function.");var comparator=function(arr,val){return arr.indexOf(val)!==-1};if(options){comparator=options.comparator||comparator}var arr=[],count=0,result,MAX_DUPLICATES=num*50,params=slice.call(arguments,2);while(arr.length<num){var clonedParams=JSON.parse(JSON.stringify(params));result=fn.apply(this,clonedParams);if(!comparator(arr,result)){arr.push(result);count=0}if(++count>MAX_DUPLICATES){throw new RangeError("Chance: num is likely too large for sample set")}}return arr};Chance.prototype.n=function(fn,n){testRange(typeof fn!=="function","Chance: The first argument must be a function.");if(typeof n==="undefined"){n=1}var i=n,arr=[],params=slice.call(arguments,2);i=Math.max(0,i);for(null;i--;null){arr.push(fn.apply(this,params))}return arr};Chance.prototype.pad=function(number,width,pad){pad=pad||"0";number=number+"";return number.length>=width?number:new Array(width-number.length+1).join(pad)+number};Chance.prototype.pick=function(arr,count){if(arr.length===0){throw new RangeError("Chance: Cannot pick() from an empty array")}if(!count||count===1){return arr[this.natural({max:arr.length-1})]}else{return this.shuffle(arr).slice(0,count)}};Chance.prototype.pickone=function(arr){if(arr.length===0){throw new RangeError("Chance: Cannot pickone() from an empty array")}return arr[this.natural({max:arr.length-1})]};Chance.prototype.pickset=function(arr,count){if(count===0){return[]}if(arr.length===0){throw new RangeError("Chance: Cannot pickset() from an empty array")}if(count<0){throw new RangeError("Chance: Count must be a positive number")}if(!count||count===1){return[this.pickone(arr)]}else{var array=arr.slice(0);var end=array.length;return this.n((function(){var index=this.natural({max:--end});var value=array[index];array[index]=array[end];return value}),Math.min(end,count))}};Chance.prototype.shuffle=function(arr){var new_array=[],j=0,length=Number(arr.length),source_indexes=range(length),last_source_index=length-1,selected_source_index;for(var i=0;i<length;i++){selected_source_index=this.natural({max:last_source_index});j=source_indexes[selected_source_index];new_array[i]=arr[j];source_indexes[selected_source_index]=source_indexes[last_source_index];last_source_index-=1}return new_array};Chance.prototype.weighted=function(arr,weights,trim){if(arr.length!==weights.length){throw new RangeError("Chance: Length of array and weights must match")}var sum=0;var val;for(var weightIndex=0;weightIndex<weights.length;++weightIndex){val=weights[weightIndex];if(isNaN(val)){throw new RangeError("Chance: All weights must be numbers")}if(val>0){sum+=val}}if(sum===0){throw new RangeError("Chance: No valid entries in array weights")}var selected=this.random()*sum;var total=0;var lastGoodIdx=-1;var chosenIdx;for(weightIndex=0;weightIndex<weights.length;++weightIndex){val=weights[weightIndex];total+=val;if(val>0){if(selected<=total){chosenIdx=weightIndex;break}lastGoodIdx=weightIndex}if(weightIndex===weights.length-1){chosenIdx=lastGoodIdx}}var chosen=arr[chosenIdx];trim=typeof trim==="undefined"?false:trim;if(trim){arr.splice(chosenIdx,1);weights.splice(chosenIdx,1)}return chosen};Chance.prototype.paragraph=function(options){options=initOptions(options);var sentences=options.sentences||this.natural({min:3,max:7}),sentence_array=this.n(this.sentence,sentences),separator=options.linebreak===true?"\n":" ";return sentence_array.join(separator)};Chance.prototype.sentence=function(options){options=initOptions(options);var words=options.words||this.natural({min:12,max:18}),punctuation=options.punctuation,text,word_array=this.n(this.word,words);text=word_array.join(" ");text=this.capitalize(text);if(punctuation!==false&&!/^[.?;!:]$/.test(punctuation)){punctuation="."}if(punctuation){text+=punctuation}return text};Chance.prototype.syllable=function(options){options=initOptions(options);var length=options.length||this.natural({min:2,max:3}),consonants="bcdfghjklmnprstvwz",vowels="aeiou",all=consonants+vowels,text="",chr;for(var i=0;i<length;i++){if(i===0){chr=this.character({pool:all})}else if(consonants.indexOf(chr)===-1){chr=this.character({pool:consonants})}else{chr=this.character({pool:vowels})}text+=chr}if(options.capitalize){text=this.capitalize(text)}return text};Chance.prototype.word=function(options){options=initOptions(options);testRange(options.syllables&&options.length,"Chance: Cannot specify both syllables AND length.");var syllables=options.syllables||this.natural({min:1,max:3}),text="";if(options.length){do{text+=this.syllable()}while(text.length<options.length);text=text.substring(0,options.length)}else{for(var i=0;i<syllables;i++){text+=this.syllable()}}if(options.capitalize){text=this.capitalize(text)}return text};Chance.prototype.age=function(options){options=initOptions(options);var ageRange;switch(options.type){case"child":ageRange={min:0,max:12};break;case"teen":ageRange={min:13,max:19};break;case"adult":ageRange={min:18,max:65};break;case"senior":ageRange={min:65,max:100};break;case"all":ageRange={min:0,max:100};break;default:ageRange={min:18,max:65};break}return this.natural(ageRange)};Chance.prototype.birthday=function(options){var age=this.age(options);var currentYear=(new Date).getFullYear();if(options&&options.type){var min=new Date;var max=new Date;min.setFullYear(currentYear-age-1);max.setFullYear(currentYear-age);options=initOptions(options,{min,max})}else{options=initOptions(options,{year:currentYear-age})}return this.date(options)};Chance.prototype.cpf=function(options){options=initOptions(options,{formatted:true});var n=this.n(this.natural,9,{max:9});var d1=n[8]*2+n[7]*3+n[6]*4+n[5]*5+n[4]*6+n[3]*7+n[2]*8+n[1]*9+n[0]*10;d1=11-d1%11;if(d1>=10){d1=0}var d2=d1*2+n[8]*3+n[7]*4+n[6]*5+n[5]*6+n[4]*7+n[3]*8+n[2]*9+n[1]*10+n[0]*11;d2=11-d2%11;if(d2>=10){d2=0}var cpf=""+n[0]+n[1]+n[2]+"."+n[3]+n[4]+n[5]+"."+n[6]+n[7]+n[8]+"-"+d1+d2;return options.formatted?cpf:cpf.replace(/\D/g,"")};Chance.prototype.cnpj=function(options){options=initOptions(options,{formatted:true});var n=this.n(this.natural,12,{max:12});var d1=n[11]*2+n[10]*3+n[9]*4+n[8]*5+n[7]*6+n[6]*7+n[5]*8+n[4]*9+n[3]*2+n[2]*3+n[1]*4+n[0]*5;d1=11-d1%11;if(d1<2){d1=0}var d2=d1*2+n[11]*3+n[10]*4+n[9]*5+n[8]*6+n[7]*7+n[6]*8+n[5]*9+n[4]*2+n[3]*3+n[2]*4+n[1]*5+n[0]*6;d2=11-d2%11;if(d2<2){d2=0}var cnpj=""+n[0]+n[1]+"."+n[2]+n[3]+n[4]+"."+n[5]+n[6]+n[7]+"/"+n[8]+n[9]+n[10]+n[11]+"-"+d1+d2;return options.formatted?cnpj:cnpj.replace(/\D/g,"")};Chance.prototype.first=function(options){options=initOptions(options,{gender:this.gender(),nationality:"en"});return this.pick(this.get("firstNames")[options.gender.toLowerCase()][options.nationality.toLowerCase()])};Chance.prototype.profession=function(options){options=initOptions(options);if(options.rank){return this.pick(["Apprentice ","Junior ","Senior ","Lead "])+this.pick(this.get("profession"))}else{return this.pick(this.get("profession"))}};Chance.prototype.company=function(){return this.pick(this.get("company"))};Chance.prototype.gender=function(options){options=initOptions(options,{extraGenders:[]});return this.pick(["Male","Female"].concat(options.extraGenders))};Chance.prototype.last=function(options){options=initOptions(options,{nationality:"*"});if(options.nationality==="*"){var allLastNames=[];var lastNames=this.get("lastNames");Object.keys(lastNames).forEach((function(key){allLastNames=allLastNames.concat(lastNames[key])}));return this.pick(allLastNames)}else{return this.pick(this.get("lastNames")[options.nationality.toLowerCase()])}};Chance.prototype.israelId=function(){var x=this.string({pool:"0123456789",length:8});var y=0;for(var i=0;i<x.length;i++){var thisDigit=x[i]*(i/2===parseInt(i/2)?1:2);thisDigit=this.pad(thisDigit,2).toString();thisDigit=parseInt(thisDigit[0])+parseInt(thisDigit[1]);y=y+thisDigit}x=x+(10-parseInt(y.toString().slice(-1))).toString().slice(-1);return x};Chance.prototype.mrz=function(options){var checkDigit=function(input){var alpha="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),multipliers=[7,3,1],runningTotal=0;if(typeof input!=="string"){input=input.toString()}input.split("").forEach((function(character,idx){var pos=alpha.indexOf(character);if(pos!==-1){character=pos===0?0:pos+9}else{character=parseInt(character,10)}character*=multipliers[idx%multipliers.length];runningTotal+=character}));return runningTotal%10};var generate=function(opts){var pad=function(length){return new Array(length+1).join("<")};var number=["P<",opts.issuer,opts.last.toUpperCase(),"<<",opts.first.toUpperCase(),pad(39-(opts.last.length+opts.first.length+2)),opts.passportNumber,checkDigit(opts.passportNumber),opts.nationality,opts.dob,checkDigit(opts.dob),opts.gender,opts.expiry,checkDigit(opts.expiry),pad(14),checkDigit(pad(14))].join("");return number+checkDigit(number.substr(44,10)+number.substr(57,7)+number.substr(65,7))};var that=this;options=initOptions(options,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:function(){var date=that.birthday({type:"adult"});return[date.getFullYear().toString().substr(2),that.pad(date.getMonth()+1,2),that.pad(date.getDate(),2)].join("")}(),expiry:function(){var date=new Date;return[(date.getFullYear()+5).toString().substr(2),that.pad(date.getMonth()+1,2),that.pad(date.getDate(),2)].join("")}(),gender:this.gender()==="Female"?"F":"M",issuer:"GBR",nationality:"GBR"});return generate(options)};Chance.prototype.name=function(options){options=initOptions(options);var first=this.first(options),last=this.last(options),name;if(options.middle){name=first+" "+this.first(options)+" "+last}else if(options.middle_initial){name=first+" "+this.character({alpha:true,casing:"upper"})+". "+last}else{name=first+" "+last}if(options.prefix){name=this.prefix(options)+" "+name}if(options.suffix){name=name+" "+this.suffix(options)}return name};Chance.prototype.name_prefixes=function(gender){gender=gender||"all";gender=gender.toLowerCase();var prefixes=[{name:"Doctor",abbreviation:"Dr."}];if(gender==="male"||gender==="all"){prefixes.push({name:"Mister",abbreviation:"Mr."})}if(gender==="female"||gender==="all"){prefixes.push({name:"Miss",abbreviation:"Miss"});prefixes.push({name:"Misses",abbreviation:"Mrs."})}return prefixes};Chance.prototype.prefix=function(options){return this.name_prefix(options)};Chance.prototype.name_prefix=function(options){options=initOptions(options,{gender:"all"});return options.full?this.pick(this.name_prefixes(options.gender)).name:this.pick(this.name_prefixes(options.gender)).abbreviation};Chance.prototype.HIDN=function(){var idn_pool="0123456789";var idn_chrs="ABCDEFGHIJKLMNOPQRSTUVWXYXZ";var idn="";idn+=this.string({pool:idn_pool,length:6});idn+=this.string({pool:idn_chrs,length:2});return idn};Chance.prototype.ssn=function(options){options=initOptions(options,{ssnFour:false,dashes:true});var ssn_pool="1234567890",ssn,dash=options.dashes?"-":"";if(!options.ssnFour){ssn=this.string({pool:ssn_pool,length:3})+dash+this.string({pool:ssn_pool,length:2})+dash+this.string({pool:ssn_pool,length:4})}else{ssn=this.string({pool:ssn_pool,length:4})}return ssn};Chance.prototype.aadhar=function(options){options=initOptions(options,{onlyLastFour:false,separatedByWhiteSpace:true});var aadhar_pool="1234567890",aadhar,whiteSpace=options.separatedByWhiteSpace?" ":"";if(!options.onlyLastFour){aadhar=this.string({pool:aadhar_pool,length:4})+whiteSpace+this.string({pool:aadhar_pool,length:4})+whiteSpace+this.string({pool:aadhar_pool,length:4})}else{aadhar=this.string({pool:aadhar_pool,length:4})}return aadhar};Chance.prototype.name_suffixes=function(){var suffixes=[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}];return suffixes};Chance.prototype.suffix=function(options){return this.name_suffix(options)};Chance.prototype.name_suffix=function(options){options=initOptions(options);return options.full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation};Chance.prototype.nationalities=function(){return this.get("nationalities")};Chance.prototype.nationality=function(){var nationality=this.pick(this.nationalities());return nationality.name};Chance.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})};Chance.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})};Chance.prototype.wp8_anid2=function(){return base64(this.hash({length:32}))};Chance.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})};Chance.prototype.bb_pin=function(){return this.hash({length:8})};Chance.prototype.avatar=function(options){var url=null;var URL_BASE="//www.gravatar.com/avatar/";var PROTOCOLS={http:"http",https:"https"};var FILE_TYPES={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"};var FALLBACKS={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"};var RATINGS={g:"g",pg:"pg",r:"r",x:"x"};var opts={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(!options){opts.email=this.email();options={}}else if(typeof options==="string"){opts.email=options;options={}}else if(typeof options!=="object"){return null}else if(options.constructor==="Array"){return null}opts=initOptions(options,opts);if(!opts.email){opts.email=this.email()}opts.protocol=PROTOCOLS[opts.protocol]?opts.protocol+":":"";opts.size=parseInt(opts.size,0)?opts.size:"";opts.rating=RATINGS[opts.rating]?opts.rating:"";opts.fallback=FALLBACKS[opts.fallback]?opts.fallback:"";opts.fileExtension=FILE_TYPES[opts.fileExtension]?opts.fileExtension:"";url=opts.protocol+URL_BASE+this.bimd5.md5(opts.email)+(opts.fileExtension?"."+opts.fileExtension:"")+(opts.size||opts.rating||opts.fallback?"?":"")+(opts.size?"&s="+opts.size.toString():"")+(opts.rating?"&r="+opts.rating:"")+(opts.fallback?"&d="+opts.fallback:"");return url};Chance.prototype.color=function(options){function gray(value,delimiter){return[value,value,value].join(delimiter||"")}function rgb(hasAlpha){var rgbValue=hasAlpha?"rgba":"rgb";var alphaChannel=hasAlpha?","+this.floating({min:min_alpha,max:max_alpha}):"";var colorValue=isGrayscale?gray(this.natural({min:min_rgb,max:max_rgb}),","):this.natural({min:min_green,max:max_green})+","+this.natural({min:min_blue,max:max_blue})+","+this.natural({max:255});return rgbValue+"("+colorValue+alphaChannel+")"}function hex(start,end,withHash){var symbol=withHash?"#":"";var hexstring="";if(isGrayscale){hexstring=gray(this.pad(this.hex({min:min_rgb,max:max_rgb}),2));if(options.format==="shorthex"){hexstring=gray(this.hex({min:0,max:15}))}}else{if(options.format==="shorthex"){hexstring=this.pad(this.hex({min:Math.floor(min_red/16),max:Math.floor(max_red/16)}),1)+this.pad(this.hex({min:Math.floor(min_green/16),max:Math.floor(max_green/16)}),1)+this.pad(this.hex({min:Math.floor(min_blue/16),max:Math.floor(max_blue/16)}),1)}else if(min_red!==undefined||max_red!==undefined||min_green!==undefined||max_green!==undefined||min_blue!==undefined||max_blue!==undefined){hexstring=this.pad(this.hex({min:min_red,max:max_red}),2)+this.pad(this.hex({min:min_green,max:max_green}),2)+this.pad(this.hex({min:min_blue,max:max_blue}),2)}else{hexstring=this.pad(this.hex({min:min_rgb,max:max_rgb}),2)+this.pad(this.hex({min:min_rgb,max:max_rgb}),2)+this.pad(this.hex({min:min_rgb,max:max_rgb}),2)}}return symbol+hexstring}options=initOptions(options,{format:this.pick(["hex","shorthex","rgb","rgba","0x","name"]),grayscale:false,casing:"lower",min:0,max:255,min_red:undefined,max_red:undefined,min_green:undefined,max_green:undefined,min_blue:undefined,max_blue:undefined,min_alpha:0,max_alpha:1});var isGrayscale=options.grayscale;var min_rgb=options.min;var max_rgb=options.max;var min_red=options.min_red;var max_red=options.max_red;var min_green=options.min_green;var max_green=options.max_green;var min_blue=options.min_blue;var max_blue=options.max_blue;var min_alpha=options.min_alpha;var max_alpha=options.max_alpha;if(options.min_red===undefined){min_red=min_rgb}if(options.max_red===undefined){max_red=max_rgb}if(options.min_green===undefined){min_green=min_rgb}if(options.max_green===undefined){max_green=max_rgb}if(options.min_blue===undefined){min_blue=min_rgb}if(options.max_blue===undefined){max_blue=max_rgb}if(options.min_alpha===undefined){min_alpha=0}if(options.max_alpha===undefined){max_alpha=1}if(isGrayscale&&min_rgb===0&&max_rgb===255&&min_red!==undefined&&max_red!==undefined){min_rgb=(min_red+min_green+min_blue)/3;max_rgb=(max_red+max_green+max_blue)/3}var colorValue;if(options.format==="hex"){colorValue=hex.call(this,2,6,true)}else if(options.format==="shorthex"){colorValue=hex.call(this,1,3,true)}else if(options.format==="rgb"){colorValue=rgb.call(this,false)}else if(options.format==="rgba"){colorValue=rgb.call(this,true)}else if(options.format==="0x"){colorValue="0x"+hex.call(this,2,6)}else if(options.format==="name"){return this.pick(this.get("colorNames"))}else{throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", "0x" or "name".')}if(options.casing==="upper"){colorValue=colorValue.toUpperCase()}return colorValue};Chance.prototype.domain=function(options){options=initOptions(options);return this.word()+"."+(options.tld||this.tld())};Chance.prototype.email=function(options){options=initOptions(options);return this.word({length:options.length})+"@"+(options.domain||this.domain())};Chance.prototype.fbid=function(){return"10000"+this.string({pool:"1234567890",length:11})};Chance.prototype.google_analytics=function(){var account=this.pad(this.natural({max:999999}),6);var property=this.pad(this.natural({max:99}),2);return"UA-"+account+"-"+property};Chance.prototype.hashtag=function(){return"#"+this.word()};Chance.prototype.ip=function(){return this.natural({min:1,max:254})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({min:1,max:254})};Chance.prototype.ipv6=function(){var ip_addr=this.n(this.hash,8,{length:4});return ip_addr.join(":")};Chance.prototype.klout=function(){return this.natural({min:1,max:99})};Chance.prototype.semver=function(options){options=initOptions(options,{include_prerelease:true});var range=this.pickone(["^","~","<",">","<=",">=","="]);if(options.range){range=options.range}var prerelease="";if(options.include_prerelease){prerelease=this.weighted(["","-dev","-beta","-alpha"],[50,10,5,1])}return range+this.rpg("3d10").join(".")+prerelease};Chance.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io","ac","ad","ae","af","ag","ai","al","am","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]};Chance.prototype.tld=function(){return this.pick(this.tlds())};Chance.prototype.twitter=function(){return"@"+this.word()};Chance.prototype.url=function(options){options=initOptions(options,{protocol:"http",domain:this.domain(options),domain_prefix:"",path:this.word(),extensions:[]});var extension=options.extensions.length>0?"."+this.pick(options.extensions):"";var domain=options.domain_prefix?options.domain_prefix+"."+options.domain:options.domain;return options.protocol+"://"+domain+"/"+options.path+extension};Chance.prototype.port=function(){return this.integer({min:0,max:65535})};Chance.prototype.locale=function(options){options=initOptions(options);if(options.region){return this.pick(this.get("locale_regions"))}else{return this.pick(this.get("locale_languages"))}};Chance.prototype.locales=function(options){options=initOptions(options);if(options.region){return this.get("locale_regions")}else{return this.get("locale_languages")}};Chance.prototype.loremPicsum=function(options){options=initOptions(options,{width:500,height:500,greyscale:false,blurred:false});var greyscale=options.greyscale?"g/":"";var query=options.blurred?"/?blur":"/?random";return"https://picsum.photos/"+greyscale+options.width+"/"+options.height+query};Chance.prototype.address=function(options){options=initOptions(options);return this.natural({min:5,max:2e3})+" "+this.street(options)};Chance.prototype.altitude=function(options){options=initOptions(options,{fixed:5,min:0,max:8848});return this.floating({min:options.min,max:options.max,fixed:options.fixed})};Chance.prototype.areacode=function(options){options=initOptions(options,{parens:true});var areacode=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return options.parens?"("+areacode+")":areacode};Chance.prototype.city=function(){return this.capitalize(this.word({syllables:3}))};Chance.prototype.coordinates=function(options){return this.latitude(options)+", "+this.longitude(options)};Chance.prototype.countries=function(){return this.get("countries")};Chance.prototype.country=function(options){options=initOptions(options);var country=this.pick(this.countries());return options.raw?country:options.full?country.name:country.abbreviation};Chance.prototype.depth=function(options){options=initOptions(options,{fixed:5,min:-10994,max:0});return this.floating({min:options.min,max:options.max,fixed:options.fixed})};Chance.prototype.geohash=function(options){options=initOptions(options,{length:7});return this.string({length:options.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})};Chance.prototype.geojson=function(options){return this.latitude(options)+", "+this.longitude(options)+", "+this.altitude(options)};Chance.prototype.latitude=function(options){const[DDM,DMS,DD]=["ddm","dms","dd"];options=initOptions(options,options&&options.format&&[DDM,DMS].includes(options.format.toLowerCase())?{min:0,max:89,fixed:4}:{fixed:5,min:-90,max:90,format:DD});const format=options.format.toLowerCase();if(format===DDM||format===DMS){testRange(options.min<0||options.min>89,"Chance: Min specified is out of range. Should be between 0 - 89");testRange(options.max<0||options.max>89,"Chance: Max specified is out of range. Should be between 0 - 89");testRange(options.fixed>4,"Chance: Fixed specified should be below or equal to 4")}switch(format){case DDM:{return this.integer({min:options.min,max:options.max})+""+this.floating({min:0,max:59,fixed:options.fixed})}case DMS:{return this.integer({min:options.min,max:options.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59,fixed:options.fixed})+""}case DD:default:{return this.floating({min:options.min,max:options.max,fixed:options.fixed})}}};Chance.prototype.longitude=function(options){const[DDM,DMS,DD]=["ddm","dms","dd"];options=initOptions(options,options&&options.format&&[DDM,DMS].includes(options.format.toLowerCase())?{min:0,max:179,fixed:4}:{fixed:5,min:-180,max:180,format:DD});const format=options.format.toLowerCase();if(format===DDM||format===DMS){testRange(options.min<0||options.min>179,"Chance: Min specified is out of range. Should be between 0 - 179");testRange(options.max<0||options.max>179,"Chance: Max specified is out of range. Should be between 0 - 179");testRange(options.fixed>4,"Chance: Fixed specified should be below or equal to 4")}switch(format){case DDM:{return this.integer({min:options.min,max:options.max})+""+this.floating({min:0,max:59.9999,fixed:options.fixed})}case DMS:{return this.integer({min:options.min,max:options.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59.9999,fixed:options.fixed})+""}case DD:default:{return this.floating({min:options.min,max:options.max,fixed:options.fixed})}}};Chance.prototype.phone=function(options){var self=this,numPick,ukNum=function(parts){var section=[];parts.sections.forEach((function(n){section.push(self.string({pool:"0123456789",length:n}))}));return parts.area+section.join(" ")};options=initOptions(options,{formatted:true,country:"us",mobile:false});if(!options.formatted){options.parens=false}var phone;switch(options.country){case"fr":if(!options.mobile){numPick=this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+self.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+self.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+self.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+self.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+self.string({pool:"0123456789",length:6}),"09"+self.string({pool:"0123456789",length:8})]);phone=options.formatted?numPick.match(/../g).join(" "):numPick}else{numPick=this.pick(["06","07"])+self.string({pool:"0123456789",length:8});phone=options.formatted?numPick.match(/../g).join(" "):numPick}break;case"uk":if(!options.mobile){numPick=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[6]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[6]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[6]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[6]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[6]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[6]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[6]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[6]}]);phone=options.formatted?ukNum(numPick):ukNum(numPick).replace(" ","","g")}else{numPick=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]);phone=options.formatted?ukNum(numPick):ukNum(numPick).replace(" ","")}break;case"za":if(!options.mobile){numPick=this.pick(["01"+this.pick(["0","1","2","3","4","5","6","7","8"])+self.string({pool:"0123456789",length:7}),"02"+this.pick(["1","2","3","4","7","8"])+self.string({pool:"0123456789",length:7}),"03"+this.pick(["1","2","3","5","6","9"])+self.string({pool:"0123456789",length:7}),"04"+this.pick(["1","2","3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:7}),"05"+this.pick(["1","3","4","6","7","8"])+self.string({pool:"0123456789",length:7})]);phone=options.formatted||numPick}else{numPick=this.pick(["060"+this.pick(["3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:6}),"061"+this.pick(["0","1","2","3","4","5","8"])+self.string({pool:"0123456789",length:6}),"06"+self.string({pool:"0123456789",length:7}),"071"+this.pick(["0","1","2","3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:6}),"07"+this.pick(["2","3","4","6","7","8","9"])+self.string({pool:"0123456789",length:7}),"08"+this.pick(["0","1","2","3","4","5"])+self.string({pool:"0123456789",length:7})]);phone=options.formatted||numPick}break;case"us":var areacode=this.areacode(options).toString();var exchange=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString();var subscriber=this.natural({min:1e3,max:9999}).toString();phone=options.formatted?areacode+" "+exchange+"-"+subscriber:areacode+exchange+subscriber;break;case"br":var areaCode=this.pick(["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"]);var prefix;if(options.mobile){prefix="9"+self.string({pool:"0123456789",length:4})}else{prefix=this.natural({min:2e3,max:5999}).toString()}var mcdu=self.string({pool:"0123456789",length:4});phone=options.formatted?"("+areaCode+") "+prefix+"-"+mcdu:areaCode+prefix+mcdu;break}return phone};Chance.prototype.postal=function(){var pd=this.character({pool:"XVTSRPNKLMHJGECBA"});var fsa=pd+this.natural({max:9})+this.character({alpha:true,casing:"upper"});var ldu=this.natural({max:9})+this.character({alpha:true,casing:"upper"})+this.natural({max:9});return fsa+" "+ldu};Chance.prototype.postcode=function(){var area=this.pick(this.get("postcodeAreas")).code;var district=this.natural({max:9});var subDistrict=this.bool()?this.character({alpha:true,casing:"upper"}):"";var outward=area+district+subDistrict;var sector=this.natural({max:9});var unit=this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"});var inward=sector+unit;return outward+" "+inward};Chance.prototype.counties=function(options){options=initOptions(options,{country:"uk"});return this.get("counties")[options.country.toLowerCase()]};Chance.prototype.county=function(options){return this.pick(this.counties(options)).name};Chance.prototype.provinces=function(options){options=initOptions(options,{country:"ca"});return this.get("provinces")[options.country.toLowerCase()]};Chance.prototype.province=function(options){return options&&options.full?this.pick(this.provinces(options)).name:this.pick(this.provinces(options)).abbreviation};Chance.prototype.state=function(options){return options&&options.full?this.pick(this.states(options)).name:this.pick(this.states(options)).abbreviation};Chance.prototype.states=function(options){options=initOptions(options,{country:"us",us_states_and_dc:true});var states;switch(options.country.toLowerCase()){case"us":var us_states_and_dc=this.get("us_states_and_dc"),territories=this.get("territories"),armed_forces=this.get("armed_forces");states=[];if(options.us_states_and_dc){states=states.concat(us_states_and_dc)}if(options.territories){states=states.concat(territories)}if(options.armed_forces){states=states.concat(armed_forces)}break;case"it":case"mx":states=this.get("country_regions")[options.country.toLowerCase()];break;case"uk":states=this.get("counties")[options.country.toLowerCase()];break}return states};Chance.prototype.street=function(options){options=initOptions(options,{country:"us",syllables:2});var street;switch(options.country.toLowerCase()){case"us":street=this.word({syllables:options.syllables});street=this.capitalize(street);street+=" ";street+=options.short_suffix?this.street_suffix(options).abbreviation:this.street_suffix(options).name;break;case"it":street=this.word({syllables:options.syllables});street=this.capitalize(street);street=(options.short_suffix?this.street_suffix(options).abbreviation:this.street_suffix(options).name)+" "+street;break}return street};Chance.prototype.street_suffix=function(options){options=initOptions(options,{country:"us"});return this.pick(this.street_suffixes(options))};Chance.prototype.street_suffixes=function(options){options=initOptions(options,{country:"us"});return this.get("street_suffixes")[options.country.toLowerCase()]};Chance.prototype.zip=function(options){var zip=this.n(this.natural,5,{max:9});if(options&&options.plusfour===true){zip.push("-");zip=zip.concat(this.n(this.natural,4,{max:9}))}return zip.join("")};Chance.prototype.ampm=function(){return this.bool()?"am":"pm"};Chance.prototype.date=function(options){var date_string,date;if(options&&(options.min||options.max)){options=initOptions(options,{american:true,string:false});var min=typeof options.min!=="undefined"?options.min.getTime():1;var max=typeof options.max!=="undefined"?options.max.getTime():864e13;date=new Date(this.integer({min,max}))}else{var m=this.month({raw:true});var daysInMonth=m.days;if(options&&options.month){daysInMonth=this.get("months")[(options.month%12+12)%12].days}options=initOptions(options,{year:parseInt(this.year(),10),month:m.numeric-1,day:this.natural({min:1,max:daysInMonth}),hour:this.hour({twentyfour:true}),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:true,string:false});date=new Date(options.year,options.month,options.day,options.hour,options.minute,options.second,options.millisecond)}if(options.american){date_string=date.getMonth()+1+"/"+date.getDate()+"/"+date.getFullYear()}else{date_string=date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear()}return options.string?date_string:date};Chance.prototype.hammertime=function(options){return this.date(options).getTime()};Chance.prototype.hour=function(options){options=initOptions(options,{min:options&&options.twentyfour?0:1,max:options&&options.twentyfour?23:12});testRange(options.min<0,"Chance: Min cannot be less than 0.");testRange(options.twentyfour&&options.max>23,"Chance: Max cannot be greater than 23 for twentyfour option.");testRange(!options.twentyfour&&options.max>12,"Chance: Max cannot be greater than 12.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return this.natural({min:options.min,max:options.max})};Chance.prototype.millisecond=function(){return this.natural({max:999})};Chance.prototype.minute=Chance.prototype.second=function(options){options=initOptions(options,{min:0,max:59});testRange(options.min<0,"Chance: Min cannot be less than 0.");testRange(options.max>59,"Chance: Max cannot be greater than 59.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return this.natural({min:options.min,max:options.max})};Chance.prototype.month=function(options){options=initOptions(options,{min:1,max:12});testRange(options.min<1,"Chance: Min cannot be less than 1.");testRange(options.max>12,"Chance: Max cannot be greater than 12.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");var month=this.pick(this.months().slice(options.min-1,options.max));return options.raw?month:month.name};Chance.prototype.months=function(){return this.get("months")};Chance.prototype.second=function(){return this.natural({max:59})};Chance.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})};Chance.prototype.weekday=function(options){options=initOptions(options,{weekday_only:false});var weekdays=["Monday","Tuesday","Wednesday","Thursday","Friday"];if(!options.weekday_only){weekdays.push("Saturday");weekdays.push("Sunday")}return this.pickone(weekdays)};Chance.prototype.year=function(options){options=initOptions(options,{min:(new Date).getFullYear()});options.max=typeof options.max!=="undefined"?options.max:options.min+100;return this.natural(options).toString()};Chance.prototype.cc=function(options){options=initOptions(options);var type,number,to_generate;type=options.type?this.cc_type({name:options.type,raw:true}):this.cc_type({raw:true});number=type.prefix.split("");to_generate=type.length-type.prefix.length-1;number=number.concat(this.n(this.integer,to_generate,{min:0,max:9}));number.push(this.luhn_calculate(number.join("")));return number.join("")};Chance.prototype.cc_types=function(){return this.get("cc_types")};Chance.prototype.cc_type=function(options){options=initOptions(options);var types=this.cc_types(),type=null;if(options.name){for(var i=0;i<types.length;i++){if(types[i].name===options.name||types[i].short_name===options.name){type=types[i];break}}if(type===null){throw new RangeError("Chance: Credit card type '"+options.name+"' is not supported")}}else{type=this.pick(types)}return options.raw?type:type.name};Chance.prototype.currency_types=function(){return this.get("currency_types")};Chance.prototype.currency=function(){return this.pick(this.currency_types())};Chance.prototype.timezones=function(){return this.get("timezones")};Chance.prototype.timezone=function(){return this.pick(this.timezones())};Chance.prototype.currency_pair=function(returnAsString){var currencies=this.unique(this.currency,2,{comparator:function(arr,val){return arr.reduce((function(acc,item){return acc||item.code===val.code}),false)}});if(returnAsString){return currencies[0].code+"/"+currencies[1].code}else{return currencies}};Chance.prototype.dollar=function(options){options=initOptions(options,{max:1e4,min:0});var dollar=this.floating({min:options.min,max:options.max,fixed:2}).toString(),cents=dollar.split(".")[1];if(cents===undefined){dollar+=".00"}else if(cents.length<2){dollar=dollar+"0"}if(dollar<0){return"-$"+dollar.replace("-","")}else{return"$"+dollar}};Chance.prototype.euro=function(options){return Number(this.dollar(options).replace("$","")).toLocaleString()+""};Chance.prototype.exp=function(options){options=initOptions(options);var exp={};exp.year=this.exp_year();if(exp.year===(new Date).getFullYear().toString()){exp.month=this.exp_month({future:true})}else{exp.month=this.exp_month()}return options.raw?exp:exp.month+"/"+exp.year};Chance.prototype.exp_month=function(options){options=initOptions(options);var month,month_int,curMonth=(new Date).getMonth()+1;if(options.future&&curMonth!==12){do{month=this.month({raw:true}).numeric;month_int=parseInt(month,10)}while(month_int<=curMonth)}else{month=this.month({raw:true}).numeric}return month};Chance.prototype.exp_year=function(){var curMonth=(new Date).getMonth()+1,curYear=(new Date).getFullYear();return this.year({min:curMonth===12?curYear+1:curYear,max:curYear+10})};Chance.prototype.vat=function(options){options=initOptions(options,{country:"it"});switch(options.country.toLowerCase()){case"it":return this.it_vat()}};Chance.prototype.iban=function(){var alpha="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var alphanum=alpha+"0123456789";var iban=this.string({length:2,pool:alpha})+this.pad(this.integer({min:0,max:99}),2)+this.string({length:4,pool:alphanum})+this.pad(this.natural(),this.natural({min:6,max:26}));return iban};Chance.prototype.it_vat=function(){var it_vat=this.natural({min:1,max:18e5});it_vat=this.pad(it_vat,7)+this.pad(this.pick(this.provinces({country:"it"})).code,3);return it_vat+this.luhn_calculate(it_vat)};Chance.prototype.cf=function(options){options=options||{};var gender=!!options.gender?options.gender:this.gender(),first=!!options.first?options.first:this.first({gender,nationality:"it"}),last=!!options.last?options.last:this.last({nationality:"it"}),birthday=!!options.birthday?options.birthday:this.birthday(),city=!!options.city?options.city:this.pickone(["A","B","C","D","E","F","G","H","I","L","M","Z"])+this.pad(this.natural({max:999}),3),cf=[],name_generator=function(name,isLast){var temp,return_value=[];if(name.length<3){return_value=name.split("").concat("XXX".split("")).splice(0,3)}else{temp=name.toUpperCase().split("").map((function(c){return"BCDFGHJKLMNPRSTVWZ".indexOf(c)!==-1?c:undefined})).join("");if(temp.length>3){if(isLast){temp=temp.substr(0,3)}else{temp=temp[0]+temp.substr(2,2)}}if(temp.length<3){return_value=temp;temp=name.toUpperCase().split("").map((function(c){return"AEIOU".indexOf(c)!==-1?c:undefined})).join("").substr(0,3-return_value.length)}return_value=return_value+temp}return return_value},date_generator=function(birthday,gender,that){var lettermonths=["A","B","C","D","E","H","L","M","P","R","S","T"];return birthday.getFullYear().toString().substr(2)+lettermonths[birthday.getMonth()]+that.pad(birthday.getDate()+(gender.toLowerCase()==="female"?40:0),2)},checkdigit_generator=function(cf){var range1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",range2="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ",evens="ABCDEFGHIJKLMNOPQRSTUVWXYZ",odds="BAKPLCQDREVOSFTGUHMINJWZYX",digit=0;for(var i=0;i<15;i++){if(i%2!==0){digit+=evens.indexOf(range2[range1.indexOf(cf[i])])}else{digit+=odds.indexOf(range2[range1.indexOf(cf[i])])}}return evens[digit%26]};cf=cf.concat(name_generator(last,true),name_generator(first),date_generator(birthday,gender,this),city.toUpperCase().split("")).join("");cf+=checkdigit_generator(cf.toUpperCase());return cf.toUpperCase()};Chance.prototype.pl_pesel=function(){var number=this.natural({min:1,max:9999999999});var arr=this.pad(number,10).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(1*arr[0]+3*arr[1]+7*arr[2]+9*arr[3]+1*arr[4]+3*arr[5]+7*arr[6]+9*arr[7]+1*arr[8]+3*arr[9])%10;if(controlNumber!==0){controlNumber=10-controlNumber}return arr.join("")+controlNumber};Chance.prototype.pl_nip=function(){var number=this.natural({min:1,max:999999999});var arr=this.pad(number,9).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(6*arr[0]+5*arr[1]+7*arr[2]+2*arr[3]+3*arr[4]+4*arr[5]+5*arr[6]+6*arr[7]+7*arr[8])%11;if(controlNumber===10){return this.pl_nip()}return arr.join("")+controlNumber};Chance.prototype.pl_regon=function(){var number=this.natural({min:1,max:99999999});var arr=this.pad(number,8).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(8*arr[0]+9*arr[1]+2*arr[2]+3*arr[3]+4*arr[4]+5*arr[5]+6*arr[6]+7*arr[7])%11;if(controlNumber===10){controlNumber=0}return arr.join("")+controlNumber};Chance.prototype.note=function(options){options=initOptions(options,{notes:"flatKey"});var scales={naturals:["C","D","E","F","G","A","B"],flats:["D","E","G","A","B"],sharps:["C","D","F","G","A"]};scales.all=scales.naturals.concat(scales.flats.concat(scales.sharps));scales.flatKey=scales.naturals.concat(scales.flats);scales.sharpKey=scales.naturals.concat(scales.sharps);return this.pickone(scales[options.notes])};Chance.prototype.midi_note=function(options){var min=0;var max=127;options=initOptions(options,{min,max});return this.integer({min:options.min,max:options.max})};Chance.prototype.chord_quality=function(options){options=initOptions(options,{jazz:true});var chord_qualities=["maj","min","aug","dim"];if(options.jazz){chord_qualities=["maj7","min7","7","sus","dim",""]}return this.pickone(chord_qualities)};Chance.prototype.chord=function(options){options=initOptions(options);return this.note(options)+this.chord_quality(options)};Chance.prototype.tempo=function(options){var min=40;var max=320;options=initOptions(options,{min,max});return this.integer({min:options.min,max:options.max})};Chance.prototype.coin=function(){return this.bool()?"heads":"tails"};function diceFn(range){return function(){return this.natural(range)}}Chance.prototype.d4=diceFn({min:1,max:4});Chance.prototype.d6=diceFn({min:1,max:6});Chance.prototype.d8=diceFn({min:1,max:8});Chance.prototype.d10=diceFn({min:1,max:10});Chance.prototype.d12=diceFn({min:1,max:12});Chance.prototype.d20=diceFn({min:1,max:20});Chance.prototype.d30=diceFn({min:1,max:30});Chance.prototype.d100=diceFn({min:1,max:100});Chance.prototype.rpg=function(thrown,options){options=initOptions(options);if(!thrown){throw new RangeError("Chance: A type of die roll must be included")}else{var bits=thrown.toLowerCase().split("d"),rolls=[];if(bits.length!==2||!parseInt(bits[0],10)||!parseInt(bits[1],10)){throw new Error("Chance: Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die")}for(var i=bits[0];i>0;i--){rolls[i-1]=this.natural({min:1,max:bits[1]})}return typeof options.sum!=="undefined"&&options.sum?rolls.reduce((function(p,c){return p+c})):rolls}};Chance.prototype.guid=function(options){options=initOptions(options,{version:5});var guid_pool="abcdef1234567890",variant_pool="ab89",guid=this.string({pool:guid_pool,length:8})+"-"+this.string({pool:guid_pool,length:4})+"-"+options.version+this.string({pool:guid_pool,length:3})+"-"+this.string({pool:variant_pool,length:1})+this.string({pool:guid_pool,length:3})+"-"+this.string({pool:guid_pool,length:12});return guid};Chance.prototype.hash=function(options){options=initOptions(options,{length:40,casing:"lower"});var pool=options.casing==="upper"?HEX_POOL.toUpperCase():HEX_POOL;return this.string({pool,length:options.length})};Chance.prototype.luhn_check=function(num){var str=num.toString();var checkDigit=+str.substring(str.length-1);return checkDigit===this.luhn_calculate(+str.substring(0,str.length-1))};Chance.prototype.luhn_calculate=function(num){var digits=num.toString().split("").reverse();var sum=0;var digit;for(var i=0,l=digits.length;l>i;++i){digit=+digits[i];if(i%2===0){digit*=2;if(digit>9){digit-=9}}sum+=digit}return sum*9%10};Chance.prototype.md5=function(options){var opts={str:"",key:null,raw:false};if(!options){opts.str=this.string();options={}}else if(typeof options==="string"){opts.str=options;options={}}else if(typeof options!=="object"){return null}else if(options.constructor==="Array"){return null}opts=initOptions(options,opts);if(!opts.str){throw new Error("A parameter is required to return an md5 hash.")}return this.bimd5.md5(opts.str,opts.key,opts.raw)};Chance.prototype.file=function(options){var fileOptions=options||{};var poolCollectionKey="fileExtension";var typeRange=Object.keys(this.get("fileExtension"));var fileName;var fileExtension;fileName=this.word({length:fileOptions.length});if(fileOptions.extension){fileExtension=fileOptions.extension;return fileName+"."+fileExtension}if(fileOptions.extensions){if(Array.isArray(fileOptions.extensions)){fileExtension=this.pickone(fileOptions.extensions);return fileName+"."+fileExtension}else if(fileOptions.extensions.constructor===Object){var extensionObjectCollection=fileOptions.extensions;var keys=Object.keys(extensionObjectCollection);fileExtension=this.pickone(extensionObjectCollection[this.pickone(keys)]);return fileName+"."+fileExtension}throw new Error("Chance: Extensions must be an Array or Object")}if(fileOptions.fileType){var fileType=fileOptions.fileType;if(typeRange.indexOf(fileType)!==-1){fileExtension=this.pickone(this.get(poolCollectionKey)[fileType]);return fileName+"."+fileExtension}throw new RangeError("Chance: Expect file type value to be 'raster', 'vector', '3d' or 'document'")}fileExtension=this.pickone(this.get(poolCollectionKey)[this.pickone(typeRange)]);return fileName+"."+fileExtension};var data={firstNames:{male:{en:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],it:["Adolfo","Alberto","Aldo","Alessandro","Alessio","Alfredo","Alvaro","Andrea","Angelo","Angiolo","Antonino","Antonio","Attilio","Benito","Bernardo","Bruno","Carlo","Cesare","Christian","Claudio","Corrado","Cosimo","Cristian","Cristiano","Daniele","Dario","David","Davide","Diego","Dino","Domenico","Duccio","Edoardo","Elia","Elio","Emanuele","Emiliano","Emilio","Enrico","Enzo","Ettore","Fabio","Fabrizio","Federico","Ferdinando","Fernando","Filippo","Francesco","Franco","Gabriele","Giacomo","Giampaolo","Giampiero","Giancarlo","Gianfranco","Gianluca","Gianmarco","Gianni","Gino","Giorgio","Giovanni","Giuliano","Giulio","Giuseppe","Graziano","Gregorio","Guido","Iacopo","Jacopo","Lapo","Leonardo","Lorenzo","Luca","Luciano","Luigi","Manuel","Marcello","Marco","Marino","Mario","Massimiliano","Massimo","Matteo","Mattia","Maurizio","Mauro","Michele","Mirko","Mohamed","Nello","Neri","Niccol","Nicola","Osvaldo","Otello","Paolo","Pier Luigi","Piero","Pietro","Raffaele","Remo","Renato","Renzo","Riccardo","Roberto","Rolando","Romano","Salvatore","Samuele","Sandro","Sergio","Silvano","Simone","Stefano","Thomas","Tommaso","Ubaldo","Ugo","Umberto","Valerio","Valter","Vasco","Vincenzo","Vittorio"],nl:["Aaron","Abel","Adam","Adriaan","Albert","Alexander","Ali","Arjen","Arno","Bart","Bas","Bastiaan","Benjamin","Bob","Boris","Bram","Brent","Cas","Casper","Chris","Christiaan","Cornelis","Daan","Daley","Damian","Dani","Daniel","Danil","David","Dean","Dirk","Dylan","Egbert","Elijah","Erik","Erwin","Evert","Ezra","Fabian","Fedde","Finn","Florian","Floris","Frank","Frans","Frederik","Freek","Geert","Gerard","Gerben","Gerrit","Gijs","Guus","Hans","Hendrik","Henk","Herman","Hidde","Hugo","Jaap","Jan Jaap","Jan-Willem","Jack","Jacob","Jan","Jason","Jasper","Jayden","Jelle","Jelte","Jens","Jeroen","Jesse","Jim","Job","Joep","Johannes","John","Jonathan","Joris","Joshua","Jol","Julian","Kees","Kevin","Koen","Lars","Laurens","Leendert","Lennard","Lodewijk","Luc","Luca","Lucas","Lukas","Luuk","Maarten","Marcus","Martijn","Martin","Matthijs","Maurits","Max","Mees","Melle","Mick","Mika","Milan","Mohamed","Mohammed","Morris","Muhammed","Nathan","Nick","Nico","Niek","Niels","Noah","Noud","Olivier","Oscar","Owen","Paul","Pepijn","Peter","Pieter","Pim","Quinten","Reinier","Rens","Robin","Ruben","Sam","Samuel","Sander","Sebastiaan","Sem","Sep","Sepp","Siem","Simon","Stan","Stef","Steven","Stijn","Sven","Teun","Thijmen","Thijs","Thomas","Tijn","Tim","Timo","Tobias","Tom","Victor","Vince","Willem","Wim","Wouter","Yusuf"],fr:["Aaron","Abdon","Abel","Ablard","Abelin","Abondance","Abraham","Absalon","Acace","Achaire","Achille","Adalard","Adalbald","Adalbron","Adalbert","Adalric","Adam","Adegrin","Adel","Adelin","Andelin","Adelphe","Adam","Adodat","Adhmar","Adjutor","Adolphe","Adonis","Adon","Adrien","Agapet","Agathange","Agathon","Agilbert","Agnor","Agnan","Aignan","Agrippin","Aimable","Aim","Alain","Alban","Albin","Aubin","Albric","Albert","Albertet","Alcibiade","Alcide","Alce","Alcime","Aldonce","Aldric","Aldric","Aleaume","Alexandre","Alexis","Alix","Alliaume","Aleaume","Almine","Almire","Alos","Alphe","Alphonse","Alpinien","Alverde","Amalric","Amaury","Amandin","Amant","Ambroise","Amde","Amlien","Amiel","Amour","Anal","Anastase","Anatole","Ancelin","Andol","Andoche","Andr","Andoche","Ange","Angelin","Angilbe","Anglebert","Angoustan","Anicet","Anne","Annibal","Ansbert","Anselme","Anthelme","Antheaume","Anthime","Antide","Antoine","Antonius","Antonin","Apollinaire","Apollon","Aquilin","Arcade","Archambaud","Archambeau","Archange","Archibald","Arian","Ariel","Ariste","Aristide","Armand","Armel","Armin","Arnould","Arnaud","Arolde","Arsne","Arsino","Arthaud","Arthme","Arthur","Ascelin","Athanase","Aubry","Audebert","Audouin","Audran","Audric","Auguste","Augustin","Aurle","Aurlien","Aurian","Auxence","Axel","Aymard","Aymeric","Aymon","Aymond","Balthazar","Baptiste","Barnab","Barthlemy","Bartime","Basile","Bastien","Baudouin","Bnigne","Benjamin","Benot","Brenger","Brard","Bernard","Bertrand","Blaise","Bon","Boniface","Bouchard","Brice","Brieuc","Bruno","Brunon","Calixte","Calliste","Camlien","Camille","Camillien","Candide","Caribert","Carloman","Cassandre","Cassien","Cdric","Cleste","Clestin","Clien","Csaire","Csar","Charles","Charlemagne","Childebert","Chilpric","Chrtien","Christian","Christodule","Christophe","Chrysostome","Clarence","Claude","Claudien","Clandre","Clment","Clotaire","Cme","Constance","Constant","Constantin","Corentin","Cyprien","Cyriaque","Cyrille","Cyril","Damien","Daniel","David","Delphin","Denis","Dsir","Didier","Dieudonn","Dimitri","Dominique","Dorian","Dorothe","Edgard","Edmond","douard","leuthre","lie","lise","meric","mile","milien","Emmanuel","Enguerrand","piphane","ric","Esprit","Ernest","tienne","Eubert","Eudes","Eudoxe","Eugne","Eusbe","Eustache","variste","vrard","Fabien","Fabrice","Falba","Flicit","Flix","Ferdinand","Fiacre","Fidle","Firmin","Flavien","Flodoard","Florent","Florentin","Florestan","Florian","Fortun","Foulques","Francisque","Franois","Franais","Franciscus","Francs","Frdric","Fulbert","Fulcran","Fulgence","Gabin","Gabriel","Gal","Garnier","Gaston","Gaspard","Gatien","Gaud","Gautier","Gdon","Geoffroy","Georges","Graud","Grard","Gerbert","Germain","Gervais","Ghislain","Gilbert","Gilles","Girart","Gislebert","Gondebaud","Gonthier","Gontran","Gonzague","Grgoire","Gurin","Gui","Guillaume","Gustave","Guy","Guyot","Hardouin","Hector","Hdelin","Hlier","Henri","Herbert","Herluin","Herv","Hilaire","Hildebert","Hincmar","Hippolyte","Honor","Hubert","Hugues","Innocent","Isabeau","Isidore","Jacques","Japhet","Jason","Jean","Jeannel","Jeannot","Jrmie","Jrme","Joachim","Joanny","Job","Jocelyn","Jol","Johan","Jonas","Jonathan","Joseph","Josse","Josselin","Jourdain","Jude","Judical","Jules","Julien","Juste","Justin","Lambert","Landry","Laurent","Lazare","Landre","Lon","Lonard","Lopold","Leu","Loup","Leufroy","Libre","Litald","Lionel","Loc","Longin","Lorrain","Lorraine","Lothaire","Louis","Loup","Luc","Lucas","Lucien","Ludolphe","Ludovic","Macaire","Malo","Mamert","Manass","Marc","Marceau","Marcel","Marcelin","Marius","Marseille","Martial","Martin","Mathurin","Matthias","Mathias","Matthieu","Maugis","Maurice","Mauricet","Maxence","Maxime","Maximilien","Mayeul","Mdric","Melchior","Mence","Merlin","Mrove","Michal","Michel","Mose","Morgan","Nathan","Nathanal","Narcisse","Nhmie","Nestor","Nestor","Nicphore","Nicolas","No","Nol","Norbert","Normand","Normands","Octave","Odilon","Odon","Oger","Olivier","Oury","Pacme","Palmon","Parfait","Pascal","Paterne","Patrice","Paul","Ppin","Perceval","Philmon","Philibert","Philippe","Philothe","Pie","Pierre","Pierrick","Prosper","Quentin","Raoul","Raphal","Raymond","Rgis","Rjean","Rmi","Renaud","Ren","Reybaud","Richard","Robert","Roch","Rodolphe","Rodrigue","Roger","Roland","Romain","Romuald","Romo","Rome","Ronan","Roselin","Salomon","Samuel","Savin","Savinien","Scholastique","Sbastien","Sraphin","Serge","Sverin","Sidoine","Sigebert","Sigismond","Silvre","Simon","Simon","Sixte","Stanislas","Stphane","Stephan","Sylvain","Sylvestre","Tancrde","Tanguy","Taurin","Thodore","Thodose","Thophile","Thophraste","Thibault","Thibert","Thierry","Thomas","Timolon","Timothe","Titien","Tonnin","Toussaint","Trajan","Tristan","Turold","Tim","Ulysse","Urbain","Valentin","Valre","Valry","Venance","Venant","Venceslas","Vianney","Victor","Victorien","Victorin","Vigile","Vincent","Vital","Vitalien","Vivien","Waleran","Wandrille","Xavier","Xnophon","Yves","Zacharie","Zach","Zphirin"]},female:{en:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"],it:["Ada","Adriana","Alessandra","Alessia","Alice","Angela","Anna","Anna Maria","Annalisa","Annita","Annunziata","Antonella","Arianna","Asia","Assunta","Aurora","Barbara","Beatrice","Benedetta","Bianca","Bruna","Camilla","Carla","Carlotta","Carmela","Carolina","Caterina","Catia","Cecilia","Chiara","Cinzia","Clara","Claudia","Costanza","Cristina","Daniela","Debora","Diletta","Dina","Donatella","Elena","Eleonora","Elisa","Elisabetta","Emanuela","Emma","Eva","Federica","Fernanda","Fiorella","Fiorenza","Flora","Franca","Francesca","Gabriella","Gaia","Gemma","Giada","Gianna","Gina","Ginevra","Giorgia","Giovanna","Giulia","Giuliana","Giuseppa","Giuseppina","Grazia","Graziella","Greta","Ida","Ilaria","Ines","Iolanda","Irene","Irma","Isabella","Jessica","Laura","Lea","Letizia","Licia","Lidia","Liliana","Lina","Linda","Lisa","Livia","Loretta","Luana","Lucia","Luciana","Lucrezia","Luisa","Manuela","Mara","Marcella","Margherita","Maria","Maria Cristina","Maria Grazia","Maria Luisa","Maria Pia","Maria Teresa","Marina","Marisa","Marta","Martina","Marzia","Matilde","Melissa","Michela","Milena","Mirella","Monica","Natalina","Nella","Nicoletta","Noemi","Olga","Paola","Patrizia","Piera","Pierina","Raffaella","Rebecca","Renata","Rina","Rita","Roberta","Rosa","Rosanna","Rossana","Rossella","Sabrina","Sandra","Sara","Serena","Silvana","Silvia","Simona","Simonetta","Sofia","Sonia","Stefania","Susanna","Teresa","Tina","Tiziana","Tosca","Valentina","Valeria","Vanda","Vanessa","Vanna","Vera","Veronica","Vilma","Viola","Virginia","Vittoria"],nl:["Ada","Arianne","Afke","Amanda","Amber","Amy","Aniek","Anita","Anja","Anna","Anne","Annelies","Annemarie","Annette","Anouk","Astrid","Aukje","Barbara","Bianca","Carla","Carlijn","Carolien","Chantal","Charlotte","Claudia","Danille","Debora","Diane","Dora","Eline","Elise","Ella","Ellen","Emma","Esmee","Evelien","Esther","Erica","Eva","Femke","Fleur","Floor","Froukje","Gea","Gerda","Hanna","Hanneke","Heleen","Hilde","Ilona","Ina","Inge","Ingrid","Iris","Isabel","Isabelle","Janneke","Jasmijn","Jeanine","Jennifer","Jessica","Johanna","Joke","Julia","Julie","Karen","Karin","Katja","Kim","Lara","Laura","Lena","Lianne","Lieke","Lilian","Linda","Lisa","Lisanne","Lotte","Louise","Maaike","Manon","Marga","Maria","Marissa","Marit","Marjolein","Martine","Marleen","Melissa","Merel","Miranda","Michelle","Mirjam","Mirthe","Naomi","Natalie","Nienke","Nina","Noortje","Olivia","Patricia","Paula","Paulien","Ramona","Ria","Rianne","Roos","Rosanne","Ruth","Sabrina","Sandra","Sanne","Sara","Saskia","Silvia","Sofia","Sophie","Sonja","Suzanne","Tamara","Tess","Tessa","Tineke","Valerie","Vanessa","Veerle","Vera","Victoria","Wendy","Willeke","Yvonne","Zo"],fr:["Abdon","Abel","Abigalle","Abigal","Acacius","Acanthe","Adalbert","Adalsinde","Adegrine","Adlade","Adle","Adlie","Adeline","Adeltrude","Adolphe","Adonis","Adraste","Adrehilde","Adrienne","Agathe","Agilbert","Agla","Aignan","Agneflte","Agns","Agrippine","Aim","Alaine","Alas","Albane","Albrade","Alberte","Alcide","Alcine","Alcyone","Aldegonde","Aleth","Alexandrine","Alexine","Alice","Alinor","Aliette","Aline","Alix","Aliz","Alose","Aloyse","Alphonsine","Althe","Amaliane","Amalthe","Amande","Amandine","Amant","Amarande","Amaranthe","Amaryllis","Ambre","Ambroisie","Amlie","Amthyste","Aminte","Anal","Anas","Anastasie","Anatole","Ancelin","Andre","Anmone","Angadrme","Angle","Angeline","Anglique","Angilbert","Anicet","Annabelle","Anne","Annette","Annick","Annie","Annonciade","Ansbert","Anstrudie","Anthelme","Antigone","Antoinette","Antonine","Aphlie","Apolline","Apollonie","Aquiline","Arabelle","Arcadie","Archange","Argine","Ariane","Aricie","Ariel","Arielle","Arlette","Armance","Armande","Armandine","Armelle","Armide","Armelle","Armin","Arnaud","Arsne","Arsino","Artmis","Arthur","Ascelin","Ascension","Assomption","Astart","Astrie","Astre","Astrid","Athalie","Athanasie","Athina","Aube","Albert","Aude","Audrey","Augustine","Aure","Aurlie","Aurlien","Aurle","Aurore","Auxence","Aveline","Abigalle","Avoye","Axelle","Aymard","Azale","Adle","Adeline","Barbe","Basilisse","Bathilde","Batrice","Batrix","Bndicte","Brengre","Bernadette","Berthe","Bertille","Beuve","Blanche","Blanc","Blandine","Brigitte","Brune","Brunehilde","Callista","Camille","Capucine","Carine","Caroline","Cassandre","Catherine","Ccile","Cleste","Clestine","Cline","Chantal","Charlne","Charline","Charlotte","Chlo","Christelle","Christiane","Christine","Claire","Clara","Claude","Claudine","Clarisse","Clmence","Clmentine","Clo","Clio","Clotilde","Coline","Conception","Constance","Coralie","Coraline","Corentine","Corinne","Cyrielle","Daniel","Daniel","Daphn","Dbora","Delphine","Denise","Diane","Dieudonn","Dominique","Doriane","Dorothe","Douce","dith","Edme","lonore","liane","lia","liette","lisabeth","lise","Ella","lodie","lose","Elsa","meline","mrance","mrentienne","mrencie","milie","Emma","Emmanuelle","Emmelie","Ernestine","Esther","Estelle","Eudoxie","Eugnie","Eulalie","Euphrasie","Eusbie","vangline","Eva","ve","velyne","Fanny","Fantine","Faustine","Flicie","Fernande","Flavie","Fleur","Flore","Florence","Florie","Fortun","France","Francia","Franoise","Francine","Gabrielle","Galle","Garance","Genevive","Georgette","Gerberge","Germaine","Gertrude","Gisle","Guenivre","Guilhemine","Guillemette","Gustave","Gwenael","Hlne","Hlose","Henriette","Hermine","Hermione","Hippolyte","Honorine","Hortense","Huguette","Ines","Irne","Irina","Iris","Isabeau","Isabelle","Iseult","Isolde","Ismrie","Jacinthe","Jacqueline","Jade","Janine","Jeanne","Jocelyne","Jolle","Josphine","Judith","Julia","Julie","Jules","Juliette","Justine","Katy","Kathy","Katie","Laura","Laure","Laureline","Laurence","Laurene","Lauriane","Laurianne","Laurine","La","Lna","Lonie","Lon","Lontine","Lorraine","Lucie","Lucienne","Lucille","Ludivine","Lydie","Lydie","Megane","Madeleine","Magali","Maguelone","Mallaury","Manon","Marceline","Margot","Marguerite","Marianne","Marie","Myriam","Marie","Marine","Marion","Marlne","Marthe","Martine","Mathilde","Maud","Maureen","Mauricette","Maxime","Mlanie","Melissa","Mlissandre","Mlisande","Mlodie","Michel","Micheline","Mireille","Miriam","Mose","Monique","Morgane","Muriel","Mylne","Nadge","Nadine","Nathalie","Nicole","Nicolette","Nine","Nol","Nomie","Ocane","Odette","Odile","Olive","Olivia","Olympe","Ombline","Ombeline","Ophlie","Oriande","Oriane","Ozanne","Pascale","Pascaline","Paule","Paulette","Pauline","Priscille","Prisca","Prisque","Pcine","Plagie","Pnlope","Perrine","Ptronille","Philippine","Philomne","Philothe","Primerose","Prudence","Pulchrie","Quentine","Quita","Quintia","Quintilla","Rachel","Raphalle","Raymonde","Rebecca","Rgine","Rjeanne","Ren","Rita","Rita","Rolande","Romane","Rosalie","Rose","Roseline","Sabine","Salom","Sandra","Sandrine","Sarah","Sgolne","Sverine","Sibylle","Simone","Sixt","Solange","Soline","Solne","Sophie","Stphanie","Suzanne","Sylvain","Sylvie","Tatiana","Thas","Thodora","Thrse","Tiphaine","Ursule","Valentine","Valrie","Vronique","Victoire","Victorine","Vinciane","Violette","Virginie","Viviane","Xavire","Yolande","Ysaline","Yvette","Yvonne","Zlie","Zita","Zo"]}},lastNames:{en:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],it:["Acciai","Aglietti","Agostini","Agresti","Ahmed","Aiazzi","Albanese","Alberti","Alessi","Alfani","Alinari","Alterini","Amato","Ammannati","Ancillotti","Andrei","Andreini","Andreoni","Angeli","Anichini","Antonelli","Antonini","Arena","Ariani","Arnetoli","Arrighi","Baccani","Baccetti","Bacci","Bacherini","Badii","Baggiani","Baglioni","Bagni","Bagnoli","Baldassini","Baldi","Baldini","Ballerini","Balli","Ballini","Balloni","Bambi","Banchi","Bandinelli","Bandini","Bani","Barbetti","Barbieri","Barchielli","Bardazzi","Bardelli","Bardi","Barducci","Bargellini","Bargiacchi","Barni","Baroncelli","Baroncini","Barone","Baroni","Baronti","Bartalesi","Bartoletti","Bartoli","Bartolini","Bartoloni","Bartolozzi","Basagni","Basile","Bassi","Batacchi","Battaglia","Battaglini","Bausi","Becagli","Becattini","Becchi","Becucci","Bellandi","Bellesi","Belli","Bellini","Bellucci","Bencini","Benedetti","Benelli","Beni","Benini","Bensi","Benucci","Benvenuti","Berlincioni","Bernacchioni","Bernardi","Bernardini","Berni","Bernini","Bertelli","Berti","Bertini","Bessi","Betti","Bettini","Biagi","Biagini","Biagioni","Biagiotti","Biancalani","Bianchi","Bianchini","Bianco","Biffoli","Bigazzi","Bigi","Biliotti","Billi","Binazzi","Bindi","Bini","Biondi","Bizzarri","Bocci","Bogani","Bolognesi","Bonaiuti","Bonanni","Bonciani","Boncinelli","Bondi","Bonechi","Bongini","Boni","Bonini","Borchi","Boretti","Borghi","Borghini","Borgioli","Borri","Borselli","Boschi","Bottai","Bracci","Braccini","Brandi","Braschi","Bravi","Brazzini","Breschi","Brilli","Brizzi","Brogelli","Brogi","Brogioni","Brunelli","Brunetti","Bruni","Bruno","Brunori","Bruschi","Bucci","Bucciarelli","Buccioni","Bucelli","Bulli","Burberi","Burchi","Burgassi","Burroni","Bussotti","Buti","Caciolli","Caiani","Calabrese","Calamai","Calamandrei","Caldini","Calo'","Calonaci","Calosi","Calvelli","Cambi","Camiciottoli","Cammelli","Cammilli","Campolmi","Cantini","Capanni","Capecchi","Caponi","Cappelletti","Cappelli","Cappellini","Cappugi","Capretti","Caputo","Carbone","Carboni","Cardini","Carlesi","Carletti","Carli","Caroti","Carotti","Carrai","Carraresi","Carta","Caruso","Casalini","Casati","Caselli","Casini","Castagnoli","Castellani","Castelli","Castellucci","Catalano","Catarzi","Catelani","Cavaciocchi","Cavallaro","Cavallini","Cavicchi","Cavini","Ceccarelli","Ceccatelli","Ceccherelli","Ceccherini","Cecchi","Cecchini","Cecconi","Cei","Cellai","Celli","Cellini","Cencetti","Ceni","Cenni","Cerbai","Cesari","Ceseri","Checcacci","Checchi","Checcucci","Cheli","Chellini","Chen","Cheng","Cherici","Cherubini","Chiaramonti","Chiarantini","Chiarelli","Chiari","Chiarini","Chiarugi","Chiavacci","Chiesi","Chimenti","Chini","Chirici","Chiti","Ciabatti","Ciampi","Cianchi","Cianfanelli","Cianferoni","Ciani","Ciapetti","Ciappi","Ciardi","Ciatti","Cicali","Ciccone","Cinelli","Cini","Ciobanu","Ciolli","Cioni","Cipriani","Cirillo","Cirri","Ciucchi","Ciuffi","Ciulli","Ciullini","Clemente","Cocchi","Cognome","Coli","Collini","Colombo","Colzi","Comparini","Conforti","Consigli","Conte","Conti","Contini","Coppini","Coppola","Corsi","Corsini","Corti","Cortini","Cosi","Costa","Costantini","Costantino","Cozzi","Cresci","Crescioli","Cresti","Crini","Curradi","D'Agostino","D'Alessandro","D'Amico","D'Angelo","Daddi","Dainelli","Dallai","Danti","Davitti","De Angelis","De Luca","De Marco","De Rosa","De Santis","De Simone","De Vita","Degl'Innocenti","Degli Innocenti","Dei","Del Lungo","Del Re","Di Marco","Di Stefano","Dini","Diop","Dobre","Dolfi","Donati","Dondoli","Dong","Donnini","Ducci","Dumitru","Ermini","Esposito","Evangelisti","Fabbri","Fabbrini","Fabbrizzi","Fabbroni","Fabbrucci","Fabiani","Facchini","Faggi","Fagioli","Failli","Faini","Falciani","Falcini","Falcone","Fallani","Falorni","Falsini","Falugiani","Fancelli","Fanelli","Fanetti","Fanfani","Fani","Fantappie'","Fantechi","Fanti","Fantini","Fantoni","Farina","Fattori","Favilli","Fedi","Fei","Ferrante","Ferrara","Ferrari","Ferraro","Ferretti","Ferri","Ferrini","Ferroni","Fiaschi","Fibbi","Fiesoli","Filippi","Filippini","Fini","Fioravanti","Fiore","Fiorentini","Fiorini","Fissi","Focardi","Foggi","Fontana","Fontanelli","Fontani","Forconi","Formigli","Forte","Forti","Fortini","Fossati","Fossi","Francalanci","Franceschi","Franceschini","Franchi","Franchini","Franci","Francini","Francioni","Franco","Frassineti","Frati","Fratini","Frilli","Frizzi","Frosali","Frosini","Frullini","Fusco","Fusi","Gabbrielli","Gabellini","Gagliardi","Galanti","Galardi","Galeotti","Galletti","Galli","Gallo","Gallori","Gambacciani","Gargani","Garofalo","Garuglieri","Gashi","Gasperini","Gatti","Gelli","Gensini","Gentile","Gentili","Geri","Gerini","Gheri","Ghini","Giachetti","Giachi","Giacomelli","Gianassi","Giani","Giannelli","Giannetti","Gianni","Giannini","Giannoni","Giannotti","Giannozzi","Gigli","Giordano","Giorgetti","Giorgi","Giovacchini","Giovannelli","Giovannetti","Giovannini","Giovannoni","Giuliani","Giunti","Giuntini","Giusti","Gonnelli","Goretti","Gori","Gradi","Gramigni","Grassi","Grasso","Graziani","Grazzini","Greco","Grifoni","Grillo","Grimaldi","Grossi","Gualtieri","Guarducci","Guarino","Guarnieri","Guasti","Guerra","Guerri","Guerrini","Guidi","Guidotti","He","Hoxha","Hu","Huang","Iandelli","Ignesti","Innocenti","Jin","La Rosa","Lai","Landi","Landini","Lanini","Lapi","Lapini","Lari","Lascialfari","Lastrucci","Latini","Lazzeri","Lazzerini","Lelli","Lenzi","Leonardi","Leoncini","Leone","Leoni","Lepri","Li","Liao","Lin","Linari","Lippi","Lisi","Livi","Lombardi","Lombardini","Lombardo","Longo","Lopez","Lorenzi","Lorenzini","Lorini","Lotti","Lu","Lucchesi","Lucherini","Lunghi","Lupi","Madiai","Maestrini","Maffei","Maggi","Maggini","Magherini","Magini","Magnani","Magnelli","Magni","Magnolfi","Magrini","Malavolti","Malevolti","Manca","Mancini","Manetti","Manfredi","Mangani","Mannelli","Manni","Mannini","Mannucci","Manuelli","Manzini","Marcelli","Marchese","Marchetti","Marchi","Marchiani","Marchionni","Marconi","Marcucci","Margheri","Mari","Mariani","Marilli","Marinai","Marinari","Marinelli","Marini","Marino","Mariotti","Marsili","Martelli","Martinelli","Martini","Martino","Marzi","Masi","Masini","Masoni","Massai","Materassi","Mattei","Matteini","Matteucci","Matteuzzi","Mattioli","Mattolini","Matucci","Mauro","Mazzanti","Mazzei","Mazzetti","Mazzi","Mazzini","Mazzocchi","Mazzoli","Mazzoni","Mazzuoli","Meacci","Mecocci","Meini","Melani","Mele","Meli","Mengoni","Menichetti","Meoni","Merlini","Messeri","Messina","Meucci","Miccinesi","Miceli","Micheli","Michelini","Michelozzi","Migliori","Migliorini","Milani","Miniati","Misuri","Monaco","Montagnani","Montagni","Montanari","Montelatici","Monti","Montigiani","Montini","Morandi","Morandini","Morelli","Moretti","Morganti","Mori","Morini","Moroni","Morozzi","Mugnai","Mugnaini","Mustafa","Naldi","Naldini","Nannelli","Nanni","Nannini","Nannucci","Nardi","Nardini","Nardoni","Natali","Ndiaye","Nencetti","Nencini","Nencioni","Neri","Nesi","Nesti","Niccolai","Niccoli","Niccolini","Nigi","Nistri","Nocentini","Noferini","Novelli","Nucci","Nuti","Nutini","Oliva","Olivieri","Olmi","Orlandi","Orlandini","Orlando","Orsini","Ortolani","Ottanelli","Pacciani","Pace","Paci","Pacini","Pagani","Pagano","Paggetti","Pagliai","Pagni","Pagnini","Paladini","Palagi","Palchetti","Palloni","Palmieri","Palumbo","Pampaloni","Pancani","Pandolfi","Pandolfini","Panerai","Panichi","Paoletti","Paoli","Paolini","Papi","Papini","Papucci","Parenti","Parigi","Parisi","Parri","Parrini","Pasquini","Passeri","Pecchioli","Pecorini","Pellegrini","Pepi","Perini","Perrone","Peruzzi","Pesci","Pestelli","Petri","Petrini","Petrucci","Pettini","Pezzati","Pezzatini","Piani","Piazza","Piazzesi","Piazzini","Piccardi","Picchi","Piccini","Piccioli","Pieraccini","Pieraccioni","Pieralli","Pierattini","Pieri","Pierini","Pieroni","Pietrini","Pini","Pinna","Pinto","Pinzani","Pinzauti","Piras","Pisani","Pistolesi","Poggesi","Poggi","Poggiali","Poggiolini","Poli","Pollastri","Porciani","Pozzi","Pratellesi","Pratesi","Prosperi","Pruneti","Pucci","Puccini","Puccioni","Pugi","Pugliese","Puliti","Querci","Quercioli","Raddi","Radu","Raffaelli","Ragazzini","Ranfagni","Ranieri","Rastrelli","Raugei","Raveggi","Renai","Renzi","Rettori","Ricci","Ricciardi","Ridi","Ridolfi","Rigacci","Righi","Righini","Rinaldi","Risaliti","Ristori","Rizzo","Rocchi","Rocchini","Rogai","Romagnoli","Romanelli","Romani","Romano","Romei","Romeo","Romiti","Romoli","Romolini","Rontini","Rosati","Roselli","Rosi","Rossetti","Rossi","Rossini","Rovai","Ruggeri","Ruggiero","Russo","Sabatini","Saccardi","Sacchetti","Sacchi","Sacco","Salerno","Salimbeni","Salucci","Salvadori","Salvestrini","Salvi","Salvini","Sanesi","Sani","Sanna","Santi","Santini","Santoni","Santoro","Santucci","Sardi","Sarri","Sarti","Sassi","Sbolci","Scali","Scarpelli","Scarselli","Scopetani","Secci","Selvi","Senatori","Senesi","Serafini","Sereni","Serra","Sestini","Sguanci","Sieni","Signorini","Silvestri","Simoncini","Simonetti","Simoni","Singh","Sodi","Soldi","Somigli","Sorbi","Sorelli","Sorrentino","Sottili","Spina","Spinelli","Staccioli","Staderini","Stefanelli","Stefani","Stefanini","Stella","Susini","Tacchi","Tacconi","Taddei","Tagliaferri","Tamburini","Tanganelli","Tani","Tanini","Tapinassi","Tarchi","Tarchiani","Targioni","Tassi","Tassini","Tempesti","Terzani","Tesi","Testa","Testi","Tilli","Tinti","Tirinnanzi","Toccafondi","Tofanari","Tofani","Tognaccini","Tonelli","Tonini","Torelli","Torrini","Tosi","Toti","Tozzi","Trambusti","Trapani","Tucci","Turchi","Ugolini","Ulivi","Valente","Valenti","Valentini","Vangelisti","Vanni","Vannini","Vannoni","Vannozzi","Vannucchi","Vannucci","Ventura","Venturi","Venturini","Vestri","Vettori","Vichi","Viciani","Vieri","Vigiani","Vignoli","Vignolini","Vignozzi","Villani","Vinci","Visani","Vitale","Vitali","Viti","Viviani","Vivoli","Volpe","Volpi","Wang","Wu","Xu","Yang","Ye","Zagli","Zani","Zanieri","Zanobini","Zecchi","Zetti","Zhang","Zheng","Zhou","Zhu","Zingoni","Zini","Zoppi"],nl:["Albers","Alblas","Appelman","Baars","Baas","Bakker","Blank","Bleeker","Blok","Blom","Boer","Boers","Boldewijn","Boon","Boot","Bos","Bosch","Bosma","Bosman","Bouma","Bouman","Bouwman","Brands","Brouwer","Burger","Buijs","Buitenhuis","Ceder","Cohen","Dekker","Dekkers","Dijkman","Dijkstra","Driessen","Drost","Engel","Evers","Faber","Franke","Gerritsen","Goedhart","Goossens","Groen","Groenenberg","Groot","Haan","Hart","Heemskerk","Hendriks","Hermans","Hoekstra","Hofman","Hopman","Huisman","Jacobs","Jansen","Janssen","Jonker","Jaspers","Keijzer","Klaassen","Klein","Koek","Koenders","Kok","Kool","Koopman","Koopmans","Koning","Koster","Kramer","Kroon","Kuijpers","Kuiper","Kuipers","Kurt","Koster","Kwakman","Los","Lubbers","Maas","Markus","Martens","Meijer","Mol","Molenaar","Mulder","Nieuwenhuis","Peeters","Peters","Pengel","Pieters","Pool","Post","Postma","Prins","Pronk","Reijnders","Rietveld","Roest","Roos","Sanders","Schaap","Scheffer","Schenk","Schilder","Schipper","Schmidt","Scholten","Schouten","Schut","Schutte","Schuurman","Simons","Smeets","Smit","Smits","Snel","Swinkels","Tas","Terpstra","Timmermans","Tol","Tromp","Troost","Valk","Veenstra","Veldkamp","Verbeek","Verheul","Verhoeven","Vermeer","Vermeulen","Verweij","Vink","Visser","Voorn","Vos","Wagenaar","Wiersema","Willems","Willemsen","Witteveen","Wolff","Wolters","Zijlstra","Zwart","de Beer","de Boer","de Bruijn","de Bruin","de Graaf","de Groot","de Haan","de Haas","de Jager","de Jong","de Jonge","de Koning","de Lange","de Leeuw","de Ridder","de Rooij","de Ruiter","de Vos","de Vries","de Waal","de Wit","de Zwart","van Beek","van Boven","van Dam","van Dijk","van Dongen","van Doorn","van Egmond","van Eijk","van Es","van Gelder","van Gelderen","van Houten","van Hulst","van Kempen","van Kesteren","van Leeuwen","van Loon","van Mill","van Noord","van Ommen","van Ommeren","van Oosten","van Oostveen","van Rijn","van Schaik","van Veen","van Vliet","van Wijk","van Wijngaarden","van den Poel","van de Pol","van den Ploeg","van de Ven","van den Berg","van den Bosch","van den Brink","van den Broek","van den Heuvel","van der Heijden","van der Horst","van der Hulst","van der Kroon","van der Laan","van der Linden","van der Meer","van der Meij","van der Meulen","van der Molen","van der Sluis","van der Spek","van der Veen","van der Velde","van der Velden","van der Vliet","van der Wal"],uk:["Smith","Jones","Williams","Taylor","Brown","Davies","Evans","Wilson","Thomas","Johnson","Roberts","Robinson","Thompson","Wright","Walker","White","Edwards","Hughes","Green","Hall","Lewis","Harris","Clarke","Patel","Jackson","Wood","Turner","Martin","Cooper","Hill","Ward","Morris","Moore","Clark","Lee","King","Baker","Harrison","Morgan","Allen","James","Scott","Phillips","Watson","Davis","Parker","Price","Bennett","Young","Griffiths","Mitchell","Kelly","Cook","Carter","Richardson","Bailey","Collins","Bell","Shaw","Murphy","Miller","Cox","Richards","Khan","Marshall","Anderson","Simpson","Ellis","Adams","Singh","Begum","Wilkinson","Foster","Chapman","Powell","Webb","Rogers","Gray","Mason","Ali","Hunt","Hussain","Campbell","Matthews","Owen","Palmer","Holmes","Mills","Barnes","Knight","Lloyd","Butler","Russell","Barker","Fisher","Stevens","Jenkins","Murray","Dixon","Harvey","Graham","Pearson","Ahmed","Fletcher","Walsh","Kaur","Gibson","Howard","Andrews","Stewart","Elliott","Reynolds","Saunders","Payne","Fox","Ford","Pearce","Day","Brooks","West","Lawrence","Cole","Atkinson","Bradley","Spencer","Gill","Dawson","Ball","Burton","O'brien","Watts","Rose","Booth","Perry","Ryan","Grant","Wells","Armstrong","Francis","Rees","Hayes","Hart","Hudson","Newman","Barrett","Webster","Hunter","Gregory","Carr","Lowe","Page","Marsh","Riley","Dunn","Woods","Parsons","Berry","Stone","Reid","Holland","Hawkins","Harding","Porter","Robertson","Newton","Oliver","Reed","Kennedy","Williamson","Bird","Gardner","Shah","Dean","Lane","Cooke","Bates","Henderson","Parry","Burgess","Bishop","Walton","Burns","Nicholson","Shepherd","Ross","Cross","Long","Freeman","Warren","Nicholls","Hamilton","Byrne","Sutton","Mcdonald","Yates","Hodgson","Robson","Curtis","Hopkins","O'connor","Harper","Coleman","Watkins","Moss","Mccarthy","Chambers","O'neill","Griffin","Sharp","Hardy","Wheeler","Potter","Osborne","Johnston","Gordon","Doyle","Wallace","George","Jordan","Hutchinson","Rowe","Burke","May","Pritchard","Gilbert","Willis","Higgins","Read","Miles","Stevenson","Stephenson","Hammond","Arnold","Buckley","Walters","Hewitt","Barber","Nelson","Slater","Austin","Sullivan","Whitehead","Mann","Frost","Lambert","Stephens","Blake","Akhtar","Lynch","Goodwin","Barton","Woodward","Thomson","Cunningham","Quinn","Barnett","Baxter","Bibi","Clayton","Nash","Greenwood","Jennings","Holt","Kemp","Poole","Gallagher","Bond","Stokes","Tucker","Davidson","Fowler","Heath","Norman","Middleton","Lawson","Banks","French","Stanley","Jarvis","Gibbs","Ferguson","Hayward","Carroll","Douglas","Dickinson","Todd","Barlow","Peters","Lucas","Knowles","Hartley","Miah","Simmons","Morton","Alexander","Field","Morrison","Norris","Townsend","Preston","Hancock","Thornton","Baldwin","Burrows","Briggs","Parkinson","Reeves","Macdonald","Lamb","Black","Abbott","Sanders","Thorpe","Holden","Tomlinson","Perkins","Ashton","Rhodes","Fuller","Howe","Bryant","Vaughan","Dale","Davey","Weston","Bartlett","Whittaker","Davison","Kent","Skinner","Birch","Morley","Daniels","Glover","Howell","Cartwright","Pugh","Humphreys","Goddard","Brennan","Wall","Kirby","Bowen","Savage","Bull","Wong","Dobson","Smart","Wilkins","Kirk","Fraser","Duffy","Hicks","Patterson","Bradshaw","Little","Archer","Warner","Waters","O'sullivan","Farrell","Brookes","Atkins","Kay","Dodd","Bentley","Flynn","John","Schofield","Short","Haynes","Wade","Butcher","Henry","Sanderson","Crawford","Sheppard","Bolton","Coates","Giles","Gould","Houghton","Gibbons","Pratt","Manning","Law","Hooper","Noble","Dyer","Rahman","Clements","Moran","Sykes","Chan","Doherty","Connolly","Joyce","Franklin","Hobbs","Coles","Herbert","Steele","Kerr","Leach","Winter","Owens","Duncan","Naylor","Fleming","Horton","Finch","Fitzgerald","Randall","Carpenter","Marsden","Browne","Garner","Pickering","Hale","Dennis","Vincent","Chadwick","Chandler","Sharpe","Nolan","Lyons","Hurst","Collier","Peacock","Howarth","Faulkner","Rice","Pollard","Welch","Norton","Gough","Sinclair","Blackburn","Bryan","Conway","Power","Cameron","Daly","Allan","Hanson","Gardiner","Boyle","Myers","Turnbull","Wallis","Mahmood","Sims","Swift","Iqbal","Pope","Brady","Chamberlain","Rowley","Tyler","Farmer","Metcalfe","Hilton","Godfrey","Holloway","Parkin","Bray","Talbot","Donnelly","Nixon","Charlton","Benson","Whitehouse","Barry","Hope","Lord","North","Storey","Connor","Potts","Bevan","Hargreaves","Mclean","Mistry","Bruce","Howells","Hyde","Parkes","Wyatt","Fry","Lees","O'donnell","Craig","Forster","Mckenzie","Humphries","Mellor","Carey","Ingram","Summers","Leonard"],de:["Mller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Schulz","Hoffmann","Schfer","Koch","Bauer","Richter","Klein","Wolf","Schrder","Neumann","Schwarz","Zimmermann","Braun","Krger","Hofmann","Hartmann","Lange","Schmitt","Werner","Schmitz","Krause","Meier","Lehmann","Schmid","Schulze","Maier","Khler","Herrmann","Knig","Walter","Mayer","Huber","Kaiser","Fuchs","Peters","Lang","Scholz","Mller","Wei","Jung","Hahn","Schubert","Vogel","Friedrich","Keller","Gnther","Frank","Berger","Winkler","Roth","Beck","Lorenz","Baumann","Franke","Albrecht","Schuster","Simon","Ludwig","Bhm","Winter","Kraus","Martin","Schumacher","Krmer","Vogt","Stein","Jger","Otto","Sommer","Gro","Seidel","Heinrich","Brandt","Haas","Schreiber","Graf","Schulte","Dietrich","Ziegler","Kuhn","Khn","Pohl","Engel","Horn","Busch","Bergmann","Thomas","Voigt","Sauer","Arnold","Wolff","Pfeiffer"],jp:["Sato","Suzuki","Takahashi","Tanaka","Watanabe","Ito","Yamamoto","Nakamura","Kobayashi","Kato","Yoshida","Yamada","Sasaki","Yamaguchi","Saito","Matsumoto","Inoue","Kimura","Hayashi","Shimizu","Yamazaki","Mori","Abe","Ikeda","Hashimoto","Yamashita","Ishikawa","Nakajima","Maeda","Fujita","Ogawa","Goto","Okada","Hasegawa","Murakami","Kondo","Ishii","Saito","Sakamoto","Endo","Aoki","Fujii","Nishimura","Fukuda","Ota","Miura","Fujiwara","Okamoto","Matsuda","Nakagawa","Nakano","Harada","Ono","Tamura","Takeuchi","Kaneko","Wada","Nakayama","Ishida","Ueda","Morita","Hara","Shibata","Sakai","Kudo","Yokoyama","Miyazaki","Miyamoto","Uchida","Takagi","Ando","Taniguchi","Ohno","Maruyama","Imai","Takada","Fujimoto","Takeda","Murata","Ueno","Sugiyama","Masuda","Sugawara","Hirano","Kojima","Otsuka","Chiba","Kubo","Matsui","Iwasaki","Sakurai","Kinoshita","Noguchi","Matsuo","Nomura","Kikuchi","Sano","Onishi","Sugimoto","Arai"],es:["Garcia","Fernandez","Lopez","Martinez","Gonzalez","Rodriguez","Sanchez","Perez","Martin","Gomez","Ruiz","Diaz","Hernandez","Alvarez","Jimenez","Moreno","Munoz","Alonso","Romero","Navarro","Gutierrez","Torres","Dominguez","Gil","Vazquez","Blanco","Serrano","Ramos","Castro","Suarez","Sanz","Rubio","Ortega","Molina","Delgado","Ortiz","Morales","Ramirez","Marin","Iglesias","Santos","Castillo","Garrido","Calvo","Pena","Cruz","Cano","Nunez","Prieto","Diez","Lozano","Vidal","Pascual","Ferrer","Medina","Vega","Leon","Herrero","Vicente","Mendez","Guerrero","Fuentes","Campos","Nieto","Cortes","Caballero","Ibanez","Lorenzo","Pastor","Gimenez","Saez","Soler","Marquez","Carrasco","Herrera","Montero","Arias","Crespo","Flores","Andres","Aguilar","Hidalgo","Cabrera","Mora","Duran","Velasco","Rey","Pardo","Roman","Vila","Bravo","Merino","Moya","Soto","Izquierdo","Reyes","Redondo","Marcos","Carmona","Menendez"],fr:["Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lefvre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupont","Lambert","Fontaine","Rousseau","Vincent","Mller","Lefvre","Faure","Andr","Mercier","Blanc","Gurin","Boyer","Garnier","Chevalier","Franois","Legrand","Gauthier","Garcia","Perrin","Robin","Clment","Morin","Nicolas","Henry","Roussel","Matthieu","Gautier","Masson","Marchand","Duval","Denis","Dumont","Marie","Lemaire","Nol","Meyer","Dufour","Meunier","Brun","Blanchard","Giraud","Joly","Rivire","Lucas","Brunet","Gaillard","Barbier","Arnaud","Martnez","Grard","Roche","Renard","Schmitt","Roy","Leroux","Colin","Vidal","Caron","Picard","Roger","Fabre","Aubert","Lemoine","Renaud","Dumas","Lacroix","Olivier","Philippe","Bourgeois","Pierre","Benot","Rey","Leclerc","Payet","Rolland","Leclercq","Guillaume","Lecomte","Lpez","Jean","Dupuy","Guillot","Hubert","Berger","Carpentier","Snchez","Dupuis","Moulin","Louis","Deschamps","Huet","Vasseur","Perez","Boucher","Fleury","Royer","Klein","Jacquet","Adam","Paris","Poirier","Marty","Aubry","Guyot","Carr","Charles","Renault","Charpentier","Mnard","Maillard","Baron","Bertin","Bailly","Herv","Schneider","Fernndez","Le GallGall","Collet","Lger","Bouvier","Julien","Prvost","Millet","Perrot","Daniel","Le RouxRoux","Cousin","Germain","Breton","Besson","Langlois","Rmi","Le GoffGoff","Pelletier","Lvque","Perrier","Leblanc","Barr","Lebrun","Marchal","Weber","Mallet","Hamon","Boulanger","Jacob","Monnier","Michaud","Rodrguez","Guichard","Gillet","tienne","Grondin","Poulain","Tessier","Chevallier","Collin","Chauvin","Da SilvaSilva","Bouchet","Gay","Lematre","Bnard","Marchal","Humbert","Reynaud","Antoine","Hoarau","Perret","Barthlemy","Cordier","Pichon","Lejeune","Gilbert","Lamy","Delaunay","Pasquier","Carlier","LaporteLaporte"]},postcodeAreas:[{code:"AB"},{code:"AL"},{code:"B"},{code:"BA"},{code:"BB"},{code:"BD"},{code:"BH"},{code:"BL"},{code:"BN"},{code:"BR"},{code:"BS"},{code:"BT"},{code:"CA"},{code:"CB"},{code:"CF"},{code:"CH"},{code:"CM"},{code:"CO"},{code:"CR"},{code:"CT"},{code:"CV"},{code:"CW"},{code:"DA"},{code:"DD"},{code:"DE"},{code:"DG"},{code:"DH"},{code:"DL"},{code:"DN"},{code:"DT"},{code:"DY"},{code:"E"},{code:"EC"},{code:"EH"},{code:"EN"},{code:"EX"},{code:"FK"},{code:"FY"},{code:"G"},{code:"GL"},{code:"GU"},{code:"GY"},{code:"HA"},{code:"HD"},{code:"HG"},{code:"HP"},{code:"HR"},{code:"HS"},{code:"HU"},{code:"HX"},{code:"IG"},{code:"IM"},{code:"IP"},{code:"IV"},{code:"JE"},{code:"KA"},{code:"KT"},{code:"KW"},{code:"KY"},{code:"L"},{code:"LA"},{code:"LD"},{code:"LE"},{code:"LL"},{code:"LN"},{code:"LS"},{code:"LU"},{code:"M"},{code:"ME"},{code:"MK"},{code:"ML"},{code:"N"},{code:"NE"},{code:"NG"},{code:"NN"},{code:"NP"},{code:"NR"},{code:"NW"},{code:"OL"},{code:"OX"},{code:"PA"},{code:"PE"},{code:"PH"},{code:"PL"},{code:"PO"},{code:"PR"},{code:"RG"},{code:"RH"},{code:"RM"},{code:"S"},{code:"SA"},{code:"SE"},{code:"SG"},{code:"SK"},{code:"SL"},{code:"SM"},{code:"SN"},{code:"SO"},{code:"SP"},{code:"SR"},{code:"SS"},{code:"ST"},{code:"SW"},{code:"SY"},{code:"TA"},{code:"TD"},{code:"TF"},{code:"TN"},{code:"TQ"},{code:"TR"},{code:"TS"},{code:"TW"},{code:"UB"},{code:"W"},{code:"WA"},{code:"WC"},{code:"WD"},{code:"WF"},{code:"WN"},{code:"WR"},{code:"WS"},{code:"WV"},{code:"YO"},{code:"ZE"}],countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"land Islands",abbreviation:"AX"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua & Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Ascension Island",abbreviation:"AC"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia & Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Brazil",abbreviation:"BR"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canary Islands",abbreviation:"IC"},{name:"Cape Verde",abbreviation:"CV"},{name:"Caribbean Netherlands",abbreviation:"BQ"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Ceuta & Melilla",abbreviation:"EA"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos (Keeling) Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"Cte d'Ivoire",abbreviation:"CI"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Curaao",abbreviation:"CW"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Denmark",abbreviation:"DK"},{name:"Diego Garcia",abbreviation:"DG"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kosovo",abbreviation:"XK"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar (Burma)",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"Runion",abbreviation:"RE"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"So Tom and Prncipe",abbreviation:"ST"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Sint Maarten",abbreviation:"SX"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia & South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"South Sudan",abbreviation:"SS"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"St. Barthlemy",abbreviation:"BL"},{name:"St. Helena",abbreviation:"SH"},{name:"St. Kitts & Nevis",abbreviation:"KN"},{name:"St. Lucia",abbreviation:"LC"},{name:"St. Martin",abbreviation:"MF"},{name:"St. Pierre & Miquelon",abbreviation:"PM"},{name:"St. Vincent & Grenadines",abbreviation:"VC"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard & Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad & Tobago",abbreviation:"TT"},{name:"Tristan da Cunha",abbreviation:"TA"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks & Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Outlying Islands",abbreviation:"UM"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wallis & Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"}],counties:{uk:[{name:"Bath and North East Somerset"},{name:"Aberdeenshire"},{name:"Anglesey"},{name:"Angus"},{name:"Bedford"},{name:"Blackburn with Darwen"},{name:"Blackpool"},{name:"Bournemouth"},{name:"Bracknell Forest"},{name:"Brighton & Hove"},{name:"Bristol"},{name:"Buckinghamshire"},{name:"Cambridgeshire"},{name:"Carmarthenshire"},{name:"Central Bedfordshire"},{name:"Ceredigion"},{name:"Cheshire East"},{name:"Cheshire West and Chester"},{name:"Clackmannanshire"},{name:"Conwy"},{name:"Cornwall"},{name:"County Antrim"},{name:"County Armagh"},{name:"County Down"},{name:"County Durham"},{name:"County Fermanagh"},{name:"County Londonderry"},{name:"County Tyrone"},{name:"Cumbria"},{name:"Darlington"},{name:"Denbighshire"},{name:"Derby"},{name:"Derbyshire"},{name:"Devon"},{name:"Dorset"},{name:"Dumfries and Galloway"},{name:"Dundee"},{name:"East Lothian"},{name:"East Riding of Yorkshire"},{name:"East Sussex"},{name:"Edinburgh?"},{name:"Essex"},{name:"Falkirk"},{name:"Fife"},{name:"Flintshire"},{name:"Gloucestershire"},{name:"Greater London"},{name:"Greater Manchester"},{name:"Gwent"},{name:"Gwynedd"},{name:"Halton"},{name:"Hampshire"},{name:"Hartlepool"},{name:"Herefordshire"},{name:"Hertfordshire"},{name:"Highlands"},{name:"Hull"},{name:"Isle of Wight"},{name:"Isles of Scilly"},{name:"Kent"},{name:"Lancashire"},{name:"Leicester"},{name:"Leicestershire"},{name:"Lincolnshire"},{name:"Lothian"},{name:"Luton"},{name:"Medway"},{name:"Merseyside"},{name:"Mid Glamorgan"},{name:"Middlesbrough"},{name:"Milton Keynes"},{name:"Monmouthshire"},{name:"Moray"},{name:"Norfolk"},{name:"North East Lincolnshire"},{name:"North Lincolnshire"},{name:"North Somerset"},{name:"North Yorkshire"},{name:"Northamptonshire"},{name:"Northumberland"},{name:"Nottingham"},{name:"Nottinghamshire"},{name:"Oxfordshire"},{name:"Pembrokeshire"},{name:"Perth and Kinross"},{name:"Peterborough"},{name:"Plymouth"},{name:"Poole"},{name:"Portsmouth"},{name:"Powys"},{name:"Reading"},{name:"Redcar and Cleveland"},{name:"Rutland"},{name:"Scottish Borders"},{name:"Shropshire"},{name:"Slough"},{name:"Somerset"},{name:"South Glamorgan"},{name:"South Gloucestershire"},{name:"South Yorkshire"},{name:"Southampton"},{name:"Southend-on-Sea"},{name:"Staffordshire"},{name:"Stirlingshire"},{name:"Stockton-on-Tees"},{name:"Stoke-on-Trent"},{name:"Strathclyde"},{name:"Suffolk"},{name:"Surrey"},{name:"Swindon"},{name:"Telford and Wrekin"},{name:"Thurrock"},{name:"Torbay"},{name:"Tyne and Wear"},{name:"Warrington"},{name:"Warwickshire"},{name:"West Berkshire"},{name:"West Glamorgan"},{name:"West Lothian"},{name:"West Midlands"},{name:"West Sussex"},{name:"West Yorkshire"},{name:"Western Isles"},{name:"Wiltshire"},{name:"Windsor and Maidenhead"},{name:"Wokingham"},{name:"Worcestershire"},{name:"Wrexham"},{name:"York"}]},provinces:{ca:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],it:[{name:"Agrigento",abbreviation:"AG",code:84},{name:"Alessandria",abbreviation:"AL",code:6},{name:"Ancona",abbreviation:"AN",code:42},{name:"Aosta",abbreviation:"AO",code:7},{name:"L'Aquila",abbreviation:"AQ",code:66},{name:"Arezzo",abbreviation:"AR",code:51},{name:"Ascoli-Piceno",abbreviation:"AP",code:44},{name:"Asti",abbreviation:"AT",code:5},{name:"Avellino",abbreviation:"AV",code:64},{name:"Bari",abbreviation:"BA",code:72},{name:"Barletta-Andria-Trani",abbreviation:"BT",code:72},{name:"Belluno",abbreviation:"BL",code:25},{name:"Benevento",abbreviation:"BN",code:62},{name:"Bergamo",abbreviation:"BG",code:16},{name:"Biella",abbreviation:"BI",code:96},{name:"Bologna",abbreviation:"BO",code:37},{name:"Bolzano",abbreviation:"BZ",code:21},{name:"Brescia",abbreviation:"BS",code:17},{name:"Brindisi",abbreviation:"BR",code:74},{name:"Cagliari",abbreviation:"CA",code:92},{name:"Caltanissetta",abbreviation:"CL",code:85},{name:"Campobasso",abbreviation:"CB",code:70},{name:"Carbonia Iglesias",abbreviation:"CI",code:70},{name:"Caserta",abbreviation:"CE",code:61},{name:"Catania",abbreviation:"CT",code:87},{name:"Catanzaro",abbreviation:"CZ",code:79},{name:"Chieti",abbreviation:"CH",code:69},{name:"Como",abbreviation:"CO",code:13},{name:"Cosenza",abbreviation:"CS",code:78},{name:"Cremona",abbreviation:"CR",code:19},{name:"Crotone",abbreviation:"KR",code:101},{name:"Cuneo",abbreviation:"CN",code:4},{name:"Enna",abbreviation:"EN",code:86},{name:"Fermo",abbreviation:"FM",code:86},{name:"Ferrara",abbreviation:"FE",code:38},{name:"Firenze",abbreviation:"FI",code:48},{name:"Foggia",abbreviation:"FG",code:71},{name:"Forli-Cesena",abbreviation:"FC",code:71},{name:"Frosinone",abbreviation:"FR",code:60},{name:"Genova",abbreviation:"GE",code:10},{name:"Gorizia",abbreviation:"GO",code:31},{name:"Grosseto",abbreviation:"GR",code:53},{name:"Imperia",abbreviation:"IM",code:8},{name:"Isernia",abbreviation:"IS",code:94},{name:"La-Spezia",abbreviation:"SP",code:66},{name:"Latina",abbreviation:"LT",code:59},{name:"Lecce",abbreviation:"LE",code:75},{name:"Lecco",abbreviation:"LC",code:97},{name:"Livorno",abbreviation:"LI",code:49},{name:"Lodi",abbreviation:"LO",code:98},{name:"Lucca",abbreviation:"LU",code:46},{name:"Macerata",abbreviation:"MC",code:43},{name:"Mantova",abbreviation:"MN",code:20},{name:"Massa-Carrara",abbreviation:"MS",code:45},{name:"Matera",abbreviation:"MT",code:77},{name:"Medio Campidano",abbreviation:"VS",code:77},{name:"Messina",abbreviation:"ME",code:83},{name:"Milano",abbreviation:"MI",code:15},{name:"Modena",abbreviation:"MO",code:36},{name:"Monza-Brianza",abbreviation:"MB",code:36},{name:"Napoli",abbreviation:"NA",code:63},{name:"Novara",abbreviation:"NO",code:3},{name:"Nuoro",abbreviation:"NU",code:91},{name:"Ogliastra",abbreviation:"OG",code:91},{name:"Olbia Tempio",abbreviation:"OT",code:91},{name:"Oristano",abbreviation:"OR",code:95},{name:"Padova",abbreviation:"PD",code:28},{name:"Palermo",abbreviation:"PA",code:82},{name:"Parma",abbreviation:"PR",code:34},{name:"Pavia",abbreviation:"PV",code:18},{name:"Perugia",abbreviation:"PG",code:54},{name:"Pesaro-Urbino",abbreviation:"PU",code:41},{name:"Pescara",abbreviation:"PE",code:68},{name:"Piacenza",abbreviation:"PC",code:33},{name:"Pisa",abbreviation:"PI",code:50},{name:"Pistoia",abbreviation:"PT",code:47},{name:"Pordenone",abbreviation:"PN",code:93},{name:"Potenza",abbreviation:"PZ",code:76},{name:"Prato",abbreviation:"PO",code:100},{name:"Ragusa",abbreviation:"RG",code:88},{name:"Ravenna",abbreviation:"RA",code:39},{name:"Reggio-Calabria",abbreviation:"RC",code:35},{name:"Reggio-Emilia",abbreviation:"RE",code:35},{name:"Rieti",abbreviation:"RI",code:57},{name:"Rimini",abbreviation:"RN",code:99},{name:"Roma",abbreviation:"Roma",code:58},{name:"Rovigo",abbreviation:"RO",code:29},{name:"Salerno",abbreviation:"SA",code:65},{name:"Sassari",abbreviation:"SS",code:90},{name:"Savona",abbreviation:"SV",code:9},{name:"Siena",abbreviation:"SI",code:52},{name:"Siracusa",abbreviation:"SR",code:89},{name:"Sondrio",abbreviation:"SO",code:14},{name:"Taranto",abbreviation:"TA",code:73},{name:"Teramo",abbreviation:"TE",code:67},{name:"Terni",abbreviation:"TR",code:55},{name:"Torino",abbreviation:"TO",code:1},{name:"Trapani",abbreviation:"TP",code:81},{name:"Trento",abbreviation:"TN",code:22},{name:"Treviso",abbreviation:"TV",code:26},{name:"Trieste",abbreviation:"TS",code:32},{name:"Udine",abbreviation:"UD",code:30},{name:"Varese",abbreviation:"VA",code:12},{name:"Venezia",abbreviation:"VE",code:27},{name:"Verbania",abbreviation:"VB",code:27},{name:"Vercelli",abbreviation:"VC",code:2},{name:"Verona",abbreviation:"VR",code:23},{name:"Vibo-Valentia",abbreviation:"VV",code:102},{name:"Vicenza",abbreviation:"VI",code:24},{name:"Viterbo",abbreviation:"VT",code:56}]},nationalities:[{name:"Afghan"},{name:"Albanian"},{name:"Algerian"},{name:"American"},{name:"Andorran"},{name:"Angolan"},{name:"Antiguans"},{name:"Argentinean"},{name:"Armenian"},{name:"Australian"},{name:"Austrian"},{name:"Azerbaijani"},{name:"Bahami"},{name:"Bahraini"},{name:"Bangladeshi"},{name:"Barbadian"},{name:"Barbudans"},{name:"Batswana"},{name:"Belarusian"},{name:"Belgian"},{name:"Belizean"},{name:"Beninese"},{name:"Bhutanese"},{name:"Bolivian"},{name:"Bosnian"},{name:"Brazilian"},{name:"British"},{name:"Bruneian"},{name:"Bulgarian"},{name:"Burkinabe"},{name:"Burmese"},{name:"Burundian"},{name:"Cambodian"},{name:"Cameroonian"},{name:"Canadian"},{name:"Cape Verdean"},{name:"Central African"},{name:"Chadian"},{name:"Chilean"},{name:"Chinese"},{name:"Colombian"},{name:"Comoran"},{name:"Congolese"},{name:"Costa Rican"},{name:"Croatian"},{name:"Cuban"},{name:"Cypriot"},{name:"Czech"},{name:"Danish"},{name:"Djibouti"},{name:"Dominican"},{name:"Dutch"},{name:"East Timorese"},{name:"Ecuadorean"},{name:"Egyptian"},{name:"Emirian"},{name:"Equatorial Guinean"},{name:"Eritrean"},{name:"Estonian"},{name:"Ethiopian"},{name:"Fijian"},{name:"Filipino"},{name:"Finnish"},{name:"French"},{name:"Gabonese"},{name:"Gambian"},{name:"Georgian"},{name:"German"},{name:"Ghanaian"},{name:"Greek"},{name:"Grenadian"},{name:"Guatemalan"},{name:"Guinea-Bissauan"},{name:"Guinean"},{name:"Guyanese"},{name:"Haitian"},{name:"Herzegovinian"},{name:"Honduran"},{name:"Hungarian"},{name:"I-Kiribati"},{name:"Icelander"},{name:"Indian"},{name:"Indonesian"},{name:"Iranian"},{name:"Iraqi"},{name:"Irish"},{name:"Israeli"},{name:"Italian"},{name:"Ivorian"},{name:"Jamaican"},{name:"Japanese"},{name:"Jordanian"},{name:"Kazakhstani"},{name:"Kenyan"},{name:"Kittian and Nevisian"},{name:"Kuwaiti"},{name:"Kyrgyz"},{name:"Laotian"},{name:"Latvian"},{name:"Lebanese"},{name:"Liberian"},{name:"Libyan"},{name:"Liechtensteiner"},{name:"Lithuanian"},{name:"Luxembourger"},{name:"Macedonian"},{name:"Malagasy"},{name:"Malawian"},{name:"Malaysian"},{name:"Maldivan"},{name:"Malian"},{name:"Maltese"},{name:"Marshallese"},{name:"Mauritanian"},{name:"Mauritian"},{name:"Mexican"},{name:"Micronesian"},{name:"Moldovan"},{name:"Monacan"},{name:"Mongolian"},{name:"Moroccan"},{name:"Mosotho"},{name:"Motswana"},{name:"Mozambican"},{name:"Namibian"},{name:"Nauruan"},{name:"Nepalese"},{name:"New Zealander"},{name:"Nicaraguan"},{name:"Nigerian"},{name:"Nigerien"},{name:"North Korean"},{name:"Northern Irish"},{name:"Norwegian"},{name:"Omani"},{name:"Pakistani"},{name:"Palauan"},{name:"Panamanian"},{name:"Papua New Guinean"},{name:"Paraguayan"},{name:"Peruvian"},{name:"Polish"},{name:"Portuguese"},{name:"Qatari"},{name:"Romani"},{name:"Russian"},{name:"Rwandan"},{name:"Saint Lucian"},{name:"Salvadoran"},{name:"Samoan"},{name:"San Marinese"},{name:"Sao Tomean"},{name:"Saudi"},{name:"Scottish"},{name:"Senegalese"},{name:"Serbian"},{name:"Seychellois"},{name:"Sierra Leonean"},{name:"Singaporean"},{name:"Slovakian"},{name:"Slovenian"},{name:"Solomon Islander"},{name:"Somali"},{name:"South African"},{name:"South Korean"},{name:"Spanish"},{name:"Sri Lankan"},{name:"Sudanese"},{name:"Surinamer"},{name:"Swazi"},{name:"Swedish"},{name:"Swiss"},{name:"Syrian"},{name:"Taiwanese"},{name:"Tajik"},{name:"Tanzanian"},{name:"Thai"},{name:"Togolese"},{name:"Tongan"},{name:"Trinidadian or Tobagonian"},{name:"Tunisian"},{name:"Turkish"},{name:"Tuvaluan"},{name:"Ugandan"},{name:"Ukrainian"},{name:"Uruguaya"},{name:"Uzbekistani"},{name:"Venezuela"},{name:"Vietnamese"},{name:"Wels"},{name:"Yemenit"},{name:"Zambia"},{name:"Zimbabwe"}],locale_languages:["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],locale_regions:["agq-CM","asa-TZ","ast-ES","bas-CM","bem-ZM","bez-TZ","brx-IN","cgg-UG","chr-US","dav-KE","dje-NE","dsb-DE","dua-CM","dyo-SN","ebu-KE","ewo-CM","fil-PH","fur-IT","gsw-CH","gsw-FR","gsw-LI","guz-KE","haw-US","hsb-DE","jgo-CM","jmc-TZ","kab-DZ","kam-KE","kde-TZ","kea-CV","khq-ML","kkj-CM","kln-KE","kok-IN","ksb-TZ","ksf-CM","ksh-DE","lag-TZ","lkt-US","luo-KE","luy-KE","mas-KE","mas-TZ","mer-KE","mfe-MU","mgh-MZ","mgo-CM","mua-CM","naq-NA","nmg-CM","nnh-CM","nus-SD","nyn-UG","rof-TZ","rwk-TZ","sah-RU","saq-KE","sbp-TZ","seh-MZ","ses-ML","shi-Latn","shi-Latn-MA","shi-Tfng","shi-Tfng-MA","smn-FI","teo-KE","teo-UG","twq-NE","tzm-Latn","tzm-Latn-MA","vai-Latn","vai-Latn-LR","vai-Vaii","vai-Vaii-LR","vun-TZ","wae-CH","xog-UG","yav-CM","zgh-MA","af-NA","af-ZA","ak-GH","am-ET","ar-001","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as-IN","az-Cyrl","az-Cyrl-AZ","az-Latn","az-Latn-AZ","be-BY","bg-BG","bm-Latn","bm-Latn-ML","bn-BD","bn-IN","bo-CN","bo-IN","br-FR","bs-Cyrl","bs-Cyrl-BA","bs-Latn","bs-Latn-BA","ca-AD","ca-ES","ca-ES-VALENCIA","ca-FR","ca-IT","cs-CZ","cy-GB","da-DK","da-GL","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","dz-BT","ee-GH","ee-TG","el-CY","el-GR","en-001","en-150","en-AG","en-AI","en-AS","en-AU","en-BB","en-BE","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CK","en-CM","en-CX","en-DG","en-DM","en-ER","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SG","en-SH","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo-001","es-419","es-AR","es-BO","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-ES","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et-EE","eu-ES","fa-AF","fa-IR","ff-CM","ff-GN","ff-MR","ff-SN","fi-FI","fo-FO","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-FR","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fy-NL","ga-IE","gd-GB","gl-ES","gu-IN","gv-IM","ha-Latn","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","ig-NG","ii-CN","is-IS","it-CH","it-IT","it-SM","ja-JP","ka-GE","ki-KE","kk-Cyrl","kk-Cyrl-KZ","kl-GL","km-KH","kn-IN","ko-KP","ko-KR","ks-Arab","ks-Arab-IN","kw-GB","ky-Cyrl","ky-Cyrl-KG","lb-LU","lg-UG","ln-AO","ln-CD","ln-CF","ln-CG","lo-LA","lt-LT","lu-CD","lv-LV","mg-MG","mk-MK","ml-IN","mn-Cyrl","mn-Cyrl-MN","mr-IN","ms-Latn","ms-Latn-BN","ms-Latn-MY","ms-Latn-SG","mt-MT","my-MM","nb-NO","nb-SJ","nd-ZW","ne-IN","ne-NP","nl-AW","nl-BE","nl-BQ","nl-CW","nl-NL","nl-SR","nl-SX","nn-NO","om-ET","om-KE","or-IN","os-GE","os-RU","pa-Arab","pa-Arab-PK","pa-Guru","pa-Guru-IN","pl-PL","ps-AF","pt-AO","pt-BR","pt-CV","pt-GW","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu-BO","qu-EC","qu-PE","rm-CH","rn-BI","ro-MD","ro-RO","ru-BY","ru-KG","ru-KZ","ru-MD","ru-RU","ru-UA","rw-RW","se-FI","se-NO","se-SE","sg-CF","si-LK","sk-SK","sl-SI","sn-ZW","so-DJ","so-ET","so-KE","so-SO","sq-AL","sq-MK","sq-XK","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-RS","sr-Latn-XK","sv-AX","sv-FI","sv-SE","sw-CD","sw-KE","sw-TZ","sw-UG","ta-IN","ta-LK","ta-MY","ta-SG","te-IN","th-TH","ti-ER","ti-ET","to-TO","tr-CY","tr-TR","ug-Arab","ug-Arab-CN","uk-UA","ur-IN","ur-PK","uz-Arab","uz-Arab-AF","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","vi-VN","yi-001","yo-BJ","yo-NG","zh-Hans","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zu-ZA"],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],country_regions:{it:[{name:"Valle d'Aosta",abbreviation:"VDA"},{name:"Piemonte",abbreviation:"PIE"},{name:"Lombardia",abbreviation:"LOM"},{name:"Veneto",abbreviation:"VEN"},{name:"Trentino Alto Adige",abbreviation:"TAA"},{name:"Friuli Venezia Giulia",abbreviation:"FVG"},{name:"Liguria",abbreviation:"LIG"},{name:"Emilia Romagna",abbreviation:"EMR"},{name:"Toscana",abbreviation:"TOS"},{name:"Umbria",abbreviation:"UMB"},{name:"Marche",abbreviation:"MAR"},{name:"Abruzzo",abbreviation:"ABR"},{name:"Lazio",abbreviation:"LAZ"},{name:"Campania",abbreviation:"CAM"},{name:"Puglia",abbreviation:"PUG"},{name:"Basilicata",abbreviation:"BAS"},{name:"Molise",abbreviation:"MOL"},{name:"Calabria",abbreviation:"CAL"},{name:"Sicilia",abbreviation:"SIC"},{name:"Sardegna",abbreviation:"SAR"}],mx:[{name:"Aguascalientes",abbreviation:"AGU"},{name:"Baja California",abbreviation:"BCN"},{name:"Baja California Sur",abbreviation:"BCS"},{name:"Campeche",abbreviation:"CAM"},{name:"Chiapas",abbreviation:"CHP"},{name:"Chihuahua",abbreviation:"CHH"},{name:"Ciudad de Mxico",abbreviation:"DIF"},{name:"Coahuila",abbreviation:"COA"},{name:"Colima",abbreviation:"COL"},{name:"Durango",abbreviation:"DUR"},{name:"Guanajuato",abbreviation:"GUA"},{name:"Guerrero",abbreviation:"GRO"},{name:"Hidalgo",abbreviation:"HID"},{name:"Jalisco",abbreviation:"JAL"},{name:"Mxico",abbreviation:"MEX"},{name:"Michoacn",abbreviation:"MIC"},{name:"Morelos",abbreviation:"MOR"},{name:"Nayarit",abbreviation:"NAY"},{name:"Nuevo Len",abbreviation:"NLE"},{name:"Oaxaca",abbreviation:"OAX"},{name:"Puebla",abbreviation:"PUE"},{name:"Quertaro",abbreviation:"QUE"},{name:"Quintana Roo",abbreviation:"ROO"},{name:"San Luis Potos",abbreviation:"SLP"},{name:"Sinaloa",abbreviation:"SIN"},{name:"Sonora",abbreviation:"SON"},{name:"Tabasco",abbreviation:"TAB"},{name:"Tamaulipas",abbreviation:"TAM"},{name:"Tlaxcala",abbreviation:"TLA"},{name:"Veracruz",abbreviation:"VER"},{name:"Yucatn",abbreviation:"YUC"},{name:"Zacatecas",abbreviation:"ZAC"}]},street_suffixes:{us:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],it:[{name:"Accesso",abbreviation:"Acc."},{name:"Alzaia",abbreviation:"Alz."},{name:"Arco",abbreviation:"Arco"},{name:"Archivolto",abbreviation:"Acv."},{name:"Arena",abbreviation:"Arena"},{name:"Argine",abbreviation:"Argine"},{name:"Bacino",abbreviation:"Bacino"},{name:"Banchi",abbreviation:"Banchi"},{name:"Banchina",abbreviation:"Ban."},{name:"Bastioni",abbreviation:"Bas."},{name:"Belvedere",abbreviation:"Belv."},{name:"Borgata",abbreviation:"B.ta"},{name:"Borgo",abbreviation:"B.go"},{name:"Calata",abbreviation:"Cal."},{name:"Calle",abbreviation:"Calle"},{name:"Campiello",abbreviation:"Cam."},{name:"Campo",abbreviation:"Cam."},{name:"Canale",abbreviation:"Can."},{name:"Carraia",abbreviation:"Carr."},{name:"Cascina",abbreviation:"Cascina"},{name:"Case sparse",abbreviation:"c.s."},{name:"Cavalcavia",abbreviation:"Cv."},{name:"Circonvallazione",abbreviation:"Cv."},{name:"Complanare",abbreviation:"C.re"},{name:"Contrada",abbreviation:"C.da"},{name:"Corso",abbreviation:"C.so"},{name:"Corte",abbreviation:"C.te"},{name:"Cortile",abbreviation:"C.le"},{name:"Diramazione",abbreviation:"Dir."},{name:"Fondaco",abbreviation:"F.co"},{name:"Fondamenta",abbreviation:"F.ta"},{name:"Fondo",abbreviation:"F.do"},{name:"Frazione",abbreviation:"Fr."},{name:"Isola",abbreviation:"Is."},{name:"Largo",abbreviation:"L.go"},{name:"Litoranea",abbreviation:"Lit."},{name:"Lungolago",abbreviation:"L.go lago"},{name:"Lungo Po",abbreviation:"l.go Po"},{name:"Molo",abbreviation:"Molo"},{name:"Mura",abbreviation:"Mura"},{name:"Passaggio privato",abbreviation:"pass. priv."},{name:"Passeggiata",abbreviation:"Pass."},{name:"Piazza",abbreviation:"P.zza"},{name:"Piazzale",abbreviation:"P.le"},{name:"Ponte",abbreviation:"P.te"},{name:"Portico",abbreviation:"P.co"},{name:"Rampa",abbreviation:"Rampa"},{name:"Regione",abbreviation:"Reg."},{name:"Rione",abbreviation:"R.ne"},{name:"Rio",abbreviation:"Rio"},{name:"Ripa",abbreviation:"Ripa"},{name:"Riva",abbreviation:"Riva"},{name:"Rond",abbreviation:"Rond"},{name:"Rotonda",abbreviation:"Rot."},{name:"Sagrato",abbreviation:"Sagr."},{name:"Salita",abbreviation:"Sal."},{name:"Scalinata",abbreviation:"Scal."},{name:"Scalone",abbreviation:"Scal."},{name:"Slargo",abbreviation:"Sl."},{name:"Sottoportico",abbreviation:"Sott."},{name:"Strada",abbreviation:"Str."},{name:"Stradale",abbreviation:"Str.le"},{name:"Strettoia",abbreviation:"Strett."},{name:"Traversa",abbreviation:"Trav."},{name:"Via",abbreviation:"V."},{name:"Viale",abbreviation:"V.le"},{name:"Vicinale",abbreviation:"Vic.le"},{name:"Vicolo",abbreviation:"Vic."}],uk:[{name:"Avenue",abbreviation:"Ave"},{name:"Close",abbreviation:"Cl"},{name:"Court",abbreviation:"Ct"},{name:"Crescent",abbreviation:"Cr"},{name:"Drive",abbreviation:"Dr"},{name:"Garden",abbreviation:"Gdn"},{name:"Gardens",abbreviation:"Gdns"},{name:"Green",abbreviation:"Gn"},{name:"Grove",abbreviation:"Gr"},{name:"Lane",abbreviation:"Ln"},{name:"Mount",abbreviation:"Mt"},{name:"Place",abbreviation:"Pl"},{name:"Park",abbreviation:"Pk"},{name:"Ridge",abbreviation:"Rdg"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Valley",abbreviation:"Val"}]},months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"So Tom and Prncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communaut Financire Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communaut Financire Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Franais du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}],colorNames:["AliceBlue","Black","Navy","DarkBlue","MediumBlue","Blue","DarkGreen","Green","Teal","DarkCyan","DeepSkyBlue","DarkTurquoise","MediumSpringGreen","Lime","SpringGreen","Aqua","Cyan","MidnightBlue","DodgerBlue","LightSeaGreen","ForestGreen","SeaGreen","DarkSlateGray","LimeGreen","MediumSeaGreen","Turquoise","RoyalBlue","SteelBlue","DarkSlateBlue","MediumTurquoise","Indigo","DarkOliveGreen","CadetBlue","CornflowerBlue","RebeccaPurple","MediumAquaMarine","DimGray","SlateBlue","OliveDrab","SlateGray","LightSlateGray","MediumSlateBlue","LawnGreen","Chartreuse","Aquamarine","Maroon","Purple","Olive","Gray","SkyBlue","LightSkyBlue","BlueViolet","DarkRed","DarkMagenta","SaddleBrown","Ivory","White","DarkSeaGreen","LightGreen","MediumPurple","DarkViolet","PaleGreen","DarkOrchid","YellowGreen","Sienna","Brown","DarkGray","LightBlue","GreenYellow","PaleTurquoise","LightSteelBlue","PowderBlue","FireBrick","DarkGoldenRod","MediumOrchid","RosyBrown","DarkKhaki","Silver","MediumVioletRed","IndianRed","Peru","Chocolate","Tan","LightGray","Thistle","Orchid","GoldenRod","PaleVioletRed","Crimson","Gainsboro","Plum","BurlyWood","LightCyan","Lavender","DarkSalmon","Violet","PaleGoldenRod","LightCoral","Khaki","AliceBlue","HoneyDew","Azure","SandyBrown","Wheat","Beige","WhiteSmoke","MintCream","GhostWhite","Salmon","AntiqueWhite","Linen","LightGoldenRodYellow","OldLace","Red","Fuchsia","Magenta","DeepPink","OrangeRed","Tomato","HotPink","Coral","DarkOrange","LightSalmon","Orange","LightPink","Pink","Gold","PeachPuff","NavajoWhite","Moccasin","Bisque","MistyRose","BlanchedAlmond","PapayaWhip","LavenderBlush","SeaShell","Cornsilk","LemonChiffon","FloralWhite","Snow","Yellow","LightYellow"],company:["3Com Corp","3M Company","A.G. Edwards Inc.","Abbott Laboratories","Abercrombie & Fitch Co.","ABM Industries Incorporated","Ace Hardware Corporation","ACT Manufacturing Inc.","Acterna Corp.","Adams Resources & Energy, Inc.","ADC Telecommunications, Inc.","Adelphia Communications Corporation","Administaff, Inc.","Adobe Systems Incorporated","Adolph Coors Company","Advance Auto Parts, Inc.","Advanced Micro Devices, Inc.","AdvancePCS, Inc.","Advantica Restaurant Group, Inc.","The AES Corporation","Aetna Inc.","Affiliated Computer Services, Inc.","AFLAC Incorporated","AGCO Corporation","Agilent Technologies, Inc.","Agway Inc.","Apartment Investment and Management Company","Air Products and Chemicals, Inc.","Airborne, Inc.","Airgas, Inc.","AK Steel Holding Corporation","Alaska Air Group, Inc.","Alberto-Culver Company","Albertson's, Inc.","Alcoa Inc.","Alleghany Corporation","Allegheny Energy, Inc.","Allegheny Technologies Incorporated","Allergan, Inc.","ALLETE, Inc.","Alliant Energy Corporation","Allied Waste Industries, Inc.","Allmerica Financial Corporation","The Allstate Corporation","ALLTEL Corporation","The Alpine Group, Inc.","Amazon.com, Inc.","AMC Entertainment Inc.","American Power Conversion Corporation","Amerada Hess Corporation","AMERCO","Ameren Corporation","America West Holdings Corporation","American Axle & Manufacturing Holdings, Inc.","American Eagle Outfitters, Inc.","American Electric Power Company, Inc.","American Express Company","American Financial Group, Inc.","American Greetings Corporation","American International Group, Inc.","American Standard Companies Inc.","American Water Works Company, Inc.","AmerisourceBergen Corporation","Ames Department Stores, Inc.","Amgen Inc.","Amkor Technology, Inc.","AMR Corporation","AmSouth Bancorp.","Amtran, Inc.","Anadarko Petroleum Corporation","Analog Devices, Inc.","Anheuser-Busch Companies, Inc.","Anixter International Inc.","AnnTaylor Inc.","Anthem, Inc.","AOL Time Warner Inc.","Aon Corporation","Apache Corporation","Apple Computer, Inc.","Applera Corporation","Applied Industrial Technologies, Inc.","Applied Materials, Inc.","Aquila, Inc.","ARAMARK Corporation","Arch Coal, Inc.","Archer Daniels Midland Company","Arkansas Best Corporation","Armstrong Holdings, Inc.","Arrow Electronics, Inc.","ArvinMeritor, Inc.","Ashland Inc.","Astoria Financial Corporation","AT&T Corp.","Atmel Corporation","Atmos Energy Corporation","Audiovox Corporation","Autoliv, Inc.","Automatic Data Processing, Inc.","AutoNation, Inc.","AutoZone, Inc.","Avaya Inc.","Avery Dennison Corporation","Avista Corporation","Avnet, Inc.","Avon Products, Inc.","Baker Hughes Incorporated","Ball Corporation","Bank of America Corporation","The Bank of New York Company, Inc.","Bank One Corporation","Banknorth Group, Inc.","Banta Corporation","Barnes & Noble, Inc.","Bausch & Lomb Incorporated","Baxter International Inc.","BB&T Corporation","The Bear Stearns Companies Inc.","Beazer Homes USA, Inc.","Beckman Coulter, Inc.","Becton, Dickinson and Company","Bed Bath & Beyond Inc.","Belk, Inc.","Bell Microproducts Inc.","BellSouth Corporation","Belo Corp.","Bemis Company, Inc.","Benchmark Electronics, Inc.","Berkshire Hathaway Inc.","Best Buy Co., Inc.","Bethlehem Steel Corporation","Beverly Enterprises, Inc.","Big Lots, Inc.","BJ Services Company","BJ's Wholesale Club, Inc.","The Black & Decker Corporation","Black Hills Corporation","BMC Software, Inc.","The Boeing Company","Boise Cascade Corporation","Borders Group, Inc.","BorgWarner Inc.","Boston Scientific Corporation","Bowater Incorporated","Briggs & Stratton Corporation","Brightpoint, Inc.","Brinker International, Inc.","Bristol-Myers Squibb Company","Broadwing, Inc.","Brown Shoe Company, Inc.","Brown-Forman Corporation","Brunswick Corporation","Budget Group, Inc.","Burlington Coat Factory Warehouse Corporation","Burlington Industries, Inc.","Burlington Northern Santa Fe Corporation","Burlington Resources Inc.","C. H. Robinson Worldwide Inc.","Cablevision Systems Corp","Cabot Corp","Cadence Design Systems, Inc.","Calpine Corp.","Campbell Soup Co.","Capital One Financial Corp.","Cardinal Health Inc.","Caremark Rx Inc.","Carlisle Cos. Inc.","Carpenter Technology Corp.","Casey's General Stores Inc.","Caterpillar Inc.","CBRL Group Inc.","CDI Corp.","CDW Computer Centers Inc.","CellStar Corp.","Cendant Corp","Cenex Harvest States Cooperatives","Centex Corp.","CenturyTel Inc.","Ceridian Corp.","CH2M Hill Cos. Ltd.","Champion Enterprises Inc.","Charles Schwab Corp.","Charming Shoppes Inc.","Charter Communications Inc.","Charter One Financial Inc.","ChevronTexaco Corp.","Chiquita Brands International Inc.","Chubb Corp","Ciena Corp.","Cigna Corp","Cincinnati Financial Corp.","Cinergy Corp.","Cintas Corp.","Circuit City Stores Inc.","Cisco Systems Inc.","Citigroup, Inc","Citizens Communications Co.","CKE Restaurants Inc.","Clear Channel Communications Inc.","The Clorox Co.","CMGI Inc.","CMS Energy Corp.","CNF Inc.","Coca-Cola Co.","Coca-Cola Enterprises Inc.","Colgate-Palmolive Co.","Collins & Aikman Corp.","Comcast Corp.","Comdisco Inc.","Comerica Inc.","Comfort Systems USA Inc.","Commercial Metals Co.","Community Health Systems Inc.","Compass Bancshares Inc","Computer Associates International Inc.","Computer Sciences Corp.","Compuware Corp.","Comverse Technology Inc.","ConAgra Foods Inc.","Concord EFS Inc.","Conectiv, Inc","Conoco Inc","Conseco Inc.","Consolidated Freightways Corp.","Consolidated Edison Inc.","Constellation Brands Inc.","Constellation Emergy Group Inc.","Continental Airlines Inc.","Convergys Corp.","Cooper Cameron Corp.","Cooper Industries Ltd.","Cooper Tire & Rubber Co.","Corn Products International Inc.","Corning Inc.","Costco Wholesale Corp.","Countrywide Credit Industries Inc.","Coventry Health Care Inc.","Cox Communications Inc.","Crane Co.","Crompton Corp.","Crown Cork & Seal Co. Inc.","CSK Auto Corp.","CSX Corp.","Cummins Inc.","CVS Corp.","Cytec Industries Inc.","D&K Healthcare Resources, Inc.","D.R. Horton Inc.","Dana Corporation","Danaher Corporation","Darden Restaurants Inc.","DaVita Inc.","Dean Foods Company","Deere & Company","Del Monte Foods Co","Dell Computer Corporation","Delphi Corp.","Delta Air Lines Inc.","Deluxe Corporation","Devon Energy Corporation","Di Giorgio Corporation","Dial Corporation","Diebold Incorporated","Dillard's Inc.","DIMON Incorporated","Dole Food Company, Inc.","Dollar General Corporation","Dollar Tree Stores, Inc.","Dominion Resources, Inc.","Domino's Pizza LLC","Dover Corporation, Inc.","Dow Chemical Company","Dow Jones & Company, Inc.","DPL Inc.","DQE Inc.","Dreyer's Grand Ice Cream, Inc.","DST Systems, Inc.","DTE Energy Co.","E.I. Du Pont de Nemours and Company","Duke Energy Corp","Dun & Bradstreet Inc.","DURA Automotive Systems Inc.","DynCorp","Dynegy Inc.","E*Trade Group, Inc.","E.W. Scripps Company","Earthlink, Inc.","Eastman Chemical Company","Eastman Kodak Company","Eaton Corporation","Echostar Communications Corporation","Ecolab Inc.","Edison International","EGL Inc.","El Paso Corporation","Electronic Arts Inc.","Electronic Data Systems Corp.","Eli Lilly and Company","EMC Corporation","Emcor Group Inc.","Emerson Electric Co.","Encompass Services Corporation","Energizer Holdings Inc.","Energy East Corporation","Engelhard Corporation","Enron Corp.","Entergy Corporation","Enterprise Products Partners L.P.","EOG Resources, Inc.","Equifax Inc.","Equitable Resources Inc.","Equity Office Properties Trust","Equity Residential Properties Trust","Estee Lauder Companies Inc.","Exelon Corporation","Exide Technologies","Expeditors International of Washington Inc.","Express Scripts Inc.","ExxonMobil Corporation","Fairchild Semiconductor International Inc.","Family Dollar Stores Inc.","Farmland Industries Inc.","Federal Mogul Corp.","Federated Department Stores Inc.","Federal Express Corp.","Felcor Lodging Trust Inc.","Ferro Corp.","Fidelity National Financial Inc.","Fifth Third Bancorp","First American Financial Corp.","First Data Corp.","First National of Nebraska Inc.","First Tennessee National Corp.","FirstEnergy Corp.","Fiserv Inc.","Fisher Scientific International Inc.","FleetBoston Financial Co.","Fleetwood Enterprises Inc.","Fleming Companies Inc.","Flowers Foods Inc.","Flowserv Corp","Fluor Corp","FMC Corp","Foamex International Inc","Foot Locker Inc","Footstar Inc.","Ford Motor Co","Forest Laboratories Inc.","Fortune Brands Inc.","Foster Wheeler Ltd.","FPL Group Inc.","Franklin Resources Inc.","Freeport McMoran Copper & Gold Inc.","Frontier Oil Corp","Furniture Brands International Inc.","Gannett Co., Inc.","Gap Inc.","Gateway Inc.","GATX Corporation","Gemstar-TV Guide International Inc.","GenCorp Inc.","General Cable Corporation","General Dynamics Corporation","General Electric Company","General Mills Inc","General Motors Corporation","Genesis Health Ventures Inc.","Gentek Inc.","Gentiva Health Services Inc.","Genuine Parts Company","Genuity Inc.","Genzyme Corporation","Georgia Gulf Corporation","Georgia-Pacific Corporation","Gillette Company","Gold Kist Inc.","Golden State Bancorp Inc.","Golden West Financial Corporation","Goldman Sachs Group Inc.","Goodrich Corporation","The Goodyear Tire & Rubber Company","Granite Construction Incorporated","Graybar Electric Company Inc.","Great Lakes Chemical Corporation","Great Plains Energy Inc.","GreenPoint Financial Corp.","Greif Bros. Corporation","Grey Global Group Inc.","Group 1 Automotive Inc.","Guidant Corporation","H&R Block Inc.","H.B. Fuller Company","H.J. Heinz Company","Halliburton Co.","Harley-Davidson Inc.","Harman International Industries Inc.","Harrah's Entertainment Inc.","Harris Corp.","Harsco Corp.","Hartford Financial Services Group Inc.","Hasbro Inc.","Hawaiian Electric Industries Inc.","HCA Inc.","Health Management Associates Inc.","Health Net Inc.","Healthsouth Corp","Henry Schein Inc.","Hercules Inc.","Herman Miller Inc.","Hershey Foods Corp.","Hewlett-Packard Company","Hibernia Corp.","Hillenbrand Industries Inc.","Hilton Hotels Corp.","Hollywood Entertainment Corp.","Home Depot Inc.","Hon Industries Inc.","Honeywell International Inc.","Hormel Foods Corp.","Host Marriott Corp.","Household International Corp.","Hovnanian Enterprises Inc.","Hub Group Inc.","Hubbell Inc.","Hughes Supply Inc.","Humana Inc.","Huntington Bancshares Inc.","Idacorp Inc.","IDT Corporation","IKON Office Solutions Inc.","Illinois Tool Works Inc.","IMC Global Inc.","Imperial Sugar Company","IMS Health Inc.","Ingles Market Inc","Ingram Micro Inc.","Insight Enterprises Inc.","Integrated Electrical Services Inc.","Intel Corporation","International Paper Co.","Interpublic Group of Companies Inc.","Interstate Bakeries Corporation","International Business Machines Corp.","International Flavors & Fragrances Inc.","International Multifoods Corporation","Intuit Inc.","IT Group Inc.","ITT Industries Inc.","Ivax Corp.","J.B. Hunt Transport Services Inc.","J.C. Penny Co.","J.P. Morgan Chase & Co.","Jabil Circuit Inc.","Jack In The Box Inc.","Jacobs Engineering Group Inc.","JDS Uniphase Corp.","Jefferson-Pilot Co.","John Hancock Financial Services Inc.","Johnson & Johnson","Johnson Controls Inc.","Jones Apparel Group Inc.","KB Home","Kellogg Company","Kellwood Company","Kelly Services Inc.","Kemet Corp.","Kennametal Inc.","Kerr-McGee Corporation","KeyCorp","KeySpan Corp.","Kimball International Inc.","Kimberly-Clark Corporation","Kindred Healthcare Inc.","KLA-Tencor Corporation","K-Mart Corp.","Knight-Ridder Inc.","Kohl's Corp.","KPMG Consulting Inc.","Kroger Co.","L-3 Communications Holdings Inc.","Laboratory Corporation of America Holdings","Lam Research Corporation","LandAmerica Financial Group Inc.","Lands' End Inc.","Landstar System Inc.","La-Z-Boy Inc.","Lear Corporation","Legg Mason Inc.","Leggett & Platt Inc.","Lehman Brothers Holdings Inc.","Lennar Corporation","Lennox International Inc.","Level 3 Communications Inc.","Levi Strauss & Co.","Lexmark International Inc.","Limited Inc.","Lincoln National Corporation","Linens 'n Things Inc.","Lithia Motors Inc.","Liz Claiborne Inc.","Lockheed Martin Corporation","Loews Corporation","Longs Drug Stores Corporation","Louisiana-Pacific Corporation","Lowe's Companies Inc.","LSI Logic Corporation","The LTV Corporation","The Lubrizol Corporation","Lucent Technologies Inc.","Lyondell Chemical Company","M & T Bank Corporation","Magellan Health Services Inc.","Mail-Well Inc.","Mandalay Resort Group","Manor Care Inc.","Manpower Inc.","Marathon Oil Corporation","Mariner Health Care Inc.","Markel Corporation","Marriott International Inc.","Marsh & McLennan Companies Inc.","Marsh Supermarkets Inc.","Marshall & Ilsley Corporation","Martin Marietta Materials Inc.","Masco Corporation","Massey Energy Company","MasTec Inc.","Mattel Inc.","Maxim Integrated Products Inc.","Maxtor Corporation","Maxxam Inc.","The May Department Stores Company","Maytag Corporation","MBNA Corporation","McCormick & Company Incorporated","McDonald's Corporation","The McGraw-Hill Companies Inc.","McKesson Corporation","McLeodUSA Incorporated","M.D.C. Holdings Inc.","MDU Resources Group Inc.","MeadWestvaco Corporation","Medtronic Inc.","Mellon Financial Corporation","The Men's Wearhouse Inc.","Merck & Co., Inc.","Mercury General Corporation","Merrill Lynch & Co. Inc.","Metaldyne Corporation","Metals USA Inc.","MetLife Inc.","Metris Companies Inc","MGIC Investment Corporation","MGM Mirage","Michaels Stores Inc.","Micron Technology Inc.","Microsoft Corporation","Milacron Inc.","Millennium Chemicals Inc.","Mirant Corporation","Mohawk Industries Inc.","Molex Incorporated","The MONY Group Inc.","Morgan Stanley Dean Witter & Co.","Motorola Inc.","MPS Group Inc.","Murphy Oil Corporation","Nabors Industries Inc","Nacco Industries Inc","Nash Finch Company","National City Corp.","National Commerce Financial Corporation","National Fuel Gas Company","National Oilwell Inc","National Rural Utilities Cooperative Finance Corporation","National Semiconductor Corporation","National Service Industries Inc","Navistar International Corporation","NCR Corporation","The Neiman Marcus Group Inc.","New Jersey Resources Corporation","New York Times Company","Newell Rubbermaid Inc","Newmont Mining Corporation","Nextel Communications Inc","Nicor Inc","Nike Inc","NiSource Inc","Noble Energy Inc","Nordstrom Inc","Norfolk Southern Corporation","Nortek Inc","North Fork Bancorporation Inc","Northeast Utilities System","Northern Trust Corporation","Northrop Grumman Corporation","NorthWestern Corporation","Novellus Systems Inc","NSTAR","NTL Incorporated","Nucor Corp","Nvidia Corp","NVR Inc","Northwest Airlines Corp","Occidental Petroleum Corp","Ocean Energy Inc","Office Depot Inc.","OfficeMax Inc","OGE Energy Corp","Oglethorpe Power Corp.","Ohio Casualty Corp.","Old Republic International Corp.","Olin Corp.","OM Group Inc","Omnicare Inc","Omnicom Group","On Semiconductor Corp","ONEOK Inc","Oracle Corp","Oshkosh Truck Corp","Outback Steakhouse Inc.","Owens & Minor Inc.","Owens Corning","Owens-Illinois Inc","Oxford Health Plans Inc","Paccar Inc","PacifiCare Health Systems Inc","Packaging Corp. of America","Pactiv Corp","Pall Corp","Pantry Inc","Park Place Entertainment Corp","Parker Hannifin Corp.","Pathmark Stores Inc.","Paychex Inc","Payless Shoesource Inc","Penn Traffic Co.","Pennzoil-Quaker State Company","Pentair Inc","Peoples Energy Corp.","PeopleSoft Inc","Pep Boys Manny, Moe & Jack","Potomac Electric Power Co.","Pepsi Bottling Group Inc.","PepsiAmericas Inc.","PepsiCo Inc.","Performance Food Group Co.","Perini Corp","PerkinElmer Inc","Perot Systems Corp","Petco Animal Supplies Inc.","Peter Kiewit Sons', Inc.","PETsMART Inc","Pfizer Inc","Pacific Gas & Electric Corp.","Pharmacia Corp","Phar Mor Inc.","Phelps Dodge Corp.","Philip Morris Companies Inc.","Phillips Petroleum Co","Phillips Van Heusen Corp.","Phoenix Companies Inc","Pier 1 Imports Inc.","Pilgrim's Pride Corporation","Pinnacle West Capital Corp","Pioneer-Standard Electronics Inc.","Pitney Bowes Inc.","Pittston Brinks Group","Plains All American Pipeline LP","PNC Financial Services Group Inc.","PNM Resources Inc","Polaris Industries Inc.","Polo Ralph Lauren Corp","PolyOne Corp","Popular Inc","Potlatch Corp","PPG Industries Inc","PPL Corp","Praxair Inc","Precision Castparts Corp","Premcor Inc.","Pride International Inc","Primedia Inc","Principal Financial Group Inc.","Procter & Gamble Co.","Pro-Fac Cooperative Inc.","Progress Energy Inc","Progressive Corporation","Protective Life Corp","Provident Financial Group","Providian Financial Corp.","Prudential Financial Inc.","PSS World Medical Inc","Public Service Enterprise Group Inc.","Publix Super Markets Inc.","Puget Energy Inc.","Pulte Homes Inc","Qualcomm Inc","Quanta Services Inc.","Quantum Corp","Quest Diagnostics Inc.","Questar Corp","Quintiles Transnational","Qwest Communications Intl Inc","R.J. Reynolds Tobacco Company","R.R. Donnelley & Sons Company","Radio Shack Corporation","Raymond James Financial Inc.","Raytheon Company","Reader's Digest Association Inc.","Reebok International Ltd.","Regions Financial Corp.","Regis Corporation","Reliance Steel & Aluminum Co.","Reliant Energy Inc.","Rent A Center Inc","Republic Services Inc","Revlon Inc","RGS Energy Group Inc","Rite Aid Corp","Riverwood Holding Inc.","RoadwayCorp","Robert Half International Inc.","Rock-Tenn Co","Rockwell Automation Inc","Rockwell Collins Inc","Rohm & Haas Co.","Ross Stores Inc","RPM Inc.","Ruddick Corp","Ryder System Inc","Ryerson Tull Inc","Ryland Group Inc.","Sabre Holdings Corp","Safeco Corp","Safeguard Scientifics Inc.","Safeway Inc","Saks Inc","Sanmina-SCI Inc","Sara Lee Corp","SBC Communications Inc","Scana Corp.","Schering-Plough Corp","Scholastic Corp","SCI Systems Onc.","Science Applications Intl. Inc.","Scientific-Atlanta Inc","Scotts Company","Seaboard Corp","Sealed Air Corp","Sears Roebuck & Co","Sempra Energy","Sequa Corp","Service Corp. International","ServiceMaster Co","Shaw Group Inc","Sherwin-Williams Company","Shopko Stores Inc","Siebel Systems Inc","Sierra Health Services Inc","Sierra Pacific Resources","Silgan Holdings Inc.","Silicon Graphics Inc","Simon Property Group Inc","SLM Corporation","Smith International Inc","Smithfield Foods Inc","Smurfit-Stone Container Corp","Snap-On Inc","Solectron Corp","Solutia Inc","Sonic Automotive Inc.","Sonoco Products Co.","Southern Company","Southern Union Company","SouthTrust Corp.","Southwest Airlines Co","Southwest Gas Corp","Sovereign Bancorp Inc.","Spartan Stores Inc","Spherion Corp","Sports Authority Inc","Sprint Corp.","SPX Corp","St. Jude Medical Inc","St. Paul Cos.","Staff Leasing Inc.","StanCorp Financial Group Inc","Standard Pacific Corp.","Stanley Works","Staples Inc","Starbucks Corp","Starwood Hotels & Resorts Worldwide Inc","State Street Corp.","Stater Bros. Holdings Inc.","Steelcase Inc","Stein Mart Inc","Stewart & Stevenson Services Inc","Stewart Information Services Corp","Stilwell Financial Inc","Storage Technology Corporation","Stryker Corp","Sun Healthcare Group Inc.","Sun Microsystems Inc.","SunGard Data Systems Inc.","Sunoco Inc.","SunTrust Banks Inc","Supervalu Inc","Swift Transportation, Co., Inc","Symbol Technologies Inc","Synovus Financial Corp.","Sysco Corp","Systemax Inc.","Target Corp.","Tech Data Corporation","TECO Energy Inc","Tecumseh Products Company","Tektronix Inc","Teleflex Incorporated","Telephone & Data Systems Inc","Tellabs Inc.","Temple-Inland Inc","Tenet Healthcare Corporation","Tenneco Automotive Inc.","Teradyne Inc","Terex Corp","Tesoro Petroleum Corp.","Texas Industries Inc.","Texas Instruments Incorporated","Textron Inc","Thermo Electron Corporation","Thomas & Betts Corporation","Tiffany & Co","Timken Company","TJX Companies Inc","TMP Worldwide Inc","Toll Brothers Inc","Torchmark Corporation","Toro Company","Tower Automotive Inc.","Toys 'R' Us Inc","Trans World Entertainment Corp.","TransMontaigne Inc","Transocean Inc","TravelCenters of America Inc.","Triad Hospitals Inc","Tribune Company","Trigon Healthcare Inc.","Trinity Industries Inc","Trump Hotels & Casino Resorts Inc.","TruServ Corporation","TRW Inc","TXU Corp","Tyson Foods Inc","U.S. Bancorp","U.S. Industries Inc.","UAL Corporation","UGI Corporation","Unified Western Grocers Inc","Union Pacific Corporation","Union Planters Corp","Unisource Energy Corp","Unisys Corporation","United Auto Group Inc","United Defense Industries Inc.","United Parcel Service Inc","United Rentals Inc","United Stationers Inc","United Technologies Corporation","UnitedHealth Group Incorporated","Unitrin Inc","Universal Corporation","Universal Forest Products Inc","Universal Health Services Inc","Unocal Corporation","Unova Inc","UnumProvident Corporation","URS Corporation","US Airways Group Inc","US Oncology Inc","USA Interactive","USFreighways Corporation","USG Corporation","UST Inc","Valero Energy Corporation","Valspar Corporation","Value City Department Stores Inc","Varco International Inc","Vectren Corporation","Veritas Software Corporation","Verizon Communications Inc","VF Corporation","Viacom Inc","Viad Corp","Viasystems Group Inc","Vishay Intertechnology Inc","Visteon Corporation","Volt Information Sciences Inc","Vulcan Materials Company","W.R. Berkley Corporation","W.R. Grace & Co","W.W. Grainger Inc","Wachovia Corporation","Wakenhut Corporation","Walgreen Co","Wallace Computer Services Inc","Wal-Mart Stores Inc","Walt Disney Co","Walter Industries Inc","Washington Mutual Inc","Washington Post Co.","Waste Management Inc","Watsco Inc","Weatherford International Inc","Weis Markets Inc.","Wellpoint Health Networks Inc","Wells Fargo & Company","Wendy's International Inc","Werner Enterprises Inc","WESCO International Inc","Western Digital Inc","Western Gas Resources Inc","WestPoint Stevens Inc","Weyerhauser Company","WGL Holdings Inc","Whirlpool Corporation","Whole Foods Market Inc","Willamette Industries Inc.","Williams Companies Inc","Williams Sonoma Inc","Winn Dixie Stores Inc","Wisconsin Energy Corporation","Wm Wrigley Jr Company","World Fuel Services Corporation","WorldCom Inc","Worthington Industries Inc","WPS Resources Corporation","Wyeth","Wyndham International Inc","Xcel Energy Inc","Xerox Corp","Xilinx Inc","XO Communications Inc","Yellow Corporation","York International Corp","Yum Brands Inc.","Zale Corporation","Zions Bancorporation"],fileExtension:{raster:["bmp","gif","gpl","ico","jpeg","psd","png","psp","raw","tiff"],vector:["3dv","amf","awg","ai","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","odg","svg","xar"],"3d":["3dmf","3dm","3mf","3ds","an8","aoi","blend","cal3d","cob","ctm","iob","jas","max","mb","mdx","obj","x","x3d"],document:["doc","docx","dot","html","xml","odt","odm","ott","csv","rtf","tex","xhtml","xps"]},timezones:[{name:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:false,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{name:"UTC-11",abbr:"U",offset:-11,isdst:false,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{name:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:false,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{name:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:true,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{name:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:true,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{name:"Pacific Standard Time",abbr:"PDT",offset:-7,isdst:true,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{name:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:false,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{name:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:true,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{name:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:true,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{name:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:false,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{name:"Central Standard Time",abbr:"CDT",offset:-5,isdst:true,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{name:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:true,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{name:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:false,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{name:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:false,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{name:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:true,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{name:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:true,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{name:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:false,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{name:"Paraguay Standard Time",abbr:"PST",offset:-4,isdst:false,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{name:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:true,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{name:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:false,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{name:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:false,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{name:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:false,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{name:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:true,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{name:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:false,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{name:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:false,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{name:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:false,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{name:"Greenland Standard Time",abbr:"GDT",offset:-2,isdst:true,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{name:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:false,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{name:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:false,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{name:"UTC-02",abbr:"U",offset:-2,isdst:false,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{name:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:true,text:"(UTC-02:00) Mid-Atlantic - Old"},{name:"Azores Standard Time",abbr:"ADT",offset:0,isdst:true,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{name:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:false,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{name:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:true,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{name:"UTC",abbr:"CUT",offset:0,isdst:false,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{name:"GMT Standard Time",abbr:"GDT",offset:1,isdst:true,text:"(UTC) Dublin, Edinburgh, Lisbon, London",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London"]},{name:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:false,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{name:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:true,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{name:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:true,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{name:"Romance Standard Time",abbr:"RDT",offset:2,isdst:true,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{name:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:true,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{name:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:false,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{name:"Namibia Standard Time",abbr:"NST",offset:1,isdst:false,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{name:"GTB Standard Time",abbr:"GDT",offset:3,isdst:true,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{name:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:true,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{name:"Egypt Standard Time",abbr:"EST",offset:2,isdst:false,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{name:"Syria Standard Time",abbr:"SDT",offset:3,isdst:true,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{name:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:true,text:"(UTC+02:00) E. Europe"},{name:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:false,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{name:"FLE Standard Time",abbr:"FDT",offset:3,isdst:true,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{name:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:true,text:"(UTC+02:00) Istanbul",utc:["Europe/Istanbul"]},{name:"Israel Standard Time",abbr:"JDT",offset:3,isdst:true,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{name:"Libya Standard Time",abbr:"LST",offset:2,isdst:false,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{name:"Jordan Standard Time",abbr:"JST",offset:3,isdst:false,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{name:"Arabic Standard Time",abbr:"AST",offset:3,isdst:false,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{name:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:false,text:"(UTC+03:00) Kaliningrad, Minsk",utc:["Europe/Kaliningrad","Europe/Minsk"]},{name:"Arab Standard Time",abbr:"AST",offset:3,isdst:false,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{name:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:false,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{name:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:true,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{name:"Arabian Standard Time",abbr:"AST",offset:4,isdst:false,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{name:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:true,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{name:"Russian Standard Time",abbr:"RST",offset:4,isdst:false,text:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",utc:["Europe/Moscow","Europe/Samara","Europe/Simferopol","Europe/Volgograd"]},{name:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:false,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{name:"Georgian Standard Time",abbr:"GST",offset:4,isdst:false,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{name:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:false,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{name:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:false,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{name:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:false,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{name:"Pakistan Standard Time",abbr:"PST",offset:5,isdst:false,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{name:"India Standard Time",abbr:"IST",offset:5.5,isdst:false,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Calcutta"]},{name:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:false,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{name:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:false,text:"(UTC+05:45) Kathmandu",utc:["Asia/Katmandu"]},{name:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:false,text:"(UTC+06:00) Astana",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{name:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:false,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{name:"Ekaterinburg Standard Time",abbr:"EST",offset:6,isdst:false,text:"(UTC+06:00) Ekaterinburg",utc:["Asia/Yekaterinburg"]},{name:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:false,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{name:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:false,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{name:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:false,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{name:"China Standard Time",abbr:"CST",offset:8,isdst:false,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{name:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:false,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{name:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:false,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{name:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:false,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{name:"Taipei Standard Time",abbr:"TST",offset:8,isdst:false,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{name:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:false,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{name:"North Asia East Standard Time",abbr:"NAEST",offset:9,isdst:false,text:"(UTC+09:00) Irkutsk",utc:["Asia/Irkutsk"]},{name:"Tokyo Standard Time",abbr:"TST",offset:9,isdst:false,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{name:"Korea Standard Time",abbr:"KST",offset:9,isdst:false,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{name:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:false,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{name:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:false,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{name:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:false,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{name:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:false,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{name:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:false,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{name:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:false,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{name:"Yakutsk Standard Time",abbr:"YST",offset:10,isdst:false,text:"(UTC+10:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{name:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:false,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{name:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:false,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{name:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:false,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{name:"UTC+12",abbr:"U",offset:12,isdst:false,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{name:"Fiji Standard Time",abbr:"FST",offset:12,isdst:false,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{name:"Magadan Standard Time",abbr:"MST",offset:12,isdst:false,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{name:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:true,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{name:"Tonga Standard Time",abbr:"TST",offset:13,isdst:false,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{name:"Samoa Standard Time",abbr:"SST",offset:13,isdst:false,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}],profession:["Airline Pilot","Academic Team","Accountant","Account Executive","Actor","Actuary","Acquisition Analyst","Administrative Asst.","Administrative Analyst","Administrator","Advertising Director","Aerospace Engineer","Agent","Agricultural Inspector","Agricultural Scientist","Air Traffic Controller","Animal Trainer","Anthropologist","Appraiser","Architect","Art Director","Artist","Astronomer","Athletic Coach","Auditor","Author","Baker","Banker","Bankruptcy Attorney","Benefits Manager","Biologist","Bio-feedback Specialist","Biomedical Engineer","Biotechnical Researcher","Broadcaster","Broker","Building Manager","Building Contractor","Building Inspector","Business Analyst","Business Planner","Business Manager","Buyer","Call Center Manager","Career Counselor","Cash Manager","Ceramic Engineer","Chief Executive Officer","Chief Operation Officer","Chef","Chemical Engineer","Chemist","Child Care Manager","Chief Medical Officer","Chiropractor","Cinematographer","City Housing Manager","City Manager","Civil Engineer","Claims Manager","Clinical Research Assistant","Collections Manager","Compliance Manager","Comptroller","Computer Manager","Commercial Artist","Communications Affairs Director","Communications Director","Communications Engineer","Compensation Analyst","Computer Programmer","Computer Ops. Manager","Computer Engineer","Computer Operator","Computer Graphics Specialist","Construction Engineer","Construction Manager","Consultant","Consumer Relations Manager","Contract Administrator","Copyright Attorney","Copywriter","Corporate Planner","Corrections Officer","Cosmetologist","Credit Analyst","Cruise Director","Chief Information Officer","Chief Technology Officer","Customer Service Manager","Cryptologist","Dancer","Data Security Manager","Database Manager","Day Care Instructor","Dentist","Designer","Design Engineer","Desktop Publisher","Developer","Development Officer","Diamond Merchant","Dietitian","Direct Marketer","Director","Distribution Manager","Diversity Manager","Economist","EEO Compliance Manager","Editor","Education Adminator","Electrical Engineer","Electro Optical Engineer","Electronics Engineer","Embassy Management","Employment Agent","Engineer Technician","Entrepreneur","Environmental Analyst","Environmental Attorney","Environmental Engineer","Environmental Specialist","Escrow Officer","Estimator","Executive Assistant","Executive Director","Executive Recruiter","Facilities Manager","Family Counselor","Fashion Events Manager","Fashion Merchandiser","Fast Food Manager","Film Producer","Film Production Assistant","Financial Analyst","Financial Planner","Financier","Fine Artist","Wildlife Specialist","Fitness Consultant","Flight Attendant","Flight Engineer","Floral Designer","Food & Beverage Director","Food Service Manager","Forestry Technician","Franchise Management","Franchise Sales","Fraud Investigator","Freelance Writer","Fund Raiser","General Manager","Geologist","General Counsel","Geriatric Specialist","Gerontologist","Glamour Photographer","Golf Club Manager","Gourmet Chef","Graphic Designer","Grounds Keeper","Hazardous Waste Manager","Health Care Manager","Health Therapist","Health Service Administrator","Hearing Officer","Home Economist","Horticulturist","Hospital Administrator","Hotel Manager","Human Resources Manager","Importer","Industrial Designer","Industrial Engineer","Information Director","Inside Sales","Insurance Adjuster","Interior Decorator","Internal Controls Director","International Acct.","International Courier","International Lawyer","Interpreter","Investigator","Investment Banker","Investment Manager","IT Architect","IT Project Manager","IT Systems Analyst","Jeweler","Joint Venture Manager","Journalist","Labor Negotiator","Labor Organizer","Labor Relations Manager","Lab Services Director","Lab Technician","Land Developer","Landscape Architect","Law Enforcement Officer","Lawyer","Lead Software Engineer","Lead Software Test Engineer","Leasing Manager","Legal Secretary","Library Manager","Litigation Attorney","Loan Officer","Lobbyist","Logistics Manager","Maintenance Manager","Management Consultant","Managed Care Director","Managing Partner","Manufacturing Director","Manpower Planner","Marine Biologist","Market Res. Analyst","Marketing Director","Materials Manager","Mathematician","Membership Chairman","Mechanic","Mechanical Engineer","Media Buyer","Medical Investor","Medical Secretary","Medical Technician","Mental Health Counselor","Merchandiser","Metallurgical Engineering","Meteorologist","Microbiologist","MIS Manager","Motion Picture Director","Multimedia Director","Musician","Network Administrator","Network Specialist","Network Operator","New Product Manager","Novelist","Nuclear Engineer","Nuclear Specialist","Nutritionist","Nursing Administrator","Occupational Therapist","Oceanographer","Office Manager","Operations Manager","Operations Research Director","Optical Technician","Optometrist","Organizational Development Manager","Outplacement Specialist","Paralegal","Park Ranger","Patent Attorney","Payroll Specialist","Personnel Specialist","Petroleum Engineer","Pharmacist","Photographer","Physical Therapist","Physician","Physician Assistant","Physicist","Planning Director","Podiatrist","Political Analyst","Political Scientist","Politician","Portfolio Manager","Preschool Management","Preschool Teacher","Principal","Private Banker","Private Investigator","Probation Officer","Process Engineer","Producer","Product Manager","Product Engineer","Production Engineer","Production Planner","Professional Athlete","Professional Coach","Professor","Project Engineer","Project Manager","Program Manager","Property Manager","Public Administrator","Public Safety Director","PR Specialist","Publisher","Purchasing Agent","Publishing Director","Quality Assurance Specialist","Quality Control Engineer","Quality Control Inspector","Radiology Manager","Railroad Engineer","Real Estate Broker","Recreational Director","Recruiter","Redevelopment Specialist","Regulatory Affairs Manager","Registered Nurse","Rehabilitation Counselor","Relocation Manager","Reporter","Research Specialist","Restaurant Manager","Retail Store Manager","Risk Analyst","Safety Engineer","Sales Engineer","Sales Trainer","Sales Promotion Manager","Sales Representative","Sales Manager","Service Manager","Sanitation Engineer","Scientific Programmer","Scientific Writer","Securities Analyst","Security Consultant","Security Director","Seminar Presenter","Ship's Officer","Singer","Social Director","Social Program Planner","Social Research","Social Scientist","Social Worker","Sociologist","Software Developer","Software Engineer","Software Test Engineer","Soil Scientist","Special Events Manager","Special Education Teacher","Special Projects Director","Speech Pathologist","Speech Writer","Sports Event Manager","Statistician","Store Manager","Strategic Alliance Director","Strategic Planning Director","Stress Reduction Specialist","Stockbroker","Surveyor","Structural Engineer","Superintendent","Supply Chain Director","System Engineer","Systems Analyst","Systems Programmer","System Administrator","Tax Specialist","Teacher","Technical Support Specialist","Technical Illustrator","Technical Writer","Technology Director","Telecom Analyst","Telemarketer","Theatrical Director","Title Examiner","Tour Escort","Tour Guide Director","Traffic Manager","Trainer Translator","Transportation Manager","Travel Agent","Treasurer","TV Programmer","Underwriter","Union Representative","University Administrator","University Dean","Urban Planner","Veterinarian","Vendor Relations Director","Viticulturist","Warehouse Manager"],animals:{ocean:["Acantharea","Anemone","Angelfish King","Ahi Tuna","Albacore","American Oyster","Anchovy","Armored Snail","Arctic Char","Atlantic Bluefin Tuna","Atlantic Cod","Atlantic Goliath Grouper","Atlantic Trumpetfish","Atlantic Wolffish","Baleen Whale","Banded Butterflyfish","Banded Coral Shrimp","Banded Sea Krait","Barnacle","Barndoor Skate","Barracuda","Basking Shark","Bass","Beluga Whale","Bluebanded Goby","Bluehead Wrasse","Bluefish","Bluestreak Cleaner-Wrasse","Blue Marlin","Blue Shark","Blue Spiny Lobster","Blue Tang","Blue Whale","Broadclub Cuttlefish","Bull Shark","Chambered Nautilus","Chilean Basket Star","Chilean Jack Mackerel","Chinook Salmon","Christmas Tree Worm","Clam","Clown Anemonefish","Clown Triggerfish","Cod","Coelacanth","Cockscomb Cup Coral","Common Fangtooth","Conch","Cookiecutter Shark","Copepod","Coral","Corydoras","Cownose Ray","Crab","Crown-of-Thorns Starfish","Cushion Star","Cuttlefish","California Sea Otters","Dolphin","Dolphinfish","Dory","Devil Fish","Dugong","Dumbo Octopus","Dungeness Crab","Eccentric Sand Dollar","Edible Sea Cucumber","Eel","Elephant Seal","Elkhorn Coral","Emperor Shrimp","Estuarine Crocodile","Fathead Sculpin","Fiddler Crab","Fin Whale","Flameback","Flamingo Tongue Snail","Flashlight Fish","Flatback Turtle","Flatfish","Flying Fish","Flounder","Fluke","French Angelfish","Frilled Shark","Fugu (also called Pufferfish)","Gar","Geoduck","Giant Barrel Sponge","Giant Caribbean Sea Anemone","Giant Clam","Giant Isopod","Giant Kingfish","Giant Oarfish","Giant Pacific Octopus","Giant Pyrosome","Giant Sea Star","Giant Squid","Glowing Sucker Octopus","Giant Tube Worm","Goblin Shark","Goosefish","Great White Shark","Greenland Shark","Grey Atlantic Seal","Grouper","Grunion","Guineafowl Puffer","Haddock","Hake","Halibut","Hammerhead Shark","Hapuka","Harbor Porpoise","Harbor Seal","Hatchetfish","Hawaiian Monk Seal","Hawksbill Turtle","Hector's Dolphin","Hermit Crab","Herring","Hoki","Horn Shark","Horseshoe Crab","Humpback Anglerfish","Humpback Whale","Icefish","Imperator Angelfish","Irukandji Jellyfish","Isopod","Ivory Bush Coral","Japanese Spider Crab","Jellyfish","John Dory","Juan Fernandez Fur Seal","Killer Whale","Kiwa Hirsuta","Krill","Lagoon Triggerfish","Lamprey","Leafy Seadragon","Leopard Seal","Limpet","Ling","Lionfish","Lions Mane Jellyfish","Lobe Coral","Lobster","Loggerhead Turtle","Longnose Sawshark","Longsnout Seahorse","Lophelia Coral","Marrus Orthocanna","Manatee","Manta Ray","Marlin","Megamouth Shark","Mexican Lookdown","Mimic Octopus","Moon Jelly","Mollusk","Monkfish","Moray Eel","Mullet","Mussel","Megaladon","Napoleon Wrasse","Nassau Grouper","Narwhal","Nautilus","Needlefish","Northern Seahorse","North Atlantic Right Whale","Northern Red Snapper","Norway Lobster","Nudibranch","Nurse Shark","Oarfish","Ocean Sunfish","Oceanic Whitetip Shark","Octopus","Olive Sea Snake","Orange Roughy","Ostracod","Otter","Oyster","Pacific Angelshark","Pacific Blackdragon","Pacific Halibut","Pacific Sardine","Pacific Sea Nettle Jellyfish","Pacific White Sided Dolphin","Pantropical Spotted Dolphin","Patagonian Toothfish","Peacock Mantis Shrimp","Pelagic Thresher Shark","Penguin","Peruvian Anchoveta","Pilchard","Pink Salmon","Pinniped","Plankton","Porpoise","Polar Bear","Portuguese Man o' War","Pycnogonid Sea Spider","Quahog","Queen Angelfish","Queen Conch","Queen Parrotfish","Queensland Grouper","Ragfish","Ratfish","Rattail Fish","Ray","Red Drum","Red King Crab","Ringed Seal","Risso's Dolphin","Ross Seals","Sablefish","Salmon","Sand Dollar","Sandbar Shark","Sawfish","Sarcastic Fringehead","Scalloped Hammerhead Shark","Seahorse","Sea Cucumber","Sea Lion","Sea Urchin","Seal","Shark","Shortfin Mako Shark","Shovelnose Guitarfish","Shrimp","Silverside Fish","Skipjack Tuna","Slender Snipe Eel","Smalltooth Sawfish","Smelts","Sockeye Salmon","Southern Stingray","Sponge","Spotted Porcupinefish","Spotted Dolphin","Spotted Eagle Ray","Spotted Moray","Squid","Squidworm","Starfish","Stickleback","Stonefish","Stoplight Loosejaw","Sturgeon","Swordfish","Tan Bristlemouth","Tasseled Wobbegong","Terrible Claw Lobster","Threespot Damselfish","Tiger Prawn","Tiger Shark","Tilefish","Toadfish","Tropical Two-Wing Flyfish","Tuna","Umbrella Squid","Velvet Crab","Venus Flytrap Sea Anemone","Vigtorniella Worm","Viperfish","Vampire Squid","Vaquita","Wahoo","Walrus","West Indian Manatee","Whale","Whale Shark","Whiptail Gulper","White-Beaked Dolphin","White-Ring Garden Eel","White Shrimp","Wobbegong","Wrasse","Wreckfish","Xiphosura","Yellowtail Damselfish","Yelloweye Rockfish","Yellow Cup Black Coral","Yellow Tube Sponge","Yellowfin Tuna","Zebrashark","Zooplankton"],desert:["Aardwolf","Addax","African Wild Ass","Ant","Antelope","Armadillo","Baboon","Badger","Bat","Bearded Dragon","Beetle","Bird","Black-footed Cat","Boa","Brown Bear","Bustard","Butterfly","Camel","Caracal","Caracara","Caterpillar","Centipede","Cheetah","Chipmunk","Chuckwalla","Climbing Mouse","Coati","Cobra","Cotton Rat","Cougar","Courser","Crane Fly","Crow","Dassie Rat","Dove","Dunnart","Eagle","Echidna","Elephant","Emu","Falcon","Fly","Fox","Frogmouth","Gecko","Geoffroy's Cat","Gerbil","Grasshopper","Guanaco","Gundi","Hamster","Hawk","Hedgehog","Hyena","Hyrax","Jackal","Kangaroo","Kangaroo Rat","Kestrel","Kowari","Kultarr","Leopard","Lion","Macaw","Meerkat","Mouse","Oryx","Ostrich","Owl","Pronghorn","Python","Rabbit","Raccoon","Rattlesnake","Rhinoceros","Sand Cat","Spectacled Bear","Spiny Mouse","Starling","Stick Bug","Tarantula","Tit","Toad","Tortoise","Tyrant Flycatcher","Viper","Vulture","Waxwing","Xerus","Zebra"],grassland:["Aardvark","Aardwolf","Accentor","African Buffalo","African Wild Dog","Alpaca","Anaconda","Ant","Anteater","Antelope","Armadillo","Baboon","Badger","Bandicoot","Barbet","Bat","Bee","Bee-eater","Beetle","Bird","Bison","Black-footed Cat","Black-footed Ferret","Bluebird","Boa","Bowerbird","Brown Bear","Bush Dog","Bushshrike","Bustard","Butterfly","Buzzard","Caracal","Caracara","Cardinal","Caterpillar","Cheetah","Chipmunk","Civet","Climbing Mouse","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Common Genet","Cotton Rat","Cougar","Courser","Coyote","Crane","Crane Fly","Cricket","Crow","Culpeo","Death Adder","Deer","Deer Mouse","Dingo","Dinosaur","Dove","Drongo","Duck","Duiker","Dunnart","Eagle","Echidna","Elephant","Elk","Emu","Falcon","Finch","Flea","Fly","Flying Frog","Fox","Frog","Frogmouth","Garter Snake","Gazelle","Gecko","Geoffroy's Cat","Gerbil","Giant Tortoise","Giraffe","Grasshopper","Grison","Groundhog","Grouse","Guanaco","Guinea Pig","Hamster","Harrier","Hartebeest","Hawk","Hedgehog","Helmetshrike","Hippopotamus","Hornbill","Hyena","Hyrax","Impala","Jackal","Jaguar","Jaguarundi","Kangaroo","Kangaroo Rat","Kestrel","Kultarr","Ladybug","Leopard","Lion","Macaw","Meerkat","Mouse","Newt","Oryx","Ostrich","Owl","Pangolin","Pheasant","Prairie Dog","Pronghorn","Przewalski's Horse","Python","Quoll","Rabbit","Raven","Rhinoceros","Shelduck","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Tamandua","Tasmanian Devil","Thornbill","Thrush","Toad","Tortoise"],forest:["Agouti","Anaconda","Anoa","Ant","Anteater","Antelope","Armadillo","Asian Black Bear","Aye-aye","Babirusa","Baboon","Badger","Bandicoot","Banteng","Barbet","Basilisk","Bat","Bearded Dragon","Bee","Bee-eater","Beetle","Bettong","Binturong","Bird-of-paradise","Bongo","Bowerbird","Bulbul","Bush Dog","Bushbaby","Bushshrike","Butterfly","Buzzard","Caecilian","Cardinal","Cassowary","Caterpillar","Centipede","Chameleon","Chimpanzee","Cicada","Civet","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Colugo","Cotinga","Cotton Rat","Cougar","Crane Fly","Cricket","Crocodile","Crow","Cuckoo","Cuscus","Death Adder","Deer","Dhole","Dingo","Dinosaur","Drongo","Duck","Duiker","Eagle","Echidna","Elephant","Finch","Flat-headed Cat","Flea","Flowerpecker","Fly","Flying Frog","Fossa","Frog","Frogmouth","Gaur","Gecko","Gorilla","Grison","Hawaiian Honeycreeper","Hawk","Hedgehog","Helmetshrike","Hornbill","Hyrax","Iguana","Jackal","Jaguar","Jaguarundi","Kestrel","Ladybug","Lemur","Leopard","Lion","Macaw","Mandrill","Margay","Monkey","Mouse","Mouse Deer","Newt","Okapi","Old World Flycatcher","Orangutan","Owl","Pangolin","Peafowl","Pheasant","Possum","Python","Quokka","Rabbit","Raccoon","Red Panda","Red River Hog","Rhinoceros","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Sun Bear","Tamandua","Tamarin","Tapir","Tarantula","Thrush","Tiger","Tit","Toad","Tortoise","Toucan","Trogon","Trumpeter","Turaco","Turtle","Tyrant Flycatcher","Viper","Vulture","Wallaby","Warbler","Wasp","Waxwing","Weaver","Weaver-finch","Whistler","White-eye","Whydah","Woodswallow","Worm","Wren","Xenops","Yellowjacket","Accentor","African Buffalo","American Black Bear","Anole","Bird","Bison","Boa","Brown Bear","Chipmunk","Common Genet","Copperhead","Coyote","Deer Mouse","Dormouse","Elk","Emu","Fisher","Fox","Garter Snake","Giant Panda","Giant Tortoise","Groundhog","Grouse","Guanaco","Himalayan Tahr","Kangaroo","Koala","Numbat","Quoll","Raccoon dog","Tasmanian Devil","Thornbill","Turkey","Vole","Weasel","Wildcat","Wolf","Wombat","Woodchuck","Woodpecker"],farm:["Alpaca","Buffalo","Banteng","Cow","Cat","Chicken","Carp","Camel","Donkey","Dog","Duck","Emu","Goat","Gayal","Guinea","Goose","Horse","Honey","Llama","Pig","Pigeon","Rhea","Rabbit","Sheep","Silkworm","Turkey","Yak","Zebu"],pet:["Bearded Dragon","Birds","Burro","Cats","Chameleons","Chickens","Chinchillas","Chinese Water Dragon","Cows","Dogs","Donkey","Ducks","Ferrets","Fish","Geckos","Geese","Gerbils","Goats","Guinea Fowl","Guinea Pigs","Hamsters","Hedgehogs","Horses","Iguanas","Llamas","Lizards","Mice","Mule","Peafowl","Pigs and Hogs","Pigeons","Ponies","Pot Bellied Pig","Rabbits","Rats","Sheep","Skinks","Snakes","Stick Insects","Sugar Gliders","Tarantula","Turkeys","Turtles"],zoo:["Aardvark","African Wild Dog","Aldabra Tortoise","American Alligator","American Bison","Amur Tiger","Anaconda","Andean Condor","Asian Elephant","Baby Doll Sheep","Bald Eagle","Barred Owl","Blue Iguana","Boer Goat","California Sea Lion","Caribbean Flamingo","Chinchilla","Collared Lemur","Coquerel's Sifaka","Cuban Amazon Parrot","Ebony Langur","Fennec Fox","Fossa","Gelada","Giant Anteater","Giraffe","Gorilla","Grizzly Bear","Henkel's Leaf-tailed Gecko","Indian Gharial","Indian Rhinoceros","King Cobra","King Vulture","Komodo Dragon","Linne's Two-toed Sloth","Lion","Little Penguin","Madagascar Tree Boa","Magellanic Penguin","Malayan Tapir","Malayan Tiger","Matschies Tree Kangaroo","Mini Donkey","Monarch Butterfly","Nile crocodile","North American Porcupine","Nubian Ibex","Okapi","Poison Dart Frog","Polar Bear","Pygmy Marmoset","Radiated Tortoise","Red Panda","Red Ruffed Lemur","Ring-tailed Lemur","Ring-tailed Mongoose","Rock Hyrax","Small Clawed Asian Otter","Snow Leopard","Snowy Owl","Southern White-faced Owl","Southern White Rhinocerous","Squirrel Monkey","Tufted Puffin","White Cheeked Gibbon","White-throated Bee Eater","Zebra"]},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007],emotions:["love","joy","surprise","anger","sadness","fear"]};var o_hasOwnProperty=Object.prototype.hasOwnProperty;var o_keys=Object.keys||function(obj){var result=[];for(var key in obj){if(o_hasOwnProperty.call(obj,key)){result.push(key)}}return result};function _copyObject(source,target){var keys=o_keys(source);var key;for(var i=0,l=keys.length;i<l;i++){key=keys[i];target[key]=source[key]||target[key]}}function _copyArray(source,target){for(var i=0,l=source.length;i<l;i++){target[i]=source[i]}}function copyObject(source,_target){var isArray=Array.isArray(source);var target=_target||(isArray?new Array(source.length):{});if(isArray){_copyArray(source,target)}else{_copyObject(source,target)}return target}Chance.prototype.get=function(name){return copyObject(data[name])};Chance.prototype.mac_address=function(options){options=initOptions(options);if(!options.separator){options.separator=options.networkVersion?".":":"}var mac_pool="ABCDEF1234567890",mac="";if(!options.networkVersion){mac=this.n(this.string,6,{pool:mac_pool,length:2}).join(options.separator)}else{mac=this.n(this.string,3,{pool:mac_pool,length:4}).join(options.separator)}return mac};Chance.prototype.normal=function(options){options=initOptions(options,{mean:0,dev:1,pool:[]});testRange(options.pool.constructor!==Array,"Chance: The pool option must be a valid array.");testRange(typeof options.mean!=="number","Chance: Mean (mean) must be a number");testRange(typeof options.dev!=="number","Chance: Standard deviation (dev) must be a number");if(options.pool.length>0){return this.normal_pool(options)}var s,u,v,norm,mean=options.mean,dev=options.dev;do{u=this.random()*2-1;v=this.random()*2-1;s=u*u+v*v}while(s>=1);norm=u*Math.sqrt(-2*Math.log(s)/s);return dev*norm+mean};Chance.prototype.normal_pool=function(options){var performanceCounter=0;do{var idx=Math.round(this.normal({mean:options.mean,dev:options.dev}));if(idx<options.pool.length&&idx>=0){return options.pool[idx]}else{performanceCounter++}}while(performanceCounter<100);throw new RangeError("Chance: Your pool is too small for the given mean and standard deviation. Please adjust.")};Chance.prototype.radio=function(options){options=initOptions(options,{side:"?"});var fl="";switch(options.side.toLowerCase()){case"east":case"e":fl="W";break;case"west":case"w":fl="K";break;default:fl=this.character({pool:"KW"});break}return fl+this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"})};Chance.prototype.set=function(name,values){if(typeof name==="string"){data[name]=values}else{data=copyObject(name,data)}};Chance.prototype.tv=function(options){return this.radio(options)};Chance.prototype.cnpj=function(){var n=this.n(this.natural,8,{max:9});var d1=2+n[7]*6+n[6]*7+n[5]*8+n[4]*9+n[3]*2+n[2]*3+n[1]*4+n[0]*5;d1=11-d1%11;if(d1>=10){d1=0}var d2=d1*2+3+n[7]*7+n[6]*8+n[5]*9+n[4]*2+n[3]*3+n[2]*4+n[1]*5+n[0]*6;d2=11-d2%11;if(d2>=10){d2=0}return""+n[0]+n[1]+"."+n[2]+n[3]+n[4]+"."+n[5]+n[6]+n[7]+"/0001-"+d1+d2};Chance.prototype.emotion=function(){return this.pick(this.get("emotions"))};Chance.prototype.mersenne_twister=function(seed){return new MersenneTwister(seed)};Chance.prototype.blueimp_md5=function(){return new BlueImpMD5};var MersenneTwister=function(seed){if(seed===undefined){seed=Math.floor(Math.random()*Math.pow(10,13))}this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=new Array(this.N);this.mti=this.N+1;this.init_genrand(seed)};MersenneTwister.prototype.init_genrand=function(s){this.mt[0]=s>>>0;for(this.mti=1;this.mti<this.N;this.mti++){s=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((s&4294901760)>>>16)*1812433253<<16)+(s&65535)*1812433253+this.mti;this.mt[this.mti]>>>=0}};MersenneTwister.prototype.init_by_array=function(init_key,key_length){var i=1,j=0,k,s;this.init_genrand(19650218);k=this.N>key_length?this.N:key_length;for(;k;k--){s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(((s&4294901760)>>>16)*1664525<<16)+(s&65535)*1664525)+init_key[j]+j;this.mt[i]>>>=0;i++;j++;if(i>=this.N){this.mt[0]=this.mt[this.N-1];i=1}if(j>=key_length){j=0}}for(k=this.N-1;k;k--){s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(((s&4294901760)>>>16)*1566083941<<16)+(s&65535)*1566083941)-i;this.mt[i]>>>=0;i++;if(i>=this.N){this.mt[0]=this.mt[this.N-1];i=1}}this.mt[0]=2147483648};MersenneTwister.prototype.genrand_int32=function(){var y;var mag01=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var kk;if(this.mti===this.N+1){this.init_genrand(5489)}for(kk=0;kk<this.N-this.M;kk++){y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK;this.mt[kk]=this.mt[kk+this.M]^y>>>1^mag01[y&1]}for(;kk<this.N-1;kk++){y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK;this.mt[kk]=this.mt[kk+(this.M-this.N)]^y>>>1^mag01[y&1]}y=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-1]^y>>>1^mag01[y&1];this.mti=0}y=this.mt[this.mti++];y^=y>>>11;y^=y<<7&2636928640;y^=y<<15&4022730752;y^=y>>>18;return y>>>0};MersenneTwister.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};MersenneTwister.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};MersenneTwister.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};MersenneTwister.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)};MersenneTwister.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return(a*67108864+b)*(1/9007199254740992)};var BlueImpMD5=function(){};BlueImpMD5.prototype.VERSION="1.0.1";BlueImpMD5.prototype.safe_add=function safe_add(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535};BlueImpMD5.prototype.bit_roll=function(num,cnt){return num<<cnt|num>>>32-cnt};BlueImpMD5.prototype.md5_cmn=function(q,a,b,x,s,t){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(a,q),this.safe_add(x,t)),s),b)};BlueImpMD5.prototype.md5_ff=function(a,b,c,d,x,s,t){return this.md5_cmn(b&c|~b&d,a,b,x,s,t)};BlueImpMD5.prototype.md5_gg=function(a,b,c,d,x,s,t){return this.md5_cmn(b&d|c&~d,a,b,x,s,t)};BlueImpMD5.prototype.md5_hh=function(a,b,c,d,x,s,t){return this.md5_cmn(b^c^d,a,b,x,s,t)};BlueImpMD5.prototype.md5_ii=function(a,b,c,d,x,s,t){return this.md5_cmn(c^(b|~d),a,b,x,s,t)};BlueImpMD5.prototype.binl_md5=function(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=this.md5_ff(a,b,c,d,x[i],7,-680876936);d=this.md5_ff(d,a,b,c,x[i+1],12,-389564586);c=this.md5_ff(c,d,a,b,x[i+2],17,606105819);b=this.md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=this.md5_ff(a,b,c,d,x[i+4],7,-176418897);d=this.md5_ff(d,a,b,c,x[i+5],12,1200080426);c=this.md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=this.md5_ff(b,c,d,a,x[i+7],22,-45705983);a=this.md5_ff(a,b,c,d,x[i+8],7,1770035416);d=this.md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=this.md5_ff(c,d,a,b,x[i+10],17,-42063);b=this.md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=this.md5_ff(a,b,c,d,x[i+12],7,1804603682);d=this.md5_ff(d,a,b,c,x[i+13],12,-40341101);c=this.md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=this.md5_ff(b,c,d,a,x[i+15],22,1236535329);a=this.md5_gg(a,b,c,d,x[i+1],5,-165796510);d=this.md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=this.md5_gg(c,d,a,b,x[i+11],14,643717713);b=this.md5_gg(b,c,d,a,x[i],20,-373897302);a=this.md5_gg(a,b,c,d,x[i+5],5,-701558691);d=this.md5_gg(d,a,b,c,x[i+10],9,38016083);c=this.md5_gg(c,d,a,b,x[i+15],14,-660478335);b=this.md5_gg(b,c,d,a,x[i+4],20,-405537848);a=this.md5_gg(a,b,c,d,x[i+9],5,568446438);d=this.md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=this.md5_gg(c,d,a,b,x[i+3],14,-187363961);b=this.md5_gg(b,c,d,a,x[i+8],20,1163531501);a=this.md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=this.md5_gg(d,a,b,c,x[i+2],9,-51403784);c=this.md5_gg(c,d,a,b,x[i+7],14,1735328473);b=this.md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=this.md5_hh(a,b,c,d,x[i+5],4,-378558);d=this.md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=this.md5_hh(c,d,a,b,x[i+11],16,1839030562);b=this.md5_hh(b,c,d,a,x[i+14],23,-35309556);a=this.md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=this.md5_hh(d,a,b,c,x[i+4],11,1272893353);c=this.md5_hh(c,d,a,b,x[i+7],16,-155497632);b=this.md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=this.md5_hh(a,b,c,d,x[i+13],4,681279174);d=this.md5_hh(d,a,b,c,x[i],11,-358537222);c=this.md5_hh(c,d,a,b,x[i+3],16,-722521979);b=this.md5_hh(b,c,d,a,x[i+6],23,76029189);a=this.md5_hh(a,b,c,d,x[i+9],4,-640364487);d=this.md5_hh(d,a,b,c,x[i+12],11,-421815835);c=this.md5_hh(c,d,a,b,x[i+15],16,530742520);b=this.md5_hh(b,c,d,a,x[i+2],23,-995338651);a=this.md5_ii(a,b,c,d,x[i],6,-198630844);d=this.md5_ii(d,a,b,c,x[i+7],10,1126891415);c=this.md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=this.md5_ii(b,c,d,a,x[i+5],21,-57434055);a=this.md5_ii(a,b,c,d,x[i+12],6,1700485571);d=this.md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=this.md5_ii(c,d,a,b,x[i+10],15,-1051523);b=this.md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=this.md5_ii(a,b,c,d,x[i+8],6,1873313359);d=this.md5_ii(d,a,b,c,x[i+15],10,-30611744);c=this.md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=this.md5_ii(b,c,d,a,x[i+13],21,1309151649);a=this.md5_ii(a,b,c,d,x[i+4],6,-145523070);d=this.md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=this.md5_ii(c,d,a,b,x[i+2],15,718787259);b=this.md5_ii(b,c,d,a,x[i+9],21,-343485551);a=this.safe_add(a,olda);b=this.safe_add(b,oldb);c=this.safe_add(c,oldc);d=this.safe_add(d,oldd)}return[a,b,c,d]};BlueImpMD5.prototype.binl2rstr=function(input){var i,output="";for(i=0;i<input.length*32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output};BlueImpMD5.prototype.rstr2binl=function(input){var i,output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}for(i=0;i<input.length*8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output};BlueImpMD5.prototype.rstr_md5=function(s){return this.binl2rstr(this.binl_md5(this.rstr2binl(s),s.length*8))};BlueImpMD5.prototype.rstr_hmac_md5=function(key,data){var i,bkey=this.rstr2binl(key),ipad=[],opad=[],hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=this.binl_md5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=this.binl_md5(ipad.concat(this.rstr2binl(data)),512+data.length*8);return this.binl2rstr(this.binl_md5(opad.concat(hash),512+128))};BlueImpMD5.prototype.rstr2hex=function(input){var hex_tab="0123456789abcdef",output="",x,i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(x&15)}return output};BlueImpMD5.prototype.str2rstr_utf8=function(input){return unescape(encodeURIComponent(input))};BlueImpMD5.prototype.raw_md5=function(s){return this.rstr_md5(this.str2rstr_utf8(s))};BlueImpMD5.prototype.hex_md5=function(s){return this.rstr2hex(this.raw_md5(s))};BlueImpMD5.prototype.raw_hmac_md5=function(k,d){return this.rstr_hmac_md5(this.str2rstr_utf8(k),this.str2rstr_utf8(d))};BlueImpMD5.prototype.hex_hmac_md5=function(k,d){return this.rstr2hex(this.raw_hmac_md5(k,d))};BlueImpMD5.prototype.md5=function(string,key,raw){if(!key){if(!raw){return this.hex_md5(string)}return this.raw_md5(string)}if(!raw){return this.hex_hmac_md5(key,string)}return this.raw_hmac_md5(key,string)};{if(module.exports){exports=module.exports=Chance}exports.Chance=Chance}if(typeof importScripts!=="undefined"){chance=new Chance;self.Chance=Chance}if(typeof window==="object"&&typeof window.document==="object"){window.Chance=Chance;window.chance=new Chance}})()})(chance$1$1,chance$1$1.exports);const groupByWhenCaseForScatterPlotAggregation="${ groupByFieldsForStatistics } WHEN (${ y } ${ yMinOperand } ${ yValue } AND ${ y } ${ yMaxOperand } ${ yValuePlusStep } AND ${ x } ${ xMinOperand } ${ xValue } AND ${ x } ${ xMaxOperand } ${ xValuePlusStep }) THEN '${ xValue }|${ xValuePlusStep}|${ yValue }|${ yValuePlusStep }'";async function getStatsForAggregation(props){const{chartConfig,queryObject,queryConfig,abortKey}=props;const series=chartConfig.series[0];const{x,y}=series;const{dataContextCountDistinctX,dataContextCountDistinctY}=ChartDefaults.scatterPlotAggregationFields;const modifiedQueryConfig={...queryConfig,outStatistics:[{statisticType:RESTStatisticType.Count,outStatisticFieldName:dataContextCountDistinctX,onStatisticField:x},{statisticType:RESTStatisticType.Count,outStatisticFieldName:dataContextCountDistinctY,onStatisticField:y}],returnDistinctValues:true};const aggregationStatsMap=await queryStatistics({queryObject,queryConfig:modifiedQueryConfig,abortKey});return aggregationStatsMap}function addWhenCase(props){const{groupByFieldsForStatistics,x,y,xValue,yValue,xStep,yStep,endOfRow,endOfColumn}=props;let newGroupByField=groupByFieldsForStatistics===""?GroupByKeywords.groupByCaseBegin:groupByFieldsForStatistics;newGroupByField=formatMessage(groupByWhenCaseForScatterPlotAggregation,{groupByFieldsForStatistics:newGroupByField,x,y,xValue:`${xValue}`,yValue:`${yValue}`,xValuePlusStep:`${xValue+(endOfColumn===true?0:xStep)}`,yValuePlusStep:`${yValue+(endOfRow===true?0:yStep)}`,xMinOperand:endOfColumn===true?"=":">=",yMinOperand:endOfRow===true?"=":">=",xMaxOperand:endOfColumn===true?"=":"<",yMaxOperand:endOfRow===true?"=":"<"});return newGroupByField}async function addAggregatedFeatures(props){const{chartConfig,queryConfig,queryObject,xMin,xMax,yMin,yMax,abortKey}=props;const series=chartConfig.series[0];const{x,y}=series;const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,`${x}>=${xMin}`,`${x}<=${xMax}`]);if(x!==y){modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,`${y}>=${yMin}`,`${y}<=${yMax}`])}return queryAllFeatures({queryObject,queryConfig:modifiedQueryConfig,noBatch:true,featureCount:1,abortKey})}async function fetchRawScatterPlotAggregatedData(props){const{statsMap,chartConfig,queryObject,queryConfig,options,abortKey}=props;const series=chartConfig.series[0];const{x,y}=series;const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField,dataContextCountDistinctX,dataContextCountDistinctY,queryNumberOfFeatures,queryNumberOfAggregatedFeatures}=ChartDefaults.scatterPlotAggregationFields;let rawScatterPlotAggregatedData=[];const xMin=statsMap?.get(dataContextXMinField)??NaN;const xMax=statsMap?.get(dataContextXMaxField)??NaN;const numberOfFeatures=statsMap?.get(queryNumberOfFeatures)??NaN;const yMin=statsMap?.get(dataContextYMinField)??xMin;const yMax=statsMap?.get(dataContextYMaxField)??xMax;if(Number.isNaN(xMin+xMax+yMin+yMax)===false){const layer=getLayerFromQueryObject(queryObject);const{maxScatterPointsAfterAggregation}=getChartLimits(options?.chartLimits);const{maxScatterCellsPerQuery:maxScatterCellsPerQueryDefault,maxScatterCellsPerQueryForStandard}=getChartTechnicalLimits();const isStandardDatabase=await isStandardLayer(layer);const maxScatterCellsPerQuery=isStandardDatabase===true?maxScatterCellsPerQueryForStandard:maxScatterCellsPerQueryDefault;const gridSize=maxScatterPointsAfterAggregation;const maxRowAndColumnCount=Math.floor(Math.sqrt(gridSize));const distinctCountsMap=await getStatsForAggregation({queryObject,chartConfig,queryConfig,abortKey});const rowCount=Math.min(distinctCountsMap.get(dataContextCountDistinctY)??NaN,maxRowAndColumnCount);const columnCount=Math.min(distinctCountsMap.get(dataContextCountDistinctX)??NaN,maxRowAndColumnCount);const realGridSize=columnCount*rowCount;const xStep=xMax===xMin?0:(xMax-xMin)/(columnCount-1);const yStep=yMax===yMin?0:(yMax-yMin)/(rowCount-1);let numberOfCells=0;const{objectIdField}=layer;const dataOutStatistics=new Map;const fieldList=await fetchLayerFieldsInfo(queryObject);fieldList?.forEach((field=>{if(isNumericField(field)===true){dataOutStatistics.set(field.name,{onStatisticField:field.name,outStatisticFieldName:field.name,statisticType:RESTStatisticType.Maximum})}}));const rendererFieldNames=await getRendererFieldNames(layer);rendererFieldNames.forEach((fieldName=>{dataOutStatistics.set(fieldName,{onStatisticField:fieldName,outStatisticFieldName:fieldName,statisticType:RESTStatisticType.Maximum})}));dataOutStatistics.set(objectIdField,{onStatisticField:objectIdField,outStatisticFieldName:queryNumberOfAggregatedFeatures,statisticType:RESTStatisticType.Count}).set(x,{onStatisticField:x,outStatisticFieldName:x,statisticType:RESTStatisticType.Maximum}).set(y,{onStatisticField:y,outStatisticFieldName:y,statisticType:RESTStatisticType.Maximum});const dataPromiseArray=[];let moreData=true;let xValue=xMin;let yValue=yMin;let groupByFieldsForStatistics="";let rowNumber=1;let columnNumber=1;let queryXMin=Number.MAX_SAFE_INTEGER;let queryXMax=Number.MIN_SAFE_INTEGER;let queryYMin=Number.MAX_SAFE_INTEGER;let queryYMax=Number.MIN_SAFE_INTEGER;while(columnNumber<=columnCount&&moreData===true){yValue=yMin;rowNumber=1;while(rowNumber<=rowCount&&moreData===true){groupByFieldsForStatistics=addWhenCase({groupByFieldsForStatistics,x,y,xValue,yValue,xStep,yStep,endOfRow:rowNumber===rowCount,endOfColumn:columnNumber===columnCount});if(xValue<queryXMin)queryXMin=xValue;if(xValue+xStep>queryXMax)queryXMax=xValue+xStep;if(yValue<queryYMin)queryYMin=yValue;if(yValue+xStep>queryYMax)queryYMax=yValue+yStep;numberOfCells+=1;if(numberOfCells%maxScatterCellsPerQuery===0||numberOfCells===realGridSize||numberOfCells===numberOfFeatures){groupByFieldsForStatistics=`${groupByFieldsForStatistics} ${GroupByKeywords.groupByCaseEnd}`;const modifiedQueryConfig={...queryConfig,groupByFieldsForStatistics:[groupByFieldsForStatistics],outStatistics:[...dataOutStatistics.values()]};dataPromiseArray.push(addAggregatedFeatures({chartConfig,queryConfig:modifiedQueryConfig,queryObject,xMin:queryXMin,xMax:queryXMax,yMin:queryYMin,yMax:queryYMax,abortKey}));queryXMin=Number.MAX_SAFE_INTEGER;queryXMax=Number.MIN_SAFE_INTEGER;queryYMin=Number.MAX_SAFE_INTEGER;queryYMax=Number.MIN_SAFE_INTEGER;groupByFieldsForStatistics="";if(numberOfCells===realGridSize)moreData=false}yValue+=yStep;rowNumber+=1}xValue+=xStep;columnNumber+=1}rawScatterPlotAggregatedData=(await Promise.all(dataPromiseArray)).flat()}return rawScatterPlotAggregatedData}var regression={exports:{}};(function(module,exports){(function(global,factory){{factory(module)}})(commonjsGlobal,(function(module){function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var DEFAULT_OPTIONS={order:2,precision:2,period:null};function determinationCoefficient(data,results){var predictions=[];var observations=[];data.forEach((function(d,i){if(d[1]!==null){observations.push(d);predictions.push(results[i])}}));var sum=observations.reduce((function(a,observation){return a+observation[1]}),0);var mean=sum/observations.length;var ssyy=observations.reduce((function(a,observation){var difference=observation[1]-mean;return a+difference*difference}),0);var sse=observations.reduce((function(accum,observation,index){var prediction=predictions[index];var residual=observation[1]-prediction[1];return accum+residual*residual}),0);return 1-sse/ssyy}function gaussianElimination(input,order){var matrix=input;var n=input.length-1;var coefficients=[order];for(var i=0;i<n;i++){var maxrow=i;for(var j=i+1;j<n;j++){if(Math.abs(matrix[i][j])>Math.abs(matrix[i][maxrow])){maxrow=j}}for(var k=i;k<n+1;k++){var tmp=matrix[k][i];matrix[k][i]=matrix[k][maxrow];matrix[k][maxrow]=tmp}for(var _j=i+1;_j<n;_j++){for(var _k=n;_k>=i;_k--){matrix[_k][_j]-=matrix[_k][i]*matrix[i][_j]/matrix[i][i]}}}for(var _j2=n-1;_j2>=0;_j2--){var total=0;for(var _k2=_j2+1;_k2<n;_k2++){total+=matrix[_k2][_j2]*coefficients[_k2]}coefficients[_j2]=(matrix[n][_j2]-total)/matrix[_j2][_j2]}return coefficients}function round(number,precision){var factor=Math.pow(10,precision);return Math.round(number*factor)/factor}var methods={linear:function linear(data,options){var sum=[0,0,0,0,0];var len=0;for(var n=0;n<data.length;n++){if(data[n][1]!==null){len++;sum[0]+=data[n][0];sum[1]+=data[n][1];sum[2]+=data[n][0]*data[n][0];sum[3]+=data[n][0]*data[n][1];sum[4]+=data[n][1]*data[n][1]}}var run=len*sum[2]-sum[0]*sum[0];var rise=len*sum[3]-sum[0]*sum[1];var gradient=run===0?0:round(rise/run,options.precision);var intercept=round(sum[1]/len-gradient*sum[0]/len,options.precision);var predict=function predict(x){return[round(x,options.precision),round(gradient*x+intercept,options.precision)]};var points=data.map((function(point){return predict(point[0])}));return{points,predict,equation:[gradient,intercept],r2:round(determinationCoefficient(data,points),options.precision),string:intercept===0?"y = "+gradient+"x":"y = "+gradient+"x + "+intercept}},exponential:function exponential(data,options){var sum=[0,0,0,0,0,0];for(var n=0;n<data.length;n++){if(data[n][1]!==null){sum[0]+=data[n][0];sum[1]+=data[n][1];sum[2]+=data[n][0]*data[n][0]*data[n][1];sum[3]+=data[n][1]*Math.log(data[n][1]);sum[4]+=data[n][0]*data[n][1]*Math.log(data[n][1]);sum[5]+=data[n][0]*data[n][1]}}var denominator=sum[1]*sum[2]-sum[5]*sum[5];var a=Math.exp((sum[2]*sum[3]-sum[5]*sum[4])/denominator);var b=(sum[1]*sum[4]-sum[5]*sum[3])/denominator;var coeffA=round(a,options.precision);var coeffB=round(b,options.precision);var predict=function predict(x){return[round(x,options.precision),round(coeffA*Math.exp(coeffB*x),options.precision)]};var points=data.map((function(point){return predict(point[0])}));return{points,predict,equation:[coeffA,coeffB],string:"y = "+coeffA+"e^("+coeffB+"x)",r2:round(determinationCoefficient(data,points),options.precision)}},logarithmic:function logarithmic(data,options){var sum=[0,0,0,0];var len=data.length;for(var n=0;n<len;n++){if(data[n][1]!==null){sum[0]+=Math.log(data[n][0]);sum[1]+=data[n][1]*Math.log(data[n][0]);sum[2]+=data[n][1];sum[3]+=Math.pow(Math.log(data[n][0]),2)}}var a=(len*sum[1]-sum[2]*sum[0])/(len*sum[3]-sum[0]*sum[0]);var coeffB=round(a,options.precision);var coeffA=round((sum[2]-coeffB*sum[0])/len,options.precision);var predict=function predict(x){return[round(x,options.precision),round(round(coeffA+coeffB*Math.log(x),options.precision),options.precision)]};var points=data.map((function(point){return predict(point[0])}));return{points,predict,equation:[coeffA,coeffB],string:"y = "+coeffA+" + "+coeffB+" ln(x)",r2:round(determinationCoefficient(data,points),options.precision)}},power:function power(data,options){var sum=[0,0,0,0,0];var len=data.length;for(var n=0;n<len;n++){if(data[n][1]!==null){sum[0]+=Math.log(data[n][0]);sum[1]+=Math.log(data[n][1])*Math.log(data[n][0]);sum[2]+=Math.log(data[n][1]);sum[3]+=Math.pow(Math.log(data[n][0]),2)}}var b=(len*sum[1]-sum[0]*sum[2])/(len*sum[3]-Math.pow(sum[0],2));var a=(sum[2]-b*sum[0])/len;var coeffA=round(Math.exp(a),options.precision);var coeffB=round(b,options.precision);var predict=function predict(x){return[round(x,options.precision),round(round(coeffA*Math.pow(x,coeffB),options.precision),options.precision)]};var points=data.map((function(point){return predict(point[0])}));return{points,predict,equation:[coeffA,coeffB],string:"y = "+coeffA+"x^"+coeffB,r2:round(determinationCoefficient(data,points),options.precision)}},polynomial:function polynomial(data,options){var lhs=[];var rhs=[];var a=0;var b=0;var len=data.length;var k=options.order+1;for(var i=0;i<k;i++){for(var l=0;l<len;l++){if(data[l][1]!==null){a+=Math.pow(data[l][0],i)*data[l][1]}}lhs.push(a);a=0;var c=[];for(var j=0;j<k;j++){for(var _l=0;_l<len;_l++){if(data[_l][1]!==null){b+=Math.pow(data[_l][0],i+j)}}c.push(b);b=0}rhs.push(c)}rhs.push(lhs);var coefficients=gaussianElimination(rhs,k).map((function(v){return round(v,options.precision)}));var predict=function predict(x){return[round(x,options.precision),round(coefficients.reduce((function(sum,coeff,power){return sum+coeff*Math.pow(x,power)}),0),options.precision)]};var points=data.map((function(point){return predict(point[0])}));var string="y = ";for(var _i=coefficients.length-1;_i>=0;_i--){if(_i>1){string+=coefficients[_i]+"x^"+_i+" + "}else if(_i===1){string+=coefficients[_i]+"x + "}else{string+=coefficients[_i]}}return{string,points,predict,equation:[].concat(_toConsumableArray(coefficients)).reverse(),r2:round(determinationCoefficient(data,points),options.precision)}}};function createWrapper(){var reduce=function reduce(accumulator,name){return _extends({_round:round},accumulator,_defineProperty({},name,(function(data,supplied){return methods[name](data,_extends({},DEFAULT_OPTIONS,supplied))})))};return Object.keys(methods).reduce(reduce,{})}module.exports=createWrapper()}))})(regression);const QueryAnalyticForTrendline={dataFormat:"json",outputFormat:"json",typeKey:"analyticType",typeValue:"LinRegR2",fieldValue:"onAnalyticField",slopePropertyList:["Slope","SLOPE","slope"],interceptPropertyList:["Intercept","INTERCEPT","intercept"],r2PropertyList:["R2","r2"]};async function isServerCalculationPossible(props){const{chartConfig,queryObject}=props;const{dataSource}=chartConfig;let possible=false;const isFL=isFeatureLayer(queryObject);const layer=getLayerFromQueryObject(queryObject);if(isFL===true&&dataSource.type===WebChartDataSourceTypes.Layer&&layer.source instanceof Collection__default["default"]===false){const queryURL=`${layer.url}/${layer.layerId}?f=json`;try{const layerMetaData=(await esriRequest__default["default"](queryURL)).data;const supportsQueryAnalytic=layerMetaData?.advancedQueryCapabilities?.supportsQueryAnalytic===true;const supportsLineReg=layerMetaData?.sqlParserVersion===undefined||layer.version>=10.91;possible=supportsQueryAnalytic===true&&supportsLineReg===true}catch(e){}}return possible}function secureAndFormatTrendlinePoints(props){const{x,y,statsMap,fullTrendlinePoints,securePoints}=props;const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField}=ChartDefaults.scatterPlotAggregationFields;const minX=statsMap.get(dataContextXMinField)??NaN;const maxX=statsMap.get(dataContextXMaxField)??NaN;const minY=statsMap.get(dataContextYMinField)??NaN;const maxY=statsMap.get(dataContextYMaxField)??NaN;const securedPoints=securePoints===true?fullTrendlinePoints.filter((point=>point[0]>=minX&&point[1]>=minY&&point[0]<=maxX&&point[1]<=maxY)):fullTrendlinePoints;const securedFirstPointX=securedPoints?.[0]?.[0]??NaN;const securedFirstPointY=securedPoints?.[0]?.[1]??NaN;const securedLastPointX=securedPoints?.[securedPoints.length-1]?.[0]??NaN;const securedLastPointY=securedPoints?.[securedPoints.length-1]?.[1]??NaN;const trendLinePoints=[{[x]:securedFirstPointX,[y]:securedFirstPointY},{[x]:securedLastPointX,[y]:securedLastPointY}];return trendLinePoints}function getDataPoints(props){const{data,x,y}=props;let dataPoints=[];if(data!==undefined){dataPoints=data.filter((dataItem=>Number.isFinite(dataItem[x])===true&&Number.isFinite(dataItem[y])===true)).map((dataItem=>[dataItem[x],dataItem[y]]))}return dataPoints}async function getFinalTrendlineDataServerSide(props){const{statsMap,queryObject,chartConfig,queryConfig}=props;const series=chartConfig.series[0];const{x,y}=series;let r2=NaN;let trendLinePoints=[{[x]:NaN,[y]:NaN},{[x]:NaN,[y]:NaN}];const{dataFormat,outputFormat,typeKey,typeValue,fieldValue,slopePropertyList,interceptPropertyList,r2PropertyList}=QueryAnalyticForTrendline;const outAnalytics=`[{"${typeKey}": "${typeValue}", "${fieldValue}":"${x},${y}"}]`;const queryData=await queryAnalytic({queryObject,queryConfig,outputFormat,dataFormat,outAnalytics});if(queryData!==undefined){let slope=NaN;let intercept=NaN;const{expr:slopeProperty}=isPropertyKeyInData(queryData,slopePropertyList);const{expr:interceptProperty}=isPropertyKeyInData(queryData,interceptPropertyList);const{expr:r2Property}=isPropertyKeyInData(queryData,r2PropertyList);if(slopeProperty!==undefined&&Number.isFinite(queryData[slopeProperty])){slope=queryData[slopeProperty]}if(interceptProperty!==undefined&&Number.isFinite(queryData[interceptProperty])){intercept=queryData[interceptProperty]}if(r2Property!==undefined&&Number.isFinite(queryData[r2Property])){r2=queryData[r2Property]}const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField}=ChartDefaults.scatterPlotAggregationFields;const minX=statsMap.get(dataContextXMinField)??NaN;const maxX=statsMap.get(dataContextXMaxField)??NaN;const minY=statsMap.get(dataContextYMinField)??NaN;const maxY=statsMap.get(dataContextYMaxField)??NaN;const resolution=100;const xStep=(maxX-minX)/resolution;let firstPointX=minX-xStep;let firstPointY=NaN;while((firstPointY>=minY&&firstPointY<=maxY)===false&&firstPointX<=maxX){firstPointX+=xStep;firstPointY=slope*firstPointX+intercept}let lastPointX=maxX+xStep;let lastPointY=NaN;while((lastPointY>=minY&&lastPointY<=maxY)===false&&lastPointX>=minX){lastPointX-=xStep;lastPointY=slope*lastPointX+intercept}trendLinePoints=[{[x]:firstPointX,[y]:firstPointY},{[x]:lastPointX,[y]:lastPointY}]}return{r2,trendLinePoints}}function getFinalTrendlineDataClientSide(props,securePoints=true){const{data,chartConfig,statsMap}=props;const series=chartConfig.series[0];const{x,y}=series;let{r2,trendLinePoints}=ChartDefaults.scatterPlotSeries;const dataPoints=getDataPoints({data,x,y});if(dataPoints!==undefined){const regressionResults=regression.exports.linear(dataPoints,{precision:ChartDefaults.scatterPlotSeries.regressionPrecision});r2=regressionResults.r2;const{points:fullTrendlinePoints}=regressionResults;trendLinePoints=secureAndFormatTrendlinePoints({x,y,fullTrendlinePoints,statsMap,securePoints})}return{r2,trendLinePoints}}async function getFinalTrendlineData(props){const useServer=await isServerCalculationPossible(props);const{chartConfig,statsMap,options}=props;const series=chartConfig.series[0];const{x,y}=series;const{r2}=ChartDefaults.scatterPlotSeries;const trendLinePoints=[{[x]:NaN,[y]:NaN},{[x]:NaN,[y]:NaN}];let result={r2,trendLinePoints};let serverFailed=false;if(useServer===true)try{result=await getFinalTrendlineDataServerSide(props)}catch(e){serverFailed=true}if((useServer===false||serverFailed===true)&&isScatterPlotAggregated({statsMap,chartLimits:options?.chartLimits})===false)result=getFinalTrendlineDataClientSide(props);return result}const seedString="arcgis-charts-scatter-seed";function getDataPointsExtent(props){const{data,x,y}=props;let minX=Number.MAX_SAFE_INTEGER;let maxX=Number.MIN_SAFE_INTEGER;let minY=Number.MAX_SAFE_INTEGER;let maxY=Number.MIN_SAFE_INTEGER;data.forEach((dataItem=>{if(Number.isFinite(dataItem[x]))minX=Math.min(dataItem[x],minX);if(Number.isFinite(dataItem[x]))maxX=Math.max(dataItem[x],maxX);if(Number.isFinite(dataItem[y]))minY=Math.min(dataItem[y],minY);if(Number.isFinite(dataItem[y]))maxY=Math.max(dataItem[y],maxY)}));return{minX,maxX,minY,maxY}}async function fetchDataStatistics(props){const{chartConfig,queryConfig,queryObject,abortKey}=props;const{dataSource}=chartConfig;const series=chartConfig.series[0];const{x,y}=series;let minMaxRawData=new Map;const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField,queryNumberOfFeatures}=ChartDefaults.scatterPlotAggregationFields;if(dataSource.type===WebChartDataSourceTypes.Layer){const{objectIdField}=getLayerFromQueryObject(queryObject);const minMaxOutStatistics=[{statisticType:RESTStatisticType.Count,onStatisticField:objectIdField,outStatisticFieldName:queryNumberOfFeatures},{statisticType:RESTStatisticType.Minimum,outStatisticFieldName:dataContextXMinField,onStatisticField:x},{statisticType:RESTStatisticType.Maximum,outStatisticFieldName:dataContextXMaxField,onStatisticField:x}];if(x!==y){minMaxOutStatistics.push({statisticType:RESTStatisticType.Minimum,outStatisticFieldName:dataContextYMinField,onStatisticField:y},{statisticType:RESTStatisticType.Maximum,outStatisticFieldName:dataContextYMaxField,onStatisticField:y})}const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.outStatistics=minMaxOutStatistics;minMaxRawData=await queryStatistics({queryObject,queryConfig:modifiedQueryConfig,abortKey});if(x===y){minMaxRawData.set(dataContextYMinField,minMaxRawData.get(dataContextXMinField)??NaN);minMaxRawData.set(dataContextYMaxField,minMaxRawData.get(dataContextXMaxField)??NaN)}}else if(dataSource.processed===false){const{dataItems:data}=dataSource.data;const{minX,maxX,minY,maxY}=getDataPointsExtent({data,x,y});minMaxRawData.set(queryNumberOfFeatures,data.length);minMaxRawData.set(dataContextXMinField,minX);minMaxRawData.set(dataContextXMaxField,maxX);minMaxRawData.set(dataContextYMinField,minY);minMaxRawData.set(dataContextYMaxField,maxY)}return minMaxRawData}async function transformScatterPlotData(props){const{queryObject,chartConfig,rawData,hasBeenAggregated}=props;const{dataSource}=chartConfig;const series=chartConfig.series[0];const{x,y}=series;let transformedData=[];if(dataSource.type===WebChartDataSourceTypes.Layer){const layer=getLayerFromQueryObject(queryObject);const fieldOID=layer.objectIdField;const{groupByOutKeyword}=GroupByKeywords;const randomNumberGenerator=new chance$1$1.exports.Chance(seedString);const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField}=ChartDefaults.scatterPlotAggregationFields;transformedData=rawData.map((graphic=>{let newAttributes={...graphic.attributes};sanitizeQueryResults(newAttributes,x);sanitizeQueryResults(newAttributes,y);if(hasBeenAggregated===true){const{expr,isInItem}=isQueryCalculatedExprInItem(newAttributes);if(isInItem===true&&newAttributes[expr]!==groupByOutKeyword){let[xMin,xMax,yMin,yMax]=newAttributes[expr].split("|");xMin=Math.min(xMin,xMax);xMax=Math.max(xMin,xMax);yMin=Math.min(yMin,yMax);yMax=Math.max(yMin,yMax);newAttributes={...newAttributes,[dataContextXMinField]:xMin,[dataContextXMaxField]:xMax,[dataContextYMinField]:yMin,[dataContextYMaxField]:yMax};if(newAttributes[x]!==xMin&&newAttributes[x]!==xMax)newAttributes[x]=randomNumberGenerator.floating({min:0,max:1})*(xMax-xMin)+xMin;if(newAttributes[y]!==yMin&&newAttributes[y]!==yMax)newAttributes[y]=randomNumberGenerator.floating({min:0,max:1})*(yMax-yMin)+yMin}}else{newAttributes[queryDefaults.uniqueIdsName]=newAttributes[fieldOID]}return newAttributes}));transformedData=transformedData.filter((dataItem=>{const{expr}=isQueryCalculatedExprInItem(dataItem);return expr===undefined||dataItem[expr]!==groupByOutKeyword}))}else{transformedData=rawData}return transformedData}async function fetchRawScatterPlotNonAggregatedData(props){const{queryObject,queryConfig,chartConfig,featureCount,abortKey}=props;const series=chartConfig.series[0];const{x,y}=series;const layer=getLayerFromQueryObject(queryObject);let rawData=[];const fieldList=await fetchLayerFieldsInfo(queryObject);const numericFieldNames=(fieldList?.filter((field=>isNumericField(field)===true&&field.name!==x&&field.name!==y))??[]).map((field=>field.name))??[];const outFields=[x,y,layer.objectIdField,...numericFieldNames];if(layer.isTable===false){const{rendererField,rendererNormalizationField}=getRendererInfo(layer?.renderer);if(isEmptyStringField(rendererField)===false)outFields.push(rendererField);if(isEmptyStringField(rendererNormalizationField)===false)outFields.push(rendererNormalizationField)}const modifiedQueryConfig={...queryConfig,orderByFields:[`${x} ${WebChartSortOrderKinds.Ascending}`]};rawData=await queryAllFeatures({queryObject,queryConfig:modifiedQueryConfig,outFields,featureCount,abortKey});return rawData}async function fetchRawScatterPlotData(props){let hasBeenAggregated=false;let rawData=[];const{chartConfig,queryConfig,queryObject,statsMap,options,abortKey}=props;const{dataSource}=chartConfig;const series=chartConfig.series[0];const{x,y}=series;if(dataSource.type===WebChartDataSourceTypes.Layer){const{queryNumberOfFeatures}=ChartDefaults.scatterPlotAggregationFields;const numberOfFeatures=statsMap?.get(queryNumberOfFeatures)??NaN;if(Number.isNaN(numberOfFeatures)===false&&numberOfFeatures>0){const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,`${x} IS NOT NULL AND ${y} IS NOT NULL`]);const{maxScatterPointsBeforeAggregation}=getChartLimits(options?.chartLimits);if(numberOfFeatures<maxScatterPointsBeforeAggregation){rawData=await fetchRawScatterPlotNonAggregatedData({queryObject,chartConfig,queryConfig:modifiedQueryConfig,featureCount:numberOfFeatures,abortKey})}else{hasBeenAggregated=true;rawData=await fetchRawScatterPlotAggregatedData({chartConfig,queryObject,queryConfig:modifiedQueryConfig,options,statsMap,abortKey})}}}else{rawData=dataSource.data.dataItems}return{rawData,hasBeenAggregated}}async function fetchFinishedScatterPlotData(props){const{chartConfig,queryConfig,queryObject,sortData,calculateTrendline,options,abortKey}=props;const statsMap=await fetchDataStatistics(props);const{rawData,hasBeenAggregated}=await fetchRawScatterPlotData({queryObject,chartConfig,queryConfig,options,statsMap,abortKey});const transformedData=await transformScatterPlotData({queryObject,chartConfig,rawData,hasBeenAggregated});if(sortData!==false)sortWebChartDataItems({arrayToSort:transformedData,orderByFields:[`${chartConfig.series[0].x} ASC`]});const{r2,trendLinePoints}=calculateTrendline!==false?await getFinalTrendlineData({data:transformedData,statsMap,queryConfig,options,queryObject,chartConfig}):ChartDefaults.scatterPlotSeries;return{dataItems:transformedData,r2,trendLinePoints}}function objectToWhereQuery(key,value){let queryString="";if(key.trim()!==""&&value!==undefined){if(value===null){queryString=`${key} IS NULL`}else{const optionalQuote=typeof value!=="number"?"'":"";queryString=`${key}=${optionalQuote}${value}${optionalQuote}`}}return queryString}function buildSelectionFilterForAScatterPlotElement(props){const{dataContext,xAxisField,yAxisField,options}=props;let filter="";const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField}=ChartDefaults.scatterPlotAggregationFields;if(isScatterPlotAggregated({dataContext,chartLimits:options?.chartLimits})===true){const{[dataContextXMinField]:xMin,[dataContextXMaxField]:xMax}=dataContext;const yMin=xAxisField!==yAxisField?dataContext[dataContextYMinField]:xMin;const yMax=xAxisField!==yAxisField?dataContext[dataContextYMaxField]:xMax;if(Number.isNaN(xMin)===false&&Number.isNaN(xMax)===false&&Number.isNaN(yMin)===false&&Number.isNaN(yMax)===false){const filters=[];if(xMin===xMax){filters.push(`${xAxisField}=${xMin}`)}else{filters.push(`${xAxisField}>=${xMin}`);filters.push(`${xAxisField}<${xMax}`)}if(yMin===yMax){filters.push(`${yAxisField}=${yMin}`)}else{filters.push(`${yAxisField}>=${yMin}`);filters.push(`${yAxisField}<${yMax}`)}filter=combineFilters(filters)}}else{filter=combineFilters([normalizeWhereClause(objectToWhereQuery(xAxisField,dataContext[xAxisField])),yAxisField!==undefined?normalizeWhereClause(objectToWhereQuery(yAxisField,dataContext[yAxisField])):""])}return filter}function buildSelectionFilterForATimeBinningChartElement(xAxisField,dataContext){let filter="";const dateBinningRange=dataContext[ChartDefaults.dateBinningRange];if(isArray$1(dateBinningRange)&&dateBinningRange.length===2){const[timeStampMin,timeStampMax]=dateBinningRange;if(Number.isFinite(timeStampMin)&&Number.isFinite(timeStampMax)){const dateMin=transformDateToQueryFormat(timeStampMin);const dateMax=transformDateToQueryFormat(timeStampMax);filter=`${xAxisField}>='${dateMin}' AND ${xAxisField}<='${dateMax}'`}}return filter}function buildSelectionFilterForADoubleField(xAxisValue,xAxisField){let filter="";if(Number.isFinite(xAxisValue)===true){const delta=1/10**ChartDefaults.queryMaxFloatPrecision;filter=`${xAxisField}>=${xAxisValue-delta} AND ${xAxisField}<=${xAxisValue+delta}`}return filter}function buildSelectionFilterForABoxPlotElement(props){const{xAxisField,yAxisField,splitBy,dataContext,isDateAxis,isXAxisFieldDouble,showOutliers,chartSubType}=props;let xAxisFilter="";if(xAxisField!==undefined&&xAxisField!==ChartDefaults.boxPlot.boxPlotCategory){let xAxisValue=getXAxisValueFromContext({value:dataContext[xAxisField],dataContext,keepNullValues:true,specificField:ChartDefaults.typeOrDomainIdValue});if(isXAxisFieldDouble===true){xAxisFilter=buildSelectionFilterForADoubleField(xAxisValue,xAxisField)}else{if(isDateAxis===true)xAxisValue=transformDateToQueryFormat(xAxisValue);xAxisFilter=normalizeWhereClause(objectToWhereQuery(xAxisField,xAxisValue),false)}}const splitByFilter=normalizeWhereClause(splitBy??"",false);let minMaxFilter="";if(showOutliers===true){const y=chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory?yAxisField:undefined;const minField=getBoxPlotYValue({key:BoxPlotYFieldKeys.Min,showOutliers:true,splitBy,y});const maxField=getBoxPlotYValue({key:BoxPlotYFieldKeys.Max,showOutliers:true,splitBy,y});const statField=xAxisField===ChartDefaults.boxPlot.boxPlotCategory?dataContext[xAxisField]:yAxisField;if(isEmptyStringField(statField)===false){const minValue=dataContext[minField];const maxValue=dataContext[maxField];if(Number.isFinite(minValue)===true&&Number.isFinite(maxValue)===true)minMaxFilter=`${statField}>=${minValue} AND ${statField}<=${maxValue}`}}const filter=combineFilters([xAxisFilter,splitByFilter,minMaxFilter]);return filter}function buildSelectionFilterForABarOrLineElement(props){const{xAxisField,splitBy,dataContext,isDateAxis,isXAxisFieldDouble,chartSubType}=props;let xAxisFilter="";if(ChartDefaults.dateBinningRange in dataContext){xAxisFilter=buildSelectionFilterForATimeBinningChartElement(xAxisField,dataContext)}else if(chartSubType!==ChartSubType.BarAndLineFromFields){let xAxisValue=getXAxisValueFromContext({value:dataContext[xAxisField],dataContext,keepNullValues:true,specificField:ChartDefaults.typeOrDomainIdValue});if(isXAxisFieldDouble===true){xAxisFilter=buildSelectionFilterForADoubleField(xAxisValue,xAxisField)}else{if(isDateAxis===true)xAxisValue=transformDateToQueryFormat(xAxisValue);xAxisFilter=normalizeWhereClause(objectToWhereQuery(xAxisField,xAxisValue),false)}}const splitByFilter=normalizeWhereClause(splitBy??"",false);const filter=combineFilters([xAxisFilter,splitByFilter]);return filter}function buildSelectionFilterForAPieChartElement(props){const{xAxisField:categoryField,dataContext,chartSubType}=props;let categoryValue=ChartDefaults.typeOrDomainIdValue in dataContext?dataContext[ChartDefaults.typeOrDomainIdValue]:dataContext[ChartDefaults.originalCategoryValue];if(categoryValue===undefined)categoryValue=dataContext[categoryField];const filter=chartSubType===ChartSubType.PieFromFields?"":normalizeWhereClause(objectToWhereQuery(categoryField,categoryValue),false);return filter}function buildSelectionFilterForAHistogramElement(props){const{xAxisField,dataContext,dataTransformationType}=props;let filter="";const{minValue,maxValue}=dataContext;if(Number.isFinite(minValue)&&Number.isFinite(maxValue)){const transformedXAxisField=getTransformedQuery(xAxisField,dataTransformationType);filter=combineFilters([`${transformedXAxisField}>=${minValue}`,`${transformedXAxisField}<=${maxValue}`])}return filter}function buildSelectionFilterForOneElement(props){const{chartType}=props;let filter="";switch(chartType){case WebChartTypes.ScatterSeries:filter=buildSelectionFilterForAScatterPlotElement(props);break;case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:filter=buildSelectionFilterForABarOrLineElement(props);break;case WebChartTypes.BoxPlotSeries:filter=buildSelectionFilterForABoxPlotElement(props);break;case WebChartTypes.HistogramSeries:filter=buildSelectionFilterForAHistogramElement(props);break;case WebChartTypes.PieSeries:filter=buildSelectionFilterForAPieChartElement(props);break}return filter}function hasSelectionByItemsChanged(props){const{itemsA,itemsB,x}=props;let changed=false;if(itemsA===undefined&&itemsB!==undefined||itemsA!==undefined&&itemsB===undefined){changed=true}else{const propertiesToDelete=[ChartDefaults.originalCategoryValue,ChartDefaults.originalDateValue,ChartDefaults.xAxisField,ChartDefaults.technicalSortingFieldBySum,ChartDefaults.technicalSortingFieldByPercent,ChartDefaults.pieChart.technicalFieldSlicePercent,ChartDefaults.pieChart.technicalFieldGroupedSlices,ChartDefaults.pieChart.technicalFieldSliceId,queryDefaults.uniqueIdsName,...ChartDefaults.queryCalculatedExpr];const reducePredicate=(accumulator,currentItem)=>{const filteredItem={};Object.keys(currentItem).forEach((propName=>{if(propertiesToDelete.includes(propName)===false&&propName.includes(ChartDefaults.rendererSymbolField)===false){filteredItem[propName]=currentItem[propName]}}));accumulator.push(filteredItem);return accumulator};const sortPredicate=(a,b)=>(a[x]??a[ChartDefaults.boxPlot.boxPlotCategory]??a[defaultPieFromFieldsName]??"")>(b[x]??b[ChartDefaults.boxPlot.boxPlotCategory]??b[defaultPieFromFieldsName]??"")?1:-1;const itemsAToCompare=itemsA?.reduce(reducePredicate,[])?.sort(sortPredicate);const itemsBToCompare=itemsB?.reduce(reducePredicate,[])?.sort(sortPredicate);changed=isEqual(itemsAToCompare,itemsBToCompare)===false}return changed}function getSelectedData(props){const{chartConfig,currentSelectionDataItems,options,queryConfig,queryObject}=props;const{selectionData}=options??{};let selectedData=[];if(chartConfig!==undefined){const seriesConfig=chartConfig.series;const{selectionItems}=selectionData??{};if(selectionItems!==undefined&&hasSelectionByItemsChanged({itemsA:selectionItems,itemsB:currentSelectionDataItems,x:chartConfig.series[0].x})===true){selectedData=selectionItems}else{selectedData=currentSelectionDataItems??[]}if(seriesConfig.length>1){const splitByField=getSplitByField(seriesConfig[0].query?.where);selectedData=groupDataByCategory({data:selectedData,x:seriesConfig[0].x,splitByField})}const{uniqueQuery}=buildUniqueQuery({chartConfig,queryConfig,queryObject,setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided});sortFetchedData({arrayToSort:selectedData,orderByFieldsConfig:uniqueQuery.orderByFields,chartConfig})}return selectedData??[]}async function fetchBoxPlotDataWithFilterBySelection(props){const{queryObject,queryConfig,chartConfig,currentSelectionDataItems,options,abortKey}=props;const{series:seriesConfig}=chartConfig;const chartType=getSeriesType(seriesConfig);const chartSubType=getChartSubType(chartConfig.series);let dataInfo={valid:true,data:{dataItems:[]}};if(currentSelectionDataItems!==undefined&&currentSelectionDataItems.length>0){const firstSeriesConfig=chartConfig.series[0];const{x:xAxisField,y}=firstSeriesConfig;const isDateAxis=isDateValueFormat(chartConfig.axes?.[0].valueFormat);const{showOutliers}=chartConfig;let isXAxisFieldDouble=false;if(queryObject!==undefined){const layerFields=await fetchLayerFieldsInfo(queryObject);isXAxisFieldDouble=layerFields.find((field=>field.name===xAxisField))?.type===RESTFieldType.Double}const oidList=[];const selectionFilters=currentSelectionDataItems.reduce(((accumulator,dataItem)=>{let splitBy="";if(queryDefaults.uniqueIdsName in dataItem){oidList.push(dataItem[queryDefaults.uniqueIdsName])}else{switch(chartSubType){case ChartSubType.BoxPlotMonoFieldAndSplitBy:case ChartSubType.BoxPlotMultiFieldsAndSplitBy:case ChartSubType.BoxPlotMonoFieldAndCategoryAndSplitBy:{splitBy=firstSeriesConfig.query?.where??"";const splitByField=getSplitByField(splitBy);let splitByValue="";const matchingKey=`_${BoxPlotYFieldKeys.FirstQuartile}`;Object.keys(dataItem).forEach((propertyName=>{if(propertyName.includes(matchingKey)===true)splitByValue=propertyName.replace(matchingKey,"")}));splitBy=objectToWhereQuery(splitByField,splitByValue);break}}const yList=[y].flat();let yAxisField=yList.length===1?yList[0]:"";if(chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory){const matchingKey=`_${BoxPlotYFieldKeys.FirstQuartile}`;const matchingProp=Object.keys(dataItem).find((propertyName=>propertyName.includes(matchingKey)===true));if(matchingProp!==undefined)yAxisField=matchingProp.replace(matchingKey,"")}const filter=buildSelectionFilterForABoxPlotElement({xAxisField,yAxisField,splitBy,dataContext:dataItem,isDateAxis,isXAxisFieldDouble,chartType,showOutliers,chartSubType});accumulator.push(filter)}return accumulator}),[]);const layer=getLayerFromQueryObject(queryObject);if(layer!==undefined&&oidList.length>0){const{objectIdField}=layer;selectionFilters.push(`${objectIdField} IN (${oidList.join(",")})`)}const selectionFilter=selectionFilters.join(" OR ");const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,selectionFilter]);dataInfo=await fetchFinishedGenericChartData({chartConfig,queryConfig:modifiedQueryConfig,queryObject,abortKey,options})}return dataInfo}async function fetchFinishedDataWithFilterBySelection(props){const{queryObject,queryConfig,chartConfig,currentSelectionDataItems,options,abortKey}=props;const{series:seriesConfig}=chartConfig;const chartType=getSeriesType(seriesConfig);const xAxisValueFormatType=getXAxisValueFormat(chartConfig);let dataInfo={valid:true};const selectedData=getSelectedData({chartConfig,currentSelectionDataItems,options,queryObject,queryConfig});let sortNeeded=false;switch(chartType){case WebChartTypes.BarSeries:case WebChartTypes.ComboLineAndBarSeries:dataInfo.data={dataItems:selectedData};dataInfo.count=selectedData.length*seriesConfig.length;sortNeeded=true;break;case WebChartTypes.PieSeries:if(isPieChartFromFields(chartConfig.series)){const{x,y}=chartConfig.series[0];const pieFromFieldsData=cloneDeep(selectedData);pieFromFieldsData.forEach((dataItem=>{if(x in dataItem){dataItem[defaultPieFromFieldsName]=dataItem[x];delete dataItem[x]}if(y in dataItem){dataItem[defaultPieFromFieldsValue]=dataItem[y];delete dataItem[y]}}));dataInfo.data={dataItems:pieFromFieldsData}}else{dataInfo.data={dataItems:selectedData}}dataInfo.count=selectedData.length;sortNeeded=true;break;case WebChartTypes.BoxPlotSeries:dataInfo=await fetchBoxPlotDataWithFilterBySelection(props);break;case WebChartTypes.LineSeries:if(selectedData.length===0||isSeriesUsingTimeBinning({xAxisValueFormatType,setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided,seriesConfig:seriesConfig[0]})===false){dataInfo.data={dataItems:selectedData};dataInfo.count=selectedData.length*seriesConfig.length;sortNeeded=true}else{const modifiedQueryConfig={...queryConfig};if(currentSelectionDataItems!==undefined&&currentSelectionDataItems.length>0){const selectionFilters=currentSelectionDataItems.map((dataItem=>buildSelectionFilterForATimeBinningChartElement(seriesConfig[0].x,dataItem)));const filter=combineFilters(selectionFilters,"OR");modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,filter])}const dataProps={queryObject,queryConfig:modifiedQueryConfig,chartConfig,options};dataInfo=await fetchFinishedLineChartTimeBinningData(dataProps)}break;case WebChartTypes.HistogramSeries:{if(selectedData.length===0){dataInfo.data={mean:NaN,median:NaN,stddev:NaN,max:NaN,min:NaN,bins:[]};dataInfo.count=0}else{const{x}=seriesConfig[0];const selectionFilter=selectedData.map(((dataItem,index)=>{const{minValue,maxValue}=dataItem;const maxOperand=index===selectedData.length-1?"<=":"<";return`${x} >= ${minValue} AND ${x} ${maxOperand} ${maxValue}`}));const filter=combineFilters(selectionFilter,"OR");const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,filter]);dataInfo=await fetchFinishedHistogramData({queryObject,chartConfig,queryConfig:modifiedQueryConfig,options,abortKey})}break}case WebChartTypes.ScatterSeries:{if(selectedData.length===0){const{r2,trendLinePoints}=ChartDefaults.scatterPlotSeries;dataInfo.data={dataItems:[],r2,trendLinePoints,count:0};dataInfo.count=0}else{const statsMap=new Map;const{r2,trendLinePoints}=getFinalTrendlineDataClientSide({data:selectedData,queryConfig,chartConfig,statsMap},false);dataInfo.data={dataItems:selectedData,r2,trendLinePoints};dataInfo.count=selectedData.length}break}}if(sortNeeded===true&&dataInfo.data!==undefined){sortFetchedData({arrayToSort:"dataItems"in dataInfo.data?dataInfo.data.dataItems:dataInfo.data,orderByFieldsConfig:queryConfig.orderByFields,chartConfig})}return dataInfo}async function fetchFinishedData(props){const{queryObject,chartConfig,queryConfig,binnedServerData,options,abortKey,locale}=props;const{dataSource,series}=chartConfig;const{filterBySelection}=options??{};const seriesType=getSeriesType(series,0);let dataInfo={valid:true};if(filterBySelection===true){dataInfo=await fetchFinishedDataWithFilterBySelection(props)}else{switch(seriesType){case WebChartTypes.BarSeries:case WebChartTypes.BoxPlotSeries:case WebChartTypes.PieSeries:if(dataSource.type===WebChartDataSourceTypes.Inline){if(dataSource.processed===false){dataInfo.data={dataItems:transformRawData(chartConfig)}}}else{dataInfo=await fetchFinishedGenericChartData({queryObject,queryConfig,options,chartConfig,abortKey})}break;case WebChartTypes.LineSeries:if(dataSource.type===WebChartDataSourceTypes.Inline&&dataSource.processed===false){dataInfo.data={dataItems:transformRawData(chartConfig)}}else{const dataProps={queryObject,queryConfig,chartConfig,options};if(isSeriesUsingTimeBinning({xAxisValueFormatType:getXAxisValueFormat(chartConfig),setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided,seriesConfig:series[0]})===true){if(binnedServerData!==undefined)dataProps.binnedServerData=binnedServerData;dataInfo=await fetchFinishedLineChartTimeBinningData(dataProps)}else{dataInfo=await fetchFinishedGenericChartData(dataProps)}}break;case WebChartTypes.ScatterSeries:dataInfo.data=await fetchFinishedScatterPlotData({queryObject,queryConfig,options,chartConfig,abortKey});break;case WebChartTypes.HistogramSeries:dataInfo=await fetchFinishedHistogramData({queryObject,queryConfig,chartConfig,options,abortKey,locale});break;case WebChartTypes.GaugeSeries:dataInfo=await fetchFinishedGaugeData({queryObject,chartConfig,queryConfig,options,abortKey});break}}return dataInfo}function validateInlineProcessedData(props){const{dataInfo,dataSource,seriesConfig,chartLimits}=props;const seriesType=getSeriesType(seriesConfig,0);if(seriesType===WebChartTypes.BarSeries||seriesType===WebChartTypes.LineSeries){dataInfo.count=dataSource.data.dataItems.length*seriesConfig.length}else if(seriesType===WebChartTypes.PieSeries){dataInfo.count=dataSource.data?.dataItems.length}const numberOfElementsUnderLimit=isNumberOfElementsUnderLimit({count:dataInfo.count??0,seriesCount:seriesConfig.length,seriesType,chartLimits});if(numberOfElementsUnderLimit===false){completeDataExceedLimitInfo({dataInfo,seriesType})}else if(seriesType===WebChartTypes.PieSeries){const isSupportedPie=checkForSupportedPieChart(dataSource.data.dataItems,seriesConfig[0].y);if(isSupportedPie===false){completeDataUnsupportedPieInfo(dataInfo,DataWarningKeywords.PieChartMixOfNegativePositiveSlices)}}if(dataInfo.valid===true){dataInfo.data=dataSource.data;const{timeIntervalSize,timeIntervalUnits}=seriesConfig[0];if(timeIntervalSize!==undefined&&timeIntervalUnits!==undefined){dataInfo.data.timeIntervalInfo={timeIntervalSize,timeIntervalUnits}}}}async function getData(props){const{queryObject,chartConfig,abortKey,currentSelectionDataItems,binnedServerData,options,locale}=props;const{dataSource,series:seriesConfig}=chartConfig;let dataInfo={valid:true};const queryConfig=buildQueryConfig({queryObject,chartConfig,options});if(dataSource.type===WebChartDataSourceTypes.Inline&&dataSource.processed===true){validateInlineProcessedData({dataInfo,dataSource,seriesConfig,chartLimits:options?.chartLimits});if(dataInfo.valid===true&&options?.filterBySelection===true&&getSeriesType(seriesConfig,0)!==WebChartTypes.GaugeSeries){dataInfo=await fetchFinishedData({queryConfig,chartConfig,currentSelectionDataItems,options,locale})}}else{abortPendingQueries(abortKey);dataInfo=await fetchFinishedData({chartConfig,queryObject,queryConfig,currentSelectionDataItems,binnedServerData,options,abortKey,locale})}dataInfo.queryConfig=queryConfig;return dataInfo}function isElementFromGroupOfSlices(dataContext){return dataContext?.[pieChartSpecialSlicesId.defaultGroupOfSlicesId]===true}function pieChartDataChanged(oldData,newData){const oldDataWithoutGroupSlice=oldData.filter((dataItem=>isElementFromGroupOfSlices(dataItem)===false));return isEqual(oldDataWithoutGroupSlice,newData)===false}function rebuildPieChartFetchedData(chartData,chartConfig){let data=chartData.reduce(((accumulator,dataItem)=>{if(dataItem[pieChartSpecialSlicesId.defaultGroupOfSlicesId]===true){const groupedSlices=dataItem[ChartDefaults.pieChart.technicalFieldGroupedSlices];if(groupedSlices!==undefined){groupedSlices.forEach((groupedSlice=>{accumulator.push(groupedSlice)}))}}else{accumulator.push(dataItem)}return accumulator}),[]);sortFetchedData({arrayToSort:data,chartConfig,orderByFieldsConfig:chartConfig.series[0]?.query?.orderByFields});data=sanitizeData({data:{dataItems:data},seriesConfig:chartConfig.series})?.dataItems??[];return data}function joinOIDs(fieldOID,listOIDs){let filterQuery;if(listOIDs!==undefined&&listOIDs.length>0)filterQuery=`${fieldOID} IN (${listOIDs.join(",")})`;return filterQuery}async function fetchSelectionData(props){const{numberOfQueries,selectionOIDs,chartConfig,queryConfig,options,queryObject}=props;const{series:seriesConfig}=chartConfig;const seriesType=getSeriesType(seriesConfig);const dataFetchingPromises=[];const layer=getLayerFromQueryObject(queryObject);const{objectIdField}=layer;const{maxOIDsPerSelectionQuery}=getChartTechnicalLimits();for(let iQuery=0;iQuery<numberOfQueries;iQuery+=1){const start=iQuery*maxOIDsPerSelectionQuery;const end=(iQuery+1)*maxOIDsPerSelectionQuery-1;const selectionOIDsBatch=selectionOIDs.slice(start===0?0:start-1,end);const filterByOIDs=joinOIDs(objectIdField,selectionOIDsBatch);const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,filterByOIDs]);switch(seriesType){case WebChartTypes.PieSeries:case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:case WebChartTypes.ComboLineAndBarSeries:case WebChartTypes.BoxPlotSeries:dataFetchingPromises.push(fetchFinishedGenericChartSelectionData({queryObject,chartConfig,options,queryConfig:modifiedQueryConfig}));break;case WebChartTypes.ScatterSeries:dataFetchingPromises.push(fetchFinishedScatterPlotData({queryObject,chartConfig,queryConfig:modifiedQueryConfig,options,sortData:false,calculateTrendline:false}));break;case WebChartTypes.HistogramSeries:dataFetchingPromises.push(fetchHistogramSelectionData({queryObject,queryConfig:modifiedQueryConfig,chartConfig,x:seriesConfig[0].x}));break}}const dataFetchingResults=await Promise.all(dataFetchingPromises);return dataFetchingResults}function extractSelectionDataItems(props){const{dataFetchingResults,numberOfQueries,series}=props;const seriesType=getSeriesType(series);const chartSubType=getChartSubType(series);let selectionDataItems=[];for(let iResult=0;iResult<numberOfQueries;iResult+=1){const nextResult=dataFetchingResults[iResult];if(nextResult!==undefined){const{dataItems}=seriesType===WebChartTypes.ScatterSeries?nextResult:nextResult.data;switch(seriesType){case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:case WebChartTypes.ComboLineAndBarSeries:case WebChartTypes.HistogramSeries:case WebChartTypes.PieSeries:case WebChartTypes.BoxPlotSeries:if(nextResult.valid===true&&dataItems!==undefined){if(isPieChartFromFields(series)===true){selectionDataItems=convertMultipleNumericFieldsData({dataToConvert:dataItems[0],x:defaultPieFromFieldsName,y:defaultPieFromFieldsValue})}else if(chartSubType===ChartSubType.BarAndLineFromFields){selectionDataItems=convertMultipleNumericFieldsData({dataToConvert:dataItems[0],x:series[0].x,y:series[0].y})}else{selectionDataItems.push(...dataItems)}}break;case WebChartTypes.ScatterSeries:{const{x:xAxisField,y:yAxisField}=series[0];selectionDataItems.push(...dataItems.map((dataItem=>({[xAxisField]:dataItem[xAxisField],[yAxisField]:dataItem[yAxisField]}))))}break}}}return selectionDataItems}async function getSelectionItemsFromOIDs(props){const{chartConfig,queryConfig,chartData,currentSelectionOIDs,dataWasUpdated,queryObject,options}=props;const{dataSource,series:seriesConfig}=chartConfig;const{selectionData,viewExtentUpdated,returnSelectionOIDs,chartLimits}=options??{};const{selectionItems,selectionOIDs}=selectionData??{};let selectionDataItems;const chartType=getSeriesType(seriesConfig);const xMissingInSelectionItems=chartType!==WebChartTypes.HistogramSeries&&selectionItems!==undefined&&selectionItems.length>0&&seriesConfig[0].x in selectionItems[0]===false&&defaultPieFromFieldsName in selectionItems[0]===false&&ChartDefaults.boxPlot.boxPlotCategory in selectionItems[0]===false;const fetchFromOIDsIsNeeded=dataSource.type===WebChartDataSourceTypes.Layer&&viewExtentUpdated!==true&&returnSelectionOIDs!==false&&selectionOIDs!==undefined&&selectionOIDs.length>0&&(dataWasUpdated===true||xMissingInSelectionItems===true||isEqual(selectionOIDs,currentSelectionOIDs)===false);if(fetchFromOIDsIsNeeded===true){const data=extractChartDataFromFetchedData({seriesType:chartType,fetchedData:chartData});if(data!==undefined&&isChartAggregated({dataContext:data[0],chartConfig,chartLimits})===false){selectionDataItems=data.filter((dataContext=>{const knownOID=dataContext[queryDefaults.uniqueIdsName];return typeof knownOID==="number"?selectionOIDs?.includes(knownOID):false}))}else if(selectionOIDs?.[0]!==undefined&&queryConfig!==undefined){const{maxOIDsPerSelectionQuery}=getChartTechnicalLimits();const numberOfQueries=Math.ceil(selectionOIDs.length/maxOIDsPerSelectionQuery);const dataFetchingResults=await fetchSelectionData({numberOfQueries,selectionOIDs,queryConfig,queryObject,options,chartConfig});selectionDataItems=extractSelectionDataItems({dataFetchingResults,numberOfQueries,series:seriesConfig})}}return selectionDataItems}function*queryUniqueIDsGenerator(props){const{filterList,queryObject,queryConfig}=props;for(let i=0;i<filterList.length;i+=1){const modifiedQueryConfig={...queryConfig};modifiedQueryConfig.where=combineFilters([modifiedQueryConfig.where,filterList[i]]);yield queryUniqueIDs({queryObject,queryConfig:modifiedQueryConfig,uniqueFeature:true})}}async function fetchOIDsFromWhereClause(props){const{whereList,queryObject,queryFilter,queryConfig}=props;let fetchedOIDs=[];if(whereList.length>0){const selectionThreshold=getChartTechnicalLimits().maxElementsPerSelectionQuery;const filterList=[];const numberOfQueries=Math.ceil(whereList.length/selectionThreshold);for(let iQuery=0;iQuery<numberOfQueries;iQuery+=1){const start=iQuery*selectionThreshold;const end=(iQuery+1)*selectionThreshold;const whereSubList=whereList.slice(start===0?0:start-1,end);let filter=combineFilters(whereSubList,"OR");filter=combineFilters([queryFilter,filter]);filterList.push(filter)}const generator=queryUniqueIDsGenerator({filterList,queryObject,queryConfig});fetchedOIDs=(await Promise.all(generator)).flat();fetchedOIDs=Array.from(new Set(fetchedOIDs))}return fetchedOIDs}const States={CustomActive:"custom-active",CustomInactive:"custom-inactive",Default:"default",Active:"active"};const ChartEvents={DataProcessComplete:"arcgisChartsJSDataProcessComplete",DataFetchComplete:"arcgisChartsJSDataFetchComplete",LegendItemVisibilityChange:"arcgisChartsJSLegendItemVisibilityChange",UpdateComplete:"arcgisChartsJSUpdateComplete",RenderingComplete:"arcgisChartsJSRenderingComplete",SelectionChange:"arcgisChartsJSSelectionChange",SeriesColorsChange:"arcgisChartsJSSeriesColorChange",AxesMinMaxChange:"arcgisChartsJSAxesMinMaxChange",SelectionComplete:"arcgisChartsJSSelectionComplete",TooManySelectedElements:"arcgisChartsJSTooManySelectedElements",BadDataWarningRaise:"arcgisChartsJSBadDataWarningRaise"};function generateEventInit(eventPayload){return{detail:eventPayload,composed:true,cancelable:true,bubbles:true}}function notifyDataProcessed(props){const{data,seriesConfig,htmlContainer}=props;if(htmlContainer!==undefined&&data!==undefined){const payloadData=sanitizeData({data,seriesConfig});htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.DataProcessComplete,generateEventInit(payloadData)))}}function notifyDataFetched(props){const{data,chartConfig,htmlContainer}=props;if(htmlContainer!==undefined&&data!==undefined){const payloadData=rebuildPieChartFetchedData(data,chartConfig);htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.DataFetchComplete,generateEventInit(payloadData)))}}function notifyLegendItemVisibilityChanged(data,htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.LegendItemVisibilityChange,generateEventInit(data)))}}function notifyChartUpdated(data,htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.UpdateComplete,generateEventInit(data)))}}function notifyRenderingCompleted(htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.RenderingComplete,generateEventInit()))}}function notifySelectionCompleted(props){const{data,seriesConfig,htmlContainer}=props;if(htmlContainer!==undefined){const payloadData=data;let payloadDataItems=cloneDeep(data.selectionItems);if(payloadDataItems!==undefined){payloadDataItems=revertOriginalXValues(payloadDataItems,seriesConfig);payloadDataItems=payloadDataItems.map(removeAdditionalStatisticsPerItem);payloadDataItems=revertPieFromFieldsProperties(payloadDataItems,seriesConfig);payloadData.selectionItems=payloadDataItems}htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.SelectionComplete,generateEventInit(payloadData)))}}function notifyTooManySelectedElements(htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.TooManySelectedElements,generateEventInit()))}}function notifySeriesColorsChange(props){const{data,htmlContainer,chartId}=props;if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.SeriesColorsChange,generateEventInit({chartId,data})))}}function notifyAxesMinMaxChange(data,htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.AxesMinMaxChange,generateEventInit(data)))}}function notifyBadDataRaise(data,htmlContainer){if(htmlContainer!==undefined){htmlContainer.dispatchEvent(new window.CustomEvent(ChartEvents.BadDataWarningRaise,generateEventInit(data)))}}function hasRotationChanged(oldConfig,newConfig){return isChartRotated$1(oldConfig)!==isChartRotated$1(newConfig)}function getXAxisField(chartConfig){const seriesType=getSeriesType(chartConfig.series);let{x}=chartConfig.series[0];if(chartConfig.dataSource.type===WebChartDataSourceTypes.Layer||chartConfig.dataSource.processed===false){if(seriesType!==WebChartTypes.BoxPlotSeries){x=ChartDefaults.xAxisField}}return x}function hasOutliersVisibilityChanged(oldConfig,newConfig){return(oldConfig.showOutliers??ChartDefaults.boxPlot.boxPlotOutliersVisibility)!==(newConfig.showOutliers??ChartDefaults.boxPlot.boxPlotOutliersVisibility)}function hasStandardizeValuesVisibilityChanged(oldConfig,newConfig){return(oldConfig.standardizeValues??ChartDefaults.boxPlot.boxPlotStandardizeValuesVisibility)!==(newConfig.standardizeValues??ChartDefaults.boxPlot.boxPlotStandardizeValuesVisibility)}function hasChartRendererChanged(oldConfig,newConfig){return JSON.stringify(oldConfig.chartRenderer)!==JSON.stringify(newConfig.chartRenderer)}function isNewSortNeeded(oldConfig,newConfig){const oldSeries=oldConfig.series;const newSeries=newConfig.series;const seriesType=getSeriesType(newSeries);const stackedTypeChanged=seriesType===WebChartTypes.PieSeries?false:oldSeries[0]?.stackedType!==newSeries[0]?.stackedType;const sortLabelByValueTypeNeeded=isSortLabelByValueTypeNeeded(oldConfig,newConfig);const[sortField]=newSeries[0]?.query?.orderByFields?.[0]?.split(" ")??[];const sortNeeded=sortField!==undefined&&sortField!==newSeries[0].x&&stackedTypeChanged===true||sortLabelByValueTypeNeeded===true||hasQuerySortChanged(oldSeries,newSeries)===true;return sortNeeded}function getPositionChanges(oldSeries,newSeries){const positionChanges=[];const replacements=new Map;const oldSeriesMap=new Map;oldSeries.forEach(((series,index)=>oldSeriesMap.set(series.id,index)));newSeries.forEach(((series,newIndex)=>{let oldIndex=oldSeriesMap.get(series.id);if(oldIndex!==undefined){oldIndex=replacements.get(oldIndex)??oldIndex;if(oldIndex!==newIndex){positionChanges.push([oldIndex,newIndex]);replacements.set(newIndex,oldIndex)}}}));return positionChanges}function getDisplayLabelFromConfigFields(config){const inlineDisplayLabelField=config?.dataSource?.type===WebChartDataSourceTypes.Inline?config?.dataSource.configFields?.displayLabel:undefined;return inlineDisplayLabelField}const CursorBehavior={SelectXY:"selectXY",SelectX:"selectX",SelectY:"selectY",ZoomXY:"zoomXY",ZoomX:"zoomX",ZoomY:"zoomY",None:"none"};function mapCursorRangeToCursorBehavior(props){const{actionMode,cursorRange,isRotated}=props;let cursorBehavior=CursorBehavior.None;switch(cursorRange){case CursorRange.MultiAxes:if(actionMode===ActionModes.MultiSelectionWithCtrlKey||actionMode===ActionModes.MultiSelection){cursorBehavior=CursorBehavior.SelectXY}else if(actionMode===ActionModes.Zoom){cursorBehavior=CursorBehavior.ZoomXY}break;case CursorRange.XAxis:if(actionMode===ActionModes.MultiSelectionWithCtrlKey||actionMode===ActionModes.MultiSelection){cursorBehavior=isRotated===true?CursorBehavior.SelectY:CursorBehavior.SelectX}else if(actionMode===ActionModes.Zoom){cursorBehavior=isRotated===true?CursorBehavior.ZoomY:CursorBehavior.ZoomX}break;case CursorRange.YAxis:if(actionMode===ActionModes.MultiSelectionWithCtrlKey||actionMode===ActionModes.MultiSelection){cursorBehavior=isRotated===true?CursorBehavior.SelectX:CursorBehavior.SelectY}else if(actionMode===ActionModes.Zoom){cursorBehavior=isRotated===true?CursorBehavior.ZoomX:CursorBehavior.ZoomY}break}return cursorBehavior}const OriginAndDestinationContextTypes={Outlier:"outlier",Box:"box",OutlierToOutlier:"outlier-outlier",OutlierToBox:"outlier-box",BoxToOutlier:"box-outlier",BoxToBox:"box-box"};function getOriginAndDestinationContexts(oneSelectedItem,elementOutlierValue){const from=oneSelectedItem[ChartDefaults.boxPlot.boxPlotOutlierId]===true?OriginAndDestinationContextTypes.Outlier:OriginAndDestinationContextTypes.Box;const to=typeof elementOutlierValue==="number"?OriginAndDestinationContextTypes.Outlier:OriginAndDestinationContextTypes.Box;return`${from}-${to}`}function matchOutlierToOutlierSelection(props){const{oneSelectedItem,dataContext,selectedOutlierKey}=props;return oneSelectedItem[selectedOutlierKey]===dataContext[selectedOutlierKey]}function matchOutlierToBoxSelection(props){const{elementMin,elementMax,selectedOutlierValue}=props;let valueIsAMatch;if(typeof elementMin==="number"&&typeof elementMax==="number"&&typeof selectedOutlierValue==="number"){valueIsAMatch=selectedOutlierValue>=elementMin&&selectedOutlierValue<=elementMax}return valueIsAMatch}function matchBoxToOutlierSelection(props){const{selectedMin,selectedMax,elementOutlierValue,oneSelectedItem,iqrField}=props;let valueIsAMatch;if(typeof selectedMin==="number"&&typeof selectedMax==="number"&&typeof elementOutlierValue==="number"){valueIsAMatch=elementOutlierValue>=selectedMin&&elementOutlierValue<=selectedMax}const numericFieldOrSplitByIsAMatch=iqrField in oneSelectedItem;return valueIsAMatch!==false&&numericFieldOrSplitByIsAMatch!==false}function matchBoxToBoxSelection(props){const{selectedMin,selectedMax,elementMin,oneSelectedItem,elementMax,iqrField}=props;let valueIsAMatch;if(typeof elementMin==="number"&&typeof elementMax==="number"&&typeof selectedMin==="number"&&typeof selectedMax==="number"){valueIsAMatch=(elementMin>=selectedMax||elementMax<=selectedMin)===false}const numericFieldOrSplitByIsAMatch=iqrField in oneSelectedItem;return valueIsAMatch!==false&&numericFieldOrSplitByIsAMatch!==false}function matchXValue(props){const{oneSelectedItem,dataContext,xAxisField}=props;const elementX=dataContext[ChartDefaults.originalCategoryValue]??dataContext[ChartDefaults.boxPlot.boxPlotCategory]??dataContext[xAxisField];const selectedX=oneSelectedItem[ChartDefaults.originalCategoryValue]??oneSelectedItem[ChartDefaults.boxPlot.boxPlotCategory]??oneSelectedItem[xAxisField];return elementX===selectedX}function getDataFields(props){const{chartSubType,yAxisField,splitBy,showOutliers}=props;const seriesY=chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory?yAxisField:undefined;const fieldProps={y:seriesY,splitBy};const selectedOutlierKey=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Outlier});const maxField=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Max,showOutliers});const minField=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Min,showOutliers});const selectedMaxFieldWoOutliers=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Max,showOutliers:false});const selectedMinFieldWoOutliers=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Min,showOutliers:false});const selectedMaxFieldWithOutliers=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Max,showOutliers:true});const selectedMinFieldWithOutliers=getBoxPlotYValue({...fieldProps,key:BoxPlotYFieldKeys.Min,showOutliers:true});const iqrField=getBoxPlotYValue({splitBy,y:seriesY,key:BoxPlotYFieldKeys.IQR});return{selectedOutlierKey,maxField,minField,selectedMaxFieldWoOutliers,selectedMinFieldWoOutliers,selectedMaxFieldWithOutliers,selectedMinFieldWithOutliers,iqrField}}function getBoxPlotSelectionPredicate(props){const{elementDataContext,layerOidField,xAxisField,splitBy,yAxisField,chartSubType,showOutliers}=props;let somePredicate;if(xAxisField!==undefined&&yAxisField!==undefined){const dataContext=elementDataContext;somePredicate=oneSelectedItem=>{let result;if(layerOidField!==undefined&&layerOidField in oneSelectedItem&&layerOidField in dataContext){result=oneSelectedItem[layerOidField]===dataContext[layerOidField]}else{const{selectedOutlierKey,maxField,minField,selectedMaxFieldWoOutliers,selectedMinFieldWoOutliers,selectedMaxFieldWithOutliers,selectedMinFieldWithOutliers,iqrField}=getDataFields({chartSubType,yAxisField,splitBy,showOutliers});const elementOutlierValue=dataContext[selectedOutlierKey];const selectedOutlierValue=oneSelectedItem[selectedOutlierKey];const elementMin=dataContext[minField];const elementMax=dataContext[maxField];const selectedMin=oneSelectedItem[selectedMinFieldWoOutliers]??oneSelectedItem[selectedMinFieldWithOutliers];const selectedMax=oneSelectedItem[selectedMaxFieldWoOutliers]??oneSelectedItem[selectedMaxFieldWithOutliers];let match=matchXValue({oneSelectedItem,dataContext,xAxisField});if(match===true){const fromTo=getOriginAndDestinationContexts(oneSelectedItem,elementOutlierValue);switch(fromTo){case OriginAndDestinationContextTypes.OutlierToOutlier:match=matchOutlierToOutlierSelection({oneSelectedItem,dataContext,selectedOutlierKey});break;case OriginAndDestinationContextTypes.OutlierToBox:match=matchOutlierToBoxSelection({elementMin,elementMax,selectedOutlierValue});break;case OriginAndDestinationContextTypes.BoxToOutlier:match=matchBoxToOutlierSelection({selectedMin,selectedMax,elementOutlierValue,oneSelectedItem,iqrField});break;case OriginAndDestinationContextTypes.BoxToBox:match=matchBoxToBoxSelection({selectedMin,selectedMax,elementMin,oneSelectedItem,elementMax,iqrField});break}}result=match===true}return result}}return somePredicate}function isElementPartOfSelection(props){const{options,elementDataContext,selectionDataItems,layerOidField,xAxisField,yAxisField,chartType}=props;const{originalCategoryValue}=ChartDefaults;let isPartOfIt=false;let selectedDataContext=elementDataContext;let somePredicate;if(elementDataContext!==undefined&&selectionDataItems!==undefined){switch(chartType){case WebChartTypes.BarSeries:case WebChartTypes.LineSeries:if(xAxisField!==undefined&&yAxisField!==undefined){const dataContext=elementDataContext;somePredicate=oneSelectedItem=>{let result;if(layerOidField!==undefined&&layerOidField in oneSelectedItem&&layerOidField in dataContext){result=oneSelectedItem[layerOidField]===dataContext[layerOidField]}else if(ChartDefaults.dateBinningRange in dataContext&&typeof oneSelectedItem[xAxisField]==="number"){const selectedDate=oneSelectedItem[xAxisField];const[rangeStartDate,rangeEndDate]=dataContext[ChartDefaults.dateBinningRange];result=selectedDate>=rangeStartDate&&selectedDate<=rangeEndDate&&yAxisField in oneSelectedItem}else{const elementX=dataContext[originalCategoryValue]??dataContext[xAxisField];const selectedX=oneSelectedItem[originalCategoryValue]??oneSelectedItem[xAxisField];result=selectedX===elementX&&yAxisField in oneSelectedItem}return result}}break;case WebChartTypes.BoxPlotSeries:somePredicate=getBoxPlotSelectionPredicate(props);break;case WebChartTypes.ScatterSeries:if(xAxisField!==undefined&&yAxisField!==undefined){const scatterPlotElementDataContext=elementDataContext;if(isScatterPlotAggregated({dataContext:scatterPlotElementDataContext,chartLimits:options?.chartLimits})===false){somePredicate=oneSelectedItem=>{let result;if(layerOidField!==undefined&&layerOidField in scatterPlotElementDataContext&&layerOidField in oneSelectedItem){result=oneSelectedItem[layerOidField]===scatterPlotElementDataContext[layerOidField]}else{result=oneSelectedItem[xAxisField]===scatterPlotElementDataContext[xAxisField]&&oneSelectedItem[yAxisField]===scatterPlotElementDataContext[yAxisField]}return result}}else{const{dataContextXMinField,dataContextXMaxField,dataContextYMinField,dataContextYMaxField}=ChartDefaults.scatterPlotAggregationFields;const{[dataContextXMinField]:xMin,[dataContextXMaxField]:xMax}=scatterPlotElementDataContext;const yMin=xAxisField!==yAxisField?scatterPlotElementDataContext[dataContextYMinField]:xMin;const yMax=xAxisField!==yAxisField?scatterPlotElementDataContext[dataContextYMaxField]:xMax;const somePredicateX=oneSelectedItem=>{const oneSelectedItemX=oneSelectedItem[xAxisField]??NaN;const elementXMin=xMin??NaN;const elementXMax=xMax??NaN;return xMin===xMax?oneSelectedItemX===elementXMin:(oneSelectedItemX??NaN)>=elementXMin&&(oneSelectedItemX??NaN)<elementXMax};const somePredicateY=oneSelectedItem=>{const oneSelectedItemY=oneSelectedItem[yAxisField]??NaN;const elementYMin=yMin??NaN;const elementYMax=yMax??NaN;return yMin===yMax?oneSelectedItemY===elementYMin:oneSelectedItemY>=elementYMin&&oneSelectedItemY<elementYMax};somePredicate=oneSelectedItem=>somePredicateX(oneSelectedItem)&&somePredicateY(oneSelectedItem)}}break;case WebChartTypes.HistogramSeries:somePredicate=oneSelectedItem=>{let match=false;const{minValue:binMinValue,maxValue:binMaxValue}=elementDataContext;if(xAxisField!==undefined&&xAxisField in oneSelectedItem){const selectedValue=oneSelectedItem[xAxisField];match=typeof selectedValue==="number"&&selectedValue>=binMinValue&&selectedValue<=binMaxValue}else if("minValue"in oneSelectedItem&&"maxValue"in oneSelectedItem){const{minValue:selectedBinMinValue,maxValue:selectedBinMaxValue}=oneSelectedItem;match=(binMinValue>=selectedBinMaxValue||binMaxValue<=selectedBinMinValue)===false}return match};break;case WebChartTypes.PieSeries:if(xAxisField!==undefined){somePredicate=oneSelectedItem=>{const dataContext=elementDataContext;const isSliceGroup=isElementFromGroupOfSlices(dataContext);const pieChartDataItems=[dataContext];if(isSliceGroup===true)pieChartDataItems.push(...getGroupedSlicesDataItem({groupOfSlicesDataContext:dataContext})??[]);const result=pieChartDataItems.some((sliceDataContext=>{let decision;if(layerOidField!==undefined&&layerOidField in sliceDataContext&&layerOidField in dataContext){decision=oneSelectedItem[layerOidField]===sliceDataContext[layerOidField]}else{const elementX=sliceDataContext[originalCategoryValue]??sliceDataContext[xAxisField];const selectedX=oneSelectedItem[originalCategoryValue]??oneSelectedItem[xAxisField];decision=elementX===selectedX}if(decision===true)selectedDataContext=sliceDataContext;return decision}));return result}}break}}if(somePredicate!==undefined){isPartOfIt=selectionDataItems.some(somePredicate)===true}return{isPartOfIt,selectedDataContext}}function getSelectedElementData(props){const{dataContext,yAxisField,yList,xAxisField,splitBy,chartType,chartSubType,showOutliers}=props;let selectedData={...dataContext};if(dataContext!==undefined){if(chartType===WebChartTypes.BarSeries||chartType===WebChartTypes.LineSeries||chartType===WebChartTypes.PieSeries){if(chartType!==WebChartTypes.PieSeries){yList.forEach((y=>{if(y!==yAxisField)delete selectedData[y]}))}const xAxisValue=getXAxisValueFromContext({value:dataContext[xAxisField],dataContext});selectedData[xAxisField]=xAxisValue;if(isEmptyStringField(splitBy)===false)selectedData[getSplitByField(splitBy)]=getSplitByValue({where:splitBy,escape:false})}else if(chartType===WebChartTypes.BoxPlotSeries){selectedData={[xAxisField]:dataContext[xAxisField]};const statisticKeys=Object.values(BoxPlotYFieldKeys);const y=chartSubType===ChartSubType.BoxPlotMultiFieldsAndCategory?yAxisField:undefined;statisticKeys.forEach((statKey=>{const key=getBoxPlotYValue({key:statKey,y,splitBy,showOutliers});const prop=dataContext[key];if(prop!==undefined)selectedData[key]=dataContext[key]}))}}return selectedData}const EventTypes={Ready:"ready",Hidden:"hidden",Shown:"shown",Hit:"hit",DoubleHit:"doublehit",Up:"up",SelectEnded:"selectended",Over:"over",Out:"out",SizeChanged:"sizechanged",VisibilityChanged:"visibilitychanged",PositionChanged:"positionchanged",Validated:"validated",DataValidated:"datavalidated",DataItemsValidated:"dataitemsvalidated",Inited:"inited",Opened:"opened",Closed:"closed",ChildAdded:"childadded",DataRangeChanged:"datarangechanged",LayoutValidated:"layoutvalidated"};var chance$1={exports:{}};(function(module,exports){(function(){var MAX_INT=9007199254740992;var MIN_INT=-MAX_INT;var NUMBERS="0123456789";var CHARS_LOWER="abcdefghijklmnopqrstuvwxyz";var CHARS_UPPER=CHARS_LOWER.toUpperCase();var HEX_POOL=NUMBERS+"abcdef";function UnsupportedError(message){this.name="UnsupportedError";this.message=message||"This feature is not supported on this platform"}UnsupportedError.prototype=new Error;UnsupportedError.prototype.constructor=UnsupportedError;var slice=Array.prototype.slice;function Chance(seed){if(!(this instanceof Chance)){if(!seed){seed=null}return seed===null?new Chance:new Chance(seed)}if(typeof seed==="function"){this.random=seed;return this}if(arguments.length){this.seed=0}for(var i=0;i<arguments.length;i++){var seedling=0;if(Object.prototype.toString.call(arguments[i])==="[object String]"){for(var j=0;j<arguments[i].length;j++){var hash=0;for(var k=0;k<arguments[i].length;k++){hash=arguments[i].charCodeAt(k)+(hash<<6)+(hash<<16)-hash}seedling+=hash}}else{seedling=arguments[i]}this.seed+=(arguments.length-i)*seedling}this.mt=this.mersenne_twister(this.seed);this.bimd5=this.blueimp_md5();this.random=function(){return this.mt.random(this.seed)};return this}Chance.prototype.VERSION="1.1.7";function initOptions(options,defaults){options=options||{};if(defaults){for(var i in defaults){if(typeof options[i]==="undefined"){options[i]=defaults[i]}}}return options}function range(size){return Array.apply(null,Array(size)).map((function(_,i){return i}))}function testRange(test,errorMessage){if(test){throw new RangeError(errorMessage)}}var base64=function(){throw new Error("No Base64 encoder available.")};(function determineBase64Encoder(){if(typeof btoa==="function"){base64=btoa}else if(typeof Buffer==="function"){base64=function(input){return new Buffer(input).toString("base64")}}})();Chance.prototype.bool=function(options){options=initOptions(options,{likelihood:50});testRange(options.likelihood<0||options.likelihood>100,"Chance: Likelihood accepts values from 0 to 100.");return this.random()*100<options.likelihood};Chance.prototype.falsy=function(options){options=initOptions(options,{pool:[false,null,0,NaN,""]});var pool=options.pool,index=this.integer({min:0,max:pool.length}),value=pool[index];return value};Chance.prototype.animal=function(options){options=initOptions(options);if(typeof options.type!=="undefined"){testRange(!this.get("animals")[options.type.toLowerCase()],"Please pick from desert, ocean, grassland, forest, zoo, pets, farm.");return this.pick(this.get("animals")[options.type.toLowerCase()])}var animalTypeArray=["desert","forest","ocean","zoo","farm","pet","grassland"];return this.pick(this.get("animals")[this.pick(animalTypeArray)])};Chance.prototype.character=function(options){options=initOptions(options);var symbols="!@#$%^&*()[]",letters,pool;if(options.casing==="lower"){letters=CHARS_LOWER}else if(options.casing==="upper"){letters=CHARS_UPPER}else{letters=CHARS_LOWER+CHARS_UPPER}if(options.pool){pool=options.pool}else{pool="";if(options.alpha){pool+=letters}if(options.numeric){pool+=NUMBERS}if(options.symbols){pool+=symbols}if(!pool){pool=letters+NUMBERS+symbols}}return pool.charAt(this.natural({max:pool.length-1}))};Chance.prototype.floating=function(options){options=initOptions(options,{fixed:4});testRange(options.fixed&&options.precision,"Chance: Cannot specify both fixed and precision.");var num;var fixed=Math.pow(10,options.fixed);var max=MAX_INT/fixed;var min=-max;testRange(options.min&&options.fixed&&options.min<min,"Chance: Min specified is out of range with fixed. Min should be, at least, "+min);testRange(options.max&&options.fixed&&options.max>max,"Chance: Max specified is out of range with fixed. Max should be, at most, "+max);options=initOptions(options,{min,max});num=this.integer({min:options.min*fixed,max:options.max*fixed});var num_fixed=(num/fixed).toFixed(options.fixed);return parseFloat(num_fixed)};Chance.prototype.integer=function(options){options=initOptions(options,{min:MIN_INT,max:MAX_INT});testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return Math.floor(this.random()*(options.max-options.min+1)+options.min)};Chance.prototype.natural=function(options){options=initOptions(options,{min:0,max:MAX_INT});if(typeof options.numerals==="number"){testRange(options.numerals<1,"Chance: Numerals cannot be less than one.");options.min=Math.pow(10,options.numerals-1);options.max=Math.pow(10,options.numerals)-1}testRange(options.min<0,"Chance: Min cannot be less than zero.");if(options.exclude){testRange(!Array.isArray(options.exclude),"Chance: exclude must be an array.");for(var exclusionIndex in options.exclude){testRange(!Number.isInteger(options.exclude[exclusionIndex]),"Chance: exclude must be numbers.")}var random=options.min+this.natural({max:options.max-options.min-options.exclude.length});var sortedExclusions=options.exclude.sort();for(var exclusionIndex in sortedExclusions){if(random<sortedExclusions[exclusionIndex]){break}random++}return random}return this.integer(options)};Chance.prototype.prime=function(options){options=initOptions(options,{min:0,max:1e4});testRange(options.min<0,"Chance: Min cannot be less than zero.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");var lastPrime=data.primes[data.primes.length-1];if(options.max>lastPrime){for(var i=lastPrime+2;i<=options.max;++i){if(this.is_prime(i)){data.primes.push(i)}}}var targetPrimes=data.primes.filter((function(prime){return prime>=options.min&&prime<=options.max}));return this.pick(targetPrimes)};Chance.prototype.is_prime=function(n){if(n%1||n<2){return false}if(n%2===0){return n===2}if(n%3===0){return n===3}var m=Math.sqrt(n);for(var i=5;i<=m;i+=6){if(n%i===0||n%(i+2)===0){return false}}return true};Chance.prototype.hex=function(options){options=initOptions(options,{min:0,max:MAX_INT,casing:"lower"});testRange(options.min<0,"Chance: Min cannot be less than zero.");var integer=this.natural({min:options.min,max:options.max});if(options.casing==="upper"){return integer.toString(16).toUpperCase()}return integer.toString(16)};Chance.prototype.letter=function(options){options=initOptions(options,{casing:"lower"});var pool="abcdefghijklmnopqrstuvwxyz";var letter=this.character({pool});if(options.casing==="upper"){letter=letter.toUpperCase()}return letter};Chance.prototype.string=function(options){options=initOptions(options,{min:5,max:20});if(!options.length){options.length=this.natural({min:options.min,max:options.max})}testRange(options.length<0,"Chance: Length cannot be less than zero.");var length=options.length,text=this.n(this.character,length,options);return text.join("")};function CopyToken(c){this.c=c}CopyToken.prototype={substitute:function(){return this.c}};function EscapeToken(c){this.c=c}EscapeToken.prototype={substitute:function(){if(!/[{}\\]/.test(this.c)){throw new Error('Invalid escape sequence: "\\'+this.c+'".')}return this.c}};function ReplaceToken(c){this.c=c}ReplaceToken.prototype={replacers:{"#":function(chance){return chance.character({pool:NUMBERS})},A:function(chance){return chance.character({pool:CHARS_UPPER})},a:function(chance){return chance.character({pool:CHARS_LOWER})}},substitute:function(chance){var replacer=this.replacers[this.c];if(!replacer){throw new Error('Invalid replacement character: "'+this.c+'".')}return replacer(chance)}};function parseTemplate(template){var tokens=[];var mode="identity";for(var i=0;i<template.length;i++){var c=template[i];switch(mode){case"escape":tokens.push(new EscapeToken(c));mode="identity";break;case"identity":if(c==="{"){mode="replace"}else if(c==="\\"){mode="escape"}else{tokens.push(new CopyToken(c))}break;case"replace":if(c==="}"){mode="identity"}else{tokens.push(new ReplaceToken(c))}break}}return tokens}Chance.prototype.template=function(template){if(!template){throw new Error("Template string is required")}var self=this;return parseTemplate(template).map((function(token){return token.substitute(self)})).join("")};Chance.prototype.buffer=function(options){if(typeof Buffer==="undefined"){throw new UnsupportedError("Sorry, the buffer() function is not supported on your platform")}options=initOptions(options,{length:this.natural({min:5,max:20})});testRange(options.length<0,"Chance: Length cannot be less than zero.");var length=options.length;var content=this.n(this.character,length,options);return Buffer.from(content)};Chance.prototype.capitalize=function(word){return word.charAt(0).toUpperCase()+word.substr(1)};Chance.prototype.mixin=function(obj){for(var func_name in obj){Chance.prototype[func_name]=obj[func_name]}return this};Chance.prototype.unique=function(fn,num,options){testRange(typeof fn!=="function","Chance: The first argument must be a function.");var comparator=function(arr,val){return arr.indexOf(val)!==-1};if(options){comparator=options.comparator||comparator}var arr=[],count=0,result,MAX_DUPLICATES=num*50,params=slice.call(arguments,2);while(arr.length<num){var clonedParams=JSON.parse(JSON.stringify(params));result=fn.apply(this,clonedParams);if(!comparator(arr,result)){arr.push(result);count=0}if(++count>MAX_DUPLICATES){throw new RangeError("Chance: num is likely too large for sample set")}}return arr};Chance.prototype.n=function(fn,n){testRange(typeof fn!=="function","Chance: The first argument must be a function.");if(typeof n==="undefined"){n=1}var i=n,arr=[],params=slice.call(arguments,2);i=Math.max(0,i);for(null;i--;null){arr.push(fn.apply(this,params))}return arr};Chance.prototype.pad=function(number,width,pad){pad=pad||"0";number=number+"";return number.length>=width?number:new Array(width-number.length+1).join(pad)+number};Chance.prototype.pick=function(arr,count){if(arr.length===0){throw new RangeError("Chance: Cannot pick() from an empty array")}if(!count||count===1){return arr[this.natural({max:arr.length-1})]}else{return this.shuffle(arr).slice(0,count)}};Chance.prototype.pickone=function(arr){if(arr.length===0){throw new RangeError("Chance: Cannot pickone() from an empty array")}return arr[this.natural({max:arr.length-1})]};Chance.prototype.pickset=function(arr,count){if(count===0){return[]}if(arr.length===0){throw new RangeError("Chance: Cannot pickset() from an empty array")}if(count<0){throw new RangeError("Chance: Count must be a positive number")}if(!count||count===1){return[this.pickone(arr)]}else{var array=arr.slice(0);var end=array.length;return this.n((function(){var index=this.natural({max:--end});var value=array[index];array[index]=array[end];return value}),Math.min(end,count))}};Chance.prototype.shuffle=function(arr){var new_array=[],j=0,length=Number(arr.length),source_indexes=range(length),last_source_index=length-1,selected_source_index;for(var i=0;i<length;i++){selected_source_index=this.natural({max:last_source_index});j=source_indexes[selected_source_index];new_array[i]=arr[j];source_indexes[selected_source_index]=source_indexes[last_source_index];last_source_index-=1}return new_array};Chance.prototype.weighted=function(arr,weights,trim){if(arr.length!==weights.length){throw new RangeError("Chance: Length of array and weights must match")}var sum=0;var val;for(var weightIndex=0;weightIndex<weights.length;++weightIndex){val=weights[weightIndex];if(isNaN(val)){throw new RangeError("Chance: All weights must be numbers")}if(val>0){sum+=val}}if(sum===0){throw new RangeError("Chance: No valid entries in array weights")}var selected=this.random()*sum;var total=0;var lastGoodIdx=-1;var chosenIdx;for(weightIndex=0;weightIndex<weights.length;++weightIndex){val=weights[weightIndex];total+=val;if(val>0){if(selected<=total){chosenIdx=weightIndex;break}lastGoodIdx=weightIndex}if(weightIndex===weights.length-1){chosenIdx=lastGoodIdx}}var chosen=arr[chosenIdx];trim=typeof trim==="undefined"?false:trim;if(trim){arr.splice(chosenIdx,1);weights.splice(chosenIdx,1)}return chosen};Chance.prototype.paragraph=function(options){options=initOptions(options);var sentences=options.sentences||this.natural({min:3,max:7}),sentence_array=this.n(this.sentence,sentences),separator=options.linebreak===true?"\n":" ";return sentence_array.join(separator)};Chance.prototype.sentence=function(options){options=initOptions(options);var words=options.words||this.natural({min:12,max:18}),punctuation=options.punctuation,text,word_array=this.n(this.word,words);text=word_array.join(" ");text=this.capitalize(text);if(punctuation!==false&&!/^[.?;!:]$/.test(punctuation)){punctuation="."}if(punctuation){text+=punctuation}return text};Chance.prototype.syllable=function(options){options=initOptions(options);var length=options.length||this.natural({min:2,max:3}),consonants="bcdfghjklmnprstvwz",vowels="aeiou",all=consonants+vowels,text="",chr;for(var i=0;i<length;i++){if(i===0){chr=this.character({pool:all})}else if(consonants.indexOf(chr)===-1){chr=this.character({pool:consonants})}else{chr=this.character({pool:vowels})}text+=chr}if(options.capitalize){text=this.capitalize(text)}return text};Chance.prototype.word=function(options){options=initOptions(options);testRange(options.syllables&&options.length,"Chance: Cannot specify both syllables AND length.");var syllables=options.syllables||this.natural({min:1,max:3}),text="";if(options.length){do{text+=this.syllable()}while(text.length<options.length);text=text.substring(0,options.length)}else{for(var i=0;i<syllables;i++){text+=this.syllable()}}if(options.capitalize){text=this.capitalize(text)}return text};Chance.prototype.age=function(options){options=initOptions(options);var ageRange;switch(options.type){case"child":ageRange={min:0,max:12};break;case"teen":ageRange={min:13,max:19};break;case"adult":ageRange={min:18,max:65};break;case"senior":ageRange={min:65,max:100};break;case"all":ageRange={min:0,max:100};break;default:ageRange={min:18,max:65};break}return this.natural(ageRange)};Chance.prototype.birthday=function(options){var age=this.age(options);var currentYear=(new Date).getFullYear();if(options&&options.type){var min=new Date;var max=new Date;min.setFullYear(currentYear-age-1);max.setFullYear(currentYear-age);options=initOptions(options,{min,max})}else{options=initOptions(options,{year:currentYear-age})}return this.date(options)};Chance.prototype.cpf=function(options){options=initOptions(options,{formatted:true});var n=this.n(this.natural,9,{max:9});var d1=n[8]*2+n[7]*3+n[6]*4+n[5]*5+n[4]*6+n[3]*7+n[2]*8+n[1]*9+n[0]*10;d1=11-d1%11;if(d1>=10){d1=0}var d2=d1*2+n[8]*3+n[7]*4+n[6]*5+n[5]*6+n[4]*7+n[3]*8+n[2]*9+n[1]*10+n[0]*11;d2=11-d2%11;if(d2>=10){d2=0}var cpf=""+n[0]+n[1]+n[2]+"."+n[3]+n[4]+n[5]+"."+n[6]+n[7]+n[8]+"-"+d1+d2;return options.formatted?cpf:cpf.replace(/\D/g,"")};Chance.prototype.cnpj=function(options){options=initOptions(options,{formatted:true});var n=this.n(this.natural,12,{max:12});var d1=n[11]*2+n[10]*3+n[9]*4+n[8]*5+n[7]*6+n[6]*7+n[5]*8+n[4]*9+n[3]*2+n[2]*3+n[1]*4+n[0]*5;d1=11-d1%11;if(d1<2){d1=0}var d2=d1*2+n[11]*3+n[10]*4+n[9]*5+n[8]*6+n[7]*7+n[6]*8+n[5]*9+n[4]*2+n[3]*3+n[2]*4+n[1]*5+n[0]*6;d2=11-d2%11;if(d2<2){d2=0}var cnpj=""+n[0]+n[1]+"."+n[2]+n[3]+n[4]+"."+n[5]+n[6]+n[7]+"/"+n[8]+n[9]+n[10]+n[11]+"-"+d1+d2;return options.formatted?cnpj:cnpj.replace(/\D/g,"")};Chance.prototype.first=function(options){options=initOptions(options,{gender:this.gender(),nationality:"en"});return this.pick(this.get("firstNames")[options.gender.toLowerCase()][options.nationality.toLowerCase()])};Chance.prototype.profession=function(options){options=initOptions(options);if(options.rank){return this.pick(["Apprentice ","Junior ","Senior ","Lead "])+this.pick(this.get("profession"))}else{return this.pick(this.get("profession"))}};Chance.prototype.company=function(){return this.pick(this.get("company"))};Chance.prototype.gender=function(options){options=initOptions(options,{extraGenders:[]});return this.pick(["Male","Female"].concat(options.extraGenders))};Chance.prototype.last=function(options){options=initOptions(options,{nationality:"*"});if(options.nationality==="*"){var allLastNames=[];var lastNames=this.get("lastNames");Object.keys(lastNames).forEach((function(key){allLastNames=allLastNames.concat(lastNames[key])}));return this.pick(allLastNames)}else{return this.pick(this.get("lastNames")[options.nationality.toLowerCase()])}};Chance.prototype.israelId=function(){var x=this.string({pool:"0123456789",length:8});var y=0;for(var i=0;i<x.length;i++){var thisDigit=x[i]*(i/2===parseInt(i/2)?1:2);thisDigit=this.pad(thisDigit,2).toString();thisDigit=parseInt(thisDigit[0])+parseInt(thisDigit[1]);y=y+thisDigit}x=x+(10-parseInt(y.toString().slice(-1))).toString().slice(-1);return x};Chance.prototype.mrz=function(options){var checkDigit=function(input){var alpha="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),multipliers=[7,3,1],runningTotal=0;if(typeof input!=="string"){input=input.toString()}input.split("").forEach((function(character,idx){var pos=alpha.indexOf(character);if(pos!==-1){character=pos===0?0:pos+9}else{character=parseInt(character,10)}character*=multipliers[idx%multipliers.length];runningTotal+=character}));return runningTotal%10};var generate=function(opts){var pad=function(length){return new Array(length+1).join("<")};var number=["P<",opts.issuer,opts.last.toUpperCase(),"<<",opts.first.toUpperCase(),pad(39-(opts.last.length+opts.first.length+2)),opts.passportNumber,checkDigit(opts.passportNumber),opts.nationality,opts.dob,checkDigit(opts.dob),opts.gender,opts.expiry,checkDigit(opts.expiry),pad(14),checkDigit(pad(14))].join("");return number+checkDigit(number.substr(44,10)+number.substr(57,7)+number.substr(65,7))};var that=this;options=initOptions(options,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:function(){var date=that.birthday({type:"adult"});return[date.getFullYear().toString().substr(2),that.pad(date.getMonth()+1,2),that.pad(date.getDate(),2)].join("")}(),expiry:function(){var date=new Date;return[(date.getFullYear()+5).toString().substr(2),that.pad(date.getMonth()+1,2),that.pad(date.getDate(),2)].join("")}(),gender:this.gender()==="Female"?"F":"M",issuer:"GBR",nationality:"GBR"});return generate(options)};Chance.prototype.name=function(options){options=initOptions(options);var first=this.first(options),last=this.last(options),name;if(options.middle){name=first+" "+this.first(options)+" "+last}else if(options.middle_initial){name=first+" "+this.character({alpha:true,casing:"upper"})+". "+last}else{name=first+" "+last}if(options.prefix){name=this.prefix(options)+" "+name}if(options.suffix){name=name+" "+this.suffix(options)}return name};Chance.prototype.name_prefixes=function(gender){gender=gender||"all";gender=gender.toLowerCase();var prefixes=[{name:"Doctor",abbreviation:"Dr."}];if(gender==="male"||gender==="all"){prefixes.push({name:"Mister",abbreviation:"Mr."})}if(gender==="female"||gender==="all"){prefixes.push({name:"Miss",abbreviation:"Miss"});prefixes.push({name:"Misses",abbreviation:"Mrs."})}return prefixes};Chance.prototype.prefix=function(options){return this.name_prefix(options)};Chance.prototype.name_prefix=function(options){options=initOptions(options,{gender:"all"});return options.full?this.pick(this.name_prefixes(options.gender)).name:this.pick(this.name_prefixes(options.gender)).abbreviation};Chance.prototype.HIDN=function(){var idn_pool="0123456789";var idn_chrs="ABCDEFGHIJKLMNOPQRSTUVWXYXZ";var idn="";idn+=this.string({pool:idn_pool,length:6});idn+=this.string({pool:idn_chrs,length:2});return idn};Chance.prototype.ssn=function(options){options=initOptions(options,{ssnFour:false,dashes:true});var ssn_pool="1234567890",ssn,dash=options.dashes?"-":"";if(!options.ssnFour){ssn=this.string({pool:ssn_pool,length:3})+dash+this.string({pool:ssn_pool,length:2})+dash+this.string({pool:ssn_pool,length:4})}else{ssn=this.string({pool:ssn_pool,length:4})}return ssn};Chance.prototype.aadhar=function(options){options=initOptions(options,{onlyLastFour:false,separatedByWhiteSpace:true});var aadhar_pool="1234567890",aadhar,whiteSpace=options.separatedByWhiteSpace?" ":"";if(!options.onlyLastFour){aadhar=this.string({pool:aadhar_pool,length:4})+whiteSpace+this.string({pool:aadhar_pool,length:4})+whiteSpace+this.string({pool:aadhar_pool,length:4})}else{aadhar=this.string({pool:aadhar_pool,length:4})}return aadhar};Chance.prototype.name_suffixes=function(){var suffixes=[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}];return suffixes};Chance.prototype.suffix=function(options){return this.name_suffix(options)};Chance.prototype.name_suffix=function(options){options=initOptions(options);return options.full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation};Chance.prototype.nationalities=function(){return this.get("nationalities")};Chance.prototype.nationality=function(){var nationality=this.pick(this.nationalities());return nationality.name};Chance.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})};Chance.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})};Chance.prototype.wp8_anid2=function(){return base64(this.hash({length:32}))};Chance.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})};Chance.prototype.bb_pin=function(){return this.hash({length:8})};Chance.prototype.avatar=function(options){var url=null;var URL_BASE="//www.gravatar.com/avatar/";var PROTOCOLS={http:"http",https:"https"};var FILE_TYPES={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"};var FALLBACKS={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"};var RATINGS={g:"g",pg:"pg",r:"r",x:"x"};var opts={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(!options){opts.email=this.email();options={}}else if(typeof options==="string"){opts.email=options;options={}}else if(typeof options!=="object"){return null}else if(options.constructor==="Array"){return null}opts=initOptions(options,opts);if(!opts.email){opts.email=this.email()}opts.protocol=PROTOCOLS[opts.protocol]?opts.protocol+":":"";opts.size=parseInt(opts.size,0)?opts.size:"";opts.rating=RATINGS[opts.rating]?opts.rating:"";opts.fallback=FALLBACKS[opts.fallback]?opts.fallback:"";opts.fileExtension=FILE_TYPES[opts.fileExtension]?opts.fileExtension:"";url=opts.protocol+URL_BASE+this.bimd5.md5(opts.email)+(opts.fileExtension?"."+opts.fileExtension:"")+(opts.size||opts.rating||opts.fallback?"?":"")+(opts.size?"&s="+opts.size.toString():"")+(opts.rating?"&r="+opts.rating:"")+(opts.fallback?"&d="+opts.fallback:"");return url};Chance.prototype.color=function(options){function gray(value,delimiter){return[value,value,value].join(delimiter||"")}function rgb(hasAlpha){var rgbValue=hasAlpha?"rgba":"rgb";var alphaChannel=hasAlpha?","+this.floating({min:min_alpha,max:max_alpha}):"";var colorValue=isGrayscale?gray(this.natural({min:min_rgb,max:max_rgb}),","):this.natural({min:min_green,max:max_green})+","+this.natural({min:min_blue,max:max_blue})+","+this.natural({max:255});return rgbValue+"("+colorValue+alphaChannel+")"}function hex(start,end,withHash){var symbol=withHash?"#":"";var hexstring="";if(isGrayscale){hexstring=gray(this.pad(this.hex({min:min_rgb,max:max_rgb}),2));if(options.format==="shorthex"){hexstring=gray(this.hex({min:0,max:15}))}}else{if(options.format==="shorthex"){hexstring=this.pad(this.hex({min:Math.floor(min_red/16),max:Math.floor(max_red/16)}),1)+this.pad(this.hex({min:Math.floor(min_green/16),max:Math.floor(max_green/16)}),1)+this.pad(this.hex({min:Math.floor(min_blue/16),max:Math.floor(max_blue/16)}),1)}else if(min_red!==undefined||max_red!==undefined||min_green!==undefined||max_green!==undefined||min_blue!==undefined||max_blue!==undefined){hexstring=this.pad(this.hex({min:min_red,max:max_red}),2)+this.pad(this.hex({min:min_green,max:max_green}),2)+this.pad(this.hex({min:min_blue,max:max_blue}),2)}else{hexstring=this.pad(this.hex({min:min_rgb,max:max_rgb}),2)+this.pad(this.hex({min:min_rgb,max:max_rgb}),2)+this.pad(this.hex({min:min_rgb,max:max_rgb}),2)}}return symbol+hexstring}options=initOptions(options,{format:this.pick(["hex","shorthex","rgb","rgba","0x","name"]),grayscale:false,casing:"lower",min:0,max:255,min_red:undefined,max_red:undefined,min_green:undefined,max_green:undefined,min_blue:undefined,max_blue:undefined,min_alpha:0,max_alpha:1});var isGrayscale=options.grayscale;var min_rgb=options.min;var max_rgb=options.max;var min_red=options.min_red;var max_red=options.max_red;var min_green=options.min_green;var max_green=options.max_green;var min_blue=options.min_blue;var max_blue=options.max_blue;var min_alpha=options.min_alpha;var max_alpha=options.max_alpha;if(options.min_red===undefined){min_red=min_rgb}if(options.max_red===undefined){max_red=max_rgb}if(options.min_green===undefined){min_green=min_rgb}if(options.max_green===undefined){max_green=max_rgb}if(options.min_blue===undefined){min_blue=min_rgb}if(options.max_blue===undefined){max_blue=max_rgb}if(options.min_alpha===undefined){min_alpha=0}if(options.max_alpha===undefined){max_alpha=1}if(isGrayscale&&min_rgb===0&&max_rgb===255&&min_red!==undefined&&max_red!==undefined){min_rgb=(min_red+min_green+min_blue)/3;max_rgb=(max_red+max_green+max_blue)/3}var colorValue;if(options.format==="hex"){colorValue=hex.call(this,2,6,true)}else if(options.format==="shorthex"){colorValue=hex.call(this,1,3,true)}else if(options.format==="rgb"){colorValue=rgb.call(this,false)}else if(options.format==="rgba"){colorValue=rgb.call(this,true)}else if(options.format==="0x"){colorValue="0x"+hex.call(this,2,6)}else if(options.format==="name"){return this.pick(this.get("colorNames"))}else{throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", "0x" or "name".')}if(options.casing==="upper"){colorValue=colorValue.toUpperCase()}return colorValue};Chance.prototype.domain=function(options){options=initOptions(options);return this.word()+"."+(options.tld||this.tld())};Chance.prototype.email=function(options){options=initOptions(options);return this.word({length:options.length})+"@"+(options.domain||this.domain())};Chance.prototype.fbid=function(){return"10000"+this.string({pool:"1234567890",length:11})};Chance.prototype.google_analytics=function(){var account=this.pad(this.natural({max:999999}),6);var property=this.pad(this.natural({max:99}),2);return"UA-"+account+"-"+property};Chance.prototype.hashtag=function(){return"#"+this.word()};Chance.prototype.ip=function(){return this.natural({min:1,max:254})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({min:1,max:254})};Chance.prototype.ipv6=function(){var ip_addr=this.n(this.hash,8,{length:4});return ip_addr.join(":")};Chance.prototype.klout=function(){return this.natural({min:1,max:99})};Chance.prototype.semver=function(options){options=initOptions(options,{include_prerelease:true});var range=this.pickone(["^","~","<",">","<=",">=","="]);if(options.range){range=options.range}var prerelease="";if(options.include_prerelease){prerelease=this.weighted(["","-dev","-beta","-alpha"],[50,10,5,1])}return range+this.rpg("3d10").join(".")+prerelease};Chance.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io","ac","ad","ae","af","ag","ai","al","am","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]};Chance.prototype.tld=function(){return this.pick(this.tlds())};Chance.prototype.twitter=function(){return"@"+this.word()};Chance.prototype.url=function(options){options=initOptions(options,{protocol:"http",domain:this.domain(options),domain_prefix:"",path:this.word(),extensions:[]});var extension=options.extensions.length>0?"."+this.pick(options.extensions):"";var domain=options.domain_prefix?options.domain_prefix+"."+options.domain:options.domain;return options.protocol+"://"+domain+"/"+options.path+extension};Chance.prototype.port=function(){return this.integer({min:0,max:65535})};Chance.prototype.locale=function(options){options=initOptions(options);if(options.region){return this.pick(this.get("locale_regions"))}else{return this.pick(this.get("locale_languages"))}};Chance.prototype.locales=function(options){options=initOptions(options);if(options.region){return this.get("locale_regions")}else{return this.get("locale_languages")}};Chance.prototype.loremPicsum=function(options){options=initOptions(options,{width:500,height:500,greyscale:false,blurred:false});var greyscale=options.greyscale?"g/":"";var query=options.blurred?"/?blur":"/?random";return"https://picsum.photos/"+greyscale+options.width+"/"+options.height+query};Chance.prototype.address=function(options){options=initOptions(options);return this.natural({min:5,max:2e3})+" "+this.street(options)};Chance.prototype.altitude=function(options){options=initOptions(options,{fixed:5,min:0,max:8848});return this.floating({min:options.min,max:options.max,fixed:options.fixed})};Chance.prototype.areacode=function(options){options=initOptions(options,{parens:true});var areacode=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return options.parens?"("+areacode+")":areacode};Chance.prototype.city=function(){return this.capitalize(this.word({syllables:3}))};Chance.prototype.coordinates=function(options){return this.latitude(options)+", "+this.longitude(options)};Chance.prototype.countries=function(){return this.get("countries")};Chance.prototype.country=function(options){options=initOptions(options);var country=this.pick(this.countries());return options.raw?country:options.full?country.name:country.abbreviation};Chance.prototype.depth=function(options){options=initOptions(options,{fixed:5,min:-10994,max:0});return this.floating({min:options.min,max:options.max,fixed:options.fixed})};Chance.prototype.geohash=function(options){options=initOptions(options,{length:7});return this.string({length:options.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})};Chance.prototype.geojson=function(options){return this.latitude(options)+", "+this.longitude(options)+", "+this.altitude(options)};Chance.prototype.latitude=function(options){const[DDM,DMS,DD]=["ddm","dms","dd"];options=initOptions(options,options&&options.format&&[DDM,DMS].includes(options.format.toLowerCase())?{min:0,max:89,fixed:4}:{fixed:5,min:-90,max:90,format:DD});const format=options.format.toLowerCase();if(format===DDM||format===DMS){testRange(options.min<0||options.min>89,"Chance: Min specified is out of range. Should be between 0 - 89");testRange(options.max<0||options.max>89,"Chance: Max specified is out of range. Should be between 0 - 89");testRange(options.fixed>4,"Chance: Fixed specified should be below or equal to 4")}switch(format){case DDM:{return this.integer({min:options.min,max:options.max})+""+this.floating({min:0,max:59,fixed:options.fixed})}case DMS:{return this.integer({min:options.min,max:options.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59,fixed:options.fixed})+""}case DD:default:{return this.floating({min:options.min,max:options.max,fixed:options.fixed})}}};Chance.prototype.longitude=function(options){const[DDM,DMS,DD]=["ddm","dms","dd"];options=initOptions(options,options&&options.format&&[DDM,DMS].includes(options.format.toLowerCase())?{min:0,max:179,fixed:4}:{fixed:5,min:-180,max:180,format:DD});const format=options.format.toLowerCase();if(format===DDM||format===DMS){testRange(options.min<0||options.min>179,"Chance: Min specified is out of range. Should be between 0 - 179");testRange(options.max<0||options.max>179,"Chance: Max specified is out of range. Should be between 0 - 179");testRange(options.fixed>4,"Chance: Fixed specified should be below or equal to 4")}switch(format){case DDM:{return this.integer({min:options.min,max:options.max})+""+this.floating({min:0,max:59.9999,fixed:options.fixed})}case DMS:{return this.integer({min:options.min,max:options.max})+""+this.integer({min:0,max:59})+""+this.floating({min:0,max:59.9999,fixed:options.fixed})+""}case DD:default:{return this.floating({min:options.min,max:options.max,fixed:options.fixed})}}};Chance.prototype.phone=function(options){var self=this,numPick,ukNum=function(parts){var section=[];parts.sections.forEach((function(n){section.push(self.string({pool:"0123456789",length:n}))}));return parts.area+section.join(" ")};options=initOptions(options,{formatted:true,country:"us",mobile:false});if(!options.formatted){options.parens=false}var phone;switch(options.country){case"fr":if(!options.mobile){numPick=this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+self.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+self.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+self.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+self.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+self.string({pool:"0123456789",length:6}),"09"+self.string({pool:"0123456789",length:8})]);phone=options.formatted?numPick.match(/../g).join(" "):numPick}else{numPick=this.pick(["06","07"])+self.string({pool:"0123456789",length:8});phone=options.formatted?numPick.match(/../g).join(" "):numPick}break;case"uk":if(!options.mobile){numPick=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[6]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[6]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[6]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[6]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[6]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[6]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[6]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[6]}]);phone=options.formatted?ukNum(numPick):ukNum(numPick).replace(" ","","g")}else{numPick=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]);phone=options.formatted?ukNum(numPick):ukNum(numPick).replace(" ","")}break;case"za":if(!options.mobile){numPick=this.pick(["01"+this.pick(["0","1","2","3","4","5","6","7","8"])+self.string({pool:"0123456789",length:7}),"02"+this.pick(["1","2","3","4","7","8"])+self.string({pool:"0123456789",length:7}),"03"+this.pick(["1","2","3","5","6","9"])+self.string({pool:"0123456789",length:7}),"04"+this.pick(["1","2","3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:7}),"05"+this.pick(["1","3","4","6","7","8"])+self.string({pool:"0123456789",length:7})]);phone=options.formatted||numPick}else{numPick=this.pick(["060"+this.pick(["3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:6}),"061"+this.pick(["0","1","2","3","4","5","8"])+self.string({pool:"0123456789",length:6}),"06"+self.string({pool:"0123456789",length:7}),"071"+this.pick(["0","1","2","3","4","5","6","7","8","9"])+self.string({pool:"0123456789",length:6}),"07"+this.pick(["2","3","4","6","7","8","9"])+self.string({pool:"0123456789",length:7}),"08"+this.pick(["0","1","2","3","4","5"])+self.string({pool:"0123456789",length:7})]);phone=options.formatted||numPick}break;case"us":var areacode=this.areacode(options).toString();var exchange=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString();var subscriber=this.natural({min:1e3,max:9999}).toString();phone=options.formatted?areacode+" "+exchange+"-"+subscriber:areacode+exchange+subscriber;break;case"br":var areaCode=this.pick(["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"]);var prefix;if(options.mobile){prefix="9"+self.string({pool:"0123456789",length:4})}else{prefix=this.natural({min:2e3,max:5999}).toString()}var mcdu=self.string({pool:"0123456789",length:4});phone=options.formatted?"("+areaCode+") "+prefix+"-"+mcdu:areaCode+prefix+mcdu;break}return phone};Chance.prototype.postal=function(){var pd=this.character({pool:"XVTSRPNKLMHJGECBA"});var fsa=pd+this.natural({max:9})+this.character({alpha:true,casing:"upper"});var ldu=this.natural({max:9})+this.character({alpha:true,casing:"upper"})+this.natural({max:9});return fsa+" "+ldu};Chance.prototype.postcode=function(){var area=this.pick(this.get("postcodeAreas")).code;var district=this.natural({max:9});var subDistrict=this.bool()?this.character({alpha:true,casing:"upper"}):"";var outward=area+district+subDistrict;var sector=this.natural({max:9});var unit=this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"});var inward=sector+unit;return outward+" "+inward};Chance.prototype.counties=function(options){options=initOptions(options,{country:"uk"});return this.get("counties")[options.country.toLowerCase()]};Chance.prototype.county=function(options){return this.pick(this.counties(options)).name};Chance.prototype.provinces=function(options){options=initOptions(options,{country:"ca"});return this.get("provinces")[options.country.toLowerCase()]};Chance.prototype.province=function(options){return options&&options.full?this.pick(this.provinces(options)).name:this.pick(this.provinces(options)).abbreviation};Chance.prototype.state=function(options){return options&&options.full?this.pick(this.states(options)).name:this.pick(this.states(options)).abbreviation};Chance.prototype.states=function(options){options=initOptions(options,{country:"us",us_states_and_dc:true});var states;switch(options.country.toLowerCase()){case"us":var us_states_and_dc=this.get("us_states_and_dc"),territories=this.get("territories"),armed_forces=this.get("armed_forces");states=[];if(options.us_states_and_dc){states=states.concat(us_states_and_dc)}if(options.territories){states=states.concat(territories)}if(options.armed_forces){states=states.concat(armed_forces)}break;case"it":case"mx":states=this.get("country_regions")[options.country.toLowerCase()];break;case"uk":states=this.get("counties")[options.country.toLowerCase()];break}return states};Chance.prototype.street=function(options){options=initOptions(options,{country:"us",syllables:2});var street;switch(options.country.toLowerCase()){case"us":street=this.word({syllables:options.syllables});street=this.capitalize(street);street+=" ";street+=options.short_suffix?this.street_suffix(options).abbreviation:this.street_suffix(options).name;break;case"it":street=this.word({syllables:options.syllables});street=this.capitalize(street);street=(options.short_suffix?this.street_suffix(options).abbreviation:this.street_suffix(options).name)+" "+street;break}return street};Chance.prototype.street_suffix=function(options){options=initOptions(options,{country:"us"});return this.pick(this.street_suffixes(options))};Chance.prototype.street_suffixes=function(options){options=initOptions(options,{country:"us"});return this.get("street_suffixes")[options.country.toLowerCase()]};Chance.prototype.zip=function(options){var zip=this.n(this.natural,5,{max:9});if(options&&options.plusfour===true){zip.push("-");zip=zip.concat(this.n(this.natural,4,{max:9}))}return zip.join("")};Chance.prototype.ampm=function(){return this.bool()?"am":"pm"};Chance.prototype.date=function(options){var date_string,date;if(options&&(options.min||options.max)){options=initOptions(options,{american:true,string:false});var min=typeof options.min!=="undefined"?options.min.getTime():1;var max=typeof options.max!=="undefined"?options.max.getTime():864e13;date=new Date(this.integer({min,max}))}else{var m=this.month({raw:true});var daysInMonth=m.days;if(options&&options.month){daysInMonth=this.get("months")[(options.month%12+12)%12].days}options=initOptions(options,{year:parseInt(this.year(),10),month:m.numeric-1,day:this.natural({min:1,max:daysInMonth}),hour:this.hour({twentyfour:true}),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:true,string:false});date=new Date(options.year,options.month,options.day,options.hour,options.minute,options.second,options.millisecond)}if(options.american){date_string=date.getMonth()+1+"/"+date.getDate()+"/"+date.getFullYear()}else{date_string=date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear()}return options.string?date_string:date};Chance.prototype.hammertime=function(options){return this.date(options).getTime()};Chance.prototype.hour=function(options){options=initOptions(options,{min:options&&options.twentyfour?0:1,max:options&&options.twentyfour?23:12});testRange(options.min<0,"Chance: Min cannot be less than 0.");testRange(options.twentyfour&&options.max>23,"Chance: Max cannot be greater than 23 for twentyfour option.");testRange(!options.twentyfour&&options.max>12,"Chance: Max cannot be greater than 12.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return this.natural({min:options.min,max:options.max})};Chance.prototype.millisecond=function(){return this.natural({max:999})};Chance.prototype.minute=Chance.prototype.second=function(options){options=initOptions(options,{min:0,max:59});testRange(options.min<0,"Chance: Min cannot be less than 0.");testRange(options.max>59,"Chance: Max cannot be greater than 59.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");return this.natural({min:options.min,max:options.max})};Chance.prototype.month=function(options){options=initOptions(options,{min:1,max:12});testRange(options.min<1,"Chance: Min cannot be less than 1.");testRange(options.max>12,"Chance: Max cannot be greater than 12.");testRange(options.min>options.max,"Chance: Min cannot be greater than Max.");var month=this.pick(this.months().slice(options.min-1,options.max));return options.raw?month:month.name};Chance.prototype.months=function(){return this.get("months")};Chance.prototype.second=function(){return this.natural({max:59})};Chance.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})};Chance.prototype.weekday=function(options){options=initOptions(options,{weekday_only:false});var weekdays=["Monday","Tuesday","Wednesday","Thursday","Friday"];if(!options.weekday_only){weekdays.push("Saturday");weekdays.push("Sunday")}return this.pickone(weekdays)};Chance.prototype.year=function(options){options=initOptions(options,{min:(new Date).getFullYear()});options.max=typeof options.max!=="undefined"?options.max:options.min+100;return this.natural(options).toString()};Chance.prototype.cc=function(options){options=initOptions(options);var type,number,to_generate;type=options.type?this.cc_type({name:options.type,raw:true}):this.cc_type({raw:true});number=type.prefix.split("");to_generate=type.length-type.prefix.length-1;number=number.concat(this.n(this.integer,to_generate,{min:0,max:9}));number.push(this.luhn_calculate(number.join("")));return number.join("")};Chance.prototype.cc_types=function(){return this.get("cc_types")};Chance.prototype.cc_type=function(options){options=initOptions(options);var types=this.cc_types(),type=null;if(options.name){for(var i=0;i<types.length;i++){if(types[i].name===options.name||types[i].short_name===options.name){type=types[i];break}}if(type===null){throw new RangeError("Chance: Credit card type '"+options.name+"' is not supported")}}else{type=this.pick(types)}return options.raw?type:type.name};Chance.prototype.currency_types=function(){return this.get("currency_types")};Chance.prototype.currency=function(){return this.pick(this.currency_types())};Chance.prototype.timezones=function(){return this.get("timezones")};Chance.prototype.timezone=function(){return this.pick(this.timezones())};Chance.prototype.currency_pair=function(returnAsString){var currencies=this.unique(this.currency,2,{comparator:function(arr,val){return arr.reduce((function(acc,item){return acc||item.code===val.code}),false)}});if(returnAsString){return currencies[0].code+"/"+currencies[1].code}else{return currencies}};Chance.prototype.dollar=function(options){options=initOptions(options,{max:1e4,min:0});var dollar=this.floating({min:options.min,max:options.max,fixed:2}).toString(),cents=dollar.split(".")[1];if(cents===undefined){dollar+=".00"}else if(cents.length<2){dollar=dollar+"0"}if(dollar<0){return"-$"+dollar.replace("-","")}else{return"$"+dollar}};Chance.prototype.euro=function(options){return Number(this.dollar(options).replace("$","")).toLocaleString()+""};Chance.prototype.exp=function(options){options=initOptions(options);var exp={};exp.year=this.exp_year();if(exp.year===(new Date).getFullYear().toString()){exp.month=this.exp_month({future:true})}else{exp.month=this.exp_month()}return options.raw?exp:exp.month+"/"+exp.year};Chance.prototype.exp_month=function(options){options=initOptions(options);var month,month_int,curMonth=(new Date).getMonth()+1;if(options.future&&curMonth!==12){do{month=this.month({raw:true}).numeric;month_int=parseInt(month,10)}while(month_int<=curMonth)}else{month=this.month({raw:true}).numeric}return month};Chance.prototype.exp_year=function(){var curMonth=(new Date).getMonth()+1,curYear=(new Date).getFullYear();return this.year({min:curMonth===12?curYear+1:curYear,max:curYear+10})};Chance.prototype.vat=function(options){options=initOptions(options,{country:"it"});switch(options.country.toLowerCase()){case"it":return this.it_vat()}};Chance.prototype.iban=function(){var alpha="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var alphanum=alpha+"0123456789";var iban=this.string({length:2,pool:alpha})+this.pad(this.integer({min:0,max:99}),2)+this.string({length:4,pool:alphanum})+this.pad(this.natural(),this.natural({min:6,max:26}));return iban};Chance.prototype.it_vat=function(){var it_vat=this.natural({min:1,max:18e5});it_vat=this.pad(it_vat,7)+this.pad(this.pick(this.provinces({country:"it"})).code,3);return it_vat+this.luhn_calculate(it_vat)};Chance.prototype.cf=function(options){options=options||{};var gender=!!options.gender?options.gender:this.gender(),first=!!options.first?options.first:this.first({gender,nationality:"it"}),last=!!options.last?options.last:this.last({nationality:"it"}),birthday=!!options.birthday?options.birthday:this.birthday(),city=!!options.city?options.city:this.pickone(["A","B","C","D","E","F","G","H","I","L","M","Z"])+this.pad(this.natural({max:999}),3),cf=[],name_generator=function(name,isLast){var temp,return_value=[];if(name.length<3){return_value=name.split("").concat("XXX".split("")).splice(0,3)}else{temp=name.toUpperCase().split("").map((function(c){return"BCDFGHJKLMNPRSTVWZ".indexOf(c)!==-1?c:undefined})).join("");if(temp.length>3){if(isLast){temp=temp.substr(0,3)}else{temp=temp[0]+temp.substr(2,2)}}if(temp.length<3){return_value=temp;temp=name.toUpperCase().split("").map((function(c){return"AEIOU".indexOf(c)!==-1?c:undefined})).join("").substr(0,3-return_value.length)}return_value=return_value+temp}return return_value},date_generator=function(birthday,gender,that){var lettermonths=["A","B","C","D","E","H","L","M","P","R","S","T"];return birthday.getFullYear().toString().substr(2)+lettermonths[birthday.getMonth()]+that.pad(birthday.getDate()+(gender.toLowerCase()==="female"?40:0),2)},checkdigit_generator=function(cf){var range1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",range2="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ",evens="ABCDEFGHIJKLMNOPQRSTUVWXYZ",odds="BAKPLCQDREVOSFTGUHMINJWZYX",digit=0;for(var i=0;i<15;i++){if(i%2!==0){digit+=evens.indexOf(range2[range1.indexOf(cf[i])])}else{digit+=odds.indexOf(range2[range1.indexOf(cf[i])])}}return evens[digit%26]};cf=cf.concat(name_generator(last,true),name_generator(first),date_generator(birthday,gender,this),city.toUpperCase().split("")).join("");cf+=checkdigit_generator(cf.toUpperCase());return cf.toUpperCase()};Chance.prototype.pl_pesel=function(){var number=this.natural({min:1,max:9999999999});var arr=this.pad(number,10).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(1*arr[0]+3*arr[1]+7*arr[2]+9*arr[3]+1*arr[4]+3*arr[5]+7*arr[6]+9*arr[7]+1*arr[8]+3*arr[9])%10;if(controlNumber!==0){controlNumber=10-controlNumber}return arr.join("")+controlNumber};Chance.prototype.pl_nip=function(){var number=this.natural({min:1,max:999999999});var arr=this.pad(number,9).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(6*arr[0]+5*arr[1]+7*arr[2]+2*arr[3]+3*arr[4]+4*arr[5]+5*arr[6]+6*arr[7]+7*arr[8])%11;if(controlNumber===10){return this.pl_nip()}return arr.join("")+controlNumber};Chance.prototype.pl_regon=function(){var number=this.natural({min:1,max:99999999});var arr=this.pad(number,8).split("");for(var i=0;i<arr.length;i++){arr[i]=parseInt(arr[i])}var controlNumber=(8*arr[0]+9*arr[1]+2*arr[2]+3*arr[3]+4*arr[4]+5*arr[5]+6*arr[6]+7*arr[7])%11;if(controlNumber===10){controlNumber=0}return arr.join("")+controlNumber};Chance.prototype.note=function(options){options=initOptions(options,{notes:"flatKey"});var scales={naturals:["C","D","E","F","G","A","B"],flats:["D","E","G","A","B"],sharps:["C","D","F","G","A"]};scales.all=scales.naturals.concat(scales.flats.concat(scales.sharps));scales.flatKey=scales.naturals.concat(scales.flats);scales.sharpKey=scales.naturals.concat(scales.sharps);return this.pickone(scales[options.notes])};Chance.prototype.midi_note=function(options){var min=0;var max=127;options=initOptions(options,{min,max});return this.integer({min:options.min,max:options.max})};Chance.prototype.chord_quality=function(options){options=initOptions(options,{jazz:true});var chord_qualities=["maj","min","aug","dim"];if(options.jazz){chord_qualities=["maj7","min7","7","sus","dim",""]}return this.pickone(chord_qualities)};Chance.prototype.chord=function(options){options=initOptions(options);return this.note(options)+this.chord_quality(options)};Chance.prototype.tempo=function(options){var min=40;var max=320;options=initOptions(options,{min,max});return this.integer({min:options.min,max:options.max})};Chance.prototype.coin=function(){return this.bool()?"heads":"tails"};function diceFn(range){return function(){return this.natural(range)}}Chance.prototype.d4=diceFn({min:1,max:4});Chance.prototype.d6=diceFn({min:1,max:6});Chance.prototype.d8=diceFn({min:1,max:8});Chance.prototype.d10=diceFn({min:1,max:10});Chance.prototype.d12=diceFn({min:1,max:12});Chance.prototype.d20=diceFn({min:1,max:20});Chance.prototype.d30=diceFn({min:1,max:30});Chance.prototype.d100=diceFn({min:1,max:100});Chance.prototype.rpg=function(thrown,options){options=initOptions(options);if(!thrown){throw new RangeError("Chance: A type of die roll must be included")}else{var bits=thrown.toLowerCase().split("d"),rolls=[];if(bits.length!==2||!parseInt(bits[0],10)||!parseInt(bits[1],10)){throw new Error("Chance: Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die")}for(var i=bits[0];i>0;i--){rolls[i-1]=this.natural({min:1,max:bits[1]})}return typeof options.sum!=="undefined"&&options.sum?rolls.reduce((function(p,c){return p+c})):rolls}};Chance.prototype.guid=function(options){options=initOptions(options,{version:5});var guid_pool="abcdef1234567890",variant_pool="ab89",guid=this.string({pool:guid_pool,length:8})+"-"+this.string({pool:guid_pool,length:4})+"-"+options.version+this.string({pool:guid_pool,length:3})+"-"+this.string({pool:variant_pool,length:1})+this.string({pool:guid_pool,length:3})+"-"+this.string({pool:guid_pool,length:12});return guid};Chance.prototype.hash=function(options){options=initOptions(options,{length:40,casing:"lower"});var pool=options.casing==="upper"?HEX_POOL.toUpperCase():HEX_POOL;return this.string({pool,length:options.length})};Chance.prototype.luhn_check=function(num){var str=num.toString();var checkDigit=+str.substring(str.length-1);return checkDigit===this.luhn_calculate(+str.substring(0,str.length-1))};Chance.prototype.luhn_calculate=function(num){var digits=num.toString().split("").reverse();var sum=0;var digit;for(var i=0,l=digits.length;l>i;++i){digit=+digits[i];if(i%2===0){digit*=2;if(digit>9){digit-=9}}sum+=digit}return sum*9%10};Chance.prototype.md5=function(options){var opts={str:"",key:null,raw:false};if(!options){opts.str=this.string();options={}}else if(typeof options==="string"){opts.str=options;options={}}else if(typeof options!=="object"){return null}else if(options.constructor==="Array"){return null}opts=initOptions(options,opts);if(!opts.str){throw new Error("A parameter is required to return an md5 hash.")}return this.bimd5.md5(opts.str,opts.key,opts.raw)};Chance.prototype.file=function(options){var fileOptions=options||{};var poolCollectionKey="fileExtension";var typeRange=Object.keys(this.get("fileExtension"));var fileName;var fileExtension;fileName=this.word({length:fileOptions.length});if(fileOptions.extension){fileExtension=fileOptions.extension;return fileName+"."+fileExtension}if(fileOptions.extensions){if(Array.isArray(fileOptions.extensions)){fileExtension=this.pickone(fileOptions.extensions);return fileName+"."+fileExtension}else if(fileOptions.extensions.constructor===Object){var extensionObjectCollection=fileOptions.extensions;var keys=Object.keys(extensionObjectCollection);fileExtension=this.pickone(extensionObjectCollection[this.pickone(keys)]);return fileName+"."+fileExtension}throw new Error("Chance: Extensions must be an Array or Object")}if(fileOptions.fileType){var fileType=fileOptions.fileType;if(typeRange.indexOf(fileType)!==-1){fileExtension=this.pickone(this.get(poolCollectionKey)[fileType]);return fileName+"."+fileExtension}throw new RangeError("Chance: Expect file type value to be 'raster', 'vector', '3d' or 'document'")}fileExtension=this.pickone(this.get(poolCollectionKey)[this.pickone(typeRange)]);return fileName+"."+fileExtension};var data={firstNames:{male:{en:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],it:["Adolfo","Alberto","Aldo","Alessandro","Alessio","Alfredo","Alvaro","Andrea","Angelo","Angiolo","Antonino","Antonio","Attilio","Benito","Bernardo","Bruno","Carlo","Cesare","Christian","Claudio","Corrado","Cosimo","Cristian","Cristiano","Daniele","Dario","David","Davide","Diego","Dino","Domenico","Duccio","Edoardo","Elia","Elio","Emanuele","Emiliano","Emilio","Enrico","Enzo","Ettore","Fabio","Fabrizio","Federico","Ferdinando","Fernando","Filippo","Francesco","Franco","Gabriele","Giacomo","Giampaolo","Giampiero","Giancarlo","Gianfranco","Gianluca","Gianmarco","Gianni","Gino","Giorgio","Giovanni","Giuliano","Giulio","Giuseppe","Graziano","Gregorio","Guido","Iacopo","Jacopo","Lapo","Leonardo","Lorenzo","Luca","Luciano","Luigi","Manuel","Marcello","Marco","Marino","Mario","Massimiliano","Massimo","Matteo","Mattia","Maurizio","Mauro","Michele","Mirko","Mohamed","Nello","Neri","Niccol","Nicola","Osvaldo","Otello","Paolo","Pier Luigi","Piero","Pietro","Raffaele","Remo","Renato","Renzo","Riccardo","Roberto","Rolando","Romano","Salvatore","Samuele","Sandro","Sergio","Silvano","Simone","Stefano","Thomas","Tommaso","Ubaldo","Ugo","Umberto","Valerio","Valter","Vasco","Vincenzo","Vittorio"],nl:["Aaron","Abel","Adam","Adriaan","Albert","Alexander","Ali","Arjen","Arno","Bart","Bas","Bastiaan","Benjamin","Bob","Boris","Bram","Brent","Cas","Casper","Chris","Christiaan","Cornelis","Daan","Daley","Damian","Dani","Daniel","Danil","David","Dean","Dirk","Dylan","Egbert","Elijah","Erik","Erwin","Evert","Ezra","Fabian","Fedde","Finn","Florian","Floris","Frank","Frans","Frederik","Freek","Geert","Gerard","Gerben","Gerrit","Gijs","Guus","Hans","Hendrik","Henk","Herman","Hidde","Hugo","Jaap","Jan Jaap","Jan-Willem","Jack","Jacob","Jan","Jason","Jasper","Jayden","Jelle","Jelte","Jens","Jeroen","Jesse","Jim","Job","Joep","Johannes","John","Jonathan","Joris","Joshua","Jol","Julian","Kees","Kevin","Koen","Lars","Laurens","Leendert","Lennard","Lodewijk","Luc","Luca","Lucas","Lukas","Luuk","Maarten","Marcus","Martijn","Martin","Matthijs","Maurits","Max","Mees","Melle","Mick","Mika","Milan","Mohamed","Mohammed","Morris","Muhammed","Nathan","Nick","Nico","Niek","Niels","Noah","Noud","Olivier","Oscar","Owen","Paul","Pepijn","Peter","Pieter","Pim","Quinten","Reinier","Rens","Robin","Ruben","Sam","Samuel","Sander","Sebastiaan","Sem","Sep","Sepp","Siem","Simon","Stan","Stef","Steven","Stijn","Sven","Teun","Thijmen","Thijs","Thomas","Tijn","Tim","Timo","Tobias","Tom","Victor","Vince","Willem","Wim","Wouter","Yusuf"],fr:["Aaron","Abdon","Abel","Ablard","Abelin","Abondance","Abraham","Absalon","Acace","Achaire","Achille","Adalard","Adalbald","Adalbron","Adalbert","Adalric","Adam","Adegrin","Adel","Adelin","Andelin","Adelphe","Adam","Adodat","Adhmar","Adjutor","Adolphe","Adonis","Adon","Adrien","Agapet","Agathange","Agathon","Agilbert","Agnor","Agnan","Aignan","Agrippin","Aimable","Aim","Alain","Alban","Albin","Aubin","Albric","Albert","Albertet","Alcibiade","Alcide","Alce","Alcime","Aldonce","Aldric","Aldric","Aleaume","Alexandre","Alexis","Alix","Alliaume","Aleaume","Almine","Almire","Alos","Alphe","Alphonse","Alpinien","Alverde","Amalric","Amaury","Amandin","Amant","Ambroise","Amde","Amlien","Amiel","Amour","Anal","Anastase","Anatole","Ancelin","Andol","Andoche","Andr","Andoche","Ange","Angelin","Angilbe","Anglebert","Angoustan","Anicet","Anne","Annibal","Ansbert","Anselme","Anthelme","Antheaume","Anthime","Antide","Antoine","Antonius","Antonin","Apollinaire","Apollon","Aquilin","Arcade","Archambaud","Archambeau","Archange","Archibald","Arian","Ariel","Ariste","Aristide","Armand","Armel","Armin","Arnould","Arnaud","Arolde","Arsne","Arsino","Arthaud","Arthme","Arthur","Ascelin","Athanase","Aubry","Audebert","Audouin","Audran","Audric","Auguste","Augustin","Aurle","Aurlien","Aurian","Auxence","Axel","Aymard","Aymeric","Aymon","Aymond","Balthazar","Baptiste","Barnab","Barthlemy","Bartime","Basile","Bastien","Baudouin","Bnigne","Benjamin","Benot","Brenger","Brard","Bernard","Bertrand","Blaise","Bon","Boniface","Bouchard","Brice","Brieuc","Bruno","Brunon","Calixte","Calliste","Camlien","Camille","Camillien","Candide","Caribert","Carloman","Cassandre","Cassien","Cdric","Cleste","Clestin","Clien","Csaire","Csar","Charles","Charlemagne","Childebert","Chilpric","Chrtien","Christian","Christodule","Christophe","Chrysostome","Clarence","Claude","Claudien","Clandre","Clment","Clotaire","Cme","Constance","Constant","Constantin","Corentin","Cyprien","Cyriaque","Cyrille","Cyril","Damien","Daniel","David","Delphin","Denis","Dsir","Didier","Dieudonn","Dimitri","Dominique","Dorian","Dorothe","Edgard","Edmond","douard","leuthre","lie","lise","meric","mile","milien","Emmanuel","Enguerrand","piphane","ric","Esprit","Ernest","tienne","Eubert","Eudes","Eudoxe","Eugne","Eusbe","Eustache","variste","vrard","Fabien","Fabrice","Falba","Flicit","Flix","Ferdinand","Fiacre","Fidle","Firmin","Flavien","Flodoard","Florent","Florentin","Florestan","Florian","Fortun","Foulques","Francisque","Franois","Franais","Franciscus","Francs","Frdric","Fulbert","Fulcran","Fulgence","Gabin","Gabriel","Gal","Garnier","Gaston","Gaspard","Gatien","Gaud","Gautier","Gdon","Geoffroy","Georges","Graud","Grard","Gerbert","Germain","Gervais","Ghislain","Gilbert","Gilles","Girart","Gislebert","Gondebaud","Gonthier","Gontran","Gonzague","Grgoire","Gurin","Gui","Guillaume","Gustave","Guy","Guyot","Hardouin","Hector","Hdelin","Hlier","Henri","Herbert","Herluin","Herv","Hilaire","Hildebert","Hincmar","Hippolyte","Honor","Hubert","Hugues","Innocent","Isabeau","Isidore","Jacques","Japhet","Jason","Jean","Jeannel","Jeannot","Jrmie","Jrme","Joachim","Joanny","Job","Jocelyn","Jol","Johan","Jonas","Jonathan","Joseph","Josse","Josselin","Jourdain","Jude","Judical","Jules","Julien","Juste","Justin","Lambert","Landry","Laurent","Lazare","Landre","Lon","Lonard","Lopold","Leu","Loup","Leufroy","Libre","Litald","Lionel","Loc","Longin","Lorrain","Lorraine","Lothaire","Louis","Loup","Luc","Lucas","Lucien","Ludolphe","Ludovic","Macaire","Malo","Mamert","Manass","Marc","Marceau","Marcel","Marcelin","Marius","Marseille","Martial","Martin","Mathurin","Matthias","Mathias","Matthieu","Maugis","Maurice","Mauricet","Maxence","Maxime","Maximilien","Mayeul","Mdric","Melchior","Mence","Merlin","Mrove","Michal","Michel","Mose","Morgan","Nathan","Nathanal","Narcisse","Nhmie","Nestor","Nestor","Nicphore","Nicolas","No","Nol","Norbert","Normand","Normands","Octave","Odilon","Odon","Oger","Olivier","Oury","Pacme","Palmon","Parfait","Pascal","Paterne","Patrice","Paul","Ppin","Perceval","Philmon","Philibert","Philippe","Philothe","Pie","Pierre","Pierrick","Prosper","Quentin","Raoul","Raphal","Raymond","Rgis","Rjean","Rmi","Renaud","Ren","Reybaud","Richard","Robert","Roch","Rodolphe","Rodrigue","Roger","Roland","Romain","Romuald","Romo","Rome","Ronan","Roselin","Salomon","Samuel","Savin","Savinien","Scholastique","Sbastien","Sraphin","Serge","Sverin","Sidoine","Sigebert","Sigismond","Silvre","Simon","Simon","Sixte","Stanislas","Stphane","Stephan","Sylvain","Sylvestre","Tancrde","Tanguy","Taurin","Thodore","Thodose","Thophile","Thophraste","Thibault","Thibert","Thierry","Thomas","Timolon","Timothe","Titien","Tonnin","Toussaint","Trajan","Tristan","Turold","Tim","Ulysse","Urbain","Valentin","Valre","Valry","Venance","Venant","Venceslas","Vianney","Victor","Victorien","Victorin","Vigile","Vincent","Vital","Vitalien","Vivien","Waleran","Wandrille","Xavier","Xnophon","Yves","Zacharie","Zach","Zphirin"]},female:{en:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"],it:["Ada","Adriana","Alessandra","Alessia","Alice","Angela","Anna","Anna Maria","Annalisa","Annita","Annunziata","Antonella","Arianna","Asia","Assunta","Aurora","Barbara","Beatrice","Benedetta","Bianca","Bruna","Camilla","Carla","Carlotta","Carmela","Carolina","Caterina","Catia","Cecilia","Chiara","Cinzia","Clara","Claudia","Costanza","Cristina","Daniela","Debora","Diletta","Dina","Donatella","Elena","Eleonora","Elisa","Elisabetta","Emanuela","Emma","Eva","Federica","Fernanda","Fiorella","Fiorenza","Flora","Franca","Francesca","Gabriella","Gaia","Gemma","Giada","Gianna","Gina","Ginevra","Giorgia","Giovanna","Giulia","Giuliana","Giuseppa","Giuseppina","Grazia","Graziella","Greta","Ida","Ilaria","Ines","Iolanda","Irene","Irma","Isabella","Jessica","Laura","Lea","Letizia","Licia","Lidia","Liliana","Lina","Linda","Lisa","Livia","Loretta","Luana","Lucia","Luciana","Lucrezia","Luisa","Manuela","Mara","Marcella","Margherita","Maria","Maria Cristina","Maria Grazia","Maria Luisa","Maria Pia","Maria Teresa","Marina","Marisa","Marta","Martina","Marzia","Matilde","Melissa","Michela","Milena","Mirella","Monica","Natalina","Nella","Nicoletta","Noemi","Olga","Paola","Patrizia","Piera","Pierina","Raffaella","Rebecca","Renata","Rina","Rita","Roberta","Rosa","Rosanna","Rossana","Rossella","Sabrina","Sandra","Sara","Serena","Silvana","Silvia","Simona","Simonetta","Sofia","Sonia","Stefania","Susanna","Teresa","Tina","Tiziana","Tosca","Valentina","Valeria","Vanda","Vanessa","Vanna","Vera","Veronica","Vilma","Viola","Virginia","Vittoria"],nl:["Ada","Arianne","Afke","Amanda","Amber","Amy","Aniek","Anita","Anja","Anna","Anne","Annelies","Annemarie","Annette","Anouk","Astrid","Aukje","Barbara","Bianca","Carla","Carlijn","Carolien","Chantal","Charlotte","Claudia","Danille","Debora","Diane","Dora","Eline","Elise","Ella","Ellen","Emma","Esmee","Evelien","Esther","Erica","Eva","Femke","Fleur","Floor","Froukje","Gea","Gerda","Hanna","Hanneke","Heleen","Hilde","Ilona","Ina","Inge","Ingrid","Iris","Isabel","Isabelle","Janneke","Jasmijn","Jeanine","Jennifer","Jessica","Johanna","Joke","Julia","Julie","Karen","Karin","Katja","Kim","Lara","Laura","Lena","Lianne","Lieke","Lilian","Linda","Lisa","Lisanne","Lotte","Louise","Maaike","Manon","Marga","Maria","Marissa","Marit","Marjolein","Martine","Marleen","Melissa","Merel","Miranda","Michelle","Mirjam","Mirthe","Naomi","Natalie","Nienke","Nina","Noortje","Olivia","Patricia","Paula","Paulien","Ramona","Ria","Rianne","Roos","Rosanne","Ruth","Sabrina","Sandra","Sanne","Sara","Saskia","Silvia","Sofia","Sophie","Sonja","Suzanne","Tamara","Tess","Tessa","Tineke","Valerie","Vanessa","Veerle","Vera","Victoria","Wendy","Willeke","Yvonne","Zo"],fr:["Abdon","Abel","Abigalle","Abigal","Acacius","Acanthe","Adalbert","Adalsinde","Adegrine","Adlade","Adle","Adlie","Adeline","Adeltrude","Adolphe","Adonis","Adraste","Adrehilde","Adrienne","Agathe","Agilbert","Agla","Aignan","Agneflte","Agns","Agrippine","Aim","Alaine","Alas","Albane","Albrade","Alberte","Alcide","Alcine","Alcyone","Aldegonde","Aleth","Alexandrine","Alexine","Alice","Alinor","Aliette","Aline","Alix","Aliz","Alose","Aloyse","Alphonsine","Althe","Amaliane","Amalthe","Amande","Amandine","Amant","Amarande","Amaranthe","Amaryllis","Ambre","Ambroisie","Amlie","Amthyste","Aminte","Anal","Anas","Anastasie","Anatole","Ancelin","Andre","Anmone","Angadrme","Angle","Angeline","Anglique","Angilbert","Anicet","Annabelle","Anne","Annette","Annick","Annie","Annonciade","Ansbert","Anstrudie","Anthelme","Antigone","Antoinette","Antonine","Aphlie","Apolline","Apollonie","Aquiline","Arabelle","Arcadie","Archange","Argine","Ariane","Aricie","Ariel","Arielle","Arlette","Armance","Armande","Armandine","Armelle","Armide","Armelle","Armin","Arnaud","Arsne","Arsino","Artmis","Arthur","Ascelin","Ascension","Assomption","Astart","Astrie","Astre","Astrid","Athalie","Athanasie","Athina","Aube","Albert","Aude","Audrey","Augustine","Aure","Aurlie","Aurlien","Aurle","Aurore","Auxence","Aveline","Abigalle","Avoye","Axelle","Aymard","Azale","Adle","Adeline","Barbe","Basilisse","Bathilde","Batrice","Batrix","Bndicte","Brengre","Bernadette","Berthe","Bertille","Beuve","Blanche","Blanc","Blandine","Brigitte","Brune","Brunehilde","Callista","Camille","Capucine","Carine","Caroline","Cassandre","Catherine","Ccile","Cleste","Clestine","Cline","Chantal","Charlne","Charline","Charlotte","Chlo","Christelle","Christiane","Christine","Claire","Clara","Claude","Claudine","Clarisse","Clmence","Clmentine","Clo","Clio","Clotilde","Coline","Conception","Constance","Coralie","Coraline","Corentine","Corinne","Cyrielle","Daniel","Daniel","Daphn","Dbora","Delphine","Denise","Diane","Dieudonn","Dominique","Doriane","Dorothe","Douce","dith","Edme","lonore","liane","lia","liette","lisabeth","lise","Ella","lodie","lose","Elsa","meline","mrance","mrentienne","mrencie","milie","Emma","Emmanuelle","Emmelie","Ernestine","Esther","Estelle","Eudoxie","Eugnie","Eulalie","Euphrasie","Eusbie","vangline","Eva","ve","velyne","Fanny","Fantine","Faustine","Flicie","Fernande","Flavie","Fleur","Flore","Florence","Florie","Fortun","France","Francia","Franoise","Francine","Gabrielle","Galle","Garance","Genevive","Georgette","Gerberge","Germaine","Gertrude","Gisle","Guenivre","Guilhemine","Guillemette","Gustave","Gwenael","Hlne","Hlose","Henriette","Hermine","Hermione","Hippolyte","Honorine","Hortense","Huguette","Ines","Irne","Irina","Iris","Isabeau","Isabelle","Iseult","Isolde","Ismrie","Jacinthe","Jacqueline","Jade","Janine","Jeanne","Jocelyne","Jolle","Josphine","Judith","Julia","Julie","Jules","Juliette","Justine","Katy","Kathy","Katie","Laura","Laure","Laureline","Laurence","Laurene","Lauriane","Laurianne","Laurine","La","Lna","Lonie","Lon","Lontine","Lorraine","Lucie","Lucienne","Lucille","Ludivine","Lydie","Lydie","Megane","Madeleine","Magali","Maguelone","Mallaury","Manon","Marceline","Margot","Marguerite","Marianne","Marie","Myriam","Marie","Marine","Marion","Marlne","Marthe","Martine","Mathilde","Maud","Maureen","Mauricette","Maxime","Mlanie","Melissa","Mlissandre","Mlisande","Mlodie","Michel","Micheline","Mireille","Miriam","Mose","Monique","Morgane","Muriel","Mylne","Nadge","Nadine","Nathalie","Nicole","Nicolette","Nine","Nol","Nomie","Ocane","Odette","Odile","Olive","Olivia","Olympe","Ombline","Ombeline","Ophlie","Oriande","Oriane","Ozanne","Pascale","Pascaline","Paule","Paulette","Pauline","Priscille","Prisca","Prisque","Pcine","Plagie","Pnlope","Perrine","Ptronille","Philippine","Philomne","Philothe","Primerose","Prudence","Pulchrie","Quentine","Quita","Quintia","Quintilla","Rachel","Raphalle","Raymonde","Rebecca","Rgine","Rjeanne","Ren","Rita","Rita","Rolande","Romane","Rosalie","Rose","Roseline","Sabine","Salom","Sandra","Sandrine","Sarah","Sgolne","Sverine","Sibylle","Simone","Sixt","Solange","Soline","Solne","Sophie","Stphanie","Suzanne","Sylvain","Sylvie","Tatiana","Thas","Thodora","Thrse","Tiphaine","Ursule","Valentine","Valrie","Vronique","Victoire","Victorine","Vinciane","Violette","Virginie","Viviane","Xavire","Yolande","Ysaline","Yvette","Yvonne","Zlie","Zita","Zo"]}},lastNames:{en:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],it:["Acciai","Aglietti","Agostini","Agresti","Ahmed","Aiazzi","Albanese","Alberti","Alessi","Alfani","Alinari","Alterini","Amato","Ammannati","Ancillotti","Andrei","Andreini","Andreoni","Angeli","Anichini","Antonelli","Antonini","Arena","Ariani","Arnetoli","Arrighi","Baccani","Baccetti","Bacci","Bacherini","Badii","Baggiani","Baglioni","Bagni","Bagnoli","Baldassini","Baldi","Baldini","Ballerini","Balli","Ballini","Balloni","Bambi","Banchi","Bandinelli","Bandini","Bani","Barbetti","Barbieri","Barchielli","Bardazzi","Bardelli","Bardi","Barducci","Bargellini","Bargiacchi","Barni","Baroncelli","Baroncini","Barone","Baroni","Baronti","Bartalesi","Bartoletti","Bartoli","Bartolini","Bartoloni","Bartolozzi","Basagni","Basile","Bassi","Batacchi","Battaglia","Battaglini","Bausi","Becagli","Becattini","Becchi","Becucci","Bellandi","Bellesi","Belli","Bellini","Bellucci","Bencini","Benedetti","Benelli","Beni","Benini","Bensi","Benucci","Benvenuti","Berlincioni","Bernacchioni","Bernardi","Bernardini","Berni","Bernini","Bertelli","Berti","Bertini","Bessi","Betti","Bettini","Biagi","Biagini","Biagioni","Biagiotti","Biancalani","Bianchi","Bianchini","Bianco","Biffoli","Bigazzi","Bigi","Biliotti","Billi","Binazzi","Bindi","Bini","Biondi","Bizzarri","Bocci","Bogani","Bolognesi","Bonaiuti","Bonanni","Bonciani","Boncinelli","Bondi","Bonechi","Bongini","Boni","Bonini","Borchi","Boretti","Borghi","Borghini","Borgioli","Borri","Borselli","Boschi","Bottai","Bracci","Braccini","Brandi","Braschi","Bravi","Brazzini","Breschi","Brilli","Brizzi","Brogelli","Brogi","Brogioni","Brunelli","Brunetti","Bruni","Bruno","Brunori","Bruschi","Bucci","Bucciarelli","Buccioni","Bucelli","Bulli","Burberi","Burchi","Burgassi","Burroni","Bussotti","Buti","Caciolli","Caiani","Calabrese","Calamai","Calamandrei","Caldini","Calo'","Calonaci","Calosi","Calvelli","Cambi","Camiciottoli","Cammelli","Cammilli","Campolmi","Cantini","Capanni","Capecchi","Caponi","Cappelletti","Cappelli","Cappellini","Cappugi","Capretti","Caputo","Carbone","Carboni","Cardini","Carlesi","Carletti","Carli","Caroti","Carotti","Carrai","Carraresi","Carta","Caruso","Casalini","Casati","Caselli","Casini","Castagnoli","Castellani","Castelli","Castellucci","Catalano","Catarzi","Catelani","Cavaciocchi","Cavallaro","Cavallini","Cavicchi","Cavini","Ceccarelli","Ceccatelli","Ceccherelli","Ceccherini","Cecchi","Cecchini","Cecconi","Cei","Cellai","Celli","Cellini","Cencetti","Ceni","Cenni","Cerbai","Cesari","Ceseri","Checcacci","Checchi","Checcucci","Cheli","Chellini","Chen","Cheng","Cherici","Cherubini","Chiaramonti","Chiarantini","Chiarelli","Chiari","Chiarini","Chiarugi","Chiavacci","Chiesi","Chimenti","Chini","Chirici","Chiti","Ciabatti","Ciampi","Cianchi","Cianfanelli","Cianferoni","Ciani","Ciapetti","Ciappi","Ciardi","Ciatti","Cicali","Ciccone","Cinelli","Cini","Ciobanu","Ciolli","Cioni","Cipriani","Cirillo","Cirri","Ciucchi","Ciuffi","Ciulli","Ciullini","Clemente","Cocchi","Cognome","Coli","Collini","Colombo","Colzi","Comparini","Conforti","Consigli","Conte","Conti","Contini","Coppini","Coppola","Corsi","Corsini","Corti","Cortini","Cosi","Costa","Costantini","Costantino","Cozzi","Cresci","Crescioli","Cresti","Crini","Curradi","D'Agostino","D'Alessandro","D'Amico","D'Angelo","Daddi","Dainelli","Dallai","Danti","Davitti","De Angelis","De Luca","De Marco","De Rosa","De Santis","De Simone","De Vita","Degl'Innocenti","Degli Innocenti","Dei","Del Lungo","Del Re","Di Marco","Di Stefano","Dini","Diop","Dobre","Dolfi","Donati","Dondoli","Dong","Donnini","Ducci","Dumitru","Ermini","Esposito","Evangelisti","Fabbri","Fabbrini","Fabbrizzi","Fabbroni","Fabbrucci","Fabiani","Facchini","Faggi","Fagioli","Failli","Faini","Falciani","Falcini","Falcone","Fallani","Falorni","Falsini","Falugiani","Fancelli","Fanelli","Fanetti","Fanfani","Fani","Fantappie'","Fantechi","Fanti","Fantini","Fantoni","Farina","Fattori","Favilli","Fedi","Fei","Ferrante","Ferrara","Ferrari","Ferraro","Ferretti","Ferri","Ferrini","Ferroni","Fiaschi","Fibbi","Fiesoli","Filippi","Filippini","Fini","Fioravanti","Fiore","Fiorentini","Fiorini","Fissi","Focardi","Foggi","Fontana","Fontanelli","Fontani","Forconi","Formigli","Forte","Forti","Fortini","Fossati","Fossi","Francalanci","Franceschi","Franceschini","Franchi","Franchini","Franci","Francini","Francioni","Franco","Frassineti","Frati","Fratini","Frilli","Frizzi","Frosali","Frosini","Frullini","Fusco","Fusi","Gabbrielli","Gabellini","Gagliardi","Galanti","Galardi","Galeotti","Galletti","Galli","Gallo","Gallori","Gambacciani","Gargani","Garofalo","Garuglieri","Gashi","Gasperini","Gatti","Gelli","Gensini","Gentile","Gentili","Geri","Gerini","Gheri","Ghini","Giachetti","Giachi","Giacomelli","Gianassi","Giani","Giannelli","Giannetti","Gianni","Giannini","Giannoni","Giannotti","Giannozzi","Gigli","Giordano","Giorgetti","Giorgi","Giovacchini","Giovannelli","Giovannetti","Giovannini","Giovannoni","Giuliani","Giunti","Giuntini","Giusti","Gonnelli","Goretti","Gori","Gradi","Gramigni","Grassi","Grasso","Graziani","Grazzini","Greco","Grifoni","Grillo","Grimaldi","Grossi","Gualtieri","Guarducci","Guarino","Guarnieri","Guasti","Guerra","Guerri","Guerrini","Guidi","Guidotti","He","Hoxha","Hu","Huang","Iandelli","Ignesti","Innocenti","Jin","La Rosa","Lai","Landi","Landini","Lanini","Lapi","Lapini","Lari","Lascialfari","Lastrucci","Latini","Lazzeri","Lazzerini","Lelli","Lenzi","Leonardi","Leoncini","Leone","Leoni","Lepri","Li","Liao","Lin","Linari","Lippi","Lisi","Livi","Lombardi","Lombardini","Lombardo","Longo","Lopez","Lorenzi","Lorenzini","Lorini","Lotti","Lu","Lucchesi","Lucherini","Lunghi","Lupi","Madiai","Maestrini","Maffei","Maggi","Maggini","Magherini","Magini","Magnani","Magnelli","Magni","Magnolfi","Magrini","Malavolti","Malevolti","Manca","Mancini","Manetti","Manfredi","Mangani","Mannelli","Manni","Mannini","Mannucci","Manuelli","Manzini","Marcelli","Marchese","Marchetti","Marchi","Marchiani","Marchionni","Marconi","Marcucci","Margheri","Mari","Mariani","Marilli","Marinai","Marinari","Marinelli","Marini","Marino","Mariotti","Marsili","Martelli","Martinelli","Martini","Martino","Marzi","Masi","Masini","Masoni","Massai","Materassi","Mattei","Matteini","Matteucci","Matteuzzi","Mattioli","Mattolini","Matucci","Mauro","Mazzanti","Mazzei","Mazzetti","Mazzi","Mazzini","Mazzocchi","Mazzoli","Mazzoni","Mazzuoli","Meacci","Mecocci","Meini","Melani","Mele","Meli","Mengoni","Menichetti","Meoni","Merlini","Messeri","Messina","Meucci","Miccinesi","Miceli","Micheli","Michelini","Michelozzi","Migliori","Migliorini","Milani","Miniati","Misuri","Monaco","Montagnani","Montagni","Montanari","Montelatici","Monti","Montigiani","Montini","Morandi","Morandini","Morelli","Moretti","Morganti","Mori","Morini","Moroni","Morozzi","Mugnai","Mugnaini","Mustafa","Naldi","Naldini","Nannelli","Nanni","Nannini","Nannucci","Nardi","Nardini","Nardoni","Natali","Ndiaye","Nencetti","Nencini","Nencioni","Neri","Nesi","Nesti","Niccolai","Niccoli","Niccolini","Nigi","Nistri","Nocentini","Noferini","Novelli","Nucci","Nuti","Nutini","Oliva","Olivieri","Olmi","Orlandi","Orlandini","Orlando","Orsini","Ortolani","Ottanelli","Pacciani","Pace","Paci","Pacini","Pagani","Pagano","Paggetti","Pagliai","Pagni","Pagnini","Paladini","Palagi","Palchetti","Palloni","Palmieri","Palumbo","Pampaloni","Pancani","Pandolfi","Pandolfini","Panerai","Panichi","Paoletti","Paoli","Paolini","Papi","Papini","Papucci","Parenti","Parigi","Parisi","Parri","Parrini","Pasquini","Passeri","Pecchioli","Pecorini","Pellegrini","Pepi","Perini","Perrone","Peruzzi","Pesci","Pestelli","Petri","Petrini","Petrucci","Pettini","Pezzati","Pezzatini","Piani","Piazza","Piazzesi","Piazzini","Piccardi","Picchi","Piccini","Piccioli","Pieraccini","Pieraccioni","Pieralli","Pierattini","Pieri","Pierini","Pieroni","Pietrini","Pini","Pinna","Pinto","Pinzani","Pinzauti","Piras","Pisani","Pistolesi","Poggesi","Poggi","Poggiali","Poggiolini","Poli","Pollastri","Porciani","Pozzi","Pratellesi","Pratesi","Prosperi","Pruneti","Pucci","Puccini","Puccioni","Pugi","Pugliese","Puliti","Querci","Quercioli","Raddi","Radu","Raffaelli","Ragazzini","Ranfagni","Ranieri","Rastrelli","Raugei","Raveggi","Renai","Renzi","Rettori","Ricci","Ricciardi","Ridi","Ridolfi","Rigacci","Righi","Righini","Rinaldi","Risaliti","Ristori","Rizzo","Rocchi","Rocchini","Rogai","Romagnoli","Romanelli","Romani","Romano","Romei","Romeo","Romiti","Romoli","Romolini","Rontini","Rosati","Roselli","Rosi","Rossetti","Rossi","Rossini","Rovai","Ruggeri","Ruggiero","Russo","Sabatini","Saccardi","Sacchetti","Sacchi","Sacco","Salerno","Salimbeni","Salucci","Salvadori","Salvestrini","Salvi","Salvini","Sanesi","Sani","Sanna","Santi","Santini","Santoni","Santoro","Santucci","Sardi","Sarri","Sarti","Sassi","Sbolci","Scali","Scarpelli","Scarselli","Scopetani","Secci","Selvi","Senatori","Senesi","Serafini","Sereni","Serra","Sestini","Sguanci","Sieni","Signorini","Silvestri","Simoncini","Simonetti","Simoni","Singh","Sodi","Soldi","Somigli","Sorbi","Sorelli","Sorrentino","Sottili","Spina","Spinelli","Staccioli","Staderini","Stefanelli","Stefani","Stefanini","Stella","Susini","Tacchi","Tacconi","Taddei","Tagliaferri","Tamburini","Tanganelli","Tani","Tanini","Tapinassi","Tarchi","Tarchiani","Targioni","Tassi","Tassini","Tempesti","Terzani","Tesi","Testa","Testi","Tilli","Tinti","Tirinnanzi","Toccafondi","Tofanari","Tofani","Tognaccini","Tonelli","Tonini","Torelli","Torrini","Tosi","Toti","Tozzi","Trambusti","Trapani","Tucci","Turchi","Ugolini","Ulivi","Valente","Valenti","Valentini","Vangelisti","Vanni","Vannini","Vannoni","Vannozzi","Vannucchi","Vannucci","Ventura","Venturi","Venturini","Vestri","Vettori","Vichi","Viciani","Vieri","Vigiani","Vignoli","Vignolini","Vignozzi","Villani","Vinci","Visani","Vitale","Vitali","Viti","Viviani","Vivoli","Volpe","Volpi","Wang","Wu","Xu","Yang","Ye","Zagli","Zani","Zanieri","Zanobini","Zecchi","Zetti","Zhang","Zheng","Zhou","Zhu","Zingoni","Zini","Zoppi"],nl:["Albers","Alblas","Appelman","Baars","Baas","Bakker","Blank","Bleeker","Blok","Blom","Boer","Boers","Boldewijn","Boon","Boot","Bos","Bosch","Bosma","Bosman","Bouma","Bouman","Bouwman","Brands","Brouwer","Burger","Buijs","Buitenhuis","Ceder","Cohen","Dekker","Dekkers","Dijkman","Dijkstra","Driessen","Drost","Engel","Evers","Faber","Franke","Gerritsen","Goedhart","Goossens","Groen","Groenenberg","Groot","Haan","Hart","Heemskerk","Hendriks","Hermans","Hoekstra","Hofman","Hopman","Huisman","Jacobs","Jansen","Janssen","Jonker","Jaspers","Keijzer","Klaassen","Klein","Koek","Koenders","Kok","Kool","Koopman","Koopmans","Koning","Koster","Kramer","Kroon","Kuijpers","Kuiper","Kuipers","Kurt","Koster","Kwakman","Los","Lubbers","Maas","Markus","Martens","Meijer","Mol","Molenaar","Mulder","Nieuwenhuis","Peeters","Peters","Pengel","Pieters","Pool","Post","Postma","Prins","Pronk","Reijnders","Rietveld","Roest","Roos","Sanders","Schaap","Scheffer","Schenk","Schilder","Schipper","Schmidt","Scholten","Schouten","Schut","Schutte","Schuurman","Simons","Smeets","Smit","Smits","Snel","Swinkels","Tas","Terpstra","Timmermans","Tol","Tromp","Troost","Valk","Veenstra","Veldkamp","Verbeek","Verheul","Verhoeven","Vermeer","Vermeulen","Verweij","Vink","Visser","Voorn","Vos","Wagenaar","Wiersema","Willems","Willemsen","Witteveen","Wolff","Wolters","Zijlstra","Zwart","de Beer","de Boer","de Bruijn","de Bruin","de Graaf","de Groot","de Haan","de Haas","de Jager","de Jong","de Jonge","de Koning","de Lange","de Leeuw","de Ridder","de Rooij","de Ruiter","de Vos","de Vries","de Waal","de Wit","de Zwart","van Beek","van Boven","van Dam","van Dijk","van Dongen","van Doorn","van Egmond","van Eijk","van Es","van Gelder","van Gelderen","van Houten","van Hulst","van Kempen","van Kesteren","van Leeuwen","van Loon","van Mill","van Noord","van Ommen","van Ommeren","van Oosten","van Oostveen","van Rijn","van Schaik","van Veen","van Vliet","van Wijk","van Wijngaarden","van den Poel","van de Pol","van den Ploeg","van de Ven","van den Berg","van den Bosch","van den Brink","van den Broek","van den Heuvel","van der Heijden","van der Horst","van der Hulst","van der Kroon","van der Laan","van der Linden","van der Meer","van der Meij","van der Meulen","van der Molen","van der Sluis","van der Spek","van der Veen","van der Velde","van der Velden","van der Vliet","van der Wal"],uk:["Smith","Jones","Williams","Taylor","Brown","Davies","Evans","Wilson","Thomas","Johnson","Roberts","Robinson","Thompson","Wright","Walker","White","Edwards","Hughes","Green","Hall","Lewis","Harris","Clarke","Patel","Jackson","Wood","Turner","Martin","Cooper","Hill","Ward","Morris","Moore","Clark","Lee","King","Baker","Harrison","Morgan","Allen","James","Scott","Phillips","Watson","Davis","Parker","Price","Bennett","Young","Griffiths","Mitchell","Kelly","Cook","Carter","Richardson","Bailey","Collins","Bell","Shaw","Murphy","Miller","Cox","Richards","Khan","Marshall","Anderson","Simpson","Ellis","Adams","Singh","Begum","Wilkinson","Foster","Chapman","Powell","Webb","Rogers","Gray","Mason","Ali","Hunt","Hussain","Campbell","Matthews","Owen","Palmer","Holmes","Mills","Barnes","Knight","Lloyd","Butler","Russell","Barker","Fisher","Stevens","Jenkins","Murray","Dixon","Harvey","Graham","Pearson","Ahmed","Fletcher","Walsh","Kaur","Gibson","Howard","Andrews","Stewart","Elliott","Reynolds","Saunders","Payne","Fox","Ford","Pearce","Day","Brooks","West","Lawrence","Cole","Atkinson","Bradley","Spencer","Gill","Dawson","Ball","Burton","O'brien","Watts","Rose","Booth","Perry","Ryan","Grant","Wells","Armstrong","Francis","Rees","Hayes","Hart","Hudson","Newman","Barrett","Webster","Hunter","Gregory","Carr","Lowe","Page","Marsh","Riley","Dunn","Woods","Parsons","Berry","Stone","Reid","Holland","Hawkins","Harding","Porter","Robertson","Newton","Oliver","Reed","Kennedy","Williamson","Bird","Gardner","Shah","Dean","Lane","Cooke","Bates","Henderson","Parry","Burgess","Bishop","Walton","Burns","Nicholson","Shepherd","Ross","Cross","Long","Freeman","Warren","Nicholls","Hamilton","Byrne","Sutton","Mcdonald","Yates","Hodgson","Robson","Curtis","Hopkins","O'connor","Harper","Coleman","Watkins","Moss","Mccarthy","Chambers","O'neill","Griffin","Sharp","Hardy","Wheeler","Potter","Osborne","Johnston","Gordon","Doyle","Wallace","George","Jordan","Hutchinson","Rowe","Burke","May","Pritchard","Gilbert","Willis","Higgins","Read","Miles","Stevenson","Stephenson","Hammond","Arnold","Buckley","Walters","Hewitt","Barber","Nelson","Slater","Austin","Sullivan","Whitehead","Mann","Frost","Lambert","Stephens","Blake","Akhtar","Lynch","Goodwin","Barton","Woodward","Thomson","Cunningham","Quinn","Barnett","Baxter","Bibi","Clayton","Nash","Greenwood","Jennings","Holt","Kemp","Poole","Gallagher","Bond","Stokes","Tucker","Davidson","Fowler","Heath","Norman","Middleton","Lawson","Banks","French","Stanley","Jarvis","Gibbs","Ferguson","Hayward","Carroll","Douglas","Dickinson","Todd","Barlow","Peters","Lucas","Knowles","Hartley","Miah","Simmons","Morton","Alexander","Field","Morrison","Norris","Townsend","Preston","Hancock","Thornton","Baldwin","Burrows","Briggs","Parkinson","Reeves","Macdonald","Lamb","Black","Abbott","Sanders","Thorpe","Holden","Tomlinson","Perkins","Ashton","Rhodes","Fuller","Howe","Bryant","Vaughan","Dale","Davey","Weston","Bartlett","Whittaker","Davison","Kent","Skinner","Birch","Morley","Daniels","Glover","Howell","Cartwright","Pugh","Humphreys","Goddard","Brennan","Wall","Kirby","Bowen","Savage","Bull","Wong","Dobson","Smart","Wilkins","Kirk","Fraser","Duffy","Hicks","Patterson","Bradshaw","Little","Archer","Warner","Waters","O'sullivan","Farrell","Brookes","Atkins","Kay","Dodd","Bentley","Flynn","John","Schofield","Short","Haynes","Wade","Butcher","Henry","Sanderson","Crawford","Sheppard","Bolton","Coates","Giles","Gould","Houghton","Gibbons","Pratt","Manning","Law","Hooper","Noble","Dyer","Rahman","Clements","Moran","Sykes","Chan","Doherty","Connolly","Joyce","Franklin","Hobbs","Coles","Herbert","Steele","Kerr","Leach","Winter","Owens","Duncan","Naylor","Fleming","Horton","Finch","Fitzgerald","Randall","Carpenter","Marsden","Browne","Garner","Pickering","Hale","Dennis","Vincent","Chadwick","Chandler","Sharpe","Nolan","Lyons","Hurst","Collier","Peacock","Howarth","Faulkner","Rice","Pollard","Welch","Norton","Gough","Sinclair","Blackburn","Bryan","Conway","Power","Cameron","Daly","Allan","Hanson","Gardiner","Boyle","Myers","Turnbull","Wallis","Mahmood","Sims","Swift","Iqbal","Pope","Brady","Chamberlain","Rowley","Tyler","Farmer","Metcalfe","Hilton","Godfrey","Holloway","Parkin","Bray","Talbot","Donnelly","Nixon","Charlton","Benson","Whitehouse","Barry","Hope","Lord","North","Storey","Connor","Potts","Bevan","Hargreaves","Mclean","Mistry","Bruce","Howells","Hyde","Parkes","Wyatt","Fry","Lees","O'donnell","Craig","Forster","Mckenzie","Humphries","Mellor","Carey","Ingram","Summers","Leonard"],de:["Mller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Schulz","Hoffmann","Schfer","Koch","Bauer","Richter","Klein","Wolf","Schrder","Neumann","Schwarz","Zimmermann","Braun","Krger","Hofmann","Hartmann","Lange","Schmitt","Werner","Schmitz","Krause","Meier","Lehmann","Schmid","Schulze","Maier","Khler","Herrmann","Knig","Walter","Mayer","Huber","Kaiser","Fuchs","Peters","Lang","Scholz","Mller","Wei","Jung","Hahn","Schubert","Vogel","Friedrich","Keller","Gnther","Frank","Berger","Winkler","Roth","Beck","Lorenz","Baumann","Franke","Albrecht","Schuster","Simon","Ludwig","Bhm","Winter","Kraus","Martin","Schumacher","Krmer","Vogt","Stein","Jger","Otto","Sommer","Gro","Seidel","Heinrich","Brandt","Haas","Schreiber","Graf","Schulte","Dietrich","Ziegler","Kuhn","Khn","Pohl","Engel","Horn","Busch","Bergmann","Thomas","Voigt","Sauer","Arnold","Wolff","Pfeiffer"],jp:["Sato","Suzuki","Takahashi","Tanaka","Watanabe","Ito","Yamamoto","Nakamura","Kobayashi","Kato","Yoshida","Yamada","Sasaki","Yamaguchi","Saito","Matsumoto","Inoue","Kimura","Hayashi","Shimizu","Yamazaki","Mori","Abe","Ikeda","Hashimoto","Yamashita","Ishikawa","Nakajima","Maeda","Fujita","Ogawa","Goto","Okada","Hasegawa","Murakami","Kondo","Ishii","Saito","Sakamoto","Endo","Aoki","Fujii","Nishimura","Fukuda","Ota","Miura","Fujiwara","Okamoto","Matsuda","Nakagawa","Nakano","Harada","Ono","Tamura","Takeuchi","Kaneko","Wada","Nakayama","Ishida","Ueda","Morita","Hara","Shibata","Sakai","Kudo","Yokoyama","Miyazaki","Miyamoto","Uchida","Takagi","Ando","Taniguchi","Ohno","Maruyama","Imai","Takada","Fujimoto","Takeda","Murata","Ueno","Sugiyama","Masuda","Sugawara","Hirano","Kojima","Otsuka","Chiba","Kubo","Matsui","Iwasaki","Sakurai","Kinoshita","Noguchi","Matsuo","Nomura","Kikuchi","Sano","Onishi","Sugimoto","Arai"],es:["Garcia","Fernandez","Lopez","Martinez","Gonzalez","Rodriguez","Sanchez","Perez","Martin","Gomez","Ruiz","Diaz","Hernandez","Alvarez","Jimenez","Moreno","Munoz","Alonso","Romero","Navarro","Gutierrez","Torres","Dominguez","Gil","Vazquez","Blanco","Serrano","Ramos","Castro","Suarez","Sanz","Rubio","Ortega","Molina","Delgado","Ortiz","Morales","Ramirez","Marin","Iglesias","Santos","Castillo","Garrido","Calvo","Pena","Cruz","Cano","Nunez","Prieto","Diez","Lozano","Vidal","Pascual","Ferrer","Medina","Vega","Leon","Herrero","Vicente","Mendez","Guerrero","Fuentes","Campos","Nieto","Cortes","Caballero","Ibanez","Lorenzo","Pastor","Gimenez","Saez","Soler","Marquez","Carrasco","Herrera","Montero","Arias","Crespo","Flores","Andres","Aguilar","Hidalgo","Cabrera","Mora","Duran","Velasco","Rey","Pardo","Roman","Vila","Bravo","Merino","Moya","Soto","Izquierdo","Reyes","Redondo","Marcos","Carmona","Menendez"],fr:["Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lefvre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupont","Lambert","Fontaine","Rousseau","Vincent","Mller","Lefvre","Faure","Andr","Mercier","Blanc","Gurin","Boyer","Garnier","Chevalier","Franois","Legrand","Gauthier","Garcia","Perrin","Robin","Clment","Morin","Nicolas","Henry","Roussel","Matthieu","Gautier","Masson","Marchand","Duval","Denis","Dumont","Marie","Lemaire","Nol","Meyer","Dufour","Meunier","Brun","Blanchard","Giraud","Joly","Rivire","Lucas","Brunet","Gaillard","Barbier","Arnaud","Martnez","Grard","Roche","Renard","Schmitt","Roy","Leroux","Colin","Vidal","Caron","Picard","Roger","Fabre","Aubert","Lemoine","Renaud","Dumas","Lacroix","Olivier","Philippe","Bourgeois","Pierre","Benot","Rey","Leclerc","Payet","Rolland","Leclercq","Guillaume","Lecomte","Lpez","Jean","Dupuy","Guillot","Hubert","Berger","Carpentier","Snchez","Dupuis","Moulin","Louis","Deschamps","Huet","Vasseur","Perez","Boucher","Fleury","Royer","Klein","Jacquet","Adam","Paris","Poirier","Marty","Aubry","Guyot","Carr","Charles","Renault","Charpentier","Mnard","Maillard","Baron","Bertin","Bailly","Herv","Schneider","Fernndez","Le GallGall","Collet","Lger","Bouvier","Julien","Prvost","Millet","Perrot","Daniel","Le RouxRoux","Cousin","Germain","Breton","Besson","Langlois","Rmi","Le GoffGoff","Pelletier","Lvque","Perrier","Leblanc","Barr","Lebrun","Marchal","Weber","Mallet","Hamon","Boulanger","Jacob","Monnier","Michaud","Rodrguez","Guichard","Gillet","tienne","Grondin","Poulain","Tessier","Chevallier","Collin","Chauvin","Da SilvaSilva","Bouchet","Gay","Lematre","Bnard","Marchal","Humbert","Reynaud","Antoine","Hoarau","Perret","Barthlemy","Cordier","Pichon","Lejeune","Gilbert","Lamy","Delaunay","Pasquier","Carlier","LaporteLaporte"]},postcodeAreas:[{code:"AB"},{code:"AL"},{code:"B"},{code:"BA"},{code:"BB"},{code:"BD"},{code:"BH"},{code:"BL"},{code:"BN"},{code:"BR"},{code:"BS"},{code:"BT"},{code:"CA"},{code:"CB"},{code:"CF"},{code:"CH"},{code:"CM"},{code:"CO"},{code:"CR"},{code:"CT"},{code:"CV"},{code:"CW"},{code:"DA"},{code:"DD"},{code:"DE"},{code:"DG"},{code:"DH"},{code:"DL"},{code:"DN"},{code:"DT"},{code:"DY"},{code:"E"},{code:"EC"},{code:"EH"},{code:"EN"},{code:"EX"},{code:"FK"},{code:"FY"},{code:"G"},{code:"GL"},{code:"GU"},{code:"GY"},{code:"HA"},{code:"HD"},{code:"HG"},{code:"HP"},{code:"HR"},{code:"HS"},{code:"HU"},{code:"HX"},{code:"IG"},{code:"IM"},{code:"IP"},{code:"IV"},{code:"JE"},{code:"KA"},{code:"KT"},{code:"KW"},{code:"KY"},{code:"L"},{code:"LA"},{code:"LD"},{code:"LE"},{code:"LL"},{code:"LN"},{code:"LS"},{code:"LU"},{code:"M"},{code:"ME"},{code:"MK"},{code:"ML"},{code:"N"},{code:"NE"},{code:"NG"},{code:"NN"},{code:"NP"},{code:"NR"},{code:"NW"},{code:"OL"},{code:"OX"},{code:"PA"},{code:"PE"},{code:"PH"},{code:"PL"},{code:"PO"},{code:"PR"},{code:"RG"},{code:"RH"},{code:"RM"},{code:"S"},{code:"SA"},{code:"SE"},{code:"SG"},{code:"SK"},{code:"SL"},{code:"SM"},{code:"SN"},{code:"SO"},{code:"SP"},{code:"SR"},{code:"SS"},{code:"ST"},{code:"SW"},{code:"SY"},{code:"TA"},{code:"TD"},{code:"TF"},{code:"TN"},{code:"TQ"},{code:"TR"},{code:"TS"},{code:"TW"},{code:"UB"},{code:"W"},{code:"WA"},{code:"WC"},{code:"WD"},{code:"WF"},{code:"WN"},{code:"WR"},{code:"WS"},{code:"WV"},{code:"YO"},{code:"ZE"}],countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"land Islands",abbreviation:"AX"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua & Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Ascension Island",abbreviation:"AC"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia & Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Brazil",abbreviation:"BR"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canary Islands",abbreviation:"IC"},{name:"Cape Verde",abbreviation:"CV"},{name:"Caribbean Netherlands",abbreviation:"BQ"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Ceuta & Melilla",abbreviation:"EA"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos (Keeling) Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"Cte d'Ivoire",abbreviation:"CI"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Curaao",abbreviation:"CW"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Denmark",abbreviation:"DK"},{name:"Diego Garcia",abbreviation:"DG"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kosovo",abbreviation:"XK"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar (Burma)",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"Runion",abbreviation:"RE"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"So Tom and Prncipe",abbreviation:"ST"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Sint Maarten",abbreviation:"SX"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia & South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"South Sudan",abbreviation:"SS"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"St. Barthlemy",abbreviation:"BL"},{name:"St. Helena",abbreviation:"SH"},{name:"St. Kitts & Nevis",abbreviation:"KN"},{name:"St. Lucia",abbreviation:"LC"},{name:"St. Martin",abbreviation:"MF"},{name:"St. Pierre & Miquelon",abbreviation:"PM"},{name:"St. Vincent & Grenadines",abbreviation:"VC"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard & Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad & Tobago",abbreviation:"TT"},{name:"Tristan da Cunha",abbreviation:"TA"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks & Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Outlying Islands",abbreviation:"UM"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wallis & Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"}],counties:{uk:[{name:"Bath and North East Somerset"},{name:"Aberdeenshire"},{name:"Anglesey"},{name:"Angus"},{name:"Bedford"},{name:"Blackburn with Darwen"},{name:"Blackpool"},{name:"Bournemouth"},{name:"Bracknell Forest"},{name:"Brighton & Hove"},{name:"Bristol"},{name:"Buckinghamshire"},{name:"Cambridgeshire"},{name:"Carmarthenshire"},{name:"Central Bedfordshire"},{name:"Ceredigion"},{name:"Cheshire East"},{name:"Cheshire West and Chester"},{name:"Clackmannanshire"},{name:"Conwy"},{name:"Cornwall"},{name:"County Antrim"},{name:"County Armagh"},{name:"County Down"},{name:"County Durham"},{name:"County Fermanagh"},{name:"County Londonderry"},{name:"County Tyrone"},{name:"Cumbria"},{name:"Darlington"},{name:"Denbighshire"},{name:"Derby"},{name:"Derbyshire"},{name:"Devon"},{name:"Dorset"},{name:"Dumfries and Galloway"},{name:"Dundee"},{name:"East Lothian"},{name:"East Riding of Yorkshire"},{name:"East Sussex"},{name:"Edinburgh?"},{name:"Essex"},{name:"Falkirk"},{name:"Fife"},{name:"Flintshire"},{name:"Gloucestershire"},{name:"Greater London"},{name:"Greater Manchester"},{name:"Gwent"},{name:"Gwynedd"},{name:"Halton"},{name:"Hampshire"},{name:"Hartlepool"},{name:"Herefordshire"},{name:"Hertfordshire"},{name:"Highlands"},{name:"Hull"},{name:"Isle of Wight"},{name:"Isles of Scilly"},{name:"Kent"},{name:"Lancashire"},{name:"Leicester"},{name:"Leicestershire"},{name:"Lincolnshire"},{name:"Lothian"},{name:"Luton"},{name:"Medway"},{name:"Merseyside"},{name:"Mid Glamorgan"},{name:"Middlesbrough"},{name:"Milton Keynes"},{name:"Monmouthshire"},{name:"Moray"},{name:"Norfolk"},{name:"North East Lincolnshire"},{name:"North Lincolnshire"},{name:"North Somerset"},{name:"North Yorkshire"},{name:"Northamptonshire"},{name:"Northumberland"},{name:"Nottingham"},{name:"Nottinghamshire"},{name:"Oxfordshire"},{name:"Pembrokeshire"},{name:"Perth and Kinross"},{name:"Peterborough"},{name:"Plymouth"},{name:"Poole"},{name:"Portsmouth"},{name:"Powys"},{name:"Reading"},{name:"Redcar and Cleveland"},{name:"Rutland"},{name:"Scottish Borders"},{name:"Shropshire"},{name:"Slough"},{name:"Somerset"},{name:"South Glamorgan"},{name:"South Gloucestershire"},{name:"South Yorkshire"},{name:"Southampton"},{name:"Southend-on-Sea"},{name:"Staffordshire"},{name:"Stirlingshire"},{name:"Stockton-on-Tees"},{name:"Stoke-on-Trent"},{name:"Strathclyde"},{name:"Suffolk"},{name:"Surrey"},{name:"Swindon"},{name:"Telford and Wrekin"},{name:"Thurrock"},{name:"Torbay"},{name:"Tyne and Wear"},{name:"Warrington"},{name:"Warwickshire"},{name:"West Berkshire"},{name:"West Glamorgan"},{name:"West Lothian"},{name:"West Midlands"},{name:"West Sussex"},{name:"West Yorkshire"},{name:"Western Isles"},{name:"Wiltshire"},{name:"Windsor and Maidenhead"},{name:"Wokingham"},{name:"Worcestershire"},{name:"Wrexham"},{name:"York"}]},provinces:{ca:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],it:[{name:"Agrigento",abbreviation:"AG",code:84},{name:"Alessandria",abbreviation:"AL",code:6},{name:"Ancona",abbreviation:"AN",code:42},{name:"Aosta",abbreviation:"AO",code:7},{name:"L'Aquila",abbreviation:"AQ",code:66},{name:"Arezzo",abbreviation:"AR",code:51},{name:"Ascoli-Piceno",abbreviation:"AP",code:44},{name:"Asti",abbreviation:"AT",code:5},{name:"Avellino",abbreviation:"AV",code:64},{name:"Bari",abbreviation:"BA",code:72},{name:"Barletta-Andria-Trani",abbreviation:"BT",code:72},{name:"Belluno",abbreviation:"BL",code:25},{name:"Benevento",abbreviation:"BN",code:62},{name:"Bergamo",abbreviation:"BG",code:16},{name:"Biella",abbreviation:"BI",code:96},{name:"Bologna",abbreviation:"BO",code:37},{name:"Bolzano",abbreviation:"BZ",code:21},{name:"Brescia",abbreviation:"BS",code:17},{name:"Brindisi",abbreviation:"BR",code:74},{name:"Cagliari",abbreviation:"CA",code:92},{name:"Caltanissetta",abbreviation:"CL",code:85},{name:"Campobasso",abbreviation:"CB",code:70},{name:"Carbonia Iglesias",abbreviation:"CI",code:70},{name:"Caserta",abbreviation:"CE",code:61},{name:"Catania",abbreviation:"CT",code:87},{name:"Catanzaro",abbreviation:"CZ",code:79},{name:"Chieti",abbreviation:"CH",code:69},{name:"Como",abbreviation:"CO",code:13},{name:"Cosenza",abbreviation:"CS",code:78},{name:"Cremona",abbreviation:"CR",code:19},{name:"Crotone",abbreviation:"KR",code:101},{name:"Cuneo",abbreviation:"CN",code:4},{name:"Enna",abbreviation:"EN",code:86},{name:"Fermo",abbreviation:"FM",code:86},{name:"Ferrara",abbreviation:"FE",code:38},{name:"Firenze",abbreviation:"FI",code:48},{name:"Foggia",abbreviation:"FG",code:71},{name:"Forli-Cesena",abbreviation:"FC",code:71},{name:"Frosinone",abbreviation:"FR",code:60},{name:"Genova",abbreviation:"GE",code:10},{name:"Gorizia",abbreviation:"GO",code:31},{name:"Grosseto",abbreviation:"GR",code:53},{name:"Imperia",abbreviation:"IM",code:8},{name:"Isernia",abbreviation:"IS",code:94},{name:"La-Spezia",abbreviation:"SP",code:66},{name:"Latina",abbreviation:"LT",code:59},{name:"Lecce",abbreviation:"LE",code:75},{name:"Lecco",abbreviation:"LC",code:97},{name:"Livorno",abbreviation:"LI",code:49},{name:"Lodi",abbreviation:"LO",code:98},{name:"Lucca",abbreviation:"LU",code:46},{name:"Macerata",abbreviation:"MC",code:43},{name:"Mantova",abbreviation:"MN",code:20},{name:"Massa-Carrara",abbreviation:"MS",code:45},{name:"Matera",abbreviation:"MT",code:77},{name:"Medio Campidano",abbreviation:"VS",code:77},{name:"Messina",abbreviation:"ME",code:83},{name:"Milano",abbreviation:"MI",code:15},{name:"Modena",abbreviation:"MO",code:36},{name:"Monza-Brianza",abbreviation:"MB",code:36},{name:"Napoli",abbreviation:"NA",code:63},{name:"Novara",abbreviation:"NO",code:3},{name:"Nuoro",abbreviation:"NU",code:91},{name:"Ogliastra",abbreviation:"OG",code:91},{name:"Olbia Tempio",abbreviation:"OT",code:91},{name:"Oristano",abbreviation:"OR",code:95},{name:"Padova",abbreviation:"PD",code:28},{name:"Palermo",abbreviation:"PA",code:82},{name:"Parma",abbreviation:"PR",code:34},{name:"Pavia",abbreviation:"PV",code:18},{name:"Perugia",abbreviation:"PG",code:54},{name:"Pesaro-Urbino",abbreviation:"PU",code:41},{name:"Pescara",abbreviation:"PE",code:68},{name:"Piacenza",abbreviation:"PC",code:33},{name:"Pisa",abbreviation:"PI",code:50},{name:"Pistoia",abbreviation:"PT",code:47},{name:"Pordenone",abbreviation:"PN",code:93},{name:"Potenza",abbreviation:"PZ",code:76},{name:"Prato",abbreviation:"PO",code:100},{name:"Ragusa",abbreviation:"RG",code:88},{name:"Ravenna",abbreviation:"RA",code:39},{name:"Reggio-Calabria",abbreviation:"RC",code:35},{name:"Reggio-Emilia",abbreviation:"RE",code:35},{name:"Rieti",abbreviation:"RI",code:57},{name:"Rimini",abbreviation:"RN",code:99},{name:"Roma",abbreviation:"Roma",code:58},{name:"Rovigo",abbreviation:"RO",code:29},{name:"Salerno",abbreviation:"SA",code:65},{name:"Sassari",abbreviation:"SS",code:90},{name:"Savona",abbreviation:"SV",code:9},{name:"Siena",abbreviation:"SI",code:52},{name:"Siracusa",abbreviation:"SR",code:89},{name:"Sondrio",abbreviation:"SO",code:14},{name:"Taranto",abbreviation:"TA",code:73},{name:"Teramo",abbreviation:"TE",code:67},{name:"Terni",abbreviation:"TR",code:55},{name:"Torino",abbreviation:"TO",code:1},{name:"Trapani",abbreviation:"TP",code:81},{name:"Trento",abbreviation:"TN",code:22},{name:"Treviso",abbreviation:"TV",code:26},{name:"Trieste",abbreviation:"TS",code:32},{name:"Udine",abbreviation:"UD",code:30},{name:"Varese",abbreviation:"VA",code:12},{name:"Venezia",abbreviation:"VE",code:27},{name:"Verbania",abbreviation:"VB",code:27},{name:"Vercelli",abbreviation:"VC",code:2},{name:"Verona",abbreviation:"VR",code:23},{name:"Vibo-Valentia",abbreviation:"VV",code:102},{name:"Vicenza",abbreviation:"VI",code:24},{name:"Viterbo",abbreviation:"VT",code:56}]},nationalities:[{name:"Afghan"},{name:"Albanian"},{name:"Algerian"},{name:"American"},{name:"Andorran"},{name:"Angolan"},{name:"Antiguans"},{name:"Argentinean"},{name:"Armenian"},{name:"Australian"},{name:"Austrian"},{name:"Azerbaijani"},{name:"Bahami"},{name:"Bahraini"},{name:"Bangladeshi"},{name:"Barbadian"},{name:"Barbudans"},{name:"Batswana"},{name:"Belarusian"},{name:"Belgian"},{name:"Belizean"},{name:"Beninese"},{name:"Bhutanese"},{name:"Bolivian"},{name:"Bosnian"},{name:"Brazilian"},{name:"British"},{name:"Bruneian"},{name:"Bulgarian"},{name:"Burkinabe"},{name:"Burmese"},{name:"Burundian"},{name:"Cambodian"},{name:"Cameroonian"},{name:"Canadian"},{name:"Cape Verdean"},{name:"Central African"},{name:"Chadian"},{name:"Chilean"},{name:"Chinese"},{name:"Colombian"},{name:"Comoran"},{name:"Congolese"},{name:"Costa Rican"},{name:"Croatian"},{name:"Cuban"},{name:"Cypriot"},{name:"Czech"},{name:"Danish"},{name:"Djibouti"},{name:"Dominican"},{name:"Dutch"},{name:"East Timorese"},{name:"Ecuadorean"},{name:"Egyptian"},{name:"Emirian"},{name:"Equatorial Guinean"},{name:"Eritrean"},{name:"Estonian"},{name:"Ethiopian"},{name:"Fijian"},{name:"Filipino"},{name:"Finnish"},{name:"French"},{name:"Gabonese"},{name:"Gambian"},{name:"Georgian"},{name:"German"},{name:"Ghanaian"},{name:"Greek"},{name:"Grenadian"},{name:"Guatemalan"},{name:"Guinea-Bissauan"},{name:"Guinean"},{name:"Guyanese"},{name:"Haitian"},{name:"Herzegovinian"},{name:"Honduran"},{name:"Hungarian"},{name:"I-Kiribati"},{name:"Icelander"},{name:"Indian"},{name:"Indonesian"},{name:"Iranian"},{name:"Iraqi"},{name:"Irish"},{name:"Israeli"},{name:"Italian"},{name:"Ivorian"},{name:"Jamaican"},{name:"Japanese"},{name:"Jordanian"},{name:"Kazakhstani"},{name:"Kenyan"},{name:"Kittian and Nevisian"},{name:"Kuwaiti"},{name:"Kyrgyz"},{name:"Laotian"},{name:"Latvian"},{name:"Lebanese"},{name:"Liberian"},{name:"Libyan"},{name:"Liechtensteiner"},{name:"Lithuanian"},{name:"Luxembourger"},{name:"Macedonian"},{name:"Malagasy"},{name:"Malawian"},{name:"Malaysian"},{name:"Maldivan"},{name:"Malian"},{name:"Maltese"},{name:"Marshallese"},{name:"Mauritanian"},{name:"Mauritian"},{name:"Mexican"},{name:"Micronesian"},{name:"Moldovan"},{name:"Monacan"},{name:"Mongolian"},{name:"Moroccan"},{name:"Mosotho"},{name:"Motswana"},{name:"Mozambican"},{name:"Namibian"},{name:"Nauruan"},{name:"Nepalese"},{name:"New Zealander"},{name:"Nicaraguan"},{name:"Nigerian"},{name:"Nigerien"},{name:"North Korean"},{name:"Northern Irish"},{name:"Norwegian"},{name:"Omani"},{name:"Pakistani"},{name:"Palauan"},{name:"Panamanian"},{name:"Papua New Guinean"},{name:"Paraguayan"},{name:"Peruvian"},{name:"Polish"},{name:"Portuguese"},{name:"Qatari"},{name:"Romani"},{name:"Russian"},{name:"Rwandan"},{name:"Saint Lucian"},{name:"Salvadoran"},{name:"Samoan"},{name:"San Marinese"},{name:"Sao Tomean"},{name:"Saudi"},{name:"Scottish"},{name:"Senegalese"},{name:"Serbian"},{name:"Seychellois"},{name:"Sierra Leonean"},{name:"Singaporean"},{name:"Slovakian"},{name:"Slovenian"},{name:"Solomon Islander"},{name:"Somali"},{name:"South African"},{name:"South Korean"},{name:"Spanish"},{name:"Sri Lankan"},{name:"Sudanese"},{name:"Surinamer"},{name:"Swazi"},{name:"Swedish"},{name:"Swiss"},{name:"Syrian"},{name:"Taiwanese"},{name:"Tajik"},{name:"Tanzanian"},{name:"Thai"},{name:"Togolese"},{name:"Tongan"},{name:"Trinidadian or Tobagonian"},{name:"Tunisian"},{name:"Turkish"},{name:"Tuvaluan"},{name:"Ugandan"},{name:"Ukrainian"},{name:"Uruguaya"},{name:"Uzbekistani"},{name:"Venezuela"},{name:"Vietnamese"},{name:"Wels"},{name:"Yemenit"},{name:"Zambia"},{name:"Zimbabwe"}],locale_languages:["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],locale_regions:["agq-CM","asa-TZ","ast-ES","bas-CM","bem-ZM","bez-TZ","brx-IN","cgg-UG","chr-US","dav-KE","dje-NE","dsb-DE","dua-CM","dyo-SN","ebu-KE","ewo-CM","fil-PH","fur-IT","gsw-CH","gsw-FR","gsw-LI","guz-KE","haw-US","hsb-DE","jgo-CM","jmc-TZ","kab-DZ","kam-KE","kde-TZ","kea-CV","khq-ML","kkj-CM","kln-KE","kok-IN","ksb-TZ","ksf-CM","ksh-DE","lag-TZ","lkt-US","luo-KE","luy-KE","mas-KE","mas-TZ","mer-KE","mfe-MU","mgh-MZ","mgo-CM","mua-CM","naq-NA","nmg-CM","nnh-CM","nus-SD","nyn-UG","rof-TZ","rwk-TZ","sah-RU","saq-KE","sbp-TZ","seh-MZ","ses-ML","shi-Latn","shi-Latn-MA","shi-Tfng","shi-Tfng-MA","smn-FI","teo-KE","teo-UG","twq-NE","tzm-Latn","tzm-Latn-MA","vai-Latn","vai-Latn-LR","vai-Vaii","vai-Vaii-LR","vun-TZ","wae-CH","xog-UG","yav-CM","zgh-MA","af-NA","af-ZA","ak-GH","am-ET","ar-001","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as-IN","az-Cyrl","az-Cyrl-AZ","az-Latn","az-Latn-AZ","be-BY","bg-BG","bm-Latn","bm-Latn-ML","bn-BD","bn-IN","bo-CN","bo-IN","br-FR","bs-Cyrl","bs-Cyrl-BA","bs-Latn","bs-Latn-BA","ca-AD","ca-ES","ca-ES-VALENCIA","ca-FR","ca-IT","cs-CZ","cy-GB","da-DK","da-GL","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","dz-BT","ee-GH","ee-TG","el-CY","el-GR","en-001","en-150","en-AG","en-AI","en-AS","en-AU","en-BB","en-BE","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CK","en-CM","en-CX","en-DG","en-DM","en-ER","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SG","en-SH","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo-001","es-419","es-AR","es-BO","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-ES","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et-EE","eu-ES","fa-AF","fa-IR","ff-CM","ff-GN","ff-MR","ff-SN","fi-FI","fo-FO","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-FR","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fy-NL","ga-IE","gd-GB","gl-ES","gu-IN","gv-IM","ha-Latn","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","ig-NG","ii-CN","is-IS","it-CH","it-IT","it-SM","ja-JP","ka-GE","ki-KE","kk-Cyrl","kk-Cyrl-KZ","kl-GL","km-KH","kn-IN","ko-KP","ko-KR","ks-Arab","ks-Arab-IN","kw-GB","ky-Cyrl","ky-Cyrl-KG","lb-LU","lg-UG","ln-AO","ln-CD","ln-CF","ln-CG","lo-LA","lt-LT","lu-CD","lv-LV","mg-MG","mk-MK","ml-IN","mn-Cyrl","mn-Cyrl-MN","mr-IN","ms-Latn","ms-Latn-BN","ms-Latn-MY","ms-Latn-SG","mt-MT","my-MM","nb-NO","nb-SJ","nd-ZW","ne-IN","ne-NP","nl-AW","nl-BE","nl-BQ","nl-CW","nl-NL","nl-SR","nl-SX","nn-NO","om-ET","om-KE","or-IN","os-GE","os-RU","pa-Arab","pa-Arab-PK","pa-Guru","pa-Guru-IN","pl-PL","ps-AF","pt-AO","pt-BR","pt-CV","pt-GW","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu-BO","qu-EC","qu-PE","rm-CH","rn-BI","ro-MD","ro-RO","ru-BY","ru-KG","ru-KZ","ru-MD","ru-RU","ru-UA","rw-RW","se-FI","se-NO","se-SE","sg-CF","si-LK","sk-SK","sl-SI","sn-ZW","so-DJ","so-ET","so-KE","so-SO","sq-AL","sq-MK","sq-XK","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-RS","sr-Latn-XK","sv-AX","sv-FI","sv-SE","sw-CD","sw-KE","sw-TZ","sw-UG","ta-IN","ta-LK","ta-MY","ta-SG","te-IN","th-TH","ti-ER","ti-ET","to-TO","tr-CY","tr-TR","ug-Arab","ug-Arab-CN","uk-UA","ur-IN","ur-PK","uz-Arab","uz-Arab-AF","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","vi-VN","yi-001","yo-BJ","yo-NG","zh-Hans","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zu-ZA"],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],country_regions:{it:[{name:"Valle d'Aosta",abbreviation:"VDA"},{name:"Piemonte",abbreviation:"PIE"},{name:"Lombardia",abbreviation:"LOM"},{name:"Veneto",abbreviation:"VEN"},{name:"Trentino Alto Adige",abbreviation:"TAA"},{name:"Friuli Venezia Giulia",abbreviation:"FVG"},{name:"Liguria",abbreviation:"LIG"},{name:"Emilia Romagna",abbreviation:"EMR"},{name:"Toscana",abbreviation:"TOS"},{name:"Umbria",abbreviation:"UMB"},{name:"Marche",abbreviation:"MAR"},{name:"Abruzzo",abbreviation:"ABR"},{name:"Lazio",abbreviation:"LAZ"},{name:"Campania",abbreviation:"CAM"},{name:"Puglia",abbreviation:"PUG"},{name:"Basilicata",abbreviation:"BAS"},{name:"Molise",abbreviation:"MOL"},{name:"Calabria",abbreviation:"CAL"},{name:"Sicilia",abbreviation:"SIC"},{name:"Sardegna",abbreviation:"SAR"}],mx:[{name:"Aguascalientes",abbreviation:"AGU"},{name:"Baja California",abbreviation:"BCN"},{name:"Baja California Sur",abbreviation:"BCS"},{name:"Campeche",abbreviation:"CAM"},{name:"Chiapas",abbreviation:"CHP"},{name:"Chihuahua",abbreviation:"CHH"},{name:"Ciudad de Mxico",abbreviation:"DIF"},{name:"Coahuila",abbreviation:"COA"},{name:"Colima",abbreviation:"COL"},{name:"Durango",abbreviation:"DUR"},{name:"Guanajuato",abbreviation:"GUA"},{name:"Guerrero",abbreviation:"GRO"},{name:"Hidalgo",abbreviation:"HID"},{name:"Jalisco",abbreviation:"JAL"},{name:"Mxico",abbreviation:"MEX"},{name:"Michoacn",abbreviation:"MIC"},{name:"Morelos",abbreviation:"MOR"},{name:"Nayarit",abbreviation:"NAY"},{name:"Nuevo Len",abbreviation:"NLE"},{name:"Oaxaca",abbreviation:"OAX"},{name:"Puebla",abbreviation:"PUE"},{name:"Quertaro",abbreviation:"QUE"},{name:"Quintana Roo",abbreviation:"ROO"},{name:"San Luis Potos",abbreviation:"SLP"},{name:"Sinaloa",abbreviation:"SIN"},{name:"Sonora",abbreviation:"SON"},{name:"Tabasco",abbreviation:"TAB"},{name:"Tamaulipas",abbreviation:"TAM"},{name:"Tlaxcala",abbreviation:"TLA"},{name:"Veracruz",abbreviation:"VER"},{name:"Yucatn",abbreviation:"YUC"},{name:"Zacatecas",abbreviation:"ZAC"}]},street_suffixes:{us:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],it:[{name:"Accesso",abbreviation:"Acc."},{name:"Alzaia",abbreviation:"Alz."},{name:"Arco",abbreviation:"Arco"},{name:"Archivolto",abbreviation:"Acv."},{name:"Arena",abbreviation:"Arena"},{name:"Argine",abbreviation:"Argine"},{name:"Bacino",abbreviation:"Bacino"},{name:"Banchi",abbreviation:"Banchi"},{name:"Banchina",abbreviation:"Ban."},{name:"Bastioni",abbreviation:"Bas."},{name:"Belvedere",abbreviation:"Belv."},{name:"Borgata",abbreviation:"B.ta"},{name:"Borgo",abbreviation:"B.go"},{name:"Calata",abbreviation:"Cal."},{name:"Calle",abbreviation:"Calle"},{name:"Campiello",abbreviation:"Cam."},{name:"Campo",abbreviation:"Cam."},{name:"Canale",abbreviation:"Can."},{name:"Carraia",abbreviation:"Carr."},{name:"Cascina",abbreviation:"Cascina"},{name:"Case sparse",abbreviation:"c.s."},{name:"Cavalcavia",abbreviation:"Cv."},{name:"Circonvallazione",abbreviation:"Cv."},{name:"Complanare",abbreviation:"C.re"},{name:"Contrada",abbreviation:"C.da"},{name:"Corso",abbreviation:"C.so"},{name:"Corte",abbreviation:"C.te"},{name:"Cortile",abbreviation:"C.le"},{name:"Diramazione",abbreviation:"Dir."},{name:"Fondaco",abbreviation:"F.co"},{name:"Fondamenta",abbreviation:"F.ta"},{name:"Fondo",abbreviation:"F.do"},{name:"Frazione",abbreviation:"Fr."},{name:"Isola",abbreviation:"Is."},{name:"Largo",abbreviation:"L.go"},{name:"Litoranea",abbreviation:"Lit."},{name:"Lungolago",abbreviation:"L.go lago"},{name:"Lungo Po",abbreviation:"l.go Po"},{name:"Molo",abbreviation:"Molo"},{name:"Mura",abbreviation:"Mura"},{name:"Passaggio privato",abbreviation:"pass. priv."},{name:"Passeggiata",abbreviation:"Pass."},{name:"Piazza",abbreviation:"P.zza"},{name:"Piazzale",abbreviation:"P.le"},{name:"Ponte",abbreviation:"P.te"},{name:"Portico",abbreviation:"P.co"},{name:"Rampa",abbreviation:"Rampa"},{name:"Regione",abbreviation:"Reg."},{name:"Rione",abbreviation:"R.ne"},{name:"Rio",abbreviation:"Rio"},{name:"Ripa",abbreviation:"Ripa"},{name:"Riva",abbreviation:"Riva"},{name:"Rond",abbreviation:"Rond"},{name:"Rotonda",abbreviation:"Rot."},{name:"Sagrato",abbreviation:"Sagr."},{name:"Salita",abbreviation:"Sal."},{name:"Scalinata",abbreviation:"Scal."},{name:"Scalone",abbreviation:"Scal."},{name:"Slargo",abbreviation:"Sl."},{name:"Sottoportico",abbreviation:"Sott."},{name:"Strada",abbreviation:"Str."},{name:"Stradale",abbreviation:"Str.le"},{name:"Strettoia",abbreviation:"Strett."},{name:"Traversa",abbreviation:"Trav."},{name:"Via",abbreviation:"V."},{name:"Viale",abbreviation:"V.le"},{name:"Vicinale",abbreviation:"Vic.le"},{name:"Vicolo",abbreviation:"Vic."}],uk:[{name:"Avenue",abbreviation:"Ave"},{name:"Close",abbreviation:"Cl"},{name:"Court",abbreviation:"Ct"},{name:"Crescent",abbreviation:"Cr"},{name:"Drive",abbreviation:"Dr"},{name:"Garden",abbreviation:"Gdn"},{name:"Gardens",abbreviation:"Gdns"},{name:"Green",abbreviation:"Gn"},{name:"Grove",abbreviation:"Gr"},{name:"Lane",abbreviation:"Ln"},{name:"Mount",abbreviation:"Mt"},{name:"Place",abbreviation:"Pl"},{name:"Park",abbreviation:"Pk"},{name:"Ridge",abbreviation:"Rdg"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Valley",abbreviation:"Val"}]},months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"So Tom and Prncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communaut Financire Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communaut Financire Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Franais du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}],colorNames:["AliceBlue","Black","Navy","DarkBlue","MediumBlue","Blue","DarkGreen","Green","Teal","DarkCyan","DeepSkyBlue","DarkTurquoise","MediumSpringGreen","Lime","SpringGreen","Aqua","Cyan","MidnightBlue","DodgerBlue","LightSeaGreen","ForestGreen","SeaGreen","DarkSlateGray","LimeGreen","MediumSeaGreen","Turquoise","RoyalBlue","SteelBlue","DarkSlateBlue","MediumTurquoise","Indigo","DarkOliveGreen","CadetBlue","CornflowerBlue","RebeccaPurple","MediumAquaMarine","DimGray","SlateBlue","OliveDrab","SlateGray","LightSlateGray","MediumSlateBlue","LawnGreen","Chartreuse","Aquamarine","Maroon","Purple","Olive","Gray","SkyBlue","LightSkyBlue","BlueViolet","DarkRed","DarkMagenta","SaddleBrown","Ivory","White","DarkSeaGreen","LightGreen","MediumPurple","DarkViolet","PaleGreen","DarkOrchid","YellowGreen","Sienna","Brown","DarkGray","LightBlue","GreenYellow","PaleTurquoise","LightSteelBlue","PowderBlue","FireBrick","DarkGoldenRod","MediumOrchid","RosyBrown","DarkKhaki","Silver","MediumVioletRed","IndianRed","Peru","Chocolate","Tan","LightGray","Thistle","Orchid","GoldenRod","PaleVioletRed","Crimson","Gainsboro","Plum","BurlyWood","LightCyan","Lavender","DarkSalmon","Violet","PaleGoldenRod","LightCoral","Khaki","AliceBlue","HoneyDew","Azure","SandyBrown","Wheat","Beige","WhiteSmoke","MintCream","GhostWhite","Salmon","AntiqueWhite","Linen","LightGoldenRodYellow","OldLace","Red","Fuchsia","Magenta","DeepPink","OrangeRed","Tomato","HotPink","Coral","DarkOrange","LightSalmon","Orange","LightPink","Pink","Gold","PeachPuff","NavajoWhite","Moccasin","Bisque","MistyRose","BlanchedAlmond","PapayaWhip","LavenderBlush","SeaShell","Cornsilk","LemonChiffon","FloralWhite","Snow","Yellow","LightYellow"],company:["3Com Corp","3M Company","A.G. Edwards Inc.","Abbott Laboratories","Abercrombie & Fitch Co.","ABM Industries Incorporated","Ace Hardware Corporation","ACT Manufacturing Inc.","Acterna Corp.","Adams Resources & Energy, Inc.","ADC Telecommunications, Inc.","Adelphia Communications Corporation","Administaff, Inc.","Adobe Systems Incorporated","Adolph Coors Company","Advance Auto Parts, Inc.","Advanced Micro Devices, Inc.","AdvancePCS, Inc.","Advantica Restaurant Group, Inc.","The AES Corporation","Aetna Inc.","Affiliated Computer Services, Inc.","AFLAC Incorporated","AGCO Corporation","Agilent Technologies, Inc.","Agway Inc.","Apartment Investment and Management Company","Air Products and Chemicals, Inc.","Airborne, Inc.","Airgas, Inc.","AK Steel Holding Corporation","Alaska Air Group, Inc.","Alberto-Culver Company","Albertson's, Inc.","Alcoa Inc.","Alleghany Corporation","Allegheny Energy, Inc.","Allegheny Technologies Incorporated","Allergan, Inc.","ALLETE, Inc.","Alliant Energy Corporation","Allied Waste Industries, Inc.","Allmerica Financial Corporation","The Allstate Corporation","ALLTEL Corporation","The Alpine Group, Inc.","Amazon.com, Inc.","AMC Entertainment Inc.","American Power Conversion Corporation","Amerada Hess Corporation","AMERCO","Ameren Corporation","America West Holdings Corporation","American Axle & Manufacturing Holdings, Inc.","American Eagle Outfitters, Inc.","American Electric Power Company, Inc.","American Express Company","American Financial Group, Inc.","American Greetings Corporation","American International Group, Inc.","American Standard Companies Inc.","American Water Works Company, Inc.","AmerisourceBergen Corporation","Ames Department Stores, Inc.","Amgen Inc.","Amkor Technology, Inc.","AMR Corporation","AmSouth Bancorp.","Amtran, Inc.","Anadarko Petroleum Corporation","Analog Devices, Inc.","Anheuser-Busch Companies, Inc.","Anixter International Inc.","AnnTaylor Inc.","Anthem, Inc.","AOL Time Warner Inc.","Aon Corporation","Apache Corporation","Apple Computer, Inc.","Applera Corporation","Applied Industrial Technologies, Inc.","Applied Materials, Inc.","Aquila, Inc.","ARAMARK Corporation","Arch Coal, Inc.","Archer Daniels Midland Company","Arkansas Best Corporation","Armstrong Holdings, Inc.","Arrow Electronics, Inc.","ArvinMeritor, Inc.","Ashland Inc.","Astoria Financial Corporation","AT&T Corp.","Atmel Corporation","Atmos Energy Corporation","Audiovox Corporation","Autoliv, Inc.","Automatic Data Processing, Inc.","AutoNation, Inc.","AutoZone, Inc.","Avaya Inc.","Avery Dennison Corporation","Avista Corporation","Avnet, Inc.","Avon Products, Inc.","Baker Hughes Incorporated","Ball Corporation","Bank of America Corporation","The Bank of New York Company, Inc.","Bank One Corporation","Banknorth Group, Inc.","Banta Corporation","Barnes & Noble, Inc.","Bausch & Lomb Incorporated","Baxter International Inc.","BB&T Corporation","The Bear Stearns Companies Inc.","Beazer Homes USA, Inc.","Beckman Coulter, Inc.","Becton, Dickinson and Company","Bed Bath & Beyond Inc.","Belk, Inc.","Bell Microproducts Inc.","BellSouth Corporation","Belo Corp.","Bemis Company, Inc.","Benchmark Electronics, Inc.","Berkshire Hathaway Inc.","Best Buy Co., Inc.","Bethlehem Steel Corporation","Beverly Enterprises, Inc.","Big Lots, Inc.","BJ Services Company","BJ's Wholesale Club, Inc.","The Black & Decker Corporation","Black Hills Corporation","BMC Software, Inc.","The Boeing Company","Boise Cascade Corporation","Borders Group, Inc.","BorgWarner Inc.","Boston Scientific Corporation","Bowater Incorporated","Briggs & Stratton Corporation","Brightpoint, Inc.","Brinker International, Inc.","Bristol-Myers Squibb Company","Broadwing, Inc.","Brown Shoe Company, Inc.","Brown-Forman Corporation","Brunswick Corporation","Budget Group, Inc.","Burlington Coat Factory Warehouse Corporation","Burlington Industries, Inc.","Burlington Northern Santa Fe Corporation","Burlington Resources Inc.","C. H. Robinson Worldwide Inc.","Cablevision Systems Corp","Cabot Corp","Cadence Design Systems, Inc.","Calpine Corp.","Campbell Soup Co.","Capital One Financial Corp.","Cardinal Health Inc.","Caremark Rx Inc.","Carlisle Cos. Inc.","Carpenter Technology Corp.","Casey's General Stores Inc.","Caterpillar Inc.","CBRL Group Inc.","CDI Corp.","CDW Computer Centers Inc.","CellStar Corp.","Cendant Corp","Cenex Harvest States Cooperatives","Centex Corp.","CenturyTel Inc.","Ceridian Corp.","CH2M Hill Cos. Ltd.","Champion Enterprises Inc.","Charles Schwab Corp.","Charming Shoppes Inc.","Charter Communications Inc.","Charter One Financial Inc.","ChevronTexaco Corp.","Chiquita Brands International Inc.","Chubb Corp","Ciena Corp.","Cigna Corp","Cincinnati Financial Corp.","Cinergy Corp.","Cintas Corp.","Circuit City Stores Inc.","Cisco Systems Inc.","Citigroup, Inc","Citizens Communications Co.","CKE Restaurants Inc.","Clear Channel Communications Inc.","The Clorox Co.","CMGI Inc.","CMS Energy Corp.","CNF Inc.","Coca-Cola Co.","Coca-Cola Enterprises Inc.","Colgate-Palmolive Co.","Collins & Aikman Corp.","Comcast Corp.","Comdisco Inc.","Comerica Inc.","Comfort Systems USA Inc.","Commercial Metals Co.","Community Health Systems Inc.","Compass Bancshares Inc","Computer Associates International Inc.","Computer Sciences Corp.","Compuware Corp.","Comverse Technology Inc.","ConAgra Foods Inc.","Concord EFS Inc.","Conectiv, Inc","Conoco Inc","Conseco Inc.","Consolidated Freightways Corp.","Consolidated Edison Inc.","Constellation Brands Inc.","Constellation Emergy Group Inc.","Continental Airlines Inc.","Convergys Corp.","Cooper Cameron Corp.","Cooper Industries Ltd.","Cooper Tire & Rubber Co.","Corn Products International Inc.","Corning Inc.","Costco Wholesale Corp.","Countrywide Credit Industries Inc.","Coventry Health Care Inc.","Cox Communications Inc.","Crane Co.","Crompton Corp.","Crown Cork & Seal Co. Inc.","CSK Auto Corp.","CSX Corp.","Cummins Inc.","CVS Corp.","Cytec Industries Inc.","D&K Healthcare Resources, Inc.","D.R. Horton Inc.","Dana Corporation","Danaher Corporation","Darden Restaurants Inc.","DaVita Inc.","Dean Foods Company","Deere & Company","Del Monte Foods Co","Dell Computer Corporation","Delphi Corp.","Delta Air Lines Inc.","Deluxe Corporation","Devon Energy Corporation","Di Giorgio Corporation","Dial Corporation","Diebold Incorporated","Dillard's Inc.","DIMON Incorporated","Dole Food Company, Inc.","Dollar General Corporation","Dollar Tree Stores, Inc.","Dominion Resources, Inc.","Domino's Pizza LLC","Dover Corporation, Inc.","Dow Chemical Company","Dow Jones & Company, Inc.","DPL Inc.","DQE Inc.","Dreyer's Grand Ice Cream, Inc.","DST Systems, Inc.","DTE Energy Co.","E.I. Du Pont de Nemours and Company","Duke Energy Corp","Dun & Bradstreet Inc.","DURA Automotive Systems Inc.","DynCorp","Dynegy Inc.","E*Trade Group, Inc.","E.W. Scripps Company","Earthlink, Inc.","Eastman Chemical Company","Eastman Kodak Company","Eaton Corporation","Echostar Communications Corporation","Ecolab Inc.","Edison International","EGL Inc.","El Paso Corporation","Electronic Arts Inc.","Electronic Data Systems Corp.","Eli Lilly and Company","EMC Corporation","Emcor Group Inc.","Emerson Electric Co.","Encompass Services Corporation","Energizer Holdings Inc.","Energy East Corporation","Engelhard Corporation","Enron Corp.","Entergy Corporation","Enterprise Products Partners L.P.","EOG Resources, Inc.","Equifax Inc.","Equitable Resources Inc.","Equity Office Properties Trust","Equity Residential Properties Trust","Estee Lauder Companies Inc.","Exelon Corporation","Exide Technologies","Expeditors International of Washington Inc.","Express Scripts Inc.","ExxonMobil Corporation","Fairchild Semiconductor International Inc.","Family Dollar Stores Inc.","Farmland Industries Inc.","Federal Mogul Corp.","Federated Department Stores Inc.","Federal Express Corp.","Felcor Lodging Trust Inc.","Ferro Corp.","Fidelity National Financial Inc.","Fifth Third Bancorp","First American Financial Corp.","First Data Corp.","First National of Nebraska Inc.","First Tennessee National Corp.","FirstEnergy Corp.","Fiserv Inc.","Fisher Scientific International Inc.","FleetBoston Financial Co.","Fleetwood Enterprises Inc.","Fleming Companies Inc.","Flowers Foods Inc.","Flowserv Corp","Fluor Corp","FMC Corp","Foamex International Inc","Foot Locker Inc","Footstar Inc.","Ford Motor Co","Forest Laboratories Inc.","Fortune Brands Inc.","Foster Wheeler Ltd.","FPL Group Inc.","Franklin Resources Inc.","Freeport McMoran Copper & Gold Inc.","Frontier Oil Corp","Furniture Brands International Inc.","Gannett Co., Inc.","Gap Inc.","Gateway Inc.","GATX Corporation","Gemstar-TV Guide International Inc.","GenCorp Inc.","General Cable Corporation","General Dynamics Corporation","General Electric Company","General Mills Inc","General Motors Corporation","Genesis Health Ventures Inc.","Gentek Inc.","Gentiva Health Services Inc.","Genuine Parts Company","Genuity Inc.","Genzyme Corporation","Georgia Gulf Corporation","Georgia-Pacific Corporation","Gillette Company","Gold Kist Inc.","Golden State Bancorp Inc.","Golden West Financial Corporation","Goldman Sachs Group Inc.","Goodrich Corporation","The Goodyear Tire & Rubber Company","Granite Construction Incorporated","Graybar Electric Company Inc.","Great Lakes Chemical Corporation","Great Plains Energy Inc.","GreenPoint Financial Corp.","Greif Bros. Corporation","Grey Global Group Inc.","Group 1 Automotive Inc.","Guidant Corporation","H&R Block Inc.","H.B. Fuller Company","H.J. Heinz Company","Halliburton Co.","Harley-Davidson Inc.","Harman International Industries Inc.","Harrah's Entertainment Inc.","Harris Corp.","Harsco Corp.","Hartford Financial Services Group Inc.","Hasbro Inc.","Hawaiian Electric Industries Inc.","HCA Inc.","Health Management Associates Inc.","Health Net Inc.","Healthsouth Corp","Henry Schein Inc.","Hercules Inc.","Herman Miller Inc.","Hershey Foods Corp.","Hewlett-Packard Company","Hibernia Corp.","Hillenbrand Industries Inc.","Hilton Hotels Corp.","Hollywood Entertainment Corp.","Home Depot Inc.","Hon Industries Inc.","Honeywell International Inc.","Hormel Foods Corp.","Host Marriott Corp.","Household International Corp.","Hovnanian Enterprises Inc.","Hub Group Inc.","Hubbell Inc.","Hughes Supply Inc.","Humana Inc.","Huntington Bancshares Inc.","Idacorp Inc.","IDT Corporation","IKON Office Solutions Inc.","Illinois Tool Works Inc.","IMC Global Inc.","Imperial Sugar Company","IMS Health Inc.","Ingles Market Inc","Ingram Micro Inc.","Insight Enterprises Inc.","Integrated Electrical Services Inc.","Intel Corporation","International Paper Co.","Interpublic Group of Companies Inc.","Interstate Bakeries Corporation","International Business Machines Corp.","International Flavors & Fragrances Inc.","International Multifoods Corporation","Intuit Inc.","IT Group Inc.","ITT Industries Inc.","Ivax Corp.","J.B. Hunt Transport Services Inc.","J.C. Penny Co.","J.P. Morgan Chase & Co.","Jabil Circuit Inc.","Jack In The Box Inc.","Jacobs Engineering Group Inc.","JDS Uniphase Corp.","Jefferson-Pilot Co.","John Hancock Financial Services Inc.","Johnson & Johnson","Johnson Controls Inc.","Jones Apparel Group Inc.","KB Home","Kellogg Company","Kellwood Company","Kelly Services Inc.","Kemet Corp.","Kennametal Inc.","Kerr-McGee Corporation","KeyCorp","KeySpan Corp.","Kimball International Inc.","Kimberly-Clark Corporation","Kindred Healthcare Inc.","KLA-Tencor Corporation","K-Mart Corp.","Knight-Ridder Inc.","Kohl's Corp.","KPMG Consulting Inc.","Kroger Co.","L-3 Communications Holdings Inc.","Laboratory Corporation of America Holdings","Lam Research Corporation","LandAmerica Financial Group Inc.","Lands' End Inc.","Landstar System Inc.","La-Z-Boy Inc.","Lear Corporation","Legg Mason Inc.","Leggett & Platt Inc.","Lehman Brothers Holdings Inc.","Lennar Corporation","Lennox International Inc.","Level 3 Communications Inc.","Levi Strauss & Co.","Lexmark International Inc.","Limited Inc.","Lincoln National Corporation","Linens 'n Things Inc.","Lithia Motors Inc.","Liz Claiborne Inc.","Lockheed Martin Corporation","Loews Corporation","Longs Drug Stores Corporation","Louisiana-Pacific Corporation","Lowe's Companies Inc.","LSI Logic Corporation","The LTV Corporation","The Lubrizol Corporation","Lucent Technologies Inc.","Lyondell Chemical Company","M & T Bank Corporation","Magellan Health Services Inc.","Mail-Well Inc.","Mandalay Resort Group","Manor Care Inc.","Manpower Inc.","Marathon Oil Corporation","Mariner Health Care Inc.","Markel Corporation","Marriott International Inc.","Marsh & McLennan Companies Inc.","Marsh Supermarkets Inc.","Marshall & Ilsley Corporation","Martin Marietta Materials Inc.","Masco Corporation","Massey Energy Company","MasTec Inc.","Mattel Inc.","Maxim Integrated Products Inc.","Maxtor Corporation","Maxxam Inc.","The May Department Stores Company","Maytag Corporation","MBNA Corporation","McCormick & Company Incorporated","McDonald's Corporation","The McGraw-Hill Companies Inc.","McKesson Corporation","McLeodUSA Incorporated","M.D.C. Holdings Inc.","MDU Resources Group Inc.","MeadWestvaco Corporation","Medtronic Inc.","Mellon Financial Corporation","The Men's Wearhouse Inc.","Merck & Co., Inc.","Mercury General Corporation","Merrill Lynch & Co. Inc.","Metaldyne Corporation","Metals USA Inc.","MetLife Inc.","Metris Companies Inc","MGIC Investment Corporation","MGM Mirage","Michaels Stores Inc.","Micron Technology Inc.","Microsoft Corporation","Milacron Inc.","Millennium Chemicals Inc.","Mirant Corporation","Mohawk Industries Inc.","Molex Incorporated","The MONY Group Inc.","Morgan Stanley Dean Witter & Co.","Motorola Inc.","MPS Group Inc.","Murphy Oil Corporation","Nabors Industries Inc","Nacco Industries Inc","Nash Finch Company","National City Corp.","National Commerce Financial Corporation","National Fuel Gas Company","National Oilwell Inc","National Rural Utilities Cooperative Finance Corporation","National Semiconductor Corporation","National Service Industries Inc","Navistar International Corporation","NCR Corporation","The Neiman Marcus Group Inc.","New Jersey Resources Corporation","New York Times Company","Newell Rubbermaid Inc","Newmont Mining Corporation","Nextel Communications Inc","Nicor Inc","Nike Inc","NiSource Inc","Noble Energy Inc","Nordstrom Inc","Norfolk Southern Corporation","Nortek Inc","North Fork Bancorporation Inc","Northeast Utilities System","Northern Trust Corporation","Northrop Grumman Corporation","NorthWestern Corporation","Novellus Systems Inc","NSTAR","NTL Incorporated","Nucor Corp","Nvidia Corp","NVR Inc","Northwest Airlines Corp","Occidental Petroleum Corp","Ocean Energy Inc","Office Depot Inc.","OfficeMax Inc","OGE Energy Corp","Oglethorpe Power Corp.","Ohio Casualty Corp.","Old Republic International Corp.","Olin Corp.","OM Group Inc","Omnicare Inc","Omnicom Group","On Semiconductor Corp","ONEOK Inc","Oracle Corp","Oshkosh Truck Corp","Outback Steakhouse Inc.","Owens & Minor Inc.","Owens Corning","Owens-Illinois Inc","Oxford Health Plans Inc","Paccar Inc","PacifiCare Health Systems Inc","Packaging Corp. of America","Pactiv Corp","Pall Corp","Pantry Inc","Park Place Entertainment Corp","Parker Hannifin Corp.","Pathmark Stores Inc.","Paychex Inc","Payless Shoesource Inc","Penn Traffic Co.","Pennzoil-Quaker State Company","Pentair Inc","Peoples Energy Corp.","PeopleSoft Inc","Pep Boys Manny, Moe & Jack","Potomac Electric Power Co.","Pepsi Bottling Group Inc.","PepsiAmericas Inc.","PepsiCo Inc.","Performance Food Group Co.","Perini Corp","PerkinElmer Inc","Perot Systems Corp","Petco Animal Supplies Inc.","Peter Kiewit Sons', Inc.","PETsMART Inc","Pfizer Inc","Pacific Gas & Electric Corp.","Pharmacia Corp","Phar Mor Inc.","Phelps Dodge Corp.","Philip Morris Companies Inc.","Phillips Petroleum Co","Phillips Van Heusen Corp.","Phoenix Companies Inc","Pier 1 Imports Inc.","Pilgrim's Pride Corporation","Pinnacle West Capital Corp","Pioneer-Standard Electronics Inc.","Pitney Bowes Inc.","Pittston Brinks Group","Plains All American Pipeline LP","PNC Financial Services Group Inc.","PNM Resources Inc","Polaris Industries Inc.","Polo Ralph Lauren Corp","PolyOne Corp","Popular Inc","Potlatch Corp","PPG Industries Inc","PPL Corp","Praxair Inc","Precision Castparts Corp","Premcor Inc.","Pride International Inc","Primedia Inc","Principal Financial Group Inc.","Procter & Gamble Co.","Pro-Fac Cooperative Inc.","Progress Energy Inc","Progressive Corporation","Protective Life Corp","Provident Financial Group","Providian Financial Corp.","Prudential Financial Inc.","PSS World Medical Inc","Public Service Enterprise Group Inc.","Publix Super Markets Inc.","Puget Energy Inc.","Pulte Homes Inc","Qualcomm Inc","Quanta Services Inc.","Quantum Corp","Quest Diagnostics Inc.","Questar Corp","Quintiles Transnational","Qwest Communications Intl Inc","R.J. Reynolds Tobacco Company","R.R. Donnelley & Sons Company","Radio Shack Corporation","Raymond James Financial Inc.","Raytheon Company","Reader's Digest Association Inc.","Reebok International Ltd.","Regions Financial Corp.","Regis Corporation","Reliance Steel & Aluminum Co.","Reliant Energy Inc.","Rent A Center Inc","Republic Services Inc","Revlon Inc","RGS Energy Group Inc","Rite Aid Corp","Riverwood Holding Inc.","RoadwayCorp","Robert Half International Inc.","Rock-Tenn Co","Rockwell Automation Inc","Rockwell Collins Inc","Rohm & Haas Co.","Ross Stores Inc","RPM Inc.","Ruddick Corp","Ryder System Inc","Ryerson Tull Inc","Ryland Group Inc.","Sabre Holdings Corp","Safeco Corp","Safeguard Scientifics Inc.","Safeway Inc","Saks Inc","Sanmina-SCI Inc","Sara Lee Corp","SBC Communications Inc","Scana Corp.","Schering-Plough Corp","Scholastic Corp","SCI Systems Onc.","Science Applications Intl. Inc.","Scientific-Atlanta Inc","Scotts Company","Seaboard Corp","Sealed Air Corp","Sears Roebuck & Co","Sempra Energy","Sequa Corp","Service Corp. International","ServiceMaster Co","Shaw Group Inc","Sherwin-Williams Company","Shopko Stores Inc","Siebel Systems Inc","Sierra Health Services Inc","Sierra Pacific Resources","Silgan Holdings Inc.","Silicon Graphics Inc","Simon Property Group Inc","SLM Corporation","Smith International Inc","Smithfield Foods Inc","Smurfit-Stone Container Corp","Snap-On Inc","Solectron Corp","Solutia Inc","Sonic Automotive Inc.","Sonoco Products Co.","Southern Company","Southern Union Company","SouthTrust Corp.","Southwest Airlines Co","Southwest Gas Corp","Sovereign Bancorp Inc.","Spartan Stores Inc","Spherion Corp","Sports Authority Inc","Sprint Corp.","SPX Corp","St. Jude Medical Inc","St. Paul Cos.","Staff Leasing Inc.","StanCorp Financial Group Inc","Standard Pacific Corp.","Stanley Works","Staples Inc","Starbucks Corp","Starwood Hotels & Resorts Worldwide Inc","State Street Corp.","Stater Bros. Holdings Inc.","Steelcase Inc","Stein Mart Inc","Stewart & Stevenson Services Inc","Stewart Information Services Corp","Stilwell Financial Inc","Storage Technology Corporation","Stryker Corp","Sun Healthcare Group Inc.","Sun Microsystems Inc.","SunGard Data Systems Inc.","Sunoco Inc.","SunTrust Banks Inc","Supervalu Inc","Swift Transportation, Co., Inc","Symbol Technologies Inc","Synovus Financial Corp.","Sysco Corp","Systemax Inc.","Target Corp.","Tech Data Corporation","TECO Energy Inc","Tecumseh Products Company","Tektronix Inc","Teleflex Incorporated","Telephone & Data Systems Inc","Tellabs Inc.","Temple-Inland Inc","Tenet Healthcare Corporation","Tenneco Automotive Inc.","Teradyne Inc","Terex Corp","Tesoro Petroleum Corp.","Texas Industries Inc.","Texas Instruments Incorporated","Textron Inc","Thermo Electron Corporation","Thomas & Betts Corporation","Tiffany & Co","Timken Company","TJX Companies Inc","TMP Worldwide Inc","Toll Brothers Inc","Torchmark Corporation","Toro Company","Tower Automotive Inc.","Toys 'R' Us Inc","Trans World Entertainment Corp.","TransMontaigne Inc","Transocean Inc","TravelCenters of America Inc.","Triad Hospitals Inc","Tribune Company","Trigon Healthcare Inc.","Trinity Industries Inc","Trump Hotels & Casino Resorts Inc.","TruServ Corporation","TRW Inc","TXU Corp","Tyson Foods Inc","U.S. Bancorp","U.S. Industries Inc.","UAL Corporation","UGI Corporation","Unified Western Grocers Inc","Union Pacific Corporation","Union Planters Corp","Unisource Energy Corp","Unisys Corporation","United Auto Group Inc","United Defense Industries Inc.","United Parcel Service Inc","United Rentals Inc","United Stationers Inc","United Technologies Corporation","UnitedHealth Group Incorporated","Unitrin Inc","Universal Corporation","Universal Forest Products Inc","Universal Health Services Inc","Unocal Corporation","Unova Inc","UnumProvident Corporation","URS Corporation","US Airways Group Inc","US Oncology Inc","USA Interactive","USFreighways Corporation","USG Corporation","UST Inc","Valero Energy Corporation","Valspar Corporation","Value City Department Stores Inc","Varco International Inc","Vectren Corporation","Veritas Software Corporation","Verizon Communications Inc","VF Corporation","Viacom Inc","Viad Corp","Viasystems Group Inc","Vishay Intertechnology Inc","Visteon Corporation","Volt Information Sciences Inc","Vulcan Materials Company","W.R. Berkley Corporation","W.R. Grace & Co","W.W. Grainger Inc","Wachovia Corporation","Wakenhut Corporation","Walgreen Co","Wallace Computer Services Inc","Wal-Mart Stores Inc","Walt Disney Co","Walter Industries Inc","Washington Mutual Inc","Washington Post Co.","Waste Management Inc","Watsco Inc","Weatherford International Inc","Weis Markets Inc.","Wellpoint Health Networks Inc","Wells Fargo & Company","Wendy's International Inc","Werner Enterprises Inc","WESCO International Inc","Western Digital Inc","Western Gas Resources Inc","WestPoint Stevens Inc","Weyerhauser Company","WGL Holdings Inc","Whirlpool Corporation","Whole Foods Market Inc","Willamette Industries Inc.","Williams Companies Inc","Williams Sonoma Inc","Winn Dixie Stores Inc","Wisconsin Energy Corporation","Wm Wrigley Jr Company","World Fuel Services Corporation","WorldCom Inc","Worthington Industries Inc","WPS Resources Corporation","Wyeth","Wyndham International Inc","Xcel Energy Inc","Xerox Corp","Xilinx Inc","XO Communications Inc","Yellow Corporation","York International Corp","Yum Brands Inc.","Zale Corporation","Zions Bancorporation"],fileExtension:{raster:["bmp","gif","gpl","ico","jpeg","psd","png","psp","raw","tiff"],vector:["3dv","amf","awg","ai","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","odg","svg","xar"],"3d":["3dmf","3dm","3mf","3ds","an8","aoi","blend","cal3d","cob","ctm","iob","jas","max","mb","mdx","obj","x","x3d"],document:["doc","docx","dot","html","xml","odt","odm","ott","csv","rtf","tex","xhtml","xps"]},timezones:[{name:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:false,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{name:"UTC-11",abbr:"U",offset:-11,isdst:false,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{name:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:false,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{name:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:true,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{name:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:true,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{name:"Pacific Standard Time",abbr:"PDT",offset:-7,isdst:true,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{name:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:false,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{name:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:true,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{name:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:true,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{name:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:false,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{name:"Central Standard Time",abbr:"CDT",offset:-5,isdst:true,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{name:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:true,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{name:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:false,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{name:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:false,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{name:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:true,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{name:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:true,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{name:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:false,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{name:"Paraguay Standard Time",abbr:"PST",offset:-4,isdst:false,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{name:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:true,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{name:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:false,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{name:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:false,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{name:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:false,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{name:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:true,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{name:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:false,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{name:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:false,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{name:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:false,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{name:"Greenland Standard Time",abbr:"GDT",offset:-2,isdst:true,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{name:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:false,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{name:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:false,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{name:"UTC-02",abbr:"U",offset:-2,isdst:false,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{name:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:true,text:"(UTC-02:00) Mid-Atlantic - Old"},{name:"Azores Standard Time",abbr:"ADT",offset:0,isdst:true,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{name:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:false,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{name:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:true,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{name:"UTC",abbr:"CUT",offset:0,isdst:false,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{name:"GMT Standard Time",abbr:"GDT",offset:1,isdst:true,text:"(UTC) Dublin, Edinburgh, Lisbon, London",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London"]},{name:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:false,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{name:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:true,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{name:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:true,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{name:"Romance Standard Time",abbr:"RDT",offset:2,isdst:true,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{name:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:true,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{name:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:false,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{name:"Namibia Standard Time",abbr:"NST",offset:1,isdst:false,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{name:"GTB Standard Time",abbr:"GDT",offset:3,isdst:true,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{name:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:true,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{name:"Egypt Standard Time",abbr:"EST",offset:2,isdst:false,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{name:"Syria Standard Time",abbr:"SDT",offset:3,isdst:true,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{name:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:true,text:"(UTC+02:00) E. Europe"},{name:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:false,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{name:"FLE Standard Time",abbr:"FDT",offset:3,isdst:true,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{name:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:true,text:"(UTC+02:00) Istanbul",utc:["Europe/Istanbul"]},{name:"Israel Standard Time",abbr:"JDT",offset:3,isdst:true,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{name:"Libya Standard Time",abbr:"LST",offset:2,isdst:false,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{name:"Jordan Standard Time",abbr:"JST",offset:3,isdst:false,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{name:"Arabic Standard Time",abbr:"AST",offset:3,isdst:false,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{name:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:false,text:"(UTC+03:00) Kaliningrad, Minsk",utc:["Europe/Kaliningrad","Europe/Minsk"]},{name:"Arab Standard Time",abbr:"AST",offset:3,isdst:false,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{name:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:false,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{name:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:true,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{name:"Arabian Standard Time",abbr:"AST",offset:4,isdst:false,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{name:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:true,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{name:"Russian Standard Time",abbr:"RST",offset:4,isdst:false,text:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",utc:["Europe/Moscow","Europe/Samara","Europe/Simferopol","Europe/Volgograd"]},{name:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:false,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{name:"Georgian Standard Time",abbr:"GST",offset:4,isdst:false,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{name:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:false,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{name:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:false,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{name:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:false,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{name:"Pakistan Standard Time",abbr:"PST",offset:5,isdst:false,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{name:"India Standard Time",abbr:"IST",offset:5.5,isdst:false,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Calcutta"]},{name:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:false,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{name:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:false,text:"(UTC+05:45) Kathmandu",utc:["Asia/Katmandu"]},{name:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:false,text:"(UTC+06:00) Astana",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{name:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:false,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{name:"Ekaterinburg Standard Time",abbr:"EST",offset:6,isdst:false,text:"(UTC+06:00) Ekaterinburg",utc:["Asia/Yekaterinburg"]},{name:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:false,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{name:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:false,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{name:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:false,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{name:"China Standard Time",abbr:"CST",offset:8,isdst:false,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{name:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:false,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{name:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:false,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{name:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:false,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{name:"Taipei Standard Time",abbr:"TST",offset:8,isdst:false,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{name:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:false,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{name:"North Asia East Standard Time",abbr:"NAEST",offset:9,isdst:false,text:"(UTC+09:00) Irkutsk",utc:["Asia/Irkutsk"]},{name:"Tokyo Standard Time",abbr:"TST",offset:9,isdst:false,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{name:"Korea Standard Time",abbr:"KST",offset:9,isdst:false,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{name:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:false,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{name:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:false,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{name:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:false,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{name:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:false,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{name:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:false,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{name:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:false,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{name:"Yakutsk Standard Time",abbr:"YST",offset:10,isdst:false,text:"(UTC+10:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{name:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:false,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{name:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:false,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{name:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:false,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{name:"UTC+12",abbr:"U",offset:12,isdst:false,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{name:"Fiji Standard Time",abbr:"FST",offset:12,isdst:false,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{name:"Magadan Standard Time",abbr:"MST",offset:12,isdst:false,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{name:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:true,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{name:"Tonga Standard Time",abbr:"TST",offset:13,isdst:false,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{name:"Samoa Standard Time",abbr:"SST",offset:13,isdst:false,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}],profession:["Airline Pilot","Academic Team","Accountant","Account Executive","Actor","Actuary","Acquisition Analyst","Administrative Asst.","Administrative Analyst","Administrator","Advertising Director","Aerospace Engineer","Agent","Agricultural Inspector","Agricultural Scientist","Air Traffic Controller","Animal Trainer","Anthropologist","Appraiser","Architect","Art Director","Artist","Astronomer","Athletic Coach","Auditor","Author","Baker","Banker","Bankruptcy Attorney","Benefits Manager","Biologist","Bio-feedback Specialist","Biomedical Engineer","Biotechnical Researcher","Broadcaster","Broker","Building Manager","Building Contractor","Building Inspector","Business Analyst","Business Planner","Business Manager","Buyer","Call Center Manager","Career Counselor","Cash Manager","Ceramic Engineer","Chief Executive Officer","Chief Operation Officer","Chef","Chemical Engineer","Chemist","Child Care Manager","Chief Medical Officer","Chiropractor","Cinematographer","City Housing Manager","City Manager","Civil Engineer","Claims Manager","Clinical Research Assistant","Collections Manager","Compliance Manager","Comptroller","Computer Manager","Commercial Artist","Communications Affairs Director","Communications Director","Communications Engineer","Compensation Analyst","Computer Programmer","Computer Ops. Manager","Computer Engineer","Computer Operator","Computer Graphics Specialist","Construction Engineer","Construction Manager","Consultant","Consumer Relations Manager","Contract Administrator","Copyright Attorney","Copywriter","Corporate Planner","Corrections Officer","Cosmetologist","Credit Analyst","Cruise Director","Chief Information Officer","Chief Technology Officer","Customer Service Manager","Cryptologist","Dancer","Data Security Manager","Database Manager","Day Care Instructor","Dentist","Designer","Design Engineer","Desktop Publisher","Developer","Development Officer","Diamond Merchant","Dietitian","Direct Marketer","Director","Distribution Manager","Diversity Manager","Economist","EEO Compliance Manager","Editor","Education Adminator","Electrical Engineer","Electro Optical Engineer","Electronics Engineer","Embassy Management","Employment Agent","Engineer Technician","Entrepreneur","Environmental Analyst","Environmental Attorney","Environmental Engineer","Environmental Specialist","Escrow Officer","Estimator","Executive Assistant","Executive Director","Executive Recruiter","Facilities Manager","Family Counselor","Fashion Events Manager","Fashion Merchandiser","Fast Food Manager","Film Producer","Film Production Assistant","Financial Analyst","Financial Planner","Financier","Fine Artist","Wildlife Specialist","Fitness Consultant","Flight Attendant","Flight Engineer","Floral Designer","Food & Beverage Director","Food Service Manager","Forestry Technician","Franchise Management","Franchise Sales","Fraud Investigator","Freelance Writer","Fund Raiser","General Manager","Geologist","General Counsel","Geriatric Specialist","Gerontologist","Glamour Photographer","Golf Club Manager","Gourmet Chef","Graphic Designer","Grounds Keeper","Hazardous Waste Manager","Health Care Manager","Health Therapist","Health Service Administrator","Hearing Officer","Home Economist","Horticulturist","Hospital Administrator","Hotel Manager","Human Resources Manager","Importer","Industrial Designer","Industrial Engineer","Information Director","Inside Sales","Insurance Adjuster","Interior Decorator","Internal Controls Director","International Acct.","International Courier","International Lawyer","Interpreter","Investigator","Investment Banker","Investment Manager","IT Architect","IT Project Manager","IT Systems Analyst","Jeweler","Joint Venture Manager","Journalist","Labor Negotiator","Labor Organizer","Labor Relations Manager","Lab Services Director","Lab Technician","Land Developer","Landscape Architect","Law Enforcement Officer","Lawyer","Lead Software Engineer","Lead Software Test Engineer","Leasing Manager","Legal Secretary","Library Manager","Litigation Attorney","Loan Officer","Lobbyist","Logistics Manager","Maintenance Manager","Management Consultant","Managed Care Director","Managing Partner","Manufacturing Director","Manpower Planner","Marine Biologist","Market Res. Analyst","Marketing Director","Materials Manager","Mathematician","Membership Chairman","Mechanic","Mechanical Engineer","Media Buyer","Medical Investor","Medical Secretary","Medical Technician","Mental Health Counselor","Merchandiser","Metallurgical Engineering","Meteorologist","Microbiologist","MIS Manager","Motion Picture Director","Multimedia Director","Musician","Network Administrator","Network Specialist","Network Operator","New Product Manager","Novelist","Nuclear Engineer","Nuclear Specialist","Nutritionist","Nursing Administrator","Occupational Therapist","Oceanographer","Office Manager","Operations Manager","Operations Research Director","Optical Technician","Optometrist","Organizational Development Manager","Outplacement Specialist","Paralegal","Park Ranger","Patent Attorney","Payroll Specialist","Personnel Specialist","Petroleum Engineer","Pharmacist","Photographer","Physical Therapist","Physician","Physician Assistant","Physicist","Planning Director","Podiatrist","Political Analyst","Political Scientist","Politician","Portfolio Manager","Preschool Management","Preschool Teacher","Principal","Private Banker","Private Investigator","Probation Officer","Process Engineer","Producer","Product Manager","Product Engineer","Production Engineer","Production Planner","Professional Athlete","Professional Coach","Professor","Project Engineer","Project Manager","Program Manager","Property Manager","Public Administrator","Public Safety Director","PR Specialist","Publisher","Purchasing Agent","Publishing Director","Quality Assurance Specialist","Quality Control Engineer","Quality Control Inspector","Radiology Manager","Railroad Engineer","Real Estate Broker","Recreational Director","Recruiter","Redevelopment Specialist","Regulatory Affairs Manager","Registered Nurse","Rehabilitation Counselor","Relocation Manager","Reporter","Research Specialist","Restaurant Manager","Retail Store Manager","Risk Analyst","Safety Engineer","Sales Engineer","Sales Trainer","Sales Promotion Manager","Sales Representative","Sales Manager","Service Manager","Sanitation Engineer","Scientific Programmer","Scientific Writer","Securities Analyst","Security Consultant","Security Director","Seminar Presenter","Ship's Officer","Singer","Social Director","Social Program Planner","Social Research","Social Scientist","Social Worker","Sociologist","Software Developer","Software Engineer","Software Test Engineer","Soil Scientist","Special Events Manager","Special Education Teacher","Special Projects Director","Speech Pathologist","Speech Writer","Sports Event Manager","Statistician","Store Manager","Strategic Alliance Director","Strategic Planning Director","Stress Reduction Specialist","Stockbroker","Surveyor","Structural Engineer","Superintendent","Supply Chain Director","System Engineer","Systems Analyst","Systems Programmer","System Administrator","Tax Specialist","Teacher","Technical Support Specialist","Technical Illustrator","Technical Writer","Technology Director","Telecom Analyst","Telemarketer","Theatrical Director","Title Examiner","Tour Escort","Tour Guide Director","Traffic Manager","Trainer Translator","Transportation Manager","Travel Agent","Treasurer","TV Programmer","Underwriter","Union Representative","University Administrator","University Dean","Urban Planner","Veterinarian","Vendor Relations Director","Viticulturist","Warehouse Manager"],animals:{ocean:["Acantharea","Anemone","Angelfish King","Ahi Tuna","Albacore","American Oyster","Anchovy","Armored Snail","Arctic Char","Atlantic Bluefin Tuna","Atlantic Cod","Atlantic Goliath Grouper","Atlantic Trumpetfish","Atlantic Wolffish","Baleen Whale","Banded Butterflyfish","Banded Coral Shrimp","Banded Sea Krait","Barnacle","Barndoor Skate","Barracuda","Basking Shark","Bass","Beluga Whale","Bluebanded Goby","Bluehead Wrasse","Bluefish","Bluestreak Cleaner-Wrasse","Blue Marlin","Blue Shark","Blue Spiny Lobster","Blue Tang","Blue Whale","Broadclub Cuttlefish","Bull Shark","Chambered Nautilus","Chilean Basket Star","Chilean Jack Mackerel","Chinook Salmon","Christmas Tree Worm","Clam","Clown Anemonefish","Clown Triggerfish","Cod","Coelacanth","Cockscomb Cup Coral","Common Fangtooth","Conch","Cookiecutter Shark","Copepod","Coral","Corydoras","Cownose Ray","Crab","Crown-of-Thorns Starfish","Cushion Star","Cuttlefish","California Sea Otters","Dolphin","Dolphinfish","Dory","Devil Fish","Dugong","Dumbo Octopus","Dungeness Crab","Eccentric Sand Dollar","Edible Sea Cucumber","Eel","Elephant Seal","Elkhorn Coral","Emperor Shrimp","Estuarine Crocodile","Fathead Sculpin","Fiddler Crab","Fin Whale","Flameback","Flamingo Tongue Snail","Flashlight Fish","Flatback Turtle","Flatfish","Flying Fish","Flounder","Fluke","French Angelfish","Frilled Shark","Fugu (also called Pufferfish)","Gar","Geoduck","Giant Barrel Sponge","Giant Caribbean Sea Anemone","Giant Clam","Giant Isopod","Giant Kingfish","Giant Oarfish","Giant Pacific Octopus","Giant Pyrosome","Giant Sea Star","Giant Squid","Glowing Sucker Octopus","Giant Tube Worm","Goblin Shark","Goosefish","Great White Shark","Greenland Shark","Grey Atlantic Seal","Grouper","Grunion","Guineafowl Puffer","Haddock","Hake","Halibut","Hammerhead Shark","Hapuka","Harbor Porpoise","Harbor Seal","Hatchetfish","Hawaiian Monk Seal","Hawksbill Turtle","Hector's Dolphin","Hermit Crab","Herring","Hoki","Horn Shark","Horseshoe Crab","Humpback Anglerfish","Humpback Whale","Icefish","Imperator Angelfish","Irukandji Jellyfish","Isopod","Ivory Bush Coral","Japanese Spider Crab","Jellyfish","John Dory","Juan Fernandez Fur Seal","Killer Whale","Kiwa Hirsuta","Krill","Lagoon Triggerfish","Lamprey","Leafy Seadragon","Leopard Seal","Limpet","Ling","Lionfish","Lions Mane Jellyfish","Lobe Coral","Lobster","Loggerhead Turtle","Longnose Sawshark","Longsnout Seahorse","Lophelia Coral","Marrus Orthocanna","Manatee","Manta Ray","Marlin","Megamouth Shark","Mexican Lookdown","Mimic Octopus","Moon Jelly","Mollusk","Monkfish","Moray Eel","Mullet","Mussel","Megaladon","Napoleon Wrasse","Nassau Grouper","Narwhal","Nautilus","Needlefish","Northern Seahorse","North Atlantic Right Whale","Northern Red Snapper","Norway Lobster","Nudibranch","Nurse Shark","Oarfish","Ocean Sunfish","Oceanic Whitetip Shark","Octopus","Olive Sea Snake","Orange Roughy","Ostracod","Otter","Oyster","Pacific Angelshark","Pacific Blackdragon","Pacific Halibut","Pacific Sardine","Pacific Sea Nettle Jellyfish","Pacific White Sided Dolphin","Pantropical Spotted Dolphin","Patagonian Toothfish","Peacock Mantis Shrimp","Pelagic Thresher Shark","Penguin","Peruvian Anchoveta","Pilchard","Pink Salmon","Pinniped","Plankton","Porpoise","Polar Bear","Portuguese Man o' War","Pycnogonid Sea Spider","Quahog","Queen Angelfish","Queen Conch","Queen Parrotfish","Queensland Grouper","Ragfish","Ratfish","Rattail Fish","Ray","Red Drum","Red King Crab","Ringed Seal","Risso's Dolphin","Ross Seals","Sablefish","Salmon","Sand Dollar","Sandbar Shark","Sawfish","Sarcastic Fringehead","Scalloped Hammerhead Shark","Seahorse","Sea Cucumber","Sea Lion","Sea Urchin","Seal","Shark","Shortfin Mako Shark","Shovelnose Guitarfish","Shrimp","Silverside Fish","Skipjack Tuna","Slender Snipe Eel","Smalltooth Sawfish","Smelts","Sockeye Salmon","Southern Stingray","Sponge","Spotted Porcupinefish","Spotted Dolphin","Spotted Eagle Ray","Spotted Moray","Squid","Squidworm","Starfish","Stickleback","Stonefish","Stoplight Loosejaw","Sturgeon","Swordfish","Tan Bristlemouth","Tasseled Wobbegong","Terrible Claw Lobster","Threespot Damselfish","Tiger Prawn","Tiger Shark","Tilefish","Toadfish","Tropical Two-Wing Flyfish","Tuna","Umbrella Squid","Velvet Crab","Venus Flytrap Sea Anemone","Vigtorniella Worm","Viperfish","Vampire Squid","Vaquita","Wahoo","Walrus","West Indian Manatee","Whale","Whale Shark","Whiptail Gulper","White-Beaked Dolphin","White-Ring Garden Eel","White Shrimp","Wobbegong","Wrasse","Wreckfish","Xiphosura","Yellowtail Damselfish","Yelloweye Rockfish","Yellow Cup Black Coral","Yellow Tube Sponge","Yellowfin Tuna","Zebrashark","Zooplankton"],desert:["Aardwolf","Addax","African Wild Ass","Ant","Antelope","Armadillo","Baboon","Badger","Bat","Bearded Dragon","Beetle","Bird","Black-footed Cat","Boa","Brown Bear","Bustard","Butterfly","Camel","Caracal","Caracara","Caterpillar","Centipede","Cheetah","Chipmunk","Chuckwalla","Climbing Mouse","Coati","Cobra","Cotton Rat","Cougar","Courser","Crane Fly","Crow","Dassie Rat","Dove","Dunnart","Eagle","Echidna","Elephant","Emu","Falcon","Fly","Fox","Frogmouth","Gecko","Geoffroy's Cat","Gerbil","Grasshopper","Guanaco","Gundi","Hamster","Hawk","Hedgehog","Hyena","Hyrax","Jackal","Kangaroo","Kangaroo Rat","Kestrel","Kowari","Kultarr","Leopard","Lion","Macaw","Meerkat","Mouse","Oryx","Ostrich","Owl","Pronghorn","Python","Rabbit","Raccoon","Rattlesnake","Rhinoceros","Sand Cat","Spectacled Bear","Spiny Mouse","Starling","Stick Bug","Tarantula","Tit","Toad","Tortoise","Tyrant Flycatcher","Viper","Vulture","Waxwing","Xerus","Zebra"],grassland:["Aardvark","Aardwolf","Accentor","African Buffalo","African Wild Dog","Alpaca","Anaconda","Ant","Anteater","Antelope","Armadillo","Baboon","Badger","Bandicoot","Barbet","Bat","Bee","Bee-eater","Beetle","Bird","Bison","Black-footed Cat","Black-footed Ferret","Bluebird","Boa","Bowerbird","Brown Bear","Bush Dog","Bushshrike","Bustard","Butterfly","Buzzard","Caracal","Caracara","Cardinal","Caterpillar","Cheetah","Chipmunk","Civet","Climbing Mouse","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Common Genet","Cotton Rat","Cougar","Courser","Coyote","Crane","Crane Fly","Cricket","Crow","Culpeo","Death Adder","Deer","Deer Mouse","Dingo","Dinosaur","Dove","Drongo","Duck","Duiker","Dunnart","Eagle","Echidna","Elephant","Elk","Emu","Falcon","Finch","Flea","Fly","Flying Frog","Fox","Frog","Frogmouth","Garter Snake","Gazelle","Gecko","Geoffroy's Cat","Gerbil","Giant Tortoise","Giraffe","Grasshopper","Grison","Groundhog","Grouse","Guanaco","Guinea Pig","Hamster","Harrier","Hartebeest","Hawk","Hedgehog","Helmetshrike","Hippopotamus","Hornbill","Hyena","Hyrax","Impala","Jackal","Jaguar","Jaguarundi","Kangaroo","Kangaroo Rat","Kestrel","Kultarr","Ladybug","Leopard","Lion","Macaw","Meerkat","Mouse","Newt","Oryx","Ostrich","Owl","Pangolin","Pheasant","Prairie Dog","Pronghorn","Przewalski's Horse","Python","Quoll","Rabbit","Raven","Rhinoceros","Shelduck","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Tamandua","Tasmanian Devil","Thornbill","Thrush","Toad","Tortoise"],forest:["Agouti","Anaconda","Anoa","Ant","Anteater","Antelope","Armadillo","Asian Black Bear","Aye-aye","Babirusa","Baboon","Badger","Bandicoot","Banteng","Barbet","Basilisk","Bat","Bearded Dragon","Bee","Bee-eater","Beetle","Bettong","Binturong","Bird-of-paradise","Bongo","Bowerbird","Bulbul","Bush Dog","Bushbaby","Bushshrike","Butterfly","Buzzard","Caecilian","Cardinal","Cassowary","Caterpillar","Centipede","Chameleon","Chimpanzee","Cicada","Civet","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Colugo","Cotinga","Cotton Rat","Cougar","Crane Fly","Cricket","Crocodile","Crow","Cuckoo","Cuscus","Death Adder","Deer","Dhole","Dingo","Dinosaur","Drongo","Duck","Duiker","Eagle","Echidna","Elephant","Finch","Flat-headed Cat","Flea","Flowerpecker","Fly","Flying Frog","Fossa","Frog","Frogmouth","Gaur","Gecko","Gorilla","Grison","Hawaiian Honeycreeper","Hawk","Hedgehog","Helmetshrike","Hornbill","Hyrax","Iguana","Jackal","Jaguar","Jaguarundi","Kestrel","Ladybug","Lemur","Leopard","Lion","Macaw","Mandrill","Margay","Monkey","Mouse","Mouse Deer","Newt","Okapi","Old World Flycatcher","Orangutan","Owl","Pangolin","Peafowl","Pheasant","Possum","Python","Quokka","Rabbit","Raccoon","Red Panda","Red River Hog","Rhinoceros","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Sun Bear","Tamandua","Tamarin","Tapir","Tarantula","Thrush","Tiger","Tit","Toad","Tortoise","Toucan","Trogon","Trumpeter","Turaco","Turtle","Tyrant Flycatcher","Viper","Vulture","Wallaby","Warbler","Wasp","Waxwing","Weaver","Weaver-finch","Whistler","White-eye","Whydah","Woodswallow","Worm","Wren","Xenops","Yellowjacket","Accentor","African Buffalo","American Black Bear","Anole","Bird","Bison","Boa","Brown Bear","Chipmunk","Common Genet","Copperhead","Coyote","Deer Mouse","Dormouse","Elk","Emu","Fisher","Fox","Garter Snake","Giant Panda","Giant Tortoise","Groundhog","Grouse","Guanaco","Himalayan Tahr","Kangaroo","Koala","Numbat","Quoll","Raccoon dog","Tasmanian Devil","Thornbill","Turkey","Vole","Weasel","Wildcat","Wolf","Wombat","Woodchuck","Woodpecker"],farm:["Alpaca","Buffalo","Banteng","Cow","Cat","Chicken","Carp","Camel","Donkey","Dog","Duck","Emu","Goat","Gayal","Guinea","Goose","Horse","Honey","Llama","Pig","Pigeon","Rhea","Rabbit","Sheep","Silkworm","Turkey","Yak","Zebu"],pet:["Bearded Dragon","Birds","Burro","Cats","Chameleons","Chickens","Chinchillas","Chinese Water Dragon","Cows","Dogs","Donkey","Ducks","Ferrets","Fish","Geckos","Geese","Gerbils","Goats","Guinea Fowl","Guinea Pigs","Hamsters","Hedgehogs","Horses","Iguanas","Llamas","Lizards","Mice","Mule","Peafowl","Pigs and Hogs","Pigeons","Ponies","Pot Bellied Pig","Rabbits","Rats","Sheep","Skinks","Snakes","Stick Insects","Sugar Gliders","Tarantula","Turkeys","Turtles"],zoo:["Aardvark","African Wild Dog","Aldabra Tortoise","American Alligator","American Bison","Amur Tiger","Anaconda","Andean Condor","Asian Elephant","Baby Doll Sheep","Bald Eagle","Barred Owl","Blue Iguana","Boer Goat","California Sea Lion","Caribbean Flamingo","Chinchilla","Collared Lemur","Coquerel's Sifaka","Cuban Amazon Parrot","Ebony Langur","Fennec Fox","Fossa","Gelada","Giant Anteater","Giraffe","Gorilla","Grizzly Bear","Henkel's Leaf-tailed Gecko","Indian Gharial","Indian Rhinoceros","King Cobra","King Vulture","Komodo Dragon","Linne's Two-toed Sloth","Lion","Little Penguin","Madagascar Tree Boa","Magellanic Penguin","Malayan Tapir","Malayan Tiger","Matschies Tree Kangaroo","Mini Donkey","Monarch Butterfly","Nile crocodile","North American Porcupine","Nubian Ibex","Okapi","Poison Dart Frog","Polar Bear","Pygmy Marmoset","Radiated Tortoise","Red Panda","Red Ruffed Lemur","Ring-tailed Lemur","Ring-tailed Mongoose","Rock Hyrax","Small Clawed Asian Otter","Snow Leopard","Snowy Owl","Southern White-faced Owl","Southern White Rhinocerous","Squirrel Monkey","Tufted Puffin","White Cheeked Gibbon","White-throated Bee Eater","Zebra"]},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007],emotions:["love","joy","surprise","anger","sadness","fear"]};var o_hasOwnProperty=Object.prototype.hasOwnProperty;var o_keys=Object.keys||function(obj){var result=[];for(var key in obj){if(o_hasOwnProperty.call(obj,key)){result.push(key)}}return result};function _copyObject(source,target){var keys=o_keys(source);var key;for(var i=0,l=keys.length;i<l;i++){key=keys[i];target[key]=source[key]||target[key]}}function _copyArray(source,target){for(var i=0,l=source.length;i<l;i++){target[i]=source[i]}}function copyObject(source,_target){var isArray=Array.isArray(source);var target=_target||(isArray?new Array(source.length):{});if(isArray){_copyArray(source,target)}else{_copyObject(source,target)}return target}Chance.prototype.get=function(name){return copyObject(data[name])};Chance.prototype.mac_address=function(options){options=initOptions(options);if(!options.separator){options.separator=options.networkVersion?".":":"}var mac_pool="ABCDEF1234567890",mac="";if(!options.networkVersion){mac=this.n(this.string,6,{pool:mac_pool,length:2}).join(options.separator)}else{mac=this.n(this.string,3,{pool:mac_pool,length:4}).join(options.separator)}return mac};Chance.prototype.normal=function(options){options=initOptions(options,{mean:0,dev:1,pool:[]});testRange(options.pool.constructor!==Array,"Chance: The pool option must be a valid array.");testRange(typeof options.mean!=="number","Chance: Mean (mean) must be a number");testRange(typeof options.dev!=="number","Chance: Standard deviation (dev) must be a number");if(options.pool.length>0){return this.normal_pool(options)}var s,u,v,norm,mean=options.mean,dev=options.dev;do{u=this.random()*2-1;v=this.random()*2-1;s=u*u+v*v}while(s>=1);norm=u*Math.sqrt(-2*Math.log(s)/s);return dev*norm+mean};Chance.prototype.normal_pool=function(options){var performanceCounter=0;do{var idx=Math.round(this.normal({mean:options.mean,dev:options.dev}));if(idx<options.pool.length&&idx>=0){return options.pool[idx]}else{performanceCounter++}}while(performanceCounter<100);throw new RangeError("Chance: Your pool is too small for the given mean and standard deviation. Please adjust.")};Chance.prototype.radio=function(options){options=initOptions(options,{side:"?"});var fl="";switch(options.side.toLowerCase()){case"east":case"e":fl="W";break;case"west":case"w":fl="K";break;default:fl=this.character({pool:"KW"});break}return fl+this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"})+this.character({alpha:true,casing:"upper"})};Chance.prototype.set=function(name,values){if(typeof name==="string"){data[name]=values}else{data=copyObject(name,data)}};Chance.prototype.tv=function(options){return this.radio(options)};Chance.prototype.cnpj=function(){var n=this.n(this.natural,8,{max:9});var d1=2+n[7]*6+n[6]*7+n[5]*8+n[4]*9+n[3]*2+n[2]*3+n[1]*4+n[0]*5;d1=11-d1%11;if(d1>=10){d1=0}var d2=d1*2+3+n[7]*7+n[6]*8+n[5]*9+n[4]*2+n[3]*3+n[2]*4+n[1]*5+n[0]*6;d2=11-d2%11;if(d2>=10){d2=0}return""+n[0]+n[1]+"."+n[2]+n[3]+n[4]+"."+n[5]+n[6]+n[7]+"/0001-"+d1+d2};Chance.prototype.emotion=function(){return this.pick(this.get("emotions"))};Chance.prototype.mersenne_twister=function(seed){return new MersenneTwister(seed)};Chance.prototype.blueimp_md5=function(){return new BlueImpMD5};var MersenneTwister=function(seed){if(seed===undefined){seed=Math.floor(Math.random()*Math.pow(10,13))}this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=new Array(this.N);this.mti=this.N+1;this.init_genrand(seed)};MersenneTwister.prototype.init_genrand=function(s){this.mt[0]=s>>>0;for(this.mti=1;this.mti<this.N;this.mti++){s=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((s&4294901760)>>>16)*1812433253<<16)+(s&65535)*1812433253+this.mti;this.mt[this.mti]>>>=0}};MersenneTwister.prototype.init_by_array=function(init_key,key_length){var i=1,j=0,k,s;this.init_genrand(19650218);k=this.N>key_length?this.N:key_length;for(;k;k--){s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(((s&4294901760)>>>16)*1664525<<16)+(s&65535)*1664525)+init_key[j]+j;this.mt[i]>>>=0;i++;j++;if(i>=this.N){this.mt[0]=this.mt[this.N-1];i=1}if(j>=key_length){j=0}}for(k=this.N-1;k;k--){s=this.mt[i-1]^this.mt[i-1]>>>30;this.mt[i]=(this.mt[i]^(((s&4294901760)>>>16)*1566083941<<16)+(s&65535)*1566083941)-i;this.mt[i]>>>=0;i++;if(i>=this.N){this.mt[0]=this.mt[this.N-1];i=1}}this.mt[0]=2147483648};MersenneTwister.prototype.genrand_int32=function(){var y;var mag01=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var kk;if(this.mti===this.N+1){this.init_genrand(5489)}for(kk=0;kk<this.N-this.M;kk++){y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK;this.mt[kk]=this.mt[kk+this.M]^y>>>1^mag01[y&1]}for(;kk<this.N-1;kk++){y=this.mt[kk]&this.UPPER_MASK|this.mt[kk+1]&this.LOWER_MASK;this.mt[kk]=this.mt[kk+(this.M-this.N)]^y>>>1^mag01[y&1]}y=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-1]^y>>>1^mag01[y&1];this.mti=0}y=this.mt[this.mti++];y^=y>>>11;y^=y<<7&2636928640;y^=y<<15&4022730752;y^=y>>>18;return y>>>0};MersenneTwister.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};MersenneTwister.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)};MersenneTwister.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};MersenneTwister.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)};MersenneTwister.prototype.genrand_res53=function(){var a=this.genrand_int32()>>>5,b=this.genrand_int32()>>>6;return(a*67108864+b)*(1/9007199254740992)};var BlueImpMD5=function(){};BlueImpMD5.prototype.VERSION="1.0.1";BlueImpMD5.prototype.safe_add=function safe_add(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535};BlueImpMD5.prototype.bit_roll=function(num,cnt){return num<<cnt|num>>>32-cnt};BlueImpMD5.prototype.md5_cmn=function(q,a,b,x,s,t){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(a,q),this.safe_add(x,t)),s),b)};BlueImpMD5.prototype.md5_ff=function(a,b,c,d,x,s,t){return this.md5_cmn(b&c|~b&d,a,b,x,s,t)};BlueImpMD5.prototype.md5_gg=function(a,b,c,d,x,s,t){return this.md5_cmn(b&d|c&~d,a,b,x,s,t)};BlueImpMD5.prototype.md5_hh=function(a,b,c,d,x,s,t){return this.md5_cmn(b^c^d,a,b,x,s,t)};BlueImpMD5.prototype.md5_ii=function(a,b,c,d,x,s,t){return this.md5_cmn(c^(b|~d),a,b,x,s,t)};BlueImpMD5.prototype.binl_md5=function(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=this.md5_ff(a,b,c,d,x[i],7,-680876936);d=this.md5_ff(d,a,b,c,x[i+1],12,-389564586);c=this.md5_ff(c,d,a,b,x[i+2],17,606105819);b=this.md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=this.md5_ff(a,b,c,d,x[i+4],7,-176418897);d=this.md5_ff(d,a,b,c,x[i+5],12,1200080426);c=this.md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=this.md5_ff(b,c,d,a,x[i+7],22,-45705983);a=this.md5_ff(a,b,c,d,x[i+8],7,1770035416);d=this.md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=this.md5_ff(c,d,a,b,x[i+10],17,-42063);b=this.md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=this.md5_ff(a,b,c,d,x[i+12],7,1804603682);d=this.md5_ff(d,a,b,c,x[i+13],12,-40341101);c=this.md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=this.md5_ff(b,c,d,a,x[i+15],22,1236535329);a=this.md5_gg(a,b,c,d,x[i+1],5,-165796510);d=this.md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=this.md5_gg(c,d,a,b,x[i+11],14,643717713);b=this.md5_gg(b,c,d,a,x[i],20,-373897302);a=this.md5_gg(a,b,c,d,x[i+5],5,-701558691);d=this.md5_gg(d,a,b,c,x[i+10],9,38016083);c=this.md5_gg(c,d,a,b,x[i+15],14,-660478335);b=this.md5_gg(b,c,d,a,x[i+4],20,-405537848);a=this.md5_gg(a,b,c,d,x[i+9],5,568446438);d=this.md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=this.md5_gg(c,d,a,b,x[i+3],14,-187363961);b=this.md5_gg(b,c,d,a,x[i+8],20,1163531501);a=this.md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=this.md5_gg(d,a,b,c,x[i+2],9,-51403784);c=this.md5_gg(c,d,a,b,x[i+7],14,1735328473);b=this.md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=this.md5_hh(a,b,c,d,x[i+5],4,-378558);d=this.md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=this.md5_hh(c,d,a,b,x[i+11],16,1839030562);b=this.md5_hh(b,c,d,a,x[i+14],23,-35309556);a=this.md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=this.md5_hh(d,a,b,c,x[i+4],11,1272893353);c=this.md5_hh(c,d,a,b,x[i+7],16,-155497632);b=this.md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=this.md5_hh(a,b,c,d,x[i+13],4,681279174);d=this.md5_hh(d,a,b,c,x[i],11,-358537222);c=this.md5_hh(c,d,a,b,x[i+3],16,-722521979);b=this.md5_hh(b,c,d,a,x[i+6],23,76029189);a=this.md5_hh(a,b,c,d,x[i+9],4,-640364487);d=this.md5_hh(d,a,b,c,x[i+12],11,-421815835);c=this.md5_hh(c,d,a,b,x[i+15],16,530742520);b=this.md5_hh(b,c,d,a,x[i+2],23,-995338651);a=this.md5_ii(a,b,c,d,x[i],6,-198630844);d=this.md5_ii(d,a,b,c,x[i+7],10,1126891415);c=this.md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=this.md5_ii(b,c,d,a,x[i+5],21,-57434055);a=this.md5_ii(a,b,c,d,x[i+12],6,1700485571);d=this.md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=this.md5_ii(c,d,a,b,x[i+10],15,-1051523);b=this.md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=this.md5_ii(a,b,c,d,x[i+8],6,1873313359);d=this.md5_ii(d,a,b,c,x[i+15],10,-30611744);c=this.md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=this.md5_ii(b,c,d,a,x[i+13],21,1309151649);a=this.md5_ii(a,b,c,d,x[i+4],6,-145523070);d=this.md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=this.md5_ii(c,d,a,b,x[i+2],15,718787259);b=this.md5_ii(b,c,d,a,x[i+9],21,-343485551);a=this.safe_add(a,olda);b=this.safe_add(b,oldb);c=this.safe_add(c,oldc);d=this.safe_add(d,oldd)}return[a,b,c,d]};BlueImpMD5.prototype.binl2rstr=function(input){var i,output="";for(i=0;i<input.length*32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output};BlueImpMD5.prototype.rstr2binl=function(input){var i,output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}for(i=0;i<input.length*8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output};BlueImpMD5.prototype.rstr_md5=function(s){return this.binl2rstr(this.binl_md5(this.rstr2binl(s),s.length*8))};BlueImpMD5.prototype.rstr_hmac_md5=function(key,data){var i,bkey=this.rstr2binl(key),ipad=[],opad=[],hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=this.binl_md5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=this.binl_md5(ipad.concat(this.rstr2binl(data)),512+data.length*8);return this.binl2rstr(this.binl_md5(opad.concat(hash),512+128))};BlueImpMD5.prototype.rstr2hex=function(input){var hex_tab="0123456789abcdef",output="",x,i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(x&15)}return output};BlueImpMD5.prototype.str2rstr_utf8=function(input){return unescape(encodeURIComponent(input))};BlueImpMD5.prototype.raw_md5=function(s){return this.rstr_md5(this.str2rstr_utf8(s))};BlueImpMD5.prototype.hex_md5=function(s){return this.rstr2hex(this.raw_md5(s))};BlueImpMD5.prototype.raw_hmac_md5=function(k,d){return this.rstr_hmac_md5(this.str2rstr_utf8(k),this.str2rstr_utf8(d))};BlueImpMD5.prototype.hex_hmac_md5=function(k,d){return this.rstr2hex(this.raw_hmac_md5(k,d))};BlueImpMD5.prototype.md5=function(string,key,raw){if(!key){if(!raw){return this.hex_md5(string)}return this.raw_md5(string)}if(!raw){return this.hex_hmac_md5(key,string)}return this.raw_hmac_md5(key,string)};{if(module.exports){exports=module.exports=Chance}exports.Chance=Chance}if(typeof importScripts!=="undefined"){chance=new Chance;self.Chance=Chance}if(typeof window==="object"&&typeof window.document==="object"){window.Chance=Chance;window.chance=new Chance}})()})(chance$1,chance$1.exports);const storage=new Map;function deleteStorage(storageKey){if(storageKey!==undefined)storage.delete(storageKey)}function updateStorage(storageKey,informationToStore){const existingInformation=storage.get(storageKey)??{};storage.set(storageKey,{...existingInformation,...informationToStore})}function getValueFromStorage(storageKey,propertyName){return storage.get(storageKey)?.[propertyName]}function getValueFromCursorStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateCursorStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromLegendStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateLegendStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromChartStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateChartStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromSeriesStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateSeriesStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromAxisStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateAxisStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromMarkerStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateMarkerStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function getValueFromLabelStorage(storageKey,propertyName){return getValueFromStorage(storageKey,propertyName)}function updateLabelStorage(storageKey,informationToStore){updateStorage(storageKey,informationToStore)}function showElement(element,visible){if(visible===false&&element.isHiding===false){element.visible=false;element.hide()}else if(element.isShowing===false){element.visible=true;element.show()}}function swapSeries(series,positionChanges){for(let iPermut=0;iPermut<positionChanges.length;iPermut+=1){const oldIndex=positionChanges[iPermut][0];const newIndex=positionChanges[iPermut][1];const numberOfSeries=series.length;if(oldIndex>=0&&oldIndex<numberOfSeries&&newIndex>=0&&newIndex<numberOfSeries){series.swap(positionChanges[iPermut][0],positionChanges[iPermut][1])}}}function amChartsColorToEsriColor(fill,fillOpacity){let color;if(fill!==undefined&&"rgb"in fill===true){if(fill.rgb!==undefined){const colorRgb=fill.rgb;if(colorRgb!==undefined){const{r,g,b}=colorRgb;const a=fillOpacity!==undefined?fillOpacity*255:255;color=[r,g,b,a]}}}return color}function esriColorToAmChartsColor(input){const inputColor=input??[0,0,0,255];const colorFillObj=new Color({a:inputColor[3]/255,b:inputColor[2],g:inputColor[1],r:inputColor[0]});return colorFillObj}function hexColorToRGB(input){return color(input).rgb}function findBulletMarker(series){const marker=series.bullets.values.find((bullet=>getValueFromMarkerStorage(bullet.uid,"isBulletMarker")));return marker}function getChartUniqueInternalID(chart){const randomIdGenerator=new chance$1.exports.Chance(chart.uid);const uniqueID=randomIdGenerator.guid();return uniqueID}function isElementValid(element){return element!==undefined&&element!==null&&element.isDisposed()!==true}function isElementVisible(element){return(element.isShowing===true||element.visible===true)&&element.isHidden===false&&element.isHiding===false&&element.disabled===false&&element.__disabled===false}function isElementOutsideOfPlotContainer(element,chart){const isOutside=element.pixelX<0||element.pixelX>chart?.plotContainer?.measuredWidth||element.pixelY<0||element.pixelY>chart?.plotContainer?.measuredHeight;return isOutside}function findChart(element){let chart;if(element.baseSprite instanceof XYChart||element.baseSprite instanceof PieChart){chart=element.baseSprite}else if(element instanceof AxisFill||element instanceof AxisFillCircular){chart=element.axis.chart}return chart}function getChartBackgroundColor(chart){return amChartsColorToEsriColor(chart.background.fill)}const LabelType={XAxisTitle:"XAxisTitle",YAxisTitle:"YAxisTitle",ChartTitle:"ChartTitle",ChartSubTitle:"ChartSubTitle",ChartFooter:"ChartFooter",GuideLabel:"GuideLabel"};function getDirectionallyStrongCharacter(isRTL,character=":"){const unicodeStrongLTR="";const unicodeStrongRTL="";return isRTL===false?`${unicodeStrongLTR}${character}`:`${unicodeStrongRTL}${character}`}function generateTruncationCallback(characterLimit){let callback=value=>value;if(characterLimit!==null&&characterLimit!==undefined&&characterLimit>0){const ellipsis=ChartDefaults.chartEllipsis;callback=value=>{let output=typeof value==="number"?`${value}`:value;if(isEmptyStringField$1(output)===false&&output!==ChartDefaults.htmlEmptyContent){const processedString=truncateWithEllipsis(output,characterLimit,"",false);const isTruncated=processedString.length<output.length;output=isTruncated?`${processedString}${ellipsis}`:processedString}return output}}return callback}function escapeBrackets(value){const regexSquareOpenBracketsObj=/[\[]/g;const regexSquareCloseBracketsObj=/[\]]/g;const regexCurlyOpenBracketsObj=/[\{]/g;const regexCurlyCloseBracketsObj=/[\}]/g;const regexApostropheObj=/[\']/g;value=value.replace(regexSquareOpenBracketsObj,"[[");value=value.replace(regexSquareCloseBracketsObj,"]]");value=value.replace(regexCurlyOpenBracketsObj,"{{");value=value.replace(regexCurlyCloseBracketsObj,"}}");value=value.replace(regexApostropheObj,"''");return value}function autoAdjustLabelMaxWidthCallback(props){const{chart,label,labelType}=props;let maxWidth=NaN;switch(labelType){case LabelType.GuideLabel:if(chart instanceof GaugeChart===false){if(label.rotation===90||label.rotation===270)maxWidth=chart.seriesContainer.measuredHeight;else maxWidth=chart.seriesContainer.measuredWidth}break;case LabelType.XAxisTitle:maxWidth=chart.seriesContainer.measuredWidth;break;case LabelType.YAxisTitle:maxWidth=chart.seriesContainer.measuredHeight;break;case LabelType.ChartTitle:case LabelType.ChartSubTitle:case LabelType.ChartFooter:maxWidth=chart.measuredWidth-20;break}if(maxWidth>0){label.maxWidth=maxWidth;chart.invalidateLabels();if(chart instanceof XYChart){chart.xAxes.getIndex(0)?.invalidateLabels();chart.yAxes.getIndex(0)?.invalidateLabels()}}}function autoAdjustLabelMaxWidth(props){const{chart,labelType}=props;autoAdjustLabelMaxWidthCallback(props);const adapterPriority=labelType===LabelType.YAxisTitle?1:0;chart.events.on(EventTypes.Validated,debounce((()=>autoAdjustLabelMaxWidthCallback(props)),ChartDefaults.debounceTime),adapterPriority)}function createPattern(props){const{fill,rotation,isLinePattern,chartBackgroundColor}=props;let pattern;if(isLinePattern!==false){pattern=new LinePattern;pattern.width=ChartDefaults.patternLineProperties.width??NaN;pattern.height=ChartDefaults.patternLineProperties.height??NaN;pattern.strokeWidth=ChartDefaults.patternLineProperties.strokeWidth??NaN;pattern.stroke=fill;pattern.rotation=rotation??NaN}else{pattern=new RectPattern;pattern.rectWidth=ChartDefaults.patternRectProperties.rectWidth??NaN;pattern.rectHeight=ChartDefaults.patternRectProperties.rectHeight??NaN;pattern.width=ChartDefaults.patternRectProperties.width??NaN;pattern.height=ChartDefaults.patternRectProperties.height??NaN;pattern.fillOpacity=ChartDefaults.patternRectProperties.fillOpacity??NaN;pattern.strokeWidth=ChartDefaults.patternRectProperties.strokeWidth??NaN;pattern.fill=esriColorToAmChartsColor(chartBackgroundColor);pattern.stroke=fill;pattern.rotation=rotation??NaN}return pattern}function mapDimension(width){let mappedValue=NaN;if(typeof width==="number"){mappedValue=width}else if(width.includes("%")){const percentValue=Number.parseFloat(width.trim().replace("%","").trim());if(Number.isFinite(percentValue))mappedValue=percent(percentValue)}return mappedValue}function mapFillSymbolStyle(props){const{fill,style,chartBackgroundColor}=props;let pattern;let rotation;let isLinePattern=true;switch(style){case RESTSimpleFillSymbolStyle.Horizontal:{rotation=0;break}case RESTSimpleFillSymbolStyle.Vertical:{rotation=90;break}case RESTSimpleFillSymbolStyle.ForwardDiagonal:{rotation=45;break}case RESTSimpleFillSymbolStyle.BackwardDiagonal:{rotation=135;break}case RESTSimpleFillSymbolStyle.DiagonalCross:case RESTSimpleFillSymbolStyle.Cross:{rotation=0;isLinePattern=false;break}}if(rotation!==undefined)pattern=createPattern({fill,rotation,isLinePattern,chartBackgroundColor});return pattern}function mapColor(color){let output=new Color({r:0,g:0,b:0,a:0/255});if(color!==null&&color!==undefined){const[r,g,b,a]=color;output=new Color({r,g,b,a:a/255})}return output}function mapAngle(angle,defaultAngle=0){return(angle??defaultAngle)%360}function mapLineSymbolStyle(lineStyle,forceSquareLineCap){return forceSquareLineCap!==true||lineStyle?.includes("Dot")===true?"round":"square"}function mapPath(style,size){let path="";const cx=0;const cy=0;const half=(size??0)/2;const left=cx-half;const right=cx+half;const top=cy-half;const bottom=cy+half;switch(style){case RESTSimpleMarkerSymbolStyle.Circle:path=`M ${left},${cy} a ${half},${half} 0 1,0 ${half*2},0 a ${half},${half} 0 1,0 ${-half*2},0`;break;case RESTSimpleMarkerSymbolStyle.Cross:path=`M ${left},0 L ${right},0 M 0,${top} L 0,${bottom} E`;break;case RESTSimpleMarkerSymbolStyle.Diamond:path=`M ${left},0 L 0,${top} L ${right},0 L 0,${bottom} L ${left},0 Z`;break;case RESTSimpleMarkerSymbolStyle.Square:path=`M ${left},${bottom} L ${left},${top} L ${right},${top} L ${right},${bottom} L ${left},${bottom} Z`;break;case RESTSimpleMarkerSymbolStyle.Triangle:path=`M ${left},${bottom} L 0,${top} L ${right},${bottom} L ${left},${bottom} Z`;break;case RESTSimpleMarkerSymbolStyle.X:path=`M ${left},${bottom} L ${right},${top} M ${left},${top} L ${right},${bottom} E`;break}return path}function mapHAlignmentToAlign(alignment,defaults){let mappedAlignment="none";switch(alignment??defaults){case RESTHorizontalAlignment$1.Justify:case RESTHorizontalAlignment$1.Center:mappedAlignment="center";break;case RESTHorizontalAlignment$1.Left:mappedAlignment="left";break;case RESTHorizontalAlignment$1.Right:mappedAlignment="right";break}return mappedAlignment}function mapHAlignmentToHCenter(alignment,defaults){let mappedAlignment="middle";switch(alignment??defaults){case RESTHorizontalAlignment$1.Right:mappedAlignment="left";break;case RESTHorizontalAlignment$1.Left:mappedAlignment="right";break}return mappedAlignment}function mapVAlignmentToVAlign(alignment,defaults){let mappedAlignment="none";switch(alignment??defaults){case RESTVerticalAlignment$1.Baseline:case RESTVerticalAlignment$1.Middle:mappedAlignment="middle";break;case RESTVerticalAlignment$1.Top:mappedAlignment="top";break;case RESTVerticalAlignment$1.Bottom:mappedAlignment="bottom";break}return mappedAlignment}function mapVAlignmentToVCenter(alignment,defaults){let mappedAlignment=RESTVerticalAlignment$1.Middle;switch(alignment??defaults){case RESTVerticalAlignment$1.Top:mappedAlignment="bottom";break;case RESTVerticalAlignment$1.Bottom:mappedAlignment="top";break;case RESTVerticalAlignment$1.Baseline:case RESTVerticalAlignment$1.Middle:default:mappedAlignment="middle";break}return mappedAlignment}function mapFontStyle(font){let cssString="";if(font?.style!==undefined){cssString=`font-style:${font.style};`}return cssString}function mapKerning(input){const cssString=input===true?"letter-spacing:1px;":"";return cssString}function attachInlineCSS(props){const{textSymbol,placeholderString,format,defaults}=props;const fontStyle=mapFontStyle(textSymbol?.font);const kerning=mapKerning(textSymbol?.kerning);let text=placeholderString??textSymbol?.text??"";if(format==="html"){const{wrap,maxWidth}=defaults??{};const wrapInline=wrap===true&&Number.isFinite(maxWidth)===true?`max-width: ${maxWidth}; word-break: break-word;`:"";text=`<p style="margin:0;${fontStyle}${kerning}${wrapInline}">${text}</p>`}else{text=escapeBrackets(text);if(fontStyle!==""||kerning!=="")text=`[${fontStyle}${kerning}]${text}[/]`}return text}function mapLineStyleToDashArray(inputLineStyle,inputWidth){const lineStyle=inputLineStyle??RESTSimpleLineSymbolStyle$1.Solid;const width=inputWidth??ChartDefaults.lineWidth;const dasharrayMap={[RESTSimpleLineSymbolStyle$1.Solid]:"none",[RESTSimpleLineSymbolStyle$1.Dot]:[1,width],[RESTSimpleLineSymbolStyle$1.DashDotDot]:[4*width,width,1,width,1,width],[RESTSimpleLineSymbolStyle$1.Dash]:[4*width,3*width],[RESTSimpleLineSymbolStyle$1.DashDot]:[4*width,3*width,1,3*width],[RESTSimpleLineSymbolStyle$1.Null]:"none"};const outputLineStyle=dasharrayMap[lineStyle]??dasharrayMap[RESTSimpleLineSymbolStyle$1.Null];return outputLineStyle.toString()}function applyContainerDefaults(container,defaults){if(defaults!==undefined){if(defaults.layout!==undefined)container.layout=defaults.layout;if(defaults.width!==undefined)container.width=mapDimension(defaults.width);if(defaults.height!==undefined)container.height=mapDimension(defaults.height);if(defaults.paddingTop!==undefined)container.paddingTop=defaults.paddingTop;if(defaults.paddingBottom!==undefined)container.paddingBottom=defaults.paddingBottom}}function showLegendTitle(chartConfig){let decision=false;const legendVisible=chartConfig.legend?.visible;const legendTitleText=chartConfig.legend?.title?.content.text;const legendTitleVisible=chartConfig.legend?.title?.visible;decision=legendVisible!==false&&legendTitleVisible!==false&&legendTitleText!==undefined&&legendTitleText.length>0;return decision}function initializeContainer(defaults,parent){const container=new Container;applyContainerDefaults(container,defaults);container.parent=parent;return container}function updateContainer(container,disabled){container.disabled=disabled===true}function placeContainer(container,back){if(back===false){container.toFront()}else{container.toBack()}}function initializeChartContainersPaddings(chart){if(chart instanceof GaugeChart===true){const{paddingTop,paddingRight,paddingBottom,paddingLeft}=ChartDefaults.gauge;chart.padding(paddingTop,paddingRight,paddingBottom,paddingLeft)}else{const{paddingMinSize,marginMinSize,chartPaddingMinSize,chartContainer}=ChartDefaults;chart.padding(chartPaddingMinSize,chartPaddingMinSize,chartPaddingMinSize,chartPaddingMinSize);chart.chartAndLegendContainer.margin(marginMinSize,marginMinSize,marginMinSize,marginMinSize);chart.chartAndLegendContainer.padding(paddingMinSize,paddingMinSize,paddingMinSize,paddingMinSize);chart.chartContainer.margin(marginMinSize,marginMinSize,marginMinSize,marginMinSize);chart.chartContainer.padding(chartContainer.paddingTop,paddingMinSize,paddingMinSize,paddingMinSize)}}function autoAdjustContainersPaddingAccordingToLegendPosition(chart,legendTitle){const adjustContainersPaddingCallback=(chart,legendTitle)=>{const{chartContainer,chartAndLegendContainer}=ChartDefaults;const config=getValueFromChartStorage(chart.uid,"config");if(config!==undefined){const shouldShowLegendTitle=showLegendTitle(config);const position=config.legend?.position;if(shouldShowLegendTitle===true){switch(position){case WebChartLegendPositions.Top:chart.chartAndLegendContainer.paddingTop=legendTitle.bbox.height??0;chart.chartContainer.paddingBottom=chartContainer.paddingBottom??0;break;case WebChartLegendPositions.Bottom:chart.chartContainer.paddingBottom=legendTitle.bbox.height??0;chart.chartAndLegendContainer.paddingTop=chartAndLegendContainer.paddingTop??0;break;default:chart.chartAndLegendContainer.paddingTop=chartAndLegendContainer.paddingTop??0;chart.chartContainer.paddingBottom=chartContainer.paddingBottom??0;break}}else{chart.chartAndLegendContainer.paddingTop=chartAndLegendContainer.paddingTop??0;chart.chartContainer.paddingBottom=chartContainer.paddingBottom??0}}};legendTitle.events.on(EventTypes.PositionChanged,(()=>{adjustContainersPaddingCallback(chart,legendTitle)}))}function mapLineSymbol(input,forceSquareLineCap){const output={stroke:mapColor(),strokeWidth:ChartDefaults.lineWidth,strokeDasharray:"",strokeLinecap:forceSquareLineCap!==true?"round":"square",strokeOpacity:fullOpacity};if(input!==null&&input!==undefined){output.stroke=mapColor(input.color);output.strokeOpacity=1;if(input.width!==undefined){output.strokeWidth=input.width}if(input.style!==undefined&&input.style!==RESTSimpleLineSymbolStyle$1.Null){output.strokeDasharray=mapLineStyleToDashArray(input.style,output.strokeWidth);output.strokeLinecap=mapLineSymbolStyle(input.style,forceSquareLineCap)}}return output}function mapOutlineSymbol(input,fillColor){let inputOutline=input;const[r,g,b,a]=input?.color??fillColor??ChartDefaults.color;const outlineColor=[r,g,b,a];if(inputOutline===null||inputOutline===undefined){inputOutline={type:RESTSymbolType$1.SLS,color:outlineColor}}else if(inputOutline.color===undefined){inputOutline.color=outlineColor}return mapLineSymbol(inputOutline,false)}function mapFillSymbol(input,chartBackgroundColor){const{color,outline,style}=input;const fill=mapColor(color);const pattern=mapFillSymbolStyle({fill,style,chartBackgroundColor});return{pattern,fill,outline:mapOutlineSymbol(outline,color)}}function mapMarkerSymbol(input){const{color,outline,xoffset,yoffset,style,size,angle:inputAngle}=input;const path=style!==undefined?mapPath(style,size):"";const angle=mapAngle(inputAngle);return{path,fill:mapColor(color),outline:mapOutlineSymbol(outline,color),xOffset:xoffset??0,yOffset:yoffset??0,angle}}function mapSymbol(props){const{symbol,defaultToColorFromRamp,colorRampIndex,isChartFillSymbol=false,chartBackgroundColor}=props;let stylingInfo;if(defaultToColorFromRamp===true){const opacity=isChartFillSymbol?reducedOpacity$1:fullOpacity;symbol.color=symbol.color??getOneRampColor$1({colorIndex:colorRampIndex,opacity});if(isSFS(symbol)||isSMS(symbol)){const{outline}=symbol;if(outline!==undefined){outline.color=outline?.color??getOneRampColor$1({colorIndex:colorRampIndex});symbol.outline={...outline}}}}if(isSLS(symbol)){stylingInfo=mapLineSymbol(symbol,true)}else if(isSMS(symbol)){stylingInfo=mapMarkerSymbol(symbol)}else if(isSFS(symbol)){stylingInfo=mapFillSymbol(symbol,chartBackgroundColor)}return stylingInfo}function mapTextSymbol(input,isRTL,defaults){const horizontalCenter=mapHAlignmentToHCenter(input.horizontalAlignment,defaults?.horizontalCenter);const align=mapHAlignmentToAlign(input.horizontalAlignment,defaults?.align);const verticalCenter=mapVAlignmentToVCenter(input.verticalAlignment,defaults?.verticalCenter);const valign=mapVAlignmentToVAlign(input.verticalAlignment,defaults?.valign);const mappedTextSymbol={fill:mapColor(input.color),fontFamily:input.font?.family??"Arial, Helvetica, sans-serif",fontSize:input.font?.size??ChartDefaults.generalFontSize,fontWeight:input.font?.weight??"400",textDecoration:input.font?.decoration??"none",align,valign,verticalCenter,horizontalCenter,text:attachInlineCSS({textSymbol:input}),angle:mapAngle(input.angle,defaults?.rotation),xOffset:input.xoffset??defaults?.dx??0,yOffset:input.yoffset??defaults?.dy??0,backgroundFill:mapColor(input.backgroundColor),borderFill:mapColor(input.borderLineColor),borderWidth:input.borderLineSize??1,haloSize:input.haloSize??-1,haloColor:mapColor(input.haloColor),rtl:input.rightToLeft??isRTL,wrap:defaults?.wrap??false,maxWidth:defaults?.maxWidth??NaN};return mappedTextSymbol}function applyLabelDefaults(label,defaults){if(defaults!==undefined){if(defaults.marginBottom!==undefined)label.marginBottom=defaults.marginBottom;if(defaults.marginTop!==undefined)label.marginTop=defaults.marginTop;if(defaults.marginRight!==undefined)label.marginRight=defaults.marginRight;if(defaults.marginLeft!==undefined)label.marginLeft=defaults.marginLeft;if(defaults.verticalCenter!==undefined)label.verticalCenter=mapVAlignmentToVCenter(defaults.verticalCenter);if(defaults.horizontalCenter!==undefined)label.horizontalCenter=mapHAlignmentToHCenter(defaults.horizontalCenter);if(defaults.strokeWidth!==undefined)label.strokeWidth=defaults.strokeWidth;if(defaults.wrap!==undefined)label.wrap=defaults.wrap;if(defaults.truncate!==undefined)label.truncate=defaults.truncate;if(defaults.maxWidth!==undefined)label.maxWidth=defaults.maxWidth;if(defaults.applyOnClones!==undefined){label.applyOnClones=defaults.applyOnClones;label.background.applyOnClones=defaults.applyOnClones}}}function initializeLabel(defaults,parent){const label=parent?.createChild(Label)??new Label;applyLabelDefaults(label,defaults);return label}function initializeHaloFilter(filters){const filter=filters.push(new DropShadowFilter);filter.dx=1;filter.dy=1;filter.opacity=1}function updateHaloFilter(filters,haloSize,haloColor){if(haloColor.alpha>0&&haloSize>=0){if(filters.length===0){initializeHaloFilter(filters)}const filter=filters.getIndex(0);filter.blur=haloSize;filter.color=haloColor}else{filters.clear()}}function calculateLabelDisabledValue(label,labelConfig){const isGuideLabel=getValueFromLabelStorage(label.uid,"isGuide");let disableLabel=labelConfig.visible===false;if(disableLabel===false&&(isGuideLabel===true||label instanceof AxisLabel!==true)){if(labelConfig.content.text==="")disableLabel=true}return disableLabel}function updateLabelOffset(props){const{label,offset,offsetProperty}=props;const offsetAdapterPriority=99;label.adapter.remove(offsetProperty,offsetAdapterPriority);if(typeof offset==="string"&&Number.isFinite(Number(offset))===false){let percentValue=extractPercentValue(offset);if(percentValue!==undefined){percentValue/=100;label.adapter.add(offsetProperty,(()=>{const containerSize=label.parent?.[offsetProperty==="dx"?"measuredWidth":"measuredHeight"]??0;return containerSize*percentValue}),offsetAdapterPriority)}}else{label[offsetProperty]=offset}}function updateLabel(label,labelConfig,defaults){if(labelConfig!==undefined){const mappedSymbol=mapTextSymbol(labelConfig.content,label.rtl,defaults);label.fill=mappedSymbol.fill;label.fontFamily=mappedSymbol.fontFamily;label.fontWeight=mappedSymbol.fontWeight;label.fontSize=mappedSymbol.fontSize;label.textDecoration=mappedSymbol.textDecoration;label.align=mappedSymbol.align;label.valign=mappedSymbol.valign;label.verticalCenter=mappedSymbol.verticalCenter;label.horizontalCenter=mappedSymbol.horizontalCenter;label.text=mappedSymbol.text;label.background.fill=mappedSymbol.backgroundFill;label.background.stroke=mappedSymbol.borderFill;label.background.strokeWidth=mappedSymbol.borderWidth;label.rotation=mappedSymbol.angle;updateLabelOffset({label,offset:mappedSymbol.xOffset,offsetProperty:"dx"});updateLabelOffset({label,offset:mappedSymbol.yOffset,offsetProperty:"dy"});label.rtl=mappedSymbol.rtl;label.wrap=mappedSymbol.wrap;label.maxWidth=mappedSymbol.maxWidth;updateHaloFilter(label.filters,mappedSymbol.haloSize,mappedSymbol.haloColor);const disableLabel=calculateLabelDisabledValue(label,labelConfig);label.disabled=disableLabel;showElement(label,labelConfig.visible!==false&&disableLabel===false)}else{label.disabled=true}}function initializeHeaderContainer(parent){const headerContainer=initializeContainer(ChartDefaults.headerContainer,parent);const title=initializeLabel(ChartDefaults.title,headerContainer);const subTitle=initializeLabel(ChartDefaults.subtitle,headerContainer);autoAdjustLabelMaxWidth({chart:parent,label:title,labelType:LabelType.ChartTitle});autoAdjustLabelMaxWidth({chart:parent,label:subTitle,labelType:LabelType.ChartSubTitle});placeContainer(headerContainer,true);return{headerContainer,title,subTitle}}function updateHeaderContainer(headerElements,props){const{title,subTitle,headerContainer}=headerElements;updateLabel(title,props?.title,ChartDefaults.titleLabel);updateLabel(subTitle,props?.subTitle,ChartDefaults.titleLabel);updateContainer(headerContainer,title.disabled&&subTitle.disabled);autoAdjustLabelMaxWidthCallback({chart:title.parent,label:title,labelType:LabelType.ChartTitle});autoAdjustLabelMaxWidthCallback({chart:subTitle.parent,label:subTitle,labelType:LabelType.ChartSubTitle})}function initializeFooterContainer(parent){const footerContainer=initializeContainer(ChartDefaults.footerContainer,parent);const footer=initializeLabel(ChartDefaults.footer,footerContainer);autoAdjustLabelMaxWidth({chart:parent,label:footer,labelType:LabelType.ChartFooter});return{footerContainer,footer}}function updateFooterContainer(footerElements,props){const{footer,footerContainer}=footerElements;updateLabel(footer,props,ChartDefaults.footer);updateContainer(footerContainer,footer.disabled||props?.content.text==="");autoAdjustLabelMaxWidthCallback({chart:footer.parent,label:footer,labelType:LabelType.ChartFooter})}async function fetchChartLocaleStrings(locale=getLocaleInfo$1().locale){let strings=await new Promise((function(resolve,reject){require(["./en_US-2d382b9d-102ffce2"],resolve,reject)}));switch(locale){case SupportedLocales$1.Arabic:strings=await new Promise((function(resolve,reject){require(["./ar-24b7db2f-383885ed"],resolve,reject)}));break;case SupportedLocales$1.Bosnian:strings=await new Promise((function(resolve,reject){require(["./bs_BA-ed74b881-46cb77c7"],resolve,reject)}));break;case SupportedLocales$1.Bulgarian:strings=await new Promise((function(resolve,reject){require(["./bg_BG-bce027bc-f4839a6d"],resolve,reject)}));break;case SupportedLocales$1.Catalan:strings=await new Promise((function(resolve,reject){require(["./ca_ES-a8c2bde8-9d7be242"],resolve,reject)}));break;case SupportedLocales$1.Czech:strings=await new Promise((function(resolve,reject){require(["./cs_CZ-1f6d1b93-5435bdee"],resolve,reject)}));break;case SupportedLocales$1.Danish:strings=await new Promise((function(resolve,reject){require(["./da_DK-f10c06cd-d41db378"],resolve,reject)}));break;case SupportedLocales$1.German:strings=await new Promise((function(resolve,reject){require(["./de_DE-98f6c3fe-cecb1f30"],resolve,reject)}));break;case SupportedLocales$1.Greek:strings=await new Promise((function(resolve,reject){require(["./el_GR-65254bf3-9907ea5a"],resolve,reject)}));break;case SupportedLocales$1.EnglishUSA:strings=await new Promise((function(resolve,reject){require(["./en_US-2d382b9d-102ffce2"],resolve,reject)}));break;case SupportedLocales$1.Spanish:strings=await new Promise((function(resolve,reject){require(["./es_ES-3017eded-fd3a5235"],resolve,reject)}));break;case SupportedLocales$1.Estonian:strings=await new Promise((function(resolve,reject){require(["./et_EE-d71ebf31-cdd541fc"],resolve,reject)}));break;case SupportedLocales$1.Finnish:strings=await new Promise((function(resolve,reject){require(["./fi_FI-978527d3-51599434"],resolve,reject)}));break;case SupportedLocales$1.French:strings=await new Promise((function(resolve,reject){require(["./fr_FR-bd2b428f-1668ae11"],resolve,reject)}));break;case SupportedLocales$1.Hebrew:strings=await new Promise((function(resolve,reject){require(["./he_IL-6d4d49d7-76314c3d"],resolve,reject)}));break;case SupportedLocales$1.Croatian:strings=await new Promise((function(resolve,reject){require(["./hr_HR-6f77dd71-ab884c49"],resolve,reject)}));break;case SupportedLocales$1.Hungarian:strings=await new Promise((function(resolve,reject){require(["./hu_HU-c603ea25-43445d49"],resolve,reject)}));break;case SupportedLocales$1.Indonesian:strings=await new Promise((function(resolve,reject){require(["./id_ID-06524cc5-221e86c9"],resolve,reject)}));break;case SupportedLocales$1.Italian:strings=await new Promise((function(resolve,reject){require(["./it_IT-172d600f-6d0b6cc5"],resolve,reject)}));break;case SupportedLocales$1.Japanese:strings=await new Promise((function(resolve,reject){require(["./ja_JP-14e3d521-2542290f"],resolve,reject)}));break;case SupportedLocales$1.Korean:strings=await new Promise((function(resolve,reject){require(["./ko_KR-40d2cbcb-7aa8d25e"],resolve,reject)}));break;case SupportedLocales$1.Lithuanian:strings=await new Promise((function(resolve,reject){require(["./lt_LT-8a936dfc-44a0b3e7"],resolve,reject)}));break;case SupportedLocales$1.Latvian:strings=await new Promise((function(resolve,reject){require(["./lv_LV-dafd4677-7b73091b"],resolve,reject)}));break;case SupportedLocales$1.NorwegianBokml:strings=await new Promise((function(resolve,reject){require(["./nb_NO-0468e1a3-38a4a21e"],resolve,reject)}));break;case SupportedLocales$1.Dutch:strings=await new Promise((function(resolve,reject){require(["./nl_NL-8c41009a-7fd8c403"],resolve,reject)}));break;case SupportedLocales$1.Polish:strings=await new Promise((function(resolve,reject){require(["./pl_PL-0df5639c-b3f3ba72"],resolve,reject)}));break;case SupportedLocales$1.PortugueseBrazil:strings=await new Promise((function(resolve,reject){require(["./pt_BR-4d7b0a27-3a361cfb"],resolve,reject)}));break;case SupportedLocales$1.PortuguesePortugal:strings=await new Promise((function(resolve,reject){require(["./pt_PT-e61c511b-a5e7c5d6"],resolve,reject)}));break;case SupportedLocales$1.Romanian:strings=await new Promise((function(resolve,reject){require(["./ro_RO-f6caca67-7491b8e1"],resolve,reject)}));break;case SupportedLocales$1.Russian:strings=await new Promise((function(resolve,reject){require(["./ru_RU-383d4df3-e2252ee5"],resolve,reject)}));break;case SupportedLocales$1.Serbian:strings=await new Promise((function(resolve,reject){require(["./sr_RS-35eb4226-c1fba8cd"],resolve,reject)}));break;case SupportedLocales$1.Slovak:strings=await new Promise((function(resolve,reject){require(["./sk_SK-1fd8857d-086b8c4e"],resolve,reject)}));break;case SupportedLocales$1.Slovenian:strings=await new Promise((function(resolve,reject){require(["./sl_SL-76a4010d-ae21ac22"],resolve,reject)}));break;case SupportedLocales$1.Swedish:strings=await new Promise((function(resolve,reject){require(["./sv_SE-f5e3cb36-3a088dcb"],resolve,reject)}));break;case SupportedLocales$1.Thai:strings=await new Promise((function(resolve,reject){require(["./th_TH-9d2a196e-a3a8ecd7"],resolve,reject)}));break;case SupportedLocales$1.Turkish:strings=await new Promise((function(resolve,reject){require(["./tr_TR-4b15523e-60ae3878"],resolve,reject)}));break;case SupportedLocales$1.Ukrainian:strings=await new Promise((function(resolve,reject){require(["./uk_UA-809410fa-0ddb4d5e"],resolve,reject)}));break;case SupportedLocales$1.Vietnamese:strings=await new Promise((function(resolve,reject){require(["./vi_VN-de64cdf4-29c20bfe"],resolve,reject)}));break;case SupportedLocales$1.ChineseChina:strings=await new Promise((function(resolve,reject){require(["./zh_Hans-5b761044-71355178"],resolve,reject)}));break;case SupportedLocales$1.ChineseHongKong:strings=await new Promise((function(resolve,reject){require(["./zh_Hant-6bd95d45-9a788124"],resolve,reject)}));break;case SupportedLocales$1.ChineseTaiwan:strings=await new Promise((function(resolve,reject){require(["./zh_Hant-6bd95d45-9a788124"],resolve,reject)}));break}return strings.default}function getFormatter(props){const{type,iLocale,formatLocale=getLocaleInfo$1().formatLocale}=props;let formatter;switch(type){case WebChartTypes$2.NumberAxisFormat:{formatter=new NumberFormatter;formatter.language.locale=iLocale;formatter.intlLocales=formatLocale;break}case WebChartTypes$2.DateAxisFormat:{formatter=new DateFormatter;if(formatter.language!==undefined){formatter.language.locale=iLocale}formatter.intlLocales=formatLocale;break}}return formatter}function adjustLabelVisibility(seriesType,dataLabel){if(dataLabel!==undefined){if(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.LineSeries||seriesType===WebChartTypes$2.HistogramSeries){dataLabel.adapter.add("dy",((dy,label)=>{const dataItem=label.dataItem;const{chart}=dataItem?.component;label.visible=isElementOutsideOfPlotContainer(label,chart)===false;return dy}))}}}function adjustPositionForNegativeValues(seriesType,dataLabel){if(dataLabel!==undefined){if(seriesType===WebChartTypes$2.BarSeries){dataLabel.adapter.add("dx",((dx,label)=>{let newDx=dx;const dataItem=label.dataItem;const{chart}=dataItem?.component;const isChartRotated=chart!==undefined?getValueFromChartStorage(chart.uid,"isRotated"):false;if(isChartRotated===true){const itemValue=dataItem.valueX??dataItem.valueY;if(itemValue<0)newDx-=label.measuredWidth+ChartDefaults.dataLabelNegative.paddingRight}return newDx}))}if(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.LineSeries){dataLabel.adapter.add("dy",((dy,label)=>{let newDy=dy;const dataItem=label.dataItem;const{chart}=dataItem?.component;const isChartRotated=chart!==undefined?getValueFromChartStorage(chart.uid,"isRotated"):false;if(isChartRotated!==true){const itemValue=dataItem.valueX??dataItem.valueY;if(itemValue<0)newDy+=label.measuredHeight+ChartDefaults.dataLabelNegative.paddingTop}return newDy}))}}}function refreshSeriesDataLabels(series){series.bulletsContainer.invalidateLabels();if(series instanceof ColumnSeries)series.columns?.template.invalidateLabels()}function shouldHideDataLabel(props){const{dataValue,series,seriesType,stackedType,axisMin}=props;let hideDataLabel=dataValue===undefined;if(dataValue!==undefined){if(axisMin!==undefined&&dataValue<axisMin)hideDataLabel=true;else if(series instanceof ColumnSeries&&(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.ComboLineAndBarSeries)){hideDataLabel=dataValue===0&&stackedType!==undefined&&stackedType!==WebChartStackedKinds$2.Side}}return hideDataLabel}function findSeriesDataLabel(series,target){let label;const findPredicate=l=>getValueFromLabelStorage(l.uid,"isDataLabel")??false;if(target==="bullets"){label=series.bullets.values.find(findPredicate)}else if(series instanceof ColumnSeries){label=series.columns.template.children.values.find(findPredicate)}return label}function addBarOrLineSeriesDataLabelFormatter(dataLabel,series){dataLabel.adapter.add("htmlOutput",((defaultDataLabelText,label)=>{let newDataLabelText=defaultDataLabelText;const{dataItem}=label;if(isElementVisible(label)===true){if(series instanceof ColumnSeries&&dataItem instanceof ColumnSeriesDataItem||series instanceof LineSeries&&dataItem instanceof LineSeriesDataItem){const dataLabelFormatter=getValueFromSeriesStorage(series.uid,series instanceof ColumnSeries?"barSeriesDataLabelFormatter":"lineSeriesDataLabelFormatter");if(dataLabelFormatter!==undefined){const isRotated=getValueFromChartStorage(series.chart.uid,"isRotated");const stackedType=getValueFromSeriesStorage(series.uid,"stackedType");const valueXorY=isRotated===true?dataItem.valueX:dataItem.valueY;const percentXorY=isRotated===true?dataItem.values?.valueX?.totalPercent:dataItem.values?.valueY?.totalPercent;const axisMin=isRotated===true?(dataItem.component?.xAxis).min:(dataItem.component?.yAxis).min;const hideLabel=shouldHideDataLabel({dataValue:valueXorY,series,seriesType:series instanceof ColumnSeries?WebChartTypes$2.BarSeries:WebChartTypes$2.LineSeries,stackedType,axisMin});newDataLabelText=hideLabel===true?"":dataLabelFormatter(valueXorY,percentXorY)}}}return sanitizeHTMLOutput(newDataLabelText)}),0)}function generateBarOrLineSeriesDefaultDataLabelFormatter(props){const{numberFormatter,dataLabelsConfigContent,stackedType}=props;return(statValue,percent)=>{let value=stackedType===WebChartStackedKinds$2.Stacked100&&percent!==undefined?percent:statValue;if(numberFormatter.numberFormat.style==="percent")value/=100;return attachInlineCSS({textSymbol:{...dataLabelsConfigContent,text:numberFormatter.format(value)},format:"html"})}}function updateDataLabel(props){const{series,seriesType,dataLabel,labelDefaults,dataLabelsConfig,yAxisValueFormat,stackedType,isRotated,defaultDataLabelFormatter,customDataLabelFormatter}=props;if(dataLabel!==undefined){let seriesDataLabelFormatter=customDataLabelFormatter;const dataLabelsConfigContent=dataLabelsConfig?.content??{type:RESTSymbolType$1.TS};if(customDataLabelFormatter===undefined&&defaultDataLabelFormatter!==undefined&&yAxisValueFormat?.type===WebChartTypes$2.NumberAxisFormat){const formatLocale=getValueFromChartStorage(series.chart.uid,"formatLocale");const numberFormatter=getFormatter({type:yAxisValueFormat.type,iLocale:series.chart.language.locale,formatLocale});numberFormatter.numberFormat=yAxisValueFormat.intlOptions;seriesDataLabelFormatter=defaultDataLabelFormatter({numberFormatter,dataLabelsConfigContent,stackedType})}let formatterName;switch(seriesType){case WebChartTypes$2.BarSeries:formatterName="barSeriesDataLabelFormatter";break;case WebChartTypes$2.LineSeries:formatterName="lineSeriesDataLabelFormatter";break;case WebChartTypes$2.HistogramSeries:formatterName="histogramDataLabelFormatter";break;case WebChartTypes$2.ScatterSeries:formatterName="scatterPlotDataLabelFormatter";break}if(formatterName!==undefined){updateSeriesStorage(series.uid,{[formatterName]:seriesDataLabelFormatter})}if(dataLabelsConfig!==undefined){dataLabelsConfig.content.text=isRotated===true?"{valueX}":"{valueY}";dataLabelsConfig.visible=dataLabelsConfig.visible!==false}updateLabel(dataLabel,dataLabelsConfig,labelDefaults??ChartDefaults.dataLabel);refreshSeriesDataLabels(series)}}function isSideBySide(stackedType){return(stackedType??getDefaultStackedType$1())===WebChartStackedKinds$2.Side}function findDataLabels(series,stackedType){let labelToRender;let labelToHide;const sideBySideLabel=findSeriesDataLabel(series,"bullets");const stackLabel=findSeriesDataLabel(series,"columns");const sideBySide=isSideBySide(stackedType);if(sideBySide===true&&sideBySideLabel!==undefined){labelToRender=sideBySideLabel;labelToHide=stackLabel}else if(sideBySide===false){labelToRender=stackLabel;labelToHide=sideBySideLabel}return{labelToRender,labelToHide}}function initializeBarSeriesDataLabel(series,stackedType){let newLabelToRender;let newLabelToHide;const sideBySideLabel=initializeLabel(ChartDefaults.dataLabelInitialize);updateLabelStorage(sideBySideLabel.uid,{isDataLabel:true});series.bullets.push(sideBySideLabel);const stackLabel=initializeLabel(ChartDefaults.dataLabelInitialize,series.columns.template);updateLabelStorage(stackLabel.uid,{isDataLabel:true});addBarOrLineSeriesDataLabelFormatter(stackLabel,series);addBarOrLineSeriesDataLabelFormatter(sideBySideLabel,series);series.events.on(EventTypes.Validated,debounce((()=>{if(isElementVisible(stackLabel)===true){stackLabel.clones.each((label=>{if(isElementVisible(label)===true)label.validate()}))}}),ChartDefaults.debounceTime));stackLabel.html="{valueX}";sideBySideLabel.html="{valueX}";if(isSideBySide(stackedType)===true){newLabelToRender=sideBySideLabel;newLabelToHide=stackLabel}else{newLabelToRender=stackLabel;newLabelToHide=sideBySideLabel}adjustLabelVisibility(WebChartTypes$2.BarSeries,sideBySideLabel);adjustPositionForNegativeValues(WebChartTypes$2.BarSeries,newLabelToRender);return{newLabelToRender,newLabelToHide}}function updateBarSeriesDataLabel(props){const{series,stackedType,isRotated}=props;let{labelToRender,labelToHide}=findDataLabels(series,stackedType);if(labelToRender===undefined){const{newLabelToRender,newLabelToHide}=initializeBarSeriesDataLabel(series,stackedType);labelToRender=newLabelToRender;labelToHide=newLabelToHide}let labelDefaults=ChartDefaults.dataLabel;if(isSideBySide(stackedType)===false){labelDefaults=isRotated===true?ChartDefaults.dataLabelStackedRotated:ChartDefaults.dataLabelStackedNonRotated}else{labelDefaults=isRotated===true?ChartDefaults.dataLabelRotated:ChartDefaults.dataLabel}if(labelToHide!==undefined){labelToHide.visible=false;labelToHide.disabled=true}labelToRender.html="{valueX}";updateDataLabel({...props,dataLabel:labelToRender,labelDefaults,defaultDataLabelFormatter:generateBarOrLineSeriesDefaultDataLabelFormatter,seriesType:WebChartTypes$2.BarSeries})}function createLoaderContainer(parent){const container=new Container;container.width=percent(100);container.height=percent(100);container.background.fill=mapColor(ChartDefaults.loaderBackground);container.parent=parent;return container}function createLoaderLabel(parent){const label=new Label;label.valign=RESTVerticalAlignment$1.Middle;label.align=RESTHorizontalAlignment$1.Center;label.fontSize=ChartDefaults.loaderLabelFontSize;label.dy=40;label.text="";label.parent=parent;return label}function createLoaderPolygon(parent){const polygon=new Polygon;polygon.parent=parent;polygon.align=RESTHorizontalAlignment$1.Center;polygon.valign=RESTVerticalAlignment$1.Middle;polygon.path="M2.2 16A13.81 13.81 0 0 1 14 2.362v1.01a12.8 12.8 0 1 0 4 0v-1.01A13.792 13.792 0 1 1 2.2 16z";polygon.stroke=color("#007ac2");polygon.strokeWidth=2;return polygon}function addAnimationToPolygon(polygon){const imageTimeout=window.setInterval((()=>{polygon.animate({from:0,to:360,property:"rotation"},ChartDefaults.loaderRotationSpeed)}),ChartDefaults.loaderIntervalTimeout);return imageTimeout}function createCloseLoaderButton(parent){const closeLoaderButton=new Button;closeLoaderButton.parent=parent;closeLoaderButton.align="right";closeLoaderButton.marginRight=4;closeLoaderButton.icon=new Sprite;closeLoaderButton.icon.path="M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z";return closeLoaderButton}function createLoader(container){const loaderContainer=createLoaderContainer(container);createLoaderLabel(loaderContainer);const loaderPolygon=createLoaderPolygon(loaderContainer);const closeLoaderButton=createCloseLoaderButton(loaderContainer);return{loaderPolygon,loaderContainer,closeLoaderButton}}function initializeLoader(chart){if(chart.preloader!==undefined){chart.preloader.disabled=true}let loaderContainer;let loaderPolygon;let closeLoaderButton;let animationTimeout;if(chart.tooltipContainer!==undefined){const loaderElements=createLoader(chart.tooltipContainer);loaderContainer=loaderElements.loaderContainer;loaderPolygon=loaderElements.loaderPolygon;closeLoaderButton=loaderElements.closeLoaderButton}function hideLoader(){if(animationTimeout!==undefined){window.clearInterval(animationTimeout);animationTimeout=undefined}if(loaderContainer!==undefined){showElement(loaderContainer,false);if(chart instanceof XYChart)chart.zoomOutButton.disabled=false}}function showLoader(show){if(show===true){if(animationTimeout===undefined&&loaderPolygon!==undefined){animationTimeout=addAnimationToPolygon(loaderPolygon)}if(loaderContainer!==undefined){showElement(loaderContainer);if(chart instanceof XYChart)chart.zoomOutButton.disabled=true}}}hideLoader();if(closeLoaderButton!==undefined){closeLoaderButton.events.on(EventTypes.Hit,(()=>{hideLoader()}))}return{hideLoader,showLoader}}function whetherSeriesReady(series){const decision=series.values.every((chartSeries=>chartSeries.isReady()));return decision}function attachLoaderHandle(seriesInstance,hideLoaderHandle){seriesInstance.events.on(EventTypes.Ready,(()=>{if(seriesInstance.chart!==undefined){if(whetherSeriesReady(seriesInstance.chart.series)===true){hideLoaderHandle();notifyRenderingCompleted(seriesInstance.chart.htmlContainer)}}}))}function updateColor(symbolToUpdate,colorFromDataContext){if(colorFromDataContext!==undefined&&colorFromDataContext!==null){if(Array.isArray(colorFromDataContext)){if(colorFromDataContext.length>=3&&typeof colorFromDataContext[0]==="number"&&Number.isFinite(colorFromDataContext[0])){const[r,g,b]=colorFromDataContext;const a=colorFromDataContext.length===4?colorFromDataContext[3]:symbolToUpdate?.color?.[3]??255;symbolToUpdate.color=[r,g,b,a]}}else if(typeof colorFromDataContext==="string"){const convertedColor=hexColorToRGB(colorFromDataContext);if(convertedColor!==undefined){const{r,g,b}=convertedColor;const a=convertedColor.a!==undefined?convertedColor.a*255:symbolToUpdate?.color?.[3]??255;symbolToUpdate.color=[r,g,b,a]}}}}function setColorStyling(props){const{dataKeys,dataItem,currentSymbol}=props;const updatedSymbol={...currentSymbol};if(dataKeys.fillColor!==undefined)updateColor(updatedSymbol,dataItem[dataKeys.fillColor]);const opacityKey=dataKeys.fillOpacity;if(opacityKey!==undefined){const fillOpacity=dataItem[opacityKey];if(typeof fillOpacity==="number"&&Number.isFinite(fillOpacity)&&updatedSymbol?.color!==undefined){updatedSymbol.color[3]=fillOpacity}}return updatedSymbol}function setOutlineStyling(props){const{dataKeys,dataItem,outline}=props;const updatedOutline={...outline};if(dataKeys.outlineColor!==undefined)updateColor(updatedOutline,dataItem[dataKeys.outlineColor]);if(dataKeys.outlineWidth!==undefined){const outlineWidth=dataItem[dataKeys.outlineWidth];if(typeof outlineWidth==="number"&&Number.isFinite(outlineWidth)){updatedOutline.width=outlineWidth}}if(dataKeys.outlineOpacity!==undefined){const outlineOpacity=dataItem[dataKeys.outlineOpacity];if(typeof outlineOpacity==="number"&&Number.isFinite(outlineOpacity)&&updatedOutline.color!==undefined){updatedOutline.color[3]=outlineOpacity}}return updatedOutline}function buildSymbolFromConfigFields(props){const{currentSymbol,dataKeys,dataItem,seriesIndex}=props;let symbol=cloneDeep$1(currentSymbol);if(symbol.color===undefined)symbol.color=getOneRampColor$1({colorIndex:seriesIndex});symbol=setColorStyling({dataKeys,dataItem,currentSymbol:symbol});if(symbol.type!==RESTSymbolType$1.SLS){symbol.outline=setOutlineStyling({dataKeys,dataItem,outline:symbol.outline??{type:RESTSymbolType$1.SLS}})}if(dataKeys.markerSize!==undefined&&currentSymbol.type===RESTSymbolType$1.SMS){const markerSize=dataItem[dataKeys.markerSize];if(typeof markerSize==="number"&&Number.isFinite(markerSize)){symbol.size=markerSize}}return symbol}function getConfigFieldsStyle(props){const{configFields,dataItem,currentSymbol,y,seriesIndex}=props;let symbol={...currentSymbol};if(configFields!==undefined&&dataItem!==undefined){const dataKeys=getComputedConfigFieldKeys({y,keys:configFields});symbol=buildSymbolFromConfigFields({currentSymbol,dataKeys,dataItem,seriesIndex})}return symbol}function getElementSymbolFromConfigFields(props){const{element,seriesSymbol,seriesConfig,dataSource,seriesIndex}=props;let{y}=props;const{configFields}=dataSource;const seriesType=getSeriesType$1([seriesConfig]);let dataItem;switch(seriesType){case WebChartTypes$2.ScatterSeries:case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:case WebChartTypes$2.PieSeries:dataItem=element.dataItem?.dataContext;break;case WebChartTypes$2.HistogramSeries:dataItem=element.dataItem?.dataContext?.symbol;break}const chartType=getSeriesType$1([seriesConfig]);if(y===undefined&&(chartType===WebChartTypes$2.BarSeries||chartType===WebChartTypes$2.LineSeries)){y=seriesConfig?.y}const symbol=getConfigFieldsStyle({y,configFields,dataItem,seriesIndex,currentSymbol:seriesSymbol});if(symbol.color===undefined){const rampColor=getOneRampColor$1({colorIndex:seriesIndex,opacity:fullOpacity});symbol.color=rampColor}return symbol}function assignColorToSymbol(props){const{symbol,rendererSymbol,colorIndex}=props;const symbolToComplete=symbol;const needToAssignColorToOutlineToo=symbol.type!==RESTSymbolType$1.SLS;let[r,g,b,a]=getOneRampColor$1({colorIndex});a*=reducedOpacity$1;let[rOutline,gOutline,bOutline,aOutline]=[undefined,undefined,undefined,undefined];if(needToAssignColorToOutlineToo===true){const currentOutlineColor=symbolToComplete.outline?.color;if(currentOutlineColor!==undefined)[rOutline,gOutline,bOutline,aOutline]=currentOutlineColor}if(rendererSymbol?.color!==undefined&&rendererSymbol?.color!==null){[r,g,b,a]=rendererSymbol.color;[rOutline,gOutline,bOutline]=rendererSymbol.outline?.color??rendererSymbol.color}else if(symbolToComplete.color!==undefined){[r,g,b,a]=symbolToComplete.color}let baseStylingInfo={...symbolToComplete,color:[r,g,b,a],style:rendererSymbol?.style??symbolToComplete.style};if(needToAssignColorToOutlineToo===true){baseStylingInfo={...baseStylingInfo,outline:{...baseStylingInfo.outline,type:RESTSymbolType$1.SLS,color:[rOutline??r,gOutline??g,bOutline??b,aOutline??255],width:rendererSymbol?.outline?.width??baseStylingInfo.outline?.width}}}return baseStylingInfo}function setFillProperties(element,fill,pattern){if(pattern!==undefined&&element.tooltip!==undefined){element.tooltip.getFillFromObject=false;element.tooltip.background.fill=fill}element.fill=pattern??fill;element.fillOpacity=1}function setOutlineProperties(element,outline){element.stroke=outline.stroke;element.strokeOpacity=1;element.strokeDasharray=outline.strokeDasharray;element.strokeLinecap=outline.strokeLinecap;element.strokeWidth=outline.strokeWidth}function updateMarkerElements(props){const{element,markerSymbol,visible,defaultToColorFromRamp,colorRampIndex}=props;let stylingInfo;if(markerSymbol!==undefined){stylingInfo=mapSymbol({symbol:{...markerSymbol,size:element.minWidth??markerSymbol.size},defaultToColorFromRamp,colorRampIndex});if(stylingInfo!==undefined){element.path=stylingInfo.path;element.rotation=stylingInfo.angle;element.dx=stylingInfo.xOffset;element.dy=stylingInfo.yOffset;setFillProperties(element,stylingInfo.fill);setOutlineProperties(element,stylingInfo.outline)}showElement(element,visible);element.disabled=visible===false}else{element.disabled=true}return stylingInfo}function updateLineElements(props){const{element,lineSymbol,visible,defaultToColorFromRamp,colorRampIndex}=props;let stylingInfo;if(lineSymbol!==undefined){stylingInfo=mapSymbol({symbol:lineSymbol,defaultToColorFromRamp,colorRampIndex});if(stylingInfo!==undefined)setOutlineProperties(element,stylingInfo);showElement(element,visible)}else{showElement(element,false)}return stylingInfo}function updateFillElements(props){const{element,fillSymbol,visible,defaultToColorFromRamp,colorRampIndex,isChartFillSymbol}=props;let stylingInfo;let chartBackgroundColor;if(fillSymbol!==undefined){if(fillSymbol.style===RESTSimpleFillSymbolStyle.Cross||fillSymbol.style===RESTSimpleFillSymbolStyle.DiagonalCross){const chart=findChart(element);if(chart!==undefined)chartBackgroundColor=getChartBackgroundColor(chart)}stylingInfo=mapSymbol({symbol:fillSymbol,defaultToColorFromRamp,colorRampIndex,isChartFillSymbol,chartBackgroundColor});if(stylingInfo!==undefined){setFillProperties(element,stylingInfo.fill,stylingInfo.pattern);setOutlineProperties(element,stylingInfo.outline)}element.disabled=visible===false}else{element.disabled=true}return stylingInfo}function updateSymbolElementStyle(props){const{element,seriesConfig,dataSource,seriesIndex,seriesSymbol,isChartFillSymbol,rendererSymbol}=props;let colorMatchSymbol;let stylingInfo;if(seriesConfig.colorType===WebChartColoringPatterns$1.Match){if(dataSource.type===WebChartDataSourceTypes$1.Layer){if(rendererSymbol!==undefined){colorMatchSymbol=assignColorToSymbol({rendererSymbol,symbol:seriesSymbol,colorIndex:seriesIndex})}}else{colorMatchSymbol=getElementSymbolFromConfigFields(props)}}const updateProps={element,defaultToColorFromRamp:true,colorRampIndex:seriesIndex};const symbolToUpdate=colorMatchSymbol??{...seriesSymbol};switch(seriesSymbol.type){case RESTSymbolType$1.SLS:stylingInfo=updateLineElements({...updateProps,lineSymbol:symbolToUpdate});break;case RESTSymbolType$1.SFS:stylingInfo=updateFillElements({...updateProps,fillSymbol:symbolToUpdate,isChartFillSymbol});break;case RESTSymbolType$1.SMS:stylingInfo=updateMarkerElements({...updateProps,markerSymbol:symbolToUpdate});break}return{symbolWithColorInfo:symbolToUpdate,stylingInfo}}function setStateProperties(state,theme){if(theme!==undefined){const stateProperties=state.properties;const{elementColor,elementOutlineColor,elementOutlineWidth,rotation,transformation}=theme;const{opacity,scale}=transformation??{};if(elementColor!==undefined){stateProperties.fill=esriColorToAmChartsColor(elementColor);stateProperties.fillOpacity=1}if(elementOutlineColor!==undefined){stateProperties.stroke=esriColorToAmChartsColor(elementOutlineColor)}if(elementOutlineWidth!==undefined)stateProperties.strokeWidth=elementOutlineWidth;if(rotation!==undefined)stateProperties.rotation=rotation;if(scale!==undefined)stateProperties.scale=scale;if(opacity!==undefined){stateProperties.fillOpacity=(stateProperties.fillOpacity??1)*opacity;if(stateProperties.strokeOpacity!==undefined)stateProperties.strokeOpacity*=opacity}}}function isElementIncludedInSelection(element,cursorSelectionRectangle){let included=false;if(cursorSelectionRectangle!==undefined&&isElementVisible(element)===true){const elementRectangle=spriteRectToSvg(element.bbox,element);const cursorXMin=cursorSelectionRectangle.x;const cursorYMin=cursorSelectionRectangle.y;const cursorXMax=cursorSelectionRectangle.x+cursorSelectionRectangle.width;const cursorYMax=cursorSelectionRectangle.y+cursorSelectionRectangle.height;const elementXMin=elementRectangle.x;const elementYMin=elementRectangle.y;const elementXMax=elementRectangle.x+elementRectangle.width;const elementYMax=elementRectangle.y+elementRectangle.height;included=(elementXMin>cursorXMax||elementXMax<cursorXMin||elementYMin>cursorYMax||elementYMax<cursorYMin)===false}return included}function setSelectionTheme(props){const{element,customSelectionTheme,useNativeState}=props;const activeStateName=useNativeState===true?States.Active:States.CustomActive;const activeState=element.states.getKey(activeStateName)??element.states.create(activeStateName);const inactiveState=element.states.getKey(States.CustomInactive)??element.states.create(States.CustomInactive);const{selectedElementsTheme,nonSelectedElementsTheme}=customSelectionTheme??ChartDefaults.selectionTheme??{};setStateProperties(activeState,selectedElementsTheme);setStateProperties(inactiveState,nonSelectedElementsTheme)}function toggleStateForElement(props){const{element,selected,multiSelect,isDateOrCategoryAxis,useNativeState,backToDefaultState}=props;if(element!==undefined){let newActive=element.isActive;if(multiSelect!==true){if(isDateOrCategoryAxis===true){newActive=element.isActive===true?false:element.isActive!==selected}else{newActive=selected}}else{newActive=element.isActive!==selected}if(newActive!==element.isActive)element.isActive=newActive;const stateIfActive=useNativeState===true?States.Active:States.CustomActive;const stateIfNonActive=backToDefaultState===true?States.Default:States.CustomInactive;element.setState(element.isActive===true?stateIfActive:stateIfNonActive,0)}return element?.isActive??false}function isMultiSelectionOn(ev){let multiSelection=false;const chart=ev?.target instanceof AxisLabel?ev?.target?.dataItem?.component?.chart:ev?.target;if(chart instanceof XYChart||chart instanceof PieChart){const actionMode=getValueFromChartStorage(chart.uid,"actionMode");if(actionMode!==undefined){multiSelection=actionMode===ActionModes$1.MultiSelection||actionMode===ActionModes$1.MultiSelectionWithCtrlKey&&(ev?.event?.ctrlKey===true||ev?.event?.metaKey===true)}}return multiSelection}function isHitOnSelectableArea(chart){const zoomOutButtonHovered=chart instanceof XYChart?chart.zoomOutButton.isHover===true:false;const legendHovered=chart.legend.isHover===true;let xAxesHovered=false;let yAxesHovered=false;let axisLabelHit=false;if(chart instanceof XYChart){xAxesHovered=chart.xAxes.values.some((axis=>axis.renderer.labels.template.events.has(EventTypes.Hit)&&axis.renderer.isHover));yAxesHovered=chart.yAxes.values.some((axis=>axis.renderer.labels.template.events.has(EventTypes.Hit)&&axis.renderer.isHover));axisLabelHit=xAxesHovered===true||yAxesHovered===true}return zoomOutButtonHovered===false&&legendHovered===false&&axisLabelHit===false}function isDateXAxis(chart){let dateAxis=false;if(chart instanceof XYChart){const isRotated=getValueFromChartStorage(chart.uid,"isRotated");dateAxis=isRotated===true?chart.yAxes.getIndex(0)instanceof DateAxis:chart.xAxes.getIndex(0)instanceof DateAxis}return dateAxis}function isValueFormatTypeChanged(axis,valueFormat){const isNonAggregatedBarChart=getValueFromChartStorage(axis.chart.uid,"isNonAggregatedChart")??false;const isDate=isNonAggregatedBarChart===false&&isDateValueFormat(valueFormat)&&axis instanceof DateAxis;const isValue=isNumberValueFormat(valueFormat)&&axis instanceof ValueAxis&&axis instanceof DateAxis===false;const isCategory=(isCategoryValueFormat(valueFormat)||isNonAggregatedBarChart===true)&&axis instanceof CategoryAxis;const isFormatTypeChanged=isDate===false&&isValue===false&&isCategory===false;return isFormatTypeChanged}function valueAxisFormatterCallback(axis,defaultOutput){let output=typeof defaultOutput==="number"?`${defaultOutput}`:defaultOutput;const numberFormatter=getValueFromAxisStorage(axis.uid,"numberFormatter");if(numberFormatter!==undefined){output=numberFormatter(defaultOutput)}if(isEmptyStringField$1(output)===true)output=ChartDefaults.htmlEmptyContent;return sanitizeHTMLOutput(output)}function initializeValueAxisFormatter(axis){const adapterPriority=0;axis.renderer.labels.template.html=ChartDefaults.htmlEmptyContent;axis.renderer.labels.template.adapter.add("htmlOutput",((defaultHTMLOutput,target)=>valueAxisFormatterCallback(axis,target?.dataItem?.value??defaultHTMLOutput)),adapterPriority)}function categoryAxisFormatterCallback(props){const{axis,defaultOutput,dataItem}=props;let output=defaultOutput;const categoryFormatter=getValueFromAxisStorage(axis.uid,"categoryFormatter");const numberFormatter=getValueFromAxisStorage(axis.uid,"numberFormatter");if((numberFormatter!==undefined||categoryFormatter!==undefined)&&dataItem instanceof CategoryAxisDataItem){const config=getValueFromChartStorage(axis.chart.uid,"config");const specificField=getDisplayLabelFromConfigFields(config);let category=getXAxisValueFromContext({value:dataItem.category,dataContext:dataItem.dataContext,specificField});if(typeof category==="number"&&numberFormatter!==undefined){output=numberFormatter(category)}else if(categoryFormatter!==undefined){const chartSubType=getChartSubType$1(config?.series);const chartSubTypesToUseAlias=[ChartSubType$1.BoxPlotMonoField,ChartSubType$1.BoxPlotMultiFields,ChartSubType$1.BoxPlotMonoFieldAndSplitBy,ChartSubType$1.BoxPlotMultiFieldsAndSplitBy];if(chartSubTypesToUseAlias.includes(chartSubType)&&typeof category==="string"){const fieldList=getValueFromChartStorage(axis.chart.uid,"fieldList");category=getFieldAlias(fieldList,category)}output=categoryFormatter(category)}}if(isEmptyStringField$1(output)===true)output=ChartDefaults.htmlEmptyContent;return sanitizeHTMLOutput(output)}function initializeCategoryAxisFormatter(axis){const adapterPriority=0;axis.renderer.labels.template.html=ChartDefaults.htmlEmptyContent;axis.renderer.labels.template.adapter.add("htmlOutput",((defaultOutput,target)=>categoryAxisFormatterCallback({axis,defaultOutput,dataItem:target?.dataItem})),adapterPriority)}function dateAxisFormatterCallback(props){const{axis,defaultOutput,dataItem}=props;let output=defaultOutput;const dateFormatter=getValueFromAxisStorage(axis.uid,"dateFormatter");if(dateFormatter!==undefined&&dataItem instanceof DateAxisDataItem){output=dateFormatter(dataItem.value??defaultOutput)}if(isEmptyStringField$1(output)===true)output=ChartDefaults.htmlEmptyContent;return sanitizeHTMLOutput(output)}function initializeDateAxisFormatter(axis){const adapterPriority=0;axis.renderer.labels.template.adapter.add("htmlOutput",((defaultHTMLOutput,target)=>dateAxisFormatterCallback({axis,dataItem:target?.dataItem,defaultOutput:defaultHTMLOutput})),adapterPriority);axis.renderer.labels.template.adapter.disableKey("htmlOutput")}function initializeAxisInlineCSSFormatter(axis){const adapterPriority=1;axis.renderer.labels.template.adapter.add("htmlOutput",(defaultHTMLOutput=>{let output=defaultHTMLOutput;const fontStyleCallback=getValueFromAxisStorage(axis.uid,"fontStyleCallback");if(fontStyleCallback!==undefined)output=fontStyleCallback(output);return sanitizeHTMLOutput(output)}),adapterPriority)}function initializeAxisFormatter(axis){if(axis instanceof ValueAxis&&axis instanceof DateAxis===false){initializeValueAxisFormatter(axis)}else if(axis instanceof CategoryAxis){initializeCategoryAxisFormatter(axis)}else if(axis instanceof DateAxis){initializeDateAxisFormatter(axis)}initializeAxisInlineCSSFormatter(axis)}function updateDateAxisFormatter(props){const{axis,formatOptions,dateAxisFormatter}=props;updateAxisStorage(axis.uid,{dateFormatter:dateAxisFormatter});if(dateAxisFormatter===undefined){if(axis.renderer.labels.template.adapter.isEnabled("htmlOutput")){axis.renderer.labels.template.adapter.disableKey("htmlOutput");axis.renderer.labels.each((label=>{if(label.element instanceof Group)label.element.removeChildren()}))}const intlOptions={...mapValueFormat(formatOptions)};const granularityLevels=["year","month","day","hour","minute","second"];axis.dateFormatter.timezone=intlOptions?.timeZone;delete intlOptions.timeZone;for(let i=0;i<granularityLevels.length;i+=1){const timeUnit=granularityLevels[i];const previousTimeUnit=i===0?timeUnit:granularityLevels[i-1];const format=formatOptions?.formatPerDateTimeUnit?.[timeUnit]??intlOptions;const formatUpperUnit=formatOptions?.formatPerDateTimeUnit?.[previousTimeUnit];if(isEmpty$1(format)===false){axis.dateFormats.setKey(timeUnit,format);axis.periodChangeDateFormats.setKey(timeUnit,formatUpperUnit??format)}}axis.invalidateLabels()}else{axis.renderer.labels.template.html=ChartDefaults.htmlEmptyContent;axis.renderer.labels.template.adapter.enableKey("htmlOutput")}}function generateDefaultValueAxisFormatter(intlOptions,iLocale,formatLocale,overridePercentMultiplication){const numberFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale,formatLocale});numberFormatter.numberFormat=intlOptions;return value=>{let parsedNumber=typeof value==="number"?value:localeParseFloat(value,numberFormatter.intlLocales);if(overridePercentMultiplication===true&&intlOptions.style==="percent"){parsedNumber/=100}return numberFormatter.format(parsedNumber)}}function updateValueAxisFormatter(props){const{axis,formatOptions,overridePercentMultiplication,valueAxisFormatter}=props;const intlOptions=mapValueFormat(formatOptions);const formatLocale=getValueFromChartStorage(axis.chart.uid,"formatLocale");updateAxisStorage(axis.uid,{numberFormatter:valueAxisFormatter??generateDefaultValueAxisFormatter(intlOptions,axis.chart.language.locale,formatLocale,overridePercentMultiplication)})}function generateNonAggregatedDateAxisFormatter(formatOptions,iLocale,formatLocale){return defaultHTMLOutput=>{let output=defaultHTMLOutput;const dateFormatter=getFormatter({type:WebChartTypes$2.DateAxisFormat,iLocale,formatLocale});output=dateFormatter.format(output,formatOptions.intlOptions);return output}}function updateCategoryAxisFormatter(props){const{axis,formatOptions,isNonAggregatedChart,categoryAxisFormatter}=props;let categoryFormatter;if(categoryAxisFormatter!==undefined){categoryFormatter=categoryAxisFormatter}else{const formatLocale=getValueFromChartStorage(axis.chart.uid,"formatLocale");categoryFormatter=isNonAggregatedChart===true&&isDateValueFormat(formatOptions)?generateNonAggregatedDateAxisFormatter(formatOptions,axis.chart.language.locale,formatLocale):generateTruncationCallback(formatOptions.characterLimit)}updateAxisStorage(axis.uid,{categoryFormatter})}function updateAxisInlineCSSFormatter(props){const{axis,labelsTextSymbol,axisValueFormatter}=props;if(axisValueFormatter!==undefined){updateAxisStorage(axis.uid,{fontStyleCallback:undefined})}else if(getValueFromAxisStorage(axis.uid,"fontStyleCallback")===undefined){const fontStyleCallback=value=>attachInlineCSS({textSymbol:labelsTextSymbol,placeholderString:value,format:"html"});updateAxisStorage(axis.uid,{fontStyleCallback})}}async function updateAxisFormat(props){const{isNonAggregatedChart,axis,formatOptions,labelsTextSymbol,overridePercentMultiplication,axisValueFormatter}=props;let incompatible=false;if(axis instanceof ValueAxis&&axis instanceof DateAxis===false&&isNumberValueFormat(formatOptions)===true){updateValueAxisFormatter({axis,formatOptions,overridePercentMultiplication,valueAxisFormatter:axisValueFormatter})}else if(axis instanceof DateAxis&&isDateValueFormat(formatOptions)===true&&isNonAggregatedChart!==true){updateDateAxisFormatter({axis,formatOptions,dateAxisFormatter:axisValueFormatter})}else if(axis instanceof CategoryAxis){if(isCategoryValueFormat(formatOptions)===true||isNonAggregatedChart===true){updateCategoryAxisFormatter({axis,formatOptions,isNonAggregatedChart,categoryAxisFormatter:axisValueFormatter})}else if(isNumberValueFormat(formatOptions)===true){updateValueAxisFormatter({axis,formatOptions,overridePercentMultiplication,valueAxisFormatter:axisValueFormatter})}else{incompatible=true}}else{incompatible=true}if(incompatible===true){const locale=getValueFromChartStorage(axis.chart.uid,"locale");await throwError("mismatchAxisAndValueFormat",locale)}updateAxisInlineCSSFormatter({axis,labelsTextSymbol,axisValueFormatter});axis.invalidateLabels()}function getXFieldFromSeries(series){let xField="";if(series instanceof XYSeries)xField=series.dataFields?.categoryX??series.dataFields?.dateX??series.dataFields?.valueX??"";else if(series instanceof PieSeries)xField=series.dataFields?.category??"";return xField}function getYFieldFromSeries(series){let yField="";if(series instanceof XYSeries)yField=series.dataFields?.categoryY??series.dataFields?.dateY??series.dataFields?.valueY??"";else if(series instanceof PieSeries)yField=series.dataFields?.value??"";return yField}function getXFieldFromSeriesDataFields(series){const isRotated=getValueFromChartStorage(series.chart.uid,"isRotated");const fieldName=isRotated===true?getYFieldFromSeries(series):getXFieldFromSeries(series);return fieldName}function getYFieldFromSeriesDataFields(series){const isRotated=getValueFromChartStorage(series.chart.uid,"isRotated");const fieldName=isRotated===true?getXFieldFromSeries(series):getYFieldFromSeries(series);return fieldName}function getSeriesTypeFromAMChartsSeries(series,index=0){const config=getValueFromChartStorage(series.chart.uid,"config");return getSeriesType$1(config?.series,index)}function clearPieChartSelection(chart){const pieSeries=chart.series.getIndex(0);if(pieSeries!==undefined){pieSeries.slices.each((slice=>{toggleStateForElement({element:slice,selected:false,backToDefaultState:true})}))}}function clearXYChartSelection(chart,clearOnlyVisibleSeries=true){let seriesType;chart.series.each(((series,index)=>{if(clearOnlyVisibleSeries===false||series.visible===true){if(seriesType===undefined||seriesType!==WebChartTypes$2.HistogramSeries&&seriesType!==WebChartTypes$2.ScatterSeries){seriesType=getSeriesTypeFromAMChartsSeries(series,index);let elements=[];if(seriesType===WebChartTypes$2.HistogramSeries||seriesType===WebChartTypes$2.BarSeries){elements=series.columns?.values}else if(seriesType===WebChartTypes$2.ScatterSeries||seriesType===WebChartTypes$2.LineSeries){elements=findBulletMarker(series)?.clones?.values}else if(seriesType===WebChartTypes$2.BoxPlotSeries){if(series instanceof CandlestickSeries){elements.push(...series.columns?.values)}else if(series instanceof StepLineSeries){elements.push(...series.segments?.values)}else if(series instanceof LineSeries){const markers=findBulletMarker(series)?.clones?.values;if(markers!==undefined){elements.push(...markers)}}}if(elements!==undefined){elements.forEach((element=>{toggleStateForElement({element,selected:false,backToDefaultState:true})}))}}}}))}function clearSelection(props){const{chart,selectionSource,clearOnlyVisibleSeries,disposeStyleAndSelection}=props;if(disposeStyleAndSelection!==false)disposeStyleOrSelectionCallback(chart,"updateSelectionCallbackDisposer");updateChartStorage(chart.uid,{currentSelectionDataItems:undefined,currentSelectionOIDs:undefined,currentSelectionIndexes:undefined,computedSelectionDataItems:undefined,computedSelectionIndexes:undefined,pendingSelectionQueries:false});if(isElementValid(chart)){if(chart instanceof XYChart)clearXYChartSelection(chart,clearOnlyVisibleSeries??true);else if(chart instanceof PieChart)clearPieChartSelection(chart)}notifySelectionCompleted({data:{selectionSource:selectionSource??SelectionSource.ClearSelection},htmlContainer:chart.htmlContainer})}function handleFailedSelection(chart){abortPendingQueries$1();notifyTooManySelectedElements(chart.htmlContainer);clearSelection({chart})}const BoxPlotStepLineSeriesType={Top:"top",Bottom:"bottom",Median:"median",Outliers:"outliers"};function format(props){const{value,valueFormat,iLocale,formatLocale}=props;let formattedValue=value?.toString();const formatter=getFormatter({type:valueFormat.type,iLocale,formatLocale});if(typeof value==="number"&&valueFormat.type===WebChartTypes$2.NumberAxisFormat){formattedValue=formatter.format(value,mapValueFormat(valueFormat))}else if((typeof value==="number"||value instanceof Date)&&valueFormat.type===WebChartTypes$2.DateAxisFormat){formattedValue=formatter.format(value,mapValueFormat(valueFormat))}return formattedValue}function isChartRotated(props){const{chart,config}=props;let chartConfig=config;if(config===undefined&&chart!==undefined){chartConfig=getValueFromChartStorage(chart.uid,"config")}return isChartRotated$2(chartConfig)}function deleteChartStorage(chart){if(chart instanceof SerialChart){chart.series.each((currentSeries=>{deleteStorage(currentSeries.uid);if(currentSeries instanceof LineSeries){deleteStorage(findBulletMarker(currentSeries)?.uid)}currentSeries.bullets.each((bullet=>{deleteStorage(bullet.uid)}));if(currentSeries instanceof ColumnSeries){currentSeries.columns.template.children.each((bullet=>{deleteStorage(bullet.uid)}))}}))}if(chart instanceof XYChart){deleteStorage(chart?.xAxes.getIndex(0)?.uid??"");deleteStorage(chart?.yAxes.getIndex(0)?.uid??"");chart.xAxes.getIndex(0)?.axisRanges.each((range=>{deleteStorage(range.label?.uid)}));chart.yAxes.getIndex(0)?.axisRanges.each((range=>{deleteStorage(range.label?.uid)}))}if(chart instanceof GaugeChart){chart.radarContainer.children.each((child=>{deleteStorage(child.uid)}))}if(chart instanceof PieChart){chart.series.getIndex(0)?.slices.each((currentSlice=>{deleteStorage(currentSlice.uid)}))}if("cursor"in chart)deleteStorage(chart?.cursor?.uid);if("legend"in chart){deleteStorage(chart?.legend?.uid);deleteStorage(chart?.legend?.valueLabels?.template?.uid)}deleteStorage(chart?.uid)}function getPaddingValue(padding){return typeof padding==="number"?padding:padding.value}function switchElementsSelectionState(elements,chart){return elements.values.filter((element=>{let decision=false;const isElementSelected=element.isActive===false;if(element.dataItem instanceof LegendDataItem===false){element.isActive=element.isActive!==true;const filterBySelection=getValueFromChartStorage(chart.uid,"filterBySelection");const needsToBeSelected=filterBySelection!==true&&isElementSelected===true;toggleStateForElement({element,selected:needsToBeSelected});decision=isElementSelected}return decision}))}function switchColumnSelectionFromSeries(series,seriesIndex){let listSelectedElements=[];const{columns}=series;if(columns!==undefined&&series.visible===true){const{chart}=series;const config=getValueFromChartStorage(chart.uid,"config");const xAxisField=config?.series[0].x;const splitBy=series?.dataFields?.customValue??"";const seriesType=getSeriesTypeFromAMChartsSeries(series,seriesIndex);const seriesConfig=findSeriesConfig(series,config);const yAxisField=seriesType===WebChartTypes$2.BoxPlotSeries?seriesConfig?.y:getYFieldFromSeriesDataFields(series);const columnSelectionProps={element:{},yAxisField,xAxisField,splitBy,chartType:seriesType,seriesIndex};if(seriesType===WebChartTypes$2.HistogramSeries&&seriesIndex===0){columnSelectionProps.xAxisField=splitBy;columnSelectionProps.dataTransformationType=(config?.series[0]).dataTransformationType}listSelectedElements=switchElementsSelectionState(columns,chart).map((column=>({...columnSelectionProps,element:column,elementDataContext:column.dataItem?.dataContext,elementIndex:column.dataItem?.index})))}return listSelectedElements}function switchSelectedMarkersFromSeries(series,seriesIndex){let listSelectedElements=[];if(series.visible===true){const markers=findBulletMarker(series)?.clones;if(markers!==undefined){const{chart}=series;const config=getValueFromChartStorage(chart.uid,"config");const seriesType=getSeriesType$1(config?.series,seriesIndex);const xAxisField=config?.series[0].x;const yAxisField=getYFieldFromSeriesDataFields(series);const splitBy=seriesType===WebChartTypes$2.LineSeries?series?.dataFields?.customValue??"":"";const markerSelectionProps={element:{},xAxisField,yAxisField,splitBy,chartType:seriesType,uniqueFeature:seriesType===WebChartTypes$2.ScatterSeries,seriesIndex};listSelectedElements=switchElementsSelectionState(markers,chart).map((marker=>({...markerSelectionProps,element:marker,elementDataContext:marker.dataItem?.dataContext,elementIndex:marker.dataItem?.index})))}}return listSelectedElements}function switchSelectedSlicesFromPieSeries(series){let listSelectedElements=[];if(series.visible===true){const{chart}=series;const xAxisField=getXFieldFromSeriesDataFields(series);const yAxisField=getYFieldFromSeriesDataFields(series);const sliceSelectionProps={element:{},xAxisField,yAxisField,chartType:WebChartTypes$2.PieSeries,seriesIndex:0};let groupedSlicesDataItem;listSelectedElements=switchElementsSelectionState(series.slices,chart).map((slice=>{const sliceDataContext=slice.dataItem?.dataContext??{};if(isElementFromGroupOfSlices(sliceDataContext)===true){groupedSlicesDataItem=getGroupedSlicesDataItem({groupOfSlicesDataContext:sliceDataContext})}return{...sliceSelectionProps,element:slice,elementIndex:slice.dataItem?.index,elementDataContext:sliceDataContext}}));if(groupedSlicesDataItem!==undefined){groupedSlicesDataItem.forEach(((groupedSliceDataItem,sliceIndex)=>{listSelectedElements.push({...sliceSelectionProps,elementIndex:sliceIndex,elementDataContext:groupedSliceDataItem})}))}}return listSelectedElements}function styleCursorCrosshair(chart,crosshairConfigStyle){const crosshairDefaultStyle=ChartDefaults.cursorCrosshair.style;const crosshairStyle={type:RESTSymbolType$1.SLS,style:crosshairConfigStyle.style??crosshairDefaultStyle.style,color:crosshairConfigStyle.color??crosshairDefaultStyle.color,width:crosshairConfigStyle.width??crosshairDefaultStyle.width};updateLineElements({element:chart.cursor.lineX,lineSymbol:crosshairStyle});updateLineElements({element:chart.cursor.lineY,lineSymbol:crosshairStyle})}function initializeChartCursor(chart){if(chart instanceof GaugeChart===false&&chart instanceof PieChart===false){chart.cursor=new XYCursor}}function updateChartCursor(chart,cursorCrosshair){if(chart instanceof GaugeChart===false&&chart instanceof PieChart===false){const xyChart=chart;const cursor=xyChart.cursor??new XYCursor;if(cursorCrosshair?.style!==undefined)styleCursorCrosshair(xyChart,cursorCrosshair.style);const crosshairDefaults=ChartDefaults.cursorCrosshair;cursor.lineX.disabled=crosshairDefaults.verticalLineVisible===false?cursorCrosshair?.verticalLineVisible!==true:cursorCrosshair?.verticalLineVisible===false;cursor.lineY.disabled=crosshairDefaults.horizontalLineVisible===false?cursorCrosshair?.horizontalLineVisible!==true:cursorCrosshair?.horizontalLineVisible===false;xyChart.cursor=cursor}}function getChartCursor(chart){if(chart instanceof GaugeChart===false&&chart.cursor===undefined)initializeChartCursor(chart);return chart.cursor}function toggleMousePointerOnAxisLabels(axis,mouseCursorStyle){const axisTemplate=axis.renderer.labels.template;if(axisTemplate.events.hasListenersByType(EventTypes.Hit)===true)axisTemplate.cursorOverStyle=mouseCursorStyle;axis.renderer.labels.each((axisLabel=>{axisLabel.cursorOverStyle=mouseCursorStyle}))}function toggleMousePointer(props){const{chart,seriesType,enabled}=props;const mouseCursorStyle=enabled===true?MouseCursorStyle.pointer:MouseCursorStyle.default;switch(seriesType){case WebChartTypes$2.HistogramSeries:case WebChartTypes$2.ComboLineAndBarSeries:case WebChartTypes$2.BarSeries:case WebChartTypes$2.PieSeries:chart.series.each((currentSeries=>{if(currentSeries instanceof ColumnSeries||currentSeries instanceof PieSeries)currentSeries.cursorOverStyle=mouseCursorStyle}));break;case WebChartTypes$2.BoxPlotSeries:chart.series.each((currentSeries=>{currentSeries.cursorOverStyle=mouseCursorStyle;if(currentSeries instanceof LineSeries){const marker=findBulletMarker(currentSeries);if(marker!==undefined){marker.cursorOverStyle=mouseCursorStyle;marker.clones.each((markerClone=>{markerClone.cursorOverStyle=mouseCursorStyle}))}}}));break;case WebChartTypes$2.LineSeries:case WebChartTypes$2.ScatterSeries:chart.series.each((currentSeries=>{if(getValueFromSeriesStorage(currentSeries.uid,"isOverlay")!==true){const marker=findBulletMarker(currentSeries);if(marker!==undefined){marker.cursorOverStyle=mouseCursorStyle;marker.clones.each((markerClone=>{markerClone.cursorOverStyle=mouseCursorStyle}))}}}));break}}function updateChartCursorBehavior(props){const{chart,actionMode,cursorRange}=props;const isRotated=getValueFromChartStorage(chart.uid,"isRotated");const config=getValueFromChartStorage(chart.uid,"config");const seriesType=getSeriesType$1(config?.series);const isScatterSeries=seriesType===WebChartTypes$2.ScatterSeries;const isLineWithValueXAxis=seriesType===WebChartTypes$2.LineSeries&&isNumberValueFormat(config?.axes?.[0]?.valueFormat);const isLineWithCategoryXAxis=seriesType===WebChartTypes$2.LineSeries&&isCategoryValueFormat(config?.axes?.[0]?.valueFormat);const isLineWithDateXAxis=seriesType===WebChartTypes$2.LineSeries&&isDateValueFormat(config?.axes?.[0]?.valueFormat);let newBehavior;let enableMousePointer=false;const modeToApply=actionMode??getValueFromChartStorage(chart.uid,"actionMode")??ChartDefaults.actionMode;const filterBySelection=getValueFromChartStorage(chart.uid,"filterBySelection");if(filterBySelection===true){newBehavior=CursorBehavior.None;enableMousePointer=false}else if(cursorRange!==undefined){newBehavior=mapCursorRangeToCursorBehavior({actionMode:modeToApply,cursorRange,isRotated})}else{switch(modeToApply){case ActionModes$1.Zoom:if(isScatterSeries===true||isLineWithValueXAxis===true||isLineWithDateXAxis===true){newBehavior=CursorBehavior.ZoomXY}else{newBehavior=isRotated===true?CursorBehavior.ZoomY:CursorBehavior.ZoomX}enableMousePointer=false;break;case ActionModes$1.MultiSelection:case ActionModes$1.MultiSelectionWithCtrlKey:if(isLineWithCategoryXAxis===true){newBehavior=isRotated===true?CursorBehavior.SelectY:CursorBehavior.SelectX}else{newBehavior=CursorBehavior.SelectXY}enableMousePointer=true;break;case ActionModes$1.MonoSelection:newBehavior=CursorBehavior.None;enableMousePointer=true;break;case ActionModes$1.None:newBehavior=CursorBehavior.None;enableMousePointer=false;break}}if(chart instanceof XYChart&&chart.cursor!==undefined&&newBehavior!==undefined)chart.cursor.behavior=newBehavior;toggleMousePointer({chart,seriesType,enabled:enableMousePointer})}function isElementInDateRange(props){const{axis,elementDataItem,selectedStartDate,selectedEndDate}=props;let isMatch=false;if(selectedStartDate!==undefined&&selectedEndDate!==undefined){const isRotated=getValueFromChartStorage(axis.chart.uid,"isRotated");const dateFieldName=getXAxisDataFieldName(axis,isRotated);const elementDateValue=elementDataItem?.dates?.[dateFieldName];isMatch=elementDateValue!==null&&elementDateValue!==undefined&&selectedStartDate<=elementDateValue&&elementDateValue<=selectedEndDate}return isMatch}function extractElementsFromAxisLabel(label){const{axis}=label;const chart=axis.chart;return{axis,chart}}async function axisLabelHitCallback(event){const selectedAxisLabel=event.target;const{axis,chart}=extractElementsFromAxisLabel(selectedAxisLabel);const isDateAxis=axis instanceof DateAxis;const labelElements=[];let selectedStartDate;let selectedEndDate;if(isDateAxis===true){const{date,endDate}=selectedAxisLabel.dataItem?.dates;selectedStartDate=date;selectedEndDate=endDate}else{const{seriesDataItems}=event.target.dataItem;for(const prop in seriesDataItems){if(Object.prototype.hasOwnProperty.call(seriesDataItems,prop)===true){const dataItems=seriesDataItems[prop];for(const dataItem of dataItems){if(dataItem instanceof ColumnSeriesDataItem)labelElements.push(dataItem.column);else{const spriteItem=dataItem.sprites.find((item=>item instanceof Label===false));if(spriteItem!==undefined)labelElements.push(spriteItem)}}}}}const multiSelect=isMultiSelectionOn(event);const isDateOrCategoryAxis=axis instanceof DateAxis===true||axis instanceof CategoryAxis===true;const listSelectedElements=[];const config=getValueFromChartStorage(chart.uid,"config");const xAxisField=config?.series[0].x;chart.series.each(((currentSeries,index)=>{let elements;if(currentSeries instanceof ColumnSeries)elements=currentSeries.columns;else elements=findBulletMarker(currentSeries)?.clones;if(currentSeries.visible===true){const yAxisField=getYFieldFromSeriesDataFields(currentSeries);const splitBy=currentSeries.dataFields?.customValue??"";const seriesType=getSeriesTypeFromAMChartsSeries(currentSeries,index);elements?.each(((element,elementIndex)=>{let isLabelElement=false;if(isDateAxis===true){isLabelElement=isElementInDateRange({axis,elementDataItem:element.dataItem,selectedStartDate,selectedEndDate})}else{isLabelElement=labelElements.includes(element)}const elementNeedsToBeSelected=toggleStateForElement({element,selected:isLabelElement,multiSelect,isDateOrCategoryAxis});if(elementNeedsToBeSelected===true){listSelectedElements.push({element,elementDataContext:element.dataItem?.dataContext,yAxisField,xAxisField,splitBy,chartType:seriesType,seriesIndex:index,elementIndex})}}))}}));await applySelection({chart,listSelectedElements,selectionSource:SelectionSource.SelectionByClick})}function addSelectOnAxisLabelHit(axis){if(isElementValid(axis.renderer.labels.template)){axis.renderer.labels.template.events.on(EventTypes.Hit,(async event=>{if(axis.renderer.labels.template.events.isEnabled(EventTypes.Hit)===true)await axisLabelHitCallback(event)}));const filterBySelection=getValueFromChartStorage(axis.chart.uid,"filterBySelection");const mouseCursorStyle=filterBySelection===true?MouseCursorStyle.default:MouseCursorStyle.pointer;toggleMousePointerOnAxisLabels(axis,mouseCursorStyle)}}function toggleDisableClickOnAxisLabel(axis,disable){if(isElementValid(axis?.renderer?.labels?.template)&&(axis instanceof CategoryAxis||axis instanceof DateAxis)){if(disable===true){axis.renderer.labels.template.events.disableType(EventTypes.Hit);toggleMousePointerOnAxisLabels(axis,MouseCursorStyle.default)}else{axis.renderer.labels.template.events.enableType(EventTypes.Hit);const filterBySelection=getValueFromChartStorage(axis.chart.uid,"filterBySelection");const mouseCursorStyle=filterBySelection===true?MouseCursorStyle.default:MouseCursorStyle.pointer;toggleMousePointerOnAxisLabels(axis,mouseCursorStyle)}}}function filterSeriesToSelect(props){const{chart,selectionSource,chartConfig}=props;let seriesToSelect=[];if(selectionSource===SelectionSource.SelectionByClick&&getSeriesType$1(chartConfig?.series)===WebChartTypes$2.BoxPlotSeries){const uniqueSeries=new Set;const hoveredCandleStickSeries=chart.series.values.find((series=>series instanceof CandlestickSeries&&series.isHover===true));if(hoveredCandleStickSeries!==undefined){uniqueSeries.add(hoveredCandleStickSeries);const{medianStepLineSeries}=getStepLineSeries(chart,hoveredCandleStickSeries.id);if(medianStepLineSeries!==undefined)uniqueSeries.add(medianStepLineSeries)}if(uniqueSeries.size===0){const selectedMedianStepLineSeries=chart.series.values.find((series=>series instanceof StepLineSeries&&series.id.includes(BoxPlotStepLineSeriesType.Median)===true&&series.isHover===true));if(selectedMedianStepLineSeries!==undefined){uniqueSeries.add(selectedMedianStepLineSeries);const candleStickSeriesId=selectedMedianStepLineSeries.id.split(`_${BoxPlotStepLineSeriesType.Median}`)[0];const selectedCandleStickSeries=getCandleStickSeries(chart,candleStickSeriesId);if(selectedCandleStickSeries!==undefined)uniqueSeries.add(selectedCandleStickSeries)}if(uniqueSeries.size===0){const selectedTopOrBottomStepLineSeries=chart.series.values.find((series=>series instanceof StepLineSeries&&(series.id.includes(BoxPlotStepLineSeriesType.Top)===true||series.id.includes(BoxPlotStepLineSeriesType.Bottom)===true)&&series.isHover===true));if(selectedTopOrBottomStepLineSeries!==undefined)uniqueSeries.add(selectedTopOrBottomStepLineSeries);if(uniqueSeries.size===0){chart.series.values.forEach((s=>{if(s.id.includes(BoxPlotStepLineSeriesType.Outliers)&&s.tooltip?.visible===true){uniqueSeries.add(s)}}))}}}seriesToSelect=Array.from(uniqueSeries)}else{seriesToSelect=chart.series.values}seriesToSelect=seriesToSelect.filter((series=>series.visible===true&&getValueFromSeriesStorage(series.uid,"isOverlay")!==true));return seriesToSelect}function findSeriesConfig(seriesInstance,chartConfig){const chartType=getSeriesType$1(chartConfig?.series);return chartConfig?.series.find((seriesConfig=>{let match=false;if(chartType!==WebChartTypes$2.BoxPlotSeries||seriesInstance instanceof CandlestickSeries){match=seriesInstance.id===seriesConfig.id}else if(seriesInstance instanceof StepLineSeries){match=seriesInstance.id.replace(`_${BoxPlotStepLineSeriesType.Top}`,"")===seriesConfig.id||seriesInstance.id.replace(`_${BoxPlotStepLineSeriesType.Median}`,"")===seriesConfig.id||seriesInstance.id.replace(`_${BoxPlotStepLineSeriesType.Bottom}`,"")===seriesConfig.id}else if(seriesInstance instanceof LineSeries){match=seriesInstance.id.replace(`_${BoxPlotStepLineSeriesType.Outliers}`,"")===seriesConfig.id}return match===true}))}async function selectElements(props){const{chart,cursorSelectionRectangle,multiSelect,selectionSource}=props;const config=getValueFromChartStorage(chart.uid,"config");const xAxisField=config?.series[0]?.x??"";let listSelectedElements=[];updateChartStorage(chart.uid,{pendingSelectionQueries:true});let emptyAreaClick=true;const seriesToSelect=filterSeriesToSelect({chart,selectionSource});seriesToSelect.forEach(((series,index)=>{const seriesConfig=findSeriesConfig(series,config);if(series.visible===true&&getValueFromSeriesStorage(series.uid,"isOverlay")!==true){const seriesType=getSeriesTypeFromAMChartsSeries(series,index);const yAxisField=seriesType===WebChartTypes$2.BoxPlotSeries?seriesConfig?.y:getYFieldFromSeriesDataFields(series);const splitBy=series.dataFields?.customValue??"";const elementSelectionProps={element:{},yAxisField,xAxisField,splitBy,chartType:seriesType,seriesIndex:index};let elements;if(series instanceof ColumnSeries||series instanceof CandlestickSeries){elements=series.columns?.values;if(seriesType===WebChartTypes$2.HistogramSeries){elementSelectionProps.xAxisField=splitBy;elementSelectionProps.dataTransformationType=(config?.series[0]).dataTransformationType}}else if(series instanceof StepLineSeries){elements=series.segments.values}else if(series instanceof LineSeries){const marker=findBulletMarker(series);elements=marker?.clones?.values;elementSelectionProps.uniqueFeature=true}if(elements!==undefined){elements.forEach(((element,elementIndex)=>{if(element.dataItem instanceof LegendDataItem===false){const elementWasPreviouslySelected=element.isActive===true;const elementIsInCurrentSelection=isElementIncludedInSelection(element,cursorSelectionRectangle);if(elementIsInCurrentSelection===true)emptyAreaClick=false;let decision=false;if(elementWasPreviouslySelected===false){decision=elementIsInCurrentSelection}else if(elementIsInCurrentSelection===true){decision=selectionSource!==SelectionSource.SelectionByClick}else{decision=multiSelect===true}if(decision===true){listSelectedElements.push({...elementSelectionProps,element,elementDataContext:element.dataItem?.dataContext,elementIndex})}toggleStateForElement({element,selected:decision})}}))}}}));if(emptyAreaClick===true)listSelectedElements=[];await applySelection({chart,listSelectedElements,selectionSource})}function addRangeSelectionOnChart(chart){if(isElementValid(chart)){chart.events.on(EventTypes.Up,(upEvent=>{const targetCursor=upEvent.target.cursor;const previousCallbackDisposer=getValueFromCursorStorage(chart.uid,"selectEndedCallbackDisposer");if(previousCallbackDisposer!==undefined)previousCallbackDisposer.dispose();const callbackDisposer=targetCursor.events.once(EventTypes.SelectEnded,(async()=>{if(targetCursor.xRange!==undefined){targetCursor.selection.isMeasured=true;targetCursor.validate();targetCursor.selection.validate();const cursorSelectionRectangle=spriteRectToSvg(targetCursor.selection.bbox,targetCursor.selection);targetCursor.selection.hide();if(cursorSelectionRectangle.width>0||cursorSelectionRectangle.height>0){const multiSelect=isMultiSelectionOn(upEvent);await selectElements({chart,cursorSelectionRectangle,multiSelect,selectionSource:SelectionSource.SelectionByRange})}}targetCursor.selection.hide()}));updateCursorStorage(chart.uid,{selectEndedCallbackDisposer:callbackDisposer})}))}}function addHitSelectionOnChart(chart){if(isElementValid(chart)){chart.zoomOutButton.hoverable=true;const hitSelectionCallback=async ev=>{if(isHitOnSelectableArea(chart)===true){const cursorSelectionRectangle={x:ev.svgPoint.x,y:ev.svgPoint.y,width:0,height:0};const multiSelect=isMultiSelectionOn(ev);await selectElements({chart,cursorSelectionRectangle,multiSelect,selectionSource:SelectionSource.SelectionByClick})}};chart.events.on(EventTypes.Hit,hitSelectionCallback);chart.events.on(EventTypes.DoubleHit,hitSelectionCallback)}}async function switchChartSelection(chart){const{series}=chart;if(series.length>0){updateChartStorage(chart.uid,{pendingSelectionQueries:true});const config=getValueFromChartStorage(chart.uid,"config");const allSeriesSelectedElements=series.values.map(((currentSeries,index)=>{let oneSeriesSelectedElements=[];if(currentSeries.visible===true){if(getValueFromSeriesStorage(currentSeries.uid,"isOverlay")!==true){const seriesType=getSeriesType$1(config?.series,index);if(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.HistogramSeries){oneSeriesSelectedElements=switchColumnSelectionFromSeries(currentSeries,index)}else if(seriesType===WebChartTypes$2.LineSeries||seriesType===WebChartTypes$2.ScatterSeries&&getValueFromSeriesStorage(currentSeries.uid,"isOverlay")!==true){oneSeriesSelectedElements=switchSelectedMarkersFromSeries(currentSeries,index)}else if(seriesType===WebChartTypes$2.PieSeries){oneSeriesSelectedElements=switchSelectedSlicesFromPieSeries(currentSeries)}else if(seriesType===WebChartTypes$2.BoxPlotSeries){if(currentSeries instanceof CandlestickSeries){oneSeriesSelectedElements=switchColumnSelectionFromSeries(currentSeries,index)}else if(currentSeries instanceof LineSeries&&currentSeries instanceof StepLineSeries===false){oneSeriesSelectedElements=switchSelectedMarkersFromSeries(currentSeries,index)}}}}return oneSeriesSelectedElements}));const listSelectedElements=allSeriesSelectedElements.flat();await applySelection({chart,listSelectedElements,selectionSource:SelectionSource.ProgrammaticSelection});if(chart instanceof PieChart)chart.feedLegend()}}function removeSelectionEvents(chart){if(isElementValid(chart)){chart.events.disableType(EventTypes.Hit);chart.events.disableType(EventTypes.DoubleHit);if(chart instanceof PieChart){const series=chart.series.getIndex(0);if(series!==undefined){series.slices.template.clickable=false;series.labels.template.clickable=false;series.slices.each((slice=>{slice.clickable=false}))}}else if(chart instanceof XYChart){chart.xAxes.each((axis=>toggleDisableClickOnAxisLabel(axis,true)));chart.yAxes.each((axis=>toggleDisableClickOnAxisLabel(axis,true)));chart.events.disableType(EventTypes.Up)}}}function addSelectionEvents(chart){if(isElementValid(chart)){chart.events.enableType(EventTypes.Hit);chart.events.enableType(EventTypes.DoubleHit);if(chart instanceof PieChart){const series=chart.series.getIndex(0);if(series!==undefined){series.slices.template.clickable=true;series.labels.template.clickable=true;series.slices.each((slice=>{slice.clickable=true}))}}else if(chart instanceof XYChart){chart.xAxes.each((axis=>toggleDisableClickOnAxisLabel(axis,false)));chart.yAxes.each((axis=>toggleDisableClickOnAxisLabel(axis,false)));chart.events.enableType(EventTypes.Up)}}}function getTooltipHeadingText(defaultText,primaryText){return isNotEmpty(primaryText)===true?primaryText:defaultText}function formatTooltipValue(props){const{series,callbackName,value}=props;const formatter=getValueFromSeriesStorage(series.uid,callbackName);return formatter!==undefined?formatter(value):value.toString()}function initializeSeriesToolTip(series){const tooltip=new Tooltip;series.tooltip=tooltip;if(series instanceof PieSeries===false){if(series instanceof CandlestickSeries||series instanceof StepLineSeries){tooltip.label.maxWidth=ChartDefaults.boxPlot.boxPlotTooltipLabelWidth}else{tooltip.label.maxWidth=ChartDefaults.tooltipWidth}tooltip.label.wrap=true}const{dataTooltipStyle,dataTooltipStyleReversed}=ChartDefaults;tooltip.events.on(EventTypes.Shown,(e=>{const config=getValueFromChartStorage(series.chart.uid,"config");if(config!==undefined){const currentSeriesConfig=findSeriesConfig(series,config);const{dataTooltipReverseColor}=currentSeriesConfig??{};if(dataTooltipReverseColor===true){const shownTooltip=e.target;const currentTooltipBackgroundFill=shownTooltip.background.fill;if(currentTooltipBackgroundFill!==undefined){shownTooltip.background.stroke=currentTooltipBackgroundFill;shownTooltip.background.strokeWidth=dataTooltipStyleReversed?.outline?.width??NaN;shownTooltip.background.fill=mapColor(dataTooltipStyleReversed?.color);const tooltipColorRGB=shownTooltip.background.fill.rgb;if(tooltipColorRGB!==undefined){const labelColor=tooltip.label.fill;shownTooltip.label.fill=isLight(tooltipColorRGB)===true?labelColor?.darkColor:labelColor?.lightColor}}}else{tooltip.getStrokeFromObject=true;tooltip.getFillFromObject=true;tooltip.background.strokeWidth=dataTooltipStyle?.outline?.width??NaN;tooltip.background.stroke=mapColor(dataTooltipStyle?.outline?.color)}}}))}function initializeChartToolTip(chart){if(chart instanceof GaugeChart===false){chart.series.each((singleSeries=>{if(getValueFromSeriesStorage(singleSeries.uid,"isOverlay")!==true){initializeSeriesToolTip(singleSeries)}}))}}function getDefaultAggregationTypeLabel(aggregationType,commonStrings){let title;switch(aggregationType){case RESTStatisticType$2.Average:{title=commonStrings.statistics.mean;break}case RESTStatisticType$2.ContinuousPercentile:{title=commonStrings.statistics.median;break}case RESTStatisticType$2.Sum:{title=commonStrings.statistics.sum;break}case RESTStatisticType$2.Minimum:{title=commonStrings.statistics.minimum;break}case RESTStatisticType$2.Maximum:{title=commonStrings.statistics.maximum;break}case RESTStatisticType$2.Variance:{title=commonStrings.statistics.variance;break}case RESTStatisticType$2.DiscretePercentile:{title=commonStrings.statistics.discretePercentitle;break}case RESTStatisticType$2.NoAggregation:{title=commonStrings.statistics.noAggregation;break}case RESTStatisticType$2.Count:default:{title=commonStrings.statistics.count;break}}return title}function initializeBarAndLineChartTooltip(element,series){element.tooltipHTML=ChartDefaults.htmlEmptyContent;element.adapter.add("tooltipHTML",((defaultTooltipHTML,target)=>{let output=defaultTooltipHTML;const{chart}=series;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{dataTooltipVisible}=config?.series[0]??{};if(dataTooltipVisible===false){output=""}else{const barAndLineTooltipFormatter=getValueFromSeriesStorage(series.uid,"barAndLineTooltipFormatter");if(barAndLineTooltipFormatter!==undefined&&series.isReady()){const{dataItem}=target;if(dataItem instanceof ColumnSeriesDataItem||dataItem instanceof LineSeriesDataItem){const inlineDisplayLabelField=getDisplayLabelFromConfigFields(config);const seriesConfig=config?.series.find((currentSeriesConfig=>currentSeriesConfig.id===series.id));if(seriesConfig!==undefined){const isRotated=isChartRotated({config});const statValue=isRotated===true?dataItem.valueX:dataItem.valueY;const percentValue=(isRotated===true?dataItem.values.valueX.totalPercent:dataItem.values.valueY.totalPercent)/100;const dataContext=dataItem?.dataContext??{};if(dataContext!==undefined){const xValue=getXAxisValueFromContext({value:dataContext[seriesConfig.x],dataContext,specificField:inlineDisplayLabelField});const dateBinningRange=dataContext[ChartDefaults.dateBinningRange];output=barAndLineTooltipFormatter({seriesName:series.name,xValue,dateBinningRange,statValue,percentValue})}}}}}}return sanitizeHTMLOutput(output)}));element.tooltipPosition=series instanceof LineSeries?ChartDefaults.markerTooltipPosition:ChartDefaults.columnTooltipPosition;series.cursorTooltipEnabled=false}function getTooltipValues(props){const{isStacked100,series,statValue,percentValue,dataTooltipValueFormat,dataTooltipPercentFormat}=props;const valueFormat=dataTooltipValueFormat??getDefaultNumberFormat();const formatLocale=getValueFromChartStorage(series.chart.uid,"formatLocale");const formattedStatValue=statValue!==undefined?format({value:statValue,valueFormat,iLocale:series.chart.language.locale,formatLocale}):"";let formattedPercentValue="";if(isStacked100===true&&percentValue!==undefined){let percentFormatOptions=dataTooltipPercentFormat;if(percentFormatOptions===undefined){percentFormatOptions=getDefaultPercentNumberFormat();percentFormatOptions.intlOptions.minimumFractionDigits=2;percentFormatOptions.intlOptions.maximumFractionDigits=2}formattedPercentValue=format({value:percentValue,valueFormat:percentFormatOptions,iLocale:series.chart.language.locale,formatLocale})}return{formattedStatValue,formattedPercentValue}}function getTooltipXValueForTimeBinningChart(props){const{series,dateRange,xAxisValueFormat}=props;let xValue;const timeIntervalInfo=getValueFromChartStorage(series.chart.uid,"timeIntervalInfo");if(dateRange!==undefined&&dateRange.length>0){let intlOptions={};switch(timeIntervalInfo?.timeIntervalUnits){case WebChartTimeIntervalUnits$2.Seconds:intlOptions={month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};break;case WebChartTimeIntervalUnits$2.Minutes:intlOptions={month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"};break;case WebChartTimeIntervalUnits$2.Hours:intlOptions={month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"};break;case WebChartTimeIntervalUnits$2.Days:case WebChartTimeIntervalUnits$2.Weeks:case WebChartTimeIntervalUnits$2.Months:case WebChartTimeIntervalUnits$2.Years:intlOptions={month:"numeric",day:"numeric",year:"numeric"};break}intlOptions.timeZone=xAxisValueFormat.intlOptions.timeZone;const startDateTimeInterval=new Date(dateRange[0]);const endDateTimeInterval=new Date(dateRange[1]);if(Number.isNaN(startDateTimeInterval?.valueOf())===false){const formatLocale=getValueFromChartStorage(series.chart.uid,"formatLocale");const dateFormatter=getFormatter({type:WebChartTypes$2.DateAxisFormat,iLocale:series.chart.language.locale,formatLocale});const startDate=dateFormatter.format(startDateTimeInterval,intlOptions);xValue=startDate;if(Number.isNaN(endDateTimeInterval?.valueOf())===false){const endDate=dateFormatter.format(endDateTimeInterval,intlOptions);if(endDate!==startDate)xValue=`${xValue} - ${endDate}`}}}return`${xValue??""}`}function getTooltipXContextValue(props){const{seriesConfig,xAxisValueFormat,setTimeBinningInfoWhenNotProvided,dataTooltipValueFormat,dataTooltipDateFormat,series,xValue,dateBinningRange}=props;let xContextValue;const formatLocale=getValueFromChartStorage(series.chart.uid,"formatLocale");if(isSeriesUsingTimeBinning$1({seriesConfig,xAxisValueFormatType:xAxisValueFormat?.type,setTimeBinningInfoWhenNotProvided})===true&&dateBinningRange!==undefined&&xAxisValueFormat.type===WebChartTypes$2.DateAxisFormat){xContextValue=getTooltipXValueForTimeBinningChart({series,dateRange:dateBinningRange,xAxisValueFormat})}else if(isDateValueFormat(xAxisValueFormat)===true&&xValue!==undefined){xContextValue=format({value:xValue,valueFormat:dataTooltipDateFormat??xAxisValueFormat,iLocale:series.chart.language.locale,formatLocale})}else if(typeof xValue==="number"&&isNumberValueFormat(xAxisValueFormat)===true){xContextValue=format({value:xValue,valueFormat:dataTooltipValueFormat??xAxisValueFormat,iLocale:series.chart.language.locale,formatLocale})}else{xContextValue=xValue}return`${xContextValue??""}`}function getTooltipYLabel(props){const{config,fieldList,seriesIndex,isStacked100,commonStrings}=props;let yLabel="";const seriesName=config.series[seriesIndex].name;if(config.dataSource?.type===WebChartDataSourceTypes$1.Inline){yLabel=seriesName}else{const seriesConfig=config.series[seriesIndex];const axes=config.axes;const chartSubType=getChartSubType$1(config.series);const fieldOID=fieldList!==undefined?getObjectIdField$1(fieldList):queryDefaults$1.outStatistics.onStatisticField;const statisticField=seriesConfig.query?.outStatistics?.[0].onStatisticField??fieldOID;const statisticFieldAlias=getFieldAlias(fieldList,statisticField);const statisticType=seriesConfig.query?.outStatistics?.[0].statisticType??StatisticsDefaults$2.statisticType;const aggregationType=getDefaultAggregationTypeLabel(statisticType,commonStrings);if(chartSubType===ChartSubType$1.BarAndLineNoAggregation){yLabel=seriesName??getFieldAlias(fieldList,seriesConfig.y)}else if(chartSubType===ChartSubType$1.BarAndLineSplitByNoAggregation){yLabel=getFieldAlias(fieldList,seriesConfig.y)}else{yLabel=statisticType===RESTStatisticType$2.Count&&statisticField===fieldOID?commonStrings.statistics.count:formatMessage$1(commonStrings.statistics.aggregation,{statistics:aggregationType,fieldName:statisticFieldAlias??seriesName});if(chartSubType===ChartSubType$1.BarAndLineMonoField&&isStacked100===false){yLabel=getTooltipHeadingText(yLabel,axes[1].title?.content?.text)}}}return yLabel}function getTooltipLabelForBarLineFromFields(props){const{config,fieldName="",commonStrings}=props;const statisticType=config.series[0].query?.outStatistics?.[0].statisticType??StatisticsDefaults$2.statisticType;const aggregationType=getDefaultAggregationTypeLabel(statisticType,commonStrings);return formatMessage$1(commonStrings.statistics.aggregation,{statistics:aggregationType,fieldName})}function generateBarAndLineTooltipTextCallback(props){const{series,fieldList,setTimeBinningInfoWhenNotProvided,seriesIndex,seriesConfig,commonStrings}=props;const{dataTooltipValueFormat,dataTooltipPercentFormat,dataTooltipDateFormat}=seriesConfig;let barAndLineTooltipFormatter=()=>"";const{chart}=series;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");if(config!==undefined){const{dataTooltipVisible}=seriesConfig;const markerVisible=series instanceof LineSeries?seriesConfig.markerVisible:undefined;if(dataTooltipVisible===false||markerVisible===false){barAndLineTooltipFormatter=()=>""}else{const axes=config.axes;const xAxisValueFormat=axes[0].valueFormat;const chartSubType=getChartSubType$1(config.series);const isStacked100=getSeriesStackedType$1(seriesConfig)===WebChartStackedKinds$2.Stacked100;const xAlias=getFieldAlias(fieldList,seriesConfig.x);const xLabel=getDisplayLabelFromConfigFields(config)??getTooltipHeadingText(xAlias,axes[0].title?.content?.text);const yLabel=getTooltipYLabel({config,fieldList,seriesIndex,commonStrings,isStacked100});const strongColon=getDirectionallyStrongCharacter(chart.rtl);barAndLineTooltipFormatter=formatterProps=>{const{statValue,percentValue,xValue,dateBinningRange}=formatterProps;const xContextValue=getTooltipXContextValue({seriesConfig,xAxisValueFormat,dataTooltipValueFormat,dataTooltipDateFormat,setTimeBinningInfoWhenNotProvided,series,xValue,dateBinningRange});const{formattedStatValue,formattedPercentValue}=getTooltipValues({isStacked100,dataTooltipValueFormat,dataTooltipPercentFormat,series,statValue,percentValue});const tooltipLines=[`<b>${xLabel}${strongColon} </b>${xContextValue}`];switch(chartSubType){case ChartSubType$1.BarAndLineFromFields:{tooltipLines.pop();const labelNoCategory=getTooltipLabelForBarLineFromFields({config,fieldName:xContextValue,commonStrings});tooltipLines.push(`<b>${labelNoCategory}${strongColon} </b>${formattedStatValue}`);break}case ChartSubType$1.BarAndLineMonoField:case ChartSubType$1.BarAndLineNoAggregation:case ChartSubType$1.BarAndLineMultiFields:tooltipLines.push(`<b>${yLabel}${strongColon} </b>${formattedStatValue}`);break;case ChartSubType$1.BarAndLineSplitByNoAggregation:case ChartSubType$1.BarAndLineSplitBy:{const splitByField=getSplitByField$1(seriesConfig.query?.where,false);const splitByFieldAlias=normalizeString$1({value:getFieldAlias(fieldList,splitByField)});tooltipLines.push(`<b>${splitByFieldAlias}${strongColon} </b>${series.name}<br /><b>${yLabel}${strongColon} </b>${formattedStatValue}`)}break}if(isStacked100===true){tooltipLines.push(`<b>${commonStrings.statistics.percent}${strongColon} </b>${formattedPercentValue}`)}return tooltipLines.join("<br />")}}}}return barAndLineTooltipFormatter}function updateBarAndLineChartTooltip(props){const{series,tooltipFormatter}=props;updateSeriesStorage(series.uid,{barAndLineTooltipFormatter:tooltipFormatter??generateBarAndLineTooltipTextCallback(props)})}function initializeBoxPlotTooltip(series){const elements=[];let candleSeries;series.forEach((currentSeries=>{currentSeries.cursorTooltipEnabled=false;let element;if(currentSeries instanceof CandlestickSeries){candleSeries=currentSeries;element=currentSeries.columns.template}else if(currentSeries instanceof StepLineSeries){currentSeries.segments.template.interactionsEnabled=true;element=currentSeries.segments.template}else if(currentSeries instanceof LineSeries){element=findBulletMarker(currentSeries)}if(element!==undefined)elements.push({element,series:currentSeries})}));elements.forEach((({element,series:currentSeries})=>{element.tooltipHTML=ChartDefaults.htmlEmptyContent;element.adapter.add("tooltipHTML",((defaultTooltipHTML,target)=>{let output=defaultTooltipHTML;const{chart}=currentSeries;if(chart!==undefined&&candleSeries!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{dataTooltipVisible}=config?.series[0]??{};if(dataTooltipVisible===false){output=""}else{const boxPlotTooltipFormatter=getValueFromSeriesStorage(candleSeries.uid,"boxPlotTooltipFormatter");if(boxPlotTooltipFormatter!==undefined&&candleSeries.isReady()){const dataItem=target instanceof Candlestick?target.dataItem:candleSeries.dataItems.values.find((candleDataItem=>(candleDataItem.categories.categoryX??candleDataItem.categories.categoryY)===(target.dataItem?.categories.categoryX??target.dataItem?.categories.categoryY)));if(dataItem instanceof CandlestickSeriesDataItem){const inlineDisplayLabelField=getDisplayLabelFromConfigFields(config);const seriesConfig=config?.series.find((currentSeriesConfig=>currentSeriesConfig.id===candleSeries?.id));if(seriesConfig!==undefined){const dataContext=dataItem?.dataContext??{};if(dataContext!==undefined){const xValue=getXAxisValueFromContext({value:dataContext[seriesConfig.x],dataContext,specificField:inlineDisplayLabelField});output=boxPlotTooltipFormatter({seriesName:currentSeries.name,xValue,dataContext})}}}}}}return sanitizeHTMLOutput(output)}));element.tooltipPosition=currentSeries instanceof LineSeries&&currentSeries instanceof StepLineSeries===false?ChartDefaults.markerTooltipPosition:ChartDefaults.columnTooltipPosition}))}function generateTooltipLine(props){const{label,value,strongColon}=props;return`<tr><td><b>${label}${strongColon}</b></td> <td>${value}</td></tr>`}function generateBoxPlotStatisticsValuesForTooltip(props){const{dataContext,series,dataTooltipValueFormat,y,splitBy,commonStrings,addDividerLine}=props;const valueFormat=dataTooltipValueFormat??getDefaultNumberFormat();const statisticKeys=Object.values(BoxPlotYFieldKeys$1);const strongColon=getDirectionallyStrongCharacter(series.rtl);const tooltipLines=addDividerLine===true?[`<tr><td colspan="2"><hr style="border-top: solid black;"></td></tr>`]:[];statisticKeys.forEach((statKey=>{const key=getBoxPlotYValue$1({key:statKey,y,splitBy});const statValue=dataContext[key];if(statValue!==undefined&&statValue!==null){const formatLocale=getValueFromChartStorage(series.chart.uid,"formatLocale");const formattedStatValue=format({value:statValue,valueFormat,iLocale:series.chart.language.locale,formatLocale});let label="";switch(statKey){case BoxPlotYFieldKeys$1.Min:label=commonStrings.statistics.minimum;break;case BoxPlotYFieldKeys$1.FirstQuartile:label=commonStrings.statistics.firstQuartile;break;case BoxPlotYFieldKeys$1.Median:label=commonStrings.statistics.median;break;case BoxPlotYFieldKeys$1.ThirdQuartile:label=commonStrings.statistics.thirdQuartile;break;case BoxPlotYFieldKeys$1.Max:label=commonStrings.statistics.maximum;break;case BoxPlotYFieldKeys$1.IQR:label=commonStrings.statistics.iqr;break;case BoxPlotYFieldKeys$1.Average:label=commonStrings.statistics.mean;break}if(isEmpty$1(label)===false){tooltipLines.push(generateTooltipLine({label,value:formattedStatValue,strongColon}))}}}));return tooltipLines}function generateBoxPlotTooltipTextCallback(props){const{series,fieldList,seriesConfig,commonStrings}=props;const{dataTooltipValueFormat}=seriesConfig;let boxPlotTooltipFormatter=()=>"";const{chart}=series;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");if(config!==undefined){const axes=config.axes;const xAxisValueFormat=axes[0].valueFormat;const chartSubType=getChartSubType$1(config.series);const splitByField=getSplitByField$1(seriesConfig.query?.where);const splitByFieldAlias=getFieldAlias(fieldList,splitByField);const splitByValue=getSplitByValue$1({where:seriesConfig.query?.where,escape:false});const xAlias=getFieldAlias(fieldList,seriesConfig.x);let xLabel;if(seriesConfig.x!==defaultBoxPlotCategory$1){xLabel=getDisplayLabelFromConfigFields(config)??getTooltipHeadingText(xAlias,axes[0].title?.content?.text)}const strongColon=getDirectionallyStrongCharacter(chart.rtl);boxPlotTooltipFormatter=formatterProps=>{const{dataContext,xValue}=formatterProps;const xContextValue=getTooltipXContextValue({seriesConfig,xAxisValueFormat,series,xValue});const tooltipLines=[];const xFieldAlias=xContextValue!==undefined&&isEmpty$1(xContextValue)===false?getFieldAlias(fieldList,xContextValue):"";const yFieldAlias=getFieldAlias(fieldList,[seriesConfig.y].flat()[0]);switch(chartSubType){case ChartSubType$1.BoxPlotMonoField:case ChartSubType$1.BoxPlotMultiFields:{if(xContextValue!==undefined&&isEmpty$1(xContextValue)===false){const fieldName=chartSubType===ChartSubType$1.BoxPlotMonoField?seriesConfig.name??xFieldAlias:xFieldAlias;tooltipLines.push(generateTooltipLine({label:commonStrings.field,strongColon,value:fieldName}))}break}case ChartSubType$1.BoxPlotMonoFieldAndCategory:case ChartSubType$1.BoxPlotMultiFieldsAndCategory:{tooltipLines.push(generateTooltipLine({label:commonStrings.field,strongColon,value:seriesConfig.name??yFieldAlias}));if(xContextValue!==undefined&&isEmpty$1(xContextValue)===false){tooltipLines.push(generateTooltipLine({label:xLabel,strongColon,value:xFieldAlias}))}break}case ChartSubType$1.BoxPlotMonoFieldAndSplitBy:case ChartSubType$1.BoxPlotMultiFieldsAndSplitBy:{if(xContextValue!==undefined&&isEmpty$1(xContextValue)===false){tooltipLines.push(generateTooltipLine({label:commonStrings.field,strongColon,value:xFieldAlias}))}tooltipLines.push(generateTooltipLine({label:splitByFieldAlias,strongColon,value:seriesConfig.name??splitByValue}));break}case ChartSubType$1.BoxPlotMonoFieldAndCategoryAndSplitBy:{tooltipLines.push(generateTooltipLine({label:commonStrings.field,strongColon,value:yFieldAlias}));if(xContextValue!==undefined&&isEmpty$1(xContextValue)===false){tooltipLines.push(generateTooltipLine({label:xLabel,strongColon,value:xFieldAlias}))}tooltipLines.push(generateTooltipLine({label:splitByFieldAlias,strongColon,value:seriesConfig.name??splitByValue}))}break}const chartSubTypesWithYPrefix=[ChartSubType$1.BoxPlotMultiFieldsAndCategory];const statValues=generateBoxPlotStatisticsValuesForTooltip({dataContext,series,dataTooltipValueFormat,splitBy:seriesConfig.query?.where,y:chartSubTypesWithYPrefix.includes(chartSubType)?[seriesConfig.y].flat()[0]:undefined,commonStrings,addDividerLine:tooltipLines.length>0});const tooltipContent=`${tooltipLines.join("<br>")}<table>${statValues.join("")}</table>`;return tooltipContent}}}return boxPlotTooltipFormatter}function updateBoxPlotTooltip(props){const{series,tooltipFormatter}=props;updateSeriesStorage(series.uid,{boxPlotTooltipFormatter:tooltipFormatter??generateBoxPlotTooltipTextCallback(props)})}function updateElementStateFillProperties(element,stylingInfo){if(element!==undefined&&stylingInfo!==undefined){const stateProperties=element.defaultState.properties;stateProperties.fill=stylingInfo.pattern??stylingInfo.fill;stateProperties.fillOpacity=1;if(stylingInfo.outline!==undefined){const{outline}=stylingInfo;stateProperties.stroke=outline.stroke;stateProperties.strokeOpacity=outline.stroke.alpha===0?0:1;stateProperties.strokeDasharray=outline.strokeDasharray;stateProperties.strokeLinecap=outline.strokeLinecap;stateProperties.strokeWidth=outline.strokeWidth}}}function toggleLastCutOffLabel(axis,labels){let lastLabel;let lastLabelX=0;(labels??axis.renderer.labels.values).forEach((currentLabel=>{const currentLabelX=currentLabel.x instanceof Percent?currentLabel.x.value:currentLabel.x;if(currentLabelX>lastLabelX){lastLabelX=currentLabelX;lastLabel=currentLabel}showElement(currentLabel,true)}));if(lastLabel!==undefined){const lastLabelWidth=Math.max(1,lastLabel.measuredWidth)/2;const leftSpace=axis.chart.leftAxesContainer.measuredWidth;if(Number.isFinite(lastLabelX)&&Number.isFinite(lastLabelWidth)&&Number.isFinite(leftSpace)){const lastLabelLeftX=lastLabelX+lastLabelWidth+leftSpace;const labelNeedsToBeHidden=lastLabelLeftX>axis.chart.measuredWidth===true&&lastLabel.rotation===0;showElement(lastLabel,labelNeedsToBeHidden===false)}}}function getCellWidth(axis){const numberOfVisibleAxisLabels=axis.renderer.labels.values.filter((currentLabel=>getValueFromLabelStorage(currentLabel.uid,"isGuide")!==true&&currentLabel.measuredWidth>0)).length;return axis.pixelWidth/numberOfVisibleAxisLabels}function sizechangedForMinGridDistanceCallBack(event){const{target:axis}=event;const config=getValueFromChartStorage(axis.chart.uid,"config");const horizontalAxisLabelsBehavior=config?.horizontalAxisLabelsBehavior??WebChartLabelBehavior.Rotate;if(horizontalAxisLabelsBehavior===WebChartLabelBehavior.Wrap){let minLabelWidth=Number.MAX_SAFE_INTEGER;axis.renderer.labels.each((currentLabel=>{if(getValueFromLabelStorage(currentLabel.uid,"isGuide")!==true&&currentLabel.measuredWidth>0)minLabelWidth=Math.min(minLabelWidth,currentLabel.bbox.width)}));axis.renderer.minGridDistance=minLabelWidth}}function updateAxisMinGridDistance(props){const{axis,labelsConfig,horizontalAxisLabelsBehavior}=props;let newMinGridDistance=axis.renderer.minGridDistance;if(axis.renderer instanceof AxisRendererX){if(horizontalAxisLabelsBehavior===undefined||horizontalAxisLabelsBehavior===WebChartLabelBehavior.Rotate){const fontSize=labelsConfig.content.font?.size??ChartDefaults.generalFontSize;const paddingFactor=axis instanceof CategoryAxis?ChartDefaults.categoryAxisLabelPadding:ChartDefaults.axisLabelPadding;newMinGridDistance=fontSize*paddingFactor}else if(horizontalAxisLabelsBehavior===WebChartLabelBehavior.Wrap){const debouncedSizechangedForMinGridDistanceCallBack=debounce(sizechangedForMinGridDistanceCallBack,ChartDefaults.debounceTime);updateAxisStorage(axis.uid,{debouncedSizechangedForMinGridDistanceCallBack});axis.events.on(EventTypes.SizeChanged,debouncedSizechangedForMinGridDistanceCallBack);axis.dispatchImmediately(EventTypes.SizeChanged)}else if(horizontalAxisLabelsBehavior===WebChartLabelBehavior.Stagger){newMinGridDistance=ChartDefaults.staggerMinGridDistance}else{newMinGridDistance=ChartDefaults.xAxisMinGridDistance}}else if(axis.renderer instanceof AxisRendererCircular){newMinGridDistance=ChartDefaults.gauge.gaugeMinGridDistance}else{newMinGridDistance=ChartDefaults.yAxisMinGridDistance}axis.renderer.minGridDistance=newMinGridDistance}function addAdaptersOnAxisLabel(axis){const axisLabelsTemplate=axis.renderer.labels.template;if(isElementValid(axisLabelsTemplate)){axisLabelsTemplate.adapter.add("rotation",((rotationValue,label)=>getValueFromLabelStorage(label.uid,"isGuide")!==true?getValueFromAxisStorage(axis.uid,"labelsSymbol")?.angle??rotationValue:rotationValue));axisLabelsTemplate.adapter.add("verticalCenter",((verticalCenterValue,label)=>getValueFromLabelStorage(label.uid,"isGuide")!==true?getValueFromAxisStorage(axis.uid,"labelsSymbol")?.verticalCenter??verticalCenterValue:verticalCenterValue));axisLabelsTemplate.adapter.add("horizontalCenter",((horizontalCenterValue,label)=>getValueFromLabelStorage(label.uid,"isGuide")!==true?getValueFromAxisStorage(axis.uid,"labelsSymbol")?.horizontalCenter??horizontalCenterValue:horizontalCenterValue));axisLabelsTemplate.adapter.add("dy",((dyValue,label)=>{let newDy=ChartDefaults.axisLabel.dy??dyValue;if(label.dataItem?.tick?.length>ChartDefaults.axisTickLength){newDy=dyValue}else{newDy=Number(getValueFromLabelStorage(label.uid,"isGuide")!==true?getValueFromAxisStorage(axis.uid,"labelsSymbol")?.yOffset??newDy:newDy)}return newDy}))}}function axisLabelRotationCallback(validatedEvent){const{target:targetAxis}=validatedEvent;if(targetAxis.chart!==undefined){const config=getValueFromChartStorage(targetAxis.chart.uid,"config");const labelsConfig=config?.axes?.[0].labels;const labelsVisible=labelsConfig?.visible??true;if(labelsVisible===true&&labelsConfig!==undefined&&targetAxis.renderer.labels.length>1){let maxLabelWidth=0;targetAxis.renderer.labels.each((currentLabel=>{if(getValueFromLabelStorage(currentLabel.uid,"isGuide")!==true&&currentLabel.measuredWidth>0){const currentLabelWidth=currentLabel.bbox.width;if(currentLabelWidth>maxLabelWidth)maxLabelWidth=currentLabelWidth}}));const currentRotation=getValueFromAxisStorage(targetAxis.uid,"labelsSymbol")?.angle??0;const cellWidth=getCellWidth(targetAxis);const enoughSpace=cellWidth>=maxLabelWidth+5;if(enoughSpace===false&&currentRotation===0||enoughSpace===true&&currentRotation===ChartDefaults.rotatedAxisLabel.rotation){const mappedSymbol=enoughSpace===false?mapTextSymbol({type:RESTSymbolType$1.TS},targetAxis.rtl,ChartDefaults.rotatedAxisLabel):mapTextSymbol(labelsConfig.content,targetAxis.rtl,ChartDefaults.axisLabel);updateAxisStorage(targetAxis.uid,{labelsSymbol:mappedSymbol});targetAxis.renderer.invalidateLabels()}}}}function axisLabelWrapCallback(event,factor=1){const{target}=event;const cellWidth=getCellWidth(target);if(Number.isFinite(cellWidth)===true)target.renderer.labels.template.maxWidth=cellWidth*factor}function axisLabelStaggerCallback(event){const{target:targetAxis}=event;const config=getValueFromChartStorage(targetAxis.chart.uid,"config");const labelsConfig=config?.axes?.[0].labels;if(labelsConfig?.visible!==false){let labelMaxHeightOnUpperRow=0;targetAxis.dataItems.each((axisDataItem=>{const{label,itemIndex}=axisDataItem;if(getValueFromLabelStorage(label.uid,"isGuide")!==true&&label.currentText!==undefined&&label.measuredWidth>0&&itemIndex%2===0&&label.bbox.height>labelMaxHeightOnUpperRow)labelMaxHeightOnUpperRow=label.bbox.height}));targetAxis.dataItems.each((axisDataItem=>{const{tick,label,itemIndex}=axisDataItem;if(getValueFromLabelStorage(label.uid,"isGuide")!==true&&label.currentText!==undefined&&label.measuredWidth>0){const oddTick=itemIndex%2===1;tick.length=oddTick===true?labelMaxHeightOnUpperRow+5:ChartDefaults.axisTickLength;tick.dataItem.label.dy=ChartDefaults.axisLabel.dy+(oddTick===true?labelMaxHeightOnUpperRow:0)}}));if(labelMaxHeightOnUpperRow!==undefined)targetAxis.renderer.labels.template.paddingBottom=labelMaxHeightOnUpperRow+5;targetAxis.validate()}}function revertXAxisLabelRotation(axis){const{chart}=axis;axis.renderer.labels.template.paddingLeft=NaN;axis.renderer.labels.template.paddingRight=NaN;const debouncedAxisLabelRotationCallback=getValueFromAxisStorage(axis.uid,"debouncedAxisLabelRotationCallback");if(debouncedAxisLabelRotationCallback!==undefined){axis.events.off(EventTypes.Validated,debouncedAxisLabelRotationCallback);updateAxisStorage(axis.uid,{debouncedAxisLabelRotationCallback:undefined})}if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const labelsConfig=config?.axes?.[0].labels;if(labelsConfig!==undefined){const mappedSymbol=mapTextSymbol(labelsConfig.content,chart.rtl,ChartDefaults.axisLabel);const axisLabelsTemplate=axis.renderer.labels.template;axisLabelsTemplate.rotation=mappedSymbol.angle;axisLabelsTemplate.verticalCenter=mappedSymbol.verticalCenter;axisLabelsTemplate.horizontalCenter=mappedSymbol.horizontalCenter;if(Number.isFinite(mappedSymbol.yOffset)===true)axisLabelsTemplate.dy=mappedSymbol.yOffset}updateAxisStorage(axis.uid,{labelsSymbol:undefined})}}function revertAxisLabelWrap(axis){axis.renderer.labels.template.maxWidth=NaN;axis.renderer.labels.template.wrap=false;axis.renderer.labels.template.textAlign="start"}function revertXAxisLabelWrap(axis){revertAxisLabelWrap(axis);axis.renderer.labels.template.paddingLeft=NaN;axis.renderer.labels.template.paddingRight=NaN;const debouncedAxisLabelWrapCallback=getValueFromAxisStorage(axis.uid,"debouncedAxisLabelWrapCallback");if(debouncedAxisLabelWrapCallback!==undefined){axis.events.off(EventTypes.DataRangeChanged,debouncedAxisLabelWrapCallback);updateAxisStorage(axis.uid,{debouncedAxisLabelWrapCallback:undefined})}}function revertYAxisLabelWrap(axis){revertAxisLabelWrap(axis)}function revertXAxisLabelStagger(axis){const debouncedAxisLabelStaggerCallback=getValueFromAxisStorage(axis.uid,"debouncedAxisLabelStaggerCallback");if(debouncedAxisLabelStaggerCallback!==undefined){axis.events.off(EventTypes.DataRangeChanged,debouncedAxisLabelStaggerCallback);updateAxisStorage(axis.uid,{debouncedAxisLabelStaggerCallback:undefined})}const debouncedSizechangedForMinGridDistanceCallBack=getValueFromAxisStorage(axis.uid,"debouncedSizechangedForMinGridDistanceCallBack");if(debouncedSizechangedForMinGridDistanceCallBack!==undefined){axis.events.off(EventTypes.SizeChanged,debouncedSizechangedForMinGridDistanceCallBack);updateAxisStorage(axis.uid,{debouncedSizechangedForMinGridDistanceCallBack:undefined})}axis.renderer.ticks.each((tick=>{tick.length=ChartDefaults.axisTickLength;tick.dataItem.label.dy=ChartDefaults.axisLabel.dy??0}))}function disableAllCustomXAxisBehavior(axis){revertXAxisLabelRotation(axis);revertXAxisLabelWrap(axis);revertXAxisLabelStagger(axis)}function enableXAxisLabelRotation(axis){addAdaptersOnAxisLabel(axis);axis.renderer.labels.template.paddingLeft=0;axis.renderer.labels.template.paddingRight=0;const debouncedAxisLabelRotationCallback=debounce(axisLabelRotationCallback,ChartDefaults.debounceTime,{leading:true});updateAxisStorage(axis.uid,{debouncedAxisLabelRotationCallback});axis.events.on(EventTypes.Validated,debouncedAxisLabelRotationCallback);axis.dispatchImmediately(EventTypes.Validated)}function enableXAxisLabelWrap(axis,factor=1){axis.renderer.labels.template.wrap=true;axis.renderer.labels.template.paddingLeft=0;axis.renderer.labels.template.paddingRight=0;const debouncedAxisLabelWrapCallback=debounce((e=>axisLabelWrapCallback(e,factor)),ChartDefaults.debounceTime);updateAxisStorage(axis.uid,{debouncedAxisLabelWrapCallback});axis.events.on(EventTypes.DataRangeChanged,debouncedAxisLabelWrapCallback)}function enableYAxisLabelWrap(axis){axis.renderer.labels.template.maxWidth=ChartDefaults.yAxisLabelMaxWidth;axis.renderer.labels.template.wrap=true;axis.renderer.labels.template.textAlign="end"}function enableXAxisLabelStagger(axis){const debouncedAxisLabelStaggerCallback=debounce(axisLabelStaggerCallback,ChartDefaults.debounceTime);updateAxisStorage(axis.uid,{debouncedAxisLabelStaggerCallback});axis.events.on(EventTypes.DataRangeChanged,debouncedAxisLabelStaggerCallback)}function updateAxisLabelBehavior(props){const{axis,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,labelsConfig,axisLabelsBehaviorChanged}=props;if(axis.renderer instanceof AxisRendererX&&axisLabelsBehaviorChanged?.[0]===true){disableAllCustomXAxisBehavior(axis);switch(horizontalAxisLabelsBehavior){case WebChartLabelBehavior.None:break;case WebChartLabelBehavior.Stagger:enableXAxisLabelStagger(axis);enableXAxisLabelWrap(axis,1.5);break;case WebChartLabelBehavior.Wrap:enableXAxisLabelWrap(axis);break;case WebChartLabelBehavior.Rotate:enableXAxisLabelRotation(axis);break;default:if(labelsConfig.content.angle!==null&&labelsConfig.content.angle===undefined)enableXAxisLabelRotation(axis);break}}else if(axis.renderer instanceof AxisRendererY){if(verticalAxisLabelsBehavior!==WebChartLabelBehavior.None){enableYAxisLabelWrap(axis)}else{revertYAxisLabelWrap(axis)}}}function updateAxisLabel(props){const{axis,axisConfig,seriesType,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,axisLabelsBehaviorChanged}=props;if(axis.renderer instanceof AxisRendererY||seriesType!==WebChartTypes$2.HistogramSeries){const axisLabel=axis.renderer.labels.template;axisLabel.axis=axis;const{labels:labelsConfig}=axisConfig;const labelsAreRotated=axis.renderer instanceof AxisRendererX&&axisLabel.rotation===ChartDefaults.rotatedAxisLabel.rotation;const updatedText=labelsConfig;let labelDefaults;if(labelsAreRotated===true){updatedText.content.angle=undefined;updatedText.content.horizontalAlignment=undefined;updatedText.content.verticalAlignment=undefined;updatedText.content.yoffset=undefined;labelDefaults=ChartDefaults.rotatedAxisLabel}else if(horizontalAxisLabelsBehavior===WebChartLabelBehavior.Stagger||horizontalAxisLabelsBehavior===WebChartLabelBehavior.Wrap){labelDefaults={wrap:true}}updateLabel(axisLabel,updatedText,labelDefaults);axis.renderer.labels.template.paddingTop=axis.renderer instanceof AxisRendererX?0:ChartDefaults.axisLabel.dy;axisLabel.align="none";axisLabel.valign="none";updateAxisLabelBehavior({axis,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,labelsConfig,axisLabelsBehaviorChanged});axisLabel.axis.invalidateLabels()}}function adjustGuideLabelsPosition(axis,label){if(axis.chart instanceof GaugeChart===false){label.adapter.add("dx",(dx=>{let newDx=dx;if(label.rotation===90||label.rotation===270){newDx=label.bbox.height;if(label.dataItem.value!==label.dataItem.endValue)newDx/=2}return newDx}));label.padding(0,10,0,10)}}function initializeGuideLabel(axis,isGuide){const label=axis.renderer instanceof AxisRendererCircular?new AxisLabelCircular:new AxisLabel;label.disabled=true;label.axis=axis;applyLabelDefaults(label);updateLabelStorage(label.uid,{isGuide});autoAdjustLabelMaxWidth({chart:axis.chart,label,labelType:LabelType.GuideLabel});if(isGuide===true){adjustGuideLabelsPosition(axis,label)}return label}function updateGuideLabel(props){const{label,labelConfig,guideType}=props;const isHorizontalAxis=label.axis.renderer instanceof AxisRendererX;let labelDefaults;if(label instanceof AxisLabelCircular===false){if(isHorizontalAxis===true){if(guideType===RESTSymbolType$1.SFS)labelDefaults=ChartDefaults.verticalSurfaceGuideLabels;else labelDefaults=ChartDefaults.verticalLineGuideLabels}else if(guideType===RESTSymbolType$1.SFS)labelDefaults=ChartDefaults.horizontalSurfaceGuideLabels;else labelDefaults=ChartDefaults.horizontalLineGuideLabels}updateLabel(label,labelConfig,labelDefaults);label.axis.invalidateLabels()}const AxisDataItemType={Guides:"guides",Ticks:"ticks",GaugeFirstAndLastGuides:"firstAndLast",GaugeTicksWithLabels:"gaugeTicksWithLabels"};function initializeGuideTooltip(guide,guideIndex){guide.axisFill.tooltip=new Tooltip;guide.axisFill.interactionsEnabled=true;guide.axisFill.tooltipPosition="pointer";guide.axisFill.adapter.add("tooltipHTML",((defaultTooltipHTML,guideFillOrGrid)=>{let newTooltipHTML=defaultTooltipHTML;const{dataItem,axis}=guideFillOrGrid;if(axis.renderer instanceof AxisRendererCircular===false){const guideTooltipFormatter=getValueFromAxisStorage(axis.uid,"guideTooltipFormatter");if(guideTooltipFormatter!==undefined){let guideStart="";let guideEnd;if(dataItem instanceof ValueAxisDataItem){guideStart=dataItem.value;guideEnd=dataItem.endValue}else if(dataItem instanceof CategoryAxisDataItem){guideStart=dataItem.category;guideEnd=dataItem.endCategory}else if(dataItem instanceof DateAxisDataItem){guideStart=dataItem.date;guideEnd=dataItem.endDate}newTooltipHTML=guideTooltipFormatter({guideName:dataItem.id??"",start:guideStart,end:guideEnd,guideIndex})}if(isEmptyStringField$1(newTooltipHTML)===true)newTooltipHTML="<p></p>"}return newTooltipHTML}))}function generateGuideTooltipFormatter(axis,commonStrings){return props=>{const{guideName,start,end,guideIndex}=props;const{chart}=axis;let tooltipHTML="";if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const isRotated=getValueFromChartStorage(chart.uid,"isRotated");const isYAxis=isXAxis(axis.renderer,isRotated)===false;const axisConfigIndex=isYAxis===true?1:0;const axisConfig=config?.axes?.[axisConfigIndex];const guideConfigs=axisConfig?.guides;let guideStart=start;let guideEnd=end;if(axis instanceof DateAxis){let dateFormatter=new DateFormatter;let configDateFormat;if(chart!==undefined){const formatLocale=getValueFromChartStorage(axis.chart.uid,"formatLocale");dateFormatter=getFormatter({type:WebChartTypes$2.DateAxisFormat,iLocale:chart.language.locale,formatLocale});configDateFormat=config?.axes?.[0]?.valueFormat?.intlOptions}guideStart=dateFormatter.format(start,configDateFormat);if(end!==undefined)guideEnd=dateFormatter.format(end,configDateFormat)}else if(axis instanceof ValueAxis&&start instanceof Date===false&&end instanceof Date===false){const{start:configStart,end:configEnd}=getGuideValuesFromConfig(axis,guideConfigs?.[guideIndex]);if(Number.isFinite(configStart)===true)guideStart=configStart;if(Number.isFinite(configEnd)===true)guideEnd=configEnd;const numberFormatter=getValueFromAxisStorage(axis.uid,"numberFormatter")??(value=>(new NumberFormatter).format(value));guideStart=numberFormatter(guideStart);if(guideEnd!==undefined)guideEnd=numberFormatter(guideEnd)}else if(axis instanceof CategoryAxis){guideStart=start;guideEnd=end}if(guideStart!==undefined)guideStart=`${guideStart}`;if(guideEnd!==undefined)guideEnd=`${guideEnd}`;if(isEmptyStringField$1(guideEnd)===false&&guideStart!==guideEnd){tooltipHTML=formatMessage$1(commonStrings?.guideTooltipLabel,{guideStart,guideEnd})}else{tooltipHTML=`${guideStart}`}const strongColon=getDirectionallyStrongCharacter(chart.rtl);tooltipHTML=`${guideName}${strongColon} ${tooltipHTML}`}return tooltipHTML}}function updateGuideTooltipFormatter(props){const{axis,guideTooltipFormatter,commonStrings}=props;updateAxisStorage(axis.uid,{guideTooltipFormatter:guideTooltipFormatter??generateGuideTooltipFormatter(axis,commonStrings)})}function getWebChartAxisType(axis){let axisType=WebChartAxisTypes.Value;if(axis instanceof DateAxis)axisType=WebChartAxisTypes.Date;else if(axis instanceof CategoryAxis)axisType=WebChartAxisTypes.Category;return axisType}function convertGuideValue(props){const{inputValue,axisType,axisMin,axisMax}=props;let returnedValue=inputValue;if(inputValue!==undefined&&inputValue!==null){switch(axisType){case WebChartAxisTypes.Date:returnedValue=inputValue instanceof Date?inputValue:new Date(inputValue);break;case WebChartAxisTypes.Category:returnedValue=inputValue.toString();break;case WebChartAxisTypes.Value:if(typeof inputValue!=="number"){const inputAsString=inputValue.toString().trim();const percentValue=extractPercentValue(inputAsString);if(percentValue!==undefined){if(axisMin!==undefined&&axisMax!==undefined){returnedValue=percentValue/100*(axisMax-axisMin)+axisMin}else{returnedValue=null}}else{returnedValue=parseFloat(inputAsString)}}break}}return returnedValue}function getGuideValuesFromConfig(axis,guideConfig){const{start,end}=guideConfig??{};let returnedValue;if(guideConfig!==undefined&&start!==undefined&&start!==null){const axisType=getWebChartAxisType(axis);const axisMin=axis instanceof ValueAxis?axis.min:undefined;const axisMax=axis instanceof ValueAxis?axis.max:undefined;const startSanitizedValue=convertGuideValue({inputValue:start,axisType,axisMin,axisMax});const endSanitizedValue=guideConfig.style?.type===RESTSymbolType$1.SFS&&end!==null&&end!==undefined?convertGuideValue({inputValue:end,axisType,axisMin,axisMax}):startSanitizedValue;returnedValue={isValidGuide:startSanitizedValue!==undefined&&startSanitizedValue!==null&&endSanitizedValue!==undefined&&endSanitizedValue!==null,start:startSanitizedValue,end:endSanitizedValue}}else{returnedValue={isValidGuide:false,start:undefined,end:undefined}}return returnedValue}function disposeTicksOrGuides(props){const{axis,tickOrGuide,numberOfElementsToBeDeleted}=props;const elementsToBeDeleted=[];let currentIndex=axis.axisRanges.length-1;let toDelete=numberOfElementsToBeDeleted;while(toDelete>0&&currentIndex>=0){const element=axis.axisRanges.getIndex(currentIndex);if(element!==undefined){const isGuide=getValueFromLabelStorage(element.label?.uid,"isGuide")??false;if(isGuide!==true&&tickOrGuide===AxisDataItemType.Ticks||isGuide===true&&tickOrGuide===AxisDataItemType.Guides){elementsToBeDeleted.push(element);toDelete-=1}}currentIndex-=1}for(let i=0;i<elementsToBeDeleted.length;i+=1){axis.axisRanges.removeValue(elementsToBeDeleted[i])}}function getTickOrGuideList(axis,dataItemType){const tickList=axis.axisRanges?.values?.filter((axisRange=>{const isGuide=getValueFromLabelStorage(axisRange.label?.uid,"isGuide")??false;const isGaugeAxisLabel=getValueFromLabelStorage(axisRange.label?.uid,"isGaugeAxisLabel")??false;let decision=false;switch(dataItemType){case AxisDataItemType.Ticks:decision=isGuide===false;break;case AxisDataItemType.Guides:decision=isGuide===true;break;case AxisDataItemType.GaugeTicksWithLabels:decision=isGaugeAxisLabel===true&&axisRange.value!==undefined;break;case AxisDataItemType.GaugeFirstAndLastGuides:decision=isGuide===true&&(axisRange.id===ChartDefaults.gaugeFirstLabelId||axisRange.id===ChartDefaults.gaugeLastLabelId);break}return decision}));return tickList??[]}function initializeAxisDataItem(axis,isGuide){let newItemIndex=axis.axisRanges.length;if(isGuide===true){const technicalFirstGuideIndex=axis.axisRanges.values.findIndex((axisRange=>axisRange.id===ChartDefaults.gaugeFirstLabelId));if(technicalFirstGuideIndex!==-1)newItemIndex=technicalFirstGuideIndex}let axisDataItem;if(axis instanceof CategoryAxis)axisDataItem=new CategoryAxisDataItem;else if(axis instanceof DateAxis)axisDataItem=new DateAxisDataItem;else axisDataItem=new ValueAxisDataItem;axis.axisRanges.insertIndex(newItemIndex,axisDataItem);axisDataItem.label=initializeGuideLabel(axis,isGuide);axisDataItem.axisFill.fillOpacity=1;axisDataItem.axisFill.disabled=true;axisDataItem.grid.strokeOpacity=1;return axisDataItem}function initializeGuide(axis,guideIndex){const guide=initializeAxisDataItem(axis,true);initializeGuideTooltip(guide,guideIndex);if(guide.tick!==undefined)guide.tick.disabled=true;if(guide.label!==undefined)guide.label.inside=true;if(guide.grid!==undefined)guide.grid.disabled=true}function findModifiedBoundaries(chart,guide){const{start,end}=guide;const config=getValueFromChartStorage(chart.uid,"config");const x=getXAxisField(config);let modifiedStart=start!==null?start:undefined;const startMatch=chart.data.find((value=>value[ChartDefaults.originalCategoryValue]===start));modifiedStart=startMatch?.[x]??modifiedStart;let modifiedEnd=end!==null?end:undefined;if(modifiedEnd!==undefined){for(let i=chart.data.length-1;i>=0;i-=1){const currentDataItem=chart.data[i];if(currentDataItem[ChartDefaults.originalCategoryValue]===end){modifiedEnd=currentDataItem[x];break}}}return{modifiedStart,modifiedEnd}}function updateGuideBoundaries(chartGuideAxisDataItem,guideConfig){const{start,end}=guideConfig;if(start!==undefined){const{chart}=chartGuideAxisDataItem?.component??{};let guideValues;if(chartGuideAxisDataItem instanceof CategoryAxisDataItem&&chart instanceof XYChart&&getValueFromChartStorage(chart.uid,"isNonAggregatedChart")===true){const{modifiedStart,modifiedEnd}=findModifiedBoundaries(chart,guideConfig);guideValues={isValidGuide:true,start:modifiedStart??start,end:modifiedEnd??end}}else{guideValues=getGuideValuesFromConfig(chartGuideAxisDataItem.axisFill.axis,guideConfig)}if(guideValues.isValidGuide===true){if(chartGuideAxisDataItem instanceof CategoryAxisDataItem){chartGuideAxisDataItem.category=`${guideValues.start}`;chartGuideAxisDataItem.endCategory=`${guideValues.end}`}else if(chartGuideAxisDataItem instanceof DateAxisDataItem){chartGuideAxisDataItem.date=guideValues.start;chartGuideAxisDataItem.endDate=guideValues.end}else{chartGuideAxisDataItem.value=guideValues.start;chartGuideAxisDataItem.endValue=guideValues.end}}}}function updateGuideZIndex(chartGuideAxisDataItem,above){chartGuideAxisDataItem.axisFill.above=above??ChartDefaults.guideAbove;chartGuideAxisDataItem.grid.above=above??ChartDefaults.guideAbove}function updateGuide(guide,guideConfig){const{axisFill,label}=guide;if(guideConfig!==undefined){guide.id=guideConfig.name;guide.visible=guideConfig.visible!==undefined?guideConfig.visible:guide.visible;updateGuideBoundaries(guide,guideConfig);if(guideConfig.style.type===RESTSymbolType$1.SLS){updateFillElements({element:axisFill,fillSymbol:{type:RESTSymbolType$1.SFS,color:guideConfig.style?.color,outline:guideConfig.style},visible:guideConfig.visible})}else if(guideConfig.style.type===RESTSymbolType$1.SFS){updateFillElements({element:axisFill,fillSymbol:guideConfig.style,visible:guideConfig.visible})}updateGuideZIndex(guide,guideConfig.above);if(guideConfig.label!==undefined){const text={type:WebChartTypes$2.Text,visible:guideConfig.visible,content:guideConfig.label};updateGuideLabel({label,labelConfig:text,guideType:guideConfig.style.type})}const chart=guide.component?.chart;autoAdjustLabelMaxWidthCallback({chart,label,labelType:LabelType.GuideLabel})}else{axisFill.disabled=true;label.disabled=true}}function enterGuides(axis,guides){const axisGuides=getTickOrGuideList(axis,AxisDataItemType.Guides);const availableGuides=axisGuides.length;const demandedGuides=guides?.length??availableGuides;const neededGuides=demandedGuides-availableGuides;for(let i=0;i<neededGuides;i+=1){initializeGuide(axis,i)}}function updateGuides(props){const{axis,guides,guideTooltipFormatter,commonStrings}=props;if(guides!==undefined){for(let i=0;i<guides.length;i+=1){const axisGuides=getTickOrGuideList(axis,AxisDataItemType.Guides);const chartGuideAxisDataItem=axisGuides[i];if(chartGuideAxisDataItem!==undefined){updateGuide(chartGuideAxisDataItem,guides[i])}}updateGuideTooltipFormatter({axis,guideTooltipFormatter,commonStrings})}}function exitGuides(axis,guides){const axisGuides=getTickOrGuideList(axis,AxisDataItemType.Guides);const availableGuides=axisGuides.length;const demandedGuides=guides?.length??0;const numberOfGuidesToBeDeleted=availableGuides-demandedGuides;disposeTicksOrGuides({axis,numberOfElementsToBeDeleted:numberOfGuidesToBeDeleted,tickOrGuide:AxisDataItemType.Guides})}function updateGuidesArray(props){const{axis,guides}=props;enterGuides(axis,guides);updateGuides(props);exitGuides(axis,guides)}function initializeTick(axis){const tick=initializeAxisDataItem(axis,false);tick.label.inside=false;tick.grid.disabled=true;tick.label.html="<p></p>";tick.label.adapter.add("htmlOutput",((defaultHTMLOutput,target)=>valueAxisFormatterCallback(axis,target?.dataItem?.value??defaultHTMLOutput)))}function updateTick(input){const{axisTick,value,axisConfig,numberFormatter}=input;axisTick.value=value;axisConfig.labels.content.text=numberFormatter.format(value);updateLineElements({element:axisTick.tick,lineSymbol:axisConfig.lineSymbol,visible:axisConfig.visible})}function enterTicks(axis,ticks){const tickList=getTickOrGuideList(axis,AxisDataItemType.Ticks);const availableTicks=tickList.length;const demandedTicks=ticks?.length??availableTicks;const neededTicks=demandedTicks-availableTicks;for(let i=0;i<neededTicks;i+=1){initializeTick(axis)}}function updateTicks(props){const{valueAxis,axisConfig,ticks}=props;const formatLocale=getValueFromChartStorage(valueAxis.chart.uid,"formatLocale");const numberFormatter=getFormatter({type:axisConfig.valueFormat.type,iLocale:valueAxis.chart.language.locale,formatLocale});numberFormatter.numberFormat=mapValueFormat(axisConfig.valueFormat);if(ticks!==undefined){const axisTicks=getTickOrGuideList(valueAxis,AxisDataItemType.Ticks);for(let i=0;i<ticks.length;i+=1){const axisTick=axisTicks[i];if(axisTick!==undefined){const value=ticks[i];updateTick({axisTick,value,axisConfig,numberFormatter})}}}}function exitTicks(axis,ticks){const axisTicks=getTickOrGuideList(axis,AxisDataItemType.Ticks);const availableTicks=axisTicks.length;const demandedTicks=ticks?.length??0;const numberOfTicksToBeDeleted=availableTicks-demandedTicks;disposeTicksOrGuides({axis,numberOfElementsToBeDeleted:numberOfTicksToBeDeleted,tickOrGuide:AxisDataItemType.Ticks})}function updateTicksArray(props){const{valueAxis,axisConfig,ticks}=props;enterTicks(valueAxis,ticks);updateTicks({valueAxis,axisConfig,ticks});exitTicks(valueAxis,ticks)}function initializeAxisTooltip(axis){const axisTooltip=axis.tooltip;if(axisTooltip!==undefined&&axis instanceof DateAxis===false){axisTooltip.label.adapter.add("html",((defaultTooltipHTML,label)=>{let output=defaultTooltipHTML;if(axis instanceof ValueAxis){output=valueAxisFormatterCallback(axis,label.properties?.text??defaultTooltipHTML)}else if(axis instanceof CategoryAxis){output=categoryAxisFormatterCallback({axis,defaultOutput:defaultTooltipHTML,dataItem:axisTooltip.dataItem})}return sanitizeHTMLOutput(output)}));axisTooltip.label.html=ChartDefaults.htmlEmptyContent}}function shouldForceCategoryAxis(props){const{chartType,isRotated,horizontalAxisValueFormat,verticalAxisValueFormat}=props;const forceCategoryOnHorizontalAxis=isRotated!==true?chartType===WebChartTypes$2.BarSeries&&isNumberValueFormat(horizontalAxisValueFormat)===true:false;const forceCategoryOnVerticalAxis=isRotated===true?chartType===WebChartTypes$2.BarSeries&&isNumberValueFormat(verticalAxisValueFormat)===true:false;return{forceCategoryOnHorizontalAxis,forceCategoryOnVerticalAxis}}function setAxisZoom(props){const{axis,start,end}=props;axis.zoom({start:start??0,end:end??1})}function resetScrollbar(scrollbar){if(scrollbar!==undefined){scrollbar.start=0;scrollbar.end=1}}function resetZoomToFullExtent(chart){if(chart!==undefined){if(chart.xAxes!==undefined)chart.xAxes.each((xAxis=>setAxisZoom({axis:xAxis})));if(chart.yAxes!==undefined)chart.yAxes.each((yAxis=>setAxisZoom({axis:yAxis})));resetScrollbar(chart.scrollbarX);resetScrollbar(chart.scrollbarY);showElement(chart.zoomOutButton,false)}}function isXAxis(axisRenderer,isRotated){return axisRenderer instanceof AxisRendererX&&isRotated!==true||axisRenderer instanceof AxisRendererY&&isRotated===true}function addOverStyle(axisRenderer){if(isElementValid(axisRenderer.labels.template)){axisRenderer.labels.template.events.on(EventTypes.Over,(event=>{const{axisLabelOveredOpacity}=ChartDefaults;event.target.fillOpacity=(event.target.fillOpacity??1)*axisLabelOveredOpacity}));axisRenderer.labels.template.events.on(EventTypes.Out,(event=>{const{axisLabelOveredOpacity}=ChartDefaults;event.target.fillOpacity=(event.target.fillOpacity??.5)/axisLabelOveredOpacity}))}}function setupAxisRenderer(props){const{axis,valueFormat,axisRenderer}=props;axisRenderer.grid.template.applyOnClones=true;axisRenderer.ticks.template.applyOnClones=true;axisRenderer.labels.template.applyOnClones=true;axisRenderer.hoverable=true;axisRenderer.line.strokeOpacity=1;axisRenderer.grid.template.strokeOpacity=1;axisRenderer.ticks.template.strokeOpacity=1;applyLabelDefaults(axisRenderer.labels.template,ChartDefaults.axisLabel);axisRenderer.ticks.template.disabled=false;axisRenderer.labels.template.disabled=true;initializeAxisTooltip(axis);if(isCategoryValueFormat(valueFormat)===true||isDateValueFormat(valueFormat)===true){addOverStyle(axisRenderer);addSelectOnAxisLabelHit(axis)}autoAdjustLabelMaxWidth({chart:axis.chart,label:axis.title,labelType:axis.renderer instanceof AxisRendererX?LabelType.XAxisTitle:LabelType.YAxisTitle});if(axis.renderer instanceof AxisRendererX){axis.events.on(EventTypes.Validated,debounce((()=>{toggleLastCutOffLabel(axis)}),ChartDefaults.debounceTime))}}function discardAxes(axes){while(axes.length>0){axes.pop()?.dispose()}}function axisMinMaxChangedCallback(event){const axis=event.target;const isRotated=getValueFromChartStorage(axis.chart.uid,"isRotated");if(axis instanceof ValueAxis&&axis.renderer instanceof(isRotated!==true?AxisRendererY:AxisRendererX)){const yAxis=event.target;const targetChart=yAxis.chart;const xAxis=isRotated!==true?targetChart.xAxes.getIndex(0):targetChart.yAxes.getIndex(0);const axesMinMax=[{isXAxis:false,minimum:yAxis.min,maximum:yAxis.max},{isXAxis:true,minimum:xAxis instanceof ValueAxis&&xAxis instanceof DateAxis===false?xAxis.min:undefined,maximum:xAxis instanceof ValueAxis&&xAxis instanceof DateAxis===false?xAxis.max:undefined}];if(Number.isNaN(axesMinMax[0].minimum)===false&&Number.isNaN(axesMinMax[0].maximum)===false&&Number.isNaN(axesMinMax[1].minimum)===false&&Number.isNaN(axesMinMax[1].maximum)===false)notifyAxesMinMaxChange(axesMinMax,yAxis.chart.htmlContainer)}}function addHandlerOnAxisMinMaxChange(axis){axis.events.on(EventTypes.Validated,debounce(axisMinMaxChangedCallback,ChartDefaults.debounceTime))}function hideGuidesWithInvalidBounds(props){const{axis,isNonAggregatedChart}=props;let guideIsWithinBounds;let guideStartValueValid;let guideEndValueValid;const dataItemCategory=axis.dataItems.values;const axisDataItemArray=axis.axisRanges.values;if(axis instanceof CategoryAxis){for(let guideIndex=0;guideIndex<axisDataItemArray.length;guideIndex+=1){guideIsWithinBounds=false;guideStartValueValid=false;guideEndValueValid=false;const currentGuide=axisDataItemArray[guideIndex];const{category,endCategory,axisFill,grid,label}=currentGuide;if(currentGuide instanceof CategoryAxisDataItem){if(currentGuide.visible===true){for(let index=0;index<dataItemCategory.length;index+=1){let chartCategoryData;if(isNonAggregatedChart===true){chartCategoryData=getXAxisValueFromContext({value:dataItemCategory[index].category,dataContext:dataItemCategory[index].dataContext})}else chartCategoryData=dataItemCategory[index].category.toString();if(category===chartCategoryData){guideStartValueValid=true}if(endCategory===chartCategoryData){guideEndValueValid=true}}}}if(guideStartValueValid===true&&guideEndValueValid===true)guideIsWithinBounds=true;showElement(axisFill,guideIsWithinBounds);showElement(grid,guideIsWithinBounds);showElement(label,guideIsWithinBounds)}}}function adjustGuidesAccordingToAxisMinMaxValues(props){const{axis,axisMinimum,axisMaximum}=props;let displayGuide;if(axis instanceof ValueAxis&&axisMaximum!==undefined&&axisMinimum!==undefined){const axisDataItemArray=axis.axisRanges.values;const chartConfig=getValueFromChartStorage(axis.chart.uid,"config");const isRotated=getValueFromChartStorage(axis.chart.uid,"isRotated");const isYAxis=isXAxis(axis.renderer,isRotated)===false;const axisConfigIndex=isYAxis===true?1:0;const axisConfig=chartConfig?.axes?.[axisConfigIndex];const guideConfigs=axisConfig?.guides;for(let guideIndex=0;guideIndex<axisDataItemArray.length;guideIndex+=1){const currentGuide=axisDataItemArray[guideIndex];const{value,endValue,axisFill,grid,label}=currentGuide;const isGuide=getValueFromLabelStorage(label?.uid,"isGuide");if(isGuide===true){displayGuide=currentGuide.visible;if(displayGuide===true&&currentGuide instanceof ValueAxisDataItem){const{start,end}=getGuideValuesFromConfig(axis,guideConfigs?.[guideIndex]);const guideMin=Math.min(value,endValue,start??value,end??endValue);const guideMax=Math.max(value,endValue,start??value,end??endValue);if(guideMin<axisMinimum&&guideMax<axisMinimum||guideMin>axisMaximum&&guideMax>axisMaximum){displayGuide=false}else{currentGuide.value=guideMin<axisMinimum?axisMinimum:guideMin;currentGuide.endValue=guideMax>axisMaximum?axisMaximum:guideMax}}showElement(axisFill,displayGuide);showElement(grid,displayGuide);showElement(label,displayGuide)}}}}function checkGuideBoundsOnAxisMinMaxChange(axis){if(axis instanceof ValueAxis){axis.adapter.add("min",(minimum=>{adjustGuidesAccordingToAxisMinMaxValues({axis,axisMinimum:minimum,axisMaximum:axis.max});return minimum}));axis.adapter.add("max",(maximum=>{adjustGuidesAccordingToAxisMinMaxValues({axis,axisMinimum:axis.min,axisMaximum:maximum});return maximum}))}else if(axis instanceof CategoryAxis){axis.events.on("validated",(()=>{const isNonAggregatedChart=getValueFromChartStorage(axis.chart.uid,"isNonAggregatedChart");hideGuidesWithInvalidBounds({axis,isNonAggregatedChart})}))}}function initializeAxis(props){const{axes,valueFormat,isNonAggregatedChart,forceCategoryAxis}=props;discardAxes(axes);let axis;if(forceCategoryAxis===true){axis=axes.push(new CategoryAxis)}else if(isDateValueFormat(valueFormat)===true&&isNonAggregatedChart!==true){axis=axes.push(new DateAxis)}else if(isNumberValueFormat(valueFormat)===true){axis=axes.push(new ValueAxis);const formatLocale=getValueFromChartStorage(axis.chart.uid,"formatLocale");axis.numberFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale:axis.chart.language.locale,formatLocale});axis.numberFormatter.numberFormat="#";addHandlerOnAxisMinMaxChange(axis)}else if(isCategoryValueFormat(valueFormat)===true||isNonAggregatedChart===true){axis=axes.push(new CategoryAxis)}if(axis!==undefined){initializeAxisFormatter(axis);setupAxisRenderer({axis,valueFormat,axisRenderer:axis.renderer});checkGuideBoundsOnAxisMinMaxChange(axis)}}function initializeXYChartAxes(props){const{chart,axesTypes,isRotated,chartType}=props;const isNonAggregatedChart=getValueFromChartStorage(chart.uid,"isNonAggregatedChart");updateChartStorage(chart.uid,{isRotated:isRotated===true});const horizontalAxisValueFormat=isRotated===true?axesTypes[1]:axesTypes[0];const verticalAxisValueFormat=isRotated===true?axesTypes[0]:axesTypes[1];const{forceCategoryOnHorizontalAxis,forceCategoryOnVerticalAxis}=shouldForceCategoryAxis({chartType,isRotated,horizontalAxisValueFormat,verticalAxisValueFormat});initializeAxis({axes:chart.xAxes,valueFormat:horizontalAxisValueFormat,isNonAggregatedChart,forceCategoryAxis:forceCategoryOnHorizontalAxis});initializeAxis({axes:chart.yAxes,valueFormat:verticalAxisValueFormat,isNonAggregatedChart,forceCategoryAxis:forceCategoryOnVerticalAxis})}function updateAxisLogarithmic(axis,isLogarithmic){if(axis instanceof DateAxis||axis instanceof ValueAxis){axis.events.on(EventTypes.DataItemsValidated,(()=>{axis.logarithmic=isLogarithmic===true}))}}function shouldApplyStrictMinMax(props){const{axis,buffer,isLogarithmic}=props;return axis instanceof ValueAxis&&axis instanceof DateAxis===false&&isLogarithmic!==true&&buffer!==true}function updateAxisStrictMinMax(props){const{axis}=props;let strictMinMax=false;if(axis instanceof ValueAxis&&axis instanceof DateAxis===false){strictMinMax=shouldApplyStrictMinMax(props);axis.strictMinMax=strictMinMax}return strictMinMax}function getAxisMinMaxUsingData(props){const{axis,minimumFromConfig,maximumFromConfig,seriesType}=props;let min=minimumFromConfig;let max=maximumFromConfig;const{chart}=axis;const isRotated=getValueFromChartStorage(chart.uid,"isRotated");const chartConfig=getValueFromChartStorage(chart.uid,"config");if(chart instanceof XYChart&&chartConfig!==undefined){const stackedType=getSeriesStackedType$1(chartConfig?.series[0]);const xAxis=isXAxis(axis.renderer,isRotated)===true;const visibleSeriesId=getVisibleSeriesIDs(chart);const dataMinMax=getDataMinMaxFromVisibleSeries({chartConfig,chartData:chart.data,visibleSeriesId});const{minX,maxX,minY,maxY}=dataMinMax;const[dataMin,dataMax]=xAxis===true?[minX??NaN,maxX??NaN]:[minY,maxY];if(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.HistogramSeries||seriesType===WebChartTypes$2.ComboLineAndBarSeries||seriesType===WebChartTypes$2.LineSeries&&stackedType===WebChartStackedKinds$2.Stacked&&xAxis===false){min=Math.min(dataMin,0);max=Math.max(dataMax,0)}else{min=dataMin;max=dataMax}}min=minimumFromConfig??min;max=maximumFromConfig??max;return{min,max}}function updateAxisMinMax(props){const{axis,minimumFromConfig,maximumFromConfig,bufferFromConfig,isLogarithmic,seriesType}=props;const buffer=bufferFromConfig??ChartDefaults.buffer;if(axis instanceof ValueAxis||axis instanceof DateAxis){const strictMinMax=updateAxisStrictMinMax({axis,buffer,isLogarithmic});if(strictMinMax===true){let newMin=minimumFromConfig;let newMax=maximumFromConfig;if(seriesType!==WebChartTypes$2.HistogramSeries&&axis.strictMinMax===true&&(Number.isFinite(minimumFromConfig)===false||Number.isFinite(maximumFromConfig)===false)){const minMaxFromData=getAxisMinMaxUsingData({axis,minimumFromConfig,maximumFromConfig,seriesType});newMin=minMaxFromData.min;newMax=minMaxFromData.max}newMin=newMin??NaN;newMax=newMax??NaN;if(Number.isNaN(newMin)===true||Number.isNaN(newMax)===true||newMin<newMax){axis.min=newMin;axis.max=newMax}else{axis.min=NaN;axis.max=NaN}if(seriesType===WebChartTypes$2.GaugeSeries)axis.validate()}else{axis.min=NaN;axis.max=NaN}}}function updateBaseInterval(axis,timeIntervalInfo){if(axis instanceof DateAxis){const{timeIntervalSize,timeIntervalUnits}=timeIntervalInfo??{};if(timeIntervalSize!==undefined&&timeIntervalUnits!==undefined){let timeUnit;const count=timeIntervalSize;switch(timeIntervalUnits){case WebChartTimeIntervalUnits$2.Seconds:timeUnit="second";break;case WebChartTimeIntervalUnits$2.Minutes:timeUnit="minute";break;case WebChartTimeIntervalUnits$2.Hours:timeUnit="hour";break;case WebChartTimeIntervalUnits$2.Days:timeUnit="day";break;case WebChartTimeIntervalUnits$2.Weeks:timeUnit="week";break;case WebChartTimeIntervalUnits$2.Months:timeUnit="month";break;case WebChartTimeIntervalUnits$2.Years:timeUnit="year";break}if(timeUnit!==undefined){axis.baseInterval={timeUnit,count}}}}}function updateAxisZeroLine(axis,displayZeroLine){if(axis instanceof ValueAxis)axis.renderer.baseGrid.disabled=displayZeroLine!==true}function updateAxisCursorTooltip(axis,displayCursorTooltip){axis.cursorTooltipEnabled=displayCursorTooltip===true}function updateAxisTitle(axis,title){const horizontalTitle=axis.renderer instanceof AxisRendererX;axis.events.once(EventTypes.Validated,(()=>{let titleDefaults=axis.renderer instanceof AxisRendererY?ChartDefaults.yAxisTitleLabel:ChartDefaults.xAxisTitleLabel;if(horizontalTitle===true){titleDefaults={...titleDefaults,dy:titleDefaults.dy??0}}updateLabel(axis.title,title,titleDefaults);autoAdjustLabelMaxWidthCallback({chart:axis.chart,label:axis.title,labelType:axis.renderer instanceof AxisRendererX?LabelType.XAxisTitle:LabelType.YAxisTitle})}))}function adjustValueAxisBoundsOnSeriesEvents(series){const callback=debounce((()=>{const{chart}=series;const chartConfig=getValueFromChartStorage(chart.uid,"config");if(chart!==undefined&&chartConfig!==undefined){const isRotated=getValueFromChartStorage(chart.uid,"isRotated");const stackedType=getValueFromSeriesStorage(series.uid,"stackedType");const isStacked100=stackedType===WebChartStackedKinds$2.Stacked100;if(isStacked100===true&&series.visible===false)showElement(series,false);const seriesType=getSeriesType$1(chartConfig?.series);const xAxis=chart.xAxes.getIndex(0);const xAxisConfigIndex=isRotated===true?1:0;const xAxisConfig=chartConfig.axes?.[xAxisConfigIndex];const yAxisConfigIndex=isRotated===true?0:1;const yAxisConfig=chartConfig.axes?.[yAxisConfigIndex];if(xAxis!==undefined){const{minimum:minimumFromConfig,maximum:maximumFromConfig,buffer:bufferFromConfig,isLogarithmic}=xAxisConfig??{};updateAxisMinMax({axis:xAxis,seriesType,minimumFromConfig,maximumFromConfig,bufferFromConfig,isLogarithmic})}const yAxis=chart.yAxes.getIndex(0);if(yAxis!==undefined){const{minimum:minimumFromConfig,maximum:maximumFromConfig,buffer:bufferFromConfig,isLogarithmic}=yAxisConfig??{};updateAxisMinMax({axis:yAxis,seriesType,minimumFromConfig,maximumFromConfig,bufferFromConfig,isLogarithmic});yAxis.events.once(EventTypes.Validated,(()=>{const{labelToRender}=findDataLabels(series,stackedType);if(labelToRender)labelToRender.html=isRotated===true?"{valueX}":"{valueY}"}))}}}),ChartDefaults.debounceTime);series.events.on(EventTypes.Validated,callback)}function updateAxisMaxPrecision(axis,axisConfig){if(axis instanceof ValueAxis){const{integerOnlyValues,valueFormat}=axisConfig;const{maximumFractionDigits}=valueFormat.intlOptions;axis.maxPrecision=integerOnlyValues===true||maximumFractionDigits===0?0:NaN}}async function updateAxis(props){const{axis,axisConfig,isNonAggregatedChart,timeIntervalInfo,seriesType,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,axisLabelsBehaviorChanged,guideTooltipFormatter,stackedType,axisValueFormatter,commonStrings}=props;const{visible,isLogarithmic,title,grid,lineSymbol,labels,guides,valueFormat,minimum:minimumFromConfig,maximum:maximumFromConfig,displayZeroLine,displayCursorTooltip,buffer:bufferFromConfig}=axisConfig;updateBaseInterval(axis,timeIntervalInfo);updateLineElements({element:axis.renderer.grid.template,lineSymbol:grid,visible});updateLineElements({element:axis.renderer.line,lineSymbol,visible});updateLineElements({element:axis.renderer.ticks.template,lineSymbol,visible});updateAxisLabel({axis,axisConfig,seriesType,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,axisLabelsBehaviorChanged});updateAxisMaxPrecision(axis,axisConfig);updateAxisMinGridDistance({axis,labelsConfig:labels,horizontalAxisLabelsBehavior});await updateAxisFormat({isNonAggregatedChart,axis,labelsTextSymbol:axisConfig.labels.content,formatOptions:valueFormat,overridePercentMultiplication:stackedType===WebChartStackedKinds$2.Stacked100,axisValueFormatter});if(seriesType===WebChartTypes$2.HistogramSeries||seriesType===WebChartTypes$2.GaugeSeries){updateAxisMinMax({axis,minimumFromConfig,maximumFromConfig,seriesType,bufferFromConfig,isLogarithmic})}updateGuidesArray({axis,guides,guideTooltipFormatter,commonStrings});updateAxisLogarithmic(axis,isLogarithmic);updateAxisTitle(axis,title);updateAxisZeroLine(axis,displayZeroLine);updateAxisCursorTooltip(axis,displayCursorTooltip)}async function updateXYChartAxes(props){const{chart,axes:axesConfig,rotationChanged,axisLabelsBehaviorChanged,isRotated,timeIntervalInfo,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings}=props;const isNonAggregatedChart=getValueFromChartStorage(chart.uid,"isNonAggregatedChart");const config=getValueFromChartStorage(chart.uid,"config");const{horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior}=config;const chartType=getSeriesType$1(config.series);const stackedType=getSeriesStackedType$1(config.series[0]);const horizontalAxisIndex=isRotated===true?1:0;const verticalAxisIndex=isRotated===true?0:1;let xAxis=chart.xAxes.getIndex(0);let yAxis=chart.yAxes.getIndex(0);const xAxisStart=xAxis.start;const xAxisEnd=xAxis.end;const yAxisStart=yAxis.start;const yAxisEnd=yAxis.end;const horizontalAxisValueFormat=axesConfig[horizontalAxisIndex].valueFormat;const verticalAxisValueFormat=axesConfig[verticalAxisIndex].valueFormat;const{forceCategoryOnHorizontalAxis,forceCategoryOnVerticalAxis}=shouldForceCategoryAxis({chartType,isRotated,horizontalAxisValueFormat,verticalAxisValueFormat});if(rotationChanged===true||isValueFormatTypeChanged(xAxis,horizontalAxisValueFormat)===true){initializeAxis({axes:chart.xAxes,valueFormat:horizontalAxisValueFormat,isNonAggregatedChart,forceCategoryAxis:forceCategoryOnHorizontalAxis})}if(rotationChanged===true||isValueFormatTypeChanged(yAxis,verticalAxisValueFormat)===true){initializeAxis({axes:chart.yAxes,valueFormat:verticalAxisValueFormat,isNonAggregatedChart,forceCategoryAxis:forceCategoryOnVerticalAxis})}xAxis=chart.xAxes.getIndex(0);yAxis=chart.yAxes.getIndex(0);await updateAxis({axis:xAxis,axisConfig:axesConfig[horizontalAxisIndex],isNonAggregatedChart,timeIntervalInfo,seriesType:chartType,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,axisLabelsBehaviorChanged,guideTooltipFormatter,stackedType,axisValueFormatter:horizontalAxisIndex===0?xAxisLabelFormatter:yAxisLabelFormatter,commonStrings});await updateAxis({axis:yAxis,axisConfig:axesConfig[verticalAxisIndex],isNonAggregatedChart,timeIntervalInfo,seriesType:chartType,horizontalAxisLabelsBehavior,verticalAxisLabelsBehavior,axisLabelsBehaviorChanged,guideTooltipFormatter,stackedType,axisValueFormatter:verticalAxisIndex===1?yAxisLabelFormatter:xAxisLabelFormatter,commonStrings});if(rotationChanged===true){xAxis.events.once(EventTypes.Validated,(()=>{setAxisZoom({axis:xAxis,start:yAxisStart,end:yAxisEnd})}));yAxis.events.once(EventTypes.Validated,(()=>{setAxisZoom({axis:yAxis,start:xAxisStart,end:xAxisEnd})}))}xAxis.ghostLabel.setPropertyValue("disabled",true);yAxis.ghostLabel.setPropertyValue("disabled",true)}function getCandleStickSeries(chart,candleStickSeriesId){const candlestickSeries=chart.series.values.find((s=>s.id===candleStickSeriesId));return candlestickSeries}function getStepLineSeries(chart,candleStickSeriesId){const topStepLineSeries=chart.series.values.find((s=>s.id===`${candleStickSeriesId}_${BoxPlotStepLineSeriesType.Top}`));const medianStepLineSeries=chart.series.values.find((s=>s.id===`${candleStickSeriesId}_${BoxPlotStepLineSeriesType.Median}`));const bottomStepLineSeries=chart.series.values.find((s=>s.id===`${candleStickSeriesId}_${BoxPlotStepLineSeriesType.Bottom}`));return{topStepLineSeries,medianStepLineSeries,bottomStepLineSeries}}function getOutliersSeries(chart,candleStickSeriesId){return chart.series.values.find((s=>s.id===`${candleStickSeriesId}_${BoxPlotStepLineSeriesType.Outliers}`))}function shouldShowSeriesOutliers(showOutliers,seriesVisibility){return(showOutliers??ChartDefaults.boxPlot.boxPlotOutliersVisibility)===true&&seriesVisibility!==false}function initializeCandleStickSeries(props){const{axisPair,chartConfig,seriesIndex,hideLoaderHandle,selectionTheme}=props;const seriesConfig=chartConfig.series[seriesIndex];const[xAxis,yAxis]=axisPair;const newCandleStickSeries=new CandlestickSeries;newCandleStickSeries.hoverable=true;attachLoaderHandle(newCandleStickSeries,hideLoaderHandle);newCandleStickSeries.id=seriesConfig.id;newCandleStickSeries.xAxis=xAxis;newCandleStickSeries.yAxis=yAxis;newCandleStickSeries.simplifiedProcessing=true;newCandleStickSeries.columns.template.applyOnClones=true;setSelectionTheme({element:newCandleStickSeries.columns.template,customSelectionTheme:selectionTheme});newCandleStickSeries.riseFromOpenState.reset();newCandleStickSeries.riseFromPreviousState.reset();newCandleStickSeries.dropFromOpenState.reset();newCandleStickSeries.dropFromPreviousState.reset();updateSeriesName(newCandleStickSeries,seriesConfig.name);adjustValueAxisBoundsOnSeriesEvents(newCandleStickSeries);setAccessibilityFeatures(newCandleStickSeries);return newCandleStickSeries}function initializeStepLineSeries(props){const{axisPair,chartConfig,seriesIndex,type,hideLoaderHandle,selectionTheme}=props;const seriesConfig=chartConfig.series[seriesIndex];const[xAxis,yAxis]=axisPair;const newStepLineSeries=new StepLineSeries;newStepLineSeries.hoverable=true;attachLoaderHandle(newStepLineSeries,hideLoaderHandle);newStepLineSeries.id=`${seriesConfig.id}_${type}`;newStepLineSeries.xAxis=xAxis;newStepLineSeries.yAxis=yAxis;newStepLineSeries.noRisers=true;newStepLineSeries.simplifiedProcessing=true;setSelectionTheme({element:newStepLineSeries.segments.template,customSelectionTheme:selectionTheme});newStepLineSeries.hiddenInLegend=true;setAccessibilityFeatures(newStepLineSeries);return newStepLineSeries}function initializeOutliersSeries(props){const{chart,axisPair,chartConfig,hideLoaderHandle,seriesIndex,selectionTheme}=props;const seriesConfig=chartConfig.series[seriesIndex];const[xAxis,yAxis]=axisPair;const newLineSeries=new LineSeries;attachLoaderHandle(newLineSeries,hideLoaderHandle);newLineSeries.id=`${seriesConfig.id}_${BoxPlotStepLineSeriesType.Outliers}`;newLineSeries.xAxis=xAxis;newLineSeries.yAxis=yAxis;newLineSeries.simplifiedProcessing=true;newLineSeries.hiddenInLegend=true;newLineSeries.strokeOpacity=0;const marker=initializeMarker({chart,lineSeries:newLineSeries});setSelectionTheme({element:marker,customSelectionTheme:selectionTheme});setAccessibilityFeatures(newLineSeries);return newLineSeries}function initializeBoxPlotSeries(props){const{chartConfig,seriesIndex}=props;const seriesConfig=chartConfig.series[seriesIndex];const chartSeries=[];const newCandleStickSeries=initializeCandleStickSeries(props);const topStepLineSeries=initializeStepLineSeries({...props,type:BoxPlotStepLineSeriesType.Top});const medianStepLineSeries=initializeStepLineSeries({...props,type:BoxPlotStepLineSeriesType.Median});const bottomStepLineSeries=initializeStepLineSeries({...props,type:BoxPlotStepLineSeriesType.Bottom});const outliersSeries=initializeOutliersSeries(props);newCandleStickSeries.events.once(EventTypes.Validated,(()=>{updateSeriesDataFields({seriesConfig,candleStickSeries:newCandleStickSeries,creation:true})}));initializeBoxPlotTooltip([newCandleStickSeries,outliersSeries]);chartSeries.push(...[newCandleStickSeries,topStepLineSeries,medianStepLineSeries,bottomStepLineSeries,outliersSeries]);return chartSeries}function updateStepLinesSeriesStyle(props){const{candleStickSeries,seriesConfig,stylingInfo,chartSubType,rendererType}=props;if(stylingInfo!==undefined){const newStyleInfo={...stylingInfo};const useDefaultWhiskerColor=shouldUpdateWhiskersWithDefaultColor({chartData:candleStickSeries.chart.data,colorType:seriesConfig.colorType,chartSubType,rendererType});if(stylingInfo?.outline!==undefined&&useDefaultWhiskerColor===true){newStyleInfo.outline.stroke=color(ChartDefaults.boxPlot.boxPlotWhiskersColor,reducedOpacity$1)}const{topStepLineSeries,medianStepLineSeries,bottomStepLineSeries}=getStepLineSeries(candleStickSeries.chart,candleStickSeries.id);if(topStepLineSeries!==undefined&&medianStepLineSeries!==undefined&&bottomStepLineSeries!==undefined&&newStyleInfo.outline!==undefined){newStyleInfo.outline.strokeWidth=ChartDefaults.boxPlot.boxPlotLineWidth;setOutlineProperties(topStepLineSeries,newStyleInfo.outline);setOutlineProperties(medianStepLineSeries,newStyleInfo.outline);setOutlineProperties(bottomStepLineSeries,newStyleInfo.outline);const candleStickSeriesVisible=seriesConfig.visible!==false;showElement(topStepLineSeries,candleStickSeriesVisible);showElement(medianStepLineSeries,candleStickSeriesVisible);showElement(bottomStepLineSeries,candleStickSeriesVisible)}}}function updateOutliersSeriesStyle(props){const{candleStickSeries,seriesConfig,showOutliers,seriesSymbol,multipleColorsToApply}=props;if(seriesSymbol!==undefined){const outliersSeries=getOutliersSeries(candleStickSeries.chart,candleStickSeries.id);if(outliersSeries!==undefined){const outliersMarkers=findBulletMarker(outliersSeries);if(outliersMarkers!==undefined){const showSeriesOutliers=shouldShowSeriesOutliers(showOutliers,seriesConfig.visible);const outliersSymbol={type:RESTSymbolType$1.SMS,style:RESTSimpleMarkerSymbolStyle.Circle,color:seriesSymbol.color,size:ChartDefaults.boxPlot.boxPlotOutliersSize};if(multipleColorsToApply!==true){updateMarkerElements({element:outliersMarkers,markerSymbol:outliersSymbol,visible:showSeriesOutliers})}else{outliersMarkers.clones.each((markerClone=>{const boxColor=candleStickSeries.dataItems.values.find((candleDataItem=>(candleDataItem.categories.categoryX??candleDataItem.categories.categoryY)===(markerClone.dataItem?.categories.categoryX??markerClone.dataItem?.categories.categoryY)))?.column.fill;updateMarkerElements({element:markerClone,markerSymbol:{...outliersSymbol,color:amChartsColorToEsriColor(boxColor)??outliersSymbol.color},visible:showSeriesOutliers})}))}}}}}function updateCandleStickSeriesStyle(props){const{series,seriesConfig,seriesIndex,numberOfSeries,dataSource,chartSubType,rendererType,multipleColorsToApply}=props;let boxSymbol;let stylingInfo;let result;const modifiedConfigFillSymbol=seriesConfig.fillSymbol??getDefaultBoxPlotElementSymbol(seriesIndex);if(series.columns.length===0){result=updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:modifiedConfigFillSymbol,element:new Sprite,isChartFillSymbol:true});boxSymbol=result.symbolWithColorInfo;stylingInfo=result.stylingInfo}else{if(multipleColorsToApply===true){series.columns.each((column=>{result=updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:modifiedConfigFillSymbol,element:column,isChartFillSymbol:true,rendererSymbol:getRendererElementSymbol({dataItem:column.dataItem?.dataContext,seriesConfig,chartSubType,rendererType})});boxSymbol=result.symbolWithColorInfo;stylingInfo=result.stylingInfo}))}else{result=updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:modifiedConfigFillSymbol,element:series.columns.template,isChartFillSymbol:true,rendererSymbol:getRendererElementSymbol({dataItem:series.chart.data[0],seriesConfig,chartSubType,rendererType})});boxSymbol=result.symbolWithColorInfo;stylingInfo=result.stylingInfo}}if(numberOfSeries>1){if(multipleColorsToApply===false){const legendMarker=series.legendDataItem?.marker.children.getIndex(0);if(legendMarker!==undefined){updateElementStateFillProperties(legendMarker,stylingInfo)}else{series.chart.legend.events.once(EventTypes.Validated,(()=>{updateElementStateFillProperties(series.legendDataItem?.marker.children.getIndex(0),stylingInfo);series.chart.legend.invalidate()}))}}else{updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:modifiedConfigFillSymbol,element:series.columns.template,isChartFillSymbol:true})}}return{seriesSymbol:boxSymbol,stylingInfo}}function shouldUpdateWhiskersWithDefaultColor(props){const{chartData,colorType,chartSubType,rendererType}=props;return colorType===WebChartColoringPatterns$1.Match&&rendererType!==undefined&&(chartSubType===ChartSubType$1.BoxPlotMultiFields&&(rendererType===RESTRendererType$2.UniqueValue||rendererType===RESTRendererType$2.PieChart)||chartSubType===ChartSubType$1.BoxPlotMonoFieldAndCategory&&rendererType===RESTRendererType$2.UniqueValue)&&chartData.some((dataItem=>Object.keys(dataItem).some((dataItemProp=>dataItemProp.includes(ChartDefaults.rendererSymbolField)===true))))}function updateSeriesStyle$2(props){const{queryObject,series,dataSource,showOutliers,seriesIndex,seriesSymbolMapForEvent,seriesConfig}=props;const chartConfig=getValueFromChartStorage(series.chart.uid,"config");const numberOfSeries=chartConfig?.series.length??0;const chartSubType=getChartSubType$1(chartConfig?.series);const featureLayer=getLayerFromQueryObject$1(queryObject);const{rendererType}=getRendererInfo$1(featureLayer.renderer);const multipleColorsToApply=isStylingIndividualSpriteNeeded({chartData:series.chart?.data??[],chartConfig,queryObject});const{seriesSymbol,stylingInfo}=updateCandleStickSeriesStyle({series,seriesConfig,seriesIndex,numberOfSeries,dataSource,chartSubType,rendererType,multipleColorsToApply});updateStepLinesSeriesStyle({candleStickSeries:series,seriesConfig,stylingInfo,chartSubType,rendererType});updateOutliersSeriesStyle({candleStickSeries:series,seriesConfig,showOutliers,seriesSymbol,multipleColorsToApply});seriesSymbolMapForEvent.set(seriesIndex,multipleColorsToApply===true?undefined:seriesSymbol);if(seriesSymbolMapForEvent.size===numberOfSeries){notifySeriesColorsChange({data:seriesSymbolMapForEvent,htmlContainer:series.chart.htmlContainer,chartId:series.chart.id})}}function updateSeriesLocation(numberOfSeries,chart){const isRotated=isChartRotated({chart});const axisRenderer=isRotated===true?chart.yAxes.getIndex(0)?.renderer:chart.xAxes.getIndex(0)?.renderer;if(axisRenderer!==undefined){const{cellStartLocation,cellEndLocation}=axisRenderer;const step=cellStartLocation/numberOfSeries;const candlestickSeries=chart.series.values.filter((s=>s instanceof CandlestickSeries));candlestickSeries.forEach(((candleSeries,candleSeriesIndex)=>{const startLocation=cellStartLocation+candleSeriesIndex/candlestickSeries.length*(cellEndLocation-cellStartLocation)+step;const endLocation=cellStartLocation+(candleSeriesIndex+1)/candlestickSeries.length*(cellEndLocation-cellStartLocation)-step;const{topStepLineSeries,medianStepLineSeries,bottomStepLineSeries}=getStepLineSeries(chart,candleSeries.id);if(topStepLineSeries!==undefined){topStepLineSeries.startLocation=startLocation;topStepLineSeries.endLocation=endLocation}if(medianStepLineSeries!==undefined){medianStepLineSeries.startLocation=startLocation;medianStepLineSeries.endLocation=endLocation}if(bottomStepLineSeries!==undefined){bottomStepLineSeries.startLocation=startLocation;bottomStepLineSeries.endLocation=endLocation}const outlierSeries=getOutliersSeries(chart,candleSeries.id);if(outlierSeries!==undefined){const location=(startLocation+endLocation)/2;if(isRotated===true){outlierSeries.dataItems.template.locations.categoryY=location}else{outlierSeries.dataItems.template.locations.categoryX=location}}}))}}function updateOutliersSeriesData(props){const{outliersSeries,chartData,dataWasUpdated,rotationChanged}=props;if(rotationChanged===true||dataWasUpdated===true){outliersSeries.data=chartData?.outliers??[]}}function updateOutliersSeries(props){const{chart,seriesConfig,chartData,candleStickSeriesId,showOutliers,dataWasUpdated,rotationChanged}=props;const outliersSeries=getOutliersSeries(chart,candleStickSeriesId);if(outliersSeries!==undefined){const outliersMarkers=findBulletMarker(outliersSeries);if(outliersMarkers!==undefined){const showSeriesOutliers=shouldShowSeriesOutliers(showOutliers,seriesConfig.visible);outliersMarkers.disabled=showSeriesOutliers===false;updateOutliersSeriesData({outliersSeries,chartData,dataWasUpdated,rotationChanged})}}}function updateSeriesDataFields(props){const{seriesConfig,candleStickSeries,creation=false,rotationChanged,outliersVisibilityChanged,standardizeValuesVisibilityChanged}=props;const{x,y}=seriesConfig;const commonCriteria=creation===true||rotationChanged===true||standardizeValuesVisibilityChanged===true;const updateCandleStickSeriesDataFields=commonCriteria===true||outliersVisibilityChanged===true;const updateStepLineSeriesDataFields=commonCriteria===true||outliersVisibilityChanged===true;const updateOutlierSeriesDataFields=commonCriteria==true;const{chart}=candleStickSeries;const chartConfig=getValueFromChartStorage(chart?.uid,"config");if(chartConfig!==undefined){let outliersSeries;const{series,showOutliers,standardizeValues}=chartConfig;const isRotated=isChartRotated({config:chartConfig});const chartSubType=getChartSubType$1(series);const splitBy=seriesConfig?.query?.where;const getBoxPlotYValueProps={y:chartSubType===ChartSubType$1.BoxPlotMultiFieldsAndCategory?y:undefined,chartSubType,splitBy,showOutliers,standardizeValues:isMultiFieldsBoxPlot$1(chartSubType)===true?standardizeValues:false};if(updateCandleStickSeriesDataFields===true){const lowValue=getBoxPlotYValue$1({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys$1.Min});const openValue=getBoxPlotYValue$1({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys$1.FirstQuartile});const highValue=getBoxPlotYValue$1({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys$1.Max});const value=getBoxPlotYValue$1({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys$1.ThirdQuartile});if(isRotated===true){candleStickSeries.dataFields.lowValueX=lowValue;candleStickSeries.dataFields.openValueX=openValue;candleStickSeries.dataFields.highValueX=highValue;candleStickSeries.dataFields.valueX=value;candleStickSeries.dataFields.categoryY=x}else{candleStickSeries.dataFields.lowValueY=lowValue;candleStickSeries.dataFields.openValueY=openValue;candleStickSeries.dataFields.highValueY=highValue;candleStickSeries.dataFields.valueY=value;candleStickSeries.dataFields.categoryX=x}candleStickSeries.dataFields.customValue=splitBy}if(updateStepLineSeriesDataFields===true){const{topStepLineSeries,medianStepLineSeries,bottomStepLineSeries}=getStepLineSeries(candleStickSeries.chart,candleStickSeries.id);if(topStepLineSeries!==undefined&&medianStepLineSeries!==undefined&&bottomStepLineSeries!==undefined){const topStepLineSeriesValue=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.Max,...getBoxPlotYValueProps});const medianStepLineSeriesValue=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.Median,...getBoxPlotYValueProps});const bottomStepLineSeriesValue=getBoxPlotYValue$1({key:BoxPlotYFieldKeys$1.Min,...getBoxPlotYValueProps});if(isRotated===true){topStepLineSeries.dataFields.valueX=topStepLineSeriesValue;medianStepLineSeries.dataFields.valueX=medianStepLineSeriesValue;bottomStepLineSeries.dataFields.valueX=bottomStepLineSeriesValue;topStepLineSeries.dataFields.categoryY=x;medianStepLineSeries.dataFields.categoryY=x;bottomStepLineSeries.dataFields.categoryY=x}else{topStepLineSeries.dataFields.valueY=topStepLineSeriesValue;medianStepLineSeries.dataFields.valueY=medianStepLineSeriesValue;bottomStepLineSeries.dataFields.valueY=bottomStepLineSeriesValue;topStepLineSeries.dataFields.categoryX=x;medianStepLineSeries.dataFields.categoryX=x;bottomStepLineSeries.dataFields.categoryX=x}topStepLineSeries.dataFields.customValue=splitBy;bottomStepLineSeries.dataFields.customValue=splitBy;medianStepLineSeries.dataFields.customValue=splitBy}}if(updateOutlierSeriesDataFields===true){outliersSeries=getOutliersSeries(chart,candleStickSeries.id);if(outliersSeries!==undefined){const outlierProp=getBoxPlotYValue$1({...getBoxPlotYValueProps,key:BoxPlotYFieldKeys$1.Outlier});if(isRotated===true){outliersSeries.dataFields.valueX=outlierProp;outliersSeries.dataFields.categoryY=x}else{outliersSeries.dataFields.valueY=outlierProp;outliersSeries.dataFields.categoryX=x}}}if(updateCandleStickSeriesDataFields===true||updateStepLineSeriesDataFields===true)chart.invalidateRawData();if(updateOutlierSeriesDataFields===true&&outliersSeries!==undefined)outliersSeries.invalidateData()}}function updateBoxPlotSeries(props){const{chart,chartData,commonStrings,dataWasUpdated,fieldList,outliersVisibilityChanged,series:candleStickSeries,series,seriesConfig,showOutliers,standardizeValuesVisibilityChanged,rotationChanged}=props;updateSeriesDataFields({seriesConfig,candleStickSeries:series,outliersVisibilityChanged,standardizeValuesVisibilityChanged,rotationChanged});updateSeriesLocation(props.numberOfSeries,chart);updateOutliersSeries({chart,seriesConfig,chartData,showOutliers,candleStickSeriesId:series.id,dataWasUpdated,rotationChanged});addSeriesStylingCallback({styleCallback:updateSeriesStyle$2,callbackProps:props,series:candleStickSeries,seriesConfig,onReadyEvent:true});updateBoxPlotTooltip({series:candleStickSeries,seriesConfig,fieldList,commonStrings});updateSeriesName(candleStickSeries,seriesConfig?.name)}function whetherSelectionAppliedToAllTheSeries(chart,chartType){const selectionAppliedToAll=(chart.series?.values).filter((chartSeries=>getValueFromSeriesStorage(chartSeries.uid,"isOverlay")!==true&&(chartType!==WebChartTypes$2.BoxPlotSeries||chartSeries instanceof CandlestickSeries))).every((chartSeries=>getValueFromSeriesStorage(chartSeries.uid,"isSelectionApplied")===true));return selectionAppliedToAll}function resetSeriesSelectionFlag(chart){chart.series.each((chartSeries=>updateSeriesStorage(chartSeries.uid,{isSelectionApplied:undefined})))}function applySelectionToElements(chart,elementsToSelect){const actionMode=getValueFromChartStorage(chart.uid,"actionMode");const needsToClearSelection=(actionMode===ActionModes$1.MonoSelection||actionMode===ActionModes$1.None)&&elementsToSelect.length>1;if(needsToClearSelection===true){clearSelection({chart})}else{const useNativeState=chart instanceof PieChart;elementsToSelect.forEach((element=>{toggleStateForElement({element,useNativeState,selected:true})}))}}function applySelectionToElementsFromItems(props){const{chart,chartConfig,series,options,elementsToApplySelectionTo,selectionDataItems,layerOidField,xAxisField,yAxisField}=props;const chartType=getSeriesType$1(chartConfig.series);const chartSubType=getChartSubType$1(chartConfig.series);const{showOutliers}=chartConfig;const elementsToSelect=[];const selectedIndexes=[];const newSelectionDataItems=[];const yList=getYList$1(chartConfig.series);const splitBy=series instanceof XYSeries?series.dataFields?.customValue??"":"";elementsToApplySelectionTo.forEach((element=>{if(element instanceof LegendDataItem===false){let matchingDataContext=element.dataItem?.dataContext;if(matchingDataContext!==undefined&&chartType===WebChartTypes$2.BoxPlotSeries&&matchingDataContext[ChartDefaults.boxPlot.boxPlotOutlierId]!==true){matchingDataContext=getSelectedElementData({dataContext:matchingDataContext,yAxisField,yList,xAxisField,splitBy,chartType,chartSubType,showOutliers})}const{isPartOfIt,selectedDataContext}=isElementPartOfSelection({elementDataContext:matchingDataContext,options,selectionDataItems,layerOidField,xAxisField,yAxisField,splitBy,chartType,chartSubType,showOutliers});matchingDataContext=selectedDataContext;if(isPartOfIt===true){elementsToSelect.push(element);if(element.dataItem!==undefined)selectedIndexes.push(element.dataItem?.index);let selectedElementData;if(element?.dataItem instanceof LineSeriesDataItem){selectedElementData=element.dataItem.dataContext}else{selectedElementData=getSelectedElementData({dataContext:matchingDataContext,yAxisField,yList,xAxisField,splitBy,chartType,chartSubType,showOutliers})}if(selectedElementData!==undefined)newSelectionDataItems.push(selectedElementData)}else{toggleStateForElement({element,useNativeState:chart instanceof PieChart,selected:false})}}}));applySelectionToElements(chart,elementsToSelect);return{selectedIndexes,newSelectionDataItems}}function applySelectionToElementsFromIndexes(chart,selectionIndexes){const selectedDataItems=[];const elementsToSelect=[];const config=getValueFromChartStorage(chart.uid,"config");const{showOutliers}=config;const yList=getYList$1(config?.series??[]);const chartSubType=getChartSubType$1(config?.series);chart.series.each(((currentSeries,seriesIndex)=>{if(currentSeries.visible===true&&getValueFromSeriesStorage(currentSeries.uid,"isOverlay")!==true){const xAxisField=config?.series[0].x;const yAxisField=getYFieldFromSeriesDataFields(currentSeries);const splitBy=currentSeries instanceof XYSeries?currentSeries.dataFields?.customValue??"":"";const seriesType=getSeriesTypeFromAMChartsSeries(currentSeries,seriesIndex);const seriesIndexes=selectionIndexes.get(seriesIndex);if(seriesIndexes!==undefined){let elements;if(currentSeries instanceof ColumnSeries)elements=currentSeries.columns;else if(currentSeries instanceof PieSeries)elements=currentSeries.slices;else elements=findBulletMarker(currentSeries)?.clones;if(elements!==undefined){const{indexesToSelect}=seriesIndexes;elements.each(((element,elementIndex)=>{if(indexesToSelect===undefined||indexesToSelect.includes(elementIndex)){let selectedElementData;if(seriesType===WebChartTypes$2.BoxPlotSeries&&element?.dataItem instanceof LineSeriesDataItem){selectedElementData=element.dataItem.dataContext}else{selectedElementData=getSelectedElementData({dataContext:element.dataItem?.dataContext,yList,yAxisField,xAxisField,splitBy,chartType:seriesType,chartSubType,showOutliers})}if(selectedElementData!==undefined)selectedDataItems.push(selectedElementData);elementsToSelect.push(element)}else{toggleStateForElement({element,useNativeState:chart instanceof PieChart,selected:false})}}))}}}}));applySelectionToElements(chart,elementsToSelect);return selectedDataItems}function applySelectionOnSeries(props){const{series,seriesIndex,queryObject,options,dataWasUpdated,sortChanged,groupOfSlicesWasUpdated,xAxisField,yAxisField,rotationChanged}=props;const{filterBySelection,selectionData,returnSelectionIndexes,returnSelectionOIDs}=options??{};const{selectionIndexes}=selectionData??{};const{chart}=series;const chartConfig=getValueFromChartStorage(chart.uid,"config");const showOutliers=chartConfig?.showOutliers;const chartType=getSeriesType$1(chartConfig?.series);const elementsToApplySelectionTo=getElementsForSelection(series,chartType);if(filterBySelection!==true&&elementsToApplySelectionTo?.[0]!==undefined&&chartConfig!==undefined){const chartSubType=getChartSubType$1(chartConfig?.series);let layerOidField;if(queryObject!==undefined){const layer=getLayerFromQueryObject$1(queryObject);layerOidField=layer.objectIdField}const currentSelectionDataItems=getValueFromChartStorage(chart.uid,"currentSelectionDataItems");let selectionByItemsNeedsToBeApplied=false;let selectionByIndexesNeedsToBeApplied=false;let selectionDataItems;let selectionByItemsChanged=false;if(options?.viewExtentUpdated!==true){selectionDataItems=options?.selectionData?.selectionItems??currentSelectionDataItems;const currentSelectionIndexes=getValueFromChartStorage(chart.uid,"currentSelectionIndexes");selectionByItemsChanged=hasSelectionByItemsChanged({itemsA:selectionDataItems,itemsB:currentSelectionDataItems,x:chartConfig.series[0].x});const selectionByIndexesChanged=isEqual$1(selectionIndexes,currentSelectionIndexes)===false;selectionByItemsNeedsToBeApplied=sortChanged===true||dataWasUpdated===true||groupOfSlicesWasUpdated===true||rotationChanged===true||selectionDataItems!==undefined&&selectionByItemsChanged===true;let emptySelectionIndexes=true;if(selectionIndexes!==undefined&&selectionIndexes.size>0){const{indexesToSelect}=selectionIndexes.get(seriesIndex??0)??{};emptySelectionIndexes=indexesToSelect!==undefined&&indexesToSelect[0]===undefined}selectionByIndexesNeedsToBeApplied=dataWasUpdated===true||groupOfSlicesWasUpdated===true||rotationChanged===true||emptySelectionIndexes===false&&selectionByIndexesChanged===true}if(selectionByItemsNeedsToBeApplied===true&&selectionDataItems!==undefined&&selectionDataItems.length>0){const{selectedIndexes,newSelectionDataItems}=applySelectionToElementsFromItems({chart,chartConfig,options,series,elementsToApplySelectionTo,selectionDataItems,layerOidField,xAxisField,yAxisField});const computedSelectionDataItems=getValueFromChartStorage(chart.uid,"computedSelectionDataItems")??[];computedSelectionDataItems.push(...newSelectionDataItems);updateChartStorage(chart.uid,{computedSelectionDataItems});if(returnSelectionIndexes===true){const seriesComputedSelectionIndexes=Array.from(new Set(selectedIndexes));let computedSelectionIndexes=getValueFromChartStorage(chart.uid,"computedSelectionIndexes");if(computedSelectionIndexes===undefined)computedSelectionIndexes=new Map;if(seriesComputedSelectionIndexes.length===elementsToApplySelectionTo.length){computedSelectionIndexes.set(seriesIndex??0,{})}else{computedSelectionIndexes.set(seriesIndex??0,{indexesToSelect:seriesComputedSelectionIndexes})}updateChartStorage(chart.uid,{computedSelectionIndexes})}}else if(selectionIndexes!==undefined&&selectionByIndexesNeedsToBeApplied===true){selectionDataItems=applySelectionToElementsFromIndexes(chart,selectionIndexes)}else{const backToDefaultState=selectionDataItems===undefined||selectionDataItems.length===0;const splitBy=series instanceof XYSeries?series.dataFields?.customValue??"":"";const isElementPartOfSelectionCallback=element=>{let elementDataContext=element.dataItem?.dataContext;if(elementDataContext!==undefined&&chartType===WebChartTypes$2.BoxPlotSeries&&elementDataContext[ChartDefaults.boxPlot.boxPlotOutlierId]!==true){elementDataContext=getSelectedElementData({dataContext:elementDataContext,yAxisField,yList:getYList$1(chartConfig.series),xAxisField,splitBy,chartType,chartSubType,showOutliers})}const{isPartOfIt}=isElementPartOfSelection({elementDataContext,options,selectionDataItems:selectionDataItems??currentSelectionDataItems??[],layerOidField,xAxisField,yAxisField,chartType,chartSubType,splitBy,showOutliers});return isPartOfIt};elementsToApplySelectionTo.forEach((element=>{const selected=element.isActive===true||isElementPartOfSelectionCallback(element)===true;toggleStateForElement({element,selected,useNativeState:chart instanceof PieChart,backToDefaultState})}))}updateSeriesStorage(series.uid,{isSelectionApplied:true});if(whetherSelectionAppliedToAllTheSeries(chart,chartType)===true){resetSeriesSelectionFlag(chart);if(selectionByItemsChanged===true||selectionByIndexesNeedsToBeApplied===true){const updateSelectionDataItems=getValueFromChartStorage(chart.uid,"computedSelectionDataItems")??selectionDataItems;if(selectionDataItems!==undefined){updateChartStorage(chart.uid,{currentSelectionDataItems:updateSelectionDataItems})}if(selectionData?.selectionOIDs!==undefined)updateChartStorage(chart.uid,{currentSelectionOIDs:selectionData.selectionOIDs});let updatedSelectionIndex;if(returnSelectionIndexes===true){updatedSelectionIndex=getValueFromChartStorage(chart.uid,"computedSelectionIndexes")??selectionIndexes;if(updatedSelectionIndex!==undefined){updateChartStorage(chart.uid,{currentSelectionIndexes:updatedSelectionIndex})}}if(selectionDataItems===undefined||selectionDataItems.length===0){clearSelection({chart,selectionSource:SelectionSource.ProgrammaticSelection})}else{const selectionPayload={selectionItems:updateSelectionDataItems,selectionSource:SelectionSource.ProgrammaticSelection};if(returnSelectionIndexes===true)selectionPayload.selectionIndexes=updatedSelectionIndex;if(returnSelectionOIDs!==false)selectionPayload.selectionOIDs=selectionData?.selectionOIDs??getValueFromChartStorage(chart.uid,"currentSelectionOIDs");notifySelectionCompleted({data:selectionPayload,seriesConfig:chartConfig.series,htmlContainer:chart.htmlContainer})}updateChartStorage(chart.uid,{computedSelectionIndexes:undefined,computedSelectionDataItems:undefined})}}}}function getElementsForSelection(series,seriesType){let elementsToApplySelectionTo;switch(seriesType){case WebChartTypes$2.BarSeries:case WebChartTypes$2.HistogramSeries:elementsToApplySelectionTo=series.columns.values;break;case WebChartTypes$2.LineSeries:case WebChartTypes$2.ScatterSeries:{const marker=findBulletMarker(series);if(marker!==undefined)elementsToApplySelectionTo=marker.clones.values}break;case WebChartTypes$2.PieSeries:elementsToApplySelectionTo=series.slices.values;break;case WebChartTypes$2.BoxPlotSeries:{elementsToApplySelectionTo=[...series.columns.values];const outliersSeries=getOutliersSeries(series.chart,series.id);if(outliersSeries!==undefined&&outliersSeries.visible===true){const outliersMarkers=findBulletMarker(outliersSeries);if(outliersMarkers!==undefined){elementsToApplySelectionTo.push(...outliersMarkers.clones.values)}}}break}return elementsToApplySelectionTo}async function applySelectionOnChart(props){const{chart,options,dataWasUpdated,chartData,chartConfig,queryObject,rotationChanged}=props;const currentSelectionOIDs=getValueFromChartStorage(chart.uid,"currentSelectionOIDs");const queryConfig=getValueFromChartStorage(chart.uid,"queryConfig");const{series:seriesConfig}=chartConfig;const selectionDataItems=await getSelectionItemsFromOIDs({chartConfig,queryConfig,chartData,currentSelectionOIDs,dataWasUpdated,queryObject,options});if(selectionDataItems!==undefined&&options!==undefined){options.selectionData={...options?.selectionData,selectionItems:selectionDataItems}}for(let seriesIndex=0;seriesIndex<seriesConfig.length;seriesIndex+=1){let series=chart.series.getIndex(seriesIndex);const currentSeriesConfig=seriesConfig[seriesIndex];const seriesType=getSeriesType$1([currentSeriesConfig]);if(seriesType===WebChartTypes$2.ScatterSeries){series=chart.series.values.find((s=>getValueFromSeriesStorage(s.uid,"isOverlay")!==true))}else if(seriesType===WebChartTypes$2.BoxPlotSeries){series=chart.series.values.find((s=>s.id===currentSeriesConfig.id))}if(series!==undefined){const xAxisField=seriesType===WebChartTypes$2.PieSeries?getXFieldFromSeriesDataFields(series):currentSeriesConfig.x;const yAxisField=seriesType===WebChartTypes$2.BoxPlotSeries?`${currentSeriesConfig.y}`:getYFieldFromSeriesDataFields(series);addSelectionCallback({callbackProps:{...props,series,seriesIndex,xAxisField,yAxisField},series,seriesConfig:currentSeriesConfig,onReadyEvent:rotationChanged===true})}}}async function applySelection(props){const{chart,listSelectedElements,selectionSource}=props;const options=getValueFromChartStorage(chart.uid,"options");const config=getValueFromChartStorage(chart.uid,"config");const queryObject=getValueFromChartStorage(chart.uid,"queryObject");if(listSelectedElements.length===0){clearSelection({chart,selectionSource,clearOnlyVisibleSeries:false,disposeStyleAndSelection:false})}else{try{disposeStyleOrSelectionCallback(chart,"updateSelectionCallbackDisposer");const{showOutliers}=config;const whereList=[];const currentSelectionDataItems=[];let currentSelectionOIDs=[];const currentSelectionIndexes=new Map;const{xAxisField}=listSelectedElements[0]??{};const chartSubType=getChartSubType$1(config?.series);const yList=getYList$1(config?.series??[]);const isDateAxis=isDateXAxis(chart);let isXAxisFieldDouble=false;if(queryObject!==undefined){const layerFields=await fetchLayerFieldsInfo$1(queryObject);isXAxisFieldDouble=layerFields.find((field=>field.name===xAxisField))?.type===RESTFieldType$2.Double}listSelectedElements.forEach((elementParams=>{const{elementDataContext,yAxisField,chartType,splitBy,dataTransformationType}=elementParams;let selectedElementData;selectedElementData=getSelectedElementData({dataContext:elementDataContext,yAxisField,yList,xAxisField,splitBy,chartType,chartSubType,showOutliers});if(selectedElementData!==undefined)currentSelectionDataItems.push(selectedElementData);const{seriesIndex,elementIndex}=elementParams;if(elementIndex!==undefined){const seriesSelectedIndex=currentSelectionIndexes.get(seriesIndex)?.indexesToSelect??[];seriesSelectedIndex.push(elementIndex);currentSelectionIndexes.set(seriesIndex,{indexesToSelect:Array.from(new Set(seriesSelectedIndex))})}if(elementDataContext!==undefined){const existingOIDs=elementDataContext[queryDefaults$1.uniqueIdsName]!==undefined?[elementDataContext[queryDefaults$1.uniqueIdsName]].flat():[];if(existingOIDs.length>0){currentSelectionOIDs.push(...existingOIDs)}else if(options?.returnSelectionOIDs!==false&&config?.dataSource?.type!==WebChartDataSourceTypes$1.Inline){const where=buildSelectionFilterForOneElement({chartType,dataContext:elementDataContext,options,xAxisField,yAxisField:yAxisField??"",splitBy,dataTransformationType,isDateAxis,isXAxisFieldDouble,chartSubType,showOutliers:config?.showOutliers});whereList.push(where)}}}));if(options?.returnSelectionOIDs!==false&&queryObject!==undefined&&whereList.length>0){const queryConfig=getValueFromChartStorage(chart.uid,"queryConfig");const modifiedQueryConfig={...queryConfig};delete modifiedQueryConfig.groupByFieldsForStatistics;delete modifiedQueryConfig.orderByFields;delete modifiedQueryConfig.outStatistics;const fetchedOIDs=await fetchOIDsFromWhereClause({whereList,queryObject,queryConfig:modifiedQueryConfig});if(whereList.length===listSelectedElements.length){currentSelectionOIDs=fetchedOIDs}else for(let i=0;i<fetchedOIDs.length;i+=1){currentSelectionOIDs.push(fetchedOIDs[i])}}updateChartStorage(chart.uid,{currentSelectionDataItems,currentSelectionOIDs,currentSelectionIndexes});const selectionPayload={selectionItems:currentSelectionDataItems,selectionSource};if(options?.returnSelectionIndexes===true)selectionPayload.selectionIndexes=currentSelectionIndexes;if(options?.returnSelectionOIDs!==false)selectionPayload.selectionOIDs=currentSelectionOIDs;notifySelectionCompleted({data:selectionPayload,seriesConfig:config?.series,htmlContainer:chart.htmlContainer})}catch(e){updateChartStorage(chart.uid,{pendingSelectionQueries:false});const{httpStatus}=e instanceof ArcgisChartsError$1?e.details?.details:e.details??{};if(httpStatus===429){handleFailedSelection(chart)}else{throw e}}}updateChartStorage(chart.uid,{pendingSelectionQueries:false})}function getXAxisDataFieldName(axis,isRotated){let field;if(axis instanceof DateAxis)field=isRotated===true?"dateY":"dateX";else if(axis instanceof CategoryAxis)field=isRotated===true?"categoryY":"categoryX";else field=isRotated===true?"valueY":"valueX";return field}function updateSeriesName(series,seriesName){series.name=seriesName}function updateScatterPlotAndHistogramTooltipFormatter(props){const{axes,currentSeries,tooltipValueFormat}=props;const yAxisValueFormat=axes[1].valueFormat;const xAxisValueFormat=axes[0].valueFormat;const formatLocale=getValueFromChartStorage(currentSeries.chart.uid,"formatLocale");if(yAxisValueFormat?.type===WebChartTypes$2.NumberAxisFormat){const numberFormatter=getFormatter({type:yAxisValueFormat.type,iLocale:currentSeries.chart.language.locale,formatLocale});numberFormatter.numberFormat=yAxisValueFormat.intlOptions;updateSeriesStorage(currentSeries.uid,{tooltipValueYNumberFormatCallback:valueY=>numberFormatter.format(valueY,tooltipValueFormat?.intlOptions)})}if(xAxisValueFormat?.type===WebChartTypes$2.NumberAxisFormat){const numberFormatter=getFormatter({type:xAxisValueFormat.type,iLocale:currentSeries.chart.language.locale,formatLocale});numberFormatter.numberFormat=xAxisValueFormat.intlOptions;updateSeriesStorage(currentSeries.uid,{tooltipValueXNumberFormatCallback:valueX=>numberFormatter.format(valueX,tooltipValueFormat?.intlOptions)})}}function initializeMarker(props){const{chart,lineSeries,applyPropertiesToClones}=props;const marker=lineSeries.bullets.push(new Sprite);updateMarkerStorage(marker.uid,{isBulletMarker:true});if(applyPropertiesToClones!==false)marker.applyOnClones=true;lineSeries.bulletsContainer.parent=chart.seriesContainer;return marker}function updateSeriesStackedType(props){const{series,seriesConfig,rotationChanged,isRotated}=props;switch(seriesConfig.stackedType){case WebChartStackedKinds$2.Stacked:{series.stacked=true;if(series instanceof LineSeries){series.stackToNegative=seriesConfig.stackNegativeValuesToBaseline??ChartDefaults.lineSeries.stackNegativeValuesToBaseline}if(rotationChanged===isRotated)series.dataFields.valueYShow=undefined;else series.dataFields.valueXShow=undefined;series.updateStacking();break}case WebChartStackedKinds$2.Stacked100:{series.stacked=true;if(isRotated===true)series.dataFields.valueXShow="totalPercent";else series.dataFields.valueYShow="totalPercent";series.updateStacking();break}case WebChartStackedKinds$2.Side:default:{series.stacked=false;if(rotationChanged===isRotated)series.dataFields.valueYShow=undefined;else series.dataFields.valueXShow=undefined;break}}}function setElementsVisibilityAccordingToCurrentPosition(props){return()=>{const{chart,marker}=props;marker.clones.each((markerClone=>{showElement(markerClone,isElementOutsideOfPlotContainer(markerClone,chart)===false)}))}}function handlePointsOutOfPlottingArea(props){const{chart,series,seriesType,marker,numberOfChartSeries,ignoreSmoothRenderingLimit}=props;let callback=setElementsVisibilityAccordingToCurrentPosition({marker,chart});const numberOfSeries=numberOfChartSeries??1;const chartElementCount=chart.data.length*numberOfSeries+numberOfSeries;if(ignoreSmoothRenderingLimit!==true&&chartElementCount>ChartDefaults.elementLimitForSmoothRendering){callback=debounce(callback,ChartDefaults.debounceTime)}chart.xAxes.getIndex(0)?.events.on(EventTypes.Validated,callback);chart.yAxes.getIndex(0)?.events.on(EventTypes.Validated,callback);if(seriesType===WebChartTypes$2.LineSeries){chart.xAxes.getIndex(0)?.events.on(EventTypes.Validated,(()=>{refreshSeriesDataLabels(series)}));chart.yAxes.getIndex(0)?.events.on(EventTypes.Validated,(()=>{refreshSeriesDataLabels(series)}))}}function retrievePieSliceInfoFromConfig(slices,sliceId){let sliceFromConfig;if(slices!==undefined&&sliceId!==undefined){sliceFromConfig=slices.find((sliceConfig=>sliceConfig.sliceId===sliceId))}return sliceFromConfig}function disposeStyleOrSelectionCallback(chart,styleOrSelection){chart.series.each((currentSeries=>{const disposer=getValueFromSeriesStorage(currentSeries.uid,styleOrSelection);if(disposer!==undefined&&disposer.isDisposed()===false)disposer.dispose()}))}function getVisibleSeriesIDs(chart){let visibleSeriesIds=[];if(chart!==undefined){visibleSeriesIds=chart.series.values.map((currentSeries=>currentSeries.visible!==false?`${currentSeries.id}`:"")).filter((value=>value!==""))}return visibleSeriesIds}function getNumberOfValidBoxPlotElements(chart,config){let validElements=0;if(chart!==undefined&&config!==undefined){const yList=getYList$1(config.series);const chartSubType=getChartSubType$1(config.series);chart.data.forEach((dataItem=>{switch(chartSubType){case ChartSubType$1.BoxPlotMonoField:case ChartSubType$1.BoxPlotMultiFields:case ChartSubType$1.BoxPlotMonoFieldAndCategory:if(doesBoxPlotItemHaveValidQuartiles({dataItem}))validElements+=1;break;case ChartSubType$1.BoxPlotMultiFieldsAndCategory:yList.some((y=>{if(doesBoxPlotItemHaveValidQuartiles({dataItem,y}))validElements+=1}));break;case ChartSubType$1.BoxPlotMonoFieldAndSplitBy:case ChartSubType$1.BoxPlotMultiFieldsAndSplitBy:case ChartSubType$1.BoxPlotMonoFieldAndCategoryAndSplitBy:config.series.forEach((boxPlotSeries=>{if(doesBoxPlotItemHaveValidQuartiles({dataItem,splitBy:boxPlotSeries.query?.where}))validElements+=1}));break}}))}return validElements}function getSeriesReadinessRules(seriesType){let trigger;switch(seriesType){case WebChartTypes$2.BarSeries:trigger=(series,seriesConfig)=>{const yField=series.dataFields.valueY??series.dataFields.valueX??seriesConfig.y;const numberOfExpectedColumns=series.chart?.data?.filter((categoryItem=>Number.isFinite(categoryItem[yField])===true)).length;return series.columns.length===numberOfExpectedColumns};break;case WebChartTypes$2.LineSeries:trigger=series=>{const marker=findBulletMarker(series);return series.chart.appeared===true&&series.chart.isReady()&&marker!==undefined&&marker.clones.values.length>1};break;case WebChartTypes$2.PieSeries:trigger=series=>series.slices.length>0;break;case WebChartTypes$2.ScatterSeries:trigger=series=>{const marker=findBulletMarker(series);const isTrendlineSeries=getValueFromSeriesStorage(series.uid,"isOverlay")===true;return series.chart.appeared===true&&series.chart.isReady()&&(isTrendlineSeries===true||marker!==undefined&&series.chart.data.length===marker.clones.length)};break;case WebChartTypes$2.HistogramSeries:trigger=series=>series.columns.length>0;break;case WebChartTypes$2.BoxPlotSeries:trigger=series=>{const config=getValueFromChartStorage(series.chart.uid,"config");let shouldTrigger=false;if(config!==undefined){const numberOfValidElements=getNumberOfValidBoxPlotElements(series.chart,config);let totalBoxes=0;let totalOutliersOnChart=0;let totalOutliersDataItems=0;series.chart.series.values.forEach((s=>{if(s instanceof CandlestickSeries===true){totalBoxes+=s.columns.length}else if(s instanceof LineSeries&&s instanceof StepLineSeries===false){const markers=findBulletMarker(s);if(markers!==undefined&&markers.disabled!==true){const numberOfExpectedOutliers=s.data.filter((dataItem=>{const outlierKey=s.dataFields.valueX??s.dataFields.valueY??"";return Number.isFinite(dataItem[outlierKey])})).length;totalOutliersDataItems+=numberOfExpectedOutliers;totalOutliersOnChart+=markers.clones.length??0}}}));const outliersReady=totalOutliersDataItems===0||totalOutliersOnChart>=totalOutliersDataItems;shouldTrigger=totalBoxes>=numberOfValidElements&&outliersReady===true&&series.chart.appeared===true&&series.isReady()&&series.chart.isReady()}return shouldTrigger};break}return trigger}function addSeriesStyleOrSelectionCallback(props){const{series,callbackInfo,seriesConfig,onReadyEvent}=props;const{type:callbackType}=callbackInfo;const seriesType=getSeriesType$1([seriesConfig]);const disposerName=callbackType==="style"?"updateStyleCallbackDisposer":"updateSelectionCallbackDisposer";const executeCallback=input=>{const{type,callbackProps}=input;if(type==="selection"){applySelectionOnSeries(callbackProps)}else if(input.styleCallback!==undefined){showElement(series,seriesConfig.visible);input.styleCallback(callbackProps)}};if(onReadyEvent===true){series.events.once(EventTypes.Ready,(()=>executeCallback(callbackInfo)))}let listenerDisposer=getValueFromSeriesStorage(series.uid,disposerName);if(listenerDisposer!==undefined)listenerDisposer.dispose();const isSeriesReady=getSeriesReadinessRules(seriesType);const objectToWaitFor=seriesType===WebChartTypes$2.PieSeries?series.chart:series;listenerDisposer=objectToWaitFor.events.on(EventTypes.Validated,(()=>{if(isSeriesReady!==undefined&&isSeriesReady(series,seriesConfig)===true){if(listenerDisposer!==undefined)listenerDisposer.dispose();executeCallback(callbackInfo)}}));series.dispatchImmediately(EventTypes.Validated);updateSeriesStorage(series.uid,{[disposerName]:listenerDisposer})}function addSeriesStylingCallback(props){const{series,styleCallback,callbackProps,onReadyEvent,seriesConfig}=props;addSeriesStyleOrSelectionCallback({callbackInfo:{styleCallback,callbackProps,type:"style"},series,seriesConfig,onReadyEvent})}function addSelectionCallback(props){const{series,callbackProps,seriesConfig,onReadyEvent}=props;addSeriesStyleOrSelectionCallback({callbackInfo:{callbackProps,type:"selection"},series,seriesConfig,onReadyEvent})}function setAccessibilityFeatures(series){const{defaultChartItemRole}=ChartDefaults.aria;if(series instanceof CandlestickSeries||series instanceof ColumnSeries){series.columns.template.properties.role=defaultChartItemRole}else if(series instanceof StepLineSeries){series.segments.template.properties.role=defaultChartItemRole}else if(series instanceof LineSeries){series.bullets.template.properties.role=defaultChartItemRole}else if(series instanceof PieSeries){series.slices.template.properties.role=defaultChartItemRole;series.itemReaderText="{category} {value.formatNumber('#.#')} {value.percent.formatNumber('#.#')}%"}}function hideSeriesInLegend(props){const{chart,series,hideEmptySeriesInLegend,seriesConfig,seriesType}=props;const chartSeries=chart.series.values;if(chart instanceof XYChart&&chartSeries.length===1)series.hiddenInLegend=true;else if(hideEmptySeriesInLegend!==false){series.events.once(EventTypes.DataItemsValidated,(value=>{let hideSeries=false;const series=value.target;const dataItems=series?.dataItems?.values;switch(seriesType){case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:{if(seriesConfig!==undefined){const{x,y}=seriesConfig;const isDataItemValid=dataItems.some((item=>{const{dataContext}=item;return validateBarNLineChartDataItem({dataItem:dataContext,x,y})}));hideSeries=isDataItemValid===false&&(hideEmptySeriesInLegend??ChartDefaults.options.hideEmptySeriesInLegend)===true}break}case WebChartTypes$2.BoxPlotSeries:{let candlestickSeries=series;if(chart!==undefined&&candlestickSeries instanceof CandlestickSeries===true){const isRotated=isChartRotated({chart});const firstQuartileKey=isRotated===true?candlestickSeries.dataFields.openValueX:candlestickSeries.dataFields.openValueY;const thirdQuartileKey=isRotated===true?candlestickSeries.dataFields.valueX:candlestickSeries.dataFields.valueY;const isDataItemValid=dataItems.some((item=>{const{dataContext}=item;return firstQuartileKey!==undefined&&Number.isFinite(dataContext[firstQuartileKey])===true||thirdQuartileKey!==undefined&&Number.isFinite(dataContext[thirdQuartileKey])===true}));hideSeries=isDataItemValid===false&&(hideEmptySeriesInLegend??ChartDefaults.options.hideEmptySeriesInLegend)===true}break}case WebChartTypes$2.PieSeries:{hideSeries=false;break}case WebChartTypes$2.HistogramSeries:case WebChartTypes$2.ScatterSeries:default:{hideSeries=true;break}}series.hiddenInLegend=hideSeries}))}}const LegendReverseKeys={Rotated:0,NonRotated:1,RTL:2,LTR:3,Stacked:4,Stacked100:5,SideBySide:6,LegendTop:7,LegendBottom:8,LegendLeft:9,LegendRight:10,DateAxis:11,ValueAxis:12,CategoryAxis:13,OrderByFieldsASC:14,OrderByFieldsDESC:15};const barLineLegendReverseRules=new Set([`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.DateAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.CategoryAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsASC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.SideBySide}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.LTR}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendLeft}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.NonRotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendRight}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendTop}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`,`${LegendReverseKeys.Rotated}-${LegendReverseKeys.RTL}-${LegendReverseKeys.Stacked100}-${LegendReverseKeys.LegendBottom}-${LegendReverseKeys.ValueAxis}-${LegendReverseKeys.OrderByFieldsDESC}`]);function generatePieChartValueFormatter(props){const{iLocale,pieChart,valueIntlOptions,percentageIntlOptions,displayNumericValue,displayPercentage,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix}=props;const formatLocale=getValueFromChartStorage(pieChart.uid,"formatLocale");const valueFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale,formatLocale});const percentageFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale,formatLocale});valueFormatter.numberFormat={...valueIntlOptions};percentageFormatter.numberFormat={...percentageIntlOptions,style:"percent"};const strongSpace=getDirectionallyStrongCharacter(pieChart.rtl," ");const pieChartValueFormatter=(_category,value,percent)=>{let formattedLabel="";if(value!==undefined&&percent!==undefined){const formattedValue=`${valuePrefix??""}${valueFormatter.format(value)}${valueSuffix??""}`;const formattedPercent=`${percentagePrefix??""}${percentageFormatter.format(Math.abs(percent/100))}${percentageSuffix??""}`;if(Number.isFinite(value)===true){if(displayNumericValue===true&&displayPercentage===true)formattedLabel=`${formattedPercent}${strongSpace}(${formattedValue})`;else if(displayNumericValue===true)formattedLabel=formattedValue;else if(displayPercentage===true)formattedLabel=formattedPercent}else{formattedLabel=""}}return formattedLabel};return pieChartValueFormatter}function isLegendDisplayedInOneColumn(legend){let legendDisplayedInOneColumn=false;if(legend.position===WebChartLegendPositions.Right||legend.position===WebChartLegendPositions.Left){legendDisplayedInOneColumn=true}else{const firstLabelX=legend.labels.getIndex(0)?.parent?.x;if(firstLabelX!==undefined){legendDisplayedInOneColumn=legend.labels.values.some((label=>label.parent?.x!==firstLabelX))===false}}return legendDisplayedInOneColumn}function isLegendDisplayedInOneLine(legend){let legendDisplayedInOneColumn=false;const firstLabelY=legend.labels.getIndex(0)?.parent?.y;if(firstLabelY!==undefined){legendDisplayedInOneColumn=legend.labels.values.some((label=>label.parent?.y!==firstLabelY))===false}return legendDisplayedInOneColumn}function handleValueLabelsRightAlignment(legend){legend.events.on(EventTypes.LayoutValidated,(()=>{const legendDisplayedInOneColumn=isLegendDisplayedInOneColumn(legend);const legendDisplayedInOneLine=isLegendDisplayedInOneLine(legend);const newAlignment=legendDisplayedInOneColumn===true||legendDisplayedInOneLine===false?RESTHorizontalAlignment$1.Right:RESTHorizontalAlignment$1.Center;legend.valueLabels.template.horizontalCenter=mapHAlignmentToHCenter(newAlignment);legend.valueLabels.template.align=mapHAlignmentToAlign(newAlignment)}))}function initializePieChartLegendValueLabel(legend){updateLabelStorage(legend.valueLabels.template.uid,{isLegendValueLabel:true});legend.valueLabels.template.adapter.add("htmlOutput",((defaultHTMLOutput,label)=>{let output=defaultHTMLOutput;const pieChartLegendValueLabelsFormatter=getValueFromLegendStorage(legend.uid,"pieChartLegendValueLabelsFormatter");if(pieChartLegendValueLabelsFormatter!==undefined){output=pieChartLegendValueLabelsFormatter(label.dataItem?.values?.value?.value??0,label.dataItem?.values?.value?.percent??0)}if(isEmptyStringField$1(output)===true)output=ChartDefaults.htmlEmptyContent;if(legend.baseSprite instanceof SerialChart){const config=getValueFromChartStorage(legend.baseSprite.uid,"config");if(config?.legend?.body!==undefined){output=attachInlineCSS({textSymbol:{...config.legend.body,text:output},format:"html"})}}return sanitizeHTMLOutput(output)}));legend.valueLabels.template.html=ChartDefaults.htmlEmptyContent;handleValueLabelsRightAlignment(legend)}function updatePieChartLegendValueLabel(props){const{legendElements:{legend},seriesConfig,webChartLegend,seriesType,pieChartLegendValueLabelFormatter}=props;const{visible,body,displayNumericValue:displayNumericValueFromConfig,displayPercentage:displayPercentageFromConfig}=webChartLegend??{};const chartType=seriesType??getSeriesType$1(seriesConfig);if(chartType===WebChartTypes$2.PieSeries){const{numericValueFormat,percentValueFormat,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix}=seriesConfig[0];const displayNumericValueOnLegend=displayNumericValueFromConfig??ChartDefaults.pieChart.displayNumericValueOnLegend;const displayPercentageOnLegend=displayPercentageFromConfig??ChartDefaults.pieChart.displayPercentageOnLegend;let pieChartLegendValueLabelsFormatter=pieChartLegendValueLabelFormatter;if(pieChartLegendValueLabelFormatter===undefined){const defaultPieChartLabelFormatter=generatePieChartValueFormatter({iLocale:legend.language.locale,pieChart:legend.baseSprite,valueIntlOptions:numericValueFormat?.intlOptions,percentageIntlOptions:percentValueFormat?.intlOptions,displayNumericValue:displayNumericValueOnLegend,displayPercentage:displayPercentageOnLegend,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix});pieChartLegendValueLabelsFormatter=(value,percent)=>defaultPieChartLabelFormatter("",value,percent)}updateLegendStorage(legend.uid,{pieChartLegendValueLabelsFormatter});const legendDisplayedInOneColumn=isLegendDisplayedInOneColumn(legend);const legendValueLabelsText={type:WebChartTypes$2.Text,visible,content:{...body,type:RESTSymbolType$1.TS,text:".",verticalAlignment:RESTVerticalAlignment$1.Middle,horizontalAlignment:legendDisplayedInOneColumn===true?RESTHorizontalAlignment$1.Right:RESTHorizontalAlignment$1.Center}};updateLabel(legend.valueLabels.template,legendValueLabelsText,ChartDefaults.legendProperties.valueLabels);legend.valueLabels.template.disabled=displayNumericValueOnLegend===false&&displayPercentageOnLegend===false}}function legendOverHandler(event){const{dataContext}=event.target.dataItem??{};if(dataContext instanceof PieSeriesDataItem){const{component}=dataContext;if(component instanceof PieSeries)component.showTooltip()}}function handleMisplacedLabels(legend){const swapCallback=()=>{const firstLegendItem=legend.children.values.find((child=>child.className==="Container"));if(firstLegendItem?.children.length===3){const markerIndex=firstLegendItem.children.values.findIndex((child=>child.className==="Container"));if(markerIndex!==-1){const rtl=markerIndex!==0;const valueLabelExpectedIndex=rtl===true?0:2;const valueLabelsTemplate=firstLegendItem.children.getIndex(valueLabelExpectedIndex)?.clonedFrom;if(valueLabelsTemplate!==undefined&&getValueFromLabelStorage(valueLabelsTemplate.uid,"isLegendValueLabel")!==true){legend.children.each((item=>{if(item.className==="Container"){item.children.swap(1,valueLabelExpectedIndex)}}))}}}};legend.events.on(EventTypes.Validated,swapCallback);swapCallback()}function setSeriesLabelOpacity(label,seriesVisible){const{legendLabelReducedOpacity}=ChartDefaults.legendProperties;if(label!==undefined){label.fillOpacity=seriesVisible===false?legendLabelReducedOpacity:1}}function reapplyLabelOpacity(props){const{labels,seriesId,sliceCategory}=props;labels.each((label=>{if(sliceCategory!==undefined){if(sliceCategory===label.dataItem.category){setSeriesLabelOpacity(label,label.dataItem.slice.visible??true)}}else if(seriesId===label.dataItem?.component?.id){setSeriesLabelOpacity(label,label.dataItem?.component?.visible??true)}}))}function handleLegendLabelsOpacity(series){if(series instanceof PieSeries){series.slices.template.events.on(EventTypes.Shown,(ev=>{const sliceCategory=ev.target.dataItem.category;reapplyLabelOpacity({labels:series.chart?.legend?.labels,sliceCategory});reapplyLabelOpacity({labels:series.chart?.legend?.valueLabels,sliceCategory})}));series.slices.template.events.on(EventTypes.Hidden,(ev=>{const sliceCategory=ev.target.dataItem.category;reapplyLabelOpacity({labels:series.chart?.legend?.labels,sliceCategory});reapplyLabelOpacity({labels:series.chart?.legend?.valueLabels,sliceCategory})}))}else{series.events.on(EventTypes.VisibilityChanged,(ev=>{const seriesId=ev.target.id;reapplyLabelOpacity({labels:series.chart?.legend?.labels,seriesId})}))}}function applyLegendMargins(legend){const{legendProperties}=ChartDefaults;if(legend.position===WebChartLegendPositions.Bottom){legend.marginTop=legendProperties.marginTop??0;legend.marginBottom=0;legend.dy=0}else if(legend.position===WebChartLegendPositions.Top){legend.marginBottom=legendProperties.marginBottom??0;legend.marginTop=0;legend.dy=0}else{legend.marginTop=0;legend.marginBottom=0;if(legend.baseSprite instanceof PieChart===false)legend.dy=-15}}function orderHistogramOrPieChartLegendItems(legend){const chart=legend.baseSprite;let reverseOrder;if(chart!==undefined){const config=getValueFromChartStorage(chart?.uid,"config");reverseOrder=chart?.rtl===true&&(config?.legend?.position===WebChartLegendPositions.Top||config?.legend?.position===WebChartLegendPositions.Bottom)}return reverseOrder??false}function buildLegendOrderKey(legend){const chart=legend.baseSprite;let keyCombination="";if(chart!==undefined){const config=getValueFromChartStorage(chart?.uid,"config");const isRotated=isChartRotated$2(config);const rotatedKey=isRotated===true?LegendReverseKeys.Rotated:LegendReverseKeys.NonRotated;let stackedKeyType=LegendReverseKeys.SideBySide;let stackedType;if(config!==undefined)stackedType=getSeriesStackedType$1(config.series[0]);if(stackedType===WebChartStackedKinds$2.Stacked)stackedKeyType=LegendReverseKeys.Stacked;else if(stackedType===WebChartStackedKinds$2.Stacked100)stackedKeyType=LegendReverseKeys.Stacked100;const rtlKey=chart.rtl===true?LegendReverseKeys.RTL:LegendReverseKeys.LTR;let legendPositionKey;switch(config?.legend?.position){case WebChartLegendPositions.Left:legendPositionKey=LegendReverseKeys.LegendLeft;break;case WebChartLegendPositions.Top:legendPositionKey=LegendReverseKeys.LegendTop;break;case WebChartLegendPositions.Bottom:legendPositionKey=LegendReverseKeys.LegendBottom;break;case WebChartLegendPositions.Right:default:legendPositionKey=LegendReverseKeys.LegendRight;break}const axis=isRotated===true?chart.yAxes.getIndex(0):chart.xAxes.getIndex(0);let axisTypeKey;if(axis instanceof DateAxis){axisTypeKey=LegendReverseKeys.DateAxis}else if(axis instanceof ValueAxis){axisTypeKey=LegendReverseKeys.ValueAxis}else{axisTypeKey=LegendReverseKeys.CategoryAxis}let descOrder=config?.series[0].query?.orderByFields?.[0]?.includes(WebChartSortOrderKinds$2.Descending)??false;const orderByFieldsKey=descOrder===true?LegendReverseKeys.OrderByFieldsDESC:LegendReverseKeys.OrderByFieldsASC;keyCombination=`${rotatedKey}-${rtlKey}-${stackedKeyType}-${legendPositionKey}-${axisTypeKey}-${orderByFieldsKey}`}return keyCombination}function orderBarLineChartLegendItems(legend){const keyCombination=buildLegendOrderKey(legend);return barLineLegendReverseRules.has(keyCombination)}function orderLegendItems(props){const{legendElements:{legend,legendTitle},firstSeries}=props;const seriesType=getSeriesType$1([firstSeries]);switch(seriesType){case WebChartTypes$2.HistogramSeries:case WebChartTypes$2.PieSeries:legend.reverseOrder=orderHistogramOrPieChartLegendItems(legend);break;case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:legend.reverseOrder=orderBarLineChartLegendItems(legend);break}const newLegendTitleIndex=legend.reverseOrder===true?legend.children.length-1:0;legend.children.moveValue(legendTitle,newLegendTitleIndex)}function setLineSeriesBulletsVisibility(lineSeries){if(lineSeries.visible===true){const config=getValueFromChartStorage(lineSeries.chart.uid,"config");const seriesConfig=config?.series.find((currentSeriesConfig=>currentSeriesConfig.id===lineSeries.id));if(seriesConfig!==undefined){const seriesType=getSeriesType$1([seriesConfig]);if(seriesType===WebChartTypes$2.LineSeries){const{markerVisible}=seriesConfig;if(markerVisible!==false)lineSeries.bulletsContainer.show()}}}}function isInlineDataSource(chart){let inlineDataSource=false;const chartConfig=getValueFromChartStorage(chart.uid,"config");const{dataSource}=chartConfig??{};if(dataSource?.type===WebChartDataSourceTypes$1.Inline&&dataSource?.data!==undefined)inlineDataSource=true;return inlineDataSource}function legendHitHandler(event,chart){const dataItem=event.target.dataItem;const visible=event.target.isActive;if(dataItem?.dataContext!==undefined){const{dataContext}=dataItem;const eventPayload={visible};if(getValueFromSeriesStorage(dataContext.uid,"isOverlay")===true){eventPayload.overlayType=getValueFromSeriesStorage(dataContext.uid,"type")}else if(dataContext instanceof PieSeriesDataItem){const isNonAggregatedChart=getValueFromChartStorage(chart.uid,"isNonAggregatedChart");const isInlineChart=isInlineDataSource(chart);if(isNonAggregatedChart===true||isInlineChart===true)eventPayload.sliceData=dataContext.dataContext;else eventPayload.sliceId=dataContext.category}else if(dataContext instanceof CandlestickSeries){const candleSeriesId=dataContext.id;const outlierSeries=getOutliersSeries(chart,candleSeriesId);if(outlierSeries!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const showSeriesOutliers=shouldShowSeriesOutliers(config?.showOutliers,visible);const outliersMarkers=findBulletMarker(outlierSeries);if(outliersMarkers!==undefined){outliersMarkers.disabled=showSeriesOutliers===false}showElement(outlierSeries,showSeriesOutliers)}const{topStepLineSeries,medianStepLineSeries,bottomStepLineSeries}=getStepLineSeries(chart,candleSeriesId);if(topStepLineSeries!==undefined)showElement(topStepLineSeries,visible);if(medianStepLineSeries!==undefined)showElement(medianStepLineSeries,visible);if(bottomStepLineSeries!==undefined)showElement(bottomStepLineSeries,visible);eventPayload.seriesId=dataContext.id}else{eventPayload.seriesId=dataContext.id}const targetSeries=dataContext instanceof PieSeriesDataItem?dataContext.component:dataContext;if(targetSeries!==undefined&&getValueFromSeriesStorage(targetSeries.uid,"isOverlay")!==true){targetSeries.events.once(EventTypes.Validated,(()=>{const isPieSeries=targetSeries instanceof PieSeries;const currentSelectionDataItems=getValueFromChartStorage(chart.uid,"currentSelectionDataItems");const atLeastOneElementActive=currentSelectionDataItems!==undefined&&currentSelectionDataItems.length>0;const actionMode=getValueFromChartStorage(chart.uid,"actionMode")??ChartDefaults.actionMode;let elements;if(targetSeries instanceof ColumnSeries)elements=targetSeries.columns;else if(isPieSeries===true)elements=targetSeries.slices;else if(targetSeries instanceof LineSeries){setLineSeriesBulletsVisibility(targetSeries);elements=findBulletMarker(targetSeries)?.clones}elements?.each((element=>{if(element.dataItem instanceof LegendDataItem===false){toggleStateForElement({element,selected:element.isActive===true,useNativeState:isPieSeries===true,backToDefaultState:atLeastOneElementActive===false});if(isPieSeries===true&&actionMode===ActionModes$1.None)element.clickable=false}}))}))}notifyLegendItemVisibilityChanged(eventPayload,chart.htmlContainer)}}function initializeLegendPadding(legend){const{legendProperties:legendDefaults,legendProperties}=ChartDefaults;legend.adapter.add("paddingRight",(()=>legend.scrollbar.visible===true?legendProperties.legendPaddingRightWithScrollbarVisible:legendDefaults.paddingRight));legend.adapter.add("paddingLeft",(()=>legendDefaults.paddingLeft));legend.adapter.add("paddingTop",(()=>legendDefaults.paddingTop));legend.adapter.add("paddingBottom",(()=>legendDefaults.paddingBottom))}function initializeLegendScrollbar(legend){legend.scrollable=true}function initializeLegendTitle(legend){const legendTitle=initializeLabel(undefined,legend);legendTitle.adapter.add("paddingTop",(paddingTop=>{let newPaddingTop=paddingTop;const labelHeight=legendTitle.bbox.height;if(labelHeight>0)newPaddingTop=-labelHeight;return newPaddingTop}));legendTitle.adapter.add("x",(x=>{let newX=x;const{marginLeft,marginRight}=ChartDefaults.legendProperties.legendTitle;const config=getValueFromChartStorage(legend.baseSprite.uid,"config");const legendTitleHorizontalAlignment=config?.legend?.title?.content?.horizontalAlignment;switch(legendTitleHorizontalAlignment){case RESTHorizontalAlignment$1.Left:newX=legendTitle.measuredWidth+(marginLeft??0);break;case RESTHorizontalAlignment$1.Right:newX=legend.measuredWidth-legendTitle.measuredWidth-(marginRight??0);break;case RESTHorizontalAlignment$1.Center:case RESTHorizontalAlignment$1.Justify:default:newX=legend.measuredWidth/2;break}return newX}));return legendTitle}function updateLegendTitle(props){const{legendConfig,legendTitle,isPieChart}=props;const{title,visible,position}=legendConfig;const{legendTitle:titleDefaults}=ChartDefaults.legendProperties;let titleIsVisible=false;if(title!==undefined){titleIsVisible=visible!==false&&title?.visible!==false;const legendTitleMixedConfig={...title,visible:titleIsVisible};updateLabel(legendTitle,legendTitleMixedConfig,titleDefaults);legendTitle.marginLeft=titleDefaults.marginLeft??0}if(position===WebChartLegendPositions.Top||position===WebChartLegendPositions.Bottom){legendTitle.maxWidth=NaN;legendTitle.isMeasured=false}else{legendTitle.maxWidth=titleDefaults.maxWidth??NaN;let newMarginTop=0;if(isPieChart===true&&titleIsVisible===true){legendTitle.marginTop=(title?.content?.font?.size??ChartDefaults.generalFontSize)+(ChartDefaults.legendProperties.legendTitle.marginTop??0)}legendTitle.marginTop=newMarginTop;legendTitle.isMeasured=true}}function initializeLegendLabels(legend){const legendDefaults=ChartDefaults.legendProperties;legend.labels.template=initializeLabel(legendDefaults.legendLabels);legend.valueLabels.template=initializeLabel(legendDefaults.legendLabels);legend.markers.template.width=legendDefaults.legendMarkersSize;legend.markers.template.height=legendDefaults.legendMarkersSize;legend.labels.template.adapter.add("wrap",(()=>true));legend.labels.template.adapter.add("maxWidth",(maxWidth=>{let newMaxWidth=maxWidth;let configMaxWidth;if(legend.baseSprite instanceof PieChart){const config=getValueFromChartStorage(legend.baseSprite.uid,"config");configMaxWidth=config?.legend?.labelMaxWidth}if(legend.position===WebChartLegendPositions.Right||legend.position===WebChartLegendPositions.Left){newMaxWidth=configMaxWidth??ChartDefaults.legendProperties.legendLabels.maxWidth}else if(configMaxWidth!==undefined){newMaxWidth=configMaxWidth}else{let valueLabelsLength=0;if(legend.valueLabels.template.disabled===false){legend.valueLabels.each((valueLabel=>{valueLabelsLength=Math.max(valueLabelsLength,valueLabel.measuredWidth)}))}newMaxWidth=legend.measuredWidth-valueLabelsLength-45}return newMaxWidth}));legend.labels.template.adapter.add("textOutput",((_textOutput,label)=>{const currentTextOutput=label.dataItem?.label?.currentText;let textOutput;const config=getValueFromChartStorage(legend.baseSprite.uid,"config");if(config!==undefined){const{series:seriesConfig}=config;const chartType=getSeriesType$1(seriesConfig);if(chartType===WebChartTypes$2.PieSeries){const field=isPieChartFromFields$1(seriesConfig)===true?defaultPieFromFieldsName$1:seriesConfig[0].x;textOutput=label.dataItem?.dataContext?.[field]}else{textOutput=(label.dataItem?.component).name}}return textOutput??currentTextOutput}));legend.valueLabels.template.adapter.add("maxWidth",(maxWidth=>{let newMaxWidth=maxWidth;let configMaxWidth;if(legend.baseSprite instanceof PieChart){const config=getValueFromChartStorage(legend.baseSprite.uid,"config");configMaxWidth=config?.legend?.valueLabelMaxWidth}if(legend.position===WebChartLegendPositions.Right||legend.position===WebChartLegendPositions.Left){newMaxWidth=configMaxWidth??ChartDefaults.legendProperties.valueLabels.maxWidth}else{newMaxWidth=configMaxWidth??NaN}return newMaxWidth}))}function initializeLegendEvents(legend,chart){legend.itemContainers.template.events.on(EventTypes.Hit,(event=>legendHitHandler(event,chart)));if(chart instanceof PieChart){legend.itemContainers.template.events.on(EventTypes.Over,(event=>legendOverHandler(event)))}}function initializeLegendOrder(legend){legend.itemContainers.template.reverseOrder=legend.rtl}function setCornerRadiusAdapter(element,property){if(element.adapter.keys().includes(property)===false){element.adapter.add(property,(cornerRadius=>{let newCornerRadius=cornerRadius;const dataContext=element.dataItem?.dataContext;if(dataContext!==undefined){const chart=dataContext instanceof PieSeriesDataItem?dataContext.component?.chart:dataContext.chart;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{rectangleMarkerRadius,roundedMarkerRadius}=ChartDefaults.legendProperties;newCornerRadius=config?.legend?.roundMarkers===true?roundedMarkerRadius:rectangleMarkerRadius}}return newCornerRadius}))}}function updateLegendMarkerShapeCallBack(legend){legend.markers.each((clone=>{const markerClone=clone.children.getIndex(0);if(markerClone instanceof RoundedRectangle){setCornerRadiusAdapter(markerClone,"cornerRadiusBottomLeft");setCornerRadiusAdapter(markerClone,"cornerRadiusBottomRight");setCornerRadiusAdapter(markerClone,"cornerRadiusTopLeft");setCornerRadiusAdapter(markerClone,"cornerRadiusTopRight");markerClone.validate()}}))}function updateLegendMarkerShape(legend){legend.markers.template.events.on(EventTypes.Inited,(()=>{updateLegendMarkerShapeCallBack(legend)}));legend.events.once(EventTypes.Validated,(()=>{updateLegendMarkerShapeCallBack(legend)}))}function updateLegendMarkersLabel(props){const{legendElements:{legend},seriesConfig,webChartLegend,seriesType}=props;const{visible,body}=webChartLegend??{};const chartType=seriesType??getSeriesType$1(seriesConfig);const legendLabelsText={type:WebChartTypes$2.Text,visible,content:{...body,type:RESTSymbolType$1.TS,text:" "}};updateLabel(legend.labels.template,legendLabelsText,ChartDefaults.legendProperties.legendLabels);legend.labels.template.valign=RESTVerticalAlignment$1.Middle;legend.valueLabels.template.valign=RESTVerticalAlignment$1.Middle;if(chartType===WebChartTypes$2.PieSeries)updatePieChartLegendValueLabel(props);legend.valueLabels.template.width=NaN}function initializeLegendMaxHeight(legend,chart){chart.chartContainer.events.on(EventTypes.SizeChanged,debounce((()=>{const config=getValueFromChartStorage(chart.uid,"config");let legendMaxHeight=config?.legend?.maxHeight??NaN;if(Number.isFinite(legendMaxHeight)===false){if(legend.position===WebChartLegendPositions.Top||legend.position===WebChartLegendPositions.Bottom){legendMaxHeight=ChartDefaults.legendProperties.maxHeight??NaN}else{legendMaxHeight=chart instanceof PieChart?chart.chartContainer.measuredHeight:chart.seriesContainer.measuredHeight}}legend.maxHeight=legendMaxHeight;legend.invalidateLayout()})),ChartDefaults.debounceTime)}function updateLegendContentAlign(legend,webChartLegend){const{position}=webChartLegend;if(position===WebChartLegendPositions.Top||position===WebChartLegendPositions.Bottom){legend.contentAlign=RESTHorizontalAlignment$1.Center}else{legend.contentAlign="none"}}function updateLegendItemsOrder(legendElements,firstSeries){const{legend}=legendElements;if(legend.markers.template.events.has(EventTypes.Inited)===true){orderLegendItems({legendElements,firstSeries})}legend.markers.template.events.on(EventTypes.Inited,(event=>{if(legend.markers.indexOf(event.target)===0){orderLegendItems({legendElements,firstSeries})}}))}function updateLegendWidth(legend,position){if(position===WebChartLegendPositions.Right||position===WebChartLegendPositions.Left){legend.width=NaN}else{legend.maxWidth=Number.MAX_SAFE_INTEGER}}function handleTogglingOfLegendItems(legend,disableTogglingLegendItems){let mouseCursorStyle=MouseCursorStyle.pointer;if(disableTogglingLegendItems===true){legend.itemContainers.template.clickable=false;legend.itemContainers.template.focusable=false;mouseCursorStyle=MouseCursorStyle.default}else{legend.itemContainers.template.clickable=true;legend.itemContainers.template.focusable=true}legend.itemContainers.values.forEach((item=>{item.cursorOverStyle=mouseCursorStyle}))}function initializeLegend(chart){const legend=new Legend;chart.legend=legend;initializeLegendScrollbar(legend);const legendTitle=initializeLegendTitle(legend);initializeLegendLabels(legend);initializePieChartLegendValueLabel(legend);initializeLegendEvents(legend,chart);initializeLegendOrder(legend);initializeLegendPadding(legend);initializeLegendMaxHeight(legend,chart);autoAdjustContainersPaddingAccordingToLegendPosition(chart,legendTitle);handleMisplacedLabels(legend);chart.legend.events.on(EventTypes.ChildAdded,(()=>{const options=getValueFromChartStorage(chart.uid,"options");handleTogglingOfLegendItems(legend,options?.disableTogglingLegendItems)}));return{legend,legendTitle}}function updateLegend(props){const{legendElements,seriesConfig,webChartLegend}=props;const{legend,legendTitle}=legendElements;const chart=legend.baseSprite;const canShow=chart===undefined?true:canShowLegend(seriesConfig);const showLegend=canShow===true&&webChartLegend?.visible!==false;if(chart!==undefined&&webChartLegend!==undefined&&showLegend===true){const{position}=webChartLegend;showElement(legend,true);updateLegendTitle({legendConfig:webChartLegend,legendTitle,isPieChart:chart instanceof PieChart});updateLegendMarkerShape(legend);updateLegendMarkersLabel(props);updateLegendContentAlign(legend,webChartLegend);updateLegendItemsOrder(legendElements,seriesConfig[0]);legend.position=position;updateLegendWidth(legend,position);applyLegendMargins(legend);const options=getValueFromChartStorage(chart.uid,"options");handleTogglingOfLegendItems(legend,options?.disableTogglingLegendItems);legend.events.once(EventTypes.Validated,(()=>{if(legend.baseSprite instanceof PieChart)legend.invalidateDataItems()}))}else{legend.position=WebChartLegendPositions.Right;legend.width=0;showElement(legend,false)}}function hideZeroValueColumns(series,yField){series.columns.each((column=>{if((column.dataItem?.dataContext)[yField]===0){column.strokeOpacity=0}}))}function updateColumnSeriesStyleCore(props){const{series,seriesConfig,seriesIndex,dataSource,chartSubType,styleIndividualElement}=props;const yField=series.dataFields.valueY??series.dataFields.valueX??seriesConfig.y;let seriesSymbolForEvent;const seriesFillSymbol=seriesConfig.fillSymbol;const updateSymbolElementStyleProps={seriesConfig,seriesIndex,seriesSymbol:seriesFillSymbol,dataSource,isChartFillSymbol:true};if(styleIndividualElement===false){const rendererSymbol=getRendererElementSymbol({dataItem:series.chart.data[0],seriesConfig,chartSubType,yField});const updateStyleResult=updateSymbolElementStyle({...updateSymbolElementStyleProps,element:series.columns.template,rendererSymbol});updateElementStateFillProperties(series,updateStyleResult.stylingInfo);seriesSymbolForEvent=updateStyleResult.symbolWithColorInfo}else{series.columns.each((column=>{const columnDataContext=column.dataItem?.dataContext;if(Number.isFinite(columnDataContext?.[yField])===true){const rendererSymbol=getRendererElementSymbol({dataItem:columnDataContext,seriesConfig,chartSubType,yField});const result=updateSymbolElementStyle({...updateSymbolElementStyleProps,seriesSymbol:seriesFillSymbol,element:column,rendererSymbol});updateElementStateFillProperties(column,result.stylingInfo)}}));updateSymbolElementStyle({...updateSymbolElementStyleProps,seriesSymbol:seriesFillSymbol,element:series.columns.template});if(seriesConfig.colorType===WebChartColoringPatterns$1.Single)seriesSymbolForEvent=seriesFillSymbol}hideZeroValueColumns(series,yField);return seriesSymbolForEvent}function updateColumnSeriesStyle(props){const{series,seriesSymbolMapForEvent,seriesIndex,dataSource}=props;const seriesConfig=props.seriesConfig;const chartConfig=getValueFromChartStorage(series.chart.uid,"config");const numberOfSeries=chartConfig?.series.length??0;const queryObject=getValueFromChartStorage(series.chart.uid,"queryObject");const chartSubType=getChartSubType$1(chartConfig?.series);const styleIndividualElement=isStylingIndividualSpriteNeeded({chartData:series.chart?.data??[],chartConfig,queryObject});const seriesSymbolForEvent=updateColumnSeriesStyleCore({series,seriesConfig,seriesIndex,chartSubType,dataSource,styleIndividualElement});seriesSymbolMapForEvent.set(seriesIndex,seriesSymbolForEvent);if(seriesSymbolMapForEvent.size===numberOfSeries){notifySeriesColorsChange({data:seriesSymbolMapForEvent,htmlContainer:series.chart.htmlContainer,chartId:series.chart.id})}}function updateBarChartSeriesCore(props){const{seriesConfig,series,rotationChanged,subtypeInfo,fieldList,seriesIndex,dataSource,seriesSymbolMapForEvent}=props;const{name}=seriesConfig;const currentConfig=getValueFromChartStorage(series.chart.uid,"config");const isRotated=isChartRotated({config:currentConfig});const chartSubType=getChartSubType$1(currentConfig?.series);showElement(series,seriesConfig.visible);let seriesName=name;const splitBy=series.dataFields?.customValue??"";if(chartSubType===ChartSubType$1.BarAndLineSplitBy){seriesName=getFieldDescription$1({subtypeInfo,fieldList,fieldName:getSplitByField$1(splitBy),fieldValueToMatch:seriesName})??seriesName}updateSeriesName(series,seriesName);updateSeriesStackedType({series,seriesConfig,rotationChanged,isRotated});updateColumnSeriesStyle({series,seriesConfig,seriesIndex,dataSource,seriesSymbolMapForEvent});updateSeriesStorage(series.uid,{barSeriesLastUpdate:{numberOfColumnsUpdated:series.columns.length,updateProps:props}})}function updateBarChartSeriesAfterZoomOut(columnSeries){columnSeries.events.on(EventTypes.Validated,(()=>{const barSeriesLastUpdate=getValueFromSeriesStorage(columnSeries.uid,"barSeriesLastUpdate");if(barSeriesLastUpdate!==undefined){const{numberOfColumnsUpdated,updateProps}=barSeriesLastUpdate;const someColumnsWereNotUpdated=columnSeries.columns.length>numberOfColumnsUpdated;if(someColumnsWereNotUpdated===true){updateBarChartSeriesCore(updateProps)}}}))}function initializeBarChartSeries(props){const{chartConfig,seriesIndex,axisPair,hideLoaderHandle,selectionTheme,dataSourceType}=props;const seriesConfig=chartConfig.series[seriesIndex];const{x,y}=seriesConfig;const newColumnSeries=new ColumnSeries;attachLoaderHandle(newColumnSeries,hideLoaderHandle);newColumnSeries.id=seriesConfig.id;[newColumnSeries.xAxis,newColumnSeries.yAxis]=axisPair;const isRotated=isChartRotated({chart:axisPair[0].chart});const chartSubType=getChartSubType$1(chartConfig.series);const yDataField=chartSubType!==ChartSubType$1.BarAndLineSplitByNoAggregation?y:`${y}_${getSplitByValue$1({where:seriesConfig.query?.where})}`;if(isRotated===true)newColumnSeries.dataFields.valueX=yDataField;else newColumnSeries.dataFields.valueY=yDataField;const axis=isRotated===true?axisPair[1]:axisPair[0];if(axis!==undefined){const xField=getXAxisDataFieldName(axis,isRotated);newColumnSeries.dataFields[xField]=dataSourceType===WebChartDataSourceTypes$1.Inline?x:ChartDefaults.xAxisField;newColumnSeries.baseAxis=axis}newColumnSeries.dataFields.customValue=seriesConfig?.query?.where;initializeBarAndLineChartTooltip(newColumnSeries.columns.template,newColumnSeries);newColumnSeries.columns.template.width=percent(100);setSelectionTheme({element:newColumnSeries.columns.template,customSelectionTheme:selectionTheme});handleLegendLabelsOpacity(newColumnSeries);updateBarChartSeriesAfterZoomOut(newColumnSeries);setAccessibilityFeatures(newColumnSeries);return newColumnSeries}function updateBarChartSeries(props){const{seriesConfig,series,seriesIndex,axes,commonStrings,inlineDisplayLabelField,fieldList,options}=props;const isRotated=isChartRotated({chart:series.chart});updateBarSeriesDataLabel({series,seriesType:WebChartTypes$2.BarSeries,isRotated,stackedType:seriesConfig.stackedType,dataLabelsConfig:seriesConfig.dataLabels,yAxisValueFormat:axes[1].valueFormat,customDataLabelFormatter:options?.dataLabelFormatter});addSeriesStylingCallback({styleCallback:updateBarChartSeriesCore,callbackProps:props,series,seriesConfig});updateBarAndLineChartTooltip({series,seriesConfig,fieldList,inlineDisplayLabelField,commonStrings,seriesIndex,tooltipFormatter:options?.tooltipFormatter})}const HistogramResultKeys={Count:"count",Start:"minValue",End:"maxValue"};const OverlayTerms={Mean:"Mean",Median:"Median",StdDev:"Standard Deviation",Normal:"Normal Distribution",Trendline:"Trendline"};function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;var i=-1,n=Math.max(0,Math.ceil((stop-start)/step))|0,range=new Array(n);while(++i<n){range[i]=start+i*step}return range}function linspace(start,end,numberOfPoints){const range$1=end-start;let output=[];if(range$1!==0){if(numberOfPoints===1){output=[start]}else if(numberOfPoints>1){const stepSize=range$1/(numberOfPoints-1);output=[...range(start,end,stepSize),end]}}return output}function calculateNormalDistribution({x,mean,stddev,scalingFactor}){const stddev2=2*stddev**2;const K1=-1/stddev2;const result=(scalingFactor??1)*Math.exp(K1*(x-mean)**2);return result}function calculateScalingFactor(bins){let scalingFactor=0;if(bins.length>0){for(let iBin=0;iBin<bins.length;iBin+=1){if(bins[iBin].count>scalingFactor){scalingFactor=bins[iBin].count}}}return scalingFactor}function addHistogramDataLabelFormatter(dataLabel,series){dataLabel.adapter.add("htmlOutput",((defaultDataLabelText,label)=>{let newDataLabelText=defaultDataLabelText;const histogramDataLabelFormatter=getValueFromSeriesStorage(series.uid,"histogramDataLabelFormatter");const{dataItem}=label;if(histogramDataLabelFormatter!==undefined&&dataItem instanceof ColumnSeriesDataItem){const{valueY:count,openValueX:binMinValue,valueX:binMaxValue}=dataItem;newDataLabelText=histogramDataLabelFormatter(count,binMinValue,binMaxValue)}return sanitizeHTMLOutput(newDataLabelText)}),0)}function initializeHistogramDataLabel(series){const dataLabel=initializeLabel(ChartDefaults.dataLabelInitialize);updateLabelStorage(dataLabel.uid,{isDataLabel:true});series.bullets.push(dataLabel);adjustLabelVisibility(WebChartTypes$2.HistogramSeries,dataLabel);addHistogramDataLabelFormatter(dataLabel,series);dataLabel.html="{valueX}";return dataLabel}function generateHistogramDefaultDataLabelFormatter(props){const{numberFormatter,dataLabelsConfigContent}=props;return(count,_binMinValue,_binMaxValue)=>attachInlineCSS({textSymbol:{...dataLabelsConfigContent,text:numberFormatter.format(count)},format:"html"})}function updateHistogramDataLabel(props){const{series}=props;const dataLabel=findSeriesDataLabel(series,"bullets");updateDataLabel({...props,dataLabel,defaultDataLabelFormatter:generateHistogramDefaultDataLabelFormatter,seriesType:WebChartTypes$2.HistogramSeries})}function generateDefaultHistogramTooltipHTMLFormatter(props){const{axes,seriesConfig,series,fieldList}=props;const{dataTooltipVisible}=seriesConfig;let histogramTooltipFormatter;const strongColon=getDirectionallyStrongCharacter(series.rtl);if(dataTooltipVisible===false){histogramTooltipFormatter=(_count,_binMinValue,_binMaxValue)=>""}else{histogramTooltipFormatter=(count,binMinValue,binMaxValue)=>{const xAlias=getFieldAlias(fieldList,seriesConfig.x);const xLabel=getTooltipHeadingText(xAlias,axes?.[0].title?.content?.text);const yLabel=getTooltipHeadingText(common_t9n_en.statistics.count,axes?.[1].title?.content?.text);const tooltipValueY=formatTooltipValue({series,callbackName:"tooltipValueYNumberFormatCallback",value:count});const binStartValue=formatTooltipValue({series,callbackName:"tooltipValueXNumberFormatCallback",value:binMinValue});const binEndValue=formatTooltipValue({series,callbackName:"tooltipValueXNumberFormatCallback",value:binMaxValue});return`<b>${xLabel}${strongColon} </b>${binStartValue} - ${binEndValue}<br /><b>${yLabel}${strongColon} </b>${tooltipValueY}`}}return histogramTooltipFormatter}function initializeHistogramTooltip(series){const columnTemplate=series.columns.template;columnTemplate.tooltipPosition=ChartDefaults.columnTooltipPosition;columnTemplate.tooltipHTML=ChartDefaults.htmlEmptyContent;columnTemplate.adapter.add("tooltipHTML",((defaultTooltipHTML,column)=>{let output=defaultTooltipHTML;const{chart}=series;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{dataTooltipVisible}=config?.series[0]??{};if(dataTooltipVisible===false){output=""}else{const histogramTooltipFormatter=getValueFromSeriesStorage(series.uid,"histogramTooltipFormatter");if(histogramTooltipFormatter!==undefined){const{dataItem}=column;if(dataItem instanceof ColumnSeriesDataItem){const{valueY:count,openValueX:binMinValue,valueX:binMaxValue}=dataItem;output=histogramTooltipFormatter(count,binMinValue,binMaxValue)}}}}return sanitizeHTMLOutput(output)}))}function updateHistogramTooltip(props){const{series,tooltipFormatter}=props;updateSeriesStorage(series.uid,{histogramTooltipFormatter:tooltipFormatter??generateDefaultHistogramTooltipHTMLFormatter(props)})}async function initializeStatisticSeries(props){const{xAxis,yAxis,type,hideLoaderHandle}=props;const lineSeries=new LineSeries;lineSeries.id=type;attachLoaderHandle(lineSeries,hideLoaderHandle);updateSeriesStorage(lineSeries.uid,{isOverlay:true,type});lineSeries.dataFields.valueX="x";lineSeries.dataFields.valueY="y";if(xAxis!==undefined)lineSeries.xAxis=xAxis;if(yAxis!==undefined)lineSeries.yAxis=yAxis;lineSeries.hidden=true;return lineSeries}function updateStatisticSeries(props){const{lineSeries,valueFormat,overlay,chartData,commonStrings}=props;const{symbol,created,visible}=overlay;const overlayVisibility=created===true&&visible!==false;const overlayType=getValueFromSeriesStorage(lineSeries.uid,"type");const isUpperStdDev=getValueFromSeriesStorage(lineSeries.uid,"upper");updateLineElements({element:lineSeries,lineSymbol:symbol,visible:overlayVisibility});lineSeries.hiddenInLegend=created!==true||isUpperStdDev===true;if(chartData!==undefined){const binCounts=chartData.bins.map((ele=>ele.count));const maxBinCount=Math.max(...binCounts);const{mean,stddev,median}=chartData;const lowerStdDev=mean-stddev;const upperStdDev=mean+stddev;let startPoint={x:NaN,y:NaN};let endPoint={x:NaN,y:NaN};switch(overlayType){case OverlayTerms.Mean:startPoint={x:mean,y:0};endPoint={x:mean,y:maxBinCount};break;case OverlayTerms.Median:startPoint={x:median,y:0};endPoint={x:median,y:maxBinCount};break;case OverlayTerms.StdDev:if(isUpperStdDev===true){startPoint={x:upperStdDev,y:0};endPoint={x:upperStdDev,y:maxBinCount}}else{startPoint={x:lowerStdDev,y:0};endPoint={x:lowerStdDev,y:maxBinCount}}break}const dataPoints={data:[startPoint,endPoint]};lineSeries.data=dataPoints.data}let overlayData=lineSeries.data[0].x;if(overlayType===OverlayTerms.StdDev){overlayData=chartData?.stddev??getValueFromSeriesStorage(lineSeries.uid,"stddev");updateSeriesStorage(lineSeries.uid,{stddev:overlayData})}if(overlayData!==undefined){let localizedOverlayType=overlayType;switch(overlayType){case OverlayTerms.Mean:localizedOverlayType=commonStrings.overlays.mean;break;case OverlayTerms.Median:localizedOverlayType=commonStrings.overlays.median;break;case OverlayTerms.StdDev:localizedOverlayType=commonStrings.overlays.stdDev;break;case OverlayTerms.Trendline:localizedOverlayType=commonStrings.overlays.trendline;break}const formatLocale=getValueFromChartStorage(lineSeries.chart.uid,"formatLocale");updateSeriesName(lineSeries,`${localizedOverlayType}: ${format({value:overlayData,valueFormat,iLocale:lineSeries.chart.language.locale,formatLocale})}`)}}async function initializeNormalDistributionLineSeries(xAxis,yAxis,commonStrings){const lineSeries=new LineSeries;updateSeriesStorage(lineSeries.uid,{isOverlay:true,type:OverlayTerms.Normal});lineSeries.xAxis=xAxis;lineSeries.yAxis=yAxis;lineSeries.dataFields.valueX="x";lineSeries.dataFields.valueY="y";updateSeriesName(lineSeries,commonStrings.overlays.normal);lineSeries.hidden=true;lineSeries.id=OverlayTerms.Normal;return lineSeries}function updateNormalDistributionLineSeries(props){const{lineSeries,overlay,seriesData,numberOfPoints}=props;const{symbol,created,visible}=overlay;const overlayVisibility=created===true&&visible!==false;updateLineElements({element:lineSeries,lineSymbol:symbol,visible:overlayVisibility});lineSeries.hiddenInLegend=created!==true;if(seriesData!==undefined){const{mean,stddev,min,max}=seriesData;const scalingFactor=calculateScalingFactor(seriesData.bins);const data=linspace(min,max,numberOfPoints??ChartDefaults.histogramSeries.normalDistribNumberOfPoints).map((el=>({x:el,y:calculateNormalDistribution({x:el,mean,stddev,scalingFactor})})));lineSeries.data=data}}async function initializeHistogramSeries(props){const{seriesConfig,axisPair,hideLoaderHandle,commonStrings,selectionTheme}=props;const chartSeries=[];const columnSeries=new ColumnSeries;attachLoaderHandle(columnSeries,hideLoaderHandle);columnSeries.id=seriesConfig.id;columnSeries.hiddenInLegend=true;const xAxis=axisPair[0];const yAxis=axisPair[1];columnSeries.xAxis=xAxis;columnSeries.yAxis=yAxis;initializeHistogramTooltip(columnSeries);initializeHistogramDataLabel(columnSeries);columnSeries.dataItems.template.locations.valueX=1;columnSeries.dataItems.template.locations.openValueX=0;columnSeries.dataFields.openValueX=HistogramResultKeys.Start;columnSeries.dataFields.valueX=HistogramResultKeys.End;columnSeries.dataFields.valueY=HistogramResultKeys.Count;columnSeries.dataFields.customValue=seriesConfig.x;setAccessibilityFeatures(columnSeries);setSelectionTheme({element:columnSeries.columns.template,customSelectionTheme:selectionTheme});chartSeries.push(columnSeries);chartSeries.push(await initializeStatisticSeries({xAxis,yAxis,type:OverlayTerms.Mean,hideLoaderHandle}));chartSeries.push(await initializeStatisticSeries({xAxis,yAxis,type:OverlayTerms.Median,hideLoaderHandle}));const stdDevMinLineSeries=await initializeStatisticSeries({xAxis,yAxis,type:OverlayTerms.StdDev,hideLoaderHandle});updateSeriesStorage(stdDevMinLineSeries.uid,{upper:false});const stdDevMaxLineSeries=await initializeStatisticSeries({xAxis,yAxis,type:OverlayTerms.StdDev,hideLoaderHandle});updateSeriesStorage(stdDevMaxLineSeries.uid,{upper:true});stdDevMinLineSeries.events.on(EventTypes.Hidden,(()=>{showElement(stdDevMaxLineSeries,false)}));stdDevMinLineSeries.events.on(EventTypes.Shown,(()=>{showElement(stdDevMaxLineSeries)}));chartSeries.push(stdDevMinLineSeries);chartSeries.push(stdDevMaxLineSeries);chartSeries.push(await initializeNormalDistributionLineSeries(xAxis,yAxis,commonStrings));chartSeries.forEach((series=>{const isOverlay=getValueFromSeriesStorage(series.uid,"isOverlay");const isUpperStdDev=getValueFromSeriesStorage(series.uid,"upper");if(isOverlay===true&&isUpperStdDev!==true){handleLegendLabelsOpacity(series)}}));return chartSeries}function updateSeriesStyle$1(props){const{series:columnSeries,dataSource,seriesConfig,rendererSymbol}=props;let seriesSymbol;columnSeries.columns.each((column=>{const result=updateSymbolElementStyle({element:column,seriesConfig,seriesSymbol:seriesConfig.fillSymbol,dataSource,rendererSymbol,isChartFillSymbol:true});seriesSymbol=result.symbolWithColorInfo;const stylingInfo=result.stylingInfo;updateElementStateFillProperties(column,stylingInfo)}));if(seriesSymbol!==undefined){const seriesSymbolMap=new Map;seriesSymbolMap.set(0,seriesSymbol);notifySeriesColorsChange({data:seriesSymbolMap,htmlContainer:columnSeries.chart.htmlContainer,chartId:columnSeries.chart.id})}}async function updateHistogramSeries(props){const{seriesConfig,chartSeries,axes,chartData,fieldList,options,queryObject,chartRenderer,commonStrings}=props;const{tooltipFormatter,dataLabelFormatter}=options??{};const seriesAndOverlaysCount=6;const histogramOverlays=seriesConfig.overlays;for(let iSeries=0;iSeries<seriesAndOverlaysCount;iSeries+=1){const currentSeries=chartSeries[iSeries];if(getValueFromSeriesStorage(currentSeries.uid,"isOverlay")===true){const overlayType=getValueFromSeriesStorage(currentSeries.uid,"type");let overlay={type:WebChartTypes$2.Overlay,created:false,symbol:{type:RESTSymbolType$1.SLS}};if(overlayType===OverlayTerms.Normal){if(histogramOverlays.comparisonDistribution.symbol.color===undefined){const overlayColorIndex=getOverlayColorIndex(overlayType);histogramOverlays.comparisonDistribution.symbol.color=getOneRampColor$1({colorIndex:overlayColorIndex,histogramOverlays:true})}updateNormalDistributionLineSeries({lineSeries:currentSeries,overlay:histogramOverlays.comparisonDistribution,seriesData:chartData})}else{switch(overlayType){case OverlayTerms.Mean:overlay=histogramOverlays.mean;break;case OverlayTerms.Median:overlay=histogramOverlays.median;break;case OverlayTerms.StdDev:overlay=histogramOverlays.standardDeviation;break}if(overlay.symbol.color===undefined){const overlayColorIndex=getOverlayColorIndex(overlayType);overlay.symbol.color=getOneRampColor$1({colorIndex:overlayColorIndex,histogramOverlays:true})}updateStatisticSeries({lineSeries:currentSeries,valueFormat:getDefaultStatNumberFormat(),overlay,chartData,commonStrings})}currentSeries.events.once(EventTypes.Validated,(()=>{const isUpperStdDev=getValueFromSeriesStorage(currentSeries.uid,"upper");if(isUpperStdDev!==true){reapplyLabelOpacity({labels:currentSeries.chart?.legend?.labels,seriesId:currentSeries.id})}}))}else{showElement(currentSeries,seriesConfig.visible);updateSeriesName(currentSeries,seriesConfig.name);const rendererSymbol=await computeRendererSymbol({seriesConfig:[seriesConfig],dataItem:{},queryObject,chartRenderer});addSeriesStylingCallback({styleCallback:updateSeriesStyle$1,callbackProps:{...props,rendererSymbol},series:currentSeries,seriesConfig});updateHistogramDataLabel({series:currentSeries,seriesType:WebChartTypes$2.HistogramSeries,dataLabelsConfig:seriesConfig.dataLabels,yAxisValueFormat:axes[1].valueFormat,customDataLabelFormatter:dataLabelFormatter});updateHistogramTooltip({axes,series:currentSeries,seriesConfig,fieldList,tooltipFormatter});updateScatterPlotAndHistogramTooltipFormatter({axes,currentSeries,tooltipValueFormat:seriesConfig.dataTooltipValueFormat})}}}function addScatterPlotDataLabelFormatter(dataLabel,series){dataLabel.adapter.add("htmlOutput",((defaultDataLabelText,label)=>{let newDataLabelText=defaultDataLabelText;const scatterPlotDataLabelFormatter=getValueFromSeriesStorage(series.uid,"scatterPlotDataLabelFormatter");const{dataItem}=label;if(dataItem instanceof LineSeriesDataItem&&scatterPlotDataLabelFormatter!==undefined){const{valueX,valueY,customValue}=dataItem;const xAxisMin=(dataItem.component?.xAxis).min;const yAxisMin=(dataItem.component?.yAxis).min;const hideDataLabel=shouldHideDataLabel({dataValue:valueX,series,seriesType:WebChartTypes$2.ScatterSeries,axisMin:xAxisMin})===true||shouldHideDataLabel({dataValue:valueY,series,seriesType:WebChartTypes$2.ScatterSeries,axisMin:yAxisMin})===true;newDataLabelText=hideDataLabel===true?"":scatterPlotDataLabelFormatter(valueX,valueY,customValue)}return sanitizeHTMLOutput(newDataLabelText)}),0)}function initializeScatterPlotDataLabel(series){const dataLabel=initializeLabel(ChartDefaults.dataLabelInitialize);updateLabelStorage(dataLabel.uid,{isDataLabel:true});series.bullets.push(dataLabel);addScatterPlotDataLabelFormatter(dataLabel,series);dataLabel.html="{valueX} - {valueY}";return dataLabel}function generateScatterPlotDefaultDataLabelFormatter(props){const{numberFormatter,dataLabelsConfigContent}=props;return(x,y)=>attachInlineCSS({textSymbol:{...dataLabelsConfigContent,text:`${numberFormatter.format(x)} - ${numberFormatter.format(y)}`},format:"html"})}function updateScatterPlotDataLabel(props){const{series}=props;const dataLabel=findSeriesDataLabel(series,"bullets");updateDataLabel({...props,dataLabel,defaultDataLabelFormatter:generateScatterPlotDefaultDataLabelFormatter,seriesType:WebChartTypes$2.ScatterSeries})}function generateScatterPlotTooltipTextCallback(props){const{axes,seriesConfig,series,fieldList}=props;const{dataTooltipVisible}=seriesConfig;let scatterPlotTooltipFormatter;const strongColon=getDirectionallyStrongCharacter(series.rtl);if(dataTooltipVisible===false){scatterPlotTooltipFormatter=(_x,_y,_sizePolicyValue)=>""}else{scatterPlotTooltipFormatter=(x,y,sizePolicyValue)=>{const xAlias=getFieldAlias(fieldList,seriesConfig.x);const xLabel=getTooltipHeadingText(xAlias,axes?.[0].title?.content?.text);const yAlias=getFieldAlias(fieldList,seriesConfig.y);const yLabel=getTooltipHeadingText(yAlias,axes?.[1].title?.content?.text);const tooltipValueX=formatTooltipValue({series,callbackName:"tooltipValueXNumberFormatCallback",value:x});const tooltipValueY=formatTooltipValue({series,callbackName:"tooltipValueYNumberFormatCallback",value:y});let finalTooltipText=`<b>${xLabel}${strongColon} </b>${tooltipValueX}<br /><b>${yLabel}${strongColon} </b>${tooltipValueY}`;if(sizePolicyValue!==undefined&&seriesConfig.sizePolicy?.field!==undefined){const zLabel=getFieldAlias(fieldList,seriesConfig.sizePolicy?.field);const tooltipSizePolicyValue=formatTooltipValue({series,callbackName:"tooltipValueYNumberFormatCallback",value:sizePolicyValue});finalTooltipText+=`<br /><b>${zLabel}${strongColon} </b>${tooltipSizePolicyValue}<br /><b>`}return finalTooltipText}}return scatterPlotTooltipFormatter}function initializeScatterPlotTooltip(marker,series){marker.tooltipHTML=ChartDefaults.htmlEmptyContent;marker.adapter.add("tooltipHTML",((defaultTooltipHTML,target)=>{let output=defaultTooltipHTML;const{chart}=series;if(chart!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{dataTooltipVisible}=config?.series[0]??{};if(dataTooltipVisible===false){output=""}else{const scatterPlotTooltipFormatter=getValueFromSeriesStorage(series.uid,"scatterPlotTooltipFormatter");if(target.isHidden===false&&scatterPlotTooltipFormatter!==undefined){const{dataItem}=target;if(dataItem instanceof LineSeriesDataItem){const{valueX,valueY,customValue:sizePolicyValue}=dataItem;output=scatterPlotTooltipFormatter(valueX,valueY,sizePolicyValue)}}}}return sanitizeHTMLOutput(output)}))}function updateScatterPlotTooltip(props){const{series,tooltipFormatter}=props;updateSeriesStorage(series.uid,{scatterPlotTooltipFormatter:tooltipFormatter??generateScatterPlotTooltipTextCallback(props)})}function hasSizePolicyChanged(props){const{series,seriesConfig,newMin,newMax}=props;const existingHeatRules=series.heatRules.getIndex(0);let changed=existingHeatRules===undefined&&seriesConfig.sizePolicy!==undefined||existingHeatRules!==undefined&&seriesConfig.sizePolicy===undefined;if(changed===false&&existingHeatRules!==undefined){const sameMinMax=existingHeatRules.min===newMin&&existingHeatRules.max===newMax;const sameField=series.dataFields.customValue===seriesConfig.sizePolicy?.field;const sameScaleType=seriesConfig.sizePolicy?.scaleType===SizePolicyScaleTypes.Linear&&existingHeatRules.logarithmic!==true||seriesConfig.sizePolicy?.scaleType===SizePolicyScaleTypes.Logarithmic&&existingHeatRules.logarithmic===true;changed=(sameMinMax&&sameField&&sameScaleType)===false}return changed}function updateSizePolicy(seriesConfig,series){const{sizePolicy}=seriesConfig;const existingHeatRules=series.heatRules.getIndex(0);let heatRulesChanged=false;if(sizePolicy!==undefined){const{scaleType,field,minSize,maxSize}=sizePolicy;const marker=findBulletMarker(series);if(marker!==undefined){const defaultSizePolicy=getDefaultScatterPlotSizePolicy();const newMin=minSize??defaultSizePolicy.minSize;const newMax=maxSize??defaultSizePolicy.maxSize;if(existingHeatRules!==undefined){if(hasSizePolicyChanged({series,seriesConfig,newMin,newMax})===true){heatRulesChanged=true;existingHeatRules.min=newMin;existingHeatRules.max=newMax;existingHeatRules.logarithmic=scaleType===SizePolicyScaleTypes.Logarithmic}}else{heatRulesChanged=true;series.heatRules.push({target:marker,property:"minWidth",min:newMin,max:newMax,dataField:"customValue",logarithmic:scaleType===SizePolicyScaleTypes.Logarithmic})}series.dataFields.customValue=field}}else if(existingHeatRules!==undefined){series.heatRules.pop();series.dataFields.customValue=undefined;heatRulesChanged=true}return heatRulesChanged}function refreshChart(chart){if(chart!==undefined)chart.validateData();const trendLineSeries=chart?.series?.values?.find((s=>getValueFromSeriesStorage(s.uid,"isOverlay")===true));if(trendLineSeries!==undefined)trendLineSeries.validateData()}async function initializeTrendLine(props){const{xAxis,yAxis,x,y,name,hideLoaderHandle}=props;const trendLineSeries=new LineSeries;updateSeriesName(trendLineSeries,name);attachLoaderHandle(trendLineSeries,hideLoaderHandle);trendLineSeries.ignoreMinMax=true;updateSeriesStorage(trendLineSeries.uid,{isOverlay:true,type:OverlayTerms.Trendline});trendLineSeries.dataFields.valueX=x;trendLineSeries.dataFields.valueY=y;trendLineSeries.xAxis=xAxis;trendLineSeries.yAxis=yAxis;trendLineSeries.hidden=true;return trendLineSeries}function updateTrendLine(props){const{trendLine,seriesConfig,valueFormat,chartData,defaultR2Value}=props;const defaults=ChartDefaults.scatterPlotSeries;if(chartData!==undefined){trendLine.data=chartData.trendLinePoints??defaults.trendLinePoints;const formatLocale=getValueFromChartStorage(trendLine.chart.uid,"formatLocale");const r2Value=Number.isFinite(chartData.r2)===true?`${format({value:chartData.r2??defaults.r2,valueFormat,iLocale:trendLine.chart.language.locale,formatLocale})}`:undefined;const r2Label=r2Value!==undefined?`R = ${r2Value}`:defaultR2Value;updateSeriesName(trendLine,r2Label)}trendLine.hiddenInLegend=seriesConfig.overlays.trendLine.created!==true;const showTrendline=seriesConfig.overlays.trendLine.created===true&&seriesConfig.overlays.trendLine.visible!==false;const trendLineSymbol=seriesConfig.overlays.trendLine.symbol;if(trendLineSymbol.color===undefined)trendLineSymbol.color=getOneRampColor$1({colorIndex:1});updateLineElements({element:trendLine,lineSymbol:seriesConfig.overlays.trendLine.symbol,visible:showTrendline})}async function initializeScatterPlotSeries(props){const{chart,seriesConfig,axisPair,hideLoaderHandle,selectionTheme,ignoreSmoothRenderingLimit}=props;const defaults=ChartDefaults.scatterPlotSeries;const[xAxis,yAxis]=axisPair;const{x,y,overlays,name,id}=seriesConfig;const chartSeries=[];const lineSeries=new LineSeries;updateSeriesStorage(lineSeries.uid,{type:WebChartTypes$2.ScatterSeries});lineSeries.id=id;attachLoaderHandle(lineSeries,hideLoaderHandle);lineSeries.hiddenInLegend=true;lineSeries.dataFields.valueX=x;lineSeries.dataFields.valueY=y;[lineSeries.xAxis]=axisPair;if(axisPair[1]!==undefined)[,lineSeries.yAxis]=axisPair;const marker=initializeMarker({chart,lineSeries});initializeScatterPlotTooltip(marker,lineSeries);initializeScatterPlotDataLabel(lineSeries);lineSeries.strokeOpacity=defaults.strokeOpacity;lineSeries.minDistance*=Math.ceil(lineSeries.data.length/1e4);lineSeries.hidden=true;setSelectionTheme({element:marker,customSelectionTheme:selectionTheme});adjustValueAxisBoundsOnSeriesEvents(lineSeries);handlePointsOutOfPlottingArea({chart,series:lineSeries,seriesType:WebChartTypes$2.ScatterSeries,marker,ignoreSmoothRenderingLimit});chartSeries.push(lineSeries);const trendLineOverlay=overlays.trendLine;const regSeries=await initializeTrendLine({xAxis,yAxis,x,y,hideLoaderHandle,name,visible:trendLineOverlay.visible});handleLegendLabelsOpacity(regSeries);chartSeries.push(regSeries);setAccessibilityFeatures(lineSeries);return chartSeries}function updateMarkersStyle(props){const{seriesConfig,dataSource,series}=props;const{chart}=series;const marker=findBulletMarker(series);const heatRulesChanged=updateSizePolicy(seriesConfig,series);const styleCallback=()=>{if(marker!==undefined){let seriesSymbol;let stylingInfo;marker.clones.each((markerClone=>{const rendererSymbol=getRendererElementSymbol({dataItem:markerClone.dataItem?.dataContext,seriesConfig,chartSubType:ChartSubType$1.NonSpecific});const result=updateSymbolElementStyle({element:markerClone,seriesSymbol:seriesConfig.markerSymbol,seriesConfig,dataSource,rendererSymbol});seriesSymbol=result.symbolWithColorInfo;stylingInfo=result.stylingInfo;updateElementStateFillProperties(markerClone,stylingInfo)}));if(seriesSymbol!==undefined){const seriesColorMap=new Map;seriesColorMap.set(0,seriesSymbol);notifySeriesColorsChange({data:seriesColorMap,htmlContainer:chart.htmlContainer,chartId:chart.id})}}};if(heatRulesChanged===true){series.events.disableType(EventTypes.Validated);refreshChart(chart);chart.events.once(EventTypes.Validated,(()=>{styleCallback();series.events.enableType(EventTypes.Validated);series.dispatchImmediately(EventTypes.Validated)}))}else{styleCallback()}}function updateScatterPlotSeries(props){const{seriesConfig,chartSeries,axes,fieldList,chartData,options,commonStrings}=props;const{tooltipFormatter,dataLabelFormatter}=options??{};const trendlineSeries=chartSeries.find((s=>getValueFromSeriesStorage(s.uid,"isOverlay")===true));const defaultR2Value=commonStrings.notAvailable;if(trendlineSeries!==undefined){const updateTrendlineProps={trendLine:trendlineSeries,seriesConfig,valueFormat:getDefaultStatNumberFormat(),chartData,defaultR2Value};addSeriesStylingCallback({styleCallback:updateTrendLine,callbackProps:updateTrendlineProps,series:trendlineSeries,seriesConfig})}const markerSeries=chartSeries.find((s=>getValueFromSeriesStorage(s.uid,"isOverlay")!==true));if(markerSeries!==undefined){const marker=findBulletMarker(markerSeries);if(marker!==undefined){addSeriesStylingCallback({styleCallback:updateMarkersStyle,callbackProps:props,series:markerSeries,seriesConfig});updateScatterPlotAndHistogramTooltipFormatter({axes,currentSeries:markerSeries,tooltipValueFormat:seriesConfig.dataTooltipValueFormat});updateScatterPlotTooltip({axes,seriesConfig,series:markerSeries,fieldList,tooltipFormatter})}updateScatterPlotDataLabel({series:markerSeries,seriesType:WebChartTypes$2.ScatterSeries,dataLabelsConfig:seriesConfig.dataLabels,yAxisValueFormat:axes[1].valueFormat,customDataLabelFormatter:dataLabelFormatter})}}function convertErrorOrWarningToMessage(errors){let message="";for(let i=0;i<errors.length;i+=1){const error=errors[i];message+=`<li>${error.message}</li>`}return`<ol>${message}</ol>`}function resetModal(chart){if(chart.modal!==undefined){chart.modal.closable=true;chart.modal.content="";chart.closeModal()}}async function isValidConfig(props){const{chart,chartConfig,queryObject,createMessage}=props;let seriesType;if(chartConfig?.series!==undefined)seriesType=getSeriesType$1(chartConfig.series,0);const status=await validateWebChart({input:chartConfig,seriesType,queryObject});const locale=getValueFromChartStorage(chart.uid,"locale");const errorStrings=await fetchErrorsStrings(locale);const{schemaErrors,customErrors,warnings}=status;if(chart.modal!==undefined){chart.modal.closable=false;if(chartConfig===undefined){const title=createMessage===undefined?errorStrings.modalHeaders.newChart:undefined;const message=createMessage??errorStrings.errors.newChartRequest;chart.modal.events.once("opened",(()=>{if(createMessage!==undefined){const modalHeader=chart.modal?.elements?.title?.parentElement??null;if(modalHeader!==null){modalHeader.style.visibility="hidden"}}}));chart.openModal(message,title)}else if(schemaErrors.length>0){const polishedMessage=errorStrings.errors.simpleError;chart.openModal(polishedMessage,errorStrings.modalHeaders.error)}else if(customErrors.length>0){const message=convertErrorOrWarningToMessage(customErrors);chart.openModal(message,errorStrings.modalHeaders.error)}else if(warnings.length>0){const message=convertErrorOrWarningToMessage(warnings);const polishedMessage=`<p>${errorStrings.errors.warningRequest}</p>${message}`;chart.openModal(polishedMessage,errorStrings.modalHeaders.warning)}}return status}async function raiseInvalidDataWarning(props){const{chart,options,invalidType,elementCount,seriesCount,queryObject}=props;if(chart.modal!==undefined&&isElementValid(chart)){const locale=getValueFromChartStorage(chart.uid,"locale");const formatLocale=getValueFromChartStorage(chart.uid,"formatLocale");chart.modal.closable=false;const warningObject=await getDataWarningObject({invalidType,elementCount,seriesCount,chartLimits:options?.chartLimits,queryObject,filterBySelection:options?.filterBySelection,locale,formatLocale});const errorStrings=await fetchErrorsStrings(locale);let header=errorStrings.modalHeaders.invalidChart;switch(warningObject.keyword){case DataWarningKeywords$1.BarElementExceedsLimit:case DataWarningKeywords$1.LineChartExceedsLimit:case DataWarningKeywords$1.PieChartExceedsLimit:case DataWarningKeywords$1.GaugeExceedsLimit:case DataWarningKeywords$1.BoxPlotExceedsLimit:case DataWarningKeywords$1.BoxPlotOutliersExceedsLimit:header=errorStrings.modalHeaders.tooManyFeatures;break;case DataWarningKeywords$1.PieChartMixOfNegativePositiveSlices:header=errorStrings.modalHeaders.cannotCombineNegativeAndPositiveSlices;break;case DataWarningKeywords$1.NegativeValueInSqrtCalculation:case DataWarningKeywords$1.NegativeValueInLogCalculation:header=errorStrings.modalHeaders.invalidData;break;case DataWarningKeywords$1.EmptyDataSet:header=options?.noDataOptions?.noDataTitle??errorStrings.modalHeaders.noDataAvailable;warningObject.message=options?.noDataOptions?.noDataMessage??warningObject.message;break}chart.openModal(warningObject.message,header);notifyBadDataRaise(warningObject,chart.htmlContainer)}}async function raiseNoDataWarning(props){const{chart,chartConfig,options,queryObject}=props;if(options?.noDataOptions?.displayMessageWhenNoData!==false&&(chart.modal?.content===undefined||chart.modal?.content==="")&&isEmptyDataset(chartConfig,chart.data)===true){await raiseInvalidDataWarning({chart,invalidType:DataWarningKeywords$1.EmptyDataSet,options,queryObject})}}function addPieChartDataLabelFormatter(pieSeries){pieSeries.labels.template.adapter.add("html",((defaultDataLabelText,label)=>{const pieChartDataLabelFormatter=getValueFromSeriesStorage(pieSeries.uid,"pieChartDataLabelFormatter");let newDataLabelText=defaultDataLabelText;const{dataItem}=label;if(dataItem instanceof PieSeriesDataItem){const{slice}=dataItem;if(slice!==undefined&&isElementVisible(slice)===false){newDataLabelText=""}else if(pieChartDataLabelFormatter!==undefined){const{value,percent}=dataItem.values?.value??{};if(value!==undefined&&value!==0){const category=`${dataItem.properties?.category??defaultDataLabelText}`;newDataLabelText=pieChartDataLabelFormatter(`${category}`,value,percent)}}}if(isEmptyStringField$1(newDataLabelText)===true)newDataLabelText=ChartDefaults.htmlEmptyContent;return sanitizeHTMLOutput(newDataLabelText)}))}function initializePieChartDataLabel(pieSeries){const labelsTemplate=pieSeries.labels.template;labelsTemplate.maxWidth=ChartDefaults.pieChart.dataLabels.maxWidth??NaN;labelsTemplate.wrap=ChartDefaults.pieChart.dataLabels.wrap??true;pieSeries.alignLabels=ChartDefaults.pieChart.alignDataLabels;labelsTemplate.events.on(EventTypes.Over,(event=>{const{dataItem}=event.target??{};if(dataItem instanceof PieSeriesDataItem){dataItem.slice.showTooltip()}}));labelsTemplate.events.on(EventTypes.Hit,(event=>{const{dataItem}=event.target??{};if(dataItem instanceof PieSeriesDataItem){dataItem.slice.isActive=dataItem.slice.isActive!==true}}));addPieChartDataLabelFormatter(pieSeries)}function generatePieChartDefaultDataLabelFormatter(pieSeries,seriesConfig){const{numericValueFormat,percentValueFormat,displayNumericValueOnDataLabel,displayPercentageOnDataLabel,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix,dataLabelsCharacterLimit}=seriesConfig;const genericLabelFormatter=generatePieChartValueFormatter({iLocale:pieSeries.chart.language.locale,pieChart:pieSeries.chart,valueIntlOptions:numericValueFormat?.intlOptions,percentageIntlOptions:percentValueFormat?.intlOptions,displayNumericValue:displayNumericValueOnDataLabel??ChartDefaults.pieChart.displayNumericValueOnDataLabel,displayPercentage:displayPercentageOnDataLabel??ChartDefaults.pieChart.displayPercentageOnDataLabel,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix});const truncationCallback=generateTruncationCallback(dataLabelsCharacterLimit);const strongSpace=getDirectionallyStrongCharacter(pieSeries.rtl," ");return(category,value,percent)=>{const formattedValues=genericLabelFormatter(category,value,percent);const truncatedCategory=truncationCallback(category);let newDataLabelText=isEmptyStringField$1(truncatedCategory)===false?`${truncatedCategory}${strongSpace}`:"";newDataLabelText=`${newDataLabelText}${formattedValues}`;if(seriesConfig.dataLabels?.content!==undefined){newDataLabelText=attachInlineCSS({textSymbol:{...seriesConfig.dataLabels.content,text:newDataLabelText},format:"html",defaults:{...ChartDefaults.pieChart.dataLabels,wrap:seriesConfig.optimizeDataLabelsOverlapping??ChartDefaults.pieChart.dataLabels.wrap}})}return newDataLabelText}}function updatePieChartDataLabel(props){const{pieSeries,seriesConfig,dataLabelFormatter}=props;const{dataLabels:dataLabelsConfig}=seriesConfig;const dataLabelsOffset=seriesConfig.dataLabelsOffset??ChartDefaults.pieChart.dataLabelsOffset;updateSeriesStorage(pieSeries.uid,{pieChartDataLabelFormatter:dataLabelFormatter??generatePieChartDefaultDataLabelFormatter(pieSeries,seriesConfig)});updateLabel(pieSeries.labels.template,dataLabelsConfig,{...ChartDefaults.pieChart.dataLabels,wrap:seriesConfig.optimizeDataLabelsOverlapping??ChartDefaults.pieChart.alignDataLabels});pieSeries.alignLabels=seriesConfig.alignDataLabels??ChartDefaults.pieChart.alignDataLabels;const currentDataLabelsOffset=typeof pieSeries.labels.template.radius==="number"?pieSeries.labels.template.radius:pieSeries.labels.template.radius.percent;pieSeries.chart.invalidateData();if(dataLabelsOffset!==undefined&&Number.isFinite(dataLabelsOffset)===true&&currentDataLabelsOffset!==dataLabelsOffset){pieSeries.labels.template.radius=dataLabelsOffset;pieSeries.invalidate()}}function generateDefaultPieChartTooltipHTMLFormatter(pieSeries,seriesConfig){let pieChartTooltipFormatter=(_category,_value,_percent)=>ChartDefaults.htmlEmptyContent;const{numericValueFormat,percentValueFormat,dataTooltipValueFormat,dataTooltipPercentFormat,displayNumericValueOnTooltip,displayPercentageOnTooltip,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix}=seriesConfig;pieChartTooltipFormatter=(category,value,percent)=>{let output=ChartDefaults.htmlEmptyContent;const pieChartFormatter=generatePieChartValueFormatter({iLocale:pieSeries.chart.language.locale,pieChart:pieSeries.chart,valueIntlOptions:(dataTooltipValueFormat??numericValueFormat)?.intlOptions,percentageIntlOptions:(dataTooltipPercentFormat??percentValueFormat)?.intlOptions,displayNumericValue:displayNumericValueOnTooltip??ChartDefaults.pieChart.displayNumericValueOnTooltip,displayPercentage:displayPercentageOnTooltip??ChartDefaults.pieChart.displayPercentageOnTooltip,valuePrefix,valueSuffix,percentagePrefix,percentageSuffix});const formattedValues=pieChartFormatter("",value,percent);if(isEmptyStringField$1(category)===false)output=`<b>${category}</b>`;if(isEmptyStringField$1(formattedValues)===false){const valueAfterEscapeSpecialChars=escapeBrackets(formattedValues);output=isEmptyStringField$1(category)===false?`${output}<br />${valueAfterEscapeSpecialChars}`:`${valueAfterEscapeSpecialChars}`}return output};return pieChartTooltipFormatter}function updateSliceTooltipBackgroundColor(slice){if(slice.tooltip!==undefined){let tooltipFill=slice.fill;if(tooltipFill instanceof LinePattern)tooltipFill=tooltipFill.stroke;else if(tooltipFill instanceof RectPattern)tooltipFill=tooltipFill.backgroundFill;slice.tooltip.background.fill=tooltipFill}}function initializePieChartTooltip(pieSeries){const sliceTemplate=pieSeries.slices.template;sliceTemplate.tooltipHTML=ChartDefaults.htmlEmptyContent;sliceTemplate.adapter.add("tooltipHTML",((defaultTooltipHTML,slice)=>{let output=defaultTooltipHTML;const{chart}=pieSeries;if(chart!==undefined&&slice.tooltip!==undefined){const config=getValueFromChartStorage(chart.uid,"config");const{dataTooltipVisible}=config?.series[0]??{};if(dataTooltipVisible===false){slice.tooltip.disabled=true}else{const pieChartTooltipFormatter=getValueFromSeriesStorage(pieSeries.uid,"pieChartTooltipFormatter");if(pieChartTooltipFormatter!==undefined){const{dataItem}=slice;if(dataItem instanceof PieSeriesDataItem){const category=dataItem.properties.category??"";const value=dataItem.values?.value?.value;const percent=dataItem.values?.value?.percent;if(typeof value==="number"&&value!==0&&config?.series?.[0]?.dataTooltipVisible!==false){slice.tooltip.disabled=false;updateSliceTooltipBackgroundColor(slice);output=pieChartTooltipFormatter(`${category}`,value,percent)}else{slice.tooltip.disabled=true}}}}}return sanitizeHTMLOutput(output)}))}function updatePieChartTooltip(props){const{series,seriesConfig,tooltipFormatter}=props;updateSeriesStorage(series.uid,{pieChartTooltipFormatter:tooltipFormatter??generateDefaultPieChartTooltipHTMLFormatter(series,seriesConfig)})}function generateNonAggregatedSliceId(props){const{dataContext,dataIndex,objectIdField}=props;return`${pieChartSpecialSlicesId$1.sliceIdPrefix}-${dataContext[objectIdField??""]??dataIndex}`}function generateSliceId(props){const{dataContext,isNonAggregatedChart,x,dataIndex,objectIdField,isPieFromFields}=props;let sliceId="";if(isPieFromFields===true){sliceId=dataContext[ChartDefaults.originalCategoryValue]??dataContext[defaultPieFromFieldsName$1]}else if(isNonAggregatedChart===true){sliceId=generateNonAggregatedSliceId({dataContext,dataIndex,objectIdField})}else{sliceId=dataContext[ChartDefaults.typeOrDomainIdValue]??dataContext[ChartDefaults.originalCategoryValue];if(sliceId===""){sliceId=pieChartSpecialSlicesId$1.emptySliceId}else if(sliceId===null){sliceId=pieChartSpecialSlicesId$1.nullSliceId}sliceId=sliceId??dataContext[x]}if(sliceId===undefined){sliceId=pieChartSpecialSlicesId$1.undefinedSliceId}return`${sliceId}`}function initializePieChartTicks(pieSeries){pieSeries.ticks.template.adapter.add("disabled",((disabledValue,tick)=>{const sliceWithNoValue=tick.dataItem?.values?.value?.value===0||Number.isFinite(tick.dataItem?.values?.value?.value)===false;return sliceWithNoValue===true||disabledValue}))}function getSliceSymbol(props){const{dataContext,pieSlicesSymbols,seriesConfig}=props;let sliceSymbol={...seriesConfig.fillSymbol};const isGroupOfSlices=isElementFromGroupOfSlices(dataContext);if(isGroupOfSlices===true){sliceSymbol={...ChartDefaults.pieChart.sliceGrouping.fillSymbol,...pieSlicesSymbols?.groupOfSlices?.fillSymbol}}else{const sliceId=dataContext[ChartDefaults.pieChart.technicalFieldSliceId];const sliceFromConfig=pieSlicesSymbols?.slices?.find((sliceConfig=>sliceConfig.sliceId===sliceId));sliceSymbol=cloneDeep$1(sliceFromConfig?.fillSymbol??seriesConfig.fillSymbol)}return sliceSymbol}function overrideSeriesDefaultColors(props){const{chartData,pieSeries,pieSlicesSymbols,seriesConfig}=props;if(pieSeries.slices.length===0){const colorList=[];chartData?.forEach((dataContext=>{const sliceSymbol=getSliceSymbol({dataContext,pieSlicesSymbols,seriesConfig});colorList.push(esriColorToAmChartsColor(sliceSymbol.color))}));if(colorList.length>0)pieSeries.colors.list=colorList}}function initializePieChartSeries(props){const{seriesConfig,hideLoaderHandle,selectionTheme}=props;const{x,y,id,visible}=seriesConfig;const pieSeries=new PieSeries;pieSeries.id=id;attachLoaderHandle(pieSeries,hideLoaderHandle);pieSeries.dataFields.value=y;pieSeries.dataFields.category=x;const pieDefaults=ChartDefaults.pieChart;pieSeries.startAngle=pieDefaults.min;pieSeries.endAngle=360+pieSeries.startAngle;initializePieChartTicks(pieSeries);initializePieChartTooltip(pieSeries);initializePieChartDataLabel(pieSeries);const customSelectionTheme=selectionTheme!==undefined&&selectionTheme.selectedElementsTheme?.transformation?.opacity===undefined?{...selectionTheme,selectedElementsTheme:{...selectionTheme?.selectedElementsTheme,transformation:{...selectionTheme?.selectedElementsTheme?.transformation,opacity:1}}}:selectionTheme;setSelectionTheme({element:pieSeries.slices.template,useNativeState:true,customSelectionTheme});pieSeries.slices.template.states.removeKey("hover");setAccessibilityFeatures(pieSeries);pieSeries.hidden=visible===false;handleLegendLabelsOpacity(pieSeries);return pieSeries}function updatePieSeriesStyle(props){const{series:pieSeries,pieSlicesSymbols,seriesConfig}=props;pieSeries.defaultState.reset();pieSeries.slices.each(((slice,dataIndex)=>{const dataContext=slice.dataItem?.dataContext;const sliceSymbol=getSliceSymbol({dataContext,pieSlicesSymbols,seriesConfig});updateFillElements({element:slice,fillSymbol:sliceSymbol,defaultToColorFromRamp:true,colorRampIndex:dataIndex,isChartFillSymbol:true})}))}async function computePieChartSlicesProps(props){const{chartConfig,queryObject,usePopupTemplateFieldsInfo,labelUpdateNeeded,commonStrings}=props;const{series,dataSource}=chartConfig;const seriesConfig=series[0];const{x}=seriesConfig;const isNonAggregatedChart=isChartAggregated({chartConfig})===false;const chartSubType=getChartSubType$1([seriesConfig]);const isPieFromFields=isPieChartFromFields$1(series);let objectIdField;let fieldList;if(dataSource.type===WebChartDataSourceTypes$1.Layer){const layer=getLayerFromQueryObject$1(queryObject);objectIdField=layer.objectIdField;fieldList=await fetchLayerFieldsInfo$1(queryObject,usePopupTemplateFieldsInfo)}return{x,isNonAggregatedChart,objectIdField,isPieFromFields,seriesConfig,dataSource,fieldList,labelUpdateNeeded,chartSubType,commonStrings}}function computeSliceStyle(props){const{dataContext,seriesConfig,isGroupOfSlices,sliceFromConfig,dataIndex,dataSource}=props;const{y}=seriesConfig;const chartSubType=getChartSubType$1([seriesConfig]);const slice=new Slice;slice.dataItem={dataContext};const symbolFromDataContext=sliceFromConfig?.fillSymbol;const sliceSymbol=isGroupOfSlices===false?cloneDeep$1(symbolFromDataContext??seriesConfig.fillSymbol):{...ChartDefaults.pieChart.sliceGrouping.fillSymbol,...seriesConfig.sliceGrouping?.fillSymbol};const rendererSymbol=getRendererElementSymbol({dataItem:dataContext,seriesConfig,chartSubType});const{symbolWithColorInfo}=updateSymbolElementStyle({element:slice,seriesConfig,y,seriesSymbol:sliceSymbol,seriesIndex:dataIndex,dataSource,rendererSymbol,isChartFillSymbol:true});return symbolWithColorInfo}function updateLabelInDataContext(props){const{dataContext,newLabel,x}=props;if(newLabel===undefined){if(dataContext[ChartDefaults.originalCategoryValue]!==undefined)dataContext[x]=dataContext[ChartDefaults.originalCategoryValue]}else if(dataContext[x]!==newLabel){if(dataContext[ChartDefaults.originalCategoryValue]===undefined)dataContext[ChartDefaults.originalCategoryValue]=dataContext[x];dataContext[x]=newLabel}}function sortSlices(props){const{chart,chartConfig}=props;const orderByFields=chartConfig.series[0].query?.orderByFields;if(orderByFields!==undefined){sortFetchedData({arrayToSort:chart.data,orderByFieldsConfig:orderByFields,chartConfig});const{slices}=chartConfig.series[0];if(slices!==undefined){slices.sort(((sliceA,sliceB)=>{const sliceAIndex=chart.data.findIndex((dataItem=>dataItem[ChartDefaults.pieChart.technicalFieldSliceId]===sliceA.sliceId));const sliceBIndex=chart.data.findIndex((dataItem=>dataItem[ChartDefaults.pieChart.technicalFieldSliceId]===sliceB.sliceId));return sliceAIndex-sliceBIndex}))}}chart.invalidateData()}function savePieChartLabels(props){const{chart,newChartConfig,pieSlicesSymbols}=props;const pieSeriesConfig=newChartConfig.series[0];const isPieFromFields=isPieChartFromFields$1(newChartConfig.series);const x=isPieFromFields===true?defaultPieFromFieldsName$1:pieSeriesConfig.x;chart.data.forEach((dataContext=>{const isGroupOfSlices=isElementFromGroupOfSlices(dataContext);const sliceId=dataContext[ChartDefaults.pieChart.technicalFieldSliceId];const newLabel=isGroupOfSlices===true?pieSeriesConfig.sliceGrouping?.label:retrievePieSliceInfoFromConfig(pieSlicesSymbols?.slices,sliceId)?.label;updateLabelInDataContext({dataContext,x,newLabel})}));sortSlices({chart,chartConfig:newChartConfig})}function computeSliceLabel(props){const{dataContext,sliceFromConfig,isGroupOfSlices,seriesConfig,fieldList,isPieFromFields,labelUpdateNeeded,commonStrings}=props;const{sliceGrouping}=seriesConfig;let{x}=seriesConfig;if(isPieFromFields===true)x=defaultPieFromFieldsName$1;const currentLabel=dataContext[x]??dataContext[ChartDefaults.originalCategoryValue];const originalLabel=dataContext[ChartDefaults.originalCategoryValue]??currentLabel;let newLabel=currentLabel;if(labelUpdateNeeded===true){if(isGroupOfSlices===true){newLabel=sliceGrouping?.label??sliceGrouping?.originalLabel??commonStrings?.pieChart.defaultSliceGroupingLabel}else if(sliceFromConfig!==undefined||fieldList!==undefined){newLabel=sliceFromConfig?.label??originalLabel;const typeOrDomainIdValue=dataContext[ChartDefaults.typeOrDomainIdValue];if(typeOrDomainIdValue!==undefined&&`${newLabel}`===`${typeOrDomainIdValue}`){newLabel=originalLabel}else if(newLabel===originalLabel&&originalLabel!==undefined&&originalLabel!==null){newLabel=getFieldAlias(fieldList,originalLabel)}}else if(sliceFromConfig===undefined){newLabel=originalLabel}if(newLabel===ChartDefaults.nullValue)newLabel="null";else if(newLabel!==null&&newLabel!==undefined)newLabel=`${newLabel}`}return newLabel}function computePieChartSlicesStyleAndLabel(data,props){const{x,isNonAggregatedChart,objectIdField,isPieFromFields,seriesConfig,dataSource,fieldList,labelUpdateNeeded,chartSubType,commonStrings}=props;const slices=[];let groupOfSlicesSymbols;let groupOfSlices;data.forEach(((dataContext,dataIndex)=>{const sliceId=generateSliceId({dataContext,x,isNonAggregatedChart,dataIndex,objectIdField,isPieFromFields});dataContext[ChartDefaults.pieChart.technicalFieldSliceId]=sliceId;const sliceFromConfig=retrievePieSliceInfoFromConfig(seriesConfig.slices,sliceId);const isGroupOfSlices=isElementFromGroupOfSlices(dataContext);const symbolWithColorInfo=computeSliceStyle({dataContext,seriesConfig,isGroupOfSlices,sliceFromConfig,dataIndex,dataSource,chartSubType});const sliceLabel=computeSliceLabel({dataContext,sliceFromConfig,isGroupOfSlices,seriesConfig,fieldList,isPieFromFields,labelUpdateNeeded,commonStrings});const slicePayload={sliceId,label:sliceLabel,fillSymbol:symbolWithColorInfo};slicePayload.originalLabel=sliceFromConfig?.originalLabel??(dataContext?.[ChartDefaults.originalCategoryValue]!==undefined?dataContext?.[ChartDefaults.originalCategoryValue]:slicePayload.label);if(isGroupOfSlices===false){slices.push(slicePayload)}else{groupOfSlices=dataContext[ChartDefaults.pieChart.technicalFieldGroupedSlices];if(seriesConfig.sliceGrouping!==undefined){groupOfSlicesSymbols={sliceId:seriesConfig.sliceGrouping.sliceId,percentageThreshold:seriesConfig.sliceGrouping.percentageThreshold,label:sliceLabel,originalLabel:seriesConfig.sliceGrouping.originalLabel??sliceLabel,fillSymbol:symbolWithColorInfo}}}}));return{slices,groupOfSlicesSymbols,groupOfSlices}}async function computePieChartSlices(props){const{chart}=props;const pieChartSlicesProps=await computePieChartSlicesProps(props);const{slices,groupOfSlicesSymbols,groupOfSlices}=computePieChartSlicesStyleAndLabel(chart.data,pieChartSlicesProps);const{slices:groupedSlicesSymbols}=computePieChartSlicesStyleAndLabel(groupOfSlices??[],pieChartSlicesProps);return{slices,groupedSlices:groupedSlicesSymbols,groupOfSlices:groupOfSlicesSymbols}}function updatePieChartTicks(pieSeries,seriesConfig){const{ticks}=seriesConfig;const hideTicks=ticks?.visible===false||seriesConfig.dataLabels===undefined||seriesConfig.dataLabels?.visible===false||seriesConfig.dataLabelsOffset!==undefined&&seriesConfig.dataLabelsOffset<=0;pieSeries.ticks.template.disabled=hideTicks;pieSeries.ticks.template.strokeOpacity=ChartDefaults.pieChart.ticksOpacity;const lineSymbol=ticks?.lineSymbol??getDefaultLineSymbol({color:defaultPieTickColor});if(hideTicks===true)lineSymbol.width=0;updateLineElements({element:pieSeries.ticks.template,lineSymbol,visible:hideTicks===false})}function updatePieChartSeries(props){const{chart,seriesConfig,series:pieSeries,pieSlicesSymbols,options}=props;const{tooltipFormatter,dataLabelFormatter}=options??{};const{x,y,innerRadius,startAngle,endAngle}=seriesConfig;const chartSubType=getChartSubType$1([seriesConfig]);const pieDefaults=ChartDefaults.pieChart;pieSeries.dataFields.value=chartSubType!==ChartSubType$1.PieFromFields?y:defaultPieFromFieldsValue$1;pieSeries.dataFields.category=chartSubType!==ChartSubType$1.PieFromFields?x:defaultPieFromFieldsName$1;const chartRadius=chart.radius instanceof Percent?chart.radius.value:chart.radius;chart.innerRadius=percent((innerRadius??pieDefaults.innerRadius)*chartRadius);pieSeries.startAngle=startAngle??pieDefaults.min;pieSeries.endAngle=endAngle??360+pieSeries.startAngle;updatePieChartDataLabel({pieSeries,seriesConfig,dataLabelFormatter});overrideSeriesDefaultColors({chartData:chart.data,pieSeries,pieSlicesSymbols,seriesConfig});addSeriesStylingCallback({styleCallback:updatePieSeriesStyle,callbackProps:props,series:pieSeries,seriesConfig});updatePieChartTicks(pieSeries,seriesConfig);updatePieChartTooltip({series:pieSeries,seriesConfig,tooltipFormatter})}function initializeLineSeriesDataLabel(series){const dataLabel=initializeLabel(ChartDefaults.dataLabelInitialize);updateLabelStorage(dataLabel.uid,{isDataLabel:true});series.bullets.push(dataLabel);adjustLabelVisibility(WebChartTypes$2.LineSeries,dataLabel);adjustPositionForNegativeValues(WebChartTypes$2.LineSeries,dataLabel);addBarOrLineSeriesDataLabelFormatter(dataLabel,series);dataLabel.html="{valueX}";return dataLabel}function updateLineSeriesDataLabel(props){const{series}=props;const dataLabel=findSeriesDataLabel(series,"bullets");updateDataLabel({...props,dataLabel,defaultDataLabelFormatter:generateBarOrLineSeriesDefaultDataLabelFormatter,seriesType:WebChartTypes$2.LineSeries})}function initializeLineChartSeries(props){const{chart,chartConfig,seriesIndex,axisPair,hideLoaderHandle,selectionTheme,ignoreSmoothRenderingLimit,dataSourceType}=props;const numberOfChartSeries=chartConfig.series.length;const seriesConfig=chartConfig.series[seriesIndex];const{x,y,name,id}=seriesConfig;const currentSeries=new LineSeries;currentSeries.id=id;attachLoaderHandle(currentSeries,hideLoaderHandle);updateSeriesName(currentSeries,name);[currentSeries.xAxis,currentSeries.yAxis]=axisPair;const isRotated=isChartRotated({chart});const chartSubType=getChartSubType$1(chartConfig.series);const yDataField=chartSubType===ChartSubType$1.BarAndLineSplitByNoAggregation?`${y}_${getSplitByValue$1({where:seriesConfig.query?.where})}`:y;if(isRotated===true)currentSeries.dataFields.valueX=yDataField;else currentSeries.dataFields.valueY=yDataField;const axis=isRotated===true?axisPair[1]:axisPair[0];if(axis!==undefined){const xField=getXAxisDataFieldName(axis,isRotated);currentSeries.dataFields[xField]=dataSourceType===WebChartDataSourceTypes$1.Inline?x:ChartDefaults.xAxisField;currentSeries.baseAxis=axis}currentSeries.dataFields.customValue=seriesConfig?.query?.where;const marker=initializeMarker({chart,lineSeries:currentSeries,applyPropertiesToClones:false});initializeBarAndLineChartTooltip(marker,currentSeries);initializeLineSeriesDataLabel(currentSeries);setSelectionTheme({element:marker,customSelectionTheme:selectionTheme});handlePointsOutOfPlottingArea({chart,numberOfChartSeries,series:currentSeries,seriesType:WebChartTypes$2.LineSeries,marker,ignoreSmoothRenderingLimit});handleLegendLabelsOpacity(currentSeries);setAccessibilityFeatures(currentSeries);return currentSeries}function updateLineSeriesMarkersStyle(props){const{series,seriesIndex,chartSubType,dataSource,seriesConfig}=props;const marker=findBulletMarker(series);let multipleSymbolsForASeries=false;let uniqueMarkerSymbol;if(marker!==undefined){if(seriesConfig.markerVisible!==false&&seriesConfig.visible!==false){series.bulletsContainer.show()}else{series.bulletsContainer.hide()}const modifiedConfigMarkerSymbol=seriesConfig.markerSymbol??getDefaultLineChartMarkerSymbol();const markerStylingInfoList=new Set;let stylingInfo;updateMarkerElements({element:marker,markerSymbol:modifiedConfigMarkerSymbol});const yField=series.dataFields.valueY??series.dataFields.valueX??seriesConfig.y;marker.clones.each((markerClone=>{if(markerClone.dataItem instanceof LegendDataItem===false){const dataContext=markerClone.dataItem?.dataContext;const rendererSymbol=getRendererElementSymbol({seriesConfig,dataItem:dataContext,chartSubType,yField});const result=updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:modifiedConfigMarkerSymbol,element:markerClone,rendererSymbol});uniqueMarkerSymbol=result.symbolWithColorInfo;stylingInfo=result.stylingInfo;updateElementStateFillProperties(markerClone,stylingInfo);markerStylingInfoList.add(JSON.stringify(stylingInfo))}else{markerClone.states.getKey(States.CustomActive)?.reset();markerClone.states.getKey(States.CustomInactive)?.reset()}}));multipleSymbolsForASeries=markerStylingInfoList.size>1;if(multipleSymbolsForASeries===false)updateElementStateFillProperties(marker,stylingInfo)}return multipleSymbolsForASeries===false?uniqueMarkerSymbol:undefined}function getLineRendererSymbolFromDataContext(props){const{series,seriesConfig,chartSubType}=props;let rendererSymbol;const yField=series.dataFields.valueY??series.dataFields.valueX??seriesConfig.y;series.dataItems?.values.every((dataItem=>{let continueLoop=true;const dataContext=dataItem.dataContext;rendererSymbol=getRendererElementSymbol({seriesConfig,dataItem:dataContext,chartSubType,yField});if(rendererSymbol!==undefined){continueLoop=false}return continueLoop}));return rendererSymbol}function updateLineSeriesSegmentsStyle(props){const{series,seriesIndex,seriesConfig,dataSource,chartSubType}=props;const lineSeries=series;const rendererSymbol=getLineRendererSymbolFromDataContext({series:lineSeries,seriesConfig,chartSubType});const result=updateSymbolElementStyle({dataSource,seriesConfig,seriesIndex,seriesSymbol:seriesConfig.lineSymbol,element:lineSeries,rendererSymbol});showElement(lineSeries,seriesConfig.visible);return result.symbolWithColorInfo}function updateLineArea(seriesConfig,lineSeries){if(seriesConfig.showArea===true){if(seriesConfig.areaColor!==undefined){lineSeries.fill=mapColor(seriesConfig.areaColor);lineSeries.fillOpacity=1}else{lineSeries.fill=color(lineSeries.stroke.hex,1);lineSeries.fillOpacity=ChartDefaults.lineSeries.areaOpacity}}else{lineSeries.fillOpacity=0}}function updateLineSeriesStyle(props){const{series,seriesSymbolMapForEvent,seriesIndex,dataSource}=props;const seriesConfig=props.seriesConfig;const chartConfig=getValueFromChartStorage(series.chart.uid,"config");const numberOfSeries=chartConfig?.series.length??0;const chartSubType=getChartSubType$1(chartConfig?.series);const lineSymbol=updateLineSeriesSegmentsStyle({series,seriesConfig,seriesIndex,dataSource,chartSubType});const modifiedSeriesConfigForStylingMarkers=seriesConfig;let{markerSymbol}=seriesConfig;if(markerSymbol?.color===undefined){if(markerSymbol===undefined)markerSymbol=getDefaultLineChartMarkerSymbol();markerSymbol.color=lineSymbol.color;modifiedSeriesConfigForStylingMarkers.markerSymbol=markerSymbol}const uniqueMarkerSymbol=updateLineSeriesMarkersStyle({series,seriesIndex,seriesConfig:modifiedSeriesConfigForStylingMarkers,dataSource,chartSubType});seriesSymbolMapForEvent.set(seriesIndex,{lineSymbol,markerSymbol:uniqueMarkerSymbol});updateLineArea(seriesConfig,series);if(seriesSymbolMapForEvent.size===numberOfSeries){notifySeriesColorsChange({data:seriesSymbolMapForEvent,htmlContainer:series.chart.htmlContainer,chartId:series.chart.id});series.chart.feedLegend()}}function updateLineSmoothing(seriesConfig,lineSeries){if(seriesConfig.lineSmoothed===true)lineSeries.smoothing=seriesConfig.rotated===true?WebChartLineSmoothedKinds$1.MonotoneY:WebChartLineSmoothedKinds$1.MonotoneX;else lineSeries.smoothing=ChartDefaults.lineSeries.lineSmoothedKind}function updateSeriesConnectPattern(currentSeries,seriesConfig){const{nullPolicy}=seriesConfig;currentSeries.connect=nullPolicy!==WebChartNullPolicyTypes$1.Null}function updateSeriesStyle(updateLineSeriesProps){const{seriesConfig,series,seriesIndex,dataSource,seriesSymbolMapForEvent}=updateLineSeriesProps;showElement(series,seriesConfig.visible);updateLineSeriesStyle({series,seriesIndex,seriesConfig,dataSource,seriesSymbolMapForEvent})}function updateLineChartSeries(props){const{seriesConfig,series,axes,rotationChanged,inlineDisplayLabelField,seriesIndex,subtypeInfo,fieldList,options,commonStrings}=props;const{visible,name,stackedType}=seriesConfig;const yAxisValueFormat=axes[1].valueFormat;const currentConfig=getValueFromChartStorage(series.chart.uid,"config");const isRotated=isChartRotated({config:currentConfig});const chartSubType=getChartSubType$1(currentConfig?.series);showElement(series,visible);let seriesName=name;const splitBy=series.dataFields?.customValue??"";if(chartSubType===ChartSubType$1.BarAndLineSplitBy){seriesName=getFieldDescription$1({subtypeInfo,fieldList,fieldName:getSplitByField$1(splitBy),fieldValueToMatch:seriesName})??seriesName}updateSeriesName(series,seriesName);updateSeriesConnectPattern(series,seriesConfig);updateSeriesStackedType({series,seriesConfig,rotationChanged,isRotated});updateSeriesConnectPattern(series,seriesConfig);addSeriesStylingCallback({styleCallback:updateSeriesStyle,callbackProps:props,series,seriesConfig});updateLineSmoothing(seriesConfig,series);updateBarAndLineChartTooltip({series,seriesConfig,fieldList,inlineDisplayLabelField,seriesIndex,setTimeBinningInfoWhenNotProvided:options?.setTimeBinningInfoWhenNotProvided,commonStrings,tooltipFormatter:options?.tooltipFormatter});updateLineSeriesDataLabel({series,seriesType:WebChartTypes$2.LineSeries,stackedType,dataLabelsConfig:seriesConfig.dataLabels,yAxisValueFormat,customDataLabelFormatter:options?.dataLabelFormatter})}function initializeScatterPlotAxes(chart,axesTypes){initializeXYChartAxes({chart,axesTypes})}async function updateScatterPlotAxes(props){await updateXYChartAxes(props)}function generateTickPointsForHistogram(binsData){let gridPoints=[];if(binsData.length>0){gridPoints=binsData.map((ele=>ele.minValue));const lastMaxValue=binsData[binsData.length-1].maxValue;gridPoints.push(lastMaxValue)}return gridPoints}function getLongestLabelWidth(axisTicks){let maxWidth=0;axisTicks.forEach((tick=>{const{label}=tick;maxWidth=Math.max(maxWidth,label?.bbox.width,label.measuredWidth)}));return maxWidth}function generateOffset(axis){let offset=axis.axisRanges.length-1;if(axis.isReady()===true){const axisTicks=getTickOrGuideList(axis,AxisDataItemType.Ticks);const binStartLocation=axisTicks[0]?.point.x??0;const binEndLocation=axisTicks[1]?.point.x??0;const binWidth=binEndLocation-binStartLocation;const maxLabelWidth=getLongestLabelWidth(axisTicks);if(maxLabelWidth!==0){const padding=ChartDefaults.histogramAxisLabel.paddingRight??0;for(let i=0;i<axisTicks.length;i+=1){if(i*binWidth-maxLabelWidth-padding>0){offset=i;break}}}}return offset}function adjustAxisRangesVisibility(axis){const config=getValueFromChartStorage(axis.chart.uid,"config");const{axes}=config;const axisConfig=axes?.[0];if(axisConfig!==undefined){const{visible:axisVisibility,labels,guides:guidesConfig}=axisConfig;const{visible:axisLabelVisibility}=labels;const offset=generateOffset(axis);const axisTicks=getTickOrGuideList(axis,AxisDataItemType.Ticks);for(let i=0;i<axisTicks.length;i+=1){const tick=axisTicks[i];const tickVisibility=i%offset===0&&axisVisibility===true;const labelVisibility=i%offset===0&&axisLabelVisibility===true;const labelsConfig={...axisConfig.labels};labelsConfig.content.angle=undefined;labelsConfig.content.yoffset=undefined;labelsConfig.content.horizontalAlignment=undefined;labelsConfig.content.verticalAlignment=undefined;updateLabel(tick.label,labelsConfig,ChartDefaults.histogramAxisLabel);showElement(tick.tick,tickVisibility);showElement(tick.label,labelVisibility)}toggleLastCutOffLabel(axis,axisTicks.map((item=>item.label)));const axisGuides=getTickOrGuideList(axis,AxisDataItemType.Guides);for(let j=0;j<axisGuides.length;j+=1){const guideVisibility=guidesConfig?.[j]?.visible??true;showElement(axisGuides[j].label,guideVisibility);axisGuides[j].label.disabled=guideVisibility!==true}axis.invalidateLabels()}}function initializeHistogramAxes(props){const{chart,axesTypes}=props;initializeXYChartAxes({chart,axesTypes});const independentAxis=chart.xAxes.getIndex(0);if(independentAxis!==undefined){independentAxis.renderer.ticks.template.disabled=true;const axisCallback=()=>adjustAxisRangesVisibility(independentAxis);independentAxis.events.once(EventTypes.DataItemsValidated,axisCallback);chart.chartContainer.events.on(EventTypes.SizeChanged,debounce(axisCallback,ChartDefaults.debounceTime))}}function toggleBinnedAxisProperties(axis,ticks){axis.renderer.labels.template.disabled=true;if(ticks.length!==0){axis.strictMinMax=true;const{0:min,[ticks.length-1]:max}=ticks;axis.min=min;axis.max=max}else{axis.min=NaN;axis.max=NaN;axis.strictMinMax=false}}async function updateHistogramAxes(props){const{chart,axes,histogramBins,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings}=props;const ticks=generateTickPointsForHistogram(histogramBins);const horizontalAxisConfig=axes[0];await updateXYChartAxes({chart,axes,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings});const independentAxis=chart.xAxes.getIndex(0);if(independentAxis!==undefined){toggleBinnedAxisProperties(independentAxis,ticks);updateTicksArray({valueAxis:independentAxis,axisConfig:horizontalAxisConfig,ticks});adjustAxisRangesVisibility(independentAxis)}}async function initializeBarAndLineChartAxes(props){initializeXYChartAxes(props)}async function updateBarAndLineChartAxes(props){const{chart,chartConfig,rotationChanged,axisLabelsBehaviorChanged,isRotated,timeIntervalInfo,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings}=props;const axes=chartConfig.axes;const stackedType=getSeriesStackedType$1(chartConfig.series[0]);await updateXYChartAxes({chart,axes,rotationChanged,axisLabelsBehaviorChanged,isRotated,timeIntervalInfo,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings});const categoryOrDateAxis=isRotated===true?chart.yAxes.getIndex(0):chart.xAxes.getIndex(0);if(categoryOrDateAxis!==undefined){if(categoryOrDateAxis instanceof CategoryAxis){categoryOrDateAxis.dataFields.category=getXAxisField(chartConfig)}const categoryOrDateAxisRenderer=categoryOrDateAxis.renderer;const axisGridTemplate=categoryOrDateAxisRenderer.grid.template;axisGridTemplate.location=0;categoryOrDateAxisRenderer.cellStartLocation=.1;categoryOrDateAxisRenderer.cellEndLocation=.9;const descOrder=chartConfig.series[0].query?.orderByFields?.[0]?.includes(WebChartSortOrderKinds$2.Descending)??false;let inversed=isRotated===true;if(descOrder===true&&categoryOrDateAxis instanceof DateAxis)inversed=inversed===false;categoryOrDateAxisRenderer.inversed=inversed}const valueAxis=isRotated===true?chart.xAxes.getIndex(0):chart.yAxes.getIndex(0);if(stackedType===WebChartStackedKinds$2.Stacked100){valueAxis.calculateTotals=true}else{valueAxis.calculateTotals=false}}const AutoResizeCallbackType={InnerLabel:0,InnerLabelSecondary:1,AxisLabels:2,FirstAndLastLabels:3};function disposeResizeCallback(chart,type){let callbackDisposerName;switch(type){case AutoResizeCallbackType.InnerLabel:callbackDisposerName="gaugeAutoResizeInnerLabelFirstDisposer";break;case AutoResizeCallbackType.InnerLabelSecondary:callbackDisposerName="gaugeAutoResizeInnerLabelSecondDisposer";break;case AutoResizeCallbackType.AxisLabels:callbackDisposerName="gaugeAutoResizeAxisLabelsDisposer";break;case AutoResizeCallbackType.FirstAndLastLabels:callbackDisposerName="gaugeAutoResizeFirstAndLastLabelsDisposer";break}if(callbackDisposerName!==undefined){let disposer=getValueFromChartStorage(chart.uid,callbackDisposerName);if(disposer!==undefined){disposer.dispose();disposer=undefined;updateChartStorage(chart.uid,{[callbackDisposerName]:undefined})}}}function adjustScaleAccordingToMinMaxSizes(props){const{scaleToAdjust,fontSize,type}=props;let minFontSize=NaN;let maxFontSize=NaN;if(type===AutoResizeCallbackType.InnerLabel){minFontSize=ChartDefaults.gauge.innerLabelAutoMinFontSize;maxFontSize=ChartDefaults.gauge.innerLabelAutoMaxFontSize}else{minFontSize=ChartDefaults.gauge.axisLabelAutoMinFontSize;maxFontSize=ChartDefaults.gauge.axisLabelAutoMaxFontSize}let adjustedScale=scaleToAdjust;const newFontSize=fontSize*adjustedScale;if(newFontSize<minFontSize){adjustedScale*=minFontSize/newFontSize}else if(newFontSize>maxFontSize){adjustedScale*=maxFontSize/newFontSize}return adjustedScale}function calculateNewScale(props){const{chart,type,labelList,currentScale,currentFontSize}=props;let newScale=NaN;let chartLength=NaN;if(type===AutoResizeCallbackType.InnerLabel){const innerRadius=typeof chart.innerRadius==="number"?chart.innerRadius:chart.innerRadius.value;chartLength=(chart.xAxes.getIndex(0)?.measuredWidth!==0?chart.xAxes.getIndex(0)?.measuredWidth??1:1)*innerRadius}else{chartLength=chart.xAxes.getIndex(0)?.measuredHeight??1}if(chartLength>1){const labelLength=type===AutoResizeCallbackType.InnerLabel?labelList[0]?.measuredWidth??0:labelList.find((label=>label.measuredWidth>0&&label.measuredHeight>0))?.measuredHeight??0;if(labelLength>0){const currentRatio=labelLength/chartLength;if(currentRatio>0){const{axisLabelToInnerChartRatio,innerLabelToInnerChartRatio}=ChartDefaults.gauge;const targetRatio=type===AutoResizeCallbackType.InnerLabel?innerLabelToInnerChartRatio:axisLabelToInnerChartRatio;newScale=currentScale*(targetRatio/currentRatio);newScale=adjustScaleAccordingToMinMaxSizes({scaleToAdjust:newScale,fontSize:currentFontSize,type});newScale=Number(newScale.toFixed(2))}}}if(Number.isFinite(newScale)===false)newScale=currentScale;return newScale}function listHasAtLeastOneValidValue(list){const atLeastOneValidLabel=list.some((item=>item.value!==undefined));return atLeastOneValidLabel}function handleAxisLabelsAutoResizing(props){const{chart,axisConfig,axis}=props;if(axisConfig.labels.content.font?.size===undefined&&axisConfig.onlyShowFirstAndLastLabels!==true){disposeResizeCallback(chart,AutoResizeCallbackType.AxisLabels);disposeResizeCallback(chart,AutoResizeCallbackType.FirstAndLastLabels);const autoResizeAxisLabelsCallback=()=>{axis.events.once(EventTypes.Validated,(()=>{const gaugeTicksWithLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeTicksWithLabels);if(listHasAtLeastOneValidValue(gaugeTicksWithLabels)===true){const labelList=gaugeTicksWithLabels.map((item=>item.label));const currentScale=labelList[0].scale;const currentFontSize=labelList[0].fontSize;const newScale=calculateNewScale({chart,type:AutoResizeCallbackType.AxisLabels,labelList,currentScale,currentFontSize});const diffScale=newScale/currentScale;if(Number.isFinite(newScale)===true&&newScale>0&&(diffScale<=.98||diffScale>1.02)){labelList.forEach((label=>{label.scale=newScale}))}}}));axis.validate()};chart.events.once(EventTypes.Validated,autoResizeAxisLabelsCallback);const gaugeAutoResizeAxisLabelsDisposer=chart.events.on(EventTypes.SizeChanged,autoResizeAxisLabelsCallback);updateChartStorage(chart.uid,{gaugeAutoResizeAxisLabelsDisposer});autoResizeAxisLabelsCallback()}else{disposeResizeCallback(chart,AutoResizeCallbackType.AxisLabels);const guideTicksWithLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeTicksWithLabels);if(guideTicksWithLabels.length>0){const labelList=guideTicksWithLabels.map((item=>item.label));labelList.forEach((label=>{label.scale=1}))}}}function handleInnerLabelAutoResizing(chart,innerLabel){disposeResizeCallback(chart,AutoResizeCallbackType.InnerLabel);disposeResizeCallback(chart,AutoResizeCallbackType.InnerLabelSecondary);const autoResizeInnerLabelCallback=()=>{const config=getValueFromChartStorage(chart.uid,"config");const axisConfig=config?.axes?.[0];if(axisConfig?.innerLabel?.visible!==false&&axisConfig?.innerLabel?.content?.font?.size===undefined){const chartMeasuredWidth=chart.xAxes.getIndex(0)?.measuredWidth;if(chartMeasuredWidth!==undefined&&chartMeasuredWidth>0){const newScale=calculateNewScale({chart,type:AutoResizeCallbackType.InnerLabel,labelList:[innerLabel],currentScale:innerLabel.scale,currentFontSize:innerLabel.fontSize});if(Number.isFinite(newScale)===true&&Math.abs(innerLabel.scale-newScale)>.25){innerLabel.scale=newScale;innerLabel.validate()}}}else{innerLabel.scale=1}setGaugePaddingBottom({chart,innerLabel,axisConfig})};const gaugeAutoResizeInnerLabelSecondDisposer=chart.events.on(EventTypes.Validated,debounce((()=>autoResizeInnerLabelCallback()),ChartDefaults.debounceTime));const gaugeAutoResizeInnerLabelFirstDisposer=chart.events.on(EventTypes.SizeChanged,debounce((()=>autoResizeInnerLabelCallback()),ChartDefaults.debounceTime));updateChartStorage(chart.uid,{gaugeAutoResizeInnerLabelFirstDisposer,gaugeAutoResizeInnerLabelSecondDisposer});autoResizeInnerLabelCallback()}function handleFirstAndLastLabelsAutoResizing(props){const{chart,axisConfig,axis}=props;if(axisConfig.labels.content.font?.size===undefined&&axisConfig.onlyShowFirstAndLastLabels===true){disposeResizeCallback(chart,AutoResizeCallbackType.AxisLabels);disposeResizeCallback(chart,AutoResizeCallbackType.FirstAndLastLabels);const autoResizeFirstAndLastLabelsCallback=()=>{const gaugeFirstAndLast=getTickOrGuideList(axis,AxisDataItemType.GaugeFirstAndLastGuides);if(listHasAtLeastOneValidValue(gaugeFirstAndLast)===true){const labelList=gaugeFirstAndLast.map((item=>item.label));const currentScale=labelList[0].scale;const currentFontSize=labelList[0].fontSize;const newScale=calculateNewScale({chart,type:AutoResizeCallbackType.FirstAndLastLabels,labelList,currentScale,currentFontSize});const diffScale=newScale/currentScale;if(Number.isFinite(newScale)===true&&newScale>0&&(diffScale<=.98||diffScale>1.02)){labelList.forEach((label=>{label.scale=newScale}))}}};chart.events.once(EventTypes.Validated,autoResizeFirstAndLastLabelsCallback);const gaugeAutoResizeFirstAndLastLabelsDisposer=chart.events.on(EventTypes.SizeChanged,autoResizeFirstAndLastLabelsCallback);updateChartStorage(chart.uid,{gaugeAutoResizeFirstAndLastLabelsDisposer});autoResizeFirstAndLastLabelsCallback()}else{disposeResizeCallback(chart,AutoResizeCallbackType.FirstAndLastLabels);const labelList=getTickOrGuideList(axis,AxisDataItemType.GaugeFirstAndLastGuides).map((guide=>guide.label));labelList.forEach((label=>{label.scale=1}))}}function convertValueToRatio(props){const{value,axisMin,axisMax}=props;let ratio=NaN;const axisRange=axisMax-axisMin;if(axisRange!==0)ratio=(value-axisMin)/axisRange;return ratio}function scaleAxisToFitLabels(chart,chartConfig){const axis=chart.xAxes.getIndex(0);if(axis!==undefined){const config=chartConfig??getValueFromChartStorage(chart.uid,"config");const{onlyShowFirstAndLastLabels}=config?.axes?.[0]??{};if(axis.renderer.labels.template.visible===false||onlyShowFirstAndLastLabels===true){chart.radius=new Percent(ChartDefaults.gauge.radius)}else{const ticksWithLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeTicksWithLabels);const lastLabel=ticksWithLabels.reverse().find((axisDataItem=>axisDataItem.label.visible===true&&axisDataItem.label?.measuredWidth>0))?.label;if(lastLabel!==undefined){const lastLabelWidth=lastLabel.measuredWidth??1;const lastLabelHeight=lastLabel.measuredHeight??1;const neededWidth=lastLabelWidth*2+chart.radarContainer.measuredWidth+getPaddingValue(chart.paddingLeft)+getPaddingValue(chart.paddingRight);const neededHeight=chart.radarContainer.measuredHeight+lastLabelHeight*2+getPaddingValue(chart.paddingTop)+getPaddingValue(chart.paddingBottom);const availableWidth=chart.measuredWidth;const availableHeight=chart.measuredHeight;const ratioWidth=availableWidth/neededWidth;const ratioHeight=availableHeight/neededHeight;const currentRadius=(typeof chart.radius==="number"?chart.radius:chart.radius.value)*100;const newRadiusFromWidth=Number((currentRadius*ratioWidth).toFixed(2));const newRadiusFromHeight=Number((currentRadius*ratioHeight).toFixed(2));const diffWidthRadius=newRadiusFromWidth/currentRadius;const diffHeightRadius=newRadiusFromHeight/currentRadius;const newWidthFromRadiusFromWidth=chart.radarContainer.measuredWidth*diffWidthRadius;const newWidthFromRadiusFromHeight=chart.radarContainer.measuredWidth*diffHeightRadius;const[chosenRadius,chosenDiff]=newWidthFromRadiusFromWidth<newWidthFromRadiusFromHeight?[newRadiusFromWidth,diffWidthRadius]:[newRadiusFromHeight,diffHeightRadius];if(Number.isFinite(chosenRadius)===true&&chosenRadius>=10&&(chosenDiff<.98||chosenDiff>1.02)){chart.radius=new Percent(chosenRadius)}}}}}function handleAxisLabelsOverflow(chart){const axis=chart.xAxes.getIndex(0);if(axis!==undefined){axis.events.on(EventTypes.SizeChanged,(()=>scaleAxisToFitLabels(chart)));axis.events.on(EventTypes.Validated,debounce((()=>scaleAxisToFitLabels(chart)),ChartDefaults.debounceTime))}}function initializeAxisNeedle(chart){const hand=chart.hands.push(new ClockHand);const needleDefaults=ChartDefaults.gaugeNeedle;const{startWidth,endWidth,innerRadius}=needleDefaults;hand.pin.disabled=true;hand.startWidth=startWidth??NaN;hand.endWidth=endWidth??NaN;hand.innerRadius=percent(innerRadius??NaN);const axis=chart.xAxes.getIndex(0);if(axis!==undefined)hand.axis=axis;return hand}function getGaugeValue(props){const{x,data,chart,valueFormat,minimum,maximum}=props;let gaugeValue=NaN;if(data!==undefined&&x!==undefined){const seriesData=data.find((dataItem=>x in dataItem));const dataValue=Number.parseFloat(seriesData[x]);if(Number.isFinite(dataValue)===true){gaugeValue=dataValue;updateChartStorage(chart.uid,{gaugeData:gaugeValue})}}else{const gaugeData=getValueFromChartStorage(chart.uid,"gaugeData");if(Number.isFinite(gaugeData)===true)gaugeValue=gaugeData}if(isPercentNumberValueFormat(valueFormat)===true&&minimum!==undefined&&maximum!==undefined&&minimum!==null&&maximum!==null&&gaugeValue!==null){const axisRange=maximum-minimum;if(axisRange!==0)gaugeValue=convertValueToRatio({value:gaugeValue,axisMin:minimum,axisMax:maximum})}return gaugeValue}function adjustGaugeNeedleValue(chart,gaugeValue){let newGaugeValue=gaugeValue??null;if(gaugeValue!==undefined&&gaugeValue!==null){const axis=chart.xAxes.getIndex(0);const config=getValueFromChartStorage(chart.uid,"config");const minimum=axis.min??config?.axes?.[0].minimum??ChartDefaults.gauge.axisMinimum;const maximum=axis.max??config?.axes?.[0].maximum??ChartDefaults.gauge.axisMaximum;if(gaugeValue<minimum)newGaugeValue=minimum;else if(gaugeValue>maximum)newGaugeValue=maximum}return newGaugeValue}function updateAxisNeedle(props){const{chart,needle,gaugeValue}=props;const hand=chart.hands.getIndex(0)??initializeAxisNeedle(chart);if(hand!==undefined){updateFillElements({element:hand,fillSymbol:needle?.symbol});const{startWidth,endWidth,innerRadius}=ChartDefaults.gaugeNeedle;hand.value=adjustGaugeNeedleValue(chart,gaugeValue);hand.pin.disabled=needle?.displayPin!==true;hand.visible=needle?.visible===true;hand.startWidth=needle?.startWidth??startWidth;hand.endWidth=needle?.endWidth??endWidth;hand.innerRadius=percent(needle?.innerRadius??innerRadius)}}function setGaugePaddingBottom(props){const{chart,innerLabel,axisConfig}=props;const innerLabelVerticalAlignment=axisConfig?.innerLabel?.content?.verticalAlignment??RESTVerticalAlignment$1.Middle;const{paddingBottom:defaultPaddingBottom}=ChartDefaults.gauge;let paddingBottomFromInnerLabel=defaultPaddingBottom;let paddingBottomFromLabels=defaultPaddingBottom;if(axisConfig?.innerLabel?.visible!==false&&innerLabel.measuredHeight!==undefined&&innerLabel.measuredHeight>0){let bottomLabel=chart.radarContainer.measuredHeight/2;switch(innerLabelVerticalAlignment){case RESTVerticalAlignment$1.Bottom:bottomLabel+=innerLabel.measuredHeight;break;case RESTVerticalAlignment$1.Top:bottomLabel-=innerLabel.measuredHeight;break;case RESTVerticalAlignment$1.Middle:case RESTVerticalAlignment$1.Baseline:bottomLabel+=innerLabel.measuredHeight/2;break}bottomLabel+=innerLabel.dy??0;const chartHeight=chart.radarContainer.measuredHeight;paddingBottomFromInnerLabel=Math.round(bottomLabel-chartHeight-defaultPaddingBottom)}if(axisConfig?.onlyShowFirstAndLastLabels===true&&axisConfig?.labels.visible!==false){const gaugeFirstAndLastGuides=getTickOrGuideList(chart.xAxes.getIndex(0),AxisDataItemType.GaugeFirstAndLastGuides);paddingBottomFromLabels=gaugeFirstAndLastGuides[gaugeFirstAndLastGuides.length-1]?.label?.measuredHeight??0}const paddingCandidate=Math.max(paddingBottomFromInnerLabel,paddingBottomFromLabels)+defaultPaddingBottom;const currentChartPaddingBottom=getPaddingValue(chart.paddingBottom);if(Math.round(currentChartPaddingBottom)!==paddingCandidate){chart.paddingBottom=paddingCandidate}}function initializeAxisInnerLabel(chart){const innerLabel=initializeLabel(undefined,chart.radarContainer);innerLabel.isMeasured=false;updateLabelStorage(innerLabel.uid,{isGaugeAxisInnerLabel:true});handleInnerLabelAutoResizing(chart,innerLabel)}function getInnerLabelHTMLValue(props){const{valueFormat,iLocale,formatLocale,innerLabelConfigContent,gaugeValue,gaugeInnerLabelFormatter}=props;let labelValue="";if(Number.isFinite(gaugeValue)===true){if(gaugeInnerLabelFormatter!==undefined){labelValue=gaugeInnerLabelFormatter(gaugeValue)}else{const intlOptions=mapValueFormat(valueFormat);const numberFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale,formatLocale});numberFormatter.numberFormat=intlOptions;labelValue=numberFormatter.format(`${gaugeValue}`);labelValue=attachInlineCSS({textSymbol:{type:RESTSymbolType$1.TS,...innerLabelConfigContent,text:labelValue},format:"html"});labelValue=sanitizeHTMLOutput(labelValue)}}return labelValue}function updateAxisInnerLabel(props){const{chart,innerLabelConfig,valueFormat,gaugeValue,gaugeInnerLabelFormatter}=props;const innerLabel=chart.radarContainer.children.values.find((element=>getValueFromLabelStorage(element.uid,"isGaugeAxisInnerLabel")===true));if(innerLabel!==undefined){updateLabel(innerLabel,innerLabelConfig,ChartDefaults.gaugeInnerLabel);const formatLocale=getValueFromChartStorage(chart.uid,"formatLocale");innerLabel.html=getInnerLabelHTMLValue({valueFormat,iLocale:chart.language.locale,formatLocale,gaugeValue,innerLabelConfigContent:innerLabelConfig?.content,gaugeInnerLabelFormatter});chart.radarContainer.invalidateLabels()}}function isValidLabelsIncrement(value){return value!==undefined&&value!==null&&value!==0}function getGaugeAxisFactors(axisConfig){const{minimum,maximum,labelsIncrement:configLabelsIncrement,minimumValueConversion,maximumValueConversion}=axisConfig;let newMin=minimum??ChartDefaults.gauge.axisMinimum;let newMax=maximum??ChartDefaults.gauge.axisMaximum;newMin=applyValueConversion(newMin,minimumValueConversion);newMax=applyValueConversion(newMax,maximumValueConversion);const userProvidedValidLabelsIncrement=isValidLabelsIncrement(configLabelsIncrement);let newLabelsIncrement=isValidLabelsIncrement(configLabelsIncrement)?configLabelsIncrement:Math.abs(newMax-newMin)/ChartDefaults.gauge.numberOfLabelIntervals;let numberOfIntervals=userProvidedValidLabelsIncrement===true?Math.round(Math.abs(newMax-newMin)/newLabelsIncrement):ChartDefaults.gauge.numberOfLabelIntervals;if(userProvidedValidLabelsIncrement===true){if(numberOfIntervals>ChartDefaults.gauge.maximumNumberOfLabelIntervals){newLabelsIncrement=Math.abs(newMax-newMin);numberOfIntervals=1}else{const testValue=newMin+numberOfIntervals*newLabelsIncrement;if(testValue<newMax){numberOfIntervals+=1;newMax=newMin+numberOfIntervals*newLabelsIncrement}else if(testValue>newMax){newMax=testValue}}}return{min:newMin,max:newMax,labelsIncrement:newLabelsIncrement,numberOfIntervals}}function initializeGaugeAxisTick(axis){const tick=axis.axisRanges.create();tick.axisFill.fillOpacity=1;tick.axisFill.disabled=true;tick.grid.strokeOpacity=1;tick.grid.disabled=false;tick.tick.length=ChartDefaults.gaugeTicksLength;return tick}function initializeGaugeAxisLabel(axis){const label=new AxisLabelCircular;label.disabled=true;label.axis=axis;applyLabelDefaults(label);label.padding(10,10,10,10);updateLabelStorage(label.uid,{isGaugeAxisLabel:true});return label}function shouldCreateTicksAndLabels(props){const{axis,min,max,labelsIncrement,numberOfIntervals,valueFormat,minimumFromField}=props;const isPercentFormat=isPercentNumberValueFormat(valueFormat)===true;let shouldCreate=true;const oldConfig=getValueFromChartStorage(axis.chart.uid,"config");if(oldConfig!==undefined){const{minimum:oldMinimum,minimumFromField:oldMinimumFromField,labelsIncrement:oldLabelsIncrement,valueFormat:oldValueFormat}=oldConfig.axes?.[0];const valueFormatStyleHasChanged=oldValueFormat?.intlOptions?.style!==valueFormat?.intlOptions?.style;const labelsIncrementHasChanged=isValidLabelsIncrement(oldLabelsIncrement)===true?oldLabelsIncrement!==labelsIncrement:numberOfIntervals!==ChartDefaults.gauge.numberOfLabelIntervals;shouldCreate=valueFormatStyleHasChanged===true||min!==oldMinimum||minimumFromField!==oldMinimumFromField||isPercentFormat===false&&max!==axis.max||labelsIncrementHasChanged===true}return shouldCreate}function createGaugeTicksAndLabels(props){const{axis,min,max,labelsIncrement,numberOfIntervals,valueFormat}=props;const isPercentFormat=isPercentNumberValueFormat(valueFormat)===true;let currentScale=1;const axisTicksToRemove=getTickOrGuideList(axis,AxisDataItemType.Ticks);if(axisTicksToRemove.length>0){currentScale=axisTicksToRemove[0].label?.scale;axisTicksToRemove.forEach((item=>{const index=axis.axisRanges.values.indexOf(item);if(index>=0){axis.axisRanges.removeIndex(index)}}))}const numberOfTickPerInterval=ChartDefaults.gauge.numberOfTicksBetweenTwoLabels+1;const numberOfTicks=numberOfIntervals*numberOfTickPerInterval+1;for(let i=0;i<numberOfTicks;i+=1){const isLastTick=i===numberOfTicks-1;const axisDataItem=initializeGaugeAxisTick(axis);const labelValue=isLastTick===true?max:min+i/numberOfTickPerInterval*labelsIncrement;axisDataItem.value=isPercentFormat===true?convertValueToRatio({value:labelValue,axisMin:min,axisMax:max}):labelValue;if(i%numberOfTickPerInterval===0){axisDataItem.label=initializeGaugeAxisLabel(axis);axisDataItem.label.text=String(labelValue);axisDataItem.grid.disabled=true;if(Number.isFinite(currentScale)===true)axisDataItem.label.scale=currentScale}}}function getGaugeLabelHTMLValue(props){const{valueFormat,iLocale,formatLocale,gaugeLabelConfigContent,itemLabelValue,axisValueFormatter}=props;let labelValue="";if(Number.isFinite(itemLabelValue)===true){if(axisValueFormatter!==undefined){labelValue=axisValueFormatter(itemLabelValue)}else{const intlOptions=mapValueFormat(valueFormat);const numberFormatter=getFormatter({type:WebChartTypes$2.NumberAxisFormat,iLocale,formatLocale});numberFormatter.numberFormat=intlOptions;labelValue=numberFormatter.format(`${itemLabelValue}`);labelValue=attachInlineCSS({textSymbol:{type:RESTSymbolType$1.TS,...gaugeLabelConfigContent,text:labelValue},format:"html"});labelValue=sanitizeHTMLOutput(labelValue)}}return labelValue}function updateGaugeAxisLabels(props){const{chart,axis,onlyShowFirstAndLastLabels,valueFormat,axisLabelConfigContent,axisValueFormatter}=props;if(onlyShowFirstAndLastLabels!==true){const gaugeTicksWithLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeTicksWithLabels);if(listHasAtLeastOneValidValue(gaugeTicksWithLabels)===true){const formatLocale=getValueFromChartStorage(chart.uid,"formatLocale");gaugeTicksWithLabels.forEach((item=>{updateLabel(item.label,axisLabelConfigContent);item.label.html=getGaugeLabelHTMLValue({valueFormat,iLocale:chart.language.locale,formatLocale,gaugeLabelConfigContent:axisLabelConfigContent?.content,itemLabelValue:item.value,axisValueFormatter})}))}}}function updateGaugeTicks(axis,axisConfig){const visible=axisConfig?.ticks?.visible??true;const axisTicks=getTickOrGuideList(axis,AxisDataItemType.Ticks);for(let i=0;i<axisTicks.length;i+=1){const tick=axisTicks[i];showElement(tick.tick,visible)}}function updateLabelsVisibility(axis,axisConfig){if(axis instanceof ValueAxis&&axis.chart instanceof GaugeChart){const gaugeTicksWithLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeTicksWithLabels);if(listHasAtLeastOneValidValue(gaugeTicksWithLabels)===true){const{onlyShowFirstAndLastLabels,labels}=axisConfig;const labelsVisibility=(labels?.visible??true)&&onlyShowFirstAndLastLabels!==true;gaugeTicksWithLabels.forEach((dataItem=>{showElement(dataItem.label,labelsVisibility)}))}}}function initializeFirstAndLastLabels(axisConfig){const{labels,guides:configGuides,onlyShowFirstAndLastLabels}=axisConfig;const guides=configGuides??[];if(onlyShowFirstAndLastLabels===true){const guideStructure={type:WebChartTypes$2.Guide,start:NaN,style:{type:"esriSLS"},name:""};guides.push({...guideStructure,start:axisConfig.minimum??NaN,name:ChartDefaults.gaugeFirstLabelId,label:{...labels.content,text:`${axisConfig.minimum}`}},{...guideStructure,start:axisConfig.maximum??NaN,name:ChartDefaults.gaugeLastLabelId,label:{...labels.content,text:`${axisConfig.maximum}`}})}axisConfig.guides=guides}function adjustFirstAndLastLabelsPosition(axis){const firstAndLastGuides=getTickOrGuideList(axis,AxisDataItemType.GaugeFirstAndLastGuides);firstAndLastGuides.forEach((guide=>{if(guide.label.adapter.keys().includes("dx")===false){guide.label.adapter.add("dx",(dx=>{let newDx=dx;newDx=guide.label.measuredWidth/2;if(guide.id===ChartDefaults.gaugeLastLabelId){newDx*=-1}return newDx}))}if(guide.label.adapter.keys().includes("dy")===false){guide.label.adapter.add("dy",(dy=>{let newDy=dy;if(guide.label.measuredHeight!==0){newDy=guide.label.measuredHeight/2}return newDy}))}}))}function updateFirstAndLastLabels(props){const{chart,axis,onlyShowFirstAndLastLabels,valueFormat,gaugeLabelConfigContent,axisValueFormatter}=props;if(onlyShowFirstAndLastLabels===true){const firstAndLastLabels=getTickOrGuideList(axis,AxisDataItemType.GaugeFirstAndLastGuides);const formatLocale=getValueFromChartStorage(chart.uid,"formatLocale");firstAndLastLabels.forEach((item=>{if(item!==undefined&&item.label!==undefined){item.label.html=getGaugeLabelHTMLValue({valueFormat,iLocale:chart.language.locale,formatLocale,gaugeLabelConfigContent:gaugeLabelConfigContent?.content,itemLabelValue:item.value,axisValueFormatter})}}));adjustFirstAndLastLabelsPosition(axis)}}function applyPercentRatioToGuideBoundaries(props){const{axisConfig,axisMin,axisMax}=props;if(axisMin!==undefined&&axisMin!==null&&axisMax!==undefined&&axisMax!==null){const axisRange=axisMax-axisMin;if(axisRange!==0){axisConfig.guides?.forEach((guide=>{const{start,end}=guide;if(typeof start==="number")guide.start=convertValueToRatio({value:start,axisMin,axisMax});if(typeof end==="number")guide.end=convertValueToRatio({value:end,axisMin,axisMax})}))}}}async function initializeGaugeAxis(chart,valueFormat){initializeAxis({axes:chart.xAxes,valueFormat});const newAxis=chart.xAxes.getIndex(0);if(newAxis instanceof ValueAxis){newAxis.renderer.labels.template.disabled=true;newAxis.renderer.ticks.template.disabled=true;initializeAxisNeedle(chart);initializeAxisInnerLabel(chart);handleAxisLabelsOverflow(chart);newAxis.maxZoomFactor=1}}function getFeatureGaugeData(props){const gaugeDefaults=ChartDefaults.gauge;const{featureIndex,chart,config}=props;const{minimum:configMin,minimumFromField,maximum:configMax,maximumFromField}=config?.axes?.[0]??{};const{x}=config?.series?.[0]??{};let dataValue=-1;let minimum=configMin??gaugeDefaults.axisMinimum;let maximum=configMax??gaugeDefaults.axisMaximum;if(featureIndex>=0&&featureIndex<chart.data.length){const data=chart.data[featureIndex];if(minimumFromField!==undefined&&isEmptyStringField$1(minimumFromField)===false&&Number.isFinite(data[minimumFromField])===true){minimum=data[minimumFromField]}if(maximumFromField!==undefined&&isEmptyStringField$1(maximumFromField)===false&&Number.isFinite(data[maximumFromField])===true){maximum=data[maximumFromField]}if(x!==undefined&&isEmptyStringField$1(x)===false&&Number.isFinite(data[x])===true){dataValue=data[x]}}return{minimum,maximum,dataValue}}async function updateGaugeAxis(props){const{chart,chartConfig,data,axisValueFormatter,gaugeInnerLabelFormatter}=props;const{axes:axesConfig,series}=chartConfig;const{featureIndex,x}=series[0];const axisConfig=axesConfig?.[0];const axis=chart.xAxes.getIndex(0);const gaugeByFeature=isGaugeByFeature$1(chartConfig);const currentAxisConfig={...axisConfig};if(axis!==undefined&&currentAxisConfig!==undefined){const{valueFormat,needle,innerLabel,onlyShowFirstAndLastLabels}=currentAxisConfig;if(isValueFormatTypeChanged(axis,valueFormat)===true){initializeAxis({axes:chart.xAxes,valueFormat})}let featureGaugeInfo;if(gaugeByFeature===true){featureGaugeInfo=getFeatureGaugeData({featureIndex:featureIndex??0,chart,config:chartConfig});currentAxisConfig.minimum=featureGaugeInfo.minimum;currentAxisConfig.maximum=featureGaugeInfo.maximum}const{min,max,labelsIncrement,numberOfIntervals}=getGaugeAxisFactors(currentAxisConfig);const shouldCreate=shouldCreateTicksAndLabels({axis,min,max,labelsIncrement,numberOfIntervals,valueFormat});if(shouldCreate===true){createGaugeTicksAndLabels({axis,min,max,labelsIncrement,numberOfIntervals,valueFormat})}const modifiedAxisConfig={...currentAxisConfig};if(isPercentNumberValueFormat(valueFormat)===true){modifiedAxisConfig.minimum=0;modifiedAxisConfig.maximum=1;applyPercentRatioToGuideBoundaries({axisConfig:modifiedAxisConfig,axisMin:currentAxisConfig.minimum,axisMax:currentAxisConfig.maximum})}else{modifiedAxisConfig.minimum=min;modifiedAxisConfig.maximum=max}initializeFirstAndLastLabels(modifiedAxisConfig);await updateAxis({axis,axisConfig:modifiedAxisConfig,seriesType:WebChartTypes$2.GaugeSeries,axisValueFormatter});if(axis.renderer.labels.template.disabled!==true)axis.renderer.labels.template.disabled=true;if(axis.renderer.ticks.template.disabled!==true)axis.renderer.ticks.template.disabled=true;handleAxisLabelsAutoResizing({chart:axis.chart,axis,axisConfig:currentAxisConfig});handleFirstAndLastLabelsAutoResizing({chart,axis,axisConfig:currentAxisConfig});updateGaugeTicks(axis,currentAxisConfig);updateGaugeAxisLabels({chart,axis,onlyShowFirstAndLastLabels:onlyShowFirstAndLastLabels??false,valueFormat,axisLabelConfigContent:currentAxisConfig.labels,axisValueFormatter});updateFirstAndLastLabels({chart,axis,onlyShowFirstAndLastLabels:onlyShowFirstAndLastLabels??false,valueFormat,gaugeLabelConfigContent:currentAxisConfig.labels,axisValueFormatter});const gaugeValue=gaugeByFeature===true?featureGaugeInfo?.dataValue:getGaugeValue({x,data,chart,minimum:currentAxisConfig.minimum,maximum:currentAxisConfig.maximum,valueFormat});updateAxisNeedle({chart,needle,gaugeValue});updateAxisInnerLabel({chart,innerLabelConfig:innerLabel,valueFormat,gaugeValue,gaugeInnerLabelFormatter});updateLabelsVisibility(axis,currentAxisConfig);scaleAxisToFitLabels(chart,chartConfig);chart.validateData()}}function initializeChartBackground(chart){chart.background.fill=mapColor(ChartDefaults.backgroundColor)}function updateChartBackground(chart,background){chart.background.fill=mapColor(background??ChartDefaults.backgroundColor)}function initializeChartScrollbar(chart){if(chart instanceof XYChart){chart.scrollbarX=new Scrollbar;chart.scrollbarY=new Scrollbar;chart.scrollbarX.disabled=true;chart.scrollbarY.disabled=true}}function updateChartScrollbar(props){const{chart,scrollbarXVisible,scrollbarYVisible}=props;if(chart instanceof XYChart){const isChartRotated=getValueFromChartStorage(chart.uid,"isRotated");if(chart.scrollbarX===undefined||chart.scrollbarY===undefined)initializeChartScrollbar(chart);chart.scrollbarX.disabled=isChartRotated!==true?scrollbarXVisible!==true:scrollbarYVisible!==true;chart.scrollbarY.disabled=isChartRotated!==true?scrollbarYVisible!==true:scrollbarXVisible!==true}}function isChartContainerVisible(chartContainer){return chartContainer!==undefined&&chartContainer.offsetParent!==null}function addChartContainerVisibilityChangeHandler(chart,chartContainer){if(chart!==undefined&&chartContainer!==undefined&&window.IntersectionObserver!==undefined){const observer=new IntersectionObserver((entries=>{if(entries[0].intersectionRatio>0){if(getValueFromChartStorage(chart.uid,"chartWasCreatedWhileHidden")===true){chart.reinit();chart.events.once(EventTypes.Validated,(()=>{chart.reinit()}));updateChartStorage(chart.uid,{chartWasCreatedWhileHidden:false})}else if(getValueFromChartStorage(chart.uid,"chartWasUpdatedWhileHidden")===true){chart.reinit();updateChartStorage(chart.uid,{chartWasUpdatedWhileHidden:false})}}}),{root:null});observer.observe(chartContainer)}}function updatePieChartSize(chart){if(isElementValid(chart)===true){const{paddingWithLabels}=ChartDefaults.pieChart;const radiusCallback=()=>{const currentChartRadius=percent(getValueFromChartStorage(chart.uid,"pieChartRadius")??ChartDefaults.pieChart.chartOptimizedRadius);let newChartRadius=currentChartRadius;const chartConfig=getValueFromChartStorage(chart.uid,"config");if(chartConfig!==undefined){const{series:seriesConfig}=chartConfig;const{innerRadius,dataLabels,optimizeDataLabelsOverlapping}=seriesConfig[0];const dataLabelsOffset=seriesConfig[0].dataLabelsOffset??ChartDefaults.pieChart.dataLabelsOffset;const absoluteMinimum=(dataLabelsOffset+10)*2+ChartDefaults.pieChart.minimumSize;const optimizationMode=dataLabels?.visible===true&&optimizeDataLabelsOverlapping===true;if(optimizationMode===true){let setRadiusToMinimum=false;const containerWidth=chart.chartContainer.measuredWidth;if(containerWidth<absoluteMinimum){setRadiusToMinimum=true}else{const fullLabelsSpace=(dataLabelsOffset+10+paddingWithLabels)*2;const pieWidth=containerWidth-fullLabelsSpace;if(pieWidth<ChartDefaults.pieChart.minimumSize){setRadiusToMinimum=true}else{newChartRadius=percent(100/(containerWidth/pieWidth))}}if(setRadiusToMinimum===true||newChartRadius.percent<5){newChartRadius=percent(5)}else if(newChartRadius.percent>100){newChartRadius=percent(100)}}else{newChartRadius=percent(ChartDefaults.pieChart.chartRadius)}if(currentChartRadius.value.toFixed(1)!==newChartRadius.value.toFixed(1)){updateChartStorage(chart.uid,{pieChartRadius:newChartRadius.percent});chart.radius=newChartRadius;chart.innerRadius=percent((innerRadius??ChartDefaults.pieChart.innerRadius)*newChartRadius.value)}}return newChartRadius};chart.events.on(EventTypes.SizeChanged,debounce(radiusCallback,ChartDefaults.debounceTime));radiusCallback();chart.validate()}}function updateChartContainersPaddings(chart){if(chart instanceof PieChart){updatePieChartSize(chart)}else if(chart instanceof GaugeChart===false){const setPaddingCallback=()=>{const config=getValueFromChartStorage(chart.uid,"config");const{chartPaddingMinSize,chartPaddingRightWhenLegendNotOnRight,chartContainerPaddingTopWhenRotated,chartContainer}=ChartDefaults;const series=config?.series;const seriesType=getSeriesType$1(series);const isRotated=isChartRotated({config});const isDataLabelsVisible=series?.[0]?.dataLabels?.visible??true;let paddingRight=ChartDefaults.chartDefaultPaddingRight;if(isRotated===true&&isDataLabelsVisible===true&&(seriesType===WebChartTypes$2.LineSeries||seriesType===WebChartTypes$2.ComboLineAndBarSeries||seriesType===WebChartTypes$2.BarSeries&&((series?.[0]).stackedType??getDefaultStackedType$1())===WebChartStackedKinds$2.Side)){let maxLabel=0;const dataLabelCallback=label=>getValueFromLabelStorage(label.uid,"isDataLabel")??false;chart.series.each((currentSeries=>{const bulletDatalabel=currentSeries.bullets.values.find(dataLabelCallback);if(bulletDatalabel!==undefined){bulletDatalabel.clones.each((currentLabel=>{let occupiedSpace=currentLabel.measuredWidth;switch(currentLabel.horizontalCenter){case RESTVerticalAlignment$1.Middle:occupiedSpace/=2;break;case RESTHorizontalAlignment$1.Right:occupiedSpace*=-1;break}const labelMaxX=currentLabel.pixelX+occupiedSpace;if(labelMaxX>maxLabel){maxLabel=labelMaxX;paddingRight=occupiedSpace}}))}}))}if(paddingRight>=0)chart.chartContainer.paddingRight=paddingRight;chart.chartContainer.paddingTop=isRotated===true?chartContainerPaddingTopWhenRotated:chartContainer.paddingTop;const legendPresentsOnTheRight=config?.legend?.visible!==false&&config?.legend?.position===WebChartLegendPositions.Right;chart.paddingRight=legendPresentsOnTheRight===true?chartPaddingMinSize:chartPaddingRightWhenLegendNotOnRight};setPaddingCallback();let validatedSeries=0;chart.series.each((currentSeries=>{currentSeries.events.once(EventTypes.Validated,(()=>{validatedSeries+=1;if(validatedSeries===chart.series.length){setPaddingCallback()}}))}))}}function sliceWasClicked(slice){return slice.isHover===true||slice.dataItem?.label?.isHover===true}async function handleSlicesFromHit(chart,multiSelect){let listSelectedElements=[];const pieSeries=chart.series.getIndex(0);if(pieSeries!==undefined){const clickWasOnTheChart=pieSeries.slices.values.some((slice=>sliceWasClicked(slice)===true));const allRemainingSlicesSelected=pieSeries.slices.values.every((slice=>slice.isHover!==slice.isActive));const shouldClearSelectionForPieFromFields=clickWasOnTheChart===true&&allRemainingSlicesSelected===true;if(shouldClearSelectionForPieFromFields===true||clickWasOnTheChart===false){listSelectedElements=[]}else{const xAxisField=getXFieldFromSeriesDataFields(pieSeries);const yAxisField=getYFieldFromSeriesDataFields(pieSeries);const sliceSelectionProps={element:{},xAxisField,yAxisField,chartType:WebChartTypes$2.PieSeries,seriesIndex:0};pieSeries.slices.each(((slice,sliceIndex)=>{const sliceNeedsToBeSelected=slice.isActive===true&&(sliceWasClicked(slice)===true||multiSelect===true);if(sliceNeedsToBeSelected===true){const isGroupOfSlices=isElementFromGroupOfSlices(slice.dataItem?.dataContext);if(isGroupOfSlices===true){const groupedSlices=getGroupedSlicesDataItem({groupOfSlicesDataContext:slice.dataItem?.dataContext})??[];groupedSlices.forEach((groupedSliceDataItem=>{listSelectedElements.push({...sliceSelectionProps,element:undefined,elementDataContext:groupedSliceDataItem,elementIndex:sliceIndex})}))}else{listSelectedElements.push({...sliceSelectionProps,element:slice,elementDataContext:slice.dataItem?.dataContext,elementIndex:sliceIndex})}}else{toggleStateForElement({element:slice,selected:false,useNativeState:true})}}));listSelectedElements.forEach((item=>{toggleStateForElement({element:item.element,selected:true,useNativeState:true})}))}if(clickWasOnTheChart===false)listSelectedElements=[];await applySelection({chart,listSelectedElements,selectionSource:SelectionSource.SelectionByClick})}if(chart instanceof PieChart)chart.feedLegend()}function addHitSelectionOnPieChart(chart){const hitSelectionCallback=async ev=>{if(isHitOnSelectableArea(chart)===true){const multiSelect=isMultiSelectionOn(ev);await handleSlicesFromHit(chart,multiSelect)}};chart.events.on(EventTypes.Hit,hitSelectionCallback);chart.events.on(EventTypes.DoubleHit,hitSelectionCallback)}function updatePieChartGroupOfSlices(props){const{chart,seriesConfig,commonStrings}=props;const firstSeries=seriesConfig[0];const totalSum=chart.data.reduce(((accumulator,dataItem)=>{let sliceStat=dataItem[defaultPieFromFieldsValue$1]??dataItem[firstSeries.y];if(Number.isFinite(sliceStat)===false)sliceStat=0;return sliceStat+accumulator}),0);const percentageThreshold=firstSeries?.sliceGrouping?.percentageThreshold??0;const groupeOfSlicesDataContext=[];let currentGroupOfSlices;let groupOfSlicesStat=0;const existingGroupedSlices=chart.data.find((dataItem=>dataItem[pieChartSpecialSlicesId$1.defaultGroupOfSlicesId]===true))?.[ChartDefaults.pieChart.technicalFieldGroupedSlices]??[];const fullDataSet=[...chart.data,...existingGroupedSlices];const newChartData=fullDataSet.filter((dataItem=>{let keepSlice=true;const sliceStat=dataItem[defaultPieFromFieldsValue$1]??dataItem[firstSeries.y];if(Number.isFinite(sliceStat)===true){const slicePercent=sliceStat/totalSum*100;dataItem[ChartDefaults.pieChart.technicalFieldSlicePercent]=slicePercent;if(slicePercent<=percentageThreshold&&dataItem[pieChartSpecialSlicesId$1.defaultGroupOfSlicesId]!==true){groupOfSlicesStat+=sliceStat;groupeOfSlicesDataContext.push(dataItem);keepSlice=false}}else if(dataItem[pieChartSpecialSlicesId$1.defaultGroupOfSlicesId]!==true){groupeOfSlicesDataContext.push(dataItem);keepSlice=percentageThreshold===0||percentageThreshold===undefined}if(dataItem[pieChartSpecialSlicesId$1.defaultGroupOfSlicesId]===true){currentGroupOfSlices=dataItem;keepSlice=false}return keepSlice}));if(percentageThreshold>0&&groupeOfSlicesDataContext.length>0){const groupOfSlicesPercent=groupOfSlicesStat/totalSum*100;const isPieFromFields=isPieChartFromFields$1(seriesConfig);const groupOfSlicesDataItem={...currentGroupOfSlices,[pieChartSpecialSlicesId$1.defaultGroupOfSlicesId]:true,[isPieFromFields===true?defaultPieFromFieldsName$1:firstSeries.x]:firstSeries.sliceGrouping?.label??commonStrings?.pieChart.defaultSliceGroupingLabel,[isPieFromFields===true?defaultPieFromFieldsValue$1:firstSeries.y]:groupOfSlicesStat,[ChartDefaults.pieChart.technicalFieldSlicePercent]:groupOfSlicesPercent,[ChartDefaults.pieChart.technicalFieldGroupedSlices]:groupeOfSlicesDataContext};newChartData.push(groupOfSlicesDataItem)}chart.data=newChartData}async function chartWillRender(props){const{chart,data,chartConfig,pieSlicesSymbols,queryObject,options,currentValidationStatus,commonStrings}=props;const{slices}=pieSlicesSymbols??{};const{chartWillRender:chartWillRenderCallback,createMessage}=options??{};let newValidationStatus=currentValidationStatus;let alteredConfig=chartConfig;let alteredPieSlicesSymbols=cloneDeep$1(pieSlicesSymbols);if(chartWillRenderCallback!==undefined){alteredConfig=cloneDeep$1(chartConfig);const sanitizedData=sanitizeData({data,seriesConfig:chartConfig.series});alteredConfig=await chartWillRenderCallback({chartConfig:alteredConfig,data:sanitizedData,slices});newValidationStatus=await isValidConfig({chart,chartConfig:alteredConfig,queryObject,createMessage});if(chart instanceof PieChart){alteredPieSlicesSymbols=await computePieChartSlices({chart,chartConfig:alteredConfig,queryObject,labelUpdateNeeded:true,commonStrings})}}return{alteredConfig,newValidationStatus,alteredPieSlicesSymbols}}options.classNamePrefix="arcgis-charts-";async function setChartLocale(chart,localeInfo){const chartLocale=await fetchChartLocaleStrings(localeInfo.locale);options.defaultLocale=chartLocale;chart.language.locale=chartLocale;updateChartStorage(chart.uid,{locale:localeInfo.locale,formatLocale:localeInfo.formatLocale});chart.rtl=localeInfo.rtl===true}function setActionMode(props){const{chart,actionMode,cursorRange}=props;if(isElementValid(chart)){const newActionMode=actionMode??getValueFromChartStorage(chart.uid,"actionMode")??ChartDefaults.actionMode;updateChartStorage(chart.uid,{actionMode:newActionMode});const filterBySelection=getValueFromChartStorage(chart.uid,"filterBySelection");switch(newActionMode){case ActionModes$1.MonoSelection:case ActionModes$1.MultiSelection:case ActionModes$1.MultiSelectionWithCtrlKey:if(filterBySelection!==true)addSelectionEvents(chart);else removeSelectionEvents(chart);break;case ActionModes$1.Zoom:removeSelectionEvents(chart);break;case ActionModes$1.None:clearSelection({chart,selectionSource:SelectionSource.ClearSelection,clearOnlyVisibleSeries:false,disposeStyleAndSelection:false});removeSelectionEvents(chart);break}updateChartCursorBehavior({chart,actionMode:newActionMode,cursorRange})}}function activateMobileFeatures(chart,enableResponsiveFeatures){if(enableResponsiveFeatures===true){chart.tapToActivate=true;chart.tapTimeout=3e3;chart.responsive.enabled=true}}function setSvgContainerPosition(chart,position){const svgContainer=chart.svgContainer?.SVGContainer;if(svgContainer!==undefined){svgContainer.style.position=position??"relative"}}function setSvgContainerDisplay(chart){const svgContainer=chart.svgContainer?.SVGContainer;if(svgContainer!==undefined){svgContainer.style.display="flex"}}async function initializeAxes(props){const{chart,axesTypes,chartType,isRotated}=props;const locale=getValueFromChartStorage(chart.uid,"locale");await validateAxesValueFormat({chartType,axesTypes,locale});switch(chartType){case WebChartTypes$2.ScatterSeries:{initializeScatterPlotAxes(chart,axesTypes);break}case WebChartTypes$2.HistogramSeries:{initializeHistogramAxes({chart,axesTypes});break}case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:case WebChartTypes$2.ComboLineAndBarSeries:case WebChartTypes$2.BoxPlotSeries:{await initializeBarAndLineChartAxes({chart,chartType,axesTypes,isRotated});break}case WebChartTypes$2.GaugeSeries:{await initializeGaugeAxis(chart,axesTypes[0]);break}}}async function updateAxes(props){const{chart,chartConfig,chartConfig:{axes},rotationChanged,axisLabelsBehaviorChanged,chartType,isRotated,data,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,gaugeInnerLabelFormatter,commonStrings}=props;const axesTypes=[chartConfig.axes?.[0].valueFormat,chartConfig.axes?.[1]?.valueFormat];const locale=getValueFromChartStorage(chart.uid,"locale");await validateAxesValueFormat({chartType,axesTypes,locale});switch(chartType){case WebChartTypes$2.ScatterSeries:{await updateScatterPlotAxes({chart,axes,axisLabelsBehaviorChanged,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings});break}case WebChartTypes$2.HistogramSeries:{if(chart.data!==undefined)await updateHistogramAxes({chart,axes,histogramBins:chart.data,guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings});break}case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:case WebChartTypes$2.ComboLineAndBarSeries:case WebChartTypes$2.BoxPlotSeries:{await updateBarAndLineChartAxes({chart,chartConfig,rotationChanged,axisLabelsBehaviorChanged,isRotated,timeIntervalInfo:data?.timeIntervalInfo??getValueFromChartStorage(chart.uid,"timeIntervalInfo"),guideTooltipFormatter,xAxisLabelFormatter,yAxisLabelFormatter,commonStrings});break}case WebChartTypes$2.GaugeSeries:{await updateGaugeAxis({chart,chartConfig,data:(data??chart.data).dataItems,axisValueFormatter:xAxisLabelFormatter,gaugeInnerLabelFormatter});break}}}async function initializeSeries(props){const{chart,chartConfig,hideLoaderHandle,options,commonStrings,queryObject}=props;const{selectionTheme,ignoreSmoothRenderingLimit}=options??{};let axisPair;for(let i=chart.series.length-1;i>=0;i-=1)chart.series.removeIndex(i).dispose();let chartSeries;let seriesType;const{type:dataSourceType}=chartConfig.dataSource;const initializeScatterOrHistogramSeriesPromises=[];const seriesList=[];for(let iSeries=0;iSeries<chartConfig.series.length;iSeries+=1){const series=chartConfig.series[iSeries];seriesType=getSeriesType$1([series]);switch(seriesType){case WebChartTypes$2.BarSeries:{axisPair=[chart.xAxes.getIndex(0),chart.yAxes.getIndex(0)];chartSeries=initializeBarChartSeries({chartConfig,seriesIndex:iSeries,axisPair,hideLoaderHandle,selectionTheme,dataSourceType});adjustValueAxisBoundsOnSeriesEvents(chartSeries);seriesList.push(chartSeries);break}case WebChartTypes$2.LineSeries:{axisPair=[chart.xAxes.getIndex(0),chart.yAxes.getIndex(0)];chartSeries=initializeLineChartSeries({chart,chartConfig,seriesIndex:iSeries,axisPair,selectionTheme,ignoreSmoothRenderingLimit,hideLoaderHandle,dataSourceType});adjustValueAxisBoundsOnSeriesEvents(chartSeries);seriesList.push(chartSeries);break}case WebChartTypes$2.ScatterSeries:{axisPair=[chart.xAxes.getIndex(0),chart.yAxes.getIndex(0)];initializeScatterOrHistogramSeriesPromises.push(initializeScatterPlotSeries({chart,seriesConfig:series,axisPair,selectionTheme,ignoreSmoothRenderingLimit,hideLoaderHandle,dataSourceType}));chart.bulletsContainer.zIndex=1;chart.seriesContainer.zIndex=2;break}case WebChartTypes$2.HistogramSeries:{axisPair=[chart.xAxes.getIndex(0),chart.yAxes.getIndex(0)];initializeScatterOrHistogramSeriesPromises.push(initializeHistogramSeries({seriesConfig:series,axisPair,selectionTheme,hideLoaderHandle,commonStrings,dataSourceType}));break}case WebChartTypes$2.PieSeries:{chartSeries=initializePieChartSeries({seriesConfig:series,hideLoaderHandle,selectionTheme});seriesList.push(chartSeries);break}case WebChartTypes$2.BoxPlotSeries:{axisPair=[chart.xAxes.getIndex(0),chart.yAxes.getIndex(0)];chartSeries=initializeBoxPlotSeries({chart,axisPair,chartConfig,seriesIndex:iSeries,hideLoaderHandle,selectionTheme,dataSourceType});seriesList.push(...chartSeries.flat());break}}}const seriesColorList=getSeriesColorList({chartConfig,queryObject,chartData:chart.data});if(seriesColorList.length>0)chart.colors.list=seriesColorList.map((color=>{const[r,g,b,a]=color;return new Color({r,g,b,a})}));if(initializeScatterOrHistogramSeriesPromises.length>0){const scatterOrHistogramSeries=await Promise.all(initializeScatterOrHistogramSeriesPromises);chart.series.pushAll(scatterOrHistogramSeries.flat())}else if(seriesList.length>0){chart.series.pushAll(seriesList)}initializeChartToolTip(chart)}async function updateSeries(props){const{chart,chartConfig,chartConfig:{series:seriesConfig,axes,chartRenderer},rotationChanged,outliersVisibilityChanged,standardizeValuesVisibilityChanged,chartData,queryObject,options,dataWasUpdated,sortChanged,groupOfSlicesWasUpdated,pieSlicesSymbols,commonStrings}=props;const chartSeries=chart.series.values;const seriesSymbolMapForEvent=new Map;const numberOfSeries=chartConfig.series.length;const inlineDisplayLabelField=getDisplayLabelFromConfigFields(chartConfig);const subtypeInfo=getLayerSubtypeInfo$1(queryObject);const fieldList=await fetchLayerFieldsInfo$1(queryObject,options?.usePopupTemplateFieldsInfo);for(const[seriesIndex,currentSeriesConfig]of seriesConfig.entries()){const seriesType=getSeriesType$1([currentSeriesConfig]);const series=chartSeries[seriesIndex];const commonSeriesProps={numberOfSeries,series,seriesConfig:currentSeriesConfig,seriesIndex,dataSource:chartConfig.dataSource,queryObject,options,dataWasUpdated,inlineDisplayLabelField,fieldList,subtypeInfo,sortChanged,commonStrings};const commonXYSeriesProps={...commonSeriesProps,axes};let currentSeries=series;switch(seriesType){case WebChartTypes$2.BarSeries:updateBarChartSeries({...commonXYSeriesProps,seriesSymbolMapForEvent,rotationChanged});break;case WebChartTypes$2.LineSeries:updateLineChartSeries({...commonXYSeriesProps,seriesSymbolMapForEvent,rotationChanged});break;case WebChartTypes$2.BoxPlotSeries:{currentSeries=chartSeries.find((s=>s.id===currentSeriesConfig.id));if(series!==undefined){updateBoxPlotSeries({...commonSeriesProps,chart,series:currentSeries,seriesSymbolMapForEvent,chartData,showOutliers:chartConfig.showOutliers,outliersVisibilityChanged,standardizeValuesVisibilityChanged,rotationChanged,options})}}break;case WebChartTypes$2.ScatterSeries:updateScatterPlotSeries({...commonXYSeriesProps,chartSeries,chartData});break;case WebChartTypes$2.HistogramSeries:await updateHistogramSeries({...commonXYSeriesProps,chartSeries,chartData,chartRenderer});break;case WebChartTypes$2.PieSeries:updatePieChartSeries({...commonSeriesProps,chart,groupOfSlicesWasUpdated,pieSlicesSymbols});break}hideSeriesInLegend({chart,series:currentSeries,seriesConfig:currentSeriesConfig,hideEmptySeriesInLegend:options?.hideEmptySeriesInLegend,seriesType})}await applySelectionOnChart({chart,options,dataWasUpdated,chartData,chartConfig,queryObject,rotationChanged,sortChanged,groupOfSlicesWasUpdated})}async function completeChartWithCommonProperties(props){const{chartConfig,chart,options,globalOptions,queryObject,commonStrings,locale}=props;let headerElements;let footerElements;let legendElements;let validationStatus;const loaderHandle=initializeLoader(chart);loaderHandle.showLoader(options?.hideLoaderAnimation!==true);const seriesType=getSeriesType$1(chartConfig.series);const{valid:returnedDataIsGood,invalidType,data,count:elementCount,binnedServerData,queryConfig}=await getData({chartConfig,queryObject,abortKey:getChartUniqueInternalID(chart),options,locale});updateChartStorage(chart.uid,{elementCount,initialized:returnedDataIsGood,binnedServerData,queryConfig,timeIntervalInfo:data?.timeIntervalInfo});let chartData=extractChartDataFromFetchedData$1({seriesType,fetchedData:data});if(chartData!==undefined&&seriesType!==WebChartTypes$2.HistogramSeries){await completeDataWithRendererSymbol({data:chartData,queryObject,chartConfig})}if(returnedDataIsGood===false){await raiseInvalidDataWarning({chart,invalidType,elementCount,seriesCount:chartConfig.series.length,options,queryObject});loaderHandle.hideLoader()}else{if(chartData!==undefined)chart.data=chartData;let pieSlicesSymbols;if(chart instanceof PieChart){updatePieChartGroupOfSlices({chart,seriesConfig:chartConfig.series,commonStrings});pieSlicesSymbols=await computePieChartSlices({chart,chartConfig,queryObject,labelUpdateNeeded:true,commonStrings})}notifyDataProcessed({data:chart instanceof PieChart?{dataItems:chart.data}:data,seriesConfig:chartConfig.series,htmlContainer:chart.htmlContainer});const willRenderCallbackResults=await chartWillRender({chart,data,chartConfig,pieSlicesSymbols,queryObject,options,commonStrings});validationStatus=willRenderCallbackResults.newValidationStatus;const{alteredConfig:preRenderConfig,alteredPieSlicesSymbols}=willRenderCallbackResults;pieSlicesSymbols=alteredPieSlicesSymbols;if(chart instanceof PieChart){savePieChartLabels({chart,newChartConfig:preRenderConfig,pieSlicesSymbols});notifySeriesColorsChange({data:pieSlicesSymbols,htmlContainer:chart.htmlContainer,chartId:chart.id});notifyDataFetched({data:chart.data,chartConfig:preRenderConfig,htmlContainer:chart.htmlContainer})}if(validationStatus?.valid!==false){const{title,subTitle,footer,dataSource,series,background}=preRenderConfig;headerElements=initializeHeaderContainer(chart);updateHeaderContainer(headerElements,{title,subTitle});footerElements=initializeFooterContainer(chart);updateFooterContainer(footerElements,footer);legendElements=initializeLegend(chart);initializeChartContainersPaddings(chart);const isRotated=isChartRotated({config:preRenderConfig});let chartSubType;if(seriesType===WebChartTypes$2.BarSeries||seriesType===WebChartTypes$2.LineSeries||seriesType===WebChartTypes$2.ComboLineAndBarSeries||seriesType===WebChartTypes$2.PieSeries){chartSubType=getChartSubType$1(series)}updateChartStorage(chart.uid,{config:preRenderConfig,isRotated,isNonAggregatedChart:(chartSubType===ChartSubType$1.PieNoAggregation||chartSubType===ChartSubType$1.BarAndLineNoAggregation||chartSubType===ChartSubType$1.BarAndLineSplitByNoAggregation)&&dataSource.type!==WebChartDataSourceTypes$1.Inline});if(preRenderConfig.axes!==undefined){await initializeAxes({chart,axesTypes:[preRenderConfig.axes[0].valueFormat,preRenderConfig.axes[1]?.valueFormat],chartType:seriesType,isRotated});await updateAxes({chart,chartConfig:preRenderConfig,chartType:seriesType,isRotated,axisLabelsBehaviorChanged:[true,true],data,guideTooltipFormatter:options?.guideTooltipFormatter,xAxisLabelFormatter:options?.xAxisLabelFormatter,yAxisLabelFormatter:options?.yAxisLabelFormatter,gaugeInnerLabelFormatter:options?.gaugeInnerLabelFormatter,commonStrings})}await initializeSeries({chart,chartConfig:preRenderConfig,hideLoaderHandle:loaderHandle.hideLoader,commonStrings,options,queryObject});await updateSeries({chart,chartConfig:preRenderConfig,rotationChanged:false,queryObject,chartData:data,groupOfSlicesWasUpdated:true,pieSlicesSymbols,dataWasUpdated:true,options,commonStrings});updateLegend({legendElements,seriesConfig:series,webChartLegend:preRenderConfig.legend,seriesType,disableTogglingLegendItems:options?.disableTogglingLegendItems,pieChartLegendValueLabelFormatter:options?.pieChartLegendValueLabelFormatter});initializeChartScrollbar(chart);initializeChartBackground(chart);updateChartBackground(chart,background);updateChartScrollbar({chart,scrollbarXVisible:preRenderConfig.axes?.[0]?.scrollbarVisible,scrollbarYVisible:preRenderConfig.axes?.[1]?.scrollbarVisible});initializeChartCursor(chart);updateChartCursor(chart,preRenderConfig?.cursorCrosshair);setActionMode({chart,actionMode:options?.actionMode,cursorRange:options?.cursorRange});const localeInfo=getLocaleInfo$1(chart.htmlContainer);chart.dateFormatter.intlLocales=localeInfo.formatLocale;activateMobileFeatures(chart,globalOptions?.enableResponsiveFeatures);if(chart instanceof GaugeChart===true||whetherSeriesReady(chart.series)===true){loaderHandle.hideLoader();notifyRenderingCompleted(chart.htmlContainer)}updateChartContainersPaddings(chart)}}const chartElements=headerElements!==undefined&&footerElements!==undefined&&legendElements!==undefined?{headerElements,footerElements,legendElements,loaderHandle}:undefined;return{chartElements,validationStatus}}function handleZoomButtonAtCreation(chart){chart.series.each((currentSeries=>{currentSeries.events.on(EventTypes.Ready,(()=>{if(whetherSeriesReady(chart.series)===true){resetZoomToFullExtent(chart)}}))}))}function setModalStyle(chart){if(chart.modal!==undefined){chart.modal.classPrefix="modal";setSvgContainerPosition(chart,"static");chart.modal.events.on(EventTypes.Opened,(()=>{setSvgContainerPosition(chart,"relative");setSvgContainerDisplay(chart)}));chart.modal.events.on(EventTypes.Closed,(()=>{setSvgContainerPosition(chart,"static")}))}}async function createXYChart(props){const{chartContainer,chartConfig,queryObject,options,globalOptions}=props;const{createMessage}=options??{};if(chartContainer===undefined){await throwError("divNode")}const chart=create(chartContainer,XYChart);chart.id=chartConfig?.id??chart.uid;updateChartStorage(chart.uid,{queryObject});const localeInfo=getLocaleInfo$1(chart.htmlContainer);await setChartLocale(chart,localeInfo);const commonStrings=await fetchCommonStrings(localeInfo.locale);setModalStyle(chart);chart.events.on(EventTypes.Inited,(()=>chart.zoomOutButton.deepInvalidate()));const validationStatus=await isValidConfig({chart,chartConfig,queryObject,createMessage});const chartType=getSeriesType$1(chartConfig?.series);let chartElements;if(validationStatus.valid===true){if(chart instanceof XYChart&&chartType!==WebChartTypes$2.BoxPlotSeries)chart.maskBullets=false;chartElements=(await completeChartWithCommonProperties({chartConfig,chart,queryObject,options,globalOptions,commonStrings,locale:localeInfo.locale})).chartElements;updateChartStorage(chart.uid,{config:cloneDeep$1(chartConfig)});handleZoomButtonAtCreation(chart);addRangeSelectionOnChart(chart);addHitSelectionOnChart(chart)}notifyChartUpdated(validationStatus,chart.htmlContainer);return{chart,chartElements}}async function createPieChart(props){const{chartContainer,chartConfig,queryObject,options,globalOptions}=props;if(chartContainer===undefined){await throwError("divNode")}const chart=create(chartContainer,PieChart);chart.id=chartConfig?.id??chart.uid;const localeInfo=getLocaleInfo$1(chart.htmlContainer);await setChartLocale(chart,localeInfo);chart.radius=percent(ChartDefaults.pieChart.chartRadius);const commonStrings=await fetchCommonStrings(localeInfo.locale);setModalStyle(chart);const validationStatus=await isValidConfig({chart,chartConfig,queryObject,createMessage:options?.createMessage});let chartElements;if(validationStatus.valid===true){chartElements=(await completeChartWithCommonProperties({chartConfig,chart,queryObject,options,globalOptions,commonStrings,locale:localeInfo.locale})).chartElements;updateChartStorage(chart.uid,{config:cloneDeep$1(chartConfig),filterBySelection:options?.filterBySelection});addHitSelectionOnPieChart(chart)}notifyChartUpdated(validationStatus,chartContainer);return{chart,chartElements}}async function createGaugeChart(props){const{chartContainer,chartConfig,queryObject,options,globalOptions}=props;if(chartContainer===undefined){await throwError("divNode")}const chart=create(chartContainer,GaugeChart);chart.id=chartConfig?.id??chart.uid;const localeInfo=getLocaleInfo$1(chart.htmlContainer);await setChartLocale(chart,localeInfo);setModalStyle(chart);chart.maskBullets=false;let validationStatus=await isValidConfig({chart,chartConfig,queryObject,createMessage:options?.createMessage});let chartElements;if(validationStatus.valid===true){const gaugeDefaults=ChartDefaults.gauge;const innerRadius=Number.isFinite(chartConfig?.innerRadius)===true?chartConfig?.innerRadius:gaugeDefaults.innerRadius;const startAngle=Number.isFinite(chartConfig?.startAngle)===true?chartConfig?.startAngle:gaugeDefaults.startAngle;const endAngle=Number.isFinite(chartConfig?.endAngle)===true?chartConfig?.endAngle:gaugeDefaults.endAngle;chart.radius=percent(gaugeDefaults.radius);chart.innerRadius=percent(innerRadius);chart.startAngle=startAngle;chart.endAngle=endAngle;const commonProperties=await completeChartWithCommonProperties({chartConfig,chart,queryObject,options,globalOptions});chartElements=commonProperties.chartElements;validationStatus=commonProperties.validationStatus??validationStatus;updateChartStorage(chart.uid,{config:cloneDeep$1(chartConfig)})}handleZoomButtonAtCreation(chart);notifyChartUpdated(validationStatus,chart.htmlContainer);return{chart,chartElements}}async function updateXYChart(props){const{chart,chartElements,newConfig,options,queryObject,forceDataUpdate,commonStrings}=props;const{createMessage,chartLimits}=options??{};resetModal(chart);const validationStatus=await isValidConfig({chart,chartConfig:newConfig,queryObject,createMessage});if(validationStatus.valid===true&&newConfig!==undefined){chartElements.loaderHandle.showLoader(options?.hideLoaderAnimation!==true);const oldConfig=getValueFromChartStorage(chart.uid,"config");const oldSeries=oldConfig?.series;const{dataSource}=newConfig;const newSeries=newConfig.series;const chartType=getSeriesType$1(newSeries);const isRotated=isChartRotated({config:newConfig});updateChartStorage(chart.uid,{config:cloneDeep$1(newConfig),isRotated});const{dataUpdateNeeded,updateNeededDetails}=isDataUpdateNeeded({options,forceDataUpdate,oldConfig,newConfig,filterBySelection:getValueFromChartStorage(chart.uid,"filterBySelection"),timeIntervalInfo:getValueFromChartStorage(chart.uid,"timeIntervalInfo"),currentSelectionDataItems:getValueFromChartStorage(chart.uid,"currentSelectionDataItems"),currentSelectionOIDs:getValueFromChartStorage(chart.uid,"currentSelectionOIDs"),currentSelectionIndexes:getValueFromChartStorage(chart.uid,"computedSelectionIndexes")});updateChartStorage(chart.uid,{filterBySelection:options?.filterBySelection});setActionMode({chart,actionMode:options?.actionMode,cursorRange:options?.cursorRange});const{xOrYChanged,numberOfSeriesChanged}=updateNeededDetails.common;const rotationChanged=hasRotationChanged(oldConfig,newConfig);const comboSeriesChanged=JSON.stringify(getSeriesTypes(oldSeries))!==JSON.stringify(getSeriesTypes(newSeries));const outliersVisibilityChanged=hasOutliersVisibilityChanged(oldConfig,newConfig);const standardizeValuesVisibilityChanged=hasStandardizeValuesVisibilityChanged(oldConfig,newConfig);const chartRendererChanged=hasChartRendererChanged(oldConfig,newConfig);const sortNeeded=isNewSortNeeded(oldConfig,newConfig);const axisLabelsBehaviorChanged=hasAxisLabelsBehaviorChanged({oldConfig,newConfig,dataUpdateNeeded,rotationChanged});let fetchedData;let chartData;let returnedDataIsGood=chartType!==WebChartTypes$2.BarSeries&&chartType!==WebChartTypes$2.LineSeries&&chartType!==WebChartTypes$2.ComboLineAndBarSeries&&chartType!==WebChartTypes$2.HistogramSeries;const chartSubType=getChartSubType$1(newSeries);updateChartStorage(chart.uid,{isNonAggregatedChart:(chartSubType===ChartSubType$1.PieNoAggregation||chartSubType===ChartSubType$1.BarAndLineNoAggregation||chartSubType===ChartSubType$1.BarAndLineSplitByNoAggregation)&&dataSource.type!==WebChartDataSourceTypes$1.Inline});if(dataUpdateNeeded===true){if(forceDataUpdate===true||isBinnedServerDataResetNeeded(updateNeededDetails)===true)updateChartStorage(chart.uid,{binnedServerData:undefined});const{count:elementCount,valid,invalidType,data,binnedServerData,queryConfig}=await getData({chartConfig:newConfig,queryObject,abortKey:getChartUniqueInternalID(chart),currentSelectionDataItems:getValueFromChartStorage(chart.uid,"currentSelectionDataItems"),binnedServerData:getValueFromChartStorage(chart.uid,"binnedServerData"),options});updateChartStorage(chart.uid,{elementCount,initialized:valid,binnedServerData,queryConfig,timeIntervalInfo:data?.timeIntervalInfo});returnedDataIsGood=valid;if(returnedDataIsGood===true){resetModal(chart);fetchedData=data;chartData=extractChartDataFromFetchedData$1({seriesType:chartType,fetchedData})}else{await raiseInvalidDataWarning({chart,invalidType,elementCount,seriesCount:newSeries.length,options,queryObject});chartElements.loaderHandle.hideLoader()}}else if(chartType===WebChartTypes$2.BarSeries||chartType===WebChartTypes$2.LineSeries||chartType===WebChartTypes$2.ComboLineAndBarSeries||chartType===WebChartTypes$2.BoxPlotSeries){const elementCount=getValueFromChartStorage(chart.uid,"elementCount");if(elementCount!==undefined){returnedDataIsGood=isNumberOfElementsUnderLimit$1({count:elementCount,seriesCount:newSeries.length,seriesType:chartType,chartLimits})}if(returnedDataIsGood===true){const positionChanges=getPositionChanges(oldSeries,newSeries);if(positionChanges.length>0){swapSeries(chart.series,positionChanges);chart.feedLegend()}if(sortNeeded===true){sortFetchedData({arrayToSort:chart.data,chartConfig:newConfig,orderByFieldsConfig:newSeries[0]?.query?.orderByFields});chart.validateData()}const{timeIntervalUnits,timeIntervalSize,binTemporalData}=newSeries[0];if(binTemporalData===false&&timeIntervalUnits!==undefined&&timeIntervalSize!==undefined){updateChartStorage(chart.uid,{timeIntervalInfo:{timeIntervalUnits,timeIntervalSize}})}}else{let dataWarningType;switch(chartType){case WebChartTypes$2.BarSeries:case WebChartTypes$2.ComboLineAndBarSeries:dataWarningType=DataWarningKeywords$1.BarElementExceedsLimit;break;case WebChartTypes$2.LineSeries:dataWarningType=DataWarningKeywords$1.LineChartExceedsLimit;break;case WebChartTypes$2.BoxPlotSeries:dataWarningType=DataWarningKeywords$1.BoxPlotExceedsLimit;break}await raiseInvalidDataWarning({chart,invalidType:dataWarningType,elementCount,seriesCount:newSeries.length,options,queryObject});chartElements.loaderHandle.hideLoader()}fetchedData={dataItems:chart.data,timeIntervalInfo:getValueFromChartStorage(chart.uid,"timeIntervalInfo"),outliers:chart.series.values.find((s=>s instanceof StepLineSeries===false&&s instanceof LineSeries))?.data}}if(dataUpdateNeeded===true||sortNeeded===true){notifyDataProcessed({data:fetchedData,seriesConfig:newConfig.series,htmlContainer:chart.htmlContainer})}if(dataUpdateNeeded===false||returnedDataIsGood===true){if((dataUpdateNeeded===true||chartRendererChanged===true)&&chartType!==WebChartTypes$2.HistogramSeries){await completeDataWithRendererSymbol({data:chartData??chart.data,queryObject,chartConfig:newConfig})}if(chartData!==undefined){chart.data=chartData;chart.events.once(EventTypes.DataItemsValidated,(()=>{resetZoomToFullExtent(chart)}))}if(newConfig.axes!==undefined){await updateAxes({chart,chartConfig:newConfig,rotationChanged,axisLabelsBehaviorChanged,chartType,isRotated,xAxisLabelFormatter:options?.xAxisLabelFormatter,yAxisLabelFormatter:options?.yAxisLabelFormatter,commonStrings})}if(chart.series===undefined||chart.series.length===0||xOrYChanged===true||numberOfSeriesChanged===true||comboSeriesChanged===true||rotationChanged===true||updateNeededDetails.boxPlot.splitByValueChanged===true){if(rotationChanged===true){chart.invalidateData()}await initializeSeries({chart,chartConfig:newConfig,hideLoaderHandle:chartElements.loaderHandle.hideLoader,commonStrings,queryObject,options})}await updateSeries({chart,chartConfig:newConfig,rotationChanged,outliersVisibilityChanged,standardizeValuesVisibilityChanged,queryObject,chartData:fetchedData,options,dataWasUpdated:dataUpdateNeeded,sortChanged:sortNeeded,commonStrings});updateHeaderContainer(chartElements.headerElements,{title:newConfig.title,subTitle:newConfig.subTitle});updateFooterContainer(chartElements.footerElements,newConfig.footer);updateLegend({legendElements:chartElements.legendElements,seriesConfig:newConfig.series,webChartLegend:newConfig.legend,seriesType:chartType,disableTogglingLegendItems:options?.disableTogglingLegendItems});updateChartBackground(chart,newConfig.background);updateChartScrollbar({chart,scrollbarXVisible:newConfig.axes?.[0]?.scrollbarVisible,scrollbarYVisible:newConfig.axes?.[1]?.scrollbarVisible})}if(whetherSeriesReady(chart.series)===true){chartElements.loaderHandle.hideLoader();notifyRenderingCompleted(chart.htmlContainer)}}notifyChartUpdated(validationStatus,chart.htmlContainer);updateChartCursor(chart,newConfig?.cursorCrosshair);const chartCursor=getChartCursor(chart);if(chartCursor.behavior===CursorBehavior.SelectX||chartCursor.behavior===CursorBehavior.SelectXY||chartCursor.behavior===CursorBehavior.SelectY||chartCursor.behavior===CursorBehavior.None){resetZoomToFullExtent(chart)}updateChartContainersPaddings(chart)}async function updatePieChart(props){const{chart,chartElements,newConfig,queryObject,forceDataUpdate,options,commonStrings}=props;resetModal(chart);let validationStatus=await isValidConfig({chart,chartConfig:newConfig,queryObject,createMessage:options?.createMessage});if(validationStatus.valid===true&&newConfig!==undefined){chartElements.loaderHandle.showLoader(options?.hideLoaderAnimation!==true);const oldConfig=getValueFromChartStorage(chart.uid,"config");const oldSeries=oldConfig?.series;const newSeries=newConfig?.series;const{dataUpdateNeeded}=isDataUpdateNeeded({forceDataUpdate,oldConfig,newConfig,options,filterBySelection:getValueFromChartStorage(chart.uid,"filterBySelection"),currentSelectionDataItems:getValueFromChartStorage(chart.uid,"currentSelectionDataItems"),currentSelectionOIDs:getValueFromChartStorage(chart.uid,"currentSelectionDataItems"),currentSelectionIndexes:getValueFromChartStorage(chart.uid,"currentSelectionDataItems")});const chartRendererChanged=hasChartRendererChanged(oldConfig,newConfig);const sortNeeded=isNewSortNeeded(oldConfig,newConfig)===true;updateChartStorage(chart.uid,{filterBySelection:options?.filterBySelection,config:cloneDeep$1(newConfig)});let returnedDataIsGood=true;let fetchedData;let chartData;let dataWasUpdated=false;if(dataUpdateNeeded===true){const{count:elementCount,valid,invalidType,data,queryConfig}=await getData({chartConfig:newConfig,currentSelectionDataItems:getValueFromChartStorage(chart.uid,"currentSelectionDataItems"),options,queryObject,abortKey:getChartUniqueInternalID(chart)});fetchedData=data;updateChartStorage(chart.uid,{elementCount,queryConfig,initialized:valid});returnedDataIsGood=valid;chartData=extractChartDataFromFetchedData$1({seriesType:WebChartTypes$2.PieSeries,fetchedData});if(returnedDataIsGood===true){if(chartData!==undefined&&pieChartDataChanged(chart.data,chartData)===true){chart.data=chartData;dataWasUpdated=true}}else{await raiseInvalidDataWarning({chart,invalidType,elementCount,seriesCount:newSeries.length,options,queryObject});chartElements.loaderHandle.hideLoader()}}if(dataWasUpdated===false||returnedDataIsGood===true){if(dataUpdateNeeded===true||chartRendererChanged===true){chart.data=await completeDataWithRendererSymbol({data:chartData??chart.data,queryObject,chartConfig:newConfig})}const groupOfSlicesUpdateNeeded=isPieChartGroupOfSlicesUpdateNeeded(oldSeries,newSeries);if(dataWasUpdated===true||groupOfSlicesUpdateNeeded===true){updatePieChartGroupOfSlices({chart,seriesConfig:newSeries,commonStrings})}if(sortNeeded===true||groupOfSlicesUpdateNeeded===true){sortFetchedData({arrayToSort:chartData??chart.data,chartConfig:newConfig,orderByFieldsConfig:newSeries[0]?.query?.orderByFields});chart.validateData()}const slicesConfigChangedSinceLastUpdate=hasSlicesConfigChanged({oldConfig,newConfig})===true;let pieSlicesSymbols=await computePieChartSlices({chart,chartConfig:newConfig,queryObject,labelUpdateNeeded:dataWasUpdated===true||slicesConfigChangedSinceLastUpdate===true,commonStrings});if(dataWasUpdated===true||sortNeeded===true){notifyDataProcessed({data:{dataItems:chart.data},seriesConfig:newConfig.series,htmlContainer:chart.htmlContainer});notifyDataFetched({data:chart.data,chartConfig:newConfig,htmlContainer:chart.htmlContainer})}const willRenderCallbackResults=await chartWillRender({chart,data:{dataItems:chart.data},chartConfig:newConfig,pieSlicesSymbols,queryObject,options,currentValidationStatus:validationStatus,commonStrings});validationStatus=willRenderCallbackResults.newValidationStatus??validationStatus;const{alteredPieSlicesSymbols,alteredConfig:preRenderConfig}=willRenderCallbackResults;pieSlicesSymbols=alteredPieSlicesSymbols;const slicesConfigChangedByWillRender=hasSlicesConfigChanged({oldConfig:newConfig,newConfig:preRenderConfig})===true;if(dataUpdateNeeded===true||slicesConfigChangedSinceLastUpdate===true||slicesConfigChangedByWillRender===true){savePieChartLabels({chart,newChartConfig:preRenderConfig,pieSlicesSymbols})}notifySeriesColorsChange({data:pieSlicesSymbols,htmlContainer:chart.htmlContainer,chartId:chart.id});await updateSeries({chart,queryObject,chartConfig:preRenderConfig,options,dataWasUpdated,sortChanged:sortNeeded,chartData:fetchedData,groupOfSlicesWasUpdated:groupOfSlicesUpdateNeeded,pieSlicesSymbols,commonStrings});updateHeaderContainer(chartElements.headerElements,{title:preRenderConfig.title,subTitle:preRenderConfig.subTitle});updateFooterContainer(chartElements.footerElements,preRenderConfig.footer);updateLegend({legendElements:chartElements.legendElements,seriesConfig:preRenderConfig.series,webChartLegend:preRenderConfig.legend,disableTogglingLegendItems:options?.disableTogglingLegendItems,pieChartLegendValueLabelFormatter:options?.pieChartLegendValueLabelFormatter});updateChartBackground(chart,preRenderConfig.background);chart.series.getIndex(0)?.events.once(EventTypes.Validated,(()=>{setActionMode({chart,actionMode:options?.actionMode,cursorRange:options?.cursorRange})}));updatePieChartSize(chart)}if(whetherSeriesReady(chart.series)===true){chartElements.loaderHandle.hideLoader();notifyRenderingCompleted(chart.htmlContainer)}}notifyChartUpdated(validationStatus,chart.htmlContainer)}async function updateGauge(props){const{chart,chartElements,newConfig,queryObject,forceDataUpdate,options,commonStrings}=props;resetModal(chart);let validationStatus=await isValidConfig({chart,chartConfig:newConfig,queryObject,createMessage:options?.createMessage});if(validationStatus.valid===true&&newConfig!==undefined){chartElements.loaderHandle.showLoader(options?.hideLoaderAnimation!==true);const oldConfig=getValueFromChartStorage(chart.uid,"config");const newSeries=newConfig.series;const seriesType=getSeriesType$1(newSeries);const{dataUpdateNeeded}=isDataUpdateNeeded({forceDataUpdate,oldConfig,newConfig});let chartData;if(dataUpdateNeeded===true){const{count:elementCount,valid,invalidType,data,queryConfig}=await getData({chartConfig:newConfig,queryObject,options,abortKey:getChartUniqueInternalID(chart)});chartData=data;if(chartData?.dataItems!==undefined)chart.data=chartData?.dataItems;notifyDataProcessed({data:{dataItems:chart.data},seriesConfig:newConfig.series,htmlContainer:chart.htmlContainer});updateChartStorage(chart.uid,{elementCount,queryConfig,initialized:valid});if(valid===false){await raiseInvalidDataWarning({chart,invalidType,elementCount,seriesCount:1,options,queryObject});chartElements.loaderHandle.hideLoader()}}const willRenderCallbackResults=await chartWillRender({chart,data:{dataItems:chart.data},chartConfig:newConfig,queryObject,options,currentValidationStatus:validationStatus,commonStrings});validationStatus=willRenderCallbackResults.newValidationStatus??validationStatus;const preRenderConfig=willRenderCallbackResults.alteredConfig;if(validationStatus.valid!==false){if(preRenderConfig.axes!==undefined){await updateAxes({chart,chartConfig:preRenderConfig,chartType:seriesType,data:chartData,xAxisLabelFormatter:options?.xAxisLabelFormatter,gaugeInnerLabelFormatter:options?.gaugeInnerLabelFormatter})}const gaugeDefaults=ChartDefaults.gauge;const innerRadius=Number.isFinite(preRenderConfig?.innerRadius)===true?preRenderConfig?.innerRadius:gaugeDefaults.innerRadius;const startAngle=Number.isFinite(preRenderConfig?.startAngle)===true?preRenderConfig?.startAngle:gaugeDefaults.startAngle;const endAngle=Number.isFinite(preRenderConfig?.endAngle)===true?preRenderConfig?.endAngle:gaugeDefaults.endAngle;chart.innerRadius=percent(innerRadius);chart.startAngle=startAngle;chart.endAngle=endAngle;updateHeaderContainer(chartElements.headerElements,{title:preRenderConfig.title,subTitle:preRenderConfig.subTitle});updateFooterContainer(chartElements.footerElements,preRenderConfig.footer);updateChartBackground(chart,preRenderConfig.background);updateChartStorage(chart.uid,{config:cloneDeep$1(preRenderConfig)});chartElements.loaderHandle.hideLoader();notifyRenderingCompleted(chart.htmlContainer)}}notifyChartUpdated(validationStatus,chart.htmlContainer)}async function initializeChart(props){const{chartContainer,chartConfig,queryObject,options:options$1,globalOptions}=props;options.commercialLicense=globalOptions?.hideLicenceWatermark!==false;options.queue=globalOptions?.queueChartCreation!==false;options.autoDispose=globalOptions?.autoDisposeChart===true;if(globalOptions?.useAnimatedCharts===true)useTheme(theme);else unuseTheme(theme);let chartResult;const seriesType=getSeriesType$1(chartConfig?.series);switch(seriesType){case WebChartTypes$2.PieSeries:chartResult=await createPieChart({chartContainer,chartConfig,queryObject,options:options$1,globalOptions});break;case WebChartTypes$2.GaugeSeries:chartResult=await createGaugeChart({chartContainer,chartConfig,queryObject,options:options$1,globalOptions});break;default:chartResult=await createXYChart({chartContainer,chartConfig,queryObject,options:options$1,globalOptions});break}return chartResult}async function createChart(createChartProps){const{chartContainer,chartConfig,options,globalOptions}=createChartProps;const{layer,view,inlineData}=options??{};let fullChartConfig=chartConfig;if(fullChartConfig!==undefined&&hasDataSource(fullChartConfig)===false){fullChartConfig=addDataSource({chartConfig:fullChartConfig,layer,inlineData})}fullChartConfig=await convertChartSpec(fullChartConfig,layer);let queryObject;if(fullChartConfig?.dataSource?.type===WebChartDataSourceTypes$1.Layer||layer!==undefined){queryObject=await getQueryObject({chartConfig:fullChartConfig,layer,view})}const chartResult=await initializeChart({chartContainer,chartConfig:fullChartConfig,queryObject,options,globalOptions});const{chart,chartElements}=chartResult;const errorStrings=await fetchErrorsStrings();chart.adapter.add("criticalError",(e=>{e.message=errorStrings.errors.simpleError;return e}));const fieldList=await fetchLayerFieldsInfo$1(queryObject,options?.usePopupTemplateFieldsInfo);const chartContainerHidden=isChartContainerVisible(chartContainer)===false;updateChartStorage(chart.uid,{chartWasCreatedWhileHidden:chartContainerHidden,queryObject,filterBySelection:options?.filterBySelection,options,fieldList});addChartContainerVisibilityChangeHandler(chart,chartContainer);await raiseNoDataWarning({chart,chartConfig:fullChartConfig,options,queryObject});function dispose(){abortControllerMap$1.delete(getChartUniqueInternalID(chart));if(chart.isDisposed()!==true){deleteChartStorage(chart);if(chartElements!==undefined){chartElements.loaderHandle.hideLoader();chartResult.chartElements=undefined}chart.dispose()}}async function updateChartElements(updateChartElementsProps){const{newConfig,forceDataUpdate,updateOptions,updateGlobalOptions}=updateChartElementsProps;let{commonStrings}=updateChartElementsProps;const locale=getValueFromChartStorage(chart.uid,"locale");commonStrings=commonStrings??await fetchCommonStrings(locale);const initialized=getValueFromChartStorage(chart.uid,"initialized");const oldConfig=getValueFromChartStorage(chart.uid,"config");const newSeries=newConfig?.series;const newChartType=newSeries!==undefined?getSeriesType$1(newSeries):undefined;if(chart.isDisposed()===true||chartElements===undefined||initialized===false||isSeriesTypeChangeAllowed(oldConfig,newConfig)===false){throw new ArcgisChartsError$1(ErrorKeywords$1.ChartDisposed)}else{switch(newChartType){case WebChartTypes$2.BoxPlotSeries:case WebChartTypes$2.BarSeries:case WebChartTypes$2.LineSeries:case WebChartTypes$2.ComboLineAndBarSeries:case WebChartTypes$2.ScatterSeries:case WebChartTypes$2.HistogramSeries:await updateXYChart({chart,chartElements,queryObject,newConfig,forceDataUpdate,options:updateOptions,globalOptions:updateGlobalOptions,commonStrings});break;case WebChartTypes$2.PieSeries:await updatePieChart({chart,chartElements,queryObject,forceDataUpdate,newConfig,options:updateOptions,globalOptions:updateGlobalOptions,commonStrings});break;case WebChartTypes$2.GaugeSeries:await updateGauge({chart,chartElements,newConfig,queryObject,forceDataUpdate,options:updateOptions,globalOptions:updateGlobalOptions,commonStrings});break}}}async function updateFLDataSource(updateFLDataSourceProps){const{layerUpdate,newConfig,viewUpdate}=updateFLDataSourceProps;if(layerUpdate!==undefined||newConfig?.dataSource?.type===WebChartDataSourceTypes$1.Layer){queryObject=await getQueryObject({layer:layerUpdate,view:viewUpdate,chartConfig:newConfig});updateChartStorage(chart.uid,{queryObject})}}async function update(updateProps){const{newChartConfig,updateOptions,updateGlobalOptions}=updateProps;const{layer:layerUpdate,view:viewUpdate,dataUpdated,inlineData:inlineDataUpdate}=updateOptions??{};const locale=getValueFromChartStorage(chart.uid,"locale");const commonStrings=await fetchCommonStrings(locale);const chartWasUpdatedWhileHidden=isChartContainerVisible(chartContainer)===false;const fieldList=await fetchLayerFieldsInfo$1(queryObject,options?.usePopupTemplateFieldsInfo);updateChartStorage(chart.uid,{chartWasUpdatedWhileHidden,options:updateOptions,fieldList});let fullNewChartConfig=newChartConfig;if(fullNewChartConfig!==undefined&&hasDataSource(fullNewChartConfig)===false){fullNewChartConfig=addDataSource({chartConfig:fullNewChartConfig,layer:layerUpdate,inlineData:inlineDataUpdate})}fullNewChartConfig=await convertChartSpec(fullNewChartConfig,layerUpdate);const isFeatureLayerBefore=isFeatureLayer$1(queryObject);await updateFLDataSource({layerUpdate,newConfig:fullNewChartConfig,viewUpdate});const isFeatureLayerAfter=isFeatureLayer$1(queryObject);const forceDataUpdate=dataUpdated===true||isFeatureLayerBefore!==isFeatureLayerAfter;await updateChartElements({newConfig:fullNewChartConfig,updateOptions,forceDataUpdate,updateGlobalOptions,commonStrings});await raiseNoDataWarning({chart,chartConfig:fullNewChartConfig,options:updateOptions,queryObject})}async function switchSelection(){if(isElementValid(chart)&&(chart instanceof XYChart||chart instanceof PieChart)){const actionMode=getValueFromChartStorage(chart.uid,"actionMode");if(actionMode!==ActionModes$1.MonoSelection&&actionMode!==ActionModes$1.None){await switchChartSelection(chart)}}}function notify(message,heading,notifyOptions){if(chart.modal!==undefined&&chart.isDisposed()!==true){chart.modal.closable=notifyOptions?.closable??false;if(message!==undefined){chart.openModal(message,heading)}else{chart.closeModal()}}}function resetZoom(){resetZoomToFullExtent(chart)}return{update,dispose,notify,resetZoom,clearSelection:()=>clearSelection({chart}),switchSelection,setActionMode:(actionMode,cursorRange)=>setActionMode({chart,actionMode,cursorRange})}}function reusify(Constructor){var head=new Constructor;var tail=head;function get(){var current=head;if(current.next){head=current.next}else{head=new Constructor;tail=head}current.next=null;return current}function release(obj){tail.next=obj;tail=obj}return{get,release}}var reusify_1=reusify;function fastqueue(context,worker,concurrency){if(typeof context==="function"){concurrency=worker;worker=context;context=null}if(concurrency<1){throw new Error("fastqueue concurrency must be greater than 1")}var cache=reusify_1(Task);var queueHead=null;var queueTail=null;var _running=0;var errorHandler=null;var self={push,drain:noop,saturated:noop,pause,paused:false,concurrency,running,resume,idle,length,getQueue,unshift,empty:noop,kill,killAndDrain,error};return self;function running(){return _running}function pause(){self.paused=true}function length(){var current=queueHead;var counter=0;while(current){current=current.next;counter++}return counter}function getQueue(){var current=queueHead;var tasks=[];while(current){tasks.push(current.value);current=current.next}return tasks}function resume(){if(!self.paused)return;self.paused=false;for(var i=0;i<self.concurrency;i++){_running++;release()}}function idle(){return _running===0&&self.length()===0}function push(value,done){var current=cache.get();current.context=context;current.release=release;current.value=value;current.callback=done||noop;current.errorHandler=errorHandler;if(_running===self.concurrency||self.paused){if(queueTail){queueTail.next=current;queueTail=current}else{queueHead=current;queueTail=current;self.saturated()}}else{_running++;worker.call(context,current.value,current.worked)}}function unshift(value,done){var current=cache.get();current.context=context;current.release=release;current.value=value;current.callback=done||noop;if(_running===self.concurrency||self.paused){if(queueHead){current.next=queueHead;queueHead=current}else{queueHead=current;queueTail=current;self.saturated()}}else{_running++;worker.call(context,current.value,current.worked)}}function release(holder){if(holder){cache.release(holder)}var next=queueHead;if(next){if(!self.paused){if(queueTail===queueHead){queueTail=null}queueHead=next.next;next.next=null;worker.call(context,next.value,next.worked);if(queueTail===null){self.empty()}}else{_running--}}else if(--_running===0){self.drain()}}function kill(){queueHead=null;queueTail=null;self.drain=noop}function killAndDrain(){queueHead=null;queueTail=null;self.drain();self.drain=noop}function error(handler){errorHandler=handler}}function noop(){}function Task(){this.value=null;this.callback=noop;this.next=null;this.release=noop;this.context=null;this.errorHandler=null;var self=this;this.worked=function worked(err,result){var callback=self.callback;var errorHandler=self.errorHandler;var val=self.value;self.value=null;self.callback=noop;if(self.errorHandler){errorHandler(err,val)}callback.call(self.context,err,result);self.release(self)}}function queueAsPromised(context,worker,concurrency){if(typeof context==="function"){concurrency=worker;worker=context;context=null}function asyncWrapper(arg,cb){worker.call(this,arg).then((function(res){cb(null,res)}),cb)}var queue=fastqueue(context,asyncWrapper,concurrency);var pushCb=queue.push;var unshiftCb=queue.unshift;queue.push=push;queue.unshift=unshift;queue.drained=drained;return queue;function push(value){var p=new Promise((function(resolve,reject){pushCb(value,(function(err,result){if(err){reject(err);return}resolve(result)}))}));p.catch(noop);return p}function unshift(value){var p=new Promise((function(resolve,reject){unshiftCb(value,(function(err,result){if(err){reject(err);return}resolve(result)}))}));p.catch(noop);return p}function drained(){var previousDrain=queue.drain;var p=new Promise((function(resolve){queue.drain=function(){previousDrain();resolve()}}));return p}}var queue=fastqueue;var promise=queueAsPromised;queue.promise=promise;const ArcgisChartsNotifyPanel=({message,heading,options})=>{const alertComponent=interfaces.h("calcite-alert",{icon:options?.icon??"exclamationMarkTriangle",open:options?.active===true,autoClose:options?.autoClose??false,autoCloseDuration:options?.duration??"medium",scale:"m",kind:options?.kind??"danger","aria-hidden":options?.active!==true,dir:"ltr",role:"alertdialog",label:"arcgis charts notify panel"},heading!==undefined?interfaces.h("div",{slot:"title"},heading):null,message!==undefined?interfaces.h("div",{slot:"message"},message):null);return alertComponent};function isDataUpdateNeededToUpdateColorMatch(){return true}async function addLayerFilterListener(props){const{layer,component}=props;let newListener;if(layer!==undefined&&component.refreshOnLayerFilterChange===true){const theLayer=interfaces.getLayerFromQueryObject(layer);newListener=await reactiveUtils__namespace.watch((()=>theLayer.definitionExpression),(async()=>{await component.refresh({updateData:true,resetAxesBounds:true})}))}return newListener}async function addLayerRendererListener(props){const{layer,component}=props;let newListener;if(layer!==undefined){const theLayer=interfaces.getLayerFromQueryObject(layer);newListener=await reactiveUtils__namespace.watch((()=>theLayer.renderer),(async()=>{if(component.config?.series[0].colorType===WebChartColoringPatterns$2.Match){const forceDataUpdate=isDataUpdateNeededToUpdateColorMatch();await component.refresh({updateData:forceDataUpdate})}}))}return newListener}async function addExtentChangeListener(props){const{view,layer,component}=props;let extentChangeListeners;if(view!==undefined&&component.config!==undefined){const layerView=await interfaces.getQueryObject({chartConfig:component.config,view,layer});await reactiveUtils__namespace.whenOnce((()=>layerView.updating===false));const updateCallback=async()=>{if(view.stationary===true){if(layerView.updating===true)await reactiveUtils__namespace.whenOnce((()=>layerView.updating===false));await component.refresh({updateData:true,resetAxesBounds:true,updateExtent:true})}};extentChangeListeners=[];extentChangeListeners.push(reactiveUtils__namespace.when((()=>view.stationary===true),updateCallback));extentChangeListeners.push(reactiveUtils__namespace.when((()=>layerView.updating===false),updateCallback));await updateCallback()}return extentChangeListeners}const maximumNumberOfSimultaneousUpdates=1;const HTMLClasses={Show:"show",Hide:"hide",NotifyPanel:"notifyPanel",DisableInteractions:"disable-interactions"};const arcgisChartsGaugeCss='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.gaugeSeries{flex-grow:1;overflow-y:hidden}.gaugeSeries>div{justify-content:center;align-items:center}.gaugeSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.gaugeSeries .arcgis-charts-modal-inside ol{padding-left:2em}.gaugeSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.gaugeSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.gaugeSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.gaugeSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.gaugeSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-gauge-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-gauge-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row}';const ArcGISChartsGauge=interfaces.proxyCustomElement(class ArcGISChartsGauge extends interfaces.H{constructor(){super();this.__registerHost();this.__attachShadow();this.arcgisChartsDataProcessError=interfaces.createEvent(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=interfaces.createEvent(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsUpdateComplete=interfaces.createEvent(this,"arcgisChartsUpdateComplete",7);this.skipNextUpdate=false;this.noRenderProps=["view","featureIndex"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.view=undefined;this.layer=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.featureIndex=undefined;this.placeholder=undefined;this.chartLimits=undefined;this.axisLabelFormatter=undefined;this.gaugeInnerLabelFormatter=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.chartWillRender=undefined;this.usePopupTemplateFieldsInfo=undefined;this.refreshOnLayerFilterChange=true;this.showNotifyPanel=false}handleChartOutputDataChange(event){this.arcgisChartsDataProcessComplete.emit(event.detail)}handleUpdateCompleted(event){this.arcgisChartsUpdateComplete.emit(event.detail)}handleAlertClosed(event){if(event.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}async viewChange(newView,oldView){await this.addExtentChangeListener();if(oldView!==undefined&&newView===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}async inlineDataChange(){this.updatedProps.add("inlineData")}async runtimeDataFiltersChange(){this.updatedProps.add("runtimeDataFilters")}featureIndexChange(newFeatureIndex,oldFeatureIndex){if(oldFeatureIndex===undefined&&newFeatureIndex!==undefined){this.dataUpdateIsNeeded()}this.config=this.updateFeatureIndex(newFeatureIndex,this.config)}async notify(message,heading,options){if(this.chart!==undefined){this.chart.notify(message,heading,options)}return Promise.resolve(undefined)}async errorAlert(errorMessage){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=errorMessage;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async refresh(props){const{updateData=true,updateExtent=false}=props??{};this.viewExtentUpdated=updateExtent;if(updateData===true)this.dataUpdateIsNeeded();await this.componentDidUpdate();this.viewExtentUpdated=false}async componentWillLoad(){({strings:this.strings}=await interfaces.fetchComponentLocaleStrings(this.el,interfaces.getAssetPath(`.`)));this.debouncedChartUpdate=promise((async()=>{if(this.chart!==undefined){const updatedProps=Array.from(this.updatedProps);if(updatedProps.length>0){const dataUpdateNeeded=updatedProps.some((updatedProp=>this.dataUpdateNeededProps.includes(updatedProp)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:gatherComponentOptions({component:this,dataUpdated:dataUpdateNeeded,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:gatherComponentGlobalOptions(this)})}else{return Promise.resolve(undefined)}}}),maximumNumberOfSimultaneousUpdates)}componentShouldUpdate(...args){const[,,propName]=args;this.updatedProps.add(propName);const shouldUpdate=this.skipNextUpdate===false&&this.noRenderProps.includes(propName)===false;this.skipNextUpdate=false;return shouldUpdate}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await interfaces.validateSeriesType([WebChartTypes$4.GaugeSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const dataSource=this.config?.dataSource;if(isValidDataSource(this.inlineData,dataSource)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push()}}catch(e){if(this.chartRef!==undefined&&this.config!==undefined){if(e.name===interfaces.ErrorKeywords.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(e?.message);if(e.name===interfaces.ErrorKeywords.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(e.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}else if(this.placeholder!==undefined){this.notify(this.placeholder)}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListeners();this.chart.dispose()}}render(){const notifyPanel=this.showNotifyPanel===true?interfaces.h(ArcgisChartsNotifyPanel,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const chartStyles=this.showNotifyPanel===true&&this.notifyOptions?.kind==="danger"?HTMLClasses.Hide:`${WebChartTypes$4.GaugeSeries} ${HTMLClasses.Show}`;const notifyStyles=this.showNotifyPanel===true?`${HTMLClasses.Show} ${HTMLClasses.NotifyPanel}`:HTMLClasses.Hide;return interfaces.h(interfaces.Host,null,interfaces.h("slot",{name:interfaces.Slot.actionBar}),interfaces.h("div",{class:chartStyles,ref:el=>{this.chartRef=el}}),interfaces.h("div",{class:notifyStyles},notifyPanel))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await addLayerFilterListener({layer:this.layer,component:this});this.layerRendererListener=await addLayerRendererListener({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListeners();this.extentChangeListeners=await addExtentChangeListener({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListeners(){if(this.extentChangeListeners!==undefined){this.extentChangeListeners.forEach((listener=>listener.remove()));this.extentChangeListeners=[]}}checkForIncompatibleChartVersion(){const chartVersion=this.config?.version;if(this.displayErrorAlert!==false&&interfaces.getChartVersionInfo(chartVersion).versionStatus===WebChartVersionStatus$1.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=interfaces.formatMessage(this.strings.incompatibleChartVersion.message,{chartVersion:chartVersion??""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(firstCreation=true){await interfaces.validateSeriesType([WebChartTypes$4.GaugeSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const dataSource=this.config?.dataSource;if(isValidDataSource(this.inlineData,dataSource)){this.chartCreationProcessing=createChart({chartContainer:this.chartRef,chartConfig:this.config,options:gatherComponentOptions({component:this}),globalOptions:gatherComponentGlobalOptions(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(firstCreation===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(e){if(e.name===interfaces.ErrorKeywords.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(e.details)}this.errorAlert(e?.message);this.chart?.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}updateFeatureIndex(newFeatureIndex,config){let updatedConfig;if(config!==undefined){updatedConfig={...config};if(updatedConfig?.series!==undefined)updatedConfig.series[0].featureIndex=newFeatureIndex}return updatedConfig}static get assetsDirs(){return["t9n"]}get el(){return this}static get watchers(){return{view:["viewChange"],layer:["layerChange"],inlineData:["inlineDataChange"],runtimeDataFilters:["runtimeDataFiltersChange"],featureIndex:["featureIndexChange"]}}static get style(){return arcgisChartsGaugeCss}},[1,"arcgis-charts-gauge",{config:[16],inlineData:[16],view:[16],layer:[16],queueChartCreation:[516,"queue-chart-creation"],useAnimatedCharts:[516,"use-animated-charts"],hideLicenceWatermark:[516,"hide-licence-watermark"],enableResponsiveFeatures:[516,"enable-responsive-features"],autoDisposeChart:[516,"auto-dispose-chart"],featureIndex:[2,"feature-index"],placeholder:[1],chartLimits:[16],axisLabelFormatter:[16],gaugeInnerLabelFormatter:[16],noDataOptions:[16],displayErrorAlert:[4,"display-error-alert"],hideLoaderAnimation:[4,"hide-loader-animation"],runtimeDataFilters:[16],chartWillRender:[16],usePopupTemplateFieldsInfo:[4,"use-popup-template-fields-info"],refreshOnLayerFilterChange:[4,"refresh-on-layer-filter-change"],showNotifyPanel:[32],notify:[64],errorAlert:[64],refresh:[64]},[[0,"arcgisChartsJSDataProcessComplete","handleChartOutputDataChange"],[0,"arcgisChartsJSUpdateComplete","handleUpdateCompleted"],[0,"calciteAlertClose","handleAlertClosed"]],{view:["viewChange"],layer:["layerChange"],inlineData:["inlineDataChange"],runtimeDataFilters:["runtimeDataFiltersChange"],featureIndex:["featureIndexChange"]}]);function defineCustomElement$1(){if(typeof customElements==="undefined"){return}const components=["arcgis-charts-gauge"];components.forEach((tagName=>{switch(tagName){case"arcgis-charts-gauge":if(!customElements.get(tagName)){customElements.define(tagName,ArcGISChartsGauge)}break}}))}defineCustomElement$1();const arcgisChartsPieChartCss='.hide{display:none}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.pieSeries{flex-grow:1;overflow-y:hidden}.pieSeries>div{justify-content:center;align-items:center}.pieSeries .arcgis-charts-modal-inside{padding:1em;padding-left:0}.pieSeries .arcgis-charts-modal-inside ol{padding-left:2em}.pieSeries .arcgis-charts-modal-curtain{width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:2001;background-color:white;opacity:0.5;opacity:1}.pieSeries .arcgis-charts-modal-content{background:rgba(255, 255, 255, 0.8);color:black;display:inline-block;position:absolute;top:0px;left:0px;max-width:90%;max-height:90%;overflow:auto;z-index:2002;position:absolute;max-width:90%;max-height:90%;width:auto !important;height:auto !important;margin:auto !important;inset:auto !important;left:auto !important;top:auto !important}.pieSeries .arcgis-charts-modal-header{display:block;width:100%;min-height:1.8em;background:rgba(0, 0, 0, 0.05)}.pieSeries .arcgis-charts-modal-close{display:block;position:absolute;top:0.3em;right:0.3em;background:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=") center center/80% no-repeat rgba(100, 100, 100, 0.1);width:1.2em;height:1.2em;cursor:pointer}.pieSeries .arcgis-charts-modal-title{font-weight:bold;font-size:110%;padding:0.5em 1.2em 0.5em 1em}:host{width:var(--arcgis-charts-pie-chart-width, var(--arcgis-charts-default-width));height:var(--arcgis-charts-pie-chart-height, var(--arcgis-charts-default-height));display:flex;flex-direction:row;overflow-y:hidden}';const ArcGISChartsPieChart=interfaces.proxyCustomElement(class ArcGISChartsPieChart extends interfaces.H{constructor(){super();this.__registerHost();this.__attachShadow();this.arcgisChartsDataProcessError=interfaces.createEvent(this,"arcgisChartsDataProcessError",7);this.arcgisChartsDataProcessComplete=interfaces.createEvent(this,"arcgisChartsDataProcessComplete",7);this.arcgisChartsDataFetchComplete=interfaces.createEvent(this,"arcgisChartsDataFetchComplete",7);this.arcgisChartsLegendItemVisibilityChange=interfaces.createEvent(this,"arcgisChartsLegendItemVisibilityChange",7);this.arcgisChartsUpdateComplete=interfaces.createEvent(this,"arcgisChartsUpdateComplete",7);this.arcgisChartsSeriesColorChange=interfaces.createEvent(this,"arcgisChartsSeriesColorChange",7);this.arcgisChartsSelectionComplete=interfaces.createEvent(this,"arcgisChartsSelectionComplete",7);this.skipNextUpdate=false;this.noRenderProps=["disableInteractions","legendPosition","legendVisibility","view"];this.dataUpdateNeededProps=["forceDataUpdate","runtimeDataFilters","inlineData","returnFeaturesExtent"];this.updatedProps=new Set;this.config=undefined;this.inlineData=undefined;this.actionMode=undefined;this.legendPosition=undefined;this.legendVisibility=undefined;this.view=undefined;this.layer=undefined;this.selectionData=undefined;this.returnSelectionOIDs=undefined;this.returnSelectionIndexes=undefined;this.returnFeaturesExtent=undefined;this.filterBySelection=undefined;this.disableInteractions=undefined;this.queueChartCreation=undefined;this.useAnimatedCharts=undefined;this.hideLicenceWatermark=undefined;this.enableResponsiveFeatures=undefined;this.autoDisposeChart=undefined;this.placeholder=undefined;this.tooltipFormatter=undefined;this.dataLabelFormatter=undefined;this.legendValueLabelFormatter=undefined;this.selectionTheme=undefined;this.chartLimits=undefined;this.noDataOptions=undefined;this.displayErrorAlert=true;this.disableTogglingLegendItems=undefined;this.hideLoaderAnimation=undefined;this.runtimeDataFilters=undefined;this.chartWillRender=undefined;this.usePopupTemplateFieldsInfo=undefined;this.refreshOnLayerFilterChange=true;this.showNotifyPanel=false}handleChartOutputDataChange(event){this.arcgisChartsDataProcessComplete.emit(event.detail)}handleDataFetched(event){this.arcgisChartsDataFetchComplete.emit(event.detail)}handleLegendItemVisibilityChanged(event){this.arcgisChartsLegendItemVisibilityChange.emit(event.detail)}handleUpdateCompleted(event){this.arcgisChartsUpdateComplete.emit(event.detail)}handleSeriesColorsChange(event){this.arcgisChartsSeriesColorChange.emit(event.detail)}handleSelection(event){this.arcgisChartsSelectionComplete.emit(event.detail)}handleAlertClosed(event){if(event.target===this.el){this.skipNextUpdate=true;this.showNotifyPanel=false}}async viewChange(newView,oldView){await this.addExtentChangeListener();if(oldView!==undefined&&newView===undefined){await this.refresh()}}async layerChange(){await this.addLayerListeners()}async inlineDataChange(){this.updatedProps.add("inlineData")}async runtimeDataFiltersChange(){this.updatedProps.add("runtimeDataFilters")}async returnFeaturesExtentChange(){this.updatedProps.add("returnFeaturesExtent")}async disableInteractionsChange(newValue){if(navigator.userAgent.search("Firefox")!==-1){if(newValue===true)this.chartRef?.classList.add(HTMLClasses.DisableInteractions);else this.chartRef?.classList.remove(HTMLClasses.DisableInteractions)}}legendPositionChange(newLegendPosition){this.config=updateLegendPosition(newLegendPosition,this.config)}legendVisibilityChange(newLegendVisibility){this.config=updateLegendVisibility(newLegendVisibility,this.config)}async notify(message,heading,options){if(this.chart!==undefined){this.chart.notify(message,heading,options)}return Promise.resolve(undefined)}async errorAlert(errorMessage){if(this.displayErrorAlert!==false){this.notifyHeading=this.strings.errorHeading;this.notifyMessage=errorMessage;this.notifyOptions={kind:"danger",autoClose:true,active:true};this.showNotifyPanel=true}}async switchSelection(){if(this.chart!==undefined&&this.filterBySelection!==true)await this.chart.switchSelection()}async clearSelection(){if(this.chart!==undefined){this.chart.clearSelection();if(this.filterBySelection===true){await this.refresh()}}}async refresh(props){const{updateData=true,updateExtent=false}=props??{};this.viewExtentUpdated=updateExtent;if(updateData===true)this.dataUpdateIsNeeded();await this.componentDidUpdate();this.viewExtentUpdated=false}componentShouldUpdate(...args){const[,,propName]=args;this.updatedProps.add(propName);const shouldUpdate=this.skipNextUpdate===false&&this.noRenderProps.includes(propName)===false;this.skipNextUpdate=false;return shouldUpdate}async componentWillLoad(){({strings:this.strings}=await interfaces.fetchComponentLocaleStrings(this.el,interfaces.getAssetPath(`.`)));this.debouncedChartUpdate=promise((async()=>{if(this.chart!==undefined){const updatedProps=Array.from(this.updatedProps);if(updatedProps.length>0){const dataUpdateNeeded=updatedProps.some((updatedProp=>this.dataUpdateNeededProps.includes(updatedProp)));this.updatedProps.clear();return await this.chart.update({newChartConfig:this.config,updateOptions:gatherComponentOptions({component:this,dataUpdated:dataUpdateNeeded,viewExtentUpdated:this.viewExtentUpdated}),updateGlobalOptions:gatherComponentGlobalOptions(this)})}else{return Promise.resolve(undefined)}}}),maximumNumberOfSimultaneousUpdates)}async componentDidLoad(){if(this.chartRef!==undefined){await this.createChartInstance()}}async componentDidUpdate(){if(this.chart===undefined&&this.chartCreationProcessing!==undefined){await this.chartCreationProcessing;this.chartCreationProcessing=undefined}await interfaces.validateSeriesType([WebChartTypes$4.PieSeries],this.config);if(this.config!==undefined&&this.chart!==undefined&&this.showNotifyPanel===false){try{const dataSource=this.config?.dataSource;if(isValidDataSource(this.inlineData,dataSource)&&this.debouncedChartUpdate!==undefined){await this.debouncedChartUpdate.push()}}catch(e){if(this.chartRef!==undefined&&this.config!==undefined){if(e.name===interfaces.ErrorKeywords.ChartDisposed){this.chart.dispose();this.chart=undefined;this.chartRef.innerHTML="";await this.createChartInstance(false)}else{this.errorAlert(e?.message);if(e.name===interfaces.ErrorKeywords.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(e.details)}}}}}else if(this.chart===undefined&&this.chartCreationProcessing===undefined&&this.showNotifyPanel===false){await this.createChartInstance()}else if(this.placeholder!==undefined){this.notify(this.placeholder)}}async disconnectedCallback(){if(this.chart!==undefined){this.removeLayerListeners();this.removeExtentChangeListeners();this.chart.dispose()}}render(){const notifyPanel=this.showNotifyPanel===true?interfaces.h(ArcgisChartsNotifyPanel,{heading:this.notifyHeading,message:this.notifyMessage,options:this.notifyOptions}):null;const chartStyles=this.showNotifyPanel===true&&this.notifyOptions?.kind==="danger"?HTMLClasses.Hide:`${WebChartTypes$4.PieSeries} ${HTMLClasses.Show}`;const notifyStyles=this.showNotifyPanel===true?`${HTMLClasses.Show} ${HTMLClasses.NotifyPanel}`:HTMLClasses.Hide;return interfaces.h(interfaces.Host,null,interfaces.h("slot",{name:interfaces.Slot.actionBar}),interfaces.h("div",{class:chartStyles,ref:el=>{this.chartRef=el}}),interfaces.h("div",{class:notifyStyles},notifyPanel))}dataUpdateIsNeeded(){this.updatedProps.add("forceDataUpdate")}async addLayerListeners(){this.removeLayerListeners();this.layerFilterListener=await addLayerFilterListener({layer:this.layer,component:this});this.layerRendererListener=await addLayerRendererListener({layer:this.layer,component:this})}async addExtentChangeListener(){this.removeExtentChangeListeners();this.extentChangeListeners=await addExtentChangeListener({view:this.view,layer:this.layer,component:this})}removeLayerListeners(){if(this.layerFilterListener!==undefined)this.layerFilterListener.remove();if(this.layerRendererListener!==undefined)this.layerRendererListener.remove()}removeExtentChangeListeners(){if(this.extentChangeListeners!==undefined){this.extentChangeListeners.forEach((listener=>listener.remove()));this.extentChangeListeners=[]}}checkForIncompatibleChartVersion(){const chartVersion=this.config?.version;if(this.displayErrorAlert!==false&&interfaces.getChartVersionInfo(chartVersion).versionStatus===WebChartVersionStatus$1.Newer){this.notifyHeading=this.strings.incompatibleChartVersion.title;this.notifyMessage=interfaces.formatMessage(this.strings.incompatibleChartVersion.message,{chartVersion:chartVersion??""});this.notifyOptions={kind:"warning",autoClose:true,active:true};this.showNotifyPanel=true}}async createChartInstance(firstCreation=true){await interfaces.validateSeriesType([WebChartTypes$4.PieSeries],this.config);this.checkForIncompatibleChartVersion();this.updatedProps.clear();try{const dataSource=this.config?.dataSource;if(isValidDataSource(this.inlineData,dataSource)){this.chartCreationProcessing=createChart({chartContainer:this.chartRef,chartConfig:this.config,options:gatherComponentOptions({component:this}),globalOptions:gatherComponentGlobalOptions(this)})}this.chart=await this.chartCreationProcessing;this.chartCreationProcessing=undefined;if(firstCreation===true){await this.addLayerListeners();await this.addExtentChangeListener()}}catch(e){if(e.name===interfaces.ErrorKeywords.QueryFeaturesError){this.arcgisChartsDataProcessError.emit(e.details)}this.errorAlert(e?.message);this.chart?.dispose();this.chartCreationProcessing=undefined;this.chart=undefined}}static get assetsDirs(){return["t9n"]}get el(){return this}static get watchers(){return{view:["viewChange"],layer:["layerChange"],inlineData:["inlineDataChange"],runtimeDataFilters:["runtimeDataFiltersChange"],returnFeaturesExtent:["returnFeaturesExtentChange"],disableInteractions:["disableInteractionsChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"]}}static get style(){return arcgisChartsPieChartCss}},[1,"arcgis-charts-pie-chart",{config:[1040],inlineData:[16],actionMode:[1,"action-mode"],legendPosition:[1,"legend-position"],legendVisibility:[4,"legend-visibility"],view:[16],layer:[16],selectionData:[16],returnSelectionOIDs:[4,"return-selection-o-i-ds"],returnSelectionIndexes:[4,"return-selection-indexes"],returnFeaturesExtent:[4,"return-features-extent"],filterBySelection:[4,"filter-by-selection"],disableInteractions:[516,"disable-interactions"],queueChartCreation:[516,"queue-chart-creation"],useAnimatedCharts:[516,"use-animated-charts"],hideLicenceWatermark:[516,"hide-licence-watermark"],enableResponsiveFeatures:[516,"enable-responsive-features"],autoDisposeChart:[516,"auto-dispose-chart"],placeholder:[1],tooltipFormatter:[16],dataLabelFormatter:[16],legendValueLabelFormatter:[16],selectionTheme:[16],chartLimits:[16],noDataOptions:[16],displayErrorAlert:[4,"display-error-alert"],disableTogglingLegendItems:[4,"disable-toggling-legend-items"],hideLoaderAnimation:[4,"hide-loader-animation"],runtimeDataFilters:[16],chartWillRender:[16],usePopupTemplateFieldsInfo:[4,"use-popup-template-fields-info"],refreshOnLayerFilterChange:[4,"refresh-on-layer-filter-change"],showNotifyPanel:[32],notify:[64],errorAlert:[64],switchSelection:[64],clearSelection:[64],refresh:[64]},[[0,"arcgisChartsJSDataProcessComplete","handleChartOutputDataChange"],[0,"arcgisChartsJSDataFetchComplete","handleDataFetched"],[0,"arcgisChartsJSLegendItemVisibilityChange","handleLegendItemVisibilityChanged"],[0,"arcgisChartsJSUpdateComplete","handleUpdateCompleted"],[0,"arcgisChartsJSSeriesColorChange","handleSeriesColorsChange"],[0,"arcgisChartsJSSelectionComplete","handleSelection"],[0,"calciteAlertClose","handleAlertClosed"]],{view:["viewChange"],layer:["layerChange"],inlineData:["inlineDataChange"],runtimeDataFilters:["runtimeDataFiltersChange"],returnFeaturesExtent:["returnFeaturesExtentChange"],disableInteractions:["disableInteractionsChange"],legendPosition:["legendPositionChange"],legendVisibility:["legendVisibilityChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["arcgis-charts-pie-chart"];components.forEach((tagName=>{switch(tagName){case"arcgis-charts-pie-chart":if(!customElements.get(tagName)){customElements.define(tagName,ArcGISChartsPieChart)}break}}))}defineCustomElement();function updateLegendPosition(newLegendPosition,config){let updatedConfig;if(config!==undefined){updatedConfig={...config};if(updatedConfig.legend!==undefined)updatedConfig.legend.position=newLegendPosition}return updatedConfig}function updateLegendVisibility(visible,config){let updatedConfig;if(config!==undefined){updatedConfig={...config};if(updatedConfig.legend!==undefined)updatedConfig.legend.visible=visible}return updatedConfig}function resetAxesBounds(config){let updatedConfig;if(config!==undefined){updatedConfig={...config};delete updatedConfig.axes?.[0]?.minimum;delete updatedConfig.axes?.[0]?.maximum;delete updatedConfig.axes?.[1]?.minimum;delete updatedConfig.axes?.[1]?.maximum}return updatedConfig}function gatherComponentGlobalOptions(component){return{queueChartCreation:component.queueChartCreation,useAnimatedCharts:component.useAnimatedCharts,hideLicenceWatermark:component.hideLicenceWatermark,enableResponsiveFeatures:component.enableResponsiveFeatures,autoDisposeChart:component.autoDisposeChart}}function addOptionalChartOptions(props){const{chartOptions,propertyNames,component}=props;let updatedChartOptions=chartOptions;propertyNames.forEach((propertyName=>{if(propertyName in component){updatedChartOptions={...updatedChartOptions,[propertyName]:component[propertyName]}}}));return updatedChartOptions}function gatherComponentOptions(props){const{component,dataUpdated,viewExtentUpdated}=props;let chartOptions={layer:component.layer,view:component.view,createMessage:component.placeholder,inlineData:component.inlineData,hideLoaderAnimation:component.hideLoaderAnimation,runtimeDataFilters:component.runtimeDataFilters,noDataOptions:component.noDataOptions,dataUpdated,viewExtentUpdated,usePopupTemplateFieldsInfo:component.usePopupTemplateFieldsInfo};const additionalProperties=["chartLimits","guideTooltipFormatter","xAxisLabelFormatter","yAxisLabelFormatter","tooltipFormatter","dataLabelFormatter","selectionData","filterBySelection","actionMode","cursorRange","selectionTheme","gaugeInnerLabelFormatter","setTimeBinningInfoWhenNotProvided","ignoreSmoothRenderingLimit","returnSelectionOIDs","returnSelectionIndexes","returnFeaturesExtent","disableTogglingLegendItems","hideEmptySeriesInLegend"];chartOptions=addOptionalChartOptions({chartOptions,component,propertyNames:additionalProperties});if(component instanceof ArcGISChartsGauge){chartOptions={...chartOptions,chartWillRender:component.chartWillRender,xAxisLabelFormatter:component.axisLabelFormatter}}else if(component instanceof ArcGISChartsPieChart){chartOptions={...chartOptions,chartWillRender:component.chartWillRender,pieChartLegendValueLabelFormatter:component.legendValueLabelFormatter}}return chartOptions}function isValidDataSource(inlineData,dataSource){const validDataSource=dataSource===undefined||dataSource?.type===WebChartDataSourceTypes$3.Layer||inlineData?.inputData!==undefined&&inlineData?.processed!==undefined||dataSource?.data!==undefined&&dataSource?.processed!==undefined;return validDataSource}exports.ArcGISChartsGauge=ArcGISChartsGauge;exports.ArcGISChartsPieChart=ArcGISChartsPieChart;exports.ArcgisChartsNotifyPanel=ArcgisChartsNotifyPanel;exports.HTMLClasses=HTMLClasses;exports.WebChartTypes$4=WebChartTypes$4;exports.WebChartVersionStatus$1=WebChartVersionStatus$1;exports.addExtentChangeListener=addExtentChangeListener;exports.addLayerFilterListener=addLayerFilterListener;exports.addLayerRendererListener=addLayerRendererListener;exports.createChart=createChart;exports.defineCustomElement=defineCustomElement;exports.defineCustomElement$1=defineCustomElement$1;exports.gatherComponentGlobalOptions=gatherComponentGlobalOptions;exports.gatherComponentOptions=gatherComponentOptions;exports.isValidDataSource=isValidDataSource;exports.maximumNumberOfSimultaneousUpdates=maximumNumberOfSimultaneousUpdates;exports.promise=promise;exports.resetAxesBounds=resetAxesBounds;exports.updateLegendPosition=updateLegendPosition;exports.updateLegendVisibility=updateLegendVisibility}));
