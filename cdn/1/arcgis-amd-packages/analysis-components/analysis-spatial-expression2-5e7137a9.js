define(["exports","./index-ef555910","./index2-588b02d9","./t9n-24f5c39b","./expressions-18db914f"],(function(exports,index,index2,t9n,expressions){"use strict";const HTMLClasses={flexContainer:"flex-container",flexGrow:"flex-grow",layerSelect:"layer-select"};const analysisSpatialExpressionCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.flex-container{display:flex}.flex-container .flex-grow{flex-grow:1}";const AnalysisSpatialExpression=index.proxyCustomElement(class AnalysisSpatialExpression extends index.H{constructor(){super();this.__registerHost();this.analysisExpressionChange=index.createEvent(this,"analysisExpressionChange",7);this.spatialRelationships=Object.values(expressions.SpatialRelationships);this.spatialRelationshipUnits=expressions.SpatialRelationshipUnits;this.onSpatialRelationshipSelect=event=>{const newSpatialRelationship=event.target.selectedOption.value;this.spatialExpression=this.spatialExpression.changeSpatialRelationship(newSpatialRelationship);const currentSelectingLayer=this.spatialExpression.selectingLayer;const validSelectingLayers=this.spatialRelationshipLayers.get(newSpatialRelationship);const selectedLayer=validSelectingLayers.find((layer=>layer.id===currentSelectingLayer.id));if(selectedLayer!==undefined){this.spatialExpression=this.spatialExpression.changeSelectingLayer(selectedLayer)}else{this.spatialExpression=this.spatialExpression.changeSelectingLayer(validSelectingLayers[0])}this.analysisExpressionChange.emit()};this.onSpatialRelationshipUnitsSelect=event=>{const newUnit=event.target.selectedOption.value;this.spatialExpression=this.spatialExpression.changeSpatialRelationshipUnit(newUnit);this.analysisExpressionChange.emit()};this.onDistanceInputChange=event=>{const newDistance=parseFloat(event.target.value);this.spatialExpression=this.spatialExpression.changeSpatialRelationshipDistance(newDistance);this.analysisExpressionChange.emit()};this.onLayerSelectChange=event=>{const newselectingLayerUrlId=event.target.value;const selectedLayer=this.layers?.find((layer=>layer.id===newselectingLayerUrlId));if(this.layers!==undefined&&selectedLayer!==undefined){this.spatialExpression=this.spatialExpression.changeSelectingLayer(selectedLayer)}this.analysisExpressionChange.emit()};this.spatialExpression=undefined;this.layers=undefined}setLayersToSpatialRelationships(newLayers){if(newLayers!==undefined){this.spatialRelationshipLayers=expressions.SpatialExpression.getValidLayersForRelationships(this.spatialExpression.layer,newLayers,this.spatialRelationships)}}componentWillLoad(){this.strings=t9n.getStrings();this.setLayersToSpatialRelationships(this.layers);this.spatialRelationshipLayers=expressions.SpatialExpression.getValidLayersForRelationships(this.spatialExpression.layer,this.layers??[],this.spatialRelationships)}render(){return index.h(index.Host,null,this.renderSpatialRelationshipSelect(),this.renderLayerSelect())}renderSpatialRelationshipSelect(width="auto"){const currentSpatialRelationship=this.spatialExpression.spatialRelationship;return index.h("div",{class:HTMLClasses.flexContainer},index.h("calcite-select",{class:HTMLClasses.flexGrow,label:this.strings.spatialRelationshipSelect,width,onCalciteSelectChange:this.onSpatialRelationshipSelect},this.spatialRelationships.map((relationship=>index.h("calcite-option",{selected:currentSpatialRelationship===relationship,value:relationship,key:relationship,disabled:index2.isEmptyDataItem(this.spatialRelationshipLayers.get(relationship))},index2.isEmptyDataItem(this.spatialRelationshipLayers.get(relationship))?index2.formatMessage(this.strings.spatialRelationships[relationship],{noCompatibleLayers:this.strings.noCompatibleLayers}):index2.formatMessage(this.strings.spatialRelationships[relationship],{noCompatibleLayers:""}))))),this.spatialExpression.isDistanceRelationship&&this.renderSpatialRelationshipParams())}renderSpatialRelationshipParams(width="auto"){const currentUnit=this.spatialExpression.spatialRelationshipParams?.units;const currentDistance=this.spatialExpression.spatialRelationshipParams?.distance;return index.h("div",{class:HTMLClasses.flexContainer},index.h("calcite-input-number",{class:HTMLClasses.flexGrow,step:1,placeholder:this.strings.inputPlaceholderText,value:currentDistance===undefined?"":`${currentDistance}`,onCalciteInputNumberChange:this.onDistanceInputChange}),index.h("calcite-select",{class:HTMLClasses.flexGrow,label:this.strings.spatialRelationshipParamsDistanceInput,width,onCalciteSelectChange:this.onSpatialRelationshipUnitsSelect},this.spatialRelationshipUnits.map((unit=>index.h("calcite-option",{selected:currentUnit===unit,value:unit,key:unit},this.strings.spatialRelationshipUnits[unit])))))}renderLayerSelect(width="auto"){const layers=this.spatialRelationshipLayers.get(this.spatialExpression.spatialRelationship);const currentSelectingLayer=this.spatialExpression.selectingLayer;return index.h("calcite-select",{class:HTMLClasses.layerSelect,label:this.strings.spatialRelationshipLayerSelect,width,onCalciteSelectChange:this.onLayerSelectChange},layers?.map((layer=>index.h("calcite-option",{value:layer.id,key:layer.id,selected:currentSelectingLayer?.id===layer.id},index2.getLayerLabel(layer)))))}get hostElement(){return this}static get watchers(){return{layers:["setLayersToSpatialRelationships"]}}static get style(){return analysisSpatialExpressionCss}},[0,"analysis-spatial-expression",{spatialExpression:[1040],layers:[16]},undefined,{layers:["setLayersToSpatialRelationships"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-spatial-expression"];components.forEach((tagName=>{switch(tagName){case"analysis-spatial-expression":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisSpatialExpression)}break}}))}defineCustomElement();exports.AnalysisSpatialExpression=AnalysisSpatialExpression;exports.defineCustomElement=defineCustomElement}));
