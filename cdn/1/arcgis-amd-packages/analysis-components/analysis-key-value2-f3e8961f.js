define(["exports","./index-ef555910","./index2-588b02d9","./primitiveFactory-d8ce40e4","./analysis-attribute-expression2-a90d2a8c","./analysis-boolean-input2-096997f6","./analysis-chip-group2-097fb4b1","./analysis-data-file-input2-34f8bb3a","./analysis-dataset-input2-9534a23f","./analysis-dataset-input-popover2-b6dcb32a","./analysis-date-input2-1f634ecb","./analysis-expression-group2-ce4cdcfd","./analysis-field-input2-e1115e33","./analysis-field-select2-eb77dd22","./analysis-folder-input2-5bb22688","./analysis-geoenrichment-databrowser2-6a737015","./analysis-geoenrichment-input2-4eb9195c","./analysis-item-browser2-508c9cf3","./analysis-item-input2-3709ada5","./analysis-label2-f17c360a","./analysis-layer-input2-f52c4db0","./analysis-layer-input-popover2-13f7974d","./analysis-linear-unit-input2-62802ce9","./analysis-multiple-input2-31e7ea23","./analysis-number-input2-ee81e720","./analysis-query-builder2-59ad1897","./analysis-query-entry2-a97f8d18","./analysis-query-input2-4bacfecd","./analysis-query-modal2-5e925cce","./analysis-query-target-select2-1308b9a9","./analysis-spatial-expression2-5e7137a9","./analysis-spatial-reference-input2-68aa634b","./analysis-spatial-reference-selector2-197bdd55","./analysis-string-input2-61f7c630","./analysis-summary-fields2-732adae8","./analysis-summary-fields-popover2-3708aecb","./analysis-traffic-time-input2-944df8cc","./analysis-tree2-21de4d9f","./analysis-unsupported-input2-606583a1","./analysis-workflow-select2-60915450","./analysis-workflow-select-popover2-a6a5c39c","./get-4ace6219","./set-91d835d2","./_baseGet-9bd467fe","./isEqual-7dac7fee"],(function(e,a,s,t,n,i,l,r,o,u,m,c,p,y,d,f,h,g,b,v,E,k,C,I,q,w,_,x,V,z,P,H,A,U,$,M,K,L,D,R,j,S,G,N,T){"use strict";const F={Vertical:"vertical",Horizontal:"horizontal"};var W=c.flatRest((function(e,a){return null==e?{}:function(e,a){return function(e,a,s){for(var t=-1,n=a.length,i={};++t<n;){var l=a[t],r=N.baseGet(e,l);s(0,l)&&G.baseSet(i,N.castPath(l,e),r)}return i}(e,a,(function(a,s){return k.hasIn(e,s)}))}(e,a)}));const B="key-value",J={groupContainer:`${B}__group-container`,groupLabel:`${B}__group-label-text`,groupHorizontal:`${B}__horizontal-layout`,groupAction:`${B}__group-action`,groupActionHorizontal:`${B}__group-action-horizontal`};function O(e){return void 0!==e.name}const Q=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisKeyValueChange=a.createEvent(this,"analysisKeyValueChange",7),this.analysisHelpClick=a.createEvent(this,"analysisHelpClick",7),this.mappedElementMap=new Map,this.updateValue=(e,a)=>{const s=this.mappedElementMap.get(e),t=a;S.get(this.value,e)!==t&&(this.value={...this.value},G.set(this.value,e,t),void 0!==s&&(s.value=t,this.validateParameter(e)),this.analysisKeyValueChange.emit({path:e,value:this.value}))},this.parameterValueChanged=e=>{const a=this.mappedElementMap.get(e);void 0!==a&&(this.value={...this.value},G.set(this.value,e,a.value),this.validate()),this.analysisKeyValueChange.emit({path:e,value:this.value})},this.setAnalysisRef=(e,a)=>{null!=a?this.mappedElementMap.set(e,a):this.mappedElementMap.delete(e)},this.value=void 0,this.parameterInfos=void 0,this.UIparameterInfos=void 0,this.label=void 0,this.required=void 0,this.layout=void 0}parameterInfosChange(e,a){const t=[];this.combinedParameterInfos?.forEach((e=>{"object"==typeof e&&(t.push(e.name),void 0!==a||s.isEmptyDataItem(this.value)?this.updateValue(e.name,e.value):e.value=this.value[e.name]??e.value)})),this.value=W(this.value,t),this.analysisKeyValueChange.emit({path:"init",value:this.value})}UIparameterInfosChange(e,a){T.isEqual(e,a)||(s.isEmptyDataItem(this.value)&&(this.value={}),this.combinedParameterInfos?.forEach((e=>{if(void 0!==e.name&&"object"==typeof this.value)if(!1===e.visible)delete this.value[e.name];else{const a=this.value[e.name]??e.value??e.defaultValue;this.updateValue(e.name,a)}})))}get combinedParameterInfos(){let e=this.parameterInfos??[];return void 0!==this.UIparameterInfos&&(e=this.UIparameterInfos.filter(O).map((e=>{const a=this.parameterInfos?.find((a=>a.name===e.name));return{...a,...e}}))),e}componentWillLoad(){this.UIparameterInfosChange(this.UIparameterInfos),this.analysisKeyValueChange.emit({path:"init",value:this.value})}render(){return a.h(a.Host,null,a.h("analysis-label",{label:this.label,required:!1,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),this.renderParameters(this.combinedParameterInfos))}renderParameters(e,s,t){return e?.length>0&&a.h("div",null,void 0!==s?a.h("div",{class:J.groupLabel},t):null,a.h("div",{class:J.groupContainer},e?.map((e=>{const t=void 0!==s?`${s}[${e.name}]`:`${e.name}`,n=e.visible??!0;return e?.parameterInfos&&!e.dataType.includes("MultiValue")?this.renderParameters(e.parameterInfos,t,e.label??e.displayName??e.name):n&&a.h("div",{class:this.layout===F.Horizontal?J.groupHorizontal:""},a.h("analysis-label",{class:J.groupLabel,label:e.label??e.displayName??e.name,hideHelp:!0,required:!0===this.required||"required"in e&&!0===e.required}),a.h("div",{class:this.layout===F.Horizontal?J.groupActionHorizontal:J.groupAction},this.renderDefaultComponent(e,t)))}))))}renderDefaultComponent(e,s){const n=S.get(this.value,s);return a.h(t.AnalysisPrimitiveParameter,{key:s,required:this.required,...e,label:"",onValueChange:()=>this.parameterValueChanged(`${s}`),onSetRef:e=>this.setAnalysisRef(`${s}`,e),value:n})}async checkValidity(){return Promise.resolve(this.validate())}async validate(){const e=Array.from(this.mappedElementMap.keys()).map((async e=>this.validateParameter(e)));return(await Promise.all(e)).every((e=>!0===e))}async validateParameter(e){const a=this.mappedElementMap.get(e),s=this.combinedParameterInfos.find((a=>a.name===e))??{};let t=!0;if(void 0!==a)if("checkValidity"in a)t=await a.checkValidity();else{const e="required"in s&&s.required;t=!1==(!0===this.required||!0===e)||void 0!==a.value}return t}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{parameterInfos:["parameterInfosChange"],UIparameterInfos:["UIparameterInfosChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{height:100%;margin-bottom:var(--analysis-half-spacing)}.key-value__group-container{display:flex;flex-direction:column;border:1px var(--calcite-color-border-1) solid;border-radius:var(--calcite-border-radius);padding:var(--analysis-half-spacing) var(--analysis-half-spacing) 0 var(--analysis-half-spacing);margin-bottom:var(--analysis-half-spacing)}.key-value__group-label-text{margin-bottom:var(--analysis-quarter-spacing);align-self:center;width:48%;font-size:var(--calcite-font-size--2)}.key-value__group-action{align-self:flex-end;width:100%}.key-value__group-action-horizontal{align-self:flex-end;width:50%}.key-value__horizontal-layout{display:flex;width:var(--analysis-component-default-width);justify-content:space-between}"}},[1,"analysis-key-value",{value:[1040],parameterInfos:[16],UIparameterInfos:[16],label:[513],required:[516],layout:[1],checkValidity:[64]},void 0,{parameterInfos:["parameterInfosChange"],UIparameterInfos:["UIparameterInfosChange"]}]);function X(){"undefined"!=typeof customElements&&["analysis-key-value","analysis-attribute-expression","analysis-boolean-input","analysis-chip-group","analysis-data-file-input","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-item-browser","analysis-item-input","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-unsupported-input","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-key-value":customElements.get(e)||customElements.define(e,Q);break;case"analysis-attribute-expression":customElements.get(e)||n.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||i.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||l.defineCustomElement();break;case"analysis-data-file-input":customElements.get(e)||r.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||o.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||u.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||m.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||c.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||p.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||y.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||d.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||f.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||h.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||g.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||b.defineCustomElement();break;case"analysis-label":customElements.get(e)||v.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||E.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||k.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||C.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||I.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||q.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||w.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||_.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||x.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||V.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||z.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||P.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||H.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||A.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||U.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||$.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||M.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||K.defineCustomElement();break;case"analysis-tree":customElements.get(e)||L.defineCustomElement();break;case"analysis-unsupported-input":customElements.get(e)||D.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||R.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||j.defineCustomElement()}}))}X(),e.AnalysisKeyValue=Q,e.AnalysisToolUILayout=F,e.defineCustomElement=X,e.pick=W}));