define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4","./analysis-label2-f17c360a","./analysis-spatial-reference-selector2-197bdd55","./analysis-tree2-21de4d9f"],(function(exports,index,index2,utils,analysisLabel2,analysisSpatialReferenceSelector2,analysisTree2){"use strict";const HTMLClasses={selectButton:"select-button"};const analysisSpatialReferenceInputCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;flex-direction:column;width:var(--analysis-component-default-width)}.select-button{margin-bottom:var(--analysis-half-spacing)}";const AnalysisSpatialReferenceInput=index.proxyCustomElement(class AnalysisSpatialReferenceInput extends index.H{constructor(){super();this.__registerHost();this.analysisSpatialReferenceInputChange=index.createEvent(this,"analysisSpatialReferenceInputChange",7);this.analysisHelpClick=index.createEvent(this,"analysisHelpClick",7);this.createPopover=event=>{if(this.spatialReferencePopover){this.spatialReferencePopover.remove();this.spatialReferencePopover=undefined}this.spatialReferencePopover=document.createElement("calcite-popover");const popoverProps={autoClose:true,dir:this.dir,focusTrapDisabled:true,heading:this.strings.browseCoordinateSystems,closable:true,open:true,referenceElement:event.target};Object.assign(this.spatialReferencePopover,popoverProps);this.spatialReferencePopover.addEventListener("calcitePopoverClose",this.handleSpatialReferenceClose);const srSelector=document.createElement("analysis-spatial-reference-selector");srSelector.hideCategories=this.hideCategories;srSelector.value=this.value;srSelector.addEventListener("analysisSpatialReferenceValueChange",this.handleSpatialReferenceChange);srSelector.addEventListener("analysisSpatialReferenceSelectorDismissed",this.handleSpatialReferenceClose);this.spatialReferencePopover.append(srSelector);document.body.append(this.spatialReferencePopover);setTimeout((()=>requestAnimationFrame((()=>this.spatialReferencePopover?.setFocus()))),1)};this.validate=()=>{if(this.required&&this.value===undefined){this.errorMessage=index2.formatMessage(this.strings.isRequired,{label:this.label})}else{this.errorMessage=undefined}return this.errorMessage===undefined};this.handleSpatialReferenceChange=event=>{this.value={latestWkid:event.detail.latestWkid,wkid:event.detail.latestWkid};this.analysisSpatialReferenceInputChange.emit(this.value)};this.handleSpatialReferenceClose=()=>{this.spatialReferencePopover?.remove();this.spatialReferencePopover=undefined;this.validate()};this.label=undefined;this.required=false;this.hideCategories=undefined;this.value=undefined;this.errorMessage=undefined}onValueChange(){var _a,_b;if(this.value!==undefined){(_a=this.value).wkid??(_a.wkid=this.value.latestWkid);(_b=this.value).latestWkid??(_b.latestWkid=this.value.wkid)}this.validate()}async componentWillLoad(){var _a,_b;({strings:this.strings,dir:this.dir}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)));if(this.value!==undefined){(_a=this.value).wkid??(_a.wkid=this.value.latestWkid);(_b=this.value).latestWkid??(_b.latestWkid=this.value.wkid)}}disconnectedCallback(){this.spatialReferencePopover?.remove()}async checkValidity(){this.validate();const validity=this.errorMessage===undefined||this.errorMessage==="";return Promise.resolve(validity)}render(){const buttonText=index2.isEmptyDataItem(this.value)?this.strings.browseCoordinateSystems:index2.getSpatialReferenceDescription(this.value?.latestWkid)??this.strings.browseCoordinateSystems;return index.h(index.Host,null,this.label!==undefined&&this.label!==""?index.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,index.h("calcite-button",{width:"full",appearance:"outline",kind:"neutral","icon-end":"chevron-down",alignment:"icon-end-space-between",onClick:this.createPopover,class:HTMLClasses.selectButton,scale:utils.UIDefaults.Scale},buttonText),index.h("calcite-input-message",{status:"invalid",scale:utils.UIDefaults.Scale,hidden:this.errorMessage===undefined,icon:"exclamationMarkTriangle"},this.errorMessage))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["onValueChange"]}}static get style(){return analysisSpatialReferenceInputCss}},[0,"analysis-spatial-reference-input",{label:[513],required:[516],hideCategories:[16],value:[1040],errorMessage:[513,"error-message"],checkValidity:[64]},undefined,{value:["onValueChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-spatial-reference-input","analysis-label","analysis-spatial-reference-selector","analysis-tree"];components.forEach((tagName=>{switch(tagName){case"analysis-spatial-reference-input":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisSpatialReferenceInput)}break;case"analysis-label":if(!customElements.get(tagName)){analysisLabel2.defineCustomElement()}break;case"analysis-spatial-reference-selector":if(!customElements.get(tagName)){analysisSpatialReferenceSelector2.defineCustomElement()}break;case"analysis-tree":if(!customElements.get(tagName)){analysisTree2.defineCustomElement()}break}}))}defineCustomElement();exports.AnalysisSpatialReferenceInput=AnalysisSpatialReferenceInput;exports.defineCustomElement=defineCustomElement}));
