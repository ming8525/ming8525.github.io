define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4","./analysis-label2-f17c360a","./analysis-multiple-input2-31e7ea23"],(function(exports,index,index2,utils,analysisLabel2,analysisMultipleInput2){"use strict";const analysisNumberInputCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;width:var(--analysis-component-default-width);--calcite-color-border-input:var(--analysis-ui-border-input)}:host([hidden]){display:none}.label{width:var(--analysis-component-default-width)}";const AnalysisNumberInput=index.proxyCustomElement(class AnalysisNumberInput extends index.H{constructor(){super();this.__registerHost();this.__attachShadow();this.analysisNumberInputChange=index.createEvent(this,"analysisNumberInputChange",7);this.analysisHelpClick=index.createEvent(this,"analysisHelpClick",7);this.renderSingleInput=()=>this.choiceList===undefined?this.renderInput():this.renderCombobox();this.renderInput=()=>index.h("calcite-input",{type:"number",value:index2.sanitizeNumber(this.value),placeholder:this.placeholderText??this.strings.inputPlaceholderText,step:this.isFloatType?"any":1,readOnly:this.readOnly,required:this.required||undefined,min:this.min,max:this.max,scale:this.scale??utils.UIDefaults.Scale,groupSeparator:true,onCalciteInputInput:this.inputChanged});this.renderCombobox=()=>{const comboBoxItems=this.choiceList?.map((choice=>this.buildComboBoxItem(index2.sanitizeNumber(choice),choice===this.value)));return index.h("calcite-combobox",{scale:this.scale??utils.UIDefaults.Scale,label:this.label??this.strings.comboboxLabel,selectionMode:"single",placeholder:this.placeholderText??this.strings.comboboxMultiPlaceholderText,clearDisabled:true},comboBoxItems)};this.buildComboBoxItem=(choice,selected)=>index.h("calcite-combobox-item",{key:choice,value:choice,textLabel:choice,selected,onCalciteComboboxItemChange:this.comboboxItemChanged});this.renderAnalysisMultiInput=()=>{const valueAsStrings=this.value?.map((value=>index2.sanitizeNumber(value)));const choiceListAsStrings=this.choiceList?.map((choice=>index2.sanitizeNumber(choice)));const{isFloatType,min,max,excludeMinValue,excludeMaxValue,minValues,maxValues}=this;const validationOptions={isFloatType,min,max,excludeMinValue,excludeMaxValue,minValues,maxValues};return index.h("analysis-multiple-input",{dataType:"number",value:valueAsStrings,choiceList:choiceListAsStrings,placeholderText:this.placeholderText,required:this.required,validationOptions,validationParams:this.validationParams,ref:input=>{this.multiInputElement=input},onAnalysisMultipleInputChange:event=>{this.value=event.detail.map((value=>index2.parseNumber(value)));this.analysisNumberInputChange.emit()}})};this.inputChanged=event=>{if(event.target!==null){const newValueString=event?.target.value;this.value=index2.parseNumber(newValueString);this.analysisNumberInputChange.emit();this.validate()}};this.comboboxItemChanged=event=>{if(this.isMultiSelect)return;const comboboxItemEl=event.target;const newValueString=comboboxItemEl?.value;const newValue=index2.parseNumber(newValueString);if(this.value===newValue||!comboboxItemEl?.selected){return}this.value=newValue;this.analysisNumberInputChange.emit();this.validate()};this.errorMessage=undefined;this.value=undefined;this.scale=undefined;this.label=undefined;this.numberType=undefined;this.selectionMode=undefined;this.readOnly=false;this.choiceList=undefined;this.required=undefined;this.validationParams=undefined;this.min=undefined;this.excludeMinValue=undefined;this.max=undefined;this.maxValues=undefined;this.minValues=undefined;this.excludeMaxValue=undefined;this.placeholderText=undefined;this.maxOfValues=undefined}onValueChange(){this.maxOfValues=Array.isArray(this.value)?Math.max(...this.value):this.value}onRequiredChange(){this.validate()}async onValidationChange(){if(this.multiInputElement!==undefined){this.multiInputElement.validationOptions=this.formatValidationOptions()}this.errorMessage=undefined;if(index2.isEmptyDataItem(this.value)===false){await this.validate()}}async componentWillLoad(){({strings:this.strings}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)));if(!index2.isEmptyDataItem(this.value)){this.onValueChange()}}get isFloatType(){return typeof this.numberType==="undefined"||this.numberType==="float"}get isMultiSelect(){return this.selectionMode==="multi"}get formatOptions(){return{min:`${this.min??Number.MIN_SAFE_INTEGER}`,max:`${this.max??Number.MAX_SAFE_INTEGER}`}}render(){const hasError=this.errorMessage!==undefined;const validationParamsMessage=index2.formatValidationParamsMessage(this.validationParams);const showInputMessage=index2.isEmptyDataItem(validationParamsMessage)===false||hasError===true;const uiInputStatus=hasError?index2.UIInputStatus.INVALID:index2.getUIInputStatusFromMessageType(this.validationParams?.type);return index.h(index.Host,null,index.h("calcite-label",{class:"label",scale:this.scale??utils.UIDefaults.Scale},this.label!==""?index.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,!this.isMultiSelect?this.renderSingleInput():this.renderAnalysisMultiInput(),index.h("calcite-input-message",{status:uiInputStatus,scale:utils.UIDefaults.Scale,hidden:!showInputMessage||this.isMultiSelect,icon:"exclamationMarkTriangle"},this.errorMessage??validationParamsMessage)))}async checkValidity(){await this.validate();const validity=this.errorMessage===undefined||this.errorMessage==="";return Promise.resolve(validity)}async validate(){if(!this.isMultiSelect){const value=this.value;const errorKey=utils.validateNumber(value,this.formatValidationOptions());const newError=errorKey!==undefined?index2.formatMessage(this.strings[errorKey],this.formatOptions):undefined;this.errorMessage=newError}else{if(this.multiInputElement!==undefined)this.multiInputElement.errorMessage=undefined;await(this.multiInputElement?.checkValidity());this.errorMessage=this.multiInputElement?.errorMessage}}formatValidationOptions(){return{required:this.required,isFloatType:this.isFloatType,excludeMaxValue:this.excludeMaxValue,excludeMinValue:this.excludeMinValue,max:this.max??Number.MAX_SAFE_INTEGER,min:this.min??Number.MIN_SAFE_INTEGER}}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["onValueChange"],required:["onRequiredChange"],min:["onValidationChange"],max:["onValidationChange"],excludeMaxValue:["onValidationChange"],excludeMinValue:["onValidationChange"],numberType:["onValidationChange"]}}static get style(){return analysisNumberInputCss}},[1,"analysis-number-input",{value:[1026],scale:[513],label:[513],numberType:[513,"number-type"],selectionMode:[513,"selection-mode"],readOnly:[516,"read-only"],choiceList:[16],required:[516],validationParams:[16],min:[514],excludeMinValue:[516,"exclude-min-value"],max:[514],maxValues:[514,"max-values"],minValues:[514,"min-values"],excludeMaxValue:[516,"exclude-max-value"],placeholderText:[513,"placeholder-text"],maxOfValues:[2,"max-of-values"],errorMessage:[32],checkValidity:[64]},undefined,{value:["onValueChange"],required:["onRequiredChange"],min:["onValidationChange"],max:["onValidationChange"],excludeMaxValue:["onValidationChange"],excludeMinValue:["onValidationChange"],numberType:["onValidationChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-number-input","analysis-label","analysis-multiple-input"];components.forEach((tagName=>{switch(tagName){case"analysis-number-input":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisNumberInput)}break;case"analysis-label":if(!customElements.get(tagName)){analysisLabel2.defineCustomElement()}break;case"analysis-multiple-input":if(!customElements.get(tagName)){analysisMultipleInput2.defineCustomElement()}break}}))}defineCustomElement();exports.AnalysisNumberInput=AnalysisNumberInput;exports.defineCustomElement=defineCustomElement}));
