define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4","./analysis-label2-f17c360a"],(function(exports,index,index2,utils,analysisLabel2){"use strict";const HTMLClasses={fieldMultiSelectButtonSpaced:"field-multi-select-btn-spaced",multiSelectContainer:"multi-select-container",errorMessage:"error-message",labelTextSmall:"text-s",labelTextMedium:"text-m",singleListItem:"single-list-item"};const analysisFieldSelectCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{width:var(--analysis-component-default-width);font-size:var(--analysis-label-font-size)}.error-message{margin-top:var(--analysis-quarter-spacing)}.field-multi-select-btn-spaced{margin-top:var(--analysis-half-spacing)}.single-list-item{border:1px solid var(--analysis-ui-border-input)}#single-select-field-btn{border:1px solid var(--analysis-ui-border-input)}.multi-select-container{display:flex;flex-direction:column;gap:var(--analysis-quarter-spacing);width:100%;margin-bottom:var(--analysis-half-spacing)}.text-s{margin-block-start:0;margin-block-end:0;color:var(--calcite-color-text-1);font-size:var(--calcite-font-size--2);line-height:1rem}.text-m{margin-block-start:0;margin-block-end:0;color:var(--calcite-color-text-1);font-size:var(--calcite-font-size--1);line-height:1rem}";const AnalysisFieldSelect=index.proxyCustomElement(class AnalysisFieldSelect extends index.H{constructor(){super();this.__registerHost();this.__attachShadow();this.analysisSelectFieldClick=index.createEvent(this,"analysisSelectFieldClick",7);this.analysisFieldRemove=index.createEvent(this,"analysisFieldRemove",7);this.analysisHelpClick=index.createEvent(this,"analysisHelpClick",7);this.renderErrorMessage=()=>{const hasError=index2.isEmptyDataItem(this.errorMessage)===false;return index.h("calcite-input-message",{class:HTMLClasses.errorMessage,icon:"exclamationMarkTriangle",status:index2.UIInputStatus.INVALID,scale:utils.UIDefaults.Scale,hidden:!hasError},this.errorMessage)};this.handleReplaceFieldClick=e=>{const targetElement=e.target;if(targetElement?.localName==="calcite-value-list-item"&&!e.composedPath().find((el=>el.localName==="calcite-action"))){this.analysisSelectFieldClick.emit()}};this.handleMouseOver=e=>{const targetElement=e.target;if(targetElement?.localName==="calcite-value-list-item"&&!e.composedPath().find((el=>el.localName==="calcite-action"))){if(this.replaceTooltip===undefined){this.replaceTooltip=document.createElement("calcite-tooltip");this.replaceTooltip.placement="bottom";this.replaceTooltip.innerText=this.strings.replaceField}this.replaceTooltip.referenceElement=targetElement;utils.addOpenableDomElement(document,this.replaceTooltip)}};this.mouseOut=()=>{utils.removeOpenableDomElement(this.replaceTooltip)};this.onSelectClick=()=>{this.analysisSelectFieldClick.emit()};this.onListItemRemoved=event=>{utils.removeOpenableDomElement(this.replaceTooltip);const target=event.target;this.analysisFieldRemove.emit({value:target.value})};this.value=undefined;this.label=undefined;this.disabled=false;this.selectionMode=undefined;this.useValueLabel=false;this.fields=undefined;this.errorMessage=undefined;this.placeholderText=undefined;this.required=false;this.readOnly=false;this.loading=false}get fieldLabels(){let entries=[];if(this.useValueLabel===true&&this.value!==undefined){const valueArray=Array.isArray(this.value)?this.value:[this.value];entries=valueArray.map((value=>[value,value]))}else if(this.useValueLabel===false&&this.fields!==undefined){entries=this.fields.map((field=>[field.name,field.alias]))}return new Map(entries)}async componentWillLoad(){({strings:this.strings}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)))}render(){return index.h(index.Host,null,this.label!==undefined&&this.label!==""?index.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,this.selectionMode===undefined||this.selectionMode==="single"?this.value===undefined?this.renderSingleSelectButton():this.renderSingleListItem():this.renderMultiple(),this.renderErrorMessage())}renderSingleListItem(){const label=this.fieldLabels.get(this.value)??this.value;return index.h("calcite-value-list-item",{"data-layerId":this.value,class:HTMLClasses.singleListItem,key:this.value?.toString(),value:this.value,label,nonInteractive:this.readOnly===true,removable:this.readOnly===false,onMouseOver:this.readOnly===false?this.handleMouseOver:undefined,onMouseOut:this.readOnly===false?this.mouseOut:undefined,onClick:this.readOnly===false?this.handleReplaceFieldClick:undefined,onCalciteListItemRemove:this.readOnly===false?this.onListItemRemoved:undefined})}renderSingleSelectButton(){const label=this.value!==undefined?this.fieldLabels.get(this.value):this.placeholderText??this.strings.inputPlaceholderText;return index.h("calcite-button",{scale:utils.UIDefaults.Scale,width:"full",alignment:"space-between",appearance:"transparent",kind:"neutral","icon-end":"chevron-down",id:"single-select-field-btn",onClick:this.onSelectClick,disabled:this.disabled,loading:this.loading},label)}renderMultiple(){const buttonClass=this.value!==undefined&&this.value.length>0?HTMLClasses.fieldMultiSelectButtonSpaced:undefined;const listItems=this.value?.map((value=>index.h("calcite-value-list-item",{key:value,label:this.fieldLabels.get(value)??value,value,removable:true,onCalciteListItemRemove:this.onListItemRemoved})));return index.h("div",{class:HTMLClasses.multiSelectContainer},listItems!==undefined&&listItems.length>0&&index.h("calcite-value-list",null,listItems),index.h("calcite-button",{round:true,iconStart:"plus",appearance:"outline",kind:"neutral",width:"full",onClick:this.onSelectClick,class:buttonClass,id:"multi-select-field-btn",scale:utils.UIDefaults.Scale,loading:this.loading},this.placeholderText??this.strings.multiSelectFieldButtonText))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return analysisFieldSelectCss}},[1,"analysis-field-select",{value:[1],label:[513],disabled:[516],selectionMode:[513,"selection-mode"],useValueLabel:[516,"use-value-label"],fields:[16],errorMessage:[513,"error-message"],placeholderText:[513,"placeholder-text"],required:[516],readOnly:[516,"read-only"],loading:[516]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-field-select","analysis-label"];components.forEach((tagName=>{switch(tagName){case"analysis-field-select":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisFieldSelect)}break;case"analysis-label":if(!customElements.get(tagName)){analysisLabel2.defineCustomElement()}break}}))}defineCustomElement();exports.AnalysisFieldSelect=AnalysisFieldSelect;exports.defineCustomElement=defineCustomElement}));
