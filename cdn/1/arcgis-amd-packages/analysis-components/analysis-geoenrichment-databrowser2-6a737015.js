define(["exports","./index-ef555910","./index2-588b02d9"],(function(exports,index,index2){"use strict";const HTMLClasses={rtl:"analysis--rtl",modalContent:"databrowser-modal-content",modalVariables:"databrowser-modal-variables"};const analysisGeoenrichmentDatabrowserCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.databrowser-modal-content{height:100%}.databrowser-modal-variables{--calcite-modal-height:min(700px, calc(60vh + 100px));--calcite-modal-content-padding:0px}.esri4GEDataBrowser_Title{display:none}.esri4GEWizard_Buttons{display:flex}.esri4GEPopup .esri4GEOnDemandSelectFlowListPopup .esri4GEOnDemandSelectVeryTallList500Popup{top:20px}";const AnalysisGeoenrichmentDatabrowser=index.proxyCustomElement(class AnalysisGeoenrichmentDatabrowser extends index.H{constructor(){super();this.__registerHost();this.analysisDataBrowserSelectionChange=index.createEvent(this,"analysisDataBrowserSelectionChange",7);this.analysisDataBrowserClose=index.createEvent(this,"analysisDataBrowserClose",7);this.onBackButtonClick=async()=>{if(this.dataBrowserElement!==undefined){await this.dataBrowserElement.back()}};this.close=()=>{if(this.containerRef!==undefined){this.containerRef.open=false}};this.onSelectButtonClick=()=>{const selectedCartItems=this.dataBrowserElement.widget._shoppingCart._content;const selectedValues=[];Object.values(selectedCartItems).map((item=>{if(index2.isEmptyDataItem(item?.group?.value)===false&&this.dataBrowserElement.widget.selection.includes(item.group.value)===true){selectedValues.push({value:item.group.value,label:item.label})}}));const countryId=this.dataBrowserElement.widget.countryID;const hierarchyId=this.dataBrowserElement.widget.hierarchyID;const countryObj=this.dataBrowserElement.widget._pages?.categories?._countrySelect?._countries?.[countryId];const hierarchyObj=countryObj?.hierarchies?.find((hrchy=>hrchy.ID===hierarchyId));const countryAlias=countryObj?.name;const hierarchyAlias=hierarchyObj?.alias;const payload={selectedValues,countryId,hierarchyId,countryAlias,hierarchyAlias};this.analysisDataBrowserSelectionChange.emit(payload);this.close()};this.onClose=()=>{this.analysisDataBrowserClose.emit()};this.onOpen=()=>{if(this.dataBrowserElement!==undefined&&this.dataBrowserElement.widget!==undefined&&index2.isEmptyDataItem(this.value)===false){this.dataBrowserElement.countryId=this.countryId;this.dataBrowserElement.widget.hierarchyID=this.hierarchyId;this.dataBrowserElement.widget.selection=this.value}};this.showBackButton=false;this.value=undefined;this.countryId=undefined;this.hierarchyId=undefined;this.portal=undefined}portalChange(newPortal){this.geoenrichmentUrl=newPortal?.helperServices?.geoenrichment?.url??"https://geoenrichdev.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"}async componentWillLoad(){({strings:this.strings,locale:this.locale,dir:this.dir}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)));this.portalChange(this.portal)}componentDidLoad(){try{setTimeout((()=>requestAnimationFrame((()=>this.containerRef?.setFocus()))),1)}catch{}}render(){return this.renderModal()}renderModal(){return index.h("calcite-modal",{class:HTMLClasses.modalVariables,open:true,escapeDisabled:true,outsideCloseDisabled:true,focusTrapDisabled:true,onCalciteModalOpen:this.onOpen,onCalciteModalClose:this.onClose,ref:el=>this.containerRef=el},index.h("div",{slot:"header"},this.strings.header),index.h("div",{slot:"content",class:HTMLClasses.modalContent},this.renderDataBrowser()),this.showBackButton===true&&index.h("calcite-button",{slot:"back",kind:"neutral",appearance:"outline",iconStart:"chevron-left",width:"full",onClick:this.onBackButtonClick},this.strings.back),index.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:this.close},this.strings.cancel),index.h("calcite-button",{slot:"primary",width:"full",onClick:this.onSelectButtonClick},this.strings.select))}renderDataBrowser(){return index.h("arcgis-geoenrichment-databrowser",{locale:this.locale,class:{[HTMLClasses.rtl]:this.dir==="rtl"},allowHierarchies:true,countryId:this.countryId??"US",geoenrichmentUrl:this.geoenrichmentUrl,displayAllGlobalVariables:true,hideApplyButton:true,hideBackButton:true,hideCancelButton:true,hidePageBackButton:true,ref:el=>{this.dataBrowserElement=el},onPageLoaded:()=>this.showBackButton=index2.isEmptyDataItem(this.dataBrowserElement?.widget?.currentPageId)===false&&this.dataBrowserElement?.widget?.currentPageId!=="categories"})}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{portal:["portalChange"]}}static get style(){return analysisGeoenrichmentDatabrowserCss}},[0,"analysis-geoenrichment-databrowser",{value:[8],countryId:[513,"country-id"],hierarchyId:[513,"hierarchy-id"],portal:[16],showBackButton:[32]},undefined,{portal:["portalChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-geoenrichment-databrowser"];components.forEach((tagName=>{switch(tagName){case"analysis-geoenrichment-databrowser":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisGeoenrichmentDatabrowser)}break}}))}defineCustomElement();exports.AnalysisGeoenrichmentDatabrowser=AnalysisGeoenrichmentDatabrowser;exports.defineCustomElement=defineCustomElement}));
