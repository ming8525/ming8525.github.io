define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4","./analysis-label2-f17c360a"],(function(exports,index,index2,utils,analysisLabel2){"use strict";const HTMLClasses={controlsContainer:"controls-container",control:"control",text:"text"};const analysisDateInputCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;flex-direction:column;margin-bottom:var(--analysis-half-spacing);--calcite-color-border-input:var(--analysis-ui-border-input)}.controls-container{display:flex;column-gap:5%}.control{flex:1 1 auto}.text{cursor:default;padding-bottom:var(--analysis-quarter-spacing);margin-block-start:0;margin-block-end:0}";const AnalysisDateInput=index.proxyCustomElement(class AnalysisDateInput extends index.H{constructor(){super();this.__registerHost();this.__attachShadow();this.analysisDateInputChange=index.createEvent(this,"analysisDateInputChange",7);this.analysisHelpClick=index.createEvent(this,"analysisHelpClick",7);this.validateSelection=()=>{if((this.value===undefined||this.dateInputElement.value.length===0||this.timeInputElement.value===undefined)&&this.required===true){this.errorMessage=this.validationParams?.requiredMessage??index2.formatMessage(this.strings.requiredError,{label:this.label});this.isValid=false}else{this.isValid=true}};this.handleDateChange=()=>{if(this.dateInputElement?.valueAsDate!==undefined){const newDate=this.dateInputElement.valueAsDate;const timeValue=index2.isEmptyDataItem(this.timeInputElement?.value)===false?this.timeInputElement.value.split(":").map((time=>Number(time))):[0,0];this.value=Date.UTC(newDate.getFullYear(),newDate.getMonth(),newDate.getDate(),timeValue[0],timeValue[1])}this.analysisDateInputChange.emit()};this.handleTimeChange=()=>{const timeInputValue=index2.isEmptyDataItem(this.timeInputElement?.value)===false?this.timeInputElement.value.split(":").map((time=>Number(time))):undefined;if(this.value!==undefined&&timeInputValue!==undefined){const currentDateValue=this.dateInputElement.valueAsDate;this.value=Date.UTC(currentDateValue.getFullYear(),currentDateValue.getMonth(),currentDateValue.getDate(),timeInputValue[0],timeInputValue[1])}this.analysisDateInputChange.emit()};this.value=undefined;this.defaultToNow=false;this.label=undefined;this.minDate=undefined;this.maxDate=undefined;this.required=undefined;this.isValid=true;this.validationParams=undefined;this.errorMessage=""}async checkValidity(){this.validateSelection();return Promise.resolve(this.isValid)}async componentWillLoad(){({strings:this.strings}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)));if(this.defaultToNow===true){const timeZoneOffset=(new Date).getTimezoneOffset()*6e4;this.value=new Date(Date.now()).setSeconds(0,0)-timeZoneOffset;this.analysisDateInputChange.emit()}}render(){let isoDate=undefined;let timeString=undefined;if(this.value!==undefined){try{const currentValueAsDate=new Date(this.value);isoDate=currentValueAsDate.toISOString();timeString=`${currentValueAsDate.getUTCHours()}:${currentValueAsDate.getUTCMinutes()}`}catch{}}return index.h(index.Host,null,this.label!==undefined&&this.label!==""?index.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,index.h("div",{class:HTMLClasses.controlsContainer},index.h("calcite-input-date-picker",{scale:utils.UIDefaults.Scale,class:HTMLClasses.control,value:isoDate,placement:"bottom",minAsDate:this.minDate!==undefined?new Date(this.minDate):undefined,maxAsDate:this.maxDate!==undefined?new Date(this.maxDate):undefined,onFocusout:this.validateSelection,onCalciteInputDatePickerChange:this.handleDateChange,ref:e=>{this.dateInputElement=e}}),index.h("calcite-input-time-picker",{placement:"bottom",scale:utils.UIDefaults.Scale,value:timeString,class:HTMLClasses.control,onCalciteInputTimePickerChange:this.handleTimeChange,ref:e=>{this.timeInputElement=e}})),index.h("calcite-input-message",{status:index2.UIInputStatus.INVALID,scale:utils.UIDefaults.Scale,icon:"exclamationMarkTriangle",hidden:this.isValid!==false},this.errorMessage))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return analysisDateInputCss}},[1,"analysis-date-input",{value:[1538],defaultToNow:[516,"default-to-now"],label:[513],minDate:[514,"min-date"],maxDate:[514,"max-date"],required:[516],validationParams:[16],isValid:[32],errorMessage:[32],checkValidity:[64]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-date-input","analysis-label"];components.forEach((tagName=>{switch(tagName){case"analysis-date-input":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisDateInput)}break;case"analysis-label":if(!customElements.get(tagName)){analysisLabel2.defineCustomElement()}break}}))}defineCustomElement();exports.AnalysisDateInput=AnalysisDateInput;exports.defineCustomElement=defineCustomElement}));
