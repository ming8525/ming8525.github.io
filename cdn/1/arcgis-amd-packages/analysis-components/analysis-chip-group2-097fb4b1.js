define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4"],(function(exports,index,index2,utils){"use strict";const analysisChipGroupCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{margin-bottom:var(--analysis-half-spacing)}.analysis-chip-button{margin:var(--analysis-quarter-spacing);border-width:2px}.analysis-chip-button:hover{cursor:pointer}.analysis-chip-disabled{margin:var(--analysis-quarter-spacing);background-color:var(--calcite-color-foreground-2);border:none}";const AnalysisChipGroup=index.proxyCustomElement(class AnalysisChipGroup extends index.H{constructor(){super();this.__registerHost();this.__attachShadow();this.analysisChipGroupSelectionChange=index.createEvent(this,"analysisChipGroupSelectionChange",7);this.chipRefs=[];this.isValid=true;this.selectAllHandler=()=>{if(Array.isArray(this.value)){if(this.selectedChips.length<this.value.length){this.selectedChips=this.value;this.canSelectAll=false}else{this.selectedChips=[];this.canSelectAll=true}}else{this.selectedChips=this.selectedChips.length===1?[]:[this.value];this.canSelectAll=this.selectedChips.length!==1}this.analysisChipGroupSelectionChange.emit()};this.handleCalciteChipClick=e=>{const element=e.target;const val=element.value;if(!this.disabled){this.handleChipSelection(val)}};this.validateSelection=()=>{this.isValid=this.selectedChips.length>0};this.renderChips=()=>{const zippedValuesAndLabels=index2.zip(this.value,this.chipLabel);return index.h(index.Host,null,index.h("div",null,zippedValuesAndLabels.map((([chipValue,chipLabel],index$1)=>index.h("calcite-chip",{key:chipValue,scale:this.scale,ref:el=>{if(el!==undefined&&el!==null&&!this.value.includes(el.value)){this.chipRefs.push(el)}},appearance:"outline",kind:this.selectedChips.includes(chipValue)?"brand":"neutral",icon:Array.isArray(this.iconLabel)?this.iconLabel[index$1]:this.iconLabel,value:chipValue,onClick:this.handleCalciteChipClick,class:this.disabled?"analysis-chip-disabled":"analysis-chip-button",closed:false,closable:this.dismissible},chipLabel))),this.selectAllEnabled?index.h("calcite-button",{round:true,scale:this.scale,kind:"brand",appearance:"transparent",onClick:this.selectAllHandler},this.canSelectAll?this.strings.selectAll:this.strings.deselectAll):null,this.renderErrorMessage()))};this.renderErrorMessage=()=>this.required===true&&this.isValid===false?index.h("calcite-input-message",{status:index2.UIInputStatus.INVALID,scale:utils.UIDefaults.Scale,icon:"exclamationMarkTriangle"},index2.formatMessage(this.validationParams?.badInputMessage??this.strings.requiredError,{})):null;this.renderChip=()=>index.h(index.Host,null,index.h("div",null,index.h("calcite-chip",{ref:el=>{if(this.chipRefs.length===0){this.chipRefs.push(el)}},kind:this.selectedChips.includes(this.value)?"brand":"neutral",appearance:"outline",icon:this.chipLabel,scale:this.scale,value:this.value,onClick:this.handleCalciteChipClick,class:this.disabled?"analysis-chip-disabled":"analysis-chip-button",closable:this.dismissible},this.chipLabel)));this.canSelectAll=true;this.value=undefined;this.iconLabel=undefined;this.scale=utils.UIDefaults.Scale;this.selectAllEnabled=false;this.label=undefined;this.selectionMode=undefined;this.disabled=false;this.dismissible=false;this.selectedChips=[];this.initialChipSelection=[];this.chipLabel=undefined;this.required=false;this.validationParams=undefined}validateValues(newValues){if(index2.areThereDuplicates(newValues)===true){throw new index2.ArcgisWebAnalysisError("DuplicateValueError","There are duplicate strings in the values array")}}selectedChipsChange(){this.validateSelection();this.analysisChipGroupSelectionChange.emit();this.updateSelectAllButton()}async componentWillLoad(){if(Array.isArray(this.value)){this.validateValues(this.value)}({strings:this.strings}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)))}componentDidLoad(){if(this.initialChipSelection!==undefined){this.selectedChips=this.initialChipSelection;this.isValid=true}}handleDismiss(e){const element=e.target;this.value=Array.isArray(this.value)?this.value.filter((val=>val!==element.value)):"";this.chipLabel=Array.isArray(this.chipLabel)?this.chipLabel.filter((label=>label!==element.innerText)):"";this.chipRefs=this.chipRefs.filter((chip=>chip.value!==element.value))}handleChipSelection(selectedChipValue){if(this.selectionMode==="single"){this.selectedChips=this.selectedChips.includes(selectedChipValue)?[]:[selectedChipValue]}else if(this.selectionMode==="multi"){this.selectedChips=this.selectedChips.includes(selectedChipValue)?this.selectedChips=this.selectedChips.filter((value=>value!==selectedChipValue)):this.selectedChips=[...this.selectedChips,selectedChipValue]}else{throw new index2.ArcgisWebAnalysisError("RequiredPropertyMissing","The selectionMode property is required and must be either 'single' or 'multi'")}}updateSelectAllButton(){if(this.selectAllEnabled===true){if(Array.isArray(this.value)&&this.selectedChips.length===this.value.length||this.selectedChips[0]===this.value){this.canSelectAll=false}else{this.canSelectAll=true}}}async checkValidity(){this.validateSelection();return Promise.resolve(this.isValid)}render(){const isMulti=Array.isArray(this.value)&&Array.isArray(this.chipLabel)&&this.value?.length===this.chipLabel?.length;return isMulti===true?this.renderChips():this.renderChip()}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["validateValues"],selectedChips:["selectedChipsChange"]}}static get style(){return analysisChipGroupCss}},[1,"analysis-chip-group",{value:[1025],iconLabel:[1,"icon-label"],scale:[513],selectAllEnabled:[516,"select-all-enabled"],label:[513],selectionMode:[1537,"selection-mode"],disabled:[516],dismissible:[516],selectedChips:[1040],initialChipSelection:[1040],chipLabel:[1025,"chip-label"],required:[516],validationParams:[16],canSelectAll:[32],checkValidity:[64]},[[0,"calciteChipClose","handleDismiss"]],{value:["validateValues"],selectedChips:["selectedChipsChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-chip-group"];components.forEach((tagName=>{switch(tagName){case"analysis-chip-group":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisChipGroup)}break}}))}defineCustomElement();exports.AnalysisChipGroup=AnalysisChipGroup;exports.defineCustomElement=defineCustomElement}));
