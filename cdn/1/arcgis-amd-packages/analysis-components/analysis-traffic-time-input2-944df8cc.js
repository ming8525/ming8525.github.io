define(["exports","./index-ef555910","./index2-588b02d9","./utils-793221d4","./analysis-date-input2-1f634ecb","./analysis-label2-f17c360a"],(function(exports,index,index2,utils,analysisDateInput2,analysisLabel2){"use strict";const TimeSelectionModes={Now:"now",Custom:"custom",Unspecified:"unspecified"};const TimeZones={UTC:"UTC",GeoLocal:"GeoLocal"};const analysisTrafficTimeInputCss=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;flex-direction:column;width:var(--analysis-component-default-width);--calcite-color-border-input:var(--analysis-ui-border-input)}.label{width:var(--analysis-component-default-width)}";const AnalysisTrafficTimeInput=index.proxyCustomElement(class AnalysisTrafficTimeInput extends index.H{constructor(){super();this.__registerHost();this.__attachShadow();this.analysisTrafficTimeInputChange=index.createEvent(this,"analysisTrafficTimeInputChange",7);this.analysisHelpClick=index.createEvent(this,"analysisHelpClick",7);this.validateSelection=async()=>{let dateInputIsValid=true;if(this.selectedTimeMode===TimeSelectionModes.Custom&&this.required===true){if(this.dateInputElement!==undefined){dateInputIsValid=await this.dateInputElement.checkValidity()}this.isValid=dateInputIsValid&&this.value!==undefined}else{this.isValid=dateInputIsValid}};this.setSelectedTimeMode=newValue=>{switch(newValue?.timeZoneForTimeOfDay){case undefined:const unspecifiedTempValue={timeOfDay:undefined,timeZoneForTimeOfDay:undefined};this.value={...unspecifiedTempValue};this.selectedTimeMode=TimeSelectionModes.Unspecified;break;case TimeZones.GeoLocal:const timeOfDay=newValue.timeOfDay;if(timeOfDay!==undefined&&typeof timeOfDay==="number"){const geoLocalTempValue={timeOfDay,timeZoneForTimeOfDay:TimeZones.GeoLocal};this.value={...geoLocalTempValue}}this.selectedTimeMode=TimeSelectionModes.Custom;break;case TimeZones.UTC:default:const utcTempValue=newValue??{timeOfDay:index2.CalculatedParameterValueKeys.CurrentTime,timeZoneForTimeOfData:TimeZones.UTC};utcTempValue.timeOfDay=index2.CalculatedParameterValueKeys.CurrentTime;this.value={...utcTempValue};this.selectedTimeMode=TimeSelectionModes.Now;break}this.analysisTrafficTimeInputChange.emit()};this.renderDatePicker=()=>this.selectedTimeMode===TimeSelectionModes.Custom?index.h("analysis-date-input",{label:"",required:this.required,onAnalysisDateInputChange:this.datePickerChange,ref:e=>{this.dateInputElement=e},value:this.value?.timeOfDay}):null;this.timeSelectChange=()=>{this.selectedTimeMode=this.timeSelectElement.value;switch(this.selectedTimeMode){case TimeSelectionModes.Now:this.value={timeOfDay:index2.CalculatedParameterValueKeys.CurrentTime,timeZoneForTimeOfDay:TimeZones.UTC};break;case TimeSelectionModes.Unspecified:this.value={timeOfDay:undefined,timeZoneForTimeOfDay:undefined};break;case TimeSelectionModes.Custom:const timeOfDay=this.value?.timeOfDay;this.value={timeOfDay,timeZoneForTimeOfDay:TimeZones.GeoLocal};break}this.analysisTrafficTimeInputChange.emit()};this.datePickerChange=()=>{if(this.selectedTimeMode===TimeSelectionModes.Custom){const timeOfDay=this.dateInputElement?.value;this.value={timeOfDay,timeZoneForTimeOfDay:TimeZones.GeoLocal};this.analysisTrafficTimeInputChange.emit()}};this.value={timeOfDay:index2.CalculatedParameterValueKeys.CurrentTime,timeZoneForTimeOfDay:TimeZones.UTC};this.label=undefined;this.required=undefined;this.isValid=true;this.selectedTimeMode=undefined;this.resetTimeZoneValue=false}resetTimeZoneValueChange(newValue){if(newValue===true){this.value={timeOfDay:undefined,timeZoneForTimeOfDay:undefined};this.setSelectedTimeMode(this.value)}}async componentWillLoad(){({strings:this.strings}=await index2.fetchComponentLocaleStrings(this.hostElement,index.getAssetPath(`.`)));this.setSelectedTimeMode(this.value)}async checkValidity(){await this.validateSelection();return Promise.resolve(this.isValid)}render(){return index.h(index.Host,null,index.h("calcite-label",{class:"label",scale:utils.UIDefaults.Scale},this.label!==undefined&&this.label!==""?index.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,index.h("calcite-select",{value:this.selectedTimeMode,scale:utils.UIDefaults.Scale,label:this.label??this.strings.arriveTime,onCalciteSelectChange:this.timeSelectChange,ref:el=>this.timeSelectElement=el},index.h("calcite-option",{selected:this.value?.timeZoneForTimeOfDay==="UTC",value:TimeSelectionModes.Now},this.strings.modes.now),index.h("calcite-option",{selected:this.value?.timeZoneForTimeOfDay==="GeoLocal",value:TimeSelectionModes.Custom},this.strings.modes.custom),index.h("calcite-option",{selected:this.value?.timeZoneForTimeOfDay===undefined,value:TimeSelectionModes.Unspecified},this.strings.modes.unspecified))),this.renderDatePicker())}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{resetTimeZoneValue:["resetTimeZoneValueChange"]}}static get style(){return analysisTrafficTimeInputCss}},[1,"analysis-traffic-time-input",{value:[1040],label:[513],required:[516],resetTimeZoneValue:[516,"reset-time-zone-value"],isValid:[32],selectedTimeMode:[32],checkValidity:[64]},undefined,{resetTimeZoneValue:["resetTimeZoneValueChange"]}]);function defineCustomElement(){if(typeof customElements==="undefined"){return}const components=["analysis-traffic-time-input","analysis-date-input","analysis-label"];components.forEach((tagName=>{switch(tagName){case"analysis-traffic-time-input":if(!customElements.get(tagName)){customElements.define(tagName,AnalysisTrafficTimeInput)}break;case"analysis-date-input":if(!customElements.get(tagName)){analysisDateInput2.defineCustomElement()}break;case"analysis-label":if(!customElements.get(tagName)){analysisLabel2.defineCustomElement()}break}}))}defineCustomElement();exports.AnalysisTrafficTimeInput=AnalysisTrafficTimeInput;exports.defineCustomElement=defineCustomElement}));
