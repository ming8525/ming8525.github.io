define(["exports","./index2-0f07feca","./shared-components-e09cc192"],(function(t,e,n){"use strict";var r="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")(),a=i.Symbol,s=Object.prototype,c=s.hasOwnProperty,u=s.toString,l=a?a.toStringTag:void 0,p=Object.prototype.toString,f="[object Null]",h="[object Undefined]",d=a?a.toStringTag:void 0;function y(t){return null==t?void 0===t?h:f:d&&d in Object(t)?function(t){var e=c.call(t,l),n=t[l];try{t[l]=void 0;var r=!0}catch(t){}var o=u.call(t);return r&&(e?t[l]=n:delete t[l]),o}(t):function(t){return p.call(t)}(t)}function v(t){return null!=t&&"object"==typeof t}var g="[object Symbol]";function _(t){return"symbol"==typeof t||v(t)&&y(t)==g}var b=Array.isArray,x=1/0,m=a?a.prototype:void 0,O=m?m.toString:void 0;function E(t){if("string"==typeof t)return t;if(b(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,E)+"";if(_(t))return O?O.call(t):"";var e=t+"";return"0"==e&&1/t==-x?"-0":e}function j(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var S="[object AsyncFunction]",w="[object Function]",R="[object GeneratorFunction]",C="[object Proxy]";function T(t){if(!j(t))return!1;var e=y(t);return e==w||e==R||e==S||e==C}var P,M=i["__core-js_shared__"],k=(P=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",z=Function.prototype.toString;function D(t){if(null!=t){try{return z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var L=/^\[object .+?Constructor\]$/,$=Function.prototype,A=Object.prototype,F=$.toString,I=A.hasOwnProperty,U=RegExp("^"+F.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function V(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!j(t)||(e=t,k&&k in e))&&(T(t)?U:L).test(D(t));var e}(n)?n:void 0}var G=function(){try{var t=V(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),N=9007199254740991,H=/^(?:0|[1-9]\d*)$/;function W(t,e){var n=typeof t;return!!(e=null==e?N:e)&&("number"==n||"symbol"!=n&&H.test(t))&&t>-1&&t%1==0&&t<e}function K(t,e,n){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function q(t,e){return t===e||t!=t&&e!=e}var J=Object.prototype.hasOwnProperty;function B(t,e,n){var r=t[e];J.call(t,e)&&q(r,n)&&(void 0!==n||e in t)||K(t,e,n)}var Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,Y=V(Object,"create"),Z=Object.prototype.hasOwnProperty,tt=Object.prototype.hasOwnProperty;function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t,e){for(var n=t.length;n--;)if(q(t[n][0],e))return n;return-1}et.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},et.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},et.prototype.get=function(t){var e=this.__data__;if(Y){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Z.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return Y?void 0!==e[t]:tt.call(e,t)},et.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Y&&void 0===e?"__lodash_hash_undefined__":e,this};var rt=Array.prototype.splice;function ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ot.prototype.clear=function(){this.__data__=[],this.size=0},ot.prototype.delete=function(t){var e=this.__data__,n=nt(e,t);return!(n<0||(n==e.length-1?e.pop():rt.call(e,n,1),--this.size,0))},ot.prototype.get=function(t){var e=this.__data__,n=nt(e,t);return n<0?void 0:e[n][1]},ot.prototype.has=function(t){return nt(this.__data__,t)>-1},ot.prototype.set=function(t,e){var n=this.__data__,r=nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var it=V(i,"Map");function at(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function st(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}st.prototype.clear=function(){this.size=0,this.__data__={hash:new et,map:new(it||ot),string:new et}},st.prototype.delete=function(t){var e=at(this,t).delete(t);return this.size-=e?1:0,e},st.prototype.get=function(t){return at(this,t).get(t)},st.prototype.has=function(t){return at(this,t).has(t)},st.prototype.set=function(t,e){var n=at(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ct(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(ct.Cache||st),n}ct.Cache=st;var ut,lt,pt,ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ht=/\\(\\)?/g,dt=(ut=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ft,(function(t,n,r,o){e.push(r?o.replace(ht,"$1"):n||t)})),e},lt=ct(ut,(function(t){return 500===pt.size&&pt.clear(),t})),pt=lt.cache,lt);function yt(t,e){return b(t)?t:function(t,e){if(b(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!_(t))||X.test(t)||!Q.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:dt(function(t){return null==t?"":E(t)}(t))}var vt=1/0;function gt(t){if("string"==typeof t||_(t))return t;var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function _t(t,e,n,r){if(!j(t))return t;for(var o=-1,i=(e=yt(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var c=gt(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=j(l)?l:W(e[o+1])?[]:{})}B(s,c,u),s=s[c]}return t}function bt(t,e,n){return null==t?t:_t(t,e,n)}const xt=t=>!("isConnected"in t)||t.isConnected,mt=((t,e)=>{let n;return(...t)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(xt))})(...t)}),2e3)}})(),Ot=t=>"function"==typeof t?t():t,Et=e.getLocaleInfo().locale,jt=((t,n)=>{const r=((t,e=((t,e)=>t!==e))=>{const n=Ot(t);let r=new Map(Object.entries(null!=n?n:{}));const o={dispose:[],get:[],set:[],reset:[]},i=()=>{var e;r=new Map(Object.entries(null!==(e=Ot(t))&&void 0!==e?e:{})),o.reset.forEach((t=>t()))},a=t=>(o.get.forEach((e=>e(t))),r.get(t)),s=(t,n)=>{const i=r.get(t);e(n,i,t)&&(r.set(t,n),o.set.forEach((e=>e(t,n,i))))},c="undefined"==typeof Proxy?{}:new Proxy(n,{get:(t,e)=>a(e),ownKeys:t=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(t,e)=>r.has(e),set:(t,e,n)=>(s(e,n),!0)}),u=(t,e)=>(o[t].push(e),()=>{((t,e)=>{const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.length--)})(o[t],e)});return{state:c,get:a,set:s,on:u,onChange:(e,n)=>{const r=u("set",((t,r)=>{t===e&&n(r)})),o=u("reset",(()=>n(Ot(t)[e])));return()=>{r(),o()}},use:(...t)=>{const e=t.reduce(((t,e)=>(e.set&&t.push(u("set",e.set)),e.get&&t.push(u("get",e.get)),e.reset&&t.push(u("reset",e.reset)),e.dispose&&t.push(u("dispose",e.dispose)),t)),[]);return()=>e.forEach((t=>t()))},dispose:()=>{o.dispose.forEach((t=>t())),i()},reset:i,forceUpdate:t=>{const e=r.get(t);o.set.forEach((n=>n(t,e,e)))}}})(t,void 0);return r.use((()=>{if("function"!=typeof e.getRenderingRef)return{};const t=new Map;return{dispose:()=>t.clear(),get:n=>{const r=e.getRenderingRef();r&&((t,e,n)=>{const r=t.get(e);r?r.includes(n)||r.push(n):t.set(e,[n])})(t,n,r)},set:n=>{const r=t.get(n);r&&t.set(n,r.filter(e.forceUpdate)),mt(t)},reset:()=>{t.forEach((t=>t.forEach(e.forceUpdate))),mt(t)}}})()),r})({analysisToolRef:void 0,context:{},creditUsageSettings:{askConfirmation:!0,creditThreshold:100},mapLevelContext:{},settingsSelectedExtentOption:n.ExtentOptions.Default,settingsSelectedOutSpatialRefOption:n.OutSROptions.SameAsInput,mapLayers:[],mapView:void 0,portal:void 0,portalHelpMap:void 0,locale:Et}),St=jt.state;function wt(t){return St.mapLayers.find((e=>{let n=e.url;return"layerId"in e&&(n+=`/${e.layerId??0}`),n===t||e.title===t}))}jt.onChange("settingsSelectedOutSpatialRefOption",(()=>{delete St.context.outSR,St.context={...St.context}})),jt.onChange("settingsSelectedExtentOption",(t=>{switch(t){case n.ExtentOptions.Default:case n.ExtentOptions.Layer:case n.ExtentOptions.Coordinates:delete St.context.extent,St.context={...St.context};break;case n.ExtentOptions.MapExtent:St.context.extent=n.ExtentOptions.MapExtent,St.context={...St.context}}})),jt.onChange("context",(()=>{void 0!==St.analysisToolRef&&(St.analysisToolRef.environmentSettings=St.context)})),t.DEFAULT_CREDIT_THRESHOLD=100,t.ListCache=ot,t.Map$1=it,t.MapCache=st,t.Symbol=a,t.addContextToJobParams=function(t,r,o,i){const a={...St.context};if(a.extent===n.ExtentOptions.MapExtent&&void 0!==St.mapView?.extent){let t=St.mapView?.extent.clone();t=t.shiftCentralMeridian();const{xmin:n,ymin:r,xmax:o,ymax:i,spatialReference:s}=t,{wkid:c,latestWkid:u,wkt:l}=s;a.extent={xmin:n,ymin:r,xmax:o,ymax:i},e.isEmptyDataItem(c)||bt(a.extent,"spatialReference.wkid",c),e.isEmptyDataItem(u)||bt(a.extent,"spatialReference.latestWkid",u),e.isEmptyDataItem(l)||bt(a.extent,"spatialReference.wkt",l)}void 0!==i&&i?.length>0&&i.forEach((t=>{delete a[t]}));const s=e.isEmptyDataItem(a)?t:{...t,context:a},c=s.context;if("Sample"===r){const t={...c,processAsMultidimensional:o?.processMultidimension};s.context=t}else if("FindOutliers"===r){const t=`${o?.randomGenerator} MERSENNE_TWISTER`,e={...c,randomGenerator:t};s.context=e}return s},t.assignValue=B,t.baseAssignValue=K,t.baseGetTag=y,t.baseSet=_t,t.castPath=yt,t.defineProperty=G,t.eq=q,t.findExistingLayer=wt,t.freeGlobal=r,t.getEnvSettingsLayer=async function(t){let n;const r=wt(t?.url??t?.layerDefinition?.name);if(void 0===r)try{const r=await e.getLayerObject(t);void 0!==r&&(n=r)}catch{n=n??t}else n=r;return n},t.getEnvSettingsLayerForStorage=function(t){let n;return n="layerDefinition"in t&&void 0!==t.layerDefinition?e.getFeatureCollectionValueForStorage(t):"url"in t&&void 0!==t.url?{url:e.sanitizeUrl(t.url)}:t,n},t.getNative=V,t.isArray=b,t.isFunction=T,t.isIndex=W,t.isObject=j,t.isObjectLike=v,t.root=i,t.set=bt,t.state=St,t.toKey=gt,t.toSource=D}));