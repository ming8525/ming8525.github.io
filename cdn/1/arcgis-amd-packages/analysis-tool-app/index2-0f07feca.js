define(["require","exports","esri/request","esri/rest/support/ParameterValue","esri/core/urlUtils","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/identity/IdentityManager","esri/core/reactiveUtils","esri/rest/support/Query","esri/core/promiseUtils","esri/portal/PortalItemResource","esri/layers/FeatureLayer","esri/geometry/support/jsonUtils","esri/layers/Layer","esri/portal/PortalItem","esri/layers/support/Field","esri/renderers/Renderer","esri/rest/support/FeatureSet","esri/config","esri/smartMapping/statistics/uniqueValues","esri/rest/support/JobInfo","esri/rest/geoprocessor","esri/core/sql"],(function(e,t,r,n,o,a,i,s,c,l,u,f,p,d,y,m,h,b,v,g,$,w,j,S,_){"use strict";function P(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function O(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var E=P(r),T=O(o),A=P(c),I=P(d),k=O(y),N=P(m),L=P(h),x=P(b),R=P(v),U=P(g),C=P($),F=O(S);let z,D,M,G=!1,V=!1,J=!1,B=!1,K=null,W=!1;const H="http://www.w3.org/1999/xlink",Y={},q=e=>"object"==(e=typeof e)||"function"===e,Q=(e,t,...r)=>{let n=null,o=null,a=null,i=!1,s=!1;const c=[],l=t=>{for(let r=0;r<t.length;r++)n=t[r],Array.isArray(n)?l(n):null!=n&&"boolean"!=typeof n&&((i="function"!=typeof e&&!q(n))&&(n=String(n)),i&&s?c[c.length-1].$text$+=n:c.push(i?X(null,n):n),s=i)};if(l(r),t&&(t.key&&(o=t.key),t.name&&(a=t.name),true)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if("function"==typeof e)return e(null===t?{}:t,c,te);const u=X(e,null);return u.$attrs$=t,c.length>0&&(u.$children$=c),u.$key$=o,u.$name$=a,u},X=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return r},Z={},ee=e=>e&&e.$tag$===Z,te={forEach:(e,t)=>e.map(re).forEach(t),map:(e,t)=>e.map(re).map(t).map(ne)},re=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),ne=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Q(e.vtag,t,...e.vchildren||[])}const t=X(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},oe=new WeakMap,ae=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),ie=(e,t,r,n,o,a)=>{if(r!==n){let i=De(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,o=ce(r),a=ce(n);t.remove(...o.filter((e=>e&&!a.includes(e)))),t.add(...a.filter((e=>e&&!o.includes(e))))}else if("style"===t){for(const t in r)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)r&&n[t]===r[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const c=q(n);if((i||c&&null!==n)&&!o)try{if(e.tagName.includes("-"))e[t]=n;else{const o=null==n?"":n;"list"===t?i=!1:null!=r&&e[t]==o||(e[t]=o)}}catch(e){}let l=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,l=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(l?e.removeAttributeNS(H,t):e.removeAttribute(t)):(!i||4&a||o)&&!c&&(n=!0===n?"":n,l?e.setAttributeNS(H,t,n):e.setAttribute(t,n))}else if(t="-"===t[2]?t.slice(3):De(Je,s)?s.slice(2):s[2]+t.slice(3),r||n){const o=t.endsWith(le);t=t.replace(ue,""),r&&We.rel(e,t,r,o),n&&We.ael(e,t,n,o)}}},se=/\s/,ce=e=>e?e.split(se):[],le="Capture",ue=new RegExp(le+"$"),fe=(e,t,r,n)=>{const o=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||Y,i=t.$attrs$||Y;for(n in a)n in i||ie(o,n,a[n],void 0,r,t.$flags$);for(n in i)ie(o,n,a[n],i[n],r,t.$flags$)},pe=(e,t,r,n)=>{var o;const a=t.$children$[r];let i,s,c,l=0;if(G||(J=!0,"slot"===a.$tag$&&(z&&n.classList.add(z+"-s"),a.$flags$|=a.$children$?2:1)),null!==a.$text$)i=a.$elm$=Be.createTextNode(a.$text$);else if(1&a.$flags$)i=a.$elm$=Be.createTextNode("");else{if(B||(B="svg"===a.$tag$),i=a.$elm$=Be.createElementNS(B?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&a.$flags$?"slot-fb":a.$tag$),B&&"foreignObject"===a.$tag$&&(B=!1),fe(null,a,B),null!=z&&i["s-si"]!==z&&i.classList.add(i["s-si"]=z),a.$children$)for(l=0;l<a.$children$.length;++l)s=pe(e,a,l,i),s&&i.appendChild(s);"svg"===a.$tag$?B=!1:"foreignObject"===i.tagName&&(B=!0)}return i["s-hn"]=M,3&a.$flags$&&(i["s-sr"]=!0,i["s-fs"]=null===(o=a.$attrs$)||void 0===o?void 0:o.slot,i["s-cr"]=D,i["s-sn"]=a.$name$||"",c=e&&e.$children$&&e.$children$[r],c&&c.$tag$===a.$tag$&&e.$elm$&&de(e.$elm$,!1)),i},de=(e,t)=>{var r;We.$flags$|=1;const n=e.childNodes;for(let e=n.length-1;e>=0;e--){const o=n[e];o["s-hn"]!==M&&o["s-ol"]&&(ve(o).insertBefore(o,be(o)),o["s-ol"].remove(),o["s-ol"]=void 0,o["s-sh"]=void 0,1===o.nodeType&&o.setAttribute("slot",null!==(r=o["s-sn"])&&void 0!==r?r:""),J=!0),t&&de(o,t)}We.$flags$&=-2},ye=(e,t,r,n,o,a)=>{let i,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===M&&(s=s.shadowRoot);o<=a;++o)n[o]&&(i=pe(null,r,o,e),i&&(n[o].$elm$=i,s.insertBefore(i,be(t))))},me=(e,t,r)=>{for(let n=t;n<=r;++n){const t=e[n];if(t){const e=t.$elm$;_e(t),e&&(V=!0,e["s-ol"]?e["s-ol"].remove():de(e,!0),e.remove())}}},he=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),be=e=>e&&e["s-ol"]||e,ve=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ge=(e,t)=>{const r=t.$elm$=e.$elm$,n=e.$children$,o=t.$children$,a=t.$tag$,i=t.$text$;let s;null===i?(B="svg"===a||"foreignObject"!==a&&B,"slot"===a||fe(e,t,B),null!==n&&null!==o?((e,t,r,n)=>{let o,a,i=0,s=0,c=0,l=0,u=t.length-1,f=t[0],p=t[u],d=n.length-1,y=n[0],m=n[d];for(;i<=u&&s<=d;)if(null==f)f=t[++i];else if(null==p)p=t[--u];else if(null==y)y=n[++s];else if(null==m)m=n[--d];else if(he(f,y))ge(f,y),f=t[++i],y=n[++s];else if(he(p,m))ge(p,m),p=t[--u],m=n[--d];else if(he(f,m))"slot"!==f.$tag$&&"slot"!==m.$tag$||de(f.$elm$.parentNode,!1),ge(f,m),e.insertBefore(f.$elm$,p.$elm$.nextSibling),f=t[++i],m=n[--d];else if(he(p,y))"slot"!==f.$tag$&&"slot"!==m.$tag$||de(p.$elm$.parentNode,!1),ge(p,y),e.insertBefore(p.$elm$,f.$elm$),p=t[--u],y=n[++s];else{for(c=-1,l=i;l<=u;++l)if(t[l]&&null!==t[l].$key$&&t[l].$key$===y.$key$){c=l;break}c>=0?(a=t[c],a.$tag$!==y.$tag$?o=pe(t&&t[s],r,c,e):(ge(a,y),t[c]=void 0,o=a.$elm$),y=n[++s]):(o=pe(t&&t[s],r,s,e),y=n[++s]),o&&ve(f.$elm$).insertBefore(o,be(f.$elm$))}i>u?ye(e,null==n[d+1]?null:n[d+1].$elm$,r,n,s,d):s>d&&me(t,i,u)})(r,n,t,o):null!==o?(null!==e.$text$&&(r.textContent=""),ye(r,null,t,o,0,o.length-1)):null!==n&&me(n,0,n.length-1),B&&"svg"===a&&(B=!1)):(s=r["s-cr"])?s.parentNode.textContent=i:e.$text$!==i&&(r.data=i)},$e=e=>{const t=e.childNodes;for(const e of t)if(1===e.nodeType){if(e["s-sr"]){const r=e["s-sn"];e.hidden=!1;for(const n of t)if(n!==e)if(n["s-hn"]!==e["s-hn"]||""!==r){if(1===n.nodeType&&(r===n.getAttribute("slot")||r===n["s-sn"])){e.hidden=!0;break}}else if(1===n.nodeType||3===n.nodeType&&""!==n.textContent.trim()){e.hidden=!0;break}}$e(e)}},we=[],je=e=>{let t,r,n;for(const o of e.childNodes){if(o["s-sr"]&&(t=o["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const e=o["s-sn"];for(n=r.length-1;n>=0;n--)if(t=r[n],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==o["s-hn"])if(Se(t,e)){let r=we.find((e=>e.$nodeToRelocate$===t));V=!0,t["s-sn"]=t["s-sn"]||e,r?(r.$nodeToRelocate$["s-sh"]=o["s-hn"],r.$slotRefNode$=o):(t["s-sh"]=o["s-hn"],we.push({$slotRefNode$:o,$nodeToRelocate$:t})),t["s-sr"]&&we.map((e=>{Se(e.$nodeToRelocate$,t["s-sn"])&&(r=we.find((e=>e.$nodeToRelocate$===t)),r&&!e.$slotRefNode$&&(e.$slotRefNode$=r.$slotRefNode$))}))}else we.some((e=>e.$nodeToRelocate$===t))||we.push({$nodeToRelocate$:t})}1===o.nodeType&&je(o)}},Se=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,_e=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(_e)},Pe=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,tt((()=>Oe(e,t)))),Oe=(e,t)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),o=r;let a;return a=Ne(o,t?"componentWillLoad":"componentWillUpdate"),a=Ee(a,(()=>Ne(o,"componentWillRender"))),n(),Ee(a,(()=>Ae(e,o,t)))},Ee=(e,t)=>Te(e)?e.then(t):t(),Te=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Ae=async(e,t,r)=>{const n=e.$hostElement$,o=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],r&&(e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,o=(t.$tagName$,()=>{}),a=((e,t,r)=>{var n;const o=ae(t,r),a=Ge.get(o);if(e=11===e.nodeType?e:Be,a)if("string"==typeof a){e=e.head||e;let r,i=oe.get(e);if(i||oe.set(e,i=new Set),!i.has(o)){{r=Be.createElement("style"),r.innerHTML=a;const t=null!==(n=We.$nonce$)&&void 0!==n?n:function(e){var t,r,n;return null!==(n=null===(r=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===r?void 0:r.getAttribute("content"))&&void 0!==n?n:void 0}(Be);null!=t&&r.setAttribute("nonce",t),e.insertBefore(r,e.querySelector("link"))}4&t.$flags$&&(r.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),i&&i.add(o)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return o})(He&&r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);10&n&&(r["s-sc"]=a,r.classList.add(a+"-h"),2&n&&r.classList.add(a+"-s")),o()})(e);const a=(e.$cmpMeta$.$tagName$,()=>{});Ie(e,t,n,r),a(),o(),ke(e)},Ie=(e,t,r,n)=>{try{K=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t,r=!1)=>{var n,o;const a=e.$hostElement$,i=e.$cmpMeta$,s=e.$vnode$||X(null,null),c=ee(t)?t:Q(null,null,t);if(M=a.tagName,i.$attrsToReflect$&&(c.$attrs$=c.$attrs$||{},i.$attrsToReflect$.map((([e,t])=>c.$attrs$[t]=a[e]))),r&&c.$attrs$)for(const e of Object.keys(c.$attrs$))a.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(c.$attrs$[e]=a[e]);if(c.$tag$=null,c.$flags$|=4,e.$vnode$=c,c.$elm$=s.$elm$=a.shadowRoot||a,z=a["s-sc"],D=a["s-cr"],G=He&&0!=(1&i.$flags$),V=!1,ge(s,c),We.$flags$|=1,J){je(c.$elm$);for(const e of we){const t=e.$nodeToRelocate$;if(!t["s-ol"]){const e=Be.createTextNode("");e["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=e,t)}}for(const e of we){const t=e.$nodeToRelocate$,r=e.$slotRefNode$;if(r){const e=r.parentNode;let a=r.nextSibling;{let r=null===(n=t["s-ol"])||void 0===n?void 0:n.previousSibling;for(;r;){let n=null!==(o=r["s-nr"])&&void 0!==o?o:null;if(n&&n["s-sn"]===t["s-sn"]&&e===n.parentNode&&(n=n.nextSibling,!n||!n["s-nr"])){a=n;break}r=r.previousSibling}}(!a&&e!==t.parentNode||t.nextSibling!==a)&&t!==a&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),e.insertBefore(t,a))}else 1===t.nodeType&&(t.hidden=!0)}}V&&$e(c.$elm$),We.$flags$&=-2,we.length=0})(e,t,n)}catch(t){Me(t,e.$hostElement$)}return K=null,null},ke=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Ne(t,"componentDidRender"),64&e.$flags$?Ne(t,"componentDidUpdate"):(e.$flags$|=64,Ne(t,"componentDidLoad"))},Ne=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){Me(e)}},Le=(e,t,r)=>{var n;const o=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$);r.map((([e,[r]])=>{(31&r||32&r)&&Object.defineProperty(o,e,{get(){return t=e,ze(this).$instanceValues$.get(t);var t},set(r){((e,t,r,n)=>{const o=ze(e),a=e,i=o.$instanceValues$.get(t),s=o.$flags$,c=a;var l,u;l=r,u=n.$members$[t][0],r=null==l||q(l)?l:4&u?"false"!==l&&(""===l||!!l):2&u?parseFloat(l):1&u?String(l):l;const f=Number.isNaN(i)&&Number.isNaN(r);if(r!==i&&!f){if(o.$instanceValues$.set(t,r),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map((e=>{try{c[e](r,i,t)}catch(e){Me(e,a)}}))}if(2==(18&s)){if(c.componentShouldUpdate&&!1===c.componentShouldUpdate(r,i,t))return;Pe(o,!1)}}})(this,e,r,t)},configurable:!0,enumerable:!0})}));{const a=new Map;o.attributeChangedCallback=function(e,r,n){We.jmp((()=>{var i;const s=a.get(e);if(this.hasOwnProperty(s))n=this[s],delete this[s];else{if(o.hasOwnProperty(s)&&"number"==typeof this[s]&&this[s]==n)return;if(null==s){const o=ze(this),a=null==o?void 0:o.$flags$;if(a&&!(8&a)&&128&a&&n!==r){const o=this,a=null===(i=t.$watchers$)||void 0===i?void 0:i[e];null==a||a.forEach((t=>{null!=o[t]&&o[t].call(o,n,r,e)}))}return}}this[s]=(null!==n||"boolean"!=typeof this[s])&&n}))},e.observedAttributes=Array.from(new Set([...Object.keys(null!==(n=t.$watchers$)&&void 0!==n?n:{}),...r.filter((([e,t])=>15&t[0])).map((([e,r])=>{var n;const o=r[1]||e;return a.set(o,e),512&r[0]&&(null===(n=t.$attrsToReflect$)||void 0===n||n.push([e,o])),o}))]))}}return e},xe=(e,t,r,n)=>{r&&r.map((([r,n,o])=>{const a=Ue(e,r),i=Re(t,o),s=Ce(r);We.ael(a,n,i,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>We.rel(a,n,i,s)))}))},Re=(e,t)=>r=>{try{e.$hostElement$[t](r)}catch(e){Me(e)}},Ue=(e,t)=>4&t?Be:8&t?Je:16&t?Be.body:e,Ce=e=>Ye?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Fe=new WeakMap,ze=e=>Fe.get(e),De=(e,t)=>t in e,Me=(e,t)=>(0,console.error)(e,t),Ge=new Map,Ve=[],Je="undefined"!=typeof window?window:{},Be=Je.document||{head:{}},Ke=Je.HTMLElement||class{},We={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},He=!0,Ye=(()=>{let e=!1;try{Be.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),qe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),Qe=[],Xe=[],Ze=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){Me(e)}e.length=0},et=()=>{Ze(Qe),Ze(Xe),(W=Qe.length>0)&&We.raf(et)},tt=(rt=Xe,!0,e=>{rt.push(e),W||(W=!0,4&We.$flags$?(e=>{Promise.resolve(void 0).then(e)})(et):We.raf(et))});var rt,nt="object"==typeof global&&global&&global.Object===Object&&global,ot="object"==typeof self&&self&&self.Object===Object&&self,at=nt||ot||Function("return this")(),it=at.Symbol,st=Object.prototype,ct=st.hasOwnProperty,lt=st.toString,ut=it?it.toStringTag:void 0,ft=Object.prototype.toString,pt="[object Null]",dt="[object Undefined]",yt=it?it.toStringTag:void 0;function mt(e){return null==e?void 0===e?dt:pt:yt&&yt in Object(e)?function(e){var t=ct.call(e,ut),r=e[ut];try{e[ut]=void 0;var n=!0}catch(e){}var o=lt.call(e);return n&&(t?e[ut]=r:delete e[ut]),o}(e):function(e){return ft.call(e)}(e)}function ht(e){return null!=e&&"object"==typeof e}var bt="[object Symbol]";function vt(e){return"symbol"==typeof e||ht(e)&&mt(e)==bt}function gt(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var $t=Array.isArray,wt=1/0,jt=it?it.prototype:void 0,St=jt?jt.toString:void 0;function _t(e){if("string"==typeof e)return e;if($t(e))return gt(e,_t)+"";if(vt(e))return St?St.call(e):"";var t=e+"";return"0"==t&&1/e==-wt?"-0":t}function Pt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ot(e){return e}var Et="[object AsyncFunction]",Tt="[object Function]",At="[object GeneratorFunction]",It="[object Proxy]";function kt(e){if(!Pt(e))return!1;var t=mt(e);return t==Tt||t==At||t==Et||t==It}var Nt,Lt=at["__core-js_shared__"],xt=(Nt=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+Nt:"",Rt=Function.prototype.toString;function Ut(e){if(null!=e){try{return Rt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ct=/^\[object .+?Constructor\]$/,Ft=Function.prototype,zt=Object.prototype,Dt=Ft.toString,Mt=zt.hasOwnProperty,Gt=RegExp("^"+Dt.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vt(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Pt(e)||(t=e,xt&&xt in t))&&(kt(e)?Gt:Ct).test(Ut(e));var t}(r)?r:void 0}var Jt=Vt(at,"WeakMap"),Bt=Object.create,Kt=function(){function e(){}return function(t){if(!Pt(t))return{};if(Bt)return Bt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Wt=Kt;function Ht(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Yt=Date.now;function qt(e){return function(){return e}}var Qt,Xt,Zt,er=function(){try{var e=Vt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),tr=er,rr=tr?function(e,t){return tr(e,"toString",{configurable:!0,enumerable:!1,value:qt(t),writable:!0})}:Ot,nr=(Qt=rr,Xt=0,Zt=0,function(){var e=Yt(),t=16-(e-Zt);if(Zt=e,t>0){if(++Xt>=800)return arguments[0]}else Xt=0;return Qt.apply(void 0,arguments)}),or=nr;function ar(e){return e!=e}function ir(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t):function(e,t,r,n){for(var o=e.length,a=-1;++a<o;)if(t(e[a],a,e))return a;return-1}(e,ar)}(e,t)>-1}var sr=9007199254740991,cr=/^(?:0|[1-9]\d*)$/;function lr(e,t){var r=typeof e;return!!(t=null==t?sr:t)&&("number"==r||"symbol"!=r&&cr.test(e))&&e>-1&&e%1==0&&e<t}function ur(e,t,r){"__proto__"==t&&tr?tr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function fr(e,t){return e===t||e!=e&&t!=t}var pr=Object.prototype.hasOwnProperty;function dr(e,t,r){var n=e[t];pr.call(e,t)&&fr(n,r)&&(void 0!==r||t in e)||ur(e,t,r)}function yr(e,t,r,n){var o=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),o?ur(r,s,c):dr(r,s,c)}return r}var mr=Math.max;function hr(e,t,r){return t=mr(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=mr(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),Ht(e,this,s)}}function br(e,t){return or(hr(e,t,Ot),e+"")}var vr=9007199254740991;function gr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=vr}function $r(e){return null!=e&&gr(e.length)&&!kt(e)}function wr(e,t,r){if(!Pt(r))return!1;var n=typeof t;return!!("number"==n?$r(r)&&lr(t,r.length):"string"==n&&t in r)&&fr(r[t],e)}function jr(e){return br((function(t,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,i=o>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&wr(r[0],r[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,a)}return t}))}var Sr=Object.prototype;function _r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Sr)}function Pr(e){return ht(e)&&"[object Arguments]"==mt(e)}var Or=Object.prototype,Er=Or.hasOwnProperty,Tr=Or.propertyIsEnumerable,Ar=Pr(function(){return arguments}())?Pr:function(e){return ht(e)&&Er.call(e,"callee")&&!Tr.call(e,"callee")},Ir=Ar,kr="object"==typeof t&&t&&!t.nodeType&&t,Nr=kr&&"object"==typeof module&&module&&!module.nodeType&&module,Lr=Nr&&Nr.exports===kr?at.Buffer:void 0,xr=(Lr?Lr.isBuffer:void 0)||function(){return!1},Rr={};function Ur(e){return function(t){return e(t)}}Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var Cr="object"==typeof t&&t&&!t.nodeType&&t,Fr=Cr&&"object"==typeof module&&module&&!module.nodeType&&module,zr=Fr&&Fr.exports===Cr&&nt.process,Dr=function(){try{return Fr&&Fr.require&&Fr.require("util").types||zr&&zr.binding&&zr.binding("util")}catch(e){}}(),Mr=Dr&&Dr.isTypedArray,Gr=Mr?Ur(Mr):function(e){return ht(e)&&gr(e.length)&&!!Rr[mt(e)]},Vr=Gr,Jr=Object.prototype.hasOwnProperty;function Br(e,t){var r=$t(e),n=!r&&Ir(e),o=!r&&!n&&xr(e),a=!r&&!n&&!o&&Vr(e),i=r||n||o||a,s=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var l in e)!t&&!Jr.call(e,l)||i&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||lr(l,c))||s.push(l);return s}function Kr(e,t){return function(r){return e(t(r))}}var Wr=Kr(Object.keys,Object),Hr=Object.prototype.hasOwnProperty;function Yr(e){if(!_r(e))return Wr(e);var t=[];for(var r in Object(e))Hr.call(e,r)&&"constructor"!=r&&t.push(r);return t}function qr(e){return $r(e)?Br(e):Yr(e)}var Qr=Object.prototype.hasOwnProperty,Xr=jr((function(e,t){if(_r(t)||$r(t))yr(t,qr(t),e);else for(var r in t)Qr.call(t,r)&&dr(e,r,t[r])})),Zr=Xr,en=Object.prototype.hasOwnProperty;function tn(e){return $r(e)?Br(e,!0):function(e){if(!Pt(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=_r(e),r=[];for(var n in e)("constructor"!=n||!t&&en.call(e,n))&&r.push(n);return r}(e)}var rn=jr((function(e,t,r,n){yr(t,tn(t),e,n)})),nn=rn,on=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,an=/^\w*$/;function sn(e,t){if($t(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!vt(e))||an.test(e)||!on.test(e)||null!=t&&e in Object(t)}var cn=Vt(Object,"create"),ln=Object.prototype.hasOwnProperty,un=Object.prototype.hasOwnProperty;function fn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function pn(e,t){for(var r=e.length;r--;)if(fr(e[r][0],t))return r;return-1}fn.prototype.clear=function(){this.__data__=cn?cn(null):{},this.size=0},fn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},fn.prototype.get=function(e){var t=this.__data__;if(cn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ln.call(t,e)?t[e]:void 0},fn.prototype.has=function(e){var t=this.__data__;return cn?void 0!==t[e]:un.call(t,e)},fn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cn&&void 0===t?"__lodash_hash_undefined__":t,this};var dn=Array.prototype.splice;function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yn.prototype.clear=function(){this.__data__=[],this.size=0},yn.prototype.delete=function(e){var t=this.__data__,r=pn(t,e);return!(r<0||(r==t.length-1?t.pop():dn.call(t,r,1),--this.size,0))},yn.prototype.get=function(e){var t=this.__data__,r=pn(t,e);return r<0?void 0:t[r][1]},yn.prototype.has=function(e){return pn(this.__data__,e)>-1},yn.prototype.set=function(e,t){var r=this.__data__,n=pn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var mn=Vt(at,"Map");function hn(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function bn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}bn.prototype.clear=function(){this.size=0,this.__data__={hash:new fn,map:new(mn||yn),string:new fn}},bn.prototype.delete=function(e){var t=hn(this,e).delete(e);return this.size-=t?1:0,t},bn.prototype.get=function(e){return hn(this,e).get(e)},bn.prototype.has=function(e){return hn(this,e).has(e)},bn.prototype.set=function(e,t){var r=hn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function vn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(vn.Cache||bn),r}vn.Cache=bn;var gn,$n,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jn=/\\(\\)?/g,Sn=(gn=vn((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(wn,(function(e,r,n,o){t.push(n?o.replace(jn,"$1"):r||e)})),t}),(function(e){return 500===$n.size&&$n.clear(),e})),$n=gn.cache,gn);function _n(e){return null==e?"":_t(e)}function Pn(e,t){return $t(e)?e:sn(e,t)?[e]:Sn(_n(e))}var On=1/0;function En(e){if("string"==typeof e||vt(e))return e;var t=e+"";return"0"==t&&1/e==-On?"-0":t}function Tn(e,t){for(var r=0,n=(t=Pn(t,e)).length;null!=e&&r<n;)e=e[En(t[r++])];return r&&r==n?e:void 0}function An(e,t,r){var n=null==e?void 0:Tn(e,t);return void 0===n?r:n}function In(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var kn=it?it.isConcatSpreadable:void 0;function Nn(e){return $t(e)||Ir(e)||!!(kn&&e&&e[kn])}function Ln(e,t,r,n,o){var a=-1,i=e.length;for(r||(r=Nn),o||(o=[]);++a<i;){var s=e[a];t>0&&r(s)?t>1?Ln(s,t-1,r,n,o):In(o,s):n||(o[o.length]=s)}return o}function xn(e){return null!=e&&e.length?Ln(e,1):[]}function Rn(e){return or(hr(e,void 0,xn),e+"")}var Un=Kr(Object.getPrototypeOf,Object),Cn="[object Object]",Fn=Function.prototype,zn=Object.prototype,Dn=Fn.toString,Mn=zn.hasOwnProperty,Gn=Dn.call(Object);function Vn(e){if(!ht(e)||mt(e)!=Cn)return!1;var t=Un(e);if(null===t)return!0;var r=Mn.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Dn.call(r)==Gn}var Jn="[object DOMException]",Bn="[object Error]";function Kn(e){if(!ht(e))return!1;var t=mt(e);return t==Bn||t==Jn||"string"==typeof e.message&&"string"==typeof e.name&&!Vn(e)}var Wn=br((function(e,t){try{return Ht(e,void 0,t)}catch(e){return Kn(e)?e:new Error(e)}})),Hn=Wn;function Yn(e){var t=this.__data__=new yn(e);this.size=t.size}Yn.prototype.clear=function(){this.__data__=new yn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof yn){var n=r.__data__;if(!mn||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new bn(n)}return r.set(e,t),this.size=r.size,this};var qn="object"==typeof t&&t&&!t.nodeType&&t,Qn=qn&&"object"==typeof module&&module&&!module.nodeType&&module,Xn=Qn&&Qn.exports===qn?at.Buffer:void 0,Zn=Xn?Xn.allocUnsafe:void 0;function eo(){return[]}var to=Object.prototype.propertyIsEnumerable,ro=Object.getOwnPropertySymbols,no=ro?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,o=null==t?0:t.length,a=0,i=[];++n<o;){var s=t[n];c=s,to.call(e,c)&&(i[a++]=s)}var c;return i}(ro(e)))}:eo,oo=no,ao=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)In(t,oo(e)),e=Un(e);return t}:eo,io=ao;function so(e,t,r){var n=t(e);return $t(e)?n:In(n,r(e))}function co(e){return so(e,qr,oo)}function lo(e){return so(e,tn,io)}var uo=Vt(at,"DataView"),fo=Vt(at,"Promise"),po=Vt(at,"Set"),yo="[object Map]",mo="[object Promise]",ho="[object Set]",bo="[object WeakMap]",vo="[object DataView]",go=Ut(uo),$o=Ut(mn),wo=Ut(fo),jo=Ut(po),So=Ut(Jt),_o=mt;(uo&&_o(new uo(new ArrayBuffer(1)))!=vo||mn&&_o(new mn)!=yo||fo&&_o(fo.resolve())!=mo||po&&_o(new po)!=ho||Jt&&_o(new Jt)!=bo)&&(_o=function(e){var t=mt(e),r="[object Object]"==t?e.constructor:void 0,n=r?Ut(r):"";if(n)switch(n){case go:return vo;case $o:return yo;case wo:return mo;case jo:return ho;case So:return bo}return t});var Po=_o,Oo=Object.prototype.hasOwnProperty,Eo=at.Uint8Array;function To(e){var t=new e.constructor(e.byteLength);return new Eo(t).set(new Eo(e)),t}var Ao=/\w*$/,Io=it?it.prototype:void 0,ko=Io?Io.valueOf:void 0,No="[object Boolean]",Lo="[object Date]",xo="[object Map]",Ro="[object Number]",Uo="[object RegExp]",Co="[object Set]",Fo="[object String]",zo="[object Symbol]",Do="[object ArrayBuffer]",Mo="[object DataView]",Go="[object Float32Array]",Vo="[object Float64Array]",Jo="[object Int8Array]",Bo="[object Int16Array]",Ko="[object Int32Array]",Wo="[object Uint8Array]",Ho="[object Uint8ClampedArray]",Yo="[object Uint16Array]",qo="[object Uint32Array]";var Qo=Dr&&Dr.isMap,Xo=Qo?Ur(Qo):function(e){return ht(e)&&"[object Map]"==Po(e)},Zo=Xo,ea=Dr&&Dr.isSet,ta=ea?Ur(ea):function(e){return ht(e)&&"[object Set]"==Po(e)},ra=ta,na="[object Arguments]",oa="[object Function]",aa="[object Object]",ia={};function sa(e,t,r,n,o,a){var i,s=1&t,c=2&t,l=4&t;if(r&&(i=o?r(e,n,o,a):r(e)),void 0!==i)return i;if(!Pt(e))return e;var u=$t(e);if(u){if(i=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Oo.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,i)}else{var f=Po(e),p=f==oa||"[object GeneratorFunction]"==f;if(xr(e))return function(e,t){if(t)return e.slice();var r=e.length,n=Zn?Zn(r):new e.constructor(r);return e.copy(n),n}(e,s);if(f==aa||f==na||p&&!o){if(i=c||p?{}:function(e){return"function"!=typeof e.constructor||_r(e)?{}:Wt(Un(e))}(e),!s)return c?function(e,t){return yr(e,io(e),t)}(e,function(e,t){return e&&yr(t,tn(t),e)}(i,e)):function(e,t){return yr(e,oo(e),t)}(e,function(e,t){return e&&yr(t,qr(t),e)}(i,e))}else{if(!ia[f])return o?e:{};i=function(e,t,r){var n,o,a,i=e.constructor;switch(t){case Do:return To(e);case No:case Lo:return new i(+e);case Mo:return function(e,t){var r=t?To(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Go:case Vo:case Jo:case Bo:case Ko:case Wo:case Ho:case Yo:case qo:return function(e,t){var r=t?To(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case xo:return new i;case Ro:case Fo:return new i(e);case Uo:return(a=new(o=e).constructor(o.source,Ao.exec(o))).lastIndex=o.lastIndex,a;case Co:return new i;case zo:return n=e,ko?Object(ko.call(n)):{}}}(e,f,s)}}a||(a=new Yn);var d=a.get(e);if(d)return d;a.set(e,i),ra(e)?e.forEach((function(n){i.add(sa(n,t,r,n,e,a))})):Zo(e)&&e.forEach((function(n,o){i.set(o,sa(n,t,r,o,e,a))}));var y=u?void 0:(l?c?lo:co:c?tn:qr)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r););}(y||e,(function(n,o){y&&(n=e[o=n]),dr(i,o,sa(n,t,r,o,e,a))})),i}function ca(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new bn;++t<r;)this.add(e[t])}function la(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function ua(e,t){return e.has(t)}ia[na]=ia["[object Array]"]=ia["[object ArrayBuffer]"]=ia["[object DataView]"]=ia["[object Boolean]"]=ia["[object Date]"]=ia["[object Float32Array]"]=ia["[object Float64Array]"]=ia["[object Int8Array]"]=ia["[object Int16Array]"]=ia["[object Int32Array]"]=ia["[object Map]"]=ia["[object Number]"]=ia[aa]=ia["[object RegExp]"]=ia["[object Set]"]=ia["[object String]"]=ia["[object Symbol]"]=ia["[object Uint8Array]"]=ia["[object Uint8ClampedArray]"]=ia["[object Uint16Array]"]=ia["[object Uint32Array]"]=!0,ia["[object Error]"]=ia[oa]=ia["[object WeakMap]"]=!1,ca.prototype.add=ca.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ca.prototype.has=function(e){return this.__data__.has(e)};var fa=1,pa=2;function da(e,t,r,n,o,a){var i=r&fa,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var f=-1,p=!0,d=r&pa?new ca:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var y=e[f],m=t[f];if(n)var h=i?n(m,y,f,t,e,a):n(y,m,f,e,t,a);if(void 0!==h){if(h)continue;p=!1;break}if(d){if(!la(t,(function(e,t){if(!ua(d,t)&&(y===e||o(y,e,r,n,a)))return d.push(t)}))){p=!1;break}}else if(y!==m&&!o(y,m,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function ya(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function ma(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var ha=1,ba=2,va="[object Boolean]",ga="[object Date]",$a="[object Error]",wa="[object Map]",ja="[object Number]",Sa="[object RegExp]",_a="[object Set]",Pa="[object String]",Oa="[object Symbol]",Ea="[object ArrayBuffer]",Ta="[object DataView]",Aa=it?it.prototype:void 0,Ia=Aa?Aa.valueOf:void 0,ka=1,Na=Object.prototype.hasOwnProperty,La=1,xa="[object Arguments]",Ra="[object Array]",Ua="[object Object]",Ca=Object.prototype.hasOwnProperty;function Fa(e,t,r,n,o){return e===t||(null==e||null==t||!ht(e)&&!ht(t)?e!=e&&t!=t:function(e,t,r,n,o,a){var i=$t(e),s=$t(t),c=i?Ra:Po(e),l=s?Ra:Po(t),u=(c=c==xa?Ua:c)==Ua,f=(l=l==xa?Ua:l)==Ua,p=c==l;if(p&&xr(e)){if(!xr(t))return!1;i=!0,u=!1}if(p&&!u)return a||(a=new Yn),i||Vr(e)?da(e,t,r,n,o,a):function(e,t,r,n,o,a,i){switch(r){case Ta:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ea:return!(e.byteLength!=t.byteLength||!a(new Eo(e),new Eo(t)));case va:case ga:case ja:return fr(+e,+t);case $a:return e.name==t.name&&e.message==t.message;case Sa:case Pa:return e==t+"";case wa:var s=ya;case _a:var c=n&ha;if(s||(s=ma),e.size!=t.size&&!c)return!1;var l=i.get(e);if(l)return l==t;n|=ba,i.set(e,t);var u=da(s(e),s(t),n,o,a,i);return i.delete(e),u;case Oa:if(Ia)return Ia.call(e)==Ia.call(t)}return!1}(e,t,c,r,n,o,a);if(!(r&La)){var d=u&&Ca.call(e,"__wrapped__"),y=f&&Ca.call(t,"__wrapped__");if(d||y){var m=d?e.value():e,h=y?t.value():t;return a||(a=new Yn),o(m,h,r,n,a)}}return!!p&&(a||(a=new Yn),function(e,t,r,n,o,a){var i=r&ka,s=co(e),c=s.length;if(c!=co(t).length&&!i)return!1;for(var l=c;l--;){var u=s[l];if(!(i?u in t:Na.call(t,u)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var d=!0;a.set(e,t),a.set(t,e);for(var y=i;++l<c;){var m=e[u=s[l]],h=t[u];if(n)var b=i?n(h,m,u,t,e,a):n(m,h,u,e,t,a);if(!(void 0===b?m===h||o(m,h,r,n,a):b)){d=!1;break}y||(y="constructor"==u)}if(d&&!y){var v=e.constructor,g=t.constructor;v==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(d=!1)}return a.delete(e),a.delete(t),d}(e,t,r,n,o,a))}(e,t,r,n,Fa,o))}var za=1,Da=2;function Ma(e){return e==e&&!Pt(e)}function Ga(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function Va(e,t){return null!=e&&t in Object(e)}function Ja(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=Pn(t,e)).length,a=!1;++n<o;){var i=En(t[n]);if(!(a=null!=e&&r(e,i)))break;e=e[i]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&gr(o)&&lr(i,o)&&($t(e)||Ir(e))}(e,t,Va)}var Ba=1,Ka=2;function Wa(e){return"function"==typeof e?e:null==e?Ot:"object"==typeof e?$t(e)?(n=e[0],o=e[1],sn(n)&&Ma(o)?Ga(En(n),o):function(e){var t=An(e,n);return void 0===t&&t===o?Ja(e,n):Fa(o,t,Ba|Ka)}):(r=function(e){for(var t=qr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Ma(o)]}return t}(t=e),1==r.length&&r[0][2]?Ga(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,a=o;if(null==e)return!a;for(e=Object(e);o--;){var i=r[o];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++o<a;){var s=(i=r[o])[0],c=e[s],l=i[1];if(i[2]){if(void 0===c&&!(s in e))return!1}else{var u,f=new Yn;if(!(void 0===u?Fa(l,c,za|Da,n,f):u))return!1}}return!0}(e,0,r)}):function(e){return sn(e)?(t=En(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Tn(t,e)}}(e);var t}(e);var t,r,n,o}var Ha=function(e,t,r){for(var n=-1,o=Object(e),a=r(e),i=a.length;i--;){var s=a[++n];if(!1===t(o[s],s,o))break}return e};function Ya(e){return ht(e)&&$r(e)}function qa(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function Qa(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Xa,Za=(Xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==Xa?void 0:Xa[e]}),ei=/[&<>"']/g,ti=RegExp(ei.source),ri=Math.min;function ni(e){return Ya(e)?e:[]}br((function(e){var t=Qa(e),r=gt(e,ni);return t===Qa(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?function(e,t,r){for(var n=ir,o=e[0].length,a=e.length,i=a,s=Array(a),c=1/0,l=[];i--;){var u=e[i];i&&t&&(u=gt(u,Ur(t))),c=ri(u.length,c),s[i]=t||o>=120&&u.length>=120?new ca(i&&u):void 0}u=e[0];var f=-1,p=s[0];e:for(;++f<o&&l.length<c;){var d=u[f],y=t?t(d):d;if(d=0!==d?d:0,!(p?ua(p,y):n(l,y,r))){for(i=a;--i;){var m=s[i];if(!(m?ua(m,y):n(e[i],y,r)))continue e}p&&p.push(y),l.push(d)}}return l}(r,Wa(t)):[]}));var oi="[object Map]",ai="[object Set]",ii=Object.prototype.hasOwnProperty;function si(e){if(null==e)return!0;if($r(e)&&($t(e)||"string"==typeof e||"function"==typeof e.splice||xr(e)||Vr(e)||Ir(e)))return!e.length;var t=Po(e);if(t==oi||t==ai)return!e.size;if(_r(e))return!Yr(e).length;for(var r in e)if(ii.call(e,r))return!1;return!0}function ci(e,t){return Fa(e,t)}var li="Expected a function";function ui(e,t){return null==(e=function(e,t){return t.length<2?e:Tn(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}(t,0,-1))}(e,t=Pn(t,e)))||delete e[En(Qa(t))]}function fi(e){return Vn(e)?void 0:e}var pi=Rn((function(e,t){var r={};if(null==e)return r;var n=!1;t=gt(t,(function(t){return t=Pn(t,e),n||(n=t.length>1),t})),yr(e,lo(e),r),n&&(r=sa(r,7,fi));for(var o=t.length;o--;)ui(r,t[o]);return r})),di=pi;function yi(e,t,r,n){if(!Pt(e))return e;for(var o=-1,a=(t=Pn(t,e)).length,i=a-1,s=e;null!=s&&++o<a;){var c=En(t[o]),l=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=i){var u=s[c];void 0===(l=n?n(u,c,s):void 0)&&(l=Pt(u)?u:lr(t[o+1])?[]:{})}dr(s,c,l),s=s[c]}return e}function mi(e,t,r){for(var n=-1,o=t.length,a={};++n<o;){var i=t[n],s=Tn(e,i);r(s,i)&&yi(a,Pn(i,e),s)}return a}function hi(e,t){if(null==e)return{};var r=gt(lo(e),(function(e){return[e]}));return t=Wa(t),mi(e,r,(function(e,r){return t(e,r[0])}))}function bi(e,t){return hi(e,function(e){if("function"!=typeof e)throw new TypeError(li);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}(Wa(t)))}var vi=Rn((function(e,t){return null==e?{}:function(e,t){return mi(e,t,(function(t,r){return Ja(e,r)}))}(e,t)})),gi=vi;function $i(e,t,r){return null==e?e:yi(e,t,r)}var wi=Object.prototype,ji=wi.hasOwnProperty;function Si(e,t,r,n){return void 0===e||fr(e,wi[r])&&!ji.call(n,r)?t:e}var _i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Pi(e){return"\\"+_i[e]}var Oi=/<%=([\s\S]+?)%>/g,Ei={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Oi,variable:"",imports:{_:{escape:function(e){return(e=_n(e))&&ti.test(e)?e.replace(ei,Za):e}}}},Ti=/\b__p \+= '';/g,Ai=/\b(__p \+=) '' \+/g,Ii=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ki=/[()=,{}\[\]\/\s]/,Ni=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Li=/($^)/,xi=/['\n\r\u2028\u2029\\]/g,Ri=Object.prototype.hasOwnProperty;var Ui=po&&1/ma(new po([,-0]))[1]==1/0?function(e){return new po(e)}:function(){};function Ci(e,t,r){var n=-1,o=ir,a=e.length,i=!0,s=[],c=s;if(r)i=!1,o=qa;else if(a>=200){var l=t?null:Ui(e);if(l)return ma(l);i=!1,o=ua,c=new ca}else c=t?[]:s;e:for(;++n<a;){var u=e[n],f=t?t(u):u;if(u=r||0!==u?u:0,i&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(u)}else o(c,f,r)||(c!==s&&c.push(f),s.push(u))}return s}function Fi(e){let t;return t=hi(e,Vn),t=function(e,t){var r={};return t=Wa(t),function(e,t){e&&Ha(e,t,qr)}(e,(function(e,n,o){ur(r,n,t(e,n,o))})),r}(t,Fi),t=bi(t,si),t=Zr(bi(e,Vn),t),t}function zi(e){return null==e||"string"==typeof e&&""===e||Vn(e)&&si(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===$t(e)&&function(e){let t=!0;if("object"==typeof e&&!1===$t(e))for(const r in e){const n=e?.[r];if(!0===e.hasOwnProperty(r)&&null!=n&&""!==n){t=!1;break}}return t}(e)}async function Di(e,t){return E.default(e,t)}br((function(e){var t=Qa(e);return Ya(t)&&(t=void 0),Ci(Ln(e,1,Ya,!0),Wa(t))}));const Mi={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},Gi=[...Object.values(Mi),"ar-u-nu-latn","en-AU","en-GB","es-ES","es-MX","de-AT","de-CH","de-DE","it-CH","it-IT"],Vi=[Mi.Arabic,Mi.Hebrew],Ji=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"];function Bi(e=document.documentElement){const t=("[lang]",function e(t){let r;return r=void 0===t||t===document||t===window?null:t.closest("[lang]")||e(t.getRootNode().host),r}(e));const r=t?.lang??window.navigator.language,n=function(e){let t=Mi.English;if(void 0!==e){const r=Object.values(Mi),n=r.filter((e=>-1!==e.indexOf("-")));if(-1!==e.indexOf("-")){const[t,r]=e.split("-");e=`${t}-${r.toUpperCase()}`}if(!0===n.includes(e))t=e;else{const n=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{1,2})$/);let r=Mi.English;return null!=t&&t?.length>1?r=t[1]:2===e?.length&&e.toLowerCase()===e&&(r=e),r}(e);!0===r.includes(n)&&(t=n)}}return t}(r),o=function(e){let t=Gi.find((t=>t===e));if(void 0===t&&(t=e),void 0!==t&&-1!==t.indexOf("-")){const[e,r]=t.split("-");t=`${e}-${r.toUpperCase()}`}return"ar"===t&&(t="ar-u-nu-latn"),t}(r);return{locale:n,rtl:Vi.includes(n),formatLocale:o}}class Ki extends Error{constructor(e,t,r,n){super(t),this.name=e,this.details=r,this.cause=n}}const Wi={Default:"defaultError",CannotReopenTool:"cannotReopenTool",CannotReopenWebTool:"cannotReopenWebTool",CreditEstimationError:"creditEstimationError",CreditThresholdExceededError:"creditThresholdExceededError",CreditEstimationExecutionFailure:"failedToExecuteEstimate",InsufficientCreditsError:"InsufficientCreditsError",KeyPropertiesError:"keyPropertiesError",LayerLoadFailure:"layerLoadFailure",LayerUnavailable:"layerUnavailable",NetworkError:"networkError",PortalLoadError:"portalLoadError",QueryFeaturesError:"queryFeaturesError",ServiceNameExistsError:"serviceNameExistsError",SpecialCharactersInServiceNameError:"specialCharactersInServiceNameError",ToolValidationError:"toolValidationError",WebToolFailedFetch:"webToolFailedFetch",WebToolJSONChanged:"webToolJSONChanged",WebToolPermissionsError:"missingPermissionForWebTool"};var Hi=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},Yi=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return Hi()}try{return __global__||Hi()}finally{delete Object.prototype.__global__}}(),qi="object"==typeof globalThis&&globalThis&&globalThis.Array===Array?globalThis:Yi,Qi=qi,Xi={object:!0,symbol:!0},Zi={exports:{}},es=function(e){return null!=e},ts=es,rs={object:!0,function:!0,undefined:!0},ns=function(e){if(!function(e){return!!ts(e)&&hasOwnProperty.call(rs,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},os=/^\s*class[\s{/}]/,as=Function.prototype.toString,is=function(e){return null!=e},ss=is,cs=Object.keys,ls=function(){try{return!0}catch(e){return!1}}()?Object.keys:function(e){return cs(ss(e)?Object(e):e)},us=is,fs=ls,ps=Math.max,ds=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var r,n,o,a=ps(arguments.length,2);for(e=Object(function(e){if(!us(e))throw new TypeError("Cannot use null or undefined");return e}(e)),o=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},n=1;n<a;++n)fs(t=arguments[n]).forEach(o);if(void 0!==r)throw r;return e},ys=is,ms=Array.prototype.forEach,hs=Object.create,bs="razdwatrzy",vs=String.prototype.indexOf,gs="function"==typeof bs.contains&&!0===bs.contains("dwa")&&!1===bs.contains("foo")?String.prototype.contains:function(e){return vs.call(this,e,arguments[1])>-1},$s=es,ws=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!ns(e)}(e)&&!os.test(as.call(e))},js=ds,Ss=function(e){var t=hs(null);return ms.call(arguments,(function(e){ys(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)})),t},_s=gs,Ps=Zi.exports=function(e,t){var r,n,o,a,i;return arguments.length<2||"string"!=typeof e?(a=t,t=e,e=null):a=arguments[2],$s(e)?(r=_s.call(e,"c"),n=_s.call(e,"e"),o=_s.call(e,"w")):(r=o=!0,n=!1),i={value:t,configurable:r,enumerable:n,writable:o},a?js(Ss(a),i):i};Ps.gs=function(e,t,r){var n,o,a,i;return"string"!=typeof e?(a=r,r=t,t=e,e=null):a=arguments[3],$s(t)?ws(t)?$s(r)?ws(r)||(a=r,r=void 0):r=void 0:(a=t,t=r=void 0):t=void 0,$s(e)?(n=_s.call(e,"c"),o=_s.call(e,"e")):(n=!0,o=!1),i={get:t,set:r,configurable:n,enumerable:o},a?js(Ss(a),i):i};var Os,Es,Ts,As=function(e){if(!function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}(e))throw new TypeError(e+" is not a symbol");return e},Is=Zi.exports,ks=Object.create,Ns=Object.defineProperty,Ls=Object.prototype,xs=ks(null),Rs=Zi.exports,Us=qi.Symbol,Cs=Zi.exports,Fs=As,zs=Object.create(null),Ds=Zi.exports,Ms=As,Gs=qi.Symbol,Vs=function(e){for(var t,r,n=0;xs[e+(n||"")];)++n;return xs[e+=n||""]=!0,Ns(Ls,t="@@"+e,Is.gs(null,(function(e){r||(r=!0,Ns(this,t,Is(e)),r=!1)}))),t},Js=Object.create,Bs=Object.defineProperties,Ks=Object.defineProperty;if("function"==typeof Gs)try{String(Gs()),Ts=!0}catch(e){}else Gs=null;Es=function(e){if(this instanceof Es)throw new TypeError("Symbol is not a constructor");return Os(e)};var Ws,Hs=Os=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return Ts?Gs(t):(r=Js(Es.prototype),t=void 0===t?"":String(t),Bs(r,{__description__:Ds("",t),__name__:Ds("",Vs(t))}))};(function(e){Object.defineProperties(e,{hasInstance:Rs("",Us&&Us.hasInstance||e("hasInstance")),isConcatSpreadable:Rs("",Us&&Us.isConcatSpreadable||e("isConcatSpreadable")),iterator:Rs("",Us&&Us.iterator||e("iterator")),match:Rs("",Us&&Us.match||e("match")),replace:Rs("",Us&&Us.replace||e("replace")),search:Rs("",Us&&Us.search||e("search")),species:Rs("",Us&&Us.species||e("species")),split:Rs("",Us&&Us.split||e("split")),toPrimitive:Rs("",Us&&Us.toPrimitive||e("toPrimitive")),toStringTag:Rs("",Us&&Us.toStringTag||e("toStringTag")),unscopables:Rs("",Us&&Us.unscopables||e("unscopables"))})})(Os),function(e){Object.defineProperties(e,{for:Cs((function(t){return zs[t]?zs[t]:zs[t]=e(String(t))})),keyFor:Cs((function(e){var t;for(t in Fs(e),zs)if(zs[t]===e)return t}))})}(Os),Bs(Es.prototype,{constructor:Ds(Os),toString:Ds("",(function(){return this.__name__}))}),Bs(Os.prototype,{toString:Ds((function(){return"Symbol ("+Ms(this).__description__+")"})),valueOf:Ds((function(){return Ms(this)}))}),Ks(Os.prototype,Os.toPrimitive,Ds("",(function(){var e=Ms(this);return"symbol"==typeof e?e:e.toString()}))),Ks(Os.prototype,Os.toStringTag,Ds("c","Symbol")),Ks(Es.prototype,Os.toStringTag,Ds("c",Os.prototype[Os.toStringTag])),Ks(Es.prototype,Os.toPrimitive,Ds("c",Os.prototype[Os.toPrimitive])),("function"==typeof(Ws=Qi.Symbol)&&(Ws("test symbol"),Xi[typeof Ws.iterator]&&Xi[typeof Ws.toPrimitive]&&Xi[typeof Ws.toStringTag])?qi.Symbol:Hs)("-");const Ys="esriGPParameterDirectionOutput",qs="parameterViewModel",Qs={ImageService:"Image Service",FeatureService:"Feature Service",BigData:"Big Data File Share",Csv:"CSV",Xls:"Microsoft Excel",MapService:"Map Service",FeatureLayer:"Feature Layer",BigDataFeature:"featureClass",Table:"Table",BigDataTable:"table",MultiValueGrid:"Multi-Variable Grid",GeoprocessingService:"Geoprocessing Service",RasterFunctionTemplate:"Raster function template",BdfsTemplate:"bdfstemplate",DeepLearningPackage:"Deep Learning Package",File:"files",Doc:"documents",Image:"images",PDF:"pdfs",Csvs:"csvs"},Xs="_SelectedLayers";function Zs(e){return`${e}${Xs}`}var ec={exports:{}};function tc(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),a=t.get(o);return void 0===a&&(a=e.call(this,n),t.set(o,a)),a}function rc(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),a=t.get(o);return void 0===a&&(a=e.apply(this,n),t.set(o,a)),a}function nc(e,t,r,n,o){return r.bind(t,e,n,o)}function oc(e,t){return nc(e,this,1===e.length?tc:rc,t.cache.create(),t.serializer)}function ac(){return JSON.stringify(arguments)}function ic(){this.cache=Object.create(null)}ic.prototype.has=function(e){return e in this.cache},ic.prototype.get=function(e){return this.cache[e]},ic.prototype.set=function(e,t){this.cache[e]=t};var sc={create:function(){return new ic}};ec.exports=function(e,t){var r=t&&t.cache?t.cache:sc,n=t&&t.serializer?t.serializer:ac;return(t&&t.strategy?t.strategy:oc)(e,{cache:r,serializer:n})},ec.exports.strategies={variadic:function(e,t){return nc(e,this,rc,t.cache.create(),t.serializer)},monadic:function(e,t){return nc(e,this,tc,t.cache.create(),t.serializer)}};var cc=ec.exports;const lc=["SingleLine","Address","Address2","Address3","Neighborhood","City","Subregion","Region","Postal","PostalExt","CountryCode"];function uc(e){return T.urlToObject(e).path}cc((async e=>{const{geocodeServiceURL:t,locale:r}=e;let n;if(zi(t))n={ruleType:"expression",expression:"$[Data].geocodeServiceURL = NULL",destination:"sourceCountry",effectParams:{visible:!1}};else{let e,o;try{({data:{countries:e,detailedCountries:o}}=await Di(`${t}?f=json`,{responseType:"json"}))}catch(e){throw console.error("Failed to get Locator info"),e}const a={};o.forEach((e=>{const t=e.localizedNames,n=r.length>2&&r;let o;if("boolean"!=typeof n&&(o=t[n]),void 0===o){const e=2===r.length?r.slice(0,2):r;if(o=t[e],void 0===o){const r=Object.keys(t).find((t=>t.startsWith(e)));void 0!==r&&(o=t[r])}}null!=o&&""!==o||(o=t[Mi.English]??t[Mi.EnglishUSA]),a[e.name]=o})),n={ruleType:"expression",expression:"$[Data].geocodeServiceURL NOT null",destination:"sourceCountry",effectParams:{visible:!0,choiceList:e,choiceListLabels:a}}}return n}),{serializer:e=>{const{geocodeServiceURL:t}=e;return t??"EMPTY_KEY"}}),cc((async e=>{const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e;let o,a;if(!(zi(t)||zi(r)&&zi(n))){let t,r;a=await Vc(e);try{t=JSON.parse(a.field_info),r=JSON.parse(a.field_mapping)}catch(e){throw console.error("Failed to parse result of AnalyzeGeocodeInput"),e}const n=t.map((e=>e[0])),i=n.reduce(((e,t)=>({...e,[t]:t})),{});o={ruleType:"expression",expression:"($[Data].geocodeServiceURL NOT null) AND (($[Data].inputTable NOT null) OR ($[Data].inputFileItem NOT null))",destination:"geocodeUIParameters",effectParams:lc.reduce(((e,t,o)=>{const a=r.find((e=>e[1]===t))?.[0];return{...e,[`UIparameterInfos[${o}].choiceList`]:n,[`UIparameterInfos[${o}].choiceListLabels`]:i,[`UIparameterInfos[${o}].defaultValue`]:a}}),{})}}return{addressFieldsRule:o,geocodeParameters:a}}),{serializer:e=>{const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e,o=r?.itemid,a=n?.url;return zi(t)||zi(o)&&zi(a)?"EMPTY_KEY":`${t}${o}${a}`}});const fc="analysis_ui";async function pc(t,r){const n=await async function(t=Bi().locale){let r=await new Promise((function(t,r){e(["./errors.t9n.en-6cb15d51-ec6687ba"],t,r)}));switch(t){case Mi.Arabic:r=await new Promise((function(t,r){e(["./errors.t9n.ar-1b9d7225-eec60ef0"],t,r)}));break;case Mi.Bosnian:r=await new Promise((function(t,r){e(["./errors.t9n.bs-377a5410-36feae22"],t,r)}));break;case Mi.Bulgarian:r=await new Promise((function(t,r){e(["./errors.t9n.bg-89d094b5-f3a42236"],t,r)}));break;case Mi.Catalan:r=await new Promise((function(t,r){e(["./errors.t9n.ca-b4c83c33-77badc85"],t,r)}));break;case Mi.Czech:r=await new Promise((function(t,r){e(["./errors.t9n.cs-96fcf27d-5a68866c"],t,r)}));break;case Mi.Danish:r=await new Promise((function(t,r){e(["./errors.t9n.da-cefe0c47-400ac533"],t,r)}));break;case Mi.German:r=await new Promise((function(t,r){e(["./errors.t9n.de-a1b0ae17-75bd70bd"],t,r)}));break;case Mi.Greek:r=await new Promise((function(t,r){e(["./errors.t9n.el-0a20e1cc-f205fa3c"],t,r)}));break;case Mi.EnglishUSA:r=await new Promise((function(t,r){e(["./errors.t9n.en-US-c9f50f19-bfc18c90"],t,r)}));break;case Mi.Spanish:r=await new Promise((function(t,r){e(["./errors.t9n.es-0dd138a7-685bae6d"],t,r)}));break;case Mi.Estonian:r=await new Promise((function(t,r){e(["./errors.t9n.et-57cc3980-71d1d3cc"],t,r)}));break;case Mi.Finnish:r=await new Promise((function(t,r){e(["./errors.t9n.fi-7d2525cb-ee1341ef"],t,r)}));break;case Mi.French:r=await new Promise((function(t,r){e(["./errors.t9n.fr-b2186e48-039cdd3b"],t,r)}));break;case Mi.Hebrew:r=await new Promise((function(t,r){e(["./errors.t9n.he-f487411b-ce3790da"],t,r)}));break;case Mi.Croatian:r=await new Promise((function(t,r){e(["./errors.t9n.hr-61ca76d9-0ded7300"],t,r)}));break;case Mi.Hungarian:r=await new Promise((function(t,r){e(["./errors.t9n.hu-7fa01d3c-3e46d3ff"],t,r)}));break;case Mi.Indonesian:r=await new Promise((function(t,r){e(["./errors.t9n.id-6801fef5-12a6065a"],t,r)}));break;case Mi.Italian:r=await new Promise((function(t,r){e(["./errors.t9n.it-568c2b04-f569a426"],t,r)}));break;case Mi.Japanese:r=await new Promise((function(t,r){e(["./errors.t9n.ja-6042d3af-c4353778"],t,r)}));break;case Mi.Korean:r=await new Promise((function(t,r){e(["./errors.t9n.ko-4d01f228-4249027d"],t,r)}));break;case Mi.Lithuanian:r=await new Promise((function(t,r){e(["./errors.t9n.lt-7f94cd9d-e8c5451e"],t,r)}));break;case Mi.Latvian:r=await new Promise((function(t,r){e(["./errors.t9n.lv-0223c6ae-bc578f6e"],t,r)}));break;case Mi.NorwegianBokml:r=await new Promise((function(t,r){e(["./errors.t9n.nb-1f800b8b-d80f86f9"],t,r)}));break;case Mi.Dutch:r=await new Promise((function(t,r){e(["./errors.t9n.nl-dd20c6e1-7e8305ea"],t,r)}));break;case Mi.Polish:r=await new Promise((function(t,r){e(["./errors.t9n.pl-e71d8c8e-90143aa3"],t,r)}));break;case Mi.PortugueseBrazil:r=await new Promise((function(t,r){e(["./errors.t9n.pt-BR-6cdb50a3-a30b4c73"],t,r)}));break;case Mi.PortuguesePortugal:r=await new Promise((function(t,r){e(["./errors.t9n.pt-PT-6b3866f5-f900ebb9"],t,r)}));break;case Mi.Romanian:r=await new Promise((function(t,r){e(["./errors.t9n.ro-86e7cba9-e05751a7"],t,r)}));break;case Mi.Russian:r=await new Promise((function(t,r){e(["./errors.t9n.ru-23cdd703-b9a3b092"],t,r)}));break;case Mi.Serbian:r=await new Promise((function(t,r){e(["./errors.t9n.sr-fad84a78-ef8ae32c"],t,r)}));break;case Mi.Slovak:r=await new Promise((function(t,r){e(["./errors.t9n.sk-3b14f765-561c1ed2"],t,r)}));break;case Mi.Slovenian:r=await new Promise((function(t,r){e(["./errors.t9n.sl-e900baaf-ade630c3"],t,r)}));break;case Mi.Swedish:r=await new Promise((function(t,r){e(["./errors.t9n.sv-4613eae2-7ca6eb35"],t,r)}));break;case Mi.Thai:r=await new Promise((function(t,r){e(["./errors.t9n.th-5732c8a4-354229a2"],t,r)}));break;case Mi.Turkish:r=await new Promise((function(t,r){e(["./errors.t9n.tr-ccd64dcc-7c34546a"],t,r)}));break;case Mi.Ukrainian:r=await new Promise((function(t,r){e(["./errors.t9n.uk-e6c5f2f4-65cbc527"],t,r)}));break;case Mi.Vietnamese:r=await new Promise((function(t,r){e(["./errors.t9n.vi-3f1e30b4-7047265c"],t,r)}));break;case Mi.ChineseChina:r=await new Promise((function(t,r){e(["./errors.t9n.zh-CN-8e563d8f-1457d2df"],t,r)}));break;case Mi.ChineseHongKong:r=await new Promise((function(t,r){e(["./errors.t9n.zh-HK-23eb2505-8285427c"],t,r)}));break;case Mi.ChineseTaiwan:r=await new Promise((function(t,r){e(["./errors.t9n.zh-TW-4017c011-811e3724"],t,r)}))}return r}(),o=n[t];throw new Ki(t,o??n.defaultError,{type:fc},r)}function dc(e){const t=e,r=t.parent?.title??void 0;return void 0!==r?`${r} - ${e.title}`:e.title}function yc(e){return"imagery"===e.type}function mc(e){return"featureSet"in e}const hc=vn((e=>{const t={};let r;if(void 0!==e.featureSet){if(t.source=U.default.fromJSON(e.featureSet).features,r=e.layerDefinition,void 0!==r.fields&&(t.fields=r.fields.map((e=>x.default.fromJSON(e)))),void 0!==r.objectIdField&&(t.objectIdField=r.objectIdField),void 0!==r.geometryType){let e="point";switch(r.geometryType){case"esriGeometryMultipoint":e="multipoint";break;case"esriGeometryPoint":e="point";break;case"esriGeometryPolygon":e="polygon";break;case"esriGeometryPolyline":e="polyline"}t.geometryType=e}void 0!==r.spatialReference&&(t.spatialReference=r.spatialReference),void 0!==r.drawingInfo?.renderer&&(t.renderer=R.default.fromJSON(r.drawingInfo.renderer))}return new I.default(t)}));function bc(e){let t="";if(void 0!==e&&""!==e){const r=e.split("/"),n=function(e){let t="";if(void 0!==e&&""!==e){const r=e.split("/").filter((e=>!0===new RegExp("[A-Z]{1}[a-z]+Server").test(e)));t=r[r.length-1]}return t}(e);t=r[r.indexOf(n)-1]}return t}async function vc(e){let t;try{t=await N.default.fromArcGISServerUrl({url:uc(e)})}catch(e){await pc(Wi.LayerUnavailable,e)}return t}async function gc(e){let t;try{t=await N.default.fromPortalItem({portalItem:new L.default({id:e})})}catch(e){await pc(Wi.LayerUnavailable,e)}return t}async function $c(e){let t;try{t=await(!0===function(e){return"group"===e.type}(e)?e.loadAll():e.load())}catch(e){await pc(Wi.LayerLoadFailure,e)}return t}vn((async(e,t)=>{let r=!1;if(!0===window.location.href.includes("://localhost:")||void 0===t)r=!0;else{const n=`${e}${e.indexOf("?")>-1?"&":"?"}f=json`;C.default.request.proxyUrl=`${t}/sharing/proxy`;try{r=!1===zi((await Di(n,{useProxy:!0})).data)}catch(e){r=!1}}return!0===r?e:void 0}));const wc={Valid:"valid",Info:"informative",Warning:"warning",Error:"error"};function jc(e,t){return function(e){return void 0!==e&&"details"in e&&e.details?.type===fc}(e)?e?.message:t}function Sc({error:e,errorKey:t,message:r,variables:n={},type:o="error"}){return{key:e?.name??t??"",type:o,message:jc(e,r),variables:n}}function _c(e){const t={errors:[]};for(const r of e){let e;const n=r.name;if(n===Wi.LayerUnavailable){const t="details"in r?r.details?.layer:void 0;e=Sc({error:r,errorKey:n,variables:{title:bc(t?.url)??""}})}void 0!==e&&t.errors.push(e)}return t}async function Pc(e,t){const r=[],n=[],o=[];e.forEach((e=>{let o;if("url"in e){const r=t=>{const r="layerId"in t?`/${t.layerId??0}`:"",n=`${t.url}${r}`;return uc(e.url)===n};o=t.find((e=>r(e)))}else"itemId"in e?o=t.find((t=>e.itemId===t.portalItem?.id)):mc(e)&&void 0!==e?.layerDefinition.name&&(o=t.find((t=>e?.layerDefinition.name===t.title)));void 0===o?r.push(e):n.push(o)}));const a=r.map((async e=>{let t;try{t=await async function(e){let t;const r=[],{url:n,itemId:o}=e;if(!1===zi(n))try{t=await vc(n)}catch(e){r.push(e)}if(!1===zi(o)&&!0===zi(t))try{t=await gc(o)}catch(e){r.push(e)}return mc(e)&&(t=new I.default({title:e?.layerDefinition.name??""})),!0===zi(t)&&r.length>0&&await pc(Wi.LayerUnavailable,r),t}(e)}catch(t){o.push(new Ki(t.name,t.message,{...t.details,layer:e},t.cause))}try{t=await $c(t)}catch(t){o.push(new Ki(t.name,t.message,{...t.details,layer:e},t.cause))}return t}));let i=await Promise.all(a);return i=i.filter((e=>void 0!==e))??[],{existingLayers:n,layersToAdd:i,errors:o}}class Oc{prepare(e,t){return e}postProcess(e,t){return e}}const Ec=e=>"object"==typeof e&&null!==e;function Tc(e){return class extends e{getKeys(e,t){let r=[];if(Array.isArray(t.serializationKeys)&&t.serializationKeys.length>0)r=t.serializationKeys;else if(Ec(e)){const t=Array.isArray(e)?e.flatMap((e=>Ec(e)&&!Array.isArray(e)?Object.keys(e):[])):Object.keys(e);r=[...new Set(t)]}return this.toSerializeKeys=r,r}}}function Ac(e){return Object.values(e).map((e=>zi(e)?"":`${e}`)).join(" ").trim()}class Ic extends(Tc(Oc)){serialize(e){return Ac(e)}prepare(e,t){this.originalValue=e,this.getKeys(e,t);let r=e;return r=gi(e,this.toSerializeKeys),r}postProcess(e,t){let r=e;if(void 0!==t.serializationParameterName){const n=di(this.originalValue,this.toSerializeKeys);$i(n,t.serializationParameterName,e),r=n}return r}}class kc extends(Tc(Oc)){serialize(e){return function(e,t){let r=[];const n=Array.isArray(e),o=void 0!==t&&t.length>0;return n&&o?e.forEach((e=>{if("object"==typeof e){const n=gi(e,t);zi(n)||r.push(Ac(n))}})):!0===n&&!1===o&&e.length>0&&e.every((e=>"string"==typeof e))&&(r=e),r}(e,this.toSerializeKeys)}prepare(e,t){return this.getKeys(e,t),e}}class Nc extends(Tc(Oc)){serialize(e){return function(e,t,r){const n={},o=Array.isArray(e),a=void 0!==t&&t.length>0,i=o&&a&&void 0!==r;if(i){let o=[];e.forEach((e=>{if("object"==typeof e){const r=gi(e,t);o=[...o,...Object.values(r)]}})),$i(n,r,o)}return i?n:e}(e,this.toSerializeKeys,this.toSerializeName)}prepare(e,t){return this.toSerializeName=t.serializationParameterName,this.getKeys(e,t),e}}class Lc extends(Tc(Oc)){serialize(e){return"string"==typeof e?e:JSON.stringify(e)}}class xc extends(Tc(Oc)){serialize(e){return function(e){return!1===zi(e)?[e].flat():[]}(e)}}const Rc={sequentialValues:Ic,sequentialValueArray:kc,arrayValues:Nc,stringValue:Lc,wrapInAnArray:xc,default:class extends Oc{serialize(e){return e}}},Uc={ExcludedUIOnlyParamKeys:["itemProperties","userSettings"],ExcludedUIOnlyParamPartialKeys:[Xs],AlwaysIncludedUIOnlyParamKeys:["saveResultIn"]};function Cc(e){const t={};for(const r of e)void 0!==r.UIparameters?Object.assign(t,Cc(r.UIparameters)):void 0!==r.name&&void 0!==r.name&&(t[r.name]=r);return t}function Fc(e){e??(e="standard");let t="";return t="raster"===e?"_ra":"",t}const zc=vn((async e=>{const{locale:t,name:r,assetPrefix:n,analysisEngine:o,memoizedHelper:a}=e,i=`${r.toLowerCase()}${Fc(o)}`;let s,c,l,u;const f=`${n}/tool-ui-json/${i}.tool.ui.json`,p=`${n}/tool-json/${i}.tool.json`,d=`${n}/t9n/${i}/${i}.t9n.${t}.json`,y=`${n}/t9n/common.t9n.${t}.json`;let m=t;t===Mi.English||t===Mi.EnglishUSA?m="":m===Mi.NorwegianBokml&&(m="no");const h=`${n}/help/${""!==m?m+"/":""}${r}${Fc(o)}.html`;try{u=await a(p),s=await a(f),c=await a(d),l=await a(y),c={...l,...c}}catch{s=void 0}return{toolJson:u,toolUIJson:s,toolT9n:c,toolHelpFilePath:h}}));function Dc(e,t=!1){let r=e;if(!0===t){const t=JSON.parse(e),n={"serviceProperties.name":t.serviceProperties?.name,"itemProperties.title":t.itemProperties?.title},[o,a]=Object.entries(n).find((([e,t])=>void 0!==t))??[];if(void 0!==o){const e=function(e){return e.replace(/\s/g,"_")}(a);$i(t,o,e)}r=JSON.stringify(t)}return r}function Mc(e,t,r){const n={};return void 0!==e&&(void 0===e.resultType||void 0!==e.resultType&&["TILED_IMAGERY_LAYER","DYNAMIC_IMAGERY_LAYER","FEATURE_LAYER",Qs.FeatureLayer,Qs.FeatureService,Qs.ImageService].includes(e.resultType))&&(n.serviceProperties={name:t[r]}),void 0!==n.serviceProperties&&void 0!==e.resultType&&null!==e.resultType&&["TILED_IMAGERY_LAYER","DYNAMIC_IMAGERY_LAYER"].includes(e.resultType)&&(n.serviceProperties.capabilities="TILED_IMAGERY_LAYER"===e.resultType?"Image, TilesOnly":"Image"),void 0!==e.itemProperties&&(n.itemProperties=e.itemProperties,void 0!==n.itemProperties&&(n.itemProperties.title=t[r],n.itemProperties.folderId=e.saveResultIn)),JSON.stringify(n)}function Gc(e,t){let r;const n=e.serializationType;if(void 0!==n){const o=new Rc[n],a=o.prepare(t,e),i=o.serialize(a);r=o.postProcess(i,e)}return r}cc((async e=>{const{url:t}=e,r=`${t}/sharing/rest/community/self`,n=A.default.findCredential(r);let o;void 0!==n&&(o=n.token);const a={query:{returnUserLicensedItems:!0,token:o,f:"json"}};try{const{data:{userLicensedItems:e}}=await Di(r,a);return[...e.map((({entitlements:e})=>e))].flat()}catch(e){await pc(Wi.NetworkError)}return[]}),{serializer:e=>`${e.user.username}`}),cc((async e=>{let t={isMultidimensional:!1};const r="imagery-tile"===e.type?e.rasterInfo.multidimensionalInfo:e.multidimensionalInfo,n=e.multidimensionalSubset;if(null!=r){const o=null!=n?e.getMultidimensionalSubsetVariables():r.variables;if(void 0!==o&&o.length>0){const e=[],r=[],n={},a={},i={},s={},c={},l={},u={};o.forEach(((t,o)=>{let i="";const f=t.name;t.dimensions.forEach(((t,r)=>{const p=t.name;-1===e.indexOf(p)&&e.push(p);const d=r>0?`,${p}=${t.values?.length}`:`${p}=${t.values?.length}`;if(i=i.concat(d),0===r&&(a[f]={}),void 0===n[p]&&(n[p]=[]),a[f][p]=t.values,0===o){const e=t.values;if(void 0!==e)if("StdTime"!==p||void 0!==t.unit&&"ISO8601"!==t.unit)Array.isArray(e)&&"number"==typeof e[0]?s[p]=c[p]=e.map(String):Array.isArray(e[0])&&Array.isArray(e[1])&&(s[p]=e[0].map(String),c[p]=e[1].map(String));else{const t=[],r=[],n={},o={};e.forEach((e=>{if("number"==typeof e){const a=new Date(e),i=a.toLocaleString(),s=a.toISOString();t.push(s),r.push(s),n[s]=i,o[s]=i}else if(Array.isArray(e)){const a=new Date(e[0]),i=new Date(e[1]),s=a.toISOString(),c=i.toISOString();t.push(s),r.push(c),n[s]=a.toLocaleString(),o[c]=i.toLocaleString()}})),s[p]=t,c[p]=r,l[p]=n,u[p]=o}}n[p].push(f)})),r.push({name:f,alias:`${f}[${i}](${t.description})`,type:"string"})}));for(const e in n){const t=r.filter((t=>n[e].indexOf(t.name)>-1));i[e]={id:"1",name:e,description:"DimensionVariables",getFields:()=>Promise.resolve(t)}}t={isMultidimensional:!0,dimensions:e,dimensionVariableDatasets:i,dimensionValues:a,variablesDataset:{id:"1",name:"Variables",description:"Variables",getFields:()=>Promise.resolve(r)},dimensionMinValues:s,dimensionMaxValues:c,dimensionMinValuesWithLabels:l,dimensionMaxValuesWithLabels:u}}}const o="imagery"===e.type?await e.generateRasterInfo(e.renderingRule):e.rasterInfo;return t.rasterInfo=o,t}));const Vc=async e=>{const{asyncGeocodeUrl:t}=e,r=await F.submitJob(`${t}/AnalyzeGeocodeInput`,{...di(e,"asyncGeocodeUrl"),f:"json"});try{return await r.waitForJobCompletion(),(await r.fetchResultData("geocodeParameters")).value}catch(e){throw console.error("AnalyzeGeocodeInput failed"),e}};cc(((e,t)=>new L.default({id:e,portal:t})),{serializer:e=>`${e[0]}-${e[1]?.url}`}),cc((async e=>{const{restUrl:t}=e,r=`${t}/portals/helpmap`;let n;try{const e=await E.default(r,{query:{f:"json"},responseType:"json",method:"auto"});n=await(e.data?.helpMap)??void 0}catch(e){n=void 0}return n}),{serializer:e=>`${e[0]}-${e[1]?.url}`}),t.DEFAULT_CREDIT_ERROR_KEY="creditsDefault",t.DEFAULT_ERROR_KEY="default",t.ErrorKeywords=Wi,t.H=Ke,t.Host=Z,t.PortalDeploymentType={Enterprise:"ArcGISEnterprise",Kubernetes:"ArcGISEnterpriseOnKubernetes"},t.SupportedLocales=Mi,t.UIDefaults={DebounceTimer:400,HelpDebounceTimer:1500,PopoverTimer:60,Scale:"s"},t.UIInputStatus={IDLE:"idle",VALID:"valid",INVALID:"invalid"},t.ValidityState=wc,t.calculateParameterValues=function(e){const t={...e};for(const e in t)"CALCULATE_CURRENT_TIME"===t[e]&&(t[e]=(new Date).getTime());return t},t.convertErrorToAnalysisValidationParams=Sc,t.convertJobParamsToToolData=async function(e){const{jobParams:t,uiOnlyParams:r,toolName:n,availableMapLayers:o,toolJSON:a,isWebTool:i}=e,s={},c={toolAppErrorState:[],parameterErrorState:{}};let l=[];const u=r?.[qs];let f=t;"ChooseBestFacilities"===n&&(f={...t,...r});for(const e in f){const t=f[e],n=An(u,[e,"submissionName"]);let p=a?.parameters?.find((t=>t.name===e||t.name===n));const d=r[`${e}_ParamGroupDataType`]??p?.dataType;if(i&&"context"===e&&void 0===p&&(p={name:"context",dataType:"GPString",direction:"esriGPParameterDirectionInput"}),null!=t&&void 0!==p)switch(d){case"GPString":if("context"===e){s[e]=zi(t)?void 0:t;continue}if(!Array.isArray(t)){if("object"!=typeof t||Array.isArray(t))if("string"==typeof t&&(t.includes("serviceProperties")||t.includes("itemProperties"))){const r=JSON.parse(t);s[e]=r?.serviceProperties?.name??r.itemProperties?.title??void 0}else s[e]=String(t);else if("model"===e||"modelArguments"===e)s[e]=t;else{const r=t,{existingLayers:n,layersToAdd:a,errors:i}=await Pc([r],o),u=Zs(e);i.length>0&&(c.parameterErrorState[e]=_c(i)),s[e]=r,s[u]=[...n,...a],l=l.concat(a)}break}p.dataType="GPMultiValue:GPString";case"GPMultiValue:GPString":const r=Array.isArray(t)?t:[t];if(r.every((e=>"object"==typeof e))){const t=r,{existingLayers:n,layersToAdd:a,errors:i}=await Pc(t,o),u=Zs(e);i.length>0&&(c.parameterErrorState[e]=_c(i)),s[e]=t,s[u]=[...n,...a],l=l.concat(a)}else s[e]=r.map((e=>String(e)));break;case"GPFeatureRecordSetLayer":case"GPRecordSet":case"GPMultiValue:GPFeatureRecordSetLayer":case"GPMultiValue:GPRecordSet":{const r=t,{existingLayers:n,layersToAdd:a,errors:i}=await Pc(Array.isArray(r)?r:[r],o),u=Zs(e);i.length>0&&(c.parameterErrorState[e]=_c(i)),s[e]=r,s[u]=[...n,...a],l=l.concat(a)}break;default:s[e]=t}}return{convertedJobParams:s,layers:l,resultingErrorState:c}},t.createEvent=(e,t,r)=>{const n=e;return{emit:e=>((e,t,r)=>{const n=We.ce(t,r);return e.dispatchEvent(n),n})(n,t,{bubbles:!!(4&r),composed:!!(2&r),cancelable:!!(1&r),detail:e})}},t.fetchComponentLocaleStrings=async function(e,t){const r=e.tagName.toLowerCase(),{locale:n,rtl:o}=Bi(e);return{strings:await async function(e){const{path:t,locale:r,baseURL:n}=e;let o={};try{const e=await fetch(`${n}t9n/${t}.t9n.${r}.json`);o=await e.json()}catch(e){const r=await fetch(`${n}t9n/${t}.t9n.${Mi.English}.json`);o=await r.json()}return o}({path:r,locale:n,baseURL:t}),dir:!0===o?"rtl":"ltr",locale:n}},t.forceUpdate=e=>{{const t=ze(e),r=t.$hostElement$.isConnected;return r&&2==(18&t.$flags$)&&Pe(t,!1),r}},t.formatAnalysisEngineSuffix=Fc,t.formatLearnMoreHelpUrl=function(e){const{locale:t="en",portalUrl:r,url:n}=e;let{basePath:o}=e;"en-US"===t&&(o=o.replace("/en-US/","/en/"));const a=t.toLocaleLowerCase();return!0===Ji.includes(a)&&(o=o.replace(/^https?:\/\/[^/]+\/en/,(e=>e.replace("en",a)))),void 0!==r?function(e,t){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const r=window.location.href,n=new URL(r).origin,o=new URL(t).origin;n!==o&&(e=`${o}${e}`)}return e}(`${o}${n}`,r):`${o}${n}`},t.formatMessage=function(e,t){return function(e,t,r){var n=Ei.imports._.templateSettings||Ei;r&&wr(e,t,r)&&(t=void 0),e=_n(e),t=nn({},t,n,Si);var o,a,i=nn({},t.imports,n.imports,Si),s=qr(i),c=function(e,t){return gt(t,(function(t){return e[t]}))}(i,s),l=0,u=t.interpolate||Li,f="__p += '",p=RegExp((t.escape||Li).source+"|"+u.source+"|"+(u===Oi?Ni:Li).source+"|"+(t.evaluate||Li).source+"|$","g"),d=Ri.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(p,(function(t,r,n,i,s,c){return n||(n=i),f+=e.slice(l,c).replace(xi,Pi),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),f+="';\n";var y=Ri.call(t,"variable")&&t.variable;if(y){if(ki.test(y))throw new Error("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(Ti,""):f).replace(Ai,"$1").replace(Ii,"$1;"),f="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Hn((function(){return Function(s,d+"return "+f).apply(void 0,c)}));if(m.source=f,Kn(m))throw m;return m}(e)(t)},t.formatNumberToLocale=function(e,t){let r="";if(!zi(e)&&!Number.isNaN(e)){const n=Bi().formatLocale;r=Intl.NumberFormat(n,t).format(Number(e))}return r},t.getAnalysisLayers=async function(e,t){const r=[],n=[];let o=[];e.forEach((e=>{!0===function(e){return"map-notes"===e.type}(e)?r.push(e):function(e){return"map-image"===e.type}(e)?n.push(e):o.push(e)}));const a=[];if(r.length>0){const e=await Promise.allSettled(r.map((e=>async function(e,t){await e.beforeSave();const r=e.toJSON({origin:"web-map"}).featureCollection.layers.filter((e=>e.featureSet.features.length>0&&"Text"!==e.layerDefinition.name)).map((async r=>{const n=hc(r),o=function(e,t){let r;switch(e.geometryType){case"point":r=t.toolInfoKeys.points;break;case"polygon":r=t.toolInfoKeys.polygons;break;case"polyline":r=t.toolInfoKeys.lines}return r}(n,t),a=dc(e);return n.title=void 0!==o?`${a} (${o})`:a,await n.load(),n}));return await Promise.all(r)}(e,t)))),n=e.filter((e=>"fulfilled"===e.status)).map((e=>e.value));a.push(...n.flat())}if(n.length>0){const e=(await Promise.allSettled(n.map((e=>async function(e){const t=e.allSublayers.map((async e=>{const t=await e.createFeatureLayer();return await t.load(),t.title=dc(e),t}));return await Promise.all(t)}(e))))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));a.push(...e.flat())}const i=await Promise.allSettled(o.map((e=>e.loaded?Promise.resolve(e):e.load())));return o=i.filter((e=>"fulfilled"===e.status)).map((e=>e.value)),[...o,...a]},t.getAssetPath=e=>{const t=new URL(e,We.$resourcesUrl$);return t.origin!==Je.location.origin?t.href:t.pathname},t.getFeatureCollectionValueForStorage=function(e){return void 0!==e.layerDefinition.name?{layerDefinition:{name:e.layerDefinition.name??""},featureSet:{}}:void 0},t.getGPFeatureRecordSetLayerValue=function(e,t){let r;if(!1===zi(e.url)){const n=A.default.findCredential(e.url);if(r={url:`${e.url}/${e.layerId??0}`},void 0!==n&&(r.serviceToken=n.token),!1===zi(e.definitionExpression)&&(r.filter=e.definitionExpression),!1===zi(e.sourceJSON?.serviceItemId)&&(r.itemId=e.sourceJSON?.serviceItemId),!1===zi(e.timeInfo)&&!0===e.useViewTime&&!1===zi(t?.timeExtent)){let e="";void 0!==t?.timeExtent.start?(e+=t?.timeExtent.start.getTime(),void 0!==t?.timeExtent.end&&(e+=`, ${t?.timeExtent.end.getTime()}`)):void 0!==t?.timeExtent.end&&(e+=t?.timeExtent.end.getTime()),e.length>0&&(r.time=e)}}else void 0!==e.source&&(r=function(e){const t=e.source.toArray(),r=t.map((e=>e.toJSON())),n=t[0].geometry,o={layerDefinition:{id:e.id,drawingInfo:{renderer:e.renderer.toJSON()},name:e.title},featureSet:{features:r},nextObjectId:t.length,showLegend:!0};return zi(e.objectIdField)||(o.layerDefinition.objectIdField=e.objectIdField),zi(n)||(o.layerDefinition.geometryType=k.getJsonType(n)),zi(e.spatialReference)||(o.layerDefinition.spatialReference=e.spatialReference.toJSON()),zi(e.fields)||(o.layerDefinition.fields=e?.fields.map((e=>{const t=e.toJSON();return"esriFieldTypeOID"===t.type&&-1===t.length&&delete t.length,"esriFieldTypeString"===t.type&&-1===t.length&&(t.length=255),t}))),zi(e.types)||(o.layerDefinition.types=e.types.map((e=>e.toJSON()))),zi(e.typeIdField)||(o.layerDefinition.typeIdField=e.typeIdField),zi(e.popupTemplate)||(o.popupInfo=e.popupTemplate.toJSON()),o}(e));return r},t.getHelpBaseUrl=function(e){return e?.sourceJSON.helpBase??""},t.getImageryLayerValue=function(e){let t;if(!1===zi(e.url)){let r=e.url;r&&r.indexOf("?token=")>0&&(r=r.slice(0,r.indexOf("?token=")));const n=A.default.findCredential(e.url);if(t={url:`${r}`},void 0!==n&&(t={url:`${r}?token=${n.token}`}),yc(e)&&void 0!==e.renderingRule&&null!==e.renderingRule&&(t.renderingRule=e.renderingRule.toJSON()),yc(e)&&void 0!==e.definitionExpression&&null!==e.definitionExpression){let r=e.mosaicRule??__esri.MosaicRule.fromJSON(e.sourceJSON);null!=r&&(r=r.clone(),r.where=e.definitionExpression,t.mosaicRule=r.toJSON())}else yc(e)&&void 0!==e.mosaicRule&&null!==e.mosaicRule&&(t.mosaicRule=e.mosaicRule.toJSON())}return t},t.getJobParams=function(e,t){const{parameters:r}=e,n=r?.filter((e=>e.direction!==Ys))?.map((e=>e.name));let o=gi(t,n);return o=Fi(o),o},t.getLayerObject=async function(e){let t;return"object"==typeof e&&"itemId"in e&&!1===zi(e.itemId)?t=await gc(e.itemId):"object"==typeof e&&"url"in e&&!1===zi(e.url)&&(t=await vc(e.url)),void 0!==t&&(t=await $c(t)),t},t.getLocaleInfo=Bi,t.getRenderingRef=()=>K,t.getResultParams=function(e){const{parameters:t}=e,r=t?.filter((e=>e.direction===Ys)).map((e=>e.name));return r??[]},t.getToolJSONs=zc,t.getUIOnlyParams=function(e){const{toolData:t,keysToRemove:r}=e,n=e.isWebTool??!1,o=e.partialKeysToRemove??[],{ExcludedUIOnlyParamKeys:a,ExcludedUIOnlyParamPartialKeys:i,AlwaysIncludedUIOnlyParamKeys:s}=Uc,c={};if(!n)for(const e of s)c[e]=t[e];const l=[...a,...r],u=[...i,...o],f=[...l,...Object.keys(t).filter((e=>u.some((t=>e.includes(t)))))],p=di(t,f);return Object.keys(p).forEach((e=>{zi(p[e])&&delete p[e]})),{...p,...c}},t.getValidityStatus=function(e){return e.every((({valid:e})=>e))?wc.Valid:wc.Error},t.getWebToolUIJson=async function(e,t,r){let n;try{n=await r(t)}catch{throw new Error(`Failed to fetch asset from path: "${t}"`)}const o={},a=n.webToolsUnits,i=[],s=[];let c;for(const t of e.parameters??[])if("esriGPParameterDirectionInput"===t.direction){const e={name:t.name,label:t.displayName??t.name};"esri_out_feature_service_name"===t.name&&"GPString"===t.dataType?c={componentName:"analysis-block",label:n.resultLayerGroupLabel,summaryText:n.resultLayerGroupText,UIparameters:[e]}:("GPFeatureRecordSetLayer"===t.dataType||"GPRecordSet"===t.dataType?o[t.name]=t:(i.push(t),"GPLinearUnit"===t.dataType?(e.choiceList=Object.keys(a),e.choiceListLabels=a):"GPMultiValue:GPLinearUnit"===t.dataType&&(e.UIparameterInfos=[{name:"",choiceList:Object.keys(a),choiceListLabels:a}])),s.push(e))}const l={toolName:e.name,version:"0.1.0",UIparameters:[]};zi(s)||l.UIparameters.push({componentName:"analysis-block",UIparameters:s}),void 0!==c&&l.UIparameters.push(c);for(const e of i){let t;void 0!==e.dependency&&(t=o[e.dependency]),"Field"!==e.dataType&&"GPMultiValue:Field"!==e.dataType||void 0===t||(void 0===l.rules&&(l.rules=[]),l.rules.push({ruleType:"expression",expression:`$[Data].${t.name} NOT null`,destination:e.name,effectParams:{mapLayer:`$[Component].${t.name}.selectedLayers`}}))}return l},t.h=Q,t.hasNAPrivilege=function(e){const t=e?.sourceJSON.privileges;return void 0!==t&&t.includes("premium:user:networkanalysis")},t.isEmptyDataItem=zi,t.isFeatureLayer=function(e){return"feature"===e.type},t.isImageryLayer=yc,t.isImageryTileLayer=function(e){return"imagery-tile"===e.type},t.isTravelModeUsedByTool=function(e){return["ChooseBestFacilities","ConnectOriginsToDestinations","CreateDriveTimeAreas","EnrichLayer","FindNearest","PlanRoutes","SummarizeNearby"].includes(e)},t.prepJobParamsForSubmission=function(e){const{jobParams:t,toolData:r,toolUIJson:n,toolName:o,toolJSON:a,isPortal:i=!1}=e;let s={...t};const c=Cc(n),l=a?.parameters?.filter((e=>e.direction!==Ys))?.map((e=>e.name)),u=function(e){let t=["outputName"];return!0===e?.includes("aboveGroundLevelOutputName")&&t.push("aboveGroundLevelOutputName"),!1===e?.includes("outputName")&&(t=e.filter((e=>e.toLowerCase().includes("output")))),t}(l);if("BatchGeocode"===o&&void 0!==r){const e=r.geocodeUIParameters,t=r.geocodeParameters,n="singleField"===r.singleOrMultiFieldSwitch,o=c.geocodeUIParameters.UIparameterInfos.map((e=>e.name));let a;a=n?o.reduce(((t,r)=>("SingleLine"===r?t.push([e[r]??"",r]):t.push([e[r]??"",""]),t)),[]):o.reduce(((t,r)=>("SingleLine"!==r&&t.push([e[r]??"",r]),t)),[]),t.field_mapping=JSON.stringify(a),s.geocodeParameters=t,zi(s.inputFileItem)||(s.inputFileItem={itemid:s.inputFileItem?.itemId})}for(const e in s){const n=c[e],o=s[e];if(zi(o))s[e]=void 0;else if("object"==typeof o&&void 0!==n?.serializationType)s[e]=Gc(n,o);else if("string"==typeof o&&u.includes(e)&&void 0!==r){const n=Mc(r,t,e);let o=n;try{o=Dc(n,i)}catch(e){}s[e]=o}}if("ChooseBestFacilities"===o){const e=r?.[qs];s=function({jobParams:e,UIOnlyParams:t,toolUIParamModel:r,useSubmissionName:n=!0}){const o={...e};if(!1===zi(r)){const a={};for(const[i,s]of Object.entries({...e,...t})){const e=void 0!==r?.[i],t=An(r,[i,"submissionName"]),c=e&&An(r,[i,"visible"],!0);if(void 0!==t&&!0===c){const e=!0===n?i:t;a[!0===n?t:i]=s,delete o[e]}else!1===e&&"context"!==i&&delete o[i]}Object.assign(o,a)}return o}({jobParams:s,UIOnlyParams:di(r,Object.keys(s)),toolUIParamModel:e})}return bi(s,zi)},t.proxyCustomElement=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[],!He&&1&r.$flags$&&(r.$flags$|=8);const n=e.prototype.connectedCallback,o=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){((e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};xe(e,r,t.$listeners$),Fe.set(e,r)})(this,r)},connectedCallback(){(e=>{if(0==(1&We.$flags$)){const t=ze(e),r=t.$cmpMeta$,n=(r.$tagName$,()=>{});1&t.$flags$?(xe(e,t,r.$listeners$),(null==t?void 0:t.$lazyInstance$)?t.$lazyInstance$:(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>{t.$lazyInstance$}))):(t.$flags$|=1,12&r.$flags$&&(e=>{const t=e["s-cr"]=Be.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),r.$members$&&Object.entries(r.$members$).map((([t,[r]])=>{if(31&r&&e.hasOwnProperty(t)){const r=e[t];delete e[t],e[t]=r}})),(async(e,t,r,n)=>{let o;if(0==(32&t.$flags$)&&(t.$flags$|=32,o=e.constructor,customElements.whenDefined(r.$tagName$).then((()=>t.$flags$|=128)),o.style)){let n=o.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>Ve.map((t=>t(e))).find((e=>!!e)))(e)]);const a=ae(r,t.$modeName$);if(!Ge.has(a)){const e=(r.$tagName$,()=>{});((e,t,r)=>{let n=Ge.get(e);qe&&r?(n=n||new CSSStyleSheet,"string"==typeof n?n=t:n.replaceSync(t)):n=t,Ge.set(e,n)})(a,n,!!(1&r.$flags$)),e()}}t.$ancestorComponent$,Pe(t,!0)})(e,t,r)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(async e=>{if(0==(1&We.$flags$)){const t=ze(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),o&&o.call(this)},__attachShadow(){He?this.attachShadow({mode:"open",delegatesFocus:!!(16&r.$flags$)}):this.shadowRoot=this}}),e.is=r.$tagName$,Le(e,r)},t.sanitizeTokensFromJobParams=function e(t){for(const r of Object.keys(t)){let n=t[r];null!=n&&("string"==typeof n&&n.includes("http")?n=uc(n):Array.isArray(n)?n.forEach((e=>{"object"==typeof e&&"url"in e&&void 0!==e.url&&null!==e.url&&(e.url=uc(e.url),e.serviceToken=void 0)})):"object"==typeof n&&"url"in n&&void 0!==n.url&&null!==n.url?(n.url=uc(n.url),n.serviceToken=void 0):"context"===r&&"object"==typeof n&&e(n)),t[r]=n}return t},t.sanitizeUrl=uc,t.setAssetPath=e=>We.$resourcesUrl$=e,t.setNonce=e=>We.$nonce$=e,t.setPlatformOptions=e=>Object.assign(We,e),t.toCamelToolName=e=>`${e.charAt(0).toLowerCase()}${e.slice(1)}`,t.toPascalToolName=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`,t.updateToolErrorState=function(e,t,r=[]){const n={...e,toolAppErrorState:[]};var o,a;return[...t,...r].forEach((e=>{if(!1===e.valid){let t=[];"errorKeys"in e?t=e.errorKeys.map((e=>Sc({errorKey:e}))):"errorStrings"in e&&(t=e.errorStrings.map((e=>Sc({message:e})))),n.toolAppErrorState.push(...t)}})),n.toolAppErrorState=(a="function"==typeof(a=ci)?a:void 0,(o=n.toolAppErrorState)&&o.length?Ci(o,void 0,a):[]),n}}));