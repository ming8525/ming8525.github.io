define(["exports","./analysis-tool-settings2-598af182","./store-f16d23c6","./index2-0f07feca","./shared-components-e09cc192","./analysis-tool-context-b1931181","./popover-utils-2688c7fd"],(function(t,e,n,r,a,o,i){"use strict";var s,c,l,u=Date.now,f=n.defineProperty?function(t,e){return n.defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t},d=(s=f,c=0,l=0,function(){var t=u(),e=16-(t-l);if(l=t,e>0){if(++c>=800)return arguments[0]}else c=0;return s.apply(void 0,arguments)}),p=Math.max;function v(t,e){for(var r=0,a=(e=n.castPath(e,t)).length;null!=t&&r<a;)t=t[n.toKey(e[r++])];return r&&r==a?t:void 0}var h=n.Symbol?n.Symbol.isConcatSpreadable:void 0;function y(t){return n.isArray(t)||e.isArguments(t)||!!(h&&t&&t[h])}function g(t,n,r,a,o){var i=-1,s=t.length;for(r||(r=y),o||(o=[]);++i<s;){var c=t[i];n>0&&r(c)?n>1?g(c,n-1,r,a,o):e.arrayPush(o,c):a||(o[o.length]=c)}return o}function b(t){return null!=t&&t.length?g(t,1):[]}function m(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n.MapCache;++e<r;)this.add(t[e])}function S(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}m.prototype.add=m.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},m.prototype.has=function(t){return this.__data__.has(t)};var O=1,x=2;function E(t,e,n,r,a,o){var i=n&O,s=t.length,c=e.length;if(s!=c&&!(i&&c>s))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var f=-1,d=!0,p=n&x?new m:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var v=t[f],h=e[f];if(r)var y=i?r(h,v,f,e,t,o):r(v,h,f,t,e,o);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!S(e,(function(t,e){if(i=e,!p.has(i)&&(v===t||a(v,t,n,r,o)))return p.push(e);var i}))){d=!1;break}}else if(v!==h&&!a(v,h,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function _(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function A(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var C=1,j=2,w="[object Boolean]",k="[object Date]",L="[object Error]",R="[object Map]",P="[object Number]",D="[object RegExp]",I="[object Set]",K="[object String]",M="[object Symbol]",T="[object ArrayBuffer]",B="[object DataView]",z=n.Symbol?n.Symbol.prototype:void 0,q=z?z.valueOf:void 0,F=1,U=Object.prototype.hasOwnProperty,$=1,H="[object Arguments]",N="[object Array]",V="[object Object]",G=Object.prototype.hasOwnProperty;function J(t,r,a,o,i){return t===r||(null==t||null==r||!n.isObjectLike(t)&&!n.isObjectLike(r)?t!=t&&r!=r:function(t,r,a,o,i,s){var c=n.isArray(t),l=n.isArray(r),u=c?N:e.getTag$1(t),f=l?N:e.getTag$1(r),d=(u=u==H?V:u)==V,p=(f=f==H?V:f)==V,v=u==f;if(v&&e.isBuffer(t)){if(!e.isBuffer(r))return!1;c=!0,d=!1}if(v&&!d)return s||(s=new e.Stack),c||e.isTypedArray(t)?E(t,r,a,o,i,s):function(t,r,a,o,i,s,c){switch(a){case B:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case T:return!(t.byteLength!=r.byteLength||!s(new e.Uint8Array(t),new e.Uint8Array(r)));case w:case k:case P:return n.eq(+t,+r);case L:return t.name==r.name&&t.message==r.message;case D:case K:return t==r+"";case R:var l=_;case I:var u=o&C;if(l||(l=A),t.size!=r.size&&!u)return!1;var f=c.get(t);if(f)return f==r;o|=j,c.set(t,r);var d=E(l(t),l(r),o,i,s,c);return c.delete(t),d;case M:if(q)return q.call(t)==q.call(r)}return!1}(t,r,u,a,o,i,s);if(!(a&$)){var h=d&&G.call(t,"__wrapped__"),y=p&&G.call(r,"__wrapped__");if(h||y){var g=h?t.value():t,b=y?r.value():r;return s||(s=new e.Stack),i(g,b,a,o,s)}}return!!v&&(s||(s=new e.Stack),function(t,n,r,a,o,i){var s=r&F,c=e.getAllKeys(t),l=c.length;if(l!=e.getAllKeys(n).length&&!s)return!1;for(var u=l;u--;){var f=c[u];if(!(s?f in n:U.call(n,f)))return!1}var d=i.get(t),p=i.get(n);if(d&&p)return d==n&&p==t;var v=!0;i.set(t,n),i.set(n,t);for(var h=s;++u<l;){var y=t[f=c[u]],g=n[f];if(a)var b=s?a(g,y,f,n,t,i):a(y,g,f,t,n,i);if(!(void 0===b?y===g||o(y,g,r,a,i):b)){v=!1;break}h||(h="constructor"==f)}if(v&&!h){var m=t.constructor,S=n.constructor;m==S||!("constructor"in t)||!("constructor"in n)||"function"==typeof m&&m instanceof m&&"function"==typeof S&&S instanceof S||(v=!1)}return i.delete(t),i.delete(n),v}(t,r,a,o,i,s))}(t,r,a,o,J,i))}function Q(t,e){return null!=t&&e in Object(t)}function W(t,r){return function(t,e,r){for(var a=-1,o=e.length,i={};++a<o;){var s=e[a],c=v(t,s);r(0,s)&&n.baseSet(i,n.castPath(s,t),c)}return i}(t,r,(function(r,a){return function(t,r){return null!=t&&function(t,r,a){for(var o=-1,i=(r=n.castPath(r,t)).length,s=!1;++o<i;){var c=n.toKey(r[o]);if(!(s=null!=t&&a(t,c)))break;t=t[c]}return s||++o!=i?s:!!(i=null==t?0:t.length)&&e.isLength(i)&&n.isIndex(c,i)&&(n.isArray(t)||e.isArguments(t))}(t,r,Q)}(t,a)}))}var X=function(t){return d(function(t,e,n){return e=p(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=p(r.length-e,0),i=Array(o);++a<o;)i[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(i),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,void 0,b),t+"")}((function(t,e){return null==t?{}:W(t,e)}));const Y={modal:{width:"s",kind:"warning"},buttonPrimary:{slot:"primary"},buttonSecondary:{slot:"secondary",appearance:"outline"},header:{slot:"header",style:"\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n    "},headerIcon:{icon:"exclamation-mark-triangle-f",style:"\n      margin: 0 1rem;\n      --calcite-ui-icon-color: var(--calcite-color-status-warning);\n    "},content:{slot:"content"}},Z=(t,e,n)=>{const r=document.createElement(t);var a,o;return a=r,o=n,Object.keys(o).forEach((t=>{a.setAttribute(t,o[t])})),r.innerText=e,r};t.cloneDeep=function(t){return e.baseClone(t,5)},t.createCreditThresholdModalElement=function(t,e){const{modal:n,buttonPrimary:r,buttonSecondary:a,header:o,headerIcon:s,content:c}=Y,{continueRun:l,cancelRun:u,thresholdExceeded:f,creditEstimate:d,creditThreshold:p,confirmationPrompt:v,learnMore:h,heading:y}=t,g=Z("calcite-modal","",n),b=Z("div","",o),m=Z("div",y,{}),S=Z("calcite-icon","",s);b.appendChild(S),b.appendChild(m);const O=Z("calcite-button",l,r),x=Z("calcite-button",u,a),E=Z("div","",c);E.appendChild(Z("p",f,{})),E.appendChild(Z("p",d+"\n"+p,{})),E.appendChild(Z("p",v,{}));const _=Z("calcite-link",h,{href:e,target:"_blank"});E.appendChild(_),g.appendChild(b),g.appendChild(E),g.appendChild(O),g.appendChild(x);const A=new Promise((t=>{const e=n=>{let r=!1;r=n.target.getAttribute("slot")===Y.buttonPrimary.slot,g.removeEventListener("calciteModalClose",e),O.removeEventListener("click",e),x.removeEventListener("click",e),g.open=!1,i.removeOpenableDomElement(g),t(r)};g.addEventListener("calciteModalClose",e),O.addEventListener("click",e),x.addEventListener("click",e)}));return{modalElement:g,modalResult:A}},t.isEqual=function(t,e){return J(t,e)},t.setContextFromHistory=function(t){r.isEmptyDataItem(t)?(n.state.context={},n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput,n.state.settingsSelectedExtentOption=a.ExtentOptions.Default):(r.isEmptyDataItem(t?.outSR)?n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput:n.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.BrowseCS,r.isEmptyDataItem(t?.extent)?n.state.settingsSelectedExtentOption=a.ExtentOptions.Default:n.state.settingsSelectedExtentOption=a.ExtentOptions.Coordinates,n.state.context=t??{})},t.setContextFromMapLevel=function(t,e,r){void 0!==r&&(n.state.mapLevelContext=r);const{settingsSelectedExtentOption:a,settingsSelectedOutSpatialRefOption:i,context:s}=n.state.mapLevelContext;void 0!==a&&(n.state.settingsSelectedExtentOption=a),void 0!==i&&(n.state.settingsSelectedOutSpatialRefOption=i);const c=t?.environmentSettings,l=[];void 0!==c?(void 0!==c.standard?l.push(...c.standard):l.push(...o.AnalysisStandardContextKeys),void 0!==c.raster?l.push(...c.raster):"raster"===e&&l.push(...o.AnalysisRasterContextKeys)):(l.push(...o.AnalysisStandardContextKeys),"raster"===e&&l.push(...o.AnalysisRasterContextKeys)),n.state.context=X(s??{},l)}}));