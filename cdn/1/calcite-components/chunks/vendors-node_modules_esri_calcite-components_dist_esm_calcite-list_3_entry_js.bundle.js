"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_esri_calcite-components_dist_esm_calcite-list_3_entry_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/esm/calcite-list_3.entry.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/calcite-list_3.entry.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calcite_list: () => (/* binding */ List),
/* harmony export */   calcite_list_item: () => (/* binding */ ListItem),
/* harmony export */   calcite_list_item_group: () => (/* binding */ ListItemGroup)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom-ed00a585.js */ "./node_modules/@esri/calcite-components/dist/esm/dom-ed00a585.js");
/* harmony import */ var _interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interactive-cbd8a6dc.js */ "./node_modules/@esri/calcite-components/dist/esm/interactive-cbd8a6dc.js");
/* harmony import */ var _observers_71d332db_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observers-71d332db.js */ "./node_modules/@esri/calcite-components/dist/esm/observers-71d332db.js");
/* harmony import */ var _sortableComponent_42b85f87_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sortableComponent-42b85f87.js */ "./node_modules/@esri/calcite-components/dist/esm/sortableComponent-42b85f87.js");
/* harmony import */ var _resources_bd7a3f93_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources-bd7a3f93.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-bd7a3f93.js");
/* harmony import */ var _loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadable-b17396e0.js */ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js");
/* harmony import */ var _t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./t9n-0bcdca54.js */ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/* harmony import */ var _debounce_85958bb1_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./debounce-85958bb1.js */ "./node_modules/@esri/calcite-components/dist/esm/debounce-85958bb1.js");
/* harmony import */ var _guid_21fecfa4_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./guid-21fecfa4.js */ "./node_modules/@esri/calcite-components/dist/esm/guid-21fecfa4.js");
/* harmony import */ var _resources_cf82388c_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./resources-cf82388c.js */ "./node_modules/@esri/calcite-components/dist/esm/resources-cf82388c.js");
/* harmony import */ var _browser_ece29da7_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./browser-ece29da7.js */ "./node_modules/@esri/calcite-components/dist/esm/browser-ece29da7.js");
/* harmony import */ var _key_61f82ddb_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./key-61f82ddb.js */ "./node_modules/@esri/calcite-components/dist/esm/key-61f82ddb.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */















const CSS$2 = {
  container: "container",
  containerBorderSelected: "container--border-selected",
  containerBorderUnselected: "container--border-unselected",
  contentContainer: "content-container",
  contentContainerSelectable: "content-container--selectable",
  contentContainerHasCenterContent: "content-container--has-center-content",
  nestedContainer: "nested-container",
  nestedContainerHidden: "nested-container--hidden",
  content: "content",
  customContent: "custom-content",
  actionsStart: "actions-start",
  contentStart: "content-start",
  label: "label",
  description: "description",
  contentEnd: "content-end",
  contentBottom: "content-bottom",
  actionsEnd: "actions-end",
  selectionContainer: "selection-container",
  openContainer: "open-container",
  dragContainer: "drag-container",
};
const SLOTS$1 = {
  actionsStart: "actions-start",
  contentStart: "content-start",
  content: "content",
  contentBottom: "content-bottom",
  contentEnd: "content-end",
  actionsEnd: "actions-end",
};
// Set to zero to extend until the end of the table section.
const MAX_COLUMNS = 0;
const ICONS = {
  selectedMultiple: "check-circle-f",
  selectedSingle: "circle-f",
  unselected: "blank",
  closedLTR: "caret-right",
  closedRTL: "caret-left",
  open: "caret-down",
  blank: "blank",
  close: "x",
};

const listSelector$1 = "calcite-list";
const listItemGroupSelector = "calcite-list-item-group";
const listItemSelector$1 = "calcite-list-item";
function getListItemChildLists(slotEl) {
  return Array.from(slotEl.assignedElements({ flatten: true }).filter((el) => el.matches(listSelector$1)));
}
function getListItemChildren(slotEl) {
  const assignedElements = slotEl.assignedElements({ flatten: true });
  const listItemGroupChildren = assignedElements.filter((el) => el?.matches(listItemGroupSelector))
    .map((group) => Array.from(group.querySelectorAll(listItemSelector$1)))
    .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
  const listItemChildren = assignedElements.filter((el) => el?.matches(listItemSelector$1));
  const listItemListChildren = assignedElements.filter((el) => el?.matches(listSelector$1))
    .map((list) => Array.from(list.querySelectorAll(listItemSelector$1)))
    .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], []);
  return [...listItemListChildren, ...listItemGroupChildren, ...listItemChildren];
}
function updateListItemChildren(listItemChildren) {
  listItemChildren.forEach((listItem) => {
    listItem.setPosition = listItemChildren.indexOf(listItem) + 1;
    listItem.setSize = listItemChildren.length;
  });
}
function getDepth(element, includeGroup = false) {
  const expression = includeGroup
    ? "ancestor::calcite-list-item | ancestor::calcite-list-item-group"
    : "ancestor::calcite-list-item";
  const result = document.evaluate(expression, element, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);
  return result.snapshotLength;
}

const CSS$1 = {
  container: "container",
  table: "table",
  scrim: "scrim",
  stack: "stack",
  tableContainer: "table-container",
  sticky: "sticky-pos",
  assistiveText: "assistive-text",
};
const debounceTimeout = 0;
const SLOTS = {
  filterActionsStart: "filter-actions-start",
  filterActionsEnd: "filter-actions-end",
};

const listCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{position:relative}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%;border-collapse:collapse}.stack{--calcite-stack-padding-inline:0;--calcite-stack-padding-block:0}::slotted(calcite-list-item){--tw-shadow:0 -1px 0 var(--calcite-color-border-3);--tw-shadow-colored:0 -1px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);margin-block-start:1px}::slotted(calcite-list-item:first-of-type){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}::slotted(calcite-list-item[data-filter]){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);margin-block-start:0px}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-color-foreground-1)}.sticky-pos th{padding:0px}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}";

const listItemSelector = "calcite-list-item";
const listItemSelectorDirect = `:scope > calcite-list-item`;
const parentSelector = "calcite-list-item-group, calcite-list-item";
const List = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteListChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteListChange", 6);
    this.calciteListFilter = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteListFilter", 6);
    this.calciteListOrderChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteListOrderChange", 6);
    this.calciteInternalListDefaultSlotChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListDefaultSlotChange", 6);
    this.dragSelector = "calcite-list-item";
    this.enabledListItems = [];
    this.handleSelector = "calcite-handle";
    this.listItems = [];
    this.mutationObserver = (0,_observers_71d332db_js__WEBPACK_IMPORTED_MODULE_3__.c)("mutation", () => this.updateListItems());
    this.handleDefaultSlotChange = (event) => {
      updateListItemChildren(getListItemChildren(event.target));
      if (this.parentListEl) {
        this.calciteInternalListDefaultSlotChange.emit();
      }
    };
    this.handleFilterActionsStartSlotChange = (event) => {
      this.hasFilterActionsStart = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleFilterActionsEndSlotChange = (event) => {
      this.hasFilterActionsEnd = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.setActiveListItem = () => {
      const { enabledListItems } = this;
      if (!enabledListItems.some((item) => item.active)) {
        if (enabledListItems[0]) {
          enabledListItems[0].active = true;
        }
      }
    };
    this.updateSelectedItems = (emit = false) => {
      this.selectedItems = this.enabledListItems.filter((item) => item.selected);
      if (emit) {
        this.calciteListChange.emit();
      }
    };
    this.updateFilteredItems = (emit = false) => {
      const { listItems, filteredData, filterText } = this;
      const values = filteredData.map((item) => item.value);
      const lastDescendantItems = listItems?.filter((listItem) => listItems.every((li) => li === listItem || !listItem.contains(li)));
      const filteredItems = listItems.filter((item) => !filterText || values.includes(item.value)) || [];
      const visibleParents = new WeakSet();
      lastDescendantItems.forEach((listItem) => this.filterElements({ el: listItem, filteredItems, visibleParents }));
      if (filteredItems.length > 0) {
        this.findAncestorOfFirstFilteredItem(filteredItems);
      }
      this.filteredItems = filteredItems;
      if (emit) {
        this.calciteListFilter.emit();
      }
    };
    this.setFilterEl = (el) => {
      this.filterEl = el;
      this.performFilter();
    };
    this.handleFilterChange = (event) => {
      event.stopPropagation();
      const { value } = event.currentTarget;
      this.filterText = value;
      this.updateFilteredData(true);
    };
    this.getItemData = () => {
      return this.listItems.map((item) => ({
        label: item.label,
        description: item.description,
        metadata: item.metadata,
        value: item.value,
      }));
    };
    this.updateListItems = (0,_debounce_85958bb1_js__WEBPACK_IMPORTED_MODULE_9__.d)((emit = false) => {
      const { selectionAppearance, selectionMode, dragEnabled } = this;
      if (!!this.parentListEl) {
        const items = this.queryListItems(true);
        items.forEach((item) => {
          item.dragHandle = dragEnabled;
        });
        this.setUpSorting();
        return;
      }
      const items = this.queryListItems();
      items.forEach((item) => {
        item.selectionAppearance = selectionAppearance;
        item.selectionMode = selectionMode;
      });
      const dragItems = this.queryListItems(true);
      dragItems.forEach((item) => {
        item.dragHandle = dragEnabled;
      });
      this.listItems = items;
      if (this.filterEnabled) {
        this.dataForFilter = this.getItemData();
        if (this.filterEl) {
          this.filterEl.items = this.dataForFilter;
        }
      }
      this.updateFilteredItems(emit);
      this.enabledListItems = this.filteredItems.filter((item) => !item.disabled && !item.closed);
      this.setActiveListItem();
      this.updateSelectedItems(emit);
      this.setUpSorting();
    }, debounceTimeout);
    this.queryListItems = (direct = false) => {
      return Array.from(this.el.querySelectorAll(direct ? listItemSelectorDirect : listItemSelector));
    };
    this.focusRow = (focusEl) => {
      const { enabledListItems } = this;
      if (!focusEl) {
        return;
      }
      enabledListItems.forEach((listItem) => (listItem.active = listItem === focusEl));
      focusEl.setFocus();
    };
    this.isNavigable = (listItem) => {
      const parentListItemEl = listItem.parentElement?.closest(listItemSelector);
      if (!parentListItemEl) {
        return true;
      }
      return parentListItemEl.open && this.isNavigable(parentListItemEl);
    };
    this.handleListKeydown = (event) => {
      if (event.defaultPrevented || !!this.parentListEl) {
        return;
      }
      const { key } = event;
      const filteredItems = this.enabledListItems.filter((listItem) => this.isNavigable(listItem));
      const currentIndex = filteredItems.findIndex((listItem) => listItem.active);
      if (key === "ArrowDown") {
        event.preventDefault();
        const nextIndex = event.target === this.filterEl ? 0 : currentIndex + 1;
        if (filteredItems[nextIndex]) {
          this.focusRow(filteredItems[nextIndex]);
        }
      }
      else if (key === "ArrowUp") {
        event.preventDefault();
        if (currentIndex === 0 && this.filterEnabled) {
          this.filterEl?.setFocus();
          return;
        }
        const prevIndex = currentIndex - 1;
        if (filteredItems[prevIndex]) {
          this.focusRow(filteredItems[prevIndex]);
        }
      }
      else if (key === "Home") {
        event.preventDefault();
        const homeItem = filteredItems[0];
        if (homeItem) {
          this.focusRow(homeItem);
        }
      }
      else if (key === "End") {
        event.preventDefault();
        const endItem = filteredItems[filteredItems.length - 1];
        if (endItem) {
          this.focusRow(endItem);
        }
      }
    };
    this.findAncestorOfFirstFilteredItem = (filteredItems) => {
      this.ancestorOfFirstFilteredItem?.removeAttribute("data-filter");
      filteredItems.forEach((item) => {
        item.removeAttribute("data-filter");
      });
      this.ancestorOfFirstFilteredItem = this.getTopLevelAncestorItemElement(filteredItems[0]);
      filteredItems[0].setAttribute("data-filter", "0");
      this.ancestorOfFirstFilteredItem?.setAttribute("data-filter", "0");
    };
    this.getTopLevelAncestorItemElement = (el) => {
      let closestParent = el.parentElement.closest("calcite-list-item");
      while (closestParent) {
        const closestListItemAncestor = closestParent.parentElement.closest("calcite-list-item");
        if (closestListItemAncestor) {
          closestParent = closestListItemAncestor;
        }
        else {
          return closestParent;
        }
      }
      return null;
    };
    this.disabled = false;
    this.canPull = undefined;
    this.canPut = undefined;
    this.dragEnabled = false;
    this.group = undefined;
    this.filterEnabled = false;
    this.filteredItems = [];
    this.filteredData = [];
    this.filterPlaceholder = undefined;
    this.filterText = undefined;
    this.label = undefined;
    this.loading = false;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.numberingSystem = undefined;
    this.openable = false;
    this.selectedItems = [];
    this.selectionMode = "none";
    this.selectionAppearance = "icon";
    this.effectiveLocale = "";
    this.defaultMessages = undefined;
    this.assistiveText = undefined;
    this.dataForFilter = [];
    this.hasFilterActionsEnd = false;
    this.hasFilterActionsStart = false;
  }
  async handleFilterTextChange() {
    this.performFilter();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  handleListItemChange() {
    this.updateListItems();
  }
  handleCalciteInternalFocusPreviousItem(event) {
    if (this.parentListEl) {
      return;
    }
    event.stopPropagation();
    const { enabledListItems } = this;
    const currentIndex = enabledListItems.findIndex((listItem) => listItem.active);
    const prevIndex = currentIndex - 1;
    if (enabledListItems[prevIndex]) {
      this.focusRow(enabledListItems[prevIndex]);
    }
  }
  handleCalciteInternalListItemActive(event) {
    if (!!this.parentListEl) {
      return;
    }
    event.stopPropagation();
    const target = event.target;
    const { listItems } = this;
    listItems.forEach((listItem) => {
      listItem.active = listItem === target;
    });
  }
  handleCalciteListItemSelect() {
    if (!!this.parentListEl) {
      return;
    }
    this.updateSelectedItems(true);
  }
  handleCalciteInternalHandleChange(event) {
    this.assistiveText = event.detail.message;
    event.stopPropagation();
  }
  handleCalciteHandleNudge(event) {
    if (!!this.parentListEl) {
      return;
    }
    this.handleNudgeEvent(event);
  }
  handleCalciteInternalListItemSelect(event) {
    if (!!this.parentListEl) {
      return;
    }
    event.stopPropagation();
    const target = event.target;
    const { listItems, selectionMode } = this;
    if (target.selected && (selectionMode === "single" || selectionMode === "single-persist")) {
      listItems.forEach((listItem) => (listItem.selected = listItem === target));
    }
    this.updateSelectedItems();
  }
  handleCalciteInternalListItemSelectMultiple(event) {
    if (!!this.parentListEl) {
      return;
    }
    event.stopPropagation();
    const { target, detail } = event;
    const { enabledListItems, lastSelectedInfo } = this;
    const selectedItem = target;
    if (detail.selectMultiple && !!lastSelectedInfo) {
      const currentIndex = enabledListItems.indexOf(selectedItem);
      const lastSelectedIndex = enabledListItems.indexOf(lastSelectedInfo.selectedItem);
      const startIndex = Math.min(lastSelectedIndex, currentIndex);
      const endIndex = Math.max(lastSelectedIndex, currentIndex);
      enabledListItems
        .slice(startIndex, endIndex + 1)
        .forEach((item) => (item.selected = lastSelectedInfo.selected));
    }
    else {
      this.lastSelectedInfo = { selectedItem, selected: selectedItem.selected };
    }
  }
  handleCalciteInternalListItemChange(event) {
    if (!!this.parentListEl) {
      return;
    }
    event.stopPropagation();
    this.updateListItems();
  }
  handleCalciteInternalListItemGroupDefaultSlotChange(event) {
    event.stopPropagation();
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    if ((0,_sortableComponent_42b85f87_js__WEBPACK_IMPORTED_MODULE_4__.d)(this)) {
      return;
    }
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    this.connectObserver();
    this.updateListItems();
    this.setUpSorting();
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    this.setParentList();
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.s)(this);
  }
  componentDidRender() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
  }
  disconnectedCallback() {
    if ((0,_sortableComponent_42b85f87_js__WEBPACK_IMPORTED_MODULE_4__.d)(this)) {
      return;
    }
    this.disconnectObserver();
    (0,_sortableComponent_42b85f87_js__WEBPACK_IMPORTED_MODULE_4__.a)(this);
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /**
   * Sets focus on the component's first focusable element.
   *
   * @returns {Promise<void>}
   */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    if (this.filterEnabled) {
      return this.filterEl?.setFocus();
    }
    return this.enabledListItems.find((listItem) => listItem.active)?.setFocus();
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const { loading, label, disabled, dataForFilter, filterEnabled, filterPlaceholder, filterText, hasFilterActionsStart, hasFilterActionsEnd, } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$1.container }, this.dragEnabled ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("span", { "aria-live": "assertive", class: CSS$1.assistiveText }, this.assistiveText)) : null, this.renderItemAriaLive(), loading ? (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-scrim", { class: CSS$1.scrim, loading: loading }) : null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("table", { "aria-busy": (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.t)(loading), "aria-label": label || "", class: CSS$1.table, onKeyDown: this.handleListKeydown, role: "treegrid" }, filterEnabled || hasFilterActionsStart || hasFilterActionsEnd ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("thead", null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tr", { class: { [CSS$1.sticky]: true } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("th", { colSpan: MAX_COLUMNS }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-stack", { class: CSS$1.stack }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.filterActionsStart, onSlotchange: this.handleFilterActionsStartSlotChange, slot: _resources_bd7a3f93_js__WEBPACK_IMPORTED_MODULE_5__.S.actionsStart }), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-filter", { "aria-label": filterPlaceholder, disabled: disabled, items: dataForFilter, onCalciteFilterChange: this.handleFilterChange, placeholder: filterPlaceholder, value: filterText,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setFilterEl }), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS.filterActionsEnd, onSlotchange: this.handleFilterActionsEndSlotChange, slot: _resources_bd7a3f93_js__WEBPACK_IMPORTED_MODULE_5__.S.actionsEnd })))))) : null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tbody", { class: CSS$1.tableContainer }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange })))));
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  renderItemAriaLive() {
    const { messages, enabledListItems, parentListEl, effectiveLocale, numberingSystem, filterEnabled, filterText, filteredData, } = this;
    _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_8__.n.numberFormatOptions = {
      locale: effectiveLocale,
      numberingSystem,
    };
    return !parentListEl ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-live": "polite", class: CSS$1.assistiveText }, filterEnabled && filterText && filteredData?.length ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { key: "aria-filter-enabled" }, messages.filterEnabled)) : null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { key: "aria-item-count" }, messages.total.replace("{count}", _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_8__.n.localize(enabledListItems.length.toString()))), enabledListItems.length ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("ol", { key: "aria-item-list" }, enabledListItems.map((item) => ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("li", null, item.label))))) : null)) : null;
  }
  connectObserver() {
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
  }
  disconnectObserver() {
    this.mutationObserver?.disconnect();
  }
  setUpSorting() {
    const { dragEnabled } = this;
    if (!dragEnabled) {
      return;
    }
    (0,_sortableComponent_42b85f87_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
  }
  onDragStart() {
    this.disconnectObserver();
  }
  onDragEnd() {
    this.connectObserver();
  }
  onDragSort(detail) {
    this.setParentList();
    this.updateListItems();
    this.calciteListOrderChange.emit(detail);
  }
  setParentList() {
    this.parentListEl = this.el.parentElement?.closest("calcite-list");
  }
  filterElements({ el, filteredItems, visibleParents, }) {
    const hidden = !visibleParents.has(el) && !filteredItems.includes(el);
    el.hidden = hidden;
    const closestParent = el.parentElement.closest(parentSelector);
    if (!closestParent) {
      return;
    }
    if (!hidden) {
      visibleParents.add(closestParent);
    }
    this.filterElements({
      el: closestParent,
      filteredItems,
      visibleParents,
    });
  }
  updateFilteredData(emit = false) {
    const { filterEl } = this;
    if (!filterEl) {
      return;
    }
    if (filterEl.filteredItems) {
      this.filteredData = filterEl.filteredItems;
    }
    this.updateListItems(emit);
  }
  async performFilter() {
    const { filterEl, filterText } = this;
    if (!filterEl) {
      return;
    }
    filterEl.value = filterText;
    await filterEl.filter(filterText);
    this.updateFilteredData();
  }
  handleNudgeEvent(event) {
    const { direction } = event.detail;
    const composedPath = event.composedPath();
    const handle = composedPath.find((el) => el.tagName === "CALCITE-HANDLE");
    const sortItem = composedPath.find((el) => el.tagName === "CALCITE-LIST-ITEM");
    const parentEl = sortItem?.parentElement;
    if (!parentEl) {
      return;
    }
    const { enabledListItems } = this;
    const sameParentItems = enabledListItems.filter((item) => item.parentElement === parentEl);
    const lastIndex = sameParentItems.length - 1;
    const oldIndex = sameParentItems.indexOf(sortItem);
    let appendInstead = false;
    let newIndex;
    if (direction === "up") {
      if (oldIndex === 0) {
        appendInstead = true;
        newIndex = lastIndex;
      }
      else {
        newIndex = oldIndex - 1;
      }
    }
    else {
      if (oldIndex === lastIndex) {
        newIndex = 0;
      }
      else if (oldIndex === lastIndex - 1) {
        appendInstead = true;
        newIndex = lastIndex;
      }
      else {
        newIndex = oldIndex + 2;
      }
    }
    this.disconnectObserver();
    if (appendInstead) {
      parentEl.appendChild(sortItem);
    }
    else {
      parentEl.insertBefore(sortItem, sameParentItems[newIndex]);
    }
    this.updateListItems();
    this.connectObserver();
    this.calciteListOrderChange.emit({
      dragEl: sortItem,
      fromEl: parentEl,
      toEl: parentEl,
      newIndex,
      oldIndex,
    });
    handle.setFocus().then(() => {
      handle.activated = true;
    });
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "filterText": ["handleFilterTextChange"],
    "messageOverrides": ["onMessagesChange"],
    "filterEnabled": ["handleListItemChange"],
    "group": ["handleListItemChange"],
    "dragEnabled": ["handleListItemChange"],
    "selectionMode": ["handleListItemChange"],
    "selectionAppearance": ["handleListItemChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
};
List.style = listCss;

const listItemCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;--calcite-list-item-icon-color:var(--calcite-color-brand);--calcite-list-item-spacing-indent:1rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{box-sizing:border-box;display:flex;flex:1 1 0%;background-color:var(--calcite-color-foreground-1);font-family:var(--calcite-sans-family);padding-inline-start:calc(var(--calcite-list-item-spacing-indent) * var(--calcite-list-item-spacing-indent-multiplier))}.container *{box-sizing:border-box}.container:hover{cursor:pointer;background-color:var(--calcite-color-foreground-2)}.container:active{background-color:var(--calcite-color-foreground-1)}.container--border-selected{border-inline-start:4px solid var(--calcite-color-brand)}.container--border-unselected{border-inline-start:4px solid transparent}.nested-container{display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1)}.nested-container--hidden{display:none}.content-container{display:flex;flex:1 1 auto;-webkit-user-select:none;user-select:none;align-items:stretch;padding:0px;font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}tr,td{outline-color:transparent}tr:focus,td:focus{outline:2px solid var(--calcite-color-brand);outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          )}.content,.custom-content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--2);line-height:1.375}.label,.description,.content-bottom{font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--2);font-weight:var(--calcite-font-weight-normal);word-wrap:break-word;word-break:break-word}.label:only-child,.description:only-child,.content-bottom:only-child{margin:0px;padding-block:0.25rem}.label{color:var(--calcite-color-text-1)}.description{margin-block-start:0.125rem;color:var(--calcite-color-text-3)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:1 1 auto}.content-bottom{display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);padding-inline-start:calc(var(--calcite-list-item-spacing-indent) * var(--calcite-list-item-spacing-indent-multiplier))}.content-container--has-center-content .content-start,.content-container--has-center-content .content-end{flex:0 1 auto}.selection-container{display:flex;padding-inline:0.75rem;color:var(--calcite-list-item-icon-color)}.actions-start,.actions-end,.content-start,.content-end,.selection-container,.drag-container,.open-container{display:flex;align-items:center}.open-container,.selection-container{cursor:pointer}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:0.75rem;align-self:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}::slotted(calcite-list-item){border-width:0px;border-block-start-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}::slotted(calcite-list:empty){padding-block:0.75rem}:host([hidden]){display:none}[hidden]{display:none}";

const focusMap = new Map();
const listSelector = "calcite-list";
const ListItem = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteListItemSelect = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteListItemSelect", 6);
    this.calciteListItemClose = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteListItemClose", 6);
    this.calciteInternalListItemSelect = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListItemSelect", 6);
    this.calciteInternalListItemSelectMultiple = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListItemSelectMultiple", 6);
    this.calciteInternalListItemActive = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListItemActive", 6);
    this.calciteInternalFocusPreviousItem = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalFocusPreviousItem", 6);
    this.calciteInternalListItemChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListItemChange", 6);
    this.closeClickHandler = () => {
      this.closed = true;
      this.calciteListItemClose.emit();
    };
    this.handleContentSlotChange = (event) => {
      this.hasCustomContent = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleActionsStartSlotChange = (event) => {
      this.hasActionsStart = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleActionsEndSlotChange = (event) => {
      this.hasActionsEnd = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleContentStartSlotChange = (event) => {
      this.hasContentStart = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleContentEndSlotChange = (event) => {
      this.hasContentEnd = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleContentBottomSlotChange = (event) => {
      this.hasContentBottom = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.b)(event);
    };
    this.handleDefaultSlotChange = (event) => {
      this.handleOpenableChange(event.target);
    };
    this.toggleOpen = () => {
      this.open = !this.open;
    };
    this.itemClicked = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      this.toggleSelected(event.shiftKey);
      this.calciteInternalListItemActive.emit();
    };
    this.toggleSelected = (shiftKey) => {
      const { selectionMode, selected } = this;
      if (this.disabled) {
        return;
      }
      if (selectionMode === "multiple" || selectionMode === "single") {
        this.selected = !selected;
      }
      else if (selectionMode === "single-persist") {
        this.selected = true;
      }
      this.calciteInternalListItemSelectMultiple.emit({
        selectMultiple: shiftKey && selectionMode === "multiple",
      });
      this.calciteListItemSelect.emit();
    };
    this.handleItemKeyDown = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      const { key } = event;
      const composedPath = event.composedPath();
      const { containerEl, contentEl, actionsStartEl, actionsEndEl, open, openable } = this;
      const cells = [actionsStartEl, contentEl, actionsEndEl].filter((el) => el && !el.hidden);
      const currentIndex = cells.findIndex((cell) => composedPath.includes(cell));
      if (key === "Enter" &&
        !composedPath.includes(actionsStartEl) &&
        !composedPath.includes(actionsEndEl)) {
        event.preventDefault();
        this.toggleSelected(event.shiftKey);
      }
      else if (key === "ArrowRight") {
        event.preventDefault();
        const nextIndex = currentIndex + 1;
        if (currentIndex === -1) {
          if (!open && openable) {
            this.open = true;
            this.focusCell(null);
          }
          else if (cells[0]) {
            this.focusCell(cells[0]);
          }
        }
        else if (cells[currentIndex] && cells[nextIndex]) {
          this.focusCell(cells[nextIndex]);
        }
      }
      else if (key === "ArrowLeft") {
        event.preventDefault();
        const prevIndex = currentIndex - 1;
        if (currentIndex === -1) {
          this.focusCell(null);
          if (open && openable) {
            this.open = false;
          }
          else {
            this.calciteInternalFocusPreviousItem.emit();
          }
        }
        else if (currentIndex === 0) {
          this.focusCell(null);
          containerEl.focus();
        }
        else if (cells[currentIndex] && cells[prevIndex]) {
          this.focusCell(cells[prevIndex]);
        }
      }
    };
    this.focusCellNull = () => {
      this.focusCell(null);
    };
    this.focusCell = (focusEl, saveFocusIndex = true) => {
      const { contentEl, actionsStartEl, actionsEndEl, parentListEl } = this;
      if (saveFocusIndex) {
        focusMap.set(parentListEl, null);
      }
      const focusedEl = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.D)(focusEl);
      [actionsStartEl, contentEl, actionsEndEl]
        .filter((el) => el && !el.hidden)
        .forEach((tableCell, cellIndex) => {
        const tabIndexAttr = "tabindex";
        if (tableCell === focusEl) {
          focusEl === focusedEl && tableCell.setAttribute(tabIndexAttr, "0");
          saveFocusIndex && focusMap.set(parentListEl, cellIndex);
        }
        else {
          tableCell.removeAttribute(tabIndexAttr);
        }
      });
      focusedEl?.focus();
    };
    this.active = false;
    this.closable = false;
    this.closed = false;
    this.description = undefined;
    this.disabled = false;
    this.dragDisabled = false;
    this.dragHandle = false;
    this.label = undefined;
    this.metadata = undefined;
    this.open = false;
    this.setSize = null;
    this.setPosition = null;
    this.selected = false;
    this.value = undefined;
    this.selectionMode = null;
    this.selectionAppearance = null;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.effectiveLocale = "";
    this.defaultMessages = undefined;
    this.level = null;
    this.visualLevel = null;
    this.parentListEl = undefined;
    this.openable = false;
    this.hasActionsStart = false;
    this.hasActionsEnd = false;
    this.hasCustomContent = false;
    this.hasContentStart = false;
    this.hasContentEnd = false;
    this.hasContentBottom = false;
  }
  activeHandler(active) {
    if (!active) {
      this.focusCell(null, false);
    }
  }
  handleClosedChange() {
    this.emitCalciteInternalListItemChange();
  }
  handleDisabledChange() {
    this.emitCalciteInternalListItemChange();
  }
  handleSelectedChange() {
    this.calciteInternalListItemSelect.emit();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  handleCalciteInternalListDefaultSlotChanges(event) {
    event.stopPropagation();
    this.handleOpenableChange(this.defaultSlotEl);
  }
  effectiveLocaleChange() {
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_8__.c)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    const { el } = this;
    this.parentListEl = el.closest(listSelector);
    this.level = getDepth(el) + 1;
    this.visualLevel = getDepth(el, true);
    this.setSelectionDefaults();
  }
  async componentWillLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.s)(this);
    await (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
  }
  componentDidRender() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_8__.d)(this);
    (0,_t9n_0bcdca54_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_b17396e0_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    const { containerEl, contentEl, actionsStartEl, actionsEndEl, parentListEl } = this;
    const focusIndex = focusMap.get(parentListEl);
    if (typeof focusIndex === "number") {
      const cells = [actionsStartEl, contentEl, actionsEndEl].filter((el) => el && !el.hidden);
      if (cells[focusIndex]) {
        this.focusCell(cells[focusIndex]);
      }
      else {
        containerEl?.focus();
      }
      return;
    }
    containerEl?.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderSelected() {
    const { selected, selectionMode, selectionAppearance } = this;
    if (selectionMode === "none" || selectionAppearance === "border") {
      return null;
    }
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { class: CSS$2.selectionContainer, key: "selection-container", onClick: this.itemClicked }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: selected
        ? selectionMode === "multiple"
          ? ICONS.selectedMultiple
          : ICONS.selectedSingle
        : ICONS.unselected, scale: "s" })));
  }
  renderDragHandle() {
    return this.dragHandle ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { class: CSS$2.dragContainer, key: "drag-handle-container" }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-handle", { disabled: this.dragDisabled, label: this.label, setPosition: this.setPosition, setSize: this.setSize }))) : null;
  }
  renderOpen() {
    const { el, open, openable, parentListEl } = this;
    const dir = (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.g)(el);
    const icon = openable
      ? open
        ? ICONS.open
        : dir === "rtl"
          ? ICONS.closedRTL
          : ICONS.closedLTR
      : ICONS.blank;
    const clickHandler = openable ? this.toggleOpen : this.itemClicked;
    return openable || parentListEl?.openable ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { class: CSS$2.openContainer, key: "open-container", onClick: clickHandler }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-icon", { icon: icon, key: icon, scale: "s" }))) : null;
  }
  renderActionsStart() {
    const { label, hasActionsStart } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { "aria-label": label, class: CSS$2.actionsStart, hidden: !hasActionsStart, key: "actions-start-container", role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.actionsStartEl = el) }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.actionsStart, onSlotchange: this.handleActionsStartSlotChange })));
  }
  renderActionsEnd() {
    const { label, hasActionsEnd, closable, messages } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { "aria-label": label, class: CSS$2.actionsEnd, hidden: !(hasActionsEnd || closable), key: "actions-end-container", role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.actionsEndEl = el) }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.actionsEnd, onSlotchange: this.handleActionsEndSlotChange }), closable ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("calcite-action", { appearance: "transparent", icon: ICONS.close, key: "close-action", label: messages.close, onClick: this.closeClickHandler, text: messages.close })) : null));
  }
  renderContentStart() {
    const { hasContentStart } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.contentStart, hidden: !hasContentStart }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.contentStart, onSlotchange: this.handleContentStartSlotChange })));
  }
  renderCustomContent() {
    const { hasCustomContent } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.customContent, hidden: !hasCustomContent }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.content, onSlotchange: this.handleContentSlotChange })));
  }
  renderContentEnd() {
    const { hasContentEnd } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.contentEnd, hidden: !hasContentEnd }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.contentEnd, onSlotchange: this.handleContentEndSlotChange })));
  }
  renderContentBottom() {
    const { hasContentBottom, visualLevel } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.contentBottom, hidden: !hasContentBottom, style: { "--calcite-list-item-spacing-indent-multiplier": `${visualLevel}` } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: SLOTS$1.contentBottom, onSlotchange: this.handleContentBottomSlotChange })));
  }
  renderDefaultContainer() {
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: {
        [CSS$2.nestedContainer]: true,
        [CSS$2.nestedContainerHidden]: this.openable && !this.open,
      } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange, ref: (el) => (this.defaultSlotEl = el) })));
  }
  renderContentProperties() {
    const { label, description, hasCustomContent } = this;
    return !hasCustomContent && (!!label || !!description) ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.content, key: "content" }, label ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.label, key: "label" }, label)) : null, description ? ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: CSS$2.description, key: "description" }, description)) : null)) : null;
  }
  renderContentContainer() {
    const { description, label, selectionMode, hasCustomContent } = this;
    const hasCenterContent = hasCustomContent || !!label || !!description;
    const content = [
      this.renderContentStart(),
      this.renderCustomContent(),
      this.renderContentProperties(),
      this.renderContentEnd(),
    ];
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { "aria-label": label, class: {
        [CSS$2.contentContainer]: true,
        [CSS$2.contentContainerSelectable]: selectionMode !== "none",
        [CSS$2.contentContainerHasCenterContent]: hasCenterContent,
      }, key: "content-container", onClick: this.itemClicked, role: "gridcell",
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.contentEl = el) }, content));
  }
  render() {
    const { openable, open, level, setPosition, setSize, active, label, selected, selectionAppearance, selectionMode, closed, visualLevel, } = this;
    const showBorder = selectionMode !== "none" && selectionAppearance === "border";
    const borderSelected = showBorder && selected;
    const borderUnselected = showBorder && !selected;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tr", { "aria-expanded": openable ? (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.t)(open) : null, "aria-label": label, "aria-level": level, "aria-posinset": setPosition, "aria-selected": (0,_dom_ed00a585_js__WEBPACK_IMPORTED_MODULE_1__.t)(selected), "aria-setsize": setSize, class: {
        [CSS$2.container]: true,
        [CSS$2.containerBorderSelected]: borderSelected,
        [CSS$2.containerBorderUnselected]: borderUnselected,
      }, hidden: closed, onFocus: this.focusCellNull, onKeyDown: this.handleItemKeyDown, role: "row", style: { "--calcite-list-item-spacing-indent-multiplier": `${visualLevel}` }, tabIndex: active ? 0 : -1,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.containerEl = el) }, this.renderDragHandle(), this.renderSelected(), this.renderOpen(), this.renderActionsStart(), this.renderContentContainer(), this.renderActionsEnd()), this.renderContentBottom(), this.renderDefaultContainer()));
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  emitCalciteInternalListItemChange() {
    this.calciteInternalListItemChange.emit();
  }
  setSelectionDefaults() {
    const { parentListEl, selectionMode, selectionAppearance } = this;
    if (!parentListEl) {
      return;
    }
    if (!selectionMode) {
      this.selectionMode = parentListEl.selectionMode;
    }
    if (!selectionAppearance) {
      this.selectionAppearance = parentListEl.selectionAppearance;
    }
  }
  handleOpenableChange(slotEl) {
    if (!slotEl) {
      return;
    }
    const { parentListEl } = this;
    const listItemChildren = getListItemChildren(slotEl);
    const listItemChildLists = getListItemChildLists(slotEl);
    updateListItemChildren(listItemChildren);
    const openable = !!listItemChildren.length || !!listItemChildLists.length;
    if (openable && parentListEl && !parentListEl.openable) {
      parentListEl.openable = true;
    }
    this.openable = openable;
    if (!openable) {
      this.open = false;
    }
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
  static get watchers() { return {
    "active": ["activeHandler"],
    "closed": ["handleClosedChange"],
    "disabled": ["handleDisabledChange"],
    "selected": ["handleSelectedChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
};
ListItem.style = listItemCss;

const CSS = {
  container: "container",
  heading: "heading",
};

const listItemGroupCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;flex-direction:column;background-color:var(--calcite-color-foreground-1);--calcite-list-item-spacing-indent:1rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{margin:0px;display:flex;flex:1 1 0%;background-color:var(--calcite-color-foreground-2);padding:0.75rem;font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--1);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.heading{padding-inline-start:calc(var(--calcite-list-item-spacing-indent) * var(--calcite-list-item-spacing-indent-multiplier))}::slotted(calcite-list-item){--tw-shadow:0 -1px 0 var(--calcite-color-border-3);--tw-shadow-colored:0 -1px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);margin-block-start:1px}::slotted(calcite-list-item:nth-child(1 of :not([hidden]))){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);margin-block-start:0px}:host([hidden]){display:none}[hidden]{display:none}";

const ListItemGroup = class {
  constructor(hostRef) {
    (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.calciteInternalListItemGroupDefaultSlotChange = (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "calciteInternalListItemGroupDefaultSlotChange", 6);
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.handleDefaultSlotChange = () => {
      this.calciteInternalListItemGroupDefaultSlotChange.emit();
    };
    this.disabled = false;
    this.heading = undefined;
    this.visualLevel = null;
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    const { el } = this;
    this.visualLevel = getDepth(el, true);
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  componentDidRender() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_cbd8a6dc_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const { heading, visualLevel } = this;
    return ((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.H, null, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("tr", { class: CSS.container, style: { "--calcite-list-item-spacing-indent-multiplier": `${visualLevel}` } }, (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("td", { class: CSS.heading, colSpan: MAX_COLUMNS }, heading)), (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { onSlotchange: this.handleDefaultSlotChange })));
  }
  get el() { return (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
ListItemGroup.style = listItemGroupCss;



//# sourceMappingURL=calcite-list_3.entry.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/loadable-b17396e0.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ setComponentLoaded),
/* harmony export */   b: () => (/* binding */ componentLoaded),
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   s: () => (/* binding */ setUpLoadableComponent)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */


const resolveMap = new WeakMap();
const promiseMap = new WeakMap();
/**
 * This helper util sets up the component for the ability to know when the component has been loaded.
 *
 * This should be used in the `componentWillLoad` lifecycle hook.
 *
 * ```
 * componentWillLoad(): void {
 *   setUpLoadableComponent(this);
 * }
 * ```
 *
 * @param component
 */
function setUpLoadableComponent(component) {
  promiseMap.set(component, new Promise((resolve) => resolveMap.set(component, resolve)));
}
/**
 * This helper util lets the loadable component know that it is now loaded.
 *
 * This should be used in the `componentDidLoad` lifecycle hook.
 *
 * ```
 * componentDidLoad(): void {
 *   setComponentLoaded(this);
 * }
 * ```
 *
 * @param component
 */
function setComponentLoaded(component) {
  resolveMap.get(component)();
}
/**
 * This helper util can be used to ensure a component has been loaded (The "componentDidLoad" Stencil lifecycle method has been called).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first.
 *
 * ```
 * async myMethod(): Promise<void> {
 *   await componentLoaded(this);
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
function componentLoaded(component) {
  return promiseMap.get(component);
}
/**
 * This helper util can be used to ensuring the component is loaded and rendered by the browser (The "componentDidLoad" Stencil lifecycle method has been called and any internal elements are focusable).
 *
 * Requires requires `LoadableComponent` to be implemented.
 *
 * A component developer can await this method before proceeding with any logic that requires a component to be loaded first and then an internal element be focused.
 *
 * ```
 * async setFocus(): Promise<void> {
 *   await componentFocusable(this);
 *   this.internalElement?.focus();
 * }
 * ```
 *
 * @param component
 * @returns Promise<void>
 */
async function componentFocusable(component) {
  await componentLoaded(component);
  (0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.f)(component);
  return new Promise((resolve) => requestAnimationFrame(() => resolve()));
}



//# sourceMappingURL=loadable-b17396e0.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/resources-bd7a3f93.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/resources-bd7a3f93.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   S: () => (/* binding */ SLOTS)
/* harmony export */ });
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */
const CSS = {
  container: "container",
  actionsStart: "actions-start",
  contentStart: "content-start",
  content: "content",
  contentEnd: "content-end",
  actionsEnd: "actions-end",
};
const SLOTS = {
  actionsStart: "actions-start",
  contentStart: "content-start",
  contentEnd: "content-end",
  actionsEnd: "actions-end",
};



//# sourceMappingURL=resources-bd7a3f93.js.map

/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/esm/t9n-0bcdca54.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ connectMessages),
/* harmony export */   d: () => (/* binding */ disconnectMessages),
/* harmony export */   s: () => (/* binding */ setUpMessages),
/* harmony export */   u: () => (/* binding */ updateMessages)
/* harmony export */ });
/* harmony import */ var _index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-86faef9c.js */ "./node_modules/@esri/calcite-components/dist/esm/index-86faef9c.js");
/* harmony import */ var _locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale-6e783cf0.js */ "./node_modules/@esri/calcite-components/dist/esm/locale-6e783cf0.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.0.0
 */



const componentLangToMessageBundleCache = {};
async function getMessageBundle(lang, component) {
  const key = `${component}_${lang}`;
  if (componentLangToMessageBundleCache[key]) {
    return componentLangToMessageBundleCache[key];
  }
  componentLangToMessageBundleCache[key] = fetch((0,_index_86faef9c_js__WEBPACK_IMPORTED_MODULE_0__.a)(`./assets/${component}/t9n/messages_${lang}.json`))
    .then((resp) => {
    if (!resp.ok) {
      throwMessageFetchError();
    }
    return resp.json();
  })
    .catch(() => throwMessageFetchError());
  return componentLangToMessageBundleCache[key];
}
function throwMessageFetchError() {
  throw new Error("could not fetch component message bundle");
}
function mergeMessages(component) {
  component.messages = {
    ...component.defaultMessages,
    ...component.messageOverrides,
  };
}
/**
 * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.
 *
 * @param component
 */
async function setUpMessages(component) {
  component.defaultMessages = await fetchMessages(component, component.effectiveLocale);
  mergeMessages(component);
}
async function fetchMessages(component, lang) {
  const { el } = component;
  const tag = el.tagName.toLowerCase();
  const componentName = tag.replace("calcite-", "");
  return getMessageBundle((0,_locale_6e783cf0_js__WEBPACK_IMPORTED_MODULE_1__.g)(lang, "t9n"), componentName);
}
/**
 * This utility must be set up for the component to update its default message bundle if the locale changes.
 *
 * It can be set up in **either** of the following ways:
 *
 * 1. called from `LocalizedComponent`'s `onLocaleChange` method or
 * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop
 *
 * @param component
 * @param lang
 */
async function updateMessages(component, lang) {
  component.defaultMessages = await fetchMessages(component, lang);
  mergeMessages(component);
}
/**
 * This utility sets up internals for messages support.
 *
 * It needs to be called in `connectedCallback`
 *
 * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.
 *
 * @param component
 */
function connectMessages(component) {
  component.onMessagesChange = defaultOnMessagesChange;
}
/**
 * This utility tears down internals for messages support.
 *
 * It needs to be called in `disconnectedCallback`
 *
 * @param component
 */
function disconnectMessages(component) {
  component.onMessagesChange = undefined;
}
function defaultOnMessagesChange() {
  mergeMessages(this);
}



//# sourceMappingURL=t9n-0bcdca54.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsY2l0ZS1jb21wb25lbnRzL2NodW5rcy92ZW5kb3JzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tcG9uZW50c19kaXN0X2VzbV9jYWxjaXRlLWxpc3RfM19lbnRyeV9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ3dCO0FBQ1Q7QUFDOUQ7QUFDcUU7QUFDNUU7QUFDZ0U7QUFDSTtBQUNSO0FBQzVEO0FBQzNCO0FBQ0s7QUFDRjtBQUNKOztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsZUFBZTtBQUM3RDtBQUNBO0FBQ0EscURBQXFELGVBQWU7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1DQUFtQyxlQUFlLHlCQUF5QixpQkFBaUIsd0NBQXdDLG1EQUFtRCxvQkFBb0IsTUFBTSxjQUFjLHlHQUF5RyxVQUFVLFdBQVcsa0JBQWtCLGlCQUFpQixzQkFBc0IsYUFBYSxpQkFBaUIsc0JBQXNCLDZCQUE2QixtQkFBbUIsc0JBQXNCLE9BQU8saUJBQWlCLHlCQUF5QixPQUFPLGlDQUFpQyxnQ0FBZ0MsNkJBQTZCLG1EQUFtRCxvREFBb0QsdUdBQXVHLHVCQUF1QiwyQ0FBMkMsc0JBQXNCLDhCQUE4Qix1R0FBdUcsMENBQTBDLHNCQUFzQiw4QkFBOEIsdUdBQXVHLHVCQUF1QixZQUFZLGdCQUFnQixzQkFBc0Isc0NBQXNDLG1EQUFtRCxlQUFlLFlBQVksZ0JBQWdCLGtCQUFrQixnQkFBZ0IsZUFBZSxVQUFVLFlBQVksZ0JBQWdCLHNCQUFzQixtQkFBbUIsZUFBZSxnQkFBZ0IsYUFBYSxTQUFTLGFBQWE7O0FBRXJxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEIsNkJBQTZCLHFEQUFXO0FBQ3hDLDZCQUE2QixxREFBVztBQUN4QyxrQ0FBa0MscURBQVc7QUFDN0MsZ0RBQWdELHFEQUFXO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlEQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG1EQUE0QjtBQUMvRDtBQUNBO0FBQ0EsaUNBQWlDLG1EQUE0QjtBQUM3RDtBQUNBO0FBQ0EsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNDQUFzQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSw2Q0FBNkM7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwyQkFBMkIsd0RBQVE7QUFDbkMsY0FBYyxrREFBa0Q7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUJBQW1CO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUJBQWlCO0FBQzdCLFlBQVkscUNBQXFDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBVTtBQUNsQjtBQUNBO0FBQ0EsSUFBSSxtREFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxJQUFJLDJEQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFzQjtBQUMxQixVQUFVLG1EQUFhO0FBQ3ZCO0FBQ0E7QUFDQSxJQUFJLDJEQUFxQjtBQUN6QjtBQUNBO0FBQ0EsSUFBSSx3REFBa0I7QUFDdEI7QUFDQTtBQUNBLFFBQVEsaUVBQVU7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpRUFBMkI7QUFDL0IsSUFBSSwyREFBcUI7QUFDekIsSUFBSSxtREFBa0I7QUFDdEI7QUFDQTtBQUNBLElBQUksbURBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxVQUFVLHdEQUFrQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxSUFBcUk7QUFDakosWUFBWSxxREFBQyxVQUFVLHdCQUF3QixzQkFBc0IscURBQUMsV0FBVyxzREFBc0Qsb0VBQW9FLHFEQUFDLG9CQUFvQixzQ0FBc0MsVUFBVSxxREFBQyxZQUFZLGFBQWEsbURBQWEsK0dBQStHLG1FQUFtRSxxREFBQyxnQkFBZ0IscURBQUMsU0FBUyxTQUFTLHdCQUF3QixFQUFFLHFEQUFDLFNBQVMsc0JBQXNCLEVBQUUscURBQUMsb0JBQW9CLG9CQUFvQixFQUFFLHFEQUFDLFdBQVcsNkZBQTZGLHFEQUFPLGVBQWUsR0FBRyxxREFBQyxxQkFBcUI7QUFDNXdCO0FBQ0EsNkJBQTZCLEdBQUcscURBQUMsV0FBVyx5RkFBeUYscURBQU8sYUFBYSxlQUFlLHFEQUFDLFlBQVksNkJBQTZCLEVBQUUscURBQUMsV0FBVyw0Q0FBNEM7QUFDNVE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVIQUF1SDtBQUNuSSxJQUFJLGtEQUFxQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscURBQUMsVUFBVSxtREFBbUQseURBQXlELHFEQUFDLFVBQVUsNEJBQTRCLG1DQUFtQyxxREFBQyxVQUFVLHdCQUF3QiwyQkFBMkIsTUFBTSxHQUFHLGtEQUFxQiw0RUFBNEUscURBQUMsU0FBUyx1QkFBdUIsa0NBQWtDLHFEQUFDO0FBQ3pjO0FBQ0E7QUFDQSw4Q0FBOEMsZ0NBQWdDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpRUFBd0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEI7QUFDNUIsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVDQUF1QyxlQUFlLHlCQUF5QixpQkFBaUIsd0NBQXdDLG1EQUFtRCxvQkFBb0IsTUFBTSxhQUFhLHNCQUFzQiwwREFBMEQsd0NBQXdDLHlHQUF5RyxVQUFVLFdBQVcsc0JBQXNCLGFBQWEsWUFBWSxtREFBbUQsdUNBQXVDLHdIQUF3SCxhQUFhLHNCQUFzQixpQkFBaUIsZUFBZSxtREFBbUQsa0JBQWtCLG1EQUFtRCw0QkFBNEIseURBQXlELDhCQUE4QiwwQ0FBMEMsa0JBQWtCLGFBQWEsc0JBQXNCLG1EQUFtRCwwQkFBMEIsYUFBYSxtQkFBbUIsYUFBYSxjQUFjLHlCQUF5QixpQkFBaUIsb0JBQW9CLFlBQVksdUNBQXVDLDhDQUE4QyxrQ0FBa0MsTUFBTSwwQkFBMEIsa0JBQWtCLDZDQUE2QyxrUEFBa1AseUJBQXlCLGFBQWEsY0FBYyxzQkFBc0IsdUJBQXVCLHVCQUF1QixxQkFBcUIsc0NBQXNDLGtCQUFrQixvQ0FBb0MsdUNBQXVDLHNDQUFzQyw4Q0FBOEMscUJBQXFCLHNCQUFzQixxRUFBcUUsV0FBVyxzQkFBc0IsT0FBTyxrQ0FBa0MsYUFBYSw0QkFBNEIsa0NBQWtDLGVBQWUsMkJBQTJCLGFBQWEseUJBQXlCLDRCQUE0QixjQUFjLGdCQUFnQixhQUFhLHNCQUFzQixtREFBbUQsd0hBQXdILDBHQUEwRyxjQUFjLHFCQUFxQixhQUFhLHVCQUF1QiwwQ0FBMEMsNkdBQTZHLGFBQWEsbUJBQW1CLHFDQUFxQyxlQUFlLDRFQUE0RSxzQkFBc0Isa0JBQWtCLDhVQUE4VSxtQkFBbUIsY0FBYyw2QkFBNkIsaUJBQWlCLDZCQUE2QixtQkFBbUIsMkNBQTJDLDhCQUE4QixzQkFBc0IsZ0JBQWdCLGFBQWEsU0FBUyxhQUFhOztBQUVoekg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQixpQ0FBaUMscURBQVc7QUFDNUMsZ0NBQWdDLHFEQUFXO0FBQzNDLHlDQUF5QyxxREFBVztBQUNwRCxpREFBaUQscURBQVc7QUFDNUQseUNBQXlDLHFEQUFXO0FBQ3BELDRDQUE0QyxxREFBVztBQUN2RCx5Q0FBeUMscURBQVc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtREFBNEI7QUFDMUQ7QUFDQTtBQUNBLDZCQUE2QixtREFBNEI7QUFDekQ7QUFDQTtBQUNBLDJCQUEyQixtREFBNEI7QUFDdkQ7QUFDQTtBQUNBLDZCQUE2QixtREFBNEI7QUFDekQ7QUFDQTtBQUNBLDJCQUEyQixtREFBNEI7QUFDdkQ7QUFDQTtBQUNBLDhCQUE4QixtREFBNEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQkFBMEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQSxjQUFjLHVFQUF1RTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0RBQXdEO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtREFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksbURBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDJEQUFrQjtBQUN0QixJQUFJLHNEQUFnQjtBQUNwQixJQUFJLG1EQUFlO0FBQ25CLFlBQVksS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHdEQUFzQjtBQUMxQixVQUFVLG1EQUFhO0FBQ3ZCO0FBQ0E7QUFDQSxJQUFJLHdEQUFrQjtBQUN0QjtBQUNBO0FBQ0EsSUFBSSwyREFBcUI7QUFDekI7QUFDQTtBQUNBLElBQUksMkRBQXFCO0FBQ3pCLElBQUksc0RBQW1CO0FBQ3ZCLElBQUksbURBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdEQUFrQjtBQUM1QixZQUFZLHFFQUFxRTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0NBQStDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUMsU0FBUyx3RkFBd0YsRUFBRSxxREFBQyxtQkFBbUI7QUFDcEk7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQSw4QkFBOEIscURBQUMsU0FBUywwREFBMEQsRUFBRSxxREFBQyxxQkFBcUIsc0dBQXNHO0FBQ2hPO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxnQkFBZ0IsbURBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxxREFBQyxTQUFTLDBFQUEwRSxFQUFFLHFEQUFDLG1CQUFtQixtQ0FBbUM7QUFDOUw7QUFDQTtBQUNBLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkscURBQUMsU0FBUztBQUN0QjtBQUNBLCtDQUErQyxFQUFFLHFEQUFDLFdBQVcsNkVBQTZFO0FBQzFJO0FBQ0E7QUFDQSxZQUFZLDJDQUEyQztBQUN2RCxZQUFZLHFEQUFDLFNBQVM7QUFDdEI7QUFDQSw2Q0FBNkMsRUFBRSxxREFBQyxXQUFXLHlFQUF5RSxlQUFlLHFEQUFDLHFCQUFxQixpSkFBaUo7QUFDMVQ7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCLFlBQVkscURBQUMsVUFBVSxxREFBcUQsRUFBRSxxREFBQyxXQUFXLDZFQUE2RTtBQUN2SztBQUNBO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0IsWUFBWSxxREFBQyxVQUFVLHVEQUF1RCxFQUFFLHFEQUFDLFdBQVcsbUVBQW1FO0FBQy9KO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QixZQUFZLHFEQUFDLFVBQVUsaURBQWlELEVBQUUscURBQUMsV0FBVyx5RUFBeUU7QUFDL0o7QUFDQTtBQUNBLFlBQVksZ0NBQWdDO0FBQzVDLFlBQVkscURBQUMsVUFBVSxnRUFBZ0Usb0RBQW9ELFlBQVksS0FBSyxFQUFFLHFEQUFDLFdBQVcsK0VBQStFO0FBQ3pQO0FBQ0E7QUFDQSxZQUFZLHFEQUFDLFVBQVU7QUFDdkI7QUFDQTtBQUNBLFNBQVMsRUFBRSxxREFBQyxXQUFXLG9GQUFvRjtBQUMzRztBQUNBO0FBQ0EsWUFBWSx1Q0FBdUM7QUFDbkQsOERBQThELHFEQUFDLFVBQVUsc0NBQXNDLFdBQVcscURBQUMsVUFBVSxrQ0FBa0MsaUNBQWlDLHFEQUFDLFVBQVUsOENBQThDO0FBQ2pRO0FBQ0E7QUFDQSxZQUFZLHNEQUFzRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUMsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBLFlBQVksaUlBQWlJO0FBQzdJO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUMsQ0FBQyxpREFBSSxRQUFRLHFEQUFDLFNBQVMsNEJBQTRCLG1EQUFhLHdHQUF3RyxtREFBYTtBQUNsTTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHdHQUF3RyxvREFBb0QsWUFBWSxHQUFHO0FBQ2xMO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxtREFBbUQ7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUIsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNENBQTRDLGVBQWUseUJBQXlCLGlCQUFpQix3Q0FBd0MsbURBQW1ELG9CQUFvQixNQUFNLGFBQWEsc0JBQXNCLG1EQUFtRCx3Q0FBd0MseUdBQXlHLFVBQVUsV0FBVyxXQUFXLGFBQWEsWUFBWSxtREFBbUQsZ0JBQWdCLHVDQUF1QyxzQ0FBc0MsNENBQTRDLGtDQUFrQyxTQUFTLHdIQUF3SCw2QkFBNkIsbURBQW1ELG9EQUFvRCx1R0FBdUcsdUJBQXVCLDREQUE0RCxzQkFBc0IsOEJBQThCLHVHQUF1Ryx1QkFBdUIsZ0JBQWdCLGFBQWEsU0FBUyxhQUFhOztBQUU1M0M7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCLHlEQUF5RCxxREFBVztBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQSxJQUFJLDJEQUFrQjtBQUN0QjtBQUNBO0FBQ0EsSUFBSSwyREFBcUI7QUFDekI7QUFDQTtBQUNBLElBQUksMkRBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1QkFBdUI7QUFDbkMsWUFBWSxxREFBQyxDQUFDLGlEQUFJLFFBQVEscURBQUMsU0FBUywrQkFBK0Isb0RBQW9ELFlBQVksS0FBSyxFQUFFLHFEQUFDLFNBQVMsMENBQTBDLGFBQWEscURBQUMsV0FBVyw0Q0FBNEM7QUFDblE7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUI7QUFDQTs7QUFFeUc7O0FBRXpHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDdUQ7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUscURBQVc7QUFDYjtBQUNBOztBQUUrRzs7QUFFL0c7Ozs7Ozs7Ozs7Ozs7OztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFZ0M7O0FBRWhDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0Q7QUFDTzs7QUFFL0Q7QUFDQTtBQUNBLGlCQUFpQixVQUFVLEdBQUcsS0FBSztBQUNuQztBQUNBO0FBQ0E7QUFDQSxpREFBaUQscURBQVksYUFBYSxVQUFVLGdCQUFnQixLQUFLO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLEtBQUs7QUFDZjtBQUNBO0FBQ0EsMEJBQTBCLHNEQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVrRzs7QUFFbEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9jYWxjaXRlLWxpc3RfMy5lbnRyeS5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9sb2FkYWJsZS1iMTczOTZlMC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2VzbS9yZXNvdXJjZXMtYmQ3YTNmOTMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9lc20vdDluLTBiY2RjYTU0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBjIGFzIGNyZWF0ZUV2ZW50LCBoLCBnIGFzIGdldEVsZW1lbnQsIEggYXMgSG9zdCB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuaW1wb3J0IHsgYiBhcyBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50LCB0IGFzIHRvQXJpYUJvb2xlYW4sIEQgYXMgZ2V0Rmlyc3RUYWJiYWJsZSwgZyBhcyBnZXRFbGVtZW50RGlyIH0gZnJvbSAnLi9kb20tZWQwMGE1ODUuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0SW50ZXJhY3RpdmUsIHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uLCBkIGFzIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSB9IGZyb20gJy4vaW50ZXJhY3RpdmUtY2JkOGE2ZGMuanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLTcxZDMzMmRiLmpzJztcbmltcG9ydCB7IGQgYXMgZHJhZ0FjdGl2ZSwgYSBhcyBkaXNjb25uZWN0U29ydGFibGVDb21wb25lbnQsIGMgYXMgY29ubmVjdFNvcnRhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi9zb3J0YWJsZUNvbXBvbmVudC00MmI4NWY4Ny5qcyc7XG5pbXBvcnQgeyBTIGFzIFNMT1RTJDIgfSBmcm9tICcuL3Jlc291cmNlcy1iZDdhM2Y5My5qcyc7XG5pbXBvcnQgeyBzIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIGEgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSB9IGZyb20gJy4vbG9hZGFibGUtYjE3Mzk2ZTAuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMsIHUgYXMgdXBkYXRlTWVzc2FnZXMgfSBmcm9tICcuL3Q5bi0wYmNkY2E1NC5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlclN0cmluZ0Zvcm1hdHRlciwgYyBhcyBjb25uZWN0TG9jYWxpemVkLCBkIGFzIGRpc2Nvbm5lY3RMb2NhbGl6ZWQgfSBmcm9tICcuL2xvY2FsZS02ZTc4M2NmMC5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlYm91bmNlIH0gZnJvbSAnLi9kZWJvdW5jZS04NTk1OGJiMS5qcyc7XG5pbXBvcnQgJy4vZ3VpZC0yMWZlY2ZhNC5qcyc7XG5pbXBvcnQgJy4vcmVzb3VyY2VzLWNmODIzODhjLmpzJztcbmltcG9ydCAnLi9icm93c2VyLWVjZTI5ZGE3LmpzJztcbmltcG9ydCAnLi9rZXktNjFmODJkZGIuanMnO1xuXG5jb25zdCBDU1MkMiA9IHtcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBjb250YWluZXJCb3JkZXJTZWxlY3RlZDogXCJjb250YWluZXItLWJvcmRlci1zZWxlY3RlZFwiLFxuICBjb250YWluZXJCb3JkZXJVbnNlbGVjdGVkOiBcImNvbnRhaW5lci0tYm9yZGVyLXVuc2VsZWN0ZWRcIixcbiAgY29udGVudENvbnRhaW5lcjogXCJjb250ZW50LWNvbnRhaW5lclwiLFxuICBjb250ZW50Q29udGFpbmVyU2VsZWN0YWJsZTogXCJjb250ZW50LWNvbnRhaW5lci0tc2VsZWN0YWJsZVwiLFxuICBjb250ZW50Q29udGFpbmVySGFzQ2VudGVyQ29udGVudDogXCJjb250ZW50LWNvbnRhaW5lci0taGFzLWNlbnRlci1jb250ZW50XCIsXG4gIG5lc3RlZENvbnRhaW5lcjogXCJuZXN0ZWQtY29udGFpbmVyXCIsXG4gIG5lc3RlZENvbnRhaW5lckhpZGRlbjogXCJuZXN0ZWQtY29udGFpbmVyLS1oaWRkZW5cIixcbiAgY29udGVudDogXCJjb250ZW50XCIsXG4gIGN1c3RvbUNvbnRlbnQ6IFwiY3VzdG9tLWNvbnRlbnRcIixcbiAgYWN0aW9uc1N0YXJ0OiBcImFjdGlvbnMtc3RhcnRcIixcbiAgY29udGVudFN0YXJ0OiBcImNvbnRlbnQtc3RhcnRcIixcbiAgbGFiZWw6IFwibGFiZWxcIixcbiAgZGVzY3JpcHRpb246IFwiZGVzY3JpcHRpb25cIixcbiAgY29udGVudEVuZDogXCJjb250ZW50LWVuZFwiLFxuICBjb250ZW50Qm90dG9tOiBcImNvbnRlbnQtYm90dG9tXCIsXG4gIGFjdGlvbnNFbmQ6IFwiYWN0aW9ucy1lbmRcIixcbiAgc2VsZWN0aW9uQ29udGFpbmVyOiBcInNlbGVjdGlvbi1jb250YWluZXJcIixcbiAgb3BlbkNvbnRhaW5lcjogXCJvcGVuLWNvbnRhaW5lclwiLFxuICBkcmFnQ29udGFpbmVyOiBcImRyYWctY29udGFpbmVyXCIsXG59O1xuY29uc3QgU0xPVFMkMSA9IHtcbiAgYWN0aW9uc1N0YXJ0OiBcImFjdGlvbnMtc3RhcnRcIixcbiAgY29udGVudFN0YXJ0OiBcImNvbnRlbnQtc3RhcnRcIixcbiAgY29udGVudDogXCJjb250ZW50XCIsXG4gIGNvbnRlbnRCb3R0b206IFwiY29udGVudC1ib3R0b21cIixcbiAgY29udGVudEVuZDogXCJjb250ZW50LWVuZFwiLFxuICBhY3Rpb25zRW5kOiBcImFjdGlvbnMtZW5kXCIsXG59O1xuLy8gU2V0IHRvIHplcm8gdG8gZXh0ZW5kIHVudGlsIHRoZSBlbmQgb2YgdGhlIHRhYmxlIHNlY3Rpb24uXG5jb25zdCBNQVhfQ09MVU1OUyA9IDA7XG5jb25zdCBJQ09OUyA9IHtcbiAgc2VsZWN0ZWRNdWx0aXBsZTogXCJjaGVjay1jaXJjbGUtZlwiLFxuICBzZWxlY3RlZFNpbmdsZTogXCJjaXJjbGUtZlwiLFxuICB1bnNlbGVjdGVkOiBcImJsYW5rXCIsXG4gIGNsb3NlZExUUjogXCJjYXJldC1yaWdodFwiLFxuICBjbG9zZWRSVEw6IFwiY2FyZXQtbGVmdFwiLFxuICBvcGVuOiBcImNhcmV0LWRvd25cIixcbiAgYmxhbms6IFwiYmxhbmtcIixcbiAgY2xvc2U6IFwieFwiLFxufTtcblxuY29uc3QgbGlzdFNlbGVjdG9yJDEgPSBcImNhbGNpdGUtbGlzdFwiO1xuY29uc3QgbGlzdEl0ZW1Hcm91cFNlbGVjdG9yID0gXCJjYWxjaXRlLWxpc3QtaXRlbS1ncm91cFwiO1xuY29uc3QgbGlzdEl0ZW1TZWxlY3RvciQxID0gXCJjYWxjaXRlLWxpc3QtaXRlbVwiO1xuZnVuY3Rpb24gZ2V0TGlzdEl0ZW1DaGlsZExpc3RzKHNsb3RFbCkge1xuICByZXR1cm4gQXJyYXkuZnJvbShzbG90RWwuYXNzaWduZWRFbGVtZW50cyh7IGZsYXR0ZW46IHRydWUgfSkuZmlsdGVyKChlbCkgPT4gZWwubWF0Y2hlcyhsaXN0U2VsZWN0b3IkMSkpKTtcbn1cbmZ1bmN0aW9uIGdldExpc3RJdGVtQ2hpbGRyZW4oc2xvdEVsKSB7XG4gIGNvbnN0IGFzc2lnbmVkRWxlbWVudHMgPSBzbG90RWwuYXNzaWduZWRFbGVtZW50cyh7IGZsYXR0ZW46IHRydWUgfSk7XG4gIGNvbnN0IGxpc3RJdGVtR3JvdXBDaGlsZHJlbiA9IGFzc2lnbmVkRWxlbWVudHMuZmlsdGVyKChlbCkgPT4gZWw/Lm1hdGNoZXMobGlzdEl0ZW1Hcm91cFNlbGVjdG9yKSlcbiAgICAubWFwKChncm91cCkgPT4gQXJyYXkuZnJvbShncm91cC5xdWVyeVNlbGVjdG9yQWxsKGxpc3RJdGVtU2VsZWN0b3IkMSkpKVxuICAgIC5yZWR1Y2UoKHByZXZpb3VzVmFsdWUsIGN1cnJlbnRWYWx1ZSkgPT4gWy4uLnByZXZpb3VzVmFsdWUsIC4uLmN1cnJlbnRWYWx1ZV0sIFtdKTtcbiAgY29uc3QgbGlzdEl0ZW1DaGlsZHJlbiA9IGFzc2lnbmVkRWxlbWVudHMuZmlsdGVyKChlbCkgPT4gZWw/Lm1hdGNoZXMobGlzdEl0ZW1TZWxlY3RvciQxKSk7XG4gIGNvbnN0IGxpc3RJdGVtTGlzdENoaWxkcmVuID0gYXNzaWduZWRFbGVtZW50cy5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhsaXN0U2VsZWN0b3IkMSkpXG4gICAgLm1hcCgobGlzdCkgPT4gQXJyYXkuZnJvbShsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwobGlzdEl0ZW1TZWxlY3RvciQxKSkpXG4gICAgLnJlZHVjZSgocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlKSA9PiBbLi4ucHJldmlvdXNWYWx1ZSwgLi4uY3VycmVudFZhbHVlXSwgW10pO1xuICByZXR1cm4gWy4uLmxpc3RJdGVtTGlzdENoaWxkcmVuLCAuLi5saXN0SXRlbUdyb3VwQ2hpbGRyZW4sIC4uLmxpc3RJdGVtQ2hpbGRyZW5dO1xufVxuZnVuY3Rpb24gdXBkYXRlTGlzdEl0ZW1DaGlsZHJlbihsaXN0SXRlbUNoaWxkcmVuKSB7XG4gIGxpc3RJdGVtQ2hpbGRyZW4uZm9yRWFjaCgobGlzdEl0ZW0pID0+IHtcbiAgICBsaXN0SXRlbS5zZXRQb3NpdGlvbiA9IGxpc3RJdGVtQ2hpbGRyZW4uaW5kZXhPZihsaXN0SXRlbSkgKyAxO1xuICAgIGxpc3RJdGVtLnNldFNpemUgPSBsaXN0SXRlbUNoaWxkcmVuLmxlbmd0aDtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXREZXB0aChlbGVtZW50LCBpbmNsdWRlR3JvdXAgPSBmYWxzZSkge1xuICBjb25zdCBleHByZXNzaW9uID0gaW5jbHVkZUdyb3VwXG4gICAgPyBcImFuY2VzdG9yOjpjYWxjaXRlLWxpc3QtaXRlbSB8IGFuY2VzdG9yOjpjYWxjaXRlLWxpc3QtaXRlbS1ncm91cFwiXG4gICAgOiBcImFuY2VzdG9yOjpjYWxjaXRlLWxpc3QtaXRlbVwiO1xuICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5ldmFsdWF0ZShleHByZXNzaW9uLCBlbGVtZW50LCBudWxsLCBYUGF0aFJlc3VsdC5VTk9SREVSRURfTk9ERV9TTkFQU0hPVF9UWVBFLCBudWxsKTtcbiAgcmV0dXJuIHJlc3VsdC5zbmFwc2hvdExlbmd0aDtcbn1cblxuY29uc3QgQ1NTJDEgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgdGFibGU6IFwidGFibGVcIixcbiAgc2NyaW06IFwic2NyaW1cIixcbiAgc3RhY2s6IFwic3RhY2tcIixcbiAgdGFibGVDb250YWluZXI6IFwidGFibGUtY29udGFpbmVyXCIsXG4gIHN0aWNreTogXCJzdGlja3ktcG9zXCIsXG4gIGFzc2lzdGl2ZVRleHQ6IFwiYXNzaXN0aXZlLXRleHRcIixcbn07XG5jb25zdCBkZWJvdW5jZVRpbWVvdXQgPSAwO1xuY29uc3QgU0xPVFMgPSB7XG4gIGZpbHRlckFjdGlvbnNTdGFydDogXCJmaWx0ZXItYWN0aW9ucy1zdGFydFwiLFxuICBmaWx0ZXJBY3Rpb25zRW5kOiBcImZpbHRlci1hY3Rpb25zLWVuZFwiLFxufTtcblxuY29uc3QgbGlzdENzcyA9IFwiOmhvc3QoW2Rpc2FibGVkXSl7Y3Vyc29yOmRlZmF1bHQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7b3BhY2l0eTp2YXIoLS1jYWxjaXRlLW9wYWNpdHktZGlzYWJsZWQpfTpob3N0KFtkaXNhYmxlZF0pICosOmhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKCope3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3R7ZGlzcGxheTpibG9ja306aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9LmNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZX0udGFibGUtY29udGFpbmVye2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0udGFibGUtY29udGFpbmVyICp7Ym94LXNpemluZzpib3JkZXItYm94fS50YWJsZXtpbmxpbmUtc2l6ZToxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZX0uc3RhY2t7LS1jYWxjaXRlLXN0YWNrLXBhZGRpbmctaW5saW5lOjA7LS1jYWxjaXRlLXN0YWNrLXBhZGRpbmctYmxvY2s6MH06OnNsb3R0ZWQoY2FsY2l0ZS1saXN0LWl0ZW0pey0tdHctc2hhZG93OjAgLTFweCAwIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpOy0tdHctc2hhZG93LWNvbG9yZWQ6MCAtMXB4IDAgdmFyKC0tdHctc2hhZG93LWNvbG9yKTtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyk7bWFyZ2luLWJsb2NrLXN0YXJ0OjFweH06OnNsb3R0ZWQoY2FsY2l0ZS1saXN0LWl0ZW06Zmlyc3Qtb2YtdHlwZSl7LS10dy1zaGFkb3c6MCAwICMwMDAwOy0tdHctc2hhZG93LWNvbG9yZWQ6MCAwICMwMDAwO2JveC1zaGFkb3c6dmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1yaW5nLXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctc2hhZG93KX06OnNsb3R0ZWQoY2FsY2l0ZS1saXN0LWl0ZW1bZGF0YS1maWx0ZXJdKXstLXR3LXNoYWRvdzowIDAgIzAwMDA7LS10dy1zaGFkb3ctY29sb3JlZDowIDAgIzAwMDA7Ym94LXNoYWRvdzp2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXJpbmctc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1zaGFkb3cpO21hcmdpbi1ibG9jay1zdGFydDowcHh9LnN0aWNreS1wb3N7cG9zaXRpb246c3RpY2t5O2luc2V0LWJsb2NrLXN0YXJ0OjBweDt6LWluZGV4OnZhcigtLWNhbGNpdGUtei1pbmRleC1zdGlja3kpO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpfS5zdGlja3ktcG9zIHRoe3BhZGRpbmc6MHB4fS5hc3Npc3RpdmUtdGV4dHtwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxcHg7YmxvY2stc2l6ZToxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG5jb25zdCBsaXN0SXRlbVNlbGVjdG9yID0gXCJjYWxjaXRlLWxpc3QtaXRlbVwiO1xuY29uc3QgbGlzdEl0ZW1TZWxlY3RvckRpcmVjdCA9IGA6c2NvcGUgPiBjYWxjaXRlLWxpc3QtaXRlbWA7XG5jb25zdCBwYXJlbnRTZWxlY3RvciA9IFwiY2FsY2l0ZS1saXN0LWl0ZW0tZ3JvdXAsIGNhbGNpdGUtbGlzdC1pdGVtXCI7XG5jb25zdCBMaXN0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0Q2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlTGlzdENoYW5nZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0RmlsdGVyID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlTGlzdEZpbHRlclwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0T3JkZXJDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVMaXN0T3JkZXJDaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0RGVmYXVsdFNsb3RDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbExpc3REZWZhdWx0U2xvdENoYW5nZVwiLCA2KTtcbiAgICB0aGlzLmRyYWdTZWxlY3RvciA9IFwiY2FsY2l0ZS1saXN0LWl0ZW1cIjtcbiAgICB0aGlzLmVuYWJsZWRMaXN0SXRlbXMgPSBbXTtcbiAgICB0aGlzLmhhbmRsZVNlbGVjdG9yID0gXCJjYWxjaXRlLWhhbmRsZVwiO1xuICAgIHRoaXMubGlzdEl0ZW1zID0gW107XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJtdXRhdGlvblwiLCAoKSA9PiB0aGlzLnVwZGF0ZUxpc3RJdGVtcygpKTtcbiAgICB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB1cGRhdGVMaXN0SXRlbUNoaWxkcmVuKGdldExpc3RJdGVtQ2hpbGRyZW4oZXZlbnQudGFyZ2V0KSk7XG4gICAgICBpZiAodGhpcy5wYXJlbnRMaXN0RWwpIHtcbiAgICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0RGVmYXVsdFNsb3RDaGFuZ2UuZW1pdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5oYW5kbGVGaWx0ZXJBY3Rpb25zU3RhcnRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0ZpbHRlckFjdGlvbnNTdGFydCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVGaWx0ZXJBY3Rpb25zRW5kU2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNGaWx0ZXJBY3Rpb25zRW5kID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLnNldEFjdGl2ZUxpc3RJdGVtID0gKCkgPT4ge1xuICAgICAgY29uc3QgeyBlbmFibGVkTGlzdEl0ZW1zIH0gPSB0aGlzO1xuICAgICAgaWYgKCFlbmFibGVkTGlzdEl0ZW1zLnNvbWUoKGl0ZW0pID0+IGl0ZW0uYWN0aXZlKSkge1xuICAgICAgICBpZiAoZW5hYmxlZExpc3RJdGVtc1swXSkge1xuICAgICAgICAgIGVuYWJsZWRMaXN0SXRlbXNbMF0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zID0gKGVtaXQgPSBmYWxzZSkgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gdGhpcy5lbmFibGVkTGlzdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zZWxlY3RlZCk7XG4gICAgICBpZiAoZW1pdCkge1xuICAgICAgICB0aGlzLmNhbGNpdGVMaXN0Q2hhbmdlLmVtaXQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMudXBkYXRlRmlsdGVyZWRJdGVtcyA9IChlbWl0ID0gZmFsc2UpID0+IHtcbiAgICAgIGNvbnN0IHsgbGlzdEl0ZW1zLCBmaWx0ZXJlZERhdGEsIGZpbHRlclRleHQgfSA9IHRoaXM7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBmaWx0ZXJlZERhdGEubWFwKChpdGVtKSA9PiBpdGVtLnZhbHVlKTtcbiAgICAgIGNvbnN0IGxhc3REZXNjZW5kYW50SXRlbXMgPSBsaXN0SXRlbXM/LmZpbHRlcigobGlzdEl0ZW0pID0+IGxpc3RJdGVtcy5ldmVyeSgobGkpID0+IGxpID09PSBsaXN0SXRlbSB8fCAhbGlzdEl0ZW0uY29udGFpbnMobGkpKSk7XG4gICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gbGlzdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gIWZpbHRlclRleHQgfHwgdmFsdWVzLmluY2x1ZGVzKGl0ZW0udmFsdWUpKSB8fCBbXTtcbiAgICAgIGNvbnN0IHZpc2libGVQYXJlbnRzID0gbmV3IFdlYWtTZXQoKTtcbiAgICAgIGxhc3REZXNjZW5kYW50SXRlbXMuZm9yRWFjaCgobGlzdEl0ZW0pID0+IHRoaXMuZmlsdGVyRWxlbWVudHMoeyBlbDogbGlzdEl0ZW0sIGZpbHRlcmVkSXRlbXMsIHZpc2libGVQYXJlbnRzIH0pKTtcbiAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5maW5kQW5jZXN0b3JPZkZpcnN0RmlsdGVyZWRJdGVtKGZpbHRlcmVkSXRlbXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5maWx0ZXJlZEl0ZW1zID0gZmlsdGVyZWRJdGVtcztcbiAgICAgIGlmIChlbWl0KSB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUxpc3RGaWx0ZXIuZW1pdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5zZXRGaWx0ZXJFbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5maWx0ZXJFbCA9IGVsO1xuICAgICAgdGhpcy5wZXJmb3JtRmlsdGVyKCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUZpbHRlckNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgdGhpcy5maWx0ZXJUZXh0ID0gdmFsdWU7XG4gICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkRGF0YSh0cnVlKTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0SXRlbURhdGEgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0SXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcbiAgICAgICAgZGVzY3JpcHRpb246IGl0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgIG1ldGFkYXRhOiBpdGVtLm1ldGFkYXRhLFxuICAgICAgICB2YWx1ZTogaXRlbS52YWx1ZSxcbiAgICAgIH0pKTtcbiAgICB9O1xuICAgIHRoaXMudXBkYXRlTGlzdEl0ZW1zID0gZGVib3VuY2UoKGVtaXQgPSBmYWxzZSkgPT4ge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb25BcHBlYXJhbmNlLCBzZWxlY3Rpb25Nb2RlLCBkcmFnRW5hYmxlZCB9ID0gdGhpcztcbiAgICAgIGlmICghIXRoaXMucGFyZW50TGlzdEVsKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5xdWVyeUxpc3RJdGVtcyh0cnVlKTtcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGl0ZW0uZHJhZ0hhbmRsZSA9IGRyYWdFbmFibGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRVcFNvcnRpbmcoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLnF1ZXJ5TGlzdEl0ZW1zKCk7XG4gICAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uc2VsZWN0aW9uQXBwZWFyYW5jZSA9IHNlbGVjdGlvbkFwcGVhcmFuY2U7XG4gICAgICAgIGl0ZW0uc2VsZWN0aW9uTW9kZSA9IHNlbGVjdGlvbk1vZGU7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGRyYWdJdGVtcyA9IHRoaXMucXVlcnlMaXN0SXRlbXModHJ1ZSk7XG4gICAgICBkcmFnSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLmRyYWdIYW5kbGUgPSBkcmFnRW5hYmxlZDtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5saXN0SXRlbXMgPSBpdGVtcztcbiAgICAgIGlmICh0aGlzLmZpbHRlckVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kYXRhRm9yRmlsdGVyID0gdGhpcy5nZXRJdGVtRGF0YSgpO1xuICAgICAgICBpZiAodGhpcy5maWx0ZXJFbCkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyRWwuaXRlbXMgPSB0aGlzLmRhdGFGb3JGaWx0ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlRmlsdGVyZWRJdGVtcyhlbWl0KTtcbiAgICAgIHRoaXMuZW5hYmxlZExpc3RJdGVtcyA9IHRoaXMuZmlsdGVyZWRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmRpc2FibGVkICYmICFpdGVtLmNsb3NlZCk7XG4gICAgICB0aGlzLnNldEFjdGl2ZUxpc3RJdGVtKCk7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkSXRlbXMoZW1pdCk7XG4gICAgICB0aGlzLnNldFVwU29ydGluZygpO1xuICAgIH0sIGRlYm91bmNlVGltZW91dCk7XG4gICAgdGhpcy5xdWVyeUxpc3RJdGVtcyA9IChkaXJlY3QgPSBmYWxzZSkgPT4ge1xuICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKGRpcmVjdCA/IGxpc3RJdGVtU2VsZWN0b3JEaXJlY3QgOiBsaXN0SXRlbVNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICB0aGlzLmZvY3VzUm93ID0gKGZvY3VzRWwpID0+IHtcbiAgICAgIGNvbnN0IHsgZW5hYmxlZExpc3RJdGVtcyB9ID0gdGhpcztcbiAgICAgIGlmICghZm9jdXNFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbmFibGVkTGlzdEl0ZW1zLmZvckVhY2goKGxpc3RJdGVtKSA9PiAobGlzdEl0ZW0uYWN0aXZlID0gbGlzdEl0ZW0gPT09IGZvY3VzRWwpKTtcbiAgICAgIGZvY3VzRWwuc2V0Rm9jdXMoKTtcbiAgICB9O1xuICAgIHRoaXMuaXNOYXZpZ2FibGUgPSAobGlzdEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHBhcmVudExpc3RJdGVtRWwgPSBsaXN0SXRlbS5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KGxpc3RJdGVtU2VsZWN0b3IpO1xuICAgICAgaWYgKCFwYXJlbnRMaXN0SXRlbUVsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmVudExpc3RJdGVtRWwub3BlbiAmJiB0aGlzLmlzTmF2aWdhYmxlKHBhcmVudExpc3RJdGVtRWwpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVMaXN0S2V5ZG93biA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgfHwgISF0aGlzLnBhcmVudExpc3RFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XG4gICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdGhpcy5lbmFibGVkTGlzdEl0ZW1zLmZpbHRlcigobGlzdEl0ZW0pID0+IHRoaXMuaXNOYXZpZ2FibGUobGlzdEl0ZW0pKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGZpbHRlcmVkSXRlbXMuZmluZEluZGV4KChsaXN0SXRlbSkgPT4gbGlzdEl0ZW0uYWN0aXZlKTtcbiAgICAgIGlmIChrZXkgPT09IFwiQXJyb3dEb3duXCIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gZXZlbnQudGFyZ2V0ID09PSB0aGlzLmZpbHRlckVsID8gMCA6IGN1cnJlbnRJbmRleCArIDE7XG4gICAgICAgIGlmIChmaWx0ZXJlZEl0ZW1zW25leHRJbmRleF0pIHtcbiAgICAgICAgICB0aGlzLmZvY3VzUm93KGZpbHRlcmVkSXRlbXNbbmV4dEluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gMCAmJiB0aGlzLmZpbHRlckVuYWJsZWQpIHtcbiAgICAgICAgICB0aGlzLmZpbHRlckVsPy5zZXRGb2N1cygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggLSAxO1xuICAgICAgICBpZiAoZmlsdGVyZWRJdGVtc1twcmV2SW5kZXhdKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c1JvdyhmaWx0ZXJlZEl0ZW1zW3ByZXZJbmRleF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChrZXkgPT09IFwiSG9tZVwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IGhvbWVJdGVtID0gZmlsdGVyZWRJdGVtc1swXTtcbiAgICAgICAgaWYgKGhvbWVJdGVtKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c1Jvdyhob21lSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJFbmRcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBlbmRJdGVtID0gZmlsdGVyZWRJdGVtc1tmaWx0ZXJlZEl0ZW1zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZW5kSXRlbSkge1xuICAgICAgICAgIHRoaXMuZm9jdXNSb3coZW5kSXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZmluZEFuY2VzdG9yT2ZGaXJzdEZpbHRlcmVkSXRlbSA9IChmaWx0ZXJlZEl0ZW1zKSA9PiB7XG4gICAgICB0aGlzLmFuY2VzdG9yT2ZGaXJzdEZpbHRlcmVkSXRlbT8ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1maWx0ZXJcIik7XG4gICAgICBmaWx0ZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWZpbHRlclwiKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5hbmNlc3Rvck9mRmlyc3RGaWx0ZXJlZEl0ZW0gPSB0aGlzLmdldFRvcExldmVsQW5jZXN0b3JJdGVtRWxlbWVudChmaWx0ZXJlZEl0ZW1zWzBdKTtcbiAgICAgIGZpbHRlcmVkSXRlbXNbMF0uc2V0QXR0cmlidXRlKFwiZGF0YS1maWx0ZXJcIiwgXCIwXCIpO1xuICAgICAgdGhpcy5hbmNlc3Rvck9mRmlyc3RGaWx0ZXJlZEl0ZW0/LnNldEF0dHJpYnV0ZShcImRhdGEtZmlsdGVyXCIsIFwiMFwiKTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0VG9wTGV2ZWxBbmNlc3Rvckl0ZW1FbGVtZW50ID0gKGVsKSA9PiB7XG4gICAgICBsZXQgY2xvc2VzdFBhcmVudCA9IGVsLnBhcmVudEVsZW1lbnQuY2xvc2VzdChcImNhbGNpdGUtbGlzdC1pdGVtXCIpO1xuICAgICAgd2hpbGUgKGNsb3Nlc3RQYXJlbnQpIHtcbiAgICAgICAgY29uc3QgY2xvc2VzdExpc3RJdGVtQW5jZXN0b3IgPSBjbG9zZXN0UGFyZW50LnBhcmVudEVsZW1lbnQuY2xvc2VzdChcImNhbGNpdGUtbGlzdC1pdGVtXCIpO1xuICAgICAgICBpZiAoY2xvc2VzdExpc3RJdGVtQW5jZXN0b3IpIHtcbiAgICAgICAgICBjbG9zZXN0UGFyZW50ID0gY2xvc2VzdExpc3RJdGVtQW5jZXN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNsb3Nlc3RQYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FuUHVsbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNhblB1dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRyYWdFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5ncm91cCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZpbHRlckVuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSBbXTtcbiAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IFtdO1xuICAgIHRoaXMuZmlsdGVyUGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5maWx0ZXJUZXh0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubGFiZWwgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vcGVuYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgIHRoaXMuc2VsZWN0aW9uTW9kZSA9IFwibm9uZVwiO1xuICAgIHRoaXMuc2VsZWN0aW9uQXBwZWFyYW5jZSA9IFwiaWNvblwiO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmFzc2lzdGl2ZVRleHQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kYXRhRm9yRmlsdGVyID0gW107XG4gICAgdGhpcy5oYXNGaWx0ZXJBY3Rpb25zRW5kID0gZmFsc2U7XG4gICAgdGhpcy5oYXNGaWx0ZXJBY3Rpb25zU3RhcnQgPSBmYWxzZTtcbiAgfVxuICBhc3luYyBoYW5kbGVGaWx0ZXJUZXh0Q2hhbmdlKCkge1xuICAgIHRoaXMucGVyZm9ybUZpbHRlcigpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBoYW5kbGVMaXN0SXRlbUNoYW5nZSgpIHtcbiAgICB0aGlzLnVwZGF0ZUxpc3RJdGVtcygpO1xuICB9XG4gIGhhbmRsZUNhbGNpdGVJbnRlcm5hbEZvY3VzUHJldmlvdXNJdGVtKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMucGFyZW50TGlzdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IHsgZW5hYmxlZExpc3RJdGVtcyB9ID0gdGhpcztcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBlbmFibGVkTGlzdEl0ZW1zLmZpbmRJbmRleCgobGlzdEl0ZW0pID0+IGxpc3RJdGVtLmFjdGl2ZSk7XG4gICAgY29uc3QgcHJldkluZGV4ID0gY3VycmVudEluZGV4IC0gMTtcbiAgICBpZiAoZW5hYmxlZExpc3RJdGVtc1twcmV2SW5kZXhdKSB7XG4gICAgICB0aGlzLmZvY3VzUm93KGVuYWJsZWRMaXN0SXRlbXNbcHJldkluZGV4XSk7XG4gICAgfVxuICB9XG4gIGhhbmRsZUNhbGNpdGVJbnRlcm5hbExpc3RJdGVtQWN0aXZlKGV2ZW50KSB7XG4gICAgaWYgKCEhdGhpcy5wYXJlbnRMaXN0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IHsgbGlzdEl0ZW1zIH0gPSB0aGlzO1xuICAgIGxpc3RJdGVtcy5mb3JFYWNoKChsaXN0SXRlbSkgPT4ge1xuICAgICAgbGlzdEl0ZW0uYWN0aXZlID0gbGlzdEl0ZW0gPT09IHRhcmdldDtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVDYWxjaXRlTGlzdEl0ZW1TZWxlY3QoKSB7XG4gICAgaWYgKCEhdGhpcy5wYXJlbnRMaXN0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKHRydWUpO1xuICB9XG4gIGhhbmRsZUNhbGNpdGVJbnRlcm5hbEhhbmRsZUNoYW5nZShldmVudCkge1xuICAgIHRoaXMuYXNzaXN0aXZlVGV4dCA9IGV2ZW50LmRldGFpbC5tZXNzYWdlO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIGhhbmRsZUNhbGNpdGVIYW5kbGVOdWRnZShldmVudCkge1xuICAgIGlmICghIXRoaXMucGFyZW50TGlzdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlTnVkZ2VFdmVudChldmVudCk7XG4gIH1cbiAgaGFuZGxlQ2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3QoZXZlbnQpIHtcbiAgICBpZiAoISF0aGlzLnBhcmVudExpc3RFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgeyBsaXN0SXRlbXMsIHNlbGVjdGlvbk1vZGUgfSA9IHRoaXM7XG4gICAgaWYgKHRhcmdldC5zZWxlY3RlZCAmJiAoc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIiB8fCBzZWxlY3Rpb25Nb2RlID09PSBcInNpbmdsZS1wZXJzaXN0XCIpKSB7XG4gICAgICBsaXN0SXRlbXMuZm9yRWFjaCgobGlzdEl0ZW0pID0+IChsaXN0SXRlbS5zZWxlY3RlZCA9IGxpc3RJdGVtID09PSB0YXJnZXQpKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKCk7XG4gIH1cbiAgaGFuZGxlQ2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3RNdWx0aXBsZShldmVudCkge1xuICAgIGlmICghIXRoaXMucGFyZW50TGlzdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IHsgdGFyZ2V0LCBkZXRhaWwgfSA9IGV2ZW50O1xuICAgIGNvbnN0IHsgZW5hYmxlZExpc3RJdGVtcywgbGFzdFNlbGVjdGVkSW5mbyB9ID0gdGhpcztcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB0YXJnZXQ7XG4gICAgaWYgKGRldGFpbC5zZWxlY3RNdWx0aXBsZSAmJiAhIWxhc3RTZWxlY3RlZEluZm8pIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGVuYWJsZWRMaXN0SXRlbXMuaW5kZXhPZihzZWxlY3RlZEl0ZW0pO1xuICAgICAgY29uc3QgbGFzdFNlbGVjdGVkSW5kZXggPSBlbmFibGVkTGlzdEl0ZW1zLmluZGV4T2YobGFzdFNlbGVjdGVkSW5mby5zZWxlY3RlZEl0ZW0pO1xuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IE1hdGgubWluKGxhc3RTZWxlY3RlZEluZGV4LCBjdXJyZW50SW5kZXgpO1xuICAgICAgY29uc3QgZW5kSW5kZXggPSBNYXRoLm1heChsYXN0U2VsZWN0ZWRJbmRleCwgY3VycmVudEluZGV4KTtcbiAgICAgIGVuYWJsZWRMaXN0SXRlbXNcbiAgICAgICAgLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4ICsgMSlcbiAgICAgICAgLmZvckVhY2goKGl0ZW0pID0+IChpdGVtLnNlbGVjdGVkID0gbGFzdFNlbGVjdGVkSW5mby5zZWxlY3RlZCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMubGFzdFNlbGVjdGVkSW5mbyA9IHsgc2VsZWN0ZWRJdGVtLCBzZWxlY3RlZDogc2VsZWN0ZWRJdGVtLnNlbGVjdGVkIH07XG4gICAgfVxuICB9XG4gIGhhbmRsZUNhbGNpdGVJbnRlcm5hbExpc3RJdGVtQ2hhbmdlKGV2ZW50KSB7XG4gICAgaWYgKCEhdGhpcy5wYXJlbnRMaXN0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy51cGRhdGVMaXN0SXRlbXMoKTtcbiAgfVxuICBoYW5kbGVDYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUdyb3VwRGVmYXVsdFNsb3RDaGFuZ2UoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAoZHJhZ0FjdGl2ZSh0aGlzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgdGhpcy5jb25uZWN0T2JzZXJ2ZXIoKTtcbiAgICB0aGlzLnVwZGF0ZUxpc3RJdGVtcygpO1xuICAgIHRoaXMuc2V0VXBTb3J0aW5nKCk7XG4gICAgY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICAgIHRoaXMuc2V0UGFyZW50TGlzdCgpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGlmIChkcmFnQWN0aXZlKHRoaXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlzY29ubmVjdE9ic2VydmVyKCk7XG4gICAgZGlzY29ubmVjdFNvcnRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgZWZmZWN0aXZlTG9jYWxlQ2hhbmdlKCkge1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqXG4gICAqIFNldHMgZm9jdXMgb24gdGhlIGNvbXBvbmVudCdzIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICBpZiAodGhpcy5maWx0ZXJFbmFibGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXJFbD8uc2V0Rm9jdXMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZExpc3RJdGVtcy5maW5kKChsaXN0SXRlbSkgPT4gbGlzdEl0ZW0uYWN0aXZlKT8uc2V0Rm9jdXMoKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgbG9hZGluZywgbGFiZWwsIGRpc2FibGVkLCBkYXRhRm9yRmlsdGVyLCBmaWx0ZXJFbmFibGVkLCBmaWx0ZXJQbGFjZWhvbGRlciwgZmlsdGVyVGV4dCwgaGFzRmlsdGVyQWN0aW9uc1N0YXJ0LCBoYXNGaWx0ZXJBY3Rpb25zRW5kLCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTJDEuY29udGFpbmVyIH0sIHRoaXMuZHJhZ0VuYWJsZWQgPyAoaChcInNwYW5cIiwgeyBcImFyaWEtbGl2ZVwiOiBcImFzc2VydGl2ZVwiLCBjbGFzczogQ1NTJDEuYXNzaXN0aXZlVGV4dCB9LCB0aGlzLmFzc2lzdGl2ZVRleHQpKSA6IG51bGwsIHRoaXMucmVuZGVySXRlbUFyaWFMaXZlKCksIGxvYWRpbmcgPyBoKFwiY2FsY2l0ZS1zY3JpbVwiLCB7IGNsYXNzOiBDU1MkMS5zY3JpbSwgbG9hZGluZzogbG9hZGluZyB9KSA6IG51bGwsIGgoXCJ0YWJsZVwiLCB7IFwiYXJpYS1idXN5XCI6IHRvQXJpYUJvb2xlYW4obG9hZGluZyksIFwiYXJpYS1sYWJlbFwiOiBsYWJlbCB8fCBcIlwiLCBjbGFzczogQ1NTJDEudGFibGUsIG9uS2V5RG93bjogdGhpcy5oYW5kbGVMaXN0S2V5ZG93biwgcm9sZTogXCJ0cmVlZ3JpZFwiIH0sIGZpbHRlckVuYWJsZWQgfHwgaGFzRmlsdGVyQWN0aW9uc1N0YXJ0IHx8IGhhc0ZpbHRlckFjdGlvbnNFbmQgPyAoaChcInRoZWFkXCIsIG51bGwsIGgoXCJ0clwiLCB7IGNsYXNzOiB7IFtDU1MkMS5zdGlja3ldOiB0cnVlIH0gfSwgaChcInRoXCIsIHsgY29sU3BhbjogTUFYX0NPTFVNTlMgfSwgaChcImNhbGNpdGUtc3RhY2tcIiwgeyBjbGFzczogQ1NTJDEuc3RhY2sgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5maWx0ZXJBY3Rpb25zU3RhcnQsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVGaWx0ZXJBY3Rpb25zU3RhcnRTbG90Q2hhbmdlLCBzbG90OiBTTE9UUyQyLmFjdGlvbnNTdGFydCB9KSwgaChcImNhbGNpdGUtZmlsdGVyXCIsIHsgXCJhcmlhLWxhYmVsXCI6IGZpbHRlclBsYWNlaG9sZGVyLCBkaXNhYmxlZDogZGlzYWJsZWQsIGl0ZW1zOiBkYXRhRm9yRmlsdGVyLCBvbkNhbGNpdGVGaWx0ZXJDaGFuZ2U6IHRoaXMuaGFuZGxlRmlsdGVyQ2hhbmdlLCBwbGFjZWhvbGRlcjogZmlsdGVyUGxhY2Vob2xkZXIsIHZhbHVlOiBmaWx0ZXJUZXh0LFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRGaWx0ZXJFbCB9KSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5maWx0ZXJBY3Rpb25zRW5kLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlRmlsdGVyQWN0aW9uc0VuZFNsb3RDaGFuZ2UsIHNsb3Q6IFNMT1RTJDIuYWN0aW9uc0VuZCB9KSkpKSkpIDogbnVsbCwgaChcInRib2R5XCIsIHsgY2xhc3M6IENTUyQxLnRhYmxlQ29udGFpbmVyIH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlIH0pKSkpKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlckl0ZW1BcmlhTGl2ZSgpIHtcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBlbmFibGVkTGlzdEl0ZW1zLCBwYXJlbnRMaXN0RWwsIGVmZmVjdGl2ZUxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBmaWx0ZXJFbmFibGVkLCBmaWx0ZXJUZXh0LCBmaWx0ZXJlZERhdGEsIH0gPSB0aGlzO1xuICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xuICAgICAgbG9jYWxlOiBlZmZlY3RpdmVMb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgfTtcbiAgICByZXR1cm4gIXBhcmVudExpc3RFbCA/IChoKFwiZGl2XCIsIHsgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIiwgY2xhc3M6IENTUyQxLmFzc2lzdGl2ZVRleHQgfSwgZmlsdGVyRW5hYmxlZCAmJiBmaWx0ZXJUZXh0ICYmIGZpbHRlcmVkRGF0YT8ubGVuZ3RoID8gKGgoXCJkaXZcIiwgeyBrZXk6IFwiYXJpYS1maWx0ZXItZW5hYmxlZFwiIH0sIG1lc3NhZ2VzLmZpbHRlckVuYWJsZWQpKSA6IG51bGwsIGgoXCJkaXZcIiwgeyBrZXk6IFwiYXJpYS1pdGVtLWNvdW50XCIgfSwgbWVzc2FnZXMudG90YWwucmVwbGFjZShcIntjb3VudH1cIiwgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLmxvY2FsaXplKGVuYWJsZWRMaXN0SXRlbXMubGVuZ3RoLnRvU3RyaW5nKCkpKSksIGVuYWJsZWRMaXN0SXRlbXMubGVuZ3RoID8gKGgoXCJvbFwiLCB7IGtleTogXCJhcmlhLWl0ZW0tbGlzdFwiIH0sIGVuYWJsZWRMaXN0SXRlbXMubWFwKChpdGVtKSA9PiAoaChcImxpXCIsIG51bGwsIGl0ZW0ubGFiZWwpKSkpKSA6IG51bGwpKSA6IG51bGw7XG4gIH1cbiAgY29ubmVjdE9ic2VydmVyKCkge1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgfVxuICBkaXNjb25uZWN0T2JzZXJ2ZXIoKSB7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gIH1cbiAgc2V0VXBTb3J0aW5nKCkge1xuICAgIGNvbnN0IHsgZHJhZ0VuYWJsZWQgfSA9IHRoaXM7XG4gICAgaWYgKCFkcmFnRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25uZWN0U29ydGFibGVDb21wb25lbnQodGhpcyk7XG4gIH1cbiAgb25EcmFnU3RhcnQoKSB7XG4gICAgdGhpcy5kaXNjb25uZWN0T2JzZXJ2ZXIoKTtcbiAgfVxuICBvbkRyYWdFbmQoKSB7XG4gICAgdGhpcy5jb25uZWN0T2JzZXJ2ZXIoKTtcbiAgfVxuICBvbkRyYWdTb3J0KGRldGFpbCkge1xuICAgIHRoaXMuc2V0UGFyZW50TGlzdCgpO1xuICAgIHRoaXMudXBkYXRlTGlzdEl0ZW1zKCk7XG4gICAgdGhpcy5jYWxjaXRlTGlzdE9yZGVyQ2hhbmdlLmVtaXQoZGV0YWlsKTtcbiAgfVxuICBzZXRQYXJlbnRMaXN0KCkge1xuICAgIHRoaXMucGFyZW50TGlzdEVsID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KFwiY2FsY2l0ZS1saXN0XCIpO1xuICB9XG4gIGZpbHRlckVsZW1lbnRzKHsgZWwsIGZpbHRlcmVkSXRlbXMsIHZpc2libGVQYXJlbnRzLCB9KSB7XG4gICAgY29uc3QgaGlkZGVuID0gIXZpc2libGVQYXJlbnRzLmhhcyhlbCkgJiYgIWZpbHRlcmVkSXRlbXMuaW5jbHVkZXMoZWwpO1xuICAgIGVsLmhpZGRlbiA9IGhpZGRlbjtcbiAgICBjb25zdCBjbG9zZXN0UGFyZW50ID0gZWwucGFyZW50RWxlbWVudC5jbG9zZXN0KHBhcmVudFNlbGVjdG9yKTtcbiAgICBpZiAoIWNsb3Nlc3RQYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFoaWRkZW4pIHtcbiAgICAgIHZpc2libGVQYXJlbnRzLmFkZChjbG9zZXN0UGFyZW50KTtcbiAgICB9XG4gICAgdGhpcy5maWx0ZXJFbGVtZW50cyh7XG4gICAgICBlbDogY2xvc2VzdFBhcmVudCxcbiAgICAgIGZpbHRlcmVkSXRlbXMsXG4gICAgICB2aXNpYmxlUGFyZW50cyxcbiAgICB9KTtcbiAgfVxuICB1cGRhdGVGaWx0ZXJlZERhdGEoZW1pdCA9IGZhbHNlKSB7XG4gICAgY29uc3QgeyBmaWx0ZXJFbCB9ID0gdGhpcztcbiAgICBpZiAoIWZpbHRlckVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmaWx0ZXJFbC5maWx0ZXJlZEl0ZW1zKSB7XG4gICAgICB0aGlzLmZpbHRlcmVkRGF0YSA9IGZpbHRlckVsLmZpbHRlcmVkSXRlbXM7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlTGlzdEl0ZW1zKGVtaXQpO1xuICB9XG4gIGFzeW5jIHBlcmZvcm1GaWx0ZXIoKSB7XG4gICAgY29uc3QgeyBmaWx0ZXJFbCwgZmlsdGVyVGV4dCB9ID0gdGhpcztcbiAgICBpZiAoIWZpbHRlckVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZpbHRlckVsLnZhbHVlID0gZmlsdGVyVGV4dDtcbiAgICBhd2FpdCBmaWx0ZXJFbC5maWx0ZXIoZmlsdGVyVGV4dCk7XG4gICAgdGhpcy51cGRhdGVGaWx0ZXJlZERhdGEoKTtcbiAgfVxuICBoYW5kbGVOdWRnZUV2ZW50KGV2ZW50KSB7XG4gICAgY29uc3QgeyBkaXJlY3Rpb24gfSA9IGV2ZW50LmRldGFpbDtcbiAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICBjb25zdCBoYW5kbGUgPSBjb21wb3NlZFBhdGguZmluZCgoZWwpID0+IGVsLnRhZ05hbWUgPT09IFwiQ0FMQ0lURS1IQU5ETEVcIik7XG4gICAgY29uc3Qgc29ydEl0ZW0gPSBjb21wb3NlZFBhdGguZmluZCgoZWwpID0+IGVsLnRhZ05hbWUgPT09IFwiQ0FMQ0lURS1MSVNULUlURU1cIik7XG4gICAgY29uc3QgcGFyZW50RWwgPSBzb3J0SXRlbT8ucGFyZW50RWxlbWVudDtcbiAgICBpZiAoIXBhcmVudEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgZW5hYmxlZExpc3RJdGVtcyB9ID0gdGhpcztcbiAgICBjb25zdCBzYW1lUGFyZW50SXRlbXMgPSBlbmFibGVkTGlzdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5wYXJlbnRFbGVtZW50ID09PSBwYXJlbnRFbCk7XG4gICAgY29uc3QgbGFzdEluZGV4ID0gc2FtZVBhcmVudEl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgY29uc3Qgb2xkSW5kZXggPSBzYW1lUGFyZW50SXRlbXMuaW5kZXhPZihzb3J0SXRlbSk7XG4gICAgbGV0IGFwcGVuZEluc3RlYWQgPSBmYWxzZTtcbiAgICBsZXQgbmV3SW5kZXg7XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJ1cFwiKSB7XG4gICAgICBpZiAob2xkSW5kZXggPT09IDApIHtcbiAgICAgICAgYXBwZW5kSW5zdGVhZCA9IHRydWU7XG4gICAgICAgIG5ld0luZGV4ID0gbGFzdEluZGV4O1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5ld0luZGV4ID0gb2xkSW5kZXggLSAxO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmIChvbGRJbmRleCA9PT0gbGFzdEluZGV4KSB7XG4gICAgICAgIG5ld0luZGV4ID0gMDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9sZEluZGV4ID09PSBsYXN0SW5kZXggLSAxKSB7XG4gICAgICAgIGFwcGVuZEluc3RlYWQgPSB0cnVlO1xuICAgICAgICBuZXdJbmRleCA9IGxhc3RJbmRleDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXdJbmRleCA9IG9sZEluZGV4ICsgMjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0T2JzZXJ2ZXIoKTtcbiAgICBpZiAoYXBwZW5kSW5zdGVhZCkge1xuICAgICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoc29ydEl0ZW0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBhcmVudEVsLmluc2VydEJlZm9yZShzb3J0SXRlbSwgc2FtZVBhcmVudEl0ZW1zW25ld0luZGV4XSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlTGlzdEl0ZW1zKCk7XG4gICAgdGhpcy5jb25uZWN0T2JzZXJ2ZXIoKTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0T3JkZXJDaGFuZ2UuZW1pdCh7XG4gICAgICBkcmFnRWw6IHNvcnRJdGVtLFxuICAgICAgZnJvbUVsOiBwYXJlbnRFbCxcbiAgICAgIHRvRWw6IHBhcmVudEVsLFxuICAgICAgbmV3SW5kZXgsXG4gICAgICBvbGRJbmRleCxcbiAgICB9KTtcbiAgICBoYW5kbGUuc2V0Rm9jdXMoKS50aGVuKCgpID0+IHtcbiAgICAgIGhhbmRsZS5hY3RpdmF0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJmaWx0ZXJUZXh0XCI6IFtcImhhbmRsZUZpbHRlclRleHRDaGFuZ2VcIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJmaWx0ZXJFbmFibGVkXCI6IFtcImhhbmRsZUxpc3RJdGVtQ2hhbmdlXCJdLFxuICAgIFwiZ3JvdXBcIjogW1wiaGFuZGxlTGlzdEl0ZW1DaGFuZ2VcIl0sXG4gICAgXCJkcmFnRW5hYmxlZFwiOiBbXCJoYW5kbGVMaXN0SXRlbUNoYW5nZVwiXSxcbiAgICBcInNlbGVjdGlvbk1vZGVcIjogW1wiaGFuZGxlTGlzdEl0ZW1DaGFuZ2VcIl0sXG4gICAgXCJzZWxlY3Rpb25BcHBlYXJhbmNlXCI6IFtcImhhbmRsZUxpc3RJdGVtQ2hhbmdlXCJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFtcImVmZmVjdGl2ZUxvY2FsZUNoYW5nZVwiXVxuICB9OyB9XG59O1xuTGlzdC5zdHlsZSA9IGxpc3RDc3M7XG5cbmNvbnN0IGxpc3RJdGVtQ3NzID0gXCI6aG9zdChbZGlzYWJsZWRdKXtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtb3BhY2l0eS1kaXNhYmxlZCl9Omhvc3QoW2Rpc2FibGVkXSkgKiw6aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoKil7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uOy0tY2FsY2l0ZS1saXN0LWl0ZW0taWNvbi1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTstLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50OjFyZW19Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfS5jb250YWluZXJ7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6ZmxleDtmbGV4OjEgMSAwJTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKTtmb250LWZhbWlseTp2YXIoLS1jYWxjaXRlLXNhbnMtZmFtaWx5KTtwYWRkaW5nLWlubGluZS1zdGFydDpjYWxjKHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50KSAqIHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50LW11bHRpcGxpZXIpKX0uY29udGFpbmVyICp7Ym94LXNpemluZzpib3JkZXItYm94fS5jb250YWluZXI6aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMil9LmNvbnRhaW5lcjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSl9LmNvbnRhaW5lci0tYm9yZGVyLXNlbGVjdGVke2JvcmRlci1pbmxpbmUtc3RhcnQ6NHB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpfS5jb250YWluZXItLWJvcmRlci11bnNlbGVjdGVke2JvcmRlci1pbmxpbmUtc3RhcnQ6NHB4IHNvbGlkIHRyYW5zcGFyZW50fS5uZXN0ZWQtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSl9Lm5lc3RlZC1jb250YWluZXItLWhpZGRlbntkaXNwbGF5Om5vbmV9LmNvbnRlbnQtY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4OjEgMSBhdXRvOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO2FsaWduLWl0ZW1zOnN0cmV0Y2g7cGFkZGluZzowcHg7Zm9udC1mYW1pbHk6dmFyKC0tY2FsY2l0ZS1zYW5zLWZhbWlseSk7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1ub3JtYWwpO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKX10cix0ZHtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50fXRyOmZvY3VzLHRkOmZvY3Vze291dGxpbmU6MnB4IHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpO291dGxpbmUtb2Zmc2V0OmNhbGMoXFxuICAgICAgICAgICAgLTJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfS5jb250ZW50LC5jdXN0b20tY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nLWlubGluZTowLjc1cmVtO3BhZGRpbmctYmxvY2s6MC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MS4zNzV9LmxhYmVsLC5kZXNjcmlwdGlvbiwuY29udGVudC1ib3R0b217Zm9udC1mYW1pbHk6dmFyKC0tY2FsY2l0ZS1zYW5zLWZhbWlseSk7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0yKTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7d29yZC13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay13b3JkfS5sYWJlbDpvbmx5LWNoaWxkLC5kZXNjcmlwdGlvbjpvbmx5LWNoaWxkLC5jb250ZW50LWJvdHRvbTpvbmx5LWNoaWxke21hcmdpbjowcHg7cGFkZGluZy1ibG9jazowLjI1cmVtfS5sYWJlbHtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9LmRlc2NyaXB0aW9ue21hcmdpbi1ibG9jay1zdGFydDowLjEyNXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMyl9LmNvbnRlbnQtc3RhcnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LmNvbnRlbnQtZW5ke2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uY29udGVudC1zdGFydCwuY29udGVudC1lbmR7ZmxleDoxIDEgYXV0b30uY29udGVudC1ib3R0b217ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKTtwYWRkaW5nLWlubGluZS1zdGFydDpjYWxjKHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50KSAqIHZhcigtLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50LW11bHRpcGxpZXIpKX0uY29udGVudC1jb250YWluZXItLWhhcy1jZW50ZXItY29udGVudCAuY29udGVudC1zdGFydCwuY29udGVudC1jb250YWluZXItLWhhcy1jZW50ZXItY29udGVudCAuY29udGVudC1lbmR7ZmxleDowIDEgYXV0b30uc2VsZWN0aW9uLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7cGFkZGluZy1pbmxpbmU6MC43NXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLWxpc3QtaXRlbS1pY29uLWNvbG9yKX0uYWN0aW9ucy1zdGFydCwuYWN0aW9ucy1lbmQsLmNvbnRlbnQtc3RhcnQsLmNvbnRlbnQtZW5kLC5zZWxlY3Rpb24tY29udGFpbmVyLC5kcmFnLWNvbnRhaW5lciwub3Blbi1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0ub3Blbi1jb250YWluZXIsLnNlbGVjdGlvbi1jb250YWluZXJ7Y3Vyc29yOnBvaW50ZXJ9LmNvbnRlbnQtc3RhcnQgOjpzbG90dGVkKGNhbGNpdGUtaWNvbiksLmNvbnRlbnQtZW5kIDo6c2xvdHRlZChjYWxjaXRlLWljb24pe21hcmdpbi1pbmxpbmU6MC43NXJlbTthbGlnbi1zZWxmOmNlbnRlcn0uYWN0aW9ucy1zdGFydCA6OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24pLC5hY3Rpb25zLXN0YXJ0IDo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1tZW51KSwuYWN0aW9ucy1zdGFydCA6OnNsb3R0ZWQoY2FsY2l0ZS1oYW5kbGUpLC5hY3Rpb25zLXN0YXJ0IDo6c2xvdHRlZChjYWxjaXRlLWRyb3Bkb3duKSwuYWN0aW9ucy1lbmQgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uKSwuYWN0aW9ucy1lbmQgOjpzbG90dGVkKGNhbGNpdGUtYWN0aW9uLW1lbnUpLC5hY3Rpb25zLWVuZCA6OnNsb3R0ZWQoY2FsY2l0ZS1oYW5kbGUpLC5hY3Rpb25zLWVuZCA6OnNsb3R0ZWQoY2FsY2l0ZS1kcm9wZG93bil7YWxpZ24tc2VsZjpzdHJldGNoO2NvbG9yOmluaGVyaXR9OjpzbG90dGVkKGNhbGNpdGUtbGlzdC1pdGVtKXtib3JkZXItd2lkdGg6MHB4O2JvcmRlci1ibG9jay1zdGFydC13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX06OnNsb3R0ZWQoY2FsY2l0ZS1saXN0OmVtcHR5KXtwYWRkaW5nLWJsb2NrOjAuNzVyZW19Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IGZvY3VzTWFwID0gbmV3IE1hcCgpO1xuY29uc3QgbGlzdFNlbGVjdG9yID0gXCJjYWxjaXRlLWxpc3RcIjtcbmNvbnN0IExpc3RJdGVtID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0SXRlbVNlbGVjdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUxpc3RJdGVtU2VsZWN0XCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUxpc3RJdGVtQ2xvc2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVMaXN0SXRlbUNsb3NlXCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3QgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbExpc3RJdGVtU2VsZWN0XCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3RNdWx0aXBsZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1TZWxlY3RNdWx0aXBsZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbExpc3RJdGVtQWN0aXZlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUFjdGl2ZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbEZvY3VzUHJldmlvdXNJdGVtID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxGb2N1c1ByZXZpb3VzSXRlbVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbExpc3RJdGVtQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUNoYW5nZVwiLCA2KTtcbiAgICB0aGlzLmNsb3NlQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jYWxjaXRlTGlzdEl0ZW1DbG9zZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUNvbnRlbnRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0N1c3RvbUNvbnRlbnQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQWN0aW9uc1N0YXJ0U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNBY3Rpb25zU3RhcnQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlQWN0aW9uc0VuZFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzQWN0aW9uc0VuZCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVDb250ZW50U3RhcnRTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0NvbnRlbnRTdGFydCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVDb250ZW50RW5kU2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNDb250ZW50RW5kID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUNvbnRlbnRCb3R0b21TbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0NvbnRlbnRCb3R0b20gPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlRGVmYXVsdFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlT3BlbmFibGVDaGFuZ2UoZXZlbnQudGFyZ2V0KTtcbiAgICB9O1xuICAgIHRoaXMudG9nZ2xlT3BlbiA9ICgpID0+IHtcbiAgICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XG4gICAgfTtcbiAgICB0aGlzLml0ZW1DbGlja2VkID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkKGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1BY3RpdmUuZW1pdCgpO1xuICAgIH07XG4gICAgdGhpcy50b2dnbGVTZWxlY3RlZCA9IChzaGlmdEtleSkgPT4ge1xuICAgICAgY29uc3QgeyBzZWxlY3Rpb25Nb2RlLCBzZWxlY3RlZCB9ID0gdGhpcztcbiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCIgfHwgc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIikge1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gIXNlbGVjdGVkO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGUtcGVyc2lzdFwiKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbVNlbGVjdE11bHRpcGxlLmVtaXQoe1xuICAgICAgICBzZWxlY3RNdWx0aXBsZTogc2hpZnRLZXkgJiYgc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmNhbGNpdGVMaXN0SXRlbVNlbGVjdC5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUl0ZW1LZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGtleSB9ID0gZXZlbnQ7XG4gICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwsIGNvbnRlbnRFbCwgYWN0aW9uc1N0YXJ0RWwsIGFjdGlvbnNFbmRFbCwgb3Blbiwgb3BlbmFibGUgfSA9IHRoaXM7XG4gICAgICBjb25zdCBjZWxscyA9IFthY3Rpb25zU3RhcnRFbCwgY29udGVudEVsLCBhY3Rpb25zRW5kRWxdLmZpbHRlcigoZWwpID0+IGVsICYmICFlbC5oaWRkZW4pO1xuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gY2VsbHMuZmluZEluZGV4KChjZWxsKSA9PiBjb21wb3NlZFBhdGguaW5jbHVkZXMoY2VsbCkpO1xuICAgICAgaWYgKGtleSA9PT0gXCJFbnRlclwiICYmXG4gICAgICAgICFjb21wb3NlZFBhdGguaW5jbHVkZXMoYWN0aW9uc1N0YXJ0RWwpICYmXG4gICAgICAgICFjb21wb3NlZFBhdGguaW5jbHVkZXMoYWN0aW9uc0VuZEVsKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGVkKGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudEluZGV4ICsgMTtcbiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICBpZiAoIW9wZW4gJiYgb3BlbmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZvY3VzQ2VsbChudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VsbHNbMF0pIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNDZWxsKGNlbGxzWzBdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbHNbY3VycmVudEluZGV4XSAmJiBjZWxsc1tuZXh0SW5kZXhdKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c0NlbGwoY2VsbHNbbmV4dEluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJBcnJvd0xlZnRcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggLSAxO1xuICAgICAgICBpZiAoY3VycmVudEluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuZm9jdXNDZWxsKG51bGwpO1xuICAgICAgICAgIGlmIChvcGVuICYmIG9wZW5hYmxlKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbEZvY3VzUHJldmlvdXNJdGVtLmVtaXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VycmVudEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c0NlbGwobnVsbCk7XG4gICAgICAgICAgY29udGFpbmVyRWwuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjZWxsc1tjdXJyZW50SW5kZXhdICYmIGNlbGxzW3ByZXZJbmRleF0pIHtcbiAgICAgICAgICB0aGlzLmZvY3VzQ2VsbChjZWxsc1twcmV2SW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5mb2N1c0NlbGxOdWxsID0gKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c0NlbGwobnVsbCk7XG4gICAgfTtcbiAgICB0aGlzLmZvY3VzQ2VsbCA9IChmb2N1c0VsLCBzYXZlRm9jdXNJbmRleCA9IHRydWUpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGVudEVsLCBhY3Rpb25zU3RhcnRFbCwgYWN0aW9uc0VuZEVsLCBwYXJlbnRMaXN0RWwgfSA9IHRoaXM7XG4gICAgICBpZiAoc2F2ZUZvY3VzSW5kZXgpIHtcbiAgICAgICAgZm9jdXNNYXAuc2V0KHBhcmVudExpc3RFbCwgbnVsbCk7XG4gICAgICB9XG4gICAgICBjb25zdCBmb2N1c2VkRWwgPSBnZXRGaXJzdFRhYmJhYmxlKGZvY3VzRWwpO1xuICAgICAgW2FjdGlvbnNTdGFydEVsLCBjb250ZW50RWwsIGFjdGlvbnNFbmRFbF1cbiAgICAgICAgLmZpbHRlcigoZWwpID0+IGVsICYmICFlbC5oaWRkZW4pXG4gICAgICAgIC5mb3JFYWNoKCh0YWJsZUNlbGwsIGNlbGxJbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB0YWJJbmRleEF0dHIgPSBcInRhYmluZGV4XCI7XG4gICAgICAgIGlmICh0YWJsZUNlbGwgPT09IGZvY3VzRWwpIHtcbiAgICAgICAgICBmb2N1c0VsID09PSBmb2N1c2VkRWwgJiYgdGFibGVDZWxsLnNldEF0dHJpYnV0ZSh0YWJJbmRleEF0dHIsIFwiMFwiKTtcbiAgICAgICAgICBzYXZlRm9jdXNJbmRleCAmJiBmb2N1c01hcC5zZXQocGFyZW50TGlzdEVsLCBjZWxsSW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRhYmxlQ2VsbC5yZW1vdmVBdHRyaWJ1dGUodGFiSW5kZXhBdHRyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmb2N1c2VkRWw/LmZvY3VzKCk7XG4gICAgfTtcbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2xvc2FibGUgPSBmYWxzZTtcbiAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuZHJhZ0Rpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5kcmFnSGFuZGxlID0gZmFsc2U7XG4gICAgdGhpcy5sYWJlbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1ldGFkYXRhID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuc2V0U2l6ZSA9IG51bGw7XG4gICAgdGhpcy5zZXRQb3NpdGlvbiA9IG51bGw7XG4gICAgdGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdGlvbkFwcGVhcmFuY2UgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxldmVsID0gbnVsbDtcbiAgICB0aGlzLnZpc3VhbExldmVsID0gbnVsbDtcbiAgICB0aGlzLnBhcmVudExpc3RFbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9wZW5hYmxlID0gZmFsc2U7XG4gICAgdGhpcy5oYXNBY3Rpb25zU3RhcnQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0FjdGlvbnNFbmQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0N1c3RvbUNvbnRlbnQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0NvbnRlbnRTdGFydCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzQ29udGVudEVuZCA9IGZhbHNlO1xuICAgIHRoaXMuaGFzQ29udGVudEJvdHRvbSA9IGZhbHNlO1xuICB9XG4gIGFjdGl2ZUhhbmRsZXIoYWN0aXZlKSB7XG4gICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgIHRoaXMuZm9jdXNDZWxsKG51bGwsIGZhbHNlKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQ2xvc2VkQ2hhbmdlKCkge1xuICAgIHRoaXMuZW1pdENhbGNpdGVJbnRlcm5hbExpc3RJdGVtQ2hhbmdlKCk7XG4gIH1cbiAgaGFuZGxlRGlzYWJsZWRDaGFuZ2UoKSB7XG4gICAgdGhpcy5lbWl0Q2FsY2l0ZUludGVybmFsTGlzdEl0ZW1DaGFuZ2UoKTtcbiAgfVxuICBoYW5kbGVTZWxlY3RlZENoYW5nZSgpIHtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbExpc3RJdGVtU2VsZWN0LmVtaXQoKTtcbiAgfVxuICBvbk1lc3NhZ2VzQ2hhbmdlKCkge1xuICAgIC8qIHdpcmVkIHVwIGJ5IHQ5biB1dGlsICovXG4gIH1cbiAgaGFuZGxlQ2FsY2l0ZUludGVybmFsTGlzdERlZmF1bHRTbG90Q2hhbmdlcyhldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaGFuZGxlT3BlbmFibGVDaGFuZ2UodGhpcy5kZWZhdWx0U2xvdEVsKTtcbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XG4gICAgdGhpcy5wYXJlbnRMaXN0RWwgPSBlbC5jbG9zZXN0KGxpc3RTZWxlY3Rvcik7XG4gICAgdGhpcy5sZXZlbCA9IGdldERlcHRoKGVsKSArIDE7XG4gICAgdGhpcy52aXN1YWxMZXZlbCA9IGdldERlcHRoKGVsLCB0cnVlKTtcbiAgICB0aGlzLnNldFNlbGVjdGlvbkRlZmF1bHRzKCk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZFJlbmRlcigpIHtcbiAgICB1cGRhdGVIb3N0SW50ZXJhY3Rpb24odGhpcyk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQdWJsaWMgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xuICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCwgY29udGVudEVsLCBhY3Rpb25zU3RhcnRFbCwgYWN0aW9uc0VuZEVsLCBwYXJlbnRMaXN0RWwgfSA9IHRoaXM7XG4gICAgY29uc3QgZm9jdXNJbmRleCA9IGZvY3VzTWFwLmdldChwYXJlbnRMaXN0RWwpO1xuICAgIGlmICh0eXBlb2YgZm9jdXNJbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgY2VsbHMgPSBbYWN0aW9uc1N0YXJ0RWwsIGNvbnRlbnRFbCwgYWN0aW9uc0VuZEVsXS5maWx0ZXIoKGVsKSA9PiBlbCAmJiAhZWwuaGlkZGVuKTtcbiAgICAgIGlmIChjZWxsc1tmb2N1c0luZGV4XSkge1xuICAgICAgICB0aGlzLmZvY3VzQ2VsbChjZWxsc1tmb2N1c0luZGV4XSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyRWw/LmZvY3VzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRhaW5lckVsPy5mb2N1cygpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJTZWxlY3RlZCgpIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkLCBzZWxlY3Rpb25Nb2RlLCBzZWxlY3Rpb25BcHBlYXJhbmNlIH0gPSB0aGlzO1xuICAgIGlmIChzZWxlY3Rpb25Nb2RlID09PSBcIm5vbmVcIiB8fCBzZWxlY3Rpb25BcHBlYXJhbmNlID09PSBcImJvcmRlclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIChoKFwidGRcIiwgeyBjbGFzczogQ1NTJDIuc2VsZWN0aW9uQ29udGFpbmVyLCBrZXk6IFwic2VsZWN0aW9uLWNvbnRhaW5lclwiLCBvbkNsaWNrOiB0aGlzLml0ZW1DbGlja2VkIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBpY29uOiBzZWxlY3RlZFxuICAgICAgICA/IHNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIlxuICAgICAgICAgID8gSUNPTlMuc2VsZWN0ZWRNdWx0aXBsZVxuICAgICAgICAgIDogSUNPTlMuc2VsZWN0ZWRTaW5nbGVcbiAgICAgICAgOiBJQ09OUy51bnNlbGVjdGVkLCBzY2FsZTogXCJzXCIgfSkpKTtcbiAgfVxuICByZW5kZXJEcmFnSGFuZGxlKCkge1xuICAgIHJldHVybiB0aGlzLmRyYWdIYW5kbGUgPyAoaChcInRkXCIsIHsgY2xhc3M6IENTUyQyLmRyYWdDb250YWluZXIsIGtleTogXCJkcmFnLWhhbmRsZS1jb250YWluZXJcIiB9LCBoKFwiY2FsY2l0ZS1oYW5kbGVcIiwgeyBkaXNhYmxlZDogdGhpcy5kcmFnRGlzYWJsZWQsIGxhYmVsOiB0aGlzLmxhYmVsLCBzZXRQb3NpdGlvbjogdGhpcy5zZXRQb3NpdGlvbiwgc2V0U2l6ZTogdGhpcy5zZXRTaXplIH0pKSkgOiBudWxsO1xuICB9XG4gIHJlbmRlck9wZW4oKSB7XG4gICAgY29uc3QgeyBlbCwgb3Blbiwgb3BlbmFibGUsIHBhcmVudExpc3RFbCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXIgPSBnZXRFbGVtZW50RGlyKGVsKTtcbiAgICBjb25zdCBpY29uID0gb3BlbmFibGVcbiAgICAgID8gb3BlblxuICAgICAgICA/IElDT05TLm9wZW5cbiAgICAgICAgOiBkaXIgPT09IFwicnRsXCJcbiAgICAgICAgICA/IElDT05TLmNsb3NlZFJUTFxuICAgICAgICAgIDogSUNPTlMuY2xvc2VkTFRSXG4gICAgICA6IElDT05TLmJsYW5rO1xuICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9IG9wZW5hYmxlID8gdGhpcy50b2dnbGVPcGVuIDogdGhpcy5pdGVtQ2xpY2tlZDtcbiAgICByZXR1cm4gb3BlbmFibGUgfHwgcGFyZW50TGlzdEVsPy5vcGVuYWJsZSA/IChoKFwidGRcIiwgeyBjbGFzczogQ1NTJDIub3BlbkNvbnRhaW5lciwga2V5OiBcIm9wZW4tY29udGFpbmVyXCIsIG9uQ2xpY2s6IGNsaWNrSGFuZGxlciB9LCBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogaWNvbiwga2V5OiBpY29uLCBzY2FsZTogXCJzXCIgfSkpKSA6IG51bGw7XG4gIH1cbiAgcmVuZGVyQWN0aW9uc1N0YXJ0KCkge1xuICAgIGNvbnN0IHsgbGFiZWwsIGhhc0FjdGlvbnNTdGFydCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJ0ZFwiLCB7IFwiYXJpYS1sYWJlbFwiOiBsYWJlbCwgY2xhc3M6IENTUyQyLmFjdGlvbnNTdGFydCwgaGlkZGVuOiAhaGFzQWN0aW9uc1N0YXJ0LCBrZXk6IFwiYWN0aW9ucy1zdGFydC1jb250YWluZXJcIiwgcm9sZTogXCJncmlkY2VsbFwiLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5hY3Rpb25zU3RhcnRFbCA9IGVsKSB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTJDEuYWN0aW9uc1N0YXJ0LCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQWN0aW9uc1N0YXJ0U2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlckFjdGlvbnNFbmQoKSB7XG4gICAgY29uc3QgeyBsYWJlbCwgaGFzQWN0aW9uc0VuZCwgY2xvc2FibGUsIG1lc3NhZ2VzIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcInRkXCIsIHsgXCJhcmlhLWxhYmVsXCI6IGxhYmVsLCBjbGFzczogQ1NTJDIuYWN0aW9uc0VuZCwgaGlkZGVuOiAhKGhhc0FjdGlvbnNFbmQgfHwgY2xvc2FibGUpLCBrZXk6IFwiYWN0aW9ucy1lbmQtY29udGFpbmVyXCIsIHJvbGU6IFwiZ3JpZGNlbGxcIixcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuYWN0aW9uc0VuZEVsID0gZWwpIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMkMS5hY3Rpb25zRW5kLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQWN0aW9uc0VuZFNsb3RDaGFuZ2UgfSksIGNsb3NhYmxlID8gKGgoXCJjYWxjaXRlLWFjdGlvblwiLCB7IGFwcGVhcmFuY2U6IFwidHJhbnNwYXJlbnRcIiwgaWNvbjogSUNPTlMuY2xvc2UsIGtleTogXCJjbG9zZS1hY3Rpb25cIiwgbGFiZWw6IG1lc3NhZ2VzLmNsb3NlLCBvbkNsaWNrOiB0aGlzLmNsb3NlQ2xpY2tIYW5kbGVyLCB0ZXh0OiBtZXNzYWdlcy5jbG9zZSB9KSkgOiBudWxsKSk7XG4gIH1cbiAgcmVuZGVyQ29udGVudFN0YXJ0KCkge1xuICAgIGNvbnN0IHsgaGFzQ29udGVudFN0YXJ0IH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MkMi5jb250ZW50U3RhcnQsIGhpZGRlbjogIWhhc0NvbnRlbnRTdGFydCB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTJDEuY29udGVudFN0YXJ0LCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQ29udGVudFN0YXJ0U2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlckN1c3RvbUNvbnRlbnQoKSB7XG4gICAgY29uc3QgeyBoYXNDdXN0b21Db250ZW50IH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MkMi5jdXN0b21Db250ZW50LCBoaWRkZW46ICFoYXNDdXN0b21Db250ZW50IH0sIGgoXCJzbG90XCIsIHsgbmFtZTogU0xPVFMkMS5jb250ZW50LCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlQ29udGVudFNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJDb250ZW50RW5kKCkge1xuICAgIGNvbnN0IHsgaGFzQ29udGVudEVuZCB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTJDIuY29udGVudEVuZCwgaGlkZGVuOiAhaGFzQ29udGVudEVuZCB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTJDEuY29udGVudEVuZCwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUNvbnRlbnRFbmRTbG90Q2hhbmdlIH0pKSk7XG4gIH1cbiAgcmVuZGVyQ29udGVudEJvdHRvbSgpIHtcbiAgICBjb25zdCB7IGhhc0NvbnRlbnRCb3R0b20sIHZpc3VhbExldmVsIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MkMi5jb250ZW50Qm90dG9tLCBoaWRkZW46ICFoYXNDb250ZW50Qm90dG9tLCBzdHlsZTogeyBcIi0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQtbXVsdGlwbGllclwiOiBgJHt2aXN1YWxMZXZlbH1gIH0gfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUyQxLmNvbnRlbnRCb3R0b20sIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVDb250ZW50Qm90dG9tU2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlckRlZmF1bHRDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHtcbiAgICAgICAgW0NTUyQyLm5lc3RlZENvbnRhaW5lcl06IHRydWUsXG4gICAgICAgIFtDU1MkMi5uZXN0ZWRDb250YWluZXJIaWRkZW5dOiB0aGlzLm9wZW5hYmxlICYmICF0aGlzLm9wZW4sXG4gICAgICB9IH0sIGgoXCJzbG90XCIsIHsgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlLCByZWY6IChlbCkgPT4gKHRoaXMuZGVmYXVsdFNsb3RFbCA9IGVsKSB9KSkpO1xuICB9XG4gIHJlbmRlckNvbnRlbnRQcm9wZXJ0aWVzKCkge1xuICAgIGNvbnN0IHsgbGFiZWwsIGRlc2NyaXB0aW9uLCBoYXNDdXN0b21Db250ZW50IH0gPSB0aGlzO1xuICAgIHJldHVybiAhaGFzQ3VzdG9tQ29udGVudCAmJiAoISFsYWJlbCB8fCAhIWRlc2NyaXB0aW9uKSA/IChoKFwiZGl2XCIsIHsgY2xhc3M6IENTUyQyLmNvbnRlbnQsIGtleTogXCJjb250ZW50XCIgfSwgbGFiZWwgPyAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MkMi5sYWJlbCwga2V5OiBcImxhYmVsXCIgfSwgbGFiZWwpKSA6IG51bGwsIGRlc2NyaXB0aW9uID8gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTJDIuZGVzY3JpcHRpb24sIGtleTogXCJkZXNjcmlwdGlvblwiIH0sIGRlc2NyaXB0aW9uKSkgOiBudWxsKSkgOiBudWxsO1xuICB9XG4gIHJlbmRlckNvbnRlbnRDb250YWluZXIoKSB7XG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgbGFiZWwsIHNlbGVjdGlvbk1vZGUsIGhhc0N1c3RvbUNvbnRlbnQgfSA9IHRoaXM7XG4gICAgY29uc3QgaGFzQ2VudGVyQ29udGVudCA9IGhhc0N1c3RvbUNvbnRlbnQgfHwgISFsYWJlbCB8fCAhIWRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBbXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRTdGFydCgpLFxuICAgICAgdGhpcy5yZW5kZXJDdXN0b21Db250ZW50KCksXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRQcm9wZXJ0aWVzKCksXG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRFbmQoKSxcbiAgICBdO1xuICAgIHJldHVybiAoaChcInRkXCIsIHsgXCJhcmlhLWxhYmVsXCI6IGxhYmVsLCBjbGFzczoge1xuICAgICAgICBbQ1NTJDIuY29udGVudENvbnRhaW5lcl06IHRydWUsXG4gICAgICAgIFtDU1MkMi5jb250ZW50Q29udGFpbmVyU2VsZWN0YWJsZV06IHNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiLFxuICAgICAgICBbQ1NTJDIuY29udGVudENvbnRhaW5lckhhc0NlbnRlckNvbnRlbnRdOiBoYXNDZW50ZXJDb250ZW50LFxuICAgICAgfSwga2V5OiBcImNvbnRlbnQtY29udGFpbmVyXCIsIG9uQ2xpY2s6IHRoaXMuaXRlbUNsaWNrZWQsIHJvbGU6IFwiZ3JpZGNlbGxcIixcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuY29udGVudEVsID0gZWwpIH0sIGNvbnRlbnQpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvcGVuYWJsZSwgb3BlbiwgbGV2ZWwsIHNldFBvc2l0aW9uLCBzZXRTaXplLCBhY3RpdmUsIGxhYmVsLCBzZWxlY3RlZCwgc2VsZWN0aW9uQXBwZWFyYW5jZSwgc2VsZWN0aW9uTW9kZSwgY2xvc2VkLCB2aXN1YWxMZXZlbCwgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2hvd0JvcmRlciA9IHNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiICYmIHNlbGVjdGlvbkFwcGVhcmFuY2UgPT09IFwiYm9yZGVyXCI7XG4gICAgY29uc3QgYm9yZGVyU2VsZWN0ZWQgPSBzaG93Qm9yZGVyICYmIHNlbGVjdGVkO1xuICAgIGNvbnN0IGJvcmRlclVuc2VsZWN0ZWQgPSBzaG93Qm9yZGVyICYmICFzZWxlY3RlZDtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcInRyXCIsIHsgXCJhcmlhLWV4cGFuZGVkXCI6IG9wZW5hYmxlID8gdG9BcmlhQm9vbGVhbihvcGVuKSA6IG51bGwsIFwiYXJpYS1sYWJlbFwiOiBsYWJlbCwgXCJhcmlhLWxldmVsXCI6IGxldmVsLCBcImFyaWEtcG9zaW5zZXRcIjogc2V0UG9zaXRpb24sIFwiYXJpYS1zZWxlY3RlZFwiOiB0b0FyaWFCb29sZWFuKHNlbGVjdGVkKSwgXCJhcmlhLXNldHNpemVcIjogc2V0U2l6ZSwgY2xhc3M6IHtcbiAgICAgICAgW0NTUyQyLmNvbnRhaW5lcl06IHRydWUsXG4gICAgICAgIFtDU1MkMi5jb250YWluZXJCb3JkZXJTZWxlY3RlZF06IGJvcmRlclNlbGVjdGVkLFxuICAgICAgICBbQ1NTJDIuY29udGFpbmVyQm9yZGVyVW5zZWxlY3RlZF06IGJvcmRlclVuc2VsZWN0ZWQsXG4gICAgICB9LCBoaWRkZW46IGNsb3NlZCwgb25Gb2N1czogdGhpcy5mb2N1c0NlbGxOdWxsLCBvbktleURvd246IHRoaXMuaGFuZGxlSXRlbUtleURvd24sIHJvbGU6IFwicm93XCIsIHN0eWxlOiB7IFwiLS1jYWxjaXRlLWxpc3QtaXRlbS1zcGFjaW5nLWluZGVudC1tdWx0aXBsaWVyXCI6IGAke3Zpc3VhbExldmVsfWAgfSwgdGFiSW5kZXg6IGFjdGl2ZSA/IDAgOiAtMSxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IChlbCkgPT4gKHRoaXMuY29udGFpbmVyRWwgPSBlbCkgfSwgdGhpcy5yZW5kZXJEcmFnSGFuZGxlKCksIHRoaXMucmVuZGVyU2VsZWN0ZWQoKSwgdGhpcy5yZW5kZXJPcGVuKCksIHRoaXMucmVuZGVyQWN0aW9uc1N0YXJ0KCksIHRoaXMucmVuZGVyQ29udGVudENvbnRhaW5lcigpLCB0aGlzLnJlbmRlckFjdGlvbnNFbmQoKSksIHRoaXMucmVuZGVyQ29udGVudEJvdHRvbSgpLCB0aGlzLnJlbmRlckRlZmF1bHRDb250YWluZXIoKSkpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZW1pdENhbGNpdGVJbnRlcm5hbExpc3RJdGVtQ2hhbmdlKCkge1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1DaGFuZ2UuZW1pdCgpO1xuICB9XG4gIHNldFNlbGVjdGlvbkRlZmF1bHRzKCkge1xuICAgIGNvbnN0IHsgcGFyZW50TGlzdEVsLCBzZWxlY3Rpb25Nb2RlLCBzZWxlY3Rpb25BcHBlYXJhbmNlIH0gPSB0aGlzO1xuICAgIGlmICghcGFyZW50TGlzdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc2VsZWN0aW9uTW9kZSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gcGFyZW50TGlzdEVsLnNlbGVjdGlvbk1vZGU7XG4gICAgfVxuICAgIGlmICghc2VsZWN0aW9uQXBwZWFyYW5jZSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb25BcHBlYXJhbmNlID0gcGFyZW50TGlzdEVsLnNlbGVjdGlvbkFwcGVhcmFuY2U7XG4gICAgfVxuICB9XG4gIGhhbmRsZU9wZW5hYmxlQ2hhbmdlKHNsb3RFbCkge1xuICAgIGlmICghc2xvdEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyZW50TGlzdEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxpc3RJdGVtQ2hpbGRyZW4gPSBnZXRMaXN0SXRlbUNoaWxkcmVuKHNsb3RFbCk7XG4gICAgY29uc3QgbGlzdEl0ZW1DaGlsZExpc3RzID0gZ2V0TGlzdEl0ZW1DaGlsZExpc3RzKHNsb3RFbCk7XG4gICAgdXBkYXRlTGlzdEl0ZW1DaGlsZHJlbihsaXN0SXRlbUNoaWxkcmVuKTtcbiAgICBjb25zdCBvcGVuYWJsZSA9ICEhbGlzdEl0ZW1DaGlsZHJlbi5sZW5ndGggfHwgISFsaXN0SXRlbUNoaWxkTGlzdHMubGVuZ3RoO1xuICAgIGlmIChvcGVuYWJsZSAmJiBwYXJlbnRMaXN0RWwgJiYgIXBhcmVudExpc3RFbC5vcGVuYWJsZSkge1xuICAgICAgcGFyZW50TGlzdEVsLm9wZW5hYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5vcGVuYWJsZSA9IG9wZW5hYmxlO1xuICAgIGlmICghb3BlbmFibGUpIHtcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgZ2V0IGFzc2V0c0RpcnMoKSB7IHJldHVybiBbXCJhc3NldHNcIl07IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiYWN0aXZlXCI6IFtcImFjdGl2ZUhhbmRsZXJcIl0sXG4gICAgXCJjbG9zZWRcIjogW1wiaGFuZGxlQ2xvc2VkQ2hhbmdlXCJdLFxuICAgIFwiZGlzYWJsZWRcIjogW1wiaGFuZGxlRGlzYWJsZWRDaGFuZ2VcIl0sXG4gICAgXCJzZWxlY3RlZFwiOiBbXCJoYW5kbGVTZWxlY3RlZENoYW5nZVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxufTtcbkxpc3RJdGVtLnN0eWxlID0gbGlzdEl0ZW1Dc3M7XG5cbmNvbnN0IENTUyA9IHtcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBoZWFkaW5nOiBcImhlYWRpbmdcIixcbn07XG5cbmNvbnN0IGxpc3RJdGVtR3JvdXBDc3MgPSBcIjpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSk7LS1jYWxjaXRlLWxpc3QtaXRlbS1zcGFjaW5nLWluZGVudDoxcmVtfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX0uY29udGFpbmVye21hcmdpbjowcHg7ZGlzcGxheTpmbGV4O2ZsZXg6MSAxIDAlO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTIpO3BhZGRpbmc6MC43NXJlbTtmb250LWZhbWlseTp2YXIoLS1jYWxjaXRlLXNhbnMtZmFtaWx5KTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtYm9sZCk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpfS5oZWFkaW5ne3BhZGRpbmctaW5saW5lLXN0YXJ0OmNhbGModmFyKC0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQpICogdmFyKC0tY2FsY2l0ZS1saXN0LWl0ZW0tc3BhY2luZy1pbmRlbnQtbXVsdGlwbGllcikpfTo6c2xvdHRlZChjYWxjaXRlLWxpc3QtaXRlbSl7LS10dy1zaGFkb3c6MCAtMXB4IDAgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMyk7LS10dy1zaGFkb3ctY29sb3JlZDowIC0xcHggMCB2YXIoLS10dy1zaGFkb3ctY29sb3IpO2JveC1zaGFkb3c6dmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1yaW5nLXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctc2hhZG93KTttYXJnaW4tYmxvY2stc3RhcnQ6MXB4fTo6c2xvdHRlZChjYWxjaXRlLWxpc3QtaXRlbTpudGgtY2hpbGQoMSBvZiA6bm90KFtoaWRkZW5dKSkpey0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyk7bWFyZ2luLWJsb2NrLXN0YXJ0OjBweH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgTGlzdEl0ZW1Hcm91cCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUdyb3VwRGVmYXVsdFNsb3RDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnRlcm5hbExpc3RJdGVtR3JvdXBEZWZhdWx0U2xvdENoYW5nZVwiLCA2KTtcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAgIC8vXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICB0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxMaXN0SXRlbUdyb3VwRGVmYXVsdFNsb3RDaGFuZ2UuZW1pdCgpO1xuICAgIH07XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGVhZGluZyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnZpc3VhbExldmVsID0gbnVsbDtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbnN0IHsgZWwgfSA9IHRoaXM7XG4gICAgdGhpcy52aXN1YWxMZXZlbCA9IGdldERlcHRoKGVsLCB0cnVlKTtcbiAgICBjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkUmVuZGVyKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGhlYWRpbmcsIHZpc3VhbExldmVsIH0gPSB0aGlzO1xuICAgIHJldHVybiAoaChIb3N0LCBudWxsLCBoKFwidHJcIiwgeyBjbGFzczogQ1NTLmNvbnRhaW5lciwgc3R5bGU6IHsgXCItLWNhbGNpdGUtbGlzdC1pdGVtLXNwYWNpbmctaW5kZW50LW11bHRpcGxpZXJcIjogYCR7dmlzdWFsTGV2ZWx9YCB9IH0sIGgoXCJ0ZFwiLCB7IGNsYXNzOiBDU1MuaGVhZGluZywgY29sU3BhbjogTUFYX0NPTFVNTlMgfSwgaGVhZGluZykpLCBoKFwic2xvdFwiLCB7IG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVEZWZhdWx0U2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5MaXN0SXRlbUdyb3VwLnN0eWxlID0gbGlzdEl0ZW1Hcm91cENzcztcblxuZXhwb3J0IHsgTGlzdCBhcyBjYWxjaXRlX2xpc3QsIExpc3RJdGVtIGFzIGNhbGNpdGVfbGlzdF9pdGVtLCBMaXN0SXRlbUdyb3VwIGFzIGNhbGNpdGVfbGlzdF9pdGVtX2dyb3VwIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGNpdGUtbGlzdF8zLmVudHJ5LmpzLm1hcCIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2Mi4wLjBcbiAqL1xuaW1wb3J0IHsgZiBhcyBmb3JjZVVwZGF0ZSB9IGZyb20gJy4vaW5kZXgtODZmYWVmOWMuanMnO1xuXG5jb25zdCByZXNvbHZlTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb21pc2VNYXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIHNldHMgdXAgdGhlIGNvbXBvbmVudCBmb3IgdGhlIGFiaWxpdHkgdG8ga25vdyB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgaW4gdGhlIGBjb21wb25lbnRXaWxsTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnRXaWxsTG9hZCgpOiB2b2lkIHtcbiAqICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuZnVuY3Rpb24gc2V0VXBMb2FkYWJsZUNvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcHJvbWlzZU1hcC5zZXQoY29tcG9uZW50LCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZU1hcC5zZXQoY29tcG9uZW50LCByZXNvbHZlKSkpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGxldHMgdGhlIGxvYWRhYmxlIGNvbXBvbmVudCBrbm93IHRoYXQgaXQgaXMgbm93IGxvYWRlZC5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSB1c2VkIGluIHRoZSBgY29tcG9uZW50RGlkTG9hZGAgbGlmZWN5Y2xlIGhvb2suXG4gKlxuICogYGBgXG4gKiBjb21wb25lbnREaWRMb2FkKCk6IHZvaWQge1xuICogICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIHNldENvbXBvbmVudExvYWRlZChjb21wb25lbnQpIHtcbiAgcmVzb2x2ZU1hcC5nZXQoY29tcG9uZW50KSgpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhIGNvbXBvbmVudCBoYXMgYmVlbiBsb2FkZWQgKFRoZSBcImNvbXBvbmVudERpZExvYWRcIiBTdGVuY2lsIGxpZmVjeWNsZSBtZXRob2QgaGFzIGJlZW4gY2FsbGVkKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QuXG4gKlxuICogYGBgXG4gKiBhc3luYyBteU1ldGhvZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAqICAgYXdhaXQgY29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICogfVxuICogYGBgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICogQHJldHVybnMgUHJvbWlzZTx2b2lkPlxuICovXG5mdW5jdGlvbiBjb21wb25lbnRMb2FkZWQoY29tcG9uZW50KSB7XG4gIHJldHVybiBwcm9taXNlTWFwLmdldChjb21wb25lbnQpO1xufVxuLyoqXG4gKiBUaGlzIGhlbHBlciB1dGlsIGNhbiBiZSB1c2VkIHRvIGVuc3VyaW5nIHRoZSBjb21wb25lbnQgaXMgbG9hZGVkIGFuZCByZW5kZXJlZCBieSB0aGUgYnJvd3NlciAoVGhlIFwiY29tcG9uZW50RGlkTG9hZFwiIFN0ZW5jaWwgbGlmZWN5Y2xlIG1ldGhvZCBoYXMgYmVlbiBjYWxsZWQgYW5kIGFueSBpbnRlcm5hbCBlbGVtZW50cyBhcmUgZm9jdXNhYmxlKS5cbiAqXG4gKiBSZXF1aXJlcyByZXF1aXJlcyBgTG9hZGFibGVDb21wb25lbnRgIHRvIGJlIGltcGxlbWVudGVkLlxuICpcbiAqIEEgY29tcG9uZW50IGRldmVsb3BlciBjYW4gYXdhaXQgdGhpcyBtZXRob2QgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBhbnkgbG9naWMgdGhhdCByZXF1aXJlcyBhIGNvbXBvbmVudCB0byBiZSBsb2FkZWQgZmlyc3QgYW5kIHRoZW4gYW4gaW50ZXJuYWwgZWxlbWVudCBiZSBmb2N1c2VkLlxuICpcbiAqIGBgYFxuICogYXN5bmMgc2V0Rm9jdXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gKiAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAqICAgdGhpcy5pbnRlcm5hbEVsZW1lbnQ/LmZvY3VzKCk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKiBAcmV0dXJucyBQcm9taXNlPHZvaWQ+XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbXBvbmVudEZvY3VzYWJsZShjb21wb25lbnQpIHtcbiAgYXdhaXQgY29tcG9uZW50TG9hZGVkKGNvbXBvbmVudCk7XG4gIGZvcmNlVXBkYXRlKGNvbXBvbmVudCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xufVxuXG5leHBvcnQgeyBzZXRDb21wb25lbnRMb2FkZWQgYXMgYSwgY29tcG9uZW50TG9hZGVkIGFzIGIsIGNvbXBvbmVudEZvY3VzYWJsZSBhcyBjLCBzZXRVcExvYWRhYmxlQ29tcG9uZW50IGFzIHMgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGFibGUtYjE3Mzk2ZTAuanMubWFwIiwiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYyLjAuMFxuICovXG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgYWN0aW9uc1N0YXJ0OiBcImFjdGlvbnMtc3RhcnRcIixcbiAgY29udGVudFN0YXJ0OiBcImNvbnRlbnQtc3RhcnRcIixcbiAgY29udGVudDogXCJjb250ZW50XCIsXG4gIGNvbnRlbnRFbmQ6IFwiY29udGVudC1lbmRcIixcbiAgYWN0aW9uc0VuZDogXCJhY3Rpb25zLWVuZFwiLFxufTtcbmNvbnN0IFNMT1RTID0ge1xuICBhY3Rpb25zU3RhcnQ6IFwiYWN0aW9ucy1zdGFydFwiLFxuICBjb250ZW50U3RhcnQ6IFwiY29udGVudC1zdGFydFwiLFxuICBjb250ZW50RW5kOiBcImNvbnRlbnQtZW5kXCIsXG4gIGFjdGlvbnNFbmQ6IFwiYWN0aW9ucy1lbmRcIixcbn07XG5cbmV4cG9ydCB7IENTUyBhcyBDLCBTTE9UUyBhcyBTIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc291cmNlcy1iZDdhM2Y5My5qcy5tYXAiLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjIuMC4wXG4gKi9cbmltcG9ydCB7IGEgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSAnLi9pbmRleC04NmZhZWY5Yy5qcyc7XG5pbXBvcnQgeyBnIGFzIGdldFN1cHBvcnRlZExvY2FsZSB9IGZyb20gJy4vbG9jYWxlLTZlNzgzY2YwLmpzJztcblxuY29uc3QgY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlID0ge307XG5hc3luYyBmdW5jdGlvbiBnZXRNZXNzYWdlQnVuZGxlKGxhbmcsIGNvbXBvbmVudCkge1xuICBjb25zdCBrZXkgPSBgJHtjb21wb25lbnR9XyR7bGFuZ31gO1xuICBpZiAoY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV0pIHtcbiAgICByZXR1cm4gY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV07XG4gIH1cbiAgY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV0gPSBmZXRjaChnZXRBc3NldFBhdGgoYC4vYXNzZXRzLyR7Y29tcG9uZW50fS90OW4vbWVzc2FnZXNfJHtsYW5nfS5qc29uYCkpXG4gICAgLnRoZW4oKHJlc3ApID0+IHtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93TWVzc2FnZUZldGNoRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3AuanNvbigpO1xuICB9KVxuICAgIC5jYXRjaCgoKSA9PiB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCkpO1xuICByZXR1cm4gY29tcG9uZW50TGFuZ1RvTWVzc2FnZUJ1bmRsZUNhY2hlW2tleV07XG59XG5mdW5jdGlvbiB0aHJvd01lc3NhZ2VGZXRjaEVycm9yKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJjb3VsZCBub3QgZmV0Y2ggY29tcG9uZW50IG1lc3NhZ2UgYnVuZGxlXCIpO1xufVxuZnVuY3Rpb24gbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50Lm1lc3NhZ2VzID0ge1xuICAgIC4uLmNvbXBvbmVudC5kZWZhdWx0TWVzc2FnZXMsXG4gICAgLi4uY29tcG9uZW50Lm1lc3NhZ2VPdmVycmlkZXMsXG4gIH07XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSBzZXRzIHVwIHRoZSBtZXNzYWdlcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQuIEl0IHNob3VsZCBiZSBhd2FpdGVkIGluIHRoZSBgY29tcG9uZW50V2lsbExvYWRgIGxpZmVjeWNsZSBob29rLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2V0VXBNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50LmRlZmF1bHRNZXNzYWdlcyA9IGF3YWl0IGZldGNoTWVzc2FnZXMoY29tcG9uZW50LCBjb21wb25lbnQuZWZmZWN0aXZlTG9jYWxlKTtcbiAgbWVyZ2VNZXNzYWdlcyhjb21wb25lbnQpO1xufVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpIHtcbiAgY29uc3QgeyBlbCB9ID0gY29tcG9uZW50O1xuICBjb25zdCB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGNvbXBvbmVudE5hbWUgPSB0YWcucmVwbGFjZShcImNhbGNpdGUtXCIsIFwiXCIpO1xuICByZXR1cm4gZ2V0TWVzc2FnZUJ1bmRsZShnZXRTdXBwb3J0ZWRMb2NhbGUobGFuZywgXCJ0OW5cIiksIGNvbXBvbmVudE5hbWUpO1xufVxuLyoqXG4gKiBUaGlzIHV0aWxpdHkgbXVzdCBiZSBzZXQgdXAgZm9yIHRoZSBjb21wb25lbnQgdG8gdXBkYXRlIGl0cyBkZWZhdWx0IG1lc3NhZ2UgYnVuZGxlIGlmIHRoZSBsb2NhbGUgY2hhbmdlcy5cbiAqXG4gKiBJdCBjYW4gYmUgc2V0IHVwIGluICoqZWl0aGVyKiogb2YgdGhlIGZvbGxvd2luZyB3YXlzOlxuICpcbiAqIDEuIGNhbGxlZCBmcm9tIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYG9uTG9jYWxlQ2hhbmdlYCBtZXRob2Qgb3JcbiAqIDIuIGNhbGxlZCBmcm9tIGEgd2F0Y2hlciBjb25maWd1cmVkIHRvIHdhdGNoIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYGVmZmVjdGl2ZUxvY2FsZWAgcHJvcFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRcbiAqIEBwYXJhbSBsYW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2VzKGNvbXBvbmVudCwgbGFuZykge1xuICBjb21wb25lbnQuZGVmYXVsdE1lc3NhZ2VzID0gYXdhaXQgZmV0Y2hNZXNzYWdlcyhjb21wb25lbnQsIGxhbmcpO1xuICBtZXJnZU1lc3NhZ2VzKGNvbXBvbmVudCk7XG59XG4vKipcbiAqIFRoaXMgdXRpbGl0eSBzZXRzIHVwIGludGVybmFscyBmb3IgbWVzc2FnZXMgc3VwcG9ydC5cbiAqXG4gKiBJdCBuZWVkcyB0byBiZSBjYWxsZWQgaW4gYGNvbm5lY3RlZENhbGxiYWNrYFxuICpcbiAqICoqTm90ZSoqOiB0aGlzIG11c3QgYmUgY2FsbGVkIGFmdGVyIGBMb2NhbGl6ZWRDb21wb25lbnRgJ3MgYGNvbm5lY3RMb2NhbGl6ZWRgIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50XG4gKi9cbmZ1bmN0aW9uIGNvbm5lY3RNZXNzYWdlcyhjb21wb25lbnQpIHtcbiAgY29tcG9uZW50Lm9uTWVzc2FnZXNDaGFuZ2UgPSBkZWZhdWx0T25NZXNzYWdlc0NoYW5nZTtcbn1cbi8qKlxuICogVGhpcyB1dGlsaXR5IHRlYXJzIGRvd24gaW50ZXJuYWxzIGZvciBtZXNzYWdlcyBzdXBwb3J0LlxuICpcbiAqIEl0IG5lZWRzIHRvIGJlIGNhbGxlZCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudFxuICovXG5mdW5jdGlvbiBkaXNjb25uZWN0TWVzc2FnZXMoY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5vbk1lc3NhZ2VzQ2hhbmdlID0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gZGVmYXVsdE9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gIG1lcmdlTWVzc2FnZXModGhpcyk7XG59XG5cbmV4cG9ydCB7IGNvbm5lY3RNZXNzYWdlcyBhcyBjLCBkaXNjb25uZWN0TWVzc2FnZXMgYXMgZCwgc2V0VXBNZXNzYWdlcyBhcyBzLCB1cGRhdGVNZXNzYWdlcyBhcyB1IH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXQ5bi0wYmNkY2E1NC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=